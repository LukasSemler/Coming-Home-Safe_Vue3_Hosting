var ay=Object.defineProperty,sy=Object.defineProperties;var ly=Object.getOwnPropertyDescriptors;var Xd=Object.getOwnPropertySymbols;var J_=Object.prototype.hasOwnProperty,Q_=Object.prototype.propertyIsEnumerable;var Y_=(q,Q,V)=>Q in q?ay(q,Q,{enumerable:!0,configurable:!0,writable:!0,value:V}):q[Q]=V,Kr=(q,Q)=>{for(var V in Q||(Q={}))J_.call(Q,V)&&Y_(q,V,Q[V]);if(Xd)for(var V of Xd(Q))Q_.call(Q,V)&&Y_(q,V,Q[V]);return q},Jo=(q,Q)=>sy(q,ly(Q));var Ts=(q,Q)=>{var V={};for(var _e in q)J_.call(q,_e)&&Q.indexOf(_e)<0&&(V[_e]=q[_e]);if(q!=null&&Xd)for(var _e of Xd(q))Q.indexOf(_e)<0&&Q_.call(q,_e)&&(V[_e]=q[_e]);return V};function makeMap(q,Q){const V=Object.create(null),_e=q.split(",");for(let ce=0;ce<_e.length;ce++)V[_e[ce]]=!0;return Q?ce=>!!V[ce.toLowerCase()]:ce=>!!V[ce]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(q){return!!q||q===""}function normalizeStyle(q){if(isArray$1(q)){const Q={};for(let V=0;V<q.length;V++){const _e=q[V],ce=isString$1(_e)?parseStringStyle(_e):normalizeStyle(_e);if(ce)for(const ne in ce)Q[ne]=ce[ne]}return Q}else{if(isString$1(q))return q;if(isObject$1(q))return q}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(q){const Q={};return q.split(listDelimiterRE).forEach(V=>{if(V){const _e=V.split(propertyDelimiterRE);_e.length>1&&(Q[_e[0].trim()]=_e[1].trim())}}),Q}function normalizeClass(q){let Q="";if(isString$1(q))Q=q;else if(isArray$1(q))for(let V=0;V<q.length;V++){const _e=normalizeClass(q[V]);_e&&(Q+=_e+" ")}else if(isObject$1(q))for(const V in q)q[V]&&(Q+=V+" ");return Q.trim()}const toDisplayString=q=>isString$1(q)?q:q==null?"":isArray$1(q)||isObject$1(q)&&(q.toString===objectToString||!isFunction$2(q.toString))?JSON.stringify(q,replacer,2):String(q),replacer=(q,Q)=>Q&&Q.__v_isRef?replacer(q,Q.value):isMap(Q)?{[`Map(${Q.size})`]:[...Q.entries()].reduce((V,[_e,ce])=>(V[`${_e} =>`]=ce,V),{})}:isSet(Q)?{[`Set(${Q.size})`]:[...Q.values()]}:isObject$1(Q)&&!isArray$1(Q)&&!isPlainObject$2(Q)?String(Q):Q,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=q=>onRE.test(q),isModelListener=q=>q.startsWith("onUpdate:"),extend$1=Object.assign,remove=(q,Q)=>{const V=q.indexOf(Q);V>-1&&q.splice(V,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(q,Q)=>hasOwnProperty.call(q,Q),isArray$1=Array.isArray,isMap=q=>toTypeString(q)==="[object Map]",isSet=q=>toTypeString(q)==="[object Set]",isFunction$2=q=>typeof q=="function",isString$1=q=>typeof q=="string",isSymbol=q=>typeof q=="symbol",isObject$1=q=>q!==null&&typeof q=="object",isPromise=q=>isObject$1(q)&&isFunction$2(q.then)&&isFunction$2(q.catch),objectToString=Object.prototype.toString,toTypeString=q=>objectToString.call(q),toRawType=q=>toTypeString(q).slice(8,-1),isPlainObject$2=q=>toTypeString(q)==="[object Object]",isIntegerKey=q=>isString$1(q)&&q!=="NaN"&&q[0]!=="-"&&""+parseInt(q,10)===q,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=q=>{const Q=Object.create(null);return V=>Q[V]||(Q[V]=q(V))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(q=>q.replace(camelizeRE,(Q,V)=>V?V.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(q=>q.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(q=>q.charAt(0).toUpperCase()+q.slice(1)),toHandlerKey=cacheStringFunction(q=>q?`on${capitalize(q)}`:""),hasChanged=(q,Q)=>!Object.is(q,Q),invokeArrayFns=(q,Q)=>{for(let V=0;V<q.length;V++)q[V](Q)},def=(q,Q,V)=>{Object.defineProperty(q,Q,{configurable:!0,enumerable:!1,value:V})},toNumber=q=>{const Q=parseFloat(q);return isNaN(Q)?q:Q};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(Q=!1){this.active=!0,this.effects=[],this.cleanups=[],!Q&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(Q){if(this.active)try{return activeEffectScope=this,Q()}finally{activeEffectScope=this.parent}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(Q){if(this.active){let V,_e;for(V=0,_e=this.effects.length;V<_e;V++)this.effects[V].stop();for(V=0,_e=this.cleanups.length;V<_e;V++)this.cleanups[V]();if(this.scopes)for(V=0,_e=this.scopes.length;V<_e;V++)this.scopes[V].stop(!0);if(this.parent&&!Q){const ce=this.parent.scopes.pop();ce&&ce!==this&&(this.parent.scopes[this.index]=ce,ce.index=this.index)}this.active=!1}}}function effectScope(q){return new EffectScope(q)}function recordEffectScope(q,Q=activeEffectScope){Q&&Q.active&&Q.effects.push(q)}const createDep=q=>{const Q=new Set(q);return Q.w=0,Q.n=0,Q},wasTracked=q=>(q.w&trackOpBit)>0,newTracked=q=>(q.n&trackOpBit)>0,initDepMarkers=({deps:q})=>{if(q.length)for(let Q=0;Q<q.length;Q++)q[Q].w|=trackOpBit},finalizeDepMarkers=q=>{const{deps:Q}=q;if(Q.length){let V=0;for(let _e=0;_e<Q.length;_e++){const ce=Q[_e];wasTracked(ce)&&!newTracked(ce)?ce.delete(q):Q[V++]=ce,ce.w&=~trackOpBit,ce.n&=~trackOpBit}Q.length=V}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(Q,V=null,_e){this.fn=Q,this.scheduler=V,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,_e)}run(){if(!this.active)return this.fn();let Q=activeEffect,V=shouldTrack;for(;Q;){if(Q===this)return;Q=Q.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=V,this.parent=void 0}}stop(){this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(q){const{deps:Q}=q;if(Q.length){for(let V=0;V<Q.length;V++)Q[V].delete(q);Q.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const q=trackStack.pop();shouldTrack=q===void 0?!0:q}function track(q,Q,V){if(shouldTrack&&activeEffect){let _e=targetMap.get(q);_e||targetMap.set(q,_e=new Map);let ce=_e.get(V);ce||_e.set(V,ce=createDep()),trackEffects(ce)}}function trackEffects(q,Q){let V=!1;effectTrackDepth<=maxMarkerBits?newTracked(q)||(q.n|=trackOpBit,V=!wasTracked(q)):V=!q.has(activeEffect),V&&(q.add(activeEffect),activeEffect.deps.push(q))}function trigger$1(q,Q,V,_e,ce,ne){const Ee=targetMap.get(q);if(!Ee)return;let j=[];if(Q==="clear")j=[...Ee.values()];else if(V==="length"&&isArray$1(q))Ee.forEach((we,he)=>{(he==="length"||he>=_e)&&j.push(we)});else switch(V!==void 0&&j.push(Ee.get(V)),Q){case"add":isArray$1(q)?isIntegerKey(V)&&j.push(Ee.get("length")):(j.push(Ee.get(ITERATE_KEY)),isMap(q)&&j.push(Ee.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(q)||(j.push(Ee.get(ITERATE_KEY)),isMap(q)&&j.push(Ee.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(q)&&j.push(Ee.get(ITERATE_KEY));break}if(j.length===1)j[0]&&triggerEffects(j[0]);else{const we=[];for(const he of j)he&&we.push(...he);triggerEffects(createDep(we))}}function triggerEffects(q,Q){for(const V of isArray$1(q)?q:[...q])(V!==activeEffect||V.allowRecurse)&&(V.scheduler?V.scheduler():V.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(q=>Symbol[q]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const q={};return["includes","indexOf","lastIndexOf"].forEach(Q=>{q[Q]=function(...V){const _e=toRaw(this);for(let ne=0,Ee=this.length;ne<Ee;ne++)track(_e,"get",ne+"");const ce=_e[Q](...V);return ce===-1||ce===!1?_e[Q](...V.map(toRaw)):ce}}),["push","pop","shift","unshift","splice"].forEach(Q=>{q[Q]=function(...V){pauseTracking();const _e=toRaw(this)[Q].apply(this,V);return resetTracking(),_e}}),q}function createGetter(q=!1,Q=!1){return function(_e,ce,ne){if(ce==="__v_isReactive")return!q;if(ce==="__v_isReadonly")return q;if(ce==="__v_isShallow")return Q;if(ce==="__v_raw"&&ne===(q?Q?shallowReadonlyMap:readonlyMap:Q?shallowReactiveMap:reactiveMap).get(_e))return _e;const Ee=isArray$1(_e);if(!q&&Ee&&hasOwn(arrayInstrumentations,ce))return Reflect.get(arrayInstrumentations,ce,ne);const j=Reflect.get(_e,ce,ne);return(isSymbol(ce)?builtInSymbols.has(ce):isNonTrackableKeys(ce))||(q||track(_e,"get",ce),Q)?j:isRef(j)?!Ee||!isIntegerKey(ce)?j.value:j:isObject$1(j)?q?readonly(j):reactive(j):j}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(q=!1){return function(V,_e,ce,ne){let Ee=V[_e];if(isReadonly(Ee)&&isRef(Ee)&&!isRef(ce))return!1;if(!q&&!isReadonly(ce)&&(isShallow(ce)||(ce=toRaw(ce),Ee=toRaw(Ee)),!isArray$1(V)&&isRef(Ee)&&!isRef(ce)))return Ee.value=ce,!0;const j=isArray$1(V)&&isIntegerKey(_e)?Number(_e)<V.length:hasOwn(V,_e),we=Reflect.set(V,_e,ce,ne);return V===toRaw(ne)&&(j?hasChanged(ce,Ee)&&trigger$1(V,"set",_e,ce):trigger$1(V,"add",_e,ce)),we}}function deleteProperty(q,Q){const V=hasOwn(q,Q);q[Q];const _e=Reflect.deleteProperty(q,Q);return _e&&V&&trigger$1(q,"delete",Q,void 0),_e}function has(q,Q){const V=Reflect.has(q,Q);return(!isSymbol(Q)||!builtInSymbols.has(Q))&&track(q,"has",Q),V}function ownKeys(q){return track(q,"iterate",isArray$1(q)?"length":ITERATE_KEY),Reflect.ownKeys(q)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(q,Q){return!0},deleteProperty(q,Q){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=q=>q,getProto=q=>Reflect.getPrototypeOf(q);function get$1(q,Q,V=!1,_e=!1){q=q.__v_raw;const ce=toRaw(q),ne=toRaw(Q);Q!==ne&&!V&&track(ce,"get",Q),!V&&track(ce,"get",ne);const{has:Ee}=getProto(ce),j=_e?toShallow:V?toReadonly:toReactive;if(Ee.call(ce,Q))return j(q.get(Q));if(Ee.call(ce,ne))return j(q.get(ne));q!==ce&&q.get(Q)}function has$1(q,Q=!1){const V=this.__v_raw,_e=toRaw(V),ce=toRaw(q);return q!==ce&&!Q&&track(_e,"has",q),!Q&&track(_e,"has",ce),q===ce?V.has(q):V.has(q)||V.has(ce)}function size(q,Q=!1){return q=q.__v_raw,!Q&&track(toRaw(q),"iterate",ITERATE_KEY),Reflect.get(q,"size",q)}function add(q){q=toRaw(q);const Q=toRaw(this);return getProto(Q).has.call(Q,q)||(Q.add(q),trigger$1(Q,"add",q,q)),this}function set$1(q,Q){Q=toRaw(Q);const V=toRaw(this),{has:_e,get:ce}=getProto(V);let ne=_e.call(V,q);ne||(q=toRaw(q),ne=_e.call(V,q));const Ee=ce.call(V,q);return V.set(q,Q),ne?hasChanged(Q,Ee)&&trigger$1(V,"set",q,Q):trigger$1(V,"add",q,Q),this}function deleteEntry(q){const Q=toRaw(this),{has:V,get:_e}=getProto(Q);let ce=V.call(Q,q);ce||(q=toRaw(q),ce=V.call(Q,q)),_e&&_e.call(Q,q);const ne=Q.delete(q);return ce&&trigger$1(Q,"delete",q,void 0),ne}function clear(){const q=toRaw(this),Q=q.size!==0,V=q.clear();return Q&&trigger$1(q,"clear",void 0,void 0),V}function createForEach(q,Q){return function(_e,ce){const ne=this,Ee=ne.__v_raw,j=toRaw(Ee),we=Q?toShallow:q?toReadonly:toReactive;return!q&&track(j,"iterate",ITERATE_KEY),Ee.forEach((he,ye)=>_e.call(ce,we(he),we(ye),ne))}}function createIterableMethod(q,Q,V){return function(..._e){const ce=this.__v_raw,ne=toRaw(ce),Ee=isMap(ne),j=q==="entries"||q===Symbol.iterator&&Ee,we=q==="keys"&&Ee,he=ce[q](..._e),ye=V?toShallow:Q?toReadonly:toReactive;return!Q&&track(ne,"iterate",we?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:xe,done:Te}=he.next();return Te?{value:xe,done:Te}:{value:j?[ye(xe[0]),ye(xe[1])]:ye(xe),done:Te}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(q){return function(...Q){return q==="delete"?!1:this}}function createInstrumentations(){const q={get(ne){return get$1(this,ne)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},Q={get(ne){return get$1(this,ne,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},V={get(ne){return get$1(this,ne,!0)},get size(){return size(this,!0)},has(ne){return has$1.call(this,ne,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},_e={get(ne){return get$1(this,ne,!0,!0)},get size(){return size(this,!0)},has(ne){return has$1.call(this,ne,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(ne=>{q[ne]=createIterableMethod(ne,!1,!1),V[ne]=createIterableMethod(ne,!0,!1),Q[ne]=createIterableMethod(ne,!1,!0),_e[ne]=createIterableMethod(ne,!0,!0)}),[q,V,Q,_e]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(q,Q){const V=Q?q?shallowReadonlyInstrumentations:shallowInstrumentations:q?readonlyInstrumentations:mutableInstrumentations;return(_e,ce,ne)=>ce==="__v_isReactive"?!q:ce==="__v_isReadonly"?q:ce==="__v_raw"?_e:Reflect.get(hasOwn(V,ce)&&ce in _e?V:_e,ce,ne)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(q){switch(q){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(q){return q.__v_skip||!Object.isExtensible(q)?0:targetTypeMap(toRawType(q))}function reactive(q){return isReadonly(q)?q:createReactiveObject(q,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(q){return createReactiveObject(q,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(q){return createReactiveObject(q,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(q,Q,V,_e,ce){if(!isObject$1(q)||q.__v_raw&&!(Q&&q.__v_isReactive))return q;const ne=ce.get(q);if(ne)return ne;const Ee=getTargetType(q);if(Ee===0)return q;const j=new Proxy(q,Ee===2?_e:V);return ce.set(q,j),j}function isReactive(q){return isReadonly(q)?isReactive(q.__v_raw):!!(q&&q.__v_isReactive)}function isReadonly(q){return!!(q&&q.__v_isReadonly)}function isShallow(q){return!!(q&&q.__v_isShallow)}function isProxy$1(q){return isReactive(q)||isReadonly(q)}function toRaw(q){const Q=q&&q.__v_raw;return Q?toRaw(Q):q}function markRaw(q){return def(q,"__v_skip",!0),q}const toReactive=q=>isObject$1(q)?reactive(q):q,toReadonly=q=>isObject$1(q)?readonly(q):q;function trackRefValue(q){shouldTrack&&activeEffect&&(q=toRaw(q),trackEffects(q.dep||(q.dep=createDep())))}function triggerRefValue(q,Q){q=toRaw(q),q.dep&&triggerEffects(q.dep)}function isRef(q){return!!(q&&q.__v_isRef===!0)}function ref(q){return createRef(q,!1)}function shallowRef(q){return createRef(q,!0)}function createRef(q,Q){return isRef(q)?q:new RefImpl(q,Q)}class RefImpl{constructor(Q,V){this.__v_isShallow=V,this.dep=void 0,this.__v_isRef=!0,this._rawValue=V?Q:toRaw(Q),this._value=V?Q:toReactive(Q)}get value(){return trackRefValue(this),this._value}set value(Q){Q=this.__v_isShallow?Q:toRaw(Q),hasChanged(Q,this._rawValue)&&(this._rawValue=Q,this._value=this.__v_isShallow?Q:toReactive(Q),triggerRefValue(this))}}function unref(q){return isRef(q)?q.value:q}const shallowUnwrapHandlers={get:(q,Q,V)=>unref(Reflect.get(q,Q,V)),set:(q,Q,V,_e)=>{const ce=q[Q];return isRef(ce)&&!isRef(V)?(ce.value=V,!0):Reflect.set(q,Q,V,_e)}};function proxyRefs(q){return isReactive(q)?q:new Proxy(q,shallowUnwrapHandlers)}function toRefs(q){const Q=isArray$1(q)?new Array(q.length):{};for(const V in q)Q[V]=toRef(q,V);return Q}class ObjectRefImpl{constructor(Q,V,_e){this._object=Q,this._key=V,this._defaultValue=_e,this.__v_isRef=!0}get value(){const Q=this._object[this._key];return Q===void 0?this._defaultValue:Q}set value(Q){this._object[this._key]=Q}}function toRef(q,Q,V){const _e=q[Q];return isRef(_e)?_e:new ObjectRefImpl(q,Q,V)}class ComputedRefImpl{constructor(Q,V,_e,ce){this._setter=V,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(Q,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!ce,this.__v_isReadonly=_e}get value(){const Q=toRaw(this);return trackRefValue(Q),(Q._dirty||!Q._cacheable)&&(Q._dirty=!1,Q._value=Q.effect.run()),Q._value}set value(Q){this._setter(Q)}}function computed$1(q,Q,V=!1){let _e,ce;const ne=isFunction$2(q);return ne?(_e=q,ce=NOOP):(_e=q.get,ce=q.set),new ComputedRefImpl(_e,ce,ne||!ce,V)}Promise.resolve();function callWithErrorHandling(q,Q,V,_e){let ce;try{ce=_e?q(..._e):q()}catch(ne){handleError(ne,Q,V)}return ce}function callWithAsyncErrorHandling(q,Q,V,_e){if(isFunction$2(q)){const ne=callWithErrorHandling(q,Q,V,_e);return ne&&isPromise(ne)&&ne.catch(Ee=>{handleError(Ee,Q,V)}),ne}const ce=[];for(let ne=0;ne<q.length;ne++)ce.push(callWithAsyncErrorHandling(q[ne],Q,V,_e));return ce}function handleError(q,Q,V,_e=!0){const ce=Q?Q.vnode:null;if(Q){let ne=Q.parent;const Ee=Q.proxy,j=V;for(;ne;){const he=ne.ec;if(he){for(let ye=0;ye<he.length;ye++)if(he[ye](q,Ee,j)===!1)return}ne=ne.parent}const we=Q.appContext.config.errorHandler;if(we){callWithErrorHandling(we,null,10,[q,Ee,j]);return}}logError(q,V,ce,_e)}function logError(q,Q,V,_e=!0){console.error(q)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(q){const Q=currentFlushPromise||resolvedPromise;return q?Q.then(this?q.bind(this):q):Q}function findInsertionIndex(q){let Q=flushIndex+1,V=queue.length;for(;Q<V;){const _e=Q+V>>>1;getId(queue[_e])<q?Q=_e+1:V=_e}return Q}function queueJob(q){(!queue.length||!queue.includes(q,isFlushing&&q.allowRecurse?flushIndex+1:flushIndex))&&q!==currentPreFlushParentJob&&(q.id==null?queue.push(q):queue.splice(findInsertionIndex(q.id),0,q),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(q){const Q=queue.indexOf(q);Q>flushIndex&&queue.splice(Q,1)}function queueCb(q,Q,V,_e){isArray$1(q)?V.push(...q):(!Q||!Q.includes(q,q.allowRecurse?_e+1:_e))&&V.push(q),queueFlush()}function queuePreFlushCb(q){queueCb(q,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(q){queueCb(q,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(q,Q=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=Q,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(q,Q)}}function flushPostFlushCbs(q){if(pendingPostFlushCbs.length){const Q=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...Q);return}for(activePostFlushCbs=Q,activePostFlushCbs.sort((V,_e)=>getId(V)-getId(_e)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=q=>q.id==null?1/0:q.id;function flushJobs(q){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(q),queue.sort((V,_e)=>getId(V)-getId(_e));const Q=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const V=queue[flushIndex];V&&V.active!==!1&&callWithErrorHandling(V,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(q)}}function emit$1(q,Q,...V){const _e=q.vnode.props||EMPTY_OBJ;let ce=V;const ne=Q.startsWith("update:"),Ee=ne&&Q.slice(7);if(Ee&&Ee in _e){const ye=`${Ee==="modelValue"?"model":Ee}Modifiers`,{number:xe,trim:Te}=_e[ye]||EMPTY_OBJ;Te?ce=V.map(Se=>Se.trim()):xe&&(ce=V.map(toNumber))}let j,we=_e[j=toHandlerKey(Q)]||_e[j=toHandlerKey(camelize(Q))];!we&&ne&&(we=_e[j=toHandlerKey(hyphenate(Q))]),we&&callWithAsyncErrorHandling(we,q,6,ce);const he=_e[j+"Once"];if(he){if(!q.emitted)q.emitted={};else if(q.emitted[j])return;q.emitted[j]=!0,callWithAsyncErrorHandling(he,q,6,ce)}}function normalizeEmitsOptions(q,Q,V=!1){const _e=Q.emitsCache,ce=_e.get(q);if(ce!==void 0)return ce;const ne=q.emits;let Ee={},j=!1;if(!isFunction$2(q)){const we=he=>{const ye=normalizeEmitsOptions(he,Q,!0);ye&&(j=!0,extend$1(Ee,ye))};!V&&Q.mixins.length&&Q.mixins.forEach(we),q.extends&&we(q.extends),q.mixins&&q.mixins.forEach(we)}return!ne&&!j?(_e.set(q,null),null):(isArray$1(ne)?ne.forEach(we=>Ee[we]=null):extend$1(Ee,ne),_e.set(q,Ee),Ee)}function isEmitListener(q,Q){return!q||!isOn(Q)?!1:(Q=Q.slice(2).replace(/Once$/,""),hasOwn(q,Q[0].toLowerCase()+Q.slice(1))||hasOwn(q,hyphenate(Q))||hasOwn(q,Q))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(q){const Q=currentRenderingInstance;return currentRenderingInstance=q,currentScopeId=q&&q.type.__scopeId||null,Q}function withCtx(q,Q=currentRenderingInstance,V){if(!Q||q._n)return q;const _e=(...ce)=>{_e._d&&setBlockTracking(-1);const ne=setCurrentRenderingInstance(Q),Ee=q(...ce);return setCurrentRenderingInstance(ne),_e._d&&setBlockTracking(1),Ee};return _e._n=!0,_e._c=!0,_e._d=!0,_e}function markAttrsAccessed(){}function renderComponentRoot(q){const{type:Q,vnode:V,proxy:_e,withProxy:ce,props:ne,propsOptions:[Ee],slots:j,attrs:we,emit:he,render:ye,renderCache:xe,data:Te,setupState:Se,ctx:Ce,inheritAttrs:Oe}=q;let ze,Ue;const De=setCurrentRenderingInstance(q);try{if(V.shapeFlag&4){const Xe=ce||_e;ze=normalizeVNode(ye.call(Xe,Xe,xe,ne,Se,Te,Ce)),Ue=we}else{const Xe=Q;ze=normalizeVNode(Xe.length>1?Xe(ne,{attrs:we,slots:j,emit:he}):Xe(ne,null)),Ue=Q.props?we:getFunctionalFallthrough(we)}}catch(Xe){blockStack.length=0,handleError(Xe,q,1),ze=createVNode(Comment$1)}let Fe=ze;if(Ue&&Oe!==!1){const Xe=Object.keys(Ue),{shapeFlag:Ke}=Fe;Xe.length&&Ke&7&&(Ee&&Xe.some(isModelListener)&&(Ue=filterModelListeners(Ue,Ee)),Fe=cloneVNode(Fe,Ue))}return V.dirs&&(Fe.dirs=Fe.dirs?Fe.dirs.concat(V.dirs):V.dirs),V.transition&&(Fe.transition=V.transition),ze=Fe,setCurrentRenderingInstance(De),ze}function filterSingleRoot(q){let Q;for(let V=0;V<q.length;V++){const _e=q[V];if(isVNode(_e)){if(_e.type!==Comment$1||_e.children==="v-if"){if(Q)return;Q=_e}}else return}return Q}const getFunctionalFallthrough=q=>{let Q;for(const V in q)(V==="class"||V==="style"||isOn(V))&&((Q||(Q={}))[V]=q[V]);return Q},filterModelListeners=(q,Q)=>{const V={};for(const _e in q)(!isModelListener(_e)||!(_e.slice(9)in Q))&&(V[_e]=q[_e]);return V};function shouldUpdateComponent(q,Q,V){const{props:_e,children:ce,component:ne}=q,{props:Ee,children:j,patchFlag:we}=Q,he=ne.emitsOptions;if(Q.dirs||Q.transition)return!0;if(V&&we>=0){if(we&1024)return!0;if(we&16)return _e?hasPropsChanged(_e,Ee,he):!!Ee;if(we&8){const ye=Q.dynamicProps;for(let xe=0;xe<ye.length;xe++){const Te=ye[xe];if(Ee[Te]!==_e[Te]&&!isEmitListener(he,Te))return!0}}}else return(ce||j)&&(!j||!j.$stable)?!0:_e===Ee?!1:_e?Ee?hasPropsChanged(_e,Ee,he):!0:!!Ee;return!1}function hasPropsChanged(q,Q,V){const _e=Object.keys(Q);if(_e.length!==Object.keys(q).length)return!0;for(let ce=0;ce<_e.length;ce++){const ne=_e[ce];if(Q[ne]!==q[ne]&&!isEmitListener(V,ne))return!0}return!1}function updateHOCHostEl({vnode:q,parent:Q},V){for(;Q&&Q.subTree===q;)(q=Q.vnode).el=V,Q=Q.parent}const isSuspense=q=>q.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(q,Q,V,_e,ce,ne,Ee,j,we,he){q==null?mountSuspense(Q,V,_e,ce,ne,Ee,j,we,he):patchSuspense(q,Q,V,_e,ce,Ee,j,we,he)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(q,Q){const V=q.props&&q.props[Q];isFunction$2(V)&&V()}function mountSuspense(q,Q,V,_e,ce,ne,Ee,j,we){const{p:he,o:{createElement:ye}}=we,xe=ye("div"),Te=q.suspense=createSuspenseBoundary(q,ce,_e,Q,xe,V,ne,Ee,j,we);he(null,Te.pendingBranch=q.ssContent,xe,null,_e,Te,ne,Ee),Te.deps>0?(triggerEvent(q,"onPending"),triggerEvent(q,"onFallback"),he(null,q.ssFallback,Q,V,_e,null,ne,Ee),setActiveBranch(Te,q.ssFallback)):Te.resolve()}function patchSuspense(q,Q,V,_e,ce,ne,Ee,j,{p:we,um:he,o:{createElement:ye}}){const xe=Q.suspense=q.suspense;xe.vnode=Q,Q.el=q.el;const Te=Q.ssContent,Se=Q.ssFallback,{activeBranch:Ce,pendingBranch:Oe,isInFallback:ze,isHydrating:Ue}=xe;if(Oe)xe.pendingBranch=Te,isSameVNodeType(Te,Oe)?(we(Oe,Te,xe.hiddenContainer,null,ce,xe,ne,Ee,j),xe.deps<=0?xe.resolve():ze&&(we(Ce,Se,V,_e,ce,null,ne,Ee,j),setActiveBranch(xe,Se))):(xe.pendingId++,Ue?(xe.isHydrating=!1,xe.activeBranch=Oe):he(Oe,ce,xe),xe.deps=0,xe.effects.length=0,xe.hiddenContainer=ye("div"),ze?(we(null,Te,xe.hiddenContainer,null,ce,xe,ne,Ee,j),xe.deps<=0?xe.resolve():(we(Ce,Se,V,_e,ce,null,ne,Ee,j),setActiveBranch(xe,Se))):Ce&&isSameVNodeType(Te,Ce)?(we(Ce,Te,V,_e,ce,xe,ne,Ee,j),xe.resolve(!0)):(we(null,Te,xe.hiddenContainer,null,ce,xe,ne,Ee,j),xe.deps<=0&&xe.resolve()));else if(Ce&&isSameVNodeType(Te,Ce))we(Ce,Te,V,_e,ce,xe,ne,Ee,j),setActiveBranch(xe,Te);else if(triggerEvent(Q,"onPending"),xe.pendingBranch=Te,xe.pendingId++,we(null,Te,xe.hiddenContainer,null,ce,xe,ne,Ee,j),xe.deps<=0)xe.resolve();else{const{timeout:De,pendingId:Fe}=xe;De>0?setTimeout(()=>{xe.pendingId===Fe&&xe.fallback(Se)},De):De===0&&xe.fallback(Se)}}function createSuspenseBoundary(q,Q,V,_e,ce,ne,Ee,j,we,he,ye=!1){const{p:xe,m:Te,um:Se,n:Ce,o:{parentNode:Oe,remove:ze}}=he,Ue=toNumber(q.props&&q.props.timeout),De={vnode:q,parent:Q,parentComponent:V,isSVG:Ee,container:_e,hiddenContainer:ce,anchor:ne,deps:0,pendingId:0,timeout:typeof Ue=="number"?Ue:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:ye,isUnmounted:!1,effects:[],resolve(Fe=!1){const{vnode:Xe,activeBranch:Ke,pendingBranch:He,pendingId:Qe,effects:pt,parentComponent:Mt,container:wt}=De;if(De.isHydrating)De.isHydrating=!1;else if(!Fe){const nt=Ke&&He.transition&&He.transition.mode==="out-in";nt&&(Ke.transition.afterLeave=()=>{Qe===De.pendingId&&Te(He,wt,it,0)});let{anchor:it}=De;Ke&&(it=Ce(Ke),Se(Ke,Mt,De,!0)),nt||Te(He,wt,it,0)}setActiveBranch(De,He),De.pendingBranch=null,De.isInFallback=!1;let bt=De.parent,rt=!1;for(;bt;){if(bt.pendingBranch){bt.effects.push(...pt),rt=!0;break}bt=bt.parent}rt||queuePostFlushCb(pt),De.effects=[],triggerEvent(Xe,"onResolve")},fallback(Fe){if(!De.pendingBranch)return;const{vnode:Xe,activeBranch:Ke,parentComponent:He,container:Qe,isSVG:pt}=De;triggerEvent(Xe,"onFallback");const Mt=Ce(Ke),wt=()=>{!De.isInFallback||(xe(null,Fe,Qe,Mt,He,null,pt,j,we),setActiveBranch(De,Fe))},bt=Fe.transition&&Fe.transition.mode==="out-in";bt&&(Ke.transition.afterLeave=wt),De.isInFallback=!0,Se(Ke,He,null,!0),bt||wt()},move(Fe,Xe,Ke){De.activeBranch&&Te(De.activeBranch,Fe,Xe,Ke),De.container=Fe},next(){return De.activeBranch&&Ce(De.activeBranch)},registerDep(Fe,Xe){const Ke=!!De.pendingBranch;Ke&&De.deps++;const He=Fe.vnode.el;Fe.asyncDep.catch(Qe=>{handleError(Qe,Fe,0)}).then(Qe=>{if(Fe.isUnmounted||De.isUnmounted||De.pendingId!==Fe.suspenseId)return;Fe.asyncResolved=!0;const{vnode:pt}=Fe;handleSetupResult(Fe,Qe,!1),He&&(pt.el=He);const Mt=!He&&Fe.subTree.el;Xe(Fe,pt,Oe(He||Fe.subTree.el),He?null:Ce(Fe.subTree),De,Ee,we),Mt&&ze(Mt),updateHOCHostEl(Fe,pt.el),Ke&&--De.deps===0&&De.resolve()})},unmount(Fe,Xe){De.isUnmounted=!0,De.activeBranch&&Se(De.activeBranch,V,Fe,Xe),De.pendingBranch&&Se(De.pendingBranch,V,Fe,Xe)}};return De}function hydrateSuspense(q,Q,V,_e,ce,ne,Ee,j,we){const he=Q.suspense=createSuspenseBoundary(Q,_e,V,q.parentNode,document.createElement("div"),null,ce,ne,Ee,j,!0),ye=we(q,he.pendingBranch=Q.ssContent,V,he,ne,Ee);return he.deps===0&&he.resolve(),ye}function normalizeSuspenseChildren(q){const{shapeFlag:Q,children:V}=q,_e=Q&32;q.ssContent=normalizeSuspenseSlot(_e?V.default:V),q.ssFallback=_e?normalizeSuspenseSlot(V.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(q){let Q;if(isFunction$2(q)){const V=isBlockTreeEnabled&&q._c;V&&(q._d=!1,openBlock()),q=q(),V&&(q._d=!0,Q=currentBlock,closeBlock())}return isArray$1(q)&&(q=filterSingleRoot(q)),q=normalizeVNode(q),Q&&!q.dynamicChildren&&(q.dynamicChildren=Q.filter(V=>V!==q)),q}function queueEffectWithSuspense(q,Q){Q&&Q.pendingBranch?isArray$1(q)?Q.effects.push(...q):Q.effects.push(q):queuePostFlushCb(q)}function setActiveBranch(q,Q){q.activeBranch=Q;const{vnode:V,parentComponent:_e}=q,ce=V.el=Q.el;_e&&_e.subTree===V&&(_e.vnode.el=ce,updateHOCHostEl(_e,ce))}function provide(q,Q){if(currentInstance){let V=currentInstance.provides;const _e=currentInstance.parent&&currentInstance.parent.provides;_e===V&&(V=currentInstance.provides=Object.create(_e)),V[q]=Q}}function inject(q,Q,V=!1){const _e=currentInstance||currentRenderingInstance;if(_e){const ce=_e.parent==null?_e.vnode.appContext&&_e.vnode.appContext.provides:_e.parent.provides;if(ce&&q in ce)return ce[q];if(arguments.length>1)return V&&isFunction$2(Q)?Q.call(_e.proxy):Q}}function watchEffect(q,Q){return doWatch(q,null,Q)}const INITIAL_WATCHER_VALUE={};function watch(q,Q,V){return doWatch(q,Q,V)}function doWatch(q,Q,{immediate:V,deep:_e,flush:ce,onTrack:ne,onTrigger:Ee}=EMPTY_OBJ){const j=currentInstance;let we,he=!1,ye=!1;if(isRef(q)?(we=()=>q.value,he=isShallow(q)):isReactive(q)?(we=()=>q,_e=!0):isArray$1(q)?(ye=!0,he=q.some(isReactive),we=()=>q.map(Ue=>{if(isRef(Ue))return Ue.value;if(isReactive(Ue))return traverse(Ue);if(isFunction$2(Ue))return callWithErrorHandling(Ue,j,2)})):isFunction$2(q)?Q?we=()=>callWithErrorHandling(q,j,2):we=()=>{if(!(j&&j.isUnmounted))return xe&&xe(),callWithAsyncErrorHandling(q,j,3,[Te])}:we=NOOP,Q&&_e){const Ue=we;we=()=>traverse(Ue())}let xe,Te=Ue=>{xe=ze.onStop=()=>{callWithErrorHandling(Ue,j,4)}};if(isInSSRComponentSetup)return Te=NOOP,Q?V&&callWithAsyncErrorHandling(Q,j,3,[we(),ye?[]:void 0,Te]):we(),NOOP;let Se=ye?[]:INITIAL_WATCHER_VALUE;const Ce=()=>{if(!!ze.active)if(Q){const Ue=ze.run();(_e||he||(ye?Ue.some((De,Fe)=>hasChanged(De,Se[Fe])):hasChanged(Ue,Se)))&&(xe&&xe(),callWithAsyncErrorHandling(Q,j,3,[Ue,Se===INITIAL_WATCHER_VALUE?void 0:Se,Te]),Se=Ue)}else ze.run()};Ce.allowRecurse=!!Q;let Oe;ce==="sync"?Oe=Ce:ce==="post"?Oe=()=>queuePostRenderEffect(Ce,j&&j.suspense):Oe=()=>{!j||j.isMounted?queuePreFlushCb(Ce):Ce()};const ze=new ReactiveEffect(we,Oe);return Q?V?Ce():Se=ze.run():ce==="post"?queuePostRenderEffect(ze.run.bind(ze),j&&j.suspense):ze.run(),()=>{ze.stop(),j&&j.scope&&remove(j.scope.effects,ze)}}function instanceWatch(q,Q,V){const _e=this.proxy,ce=isString$1(q)?q.includes(".")?createPathGetter(_e,q):()=>_e[q]:q.bind(_e,_e);let ne;isFunction$2(Q)?ne=Q:(ne=Q.handler,V=Q);const Ee=currentInstance;setCurrentInstance(this);const j=doWatch(ce,ne.bind(_e),V);return Ee?setCurrentInstance(Ee):unsetCurrentInstance(),j}function createPathGetter(q,Q){const V=Q.split(".");return()=>{let _e=q;for(let ce=0;ce<V.length&&_e;ce++)_e=_e[V[ce]];return _e}}function traverse(q,Q){if(!isObject$1(q)||q.__v_skip||(Q=Q||new Set,Q.has(q)))return q;if(Q.add(q),isRef(q))traverse(q.value,Q);else if(isArray$1(q))for(let V=0;V<q.length;V++)traverse(q[V],Q);else if(isSet(q)||isMap(q))q.forEach(V=>{traverse(V,Q)});else if(isPlainObject$2(q))for(const V in q)traverse(q[V],Q);return q}function useTransitionState(){const q={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{q.isMounted=!0}),onBeforeUnmount(()=>{q.isUnmounting=!0}),q}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(q,{slots:Q}){const V=getCurrentInstance(),_e=useTransitionState();let ce;return()=>{const ne=Q.default&&getTransitionRawChildren(Q.default(),!0);if(!ne||!ne.length)return;const Ee=toRaw(q),{mode:j}=Ee,we=ne[0];if(_e.isLeaving)return emptyPlaceholder(we);const he=getKeepAliveChild(we);if(!he)return emptyPlaceholder(we);const ye=resolveTransitionHooks(he,Ee,_e,V);setTransitionHooks(he,ye);const xe=V.subTree,Te=xe&&getKeepAliveChild(xe);let Se=!1;const{getTransitionKey:Ce}=he.type;if(Ce){const Oe=Ce();ce===void 0?ce=Oe:Oe!==ce&&(ce=Oe,Se=!0)}if(Te&&Te.type!==Comment$1&&(!isSameVNodeType(he,Te)||Se)){const Oe=resolveTransitionHooks(Te,Ee,_e,V);if(setTransitionHooks(Te,Oe),j==="out-in")return _e.isLeaving=!0,Oe.afterLeave=()=>{_e.isLeaving=!1,V.update()},emptyPlaceholder(we);j==="in-out"&&he.type!==Comment$1&&(Oe.delayLeave=(ze,Ue,De)=>{const Fe=getLeavingNodesForType(_e,Te);Fe[String(Te.key)]=Te,ze._leaveCb=()=>{Ue(),ze._leaveCb=void 0,delete ye.delayedLeave},ye.delayedLeave=De})}return we}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(q,Q){const{leavingVNodes:V}=q;let _e=V.get(Q.type);return _e||(_e=Object.create(null),V.set(Q.type,_e)),_e}function resolveTransitionHooks(q,Q,V,_e){const{appear:ce,mode:ne,persisted:Ee=!1,onBeforeEnter:j,onEnter:we,onAfterEnter:he,onEnterCancelled:ye,onBeforeLeave:xe,onLeave:Te,onAfterLeave:Se,onLeaveCancelled:Ce,onBeforeAppear:Oe,onAppear:ze,onAfterAppear:Ue,onAppearCancelled:De}=Q,Fe=String(q.key),Xe=getLeavingNodesForType(V,q),Ke=(Qe,pt)=>{Qe&&callWithAsyncErrorHandling(Qe,_e,9,pt)},He={mode:ne,persisted:Ee,beforeEnter(Qe){let pt=j;if(!V.isMounted)if(ce)pt=Oe||j;else return;Qe._leaveCb&&Qe._leaveCb(!0);const Mt=Xe[Fe];Mt&&isSameVNodeType(q,Mt)&&Mt.el._leaveCb&&Mt.el._leaveCb(),Ke(pt,[Qe])},enter(Qe){let pt=we,Mt=he,wt=ye;if(!V.isMounted)if(ce)pt=ze||we,Mt=Ue||he,wt=De||ye;else return;let bt=!1;const rt=Qe._enterCb=nt=>{bt||(bt=!0,nt?Ke(wt,[Qe]):Ke(Mt,[Qe]),He.delayedLeave&&He.delayedLeave(),Qe._enterCb=void 0)};pt?(pt(Qe,rt),pt.length<=1&&rt()):rt()},leave(Qe,pt){const Mt=String(q.key);if(Qe._enterCb&&Qe._enterCb(!0),V.isUnmounting)return pt();Ke(xe,[Qe]);let wt=!1;const bt=Qe._leaveCb=rt=>{wt||(wt=!0,pt(),rt?Ke(Ce,[Qe]):Ke(Se,[Qe]),Qe._leaveCb=void 0,Xe[Mt]===q&&delete Xe[Mt])};Xe[Mt]=q,Te?(Te(Qe,bt),Te.length<=1&&bt()):bt()},clone(Qe){return resolveTransitionHooks(Qe,Q,V,_e)}};return He}function emptyPlaceholder(q){if(isKeepAlive(q))return q=cloneVNode(q),q.children=null,q}function getKeepAliveChild(q){return isKeepAlive(q)?q.children?q.children[0]:void 0:q}function setTransitionHooks(q,Q){q.shapeFlag&6&&q.component?setTransitionHooks(q.component.subTree,Q):q.shapeFlag&128?(q.ssContent.transition=Q.clone(q.ssContent),q.ssFallback.transition=Q.clone(q.ssFallback)):q.transition=Q}function getTransitionRawChildren(q,Q=!1){let V=[],_e=0;for(let ce=0;ce<q.length;ce++){const ne=q[ce];ne.type===Fragment?(ne.patchFlag&128&&_e++,V=V.concat(getTransitionRawChildren(ne.children,Q))):(Q||ne.type!==Comment$1)&&V.push(ne)}if(_e>1)for(let ce=0;ce<V.length;ce++)V[ce].patchFlag=-2;return V}function defineComponent(q){return isFunction$2(q)?{setup:q,name:q.name}:q}const isAsyncWrapper=q=>!!q.type.__asyncLoader,isKeepAlive=q=>q.type.__isKeepAlive;function onActivated(q,Q){registerKeepAliveHook(q,"a",Q)}function onDeactivated(q,Q){registerKeepAliveHook(q,"da",Q)}function registerKeepAliveHook(q,Q,V=currentInstance){const _e=q.__wdc||(q.__wdc=()=>{let ce=V;for(;ce;){if(ce.isDeactivated)return;ce=ce.parent}return q()});if(injectHook(Q,_e,V),V){let ce=V.parent;for(;ce&&ce.parent;)isKeepAlive(ce.parent.vnode)&&injectToKeepAliveRoot(_e,Q,V,ce),ce=ce.parent}}function injectToKeepAliveRoot(q,Q,V,_e){const ce=injectHook(Q,q,_e,!0);onUnmounted(()=>{remove(_e[Q],ce)},V)}function injectHook(q,Q,V=currentInstance,_e=!1){if(V){const ce=V[q]||(V[q]=[]),ne=Q.__weh||(Q.__weh=(...Ee)=>{if(V.isUnmounted)return;pauseTracking(),setCurrentInstance(V);const j=callWithAsyncErrorHandling(Q,V,q,Ee);return unsetCurrentInstance(),resetTracking(),j});return _e?ce.unshift(ne):ce.push(ne),ne}}const createHook=q=>(Q,V=currentInstance)=>(!isInSSRComponentSetup||q==="sp")&&injectHook(q,Q,V),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(q,Q=currentInstance){injectHook("ec",q,Q)}let shouldCacheAccess=!0;function applyOptions(q){const Q=resolveMergedOptions(q),V=q.proxy,_e=q.ctx;shouldCacheAccess=!1,Q.beforeCreate&&callHook$1(Q.beforeCreate,q,"bc");const{data:ce,computed:ne,methods:Ee,watch:j,provide:we,inject:he,created:ye,beforeMount:xe,mounted:Te,beforeUpdate:Se,updated:Ce,activated:Oe,deactivated:ze,beforeDestroy:Ue,beforeUnmount:De,destroyed:Fe,unmounted:Xe,render:Ke,renderTracked:He,renderTriggered:Qe,errorCaptured:pt,serverPrefetch:Mt,expose:wt,inheritAttrs:bt,components:rt,directives:nt,filters:it}=Q;if(he&&resolveInjections(he,_e,null,q.appContext.config.unwrapInjectedRef),Ee)for(const ft in Ee){const xt=Ee[ft];isFunction$2(xt)&&(_e[ft]=xt.bind(V))}if(ce){const ft=ce.call(V,V);isObject$1(ft)&&(q.data=reactive(ft))}if(shouldCacheAccess=!0,ne)for(const ft in ne){const xt=ne[ft],ht=isFunction$2(xt)?xt.bind(V,V):isFunction$2(xt.get)?xt.get.bind(V,V):NOOP,Vt=!isFunction$2(xt)&&isFunction$2(xt.set)?xt.set.bind(V):NOOP,st=computed({get:ht,set:Vt});Object.defineProperty(_e,ft,{enumerable:!0,configurable:!0,get:()=>st.value,set:Dt=>st.value=Dt})}if(j)for(const ft in j)createWatcher(j[ft],_e,V,ft);if(we){const ft=isFunction$2(we)?we.call(V):we;Reflect.ownKeys(ft).forEach(xt=>{provide(xt,ft[xt])})}ye&&callHook$1(ye,q,"c");function lt(ft,xt){isArray$1(xt)?xt.forEach(ht=>ft(ht.bind(V))):xt&&ft(xt.bind(V))}if(lt(onBeforeMount,xe),lt(onMounted,Te),lt(onBeforeUpdate,Se),lt(onUpdated,Ce),lt(onActivated,Oe),lt(onDeactivated,ze),lt(onErrorCaptured,pt),lt(onRenderTracked,He),lt(onRenderTriggered,Qe),lt(onBeforeUnmount,De),lt(onUnmounted,Xe),lt(onServerPrefetch,Mt),isArray$1(wt))if(wt.length){const ft=q.exposed||(q.exposed={});wt.forEach(xt=>{Object.defineProperty(ft,xt,{get:()=>V[xt],set:ht=>V[xt]=ht})})}else q.exposed||(q.exposed={});Ke&&q.render===NOOP&&(q.render=Ke),bt!=null&&(q.inheritAttrs=bt),rt&&(q.components=rt),nt&&(q.directives=nt)}function resolveInjections(q,Q,V=NOOP,_e=!1){isArray$1(q)&&(q=normalizeInject(q));for(const ce in q){const ne=q[ce];let Ee;isObject$1(ne)?"default"in ne?Ee=inject(ne.from||ce,ne.default,!0):Ee=inject(ne.from||ce):Ee=inject(ne),isRef(Ee)&&_e?Object.defineProperty(Q,ce,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:j=>Ee.value=j}):Q[ce]=Ee}}function callHook$1(q,Q,V){callWithAsyncErrorHandling(isArray$1(q)?q.map(_e=>_e.bind(Q.proxy)):q.bind(Q.proxy),Q,V)}function createWatcher(q,Q,V,_e){const ce=_e.includes(".")?createPathGetter(V,_e):()=>V[_e];if(isString$1(q)){const ne=Q[q];isFunction$2(ne)&&watch(ce,ne)}else if(isFunction$2(q))watch(ce,q.bind(V));else if(isObject$1(q))if(isArray$1(q))q.forEach(ne=>createWatcher(ne,Q,V,_e));else{const ne=isFunction$2(q.handler)?q.handler.bind(V):Q[q.handler];isFunction$2(ne)&&watch(ce,ne,q)}}function resolveMergedOptions(q){const Q=q.type,{mixins:V,extends:_e}=Q,{mixins:ce,optionsCache:ne,config:{optionMergeStrategies:Ee}}=q.appContext,j=ne.get(Q);let we;return j?we=j:!ce.length&&!V&&!_e?we=Q:(we={},ce.length&&ce.forEach(he=>mergeOptions$1(we,he,Ee,!0)),mergeOptions$1(we,Q,Ee)),ne.set(Q,we),we}function mergeOptions$1(q,Q,V,_e=!1){const{mixins:ce,extends:ne}=Q;ne&&mergeOptions$1(q,ne,V,!0),ce&&ce.forEach(Ee=>mergeOptions$1(q,Ee,V,!0));for(const Ee in Q)if(!(_e&&Ee==="expose")){const j=internalOptionMergeStrats[Ee]||V&&V[Ee];q[Ee]=j?j(q[Ee],Q[Ee]):Q[Ee]}return q}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(q,Q){return Q?q?function(){return extend$1(isFunction$2(q)?q.call(this,this):q,isFunction$2(Q)?Q.call(this,this):Q)}:Q:q}function mergeInject(q,Q){return mergeObjectOptions(normalizeInject(q),normalizeInject(Q))}function normalizeInject(q){if(isArray$1(q)){const Q={};for(let V=0;V<q.length;V++)Q[q[V]]=q[V];return Q}return q}function mergeAsArray(q,Q){return q?[...new Set([].concat(q,Q))]:Q}function mergeObjectOptions(q,Q){return q?extend$1(extend$1(Object.create(null),q),Q):Q}function mergeWatchOptions(q,Q){if(!q)return Q;if(!Q)return q;const V=extend$1(Object.create(null),q);for(const _e in Q)V[_e]=mergeAsArray(q[_e],Q[_e]);return V}function initProps(q,Q,V,_e=!1){const ce={},ne={};def(ne,InternalObjectKey,1),q.propsDefaults=Object.create(null),setFullProps(q,Q,ce,ne);for(const Ee in q.propsOptions[0])Ee in ce||(ce[Ee]=void 0);V?q.props=_e?ce:shallowReactive(ce):q.type.props?q.props=ce:q.props=ne,q.attrs=ne}function updateProps(q,Q,V,_e){const{props:ce,attrs:ne,vnode:{patchFlag:Ee}}=q,j=toRaw(ce),[we]=q.propsOptions;let he=!1;if((_e||Ee>0)&&!(Ee&16)){if(Ee&8){const ye=q.vnode.dynamicProps;for(let xe=0;xe<ye.length;xe++){let Te=ye[xe];const Se=Q[Te];if(we)if(hasOwn(ne,Te))Se!==ne[Te]&&(ne[Te]=Se,he=!0);else{const Ce=camelize(Te);ce[Ce]=resolvePropValue(we,j,Ce,Se,q,!1)}else Se!==ne[Te]&&(ne[Te]=Se,he=!0)}}}else{setFullProps(q,Q,ce,ne)&&(he=!0);let ye;for(const xe in j)(!Q||!hasOwn(Q,xe)&&((ye=hyphenate(xe))===xe||!hasOwn(Q,ye)))&&(we?V&&(V[xe]!==void 0||V[ye]!==void 0)&&(ce[xe]=resolvePropValue(we,j,xe,void 0,q,!0)):delete ce[xe]);if(ne!==j)for(const xe in ne)(!Q||!hasOwn(Q,xe)&&!0)&&(delete ne[xe],he=!0)}he&&trigger$1(q,"set","$attrs")}function setFullProps(q,Q,V,_e){const[ce,ne]=q.propsOptions;let Ee=!1,j;if(Q)for(let we in Q){if(isReservedProp(we))continue;const he=Q[we];let ye;ce&&hasOwn(ce,ye=camelize(we))?!ne||!ne.includes(ye)?V[ye]=he:(j||(j={}))[ye]=he:isEmitListener(q.emitsOptions,we)||(!(we in _e)||he!==_e[we])&&(_e[we]=he,Ee=!0)}if(ne){const we=toRaw(V),he=j||EMPTY_OBJ;for(let ye=0;ye<ne.length;ye++){const xe=ne[ye];V[xe]=resolvePropValue(ce,we,xe,he[xe],q,!hasOwn(he,xe))}}return Ee}function resolvePropValue(q,Q,V,_e,ce,ne){const Ee=q[V];if(Ee!=null){const j=hasOwn(Ee,"default");if(j&&_e===void 0){const we=Ee.default;if(Ee.type!==Function&&isFunction$2(we)){const{propsDefaults:he}=ce;V in he?_e=he[V]:(setCurrentInstance(ce),_e=he[V]=we.call(null,Q),unsetCurrentInstance())}else _e=we}Ee[0]&&(ne&&!j?_e=!1:Ee[1]&&(_e===""||_e===hyphenate(V))&&(_e=!0))}return _e}function normalizePropsOptions(q,Q,V=!1){const _e=Q.propsCache,ce=_e.get(q);if(ce)return ce;const ne=q.props,Ee={},j=[];let we=!1;if(!isFunction$2(q)){const ye=xe=>{we=!0;const[Te,Se]=normalizePropsOptions(xe,Q,!0);extend$1(Ee,Te),Se&&j.push(...Se)};!V&&Q.mixins.length&&Q.mixins.forEach(ye),q.extends&&ye(q.extends),q.mixins&&q.mixins.forEach(ye)}if(!ne&&!we)return _e.set(q,EMPTY_ARR),EMPTY_ARR;if(isArray$1(ne))for(let ye=0;ye<ne.length;ye++){const xe=camelize(ne[ye]);validatePropName(xe)&&(Ee[xe]=EMPTY_OBJ)}else if(ne)for(const ye in ne){const xe=camelize(ye);if(validatePropName(xe)){const Te=ne[ye],Se=Ee[xe]=isArray$1(Te)||isFunction$2(Te)?{type:Te}:Te;if(Se){const Ce=getTypeIndex(Boolean,Se.type),Oe=getTypeIndex(String,Se.type);Se[0]=Ce>-1,Se[1]=Oe<0||Ce<Oe,(Ce>-1||hasOwn(Se,"default"))&&j.push(xe)}}}const he=[Ee,j];return _e.set(q,he),he}function validatePropName(q){return q[0]!=="$"}function getType(q){const Q=q&&q.toString().match(/^\s*function (\w+)/);return Q?Q[1]:q===null?"null":""}function isSameType(q,Q){return getType(q)===getType(Q)}function getTypeIndex(q,Q){return isArray$1(Q)?Q.findIndex(V=>isSameType(V,q)):isFunction$2(Q)&&isSameType(Q,q)?0:-1}const isInternalKey=q=>q[0]==="_"||q==="$stable",normalizeSlotValue=q=>isArray$1(q)?q.map(normalizeVNode):[normalizeVNode(q)],normalizeSlot$1=(q,Q,V)=>{const _e=withCtx((...ce)=>normalizeSlotValue(Q(...ce)),V);return _e._c=!1,_e},normalizeObjectSlots=(q,Q,V)=>{const _e=q._ctx;for(const ce in q){if(isInternalKey(ce))continue;const ne=q[ce];if(isFunction$2(ne))Q[ce]=normalizeSlot$1(ce,ne,_e);else if(ne!=null){const Ee=normalizeSlotValue(ne);Q[ce]=()=>Ee}}},normalizeVNodeSlots=(q,Q)=>{const V=normalizeSlotValue(Q);q.slots.default=()=>V},initSlots=(q,Q)=>{if(q.vnode.shapeFlag&32){const V=Q._;V?(q.slots=toRaw(Q),def(Q,"_",V)):normalizeObjectSlots(Q,q.slots={})}else q.slots={},Q&&normalizeVNodeSlots(q,Q);def(q.slots,InternalObjectKey,1)},updateSlots=(q,Q,V)=>{const{vnode:_e,slots:ce}=q;let ne=!0,Ee=EMPTY_OBJ;if(_e.shapeFlag&32){const j=Q._;j?V&&j===1?ne=!1:(extend$1(ce,Q),!V&&j===1&&delete ce._):(ne=!Q.$stable,normalizeObjectSlots(Q,ce)),Ee=Q}else Q&&(normalizeVNodeSlots(q,Q),Ee={default:1});if(ne)for(const j in ce)!isInternalKey(j)&&!(j in Ee)&&delete ce[j]};function withDirectives(q,Q){const V=currentRenderingInstance;if(V===null)return q;const _e=V.proxy,ce=q.dirs||(q.dirs=[]);for(let ne=0;ne<Q.length;ne++){let[Ee,j,we,he=EMPTY_OBJ]=Q[ne];isFunction$2(Ee)&&(Ee={mounted:Ee,updated:Ee}),Ee.deep&&traverse(j),ce.push({dir:Ee,instance:_e,value:j,oldValue:void 0,arg:we,modifiers:he})}return q}function invokeDirectiveHook(q,Q,V,_e){const ce=q.dirs,ne=Q&&Q.dirs;for(let Ee=0;Ee<ce.length;Ee++){const j=ce[Ee];ne&&(j.oldValue=ne[Ee].value);let we=j.dir[_e];we&&(pauseTracking(),callWithAsyncErrorHandling(we,V,8,[q.el,j,q,Q]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(q,Q){return function(_e,ce=null){ce!=null&&!isObject$1(ce)&&(ce=null);const ne=createAppContext(),Ee=new Set;let j=!1;const we=ne.app={_uid:uid++,_component:_e,_props:ce,_container:null,_context:ne,_instance:null,version,get config(){return ne.config},set config(he){},use(he,...ye){return Ee.has(he)||(he&&isFunction$2(he.install)?(Ee.add(he),he.install(we,...ye)):isFunction$2(he)&&(Ee.add(he),he(we,...ye))),we},mixin(he){return ne.mixins.includes(he)||ne.mixins.push(he),we},component(he,ye){return ye?(ne.components[he]=ye,we):ne.components[he]},directive(he,ye){return ye?(ne.directives[he]=ye,we):ne.directives[he]},mount(he,ye,xe){if(!j){const Te=createVNode(_e,ce);return Te.appContext=ne,ye&&Q?Q(Te,he):q(Te,he,xe),j=!0,we._container=he,he.__vue_app__=we,getExposeProxy(Te.component)||Te.component.proxy}},unmount(){j&&(q(null,we._container),delete we._container.__vue_app__)},provide(he,ye){return ne.provides[he]=ye,we}};return we}}function setRef(q,Q,V,_e,ce=!1){if(isArray$1(q)){q.forEach((Te,Se)=>setRef(Te,Q&&(isArray$1(Q)?Q[Se]:Q),V,_e,ce));return}if(isAsyncWrapper(_e)&&!ce)return;const ne=_e.shapeFlag&4?getExposeProxy(_e.component)||_e.component.proxy:_e.el,Ee=ce?null:ne,{i:j,r:we}=q,he=Q&&Q.r,ye=j.refs===EMPTY_OBJ?j.refs={}:j.refs,xe=j.setupState;if(he!=null&&he!==we&&(isString$1(he)?(ye[he]=null,hasOwn(xe,he)&&(xe[he]=null)):isRef(he)&&(he.value=null)),isFunction$2(we))callWithErrorHandling(we,j,12,[Ee,ye]);else{const Te=isString$1(we),Se=isRef(we);if(Te||Se){const Ce=()=>{if(q.f){const Oe=Te?ye[we]:we.value;ce?isArray$1(Oe)&&remove(Oe,ne):isArray$1(Oe)?Oe.includes(ne)||Oe.push(ne):Te?ye[we]=[ne]:(we.value=[ne],q.k&&(ye[q.k]=we.value))}else Te?(ye[we]=Ee,hasOwn(xe,we)&&(xe[we]=Ee)):isRef(we)&&(we.value=Ee,q.k&&(ye[q.k]=Ee))};Ee?(Ce.id=-1,queuePostRenderEffect(Ce,V)):Ce()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(q){return baseCreateRenderer(q)}function baseCreateRenderer(q,Q){const V=getGlobalThis();V.__VUE__=!0;const{insert:_e,remove:ce,patchProp:ne,createElement:Ee,createText:j,createComment:we,setText:he,setElementText:ye,parentNode:xe,nextSibling:Te,setScopeId:Se=NOOP,cloneNode:Ce,insertStaticContent:Oe}=q,ze=(Pt,zt,rn,bn=null,Tn=null,$n=null,Dn=!1,xn=null,En=!!zt.dynamicChildren)=>{if(Pt===zt)return;Pt&&!isSameVNodeType(Pt,zt)&&(bn=Rt(Pt),ln(Pt,Tn,$n,!0),Pt=null),zt.patchFlag===-2&&(En=!1,zt.dynamicChildren=null);const{type:Cn,ref:Qn,shapeFlag:nr}=zt;switch(Cn){case Text$1:Ue(Pt,zt,rn,bn);break;case Comment$1:De(Pt,zt,rn,bn);break;case Static:Pt==null&&Fe(zt,rn,bn,Dn);break;case Fragment:nt(Pt,zt,rn,bn,Tn,$n,Dn,xn,En);break;default:nr&1?He(Pt,zt,rn,bn,Tn,$n,Dn,xn,En):nr&6?it(Pt,zt,rn,bn,Tn,$n,Dn,xn,En):(nr&64||nr&128)&&Cn.process(Pt,zt,rn,bn,Tn,$n,Dn,xn,En,hn)}Qn!=null&&Tn&&setRef(Qn,Pt&&Pt.ref,$n,zt||Pt,!zt)},Ue=(Pt,zt,rn,bn)=>{if(Pt==null)_e(zt.el=j(zt.children),rn,bn);else{const Tn=zt.el=Pt.el;zt.children!==Pt.children&&he(Tn,zt.children)}},De=(Pt,zt,rn,bn)=>{Pt==null?_e(zt.el=we(zt.children||""),rn,bn):zt.el=Pt.el},Fe=(Pt,zt,rn,bn)=>{[Pt.el,Pt.anchor]=Oe(Pt.children,zt,rn,bn,Pt.el,Pt.anchor)},Xe=({el:Pt,anchor:zt},rn,bn)=>{let Tn;for(;Pt&&Pt!==zt;)Tn=Te(Pt),_e(Pt,rn,bn),Pt=Tn;_e(zt,rn,bn)},Ke=({el:Pt,anchor:zt})=>{let rn;for(;Pt&&Pt!==zt;)rn=Te(Pt),ce(Pt),Pt=rn;ce(zt)},He=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En)=>{Dn=Dn||zt.type==="svg",Pt==null?Qe(zt,rn,bn,Tn,$n,Dn,xn,En):wt(Pt,zt,Tn,$n,Dn,xn,En)},Qe=(Pt,zt,rn,bn,Tn,$n,Dn,xn)=>{let En,Cn;const{type:Qn,props:nr,shapeFlag:fr,transition:Kn,patchFlag:qn,dirs:un}=Pt;if(Pt.el&&Ce!==void 0&&qn===-1)En=Pt.el=Ce(Pt.el);else{if(En=Pt.el=Ee(Pt.type,$n,nr&&nr.is,nr),fr&8?ye(En,Pt.children):fr&16&&Mt(Pt.children,En,null,bn,Tn,$n&&Qn!=="foreignObject",Dn,xn),un&&invokeDirectiveHook(Pt,null,bn,"created"),nr){for(const Rn in nr)Rn!=="value"&&!isReservedProp(Rn)&&ne(En,Rn,null,nr[Rn],$n,Pt.children,bn,Tn,Xt);"value"in nr&&ne(En,"value",null,nr.value),(Cn=nr.onVnodeBeforeMount)&&invokeVNodeHook(Cn,bn,Pt)}pt(En,Pt,Pt.scopeId,Dn,bn)}un&&invokeDirectiveHook(Pt,null,bn,"beforeMount");const yn=(!Tn||Tn&&!Tn.pendingBranch)&&Kn&&!Kn.persisted;yn&&Kn.beforeEnter(En),_e(En,zt,rn),((Cn=nr&&nr.onVnodeMounted)||yn||un)&&queuePostRenderEffect(()=>{Cn&&invokeVNodeHook(Cn,bn,Pt),yn&&Kn.enter(En),un&&invokeDirectiveHook(Pt,null,bn,"mounted")},Tn)},pt=(Pt,zt,rn,bn,Tn)=>{if(rn&&Se(Pt,rn),bn)for(let $n=0;$n<bn.length;$n++)Se(Pt,bn[$n]);if(Tn){let $n=Tn.subTree;if(zt===$n){const Dn=Tn.vnode;pt(Pt,Dn,Dn.scopeId,Dn.slotScopeIds,Tn.parent)}}},Mt=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En=0)=>{for(let Cn=En;Cn<Pt.length;Cn++){const Qn=Pt[Cn]=xn?cloneIfMounted(Pt[Cn]):normalizeVNode(Pt[Cn]);ze(null,Qn,zt,rn,bn,Tn,$n,Dn,xn)}},wt=(Pt,zt,rn,bn,Tn,$n,Dn)=>{const xn=zt.el=Pt.el;let{patchFlag:En,dynamicChildren:Cn,dirs:Qn}=zt;En|=Pt.patchFlag&16;const nr=Pt.props||EMPTY_OBJ,fr=zt.props||EMPTY_OBJ;let Kn;rn&&toggleRecurse(rn,!1),(Kn=fr.onVnodeBeforeUpdate)&&invokeVNodeHook(Kn,rn,zt,Pt),Qn&&invokeDirectiveHook(zt,Pt,rn,"beforeUpdate"),rn&&toggleRecurse(rn,!0);const qn=Tn&&zt.type!=="foreignObject";if(Cn?bt(Pt.dynamicChildren,Cn,xn,rn,bn,qn,$n):Dn||ht(Pt,zt,xn,null,rn,bn,qn,$n,!1),En>0){if(En&16)rt(xn,zt,nr,fr,rn,bn,Tn);else if(En&2&&nr.class!==fr.class&&ne(xn,"class",null,fr.class,Tn),En&4&&ne(xn,"style",nr.style,fr.style,Tn),En&8){const un=zt.dynamicProps;for(let yn=0;yn<un.length;yn++){const Rn=un[yn],Yn=nr[Rn],mr=fr[Rn];(mr!==Yn||Rn==="value")&&ne(xn,Rn,Yn,mr,Tn,Pt.children,rn,bn,Xt)}}En&1&&Pt.children!==zt.children&&ye(xn,zt.children)}else!Dn&&Cn==null&&rt(xn,zt,nr,fr,rn,bn,Tn);((Kn=fr.onVnodeUpdated)||Qn)&&queuePostRenderEffect(()=>{Kn&&invokeVNodeHook(Kn,rn,zt,Pt),Qn&&invokeDirectiveHook(zt,Pt,rn,"updated")},bn)},bt=(Pt,zt,rn,bn,Tn,$n,Dn)=>{for(let xn=0;xn<zt.length;xn++){const En=Pt[xn],Cn=zt[xn],Qn=En.el&&(En.type===Fragment||!isSameVNodeType(En,Cn)||En.shapeFlag&70)?xe(En.el):rn;ze(En,Cn,Qn,null,bn,Tn,$n,Dn,!0)}},rt=(Pt,zt,rn,bn,Tn,$n,Dn)=>{if(rn!==bn){for(const xn in bn){if(isReservedProp(xn))continue;const En=bn[xn],Cn=rn[xn];En!==Cn&&xn!=="value"&&ne(Pt,xn,Cn,En,Dn,zt.children,Tn,$n,Xt)}if(rn!==EMPTY_OBJ)for(const xn in rn)!isReservedProp(xn)&&!(xn in bn)&&ne(Pt,xn,rn[xn],null,Dn,zt.children,Tn,$n,Xt);"value"in bn&&ne(Pt,"value",rn.value,bn.value)}},nt=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En)=>{const Cn=zt.el=Pt?Pt.el:j(""),Qn=zt.anchor=Pt?Pt.anchor:j("");let{patchFlag:nr,dynamicChildren:fr,slotScopeIds:Kn}=zt;Kn&&(xn=xn?xn.concat(Kn):Kn),Pt==null?(_e(Cn,rn,bn),_e(Qn,rn,bn),Mt(zt.children,rn,Qn,Tn,$n,Dn,xn,En)):nr>0&&nr&64&&fr&&Pt.dynamicChildren?(bt(Pt.dynamicChildren,fr,rn,Tn,$n,Dn,xn),(zt.key!=null||Tn&&zt===Tn.subTree)&&traverseStaticChildren(Pt,zt,!0)):ht(Pt,zt,rn,Qn,Tn,$n,Dn,xn,En)},it=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En)=>{zt.slotScopeIds=xn,Pt==null?zt.shapeFlag&512?Tn.ctx.activate(zt,rn,bn,Dn,En):dt(zt,rn,bn,Tn,$n,Dn,En):lt(Pt,zt,En)},dt=(Pt,zt,rn,bn,Tn,$n,Dn)=>{const xn=Pt.component=createComponentInstance(Pt,bn,Tn);if(isKeepAlive(Pt)&&(xn.ctx.renderer=hn),setupComponent(xn),xn.asyncDep){if(Tn&&Tn.registerDep(xn,ft),!Pt.el){const En=xn.subTree=createVNode(Comment$1);De(null,En,zt,rn)}return}ft(xn,Pt,zt,rn,Tn,$n,Dn)},lt=(Pt,zt,rn)=>{const bn=zt.component=Pt.component;if(shouldUpdateComponent(Pt,zt,rn))if(bn.asyncDep&&!bn.asyncResolved){xt(bn,zt,rn);return}else bn.next=zt,invalidateJob(bn.update),bn.update();else zt.component=Pt.component,zt.el=Pt.el,bn.vnode=zt},ft=(Pt,zt,rn,bn,Tn,$n,Dn)=>{const xn=()=>{if(Pt.isMounted){let{next:Qn,bu:nr,u:fr,parent:Kn,vnode:qn}=Pt,un=Qn,yn;toggleRecurse(Pt,!1),Qn?(Qn.el=qn.el,xt(Pt,Qn,Dn)):Qn=qn,nr&&invokeArrayFns(nr),(yn=Qn.props&&Qn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(yn,Kn,Qn,qn),toggleRecurse(Pt,!0);const Rn=renderComponentRoot(Pt),Yn=Pt.subTree;Pt.subTree=Rn,ze(Yn,Rn,xe(Yn.el),Rt(Yn),Pt,Tn,$n),Qn.el=Rn.el,un===null&&updateHOCHostEl(Pt,Rn.el),fr&&queuePostRenderEffect(fr,Tn),(yn=Qn.props&&Qn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(yn,Kn,Qn,qn),Tn)}else{let Qn;const{el:nr,props:fr}=zt,{bm:Kn,m:qn,parent:un}=Pt,yn=isAsyncWrapper(zt);if(toggleRecurse(Pt,!1),Kn&&invokeArrayFns(Kn),!yn&&(Qn=fr&&fr.onVnodeBeforeMount)&&invokeVNodeHook(Qn,un,zt),toggleRecurse(Pt,!0),nr&&Pn){const Rn=()=>{Pt.subTree=renderComponentRoot(Pt),Pn(nr,Pt.subTree,Pt,Tn,null)};yn?zt.type.__asyncLoader().then(()=>!Pt.isUnmounted&&Rn()):Rn()}else{const Rn=Pt.subTree=renderComponentRoot(Pt);ze(null,Rn,rn,bn,Pt,Tn,$n),zt.el=Rn.el}if(qn&&queuePostRenderEffect(qn,Tn),!yn&&(Qn=fr&&fr.onVnodeMounted)){const Rn=zt;queuePostRenderEffect(()=>invokeVNodeHook(Qn,un,Rn),Tn)}zt.shapeFlag&256&&Pt.a&&queuePostRenderEffect(Pt.a,Tn),Pt.isMounted=!0,zt=rn=bn=null}},En=Pt.effect=new ReactiveEffect(xn,()=>queueJob(Pt.update),Pt.scope),Cn=Pt.update=En.run.bind(En);Cn.id=Pt.uid,toggleRecurse(Pt,!0),Cn()},xt=(Pt,zt,rn)=>{zt.component=Pt;const bn=Pt.vnode.props;Pt.vnode=zt,Pt.next=null,updateProps(Pt,zt.props,bn,rn),updateSlots(Pt,zt.children,rn),pauseTracking(),flushPreFlushCbs(void 0,Pt.update),resetTracking()},ht=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En=!1)=>{const Cn=Pt&&Pt.children,Qn=Pt?Pt.shapeFlag:0,nr=zt.children,{patchFlag:fr,shapeFlag:Kn}=zt;if(fr>0){if(fr&128){st(Cn,nr,rn,bn,Tn,$n,Dn,xn,En);return}else if(fr&256){Vt(Cn,nr,rn,bn,Tn,$n,Dn,xn,En);return}}Kn&8?(Qn&16&&Xt(Cn,Tn,$n),nr!==Cn&&ye(rn,nr)):Qn&16?Kn&16?st(Cn,nr,rn,bn,Tn,$n,Dn,xn,En):Xt(Cn,Tn,$n,!0):(Qn&8&&ye(rn,""),Kn&16&&Mt(nr,rn,bn,Tn,$n,Dn,xn,En))},Vt=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En)=>{Pt=Pt||EMPTY_ARR,zt=zt||EMPTY_ARR;const Cn=Pt.length,Qn=zt.length,nr=Math.min(Cn,Qn);let fr;for(fr=0;fr<nr;fr++){const Kn=zt[fr]=En?cloneIfMounted(zt[fr]):normalizeVNode(zt[fr]);ze(Pt[fr],Kn,rn,null,Tn,$n,Dn,xn,En)}Cn>Qn?Xt(Pt,Tn,$n,!0,!1,nr):Mt(zt,rn,bn,Tn,$n,Dn,xn,En,nr)},st=(Pt,zt,rn,bn,Tn,$n,Dn,xn,En)=>{let Cn=0;const Qn=zt.length;let nr=Pt.length-1,fr=Qn-1;for(;Cn<=nr&&Cn<=fr;){const Kn=Pt[Cn],qn=zt[Cn]=En?cloneIfMounted(zt[Cn]):normalizeVNode(zt[Cn]);if(isSameVNodeType(Kn,qn))ze(Kn,qn,rn,null,Tn,$n,Dn,xn,En);else break;Cn++}for(;Cn<=nr&&Cn<=fr;){const Kn=Pt[nr],qn=zt[fr]=En?cloneIfMounted(zt[fr]):normalizeVNode(zt[fr]);if(isSameVNodeType(Kn,qn))ze(Kn,qn,rn,null,Tn,$n,Dn,xn,En);else break;nr--,fr--}if(Cn>nr){if(Cn<=fr){const Kn=fr+1,qn=Kn<Qn?zt[Kn].el:bn;for(;Cn<=fr;)ze(null,zt[Cn]=En?cloneIfMounted(zt[Cn]):normalizeVNode(zt[Cn]),rn,qn,Tn,$n,Dn,xn,En),Cn++}}else if(Cn>fr)for(;Cn<=nr;)ln(Pt[Cn],Tn,$n,!0),Cn++;else{const Kn=Cn,qn=Cn,un=new Map;for(Cn=qn;Cn<=fr;Cn++){const Br=zt[Cn]=En?cloneIfMounted(zt[Cn]):normalizeVNode(zt[Cn]);Br.key!=null&&un.set(Br.key,Cn)}let yn,Rn=0;const Yn=fr-qn+1;let mr=!1,Sr=0;const Lr=new Array(Yn);for(Cn=0;Cn<Yn;Cn++)Lr[Cn]=0;for(Cn=Kn;Cn<=nr;Cn++){const Br=Pt[Cn];if(Rn>=Yn){ln(Br,Tn,$n,!0);continue}let Fr;if(Br.key!=null)Fr=un.get(Br.key);else for(yn=qn;yn<=fr;yn++)if(Lr[yn-qn]===0&&isSameVNodeType(Br,zt[yn])){Fr=yn;break}Fr===void 0?ln(Br,Tn,$n,!0):(Lr[Fr-qn]=Cn+1,Fr>=Sr?Sr=Fr:mr=!0,ze(Br,zt[Fr],rn,null,Tn,$n,Dn,xn,En),Rn++)}const br=mr?getSequence(Lr):EMPTY_ARR;for(yn=br.length-1,Cn=Yn-1;Cn>=0;Cn--){const Br=qn+Cn,Fr=zt[Br],Gr=Br+1<Qn?zt[Br+1].el:bn;Lr[Cn]===0?ze(null,Fr,rn,Gr,Tn,$n,Dn,xn,En):mr&&(yn<0||Cn!==br[yn]?Dt(Fr,rn,Gr,2):yn--)}}},Dt=(Pt,zt,rn,bn,Tn=null)=>{const{el:$n,type:Dn,transition:xn,children:En,shapeFlag:Cn}=Pt;if(Cn&6){Dt(Pt.component.subTree,zt,rn,bn);return}if(Cn&128){Pt.suspense.move(zt,rn,bn);return}if(Cn&64){Dn.move(Pt,zt,rn,hn);return}if(Dn===Fragment){_e($n,zt,rn);for(let nr=0;nr<En.length;nr++)Dt(En[nr],zt,rn,bn);_e(Pt.anchor,zt,rn);return}if(Dn===Static){Xe(Pt,zt,rn);return}if(bn!==2&&Cn&1&&xn)if(bn===0)xn.beforeEnter($n),_e($n,zt,rn),queuePostRenderEffect(()=>xn.enter($n),Tn);else{const{leave:nr,delayLeave:fr,afterLeave:Kn}=xn,qn=()=>_e($n,zt,rn),un=()=>{nr($n,()=>{qn(),Kn&&Kn()})};fr?fr($n,qn,un):un()}else _e($n,zt,rn)},ln=(Pt,zt,rn,bn=!1,Tn=!1)=>{const{type:$n,props:Dn,ref:xn,children:En,dynamicChildren:Cn,shapeFlag:Qn,patchFlag:nr,dirs:fr}=Pt;if(xn!=null&&setRef(xn,null,rn,Pt,!0),Qn&256){zt.ctx.deactivate(Pt);return}const Kn=Qn&1&&fr,qn=!isAsyncWrapper(Pt);let un;if(qn&&(un=Dn&&Dn.onVnodeBeforeUnmount)&&invokeVNodeHook(un,zt,Pt),Qn&6)an(Pt.component,rn,bn);else{if(Qn&128){Pt.suspense.unmount(rn,bn);return}Kn&&invokeDirectiveHook(Pt,null,zt,"beforeUnmount"),Qn&64?Pt.type.remove(Pt,zt,rn,Tn,hn,bn):Cn&&($n!==Fragment||nr>0&&nr&64)?Xt(Cn,zt,rn,!1,!0):($n===Fragment&&nr&384||!Tn&&Qn&16)&&Xt(En,zt,rn),bn&&In(Pt)}(qn&&(un=Dn&&Dn.onVnodeUnmounted)||Kn)&&queuePostRenderEffect(()=>{un&&invokeVNodeHook(un,zt,Pt),Kn&&invokeDirectiveHook(Pt,null,zt,"unmounted")},rn)},In=Pt=>{const{type:zt,el:rn,anchor:bn,transition:Tn}=Pt;if(zt===Fragment){on(rn,bn);return}if(zt===Static){Ke(Pt);return}const $n=()=>{ce(rn),Tn&&!Tn.persisted&&Tn.afterLeave&&Tn.afterLeave()};if(Pt.shapeFlag&1&&Tn&&!Tn.persisted){const{leave:Dn,delayLeave:xn}=Tn,En=()=>Dn(rn,$n);xn?xn(Pt.el,$n,En):En()}else $n()},on=(Pt,zt)=>{let rn;for(;Pt!==zt;)rn=Te(Pt),ce(Pt),Pt=rn;ce(zt)},an=(Pt,zt,rn)=>{const{bum:bn,scope:Tn,update:$n,subTree:Dn,um:xn}=Pt;bn&&invokeArrayFns(bn),Tn.stop(),$n&&($n.active=!1,ln(Dn,Pt,zt,rn)),xn&&queuePostRenderEffect(xn,zt),queuePostRenderEffect(()=>{Pt.isUnmounted=!0},zt),zt&&zt.pendingBranch&&!zt.isUnmounted&&Pt.asyncDep&&!Pt.asyncResolved&&Pt.suspenseId===zt.pendingId&&(zt.deps--,zt.deps===0&&zt.resolve())},Xt=(Pt,zt,rn,bn=!1,Tn=!1,$n=0)=>{for(let Dn=$n;Dn<Pt.length;Dn++)ln(Pt[Dn],zt,rn,bn,Tn)},Rt=Pt=>Pt.shapeFlag&6?Rt(Pt.component.subTree):Pt.shapeFlag&128?Pt.suspense.next():Te(Pt.anchor||Pt.el),en=(Pt,zt,rn)=>{Pt==null?zt._vnode&&ln(zt._vnode,null,null,!0):ze(zt._vnode||null,Pt,zt,null,null,null,rn),flushPostFlushCbs(),zt._vnode=Pt},hn={p:ze,um:ln,m:Dt,r:In,mt:dt,mc:Mt,pc:ht,pbc:bt,n:Rt,o:q};let vn,Pn;return Q&&([vn,Pn]=Q(hn)),{render:en,hydrate:vn,createApp:createAppAPI(en,vn)}}function toggleRecurse({effect:q,update:Q},V){q.allowRecurse=Q.allowRecurse=V}function traverseStaticChildren(q,Q,V=!1){const _e=q.children,ce=Q.children;if(isArray$1(_e)&&isArray$1(ce))for(let ne=0;ne<_e.length;ne++){const Ee=_e[ne];let j=ce[ne];j.shapeFlag&1&&!j.dynamicChildren&&((j.patchFlag<=0||j.patchFlag===32)&&(j=ce[ne]=cloneIfMounted(ce[ne]),j.el=Ee.el),V||traverseStaticChildren(Ee,j))}}function getSequence(q){const Q=q.slice(),V=[0];let _e,ce,ne,Ee,j;const we=q.length;for(_e=0;_e<we;_e++){const he=q[_e];if(he!==0){if(ce=V[V.length-1],q[ce]<he){Q[_e]=ce,V.push(_e);continue}for(ne=0,Ee=V.length-1;ne<Ee;)j=ne+Ee>>1,q[V[j]]<he?ne=j+1:Ee=j;he<q[V[ne]]&&(ne>0&&(Q[_e]=V[ne-1]),V[ne]=_e)}}for(ne=V.length,Ee=V[ne-1];ne-- >0;)V[ne]=Ee,Ee=Q[Ee];return V}const isTeleport=q=>q.__isTeleport,isTeleportDisabled=q=>q&&(q.disabled||q.disabled===""),isTargetSVG=q=>typeof SVGElement!="undefined"&&q instanceof SVGElement,resolveTarget=(q,Q)=>{const V=q&&q.to;return isString$1(V)?Q?Q(V):null:V},TeleportImpl={__isTeleport:!0,process(q,Q,V,_e,ce,ne,Ee,j,we,he){const{mc:ye,pc:xe,pbc:Te,o:{insert:Se,querySelector:Ce,createText:Oe,createComment:ze}}=he,Ue=isTeleportDisabled(Q.props);let{shapeFlag:De,children:Fe,dynamicChildren:Xe}=Q;if(q==null){const Ke=Q.el=Oe(""),He=Q.anchor=Oe("");Se(Ke,V,_e),Se(He,V,_e);const Qe=Q.target=resolveTarget(Q.props,Ce),pt=Q.targetAnchor=Oe("");Qe&&(Se(pt,Qe),Ee=Ee||isTargetSVG(Qe));const Mt=(wt,bt)=>{De&16&&ye(Fe,wt,bt,ce,ne,Ee,j,we)};Ue?Mt(V,He):Qe&&Mt(Qe,pt)}else{Q.el=q.el;const Ke=Q.anchor=q.anchor,He=Q.target=q.target,Qe=Q.targetAnchor=q.targetAnchor,pt=isTeleportDisabled(q.props),Mt=pt?V:He,wt=pt?Ke:Qe;if(Ee=Ee||isTargetSVG(He),Xe?(Te(q.dynamicChildren,Xe,Mt,ce,ne,Ee,j),traverseStaticChildren(q,Q,!0)):we||xe(q,Q,Mt,wt,ce,ne,Ee,j,!1),Ue)pt||moveTeleport(Q,V,Ke,he,1);else if((Q.props&&Q.props.to)!==(q.props&&q.props.to)){const bt=Q.target=resolveTarget(Q.props,Ce);bt&&moveTeleport(Q,bt,null,he,0)}else pt&&moveTeleport(Q,He,Qe,he,1)}},remove(q,Q,V,_e,{um:ce,o:{remove:ne}},Ee){const{shapeFlag:j,children:we,anchor:he,targetAnchor:ye,target:xe,props:Te}=q;if(xe&&ne(ye),(Ee||!isTeleportDisabled(Te))&&(ne(he),j&16))for(let Se=0;Se<we.length;Se++){const Ce=we[Se];ce(Ce,Q,V,!0,!!Ce.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(q,Q,V,{o:{insert:_e},m:ce},ne=2){ne===0&&_e(q.targetAnchor,Q,V);const{el:Ee,anchor:j,shapeFlag:we,children:he,props:ye}=q,xe=ne===2;if(xe&&_e(Ee,Q,V),(!xe||isTeleportDisabled(ye))&&we&16)for(let Te=0;Te<he.length;Te++)ce(he[Te],Q,V,2);xe&&_e(j,Q,V)}function hydrateTeleport(q,Q,V,_e,ce,ne,{o:{nextSibling:Ee,parentNode:j,querySelector:we}},he){const ye=Q.target=resolveTarget(Q.props,we);if(ye){const xe=ye._lpa||ye.firstChild;Q.shapeFlag&16&&(isTeleportDisabled(Q.props)?(Q.anchor=he(Ee(q),Q,j(q),V,_e,ce,ne),Q.targetAnchor=xe):(Q.anchor=Ee(q),Q.targetAnchor=he(xe,Q,ye,V,_e,ce,ne)),ye._lpa=Q.targetAnchor&&Ee(Q.targetAnchor))}return Q.anchor&&Ee(Q.anchor)}const Teleport=TeleportImpl,COMPONENTS="components",NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(q){return isString$1(q)?resolveAsset(COMPONENTS,q,!1)||q:q||NULL_DYNAMIC_COMPONENT}function resolveAsset(q,Q,V=!0,_e=!1){const ce=currentRenderingInstance||currentInstance;if(ce){const ne=ce.type;if(q===COMPONENTS){const j=getComponentName(ne);if(j&&(j===Q||j===camelize(Q)||j===capitalize(camelize(Q))))return ne}const Ee=resolve(ce[q]||ne[q],Q)||resolve(ce.appContext[q],Q);return!Ee&&_e?ne:Ee}}function resolve(q,Q){return q&&(q[Q]||q[camelize(Q)]||q[capitalize(camelize(Q))])}const Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment$1=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(q=!1){blockStack.push(currentBlock=q?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(q){isBlockTreeEnabled+=q}function setupBlock(q){return q.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(q),q}function createElementBlock(q,Q,V,_e,ce,ne){return setupBlock(createBaseVNode(q,Q,V,_e,ce,ne,!0))}function createBlock(q,Q,V,_e,ce){return setupBlock(createVNode(q,Q,V,_e,ce,!0))}function isVNode(q){return q?q.__v_isVNode===!0:!1}function isSameVNodeType(q,Q){return q.type===Q.type&&q.key===Q.key}const InternalObjectKey="__vInternal",normalizeKey=({key:q})=>q!=null?q:null,normalizeRef=({ref:q,ref_key:Q,ref_for:V})=>q!=null?isString$1(q)||isRef(q)||isFunction$2(q)?{i:currentRenderingInstance,r:q,k:Q,f:!!V}:q:null;function createBaseVNode(q,Q=null,V=null,_e=0,ce=null,ne=q===Fragment?0:1,Ee=!1,j=!1){const we={__v_isVNode:!0,__v_skip:!0,type:q,props:Q,key:Q&&normalizeKey(Q),ref:Q&&normalizeRef(Q),scopeId:currentScopeId,slotScopeIds:null,children:V,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:ne,patchFlag:_e,dynamicProps:ce,dynamicChildren:null,appContext:null};return j?(normalizeChildren(we,V),ne&128&&q.normalize(we)):V&&(we.shapeFlag|=isString$1(V)?8:16),isBlockTreeEnabled>0&&!Ee&&currentBlock&&(we.patchFlag>0||ne&6)&&we.patchFlag!==32&&currentBlock.push(we),we}const createVNode=_createVNode;function _createVNode(q,Q=null,V=null,_e=0,ce=null,ne=!1){if((!q||q===NULL_DYNAMIC_COMPONENT)&&(q=Comment$1),isVNode(q)){const j=cloneVNode(q,Q,!0);return V&&normalizeChildren(j,V),j}if(isClassComponent(q)&&(q=q.__vccOpts),Q){Q=guardReactiveProps(Q);let{class:j,style:we}=Q;j&&!isString$1(j)&&(Q.class=normalizeClass(j)),isObject$1(we)&&(isProxy$1(we)&&!isArray$1(we)&&(we=extend$1({},we)),Q.style=normalizeStyle(we))}const Ee=isString$1(q)?1:isSuspense(q)?128:isTeleport(q)?64:isObject$1(q)?4:isFunction$2(q)?2:0;return createBaseVNode(q,Q,V,_e,ce,Ee,ne,!0)}function guardReactiveProps(q){return q?isProxy$1(q)||InternalObjectKey in q?extend$1({},q):q:null}function cloneVNode(q,Q,V=!1){const{props:_e,ref:ce,patchFlag:ne,children:Ee}=q,j=Q?mergeProps(_e||{},Q):_e;return{__v_isVNode:!0,__v_skip:!0,type:q.type,props:j,key:j&&normalizeKey(j),ref:Q&&Q.ref?V&&ce?isArray$1(ce)?ce.concat(normalizeRef(Q)):[ce,normalizeRef(Q)]:normalizeRef(Q):ce,scopeId:q.scopeId,slotScopeIds:q.slotScopeIds,children:Ee,target:q.target,targetAnchor:q.targetAnchor,staticCount:q.staticCount,shapeFlag:q.shapeFlag,patchFlag:Q&&q.type!==Fragment?ne===-1?16:ne|16:ne,dynamicProps:q.dynamicProps,dynamicChildren:q.dynamicChildren,appContext:q.appContext,dirs:q.dirs,transition:q.transition,component:q.component,suspense:q.suspense,ssContent:q.ssContent&&cloneVNode(q.ssContent),ssFallback:q.ssFallback&&cloneVNode(q.ssFallback),el:q.el,anchor:q.anchor}}function createTextVNode(q=" ",Q=0){return createVNode(Text$1,null,q,Q)}function createStaticVNode(q,Q){const V=createVNode(Static,null,q);return V.staticCount=Q,V}function createCommentVNode(q="",Q=!1){return Q?(openBlock(),createBlock(Comment$1,null,q)):createVNode(Comment$1,null,q)}function normalizeVNode(q){return q==null||typeof q=="boolean"?createVNode(Comment$1):isArray$1(q)?createVNode(Fragment,null,q.slice()):typeof q=="object"?cloneIfMounted(q):createVNode(Text$1,null,String(q))}function cloneIfMounted(q){return q.el===null||q.memo?q:cloneVNode(q)}function normalizeChildren(q,Q){let V=0;const{shapeFlag:_e}=q;if(Q==null)Q=null;else if(isArray$1(Q))V=16;else if(typeof Q=="object")if(_e&65){const ce=Q.default;ce&&(ce._c&&(ce._d=!1),normalizeChildren(q,ce()),ce._c&&(ce._d=!0));return}else{V=32;const ce=Q._;!ce&&!(InternalObjectKey in Q)?Q._ctx=currentRenderingInstance:ce===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?Q._=1:(Q._=2,q.patchFlag|=1024))}else isFunction$2(Q)?(Q={default:Q,_ctx:currentRenderingInstance},V=32):(Q=String(Q),_e&64?(V=16,Q=[createTextVNode(Q)]):V=8);q.children=Q,q.shapeFlag|=V}function mergeProps(...q){const Q={};for(let V=0;V<q.length;V++){const _e=q[V];for(const ce in _e)if(ce==="class")Q.class!==_e.class&&(Q.class=normalizeClass([Q.class,_e.class]));else if(ce==="style")Q.style=normalizeStyle([Q.style,_e.style]);else if(isOn(ce)){const ne=Q[ce],Ee=_e[ce];Ee&&ne!==Ee&&!(isArray$1(ne)&&ne.includes(Ee))&&(Q[ce]=ne?[].concat(ne,Ee):Ee)}else ce!==""&&(Q[ce]=_e[ce])}return Q}function invokeVNodeHook(q,Q,V,_e=null){callWithAsyncErrorHandling(q,Q,7,[V,_e])}function renderList(q,Q,V,_e){let ce;const ne=V&&V[_e];if(isArray$1(q)||isString$1(q)){ce=new Array(q.length);for(let Ee=0,j=q.length;Ee<j;Ee++)ce[Ee]=Q(q[Ee],Ee,void 0,ne&&ne[Ee])}else if(typeof q=="number"){ce=new Array(q);for(let Ee=0;Ee<q;Ee++)ce[Ee]=Q(Ee+1,Ee,void 0,ne&&ne[Ee])}else if(isObject$1(q))if(q[Symbol.iterator])ce=Array.from(q,(Ee,j)=>Q(Ee,j,void 0,ne&&ne[j]));else{const Ee=Object.keys(q);ce=new Array(Ee.length);for(let j=0,we=Ee.length;j<we;j++){const he=Ee[j];ce[j]=Q(q[he],he,j,ne&&ne[j])}}else ce=[];return V&&(V[_e]=ce),ce}const getPublicInstance=q=>q?isStatefulComponent(q)?getExposeProxy(q)||q.proxy:getPublicInstance(q.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:q=>q,$el:q=>q.vnode.el,$data:q=>q.data,$props:q=>q.props,$attrs:q=>q.attrs,$slots:q=>q.slots,$refs:q=>q.refs,$parent:q=>getPublicInstance(q.parent),$root:q=>getPublicInstance(q.root),$emit:q=>q.emit,$options:q=>resolveMergedOptions(q),$forceUpdate:q=>()=>queueJob(q.update),$nextTick:q=>nextTick.bind(q.proxy),$watch:q=>instanceWatch.bind(q)}),PublicInstanceProxyHandlers={get({_:q},Q){const{ctx:V,setupState:_e,data:ce,props:ne,accessCache:Ee,type:j,appContext:we}=q;let he;if(Q[0]!=="$"){const Se=Ee[Q];if(Se!==void 0)switch(Se){case 1:return _e[Q];case 2:return ce[Q];case 4:return V[Q];case 3:return ne[Q]}else{if(_e!==EMPTY_OBJ&&hasOwn(_e,Q))return Ee[Q]=1,_e[Q];if(ce!==EMPTY_OBJ&&hasOwn(ce,Q))return Ee[Q]=2,ce[Q];if((he=q.propsOptions[0])&&hasOwn(he,Q))return Ee[Q]=3,ne[Q];if(V!==EMPTY_OBJ&&hasOwn(V,Q))return Ee[Q]=4,V[Q];shouldCacheAccess&&(Ee[Q]=0)}}const ye=publicPropertiesMap[Q];let xe,Te;if(ye)return Q==="$attrs"&&track(q,"get",Q),ye(q);if((xe=j.__cssModules)&&(xe=xe[Q]))return xe;if(V!==EMPTY_OBJ&&hasOwn(V,Q))return Ee[Q]=4,V[Q];if(Te=we.config.globalProperties,hasOwn(Te,Q))return Te[Q]},set({_:q},Q,V){const{data:_e,setupState:ce,ctx:ne}=q;return ce!==EMPTY_OBJ&&hasOwn(ce,Q)?(ce[Q]=V,!0):_e!==EMPTY_OBJ&&hasOwn(_e,Q)?(_e[Q]=V,!0):hasOwn(q.props,Q)||Q[0]==="$"&&Q.slice(1)in q?!1:(ne[Q]=V,!0)},has({_:{data:q,setupState:Q,accessCache:V,ctx:_e,appContext:ce,propsOptions:ne}},Ee){let j;return!!V[Ee]||q!==EMPTY_OBJ&&hasOwn(q,Ee)||Q!==EMPTY_OBJ&&hasOwn(Q,Ee)||(j=ne[0])&&hasOwn(j,Ee)||hasOwn(_e,Ee)||hasOwn(publicPropertiesMap,Ee)||hasOwn(ce.config.globalProperties,Ee)},defineProperty(q,Q,V){return V.get!=null?this.set(q,Q,V.get(),null):V.value!=null&&this.set(q,Q,V.value,null),Reflect.defineProperty(q,Q,V)}},emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(q,Q,V){const _e=q.type,ce=(Q?Q.appContext:q.appContext)||emptyAppContext,ne={uid:uid$1++,vnode:q,type:_e,parent:Q,appContext:ce,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Q?Q.provides:Object.create(ce.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(_e,ce),emitsOptions:normalizeEmitsOptions(_e,ce),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:_e.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:V,suspenseId:V?V.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return ne.ctx={_:ne},ne.root=Q?Q.root:ne,ne.emit=emit$1.bind(null,ne),q.ce&&q.ce(ne),ne}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=q=>{currentInstance=q,q.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(q){return q.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(q,Q=!1){isInSSRComponentSetup=Q;const{props:V,children:_e}=q.vnode,ce=isStatefulComponent(q);initProps(q,V,ce,Q),initSlots(q,_e);const ne=ce?setupStatefulComponent(q,Q):void 0;return isInSSRComponentSetup=!1,ne}function setupStatefulComponent(q,Q){const V=q.type;q.accessCache=Object.create(null),q.proxy=markRaw(new Proxy(q.ctx,PublicInstanceProxyHandlers));const{setup:_e}=V;if(_e){const ce=q.setupContext=_e.length>1?createSetupContext(q):null;setCurrentInstance(q),pauseTracking();const ne=callWithErrorHandling(_e,q,0,[q.props,ce]);if(resetTracking(),unsetCurrentInstance(),isPromise(ne)){if(ne.then(unsetCurrentInstance,unsetCurrentInstance),Q)return ne.then(Ee=>{handleSetupResult(q,Ee,Q)}).catch(Ee=>{handleError(Ee,q,0)});q.asyncDep=ne}else handleSetupResult(q,ne,Q)}else finishComponentSetup(q,Q)}function handleSetupResult(q,Q,V){isFunction$2(Q)?q.type.__ssrInlineRender?q.ssrRender=Q:q.render=Q:isObject$1(Q)&&(q.setupState=proxyRefs(Q)),finishComponentSetup(q,V)}let compile;function finishComponentSetup(q,Q,V){const _e=q.type;if(!q.render){if(!Q&&compile&&!_e.render){const ce=_e.template;if(ce){const{isCustomElement:ne,compilerOptions:Ee}=q.appContext.config,{delimiters:j,compilerOptions:we}=_e,he=extend$1(extend$1({isCustomElement:ne,delimiters:j},Ee),we);_e.render=compile(ce,he)}}q.render=_e.render||NOOP}setCurrentInstance(q),pauseTracking(),applyOptions(q),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(q){return new Proxy(q.attrs,{get(Q,V){return track(q,"get","$attrs"),Q[V]}})}function createSetupContext(q){const Q=_e=>{q.exposed=_e||{}};let V;return{get attrs(){return V||(V=createAttrsProxy(q))},slots:q.slots,emit:q.emit,expose:Q}}function getExposeProxy(q){if(q.exposed)return q.exposeProxy||(q.exposeProxy=new Proxy(proxyRefs(markRaw(q.exposed)),{get(Q,V){if(V in Q)return Q[V];if(V in publicPropertiesMap)return publicPropertiesMap[V](q)}}))}function getComponentName(q){return isFunction$2(q)&&q.displayName||q.name}function isClassComponent(q){return isFunction$2(q)&&"__vccOpts"in q}const computed=(q,Q)=>computed$1(q,Q,isInSSRComponentSetup);function withAsyncContext(q){const Q=getCurrentInstance();let V=q();return unsetCurrentInstance(),isPromise(V)&&(V=V.catch(_e=>{throw setCurrentInstance(Q),_e})),[V,()=>setCurrentInstance(Q)]}function h$3(q,Q,V){const _e=arguments.length;return _e===2?isObject$1(Q)&&!isArray$1(Q)?isVNode(Q)?createVNode(q,null,[Q]):createVNode(q,Q):createVNode(q,null,Q):(_e>3?V=Array.prototype.slice.call(arguments,2):_e===3&&isVNode(V)&&(V=[V]),createVNode(q,Q,V))}const version="3.2.31",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(q,Q,V)=>{Q.insertBefore(q,V||null)},remove:q=>{const Q=q.parentNode;Q&&Q.removeChild(q)},createElement:(q,Q,V,_e)=>{const ce=Q?doc.createElementNS(svgNS,q):doc.createElement(q,V?{is:V}:void 0);return q==="select"&&_e&&_e.multiple!=null&&ce.setAttribute("multiple",_e.multiple),ce},createText:q=>doc.createTextNode(q),createComment:q=>doc.createComment(q),setText:(q,Q)=>{q.nodeValue=Q},setElementText:(q,Q)=>{q.textContent=Q},parentNode:q=>q.parentNode,nextSibling:q=>q.nextSibling,querySelector:q=>doc.querySelector(q),setScopeId(q,Q){q.setAttribute(Q,"")},cloneNode(q){const Q=q.cloneNode(!0);return"_value"in q&&(Q._value=q._value),Q},insertStaticContent(q,Q,V,_e,ce,ne){const Ee=V?V.previousSibling:Q.lastChild;if(ce&&(ce===ne||ce.nextSibling))for(;Q.insertBefore(ce.cloneNode(!0),V),!(ce===ne||!(ce=ce.nextSibling)););else{templateContainer.innerHTML=_e?`<svg>${q}</svg>`:q;const j=templateContainer.content;if(_e){const we=j.firstChild;for(;we.firstChild;)j.appendChild(we.firstChild);j.removeChild(we)}Q.insertBefore(j,V)}return[Ee?Ee.nextSibling:Q.firstChild,V?V.previousSibling:Q.lastChild]}};function patchClass(q,Q,V){const _e=q._vtc;_e&&(Q=(Q?[Q,..._e]:[..._e]).join(" ")),Q==null?q.removeAttribute("class"):V?q.setAttribute("class",Q):q.className=Q}function patchStyle(q,Q,V){const _e=q.style,ce=isString$1(V);if(V&&!ce){for(const ne in V)setStyle(_e,ne,V[ne]);if(Q&&!isString$1(Q))for(const ne in Q)V[ne]==null&&setStyle(_e,ne,"")}else{const ne=_e.display;ce?Q!==V&&(_e.cssText=V):Q&&q.removeAttribute("style"),"_vod"in q&&(_e.display=ne)}}const importantRE=/\s*!important$/;function setStyle(q,Q,V){if(isArray$1(V))V.forEach(_e=>setStyle(q,Q,_e));else if(Q.startsWith("--"))q.setProperty(Q,V);else{const _e=autoPrefix(q,Q);importantRE.test(V)?q.setProperty(hyphenate(_e),V.replace(importantRE,""),"important"):q[_e]=V}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(q,Q){const V=prefixCache[Q];if(V)return V;let _e=camelize(Q);if(_e!=="filter"&&_e in q)return prefixCache[Q]=_e;_e=capitalize(_e);for(let ce=0;ce<prefixes.length;ce++){const ne=prefixes[ce]+_e;if(ne in q)return prefixCache[Q]=ne}return Q}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(q,Q,V,_e,ce){if(_e&&Q.startsWith("xlink:"))V==null?q.removeAttributeNS(xlinkNS,Q.slice(6,Q.length)):q.setAttributeNS(xlinkNS,Q,V);else{const ne=isSpecialBooleanAttr(Q);V==null||ne&&!includeBooleanAttr(V)?q.removeAttribute(Q):q.setAttribute(Q,ne?"":V)}}function patchDOMProp(q,Q,V,_e,ce,ne,Ee){if(Q==="innerHTML"||Q==="textContent"){_e&&Ee(_e,ce,ne),q[Q]=V==null?"":V;return}if(Q==="value"&&q.tagName!=="PROGRESS"&&!q.tagName.includes("-")){q._value=V;const j=V==null?"":V;(q.value!==j||q.tagName==="OPTION")&&(q.value=j),V==null&&q.removeAttribute(Q);return}if(V===""||V==null){const j=typeof q[Q];if(j==="boolean"){q[Q]=includeBooleanAttr(V);return}else if(V==null&&j==="string"){q[Q]="",q.removeAttribute(Q);return}else if(j==="number"){try{q[Q]=0}catch{}q.removeAttribute(Q);return}}try{q[Q]=V}catch{}}let _getNow=Date.now,skipTimestampCheck=!1;if(typeof window!="undefined"){_getNow()>document.createEvent("Event").timeStamp&&(_getNow=()=>performance.now());const q=navigator.userAgent.match(/firefox\/(\d+)/i);skipTimestampCheck=!!(q&&Number(q[1])<=53)}let cachedNow=0;const p$5=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$5.then(reset),cachedNow=_getNow());function addEventListener(q,Q,V,_e){q.addEventListener(Q,V,_e)}function removeEventListener(q,Q,V,_e){q.removeEventListener(Q,V,_e)}function patchEvent(q,Q,V,_e,ce=null){const ne=q._vei||(q._vei={}),Ee=ne[Q];if(_e&&Ee)Ee.value=_e;else{const[j,we]=parseName(Q);if(_e){const he=ne[Q]=createInvoker(_e,ce);addEventListener(q,j,he,we)}else Ee&&(removeEventListener(q,j,Ee,we),ne[Q]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(q){let Q;if(optionsModifierRE.test(q)){Q={};let V;for(;V=q.match(optionsModifierRE);)q=q.slice(0,q.length-V[0].length),Q[V[0].toLowerCase()]=!0}return[hyphenate(q.slice(2)),Q]}function createInvoker(q,Q){const V=_e=>{const ce=_e.timeStamp||_getNow();(skipTimestampCheck||ce>=V.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(_e,V.value),Q,5,[_e])};return V.value=q,V.attached=getNow(),V}function patchStopImmediatePropagation(q,Q){if(isArray$1(Q)){const V=q.stopImmediatePropagation;return q.stopImmediatePropagation=()=>{V.call(q),q._stopped=!0},Q.map(_e=>ce=>!ce._stopped&&_e&&_e(ce))}else return Q}const nativeOnRE=/^on[a-z]/,patchProp=(q,Q,V,_e,ce=!1,ne,Ee,j,we)=>{Q==="class"?patchClass(q,_e,ce):Q==="style"?patchStyle(q,V,_e):isOn(Q)?isModelListener(Q)||patchEvent(q,Q,V,_e,Ee):(Q[0]==="."?(Q=Q.slice(1),!0):Q[0]==="^"?(Q=Q.slice(1),!1):shouldSetAsProp(q,Q,_e,ce))?patchDOMProp(q,Q,_e,ne,Ee,j,we):(Q==="true-value"?q._trueValue=_e:Q==="false-value"&&(q._falseValue=_e),patchAttr(q,Q,_e,ce))};function shouldSetAsProp(q,Q,V,_e){return _e?!!(Q==="innerHTML"||Q==="textContent"||Q in q&&nativeOnRE.test(Q)&&isFunction$2(V)):Q==="spellcheck"||Q==="draggable"||Q==="form"||Q==="list"&&q.tagName==="INPUT"||Q==="type"&&q.tagName==="TEXTAREA"||nativeOnRE.test(Q)&&isString$1(V)?!1:Q in q}const TRANSITION="transition",ANIMATION="animation",Transition=(q,{slots:Q})=>h$3(BaseTransition,resolveTransitionProps(q),Q);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$1({},BaseTransition.props,DOMTransitionPropsValidators);const callHook=(q,Q=[])=>{isArray$1(q)?q.forEach(V=>V(...Q)):q&&q(...Q)},hasExplicitCallback=q=>q?isArray$1(q)?q.some(Q=>Q.length>1):q.length>1:!1;function resolveTransitionProps(q){const Q={};for(const rt in q)rt in DOMTransitionPropsValidators||(Q[rt]=q[rt]);if(q.css===!1)return Q;const{name:V="v",type:_e,duration:ce,enterFromClass:ne=`${V}-enter-from`,enterActiveClass:Ee=`${V}-enter-active`,enterToClass:j=`${V}-enter-to`,appearFromClass:we=ne,appearActiveClass:he=Ee,appearToClass:ye=j,leaveFromClass:xe=`${V}-leave-from`,leaveActiveClass:Te=`${V}-leave-active`,leaveToClass:Se=`${V}-leave-to`}=q,Ce=normalizeDuration(ce),Oe=Ce&&Ce[0],ze=Ce&&Ce[1],{onBeforeEnter:Ue,onEnter:De,onEnterCancelled:Fe,onLeave:Xe,onLeaveCancelled:Ke,onBeforeAppear:He=Ue,onAppear:Qe=De,onAppearCancelled:pt=Fe}=Q,Mt=(rt,nt,it)=>{removeTransitionClass(rt,nt?ye:j),removeTransitionClass(rt,nt?he:Ee),it&&it()},wt=(rt,nt)=>{removeTransitionClass(rt,Se),removeTransitionClass(rt,Te),nt&&nt()},bt=rt=>(nt,it)=>{const dt=rt?Qe:De,lt=()=>Mt(nt,rt,it);callHook(dt,[nt,lt]),nextFrame(()=>{removeTransitionClass(nt,rt?we:ne),addTransitionClass(nt,rt?ye:j),hasExplicitCallback(dt)||whenTransitionEnds(nt,_e,Oe,lt)})};return extend$1(Q,{onBeforeEnter(rt){callHook(Ue,[rt]),addTransitionClass(rt,ne),addTransitionClass(rt,Ee)},onBeforeAppear(rt){callHook(He,[rt]),addTransitionClass(rt,we),addTransitionClass(rt,he)},onEnter:bt(!1),onAppear:bt(!0),onLeave(rt,nt){const it=()=>wt(rt,nt);addTransitionClass(rt,xe),forceReflow(),addTransitionClass(rt,Te),nextFrame(()=>{removeTransitionClass(rt,xe),addTransitionClass(rt,Se),hasExplicitCallback(Xe)||whenTransitionEnds(rt,_e,ze,it)}),callHook(Xe,[rt,it])},onEnterCancelled(rt){Mt(rt,!1),callHook(Fe,[rt])},onAppearCancelled(rt){Mt(rt,!0),callHook(pt,[rt])},onLeaveCancelled(rt){wt(rt),callHook(Ke,[rt])}})}function normalizeDuration(q){if(q==null)return null;if(isObject$1(q))return[NumberOf(q.enter),NumberOf(q.leave)];{const Q=NumberOf(q);return[Q,Q]}}function NumberOf(q){return toNumber(q)}function addTransitionClass(q,Q){Q.split(/\s+/).forEach(V=>V&&q.classList.add(V)),(q._vtc||(q._vtc=new Set)).add(Q)}function removeTransitionClass(q,Q){Q.split(/\s+/).forEach(_e=>_e&&q.classList.remove(_e));const{_vtc:V}=q;V&&(V.delete(Q),V.size||(q._vtc=void 0))}function nextFrame(q){requestAnimationFrame(()=>{requestAnimationFrame(q)})}let endId=0;function whenTransitionEnds(q,Q,V,_e){const ce=q._endId=++endId,ne=()=>{ce===q._endId&&_e()};if(V)return setTimeout(ne,V);const{type:Ee,timeout:j,propCount:we}=getTransitionInfo(q,Q);if(!Ee)return _e();const he=Ee+"end";let ye=0;const xe=()=>{q.removeEventListener(he,Te),ne()},Te=Se=>{Se.target===q&&++ye>=we&&xe()};setTimeout(()=>{ye<we&&xe()},j+1),q.addEventListener(he,Te)}function getTransitionInfo(q,Q){const V=window.getComputedStyle(q),_e=Ce=>(V[Ce]||"").split(", "),ce=_e(TRANSITION+"Delay"),ne=_e(TRANSITION+"Duration"),Ee=getTimeout(ce,ne),j=_e(ANIMATION+"Delay"),we=_e(ANIMATION+"Duration"),he=getTimeout(j,we);let ye=null,xe=0,Te=0;Q===TRANSITION?Ee>0&&(ye=TRANSITION,xe=Ee,Te=ne.length):Q===ANIMATION?he>0&&(ye=ANIMATION,xe=he,Te=we.length):(xe=Math.max(Ee,he),ye=xe>0?Ee>he?TRANSITION:ANIMATION:null,Te=ye?ye===TRANSITION?ne.length:we.length:0);const Se=ye===TRANSITION&&/\b(transform|all)(,|$)/.test(V[TRANSITION+"Property"]);return{type:ye,timeout:xe,propCount:Te,hasTransform:Se}}function getTimeout(q,Q){for(;q.length<Q.length;)q=q.concat(q);return Math.max(...Q.map((V,_e)=>toMs(V)+toMs(q[_e])))}function toMs(q){return Number(q.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const getModelAssigner=q=>{const Q=q.props["onUpdate:modelValue"];return isArray$1(Q)?V=>invokeArrayFns(Q,V):Q};function onCompositionStart(q){q.target.composing=!0}function onCompositionEnd(q){const Q=q.target;Q.composing&&(Q.composing=!1,trigger(Q,"input"))}function trigger(q,Q){const V=document.createEvent("HTMLEvents");V.initEvent(Q,!0,!0),q.dispatchEvent(V)}const vModelText={created(q,{modifiers:{lazy:Q,trim:V,number:_e}},ce){q._assign=getModelAssigner(ce);const ne=_e||ce.props&&ce.props.type==="number";addEventListener(q,Q?"change":"input",Ee=>{if(Ee.target.composing)return;let j=q.value;V?j=j.trim():ne&&(j=toNumber(j)),q._assign(j)}),V&&addEventListener(q,"change",()=>{q.value=q.value.trim()}),Q||(addEventListener(q,"compositionstart",onCompositionStart),addEventListener(q,"compositionend",onCompositionEnd),addEventListener(q,"change",onCompositionEnd))},mounted(q,{value:Q}){q.value=Q==null?"":Q},beforeUpdate(q,{value:Q,modifiers:{lazy:V,trim:_e,number:ce}},ne){if(q._assign=getModelAssigner(ne),q.composing||document.activeElement===q&&(V||_e&&q.value.trim()===Q||(ce||q.type==="number")&&toNumber(q.value)===Q))return;const Ee=Q==null?"":Q;q.value!==Ee&&(q.value=Ee)}},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...q)=>{const Q=ensureRenderer().createApp(...q),{mount:V}=Q;return Q.mount=_e=>{const ce=normalizeContainer(_e);if(!ce)return;const ne=Q._component;!isFunction$2(ne)&&!ne.render&&!ne.template&&(ne.template=ce.innerHTML),ce.innerHTML="";const Ee=V(ce,!1,ce instanceof SVGElement);return ce instanceof Element&&(ce.removeAttribute("v-cloak"),ce.setAttribute("data-v-app","")),Ee},Q};function normalizeContainer(q){return isString$1(q)?document.querySelector(q):q}/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",PolySymbol=q=>hasSymbol?Symbol(q):"_vr_"+q,matchedRouteKey=PolySymbol("rvlm"),viewDepthKey=PolySymbol("rvd"),routerKey=PolySymbol("r"),routeLocationKey=PolySymbol("rl"),routerViewLocationKey=PolySymbol("rvl"),isBrowser=typeof window!="undefined";function isESModule(q){return q.__esModule||hasSymbol&&q[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams(q,Q){const V={};for(const _e in Q){const ce=Q[_e];V[_e]=Array.isArray(ce)?ce.map(q):q(ce)}return V}const noop$1=()=>{},TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=q=>q.replace(TRAILING_SLASH_RE,"");function parseURL(q,Q,V="/"){let _e,ce={},ne="",Ee="";const j=Q.indexOf("?"),we=Q.indexOf("#",j>-1?j:0);return j>-1&&(_e=Q.slice(0,j),ne=Q.slice(j+1,we>-1?we:Q.length),ce=q(ne)),we>-1&&(_e=_e||Q.slice(0,we),Ee=Q.slice(we,Q.length)),_e=resolveRelativePath(_e!=null?_e:Q,V),{fullPath:_e+(ne&&"?")+ne+Ee,path:_e,query:ce,hash:Ee}}function stringifyURL(q,Q){const V=Q.query?q(Q.query):"";return Q.path+(V&&"?")+V+(Q.hash||"")}function stripBase(q,Q){return!Q||!q.toLowerCase().startsWith(Q.toLowerCase())?q:q.slice(Q.length)||"/"}function isSameRouteLocation(q,Q,V){const _e=Q.matched.length-1,ce=V.matched.length-1;return _e>-1&&_e===ce&&isSameRouteRecord(Q.matched[_e],V.matched[ce])&&isSameRouteLocationParams(Q.params,V.params)&&q(Q.query)===q(V.query)&&Q.hash===V.hash}function isSameRouteRecord(q,Q){return(q.aliasOf||q)===(Q.aliasOf||Q)}function isSameRouteLocationParams(q,Q){if(Object.keys(q).length!==Object.keys(Q).length)return!1;for(const V in q)if(!isSameRouteLocationParamsValue(q[V],Q[V]))return!1;return!0}function isSameRouteLocationParamsValue(q,Q){return Array.isArray(q)?isEquivalentArray(q,Q):Array.isArray(Q)?isEquivalentArray(Q,q):q===Q}function isEquivalentArray(q,Q){return Array.isArray(Q)?q.length===Q.length&&q.every((V,_e)=>V===Q[_e]):q.length===1&&q[0]===Q}function resolveRelativePath(q,Q){if(q.startsWith("/"))return q;if(!q)return Q;const V=Q.split("/"),_e=q.split("/");let ce=V.length-1,ne,Ee;for(ne=0;ne<_e.length;ne++)if(Ee=_e[ne],!(ce===1||Ee==="."))if(Ee==="..")ce--;else break;return V.slice(0,ce).join("/")+"/"+_e.slice(ne-(ne===_e.length?1:0)).join("/")}var NavigationType;(function(q){q.pop="pop",q.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(q){q.back="back",q.forward="forward",q.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(q){if(!q)if(isBrowser){const Q=document.querySelector("base");q=Q&&Q.getAttribute("href")||"/",q=q.replace(/^\w+:\/\/[^\/]+/,"")}else q="/";return q[0]!=="/"&&q[0]!=="#"&&(q="/"+q),removeTrailingSlash(q)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(q,Q){return q.replace(BEFORE_HASH_RE,"#")+Q}function getElementPosition(q,Q){const V=document.documentElement.getBoundingClientRect(),_e=q.getBoundingClientRect();return{behavior:Q.behavior,left:_e.left-V.left-(Q.left||0),top:_e.top-V.top-(Q.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(q){let Q;if("el"in q){const V=q.el,_e=typeof V=="string"&&V.startsWith("#"),ce=typeof V=="string"?_e?document.getElementById(V.slice(1)):document.querySelector(V):V;if(!ce)return;Q=getElementPosition(ce,q)}else Q=q;"scrollBehavior"in document.documentElement.style?window.scrollTo(Q):window.scrollTo(Q.left!=null?Q.left:window.pageXOffset,Q.top!=null?Q.top:window.pageYOffset)}function getScrollKey(q,Q){return(history.state?history.state.position-Q:-1)+q}const scrollPositions=new Map;function saveScrollPosition(q,Q){scrollPositions.set(q,Q)}function getSavedScrollPosition(q){const Q=scrollPositions.get(q);return scrollPositions.delete(q),Q}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(q,Q){const{pathname:V,search:_e,hash:ce}=Q,ne=q.indexOf("#");if(ne>-1){let j=ce.includes(q.slice(ne))?q.slice(ne).length:1,we=ce.slice(j);return we[0]!=="/"&&(we="/"+we),stripBase(we,"")}return stripBase(V,q)+_e+ce}function useHistoryListeners(q,Q,V,_e){let ce=[],ne=[],Ee=null;const j=({state:Te})=>{const Se=createCurrentLocation(q,location),Ce=V.value,Oe=Q.value;let ze=0;if(Te){if(V.value=Se,Q.value=Te,Ee&&Ee===Ce){Ee=null;return}ze=Oe?Te.position-Oe.position:0}else _e(Se);ce.forEach(Ue=>{Ue(V.value,Ce,{delta:ze,type:NavigationType.pop,direction:ze?ze>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function we(){Ee=V.value}function he(Te){ce.push(Te);const Se=()=>{const Ce=ce.indexOf(Te);Ce>-1&&ce.splice(Ce,1)};return ne.push(Se),Se}function ye(){const{history:Te}=window;!Te.state||Te.replaceState(assign$1({},Te.state,{scroll:computeScrollPosition()}),"")}function xe(){for(const Te of ne)Te();ne=[],window.removeEventListener("popstate",j),window.removeEventListener("beforeunload",ye)}return window.addEventListener("popstate",j),window.addEventListener("beforeunload",ye),{pauseListeners:we,listen:he,destroy:xe}}function buildState(q,Q,V,_e=!1,ce=!1){return{back:q,current:Q,forward:V,replaced:_e,position:window.history.length,scroll:ce?computeScrollPosition():null}}function useHistoryStateNavigation(q){const{history:Q,location:V}=window,_e={value:createCurrentLocation(q,V)},ce={value:Q.state};ce.value||ne(_e.value,{back:null,current:_e.value,forward:null,position:Q.length-1,replaced:!0,scroll:null},!0);function ne(we,he,ye){const xe=q.indexOf("#"),Te=xe>-1?(V.host&&document.querySelector("base")?q:q.slice(xe))+we:createBaseLocation()+q+we;try{Q[ye?"replaceState":"pushState"](he,"",Te),ce.value=he}catch(Se){console.error(Se),V[ye?"replace":"assign"](Te)}}function Ee(we,he){const ye=assign$1({},Q.state,buildState(ce.value.back,we,ce.value.forward,!0),he,{position:ce.value.position});ne(we,ye,!0),_e.value=we}function j(we,he){const ye=assign$1({},ce.value,Q.state,{forward:we,scroll:computeScrollPosition()});ne(ye.current,ye,!0);const xe=assign$1({},buildState(_e.value,we,null),{position:ye.position+1},he);ne(we,xe,!1),_e.value=we}return{location:_e,state:ce,push:j,replace:Ee}}function createWebHistory(q){q=normalizeBase(q);const Q=useHistoryStateNavigation(q),V=useHistoryListeners(q,Q.state,Q.location,Q.replace);function _e(ne,Ee=!0){Ee||V.pauseListeners(),history.go(ne)}const ce=assign$1({location:"",base:q,go:_e,createHref:createHref.bind(null,q)},Q,V);return Object.defineProperty(ce,"location",{enumerable:!0,get:()=>Q.location.value}),Object.defineProperty(ce,"state",{enumerable:!0,get:()=>Q.state.value}),ce}function isRouteLocation(q){return typeof q=="string"||q&&typeof q=="object"}function isRouteName(q){return typeof q=="string"||typeof q=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=PolySymbol("nf");var NavigationFailureType;(function(q){q[q.aborted=4]="aborted",q[q.cancelled=8]="cancelled",q[q.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(q,Q){return assign$1(new Error,{type:q,[NavigationFailureSymbol]:!0},Q)}function isNavigationFailure(q,Q){return q instanceof Error&&NavigationFailureSymbol in q&&(Q==null||!!(q.type&Q))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(q,Q){const V=assign$1({},BASE_PATH_PARSER_OPTIONS,Q),_e=[];let ce=V.start?"^":"";const ne=[];for(const he of q){const ye=he.length?[]:[90];V.strict&&!he.length&&(ce+="/");for(let xe=0;xe<he.length;xe++){const Te=he[xe];let Se=40+(V.sensitive?.25:0);if(Te.type===0)xe||(ce+="/"),ce+=Te.value.replace(REGEX_CHARS_RE,"\\$&"),Se+=40;else if(Te.type===1){const{value:Ce,repeatable:Oe,optional:ze,regexp:Ue}=Te;ne.push({name:Ce,repeatable:Oe,optional:ze});const De=Ue||BASE_PARAM_PATTERN;if(De!==BASE_PARAM_PATTERN){Se+=10;try{new RegExp(`(${De})`)}catch(Xe){throw new Error(`Invalid custom RegExp for param "${Ce}" (${De}): `+Xe.message)}}let Fe=Oe?`((?:${De})(?:/(?:${De}))*)`:`(${De})`;xe||(Fe=ze&&he.length<2?`(?:/${Fe})`:"/"+Fe),ze&&(Fe+="?"),ce+=Fe,Se+=20,ze&&(Se+=-8),Oe&&(Se+=-20),De===".*"&&(Se+=-50)}ye.push(Se)}_e.push(ye)}if(V.strict&&V.end){const he=_e.length-1;_e[he][_e[he].length-1]+=.7000000000000001}V.strict||(ce+="/?"),V.end?ce+="$":V.strict&&(ce+="(?:/|$)");const Ee=new RegExp(ce,V.sensitive?"":"i");function j(he){const ye=he.match(Ee),xe={};if(!ye)return null;for(let Te=1;Te<ye.length;Te++){const Se=ye[Te]||"",Ce=ne[Te-1];xe[Ce.name]=Se&&Ce.repeatable?Se.split("/"):Se}return xe}function we(he){let ye="",xe=!1;for(const Te of q){(!xe||!ye.endsWith("/"))&&(ye+="/"),xe=!1;for(const Se of Te)if(Se.type===0)ye+=Se.value;else if(Se.type===1){const{value:Ce,repeatable:Oe,optional:ze}=Se,Ue=Ce in he?he[Ce]:"";if(Array.isArray(Ue)&&!Oe)throw new Error(`Provided param "${Ce}" is an array but it is not repeatable (* or + modifiers)`);const De=Array.isArray(Ue)?Ue.join("/"):Ue;if(!De)if(ze)Te.length<2&&(ye.endsWith("/")?ye=ye.slice(0,-1):xe=!0);else throw new Error(`Missing required param "${Ce}"`);ye+=De}}return ye}return{re:Ee,score:_e,keys:ne,parse:j,stringify:we}}function compareScoreArray(q,Q){let V=0;for(;V<q.length&&V<Q.length;){const _e=Q[V]-q[V];if(_e)return _e;V++}return q.length<Q.length?q.length===1&&q[0]===40+40?-1:1:q.length>Q.length?Q.length===1&&Q[0]===40+40?1:-1:0}function comparePathParserScore(q,Q){let V=0;const _e=q.score,ce=Q.score;for(;V<_e.length&&V<ce.length;){const ne=compareScoreArray(_e[V],ce[V]);if(ne)return ne;V++}return ce.length-_e.length}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(q){if(!q)return[[]];if(q==="/")return[[ROOT_TOKEN]];if(!q.startsWith("/"))throw new Error(`Invalid path "${q}"`);function Q(Se){throw new Error(`ERR (${V})/"${he}": ${Se}`)}let V=0,_e=V;const ce=[];let ne;function Ee(){ne&&ce.push(ne),ne=[]}let j=0,we,he="",ye="";function xe(){!he||(V===0?ne.push({type:0,value:he}):V===1||V===2||V===3?(ne.length>1&&(we==="*"||we==="+")&&Q(`A repeatable param (${he}) must be alone in its segment. eg: '/:ids+.`),ne.push({type:1,value:he,regexp:ye,repeatable:we==="*"||we==="+",optional:we==="*"||we==="?"})):Q("Invalid state to consume buffer"),he="")}function Te(){he+=we}for(;j<q.length;){if(we=q[j++],we==="\\"&&V!==2){_e=V,V=4;continue}switch(V){case 0:we==="/"?(he&&xe(),Ee()):we===":"?(xe(),V=1):Te();break;case 4:Te(),V=_e;break;case 1:we==="("?V=2:VALID_PARAM_RE.test(we)?Te():(xe(),V=0,we!=="*"&&we!=="?"&&we!=="+"&&j--);break;case 2:we===")"?ye[ye.length-1]=="\\"?ye=ye.slice(0,-1)+we:V=3:ye+=we;break;case 3:xe(),V=0,we!=="*"&&we!=="?"&&we!=="+"&&j--,ye="";break;default:Q("Unknown state");break}}return V===2&&Q(`Unfinished custom RegExp for param "${he}"`),xe(),Ee(),ce}function createRouteRecordMatcher(q,Q,V){const _e=tokensToParser(tokenizePath(q.path),V),ce=assign$1(_e,{record:q,parent:Q,children:[],alias:[]});return Q&&!ce.record.aliasOf==!Q.record.aliasOf&&Q.children.push(ce),ce}function createRouterMatcher(q,Q){const V=[],_e=new Map;Q=mergeOptions({strict:!1,end:!0,sensitive:!1},Q);function ce(ye){return _e.get(ye)}function ne(ye,xe,Te){const Se=!Te,Ce=normalizeRouteRecord(ye);Ce.aliasOf=Te&&Te.record;const Oe=mergeOptions(Q,ye),ze=[Ce];if("alias"in ye){const Fe=typeof ye.alias=="string"?[ye.alias]:ye.alias;for(const Xe of Fe)ze.push(assign$1({},Ce,{components:Te?Te.record.components:Ce.components,path:Xe,aliasOf:Te?Te.record:Ce}))}let Ue,De;for(const Fe of ze){const{path:Xe}=Fe;if(xe&&Xe[0]!=="/"){const Ke=xe.record.path,He=Ke[Ke.length-1]==="/"?"":"/";Fe.path=xe.record.path+(Xe&&He+Xe)}if(Ue=createRouteRecordMatcher(Fe,xe,Oe),Te?Te.alias.push(Ue):(De=De||Ue,De!==Ue&&De.alias.push(Ue),Se&&ye.name&&!isAliasRecord(Ue)&&Ee(ye.name)),"children"in Ce){const Ke=Ce.children;for(let He=0;He<Ke.length;He++)ne(Ke[He],Ue,Te&&Te.children[He])}Te=Te||Ue,we(Ue)}return De?()=>{Ee(De)}:noop$1}function Ee(ye){if(isRouteName(ye)){const xe=_e.get(ye);xe&&(_e.delete(ye),V.splice(V.indexOf(xe),1),xe.children.forEach(Ee),xe.alias.forEach(Ee))}else{const xe=V.indexOf(ye);xe>-1&&(V.splice(xe,1),ye.record.name&&_e.delete(ye.record.name),ye.children.forEach(Ee),ye.alias.forEach(Ee))}}function j(){return V}function we(ye){let xe=0;for(;xe<V.length&&comparePathParserScore(ye,V[xe])>=0&&(ye.record.path!==V[xe].record.path||!isRecordChildOf(ye,V[xe]));)xe++;V.splice(xe,0,ye),ye.record.name&&!isAliasRecord(ye)&&_e.set(ye.record.name,ye)}function he(ye,xe){let Te,Se={},Ce,Oe;if("name"in ye&&ye.name){if(Te=_e.get(ye.name),!Te)throw createRouterError(1,{location:ye});Oe=Te.record.name,Se=assign$1(paramsFromLocation(xe.params,Te.keys.filter(De=>!De.optional).map(De=>De.name)),ye.params),Ce=Te.stringify(Se)}else if("path"in ye)Ce=ye.path,Te=V.find(De=>De.re.test(Ce)),Te&&(Se=Te.parse(Ce),Oe=Te.record.name);else{if(Te=xe.name?_e.get(xe.name):V.find(De=>De.re.test(xe.path)),!Te)throw createRouterError(1,{location:ye,currentLocation:xe});Oe=Te.record.name,Se=assign$1({},xe.params,ye.params),Ce=Te.stringify(Se)}const ze=[];let Ue=Te;for(;Ue;)ze.unshift(Ue.record),Ue=Ue.parent;return{name:Oe,path:Ce,params:Se,matched:ze,meta:mergeMetaFields(ze)}}return q.forEach(ye=>ne(ye)),{addRoute:ne,resolve:he,removeRoute:Ee,getRoutes:j,getRecordMatcher:ce}}function paramsFromLocation(q,Q){const V={};for(const _e of Q)_e in q&&(V[_e]=q[_e]);return V}function normalizeRouteRecord(q){return{path:q.path,redirect:q.redirect,name:q.name,meta:q.meta||{},aliasOf:void 0,beforeEnter:q.beforeEnter,props:normalizeRecordProps(q),children:q.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in q?q.components||{}:{default:q.component}}}function normalizeRecordProps(q){const Q={},V=q.props||!1;if("component"in q)Q.default=V;else for(const _e in q.components)Q[_e]=typeof V=="boolean"?V:V[_e];return Q}function isAliasRecord(q){for(;q;){if(q.record.aliasOf)return!0;q=q.parent}return!1}function mergeMetaFields(q){return q.reduce((Q,V)=>assign$1(Q,V.meta),{})}function mergeOptions(q,Q){const V={};for(const _e in q)V[_e]=_e in Q?Q[_e]:q[_e];return V}function isRecordChildOf(q,Q){return Q.children.some(V=>V===q||isRecordChildOf(q,V))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(q){return encodeURI(""+q).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(q){return commonEncode(q).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(q){return commonEncode(q).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(q){return encodeQueryValue(q).replace(EQUAL_RE,"%3D")}function encodePath(q){return commonEncode(q).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(q){return q==null?"":encodePath(q).replace(SLASH_RE,"%2F")}function decode(q){try{return decodeURIComponent(""+q)}catch{}return""+q}function parseQuery(q){const Q={};if(q===""||q==="?")return Q;const _e=(q[0]==="?"?q.slice(1):q).split("&");for(let ce=0;ce<_e.length;++ce){const ne=_e[ce].replace(PLUS_RE," "),Ee=ne.indexOf("="),j=decode(Ee<0?ne:ne.slice(0,Ee)),we=Ee<0?null:decode(ne.slice(Ee+1));if(j in Q){let he=Q[j];Array.isArray(he)||(he=Q[j]=[he]),he.push(we)}else Q[j]=we}return Q}function stringifyQuery(q){let Q="";for(let V in q){const _e=q[V];if(V=encodeQueryKey(V),_e==null){_e!==void 0&&(Q+=(Q.length?"&":"")+V);continue}(Array.isArray(_e)?_e.map(ne=>ne&&encodeQueryValue(ne)):[_e&&encodeQueryValue(_e)]).forEach(ne=>{ne!==void 0&&(Q+=(Q.length?"&":"")+V,ne!=null&&(Q+="="+ne))})}return Q}function normalizeQuery(q){const Q={};for(const V in q){const _e=q[V];_e!==void 0&&(Q[V]=Array.isArray(_e)?_e.map(ce=>ce==null?null:""+ce):_e==null?_e:""+_e)}return Q}function useCallbacks(){let q=[];function Q(_e){return q.push(_e),()=>{const ce=q.indexOf(_e);ce>-1&&q.splice(ce,1)}}function V(){q=[]}return{add:Q,list:()=>q,reset:V}}function guardToPromiseFn(q,Q,V,_e,ce){const ne=_e&&(_e.enterCallbacks[ce]=_e.enterCallbacks[ce]||[]);return()=>new Promise((Ee,j)=>{const we=xe=>{xe===!1?j(createRouterError(4,{from:V,to:Q})):xe instanceof Error?j(xe):isRouteLocation(xe)?j(createRouterError(2,{from:Q,to:xe})):(ne&&_e.enterCallbacks[ce]===ne&&typeof xe=="function"&&ne.push(xe),Ee())},he=q.call(_e&&_e.instances[ce],Q,V,we);let ye=Promise.resolve(he);q.length<3&&(ye=ye.then(we)),ye.catch(xe=>j(xe))})}function extractComponentsGuards(q,Q,V,_e){const ce=[];for(const ne of q)for(const Ee in ne.components){let j=ne.components[Ee];if(!(Q!=="beforeRouteEnter"&&!ne.instances[Ee]))if(isRouteComponent(j)){const he=(j.__vccOpts||j)[Q];he&&ce.push(guardToPromiseFn(he,V,_e,ne,Ee))}else{let we=j();ce.push(()=>we.then(he=>{if(!he)return Promise.reject(new Error(`Couldn't resolve component "${Ee}" at "${ne.path}"`));const ye=isESModule(he)?he.default:he;ne.components[Ee]=ye;const Te=(ye.__vccOpts||ye)[Q];return Te&&guardToPromiseFn(Te,V,_e,ne,Ee)()}))}}return ce}function isRouteComponent(q){return typeof q=="object"||"displayName"in q||"props"in q||"__vccOpts"in q}function useLink(q){const Q=inject(routerKey),V=inject(routeLocationKey),_e=computed(()=>Q.resolve(unref(q.to))),ce=computed(()=>{const{matched:we}=_e.value,{length:he}=we,ye=we[he-1],xe=V.matched;if(!ye||!xe.length)return-1;const Te=xe.findIndex(isSameRouteRecord.bind(null,ye));if(Te>-1)return Te;const Se=getOriginalPath(we[he-2]);return he>1&&getOriginalPath(ye)===Se&&xe[xe.length-1].path!==Se?xe.findIndex(isSameRouteRecord.bind(null,we[he-2])):Te}),ne=computed(()=>ce.value>-1&&includesParams(V.params,_e.value.params)),Ee=computed(()=>ce.value>-1&&ce.value===V.matched.length-1&&isSameRouteLocationParams(V.params,_e.value.params));function j(we={}){return guardEvent(we)?Q[unref(q.replace)?"replace":"push"](unref(q.to)).catch(noop$1):Promise.resolve()}return{route:_e,href:computed(()=>_e.value.href),isActive:ne,isExactActive:Ee,navigate:j}}const RouterLinkImpl=defineComponent({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(q,{slots:Q}){const V=reactive(useLink(q)),{options:_e}=inject(routerKey),ce=computed(()=>({[getLinkClass(q.activeClass,_e.linkActiveClass,"router-link-active")]:V.isActive,[getLinkClass(q.exactActiveClass,_e.linkExactActiveClass,"router-link-exact-active")]:V.isExactActive}));return()=>{const ne=Q.default&&Q.default(V);return q.custom?ne:h$3("a",{"aria-current":V.isExactActive?q.ariaCurrentValue:null,href:V.href,onClick:V.navigate,class:ce.value},ne)}}}),RouterLink=RouterLinkImpl;function guardEvent(q){if(!(q.metaKey||q.altKey||q.ctrlKey||q.shiftKey)&&!q.defaultPrevented&&!(q.button!==void 0&&q.button!==0)){if(q.currentTarget&&q.currentTarget.getAttribute){const Q=q.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(Q))return}return q.preventDefault&&q.preventDefault(),!0}}function includesParams(q,Q){for(const V in Q){const _e=Q[V],ce=q[V];if(typeof _e=="string"){if(_e!==ce)return!1}else if(!Array.isArray(ce)||ce.length!==_e.length||_e.some((ne,Ee)=>ne!==ce[Ee]))return!1}return!0}function getOriginalPath(q){return q?q.aliasOf?q.aliasOf.path:q.path:""}const getLinkClass=(q,Q,V)=>q!=null?q:Q!=null?Q:V,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(q,{attrs:Q,slots:V}){const _e=inject(routerViewLocationKey),ce=computed(()=>q.route||_e.value),ne=inject(viewDepthKey,0),Ee=computed(()=>ce.value.matched[ne]);provide(viewDepthKey,ne+1),provide(matchedRouteKey,Ee),provide(routerViewLocationKey,ce);const j=ref();return watch(()=>[j.value,Ee.value,q.name],([we,he,ye],[xe,Te,Se])=>{he&&(he.instances[ye]=we,Te&&Te!==he&&we&&we===xe&&(he.leaveGuards.size||(he.leaveGuards=Te.leaveGuards),he.updateGuards.size||(he.updateGuards=Te.updateGuards))),we&&he&&(!Te||!isSameRouteRecord(he,Te)||!xe)&&(he.enterCallbacks[ye]||[]).forEach(Ce=>Ce(we))},{flush:"post"}),()=>{const we=ce.value,he=Ee.value,ye=he&&he.components[q.name],xe=q.name;if(!ye)return normalizeSlot(V.default,{Component:ye,route:we});const Te=he.props[q.name],Se=Te?Te===!0?we.params:typeof Te=="function"?Te(we):Te:null,Oe=h$3(ye,assign$1({},Se,Q,{onVnodeUnmounted:ze=>{ze.component.isUnmounted&&(he.instances[xe]=null)},ref:j}));return normalizeSlot(V.default,{Component:Oe,route:we})||Oe}}});function normalizeSlot(q,Q){if(!q)return null;const V=q(Q);return V.length===1?V[0]:V}const RouterView=RouterViewImpl;function createRouter(q){const Q=createRouterMatcher(q.routes,q),V=q.parseQuery||parseQuery,_e=q.stringifyQuery||stringifyQuery,ce=q.history,ne=useCallbacks(),Ee=useCallbacks(),j=useCallbacks(),we=shallowRef(START_LOCATION_NORMALIZED);let he=START_LOCATION_NORMALIZED;isBrowser&&q.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const ye=applyToParams.bind(null,on=>""+on),xe=applyToParams.bind(null,encodeParam),Te=applyToParams.bind(null,decode);function Se(on,an){let Xt,Rt;return isRouteName(on)?(Xt=Q.getRecordMatcher(on),Rt=an):Rt=on,Q.addRoute(Rt,Xt)}function Ce(on){const an=Q.getRecordMatcher(on);an&&Q.removeRoute(an)}function Oe(){return Q.getRoutes().map(on=>on.record)}function ze(on){return!!Q.getRecordMatcher(on)}function Ue(on,an){if(an=assign$1({},an||we.value),typeof on=="string"){const Pn=parseURL(V,on,an.path),Pt=Q.resolve({path:Pn.path},an),zt=ce.createHref(Pn.fullPath);return assign$1(Pn,Pt,{params:Te(Pt.params),hash:decode(Pn.hash),redirectedFrom:void 0,href:zt})}let Xt;if("path"in on)Xt=assign$1({},on,{path:parseURL(V,on.path,an.path).path});else{const Pn=assign$1({},on.params);for(const Pt in Pn)Pn[Pt]==null&&delete Pn[Pt];Xt=assign$1({},on,{params:xe(on.params)}),an.params=xe(an.params)}const Rt=Q.resolve(Xt,an),en=on.hash||"";Rt.params=ye(Te(Rt.params));const hn=stringifyURL(_e,assign$1({},on,{hash:encodeHash(en),path:Rt.path})),vn=ce.createHref(hn);return assign$1({fullPath:hn,hash:en,query:_e===stringifyQuery?normalizeQuery(on.query):on.query||{}},Rt,{redirectedFrom:void 0,href:vn})}function De(on){return typeof on=="string"?parseURL(V,on,we.value.path):assign$1({},on)}function Fe(on,an){if(he!==on)return createRouterError(8,{from:an,to:on})}function Xe(on){return Qe(on)}function Ke(on){return Xe(assign$1(De(on),{replace:!0}))}function He(on){const an=on.matched[on.matched.length-1];if(an&&an.redirect){const{redirect:Xt}=an;let Rt=typeof Xt=="function"?Xt(on):Xt;return typeof Rt=="string"&&(Rt=Rt.includes("?")||Rt.includes("#")?Rt=De(Rt):{path:Rt},Rt.params={}),assign$1({query:on.query,hash:on.hash,params:on.params},Rt)}}function Qe(on,an){const Xt=he=Ue(on),Rt=we.value,en=on.state,hn=on.force,vn=on.replace===!0,Pn=He(Xt);if(Pn)return Qe(assign$1(De(Pn),{state:en,force:hn,replace:vn}),an||Xt);const Pt=Xt;Pt.redirectedFrom=an;let zt;return!hn&&isSameRouteLocation(_e,Rt,Xt)&&(zt=createRouterError(16,{to:Pt,from:Rt}),Vt(Rt,Rt,!0,!1)),(zt?Promise.resolve(zt):Mt(Pt,Rt)).catch(rn=>isNavigationFailure(rn)?isNavigationFailure(rn,2)?rn:ht(rn):ft(rn,Pt,Rt)).then(rn=>{if(rn){if(isNavigationFailure(rn,2))return Qe(assign$1(De(rn.to),{state:en,force:hn,replace:vn}),an||Pt)}else rn=bt(Pt,Rt,!0,vn,en);return wt(Pt,Rt,rn),rn})}function pt(on,an){const Xt=Fe(on,an);return Xt?Promise.reject(Xt):Promise.resolve()}function Mt(on,an){let Xt;const[Rt,en,hn]=extractChangingRecords(on,an);Xt=extractComponentsGuards(Rt.reverse(),"beforeRouteLeave",on,an);for(const Pn of Rt)Pn.leaveGuards.forEach(Pt=>{Xt.push(guardToPromiseFn(Pt,on,an))});const vn=pt.bind(null,on,an);return Xt.push(vn),runGuardQueue(Xt).then(()=>{Xt=[];for(const Pn of ne.list())Xt.push(guardToPromiseFn(Pn,on,an));return Xt.push(vn),runGuardQueue(Xt)}).then(()=>{Xt=extractComponentsGuards(en,"beforeRouteUpdate",on,an);for(const Pn of en)Pn.updateGuards.forEach(Pt=>{Xt.push(guardToPromiseFn(Pt,on,an))});return Xt.push(vn),runGuardQueue(Xt)}).then(()=>{Xt=[];for(const Pn of on.matched)if(Pn.beforeEnter&&!an.matched.includes(Pn))if(Array.isArray(Pn.beforeEnter))for(const Pt of Pn.beforeEnter)Xt.push(guardToPromiseFn(Pt,on,an));else Xt.push(guardToPromiseFn(Pn.beforeEnter,on,an));return Xt.push(vn),runGuardQueue(Xt)}).then(()=>(on.matched.forEach(Pn=>Pn.enterCallbacks={}),Xt=extractComponentsGuards(hn,"beforeRouteEnter",on,an),Xt.push(vn),runGuardQueue(Xt))).then(()=>{Xt=[];for(const Pn of Ee.list())Xt.push(guardToPromiseFn(Pn,on,an));return Xt.push(vn),runGuardQueue(Xt)}).catch(Pn=>isNavigationFailure(Pn,8)?Pn:Promise.reject(Pn))}function wt(on,an,Xt){for(const Rt of j.list())Rt(on,an,Xt)}function bt(on,an,Xt,Rt,en){const hn=Fe(on,an);if(hn)return hn;const vn=an===START_LOCATION_NORMALIZED,Pn=isBrowser?history.state:{};Xt&&(Rt||vn?ce.replace(on.fullPath,assign$1({scroll:vn&&Pn&&Pn.scroll},en)):ce.push(on.fullPath,en)),we.value=on,Vt(on,an,Xt,vn),ht()}let rt;function nt(){rt=ce.listen((on,an,Xt)=>{const Rt=Ue(on),en=He(Rt);if(en){Qe(assign$1(en,{replace:!0}),Rt).catch(noop$1);return}he=Rt;const hn=we.value;isBrowser&&saveScrollPosition(getScrollKey(hn.fullPath,Xt.delta),computeScrollPosition()),Mt(Rt,hn).catch(vn=>isNavigationFailure(vn,12)?vn:isNavigationFailure(vn,2)?(Qe(vn.to,Rt).then(Pn=>{isNavigationFailure(Pn,20)&&!Xt.delta&&Xt.type===NavigationType.pop&&ce.go(-1,!1)}).catch(noop$1),Promise.reject()):(Xt.delta&&ce.go(-Xt.delta,!1),ft(vn,Rt,hn))).then(vn=>{vn=vn||bt(Rt,hn,!1),vn&&(Xt.delta?ce.go(-Xt.delta,!1):Xt.type===NavigationType.pop&&isNavigationFailure(vn,20)&&ce.go(-1,!1)),wt(Rt,hn,vn)}).catch(noop$1)})}let it=useCallbacks(),dt=useCallbacks(),lt;function ft(on,an,Xt){ht(on);const Rt=dt.list();return Rt.length?Rt.forEach(en=>en(on,an,Xt)):console.error(on),Promise.reject(on)}function xt(){return lt&&we.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((on,an)=>{it.add([on,an])})}function ht(on){return lt||(lt=!on,nt(),it.list().forEach(([an,Xt])=>on?Xt(on):an()),it.reset()),on}function Vt(on,an,Xt,Rt){const{scrollBehavior:en}=q;if(!isBrowser||!en)return Promise.resolve();const hn=!Xt&&getSavedScrollPosition(getScrollKey(on.fullPath,0))||(Rt||!Xt)&&history.state&&history.state.scroll||null;return nextTick().then(()=>en(on,an,hn)).then(vn=>vn&&scrollToPosition(vn)).catch(vn=>ft(vn,on,an))}const st=on=>ce.go(on);let Dt;const ln=new Set;return{currentRoute:we,addRoute:Se,removeRoute:Ce,hasRoute:ze,getRoutes:Oe,resolve:Ue,options:q,push:Xe,replace:Ke,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:ne.add,beforeResolve:Ee.add,afterEach:j.add,onError:dt.add,isReady:xt,install(on){const an=this;on.component("RouterLink",RouterLink),on.component("RouterView",RouterView),on.config.globalProperties.$router=an,Object.defineProperty(on.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(we)}),isBrowser&&!Dt&&we.value===START_LOCATION_NORMALIZED&&(Dt=!0,Xe(ce.location).catch(en=>{}));const Xt={};for(const en in START_LOCATION_NORMALIZED)Xt[en]=computed(()=>we.value[en]);on.provide(routerKey,an),on.provide(routeLocationKey,reactive(Xt)),on.provide(routerViewLocationKey,we);const Rt=on.unmount;ln.add(on),on.unmount=function(){ln.delete(on),ln.size<1&&(he=START_LOCATION_NORMALIZED,rt&&rt(),we.value=START_LOCATION_NORMALIZED,Dt=!1,lt=!1),Rt()}}}}function runGuardQueue(q){return q.reduce((Q,V)=>Q.then(()=>V()),Promise.resolve())}function extractChangingRecords(q,Q){const V=[],_e=[],ce=[],ne=Math.max(Q.matched.length,q.matched.length);for(let Ee=0;Ee<ne;Ee++){const j=Q.matched[Ee];j&&(q.matched.find(he=>isSameRouteRecord(he,j))?_e.push(j):V.push(j));const we=q.matched[Ee];we&&(Q.matched.find(he=>isSameRouteRecord(he,we))||ce.push(we))}return[V,_e,ce]}function useRouter(){return inject(routerKey)}function u$4(q,Q,...V){if(q in Q){let ce=Q[q];return typeof ce=="function"?ce(...V):ce}let _e=new Error(`Tried to handle "${q}" but there is no handler defined. Only defined handlers are: ${Object.keys(Q).map(ce=>`"${ce}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(_e,u$4),_e}var m$1=(q=>(q[q.None=0]="None",q[q.RenderStrategy=1]="RenderStrategy",q[q.Static=2]="Static",q))(m$1||{}),h$2=(q=>(q[q.Unmount=0]="Unmount",q[q.Hidden=1]="Hidden",q))(h$2||{});function k(_e){var ce=_e,{visible:q=!0,features:Q=0}=ce,V=Ts(ce,["visible","features"]);var ne;if(q||Q&2&&V.props.static)return a$3(V);if(Q&1){let Ee=(ne=V.props.unmount)==null||ne?0:1;return u$4(Ee,{[0](){return null},[1](){return a$3(Jo(Kr({},V),{props:Jo(Kr({},V.props),{hidden:!0,style:{display:"none"}})}))}})}return a$3(V)}function a$3({props:q,attrs:Q,slots:V,slot:_e,name:ce}){var ne;let he=R$2(q,["unmount","static"]),{as:Ee}=he,j=Ts(he,["as"]),we=(ne=V.default)==null?void 0:ne.call(V,_e);if(Ee==="template"){if(Object.keys(j).length>0||Object.keys(Q).length>0){let[ye,...xe]=we!=null?we:[];if(!b$3(ye)||xe.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${ce} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(j).concat(Object.keys(Q)).map(Te=>`  - ${Te}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(Te=>`  - ${Te}`).join(`
`)].join(`
`));return cloneVNode(ye,j)}return Array.isArray(we)&&we.length===1?we[0]:we}return h$3(Ee,j,we)}function O(q){let Q=Object.assign({},q);for(let V in Q)Q[V]===void 0&&delete Q[V];return Q}function R$2(q,Q=[]){let V=Object.assign({},q);for(let _e of Q)_e in V&&delete V[_e];return V}function b$3(q){return q==null?!1:typeof q.type=="string"||typeof q.type=="object"||typeof q.type=="function"}let e$2=0;function n$1(){return++e$2}function t$1(){return n$1()}var o=(q=>(q.Space=" ",q.Enter="Enter",q.Escape="Escape",q.Backspace="Backspace",q.Delete="Delete",q.ArrowLeft="ArrowLeft",q.ArrowUp="ArrowUp",q.ArrowRight="ArrowRight",q.ArrowDown="ArrowDown",q.Home="Home",q.End="End",q.PageUp="PageUp",q.PageDown="PageDown",q.Tab="Tab",q))(o||{});function f$1(q){throw new Error("Unexpected object: "+q)}var a$2=(q=>(q[q.First=0]="First",q[q.Previous=1]="Previous",q[q.Next=2]="Next",q[q.Last=3]="Last",q[q.Specific=4]="Specific",q[q.Nothing=5]="Nothing",q))(a$2||{});function x$4(q,Q){let V=Q.resolveItems();if(V.length<=0)return null;let _e=Q.resolveActiveIndex(),ce=_e!=null?_e:-1,ne=(()=>{switch(q.focus){case 0:return V.findIndex(Ee=>!Q.resolveDisabled(Ee));case 1:{let Ee=V.slice().reverse().findIndex((j,we,he)=>ce!==-1&&he.length-we-1>=ce?!1:!Q.resolveDisabled(j));return Ee===-1?Ee:V.length-1-Ee}case 2:return V.findIndex((Ee,j)=>j<=ce?!1:!Q.resolveDisabled(Ee));case 3:{let Ee=V.slice().reverse().findIndex(j=>!Q.resolveDisabled(j));return Ee===-1?Ee:V.length-1-Ee}case 4:return V.findIndex(Ee=>Q.resolveId(Ee)===q.id);case 5:return null;default:f$1(q)}})();return ne===-1?_e:ne}function t(q){return q==null||q.value==null?null:"$el"in q.value?q.value.$el:q.value}let n=Symbol("Context");var l$3=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(l$3||{});function f(){return p$4()!==null}function p$4(){return inject(n,null)}function c$2(q){provide(n,q)}function r$3(q,Q){if(q)return q;let V=Q!=null?Q:"button";if(typeof V=="string"&&V.toLowerCase()==="button")return"button"}function b$2(q,Q){let V=ref(r$3(q.value.type,q.value.as));return onMounted(()=>{V.value=r$3(q.value.type,q.value.as)}),watchEffect(()=>{var _e;V.value||!t(Q)||t(Q)instanceof HTMLButtonElement&&!((_e=t(Q))!=null&&_e.hasAttribute("type"))&&(V.value="button")}),V}function e$1(q){if(typeof window=="undefined")return null;if(q instanceof Node)return q.ownerDocument;if(q!=null&&q.hasOwnProperty("value")){let Q=t(q);if(Q)return Q.ownerDocument}return document}function p$3({container:q,accept:Q,walk:V,enabled:_e}){watchEffect(()=>{let ce=q.value;if(!ce||_e!==void 0&&!_e.value)return;let ne=e$1(q);if(!ne)return;let Ee=Object.assign(we=>Q(we),{acceptNode:Q}),j=ne.createTreeWalker(ce,NodeFilter.SHOW_ELEMENT,Ee,!1);for(;j.nextNode();)V(j.currentNode)})}let c$1=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(q=>`${q}:not([tabindex='-1'])`).join(",");var p$2=(q=>(q[q.First=1]="First",q[q.Previous=2]="Previous",q[q.Next=4]="Next",q[q.Last=8]="Last",q[q.WrapAround=16]="WrapAround",q[q.NoScroll=32]="NoScroll",q))(p$2||{}),L$2=(q=>(q[q.Error=0]="Error",q[q.Overflow=1]="Overflow",q[q.Success=2]="Success",q[q.Underflow=3]="Underflow",q))(L$2||{}),N=(q=>(q[q.Previous=-1]="Previous",q[q.Next=1]="Next",q))(N||{});function T$2(q=document.body){return q==null?[]:Array.from(q.querySelectorAll(c$1))}var b$1=(q=>(q[q.Strict=0]="Strict",q[q.Loose=1]="Loose",q))(b$1||{});function S$1(q,Q=0){var V;return q===((V=e$1(q))==null?void 0:V.body)?!1:u$4(Q,{[0](){return q.matches(c$1)},[1](){let _e=q;for(;_e!==null;){if(_e.matches(c$1))return!0;_e=_e.parentElement}return!1}})}function F$2(q){q==null||q.focus({preventScroll:!0})}let M=["textarea","input"].join(",");function h$1(q){var Q,V;return(V=(Q=q==null?void 0:q.matches)==null?void 0:Q.call(q,M))!=null?V:!1}function v$1(q,Q=V=>V){return q.slice().sort((V,_e)=>{let ce=Q(V),ne=Q(_e);if(ce===null||ne===null)return 0;let Ee=ce.compareDocumentPosition(ne);return Ee&Node.DOCUMENT_POSITION_FOLLOWING?-1:Ee&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function H$1(q,Q){var V;let _e=(V=Array.isArray(q)?q.length>0?q[0].ownerDocument:document:q==null?void 0:q.ownerDocument)!=null?V:document,ce=Array.isArray(q)?v$1(q):T$2(q),ne=_e.activeElement,Ee=(()=>{if(Q&5)return 1;if(Q&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),j=(()=>{if(Q&1)return 0;if(Q&2)return Math.max(0,ce.indexOf(ne))-1;if(Q&4)return Math.max(0,ce.indexOf(ne))+1;if(Q&8)return ce.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),we=Q&32?{preventScroll:!0}:{},he=0,ye=ce.length,xe;do{if(he>=ye||he+ye<=0)return 0;let Te=j+he;if(Q&16)Te=(Te+ye)%ye;else{if(Te<0)return 3;if(Te>=ye)return 1}xe=ce[Te],xe==null||xe.focus(we),he+=Ee}while(xe!==_e.activeElement);return xe.hasAttribute("tabindex")||xe.setAttribute("tabindex","0"),Q&6&&h$1(xe)&&xe.select(),2}function w$1(q,Q,V){typeof window!="undefined"&&watchEffect(_e=>{window.addEventListener(q,Q,V),_e(()=>window.removeEventListener(q,Q,V))})}function s$2(q){typeof queueMicrotask=="function"?queueMicrotask(q):Promise.resolve().then(q).catch(Q=>setTimeout(()=>{throw Q}))}var p$1=(q=>(q[q.None=1]="None",q[q.IgnoreScrollbars=2]="IgnoreScrollbars",q))(p$1||{});function g$4(q,Q,V=1){let _e=!1;function ce(ne){if(_e)return;_e=!0,s$2(()=>{_e=!1});let Ee=ne.target;if(!Ee.ownerDocument.documentElement.contains(Ee))return;let j=function we(he){return typeof he=="function"?we(he()):Array.isArray(he)||he instanceof Set?he:[he]}(q);if((V&2)===2){let we=20,he=Ee.ownerDocument.documentElement;if(ne.clientX>he.clientWidth-we||ne.clientX<we||ne.clientY>he.clientHeight-we||ne.clientY<we)return}for(let we of j){if(we===null)continue;let he=we instanceof HTMLElement?we:t(we);if(he!=null&&he.contains(Ee))return}Q(ne,Ee)}w$1("pointerdown",ce),w$1("mousedown",ce)}let l$2=defineComponent({name:"VisuallyHidden",props:{as:{type:[Object,String],default:"div"}},setup(q,{slots:Q,attrs:V}){return()=>k({props:Jo(Kr({},q),{style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",display:"none"}}),slot:{},attrs:V,slots:Q,name:"VisuallyHidden"})}});function p(q){var Q;let V=(Q=q==null?void 0:q.form)!=null?Q:q.closest("form");if(V){for(let _e of V.elements)if(_e.tagName==="INPUT"&&_e.type==="submit"||_e.tagName==="BUTTON"&&_e.type==="submit"||_e.nodeName==="INPUT"&&_e.type==="image"){_e.click();return}}}function r$2(q,Q,V,_e){typeof window!="undefined"&&watchEffect(ce=>{q=q!=null?q:window,q.addEventListener(Q,V,_e),ce(()=>q.removeEventListener(Q,V,_e))})}var g$3=(q=>(q[q.None=1]="None",q[q.InitialFocus=2]="InitialFocus",q[q.TabLock=4]="TabLock",q[q.FocusLock=8]="FocusLock",q[q.RestoreFocus=16]="RestoreFocus",q[q.All=30]="All",q))(g$3||{});function W$2(q,Q=ref(30),V=ref({})){var _e,ce;let ne=ref(null),Ee=ref(null),j={value:!1},we=computed(()=>Boolean(Q.value&16)),he=computed(()=>Boolean(Q.value&2)),ye=computed(()=>e$1(q));return onMounted(()=>{watch(we,(xe,Te)=>{var Se;xe!==Te&&(!we.value||(j.value=!0,ne.value||(ne.value=(Se=ye.value)==null?void 0:Se.activeElement)))},{immediate:!0}),watch(we,(xe,Te,Se)=>{xe!==Te&&(!we.value||Se(()=>{j.value!==!1&&(j.value=!1,F$2(ne.value),ne.value=null)}))},{immediate:!0}),watch([q,V,V.value.initialFocus,he],(xe,Te)=>{var Se,Ce;if(xe.every((De,Fe)=>(Te==null?void 0:Te[Fe])===De)||!he.value)return;let Oe=q.value;if(!Oe)return;let ze=t(V.value.initialFocus),Ue=(Se=ye.value)==null?void 0:Se.activeElement;if(ze){if(ze===Ue){Ee.value=Ue;return}}else if(Oe.contains(Ue)){Ee.value=Ue;return}ze?F$2(ze):H$1(Oe,p$2.First)===L$2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),Ee.value=(Ce=ye.value)==null?void 0:Ce.activeElement},{immediate:!0})}),r$2((_e=ye.value)==null?void 0:_e.defaultView,"keydown",xe=>{var Te;!(Q.value&4)||!q.value||xe.key===o.Tab&&(xe.preventDefault(),H$1(q.value,(xe.shiftKey?p$2.Previous:p$2.Next)|p$2.WrapAround)===L$2.Success&&(Ee.value=(Te=ye.value)==null?void 0:Te.activeElement))}),r$2((ce=ye.value)==null?void 0:ce.defaultView,"focus",xe=>{var Te;if(!(Q.value&8))return;let Se=new Set((Te=V.value.containers)==null?void 0:Te.value);if(Se.add(q),!Se.size)return;let Ce=Ee.value;if(!Ce||!j.value)return;let Oe=xe.target;Oe&&Oe instanceof HTMLElement?x$3(Se,Oe)?(Ee.value=Oe,F$2(Oe)):(xe.preventDefault(),xe.stopPropagation(),F$2(Ce)):F$2(Ee.value)},!0),ne}function x$3(q,Q){var V;for(let _e of q)if((V=_e.value)!=null&&V.contains(Q))return!0;return!1}let l$1="body > *",i$1=new Set,r$1=new Map;function u$3(q){q.setAttribute("aria-hidden","true"),q.inert=!0}function s$1(q){let Q=r$1.get(q);!Q||(Q["aria-hidden"]===null?q.removeAttribute("aria-hidden"):q.setAttribute("aria-hidden",Q["aria-hidden"]),q.inert=Q.inert)}function g$2(q,Q=ref(!0)){watchEffect(V=>{if(!Q.value||!q.value)return;let _e=q.value,ce=e$1(_e);if(ce){i$1.add(_e);for(let ne of r$1.keys())ne.contains(_e)&&(s$1(ne),r$1.delete(ne));ce.querySelectorAll(l$1).forEach(ne=>{if(ne instanceof HTMLElement){for(let Ee of i$1)if(ne.contains(Ee))return;i$1.size===1&&(r$1.set(ne,{"aria-hidden":ne.getAttribute("aria-hidden"),inert:ne.inert}),u$3(ne))}}),V(()=>{if(i$1.delete(_e),i$1.size>0)ce.querySelectorAll(l$1).forEach(ne=>{if(ne instanceof HTMLElement&&!r$1.has(ne)){for(let Ee of i$1)if(ne.contains(Ee))return;r$1.set(ne,{"aria-hidden":ne.getAttribute("aria-hidden"),inert:ne.inert}),u$3(ne)}});else for(let ne of r$1.keys())s$1(ne),r$1.delete(ne)})}})}let e=Symbol("ForcePortalRootContext");function u$2(){return inject(e,!1)}let P$2=defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(q,{slots:Q,attrs:V}){return provide(e,q.force),()=>{let ne=q,{force:_e}=ne,ce=Ts(ne,["force"]);return k({props:ce,slot:{},slots:Q,attrs:V,name:"ForcePortalRoot"})}}});function v(q){let Q=e$1(q);if(!Q)throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${q}`);let V=Q.getElementById("headlessui-portal-root");if(V)return V;let _e=Q.createElement("div");return _e.setAttribute("id","headlessui-portal-root"),Q.body.appendChild(_e)}let R$1=defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(q,{slots:Q,attrs:V}){let _e=ref(null),ce=computed(()=>e$1(_e)),ne=u$2(),Ee=inject(g$1,null),j=ref(ne===!0||Ee==null?v(_e.value):Ee.resolveTarget());return watchEffect(()=>{ne||Ee!=null&&(j.value=Ee.resolveTarget())}),onUnmounted(()=>{var we,he;let ye=(we=ce.value)==null?void 0:we.getElementById("headlessui-portal-root");!ye||j.value===ye&&j.value.children.length<=0&&((he=j.value.parentElement)==null||he.removeChild(j.value))}),()=>{if(j.value===null)return null;let we={ref:_e};return h$3(Teleport,{to:j.value},k({props:Kr(Kr({},q),we),slot:{},attrs:V,slots:Q,name:"Portal"}))}}}),g$1=Symbol("PortalGroupContext"),L$1=defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(q,{attrs:Q,slots:V}){let _e=reactive({resolveTarget(){return q.target}});return provide(g$1,_e),()=>{let Ee=q,{target:ce}=Ee,ne=Ts(Ee,["target"]);return k({props:ne,slot:{},attrs:Q,slots:V,name:"PortalGroup"})}}}),i=Symbol("StackContext");var c=(q=>(q[q.Add=0]="Add",q[q.Remove=1]="Remove",q))(c||{});function a$1(){return inject(i,()=>{})}function s({type:q,element:Q,onUpdate:V}){let _e=a$1();function ce(...ne){V==null||V(...ne),_e(...ne)}onMounted(()=>{ce(0,q,Q),onUnmounted(()=>{ce(1,q,Q)})}),provide(i,ce)}let u$1=Symbol("DescriptionContext");function h(){let q=inject(u$1,null);if(q===null)throw new Error("Missing parent");return q}function P$1({slot:q=ref({}),name:Q="Description",props:V={}}={}){let _e=ref([]);function ce(ne){return _e.value.push(ne),()=>{let Ee=_e.value.indexOf(ne);Ee!==-1&&_e.value.splice(Ee,1)}}return provide(u$1,{register:ce,slot:q,name:Q,props:V}),computed(()=>_e.value.length>0?_e.value.join(" "):void 0)}let S=defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"}},setup(q,{attrs:Q,slots:V}){let _e=h(),ce=`headlessui-description-${t$1()}`;return onMounted(()=>onUnmounted(_e.register(ce))),()=>{let{name:ne="Description",slot:Ee=ref({}),props:j={}}=_e,we=q,he=Jo(Kr({},Object.entries(j).reduce((ye,[xe,Te])=>Object.assign(ye,{[xe]:unref(Te)}),{})),{id:ce});return k({props:Kr(Kr({},we),he),slot:Ee.value,attrs:Q,slots:V,name:ne})}}});var fe$2=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(fe$2||{});let x$2=Symbol("DialogContext");function P(q){let Q=inject(x$2,null);if(Q===null){let V=new Error(`<${q} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,P),V}return Q}let T$1="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Me=defineComponent({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:T$1},initialFocus:{type:Object,default:null}},emits:{close:q=>!0},setup(q,{emit:Q,attrs:V,slots:_e,expose:ce}){var ne;let Ee=ref(0),j=p$4(),we=computed(()=>q.open===T$1&&j!==null?u$4(j.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):q.open),he=ref(new Set),ye=ref(null),xe=computed(()=>e$1(ye));if(ce({el:ye,$el:ye}),!(q.open!==T$1||j!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof we.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${we.value===T$1?void 0:q.open}`);let Te=computed(()=>we.value?0:1),Se=computed(()=>Te.value===0),Ce=computed(()=>Ee.value>1),Oe=inject(x$2,null)!==null,ze=computed(()=>Ce.value?"parent":"leaf"),Ue=W$2(ye,computed(()=>Se.value?u$4(ze.value,{parent:g$3.RestoreFocus,leaf:g$3.All&~g$3.FocusLock}):g$3.None),computed(()=>({initialFocus:ref(q.initialFocus),containers:he})));g$2(ye,computed(()=>Ce.value?Se.value:!1)),s({type:"Dialog",element:ye,onUpdate:(Qe,pt,Mt)=>{if(pt==="Dialog")return u$4(Qe,{[c.Add](){he.value.add(Mt),Ee.value+=1},[c.Remove](){he.value.delete(Mt),Ee.value-=1}})}});let De=P$1({name:"DialogDescription",slot:computed(()=>({open:we.value}))}),Fe=`headlessui-dialog-${t$1()}`,Xe=ref(null),Ke={titleId:Xe,panelRef:ref(null),dialogState:Te,setTitleId(Qe){Xe.value!==Qe&&(Xe.value=Qe)},close(){Q("close",!1)}};provide(x$2,Ke),g$4(()=>{var Qe,pt,Mt;return[...Array.from((pt=(Qe=xe.value)==null?void 0:Qe.querySelectorAll("body > *"))!=null?pt:[]).filter(wt=>!(!(wt instanceof HTMLElement)||wt.contains(Ue.value)||Ke.panelRef.value&&wt.contains(Ke.panelRef.value))),(Mt=Ke.panelRef.value)!=null?Mt:ye.value]},(Qe,pt)=>{Te.value===0&&(Ce.value||(Ke.close(),nextTick(()=>pt==null?void 0:pt.focus())))},p$1.IgnoreScrollbars),r$2((ne=xe.value)==null?void 0:ne.defaultView,"keydown",Qe=>{Qe.key===o.Escape&&Te.value===0&&(Ce.value||(Qe.preventDefault(),Qe.stopPropagation(),Ke.close()))}),watchEffect(Qe=>{var pt;if(Te.value!==0||Oe)return;let Mt=xe.value;if(!Mt)return;let wt=Mt==null?void 0:Mt.documentElement,bt=(pt=Mt.defaultView)!=null?pt:window,rt=wt.style.overflow,nt=wt.style.paddingRight,it=bt.innerWidth-wt.clientWidth;wt.style.overflow="hidden",wt.style.paddingRight=`${it}px`,Qe(()=>{wt.style.overflow=rt,wt.style.paddingRight=nt})}),watchEffect(Qe=>{if(Te.value!==0)return;let pt=t(ye);if(!pt)return;let Mt=new IntersectionObserver(wt=>{for(let bt of wt)bt.boundingClientRect.x===0&&bt.boundingClientRect.y===0&&bt.boundingClientRect.width===0&&bt.boundingClientRect.height===0&&Ke.close()});Mt.observe(pt),Qe(()=>Mt.disconnect())});function He(Qe){Qe.stopPropagation()}return()=>{let Qe=Jo(Kr({},V),{ref:ye,id:Fe,role:"dialog","aria-modal":Te.value===0?!0:void 0,"aria-labelledby":Xe.value,"aria-describedby":De.value,onClick:He}),rt=q,{open:pt,initialFocus:Mt}=rt,wt=Ts(rt,["open","initialFocus"]),bt={open:Te.value===0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>h$3(L$1,{target:ye.value},()=>h$3(P$2,{force:!1},()=>k({props:Kr(Kr({},wt),Qe),slot:bt,attrs:V,slots:_e,visible:Te.value===0,features:m$1.RenderStrategy|m$1.Static,name:"Dialog"})))))}}});defineComponent({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(q,{attrs:Q,slots:V}){let _e=P("DialogOverlay"),ce=`headlessui-dialog-overlay-${t$1()}`;function ne(Ee){Ee.target===Ee.currentTarget&&(Ee.preventDefault(),Ee.stopPropagation(),_e.close())}return()=>k({props:Jo(Kr({},q),{id:ce,"aria-hidden":!0,onClick:ne}),slot:{open:_e.dialogState.value===0},attrs:Q,slots:V,name:"DialogOverlay"})}});defineComponent({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(q,{attrs:Q,slots:V,expose:_e}){let ce=P("DialogBackdrop"),ne=`headlessui-dialog-backdrop-${t$1()}`,Ee=ref(null);return _e({el:Ee,$el:Ee}),onMounted(()=>{if(ce.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let j=q,we={id:ne,ref:Ee,"aria-hidden":!0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>k({props:Kr(Kr(Kr({},Q),j),we),slot:{open:ce.dialogState.value===0},attrs:Q,slots:V,name:"DialogBackdrop"})))}}});let je=defineComponent({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(q,{attrs:Q,slots:V}){let _e=P("DialogPanel"),ce=`headlessui-dialog-panel-${t$1()}`;return()=>{let ne={id:ce,ref:_e.panelRef};return k({props:Kr(Kr({},q),ne),slot:{open:_e.dialogState.value===0},attrs:Q,slots:V,name:"DialogPanel"})}}}),Ae=defineComponent({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(q,{attrs:Q,slots:V}){let _e=P("DialogTitle"),ce=`headlessui-dialog-title-${t$1()}`;return onMounted(()=>{_e.setTitleId(ce),onUnmounted(()=>_e.setTitleId(null))}),()=>k({props:Jo(Kr({},q),{id:ce}),slot:{open:_e.dialogState.value===0},attrs:Q,slots:V,name:"DialogTitle"})}});var w=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(w||{});let x$1=Symbol("DisclosureContext");function C(q){let Q=inject(x$1,null);if(Q===null){let V=new Error(`<${q} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,C),V}return Q}let B=Symbol("DisclosurePanelContext");function H(){return inject(B,null)}let A=defineComponent({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(q,{slots:Q,attrs:V}){let _e=`headlessui-disclosure-button-${t$1()}`,ce=`headlessui-disclosure-panel-${t$1()}`,ne=ref(q.defaultOpen?0:1),Ee=ref(null),j=ref(null),we={buttonId:_e,panelId:ce,disclosureState:ne,panel:Ee,button:j,toggleDisclosure(){ne.value=u$4(ne.value,{[0]:1,[1]:0})},closeDisclosure(){ne.value!==1&&(ne.value=1)},close(he){we.closeDisclosure();let ye=(()=>he?he instanceof HTMLElement?he:he.value instanceof HTMLElement?t(he):t(we.button):t(we.button))();ye==null||ye.focus()}};return provide(x$1,we),c$2(computed(()=>u$4(ne.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let Te=q,{defaultOpen:he}=Te,ye=Ts(Te,["defaultOpen"]),xe={open:ne.value===0,close:we.close};return k({props:ye,slot:xe,slots:Q,attrs:V,name:"Disclosure"})}}}),G=defineComponent({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(q,{attrs:Q,slots:V,expose:_e}){let ce=C("DisclosureButton"),ne=H(),Ee=ne===null?!1:ne===ce.panelId,j=ref(null);_e({el:j,$el:j}),Ee||watchEffect(()=>{ce.button.value=j.value});let we=b$2(computed(()=>({as:q.as,type:Q.type})),j);function he(){var Te;q.disabled||(Ee?(ce.toggleDisclosure(),(Te=t(ce.button))==null||Te.focus()):ce.toggleDisclosure())}function ye(Te){var Se;if(!q.disabled)if(Ee)switch(Te.key){case o.Space:case o.Enter:Te.preventDefault(),Te.stopPropagation(),ce.toggleDisclosure(),(Se=t(ce.button))==null||Se.focus();break}else switch(Te.key){case o.Space:case o.Enter:Te.preventDefault(),Te.stopPropagation(),ce.toggleDisclosure();break}}function xe(Te){switch(Te.key){case o.Space:Te.preventDefault();break}}return()=>{let Te={open:ce.disclosureState.value===0},Se=Ee?{ref:j,type:we.value,onClick:he,onKeydown:ye}:{id:ce.buttonId,ref:j,type:we.value,"aria-expanded":q.disabled?void 0:ce.disclosureState.value===0,"aria-controls":t(ce.panel)?ce.panelId:void 0,disabled:q.disabled?!0:void 0,onClick:he,onKeydown:ye,onKeyup:xe};return k({props:Kr(Kr({},q),Se),slot:Te,attrs:Q,slots:V,name:"DisclosureButton"})}}}),J$1=defineComponent({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(q,{attrs:Q,slots:V,expose:_e}){let ce=C("DisclosurePanel");_e({el:ce.panel,$el:ce.panel}),provide(B,ce.panelId);let ne=p$4(),Ee=computed(()=>ne!==null?ne.value===l$3.Open:ce.disclosureState.value===0);return()=>{let j={open:ce.disclosureState.value===0,close:ce.close},we={id:ce.panelId,ref:ce.panel};return k({props:Kr(Kr({},q),we),slot:j,attrs:Q,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:Ee.value,name:"DisclosurePanel"})}}});var W$1=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(W$1||{}),J=(q=>(q[q.Pointer=0]="Pointer",q[q.Other=1]="Other",q))(J||{});function z(q){requestAnimationFrame(()=>requestAnimationFrame(q))}let E=Symbol("MenuContext");function D(q){let Q=inject(E,null);if(Q===null){let V=new Error(`<${q} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,D),V}return Q}let fe$1=defineComponent({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(q,{slots:Q,attrs:V}){let _e=ref(1),ce=ref(null),ne=ref(null),Ee=ref([]),j=ref(""),we=ref(null),he=ref(1);function ye(Te=Se=>Se){let Se=we.value!==null?Ee.value[we.value]:null,Ce=v$1(Te(Ee.value.slice()),ze=>t(ze.dataRef.domRef)),Oe=Se?Ce.indexOf(Se):null;return Oe===-1&&(Oe=null),{items:Ce,activeItemIndex:Oe}}let xe={menuState:_e,buttonRef:ce,itemsRef:ne,items:Ee,searchQuery:j,activeItemIndex:we,activationTrigger:he,closeMenu:()=>{_e.value=1,we.value=null},openMenu:()=>_e.value=0,goToItem(Te,Se,Ce){let Oe=ye(),ze=x$4(Te===a$2.Specific?{focus:a$2.Specific,id:Se}:{focus:Te},{resolveItems:()=>Oe.items,resolveActiveIndex:()=>Oe.activeItemIndex,resolveId:Ue=>Ue.id,resolveDisabled:Ue=>Ue.dataRef.disabled});j.value="",we.value=ze,he.value=Ce!=null?Ce:1,Ee.value=Oe.items},search(Te){let Se=j.value!==""?0:1;j.value+=Te.toLowerCase();let Ce=(we.value!==null?Ee.value.slice(we.value+Se).concat(Ee.value.slice(0,we.value+Se)):Ee.value).find(ze=>ze.dataRef.textValue.startsWith(j.value)&&!ze.dataRef.disabled),Oe=Ce?Ee.value.indexOf(Ce):-1;Oe===-1||Oe===we.value||(we.value=Oe,he.value=1)},clearSearch(){j.value=""},registerItem(Te,Se){let Ce=ye(Oe=>[...Oe,{id:Te,dataRef:Se}]);Ee.value=Ce.items,we.value=Ce.activeItemIndex,he.value=1},unregisterItem(Te){let Se=ye(Ce=>{let Oe=Ce.findIndex(ze=>ze.id===Te);return Oe!==-1&&Ce.splice(Oe,1),Ce});Ee.value=Se.items,we.value=Se.activeItemIndex,he.value=1}};return g$4([ce,ne],(Te,Se)=>{var Ce;_e.value===0&&(xe.closeMenu(),S$1(Se,b$1.Loose)||(Te.preventDefault(),(Ce=t(ce))==null||Ce.focus()))}),provide(E,xe),c$2(computed(()=>u$4(_e.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let Te={open:_e.value===0};return k({props:q,slot:Te,slots:Q,attrs:V,name:"Menu"})}}}),me=defineComponent({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(q,{attrs:Q,slots:V,expose:_e}){let ce=D("MenuButton"),ne=`headlessui-menu-button-${t$1()}`;_e({el:ce.buttonRef,$el:ce.buttonRef});function Ee(ye){switch(ye.key){case o.Space:case o.Enter:case o.ArrowDown:ye.preventDefault(),ye.stopPropagation(),ce.openMenu(),nextTick(()=>{var xe;(xe=t(ce.itemsRef))==null||xe.focus({preventScroll:!0}),ce.goToItem(a$2.First)});break;case o.ArrowUp:ye.preventDefault(),ye.stopPropagation(),ce.openMenu(),nextTick(()=>{var xe;(xe=t(ce.itemsRef))==null||xe.focus({preventScroll:!0}),ce.goToItem(a$2.Last)});break}}function j(ye){switch(ye.key){case o.Space:ye.preventDefault();break}}function we(ye){q.disabled||(ce.menuState.value===0?(ce.closeMenu(),nextTick(()=>{var xe;return(xe=t(ce.buttonRef))==null?void 0:xe.focus({preventScroll:!0})})):(ye.preventDefault(),ye.stopPropagation(),ce.openMenu(),z(()=>{var xe;return(xe=t(ce.itemsRef))==null?void 0:xe.focus({preventScroll:!0})})))}let he=b$2(computed(()=>({as:q.as,type:Q.type})),ce.buttonRef);return()=>{var ye;let xe={open:ce.menuState.value===0},Te={ref:ce.buttonRef,id:ne,type:he.value,"aria-haspopup":!0,"aria-controls":(ye=t(ce.itemsRef))==null?void 0:ye.id,"aria-expanded":q.disabled?void 0:ce.menuState.value===0,onKeydown:Ee,onKeyup:j,onClick:we};return k({props:Kr(Kr({},q),Te),slot:xe,attrs:Q,slots:V,name:"MenuButton"})}}}),pe=defineComponent({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(q,{attrs:Q,slots:V,expose:_e}){let ce=D("MenuItems"),ne=`headlessui-menu-items-${t$1()}`,Ee=ref(null);_e({el:ce.itemsRef,$el:ce.itemsRef}),p$3({container:computed(()=>t(ce.itemsRef)),enabled:computed(()=>ce.menuState.value===0),accept(xe){return xe.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:xe.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(xe){xe.setAttribute("role","none")}});function j(xe){var Te;switch(Ee.value&&clearTimeout(Ee.value),xe.key){case o.Space:if(ce.searchQuery.value!=="")return xe.preventDefault(),xe.stopPropagation(),ce.search(xe.key);case o.Enter:if(xe.preventDefault(),xe.stopPropagation(),ce.activeItemIndex.value!==null){let Se=ce.items.value[ce.activeItemIndex.value];(Te=t(Se.dataRef.domRef))==null||Te.click()}ce.closeMenu(),nextTick(()=>{var Se;return(Se=t(ce.buttonRef))==null?void 0:Se.focus({preventScroll:!0})});break;case o.ArrowDown:return xe.preventDefault(),xe.stopPropagation(),ce.goToItem(a$2.Next);case o.ArrowUp:return xe.preventDefault(),xe.stopPropagation(),ce.goToItem(a$2.Previous);case o.Home:case o.PageUp:return xe.preventDefault(),xe.stopPropagation(),ce.goToItem(a$2.First);case o.End:case o.PageDown:return xe.preventDefault(),xe.stopPropagation(),ce.goToItem(a$2.Last);case o.Escape:xe.preventDefault(),xe.stopPropagation(),ce.closeMenu(),nextTick(()=>{var Se;return(Se=t(ce.buttonRef))==null?void 0:Se.focus({preventScroll:!0})});break;case o.Tab:xe.preventDefault(),xe.stopPropagation();break;default:xe.key.length===1&&(ce.search(xe.key),Ee.value=setTimeout(()=>ce.clearSearch(),350));break}}function we(xe){switch(xe.key){case o.Space:xe.preventDefault();break}}let he=p$4(),ye=computed(()=>he!==null?he.value===l$3.Open:ce.menuState.value===0);return()=>{var xe,Te;let Se={open:ce.menuState.value===0},Ce={"aria-activedescendant":ce.activeItemIndex.value===null||(xe=ce.items.value[ce.activeItemIndex.value])==null?void 0:xe.id,"aria-labelledby":(Te=t(ce.buttonRef))==null?void 0:Te.id,id:ne,onKeydown:j,onKeyup:we,role:"menu",tabIndex:0,ref:ce.itemsRef};return k({props:Kr(Kr({},q),Ce),slot:Se,attrs:Q,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:ye.value,name:"MenuItems"})}}}),ve=defineComponent({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(q,{slots:Q,attrs:V,expose:_e}){let ce=D("MenuItem"),ne=`headlessui-menu-item-${t$1()}`,Ee=ref(null);_e({el:Ee,$el:Ee});let j=computed(()=>ce.activeItemIndex.value!==null?ce.items.value[ce.activeItemIndex.value].id===ne:!1),we=computed(()=>({disabled:q.disabled,textValue:"",domRef:Ee}));onMounted(()=>{var Se,Ce;let Oe=(Ce=(Se=t(Ee))==null?void 0:Se.textContent)==null?void 0:Ce.toLowerCase().trim();Oe!==void 0&&(we.value.textValue=Oe)}),onMounted(()=>ce.registerItem(ne,we)),onUnmounted(()=>ce.unregisterItem(ne)),watchEffect(()=>{ce.menuState.value===0&&(!j.value||ce.activationTrigger.value!==0&&nextTick(()=>{var Se,Ce;return(Ce=(Se=t(Ee))==null?void 0:Se.scrollIntoView)==null?void 0:Ce.call(Se,{block:"nearest"})}))});function he(Se){if(q.disabled)return Se.preventDefault();ce.closeMenu(),nextTick(()=>{var Ce;return(Ce=t(ce.buttonRef))==null?void 0:Ce.focus({preventScroll:!0})})}function ye(){if(q.disabled)return ce.goToItem(a$2.Nothing);ce.goToItem(a$2.Specific,ne)}function xe(){q.disabled||j.value||ce.goToItem(a$2.Specific,ne,0)}function Te(){q.disabled||!j.value||ce.goToItem(a$2.Nothing)}return()=>{let{disabled:Se}=q,Ce={active:j.value,disabled:Se};return k({props:Jo(Kr({},q),{id:ne,ref:Ee,role:"menuitem",tabIndex:Se===!0?void 0:-1,"aria-disabled":Se===!0?!0:void 0,onClick:he,onFocus:ye,onPointermove:xe,onMousemove:xe,onPointerleave:Te,onMouseleave:Te}),slot:Ce,attrs:V,slots:Q,name:"MenuItem"})}}}),u=Symbol("LabelContext");function a(){let q=inject(u,null);if(q===null){let Q=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(Q,a),Q}return q}function K$1({slot:q={},name:Q="Label",props:V={}}={}){let _e=ref([]);function ce(ne){return _e.value.push(ne),()=>{let Ee=_e.value.indexOf(ne);Ee!==-1&&_e.value.splice(Ee,1)}}return provide(u,{register:ce,slot:q,name:Q,props:V}),computed(()=>_e.value.length>0?_e.value.join(" "):void 0)}let T=defineComponent({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1}},setup(q,{slots:Q,attrs:V}){let _e=a(),ce=`headlessui-label-${t$1()}`;return onMounted(()=>onUnmounted(_e.register(ce))),()=>{let{name:ne="Label",slot:Ee={},props:j={}}=_e,Te=q,{passive:we}=Te,he=Ts(Te,["passive"]),ye=Jo(Kr({},Object.entries(j).reduce((Se,[Ce,Oe])=>Object.assign(Se,{[Ce]:unref(Oe)}),{})),{id:ce}),xe=Kr(Kr({},he),ye);return we&&delete xe.onClick,k({props:xe,slot:Ee,attrs:V,slots:Q,name:ne})}}}),b=Symbol("GroupContext"),W=defineComponent({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(q,{slots:Q,attrs:V}){let _e=ref(null),ce=K$1({name:"SwitchLabel",props:{onClick(){!_e.value||(_e.value.click(),_e.value.focus({preventScroll:!0}))}}}),ne=P$1({name:"SwitchDescription"});return provide(b,{switchRef:_e,labelledby:ce,describedby:ne}),()=>k({props:q,slot:{},slots:Q,attrs:V,name:"SwitchGroup"})}}),X=defineComponent({name:"Switch",emits:{"update:modelValue":q=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:!1},name:{type:String,optional:!0},value:{type:String,optional:!0}},inheritAttrs:!1,setup(q,{emit:Q,attrs:V,slots:_e,expose:ce}){let ne=inject(b,null),Ee=`headlessui-switch-${t$1()}`;function j(){Q("update:modelValue",!q.modelValue)}let we=ref(null),he=ne===null?we:ne.switchRef,ye=b$2(computed(()=>({as:q.as,type:V.type})),he);ce({el:he,$el:he});function xe(Ce){Ce.preventDefault(),j()}function Te(Ce){Ce.key===o.Space?(Ce.preventDefault(),j()):Ce.key===o.Enter&&p(Ce.currentTarget)}function Se(Ce){Ce.preventDefault()}return()=>{let Xe=q,{name:Ce,value:Oe,modelValue:ze}=Xe,Ue=Ts(Xe,["name","value","modelValue"]),De={checked:ze},Fe={id:Ee,ref:he,role:"switch",type:ye.value,tabIndex:0,"aria-checked":ze,"aria-labelledby":ne==null?void 0:ne.labelledby.value,"aria-describedby":ne==null?void 0:ne.describedby.value,onClick:xe,onKeyup:Te,onKeypress:Se};return h$3(Fragment,[Ce!=null&&ze!=null?h$3(l$2,O({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:ze,name:Ce,value:Oe})):null,k({props:Kr(Kr(Kr({},V),Ue),Fe),slot:De,attrs:V,slots:_e,name:"Switch"})])}}}),Y=T,Z=S;function l(q){let Q={called:!1};return(...V)=>{if(!Q.called)return Q.called=!0,q(...V)}}function r(){let q=[],Q=[],V={enqueue(_e){Q.push(_e)},requestAnimationFrame(..._e){let ce=requestAnimationFrame(..._e);V.add(()=>cancelAnimationFrame(ce))},nextFrame(..._e){V.requestAnimationFrame(()=>{V.requestAnimationFrame(..._e)})},setTimeout(..._e){let ce=setTimeout(..._e);V.add(()=>clearTimeout(ce))},add(_e){q.push(_e)},dispose(){for(let _e of q.splice(0))_e()},async workQueue(){for(let _e of Q.splice(0))await _e()}};return V}function m(q,...Q){q&&Q.length>0&&q.classList.add(...Q)}function d$1(q,...Q){q&&Q.length>0&&q.classList.remove(...Q)}var g=(q=>(q.Finished="finished",q.Cancelled="cancelled",q))(g||{});function F$1(q,Q){let V=r();if(!q)return V.dispose;let{transitionDuration:_e,transitionDelay:ce}=getComputedStyle(q),[ne,Ee]=[_e,ce].map(j=>{let[we=0]=j.split(",").filter(Boolean).map(he=>he.includes("ms")?parseFloat(he):parseFloat(he)*1e3).sort((he,ye)=>ye-he);return we});return ne!==0?V.setTimeout(()=>Q("finished"),ne+Ee):Q("finished"),V.add(()=>Q("cancelled")),V.dispose}function L(q,Q,V,_e,ce,ne){let Ee=r(),j=ne!==void 0?l(ne):()=>{};return d$1(q,...ce),m(q,...Q,...V),Ee.nextFrame(()=>{d$1(q,...V),m(q,..._e),Ee.add(F$1(q,we=>(d$1(q,..._e,...Q),m(q,...ce),j(we))))}),Ee.add(()=>d$1(q,...Q,...V,..._e,...ce)),Ee.add(()=>j("cancelled")),Ee.dispose}function d(q=""){return q.split(" ").filter(Q=>Q.trim().length>1)}let F=Symbol("TransitionContext");var ae=(q=>(q.Visible="visible",q.Hidden="hidden",q))(ae||{});function le(){return inject(F,null)!==null}function ie(){let q=inject(F,null);if(q===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return q}function se(){let q=inject(R,null);if(q===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return q}let R=Symbol("NestingContext");function x(q){return"children"in q?x(q.children):q.value.filter(({state:Q})=>Q==="visible").length>0}function K(q){let Q=ref([]),V=ref(!1);onMounted(()=>V.value=!0),onUnmounted(()=>V.value=!1);function _e(ne,Ee=h$2.Hidden){let j=Q.value.findIndex(({id:we})=>we===ne);j!==-1&&(u$4(Ee,{[h$2.Unmount](){Q.value.splice(j,1)},[h$2.Hidden](){Q.value[j].state="hidden"}}),!x(Q)&&V.value&&(q==null||q()))}function ce(ne){let Ee=Q.value.find(({id:j})=>j===ne);return Ee?Ee.state!=="visible"&&(Ee.state="visible"):Q.value.push({id:ne,state:"visible"}),()=>_e(ne,h$2.Unmount)}return{children:Q,register:ce,unregister:_e}}let _=m$1.RenderStrategy,oe=defineComponent({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(q,{emit:Q,attrs:V,slots:_e,expose:ce}){if(!le()&&f())return()=>h$3(fe,Jo(Kr({},q),{onBeforeEnter:()=>Q("beforeEnter"),onAfterEnter:()=>Q("afterEnter"),onBeforeLeave:()=>Q("beforeLeave"),onAfterLeave:()=>Q("afterLeave")}),_e);let ne=ref(null),Ee=ref("visible"),j=computed(()=>q.unmount?h$2.Unmount:h$2.Hidden);ce({el:ne,$el:ne});let{show:we,appear:he}=ie(),{register:ye,unregister:xe}=se(),Te={value:!0},Se=t$1(),Ce={value:!1},Oe=K(()=>{Ce.value||(Ee.value="hidden",xe(Se),Q("afterLeave"))});onMounted(()=>{let pt=ye(Se);onUnmounted(pt)}),watchEffect(()=>{if(j.value===h$2.Hidden&&!!Se){if(we&&Ee.value!=="visible"){Ee.value="visible";return}u$4(Ee.value,{hidden:()=>xe(Se),visible:()=>ye(Se)})}});let ze=d(q.enter),Ue=d(q.enterFrom),De=d(q.enterTo),Fe=d(q.entered),Xe=d(q.leave),Ke=d(q.leaveFrom),He=d(q.leaveTo);onMounted(()=>{watchEffect(()=>{if(Ee.value==="visible"){let pt=t(ne);if(pt instanceof Comment&&pt.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Qe(pt){let Mt=Te.value&&!he.value,wt=t(ne);!wt||!(wt instanceof HTMLElement)||Mt||(Ce.value=!0,we.value&&Q("beforeEnter"),we.value||Q("beforeLeave"),pt(we.value?L(wt,ze,Ue,De,Fe,bt=>{Ce.value=!1,bt===g.Finished&&Q("afterEnter")}):L(wt,Xe,Ke,He,Fe,bt=>{Ce.value=!1,bt===g.Finished&&(x(Oe)||(Ee.value="hidden",xe(Se),Q("afterLeave")))})))}return onMounted(()=>{watch([we,he],(pt,Mt,wt)=>{Qe(wt),Te.value=!1},{immediate:!0})}),provide(R,Oe),c$2(computed(()=>u$4(Ee.value,{visible:l$3.Open,hidden:l$3.Closed}))),()=>{let xt=q,{appear:pt,show:Mt,enter:wt,enterFrom:bt,enterTo:rt,entered:nt,leave:it,leaveFrom:dt,leaveTo:lt}=xt,ft=Ts(xt,["appear","show","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]);return k({props:Jo(Kr({},ft),{ref:ne}),slot:{},slots:_e,attrs:V,features:_,visible:Ee.value==="visible",name:"TransitionChild"})}}}),ue=oe,fe=defineComponent({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(q,{emit:Q,attrs:V,slots:_e}){let ce=p$4(),ne=computed(()=>q.show===null&&ce!==null?u$4(ce.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):q.show);watchEffect(()=>{if(![!0,!1].includes(ne.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let Ee=ref(ne.value?"visible":"hidden"),j=K(()=>{Ee.value="hidden"}),we={value:!0},he={show:ne,appear:computed(()=>q.appear||!we.value)};return onMounted(()=>{watchEffect(()=>{we.value=!1,ne.value?Ee.value="visible":x(j)||(Ee.value="hidden")})}),provide(R,j),provide(F,he),()=>{let ye=R$2(q,["show","appear","unmount"]),xe={unmount:q.unmount};return k({props:Jo(Kr({},xe),{as:"template"}),slot:{},slots:Jo(Kr({},_e),{default:()=>[h$3(ue,Kr(Kr(Kr({onBeforeEnter:()=>Q("beforeEnter"),onAfterEnter:()=>Q("afterEnter"),onBeforeLeave:()=>Q("beforeLeave"),onAfterLeave:()=>Q("afterLeave")},V),xe),ye),_e.default)]}),attrs:{},features:_,visible:Ee.value==="visible",name:"Transition"})}}});function render$g(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$f(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])}function render$e(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])}function render$d(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$c(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$b(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])}function render$a(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])}function render$9(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})])}function render$8(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])}function render$7(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])}function render$6(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})])}function render$5(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})])}function render$4(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])}function render$3(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$2(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$1(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}var isVue2=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=q=>activePinia=q,piniaSymbol=Symbol();function isPlainObject$1(q){return q&&typeof q=="object"&&Object.prototype.toString.call(q)==="[object Object]"&&typeof q.toJSON!="function"}var MutationType;(function(q){q.direct="direct",q.patchObject="patch object",q.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const q=effectScope(!0),Q=q.run(()=>ref({}));let V=[],_e=[];const ce=markRaw({install(ne){setActivePinia(ce),ce._a=ne,ne.provide(piniaSymbol,ce),ne.config.globalProperties.$pinia=ce,_e.forEach(Ee=>V.push(Ee)),_e=[]},use(ne){return!this._a&&!isVue2?_e.push(ne):V.push(ne),this},_p:V,_a:null,_e:q,_s:new Map,state:Q});return ce}const noop=()=>{};function addSubscription(q,Q,V,_e=noop){q.push(Q);const ce=()=>{const ne=q.indexOf(Q);ne>-1&&(q.splice(ne,1),_e())};return!V&&getCurrentInstance()&&onUnmounted(ce),ce}function triggerSubscriptions(q,...Q){q.slice().forEach(V=>{V(...Q)})}function mergeReactiveObjects(q,Q){for(const V in Q){if(!Q.hasOwnProperty(V))continue;const _e=Q[V],ce=q[V];isPlainObject$1(ce)&&isPlainObject$1(_e)&&q.hasOwnProperty(V)&&!isRef(_e)&&!isReactive(_e)?q[V]=mergeReactiveObjects(ce,_e):q[V]=_e}return q}const skipHydrateSymbol=Symbol();function shouldHydrate(q){return!isPlainObject$1(q)||!q.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(q){return!!(isRef(q)&&q.effect)}function createOptionsStore(q,Q,V,_e){const{state:ce,actions:ne,getters:Ee}=Q,j=V.state.value[q];let we;function he(){j||(V.state.value[q]=ce?ce():{});const ye=toRefs(V.state.value[q]);return assign(ye,ne,Object.keys(Ee||{}).reduce((xe,Te)=>(xe[Te]=markRaw(computed(()=>{setActivePinia(V);const Se=V._s.get(q);return Ee[Te].call(Se,Se)})),xe),{}))}return we=createSetupStore(q,he,Q,V),we.$reset=function(){const xe=ce?ce():{};this.$patch(Te=>{assign(Te,xe)})},we}function createSetupStore(q,Q,V={},_e,ce){let ne;const Ee=V.state,j=assign({actions:{}},V),we={deep:!0};let he,ye,xe=markRaw([]),Te=markRaw([]),Se;const Ce=_e.state.value[q];!Ee&&!Ce&&(_e.state.value[q]={}),ref({});function Oe(He){let Qe;he=ye=!1,typeof He=="function"?(He(_e.state.value[q]),Qe={type:MutationType.patchFunction,storeId:q,events:Se}):(mergeReactiveObjects(_e.state.value[q],He),Qe={type:MutationType.patchObject,payload:He,storeId:q,events:Se}),nextTick().then(()=>{he=!0}),ye=!0,triggerSubscriptions(xe,Qe,_e.state.value[q])}const ze=noop;function Ue(){ne.stop(),xe=[],Te=[],_e._s.delete(q)}function De(He,Qe){return function(){setActivePinia(_e);const pt=Array.from(arguments),Mt=[],wt=[];function bt(it){Mt.push(it)}function rt(it){wt.push(it)}triggerSubscriptions(Te,{args:pt,name:He,store:Xe,after:bt,onError:rt});let nt;try{nt=Qe.apply(this&&this.$id===q?this:Xe,pt)}catch(it){throw triggerSubscriptions(wt,it),it}return nt instanceof Promise?nt.then(it=>(triggerSubscriptions(Mt,it),it)).catch(it=>(triggerSubscriptions(wt,it),Promise.reject(it))):(triggerSubscriptions(Mt,nt),nt)}}const Fe={_p:_e,$id:q,$onAction:addSubscription.bind(null,Te),$patch:Oe,$reset:ze,$subscribe(He,Qe={}){const pt=addSubscription(xe,He,Qe.detached,()=>Mt()),Mt=ne.run(()=>watch(()=>_e.state.value[q],wt=>{(Qe.flush==="sync"?ye:he)&&He({storeId:q,type:MutationType.direct,events:Se},wt)},assign({},we,Qe)));return pt},$dispose:Ue},Xe=reactive(assign({},Fe));_e._s.set(q,Xe);const Ke=_e._e.run(()=>(ne=effectScope(),ne.run(()=>Q())));for(const He in Ke){const Qe=Ke[He];if(isRef(Qe)&&!isComputed(Qe)||isReactive(Qe))Ee||(Ce&&shouldHydrate(Qe)&&(isRef(Qe)?Qe.value=Ce[He]:mergeReactiveObjects(Qe,Ce[He])),_e.state.value[q][He]=Qe);else if(typeof Qe=="function"){const pt=De(He,Qe);Ke[He]=pt,j.actions[He]=Qe}}return assign(Xe,Ke),assign(toRaw(Xe),Ke),Object.defineProperty(Xe,"$state",{get:()=>_e.state.value[q],set:He=>{Oe(Qe=>{assign(Qe,He)})}}),_e._p.forEach(He=>{assign(Xe,ne.run(()=>He({store:Xe,app:_e._a,pinia:_e,options:j})))}),Ce&&Ee&&V.hydrate&&V.hydrate(Xe.$state,Ce),he=!0,ye=!0,Xe}function defineStore(q,Q,V){let _e,ce;const ne=typeof Q=="function";typeof q=="string"?(_e=q,ce=ne?V:Q):(ce=q,_e=q.id);function Ee(j,we){const he=getCurrentInstance();return j=j||he&&inject(piniaSymbol),j&&setActivePinia(j),j=activePinia,j._s.has(_e)||(ne?createSetupStore(_e,Q,ce,j):createOptionsStore(_e,ce,j)),j._s.get(_e)}return Ee.$id=_e,Ee}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}var mapboxGl={exports:{}};(function(q,Q){(function(V,_e){q.exports=_e()})(commonjsGlobal,function(){var V,_e,ce;function ne(j,we){if(!V)V=we;else if(!_e)_e=we;else{var he="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+V+")(sharedChunk); ("+_e+")(sharedChunk); self.onerror = null;",ye={};V(ye),ce=we(ye),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(ce.workerUrl=window.URL.createObjectURL(new Blob([he],{type:"text/javascript"})))}}ne(["exports"],function(j){var we=typeof self!="undefined"?self:{},he=ye;function ye($,y,I,ee){this.cx=3*$,this.bx=3*(I-$)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*y,this.by=3*(ee-y)-this.cy,this.ay=1-this.cy-this.by,this.p1x=$,this.p1y=ee,this.p2x=I,this.p2y=ee}ye.prototype.sampleCurveX=function($){return((this.ax*$+this.bx)*$+this.cx)*$},ye.prototype.sampleCurveY=function($){return((this.ay*$+this.by)*$+this.cy)*$},ye.prototype.sampleCurveDerivativeX=function($){return(3*this.ax*$+2*this.bx)*$+this.cx},ye.prototype.solveCurveX=function($,y){var I,ee,re,ge,ke;for(y===void 0&&(y=1e-6),re=$,ke=0;ke<8;ke++){if(ge=this.sampleCurveX(re)-$,Math.abs(ge)<y)return re;var Ie=this.sampleCurveDerivativeX(re);if(Math.abs(Ie)<1e-6)break;re-=ge/Ie}if((re=$)<(I=0))return I;if(re>(ee=1))return ee;for(;I<ee;){if(ge=this.sampleCurveX(re),Math.abs(ge-$)<y)return re;$>ge?I=re:ee=re,re=.5*(ee-I)+I}return re},ye.prototype.solve=function($,y){return this.sampleCurveY(this.solveCurveX($,y))};var xe=Te;function Te($,y){this.x=$,this.y=y}Te.prototype={clone:function(){return new Te(this.x,this.y)},add:function($){return this.clone()._add($)},sub:function($){return this.clone()._sub($)},multByPoint:function($){return this.clone()._multByPoint($)},divByPoint:function($){return this.clone()._divByPoint($)},mult:function($){return this.clone()._mult($)},div:function($){return this.clone()._div($)},rotate:function($){return this.clone()._rotate($)},rotateAround:function($,y){return this.clone()._rotateAround($,y)},matMult:function($){return this.clone()._matMult($)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function($){return this.x===$.x&&this.y===$.y},dist:function($){return Math.sqrt(this.distSqr($))},distSqr:function($){var y=$.x-this.x,I=$.y-this.y;return y*y+I*I},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function($){return Math.atan2(this.y-$.y,this.x-$.x)},angleWith:function($){return this.angleWithSep($.x,$.y)},angleWithSep:function($,y){return Math.atan2(this.x*y-this.y*$,this.x*$+this.y*y)},_matMult:function($){var y=$[2]*this.x+$[3]*this.y;return this.x=$[0]*this.x+$[1]*this.y,this.y=y,this},_add:function($){return this.x+=$.x,this.y+=$.y,this},_sub:function($){return this.x-=$.x,this.y-=$.y,this},_mult:function($){return this.x*=$,this.y*=$,this},_div:function($){return this.x/=$,this.y/=$,this},_multByPoint:function($){return this.x*=$.x,this.y*=$.y,this},_divByPoint:function($){return this.x/=$.x,this.y/=$.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var $=this.y;return this.y=this.x,this.x=-$,this},_rotate:function($){var y=Math.cos($),I=Math.sin($),ee=I*this.x+y*this.y;return this.x=y*this.x-I*this.y,this.y=ee,this},_rotateAround:function($,y){var I=Math.cos($),ee=Math.sin($),re=y.y+ee*(this.x-y.x)+I*(this.y-y.y);return this.x=y.x+I*(this.x-y.x)-ee*(this.y-y.y),this.y=re,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Te.convert=function($){return $ instanceof Te?$:Array.isArray($)?new Te($[0],$[1]):$};const Se=Math.PI/180,Ce=180/Math.PI;function Oe($){return $*Se}function ze($){return $*Ce}const Ue=[[0,0],[1,0],[1,1],[0,1]];function De($){if($<=0)return 0;if($>=1)return 1;const y=$*$,I=y*$;return 4*($<.5?I:3*($-y)+I-.75)}function Fe($,y,I,ee){const re=new he($,y,I,ee);return function(ge){return re.solve(ge)}}const Xe=Fe(.25,.1,.25,1);function Ke($,y,I){return Math.min(I,Math.max(y,$))}function He($,y,I){return(I=Ke((I-$)/(y-$),0,1))*I*(3-2*I)}function Qe($,y,I){const ee=I-y,re=(($-y)%ee+ee)%ee+y;return re===y?I:re}function pt($,y,I){if(!$.length)return I(null,[]);let ee=$.length;const re=new Array($.length);let ge=null;$.forEach((ke,Ie)=>{y(ke,($e,Le)=>{$e&&(ge=$e),re[Ie]=Le,--ee==0&&I(ge,re)})})}function Mt($){const y=[];for(const I in $)y.push($[I]);return y}function wt($,...y){for(const I of y)for(const ee in I)$[ee]=I[ee];return $}let bt=1;function rt(){return bt++}function nt(){return function $(y){return y?(y^Math.random()*(16>>y/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,$)}()}function it($){return $<=1?1:Math.pow(2,Math.ceil(Math.log($)/Math.LN2))}function dt($){return!!$&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)}function lt($,y){$.forEach(I=>{y[I]&&(y[I]=y[I].bind(y))})}function ft($,y){return $.indexOf(y,$.length-y.length)!==-1}function xt($,y,I){const ee={};for(const re in $)ee[re]=y.call(I||this,$[re],re,$);return ee}function ht($,y,I){const ee={};for(const re in $)y.call(I||this,$[re],re,$)&&(ee[re]=$[re]);return ee}function Vt($){return Array.isArray($)?$.map(Vt):typeof $=="object"&&$?xt($,Vt):$}const st={};function Dt($){st[$]||(typeof console!="undefined"&&console.warn($),st[$]=!0)}function ln($,y,I){return(I.y-$.y)*(y.x-$.x)>(y.y-$.y)*(I.x-$.x)}function In($){let y=0;for(let I,ee,re=0,ge=$.length,ke=ge-1;re<ge;ke=re++)I=$[re],ee=$[ke],y+=(ee.x-I.x)*(I.y+ee.y);return y}function on(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function an($){const y={};if($.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(I,ee,re,ge)=>{const ke=re||ge;return y[ee]=!ke||ke.toLowerCase(),""}),y["max-age"]){const I=parseInt(y["max-age"],10);isNaN(I)?delete y["max-age"]:y["max-age"]=I}return y}let Xt=null;function Rt($){if(Xt==null){const y=$.navigator?$.navigator.userAgent:null;Xt=!!$.safari||!(!y||!(/\b(iPad|iPhone|iPod)\b/.test(y)||y.match("Safari")&&!y.match("Chrome")))}return Xt}function en($){try{const y=we[$];return y.setItem("_mapbox_test_",1),y.removeItem("_mapbox_test_"),!0}catch{return!1}}function hn($,y){return[$[4*y],$[4*y+1],$[4*y+2],$[4*y+3]]}const vn=we.performance;function Pn($){const y=$?$.url.toString():void 0;return vn.getEntriesByName(y)}var Pt="2.10.0";let zt,rn,bn,Tn;const $n={now:()=>bn!==void 0?bn:we.performance.now(),setNow($){bn=$},restoreNow(){bn=void 0},frame($){const y=we.requestAnimationFrame($);return{cancel:()=>we.cancelAnimationFrame(y)}},getImageData($,y=0){const{width:I,height:ee}=$;Tn||(Tn=we.document.createElement("canvas"));const re=Tn.getContext("2d");if(!re)throw new Error("failed to create canvas 2d context");return(I>Tn.width||ee>Tn.height)&&(Tn.width=I,Tn.height=ee),re.clearRect(-y,-y,I+2*y,ee+2*y),re.drawImage($,0,0,I,ee),re.getImageData(-y,-y,I+2*y,ee+2*y)},resolveURL:$=>(zt||(zt=we.document.createElement("a")),zt.href=$,zt.href),get devicePixelRatio(){return we.devicePixelRatio},get prefersReducedMotion(){return!!we.matchMedia&&(rn==null&&(rn=we.matchMedia("(prefers-reduced-motion: reduce)")),rn.matches)}};let Dn;const xn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Dn==null){const $=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Dn={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):$}catch{Dn=$}}return Dn},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},En={supported:!1,testSupport:function($){!nr&&Qn&&(fr?Kn($):Cn=$)}};let Cn,Qn,nr=!1,fr=!1;function Kn($){const y=$.createTexture();$.bindTexture($.TEXTURE_2D,y);try{if($.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,Qn),$.isContextLost())return;En.supported=!0}catch{}$.deleteTexture(y),nr=!0}we.document&&(Qn=we.document.createElement("img"),Qn.onload=function(){Cn&&Kn(Cn),Cn=null,fr=!0},Qn.onerror=function(){nr=!0,Cn=null},Qn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const qn="01",un="NO_ACCESS_TOKEN";function yn($){return $.indexOf("mapbox:")===0}function Rn($){return xn.API_URL_REGEX.test($)}const Yn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function mr($){const y=$.match(Yn);if(!y)throw new Error("Unable to parse URL object");return{protocol:y[1],authority:y[2],path:y[3]||"/",params:y[4]?y[4].split("&"):[]}}function Sr($){const y=$.params.length?`?${$.params.join("&")}`:"";return`${$.protocol}://${$.authority}${$.path}${y}`}function Lr($){if(!$)return null;const y=$.split(".");if(!y||y.length!==3)return null;try{return JSON.parse(decodeURIComponent(we.atob(y[1]).split("").map(I=>"%"+("00"+I.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class br{constructor(y){this.type=y,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(y){const I=Lr(xn.ACCESS_TOKEN);let ee="";return ee=I&&I.u?we.btoa(encodeURIComponent(I.u).replace(/%([0-9A-F]{2})/g,(re,ge)=>String.fromCharCode(Number("0x"+ge)))):xn.ACCESS_TOKEN||"",y?`mapbox.eventData.${y}:${ee}`:`mapbox.eventData:${ee}`}fetchEventData(){const y=en("localStorage"),I=this.getStorageKey(),ee=this.getStorageKey("uuid");if(y)try{const re=we.localStorage.getItem(I);re&&(this.eventData=JSON.parse(re));const ge=we.localStorage.getItem(ee);ge&&(this.anonId=ge)}catch{Dt("Unable to read from LocalStorage")}}saveEventData(){const y=en("localStorage"),I=this.getStorageKey(),ee=this.getStorageKey("uuid");if(y)try{we.localStorage.setItem(ee,this.anonId),Object.keys(this.eventData).length>=1&&we.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{Dt("Unable to write to LocalStorage")}}processRequests(y){}postEvent(y,I,ee,re){if(!xn.EVENTS_URL)return;const ge=mr(xn.EVENTS_URL);ge.params.push(`access_token=${re||xn.ACCESS_TOKEN||""}`);const ke={event:this.type,created:new Date(y).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:Pt,skuId:qn,userId:this.anonId},Ie=I?wt(ke,I):ke,$e={url:Sr(ge),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ie])};this.pendingRequest=jn($e,Le=>{this.pendingRequest=null,ee(Le),this.saveEventData(),this.processRequests(re)})}queueRequest(y,I){this.queue.push(y),this.processRequests(I)}}const Br=new class extends br{constructor($){super("appUserTurnstile"),this._customAccessToken=$}postTurnstileEvent($,y){xn.EVENTS_URL&&xn.ACCESS_TOKEN&&Array.isArray($)&&$.some(I=>yn(I)||Rn(I))&&this.queueRequest(Date.now(),y)}processRequests($){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const y=Lr(xn.ACCESS_TOKEN),I=y?y.u:xn.ACCESS_TOKEN;let ee=I!==this.eventData.tokenU;dt(this.anonId)||(this.anonId=nt(),ee=!0);const re=this.queue.shift();if(this.eventData.lastSuccess){const ge=new Date(this.eventData.lastSuccess),ke=new Date(re),Ie=(re-this.eventData.lastSuccess)/864e5;ee=ee||Ie>=1||Ie<-1||ge.getDate()!==ke.getDate()}else ee=!0;ee?this.postEvent(re,{"enabled.telemetry":!1},ge=>{ge||(this.eventData.lastSuccess=re,this.eventData.tokenU=I)},$):this.processRequests()}},Fr=Br.postTurnstileEvent.bind(Br),Gr=new class extends br{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent($,y,I,ee){this.skuToken=y,this.errorCb=ee,xn.EVENTS_URL&&(I||xn.ACCESS_TOKEN?this.queueRequest({id:$,timestamp:Date.now()},I):this.errorCb(new Error(un)))}processRequests($){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:I}=this.queue.shift();y&&this.success[y]||(this.anonId||this.fetchEventData(),dt(this.anonId)||(this.anonId=nt()),this.postEvent(I,{skuToken:this.skuToken},ee=>{ee?this.errorCb(ee):y&&(this.success[y]=!0)},$))}},Ur=Gr.postMapLoadEvent.bind(Gr),Ri=new class extends br{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession($,y,I,ee){if(!xn.API_URL||!xn.SESSION_PATH)return;const re=mr(xn.API_URL+xn.SESSION_PATH);re.params.push(`sku=${y||""}`),re.params.push(`access_token=${ee||xn.ACCESS_TOKEN||""}`);const ge={url:Sr(re),headers:{"Content-Type":"text/plain"}};this.pendingRequest=sr(ge,ke=>{this.pendingRequest=null,I(ke),this.saveEventData(),this.processRequests(ee)})}getSessionAPI($,y,I,ee){this.skuToken=y,this.errorCb=ee,xn.SESSION_PATH&&xn.API_URL&&(I||xn.ACCESS_TOKEN?this.queueRequest({id:$,timestamp:Date.now()},I):this.errorCb(new Error(un)))}processRequests($){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:I}=this.queue.shift();y&&this.success[y]||this.getSession(I,this.skuToken,ee=>{ee?this.errorCb(ee):y&&(this.success[y]=!0)},$)}},Li=Ri.getSessionAPI.bind(Ri),Ai=new Set;let Cr,No=500,Ta=50,xi={};function la($){const y=_t($);let I,ee;y&&y.forEach(ge=>{const ke=ge.split("=");ke[0]==="language"?I=ke[1]:ke[0]==="worldview"&&(ee=ke[1])});let re="mapbox-tiles";return I&&(re+=`-${I}`),ee&&(re+=`-${ee}`),re}function Bt(){try{return we.caches}catch{}}function ct($){const y=Bt();y&&!xi[$]&&(xi[$]=y.open($))}function _t($){const y=$.indexOf("?");return y>0?$.slice(y+1).split("&"):[]}function Lt($){const y=$.indexOf("?");if(y<0)return $;const I=_t($).filter(ee=>{const re=ee.split("=");return re[0]==="language"||re[0]==="worldview"});return I.length?`${$.slice(0,y)}?${I.join("&")}`:$.slice(0,y)}let Ut=1/0;const tn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(tn);class fn extends Error{constructor(y,I,ee){I===401&&Rn(ee)&&(y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(y),this.status=I,this.url=ee}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const dn=on()?()=>self.worker&&self.worker.referrer:()=>(we.location.protocol==="blob:"?we.parent:we).location.href,nn=function($,y){if(!(/^file:/.test(I=$.url)||/^file:/.test(dn())&&!/^\w+:/.test(I))){if(we.fetch&&we.Request&&we.AbortController&&we.Request.prototype.hasOwnProperty("signal"))return function(ee,re){const ge=new we.AbortController,ke=new we.Request(ee.url,{method:ee.method||"GET",body:ee.body,credentials:ee.credentials,headers:ee.headers,referrer:dn(),signal:ge.signal});let Ie=!1,$e=!1;const Le=(Ve=ke.url).indexOf("sku=")>0&&Rn(Ve);var Ve;ee.type==="json"&&ke.headers.set("Accept","application/json");const We=(tt,ot,mt)=>{if($e)return;if(tt&&tt.message!=="SecurityError"&&Dt(tt),ot&&mt)return Ze(ot);const Tt=Date.now();we.fetch(ke).then(Ft=>{if(Ft.ok){const Ht=Le?Ft.clone():null;return Ze(Ft,Ht,Tt)}return re(new fn(Ft.statusText,Ft.status,ee.url))}).catch(Ft=>{Ft.code!==20&&re(new Error(Ft.message))})},Ze=(tt,ot,mt)=>{(ee.type==="arrayBuffer"?tt.arrayBuffer():ee.type==="json"?tt.json():tt.text()).then(Tt=>{$e||(ot&&mt&&function(Ft,Ht,Nt){const qt=la(Ft.url);if(ct(qt),!xi[qt])return;const Qt={status:Ht.status,statusText:Ht.statusText,headers:new we.Headers};Ht.headers.forEach((wn,On)=>Qt.headers.set(On,wn));const Zt=an(Ht.headers.get("Cache-Control")||"");if(Zt["no-store"])return;Zt["max-age"]&&Qt.headers.set("Expires",new Date(Nt+1e3*Zt["max-age"]).toUTCString());const An=Qt.headers.get("Expires");An&&(new Date(An).getTime()-Nt<42e4||function(wn,On){if(Cr===void 0)try{new Response(new ReadableStream),Cr=!0}catch{Cr=!1}Cr?On(wn.body):wn.blob().then(On)}(Ht,wn=>{const On=new we.Response(wn,Qt);ct(qt),xi[qt]&&xi[qt].then(Jn=>Jn.put(Lt(Ft.url),On)).catch(Jn=>Dt(Jn.message))}))}(ke,ot,mt),Ie=!0,re(null,Tt,tt.headers.get("Cache-Control"),tt.headers.get("Expires")))}).catch(Tt=>{$e||re(new Error(Tt.message))})};return Le?function(tt,ot){const mt=la(tt.url);if(ct(mt),!xi[mt])return ot(null);const Tt=Lt(tt.url);xi[mt].then(Ft=>{Ft.match(Tt).then(Ht=>{const Nt=function(qt){if(!qt)return!1;const Qt=new Date(qt.headers.get("Expires")||0),Zt=an(qt.headers.get("Cache-Control")||"");return Qt>Date.now()&&!Zt["no-cache"]}(Ht);Ft.delete(Tt),Nt&&Ft.put(Tt,Ht.clone()),ot(null,Ht,Nt)}).catch(ot)}).catch(ot)}(ke,We):We(null,null),{cancel:()=>{$e=!0,Ie||ge.abort()}}}($,y);if(on()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",$,y,void 0,!0)}var I;return function(ee,re){const ge=new we.XMLHttpRequest;ge.open(ee.method||"GET",ee.url,!0),ee.type==="arrayBuffer"&&(ge.responseType="arraybuffer");for(const ke in ee.headers)ge.setRequestHeader(ke,ee.headers[ke]);return ee.type==="json"&&(ge.responseType="text",ge.setRequestHeader("Accept","application/json")),ge.withCredentials=ee.credentials==="include",ge.onerror=()=>{re(new Error(ge.statusText))},ge.onload=()=>{if((ge.status>=200&&ge.status<300||ge.status===0)&&ge.response!==null){let ke=ge.response;if(ee.type==="json")try{ke=JSON.parse(ge.response)}catch(Ie){return re(Ie)}re(null,ke,ge.getResponseHeader("Cache-Control"),ge.getResponseHeader("Expires"))}else re(new fn(ge.statusText,ge.status,ee.url))},ge.send(ee.body),{cancel:()=>ge.abort()}}($,y)},_n=function($,y){return nn(wt($,{type:"arrayBuffer"}),y)},jn=function($,y){return nn(wt($,{method:"POST"}),y)},sr=function($,y){return nn(wt($,{method:"GET"}),y)};function Hn($){const y=we.document.createElement("a");return y.href=$,y.protocol===we.document.location.protocol&&y.host===we.document.location.host}const wr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Er,gr;Er=[],gr=0;const Tr=function($,y){if(En.supported&&($.headers||($.headers={}),$.headers.accept="image/webp,*/*"),gr>=xn.MAX_PARALLEL_IMAGE_REQUESTS){const ge={requestParameters:$,callback:y,cancelled:!1,cancel(){this.cancelled=!0}};return Er.push(ge),ge}gr++;let I=!1;const ee=()=>{if(!I)for(I=!0,gr--;Er.length&&gr<xn.MAX_PARALLEL_IMAGE_REQUESTS;){const ge=Er.shift(),{requestParameters:ke,callback:Ie,cancelled:$e}=ge;$e||(ge.cancel=Tr(ke,Ie).cancel)}},re=_n($,(ge,ke,Ie,$e)=>{ee(),ge?y(ge):ke&&(we.createImageBitmap?function(Le,Ve){const We=new we.Blob([new Uint8Array(Le)],{type:"image/png"});we.createImageBitmap(We).then(Ze=>{Ve(null,Ze)}).catch(Ze=>{Ve(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ke,(Le,Ve)=>y(Le,Ve,Ie,$e)):function(Le,Ve){const We=new we.Image,Ze=we.URL;We.onload=()=>{Ve(null,We),Ze.revokeObjectURL(We.src),We.onload=null,we.requestAnimationFrame(()=>{We.src=wr})},We.onerror=()=>Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const tt=new we.Blob([new Uint8Array(Le)],{type:"image/png"});We.src=Le.byteLength?Ze.createObjectURL(tt):wr}(ke,(Le,Ve)=>y(Le,Ve,Ie,$e)))});return{cancel:()=>{re.cancel(),ee()}}};function Dr($,y,I){I[$]&&I[$].indexOf(y)!==-1||(I[$]=I[$]||[],I[$].push(y))}function ei($,y,I){if(I&&I[$]){const ee=I[$].indexOf(y);ee!==-1&&I[$].splice(ee,1)}}class ai{constructor(y,I={}){wt(this,I),this.type=y}}class ni extends ai{constructor(y,I={}){super("error",wt({error:y},I))}}class xr{on(y,I){return this._listeners=this._listeners||{},Dr(y,I,this._listeners),this}off(y,I){return ei(y,I,this._listeners),ei(y,I,this._oneTimeListeners),this}once(y,I){return I?(this._oneTimeListeners=this._oneTimeListeners||{},Dr(y,I,this._oneTimeListeners),this):new Promise(ee=>this.once(y,ee))}fire(y,I){typeof y=="string"&&(y=new ai(y,I||{}));const ee=y.type;if(this.listens(ee)){y.target=this;const re=this._listeners&&this._listeners[ee]?this._listeners[ee].slice():[];for(const Ie of re)Ie.call(this,y);const ge=this._oneTimeListeners&&this._oneTimeListeners[ee]?this._oneTimeListeners[ee].slice():[];for(const Ie of ge)ei(ee,Ie,this._oneTimeListeners),Ie.call(this,y);const ke=this._eventedParent;ke&&(wt(y,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ke.fire(y))}else y instanceof ni&&console.error(y.error);return this}listens(y){return!!(this._listeners&&this._listeners[y]&&this._listeners[y].length>0||this._oneTimeListeners&&this._oneTimeListeners[y]&&this._oneTimeListeners[y].length>0||this._eventedParent&&this._eventedParent.listens(y))}setEventedParent(y,I){return this._eventedParent=y,this._eventedParentData=I,this}}var gn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function fo($,...y){for(const I of y)for(const ee in I)$[ee]=I[ee];return $}function ki($){return $ instanceof Number||$ instanceof String||$ instanceof Boolean?$.valueOf():$}function ca($){if(Array.isArray($))return $.map(ca);if($ instanceof Object&&!($ instanceof Number||$ instanceof String||$ instanceof Boolean)){const y={};for(const I in $)y[I]=ca($[I]);return y}return ki($)}class Aa extends Error{constructor(y,I){super(I),this.message=I,this.key=y}}var Po=Aa;class dl{constructor(y,I=[]){this.parent=y,this.bindings={};for(const[ee,re]of I)this.bindings[ee]=re}concat(y){return new dl(this,y)}get(y){if(this.bindings[y])return this.bindings[y];if(this.parent)return this.parent.get(y);throw new Error(`${y} not found in scope.`)}has(y){return!!this.bindings[y]||!!this.parent&&this.parent.has(y)}}var Yu=dl;const ua={kind:"null"},lr={kind:"number"},Or={kind:"string"},Nr={kind:"boolean"},Oo={kind:"color"},Ro={kind:"object"},Pr={kind:"value"},As={kind:"collator"},ha={kind:"formatted"},ks={kind:"resolvedImage"};function _o($,y){return{kind:"array",itemType:$,N:y}}function bi($){if($.kind==="array"){const y=bi($.itemType);return typeof $.N=="number"?`array<${y}, ${$.N}>`:$.itemType.kind==="value"?"array":`array<${y}>`}return $.kind}const Jc=[ua,lr,Or,Nr,Oo,ha,Ro,_o(Pr),ks];function Xa($,y){if(y.kind==="error")return null;if($.kind==="array"){if(y.kind==="array"&&(y.N===0&&y.itemType.kind==="value"||!Xa($.itemType,y.itemType))&&(typeof $.N!="number"||$.N===y.N))return null}else{if($.kind===y.kind)return null;if($.kind==="value"){for(const I of Jc)if(!Xa(I,y))return null}}return`Expected ${bi($)} but found ${bi(y)} instead.`}function pl($,y){return y.some(I=>I.kind===$.kind)}function da($,y){return y.some(I=>I==="null"?$===null:I==="array"?Array.isArray($):I==="object"?$&&!Array.isArray($)&&typeof $=="object":I===typeof $)}function ic($){var y={exports:{}};return $(y,y.exports),y.exports}var pa=ic(function($,y){var I={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ee(Ie){return(Ie=Math.round(Ie))<0?0:Ie>255?255:Ie}function re(Ie){return ee(Ie[Ie.length-1]==="%"?parseFloat(Ie)/100*255:parseInt(Ie))}function ge(Ie){return($e=Ie[Ie.length-1]==="%"?parseFloat(Ie)/100:parseFloat(Ie))<0?0:$e>1?1:$e;var $e}function ke(Ie,$e,Le){return Le<0?Le+=1:Le>1&&(Le-=1),6*Le<1?Ie+($e-Ie)*Le*6:2*Le<1?$e:3*Le<2?Ie+($e-Ie)*(2/3-Le)*6:Ie}try{y.parseCSSColor=function(Ie){var $e,Le=Ie.replace(/ /g,"").toLowerCase();if(Le in I)return I[Le].slice();if(Le[0]==="#")return Le.length===4?($e=parseInt(Le.substr(1),16))>=0&&$e<=4095?[(3840&$e)>>4|(3840&$e)>>8,240&$e|(240&$e)>>4,15&$e|(15&$e)<<4,1]:null:Le.length===7&&($e=parseInt(Le.substr(1),16))>=0&&$e<=16777215?[(16711680&$e)>>16,(65280&$e)>>8,255&$e,1]:null;var Ve=Le.indexOf("("),We=Le.indexOf(")");if(Ve!==-1&&We+1===Le.length){var Ze=Le.substr(0,Ve),tt=Le.substr(Ve+1,We-(Ve+1)).split(","),ot=1;switch(Ze){case"rgba":if(tt.length!==4)return null;ot=ge(tt.pop());case"rgb":return tt.length!==3?null:[re(tt[0]),re(tt[1]),re(tt[2]),ot];case"hsla":if(tt.length!==4)return null;ot=ge(tt.pop());case"hsl":if(tt.length!==3)return null;var mt=(parseFloat(tt[0])%360+360)%360/360,Tt=ge(tt[1]),Ft=ge(tt[2]),Ht=Ft<=.5?Ft*(Tt+1):Ft+Tt-Ft*Tt,Nt=2*Ft-Ht;return[ee(255*ke(Nt,Ht,mt+1/3)),ee(255*ke(Nt,Ht,mt)),ee(255*ke(Nt,Ht,mt-1/3)),ot];default:return null}}return null}}catch{}});class Xi{constructor(y,I,ee,re=1){this.r=y,this.g=I,this.b=ee,this.a=re}static parse(y){if(!y)return;if(y instanceof Xi)return y;if(typeof y!="string")return;const I=pa.parseCSSColor(y);return I?new Xi(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3]):void 0}toString(){const[y,I,ee,re]=this.toArray();return`rgba(${Math.round(y)},${Math.round(I)},${Math.round(ee)},${re})`}toArray(){const{r:y,g:I,b:ee,a:re}=this;return re===0?[0,0,0,0]:[255*y/re,255*I/re,255*ee/re,re]}toArray01(){const{r:y,g:I,b:ee,a:re}=this;return re===0?[0,0,0,0]:[y/re,I/re,ee/re,re]}toArray01PremultipliedAlpha(){const{r:y,g:I,b:ee,a:re}=this;return[y,I,ee,re]}}Xi.black=new Xi(0,0,0,1),Xi.white=new Xi(1,1,1,1),Xi.transparent=new Xi(0,0,0,0),Xi.red=new Xi(1,0,0,1),Xi.blue=new Xi(0,0,1,1);var ii=Xi;class oc{constructor(y,I,ee){this.sensitivity=y?I?"variant":"case":I?"accent":"base",this.locale=ee,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(y,I){return this.collator.compare(y,I)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ss{constructor(y,I,ee,re,ge){this.text=y.normalize?y.normalize():y,this.image=I,this.scale=ee,this.fontStack=re,this.textColor=ge}}class ao{constructor(y){this.sections=y}static fromString(y){return new ao([new Ss(y,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(y=>y.text.length!==0||y.image&&y.image.name.length!==0)}static factory(y){return y instanceof ao?y:ao.fromString(y)}toString(){return this.sections.length===0?"":this.sections.map(y=>y.text).join("")}serialize(){const y=["format"];for(const I of this.sections){if(I.image){y.push(["image",I.image.name]);continue}y.push(I.text);const ee={};I.fontStack&&(ee["text-font"]=["literal",I.fontStack.split(",")]),I.scale&&(ee["font-scale"]=I.scale),I.textColor&&(ee["text-color"]=["rgba"].concat(I.textColor.toArray())),y.push(ee)}return y}}class so{constructor(y){this.name=y.name,this.available=y.available}toString(){return this.name}static fromString(y){return y?new so({name:y,available:!1}):null}serialize(){return["image",this.name]}}function ac($,y,I,ee){return typeof $=="number"&&$>=0&&$<=255&&typeof y=="number"&&y>=0&&y<=255&&typeof I=="number"&&I>=0&&I<=255?ee===void 0||typeof ee=="number"&&ee>=0&&ee<=1?null:`Invalid rgba value [${[$,y,I,ee].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ee=="number"?[$,y,I,ee]:[$,y,I]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fa($){if($===null||typeof $=="string"||typeof $=="boolean"||typeof $=="number"||$ instanceof ii||$ instanceof oc||$ instanceof ao||$ instanceof so)return!0;if(Array.isArray($)){for(const y of $)if(!fa(y))return!1;return!0}if(typeof $=="object"){for(const y in $)if(!fa($[y]))return!1;return!0}return!1}function Oi($){if($===null)return ua;if(typeof $=="string")return Or;if(typeof $=="boolean")return Nr;if(typeof $=="number")return lr;if($ instanceof ii)return Oo;if($ instanceof oc)return As;if($ instanceof ao)return ha;if($ instanceof so)return ks;if(Array.isArray($)){const y=$.length;let I;for(const ee of $){const re=Oi(ee);if(I){if(I===re)continue;I=Pr;break}I=re}return _o(I||Pr,y)}return Ro}function Cs($){const y=typeof $;return $===null?"":y==="string"||y==="number"||y==="boolean"?String($):$ instanceof ii||$ instanceof ao||$ instanceof so?$.toString():JSON.stringify($)}class Ms{constructor(y,I){this.type=y,this.value=I}static parse(y,I){if(y.length!==2)return I.error(`'literal' expression requires exactly one argument, but found ${y.length-1} instead.`);if(!fa(y[1]))return I.error("invalid value");const ee=y[1];let re=Oi(ee);const ge=I.expectedType;return re.kind!=="array"||re.N!==0||!ge||ge.kind!=="array"||typeof ge.N=="number"&&ge.N!==0||(re=ge),new Ms(re,ee)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ii?["rgba"].concat(this.value.toArray()):this.value instanceof ao?this.value.serialize():this.value}}var Is=Ms,Ui=class{constructor($){this.name="ExpressionEvaluationError",this.message=$}toJSON(){return this.message}};const Ps={string:Or,number:lr,boolean:Nr,object:Ro};class Os{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");let ee,re=1;const ge=y[0];if(ge==="array"){let Ie,$e;if(y.length>2){const Le=y[1];if(typeof Le!="string"||!(Le in Ps)||Le==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);Ie=Ps[Le],re++}else Ie=Pr;if(y.length>3){if(y[2]!==null&&(typeof y[2]!="number"||y[2]<0||y[2]!==Math.floor(y[2])))return I.error('The length argument to "array" must be a positive integer literal',2);$e=y[2],re++}ee=_o(Ie,$e)}else ee=Ps[ge];const ke=[];for(;re<y.length;re++){const Ie=I.parse(y[re],re,Pr);if(!Ie)return null;ke.push(Ie)}return new Os(ee,ke)}evaluate(y){for(let I=0;I<this.args.length;I++){const ee=this.args[I].evaluate(y);if(!Xa(this.type,Oi(ee)))return ee;if(I===this.args.length-1)throw new Ui(`Expected value to be of type ${bi(this.type)}, but found ${bi(Oi(ee))} instead.`)}return null}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=this.type,I=[y.kind];if(y.kind==="array"){const ee=y.itemType;if(ee.kind==="string"||ee.kind==="number"||ee.kind==="boolean"){I.push(ee.kind);const re=y.N;(typeof re=="number"||this.args.length>1)&&I.push(re)}}return I.concat(this.args.map(ee=>ee.serialize()))}}var vo=Os;class Rs{constructor(y){this.type=ha,this.sections=y}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");const ee=y[1];if(!Array.isArray(ee)&&typeof ee=="object")return I.error("First argument must be an image or text section.");const re=[];let ge=!1;for(let ke=1;ke<=y.length-1;++ke){const Ie=y[ke];if(ge&&typeof Ie=="object"&&!Array.isArray(Ie)){ge=!1;let $e=null;if(Ie["font-scale"]&&($e=I.parse(Ie["font-scale"],1,lr),!$e))return null;let Le=null;if(Ie["text-font"]&&(Le=I.parse(Ie["text-font"],1,_o(Or)),!Le))return null;let Ve=null;if(Ie["text-color"]&&(Ve=I.parse(Ie["text-color"],1,Oo),!Ve))return null;const We=re[re.length-1];We.scale=$e,We.font=Le,We.textColor=Ve}else{const $e=I.parse(y[ke],1,Pr);if(!$e)return null;const Le=$e.type.kind;if(Le!=="string"&&Le!=="value"&&Le!=="null"&&Le!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ge=!0,re.push({content:$e,scale:null,font:null,textColor:null})}}return new Rs(re)}evaluate(y){return new ao(this.sections.map(I=>{const ee=I.content.evaluate(y);return Oi(ee)===ks?new Ss("",ee,null,null,null):new Ss(Cs(ee),null,I.scale?I.scale.evaluate(y):null,I.font?I.font.evaluate(y).join(","):null,I.textColor?I.textColor.evaluate(y):null)}))}eachChild(y){for(const I of this.sections)y(I.content),I.scale&&y(I.scale),I.font&&y(I.font),I.textColor&&y(I.textColor)}outputDefined(){return!1}serialize(){const y=["format"];for(const I of this.sections){y.push(I.content.serialize());const ee={};I.scale&&(ee["font-scale"]=I.scale.serialize()),I.font&&(ee["text-font"]=I.font.serialize()),I.textColor&&(ee["text-color"]=I.textColor.serialize()),y.push(ee)}return y}}class fl{constructor(y){this.type=ks,this.input=y}static parse(y,I){if(y.length!==2)return I.error("Expected two arguments.");const ee=I.parse(y[1],1,Or);return ee?new fl(ee):I.error("No image name provided.")}evaluate(y){const I=this.input.evaluate(y),ee=so.fromString(I);return ee&&y.availableImages&&(ee.available=y.availableImages.indexOf(I)>-1),ee}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ju={"to-boolean":Nr,"to-color":Oo,"to-number":lr,"to-string":Or};class sc{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");const ee=y[0];if((ee==="to-boolean"||ee==="to-string")&&y.length!==2)return I.error("Expected one argument.");const re=Ju[ee],ge=[];for(let ke=1;ke<y.length;ke++){const Ie=I.parse(y[ke],ke,Pr);if(!Ie)return null;ge.push(Ie)}return new sc(re,ge)}evaluate(y){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(y));if(this.type.kind==="color"){let I,ee;for(const re of this.args){if(I=re.evaluate(y),ee=null,I instanceof ii)return I;if(typeof I=="string"){const ge=y.parseColor(I);if(ge)return ge}else if(Array.isArray(I)&&(ee=I.length<3||I.length>4?`Invalid rbga value ${JSON.stringify(I)}: expected an array containing either three or four numeric values.`:ac(I[0],I[1],I[2],I[3]),!ee))return new ii(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new Ui(ee||`Could not parse color from value '${typeof I=="string"?I:String(JSON.stringify(I))}'`)}if(this.type.kind==="number"){let I=null;for(const ee of this.args){if(I=ee.evaluate(y),I===null)return 0;const re=Number(I);if(!isNaN(re))return re}throw new Ui(`Could not convert ${JSON.stringify(I)} to number.`)}return this.type.kind==="formatted"?ao.fromString(Cs(this.args[0].evaluate(y))):this.type.kind==="resolvedImage"?so.fromString(Cs(this.args[0].evaluate(y))):Cs(this.args[0].evaluate(y))}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Rs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new fl(this.args[0]).serialize();const y=[`to-${this.type.kind}`];return this.eachChild(I=>{y.push(I.serialize())}),y}}var ka=sc;const Qu=["Unknown","Point","LineString","Polygon"];var Qc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Qu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const $=this.featureDistanceData.center,y=this.featureDistanceData.scale,{x:I,y:ee}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(I*y-$[0])+this.featureDistanceData.bearing[1]*(ee*y-$[1])}return 0}parseColor($){let y=this._parseColorCache[$];return y||(y=this._parseColorCache[$]=ii.parse($)),y}};class Sa{constructor(y,I,ee,re){this.name=y,this.type=I,this._evaluate=ee,this.args=re}evaluate(y){return this._evaluate(y,this.args)}eachChild(y){this.args.forEach(y)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(y=>y.serialize()))}static parse(y,I){const ee=y[0],re=Sa.definitions[ee];if(!re)return I.error(`Unknown expression "${ee}". If you wanted a literal array, use ["literal", [...]].`,0);const ge=Array.isArray(re)?re[0]:re.type,ke=Array.isArray(re)?[[re[1],re[2]]]:re.overloads,Ie=ke.filter(([Le])=>!Array.isArray(Le)||Le.length===y.length-1);let $e=null;for(const[Le,Ve]of Ie){$e=new Ma(I.registry,I.path,null,I.scope);const We=[];let Ze=!1;for(let tt=1;tt<y.length;tt++){const ot=y[tt],mt=Array.isArray(Le)?Le[tt-1]:Le.type,Tt=$e.parse(ot,1+We.length,mt);if(!Tt){Ze=!0;break}We.push(Tt)}if(!Ze)if(Array.isArray(Le)&&Le.length!==We.length)$e.error(`Expected ${Le.length} arguments, but found ${We.length} instead.`);else{for(let tt=0;tt<We.length;tt++){const ot=Array.isArray(Le)?Le[tt]:Le.type,mt=We[tt];$e.concat(tt+1).checkSubtype(ot,mt.type)}if($e.errors.length===0)return new Sa(ee,ge,Ve,We)}}if(Ie.length===1)I.errors.push(...$e.errors);else{const Le=(Ie.length?Ie:ke).map(([We])=>{return Ze=We,Array.isArray(Ze)?`(${Ze.map(bi).join(", ")})`:`(${bi(Ze.type)}...)`;var Ze}).join(" | "),Ve=[];for(let We=1;We<y.length;We++){const Ze=I.parse(y[We],1+Ve.length);if(!Ze)return null;Ve.push(bi(Ze.type))}I.error(`Expected arguments of type ${Le}, but found (${Ve.join(", ")}) instead.`)}return null}static register(y,I){Sa.definitions=I;for(const ee in I)y[ee]=Sa}}var lo=Sa;class _l{constructor(y,I,ee){this.type=As,this.locale=ee,this.caseSensitive=y,this.diacriticSensitive=I}static parse(y,I){if(y.length!==2)return I.error("Expected one argument.");const ee=y[1];if(typeof ee!="object"||Array.isArray(ee))return I.error("Collator options argument must be an object.");const re=I.parse(ee["case-sensitive"]!==void 0&&ee["case-sensitive"],1,Nr);if(!re)return null;const ge=I.parse(ee["diacritic-sensitive"]!==void 0&&ee["diacritic-sensitive"],1,Nr);if(!ge)return null;let ke=null;return ee.locale&&(ke=I.parse(ee.locale,1,Or),!ke)?null:new _l(re,ge,ke)}evaluate(y){return new oc(this.caseSensitive.evaluate(y),this.diacriticSensitive.evaluate(y),this.locale?this.locale.evaluate(y):null)}eachChild(y){y(this.caseSensitive),y(this.diacriticSensitive),this.locale&&y(this.locale)}outputDefined(){return!1}serialize(){const y={};return y["case-sensitive"]=this.caseSensitive.serialize(),y["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(y.locale=this.locale.serialize()),["collator",y]}}const zo=8192;function lc($,y){$[0]=Math.min($[0],y[0]),$[1]=Math.min($[1],y[1]),$[2]=Math.max($[2],y[0]),$[3]=Math.max($[3],y[1])}function ml($,y){return!($[0]<=y[0]||$[2]>=y[2]||$[1]<=y[1]||$[3]>=y[3])}function eh($,y){const I=(180+$[0])/360,ee=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+$[1]*Math.PI/360)))/360,re=Math.pow(2,y.z);return[Math.round(I*re*zo),Math.round(ee*re*zo)]}function zs($,y,I){const ee=$[0]-y[0],re=$[1]-y[1],ge=$[0]-I[0],ke=$[1]-I[1];return ee*ke-ge*re==0&&ee*ge<=0&&re*ke<=0}function gl($,y){let I=!1;for(let ke=0,Ie=y.length;ke<Ie;ke++){const $e=y[ke];for(let Le=0,Ve=$e.length;Le<Ve-1;Le++){if(zs($,$e[Le],$e[Le+1]))return!1;(re=$e[Le])[1]>(ee=$)[1]!=(ge=$e[Le+1])[1]>ee[1]&&ee[0]<(ge[0]-re[0])*(ee[1]-re[1])/(ge[1]-re[1])+re[0]&&(I=!I)}}var ee,re,ge;return I}function $s($,y){for(let I=0;I<y.length;I++)if(gl($,y[I]))return!0;return!1}function eu($,y,I,ee){const re=ee[0]-I[0],ge=ee[1]-I[1],ke=($[0]-I[0])*ge-re*($[1]-I[1]),Ie=(y[0]-I[0])*ge-re*(y[1]-I[1]);return ke>0&&Ie<0||ke<0&&Ie>0}function th($,y,I){for(const Le of I)for(let Ve=0;Ve<Le.length-1;++Ve)if((Ie=[(ke=Le[Ve+1])[0]-(ge=Le[Ve])[0],ke[1]-ge[1]])[0]*($e=[(re=y)[0]-(ee=$)[0],re[1]-ee[1]])[1]-Ie[1]*$e[0]!=0&&eu(ee,re,ge,ke)&&eu(ge,ke,ee,re))return!0;var ee,re,ge,ke,Ie,$e;return!1}function tu($,y){for(let I=0;I<$.length;++I)if(!gl($[I],y))return!1;for(let I=0;I<$.length-1;++I)if(th($[I],$[I+1],y))return!1;return!0}function nh($,y){for(let I=0;I<y.length;I++)if(tu($,y[I]))return!0;return!1}function xo($,y,I){const ee=[];for(let re=0;re<$.length;re++){const ge=[];for(let ke=0;ke<$[re].length;ke++){const Ie=eh($[re][ke],I);lc(y,Ie),ge.push(Ie)}ee.push(ge)}return ee}function Ca($,y,I){const ee=[];for(let re=0;re<$.length;re++){const ge=xo($[re],y,I);ee.push(ge)}return ee}function cc($,y,I,ee){if($[0]<I[0]||$[0]>I[2]){const re=.5*ee;let ge=$[0]-I[0]>re?-ee:I[0]-$[0]>re?ee:0;ge===0&&(ge=$[0]-I[2]>re?-ee:I[2]-$[0]>re?ee:0),$[0]+=ge}lc(y,$)}function yl($,y,I,ee){const re=Math.pow(2,ee.z)*zo,ge=[ee.x*zo,ee.y*zo],ke=[];if(!$)return ke;for(const Ie of $)for(const $e of Ie){const Le=[$e.x+ge[0],$e.y+ge[1]];cc(Le,y,I,re),ke.push(Le)}return ke}function uc($,y,I,ee){const re=Math.pow(2,ee.z)*zo,ge=[ee.x*zo,ee.y*zo],ke=[];if(!$)return ke;for(const $e of $){const Le=[];for(const Ve of $e){const We=[Ve.x+ge[0],Ve.y+ge[1]];lc(y,We),Le.push(We)}ke.push(Le)}if(y[2]-y[0]<=re/2){(Ie=y)[0]=Ie[1]=1/0,Ie[2]=Ie[3]=-1/0;for(const $e of ke)for(const Le of $e)cc(Le,y,I,re)}var Ie;return ke}class Ka{constructor(y,I){this.type=Nr,this.geojson=y,this.geometries=I}static parse(y,I){if(y.length!==2)return I.error(`'within' expression requires exactly one argument, but found ${y.length-1} instead.`);if(fa(y[1])){const ee=y[1];if(ee.type==="FeatureCollection")for(let re=0;re<ee.features.length;++re){const ge=ee.features[re].geometry.type;if(ge==="Polygon"||ge==="MultiPolygon")return new Ka(ee,ee.features[re].geometry)}else if(ee.type==="Feature"){const re=ee.geometry.type;if(re==="Polygon"||re==="MultiPolygon")return new Ka(ee,ee.geometry)}else if(ee.type==="Polygon"||ee.type==="MultiPolygon")return new Ka(ee,ee)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(y){if(y.geometry()!=null&&y.canonicalID()!=null){if(y.geometryType()==="Point")return function(I,ee){const re=[1/0,1/0,-1/0,-1/0],ge=[1/0,1/0,-1/0,-1/0],ke=I.canonicalID();if(!ke)return!1;if(ee.type==="Polygon"){const Ie=xo(ee.coordinates,ge,ke),$e=yl(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of $e)if(!gl(Le,Ie))return!1}if(ee.type==="MultiPolygon"){const Ie=Ca(ee.coordinates,ge,ke),$e=yl(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of $e)if(!$s(Le,Ie))return!1}return!0}(y,this.geometries);if(y.geometryType()==="LineString")return function(I,ee){const re=[1/0,1/0,-1/0,-1/0],ge=[1/0,1/0,-1/0,-1/0],ke=I.canonicalID();if(!ke)return!1;if(ee.type==="Polygon"){const Ie=xo(ee.coordinates,ge,ke),$e=uc(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of $e)if(!tu(Le,Ie))return!1}if(ee.type==="MultiPolygon"){const Ie=Ca(ee.coordinates,ge,ke),$e=uc(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of $e)if(!nh(Le,Ie))return!1}return!0}(y,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var vl=Ka;function jo($){if($ instanceof lo&&($.name==="get"&&$.args.length===1||$.name==="feature-state"||$.name==="has"&&$.args.length===1||$.name==="properties"||$.name==="geometry-type"||$.name==="id"||/^filter-/.test($.name))||$ instanceof vl)return!1;let y=!0;return $.eachChild(I=>{y&&!jo(I)&&(y=!1)}),y}function _a($){if($ instanceof lo&&$.name==="feature-state")return!1;let y=!0;return $.eachChild(I=>{y&&!_a(I)&&(y=!1)}),y}function Uo($,y){if($ instanceof lo&&y.indexOf($.name)>=0)return!1;let I=!0;return $.eachChild(ee=>{I&&!Uo(ee,y)&&(I=!1)}),I}class xl{constructor(y,I){this.type=I.type,this.name=y,this.boundExpression=I}static parse(y,I){if(y.length!==2||typeof y[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");const ee=y[1];return I.scope.has(ee)?new xl(ee,I.scope.get(ee)):I.error(`Unknown variable "${ee}". Make sure "${ee}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(y){return this.boundExpression.evaluate(y)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Ds=xl;class bl{constructor(y,I=[],ee,re=new Yu,ge=[]){this.registry=y,this.path=I,this.key=I.map(ke=>`[${ke}]`).join(""),this.scope=re,this.errors=ge,this.expectedType=ee}parse(y,I,ee,re,ge={}){return I?this.concat(I,ee,re)._parse(y,ge):this._parse(y,ge)}_parse(y,I){function ee(re,ge,ke){return ke==="assert"?new vo(ge,[re]):ke==="coerce"?new ka(ge,[re]):re}if(y!==null&&typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"||(y=["literal",y]),Array.isArray(y)){if(y.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const re=y[0];if(typeof re!="string")return this.error(`Expression name must be a string, but found ${typeof re} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const ge=this.registry[re];if(ge){let ke=ge.parse(y,this);if(!ke)return null;if(this.expectedType){const Ie=this.expectedType,$e=ke.type;if(Ie.kind!=="string"&&Ie.kind!=="number"&&Ie.kind!=="boolean"&&Ie.kind!=="object"&&Ie.kind!=="array"||$e.kind!=="value")if(Ie.kind!=="color"&&Ie.kind!=="formatted"&&Ie.kind!=="resolvedImage"||$e.kind!=="value"&&$e.kind!=="string"){if(this.checkSubtype(Ie,$e))return null}else ke=ee(ke,Ie,I.typeAnnotation||"coerce");else ke=ee(ke,Ie,I.typeAnnotation||"assert")}if(!(ke instanceof Is)&&ke.type.kind!=="resolvedImage"&&Yr(ke)){const Ie=new Qc;try{ke=new Is(ke.type,ke.evaluate(Ie))}catch($e){return this.error($e.message),null}}return ke}return this.error(`Unknown expression "${re}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(y===void 0?"'undefined' value invalid. Use null instead.":typeof y=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof y} instead.`)}concat(y,I,ee){const re=typeof y=="number"?this.path.concat(y):this.path,ge=ee?this.scope.concat(ee):this.scope;return new bl(this.registry,re,I||null,ge,this.errors)}error(y,...I){const ee=`${this.key}${I.map(re=>`[${re}]`).join("")}`;this.errors.push(new Po(ee,y))}checkSubtype(y,I){const ee=Xa(y,I);return ee&&this.error(ee),ee}}var Ma=bl;function Yr($){if($ instanceof Ds)return Yr($.boundExpression);if($ instanceof lo&&$.name==="error"||$ instanceof _l||$ instanceof vl)return!1;const y=$ instanceof ka||$ instanceof vo;let I=!0;return $.eachChild(ee=>{I=y?I&&Yr(ee):I&&ee instanceof Is}),!!I&&jo($)&&Uo($,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function wl($,y){const I=$.length-1;let ee,re,ge=0,ke=I,Ie=0;for(;ge<=ke;)if(Ie=Math.floor((ge+ke)/2),ee=$[Ie],re=$[Ie+1],ee<=y){if(Ie===I||y<re)return Ie;ge=Ie+1}else{if(!(ee>y))throw new Ui("Input is not a number.");ke=Ie-1}return 0}class hc{constructor(y,I,ee){this.type=y,this.input=I,this.labels=[],this.outputs=[];for(const[re,ge]of ee)this.labels.push(re),this.outputs.push(ge)}static parse(y,I){if(y.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return I.error("Expected an even number of arguments.");const ee=I.parse(y[1],1,lr);if(!ee)return null;const re=[];let ge=null;I.expectedType&&I.expectedType.kind!=="value"&&(ge=I.expectedType);for(let ke=1;ke<y.length;ke+=2){const Ie=ke===1?-1/0:y[ke],$e=y[ke+1],Le=ke,Ve=ke+1;if(typeof Ie!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Le);if(re.length&&re[re.length-1][0]>=Ie)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Le);const We=I.parse($e,Ve,ge);if(!We)return null;ge=ge||We.type,re.push([Ie,We])}return new hc(ge,ee,re)}evaluate(y){const I=this.labels,ee=this.outputs;if(I.length===1)return ee[0].evaluate(y);const re=this.input.evaluate(y);if(re<=I[0])return ee[0].evaluate(y);const ge=I.length;return re>=I[ge-1]?ee[ge-1].evaluate(y):ee[wl(I,re)].evaluate(y)}eachChild(y){y(this.input);for(const I of this.outputs)y(I)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){const y=["step",this.input.serialize()];for(let I=0;I<this.labels.length;I++)I>0&&y.push(this.labels[I]),y.push(this.outputs[I].serialize());return y}}var dc=hc;function Wr($,y,I){return $*(1-I)+y*I}function Ya($,y,I){return $.map((ee,re)=>Wr(ee,y[re],I))}var Ls=Object.freeze({__proto__:null,number:Wr,color:function($,y,I){return new ii(Wr($.r,y.r,I),Wr($.g,y.g,I),Wr($.b,y.b,I),Wr($.a,y.a,I))},array:Ya});const $o=.95047,pc=1.08883,El=4/29,ma=6/29,Ja=3*ma*ma,rh=Math.PI/180,Qo=180/Math.PI;function Tl($){return $>.008856451679035631?Math.pow($,1/3):$/Ja+El}function Bs($){return $>ma?$*$*$:Ja*($-El)}function fc($){return 255*($<=.0031308?12.92*$:1.055*Math.pow($,1/2.4)-.055)}function Al($){return($/=255)<=.04045?$/12.92:Math.pow(($+.055)/1.055,2.4)}function nu($){const y=Al($.r),I=Al($.g),ee=Al($.b),re=Tl((.4124564*y+.3575761*I+.1804375*ee)/$o),ge=Tl((.2126729*y+.7151522*I+.072175*ee)/1);return{l:116*ge-16,a:500*(re-ge),b:200*(ge-Tl((.0193339*y+.119192*I+.9503041*ee)/pc)),alpha:$.a}}function kl($){let y=($.l+16)/116,I=isNaN($.a)?y:y+$.a/500,ee=isNaN($.b)?y:y-$.b/200;return y=1*Bs(y),I=$o*Bs(I),ee=pc*Bs(ee),new ii(fc(3.2404542*I-1.5371385*y-.4985314*ee),fc(-.969266*I+1.8760108*y+.041556*ee),fc(.0556434*I-.2040259*y+1.0572252*ee),$.alpha)}function ru($,y,I){const ee=y-$;return $+I*(ee>180||ee<-180?ee-360*Math.round(ee/360):ee)}const Vo={forward:nu,reverse:kl,interpolate:function($,y,I){return{l:Wr($.l,y.l,I),a:Wr($.a,y.a,I),b:Wr($.b,y.b,I),alpha:Wr($.alpha,y.alpha,I)}}},Qa={forward:function($){const{l:y,a:I,b:ee}=nu($),re=Math.atan2(ee,I)*Qo;return{h:re<0?re+360:re,c:Math.sqrt(I*I+ee*ee),l:y,alpha:$.a}},reverse:function($){const y=$.h*rh,I=$.c;return kl({l:$.l,a:Math.cos(y)*I,b:Math.sin(y)*I,alpha:$.alpha})},interpolate:function($,y,I){return{h:ru($.h,y.h,I),c:Wr($.c,y.c,I),l:Wr($.l,y.l,I),alpha:Wr($.alpha,y.alpha,I)}}};var iu=Object.freeze({__proto__:null,lab:Vo,hcl:Qa});class Fs{constructor(y,I,ee,re,ge){this.type=y,this.operator=I,this.interpolation=ee,this.input=re,this.labels=[],this.outputs=[];for(const[ke,Ie]of ge)this.labels.push(ke),this.outputs.push(Ie)}static interpolationFactor(y,I,ee,re){let ge=0;if(y.name==="exponential")ge=Sl(I,y.base,ee,re);else if(y.name==="linear")ge=Sl(I,1,ee,re);else if(y.name==="cubic-bezier"){const ke=y.controlPoints;ge=new he(ke[0],ke[1],ke[2],ke[3]).solve(Sl(I,1,ee,re))}return ge}static parse(y,I){let[ee,re,ge,...ke]=y;if(!Array.isArray(re)||re.length===0)return I.error("Expected an interpolation type expression.",1);if(re[0]==="linear")re={name:"linear"};else if(re[0]==="exponential"){const Le=re[1];if(typeof Le!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);re={name:"exponential",base:Le}}else{if(re[0]!=="cubic-bezier")return I.error(`Unknown interpolation type ${String(re[0])}`,1,0);{const Le=re.slice(1);if(Le.length!==4||Le.some(Ve=>typeof Ve!="number"||Ve<0||Ve>1))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);re={name:"cubic-bezier",controlPoints:Le}}}if(y.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(ge=I.parse(ge,2,lr),!ge)return null;const Ie=[];let $e=null;ee==="interpolate-hcl"||ee==="interpolate-lab"?$e=Oo:I.expectedType&&I.expectedType.kind!=="value"&&($e=I.expectedType);for(let Le=0;Le<ke.length;Le+=2){const Ve=ke[Le],We=ke[Le+1],Ze=Le+3,tt=Le+4;if(typeof Ve!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ze);if(Ie.length&&Ie[Ie.length-1][0]>=Ve)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ze);const ot=I.parse(We,tt,$e);if(!ot)return null;$e=$e||ot.type,Ie.push([Ve,ot])}return $e.kind==="number"||$e.kind==="color"||$e.kind==="array"&&$e.itemType.kind==="number"&&typeof $e.N=="number"?new Fs($e,ee,re,ge,Ie):I.error(`Type ${bi($e)} is not interpolatable.`)}evaluate(y){const I=this.labels,ee=this.outputs;if(I.length===1)return ee[0].evaluate(y);const re=this.input.evaluate(y);if(re<=I[0])return ee[0].evaluate(y);const ge=I.length;if(re>=I[ge-1])return ee[ge-1].evaluate(y);const ke=wl(I,re),Ie=Fs.interpolationFactor(this.interpolation,re,I[ke],I[ke+1]),$e=ee[ke].evaluate(y),Le=ee[ke+1].evaluate(y);return this.operator==="interpolate"?Ls[this.type.kind.toLowerCase()]($e,Le,Ie):this.operator==="interpolate-hcl"?Qa.reverse(Qa.interpolate(Qa.forward($e),Qa.forward(Le),Ie)):Vo.reverse(Vo.interpolate(Vo.forward($e),Vo.forward(Le),Ie))}eachChild(y){y(this.input);for(const I of this.outputs)y(I)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){let y;y=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const I=[this.operator,y,this.input.serialize()];for(let ee=0;ee<this.labels.length;ee++)I.push(this.labels[ee],this.outputs[ee].serialize());return I}}function Sl($,y,I,ee){const re=ee-I,ge=$-I;return re===0?0:y===1?ge/re:(Math.pow(y,ge)-1)/(Math.pow(y,re)-1)}var Go=Fs;class Ia{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expectected at least one argument.");let ee=null;const re=I.expectedType;re&&re.kind!=="value"&&(ee=re);const ge=[];for(const Ie of y.slice(1)){const $e=I.parse(Ie,1+ge.length,ee,void 0,{typeAnnotation:"omit"});if(!$e)return null;ee=ee||$e.type,ge.push($e)}const ke=re&&ge.some(Ie=>Xa(re,Ie.type));return new Ia(ke?Pr:ee,ge)}evaluate(y){let I,ee=null,re=0;for(const ge of this.args){if(re++,ee=ge.evaluate(y),ee&&ee instanceof so&&!ee.available&&(I||(I=ee),ee=null,re===this.args.length))return I;if(ee!==null)break}return ee}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=["coalesce"];return this.eachChild(I=>{y.push(I.serialize())}),y}}var ou=Ia;class _c{constructor(y,I){this.type=I.type,this.bindings=[].concat(y),this.result=I}evaluate(y){return this.result.evaluate(y)}eachChild(y){for(const I of this.bindings)y(I[1]);y(this.result)}static parse(y,I){if(y.length<4)return I.error(`Expected at least 3 arguments, but found ${y.length-1} instead.`);const ee=[];for(let ge=1;ge<y.length-1;ge+=2){const ke=y[ge];if(typeof ke!="string")return I.error(`Expected string, but found ${typeof ke} instead.`,ge);if(/[^a-zA-Z0-9_]/.test(ke))return I.error("Variable names must contain only alphanumeric characters or '_'.",ge);const Ie=I.parse(y[ge+1],ge+1);if(!Ie)return null;ee.push([ke,Ie])}const re=I.parse(y[y.length-1],y.length-1,I.expectedType,ee);return re?new _c(ee,re):null}outputDefined(){return this.result.outputDefined()}serialize(){const y=["let"];for(const[I,ee]of this.bindings)y.push(I,ee.serialize());return y.push(this.result.serialize()),y}}var au=_c;class mc{constructor(y,I,ee){this.type=y,this.index=I,this.input=ee}static parse(y,I){if(y.length!==3)return I.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,lr),re=I.parse(y[2],2,_o(I.expectedType||Pr));return ee&&re?new mc(re.type.itemType,ee,re):null}evaluate(y){const I=this.index.evaluate(y),ee=this.input.evaluate(y);if(I<0)throw new Ui(`Array index out of bounds: ${I} < 0.`);if(I>=ee.length)throw new Ui(`Array index out of bounds: ${I} > ${ee.length-1}.`);if(I!==Math.floor(I))throw new Ui(`Array index must be an integer, but found ${I} instead.`);return ee[I]}eachChild(y){y(this.index),y(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var su=mc;class gc{constructor(y,I){this.type=Nr,this.needle=y,this.haystack=I}static parse(y,I){if(y.length!==3)return I.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,Pr),re=I.parse(y[2],2,Pr);return ee&&re?pl(ee.type,[Nr,Or,lr,ua,Pr])?new gc(ee,re):I.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ee.type)} instead`):null}evaluate(y){const I=this.needle.evaluate(y),ee=this.haystack.evaluate(y);if(ee==null)return!1;if(!da(I,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${bi(Oi(I))} instead.`);if(!da(ee,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${bi(Oi(ee))} instead.`);return ee.indexOf(I)>=0}eachChild(y){y(this.needle),y(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ih=gc;class Cl{constructor(y,I,ee){this.type=lr,this.needle=y,this.haystack=I,this.fromIndex=ee}static parse(y,I){if(y.length<=2||y.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,Pr),re=I.parse(y[2],2,Pr);if(!ee||!re)return null;if(!pl(ee.type,[Nr,Or,lr,ua,Pr]))return I.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ee.type)} instead`);if(y.length===4){const ge=I.parse(y[3],3,lr);return ge?new Cl(ee,re,ge):null}return new Cl(ee,re)}evaluate(y){const I=this.needle.evaluate(y),ee=this.haystack.evaluate(y);if(!da(I,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${bi(Oi(I))} instead.`);if(!da(ee,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${bi(Oi(ee))} instead.`);if(this.fromIndex){const re=this.fromIndex.evaluate(y);return ee.indexOf(I,re)}return ee.indexOf(I)}eachChild(y){y(this.needle),y(this.haystack),this.fromIndex&&y(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const y=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),y]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var oh=Cl;class Ml{constructor(y,I,ee,re,ge,ke){this.inputType=y,this.type=I,this.input=ee,this.cases=re,this.outputs=ge,this.otherwise=ke}static parse(y,I){if(y.length<5)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if(y.length%2!=1)return I.error("Expected an even number of arguments.");let ee,re;I.expectedType&&I.expectedType.kind!=="value"&&(re=I.expectedType);const ge={},ke=[];for(let Le=2;Le<y.length-1;Le+=2){let Ve=y[Le];const We=y[Le+1];Array.isArray(Ve)||(Ve=[Ve]);const Ze=I.concat(Le);if(Ve.length===0)return Ze.error("Expected at least one branch label.");for(const ot of Ve){if(typeof ot!="number"&&typeof ot!="string")return Ze.error("Branch labels must be numbers or strings.");if(typeof ot=="number"&&Math.abs(ot)>Number.MAX_SAFE_INTEGER)return Ze.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ot=="number"&&Math.floor(ot)!==ot)return Ze.error("Numeric branch labels must be integer values.");if(ee){if(Ze.checkSubtype(ee,Oi(ot)))return null}else ee=Oi(ot);if(ge[String(ot)]!==void 0)return Ze.error("Branch labels must be unique.");ge[String(ot)]=ke.length}const tt=I.parse(We,Le,re);if(!tt)return null;re=re||tt.type,ke.push(tt)}const Ie=I.parse(y[1],1,Pr);if(!Ie)return null;const $e=I.parse(y[y.length-1],y.length-1,re);return $e?Ie.type.kind!=="value"&&I.concat(1).checkSubtype(ee,Ie.type)?null:new Ml(ee,re,Ie,ge,ke,$e):null}evaluate(y){const I=this.input.evaluate(y);return(Oi(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(y)}eachChild(y){y(this.input),this.outputs.forEach(y),y(this.otherwise)}outputDefined(){return this.outputs.every(y=>y.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["match",this.input.serialize()],I=Object.keys(this.cases).sort(),ee=[],re={};for(const ke of I){const Ie=re[this.cases[ke]];Ie===void 0?(re[this.cases[ke]]=ee.length,ee.push([this.cases[ke],[ke]])):ee[Ie][1].push(ke)}const ge=ke=>this.inputType.kind==="number"?Number(ke):ke;for(const[ke,Ie]of ee)y.push(Ie.length===1?ge(Ie[0]):Ie.map(ge)),y.push(this.outputs[ke].serialize());return y.push(this.otherwise.serialize()),y}}var lu=Ml;class Il{constructor(y,I,ee){this.type=y,this.branches=I,this.otherwise=ee}static parse(y,I){if(y.length<4)return I.error(`Expected at least 3 arguments, but found only ${y.length-1}.`);if(y.length%2!=0)return I.error("Expected an odd number of arguments.");let ee;I.expectedType&&I.expectedType.kind!=="value"&&(ee=I.expectedType);const re=[];for(let ke=1;ke<y.length-1;ke+=2){const Ie=I.parse(y[ke],ke,Nr);if(!Ie)return null;const $e=I.parse(y[ke+1],ke+1,ee);if(!$e)return null;re.push([Ie,$e]),ee=ee||$e.type}const ge=I.parse(y[y.length-1],y.length-1,ee);return ge?new Il(ee,re,ge):null}evaluate(y){for(const[I,ee]of this.branches)if(I.evaluate(y))return ee.evaluate(y);return this.otherwise.evaluate(y)}eachChild(y){for(const[I,ee]of this.branches)y(I),y(ee);y(this.otherwise)}outputDefined(){return this.branches.every(([y,I])=>I.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["case"];return this.eachChild(I=>{y.push(I.serialize())}),y}}var ah=Il;class Ns{constructor(y,I,ee,re){this.type=y,this.input=I,this.beginIndex=ee,this.endIndex=re}static parse(y,I){if(y.length<=2||y.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,Pr),re=I.parse(y[2],2,lr);if(!ee||!re)return null;if(!pl(ee.type,[_o(Pr),Or,Pr]))return I.error(`Expected first argument to be of type array or string, but found ${bi(ee.type)} instead`);if(y.length===4){const ge=I.parse(y[3],3,lr);return ge?new Ns(ee.type,ee,re,ge):null}return new Ns(ee.type,ee,re)}evaluate(y){const I=this.input.evaluate(y),ee=this.beginIndex.evaluate(y);if(!da(I,["string","array"]))throw new Ui(`Expected first argument to be of type array or string, but found ${bi(Oi(I))} instead.`);if(this.endIndex){const re=this.endIndex.evaluate(y);return I.slice(ee,re)}return I.slice(ee)}eachChild(y){y(this.input),y(this.beginIndex),this.endIndex&&y(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const y=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),y]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var cu=Ns;function es($,y){return $==="=="||$==="!="?y.kind==="boolean"||y.kind==="string"||y.kind==="number"||y.kind==="null"||y.kind==="value":y.kind==="string"||y.kind==="number"||y.kind==="value"}function yc($,y,I,ee){return ee.compare(y,I)===0}function Pa($,y,I){const ee=$!=="=="&&$!=="!=";return class em{constructor(ge,ke,Ie){this.type=Nr,this.lhs=ge,this.rhs=ke,this.collator=Ie,this.hasUntypedArgument=ge.type.kind==="value"||ke.type.kind==="value"}static parse(ge,ke){if(ge.length!==3&&ge.length!==4)return ke.error("Expected two or three arguments.");const Ie=ge[0];let $e=ke.parse(ge[1],1,Pr);if(!$e)return null;if(!es(Ie,$e.type))return ke.concat(1).error(`"${Ie}" comparisons are not supported for type '${bi($e.type)}'.`);let Le=ke.parse(ge[2],2,Pr);if(!Le)return null;if(!es(Ie,Le.type))return ke.concat(2).error(`"${Ie}" comparisons are not supported for type '${bi(Le.type)}'.`);if($e.type.kind!==Le.type.kind&&$e.type.kind!=="value"&&Le.type.kind!=="value")return ke.error(`Cannot compare types '${bi($e.type)}' and '${bi(Le.type)}'.`);ee&&($e.type.kind==="value"&&Le.type.kind!=="value"?$e=new vo(Le.type,[$e]):$e.type.kind!=="value"&&Le.type.kind==="value"&&(Le=new vo($e.type,[Le])));let Ve=null;if(ge.length===4){if($e.type.kind!=="string"&&Le.type.kind!=="string"&&$e.type.kind!=="value"&&Le.type.kind!=="value")return ke.error("Cannot use collator to compare non-string types.");if(Ve=ke.parse(ge[3],3,As),!Ve)return null}return new em($e,Le,Ve)}evaluate(ge){const ke=this.lhs.evaluate(ge),Ie=this.rhs.evaluate(ge);if(ee&&this.hasUntypedArgument){const $e=Oi(ke),Le=Oi(Ie);if($e.kind!==Le.kind||$e.kind!=="string"&&$e.kind!=="number")throw new Ui(`Expected arguments for "${$}" to be (string, string) or (number, number), but found (${$e.kind}, ${Le.kind}) instead.`)}if(this.collator&&!ee&&this.hasUntypedArgument){const $e=Oi(ke),Le=Oi(Ie);if($e.kind!=="string"||Le.kind!=="string")return y(ge,ke,Ie)}return this.collator?I(ge,ke,Ie,this.collator.evaluate(ge)):y(ge,ke,Ie)}eachChild(ge){ge(this.lhs),ge(this.rhs),this.collator&&ge(this.collator)}outputDefined(){return!0}serialize(){const ge=[$];return this.eachChild(ke=>{ge.push(ke.serialize())}),ge}}}const sh=Pa("==",function($,y,I){return y===I},yc),uu=Pa("!=",function($,y,I){return y!==I},function($,y,I,ee){return!yc(0,y,I,ee)}),lh=Pa("<",function($,y,I){return y<I},function($,y,I,ee){return ee.compare(y,I)<0}),Pl=Pa(">",function($,y,I){return y>I},function($,y,I,ee){return ee.compare(y,I)>0}),hu=Pa("<=",function($,y,I){return y<=I},function($,y,I,ee){return ee.compare(y,I)<=0}),du=Pa(">=",function($,y,I){return y>=I},function($,y,I,ee){return ee.compare(y,I)>=0});class vc{constructor(y,I,ee,re,ge,ke){this.type=Or,this.number=y,this.locale=I,this.currency=ee,this.unit=re,this.minFractionDigits=ge,this.maxFractionDigits=ke}static parse(y,I){if(y.length!==3)return I.error("Expected two arguments.");const ee=I.parse(y[1],1,lr);if(!ee)return null;const re=y[2];if(typeof re!="object"||Array.isArray(re))return I.error("NumberFormat options argument must be an object.");let ge=null;if(re.locale&&(ge=I.parse(re.locale,1,Or),!ge))return null;let ke=null;if(re.currency&&(ke=I.parse(re.currency,1,Or),!ke))return null;let Ie=null;if(re.unit&&(Ie=I.parse(re.unit,1,Or),!Ie))return null;let $e=null;if(re["min-fraction-digits"]&&($e=I.parse(re["min-fraction-digits"],1,lr),!$e))return null;let Le=null;return re["max-fraction-digits"]&&(Le=I.parse(re["max-fraction-digits"],1,lr),!Le)?null:new vc(ee,ge,ke,Ie,$e,Le)}evaluate(y){return new Intl.NumberFormat(this.locale?this.locale.evaluate(y):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(y):void 0,unit:this.unit?this.unit.evaluate(y):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(y):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(y):void 0}).format(this.number.evaluate(y))}eachChild(y){y(this.number),this.locale&&y(this.locale),this.currency&&y(this.currency),this.unit&&y(this.unit),this.minFractionDigits&&y(this.minFractionDigits),this.maxFractionDigits&&y(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const y={};return this.locale&&(y.locale=this.locale.serialize()),this.currency&&(y.currency=this.currency.serialize()),this.unit&&(y.unit=this.unit.serialize()),this.minFractionDigits&&(y["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(y["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),y]}}class xc{constructor(y){this.type=lr,this.input=y}static parse(y,I){if(y.length!==2)return I.error(`Expected 1 argument, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1);return ee?ee.type.kind!=="array"&&ee.type.kind!=="string"&&ee.type.kind!=="value"?I.error(`Expected argument of type string or array, but found ${bi(ee.type)} instead.`):new xc(ee):null}evaluate(y){const I=this.input.evaluate(y);if(typeof I=="string"||Array.isArray(I))return I.length;throw new Ui(`Expected value to be of type string or array, but found ${bi(Oi(I))} instead.`)}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){const y=["length"];return this.eachChild(I=>{y.push(I.serialize())}),y}}const pu={"==":sh,"!=":uu,">":Pl,"<":lh,">=":du,"<=":hu,array:vo,at:su,boolean:vo,case:ah,coalesce:ou,collator:_l,format:Rs,image:fl,in:ih,"index-of":oh,interpolate:Go,"interpolate-hcl":Go,"interpolate-lab":Go,length:xc,let:au,literal:Is,match:lu,number:vo,"number-format":vc,object:vo,slice:cu,step:dc,string:vo,"to-boolean":ka,"to-color":ka,"to-number":ka,"to-string":ka,var:Ds,within:vl};function js($,[y,I,ee,re]){y=y.evaluate($),I=I.evaluate($),ee=ee.evaluate($);const ge=re?re.evaluate($):1,ke=ac(y,I,ee,ge);if(ke)throw new Ui(ke);return new ii(y/255*ge,I/255*ge,ee/255*ge,ge)}function bc($,y){return $ in y}function Ol($,y){const I=y[$];return I===void 0?null:I}function ea($){return{type:$}}lo.register(pu,{error:[{kind:"error"},[Or],($,[y])=>{throw new Ui(y.evaluate($))}],typeof:[Or,[Pr],($,[y])=>bi(Oi(y.evaluate($)))],"to-rgba":[_o(lr,4),[Oo],($,[y])=>y.evaluate($).toArray()],rgb:[Oo,[lr,lr,lr],js],rgba:[Oo,[lr,lr,lr,lr],js],has:{type:Nr,overloads:[[[Or],($,[y])=>bc(y.evaluate($),$.properties())],[[Or,Ro],($,[y,I])=>bc(y.evaluate($),I.evaluate($))]]},get:{type:Pr,overloads:[[[Or],($,[y])=>Ol(y.evaluate($),$.properties())],[[Or,Ro],($,[y,I])=>Ol(y.evaluate($),I.evaluate($))]]},"feature-state":[Pr,[Or],($,[y])=>Ol(y.evaluate($),$.featureState||{})],properties:[Ro,[],$=>$.properties()],"geometry-type":[Or,[],$=>$.geometryType()],id:[Pr,[],$=>$.id()],zoom:[lr,[],$=>$.globals.zoom],pitch:[lr,[],$=>$.globals.pitch||0],"distance-from-center":[lr,[],$=>$.distanceFromCenter()],"heatmap-density":[lr,[],$=>$.globals.heatmapDensity||0],"line-progress":[lr,[],$=>$.globals.lineProgress||0],"sky-radial-progress":[lr,[],$=>$.globals.skyRadialProgress||0],accumulated:[Pr,[],$=>$.globals.accumulated===void 0?null:$.globals.accumulated],"+":[lr,ea(lr),($,y)=>{let I=0;for(const ee of y)I+=ee.evaluate($);return I}],"*":[lr,ea(lr),($,y)=>{let I=1;for(const ee of y)I*=ee.evaluate($);return I}],"-":{type:lr,overloads:[[[lr,lr],($,[y,I])=>y.evaluate($)-I.evaluate($)],[[lr],($,[y])=>-y.evaluate($)]]},"/":[lr,[lr,lr],($,[y,I])=>y.evaluate($)/I.evaluate($)],"%":[lr,[lr,lr],($,[y,I])=>y.evaluate($)%I.evaluate($)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],($,[y,I])=>Math.pow(y.evaluate($),I.evaluate($))],sqrt:[lr,[lr],($,[y])=>Math.sqrt(y.evaluate($))],log10:[lr,[lr],($,[y])=>Math.log(y.evaluate($))/Math.LN10],ln:[lr,[lr],($,[y])=>Math.log(y.evaluate($))],log2:[lr,[lr],($,[y])=>Math.log(y.evaluate($))/Math.LN2],sin:[lr,[lr],($,[y])=>Math.sin(y.evaluate($))],cos:[lr,[lr],($,[y])=>Math.cos(y.evaluate($))],tan:[lr,[lr],($,[y])=>Math.tan(y.evaluate($))],asin:[lr,[lr],($,[y])=>Math.asin(y.evaluate($))],acos:[lr,[lr],($,[y])=>Math.acos(y.evaluate($))],atan:[lr,[lr],($,[y])=>Math.atan(y.evaluate($))],min:[lr,ea(lr),($,y)=>Math.min(...y.map(I=>I.evaluate($)))],max:[lr,ea(lr),($,y)=>Math.max(...y.map(I=>I.evaluate($)))],abs:[lr,[lr],($,[y])=>Math.abs(y.evaluate($))],round:[lr,[lr],($,[y])=>{const I=y.evaluate($);return I<0?-Math.round(-I):Math.round(I)}],floor:[lr,[lr],($,[y])=>Math.floor(y.evaluate($))],ceil:[lr,[lr],($,[y])=>Math.ceil(y.evaluate($))],"filter-==":[Nr,[Or,Pr],($,[y,I])=>$.properties()[y.value]===I.value],"filter-id-==":[Nr,[Pr],($,[y])=>$.id()===y.value],"filter-type-==":[Nr,[Or],($,[y])=>$.geometryType()===y.value],"filter-<":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee<re}],"filter-id-<":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I<ee}],"filter->":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee>re}],"filter-id->":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I>ee}],"filter-<=":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee<=re}],"filter-id-<=":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I<=ee}],"filter->=":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee>=re}],"filter-id->=":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I>=ee}],"filter-has":[Nr,[Pr],($,[y])=>y.value in $.properties()],"filter-has-id":[Nr,[],$=>$.id()!==null&&$.id()!==void 0],"filter-type-in":[Nr,[_o(Or)],($,[y])=>y.value.indexOf($.geometryType())>=0],"filter-id-in":[Nr,[_o(Pr)],($,[y])=>y.value.indexOf($.id())>=0],"filter-in-small":[Nr,[Or,_o(Pr)],($,[y,I])=>I.value.indexOf($.properties()[y.value])>=0],"filter-in-large":[Nr,[Or,_o(Pr)],($,[y,I])=>function(ee,re,ge,ke){for(;ge<=ke;){const Ie=ge+ke>>1;if(re[Ie]===ee)return!0;re[Ie]>ee?ke=Ie-1:ge=Ie+1}return!1}($.properties()[y.value],I.value,0,I.value.length-1)],all:{type:Nr,overloads:[[[Nr,Nr],($,[y,I])=>y.evaluate($)&&I.evaluate($)],[ea(Nr),($,y)=>{for(const I of y)if(!I.evaluate($))return!1;return!0}]]},any:{type:Nr,overloads:[[[Nr,Nr],($,[y,I])=>y.evaluate($)||I.evaluate($)],[ea(Nr),($,y)=>{for(const I of y)if(I.evaluate($))return!0;return!1}]]},"!":[Nr,[Nr],($,[y])=>!y.evaluate($)],"is-supported-script":[Nr,[Or],($,[y])=>{const I=$.globals&&$.globals.isSupportedScript;return!I||I(y.evaluate($))}],upcase:[Or,[Or],($,[y])=>y.evaluate($).toUpperCase()],downcase:[Or,[Or],($,[y])=>y.evaluate($).toLowerCase()],concat:[Or,ea(Pr),($,y)=>y.map(I=>Cs(I.evaluate($))).join("")],"resolved-locale":[Or,[As],($,[y])=>y.evaluate($).resolvedLocale()]});var Us=pu;function fu($){return{result:"success",value:$}}function Oa($){return{result:"error",value:$}}function ts($){return $["property-type"]==="data-driven"||$["property-type"]==="cross-faded-data-driven"}function _u($){return!!$.expression&&$.expression.parameters.indexOf("zoom")>-1}function wc($){return!!$.expression&&$.expression.interpolated}function Qr($){return $ instanceof Number?"number":$ instanceof String?"string":$ instanceof Boolean?"boolean":Array.isArray($)?"array":$===null?"null":typeof $}function Vs($){return typeof $=="object"&&$!==null&&!Array.isArray($)}function mu($){return $}function Gs($,y){const I=y.type==="color",ee=$.stops&&typeof $.stops[0][0]=="object",re=ee||!(ee||$.property!==void 0),ge=$.type||(wc(y)?"exponential":"interval");if(I&&(($=fo({},$)).stops&&($.stops=$.stops.map(Le=>[Le[0],ii.parse(Le[1])])),$.default=ii.parse($.default?$.default:y.default)),$.colorSpace&&$.colorSpace!=="rgb"&&!iu[$.colorSpace])throw new Error(`Unknown color space: ${$.colorSpace}`);let ke,Ie,$e;if(ge==="exponential")ke=Ec;else if(ge==="interval")ke=ga;else if(ge==="categorical"){ke=ch,Ie=Object.create(null);for(const Le of $.stops)Ie[Le[0]]=Le[1];$e=typeof $.stops[0][0]}else{if(ge!=="identity")throw new Error(`Unknown function type "${ge}"`);ke=ns}if(ee){const Le={},Ve=[];for(let tt=0;tt<$.stops.length;tt++){const ot=$.stops[tt],mt=ot[0].zoom;Le[mt]===void 0&&(Le[mt]={zoom:mt,type:$.type,property:$.property,default:$.default,stops:[]},Ve.push(mt)),Le[mt].stops.push([ot[0].value,ot[1]])}const We=[];for(const tt of Ve)We.push([Le[tt].zoom,Gs(Le[tt],y)]);const Ze={name:"linear"};return{kind:"composite",interpolationType:Ze,interpolationFactor:Go.interpolationFactor.bind(void 0,Ze),zoomStops:We.map(tt=>tt[0]),evaluate:({zoom:tt},ot)=>Ec({stops:We,base:$.base},y,tt).evaluate(tt,ot)}}if(re){const Le=ge==="exponential"?{name:"exponential",base:$.base!==void 0?$.base:1}:null;return{kind:"camera",interpolationType:Le,interpolationFactor:Go.interpolationFactor.bind(void 0,Le),zoomStops:$.stops.map(Ve=>Ve[0]),evaluate:({zoom:Ve})=>ke($,y,Ve,Ie,$e)}}return{kind:"source",evaluate(Le,Ve){const We=Ve&&Ve.properties?Ve.properties[$.property]:void 0;return We===void 0?qs($.default,y.default):ke($,y,We,Ie,$e)}}}function qs($,y,I){return $!==void 0?$:y!==void 0?y:I!==void 0?I:void 0}function ch($,y,I,ee,re){return qs(typeof I===re?ee[I]:void 0,$.default,y.default)}function ga($,y,I){if(Qr(I)!=="number")return qs($.default,y.default);const ee=$.stops.length;if(ee===1||I<=$.stops[0][0])return $.stops[0][1];if(I>=$.stops[ee-1][0])return $.stops[ee-1][1];const re=wl($.stops.map(ge=>ge[0]),I);return $.stops[re][1]}function Ec($,y,I){const ee=$.base!==void 0?$.base:1;if(Qr(I)!=="number")return qs($.default,y.default);const re=$.stops.length;if(re===1||I<=$.stops[0][0])return $.stops[0][1];if(I>=$.stops[re-1][0])return $.stops[re-1][1];const ge=wl($.stops.map(Ve=>Ve[0]),I),ke=function(Ve,We,Ze,tt){const ot=tt-Ze,mt=Ve-Ze;return ot===0?0:We===1?mt/ot:(Math.pow(We,mt)-1)/(Math.pow(We,ot)-1)}(I,ee,$.stops[ge][0],$.stops[ge+1][0]),Ie=$.stops[ge][1],$e=$.stops[ge+1][1];let Le=Ls[y.type]||mu;if($.colorSpace&&$.colorSpace!=="rgb"){const Ve=iu[$.colorSpace];Le=(We,Ze)=>Ve.reverse(Ve.interpolate(Ve.forward(We),Ve.forward(Ze),ke))}return typeof Ie.evaluate=="function"?{evaluate(...Ve){const We=Ie.evaluate.apply(void 0,Ve),Ze=$e.evaluate.apply(void 0,Ve);if(We!==void 0&&Ze!==void 0)return Le(We,Ze,ke)}}:Le(Ie,$e,ke)}function ns($,y,I){return y.type==="color"?I=ii.parse(I):y.type==="formatted"?I=ao.fromString(I.toString()):y.type==="resolvedImage"?I=so.fromString(I.toString()):Qr(I)===y.type||y.type==="enum"&&y.values[I]||(I=void 0),qs(I,$.default,y.default)}class Tc{constructor(y,I){this.expression=y,this._warningHistory={},this._evaluator=new Qc,this._defaultValue=I?function(ee){return ee.type==="color"&&(Vs(ee.default)||Array.isArray(ee.default))?new ii(0,0,0,0):ee.type==="color"?ii.parse(ee.default)||null:ee.default===void 0?null:ee.default}(I):null,this._enumValues=I&&I.type==="enum"?I.values:null}evaluateWithoutErrorHandling(y,I,ee,re,ge,ke,Ie,$e){return this._evaluator.globals=y,this._evaluator.feature=I,this._evaluator.featureState=ee,this._evaluator.canonical=re||null,this._evaluator.availableImages=ge||null,this._evaluator.formattedSection=ke,this._evaluator.featureTileCoord=Ie||null,this._evaluator.featureDistanceData=$e||null,this.expression.evaluate(this._evaluator)}evaluate(y,I,ee,re,ge,ke,Ie,$e){this._evaluator.globals=y,this._evaluator.feature=I||null,this._evaluator.featureState=ee||null,this._evaluator.canonical=re||null,this._evaluator.availableImages=ge||null,this._evaluator.formattedSection=ke||null,this._evaluator.featureTileCoord=Ie||null,this._evaluator.featureDistanceData=$e||null;try{const Le=this.expression.evaluate(this._evaluator);if(Le==null||typeof Le=="number"&&Le!=Le)return this._defaultValue;if(this._enumValues&&!(Le in this._enumValues))throw new Ui(`Expected value to be one of ${Object.keys(this._enumValues).map(Ve=>JSON.stringify(Ve)).join(", ")}, but found ${JSON.stringify(Le)} instead.`);return Le}catch(Le){return this._warningHistory[Le.message]||(this._warningHistory[Le.message]=!0,typeof console!="undefined"&&console.warn(Le.message)),this._defaultValue}}}function Rl($){return Array.isArray($)&&$.length>0&&typeof $[0]=="string"&&$[0]in Us}function rs($,y){const I=new Ma(Us,[],y?function(re){const ge={color:Oo,string:Or,number:lr,enum:Or,boolean:Nr,formatted:ha,resolvedImage:ks};return re.type==="array"?_o(ge[re.value]||Pr,re.length):ge[re.type]}(y):void 0),ee=I.parse($,void 0,void 0,void 0,y&&y.type==="string"?{typeAnnotation:"coerce"}:void 0);return ee?fu(new Tc(ee,y)):Oa(I.errors)}class Ac{constructor(y,I){this.kind=y,this._styleExpression=I,this.isStateDependent=y!=="constant"&&!_a(I.expression)}evaluateWithoutErrorHandling(y,I,ee,re,ge,ke){return this._styleExpression.evaluateWithoutErrorHandling(y,I,ee,re,ge,ke)}evaluate(y,I,ee,re,ge,ke){return this._styleExpression.evaluate(y,I,ee,re,ge,ke)}}class Hs{constructor(y,I,ee,re){this.kind=y,this.zoomStops=ee,this._styleExpression=I,this.isStateDependent=y!=="camera"&&!_a(I.expression),this.interpolationType=re}evaluateWithoutErrorHandling(y,I,ee,re,ge,ke){return this._styleExpression.evaluateWithoutErrorHandling(y,I,ee,re,ge,ke)}evaluate(y,I,ee,re,ge,ke){return this._styleExpression.evaluate(y,I,ee,re,ge,ke)}interpolationFactor(y,I,ee){return this.interpolationType?Go.interpolationFactor(this.interpolationType,y,I,ee):0}}function kc($,y){if(($=rs($,y)).result==="error")return $;const I=$.value.expression,ee=jo(I);if(!ee&&!ts(y))return Oa([new Po("","data expressions not supported")]);const re=Uo(I,["zoom","pitch","distance-from-center"]);if(!re&&!_u(y))return Oa([new Po("","zoom expressions not supported")]);const ge=os(I);return ge||re?ge instanceof Po?Oa([ge]):ge instanceof Go&&!wc(y)?Oa([new Po("",'"interpolate" expressions cannot be used with this property')]):fu(ge?new Hs(ee?"camera":"composite",$.value,ge.labels,ge instanceof Go?ge.interpolation:void 0):new Ac(ee?"constant":"source",$.value)):Oa([new Po("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class is{constructor(y,I){this._parameters=y,this._specification=I,fo(this,Gs(this._parameters,this._specification))}static deserialize(y){return new is(y._parameters,y._specification)}static serialize(y){return{_parameters:y._parameters,_specification:y._specification}}}function os($){let y=null;if($ instanceof au)y=os($.result);else if($ instanceof ou){for(const I of $.args)if(y=os(I),y)break}else($ instanceof dc||$ instanceof Go)&&$.input instanceof lo&&$.input.name==="zoom"&&(y=$);return y instanceof Po||$.eachChild(I=>{const ee=os(I);ee instanceof Po?y=ee:!y&&ee?y=new Po("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):y&&ee&&y!==ee&&(y=new Po("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),y}class cr{constructor(y,I,ee,re){this.message=(y?`${y}: `:"")+ee,re&&(this.identifier=re),I!=null&&I.__line__&&(this.line=I.__line__)}}function co($){const y=$.key,I=$.value,ee=$.valueSpec||{},re=$.objectElementValidators||{},ge=$.style,ke=$.styleSpec;let Ie=[];const $e=Qr(I);if($e!=="object")return[new cr(y,I,`object expected, ${$e} found`)];for(const Le in I){const Ve=Le.split(".")[0],We=ee[Ve]||ee["*"];let Ze;re[Ve]?Ze=re[Ve]:ee[Ve]?Ze=qi:re["*"]?Ze=re["*"]:ee["*"]&&(Ze=qi),Ze?Ie=Ie.concat(Ze({key:(y&&`${y}.`)+Le,value:I[Le],valueSpec:We,style:ge,styleSpec:ke,object:I,objectKey:Le},I)):Ie.push(new cr(y,I[Le],`unknown property "${Le}"`))}for(const Le in ee)re[Le]||ee[Le].required&&ee[Le].default===void 0&&I[Le]===void 0&&Ie.push(new cr(y,I,`missing required property "${Le}"`));return Ie}function Sc($){const y=$.value,I=$.valueSpec,ee=$.style,re=$.styleSpec,ge=$.key,ke=$.arrayElementValidator||qi;if(Qr(y)!=="array")return[new cr(ge,y,`array expected, ${Qr(y)} found`)];if(I.length&&y.length!==I.length)return[new cr(ge,y,`array length ${I.length} expected, length ${y.length} found`)];if(I["min-length"]&&y.length<I["min-length"])return[new cr(ge,y,`array length at least ${I["min-length"]} expected, length ${y.length} found`)];let Ie={type:I.value,values:I.values,minimum:I.minimum,maximum:I.maximum,function:void 0};re.$version<7&&(Ie.function=I.function),Qr(I.value)==="object"&&(Ie=I.value);let $e=[];for(let Le=0;Le<y.length;Le++)$e=$e.concat(ke({array:y,arrayIndex:Le,value:y[Le],valueSpec:Ie,style:ee,styleSpec:re,key:`${ge}[${Le}]`}));return $e}function Cc($){const y=$.key,I=$.value,ee=$.valueSpec;let re=Qr(I);if(re==="number"&&I!=I&&(re="NaN"),re!=="number")return[new cr(y,I,`number expected, ${re} found`)];if("minimum"in ee){let ge=ee.minimum;if(Qr(ee.minimum)==="array"&&(ge=ee.minimum[$.arrayIndex]),I<ge)return[new cr(y,I,`${I} is less than the minimum value ${ge}`)]}if("maximum"in ee){let ge=ee.maximum;if(Qr(ee.maximum)==="array"&&(ge=ee.maximum[$.arrayIndex]),I>ge)return[new cr(y,I,`${I} is greater than the maximum value ${ge}`)]}return[]}function Ws($){const y=$.valueSpec,I=ki($.value.type);let ee,re,ge,ke={};const Ie=I!=="categorical"&&$.value.property===void 0,$e=!Ie,Le=Qr($.value.stops)==="array"&&Qr($.value.stops[0])==="array"&&Qr($.value.stops[0][0])==="object",Ve=co({key:$.key,value:$.value,valueSpec:$.styleSpec.function,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{stops:function(tt){if(I==="identity")return[new cr(tt.key,tt.value,'identity function may not have a "stops" property')];let ot=[];const mt=tt.value;return ot=ot.concat(Sc({key:tt.key,value:mt,valueSpec:tt.valueSpec,style:tt.style,styleSpec:tt.styleSpec,arrayElementValidator:We})),Qr(mt)==="array"&&mt.length===0&&ot.push(new cr(tt.key,mt,"array must have at least one stop")),ot},default:function(tt){return qi({key:tt.key,value:tt.value,valueSpec:y,style:tt.style,styleSpec:tt.styleSpec})}}});return I==="identity"&&Ie&&Ve.push(new cr($.key,$.value,'missing required property "property"')),I==="identity"||$.value.stops||Ve.push(new cr($.key,$.value,'missing required property "stops"')),I==="exponential"&&$.valueSpec.expression&&!wc($.valueSpec)&&Ve.push(new cr($.key,$.value,"exponential functions not supported")),$.styleSpec.$version>=8&&($e&&!ts($.valueSpec)?Ve.push(new cr($.key,$.value,"property functions not supported")):Ie&&!_u($.valueSpec)&&Ve.push(new cr($.key,$.value,"zoom functions not supported"))),I!=="categorical"&&!Le||$.value.property!==void 0||Ve.push(new cr($.key,$.value,'"property" property is required')),Ve;function We(tt){let ot=[];const mt=tt.value,Tt=tt.key;if(Qr(mt)!=="array")return[new cr(Tt,mt,`array expected, ${Qr(mt)} found`)];if(mt.length!==2)return[new cr(Tt,mt,`array length 2 expected, length ${mt.length} found`)];if(Le){if(Qr(mt[0])!=="object")return[new cr(Tt,mt,`object expected, ${Qr(mt[0])} found`)];if(mt[0].zoom===void 0)return[new cr(Tt,mt,"object stop key must have zoom")];if(mt[0].value===void 0)return[new cr(Tt,mt,"object stop key must have value")];const Ft=ki(mt[0].zoom);if(typeof Ft!="number")return[new cr(Tt,mt[0].zoom,"stop zoom values must be numbers")];if(ge&&ge>Ft)return[new cr(Tt,mt[0].zoom,"stop zoom values must appear in ascending order")];Ft!==ge&&(ge=Ft,re=void 0,ke={}),ot=ot.concat(co({key:`${Tt}[0]`,value:mt[0],valueSpec:{zoom:{}},style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{zoom:Cc,value:Ze}}))}else ot=ot.concat(Ze({key:`${Tt}[0]`,value:mt[0],valueSpec:{},style:tt.style,styleSpec:tt.styleSpec},mt));return Rl(ca(mt[1]))?ot.concat([new cr(`${Tt}[1]`,mt[1],"expressions are not allowed in function stops.")]):ot.concat(qi({key:`${Tt}[1]`,value:mt[1],valueSpec:y,style:tt.style,styleSpec:tt.styleSpec}))}function Ze(tt,ot){const mt=Qr(tt.value),Tt=ki(tt.value),Ft=tt.value!==null?tt.value:ot;if(ee){if(mt!==ee)return[new cr(tt.key,Ft,`${mt} stop domain type must match previous stop domain type ${ee}`)]}else ee=mt;if(mt!=="number"&&mt!=="string"&&mt!=="boolean"&&typeof Tt!="number"&&typeof Tt!="string"&&typeof Tt!="boolean")return[new cr(tt.key,Ft,"stop domain value must be a number, string, or boolean")];if(mt!=="number"&&I!=="categorical"){let Ht=`number expected, ${mt} found`;return ts(y)&&I===void 0&&(Ht+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new cr(tt.key,Ft,Ht)]}return I!=="categorical"||mt!=="number"||typeof Tt=="number"&&isFinite(Tt)&&Math.floor(Tt)===Tt?I!=="categorical"&&mt==="number"&&typeof Tt=="number"&&typeof re=="number"&&re!==void 0&&Tt<re?[new cr(tt.key,Ft,"stop domain values must appear in ascending order")]:(re=Tt,I==="categorical"&&Tt in ke?[new cr(tt.key,Ft,"stop domain values must be unique")]:(ke[Tt]=!0,[])):[new cr(tt.key,Ft,`integer expected, found ${String(Tt)}`)]}}function bo($){const y=($.expressionContext==="property"?kc:rs)(ca($.value),$.valueSpec);if(y.result==="error")return y.value.map(ee=>new cr(`${$.key}${ee.key}`,$.value,ee.message));const I=y.value.expression||y.value._styleExpression.expression;if($.expressionContext==="property"&&$.propertyKey==="text-font"&&!I.outputDefined())return[new cr($.key,$.value,`Invalid data expression for "${$.propertyKey}". Output values must be contained as literals within the expression.`)];if($.expressionContext==="property"&&$.propertyType==="layout"&&!_a(I))return[new cr($.key,$.value,'"feature-state" data expressions are not supported with layout properties.')];if($.expressionContext==="filter")return Mc(I,$);if($.expressionContext&&$.expressionContext.indexOf("cluster")===0){if(!Uo(I,["zoom","feature-state"]))return[new cr($.key,$.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if($.expressionContext==="cluster-initial"&&!jo(I))return[new cr($.key,$.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mc($,y){const I=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(y.valueSpec&&y.valueSpec.expression)for(const re of y.valueSpec.expression.parameters)I.delete(re);if(I.size===0)return[];const ee=[];return $ instanceof lo&&I.has($.name)?[new cr(y.key,y.value,`["${$.name}"] expression is not supported in a filter for a ${y.object.type} layer with id: ${y.object.id}`)]:($.eachChild(re=>{ee.push(...Mc(re,y))}),ee)}function Zs($){const y=$.key,I=$.value,ee=$.valueSpec,re=[];return Array.isArray(ee.values)?ee.values.indexOf(ki(I))===-1&&re.push(new cr(y,I,`expected one of [${ee.values.join(", ")}], ${JSON.stringify(I)} found`)):Object.keys(ee.values).indexOf(ki(I))===-1&&re.push(new cr(y,I,`expected one of [${Object.keys(ee.values).join(", ")}], ${JSON.stringify(I)} found`)),re}function Xs($){if($===!0||$===!1)return!0;if(!Array.isArray($)||$.length===0)return!1;switch($[0]){case"has":return $.length>=2&&$[1]!=="$id"&&$[1]!=="$type";case"in":return $.length>=3&&(typeof $[1]!="string"||Array.isArray($[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return $.length!==3||Array.isArray($[1])||Array.isArray($[2]);case"any":case"all":for(const y of $.slice(1))if(!Xs(y)&&typeof y!="boolean")return!1;return!0;default:return!0}}function Ks($,y="fill"){if($==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Xs($)||($=$l($));const I=$;let ee=!0;try{ee=function(Le){if(!ta(Le))return Le;let Ve=ca(Le);return zl(Ve),Ve=gu(Ve),Ve}(I)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(I,null,2)}
        `)}const re=gn[`filter_${y}`],ge=rs(ee,re);let ke=null;if(ge.result==="error")throw new Error(ge.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));ke=(Le,Ve,We)=>ge.value.evaluate(Le,Ve,{},We);let Ie=null,$e=null;if(ee!==I){const Le=rs(I,re);if(Le.result==="error")throw new Error(Le.value.map(Ve=>`${Ve.key}: ${Ve.message}`).join(", "));Ie=(Ve,We,Ze,tt,ot)=>Le.value.evaluate(Ve,We,{},Ze,void 0,void 0,tt,ot),$e=!jo(Le.value.expression)}return ke=ke,{filter:ke,dynamicFilter:Ie||void 0,needGeometry:as(ee),needFeature:!!$e}}function gu($){if(!Array.isArray($))return $;const y=function(I){if(uh.has(I[0])){for(let ee=1;ee<I.length;ee++)if(ta(I[ee]))return!0}return I}($);return y===!0?y:y.map(I=>gu(I))}function zl($){let y=!1;const I=[];if($[0]==="case"){for(let ee=1;ee<$.length-1;ee+=2)y=y||ta($[ee]),I.push($[ee+1]);I.push($[$.length-1])}else if($[0]==="match"){y=y||ta($[1]);for(let ee=2;ee<$.length-1;ee+=2)I.push($[ee+1]);I.push($[$.length-1])}else if($[0]==="step"){y=y||ta($[1]);for(let ee=1;ee<$.length-1;ee+=2)I.push($[ee+1])}y&&($.length=0,$.push("any",...I));for(let ee=1;ee<$.length;ee++)zl($[ee])}function ta($){if(!Array.isArray($))return!1;if((y=$[0])==="pitch"||y==="distance-from-center")return!0;var y;for(let I=1;I<$.length;I++)if(ta($[I]))return!0;return!1}const uh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function hh($,y){return $<y?-1:$>y?1:0}function as($){if(!Array.isArray($))return!1;if($[0]==="within")return!0;for(let y=1;y<$.length;y++)if(as($[y]))return!0;return!1}function $l($){if(!$)return!0;const y=$[0];return $.length<=1?y!=="any":y==="=="?Ic($[1],$[2],"=="):y==="!="?Ki(Ic($[1],$[2],"==")):y==="<"||y===">"||y==="<="||y===">="?Ic($[1],$[2],y):y==="any"?(I=$.slice(1),["any"].concat(I.map($l))):y==="all"?["all"].concat($.slice(1).map($l)):y==="none"?["all"].concat($.slice(1).map($l).map(Ki)):y==="in"?Ys($[1],$.slice(2)):y==="!in"?Ki(Ys($[1],$.slice(2))):y==="has"?Js($[1]):y==="!has"?Ki(Js($[1])):y!=="within"||$;var I}function Ic($,y,I){switch($){case"$type":return[`filter-type-${I}`,y];case"$id":return[`filter-id-${I}`,y];default:return[`filter-${I}`,$,y]}}function Ys($,y){if(y.length===0)return!1;switch($){case"$type":return["filter-type-in",["literal",y]];case"$id":return["filter-id-in",["literal",y]];default:return y.length>200&&!y.some(I=>typeof I!=typeof y[0])?["filter-in-large",$,["literal",y.sort(hh)]]:["filter-in-small",$,["literal",y]]}}function Js($){switch($){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",$]}}function Ki($){return["!",$]}function Ra($){return Xs(ca($.value))?bo(fo({},$,{expressionContext:"filter",valueSpec:$.styleSpec[`filter_${$.layerType||"fill"}`]})):yu($)}function yu($){const y=$.value,I=$.key;if(Qr(y)!=="array")return[new cr(I,y,`array expected, ${Qr(y)} found`)];const ee=$.styleSpec;let re,ge=[];if(y.length<1)return[new cr(I,y,"filter array must have at least 1 element")];switch(ge=ge.concat(Zs({key:`${I}[0]`,value:y[0],valueSpec:ee.filter_operator,style:$.style,styleSpec:$.styleSpec})),ki(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&ki(y[1])==="$type"&&ge.push(new cr(I,y,`"$type" cannot be use with operator "${y[0]}"`));case"==":case"!=":y.length!==3&&ge.push(new cr(I,y,`filter array for operator "${y[0]}" must have 3 elements`));case"in":case"!in":y.length>=2&&(re=Qr(y[1]),re!=="string"&&ge.push(new cr(`${I}[1]`,y[1],`string expected, ${re} found`)));for(let ke=2;ke<y.length;ke++)re=Qr(y[ke]),ki(y[1])==="$type"?ge=ge.concat(Zs({key:`${I}[${ke}]`,value:y[ke],valueSpec:ee.geometry_type,style:$.style,styleSpec:$.styleSpec})):re!=="string"&&re!=="number"&&re!=="boolean"&&ge.push(new cr(`${I}[${ke}]`,y[ke],`string, number, or boolean expected, ${re} found`));break;case"any":case"all":case"none":for(let ke=1;ke<y.length;ke++)ge=ge.concat(yu({key:`${I}[${ke}]`,value:y[ke],style:$.style,styleSpec:$.styleSpec}));break;case"has":case"!has":re=Qr(y[1]),y.length!==2?ge.push(new cr(I,y,`filter array for "${y[0]}" operator must have 2 elements`)):re!=="string"&&ge.push(new cr(`${I}[1]`,y[1],`string expected, ${re} found`));break;case"within":re=Qr(y[1]),y.length!==2?ge.push(new cr(I,y,`filter array for "${y[0]}" operator must have 2 elements`)):re!=="object"&&ge.push(new cr(`${I}[1]`,y[1],`object expected, ${re} found`))}return ge}function Qs($,y){const I=$.key,ee=$.style,re=$.styleSpec,ge=$.value,ke=$.objectKey,Ie=re[`${y}_${$.layerType}`];if(!Ie)return[];const $e=ke.match(/^(.*)-transition$/);if(y==="paint"&&$e&&Ie[$e[1]]&&Ie[$e[1]].transition)return qi({key:I,value:ge,valueSpec:re.transition,style:ee,styleSpec:re});const Le=$.valueSpec||Ie[ke];if(!Le)return[new cr(I,ge,`unknown property "${ke}"`)];let Ve;if(Qr(ge)==="string"&&ts(Le)&&!Le.tokens&&(Ve=/^{([^}]+)}$/.exec(ge)))return[new cr(I,ge,`"${ke}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ve[1])} }\`.`)];const We=[];return $.layerType==="symbol"&&(ke==="text-field"&&ee&&!ee.glyphs&&We.push(new cr(I,ge,'use of "text-field" requires a style "glyphs" property')),ke==="text-font"&&Vs(ca(ge))&&ki(ge.type)==="identity"&&We.push(new cr(I,ge,'"text-font" does not support identity functions'))),We.concat(qi({key:$.key,value:ge,valueSpec:Le,style:ee,styleSpec:re,expressionContext:"property",propertyType:y,propertyKey:ke}))}function vu($){return Qs($,"paint")}function xu($){return Qs($,"layout")}function Dl($){let y=[];const I=$.value,ee=$.key,re=$.style,ge=$.styleSpec;I.type||I.ref||y.push(new cr(ee,I,'either "type" or "ref" is required'));let ke=ki(I.type);const Ie=ki(I.ref);if(I.id){const $e=ki(I.id);for(let Le=0;Le<$.arrayIndex;Le++){const Ve=re.layers[Le];ki(Ve.id)===$e&&y.push(new cr(ee,I.id,`duplicate layer id "${I.id}", previously used at line ${Ve.id.__line__}`))}}if("ref"in I){let $e;["type","source","source-layer","filter","layout"].forEach(Le=>{Le in I&&y.push(new cr(ee,I[Le],`"${Le}" is prohibited for ref layers`))}),re.layers.forEach(Le=>{ki(Le.id)===Ie&&($e=Le)}),$e?$e.ref?y.push(new cr(ee,I.ref,"ref cannot reference another ref layer")):ke=ki($e.type):typeof Ie=="string"&&y.push(new cr(ee,I.ref,`ref layer "${Ie}" not found`))}else if(ke!=="background"&&ke!=="sky")if(I.source){const $e=re.sources&&re.sources[I.source],Le=$e&&ki($e.type);$e?Le==="vector"&&ke==="raster"?y.push(new cr(ee,I.source,`layer "${I.id}" requires a raster source`)):Le==="raster"&&ke!=="raster"?y.push(new cr(ee,I.source,`layer "${I.id}" requires a vector source`)):Le!=="vector"||I["source-layer"]?Le==="raster-dem"&&ke!=="hillshade"?y.push(new cr(ee,I.source,"raster-dem source can only be used with layer type 'hillshade'.")):ke!=="line"||!I.paint||!I.paint["line-gradient"]&&!I.paint["line-trim-offset"]||Le==="geojson"&&$e.lineMetrics||y.push(new cr(ee,I,`layer "${I.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):y.push(new cr(ee,I,`layer "${I.id}" must specify a "source-layer"`)):y.push(new cr(ee,I.source,`source "${I.source}" not found`))}else y.push(new cr(ee,I,'missing required property "source"'));return y=y.concat(co({key:ee,value:I,valueSpec:ge.layer,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":()=>[],type:()=>qi({key:`${ee}.type`,value:I.type,valueSpec:ge.layer.type,style:$.style,styleSpec:$.styleSpec,object:I,objectKey:"type"}),filter:$e=>Ra(fo({layerType:ke},$e)),layout:$e=>co({layer:I,key:$e.key,value:$e.value,valueSpec:{},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":Le=>xu(fo({layerType:ke},Le))}}),paint:$e=>co({layer:I,key:$e.key,value:$e.value,valueSpec:{},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":Le=>vu(fo({layerType:ke},Le))}})}})),y}function ss($){const y=$.value,I=$.key,ee=Qr(y);return ee!=="string"?[new cr(I,y,`string expected, ${ee} found`)]:[]}const Ll={promoteId:function({key:$,value:y}){if(Qr(y)==="string")return ss({key:$,value:y});{const I=[];for(const ee in y)I.push(...ss({key:`${$}.${ee}`,value:y[ee]}));return I}}};function bu($){const y=$.value,I=$.key,ee=$.styleSpec,re=$.style;if(!y.type)return[new cr(I,y,'"type" is required')];const ge=ki(y.type);let ke;switch(ge){case"vector":case"raster":case"raster-dem":return ke=co({key:I,value:y,valueSpec:ee[`source_${ge.replace("-","_")}`],style:$.style,styleSpec:ee,objectElementValidators:Ll}),ke;case"geojson":if(ke=co({key:I,value:y,valueSpec:ee.source_geojson,style:re,styleSpec:ee,objectElementValidators:Ll}),y.cluster)for(const Ie in y.clusterProperties){const[$e,Le]=y.clusterProperties[Ie],Ve=typeof $e=="string"?[$e,["accumulated"],["get",Ie]]:$e;ke.push(...bo({key:`${I}.${Ie}.map`,value:Le,expressionContext:"cluster-map"})),ke.push(...bo({key:`${I}.${Ie}.reduce`,value:Ve,expressionContext:"cluster-reduce"}))}return ke;case"video":return co({key:I,value:y,valueSpec:ee.source_video,style:re,styleSpec:ee});case"image":return co({key:I,value:y,valueSpec:ee.source_image,style:re,styleSpec:ee});case"canvas":return[new cr(I,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zs({key:`${I}.type`,value:y.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:re,styleSpec:ee})}}function wu($){const y=$.value,I=$.styleSpec,ee=I.light,re=$.style;let ge=[];const ke=Qr(y);if(y===void 0)return ge;if(ke!=="object")return ge=ge.concat([new cr("light",y,`object expected, ${ke} found`)]),ge;for(const Ie in y){const $e=Ie.match(/^(.*)-transition$/);ge=ge.concat($e&&ee[$e[1]]&&ee[$e[1]].transition?qi({key:Ie,value:y[Ie],valueSpec:I.transition,style:re,styleSpec:I}):ee[Ie]?qi({key:Ie,value:y[Ie],valueSpec:ee[Ie],style:re,styleSpec:I}):[new cr(Ie,y[Ie],`unknown property "${Ie}"`)])}return ge}function ls($){const y=$.value,I=$.key,ee=$.style,re=$.styleSpec,ge=re.terrain;let ke=[];const Ie=Qr(y);if(y===void 0)return ke;if(Ie!=="object")return ke=ke.concat([new cr("terrain",y,`object expected, ${Ie} found`)]),ke;for(const $e in y){const Le=$e.match(/^(.*)-transition$/);ke=ke.concat(Le&&ge[Le[1]]&&ge[Le[1]].transition?qi({key:$e,value:y[$e],valueSpec:re.transition,style:ee,styleSpec:re}):ge[$e]?qi({key:$e,value:y[$e],valueSpec:ge[$e],style:ee,styleSpec:re}):[new cr($e,y[$e],`unknown property "${$e}"`)])}if(y.source){const $e=ee.sources&&ee.sources[y.source],Le=$e&&ki($e.type);$e?Le!=="raster-dem"&&ke.push(new cr(I,y.source,`terrain cannot be used with a source of type ${String(Le)}, it only be used with a "raster-dem" source type`)):ke.push(new cr(I,y.source,`source "${y.source}" not found`))}else ke.push(new cr(I,y,'terrain is missing required property "source"'));return ke}function Eu($){const y=$.value,I=$.style,ee=$.styleSpec,re=ee.fog;let ge=[];const ke=Qr(y);if(y===void 0)return ge;if(ke!=="object")return ge=ge.concat([new cr("fog",y,`object expected, ${ke} found`)]),ge;for(const Ie in y){const $e=Ie.match(/^(.*)-transition$/);ge=ge.concat($e&&re[$e[1]]&&re[$e[1]].transition?qi({key:Ie,value:y[Ie],valueSpec:ee.transition,style:I,styleSpec:ee}):re[Ie]?qi({key:Ie,value:y[Ie],valueSpec:re[Ie],style:I,styleSpec:ee}):[new cr(Ie,y[Ie],`unknown property "${Ie}"`)])}return ge}const na={"*":()=>[],array:Sc,boolean:function($){const y=$.value,I=$.key,ee=Qr(y);return ee!=="boolean"?[new cr(I,y,`boolean expected, ${ee} found`)]:[]},number:Cc,color:function($){const y=$.key,I=$.value,ee=Qr(I);return ee!=="string"?[new cr(y,I,`color expected, ${ee} found`)]:pa.parseCSSColor(I)===null?[new cr(y,I,`color expected, "${I}" found`)]:[]},enum:Zs,filter:Ra,function:Ws,layer:Dl,object:co,source:bu,light:wu,terrain:ls,fog:Eu,string:ss,formatted:function($){return ss($).length===0?[]:bo($)},resolvedImage:function($){return ss($).length===0?[]:bo($)},projection:function($){const y=$.value,I=$.styleSpec,ee=I.projection,re=$.style;let ge=[];const ke=Qr(y);if(ke==="object")for(const Ie in y)ge=ge.concat(qi({key:Ie,value:y[Ie],valueSpec:ee[Ie],style:re,styleSpec:I}));else ke!=="string"&&(ge=ge.concat([new cr("projection",y,`object or string expected, ${ke} found`)]));return ge}};function qi($){const y=$.value,I=$.valueSpec,ee=$.styleSpec;return I.expression&&Vs(ki(y))?Ws($):I.expression&&Rl(ca(y))?bo($):I.type&&na[I.type]?na[I.type]($):co(fo({},$,{valueSpec:I.type?ee[I.type]:I}))}function dh($){const y=$.value,I=$.key,ee=ss($);return ee.length||(y.indexOf("{fontstack}")===-1&&ee.push(new cr(I,y,'"glyphs" url must include a "{fontstack}" token')),y.indexOf("{range}")===-1&&ee.push(new cr(I,y,'"glyphs" url must include a "{range}" token'))),ee}function Bl($,y=gn){return wo(qi({key:"",value:$,valueSpec:y.$root,styleSpec:y,style:$,objectElementValidators:{glyphs:dh,"*":()=>[]}}))}const Fl=$=>wo(vu($)),Tu=$=>wo(xu($));function wo($){return $.slice().sort((y,I)=>y.line&&I.line?y.line-I.line:0)}function Pc($,y){let I=!1;if(y&&y.length)for(const ee of y)$.fire(new ni(new Error(ee.message))),I=!0;return I}var za=Eo;function Eo($,y,I){var ee=this.cells=[];if($ instanceof ArrayBuffer){this.arrayBuffer=$;var re=new Int32Array(this.arrayBuffer);$=re[0],this.d=(y=re[1])+2*(I=re[2]);for(var ge=0;ge<this.d*this.d;ge++){var ke=re[3+ge],Ie=re[3+ge+1];ee.push(ke===Ie?null:re.subarray(ke,Ie))}var $e=re[3+ee.length+1];this.keys=re.subarray(re[3+ee.length],$e),this.bboxes=re.subarray($e),this.insert=this._insertReadonly}else{this.d=y+2*I;for(var Le=0;Le<this.d*this.d;Le++)ee.push([]);this.keys=[],this.bboxes=[]}this.n=y,this.extent=$,this.padding=I,this.scale=y/$,this.uid=0;var Ve=I/y*$;this.min=-Ve,this.max=$+Ve}Eo.prototype.insert=function($,y,I,ee,re){this._forEachCell(y,I,ee,re,this._insertCell,this.uid++),this.keys.push($),this.bboxes.push(y),this.bboxes.push(I),this.bboxes.push(ee),this.bboxes.push(re)},Eo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Eo.prototype._insertCell=function($,y,I,ee,re,ge){this.cells[re].push(ge)},Eo.prototype.query=function($,y,I,ee,re){var ge=this.min,ke=this.max;if($<=ge&&y<=ge&&ke<=I&&ke<=ee&&!re)return Array.prototype.slice.call(this.keys);var Ie=[];return this._forEachCell($,y,I,ee,this._queryCell,Ie,{},re),Ie},Eo.prototype._queryCell=function($,y,I,ee,re,ge,ke,Ie){var $e=this.cells[re];if($e!==null)for(var Le=this.keys,Ve=this.bboxes,We=0;We<$e.length;We++){var Ze=$e[We];if(ke[Ze]===void 0){var tt=4*Ze;(Ie?Ie(Ve[tt+0],Ve[tt+1],Ve[tt+2],Ve[tt+3]):$<=Ve[tt+2]&&y<=Ve[tt+3]&&I>=Ve[tt+0]&&ee>=Ve[tt+1])?(ke[Ze]=!0,ge.push(Le[Ze])):ke[Ze]=!1}}},Eo.prototype._forEachCell=function($,y,I,ee,re,ge,ke,Ie){for(var $e=this._convertToCellCoord($),Le=this._convertToCellCoord(y),Ve=this._convertToCellCoord(I),We=this._convertToCellCoord(ee),Ze=$e;Ze<=Ve;Ze++)for(var tt=Le;tt<=We;tt++){var ot=this.d*tt+Ze;if((!Ie||Ie(this._convertFromCellCoord(Ze),this._convertFromCellCoord(tt),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(tt+1)))&&re.call(this,$,y,I,ee,ot,ge,ke,Ie))return}},Eo.prototype._convertFromCellCoord=function($){return($-this.padding)/this.scale},Eo.prototype._convertToCellCoord=function($){return Math.max(0,Math.min(this.d-1,Math.floor($*this.scale)+this.padding))},Eo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var $=this.cells,y=3+this.cells.length+1+1,I=0,ee=0;ee<this.cells.length;ee++)I+=this.cells[ee].length;var re=new Int32Array(y+I+this.keys.length+this.bboxes.length);re[0]=this.extent,re[1]=this.n,re[2]=this.padding;for(var ge=y,ke=0;ke<$.length;ke++){var Ie=$[ke];re[3+ke]=ge,re.set(Ie,ge),ge+=Ie.length}return re[3+$.length]=ge,re.set(this.keys,ge),re[3+$.length+1]=ge+=this.keys.length,re.set(this.bboxes,ge),ge+=this.bboxes.length,re.buffer};const ra={};function ur($,y,I={}){Object.defineProperty($,"_classRegistryKey",{value:y,writeable:!1}),ra[y]={klass:$,omit:I.omit||[]}}ur(Object,"Object"),za.serialize=function($,y){const I=$.toArrayBuffer();return y&&y.push(I),{buffer:I}},za.deserialize=function($){return new za($.buffer)},Object.defineProperty(za,"name",{value:"Grid"}),ur(za,"Grid"),ur(ii,"Color"),ur(Error,"Error"),ur(fn,"AJAXError"),ur(so,"ResolvedImage"),ur(is,"StylePropertyFunction"),ur(Tc,"StyleExpression",{omit:["_evaluator"]}),ur(Hs,"ZoomDependentExpression"),ur(Ac,"ZoomConstantExpression"),ur(lo,"CompoundExpression",{omit:["_evaluate"]});for(const $ in Us)ra[Us[$]._classRegistryKey]||ur(Us[$],`Expression${$}`);function cs($){return $&&typeof ArrayBuffer!="undefined"&&($ instanceof ArrayBuffer||$.constructor&&$.constructor.name==="ArrayBuffer")}function Au($){return we.ImageBitmap&&$ instanceof we.ImageBitmap}function us($,y){if($==null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||$ instanceof Boolean||$ instanceof Number||$ instanceof String||$ instanceof Date||$ instanceof RegExp)return $;if(cs($)||Au($))return y&&y.push($),$;if(ArrayBuffer.isView($)){const I=$;return y&&y.push(I.buffer),I}if($ instanceof we.ImageData)return y&&y.push($.data.buffer),$;if(Array.isArray($)){const I=[];for(const ee of $)I.push(us(ee,y));return I}if(typeof $=="object"){const I=$.constructor,ee=I._classRegistryKey;if(!ee)throw new Error(`can't serialize object of unregistered class ${ee}`);const re=I.serialize?I.serialize($,y):{};if(!I.serialize){for(const ge in $)$.hasOwnProperty(ge)&&(ra[ee].omit.indexOf(ge)>=0||(re[ge]=us($[ge],y)));$ instanceof Error&&(re.message=$.message)}if(re.$name)throw new Error("$name property is reserved for worker serialization logic.");return ee!=="Object"&&(re.$name=ee),re}throw new Error("can't serialize object of type "+typeof $)}function el($){if($==null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||$ instanceof Boolean||$ instanceof Number||$ instanceof String||$ instanceof Date||$ instanceof RegExp||cs($)||Au($)||ArrayBuffer.isView($)||$ instanceof we.ImageData)return $;if(Array.isArray($))return $.map(el);if(typeof $=="object"){const y=$.$name||"Object",{klass:I}=ra[y];if(!I)throw new Error(`can't deserialize unregistered class ${y}`);if(I.deserialize)return I.deserialize($);const ee=Object.create(I.prototype);for(const re of Object.keys($))re!=="$name"&&(ee[re]=el($[re]));return ee}throw new Error("can't deserialize object of type "+typeof $)}class Oc{constructor(){this.first=!0}update(y,I){const ee=Math.floor(y);return this.first?(this.first=!1,this.lastIntegerZoom=ee,this.lastIntegerZoomTime=0,this.lastZoom=y,this.lastFloorZoom=ee,!0):(this.lastFloorZoom>ee?(this.lastIntegerZoom=ee+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<ee&&(this.lastIntegerZoom=ee,this.lastIntegerZoomTime=I),y!==this.lastZoom&&(this.lastZoom=y,this.lastFloorZoom=ee,!0))}}const ku=$=>$>=1536&&$<=1791,Su=$=>$>=1872&&$<=1919,Cu=$=>$>=2208&&$<=2303,Mu=$=>$>=11904&&$<=12031,tl=$=>$>=12032&&$<=12255,si=$=>$>=12272&&$<=12287,Nl=$=>$>=12288&&$<=12351,fi=$=>$>=12352&&$<=12447,Hi=$=>$>=12448&&$<=12543,Rc=$=>$>=12544&&$<=12591,zc=$=>$>=12704&&$<=12735,$c=$=>$>=12736&&$<=12783,mo=$=>$>=12784&&$<=12799,ya=$=>$>=12800&&$<=13055,Dc=$=>$>=13056&&$<=13311,va=$=>$>=13312&&$<=19903,nl=$=>$>=19968&&$<=40959,jl=$=>$>=40960&&$<=42127,ia=$=>$>=42128&&$<=42191,Lc=$=>$>=44032&&$<=55215,Ul=$=>$>=63744&&$<=64255,Do=$=>$>=64336&&$<=65023,Bc=$=>$>=65040&&$<=65055,Vl=$=>$>=65072&&$<=65103,Hr=$=>$>=65104&&$<=65135,Fc=$=>$>=65136&&$<=65279,Gl=$=>$>=65280&&$<=65519;function rl($){for(const y of $)if(il(y.charCodeAt(0)))return!0;return!1}function Nc($){for(const y of $)if(!jc(y.charCodeAt(0)))return!1;return!0}function jc($){return!(ku($)||Su($)||Cu($)||Do($)||Fc($))}function il($){return!($!==746&&$!==747&&($<4352||!(zc($)||Rc($)||Vl($)&&!($>=65097&&$<=65103)||Ul($)||Dc($)||Mu($)||$c($)||!(!Nl($)||$>=12296&&$<=12305||$>=12308&&$<=12319||$===12336)||va($)||nl($)||ya($)||(y=>y>=12592&&y<=12687)($)||(y=>y>=43360&&y<=43391)($)||(y=>y>=55216&&y<=55295)($)||(y=>y>=4352&&y<=4607)($)||Lc($)||fi($)||si($)||(y=>y>=12688&&y<=12703)($)||tl($)||mo($)||Hi($)&&$!==12540||!(!Gl($)||$===65288||$===65289||$===65293||$>=65306&&$<=65310||$===65339||$===65341||$===65343||$>=65371&&$<=65503||$===65507||$>=65512&&$<=65519)||!(!Hr($)||$>=65112&&$<=65118||$>=65123&&$<=65126)||(y=>y>=5120&&y<=5759)($)||(y=>y>=6320&&y<=6399)($)||Bc($)||(y=>y>=19904&&y<=19967)($)||jl($)||ia($))))}function hs($){return!(il($)||function(y){return!!((I=>I>=128&&I<=255)(y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||(I=>I>=8192&&I<=8303)(y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||(I=>I>=8448&&I<=8527)(y)||(I=>I>=8528&&I<=8591)(y)||(I=>I>=8960&&I<=9215)(y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||(I=>I>=9216&&I<=9279)(y)&&y!==9251||(I=>I>=9280&&I<=9311)(y)||(I=>I>=9312&&I<=9471)(y)||(I=>I>=9632&&I<=9727)(y)||(I=>I>=9728&&I<=9983)(y)&&!(y>=9754&&y<=9759)||(I=>I>=11008&&I<=11263)(y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Nl(y)||Hi(y)||(I=>I>=57344&&I<=63743)(y)||Vl(y)||Hr(y)||Gl(y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}($))}function de($){return $>=1424&&$<=2303||Do($)||Fc($)}function U($,y){return!(!y&&de($)||$>=2304&&$<=3583||$>=3840&&$<=4255||(I=>I>=6016&&I<=6143)($))}function te($){for(const y of $)if(de(y.charCodeAt(0)))return!0;return!1}const be="deferred",Pe="loading",Re="loaded";let Be=null,Ne="unavailable",qe=null;const Ye=function($){$&&typeof $=="string"&&$.indexOf("NetworkError")>-1&&(Ne="error"),Be&&Be($)};function Je(){ut.fire(new ai("pluginStateChange",{pluginStatus:Ne,pluginURL:qe}))}const ut=new xr,gt=function(){return Ne},It=function(){if(Ne!==be||!qe)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ne=Pe,Je(),qe&&_n({url:qe},$=>{$?Ye($):(Ne=Re,Je())})},kt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ne===Re||kt.applyArabicShaping!=null,isLoading:()=>Ne===Pe,setState($){Ne=$.pluginStatus,qe=$.pluginURL},isParsed:()=>kt.applyArabicShaping!=null&&kt.processBidirectionalText!=null&&kt.processStyledBidirectionalText!=null,getPluginURL:()=>qe};class At{constructor(y,I){this.zoom=y,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition,this.pitch=I.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oc,this.transition={},this.pitch=0)}isSupportedScript(y){return function(I,ee){for(const re of I)if(!U(re.charCodeAt(0),ee))return!1;return!0}(y,kt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const y=this.zoom,I=y-Math.floor(y),ee=this.crossFadingFactor();return y>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*ee}:{fromScale:.5,toScale:1,t:1-(1-ee)*I}}}class St{constructor(y,I){this.property=y,this.value=I,this.expression=function(ee,re){if(Vs(ee))return new is(ee,re);if(Rl(ee)){const ge=kc(ee,re);if(ge.result==="error")throw new Error(ge.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));return ge.value}{let ge=ee;return typeof ee=="string"&&re.type==="color"&&(ge=ii.parse(ee)),{kind:"constant",evaluate:()=>ge}}}(I===void 0?y.specification.default:I,y.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(y,I,ee){return this.property.possiblyEvaluate(this,y,I,ee)}}class Et{constructor(y){this.property=y,this.value=new St(y,void 0)}transitioned(y,I){return new Ot(this.property,this.value,I,wt({},y.transition,this.transition),y.now)}untransitioned(){return new Ot(this.property,this.value,null,{},0)}}class $t{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitionablePropertyValues)}getValue(y){return Vt(this._values[y].value.value)}setValue(y,I){this._values.hasOwnProperty(y)||(this._values[y]=new Et(this._values[y].property)),this._values[y].value=new St(this._values[y].property,I===null?void 0:Vt(I))}getTransition(y){return Vt(this._values[y].transition)}setTransition(y,I){this._values.hasOwnProperty(y)||(this._values[y]=new Et(this._values[y].property)),this._values[y].transition=Vt(I)||void 0}serialize(){const y={};for(const I of Object.keys(this._values)){const ee=this.getValue(I);ee!==void 0&&(y[I]=ee);const re=this.getTransition(I);re!==void 0&&(y[`${I}-transition`]=re)}return y}transitioned(y,I){const ee=new Jt(this._properties);for(const re of Object.keys(this._values))ee._values[re]=this._values[re].transitioned(y,I._values[re]);return ee}untransitioned(){const y=new Jt(this._properties);for(const I of Object.keys(this._values))y._values[I]=this._values[I].untransitioned();return y}}class Ot{constructor(y,I,ee,re,ge){const ke=re.delay||0,Ie=re.duration||0;ge=ge||0,this.property=y,this.value=I,this.begin=ge+ke,this.end=this.begin+Ie,y.specification.transition&&(re.delay||re.duration)&&(this.prior=ee)}possiblyEvaluate(y,I,ee){const re=y.now||0,ge=this.value.possiblyEvaluate(y,I,ee),ke=this.prior;if(ke){if(re>this.end)return this.prior=null,ge;if(this.value.isDataDriven())return this.prior=null,ge;if(re<this.begin)return ke.possiblyEvaluate(y,I,ee);{const Ie=(re-this.begin)/(this.end-this.begin);return this.property.interpolate(ke.possiblyEvaluate(y,I,ee),ge,De(Ie))}}return ge}}class Jt{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitioningPropertyValues)}possiblyEvaluate(y,I,ee){const re=new Kt(this._properties);for(const ge of Object.keys(this._values))re._values[ge]=this._values[ge].possiblyEvaluate(y,I,ee);return re}hasTransition(){for(const y of Object.keys(this._values))if(this._values[y].prior)return!0;return!1}}class Yt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPropertyValues)}getValue(y){return Vt(this._values[y].value)}setValue(y,I){this._values[y]=new St(this._values[y].property,I===null?void 0:Vt(I))}serialize(){const y={};for(const I of Object.keys(this._values)){const ee=this.getValue(I);ee!==void 0&&(y[I]=ee)}return y}possiblyEvaluate(y,I,ee){const re=new Kt(this._properties);for(const ge of Object.keys(this._values))re._values[ge]=this._values[ge].possiblyEvaluate(y,I,ee);return re}}class Gt{constructor(y,I,ee){this.property=y,this.value=I,this.parameters=ee}isConstant(){return this.value.kind==="constant"}constantOr(y){return this.value.kind==="constant"?this.value.value:y}evaluate(y,I,ee,re){return this.property.evaluate(this.value,this.parameters,y,I,ee,re)}}class Kt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPossiblyEvaluatedValues)}get(y){return this._values[y]}}class Wt{constructor(y){this.specification=y}possiblyEvaluate(y,I){return y.expression.evaluate(I)}interpolate(y,I,ee){const re=Ls[this.specification.type];return re?re(y,I,ee):y}}class sn{constructor(y,I){this.specification=y,this.overrides=I}possiblyEvaluate(y,I,ee,re){return new Gt(this,y.expression.kind==="constant"||y.expression.kind==="camera"?{kind:"constant",value:y.expression.evaluate(I,null,{},ee,re)}:y.expression,I)}interpolate(y,I,ee){if(y.value.kind!=="constant"||I.value.kind!=="constant")return y;if(y.value.value===void 0||I.value.value===void 0)return new Gt(this,{kind:"constant",value:void 0},y.parameters);const re=Ls[this.specification.type];return re?new Gt(this,{kind:"constant",value:re(y.value.value,I.value.value,ee)},y.parameters):y}evaluate(y,I,ee,re,ge,ke){return y.kind==="constant"?y.value:y.evaluate(I,ee,re,ge,ke)}}class mn extends sn{possiblyEvaluate(y,I,ee,re){if(y.value===void 0)return new Gt(this,{kind:"constant",value:void 0},I);if(y.expression.kind==="constant"){const ge=y.expression.evaluate(I,null,{},ee,re),ke=y.property.specification.type==="resolvedImage"&&typeof ge!="string"?ge.name:ge,Ie=this._calculate(ke,ke,ke,I);return new Gt(this,{kind:"constant",value:Ie},I)}if(y.expression.kind==="camera"){const ge=this._calculate(y.expression.evaluate({zoom:I.zoom-1}),y.expression.evaluate({zoom:I.zoom}),y.expression.evaluate({zoom:I.zoom+1}),I);return new Gt(this,{kind:"constant",value:ge},I)}return new Gt(this,y.expression,I)}evaluate(y,I,ee,re,ge,ke){if(y.kind==="source"){const Ie=y.evaluate(I,ee,re,ge,ke);return this._calculate(Ie,Ie,Ie,I)}return y.kind==="composite"?this._calculate(y.evaluate({zoom:Math.floor(I.zoom)-1},ee,re),y.evaluate({zoom:Math.floor(I.zoom)},ee,re),y.evaluate({zoom:Math.floor(I.zoom)+1},ee,re),I):y.value}_calculate(y,I,ee,re){return re.zoom>re.zoomHistory.lastIntegerZoom?{from:y,to:I,other:ee}:{from:ee,to:I,other:y}}interpolate(y){return y}}class Wn{constructor(y){this.specification=y}possiblyEvaluate(y,I,ee,re){if(y.value!==void 0){if(y.expression.kind==="constant"){const ge=y.expression.evaluate(I,null,{},ee,re);return this._calculate(ge,ge,ge,I)}return this._calculate(y.expression.evaluate(new At(Math.floor(I.zoom-1),I)),y.expression.evaluate(new At(Math.floor(I.zoom),I)),y.expression.evaluate(new At(Math.floor(I.zoom+1),I)),I)}}_calculate(y,I,ee,re){return re.zoom>re.zoomHistory.lastIntegerZoom?{from:y,to:I}:{from:ee,to:I}}interpolate(y){return y}}class pn{constructor(y){this.specification=y}possiblyEvaluate(y,I,ee,re){return!!y.expression.evaluate(I,null,{},ee,re)}interpolate(){return!1}}class zn{constructor(y){this.properties=y,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const I=new At(0,{});for(const ee in y){const re=y[ee];re.specification.overridable&&this.overridableProperties.push(ee);const ge=this.defaultPropertyValues[ee]=new St(re,void 0),ke=this.defaultTransitionablePropertyValues[ee]=new Et(re);this.defaultTransitioningPropertyValues[ee]=ke.untransitioned(),this.defaultPossiblyEvaluatedValues[ee]=ge.possiblyEvaluate(I)}}}function Nn($,y){return 256*($=Ke(Math.floor($),0,255))+Ke(Math.floor(y),0,255)}ur(sn,"DataDrivenProperty"),ur(Wt,"DataConstantProperty"),ur(mn,"CrossFadedDataDrivenProperty"),ur(Wn,"CrossFadedProperty"),ur(pn,"ColorRampProperty");const er={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kn{constructor(y,I){this._structArray=y,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(y,I){return y._trim(),I&&(y.isTransferred=!0,I.push(y.arrayBuffer)),{length:y.length,arrayBuffer:y.arrayBuffer}}static deserialize(y){const I=Object.create(this.prototype);return I.arrayBuffer=y.arrayBuffer,I.length=y.length,I.capacity=y.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(y){this.reserve(y),this.length=y}reserve(y){if(y>this.capacity){this.capacity=Math.max(y,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ln($,y=1){let I=0,ee=0;return{members:$.map(re=>{const ge=er[re.type].BYTES_PER_ELEMENT,ke=I=or(I,Math.max(y,ge)),Ie=re.components||1;return ee=Math.max(ee,ge),I+=ge*Ie,{name:re.name,type:re.type,components:Ie,offset:ke}}),size:or(I,Math.max(ee,y)),alignment:y}}function or($,y){return Math.ceil($/y)*y}class tr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,I)}emplace(y,I,ee){const re=2*y;return this.int16[re+0]=I,this.int16[re+1]=ee,y}}tr.prototype.bytesPerElement=4,ur(tr,"StructArrayLayout2i4");class pr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee){const re=this.length;return this.resize(re+1),this.emplace(re,y,I,ee)}emplace(y,I,ee,re){const ge=3*y;return this.int16[ge+0]=I,this.int16[ge+1]=ee,this.int16[ge+2]=re,y}}pr.prototype.bytesPerElement=6,ur(pr,"StructArrayLayout3i6");class yr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=4*y;return this.int16[ke+0]=I,this.int16[ke+1]=ee,this.int16[ke+2]=re,this.int16[ke+3]=ge,y}}yr.prototype.bytesPerElement=8,ur(yr,"StructArrayLayout4i8");class Ar extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie){const $e=this.length;return this.resize($e+1),this.emplace($e,y,I,ee,re,ge,ke,Ie)}emplace(y,I,ee,re,ge,ke,Ie,$e){const Le=6*y,Ve=12*y,We=3*y;return this.int16[Le+0]=I,this.int16[Le+1]=ee,this.uint8[Ve+4]=re,this.uint8[Ve+5]=ge,this.uint8[Ve+6]=ke,this.uint8[Ve+7]=Ie,this.float32[We+2]=$e,y}}Ar.prototype.bytesPerElement=12,ur(Ar,"StructArrayLayout2i4ub1f12");class Vr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=4*y;return this.float32[ke+0]=I,this.float32[ke+1]=ee,this.float32[ke+2]=re,this.float32[ke+3]=ge,y}}Vr.prototype.bytesPerElement=16,ur(Vr,"StructArrayLayout4f16");class _r extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,$e,Le,Ve){const We=this.length;return this.resize(We+1),this.emplace(We,y,I,ee,re,ge,ke,Ie,$e,Le,Ve)}emplace(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We){const Ze=10*y;return this.uint16[Ze+0]=I,this.uint16[Ze+1]=ee,this.uint16[Ze+2]=re,this.uint16[Ze+3]=ge,this.uint16[Ze+4]=ke,this.uint16[Ze+5]=Ie,this.uint16[Ze+6]=$e,this.uint16[Ze+7]=Le,this.uint16[Ze+8]=Ve,this.uint16[Ze+9]=We,y}}_r.prototype.bytesPerElement=20,ur(_r,"StructArrayLayout10ui20");class Mr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,$e){const Le=this.length;return this.resize(Le+1),this.emplace(Le,y,I,ee,re,ge,ke,Ie,$e)}emplace(y,I,ee,re,ge,ke,Ie,$e,Le){const Ve=8*y;return this.uint16[Ve+0]=I,this.uint16[Ve+1]=ee,this.uint16[Ve+2]=re,this.uint16[Ve+3]=ge,this.uint16[Ve+4]=ke,this.uint16[Ve+5]=Ie,this.uint16[Ve+6]=$e,this.uint16[Ve+7]=Le,y}}Mr.prototype.bytesPerElement=16,ur(Mr,"StructArrayLayout8ui16");class Zr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,y,I,ee,re,ge,ke)}emplace(y,I,ee,re,ge,ke,Ie){const $e=6*y;return this.int16[$e+0]=I,this.int16[$e+1]=ee,this.int16[$e+2]=re,this.int16[$e+3]=ge,this.int16[$e+4]=ke,this.int16[$e+5]=Ie,y}}Zr.prototype.bytesPerElement=12,ur(Zr,"StructArrayLayout6i12");class ci extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze){const tt=this.length;return this.resize(tt+1),this.emplace(tt,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze)}emplace(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt){const ot=12*y;return this.int16[ot+0]=I,this.int16[ot+1]=ee,this.int16[ot+2]=re,this.int16[ot+3]=ge,this.uint16[ot+4]=ke,this.uint16[ot+5]=Ie,this.uint16[ot+6]=$e,this.uint16[ot+7]=Le,this.int16[ot+8]=Ve,this.int16[ot+9]=We,this.int16[ot+10]=Ze,this.int16[ot+11]=tt,y}}ci.prototype.bytesPerElement=24,ur(ci,"StructArrayLayout4i4ui4i24");class wi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,y,I,ee,re,ge,ke)}emplace(y,I,ee,re,ge,ke,Ie){const $e=10*y,Le=5*y;return this.int16[$e+0]=I,this.int16[$e+1]=ee,this.int16[$e+2]=re,this.float32[Le+2]=ge,this.float32[Le+3]=ke,this.float32[Le+4]=Ie,y}}wi.prototype.bytesPerElement=20,ur(wi,"StructArrayLayout3i3f20");class oi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.uint32[1*y+0]=I,y}}oi.prototype.bytesPerElement=4,ur(oi,"StructArrayLayout1ul4");class Wi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt){const ot=this.length;return this.resize(ot+1),this.emplace(ot,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt)}emplace(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot){const mt=20*y,Tt=10*y;return this.int16[mt+0]=I,this.int16[mt+1]=ee,this.int16[mt+2]=re,this.int16[mt+3]=ge,this.int16[mt+4]=ke,this.float32[Tt+3]=Ie,this.float32[Tt+4]=$e,this.float32[Tt+5]=Le,this.float32[Tt+6]=Ve,this.int16[mt+14]=We,this.uint32[Tt+8]=Ze,this.uint16[mt+18]=tt,this.uint16[mt+19]=ot,y}}Wi.prototype.bytesPerElement=40,ur(Wi,"StructArrayLayout5i4f1i1ul2ui40");class To extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie){const $e=this.length;return this.resize($e+1),this.emplace($e,y,I,ee,re,ge,ke,Ie)}emplace(y,I,ee,re,ge,ke,Ie,$e){const Le=8*y;return this.int16[Le+0]=I,this.int16[Le+1]=ee,this.int16[Le+2]=re,this.int16[Le+4]=ge,this.int16[Le+5]=ke,this.int16[Le+6]=Ie,this.int16[Le+7]=$e,y}}To.prototype.bytesPerElement=16,ur(To,"StructArrayLayout3i2i2i16");class oa extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge){const ke=this.length;return this.resize(ke+1),this.emplace(ke,y,I,ee,re,ge)}emplace(y,I,ee,re,ge,ke){const Ie=4*y,$e=8*y;return this.float32[Ie+0]=I,this.float32[Ie+1]=ee,this.float32[Ie+2]=re,this.int16[$e+6]=ge,this.int16[$e+7]=ke,y}}oa.prototype.bytesPerElement=16,ur(oa,"StructArrayLayout2f1f2i16");class _i extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=12*y,Ie=3*y;return this.uint8[ke+0]=I,this.uint8[ke+1]=ee,this.float32[Ie+1]=re,this.float32[Ie+2]=ge,y}}_i.prototype.bytesPerElement=12,ur(_i,"StructArrayLayout2ub2f12");class vi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee){const re=this.length;return this.resize(re+1),this.emplace(re,y,I,ee)}emplace(y,I,ee,re){const ge=3*y;return this.float32[ge+0]=I,this.float32[ge+1]=ee,this.float32[ge+2]=re,y}}vi.prototype.bytesPerElement=12,ur(vi,"StructArrayLayout3f12");class zr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee){const re=this.length;return this.resize(re+1),this.emplace(re,y,I,ee)}emplace(y,I,ee,re){const ge=3*y;return this.uint16[ge+0]=I,this.uint16[ge+1]=ee,this.uint16[ge+2]=re,y}}zr.prototype.bytesPerElement=6,ur(zr,"StructArrayLayout3ui6");class zi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt,Ft,Ht,Nt,qt,Qt){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt,Ft,Ht,Nt,qt,Qt)}emplace(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt,Ft,Ht,Nt,qt,Qt,Zt){const An=30*y,wn=15*y,On=60*y;return this.int16[An+0]=I,this.int16[An+1]=ee,this.int16[An+2]=re,this.float32[wn+2]=ge,this.float32[wn+3]=ke,this.uint16[An+8]=Ie,this.uint16[An+9]=$e,this.uint32[wn+5]=Le,this.uint32[wn+6]=Ve,this.uint32[wn+7]=We,this.uint16[An+16]=Ze,this.uint16[An+17]=tt,this.uint16[An+18]=ot,this.float32[wn+10]=mt,this.float32[wn+11]=Tt,this.uint8[On+48]=Ft,this.uint8[On+49]=Ht,this.uint8[On+50]=Nt,this.uint32[wn+13]=qt,this.int16[An+28]=Qt,this.uint8[On+58]=Zt,y}}zi.prototype.bytesPerElement=60,ur(zi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $i extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt,Ft,Ht,Nt,qt,Qt,Zt,An,wn,On,Jn,Sn,Bn,Vn,Fn){const Xn=this.length;return this.resize(Xn+1),this.emplace(Xn,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt,Ft,Ht,Nt,qt,Qt,Zt,An,wn,On,Jn,Sn,Bn,Vn,Fn)}emplace(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt,Ft,Ht,Nt,qt,Qt,Zt,An,wn,On,Jn,Sn,Bn,Vn,Fn,Xn){const Gn=38*y,ar=19*y;return this.int16[Gn+0]=I,this.int16[Gn+1]=ee,this.int16[Gn+2]=re,this.float32[ar+2]=ge,this.float32[ar+3]=ke,this.int16[Gn+8]=Ie,this.int16[Gn+9]=$e,this.int16[Gn+10]=Le,this.int16[Gn+11]=Ve,this.int16[Gn+12]=We,this.int16[Gn+13]=Ze,this.uint16[Gn+14]=tt,this.uint16[Gn+15]=ot,this.uint16[Gn+16]=mt,this.uint16[Gn+17]=Tt,this.uint16[Gn+18]=Ft,this.uint16[Gn+19]=Ht,this.uint16[Gn+20]=Nt,this.uint16[Gn+21]=qt,this.uint16[Gn+22]=Qt,this.uint16[Gn+23]=Zt,this.uint16[Gn+24]=An,this.uint16[Gn+25]=wn,this.uint16[Gn+26]=On,this.uint16[Gn+27]=Jn,this.uint16[Gn+28]=Sn,this.uint32[ar+15]=Bn,this.float32[ar+16]=Vn,this.float32[ar+17]=Fn,this.float32[ar+18]=Xn,y}}$i.prototype.bytesPerElement=76,ur($i,"StructArrayLayout3i2f6i15ui1ul3f76");class ui extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.float32[1*y+0]=I,y}}ui.prototype.bytesPerElement=4,ur(ui,"StructArrayLayout1f4");class Yi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge){const ke=this.length;return this.resize(ke+1),this.emplace(ke,y,I,ee,re,ge)}emplace(y,I,ee,re,ge,ke){const Ie=5*y;return this.float32[Ie+0]=I,this.float32[Ie+1]=ee,this.float32[Ie+2]=re,this.float32[Ie+3]=ge,this.float32[Ie+4]=ke,y}}Yi.prototype.bytesPerElement=20,ur(Yi,"StructArrayLayout5f20");class $a extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=6*y;return this.uint32[3*y+0]=I,this.uint16[ke+2]=ee,this.uint16[ke+3]=re,this.uint16[ke+4]=ge,y}}$a.prototype.bytesPerElement=12,ur($a,"StructArrayLayout1ul3ui12");class to extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,I)}emplace(y,I,ee){const re=2*y;return this.uint16[re+0]=I,this.uint16[re+1]=ee,y}}to.prototype.bytesPerElement=4,ur(to,"StructArrayLayout2ui4");class go extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.uint16[1*y+0]=I,y}}go.prototype.bytesPerElement=2,ur(go,"StructArrayLayout1ui2");class Da extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,I)}emplace(y,I,ee){const re=2*y;return this.float32[re+0]=I,this.float32[re+1]=ee,y}}Da.prototype.bytesPerElement=8,ur(Da,"StructArrayLayout2f8");class La extends kn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}La.prototype.size=12;class no extends Zr{get(y){return new La(this,y)}}ur(no,"FillExtrusionExtArray");class Ba extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ba.prototype.size=40;class qo extends Wi{get(y){return new Ba(this,y)}}ur(qo,"CollisionBoxArray");class ol extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(y){this._structArray.uint8[this._pos1+49]=y}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(y){this._structArray.uint8[this._pos1+50]=y}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(y){this._structArray.uint32[this._pos4+13]=y}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(y){this._structArray.uint8[this._pos1+58]=y}}ol.prototype.size=60;class Xh extends zi{get(y){return new ol(this,y)}}ur(Xh,"PlacedSymbolArray");class Kh extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(y){this._structArray.uint32[this._pos4+15]=y}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Kh.prototype.size=76;class Yh extends $i{get(y){return new Kh(this,y)}}ur(Yh,"SymbolInstanceArray");class ph extends ui{getoffsetX(y){return this.float32[1*y+0]}}ur(ph,"GlyphOffsetArray");class Jh extends pr{getx(y){return this.int16[3*y+0]}gety(y){return this.int16[3*y+1]}gettileUnitDistanceFromAnchor(y){return this.int16[3*y+2]}}ur(Jh,"SymbolLineVertexArray");class fh extends kn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}fh.prototype.size=12;class _h extends $a{get(y){return new fh(this,y)}}ur(_h,"FeatureIndexArray");class ql extends kn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}ql.prototype.size=4;class Ao extends to{get(y){return new ql(this,y)}}ur(Ao,"FillExtrusionCentroidArray");class Qh extends kn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Qh.prototype.size=12;class ed extends Zr{get(y){return new Qh(this,y)}}ur(ed,"CircleGlobeExtArray");const td=Ln([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),nd=Ln([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Iu=ic(function($){$.exports=function(y,I){var ee,re,ge,ke,Ie,$e,Le,Ve;for(re=y.length-(ee=3&y.length),ge=I,Ie=3432918353,$e=461845907,Ve=0;Ve<re;)Le=255&y.charCodeAt(Ve)|(255&y.charCodeAt(++Ve))<<8|(255&y.charCodeAt(++Ve))<<16|(255&y.charCodeAt(++Ve))<<24,++Ve,ge=27492+(65535&(ke=5*(65535&(ge=(ge^=Le=(65535&(Le=(Le=(65535&Le)*Ie+(((Le>>>16)*Ie&65535)<<16)&4294967295)<<15|Le>>>17))*$e+(((Le>>>16)*$e&65535)<<16)&4294967295)<<13|ge>>>19))+((5*(ge>>>16)&65535)<<16)&4294967295))+((58964+(ke>>>16)&65535)<<16);switch(Le=0,ee){case 3:Le^=(255&y.charCodeAt(Ve+2))<<16;case 2:Le^=(255&y.charCodeAt(Ve+1))<<8;case 1:ge^=Le=(65535&(Le=(Le=(65535&(Le^=255&y.charCodeAt(Ve)))*Ie+(((Le>>>16)*Ie&65535)<<16)&4294967295)<<15|Le>>>17))*$e+(((Le>>>16)*$e&65535)<<16)&4294967295}return ge^=y.length,ge=2246822507*(65535&(ge^=ge>>>16))+((2246822507*(ge>>>16)&65535)<<16)&4294967295,ge=3266489909*(65535&(ge^=ge>>>13))+((3266489909*(ge>>>16)&65535)<<16)&4294967295,(ge^=ge>>>16)>>>0}}),Kd=ic(function($){$.exports=function(y,I){for(var ee,re=y.length,ge=I^re,ke=0;re>=4;)ee=1540483477*(65535&(ee=255&y.charCodeAt(ke)|(255&y.charCodeAt(++ke))<<8|(255&y.charCodeAt(++ke))<<16|(255&y.charCodeAt(++ke))<<24))+((1540483477*(ee>>>16)&65535)<<16),ge=1540483477*(65535&ge)+((1540483477*(ge>>>16)&65535)<<16)^(ee=1540483477*(65535&(ee^=ee>>>24))+((1540483477*(ee>>>16)&65535)<<16)),re-=4,++ke;switch(re){case 3:ge^=(255&y.charCodeAt(ke+2))<<16;case 2:ge^=(255&y.charCodeAt(ke+1))<<8;case 1:ge=1540483477*(65535&(ge^=255&y.charCodeAt(ke)))+((1540483477*(ge>>>16)&65535)<<16)}return ge=1540483477*(65535&(ge^=ge>>>13))+((1540483477*(ge>>>16)&65535)<<16),(ge^=ge>>>15)>>>0}}),Uc=Iu,rd=Kd;Uc.murmur3=Iu,Uc.murmur2=rd;class Pu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(y,I,ee,re){this.ids.push(id(y)),this.positions.push(I,ee,re)}getPositions(y){const I=id(y);let ee=0,re=this.ids.length-1;for(;ee<re;){const ke=ee+re>>1;this.ids[ke]>=I?re=ke:ee=ke+1}const ge=[];for(;this.ids[ee]===I;)ge.push({index:this.positions[3*ee],start:this.positions[3*ee+1],end:this.positions[3*ee+2]}),ee++;return ge}static serialize(y,I){const ee=new Float64Array(y.ids),re=new Uint32Array(y.positions);return Hl(ee,re,0,ee.length-1),I&&I.push(ee.buffer,re.buffer),{ids:ee,positions:re}}static deserialize(y){const I=new Pu;return I.ids=y.ids,I.positions=y.positions,I.indexed=!0,I}}function id($){const y=+$;return!isNaN(y)&&Number.MIN_SAFE_INTEGER<=y&&y<=Number.MAX_SAFE_INTEGER?y:Uc(String($))}function Hl($,y,I,ee){for(;I<ee;){const re=$[I+ee>>1];let ge=I-1,ke=ee+1;for(;;){do ge++;while($[ge]<re);do ke--;while($[ke]>re);if(ge>=ke)break;Fa($,ge,ke),Fa(y,3*ge,3*ke),Fa(y,3*ge+1,3*ke+1),Fa(y,3*ge+2,3*ke+2)}ke-I<ee-ke?(Hl($,y,I,ke),I=ke+1):(Hl($,y,ke+1,ee),ee=ke)}}function Fa($,y,I){const ee=$[y];$[y]=$[I],$[I]=ee}ur(Pu,"FeaturePositionMap");class Na{constructor(y){this.gl=y.gl,this.initialized=!1}fetchUniformLocation(y,I){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(y,I),this.initialized=!0),!!this.location}}class Ou extends Na{constructor(y){super(y),this.current=0}set(y,I,ee){this.fetchUniformLocation(y,I)&&this.current!==ee&&(this.current=ee,this.gl.uniform1f(this.location,ee))}}class od extends Na{constructor(y){super(y),this.current=[0,0,0,0]}set(y,I,ee){this.fetchUniformLocation(y,I)&&(ee[0]===this.current[0]&&ee[1]===this.current[1]&&ee[2]===this.current[2]&&ee[3]===this.current[3]||(this.current=ee,this.gl.uniform4f(this.location,ee[0],ee[1],ee[2],ee[3])))}}class ad extends Na{constructor(y){super(y),this.current=ii.transparent}set(y,I,ee){this.fetchUniformLocation(y,I)&&(ee.r===this.current.r&&ee.g===this.current.g&&ee.b===this.current.b&&ee.a===this.current.a||(this.current=ee,this.gl.uniform4f(this.location,ee.r,ee.g,ee.b,ee.a)))}}const sd=new Float32Array(16),Yd=new Float32Array(9),Jd=new Float32Array(4);function Ru($){return[Nn(255*$.r,255*$.g),Nn(255*$.b,255*$.a)]}class ds{constructor(y,I,ee){this.value=y,this.uniformNames=I.map(re=>`u_${re}`),this.type=ee}setUniform(y,I,ee,re,ge){I.set(y,ge,re.constantOr(this.value))}getBinding(y,I){return this.type==="color"?new ad(y):new Ou(y)}}class ps{constructor(y,I){this.uniformNames=I.map(ee=>`u_${ee}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(y,I){this.pixelRatioFrom=I.pixelRatio||1,this.pixelRatioTo=y.pixelRatio||1,this.patternFrom=I.tl.concat(I.br),this.patternTo=y.tl.concat(y.br)}setUniform(y,I,ee,re,ge){const ke=ge==="u_pattern_to"||ge==="u_dash_to"?this.patternTo:ge==="u_pattern_from"||ge==="u_dash_from"?this.patternFrom:ge==="u_pixel_ratio_to"?this.pixelRatioTo:ge==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ke&&I.set(y,ge,ke)}getBinding(y,I){return I==="u_pattern_from"||I==="u_pattern_to"||I==="u_dash_from"||I==="u_dash_to"?new od(y):new Ou(y)}}class ja{constructor(y,I,ee,re){this.expression=y,this.type=ee,this.maxValue=0,this.paintVertexAttributes=I.map(ge=>({name:`a_${ge}`,type:"Float32",components:ee==="color"?2:1,offset:0})),this.paintVertexArray=new re}populatePaintArray(y,I,ee,re,ge,ke){const Ie=this.paintVertexArray.length,$e=this.expression.evaluate(new At(0),I,{},ge,re,ke);this.paintVertexArray.resize(y),this._setPaintValue(Ie,y,$e)}updatePaintArray(y,I,ee,re,ge){const ke=this.expression.evaluate({zoom:0},ee,re,void 0,ge);this._setPaintValue(y,I,ke)}_setPaintValue(y,I,ee){if(this.type==="color"){const re=Ru(ee);for(let ge=y;ge<I;ge++)this.paintVertexArray.emplace(ge,re[0],re[1])}else{for(let re=y;re<I;re++)this.paintVertexArray.emplace(re,ee);this.maxValue=Math.max(this.maxValue,Math.abs(ee))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class aa{constructor(y,I,ee,re,ge,ke){this.expression=y,this.uniformNames=I.map(Ie=>`u_${Ie}_t`),this.type=ee,this.useIntegerZoom=re,this.zoom=ge,this.maxValue=0,this.paintVertexAttributes=I.map(Ie=>({name:`a_${Ie}`,type:"Float32",components:ee==="color"?4:2,offset:0})),this.paintVertexArray=new ke}populatePaintArray(y,I,ee,re,ge,ke){const Ie=this.expression.evaluate(new At(this.zoom),I,{},ge,re,ke),$e=this.expression.evaluate(new At(this.zoom+1),I,{},ge,re,ke),Le=this.paintVertexArray.length;this.paintVertexArray.resize(y),this._setPaintValue(Le,y,Ie,$e)}updatePaintArray(y,I,ee,re,ge){const ke=this.expression.evaluate({zoom:this.zoom},ee,re,void 0,ge),Ie=this.expression.evaluate({zoom:this.zoom+1},ee,re,void 0,ge);this._setPaintValue(y,I,ke,Ie)}_setPaintValue(y,I,ee,re){if(this.type==="color"){const ge=Ru(ee),ke=Ru(re);for(let Ie=y;Ie<I;Ie++)this.paintVertexArray.emplace(Ie,ge[0],ge[1],ke[0],ke[1])}else{for(let ge=y;ge<I;ge++)this.paintVertexArray.emplace(ge,ee,re);this.maxValue=Math.max(this.maxValue,Math.abs(ee),Math.abs(re))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(y,I,ee,re,ge){const ke=this.useIntegerZoom?Math.floor(ee.zoom):ee.zoom,Ie=Ke(this.expression.interpolationFactor(ke,this.zoom,this.zoom+1),0,1);I.set(y,ge,Ie)}getBinding(y,I){return new Ou(y)}}class fs{constructor(y,I,ee,re,ge,ke,Ie){this.expression=y,this.type=ee,this.useIntegerZoom=re,this.zoom=ge,this.layerId=Ie,this.paintVertexAttributes=(ee==="array"?nd:td).members;for(let $e=0;$e<I.length;++$e);this.zoomInPaintVertexArray=new ke,this.zoomOutPaintVertexArray=new ke}populatePaintArray(y,I,ee){const re=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(y),this.zoomOutPaintVertexArray.resize(y),this._setPaintValues(re,y,I.patterns&&I.patterns[this.layerId],ee)}updatePaintArray(y,I,ee,re,ge,ke){this._setPaintValues(y,I,ee.patterns&&ee.patterns[this.layerId],ke)}_setPaintValues(y,I,ee,re){if(!re||!ee)return;const{min:ge,mid:ke,max:Ie}=ee,$e=re[ge],Le=re[ke],Ve=re[Ie];if($e&&Le&&Ve)for(let We=y;We<I;We++)this._setPaintValue(this.zoomInPaintVertexArray,We,Le,$e),this._setPaintValue(this.zoomOutPaintVertexArray,We,Le,Ve)}_setPaintValue(y,I,ee,re){y.emplace(I,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],re.tl[0],re.tl[1],re.br[0],re.br[1],ee.pixelRatio,re.pixelRatio)}upload(y){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=y.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=y.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _s{constructor(y,I,ee=()=>!0){this.binders={},this._buffers=[];const re=[];for(const ge in y.paint._values){if(!ee(ge))continue;const ke=y.paint.get(ge);if(!(ke instanceof Gt&&ts(ke.property.specification)))continue;const Ie=cd(ge,y.type),$e=ke.value,Le=ke.property.specification.type,Ve=ke.property.useIntegerZoom,We=ke.property.specification["property-type"],Ze=We==="cross-faded"||We==="cross-faded-data-driven",tt=String(ge)==="line-dasharray"&&y.layout.get("line-cap").value.kind!=="constant";if($e.kind!=="constant"||tt)if($e.kind==="source"||tt||Ze){const ot=ud(ge,Le,"source");this.binders[ge]=Ze?new fs($e,Ie,Le,Ve,I,ot,y.id):new ja($e,Ie,Le,ot),re.push(`/a_${ge}`)}else{const ot=ud(ge,Le,"composite");this.binders[ge]=new aa($e,Ie,Le,Ve,I,ot),re.push(`/z_${ge}`)}else this.binders[ge]=Ze?new ps($e.value,Ie):new ds($e.value,Ie,Le),re.push(`/u_${ge}`)}this.cacheKey=re.sort().join("")}getMaxValue(y){const I=this.binders[y];return I instanceof ja||I instanceof aa?I.maxValue:0}populatePaintArrays(y,I,ee,re,ge,ke){for(const Ie in this.binders){const $e=this.binders[Ie];($e instanceof ja||$e instanceof aa||$e instanceof fs)&&$e.populatePaintArray(y,I,ee,re,ge,ke)}}setConstantPatternPositions(y,I){for(const ee in this.binders){const re=this.binders[ee];re instanceof ps&&re.setConstantPatternPositions(y,I)}}updatePaintArrays(y,I,ee,re,ge,ke){let Ie=!1;for(const $e in y){const Le=I.getPositions($e);for(const Ve of Le){const We=ee.feature(Ve.index);for(const Ze in this.binders){const tt=this.binders[Ze];if((tt instanceof ja||tt instanceof aa||tt instanceof fs)&&tt.expression.isStateDependent===!0){const ot=re.paint.get(Ze);tt.expression=ot.value,tt.updatePaintArray(Ve.start,Ve.end,We,y[$e],ge,ke),Ie=!0}}}}return Ie}defines(){const y=[];for(const I in this.binders){const ee=this.binders[I];(ee instanceof ds||ee instanceof ps)&&y.push(...ee.uniformNames.map(re=>`#define HAS_UNIFORM_${re}`))}return y}getBinderAttributes(){const y=[];for(const I in this.binders){const ee=this.binders[I];if(ee instanceof ja||ee instanceof aa||ee instanceof fs)for(let re=0;re<ee.paintVertexAttributes.length;re++)y.push(ee.paintVertexAttributes[re].name)}return y}getBinderUniforms(){const y=[];for(const I in this.binders){const ee=this.binders[I];if(ee instanceof ds||ee instanceof ps||ee instanceof aa)for(const re of ee.uniformNames)y.push(re)}return y}getPaintVertexBuffers(){return this._buffers}getUniforms(y){const I=[];for(const ee in this.binders){const re=this.binders[ee];if(re instanceof ds||re instanceof ps||re instanceof aa)for(const ge of re.uniformNames)I.push({name:ge,property:ee,binding:re.getBinding(y,ge)})}return I}setUniforms(y,I,ee,re,ge){for(const{name:ke,property:Ie,binding:$e}of ee)this.binders[Ie].setUniform(y,$e,ge,re.get(Ie),ke)}updatePaintBuffers(y){this._buffers=[];for(const I in this.binders){const ee=this.binders[I];if(y&&ee instanceof fs){const re=y.fromScale===2?ee.zoomInPaintVertexBuffer:ee.zoomOutPaintVertexBuffer;re&&this._buffers.push(re)}else(ee instanceof ja||ee instanceof aa)&&ee.paintVertexBuffer&&this._buffers.push(ee.paintVertexBuffer)}}upload(y){for(const I in this.binders){const ee=this.binders[I];(ee instanceof ja||ee instanceof aa||ee instanceof fs)&&ee.upload(y)}this.updatePaintBuffers()}destroy(){for(const y in this.binders){const I=this.binders[y];(I instanceof ja||I instanceof aa||I instanceof fs)&&I.destroy()}}}class al{constructor(y,I,ee=()=>!0){this.programConfigurations={};for(const re of y)this.programConfigurations[re.id]=new _s(re,I,ee);this.needsUpload=!1,this._featureMap=new Pu,this._bufferOffset=0}populatePaintArrays(y,I,ee,re,ge,ke,Ie){for(const $e in this.programConfigurations)this.programConfigurations[$e].populatePaintArrays(y,I,re,ge,ke,Ie);I.id!==void 0&&this._featureMap.add(I.id,ee,this._bufferOffset,y),this._bufferOffset=y,this.needsUpload=!0}updatePaintArrays(y,I,ee,re,ge){for(const ke of ee)this.needsUpload=this.programConfigurations[ke.id].updatePaintArrays(y,this._featureMap,I,ke,re,ge)||this.needsUpload}get(y){return this.programConfigurations[y]}upload(y){if(this.needsUpload){for(const I in this.programConfigurations)this.programConfigurations[I].upload(y);this.needsUpload=!1}}destroy(){for(const y in this.programConfigurations)this.programConfigurations[y].destroy()}}const ld={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function cd($,y){return ld[$]||[$.replace(`${y}-`,"").replace(/-/g,"_")]}const Wl={"line-pattern":{source:_r,composite:_r},"fill-pattern":{source:_r,composite:_r},"fill-extrusion-pattern":{source:_r,composite:_r},"line-dasharray":{source:Mr,composite:Mr}},zu={color:{source:Da,composite:Vr},number:{source:ui,composite:Da}};function ud($,y,I){const ee=Wl[$];return ee&&ee[I]||zu[y][I]}ur(ds,"ConstantBinder"),ur(ps,"CrossFadedConstantBinder"),ur(ja,"SourceExpressionBinder"),ur(fs,"CrossFadedCompositeBinder"),ur(aa,"CompositeExpressionBinder"),ur(_s,"ProgramConfiguration",{omit:["_buffers"]}),ur(al,"ProgramConfigurationSet");const Zl="-transition";class Vi extends xr{constructor(y,I){if(super(),this.id=y.id,this.type=y.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,y.type!=="custom"&&(this.metadata=(y=y).metadata,this.minzoom=y.minzoom,this.maxzoom=y.maxzoom,y.type!=="background"&&y.type!=="sky"&&(this.source=y.source,this.sourceLayer=y["source-layer"],this.filter=y.filter),I.layout&&(this._unevaluatedLayout=new Yt(I.layout)),I.paint)){this._transitionablePaint=new $t(I.paint);for(const ee in y.paint)this.setPaintProperty(ee,y.paint[ee],{validate:!1});for(const ee in y.layout)this.setLayoutProperty(ee,y.layout[ee],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Kt(I.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(y){return y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(y)}setLayoutProperty(y,I,ee={}){I!=null&&this._validate(Tu,`layers.${this.id}.layout.${y}`,y,I,ee)||(y!=="visibility"?this._unevaluatedLayout.setValue(y,I):this.visibility=I)}getPaintProperty(y){return ft(y,Zl)?this._transitionablePaint.getTransition(y.slice(0,-Zl.length)):this._transitionablePaint.getValue(y)}setPaintProperty(y,I,ee={}){if(I!=null&&this._validate(Fl,`layers.${this.id}.paint.${y}`,y,I,ee))return!1;if(ft(y,Zl))return this._transitionablePaint.setTransition(y.slice(0,-Zl.length),I||void 0),!1;{const re=this._transitionablePaint._values[y],ge=re.property.specification["property-type"]==="cross-faded-data-driven",ke=re.value.isDataDriven(),Ie=re.value;this._transitionablePaint.setValue(y,I),this._handleSpecialPaintPropertyUpdate(y);const $e=this._transitionablePaint._values[y].value;return $e.isDataDriven()||ke||ge||this._handleOverridablePaintPropertyUpdate(y,Ie,$e)}}_handleSpecialPaintPropertyUpdate(y){}getProgramIds(){return null}getProgramConfiguration(y){return null}_handleOverridablePaintPropertyUpdate(y,I,ee){return!1}isHidden(y){return!!(this.minzoom&&y<this.minzoom)||!!(this.maxzoom&&y>=this.maxzoom)||this.visibility==="none"}updateTransitions(y){this._transitioningPaint=this._transitionablePaint.transitioned(y,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(y,I){y.getCrossfadeParameters&&(this._crossfadeParameters=y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(y,void 0,I)),this.paint=this._transitioningPaint.possiblyEvaluate(y,void 0,I)}serialize(){const y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(y.layout=y.layout||{},y.layout.visibility=this.visibility),ht(y,(I,ee)=>!(I===void 0||ee==="layout"&&!Object.keys(I).length||ee==="paint"&&!Object.keys(I).length))}_validate(y,I,ee,re,ge={}){return(!ge||ge.validate!==!1)&&Pc(this,y.call(Bl,{key:I,layerType:this.type,objectKey:ee,value:re,styleSpec:gn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const y in this.paint._values){const I=this.paint.get(y);if(I instanceof Gt&&ts(I.property.specification)&&(I.value.kind==="source"||I.value.kind==="composite")&&I.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ks(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Qd=Ln([{name:"a_pos",components:2,type:"Int16"}],4),ep=Ln([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Bi{constructor(y=[]){this.segments=y}prepareSegment(y,I,ee,re){let ge=this.segments[this.segments.length-1];return y>Bi.MAX_VERTEX_ARRAY_LENGTH&&Dt(`Max vertices per segment is ${Bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${y}`),(!ge||ge.vertexLength+y>Bi.MAX_VERTEX_ARRAY_LENGTH||ge.sortKey!==re)&&(ge={vertexOffset:I.length,primitiveOffset:ee.length,vertexLength:0,primitiveLength:0},re!==void 0&&(ge.sortKey=re),this.segments.push(ge)),ge}get(){return this.segments}destroy(){for(const y of this.segments)for(const I in y.vaos)y.vaos[I].destroy()}static simpleSegment(y,I,ee,re){return new Bi([{vertexOffset:y,primitiveOffset:I,vertexLength:ee,primitiveLength:re,vaos:{},sortKey:0}])}}Bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ur(Bi,"SegmentVector");var kr=8192;class Ua{constructor(y,I){y&&(I?this.setSouthWest(y).setNorthEast(I):y.length===4?this.setSouthWest([y[0],y[1]]).setNorthEast([y[2],y[3]]):this.setSouthWest(y[0]).setNorthEast(y[1]))}setNorthEast(y){return this._ne=y instanceof ti?new ti(y.lng,y.lat):ti.convert(y),this}setSouthWest(y){return this._sw=y instanceof ti?new ti(y.lng,y.lat):ti.convert(y),this}extend(y){const I=this._sw,ee=this._ne;let re,ge;if(y instanceof ti)re=y,ge=y;else{if(!(y instanceof Ua))return Array.isArray(y)?y.length===4||y.every(Array.isArray)?this.extend(Ua.convert(y)):this.extend(ti.convert(y)):this;if(re=y._sw,ge=y._ne,!re||!ge)return this}return I||ee?(I.lng=Math.min(re.lng,I.lng),I.lat=Math.min(re.lat,I.lat),ee.lng=Math.max(ge.lng,ee.lng),ee.lat=Math.max(ge.lat,ee.lat)):(this._sw=new ti(re.lng,re.lat),this._ne=new ti(ge.lng,ge.lat)),this}getCenter(){return new ti((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ti(this.getWest(),this.getNorth())}getSouthEast(){return new ti(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(y){const{lng:I,lat:ee}=ti.convert(y);let re=this._sw.lng<=I&&I<=this._ne.lng;return this._sw.lng>this._ne.lng&&(re=this._sw.lng>=I&&I>=this._ne.lng),this._sw.lat<=ee&&ee<=this._ne.lat&&re}static convert(y){return!y||y instanceof Ua?y:new Ua(y)}}const mh=63710088e-1;class ti{constructor(y,I){if(isNaN(y)||isNaN(I))throw new Error(`Invalid LngLat object: (${y}, ${I})`);if(this.lng=+y,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ti(Qe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(y){const I=Math.PI/180,ee=this.lat*I,re=y.lat*I,ge=Math.sin(ee)*Math.sin(re)+Math.cos(ee)*Math.cos(re)*Math.cos((y.lng-this.lng)*I);return mh*Math.acos(Math.min(ge,1))}toBounds(y=0){const I=360*y/40075017,ee=I/Math.cos(Math.PI/180*this.lat);return new Ua(new ti(this.lng-ee,this.lat-I),new ti(this.lng+ee,this.lat+I))}static convert(y){if(y instanceof ti)return y;if(Array.isArray(y)&&(y.length===2||y.length===3))return new ti(Number(y[0]),Number(y[1]));if(!Array.isArray(y)&&typeof y=="object"&&y!==null)return new ti(Number("lng"in y?y.lng:y.lon),Number(y.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Vc=2*Math.PI*mh;function gh($){return Vc*Math.cos($*Math.PI/180)}function xa($){return(180+$)/360}function Va($){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+$*Math.PI/360)))/360}function Lo($,y){return $/gh(y)}function Ho($){return 360*$-180}function Ji($){return 360/Math.PI*Math.atan(Math.exp((180-360*$)*Math.PI/180))-90}function hd($,y){return $*gh(Ji(y))}const ba=85.051129;function dd($){return 1/Math.cos($*Math.PI/180)}class Xl{constructor(y,I,ee=0){this.x=+y,this.y=+I,this.z=+ee}static fromLngLat(y,I=0){const ee=ti.convert(y);return new Xl(xa(ee.lng),Va(ee.lat),Lo(I,ee.lat))}toLngLat(){return new ti(Ho(this.x),Ji(this.y))}toAltitude(){return hd(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Vc*dd(Ji(this.y))}}function $u($,y,I,ee,re,ge,ke,Ie,$e){const Le=(y+ee)/2,Ve=(I+re)/2,We=new xe(Le,Ve);Ie(We),function(Ze,tt,ot,mt,Tt,Ft){const Ht=ot-Tt,Nt=mt-Ft;return Math.abs((mt-tt)*Ht-(ot-Ze)*Nt)/Math.hypot(Ht,Nt)}(We.x,We.y,ge.x,ge.y,ke.x,ke.y)>=$e?($u($,y,I,Le,Ve,ge,We,Ie,$e),$u($,Le,Ve,ee,re,We,ke,Ie,$e)):$.push(ke)}function pd($,y,I){let ee=$[0],re=ee.x,ge=ee.y;y(ee);const ke=[ee];for(let Ie=1;Ie<$.length;Ie++){const $e=$[Ie],{x:Le,y:Ve}=$e;y($e),$u(ke,re,ge,Le,Ve,ee,$e,y,I),re=Le,ge=Ve,ee=$e}return ke}function yh($,y,I,ee,re){if(re(y,I)){const ge=y.add(I).mult(.5);ee(ge),yh($,y,ge,ee,re),yh($,ge,I,ee,re)}else $.push(I)}function fd($,y,I){let ee=$[0];y(ee);const re=[ee];for(let ge=1;ge<$.length;ge++){const ke=$[ge];y(ke),yh(re,ee,ke,y,I),ee=ke}return re}const vh=Math.pow(2,14)-1,at=-vh-1;function Ct($,y){const I=Math.round($.x*y),ee=Math.round($.y*y);return $.x=Ke(I,at,vh),$.y=Ke(ee,at,vh),(I<$.x||I>$.x+1||ee<$.y||ee>$.y+1)&&Dt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),$}function vt($,y,I){const ee=$.loadGeometry(),re=$.extent,ge=kr/re;if(y&&I&&I.projection.isReprojectedInTileSpace){const ke=1<<y.z,{scale:Ie,x:$e,y:Le,projection:Ve}=I,We=Ze=>{const tt=Ho((y.x+Ze.x/re)/ke),ot=Ji((y.y+Ze.y/re)/ke),mt=Ve.project(tt,ot);Ze.x=(mt.x*Ie-$e)*re,Ze.y=(mt.y*Ie-Le)*re};for(let Ze=0;Ze<ee.length;Ze++)if($.type!==1)ee[Ze]=pd(ee[Ze],We,1);else{const tt=[];for(const ot of ee[Ze])ot.x<0||ot.x>=re||ot.y<0||ot.y>=re||(We(ot),tt.push(ot));ee[Ze]=tt}}for(const ke of ee)for(const Ie of ke)Ct(Ie,ge);return ee}function Ge($,y){return{type:$.type,id:$.id,properties:$.properties,geometry:y?vt($):[]}}function et($,y,I,ee,re){$.emplaceBack(2*y+(ee+1)/2,2*I+(re+1)/2)}function yt($,y,I){$.emplaceBack(y.x,y.y,y.z,I[0]*16384,I[1]*16384,I[2]*16384)}class jt{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.projection=y.projection,this.layoutVertexArray=new tr,this.indexArray=new zr,this.segments=new Bi,this.programConfigurations=new al(y.layers,y.zoom),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(y,I,ee,re){const ge=this.layers[0],ke=[];let Ie=null;ge.type==="circle"&&(Ie=ge.layout.get("circle-sort-key"));for(const{feature:Le,id:Ve,index:We,sourceLayerIndex:Ze}of y){const tt=this.layers[0]._featureFilter.needGeometry,ot=Ge(Le,tt);if(!this.layers[0]._featureFilter.filter(new At(this.zoom),ot,ee))continue;const mt=Ie?Ie.evaluate(ot,{},ee):void 0,Tt={id:Ve,properties:Le.properties,type:Le.type,sourceLayerIndex:Ze,index:We,geometry:tt?ot.geometry:vt(Le,ee,re),patterns:{},sortKey:mt};ke.push(Tt)}Ie&&ke.sort((Le,Ve)=>Le.sortKey-Ve.sortKey);let $e=null;re.projection.name==="globe"&&(this.globeExtVertexArray=new ed,$e=re.projection);for(const Le of ke){const{geometry:Ve,index:We,sourceLayerIndex:Ze}=Le,tt=y[We].feature;this.addFeature(Le,Ve,We,I.availableImages,ee,$e),I.featureIndex.insert(tt,Ve,We,Ze,this.index)}}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Qd.members),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,ep.members))),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(y,I,ee,re,ge,ke){for(const Ie of I)for(const $e of Ie){const Le=$e.x,Ve=$e.y;if(Le<0||Le>=kr||Ve<0||Ve>=kr)continue;if(ke){const tt=ke.projectTilePoint(Le,Ve,ge),ot=ke.upVector(ge,Le,Ve),mt=this.globeExtVertexArray;yt(mt,tt,ot),yt(mt,tt,ot),yt(mt,tt,ot),yt(mt,tt,ot)}const We=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,y.sortKey),Ze=We.vertexLength;et(this.layoutVertexArray,Le,Ve,-1,-1),et(this.layoutVertexArray,Le,Ve,1,-1),et(this.layoutVertexArray,Le,Ve,1,1),et(this.layoutVertexArray,Le,Ve,-1,1),this.indexArray.emplaceBack(Ze,Ze+1,Ze+2),this.indexArray.emplaceBack(Ze,Ze+2,Ze+3),We.vertexLength+=4,We.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,{},re,ge)}}function cn($,y){for(let I=0;I<$.length;I++)if(li(y,$[I]))return!0;for(let I=0;I<y.length;I++)if(li($,y[I]))return!0;return!!ir($,y)}function Mn($,y,I){return!!li($,y)||!!Fi(y,$,I)}function Un($,y){if($.length===1)return Wo(y,$[0]);for(let I=0;I<y.length;I++){const ee=y[I];for(let re=0;re<ee.length;re++)if(li($,ee[re]))return!0}for(let I=0;I<$.length;I++)if(Wo(y,$[I]))return!0;for(let I=0;I<y.length;I++)if(ir($,y[I]))return!0;return!1}function hr($,y,I){if($.length>1){if(ir($,y))return!0;for(let ee=0;ee<y.length;ee++)if(Fi(y[ee],$,I))return!0}for(let ee=0;ee<$.length;ee++)if(Fi($[ee],y,I))return!0;return!1}function ir($,y){if($.length===0||y.length===0)return!1;for(let I=0;I<$.length-1;I++){const ee=$[I],re=$[I+1];for(let ge=0;ge<y.length-1;ge++)if(Mi(ee,re,y[ge],y[ge+1]))return!0}return!1}function Mi($,y,I,ee){return ln($,I,ee)!==ln(y,I,ee)&&ln($,y,I)!==ln($,y,ee)}function Fi($,y,I){const ee=I*I;if(y.length===1)return $.distSqr(y[0])<ee;for(let re=1;re<y.length;re++)if(ko($,y[re-1],y[re])<ee)return!0;return!1}function ko($,y,I){const ee=y.distSqr(I);if(ee===0)return $.distSqr(y);const re=(($.x-y.x)*(I.x-y.x)+($.y-y.y)*(I.y-y.y))/ee;return $.distSqr(re<0?y:re>1?I:I.sub(y)._mult(re)._add(y))}function Wo($,y){let I,ee,re,ge=!1;for(let ke=0;ke<$.length;ke++){I=$[ke];for(let Ie=0,$e=I.length-1;Ie<I.length;$e=Ie++)ee=I[Ie],re=I[$e],ee.y>y.y!=re.y>y.y&&y.x<(re.x-ee.x)*(y.y-ee.y)/(re.y-ee.y)+ee.x&&(ge=!ge)}return ge}function li($,y){let I=!1;for(let ee=0,re=$.length-1;ee<$.length;re=ee++){const ge=$[ee],ke=$[re];ge.y>y.y!=ke.y>y.y&&y.x<(ke.x-ge.x)*(y.y-ge.y)/(ke.y-ge.y)+ge.x&&(I=!I)}return I}function Ei($,y,I,ee,re){for(const ke of $)if(y<=ke.x&&I<=ke.y&&ee>=ke.x&&re>=ke.y)return!0;const ge=[new xe(y,I),new xe(y,re),new xe(ee,re),new xe(ee,I)];if($.length>2){for(const ke of ge)if(li($,ke))return!0}for(let ke=0;ke<$.length-1;ke++)if(Qi($[ke],$[ke+1],ge))return!0;return!1}function Qi($,y,I){const ee=I[0],re=I[2];if($.x<ee.x&&y.x<ee.x||$.x>re.x&&y.x>re.x||$.y<ee.y&&y.y<ee.y||$.y>re.y&&y.y>re.y)return!1;const ge=ln($,y,I[0]);return ge!==ln($,y,I[1])||ge!==ln($,y,I[2])||ge!==ln($,y,I[3])}function Gi($,y,I){const ee=y.paint.get($).value;return ee.kind==="constant"?ee.value:I.programConfigurations.get(y.id).getMaxValue($)}function uo($){return Math.sqrt($[0]*$[0]+$[1]*$[1])}function ms($,y,I,ee,re){if(!y[0]&&!y[1])return $;const ge=xe.convert(y)._mult(re);I==="viewport"&&ge._rotate(-ee);const ke=[];for(let Ie=0;Ie<$.length;Ie++)ke.push($[Ie].sub(ge));return ke}function _d($,y,I,ee){const re=xe.convert($)._mult(ee);return y==="viewport"&&re._rotate(-I),re}ur(jt,"CircleBucket",{omit:["layers"]});const md=new zn({"circle-sort-key":new sn(gn.layout_circle["circle-sort-key"])});var tm={paint:new zn({"circle-radius":new sn(gn.paint_circle["circle-radius"]),"circle-color":new sn(gn.paint_circle["circle-color"]),"circle-blur":new sn(gn.paint_circle["circle-blur"]),"circle-opacity":new sn(gn.paint_circle["circle-opacity"]),"circle-translate":new Wt(gn.paint_circle["circle-translate"]),"circle-translate-anchor":new Wt(gn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wt(gn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wt(gn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(gn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(gn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(gn.paint_circle["circle-stroke-opacity"])}),layout:md},gd=1e-6,Zo=typeof Float32Array!="undefined"?Float32Array:Array;function Yp(){var $=new Zo(9);return Zo!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}function gs($){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=1,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=1,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$}function tp($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=y[4],Ie=y[5],$e=y[6],Le=y[7],Ve=y[8],We=y[9],Ze=y[10],tt=y[11],ot=y[12],mt=y[13],Tt=y[14],Ft=y[15],Ht=I*Ie-ee*ke,Nt=I*$e-re*ke,qt=I*Le-ge*ke,Qt=ee*$e-re*Ie,Zt=ee*Le-ge*Ie,An=re*Le-ge*$e,wn=Ve*mt-We*ot,On=Ve*Tt-Ze*ot,Jn=Ve*Ft-tt*ot,Sn=We*Tt-Ze*mt,Bn=We*Ft-tt*mt,Vn=Ze*Ft-tt*Tt,Fn=Ht*Vn-Nt*Bn+qt*Sn+Qt*Jn-Zt*On+An*wn;return Fn?($[0]=(Ie*Vn-$e*Bn+Le*Sn)*(Fn=1/Fn),$[1]=(re*Bn-ee*Vn-ge*Sn)*Fn,$[2]=(mt*An-Tt*Zt+Ft*Qt)*Fn,$[3]=(Ze*Zt-We*An-tt*Qt)*Fn,$[4]=($e*Jn-ke*Vn-Le*On)*Fn,$[5]=(I*Vn-re*Jn+ge*On)*Fn,$[6]=(Tt*qt-ot*An-Ft*Nt)*Fn,$[7]=(Ve*An-Ze*qt+tt*Nt)*Fn,$[8]=(ke*Bn-Ie*Jn+Le*wn)*Fn,$[9]=(ee*Jn-I*Bn-ge*wn)*Fn,$[10]=(ot*Zt-mt*qt+Ft*Ht)*Fn,$[11]=(We*qt-Ve*Zt-tt*Ht)*Fn,$[12]=(Ie*On-ke*Sn-$e*wn)*Fn,$[13]=(I*Sn-ee*On+re*wn)*Fn,$[14]=(mt*Nt-ot*Qt-Tt*Ht)*Fn,$[15]=(Ve*Qt-We*Nt+Ze*Ht)*Fn,$):null}function Du($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=y[4],$e=y[5],Le=y[6],Ve=y[7],We=y[8],Ze=y[9],tt=y[10],ot=y[11],mt=y[12],Tt=y[13],Ft=y[14],Ht=y[15],Nt=I[0],qt=I[1],Qt=I[2],Zt=I[3];return $[0]=Nt*ee+qt*Ie+Qt*We+Zt*mt,$[1]=Nt*re+qt*$e+Qt*Ze+Zt*Tt,$[2]=Nt*ge+qt*Le+Qt*tt+Zt*Ft,$[3]=Nt*ke+qt*Ve+Qt*ot+Zt*Ht,$[4]=(Nt=I[4])*ee+(qt=I[5])*Ie+(Qt=I[6])*We+(Zt=I[7])*mt,$[5]=Nt*re+qt*$e+Qt*Ze+Zt*Tt,$[6]=Nt*ge+qt*Le+Qt*tt+Zt*Ft,$[7]=Nt*ke+qt*Ve+Qt*ot+Zt*Ht,$[8]=(Nt=I[8])*ee+(qt=I[9])*Ie+(Qt=I[10])*We+(Zt=I[11])*mt,$[9]=Nt*re+qt*$e+Qt*Ze+Zt*Tt,$[10]=Nt*ge+qt*Le+Qt*tt+Zt*Ft,$[11]=Nt*ke+qt*Ve+Qt*ot+Zt*Ht,$[12]=(Nt=I[12])*ee+(qt=I[13])*Ie+(Qt=I[14])*We+(Zt=I[15])*mt,$[13]=Nt*re+qt*$e+Qt*Ze+Zt*Tt,$[14]=Nt*ge+qt*Le+Qt*tt+Zt*Ft,$[15]=Nt*ke+qt*Ve+Qt*ot+Zt*Ht,$}function xh($,y,I){var ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt=I[0],Tt=I[1],Ft=I[2];return y===$?($[12]=y[0]*mt+y[4]*Tt+y[8]*Ft+y[12],$[13]=y[1]*mt+y[5]*Tt+y[9]*Ft+y[13],$[14]=y[2]*mt+y[6]*Tt+y[10]*Ft+y[14],$[15]=y[3]*mt+y[7]*Tt+y[11]*Ft+y[15]):(re=y[1],ge=y[2],ke=y[3],Ie=y[4],$e=y[5],Le=y[6],Ve=y[7],We=y[8],Ze=y[9],tt=y[10],ot=y[11],$[0]=ee=y[0],$[1]=re,$[2]=ge,$[3]=ke,$[4]=Ie,$[5]=$e,$[6]=Le,$[7]=Ve,$[8]=We,$[9]=Ze,$[10]=tt,$[11]=ot,$[12]=ee*mt+Ie*Tt+We*Ft+y[12],$[13]=re*mt+$e*Tt+Ze*Ft+y[13],$[14]=ge*mt+Le*Tt+tt*Ft+y[14],$[15]=ke*mt+Ve*Tt+ot*Ft+y[15]),$}function Gc($,y,I){var ee=I[0],re=I[1],ge=I[2];return $[0]=y[0]*ee,$[1]=y[1]*ee,$[2]=y[2]*ee,$[3]=y[3]*ee,$[4]=y[4]*re,$[5]=y[5]*re,$[6]=y[6]*re,$[7]=y[7]*re,$[8]=y[8]*ge,$[9]=y[9]*ge,$[10]=y[10]*ge,$[11]=y[11]*ge,$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15],$}function np($,y,I){var ee=Math.sin(I),re=Math.cos(I),ge=y[4],ke=y[5],Ie=y[6],$e=y[7],Le=y[8],Ve=y[9],We=y[10],Ze=y[11];return y!==$&&($[0]=y[0],$[1]=y[1],$[2]=y[2],$[3]=y[3],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[4]=ge*re+Le*ee,$[5]=ke*re+Ve*ee,$[6]=Ie*re+We*ee,$[7]=$e*re+Ze*ee,$[8]=Le*re-ge*ee,$[9]=Ve*re-ke*ee,$[10]=We*re-Ie*ee,$[11]=Ze*re-$e*ee,$}function yd($,y,I){var ee=Math.sin(I),re=Math.cos(I),ge=y[0],ke=y[1],Ie=y[2],$e=y[3],Le=y[8],Ve=y[9],We=y[10],Ze=y[11];return y!==$&&($[4]=y[4],$[5]=y[5],$[6]=y[6],$[7]=y[7],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[0]=ge*re-Le*ee,$[1]=ke*re-Ve*ee,$[2]=Ie*re-We*ee,$[3]=$e*re-Ze*ee,$[8]=ge*ee+Le*re,$[9]=ke*ee+Ve*re,$[10]=Ie*ee+We*re,$[11]=$e*ee+Ze*re,$}function Jp($,y){return $[0]=y[0],$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=y[1],$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=y[2],$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$}function Qp($,y,I){var ee,re,ge,ke=I[0],Ie=I[1],$e=I[2],Le=Math.hypot(ke,Ie,$e);return Le<gd?null:(ke*=Le=1/Le,Ie*=Le,$e*=Le,ee=Math.sin(y),re=Math.cos(y),$[0]=ke*ke*(ge=1-re)+re,$[1]=Ie*ke*ge+$e*ee,$[2]=$e*ke*ge-Ie*ee,$[3]=0,$[4]=ke*Ie*ge-$e*ee,$[5]=Ie*Ie*ge+re,$[6]=$e*Ie*ge+ke*ee,$[7]=0,$[8]=ke*$e*ge+Ie*ee,$[9]=Ie*$e*ge-ke*ee,$[10]=$e*$e*ge+re,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$)}Math.hypot||(Math.hypot=function(){for(var $=0,y=arguments.length;y--;)$+=arguments[y]*arguments[y];return Math.sqrt($)});var nm=Du;function rp(){var $=new Zo(3);return Zo!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$}function ef($){var y=new Zo(3);return y[0]=$[0],y[1]=$[1],y[2]=$[2],y}function bh($){return Math.hypot($[0],$[1],$[2])}function Lu($,y,I){var ee=new Zo(3);return ee[0]=$,ee[1]=y,ee[2]=I,ee}function Kl($,y,I){return $[0]=y[0]+I[0],$[1]=y[1]+I[1],$[2]=y[2]+I[2],$}function ip($,y,I){return $[0]=y[0]-I[0],$[1]=y[1]-I[1],$[2]=y[2]-I[2],$}function tf($,y,I){return $[0]=y[0]*I[0],$[1]=y[1]*I[1],$[2]=y[2]*I[2],$}function op($,y,I){return $[0]=Math.min(y[0],I[0]),$[1]=Math.min(y[1],I[1]),$[2]=Math.min(y[2],I[2]),$}function ap($,y,I){return $[0]=Math.max(y[0],I[0]),$[1]=Math.max(y[1],I[1]),$[2]=Math.max(y[2],I[2]),$}function Ga($,y,I){return $[0]=y[0]*I,$[1]=y[1]*I,$[2]=y[2]*I,$}function vd($,y,I,ee){return $[0]=y[0]+I[0]*ee,$[1]=y[1]+I[1]*ee,$[2]=y[2]+I[2]*ee,$}function So($,y){var I=y[0],ee=y[1],re=y[2],ge=I*I+ee*ee+re*re;return ge>0&&(ge=1/Math.sqrt(ge)),$[0]=y[0]*ge,$[1]=y[1]*ge,$[2]=y[2]*ge,$}function wa($,y){return $[0]*y[0]+$[1]*y[1]+$[2]*y[2]}function sp($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=I[0],Ie=I[1],$e=I[2];return $[0]=re*$e-ge*Ie,$[1]=ge*ke-ee*$e,$[2]=ee*Ie-re*ke,$}function Zi($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=I[3]*ee+I[7]*re+I[11]*ge+I[15];return $[0]=(I[0]*ee+I[4]*re+I[8]*ge+I[12])/(ke=ke||1),$[1]=(I[1]*ee+I[5]*re+I[9]*ge+I[13])/ke,$[2]=(I[2]*ee+I[6]*re+I[10]*ge+I[14])/ke,$}function nf($,y,I){var ee=I[0],re=I[1],ge=I[2],ke=y[0],Ie=y[1],$e=y[2],Le=re*$e-ge*Ie,Ve=ge*ke-ee*$e,We=ee*Ie-re*ke,Ze=re*We-ge*Ve,tt=ge*Le-ee*We,ot=ee*Ve-re*Le,mt=2*I[3];return Ve*=mt,We*=mt,tt*=2,ot*=2,$[0]=ke+(Le*=mt)+(Ze*=2),$[1]=Ie+Ve+tt,$[2]=$e+We+ot,$}var wh,qa=ip,rm=tf,im=bh;function rf($,y,I){return $[0]=y[0]*I,$[1]=y[1]*I,$[2]=y[2]*I,$[3]=y[3]*I,$}function qc($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=y[3];return $[0]=I[0]*ee+I[4]*re+I[8]*ge+I[12]*ke,$[1]=I[1]*ee+I[5]*re+I[9]*ge+I[13]*ke,$[2]=I[2]*ee+I[6]*re+I[10]*ge+I[14]*ke,$[3]=I[3]*ee+I[7]*re+I[11]*ge+I[15]*ke,$}function of(){var $=new Zo(4);return Zo!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$[3]=1,$}function af($){return $[0]=0,$[1]=0,$[2]=0,$[3]=1,$}function sf($,y,I){I*=.5;var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=Math.sin(I),$e=Math.cos(I);return $[0]=ee*$e+ke*Ie,$[1]=re*$e+ge*Ie,$[2]=ge*$e-re*Ie,$[3]=ke*$e-ee*Ie,$}function lf($,y,I){I*=.5;var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=Math.sin(I),$e=Math.cos(I);return $[0]=ee*$e-ge*Ie,$[1]=re*$e+ke*Ie,$[2]=ge*$e+ee*Ie,$[3]=ke*$e-re*Ie,$}rp(),wh=new Zo(4),Zo!=Float32Array&&(wh[0]=0,wh[1]=0,wh[2]=0,wh[3]=0),rp(),Lu(1,0,0),Lu(0,1,0),of(),of(),Yp();class lp{constructor(y,I){this.pos=y,this.dir=I}intersectsPlane(y,I,ee){const re=wa(I,this.dir);if(Math.abs(re)<1e-6)return!1;const ge=((y[0]-this.pos[0])*I[0]+(y[1]-this.pos[1])*I[1]+(y[2]-this.pos[2])*I[2])/re;return ee[0]=this.pos[0]+this.dir[0]*ge,ee[1]=this.pos[1]+this.dir[1]*ge,ee[2]=this.pos[2]+this.dir[2]*ge,!0}closestPointOnSphere(y,I,ee){if(function(tt,ot){var mt=tt[0],Tt=tt[1],Ft=tt[2],Ht=ot[0],Nt=ot[1],qt=ot[2];return Math.abs(mt-Ht)<=gd*Math.max(1,Math.abs(mt),Math.abs(Ht))&&Math.abs(Tt-Nt)<=gd*Math.max(1,Math.abs(Tt),Math.abs(Nt))&&Math.abs(Ft-qt)<=gd*Math.max(1,Math.abs(Ft),Math.abs(qt))}(this.pos,y)||I===0)return ee[0]=ee[1]=ee[2]=0,!1;const[re,ge,ke]=this.dir,Ie=this.pos[0]-y[0],$e=this.pos[1]-y[1],Le=this.pos[2]-y[2],Ve=re*re+ge*ge+ke*ke,We=2*(Ie*re+$e*ge+Le*ke),Ze=We*We-4*Ve*(Ie*Ie+$e*$e+Le*Le-I*I);if(Ze<0){const tt=Math.max(-We/2,0),ot=Ie+re*tt,mt=$e+ge*tt,Tt=Le+ke*tt,Ft=Math.hypot(ot,mt,Tt);return ee[0]=ot*I/Ft,ee[1]=mt*I/Ft,ee[2]=Tt*I/Ft,!1}{const tt=(-We-Math.sqrt(Ze))/(2*Ve);if(tt<0){const ot=Math.hypot(Ie,$e,Le);return ee[0]=Ie*I/ot,ee[1]=$e*I/ot,ee[2]=Le*I/ot,!1}return ee[0]=Ie+re*tt,ee[1]=$e+ge*tt,ee[2]=Le+ke*tt,!0}}}class cp{constructor(y,I,ee,re,ge){this.TL=y,this.TR=I,this.BR=ee,this.BL=re,this.horizon=ge}static fromInvProjectionMatrix(y,I,ee){const re=[-1,1,1],ge=[1,1,1],ke=[1,-1,1],Ie=[-1,-1,1],$e=Zi(re,re,y),Le=Zi(ge,ge,y),Ve=Zi(ke,ke,y),We=Zi(Ie,Ie,y);return new cp($e,Le,Ve,We,I/ee)}}class up{constructor(y,I){this.points=y,this.planes=I}static fromInvProjectionMatrix(y,I,ee,re){const ge=Math.pow(2,ee),ke=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($e=>{const Le=qc([],$e,y),Ve=1/Le[3]/I*ge;return function(We,Ze,tt){return We[0]=Ze[0]*tt[0],We[1]=Ze[1]*tt[1],We[2]=Ze[2]*tt[2],We[3]=Ze[3]*tt[3],We}(Le,Le,[Ve,Ve,re?1/Le[3]:Ve,Ve])}),Ie=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map($e=>{const Le=So([],sp([],qa([],ke[$e[0]],ke[$e[1]]),qa([],ke[$e[2]],ke[$e[1]]))),Ve=-wa(Le,ke[$e[1]]);return Le.concat(Ve)});return new up(ke,Ie)}}class Bo{static fromPoints(y){const I=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],ee=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const re of y)I[0]=Math.min(I[0],re[0]),I[1]=Math.min(I[1],re[1]),I[2]=Math.min(I[2],re[2]),ee[0]=Math.max(ee[0],re[0]),ee[1]=Math.max(ee[1],re[1]),ee[2]=Math.max(ee[2],re[2]);return new Bo(I,ee)}constructor(y,I){this.min=y,this.max=I,this.center=Ga([],Kl([],this.min,this.max),.5)}quadrant(y){const I=[y%2==0,y<2],ee=ef(this.min),re=ef(this.max);for(let ge=0;ge<I.length;ge++)ee[ge]=I[ge]?this.min[ge]:this.center[ge],re[ge]=I[ge]?this.center[ge]:this.max[ge];return re[2]=this.max[2],new Bo(ee,re)}distanceX(y){return Math.max(Math.min(this.max[0],y[0]),this.min[0])-y[0]}distanceY(y){return Math.max(Math.min(this.max[1],y[1]),this.min[1])-y[1]}distanceZ(y){return Math.max(Math.min(this.max[2],y[2]),this.min[2])-y[2]}getCorners(){const y=this.min,I=this.max;return[[y[0],y[1],y[2]],[I[0],y[1],y[2]],[I[0],I[1],y[2]],[y[0],I[1],y[2]],[y[0],y[1],I[2]],[I[0],y[1],I[2]],[I[0],I[1],I[2]],[y[0],I[1],I[2]]]}intersects(y){const I=this.getCorners();let ee=!0;for(let re=0;re<y.planes.length;re++){const ge=y.planes[re];let ke=0;for(let Ie=0;Ie<I.length;Ie++)ke+=wa(ge,I[Ie])+ge[3]>=0;if(ke===0)return 0;ke!==I.length&&(ee=!1)}if(ee)return 2;for(let re=0;re<3;re++){let ge=Number.MAX_VALUE,ke=-Number.MAX_VALUE;for(let Ie=0;Ie<y.points.length;Ie++){const $e=y.points[Ie][re]-this.min[re];ge=Math.min(ge,$e),ke=Math.max(ke,$e)}if(ke<0||ge>this.max[re]-this.min[re])return 0}return 1}}function cf($,y,I,ee,re,ge,ke,Ie,$e){if(ge&&$.queryGeometry.isAboveHorizon)return!1;ge&&($e*=$.pixelToTileUnitsFactor);const Le=$.tileID.canonical,Ve=I.projection.upVectorScale(Le,I.center.lat,I.worldSize).metersToTile;for(const We of y)for(const Ze of We){const tt=Ze.add(Ie),ot=re&&I.elevation?I.elevation.exaggeration()*re.getElevationAt(tt.x,tt.y,!0):0,mt=I.projection.projectTilePoint(tt.x,tt.y,Le);if(ot>0){const Nt=I.projection.upVector(Le,tt.x,tt.y);mt.x+=Nt[0]*Ve*ot,mt.y+=Nt[1]*Ve*ot,mt.z+=Nt[2]*Ve*ot}const Tt=ge?tt:om(mt.x,mt.y,mt.z,ee),Ft=ge?$.tilespaceRays.map(Nt=>sm(Nt,ot)):$.queryGeometry.screenGeometry,Ht=qc([],[mt.x,mt.y,mt.z,1],ee);if(!ke&&ge?$e*=Ht[3]/I.cameraToCenterDistance:ke&&!ge&&($e*=I.cameraToCenterDistance/Ht[3]),ge){const Nt=Ji((Ze.y/kr+Le.y)/(1<<Le.z));$e/=I.projection.pixelsPerMeter(Nt,1)/Lo(1,Nt)}if(Mn(Ft,Tt,$e))return!0}return!1}function om($,y,I,ee){const re=qc([],[$,y,I,1],ee);return new xe(re[0]/re[3],re[1]/re[3])}const uf=Lu(0,0,0),am=Lu(0,0,1);function sm($,y){const I=rp();return uf[2]=y,$.intersectsPlane(uf,am,I),new xe(I[0],I[1])}class hf extends jt{}function df($,{width:y,height:I},ee,re){if(re){if(re instanceof Uint8ClampedArray)re=new Uint8Array(re.buffer);else if(re.length!==y*I*ee)throw new RangeError("mismatched image size")}else re=new Uint8Array(y*I*ee);return $.width=y,$.height=I,$.data=re,$}function pf($,y,I){const{width:ee,height:re}=y;ee===$.width&&re===$.height||(hp($,y,{x:0,y:0},{x:0,y:0},{width:Math.min($.width,ee),height:Math.min($.height,re)},I),$.width=ee,$.height=re,$.data=y.data)}function hp($,y,I,ee,re,ge){if(re.width===0||re.height===0)return y;if(re.width>$.width||re.height>$.height||I.x>$.width-re.width||I.y>$.height-re.height)throw new RangeError("out of range source coordinates for image copy");if(re.width>y.width||re.height>y.height||ee.x>y.width-re.width||ee.y>y.height-re.height)throw new RangeError("out of range destination coordinates for image copy");const ke=$.data,Ie=y.data;for(let $e=0;$e<re.height;$e++){const Le=((I.y+$e)*$.width+I.x)*ge,Ve=((ee.y+$e)*y.width+ee.x)*ge;for(let We=0;We<re.width*ge;We++)Ie[Ve+We]=ke[Le+We]}return y}ur(hf,"HeatmapBucket",{omit:["layers"]});class sl{constructor(y,I){df(this,y,1,I)}resize(y){pf(this,new sl(y),1)}clone(){return new sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,I,ee,re,ge){hp(y,I,ee,re,ge,1)}}class Xo{constructor(y,I){df(this,y,4,I)}resize(y){pf(this,new Xo(y),4)}replace(y,I){I?this.data.set(y):this.data=y instanceof Uint8ClampedArray?new Uint8Array(y.buffer):y}clone(){return new Xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,I,ee,re,ge){hp(y,I,ee,re,ge,4)}}ur(sl,"AlphaImage"),ur(Xo,"RGBAImage");var lm={paint:new zn({"heatmap-radius":new sn(gn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(gn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wt(gn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new pn(gn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wt(gn.paint_heatmap["heatmap-opacity"])})};function dp($){const y={},I=$.resolution||256,ee=$.clips?$.clips.length:1,re=$.image||new Xo({width:I,height:ee}),ge=(ke,Ie,$e)=>{y[$.evaluationKey]=$e;const Le=$.expression.evaluate(y);re.data[ke+Ie+0]=Math.floor(255*Le.r/Le.a),re.data[ke+Ie+1]=Math.floor(255*Le.g/Le.a),re.data[ke+Ie+2]=Math.floor(255*Le.b/Le.a),re.data[ke+Ie+3]=Math.floor(255*Le.a)};if($.clips)for(let ke=0,Ie=0;ke<ee;++ke,Ie+=4*I)for(let $e=0,Le=0;$e<I;$e++,Le+=4){const Ve=$e/(I-1),{start:We,end:Ze}=$.clips[ke];ge(Ie,Le,We*(1-Ve)+Ze*Ve)}else for(let ke=0,Ie=0;ke<I;ke++,Ie+=4)ge(0,Ie,ke/(I-1));return re}var cm={paint:new zn({"hillshade-illumination-direction":new Wt(gn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wt(gn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wt(gn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wt(gn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wt(gn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wt(gn.paint_hillshade["hillshade-accent-color"])})};const um=Ln([{name:"a_pos",components:2,type:"Int16"}],4),{members:hm}=um;var xd=bd,dm=bd;function bd($,y,I){I=I||2;var ee,re,ge,ke,Ie,$e,Le,Ve=y&&y.length,We=Ve?y[0]*I:$.length,Ze=ff($,0,We,I,!0),tt=[];if(!Ze||Ze.next===Ze.prev)return tt;if(Ve&&(Ze=function(mt,Tt,Ft,Ht){var Nt,qt,Qt,Zt=[];for(Nt=0,qt=Tt.length;Nt<qt;Nt++)(Qt=ff(mt,Tt[Nt]*Ht,Nt<qt-1?Tt[Nt+1]*Ht:mt.length,Ht,!1))===Qt.next&&(Qt.steiner=!0),Zt.push(xm(Qt));for(Zt.sort(gm),Nt=0;Nt<Zt.length;Nt++)Ft=ym(Zt[Nt],Ft);return Ft}($,y,Ze,I)),$.length>80*I){ee=ge=$[0],re=ke=$[1];for(var ot=I;ot<We;ot+=I)(Ie=$[ot])<ee&&(ee=Ie),($e=$[ot+1])<re&&(re=$e),Ie>ge&&(ge=Ie),$e>ke&&(ke=$e);Le=(Le=Math.max(ge-ee,ke-re))!==0?32767/Le:0}return Eh(Ze,tt,I,ee,re,Le,0),tt}function ff($,y,I,ee,re){var ge,ke;if(re===_p($,y,I,ee)>0)for(ge=y;ge<I;ge+=ee)ke=gf(ge,$[ge],$[ge+1],ke);else for(ge=I-ee;ge>=y;ge-=ee)ke=gf(ge,$[ge],$[ge+1],ke);return ke&&wd(ke,ke.next)&&(Ah(ke),ke=ke.next),ke}function Hc($,y){if(!$)return $;y||(y=$);var I,ee=$;do if(I=!1,ee.steiner||!wd(ee,ee.next)&&ji(ee.prev,ee,ee.next)!==0)ee=ee.next;else{if(Ah(ee),(ee=y=ee.prev)===ee.next)break;I=!0}while(I||ee!==y);return y}function Eh($,y,I,ee,re,ge,ke){if($){!ke&&ge&&function(Ve,We,Ze,tt){var ot=Ve;do ot.z===0&&(ot.z=pp(ot.x,ot.y,We,Ze,tt)),ot.prevZ=ot.prev,ot.nextZ=ot.next,ot=ot.next;while(ot!==Ve);ot.prevZ.nextZ=null,ot.prevZ=null,function(mt){var Tt,Ft,Ht,Nt,qt,Qt,Zt,An,wn=1;do{for(Ft=mt,mt=null,qt=null,Qt=0;Ft;){for(Qt++,Ht=Ft,Zt=0,Tt=0;Tt<wn&&(Zt++,Ht=Ht.nextZ);Tt++);for(An=wn;Zt>0||An>0&&Ht;)Zt!==0&&(An===0||!Ht||Ft.z<=Ht.z)?(Nt=Ft,Ft=Ft.nextZ,Zt--):(Nt=Ht,Ht=Ht.nextZ,An--),qt?qt.nextZ=Nt:mt=Nt,Nt.prevZ=qt,qt=Nt;Ft=Ht}qt.nextZ=null,wn*=2}while(Qt>1)}(ot)}($,ee,re,ge);for(var Ie,$e,Le=$;$.prev!==$.next;)if(Ie=$.prev,$e=$.next,ge?fm($,ee,re,ge):pm($))y.push(Ie.i/I|0),y.push($.i/I|0),y.push($e.i/I|0),Ah($),$=$e.next,Le=$e.next;else if(($=$e)===Le){ke?ke===1?Eh($=_m(Hc($),y,I),y,I,ee,re,ge,2):ke===2&&mm($,y,I,ee,re,ge):Eh(Hc($),y,I,ee,re,ge,1);break}}}function pm($){var y=$.prev,I=$,ee=$.next;if(ji(y,I,ee)>=0)return!1;for(var re=y.x,ge=I.x,ke=ee.x,Ie=y.y,$e=I.y,Le=ee.y,Ve=re<ge?re<ke?re:ke:ge<ke?ge:ke,We=Ie<$e?Ie<Le?Ie:Le:$e<Le?$e:Le,Ze=re>ge?re>ke?re:ke:ge>ke?ge:ke,tt=Ie>$e?Ie>Le?Ie:Le:$e>Le?$e:Le,ot=ee.next;ot!==y;){if(ot.x>=Ve&&ot.x<=Ze&&ot.y>=We&&ot.y<=tt&&Bu(re,Ie,ge,$e,ke,Le,ot.x,ot.y)&&ji(ot.prev,ot,ot.next)>=0)return!1;ot=ot.next}return!0}function fm($,y,I,ee){var re=$.prev,ge=$,ke=$.next;if(ji(re,ge,ke)>=0)return!1;for(var Ie=re.x,$e=ge.x,Le=ke.x,Ve=re.y,We=ge.y,Ze=ke.y,tt=Ie<$e?Ie<Le?Ie:Le:$e<Le?$e:Le,ot=Ve<We?Ve<Ze?Ve:Ze:We<Ze?We:Ze,mt=Ie>$e?Ie>Le?Ie:Le:$e>Le?$e:Le,Tt=Ve>We?Ve>Ze?Ve:Ze:We>Ze?We:Ze,Ft=pp(tt,ot,y,I,ee),Ht=pp(mt,Tt,y,I,ee),Nt=$.prevZ,qt=$.nextZ;Nt&&Nt.z>=Ft&&qt&&qt.z<=Ht;){if(Nt.x>=tt&&Nt.x<=mt&&Nt.y>=ot&&Nt.y<=Tt&&Nt!==re&&Nt!==ke&&Bu(Ie,Ve,$e,We,Le,Ze,Nt.x,Nt.y)&&ji(Nt.prev,Nt,Nt.next)>=0||(Nt=Nt.prevZ,qt.x>=tt&&qt.x<=mt&&qt.y>=ot&&qt.y<=Tt&&qt!==re&&qt!==ke&&Bu(Ie,Ve,$e,We,Le,Ze,qt.x,qt.y)&&ji(qt.prev,qt,qt.next)>=0))return!1;qt=qt.nextZ}for(;Nt&&Nt.z>=Ft;){if(Nt.x>=tt&&Nt.x<=mt&&Nt.y>=ot&&Nt.y<=Tt&&Nt!==re&&Nt!==ke&&Bu(Ie,Ve,$e,We,Le,Ze,Nt.x,Nt.y)&&ji(Nt.prev,Nt,Nt.next)>=0)return!1;Nt=Nt.prevZ}for(;qt&&qt.z<=Ht;){if(qt.x>=tt&&qt.x<=mt&&qt.y>=ot&&qt.y<=Tt&&qt!==re&&qt!==ke&&Bu(Ie,Ve,$e,We,Le,Ze,qt.x,qt.y)&&ji(qt.prev,qt,qt.next)>=0)return!1;qt=qt.nextZ}return!0}function _m($,y,I){var ee=$;do{var re=ee.prev,ge=ee.next.next;!wd(re,ge)&&_f(re,ee,ee.next,ge)&&Th(re,ge)&&Th(ge,re)&&(y.push(re.i/I|0),y.push(ee.i/I|0),y.push(ge.i/I|0),Ah(ee),Ah(ee.next),ee=$=ge),ee=ee.next}while(ee!==$);return Hc(ee)}function mm($,y,I,ee,re,ge){var ke=$;do{for(var Ie=ke.next.next;Ie!==ke.prev;){if(ke.i!==Ie.i&&bm(ke,Ie)){var $e=mf(ke,Ie);return ke=Hc(ke,ke.next),$e=Hc($e,$e.next),Eh(ke,y,I,ee,re,ge,0),void Eh($e,y,I,ee,re,ge,0)}Ie=Ie.next}ke=ke.next}while(ke!==$)}function gm($,y){return $.x-y.x}function ym($,y){var I=function(re,ge){var ke,Ie=ge,$e=re.x,Le=re.y,Ve=-1/0;do{if(Le<=Ie.y&&Le>=Ie.next.y&&Ie.next.y!==Ie.y){var We=Ie.x+(Le-Ie.y)*(Ie.next.x-Ie.x)/(Ie.next.y-Ie.y);if(We<=$e&&We>Ve&&(Ve=We,ke=Ie.x<Ie.next.x?Ie:Ie.next,We===$e))return ke}Ie=Ie.next}while(Ie!==ge);if(!ke)return null;var Ze,tt=ke,ot=ke.x,mt=ke.y,Tt=1/0;Ie=ke;do $e>=Ie.x&&Ie.x>=ot&&$e!==Ie.x&&Bu(Le<mt?$e:Ve,Le,ot,mt,Le<mt?Ve:$e,Le,Ie.x,Ie.y)&&(Ze=Math.abs(Le-Ie.y)/($e-Ie.x),Th(Ie,re)&&(Ze<Tt||Ze===Tt&&(Ie.x>ke.x||Ie.x===ke.x&&vm(ke,Ie)))&&(ke=Ie,Tt=Ze)),Ie=Ie.next;while(Ie!==tt);return ke}($,y);if(!I)return y;var ee=mf(I,$);return Hc(ee,ee.next),Hc(I,I.next)}function vm($,y){return ji($.prev,$,y.prev)<0&&ji(y.next,$,$.next)<0}function pp($,y,I,ee,re){return($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=($-I)*re|0)|$<<8))|$<<4))|$<<2))|$<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-ee)*re|0)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function xm($){var y=$,I=$;do(y.x<I.x||y.x===I.x&&y.y<I.y)&&(I=y),y=y.next;while(y!==$);return I}function Bu($,y,I,ee,re,ge,ke,Ie){return(re-ke)*(y-Ie)>=($-ke)*(ge-Ie)&&($-ke)*(ee-Ie)>=(I-ke)*(y-Ie)&&(I-ke)*(ge-Ie)>=(re-ke)*(ee-Ie)}function bm($,y){return $.next.i!==y.i&&$.prev.i!==y.i&&!function(I,ee){var re=I;do{if(re.i!==I.i&&re.next.i!==I.i&&re.i!==ee.i&&re.next.i!==ee.i&&_f(re,re.next,I,ee))return!0;re=re.next}while(re!==I);return!1}($,y)&&(Th($,y)&&Th(y,$)&&function(I,ee){var re=I,ge=!1,ke=(I.x+ee.x)/2,Ie=(I.y+ee.y)/2;do re.y>Ie!=re.next.y>Ie&&re.next.y!==re.y&&ke<(re.next.x-re.x)*(Ie-re.y)/(re.next.y-re.y)+re.x&&(ge=!ge),re=re.next;while(re!==I);return ge}($,y)&&(ji($.prev,$,y.prev)||ji($,y.prev,y))||wd($,y)&&ji($.prev,$,$.next)>0&&ji(y.prev,y,y.next)>0)}function ji($,y,I){return(y.y-$.y)*(I.x-y.x)-(y.x-$.x)*(I.y-y.y)}function wd($,y){return $.x===y.x&&$.y===y.y}function _f($,y,I,ee){var re=Td(ji($,y,I)),ge=Td(ji($,y,ee)),ke=Td(ji(I,ee,$)),Ie=Td(ji(I,ee,y));return re!==ge&&ke!==Ie||!(re!==0||!Ed($,I,y))||!(ge!==0||!Ed($,ee,y))||!(ke!==0||!Ed(I,$,ee))||!(Ie!==0||!Ed(I,y,ee))}function Ed($,y,I){return y.x<=Math.max($.x,I.x)&&y.x>=Math.min($.x,I.x)&&y.y<=Math.max($.y,I.y)&&y.y>=Math.min($.y,I.y)}function Td($){return $>0?1:$<0?-1:0}function Th($,y){return ji($.prev,$,$.next)<0?ji($,y,$.next)>=0&&ji($,$.prev,y)>=0:ji($,y,$.prev)<0||ji($,$.next,y)<0}function mf($,y){var I=new fp($.i,$.x,$.y),ee=new fp(y.i,y.x,y.y),re=$.next,ge=y.prev;return $.next=y,y.prev=$,I.next=re,re.prev=I,ee.next=I,I.prev=ee,ge.next=ee,ee.prev=ge,ee}function gf($,y,I,ee){var re=new fp($,y,I);return ee?(re.next=ee.next,re.prev=ee,ee.next.prev=re,ee.next=re):(re.prev=re,re.next=re),re}function Ah($){$.next.prev=$.prev,$.prev.next=$.next,$.prevZ&&($.prevZ.nextZ=$.nextZ),$.nextZ&&($.nextZ.prevZ=$.prevZ)}function fp($,y,I){this.i=$,this.x=y,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _p($,y,I,ee){for(var re=0,ge=y,ke=I-ee;ge<I;ge+=ee)re+=($[ke]-$[ge])*($[ge+1]+$[ke+1]),ke=ge;return re}function wm($,y,I,ee,re){yf($,y,I||0,ee||$.length-1,re||Em)}function yf($,y,I,ee,re){for(;ee>I;){if(ee-I>600){var ge=ee-I+1,ke=y-I+1,Ie=Math.log(ge),$e=.5*Math.exp(2*Ie/3),Le=.5*Math.sqrt(Ie*$e*(ge-$e)/ge)*(ke-ge/2<0?-1:1);yf($,y,Math.max(I,Math.floor(y-ke*$e/ge+Le)),Math.min(ee,Math.floor(y+(ge-ke)*$e/ge+Le)),re)}var Ve=$[y],We=I,Ze=ee;for(kh($,I,y),re($[ee],Ve)>0&&kh($,I,ee);We<Ze;){for(kh($,We,Ze),We++,Ze--;re($[We],Ve)<0;)We++;for(;re($[Ze],Ve)>0;)Ze--}re($[I],Ve)===0?kh($,I,Ze):kh($,++Ze,ee),Ze<=y&&(I=Ze+1),y<=Ze&&(ee=Ze-1)}}function kh($,y,I){var ee=$[y];$[y]=$[I],$[I]=ee}function Em($,y){return $<y?-1:$>y?1:0}function mp($,y){const I=$.length;if(I<=1)return[$];const ee=[];let re,ge;for(let ke=0;ke<I;ke++){const Ie=In($[ke]);Ie!==0&&($[ke].area=Math.abs(Ie),ge===void 0&&(ge=Ie<0),ge===Ie<0?(re&&ee.push(re),re=[$[ke]]):re.push($[ke]))}if(re&&ee.push(re),y>1)for(let ke=0;ke<ee.length;ke++)ee[ke].length<=y||(wm(ee[ke],y,1,ee[ke].length-1,Tm),ee[ke]=ee[ke].slice(0,y));return ee}function Tm($,y){return y.area-$.area}function gp($,y,I){const ee=I.patternDependencies;let re=!1;for(const ge of y){const ke=ge.paint.get(`${$}-pattern`);ke.isConstant()||(re=!0);const Ie=ke.constantOr(null);Ie&&(re=!0,ee[Ie.to]=!0,ee[Ie.from]=!0)}return re}function yp($,y,I,ee,re){const ge=re.patternDependencies;for(const ke of y){const Ie=ke.paint.get(`${$}-pattern`).value;if(Ie.kind!=="constant"){let $e=Ie.evaluate({zoom:ee-1},I,{},re.availableImages),Le=Ie.evaluate({zoom:ee},I,{},re.availableImages),Ve=Ie.evaluate({zoom:ee+1},I,{},re.availableImages);$e=$e&&$e.name?$e.name:$e,Le=Le&&Le.name?Le.name:Le,Ve=Ve&&Ve.name?Ve.name:Ve,ge[$e]=!0,ge[Le]=!0,ge[Ve]=!0,I.patterns[ke.id]={min:$e,mid:Le,max:Ve}}}return I}bd.deviation=function($,y,I,ee){var re=y&&y.length,ge=Math.abs(_p($,0,re?y[0]*I:$.length,I));if(re)for(var ke=0,Ie=y.length;ke<Ie;ke++)ge-=Math.abs(_p($,y[ke]*I,ke<Ie-1?y[ke+1]*I:$.length,I));var $e=0;for(ke=0;ke<ee.length;ke+=3){var Le=ee[ke]*I,Ve=ee[ke+1]*I,We=ee[ke+2]*I;$e+=Math.abs(($[Le]-$[We])*($[Ve+1]-$[Le+1])-($[Le]-$[Ve])*($[We+1]-$[Le+1]))}return ge===0&&$e===0?0:Math.abs(($e-ge)/ge)},bd.flatten=function($){for(var y=$[0][0].length,I={vertices:[],holes:[],dimensions:y},ee=0,re=0;re<$.length;re++){for(var ge=0;ge<$[re].length;ge++)for(var ke=0;ke<y;ke++)I.vertices.push($[re][ge][ke]);re>0&&I.holes.push(ee+=$[re-1].length)}return I},xd.default=dm;class Ad{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tr,this.indexArray=new zr,this.indexArray2=new to,this.programConfigurations=new al(y.layers,y.zoom),this.segments=new Bi,this.segments2=new Bi,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.projection=y.projection}populate(y,I,ee,re){this.hasPattern=gp("fill",this.layers,I);const ge=this.layers[0].layout.get("fill-sort-key"),ke=[];for(const{feature:Ie,id:$e,index:Le,sourceLayerIndex:Ve}of y){const We=this.layers[0]._featureFilter.needGeometry,Ze=Ge(Ie,We);if(!this.layers[0]._featureFilter.filter(new At(this.zoom),Ze,ee))continue;const tt=ge?ge.evaluate(Ze,{},ee,I.availableImages):void 0,ot={id:$e,properties:Ie.properties,type:Ie.type,sourceLayerIndex:Ve,index:Le,geometry:We?Ze.geometry:vt(Ie,ee,re),patterns:{},sortKey:tt};ke.push(ot)}ge&&ke.sort((Ie,$e)=>Ie.sortKey-$e.sortKey);for(const Ie of ke){const{geometry:$e,index:Le,sourceLayerIndex:Ve}=Ie;if(this.hasPattern){const We=yp("fill",this.layers,Ie,this.zoom,I);this.patternFeatures.push(We)}else this.addFeature(Ie,$e,Le,ee,{},I.availableImages);I.featureIndex.insert(y[Le].feature,$e,Le,Ve,this.index)}}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}addFeatures(y,I,ee,re,ge){for(const ke of this.patternFeatures)this.addFeature(ke,ke.geometry,ke.index,I,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,hm),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.indexBuffer2=y.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(y,I,ee,re,ge,ke=[]){for(const Ie of mp(I,500)){let $e=0;for(const ot of Ie)$e+=ot.length;const Le=this.segments.prepareSegment($e,this.layoutVertexArray,this.indexArray),Ve=Le.vertexLength,We=[],Ze=[];for(const ot of Ie){if(ot.length===0)continue;ot!==Ie[0]&&Ze.push(We.length/2);const mt=this.segments2.prepareSegment(ot.length,this.layoutVertexArray,this.indexArray2),Tt=mt.vertexLength;this.layoutVertexArray.emplaceBack(ot[0].x,ot[0].y),this.indexArray2.emplaceBack(Tt+ot.length-1,Tt),We.push(ot[0].x),We.push(ot[0].y);for(let Ft=1;Ft<ot.length;Ft++)this.layoutVertexArray.emplaceBack(ot[Ft].x,ot[Ft].y),this.indexArray2.emplaceBack(Tt+Ft-1,Tt+Ft),We.push(ot[Ft].x),We.push(ot[Ft].y);mt.vertexLength+=ot.length,mt.primitiveLength+=ot.length}const tt=xd(We,Ze);for(let ot=0;ot<tt.length;ot+=3)this.indexArray.emplaceBack(Ve+tt[ot],Ve+tt[ot+1],Ve+tt[ot+2]);Le.vertexLength+=$e,Le.primitiveLength+=tt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,ge,ke,re)}}ur(Ad,"FillBucket",{omit:["layers","patternFeatures"]});const Am=new zn({"fill-sort-key":new sn(gn.layout_fill["fill-sort-key"])});var km={paint:new zn({"fill-antialias":new Wt(gn.paint_fill["fill-antialias"]),"fill-opacity":new sn(gn.paint_fill["fill-opacity"]),"fill-color":new sn(gn.paint_fill["fill-color"]),"fill-outline-color":new sn(gn.paint_fill["fill-outline-color"]),"fill-translate":new Wt(gn.paint_fill["fill-translate"]),"fill-translate-anchor":new Wt(gn.paint_fill["fill-translate-anchor"]),"fill-pattern":new mn(gn.paint_fill["fill-pattern"])}),layout:Am};const Sm=Ln([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Cm=Ln([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Mm=Ln([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Im}=Sm;var vf=Fu;function Fu($,y,I,ee,re){this.properties={},this.extent=I,this.type=0,this._pbf=$,this._geometry=-1,this._keys=ee,this._values=re,$.readFields(Pm,this,y)}function Pm($,y,I){$==1?y.id=I.readVarint():$==2?function(ee,re){for(var ge=ee.readVarint()+ee.pos;ee.pos<ge;){var ke=re._keys[ee.readVarint()],Ie=re._values[ee.readVarint()];re.properties[ke]=Ie}}(I,y):$==3?y.type=I.readVarint():$==4&&(y._geometry=I.pos)}function Om($){for(var y,I,ee=0,re=0,ge=$.length,ke=ge-1;re<ge;ke=re++)ee+=((I=$[ke]).x-(y=$[re]).x)*(y.y+I.y);return ee}Fu.types=["Unknown","Point","LineString","Polygon"],Fu.prototype.loadGeometry=function(){var $=this._pbf;$.pos=this._geometry;for(var y,I=$.readVarint()+$.pos,ee=1,re=0,ge=0,ke=0,Ie=[];$.pos<I;){if(re<=0){var $e=$.readVarint();ee=7&$e,re=$e>>3}if(re--,ee===1||ee===2)ge+=$.readSVarint(),ke+=$.readSVarint(),ee===1&&(y&&Ie.push(y),y=[]),y.push(new xe(ge,ke));else{if(ee!==7)throw new Error("unknown command "+ee);y&&y.push(y[0].clone())}}return y&&Ie.push(y),Ie},Fu.prototype.bbox=function(){var $=this._pbf;$.pos=this._geometry;for(var y=$.readVarint()+$.pos,I=1,ee=0,re=0,ge=0,ke=1/0,Ie=-1/0,$e=1/0,Le=-1/0;$.pos<y;){if(ee<=0){var Ve=$.readVarint();I=7&Ve,ee=Ve>>3}if(ee--,I===1||I===2)(re+=$.readSVarint())<ke&&(ke=re),re>Ie&&(Ie=re),(ge+=$.readSVarint())<$e&&($e=ge),ge>Le&&(Le=ge);else if(I!==7)throw new Error("unknown command "+I)}return[ke,$e,Ie,Le]},Fu.prototype.toGeoJSON=function($,y,I){var ee,re,ge=this.extent*Math.pow(2,I),ke=this.extent*$,Ie=this.extent*y,$e=this.loadGeometry(),Le=Fu.types[this.type];function Ve(tt){for(var ot=0;ot<tt.length;ot++){var mt=tt[ot];tt[ot]=[360*(mt.x+ke)/ge-180,360/Math.PI*Math.atan(Math.exp((180-360*(mt.y+Ie)/ge)*Math.PI/180))-90]}}switch(this.type){case 1:var We=[];for(ee=0;ee<$e.length;ee++)We[ee]=$e[ee][0];Ve($e=We);break;case 2:for(ee=0;ee<$e.length;ee++)Ve($e[ee]);break;case 3:for($e=function(tt){var ot=tt.length;if(ot<=1)return[tt];for(var mt,Tt,Ft=[],Ht=0;Ht<ot;Ht++){var Nt=Om(tt[Ht]);Nt!==0&&(Tt===void 0&&(Tt=Nt<0),Tt===Nt<0?(mt&&Ft.push(mt),mt=[tt[Ht]]):mt.push(tt[Ht]))}return mt&&Ft.push(mt),Ft}($e),ee=0;ee<$e.length;ee++)for(re=0;re<$e[ee].length;re++)Ve($e[ee][re])}$e.length===1?$e=$e[0]:Le="Multi"+Le;var Ze={type:"Feature",geometry:{type:Le,coordinates:$e},properties:this.properties};return"id"in this&&(Ze.id=this.id),Ze};var xf=bf;function bf($,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=$,this._keys=[],this._values=[],this._features=[],$.readFields(Rm,this,y),this.length=this._features.length}function Rm($,y,I){$===15?y.version=I.readVarint():$===1?y.name=I.readString():$===5?y.extent=I.readVarint():$===2?y._features.push(I.pos):$===3?y._keys.push(I.readString()):$===4&&y._values.push(function(ee){for(var re=null,ge=ee.readVarint()+ee.pos;ee.pos<ge;){var ke=ee.readVarint()>>3;re=ke===1?ee.readString():ke===2?ee.readFloat():ke===3?ee.readDouble():ke===4?ee.readVarint64():ke===5?ee.readVarint():ke===6?ee.readSVarint():ke===7?ee.readBoolean():null}return re}(I))}function zm($,y,I){if($===3){var ee=new xf(I,I.readVarint()+I.pos);ee.length&&(y[ee.name]=ee)}}bf.prototype.feature=function($){if($<0||$>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[$];var y=this._pbf.readVarint()+this._pbf.pos;return new vf(this._pbf,y,this.extent,this._keys,this._values)};var Wc={VectorTile:function($,y){this.layers=$.readFields(zm,{},y)},VectorTileFeature:vf,VectorTileLayer:xf};function kd($,y,I,ee){const re=[],ge=ee===0?(ke,Ie,$e,Le,Ve,We)=>{ke.push(new xe(We,$e+(We-Ie)/(Le-Ie)*(Ve-$e)))}:(ke,Ie,$e,Le,Ve,We)=>{ke.push(new xe(Ie+(We-$e)/(Ve-$e)*(Le-Ie),We))};for(const ke of $){const Ie=[];for(const $e of ke){if($e.length<=2)continue;const Le=[];for(let Ze=0;Ze<$e.length-1;Ze++){const tt=$e[Ze].x,ot=$e[Ze].y,mt=$e[Ze+1].x,Tt=$e[Ze+1].y,Ft=ee===0?tt:ot,Ht=ee===0?mt:Tt;Ft<y?Ht>y&&ge(Le,tt,ot,mt,Tt,y):Ft>I?Ht<I&&ge(Le,tt,ot,mt,Tt,I):Le.push($e[Ze]),Ht<y&&Ft>=y&&ge(Le,tt,ot,mt,Tt,y),Ht>I&&Ft<=I&&ge(Le,tt,ot,mt,Tt,I)}let Ve=$e[$e.length-1];const We=ee===0?Ve.x:Ve.y;We>=y&&We<=I&&Le.push(Ve),Le.length&&(Ve=Le[Le.length-1],Le[0].x===Ve.x&&Le[0].y===Ve.y||Le.push(Le[0]),Ie.push(Le))}Ie.length&&re.push(Ie)}return re}const $m=Wc.VectorTileFeature.types,Dm=Math.pow(2,13);function Sh($,y,I,ee,re,ge,ke,Ie){$.emplaceBack((y<<1)+ke,(I<<1)+ge,(Math.floor(ee*Dm)<<1)+re,Math.round(Ie))}function Ch($,y,I){$.emplaceBack(y.x,y.y,y.z,I[0]*16384,I[1]*16384,I[2]*16384)}class wf{constructor(){this.acc=new xe(0,0),this.polyCount=[]}startRing(y){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new xe(y.x,y.y),this.max=new xe(y.x,y.y))}append(y,I){this.currentPolyCount.edges++,this.acc._add(y);const ee=this.min,re=this.max;y.x<ee.x?ee.x=y.x:y.x>re.x&&(re.x=y.x),y.y<ee.y?ee.y=y.y:y.y>re.y&&(re.y=y.y),((y.x===0||y.x===kr)&&y.x===I.x)!=((y.y===0||y.y===kr)&&y.y===I.y)&&this.processBorderOverlap(y,I),I.x<0!=y.x<0&&this.addBorderIntersection(0,Wr(I.y,y.y,(0-I.x)/(y.x-I.x))),I.x>kr!=y.x>kr&&this.addBorderIntersection(1,Wr(I.y,y.y,(kr-I.x)/(y.x-I.x))),I.y<0!=y.y<0&&this.addBorderIntersection(2,Wr(I.x,y.x,(0-I.y)/(y.y-I.y))),I.y>kr!=y.y>kr&&this.addBorderIntersection(3,Wr(I.x,y.x,(kr-I.y)/(y.y-I.y)))}addBorderIntersection(y,I){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const ee=this.borders[y];I<ee[0]&&(ee[0]=I),I>ee[1]&&(ee[1]=I)}processBorderOverlap(y,I){if(y.x===I.x){if(y.y===I.y)return;const ee=y.x===0?0:1;this.addBorderIntersection(ee,I.y),this.addBorderIntersection(ee,y.y)}else{const ee=y.y===0?2:3;this.addBorderIntersection(ee,I.x),this.addBorderIntersection(ee,y.x)}}centroid(){const y=this.polyCount.reduce((I,ee)=>I+ee.edges,0);return y!==0?this.acc.div(y)._round():new xe(0,0)}span(){return new xe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((y,I)=>y+ +(I[0]!==Number.MAX_VALUE),0)}}class Mh{constructor(y){this.zoom=y.zoom,this.canonical=y.canonical,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=y.projection,this.layoutVertexArray=new yr,this.centroidVertexArray=new Ao,this.indexArray=new zr,this.programConfigurations=new al(y.layers,y.zoom),this.segments=new Bi,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.enableTerrain=y.enableTerrain}populate(y,I,ee,re){this.features=[],this.hasPattern=gp("fill-extrusion",this.layers,I),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(ge){const ke=Math.exp(Math.PI*(1-ge.y/(1<<ge.z)*2));return 80150034*ke/(ke*ke+1)/kr/(1<<ge.z)}(ee),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:ge,id:ke,index:Ie,sourceLayerIndex:$e}of y){const Le=this.layers[0]._featureFilter.needGeometry,Ve=Ge(ge,Le);if(!this.layers[0]._featureFilter.filter(new At(this.zoom),Ve,ee))continue;const We={id:ke,sourceLayerIndex:$e,index:Ie,geometry:Le?Ve.geometry:vt(ge,ee,re),properties:ge.properties,type:ge.type,patterns:{}},Ze=this.layoutVertexArray.length;this.hasPattern?this.features.push(yp("fill-extrusion",this.layers,We,this.zoom,I)):this.addFeature(We,We.geometry,Ie,ee,{},I.availableImages,re),I.featureIndex.insert(ge,We.geometry,Ie,$e,this.index,Ze)}this.sortBorders()}addFeatures(y,I,ee,re,ge){for(const ke of this.features){const{geometry:Ie}=ke;this.addFeature(ke,Ie,ke.index,I,ee,re,ge)}this.sortBorders()}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Im),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=y.createVertexBuffer(this.layoutVertexExtArray,Mm.members,!0))),this.programConfigurations.upload(y),this.uploaded=!0}uploadCentroid(y){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=y.createVertexBuffer(this.centroidVertexArray,Cm.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(y,I,ee,re,ge,ke,Ie){const $e=[new xe(0,0),new xe(kr,kr)],Le=Ie.projection,Ve=Le.name==="globe",We=this.enableTerrain&&!Ve?new wf:null,Ze=$m[y.type]==="Polygon";Ve&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new no);const tt=mp(I,500);for(let Ft=tt.length-1;Ft>=0;Ft--){const Ht=tt[Ft];(Ht.length===0||(ot=Ht[0]).every(Nt=>Nt.x<=0)||ot.every(Nt=>Nt.x>=kr)||ot.every(Nt=>Nt.y<=0)||ot.every(Nt=>Nt.y>=kr))&&tt.splice(Ft,1)}var ot;let mt;if(Ve)mt=Mf(tt,$e,re);else{mt=[];for(const Ft of tt)mt.push({polygon:Ft,bounds:$e})}const Tt=Ze?this.edgeRadius:0;for(const{polygon:Ft,bounds:Ht}of mt){let Nt=0,qt=0;for(const Zt of Ft)Ze&&!Zt[0].equals(Zt[Zt.length-1])&&Zt.push(Zt[0]),qt+=Ze?Zt.length-1:Zt.length;const Qt=this.segments.prepareSegment((Ze?5:4)*qt,this.layoutVertexArray,this.indexArray);if(Ze){const Zt=[],An=[];Nt=Qt.vertexLength;for(const On of Ft){let Jn,Sn;On.length&&On!==Ft[0]&&An.push(Zt.length/2),Jn=On[1].sub(On[0])._perp()._unit();for(let Bn=1;Bn<On.length;Bn++){const Vn=On[Bn],Fn=On[Bn===On.length-1?1:Bn+1];let{x:Xn,y:Gn}=Vn;if(Tt){Sn=Fn.sub(Vn)._perp()._unit();const ar=Jn.add(Sn)._unit(),Rr=Tt*Math.min(4,1/(Jn.x*ar.x+Jn.y*ar.y));Xn+=Rr*ar.x,Gn+=Rr*ar.y,Jn=Sn}Sh(this.layoutVertexArray,Xn,Gn,0,0,1,1,0),Qt.vertexLength++,Zt.push(Vn.x,Vn.y),Ve&&Ch(this.layoutVertexExtArray,Le.projectTilePoint(Xn,Gn,re),Le.upVector(re,Xn,Gn))}}const wn=xd(Zt,An);for(let On=0;On<wn.length;On+=3)this.indexArray.emplaceBack(Nt+wn[On],Nt+wn[On+2],Nt+wn[On+1]),Qt.primitiveLength++}for(const Zt of Ft){We&&Zt.length&&We.startRing(Zt[0]);let An,wn,On,Jn=Zt.length>4&&kf(Zt[Zt.length-2],Zt[0],Zt[1]),Sn=Tt?Lm(Zt[Zt.length-2],Zt[0],Zt[1],Tt):0;wn=Zt[1].sub(Zt[0])._perp()._unit();for(let Bn=1,Vn=0;Bn<Zt.length;Bn++){let Fn=Zt[Bn-1],Xn=Zt[Bn];const Gn=Zt[Bn===Zt.length-1?1:Bn+1];if(We&&Ze&&We.currentPolyCount.top++,Af(Xn,Fn,Ht)){Tt&&(wn=Gn.sub(Xn)._perp()._unit());continue}We&&We.append(Xn,Fn);const ar=Xn.sub(Fn)._perp(),Rr=ar.x/(Math.abs(ar.x)+Math.abs(ar.y)),$r=ar.y>0?1:0,vr=Fn.dist(Xn);if(Vn+vr>32768&&(Vn=0),Tt){On=Gn.sub(Xn)._perp()._unit();let dr=Tf(Fn,Xn,Gn,Ef(wn,On),Tt);isNaN(dr)&&(dr=0);const gi=Xn.sub(Fn)._unit();Fn=Fn.add(gi.mult(Sn))._round(),Xn=Xn.add(gi.mult(-dr))._round(),Sn=dr,wn=On}const rr=Qt.vertexLength,qr=Zt.length>4&&kf(Fn,Xn,Gn);let Ir=Sf(Vn,Jn,!0);if(Sh(this.layoutVertexArray,Fn.x,Fn.y,Rr,$r,0,0,Ir),Sh(this.layoutVertexArray,Fn.x,Fn.y,Rr,$r,0,1,Ir),Vn+=vr,Ir=Sf(Vn,qr,!1),Jn=qr,Sh(this.layoutVertexArray,Xn.x,Xn.y,Rr,$r,0,0,Ir),Sh(this.layoutVertexArray,Xn.x,Xn.y,Rr,$r,0,1,Ir),Qt.vertexLength+=4,this.indexArray.emplaceBack(rr+0,rr+1,rr+2),this.indexArray.emplaceBack(rr+1,rr+3,rr+2),Qt.primitiveLength+=2,Tt){const dr=Nt+(Bn===1?Zt.length-2:Bn-2),gi=Bn===1?Nt:dr+1;if(this.indexArray.emplaceBack(rr+1,dr,rr+3),this.indexArray.emplaceBack(dr,gi,rr+3),Qt.primitiveLength+=2,An===void 0&&(An=rr),!Af(Gn,Zt[Bn],Ht)){const di=Bn===Zt.length-1?An:Qt.vertexLength;this.indexArray.emplaceBack(rr+2,rr+3,di),this.indexArray.emplaceBack(rr+3,di+1,di),this.indexArray.emplaceBack(rr+3,gi,di+1),Qt.primitiveLength+=3}}if(Ve){const dr=this.layoutVertexExtArray,gi=Le.projectTilePoint(Fn.x,Fn.y,re),di=Le.projectTilePoint(Xn.x,Xn.y,re),Si=Le.upVector(re,Fn.x,Fn.y),jr=Le.upVector(re,Xn.x,Xn.y);Ch(dr,gi,Si),Ch(dr,gi,Si),Ch(dr,di,jr),Ch(dr,di,jr)}}Ze&&(Nt+=Zt.length-1)}}if(We&&We.polyCount.length>0){if(We.borders){We.vertexArrayOffset=this.centroidVertexArray.length;const Ft=We.borders,Ht=this.featuresOnBorder.push(We)-1;for(let Nt=0;Nt<4;Nt++)Ft[Nt][0]!==Number.MAX_VALUE&&this.borders[Nt].push(Ht)}this.encodeCentroid(We.borders?void 0:We.centroid(),We)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,ge,ke,re)}sortBorders(){for(let y=0;y<4;y++)this.borders[y].sort((I,ee)=>this.featuresOnBorder[I].borders[y][0]-this.featuresOnBorder[ee].borders[y][0])}encodeCentroid(y,I,ee=!0){let re,ge;if(y)if(y.y!==0){const Ie=I.span()._mult(this.tileToMeter);re=(Math.max(y.x,1)<<3)+Math.min(7,Math.round(Ie.x/10)),ge=(Math.max(y.y,1)<<3)+Math.min(7,Math.round(Ie.y/10))}else re=Math.ceil(7*(y.x+450)),ge=0;else re=0,ge=+ee;let ke=ee?this.centroidVertexArray.length:I.vertexArrayOffset;for(const Ie of I.polyCount){ee&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Ie.edges+Ie.top);for(let $e=0;$e<Ie.top;$e++)this.centroidVertexArray.emplace(ke++,re,ge);for(let $e=0;$e<2*Ie.edges;$e++)this.centroidVertexArray.emplace(ke++,0,ge),this.centroidVertexArray.emplace(ke++,re,ge)}}}function Ef($,y){const I=$.add(y)._unit();return $.x*I.x+$.y*I.y}function Lm($,y,I,ee){const re=y.sub($)._perp()._unit(),ge=I.sub(y)._perp()._unit();return Tf($,y,I,Ef(re,ge),ee)}function Tf($,y,I,ee,re){const ge=Math.sqrt(1-ee*ee);return Math.min($.dist(y)/3,y.dist(I)/3,re*ge/ee)}function Af($,y,I){return $.x<I[0].x&&y.x<I[0].x||$.x>I[1].x&&y.x>I[1].x||$.y<I[0].y&&y.y<I[0].y||$.y>I[1].y&&y.y>I[1].y}function kf($,y,I){if($.x<0||$.x>=kr||y.x<0||y.x>=kr||I.x<0||I.x>=kr)return!1;const ee=I.sub(y),re=ee.perp(),ge=$.sub(y);return(ee.x*ge.x+ee.y*ge.y)/Math.sqrt((ee.x*ee.x+ee.y*ee.y)*(ge.x*ge.x+ge.y*ge.y))>-.866&&re.x*ge.x+re.y*ge.y<0}function Sf($,y,I){const ee=y?2|$:-3&$;return I?1|ee:-2&ee}function Cf(){const $=Math.PI/32,y=Math.tan($),I=mh;return I*Math.sqrt(1+2*y*y)-I}function Mf($,y,I){const ee=1<<I.z,re=Ho(I.x/ee),ge=Ho((I.x+1)/ee),ke=Ji(I.y/ee),Ie=Ji((I.y+1)/ee);return function($e,Le,Ve,We,Ze=0,tt){const ot=[];if(!$e.length||!Ve||!We)return ot;const mt=(Zt,An)=>{for(const wn of Zt)ot.push({polygon:wn,bounds:An})},Tt=Math.ceil(Math.log2(Ve)),Ft=Math.ceil(Math.log2(We)),Ht=Tt-Ft,Nt=[];for(let Zt=0;Zt<Math.abs(Ht);Zt++)Nt.push(Ht>0?0:1);for(let Zt=0;Zt<Math.min(Tt,Ft);Zt++)Nt.push(0),Nt.push(1);let qt=$e;if(qt=kd(qt,Le[0].y-Ze,Le[1].y+Ze,1),qt=kd(qt,Le[0].x-Ze,Le[1].x+Ze,0),!qt.length)return ot;const Qt=[];for(Nt.length?Qt.push({polygons:qt,bounds:Le,depth:0}):mt(qt,Le);Qt.length;){const Zt=Qt.pop(),An=Zt.depth,wn=Nt[An],On=Zt.bounds[0],Jn=Zt.bounds[1],Sn=wn===0?On.x:On.y,Bn=wn===0?Jn.x:Jn.y,Vn=tt?tt(wn,Sn,Bn):.5*(Sn+Bn),Fn=kd(Zt.polygons,Sn-Ze,Vn+Ze,wn),Xn=kd(Zt.polygons,Vn-Ze,Bn+Ze,wn);if(Fn.length){const Gn=[On,new xe(wn===0?Vn:Jn.x,wn===1?Vn:Jn.y)];Nt.length>An+1?Qt.push({polygons:Fn,bounds:Gn,depth:An+1}):mt(Fn,Gn)}if(Xn.length){const Gn=[new xe(wn===0?Vn:On.x,wn===1?Vn:On.y),Jn];Nt.length>An+1?Qt.push({polygons:Xn,bounds:Gn,depth:An+1}):mt(Xn,Gn)}}return ot}($,y,Math.ceil((ge-re)/11.25),Math.ceil((ke-Ie)/11.25),1,($e,Le,Ve)=>{if($e===0)return .5*(Le+Ve);{const We=Ji((I.y+Le/kr)/ee);return(Va(.5*(Ji((I.y+Ve/kr)/ee)+We))*ee-I.y)*kr}})}ur(Mh,"FillExtrusionBucket",{omit:["layers","features"]}),ur(wf,"PartMetadata");const Bm=new zn({"fill-extrusion-edge-radius":new Wt(gn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Fm={paint:new zn({"fill-extrusion-opacity":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(gn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mn(gn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(gn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(gn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Bm};function If($,y,I){var ee=2*Math.PI*6378137/256/Math.pow(2,I);return[$*ee-2*Math.PI*6378137/2,y*ee-2*Math.PI*6378137/2]}class Sd{constructor(y,I,ee){this.z=y,this.x=I,this.y=ee,this.key=Ih(0,y,y,I,ee)}equals(y){return this.z===y.z&&this.x===y.x&&this.y===y.y}url(y,I){const ee=function(ge,ke,Ie){var $e=If(256*ge,256*(ke=Math.pow(2,Ie)-ke-1),Ie),Le=If(256*(ge+1),256*(ke+1),Ie);return $e[0]+","+$e[1]+","+Le[0]+","+Le[1]}(this.x,this.y,this.z),re=function(ge,ke,Ie){let $e,Le="";for(let Ve=ge;Ve>0;Ve--)$e=1<<Ve-1,Le+=(ke&$e?1:0)+(Ie&$e?2:0);return Le}(this.z,this.x,this.y);return y[(this.x+this.y)%y.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",re).replace("{bbox-epsg-3857}",ee)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Pf{constructor(y,I){this.wrap=y,this.canonical=I,this.key=Ih(y,I.z,I.z,I.x,I.y)}}class Co{constructor(y,I,ee,re,ge){this.overscaledZ=y,this.wrap=I,this.canonical=new Sd(ee,+re,+ge),this.key=I===0&&y===ee?this.canonical.key:Ih(I,y,ee,re,ge)}equals(y){return this.overscaledZ===y.overscaledZ&&this.wrap===y.wrap&&this.canonical.equals(y.canonical)}scaledTo(y){const I=this.canonical.z-y;return y>this.canonical.z?new Co(y,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Co(y,this.wrap,y,this.canonical.x>>I,this.canonical.y>>I)}calculateScaledKey(y,I=!0){if(this.overscaledZ===y&&I)return this.key;if(y>this.canonical.z)return Ih(this.wrap*+I,y,this.canonical.z,this.canonical.x,this.canonical.y);{const ee=this.canonical.z-y;return Ih(this.wrap*+I,y,y,this.canonical.x>>ee,this.canonical.y>>ee)}}isChildOf(y){if(y.wrap!==this.wrap)return!1;const I=this.canonical.z-y.canonical.z;return y.overscaledZ===0||y.overscaledZ<this.overscaledZ&&y.canonical.x===this.canonical.x>>I&&y.canonical.y===this.canonical.y>>I}children(y){if(this.overscaledZ>=y)return[new Co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const I=this.canonical.z+1,ee=2*this.canonical.x,re=2*this.canonical.y;return[new Co(I,this.wrap,I,ee,re),new Co(I,this.wrap,I,ee+1,re),new Co(I,this.wrap,I,ee,re+1),new Co(I,this.wrap,I,ee+1,re+1)]}isLessThan(y){return this.wrap<y.wrap||!(this.wrap>y.wrap)&&(this.overscaledZ<y.overscaledZ||!(this.overscaledZ>y.overscaledZ)&&(this.canonical.x<y.canonical.x||!(this.canonical.x>y.canonical.x)&&this.canonical.y<y.canonical.y))}wrapped(){return new Co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(y){return new Co(this.overscaledZ,y,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Pf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ih($,y,I,ee,re){const ge=1<<Math.min(I,22);let ke=ge*(re%ge)+ee%ge;return $&&I<22&&(ke+=ge*ge*(($<0?-2*$-1:2*$)%(1<<2*(22-I)))),16*(32*ke+I)+(y-I)}function Ph($,y){return $.x*y.x+$.y*y.y}function Of($,y){if($.length===1){let I=0;const ee=y[I++];let re;for(;!re||ee.equals(re);)if(re=y[I++],!re)return 1/0;for(;I<y.length;I++){const ge=y[I],ke=$[0],Ie=re.sub(ee),$e=ge.sub(ee),Le=ke.sub(ee),Ve=Ph(Ie,Ie),We=Ph(Ie,$e),Ze=Ph($e,$e),tt=Ph(Le,Ie),ot=Ph(Le,$e),mt=Ve*Ze-We*We,Tt=(Ze*tt-We*ot)/mt,Ft=(Ve*ot-We*tt)/mt,Ht=ee.z*(1-Tt-Ft)+re.z*Tt+ge.z*Ft;if(isFinite(Ht))return Ht}return 1/0}{let I=1/0;for(const ee of y)I=Math.min(I,ee.z);return I}}function Cd($){const y=new xe($[0],$[1]);return y.z=$[2],y}function Rf($,y,I,ee,re,ge,ke,Ie){const $e=ke*re.getElevationAt($,y,!0,!0),Le=ge[0]!==0,Ve=Le?ge[1]===0?ke*(ge[0]/7-450):ke*function(We,Ze,tt){const ot=Math.floor(Ze[0]/8),mt=Math.floor(Ze[1]/8),Tt=10*(Ze[0]-8*ot),Ft=10*(Ze[1]-8*mt),Ht=We.getElevationAt(ot,mt,!0,!0),Nt=We.getMeterToDEM(tt),qt=Math.floor(.5*(Tt*Nt-1)),Qt=Math.floor(.5*(Ft*Nt-1)),Zt=We.tileCoordToPixel(ot,mt),An=2*qt+1,wn=2*Qt+1,On=function(Xn,Gn,ar,Rr,$r){return[Xn.getElevationAtPixel(Gn,ar,!0),Xn.getElevationAtPixel(Gn+$r,ar,!0),Xn.getElevationAtPixel(Gn,ar+$r,!0),Xn.getElevationAtPixel(Gn+Rr,ar+$r,!0)]}(We,Zt.x-qt,Zt.y-Qt,An,wn),Jn=Math.abs(On[0]-On[1]),Sn=Math.abs(On[2]-On[3]),Bn=Math.abs(On[0]-On[2])+Math.abs(On[1]-On[3]),Vn=Math.min(.25,.5*Nt*(Jn+Sn)/An),Fn=Math.min(.25,.5*Nt*Bn/wn);return Ht+Math.max(Vn*Tt,Fn*Ft)}(re,ge,Ie):$e;return{base:$e+(I===0)?-1:I,top:Le?Math.max(Ve+ee,$e+I+2):$e+ee}}ur(Sd,"CanonicalTileID"),ur(Co,"OverscaledTileID",{omit:["projMatrix"]});const Nm=Ln([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:jm}=Nm,Um=Ln([{name:"a_packed",components:4,type:"Float32"}]),{members:Vm}=Um,Gm=Wc.VectorTileFeature.types,qm=Math.cos(Math.PI/180*37.5);class Md{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.projection=y.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(I=>{this.gradients[I.id]={}}),this.layoutVertexArray=new Ar,this.layoutVertexArray2=new Vr,this.indexArray=new zr,this.programConfigurations=new al(y.layers,y.zoom),this.segments=new Bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(y,I,ee,re){this.hasPattern=gp("line",this.layers,I);const ge=this.layers[0].layout.get("line-sort-key"),ke=[];for(const{feature:Ve,id:We,index:Ze,sourceLayerIndex:tt}of y){const ot=this.layers[0]._featureFilter.needGeometry,mt=Ge(Ve,ot);if(!this.layers[0]._featureFilter.filter(new At(this.zoom),mt,ee))continue;const Tt=ge?ge.evaluate(mt,{},ee):void 0,Ft={id:We,properties:Ve.properties,type:Ve.type,sourceLayerIndex:tt,index:Ze,geometry:ot?mt.geometry:vt(Ve,ee,re),patterns:{},sortKey:Tt};ke.push(Ft)}ge&&ke.sort((Ve,We)=>Ve.sortKey-We.sortKey);const{lineAtlas:Ie,featureIndex:$e}=I,Le=this.addConstantDashes(Ie);for(const Ve of ke){const{geometry:We,index:Ze,sourceLayerIndex:tt}=Ve;if(Le&&this.addFeatureDashes(Ve,Ie),this.hasPattern){const ot=yp("line",this.layers,Ve,this.zoom,I);this.patternFeatures.push(ot)}else this.addFeature(Ve,We,Ze,ee,Ie.positions,I.availableImages);$e.insert(y[Ze].feature,We,Ze,tt,this.index)}}addConstantDashes(y){let I=!1;for(const ee of this.layers){const re=ee.paint.get("line-dasharray").value,ge=ee.layout.get("line-cap").value;if(re.kind!=="constant"||ge.kind!=="constant")I=!0;else{const ke=ge.value,Ie=re.value;if(!Ie)continue;y.addDash(Ie.from,ke),y.addDash(Ie.to,ke),Ie.other&&y.addDash(Ie.other,ke)}}return I}addFeatureDashes(y,I){const ee=this.zoom;for(const re of this.layers){const ge=re.paint.get("line-dasharray").value,ke=re.layout.get("line-cap").value;if(ge.kind==="constant"&&ke.kind==="constant")continue;let Ie,$e,Le,Ve,We,Ze;if(ge.kind==="constant"){const Tt=ge.value;if(!Tt)continue;Ie=Tt.other||Tt.to,$e=Tt.to,Le=Tt.from}else Ie=ge.evaluate({zoom:ee-1},y),$e=ge.evaluate({zoom:ee},y),Le=ge.evaluate({zoom:ee+1},y);ke.kind==="constant"?Ve=We=Ze=ke.value:(Ve=ke.evaluate({zoom:ee-1},y),We=ke.evaluate({zoom:ee},y),Ze=ke.evaluate({zoom:ee+1},y)),I.addDash(Ie,Ve),I.addDash($e,We),I.addDash(Le,Ze);const tt=I.getKey(Ie,Ve),ot=I.getKey($e,We),mt=I.getKey(Le,Ze);y.patterns[re.id]={min:tt,mid:ot,max:mt}}}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}addFeatures(y,I,ee,re,ge){for(const ke of this.patternFeatures)this.addFeature(ke,ke.geometry,ke.index,I,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=y.createVertexBuffer(this.layoutVertexArray2,Vm)),this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,jm),this.indexBuffer=y.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(y){if(y.properties&&y.properties.hasOwnProperty("mapbox_clip_start")&&y.properties.hasOwnProperty("mapbox_clip_end"))return{start:+y.properties.mapbox_clip_start,end:+y.properties.mapbox_clip_end}}addFeature(y,I,ee,re,ge,ke){const Ie=this.layers[0].layout,$e=Ie.get("line-join").evaluate(y,{}),Le=Ie.get("line-cap").evaluate(y,{}),Ve=Ie.get("line-miter-limit"),We=Ie.get("line-round-limit");this.lineClips=this.lineFeatureClips(y);for(const Ze of I)this.addLine(Ze,y,$e,Le,Ve,We);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,ge,ke,re)}addLine(y,I,ee,re,ge,ke){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ft=0;Ft<y.length-1;Ft++)this.totalDistance+=y[Ft].dist(y[Ft+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Ie=Gm[I.type]==="Polygon";let $e=y.length;for(;$e>=2&&y[$e-1].equals(y[$e-2]);)$e--;let Le=0;for(;Le<$e-1&&y[Le].equals(y[Le+1]);)Le++;if($e<(Ie?3:2))return;ee==="bevel"&&(ge=1.05);const Ve=this.overscaling<=16?122880/(512*this.overscaling):0,We=this.segments.prepareSegment(10*$e,this.layoutVertexArray,this.indexArray);let Ze,tt,ot,mt,Tt;this.e1=this.e2=-1,Ie&&(Ze=y[$e-2],Tt=y[Le].sub(Ze)._unit()._perp());for(let Ft=Le;Ft<$e;Ft++){if(ot=Ft===$e-1?Ie?y[Le+1]:void 0:y[Ft+1],ot&&y[Ft].equals(ot))continue;Tt&&(mt=Tt),Ze&&(tt=Ze),Ze=y[Ft],Tt=ot?ot.sub(Ze)._unit()._perp():mt,mt=mt||Tt;let Ht=mt.add(Tt);Ht.x===0&&Ht.y===0||Ht._unit();const Nt=mt.x*Tt.x+mt.y*Tt.y,qt=Ht.x*Tt.x+Ht.y*Tt.y,Qt=qt!==0?1/qt:1/0,Zt=2*Math.sqrt(2-2*qt),An=qt<qm&&tt&&ot,wn=mt.x*Tt.y-mt.y*Tt.x>0;if(An&&Ft>Le){const Sn=Ze.dist(tt);if(Sn>2*Ve){const Bn=Ze.sub(Ze.sub(tt)._mult(Ve/Sn)._round());this.updateDistance(tt,Bn),this.addCurrentVertex(Bn,mt,0,0,We),tt=Bn}}const On=tt&&ot;let Jn=On?ee:Ie?"butt":re;if(On&&Jn==="round"&&(Qt<ke?Jn="miter":Qt<=2&&(Jn="fakeround")),Jn==="miter"&&Qt>ge&&(Jn="bevel"),Jn==="bevel"&&(Qt>2&&(Jn="flipbevel"),Qt<ge&&(Jn="miter")),tt&&this.updateDistance(tt,Ze),Jn==="miter")Ht._mult(Qt),this.addCurrentVertex(Ze,Ht,0,0,We);else if(Jn==="flipbevel"){if(Qt>100)Ht=Tt.mult(-1);else{const Sn=Qt*mt.add(Tt).mag()/mt.sub(Tt).mag();Ht._perp()._mult(Sn*(wn?-1:1))}this.addCurrentVertex(Ze,Ht,0,0,We),this.addCurrentVertex(Ze,Ht.mult(-1),0,0,We)}else if(Jn==="bevel"||Jn==="fakeround"){const Sn=-Math.sqrt(Qt*Qt-1),Bn=wn?Sn:0,Vn=wn?0:Sn;if(tt&&this.addCurrentVertex(Ze,mt,Bn,Vn,We),Jn==="fakeround"){const Fn=Math.round(180*Zt/Math.PI/20);for(let Xn=1;Xn<Fn;Xn++){let Gn=Xn/Fn;if(Gn!==.5){const Rr=Gn-.5;Gn+=Gn*Rr*(Gn-1)*((1.0904+Nt*(Nt*(3.55645-1.43519*Nt)-3.2452))*Rr*Rr+(.848013+Nt*(.215638*Nt-1.06021)))}const ar=Tt.sub(mt)._mult(Gn)._add(mt)._unit()._mult(wn?-1:1);this.addHalfVertex(Ze,ar.x,ar.y,!1,wn,0,We)}}ot&&this.addCurrentVertex(Ze,Tt,-Bn,-Vn,We)}else if(Jn==="butt")this.addCurrentVertex(Ze,Ht,0,0,We);else if(Jn==="square"){const Sn=tt?1:-1;tt||this.addCurrentVertex(Ze,Ht,Sn,Sn,We),this.addCurrentVertex(Ze,Ht,0,0,We),tt&&this.addCurrentVertex(Ze,Ht,Sn,Sn,We)}else Jn==="round"&&(tt&&(this.addCurrentVertex(Ze,mt,0,0,We),this.addCurrentVertex(Ze,mt,1,1,We,!0)),ot&&(this.addCurrentVertex(Ze,Tt,-1,-1,We,!0),this.addCurrentVertex(Ze,Tt,0,0,We)));if(An&&Ft<$e-1){const Sn=Ze.dist(ot);if(Sn>2*Ve){const Bn=Ze.add(ot.sub(Ze)._mult(Ve/Sn)._round());this.updateDistance(Ze,Bn),this.addCurrentVertex(Bn,Tt,0,0,We),Ze=Bn}}}}addCurrentVertex(y,I,ee,re,ge,ke=!1){const Ie=I.y*re-I.x,$e=-I.y-I.x*re;this.addHalfVertex(y,I.x+I.y*ee,I.y-I.x*ee,ke,!1,ee,ge),this.addHalfVertex(y,Ie,$e,ke,!0,-re,ge)}addHalfVertex({x:y,y:I},ee,re,ge,ke,Ie,$e){this.layoutVertexArray.emplaceBack((y<<1)+(ge?1:0),(I<<1)+(ke?1:0),Math.round(63*ee)+128,Math.round(63*re)+128,1+(Ie===0?0:Ie<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const Le=$e.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Le),$e.primitiveLength++),ke?this.e2=Le:this.e1=Le}updateScaledDistance(){if(this.lineClips){const y=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=y*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(y,I){this.distance+=y.dist(I),this.updateScaledDistance()}}ur(Md,"LineBucket",{omit:["layers","patternFeatures"]});const Hm=new zn({"line-cap":new sn(gn.layout_line["line-cap"]),"line-join":new sn(gn.layout_line["line-join"]),"line-miter-limit":new Wt(gn.layout_line["line-miter-limit"]),"line-round-limit":new Wt(gn.layout_line["line-round-limit"]),"line-sort-key":new sn(gn.layout_line["line-sort-key"])});var zf={paint:new zn({"line-opacity":new sn(gn.paint_line["line-opacity"]),"line-color":new sn(gn.paint_line["line-color"]),"line-translate":new Wt(gn.paint_line["line-translate"]),"line-translate-anchor":new Wt(gn.paint_line["line-translate-anchor"]),"line-width":new sn(gn.paint_line["line-width"]),"line-gap-width":new sn(gn.paint_line["line-gap-width"]),"line-offset":new sn(gn.paint_line["line-offset"]),"line-blur":new sn(gn.paint_line["line-blur"]),"line-dasharray":new mn(gn.paint_line["line-dasharray"]),"line-pattern":new mn(gn.paint_line["line-pattern"]),"line-gradient":new pn(gn.paint_line["line-gradient"]),"line-trim-offset":new Wt(gn.paint_line["line-trim-offset"])}),layout:Hm};const $f=new class extends sn{possiblyEvaluate($,y){return y=new At(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),super.possiblyEvaluate($,y)}evaluate($,y,I,ee){return y=wt({},y,{zoom:Math.floor(y.zoom)}),super.evaluate($,y,I,ee)}}(zf.paint.properties["line-width"].specification);function Df($,y){return y>0?y+2*$:$}$f.useIntegerZoom=!0;const Wm=Ln([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zm=Ln([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Xm=Ln([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ln([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Km=Ln([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Ym=Ln([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ln([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lf=Ln([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Jm=Ln([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ln([{name:"triangle",components:3,type:"Uint16"}]),Ln([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ln([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ln([{type:"Float32",name:"offsetX"}]),Ln([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ho=24;const ys=128;function vp($,y){const{expression:I}=y;if(I.kind==="constant")return{kind:"constant",layoutSize:I.evaluate(new At($+1))};if(I.kind==="source")return{kind:"source"};{const{zoomStops:ee,interpolationType:re}=I;let ge=0;for(;ge<ee.length&&ee[ge]<=$;)ge++;ge=Math.max(0,ge-1);let ke=ge;for(;ke<ee.length&&ee[ke]<$+1;)ke++;ke=Math.min(ee.length-1,ke);const Ie=ee[ge],$e=ee[ke];return I.kind==="composite"?{kind:"composite",minZoom:Ie,maxZoom:$e,interpolationType:re}:{kind:"camera",minZoom:Ie,maxZoom:$e,minSize:I.evaluate(new At(Ie)),maxSize:I.evaluate(new At($e)),interpolationType:re}}}function Id($,{uSize:y,uSizeT:I},{lowerSize:ee,upperSize:re}){return $.kind==="source"?ee/ys:$.kind==="composite"?Wr(ee/ys,re/ys,I):y}function Nu($,y){let I=0,ee=0;if($.kind==="constant")ee=$.layoutSize;else if($.kind!=="source"){const{interpolationType:re,minZoom:ge,maxZoom:ke}=$,Ie=re?Ke(Go.interpolationFactor(re,y,ge,ke),0,1):0;$.kind==="camera"?ee=Wr($.minSize,$.maxSize,Ie):I=Ie}return{uSizeT:I,uSize:ee}}var Qm=Object.freeze({__proto__:null,getSizeData:vp,evaluateSizeForFeature:Id,evaluateSizeForZoom:Nu,SIZE_PACK_FACTOR:ys});function eg($,y,I){return $.sections.forEach(ee=>{ee.text=function(re,ge,ke){const Ie=ge.layout.get("text-transform").evaluate(ke,{});return Ie==="uppercase"?re=re.toLocaleUpperCase():Ie==="lowercase"&&(re=re.toLocaleLowerCase()),kt.applyArabicShaping&&(re=kt.applyArabicShaping(re)),re}(ee.text,y,I)}),$}const Oh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function tg($){return $==="\uFE36"||$==="\uFE48"||$==="\uFE38"||$==="\uFE44"||$==="\uFE42"||$==="\uFE3E"||$==="\uFE3C"||$==="\uFE3A"||$==="\uFE18"||$==="\uFE40"||$==="\uFE10"||$==="\uFE13"||$==="\uFE14"||$==="\uFF40"||$==="\uFFE3"||$==="\uFE11"||$==="\uFE12"}function ng($){return $==="\uFE35"||$==="\uFE47"||$==="\uFE37"||$==="\uFE43"||$==="\uFE41"||$==="\uFE3D"||$==="\uFE3B"||$==="\uFE39"||$==="\uFE17"||$==="\uFE3F"}var Bf=function($,y,I,ee,re){var ge,ke,Ie=8*re-ee-1,$e=(1<<Ie)-1,Le=$e>>1,Ve=-7,We=I?re-1:0,Ze=I?-1:1,tt=$[y+We];for(We+=Ze,ge=tt&(1<<-Ve)-1,tt>>=-Ve,Ve+=Ie;Ve>0;ge=256*ge+$[y+We],We+=Ze,Ve-=8);for(ke=ge&(1<<-Ve)-1,ge>>=-Ve,Ve+=ee;Ve>0;ke=256*ke+$[y+We],We+=Ze,Ve-=8);if(ge===0)ge=1-Le;else{if(ge===$e)return ke?NaN:1/0*(tt?-1:1);ke+=Math.pow(2,ee),ge-=Le}return(tt?-1:1)*ke*Math.pow(2,ge-ee)},Ff=function($,y,I,ee,re,ge){var ke,Ie,$e,Le=8*ge-re-1,Ve=(1<<Le)-1,We=Ve>>1,Ze=re===23?Math.pow(2,-24)-Math.pow(2,-77):0,tt=ee?0:ge-1,ot=ee?1:-1,mt=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(Ie=isNaN(y)?1:0,ke=Ve):(ke=Math.floor(Math.log(y)/Math.LN2),y*($e=Math.pow(2,-ke))<1&&(ke--,$e*=2),(y+=ke+We>=1?Ze/$e:Ze*Math.pow(2,1-We))*$e>=2&&(ke++,$e/=2),ke+We>=Ve?(Ie=0,ke=Ve):ke+We>=1?(Ie=(y*$e-1)*Math.pow(2,re),ke+=We):(Ie=y*Math.pow(2,We-1)*Math.pow(2,re),ke=0));re>=8;$[I+tt]=255&Ie,tt+=ot,Ie/=256,re-=8);for(ke=ke<<re|Ie,Le+=re;Le>0;$[I+tt]=255&ke,tt+=ot,ke/=256,Le-=8);$[I+tt-ot]|=128*mt},Rh=mi;function mi($){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView($)?$:new Uint8Array($||0),this.pos=0,this.type=0,this.length=this.buf.length}mi.Varint=0,mi.Fixed64=1,mi.Bytes=2,mi.Fixed32=5;var xp=4294967296,Nf=1/xp,jf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ll($){return $.type===mi.Bytes?$.readVarint()+$.pos:$.pos+1}function ju($,y,I){return I?4294967296*y+($>>>0):4294967296*(y>>>0)+($>>>0)}function Uf($,y,I){var ee=y<=16383?1:y<=2097151?2:y<=268435455?3:Math.floor(Math.log(y)/(7*Math.LN2));I.realloc(ee);for(var re=I.pos-1;re>=$;re--)I.buf[re+ee]=I.buf[re]}function rg($,y){for(var I=0;I<$.length;I++)y.writeVarint($[I])}function ig($,y){for(var I=0;I<$.length;I++)y.writeSVarint($[I])}function og($,y){for(var I=0;I<$.length;I++)y.writeFloat($[I])}function ag($,y){for(var I=0;I<$.length;I++)y.writeDouble($[I])}function sg($,y){for(var I=0;I<$.length;I++)y.writeBoolean($[I])}function lg($,y){for(var I=0;I<$.length;I++)y.writeFixed32($[I])}function cg($,y){for(var I=0;I<$.length;I++)y.writeSFixed32($[I])}function ug($,y){for(var I=0;I<$.length;I++)y.writeFixed64($[I])}function hg($,y){for(var I=0;I<$.length;I++)y.writeSFixed64($[I])}function Pd($,y){return($[y]|$[y+1]<<8|$[y+2]<<16)+16777216*$[y+3]}function Uu($,y,I){$[I]=y,$[I+1]=y>>>8,$[I+2]=y>>>16,$[I+3]=y>>>24}function Vf($,y){return($[y]|$[y+1]<<8|$[y+2]<<16)+($[y+3]<<24)}function dg($,y,I){y.glyphs=[],$===1&&I.readMessage(pg,y)}function pg($,y,I){if($===3){const{id:ee,bitmap:re,width:ge,height:ke,left:Ie,top:$e,advance:Le}=I.readMessage(fg,{});y.glyphs.push({id:ee,bitmap:new sl({width:ge+6,height:ke+6},re),metrics:{width:ge,height:ke,left:Ie,top:$e,advance:Le}})}else $===4?y.ascender=I.readSVarint():$===5&&(y.descender=I.readSVarint())}function fg($,y,I){$===1?y.id=I.readVarint():$===2?y.bitmap=I.readBytes():$===3?y.width=I.readVarint():$===4?y.height=I.readVarint():$===5?y.left=I.readSVarint():$===6?y.top=I.readSVarint():$===7&&(y.advance=I.readVarint())}function bp($){let y=0,I=0;for(const ke of $)y+=ke.w*ke.h,I=Math.max(I,ke.w);$.sort((ke,Ie)=>Ie.h-ke.h);const ee=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(y/.95)),I),h:1/0}];let re=0,ge=0;for(const ke of $)for(let Ie=ee.length-1;Ie>=0;Ie--){const $e=ee[Ie];if(!(ke.w>$e.w||ke.h>$e.h)){if(ke.x=$e.x,ke.y=$e.y,ge=Math.max(ge,ke.y+ke.h),re=Math.max(re,ke.x+ke.w),ke.w===$e.w&&ke.h===$e.h){const Le=ee.pop();Ie<ee.length&&(ee[Ie]=Le)}else ke.h===$e.h?($e.x+=ke.w,$e.w-=ke.w):ke.w===$e.w?($e.y+=ke.h,$e.h-=ke.h):(ee.push({x:$e.x+ke.w,y:$e.y,w:$e.w-ke.w,h:ke.h}),$e.y+=ke.h,$e.h-=ke.h);break}}return{w:re,h:ge,fill:y/(re*ge)||0}}mi.prototype={destroy:function(){this.buf=null},readFields:function($,y,I){for(I=I||this.length;this.pos<I;){var ee=this.readVarint(),re=ee>>3,ge=this.pos;this.type=7&ee,$(re,y,this),this.pos===ge&&this.skip(ee)}return y},readMessage:function($,y){return this.readFields($,y,this.readVarint()+this.pos)},readFixed32:function(){var $=Pd(this.buf,this.pos);return this.pos+=4,$},readSFixed32:function(){var $=Vf(this.buf,this.pos);return this.pos+=4,$},readFixed64:function(){var $=Pd(this.buf,this.pos)+Pd(this.buf,this.pos+4)*xp;return this.pos+=8,$},readSFixed64:function(){var $=Pd(this.buf,this.pos)+Vf(this.buf,this.pos+4)*xp;return this.pos+=8,$},readFloat:function(){var $=Bf(this.buf,this.pos,!0,23,4);return this.pos+=4,$},readDouble:function(){var $=Bf(this.buf,this.pos,!0,52,8);return this.pos+=8,$},readVarint:function($){var y,I,ee=this.buf;return y=127&(I=ee[this.pos++]),I<128?y:(y|=(127&(I=ee[this.pos++]))<<7,I<128?y:(y|=(127&(I=ee[this.pos++]))<<14,I<128?y:(y|=(127&(I=ee[this.pos++]))<<21,I<128?y:function(re,ge,ke){var Ie,$e,Le=ke.buf;if(Ie=(112&($e=Le[ke.pos++]))>>4,$e<128||(Ie|=(127&($e=Le[ke.pos++]))<<3,$e<128)||(Ie|=(127&($e=Le[ke.pos++]))<<10,$e<128)||(Ie|=(127&($e=Le[ke.pos++]))<<17,$e<128)||(Ie|=(127&($e=Le[ke.pos++]))<<24,$e<128)||(Ie|=(1&($e=Le[ke.pos++]))<<31,$e<128))return ju(re,Ie,ge);throw new Error("Expected varint not more than 10 bytes")}(y|=(15&(I=ee[this.pos]))<<28,$,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var $=this.readVarint();return $%2==1?($+1)/-2:$/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var $=this.readVarint()+this.pos,y=this.pos;return this.pos=$,$-y>=12&&jf?function(I,ee,re){return jf.decode(I.subarray(ee,re))}(this.buf,y,$):function(I,ee,re){for(var ge="",ke=ee;ke<re;){var Ie,$e,Le,Ve=I[ke],We=null,Ze=Ve>239?4:Ve>223?3:Ve>191?2:1;if(ke+Ze>re)break;Ze===1?Ve<128&&(We=Ve):Ze===2?(192&(Ie=I[ke+1]))==128&&(We=(31&Ve)<<6|63&Ie)<=127&&(We=null):Ze===3?($e=I[ke+2],(192&(Ie=I[ke+1]))==128&&(192&$e)==128&&((We=(15&Ve)<<12|(63&Ie)<<6|63&$e)<=2047||We>=55296&&We<=57343)&&(We=null)):Ze===4&&($e=I[ke+2],Le=I[ke+3],(192&(Ie=I[ke+1]))==128&&(192&$e)==128&&(192&Le)==128&&((We=(15&Ve)<<18|(63&Ie)<<12|(63&$e)<<6|63&Le)<=65535||We>=1114112)&&(We=null)),We===null?(We=65533,Ze=1):We>65535&&(We-=65536,ge+=String.fromCharCode(We>>>10&1023|55296),We=56320|1023&We),ge+=String.fromCharCode(We),ke+=Ze}return ge}(this.buf,y,$)},readBytes:function(){var $=this.readVarint()+this.pos,y=this.buf.subarray(this.pos,$);return this.pos=$,y},readPackedVarint:function($,y){if(this.type!==mi.Bytes)return $.push(this.readVarint(y));var I=ll(this);for($=$||[];this.pos<I;)$.push(this.readVarint(y));return $},readPackedSVarint:function($){if(this.type!==mi.Bytes)return $.push(this.readSVarint());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readSVarint());return $},readPackedBoolean:function($){if(this.type!==mi.Bytes)return $.push(this.readBoolean());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readBoolean());return $},readPackedFloat:function($){if(this.type!==mi.Bytes)return $.push(this.readFloat());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readFloat());return $},readPackedDouble:function($){if(this.type!==mi.Bytes)return $.push(this.readDouble());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readDouble());return $},readPackedFixed32:function($){if(this.type!==mi.Bytes)return $.push(this.readFixed32());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readFixed32());return $},readPackedSFixed32:function($){if(this.type!==mi.Bytes)return $.push(this.readSFixed32());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readSFixed32());return $},readPackedFixed64:function($){if(this.type!==mi.Bytes)return $.push(this.readFixed64());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readFixed64());return $},readPackedSFixed64:function($){if(this.type!==mi.Bytes)return $.push(this.readSFixed64());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readSFixed64());return $},skip:function($){var y=7&$;if(y===mi.Varint)for(;this.buf[this.pos++]>127;);else if(y===mi.Bytes)this.pos=this.readVarint()+this.pos;else if(y===mi.Fixed32)this.pos+=4;else{if(y!==mi.Fixed64)throw new Error("Unimplemented type: "+y);this.pos+=8}},writeTag:function($,y){this.writeVarint($<<3|y)},realloc:function($){for(var y=this.length||16;y<this.pos+$;)y*=2;if(y!==this.length){var I=new Uint8Array(y);I.set(this.buf),this.buf=I,this.length=y}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function($){this.realloc(4),Uu(this.buf,$,this.pos),this.pos+=4},writeSFixed32:function($){this.realloc(4),Uu(this.buf,$,this.pos),this.pos+=4},writeFixed64:function($){this.realloc(8),Uu(this.buf,-1&$,this.pos),Uu(this.buf,Math.floor($*Nf),this.pos+4),this.pos+=8},writeSFixed64:function($){this.realloc(8),Uu(this.buf,-1&$,this.pos),Uu(this.buf,Math.floor($*Nf),this.pos+4),this.pos+=8},writeVarint:function($){($=+$||0)>268435455||$<0?function(y,I){var ee,re;if(y>=0?(ee=y%4294967296|0,re=y/4294967296|0):(re=~(-y/4294967296),4294967295^(ee=~(-y%4294967296))?ee=ee+1|0:(ee=0,re=re+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");I.realloc(10),function(ge,ke,Ie){Ie.buf[Ie.pos++]=127&ge|128,ge>>>=7,Ie.buf[Ie.pos++]=127&ge|128,ge>>>=7,Ie.buf[Ie.pos++]=127&ge|128,ge>>>=7,Ie.buf[Ie.pos++]=127&ge|128,Ie.buf[Ie.pos]=127&(ge>>>=7)}(ee,0,I),function(ge,ke){var Ie=(7&ge)<<4;ke.buf[ke.pos++]|=Ie|((ge>>>=3)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge)))))}(re,I)}($,this):(this.realloc(4),this.buf[this.pos++]=127&$|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=$>>>7&127))))},writeSVarint:function($){this.writeVarint($<0?2*-$-1:2*$)},writeBoolean:function($){this.writeVarint(Boolean($))},writeString:function($){$=String($),this.realloc(4*$.length),this.pos++;var y=this.pos;this.pos=function(ee,re,ge){for(var ke,Ie,$e=0;$e<re.length;$e++){if((ke=re.charCodeAt($e))>55295&&ke<57344){if(!Ie){ke>56319||$e+1===re.length?(ee[ge++]=239,ee[ge++]=191,ee[ge++]=189):Ie=ke;continue}if(ke<56320){ee[ge++]=239,ee[ge++]=191,ee[ge++]=189,Ie=ke;continue}ke=Ie-55296<<10|ke-56320|65536,Ie=null}else Ie&&(ee[ge++]=239,ee[ge++]=191,ee[ge++]=189,Ie=null);ke<128?ee[ge++]=ke:(ke<2048?ee[ge++]=ke>>6|192:(ke<65536?ee[ge++]=ke>>12|224:(ee[ge++]=ke>>18|240,ee[ge++]=ke>>12&63|128),ee[ge++]=ke>>6&63|128),ee[ge++]=63&ke|128)}return ge}(this.buf,$,this.pos);var I=this.pos-y;I>=128&&Uf(y,I,this),this.pos=y-1,this.writeVarint(I),this.pos+=I},writeFloat:function($){this.realloc(4),Ff(this.buf,$,this.pos,!0,23,4),this.pos+=4},writeDouble:function($){this.realloc(8),Ff(this.buf,$,this.pos,!0,52,8),this.pos+=8},writeBytes:function($){var y=$.length;this.writeVarint(y),this.realloc(y);for(var I=0;I<y;I++)this.buf[this.pos++]=$[I]},writeRawMessage:function($,y){this.pos++;var I=this.pos;$(y,this);var ee=this.pos-I;ee>=128&&Uf(I,ee,this),this.pos=I-1,this.writeVarint(ee),this.pos+=ee},writeMessage:function($,y,I){this.writeTag($,mi.Bytes),this.writeRawMessage(y,I)},writePackedVarint:function($,y){y.length&&this.writeMessage($,rg,y)},writePackedSVarint:function($,y){y.length&&this.writeMessage($,ig,y)},writePackedBoolean:function($,y){y.length&&this.writeMessage($,sg,y)},writePackedFloat:function($,y){y.length&&this.writeMessage($,og,y)},writePackedDouble:function($,y){y.length&&this.writeMessage($,ag,y)},writePackedFixed32:function($,y){y.length&&this.writeMessage($,lg,y)},writePackedSFixed32:function($,y){y.length&&this.writeMessage($,cg,y)},writePackedFixed64:function($,y){y.length&&this.writeMessage($,ug,y)},writePackedSFixed64:function($,y){y.length&&this.writeMessage($,hg,y)},writeBytesField:function($,y){this.writeTag($,mi.Bytes),this.writeBytes(y)},writeFixed32Field:function($,y){this.writeTag($,mi.Fixed32),this.writeFixed32(y)},writeSFixed32Field:function($,y){this.writeTag($,mi.Fixed32),this.writeSFixed32(y)},writeFixed64Field:function($,y){this.writeTag($,mi.Fixed64),this.writeFixed64(y)},writeSFixed64Field:function($,y){this.writeTag($,mi.Fixed64),this.writeSFixed64(y)},writeVarintField:function($,y){this.writeTag($,mi.Varint),this.writeVarint(y)},writeSVarintField:function($,y){this.writeTag($,mi.Varint),this.writeSVarint(y)},writeStringField:function($,y){this.writeTag($,mi.Bytes),this.writeString(y)},writeFloatField:function($,y){this.writeTag($,mi.Fixed32),this.writeFloat(y)},writeDoubleField:function($,y){this.writeTag($,mi.Fixed64),this.writeDouble(y)},writeBooleanField:function($,y){this.writeVarintField($,Boolean(y))}};class wp{constructor(y,{pixelRatio:I,version:ee,stretchX:re,stretchY:ge,content:ke}){this.paddedRect=y,this.pixelRatio=I,this.stretchX=re,this.stretchY=ge,this.content=ke,this.version=ee}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Gf{constructor(y,I){const ee={},re={};this.haveRenderCallbacks=[];const ge=[];this.addImages(y,ee,ge),this.addImages(I,re,ge);const{w:ke,h:Ie}=bp(ge),$e=new Xo({width:ke||1,height:Ie||1});for(const Le in y){const Ve=y[Le],We=ee[Le].paddedRect;Xo.copy(Ve.data,$e,{x:0,y:0},{x:We.x+1,y:We.y+1},Ve.data)}for(const Le in I){const Ve=I[Le],We=re[Le].paddedRect,Ze=We.x+1,tt=We.y+1,ot=Ve.data.width,mt=Ve.data.height;Xo.copy(Ve.data,$e,{x:0,y:0},{x:Ze,y:tt},Ve.data),Xo.copy(Ve.data,$e,{x:0,y:mt-1},{x:Ze,y:tt-1},{width:ot,height:1}),Xo.copy(Ve.data,$e,{x:0,y:0},{x:Ze,y:tt+mt},{width:ot,height:1}),Xo.copy(Ve.data,$e,{x:ot-1,y:0},{x:Ze-1,y:tt},{width:1,height:mt}),Xo.copy(Ve.data,$e,{x:0,y:0},{x:Ze+ot,y:tt},{width:1,height:mt})}this.image=$e,this.iconPositions=ee,this.patternPositions=re}addImages(y,I,ee){for(const re in y){const ge=y[re],ke={x:0,y:0,w:ge.data.width+2,h:ge.data.height+2};ee.push(ke),I[re]=new wp(ke,ge),ge.hasRenderCallback&&this.haveRenderCallbacks.push(re)}}patchUpdatedImages(y,I){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(ee=>y.hasImage(ee)),y.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ee in y.updatedImages)this.patchUpdatedImage(this.iconPositions[ee],y.getImage(ee),I),this.patchUpdatedImage(this.patternPositions[ee],y.getImage(ee),I)}patchUpdatedImage(y,I,ee){if(!y||!I||y.version===I.version)return;y.version=I.version;const[re,ge]=y.tl;ee.update(I.data,void 0,{x:re,y:ge})}}ur(wp,"ImagePosition"),ur(Gf,"ImageAtlas");const sa={horizontal:1,vertical:2,horizontalOnly:3};class zh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(y,I){const ee=new zh;return ee.scale=y||1,ee.fontStack=I,ee}static forImage(y){const I=new zh;return I.imageName=y,I}}class Vu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(y,I){const ee=new Vu;for(let re=0;re<y.sections.length;re++){const ge=y.sections[re];ge.image?ee.addImageSection(ge):ee.addTextSection(ge,I)}return ee}length(){return this.text.length}getSection(y){return this.sections[this.sectionIndex[y]]}getSections(){return this.sections}getSectionIndex(y){return this.sectionIndex[y]}getCharCode(y){return this.text.charCodeAt(y)}verticalizePunctuation(y){this.text=function(I,ee){let re="";for(let ge=0;ge<I.length;ge++){const ke=I.charCodeAt(ge+1)||null,Ie=I.charCodeAt(ge-1)||null;re+=!ee&&(ke&&hs(ke)&&!Oh[I[ge+1]]||Ie&&hs(Ie)&&!Oh[I[ge-1]])||!Oh[I[ge]]?I[ge]:Oh[I[ge]]}return re}(this.text,y)}trim(){let y=0;for(let ee=0;ee<this.text.length&&Od[this.text.charCodeAt(ee)];ee++)y++;let I=this.text.length;for(let ee=this.text.length-1;ee>=0&&ee>=y&&Od[this.text.charCodeAt(ee)];ee--)I--;this.text=this.text.substring(y,I),this.sectionIndex=this.sectionIndex.slice(y,I)}substring(y,I){const ee=new Vu;return ee.text=this.text.substring(y,I),ee.sectionIndex=this.sectionIndex.slice(y,I),ee.sections=this.sections,ee}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((y,I)=>Math.max(y,this.sections[I].scale),0)}addTextSection(y,I){this.text+=y.text,this.sections.push(zh.forText(y.scale,y.fontStack||I));const ee=this.sections.length-1;for(let re=0;re<y.text.length;++re)this.sectionIndex.push(ee)}addImageSection(y){const I=y.image?y.image.name:"";if(I.length===0)return void Dt("Can't add FormattedSection with an empty image.");const ee=this.getNextImageSectionCharCode();ee?(this.text+=String.fromCharCode(ee),this.sections.push(zh.forImage(I)),this.sectionIndex.push(this.sections.length-1)):Dt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ep($,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt){const Tt=Vu.fromFeature($,re);let Ft;We===sa.vertical&&Tt.verticalizePunctuation(Ze);const{processBidirectionalText:Ht,processStyledBidirectionalText:Nt}=kt;if(Ht&&Tt.sections.length===1){Ft=[];const Zt=Ht(Tt.toString(),Tp(Tt,Le,ge,y,ee,tt,ot));for(const An of Zt){const wn=new Vu;wn.text=An,wn.sections=Tt.sections;for(let On=0;On<An.length;On++)wn.sectionIndex.push(0);Ft.push(wn)}}else if(Nt){Ft=[];const Zt=Nt(Tt.text,Tt.sectionIndex,Tp(Tt,Le,ge,y,ee,tt,ot));for(const An of Zt){const wn=new Vu;wn.text=An[0],wn.sectionIndex=An[1],wn.sections=Tt.sections,Ft.push(wn)}}else Ft=function(Zt,An){const wn=[],On=Zt.text;let Jn=0;for(const Sn of An)wn.push(Zt.substring(Jn,Sn)),Jn=Sn;return Jn<On.length&&wn.push(Zt.substring(Jn,On.length)),wn}(Tt,Tp(Tt,Le,ge,y,ee,tt,ot));const qt=[],Qt={positionedLines:qt,text:Tt.toString(),top:Ve[1],bottom:Ve[1],left:Ve[0],right:Ve[0],writingMode:We,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Zt,An,wn,On,Jn,Sn,Bn,Vn,Fn,Xn,Gn,ar){let Rr=0,$r=0,vr=0;const rr=Vn==="right"?1:Vn==="left"?0:.5;let qr=!1;for(const jr of Jn){const Jr=jr.getSections();for(const yi of Jr){if(yi.imageName)continue;const pi=An[yi.fontStack];if(pi&&(qr=pi.ascender!==void 0&&pi.descender!==void 0,!qr))break}if(!qr)break}let Ir=0;for(const jr of Jn){jr.trim();const Jr=jr.getMaxScale(),yi=(Jr-1)*ho,pi={positionedGlyphs:[],lineOffset:0};Zt.positionedLines[Ir]=pi;const hi=pi.positionedGlyphs;let Ti=0;if(!jr.length()){$r+=Sn,++Ir;continue}let Ii=0,ro=0;for(let Xr=0;Xr<jr.length();Xr++){const Di=jr.getSection(Xr),yo=jr.getSectionIndex(Xr),ri=jr.getCharCode(Xr);let Pi=Di.scale,Mo=null,Ci=null,Ni=null,io=ho,eo=0;const po=!(Fn===sa.horizontal||!Gn&&!il(ri)||Gn&&(Od[ri]||(dr=ri,ku(dr)||Su(dr)||Cu(dr)||Do(dr)||Fc(dr))));if(Di.imageName){const Io=On[Di.imageName];if(!Io)continue;Ni=Di.imageName,Zt.iconsInText=Zt.iconsInText||!0,Ci=Io.paddedRect;const oo=Io.displaySize;Pi=Pi*ho/ar,Mo={width:oo[0],height:oo[1],left:1,top:-3,advance:po?oo[1]:oo[0],localGlyph:!1},eo=qr?-Mo.height*Pi:Jr*ho-17-oo[1]*Pi,io=Mo.advance;const hl=(po?oo[0]:oo[1])*Pi-ho*Jr;hl>0&&hl>Ti&&(Ti=hl)}else{const Io=wn[Di.fontStack];if(!Io)continue;Io[ri]&&(Ci=Io[ri]);const oo=An[Di.fontStack];if(!oo)continue;const hl=oo.glyphs[ri];if(!hl)continue;if(Mo=hl.metrics,io=ri!==8203?ho:0,qr){const Ku=oo.ascender!==void 0?Math.abs(oo.ascender):0,Hh=oo.descender!==void 0?Math.abs(oo.descender):0,Wh=(Ku+Hh)*Pi;Ii<Wh&&(Ii=Wh,ro=(Ku-Hh)/2*Pi),eo=-Ku*Pi}else eo=(Jr-Pi)*ho-17}po?(Zt.verticalizable=!0,hi.push({glyph:ri,imageName:Ni,x:Rr,y:$r+eo,vertical:po,scale:Pi,localGlyph:Mo.localGlyph,fontStack:Di.fontStack,sectionIndex:yo,metrics:Mo,rect:Ci}),Rr+=io*Pi+Xn):(hi.push({glyph:ri,imageName:Ni,x:Rr,y:$r+eo,vertical:po,scale:Pi,localGlyph:Mo.localGlyph,fontStack:Di.fontStack,sectionIndex:yo,metrics:Mo,rect:Ci}),Rr+=Mo.advance*Pi+Xn)}hi.length!==0&&(vr=Math.max(Rr-Xn,vr),qr?Xf(hi,rr,Ti,ro,Sn*Jr/2):Xf(hi,rr,Ti,0,Sn/2)),Rr=0;const Fo=Sn*Jr+Ti;pi.lineOffset=Math.max(Ti,yi),$r+=Fo,++Ir}var dr;const gi=$r,{horizontalAlign:di,verticalAlign:Si}=Ap(Bn);(function(jr,Jr,yi,pi,hi,Ti){const Ii=(Jr-yi)*hi,ro=-Ti*pi;for(const Fo of jr)for(const Xr of Fo.positionedGlyphs)Xr.x+=Ii,Xr.y+=ro})(Zt.positionedLines,rr,di,Si,vr,gi),Zt.top+=-Si*gi,Zt.bottom=Zt.top+gi,Zt.left+=-di*vr,Zt.right=Zt.left+vr,Zt.hasBaseline=qr}(Qt,y,I,ee,Ft,ke,Ie,$e,We,Le,Ze,mt),!function(Zt){for(const An of Zt)if(An.positionedGlyphs.length!==0)return!1;return!0}(qt)&&Qt}const Od={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_g={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function qf($,y,I,ee,re,ge){if(y.imageName){const ke=ee[y.imageName];return ke?ke.displaySize[0]*y.scale*ho/ge+re:0}{const ke=I[y.fontStack],Ie=ke&&ke.glyphs[$];return Ie?Ie.metrics.advance*y.scale+re:0}}function Hf($,y,I,ee){const re=Math.pow($-y,2);return ee?$<y?re/2:2*re:re+Math.abs(I)*I}function mg($,y,I){let ee=0;return $===10&&(ee-=1e4),I&&(ee+=150),$!==40&&$!==65288||(ee+=50),y!==41&&y!==65289||(ee+=50),ee}function Wf($,y,I,ee,re,ge){let ke=null,Ie=Hf(y,I,re,ge);for(const $e of ee){const Le=Hf(y-$e.x,I,re,ge)+$e.badness;Le<=Ie&&(ke=$e,Ie=Le)}return{index:$,x:y,priorBreak:ke,badness:Ie}}function Zf($){return $?Zf($.priorBreak).concat($.index):[]}function Tp($,y,I,ee,re,ge,ke){if(ge!=="point")return[];if(!$)return[];const Ie=[],$e=function(Ze,tt,ot,mt,Tt,Ft){let Ht=0;for(let Nt=0;Nt<Ze.length();Nt++){const qt=Ze.getSection(Nt);Ht+=qf(Ze.getCharCode(Nt),qt,mt,Tt,tt,Ft)}return Ht/Math.max(1,Math.ceil(Ht/ot))}($,y,I,ee,re,ke),Le=$.text.indexOf("\u200B")>=0;let Ve=0;for(let Ze=0;Ze<$.length();Ze++){const tt=$.getSection(Ze),ot=$.getCharCode(Ze);if(Od[ot]||(Ve+=qf(ot,tt,ee,re,y,ke)),Ze<$.length()-1){const mt=!((We=ot)<11904||!(zc(We)||Rc(We)||Vl(We)||Ul(We)||Dc(We)||Mu(We)||$c(We)||Nl(We)||va(We)||nl(We)||ya(We)||Gl(We)||fi(We)||si(We)||tl(We)||mo(We)||Hi(We)||Bc(We)||ia(We)||jl(We)));(_g[ot]||mt||tt.imageName)&&Ie.push(Wf(Ze+1,Ve,$e,Ie,mg(ot,$.getCharCode(Ze+1),mt&&Le),!1))}}var We;return Zf(Wf($.length(),Ve,$e,Ie,0,!0))}function Ap($){let y=.5,I=.5;switch($){case"right":case"top-right":case"bottom-right":y=1;break;case"left":case"top-left":case"bottom-left":y=0}switch($){case"bottom":case"bottom-right":case"bottom-left":I=1;break;case"top":case"top-right":case"top-left":I=0}return{horizontalAlign:y,verticalAlign:I}}function Xf($,y,I,ee,re){if(!(y||I||ee||re))return;const ge=$.length-1,ke=$[ge],Ie=(ke.x+ke.metrics.advance*ke.scale)*y;for(let $e=0;$e<=ge;$e++)$[$e].x-=Ie,$[$e].y+=I+ee+re}function gg($,y,I){const{horizontalAlign:ee,verticalAlign:re}=Ap(I),ge=y[0]-$.displaySize[0]*ee,ke=y[1]-$.displaySize[1]*re;return{image:$,top:ke,bottom:ke+$.displaySize[1],left:ge,right:ge+$.displaySize[0]}}function Kf($,y,I,ee,re,ge){const ke=$.image;let Ie;if(ke.content){const Tt=ke.content,Ft=ke.pixelRatio||1;Ie=[Tt[0]/Ft,Tt[1]/Ft,ke.displaySize[0]-Tt[2]/Ft,ke.displaySize[1]-Tt[3]/Ft]}const $e=y.left*ge,Le=y.right*ge;let Ve,We,Ze,tt;I==="width"||I==="both"?(tt=re[0]+$e-ee[3],We=re[0]+Le+ee[1]):(tt=re[0]+($e+Le-ke.displaySize[0])/2,We=tt+ke.displaySize[0]);const ot=y.top*ge,mt=y.bottom*ge;return I==="height"||I==="both"?(Ve=re[1]+ot-ee[0],Ze=re[1]+mt+ee[2]):(Ve=re[1]+(ot+mt-ke.displaySize[1])/2,Ze=Ve+ke.displaySize[1]),{image:ke,top:Ve,right:We,bottom:Ze,left:tt,collisionPadding:Ie}}class cl extends xe{constructor(y,I,ee,re,ge){super(y,I),this.angle=re,this.z=ee,ge!==void 0&&(this.segment=ge)}clone(){return new cl(this.x,this.y,this.z,this.angle,this.segment)}}function Yf($,y,I,ee,re){if(y.segment===void 0)return!0;let ge=y,ke=y.segment+1,Ie=0;for(;Ie>-I/2;){if(ke--,ke<0)return!1;Ie-=$[ke].dist(ge),ge=$[ke]}Ie+=$[ke].dist($[ke+1]),ke++;const $e=[];let Le=0;for(;Ie<I/2;){const Ve=$[ke],We=$[ke+1];if(!We)return!1;let Ze=$[ke-1].angleTo(Ve)-Ve.angleTo(We);for(Ze=Math.abs((Ze+3*Math.PI)%(2*Math.PI)-Math.PI),$e.push({distance:Ie,angleDelta:Ze}),Le+=Ze;Ie-$e[0].distance>ee;)Le-=$e.shift().angleDelta;if(Le>re)return!1;ke++,Ie+=Ve.dist(We)}return!0}function Jf($){let y=0;for(let I=0;I<$.length-1;I++)y+=$[I].dist($[I+1]);return y}function Qf($,y,I){return $?.6*y*I:0}function e_($,y){return Math.max($?$.right-$.left:0,y?y.right-y.left:0)}function yg($,y,I,ee,re,ge){const ke=Qf(I,re,ge),Ie=e_(I,ee)*ge;let $e=0;const Le=Jf($)/2;for(let Ve=0;Ve<$.length-1;Ve++){const We=$[Ve],Ze=$[Ve+1],tt=We.dist(Ze);if($e+tt>Le){const ot=(Le-$e)/tt,mt=Wr(We.x,Ze.x,ot),Tt=Wr(We.y,Ze.y,ot),Ft=new cl(mt,Tt,0,Ze.angleTo(We),Ve);return!ke||Yf($,Ft,Ie,ke,y)?Ft:void 0}$e+=tt}}function vg($,y,I,ee,re,ge,ke,Ie,$e){const Le=Qf(ee,ge,ke),Ve=e_(ee,re),We=Ve*ke,Ze=$[0].x===0||$[0].x===$e||$[0].y===0||$[0].y===$e;return y-We<y/4&&(y=We+y/4),t_($,Ze?y/2*Ie%y:(Ve/2+2*ge)*ke*Ie%y,y,Le,I,We,Ze,!1,$e)}function t_($,y,I,ee,re,ge,ke,Ie,$e){const Le=ge/2,Ve=Jf($);let We=0,Ze=y-I,tt=[];for(let ot=0;ot<$.length-1;ot++){const mt=$[ot],Tt=$[ot+1],Ft=mt.dist(Tt),Ht=Tt.angleTo(mt);for(;Ze+I<We+Ft;){Ze+=I;const Nt=(Ze-We)/Ft,qt=Wr(mt.x,Tt.x,Nt),Qt=Wr(mt.y,Tt.y,Nt);if(qt>=0&&qt<$e&&Qt>=0&&Qt<$e&&Ze-Le>=0&&Ze+Le<=Ve){const Zt=new cl(qt,Qt,0,Ht,ot);Zt._round(),ee&&!Yf($,Zt,ge,ee,re)||tt.push(Zt)}}We+=Ft}return Ie||tt.length||ke||(tt=t_($,We/2,I,ee,re,ge,ke,!0,$e)),tt}function n_($,y,I,ee,re){const ge=[];for(let ke=0;ke<$.length;ke++){const Ie=$[ke];let $e;for(let Le=0;Le<Ie.length-1;Le++){let Ve=Ie[Le],We=Ie[Le+1];Ve.x<y&&We.x<y||(Ve.x<y?Ve=new xe(y,Ve.y+(y-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round():We.x<y&&(We=new xe(y,Ve.y+(y-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round()),Ve.y<I&&We.y<I||(Ve.y<I?Ve=new xe(Ve.x+(I-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),I)._round():We.y<I&&(We=new xe(Ve.x+(I-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),I)._round()),Ve.x>=ee&&We.x>=ee||(Ve.x>=ee?Ve=new xe(ee,Ve.y+(ee-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round():We.x>=ee&&(We=new xe(ee,Ve.y+(ee-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round()),Ve.y>=re&&We.y>=re||(Ve.y>=re?Ve=new xe(Ve.x+(re-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),re)._round():We.y>=re&&(We=new xe(Ve.x+(re-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),re)._round()),$e&&Ve.equals($e[$e.length-1])||($e=[Ve],ge.push($e)),$e.push(We)))))}}return ge}ur(cl,"Anchor");const $h=1e20;function r_($,y,I,ee,re,ge,ke,Ie,$e){for(let Le=y;Le<y+ee;Le++)i_($,I*ge+Le,ge,re,ke,Ie,$e);for(let Le=I;Le<I+re;Le++)i_($,Le*ge+y,1,ee,ke,Ie,$e)}function i_($,y,I,ee,re,ge,ke){ge[0]=0,ke[0]=-$h,ke[1]=$h,re[0]=$[y];for(let Ie=1,$e=0,Le=0;Ie<ee;Ie++){re[Ie]=$[y+Ie*I];const Ve=Ie*Ie;do{const We=ge[$e];Le=(re[Ie]-re[We]+Ve-We*We)/(Ie-We)/2}while(Le<=ke[$e]&&--$e>-1);$e++,ge[$e]=Ie,ke[$e]=Le,ke[$e+1]=$h}for(let Ie=0,$e=0;Ie<ee;Ie++){for(;ke[$e+1]<Ie;)$e++;const Le=ge[$e],Ve=Ie-Le;$[y+Ie*I]=re[Le]+Ve*Ve}}const kp={none:0,ideographs:1,all:2};class Gu{constructor(y,I,ee){this.requestManager=y,this.localGlyphMode=I,this.localFontFamily=ee,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(y){this.url=y}getGlyphs(y,I){const ee=[];for(const re in y)for(const ge of y[re])ee.push({stack:re,id:ge});pt(ee,({stack:re,id:ge},ke)=>{let Ie=this.entries[re];Ie||(Ie=this.entries[re]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let $e=Ie.glyphs[ge];if($e!==void 0)return void ke(null,{stack:re,id:ge,glyph:$e});if($e=this._tinySDF(Ie,re,ge),$e)return Ie.glyphs[ge]=$e,void ke(null,{stack:re,id:ge,glyph:$e});const Le=Math.floor(ge/256);if(256*Le>65535)return void ke(new Error("glyphs > 65535 not supported"));if(Ie.ranges[Le])return void ke(null,{stack:re,id:ge,glyph:$e});let Ve=Ie.requests[Le];Ve||(Ve=Ie.requests[Le]=[],Gu.loadGlyphRange(re,Le,this.url,this.requestManager,(We,Ze)=>{if(Ze){Ie.ascender=Ze.ascender,Ie.descender=Ze.descender;for(const tt in Ze.glyphs)this._doesCharSupportLocalGlyph(+tt)||(Ie.glyphs[+tt]=Ze.glyphs[+tt]);Ie.ranges[Le]=!0}for(const tt of Ve)tt(We,Ze);delete Ie.requests[Le]})),Ve.push((We,Ze)=>{We?ke(We):Ze&&ke(null,{stack:re,id:ge,glyph:Ze.glyphs[ge]||null})})},(re,ge)=>{if(re)I(re);else if(ge){const ke={};for(const{stack:Ie,id:$e,glyph:Le}of ge)ke[Ie]===void 0&&(ke[Ie]={}),ke[Ie].glyphs===void 0&&(ke[Ie].glyphs={}),ke[Ie].glyphs[$e]=Le&&{id:Le.id,bitmap:Le.bitmap.clone(),metrics:Le.metrics},ke[Ie].ascender=this.entries[Ie].ascender,ke[Ie].descender=this.entries[Ie].descender;I(null,ke)}})}_doesCharSupportLocalGlyph(y){return this.localGlyphMode!==kp.none&&(this.localGlyphMode===kp.all?!!this.localFontFamily:!!this.localFontFamily&&(nl(y)||Lc(y)||fi(y)||Hi(y)||Nl(y)))}_tinySDF(y,I,ee){const re=this.localFontFamily;if(!re||!this._doesCharSupportLocalGlyph(ee))return;let ge=y.tinySDF;if(!ge){let mt="400";/bold/i.test(I)?mt="900":/medium/i.test(I)?mt="500":/light/i.test(I)&&(mt="200"),ge=y.tinySDF=new Gu.TinySDF({fontFamily:re,fontWeight:mt,fontSize:48,buffer:6,radius:16}),ge.fontWeight=mt}if(this.localGlyphs[ge.fontWeight][ee])return this.localGlyphs[ge.fontWeight][ee];const ke=String.fromCharCode(ee),{data:Ie,width:$e,height:Le,glyphWidth:Ve,glyphHeight:We,glyphLeft:Ze,glyphTop:tt,glyphAdvance:ot}=ge.draw(ke);return this.localGlyphs[ge.fontWeight][ee]={id:ee,bitmap:new sl({width:$e,height:Le},Ie),metrics:{width:Ve/2,height:We/2,left:Ze/2,top:tt/2-27,advance:ot/2,localGlyph:!0}}}}function o_($,y,I,ee){const re=[],ge=$.image,ke=ge.pixelRatio,Ie=ge.paddedRect.w-2,$e=ge.paddedRect.h-2,Le=$.right-$.left,Ve=$.bottom-$.top,We=ge.stretchX||[[0,Ie]],Ze=ge.stretchY||[[0,$e]],tt=(Sn,Bn)=>Sn+Bn[1]-Bn[0],ot=We.reduce(tt,0),mt=Ze.reduce(tt,0),Tt=Ie-ot,Ft=$e-mt;let Ht=0,Nt=ot,qt=0,Qt=mt,Zt=0,An=Tt,wn=0,On=Ft;if(ge.content&&ee){const Sn=ge.content;Ht=Rd(We,0,Sn[0]),qt=Rd(Ze,0,Sn[1]),Nt=Rd(We,Sn[0],Sn[2]),Qt=Rd(Ze,Sn[1],Sn[3]),Zt=Sn[0]-Ht,wn=Sn[1]-qt,An=Sn[2]-Sn[0]-Nt,On=Sn[3]-Sn[1]-Qt}const Jn=(Sn,Bn,Vn,Fn)=>{const Xn=zd(Sn.stretch-Ht,Nt,Le,$.left),Gn=$d(Sn.fixed-Zt,An,Sn.stretch,ot),ar=zd(Bn.stretch-qt,Qt,Ve,$.top),Rr=$d(Bn.fixed-wn,On,Bn.stretch,mt),$r=zd(Vn.stretch-Ht,Nt,Le,$.left),vr=$d(Vn.fixed-Zt,An,Vn.stretch,ot),rr=zd(Fn.stretch-qt,Qt,Ve,$.top),qr=$d(Fn.fixed-wn,On,Fn.stretch,mt),Ir=new xe(Xn,ar),dr=new xe($r,ar),gi=new xe($r,rr),di=new xe(Xn,rr),Si=new xe(Gn/ke,Rr/ke),jr=new xe(vr/ke,qr/ke),Jr=y*Math.PI/180;if(Jr){const hi=Math.sin(Jr),Ti=Math.cos(Jr),Ii=[Ti,-hi,hi,Ti];Ir._matMult(Ii),dr._matMult(Ii),di._matMult(Ii),gi._matMult(Ii)}const yi=Sn.stretch+Sn.fixed,pi=Bn.stretch+Bn.fixed;return{tl:Ir,tr:dr,bl:di,br:gi,tex:{x:ge.paddedRect.x+1+yi,y:ge.paddedRect.y+1+pi,w:Vn.stretch+Vn.fixed-yi,h:Fn.stretch+Fn.fixed-pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Si,pixelOffsetBR:jr,minFontScaleX:An/ke/Le,minFontScaleY:On/ke/Ve,isSDF:I}};if(ee&&(ge.stretchX||ge.stretchY)){const Sn=a_(We,Tt,ot),Bn=a_(Ze,Ft,mt);for(let Vn=0;Vn<Sn.length-1;Vn++){const Fn=Sn[Vn],Xn=Sn[Vn+1];for(let Gn=0;Gn<Bn.length-1;Gn++)re.push(Jn(Fn,Bn[Gn],Xn,Bn[Gn+1]))}}else re.push(Jn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ie+1},{fixed:0,stretch:$e+1}));return re}function Rd($,y,I){let ee=0;for(const re of $)ee+=Math.max(y,Math.min(I,re[1]))-Math.max(y,Math.min(I,re[0]));return ee}function a_($,y,I){const ee=[{fixed:-1,stretch:0}];for(const[re,ge]of $){const ke=ee[ee.length-1];ee.push({fixed:re-ke.stretch,stretch:ke.stretch}),ee.push({fixed:re-ke.stretch,stretch:ke.stretch+(ge-re)})}return ee.push({fixed:y+1,stretch:I}),ee}function zd($,y,I,ee){return $/y*I+ee}function $d($,y,I,ee){return $-y*I/ee}function xg($,y,I,ee){const re=y+$.positionedLines[ee].lineOffset;return ee===0?I+re/2:I+(re+(y+$.positionedLines[ee-1].lineOffset))/2}Gu.loadGlyphRange=function($,y,I,ee,re){const ge=256*y,ke=ge+255,Ie=ee.transformRequest(ee.normalizeGlyphsURL(I).replace("{fontstack}",$).replace("{range}",`${ge}-${ke}`),tn.Glyphs);_n(Ie,($e,Le)=>{if($e)re($e);else if(Le){const Ve={},We=function(Ze){return new Rh(Ze).readFields(dg,{})}(Le);for(const Ze of We.glyphs)Ve[Ze.id]=Ze;re(null,{glyphs:Ve,ascender:We.ascender,descender:We.descender})}})},Gu.TinySDF=class{constructor({fontSize:$=24,buffer:y=3,radius:I=8,cutoff:ee=.25,fontFamily:re="sans-serif",fontWeight:ge="normal",fontStyle:ke="normal"}={}){this.buffer=y,this.cutoff=ee,this.radius=I;const Ie=this.size=$+4*y,$e=this._createCanvas(Ie),Le=this.ctx=$e.getContext("2d",{willReadFrequently:!0});Le.font=`${ke} ${ge} ${$}px ${re}`,Le.textBaseline="alphabetic",Le.textAlign="left",Le.fillStyle="black",this.gridOuter=new Float64Array(Ie*Ie),this.gridInner=new Float64Array(Ie*Ie),this.f=new Float64Array(Ie),this.z=new Float64Array(Ie+1),this.v=new Uint16Array(Ie)}_createCanvas($){const y=document.createElement("canvas");return y.width=y.height=$,y}draw($){const{width:y,actualBoundingBoxAscent:I,actualBoundingBoxDescent:ee,actualBoundingBoxLeft:re,actualBoundingBoxRight:ge}=this.ctx.measureText($),ke=Math.ceil(I),Ie=Math.min(this.size-this.buffer,Math.ceil(ge-re)),$e=Math.min(this.size-this.buffer,ke+Math.ceil(ee)),Le=Ie+2*this.buffer,Ve=$e+2*this.buffer,We=Math.max(Le*Ve,0),Ze=new Uint8ClampedArray(We),tt={data:Ze,width:Le,height:Ve,glyphWidth:Ie,glyphHeight:$e,glyphTop:ke,glyphLeft:0,glyphAdvance:y};if(Ie===0||$e===0)return tt;const{ctx:ot,buffer:mt,gridInner:Tt,gridOuter:Ft}=this;ot.clearRect(mt,mt,Ie,$e),ot.fillText($,mt,mt+ke);const Ht=ot.getImageData(mt,mt,Ie,$e);Ft.fill($h,0,We),Tt.fill(0,0,We);for(let Nt=0;Nt<$e;Nt++)for(let qt=0;qt<Ie;qt++){const Qt=Ht.data[4*(Nt*Ie+qt)+3]/255;if(Qt===0)continue;const Zt=(Nt+mt)*Le+qt+mt;if(Qt===1)Ft[Zt]=0,Tt[Zt]=$h;else{const An=.5-Qt;Ft[Zt]=An>0?An*An:0,Tt[Zt]=An<0?An*An:0}}r_(Ft,0,0,Le,Ve,Le,this.f,this.v,this.z),r_(Tt,mt,mt,Ie,$e,Le,this.f,this.v,this.z);for(let Nt=0;Nt<We;Nt++){const qt=Math.sqrt(Ft[Nt])-Math.sqrt(Tt[Nt]);Ze[Nt]=Math.round(255-255*(qt/this.radius+this.cutoff))}return tt}};class bg{constructor(y=[],I=wg){if(this.data=y,this.length=this.data.length,this.compare=I,this.length>0)for(let ee=(this.length>>1)-1;ee>=0;ee--)this._down(ee)}push(y){this.data.push(y),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const y=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),y}peek(){return this.data[0]}_up(y){const{data:I,compare:ee}=this,re=I[y];for(;y>0;){const ge=y-1>>1,ke=I[ge];if(ee(re,ke)>=0)break;I[y]=ke,y=ge}I[y]=re}_down(y){const{data:I,compare:ee}=this,re=this.length>>1,ge=I[y];for(;y<re;){let ke=1+(y<<1),Ie=I[ke];const $e=ke+1;if($e<this.length&&ee(I[$e],Ie)<0&&(ke=$e,Ie=I[$e]),ee(Ie,ge)>=0)break;I[y]=Ie,y=ke}I[y]=ge}}function wg($,y){return $<y?-1:$>y?1:0}function Eg($,y=1,I=!1){let ee=1/0,re=1/0,ge=-1/0,ke=-1/0;const Ie=$[0];for(let tt=0;tt<Ie.length;tt++){const ot=Ie[tt];(!tt||ot.x<ee)&&(ee=ot.x),(!tt||ot.y<re)&&(re=ot.y),(!tt||ot.x>ge)&&(ge=ot.x),(!tt||ot.y>ke)&&(ke=ot.y)}const $e=Math.min(ge-ee,ke-re);let Le=$e/2;const Ve=new bg([],Tg);if($e===0)return new xe(ee,re);for(let tt=ee;tt<ge;tt+=$e)for(let ot=re;ot<ke;ot+=$e)Ve.push(new qu(tt+Le,ot+Le,Le,$));let We=function(tt){let ot=0,mt=0,Tt=0;const Ft=tt[0];for(let Ht=0,Nt=Ft.length,qt=Nt-1;Ht<Nt;qt=Ht++){const Qt=Ft[Ht],Zt=Ft[qt],An=Qt.x*Zt.y-Zt.x*Qt.y;mt+=(Qt.x+Zt.x)*An,Tt+=(Qt.y+Zt.y)*An,ot+=3*An}return new qu(mt/ot,Tt/ot,0,tt)}($),Ze=Ve.length;for(;Ve.length;){const tt=Ve.pop();(tt.d>We.d||!We.d)&&(We=tt,I&&console.log("found best %d after %d probes",Math.round(1e4*tt.d)/1e4,Ze)),tt.max-We.d<=y||(Le=tt.h/2,Ve.push(new qu(tt.p.x-Le,tt.p.y-Le,Le,$)),Ve.push(new qu(tt.p.x+Le,tt.p.y-Le,Le,$)),Ve.push(new qu(tt.p.x-Le,tt.p.y+Le,Le,$)),Ve.push(new qu(tt.p.x+Le,tt.p.y+Le,Le,$)),Ze+=4)}return I&&(console.log(`num probes: ${Ze}`),console.log(`best distance: ${We.d}`)),We.p}function Tg($,y){return y.max-$.max}function qu($,y,I,ee){this.p=new xe($,y),this.h=I,this.d=function(re,ge){let ke=!1,Ie=1/0;for(let $e=0;$e<ge.length;$e++){const Le=ge[$e];for(let Ve=0,We=Le.length,Ze=We-1;Ve<We;Ze=Ve++){const tt=Le[Ve],ot=Le[Ze];tt.y>re.y!=ot.y>re.y&&re.x<(ot.x-tt.x)*(re.y-tt.y)/(ot.y-tt.y)+tt.x&&(ke=!ke),Ie=Math.min(Ie,ko(re,tt,ot))}}return(ke?1:-1)*Math.sqrt(Ie)}(this.p,ee),this.max=this.d+this.h*Math.SQRT2}const Sp=Number.POSITIVE_INFINITY,Ag=Math.sqrt(2);function s_($,y){return y[1]!==Sp?function(I,ee,re){let ge=0,ke=0;switch(ee=Math.abs(ee),re=Math.abs(re),I){case"top-right":case"top-left":case"top":ke=re-7;break;case"bottom-right":case"bottom-left":case"bottom":ke=7-re}switch(I){case"top-right":case"bottom-right":case"right":ge=-ee;break;case"top-left":case"bottom-left":case"left":ge=ee}return[ge,ke]}($,y[0],y[1]):function(I,ee){let re=0,ge=0;ee<0&&(ee=0);const ke=ee/Ag;switch(I){case"top-right":case"top-left":ge=ke-7;break;case"bottom-right":case"bottom-left":ge=7-ke;break;case"bottom":ge=7-ee;break;case"top":ge=ee-7}switch(I){case"top-right":case"bottom-right":re=-ke;break;case"top-left":case"bottom-left":re=ke;break;case"left":re=ee;break;case"right":re=-ee}return[re,ge]}($,y[0])}function kg($,y,I,ee,re,ge,ke,Ie,$e,Le){$.createArrays(),$.tilePixelRatio=kr/(512*$.overscaling),$.compareText={},$.iconsNeedLinear=!1;const Ve=$.layers[0].layout,We=$.layers[0]._unevaluatedLayout._values,Ze={};if($.textSizeData.kind==="composite"){const{minZoom:mt,maxZoom:Tt}=$.textSizeData;Ze.compositeTextSizes=[We["text-size"].possiblyEvaluate(new At(mt),Ie),We["text-size"].possiblyEvaluate(new At(Tt),Ie)]}if($.iconSizeData.kind==="composite"){const{minZoom:mt,maxZoom:Tt}=$.iconSizeData;Ze.compositeIconSizes=[We["icon-size"].possiblyEvaluate(new At(mt),Ie),We["icon-size"].possiblyEvaluate(new At(Tt),Ie)]}Ze.layoutTextSize=We["text-size"].possiblyEvaluate(new At($e+1),Ie),Ze.layoutIconSize=We["icon-size"].possiblyEvaluate(new At($e+1),Ie),Ze.textMaxSize=We["text-size"].possiblyEvaluate(new At(18),Ie);const tt=Ve.get("text-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",ot=Ve.get("text-size");for(const mt of $.features){const Tt=Ve.get("text-font").evaluate(mt,{},Ie).join(","),Ft=ot.evaluate(mt,{},Ie),Ht=Ze.layoutTextSize.evaluate(mt,{},Ie),Nt=(Ze.layoutIconSize.evaluate(mt,{},Ie),{horizontal:{},vertical:void 0}),qt=mt.text;let Qt,Zt=[0,0];if(qt){const On=qt.toString(),Jn=Ve.get("text-letter-spacing").evaluate(mt,{},Ie)*ho,Sn=Ve.get("text-line-height").evaluate(mt,{},Ie)*ho,Bn=Nc(On)?Jn:0,Vn=Ve.get("text-anchor").evaluate(mt,{},Ie),Fn=Ve.get("text-variable-anchor");if(!Fn){const vr=Ve.get("text-radial-offset").evaluate(mt,{},Ie);Zt=vr?s_(Vn,[vr*ho,Sp]):Ve.get("text-offset").evaluate(mt,{},Ie).map(rr=>rr*ho)}let Xn=tt?"center":Ve.get("text-justify").evaluate(mt,{},Ie);const Gn=Ve.get("symbol-placement"),ar=Gn==="point",Rr=Gn==="point"?Ve.get("text-max-width").evaluate(mt,{},Ie)*ho:0,$r=vr=>{$.allowVerticalPlacement&&rl(On)&&(Nt.vertical=Ep(qt,y,I,re,Tt,Rr,Sn,Vn,vr,Bn,Zt,sa.vertical,!0,Gn,Ht,Ft))};if(!tt&&Fn){const vr=Xn==="auto"?Fn.map(qr=>Cp(qr)):[Xn];let rr=!1;for(let qr=0;qr<vr.length;qr++){const Ir=vr[qr];if(!Nt.horizontal[Ir])if(rr)Nt.horizontal[Ir]=Nt.horizontal[0];else{const dr=Ep(qt,y,I,re,Tt,Rr,Sn,"center",Ir,Bn,Zt,sa.horizontal,!1,Gn,Ht,Ft);dr&&(Nt.horizontal[Ir]=dr,rr=dr.positionedLines.length===1)}}$r("left")}else{if(Xn==="auto"&&(Xn=Cp(Vn)),ar||Ve.get("text-writing-mode").indexOf("horizontal")>=0||!rl(On)){const vr=Ep(qt,y,I,re,Tt,Rr,Sn,Vn,Xn,Bn,Zt,sa.horizontal,!1,Gn,Ht,Ft);vr&&(Nt.horizontal[Xn]=vr)}$r(Gn==="point"?"left":Xn)}}let An=!1;if(mt.icon&&mt.icon.name){const On=ee[mt.icon.name];On&&(Qt=gg(re[mt.icon.name],Ve.get("icon-offset").evaluate(mt,{},Ie),Ve.get("icon-anchor").evaluate(mt,{},Ie)),An=On.sdf,$.sdfIcons===void 0?$.sdfIcons=On.sdf:$.sdfIcons!==On.sdf&&Dt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(On.pixelRatio!==$.pixelRatio||Ve.get("icon-rotate").constantOr(1)!==0)&&($.iconsNeedLinear=!0))}const wn=c_(Nt.horizontal)||Nt.vertical;$.iconsInText||($.iconsInText=!!wn&&wn.iconsInText),(wn||Qt)&&Sg($,mt,Nt,Qt,ee,Ze,Ht,0,Zt,An,ke,Ie,Le)}ge&&$.generateCollisionDebugBuffers($e,$.collisionBoxArray)}function Cp($){switch($){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Sg($,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze){let tt=ge.textMaxSize.evaluate(y,{},We);tt===void 0&&(tt=ke);const ot=$.layers[0].layout,mt=ot.get("icon-offset").evaluate(y,{},We),Tt=c_(I.horizontal)||I.vertical,Ft=Ze.name==="globe",Ht=ke/24,Nt=$.tilePixelRatio*tt/24,qt=(Bn=$.overscaling,$.zoom>18&&Bn>2&&(Bn>>=1),Math.max(kr/(512*Bn),1)*ot.get("symbol-spacing")),Qt=ot.get("text-padding")*$.tilePixelRatio,Zt=ot.get("icon-padding")*$.tilePixelRatio,An=Oe(ot.get("text-max-angle")),wn=ot.get("text-rotation-alignment")==="map"&&ot.get("symbol-placement")!=="point",On=ot.get("icon-rotation-alignment")==="map"&&ot.get("symbol-placement")!=="point",Jn=ot.get("symbol-placement"),Sn=qt/2;var Bn;const Vn=ot.get("icon-text-fit");let Fn;ee&&Vn!=="none"&&($.allowVerticalPlacement&&I.vertical&&(Fn=Kf(ee,I.vertical,Vn,ot.get("icon-text-fit-padding"),mt,Ht)),Tt&&(ee=Kf(ee,Tt,Vn,ot.get("icon-text-fit-padding"),mt,Ht)));const Xn=(Gn,ar,Rr)=>{if(ar.x<0||ar.x>=kr||ar.y<0||ar.y>=kr)return;let $r=null;if(Ft){const{x:vr,y:rr,z:qr}=Ze.projectTilePoint(ar.x,ar.y,Rr);$r={anchor:new cl(vr,rr,qr,0,void 0),up:Ze.upVector(Rr,ar.x,ar.y)}}(function(vr,rr,qr,Ir,dr,gi,di,Si,jr,Jr,yi,pi,hi,Ti,Ii,ro,Fo,Xr,Di,yo,ri,Pi,Mo,Ci,Ni){const io=vr.addToLineVertexArray(rr,Ir);let eo,po,Io,oo,hl,Ku,Hh,Wh=0,H_=0,W_=0,Z_=0,qp=-1,Hp=-1;const Es={};let X_=Uc("");const Kc=qr?qr.anchor:rr;let Wp=0,Zp=0;if(jr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Wp,Zp]=jr.layout.get("text-offset").evaluate(ri,{},Ni).map(Ko=>Ko*ho):(Wp=jr.layout.get("text-radial-offset").evaluate(ri,{},Ni)*ho,Zp=Sp),vr.allowVerticalPlacement&&dr.vertical){const Ko=dr.vertical;if(Ii)Ku=Mp(Ko),Si&&(Hh=Mp(Si));else{const Yo=jr.layout.get("text-rotate").evaluate(ri,{},Ni)+90;Io=Dd(Jr,Kc,rr,yi,pi,hi,Ko,Ti,Yo,ro),Si&&(oo=Dd(Jr,Kc,rr,yi,pi,hi,Si,Xr,Yo))}}if(gi){const Ko=jr.layout.get("icon-rotate").evaluate(ri,{},Ni),Yo=jr.layout.get("icon-text-fit")!=="none",Zh=o_(gi,Ko,Mo,Yo),Kp=Si?o_(Si,Ko,Mo,Yo):void 0;po=Dd(Jr,Kc,rr,yi,pi,hi,gi,Xr,Ko),Wh=4*Zh.length;const K_=vr.iconSizeData;let Yc=null;K_.kind==="source"?(Yc=[ys*jr.layout.get("icon-size").evaluate(ri,{},Ni)],Yc[0]>Yl&&Dt(`${vr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):K_.kind==="composite"&&(Yc=[ys*Pi.compositeIconSizes[0].evaluate(ri,{},Ni),ys*Pi.compositeIconSizes[1].evaluate(ri,{},Ni)],(Yc[0]>Yl||Yc[1]>Yl)&&Dt(`${vr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),vr.addSymbols(vr.icon,Zh,Yc,yo,Di,ri,!1,qr,rr,io.lineStartIndex,io.lineLength,-1,Ci,Ni),qp=vr.icon.placedSymbolArray.length-1,Kp&&(H_=4*Kp.length,vr.addSymbols(vr.icon,Kp,Yc,yo,Di,ri,sa.vertical,qr,rr,io.lineStartIndex,io.lineLength,-1,Ci,Ni),Hp=vr.icon.placedSymbolArray.length-1)}for(const Ko in dr.horizontal){const Yo=dr.horizontal[Ko];eo||(X_=Uc(Yo.text),Ii?hl=Mp(Yo):eo=Dd(Jr,Kc,rr,yi,pi,hi,Yo,Ti,jr.layout.get("text-rotate").evaluate(ri,{},Ni),ro));const Zh=Yo.positionedLines.length===1;if(W_+=l_(vr,qr,rr,Yo,di,jr,Ii,ri,ro,io,dr.vertical?sa.horizontal:sa.horizontalOnly,Zh?Object.keys(dr.horizontal):[Ko],Es,qp,Pi,Ci,Ni),Zh)break}dr.vertical&&(Z_+=l_(vr,qr,rr,dr.vertical,di,jr,Ii,ri,ro,io,sa.vertical,["vertical"],Es,Hp,Pi,Ci,Ni));let rc=-1;const Xp=(Ko,Yo)=>Ko?Math.max(Ko,Yo):Yo;rc=Xp(hl,rc),rc=Xp(Ku,rc),rc=Xp(Hh,rc);const oy=rc>-1?1:0;vr.glyphOffsetArray.length>=Ql.MAX_GLYPHS&&Dt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ri.sortKey!==void 0&&vr.addToSortKeyRanges(vr.symbolInstances.length,ri.sortKey),vr.symbolInstances.emplaceBack(Kc.x,Kc.y,Kc.z,rr.x,rr.y,Es.right>=0?Es.right:-1,Es.center>=0?Es.center:-1,Es.left>=0?Es.left:-1,Es.vertical>=0?Es.vertical:-1,qp,Hp,X_,eo!==void 0?eo:vr.collisionBoxArray.length,eo!==void 0?eo+1:vr.collisionBoxArray.length,Io!==void 0?Io:vr.collisionBoxArray.length,Io!==void 0?Io+1:vr.collisionBoxArray.length,po!==void 0?po:vr.collisionBoxArray.length,po!==void 0?po+1:vr.collisionBoxArray.length,oo||vr.collisionBoxArray.length,oo?oo+1:vr.collisionBoxArray.length,yi,W_,Z_,Wh,H_,oy,0,Wp,Zp,rc)})($,ar,$r,Gn,I,ee,re,Fn,$.layers[0],$.collisionBoxArray,y.index,y.sourceLayerIndex,$.index,Qt,wn,$e,0,Zt,On,mt,y,ge,Le,Ve,We)};if(Jn==="line")for(const Gn of n_(y.geometry,0,0,kr,kr)){const ar=vg(Gn,qt,An,I.vertical||Tt,ee,24,Nt,$.overscaling,kr);for(const Rr of ar){const $r=Tt;$r&&Cg($,$r.text,Sn,Rr)||Xn(Gn,Rr,We)}}else if(Jn==="line-center"){for(const Gn of y.geometry)if(Gn.length>1){const ar=yg(Gn,An,I.vertical||Tt,ee,24,Nt);ar&&Xn(Gn,ar,We)}}else if(y.type==="Polygon")for(const Gn of mp(y.geometry,0)){const ar=Eg(Gn,16);Xn(Gn[0],new cl(ar.x,ar.y,0,0,void 0),We)}else if(y.type==="LineString")for(const Gn of y.geometry)Xn(Gn,new cl(Gn[0].x,Gn[0].y,0,0,void 0),We);else if(y.type==="Point")for(const Gn of y.geometry)for(const ar of Gn)Xn([ar],new cl(ar.x,ar.y,0,0,void 0),We)}const Yl=32640;function l_($,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot,mt,Tt){const Ft=function(qt,Qt,Zt,An,wn,On,Jn,Sn){const Bn=[];if(Qt.positionedLines.length===0)return Bn;const Vn=An.layout.get("text-rotate").evaluate(On,{})*Math.PI/180,Fn=function($r){const vr=$r[0],rr=$r[1],qr=vr*rr;return qr>0?[vr,-rr]:qr<0?[-vr,rr]:vr===0?[rr,vr]:[rr,-vr]}(Zt);let Xn=Math.abs(Qt.top-Qt.bottom);for(const $r of Qt.positionedLines)Xn-=$r.lineOffset;const Gn=Qt.positionedLines.length,ar=Xn/Gn;let Rr=Qt.top-Zt[1];for(let $r=0;$r<Gn;++$r){const vr=Qt.positionedLines[$r];Rr=xg(Qt,ar,Rr,$r);for(const rr of vr.positionedGlyphs){if(!rr.rect)continue;const qr=rr.rect||{};let Ir=4,dr=!0,gi=1,di=0;if(rr.imageName){const Ci=Jn[rr.imageName];if(!Ci)continue;if(Ci.sdf){Dt("SDF images are not supported in formatted text and will be ignored.");continue}dr=!1,gi=Ci.pixelRatio,Ir=1/gi}const Si=(wn||Sn)&&rr.vertical,jr=rr.metrics.advance*rr.scale/2,Jr=rr.metrics,yi=rr.rect;if(yi===null)continue;Sn&&Qt.verticalizable&&(di=rr.imageName?jr-rr.metrics.width*rr.scale/2:0);const pi=wn?[rr.x+jr,rr.y]:[0,0];let hi=[0,0],Ti=[0,0],Ii=!1;wn||(Si?(Ti=[rr.x+jr+Fn[0],rr.y+Fn[1]-di],Ii=!0):hi=[rr.x+jr+Zt[0],rr.y+Zt[1]-di]);const ro=yi.w*rr.scale/(gi*(rr.localGlyph?2:1)),Fo=yi.h*rr.scale/(gi*(rr.localGlyph?2:1));let Xr,Di,yo,ri;if(Si){const Ci=rr.y-Rr,Ni=new xe(-jr,jr-Ci),io=-Math.PI/2,eo=new xe(...Ti);Xr=new xe(-jr+hi[0],hi[1]),Xr._rotateAround(io,Ni)._add(eo),Xr.x+=-Ci+jr,Xr.y-=(Jr.left-Ir)*rr.scale;const po=rr.imageName?Jr.advance*rr.scale:ho*rr.scale,Io=String.fromCharCode(rr.glyph);tg(Io)?Xr.x+=(1-Ir)*rr.scale:ng(Io)?Xr.x+=po-Jr.height*rr.scale+(-Ir-1)*rr.scale:Xr.x+=rr.imageName||Jr.width+2*Ir===yi.w&&Jr.height+2*Ir===yi.h?(po-Fo)/2:(po-(Jr.height+2*Ir)*rr.scale)/2,Di=new xe(Xr.x,Xr.y-ro),yo=new xe(Xr.x+Fo,Xr.y),ri=new xe(Xr.x+Fo,Xr.y-ro)}else{const Ci=(Jr.left-Ir)*rr.scale-jr+hi[0],Ni=(-Jr.top-Ir)*rr.scale+hi[1],io=Ci+ro,eo=Ni+Fo;Xr=new xe(Ci,Ni),Di=new xe(io,Ni),yo=new xe(Ci,eo),ri=new xe(io,eo)}if(Vn){let Ci;Ci=wn?new xe(0,0):Ii?new xe(Fn[0],Fn[1]):new xe(Zt[0],Zt[1]),Xr._rotateAround(Vn,Ci),Di._rotateAround(Vn,Ci),yo._rotateAround(Vn,Ci),ri._rotateAround(Vn,Ci)}const Pi=new xe(0,0),Mo=new xe(0,0);Bn.push({tl:Xr,tr:Di,bl:yo,br:ri,tex:qr,writingMode:Qt.writingMode,glyphOffset:pi,sectionIndex:rr.sectionIndex,isSDF:dr,pixelOffsetTL:Pi,pixelOffsetBR:Mo,minFontScaleX:0,minFontScaleY:0})}}return Bn}(0,ee,$e,ge,ke,Ie,re,$.allowVerticalPlacement),Ht=$.textSizeData;let Nt=null;Ht.kind==="source"?(Nt=[ys*ge.layout.get("text-size").evaluate(Ie,{},Tt)],Nt[0]>Yl&&Dt(`${$.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ht.kind==="composite"&&(Nt=[ys*ot.compositeTextSizes[0].evaluate(Ie,{},Tt),ys*ot.compositeTextSizes[1].evaluate(Ie,{},Tt)],(Nt[0]>Yl||Nt[1]>Yl)&&Dt(`${$.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),$.addSymbols($.text,Ft,Nt,$e,ke,Ie,Ve,y,I,Le.lineStartIndex,Le.lineLength,tt,mt,Tt);for(const qt of We)Ze[qt]=$.text.placedSymbolArray.length-1;return 4*Ft.length}function c_($){for(const y in $)return $[y];return null}function Dd($,y,I,ee,re,ge,ke,Ie,$e,Le){let Ve=ke.top,We=ke.bottom,Ze=ke.left,tt=ke.right;const ot=ke.collisionPadding;if(ot&&(Ze-=ot[0],Ve-=ot[1],tt+=ot[2],We+=ot[3]),$e){const mt=new xe(Ze,Ve),Tt=new xe(tt,Ve),Ft=new xe(Ze,We),Ht=new xe(tt,We),Nt=Oe($e);let qt=new xe(0,0);Le&&(qt=new xe(Le[0],Le[1])),mt._rotateAround(Nt,qt),Tt._rotateAround(Nt,qt),Ft._rotateAround(Nt,qt),Ht._rotateAround(Nt,qt),Ze=Math.min(mt.x,Tt.x,Ft.x,Ht.x),tt=Math.max(mt.x,Tt.x,Ft.x,Ht.x),Ve=Math.min(mt.y,Tt.y,Ft.y,Ht.y),We=Math.max(mt.y,Tt.y,Ft.y,Ht.y)}return $.emplaceBack(y.x,y.y,y.z,I.x,I.y,Ze,Ve,tt,We,Ie,ee,re,ge),$.length-1}function Mp($){$.collisionPadding&&($.top-=$.collisionPadding[1],$.bottom+=$.collisionPadding[3]);const y=$.bottom-$.top;return y>0?Math.max(10,y):null}function Cg($,y,I,ee){const re=$.compareText;if(y in re){const ge=re[y];for(let ke=ge.length-1;ke>=0;ke--)if(ee.dist(ge[ke])<I)return!0}else re[y]=[];return re[y].push(ee),!1}const Mg=Ln([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:u_}=Mg,h_=Ln([{name:"a_pos_3",components:3,type:"Int16"}]);var Dh=Ln([{name:"a_pos",type:"Int16",components:2}]);const ul=kr/Math.PI/2,Ip=2*Lo(1,0)*ul*Math.PI,Hu=[64,32,16],Ha=-ul,Wa=ul,Ig=[new Bo([Ha,Ha,Ha],[Wa,Wa,Wa]),new Bo([Ha,Ha,Ha],[0,0,Wa]),new Bo([0,Ha,Ha],[Wa,0,Wa]),new Bo([Ha,0,Ha],[0,Wa,Wa]),new Bo([0,0,Ha],[Wa,Wa,Wa])];function d_($,y,I,ee=!0){const re=Ga([],$._camera.position,$.worldSize),ge=[y,I,1,1];qc(ge,ge,$.pixelMatrixInverse),rf(ge,ge,1/ge[3]);const ke=So([],qa([],ge,re)),Ie=$.globeMatrix,$e=[Ie[12],Ie[13],Ie[14]],Le=qa([],$e,re),Ve=bh(Le),We=So([],Le),Ze=$.worldSize/(2*Math.PI),tt=wa(We,ke),ot=Math.asin(Ze/Ve);if(ot<Math.acos(tt)){if(!ee)return null;const Jn=[],Sn=[];Ga(Jn,ke,Ve/tt),So(Sn,qa(Sn,Jn,Le)),So(ke,Kl(ke,Le,Ga(ke,Sn,Math.tan(ot)*Ve)))}const mt=[];new lp(re,ke).closestPointOnSphere($e,Ze,mt);const Tt=So([],hn(Ie,0)),Ft=So([],hn(Ie,1)),Ht=So([],hn(Ie,2)),Nt=wa(Tt,mt),qt=wa(Ft,mt),Qt=wa(Ht,mt),Zt=ze(Math.asin(-qt/Ze));let An=ze(Math.atan2(Nt,Qt));An=$.center.lng+function(Jn,Sn){const Bn=(Sn-Jn+180)%360-180;return Bn<-180?Bn+360:Bn}($.center.lng,An);const wn=xa(An),On=Ke(Va(Zt),0,1);return new Xl(wn,On)}class Pg{constructor(y,I,ee){this.a=qa([],y,ee),this.b=qa([],I,ee),this.center=ee;const re=So([],this.a),ge=So([],this.b);this.angle=Math.acos(wa(re,ge))}}function Pp($,y){if($.angle===0)return null;let I;return I=$.a[y]===0?1/$.angle*.5*Math.PI:1/$.angle*Math.atan($.b[y]/$.a[y]/Math.sin($.angle)-1/Math.tan($.angle)),I<0||I>1?null:function(ee,re,ge,ke){const Ie=Math.sin(ge);return ee*(Math.sin((1-ke)*ge)/Ie)+re*(Math.sin(ke*ge)/Ie)}($.a[y],$.b[y],$.angle,Ke(I,0,1))+$.center[y]}function vs($){if($.z<=1)return Ig[$.z+2*$.y+$.x];const y=Op(Ld($));return Bo.fromPoints(y)}function p_($,y){const I=Fh(y.zoom);if(I===0)return vs($);const ee=Ld($),re=Op(ee),ge=xa(ee.getWest())*y.worldSize,ke=xa(ee.getEast())*y.worldSize,Ie=Va(ee.getNorth())*y.worldSize,$e=Va(ee.getSouth())*y.worldSize,Le=[ge,Ie,0],Ve=[ke,Ie,0],We=[ge,$e,0],Ze=[ke,$e,0],tt=tp([],y.globeMatrix);return Zi(Le,Le,tt),Zi(Ve,Ve,tt),Zi(We,We,tt),Zi(Ze,Ze,tt),re[0]=Ya(re[0],We,I),re[1]=Ya(re[1],Ze,I),re[2]=Ya(re[2],Ve,I),re[3]=Ya(re[3],Le,I),Bo.fromPoints(re)}function f_($,y,I,ee,re){for(const ge of I)Zi(ge,ge,ee),Ga(ge,ge,re),op($,$,ge),ap(y,y,ge)}function Og($,y,I){const ee=y/$.worldSize,re=Number.MAX_VALUE,ge=[-re,-re,-re],ke=[re,re,re],Ie=$.globeMatrix;if(I.z<=1)return f_(ke,ge,vs(I).getCorners(),Ie,ee),new Bo(ke,ge);const $e=Ld(I),Le=Op($e);if(f_(ke,ge,Le,Ie,ee),$e.contains($.center)){ge[2]=0;const An=$.point,wn=[An.x*ee,An.y*ee,0];return op(ke,ke,wn),ap(ge,ge,wn),new Bo(ke,ge)}const Ve=[Ie[12]*ee,Ie[13]*ee,Ie[14]*ee],We=$e.getCenter(),Ze=Ke($.center.lat,-85.051129,ba),tt=Ke(We.lat,-85.051129,ba),ot=xa($.center.lng),mt=Va(Ze);let Tt=ot-xa(We.lng);const Ft=mt-Va(tt);Tt>.5?Tt-=1:Tt<-.5&&(Tt+=1);let Ht=0;Math.abs(Tt)>Math.abs(Ft)?Ht=Tt>=0?1:3:(Ht=Ft>=0?0:2,vd(Ve,Ve,[Ie[4]*ee,Ie[5]*ee,Ie[6]*ee],-Math.sin(Oe(Ft>=0?$e.getSouth():$e.getNorth()))*ul));const Nt=Le[Ht],qt=Le[(Ht+1)%4],Qt=new Pg(Nt,qt,Ve),Zt=[Pp(Qt,0)||Nt[0],Pp(Qt,1)||Nt[1],Pp(Qt,2)||Nt[2]];return ke[2]=Math.min(Nt[2],qt[2]),op(ke,ke,Zt),ap(ge,ge,Zt),new Bo(ke,ge)}function Ld({x:$,y,z:I}){const ee=1/(1<<I),re=new ti(Ho($*ee),Ji((y+1)*ee)),ge=new ti(Ho(($+1)*ee),Ji(y*ee));return new Ua(re,ge)}function Op($){const y=Oe($.getNorth()),I=Oe($.getSouth()),ee=Math.cos(y),re=Math.cos(I),ge=Math.sin(y),ke=Math.sin(I),Ie=$.getWest(),$e=$.getEast();return[Wu(re,ke,Ie),Wu(re,ke,$e),Wu(ee,ge,$e),Wu(ee,ge,Ie)]}function Wu($,y,I,ee=ul){return I=Oe(I),[$*Math.sin(I)*ee,-y*ee,$*Math.cos(I)*ee]}function Bd($,y,I){return Wu(Math.cos(Oe($)),Math.sin(Oe($)),y,I)}function Lh($,y,I,ee){const re=1<<I.z,ge=($/kr+I.x)/re;return Bd(Ji((y/kr+I.y)/re),Ho(ge),ee)}function Fd({min:$,max:y}){return 16383/Math.max(y[0]-$[0],y[1]-$[1],y[2]-$[2])}const __=new Float64Array(16);function Bh($){const y=Fd($),I=Jp(__,[y,y,y]);return xh(I,I,((ee=[])[0]=-(re=$.min)[0],ee[1]=-re[1],ee[2]=-re[2],ee));var ee,re}function Rp($){const y=(ee=$.min,(I=__)[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=ee[0],I[13]=ee[1],I[14]=ee[2],I[15]=1,I);var I,ee;const re=1/Fd($);return Gc(y,y,[re,re,re])}function m_($,y,I,ee,re){const ge=function($e){const Le=kr/(2*Math.PI);return $e/(2*Math.PI)/Le}(I),ke=[$,y,-I/(2*Math.PI)],Ie=gs(new Float64Array(16));return xh(Ie,Ie,ke),Gc(Ie,Ie,[ge,ge,ge]),np(Ie,Ie,Oe(-re)),yd(Ie,Ie,Oe(-ee)),Ie}function Fh($){return He(5,6,$)}function g_($,y){const I=Bd(y.lat,y.lng);return ge=(ee=ip([],function(tt){const ot=Bd(tt._center.lat,tt._center.lng);let mt=sp([],Lu(0,1,0),ot);const Tt=Qp([],-tt.angle,ot);mt=Zi(mt,mt,Tt),Qp(Tt,-tt._pitch,mt);const Ft=So([],ot);return Ga(Ft,Ft,tt.cameraToCenterDistance/tt.pixelsPerMeter*Ip),Zi(Ft,Ft,Tt),Kl([],ot,Ft)}($),I))[0],ke=ee[1],Ie=ee[2],$e=(re=I)[0],Le=re[1],Ve=re[2],Ze=(We=Math.sqrt(ge*ge+ke*ke+Ie*Ie)*Math.sqrt($e*$e+Le*Le+Ve*Ve))&&wa(ee,re)/We,Math.acos(Math.min(Math.max(Ze,-1),1));var ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze}const y_=Oe(85),Rg=Math.cos(y_),zg=Math.sin(y_);function v_($,y){const I=$.fovAboveCenter,ee=$.elevation?$.elevation.getMinElevationBelowMSL()*y:0,re=($._camera.position[2]*$.worldSize-ee)/Math.cos($._pitch),ge=Math.sin(I)*re/Math.sin(Math.max(Math.PI/2-$._pitch-I,.01)),ke=Math.sin($._pitch)*ge+re;return Math.min(1.01*ke,re*(1/$._horizonShift))}function Zc($,y){if(!y.isReprojectedInTileSpace)return{scale:1<<$.z,x:$.x,y:$.y,x2:$.x+1,y2:$.y+1,projection:y};const I=Math.pow(2,-$.z),ee=$.x*I,re=($.x+1)*I,ge=$.y*I,ke=($.y+1)*I,Ie=Ho(ee),$e=Ho(re),Le=Ji(ge),Ve=Ji(ke),We=y.project(Ie,Le),Ze=y.project($e,Le),tt=y.project($e,Ve),ot=y.project(Ie,Ve);let mt=Math.min(We.x,Ze.x,tt.x,ot.x),Tt=Math.min(We.y,Ze.y,tt.y,ot.y),Ft=Math.max(We.x,Ze.x,tt.x,ot.x),Ht=Math.max(We.y,Ze.y,tt.y,ot.y);const Nt=I/16;function qt(Zt,An,wn,On,Jn,Sn){const Bn=(wn+Jn)/2,Vn=(On+Sn)/2,Fn=y.project(Ho(Bn),Ji(Vn)),Xn=Math.max(0,mt-Fn.x,Tt-Fn.y,Fn.x-Ft,Fn.y-Ht);mt=Math.min(mt,Fn.x),Ft=Math.max(Ft,Fn.x),Tt=Math.min(Tt,Fn.y),Ht=Math.max(Ht,Fn.y),Xn>Nt&&(qt(Zt,Fn,wn,On,Bn,Vn),qt(Fn,An,Bn,Vn,Jn,Sn))}qt(We,Ze,ee,ge,re,ge),qt(Ze,tt,re,ge,re,ke),qt(tt,ot,re,ke,ee,ke),qt(ot,We,ee,ke,ee,ge),mt-=Nt,Tt-=Nt,Ft+=Nt,Ht+=Nt;const Qt=1/Math.max(Ft-mt,Ht-Tt);return{scale:Qt,x:mt*Qt,y:Tt*Qt,x2:Ft*Qt,y2:Ht*Qt,projection:y}}const $g=gs(new Float32Array(16));class Jl{constructor(y){this.spec=y,this.name=y.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(y,I){return{x:0,y:0,z:0}}unproject(y,I){return new ti(0,0)}projectTilePoint(y,I,ee){return{x:y,y:I,z:0}}locationPoint(y,I,ee=!0){return y._coordinatePoint(y.locationCoordinate(I),ee)}pixelsPerMeter(y,I){return Lo(1,y)*I}pixelSpaceConversion(y,I,ee){return 1}farthestPixelDistance(y){return v_(y,y.pixelsPerMeter)}pointCoordinate(y,I,ee,re){const ge=y.horizonLineFromTop(!1),ke=new xe(I,Math.max(ge,ee));return y.rayIntersectionCoordinate(y.pointRayIntersection(ke,re))}pointCoordinate3D(y,I,ee){const re=new xe(I,ee);if(y.elevation)return y.elevation.pointCoordinate(re);{const ge=this.pointCoordinate(y,re.x,re.y,0);return[ge.x,ge.y,ge.z]}}isPointAboveHorizon(y,I){if(y.elevation)return!this.pointCoordinate3D(y,I.x,I.y);const ee=y.horizonLineFromTop();return I.y<ee}createInversionMatrix(y,I){return $g}createTileMatrix(y,I,ee){let re,ge,ke;const Ie=ee.canonical,$e=gs(new Float64Array(16));if(this.isReprojectedInTileSpace){const Le=Zc(Ie,this);re=1,ge=Le.x+ee.wrap*Le.scale,ke=Le.y,Gc($e,$e,[re/Le.scale,re/Le.scale,y.pixelsPerMeter/I])}else re=I/y.zoomScale(Ie.z),ge=(Ie.x+Math.pow(2,Ie.z)*ee.wrap)*re,ke=Ie.y*re;return xh($e,$e,[ge,ke,0]),Gc($e,$e,[re/kr,re/kr,1]),$e}upVector(y,I,ee){return[0,0,1]}upVectorScale(y,I,ee){return{metersToTile:1}}}class Dg extends Jl{constructor(y){super(y),this.range=[4,7],this.center=y.center||[-96,37.5];const[I,ee]=this.parallels=y.parallels||[29.5,45.5],re=Math.sin(Oe(I));this.n=(re+Math.sin(Oe(ee)))/2,this.c=1+re*(2*this.n-re),this.r0=Math.sqrt(this.c)/this.n}project(y,I){const{n:ee,c:re,r0:ge}=this,ke=Oe(y-this.center[0]),Ie=Oe(I),$e=Math.sqrt(re-2*ee*Math.sin(Ie))/ee;return{x:$e*Math.sin(ke*ee),y:$e*Math.cos(ke*ee)-ge,z:0}}unproject(y,I){const{n:ee,c:re,r0:ge}=this,ke=ge+I;let Ie=Math.atan2(y,Math.abs(ke))*Math.sign(ke);ke*ee<0&&(Ie-=Math.PI*Math.sign(y)*Math.sign(ke));const $e=Oe(this.center[0])*ee;Ie=Qe(Ie,-Math.PI-$e,Math.PI-$e);const Le=ze(Ie/ee)+this.center[0],Ve=Math.asin(Ke((re-(y*y+ke*ke)*ee*ee)/(2*ee),-1,1)),We=Ke(ze(Ve),-85.051129,ba);return new ti(Le,We)}}const Nh=1.340264,jh=-.081106,Uh=893e-6,Vh=.003796,Nd=Math.sqrt(3)/2;class Lg extends Jl{project(y,I){I=I/180*Math.PI,y=y/180*Math.PI;const ee=Math.asin(Nd*Math.sin(I)),re=ee*ee,ge=re*re*re;return{x:.5*(y*Math.cos(ee)/(Nd*(Nh+3*jh*re+ge*(7*Uh+9*Vh*re)))/Math.PI+.5),y:1-.5*(ee*(Nh+jh*re+ge*(Uh+Vh*re))/Math.PI+1),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI;let ee=I=(2*(1-I)-1)*Math.PI,re=ee*ee,ge=re*re*re;for(let Ve,We,Ze,tt=0;tt<12&&(We=ee*(Nh+jh*re+ge*(Uh+Vh*re))-I,Ze=Nh+3*jh*re+ge*(7*Uh+9*Vh*re),Ve=We/Ze,ee=Ke(ee-Ve,-Math.PI/3,Math.PI/3),re=ee*ee,ge=re*re*re,!(Math.abs(Ve)<1e-12));++tt);const ke=Nd*y*(Nh+3*jh*re+ge*(7*Uh+9*Vh*re))/Math.cos(ee),Ie=Math.asin(Math.sin(ee)/Nd),$e=Ke(180*ke/Math.PI,-180,180),Le=Ke(180*Ie/Math.PI,-85.051129,ba);return new ti($e,Le)}}class Bg extends Jl{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0}project(y,I){return{x:.5+y/360,y:.5-I/360,z:0}}unproject(y,I){const ee=360*(y-.5),re=Ke(360*(.5-I),-85.051129,ba);return new ti(ee,re)}}const Zu=Math.PI/2;function jd($){return Math.tan((Zu+$)/2)}class Fg extends Jl{constructor(y){super(y),this.center=y.center||[0,30];const[I,ee]=this.parallels=y.parallels||[30,30],re=Oe(I),ge=Oe(ee),ke=Math.cos(re);this.n=re===ge?Math.sin(re):Math.log(ke/Math.cos(ge))/Math.log(jd(ge)/jd(re)),this.f=ke*Math.pow(jd(re),this.n)/this.n}project(y,I){I=Oe(I),y=Oe(y-this.center[0]);const ee=1e-6,{n:re,f:ge}=this;ge>0?I<-Zu+ee&&(I=-Zu+ee):I>Zu-ee&&(I=Zu-ee);const ke=ge/Math.pow(jd(I),re),Ie=ke*Math.sin(re*y),$e=ge-ke*Math.cos(re*y);return{x:.5*(Ie/Math.PI+.5),y:1-.5*($e/Math.PI+.5),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI,I=(2*(1-I)-.5)*Math.PI;const{n:ee,f:re}=this,ge=re-I,ke=Math.sign(ge),Ie=Math.sign(ee)*Math.sqrt(y*y+ge*ge);let $e=Math.atan2(y,Math.abs(ge))*ke;ge*ee<0&&($e-=Math.PI*Math.sign(y)*ke);const Le=Ke(ze($e/ee)+this.center[0],-180,180),Ve=Ke(ze(2*Math.atan(Math.pow(re/Ie,1/ee))-Zu),-85.051129,ba);return new ti(Le,Ve)}}class x_ extends Jl{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(y,I){return{x:xa(y),y:Va(I),z:0}}unproject(y,I){const ee=Ho(y),re=Ji(I);return new ti(ee,re)}}const b_=Oe(ba);class Ng extends Jl{project(y,I){const ee=(I=Oe(I))*I,re=ee*ee;return{x:.5*((y=Oe(y))*(.8707-.131979*ee+re*(re*(.003971*ee-.001529*re)-.013791))/Math.PI+.5),y:1-.5*(I*(1.007226+ee*(.015085+re*(.028874*ee-.044475-.005916*re)))/Math.PI+1),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI;let ee=I=(2*(1-I)-1)*Math.PI,re=25,ge=0,ke=ee*ee;do{ke=ee*ee;const Le=ke*ke;ge=(ee*(1.007226+ke*(.015085+Le*(.028874*ke-.044475-.005916*Le)))-I)/(1.007226+ke*(.045255+Le*(.259866*ke-.311325-.005916*11*Le))),ee=Ke(ee-ge,-b_,b_)}while(Math.abs(ge)>1e-6&&--re>0);ke=ee*ee;const Ie=Ke(ze(y/(.8707+ke*(ke*(ke*ke*ke*(.003971-.001529*ke)-.013791)-.131979))),-180,180),$e=ze(ee);return new ti(Ie,$e)}}const w_=Oe(ba);class jg extends Jl{project(y,I){I=Oe(I),y=Oe(y);const ee=Math.cos(I),re=2/Math.PI,ge=Math.acos(ee*Math.cos(y/2)),ke=Math.sin(ge)/ge,Ie=.5*(y*re+2*ee*Math.sin(y/2)/ke)||0,$e=.5*(I+Math.sin(I)/ke)||0;return{x:.5*(Ie/Math.PI+.5),y:1-.5*($e/Math.PI+1),z:0}}unproject(y,I){let ee=y=(2*y-.5)*Math.PI,re=I=(2*(1-I)-1)*Math.PI,ge=25;const ke=1e-6;let Ie=0,$e=0;do{const Le=Math.cos(re),Ve=Math.sin(re),We=2*Ve*Le,Ze=Ve*Ve,tt=Le*Le,ot=Math.cos(ee/2),mt=Math.sin(ee/2),Tt=2*ot*mt,Ft=mt*mt,Ht=1-tt*ot*ot,Nt=Ht?1/Ht:0,qt=Ht?Math.acos(Le*ot)*Math.sqrt(1/Ht):0,Qt=.5*(2*qt*Le*mt+2*ee/Math.PI)-y,Zt=.5*(qt*Ve+re)-I,An=.5*Nt*(tt*Ft+qt*Le*ot*Ze)+1/Math.PI,wn=Nt*(Tt*We/4-qt*Ve*mt),On=.125*Nt*(We*mt-qt*Ve*tt*Tt),Jn=.5*Nt*(Ze*ot+qt*Ft*Le)+.5,Sn=wn*On-Jn*An;Ie=(Zt*wn-Qt*Jn)/Sn,$e=(Qt*On-Zt*An)/Sn,ee=Ke(ee-Ie,-Math.PI,Math.PI),re=Ke(re-$e,-w_,w_)}while((Math.abs(Ie)>ke||Math.abs($e)>ke)&&--ge>0);return new ti(ze(ee),ze(re))}}class E_ extends Jl{constructor(y){super(y),this.center=y.center||[0,0],this.parallels=y.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Oe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(y,I){const{scale:ee,cosPhi:re}=this;return{x:Oe(y)*re*ee+.5,y:-Math.sin(Oe(I))/re*ee+.5,z:0}}unproject(y,I){const{scale:ee,cosPhi:re}=this,ge=-(I-.5)/ee,ke=Ke(ze((y-.5)/ee)/re,-180,180),Ie=Math.asin(Ke(ge*re,-1,1)),$e=Ke(ze(Ie),-85.051129,ba);return new ti(ke,$e)}}class Ug extends x_{constructor(y){super(y),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(y,I,ee){const re=Lh(y,I,ee);return Zi(re,re,Bh(vs(ee))),{x:re[0],y:re[1],z:re[2]}}locationPoint(y,I){const ee=Bd(I.lat,I.lng),re=So([],ee),ge=y.elevation?y.elevation.getAtPointOrZero(y.locationCoordinate(I),y._centerAltitude):y._centerAltitude;vd(ee,ee,re,Lo(1,0)*kr*ge);const ke=gs(new Float64Array(16));return Du(ke,y.pixelMatrix,y.globeMatrix),Zi(ee,ee,ke),new xe(ee[0],ee[1])}pixelsPerMeter(y,I){return Lo(1,0)*I}pixelSpaceConversion(y,I,ee){const re=Wr(Lo(1,45)*I,Lo(1,y)*I,ee);return this.pixelsPerMeter(y,I)/re}createTileMatrix(y,I,ee){const re=Rp(vs(ee.canonical));return Du(new Float64Array(16),y.globeMatrix,re)}createInversionMatrix(y,I){const{center:ee}=y,re=Bh(vs(I));return yd(re,re,Oe(ee.lng)),np(re,re,Oe(ee.lat)),Gc(re,re,[y._pixelsPerMercatorPixel,y._pixelsPerMercatorPixel,1]),Float32Array.from(re)}pointCoordinate(y,I,ee,re){return d_(y,I,ee,!0)||new Xl(0,0)}pointCoordinate3D(y,I,ee){const re=this.pointCoordinate(y,I,ee,0);return[re.x,re.y,re.z]}isPointAboveHorizon(y,I){return!d_(y,I.x,I.y,!1)}farthestPixelDistance(y){const I=function(re,ge){const ke=re.cameraToCenterDistance,Ie=re._centerAltitude*ge,$e=re._camera,Le=re._camera.forward(),Ve=Kl([],Ga([],Le,-ke),[0,0,Ie]),We=re.worldSize/(2*Math.PI),Ze=[0,0,-We],tt=re.width/re.height,ot=Math.tan(re.fovAboveCenter),mt=Ga([],$e.up(),ot),Tt=Ga([],$e.right(),ot*tt),Ft=So([],Kl([],Kl([],Le,mt),Tt)),Ht=[];let Nt;if(new lp(Ve,Ft).closestPointOnSphere(Ze,We,Ht)){const qt=Kl([],Ht,Ze),Qt=qa([],qt,Ve);Nt=Math.cos(re.fovAboveCenter)*bh(Qt)}else{const qt=qa([],Ve,Ze),Qt=qa([],Ze,Ve);So(Qt,Qt);const Zt=bh(qt)-We;Nt=Math.sqrt(Zt*(Zt+2*We));const An=Math.acos(Nt/(We+Zt))-Math.acos(wa(Le,Qt));Nt*=Math.cos(An)}return 1.01*Nt}(y,this.pixelsPerMeter(y.center.lat,y.worldSize)),ee=Fh(y.zoom);if(ee>0){const re=v_(y,Lo(1,y.center.lat)*y.worldSize),ge=y.worldSize/(2*Math.PI),ke=Math.max(y.width,y.height)/y.worldSize*Math.PI;return Wr(I,re+ge*(1-Math.cos(ke)),Math.pow(ee,10))}return I}upVector(y,I,ee){return Lh(I,ee,y,1)}upVectorScale(y){return{metersToTile:Ip*Fd(vs(y))}}}function T_($){const y=$.parallels,I=!!y&&Math.abs(y[0]+y[1])<.01;switch($.name){case"mercator":return new x_($);case"equirectangular":return new Bg($);case"naturalEarth":return new Ng($);case"equalEarth":return new Lg($);case"winkelTripel":return new jg($);case"albers":return I?new E_($):new Dg($);case"lambertConformalConic":return I?new E_($):new Fg($);case"globe":return new Ug($)}throw new Error(`Invalid projection name: ${$.name}`)}const Vg=Wc.VectorTileFeature.types,Gg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ud($,y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze){const tt=Ie?Math.min(Yl,Math.round(Ie[0])):0,ot=Ie?Math.min(Yl,Math.round(Ie[1])):0;$.emplaceBack(y,I,Math.round(32*ee),Math.round(32*re),ge,ke,(tt<<1)+($e?1:0),ot,16*Le,16*Ve,256*We,256*Ze)}function Vd($,y,I,ee,re,ge,ke){$.emplaceBack(y,I,ee,re,ge,ke)}function Gd($,y,I,ee,re){$.emplaceBack(y,I,ee,re),$.emplaceBack(y,I,ee,re),$.emplaceBack(y,I,ee,re),$.emplaceBack(y,I,ee,re)}function qg($){for(const y of $.sections)if(te(y.text))return!0;return!1}class zp{constructor(y){this.layoutVertexArray=new ci,this.indexArray=new zr,this.programConfigurations=y,this.segments=new Bi,this.dynamicLayoutVertexArray=new Vr,this.opacityVertexArray=new oi,this.placedSymbolArray=new Xh,this.globeExtVertexArray=new wi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(y,I,ee,re){this.isEmpty()||(ee&&(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Wm.members),this.indexBuffer=y.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=y.createVertexBuffer(this.dynamicLayoutVertexArray,Xm.members,!0),this.opacityVertexBuffer=y.createVertexBuffer(this.opacityVertexArray,Gg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,Zm.members,!0)),this.opacityVertexBuffer.itemSize=1),(ee||re)&&this.programConfigurations.upload(y))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}ur(zp,"SymbolBuffers");class $p{constructor(y,I,ee){this.layoutVertexArray=new y,this.layoutAttributes=I,this.indexArray=new ee,this.segments=new Bi,this.collisionVertexArray=new _i,this.collisionVertexArrayExt=new vi}upload(y){this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=y.createVertexBuffer(this.collisionVertexArray,Km.members,!0),this.collisionVertexBufferExt=y.createVertexBuffer(this.collisionVertexArrayExt,Ym.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ur($p,"CollisionBuffers");class Ql{constructor(y){this.collisionBoxArray=y.collisionBoxArray,this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(ke=>ke.id),this.index=y.index,this.pixelRatio=y.pixelRatio,this.sourceLayerIndex=y.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gs([]),this.placementViewportMatrix=gs([]);const I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vp(this.zoom,I["text-size"]),this.iconSizeData=vp(this.zoom,I["icon-size"]);const ee=this.layers[0].layout,re=ee.get("symbol-sort-key"),ge=ee.get("symbol-z-order");this.canOverlap=ee.get("text-allow-overlap")||ee.get("icon-allow-overlap")||ee.get("text-ignore-placement")||ee.get("icon-ignore-placement"),this.sortFeaturesByKey=ge!=="viewport-y"&&re.constantOr(1)!==void 0,this.sortFeaturesByY=(ge==="viewport-y"||ge==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=ee.get("text-writing-mode").map(ke=>sa[ke]),this.stateDependentLayerIds=this.layers.filter(ke=>ke.isStateDependent()).map(ke=>ke.id),this.sourceID=y.sourceID,this.projection=y.projection}createArrays(){this.text=new zp(new al(this.layers,this.zoom,y=>/^text/.test(y))),this.icon=new zp(new al(this.layers,this.zoom,y=>/^icon/.test(y))),this.glyphOffsetArray=new ph,this.lineVertexArray=new Jh,this.symbolInstances=new Yh}calculateGlyphDependencies(y,I,ee,re,ge){for(let ke=0;ke<y.length;ke++)if(I[y.charCodeAt(ke)]=!0,re&&ge){const Ie=Oh[y.charAt(ke)];Ie&&(I[Ie.charCodeAt(0)]=!0)}}populate(y,I,ee,re){const ge=this.layers[0],ke=ge.layout,Ie=this.projection.name==="globe",$e=ke.get("text-font"),Le=ke.get("text-field"),Ve=ke.get("icon-image"),We=(Le.value.kind!=="constant"||Le.value.value instanceof ao&&!Le.value.value.isEmpty()||Le.value.value.toString().length>0)&&($e.value.kind!=="constant"||$e.value.value.length>0),Ze=Ve.value.kind!=="constant"||!!Ve.value.value||Object.keys(Ve.parameters).length>0,tt=ke.get("symbol-sort-key");if(this.features=[],!We&&!Ze)return;const ot=I.iconDependencies,mt=I.glyphDependencies,Tt=I.availableImages,Ft=new At(this.zoom);for(const{feature:Ht,id:Nt,index:qt,sourceLayerIndex:Qt}of y){const Zt=ge._featureFilter.needGeometry,An=Ge(Ht,Zt);if(!ge._featureFilter.filter(Ft,An,ee))continue;if(Zt||(An.geometry=vt(Ht,ee,re)),Ie&&Ht.type!==1&&ee.z<=5){const Sn=An.geometry,Bn=.98078528056;for(let Vn=0;Vn<Sn.length;Vn++)Sn[Vn]=fd(Sn[Vn],Fn=>Fn,(Fn,Xn)=>wa(Lh(Fn.x,Fn.y,ee,1),Lh(Xn.x,Xn.y,ee,1))<Bn)}let wn,On;if(We){const Sn=ge.getValueAndResolveTokens("text-field",An,ee,Tt),Bn=ao.factory(Sn);qg(Bn)&&(this.hasRTLText=!0),(!this.hasRTLText||gt()==="unavailable"||this.hasRTLText&&kt.isParsed())&&(wn=eg(Bn,ge,An))}if(Ze){const Sn=ge.getValueAndResolveTokens("icon-image",An,ee,Tt);On=Sn instanceof so?Sn:so.fromString(Sn)}if(!wn&&!On)continue;const Jn=this.sortFeaturesByKey?tt.evaluate(An,{},ee):void 0;if(this.features.push({id:Nt,text:wn,icon:On,index:qt,sourceLayerIndex:Qt,geometry:An.geometry,properties:Ht.properties,type:Vg[Ht.type],sortKey:Jn}),On&&(ot[On.name]=!0),wn){const Sn=$e.evaluate(An,{},ee).join(","),Bn=ke.get("text-rotation-alignment")==="map"&&ke.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(sa.vertical)>=0;for(const Vn of wn.sections)if(Vn.image)ot[Vn.image.name]=!0;else{const Fn=rl(wn.toString()),Xn=Vn.fontStack||Sn,Gn=mt[Xn]=mt[Xn]||{};this.calculateGlyphDependencies(Vn.text,Gn,Bn,this.allowVerticalPlacement,Fn)}}}ke.get("symbol-placement")==="line"&&(this.features=function(Ht){const Nt={},qt={},Qt=[];let Zt=0;function An(Sn){Qt.push(Ht[Sn]),Zt++}function wn(Sn,Bn,Vn){const Fn=qt[Sn];return delete qt[Sn],qt[Bn]=Fn,Qt[Fn].geometry[0].pop(),Qt[Fn].geometry[0]=Qt[Fn].geometry[0].concat(Vn[0]),Fn}function On(Sn,Bn,Vn){const Fn=Nt[Bn];return delete Nt[Bn],Nt[Sn]=Fn,Qt[Fn].geometry[0].shift(),Qt[Fn].geometry[0]=Vn[0].concat(Qt[Fn].geometry[0]),Fn}function Jn(Sn,Bn,Vn){const Fn=Vn?Bn[0][Bn[0].length-1]:Bn[0][0];return`${Sn}:${Fn.x}:${Fn.y}`}for(let Sn=0;Sn<Ht.length;Sn++){const Bn=Ht[Sn],Vn=Bn.geometry,Fn=Bn.text?Bn.text.toString():null;if(!Fn){An(Sn);continue}const Xn=Jn(Fn,Vn),Gn=Jn(Fn,Vn,!0);if(Xn in qt&&Gn in Nt&&qt[Xn]!==Nt[Gn]){const ar=On(Xn,Gn,Vn),Rr=wn(Xn,Gn,Qt[ar].geometry);delete Nt[Xn],delete qt[Gn],qt[Jn(Fn,Qt[Rr].geometry,!0)]=Rr,Qt[ar].geometry=null}else Xn in qt?wn(Xn,Gn,Vn):Gn in Nt?On(Xn,Gn,Vn):(An(Sn),Nt[Xn]=Zt-1,qt[Gn]=Zt-1)}return Qt.filter(Sn=>Sn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ht,Nt)=>Ht.sortKey-Nt.sortKey)}update(y,I,ee,re){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(y,I,this.layers,ee,re),this.icon.programConfigurations.updatePaintArrays(y,I,this.layers,ee,re))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(y){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(y),this.iconCollisionBox.upload(y)),this.text.upload(y,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(y,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=T_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(y,I){const ee=this.lineVertexArray.length,re=y.segment;if(re!==void 0){let ge=y.dist(I[re+1]),ke=y.dist(I[re]);const Ie={};for(let $e=re+1;$e<I.length;$e++)Ie[$e]={x:I[$e].x,y:I[$e].y,tileUnitDistanceFromAnchor:ge},$e<I.length-1&&(ge+=I[$e+1].dist(I[$e]));for(let $e=re||0;$e>=0;$e--)Ie[$e]={x:I[$e].x,y:I[$e].y,tileUnitDistanceFromAnchor:ke},$e>0&&(ke+=I[$e-1].dist(I[$e]));for(let $e=0;$e<I.length;$e++){const Le=Ie[$e];this.lineVertexArray.emplaceBack(Le.x,Le.y,Le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ee,lineLength:this.lineVertexArray.length-ee}}addSymbols(y,I,ee,re,ge,ke,Ie,$e,Le,Ve,We,Ze,tt,ot){const mt=y.indexArray,Tt=y.layoutVertexArray,Ft=y.globeExtVertexArray,Ht=y.segments.prepareSegment(4*I.length,Tt,mt,this.canOverlap?ke.sortKey:void 0),Nt=this.glyphOffsetArray.length,qt=Ht.vertexLength,Qt=this.allowVerticalPlacement&&Ie===sa.vertical?Math.PI/2:0,Zt=ke.text&&ke.text.sections;for(let wn=0;wn<I.length;wn++){const{tl:On,tr:Jn,bl:Sn,br:Bn,tex:Vn,pixelOffsetTL:Fn,pixelOffsetBR:Xn,minFontScaleX:Gn,minFontScaleY:ar,glyphOffset:Rr,isSDF:$r,sectionIndex:vr}=I[wn],rr=Ht.vertexLength,qr=Rr[1];if(Ud(Tt,Le.x,Le.y,On.x,qr+On.y,Vn.x,Vn.y,ee,$r,Fn.x,Fn.y,Gn,ar),Ud(Tt,Le.x,Le.y,Jn.x,qr+Jn.y,Vn.x+Vn.w,Vn.y,ee,$r,Xn.x,Fn.y,Gn,ar),Ud(Tt,Le.x,Le.y,Sn.x,qr+Sn.y,Vn.x,Vn.y+Vn.h,ee,$r,Fn.x,Xn.y,Gn,ar),Ud(Tt,Le.x,Le.y,Bn.x,qr+Bn.y,Vn.x+Vn.w,Vn.y+Vn.h,ee,$r,Xn.x,Xn.y,Gn,ar),$e){const Ir=$e.anchor,dr=$e.up;Vd(Ft,Ir.x,Ir.y,Ir.z,dr[0],dr[1],dr[2]),Vd(Ft,Ir.x,Ir.y,Ir.z,dr[0],dr[1],dr[2]),Vd(Ft,Ir.x,Ir.y,Ir.z,dr[0],dr[1],dr[2]),Vd(Ft,Ir.x,Ir.y,Ir.z,dr[0],dr[1],dr[2]),Gd(y.dynamicLayoutVertexArray,Ir.x,Ir.y,Ir.z,Qt)}else Gd(y.dynamicLayoutVertexArray,Le.x,Le.y,Le.z,Qt);mt.emplaceBack(rr,rr+1,rr+2),mt.emplaceBack(rr+1,rr+2,rr+3),Ht.vertexLength+=4,Ht.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Rr[0]),wn!==I.length-1&&vr===I[wn+1].sectionIndex||y.programConfigurations.populatePaintArrays(Tt.length,ke,ke.index,{},tt,ot,Zt&&Zt[vr])}const An=$e?$e.anchor:Le;y.placedSymbolArray.emplaceBack(An.x,An.y,An.z,Le.x,Le.y,Nt,this.glyphOffsetArray.length-Nt,qt,Ve,We,Le.segment,ee?ee[0]:0,ee?ee[1]:0,re[0],re[1],Ie,0,!1,0,Ze,0)}_commitLayoutVertex(y,I,ee,re,ge,ke,Ie){y.emplaceBack(I,ee,re,ge,ke,Math.round(Ie.x),Math.round(Ie.y))}_addCollisionDebugVertices(y,I,ee,re,ge,ke,Ie){const $e=ee.segments.prepareSegment(4,ee.layoutVertexArray,ee.indexArray),Le=$e.vertexLength,Ve=Ie.tileAnchorX,We=Ie.tileAnchorY;for(let tt=0;tt<4;tt++)ee.collisionVertexArray.emplaceBack(0,0,0,0);ee.collisionVertexArrayExt.emplaceBack(I,-y.padding,-y.padding),ee.collisionVertexArrayExt.emplaceBack(I,y.padding,-y.padding),ee.collisionVertexArrayExt.emplaceBack(I,y.padding,y.padding),ee.collisionVertexArrayExt.emplaceBack(I,-y.padding,y.padding),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x1,y.y1)),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x2,y.y1)),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x2,y.y2)),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x1,y.y2)),$e.vertexLength+=4;const Ze=ee.indexArray;Ze.emplaceBack(Le,Le+1),Ze.emplaceBack(Le+1,Le+2),Ze.emplaceBack(Le+2,Le+3),Ze.emplaceBack(Le+3,Le),$e.primitiveLength+=4}_addTextDebugCollisionBoxes(y,I,ee,re,ge,ke){for(let Ie=re;Ie<ge;Ie++){const $e=ee.get(Ie),Le=this.getSymbolInstanceTextSize(y,ke,I,Ie);this._addCollisionDebugVertices($e,Le,this.textCollisionBox,$e.projectedAnchorX,$e.projectedAnchorY,$e.projectedAnchorZ,ke)}}_addIconDebugCollisionBoxes(y,I,ee,re,ge,ke){for(let Ie=re;Ie<ge;Ie++){const $e=ee.get(Ie),Le=this.getSymbolInstanceIconSize(y,I,Ie);this._addCollisionDebugVertices($e,Le,this.iconCollisionBox,$e.projectedAnchorX,$e.projectedAnchorY,$e.projectedAnchorZ,ke)}}generateCollisionDebugBuffers(y,I){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $p(To,Lf.members,to),this.iconCollisionBox=new $p(To,Lf.members,to);const ee=Nu(this.iconSizeData,y),re=Nu(this.textSizeData,y);for(let ge=0;ge<this.symbolInstances.length;ge++){const ke=this.symbolInstances.get(ge);this._addTextDebugCollisionBoxes(re,y,I,ke.textBoxStartIndex,ke.textBoxEndIndex,ke),this._addTextDebugCollisionBoxes(re,y,I,ke.verticalTextBoxStartIndex,ke.verticalTextBoxEndIndex,ke),this._addIconDebugCollisionBoxes(ee,y,I,ke.iconBoxStartIndex,ke.iconBoxEndIndex,ke),this._addIconDebugCollisionBoxes(ee,y,I,ke.verticalIconBoxStartIndex,ke.verticalIconBoxEndIndex,ke)}}getSymbolInstanceTextSize(y,I,ee,re){const ge=this.text.placedSymbolArray.get(I.rightJustifiedTextSymbolIndex>=0?I.rightJustifiedTextSymbolIndex:I.centerJustifiedTextSymbolIndex>=0?I.centerJustifiedTextSymbolIndex:I.leftJustifiedTextSymbolIndex>=0?I.leftJustifiedTextSymbolIndex:I.verticalPlacedTextSymbolIndex>=0?I.verticalPlacedTextSymbolIndex:re),ke=Id(this.textSizeData,y,ge)/ho;return this.tilePixelRatio*ke}getSymbolInstanceIconSize(y,I,ee){const re=this.icon.placedSymbolArray.get(ee),ge=Id(this.iconSizeData,y,re);return this.tilePixelRatio*ge}_commitDebugCollisionVertexUpdate(y,I,ee){y.emplaceBack(I,-ee,-ee),y.emplaceBack(I,ee,-ee),y.emplaceBack(I,ee,ee),y.emplaceBack(I,-ee,ee)}_updateTextDebugCollisionBoxes(y,I,ee,re,ge,ke){for(let Ie=re;Ie<ge;Ie++){const $e=ee.get(Ie),Le=this.getSymbolInstanceTextSize(y,ke,I,Ie);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,Le,$e.padding)}}_updateIconDebugCollisionBoxes(y,I,ee,re,ge){for(let ke=re;ke<ge;ke++){const Ie=ee.get(ke),$e=this.getSymbolInstanceIconSize(y,I,ke);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,$e,Ie.padding)}}updateCollisionDebugBuffers(y,I){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const ee=Nu(this.iconSizeData,y),re=Nu(this.textSizeData,y);for(let ge=0;ge<this.symbolInstances.length;ge++){const ke=this.symbolInstances.get(ge);this._updateTextDebugCollisionBoxes(re,y,I,ke.textBoxStartIndex,ke.textBoxEndIndex,ke),this._updateTextDebugCollisionBoxes(re,y,I,ke.verticalTextBoxStartIndex,ke.verticalTextBoxEndIndex,ke),this._updateIconDebugCollisionBoxes(ee,y,I,ke.iconBoxStartIndex,ke.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(ee,y,I,ke.verticalIconBoxStartIndex,ke.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(y,I,ee,re,ge,ke,Ie,$e,Le){const Ve={};for(let We=I;We<ee;We++){const Ze=y.get(We);Ve.textBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.textFeatureIndex=Ze.featureIndex;break}for(let We=re;We<ge;We++){const Ze=y.get(We);Ve.verticalTextBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.verticalTextFeatureIndex=Ze.featureIndex;break}for(let We=ke;We<Ie;We++){const Ze=y.get(We);Ve.iconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.iconFeatureIndex=Ze.featureIndex;break}for(let We=$e;We<Le;We++){const Ze=y.get(We);Ve.verticalIconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.verticalIconFeatureIndex=Ze.featureIndex;break}return Ve}deserializeCollisionBoxes(y){this.collisionArrays=[];for(let I=0;I<this.symbolInstances.length;I++){const ee=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(y,ee.textBoxStartIndex,ee.textBoxEndIndex,ee.verticalTextBoxStartIndex,ee.verticalTextBoxEndIndex,ee.iconBoxStartIndex,ee.iconBoxEndIndex,ee.verticalIconBoxStartIndex,ee.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(y,I){const ee=y.placedSymbolArray.get(I),re=ee.vertexStartIndex+4*ee.numGlyphs;for(let ge=ee.vertexStartIndex;ge<re;ge+=4)y.indexArray.emplaceBack(ge,ge+1,ge+2),y.indexArray.emplaceBack(ge+1,ge+2,ge+3)}getSortedSymbolIndexes(y){if(this.sortedAngle===y&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const I=Math.sin(y),ee=Math.cos(y),re=[],ge=[],ke=[];for(let Ie=0;Ie<this.symbolInstances.length;++Ie){ke.push(Ie);const $e=this.symbolInstances.get(Ie);re.push(0|Math.round(I*$e.tileAnchorX+ee*$e.tileAnchorY)),ge.push($e.featureIndex)}return ke.sort((Ie,$e)=>re[Ie]-re[$e]||ge[$e]-ge[Ie]),ke}addToSortKeyRanges(y,I){const ee=this.sortKeyRanges[this.sortKeyRanges.length-1];ee&&ee.sortKey===I?ee.symbolInstanceEnd=y+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:y,symbolInstanceEnd:y+1})}sortFeatures(y){if(this.sortFeaturesByY&&this.sortedAngle!==y&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(y),this.sortedAngle=y,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const I of this.symbolInstanceIndexes){const ee=this.symbolInstances.get(I);this.featureSortOrder.push(ee.featureIndex),[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach((re,ge,ke)=>{re>=0&&ke.indexOf(re)===ge&&this.addIndicesForPlacedSymbol(this.text,re)}),ee.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ee.verticalPlacedTextSymbolIndex),ee.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ee.placedIconSymbolIndex),ee.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ee.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ur(Ql,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Ql.MAX_GLYPHS=65535,Ql.addDynamicAttributes=Gd;const Hg=new zn({"symbol-placement":new Wt(gn.layout_symbol["symbol-placement"]),"symbol-spacing":new Wt(gn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wt(gn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(gn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wt(gn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wt(gn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wt(gn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wt(gn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wt(gn.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(gn.layout_symbol["icon-size"]),"icon-text-fit":new Wt(gn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wt(gn.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(gn.layout_symbol["icon-image"]),"icon-rotate":new sn(gn.layout_symbol["icon-rotate"]),"icon-padding":new Wt(gn.layout_symbol["icon-padding"]),"icon-keep-upright":new Wt(gn.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(gn.layout_symbol["icon-offset"]),"icon-anchor":new sn(gn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wt(gn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wt(gn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wt(gn.layout_symbol["text-rotation-alignment"]),"text-field":new sn(gn.layout_symbol["text-field"]),"text-font":new sn(gn.layout_symbol["text-font"]),"text-size":new sn(gn.layout_symbol["text-size"]),"text-max-width":new sn(gn.layout_symbol["text-max-width"]),"text-line-height":new sn(gn.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(gn.layout_symbol["text-letter-spacing"]),"text-justify":new sn(gn.layout_symbol["text-justify"]),"text-radial-offset":new sn(gn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wt(gn.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(gn.layout_symbol["text-anchor"]),"text-max-angle":new Wt(gn.layout_symbol["text-max-angle"]),"text-writing-mode":new Wt(gn.layout_symbol["text-writing-mode"]),"text-rotate":new sn(gn.layout_symbol["text-rotate"]),"text-padding":new Wt(gn.layout_symbol["text-padding"]),"text-keep-upright":new Wt(gn.layout_symbol["text-keep-upright"]),"text-transform":new sn(gn.layout_symbol["text-transform"]),"text-offset":new sn(gn.layout_symbol["text-offset"]),"text-allow-overlap":new Wt(gn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wt(gn.layout_symbol["text-ignore-placement"]),"text-optional":new Wt(gn.layout_symbol["text-optional"])});var Dp={paint:new zn({"icon-opacity":new sn(gn.paint_symbol["icon-opacity"]),"icon-color":new sn(gn.paint_symbol["icon-color"]),"icon-halo-color":new sn(gn.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(gn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(gn.paint_symbol["icon-halo-blur"]),"icon-translate":new Wt(gn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wt(gn.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(gn.paint_symbol["text-opacity"]),"text-color":new sn(gn.paint_symbol["text-color"],{runtimeType:Oo,getOverride:$=>$.textColor,hasOverride:$=>!!$.textColor}),"text-halo-color":new sn(gn.paint_symbol["text-halo-color"]),"text-halo-width":new sn(gn.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(gn.paint_symbol["text-halo-blur"]),"text-translate":new Wt(gn.paint_symbol["text-translate"]),"text-translate-anchor":new Wt(gn.paint_symbol["text-translate-anchor"])}),layout:Hg};class A_{constructor(y){this.type=y.property.overrides?y.property.overrides.runtimeType:ua,this.defaultValue=y}evaluate(y){if(y.formattedSection){const I=this.defaultValue.property.overrides;if(I&&I.hasOverride(y.formattedSection))return I.getOverride(y.formattedSection)}return y.feature&&y.featureState?this.defaultValue.evaluate(y.feature,y.featureState):this.defaultValue.property.specification.default}eachChild(y){this.defaultValue.isConstant()||y(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ur(A_,"FormatSectionOverride",{omit:["defaultValue"]});class qd extends Vi{constructor(y){super(y,Dp)}recalculate(y,I){super.recalculate(y,I),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const ee=this.layout.get("text-writing-mode");if(ee){const re=[];for(const ge of ee)re.indexOf(ge)<0&&re.push(ge);this.layout._values["text-writing-mode"]=re}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(y,I,ee,re){const ge=this.layout.get(y).evaluate(I,{},ee,re),ke=this._unevaluatedLayout._values[y];return ke.isDataDriven()||Rl(ke.value)||!ge?ge:function(Ie,$e){return $e.replace(/{([^{}]+)}/g,(Le,Ve)=>Ve in Ie?String(Ie[Ve]):"")}(I.properties,ge)}createBucket(y){return new Ql(y)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const y of Dp.paint.overridableProperties){if(!qd.hasPaintOverride(this.layout,y))continue;const I=this.paint.get(y),ee=new A_(I),re=new Tc(ee,I.property.specification);let ge=null;ge=I.value.kind==="constant"||I.value.kind==="source"?new Ac("source",re):new Hs("composite",re,I.value.zoomStops,I.value._interpolationType),this.paint._values[y]=new Gt(I.property,ge,I.parameters)}}_handleOverridablePaintPropertyUpdate(y,I,ee){return!(!this.layout||I.isDataDriven()||ee.isDataDriven())&&qd.hasPaintOverride(this.layout,y)}static hasPaintOverride(y,I){const ee=y.get("text-field"),re=Dp.paint.properties[I];let ge=!1;const ke=Ie=>{for(const $e of Ie)if(re.overrides&&re.overrides.hasOverride($e))return void(ge=!0)};if(ee.value.kind==="constant"&&ee.value.value instanceof ao)ke(ee.value.value.sections);else if(ee.value.kind==="source"){const Ie=Le=>{ge||(Le instanceof Is&&Oi(Le.value)===ha?ke(Le.value.sections):Le instanceof Rs?ke(Le.sections):Le.eachChild(Ie))},$e=ee.value;$e._styleExpression&&Ie($e._styleExpression.expression)}return ge}getProgramConfiguration(y){return new _s(this,y)}}var Wg={paint:new zn({"background-color":new Wt(gn.paint_background["background-color"]),"background-pattern":new Wn(gn.paint_background["background-pattern"]),"background-opacity":new Wt(gn.paint_background["background-opacity"])})},Zg={paint:new zn({"raster-opacity":new Wt(gn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wt(gn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wt(gn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wt(gn.paint_raster["raster-brightness-max"]),"raster-saturation":new Wt(gn.paint_raster["raster-saturation"]),"raster-contrast":new Wt(gn.paint_raster["raster-contrast"]),"raster-resampling":new Wt(gn.paint_raster["raster-resampling"]),"raster-fade-duration":new Wt(gn.paint_raster["raster-fade-duration"])})};class Xg extends Vi{constructor(y){super(y,{}),this.implementation=y}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(y){this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)}onRemove(y){this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)}}var Kg={paint:new zn({"sky-type":new Wt(gn.paint_sky["sky-type"]),"sky-atmosphere-sun":new Wt(gn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Wt(gn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Wt(gn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Wt(gn.paint_sky["sky-gradient-radius"]),"sky-gradient":new pn(gn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Wt(gn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Wt(gn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Wt(gn.paint_sky["sky-opacity"])})};function Lp($,y,I){const ee=[0,0,1],re=af([]);return lf(re,re,I?-Oe($)+Math.PI:Oe($)),sf(re,re,-Oe(y)),nf(ee,ee,re),So(ee,ee)}const Yg={circle:class extends Vi{constructor($){super($,tm)}createBucket($){return new jt($)}queryRadius($){const y=$;return Gi("circle-radius",this,y)+Gi("circle-stroke-width",this,y)+uo(this.paint.get("circle-translate"))}queryIntersectsFeature($,y,I,ee,re,ge,ke,Ie){const $e=_d(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),Le=this.paint.get("circle-radius").evaluate(y,I)+this.paint.get("circle-stroke-width").evaluate(y,I);return cf($,ee,ge,ke,Ie,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",$e,Le)}getProgramIds(){return["circle"]}getProgramConfiguration($){return new _s(this,$)}},heatmap:class extends Vi{createBucket($){return new hf($)}constructor($){super($,lm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate($){$==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius($){return Gi("heatmap-radius",this,$)}queryIntersectsFeature($,y,I,ee,re,ge,ke,Ie){const $e=this.paint.get("heatmap-radius").evaluate(y,I);return cf($,ee,ge,ke,Ie,!0,!0,new xe(0,0),$e)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration($){return new _s(this,$)}},hillshade:class extends Vi{constructor($){super($,cm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Vi{constructor($){super($,km)}getProgramIds(){const $=this.paint.get("fill-pattern"),y=$&&$.constantOr(1),I=[y?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&I.push(y&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),I}getProgramConfiguration($){return new _s(this,$)}recalculate($,y){super.recalculate($,y);const I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket($){return new Ad($)}queryRadius(){return uo(this.paint.get("fill-translate"))}queryIntersectsFeature($,y,I,ee,re,ge){return!$.queryGeometry.isAboveHorizon&&Un(ms($.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),ee)}isTileClipped(){return!0}},"fill-extrusion":class extends Vi{constructor($){super($,Fm)}createBucket($){return new Mh($)}queryRadius(){return uo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration($){return new _s(this,$)}queryIntersectsFeature($,y,I,ee,re,ge,ke,Ie,$e){const Le=_d(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),Ve=this.paint.get("fill-extrusion-height").evaluate(y,I),We=this.paint.get("fill-extrusion-base").evaluate(y,I),Ze=[0,0],tt=Ie&&ge.elevation,ot=ge.elevation?ge.elevation.exaggeration():1,mt=$.tile.getBucket(this);if(tt&&mt instanceof Mh){const Ht=mt.centroidVertexArray,Nt=$e+1;if(Nt<Ht.length){const qt=Ht.get(Nt);Ze[0]=qt.a_centroid_pos0,Ze[1]=qt.a_centroid_pos1}}if(Ze[0]===0&&Ze[1]===1)return!1;ge.projection.name==="globe"&&(ee=Mf([ee],[new xe(0,0),new xe(kr,kr)],$.tileID.canonical).map(Ht=>Ht.polygon).flat());const Tt=function(Ht,Nt,qt,Qt,Zt,An,wn,On,Jn,Sn,Bn){return Ht.projection.name==="globe"?function(Vn,Fn,Xn,Gn,ar,Rr,$r,vr,rr,qr,Ir){const dr=[],gi=[],di=Vn.projection.upVectorScale(Ir,Vn.center.lat,Vn.worldSize).metersToTile,Si=[0,0,0,1],jr=[0,0,0,1],Jr=(pi,hi,Ti,Ii)=>{pi[0]=hi,pi[1]=Ti,pi[2]=Ii,pi[3]=1},yi=Cf();Xn>0&&(Xn+=yi),Gn+=yi;for(const pi of Fn){const hi=[],Ti=[];for(const Ii of pi){const ro=Ii.x+ar.x,Fo=Ii.y+ar.y,Xr=Vn.projection.projectTilePoint(ro,Fo,Ir),Di=Vn.projection.upVector(Ir,Ii.x,Ii.y);let yo=Xn,ri=Gn;if($r){const Pi=Rf(ro,Fo,Xn,Gn,$r,vr,rr,qr);yo+=Pi.base,ri+=Pi.top}Xn!==0?Jr(Si,Xr.x+Di[0]*di*yo,Xr.y+Di[1]*di*yo,Xr.z+Di[2]*di*yo):Jr(Si,Xr.x,Xr.y,Xr.z),Jr(jr,Xr.x+Di[0]*di*ri,Xr.y+Di[1]*di*ri,Xr.z+Di[2]*di*ri),Zi(Si,Si,Rr),Zi(jr,jr,Rr),hi.push(Cd(Si)),Ti.push(Cd(jr))}dr.push(hi),gi.push(Ti)}return[dr,gi]}(Ht,Nt,qt,Qt,Zt,An,wn,On,Jn,Sn,Bn):wn?function(Vn,Fn,Xn,Gn,ar,Rr,$r,vr,rr){const qr=[],Ir=[],dr=[0,0,0,1];for(const gi of Vn){const di=[],Si=[];for(const jr of gi){const Jr=jr.x+Gn.x,yi=jr.y+Gn.y,pi=Rf(Jr,yi,Fn,Xn,Rr,$r,vr,rr);dr[0]=Jr,dr[1]=yi,dr[2]=pi.base,dr[3]=1,qc(dr,dr,ar),dr[3]=Math.max(dr[3],1e-5);const hi=Cd([dr[0]/dr[3],dr[1]/dr[3],dr[2]/dr[3]]);dr[0]=Jr,dr[1]=yi,dr[2]=pi.top,dr[3]=1,qc(dr,dr,ar),dr[3]=Math.max(dr[3],1e-5);const Ti=Cd([dr[0]/dr[3],dr[1]/dr[3],dr[2]/dr[3]]);di.push(hi),Si.push(Ti)}qr.push(di),Ir.push(Si)}return[qr,Ir]}(Nt,qt,Qt,Zt,An,wn,On,Jn,Sn):function(Vn,Fn,Xn,Gn,ar){const Rr=[],$r=[],vr=ar[8]*Fn,rr=ar[9]*Fn,qr=ar[10]*Fn,Ir=ar[11]*Fn,dr=ar[8]*Xn,gi=ar[9]*Xn,di=ar[10]*Xn,Si=ar[11]*Xn;for(const jr of Vn){const Jr=[],yi=[];for(const pi of jr){const hi=pi.x+Gn.x,Ti=pi.y+Gn.y,Ii=ar[0]*hi+ar[4]*Ti+ar[12],ro=ar[1]*hi+ar[5]*Ti+ar[13],Fo=ar[2]*hi+ar[6]*Ti+ar[14],Xr=ar[3]*hi+ar[7]*Ti+ar[15],Di=Ii+vr,yo=ro+rr,ri=Fo+qr,Pi=Math.max(Xr+Ir,1e-5),Mo=Ii+dr,Ci=ro+gi,Ni=Fo+di,io=Math.max(Xr+Si,1e-5),eo=new xe(Di/Pi,yo/Pi);eo.z=ri/Pi,Jr.push(eo);const po=new xe(Mo/io,Ci/io);po.z=Ni/io,yi.push(po)}Rr.push(Jr),$r.push(yi)}return[Rr,$r]}(Nt,qt,Qt,Zt,An)}(ge,ee,We,Ve,Le,ke,tt?Ie:null,Ze,ot,ge.center.lat,$.tileID.canonical),Ft=$.queryGeometry;return function(Ht,Nt,qt){let Qt=1/0;Un(qt,Nt)&&(Qt=Of(qt,Nt[0]));for(let Zt=0;Zt<Nt.length;Zt++){const An=Nt[Zt],wn=Ht[Zt];for(let On=0;On<An.length-1;On++){const Jn=An[On],Sn=[Jn,An[On+1],wn[On+1],wn[On],Jn];cn(qt,Sn)&&(Qt=Math.min(Qt,Of(qt,Sn)))}}return Qt!==1/0&&Qt}(Tt[0],Tt[1],Ft.isPointQuery()?Ft.screenBounds:Ft.screenGeometry)}},line:class extends Vi{constructor($){super($,zf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate($){if($==="line-gradient"){const y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=y._styleExpression&&y._styleExpression.expression instanceof dc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate($,y){super.recalculate($,y),this.paint._values["line-floorwidth"]=$f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)}createBucket($){return new Md($)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration($){return new _s(this,$)}queryRadius($){const y=$,I=Df(Gi("line-width",this,y),Gi("line-gap-width",this,y)),ee=Gi("line-offset",this,y);return I/2+Math.abs(ee)+uo(this.paint.get("line-translate"))}queryIntersectsFeature($,y,I,ee,re,ge){if($.queryGeometry.isAboveHorizon)return!1;const ke=ms($.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),Ie=$.pixelToTileUnitsFactor/2*Df(this.paint.get("line-width").evaluate(y,I),this.paint.get("line-gap-width").evaluate(y,I)),$e=this.paint.get("line-offset").evaluate(y,I);return $e&&(ee=function(Le,Ve){const We=[],Ze=new xe(0,0);for(let tt=0;tt<Le.length;tt++){const ot=Le[tt],mt=[];for(let Tt=0;Tt<ot.length;Tt++){const Ft=ot[Tt-1],Ht=ot[Tt],Nt=ot[Tt+1],qt=Tt===0?Ze:Ht.sub(Ft)._unit()._perp(),Qt=Tt===ot.length-1?Ze:Nt.sub(Ht)._unit()._perp(),Zt=qt._add(Qt)._unit();Zt._mult(1/(Zt.x*Qt.x+Zt.y*Qt.y)),mt.push(Zt._mult(Ve)._add(Ht))}We.push(mt)}return We}(ee,$e*$.pixelToTileUnitsFactor)),function(Le,Ve,We){for(let Ze=0;Ze<Ve.length;Ze++){const tt=Ve[Ze];if(Le.length>=3){for(let ot=0;ot<tt.length;ot++)if(li(Le,tt[ot]))return!0}if(hr(Le,tt,We))return!0}return!1}(ke,ee,Ie)}isTileClipped(){return!0}},symbol:qd,background:class extends Vi{constructor($){super($,Wg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Vi{constructor($){super($,Zg)}getProgramIds(){return["raster"]}},sky:class extends Vi{constructor($){super($,Kg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate($){$==="sky-gradient"?this._updateColorRamp():$!=="sky-atmosphere-sun"&&$!=="sky-atmosphere-halo-color"&&$!=="sky-atmosphere-color"&&$!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=dp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture($){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const y=$.style.light.properties.get("position");return this._lightPosition.azimuthal!==y.azimuthal||this._lightPosition.polar!==y.polar}return!1}getCenter($,y){if(this.paint.get("sky-type")==="atmosphere"){const ee=this.paint.get("sky-atmosphere-sun"),re=!ee,ge=$.style.light,ke=ge.properties.get("position");return re&&ge.properties.get("anchor")==="viewport"&&Dt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),re?Lp(ke.azimuthal,90-ke.polar,y):Lp(ee[0],90-ee[1],y)}const I=this.paint.get("sky-gradient-center");return Lp(I[0],90-I[1],y)}is3D(){return!1}isSky(){return!0}markSkyboxValid($){this._skyboxInvalidated=!1,this._lightPosition=$.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const $=this.paint.get("sky-type");return $==="atmosphere"?["skyboxCapture","skybox"]:$==="gradient"?["skyboxGradient"]:null}}};class Gh{constructor(y,I,ee,re){this.context=y,this.format=ee,this.texture=y.gl.createTexture(),this.update(I,re)}update(y,I,ee){const{width:re,height:ge}=y,{context:ke}=this,{gl:Ie}=ke,{HTMLImageElement:$e,HTMLCanvasElement:Le,HTMLVideoElement:Ve,ImageData:We,ImageBitmap:Ze}=we;if(Ie.bindTexture(Ie.TEXTURE_2D,this.texture),ke.pixelStoreUnpackFlipY.set(!1),ke.pixelStoreUnpack.set(1),ke.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ie.RGBA&&(!I||I.premultiply!==!1)),ee||this.size&&this.size[0]===re&&this.size[1]===ge){const{x:tt,y:ot}=ee||{x:0,y:0};y instanceof $e||y instanceof Le||y instanceof Ve||y instanceof We||Ze&&y instanceof Ze?Ie.texSubImage2D(Ie.TEXTURE_2D,0,tt,ot,Ie.RGBA,Ie.UNSIGNED_BYTE,y):Ie.texSubImage2D(Ie.TEXTURE_2D,0,tt,ot,re,ge,Ie.RGBA,Ie.UNSIGNED_BYTE,y.data)}else this.size=[re,ge],y instanceof $e||y instanceof Le||y instanceof Ve||y instanceof We||Ze&&y instanceof Ze?Ie.texImage2D(Ie.TEXTURE_2D,0,this.format,this.format,Ie.UNSIGNED_BYTE,y):Ie.texImage2D(Ie.TEXTURE_2D,0,this.format,re,ge,0,this.format,Ie.UNSIGNED_BYTE,y.data);this.useMipmap=Boolean(I&&I.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&Ie.generateMipmap(Ie.TEXTURE_2D)}bind(y,I){const{context:ee}=this,{gl:re}=ee;re.bindTexture(re.TEXTURE_2D,this.texture),y!==this.filter&&(re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,y),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,this.useMipmap?y===re.NEAREST?re.NEAREST_MIPMAP_NEAREST:re.LINEAR_MIPMAP_NEAREST:y),this.filter=y),I!==this.wrap&&(re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,I),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:y}=this.context;y.deleteTexture(this.texture),this.texture=null}}class Bp{constructor(y,I){this.width=y,this.height=I,this.nextRow=0,this.image=new sl({width:y,height:I}),this.positions={},this.uploaded=!1}getDash(y,I){const ee=this.getKey(y,I);return this.positions[ee]}trim(){const y=this.width,I=this.height=it(this.nextRow);this.image.resize({width:y,height:I})}getKey(y,I){return y.join(",")+I}getDashRanges(y,I,ee){const re=[];let ge=y.length%2==1?-y[y.length-1]*ee:0,ke=y[0]*ee,Ie=!0;re.push({left:ge,right:ke,isDash:Ie,zeroLength:y[0]===0});let $e=y[0];for(let Le=1;Le<y.length;Le++){Ie=!Ie;const Ve=y[Le];ge=$e*ee,$e+=Ve,ke=$e*ee,re.push({left:ge,right:ke,isDash:Ie,zeroLength:Ve===0})}return re}addRoundDash(y,I,ee){const re=I/2;for(let ge=-ee;ge<=ee;ge++){const ke=this.width*(this.nextRow+ee+ge);let Ie=0,$e=y[Ie];for(let Le=0;Le<this.width;Le++){Le/$e.right>1&&($e=y[++Ie]);const Ve=Math.abs(Le-$e.left),We=Math.abs(Le-$e.right),Ze=Math.min(Ve,We);let tt;const ot=ge/ee*(re+1);if($e.isDash){const mt=re-Math.abs(ot);tt=Math.sqrt(Ze*Ze+mt*mt)}else tt=re-Math.sqrt(Ze*Ze+ot*ot);this.image.data[ke+Le]=Math.max(0,Math.min(255,tt+128))}}}addRegularDash(y,I){for(let $e=y.length-1;$e>=0;--$e){const Le=y[$e],Ve=y[$e+1];Le.zeroLength?y.splice($e,1):Ve&&Ve.isDash===Le.isDash&&(Ve.left=Le.left,y.splice($e,1))}const ee=y[0],re=y[y.length-1];ee.isDash===re.isDash&&(ee.left=re.left-this.width,re.right=ee.right+this.width);const ge=this.width*this.nextRow;let ke=0,Ie=y[ke];for(let $e=0;$e<this.width;$e++){$e/Ie.right>1&&(Ie=y[++ke]);const Le=Math.abs($e-Ie.left),Ve=Math.abs($e-Ie.right),We=Math.min(Le,Ve);this.image.data[ge+$e]=Math.max(0,Math.min(255,(Ie.isDash?We:-We)+I+128))}}addDash(y,I){const ee=this.getKey(y,I);if(this.positions[ee])return this.positions[ee];const re=I==="round",ge=re?7:0,ke=2*ge+1;if(this.nextRow+ke>this.height)return Dt("LineAtlas out of space"),null;y.length===0&&y.push(1);let Ie=0;for(let Ve=0;Ve<y.length;Ve++)y[Ve]<0&&(Dt("Negative value is found in line dasharray, replacing values with 0"),y[Ve]=0),Ie+=y[Ve];if(Ie!==0){const Ve=this.width/Ie,We=this.getDashRanges(y,this.width,Ve);re?this.addRoundDash(We,Ve,ge):this.addRegularDash(We,I==="square"?.5*Ve:0)}const $e=this.nextRow+ge;this.nextRow+=ke;const Le={tl:[$e,ge],br:[Ie,0]};return this.positions[ee]=Le,Le}}ur(Bp,"LineAtlas");class Jg{constructor(y){this._callback=y,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Qg{constructor(){this.tasks={},this.taskQueue=[],lt(["process"],this),this.invoker=new Jg(this.process),this.nextId=0}add(y,I){const ee=this.nextId++,re=function({type:ge,isSymbolTile:ke,zoom:Ie}){return Ie=Ie||0,ge==="message"?0:ge!=="maybePrepare"||ke?ge!=="parseTile"||ke?ge==="parseTile"&&ke?300-Ie:ge==="maybePrepare"&&ke?400-Ie:500:200-Ie:100-Ie}(I);if(re===0){on();try{y()}finally{}return{cancel:()=>{}}}return this.tasks[ee]={fn:y,metadata:I,priority:re,id:ee},this.taskQueue.push(ee),this.invoker.trigger(),{cancel:()=>{delete this.tasks[ee]}}}process(){on();try{if(this.taskQueue=this.taskQueue.filter(ee=>!!this.tasks[ee]),!this.taskQueue.length)return;const y=this.pick();if(y===null)return;const I=this.tasks[y];if(delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),!I)return;I.fn()}finally{}}pick(){let y=null,I=1/0;for(let re=0;re<this.taskQueue.length;re++){const ge=this.tasks[this.taskQueue[re]];ge.priority<I&&(I=ge.priority,y=re)}if(y===null)return null;const ee=this.taskQueue[y];return this.taskQueue.splice(y,1),ee}remove(){this.invoker.remove()}}class k_{constructor(y){this._stringToNumber={},this._numberToString=[];for(let I=0;I<y.length;I++){const ee=y[I];this._stringToNumber[ee]=I,this._numberToString[I]=ee}}encode(y){return this._stringToNumber[y]}decode(y){return this._numberToString[y]}}const ey=["tile","layer","source","sourceLayer","state"];class S_{constructor(y,I,ee,re,ge){this.type="Feature",this._vectorTileFeature=y,this._z=I,this._x=ee,this._y=re,this.properties=y.properties,this.id=ge}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(y){this._geometry=y}toJSON(){const y={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(y.id=this.id);for(const I of ey)this[I]!==void 0&&(y[I]=this[I]);return y}}const Ea=32,xs=33,ec=new Uint16Array(8184);for(let $=0;$<2046;$++){let y=$+2,I=0,ee=0,re=0,ge=0,ke=0,Ie=0;for(1&y?re=ge=ke=Ea:I=ee=Ie=Ea;(y>>=1)>1;){const Le=I+re>>1,Ve=ee+ge>>1;1&y?(re=I,ge=ee,I=ke,ee=Ie):(I=re,ee=ge,re=ke,ge=Ie),ke=Le,Ie=Ve}const $e=4*$;ec[$e+0]=I,ec[$e+1]=ee,ec[$e+2]=re,ec[$e+3]=ge}const bs=new Uint16Array(2178),tc=new Uint8Array(1089),Hd=new Uint16Array(1089);function C_($){return $===0?-.03125:$===32?.03125:0}var M_=Ln([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const I_={type:2,extent:kr,loadGeometry:()=>[[new xe(0,0),new xe(8193,0),new xe(8193,8193),new xe(0,8193),new xe(0,0)]]};class Fp{constructor(y,I,ee,re,ge){this.tileID=y,this.uid=rt(),this.uses=0,this.tileSize=I,this.tileZoom=ee,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=ge,this.expiredRequestCount=0,this.state="loading",re&&re.transform&&(this.projection=re.transform.projection)}registerFadeDuration(y){const I=y+this.timeAdded;I<$n.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Zc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(y,I,ee){if(this.unloadVectorData(),this.state="loaded",y){y.featureIndex&&(this.latestFeatureIndex=y.featureIndex,y.rawTileData?(this.latestRawTileData=y.rawTileData,this.latestFeatureIndex.rawTileData=y.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=y.collisionBoxArray,this.buckets=function(re,ge){const ke={};if(!ge)return ke;for(const Ie of re){const $e=Ie.layerIds.map(Le=>ge.getLayer(Le)).filter(Boolean);if($e.length!==0){Ie.layers=$e,Ie.stateDependentLayerIds&&(Ie.stateDependentLayers=Ie.stateDependentLayerIds.map(Le=>$e.filter(Ve=>Ve.id===Le)[0]));for(const Le of $e)ke[Le.id]=Ie}}return ke}(y.buckets,I.style),this.hasSymbolBuckets=!1;for(const re in this.buckets){const ge=this.buckets[re];if(ge instanceof Ql){if(this.hasSymbolBuckets=!0,!ee)break;ge.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const re in this.buckets){const ge=this.buckets[re];if(ge instanceof Ql&&ge.hasRTLText){this.hasRTLText=!0,kt.isLoading()||kt.isLoaded()||gt()!=="deferred"||It();break}}this.queryPadding=0;for(const re in this.buckets){const ge=this.buckets[re];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(re).queryRadius(ge))}y.imageAtlas&&(this.imageAtlas=y.imageAtlas),y.glyphAtlasImage&&(this.glyphAtlasImage=y.glyphAtlasImage),y.lineAtlas&&(this.lineAtlas=y.lineAtlas)}else this.collisionBoxArray=new qo}unloadVectorData(){if(this.hasData()){for(const y in this.buckets)this.buckets[y].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(y){return this.buckets[y.id]}upload(y){for(const ee in this.buckets){const re=this.buckets[ee];re.uploadPending()&&re.upload(y)}const I=y.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Gh(y,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Gh(y,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Gh(y,this.lineAtlas.image,I.ALPHA),this.lineAtlas.uploaded=!0)}prepare(y){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(y,this.imageAtlasTexture)}queryRenderedFeatures(y,I,ee,re,ge,ke,Ie,$e){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:re,pixelPosMatrix:Ie,transform:ke,params:ge,tileTransform:this.tileTransform},y,I,ee):{}}querySourceFeatures(y,I){const ee=this.latestFeatureIndex;if(!ee||!ee.rawTileData)return;const re=ee.loadVTLayers(),ge=I?I.sourceLayer:"",ke=re._geojsonTileLayer||re[ge];if(!ke)return;const Ie=Ks(I&&I.filter),{z:$e,x:Le,y:Ve}=this.tileID.canonical,We={z:$e,x:Le,y:Ve};for(let Ze=0;Ze<ke.length;Ze++){const tt=ke.feature(Ze);if(Ie.needGeometry){const Tt=Ge(tt,!0);if(!Ie.filter(new At(this.tileID.overscaledZ),Tt,this.tileID.canonical))continue}else if(!Ie.filter(new At(this.tileID.overscaledZ),tt))continue;const ot=ee.getId(tt,ge),mt=new S_(tt,$e,Le,Ve,ot);mt.tile=We,y.push(mt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(y){const I=this.expirationTime;if(y.cacheControl){const ee=an(y.cacheControl);ee["max-age"]&&(this.expirationTime=Date.now()+1e3*ee["max-age"])}else y.expires&&(this.expirationTime=new Date(y.expires).getTime());if(this.expirationTime){const ee=Date.now();let re=!1;if(this.expirationTime>ee)re=!1;else if(I)if(this.expirationTime<I)re=!0;else{const ge=this.expirationTime-I;ge?this.expirationTime=ee+Math.max(ge,3e4):re=!0}else re=!0;re?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(y,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(y).length===0||!I)return;const ee=this.latestFeatureIndex.loadVTLayers(),re=I.style.listImages();for(const ge in this.buckets){if(!I.style.hasLayer(ge))continue;const ke=this.buckets[ge],Ie=ke.layers[0].sourceLayer||"_geojsonTileLayer",$e=ee[Ie],Le=y[Ie];if(!$e||!Le||Object.keys(Le).length===0)continue;if(ke.update(Le,$e,re,this.imageAtlas&&this.imageAtlas.patternPositions||{}),ke instanceof Md||ke instanceof Ad){const We=I.style._getSourceCache(ke.layers[0].source);I._terrain&&I._terrain.enabled&&We&&ke.programConfigurations.needsUpload&&I._terrain._clearRenderCacheForTile(We.id,this.tileID)}const Ve=I&&I.style&&I.style.getLayer(ge);Ve&&(this.queryPadding=Math.max(this.queryPadding,Ve.queryRadius(ke)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$n.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(y){this.symbolFadeHoldUntil=$n.now()+y}setTexture(y,I){const ee=I.context,re=ee.gl;this.texture=I.getTileTexture(y.width),this.texture?this.texture.update(y,{useMipmap:!0}):(this.texture=new Gh(ee,y,re.RGBA,{useMipmap:!0}),this.texture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ee.extTextureFilterAnisotropic&&re.texParameterf(re.TEXTURE_2D,ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ee.extTextureFilterAnisotropicMax))}setDependencies(y,I){const ee={};for(const re of I)ee[re]=!0;this.dependencies[y]=ee}hasDependency(y,I){for(const ee of y){const re=this.dependencies[ee];if(re){for(const ge of I)if(re[ge])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(y,I){if(!I||I.name==="mercator"||this._tileDebugBuffer)return;const ee=vt(I_,this.tileID.canonical,this.tileTransform)[0],re=new tr,ge=new go;for(let ke=0;ke<ee.length;ke++){const{x:Ie,y:$e}=ee[ke];re.emplaceBack(Ie,$e),ge.emplaceBack(ke)}ge.emplaceBack(0),this._tileDebugIndexBuffer=y.createIndexBuffer(ge),this._tileDebugBuffer=y.createVertexBuffer(re,Dh.members),this._tileDebugSegments=Bi.simpleSegment(0,0,re.length,ge.length)}_makeTileBoundsBuffers(y,I){if(this._tileBoundsBuffer||!I||I.name==="mercator")return;const ee=vt(I_,this.tileID.canonical,this.tileTransform)[0];let re,ge;if(this.isRaster){const ke=function(Ie,$e){const Le=Zc(Ie,$e),Ve=Math.pow(2,Ie.z);for(let Tt=0;Tt<xs;Tt++)for(let Ft=0;Ft<xs;Ft++){const Ht=Ho((Ie.x+(Ft+C_(Ft))/Ea)/Ve),Nt=Ji((Ie.y+(Tt+C_(Tt))/Ea)/Ve),qt=$e.project(Ht,Nt),Qt=Tt*xs+Ft;bs[2*Qt+0]=Math.round((qt.x*Le.scale-Le.x)*kr),bs[2*Qt+1]=Math.round((qt.y*Le.scale-Le.y)*kr)}tc.fill(0),Hd.fill(0);for(let Tt=2045;Tt>=0;Tt--){const Ft=4*Tt,Ht=ec[Ft+0],Nt=ec[Ft+1],qt=ec[Ft+2],Qt=ec[Ft+3],Zt=Ht+qt>>1,An=Nt+Qt>>1,wn=Zt+An-Nt,On=An+Ht-Zt,Jn=Nt*xs+Ht,Sn=Qt*xs+qt,Bn=An*xs+Zt,Vn=Math.hypot((bs[2*Jn+0]+bs[2*Sn+0])/2-bs[2*Bn+0],(bs[2*Jn+1]+bs[2*Sn+1])/2-bs[2*Bn+1])>=16;if(tc[Bn]=tc[Bn]||(Vn?1:0),Tt<1022){const Fn=(Nt+On>>1)*xs+(Ht+wn>>1),Xn=(Qt+On>>1)*xs+(qt+wn>>1);tc[Bn]=tc[Bn]||tc[Fn]||tc[Xn]}}const We=new yr,Ze=new zr;let tt=0;function ot(Tt,Ft){const Ht=Ft*xs+Tt;return Hd[Ht]===0&&(We.emplaceBack(bs[2*Ht+0],bs[2*Ht+1],Tt*kr/Ea,Ft*kr/Ea),Hd[Ht]=++tt),Hd[Ht]-1}function mt(Tt,Ft,Ht,Nt,qt,Qt){const Zt=Tt+Ht>>1,An=Ft+Nt>>1;if(Math.abs(Tt-qt)+Math.abs(Ft-Qt)>1&&tc[An*xs+Zt])mt(qt,Qt,Tt,Ft,Zt,An),mt(Ht,Nt,qt,Qt,Zt,An);else{const wn=ot(Tt,Ft),On=ot(Ht,Nt),Jn=ot(qt,Qt);Ze.emplaceBack(wn,On,Jn)}}return mt(0,0,Ea,Ea,Ea,0),mt(Ea,Ea,0,0,0,Ea),{vertices:We,indices:Ze}}(this.tileID.canonical,I);re=ke.vertices,ge=ke.indices}else{re=new yr,ge=new zr;for(const{x:Ie,y:$e}of ee)re.emplaceBack(Ie,$e,0,0);const ke=xd(re.int16,void 0,4);for(let Ie=0;Ie<ke.length;Ie+=3)ge.emplaceBack(ke[Ie],ke[Ie+1],ke[Ie+2])}this._tileBoundsBuffer=y.createVertexBuffer(re,M_.members),this._tileBoundsIndexBuffer=y.createIndexBuffer(ge),this._tileBoundsSegments=Bi.simpleSegment(0,0,re.length,ge.length)}_makeGlobeTileDebugBuffers(y,I){const ee=I.projection;if(!ee||ee.name!=="globe"||I.freezeTileCoverage)return;const re=this.tileID.canonical,ge=Bh(p_(re,I)),ke=Fh(I.zoom);let Ie;ke>0&&(Ie=tp(new Float64Array(16),I.globeMatrix));const $e=(re.x+.5)/(1<<re.z)-xa(I.center.lng);let Le=0;$e>.5?Le=-1:$e<-.5&&(Le=1),this._makeGlobeTileDebugBorderBuffer(y,re,I,ge,Ie,ke,Le),this._makeGlobeTileDebugTextBuffer(y,re,I,ge,Ie,ke,Le)}_globePoint(y,I,ee,re,ge,ke,Ie,$e){let Le=Lh(y,I,ee);if(ke){const Ve=1<<ee.z,We=[((y/kr+ee.x)/Ve+$e)*re,(I/kr+ee.y)/Ve*re,0];Zi(We,We,ke),Le=Ya(Le,We,Ie)}return Zi(Le,Le,ge)}_makeGlobeTileDebugBorderBuffer(y,I,ee,re,ge,ke,Ie){const $e=new tr,Le=new go,Ve=new pr,We=(tt,ot,mt,Tt,Ft)=>{const Ht=(mt-tt)/(Ft-1),Nt=(Tt-ot)/(Ft-1),qt=$e.length;for(let Qt=0;Qt<Ft;Qt++){const Zt=tt+Qt*Ht,An=ot+Qt*Nt;$e.emplaceBack(Zt,An);const wn=this._globePoint(Zt,An,I,ee.worldSize,re,ge,ke,Ie);Ve.emplaceBack(wn[0],wn[1],wn[2]),Le.emplaceBack(qt+Qt)}},Ze=kr;We(0,0,Ze,0,16),We(Ze,0,Ze,Ze,16),We(Ze,Ze,0,Ze,16),We(0,Ze,0,0,16),this._tileDebugIndexBuffer=y.createIndexBuffer(Le),this._tileDebugBuffer=y.createVertexBuffer($e,Dh.members),this._globeTileDebugBorderBuffer=y.createVertexBuffer(Ve,h_.members),this._tileDebugSegments=Bi.simpleSegment(0,0,$e.length,Le.length)}_makeGlobeTileDebugTextBuffer(y,I,ee,re,ge,ke,Ie){const $e=new tr,Le=new zr,Ve=new pr,We=25;Le.reserve(32),$e.reserve(We),Ve.reserve(We);const Ze=(tt,ot)=>We*tt+ot;for(let tt=0;tt<We;tt++){const ot=2048*tt;for(let mt=0;mt<We;mt++){const Tt=2048*mt;$e.emplaceBack(Tt,ot);const Ft=this._globePoint(Tt,ot,I,ee.worldSize,re,ge,ke,Ie);Ve.emplaceBack(Ft[0],Ft[1],Ft[2])}}for(let tt=0;tt<4;tt++)for(let ot=0;ot<4;ot++){const mt=Ze(tt,ot),Tt=Ze(tt,ot+1),Ft=Ze(tt+1,ot),Ht=Ze(tt+1,ot+1);Le.emplaceBack(mt,Tt,Ft),Le.emplaceBack(Ft,Tt,Ht)}this._tileDebugTextIndexBuffer=y.createIndexBuffer(Le),this._tileDebugTextBuffer=y.createVertexBuffer($e,Dh.members),this._globeTileDebugTextBuffer=y.createVertexBuffer(Ve,h_.members),this._tileDebugTextSegments=Bi.simpleSegment(0,0,We,32)}}class ty{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(y,I,ee){const re=String(I);if(this.stateChanges[y]=this.stateChanges[y]||{},this.stateChanges[y][re]=this.stateChanges[y][re]||{},wt(this.stateChanges[y][re],ee),this.deletedStates[y]===null){this.deletedStates[y]={};for(const ge in this.state[y])ge!==re&&(this.deletedStates[y][ge]=null)}else if(this.deletedStates[y]&&this.deletedStates[y][re]===null){this.deletedStates[y][re]={};for(const ge in this.state[y][re])ee[ge]||(this.deletedStates[y][re][ge]=null)}else for(const ge in ee)this.deletedStates[y]&&this.deletedStates[y][re]&&this.deletedStates[y][re][ge]===null&&delete this.deletedStates[y][re][ge]}removeFeatureState(y,I,ee){if(this.deletedStates[y]===null)return;const re=String(I);if(this.deletedStates[y]=this.deletedStates[y]||{},ee&&I!==void 0)this.deletedStates[y][re]!==null&&(this.deletedStates[y][re]=this.deletedStates[y][re]||{},this.deletedStates[y][re][ee]=null);else if(I!==void 0)if(this.stateChanges[y]&&this.stateChanges[y][re])for(ee in this.deletedStates[y][re]={},this.stateChanges[y][re])this.deletedStates[y][re][ee]=null;else this.deletedStates[y][re]=null;else this.deletedStates[y]=null}getState(y,I){const ee=String(I),re=wt({},(this.state[y]||{})[ee],(this.stateChanges[y]||{})[ee]);if(this.deletedStates[y]===null)return{};if(this.deletedStates[y]){const ge=this.deletedStates[y][I];if(ge===null)return{};for(const ke in ge)delete re[ke]}return re}initializeTileState(y,I){y.setFeatureState(this.state,I)}coalesceChanges(y,I){const ee={};for(const re in this.stateChanges){this.state[re]=this.state[re]||{};const ge={};for(const ke in this.stateChanges[re])this.state[re][ke]||(this.state[re][ke]={}),wt(this.state[re][ke],this.stateChanges[re][ke]),ge[ke]=this.state[re][ke];ee[re]=ge}for(const re in this.deletedStates){this.state[re]=this.state[re]||{};const ge={};if(this.deletedStates[re]===null)for(const ke in this.state[re])ge[ke]={},this.state[re][ke]={};else for(const ke in this.deletedStates[re]){if(this.deletedStates[re][ke]===null)this.state[re][ke]={};else for(const Ie of Object.keys(this.deletedStates[re][ke]))delete this.state[re][ke][Ie];ge[ke]=this.state[re][ke]}ee[re]=ee[re]||{},wt(ee[re],ge)}if(this.stateChanges={},this.deletedStates={},Object.keys(ee).length!==0)for(const re in y)y[re].setFeatureState(ee,I)}}class P_{constructor(y){this.size=y,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(y,I){const ee=this.toIdx(y,I);return{min:this.minimums[ee],max:this.maximums[ee]}}isLeaf(y,I){return this.leaves[this.toIdx(y,I)]}toIdx(y,I){return I*this.size+y}}function O_($,y,I,ee){let re=0,ge=Number.MAX_VALUE;for(let ke=0;ke<3;ke++)if(Math.abs(ee[ke])<1e-15){if(I[ke]<$[ke]||I[ke]>y[ke])return null}else{const Ie=1/ee[ke];let $e=($[ke]-I[ke])*Ie,Le=(y[ke]-I[ke])*Ie;if($e>Le){const Ve=$e;$e=Le,Le=Ve}if($e>re&&(re=$e),Le<ge&&(ge=Le),re>ge)return null}return re}function R_($,y,I,ee,re,ge,ke,Ie,$e,Le,Ve){const We=ee-$,Ze=re-y,tt=ge-I,ot=ke-$,mt=Ie-y,Tt=$e-I,Ft=Ve[1]*Tt-Ve[2]*mt,Ht=Ve[2]*ot-Ve[0]*Tt,Nt=Ve[0]*mt-Ve[1]*ot,qt=We*Ft+Ze*Ht+tt*Nt;if(Math.abs(qt)<1e-15)return null;const Qt=1/qt,Zt=Le[0]-$,An=Le[1]-y,wn=Le[2]-I,On=(Zt*Ft+An*Ht+wn*Nt)*Qt;if(On<0||On>1)return null;const Jn=An*tt-wn*Ze,Sn=wn*We-Zt*tt,Bn=Zt*Ze-An*We,Vn=(Ve[0]*Jn+Ve[1]*Sn+Ve[2]*Bn)*Qt;return Vn<0||On+Vn>1?null:(ot*Jn+mt*Sn+Tt*Bn)*Qt}function z_($,y,I){return($-y)/(I-y)}function $_($,y,I,ee,re,ge,ke,Ie,$e){const Le=1<<I,Ve=ge-ee,We=ke-re,Ze=($+1)/Le*Ve+ee,tt=(y+0)/Le*We+re,ot=(y+1)/Le*We+re;Ie[0]=($+0)/Le*Ve+ee,Ie[1]=tt,$e[0]=Ze,$e[1]=ot}class D_{constructor(y){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=y,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const I=function(ge){const ke=Math.ceil(Math.log2(ge.dim/8)),Ie=[];let $e=Math.ceil(Math.pow(2,ke));const Le=1/$e,Ve=(tt,ot,mt,Tt,Ft)=>{const Ht=Tt?1:0,Nt=(tt+1)*mt-Ht,qt=ot*mt,Qt=(ot+1)*mt-Ht;Ft[0]=tt*mt,Ft[1]=qt,Ft[2]=Nt,Ft[3]=Qt};let We=new P_($e);const Ze=[];for(let tt=0;tt<$e*$e;tt++){Ve(tt%$e,Math.floor(tt/$e),Le,!1,Ze);const ot=nc(Ze[0],Ze[1],ge),mt=nc(Ze[2],Ze[1],ge),Tt=nc(Ze[2],Ze[3],ge),Ft=nc(Ze[0],Ze[3],ge);We.minimums.push(Math.min(ot,mt,Tt,Ft)),We.maximums.push(Math.max(ot,mt,Tt,Ft)),We.leaves.push(1)}for(Ie.push(We),$e/=2;$e>=1;$e/=2){const tt=Ie[Ie.length-1];We=new P_($e);for(let ot=0;ot<$e*$e;ot++){Ve(ot%$e,Math.floor(ot/$e),2,!0,Ze);const mt=tt.getElevation(Ze[0],Ze[1]),Tt=tt.getElevation(Ze[2],Ze[1]),Ft=tt.getElevation(Ze[2],Ze[3]),Ht=tt.getElevation(Ze[0],Ze[3]),Nt=tt.isLeaf(Ze[0],Ze[1]),qt=tt.isLeaf(Ze[2],Ze[1]),Qt=tt.isLeaf(Ze[2],Ze[3]),Zt=tt.isLeaf(Ze[0],Ze[3]),An=Math.min(mt.min,Tt.min,Ft.min,Ht.min),wn=Math.max(mt.max,Tt.max,Ft.max,Ht.max),On=Nt&&qt&&Qt&&Zt;We.maximums.push(wn),We.minimums.push(An),We.leaves.push(wn-An<=5&&On?1:0)}Ie.push(We)}return Ie}(this.dem),ee=I.length-1,re=I[ee];this._addNode(re.minimums[0],re.maximums[0],re.leaves[0]),this._construct(I,0,0,ee,0)}raycastRoot(y,I,ee,re,ge,ke,Ie=1){return O_([y,I,-100],[ee,re,this.maximums[0]*Ie],ge,ke)}raycast(y,I,ee,re,ge,ke,Ie=1){if(!this.nodeCount)return null;const $e=this.raycastRoot(y,I,ee,re,ge,ke,Ie);if($e==null)return null;const Le=[],Ve=[],We=[],Ze=[],tt=[{idx:0,t:$e,nodex:0,nodey:0,depth:0}];for(;tt.length>0;){const{idx:ot,t:mt,nodex:Tt,nodey:Ft,depth:Ht}=tt.pop();if(this.leaves[ot]){$_(Tt,Ft,Ht,y,I,ee,re,We,Ze);const qt=1<<Ht,Qt=(Tt+0)/qt,Zt=(Tt+1)/qt,An=(Ft+0)/qt,wn=(Ft+1)/qt,On=nc(Qt,An,this.dem)*Ie,Jn=nc(Zt,An,this.dem)*Ie,Sn=nc(Zt,wn,this.dem)*Ie,Bn=nc(Qt,wn,this.dem)*Ie,Vn=R_(We[0],We[1],On,Ze[0],We[1],Jn,Ze[0],Ze[1],Sn,ge,ke),Fn=R_(Ze[0],Ze[1],Sn,We[0],Ze[1],Bn,We[0],We[1],On,ge,ke),Xn=Math.min(Vn!==null?Vn:Number.MAX_VALUE,Fn!==null?Fn:Number.MAX_VALUE);if(Xn!==Number.MAX_VALUE)return Xn;{const Gn=vd([],ge,ke,mt);if(L_(On,Jn,Bn,Sn,z_(Gn[0],We[0],Ze[0]),z_(Gn[1],We[1],Ze[1]))>=Gn[2])return mt}continue}let Nt=0;for(let qt=0;qt<this._siblingOffset.length;qt++){$_((Tt<<1)+this._siblingOffset[qt][0],(Ft<<1)+this._siblingOffset[qt][1],Ht+1,y,I,ee,re,We,Ze),We[2]=-100,Ze[2]=this.maximums[this.childOffsets[ot]+qt]*Ie;const Qt=O_(We,Ze,ge,ke);if(Qt!=null){const Zt=Qt;Le[qt]=Zt;let An=!1;for(let wn=0;wn<Nt&&!An;wn++)Zt>=Le[Ve[wn]]&&(Ve.splice(wn,0,qt),An=!0);An||(Ve[Nt]=qt),Nt++}}for(let qt=0;qt<Nt;qt++){const Qt=Ve[qt];tt.push({idx:this.childOffsets[ot]+Qt,t:Le[Qt],nodex:(Tt<<1)+this._siblingOffset[Qt][0],nodey:(Ft<<1)+this._siblingOffset[Qt][1],depth:Ht+1})}}return null}_addNode(y,I,ee){return this.minimums.push(y),this.maximums.push(I),this.leaves.push(ee),this.childOffsets.push(0),this.nodeCount++}_construct(y,I,ee,re,ge){if(y[re].isLeaf(I,ee)===1)return;this.childOffsets[ge]||(this.childOffsets[ge]=this.nodeCount);const ke=re-1,Ie=y[ke];let $e=0,Le=0;for(let Ve=0;Ve<this._siblingOffset.length;Ve++){const We=2*I+this._siblingOffset[Ve][0],Ze=2*ee+this._siblingOffset[Ve][1],tt=Ie.getElevation(We,Ze),ot=Ie.isLeaf(We,Ze),mt=this._addNode(tt.min,tt.max,ot);ot&&($e|=1<<Ve),Le||(Le=mt)}for(let Ve=0;Ve<this._siblingOffset.length;Ve++)$e&1<<Ve||this._construct(y,2*I+this._siblingOffset[Ve][0],2*ee+this._siblingOffset[Ve][1],ke,Le+Ve)}}function L_($,y,I,ee,re,ge){return Wr(Wr($,I,ge),Wr(y,ee,ge),re)}function nc($,y,I){const ee=I.dim,re=Ke($*ee-.5,0,ee-1),ge=Ke(y*ee-.5,0,ee-1),ke=Math.floor(re),Ie=Math.floor(ge),$e=Math.min(ke+1,ee-1),Le=Math.min(Ie+1,ee-1);return L_(I.get(ke,Ie),I.get($e,Ie),I.get(ke,Le),I.get($e,Le),re-ke,ge-Ie)}const B_={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Wd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(y,I,ee,re=!1,ge=!1){if(this.uid=y,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(ee&&ee!=="mapbox"&&ee!=="terrarium")return Dt(`"${ee}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=I.height;const ke=this.dim=I.height-2,Ie=new Uint32Array(I.data.buffer);if(this.pixels=new Uint8Array(I.data.buffer),this.encoding=ee||"mapbox",this.borderReady=re,!re){for(let $e=0;$e<ke;$e++)Ie[this._idx(-1,$e)]=Ie[this._idx(0,$e)],Ie[this._idx(ke,$e)]=Ie[this._idx(ke-1,$e)],Ie[this._idx($e,-1)]=Ie[this._idx($e,0)],Ie[this._idx($e,ke)]=Ie[this._idx($e,ke-1)];Ie[this._idx(-1,-1)]=Ie[this._idx(0,0)],Ie[this._idx(ke,-1)]=Ie[this._idx(ke-1,0)],Ie[this._idx(-1,ke)]=Ie[this._idx(0,ke-1)],Ie[this._idx(ke,ke)]=Ie[this._idx(ke-1,ke-1)],ge&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new D_(this)}get(y,I,ee=!1){ee&&(y=Ke(y,-1,this.dim),I=Ke(I,-1,this.dim));const re=4*this._idx(y,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[re],this.pixels[re+1],this.pixels[re+2])}static getUnpackVector(y){return B_[y]}get unpackVector(){return B_[this.encoding]}_idx(y,I){if(y<-1||y>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(y+1)}_unpackMapbox(y,I,ee){return(256*y*256+256*I+ee)/10-1e4}_unpackTerrarium(y,I,ee){return 256*y+I+ee/256-32768}static pack(y,I){const ee=[0,0,0,0],re=Wd.getUnpackVector(I);let ge=Math.floor((y+re[3])/re[2]);return ee[2]=ge%256,ge=Math.floor(ge/256),ee[1]=ge%256,ge=Math.floor(ge/256),ee[0]=ge,ee}getPixels(){return new Xo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(y,I,ee){if(this.dim!==y.dim)throw new Error("dem dimension mismatch");let re=I*this.dim,ge=I*this.dim+this.dim,ke=ee*this.dim,Ie=ee*this.dim+this.dim;switch(I){case-1:re=ge-1;break;case 1:ge=re+1}switch(ee){case-1:ke=Ie-1;break;case 1:Ie=ke+1}const $e=-I*this.dim,Le=-ee*this.dim;for(let Ve=ke;Ve<Ie;Ve++)for(let We=re;We<ge;We++){const Ze=4*this._idx(We,Ve),tt=4*this._idx(We+$e,Ve+Le);this.pixels[Ze+0]=y.pixels[tt+0],this.pixels[Ze+1]=y.pixels[tt+1],this.pixels[Ze+2]=y.pixels[tt+2],this.pixels[Ze+3]=y.pixels[tt+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ur(Wd,"DEMData"),ur(D_,"DemMinMaxQuadTree",{omit:["dem"]});class ny{constructor(y,I){this.max=y,this.onRemove=I,this.reset()}reset(){for(const y in this.data)for(const I of this.data[y])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(y,I,ee){const re=y.wrapped().key;this.data[re]===void 0&&(this.data[re]=[]);const ge={value:I,timeout:void 0};if(ee!==void 0&&(ge.timeout=setTimeout(()=>{this.remove(y,ge)},ee)),this.data[re].push(ge),this.order.push(re),this.order.length>this.max){const ke=this._getAndRemoveByKey(this.order[0]);ke&&this.onRemove(ke)}return this}has(y){return y.wrapped().key in this.data}getAndRemove(y){return this.has(y)?this._getAndRemoveByKey(y.wrapped().key):null}_getAndRemoveByKey(y){const I=this.data[y].shift();return I.timeout&&clearTimeout(I.timeout),this.data[y].length===0&&delete this.data[y],this.order.splice(this.order.indexOf(y),1),I.value}getByKey(y){const I=this.data[y];return I?I[0].value:null}get(y){return this.has(y)?this.data[y.wrapped().key][0].value:null}remove(y,I){if(!this.has(y))return this;const ee=y.wrapped().key,re=I===void 0?0:this.data[ee].indexOf(I),ge=this.data[ee][re];return this.data[ee].splice(re,1),ge.timeout&&clearTimeout(ge.timeout),this.data[ee].length===0&&delete this.data[ee],this.onRemove(ge.value),this.order.splice(this.order.indexOf(ee),1),this}setMaxSize(y){for(this.max=y;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(y){const I=[];for(const ee in this.data)for(const re of this.data[ee])y(re.value)||I.push(re);for(const ee of I)this.remove(ee.value.tileID,ee)}}class Xu{constructor(y,I,ee){this.func=y,this.mask=I,this.range=ee}}Xu.ReadOnly=!1,Xu.ReadWrite=!0,Xu.disabled=new Xu(519,Xu.ReadOnly,[0,1]);const Np=7680;class jp{constructor(y,I,ee,re,ge,ke){this.test=y,this.ref=I,this.mask=ee,this.fail=re,this.depthFail=ge,this.pass=ke}}jp.disabled=new jp({func:519,mask:0},0,0,Np,Np,Np);class ws{constructor(y,I,ee){this.blendFunction=y,this.blendColor=I,this.mask=ee}}ws.Replace=[1,0],ws.disabled=new ws(ws.Replace,ii.transparent,[!1,!1,!1,!1]),ws.unblended=new ws(ws.Replace,ii.transparent,[!0,!0,!0,!0]),ws.alphaBlended=new ws([1,771],ii.transparent,[!0,!0,!0,!0]);const Up=1029,Vp=2305;class Za{constructor(y,I,ee){this.enable=y,this.mode=I,this.frontFace=ee}}Za.disabled=new Za(!1,Up,Vp),Za.backCCW=new Za(!0,Up,Vp),Za.backCW=new Za(!0,Up,2304),Za.frontCW=new Za(!0,1028,2304),Za.frontCCW=new Za(!0,1028,Vp);class Xc extends xr{constructor(y,I,ee){super(),this.id=y,this._onlySymbols=ee,I.on("data",re=>{re.dataType==="source"&&re.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&re.dataType==="source"&&re.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),I.on("error",()=>{this._sourceErrored=!0}),this._source=I,this._tiles={},this._cache=new ny(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=I.minTileCacheSize,this._maxTileCacheSize=I.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new ty,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(y){this.map=y,this._minTileCacheSize=this._minTileCacheSize===void 0&&y?y._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&y?y._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const y in this._tiles){const I=this._tiles[y];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const y=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,y&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(y,I){return y.isSymbolTile=this._onlySymbols,this._source.loadTile(y,I)}_unloadTile(y){if(this._source.unloadTile)return this._source.unloadTile(y,()=>{})}_abortTile(y){if(this._source.abortTile)return this._source.abortTile(y,()=>{})}serialize(){return this._source.serialize()}prepare(y){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const I in this._tiles){const ee=this._tiles[I];this._source.prepareTile(ee)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,ee.tileID),ee.upload(y),ee.prepare(this.map.style.imageManager)}else for(const I in this._tiles){const ee=this._tiles[I];ee.upload(y),ee.prepare(this.map.style.imageManager)}}getIds(){return Mt(this._tiles).map(y=>y.tileID).sort(F_).map(y=>y.key)}getRenderableIds(y){const I=[];for(const ee in this._tiles)this._isIdRenderable(+ee,y)&&I.push(this._tiles[ee]);return y?I.sort((ee,re)=>{const ge=ee.tileID,ke=re.tileID,Ie=new xe(ge.canonical.x,ge.canonical.y)._rotate(this.transform.angle),$e=new xe(ke.canonical.x,ke.canonical.y)._rotate(this.transform.angle);return ge.overscaledZ-ke.overscaledZ||$e.y-Ie.y||$e.x-Ie.x}).map(ee=>ee.tileID.key):I.map(ee=>ee.tileID).sort(F_).map(ee=>ee.key)}hasRenderableParent(y){const I=this.findLoadedParent(y,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(y,I){return this._tiles[y]&&this._tiles[y].hasData()&&!this._coveredTiles[y]&&(I||!this._tiles[y].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const y in this._tiles)this._tiles[y].state!=="errored"&&this._reloadTile(+y,"reloading")}}_reloadTile(y,I){const ee=this._tiles[y];ee&&(ee.state!=="loading"&&(ee.state=I),this._loadTile(ee,this._tileLoaded.bind(this,ee,y,I)))}_tileLoaded(y,I,ee,re){if(re)if(y.state="errored",re.status!==404)this._source.fire(new ni(re,{tile:y}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const ge=this.map.painter.terrain;this.update(this.transform,ge.getScaledDemTileSize(),!0),ge.resetTileLookupCache(this.id)}else this.update(this.transform);else y.timeAdded=$n.now(),ee==="expired"&&(y.refreshedUponExpiration=!0),this._setTileReloadTimer(I,y),this._source.type==="raster-dem"&&y.dem&&this._backfillDEM(y),this._state.initializeTileState(y,this.map?this.map.painter:null),this._source.fire(new ai("data",{dataType:"source",tile:y,coord:y.tileID,sourceCacheId:this.id}))}_backfillDEM(y){const I=this.getRenderableIds();for(let re=0;re<I.length;re++){const ge=I[re];if(y.neighboringTiles&&y.neighboringTiles[ge]){const ke=this.getTileByID(ge);ee(y,ke),ee(ke,y)}}function ee(re,ge){if(!re.dem||re.dem.borderReady)return;re.needsHillshadePrepare=!0,re.needsDEMTextureUpload=!0;let ke=ge.tileID.canonical.x-re.tileID.canonical.x;const Ie=ge.tileID.canonical.y-re.tileID.canonical.y,$e=Math.pow(2,re.tileID.canonical.z),Le=ge.tileID.key;ke===0&&Ie===0||Math.abs(Ie)>1||(Math.abs(ke)>1&&(Math.abs(ke+$e)===1?ke+=$e:Math.abs(ke-$e)===1&&(ke-=$e)),ge.dem&&re.dem&&(re.dem.backfillBorder(ge.dem,ke,Ie),re.neighboringTiles&&re.neighboringTiles[Le]&&(re.neighboringTiles[Le].backfilled=!0)))}}getTile(y){return this.getTileByID(y.key)}getTileByID(y){return this._tiles[y]}_retainLoadedChildren(y,I,ee,re){for(const ge in this._tiles){let ke=this._tiles[ge];if(re[ge]||!ke.hasData()||ke.tileID.overscaledZ<=I||ke.tileID.overscaledZ>ee)continue;let Ie=ke.tileID;for(;ke&&ke.tileID.overscaledZ>I+1;){const Le=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);ke=this._tiles[Le.key],ke&&ke.hasData()&&(Ie=Le)}let $e=Ie;for(;$e.overscaledZ>I;)if($e=$e.scaledTo($e.overscaledZ-1),y[$e.key]){re[Ie.key]=Ie;break}}}findLoadedParent(y,I){if(y.key in this._loadedParentTiles){const ee=this._loadedParentTiles[y.key];return ee&&ee.tileID.overscaledZ>=I?ee:null}for(let ee=y.overscaledZ-1;ee>=I;ee--){const re=y.scaledTo(ee),ge=this._getLoadedTile(re);if(ge)return ge}}_getLoadedTile(y){const I=this._tiles[y.key];return I&&I.hasData()?I:this._cache.getByKey(this._source.reparseOverscaled?y.wrapped().key:y.canonical.key)}updateCacheSize(y,I){I=I||this._source.tileSize;const ee=Math.ceil(y.width/I)+1,re=Math.ceil(y.height/I)+1,ge=Math.floor(ee*re*5),ke=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,ge):ge,Ie=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ke):ke;this._cache.setMaxSize(Ie)}handleWrapJump(y){const I=Math.round((y-(this._prevLng===void 0?y:this._prevLng))/360);if(this._prevLng=y,I){const ee={};for(const re in this._tiles){const ge=this._tiles[re];ge.tileID=ge.tileID.unwrapTo(ge.tileID.wrap+I),ee[ge.tileID.key]=ge}this._tiles=ee;for(const re in this._timers)clearTimeout(this._timers[re]),delete this._timers[re];for(const re in this._tiles)this._setTileReloadTimer(+re,this._tiles[re])}}update(y,I,ee){if(this.transform=y,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!ee)return;let re;this.updateCacheSize(y,I),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?re=y.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ie=>new Co(Ie.canonical.z,Ie.wrap,Ie.canonical.z,Ie.canonical.x,Ie.canonical.y)):(re=y.coveringTiles({tileSize:I||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!ee,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(re=re.filter(Ie=>this._source.hasTile(Ie)))):re=[];const ge=this._updateRetainedTiles(re);if(N_(this._source.type)&&re.length!==0){const Ie={},$e={},Le=Object.keys(ge);for(const We of Le){const Ze=ge[We],tt=this._tiles[We];if(!tt||tt.fadeEndTime&&tt.fadeEndTime<=$n.now())continue;const ot=this.findLoadedParent(Ze,Math.max(Ze.overscaledZ-Xc.maxOverzooming,this._source.minzoom));ot&&(this._addTile(ot.tileID),Ie[ot.tileID.key]=ot.tileID),$e[We]=Ze}const Ve=re[re.length-1].overscaledZ;for(const We in this._tiles){const Ze=this._tiles[We];if(ge[We]||!Ze.hasData())continue;let tt=Ze.tileID;for(;tt.overscaledZ>Ve;){tt=tt.scaledTo(tt.overscaledZ-1);const ot=this._tiles[tt.key];if(ot&&ot.hasData()&&$e[tt.key]){ge[We]=Ze.tileID;break}}}for(const We in Ie)ge[We]||(this._coveredTiles[We]=!0,ge[We]=Ie[We])}for(const Ie in ge)this._tiles[Ie].clearFadeHold();const ke=function(Ie,$e){const Le=[];for(const Ve in Ie)Ve in $e||Le.push(Ve);return Le}(this._tiles,ge);for(const Ie of ke){const $e=this._tiles[Ie];$e.hasSymbolBuckets&&!$e.holdingForFade()?$e.setHoldDuration(this.map._fadeDuration):$e.hasSymbolBuckets&&!$e.symbolFadeFinished()||this._removeTile(+Ie)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const y in this._tiles)this._tiles[y].holdingForFade()&&this._removeTile(+y)}_updateRetainedTiles(y){const I={};if(y.length===0)return I;const ee={},re=y.reduce((Le,Ve)=>Math.min(Le,Ve.overscaledZ),1/0),ge=y[0].overscaledZ,ke=Math.max(ge-Xc.maxOverzooming,this._source.minzoom),Ie=Math.max(ge+Xc.maxUnderzooming,this._source.minzoom),$e={};for(const Le of y){const Ve=this._addTile(Le);I[Le.key]=Le,Ve.hasData()||re<this._source.maxzoom&&($e[Le.key]=Le)}this._retainLoadedChildren($e,re,Ie,I);for(const Le of y){let Ve=this._tiles[Le.key];if(Ve.hasData())continue;if(Le.canonical.z>=this._source.maxzoom){const Ze=Le.children(this._source.maxzoom)[0],tt=this.getTile(Ze);if(tt&&tt.hasData()){I[Ze.key]=Ze;continue}}else{const Ze=Le.children(this._source.maxzoom);if(I[Ze[0].key]&&I[Ze[1].key]&&I[Ze[2].key]&&I[Ze[3].key])continue}let We=Ve.wasRequested();for(let Ze=Le.overscaledZ-1;Ze>=ke;--Ze){const tt=Le.scaledTo(Ze);if(ee[tt.key]||(ee[tt.key]=!0,Ve=this.getTile(tt),!Ve&&We&&(Ve=this._addTile(tt)),Ve&&(I[tt.key]=tt,We=Ve.wasRequested(),Ve.hasData())))break}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const y in this._tiles){const I=[];let ee,re=this._tiles[y].tileID;for(;re.overscaledZ>0;){if(re.key in this._loadedParentTiles){ee=this._loadedParentTiles[re.key];break}I.push(re.key);const ge=re.scaledTo(re.overscaledZ-1);if(ee=this._getLoadedTile(ge),ee)break;re=ge}for(const ge of I)this._loadedParentTiles[ge]=ee}}_addTile(y){let I=this._tiles[y.key];if(I)return this._source.prepareTile&&this._source.prepareTile(I),I;I=this._cache.getAndRemove(y),I&&(this._setTileReloadTimer(y.key,I),I.tileID=y,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[y.key]&&(clearTimeout(this._cacheTimers[y.key]),delete this._cacheTimers[y.key],this._setTileReloadTimer(y.key,I)));const ee=Boolean(I);if(!ee){const re=this.map?this.map.painter:null;I=new Fp(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,re,this._isRaster),this._source.prepareTile&&this._source.prepareTile(I)||this._loadTile(I,this._tileLoaded.bind(this,I,y.key,I.state))}return I?(I.uses++,this._tiles[y.key]=I,ee||this._source.fire(new ai("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null}_setTileReloadTimer(y,I){y in this._timers&&(clearTimeout(this._timers[y]),delete this._timers[y]);const ee=I.getExpiryTimeout();ee&&(this._timers[y]=setTimeout(()=>{this._reloadTile(y,"expired"),delete this._timers[y]},ee))}_removeTile(y){const I=this._tiles[y];I&&(I.uses--,delete this._tiles[y],this._timers[y]&&(clearTimeout(this._timers[y]),delete this._timers[y]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const y in this._tiles)this._removeTile(+y);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(y,I,ee){const re=[],ge=this.transform;if(!ge)return re;const ke=ge.projection.name==="globe",Ie=xa(ge.center.lng);for(const $e in this._tiles){const Le=this._tiles[$e];if(ee&&Le.clearQueryDebugViz(),Le.holdingForFade())continue;let Ve;if(ke){const We=Le.tileID.canonical;if(We.z===0){const Ze=[Math.abs(Ke(Ie,...qh(We,-1))-Ie),Math.abs(Ke(Ie,...qh(We,1))-Ie)];Ve=[0,2*Ze.indexOf(Math.min(...Ze))-1]}else{const Ze=[Math.abs(Ke(Ie,...qh(We,-1))-Ie),Math.abs(Ke(Ie,...qh(We,0))-Ie),Math.abs(Ke(Ie,...qh(We,1))-Ie)];Ve=[Ze.indexOf(Math.min(...Ze))-1]}}else Ve=[0];for(const We of Ve){const Ze=y.containsTile(Le,ge,I,We);Ze&&re.push(Ze)}}return re}getVisibleCoordinates(y){const I=this.getRenderableIds(y).map(ee=>this._tiles[ee].tileID);for(const ee of I)ee.projMatrix=this.transform.calculateProjMatrix(ee.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(N_(this._source.type))for(const y in this._tiles){const I=this._tiles[y];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=$n.now())return!0}return!1}setFeatureState(y,I,ee){this._state.updateState(y=y||"_geojsonTileLayer",I,ee)}removeFeatureState(y,I,ee){this._state.removeFeatureState(y=y||"_geojsonTileLayer",I,ee)}getFeatureState(y,I){return this._state.getState(y=y||"_geojsonTileLayer",I)}setDependencies(y,I,ee){const re=this._tiles[y];re&&re.setDependencies(I,ee)}reloadTilesForDependencies(y,I){for(const ee in this._tiles)this._tiles[ee].hasDependency(y,I)&&this._reloadTile(+ee,"reloading");this._cache.filter(ee=>!ee.hasDependency(y,I))}_preloadTiles(y,I){const ee=new Map,re=Array.isArray(y)?y:[y],ge=this.map.painter.terrain,ke=this.usedForTerrain&&ge?ge.getScaledDemTileSize():this._source.tileSize;for(const Ie of re){const $e=Ie.coveringTiles({tileSize:ke,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Le of $e)ee.set(Le.key,Le);this.usedForTerrain&&Ie.updateElevation(!1)}pt(Array.from(ee.values()),(Ie,$e)=>{const Le=new Fp(Ie,this._source.tileSize*Ie.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Le,Ve=>{this._source.type==="raster-dem"&&Le.dem&&this._backfillDEM(Le),$e(Ve,Le)})},I)}}function F_($,y){const I=Math.abs(2*$.wrap)-+($.wrap<0),ee=Math.abs(2*y.wrap)-+(y.wrap<0);return $.overscaledZ-y.overscaledZ||ee-I||y.canonical.y-$.canonical.y||y.canonical.x-$.canonical.x}function N_($){return $==="raster"||$==="image"||$==="video"}function qh($,y){const I=1<<$.z;return[$.x/I+y,($.x+1)/I+y]}Xc.maxOverzooming=10,Xc.maxUnderzooming=3;class Zd{constructor(y,I,ee){this._demTile=y,this._dem=this._demTile.dem,this._scale=I,this._offset=ee}static create(y,I,ee){const re=ee||y.findDEMTileFor(I);if(!re||!re.dem)return;const ge=re.dem,ke=re.tileID,Ie=1<<I.canonical.z-ke.canonical.z;return new Zd(re,re.tileSize/kr/Ie,[(I.canonical.x/Ie-ke.canonical.x)*ge.dim,(I.canonical.y/Ie-ke.canonical.y)*ge.dim])}tileCoordToPixel(y,I){const ee=I*this._scale+this._offset[1],re=Math.floor(y*this._scale+this._offset[0]),ge=Math.floor(ee);return new xe(re,ge)}getElevationAt(y,I,ee,re){const ge=y*this._scale+this._offset[0],ke=I*this._scale+this._offset[1],Ie=Math.floor(ge),$e=Math.floor(ke),Le=this._dem;return re=!!re,ee?Wr(Wr(Le.get(Ie,$e,re),Le.get(Ie,$e+1,re),ke-$e),Wr(Le.get(Ie+1,$e,re),Le.get(Ie+1,$e+1,re),ke-$e),ge-Ie):Le.get(Ie,$e,re)}getElevationAtPixel(y,I,ee){return this._dem.get(y,I,!!ee)}getMeterToDEM(y){return(1<<this._demTile.tileID.canonical.z)*Lo(1,y)*this._dem.stride}}class j_{constructor(y,I){this.tileID=y,this.x=y.canonical.x,this.y=y.canonical.y,this.z=y.canonical.z,this.grid=new za(kr,16,0),this.featureIndexArray=new _h,this.promoteId=I}insert(y,I,ee,re,ge,ke=0){const Ie=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ee,re,ge,ke);const $e=this.grid;for(let Le=0;Le<I.length;Le++){const Ve=I[Le],We=[1/0,1/0,-1/0,-1/0];for(let Ze=0;Ze<Ve.length;Ze++){const tt=Ve[Ze];We[0]=Math.min(We[0],tt.x),We[1]=Math.min(We[1],tt.y),We[2]=Math.max(We[2],tt.x),We[3]=Math.max(We[3],tt.y)}We[0]<kr&&We[1]<kr&&We[2]>=0&&We[3]>=0&&$e.insert(Ie,We[0],We[1],We[2],We[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Wc.VectorTile(new Rh(this.rawTileData)).layers,this.sourceLayerCoder=new k_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const y in this.vtLayers)this.vtFeatures[y]=[]}return this.vtLayers}query(y,I,ee,re){this.loadVTLayers();const ge=y.params||{},ke=Ks(ge.filter),Ie=y.tileResult,$e=y.transform,Le=Ie.bufferedTilespaceBounds,Ve=this.grid.query(Le.min.x,Le.min.y,Le.max.x,Le.max.y,(ot,mt,Tt,Ft)=>Ei(Ie.bufferedTilespaceGeometry,ot,mt,Tt,Ft));Ve.sort(ry);let We=null;$e.elevation&&Ve.length>0&&(We=Zd.create($e.elevation,this.tileID));const Ze={};let tt;for(let ot=0;ot<Ve.length;ot++){const mt=Ve[ot];if(mt===tt)continue;tt=mt;const Tt=this.featureIndexArray.get(mt);let Ft=null;this.loadMatchingFeature(Ze,Tt,ke,ge.layers,ge.availableImages,I,ee,re,(Ht,Nt,qt,Qt=0)=>(Ft||(Ft=vt(Ht,this.tileID.canonical,y.tileTransform)),Nt.queryIntersectsFeature(Ie,Ht,qt,Ft,this.z,y.transform,y.pixelPosMatrix,We,Qt)))}return Ze}loadMatchingFeature(y,I,ee,re,ge,ke,Ie,$e,Le){const{featureIndex:Ve,bucketIndex:We,sourceLayerIndex:Ze,layoutVertexArrayOffset:tt}=I,ot=this.bucketLayerIDs[We];if(re&&!function(Ht,Nt){for(let qt=0;qt<Ht.length;qt++)if(Nt.indexOf(Ht[qt])>=0)return!0;return!1}(re,ot))return;const mt=this.sourceLayerCoder.decode(Ze),Tt=this.vtLayers[mt].feature(Ve);if(ee.needGeometry){const Ht=Ge(Tt,!0);if(!ee.filter(new At(this.tileID.overscaledZ),Ht,this.tileID.canonical))return}else if(!ee.filter(new At(this.tileID.overscaledZ),Tt))return;const Ft=this.getId(Tt,mt);for(let Ht=0;Ht<ot.length;Ht++){const Nt=ot[Ht];if(re&&re.indexOf(Nt)<0)continue;const qt=ke[Nt];if(!qt)continue;let Qt={};Ft!==void 0&&$e&&(Qt=$e.getState(qt.sourceLayer||"_geojsonTileLayer",Ft));const Zt=wt({},Ie[Nt]);Zt.paint=U_(Zt.paint,qt.paint,Tt,Qt,ge),Zt.layout=U_(Zt.layout,qt.layout,Tt,Qt,ge);const An=!Le||Le(Tt,qt,Qt,tt);if(!An)continue;const wn=new S_(Tt,this.z,this.x,this.y,Ft);wn.layer=Zt;let On=y[Nt];On===void 0&&(On=y[Nt]=[]),On.push({featureIndex:Ve,feature:wn,intersectionZ:An})}}lookupSymbolFeatures(y,I,ee,re,ge,ke,Ie,$e){const Le={};this.loadVTLayers();const Ve=Ks(ge);for(const We of y)this.loadMatchingFeature(Le,{bucketIndex:ee,sourceLayerIndex:re,featureIndex:We,layoutVertexArrayOffset:0},Ve,ke,Ie,$e,I);return Le}loadFeature(y){const{featureIndex:I,sourceLayerIndex:ee}=y;this.loadVTLayers();const re=this.sourceLayerCoder.decode(ee),ge=this.vtFeatures[re];if(ge[I])return ge[I];const ke=this.vtLayers[re].feature(I);return ge[I]=ke,ke}hasLayer(y){for(const I of this.bucketLayerIDs)for(const ee of I)if(y===ee)return!0;return!1}getId(y,I){let ee=y.id;return this.promoteId&&(ee=y.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[I]],typeof ee=="boolean"&&(ee=Number(ee))),ee}}function U_($,y,I,ee,re){return xt($,(ge,ke)=>{const Ie=y instanceof Kt?y.get(ke):null;return Ie&&Ie.evaluate?Ie.evaluate(I,ee,re):Ie})}function ry($,y){return y-$}ur(j_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class V_{constructor(y){const I={},ee=[];for(const Ie in y){const $e=y[Ie],Le=I[Ie]={};for(const Ve in $e.glyphs){const We=$e.glyphs[+Ve];if(!We||We.bitmap.width===0||We.bitmap.height===0)continue;const Ze=We.metrics.localGlyph?2:1,tt={x:0,y:0,w:We.bitmap.width+2*Ze,h:We.bitmap.height+2*Ze};ee.push(tt),Le[Ve]=tt}}const{w:re,h:ge}=bp(ee),ke=new sl({width:re||1,height:ge||1});for(const Ie in y){const $e=y[Ie];for(const Le in $e.glyphs){const Ve=$e.glyphs[+Le];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const We=I[Ie][Le],Ze=Ve.metrics.localGlyph?2:1;sl.copy(Ve.bitmap,ke,{x:0,y:0},{x:We.x+Ze,y:We.y+Ze},Ve.bitmap)}}this.image=ke,this.positions=I}}ur(V_,"GlyphAtlas");class iy{constructor(y){this.tileID=new Co(y.tileID.overscaledZ,y.tileID.wrap,y.tileID.canonical.z,y.tileID.canonical.x,y.tileID.canonical.y),this.tileZoom=y.tileZoom,this.uid=y.uid,this.zoom=y.zoom,this.canonical=y.tileID.canonical,this.pixelRatio=y.pixelRatio,this.tileSize=y.tileSize,this.source=y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=y.showCollisionBoxes,this.collectResourceTiming=!!y.collectResourceTiming,this.returnDependencies=!!y.returnDependencies,this.promoteId=y.promoteId,this.enableTerrain=!!y.enableTerrain,this.isSymbolTile=y.isSymbolTile,this.tileTransform=Zc(y.tileID.canonical,y.projection),this.projection=y.projection}parse(y,I,ee,re,ge){this.status="parsing",this.data=y,this.collisionBoxArray=new qo;const ke=new k_(Object.keys(y.layers).sort()),Ie=new j_(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];const $e={},Le=new Bp(256,256),Ve={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Le,availableImages:ee},We=I.familiesBySource[this.source];for(const Qt in We){const Zt=y.layers[Qt];if(!Zt)continue;let An=!1,wn=!1;for(const Sn of We[Qt])Sn[0].type==="symbol"?An=!0:wn=!0;if(this.isSymbolTile===!0&&!An||this.isSymbolTile===!1&&!wn)continue;Zt.version===1&&Dt(`Vector tile source "${this.source}" layer "${Qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const On=ke.encode(Qt),Jn=[];for(let Sn=0;Sn<Zt.length;Sn++){const Bn=Zt.feature(Sn),Vn=Ie.getId(Bn,Qt);Jn.push({feature:Bn,id:Vn,index:Sn,sourceLayerIndex:On})}for(const Sn of We[Qt]){const Bn=Sn[0];this.isSymbolTile!==void 0&&Bn.type==="symbol"!==this.isSymbolTile||Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||Bn.visibility!=="none"&&(Gp(Sn,this.zoom,ee),($e[Bn.id]=Bn.createBucket({index:Ie.bucketLayerIDs.length,layers:Sn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:On,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:ee})).populate(Jn,Ve,this.tileID.canonical,this.tileTransform),Ie.bucketLayerIDs.push(Sn.map(Vn=>Vn.id)))}}let Ze,tt,ot,mt;Le.trim();const Tt={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ft=xt(Ve.glyphDependencies,Qt=>Object.keys(Qt).map(Number));Object.keys(Ft).length?re.send("getGlyphs",{uid:this.uid,stacks:Ft},(Qt,Zt)=>{Ze||(Ze=Qt,tt=Zt,qt.call(this))},void 0,!1,Tt):tt={};const Ht=Object.keys(Ve.iconDependencies);Ht.length?re.send("getImages",{icons:Ht,source:this.source,tileID:this.tileID,type:"icons"},(Qt,Zt)=>{Ze||(Ze=Qt,ot=Zt,qt.call(this))},void 0,!1,Tt):ot={};const Nt=Object.keys(Ve.patternDependencies);function qt(){if(Ze)return ge(Ze);if(tt&&ot&&mt){const Qt=new V_(tt),Zt=new Gf(ot,mt);for(const An in $e){const wn=$e[An];wn instanceof Ql?(Gp(wn.layers,this.zoom,ee),kg(wn,tt,Qt.positions,ot,Zt.iconPositions,this.showCollisionBoxes,ee,this.tileID.canonical,this.tileZoom,this.projection)):wn.hasPattern&&(wn instanceof Md||wn instanceof Ad||wn instanceof Mh)&&(Gp(wn.layers,this.zoom,ee),wn.addFeatures(Ve,this.tileID.canonical,Zt.patternPositions,ee,this.tileTransform))}this.status="done",ge(null,{buckets:Mt($e).filter(An=>!An.isEmpty()),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Qt.image,lineAtlas:Le,imageAtlas:Zt,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?ot:null,glyphPositions:this.returnDependencies?Qt.positions:null})}}Nt.length?re.send("getImages",{icons:Nt,source:this.source,tileID:this.tileID,type:"patterns"},(Qt,Zt)=>{Ze||(Ze=Qt,mt=Zt,qt.call(this))},void 0,!1,Tt):mt={},qt.call(this)}}function Gp($,y,I){const ee=new At(y);for(const re of $)re.recalculate(ee,I)}class G_{constructor(y){this.entries={},this.scheduler=y}request(y,I,ee,re){const ge=this.entries[y]=this.entries[y]||{callbacks:[]};if(ge.result){const[ke,Ie]=ge.result;return this.scheduler?this.scheduler.add(()=>{re(ke,Ie)},I):re(ke,Ie),()=>{}}return ge.callbacks.push(re),ge.cancel||(ge.cancel=ee((ke,Ie)=>{ge.result=[ke,Ie];for(const $e of ge.callbacks)this.scheduler?this.scheduler.add(()=>{$e(ke,Ie)},I):$e(ke,Ie);setTimeout(()=>delete this.entries[y],3e3)})),()=>{ge.result||(ge.callbacks=ge.callbacks.filter(ke=>ke!==re),ge.callbacks.length||(ge.cancel(),delete this.entries[y]))}}}function q_($,y,I){const ee=JSON.stringify($.request);return $.data&&(this.deduped.entries[ee]={result:[null,$.data]}),this.deduped.request(ee,{type:"parseTile",isSymbolTile:$.isSymbolTile,zoom:$.tileZoom},re=>{const ge=_n($.request,(ke,Ie,$e,Le)=>{ke?re(ke):Ie&&re(null,{vectorTile:I?void 0:new Wc.VectorTile(new Rh(Ie)),rawData:Ie,cacheControl:$e,expires:Le})});return()=>{ge.cancel(),re()}},y)}j.ARRAY_TYPE=Zo,j.AUTH_ERR_MSG=un,j.Aabb=Bo,j.Actor=class{constructor($,y,I){this.target=$,this.parent=y,this.mapId=I,this.callbacks={},this.cancelCallbacks={},lt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=on()?$:we,this.scheduler=new Qg}send($,y,I,ee,re=!1,ge){const ke=Math.round(1e18*Math.random()).toString(36).substring(0,10);I&&(I.metadata=ge,this.callbacks[ke]=I);const Ie=Rt(this.globalScope)?void 0:[];return this.target.postMessage({id:ke,type:$,hasCallback:!!I,targetMapId:ee,mustQueue:re,sourceMapId:this.mapId,data:us(y,Ie)},Ie),{cancel:()=>{I&&delete this.callbacks[ke],this.target.postMessage({id:ke,type:"<cancel>",targetMapId:ee,sourceMapId:this.mapId})}}}receive($){const y=$.data,I=y.id;if(I&&(!y.targetMapId||this.mapId===y.targetMapId))if(y.type==="<cancel>"){const ee=this.cancelCallbacks[I];delete this.cancelCallbacks[I],ee&&ee.cancel()}else if(y.mustQueue||on()){const ee=this.callbacks[I];this.cancelCallbacks[I]=this.scheduler.add(()=>this.processTask(I,y),ee&&ee.metadata||{type:"message"})}else this.processTask(I,y)}processTask($,y){if(y.type==="<response>"){const I=this.callbacks[$];delete this.callbacks[$],I&&(y.error?I(el(y.error)):I(null,el(y.data)))}else{const I=Rt(this.globalScope)?void 0:[],ee=y.hasCallback?(ge,ke)=>{delete this.cancelCallbacks[$],this.target.postMessage({id:$,type:"<response>",sourceMapId:this.mapId,error:ge?us(ge):null,data:us(ke,I)},I)}:ge=>{},re=el(y.data);if(this.parent[y.type])this.parent[y.type](y.sourceMapId,re,ee);else if(this.parent.getWorkerSource){const ge=y.type.split(".");this.parent.getWorkerSource(y.sourceMapId,ge[0],re.source)[ge[1]](re,ee)}else ee(new Error(`Could not find function ${y.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},j.CanonicalTileID=Sd,j.Color=ii,j.ColorMode=ws,j.CullFaceMode=Za,j.DEMData=Wd,j.DataConstantProperty=Wt,j.DedupedRequest=G_,j.DepthMode=Xu,j.EXTENT=kr,j.Elevation=class{isDataAvailableAtPoint($){const y=this._source();if(!y||$.y<0||$.y>1)return!1;const I=y.getSource().maxzoom,ee=1<<I,re=Math.floor($.x),ge=Math.floor(($.x-re)*ee),ke=Math.floor($.y*ee),Ie=this.findDEMTileFor(new Co(I,re,I,ge,ke));return!(!Ie||!Ie.dem)}getAtPointOrZero($,y=0){return this.getAtPoint($,y)||0}getAtPoint($,y,I=!0){y==null&&(y=null);const ee=this._source();if(!ee||$.y<0||$.y>1)return y;const re=ee.getSource().maxzoom,ge=1<<re,ke=Math.floor($.x),Ie=$.x-ke,$e=new Co(re,ke,re,Math.floor(Ie*ge),Math.floor($.y*ge)),Le=this.findDEMTileFor($e);if(!Le||!Le.dem)return y;const Ve=Le.dem,We=1<<Le.tileID.canonical.z,Ze=(Ie*We-Le.tileID.canonical.x)*Ve.dim,tt=($.y*We-Le.tileID.canonical.y)*Ve.dim,ot=Math.floor(Ze),mt=Math.floor(tt);return(I?this.exaggeration():1)*Wr(Wr(Ve.get(ot,mt),Ve.get(ot,mt+1),tt-mt),Wr(Ve.get(ot+1,mt),Ve.get(ot+1,mt+1),tt-mt),Ze-ot)}getAtTileOffset($,y,I){const ee=1<<$.canonical.z;return this.getAtPointOrZero(new Xl($.wrap+($.canonical.x+y/kr)/ee,($.canonical.y+I/kr)/ee))}getAtTileOffsetFunc($,y,I,ee){return re=>{const ge=this.getAtTileOffset($,re.x,re.y),ke=ee.upVector($.canonical,re.x,re.y);return Ga(ke,ke,ge*ee.upVectorScale($.canonical,y,I).metersToTile),ke}}getForTilePoints($,y,I,ee){const re=Zd.create(this,$,ee);return!!re&&(y.forEach(ge=>{ge[2]=this.exaggeration()*re.getElevationAt(ge[0],ge[1],I)}),!0)}getMinMaxForTile($){const y=this.findDEMTileFor($);if(!y||!y.dem)return null;const I=y.dem.tree,ee=y.tileID,re=1<<$.canonical.z-ee.canonical.z;let ge=$.canonical.x/re-ee.canonical.x,ke=$.canonical.y/re-ee.canonical.y,Ie=0;for(let $e=0;$e<$.canonical.z-ee.canonical.z&&!I.leaves[Ie];$e++){ge*=2,ke*=2;const Le=2*Math.floor(ke)+Math.floor(ge);Ie=I.childOffsets[Ie]+Le,ge%=1,ke%=1}return{min:this.exaggeration()*I.minimums[Ie],max:this.exaggeration()*I.maximums[Ie]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast($,y,I){throw new Error("Pure virtual method called.")}pointCoordinate($){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor($){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},j.ErrorEvent=ni,j.EvaluationParameters=At,j.Event=ai,j.Evented=xr,j.FillExtrusionBucket=Mh,j.Frustum=up,j.FrustumCorners=cp,j.GLOBE_METERS_TO_ECEF=Ip,j.GLOBE_RADIUS=ul,j.GLOBE_SCALE_MATCH_LATITUDE=45,j.GLOBE_ZOOM_THRESHOLD_MAX=6,j.GLOBE_ZOOM_THRESHOLD_MIN=5,j.GlobeSharedBuffers=class{constructor($){this._createGrid($),this._createPoles($)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const $ of this._poleSegments)$.destroy();for(const $ of this._gridSegments)$.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const $ of this._wireframeSegments)$.destroy()}}_createGrid($){const y=new tr,I=new zr,ee=65;for(let re=0;re<ee;re++)for(let ge=0;ge<ee;ge++)y.emplaceBack(ge,re);this._gridSegments=[];for(let re=0,ge=0;re<Hu.length;re++){const ke=Hu[re];for(let $e=0;$e<ke;$e++)for(let Le=0;Le<64;Le++){const Ve=$e*ee+Le;I.emplaceBack(Ve+1,Ve,Ve+ee),I.emplaceBack(Ve+ee,Ve+ee+1,Ve+1)}const Ie=64*ke*2;this._gridSegments.push(Bi.simpleSegment(0,ge,(ke+1)*ee,Ie)),ge+=Ie}this._gridBuffer=$.createVertexBuffer(y,Dh.members),this._gridIndexBuffer=$.createIndexBuffer(I,!0)}_createPoles($){const y=new zr;for(let re=0;re<=64;re++)y.emplaceBack(0,re+1,re+2);this._poleIndexBuffer=$.createIndexBuffer(y,!0);const I=new Yi,ee=new Yi;this._poleSegments=[];for(let re=0,ge=0;re<5;re++){const ke=360/(1<<re);I.emplaceBack(0,-ul,0,.5,0),ee.emplaceBack(0,-ul,0,.5,1);for(let Ie=0;Ie<=64;Ie++){const $e=Ie/64,Le=Wr(0,ke,$e),[Ve,We,Ze]=Wu(Rg,zg,Le,ul);I.emplaceBack(Ve,We,Ze,$e,0),ee.emplaceBack(Ve,We,Ze,$e,1)}this._poleSegments.push(Bi.simpleSegment(ge,0,66,64)),ge+=66}this._poleNorthVertexBuffer=$.createVertexBuffer(I,u_,!1),this._poleSouthVertexBuffer=$.createVertexBuffer(ee,u_,!1)}getGridBuffers($){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[$]]}getPoleBuffers($){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[$]]}getWirefameBuffers($,y){if(!this._wireframeSegments){const I=new to,ee=64,re=ee+1;this._wireframeSegments=[];for(let ge=0,ke=0;ge<Hu.length;ge++){const Ie=Hu[ge];for(let Le=0;Le<Ie;Le++)for(let Ve=0;Ve<ee;Ve++){const We=Le*re+Ve;I.emplaceBack(We,We+1),I.emplaceBack(We,We+re),I.emplaceBack(We,We+re+1)}const $e=Ie*ee*3;this._wireframeSegments.push(Bi.simpleSegment(0,ke,(Ie+1)*re,$e)),ke+=$e}this._wireframeIndexBuffer=$.createIndexBuffer(I)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[y]]}},j.GlyphManager=Gu,j.ImagePosition=wp,j.LineAtlas=Bp,j.LngLat=ti,j.LngLatBounds=Ua,j.LocalGlyphMode=kp,j.MAX_MERCATOR_LATITUDE=ba,j.MercatorCoordinate=Xl,j.ONE_EM=ho,j.OverscaledTileID=Co,j.Properties=zn,j.RGBAImage=Xo,j.Ray=lp,j.RequestManager=class{constructor($,y,I){this._transformRequestFn=$,this._customAccessToken=y,this._silenceAuthErrors=!!I,this._createSkuToken()}_createSkuToken(){const $=function(){let y="";for(let I=0;I<10;I++)y+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",qn,y].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=$.token,this._skuTokenExpiresAt=$.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest($,y){return this._transformRequestFn&&this._transformRequestFn($,y)||{url:$}}normalizeStyleURL($,y){if(!yn($))return $;const I=mr($);return I.path=`/styles/v1${I.path}`,this._makeAPIURL(I,this._customAccessToken||y)}normalizeGlyphsURL($,y){if(!yn($))return $;const I=mr($);return I.path=`/fonts/v1${I.path}`,this._makeAPIURL(I,this._customAccessToken||y)}normalizeSourceURL($,y,I,ee){if(!yn($))return $;const re=mr($);return re.path=`/v4/${re.authority}.json`,re.params.push("secure"),I&&re.params.push(`language=${I}`),ee&&re.params.push(`worldview=${ee}`),this._makeAPIURL(re,this._customAccessToken||y)}normalizeSpriteURL($,y,I,ee){const re=mr($);return yn($)?(re.path=`/styles/v1${re.path}/sprite${y}${I}`,this._makeAPIURL(re,this._customAccessToken||ee)):(re.path+=`${y}${I}`,Sr(re))}normalizeTileURL($,y,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),$&&!yn($))return $;const ee=mr($);ee.path=ee.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${y||I&&ee.authority!=="raster"&&I===512?"@2x":""}${En.supported?".webp":"$1"}`),ee.authority==="raster"?ee.path=`/${xn.RASTER_URL_PREFIX}${ee.path}`:(ee.path=ee.path.replace(/^.+\/v4\//,"/"),ee.path=`/${xn.TILE_URL_VERSION}${ee.path}`);const re=this._customAccessToken||function(ge){for(const ke of ge){const Ie=ke.match(/^access_token=(.*)$/);if(Ie)return Ie[1]}return null}(ee.params)||xn.ACCESS_TOKEN;return xn.REQUIRE_ACCESS_TOKEN&&re&&this._skuToken&&ee.params.push(`sku=${this._skuToken}`),this._makeAPIURL(ee,re)}canonicalizeTileURL($,y){const I=mr($);if(!I.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!I.path.match(/\.[\w]+$/))return $;let ee="mapbox://";I.path.match(/^\/raster\/v1\//)?ee+=`raster/${I.path.replace(`/${xn.RASTER_URL_PREFIX}/`,"")}`:ee+=`tiles/${I.path.replace(`/${xn.TILE_URL_VERSION}/`,"")}`;let re=I.params;return y&&(re=re.filter(ge=>!ge.match(/^access_token=/))),re.length&&(ee+=`?${re.join("&")}`),ee}canonicalizeTileset($,y){const I=!!y&&yn(y),ee=[];for(const re of $.tiles||[])Rn(re)?ee.push(this.canonicalizeTileURL(re,I)):ee.push(re);return ee}_makeAPIURL($,y){const I="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ee=mr(xn.API_URL);if($.protocol=ee.protocol,$.authority=ee.authority,$.protocol==="http"){const re=$.params.indexOf("secure");re>=0&&$.params.splice(re,1)}if(ee.path!=="/"&&($.path=`${ee.path}${$.path}`),!xn.REQUIRE_ACCESS_TOKEN)return Sr($);if(y=y||xn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!y)throw new Error(`An API access token is required to use Mapbox GL. ${I}`);if(y[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${I}`)}return $.params=$.params.filter(re=>re.indexOf("access_token")===-1),$.params.push(`access_token=${y||""}`),Sr($)}},j.ResourceType=tn,j.SegmentVector=Bi,j.SourceCache=Xc,j.StencilMode=jp,j.StructArrayLayout1ui2=go,j.StructArrayLayout2f1f2i16=oa,j.StructArrayLayout2i4=tr,j.StructArrayLayout2ui4=to,j.StructArrayLayout3f12=vi,j.StructArrayLayout3ui6=zr,j.StructArrayLayout4i8=yr,j.StructArrayLayout5f20=Yi,j.Texture=Gh,j.Tile=Fp,j.Transitionable=$t,j.Uniform1f=Ou,j.Uniform1i=class extends Na{constructor($){super($),this.current=0}set($,y,I){this.fetchUniformLocation($,y)&&this.current!==I&&(this.current=I,this.gl.uniform1i(this.location,I))}},j.Uniform2f=class extends Na{constructor($){super($),this.current=[0,0]}set($,y,I){this.fetchUniformLocation($,y)&&(I[0]===this.current[0]&&I[1]===this.current[1]||(this.current=I,this.gl.uniform2f(this.location,I[0],I[1])))}},j.Uniform3f=class extends Na{constructor($){super($),this.current=[0,0,0]}set($,y,I){this.fetchUniformLocation($,y)&&(I[0]===this.current[0]&&I[1]===this.current[1]&&I[2]===this.current[2]||(this.current=I,this.gl.uniform3f(this.location,I[0],I[1],I[2])))}},j.Uniform4f=od,j.UniformColor=ad,j.UniformMatrix2f=class extends Na{constructor($){super($),this.current=Jd}set($,y,I){if(this.fetchUniformLocation($,y)){for(let ee=0;ee<4;ee++)if(I[ee]!==this.current[ee]){this.current=I,this.gl.uniformMatrix2fv(this.location,!1,I);break}}}},j.UniformMatrix3f=class extends Na{constructor($){super($),this.current=Yd}set($,y,I){if(this.fetchUniformLocation($,y)){for(let ee=0;ee<9;ee++)if(I[ee]!==this.current[ee]){this.current=I,this.gl.uniformMatrix3fv(this.location,!1,I);break}}}},j.UniformMatrix4f=class extends Na{constructor($){super($),this.current=sd}set($,y,I){if(this.fetchUniformLocation($,y)){if(I[12]!==this.current[12]||I[0]!==this.current[0])return this.current=I,void this.gl.uniformMatrix4fv(this.location,!1,I);for(let ee=1;ee<16;ee++)if(I[ee]!==this.current[ee]){this.current=I,this.gl.uniformMatrix4fv(this.location,!1,I);break}}}},j.UnwrappedTileID=Pf,j.ValidationError=cr,j.VectorTileWorkerSource=class extends xr{constructor($,y,I,ee,re){super(),this.actor=$,this.layerIndex=y,this.availableImages=I,this.loadVectorData=re||q_,this.loading={},this.loaded={},this.deduped=new G_($.scheduler),this.isSpriteLoaded=ee,this.scheduler=$.scheduler}loadTile($,y){const I=$.uid,ee=$&&$.request,re=ee&&ee.collectResourceTiming,ge=this.loading[I]=new iy($);ge.abort=this.loadVectorData($,(ke,Ie)=>{const $e=!this.loading[I];if(delete this.loading[I],$e||ke||!Ie)return ge.status="done",$e||(this.loaded[I]=ge),y(ke);const Le=Ie.rawData,Ve={};Ie.expires&&(Ve.expires=Ie.expires),Ie.cacheControl&&(Ve.cacheControl=Ie.cacheControl),ge.vectorTile=Ie.vectorTile||new Wc.VectorTile(new Rh(Le));const We=()=>{ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ze,tt)=>{if(Ze||!tt)return y(Ze);const ot={};if(re){const mt=Pn(ee);mt.length>0&&(ot.resourceTiming=JSON.parse(JSON.stringify(mt)))}y(null,wt({rawTileData:Le.slice(0)},tt,Ve,ot))})};this.isSpriteLoaded?We():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(We,{type:"parseTile",isSymbolTile:$.isSymbolTile,zoom:$.tileZoom}):We()}),this.loaded=this.loaded||{},this.loaded[I]=ge})}reloadTile($,y){const I=this.loaded,ee=$.uid,re=this;if(I&&I[ee]){const ge=I[ee];ge.showCollisionBoxes=$.showCollisionBoxes,ge.enableTerrain=!!$.enableTerrain,ge.projection=$.projection,ge.tileTransform=Zc($.tileID.canonical,$.projection);const ke=(Ie,$e)=>{const Le=ge.reloadCallback;Le&&(delete ge.reloadCallback,ge.parse(ge.vectorTile,re.layerIndex,this.availableImages,re.actor,Le)),y(Ie,$e)};ge.status==="parsing"?ge.reloadCallback=ke:ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,ke):ke())}}abortTile($,y){const I=$.uid,ee=this.loading[I];ee&&(ee.abort&&ee.abort(),delete this.loading[I]),y()}removeTile($,y){const I=this.loaded,ee=$.uid;I&&I[ee]&&delete I[ee],y()}},j.WritingMode=sa,j.ZoomHistory=Oc,j.add=Kl,j.addDynamicAttributes=Gd,j.adjoint=function($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=y[4],Ie=y[5],$e=y[6],Le=y[7],Ve=y[8];return $[0]=ke*Ve-Ie*Le,$[1]=re*Le-ee*Ve,$[2]=ee*Ie-re*ke,$[3]=Ie*$e-ge*Ve,$[4]=I*Ve-re*$e,$[5]=re*ge-I*Ie,$[6]=ge*Le-ke*$e,$[7]=ee*$e-I*Le,$[8]=I*ke-ee*ge,$},j.asyncAll=pt,j.bezier=Fe,j.bindAll=lt,j.boundsAttributes=M_,j.bufferConvexPolygon=function($,y){const I=[];for(let ee=0;ee<$.length;ee++){const re=Qe(ee-1,-1,$.length-1),ge=Qe(ee+1,-1,$.length-1),ke=$[ee],Ie=$[ge],$e=$[re].sub(ke).unit(),Le=Ie.sub(ke).unit(),Ve=Le.angleWithSep($e.x,$e.y),We=$e.add(Le).unit().mult(-1*y/Math.sin(Ve/2));I.push(ke.add(We))}return I},j.cacheEntryPossiblyAdded=function($){Ut++,Ut>Ta&&($.getActor().send("enforceCacheSizeLimit",No),Ut=0)},j.calculateGlobeLabelMatrix=function($,y){const{x:I,y:ee}=$.point,re=m_(I,ee,$.worldSize/$._pixelsPerMercatorPixel,0,0);return Du(re,re,Rp(vs(y)))},j.calculateGlobeMatrix=function($){const{x:y,y:I}=$.point,{lng:ee,lat:re}=$._center;return m_(y,I,$.worldSize,ee,re)},j.calculateGlobeMercatorMatrix=function($){const y=$.pixelsPerMeter,I=y/Lo(1,$.center.lat),ee=gs(new Float64Array(16));return xh(ee,ee,[$.point.x,$.point.y,0]),Gc(ee,ee,[I,I,y]),Float32Array.from(ee)},j.circumferenceAtLatitude=gh,j.clamp=Ke,j.clearTileCache=function($){const y=Bt(),I=[];for(const ee in xi)y&&I.push(y.delete(ee)),delete xi[ee];$&&Promise.all(I).catch($).then(()=>$())},j.clipLine=n_,j.clone=function($){var y=new Zo(16);return y[0]=$[0],y[1]=$[1],y[2]=$[2],y[3]=$[3],y[4]=$[4],y[5]=$[5],y[6]=$[6],y[7]=$[7],y[8]=$[8],y[9]=$[9],y[10]=$[10],y[11]=$[11],y[12]=$[12],y[13]=$[13],y[14]=$[14],y[15]=$[15],y},j.clone$1=Vt,j.collisionCircleLayout=Jm,j.config=xn,j.conjugate=function($,y){return $[0]=-y[0],$[1]=-y[1],$[2]=-y[2],$[3]=y[3],$},j.create=function(){var $=new Zo(16);return Zo!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[4]=0,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[11]=0,$[12]=0,$[13]=0,$[14]=0),$[0]=1,$[5]=1,$[10]=1,$[15]=1,$},j.create$1=Yp,j.createExpression=rs,j.createLayout=Ln,j.createStyleLayer=function($){return $.type==="custom"?new Xg($):new Yg[$.type]($)},j.cross=sp,j.degToRad=Oe,j.distance=function($,y){return Math.hypot(y[0]-$[0],y[1]-$[1],y[2]-$[2])},j.div=function($,y,I){return $[0]=y[0]/I[0],$[1]=y[1]/I[1],$[2]=y[2]/I[2],$},j.dot=wa,j.ease=Xe,j.easeCubicInOut=De,j.emitValidationErrors=Pc,j.endsWith=ft,j.enforceCacheSizeLimit=function($){for(const y in xi)ct(y),xi[y].then(I=>{I.keys().then(ee=>{for(let re=0;re<ee.length-$;re++)I.delete(ee[re])})})},j.evaluateSizeForFeature=Id,j.evaluateSizeForZoom=Nu,j.evaluateVariableOffset=s_,j.evented=ut,j.exactEquals=function($,y){return $[0]===y[0]&&$[1]===y[1]&&$[2]===y[2]&&$[3]===y[3]},j.exactEquals$1=function($,y){return $[0]===y[0]&&$[1]===y[1]&&$[2]===y[2]},j.exported=$n,j.exported$1=En,j.extend=wt,j.extend$1=fo,j.fillExtrusionHeightLift=Cf,j.filterObject=ht,j.fromMat4=function($,y){return $[0]=y[0],$[1]=y[1],$[2]=y[2],$[3]=y[4],$[4]=y[5],$[5]=y[6],$[6]=y[8],$[7]=y[9],$[8]=y[10],$},j.fromQuat=function($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=I+I,Ie=ee+ee,$e=re+re,Le=I*ke,Ve=ee*ke,We=ee*Ie,Ze=re*ke,tt=re*Ie,ot=re*$e,mt=ge*ke,Tt=ge*Ie,Ft=ge*$e;return $[0]=1-We-ot,$[1]=Ve+Ft,$[2]=Ze-Tt,$[3]=0,$[4]=Ve-Ft,$[5]=1-Le-ot,$[6]=tt+mt,$[7]=0,$[8]=Ze+Tt,$[9]=tt-mt,$[10]=1-Le-We,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$},j.fromRotation=function($,y){var I=Math.sin(y),ee=Math.cos(y);return $[0]=ee,$[1]=I,$[2]=0,$[3]=-I,$[4]=ee,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$},j.fromScaling=Jp,j.furthestTileCorner=function($){const y=Math.round(($+45+360)%360/90)%4;return Ue[y]},j.getAABBPointSquareDist=function($,y,I){let ee=0;for(let re=0;re<2;++re){const ge=I?I[re]:0;$[re]>ge&&(ee+=($[re]-ge)*($[re]-ge)),y[re]<ge&&(ee+=(ge-y[re])*(ge-y[re]))}return ee},j.getAnchorAlignment=Ap,j.getAnchorJustification=Cp,j.getBounds=function($){let y=1/0,I=1/0,ee=-1/0,re=-1/0;for(const ge of $)y=Math.min(y,ge.x),I=Math.min(I,ge.y),ee=Math.max(ee,ge.x),re=Math.max(re,ge.y);return{min:new xe(y,I),max:new xe(ee,re)}},j.getColumn=hn,j.getGridMatrix=function($,y,I){const ee=y.getNorth(),re=y.getSouth(),ge=y.getWest(),ke=.015625;return[0,(y.getEast()-ge)*ke,1<<$.z,(re-ee)/Hu[I],0,$.y,ee,ge,ke]},j.getImage=Tr,j.getJSON=function($,y){return nn(wt($,{type:"json"}),y)},j.getLatitudinalLod=function($){const y=80.051129;$=Ke($,-80.051129,y)/y*90;const I=Math.pow(Math.abs(Math.sin(Oe($))),3);return Math.round(I*(Hu.length-1))},j.getMapSessionAPI=Li,j.getPerformanceMeasurement=Pn,j.getProjection=T_,j.getRTLTextPluginStatus=gt,j.getReferrer=dn,j.getTilePoint=function($,{x:y,y:I},ee=0){return new xe(((y-ee)*$.scale-$.x)*kr,(I*$.scale-$.y)*kr)},j.getTileVec3=function($,y,I=0){return Lu(((y.x-I)*$.scale-$.x)*kr,(y.y*$.scale-$.y)*kr,hd(y.z,y.y))},j.getVideo=function($,y){const I=we.document.createElement("video");I.muted=!0,I.onloadstart=function(){y(null,I)};for(let ee=0;ee<$.length;ee++){const re=we.document.createElement("source");Hn($[ee])||(I.crossOrigin="Anonymous"),re.src=$[ee],I.appendChild(re)}return{cancel:()=>{}}},j.globeCenterToScreenPoint=function($){const y=[0,0,0],I=gs(new Float64Array(16));return Du(I,$.pixelMatrix,$.globeMatrix),Zi(y,y,I),new xe(y[0],y[1])},j.globeDenormalizeECEF=Rp,j.globeECEFOrigin=function($,y){const I=[0,0,0];return Zi(I,I,Bh(vs(y.canonical))),Zi(I,I,$),I},j.globeNormalizeECEF=Bh,j.globePixelsToTileUnits=function($,y){return kr/(512*Math.pow(2,$))*Fd(vs(y))},j.globePoleMatrixForTile=function($,y,I){const ee=gs(new Float64Array(16)),re=(y/(1<<$)-.5)*Math.PI*2;return yd(ee,I.globeMatrix,re),Float32Array.from(ee)},j.globeTileBounds=vs,j.globeTiltAtLngLat=g_,j.globeToMercatorTransition=Fh,j.globeUseCustomAntiAliasing=function($,y,I){const ee=Fh(I.zoom),re=$.style.map._antialias,ge=!!y.extStandardDerivatives,ke=y.extStandardDerivativesForceOff||$.terrain&&$.terrain.exaggeration()>0;return ee===0&&!re&&!ke&&ge},j.identity=gs,j.identity$1=af,j.invert=tp,j.isFullscreen=function(){return!!we.document.fullscreenElement||!!we.document.webkitFullscreenElement},j.isLngLatBehindGlobe=function($,y){return g_($,y)>Math.PI/2*1.01},j.isMapAuthenticated=function($){return Ai.has($)},j.isMapboxURL=yn,j.isSafariWithAntialiasingBug=function($){const y=$.navigator?$.navigator.userAgent:null;return!!Rt($)&&y&&(y.match("Version/15.4")||y.match("Version/15.5")||y.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},j.latFromMercatorY=Ji,j.len=im,j.length=bh,j.length$1=function($){return Math.hypot($[0],$[1],$[2],$[3])},j.loadVectorTile=q_,j.makeRequest=nn,j.mapValue=function($,y,I,ee,re){return Ke(($-y)/(I-y)*(re-ee)+ee,ee,re)},j.mercatorScale=dd,j.mercatorXfromLng=xa,j.mercatorYfromLat=Va,j.mercatorZfromAltitude=Lo,j.mul=nm,j.mul$1=rm,j.multiply=Du,j.multiply$1=function($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=y[4],$e=y[5],Le=y[6],Ve=y[7],We=y[8],Ze=I[0],tt=I[1],ot=I[2],mt=I[3],Tt=I[4],Ft=I[5],Ht=I[6],Nt=I[7],qt=I[8];return $[0]=Ze*ee+tt*ke+ot*Le,$[1]=Ze*re+tt*Ie+ot*Ve,$[2]=Ze*ge+tt*$e+ot*We,$[3]=mt*ee+Tt*ke+Ft*Le,$[4]=mt*re+Tt*Ie+Ft*Ve,$[5]=mt*ge+Tt*$e+Ft*We,$[6]=Ht*ee+Nt*ke+qt*Le,$[7]=Ht*re+Nt*Ie+qt*Ve,$[8]=Ht*ge+Nt*$e+qt*We,$},j.multiply$2=tf,j.nextPowerOfTwo=it,j.normalize=So,j.normalize$1=function($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=I*I+ee*ee+re*re+ge*ge;return ke>0&&(ke=1/Math.sqrt(ke)),$[0]=I*ke,$[1]=ee*ke,$[2]=re*ke,$[3]=ge*ke,$},j.number=Wr,j.ortho=function($,y,I,ee,re,ge,ke){var Ie=1/(y-I),$e=1/(ee-re),Le=1/(ge-ke);return $[0]=-2*Ie,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=-2*$e,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=2*Le,$[11]=0,$[12]=(y+I)*Ie,$[13]=(re+ee)*$e,$[14]=(ke+ge)*Le,$[15]=1,$},j.pbf=Rh,j.perspective=function($,y,I,ee,re){var ge,ke=1/Math.tan(y/2);return $[0]=ke/I,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=ke,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[11]=-1,$[12]=0,$[13]=0,$[15]=0,re!=null&&re!==1/0?($[10]=(re+ee)*(ge=1/(ee-re)),$[14]=2*re*ee*ge):($[10]=-1,$[14]=-2*ee),$},j.pick=function($,y){const I={};for(let ee=0;ee<y.length;ee++){const re=y[ee];re in $&&(I[re]=$[re])}return I},j.plugin=kt,j.pointGeometry=xe,j.polygonContainsPoint=li,j.polygonIntersectsBox=Ei,j.polygonIntersectsPolygon=cn,j.polygonizeBounds=function($,y,I=0,ee=!0){const re=new xe(I,I),ge=$.sub(re),ke=y.add(re),Ie=[ge,new xe(ke.x,ge.y),ke,new xe(ge.x,ke.y)];return ee&&Ie.push(ge.clone()),Ie},j.posAttributes=Dh,j.postMapLoadEvent=Ur,j.postTurnstileEvent=Fr,j.potpack=bp,j.prevPowerOfTwo=function($){return $<=1?1:Math.pow(2,Math.floor(Math.log($)/Math.LN2))},j.radToDeg=ze,j.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],j.registerForPluginStateChange=function($){return $({pluginStatus:Ne,pluginURL:qe}),ut.on("pluginStateChange",$),$},j.removeAuthState=function($){Ai.delete($)},j.renderColorRamp=dp,j.resample=pd,j.rotateX=np,j.rotateX$1=sf,j.rotateY=yd,j.rotateY$1=lf,j.rotateZ=function($,y,I){var ee=Math.sin(I),re=Math.cos(I),ge=y[0],ke=y[1],Ie=y[2],$e=y[3],Le=y[4],Ve=y[5],We=y[6],Ze=y[7];return y!==$&&($[8]=y[8],$[9]=y[9],$[10]=y[10],$[11]=y[11],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[0]=ge*re+Le*ee,$[1]=ke*re+Ve*ee,$[2]=Ie*re+We*ee,$[3]=$e*re+Ze*ee,$[4]=Le*re-ge*ee,$[5]=Ve*re-ke*ee,$[6]=We*re-Ie*ee,$[7]=Ze*re-$e*ee,$},j.rotateZ$1=function($,y,I){I*=.5;var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=Math.sin(I),$e=Math.cos(I);return $[0]=ee*$e+re*Ie,$[1]=re*$e-ee*Ie,$[2]=ge*$e+ke*Ie,$[3]=ke*$e-ge*Ie,$},j.scale=Gc,j.scale$1=rf,j.scale$2=Ga,j.scaleAndAdd=vd,j.setCacheLimits=function($,y){No=$,Ta=y},j.setColumn=function($,y,I){$[4*y+0]=I[0],$[4*y+1]=I[1],$[4*y+2]=I[2],$[4*y+3]=I[3]},j.setRTLTextPlugin=function($,y,I=!1){if(Ne===be||Ne===Pe||Ne===Re)throw new Error("setRTLTextPlugin cannot be called multiple times.");qe=$n.resolveURL($),Ne=be,Be=y,Je(),I||It()},j.smoothstep=He,j.spec=gn,j.storeAuthState=function($,y){y?Ai.add($):Ai.delete($)},j.sub=qa,j.subtract=ip,j.symbolSize=Qm,j.tileAABB=function($,y,I,ee,re,ge,ke,Ie,$e){if($e.name==="globe")return Og($,y,new Sd(I,ee,re));const Le=Zc({z:I,x:ee,y:re},$e);return new Bo([(ge+Le.x/Le.scale)*y,y*(Le.y/Le.scale),ke],[(ge+Le.x2/Le.scale)*y,y*(Le.y2/Le.scale),Ie])},j.tileCornersToBounds=Ld,j.tileTransform=Zc,j.transformMat3=function($,y,I){var ee=y[0],re=y[1],ge=y[2];return $[0]=ee*I[0]+re*I[3]+ge*I[6],$[1]=ee*I[1]+re*I[4]+ge*I[7],$[2]=ee*I[2]+re*I[5]+ge*I[8],$},j.transformMat4=Zi,j.transformMat4$1=qc,j.transformQuat=nf,j.transitionTileAABBinECEF=p_,j.translate=xh,j.transpose=function($,y){if($===y){var I=y[1],ee=y[2],re=y[5];$[1]=y[3],$[2]=y[6],$[3]=I,$[5]=y[7],$[6]=ee,$[7]=re}else $[0]=y[0],$[1]=y[3],$[2]=y[6],$[3]=y[1],$[4]=y[4],$[5]=y[7],$[6]=y[2],$[7]=y[5],$[8]=y[8];return $},j.triggerPluginCompletionEvent=Ye,j.uniqueId=rt,j.updateGlobeVertexNormal=function($,y,I,ee,re){const ge=5*y+2;$.float32[ge+0]=I,$.float32[ge+1]=ee,$.float32[ge+2]=re},j.validateCustomStyleLayer=function($){const y=[],I=$.id;return I===void 0&&y.push({message:`layers.${I}: missing required property "id"`}),$.render===void 0&&y.push({message:`layers.${I}: missing required method "render"`}),$.renderingMode&&$.renderingMode!=="2d"&&$.renderingMode!=="3d"&&y.push({message:`layers.${I}: property "renderingMode" must be either "2d" or "3d"`}),y},j.validateFilter=$=>wo(Ra($)),j.validateFog=$=>wo(Eu($)),j.validateLayer=$=>wo(Dl($)),j.validateLight=$=>wo(wu($)),j.validateSource=$=>wo(bu($)),j.validateStyle=Bl,j.validateTerrain=$=>wo(ls($)),j.values=Mt,j.vectorTile=Wc,j.version=Pt,j.warnOnce=Dt,j.window=we,j.wrap=Qe}),ne(["./shared"],function(j){function we(Bt){if(typeof Bt=="number"||typeof Bt=="boolean"||typeof Bt=="string"||Bt==null)return JSON.stringify(Bt);if(Array.isArray(Bt)){let _t="[";for(const Lt of Bt)_t+=`${we(Lt)},`;return`${_t}]`}let ct="{";for(const _t of Object.keys(Bt).sort())ct+=`${_t}:${we(Bt[_t])},`;return`${ct}}`}function he(Bt){let ct="";for(const _t of j.refProperties)ct+=`/${we(Bt[_t])}`;return ct}class ye{constructor(ct){this.keyCache={},ct&&this.replace(ct)}replace(ct){this._layerConfigs={},this._layers={},this.update(ct,[])}update(ct,_t){for(const Ut of ct)this._layerConfigs[Ut.id]=Ut,(this._layers[Ut.id]=j.createStyleLayer(Ut)).compileFilter(),this.keyCache[Ut.id]&&delete this.keyCache[Ut.id];for(const Ut of _t)delete this.keyCache[Ut],delete this._layerConfigs[Ut],delete this._layers[Ut];this.familiesBySource={};const Lt=function(Ut,tn){const fn={};for(let nn=0;nn<Ut.length;nn++){const _n=tn&&tn[Ut[nn].id]||he(Ut[nn]);tn&&(tn[Ut[nn].id]=_n);let jn=fn[_n];jn||(jn=fn[_n]=[]),jn.push(Ut[nn])}const dn=[];for(const nn in fn)dn.push(fn[nn]);return dn}(j.values(this._layerConfigs),this.keyCache);for(const Ut of Lt){const tn=Ut.map(sr=>this._layers[sr.id]),fn=tn[0];if(fn.visibility==="none")continue;const dn=fn.source||"";let nn=this.familiesBySource[dn];nn||(nn=this.familiesBySource[dn]={});const _n=fn.sourceLayer||"_geojsonTileLayer";let jn=nn[_n];jn||(jn=nn[_n]=[]),jn.push(tn)}}}class xe{loadTile(ct,_t){const{uid:Lt,encoding:Ut,rawImageData:tn,padding:fn,buildQuadTree:dn}=ct,nn=j.window.ImageBitmap&&tn instanceof j.window.ImageBitmap?this.getImageData(tn,fn):tn;_t(null,new j.DEMData(Lt,nn,Ut,fn<1,dn))}getImageData(ct,_t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ct.width,ct.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ct.width,this.offscreenCanvas.height=ct.height,this.offscreenCanvasContext.drawImage(ct,0,0,ct.width,ct.height);const Lt=this.offscreenCanvasContext.getImageData(-_t,-_t,ct.width+2*_t,ct.height+2*_t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Lt}}var Te=function Bt(ct,_t){var Lt,Ut=ct&&ct.type;if(Ut==="FeatureCollection")for(Lt=0;Lt<ct.features.length;Lt++)Bt(ct.features[Lt],_t);else if(Ut==="GeometryCollection")for(Lt=0;Lt<ct.geometries.length;Lt++)Bt(ct.geometries[Lt],_t);else if(Ut==="Feature")Bt(ct.geometry,_t);else if(Ut==="Polygon")Se(ct.coordinates,_t);else if(Ut==="MultiPolygon")for(Lt=0;Lt<ct.coordinates.length;Lt++)Se(ct.coordinates[Lt],_t);return ct};function Se(Bt,ct){if(Bt.length!==0){Ce(Bt[0],ct);for(var _t=1;_t<Bt.length;_t++)Ce(Bt[_t],!ct)}}function Ce(Bt,ct){for(var _t=0,Lt=0,Ut=0,tn=Bt.length,fn=tn-1;Ut<tn;fn=Ut++){var dn=(Bt[Ut][0]-Bt[fn][0])*(Bt[fn][1]+Bt[Ut][1]),nn=_t+dn;Lt+=Math.abs(_t)>=Math.abs(dn)?_t-nn+dn:dn-nn+_t,_t=nn}_t+Lt>=0!=!!ct&&Bt.reverse()}const Oe=j.vectorTile.VectorTileFeature.prototype.toGeoJSON;class ze{constructor(ct){this._feature=ct,this.extent=j.EXTENT,this.type=ct.type,this.properties=ct.tags,"id"in ct&&!isNaN(ct.id)&&(this.id=parseInt(ct.id,10))}loadGeometry(){if(this._feature.type===1){const ct=[];for(const _t of this._feature.geometry)ct.push([new j.pointGeometry(_t[0],_t[1])]);return ct}{const ct=[];for(const _t of this._feature.geometry){const Lt=[];for(const Ut of _t)Lt.push(new j.pointGeometry(Ut[0],Ut[1]));ct.push(Lt)}return ct}}toGeoJSON(ct,_t,Lt){return Oe.call(this,ct,_t,Lt)}}class Ue{constructor(ct){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=j.EXTENT,this.length=ct.length,this._features=ct}feature(ct){return new ze(this._features[ct])}}var De=j.vectorTile.VectorTileFeature,Fe=Xe;function Xe(Bt,ct){this.options=ct||{},this.features=Bt,this.length=Bt.length}function Ke(Bt,ct){this.id=typeof Bt.id=="number"?Bt.id:void 0,this.type=Bt.type,this.rawGeometry=Bt.type===1?[Bt.geometry]:Bt.geometry,this.properties=Bt.tags,this.extent=ct||4096}Xe.prototype.feature=function(Bt){return new Ke(this.features[Bt],this.options.extent)},Ke.prototype.loadGeometry=function(){var Bt=this.rawGeometry;this.geometry=[];for(var ct=0;ct<Bt.length;ct++){for(var _t=Bt[ct],Lt=[],Ut=0;Ut<_t.length;Ut++)Lt.push(new j.pointGeometry(_t[Ut][0],_t[Ut][1]));this.geometry.push(Lt)}return this.geometry},Ke.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Bt=this.geometry,ct=1/0,_t=-1/0,Lt=1/0,Ut=-1/0,tn=0;tn<Bt.length;tn++)for(var fn=Bt[tn],dn=0;dn<fn.length;dn++){var nn=fn[dn];ct=Math.min(ct,nn.x),_t=Math.max(_t,nn.x),Lt=Math.min(Lt,nn.y),Ut=Math.max(Ut,nn.y)}return[ct,Lt,_t,Ut]},Ke.prototype.toGeoJSON=De.prototype.toGeoJSON;var He=pt,Qe=Fe;function pt(Bt){var ct=new j.pbf;return function(_t,Lt){for(var Ut in _t.layers)Lt.writeMessage(3,Mt,_t.layers[Ut])}(Bt,ct),ct.finish()}function Mt(Bt,ct){var _t;ct.writeVarintField(15,Bt.version||1),ct.writeStringField(1,Bt.name||""),ct.writeVarintField(5,Bt.extent||4096);var Lt={keys:[],values:[],keycache:{},valuecache:{}};for(_t=0;_t<Bt.length;_t++)Lt.feature=Bt.feature(_t),ct.writeMessage(2,wt,Lt);var Ut=Lt.keys;for(_t=0;_t<Ut.length;_t++)ct.writeStringField(3,Ut[_t]);var tn=Lt.values;for(_t=0;_t<tn.length;_t++)ct.writeMessage(4,dt,tn[_t])}function wt(Bt,ct){var _t=Bt.feature;_t.id!==void 0&&ct.writeVarintField(1,_t.id),ct.writeMessage(2,bt,Bt),ct.writeVarintField(3,_t.type),ct.writeMessage(4,it,_t)}function bt(Bt,ct){var _t=Bt.feature,Lt=Bt.keys,Ut=Bt.values,tn=Bt.keycache,fn=Bt.valuecache;for(var dn in _t.properties){var nn=_t.properties[dn],_n=tn[dn];if(nn!==null){_n===void 0&&(Lt.push(dn),tn[dn]=_n=Lt.length-1),ct.writeVarint(_n);var jn=typeof nn;jn!=="string"&&jn!=="boolean"&&jn!=="number"&&(nn=JSON.stringify(nn));var sr=jn+":"+nn,Hn=fn[sr];Hn===void 0&&(Ut.push(nn),fn[sr]=Hn=Ut.length-1),ct.writeVarint(Hn)}}}function rt(Bt,ct){return(ct<<3)+(7&Bt)}function nt(Bt){return Bt<<1^Bt>>31}function it(Bt,ct){for(var _t=Bt.loadGeometry(),Lt=Bt.type,Ut=0,tn=0,fn=_t.length,dn=0;dn<fn;dn++){var nn=_t[dn],_n=1;Lt===1&&(_n=nn.length),ct.writeVarint(rt(1,_n));for(var jn=Lt===3?nn.length-1:nn.length,sr=0;sr<jn;sr++){sr===1&&Lt!==1&&ct.writeVarint(rt(2,jn-1));var Hn=nn[sr].x-Ut,wr=nn[sr].y-tn;ct.writeVarint(nt(Hn)),ct.writeVarint(nt(wr)),Ut+=Hn,tn+=wr}Lt===3&&ct.writeVarint(rt(7,1))}}function dt(Bt,ct){var _t=typeof Bt;_t==="string"?ct.writeStringField(1,Bt):_t==="boolean"?ct.writeBooleanField(7,Bt):_t==="number"&&(Bt%1!=0?ct.writeDoubleField(3,Bt):Bt<0?ct.writeSVarintField(6,Bt):ct.writeVarintField(5,Bt))}function lt(Bt,ct,_t,Lt,Ut,tn){if(Ut-Lt<=_t)return;const fn=Lt+Ut>>1;ft(Bt,ct,fn,Lt,Ut,tn%2),lt(Bt,ct,_t,Lt,fn-1,tn+1),lt(Bt,ct,_t,fn+1,Ut,tn+1)}function ft(Bt,ct,_t,Lt,Ut,tn){for(;Ut>Lt;){if(Ut-Lt>600){const _n=Ut-Lt+1,jn=_t-Lt+1,sr=Math.log(_n),Hn=.5*Math.exp(2*sr/3),wr=.5*Math.sqrt(sr*Hn*(_n-Hn)/_n)*(jn-_n/2<0?-1:1);ft(Bt,ct,_t,Math.max(Lt,Math.floor(_t-jn*Hn/_n+wr)),Math.min(Ut,Math.floor(_t+(_n-jn)*Hn/_n+wr)),tn)}const fn=ct[2*_t+tn];let dn=Lt,nn=Ut;for(xt(Bt,ct,Lt,_t),ct[2*Ut+tn]>fn&&xt(Bt,ct,Lt,Ut);dn<nn;){for(xt(Bt,ct,dn,nn),dn++,nn--;ct[2*dn+tn]<fn;)dn++;for(;ct[2*nn+tn]>fn;)nn--}ct[2*Lt+tn]===fn?xt(Bt,ct,Lt,nn):(nn++,xt(Bt,ct,nn,Ut)),nn<=_t&&(Lt=nn+1),_t<=nn&&(Ut=nn-1)}}function xt(Bt,ct,_t,Lt){ht(Bt,_t,Lt),ht(ct,2*_t,2*Lt),ht(ct,2*_t+1,2*Lt+1)}function ht(Bt,ct,_t){const Lt=Bt[ct];Bt[ct]=Bt[_t],Bt[_t]=Lt}function Vt(Bt,ct,_t,Lt){const Ut=Bt-_t,tn=ct-Lt;return Ut*Ut+tn*tn}He.fromVectorTileJs=pt,He.fromGeojsonVt=function(Bt,ct){ct=ct||{};var _t={};for(var Lt in Bt)_t[Lt]=new Fe(Bt[Lt].features,ct),_t[Lt].name=Lt,_t[Lt].version=ct.version,_t[Lt].extent=ct.extent;return pt({layers:_t})},He.GeoJSONWrapper=Qe;const st=Bt=>Bt[0],Dt=Bt=>Bt[1];class ln{constructor(ct,_t=st,Lt=Dt,Ut=64,tn=Float64Array){this.nodeSize=Ut,this.points=ct;const fn=ct.length<65536?Uint16Array:Uint32Array,dn=this.ids=new fn(ct.length),nn=this.coords=new tn(2*ct.length);for(let _n=0;_n<ct.length;_n++)dn[_n]=_n,nn[2*_n]=_t(ct[_n]),nn[2*_n+1]=Lt(ct[_n]);lt(dn,nn,Ut,0,dn.length-1,0)}range(ct,_t,Lt,Ut){return function(tn,fn,dn,nn,_n,jn,sr){const Hn=[0,tn.length-1,0],wr=[];let Er,gr;for(;Hn.length;){const Tr=Hn.pop(),Dr=Hn.pop(),ei=Hn.pop();if(Dr-ei<=sr){for(let xr=ei;xr<=Dr;xr++)Er=fn[2*xr],gr=fn[2*xr+1],Er>=dn&&Er<=_n&&gr>=nn&&gr<=jn&&wr.push(tn[xr]);continue}const ai=Math.floor((ei+Dr)/2);Er=fn[2*ai],gr=fn[2*ai+1],Er>=dn&&Er<=_n&&gr>=nn&&gr<=jn&&wr.push(tn[ai]);const ni=(Tr+1)%2;(Tr===0?dn<=Er:nn<=gr)&&(Hn.push(ei),Hn.push(ai-1),Hn.push(ni)),(Tr===0?_n>=Er:jn>=gr)&&(Hn.push(ai+1),Hn.push(Dr),Hn.push(ni))}return wr}(this.ids,this.coords,ct,_t,Lt,Ut,this.nodeSize)}within(ct,_t,Lt){return function(Ut,tn,fn,dn,nn,_n){const jn=[0,Ut.length-1,0],sr=[],Hn=nn*nn;for(;jn.length;){const wr=jn.pop(),Er=jn.pop(),gr=jn.pop();if(Er-gr<=_n){for(let ni=gr;ni<=Er;ni++)Vt(tn[2*ni],tn[2*ni+1],fn,dn)<=Hn&&sr.push(Ut[ni]);continue}const Tr=Math.floor((gr+Er)/2),Dr=tn[2*Tr],ei=tn[2*Tr+1];Vt(Dr,ei,fn,dn)<=Hn&&sr.push(Ut[Tr]);const ai=(wr+1)%2;(wr===0?fn-nn<=Dr:dn-nn<=ei)&&(jn.push(gr),jn.push(Tr-1),jn.push(ai)),(wr===0?fn+nn>=Dr:dn+nn>=ei)&&(jn.push(Tr+1),jn.push(Er),jn.push(ai))}return sr}(this.ids,this.coords,ct,_t,Lt,this.nodeSize)}}const In={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Bt=>Bt},on=Math.fround||(an=new Float32Array(1),Bt=>(an[0]=+Bt,an[0]));var an;class Xt{constructor(ct){this.options=rn(Object.create(In),ct),this.trees=new Array(this.options.maxZoom+1)}load(ct){const{log:_t,minZoom:Lt,maxZoom:Ut,nodeSize:tn}=this.options;_t&&console.time("total time");const fn=`prepare ${ct.length} points`;_t&&console.time(fn),this.points=ct;let dn=[];for(let nn=0;nn<ct.length;nn++)ct[nn].geometry&&dn.push(en(ct[nn],nn));this.trees[Ut+1]=new ln(dn,bn,Tn,tn,Float32Array),_t&&console.timeEnd(fn);for(let nn=Ut;nn>=Lt;nn--){const _n=+Date.now();dn=this._cluster(dn,nn),this.trees[nn]=new ln(dn,bn,Tn,tn,Float32Array),_t&&console.log("z%d: %d clusters in %dms",nn,dn.length,+Date.now()-_n)}return _t&&console.timeEnd("total time"),this}getClusters(ct,_t){let Lt=((ct[0]+180)%360+360)%360-180;const Ut=Math.max(-90,Math.min(90,ct[1]));let tn=ct[2]===180?180:((ct[2]+180)%360+360)%360-180;const fn=Math.max(-90,Math.min(90,ct[3]));if(ct[2]-ct[0]>=360)Lt=-180,tn=180;else if(Lt>tn){const jn=this.getClusters([Lt,Ut,180,fn],_t),sr=this.getClusters([-180,Ut,tn,fn],_t);return jn.concat(sr)}const dn=this.trees[this._limitZoom(_t)],nn=dn.range(Pn(Lt),Pt(fn),Pn(tn),Pt(Ut)),_n=[];for(const jn of nn){const sr=dn.points[jn];_n.push(sr.numPoints?hn(sr):this.points[sr.index])}return _n}getChildren(ct){const _t=this._getOriginId(ct),Lt=this._getOriginZoom(ct),Ut="No cluster with the specified id.",tn=this.trees[Lt];if(!tn)throw new Error(Ut);const fn=tn.points[_t];if(!fn)throw new Error(Ut);const dn=this.options.radius/(this.options.extent*Math.pow(2,Lt-1)),nn=tn.within(fn.x,fn.y,dn),_n=[];for(const jn of nn){const sr=tn.points[jn];sr.parentId===ct&&_n.push(sr.numPoints?hn(sr):this.points[sr.index])}if(_n.length===0)throw new Error(Ut);return _n}getLeaves(ct,_t,Lt){const Ut=[];return this._appendLeaves(Ut,ct,_t=_t||10,Lt=Lt||0,0),Ut}getTile(ct,_t,Lt){const Ut=this.trees[this._limitZoom(ct)],tn=Math.pow(2,ct),{extent:fn,radius:dn}=this.options,nn=dn/fn,_n=(Lt-nn)/tn,jn=(Lt+1+nn)/tn,sr={features:[]};return this._addTileFeatures(Ut.range((_t-nn)/tn,_n,(_t+1+nn)/tn,jn),Ut.points,_t,Lt,tn,sr),_t===0&&this._addTileFeatures(Ut.range(1-nn/tn,_n,1,jn),Ut.points,tn,Lt,tn,sr),_t===tn-1&&this._addTileFeatures(Ut.range(0,_n,nn/tn,jn),Ut.points,-1,Lt,tn,sr),sr.features.length?sr:null}getClusterExpansionZoom(ct){let _t=this._getOriginZoom(ct)-1;for(;_t<=this.options.maxZoom;){const Lt=this.getChildren(ct);if(_t++,Lt.length!==1)break;ct=Lt[0].properties.cluster_id}return _t}_appendLeaves(ct,_t,Lt,Ut,tn){const fn=this.getChildren(_t);for(const dn of fn){const nn=dn.properties;if(nn&&nn.cluster?tn+nn.point_count<=Ut?tn+=nn.point_count:tn=this._appendLeaves(ct,nn.cluster_id,Lt,Ut,tn):tn<Ut?tn++:ct.push(dn),ct.length===Lt)break}return tn}_addTileFeatures(ct,_t,Lt,Ut,tn,fn){for(const dn of ct){const nn=_t[dn],_n=nn.numPoints;let jn,sr,Hn;if(_n)jn=vn(nn),sr=nn.x,Hn=nn.y;else{const gr=this.points[nn.index];jn=gr.properties,sr=Pn(gr.geometry.coordinates[0]),Hn=Pt(gr.geometry.coordinates[1])}const wr={type:1,geometry:[[Math.round(this.options.extent*(sr*tn-Lt)),Math.round(this.options.extent*(Hn*tn-Ut))]],tags:jn};let Er;_n?Er=nn.id:this.options.generateId?Er=nn.index:this.points[nn.index].id&&(Er=this.points[nn.index].id),Er!==void 0&&(wr.id=Er),fn.features.push(wr)}}_limitZoom(ct){return Math.max(this.options.minZoom,Math.min(+ct,this.options.maxZoom+1))}_cluster(ct,_t){const Lt=[],{radius:Ut,extent:tn,reduce:fn,minPoints:dn}=this.options,nn=Ut/(tn*Math.pow(2,_t));for(let _n=0;_n<ct.length;_n++){const jn=ct[_n];if(jn.zoom<=_t)continue;jn.zoom=_t;const sr=this.trees[_t+1],Hn=sr.within(jn.x,jn.y,nn),wr=jn.numPoints||1;let Er=wr;for(const gr of Hn){const Tr=sr.points[gr];Tr.zoom>_t&&(Er+=Tr.numPoints||1)}if(Er>wr&&Er>=dn){let gr=jn.x*wr,Tr=jn.y*wr,Dr=fn&&wr>1?this._map(jn,!0):null;const ei=(_n<<5)+(_t+1)+this.points.length;for(const ai of Hn){const ni=sr.points[ai];if(ni.zoom<=_t)continue;ni.zoom=_t;const xr=ni.numPoints||1;gr+=ni.x*xr,Tr+=ni.y*xr,ni.parentId=ei,fn&&(Dr||(Dr=this._map(jn,!0)),fn(Dr,this._map(ni)))}jn.parentId=ei,Lt.push(Rt(gr/Er,Tr/Er,ei,Er,Dr))}else if(Lt.push(jn),Er>1)for(const gr of Hn){const Tr=sr.points[gr];Tr.zoom<=_t||(Tr.zoom=_t,Lt.push(Tr))}}return Lt}_getOriginId(ct){return ct-this.points.length>>5}_getOriginZoom(ct){return(ct-this.points.length)%32}_map(ct,_t){if(ct.numPoints)return _t?rn({},ct.properties):ct.properties;const Lt=this.points[ct.index].properties,Ut=this.options.map(Lt);return _t&&Ut===Lt?rn({},Ut):Ut}}function Rt(Bt,ct,_t,Lt,Ut){return{x:on(Bt),y:on(ct),zoom:1/0,id:_t,parentId:-1,numPoints:Lt,properties:Ut}}function en(Bt,ct){const[_t,Lt]=Bt.geometry.coordinates;return{x:on(Pn(_t)),y:on(Pt(Lt)),zoom:1/0,index:ct,parentId:-1}}function hn(Bt){return{type:"Feature",id:Bt.id,properties:vn(Bt),geometry:{type:"Point",coordinates:[(ct=Bt.x,360*(ct-.5)),zt(Bt.y)]}};var ct}function vn(Bt){const ct=Bt.numPoints,_t=ct>=1e4?`${Math.round(ct/1e3)}k`:ct>=1e3?Math.round(ct/100)/10+"k":ct;return rn(rn({},Bt.properties),{cluster:!0,cluster_id:Bt.id,point_count:ct,point_count_abbreviated:_t})}function Pn(Bt){return Bt/360+.5}function Pt(Bt){const ct=Math.sin(Bt*Math.PI/180),_t=.5-.25*Math.log((1+ct)/(1-ct))/Math.PI;return _t<0?0:_t>1?1:_t}function zt(Bt){const ct=(180-360*Bt)*Math.PI/180;return 360*Math.atan(Math.exp(ct))/Math.PI-90}function rn(Bt,ct){for(const _t in ct)Bt[_t]=ct[_t];return Bt}function bn(Bt){return Bt.x}function Tn(Bt){return Bt.y}function $n(Bt,ct,_t,Lt){for(var Ut,tn=Lt,fn=_t-ct>>1,dn=_t-ct,nn=Bt[ct],_n=Bt[ct+1],jn=Bt[_t],sr=Bt[_t+1],Hn=ct+3;Hn<_t;Hn+=3){var wr=Dn(Bt[Hn],Bt[Hn+1],nn,_n,jn,sr);if(wr>tn)Ut=Hn,tn=wr;else if(wr===tn){var Er=Math.abs(Hn-fn);Er<dn&&(Ut=Hn,dn=Er)}}tn>Lt&&(Ut-ct>3&&$n(Bt,ct,Ut,Lt),Bt[Ut+2]=tn,_t-Ut>3&&$n(Bt,Ut,_t,Lt))}function Dn(Bt,ct,_t,Lt,Ut,tn){var fn=Ut-_t,dn=tn-Lt;if(fn!==0||dn!==0){var nn=((Bt-_t)*fn+(ct-Lt)*dn)/(fn*fn+dn*dn);nn>1?(_t=Ut,Lt=tn):nn>0&&(_t+=fn*nn,Lt+=dn*nn)}return(fn=Bt-_t)*fn+(dn=ct-Lt)*dn}function xn(Bt,ct,_t,Lt){var Ut={id:Bt===void 0?null:Bt,type:ct,geometry:_t,tags:Lt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tn){var fn=tn.geometry,dn=tn.type;if(dn==="Point"||dn==="MultiPoint"||dn==="LineString")En(tn,fn);else if(dn==="Polygon"||dn==="MultiLineString")for(var nn=0;nn<fn.length;nn++)En(tn,fn[nn]);else if(dn==="MultiPolygon")for(nn=0;nn<fn.length;nn++)for(var _n=0;_n<fn[nn].length;_n++)En(tn,fn[nn][_n])}(Ut),Ut}function En(Bt,ct){for(var _t=0;_t<ct.length;_t+=3)Bt.minX=Math.min(Bt.minX,ct[_t]),Bt.minY=Math.min(Bt.minY,ct[_t+1]),Bt.maxX=Math.max(Bt.maxX,ct[_t]),Bt.maxY=Math.max(Bt.maxY,ct[_t+1])}function Cn(Bt,ct,_t,Lt){if(ct.geometry){var Ut=ct.geometry.coordinates,tn=ct.geometry.type,fn=Math.pow(_t.tolerance/((1<<_t.maxZoom)*_t.extent),2),dn=[],nn=ct.id;if(_t.promoteId?nn=ct.properties[_t.promoteId]:_t.generateId&&(nn=Lt||0),tn==="Point")Qn(Ut,dn);else if(tn==="MultiPoint")for(var _n=0;_n<Ut.length;_n++)Qn(Ut[_n],dn);else if(tn==="LineString")nr(Ut,dn,fn,!1);else if(tn==="MultiLineString"){if(_t.lineMetrics){for(_n=0;_n<Ut.length;_n++)nr(Ut[_n],dn=[],fn,!1),Bt.push(xn(nn,"LineString",dn,ct.properties));return}fr(Ut,dn,fn,!1)}else if(tn==="Polygon")fr(Ut,dn,fn,!0);else{if(tn!=="MultiPolygon"){if(tn==="GeometryCollection"){for(_n=0;_n<ct.geometry.geometries.length;_n++)Cn(Bt,{id:nn,geometry:ct.geometry.geometries[_n],properties:ct.properties},_t,Lt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_n=0;_n<Ut.length;_n++){var jn=[];fr(Ut[_n],jn,fn,!0),dn.push(jn)}}Bt.push(xn(nn,tn,dn,ct.properties))}}function Qn(Bt,ct){ct.push(Kn(Bt[0])),ct.push(qn(Bt[1])),ct.push(0)}function nr(Bt,ct,_t,Lt){for(var Ut,tn,fn=0,dn=0;dn<Bt.length;dn++){var nn=Kn(Bt[dn][0]),_n=qn(Bt[dn][1]);ct.push(nn),ct.push(_n),ct.push(0),dn>0&&(fn+=Lt?(Ut*_n-nn*tn)/2:Math.sqrt(Math.pow(nn-Ut,2)+Math.pow(_n-tn,2))),Ut=nn,tn=_n}var jn=ct.length-3;ct[2]=1,$n(ct,0,jn,_t),ct[jn+2]=1,ct.size=Math.abs(fn),ct.start=0,ct.end=ct.size}function fr(Bt,ct,_t,Lt){for(var Ut=0;Ut<Bt.length;Ut++){var tn=[];nr(Bt[Ut],tn,_t,Lt),ct.push(tn)}}function Kn(Bt){return Bt/360+.5}function qn(Bt){var ct=Math.sin(Bt*Math.PI/180),_t=.5-.25*Math.log((1+ct)/(1-ct))/Math.PI;return _t<0?0:_t>1?1:_t}function un(Bt,ct,_t,Lt,Ut,tn,fn,dn){if(Lt/=ct,tn>=(_t/=ct)&&fn<Lt)return Bt;if(fn<_t||tn>=Lt)return null;for(var nn=[],_n=0;_n<Bt.length;_n++){var jn=Bt[_n],sr=jn.geometry,Hn=jn.type,wr=Ut===0?jn.minX:jn.minY,Er=Ut===0?jn.maxX:jn.maxY;if(wr>=_t&&Er<Lt)nn.push(jn);else if(!(Er<_t||wr>=Lt)){var gr=[];if(Hn==="Point"||Hn==="MultiPoint")yn(sr,gr,_t,Lt,Ut);else if(Hn==="LineString")Rn(sr,gr,_t,Lt,Ut,!1,dn.lineMetrics);else if(Hn==="MultiLineString")mr(sr,gr,_t,Lt,Ut,!1);else if(Hn==="Polygon")mr(sr,gr,_t,Lt,Ut,!0);else if(Hn==="MultiPolygon")for(var Tr=0;Tr<sr.length;Tr++){var Dr=[];mr(sr[Tr],Dr,_t,Lt,Ut,!0),Dr.length&&gr.push(Dr)}if(gr.length){if(dn.lineMetrics&&Hn==="LineString"){for(Tr=0;Tr<gr.length;Tr++)nn.push(xn(jn.id,Hn,gr[Tr],jn.tags));continue}Hn!=="LineString"&&Hn!=="MultiLineString"||(gr.length===1?(Hn="LineString",gr=gr[0]):Hn="MultiLineString"),Hn!=="Point"&&Hn!=="MultiPoint"||(Hn=gr.length===3?"Point":"MultiPoint"),nn.push(xn(jn.id,Hn,gr,jn.tags))}}}return nn.length?nn:null}function yn(Bt,ct,_t,Lt,Ut){for(var tn=0;tn<Bt.length;tn+=3){var fn=Bt[tn+Ut];fn>=_t&&fn<=Lt&&(ct.push(Bt[tn]),ct.push(Bt[tn+1]),ct.push(Bt[tn+2]))}}function Rn(Bt,ct,_t,Lt,Ut,tn,fn){for(var dn,nn,_n=Yn(Bt),jn=Ut===0?Lr:br,sr=Bt.start,Hn=0;Hn<Bt.length-3;Hn+=3){var wr=Bt[Hn],Er=Bt[Hn+1],gr=Bt[Hn+2],Tr=Bt[Hn+3],Dr=Bt[Hn+4],ei=Ut===0?wr:Er,ai=Ut===0?Tr:Dr,ni=!1;fn&&(dn=Math.sqrt(Math.pow(wr-Tr,2)+Math.pow(Er-Dr,2))),ei<_t?ai>_t&&(nn=jn(_n,wr,Er,Tr,Dr,_t),fn&&(_n.start=sr+dn*nn)):ei>Lt?ai<Lt&&(nn=jn(_n,wr,Er,Tr,Dr,Lt),fn&&(_n.start=sr+dn*nn)):Sr(_n,wr,Er,gr),ai<_t&&ei>=_t&&(nn=jn(_n,wr,Er,Tr,Dr,_t),ni=!0),ai>Lt&&ei<=Lt&&(nn=jn(_n,wr,Er,Tr,Dr,Lt),ni=!0),!tn&&ni&&(fn&&(_n.end=sr+dn*nn),ct.push(_n),_n=Yn(Bt)),fn&&(sr+=dn)}var xr=Bt.length-3;wr=Bt[xr],Er=Bt[xr+1],gr=Bt[xr+2],(ei=Ut===0?wr:Er)>=_t&&ei<=Lt&&Sr(_n,wr,Er,gr),xr=_n.length-3,tn&&xr>=3&&(_n[xr]!==_n[0]||_n[xr+1]!==_n[1])&&Sr(_n,_n[0],_n[1],_n[2]),_n.length&&ct.push(_n)}function Yn(Bt){var ct=[];return ct.size=Bt.size,ct.start=Bt.start,ct.end=Bt.end,ct}function mr(Bt,ct,_t,Lt,Ut,tn){for(var fn=0;fn<Bt.length;fn++)Rn(Bt[fn],ct,_t,Lt,Ut,tn,!1)}function Sr(Bt,ct,_t,Lt){Bt.push(ct),Bt.push(_t),Bt.push(Lt)}function Lr(Bt,ct,_t,Lt,Ut,tn){var fn=(tn-ct)/(Lt-ct);return Bt.push(tn),Bt.push(_t+(Ut-_t)*fn),Bt.push(1),fn}function br(Bt,ct,_t,Lt,Ut,tn){var fn=(tn-_t)/(Ut-_t);return Bt.push(ct+(Lt-ct)*fn),Bt.push(tn),Bt.push(1),fn}function Br(Bt,ct){for(var _t=[],Lt=0;Lt<Bt.length;Lt++){var Ut,tn=Bt[Lt],fn=tn.type;if(fn==="Point"||fn==="MultiPoint"||fn==="LineString")Ut=Fr(tn.geometry,ct);else if(fn==="MultiLineString"||fn==="Polygon"){Ut=[];for(var dn=0;dn<tn.geometry.length;dn++)Ut.push(Fr(tn.geometry[dn],ct))}else if(fn==="MultiPolygon")for(Ut=[],dn=0;dn<tn.geometry.length;dn++){for(var nn=[],_n=0;_n<tn.geometry[dn].length;_n++)nn.push(Fr(tn.geometry[dn][_n],ct));Ut.push(nn)}_t.push(xn(tn.id,fn,Ut,tn.tags))}return _t}function Fr(Bt,ct){var _t=[];_t.size=Bt.size,Bt.start!==void 0&&(_t.start=Bt.start,_t.end=Bt.end);for(var Lt=0;Lt<Bt.length;Lt+=3)_t.push(Bt[Lt]+ct,Bt[Lt+1],Bt[Lt+2]);return _t}function Gr(Bt,ct){if(Bt.transformed)return Bt;var _t,Lt,Ut,tn=1<<Bt.z,fn=Bt.x,dn=Bt.y;for(_t=0;_t<Bt.features.length;_t++){var nn=Bt.features[_t],_n=nn.geometry,jn=nn.type;if(nn.geometry=[],jn===1)for(Lt=0;Lt<_n.length;Lt+=2)nn.geometry.push(Ur(_n[Lt],_n[Lt+1],ct,tn,fn,dn));else for(Lt=0;Lt<_n.length;Lt++){var sr=[];for(Ut=0;Ut<_n[Lt].length;Ut+=2)sr.push(Ur(_n[Lt][Ut],_n[Lt][Ut+1],ct,tn,fn,dn));nn.geometry.push(sr)}}return Bt.transformed=!0,Bt}function Ur(Bt,ct,_t,Lt,Ut,tn){return[Math.round(_t*(Bt*Lt-Ut)),Math.round(_t*(ct*Lt-tn))]}function Ri(Bt,ct,_t,Lt,Ut){for(var tn=ct===Ut.maxZoom?0:Ut.tolerance/((1<<ct)*Ut.extent),fn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_t,y:Lt,z:ct,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},dn=0;dn<Bt.length;dn++){fn.numFeatures++,Li(fn,Bt[dn],tn,Ut);var nn=Bt[dn].minX,_n=Bt[dn].minY,jn=Bt[dn].maxX,sr=Bt[dn].maxY;nn<fn.minX&&(fn.minX=nn),_n<fn.minY&&(fn.minY=_n),jn>fn.maxX&&(fn.maxX=jn),sr>fn.maxY&&(fn.maxY=sr)}return fn}function Li(Bt,ct,_t,Lt){var Ut=ct.geometry,tn=ct.type,fn=[];if(tn==="Point"||tn==="MultiPoint")for(var dn=0;dn<Ut.length;dn+=3)fn.push(Ut[dn]),fn.push(Ut[dn+1]),Bt.numPoints++,Bt.numSimplified++;else if(tn==="LineString")Ai(fn,Ut,Bt,_t,!1,!1);else if(tn==="MultiLineString"||tn==="Polygon")for(dn=0;dn<Ut.length;dn++)Ai(fn,Ut[dn],Bt,_t,tn==="Polygon",dn===0);else if(tn==="MultiPolygon")for(var nn=0;nn<Ut.length;nn++){var _n=Ut[nn];for(dn=0;dn<_n.length;dn++)Ai(fn,_n[dn],Bt,_t,!0,dn===0)}if(fn.length){var jn=ct.tags||null;if(tn==="LineString"&&Lt.lineMetrics){for(var sr in jn={},ct.tags)jn[sr]=ct.tags[sr];jn.mapbox_clip_start=Ut.start/Ut.size,jn.mapbox_clip_end=Ut.end/Ut.size}var Hn={geometry:fn,type:tn==="Polygon"||tn==="MultiPolygon"?3:tn==="LineString"||tn==="MultiLineString"?2:1,tags:jn};ct.id!==null&&(Hn.id=ct.id),Bt.features.push(Hn)}}function Ai(Bt,ct,_t,Lt,Ut,tn){var fn=Lt*Lt;if(Lt>0&&ct.size<(Ut?fn:Lt))_t.numPoints+=ct.length/3;else{for(var dn=[],nn=0;nn<ct.length;nn+=3)(Lt===0||ct[nn+2]>fn)&&(_t.numSimplified++,dn.push(ct[nn]),dn.push(ct[nn+1])),_t.numPoints++;Ut&&function(_n,jn){for(var sr=0,Hn=0,wr=_n.length,Er=wr-2;Hn<wr;Er=Hn,Hn+=2)sr+=(_n[Hn]-_n[Er])*(_n[Hn+1]+_n[Er+1]);if(sr>0===jn)for(Hn=0,wr=_n.length;Hn<wr/2;Hn+=2){var gr=_n[Hn],Tr=_n[Hn+1];_n[Hn]=_n[wr-2-Hn],_n[Hn+1]=_n[wr-1-Hn],_n[wr-2-Hn]=gr,_n[wr-1-Hn]=Tr}}(dn,tn),Bt.push(dn)}}function Cr(Bt,ct){var _t=(ct=this.options=function(Ut,tn){for(var fn in tn)Ut[fn]=tn[fn];return Ut}(Object.create(this.options),ct)).debug;if(_t&&console.time("preprocess data"),ct.maxZoom<0||ct.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ct.promoteId&&ct.generateId)throw new Error("promoteId and generateId cannot be used together.");var Lt=function(Ut,tn){var fn=[];if(Ut.type==="FeatureCollection")for(var dn=0;dn<Ut.features.length;dn++)Cn(fn,Ut.features[dn],tn,dn);else Cn(fn,Ut.type==="Feature"?Ut:{geometry:Ut},tn);return fn}(Bt,ct);this.tiles={},this.tileCoords=[],_t&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ct.indexMaxZoom,ct.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Lt=function(Ut,tn){var fn=tn.buffer/tn.extent,dn=Ut,nn=un(Ut,1,-1-fn,fn,0,-1,2,tn),_n=un(Ut,1,1-fn,2+fn,0,-1,2,tn);return(nn||_n)&&(dn=un(Ut,1,-fn,1+fn,0,-1,2,tn)||[],nn&&(dn=Br(nn,1).concat(dn)),_n&&(dn=dn.concat(Br(_n,-1)))),dn}(Lt,ct)).length&&this.splitTile(Lt,0,0,0),_t&&(Lt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function No(Bt,ct,_t){return 32*((1<<Bt)*_t+ct)+Bt}function Ta(Bt,ct){const _t=Bt.tileID.canonical;if(!this._geoJSONIndex)return ct(null,null);const Lt=this._geoJSONIndex.getTile(_t.z,_t.x,_t.y);if(!Lt)return ct(null,null);const Ut=new Ue(Lt.features);let tn=He(Ut);tn.byteOffset===0&&tn.byteLength===tn.buffer.byteLength||(tn=new Uint8Array(tn)),ct(null,{vectorTile:Ut,rawData:tn.buffer})}Cr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Cr.prototype.splitTile=function(Bt,ct,_t,Lt,Ut,tn,fn){for(var dn=[Bt,ct,_t,Lt],nn=this.options,_n=nn.debug;dn.length;){Lt=dn.pop(),_t=dn.pop(),ct=dn.pop(),Bt=dn.pop();var jn=1<<ct,sr=No(ct,_t,Lt),Hn=this.tiles[sr];if(!Hn&&(_n>1&&console.time("creation"),Hn=this.tiles[sr]=Ri(Bt,ct,_t,Lt,nn),this.tileCoords.push({z:ct,x:_t,y:Lt}),_n)){_n>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ct,_t,Lt,Hn.numFeatures,Hn.numPoints,Hn.numSimplified),console.timeEnd("creation"));var wr="z"+ct;this.stats[wr]=(this.stats[wr]||0)+1,this.total++}if(Hn.source=Bt,Ut){if(ct===nn.maxZoom||ct===Ut)continue;var Er=1<<Ut-ct;if(_t!==Math.floor(tn/Er)||Lt!==Math.floor(fn/Er))continue}else if(ct===nn.indexMaxZoom||Hn.numPoints<=nn.indexMaxPoints)continue;if(Hn.source=null,Bt.length!==0){_n>1&&console.time("clipping");var gr,Tr,Dr,ei,ai,ni,xr=.5*nn.buffer/nn.extent,gn=.5-xr,fo=.5+xr,ki=1+xr;gr=Tr=Dr=ei=null,ai=un(Bt,jn,_t-xr,_t+fo,0,Hn.minX,Hn.maxX,nn),ni=un(Bt,jn,_t+gn,_t+ki,0,Hn.minX,Hn.maxX,nn),Bt=null,ai&&(gr=un(ai,jn,Lt-xr,Lt+fo,1,Hn.minY,Hn.maxY,nn),Tr=un(ai,jn,Lt+gn,Lt+ki,1,Hn.minY,Hn.maxY,nn),ai=null),ni&&(Dr=un(ni,jn,Lt-xr,Lt+fo,1,Hn.minY,Hn.maxY,nn),ei=un(ni,jn,Lt+gn,Lt+ki,1,Hn.minY,Hn.maxY,nn),ni=null),_n>1&&console.timeEnd("clipping"),dn.push(gr||[],ct+1,2*_t,2*Lt),dn.push(Tr||[],ct+1,2*_t,2*Lt+1),dn.push(Dr||[],ct+1,2*_t+1,2*Lt),dn.push(ei||[],ct+1,2*_t+1,2*Lt+1)}}},Cr.prototype.getTile=function(Bt,ct,_t){var Lt=this.options,Ut=Lt.extent,tn=Lt.debug;if(Bt<0||Bt>24)return null;var fn=1<<Bt,dn=No(Bt,ct=(ct%fn+fn)%fn,_t);if(this.tiles[dn])return Gr(this.tiles[dn],Ut);tn>1&&console.log("drilling down to z%d-%d-%d",Bt,ct,_t);for(var nn,_n=Bt,jn=ct,sr=_t;!nn&&_n>0;)_n--,jn=Math.floor(jn/2),sr=Math.floor(sr/2),nn=this.tiles[No(_n,jn,sr)];return nn&&nn.source?(tn>1&&console.log("found parent tile z%d-%d-%d",_n,jn,sr),tn>1&&console.time("drilling down"),this.splitTile(nn.source,_n,jn,sr,Bt,ct,_t),tn>1&&console.timeEnd("drilling down"),this.tiles[dn]?Gr(this.tiles[dn],Ut):null):null};class xi extends j.VectorTileWorkerSource{constructor(ct,_t,Lt,Ut,tn){super(ct,_t,Lt,Ut,Ta),tn&&(this.loadGeoJSON=tn)}loadData(ct,_t){const Lt=ct&&ct.request,Ut=Lt&&Lt.collectResourceTiming;this.loadGeoJSON(ct,(tn,fn)=>{if(tn||!fn)return _t(tn);if(typeof fn!="object")return _t(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`));{Te(fn,!0);try{if(ct.filter){const nn=j.createExpression(ct.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nn.result==="error")throw new Error(nn.value.map(jn=>`${jn.key}: ${jn.message}`).join(", "));const _n=fn.features.filter(jn=>nn.value.evaluate({zoom:0},jn));fn={type:"FeatureCollection",features:_n}}this._geoJSONIndex=ct.cluster?new Xt(function({superclusterOptions:nn,clusterProperties:_n}){if(!_n||!nn)return nn;const jn={},sr={},Hn={accumulated:null,zoom:0},wr={properties:null},Er=Object.keys(_n);for(const gr of Er){const[Tr,Dr]=_n[gr],ei=j.createExpression(Dr),ai=j.createExpression(typeof Tr=="string"?[Tr,["accumulated"],["get",gr]]:Tr);jn[gr]=ei.value,sr[gr]=ai.value}return nn.map=gr=>{wr.properties=gr;const Tr={};for(const Dr of Er)Tr[Dr]=jn[Dr].evaluate(Hn,wr);return Tr},nn.reduce=(gr,Tr)=>{wr.properties=Tr;for(const Dr of Er)Hn.accumulated=gr[Dr],gr[Dr]=sr[Dr].evaluate(Hn,wr)},nn}(ct)).load(fn.features):function(nn,_n){return new Cr(nn,_n)}(fn,ct.geojsonVtOptions)}catch(nn){return _t(nn)}this.loaded={};const dn={};if(Ut){const nn=j.getPerformanceMeasurement(Lt);nn&&(dn.resourceTiming={},dn.resourceTiming[ct.source]=JSON.parse(JSON.stringify(nn)))}_t(null,dn)}})}reloadTile(ct,_t){const Lt=this.loaded;return Lt&&Lt[ct.uid]?super.reloadTile(ct,_t):this.loadTile(ct,_t)}loadGeoJSON(ct,_t){if(ct.request)j.getJSON(ct.request,_t);else{if(typeof ct.data!="string")return _t(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`));try{return _t(null,JSON.parse(ct.data))}catch{return _t(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ct,_t){try{_t(null,this._geoJSONIndex.getClusterExpansionZoom(ct.clusterId))}catch(Lt){_t(Lt)}}getClusterChildren(ct,_t){try{_t(null,this._geoJSONIndex.getChildren(ct.clusterId))}catch(Lt){_t(Lt)}}getClusterLeaves(ct,_t){try{_t(null,this._geoJSONIndex.getLeaves(ct.clusterId,ct.limit,ct.offset))}catch(Lt){_t(Lt)}}}class la{constructor(ct){this.self=ct,this.actor=new j.Actor(ct,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=j.getProjection({name:"mercator"}),this.workerSourceTypes={vector:j.VectorTileWorkerSource,geojson:xi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(_t,Lt)=>{if(this.workerSourceTypes[_t])throw new Error(`Worker source with name "${_t}" already registered.`);this.workerSourceTypes[_t]=Lt},this.self.registerRTLTextPlugin=_t=>{if(j.plugin.isParsed())throw new Error("RTL text plugin already registered.");j.plugin.applyArabicShaping=_t.applyArabicShaping,j.plugin.processBidirectionalText=_t.processBidirectionalText,j.plugin.processStyledBidirectionalText=_t.processStyledBidirectionalText}}clearCaches(ct,_t,Lt){delete this.layerIndexes[ct],delete this.availableImages[ct],delete this.workerSources[ct],delete this.demWorkerSources[ct],Lt()}checkIfReady(ct,_t,Lt){Lt()}setReferrer(ct,_t){this.referrer=_t}spriteLoaded(ct,_t){this.isSpriteLoaded[ct]=_t;for(const Lt in this.workerSources[ct]){const Ut=this.workerSources[ct][Lt];for(const tn in Ut)Ut[tn]instanceof j.VectorTileWorkerSource&&(Ut[tn].isSpriteLoaded=_t,Ut[tn].fire(new j.Event("isSpriteLoaded")))}}setImages(ct,_t,Lt){this.availableImages[ct]=_t;for(const Ut in this.workerSources[ct]){const tn=this.workerSources[ct][Ut];for(const fn in tn)tn[fn].availableImages=_t}Lt()}enableTerrain(ct,_t,Lt){this.terrain=_t,Lt()}setProjection(ct,_t){this.projections[ct]=j.getProjection(_t)}setLayers(ct,_t,Lt){this.getLayerIndex(ct).replace(_t),Lt()}updateLayers(ct,_t,Lt){this.getLayerIndex(ct).update(_t.layers,_t.removedIds),Lt()}loadTile(ct,_t,Lt){const Ut=this.enableTerrain?j.extend({enableTerrain:this.terrain},_t):_t;Ut.projection=this.projections[ct]||this.defaultProjection,this.getWorkerSource(ct,_t.type,_t.source).loadTile(Ut,Lt)}loadDEMTile(ct,_t,Lt){const Ut=this.enableTerrain?j.extend({buildQuadTree:this.terrain},_t):_t;this.getDEMWorkerSource(ct,_t.source).loadTile(Ut,Lt)}reloadTile(ct,_t,Lt){const Ut=this.enableTerrain?j.extend({enableTerrain:this.terrain},_t):_t;Ut.projection=this.projections[ct]||this.defaultProjection,this.getWorkerSource(ct,_t.type,_t.source).reloadTile(Ut,Lt)}abortTile(ct,_t,Lt){this.getWorkerSource(ct,_t.type,_t.source).abortTile(_t,Lt)}removeTile(ct,_t,Lt){this.getWorkerSource(ct,_t.type,_t.source).removeTile(_t,Lt)}removeSource(ct,_t,Lt){if(!this.workerSources[ct]||!this.workerSources[ct][_t.type]||!this.workerSources[ct][_t.type][_t.source])return;const Ut=this.workerSources[ct][_t.type][_t.source];delete this.workerSources[ct][_t.type][_t.source],Ut.removeSource!==void 0?Ut.removeSource(_t,Lt):Lt()}loadWorkerSource(ct,_t,Lt){try{this.self.importScripts(_t.url),Lt()}catch(Ut){Lt(Ut.toString())}}syncRTLPluginState(ct,_t,Lt){try{j.plugin.setState(_t);const Ut=j.plugin.getPluginURL();if(j.plugin.isLoaded()&&!j.plugin.isParsed()&&Ut!=null){this.self.importScripts(Ut);const tn=j.plugin.isParsed();Lt(tn?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ut}`),tn)}}catch(Ut){Lt(Ut.toString())}}getAvailableImages(ct){let _t=this.availableImages[ct];return _t||(_t=[]),_t}getLayerIndex(ct){let _t=this.layerIndexes[ct];return _t||(_t=this.layerIndexes[ct]=new ye),_t}getWorkerSource(ct,_t,Lt){return this.workerSources[ct]||(this.workerSources[ct]={}),this.workerSources[ct][_t]||(this.workerSources[ct][_t]={}),this.workerSources[ct][_t][Lt]||(this.workerSources[ct][_t][Lt]=new this.workerSourceTypes[_t]({send:(Ut,tn,fn,dn,nn,_n)=>{this.actor.send(Ut,tn,fn,ct,nn,_n)},scheduler:this.actor.scheduler},this.getLayerIndex(ct),this.getAvailableImages(ct),this.isSpriteLoaded[ct])),this.workerSources[ct][_t][Lt]}getDEMWorkerSource(ct,_t){return this.demWorkerSources[ct]||(this.demWorkerSources[ct]={}),this.demWorkerSources[ct][_t]||(this.demWorkerSources[ct][_t]=new xe),this.demWorkerSources[ct][_t]}enforceCacheSizeLimit(ct,_t){j.enforceCacheSizeLimit(_t)}getWorkerPerformanceMetrics(ct,_t,Lt){Lt(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new la(self)),la}),ne(["./shared"],function(j){function we(de,U){if(Array.isArray(de)){if(!Array.isArray(U)||de.length!==U.length)return!1;for(let te=0;te<de.length;te++)if(!we(de[te],U[te]))return!1;return!0}if(typeof de=="object"&&de!==null&&U!==null){if(typeof U!="object"||Object.keys(de).length!==Object.keys(U).length)return!1;for(const te in de)if(!we(de[te],U[te]))return!1;return!0}return de===U}var he=ye;function ye(de){return!function(U){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var be,Pe,Re=new Blob([""],{type:"text/javascript"}),Be=URL.createObjectURL(Re);try{Pe=new Worker(Be),be=!0}catch{be=!1}return Pe&&Pe.terminate(),URL.revokeObjectURL(Be),be}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var be=document.createElement("canvas");be.width=be.height=1;var Pe=be.getContext("2d");if(!Pe)return!1;var Re=Pe.getImageData(0,0,1,1);return Re&&Re.width===be.width}()?(xe[te=U&&U.failIfMajorPerformanceCaveat]===void 0&&(xe[te]=function(be){var Pe,Re=function(Be){var Ne=document.createElement("canvas"),qe=Object.create(ye.webGLContextAttributes);return qe.failIfMajorPerformanceCaveat=Be,Ne.getContext("webgl",qe)||Ne.getContext("experimental-webgl",qe)}(be);if(!Re)return!1;try{Pe=Re.createShader(Re.VERTEX_SHADER)}catch{return!1}return!(!Pe||Re.isContextLost())&&(Re.shaderSource(Pe,"void main() {}"),Re.compileShader(Pe),Re.getShaderParameter(Pe,Re.COMPILE_STATUS)===!0)}(te)),xe[te]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var te}(de)}var xe={};function Te(de,U,te){const be=j.window.document.createElement(de);return U!==void 0&&(be.className=U),te&&te.appendChild(be),be}function Se(de,U,te){const be=j.window.document.createElementNS("http://www.w3.org/2000/svg",de);for(const Pe of Object.keys(U))be.setAttributeNS(null,Pe,U[Pe]);return te&&te.appendChild(be),be}ye.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Ce=j.window.document&&j.window.document.documentElement.style,Oe=Ce&&Ce.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ze;function Ue(){Ce&&Oe&&(ze=Ce[Oe],Ce[Oe]="none")}function De(){Ce&&Oe&&(Ce[Oe]=ze)}function Fe(de){de.preventDefault(),de.stopPropagation(),j.window.removeEventListener("click",Fe,!0)}function Xe(){j.window.addEventListener("click",Fe,!0),j.window.setTimeout(()=>{j.window.removeEventListener("click",Fe,!0)},0)}function Ke(de,U){const te=de.getBoundingClientRect();return pt(de,te,U)}function He(de,U){const te=de.getBoundingClientRect(),be=[];for(let Pe=0;Pe<U.length;Pe++)be.push(pt(de,te,U[Pe]));return be}function Qe(de){return j.window.InstallTrigger!==void 0&&de.button===2&&de.ctrlKey&&j.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:de.button}function pt(de,U,te){const be=de.offsetWidth===U.width?1:de.offsetWidth/U.width;return new j.pointGeometry((te.clientX-U.left)*be,(te.clientY-U.top)*be)}function Mt(de,U){var te=U[0],be=U[1],Pe=U[2],Re=U[3],Be=te*Re-Pe*be;return Be?(de[0]=Re*(Be=1/Be),de[1]=-be*Be,de[2]=-Pe*Be,de[3]=te*Be,de):null}function wt(de){const{userImage:U}=de;return!!(U&&U.render&&U.render())&&(de.data.replace(new Uint8Array(U.data.buffer)),!0)}class bt extends j.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new j.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(U){if(this.loaded!==U&&(this.loaded=U,U)){for(const{ids:te,callback:be}of this.requestors)this._notify(te,be);this.requestors=[]}}hasImage(U){return!!this.getImage(U)}getImage(U){return this.images[U]}addImage(U,te){this._validate(U,te)&&(this.images[U]=te)}_validate(U,te){let be=!0;return this._validateStretch(te.stretchX,te.data&&te.data.width)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "stretchX" value`))),be=!1),this._validateStretch(te.stretchY,te.data&&te.data.height)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "stretchY" value`))),be=!1),this._validateContent(te.content,te)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "content" value`))),be=!1),be}_validateStretch(U,te){if(!U)return!0;let be=0;for(const Pe of U){if(Pe[0]<be||Pe[1]<Pe[0]||te<Pe[1])return!1;be=Pe[1]}return!0}_validateContent(U,te){return!(U&&(U.length!==4||U[0]<0||te.data.width<U[0]||U[1]<0||te.data.height<U[1]||U[2]<0||te.data.width<U[2]||U[3]<0||te.data.height<U[3]||U[2]<U[0]||U[3]<U[1]))}updateImage(U,te){te.version=this.images[U].version+1,this.images[U]=te,this.updatedImages[U]=!0}removeImage(U){const te=this.images[U];delete this.images[U],delete this.patterns[U],te.userImage&&te.userImage.onRemove&&te.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(U,te){let be=!0;if(!this.isLoaded())for(const Pe of U)this.images[Pe]||(be=!1);this.isLoaded()||be?this._notify(U,te):this.requestors.push({ids:U,callback:te})}_notify(U,te){const be={};for(const Pe of U){this.images[Pe]||this.fire(new j.Event("styleimagemissing",{id:Pe}));const Re=this.images[Pe];Re?be[Pe]={data:Re.data.clone(),pixelRatio:Re.pixelRatio,sdf:Re.sdf,version:Re.version,stretchX:Re.stretchX,stretchY:Re.stretchY,content:Re.content,hasRenderCallback:Boolean(Re.userImage&&Re.userImage.render)}:j.warnOnce(`Image "${Pe}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}te(null,be)}getPixelSize(){const{width:U,height:te}=this.atlasImage;return{width:U,height:te}}getPattern(U){const te=this.patterns[U],be=this.getImage(U);if(!be)return null;if(te&&te.position.version===be.version)return te.position;if(te)te.position.version=be.version;else{const Pe={w:be.data.width+2,h:be.data.height+2,x:0,y:0},Re=new j.ImagePosition(Pe,be);this.patterns[U]={bin:Pe,position:Re}}return this._updatePatternAtlas(),this.patterns[U].position}bind(U){const te=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new j.Texture(U,this.atlasImage,te.RGBA),this.atlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)}_updatePatternAtlas(){const U=[];for(const Re in this.patterns)U.push(this.patterns[Re].bin);const{w:te,h:be}=j.potpack(U),Pe=this.atlasImage;Pe.resize({width:te||1,height:be||1});for(const Re in this.patterns){const{bin:Be}=this.patterns[Re],Ne=Be.x+1,qe=Be.y+1,Ye=this.images[Re].data,Je=Ye.width,ut=Ye.height;j.RGBAImage.copy(Ye,Pe,{x:0,y:0},{x:Ne,y:qe},{width:Je,height:ut}),j.RGBAImage.copy(Ye,Pe,{x:0,y:ut-1},{x:Ne,y:qe-1},{width:Je,height:1}),j.RGBAImage.copy(Ye,Pe,{x:0,y:0},{x:Ne,y:qe+ut},{width:Je,height:1}),j.RGBAImage.copy(Ye,Pe,{x:Je-1,y:0},{x:Ne-1,y:qe},{width:1,height:ut}),j.RGBAImage.copy(Ye,Pe,{x:0,y:0},{x:Ne+Je,y:qe},{width:1,height:ut})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(U){for(const te of U){if(this.callbackDispatchedThisFrame[te])continue;this.callbackDispatchedThisFrame[te]=!0;const be=this.images[te];wt(be)&&this.updateImage(te,be)}}}const rt=new j.Properties({anchor:new j.DataConstantProperty(j.spec.light.anchor),position:new class{constructor(){this.specification=j.spec.light.position}possiblyEvaluate(de,U){return function([te,be,Pe]){const Re=j.degToRad(be+90),Be=j.degToRad(Pe);return{x:te*Math.cos(Re)*Math.sin(Be),y:te*Math.sin(Re)*Math.sin(Be),z:te*Math.cos(Be),azimuthal:be,polar:Pe}}(de.expression.evaluate(U))}interpolate(de,U,te){return{x:j.number(de.x,U.x,te),y:j.number(de.y,U.y,te),z:j.number(de.z,U.z,te),azimuthal:j.number(de.azimuthal,U.azimuthal,te),polar:j.number(de.polar,U.polar,te)}}},color:new j.DataConstantProperty(j.spec.light.color),intensity:new j.DataConstantProperty(j.spec.light.intensity)}),nt="-transition";class it extends j.Evented{constructor(U){super(),this._transitionable=new j.Transitionable(rt),this.setLight(U),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(U,te={}){if(!this._validate(j.validateLight,U,te))for(const be in U){const Pe=U[be];j.endsWith(be,nt)?this._transitionable.setTransition(be.slice(0,-nt.length),Pe):this._transitionable.setValue(be,Pe)}}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}_validate(U,te,be){return(!be||be.validate!==!1)&&j.emitValidationErrors(this,U.call(j.validateStyle,j.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}const dt=new j.Properties({source:new j.DataConstantProperty(j.spec.terrain.source),exaggeration:new j.DataConstantProperty(j.spec.terrain.exaggeration)}),lt="-transition";class ft extends j.Evented{constructor(U,te){super(),this._transitionable=new j.Transitionable(dt),this.set(U),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=te}get(){return this._transitionable.serialize()}set(U){for(const te in U){const be=U[te];j.endsWith(te,lt)?this._transitionable.setTransition(te.slice(0,-lt.length),be):this._transitionable.setValue(te,be)}}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}}function xt(de,U,te,be){const Pe=j.smoothstep(45,65,te),[Re,Be]=ht(de,be),Ne=j.length(U);let qe=1-Math.min(1,Math.exp((Ne-Re)/(Be-Re)*-6));return qe*=qe*qe,qe=Math.min(1,1.00747*qe),qe*Pe*de.alpha}function ht(de,U){const te=.5/Math.tan(.5*U);return[de.range[0]+te,de.range[1]+te]}const Vt=new j.Properties({range:new j.DataConstantProperty(j.spec.fog.range),color:new j.DataConstantProperty(j.spec.fog.color),"high-color":new j.DataConstantProperty(j.spec.fog["high-color"]),"space-color":new j.DataConstantProperty(j.spec.fog["space-color"]),"horizon-blend":new j.DataConstantProperty(j.spec.fog["horizon-blend"]),"star-intensity":new j.DataConstantProperty(j.spec.fog["star-intensity"])}),st="-transition";class Dt extends j.Evented{constructor(U,te){super(),this._transitionable=new j.Transitionable(Vt),this.set(U),this._transitioning=this._transitionable.untransitioned(),this._transform=te}get state(){const U=this._transform,te=U.projection.name==="globe",be=j.globeToMercatorTransition(U.zoom),Pe=this.properties.get("range"),Re=[.5,3];return{range:te?[j.number(Re[0],Pe[0],be),j.number(Re[1],Pe[1],be)]:Pe,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(U,te={}){if(!this._validate(j.validateFog,U,te)){for(const be of Object.keys(j.spec.fog))U&&U[be]===void 0&&(U[be]=j.spec.fog[be].default);for(const be in U){const Pe=U[be];j.endsWith(be,st)?this._transitionable.setTransition(be.slice(0,-st.length),Pe):this._transitionable.setValue(be,Pe)}}}getOpacity(U){if(!this._transform.projection.supportsFog)return 0;const te=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:j.smoothstep(45,65,U))*te.a}getOpacityAtLatLng(U,te){return this._transform.projection.supportsFog?function(be,Pe,Re){const Be=j.MercatorCoordinate.fromLngLat(Pe),Ne=Re.elevation?Re.elevation.getAtPointOrZero(Be):0,qe=[Be.x,Be.y,Ne];return j.transformMat4(qe,qe,Re.mercatorFogMatrix),xt(be,qe,Re.pitch,Re._fov)}(this.state,U,te):0}getFovAdjustedRange(U){return this._transform.projection.supportsFog?ht(this.state,U):[0,1]}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}_validate(U,te,be){return(!be||be.validate!==!1)&&j.emitValidationErrors(this,U.call(j.validateStyle,j.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}class ln{constructor(U,te){this.workerPool=U,this.actors=[],this.currentActor=0,this.id=j.uniqueId();const be=this.workerPool.acquire(this.id);for(let Pe=0;Pe<be.length;Pe++){const Re=new ln.Actor(be[Pe],te,this.id);Re.name=`Worker ${Pe}`,this.actors.push(Re)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(U,te,be){j.asyncAll(this.actors,(Pe,Re)=>{Pe.send(U,te,Re)},be=be||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(U=>{U.remove()}),this.actors=[],this.workerPool.release(this.id)}}function In(de,U,te){return U*(j.EXTENT/(de.tileSize*Math.pow(2,te-de.tileID.overscaledZ)))}ln.Actor=j.Actor;class on{constructor(U,te,be,Pe){this.screenBounds=U,this.cameraPoint=te,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=be,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Pe)}static createFromScreenPoints(U,te){let be,Pe;if(U instanceof j.pointGeometry||typeof U[0]=="number"){const Re=j.pointGeometry.convert(U);be=[j.pointGeometry.convert(U)],Pe=te.isPointAboveHorizon(Re)}else{const Re=j.pointGeometry.convert(U[0]),Be=j.pointGeometry.convert(U[1]);be=[Re,Be],Pe=j.polygonizeBounds(Re,Be).every(Ne=>te.isPointAboveHorizon(Ne))}return new on(be,te.getCameraPoint(),Pe,te)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(U){return j.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],U)}bufferedCameraGeometry(U){const te=this.screenBounds[0],be=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],Pe=j.polygonizeBounds(te,be,0,!1);return this.cameraPoint.y>be.y&&(this.cameraPoint.x>te.x&&this.cameraPoint.x<be.x?Pe.splice(3,0,this.cameraPoint):this.cameraPoint.x>=be.x?Pe[2]=this.cameraPoint:this.cameraPoint.x<=te.x&&(Pe[3]=this.cameraPoint)),j.bufferConvexPolygon(Pe,U)}bufferedCameraGeometryGlobe(U){const te=this.screenBounds[0],be=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],Pe=j.polygonizeBounds(te,be,U),Re=this.cameraPoint.clone();switch(3*((Re.y>te.y)+(Re.y>be.y))+((Re.x>te.x)+(Re.x>be.x))){case 0:Pe[0]=Re,Pe[4]=Re.clone();break;case 1:Pe.splice(1,0,Re);break;case 2:Pe[1]=Re;break;case 3:Pe.splice(4,0,Re);break;case 5:Pe.splice(2,0,Re);break;case 6:Pe[3]=Re;break;case 7:Pe.splice(3,0,Re);break;case 8:Pe[2]=Re}return Pe}containsTile(U,te,be,Pe=0){const Re=U.queryPadding/te._pixelsPerMercatorPixel+1,Be=be?this._bufferedCameraMercator(Re,te):this._bufferedScreenMercator(Re,te);let Ne=U.tileID.wrap+(Be.unwrapped?Pe:0);const qe=Be.polygon.map(St=>j.getTilePoint(U.tileTransform,St,Ne));if(!j.polygonIntersectsBox(qe,0,0,j.EXTENT,j.EXTENT))return;Ne=U.tileID.wrap+(this.screenGeometryMercator.unwrapped?Pe:0);const Ye=this.screenGeometryMercator.polygon.map(St=>j.getTileVec3(U.tileTransform,St,Ne)),Je=Ye.map(St=>new j.pointGeometry(St[0],St[1])),ut=te.getFreeCameraOptions().position||new j.MercatorCoordinate(0,0,0),gt=j.getTileVec3(U.tileTransform,ut,Ne),It=Ye.map(St=>{const Et=j.sub(St,St,gt);return j.normalize(Et,Et),new j.Ray(gt,Et)}),kt=In(U,1,te.zoom)*te._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Je,tilespaceRays:It,bufferedTilespaceGeometry:qe,bufferedTilespaceBounds:(At=j.getBounds(qe),At.min.x=j.clamp(At.min.x,0,j.EXTENT),At.min.y=j.clamp(At.min.y,0,j.EXTENT),At.max.x=j.clamp(At.max.x,0,j.EXTENT),At.max.y=j.clamp(At.max.y,0,j.EXTENT),At),tile:U,tileID:U.tileID,pixelToTileUnitsFactor:kt};var At}_bufferedScreenMercator(U,te){const be=Rt(U);if(this._screenRaycastCache[be])return this._screenRaycastCache[be];{let Pe;return Pe=te.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(U),te):{polygon:this.bufferedScreenGeometry(U).map(Re=>te.pointCoordinate3D(Re)),unwrapped:!0},this._screenRaycastCache[be]=Pe,Pe}}_bufferedCameraMercator(U,te){const be=Rt(U);if(this._cameraRaycastCache[be])return this._cameraRaycastCache[be];{let Pe;return Pe=te.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(U),te):{polygon:this.bufferedCameraGeometry(U).map(Re=>te.pointCoordinate3D(Re)),unwrapped:!0},this._cameraRaycastCache[be]=Pe,Pe}}_projectAndResample(U,te){const be=function(Re,Be){const Ne=j.multiply([],Be.pixelMatrix,Be.globeMatrix),qe=[0,-j.GLOBE_RADIUS,0,1],Ye=[0,j.GLOBE_RADIUS,0,1],Je=[0,0,0,1];j.transformMat4$1(qe,qe,Ne),j.transformMat4$1(Ye,Ye,Ne),j.transformMat4$1(Je,Je,Ne);const ut=new j.pointGeometry(qe[0]/qe[3],qe[1]/qe[3]),gt=new j.pointGeometry(Ye[0]/Ye[3],Ye[1]/Ye[3]),It=j.polygonContainsPoint(Re,ut)&&qe[3]<Je[3],kt=j.polygonContainsPoint(Re,gt)&&Ye[3]<Je[3];if(!It&&!kt)return null;const At=function(Kt,Wt,sn){for(let mn=1;mn<Kt.length;mn++){const Wn=Xt(Wt.pointCoordinate3D(Kt[mn-1]).x),pn=Xt(Wt.pointCoordinate3D(Kt[mn]).x);if(sn<0){if(Wn<pn)return{idx:mn,t:-Wn/(pn-1-Wn)}}else if(pn<Wn)return{idx:mn,t:(1-Wn)/(pn+1-Wn)}}return null}(Re,Be,It?-1:1);if(!At)return null;const{idx:St,t:Et}=At;let $t=St>1?an(Re.slice(0,St),Be):[],Ot=St<Re.length?an(Re.slice(St),Be):[];$t=$t.map(Kt=>new j.pointGeometry(Xt(Kt.x),Kt.y)),Ot=Ot.map(Kt=>new j.pointGeometry(Xt(Kt.x),Kt.y));const Jt=[...$t];Jt.length===0&&Jt.push(Ot[Ot.length-1]);const Yt=j.number(Jt[Jt.length-1].y,(Ot.length===0?$t[0]:Ot[0]).y,Et);let Gt;return Gt=It?[new j.pointGeometry(0,Yt),new j.pointGeometry(0,0),new j.pointGeometry(1,0),new j.pointGeometry(1,Yt)]:[new j.pointGeometry(1,Yt),new j.pointGeometry(1,1),new j.pointGeometry(0,1),new j.pointGeometry(0,Yt)],Jt.push(...Gt),Ot.length===0?Jt.push($t[0]):Jt.push(...Ot),{polygon:Jt.map(Kt=>new j.MercatorCoordinate(Kt.x,Kt.y)),unwrapped:!1}}(U,te);if(be)return be;const Pe=function(Re,Be){let Ne=!1,qe=-1/0,Ye=0;for(let ut=0;ut<Re.length-1;ut++)Re[ut].x>qe&&(qe=Re[ut].x,Ye=ut);for(let ut=0;ut<Re.length-1;ut++){const gt=(Ye+ut)%(Re.length-1),It=Re[gt],kt=Re[gt+1];Math.abs(It.x-kt.x)>.5&&(It.x<kt.x?(It.x+=1,gt===0&&(Re[Re.length-1].x+=1)):(kt.x+=1,gt+1===Re.length-1&&(Re[0].x+=1)),Ne=!0)}const Je=j.mercatorXfromLng(Be.center.lng);return Ne&&Je<Math.abs(Je-1)&&Re.forEach(ut=>{ut.x-=1}),{polygon:Re,unwrapped:Ne}}(an(U,te).map(Re=>new j.pointGeometry(Xt(Re.x),Re.y)),te);return{polygon:Pe.polygon.map(Re=>new j.MercatorCoordinate(Re.x,Re.y)),unwrapped:Pe.unwrapped}}}function an(de,U){return j.resample(de,te=>{const be=U.pointCoordinate3D(te);te.x=be.x,te.y=be.y},1/256)}function Xt(de){return de<0?1+de%1:de%1}function Rt(de){return 100*de|0}function en(de,U,te,be,Pe){const Re=function(Be,Ne){if(Be)return Pe(Be);if(Ne){const qe=j.pick(j.extend(Ne,de),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ne.vector_layers&&(qe.vectorLayers=Ne.vector_layers,qe.vectorLayerIds=qe.vectorLayers.map(Ye=>Ye.id)),Ne.language_options&&(qe.languageOptions=Ne.language_options),Ne.language&&Ne.language[Ne.id]&&(qe.language=Ne.language[Ne.id]),Ne.worldview_options&&(qe.worldviewOptions=Ne.worldview_options),Ne.worldview?qe.worldview=Ne.worldview[Ne.id]:Ne.worldview_default&&(qe.worldview=Ne.worldview_default),qe.tiles=U.canonicalizeTileset(qe,de.url),Pe(null,qe)}};return de.url?j.getJSON(U.transformRequest(U.normalizeSourceURL(de.url,null,te,be),j.ResourceType.Source),Re):j.exported.frame(()=>Re(null,de))}class hn{constructor(U,te,be){this.bounds=j.LngLatBounds.convert(this.validateBounds(U)),this.minzoom=te||0,this.maxzoom=be||24}validateBounds(U){return Array.isArray(U)&&U.length===4?[Math.max(-180,U[0]),Math.max(-90,U[1]),Math.min(180,U[2]),Math.min(90,U[3])]:[-180,-90,180,90]}contains(U){const te=Math.pow(2,U.z),be=Math.floor(j.mercatorXfromLng(this.bounds.getWest())*te),Pe=Math.floor(j.mercatorYfromLat(this.bounds.getNorth())*te),Re=Math.ceil(j.mercatorXfromLng(this.bounds.getEast())*te),Be=Math.ceil(j.mercatorYfromLat(this.bounds.getSouth())*te);return U.x>=be&&U.x<Re&&U.y>=Pe&&U.y<Be}}class vn{constructor(U,te,be){this.context=U;const Pe=U.gl;this.buffer=Pe.createBuffer(),this.dynamicDraw=Boolean(be),this.context.unbindVAO(),U.bindElementBuffer.set(this.buffer),Pe.bufferData(Pe.ELEMENT_ARRAY_BUFFER,te.arrayBuffer,this.dynamicDraw?Pe.DYNAMIC_DRAW:Pe.STATIC_DRAW),this.dynamicDraw||te.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(U){const te=this.context.gl;this.context.unbindVAO(),this.bind(),te.bufferSubData(te.ELEMENT_ARRAY_BUFFER,0,U.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pt{constructor(U,te,be,Pe){this.length=te.length,this.attributes=be,this.itemSize=te.bytesPerElement,this.dynamicDraw=Pe,this.context=U;const Re=U.gl;this.buffer=Re.createBuffer(),U.bindVertexBuffer.set(this.buffer),Re.bufferData(Re.ARRAY_BUFFER,te.arrayBuffer,this.dynamicDraw?Re.DYNAMIC_DRAW:Re.STATIC_DRAW),this.dynamicDraw||te.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(U){const te=this.context.gl;this.bind(),te.bufferSubData(te.ARRAY_BUFFER,0,U.arrayBuffer)}enableAttributes(U,te){for(let be=0;be<this.attributes.length;be++){const Pe=te.attributes[this.attributes[be].name];Pe!==void 0&&U.enableVertexAttribArray(Pe)}}setVertexAttribPointers(U,te,be){for(let Pe=0;Pe<this.attributes.length;Pe++){const Re=this.attributes[Pe],Be=te.attributes[Re.name];Be!==void 0&&U.vertexAttribPointer(Be,Re.components,U[Pn[Re.type]],!1,this.itemSize,Re.offset+this.itemSize*(be||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zt{constructor(U){this.gl=U.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(U){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rn extends zt{getDefault(){return j.Color.transparent}set(U){const te=this.current;(U.r!==te.r||U.g!==te.g||U.b!==te.b||U.a!==te.a||this.dirty)&&(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)}}class bn extends zt{getDefault(){return 1}set(U){(U!==this.current||this.dirty)&&(this.gl.clearDepth(U),this.current=U,this.dirty=!1)}}class Tn extends zt{getDefault(){return 0}set(U){(U!==this.current||this.dirty)&&(this.gl.clearStencil(U),this.current=U,this.dirty=!1)}}class $n extends zt{getDefault(){return[!0,!0,!0,!0]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||U[2]!==te[2]||U[3]!==te[3]||this.dirty)&&(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)}}class Dn extends zt{getDefault(){return!0}set(U){(U!==this.current||this.dirty)&&(this.gl.depthMask(U),this.current=U,this.dirty=!1)}}class xn extends zt{getDefault(){return 255}set(U){(U!==this.current||this.dirty)&&(this.gl.stencilMask(U),this.current=U,this.dirty=!1)}}class En extends zt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(U){const te=this.current;(U.func!==te.func||U.ref!==te.ref||U.mask!==te.mask||this.dirty)&&(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)}}class Cn extends zt{getDefault(){const U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||U[2]!==te[2]||this.dirty)&&(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)}}class Qn extends zt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.STENCIL_TEST):te.disable(te.STENCIL_TEST),this.current=U,this.dirty=!1}}class nr extends zt{getDefault(){return[0,1]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||this.dirty)&&(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)}}class fr extends zt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.DEPTH_TEST):te.disable(te.DEPTH_TEST),this.current=U,this.dirty=!1}}class Kn extends zt{getDefault(){return this.gl.LESS}set(U){(U!==this.current||this.dirty)&&(this.gl.depthFunc(U),this.current=U,this.dirty=!1)}}class qn extends zt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.BLEND):te.disable(te.BLEND),this.current=U,this.dirty=!1}}class un extends zt{getDefault(){const U=this.gl;return[U.ONE,U.ZERO]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||this.dirty)&&(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)}}class yn extends zt{getDefault(){return j.Color.transparent}set(U){const te=this.current;(U.r!==te.r||U.g!==te.g||U.b!==te.b||U.a!==te.a||this.dirty)&&(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)}}class Rn extends zt{getDefault(){return this.gl.FUNC_ADD}set(U){(U!==this.current||this.dirty)&&(this.gl.blendEquation(U),this.current=U,this.dirty=!1)}}class Yn extends zt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.CULL_FACE):te.disable(te.CULL_FACE),this.current=U,this.dirty=!1}}class mr extends zt{getDefault(){return this.gl.BACK}set(U){(U!==this.current||this.dirty)&&(this.gl.cullFace(U),this.current=U,this.dirty=!1)}}class Sr extends zt{getDefault(){return this.gl.CCW}set(U){(U!==this.current||this.dirty)&&(this.gl.frontFace(U),this.current=U,this.dirty=!1)}}class Lr extends zt{getDefault(){return null}set(U){(U!==this.current||this.dirty)&&(this.gl.useProgram(U),this.current=U,this.dirty=!1)}}class br extends zt{getDefault(){return this.gl.TEXTURE0}set(U){(U!==this.current||this.dirty)&&(this.gl.activeTexture(U),this.current=U,this.dirty=!1)}}class Br extends zt{getDefault(){const U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||U[2]!==te[2]||U[3]!==te[3]||this.dirty)&&(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)}}class Fr extends zt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindFramebuffer(te.FRAMEBUFFER,U),this.current=U,this.dirty=!1}}class Gr extends zt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindRenderbuffer(te.RENDERBUFFER,U),this.current=U,this.dirty=!1}}class Ur extends zt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindTexture(te.TEXTURE_2D,U),this.current=U,this.dirty=!1}}class Ri extends zt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindBuffer(te.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}}class Li extends zt{getDefault(){return null}set(U){const te=this.gl;te.bindBuffer(te.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1}}class Ai extends zt{constructor(U){super(U),this.vao=U.extVertexArrayObject}getDefault(){return null}set(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)}}class Cr extends zt{getDefault(){return 4}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.pixelStorei(te.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}}class No extends zt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}}class Ta extends zt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}}class xi extends zt{constructor(U,te){super(U),this.context=U,this.parent=te}getDefault(){return null}}class la extends xi{setDirty(){this.dirty=!0}set(U){if(U===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const te=this.gl;te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}}class Bt extends xi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(U){if(U===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const te=this.gl;te.framebufferRenderbuffer(te.FRAMEBUFFER,this.attachment(),te.RENDERBUFFER,U),this.current=U,this.dirty=!1}}class ct extends Bt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class _t{constructor(U,te,be,Pe){this.context=U,this.width=te,this.height=be;const Re=this.framebuffer=U.gl.createFramebuffer();this.colorAttachment=new la(U,Re),Pe&&(this.depthAttachment=new Bt(U,Re))}destroy(){const U=this.context.gl,te=this.colorAttachment.get();if(te&&U.deleteTexture(te),this.depthAttachment){const be=this.depthAttachment.get();be&&U.deleteRenderbuffer(be)}U.deleteFramebuffer(this.framebuffer)}}class Lt{constructor(U){this.gl=U,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new rn(this),this.clearDepth=new bn(this),this.clearStencil=new Tn(this),this.colorMask=new $n(this),this.depthMask=new Dn(this),this.stencilMask=new xn(this),this.stencilFunc=new En(this),this.stencilOp=new Cn(this),this.stencilTest=new Qn(this),this.depthRange=new nr(this),this.depthTest=new fr(this),this.depthFunc=new Kn(this),this.blend=new qn(this),this.blendFunc=new un(this),this.blendColor=new yn(this),this.blendEquation=new Rn(this),this.cullFace=new Yn(this),this.cullFaceSide=new mr(this),this.frontFace=new Sr(this),this.program=new Lr(this),this.activeTexture=new br(this),this.viewport=new Br(this),this.bindFramebuffer=new Fr(this),this.bindRenderbuffer=new Gr(this),this.bindTexture=new Ur(this),this.bindVertexBuffer=new Ri(this),this.bindElementBuffer=new Li(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ai(this),this.pixelStoreUnpack=new Cr(this),this.pixelStoreUnpackPremultiplyAlpha=new No(this),this.pixelStoreUnpackFlipY=new Ta(this),this.extTextureFilterAnisotropic=U.getExtension("EXT_texture_filter_anisotropic")||U.getExtension("MOZ_EXT_texture_filter_anisotropic")||U.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=U.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=U.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(U.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=U.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=U.getExtension("OES_standard_derivatives"),this.extTimerQuery=U.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=U.getParameter(U.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(U,te){return new vn(this,U,te)}createVertexBuffer(U,te,be){return new Pt(this,U,te,be)}createRenderbuffer(U,te,be){const Pe=this.gl,Re=Pe.createRenderbuffer();return this.bindRenderbuffer.set(Re),Pe.renderbufferStorage(Pe.RENDERBUFFER,U,te,be),this.bindRenderbuffer.set(null),Re}createFramebuffer(U,te,be){return new _t(this,U,te,be)}clear({color:U,depth:te,stencil:be}){const Pe=this.gl;let Re=0;U&&(Re|=Pe.COLOR_BUFFER_BIT,this.clearColor.set(U),this.colorMask.set([!0,!0,!0,!0])),te!==void 0&&(Re|=Pe.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(te),this.depthMask.set(!0)),be!==void 0&&(Re|=Pe.STENCIL_BUFFER_BIT,this.clearStencil.set(be),this.stencilMask.set(255)),Pe.clear(Re)}setCullFace(U){U.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(U.mode),this.frontFace.set(U.frontFace))}setDepthMode(U){U.func!==this.gl.ALWAYS||U.mask?(this.depthTest.set(!0),this.depthFunc.set(U.func),this.depthMask.set(U.mask),this.depthRange.set(U.range)):this.depthTest.set(!1)}setStencilMode(U){U.test.func!==this.gl.ALWAYS||U.mask?(this.stencilTest.set(!0),this.stencilMask.set(U.mask),this.stencilOp.set([U.fail,U.depthFail,U.pass]),this.stencilFunc.set({func:U.test.func,ref:U.ref,mask:U.test.mask})):this.stencilTest.set(!1)}setColorMode(U){we(U.blendFunction,j.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(U.blendFunction),this.blendColor.set(U.blendColor)),this.colorMask.set(U.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ut extends j.Evented{constructor(U,te,be,Pe){super(),this.id=U,this.dispatcher=be,this.setEventedParent(Pe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=j.extend({type:"raster"},te),j.extend(this,j.pick(te,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=en(this._options,this.map._requestManager,null,null,(U,te)=>{this._tileJSONRequest=null,this._loaded=!0,U?this.fire(new j.ErrorEvent(U)):te&&(j.extend(this,te),te.bounds&&(this.tileBounds=new hn(te.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(te.tiles),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(U){this.map=U,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}hasTile(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)}loadTile(U,te){const be=j.exported.devicePixelRatio>=2,Pe=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),be,this.tileSize);U.request=j.getImage(this.map._requestManager.transformRequest(Pe,j.ResourceType.Tile),(Re,Be,Ne,qe)=>(delete U.request,U.aborted?(U.state="unloaded",te(null)):Re?(U.state="errored",te(Re)):Be?(this.map._refreshExpiredTiles&&U.setExpiryData({cacheControl:Ne,expires:qe}),U.setTexture(Be,this.map.painter),U.state="loaded",j.cacheEntryPossiblyAdded(this.dispatcher),void te(null)):te(null)))}static loadTileData(U,te,be){U.setTexture(te,be)}static unloadTileData(U,te){U.texture&&te.saveTileTexture(U.texture)}abortTile(U,te){U.request&&(U.request.cancel(),delete U.request),te()}unloadTile(U,te){U.texture&&this.map.painter.saveTileTexture(U.texture),te()}hasTransition(){return!1}}let tn;function fn(de,U,te,be,Pe,Re,Be,Ne){const qe=[de,te,Pe,U,be,Re,1,1,1],Ye=[Be,Ne,1],Je=j.adjoint([],qe),[ut,gt,It]=j.transformMat3(Ye,Ye,j.transpose(Je,Je));return j.multiply$1(qe,[ut,0,0,0,gt,0,0,0,It],qe)}class dn extends j.Evented{constructor(U,te,be,Pe){super(),this.id=U,this.dispatcher=be,this.coordinates=te.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Pe),this.options=te}load(U,te){this._loaded=te||!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this.url=this.options.url,j.getImage(this.map._requestManager.transformRequest(this.url,j.ResourceType.Image),(be,Pe)=>{if(this._loaded=!0,be)this.fire(new j.ErrorEvent(be));else if(Pe){const{HTMLImageElement:Re}=j.window;this.image=Pe instanceof Re?j.exported.getImageData(Pe):Pe,this.width=this.image.width,this.height=this.image.height,U&&(this.coordinates=U),this._finishLoading()}})}loaded(){return this._loaded}updateImage(U){return this.image&&U.url?(this.options.url=U.url,this.load(U.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(U){this.map=U,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(U){this.coordinates=U,this._boundsArray=void 0;const te=U.map(j.MercatorCoordinate.fromLngLat);return this.tileID=function(be){let Pe=1/0,Re=1/0,Be=-1/0,Ne=-1/0;for(const ut of be)Pe=Math.min(Pe,ut.x),Re=Math.min(Re,ut.y),Be=Math.max(Be,ut.x),Ne=Math.max(Ne,ut.y);const qe=Math.max(Be-Pe,Ne-Re),Ye=Math.max(0,Math.floor(-Math.log(qe)/Math.LN2)),Je=Math.pow(2,Ye);return new j.CanonicalTileID(Ye,Math.floor((Pe+Be)/2*Je),Math.floor((Re+Ne)/2*Je))}(te),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(U){for(const qe in this.tiles){const Ye=this.tiles[qe];Ye.state!=="loaded"&&(Ye.state="loaded",Ye.texture=this.texture)}if(this._boundsArray)return;const te=j.tileTransform(this.tileID,this.map.transform.projection),[be,Pe,Re,Be]=this.coordinates.map(qe=>{const Ye=te.projection.project(qe[0],qe[1]);return j.getTilePoint(te,Ye)._round()});this.perspectiveTransform=function(qe,Ye,Je,ut,gt,It,kt,At,St,Et){const $t=fn(0,0,qe,0,0,Ye,qe,Ye),Ot=fn(Je,ut,gt,It,kt,At,St,Et);return j.multiply$1(Ot,j.adjoint($t,$t),Ot),[Ot[6]/Ot[8]*qe/j.EXTENT,Ot[7]/Ot[8]*Ye/j.EXTENT]}(this.width,this.height,be.x,be.y,Pe.x,Pe.y,Be.x,Be.y,Re.x,Re.y);const Ne=this._boundsArray=new j.StructArrayLayout4i8;Ne.emplaceBack(be.x,be.y,0,0),Ne.emplaceBack(Pe.x,Pe.y,j.EXTENT,0),Ne.emplaceBack(Be.x,Be.y,0,j.EXTENT),Ne.emplaceBack(Re.x,Re.y,j.EXTENT,j.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=U.createVertexBuffer(Ne,j.boundsAttributes.members),this.boundsSegments=j.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const U=this.map.painter.context,te=U.gl;this.texture?this.texture.update(this.image):(this.texture=new j.Texture(U,this.image,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this._prepareData(U)}loadTile(U,te){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},te(null)):(U.state="errored",te(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const nn={vector:class extends j.Evented{constructor(de,U,te,be){if(super(),this.id=de,this.dispatcher=te,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,j.extend(this,j.pick(U,["url","scheme","tileSize","promoteId"])),this._options=j.extend({type:"vector"},U),this._collectResourceTiming=U.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(be),this._tileWorkers={},this._deduped=new j.DedupedRequest}load(de){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"}));const U=this.language||this.map._language,te=this.worldview||this.map._worldview;this._tileJSONRequest=en(this._options,this.map._requestManager,U,te,(be,Pe)=>{this._tileJSONRequest=null,this._loaded=!0,be?(U&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${U}`),te&&te.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${te}`),this.fire(new j.ErrorEvent(be))):Pe&&(j.extend(this,Pe),Pe.bounds&&(this.tileBounds=new hn(Pe.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(Pe.tiles,this.map._requestManager._customAccessToken),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))),de&&de(be)})}loaded(){return this._loaded}hasTile(de){return!this.tileBounds||this.tileBounds.contains(de.canonical)}onAdd(de){this.map=de,this.load()}setSourceProperty(de){this._tileJSONRequest&&this._tileJSONRequest.cancel(),de(),this.load(()=>{const U=this.map.style._getSourceCaches(this.id);for(const te of U)te.clearTiles()})}setTiles(de){return this.setSourceProperty(()=>{this._options.tiles=de}),this}setUrl(de){return this.setSourceProperty(()=>{this.url=de,this._options.url=de}),this}_setLanguage(de){return de===this.language||this.setSourceProperty(()=>{this.language=de}),this}_setWorldview(de){return de===this.worldview?this:this.worldviewOptions&&de&&!this.worldviewOptions[de]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${de}".`),this):(this.setSourceProperty(()=>{this.worldview=de}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}loadTile(de,U){const te=this.map._requestManager.normalizeTileURL(de.tileID.canonical.url(this.tiles,this.scheme)),be={request:this.map._requestManager.transformRequest(te,j.ResourceType.Tile),data:void 0,uid:de.uid,tileID:de.tileID,tileZoom:de.tileZoom,zoom:de.tileID.overscaledZ,tileSize:this.tileSize*de.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:de.isSymbolTile};if(be.request.collectResourceTiming=this._collectResourceTiming,de.actor&&de.state!=="expired")de.state==="loading"?de.reloadCallback=U:de.request=de.actor.send("reloadTile",be,Pe.bind(this));else if(de.actor=this._tileWorkers[te]=this._tileWorkers[te]||this.dispatcher.getActor(),this.dispatcher.ready)de.request=de.actor.send("loadTile",be,Pe.bind(this),void 0,!0);else{const Re=j.loadVectorTile.call({deduped:this._deduped},be,(Be,Ne)=>{Be||!Ne?Pe.call(this,Be):(be.data={cacheControl:Ne.cacheControl,expires:Ne.expires,rawData:Ne.rawData.slice(0)},de.actor&&de.actor.send("loadTile",be,Pe.bind(this),void 0,!0))},!0);de.request={cancel:Re}}function Pe(Re,Be){return delete de.request,de.aborted?U(null):Re&&Re.status!==404?U(Re):(Be&&Be.resourceTiming&&(de.resourceTiming=Be.resourceTiming),this.map._refreshExpiredTiles&&Be&&de.setExpiryData(Be),de.loadVectorData(Be,this.map.painter),j.cacheEntryPossiblyAdded(this.dispatcher),U(null),void(de.reloadCallback&&(this.loadTile(de,de.reloadCallback),de.reloadCallback=null)))}}abortTile(de){de.request&&(de.request.cancel(),delete de.request),de.actor&&de.actor.send("abortTile",{uid:de.uid,type:this.type,source:this.id})}unloadTile(de){de.unloadVectorData(),de.actor&&de.actor.send("removeTile",{uid:de.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ut,"raster-dem":class extends Ut{constructor(de,U,te,be){super(de,U,te,be),this.type="raster-dem",this.maxzoom=22,this._options=j.extend({type:"raster-dem"},U),this.encoding=U.encoding||"mapbox"}loadTile(de,U){const te=this.map._requestManager.normalizeTileURL(de.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function be(Pe,Re){Pe&&(de.state="errored",U(Pe)),Re&&(de.dem=Re,de.dem.onDeserialize(),de.needsHillshadePrepare=!0,de.needsDEMTextureUpload=!0,de.state="loaded",U(null))}de.request=j.getImage(this.map._requestManager.transformRequest(te,j.ResourceType.Tile),function(Pe,Re,Be,Ne){if(delete de.request,de.aborted)de.state="unloaded",U(null);else if(Pe)de.state="errored",U(Pe);else if(Re){this.map._refreshExpiredTiles&&de.setExpiryData({cacheControl:Be,expires:Ne});const qe=j.window.ImageBitmap&&Re instanceof j.window.ImageBitmap&&(tn==null&&(tn=j.window.OffscreenCanvas&&new j.window.OffscreenCanvas(1,1).getContext("2d")&&typeof j.window.createImageBitmap=="function"),tn),Ye=1-(Re.width-j.prevPowerOfTwo(Re.width))/2;Ye<1||de.neighboringTiles||(de.neighboringTiles=this._getNeighboringTiles(de.tileID));const Je=qe?Re:j.exported.getImageData(Re,Ye),ut={uid:de.uid,coord:de.tileID,source:this.id,rawImageData:Je,encoding:this.encoding,padding:Ye};de.actor&&de.state!=="expired"||(de.actor=this.dispatcher.getActor(),de.actor.send("loadDEMTile",ut,be.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(de){const U=de.canonical,te=Math.pow(2,U.z),be=(U.x-1+te)%te,Pe=U.x===0?de.wrap-1:de.wrap,Re=(U.x+1+te)%te,Be=U.x+1===te?de.wrap+1:de.wrap,Ne={};return Ne[new j.OverscaledTileID(de.overscaledZ,Pe,U.z,be,U.y).key]={backfilled:!1},Ne[new j.OverscaledTileID(de.overscaledZ,Be,U.z,Re,U.y).key]={backfilled:!1},U.y>0&&(Ne[new j.OverscaledTileID(de.overscaledZ,Pe,U.z,be,U.y-1).key]={backfilled:!1},Ne[new j.OverscaledTileID(de.overscaledZ,de.wrap,U.z,U.x,U.y-1).key]={backfilled:!1},Ne[new j.OverscaledTileID(de.overscaledZ,Be,U.z,Re,U.y-1).key]={backfilled:!1}),U.y+1<te&&(Ne[new j.OverscaledTileID(de.overscaledZ,Pe,U.z,be,U.y+1).key]={backfilled:!1},Ne[new j.OverscaledTileID(de.overscaledZ,de.wrap,U.z,U.x,U.y+1).key]={backfilled:!1},Ne[new j.OverscaledTileID(de.overscaledZ,Be,U.z,Re,U.y+1).key]={backfilled:!1}),Ne}unloadTile(de){de.demTexture&&this.map.painter.saveTileTexture(de.demTexture),de.fbo&&(de.fbo.destroy(),delete de.fbo),de.dem&&delete de.dem,delete de.neighboringTiles,de.state="unloaded"}},geojson:class extends j.Evented{constructor(de,U,te,be){super(),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=te.getActor(),this.setEventedParent(be),this._data=U.data,this._options=j.extend({},U),this._collectResourceTiming=U.collectResourceTiming,U.maxzoom!==void 0&&(this.maxzoom=U.maxzoom),U.type&&(this.type=U.type),U.attribution&&(this.attribution=U.attribution),this.promoteId=U.promoteId;const Pe=j.EXTENT/this.tileSize;this.workerOptions=j.extend({source:this.id,cluster:U.cluster||!1,geojsonVtOptions:{buffer:(U.buffer!==void 0?U.buffer:128)*Pe,tolerance:(U.tolerance!==void 0?U.tolerance:.375)*Pe,extent:j.EXTENT,maxZoom:this.maxzoom,lineMetrics:U.lineMetrics||!1,generateId:U.generateId||!1},superclusterOptions:{maxZoom:U.clusterMaxZoom!==void 0?U.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,U.clusterMinPoints||2),extent:j.EXTENT,radius:(U.clusterRadius!==void 0?U.clusterRadius:50)*Pe,log:!1,generateId:U.generateId||!1},clusterProperties:U.clusterProperties,filter:U.filter},U.workerOptions)}onAdd(de){this.map=de,this.setData(this._data)}setData(de){return this._data=de,this._updateWorkerData(),this}getClusterExpansionZoom(de,U){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:de,source:this.id},U),this}getClusterChildren(de,U){return this.actor.send("geojson.getClusterChildren",{clusterId:de,source:this.id},U),this}getClusterLeaves(de,U,te,be){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:de,limit:U,offset:te},be),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new j.Event("dataloading",{dataType:"source"})),this._loaded=!1;const de=j.extend({},this.workerOptions),U=this._data;typeof U=="string"?(de.request=this.map._requestManager.transformRequest(j.exported.resolveURL(U),j.ResourceType.Source),de.request.collectResourceTiming=this._collectResourceTiming):de.data=JSON.stringify(U),this._pendingLoad=this.actor.send(`${this.type}.loadData`,de,(te,be)=>{if(this._loaded=!0,this._pendingLoad=null,te)this.fire(new j.ErrorEvent(te));else{const Pe={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&be&&be.resourceTiming&&be.resourceTiming[this.id]&&(Pe.resourceTiming=be.resourceTiming[this.id]),this.fire(new j.Event("data",Pe)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(de,U){const te=de.actor?"reloadTile":"loadTile";de.actor=this.actor,de.request=this.actor.send(te,{type:this.type,uid:de.uid,tileID:de.tileID,tileZoom:de.tileZoom,zoom:de.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(be,Pe)=>(delete de.request,de.unloadVectorData(),de.aborted?U(null):be?U(be):(de.loadVectorData(Pe,this.map.painter,te==="reloadTile"),U(null))),void 0,te==="loadTile")}abortTile(de){de.request&&(de.request.cancel(),delete de.request),de.aborted=!0}unloadTile(de){de.unloadVectorData(),this.actor.send("removeTile",{uid:de.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return j.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends dn{constructor(de,U,te,be){super(de,U,te,be),this.roundZoom=!0,this.type="video",this.options=U}load(){this._loaded=!1;const de=this.options;this.urls=[];for(const U of de.urls)this.urls.push(this.map._requestManager.transformRequest(U,j.ResourceType.Source).url);j.getVideo(this.urls,(U,te)=>{this._loaded=!0,U?this.fire(new j.ErrorEvent(U)):te&&(this.video=te,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(de){if(this.video){const U=this.video.seekable;de<U.start(0)||de>U.end(0)?this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${U.start(0)} and ${U.end(0)}-second mark.`))):this.video.currentTime=de}}getVideo(){return this.video}onAdd(de){this.map||(this.map=de,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const de=this.map.painter.context,U=de.gl;this.texture?this.video.paused||(this.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE),U.texSubImage2D(U.TEXTURE_2D,0,0,0,U.RGBA,U.UNSIGNED_BYTE,this.video)):(this.texture=new j.Texture(de,this.video,U.RGBA),this.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(de)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:dn,canvas:class extends dn{constructor(de,U,te,be){super(de,U,te,be),U.coordinates?Array.isArray(U.coordinates)&&U.coordinates.length===4&&!U.coordinates.some(Pe=>!Array.isArray(Pe)||Pe.length!==2||Pe.some(Re=>typeof Re!="number"))||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'missing required property "coordinates"'))),U.animate&&typeof U.animate!="boolean"&&this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'optional "animate" property must be a boolean value'))),U.canvas?typeof U.canvas=="string"||U.canvas instanceof j.window.HTMLCanvasElement||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'missing required property "canvas"'))),this.options=U,this.animate=U.animate===void 0||U.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof j.window.HTMLCanvasElement?this.options.canvas:j.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new j.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(de){this.map=de,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let de=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,de=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,de=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const U=this.map.painter.context;this.texture?(de||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new j.Texture(U,this.canvas,U.gl.RGBA,{premultiply:!0}),this._prepareData(U)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const de of[this.canvas.width,this.canvas.height])if(isNaN(de)||de<=0)return!0;return!1}},custom:class extends j.Evented{constructor(de,U,te,be){super(),this.id=de,this.type="custom",this._dataType="raster",this._dispatcher=te,this._implementation=U,this.setEventedParent(be),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new j.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new j.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new hn(this._implementation.bounds,this.minzoom,this.maxzoom)),U.update=this._update.bind(this),U.coveringTiles=this._coveringTiles.bind(this),j.extend(this,j.pick(U,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return j.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(de){this._map=de,this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(de),this.load()}onRemove(de){this._implementation.onRemove&&this._implementation.onRemove(de)}hasTile(de){if(this._implementation.hasTile){const{x:U,y:te,z:be}=de.canonical;return this._implementation.hasTile({x:U,y:te,z:be})}return!this.tileBounds||this.tileBounds.contains(de.canonical)}loadTile(de,U){const{x:te,y:be,z:Pe}=de.tileID.canonical,Re=new j.window.AbortController,Be=this._implementation.loadTile({x:te,y:be,z:Pe},{signal:Re.signal});if(!Be)return this.loadTileData(de,{width:this.tileSize,height:this.tileSize,data:null}),de.state="loaded",U(null);Be.cancel=()=>Re.abort(),de.request=Be.then(function(Ne){return delete de.request,de.aborted?(de.state="unloaded",U(null)):Ne?function(qe){return qe instanceof j.window.ImageData||qe instanceof j.window.ImageBitmap||qe instanceof j.window.HTMLCanvasElement}(Ne)?(this.loadTileData(de,Ne),de.state="loaded",void U(null)):(de.state="errored",U(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(de,{width:this.tileSize,height:this.tileSize,data:null}),de.state="loaded",U(null))}.bind(this)).catch(Ne=>{Ne.code!==20&&(de.state="errored",U(Ne))})}loadTileData(de,U){Ut.loadTileData(de,U,this._map.painter)}unloadTileData(de){Ut.unloadTileData(de,this._map.painter)}prepareTile(de){if(!this._implementation.prepareTile)return null;const{x:U,y:te,z:be}=de.tileID.canonical,Pe=this._implementation.prepareTile({x:U,y:te,z:be});return Pe?(this.loadTileData(de,Pe),de.state="loaded",Pe):null}unloadTile(de,U){if(this.unloadTileData(de),this._implementation.unloadTile){const{x:te,y:be,z:Pe}=de.tileID.canonical;this._implementation.unloadTile({x:te,y:be,z:Pe})}U()}abortTile(de,U){de.request&&de.request.cancel&&(de.request.cancel(),delete de.request),U()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(de=>({x:de.canonical.x,y:de.canonical.y,z:de.canonical.z}))}_update(){this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}}},_n=function(de,U,te,be){const Pe=new nn[U.type](de,U,te,be);if(Pe.id!==de)throw new Error(`Expected Source id to be ${de} instead of ${Pe.id}`);return j.bindAll(["load","abort","unload","serialize","prepare"],Pe),Pe};function jn(de,U){const te=j.identity([]);return j.scale(te,te,[.5*de.width,.5*-de.height,1]),j.translate(te,te,[1,-1,0]),j.multiply(te,te,de.calculateProjMatrix(U.toUnwrapped())),Float32Array.from(te)}function sr(de,U,te,be,Pe,Re,Be,Ne=!1){const qe=de.tilesIn(be,Be,Ne);qe.sort(wr);const Ye=[];for(const ut of qe)Ye.push({wrappedTileID:ut.tile.tileID.wrapped().key,queryResults:ut.tile.queryRenderedFeatures(U,te,de._state,ut,Pe,Re,jn(de.transform,ut.tile.tileID),Ne)});const Je=function(ut){const gt={},It={};for(const kt of ut){const At=kt.queryResults,St=kt.wrappedTileID,Et=It[St]=It[St]||{};for(const $t in At){const Ot=At[$t],Jt=Et[$t]=Et[$t]||{},Yt=gt[$t]=gt[$t]||[];for(const Gt of Ot)Jt[Gt.featureIndex]||(Jt[Gt.featureIndex]=!0,Yt.push(Gt))}}return gt}(Ye);for(const ut in Je)Je[ut].forEach(gt=>{const It=gt.feature,kt=It.layer;kt&&kt.type!=="background"&&kt.type!=="sky"&&(It.source=kt.source,kt["source-layer"]&&(It.sourceLayer=kt["source-layer"]),It.state=It.id!==void 0?de.getFeatureState(kt["source-layer"],It.id):{})});return Je}function Hn(de,U){const te=de.getRenderableIds().map(Re=>de.getTileByID(Re)),be=[],Pe={};for(let Re=0;Re<te.length;Re++){const Be=te[Re],Ne=Be.tileID.canonical.key;Pe[Ne]||(Pe[Ne]=!0,Be.querySourceFeatures(be,U))}return be}function wr(de,U){const te=de.tileID,be=U.tileID;return te.overscaledZ-be.overscaledZ||te.canonical.y-be.canonical.y||te.wrap-be.wrap||te.canonical.x-be.canonical.x}function Er(){return hs.workerClass!=null?new hs.workerClass:new j.window.Worker(hs.workerUrl)}const gr="mapboxgl_preloaded_worker_pool";class Tr{constructor(){this.active={}}acquire(U){if(!this.workers)for(this.workers=[];this.workers.length<Tr.workerCount;)this.workers.push(new Er);return this.active[U]=!0,this.workers.slice()}release(U){delete this.active[U],this.numActive()===0&&(this.workers.forEach(te=>{te.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[gr]}numActive(){return Object.keys(this.active).length}}let Dr;function ei(){return Dr||(Dr=new Tr),Dr}function ai(de,U){const te={};for(const be in de)be!=="ref"&&(te[be]=de[be]);return j.refProperties.forEach(be=>{be in U&&(te[be]=U[be])}),te}function ni(de){de=de.slice();const U=Object.create(null);for(let te=0;te<de.length;te++)U[de[te].id]=de[te];for(let te=0;te<de.length;te++)"ref"in de[te]&&(de[te]=ai(de[te],U[de[te].ref]));return de}Tr.workerCount=2;const xr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function gn(de,U,te){te.push({command:xr.addSource,args:[de,U[de]]})}function fo(de,U,te){U.push({command:xr.removeSource,args:[de]}),te[de]=!0}function ki(de,U,te,be){fo(de,te,be),gn(de,U,te)}function ca(de,U,te){let be;for(be in de[te])if(de[te].hasOwnProperty(be)&&be!=="data"&&!we(de[te][be],U[te][be]))return!1;for(be in U[te])if(U[te].hasOwnProperty(be)&&be!=="data"&&!we(de[te][be],U[te][be]))return!1;return!0}function Aa(de,U,te,be,Pe,Re){let Be;for(Be in U=U||{},de=de||{})de.hasOwnProperty(Be)&&(we(de[Be],U[Be])||te.push({command:Re,args:[be,Be,U[Be],Pe]}));for(Be in U)U.hasOwnProperty(Be)&&!de.hasOwnProperty(Be)&&(we(de[Be],U[Be])||te.push({command:Re,args:[be,Be,U[Be],Pe]}))}function Po(de){return de.id}function dl(de,U){return de[U.id]=U,de}class Yu{constructor(U,te){this.reset(U,te)}reset(U,te){this.points=U||[],this._distances=[0];for(let be=1;be<this.points.length;be++)this._distances[be]=this._distances[be-1]+this.points[be].dist(this.points[be-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(te||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(U){if(this.points.length===1)return this.points[0];U=j.clamp(U,0,1);let te=1,be=this._distances[te];const Pe=U*this.paddedLength+this.padding;for(;be<Pe&&te<this._distances.length;)be=this._distances[++te];const Re=te-1,Be=this._distances[Re],Ne=be-Be,qe=Ne>0?(Pe-Be)/Ne:0;return this.points[Re].mult(1-qe).add(this.points[te].mult(qe))}}class ua{constructor(U,te,be){const Pe=this.boxCells=[],Re=this.circleCells=[];this.xCellCount=Math.ceil(U/be),this.yCellCount=Math.ceil(te/be);for(let Be=0;Be<this.xCellCount*this.yCellCount;Be++)Pe.push([]),Re.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=U,this.height=te,this.xScale=this.xCellCount/U,this.yScale=this.yCellCount/te,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(U,te,be,Pe,Re){this._forEachCell(te,be,Pe,Re,this._insertBoxCell,this.boxUid++),this.boxKeys.push(U),this.bboxes.push(te),this.bboxes.push(be),this.bboxes.push(Pe),this.bboxes.push(Re)}insertCircle(U,te,be,Pe){this._forEachCell(te-Pe,be-Pe,te+Pe,be+Pe,this._insertCircleCell,this.circleUid++),this.circleKeys.push(U),this.circles.push(te),this.circles.push(be),this.circles.push(Pe)}_insertBoxCell(U,te,be,Pe,Re,Be){this.boxCells[Re].push(Be)}_insertCircleCell(U,te,be,Pe,Re,Be){this.circleCells[Re].push(Be)}_query(U,te,be,Pe,Re,Be){if(be<0||U>this.width||Pe<0||te>this.height)return!Re&&[];const Ne=[];if(U<=0&&te<=0&&this.width<=be&&this.height<=Pe){if(Re)return!0;for(let qe=0;qe<this.boxKeys.length;qe++)Ne.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(let qe=0;qe<this.circleKeys.length;qe++){const Ye=this.circles[3*qe],Je=this.circles[3*qe+1],ut=this.circles[3*qe+2];Ne.push({key:this.circleKeys[qe],x1:Ye-ut,y1:Je-ut,x2:Ye+ut,y2:Je+ut})}return Be?Ne.filter(Be):Ne}return this._forEachCell(U,te,be,Pe,this._queryCell,Ne,{hitTest:Re,seenUids:{box:{},circle:{}}},Be),Re?Ne.length>0:Ne}_queryCircle(U,te,be,Pe,Re){const Be=U-be,Ne=U+be,qe=te-be,Ye=te+be;if(Ne<0||Be>this.width||Ye<0||qe>this.height)return!Pe&&[];const Je=[];return this._forEachCell(Be,qe,Ne,Ye,this._queryCellCircle,Je,{hitTest:Pe,circle:{x:U,y:te,radius:be},seenUids:{box:{},circle:{}}},Re),Pe?Je.length>0:Je}query(U,te,be,Pe,Re){return this._query(U,te,be,Pe,!1,Re)}hitTest(U,te,be,Pe,Re){return this._query(U,te,be,Pe,!0,Re)}hitTestCircle(U,te,be,Pe){return this._queryCircle(U,te,be,!0,Pe)}_queryCell(U,te,be,Pe,Re,Be,Ne,qe){const Ye=Ne.seenUids,Je=this.boxCells[Re];if(Je!==null){const gt=this.bboxes;for(const It of Je)if(!Ye.box[It]){Ye.box[It]=!0;const kt=4*It;if(U<=gt[kt+2]&&te<=gt[kt+3]&&be>=gt[kt+0]&&Pe>=gt[kt+1]&&(!qe||qe(this.boxKeys[It]))){if(Ne.hitTest)return Be.push(!0),!0;Be.push({key:this.boxKeys[It],x1:gt[kt],y1:gt[kt+1],x2:gt[kt+2],y2:gt[kt+3]})}}}const ut=this.circleCells[Re];if(ut!==null){const gt=this.circles;for(const It of ut)if(!Ye.circle[It]){Ye.circle[It]=!0;const kt=3*It;if(this._circleAndRectCollide(gt[kt],gt[kt+1],gt[kt+2],U,te,be,Pe)&&(!qe||qe(this.circleKeys[It]))){if(Ne.hitTest)return Be.push(!0),!0;{const At=gt[kt],St=gt[kt+1],Et=gt[kt+2];Be.push({key:this.circleKeys[It],x1:At-Et,y1:St-Et,x2:At+Et,y2:St+Et})}}}}}_queryCellCircle(U,te,be,Pe,Re,Be,Ne,qe){const Ye=Ne.circle,Je=Ne.seenUids,ut=this.boxCells[Re];if(ut!==null){const It=this.bboxes;for(const kt of ut)if(!Je.box[kt]){Je.box[kt]=!0;const At=4*kt;if(this._circleAndRectCollide(Ye.x,Ye.y,Ye.radius,It[At+0],It[At+1],It[At+2],It[At+3])&&(!qe||qe(this.boxKeys[kt])))return Be.push(!0),!0}}const gt=this.circleCells[Re];if(gt!==null){const It=this.circles;for(const kt of gt)if(!Je.circle[kt]){Je.circle[kt]=!0;const At=3*kt;if(this._circlesCollide(It[At],It[At+1],It[At+2],Ye.x,Ye.y,Ye.radius)&&(!qe||qe(this.circleKeys[kt])))return Be.push(!0),!0}}}_forEachCell(U,te,be,Pe,Re,Be,Ne,qe){const Ye=this._convertToXCellCoord(U),Je=this._convertToYCellCoord(te),ut=this._convertToXCellCoord(be),gt=this._convertToYCellCoord(Pe);for(let It=Ye;It<=ut;It++)for(let kt=Je;kt<=gt;kt++)if(Re.call(this,U,te,be,Pe,this.xCellCount*kt+It,Be,Ne,qe))return}_convertToXCellCoord(U){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(U*this.xScale)))}_convertToYCellCoord(U){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(U*this.yScale)))}_circlesCollide(U,te,be,Pe,Re,Be){const Ne=Pe-U,qe=Re-te,Ye=be+Be;return Ye*Ye>Ne*Ne+qe*qe}_circleAndRectCollide(U,te,be,Pe,Re,Be,Ne){const qe=(Be-Pe)/2,Ye=Math.abs(U-(Pe+qe));if(Ye>qe+be)return!1;const Je=(Ne-Re)/2,ut=Math.abs(te-(Re+Je));if(ut>Je+be)return!1;if(Ye<=qe||ut<=Je)return!0;const gt=Ye-qe,It=ut-Je;return gt*gt+It*It<=be*be}}const lr=Math.tan(85*Math.PI/180);function Or(de,U,te,be,Pe,Re,Be){const Ne=j.create();if(te)if(Re.name==="globe"){const qe=j.calculateGlobeLabelMatrix(Pe,U);j.multiply(Ne,Ne,qe)}else{const qe=Mt([],Be);Ne[0]=qe[0],Ne[1]=qe[1],Ne[4]=qe[2],Ne[5]=qe[3],be||j.rotateZ(Ne,Ne,Pe.angle)}else j.multiply(Ne,Pe.labelPlaneMatrix,de);return Ne}function Nr(de,U,te,be,Pe,Re,Be){const Ne=Or(de,U,te,be,Pe,Re,Be);return Re.name==="globe"&&te||(Ne[2]=Ne[6]=Ne[10]=Ne[14]=0),Ne}function Oo(de,U,te,be,Pe,Re,Be){if(te){if(Re.name==="globe"){const Ne=Or(de,U,te,be,Pe,Re,Be);return j.invert(Ne,Ne),j.multiply(Ne,de,Ne),Ne}{const Ne=j.clone(de),qe=j.identity([]);return qe[0]=Be[0],qe[1]=Be[1],qe[4]=Be[2],qe[5]=Be[3],j.multiply(Ne,Ne,qe),be||j.rotateZ(Ne,Ne,-Pe.angle),Ne}}return Pe.glCoordMatrix}function Ro(de,U,te=0){const be=[de.x,de.y,te,1];te?j.transformMat4$1(be,be,U):Xi(be,be,U);const Pe=be[3];return{point:[be[0]/Pe,be[1]/Pe,be[2]/Pe],signedDistanceFromCamera:Pe}}function Pr(de,U){const te=[de[0],de[1],de[2],1];j.transformMat4$1(te,te,U);const be=te[3];return{point:[te[0]/be,te[1]/be,te[2]/be],signedDistanceFromCamera:be}}function As(de,U){return Math.min(.5+de/U*.5,1.5)}function ha(de,U){const te=de[0]/de[3],be=de[1]/de[3];return te>=-U[0]&&te<=U[0]&&be>=-U[1]&&be<=U[1]}function ks(de,U,te,be,Pe,Re,Be,Ne,qe,Ye){const Je=te.transform,ut=be?de.textSizeData:de.iconSizeData,gt=j.evaluateSizeForZoom(ut,te.transform.zoom),It=Je.projection.name==="globe",kt=[256/te.width*2+1,256/te.height*2+1],At=be?de.text.dynamicLayoutVertexArray:de.icon.dynamicLayoutVertexArray;At.clear();let St=null;It&&(St=be?de.text.globeExtVertexArray:de.icon.globeExtVertexArray);const Et=de.lineVertexArray,$t=be?de.text.placedSymbolArray:de.icon.placedSymbolArray,Ot=te.transform.width/te.transform.height;let Jt=!1;for(let Yt=0;Yt<$t.length;Yt++){const Gt=$t.get(Yt);if(Gt.writingMode!==j.WritingMode.vertical||Jt||Yt!==0&&$t.get(Yt-1).writingMode===j.WritingMode.horizontal||(Jt=!0),(Gt.hidden||Gt.writingMode===j.WritingMode.vertical)&&!Jt){pa(Gt.numGlyphs,At);continue}Jt=!1;const Kt=new j.pointGeometry(Gt.tileAnchorX,Gt.tileAnchorY),Wt=qe?qe(Kt):[0,0,0],sn=Je.projection.projectTilePoint(Kt.x,Kt.y,Ye.canonical),mn=[sn.x+Wt[0],sn.y+Wt[1],sn.z+Wt[2]],Wn=[...mn,1];if(j.transformMat4$1(Wn,Wn,U),!ha(Wn,kt)){pa(Gt.numGlyphs,At);continue}const pn=As(te.transform.cameraToCenterDistance,Wn[3]),zn=j.evaluateSizeForFeature(ut,gt,Gt),Nn=Be?zn/pn:zn*pn,er=Ro(new j.pointGeometry(mn[0],mn[1]),Pe,mn[2]);if(er.signedDistanceFromCamera<=0){pa(Gt.numGlyphs,At);continue}let kn={};const Zn=Be?null:qe,Ln=Jc(Gt,Nn,!1,Ne,U,Pe,Re,de.glyphOffsetArray,Et,At,St,er.point,Kt,kn,Ot,Zn,Je.projection,Ye,Be);Jt=Ln.useVertical,Zn&&Ln.needsFlipping&&(kn={}),(Ln.notEnoughRoom||Jt||Ln.needsFlipping&&Jc(Gt,Nn,!0,Ne,U,Pe,Re,de.glyphOffsetArray,Et,At,St,er.point,Kt,kn,Ot,Zn,Je.projection,Ye,Be).notEnoughRoom)&&pa(Gt.numGlyphs,At)}be?(de.text.dynamicLayoutVertexBuffer.updateData(At),St&&de.text.globeExtVertexBuffer.updateData(St)):(de.icon.dynamicLayoutVertexBuffer.updateData(At),St&&de.icon.globeExtVertexBuffer.updateData(St))}function _o(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At){const St=Ne.glyphStartIndex+Ne.numGlyphs,Et=Ne.lineStartIndex,$t=Ne.lineStartIndex+Ne.lineLength,Ot=U.getoffsetX(Ne.glyphStartIndex),Jt=U.getoffsetX(St-1),Yt=da(de*Ot,te,be,Pe,Re,Be,Ne.segment,Et,$t,qe,Ye,Je,ut,gt,!0,It,kt,At);if(!Yt)return null;const Gt=da(de*Jt,te,be,Pe,Re,Be,Ne.segment,Et,$t,qe,Ye,Je,ut,gt,!0,It,kt,At);return Gt?{first:Yt,last:Gt}:null}function bi(de,U,te,be){return de.writingMode===j.WritingMode.horizontal&&Math.abs(te.y-U.y)>Math.abs(te.x-U.x)*be?{useVertical:!0}:de.writingMode===j.WritingMode.vertical?U.y<te.y?{needsFlipping:!0}:null:de.flipState!==0&&function(Pe,Re,Be){const Ne=(Re.x-Pe.x)*Be;return Ne===0||Math.abs((Re.y-Pe.y)/Ne)>lr}(U,te,be)?de.flipState===1?{needsFlipping:!0}:null:U.x>te.x?{needsFlipping:!0}:null}function Jc(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At,St,Et,$t){const Ot=U/24,Jt=de.lineOffsetX*Ot,Yt=de.lineOffsetY*Ot;let Gt;if(de.numGlyphs>1){const Kt=de.glyphStartIndex+de.numGlyphs,Wt=de.lineStartIndex,sn=de.lineStartIndex+de.lineLength,mn=_o(Ot,Ne,Jt,Yt,te,ut,gt,de,qe,Re,It,At,!1,St,Et,$t);if(!mn)return{notEnoughRoom:!0};const Wn=Pr(mn.first.point,Be).point,pn=Pr(mn.last.point,Be).point,zn=new j.pointGeometry(Wn[0],Wn[1]),Nn=new j.pointGeometry(pn[0],pn[1]);if(be&&!te){const er=bi(de,zn,Nn,kt);if(de.flipState=er&&er.needsFlipping?1:2,er)return er}Gt=[mn.first];for(let er=de.glyphStartIndex+1;er<Kt-1;er++)Gt.push(da(Ot*Ne.getoffsetX(er),Jt,Yt,te,ut,gt,de.segment,Wt,sn,qe,Re,It,At,!1,!1,St,Et,$t));Gt.push(mn.last)}else{if(be&&!te){const Wt=Ro(gt,Pe).point,sn=de.lineStartIndex+de.segment+1,mn=new j.pointGeometry(qe.getx(sn),qe.gety(sn)),Wn=Ro(mn,Pe),pn=Wn.signedDistanceFromCamera>0?Wn.point:pl(gt,mn,Wt,1,Pe,void 0,St,Et.canonical),zn=bi(de,new j.pointGeometry(Wt[0],Wt[1]),new j.pointGeometry(pn[0],pn[1]),kt);if(de.flipState=zn&&zn.needsFlipping?1:2,zn)return zn}const Kt=da(Ot*Ne.getoffsetX(de.glyphStartIndex),Jt,Yt,te,ut,gt,de.segment,de.lineStartIndex,de.lineStartIndex+de.lineLength,qe,Re,It,At,!1,!1,St,Et,$t);if(!Kt)return{notEnoughRoom:!0};Gt=[Kt]}if(Je)for(const Kt of Gt)j.updateGlobeVertexNormal(Je,Ye.length+0,Kt.up[0],Kt.up[1],Kt.up[2]),j.updateGlobeVertexNormal(Je,Ye.length+1,Kt.up[0],Kt.up[1],Kt.up[2]),j.updateGlobeVertexNormal(Je,Ye.length+2,Kt.up[0],Kt.up[1],Kt.up[2]),j.updateGlobeVertexNormal(Je,Ye.length+3,Kt.up[0],Kt.up[1],Kt.up[2]),j.addDynamicAttributes(Ye,Kt.point[0],Kt.point[1],Kt.point[2],Kt.angle);else for(const Kt of Gt)j.addDynamicAttributes(Ye,Kt.point[0],Kt.point[1],Kt.point[2],Kt.angle);return{}}function Xa(de,U,te,be,Pe){const Re=be.projectTilePoint(de.x,de.y,U);if(!Pe)return Ro(Re,te,Re.z);const Be=Pe(de);return Ro(new j.pointGeometry(Re.x+Be[0],Re.y+Be[1]),te,Re.z+Be[2])}function pl(de,U,te,be,Pe,Re,Be,Ne){const qe=Xa(de.add(de.sub(U)._unit()),Ne,Pe,Be,Re).point,Ye=j.sub([],te,qe);return j.scaleAndAdd([],te,Ye,be/j.length(Ye))}function da(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At,St,Et){const $t=be?de-U:de+U;let Ot=$t>0?1:-1,Jt=0;be&&(Ot*=-1,Jt=Math.PI),Ot<0&&(Jt+=Math.PI);let Yt=Ot>0?Ne+Be:Ne+Be+1,Gt=Pe,Kt=Pe,Wt=0,sn=0;const mn=Math.abs($t),Wn=[],pn=[];let zn=Re;const Nn=()=>{const _r=Yt-Ot;return Wt===0?Re:new j.pointGeometry(Ye.getx(_r),Ye.gety(_r))},er=()=>pl(Nn(),zn,Kt,mn-Wt+1,Je,gt,At,St.canonical);for(;Wt+sn<=mn;){if(Yt+=Ot,Yt<Ne||Yt>=qe)return null;if(Kt=Gt,Wn.push(Gt),It&&pn.push(zn||Nn()),Gt=ut[Yt],Gt===void 0){zn=new j.pointGeometry(Ye.getx(Yt),Ye.gety(Yt));const _r=Xa(zn,St.canonical,Je,At,gt);Gt=_r.signedDistanceFromCamera>0?ut[Yt]=_r.point:er()}else zn=null;Wt+=sn,sn=j.distance(Kt,Gt)}zn=zn||new j.pointGeometry(Ye.getx(Yt),Ye.gety(Yt));const kn=Nn();kt&&gt&&(ut[Yt]=Gt=ut[Yt]===void 0?Gt:er(),sn=j.distance(Kt,Gt));const Zn=(mn-Wt)/sn,Ln=zn.sub(kn).mult(Zn)._add(kn),or=j.sub([],Gt,Kt),tr=j.scaleAndAdd([],Kt,or,Zn);let pr=[0,0,1],yr=or[0],Ar=or[1];if(Et&&(pr=At.upVector(St.canonical,Ln.x,Ln.y),pr[0]!==0||pr[1]!==0||pr[2]!==1)){const _r=[1,0,0],Mr=[0,1,0];_r[0]=pr[2],_r[1]=0,_r[2]=-pr[0],j.cross(Mr,pr,_r),j.normalize(_r,_r),j.normalize(Mr,Mr),yr=j.dot(or,_r),Ar=j.dot(or,Mr)}if(te){const _r=j.cross([],pr,or);j.normalize(_r,_r),j.scaleAndAdd(tr,tr,_r,te*Ot)}const Vr=Jt+Math.atan2(Ar,yr);return Wn.push(tr),It&&pn.push(Ln),{point:tr,angle:Vr,path:Wn,tilePath:pn,up:pr}}const ic=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pa(de,U){for(let te=0;te<de;te++){const be=U.length;U.resize(be+4),U.float32.set(ic,4*be)}}function Xi(de,U,te){const be=U[0],Pe=U[1];return de[0]=te[0]*be+te[4]*Pe+te[12],de[1]=te[1]*be+te[5]*Pe+te[13],de[3]=te[3]*be+te[7]*Pe+te[15],de}const ii=100;class oc{constructor(U,te,be=new ua(U.width+200,U.height+200,25),Pe=new ua(U.width+200,U.height+200,25)){this.transform=U,this.grid=be,this.ignoredGrid=Pe,this.pitchfactor=Math.cos(U._pitch)*U.cameraToCenterDistance,this.screenRightBoundary=U.width+ii,this.screenBottomBoundary=U.height+ii,this.gridRightBoundary=U.width+200,this.gridBottomBoundary=U.height+200,this.fogState=te}placeCollisionBox(U,te,be,Pe,Re,Be,Ne,qe){let Ye=be.projectedAnchorX,Je=be.projectedAnchorY,ut=be.projectedAnchorZ;const gt=be.elevation,It=be.tileID;if(gt&&It){const Yt=U.getProjection().upVector(It.canonical,be.tileAnchorX,be.tileAnchorY),Gt=U.getProjection().upVectorScale(It.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Ye+=Yt[0]*gt*Gt,Je+=Yt[1]*gt*Gt,ut+=Yt[2]*gt*Gt}const kt=this.projectAndGetPerspectiveRatio(Ne,[Ye,Je,ut],be.tileID,U.projection.name==="globe"||!!gt||this.transform.pitch>0,U.getProjection()),At=Be*kt.perspectiveRatio,St=(be.x1*te+Pe.x-be.padding)*At+kt.point.x,Et=(be.y1*te+Pe.y-be.padding)*At+kt.point.y,$t=(be.x2*te+Pe.x+be.padding)*At+kt.point.x,Ot=(be.y2*te+Pe.y+be.padding)*At+kt.point.y,Jt=kt.perspectiveRatio<=.55||kt.occluded;return!this.isInsideGrid(St,Et,$t,Ot)||!Re&&this.grid.hitTest(St,Et,$t,Ot,qe)||Jt?{box:[],offscreen:!1,occluded:kt.occluded}:{box:[St,Et,$t,Ot],offscreen:this.isOffscreen(St,Et,$t,Ot),occluded:!1}}placeCollisionCircles(U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At){const St=[],Et=this.transform.elevation,$t=Et?Et.getAtTileOffsetFunc(At,this.transform.center.lat,this.transform.worldSize,U.getProjection()):kn=>[0,0,0],Ot=new j.pointGeometry(be.tileAnchorX,be.tileAnchorY),Jt=U.getProjection().projectTilePoint(be.tileAnchorX,be.tileAnchorY,At.canonical),Yt=$t(Ot),Gt=[Jt.x+Yt[0],Jt.y+Yt[1],Jt.z+Yt[2]],Kt=U.projection.name==="globe",Wt=this.projectAndGetPerspectiveRatio(Ne,[Gt[0],Gt[1],Gt[2]],At,Kt||!!Et||this.transform.pitch>0,U.getProjection()),{perspectiveRatio:sn}=Wt,mn=(ut?Be/sn:Be*sn)/j.ONE_EM,Wn=Ro(new j.pointGeometry(Gt[0],Gt[1]),qe,Gt[2]).point,pn=Wt.signedDistanceFromCamera>0?_o(mn,Re,be.lineOffsetX*mn,be.lineOffsetY*mn,!1,Wn,Ot,be,Pe,qe,{},Et&&!ut?$t:null,ut&&!!Et,U.getProjection(),At,ut):null;let zn=!1,Nn=!1,er=!0;if(pn&&!Wt.occluded){const kn=.5*It*sn+kt,Zn=new j.pointGeometry(-100,-100),Ln=new j.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),or=new Yu,tr=pn.first,pr=pn.last;let yr=[];for(let _r=tr.path.length-1;_r>=1;_r--)yr.push(tr.path[_r]);for(let _r=1;_r<pr.path.length;_r++)yr.push(pr.path[_r]);const Ar=2.5*kn;if(Ye){const _r=yr.map(Et&&!Kt?(Mr,Zr)=>{const ci=$t(Zr<tr.path.length-1?tr.tilePath[tr.path.length-1-Zr]:pr.tilePath[Zr-tr.path.length+2]);return Mr[2]=ci[2],Pr(Mr,Ye)}:Mr=>Pr(Mr,Ye));yr=_r.some(Mr=>Mr.signedDistanceFromCamera<=0)?[]:_r.map(Mr=>Mr.point)}let Vr=[];if(yr.length>0){const _r=yr.map(oi=>new j.pointGeometry(oi[0],oi[1]));let Mr=1/0,Zr=-1/0,ci=1/0,wi=-1/0;for(let oi=0;oi<_r.length;oi++)Mr=Math.min(Mr,_r[oi].x),ci=Math.min(ci,_r[oi].y),Zr=Math.max(Zr,_r[oi].x),wi=Math.max(wi,_r[oi].y);Vr=Mr>=Zn.x&&Zr<=Ln.x&&ci>=Zn.y&&wi<=Ln.y?[_r]:Zr<Zn.x||Mr>Ln.x||wi<Zn.y||ci>Ln.y?[]:j.clipLine([_r],Zn.x,Zn.y,Ln.x,Ln.y)}for(const _r of Vr){or.reset(_r,.25*kn);let Mr=0;Mr=or.length<=.5*kn?1:Math.ceil(or.paddedLength/Ar)+1;for(let Zr=0;Zr<Mr;Zr++){const ci=Zr/Math.max(Mr-1,1),wi=or.lerp(ci),oi=wi.x+ii,Wi=wi.y+ii;St.push(oi,Wi,kn,0);const To=oi-kn,oa=Wi-kn,_i=oi+kn,vi=Wi+kn;if(er=er&&this.isOffscreen(To,oa,_i,vi),Nn=Nn||this.isInsideGrid(To,oa,_i,vi),!te&&this.grid.hitTestCircle(oi,Wi,kn,gt)&&(zn=!0,!Je))return{circles:[],offscreen:!1,collisionDetected:zn,occluded:!1}}}}return{circles:!Je&&zn||!Nn?[]:St,offscreen:er,collisionDetected:zn,occluded:Wt.occluded}}queryRenderedSymbols(U){if(U.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const te=[];let be=1/0,Pe=1/0,Re=-1/0,Be=-1/0;for(const Je of U){const ut=new j.pointGeometry(Je.x+ii,Je.y+ii);be=Math.min(be,ut.x),Pe=Math.min(Pe,ut.y),Re=Math.max(Re,ut.x),Be=Math.max(Be,ut.y),te.push(ut)}const Ne=this.grid.query(be,Pe,Re,Be).concat(this.ignoredGrid.query(be,Pe,Re,Be)),qe={},Ye={};for(const Je of Ne){const ut=Je.key;if(qe[ut.bucketInstanceId]===void 0&&(qe[ut.bucketInstanceId]={}),qe[ut.bucketInstanceId][ut.featureIndex])continue;const gt=[new j.pointGeometry(Je.x1,Je.y1),new j.pointGeometry(Je.x2,Je.y1),new j.pointGeometry(Je.x2,Je.y2),new j.pointGeometry(Je.x1,Je.y2)];j.polygonIntersectsPolygon(te,gt)&&(qe[ut.bucketInstanceId][ut.featureIndex]=!0,Ye[ut.bucketInstanceId]===void 0&&(Ye[ut.bucketInstanceId]=[]),Ye[ut.bucketInstanceId].push(ut.featureIndex))}return Ye}insertCollisionBox(U,te,be,Pe,Re){(te?this.ignoredGrid:this.grid).insert({bucketInstanceId:be,featureIndex:Pe,collisionGroupID:Re},U[0],U[1],U[2],U[3])}insertCollisionCircles(U,te,be,Pe,Re){const Be=te?this.ignoredGrid:this.grid,Ne={bucketInstanceId:be,featureIndex:Pe,collisionGroupID:Re};for(let qe=0;qe<U.length;qe+=4)Be.insertCircle(Ne,U[qe],U[qe+1],U[qe+2])}projectAndGetPerspectiveRatio(U,te,be,Pe,Re){const Be=[te[0],te[1],te[2],1];let Ne=!1;if(te[2]||this.transform.pitch>0){j.transformMat4$1(Be,Be,U);const qe=Re.name==="globe";this.fogState&&be&&!qe&&(Ne=function(Ye,Je,ut,gt,It,kt){const At=kt.calculateFogTileMatrix(It),St=[Je,ut,gt];return j.transformMat4(St,St,At),xt(Ye,St,kt.pitch,kt._fov)}(this.fogState,te[0],te[1],te[2],be.toUnwrapped(),this.transform)>.9)}else Xi(Be,Be,U);return{point:new j.pointGeometry((Be[0]/Be[3]+1)/2*this.transform.width+ii,(-Be[1]/Be[3]+1)/2*this.transform.height+ii),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Re)/Be[3]*.5,1.5),signedDistanceFromCamera:Be[3],occluded:Pe&&Be[2]>Be[3]||Ne}}isOffscreen(U,te,be,Pe){return be<ii||U>=this.screenRightBoundary||Pe<ii||te>this.screenBottomBoundary}isInsideGrid(U,te,be,Pe){return be>=0&&U<this.gridRightBoundary&&Pe>=0&&te<this.gridBottomBoundary}getViewportMatrix(){const U=j.identity([]);return j.translate(U,U,[-100,-100,0]),U}}function Ss(de,U,te){const be=U.createTileMatrix(de,de.worldSize,te.toUnwrapped());return j.multiply(new Float32Array(16),de.projMatrix,be)}function ao(de,U,te){if(U.projection.name===te.projection.name)return de.projMatrix;const be=te.clone();return be.setProjection(U.projection),Ss(be,U.getProjection(),de)}function so(de,U,te){return U.name===te.projection.name?de.projMatrix:Ss(te,U,de)}class ac{constructor(U,te,be,Pe){this.opacity=U?Math.max(0,Math.min(1,U.opacity+(U.placed?te:-te))):Pe&&be?1:0,this.placed=be}isHidden(){return this.opacity===0&&!this.placed}}class fa{constructor(U,te,be,Pe,Re,Be=!1){this.text=new ac(U?U.text:null,te,be,Re),this.icon=new ac(U?U.icon:null,te,Pe,Re),this.clipped=Be}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Oi{constructor(U,te,be,Pe=!1){this.text=U,this.icon=te,this.skipFade=be,this.clipped=Pe}}class Cs{constructor(){this.invProjMatrix=j.create(),this.viewportMatrix=j.create(),this.circles=[]}}class Ms{constructor(U,te,be,Pe,Re){this.bucketInstanceId=U,this.featureIndex=te,this.sourceLayerIndex=be,this.bucketIndex=Pe,this.tileID=Re}}class Is{constructor(U){this.crossSourceCollisions=U,this.maxGroupID=0,this.collisionGroups={}}get(U){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[U]){const te=++this.maxGroupID;this.collisionGroups[U]={ID:te,predicate:be=>be.collisionGroupID===te}}return this.collisionGroups[U]}}function Ui(de,U,te,be,Pe){const{horizontalAlign:Re,verticalAlign:Be}=j.getAnchorAlignment(de),Ne=-(Re-.5)*U,qe=-(Be-.5)*te,Ye=j.evaluateVariableOffset(de,be);return new j.pointGeometry(Ne+Ye[0]*Pe,qe+Ye[1]*Pe)}function Ps(de,U,te,be,Pe){const Re=new j.pointGeometry(de,U);return te&&Re._rotate(be?Pe:-Pe),Re}class Os{constructor(U,te,be,Pe,Re){this.transform=U.clone(),this.projection=U.projection.name,this.collisionIndex=new oc(this.transform,Re),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=te,this.retainedQueryData={},this.collisionGroups=new Is(be),this.collisionCircleArrays={},this.prevPlacement=Pe,Pe&&(Pe.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(U,te,be,Pe){const Re=be.getBucket(te),Be=be.latestFeatureIndex;if(!Re||!Be||te.id!==Re.layerIds[0])return;const Ne=Re.layers[0].layout,qe=be.collisionBoxArray,Ye=Math.pow(2,this.transform.zoom-be.tileID.overscaledZ),Je=be.tileSize/j.EXTENT,ut=be.tileID.toUnwrapped();this.transform.setProjection(Re.projection);const gt=(It=be.tileID,kt=Re.getProjection(),At=this.transform,kt.name===this.projection?At.calculateProjMatrix(It.toUnwrapped()):Ss(At,kt,It));var It,kt,At;const St=Ne.get("text-pitch-alignment")==="map",Et=Ne.get("text-rotation-alignment")==="map";te.compileFilter();const $t=te.dynamicFilter(),Ot=te.dynamicFilterNeedsFeature(),Jt=this.transform.calculatePixelsToTileUnitsMatrix(be),Yt=Nr(gt,be.tileID.canonical,St,Et,this.transform,Re.getProjection(),Jt);let Gt=null;if(St){const sn=Oo(gt,be.tileID.canonical,St,Et,this.transform,Re.getProjection(),Jt);Gt=j.multiply([],this.transform.labelPlaneMatrix,sn)}let Kt=null;$t&&be.latestFeatureIndex&&(Kt={unwrappedTileID:ut,dynamicFilter:$t,dynamicFilterNeedsFeature:Ot,featureIndex:be.latestFeatureIndex}),this.retainedQueryData[Re.bucketInstanceId]=new Ms(Re.bucketInstanceId,Be,Re.sourceLayerIndex,Re.index,be.tileID);const Wt={bucket:Re,layout:Ne,posMatrix:gt,textLabelPlaneMatrix:Yt,labelToScreenMatrix:Gt,clippingData:Kt,scale:Ye,textPixelRatio:Je,holdingForFade:be.holdingForFade(),collisionBoxArray:qe,partiallyEvaluatedTextSize:j.evaluateSizeForZoom(Re.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:j.evaluateSizeForZoom(Re.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Re.sourceID)};if(Pe)for(const sn of Re.sortKeyRanges){const{sortKey:mn,symbolInstanceStart:Wn,symbolInstanceEnd:pn}=sn;U.push({sortKey:mn,symbolInstanceStart:Wn,symbolInstanceEnd:pn,parameters:Wt})}else U.push({symbolInstanceStart:0,symbolInstanceEnd:Re.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At,St,Et,$t){const Ot=[gt.textOffset0,gt.textOffset1],Jt=Ui(U,be,Pe,Ot,Re),Yt=this.collisionIndex.placeCollisionBox(kt,Re,te,Ps(Jt.x,Jt.y,Be,Ne,this.transform.angle),ut,qe,Ye,Je.predicate);if((!St||this.collisionIndex.placeCollisionBox(kt,kt.getSymbolInstanceIconSize($t,this.transform.zoom,It),St,Ps(Jt.x,Jt.y,Be,Ne,this.transform.angle),ut,qe,Ye,Je.predicate).box.length!==0)&&Yt.box.length>0){let Gt;return this.prevPlacement&&this.prevPlacement.variableOffsets[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID].text&&(Gt=this.prevPlacement.variableOffsets[gt.crossTileID].anchor),this.variableOffsets[gt.crossTileID]={textOffset:Ot,width:be,height:Pe,anchor:U,textScale:Re,prevAnchor:Gt},this.markUsedJustification(kt,U,gt,At),kt.allowVerticalPlacement&&(this.markUsedOrientation(kt,At,gt),this.placedOrientations[gt.crossTileID]=At),{shift:Jt,placedGlyphBoxes:Yt}}}placeLayerBucketPart(U,te,be,Pe){const{bucket:Re,layout:Be,posMatrix:Ne,textLabelPlaneMatrix:qe,labelToScreenMatrix:Ye,clippingData:Je,textPixelRatio:ut,holdingForFade:gt,collisionBoxArray:It,partiallyEvaluatedTextSize:kt,partiallyEvaluatedIconSize:At,collisionGroup:St}=U.parameters,Et=Be.get("text-optional"),$t=Be.get("icon-optional"),Ot=Be.get("text-allow-overlap"),Jt=Be.get("icon-allow-overlap"),Yt=Be.get("text-rotation-alignment")==="map",Gt=Be.get("text-pitch-alignment")==="map",Kt=Be.get("icon-text-fit")!=="none",Wt=Be.get("symbol-z-order")==="viewport-y";this.transform.setProjection(Re.projection);let sn=Ot&&(Jt||!Re.hasIconData()||$t),mn=Jt&&(Ot||!Re.hasTextData()||Et);!Re.collisionArrays&&It&&Re.deserializeCollisionBoxes(It),be&&Pe&&Re.updateCollisionDebugBuffers(this.transform.zoom,It);const Wn=(pn,zn,Nn)=>{if(Je){const _i={zoom:this.transform.zoom,pitch:this.transform.pitch};let vi=null;if(Je.dynamicFilterNeedsFeature){const zr=this.retainedQueryData[Re.bucketInstanceId];vi=Je.featureIndex.loadFeature({featureIndex:pn.featureIndex,bucketIndex:zr.bucketIndex,sourceLayerIndex:zr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Je.dynamicFilter)(_i,vi,this.retainedQueryData[Re.bucketInstanceId].tileID.canonical,new j.pointGeometry(pn.tileAnchorX,pn.tileAnchorY),this.transform.calculateDistanceTileData(Je.unwrappedTileID)))return this.placements[pn.crossTileID]=new Oi(!1,!1,!1,!0),void(te[pn.crossTileID]=!0)}if(te[pn.crossTileID])return;if(gt)return void(this.placements[pn.crossTileID]=new Oi(!1,!1,!1));let er=!1,kn=!1,Zn=!0,Ln=!1,or=!1,tr=null,pr={box:null,offscreen:null,occluded:null},yr={box:null,offscreen:null,occluded:null},Ar=null,Vr=null,_r=null,Mr=0,Zr=0,ci=0;Nn.textFeatureIndex?Mr=Nn.textFeatureIndex:pn.useRuntimeCollisionCircles&&(Mr=pn.featureIndex),Nn.verticalTextFeatureIndex&&(Zr=Nn.verticalTextFeatureIndex);const wi=_i=>{_i.tileID=this.retainedQueryData[Re.bucketInstanceId].tileID,(this.transform.elevation||_i.elevation)&&(_i.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[Re.bucketInstanceId].tileID,_i.tileAnchorX,_i.tileAnchorY):0)},oi=Nn.textBox;if(oi){wi(oi);const _i=zr=>{let zi=j.WritingMode.horizontal;if(Re.allowVerticalPlacement&&!zr&&this.prevPlacement){const $i=this.prevPlacement.placedOrientations[pn.crossTileID];$i&&(this.placedOrientations[pn.crossTileID]=$i,zi=$i,this.markUsedOrientation(Re,zi,pn))}return zi},vi=(zr,zi)=>{if(Re.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&Nn.verticalTextBox){for(const $i of Re.writingModes)if($i===j.WritingMode.vertical?(pr=zi(),yr=pr):pr=zr(),pr&&pr.box&&pr.box.length)break}else pr=zr()};if(Be.get("text-variable-anchor")){let zr=Be.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[pn.crossTileID]){const ui=this.prevPlacement.variableOffsets[pn.crossTileID];zr.indexOf(ui.anchor)>0&&(zr=zr.filter(Yi=>Yi!==ui.anchor),zr.unshift(ui.anchor))}const zi=(ui,Yi,$a)=>{const to=Re.getSymbolInstanceTextSize(kt,pn,this.transform.zoom,zn),go=(ui.x2-ui.x1)*to+2*ui.padding,Da=(ui.y2-ui.y1)*to+2*ui.padding,La=Kt&&!Jt?Yi:null;La&&wi(La);let no={box:[],offscreen:!1,occluded:!1};const Ba=Ot?2*zr.length:zr.length;for(let qo=0;qo<Ba;++qo){const ol=this.attemptAnchorPlacement(zr[qo%zr.length],ui,go,Da,to,Yt,Gt,ut,Ne,St,qo>=zr.length,pn,zn,Re,$a,La,kt,At);if(ol&&(no=ol.placedGlyphBoxes,no&&no.box&&no.box.length)){er=!0,tr=ol.shift;break}}return no};vi(()=>zi(oi,Nn.iconBox,j.WritingMode.horizontal),()=>{const ui=Nn.verticalTextBox;return ui&&wi(ui),Re.allowVerticalPlacement&&!(pr&&pr.box&&pr.box.length)&&pn.numVerticalGlyphVertices>0&&ui?zi(ui,Nn.verticalIconBox,j.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),pr&&(er=pr.box,Zn=pr.offscreen,Ln=pr.occluded);const $i=_i(pr&&pr.box);if(!er&&this.prevPlacement){const ui=this.prevPlacement.variableOffsets[pn.crossTileID];ui&&(this.variableOffsets[pn.crossTileID]=ui,this.markUsedJustification(Re,ui.anchor,pn,$i))}}else{const zr=(zi,$i)=>{const ui=Re.getSymbolInstanceTextSize(kt,pn,this.transform.zoom,zn),Yi=this.collisionIndex.placeCollisionBox(Re,ui,zi,new j.pointGeometry(0,0),Ot,ut,Ne,St.predicate);return Yi&&Yi.box&&Yi.box.length&&(this.markUsedOrientation(Re,$i,pn),this.placedOrientations[pn.crossTileID]=$i),Yi};vi(()=>zr(oi,j.WritingMode.horizontal),()=>{const zi=Nn.verticalTextBox;return Re.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&zi?(wi(zi),zr(zi,j.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),_i(pr&&pr.box&&pr.box.length)}}if(Ar=pr,er=Ar&&Ar.box&&Ar.box.length>0,Zn=Ar&&Ar.offscreen,Ln=Ar&&Ar.occluded,pn.useRuntimeCollisionCircles){const _i=Re.text.placedSymbolArray.get(pn.centerJustifiedTextSymbolIndex>=0?pn.centerJustifiedTextSymbolIndex:pn.verticalPlacedTextSymbolIndex),vi=j.evaluateSizeForFeature(Re.textSizeData,kt,_i),zr=Be.get("text-padding");Vr=this.collisionIndex.placeCollisionCircles(Re,Ot,_i,Re.lineVertexArray,Re.glyphOffsetArray,vi,Ne,qe,Ye,be,Gt,St.predicate,pn.collisionCircleDiameter*vi/j.ONE_EM,zr,this.retainedQueryData[Re.bucketInstanceId].tileID),er=Ot||Vr.circles.length>0&&!Vr.collisionDetected,Zn=Zn&&Vr.offscreen,Ln=Vr.occluded}if(Nn.iconFeatureIndex&&(ci=Nn.iconFeatureIndex),Nn.iconBox){const _i=vi=>{wi(vi);const zr=Kt&&tr?Ps(tr.x,tr.y,Yt,Gt,this.transform.angle):new j.pointGeometry(0,0),zi=Re.getSymbolInstanceIconSize(At,this.transform.zoom,zn);return this.collisionIndex.placeCollisionBox(Re,zi,vi,zr,Jt,ut,Ne,St.predicate)};yr&&yr.box&&yr.box.length&&Nn.verticalIconBox?(_r=_i(Nn.verticalIconBox),kn=_r.box.length>0):(_r=_i(Nn.iconBox),kn=_r.box.length>0),Zn=Zn&&_r.offscreen,or=_r.occluded}const Wi=Et||pn.numHorizontalGlyphVertices===0&&pn.numVerticalGlyphVertices===0,To=$t||pn.numIconVertices===0;if(Wi||To?To?Wi||(kn=kn&&er):er=kn&&er:kn=er=kn&&er,er&&Ar&&Ar.box&&this.collisionIndex.insertCollisionBox(Ar.box,Be.get("text-ignore-placement"),Re.bucketInstanceId,yr&&yr.box&&Zr?Zr:Mr,St.ID),kn&&_r&&this.collisionIndex.insertCollisionBox(_r.box,Be.get("icon-ignore-placement"),Re.bucketInstanceId,ci,St.ID),Vr&&(er&&this.collisionIndex.insertCollisionCircles(Vr.circles,Be.get("text-ignore-placement"),Re.bucketInstanceId,Mr,St.ID),be)){const _i=Re.bucketInstanceId;let vi=this.collisionCircleArrays[_i];vi===void 0&&(vi=this.collisionCircleArrays[_i]=new Cs);for(let zr=0;zr<Vr.circles.length;zr+=4)vi.circles.push(Vr.circles[zr+0]),vi.circles.push(Vr.circles[zr+1]),vi.circles.push(Vr.circles[zr+2]),vi.circles.push(Vr.collisionDetected?1:0)}const oa=Re.projection.name!=="globe";sn=sn&&(oa||!Ln),mn=mn&&(oa||!or),this.placements[pn.crossTileID]=new Oi(er||sn,kn||mn,Zn||Re.justReloaded),te[pn.crossTileID]=!0};if(Wt){const pn=Re.getSortedSymbolIndexes(this.transform.angle);for(let zn=pn.length-1;zn>=0;--zn){const Nn=pn[zn];Wn(Re.symbolInstances.get(Nn),Nn,Re.collisionArrays[Nn])}}else for(let pn=U.symbolInstanceStart;pn<U.symbolInstanceEnd;pn++)Wn(Re.symbolInstances.get(pn),pn,Re.collisionArrays[pn]);if(be&&Re.bucketInstanceId in this.collisionCircleArrays){const pn=this.collisionCircleArrays[Re.bucketInstanceId];j.invert(pn.invProjMatrix,Ne),pn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Re.justReloaded=!1}markUsedJustification(U,te,be,Pe){let Re;Re=Pe===j.WritingMode.vertical?be.verticalPlacedTextSymbolIndex:{left:be.leftJustifiedTextSymbolIndex,center:be.centerJustifiedTextSymbolIndex,right:be.rightJustifiedTextSymbolIndex}[j.getAnchorJustification(te)];const Be=[be.leftJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.rightJustifiedTextSymbolIndex,be.verticalPlacedTextSymbolIndex];for(const Ne of Be)Ne>=0&&(U.text.placedSymbolArray.get(Ne).crossTileID=Re>=0&&Ne!==Re?0:be.crossTileID)}markUsedOrientation(U,te,be){const Pe=te===j.WritingMode.horizontal||te===j.WritingMode.horizontalOnly?te:0,Re=te===j.WritingMode.vertical?te:0,Be=[be.leftJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.rightJustifiedTextSymbolIndex];for(const Ne of Be)U.text.placedSymbolArray.get(Ne).placedOrientation=Pe;be.verticalPlacedTextSymbolIndex&&(U.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).placedOrientation=Re)}commit(U){this.commitTime=U,this.zoomAtLastRecencyCheck=this.transform.zoom;const te=this.prevPlacement;let be=!1;this.prevZoomAdjustment=te?te.zoomAdjustment(this.transform.zoom):0;const Pe=te?te.symbolFadeChange(U):1,Re=te?te.opacities:{},Be=te?te.variableOffsets:{},Ne=te?te.placedOrientations:{};for(const qe in this.placements){const Ye=this.placements[qe],Je=Re[qe];Je?(this.opacities[qe]=new fa(Je,Pe,Ye.text,Ye.icon,null,Ye.clipped),be=be||Ye.text!==Je.text.placed||Ye.icon!==Je.icon.placed):(this.opacities[qe]=new fa(null,Pe,Ye.text,Ye.icon,Ye.skipFade,Ye.clipped),be=be||Ye.text||Ye.icon)}for(const qe in Re){const Ye=Re[qe];if(!this.opacities[qe]){const Je=new fa(Ye,Pe,!1,!1);Je.isHidden()||(this.opacities[qe]=Je,be=be||Ye.text.placed||Ye.icon.placed)}}for(const qe in Be)this.variableOffsets[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.variableOffsets[qe]=Be[qe]);for(const qe in Ne)this.placedOrientations[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.placedOrientations[qe]=Ne[qe]);be?this.lastPlacementChangeTime=U:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=te?te.lastPlacementChangeTime:U)}updateLayerOpacities(U,te){const be={};for(const Pe of te){const Re=Pe.getBucket(U);Re&&Pe.latestFeatureIndex&&U.id===Re.layerIds[0]&&this.updateBucketOpacities(Re,be,Pe.collisionBoxArray)}}updateBucketOpacities(U,te,be){U.hasTextData()&&U.text.opacityVertexArray.clear(),U.hasIconData()&&U.icon.opacityVertexArray.clear(),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexArray.clear(),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexArray.clear();const Pe=U.layers[0].layout,Re=!!U.layers[0].dynamicFilter(),Be=new fa(null,0,!1,!1,!0),Ne=Pe.get("text-allow-overlap"),qe=Pe.get("icon-allow-overlap"),Ye=Pe.get("text-variable-anchor"),Je=Pe.get("text-rotation-alignment")==="map",ut=Pe.get("text-pitch-alignment")==="map",gt=Pe.get("icon-text-fit")!=="none",It=new fa(null,0,Ne&&(qe||!U.hasIconData()||Pe.get("icon-optional")),qe&&(Ne||!U.hasTextData()||Pe.get("text-optional")),!0);!U.collisionArrays&&be&&(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())&&U.deserializeCollisionBoxes(be);const kt=(St,Et,$t)=>{for(let Ot=0;Ot<Et/4;Ot++)St.opacityVertexArray.emplaceBack($t)};let At=0;for(let St=0;St<U.symbolInstances.length;St++){const Et=U.symbolInstances.get(St),{numHorizontalGlyphVertices:$t,numVerticalGlyphVertices:Ot,crossTileID:Jt}=Et;let Yt=this.opacities[Jt];te[Jt]?Yt=Be:Yt||(Yt=It,this.opacities[Jt]=Yt),te[Jt]=!0;const Gt=$t>0||Ot>0,Kt=Et.numIconVertices>0,Wt=this.placedOrientations[Et.crossTileID],sn=Wt===j.WritingMode.vertical,mn=Wt===j.WritingMode.horizontal||Wt===j.WritingMode.horizontalOnly;if(!Gt&&!Kt||Yt.isHidden()||At++,Gt){const Wn=Sa(Yt.text);kt(U.text,$t,sn?lo:Wn),kt(U.text,Ot,mn?lo:Wn);const pn=Yt.text.isHidden();[Et.rightJustifiedTextSymbolIndex,Et.centerJustifiedTextSymbolIndex,Et.leftJustifiedTextSymbolIndex].forEach(er=>{er>=0&&(U.text.placedSymbolArray.get(er).hidden=pn||sn?1:0)}),Et.verticalPlacedTextSymbolIndex>=0&&(U.text.placedSymbolArray.get(Et.verticalPlacedTextSymbolIndex).hidden=pn||mn?1:0);const zn=this.variableOffsets[Et.crossTileID];zn&&this.markUsedJustification(U,zn.anchor,Et,Wt);const Nn=this.placedOrientations[Et.crossTileID];Nn&&(this.markUsedJustification(U,"left",Et,Nn),this.markUsedOrientation(U,Nn,Et))}if(Kt){const Wn=Sa(Yt.icon);Et.placedIconSymbolIndex>=0&&(kt(U.icon,Et.numIconVertices,sn?lo:Wn),U.icon.placedSymbolArray.get(Et.placedIconSymbolIndex).hidden=Yt.icon.isHidden()),Et.verticalPlacedIconSymbolIndex>=0&&(kt(U.icon,Et.numVerticalIconVertices,mn?lo:Wn),U.icon.placedSymbolArray.get(Et.verticalPlacedIconSymbolIndex).hidden=Yt.icon.isHidden())}if(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData()){const Wn=U.collisionArrays[St];if(Wn){let pn=new j.pointGeometry(0,0),zn=!0;if(Wn.textBox||Wn.verticalTextBox){if(Ye){const er=this.variableOffsets[Jt];er?(pn=Ui(er.anchor,er.width,er.height,er.textOffset,er.textScale),Je&&pn._rotate(ut?this.transform.angle:-this.transform.angle)):zn=!1}Re&&(zn=!Yt.clipped),Wn.textBox&&vo(U.textCollisionBox.collisionVertexArray,Yt.text.placed,!zn||sn,pn.x,pn.y),Wn.verticalTextBox&&vo(U.textCollisionBox.collisionVertexArray,Yt.text.placed,!zn||mn,pn.x,pn.y)}const Nn=zn&&Boolean(!mn&&Wn.verticalIconBox);Wn.iconBox&&vo(U.iconCollisionBox.collisionVertexArray,Yt.icon.placed,Nn,gt?pn.x:0,gt?pn.y:0),Wn.verticalIconBox&&vo(U.iconCollisionBox.collisionVertexArray,Yt.icon.placed,!Nn,gt?pn.x:0,gt?pn.y:0)}}}if(U.fullyClipped=At===0,U.sortFeatures(this.transform.angle),this.retainedQueryData[U.bucketInstanceId]&&(this.retainedQueryData[U.bucketInstanceId].featureSortOrder=U.featureSortOrder),U.hasTextData()&&U.text.opacityVertexBuffer&&U.text.opacityVertexBuffer.updateData(U.text.opacityVertexArray),U.hasIconData()&&U.icon.opacityVertexBuffer&&U.icon.opacityVertexBuffer.updateData(U.icon.opacityVertexArray),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexBuffer&&U.iconCollisionBox.collisionVertexBuffer.updateData(U.iconCollisionBox.collisionVertexArray),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexBuffer&&U.textCollisionBox.collisionVertexBuffer.updateData(U.textCollisionBox.collisionVertexArray),U.bucketInstanceId in this.collisionCircleArrays){const St=this.collisionCircleArrays[U.bucketInstanceId];U.placementInvProjMatrix=St.invProjMatrix,U.placementViewportMatrix=St.viewportMatrix,U.collisionCircleArray=St.circles,delete this.collisionCircleArrays[U.bucketInstanceId]}}symbolFadeChange(U){return this.fadeDuration===0?1:(U-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(U){return Math.max(0,(this.transform.zoom-U)/1.5)}hasTransitions(U){return this.stale||U-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(U,te){const be=this.zoomAtLastRecencyCheck===te?1-this.zoomAdjustment(te):1;return this.zoomAtLastRecencyCheck=te,this.commitTime+this.fadeDuration*be>U}setStale(){this.stale=!0}}function vo(de,U,te,be,Pe){de.emplaceBack(U?1:0,te?1:0,be||0,Pe||0),de.emplaceBack(U?1:0,te?1:0,be||0,Pe||0),de.emplaceBack(U?1:0,te?1:0,be||0,Pe||0),de.emplaceBack(U?1:0,te?1:0,be||0,Pe||0)}const Rs=Math.pow(2,25),fl=Math.pow(2,24),Ju=Math.pow(2,17),sc=Math.pow(2,16),ka=Math.pow(2,9),Qu=Math.pow(2,8),Qc=Math.pow(2,1);function Sa(de){if(de.opacity===0&&!de.placed)return 0;if(de.opacity===1&&de.placed)return 4294967295;const U=de.placed?1:0,te=Math.floor(127*de.opacity);return te*Rs+U*fl+te*Ju+U*sc+te*ka+U*Qu+te*Qc+U}const lo=0;class _l{constructor(U){this._sortAcrossTiles=U.layout.get("symbol-z-order")!=="viewport-y"&&U.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(U,te,be,Pe,Re){const Be=this._bucketParts;for(;this._currentTileIndex<U.length;)if(te.getBucketParts(Be,Pe,U[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Re())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Be.sort((Ne,qe)=>Ne.sortKey-qe.sortKey));this._currentPartIndex<Be.length;){const Ne=Be[this._currentPartIndex];if(te.placeLayerBucketPart(Ne,this._seenCrossTileIDs,be,Ne.symbolInstanceStart===0),this._currentPartIndex++,Re())return!0}return!1}}class zo{constructor(U,te,be,Pe,Re,Be,Ne,qe){this.placement=new Os(U,Re,Be,Ne,qe),this._currentPlacementIndex=te.length-1,this._forceFullPlacement=be,this._showCollisionBoxes=Pe,this._done=!1}isDone(){return this._done}continuePlacement(U,te,be){const Pe=j.exported.now(),Re=()=>{const Be=j.exported.now()-Pe;return!this._forceFullPlacement&&Be>2};for(;this._currentPlacementIndex>=0;){const Be=te[U[this._currentPlacementIndex]],Ne=this.placement.collisionIndex.transform.zoom;if(Be.type==="symbol"&&(!Be.minzoom||Be.minzoom<=Ne)&&(!Be.maxzoom||Be.maxzoom>Ne)){if(this._inProgressLayer||(this._inProgressLayer=new _l(Be)),this._inProgressLayer.continuePlacement(be[Be.source],this.placement,this._showCollisionBoxes,Be,Re))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(U){return this.placement.commit(U),this.placement}}const lc=512/j.EXTENT/2;class ml{constructor(U,te,be){this.tileID=U,this.indexedSymbolInstances={},this.bucketInstanceId=be;for(let Pe=0;Pe<te.length;Pe++){const Re=te.get(Pe),Be=Re.key;this.indexedSymbolInstances[Be]||(this.indexedSymbolInstances[Be]=[]),this.indexedSymbolInstances[Be].push({crossTileID:Re.crossTileID,coord:this.getScaledCoordinates(Re,U)})}}getScaledCoordinates(U,te){const be=lc/Math.pow(2,te.canonical.z-this.tileID.canonical.z);return{x:Math.floor((te.canonical.x*j.EXTENT+U.tileAnchorX)*be),y:Math.floor((te.canonical.y*j.EXTENT+U.tileAnchorY)*be)}}findMatches(U,te,be){const Pe=this.tileID.canonical.z<te.canonical.z?1:Math.pow(2,this.tileID.canonical.z-te.canonical.z);for(let Re=0;Re<U.length;Re++){const Be=U.get(Re);if(Be.crossTileID)continue;const Ne=this.indexedSymbolInstances[Be.key];if(!Ne)continue;const qe=this.getScaledCoordinates(Be,te);for(const Ye of Ne)if(Math.abs(Ye.coord.x-qe.x)<=Pe&&Math.abs(Ye.coord.y-qe.y)<=Pe&&!be[Ye.crossTileID]){be[Ye.crossTileID]=!0,Be.crossTileID=Ye.crossTileID;break}}}}class eh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class zs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(U){const te=Math.round((U-this.lng)/360);if(te!==0)for(const be in this.indexes){const Pe=this.indexes[be],Re={};for(const Be in Pe){const Ne=Pe[Be];Ne.tileID=Ne.tileID.unwrapTo(Ne.tileID.wrap+te),Re[Ne.tileID.key]=Ne}this.indexes[be]=Re}this.lng=U}addBucket(U,te,be){if(this.indexes[U.overscaledZ]&&this.indexes[U.overscaledZ][U.key]){if(this.indexes[U.overscaledZ][U.key].bucketInstanceId===te.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(U.overscaledZ,this.indexes[U.overscaledZ][U.key])}for(let Re=0;Re<te.symbolInstances.length;Re++)te.symbolInstances.get(Re).crossTileID=0;this.usedCrossTileIDs[U.overscaledZ]||(this.usedCrossTileIDs[U.overscaledZ]={});const Pe=this.usedCrossTileIDs[U.overscaledZ];for(const Re in this.indexes){const Be=this.indexes[Re];if(Number(Re)>U.overscaledZ)for(const Ne in Be){const qe=Be[Ne];qe.tileID.isChildOf(U)&&qe.findMatches(te.symbolInstances,U,Pe)}else{const Ne=Be[U.scaledTo(Number(Re)).key];Ne&&Ne.findMatches(te.symbolInstances,U,Pe)}}for(let Re=0;Re<te.symbolInstances.length;Re++){const Be=te.symbolInstances.get(Re);Be.crossTileID||(Be.crossTileID=be.generate(),Pe[Be.crossTileID]=!0)}return this.indexes[U.overscaledZ]===void 0&&(this.indexes[U.overscaledZ]={}),this.indexes[U.overscaledZ][U.key]=new ml(U,te.symbolInstances,te.bucketInstanceId),!0}removeBucketCrossTileIDs(U,te){for(const be in te.indexedSymbolInstances)for(const Pe of te.indexedSymbolInstances[be])delete this.usedCrossTileIDs[U][Pe.crossTileID]}removeStaleBuckets(U){let te=!1;for(const be in this.indexes){const Pe=this.indexes[be];for(const Re in Pe)U[Pe[Re].bucketInstanceId]||(this.removeBucketCrossTileIDs(be,Pe[Re]),delete Pe[Re],te=!0)}return te}}class gl{constructor(){this.layerIndexes={},this.crossTileIDs=new eh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(U,te,be,Pe){let Re=this.layerIndexes[U.id];Re===void 0&&(Re=this.layerIndexes[U.id]=new zs);let Be=!1;const Ne={};Pe.name!=="globe"&&Re.handleWrapJump(be);for(const qe of te){const Ye=qe.getBucket(U);Ye&&U.id===Ye.layerIds[0]&&(Ye.bucketInstanceId||(Ye.bucketInstanceId=++this.maxBucketInstanceId),Re.addBucket(qe.tileID,Ye,this.crossTileIDs)&&(Be=!0),Ne[Ye.bucketInstanceId]=!0)}return Re.removeStaleBuckets(Ne)&&(Be=!0),Be}pruneUnusedLayers(U){const te={};U.forEach(be=>{te[be]=!0});for(const be in this.layerIndexes)te[be]||delete this.layerIndexes[be]}}const $s=(de,U)=>j.emitValidationErrors(de,U&&U.filter(te=>te.identifier!=="source.canvas")),eu=j.pick(xr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),th=j.pick(xr,["setCenter","setZoom","setBearing","setPitch"]),tu={version:8,layers:[],sources:{}},nh={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class xo extends j.Evented{constructor(U,te={}){super(),this.map=U,this.dispatcher=new ln(ei(),this),this.imageManager=new bt,this.imageManager.setEventedParent(this),this.glyphManager=new j.GlyphManager(U._requestManager,te.localFontFamily?j.LocalGlyphMode.all:te.localIdeographFontFamily?j.LocalGlyphMode.ideographs:j.LocalGlyphMode.none,te.localFontFamily||te.localIdeographFontFamily),this.lineAtlas=new j.LineAtlas(256,512),this.crossTileSymbolIndex=new gl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new j.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",j.getReferrer());const be=this;this._rtlTextPluginCallback=xo.registerForPluginStateChange(Pe=>{be.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL},(Re,Be)=>{if(j.triggerPluginCompletionEvent(Re),Be&&Be.every(Ne=>Ne))for(const Ne in be._sourceCaches){const qe=be._sourceCaches[Ne],Ye=qe.getSource().type;Ye!=="vector"&&Ye!=="geojson"||qe.reload()}})}),this.on("data",Pe=>{if(Pe.dataType!=="source"||Pe.sourceDataType!=="metadata")return;const Re=this.getSource(Pe.sourceId);if(Re&&Re.vectorLayerIds)for(const Be in this._layers){const Ne=this._layers[Be];Ne.source===Re.id&&this._validateLayer(Ne)}})}loadURL(U,te={}){this.fire(new j.Event("dataloading",{dataType:"style"}));const be=typeof te.validate=="boolean"?te.validate:!j.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,te.accessToken);const Pe=this.map._requestManager.transformRequest(U,j.ResourceType.Style);this._request=j.getJSON(Pe,(Re,Be)=>{this._request=null,Re?this.fire(new j.ErrorEvent(Re)):Be&&this._load(Be,be)})}loadJSON(U,te={}){this.fire(new j.Event("dataloading",{dataType:"style"})),this._request=j.exported.frame(()=>{this._request=null,this._load(U,te.validate!==!1)})}loadEmpty(){this.fire(new j.Event("dataloading",{dataType:"style"})),this._load(tu,!1)}_updateLayerCount(U,te){const be=te?1:-1;U.is3D()&&(this._num3DLayers+=be),U.type==="circle"&&(this._numCircleLayers+=be),U.type==="symbol"&&(this._numSymbolLayers+=be)}_load(U,te){if(te&&$s(this,j.validateStyle(U)))return;this._loaded=!0,this.stylesheet=j.clone$1(U),this._updateMapProjection();for(const Pe in U.sources)this.addSource(Pe,U.sources[Pe],{validate:!1});this._changed=!1,U.sprite?this._loadSprite(U.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(U.glyphs);const be=ni(this.stylesheet.layers);this._order=be.map(Pe=>Pe.id),this._layers={},this._serializedLayers={};for(let Pe of be)Pe=j.createStyleLayer(Pe),Pe.setEventedParent(this,{layer:{id:Pe.id}}),this._layers[Pe.id]=Pe,this._serializedLayers[Pe.id]=Pe.serialize(),this._updateLayerCount(Pe,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new it(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new j.Event("data",{dataType:"style"})),this.fire(new j.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(U){U?this.stylesheet.projection=U:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(U){this._spriteRequest=function(te,be,Pe){let Re,Be,Ne;const qe=j.exported.devicePixelRatio>1?"@2x":"";let Ye=j.getJSON(be.transformRequest(be.normalizeSpriteURL(te,qe,".json"),j.ResourceType.SpriteJSON),(gt,It)=>{Ye=null,Ne||(Ne=gt,Re=It,ut())}),Je=j.getImage(be.transformRequest(be.normalizeSpriteURL(te,qe,".png"),j.ResourceType.SpriteImage),(gt,It)=>{Je=null,Ne||(Ne=gt,Be=It,ut())});function ut(){if(Ne)Pe(Ne);else if(Re&&Be){const gt=j.exported.getImageData(Be),It={};for(const kt in Re){const{width:At,height:St,x:Et,y:$t,sdf:Ot,pixelRatio:Jt,stretchX:Yt,stretchY:Gt,content:Kt}=Re[kt],Wt=new j.RGBAImage({width:At,height:St});j.RGBAImage.copy(gt,Wt,{x:Et,y:$t},{x:0,y:0},{width:At,height:St}),It[kt]={data:Wt,pixelRatio:Jt,sdf:Ot,stretchX:Yt,stretchY:Gt,content:Kt}}Pe(null,It)}}return{cancel(){Ye&&(Ye.cancel(),Ye=null),Je&&(Je.cancel(),Je=null)}}}(U,this.map._requestManager,(te,be)=>{if(this._spriteRequest=null,te)this.fire(new j.ErrorEvent(te));else if(be)for(const Pe in be)this.imageManager.addImage(Pe,be[Pe]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new j.Event("data",{dataType:"style"}))})}_validateLayer(U){const te=this.getSource(U.source);if(!te)return;const be=U.sourceLayer;be&&(te.type==="geojson"||te.vectorLayerIds&&te.vectorLayerIds.indexOf(be)===-1)&&this.fire(new j.ErrorEvent(new Error(`Source layer "${be}" does not exist on source "${te.id}" as specified by style layer "${U.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const U in this._sourceCaches)if(!this._sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(U){const te=[];for(const be of U){const Pe=this._layers[be];Pe.type!=="custom"&&te.push(Pe.serialize())}return te}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const U in this._sourceCaches)if(this._sourceCaches[U].hasTransition())return!0;for(const U in this._layers)if(this._layers[U].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(U){return!!this.terrain&&nh[U.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(U){if(!this._loaded)return;const te=this._changed;if(this._changed){const Pe=Object.keys(this._updatedLayers),Re=Object.keys(this._removedLayers);(Pe.length||Re.length)&&this._updateWorkerLayers(Pe,Re);for(const Be in this._updatedSources){const Ne=this._updatedSources[Be];Ne==="reload"?this._reloadSource(Be):Ne==="clear"&&this._clearSource(Be)}this._updateTilesForChangedImages();for(const Be in this._updatedPaintProps)this._layers[Be].updateTransitions(U);this.light.updateTransitions(U),this.fog&&this.fog.updateTransitions(U),this._resetUpdates()}const be={};for(const Pe in this._sourceCaches){const Re=this._sourceCaches[Pe];be[Pe]=Re.used,Re.used=!1}for(const Pe of this._order){const Re=this._layers[Pe];if(Re.recalculate(U,this._availableImages),!Re.isHidden(U.zoom)){const Ne=this._getLayerSourceCache(Re);Ne&&(Ne.used=!0)}const Be=this.map.painter;if(Be){const Ne=Re.getProgramIds();if(!Ne)continue;const qe=Re.getProgramConfiguration(U.zoom);for(const Ye of Ne)Be.useProgram(Ye,qe)}}for(const Pe in be){const Re=this._sourceCaches[Pe];be[Pe]!==Re.used&&Re.getSource().fire(new j.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Re.getSource().id}))}this.light.recalculate(U),this.terrain&&this.terrain.recalculate(U),this.fog&&this.fog.recalculate(U),this.z=U.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),te&&this.fire(new j.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const U=Object.keys(this._changedImages);if(U.length){for(const te in this._sourceCaches)this._sourceCaches[te].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}}_updateWorkerLayers(U,te){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:te})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(U){if(this._checkLoaded(),$s(this,j.validateStyle(U)))return!1;(U=j.clone$1(U)).layers=ni(U.layers);const te=function(Pe,Re){if(!Pe)return[{command:xr.setStyle,args:[Re]}];let Be=[];try{if(!we(Pe.version,Re.version))return[{command:xr.setStyle,args:[Re]}];we(Pe.center,Re.center)||Be.push({command:xr.setCenter,args:[Re.center]}),we(Pe.zoom,Re.zoom)||Be.push({command:xr.setZoom,args:[Re.zoom]}),we(Pe.bearing,Re.bearing)||Be.push({command:xr.setBearing,args:[Re.bearing]}),we(Pe.pitch,Re.pitch)||Be.push({command:xr.setPitch,args:[Re.pitch]}),we(Pe.sprite,Re.sprite)||Be.push({command:xr.setSprite,args:[Re.sprite]}),we(Pe.glyphs,Re.glyphs)||Be.push({command:xr.setGlyphs,args:[Re.glyphs]}),we(Pe.transition,Re.transition)||Be.push({command:xr.setTransition,args:[Re.transition]}),we(Pe.light,Re.light)||Be.push({command:xr.setLight,args:[Re.light]}),we(Pe.fog,Re.fog)||Be.push({command:xr.setFog,args:[Re.fog]}),we(Pe.projection,Re.projection)||Be.push({command:xr.setProjection,args:[Re.projection]});const Ne={},qe=[];(function(ut,gt,It,kt){let At;for(At in gt=gt||{},ut=ut||{})ut.hasOwnProperty(At)&&(gt.hasOwnProperty(At)||fo(At,It,kt));for(At in gt)gt.hasOwnProperty(At)&&(ut.hasOwnProperty(At)?we(ut[At],gt[At])||(ut[At].type==="geojson"&&gt[At].type==="geojson"&&ca(ut,gt,At)?It.push({command:xr.setGeoJSONSourceData,args:[At,gt[At].data]}):ki(At,gt,It,kt)):gn(At,gt,It))})(Pe.sources,Re.sources,qe,Ne);const Ye=[];Pe.layers&&Pe.layers.forEach(ut=>{ut.source&&Ne[ut.source]?Be.push({command:xr.removeLayer,args:[ut.id]}):Ye.push(ut)});let Je=Pe.terrain;Je&&Ne[Je.source]&&(Be.push({command:xr.setTerrain,args:[void 0]}),Je=void 0),Be=Be.concat(qe),we(Je,Re.terrain)||Be.push({command:xr.setTerrain,args:[Re.terrain]}),function(ut,gt,It){gt=gt||[];const kt=(ut=ut||[]).map(Po),At=gt.map(Po),St=ut.reduce(dl,{}),Et=gt.reduce(dl,{}),$t=kt.slice(),Ot=Object.create(null);let Jt,Yt,Gt,Kt,Wt,sn,mn;for(Jt=0,Yt=0;Jt<kt.length;Jt++)Gt=kt[Jt],Et.hasOwnProperty(Gt)?Yt++:(It.push({command:xr.removeLayer,args:[Gt]}),$t.splice($t.indexOf(Gt,Yt),1));for(Jt=0,Yt=0;Jt<At.length;Jt++)Gt=At[At.length-1-Jt],$t[$t.length-1-Jt]!==Gt&&(St.hasOwnProperty(Gt)?(It.push({command:xr.removeLayer,args:[Gt]}),$t.splice($t.lastIndexOf(Gt,$t.length-Yt),1)):Yt++,sn=$t[$t.length-Jt],It.push({command:xr.addLayer,args:[Et[Gt],sn]}),$t.splice($t.length-Jt,0,Gt),Ot[Gt]=!0);for(Jt=0;Jt<At.length;Jt++)if(Gt=At[Jt],Kt=St[Gt],Wt=Et[Gt],!Ot[Gt]&&!we(Kt,Wt))if(we(Kt.source,Wt.source)&&we(Kt["source-layer"],Wt["source-layer"])&&we(Kt.type,Wt.type)){for(mn in Aa(Kt.layout,Wt.layout,It,Gt,null,xr.setLayoutProperty),Aa(Kt.paint,Wt.paint,It,Gt,null,xr.setPaintProperty),we(Kt.filter,Wt.filter)||It.push({command:xr.setFilter,args:[Gt,Wt.filter]}),we(Kt.minzoom,Wt.minzoom)&&we(Kt.maxzoom,Wt.maxzoom)||It.push({command:xr.setLayerZoomRange,args:[Gt,Wt.minzoom,Wt.maxzoom]}),Kt)Kt.hasOwnProperty(mn)&&mn!=="layout"&&mn!=="paint"&&mn!=="filter"&&mn!=="metadata"&&mn!=="minzoom"&&mn!=="maxzoom"&&(mn.indexOf("paint.")===0?Aa(Kt[mn],Wt[mn],It,Gt,mn.slice(6),xr.setPaintProperty):we(Kt[mn],Wt[mn])||It.push({command:xr.setLayerProperty,args:[Gt,mn,Wt[mn]]}));for(mn in Wt)Wt.hasOwnProperty(mn)&&!Kt.hasOwnProperty(mn)&&mn!=="layout"&&mn!=="paint"&&mn!=="filter"&&mn!=="metadata"&&mn!=="minzoom"&&mn!=="maxzoom"&&(mn.indexOf("paint.")===0?Aa(Kt[mn],Wt[mn],It,Gt,mn.slice(6),xr.setPaintProperty):we(Kt[mn],Wt[mn])||It.push({command:xr.setLayerProperty,args:[Gt,mn,Wt[mn]]}))}else It.push({command:xr.removeLayer,args:[Gt]}),sn=$t[$t.lastIndexOf(Gt)+1],It.push({command:xr.addLayer,args:[Wt,sn]})}(Ye,Re.layers,Be)}catch(Ne){console.warn("Unable to compute style diff:",Ne),Be=[{command:xr.setStyle,args:[Re]}]}return Be}(this.serialize(),U).filter(Pe=>!(Pe.command in th));if(te.length===0)return!1;const be=te.filter(Pe=>!(Pe.command in eu));if(be.length>0)throw new Error(`Unimplemented: ${be.map(Pe=>Pe.command).join(", ")}.`);return te.forEach(Pe=>{Pe.command!=="setTransition"&&Pe.command!=="setProjection"&&this[Pe.command].apply(this,Pe.args)}),this.stylesheet=U,this._updateMapProjection(),!0}addImage(U,te){return this.getImage(U)?this.fire(new j.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(U,te),this._afterImageUpdated(U),this)}updateImage(U,te){this.imageManager.updateImage(U,te)}getImage(U){return this.imageManager.getImage(U)}removeImage(U){return this.getImage(U)?(this.imageManager.removeImage(U),this._afterImageUpdated(U),this):this.fire(new j.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(U){this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new j.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(U,te,be={}){if(this._checkLoaded(),this.getSource(U)!==void 0)throw new Error("There is already a source with this ID");if(!te.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(te).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(te.type)>=0&&this._validate(j.validateSource,`sources.${U}`,te,null,be))return;this.map&&this.map._collectResourceTiming&&(te.collectResourceTiming=!0);const Pe=_n(U,te,this.dispatcher,this);Pe.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(U),source:Pe.serialize(),sourceId:U}));const Re=Be=>{const Ne=(Be?"symbol:":"other:")+U,qe=this._sourceCaches[Ne]=new j.SourceCache(Ne,Pe,Be);(Be?this._symbolSourceCaches:this._otherSourceCaches)[U]=qe,qe.style=this,qe.onAdd(this.map)};Re(!1),te.type!=="vector"&&te.type!=="geojson"||Re(!0),Pe.onAdd&&Pe.onAdd(this.map),this._changed=!0}removeSource(U){this._checkLoaded();const te=this.getSource(U);if(!te)throw new Error("There is no source with this ID");for(const Pe in this._layers)if(this._layers[Pe].source===U)return this.fire(new j.ErrorEvent(new Error(`Source "${U}" cannot be removed while layer "${Pe}" is using it.`)));if(this.terrain&&this.terrain.get().source===U)return this.fire(new j.ErrorEvent(new Error(`Source "${U}" cannot be removed while terrain is using it.`)));const be=this._getSourceCaches(U);for(const Pe of be)delete this._sourceCaches[Pe.id],delete this._updatedSources[Pe.id],Pe.fire(new j.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Pe.getSource().id})),Pe.setEventedParent(null),Pe.clearTiles();return delete this._otherSourceCaches[U],delete this._symbolSourceCaches[U],te.setEventedParent(null),te.onRemove&&te.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(U,te){this._checkLoaded(),this.getSource(U).setData(te),this._changed=!0}getSource(U){const te=this._getSourceCache(U);return te&&te.getSource()}addLayer(U,te,be={}){this._checkLoaded();const Pe=U.id;if(this.getLayer(Pe))return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${Pe}" already exists on this map`)));let Re;if(U.type==="custom"){if($s(this,j.validateCustomStyleLayer(U)))return;Re=j.createStyleLayer(U)}else{if(typeof U.source=="object"&&(this.addSource(Pe,U.source),U=j.clone$1(U),U=j.extend(U,{source:Pe})),this._validate(j.validateLayer,`layers.${Pe}`,U,{arrayIndex:-1},be))return;Re=j.createStyleLayer(U),this._validateLayer(Re),Re.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[Re.id]=Re.serialize(),this._updateLayerCount(Re,!0)}const Be=te?this._order.indexOf(te):this._order.length;if(te&&Be===-1)return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${te}" does not exist on this map.`)));this._order.splice(Be,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=Re;const Ne=this._getLayerSourceCache(Re);if(this._removedLayers[Pe]&&Re.source&&Ne&&Re.type!=="custom"){const qe=this._removedLayers[Pe];delete this._removedLayers[Pe],qe.type!==Re.type?this._updatedSources[Re.source]="clear":(this._updatedSources[Re.source]="reload",Ne.pause())}this._updateLayer(Re),Re.onAdd&&Re.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(U,te){if(this._checkLoaded(),this._changed=!0,!this._layers[U])return void this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be moved.`)));if(U===te)return;const be=this._order.indexOf(U);this._order.splice(be,1);const Pe=te?this._order.indexOf(te):this._order.length;te&&Pe===-1?this.fire(new j.ErrorEvent(new Error(`Layer with id "${te}" does not exist on this map.`))):(this._order.splice(Pe,0,U),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(U){this._checkLoaded();const te=this._layers[U];if(!te)return void this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be removed.`)));te.setEventedParent(null),this._updateLayerCount(te,!1);const be=this._order.indexOf(U);this._order.splice(be,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=te,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],te.onRemove&&te.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(U){return this._layers[U]}hasLayer(U){return U in this._layers}hasLayerType(U){for(const te in this._layers)if(this._layers[te].type===U)return!0;return!1}setLayerZoomRange(U,te,be){this._checkLoaded();const Pe=this.getLayer(U);Pe?Pe.minzoom===te&&Pe.maxzoom===be||(te!=null&&(Pe.minzoom=te),be!=null&&(Pe.maxzoom=be),this._updateLayer(Pe)):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(U,te,be={}){this._checkLoaded();const Pe=this.getLayer(U);if(Pe){if(!we(Pe.filter,te))return te==null?(Pe.filter=void 0,void this._updateLayer(Pe)):void(this._validate(j.validateFilter,`layers.${Pe.id}.filter`,te,{layerType:Pe.type},be)||(Pe.filter=j.clone$1(te),this._updateLayer(Pe)))}else this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be filtered.`)))}getFilter(U){const te=this.getLayer(U);return te&&j.clone$1(te.filter)}setLayoutProperty(U,te,be,Pe={}){this._checkLoaded();const Re=this.getLayer(U);Re?we(Re.getLayoutProperty(te),be)||(Re.setLayoutProperty(te,be,Pe),this._updateLayer(Re)):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(U,te){const be=this.getLayer(U);if(be)return be.getLayoutProperty(te);this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style.`)))}setPaintProperty(U,te,be,Pe={}){this._checkLoaded();const Re=this.getLayer(U);Re?we(Re.getPaintProperty(te),be)||(Re.setPaintProperty(te,be,Pe)&&this._updateLayer(Re),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(U,te){const be=this.getLayer(U);return be&&be.getPaintProperty(te)}setFeatureState(U,te){this._checkLoaded();const be=U.source,Pe=U.sourceLayer,Re=this.getSource(be);if(!Re)return void this.fire(new j.ErrorEvent(new Error(`The source '${be}' does not exist in the map's style.`)));const Be=Re.type;if(Be==="geojson"&&Pe)return void this.fire(new j.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Be==="vector"&&!Pe)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));U.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided.")));const Ne=this._getSourceCaches(be);for(const qe of Ne)qe.setFeatureState(Pe,U.id,te)}removeFeatureState(U,te){this._checkLoaded();const be=U.source,Pe=this.getSource(be);if(!Pe)return void this.fire(new j.ErrorEvent(new Error(`The source '${be}' does not exist in the map's style.`)));const Re=Pe.type,Be=Re==="vector"?U.sourceLayer:void 0;if(Re==="vector"&&!Be)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(te&&typeof U.id!="string"&&typeof U.id!="number")return void this.fire(new j.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const Ne=this._getSourceCaches(be);for(const qe of Ne)qe.removeFeatureState(Be,U.id,te)}getFeatureState(U){this._checkLoaded();const te=U.source,be=U.sourceLayer,Pe=this.getSource(te);if(Pe){if(Pe.type!=="vector"||be)return U.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(te)[0].getFeatureState(be,U.id);this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new j.ErrorEvent(new Error(`The source '${te}' does not exist in the map's style.`)))}getTransition(){return j.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const U={};for(const te in this._sourceCaches){const be=this._sourceCaches[te].getSource();U[be.id]||(U[be.id]=be.serialize())}return j.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:U,layers:this._serializeLayers(this._order)},te=>te!==void 0)}_updateLayer(U){this._updatedLayers[U.id]=!0;const te=this._getLayerSourceCache(U);U.source&&!this._updatedSources[U.source]&&te&&te.getSource().type!=="raster"&&(this._updatedSources[U.source]="reload",te.pause()),this._changed=!0,U.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(U){const te=Be=>this._layers[Be].type==="fill-extrusion",be={},Pe=[];for(let Be=this._order.length-1;Be>=0;Be--){const Ne=this._order[Be];if(te(Ne)){be[Ne]=Be;for(const qe of U){const Ye=qe[Ne];if(Ye)for(const Je of Ye)Pe.push(Je)}}}Pe.sort((Be,Ne)=>Ne.intersectionZ-Be.intersectionZ);const Re=[];for(let Be=this._order.length-1;Be>=0;Be--){const Ne=this._order[Be];if(te(Ne))for(let qe=Pe.length-1;qe>=0;qe--){const Ye=Pe[qe].feature;if(be[Ye.layer.id]<Be)break;Re.push(Ye),Pe.pop()}else for(const qe of U){const Ye=qe[Ne];if(Ye)for(const Je of Ye)Re.push(Je.feature)}}return Re}queryRenderedFeatures(U,te,be){te&&te.filter&&this._validate(j.validateFilter,"queryRenderedFeatures.filter",te.filter,null,te);const Pe={};if(te&&te.layers){if(!Array.isArray(te.layers))return this.fire(new j.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const qe of te.layers){const Ye=this._layers[qe];if(!Ye)return this.fire(new j.ErrorEvent(new Error(`The layer '${qe}' does not exist in the map's style and cannot be queried for features.`))),[];Pe[Ye.source]=!0}}const Re=[];te.availableImages=this._availableImages;const Be=te&&te.layers?te.layers.some(qe=>{const Ye=this.getLayer(qe);return Ye&&Ye.is3D()}):this.has3DLayers(),Ne=on.createFromScreenPoints(U,be);for(const qe in this._sourceCaches){const Ye=this._sourceCaches[qe].getSource().id;te.layers&&!Pe[Ye]||Re.push(sr(this._sourceCaches[qe],this._layers,this._serializedLayers,Ne,te,be,Be,!!this.map._showQueryGeometry))}return this.placement&&Re.push(function(qe,Ye,Je,ut,gt,It,kt){const At={},St=It.queryRenderedSymbols(ut),Et=[];for(const $t of Object.keys(St).map(Number))Et.push(kt[$t]);Et.sort(wr);for(const $t of Et){const Ot=$t.featureIndex.lookupSymbolFeatures(St[$t.bucketInstanceId],Ye,$t.bucketIndex,$t.sourceLayerIndex,gt.filter,gt.layers,gt.availableImages,qe);for(const Jt in Ot){const Yt=At[Jt]=At[Jt]||[],Gt=Ot[Jt];Gt.sort((Kt,Wt)=>{const sn=$t.featureSortOrder;if(sn){const mn=sn.indexOf(Kt.featureIndex);return sn.indexOf(Wt.featureIndex)-mn}return Wt.featureIndex-Kt.featureIndex});for(const Kt of Gt)Yt.push(Kt)}}for(const $t in At)At[$t].forEach(Ot=>{const Jt=Ot.feature,Yt=Je(qe[$t]).getFeatureState(Jt.layer["source-layer"],Jt.id);Jt.source=Jt.layer.source,Jt.layer["source-layer"]&&(Jt.sourceLayer=Jt.layer["source-layer"]),Jt.state=Yt});return At}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),Ne.screenGeometry,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Re)}querySourceFeatures(U,te){te&&te.filter&&this._validate(j.validateFilter,"querySourceFeatures.filter",te.filter,null,te);const be=this._getSourceCaches(U);let Pe=[];for(const Re of be)Pe=Pe.concat(Hn(Re,te));return Pe}addSourceType(U,te,be){return xo.getSourceType(U)?be(new Error(`A source type called "${U}" already exists.`)):(xo.setSourceType(U,te),te.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:U,url:te.workerSourceURL},be):be(null,null))}getLight(){return this.light.getLight()}setLight(U,te={}){this._checkLoaded();const be=this.light.getLight();let Pe=!1;for(const Be in U)if(!we(U[Be],be[Be])){Pe=!0;break}if(!Pe)return;const Re=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(U,te),this.light.updateTransitions(Re)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(U,te=1){if(this._checkLoaded(),!U)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(te===1){if(typeof U.source=="object"){const be="terrain-dem-src";this.addSource(be,U.source),U=j.clone$1(U),U=j.extend(U,{source:be})}if(this._validate(j.validateTerrain,"terrain",U))return}if(!this.terrain||this.terrain&&te!==this.terrain.drapeRenderMode)this._createTerrain(U,te);else{const be=this.terrain,Pe=be.get();for(const Re of Object.keys(j.spec.terrain))!U.hasOwnProperty(Re)&&j.spec.terrain[Re].default&&(U[Re]=j.spec.terrain[Re].default);for(const Re in U)if(!we(U[Re],Pe[Re])){be.set(U),this.stylesheet.terrain=U;const Be=this._setTransitionParameters({duration:0});be.updateTransitions(Be);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(U){const te=this.fog=new Dt(U,this.map.transform);this.stylesheet.fog=U;const be=this._setTransitionParameters({duration:0});te.updateTransitions(be)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const U of this.map._markers)U._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(U){if(this._checkLoaded(),!U)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const te=this.fog,be=te.get();Object.keys(U).length===0&&te.set(U);for(const Pe in U)if(!we(U[Pe],be[Pe])){te.set(U),this.stylesheet.fog=U;const Re=this._setTransitionParameters({duration:0});te.updateTransitions(Re);break}}else this._createFog(U);this._markersNeedUpdate=!0}_setTransitionParameters(U){return{now:j.exported.now(),transition:j.extend(U,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const U=this._order.filter(be=>this.isLayerDraped(this._layers[be])),te=this._order.filter(be=>!this.isLayerDraped(this._layers[be]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...U),this._drapedFirstOrder.push(...te)}_createTerrain(U,te){const be=this.terrain=new ft(U,te);this.stylesheet.terrain=U,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const Pe=this._setTransitionParameters({duration:0});be.updateTransitions(Pe)}_force3DLayerUpdate(){for(const U in this._layers){const te=this._layers[U];te.type==="fill-extrusion"&&this._updateLayer(te)}}_forceSymbolLayerUpdate(){for(const U in this._layers){const te=this._layers[U];te.type==="symbol"&&this._updateLayer(te)}}_validate(U,te,be,Pe,Re={}){return(!Re||Re.validate!==!1)&&$s(this,U.call(j.validateStyle,j.extend({key:te,style:this.serialize(),value:be,styleSpec:j.spec},Pe)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),j.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const U in this._layers)this._layers[U].setEventedParent(null);for(const U in this._sourceCaches)this._sourceCaches[U].clearTiles(),this._sourceCaches[U].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(U){const te=this._getSourceCaches(U);for(const be of te)be.clearTiles()}_reloadSource(U){const te=this._getSourceCaches(U);for(const be of te)be.resume(),be.reload()}_updateSources(U){for(const te in this._sourceCaches)this._sourceCaches[te].update(U)}_generateCollisionBoxes(){for(const U in this._sourceCaches){const te=this._sourceCaches[U];te.resume(),te.reload()}}_updatePlacement(U,te,be,Pe,Re=!1){let Be=!1,Ne=!1;const qe={};for(const Ye of this._order){const Je=this._layers[Ye];if(Je.type!=="symbol")continue;if(!qe[Je.source]){const gt=this._getLayerSourceCache(Je);if(!gt)continue;qe[Je.source]=gt.getRenderableIds(!0).map(It=>gt.getTileByID(It)).sort((It,kt)=>kt.tileID.overscaledZ-It.tileID.overscaledZ||(It.tileID.isLessThan(kt.tileID)?-1:1))}const ut=this.crossTileSymbolIndex.addLayer(Je,qe[Je.source],U.center.lng,U.projection);Be=Be||ut}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Re=Re||this._layerOrderChanged||be===0,this._layerOrderChanged&&this.fire(new j.Event("neworder")),(Re||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.exported.now(),U.zoom))&&(this.pauseablePlacement=new zo(U,this._order,Re,te,be,Pe,this.placement,this.fog&&U.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,qe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.exported.now()),Ne=!0),Be&&this.pauseablePlacement.placement.setStale()),Ne||Be)for(const Ye of this._order){const Je=this._layers[Ye];Je.type==="symbol"&&this.placement.updateLayerOpacities(Je,qe[Je.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.exported.now())}_releaseSymbolFadeTiles(){for(const U in this._sourceCaches)this._sourceCaches[U].releaseSymbolFadeTiles()}getImages(U,te,be){this.imageManager.getImages(te.icons,be),this._updateTilesForChangedImages();const Pe=Re=>{Re&&Re.setDependencies(te.tileID.key,te.type,te.icons)};Pe(this._otherSourceCaches[te.source]),Pe(this._symbolSourceCaches[te.source])}getGlyphs(U,te,be){this.glyphManager.getGlyphs(te.stacks,be)}getResource(U,te,be){return j.makeRequest(te,be)}_getSourceCache(U){return this._otherSourceCaches[U]}_getLayerSourceCache(U){return U.type==="symbol"?this._symbolSourceCaches[U.source]:this._otherSourceCaches[U.source]}_getSourceCaches(U){const te=[];return this._otherSourceCaches[U]&&te.push(this._otherSourceCaches[U]),this._symbolSourceCaches[U]&&te.push(this._symbolSourceCaches[U]),te}_isSourceCacheLoaded(U){const te=this._getSourceCaches(U);return te.length===0?(this.fire(new j.ErrorEvent(new Error(`There is no source with ID '${U}'`))),!1):te.every(be=>be.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}xo.getSourceType=function(de){return nn[de]},xo.setSourceType=function(de,U){nn[de]=U},xo.registerForPluginStateChange=j.registerForPluginStateChange;var Ca=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,cc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",yl=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,uc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ka=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let vl={},jo={};const _a=[];Ma(Ca,_a),Ma(yl,_a),Ma(uc,_a),Ma(Ka,_a),vl=Yr("",yl),jo=Yr(Ka,uc);const Uo=Yr(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),xl=Ca,Ds=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var bl={background:Yr(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Yr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Yr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Yr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Yr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Yr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Yr(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Yr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Yr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Yr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Yr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Yr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Yr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cc),skyboxGradient:Yr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cc),skyboxCapture:Yr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Yr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Yr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Ma(de,U){const te=de.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let be of te)if(be=be.trim(),be[0]==="#"&&be.includes("if")&&!be.includes("endif")){be=be.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Pe=be.split(" ");for(const Re of Pe)U.includes(Re)||U.push(Re)}}function Yr(de,U){const te=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,be=U.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),Pe={},Re=[..._a];return Ma(de,Re),Ma(U,Re),{fragmentSource:de=de.replace(te,(Be,Ne,qe,Ye,Je)=>(Pe[Je]=!0,Ne==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
varying ${qe} ${Ye} ${Je};
#else
uniform ${qe} ${Ye} u_${Je};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Je}
    ${qe} ${Ye} ${Je} = u_${Je};
#endif
`)),vertexSource:U=U.replace(te,(Be,Ne,qe,Ye,Je)=>{const ut=Ye==="float"?"vec2":"vec4",gt=Je.match(/color/)?"color":ut;return Pe[Je]?Ne==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
uniform lowp float u_${Je}_t;
attribute ${qe} ${ut} a_${Je};
varying ${qe} ${Ye} ${Je};
#else
uniform ${qe} ${Ye} u_${Je};
#endif
`:gt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Je}
    ${Je} = a_${Je};
#else
    ${qe} ${Ye} ${Je} = u_${Je};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Je}
    ${Je} = unpack_mix_${gt}(a_${Je}, u_${Je}_t);
#else
    ${qe} ${Ye} ${Je} = u_${Je};
#endif
`:Ne==="define"?`
#ifndef HAS_UNIFORM_u_${Je}
uniform lowp float u_${Je}_t;
attribute ${qe} ${ut} a_${Je};
#else
uniform ${qe} ${Ye} u_${Je};
#endif
`:gt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Je}
    ${qe} ${Ye} ${Je} = a_${Je};
#else
    ${qe} ${Ye} ${Je} = u_${Je};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Je}
    ${qe} ${Ye} ${Je} = unpack_mix_${gt}(a_${Je}, u_${Je}_t);
#else
    ${qe} ${Ye} ${Je} = u_${Je};
#endif
`}),staticAttributes:be,usedDefines:Re}}class wl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(U,te,be,Pe,Re,Be,Ne){this.context=U;let qe=this.boundPaintVertexBuffers.length!==Pe.length;for(let Je=0;!qe&&Je<Pe.length;Je++)this.boundPaintVertexBuffers[Je]!==Pe[Je]&&(qe=!0);let Ye=this.boundDynamicVertexBuffers.length!==Ne.length;for(let Je=0;!Ye&&Je<Ne.length;Je++)this.boundDynamicVertexBuffers[Je]!==Ne[Je]&&(Ye=!0);if(!U.extVertexArrayObject||!this.vao||this.boundProgram!==te||this.boundLayoutVertexBuffer!==be||qe||Ye||this.boundIndexBuffer!==Re||this.boundVertexOffset!==Be)this.freshBind(te,be,Pe,Re,Be,Ne);else{U.bindVertexArrayOES.set(this.vao);for(const Je of Ne)Je&&Je.bind();Re&&Re.dynamicDraw&&Re.bind()}}freshBind(U,te,be,Pe,Re,Be){let Ne;const qe=U.numAttributes,Ye=this.context,Je=Ye.gl;if(Ye.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ye.extVertexArrayObject.createVertexArrayOES(),Ye.bindVertexArrayOES.set(this.vao),Ne=0,this.boundProgram=U,this.boundLayoutVertexBuffer=te,this.boundPaintVertexBuffers=be,this.boundIndexBuffer=Pe,this.boundVertexOffset=Re,this.boundDynamicVertexBuffers=Be;else{Ne=Ye.currentNumAttributes||0;for(let ut=qe;ut<Ne;ut++)Je.disableVertexAttribArray(ut)}te.enableAttributes(Je,U),te.bind(),te.setVertexAttribPointers(Je,U,Re);for(const ut of be)ut.enableAttributes(Je,U),ut.bind(),ut.setVertexAttribPointers(Je,U,Re);for(const ut of Be)ut&&(ut.enableAttributes(Je,U),ut.bind(),ut.setVertexAttribPointers(Je,U,Re));Pe&&Pe.bind(),Ye.currentNumAttributes=qe}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hc(de,U){const te=Math.pow(2,U.canonical.z),be=U.canonical.y;return[new j.MercatorCoordinate(0,be/te).toLngLat().lat,new j.MercatorCoordinate(0,(be+1)/te).toLngLat().lat]}function dc(de,U,te,be,Pe,Re,Be){const Ne=de.context,qe=Ne.gl,Ye=te.fbo;if(!Ye)return;de.prepareDrawTile();const Je=de.useProgram("hillshade");Ne.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,Ye.colorAttachment.get());const ut=((At,St,Et,$t)=>{const Ot=Et.paint.get("hillshade-shadow-color"),Jt=Et.paint.get("hillshade-highlight-color"),Yt=Et.paint.get("hillshade-accent-color");let Gt=Et.paint.get("hillshade-illumination-direction")*(Math.PI/180);Et.paint.get("hillshade-illumination-anchor")==="viewport"&&(Gt-=At.transform.angle);const Kt=!At.options.moving;return{u_matrix:$t||At.transform.calculateProjMatrix(St.tileID.toUnwrapped(),Kt),u_image:0,u_latrange:hc(0,St.tileID),u_light:[Et.paint.get("hillshade-exaggeration"),Gt],u_shadow:Ot,u_highlight:Jt,u_accent:Yt}})(de,te,be,de.terrain?U.projMatrix:null);de.prepareDrawProgram(Ne,Je,U.toUnwrapped());const{tileBoundsBuffer:gt,tileBoundsIndexBuffer:It,tileBoundsSegments:kt}=de.getTileBoundsBuffers(te);Je.draw(Ne,qe.TRIANGLES,Pe,Re,Be,j.CullFaceMode.disabled,ut,be.id,gt,It,kt)}function Wr(de,U,te){if(!U.needsDEMTextureUpload)return;const be=de.context,Pe=be.gl;be.pixelStoreUnpackPremultiplyAlpha.set(!1),U.demTexture=U.demTexture||de.getTileTexture(te.stride);const Re=te.getPixels();U.demTexture?U.demTexture.update(Re,{premultiply:!1}):U.demTexture=new j.Texture(be,Re,Pe.RGBA,{premultiply:!1}),U.needsDEMTextureUpload=!1}function Ya(de,U,te,be,Pe,Re){const Be=de.context,Ne=Be.gl;if(!U.dem)return;const qe=U.dem;if(Be.activeTexture.set(Ne.TEXTURE1),Wr(de,U,qe),!U.demTexture)return;U.demTexture.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);const Ye=qe.dim;Be.activeTexture.set(Ne.TEXTURE0);let Je=U.fbo;if(!Je){const kt=new j.Texture(Be,{width:Ye,height:Ye,data:null},Ne.RGBA);kt.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Je=U.fbo=Be.createFramebuffer(Ye,Ye,!0),Je.colorAttachment.set(kt.texture)}Be.bindFramebuffer.set(Je.framebuffer),Be.viewport.set([0,0,Ye,Ye]);const{tileBoundsBuffer:ut,tileBoundsIndexBuffer:gt,tileBoundsSegments:It}=de.getMercatorTileBoundsBuffers();de.useProgram("hillshadePrepare").draw(Be,Ne.TRIANGLES,be,Pe,Re,j.CullFaceMode.disabled,((kt,At)=>{const St=At.stride,Et=j.create();return j.ortho(Et,0,j.EXTENT,-j.EXTENT,0,0,1),j.translate(Et,Et,[0,-j.EXTENT,0]),{u_matrix:Et,u_image:1,u_dimension:[St,St],u_zoom:kt.overscaledZ,u_unpack:At.unpackVector}})(U.tileID,qe),te.id,ut,gt,It),U.needsHillshadePrepare=!1}const Ls=de=>({u_matrix:new j.UniformMatrix4f(de),u_image0:new j.Uniform1i(de),u_skirt_height:new j.Uniform1f(de)}),$o=(de,U)=>({u_matrix:de,u_image0:0,u_skirt_height:U}),pc=(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It)=>({u_proj_matrix:Float32Array.from(de),u_globe_matrix:U,u_normalize_matrix:Float32Array.from(be),u_merc_matrix:te,u_zoom_transition:Pe,u_merc_center:Re,u_image0:0,u_frustum_tl:Be,u_frustum_tr:Ne,u_frustum_br:qe,u_frustum_bl:Ye,u_globe_pos:Je,u_globe_radius:ut,u_viewport:gt,u_grid_matrix:It?Float32Array.from(It):new Float32Array(9)});function El(de,U){return de!=null&&U!=null&&!(!de.hasData()||!U.hasData())&&de.demTexture!=null&&U.demTexture!=null&&de.tileID.key!==U.tileID.key}const ma=new class{constructor(){this.operations={}}newMorphing(de,U,te,be,Pe){if(de in this.operations){const Re=this.operations[de];Re.to.tileID.key!==te.tileID.key&&(Re.queued=te)}else this.operations[de]={startTime:be,phase:0,duration:Pe,from:U,to:te,queued:null}}getMorphValuesForProxy(de){if(!(de in this.operations))return null;const U=this.operations[de];return{from:U.from,to:U.to,phase:U.phase}}update(de){for(const U in this.operations){const te=this.operations[U];for(te.phase=(de-te.startTime)/te.duration;te.phase>=1||!this._validOp(te);)if(!this._nextOp(te,de)){delete this.operations[U];break}}}_nextOp(de,U){return!!de.queued&&(de.from=de.to,de.to=de.queued,de.queued=null,de.phase=0,de.startTime=U,!0)}_validOp(de){return de.from.hasData()&&de.to.hasData()}},Ja={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function rh(de,U){const te=1<<de.z;return!U&&(de.x===0||de.x===te-1)||de.y===0||de.y===te-1}const Qo=de=>({u_matrix:de});function Tl(de,U,te,be,Pe){if(Pe>0){const Re=j.exported.now(),Be=(Re-de.timeAdded)/Pe,Ne=U?(Re-U.timeAdded)/Pe:-1,qe=te.getSource(),Ye=be.coveringZoomLevel({tileSize:qe.tileSize,roundZoom:qe.roundZoom}),Je=!U||Math.abs(U.tileID.overscaledZ-Ye)>Math.abs(de.tileID.overscaledZ-Ye),ut=Je&&de.refreshedUponExpiration?1:j.clamp(Je?Be:1-Ne,0,1);return de.refreshedUponExpiration&&Be>=1&&(de.refreshedUponExpiration=!1),U?{opacity:1,mix:1-ut}:{opacity:ut,mix:0}}return{opacity:1,mix:0}}class Bs extends j.SourceCache{constructor(U){const te={type:"raster-dem",maxzoom:U.transform.maxZoom},be=new ln(ei(),null),Pe=_n("mock-dem",te,be,U.style);super("mock-dem",Pe,!1),Pe.setEventedParent(this),this._sourceLoaded=!0}_loadTile(U,te){U.state="loaded",te(null)}}class fc extends j.SourceCache{constructor(U){const te=_n("proxy",{type:"geojson",maxzoom:U.transform.maxZoom},new ln(ei(),null),U.style);super("proxy",te,!1),te.setEventedParent(this),this.map=this.getSource().map=U,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(U,te,be){if(U.freezeTileCoverage)return;this.transform=U;const Pe=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Re,Be)=>{if(Re[Be.key]="",!this._tiles[Be.key]){const Ne=new j.Tile(Be,this._source.tileSize*Be.overscaleFactor(),U.tileZoom);Ne.state="loaded",this._tiles[Be.key]=Ne}return Re},{});for(const Re in this._tiles)Re in Pe||(this.freeFBO(Re),this._tiles[Re].unloadVectorData(),delete this._tiles[Re])}freeFBO(U){const te=this.proxyCachedFBO[U];if(te!==void 0){const be=Object.values(te);this.renderCachePool.push(...be),delete this.proxyCachedFBO[U]}}deallocRenderCache(){this.renderCache.forEach(U=>U.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Al extends j.OverscaledTileID{constructor(U,te,be){super(U.overscaledZ,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y),this.proxyTileKey=te,this.projMatrix=be}}class nu extends j.Elevation{constructor(U,te){super(),this.painter=U,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[be,Pe,Re]=function(qe){const Ye=new j.StructArrayLayout4i8,Je=new j.StructArrayLayout3ui6,ut=131;Ye.reserve(17161),Je.reserve(33800);const gt=j.EXTENT/128,It=j.EXTENT+gt/2,kt=It+gt;for(let St=-gt;St<kt;St+=gt)for(let Et=-gt;Et<kt;Et+=gt){const $t=Et<0||Et>It||St<0||St>It?24575:0,Ot=j.clamp(Math.round(Et),0,j.EXTENT),Jt=j.clamp(Math.round(St),0,j.EXTENT);Ye.emplaceBack(Ot+$t,Jt,Ot,Jt)}const At=(St,Et)=>{const $t=Et*ut+St;Je.emplaceBack($t+1,$t,$t+ut),Je.emplaceBack($t+ut,$t+ut+1,$t+1)};for(let St=1;St<129;St++)for(let Et=1;Et<129;Et++)At(Et,St);return[0,129].forEach(St=>{for(let Et=0;Et<130;Et++)At(Et,St),At(St,Et)}),[Ye,Je,32768]}(),Be=U.context;this.gridBuffer=Be.createVertexBuffer(be,j.boundsAttributes.members),this.gridIndexBuffer=Be.createIndexBuffer(Pe),this.gridSegments=j.SegmentVector.simpleSegment(0,0,be.length,Pe.length),this.gridNoSkirtSegments=j.SegmentVector.simpleSegment(0,0,be.length,Re),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fc(te.map),this.orthoMatrix=j.create(),j.ortho(this.orthoMatrix,0,j.EXTENT,0,j.EXTENT,0,1);const Ne=Be.gl;this._overlapStencilMode=new j.StencilMode({func:Ne.GEQUAL,mask:255},0,255,Ne.KEEP,Ne.KEEP,Ne.REPLACE),this._previousZoom=U.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=te,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Bs(te.map)}set style(U){U.on("data",this._onStyleDataEvent.bind(this)),U.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=U,this._checkRenderCacheEfficiency()}update(U,te,be){if(U&&U.terrain){this._style!==U&&(this.style=U),this.enabled=!0;const Pe=U.terrain.properties;this.sourceCache=U.terrain.drapeRenderMode===0?this._mockSourceCache:U._getSourceCache(Pe.get("source")),this._exaggeration=Pe.get("exaggeration");const Re=()=>{this.sourceCache.used&&j.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Be=this.getScaledDemTileSize();this.sourceCache.update(te,Be,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Re(),this._initializing=!0),Re(),te.updateElevation(!be),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(te),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(U){this._findCoveringTileCache[U]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const U=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||U.efficiency!==100&&j.warnOnce(`Terrain render cache efficiency is not optimal (${U.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${U.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(U){U.coord&&U.dataType==="source"?this._clearRenderCacheForTile(U.sourceCacheId,U.coord):U.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const U in this._style._sourceCaches)this._style._sourceCaches[U].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(U=>U.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const U=2*this.proxySourceCache.getSource().tileSize;return[U,U]}set useVertexMorphing(U){this._useVertexMorphing=U}updateTileBinding(U){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const te=this.proxySourceCache,be=this.painter.transform;this._initializing&&(this._initializing=be._centerAltitude===0&&this.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(be.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const Pe=this.proxyCoords=te.getIds().map(qe=>{const Ye=te.getTileByID(qe).tileID;return Ye.projMatrix=be.calculateProjMatrix(Ye.toUnwrapped()),Ye});(function(qe,Ye){const Je=Ye.transform.pointCoordinate(Ye.transform.getCameraPoint()),ut=new j.pointGeometry(Je.x,Je.y);qe.sort((gt,It)=>{if(It.overscaledZ-gt.overscaledZ)return It.overscaledZ-gt.overscaledZ;const kt=new j.pointGeometry(gt.canonical.x+(1<<gt.canonical.z)*gt.wrap,gt.canonical.y),At=new j.pointGeometry(It.canonical.x+(1<<It.canonical.z)*It.wrap,It.canonical.y),St=ut.mult(1<<gt.canonical.z);return St.x-=.5,St.y-=.5,St.distSqr(kt)-St.distSqr(At)})})(Pe,this.painter),this._previousZoom=be.zoom;const Re=this.proxyToSource||{};this.proxyToSource={},Pe.forEach(qe=>{this.proxyToSource[qe.key]={}}),this.terrainTileForTile={};const Be=this._style._sourceCaches;for(const qe in Be){const Ye=Be[qe];if(!Ye.used||(Ye!==this.sourceCache&&this.resetTileLookupCache(Ye.id),this._setupProxiedCoordsForOrtho(Ye,U[qe],Re),Ye.usedForTerrain))continue;const Je=U[qe];Ye.getSource().reparseOverscaled&&this._assignTerrainTiles(Je)}this.proxiedCoords[te.id]=Pe.map(qe=>new Al(qe,qe.key,this.orthoMatrix)),this._assignTerrainTiles(Pe),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Re),this.renderingToTexture=!1,this._updateTimestamp=j.exported.now();const Ne={};this._visibleDemTiles=[];for(const qe of this.proxyCoords){const Ye=this.terrainTileForTile[qe.key];if(!Ye)continue;const Je=Ye.tileID.key;Je in Ne||(this._visibleDemTiles.push(Ye),Ne[Je]=Je)}}_assignTerrainTiles(U){this._initializing||U.forEach(te=>{if(this.terrainTileForTile[te.key])return;const be=this._findTileCoveringTileID(te,this.sourceCache);be&&(this.terrainTileForTile[te.key]=be)})}_prepareDEMTextures(){const U=this.painter.context,te=U.gl;for(const be in this.terrainTileForTile){const Pe=this.terrainTileForTile[be],Re=Pe.dem;!Re||Pe.demTexture&&!Pe.needsDEMTextureUpload||(U.activeTexture.set(te.TEXTURE1),Wr(this.painter,Pe,Re))}}_prepareDemTileUniforms(U,te,be,Pe){if(!te||te.demTexture==null)return!1;const Re=U.tileID.canonical,Be=Math.pow(2,te.tileID.canonical.z-Re.z),Ne=Pe||"";return be[`u_dem_tl${Ne}`]=[Re.x*Be%1,Re.y*Be%1],be[`u_dem_scale${Ne}`]=Be,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const U=this.painter.context,te=U.gl;if(!this._emptyDepthBufferTexture){const be=new j.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new j.Texture(U,be,te.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let U=0;const te=this._visibleDemTiles.reduce((be,Pe)=>{if(!Pe.dem)return be;const Re=Pe.dem.tree.minimums[0];return Re>0&&U++,be+Re},0);return U?te/U:0}_updateEmptyDEMTexture(){const U=this.painter.context,te=U.gl;U.activeTexture.set(te.TEXTURE2);const be=this._getLoadedAreaMinimum(),Pe=new j.RGBAImage({width:1,height:1},new Uint8Array(j.DEMData.pack(be,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let Re=this._emptyDEMTexture;return Re?Re.update(Pe,{premultiply:!1}):Re=this._emptyDEMTexture=new j.Texture(U,Pe,te.RGBA,{premultiply:!1}),Re}setupElevationDraw(U,te,be){const Pe=this.painter.context,Re=Pe.gl,Be=(Ne=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:j.DEMData.getUnpackVector(Ne),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var Ne;Be.u_dem_size=this.sourceCache.getSource().tileSize,Be.u_exaggeration=this.exaggeration();const qe=this.painter.transform,Ye=qe.projection,Je=U.tileID.canonical;Be.u_tile_tl_up=Ye.upVector(Je,0,0),Be.u_tile_tr_up=Ye.upVector(Je,j.EXTENT,0),Be.u_tile_br_up=Ye.upVector(Je,j.EXTENT,j.EXTENT),Be.u_tile_bl_up=Ye.upVector(Je,0,j.EXTENT),Be.u_tile_up_scale=be&&be.useDenormalizedUpVectorScale?j.GLOBE_METERS_TO_ECEF:Ye.upVectorScale(Je,qe.center.lat,qe.worldSize).metersToTile;let ut=null,gt=null,It=1;if(be&&be.morphing&&this._useVertexMorphing){const kt=be.morphing.srcDemTile,At=be.morphing.dstDemTile;It=be.morphing.phase,kt&&At&&(this._prepareDemTileUniforms(U,kt,Be,"_prev")&&(gt=kt),this._prepareDemTileUniforms(U,At,Be)&&(ut=At))}if(gt&&ut?(Pe.activeTexture.set(Re.TEXTURE2),ut.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE,Re.NEAREST),Pe.activeTexture.set(Re.TEXTURE4),gt.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE,Re.NEAREST),Be.u_dem_lerp=It):(ut=this.terrainTileForTile[U.tileID.key],Pe.activeTexture.set(Re.TEXTURE2),(this._prepareDemTileUniforms(U,ut,Be)?ut.demTexture:this.emptyDEMTexture).bind(Re.NEAREST,Re.CLAMP_TO_EDGE)),Pe.activeTexture.set(Re.TEXTURE3),be&&be.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),this._depthFBO&&(Be.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),Be.u_depth_size_inv=[1,1]),be&&be.useMeterToDem&&ut){const kt=(1<<ut.tileID.canonical.z)*j.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Be.u_meter_to_dem=kt}be&&be.labelPlaneMatrixInv&&(Be.u_label_plane_matrix_inv=be.labelPlaneMatrixInv),te.setTerrainUniformValues(Pe,Be)}renderToBackBuffer(U){const te=this.painter,be=this.painter.context;U.length!==0&&(be.bindFramebuffer.set(null),be.viewport.set([0,0,te.width,te.height]),te.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Pe,Re,Be,Ne,qe){if(Pe.transform.projection.name==="globe")(function(Ye,Je,ut,gt,It){const kt=Ye.context,At=kt.gl;let St,Et;const $t=Ye.options.showTerrainWireframe?2:0,Ot=Ye.transform,Jt=j.globeUseCustomAntiAliasing(Ye,kt,Ot),Yt=(er,kn)=>{if(Et===er)return;const Zn=[Ja[er],"PROJECTION_GLOBE_VIEW"];Jt&&Zn.push("CUSTOM_ANTIALIASING"),kn&&Zn.push(Ja[$t]),St=Ye.useProgram("globeRaster",null,Zn),Et=er},Gt=Ye.colorModeForRenderPass(),Kt=new j.DepthMode(At.LEQUAL,j.DepthMode.ReadWrite,Ye.depthRangeFor3D);ma.update(It);const Wt=j.calculateGlobeMercatorMatrix(Ot),sn=[j.mercatorXfromLng(Ot.center.lng),j.mercatorYfromLat(Ot.center.lat)],mn=$t?[!1,!0]:[!1],Wn=Ye.globeSharedBuffers,pn=[Ot.width*j.exported.devicePixelRatio,Ot.height*j.exported.devicePixelRatio],zn=Float32Array.from(Ot.globeMatrix),Nn={useDenormalizedUpVectorScale:!0};if(mn.forEach(er=>{Et=-1;const kn=er?At.LINES:At.TRIANGLES;for(const Zn of gt){const Ln=ut.getTile(Zn),or=j.StencilMode.disabled,tr=Je.prevTerrainTileForTile[Zn.key],pr=Je.terrainTileForTile[Zn.key];El(tr,pr)&&ma.newMorphing(Zn.key,tr,pr,It,250),kt.activeTexture.set(At.TEXTURE0),Ln.texture.bind(At.LINEAR,At.CLAMP_TO_EDGE);const yr=ma.getMorphValuesForProxy(Zn.key),Ar=yr?1:0;yr&&j.extend$1(Nn,{morphing:{srcDemTile:yr.from,dstDemTile:yr.to,phase:j.easeCubicInOut(yr.phase)}});const Vr=j.tileCornersToBounds(Zn.canonical),_r=j.getLatitudinalLod(Vr.getCenter().lat),Mr=j.getGridMatrix(Zn.canonical,Vr,_r),Zr=j.globeNormalizeECEF(j.globeTileBounds(Zn.canonical)),ci=pc(Ot.projMatrix,zn,Wt,Zr,j.globeToMercatorTransition(Ot.zoom),sn,Ot.frustumCorners.TL,Ot.frustumCorners.TR,Ot.frustumCorners.BR,Ot.frustumCorners.BL,Ot.globeCenterInViewSpace,Ot.globeRadius,pn,Mr);if(Yt(Ar,er),Je.setupElevationDraw(Ln,St,Nn),Ye.prepareDrawProgram(kt,St,Zn.toUnwrapped()),Wn){const[wi,oi,Wi]=er?Wn.getWirefameBuffers(Ye.context,_r):Wn.getGridBuffers(_r);St.draw(kt,kn,Kt,or,Gt,j.CullFaceMode.backCCW,ci,"globe_raster",wi,oi,Wi)}}}),Wn){const er=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Jt&&er.push("CUSTOM_ANTIALIASING"),St=Ye.useProgram("globeRaster",null,er);for(const kn of gt){const{x:Zn,y:Ln,z:or}=kn.canonical,tr=Ln===0,pr=Ln===(1<<or)-1,[yr,Ar,Vr,_r]=Wn.getPoleBuffers(or);if(_r&&(tr||pr)){const Mr=ut.getTile(kn);kt.activeTexture.set(At.TEXTURE0),Mr.texture.bind(At.LINEAR,At.CLAMP_TO_EDGE);let Zr=j.globePoleMatrixForTile(or,Zn,Ot);const ci=j.globeNormalizeECEF(j.globeTileBounds(kn.canonical)),wi=(oi,Wi)=>oi.draw(kt,At.TRIANGLES,Kt,j.StencilMode.disabled,Gt,j.CullFaceMode.disabled,pc(Ot.projMatrix,Zr,Zr,ci,0,sn,Ot.frustumCorners.TL,Ot.frustumCorners.TR,Ot.frustumCorners.BR,Ot.frustumCorners.BL,Ot.globeCenterInViewSpace,Ot.globeRadius,pn),"globe_pole_raster",Wi,Vr,_r);Je.setupElevationDraw(Mr,St,Nn),Ye.prepareDrawProgram(kt,St,kn.toUnwrapped()),tr&&wi(St,yr),pr&&(Zr=j.scale(j.create(),Zr,[1,-1,1]),wi(St,Ar))}}}})(Pe,Re,Be,Ne,qe);else{const Ye=Pe.context,Je=Ye.gl;let ut,gt;const It=Pe.options.showTerrainWireframe?2:0,kt=(Ot,Jt)=>{if(gt===Ot)return;const Yt=[Ja[Ot]];Jt&&Yt.push(Ja[It]),ut=Pe.useProgram("terrainRaster",null,Yt),gt=Ot},At=Pe.colorModeForRenderPass(),St=new j.DepthMode(Je.LEQUAL,j.DepthMode.ReadWrite,Pe.depthRangeFor3D);ma.update(qe);const Et=Pe.transform,$t=6*Math.pow(1.5,22-Et.zoom)*Re.exaggeration();(It?[!1,!0]:[!1]).forEach(Ot=>{gt=-1;const Jt=Ot?Je.LINES:Je.TRIANGLES,[Yt,Gt]=Ot?Re.getWirefameBuffer():[Re.gridIndexBuffer,Re.gridSegments];for(const Kt of Ne){const Wt=Be.getTile(Kt),sn=j.StencilMode.disabled,mn=Re.prevTerrainTileForTile[Kt.key],Wn=Re.terrainTileForTile[Kt.key];El(mn,Wn)&&ma.newMorphing(Kt.key,mn,Wn,qe,250),Ye.activeTexture.set(Je.TEXTURE0),Wt.texture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE,Je.LINEAR_MIPMAP_NEAREST);const pn=ma.getMorphValuesForProxy(Kt.key),zn=pn?1:0;let Nn;pn&&(Nn={morphing:{srcDemTile:pn.from,dstDemTile:pn.to,phase:j.easeCubicInOut(pn.phase)}});const er=$o(Kt.projMatrix,rh(Kt.canonical,Et.renderWorldCopies)?$t/10:$t);kt(zn,Ot),Re.setupElevationDraw(Wt,ut,Nn),Pe.prepareDrawProgram(Ye,ut,Kt.toUnwrapped()),ut.draw(Ye,Jt,St,sn,At,j.CullFaceMode.backCCW,er,"terrain_raster",Re.gridBuffer,Yt,Gt)}})}}(te,this,this.proxySourceCache,U,this._updateTimestamp),this.renderingToTexture=!0,te.gpuTimingDeferredRenderEnd(),U.splice(0,U.length))}renderBatch(U){if(this._drapedRenderBatches.length===0)return U+1;this.renderingToTexture=!0;const te=this.painter,be=this.painter.context,Pe=this.proxySourceCache,Re=this.proxiedCoords[Pe.id],Be=this._drapedRenderBatches.shift(),Ne=[],qe=te.style.order;let Ye=0;for(const Je of Re){const ut=Pe.getTileByID(Je.proxyTileKey),gt=Pe.proxyCachedFBO[Je.key]?Pe.proxyCachedFBO[Je.key][U]:void 0,It=gt!==void 0?Pe.renderCache[gt]:this.pool[Ye++],kt=gt!==void 0;if(ut.texture=It.tex,kt&&!It.dirty){Ne.push(ut.tileID);continue}let At;be.bindFramebuffer.set(It.fb.framebuffer),this.renderedToTile=!1,It.dirty&&(be.clear({color:j.Color.transparent,stencil:0}),It.dirty=!1);for(let St=Be.start;St<=Be.end;++St){const Et=te.style._layers[qe[St]];if(Et.isHidden(te.transform.zoom))continue;const $t=te.style._getLayerSourceCache(Et),Ot=$t?this.proxyToSource[Je.key][$t.id]:[Je];if(!Ot)continue;const Jt=Ot;be.viewport.set([0,0,It.fb.width,It.fb.height]),At!==($t?$t.id:null)&&(this._setupStencil(It,Ot,Et,$t),At=$t?$t.id:null),te.renderLayer(te,$t,Et,Jt)}this.renderedToTile?(It.dirty=!0,Ne.push(ut.tileID)):kt||--Ye,Ye===5&&(Ye=0,this.renderToBackBuffer(Ne))}return this.renderToBackBuffer(Ne),this.renderingToTexture=!1,be.bindFramebuffer.set(null),be.viewport.set([0,0,te.width,te.height]),Be.end+1}postRender(){}renderCacheEfficiency(U){const te=U.order.length;if(te===0)return{efficiency:100};let be,Pe=0,Re=0,Be=!1;for(let Ne=0;Ne<te;++Ne){const qe=U._layers[U.order[Ne]];this._style.isLayerDraped(qe)?(Be&&++Pe,++Re):Be||(Be=!0,be=qe.id)}return Re===0?{efficiency:100}:{efficiency:100*(1-Pe/Re),firstUndrapedLayer:be}}getMinElevationBelowMSL(){let U=0;return this._visibleDemTiles.filter(te=>te.dem).forEach(te=>{U=Math.min(U,te.dem.tree.minimums[0])}),U===0?U:(U-30)*this._exaggeration}raycast(U,te,be){if(!this._visibleDemTiles)return null;const Pe=this._visibleDemTiles.filter(Re=>Re.dem).map(Re=>{const Be=Re.tileID,Ne=1<<Be.overscaledZ,{x:qe,y:Ye}=Be.canonical,Je=qe/Ne,ut=(qe+1)/Ne,gt=Ye/Ne,It=(Ye+1)/Ne;return{minx:Je,miny:gt,maxx:ut,maxy:It,t:Re.dem.tree.raycastRoot(Je,gt,ut,It,U,te,be),tile:Re}});Pe.sort((Re,Be)=>(Re.t!==null?Re.t:Number.MAX_VALUE)-(Be.t!==null?Be.t:Number.MAX_VALUE));for(const Re of Pe){if(Re.t==null)return null;const Be=Re.tile.dem.tree.raycast(Re.minx,Re.miny,Re.maxx,Re.maxy,U,te,be);if(Be!=null)return Be}return null}_createFBO(){const U=this.painter.context,te=U.gl,be=this.drapeBufferSize;U.activeTexture.set(te.TEXTURE0);const Pe=new j.Texture(U,{width:be[0],height:be[1],data:null},te.RGBA);Pe.bind(te.LINEAR,te.CLAMP_TO_EDGE);const Re=U.createFramebuffer(be[0],be[1],!1);return Re.colorAttachment.set(Pe.texture),Re.depthAttachment=new ct(U,Re.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=U.createRenderbuffer(U.gl.DEPTH_STENCIL,be[0],be[1]),this._stencilRef=0,Re.depthAttachment.set(this._sharedDepthStencil),U.clear({stencil:0})):Re.depthAttachment.set(this._sharedDepthStencil),U.extTextureFilterAnisotropic&&!U.extTextureFilterAnisotropicForceOff&&te.texParameterf(te.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax),{fb:Re,tex:Pe,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const U in this._style._sourceCaches)if(this._style._sourceCaches[U].hasTransition())return!0;return this._style.order.some(U=>{const te=this._style._layers[U],be=te.isHidden(this.painter.transform.zoom),Pe=te.getCrossfadeParameters(),Re=!!Pe&&Pe.t!==1,Be=te.hasTransition();return te.type!=="custom"&&!be&&(Re||Be)})}_clearRasterFadeFromRenderCache(){let U=!1;for(const te in this._style._sourceCaches)if(this._style._sourceCaches[te]._source instanceof Ut){U=!0;break}if(U)for(let te=0;te<this._style.order.length;++te){const be=this._style._layers[this._style.order[te]],Pe=be.isHidden(this.painter.transform.zoom),Re=this._style._getLayerSourceCache(be);if(be.type!=="raster"||Pe||!Re)continue;const Be=be.paint.get("raster-fade-duration");for(const Ne of this.proxyCoords){const qe=this.proxyToSource[Ne.key][Re.id];if(qe)for(const Ye of qe){const Je=Tl(Re.getTile(Ye),Re.findLoadedParent(Ye,0),Re,this.painter.transform,Be);(Je.opacity!==1||Je.mix!==0)&&this._clearRenderCacheForTile(Re.id,Ye)}}}}_setupDrapedRenderBatches(){const U=this._style.order,te=U.length;if(te===0)return;const be=[];let Pe,Re=0,Be=this._style._layers[U[Re]];for(;!this._style.isLayerDraped(Be)&&Be.isHidden(this.painter.transform.zoom)&&++Re<te;)Be=this._style._layers[U[Re]];for(;Re<te;++Re){const Ne=this._style._layers[U[Re]];Ne.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(Ne)?Pe===void 0&&(Pe=Re):Pe!==void 0&&(be.push({start:Pe,end:Re-1}),Pe=void 0))}Pe!==void 0&&be.push({start:Pe,end:Re-1}),this._drapedRenderBatches=be}_setupRenderCache(U){const te=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,te.renderCache.length>te.renderCachePool.length){const Be=Object.values(te.proxyCachedFBO);te.proxyCachedFBO={};for(let Ne=0;Ne<Be.length;++Ne){const qe=Object.values(Be[Ne]);te.renderCachePool.push(...qe)}}return}this._clearRasterFadeFromRenderCache();const be=this.proxyCoords,Pe=this._tilesDirty;for(let Be=be.length-1;Be>=0;Be--){const Ne=be[Be];if(te.getTileByID(Ne.key),te.proxyCachedFBO[Ne.key]!==void 0){const qe=U[Ne.key],Ye=this.proxyToSource[Ne.key];let Je=0;for(const ut in Ye){const gt=Ye[ut],It=qe[ut];if(!It||It.length!==gt.length||gt.some((kt,At)=>kt!==It[At]||Pe[ut]&&Pe[ut].hasOwnProperty(kt.key))){Je=-1;break}++Je}for(const ut in te.proxyCachedFBO[Ne.key])te.renderCache[te.proxyCachedFBO[Ne.key][ut]].dirty=Je<0||Je!==Object.values(qe).length}}const Re=[...this._drapedRenderBatches];Re.sort((Be,Ne)=>Ne.end-Ne.start-(Be.end-Be.start));for(const Be of Re)for(const Ne of be){if(te.proxyCachedFBO[Ne.key])continue;let qe=te.renderCachePool.pop();qe===void 0&&te.renderCache.length<50&&(qe=te.renderCache.length,te.renderCache.push(this._createFBO())),qe!==void 0&&(te.proxyCachedFBO[Ne.key]={},te.proxyCachedFBO[Ne.key][Be.start]=qe,te.renderCache[qe].dirty=!0)}this._tilesDirty={}}_setupStencil(U,te,be,Pe){if(!Pe||!this._sourceTilesOverlap[Pe.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Re=this.painter.context,Be=Re.gl;if(te.length<=1)return void(this._overlapStencilType=!1);let Ne;if(be.isTileClipped())Ne=te.length,this._overlapStencilMode.test={func:Be.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(te[0].overscaledZ>te[te.length-1].overscaledZ))return void(this._overlapStencilType=!1);Ne=1,this._overlapStencilMode.test={func:Be.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+Ne>255&&(Re.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=Ne,this._overlapStencilMode.ref=this._stencilRef,be.isTileClipped()&&this._renderTileClippingMasks(te,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(U){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[U.key]),this._overlapStencilMode):j.StencilMode.disabled}_renderTileClippingMasks(U,te){const be=this.painter,Pe=this.painter.context,Re=Pe.gl;be._tileClippingMaskIDs={},Pe.setColorMode(j.ColorMode.disabled),Pe.setDepthMode(j.DepthMode.disabled);const Be=be.useProgram("clippingMask");for(const Ne of U){const qe=be._tileClippingMaskIDs[Ne.key]=--te;Be.draw(Pe,Re.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Re.ALWAYS,mask:0},qe,255,Re.KEEP,Re.KEEP,Re.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,Qo(Ne.projMatrix),"$clipping",be.tileExtentBuffer,be.quadTriangleIndexBuffer,be.tileExtentSegments)}}pointCoordinate(U){const te=this.painter.transform;if(U.x<0||U.x>te.width||U.y<0||U.y>te.height)return null;const be=[U.x,U.y,1,1];j.transformMat4$1(be,be,te.pixelMatrixInverse),j.scale$1(be,be,1/be[3]),be[0]/=te.worldSize,be[1]/=te.worldSize;const Pe=te._camera.position,Re=j.mercatorZfromAltitude(1,te.center.lat),Be=[Pe[0],Pe[1],Pe[2]/Re,0],Ne=j.subtract([],be.slice(0,3),Be);j.normalize(Ne,Ne);const qe=this.raycast(Be,Ne,this._exaggeration);return qe!==null&&qe?(j.scaleAndAdd(Be,Be,Ne,qe),Be[3]=Be[2],Be[2]*=Re,Be):null}drawDepth(){const U=this.painter,te=U.context,be=this.proxySourceCache,Pe=Math.ceil(U.width),Re=Math.ceil(U.height);if(!this._depthFBO||this._depthFBO.width===Pe&&this._depthFBO.height===Re||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Be=te.gl,Ne=te.createFramebuffer(Pe,Re,!0);te.activeTexture.set(Be.TEXTURE0);const qe=new j.Texture(te,{width:Pe,height:Re,data:null},Be.RGBA);qe.bind(Be.NEAREST,Be.CLAMP_TO_EDGE),Ne.colorAttachment.set(qe.texture);const Ye=te.createRenderbuffer(te.gl.DEPTH_COMPONENT16,Pe,Re);Ne.depthAttachment.set(Ye),this._depthFBO=Ne,this._depthTexture=qe}te.bindFramebuffer.set(this._depthFBO.framebuffer),te.viewport.set([0,0,Pe,Re]),function(Be,Ne,qe,Ye){if(Be.transform.projection.name==="globe")return;const Je=Be.context,ut=Je.gl;Je.clear({depth:1});const gt=Be.useProgram("terrainDepth"),It=new j.DepthMode(ut.LESS,j.DepthMode.ReadWrite,Be.depthRangeFor3D);for(const kt of Ye){const At=qe.getTile(kt),St=$o(kt.projMatrix,0);Ne.setupElevationDraw(At,gt),gt.draw(Je,ut.TRIANGLES,It,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.backCCW,St,"terrain_depth",Ne.gridBuffer,Ne.gridIndexBuffer,Ne.gridNoSkirtSegments)}}(U,this,be,this.proxyCoords)}_setupProxiedCoordsForOrtho(U,te,be){if(U.getSource()instanceof dn)return this._setupProxiedCoordsForImageSource(U,te,be);this._findCoveringTileCache[U.id]=this._findCoveringTileCache[U.id]||{};const Pe=this.proxiedCoords[U.id]=[],Re=this.proxyCoords;for(let Ne=0;Ne<Re.length;Ne++){const qe=Re[Ne],Ye=this._findTileCoveringTileID(qe,U);if(Ye){const Je=this._createProxiedId(qe,Ye,be[qe.key]&&be[qe.key][U.id]);Pe.push(Je),this.proxyToSource[qe.key][U.id]=[Je]}}let Be=!1;for(let Ne=0;Ne<te.length;Ne++){const qe=U.getTile(te[Ne]);if(!qe||!qe.hasData())continue;const Ye=this._findTileCoveringTileID(qe.tileID,this.proxySourceCache);if(Ye&&Ye.tileID.canonical.z!==qe.tileID.canonical.z){const Je=this.proxyToSource[Ye.tileID.key][U.id],ut=this._createProxiedId(Ye.tileID,qe,be[Ye.tileID.key]&&be[Ye.tileID.key][U.id]);Je?Je.splice(Je.length-1,0,ut):this.proxyToSource[Ye.tileID.key][U.id]=[ut],Pe.push(ut),Be=!0}}this._sourceTilesOverlap[U.id]=Be}_setupProxiedCoordsForImageSource(U,te,be){if(!U.getSource().loaded())return;const Pe=this.proxiedCoords[U.id]=[],Re=this.proxyCoords,Be=U.getSource(),Ne=new j.pointGeometry(Be.tileID.x,Be.tileID.y)._div(1<<Be.tileID.z),qe=Be.coordinates.map(j.MercatorCoordinate.fromLngLat).reduce((Je,ut)=>(Je.min.x=Math.min(Je.min.x,ut.x-Ne.x),Je.min.y=Math.min(Je.min.y,ut.y-Ne.y),Je.max.x=Math.max(Je.max.x,ut.x-Ne.x),Je.max.y=Math.max(Je.max.y,ut.y-Ne.y),Je),{min:new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new j.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Ye=(Je,ut)=>{const gt=Je.wrap+Je.canonical.x/(1<<Je.canonical.z),It=Je.canonical.y/(1<<Je.canonical.z),kt=j.EXTENT/(1<<Je.canonical.z),At=ut.wrap+ut.canonical.x/(1<<ut.canonical.z),St=ut.canonical.y/(1<<ut.canonical.z);return gt+kt<At+qe.min.x||gt>At+qe.max.x||It+kt<St+qe.min.y||It>St+qe.max.y};for(let Je=0;Je<Re.length;Je++){const ut=Re[Je];for(let gt=0;gt<te.length;gt++){const It=U.getTile(te[gt]);if(!It||!It.hasData()||Ye(ut,It.tileID))continue;const kt=this._createProxiedId(ut,It,be[ut.key]&&be[ut.key][U.id]),At=this.proxyToSource[ut.key][U.id];At?At.push(kt):this.proxyToSource[ut.key][U.id]=[kt],Pe.push(kt)}}}_createProxiedId(U,te,be){let Pe=this.orthoMatrix;if(be){const Re=be.find(Be=>Be.key===te.tileID.key);if(Re)return Re}if(te.tileID.key!==U.key){const Re=U.canonical.z-te.tileID.canonical.z;let Be,Ne,qe;Pe=j.create();const Ye=te.tileID.wrap-U.wrap<<U.overscaledZ;Re>0?(Be=j.EXTENT>>Re,Ne=Be*((te.tileID.canonical.x<<Re)-U.canonical.x+Ye),qe=Be*((te.tileID.canonical.y<<Re)-U.canonical.y)):(Be=j.EXTENT<<-Re,Ne=j.EXTENT*(te.tileID.canonical.x-(U.canonical.x+Ye<<-Re)),qe=j.EXTENT*(te.tileID.canonical.y-(U.canonical.y<<-Re))),j.ortho(Pe,0,Be,0,Be,0,1),j.translate(Pe,Pe,[Ne,qe,0])}return new Al(te.tileID,U.key,Pe)}_findTileCoveringTileID(U,te){let be=te.getTile(U);if(be&&be.hasData())return be;const Pe=this._findCoveringTileCache[te.id],Re=Pe[U.key];if(be=Re?te.getTileByID(Re):null,be&&be.hasData()||Re===null)return be;let Be=be?be.tileID:U,Ne=Be.overscaledZ;const qe=te.getSource().minzoom,Ye=[];if(!Re){const ut=te.getSource().maxzoom;if(U.canonical.z>=ut){const gt=U.canonical.z-ut;te.getSource().reparseOverscaled?(Ne=Math.max(U.canonical.z+2,te.transform.tileZoom),Be=new j.OverscaledTileID(Ne,U.wrap,ut,U.canonical.x>>gt,U.canonical.y>>gt)):gt!==0&&(Ne=ut,Be=new j.OverscaledTileID(Ne,U.wrap,ut,U.canonical.x>>gt,U.canonical.y>>gt))}Be.key!==U.key&&(Ye.push(Be.key),be=te.getTile(Be))}const Je=ut=>{Ye.forEach(gt=>{Pe[gt]=ut}),Ye.length=0};for(Ne-=1;Ne>=qe&&(!be||!be.hasData());Ne--){be&&Je(be.tileID.key);const ut=Be.calculateScaledKey(Ne);if(be=te.getTileByID(ut),be&&be.hasData())break;const gt=Pe[ut];if(gt===null)break;gt===void 0?Ye.push(ut):be=te.getTileByID(gt)}return Je(be?be.tileID.key:null),be&&be.hasData()?be:null}findDEMTileFor(U){return this.enabled?this._findTileCoveringTileID(U,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(U,te){let be=this._tilesDirty[U];be||(be=this._tilesDirty[U]={}),be[te.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const U=function(te){let be=0;const Pe=new j.StructArrayLayout2ui4,Re=131;for(let Be=1;Be<129;Be++){for(let Ne=1;Ne<129;Ne++)be=Be*Re+Ne,Pe.emplaceBack(be,be+1),Pe.emplaceBack(be,be+Re),Pe.emplaceBack(be+1,be+Re),Be===128&&Pe.emplaceBack(be+Re,be+Re+1);Pe.emplaceBack(be+1,be+1+Re)}return Pe}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(U),this.wireframeSegments=j.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,U.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class kl{static cacheKey(U,te,be,Pe){let Re=`${te}${Pe?Pe.cacheKey:""}`;for(const Be of be)U.usedDefines.includes(Be)&&(Re+=`/${Be}`);return Re}constructor(U,te,be,Pe,Re,Be){const Ne=U.gl;this.program=Ne.createProgram();const qe=function(St){const Et=[];for(let $t=0;$t<St.length;$t++){if(St[$t]===null)continue;const Ot=St[$t].split(" ");Et.push(Ot.pop())}return Et}(be.staticAttributes),Ye=Pe?Pe.getBinderAttributes():[],Je=qe.concat(Ye);let ut=Pe?Pe.defines():[];ut=ut.concat(Be.map(St=>`#define ${St}`));const gt=ut.concat(U.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(Ds):Ds,Ds,xl,Uo.fragmentSource,jo.fragmentSource,be.fragmentSource).join(`
`),It=ut.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,xl,Uo.vertexSource,jo.vertexSource,vl.vertexSource,be.vertexSource).join(`
`),kt=Ne.createShader(Ne.FRAGMENT_SHADER);if(Ne.isContextLost())return void(this.failedToCreate=!0);Ne.shaderSource(kt,gt),Ne.compileShader(kt),Ne.attachShader(this.program,kt);const At=Ne.createShader(Ne.VERTEX_SHADER);if(Ne.isContextLost())this.failedToCreate=!0;else{Ne.shaderSource(At,It),Ne.compileShader(At),Ne.attachShader(this.program,At),this.attributes={},this.numAttributes=Je.length;for(let St=0;St<this.numAttributes;St++)Je[St]&&(Ne.bindAttribLocation(this.program,St,Je[St]),this.attributes[Je[St]]=St);Ne.linkProgram(this.program),Ne.deleteShader(At),Ne.deleteShader(kt),this.fixedUniforms=Re(U),this.binderUniforms=Pe?Pe.getUniforms(U):[],Be.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(St=>({u_dem:new j.Uniform1i(St),u_dem_prev:new j.Uniform1i(St),u_dem_unpack:new j.Uniform4f(St),u_dem_tl:new j.Uniform2f(St),u_dem_scale:new j.Uniform1f(St),u_dem_tl_prev:new j.Uniform2f(St),u_dem_scale_prev:new j.Uniform1f(St),u_dem_size:new j.Uniform1f(St),u_dem_lerp:new j.Uniform1f(St),u_exaggeration:new j.Uniform1f(St),u_depth:new j.Uniform1i(St),u_depth_size_inv:new j.Uniform2f(St),u_meter_to_dem:new j.Uniform1f(St),u_label_plane_matrix_inv:new j.UniformMatrix4f(St),u_tile_tl_up:new j.Uniform3f(St),u_tile_tr_up:new j.Uniform3f(St),u_tile_br_up:new j.Uniform3f(St),u_tile_bl_up:new j.Uniform3f(St),u_tile_up_scale:new j.Uniform1f(St)}))(U)),Be.indexOf("FOG")!==-1&&(this.fogUniforms=(St=>({u_fog_matrix:new j.UniformMatrix4f(St),u_fog_range:new j.Uniform2f(St),u_fog_color:new j.Uniform4f(St),u_fog_horizon_blend:new j.Uniform1f(St),u_fog_temporal_offset:new j.Uniform1f(St),u_frustum_tl:new j.Uniform3f(St),u_frustum_tr:new j.Uniform3f(St),u_frustum_br:new j.Uniform3f(St),u_frustum_bl:new j.Uniform3f(St),u_globe_pos:new j.Uniform3f(St),u_globe_radius:new j.Uniform1f(St),u_globe_transition:new j.Uniform1f(St),u_is_globe:new j.Uniform1i(St),u_viewport:new j.Uniform2f(St)}))(U))}}setTerrainUniformValues(U,te){if(!this.terrainUniforms)return;const be=this.terrainUniforms;if(!this.failedToCreate){U.program.set(this.program);for(const Pe in te)be[Pe].set(this.program,Pe,te[Pe])}}setFogUniformValues(U,te){if(!this.fogUniforms)return;const be=this.fogUniforms;if(!this.failedToCreate){U.program.set(this.program);for(const Pe in te)be[Pe].set(this.program,Pe,te[Pe])}}draw(U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At){const St=U.gl;if(this.failedToCreate)return;U.program.set(this.program),U.setDepthMode(be),U.setStencilMode(Pe),U.setColorMode(Re),U.setCullFace(Be);for(const $t of Object.keys(this.fixedUniforms))this.fixedUniforms[$t].set(this.program,$t,Ne[$t]);kt&&kt.setUniforms(this.program,U,this.binderUniforms,gt,{zoom:It});const Et={[St.LINES]:2,[St.TRIANGLES]:3,[St.LINE_STRIP]:1}[te];for(const $t of ut.get()){const Ot=$t.vaos||($t.vaos={});(Ot[qe]||(Ot[qe]=new wl)).bind(U,this,Ye,kt?kt.getPaintVertexBuffers():[],Je,$t.vertexOffset,At||[]),St.drawElements(te,$t.primitiveLength*Et,St.UNSIGNED_SHORT,$t.primitiveOffset*Et*2)}}}function ru(de,U,te){const be=1/In(te,1,U.transform.tileZoom),Pe=Math.pow(2,te.tileID.overscaledZ),Re=te.tileSize*Math.pow(2,U.transform.tileZoom)/Pe,Be=Re*(te.tileID.canonical.x+te.tileID.wrap*Pe),Ne=Re*te.tileID.canonical.y;return{u_image:0,u_texsize:te.imageAtlasTexture.size,u_scale:[be,de.fromScale,de.toScale],u_fade:de.t,u_pixel_coord_upper:[Be>>16,Ne>>16],u_pixel_coord_lower:[65535&Be,65535&Ne]}}const Vo=j.create(),Qa=(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je)=>{const ut=U.style.light,gt=ut.properties.get("position"),It=[gt.x,gt.y,gt.z],kt=j.create$1();ut.properties.get("anchor")==="viewport"&&(j.fromRotation(kt,-U.transform.angle),j.transformMat3(It,It,kt));const At=ut.properties.get("color"),St=U.transform,Et={u_matrix:de,u_lightpos:It,u_lightintensity:ut.properties.get("intensity"),u_lightcolor:[At.r,At.g,At.b],u_vertical_gradient:+te,u_opacity:be,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Vo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Pe,u_edge_radius:Re};return St.projection.name==="globe"&&(Et.u_tile_id=[Be.canonical.x,Be.canonical.y,1<<Be.canonical.z],Et.u_zoom_transition=qe,Et.u_inv_rot_matrix=Je,Et.u_merc_center=Ye,Et.u_up_dir=St.projection.upVector(new j.CanonicalTileID(0,0,0),Ye[0]*j.EXTENT,Ye[1]*j.EXTENT),Et.u_height_lift=Ne),Et},iu=(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt)=>{const It=Qa(de,U,te,be,Pe,Re,Be,Ye,Je,ut,gt),kt={u_height_factor:-Math.pow(2,Be.overscaledZ)/qe.tileSize/8};return j.extend(It,ru(Ne,U,qe),kt)},Fs=de=>({u_matrix:de}),Sl=(de,U,te,be)=>j.extend(Fs(de),ru(te,U,be)),Go=(de,U)=>({u_matrix:de,u_world:U}),Ia=(de,U,te,be,Pe)=>j.extend(Sl(de,U,te,be),{u_world:Pe}),ou=j.create(),_c=(de,U,te,be,Pe,Re)=>{const Be=de.transform,Ne=Be.projection.name==="globe";let qe;if(Re.paint.get("circle-pitch-alignment")==="map")if(Ne){const Je=j.globePixelsToTileUnits(Be.zoom,U.canonical)*Be._pixelsPerMercatorPixel;qe=Float32Array.from([Je,0,0,Je])}else qe=Be.calculatePixelsToTileUnitsMatrix(te);else qe=new Float32Array([Be.pixelsToGLUnits[0],0,0,Be.pixelsToGLUnits[1]]);const Ye={u_camera_to_center_distance:Be.cameraToCenterDistance,u_matrix:de.translatePosMatrix(U.projMatrix,te,Re.paint.get("circle-translate"),Re.paint.get("circle-translate-anchor")),u_device_pixel_ratio:j.exported.devicePixelRatio,u_extrude_scale:qe,u_inv_rot_matrix:ou,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Ne){Ye.u_inv_rot_matrix=be,Ye.u_merc_center=Pe,Ye.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Ye.u_zoom_transition=j.globeToMercatorTransition(Be.zoom);const Je=Pe[0]*j.EXTENT,ut=Pe[1]*j.EXTENT;Ye.u_up_dir=Be.projection.upVector(new j.CanonicalTileID(0,0,0),Je,ut)}return Ye},au=de=>{const U=[];return de.paint.get("circle-pitch-alignment")==="map"&&U.push("PITCH_WITH_MAP"),de.paint.get("circle-pitch-scale")==="map"&&U.push("SCALE_WITH_MAP"),U},mc=(de,U,te,be)=>{const Pe=j.EXTENT/te.tileSize;return{u_matrix:de,u_camera_to_center_distance:U.getCameraToCenterDistance(be),u_extrude_scale:[U.pixelsToGLUnits[0]/Pe,U.pixelsToGLUnits[1]/Pe]}},su=(de,U,te=1)=>({u_matrix:de,u_color:U,u_overlay:0,u_overlay_scale:te}),gc=j.create(),ih=(de,U,te,be,Pe,Re,Be)=>{const Ne=de.transform,qe=Ne.projection.name==="globe",Ye=qe?j.globePixelsToTileUnits(Ne.zoom,U.canonical)*Ne._pixelsPerMercatorPixel:In(te,1,Re),Je={u_matrix:U.projMatrix,u_extrude_scale:Ye,u_intensity:Be,u_inv_rot_matrix:gc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(qe){Je.u_inv_rot_matrix=be,Je.u_merc_center=Pe,Je.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Je.u_zoom_transition=j.globeToMercatorTransition(Ne.zoom);const ut=Pe[0]*j.EXTENT,gt=Pe[1]*j.EXTENT;Je.u_up_dir=Ne.projection.upVector(new j.CanonicalTileID(0,0,0),ut,gt)}return Je},Cl=(de,U,te,be,Pe,Re,Be,Ne)=>{const qe=de.transform,Ye=qe.calculatePixelsToTileUnitsMatrix(U),Je={u_matrix:lu(de,U,te,Pe),u_pixels_to_tile_units:Ye,u_device_pixel_ratio:Be,u_units_to_pixels:[1/qe.pixelsToGLUnits[0],1/qe.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Re,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:Ne};if(Il(te)){const ut=Ml(U,de.transform);Je.u_texsize=U.lineAtlasTexture.size,Je.u_scale=[ut,be.fromScale,be.toScale],Je.u_mix=be.t}return Je},oh=(de,U,te,be,Pe,Re)=>{const Be=de.transform,Ne=Ml(U,Be);return{u_matrix:lu(de,U,te,Pe),u_texsize:U.imageAtlasTexture.size,u_pixels_to_tile_units:Be.calculatePixelsToTileUnitsMatrix(U),u_device_pixel_ratio:Re,u_image:0,u_scale:[Ne,be.fromScale,be.toScale],u_fade:be.t,u_units_to_pixels:[1/Be.pixelsToGLUnits[0],1/Be.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ml(de,U){return 1/In(de,1,U.tileZoom)}function lu(de,U,te,be){return de.translatePosMatrix(be||U.tileID.projMatrix,U,te.paint.get("line-translate"),te.paint.get("line-translate-anchor"))}function Il(de){const U=de.paint.get("line-dasharray").value;return U.value||U.kind!=="constant"}const ah=(de,U,te,be,Pe,Re)=>{return{u_matrix:de,u_tl_parent:U,u_scale_parent:te,u_fade_t:be.mix,u_opacity:be.opacity*Pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Pe.paint.get("raster-brightness-min"),u_brightness_high:Pe.paint.get("raster-brightness-max"),u_saturation_factor:(Ne=Pe.paint.get("raster-saturation"),Ne>0?1-1/(1.001-Ne):-Ne),u_contrast_factor:(Be=Pe.paint.get("raster-contrast"),Be>0?1/(1-Be):1+Be),u_spin_weights:Ns(Pe.paint.get("raster-hue-rotate")),u_perspective_transform:Re};var Be,Ne};function Ns(de){de*=Math.PI/180;const U=Math.sin(de),te=Math.cos(de);return[(2*te+1)/3,(-Math.sqrt(3)*U-te+1)/3,(Math.sqrt(3)*U-te+1)/3]}const cu=j.create(),es=(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At)=>{const St=Pe.transform,Et={u_is_size_zoom_constant:+(de==="constant"||de==="source"),u_is_size_feature_constant:+(de==="constant"||de==="camera"),u_size_t:U?U.uSizeT:0,u_size:U?U.uSize:0,u_camera_to_center_distance:St.cameraToCenterDistance,u_rotate_symbol:+te,u_aspect_ratio:St.width/St.height,u_fade_change:Pe.options.fadeDuration?Pe.symbolFadeChange:1,u_matrix:Re,u_label_plane_matrix:Be,u_coord_matrix:Ne,u_is_text:+qe,u_pitch_with_map:+be,u_texsize:Ye,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:cu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:cu,u_up_vector:[0,-1,0]};return At.name==="globe"&&(Et.u_tile_id=[Je.canonical.x,Je.canonical.y,1<<Je.canonical.z],Et.u_zoom_transition=ut,Et.u_inv_rot_matrix=It,Et.u_merc_center=gt,Et.u_camera_forward=St._camera.forward(),Et.u_ecef_origin=j.globeECEFOrigin(St.globeMatrix,Je.toUnwrapped()),Et.u_tile_matrix=Float32Array.from(St.globeMatrix),Et.u_up_vector=kt),Et},yc=(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At,St)=>j.extend(es(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,ut,gt,It,kt,At,St),{u_gamma_scale:be?Pe.transform.cameraToCenterDistance*Math.cos(Pe.terrain?0:Pe.transform._pitch):1,u_device_pixel_ratio:j.exported.devicePixelRatio,u_is_halo:+Je}),Pa=(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut,gt,It,kt,At)=>j.extend(yc(de,U,te,be,Pe,Re,Be,Ne,!0,qe,!0,Je,ut,gt,It,kt,At),{u_texsize_icon:Ye,u_texture_icon:1}),sh=(de,U,te)=>({u_matrix:de,u_opacity:U,u_color:te}),uu=(de,U,te,be,Pe,Re)=>j.extend(function(Be,Ne,qe,Ye){const Je=qe.imageManager.getPattern(Be.from.toString()),ut=qe.imageManager.getPattern(Be.to.toString()),{width:gt,height:It}=qe.imageManager.getPixelSize(),kt=Math.pow(2,Ye.tileID.overscaledZ),At=Ye.tileSize*Math.pow(2,qe.transform.tileZoom)/kt,St=At*(Ye.tileID.canonical.x+Ye.tileID.wrap*kt),Et=At*Ye.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Je.tl,u_pattern_br_a:Je.br,u_pattern_tl_b:ut.tl,u_pattern_br_b:ut.br,u_texsize:[gt,It],u_mix:Ne.t,u_pattern_size_a:Je.displaySize,u_pattern_size_b:ut.displaySize,u_scale_a:Ne.fromScale,u_scale_b:Ne.toScale,u_tile_units_to_pixels:1/In(Ye,1,qe.transform.tileZoom),u_pixel_coord_upper:[St>>16,Et>>16],u_pixel_coord_lower:[65535&St,65535&Et]}}(be,Re,te,Pe),{u_matrix:de,u_opacity:U}),lh={fillExtrusion:de=>({u_matrix:new j.UniformMatrix4f(de),u_lightpos:new j.Uniform3f(de),u_lightintensity:new j.Uniform1f(de),u_lightcolor:new j.Uniform3f(de),u_vertical_gradient:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de),u_edge_radius:new j.Uniform1f(de),u_ao:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_up_dir:new j.Uniform3f(de),u_height_lift:new j.Uniform1f(de)}),fillExtrusionPattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_lightpos:new j.Uniform3f(de),u_lightintensity:new j.Uniform1f(de),u_lightcolor:new j.Uniform3f(de),u_vertical_gradient:new j.Uniform1f(de),u_height_factor:new j.Uniform1f(de),u_edge_radius:new j.Uniform1f(de),u_ao:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_up_dir:new j.Uniform3f(de),u_height_lift:new j.Uniform1f(de),u_image:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de)}),fill:de=>({u_matrix:new j.UniformMatrix4f(de)}),fillPattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_image:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de)}),fillOutline:de=>({u_matrix:new j.UniformMatrix4f(de),u_world:new j.Uniform2f(de)}),fillOutlinePattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_world:new j.Uniform2f(de),u_image:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de)}),circle:de=>({u_camera_to_center_distance:new j.Uniform1f(de),u_extrude_scale:new j.UniformMatrix2f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_up_dir:new j.Uniform3f(de)}),collisionBox:de=>({u_matrix:new j.UniformMatrix4f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_extrude_scale:new j.Uniform2f(de)}),collisionCircle:de=>({u_matrix:new j.UniformMatrix4f(de),u_inv_matrix:new j.UniformMatrix4f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_viewport_size:new j.Uniform2f(de)}),debug:de=>({u_color:new j.UniformColor(de),u_matrix:new j.UniformMatrix4f(de),u_overlay:new j.Uniform1i(de),u_overlay_scale:new j.Uniform1f(de)}),clippingMask:de=>({u_matrix:new j.UniformMatrix4f(de)}),heatmap:de=>({u_extrude_scale:new j.Uniform1f(de),u_intensity:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_up_dir:new j.Uniform3f(de)}),heatmapTexture:de=>({u_image:new j.Uniform1i(de),u_color_ramp:new j.Uniform1i(de),u_opacity:new j.Uniform1f(de)}),hillshade:de=>({u_matrix:new j.UniformMatrix4f(de),u_image:new j.Uniform1i(de),u_latrange:new j.Uniform2f(de),u_light:new j.Uniform2f(de),u_shadow:new j.UniformColor(de),u_highlight:new j.UniformColor(de),u_accent:new j.UniformColor(de)}),hillshadePrepare:de=>({u_matrix:new j.UniformMatrix4f(de),u_image:new j.Uniform1i(de),u_dimension:new j.Uniform2f(de),u_zoom:new j.Uniform1f(de),u_unpack:new j.Uniform4f(de)}),line:de=>({u_matrix:new j.UniformMatrix4f(de),u_pixels_to_tile_units:new j.UniformMatrix2f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_units_to_pixels:new j.Uniform2f(de),u_dash_image:new j.Uniform1i(de),u_gradient_image:new j.Uniform1i(de),u_image_height:new j.Uniform1f(de),u_texsize:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_mix:new j.Uniform1f(de),u_alpha_discard_threshold:new j.Uniform1f(de),u_trim_offset:new j.Uniform2f(de)}),linePattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_texsize:new j.Uniform2f(de),u_pixels_to_tile_units:new j.UniformMatrix2f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_image:new j.Uniform1i(de),u_units_to_pixels:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de),u_alpha_discard_threshold:new j.Uniform1f(de)}),raster:de=>({u_matrix:new j.UniformMatrix4f(de),u_tl_parent:new j.Uniform2f(de),u_scale_parent:new j.Uniform1f(de),u_fade_t:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de),u_image0:new j.Uniform1i(de),u_image1:new j.Uniform1i(de),u_brightness_low:new j.Uniform1f(de),u_brightness_high:new j.Uniform1f(de),u_saturation_factor:new j.Uniform1f(de),u_contrast_factor:new j.Uniform1f(de),u_spin_weights:new j.Uniform3f(de),u_perspective_transform:new j.Uniform2f(de)}),symbolIcon:de=>({u_is_size_zoom_constant:new j.Uniform1i(de),u_is_size_feature_constant:new j.Uniform1i(de),u_size_t:new j.Uniform1f(de),u_size:new j.Uniform1f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_rotate_symbol:new j.Uniform1i(de),u_aspect_ratio:new j.Uniform1f(de),u_fade_change:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_label_plane_matrix:new j.UniformMatrix4f(de),u_coord_matrix:new j.UniformMatrix4f(de),u_is_text:new j.Uniform1i(de),u_pitch_with_map:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_camera_forward:new j.Uniform3f(de),u_tile_matrix:new j.UniformMatrix4f(de),u_up_vector:new j.Uniform3f(de),u_ecef_origin:new j.Uniform3f(de),u_texture:new j.Uniform1i(de)}),symbolSDF:de=>({u_is_size_zoom_constant:new j.Uniform1i(de),u_is_size_feature_constant:new j.Uniform1i(de),u_size_t:new j.Uniform1f(de),u_size:new j.Uniform1f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_rotate_symbol:new j.Uniform1i(de),u_aspect_ratio:new j.Uniform1f(de),u_fade_change:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_label_plane_matrix:new j.UniformMatrix4f(de),u_coord_matrix:new j.UniformMatrix4f(de),u_is_text:new j.Uniform1i(de),u_pitch_with_map:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_texture:new j.Uniform1i(de),u_gamma_scale:new j.Uniform1f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_camera_forward:new j.Uniform3f(de),u_tile_matrix:new j.UniformMatrix4f(de),u_up_vector:new j.Uniform3f(de),u_ecef_origin:new j.Uniform3f(de),u_is_halo:new j.Uniform1i(de)}),symbolTextAndIcon:de=>({u_is_size_zoom_constant:new j.Uniform1i(de),u_is_size_feature_constant:new j.Uniform1i(de),u_size_t:new j.Uniform1f(de),u_size:new j.Uniform1f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_rotate_symbol:new j.Uniform1i(de),u_aspect_ratio:new j.Uniform1f(de),u_fade_change:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_label_plane_matrix:new j.UniformMatrix4f(de),u_coord_matrix:new j.UniformMatrix4f(de),u_is_text:new j.Uniform1i(de),u_pitch_with_map:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_texsize_icon:new j.Uniform2f(de),u_texture:new j.Uniform1i(de),u_texture_icon:new j.Uniform1i(de),u_gamma_scale:new j.Uniform1f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_is_halo:new j.Uniform1i(de)}),background:de=>({u_matrix:new j.UniformMatrix4f(de),u_opacity:new j.Uniform1f(de),u_color:new j.UniformColor(de)}),backgroundPattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_opacity:new j.Uniform1f(de),u_image:new j.Uniform1i(de),u_pattern_tl_a:new j.Uniform2f(de),u_pattern_br_a:new j.Uniform2f(de),u_pattern_tl_b:new j.Uniform2f(de),u_pattern_br_b:new j.Uniform2f(de),u_texsize:new j.Uniform2f(de),u_mix:new j.Uniform1f(de),u_pattern_size_a:new j.Uniform2f(de),u_pattern_size_b:new j.Uniform2f(de),u_scale_a:new j.Uniform1f(de),u_scale_b:new j.Uniform1f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_tile_units_to_pixels:new j.Uniform1f(de)}),terrainRaster:Ls,terrainDepth:Ls,skybox:de=>({u_matrix:new j.UniformMatrix4f(de),u_sun_direction:new j.Uniform3f(de),u_cubemap:new j.Uniform1i(de),u_opacity:new j.Uniform1f(de),u_temporal_offset:new j.Uniform1f(de)}),skyboxGradient:de=>({u_matrix:new j.UniformMatrix4f(de),u_color_ramp:new j.Uniform1i(de),u_center_direction:new j.Uniform3f(de),u_radius:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de),u_temporal_offset:new j.Uniform1f(de)}),skyboxCapture:de=>({u_matrix_3f:new j.UniformMatrix3f(de),u_sun_direction:new j.Uniform3f(de),u_sun_intensity:new j.Uniform1f(de),u_color_tint_r:new j.Uniform4f(de),u_color_tint_m:new j.Uniform4f(de),u_luminance:new j.Uniform1f(de)}),globeRaster:de=>({u_proj_matrix:new j.UniformMatrix4f(de),u_globe_matrix:new j.UniformMatrix4f(de),u_normalize_matrix:new j.UniformMatrix4f(de),u_merc_matrix:new j.UniformMatrix4f(de),u_zoom_transition:new j.Uniform1f(de),u_merc_center:new j.Uniform2f(de),u_image0:new j.Uniform1i(de),u_grid_matrix:new j.UniformMatrix3f(de),u_frustum_tl:new j.Uniform3f(de),u_frustum_tr:new j.Uniform3f(de),u_frustum_br:new j.Uniform3f(de),u_frustum_bl:new j.Uniform3f(de),u_globe_pos:new j.Uniform3f(de),u_globe_radius:new j.Uniform1f(de),u_viewport:new j.Uniform2f(de)}),globeAtmosphere:de=>({u_frustum_tl:new j.Uniform3f(de),u_frustum_tr:new j.Uniform3f(de),u_frustum_br:new j.Uniform3f(de),u_frustum_bl:new j.Uniform3f(de),u_horizon:new j.Uniform1f(de),u_transition:new j.Uniform1f(de),u_fadeout_range:new j.Uniform1f(de),u_color:new j.Uniform4f(de),u_high_color:new j.Uniform4f(de),u_space_color:new j.Uniform4f(de),u_star_intensity:new j.Uniform1f(de),u_star_density:new j.Uniform1f(de),u_star_size:new j.Uniform1f(de),u_temporal_offset:new j.Uniform1f(de),u_horizon_angle:new j.Uniform1f(de),u_rotation_matrix:new j.UniformMatrix4f(de)})};let Pl;function hu(de,U,te,be,Pe,Re,Be){const Ne=de.context,qe=Ne.gl,Ye=de.transform,Je=de.useProgram("collisionBox"),ut=[];let gt=0,It=0;for(let Jt=0;Jt<be.length;Jt++){const Yt=be[Jt],Gt=U.getTile(Yt),Kt=Gt.getBucket(te);if(!Kt)continue;const Wt=ao(Yt,Kt,Ye);let sn=Wt;Pe[0]===0&&Pe[1]===0||(sn=de.translatePosMatrix(Wt,Gt,Pe,Re));const mn=Be?Kt.textCollisionBox:Kt.iconCollisionBox,Wn=Kt.collisionCircleArray;if(Wn.length>0){const pn=j.create(),zn=sn;j.mul(pn,Kt.placementInvProjMatrix,Ye.glCoordMatrix),j.mul(pn,pn,Kt.placementViewportMatrix),ut.push({circleArray:Wn,circleOffset:It,transform:zn,invTransform:pn,projection:Kt.getProjection()}),gt+=Wn.length/4,It=gt}mn&&(de.terrain&&de.terrain.setupElevationDraw(Gt,Je),Je.draw(Ne,qe.LINES,j.DepthMode.disabled,j.StencilMode.disabled,de.colorModeForRenderPass(),j.CullFaceMode.disabled,mc(sn,Ye,Gt,Kt.getProjection()),te.id,mn.layoutVertexBuffer,mn.indexBuffer,mn.segments,null,Ye.zoom,null,[mn.collisionVertexBuffer,mn.collisionVertexBufferExt]))}if(!Be||!ut.length)return;const kt=de.useProgram("collisionCircle"),At=new j.StructArrayLayout2f1f2i16;At.resize(4*gt),At._trim();let St=0;for(const Jt of ut)for(let Yt=0;Yt<Jt.circleArray.length/4;Yt++){const Gt=4*Yt,Kt=Jt.circleArray[Gt+0],Wt=Jt.circleArray[Gt+1],sn=Jt.circleArray[Gt+2],mn=Jt.circleArray[Gt+3];At.emplace(St++,Kt,Wt,sn,mn,0),At.emplace(St++,Kt,Wt,sn,mn,1),At.emplace(St++,Kt,Wt,sn,mn,2),At.emplace(St++,Kt,Wt,sn,mn,3)}(!Pl||Pl.length<2*gt)&&(Pl=function(Jt){const Yt=2*Jt,Gt=new j.StructArrayLayout3ui6;Gt.resize(Yt),Gt._trim();for(let Kt=0;Kt<Yt;Kt++){const Wt=6*Kt;Gt.uint16[Wt+0]=4*Kt+0,Gt.uint16[Wt+1]=4*Kt+1,Gt.uint16[Wt+2]=4*Kt+2,Gt.uint16[Wt+3]=4*Kt+2,Gt.uint16[Wt+4]=4*Kt+3,Gt.uint16[Wt+5]=4*Kt+0}return Gt}(gt));const Et=Ne.createIndexBuffer(Pl,!0),$t=Ne.createVertexBuffer(At,j.collisionCircleLayout.members,!0);for(const Jt of ut){const Yt={u_matrix:Jt.transform,u_inv_matrix:Jt.invTransform,u_camera_to_center_distance:(Ot=Ye).getCameraToCenterDistance(Jt.projection),u_viewport_size:[Ot.width,Ot.height]};kt.draw(Ne,qe.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,de.colorModeForRenderPass(),j.CullFaceMode.disabled,Yt,te.id,$t,Et,j.SegmentVector.simpleSegment(0,2*Jt.circleOffset,Jt.circleArray.length,Jt.circleArray.length/2),null,Ye.zoom)}var Ot;$t.destroy(),Et.destroy()}const du=j.create();function vc(de,U,te,be,Pe,Re){const{horizontalAlign:Be,verticalAlign:Ne}=j.getAnchorAlignment(de),qe=-(Be-.5)*U,Ye=-(Ne-.5)*te,Je=j.evaluateVariableOffset(de,be);return new j.pointGeometry((qe/Pe+Je[0])*Re,(Ye/Pe+Je[1])*Re)}function xc(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je){const ut=de.text.placedSymbolArray,gt=de.text.dynamicLayoutVertexArray,It=de.icon.dynamicLayoutVertexArray,kt={},At=so(Ne,de.getProjection(),Re),St=Re.elevation,Et=de.getProjection().upVectorScale(Ne.canonical,Re.center.lat,Re.worldSize);gt.clear();for(let $t=0;$t<ut.length;$t++){const Ot=ut.get($t),Jt=de.allowVerticalPlacement&&!Ot.placedOrientation,Yt=Ot.hidden||!Ot.crossTileID||Jt?null:be[Ot.crossTileID];if(Yt){const Gt=new j.pointGeometry(Ot.tileAnchorX,Ot.tileAnchorY),Kt=de.getProjection().upVector(Ne.canonical,Gt.x,Gt.y),Wt=St?St.getAtTileOffset(Ne,Gt.x,Gt.y):0,sn=Pr([Ot.projectedAnchorX+Wt*Kt[0]*Et.metersToTile,Ot.projectedAnchorY+Wt*Kt[1]*Et.metersToTile,Ot.projectedAnchorZ+Wt*Kt[2]*Et.metersToTile],te?At:Be),mn=As(Re.getCameraToCenterDistance(de.getProjection()),sn.signedDistanceFromCamera);let Wn=Pe.evaluateSizeForFeature(de.textSizeData,Ye,Ot)*mn/j.ONE_EM;te&&(Wn*=de.tilePixelRatio/qe);const{width:pn,height:zn,anchor:Nn,textOffset:er,textScale:kn}=Yt,Zn=vc(Nn,pn,zn,er,kn,Wn);let Ln;if(te){const tr=Gt.add(Zn),{x:pr,y:yr,z:Ar}=de.getProjection().projectTilePoint(tr.x,tr.y,Ne.canonical);Ln=Pr([pr+Wt*Kt[0]*Et.metersToTile,yr+Wt*Kt[1]*Et.metersToTile,Ar+Wt*Kt[2]*Et.metersToTile],Be).point}else{const tr=U?Zn.rotate(-Re.angle):Zn;Ln=[sn.point[0]+tr.x,sn.point[1]+tr.y,0]}const or=de.allowVerticalPlacement&&Ot.placedOrientation===j.WritingMode.vertical?Math.PI/2:0;for(let tr=0;tr<Ot.numGlyphs;tr++)j.addDynamicAttributes(gt,Ln[0],Ln[1],Ln[2],or);Je&&Ot.associatedIconIndex>=0&&(kt[Ot.associatedIconIndex]={shiftedAnchor:Ln,angle:or})}else pa(Ot.numGlyphs,gt)}if(Je){It.clear();const $t=de.icon.placedSymbolArray;for(let Ot=0;Ot<$t.length;Ot++){const Jt=$t.get(Ot);if(Jt.hidden)pa(Jt.numGlyphs,It);else{const Yt=kt[Ot];if(Yt)for(let Gt=0;Gt<Jt.numGlyphs;Gt++)j.addDynamicAttributes(It,Yt.shiftedAnchor[0],Yt.shiftedAnchor[1],Yt.shiftedAnchor[2],Yt.angle);else pa(Jt.numGlyphs,It)}}de.icon.dynamicLayoutVertexBuffer.updateData(It)}de.text.dynamicLayoutVertexBuffer.updateData(gt)}function pu(de,U,te){return te.iconsInText&&U?"symbolTextAndIcon":de?"symbolSDF":"symbolIcon"}function js(de,U,te,be,Pe,Re,Be,Ne,qe,Ye,Je,ut){const gt=de.context,It=gt.gl,kt=de.transform,At=Ne==="map",St=qe==="map",Et=At&&te.layout.get("symbol-placement")!=="point",$t=At&&!St&&!Et,Ot=te.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Jt=!1;const Yt=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),Gt=[j.mercatorXfromLng(kt.center.lng),j.mercatorYfromLat(kt.center.lat)],Kt=te.layout.get("text-variable-anchor"),Wt=kt.projection.name==="globe",sn=[],mn=[0,-1,0];let Wn=mn;!Wt&&!kt.mercatorFromTransition||At||(Wn=function(pn){const zn=pn._camera.getWorldToCamera(pn.worldSize,1),Nn=j.multiply([],zn,pn.globeMatrix);j.invert(Nn,Nn);const er=[0,0,0],kn=[0,1,0,0];return j.transformMat4$1(kn,kn,Nn),er[0]=kn[0],er[1]=kn[1],er[2]=kn[2],j.normalize(er,er),er}(kt));for(const pn of be){const zn=U.getTile(pn),Nn=zn.getBucket(te);if(!Nn||Nn.projection.name==="mercator"&&Wt)continue;const er=Pe?Nn.text:Nn.icon;if(!er||Nn.fullyClipped||!er.segments.get().length)continue;const kn=er.programConfigurations.get(te.id),Zn=Pe||Nn.sdfIcons,Ln=Pe?Nn.textSizeData:Nn.iconSizeData,or=St||kt.pitch!==0,tr=j.evaluateSizeForZoom(Ln,kt.zoom);let pr,yr,Ar,Vr,_r=[0,0],Mr=null;if(Pe){if(yr=zn.glyphAtlasTexture,Ar=It.LINEAR,pr=zn.glyphAtlasTexture.size,Nn.iconsInText){_r=zn.imageAtlasTexture.size,Mr=zn.imageAtlasTexture;const no=Ln.kind==="composite"||Ln.kind==="camera";Vr=or||de.options.rotating||de.options.zooming||no?It.LINEAR:It.NEAREST}}else{const no=te.layout.get("icon-size").constantOr(0)!==1||Nn.iconsNeedLinear;yr=zn.imageAtlasTexture,Ar=Zn||de.options.rotating||de.options.zooming||no||or?It.LINEAR:It.NEAREST,pr=zn.imageAtlasTexture.size}const Zr=Nn.projection.name==="globe",ci=Zr?Wn:mn,wi=Zr?j.globeToMercatorTransition(kt.zoom):0,oi=so(pn,Nn.getProjection(),kt),Wi=kt.calculatePixelsToTileUnitsMatrix(zn),To=Or(oi,zn.tileID.canonical,St,At,kt,Nn.getProjection(),Wi),oa=de.terrain&&St&&Et?j.invert(j.create(),To):du,_i=Oo(oi,zn.tileID.canonical,St,At,kt,Nn.getProjection(),Wi),vi=Kt&&Nn.hasTextData(),zr=te.layout.get("icon-text-fit")!=="none"&&vi&&Nn.hasIconData();if(Et){const no=kt.elevation,Ba=no?no.getAtTileOffsetFunc(pn,kt.center.lat,kt.worldSize,Nn.getProjection()):ol=>[0,0,0],qo=Nr(oi,zn.tileID.canonical,St,At,kt,Nn.getProjection(),Wi);ks(Nn,oi,de,Pe,qo,_i,St,Ye,Ba,pn)}const zi=Et||Pe&&Kt||zr,$i=de.translatePosMatrix(oi,zn,Re,Be),ui=zi?du:To,Yi=de.translatePosMatrix(_i,zn,Re,Be,!0),$a=Nn.getProjection().createInversionMatrix(kt,pn.canonical),to=[];de.terrain&&St&&to.push("PITCH_WITH_MAP_TERRAIN"),Zr&&to.push("PROJECTION_GLOBE_VIEW"),zi&&to.push("PROJECTED_POS_ON_VIEWPORT");const go=Zn&&te.paint.get(Pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Da;Da=Zn?Nn.iconsInText?Pa(Ln.kind,tr,$t,St,de,$i,ui,Yi,pr,_r,pn,wi,Gt,$a,ci,Nn.getProjection()):yc(Ln.kind,tr,$t,St,de,$i,ui,Yi,Pe,pr,!0,pn,wi,Gt,$a,ci,Nn.getProjection()):es(Ln.kind,tr,$t,St,de,$i,ui,Yi,Pe,pr,pn,wi,Gt,$a,ci,Nn.getProjection());const La={program:de.useProgram(pu(Zn,Pe,Nn),kn,to),buffers:er,uniformValues:Da,atlasTexture:yr,atlasTextureIcon:Mr,atlasInterpolation:Ar,atlasInterpolationIcon:Vr,isSDF:Zn,hasHalo:go,tile:zn,labelPlaneMatrixInv:oa};if(Ot&&Nn.canOverlap){Jt=!0;const no=er.segments.get();for(const Ba of no)sn.push({segments:new j.SegmentVector([Ba]),sortKey:Ba.sortKey,state:La})}else sn.push({segments:er.segments,sortKey:0,state:La})}Jt&&sn.sort((pn,zn)=>pn.sortKey-zn.sortKey);for(const pn of sn){const zn=pn.state;if(de.terrain&&de.terrain.setupElevationDraw(zn.tile,zn.program,{useDepthForOcclusion:!Wt,labelPlaneMatrixInv:zn.labelPlaneMatrixInv}),gt.activeTexture.set(It.TEXTURE0),zn.atlasTexture.bind(zn.atlasInterpolation,It.CLAMP_TO_EDGE),zn.atlasTextureIcon&&(gt.activeTexture.set(It.TEXTURE1),zn.atlasTextureIcon&&zn.atlasTextureIcon.bind(zn.atlasInterpolationIcon,It.CLAMP_TO_EDGE)),zn.isSDF){const Nn=zn.uniformValues;zn.hasHalo&&(Nn.u_is_halo=1,bc(zn.buffers,pn.segments,te,de,zn.program,Yt,Je,ut,Nn)),Nn.u_is_halo=0}bc(zn.buffers,pn.segments,te,de,zn.program,Yt,Je,ut,zn.uniformValues)}}function bc(de,U,te,be,Pe,Re,Be,Ne,qe){const Ye=be.context,Je=[de.dynamicLayoutVertexBuffer,de.opacityVertexBuffer,de.globeExtVertexBuffer];Pe.draw(Ye,Ye.gl.TRIANGLES,Re,Be,Ne,j.CullFaceMode.disabled,qe,te.id,de.layoutVertexBuffer,de.indexBuffer,U,te.paint,be.transform.zoom,de.programConfigurations.get(te.id),Je)}function Ol(de,U,te,be,Pe,Re,Be){const Ne=de.context.gl,qe=te.paint.get("fill-pattern"),Ye=qe&&qe.constantOr(1),Je=te.getCrossfadeParameters();let ut,gt,It,kt,At;Be?(gt=Ye&&!te.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ut=Ne.LINES):(gt=Ye?"fillPattern":"fill",ut=Ne.TRIANGLES);for(const St of be){const Et=U.getTile(St);if(Ye&&!Et.patternsLoaded())continue;const $t=Et.getBucket(te);if(!$t)continue;de.prepareDrawTile();const Ot=$t.programConfigurations.get(te.id),Jt=de.useProgram(gt,Ot);Ye&&(de.context.activeTexture.set(Ne.TEXTURE0),Et.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Ot.updatePaintBuffers(Je));const Yt=qe.constantOr(null);if(Yt&&Et.imageAtlas){const Kt=Et.imageAtlas,Wt=Kt.patternPositions[Yt.to.toString()],sn=Kt.patternPositions[Yt.from.toString()];Wt&&sn&&Ot.setConstantPatternPositions(Wt,sn)}const Gt=de.translatePosMatrix(St.projMatrix,Et,te.paint.get("fill-translate"),te.paint.get("fill-translate-anchor"));if(Be){kt=$t.indexBuffer2,At=$t.segments2;const Kt=de.terrain&&de.terrain.renderingToTexture?de.terrain.drapeBufferSize:[Ne.drawingBufferWidth,Ne.drawingBufferHeight];It=gt==="fillOutlinePattern"&&Ye?Ia(Gt,de,Je,Et,Kt):Go(Gt,Kt)}else kt=$t.indexBuffer,At=$t.segments,It=Ye?Sl(Gt,de,Je,Et):Fs(Gt);de.prepareDrawProgram(de.context,Jt,St.toUnwrapped()),Jt.draw(de.context,ut,Pe,de.stencilModeForClipping(St),Re,j.CullFaceMode.disabled,It,te.id,$t.layoutVertexBuffer,kt,At,te.paint,de.transform.zoom,Ot)}}function ea(de,U,te,be,Pe,Re,Be){const Ne=de.context,qe=Ne.gl,Ye=de.transform,Je=te.paint.get("fill-extrusion-pattern"),ut=Je.constantOr(1),gt=te.getCrossfadeParameters(),It=te.paint.get("fill-extrusion-opacity"),kt=[te.paint.get("fill-extrusion-ambient-occlusion-intensity"),te.paint.get("fill-extrusion-ambient-occlusion-radius")],At=te.layout.get("fill-extrusion-edge-radius"),St=Ye.projection.name==="globe"?j.fillExtrusionHeightLift():0,Et=Ye.projection.name==="globe",$t=Et?j.globeToMercatorTransition(Ye.zoom):0,Ot=[j.mercatorXfromLng(Ye.center.lng),j.mercatorYfromLat(Ye.center.lat)],Jt=[];Et&&(Jt.push("PROJECTION_GLOBE_VIEW"),de.style.terrainSetForDrapingOnly()&&Jt.push("TERRAIN")),kt[0]>0&&Jt.push("FAUX_AO");for(const Yt of be){const Gt=U.getTile(Yt),Kt=Gt.getBucket(te);if(!Kt||Kt.projection.name!==Ye.projection.name)continue;const Wt=Kt.programConfigurations.get(te.id),sn=de.useProgram(ut?"fillExtrusionPattern":"fillExtrusion",Wt,Jt);if(de.terrain){const kn=de.terrain;if(de.style.terrainSetForDrapingOnly())kn.setupElevationDraw(Gt,sn,{useMeterToDem:!0});else{if(!Kt.enableTerrain)continue;if(kn.setupElevationDraw(Gt,sn,{useMeterToDem:!0}),Us(Ne,U,Yt,Kt,te,kn),!Kt.centroidVertexBuffer){const Zn=sn.attributes.a_centroid_pos;Zn!==void 0&&qe.vertexAttrib2f(Zn,0,0)}}}ut&&(de.context.activeTexture.set(qe.TEXTURE0),Gt.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Wt.updatePaintBuffers(gt));const mn=Je.constantOr(null);if(mn&&Gt.imageAtlas){const kn=Gt.imageAtlas,Zn=kn.patternPositions[mn.to.toString()],Ln=kn.patternPositions[mn.from.toString()];Zn&&Ln&&Wt.setConstantPatternPositions(Zn,Ln)}const Wn=de.translatePosMatrix(Yt.projMatrix,Gt,te.paint.get("fill-extrusion-translate"),te.paint.get("fill-extrusion-translate-anchor")),pn=Ye.projection.createInversionMatrix(Ye,Yt.canonical),zn=te.paint.get("fill-extrusion-vertical-gradient"),Nn=ut?iu(Wn,de,zn,It,kt,At,Yt,gt,Gt,St,$t,Ot,pn):Qa(Wn,de,zn,It,kt,At,Yt,St,$t,Ot,pn);de.prepareDrawProgram(Ne,sn,Yt.toUnwrapped());const er=[];de.terrain&&er.push(Kt.centroidVertexBuffer),Et&&er.push(Kt.layoutVertexExtBuffer),sn.draw(Ne,Ne.gl.TRIANGLES,Pe,Re,Be,j.CullFaceMode.backCCW,Nn,te.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,te.paint,de.transform.zoom,Wt,er)}}function Us(de,U,te,be,Pe,Re){const Be=[Et=>{let $t=Et.canonical.x-1,Ot=Et.wrap;return $t<0&&($t=(1<<Et.canonical.z)-1,Ot--),new j.OverscaledTileID(Et.overscaledZ,Ot,Et.canonical.z,$t,Et.canonical.y)},Et=>{let $t=Et.canonical.x+1,Ot=Et.wrap;return $t===1<<Et.canonical.z&&($t=0,Ot++),new j.OverscaledTileID(Et.overscaledZ,Ot,Et.canonical.z,$t,Et.canonical.y)},Et=>new j.OverscaledTileID(Et.overscaledZ,Et.wrap,Et.canonical.z,Et.canonical.x,(Et.canonical.y===0?1<<Et.canonical.z:Et.canonical.y)-1),Et=>new j.OverscaledTileID(Et.overscaledZ,Et.wrap,Et.canonical.z,Et.canonical.x,Et.canonical.y===(1<<Et.canonical.z)-1?0:Et.canonical.y+1)],Ne=Et=>{const $t=U.getSource().minzoom,Ot=Yt=>{const Gt=U.getTileByID(Yt);if(Gt&&Gt.hasData())return Gt.getBucket(Pe)},Jt=[0,-1,1];for(const Yt of Jt){if(Et.overscaledZ+Yt<$t)continue;const Gt=Ot(Et.calculateScaledKey(Et.overscaledZ+Yt));if(Gt)return Gt}},qe=[0,0,0],Ye=(Et,$t)=>(qe[0]=Math.min(Et.min.y,$t.min.y),qe[1]=Math.max(Et.max.y,$t.max.y),qe[2]=j.EXTENT-$t.min.x>Et.max.x?$t.min.x-j.EXTENT:Et.max.x,qe),Je=(Et,$t)=>(qe[0]=Math.min(Et.min.x,$t.min.x),qe[1]=Math.max(Et.max.x,$t.max.x),qe[2]=j.EXTENT-$t.min.y>Et.max.y?$t.min.y-j.EXTENT:Et.max.y,qe),ut=[(Et,$t)=>Ye(Et,$t),(Et,$t)=>Ye($t,Et),(Et,$t)=>Je(Et,$t),(Et,$t)=>Je($t,Et)],gt=new j.pointGeometry(0,0);let It,kt,At;const St=(Et,$t,Ot,Jt,Yt)=>{const Gt=[[Jt?Ot:Et,Jt?Et:Ot,0],[Jt?Ot:$t,Jt?$t:Ot,0]],Kt=Yt<0?j.EXTENT+Yt:Yt,Wt=[Jt?Kt:(Et+$t)/2,Jt?(Et+$t)/2:Kt,0];return Ot===0&&Yt<0||Ot!==0&&Yt>0?Re.getForTilePoints(At,[Wt],!0,kt):Gt.push(Wt),Re.getForTilePoints(te,Gt,!0,It),Math.max(Gt[0][2],Gt[1][2],Wt[2])/Re.exaggeration()};for(let Et=0;Et<4;Et++){const $t=(Et<2?1:5)-Et,Ot=be.borders[Et];if(Ot.length===0)continue;const Jt=At=Be[Et](te),Yt=Ne(Jt);if(!(Yt&&Yt instanceof j.FillExtrusionBucket&&Yt.enableTerrain)||be.borderDoneWithNeighborZ[Et]===Yt.canonical.z&&Yt.borderDoneWithNeighborZ[$t]===be.canonical.z||(kt=Re.findDEMTileFor(Jt),!kt||!kt.dem))continue;if(!It){const sn=Re.findDEMTileFor(te);if(!sn||!sn.dem)return;It=sn}const Gt=Yt.borders[$t];let Kt=0;const Wt=Yt.borderDoneWithNeighborZ[$t]!==be.canonical.z;if(be.canonical.z===Yt.canonical.z){for(let sn=0;sn<Ot.length;sn++){const mn=be.featuresOnBorder[Ot[sn]],Wn=mn.borders[Et];let pn;for(;Kt<Gt.length&&(pn=Yt.featuresOnBorder[Gt[Kt]],!(pn.borders[$t][1]>Wn[0]+3));)Wt&&Yt.encodeCentroid(void 0,pn,!1),Kt++;if(pn&&Kt<Gt.length){const zn=Kt;let Nn=0;for(;!(pn.borders[$t][0]>Wn[1]-3)&&(Nn++,++Kt!==Gt.length);)pn=Yt.featuresOnBorder[Gt[Kt]];if(pn=Yt.featuresOnBorder[Gt[zn]],mn.intersectsCount()>1||pn.intersectsCount()>1||Nn!==1){Nn!==1&&(Kt=zn),be.encodeCentroid(void 0,mn,!1),Wt&&Yt.encodeCentroid(void 0,pn,!1);continue}const er=ut[Et](mn,pn),kn=Et%2?j.EXTENT-1:0;gt.x=St(er[0],Math.min(j.EXTENT-1,er[1]),kn,Et<2,er[2]),gt.y=0,be.encodeCentroid(gt,mn,!1),Wt&&Yt.encodeCentroid(gt,pn,!1)}else be.encodeCentroid(void 0,mn,!1)}be.borderDoneWithNeighborZ[Et]=Yt.canonical.z,be.needsCentroidUpdate=!0,Wt&&(Yt.borderDoneWithNeighborZ[$t]=be.canonical.z,Yt.needsCentroidUpdate=!0)}else{for(const sn of Ot)be.encodeCentroid(void 0,be.featuresOnBorder[sn],!1);if(Wt){for(const sn of Gt)Yt.encodeCentroid(void 0,Yt.featuresOnBorder[sn],!1);Yt.borderDoneWithNeighborZ[$t]=be.canonical.z,Yt.needsCentroidUpdate=!0}be.borderDoneWithNeighborZ[Et]=Yt.canonical.z,be.needsCentroidUpdate=!0}}(be.needsCentroidUpdate||!be.centroidVertexBuffer&&be.centroidVertexArray.length!==0)&&be.uploadCentroid(de)}const fu=new j.Color(1,0,0,1),Oa=new j.Color(0,1,0,1),ts=new j.Color(0,0,1,1),_u=new j.Color(1,0,1,1),wc=new j.Color(0,1,1,1);function Qr(de,U,te){const be=de.context,Pe=de.transform,Re=be.gl,Be=Pe.projection.name==="globe",Ne=Be?["PROJECTION_GLOBE_VIEW"]:null;let qe=te.projMatrix;if(Be&&j.globeToMercatorTransition(Pe.zoom)>0){const mn=j.transitionTileAABBinECEF(te.canonical,Pe),Wn=j.globeDenormalizeECEF(mn);qe=j.multiply(new Float32Array(16),Pe.globeMatrix,Wn),j.multiply(qe,Pe.projMatrix,qe)}const Ye=de.useProgram("debug",null,Ne),Je=U.getTileByID(te.key);de.terrain&&de.terrain.setupElevationDraw(Je,Ye);const ut=j.DepthMode.disabled,gt=j.StencilMode.disabled,It=de.colorModeForRenderPass(),kt="$debug";be.activeTexture.set(Re.TEXTURE0),de.emptyTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Be?Je._makeGlobeTileDebugBuffers(de.context,Pe):Je._makeDebugTileBoundsBuffers(de.context,Pe.projection);const At=Je._tileDebugBuffer||de.debugBuffer,St=Je._tileDebugIndexBuffer||de.debugIndexBuffer,Et=Je._tileDebugSegments||de.debugSegments;Ye.draw(be,Re.LINE_STRIP,ut,gt,It,j.CullFaceMode.disabled,su(qe,j.Color.red),kt,At,St,Et,null,null,null,[Je._globeTileDebugBorderBuffer]);const $t=Je.latestRawTileData,Ot=Math.floor(($t&&$t.byteLength||0)/1024),Jt=U.getTile(te).tileSize,Yt=512/Math.min(Jt,512)*(te.overscaledZ/Pe.zoom)*.5;let Gt=te.canonical.toString();te.overscaledZ!==te.canonical.z&&(Gt+=` => ${te.overscaledZ}`),Gt+=` ${Ot}kb`,function(mn,Wn){mn.initDebugOverlayCanvas();const pn=mn.debugOverlayCanvas,zn=mn.context.gl,Nn=mn.debugOverlayCanvas.getContext("2d");Nn.clearRect(0,0,pn.width,pn.height),Nn.shadowColor="white",Nn.shadowBlur=2,Nn.lineWidth=1.5,Nn.strokeStyle="white",Nn.textBaseline="top",Nn.font="bold 36px Open Sans, sans-serif",Nn.fillText(Wn,5,5),Nn.strokeText(Wn,5,5),mn.debugOverlayTexture.update(pn),mn.debugOverlayTexture.bind(zn.LINEAR,zn.CLAMP_TO_EDGE)}(de,Gt);const Kt=Je._tileDebugTextBuffer||de.debugBuffer,Wt=Je._tileDebugTextIndexBuffer||de.quadTriangleIndexBuffer,sn=Je._tileDebugTextSegments||de.debugSegments;Ye.draw(be,Re.TRIANGLES,ut,gt,j.ColorMode.alphaBlended,j.CullFaceMode.disabled,su(qe,j.Color.transparent,Yt),kt,Kt,Wt,sn,null,null,null,[Je._globeTileDebugTextBuffer])}function Vs(de,U,te,be){Gs(de,0,U+te/2,de.transform.width,te,be)}function mu(de,U,te,be){Gs(de,U-te/2,0,te,de.transform.height,be)}function Gs(de,U,te,be,Pe,Re){const Be=de.context,Ne=Be.gl;Ne.enable(Ne.SCISSOR_TEST),Ne.scissor(U*j.exported.devicePixelRatio,te*j.exported.devicePixelRatio,be*j.exported.devicePixelRatio,Pe*j.exported.devicePixelRatio),Be.clear({color:Re}),Ne.disable(Ne.SCISSOR_TEST)}const qs=j.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ch}=qs;function ga(de,U,te,be){de.emplaceBack(U,te,be)}class Ec{constructor(U){this.vertexArray=new j.StructArrayLayout3f12,this.indices=new j.StructArrayLayout3ui6,ga(this.vertexArray,-1,-1,1),ga(this.vertexArray,1,-1,1),ga(this.vertexArray,-1,1,1),ga(this.vertexArray,1,1,1),ga(this.vertexArray,-1,-1,-1),ga(this.vertexArray,1,-1,-1),ga(this.vertexArray,-1,1,-1),ga(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=U.createVertexBuffer(this.vertexArray,ch),this.indexBuffer=U.createIndexBuffer(this.indices),this.segment=j.SegmentVector.simpleSegment(0,0,36,12)}}function ns(de,U,te,be,Pe,Re){const Be=de.gl,Ne=U.paint.get("sky-atmosphere-color"),qe=U.paint.get("sky-atmosphere-halo-color"),Ye=U.paint.get("sky-atmosphere-sun-intensity"),Je=((ut,gt,It,kt,At)=>({u_matrix_3f:ut,u_sun_direction:gt,u_sun_intensity:It,u_color_tint_r:[kt.r,kt.g,kt.b,kt.a],u_color_tint_m:[At.r,At.g,At.b,At.a],u_luminance:5e-5}))(j.fromMat4(j.create$1(),be),Pe,Ye,Ne,qe);Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_CUBE_MAP_POSITIVE_X+Re,U.skyboxTexture,0),te.draw(de,Be.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.frontCW,Je,"skyboxCapture",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}const Tc=j.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Rl{constructor(U){const te=new j.StructArrayLayout5f20;te.emplaceBack(-1,1,1,0,0),te.emplaceBack(1,1,1,1,0),te.emplaceBack(1,-1,1,1,1),te.emplaceBack(-1,-1,1,0,1);const be=new j.StructArrayLayout3ui6;be.emplaceBack(0,1,2),be.emplaceBack(2,3,0),this.vertexBuffer=U.createVertexBuffer(te,Tc.members),this.indexBuffer=U.createIndexBuffer(be),this.segments=j.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const rs={symbol:function(de,U,te,be,Pe){if(de.renderPass!=="translucent")return;const Re=j.StencilMode.disabled,Be=de.colorModeForRenderPass();te.layout.get("text-variable-anchor")&&function(Ne,qe,Ye,Je,ut,gt,It){const kt=qe.transform,At=ut==="map",St=gt==="map";for(const Et of Ne){const $t=Je.getTile(Et),Ot=$t.getBucket(Ye);if(!Ot||!Ot.text||!Ot.text.segments.get().length)continue;const Jt=j.evaluateSizeForZoom(Ot.textSizeData,kt.zoom),Yt=so(Et,Ot.getProjection(),kt),Gt=kt.calculatePixelsToTileUnitsMatrix($t),Kt=Or(Yt,$t.tileID.canonical,St,At,kt,Ot.getProjection(),Gt),Wt=Ye.layout.get("icon-text-fit")!=="none"&&Ot.hasIconData();if(Jt){const sn=Math.pow(2,kt.zoom-$t.tileID.overscaledZ);xc(Ot,At,St,It,j.symbolSize,kt,Kt,Et,sn,Jt,Wt)}}}(be,de,te,U,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),Pe),te.paint.get("icon-opacity").constantOr(1)!==0&&js(de,U,te,be,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),Re,Be),te.paint.get("text-opacity").constantOr(1)!==0&&js(de,U,te,be,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),Re,Be),U.map.showCollisionBoxes&&(hu(de,U,te,be,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),!0),hu(de,U,te,be,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),!1))},circle:function(de,U,te,be){if(de.renderPass!=="translucent")return;const Pe=te.paint.get("circle-opacity"),Re=te.paint.get("circle-stroke-width"),Be=te.paint.get("circle-stroke-opacity"),Ne=te.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Pe.constantOr(1)===0&&(Re.constantOr(1)===0||Be.constantOr(1)===0))return;const qe=de.context,Ye=qe.gl,Je=de.transform,ut=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),gt=j.StencilMode.disabled,It=de.colorModeForRenderPass(),kt=Je.projection.name==="globe",At=[j.mercatorXfromLng(Je.center.lng),j.mercatorYfromLat(Je.center.lat)],St=[];for(let $t=0;$t<be.length;$t++){const Ot=be[$t],Jt=U.getTile(Ot),Yt=Jt.getBucket(te);if(!Yt||Yt.projection.name!==Je.projection.name)continue;const Gt=Yt.programConfigurations.get(te.id),Kt=au(te);kt&&Kt.push("PROJECTION_GLOBE_VIEW");const Wt=de.useProgram("circle",Gt,Kt),sn=Yt.layoutVertexBuffer,mn=Yt.globeExtVertexBuffer,Wn=Yt.indexBuffer,pn=Je.projection.createInversionMatrix(Je,Ot.canonical),zn={programConfiguration:Gt,program:Wt,layoutVertexBuffer:sn,globeExtVertexBuffer:mn,indexBuffer:Wn,uniformValues:_c(de,Ot,Jt,pn,At,te),tile:Jt};if(Ne){const Nn=Yt.segments.get();for(const er of Nn)St.push({segments:new j.SegmentVector([er]),sortKey:er.sortKey,state:zn})}else St.push({segments:Yt.segments,sortKey:0,state:zn})}Ne&&St.sort(($t,Ot)=>$t.sortKey-Ot.sortKey);const Et={useDepthForOcclusion:!kt};for(const $t of St){const{programConfiguration:Ot,program:Jt,layoutVertexBuffer:Yt,globeExtVertexBuffer:Gt,indexBuffer:Kt,uniformValues:Wt,tile:sn}=$t.state,mn=$t.segments;de.terrain&&de.terrain.setupElevationDraw(sn,Jt,Et),de.prepareDrawProgram(qe,Jt,sn.tileID.toUnwrapped()),Jt.draw(qe,Ye.TRIANGLES,ut,gt,It,j.CullFaceMode.disabled,Wt,te.id,Yt,Kt,mn,te.paint,Je.zoom,Ot,[Gt])}},heatmap:function(de,U,te,be){if(te.paint.get("heatmap-opacity")!==0)if(de.renderPass==="offscreen"){const Pe=de.context,Re=Pe.gl,Be=j.StencilMode.disabled,Ne=new j.ColorMode([Re.ONE,Re.ONE],j.Color.transparent,[!0,!0,!0,!0]);(function(It,kt,At,St){const Et=It.gl,$t=kt.width*St,Ot=kt.height*St;It.activeTexture.set(Et.TEXTURE1),It.viewport.set([0,0,$t,Ot]);let Jt=At.heatmapFbo;if(!Jt||Jt&&(Jt.width!==$t||Jt.height!==Ot)){Jt&&Jt.destroy();const Yt=Et.createTexture();Et.bindTexture(Et.TEXTURE_2D,Yt),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_S,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_T,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MIN_FILTER,Et.LINEAR),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MAG_FILTER,Et.LINEAR),Jt=At.heatmapFbo=It.createFramebuffer($t,Ot,!1),function(Gt,Kt,Wt,sn,mn,Wn){const pn=Gt.gl;pn.texImage2D(pn.TEXTURE_2D,0,pn.RGBA,mn,Wn,0,pn.RGBA,Gt.extRenderToTextureHalfFloat?Gt.extTextureHalfFloat.HALF_FLOAT_OES:pn.UNSIGNED_BYTE,null),sn.colorAttachment.set(Wt)}(It,0,Yt,Jt,$t,Ot)}else Et.bindTexture(Et.TEXTURE_2D,Jt.colorAttachment.get()),It.bindFramebuffer.set(Jt.framebuffer)})(Pe,de,te,de.transform.projection.name==="globe"?.5:.25),Pe.clear({color:j.Color.transparent});const qe=de.transform,Ye=qe.projection.name==="globe",Je=Ye?["PROJECTION_GLOBE_VIEW"]:null,ut=Ye?j.CullFaceMode.frontCCW:j.CullFaceMode.disabled,gt=[j.mercatorXfromLng(qe.center.lng),j.mercatorYfromLat(qe.center.lat)];for(let It=0;It<be.length;It++){const kt=be[It];if(U.hasRenderableParent(kt))continue;const At=U.getTile(kt),St=At.getBucket(te);if(!St||St.projection.name!==qe.projection.name)continue;const Et=St.programConfigurations.get(te.id),$t=de.useProgram("heatmap",Et,Je),{zoom:Ot}=de.transform;de.terrain&&de.terrain.setupElevationDraw(At,$t),de.prepareDrawProgram(Pe,$t,kt.toUnwrapped());const Jt=qe.projection.createInversionMatrix(qe,kt.canonical);$t.draw(Pe,Re.TRIANGLES,j.DepthMode.disabled,Be,Ne,ut,ih(de,kt,At,Jt,gt,Ot,te.paint.get("heatmap-intensity")),te.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,te.paint,de.transform.zoom,Et,Ye?[St.globeExtVertexBuffer]:null)}Pe.viewport.set([0,0,de.width,de.height])}else de.renderPass==="translucent"&&(de.context.setColorMode(de.colorModeForRenderPass()),function(Pe,Re){const Be=Pe.context,Ne=Be.gl,qe=Re.heatmapFbo;if(!qe)return;Be.activeTexture.set(Ne.TEXTURE0),Ne.bindTexture(Ne.TEXTURE_2D,qe.colorAttachment.get()),Be.activeTexture.set(Ne.TEXTURE1);let Ye=Re.colorRampTexture;Ye||(Ye=Re.colorRampTexture=new j.Texture(Be,Re.colorRamp,Ne.RGBA)),Ye.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Pe.useProgram("heatmapTexture").draw(Be,Ne.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,Pe.colorModeForRenderPass(),j.CullFaceMode.disabled,((Je,ut,gt,It)=>({u_image:0,u_color_ramp:1,u_opacity:ut.paint.get("heatmap-opacity")}))(0,Re),Re.id,Pe.viewportBuffer,Pe.quadTriangleIndexBuffer,Pe.viewportSegments,Re.paint,Pe.transform.zoom)}(de,te))},line:function(de,U,te,be){if(de.renderPass!=="translucent")return;const Pe=te.paint.get("line-opacity"),Re=te.paint.get("line-width");if(Pe.constantOr(1)===0||Re.constantOr(1)===0)return;const Be=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),Ne=de.colorModeForRenderPass(),qe=de.terrain&&de.terrain.renderingToTexture?1:j.exported.devicePixelRatio,Ye=te.paint.get("line-dasharray"),Je=Ye.constantOr(1),ut=te.layout.get("line-cap"),gt=te.paint.get("line-pattern"),It=gt.constantOr(1),kt=te.paint.get("line-gradient"),At=te.getCrossfadeParameters(),St=It?"linePattern":"line",Et=de.context,$t=Et.gl,Ot=(Yt=>{const Gt=[];Il(Yt)&&Gt.push("RENDER_LINE_DASH"),Yt.paint.get("line-gradient")&&Gt.push("RENDER_LINE_GRADIENT");const Kt=Yt.paint.get("line-trim-offset");Kt[0]===0&&Kt[1]===0||Gt.push("RENDER_LINE_TRIM_OFFSET");const Wt=Yt.paint.get("line-pattern").constantOr(1),sn=Yt.paint.get("line-opacity").constantOr(1)!==1;return!Wt&&sn&&Gt.push("RENDER_LINE_ALPHA_DISCARD"),Gt})(te);let Jt=Ot.includes("RENDER_LINE_ALPHA_DISCARD");de.terrain&&de.terrain.clipOrMaskOverlapStencilType()&&(Jt=!1);for(const Yt of be){const Gt=U.getTile(Yt);if(It&&!Gt.patternsLoaded())continue;const Kt=Gt.getBucket(te);if(!Kt)continue;de.prepareDrawTile();const Wt=Kt.programConfigurations.get(te.id),sn=de.useProgram(St,Wt,Ot),mn=gt.constantOr(null);if(mn&&Gt.imageAtlas){const Ln=Gt.imageAtlas,or=Ln.patternPositions[mn.to.toString()],tr=Ln.patternPositions[mn.from.toString()];or&&tr&&Wt.setConstantPatternPositions(or,tr)}const Wn=Ye.constantOr(null),pn=ut.constantOr(null);if(!It&&Wn&&pn&&Gt.lineAtlas){const Ln=Gt.lineAtlas,or=Ln.getDash(Wn.to,pn),tr=Ln.getDash(Wn.from,pn);or&&tr&&Wt.setConstantPatternPositions(or,tr)}let[zn,Nn]=te.paint.get("line-trim-offset");(pn==="round"||pn==="square")&&zn!==Nn&&(zn===0&&(zn-=1),Nn===1&&(Nn+=1));const er=de.terrain?Yt.projMatrix:null,kn=It?oh(de,Gt,te,At,er,qe):Cl(de,Gt,te,At,er,Kt.lineClipsArray.length,qe,[zn,Nn]);if(kt){const Ln=Kt.gradients[te.id];let or=Ln.texture;if(te.gradientVersion!==Ln.version){let tr=256;if(te.stepInterpolant){const pr=U.getSource().maxzoom,yr=Yt.canonical.z===pr?Math.ceil(1<<de.transform.maxZoom-Yt.canonical.z):1;tr=j.clamp(j.nextPowerOfTwo(Kt.maxLineLength/j.EXTENT*1024*yr),256,Et.maxTextureSize)}Ln.gradient=j.renderColorRamp({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:tr,image:Ln.gradient||void 0,clips:Kt.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new j.Texture(Et,Ln.gradient,$t.RGBA),Ln.version=te.gradientVersion,or=Ln.texture}Et.activeTexture.set($t.TEXTURE1),or.bind(te.stepInterpolant?$t.NEAREST:$t.LINEAR,$t.CLAMP_TO_EDGE)}Je&&(Et.activeTexture.set($t.TEXTURE0),Gt.lineAtlasTexture.bind($t.LINEAR,$t.REPEAT),Wt.updatePaintBuffers(At)),It&&(Et.activeTexture.set($t.TEXTURE0),Gt.imageAtlasTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE),Wt.updatePaintBuffers(At)),de.prepareDrawProgram(Et,sn,Yt.toUnwrapped());const Zn=Ln=>{sn.draw(Et,$t.TRIANGLES,Be,Ln,Ne,j.CullFaceMode.disabled,kn,te.id,Kt.layoutVertexBuffer,Kt.indexBuffer,Kt.segments,te.paint,de.transform.zoom,Wt,[Kt.layoutVertexBuffer2])};if(Jt){const Ln=de.stencilModeForClipping(Yt).ref;Ln===0&&de.terrain&&Et.clear({stencil:0});const or={func:$t.EQUAL,mask:255};kn.u_alpha_discard_threshold=.8,Zn(new j.StencilMode(or,Ln,255,$t.KEEP,$t.KEEP,$t.INVERT)),kn.u_alpha_discard_threshold=0,Zn(new j.StencilMode(or,Ln,255,$t.KEEP,$t.KEEP,$t.KEEP))}else Zn(de.stencilModeForClipping(Yt))}Jt&&(de.resetStencilClippingMasks(),de.terrain&&Et.clear({stencil:0}))},fill:function(de,U,te,be){const Pe=te.paint.get("fill-color"),Re=te.paint.get("fill-opacity");if(Re.constantOr(1)===0)return;const Be=de.colorModeForRenderPass(),Ne=te.paint.get("fill-pattern"),qe=de.opaquePassEnabledForLayer()&&!Ne.constantOr(1)&&Pe.constantOr(j.Color.transparent).a===1&&Re.constantOr(0)===1?"opaque":"translucent";if(de.renderPass===qe){const Ye=de.depthModeForSublayer(1,de.renderPass==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly);Ol(de,U,te,be,Ye,Be,!1)}if(de.renderPass==="translucent"&&te.paint.get("fill-antialias")){const Ye=de.depthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,j.DepthMode.ReadOnly);Ol(de,U,te,be,Ye,Be,!0)}},"fill-extrusion":function(de,U,te,be){const Pe=te.paint.get("fill-extrusion-opacity");if(Pe!==0&&de.renderPass==="translucent"){const Re=new j.DepthMode(de.context.gl.LEQUAL,j.DepthMode.ReadWrite,de.depthRangeFor3D);if(Pe!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))ea(de,U,te,be,Re,j.StencilMode.disabled,j.ColorMode.disabled),ea(de,U,te,be,Re,de.stencilModeFor3D(),de.colorModeForRenderPass()),de.resetStencilClippingMasks();else{const Be=de.colorModeForRenderPass();ea(de,U,te,be,Re,j.StencilMode.disabled,Be)}}},hillshade:function(de,U,te,be){if(de.renderPass!=="offscreen"&&de.renderPass!=="translucent")return;const Pe=de.context,Re=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),Be=de.colorModeForRenderPass(),Ne=de.terrain&&de.terrain.renderingToTexture,[qe,Ye]=de.renderPass!=="translucent"||Ne?[{},be]:de.stencilConfigForOverlap(be);for(const Je of Ye){const ut=U.getTile(Je);if(ut.needsHillshadePrepare&&de.renderPass==="offscreen")Ya(de,ut,te,Re,j.StencilMode.disabled,Be);else if(de.renderPass==="translucent"){const gt=Ne&&de.terrain?de.terrain.stencilModeForRTTOverlap(Je):qe[Je.overscaledZ];dc(de,Je,ut,te,Re,gt,Be)}}Pe.viewport.set([0,0,de.width,de.height]),de.resetStencilClippingMasks()},raster:function(de,U,te,be,Pe,Re){if(de.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!be.length)return;const Be=de.context,Ne=Be.gl,qe=U.getSource(),Ye=de.useProgram("raster"),Je=de.colorModeForRenderPass(),ut=de.terrain&&de.terrain.renderingToTexture,[gt,It]=qe instanceof dn||ut?[{},be]:de.stencilConfigForOverlap(be),kt=It[It.length-1].overscaledZ,At=!de.options.moving;for(const St of It){const Et=ut?j.DepthMode.disabled:de.depthModeForSublayer(St.overscaledZ-kt,te.paint.get("raster-opacity")===1?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly,Ne.LESS),$t=St.toUnwrapped(),Ot=U.getTile(St);if(ut&&(!Ot||!Ot.hasData()))continue;const Jt=ut?St.projMatrix:de.transform.calculateProjMatrix($t,At),Yt=de.terrain&&ut?de.terrain.stencilModeForRTTOverlap(St):gt[St.overscaledZ],Gt=Re?0:te.paint.get("raster-fade-duration");Ot.registerFadeDuration(Gt);const Kt=U.findLoadedParent(St,0),Wt=Tl(Ot,Kt,U,de.transform,Gt);let sn,mn;de.terrain&&de.terrain.prepareDrawTile();const Wn=te.paint.get("raster-resampling")==="nearest"?Ne.NEAREST:Ne.LINEAR;Be.activeTexture.set(Ne.TEXTURE0),Ot.texture.bind(Wn,Ne.CLAMP_TO_EDGE),Be.activeTexture.set(Ne.TEXTURE1),Kt?(Kt.texture.bind(Wn,Ne.CLAMP_TO_EDGE),sn=Math.pow(2,Kt.tileID.overscaledZ-Ot.tileID.overscaledZ),mn=[Ot.tileID.canonical.x*sn%1,Ot.tileID.canonical.y*sn%1]):Ot.texture.bind(Wn,Ne.CLAMP_TO_EDGE);const pn=ah(Jt,mn||[0,0],sn||1,Wt,te,qe instanceof dn?qe.perspectiveTransform:[0,0]);if(de.prepareDrawProgram(Be,Ye,$t),qe instanceof dn)qe.boundsBuffer&&qe.boundsSegments&&Ye.draw(Be,Ne.TRIANGLES,Et,j.StencilMode.disabled,Je,j.CullFaceMode.disabled,pn,te.id,qe.boundsBuffer,de.quadTriangleIndexBuffer,qe.boundsSegments);else{const{tileBoundsBuffer:zn,tileBoundsIndexBuffer:Nn,tileBoundsSegments:er}=de.getTileBoundsBuffers(Ot);Ye.draw(Be,Ne.TRIANGLES,Et,Yt,Je,j.CullFaceMode.disabled,pn,te.id,zn,Nn,er)}}de.resetStencilClippingMasks()},background:function(de,U,te,be){const Pe=te.paint.get("background-color"),Re=te.paint.get("background-opacity");if(Re===0)return;const Be=de.context,Ne=Be.gl,qe=de.transform,Ye=qe.tileSize,Je=te.paint.get("background-pattern");if(de.isPatternMissing(Je))return;const ut=!Je&&Pe.a===1&&Re===1&&de.opaquePassEnabledForLayer()?"opaque":"translucent";if(de.renderPass!==ut)return;const gt=j.StencilMode.disabled,It=de.depthModeForSublayer(0,ut==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly),kt=de.colorModeForRenderPass(),At=de.useProgram(Je?"backgroundPattern":"background");let St,Et=be;Et||(St=de.getBackgroundTiles(),Et=Object.values(St).map(Ot=>Ot.tileID)),Je&&(Be.activeTexture.set(Ne.TEXTURE0),de.imageManager.bind(de.context));const $t=te.getCrossfadeParameters();for(const Ot of Et){const Jt=Ot.toUnwrapped(),Yt=be?Ot.projMatrix:de.transform.calculateProjMatrix(Jt);de.prepareDrawTile();const Gt=U?U.getTile(Ot):St?St[Ot.key]:new j.Tile(Ot,Ye,qe.zoom,de),Kt=Je?uu(Yt,Re,de,Je,{tileID:Ot,tileSize:Ye},$t):sh(Yt,Re,Pe);de.prepareDrawProgram(Be,At,Jt);const{tileBoundsBuffer:Wt,tileBoundsIndexBuffer:sn,tileBoundsSegments:mn}=de.getTileBoundsBuffers(Gt);At.draw(Be,Ne.TRIANGLES,It,gt,kt,j.CullFaceMode.disabled,Kt,te.id,Wt,sn,mn)}},sky:function(de,U,te){const be=de.transform,Pe=be.projection.name==="mercator"||be.projection.name==="globe"?1:j.smoothstep(7,8,be.zoom),Re=te.paint.get("sky-opacity")*Pe;if(Re===0)return;const Be=de.context,Ne=te.paint.get("sky-type"),qe=new j.DepthMode(Be.gl.LEQUAL,j.DepthMode.ReadOnly,[0,1]),Ye=de.frameCounter/1e3%1;Ne==="atmosphere"?de.renderPass==="offscreen"?te.needsSkyboxCapture(de)&&(function(Je,ut,gt,It){const kt=Je.context,At=kt.gl;let St=ut.skyboxFbo;if(!St){St=ut.skyboxFbo=kt.createFramebuffer(32,32,!1),ut.skyboxGeometry=new Ec(kt),ut.skyboxTexture=kt.gl.createTexture(),At.bindTexture(At.TEXTURE_CUBE_MAP,ut.skyboxTexture),At.texParameteri(At.TEXTURE_CUBE_MAP,At.TEXTURE_WRAP_S,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_CUBE_MAP,At.TEXTURE_WRAP_T,At.CLAMP_TO_EDGE),At.texParameteri(At.TEXTURE_CUBE_MAP,At.TEXTURE_MIN_FILTER,At.LINEAR),At.texParameteri(At.TEXTURE_CUBE_MAP,At.TEXTURE_MAG_FILTER,At.LINEAR);for(let Jt=0;Jt<6;++Jt)At.texImage2D(At.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0,At.RGBA,32,32,0,At.RGBA,At.UNSIGNED_BYTE,null)}kt.bindFramebuffer.set(St.framebuffer),kt.viewport.set([0,0,32,32]);const Et=ut.getCenter(Je,!0),$t=Je.useProgram("skyboxCapture"),Ot=new Float64Array(16);j.identity(Ot),j.rotateY(Ot,Ot,.5*-Math.PI),ns(kt,ut,$t,Ot,Et,0),j.identity(Ot),j.rotateY(Ot,Ot,.5*Math.PI),ns(kt,ut,$t,Ot,Et,1),j.identity(Ot),j.rotateX(Ot,Ot,.5*-Math.PI),ns(kt,ut,$t,Ot,Et,2),j.identity(Ot),j.rotateX(Ot,Ot,.5*Math.PI),ns(kt,ut,$t,Ot,Et,3),j.identity(Ot),ns(kt,ut,$t,Ot,Et,4),j.identity(Ot),j.rotateY(Ot,Ot,Math.PI),ns(kt,ut,$t,Ot,Et,5),kt.viewport.set([0,0,Je.width,Je.height])}(de,te),te.markSkyboxValid(de)):de.renderPass==="sky"&&function(Je,ut,gt,It,kt){const At=Je.context,St=At.gl,Et=Je.transform,$t=Je.useProgram("skybox");At.activeTexture.set(St.TEXTURE0),St.bindTexture(St.TEXTURE_CUBE_MAP,ut.skyboxTexture);const Ot=((Jt,Yt,Gt,Kt,Wt)=>({u_matrix:Jt,u_sun_direction:Yt,u_cubemap:0,u_opacity:Kt,u_temporal_offset:Wt}))(Et.skyboxMatrix,ut.getCenter(Je,!1),0,It,kt);Je.prepareDrawProgram(At,$t),$t.draw(At,St.TRIANGLES,gt,j.StencilMode.disabled,Je.colorModeForRenderPass(),j.CullFaceMode.backCW,Ot,"skybox",ut.skyboxGeometry.vertexBuffer,ut.skyboxGeometry.indexBuffer,ut.skyboxGeometry.segment)}(de,te,qe,Re,Ye):Ne==="gradient"&&de.renderPass==="sky"&&function(Je,ut,gt,It,kt){const At=Je.context,St=At.gl,Et=Je.transform,$t=Je.useProgram("skyboxGradient");ut.skyboxGeometry||(ut.skyboxGeometry=new Ec(At)),At.activeTexture.set(St.TEXTURE0);let Ot=ut.colorRampTexture;Ot||(Ot=ut.colorRampTexture=new j.Texture(At,ut.colorRamp,St.RGBA)),Ot.bind(St.LINEAR,St.CLAMP_TO_EDGE);const Jt=((Yt,Gt,Kt,Wt,sn)=>({u_matrix:Yt,u_color_ramp:0,u_center_direction:Gt,u_radius:j.degToRad(Kt),u_opacity:Wt,u_temporal_offset:sn}))(Et.skyboxMatrix,ut.getCenter(Je,!1),ut.paint.get("sky-gradient-radius"),It,kt);Je.prepareDrawProgram(At,$t),$t.draw(At,St.TRIANGLES,gt,j.StencilMode.disabled,Je.colorModeForRenderPass(),j.CullFaceMode.backCW,Jt,"skyboxGradient",ut.skyboxGeometry.vertexBuffer,ut.skyboxGeometry.indexBuffer,ut.skyboxGeometry.segment)}(de,te,qe,Re,Ye)},debug:function(de,U,te){for(let be=0;be<te.length;be++)Qr(de,U,te[be])},custom:function(de,U,te){const be=de.context,Pe=te.implementation;if(de.transform.projection.unsupportedLayers&&de.transform.projection.unsupportedLayers.includes("custom"))j.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(de.renderPass==="offscreen"){const Re=Pe.prerender;Re&&(de.setCustomLayerDefaults(),be.setColorMode(de.colorModeForRenderPass()),Re.call(Pe,be.gl,de.transform.customLayerMatrix()),be.setDirty(),de.setBaseState())}else if(de.renderPass==="translucent"){de.setCustomLayerDefaults(),be.setColorMode(de.colorModeForRenderPass()),be.setStencilMode(j.StencilMode.disabled);const Re=Pe.renderingMode==="3d"?new j.DepthMode(de.context.gl.LEQUAL,j.DepthMode.ReadWrite,de.depthRangeFor3D):de.depthModeForSublayer(0,j.DepthMode.ReadOnly);be.setDepthMode(Re),Pe.render(be.gl,de.transform.customLayerMatrix()),be.setDirty(),de.setBaseState(),be.bindFramebuffer.set(null)}}};class Ac{constructor(U,te){this.context=new Lt(U),this.transform=te,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=j.SourceCache.maxUnderzooming+j.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gl,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(U,te){const be=!!U&&!!U.terrain&&this.transform.projection.supportsTerrain;if(!(be||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new nu(this,U));const Pe=this._terrain;this.transform.elevation=be?Pe:null,Pe.update(U,this.transform,te)}_updateFog(U){const te=U.fog;if(!te||this.transform.projection.name==="globe"||te.getOpacity(this.transform.pitch)<1||te.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[be,Pe]=te.getFovAdjustedRange(this.transform._fov);if(be>Pe)return void(this.transform.fogCullDistSq=null);const Re=be+.78*(Pe-be);this.transform.fogCullDistSq=Re*Re}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(U,te){if(this.width=U*j.exported.devicePixelRatio,this.height=te*j.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const be of this.style.order)this.style._layers[be].resize()}setup(){const U=this.context,te=new j.StructArrayLayout2i4;te.emplaceBack(0,0),te.emplaceBack(j.EXTENT,0),te.emplaceBack(0,j.EXTENT),te.emplaceBack(j.EXTENT,j.EXTENT),this.tileExtentBuffer=U.createVertexBuffer(te,j.posAttributes.members),this.tileExtentSegments=j.SegmentVector.simpleSegment(0,0,4,2);const be=new j.StructArrayLayout2i4;be.emplaceBack(0,0),be.emplaceBack(j.EXTENT,0),be.emplaceBack(0,j.EXTENT),be.emplaceBack(j.EXTENT,j.EXTENT),this.debugBuffer=U.createVertexBuffer(be,j.posAttributes.members),this.debugSegments=j.SegmentVector.simpleSegment(0,0,4,5);const Pe=new j.StructArrayLayout2i4;Pe.emplaceBack(-1,-1),Pe.emplaceBack(1,-1),Pe.emplaceBack(-1,1),Pe.emplaceBack(1,1),this.viewportBuffer=U.createVertexBuffer(Pe,j.posAttributes.members),this.viewportSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Re=new j.StructArrayLayout4i8;Re.emplaceBack(0,0,0,0),Re.emplaceBack(j.EXTENT,0,j.EXTENT,0),Re.emplaceBack(0,j.EXTENT,0,j.EXTENT),Re.emplaceBack(j.EXTENT,j.EXTENT,j.EXTENT,j.EXTENT),this.mercatorBoundsBuffer=U.createVertexBuffer(Re,j.boundsAttributes.members),this.mercatorBoundsSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Be=new j.StructArrayLayout3ui6;Be.emplaceBack(0,1,2),Be.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=U.createIndexBuffer(Be);const Ne=new j.StructArrayLayout1ui2;for(const Ye of[0,1,3,2,0])Ne.emplaceBack(Ye);this.debugIndexBuffer=U.createIndexBuffer(Ne),this.emptyTexture=new j.Texture(U,new j.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),U.gl.RGBA),this.identityMat=j.create();const qe=this.context.gl;this.stencilClearMode=new j.StencilMode({func:qe.ALWAYS,mask:0},0,255,qe.ZERO,qe.ZERO,qe.ZERO),this.loadTimeStamps.push(j.window.performance.now()),this.atmosphereBuffer=new Rl(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(U){return U._makeTileBoundsBuffers(this.context,this.transform.projection),U._tileBoundsBuffer?{tileBoundsBuffer:U._tileBoundsBuffer,tileBoundsIndexBuffer:U._tileBoundsIndexBuffer,tileBoundsSegments:U._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const U=this.context,te=U.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(U,te.TRIANGLES,j.DepthMode.disabled,this.stencilClearMode,j.ColorMode.disabled,j.CullFaceMode.disabled,Qo(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(U,te,be){if(!te||this.currentStencilSource===te.id||!U.isTileClipped()||!be||be.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let Ne=!1;for(const qe of be)if(this._tileClippingMaskIDs[qe.key]===void 0){Ne=!0;break}if(!Ne)return}this.currentStencilSource=te.id;const Pe=this.context,Re=Pe.gl;this.nextStencilID+be.length>256&&this.clearStencil(),Pe.setColorMode(j.ColorMode.disabled),Pe.setDepthMode(j.DepthMode.disabled);const Be=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Ne of be){const qe=te.getTile(Ne),Ye=this._tileClippingMaskIDs[Ne.key]=this.nextStencilID++,{tileBoundsBuffer:Je,tileBoundsIndexBuffer:ut,tileBoundsSegments:gt}=this.getTileBoundsBuffers(qe);Be.draw(Pe,Re.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Re.ALWAYS,mask:0},Ye,255,Re.KEEP,Re.KEEP,Re.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,Qo(Ne.projMatrix),"$clipping",Je,ut,gt)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const U=this.nextStencilID++,te=this.context.gl;return new j.StencilMode({func:te.NOTEQUAL,mask:255},U,255,te.KEEP,te.KEEP,te.REPLACE)}stencilModeForClipping(U){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(U);const te=this.context.gl;return new j.StencilMode({func:te.EQUAL,mask:255},this._tileClippingMaskIDs[U.key],0,te.KEEP,te.KEEP,te.REPLACE)}stencilConfigForOverlap(U){const te=this.context.gl,be=U.sort((Be,Ne)=>Ne.overscaledZ-Be.overscaledZ),Pe=be[be.length-1].overscaledZ,Re=be[0].overscaledZ-Pe+1;if(Re>1){this.currentStencilSource=void 0,this.nextStencilID+Re>256&&this.clearStencil();const Be={};for(let Ne=0;Ne<Re;Ne++)Be[Ne+Pe]=new j.StencilMode({func:te.GEQUAL,mask:255},Ne+this.nextStencilID,255,te.KEEP,te.KEEP,te.REPLACE);return this.nextStencilID+=Re,[Be,be]}return[{[Pe]:j.StencilMode.disabled},be]}colorModeForRenderPass(){const U=this.context.gl;return this._showOverdrawInspector?new j.ColorMode([U.CONSTANT_COLOR,U.ONE],new j.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?j.ColorMode.unblended:j.ColorMode.alphaBlended}depthModeForSublayer(U,te,be){if(!this.opaquePassEnabledForLayer())return j.DepthMode.disabled;const Pe=1-((1+this.currentLayer)*this.numSublayers+U)*this.depthEpsilon;return new j.DepthMode(be||this.context.gl.LEQUAL,te,[Pe,Pe])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(U,te){this.style=U,this.options=te,this.lineAtlas=U.lineAtlas,this.imageManager=U.imageManager,this.glyphManager=U.glyphManager,this.symbolFadeChange=U.placement.symbolFadeChange(j.exported.now()),this.imageManager.beginFrame();const be=this.style.order,Pe=this.style._sourceCaches;for(const qe in Pe){const Ye=Pe[qe];Ye.used&&Ye.prepare(this.context)}const Re={},Be={},Ne={};for(const qe in Pe){const Ye=Pe[qe];Re[qe]=Ye.getVisibleCoordinates(),Be[qe]=Re[qe].slice().reverse(),Ne[qe]=Ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let qe=0;qe<be.length;qe++)if(this.style._layers[be[qe]].is3D()){this.opaquePassCutoff=qe;break}if(this.terrain&&(this.terrain.updateTileBinding(Ne),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new j.GlobeSharedBuffers(this.context)),j.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const qe of be){const Ye=this.style._layers[qe],Je=U._getLayerSourceCache(Ye);if(!Ye.hasOffscreenPass()||Ye.isHidden(this.transform.zoom))continue;const ut=Je?Be[Je.id]:void 0;(Ye.type==="custom"||Ye.isSky()||ut&&ut.length)&&this.renderLayer(this,Je,Ye,ut)}if(this.depthRangeFor3D=[0,1-(U.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:te.showOverdrawInspector?j.Color.black:j.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=te.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=be.length-1;this.currentLayer>=0;this.currentLayer--){const qe=this.style._layers[be[this.currentLayer]],Ye=U._getLayerSourceCache(qe);if(qe.isSky())continue;const Je=Ye?Be[Ye.id]:void 0;this._renderTileClippingMasks(qe,Ye,Je),this.renderLayer(this,Ye,qe,Je)}if(this.style.fog&&this.transform.projection.supportsFog&&function(qe,Ye){const Je=qe.context,ut=Je.gl,gt=qe.transform,It=new j.DepthMode(ut.LEQUAL,j.DepthMode.ReadOnly,[0,1]),kt=qe.useProgram("globeAtmosphere",null,gt.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),At=j.globeToMercatorTransition(gt.zoom),St=Ye.properties.get("color").toArray01(),Et=Ye.properties.get("high-color").toArray01(),$t=Ye.properties.get("space-color").toArray01PremultipliedAlpha(),Ot=j.identity$1([]);j.rotateY$1(Ot,Ot,-j.degToRad(gt._center.lng)),j.rotateX$1(Ot,Ot,j.degToRad(gt._center.lat)),j.rotateZ$1(Ot,Ot,gt.angle),j.rotateX$1(Ot,Ot,-gt._pitch);const Jt=j.fromQuat(new Float32Array(16),Ot),Yt=j.mapValue(Ye.properties.get("star-intensity"),0,1,0,.25),Gt=5e-4,Kt=j.mapValue(Ye.properties.get("horizon-blend"),0,1,Gt,.25),Wt=j.globeUseCustomAntiAliasing(qe,Je,gt)&&Kt===Gt?gt.worldSize/(2*Math.PI*1.025)-1:gt.globeRadius,sn=qe.frameCounter/1e3%1,mn=j.length(gt.globeCenterInViewSpace),Wn=Math.sqrt(Math.pow(mn,2)-Math.pow(Wt,2)),pn=Math.acos(Wn/mn),zn=((er,kn,Zn,Ln,or,tr,pr,yr,Ar,Vr,_r,Mr,Zr,ci)=>({u_frustum_tl:er,u_frustum_tr:kn,u_frustum_br:Zn,u_frustum_bl:Ln,u_horizon:or,u_transition:tr,u_fadeout_range:pr,u_color:yr,u_high_color:Ar,u_space_color:Vr,u_star_intensity:_r,u_star_size:5*j.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Mr,u_horizon_angle:Zr,u_rotation_matrix:ci}))(gt.frustumCorners.TL,gt.frustumCorners.TR,gt.frustumCorners.BR,gt.frustumCorners.BL,gt.frustumCorners.horizon,At,Kt,St,Et,$t,Yt,sn,pn,Jt);qe.prepareDrawProgram(Je,kt);const Nn=qe.atmosphereBuffer;Nn&&kt.draw(Je,ut.TRIANGLES,It,j.StencilMode.disabled,j.ColorMode.alphaBlended,j.CullFaceMode.backCW,zn,"skybox",Nn.vertexBuffer,Nn.indexBuffer,Nn.segments)}(this,this.style.fog),this.renderPass="sky",(j.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<be.length;this.currentLayer++){const qe=this.style._layers[be[this.currentLayer]],Ye=U._getLayerSourceCache(qe);qe.isSky()&&this.renderLayer(this,Ye,qe,Ye?Be[Ye.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<be.length;){const qe=this.style._layers[be[this.currentLayer]],Ye=U._getLayerSourceCache(qe);if(qe.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(qe)){if(qe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Je=Ye?(qe.type==="symbol"?Ne:Be)[Ye.id]:void 0;this._renderTileClippingMasks(qe,Ye,Ye?Re[Ye.id]:void 0),this.renderLayer(this,Ye,qe,Je),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let qe=null;j.values(this.style._layers).forEach(Ye=>{const Je=U._getLayerSourceCache(Ye);Je&&!Ye.isHidden(this.transform.zoom)&&(!qe||qe.getSource().maxzoom<Je.getSource().maxzoom)&&(qe=Je)}),qe&&this.options.showTileBoundaries&&rs.debug(this,qe,qe.getVisibleCoordinates())}this.options.showPadding&&function(qe){const Ye=qe.transform.padding;Vs(qe,qe.transform.height-(Ye.top||0),3,fu),Vs(qe,Ye.bottom||0,3,Oa),mu(qe,Ye.left||0,3,ts),mu(qe,qe.transform.width-(Ye.right||0),3,_u);const Je=qe.transform.centerPoint;(function(ut,gt,It,kt){Gs(ut,gt-1,It-10,2,20,kt),Gs(ut,gt-10,It-1,20,2,kt)})(qe,Je.x,qe.transform.height-Je.y,wc)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(j.window.performance.now()),this.saveCanvasCopy())}}renderLayer(U,te,be,Pe){be.isHidden(this.transform.zoom)||(be.type==="background"||be.type==="sky"||be.type==="custom"||Pe&&Pe.length)&&(this.id=be.id,this.gpuTimingStart(be),U.transform.projection.unsupportedLayers&&U.transform.projection.unsupportedLayers.includes(be.type)||rs[be.type](U,te,be,Pe,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(U){if(!this.options.gpuTiming)return;const te=this.context.extTimerQuery;let be=this.gpuTimers[U.id];be||(be=this.gpuTimers[U.id]={calls:0,cpuTime:0,query:te.createQueryEXT()}),be.calls++,te.beginQueryEXT(te.TIME_ELAPSED_EXT,be.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const U=this.context.extTimerQuery,te=U.createQueryEXT();this.deferredRenderGpuTimeQueries.push(te),U.beginQueryEXT(U.TIME_ELAPSED_EXT,te)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}collectGpuTimers(){const U=this.gpuTimers;return this.gpuTimers={},U}collectDeferredRenderGpuQueries(){const U=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],U}queryGpuTimers(U){const te={};for(const be in U){const Pe=U[be],Re=this.context.extTimerQuery,Be=Re.getQueryObjectEXT(Pe.query,Re.QUERY_RESULT_EXT)/1e6;Re.deleteQueryEXT(Pe.query),te[be]=Be}return te}queryGpuTimeDeferredRender(U){if(!this.options.gpuTimingDeferredRender)return 0;const te=this.context.extTimerQuery;let be=0;for(const Pe of U)be+=te.getQueryObjectEXT(Pe,te.QUERY_RESULT_EXT)/1e6,te.deleteQueryEXT(Pe);return be}translatePosMatrix(U,te,be,Pe,Re){if(!be[0]&&!be[1])return U;const Be=Re?Pe==="map"?this.transform.angle:0:Pe==="viewport"?-this.transform.angle:0;if(Be){const Ye=Math.sin(Be),Je=Math.cos(Be);be=[be[0]*Je-be[1]*Ye,be[0]*Ye+be[1]*Je]}const Ne=[Re?be[0]:In(te,be[0],this.transform.zoom),Re?be[1]:In(te,be[1],this.transform.zoom),0],qe=new Float32Array(16);return j.translate(qe,U,Ne),qe}saveTileTexture(U){const te=this._tileTextures[U.size[0]];te?te.push(U):this._tileTextures[U.size[0]]=[U]}getTileTexture(U){const te=this._tileTextures[U];return te&&te.length>0?te.pop():null}isPatternMissing(U){if(!U)return!1;if(!U.from||!U.to)return!0;const te=this.imageManager.getPattern(U.from.toString()),be=this.imageManager.getPattern(U.to.toString());return!te||!be}currentGlobalDefines(){const U=this.terrain&&this.terrain.renderingToTexture,te=this.style&&this.style.fog,be=[];return this.terrain&&!this.terrain.renderingToTexture&&be.push("TERRAIN"),te&&!U&&te.getOpacity(this.transform.pitch)!==0&&be.push("FOG"),U&&be.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&be.push("OVERDRAW_INSPECTOR"),be}useProgram(U,te,be){this.cache=this.cache||{};const Pe=be||[],Re=this.currentGlobalDefines().concat(Pe),Be=kl.cacheKey(bl[U],U,Re,te);return this.cache[Be]||(this.cache[Be]=new kl(this.context,U,bl[U],te,lh[U],Re)),this.cache[Be]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const U=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(U.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=j.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new j.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(U,te,be){if(this.terrain&&this.terrain.renderingToTexture)return;const Pe=this.style.fog;if(Pe){const Re=Pe.getOpacity(this.transform.pitch),Be=((Ne,qe,Ye,Je,ut,gt,It,kt,At,St,Et)=>{const $t=Ne.transform,Ot=qe.properties.get("color").toArray01();Ot[3]=Je;const Jt=Ne.frameCounter/1e3%1;return{u_fog_matrix:Ye?$t.calculateFogTileMatrix(Ye):Ne.identityMat,u_fog_range:qe.getFovAdjustedRange($t._fov),u_fog_color:Ot,u_fog_horizon_blend:qe.properties.get("horizon-blend"),u_fog_temporal_offset:Jt,u_frustum_tl:ut,u_frustum_tr:gt,u_frustum_br:It,u_frustum_bl:kt,u_globe_pos:At,u_globe_radius:St,u_viewport:Et,u_globe_transition:j.globeToMercatorTransition($t.zoom),u_is_globe:+($t.projection.name==="globe")}})(this,Pe,be,Re,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*j.exported.devicePixelRatio,this.transform.height*j.exported.devicePixelRatio]);te.setFogUniformValues(U,Be)}}setTileLoadedFlag(U){this.tileLoaded=U}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const U=this.context.gl,te=U.createTexture();return U.bindTexture(U.TEXTURE_2D,te),U.copyTexImage2D(U.TEXTURE_2D,0,U.RGBA,0,0,U.drawingBufferWidth,U.drawingBufferHeight,0),te}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const U=this.style&&this.style.fog;return!!U&&U.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const U=this._backgroundTiles,te=this._backgroundTiles={},be=this.transform.coveringTiles({tileSize:512});for(const Pe of be)te[Pe.key]=U[Pe.key]||new j.Tile(Pe,512,this.transform.tileZoom,this);return te}clearBackgroundTiles(){this._backgroundTiles={}}}class Hs{constructor(U=0,te=0,be=0,Pe=0){if(isNaN(U)||U<0||isNaN(te)||te<0||isNaN(be)||be<0||isNaN(Pe)||Pe<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=U,this.bottom=te,this.left=be,this.right=Pe}interpolate(U,te,be){return te.top!=null&&U.top!=null&&(this.top=j.number(U.top,te.top,be)),te.bottom!=null&&U.bottom!=null&&(this.bottom=j.number(U.bottom,te.bottom,be)),te.left!=null&&U.left!=null&&(this.left=j.number(U.left,te.left,be)),te.right!=null&&U.right!=null&&(this.right=j.number(U.right,te.right,be)),this}getCenter(U,te){const be=j.clamp((this.left+U-this.right)/2,0,U),Pe=j.clamp((this.top+te-this.bottom)/2,0,te);return new j.pointGeometry(be,Pe)}equals(U){return this.top===U.top&&this.bottom===U.bottom&&this.left===U.left&&this.right===U.right}clone(){return new Hs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function kc(de,U){const te=j.getColumn(de,3);j.fromQuat(de,U),j.setColumn(de,3,te)}function is(de,U){const te=j.identity$1([]);return j.rotateZ$1(te,te,-U),j.rotateX$1(te,te,-de),te}function os(de,U){const te=[de[0],de[1],0],be=[U[0],U[1],0];if(j.length(te)>=1e-15){const Be=j.normalize([],te);j.scale$2(be,Be,j.dot(be,Be)),U[0]=be[0],U[1]=be[1]}const Pe=j.cross([],U,de);if(j.len(Pe)<1e-15)return null;const Re=Math.atan2(-Pe[1],Pe[0]);return is(Math.atan2(Math.sqrt(de[0]*de[0]+de[1]*de[1]),-de[2]),Re)}class cr{constructor(U,te){this.position=U,this.orientation=te}get position(){return this._position}set position(U){if(U){const te=U instanceof j.MercatorCoordinate?U:new j.MercatorCoordinate(U[0],U[1],U[2]);this._renderWorldCopies&&(te.x=j.wrap(te.x,0,1)),this._position=te}else this._position=null}lookAtPoint(U,te){if(this.orientation=null,!this.position)return;const be=this._elevation?this._elevation.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(U)):0,Pe=this.position,Re=j.MercatorCoordinate.fromLngLat(U,be),Be=[Re.x-Pe.x,Re.y-Pe.y,Re.z-Pe.z];te||(te=[0,0,1]),te[2]=Math.abs(te[2]),this.orientation=os(Be,te)}setPitchBearing(U,te){this.orientation=is(j.degToRad(U),j.degToRad(-te))}}class co{constructor(U,te){this._transform=j.identity([]),this.orientation=te,this.position=U}get mercatorPosition(){const U=this.position;return new j.MercatorCoordinate(U[0],U[1],U[2])}get position(){const U=j.getColumn(this._transform,3);return[U[0],U[1],U[2]]}set position(U){var te;U&&j.setColumn(this._transform,3,[(te=U)[0],te[1],te[2],1])}get orientation(){return this._orientation}set orientation(U){this._orientation=U||j.identity$1([]),U&&kc(this._transform,this._orientation)}getPitchBearing(){const U=this.forward(),te=this.right();return{bearing:Math.atan2(-te[1],te[0]),pitch:Math.atan2(Math.sqrt(U[0]*U[0]+U[1]*U[1]),-U[2])}}setPitchBearing(U,te){this._orientation=is(U,te),kc(this._transform,this._orientation)}forward(){const U=j.getColumn(this._transform,2);return[-U[0],-U[1],-U[2]]}up(){const U=j.getColumn(this._transform,1);return[-U[0],-U[1],-U[2]]}right(){const U=j.getColumn(this._transform,0);return[U[0],U[1],U[2]]}getCameraToWorld(U,te){const be=new Float64Array(16);return j.invert(be,this.getWorldToCamera(U,te)),be}getWorldToCameraPosition(U,te,be){const Pe=this.position;j.scale$2(Pe,Pe,-U);const Re=new Float64Array(16);return j.fromScaling(Re,[be,be,be]),j.translate(Re,Re,Pe),Re[10]*=te,Re}getWorldToCamera(U,te){const be=new Float64Array(16),Pe=new Float64Array(4),Re=this.position;return j.conjugate(Pe,this._orientation),j.scale$2(Re,Re,-U),j.fromQuat(be,Pe),j.translate(be,be,Re),be[1]*=-1,be[5]*=-1,be[9]*=-1,be[13]*=-1,be[8]*=te,be[9]*=te,be[10]*=te,be[11]*=te,be}getCameraToClipPerspective(U,te,be,Pe){const Re=new Float64Array(16);return j.perspective(Re,U,te,be,Pe),Re}getDistanceToElevation(U){const te=U===0?0:j.mercatorZfromAltitude(U,this.position[1]),be=this.forward();return(te-this.position[2])/be[2]}clone(){return new co([...this.position],[...this.orientation])}}function Sc(de,U){const te=Ws(de.projection,de.zoom,de.width,de.height),be=function(Re,Be,Ne,qe,Ye){const Je=new j.LngLat(Ne.lng-180*bo,Ne.lat),ut=new j.LngLat(Ne.lng+180*bo,Ne.lat),gt=Re.project(Je.lng,Je.lat),It=Re.project(ut.lng,ut.lat),kt=-Math.atan2(It.y-gt.y,It.x-gt.x),At=j.MercatorCoordinate.fromLngLat(Ne);At.y=j.clamp(At.y,-.999975,.999975);const St=At.toLngLat(),Et=Re.project(St.lng,St.lat),$t=j.MercatorCoordinate.fromLngLat(St);$t.x+=bo;const Ot=$t.toLngLat(),Jt=Re.project(Ot.lng,Ot.lat),Yt=Zs(Jt.x-Et.x,Jt.y-Et.y,kt),Gt=j.MercatorCoordinate.fromLngLat(St);Gt.y+=bo;const Kt=Gt.toLngLat(),Wt=Re.project(Kt.lng,Kt.lat),sn=Zs(Wt.x-Et.x,Wt.y-Et.y,kt),mn=Math.abs(Yt.x)/Math.abs(sn.y),Wn=j.identity([]);j.rotateZ(Wn,Wn,-kt*(1-(Ye?0:qe)));const pn=j.identity([]);return j.scale(pn,pn,[1,1-(1-mn)*qe,1]),pn[4]=-sn.x/sn.y*qe,j.rotateZ(pn,pn,kt),j.multiply(pn,Wn,pn),pn}(de.projection,0,de.center,te,U),Pe=Cc(de);return j.scale(be,be,[Pe,Pe,1]),be}function Cc(de){const U=de.projection,te=Ws(de.projection,de.zoom,de.width,de.height),be=Mc(U,de.center),Pe=Mc(U,j.LngLat.convert(U.center));return Math.pow(2,be*te+(1-te)*Pe)}function Ws(de,U,te,be,Pe=1/0){const Re=de.range;if(!Re)return 0;const Be=Math.min(Pe,Math.max(te,be)),Ne=Math.log(Be/1024)/Math.LN2;return j.smoothstep(Re[0]+Ne,Re[1]+Ne,U)}const bo=1/4e4;function Mc(de,U){const te=j.clamp(U.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),be=new j.LngLat(U.lng-180*bo,te),Pe=new j.LngLat(U.lng+180*bo,te),Re=de.project(be.lng,te),Be=de.project(Pe.lng,te),Ne=j.MercatorCoordinate.fromLngLat(be),qe=j.MercatorCoordinate.fromLngLat(Pe),Ye=Be.x-Re.x,Je=Be.y-Re.y,ut=qe.x-Ne.x,gt=qe.y-Ne.y,It=Math.sqrt((ut*ut+gt*gt)/(Ye*Ye+Je*Je));return Math.log(It)/Math.LN2}function Zs(de,U,te){const be=Math.cos(te),Pe=Math.sin(te);return{x:de*be-U*Pe,y:de*Pe+U*be}}class Xs{constructor(U,te,be,Pe,Re,Be,Ne){this.tileSize=512,this._renderWorldCopies=Re===void 0||Re,this._minZoom=U||0,this._maxZoom=te||22,this._minPitch=be==null?0:be,this._maxPitch=Pe==null?60:Pe,this.setProjection(Be),this.setMaxBounds(Ne),this.width=0,this.height=0,this._center=new j.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Hs,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new co,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const U=new Xs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return U._elevation=this._elevation,U._centerAltitude=this._centerAltitude,U._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,U.tileSize=this.tileSize,U.width=this.width,U.height=this.height,U.cameraElevationReference=this.cameraElevationReference,U._center=this._center,U._setZoom(this.zoom),U._seaLevelZoom=this._seaLevelZoom,U.angle=this.angle,U._fov=this._fov,U._pitch=this._pitch,U._nearZ=this._nearZ,U._farZ=this._farZ,U._averageElevation=this._averageElevation,U._unmodified=this._unmodified,U._edgeInsets=this._edgeInsets.clone(),U._camera=this._camera.clone(),U._calcMatrices(),U.freezeTileCoverage=this.freezeTileCoverage,U.frustumCorners=this.frustumCorners,U}get elevation(){return this._elevation}set elevation(U){this._elevation!==U&&(this._elevation=U,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(U){const te=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||te)&&this._updateCameraOnTerrain(),(U||te)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return j.pick(this.projection,["name","center","parallels"])}setProjection(U){this.projectionOptions=U||{name:"mercator"};const te=this.projection?this.getProjection():void 0;this.projection=j.getProjection(this.projectionOptions);const be=!we(te,this.getProjection());return be&&this._calcMatrices(),this.mercatorFromTransition=!1,be}setMercatorFromTransition(){const U=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=j.getProjection({name:"mercator"});const te=U!==this.projection.name;return te&&this._calcMatrices(),te}get minZoom(){return this._minZoom}set minZoom(U){this._minZoom!==U&&(this._minZoom=U,this.zoom=Math.max(this.zoom,U))}get maxZoom(){return this._maxZoom}set maxZoom(U){this._maxZoom!==U&&(this._maxZoom=U,this.zoom=Math.min(this.zoom,U))}get minPitch(){return this._minPitch}set minPitch(U){this._minPitch!==U&&(this._minPitch=U,this.pitch=Math.max(this.pitch,U))}get maxPitch(){return this._maxPitch}set maxPitch(U){this._maxPitch!==U&&(this._maxPitch=U,this.pitch=Math.min(this.pitch,U))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(U){U===void 0?U=!0:U===null&&(U=!1),this._renderWorldCopies=U}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const U=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(U))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return j.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new j.pointGeometry(this.width,this.height)}get bearing(){return j.wrap(this.rotation,-180,180)}set bearing(U){this.rotation=U}get rotation(){return-this.angle/Math.PI*180}set rotation(U){const te=-U*Math.PI/180;var be;this.angle!==te&&(this._unmodified=!1,this.angle=te,this._calcMatrices(),this.rotationMatrix=(be=new j.ARRAY_TYPE(4),j.ARRAY_TYPE!=Float32Array&&(be[1]=0,be[2]=0),be[0]=1,be[3]=1,be),function(Pe,Re,Be){var Ne=Re[0],qe=Re[1],Ye=Re[2],Je=Re[3],ut=Math.sin(Be),gt=Math.cos(Be);Pe[0]=Ne*gt+Ye*ut,Pe[1]=qe*gt+Je*ut,Pe[2]=Ne*-ut+Ye*gt,Pe[3]=qe*-ut+Je*gt}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(U){const te=j.clamp(U,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==te&&(this._unmodified=!1,this._pitch=te,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(U){U=Math.max(.01,Math.min(60,U)),this._fov!==U&&(this._unmodified=!1,this._fov=U/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(U){this._averageElevation=U,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(U){const te=Math.min(Math.max(U,this.minZoom),this.maxZoom);this._zoom!==te&&(this._unmodified=!1,this._setZoom(te),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(U){this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const U=this._elevation;this._centerAltitude=U.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=U.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const U=this._elevation,te=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],be=this.horizonLineFromTop();let Pe=0,Re=0;for(let Be=0;Be<te.length;Be++){const Ne=new j.pointGeometry(te[Be][0]*this.width,be+te[Be][1]*(this.height-be)),qe=U.pointCoordinate(Ne);if(!qe)continue;const Ye=1/Math.hypot(qe[0]-this._camera.position[0],qe[1]-this._camera.position[1]);Pe+=qe[3]*Ye,Re+=Ye}return Re===0?NaN:Pe/Re}get center(){return this._center}set center(U){U.lat===this._center.lat&&U.lng===this._center.lng||(this._unmodified=!1,this._center=U,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const U=this._seaLevelZoom,te=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),be=this.pixelsPerMeter/this.worldSize*te,Pe=this._mercatorZfromZoom(U),Re=this._mercatorZfromZoom(this._maxZoom),Be=Math.max(Pe-be,Re);this._setZoom(this._zoomFromMercatorZ(Be))}get padding(){return this._edgeInsets.toJSON()}set padding(U){this._edgeInsets.equals(U)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,U,1),this._calcMatrices())}computeZoomRelativeTo(U){const te=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,U.toAltitude()));let be;be=U.z<this._camera.position[2]?[te.x,te.y,te.z]:[U.x,U.y,U.z];const Pe=j.length(j.sub([],this._camera.position,be));return j.clamp(this._zoomFromMercatorZ(Pe),this._minZoom,this._maxZoom)}setFreeCameraOptions(U){if(!this.height||!U.position&&!U.orientation)return;this._updateCameraState();let te=!1;if(U.orientation&&!j.exactEquals(U.orientation,this._camera.orientation)&&(te=this._setCameraOrientation(U.orientation)),U.position){const be=[U.position.x,U.position.y,U.position.z];j.exactEquals$1(be,this._camera.position)||(this._setCameraPosition(be),te=!0)}te&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const U=this._camera.position,te=new cr;return te.position=new j.MercatorCoordinate(U[0],U[1],U[2]),te.orientation=this._camera.orientation,te._elevation=this.elevation,te._renderWorldCopies=this.renderWorldCopies,te}_setCameraOrientation(U){if(!j.length$1(U))return!1;j.normalize$1(U,U);const te=j.transformQuat([],[0,0,-1],U),be=j.transformQuat([],[0,-1,0],U);if(be[2]<0)return!1;const Pe=os(te,be);return!!Pe&&(this._camera.orientation=Pe,!0)}_setCameraPosition(U){const te=this.zoomScale(this.minZoom)*this.tileSize,be=this.zoomScale(this.maxZoom)*this.tileSize,Pe=this.cameraToCenterDistance;U[2]=j.clamp(U[2],Pe/be,Pe/te),this._camera.position=U}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(U){return this._edgeInsets.equals(U)}interpolatePadding(U,te,be){this._unmodified=!1,this._edgeInsets.interpolate(U,te,be),this._constrain(),this._calcMatrices()}coveringZoomLevel(U){const te=(U.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/U.tileSize));return Math.max(0,te)}getVisibleUnwrappedCoordinates(U){const te=[new j.UnwrappedTileID(0,U)];if(this.renderWorldCopies){const be=this.pointCoordinate(new j.pointGeometry(0,0)),Pe=this.pointCoordinate(new j.pointGeometry(this.width,0)),Re=this.pointCoordinate(new j.pointGeometry(this.width,this.height)),Be=this.pointCoordinate(new j.pointGeometry(0,this.height)),Ne=Math.floor(Math.min(be.x,Pe.x,Re.x,Be.x)),qe=Math.floor(Math.max(be.x,Pe.x,Re.x,Be.x)),Ye=1;for(let Je=Ne-Ye;Je<=qe+Ye;Je++)Je!==0&&te.push(new j.UnwrappedTileID(Je,U))}return te}coveringTiles(U){let te=this.coveringZoomLevel(U);const be=te,Pe=this.elevation&&!U.isTerrainDEM,Re=this.projection.name==="mercator";if(U.minzoom!==void 0&&te<U.minzoom)return[];U.maxzoom!==void 0&&te>U.maxzoom&&(te=U.maxzoom);const Be=this.locationCoordinate(this.center),Ne=this.center.lat,qe=1<<te,Ye=[qe*Be.x,qe*Be.y,0],Je=this.projection.name==="globe",ut=!Je,gt=j.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,te,ut),It=Je?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),kt=qe*j.mercatorZfromAltitude(1,this.center.lat),At=this._camera.position[2]/j.mercatorZfromAltitude(1,this.center.lat),St=[qe*It.x,qe*It.y,At*(ut?1:kt)],Et=this.cameraToCenterDistance/U.tileSize*(U.roundZoom?1:.502),$t=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?te:0,Ot=U.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Jt=U.isTerrainDEM?-Ot:this._elevation?this._elevation.getMinElevationBelowMSL():0,Yt=this.projection.isReprojectedInTileSpace?Cc(this):1,Gt=kn=>{const Ln=new j.MercatorCoordinate(kn.x+25e-6,kn.y,kn.z),or=new j.MercatorCoordinate(kn.x,kn.y+25e-6,kn.z),tr=kn.toLngLat(),pr=Ln.toLngLat(),yr=or.toLngLat(),Ar=this.locationCoordinate(tr),Vr=this.locationCoordinate(pr),_r=this.locationCoordinate(yr),Mr=Math.hypot(Vr.x-Ar.x,Vr.y-Ar.y),Zr=Math.hypot(_r.x-Ar.x,_r.y-Ar.y);return Math.sqrt(Mr*Zr)*Yt/25e-6},Kt=kn=>{const Zn=Ot,Ln=Jt;return{aabb:j.tileAABB(this,qe,0,0,0,kn,Ln,Zn,this.projection),zoom:0,x:0,y:0,minZ:Ln,maxZ:Zn,wrap:kn,fullyVisible:!1}},Wt=[];let sn=[];const mn=te,Wn=U.reparseOverscaled?be:te,pn=kn=>kn*kn,zn=pn((At-this._centerAltitude)*kt),Nn=kn=>{if(!this._elevation||!kn.tileID||!Re)return;const Zn=this._elevation.getMinMaxForTile(kn.tileID),Ln=kn.aabb;Zn?(Ln.min[2]=Zn.min,Ln.max[2]=Zn.max,Ln.center[2]=(Ln.min[2]+Ln.max[2])/2):(kn.shouldSplit=er(kn),kn.shouldSplit||(Ln.min[2]=Ln.max[2]=Ln.center[2]=this._centerAltitude))},er=kn=>{if(kn.zoom<$t)return!0;if(kn.zoom===mn)return!1;if(kn.shouldSplit!=null)return kn.shouldSplit;const Zn=kn.aabb.distanceX(St),Ln=kn.aabb.distanceY(St);let or=zn,tr=1;if(Je){or=pn(kn.aabb.distanceZ(St));const yr=Math.pow(2,kn.zoom),Ar=j.latFromMercatorY((kn.y+1)/yr),Vr=j.latFromMercatorY(kn.y/yr),_r=Math.min(Math.max(Ne,Ar),Vr),Mr=j.circumferenceAtLatitude(_r)/j.circumferenceAtLatitude(Ne);if(tr=_r===Ne?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Mr/this._mercatorScaleRatio),this.zoom<=j.GLOBE_ZOOM_THRESHOLD_MIN&&kn.zoom===mn-1&&Mr>=.9)return!0}else if(Pe&&(or=pn(kn.aabb.distanceZ(St)*kt)),this.projection.isReprojectedInTileSpace&&be<=5){const yr=Math.pow(2,kn.zoom),Ar=Gt(new j.MercatorCoordinate((kn.x+.5)/yr,(kn.y+.5)/yr));tr=Ar>.85?1:Ar}const pr=Zn*Zn+Ln*Ln+or;return pr<pn((1<<mn-kn.zoom)*Et*tr*((yr,Ar)=>{if(Ar*pn(.707)<yr)return 1;const Vr=Math.sqrt(Ar/yr);return Vr/(1.4144271570014144+(Math.pow(1.1,Vr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(or,zn),pr))};if(this.renderWorldCopies)for(let kn=1;kn<=3;kn++)Wt.push(Kt(-kn)),Wt.push(Kt(kn));for(Wt.push(Kt(0));Wt.length>0;){const kn=Wt.pop(),Zn=kn.x,Ln=kn.y;let or=kn.fullyVisible;if(!or){const tr=kn.aabb.intersects(gt);if(tr===0)continue;or=tr===2}if(kn.zoom!==mn&&er(kn))for(let tr=0;tr<4;tr++){const pr=(Zn<<1)+tr%2,yr=(Ln<<1)+(tr>>1),Ar={aabb:Re?kn.aabb.quadrant(tr):j.tileAABB(this,qe,kn.zoom+1,pr,yr,kn.wrap,kn.minZ,kn.maxZ,this.projection),zoom:kn.zoom+1,x:pr,y:yr,wrap:kn.wrap,fullyVisible:or,tileID:void 0,shouldSplit:void 0,minZ:kn.minZ,maxZ:kn.maxZ};Pe&&!Je&&(Ar.tileID=new j.OverscaledTileID(kn.zoom+1===mn?Wn:kn.zoom+1,kn.wrap,kn.zoom+1,pr,yr),Nn(Ar)),Wt.push(Ar)}else{const tr=kn.zoom===mn?Wn:kn.zoom;if(U.minzoom&&U.minzoom>tr)continue;const pr=Ye[0]-(.5+Zn+(kn.wrap<<kn.zoom))*(1<<te-kn.zoom),yr=Ye[1]-.5-Ln,Ar=kn.tileID?kn.tileID:new j.OverscaledTileID(tr,kn.wrap,kn.zoom,Zn,Ln);sn.push({tileID:Ar,distanceSq:pr*pr+yr*yr})}}if(this.fogCullDistSq){const kn=this.fogCullDistSq,Zn=this.horizonLineFromTop();sn=sn.filter(Ln=>{const or=[0,0,0,1],tr=[j.EXTENT,j.EXTENT,0,1],pr=this.calculateFogTileMatrix(Ln.tileID.toUnwrapped());j.transformMat4$1(or,or,pr),j.transformMat4$1(tr,tr,pr);const yr=j.getAABBPointSquareDist(or,tr);if(yr===0)return!0;let Ar=!1;const Vr=this._elevation;if(Vr&&yr>kn&&Zn!==0){const _r=this.calculateProjMatrix(Ln.tileID.toUnwrapped());let Mr;U.isTerrainDEM||(Mr=Vr.getMinMaxForTile(Ln.tileID)),Mr||(Mr={min:Jt,max:Ot});const Zr=j.furthestTileCorner(this.rotation),ci=[Zr[0]*j.EXTENT,Zr[1]*j.EXTENT,Mr.max];j.transformMat4(ci,ci,_r),Ar=(1-ci[1])*this.height*.5<Zn}return yr<kn||Ar})}return sn.sort((kn,Zn)=>kn.distanceSq-Zn.distanceSq).map(kn=>kn.tileID)}resize(U,te){this.width=U,this.height=te,this.pixelsToGLUnits=[2/U,-2/te],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(U){return Math.pow(2,U)}scaleZoom(U){return Math.log(U)/Math.LN2}project(U){const te=j.clamp(U.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),be=this.projection.project(U.lng,te);return new j.pointGeometry(be.x*this.worldSize,be.y*this.worldSize)}unproject(U){return this.projection.unproject(U.x/this.worldSize,U.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(U,te){let be,Pe;const Re=this.centerPoint;if(this.projection.name==="globe"){const Ne=this.worldSize;be=(te.x-Re.x)/Ne,Pe=(te.y-Re.y)/Ne}else{const Ne=this.pointCoordinate(te),qe=this.pointCoordinate(Re);be=Ne.x-qe.x,Pe=Ne.y-qe.y}const Be=this.locationCoordinate(U);this.setLocation(new j.MercatorCoordinate(Be.x-be,Be.y-Pe))}setLocation(U){this.center=this.coordinateLocation(U),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(U){return this.projection.locationPoint(this,U)}locationPoint3D(U){return this.projection.locationPoint(this,U,!0)}pointLocation(U){return this.coordinateLocation(this.pointCoordinate(U))}pointLocation3D(U){return this.coordinateLocation(this.pointCoordinate3D(U))}locationCoordinate(U,te){const be=te?j.mercatorZfromAltitude(te,U.lat):void 0,Pe=this.projection.project(U.lng,U.lat);return new j.MercatorCoordinate(Pe.x,Pe.y,be)}coordinateLocation(U){return this.projection.unproject(U.x,U.y)}pointRayIntersection(U,te){const be=te!=null?te:this._centerAltitude,Pe=[U.x,U.y,0,1],Re=[U.x,U.y,1,1];j.transformMat4$1(Pe,Pe,this.pixelMatrixInverse),j.transformMat4$1(Re,Re,this.pixelMatrixInverse);const Be=Re[3];j.scale$1(Pe,Pe,1/Pe[3]),j.scale$1(Re,Re,1/Be);const Ne=Pe[2],qe=Re[2];return{p0:Pe,p1:Re,t:Ne===qe?0:(be-Ne)/(qe-Ne)}}screenPointToMercatorRay(U){const te=[U.x,U.y,0,1],be=[U.x,U.y,1,1];return j.transformMat4$1(te,te,this.pixelMatrixInverse),j.transformMat4$1(be,be,this.pixelMatrixInverse),j.scale$1(te,te,1/te[3]),j.scale$1(be,be,1/be[3]),te[2]=j.mercatorZfromAltitude(te[2],this._center.lat)*this.worldSize,be[2]=j.mercatorZfromAltitude(be[2],this._center.lat)*this.worldSize,j.scale$1(te,te,1/this.worldSize),j.scale$1(be,be,1/this.worldSize),new j.Ray([te[0],te[1],te[2]],j.normalize([],j.sub([],be,te)))}rayIntersectionCoordinate(U){const{p0:te,p1:be,t:Pe}=U,Re=j.mercatorZfromAltitude(te[2],this._center.lat),Be=j.mercatorZfromAltitude(be[2],this._center.lat);return new j.MercatorCoordinate(j.number(te[0],be[0],Pe)/this.worldSize,j.number(te[1],be[1],Pe)/this.worldSize,j.number(Re,Be,Pe))}pointCoordinate(U,te=this._centerAltitude){return this.projection.pointCoordinate(this,U.x,U.y,te)}pointCoordinate3D(U){if(!this.elevation)return this.pointCoordinate(U);let te=this.projection.pointCoordinate3D(this,U.x,U.y);if(te)return new j.MercatorCoordinate(te[0],te[1],te[2]);let be=0,Pe=this.horizonLineFromTop();if(U.y>Pe)return this.pointCoordinate(U);const Re=.02*Pe,Be=U.clone();for(let Ne=0;Ne<10&&Pe-be>Re;Ne++){Be.y=j.number(be,Pe,.66);const qe=this.projection.pointCoordinate3D(this,Be.x,Be.y);qe?(Pe=Be.y,te=qe):be=Be.y}return te?new j.MercatorCoordinate(te[0],te[1],te[2]):this.pointCoordinate(U)}isPointAboveHorizon(U){return this.projection.isPointAboveHorizon(this,U)}_coordinatePoint(U,te){const be=te&&this.elevation?this.elevation.getAtPointOrZero(U,this._centerAltitude):this._centerAltitude,Pe=[U.x*this.worldSize,U.y*this.worldSize,be+U.toAltitude(),1];return j.transformMat4$1(Pe,Pe,this.pixelMatrix),Pe[3]>0?new j.pointGeometry(Pe[0]/Pe[3],Pe[1]/Pe[3]):new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(U,te){const be=new j.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),Pe=new j.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),Re=new j.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),Be=new j.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let Ne=this.pointCoordinate(be,U),qe=this.pointCoordinate(Pe,U);const Ye=this.pointCoordinate(Re,te),Je=this.pointCoordinate(Be,te),ut=(gt,It)=>(It.y-gt.y)/(It.x-gt.x);return Ne.y>1&&qe.y>=0?Ne=new j.MercatorCoordinate((1-Je.y)/ut(Je,Ne)+Je.x,1):Ne.y<0&&qe.y<=1&&(Ne=new j.MercatorCoordinate(-Je.y/ut(Je,Ne)+Je.x,0)),qe.y>1&&Ne.y>=0?qe=new j.MercatorCoordinate((1-Ye.y)/ut(Ye,qe)+Ye.x,1):qe.y<0&&Ne.y<=1&&(qe=new j.MercatorCoordinate(-Ye.y/ut(Ye,qe)+Ye.x,0)),new j.LngLatBounds().extend(this.coordinateLocation(Ne)).extend(this.coordinateLocation(qe)).extend(this.coordinateLocation(Je)).extend(this.coordinateLocation(Ye))}_getBounds3D(){const U=this.elevation;if(!U.visibleDemTiles.length)return this._getBounds(0,0);const te=U.visibleDemTiles.reduce((be,Pe)=>{if(Pe.dem){const Re=Pe.dem.tree;be.min=Math.min(be.min,Re.minimums[0]),be.max=Math.max(be.max,Re.maximums[0])}return be},{min:Number.MAX_VALUE,max:0});return this._getBounds(te.min*U.exaggeration(),te.max*U.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(U=!0){const te=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,be=this.height/2-te*(1-this._horizonShift);return U?Math.max(0,be):be}getMaxBounds(){return this.maxBounds}setMaxBounds(U){this.maxBounds=U,this.minLat=-j.MAX_MERCATOR_LATITUDE,this.maxLat=j.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,U&&(this.minLat=U.getSouth(),this.maxLat=U.getNorth(),this.minLng=U.getWest(),this.maxLng=U.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=j.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=j.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=j.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=j.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(U,te){return this.projection.createTileMatrix(this,te,U)}calculateDistanceTileData(U){const te=U.key,be=this._distanceTileDataCache;if(be[te])return be[te];const Pe=U.canonical,Re=1/this.height,Be=this.cameraWorldSize/this.zoomScale(Pe.z),Ne=(Pe.x+Math.pow(2,Pe.z)*U.wrap)*Be,qe=Pe.y*Be,Ye=this.point,Je=this.angle,ut=Math.sin(-Je),gt=-Math.cos(-Je);return be[te]={bearing:[ut,gt],center:[(Ye.x-Ne)*Re,(Ye.y-qe)*Re],scale:Be/j.EXTENT*Re},be[te]}calculateFogTileMatrix(U){const te=U.key,be=this._fogTileMatrixCache;if(be[te])return be[te];const Pe=this.projection.createTileMatrix(this,this.cameraWorldSize,U);return j.multiply(Pe,this.worldToFogMatrix,Pe),be[te]=new Float32Array(Pe),be[te]}calculateProjMatrix(U,te=!1){const be=U.key,Pe=te?this._alignedProjMatrixCache:this._projMatrixCache;if(Pe[be])return Pe[be];const Re=this.calculatePosMatrix(U,this.worldSize);return j.multiply(Re,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:te?this.alignedProjMatrix:this.projMatrix,Re),Pe[be]=new Float32Array(Re),Pe[be]}calculatePixelsToTileUnitsMatrix(U){const te=U.tileID.key,be=this._pixelsToTileUnitsCache;if(be[te])return be[te];const Pe=function(Re,Be){const{scale:Ne}=Re.tileTransform,qe=Ne*j.EXTENT/(Re.tileSize*Math.pow(2,Be.zoom-Re.tileID.overscaledZ+Re.tileID.canonical.z));return Ye=new Float32Array(4),gt=(Je=Be.inverseAdjustmentMatrix)[1],It=Je[2],kt=Je[3],St=(ut=[qe,qe])[1],Ye[0]=Je[0]*(At=ut[0]),Ye[1]=gt*At,Ye[2]=It*St,Ye[3]=kt*St,Ye;var Ye,Je,ut,gt,It,kt,At,St}(U,this);return be[te]=Pe,be[te]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const U=this._elevation;this._updateCameraState();const te=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,be=this._computeCameraPosition(te),Pe=this._camera.forward(),Re=j.mercatorZfromAltitude(1,this._center.lat);be[2]/=Re,Pe[2]/=Re,j.normalize(Pe,Pe);const Be=U.raycast(be,Pe,U.exaggeration());if(Be){const Ne=j.scaleAndAdd([],be,Pe,Be),qe=new j.MercatorCoordinate(Ne[0],Ne[1],j.mercatorZfromAltitude(Ne[2],j.latFromMercatorY(Ne[1]))),Ye=(qe.z+j.length([qe.x-be[0],qe.y-be[1],qe.z-be[2]*Re]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Ye),this._centerAltitude=qe.toAltitude(),this._center=this.coordinateLocation(qe),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const U=this._elevation;this._updateCameraState();const te=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,be=this._computeCameraPosition(te),Pe=U.getAtPointOrZero(new j.MercatorCoordinate(...be)),Re=this._minimumHeightOverTerrain()*Math.cos(j.degToRad(this._maxPitch)),Be=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*Pe;if(Be<Re){const Ne=this.locationCoordinate(this._center,this._centerAltitude),qe=[Ne.x-be[0],Ne.y-be[1],Ne.z-be[2]],Ye=j.length(qe);qe[2]-=(Re-Be)/this._pixelsPerMercatorPixel;const Je=j.length(qe);if(Je===0)return;j.scale$2(qe,qe,Ye/Je*this._pixelsPerMercatorPixel),this._camera.position=[Ne.x-qe[0],Ne.y-qe[1],Ne.z*this._pixelsPerMercatorPixel-qe[2]],this._camera.orientation=os(qe,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const U=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||U){const gt=this.center;return gt.lat=j.clamp(gt.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!U)&&(gt.lng=j.clamp(gt.lng,this.minLng,this.maxLng)),this.center=gt,void(this._constraining=!1)}const te=this._unmodified,{x:be,y:Pe}=this.point;let Re=0,Be=be,Ne=Pe;const qe=this.width/2,Ye=this.height/2,Je=this.worldMinY*this.scale,ut=this.worldMaxY*this.scale;if(Pe-Ye<Je&&(Ne=Je+Ye),Pe+Ye>ut&&(Ne=ut-Ye),ut-Je<this.height&&(Re=Math.max(Re,this.height/(ut-Je)),Ne=(ut+Je)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const gt=this.worldMinX*this.scale,It=this.worldMaxX*this.scale,kt=this.worldSize/2-(gt+It)/2;Be=(be+kt+this.worldSize)%this.worldSize-kt,Be-qe<gt&&(Be=gt+qe),Be+qe>It&&(Be=It-qe),It-gt<this.width&&(Re=Math.max(Re,this.width/(It-gt)),Be=(It+gt)/2)}Be===be&&Ne===Pe||(this.center=this.unproject(new j.pointGeometry(Be,Ne))),Re&&(this.zoom+=this.scaleZoom(Re)),this._constrainCameraAltitude(),this._unmodified=te,this._constraining=!1}_minZoomForBounds(){let U=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(U=Math.max(U,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),U}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const U=this.centerOffset,te=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=j.mercatorZfromAltitude(1,this.center.lat)/j.mercatorZfromAltitude(1,j.GLOBE_SCALE_MATCH_LATITUDE));const be=Ws(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,be),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Pe=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?te:1),Re=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Re[8]=2*-U.x/this.width,Re[9]=2*U.y/this.height;let Be=j.mul([],Re,Pe);if(this.projection.isReprojectedInTileSpace){const Yt=this.locationCoordinate(this.center),Gt=j.identity([]);j.translate(Gt,Gt,[Yt.x*this.worldSize,Yt.y*this.worldSize,0]),j.multiply(Gt,Gt,Sc(this)),j.translate(Gt,Gt,[-Yt.x*this.worldSize,-Yt.y*this.worldSize,0]),j.multiply(Be,Be,Gt),this.inverseAdjustmentMatrix=function(Kt){const Wt=Sc(Kt,!0);return Mt([],[Wt[0],Wt[1],Wt[4],Wt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=j.scale([],Be,[this.worldSize,this.worldSize,this.worldSize/te,1]),this.projMatrix=Be,this.invProjMatrix=j.invert(new Float64Array(16),this.projMatrix);const Ne=j.invert([],Re);this.frustumCorners=j.FrustumCorners.fromInvProjectionMatrix(Ne,this.horizonLineFromTop(),this.height);const qe=new Float32Array(16);j.identity(qe),j.scale(qe,qe,[1,-1,1]),j.rotateX(qe,qe,this._pitch),j.rotateZ(qe,qe,this.angle);const Ye=j.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Je=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ye[8]=2*-U.x/this.width,Ye[9]=2*(U.y+Je)/this.height,this.skyboxMatrix=j.multiply(qe,Ye,qe);const ut=this.point,gt=ut.x,It=ut.y,kt=this.width%2/2,At=this.height%2/2,St=Math.cos(this.angle),Et=Math.sin(this.angle),$t=gt-Math.round(gt)+St*kt+Et*At,Ot=It-Math.round(It)+St*At+Et*kt,Jt=new Float64Array(Be);if(j.translate(Jt,Jt,[$t>.5?$t-1:$t,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Jt,Be=j.create(),j.scale(Be,Be,[this.width/2,-this.height/2,1]),j.translate(Be,Be,[1,-1,0]),this.labelPlaneMatrix=Be,Be=j.create(),j.scale(Be,Be,[1,-1,1]),j.translate(Be,Be,[-1,-1,0]),j.scale(Be,Be,[2/this.width,2/this.height,1]),this.glCoordMatrix=Be,this.pixelMatrix=j.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Be=j.invert(new Float64Array(16),this.pixelMatrix),!Be)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Be,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=j.calculateGlobeMatrix(this);const Yt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=j.transformMat4(Yt,Yt,Pe),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Be;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const U=this.cameraWorldSize,te=this.cameraPixelsPerMeter,be=this._camera.position,Pe=1/this.height/this._pixelsPerMercatorPixel,Re=[U,U,te];j.scale$2(Re,Re,Pe),j.scale$2(be,be,-1),j.multiply$2(be,be,Re);const Be=j.create();j.translate(Be,Be,be),j.scale(Be,Be,Re),this.mercatorFogMatrix=Be,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(U,te,Pe)}_computeCameraPosition(U){const te=(U=U||this.pixelsPerMeter)/this.pixelsPerMeter,be=this._camera.forward(),Pe=this.point,Re=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*te-U/this.worldSize*this._centerAltitude;return[Pe.x/this.worldSize-be[0]*Re,Pe.y/this.worldSize-be[1]*Re,U/this.worldSize*this._centerAltitude-be[2]*Re]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(U){const te=this._maxCameraBoundsDistance()*Math.cos(this._pitch),be=U[2];let Pe=1;be>0&&(Pe=Math.min((te-this._camera.position[2])/be,1)),this._camera.position=j.scaleAndAdd([],this._camera.position,U,Pe),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const U=this._camera.position,te=this._camera.forward(),{pitch:be,bearing:Pe}=this._camera.getPitchBearing(),Re=j.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Be=this._mercatorZfromZoom(this._maxZoom)*Math.cos(j.degToRad(this._maxPitch)),Ne=Math.max((U[2]-Re)/Math.cos(be),Be),qe=this._zoomFromMercatorZ(Ne);j.scaleAndAdd(U,U,te,Ne),this._pitch=j.clamp(be,j.degToRad(this.minPitch),j.degToRad(this.maxPitch)),this.angle=j.wrap(Pe,-Math.PI,Math.PI),this._setZoom(j.clamp(qe,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new j.MercatorCoordinate(U[0],U[1],U[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(U){return Math.pow(2,U)*this.tileSize}_mercatorZfromZoom(U){return this.cameraToCenterDistance/this._worldSizeFromZoom(U)}_minimumHeightOverTerrain(){const U=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(U)}_zoomFromMercatorZ(U){return this.scaleZoom(this.cameraToCenterDistance/(U*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(j.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(U,te){const be=Math.min(U.x,te.x),Pe=Math.max(U.x,te.x),Re=Math.min(U.y,te.y),Be=Math.max(U.y,te.y);if(Re<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const Ne=[new j.pointGeometry(be,Re),new j.pointGeometry(Pe,Be),new j.pointGeometry(be,Be),new j.pointGeometry(Pe,Re)],qe=this.renderWorldCopies?-3:0,Ye=this.renderWorldCopies?4:1;for(const Je of Ne){const ut=this.pointRayIntersection(Je);if(ut.t<0)return!0;const gt=this.rayIntersectionCoordinate(ut);if(gt.x<qe||gt.y<0||gt.x>Ye||gt.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+j.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new j.pointGeometry(0,0),new j.pointGeometry(this.width,this.height))}zoomDeltaToMovement(U,te){const be=j.length(j.sub([],this._camera.position,U)),Pe=this._zoomFromMercatorZ(be)+te;return be-this._mercatorZfromZoom(Pe)}getCameraPoint(){if(this.projection.name==="globe"){const U=function(te,be){const Pe=[te[0],te[1],te[2],1];j.transformMat4$1(Pe,Pe,be);const Re=Math.max(Pe[3],1e-6);return[Pe[0]/Re,Pe[1]/Re,Pe[2]/Re,Re]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new j.pointGeometry(U[0],U[1])}{const U=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new j.pointGeometry(0,U))}}getCameraToCenterDistance(U){const te=Ws(U,this.zoom,this.width,this.height,1024),be=U.pixelSpaceConversion(this.center.lat,this.worldSize,te);return .5/Math.tan(.5*this._fov)*this.height*be}}function Ks(de,U){let te=!1,be=null;const Pe=()=>{be=null,te&&(de(),be=setTimeout(Pe,U),te=!1)};return()=>(te=!0,be||Pe(),be)}class gu{constructor(U){this._hashName=U&&encodeURIComponent(U),j.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ks(this._updateHashUnthrottled.bind(this),300)}addTo(U){return this._map=U,j.window.addEventListener("hashchange",this._onHashChange,!1),U.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),j.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const U=this._map;if(!U)return"";const te=zl(U);if(this._hashName){const be=this._hashName;let Pe=!1;const Re=j.window.location.hash.slice(1).split("&").map(Be=>{const Ne=Be.split("=")[0];return Ne===be?(Pe=!0,`${Ne}=${te}`):Be}).filter(Be=>Be);return Pe||Re.push(`${be}=${te}`),`#${Re.join("&")}`}return`#${te}`}_getCurrentHash(){const U=j.window.location.hash.replace("#","");if(this._hashName){let te;return U.split("&").map(be=>be.split("=")).forEach(be=>{be[0]===this._hashName&&(te=be)}),(te&&te[1]||"").split("/")}return U.split("/")}_onHashChange(){const U=this._map;if(!U)return!1;const te=this._getCurrentHash();if(te.length>=3&&!te.some(be=>isNaN(be))){const be=U.dragRotate.isEnabled()&&U.touchZoomRotate.isEnabled()?+(te[3]||0):U.getBearing();return U.jumpTo({center:[+te[2],+te[1]],zoom:+te[0],bearing:be,pitch:+(te[4]||0)}),!0}return!1}_updateHashUnthrottled(){const U=j.window.location.href.replace(/(#.+)?$/,this.getHashString());j.window.history.replaceState(j.window.history.state,null,U)}}function zl(de,U){const te=de.getCenter(),be=Math.round(100*de.getZoom())/100,Pe=Math.ceil((be*Math.LN2+Math.log(512/360/.5))/Math.LN10),Re=Math.pow(10,Pe),Be=Math.round(te.lng*Re)/Re,Ne=Math.round(te.lat*Re)/Re,qe=de.getBearing(),Ye=de.getPitch();let Je=U?`/${Be}/${Ne}/${be}`:`${be}/${Ne}/${Be}`;return(qe||Ye)&&(Je+="/"+Math.round(10*qe)/10),Ye&&(Je+=`/${Math.round(Ye)}`),Je}const ta={linearity:.3,easing:j.bezier(0,0,.3,1)},uh=j.extend({deceleration:2500,maxSpeed:1400},ta),hh=j.extend({deceleration:20,maxSpeed:1400},ta),as=j.extend({deceleration:1e3,maxSpeed:360},ta),$l=j.extend({deceleration:1e3,maxSpeed:90},ta);class Ic{constructor(U){this._map=U,this.clear()}clear(){this._inertiaBuffer=[]}record(U){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.exported.now(),settings:U})}_drainInertiaBuffer(){const U=this._inertiaBuffer,te=j.exported.now();for(;U.length>0&&te-U[0].time>160;)U.shift()}_onMoveEnd(U){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const te={zoom:0,bearing:0,pitch:0,pan:new j.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:Re}of this._inertiaBuffer)te.zoom+=Re.zoomDelta||0,te.bearing+=Re.bearingDelta||0,te.pitch+=Re.pitchDelta||0,Re.panDelta&&te.pan._add(Re.panDelta),Re.around&&(te.around=Re.around),Re.pinchAround&&(te.pinchAround=Re.pinchAround);const be=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Pe={};if(te.pan.mag()){const Re=Js(te.pan.mag(),be,j.extend({},uh,U||{}));Pe.offset=te.pan.mult(Re.amount/te.pan.mag()),Pe.center=this._map.transform.center,Ys(Pe,Re)}if(te.zoom){const Re=Js(te.zoom,be,hh);Pe.zoom=this._map.transform.zoom+Re.amount,Ys(Pe,Re)}if(te.bearing){const Re=Js(te.bearing,be,as);Pe.bearing=this._map.transform.bearing+j.clamp(Re.amount,-179,179),Ys(Pe,Re)}if(te.pitch){const Re=Js(te.pitch,be,$l);Pe.pitch=this._map.transform.pitch+Re.amount,Ys(Pe,Re)}if(Pe.zoom||Pe.bearing){const Re=te.pinchAround===void 0?te.around:te.pinchAround;Pe.around=Re?this._map.unproject(Re):this._map.getCenter()}return this.clear(),Pe.noMoveStart=!0,Pe}}function Ys(de,U){(!de.duration||de.duration<U.duration)&&(de.duration=U.duration,de.easing=U.easing)}function Js(de,U,te){const{maxSpeed:be,linearity:Pe,deceleration:Re}=te,Be=j.clamp(de*Pe/(U/1e3),-be,be),Ne=Math.abs(Be)/(Re*Pe);return{easing:te.easing,duration:1e3*Ne,amount:Be*(Ne/2)}}class Ki extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,te,be,Pe={}){const Re=Ke(te.getCanvasContainer(),be),Be=te.unproject(Re);super(U,j.extend({point:Re,lngLat:Be,originalEvent:be},Pe)),this._defaultPrevented=!1,this.target=te}}class Ra extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,te,be){const Pe=U==="touchend"?be.changedTouches:be.touches,Re=He(te.getCanvasContainer(),Pe),Be=Re.map(qe=>te.unproject(qe)),Ne=Re.reduce((qe,Ye,Je,ut)=>qe.add(Ye.div(ut.length)),new j.pointGeometry(0,0));super(U,{points:Re,point:Ne,lngLats:Be,lngLat:te.unproject(Ne),originalEvent:be}),this._defaultPrevented=!1}}class yu extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,te,be){super(U,{originalEvent:be}),this._defaultPrevented=!1}}class Qs{constructor(U,te){this._map=U,this._clickTolerance=te.clickTolerance}reset(){this._mousedownPos=void 0}wheel(U){return this._firePreventable(new yu(U.type,this._map,U))}mousedown(U,te){return this._mousedownPos=te,this._firePreventable(new Ki(U.type,this._map,U))}mouseup(U){this._map.fire(new Ki(U.type,this._map,U))}preclick(U){const te=j.extend({},U);te.type="preclick",this._map.fire(new Ki(te.type,this._map,te))}click(U,te){this._mousedownPos&&this._mousedownPos.dist(te)>=this._clickTolerance||(this.preclick(U),this._map.fire(new Ki(U.type,this._map,U)))}dblclick(U){return this._firePreventable(new Ki(U.type,this._map,U))}mouseover(U){this._map.fire(new Ki(U.type,this._map,U))}mouseout(U){this._map.fire(new Ki(U.type,this._map,U))}touchstart(U){return this._firePreventable(new Ra(U.type,this._map,U))}touchmove(U){this._map.fire(new Ra(U.type,this._map,U))}touchend(U){this._map.fire(new Ra(U.type,this._map,U))}touchcancel(U){this._map.fire(new Ra(U.type,this._map,U))}_firePreventable(U){if(this._map.fire(U),U.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vu{constructor(U){this._map=U}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(U){this._map.fire(new Ki(U.type,this._map,U))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ki("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(U){this._delayContextMenu?this._contextMenuEvent=U:this._map.fire(new Ki(U.type,this._map,U)),this._map.listens("contextmenu")&&U.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xu{constructor(U,te){this._map=U,this._el=U.getCanvasContainer(),this._container=U.getContainer(),this._clickTolerance=te.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(U,te){this.isEnabled()&&U.shiftKey&&U.button===0&&(Ue(),this._startPos=this._lastPos=te,this._active=!0)}mousemoveWindow(U,te){if(!this._active)return;const be=te;if(this._lastPos.equals(be)||!this._box&&be.dist(this._startPos)<this._clickTolerance)return;const Pe=this._startPos;this._lastPos=be,this._box||(this._box=Te("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",U));const Re=Math.min(Pe.x,be.x),Be=Math.max(Pe.x,be.x),Ne=Math.min(Pe.y,be.y),qe=Math.max(Pe.y,be.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Re}px,${Ne}px)`,this._box.style.width=Be-Re+"px",this._box.style.height=qe-Ne+"px")})}mouseupWindow(U,te){if(!this._active||U.button!==0)return;const be=this._startPos,Pe=te;if(this.reset(),Xe(),be.x!==Pe.x||be.y!==Pe.y)return this._map.fire(new j.Event("boxzoomend",{originalEvent:U})),{cameraAnimation:Re=>Re.fitScreenCoordinates(be,Pe,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",U)}keydown(U){this._active&&U.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",U))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),De(),delete this._startPos,delete this._lastPos}_fireEvent(U,te){return this._map.fire(new j.Event(U,{originalEvent:te}))}}function Dl(de,U){const te={};for(let be=0;be<de.length;be++)te[de[be].identifier]=U[be];return te}class ss{constructor(U){this.reset(),this.numTouches=U.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(U,te,be){(this.centroid||be.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=U.timeStamp),be.length===this.numTouches&&(this.centroid=function(Pe){const Re=new j.pointGeometry(0,0);for(const Be of Pe)Re._add(Be);return Re.div(Pe.length)}(te),this.touches=Dl(be,te)))}touchmove(U,te,be){if(this.aborted||!this.centroid)return;const Pe=Dl(be,te);for(const Re in this.touches){const Be=this.touches[Re],Ne=Pe[Re];(!Ne||Ne.dist(Be)>30)&&(this.aborted=!0)}}touchend(U,te,be){if((!this.centroid||U.timeStamp-this.startTime>500)&&(this.aborted=!0),be.length===0){const Pe=!this.aborted&&this.centroid;if(this.reset(),Pe)return Pe}}}class Ll{constructor(U){this.singleTap=new ss(U),this.numTaps=U.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(U,te,be){this.singleTap.touchstart(U,te,be)}touchmove(U,te,be){this.singleTap.touchmove(U,te,be)}touchend(U,te,be){const Pe=this.singleTap.touchend(U,te,be);if(Pe){const Re=U.timeStamp-this.lastTime<500,Be=!this.lastTap||this.lastTap.dist(Pe)<30;if(Re&&Be||this.reset(),this.count++,this.lastTime=U.timeStamp,this.lastTap=Pe,this.count===this.numTaps)return this.reset(),Pe}}}class bu{constructor(){this._zoomIn=new Ll({numTouches:1,numTaps:2}),this._zoomOut=new Ll({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(U,te,be){this._zoomIn.touchstart(U,te,be),this._zoomOut.touchstart(U,te,be)}touchmove(U,te,be){this._zoomIn.touchmove(U,te,be),this._zoomOut.touchmove(U,te,be)}touchend(U,te,be){const Pe=this._zoomIn.touchend(U,te,be),Re=this._zoomOut.touchend(U,te,be);return Pe?(this._active=!0,U.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Be=>Be.easeTo({duration:300,zoom:Be.getZoom()+1,around:Be.unproject(Pe)},{originalEvent:U})}):Re?(this._active=!0,U.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Be=>Be.easeTo({duration:300,zoom:Be.getZoom()-1,around:Be.unproject(Re)},{originalEvent:U})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const wu={0:1,2:2};class ls{constructor(U){this.reset(),this._clickTolerance=U.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(U,te){return!1}_move(U,te){return{}}mousedown(U,te){if(this._lastPoint)return;const be=Qe(U);this._correctButton(U,be)&&(this._lastPoint=te,this._eventButton=be)}mousemoveWindow(U,te){const be=this._lastPoint;if(be){if(U.preventDefault(),this._eventButton!=null&&function(Pe,Re){const Be=wu[Re];return Pe.buttons===void 0||(Pe.buttons&Be)!==Be}(U,this._eventButton))this.reset();else if(this._moved||!(te.dist(be)<this._clickTolerance))return this._moved=!0,this._lastPoint=te,this._move(be,te)}}mouseupWindow(U){this._lastPoint&&Qe(U)===this._eventButton&&(this._moved&&Xe(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eu extends ls{mousedown(U,te){super.mousedown(U,te),this._lastPoint&&(this._active=!0)}_correctButton(U,te){return te===0&&!U.ctrlKey}_move(U,te){return{around:te,panDelta:te.sub(U)}}}class na extends ls{_correctButton(U,te){return te===0&&U.ctrlKey||te===2}_move(U,te){const be=.8*(te.x-U.x);if(be)return this._active=!0,{bearingDelta:be}}contextmenu(U){U.preventDefault()}}class qi extends ls{_correctButton(U,te){return te===0&&U.ctrlKey||te===2}_move(U,te){const be=-.5*(te.y-U.y);if(be)return this._active=!0,{pitchDelta:be}}contextmenu(U){U.preventDefault()}}class dh{constructor(U,te){this._map=U,this._el=U.getCanvasContainer(),this._minTouches=1,this._clickTolerance=te.clickTolerance||1,this.reset(),j.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new j.pointGeometry(0,0)}touchstart(U,te,be){return this._calculateTransform(U,te,be)}touchmove(U,te,be){if(this._active&&!(be.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(be.length===1&&!j.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return U.cancelable&&U.preventDefault(),this._calculateTransform(U,te,be)}}touchend(U,te,be){this._calculateTransform(U,te,be),this._active&&be.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(U,te,be){be.length>0&&(this._active=!0);const Pe=Dl(be,te),Re=new j.pointGeometry(0,0),Be=new j.pointGeometry(0,0);let Ne=0;for(const Ye in Pe){const Je=Pe[Ye],ut=this._touches[Ye];ut&&(Re._add(Je),Be._add(Je.sub(ut)),Ne++,Pe[Ye]=Je)}if(this._touches=Pe,Ne<this._minTouches||!Be.mag())return;const qe=Be.div(Ne);return this._sum._add(qe),this._sum.mag()<this._clickTolerance?void 0:{around:Re.div(Ne),panDelta:qe}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Te("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Bl{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(U){}_move(U,te,be){return{}}touchstart(U,te,be){this._firstTwoTouches||be.length<2||(this._firstTwoTouches=[be[0].identifier,be[1].identifier],this._start([te[0],te[1]]))}touchmove(U,te,be){const Pe=this._firstTwoTouches;if(!Pe)return;U.preventDefault();const[Re,Be]=Pe,Ne=Fl(be,te,Re),qe=Fl(be,te,Be);if(!Ne||!qe)return;const Ye=this._aroundCenter?null:Ne.add(qe).div(2);return this._move([Ne,qe],Ye,U)}touchend(U,te,be){if(!this._firstTwoTouches)return;const[Pe,Re]=this._firstTwoTouches,Be=Fl(be,te,Pe),Ne=Fl(be,te,Re);Be&&Ne||(this._active&&Xe(),this.reset())}touchcancel(){this.reset()}enable(U){this._enabled=!0,this._aroundCenter=!!U&&U.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fl(de,U,te){for(let be=0;be<de.length;be++)if(de[be].identifier===te)return U[be]}function Tu(de,U){return Math.log(de/U)/Math.LN2}class wo extends Bl{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(U){this._startDistance=this._distance=U[0].dist(U[1])}_move(U,te){const be=this._distance;if(this._distance=U[0].dist(U[1]),this._active||!(Math.abs(Tu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Tu(this._distance,be),pinchAround:te}}}function Pc(de,U){return 180*de.angleWith(U)/Math.PI}class za extends Bl{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])}_move(U,te){const be=this._vector;if(this._vector=U[0].sub(U[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pc(this._vector,be),pinchAround:te}}_isBelowThreshold(U){this._minDiameter=Math.min(this._minDiameter,U.mag());const te=25/(Math.PI*this._minDiameter)*360,be=Pc(U,this._startVector);return Math.abs(be)<te}}function Eo(de){return Math.abs(de.y)>Math.abs(de.x)}class ra extends Bl{constructor(U){super(),this._map=U}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(U){this._lastPoints=U,Eo(U[0].sub(U[1]))&&(this._valid=!1)}_move(U,te,be){const Pe=this._lastPoints;if(!Pe)return;const Re=U[0].sub(Pe[0]),Be=U[1].sub(Pe[1]);return this._map._cooperativeGestures&&be.touches.length<3||(this._valid=this.gestureBeginsVertically(Re,Be,be.timeStamp),!this._valid)?void 0:(this._lastPoints=U,this._active=!0,{pitchDelta:(Re.y+Be.y)/2*-.5})}gestureBeginsVertically(U,te,be){if(this._valid!==void 0)return this._valid;const Pe=U.mag()>=2,Re=te.mag()>=2;if(!Pe&&!Re)return;if(!Pe||!Re)return this._firstMove==null&&(this._firstMove=be),be-this._firstMove<100&&void 0;const Be=U.y>0==te.y>0;return Eo(U)&&Eo(te)&&Be}}const ur={panStep:100,bearingStep:15,pitchStep:10};class cs{constructor(){const U=ur;this._panStep=U.panStep,this._bearingStep=U.bearingStep,this._pitchStep=U.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(U){if(U.altKey||U.ctrlKey||U.metaKey)return;let te=0,be=0,Pe=0,Re=0,Be=0;switch(U.keyCode){case 61:case 107:case 171:case 187:te=1;break;case 189:case 109:case 173:te=-1;break;case 37:U.shiftKey?be=-1:(U.preventDefault(),Re=-1);break;case 39:U.shiftKey?be=1:(U.preventDefault(),Re=1);break;case 38:U.shiftKey?Pe=1:(U.preventDefault(),Be=-1);break;case 40:U.shiftKey?Pe=-1:(U.preventDefault(),Be=1);break;default:return}return this._rotationDisabled&&(be=0,Pe=0),{cameraAnimation:Ne=>{const qe=Ne.getZoom();Ne.easeTo({duration:300,easeId:"keyboardHandler",easing:Au,zoom:te?Math.round(qe)+te*(U.shiftKey?2:1):qe,bearing:Ne.getBearing()+be*this._bearingStep,pitch:Ne.getPitch()+Pe*this._pitchStep,offset:[-Re*this._panStep,-Be*this._panStep],center:Ne.getCenter()},{originalEvent:U})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Au(de){return de*(2-de)}const us=4.000244140625;class el{constructor(U,te){this._map=U,this._el=U.getCanvasContainer(),this._handler=te,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,j.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(U){this._defaultZoomRate=U}setWheelZoomRate(U){this._wheelZoomRate=U}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(U){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!U&&U.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(U){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(U.ctrlKey||U.metaKey||this.isZooming()||j.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let te=U.deltaMode===j.window.WheelEvent.DOM_DELTA_LINE?40*U.deltaY:U.deltaY;const be=j.exported.now(),Pe=be-(this._lastWheelEventTime||0);this._lastWheelEventTime=be,te!==0&&te%us==0?this._type="wheel":te!==0&&Math.abs(te)<4?this._type="trackpad":Pe>400?(this._type=null,this._lastValue=te,this._timeout=setTimeout(this._onTimeout,40,U)):this._type||(this._type=Math.abs(Pe*te)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,te+=this._lastValue)),U.shiftKey&&te&&(te/=4),this._type&&(this._lastWheelEvent=U,this._delta-=te,this._active||this._start(U)),U.preventDefault()}_onTimeout(U){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(U)}_start(U){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const te=Ke(this._el,U);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:te,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const U=this._map.transform,te=()=>U._terrainEnabled()&&this._aroundCoord?U.computeZoomRelativeTo(this._aroundCoord):U.zoom;if(this._delta!==0){const qe=this._type==="wheel"&&Math.abs(this._delta)>us?this._wheelZoomRate:this._defaultZoomRate;let Ye=2/(1+Math.exp(-Math.abs(this._delta*qe)));this._delta<0&&Ye!==0&&(Ye=1/Ye);const Je=te(),ut=Math.pow(2,Je),gt=typeof this._targetZoom=="number"?U.zoomScale(this._targetZoom):ut;this._targetZoom=Math.min(U.maxZoom,Math.max(U.minZoom,U.scaleZoom(gt*Ye))),this._type==="wheel"&&(this._startZoom=Je,this._easing=this._smoothOutEasing(200)),this._delta=0}const be=typeof this._targetZoom=="number"?this._targetZoom:te(),Pe=this._startZoom,Re=this._easing;let Be,Ne=!1;if(this._type==="wheel"&&Pe&&Re){const qe=Math.min((j.exported.now()-this._lastWheelEventTime)/200,1),Ye=Re(qe);Be=j.number(Pe,be,Ye),qe<1?this._frameId||(this._frameId=!0):Ne=!0}else Be=be,Ne=!0;return this._active=!0,Ne&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ne,zoomDelta:Be-te(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(U){let te=j.ease;if(this._prevEase){const be=this._prevEase,Pe=(j.exported.now()-be.start)/be.duration,Re=be.easing(Pe+.01)-be.easing(Pe),Be=.27/Math.sqrt(Re*Re+1e-4)*.01,Ne=Math.sqrt(.0729-Be*Be);te=j.bezier(Be,Ne,.25,1)}return this._prevEase={start:j.exported.now(),duration:U,easing:te},te}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Te("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(j.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Oc{constructor(U,te){this._clickZoom=U,this._tapZoom=te}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ku{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(U,te){return U.preventDefault(),{cameraAnimation:be=>{be.easeTo({duration:300,zoom:be.getZoom()+(U.shiftKey?-1:1),around:be.unproject(te)},{originalEvent:U})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Su{constructor(){this._tap=new Ll({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(U,te,be){this._swipePoint||(this._tapTime&&U.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?be.length>0&&(this._swipePoint=te[0],this._swipeTouch=be[0].identifier):this._tap.touchstart(U,te,be))}touchmove(U,te,be){if(this._tapTime){if(this._swipePoint){if(be[0].identifier!==this._swipeTouch)return;const Pe=te[0],Re=Pe.y-this._swipePoint.y;return this._swipePoint=Pe,U.preventDefault(),this._active=!0,{zoomDelta:Re/128}}}else this._tap.touchmove(U,te,be)}touchend(U,te,be){this._tapTime?this._swipePoint&&be.length===0&&this.reset():this._tap.touchend(U,te,be)&&(this._tapTime=U.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cu{constructor(U,te,be){this._el=U,this._mousePan=te,this._touchPan=be}enable(U){this._inertiaOptions=U||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Mu{constructor(U,te,be){this._pitchWithRotate=U.pitchWithRotate,this._mouseRotate=te,this._mousePitch=be}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class tl{constructor(U,te,be,Pe){this._el=U,this._touchZoom=te,this._touchRotate=be,this._tapDragZoom=Pe,this._rotationDisabled=!1,this._enabled=!0}enable(U){this._touchZoom.enable(U),this._rotationDisabled||this._touchRotate.enable(U),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const si=de=>de.zoom||de.drag||de.pitch||de.rotate;class Nl extends j.Event{}class fi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(U,te){const be=j.sub([],te,U);this.radius=j.length(be[2]<0?j.div([],be,this.constants):[be[0],be[1],0])}projectRay(U){j.div(U,U,this.constants),j.normalize(U,U),j.mul$1(U,U,this.constants);const te=j.scale$2([],U,this.radius);if(te[2]>0){const be=j.scale$2([],[0,0,1],j.dot(te,[0,0,1])),Pe=j.scale$2([],j.normalize([],[te[0],te[1],0]),this.radius),Re=j.add([],te,j.scale$2([],j.sub([],j.add([],Pe,be),te),2));te[0]=Re[0],te[1]=Re[1]}return te}}function Hi(de){return de.panDelta&&de.panDelta.mag()||de.zoomDelta||de.bearingDelta||de.pitchDelta}class Rc{constructor(U,te){this._map=U,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ic(U),this._bearingSnap=te.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new fi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(te),j.bindAll(["handleEvent","handleWindowEvent"],this);const be=this._el;this._listeners=[[be,"touchstart",{passive:!0}],[be,"touchmove",{passive:!1}],[be,"touchend",void 0],[be,"touchcancel",void 0],[be,"mousedown",void 0],[be,"mousemove",void 0],[be,"mouseup",void 0],[j.window.document,"mousemove",{capture:!0}],[j.window.document,"mouseup",void 0],[be,"mouseover",void 0],[be,"mouseout",void 0],[be,"dblclick",void 0],[be,"click",void 0],[be,"keydown",{capture:!1}],[be,"keyup",void 0],[be,"wheel",{passive:!1}],[be,"contextmenu",void 0],[j.window,"blur",void 0]];for(const[Pe,Re,Be]of this._listeners)Pe.addEventListener(Re,Pe===j.window.document?this.handleWindowEvent:this.handleEvent,Be)}destroy(){for(const[U,te,be]of this._listeners)U.removeEventListener(te,U===j.window.document?this.handleWindowEvent:this.handleEvent,be)}_addDefaultHandlers(U){const te=this._map,be=te.getCanvasContainer();this._add("mapEvent",new Qs(te,U));const Pe=te.boxZoom=new xu(te,U);this._add("boxZoom",Pe);const Re=new bu,Be=new ku;te.doubleClickZoom=new Oc(Be,Re),this._add("tapZoom",Re),this._add("clickZoom",Be);const Ne=new Su;this._add("tapDragZoom",Ne);const qe=te.touchPitch=new ra(te);this._add("touchPitch",qe);const Ye=new na(U),Je=new qi(U);te.dragRotate=new Mu(U,Ye,Je),this._add("mouseRotate",Ye,["mousePitch"]),this._add("mousePitch",Je,["mouseRotate"]);const ut=new Eu(U),gt=new dh(te,U);te.dragPan=new Cu(be,ut,gt),this._add("mousePan",ut),this._add("touchPan",gt,["touchZoom","touchRotate"]);const It=new za,kt=new wo;te.touchZoomRotate=new tl(be,kt,It,Ne),this._add("touchRotate",It,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]),this._add("blockableMapEvent",new vu(te));const At=te.scrollZoom=new el(te,this);this._add("scrollZoom",At,["mousePan"]);const St=te.keyboard=new cs;this._add("keyboard",St);for(const Et of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])U.interactive&&U[Et]&&te[Et].enable(U[Et])}_add(U,te,be){this._handlers.push({handlerName:U,handler:te,allowed:be}),this._handlersById[U]=te}stop(U){if(!this._updatingCamera){for(const{handler:te}of this._handlers)te.reset();this._inertia.clear(),this._fireEvents({},{},U),this._changes=[]}}isActive(){for(const{handler:U}of this._handlers)if(U.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!si(this._eventsInProgress)||this.isZooming()}_blockedByActive(U,te,be){for(const Pe in U)if(Pe!==be&&(!te||te.indexOf(Pe)<0))return!0;return!1}handleWindowEvent(U){this.handleEvent(U,`${U.type}Window`)}_getMapTouches(U){const te=[];for(const be of U)this._el.contains(be.target)&&te.push(be);return te}handleEvent(U,te){this._updatingCamera=!0;const be=U.type==="renderFrame",Pe=be?void 0:U,Re={needsRenderFrame:!1},Be={},Ne={},qe=U.touches?this._getMapTouches(U.touches):void 0,Ye=qe?He(this._el,qe):be?void 0:Ke(this._el,U);for(const{handlerName:gt,handler:It,allowed:kt}of this._handlers){if(!It.isEnabled())continue;let At;this._blockedByActive(Ne,kt,gt)?It.reset():It[te||U.type]&&(At=It[te||U.type](U,Ye,qe),this.mergeHandlerResult(Re,Be,At,gt,Pe),At&&At.needsRenderFrame&&this._triggerRenderFrame()),(At||It.isActive())&&(Ne[gt]=It)}const Je={};for(const gt in this._previousActiveHandlers)Ne[gt]||(Je[gt]=Pe);this._previousActiveHandlers=Ne,(Object.keys(Je).length||Hi(Re))&&(this._changes.push([Re,Be,Je]),this._triggerRenderFrame()),(Object.keys(Ne).length||Hi(Re))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ut}=Re;ut&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ut(this._map))}mergeHandlerResult(U,te,be,Pe,Re){if(!be)return;j.extend(U,be);const Be={handlerName:Pe,originalEvent:be.originalEvent||Re};be.zoomDelta!==void 0&&(te.zoom=Be),be.panDelta!==void 0&&(te.drag=Be),be.pitchDelta!==void 0&&(te.pitch=Be),be.bearingDelta!==void 0&&(te.rotate=Be)}_applyChanges(){const U={},te={},be={};for(const[Pe,Re,Be]of this._changes)Pe.panDelta&&(U.panDelta=(U.panDelta||new j.pointGeometry(0,0))._add(Pe.panDelta)),Pe.zoomDelta&&(U.zoomDelta=(U.zoomDelta||0)+Pe.zoomDelta),Pe.bearingDelta&&(U.bearingDelta=(U.bearingDelta||0)+Pe.bearingDelta),Pe.pitchDelta&&(U.pitchDelta=(U.pitchDelta||0)+Pe.pitchDelta),Pe.around!==void 0&&(U.around=Pe.around),Pe.aroundCoord!==void 0&&(U.aroundCoord=Pe.aroundCoord),Pe.pinchAround!==void 0&&(U.pinchAround=Pe.pinchAround),Pe.noInertia&&(U.noInertia=Pe.noInertia),j.extend(te,Re),j.extend(be,Be);this._updateMapTransform(U,te,be),this._changes=[]}_updateMapTransform(U,te,be){const Pe=this._map,Re=Pe.transform,Be=$t=>[$t.x,$t.y,$t.z];if(($t=>{const Ot=this._eventsInProgress.drag;return Ot&&!this._handlersById[Ot.handlerName].isActive()})()&&!Hi(U)){const $t=Re.zoom;Re.cameraElevationReference="sea",Re.recenterOnTerrain(),Re.cameraElevationReference="ground",$t!==Re.zoom&&this._map._update(!0)}if(!Hi(U))return void this._fireEvents(te,be,!0);let{panDelta:Ne,zoomDelta:qe,bearingDelta:Ye,pitchDelta:Je,around:ut,aroundCoord:gt,pinchAround:It}=U;It!==void 0&&(ut=It),($t=>te.drag&&!this._eventsInProgress.drag)()&&ut&&(this._dragOrigin=Be(Re.pointCoordinate3D(ut)),this._trackingEllipsoid.setup(Re._camera.position,this._dragOrigin)),Re.cameraElevationReference="sea",Pe._stop(!0),ut=ut||Pe.transform.centerPoint,Ye&&(Re.bearing+=Ye),Je&&(Re.pitch+=Je),Re._updateCameraState();const kt=[0,0,0];if(Ne)if(Re.projection.name==="mercator"){const $t=this._trackingEllipsoid.projectRay(Re.screenPointToMercatorRay(ut).dir),Ot=this._trackingEllipsoid.projectRay(Re.screenPointToMercatorRay(ut.sub(Ne)).dir);kt[0]=Ot[0]-$t[0],kt[1]=Ot[1]-$t[1]}else{const $t=Re.pointCoordinate(ut);if(Re.projection.name==="globe"){Ne=Ne.rotate(-Re.angle);const Ot=Re._pixelsPerMercatorPixel/Re.worldSize;kt[0]=-Ne.x*j.mercatorScale(j.latFromMercatorY($t.y))*Ot,kt[1]=-Ne.y*j.mercatorScale(Re.center.lat)*Ot}else{const Ot=Re.pointCoordinate(ut.sub(Ne));$t&&Ot&&(kt[0]=Ot.x-$t.x,kt[1]=Ot.y-$t.y)}}const At=Re.zoom,St=[0,0,0];if(qe){const $t=Be(gt||Re.pointCoordinate3D(ut)),Ot={dir:j.normalize([],j.sub([],$t,Re._camera.position))};if(Ot.dir[2]<0){const Jt=Re.zoomDeltaToMovement($t,qe);j.scale$2(St,Ot.dir,Jt)}}const Et=j.add(kt,kt,St);Re._translateCameraConstrained(Et),qe&&Math.abs(Re.zoom-At)>1e-4&&Re.recenterOnTerrain(),Re.cameraElevationReference="ground",this._map._update(),U.noInertia||this._inertia.record(U),this._fireEvents(te,be,!0)}_fireEvents(U,te,be){const Pe=si(this._eventsInProgress),Re=si(U),Be={};for(const Je in U){const{originalEvent:ut}=U[Je];this._eventsInProgress[Je]||(Be[`${Je}start`]=ut),this._eventsInProgress[Je]=U[Je]}!Pe&&Re&&this._fireEvent("movestart",Re.originalEvent);for(const Je in Be)this._fireEvent(Je,Be[Je]);Re&&this._fireEvent("move",Re.originalEvent);for(const Je in U){const{originalEvent:ut}=U[Je];this._fireEvent(Je,ut)}const Ne={};let qe;for(const Je in this._eventsInProgress){const{handlerName:ut,originalEvent:gt}=this._eventsInProgress[Je];this._handlersById[ut].isActive()||(delete this._eventsInProgress[Je],qe=te[ut]||gt,Ne[`${Je}end`]=qe)}for(const Je in Ne)this._fireEvent(Je,Ne[Je]);const Ye=si(this._eventsInProgress);if(be&&(Pe||Re)&&!Ye){this._updatingCamera=!0;const Je=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ut=gt=>gt!==0&&-this._bearingSnap<gt&&gt<this._bearingSnap;Je?(ut(Je.bearing||this._map.getBearing())&&(Je.bearing=0),this._map.easeTo(Je,{originalEvent:qe})):(this._map.fire(new j.Event("moveend",{originalEvent:qe})),ut(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(U,te){this._map.fire(new j.Event(U,te?{originalEvent:te}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(U=>{this._frameId=void 0,this.handleEvent(new Nl("renderFrame",{timeStamp:U})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const zc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $c extends j.Evented{constructor(U,te){super(),this._moving=!1,this._zooming=!1,this.transform=U,this._bearingSnap=te.bearingSnap,j.bindAll(["_renderFrameCallback"],this)}getCenter(){return new j.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(U,te){return this.jumpTo({center:U},te)}panBy(U,te,be){return U=j.pointGeometry.convert(U).mult(-1),this.panTo(this.transform.center,j.extend({offset:U},te),be)}panTo(U,te,be){return this.easeTo(j.extend({center:U},te),be)}getZoom(){return this.transform.zoom}setZoom(U,te){return this.jumpTo({zoom:U},te),this}zoomTo(U,te,be){return this.easeTo(j.extend({zoom:U},te),be)}zoomIn(U,te){return this.zoomTo(this.getZoom()+1,U,te),this}zoomOut(U,te){return this.zoomTo(this.getZoom()-1,U,te),this}getBearing(){return this.transform.bearing}setBearing(U,te){return this.jumpTo({bearing:U},te),this}getPadding(){return this.transform.padding}setPadding(U,te){return this.jumpTo({padding:U},te),this}rotateTo(U,te,be){return this.easeTo(j.extend({bearing:U},te),be)}resetNorth(U,te){return this.rotateTo(0,j.extend({duration:1e3},U),te),this}resetNorthPitch(U,te){return this.easeTo(j.extend({bearing:0,pitch:0,duration:1e3},U),te),this}snapToNorth(U,te){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,te):this}getPitch(){return this.transform.pitch}setPitch(U,te){return this.jumpTo({pitch:U},te),this}cameraForBounds(U,te){this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),U=j.LngLatBounds.convert(U);const be=te&&te.bearing||0;return this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),be,te)}_extendCameraOptions(U){const te={top:0,bottom:0,right:0,left:0};if(typeof(U=j.extend({padding:te,offset:[0,0],maxZoom:this.transform.maxZoom},U)).padding=="number"){const be=U.padding;U.padding={top:be,bottom:be,right:be,left:be}}return U.padding=j.extend(te,U.padding),U}_cameraForBoxAndBearing(U,te,be,Pe){const Re=this._extendCameraOptions(Pe),Be=this.transform,Ne=Be.padding,qe=Be.project(j.LngLat.convert(U)),Ye=Be.project(j.LngLat.convert(te)),Je=new j.pointGeometry(qe.x,Ye.y),ut=new j.pointGeometry(Ye.x,qe.y),gt=-j.degToRad(be),It=qe.rotate(gt),kt=Ye.rotate(gt),At=Je.rotate(gt),St=ut.rotate(gt),Et=new j.pointGeometry(Math.max(It.x,kt.x,At.x,St.x),Math.max(It.y,kt.y,At.y,St.y)),$t=new j.pointGeometry(Math.min(It.x,kt.x,At.x,St.x),Math.min(It.y,kt.y,At.y,St.y)),Ot=Et.sub($t),Jt=(Be.width-((Ne.left||0)+(Ne.right||0)+Re.padding.left+Re.padding.right))/Ot.x,Yt=(Be.height-((Ne.top||0)+(Ne.bottom||0)+Re.padding.top+Re.padding.bottom))/Ot.y;if(Yt<0||Jt<0)return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Gt=Math.min(Be.scaleZoom(Be.scale*Math.min(Jt,Yt)),Re.maxZoom),Kt=typeof Re.offset.x=="number"&&typeof Re.offset.y=="number"?new j.pointGeometry(Re.offset.x,Re.offset.y):j.pointGeometry.convert(Re.offset),Wt=new j.pointGeometry((Re.padding.left-Re.padding.right)/2,(Re.padding.top-Re.padding.bottom)/2).rotate(be*Math.PI/180),sn=Kt.add(Wt).mult(Be.scale/Be.zoomScale(Gt));return{center:Be.unproject(qe.add(Ye).div(2).sub(sn)),zoom:Gt,bearing:be}}_cameraForBox(U,te,be,Pe,Re){const Be=this._extendCameraOptions(Re);be=be||0,Pe=Pe||0,U=j.LngLat.convert(U),te=j.LngLat.convert(te);const Ne=this.transform.clone();Ne.padding=Be.padding;const qe=this.getFreeCameraOptions(),Ye=new j.LngLat(.5*(U.lng+te.lng),.5*(U.lat+te.lat)),Je=.5*(be+Pe);if(Ne._camera.position[2]<j.mercatorZfromAltitude(Je,Ye.lat))return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");qe.lookAtPoint(Ye),Ne.setFreeCameraOptions(qe);const ut=j.MercatorCoordinate.fromLngLat(U),gt=j.MercatorCoordinate.fromLngLat(te),It=Ne.pointRayIntersection(Ne.centerPoint,Je),kt=[(At=Ne.rayIntersectionCoordinate(It)).x,At.y,At.z];var At;const St=Ne.screenPointToMercatorRay(Ne.centerPoint),Et=Ne.projection.name!=="globe";let $t,Ot=0;do{const Jt=Math.floor(Ne.zoom),Yt=1<<Jt,Gt=Math.min(Yt*ut.x,Yt*gt.x),Kt=Math.min(Yt*ut.y,Yt*gt.y),Wt=Math.max(Yt*ut.x,Yt*gt.x),sn=Math.max(Yt*ut.y,Yt*gt.y),mn=new j.Aabb([Gt,Kt,be],[Wt,sn,Pe]),Wn=j.Frustum.fromInvProjectionMatrix(Ne.invProjMatrix,Ne.worldSize,Jt,Et);if(mn.intersects(Wn)!==2){$t&&(Ne._camera.position=j.scaleAndAdd([],Ne._camera.position,St.dir,-$t),Ne._updateStateFromCamera());break}const pn=j.sub([],Ne._camera.position,kt);$t=.5*j.length(pn),Ne._camera.position=j.scaleAndAdd([],Ne._camera.position,St.dir,$t);try{Ne._updateStateFromCamera()}catch{return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ot<10);return{center:Ne.center,zoom:Ne.zoom,bearing:Ne.bearing,pitch:Ne.pitch}}fitBounds(U,te,be){return this.transform.projection.name==="globe"&&j.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(U,te),te,be)}_raycastElevationBox(U,te){const be=this.transform.elevation;if(!be)return;const Pe=new j.pointGeometry(U.x,te.y),Re=new j.pointGeometry(te.x,U.y),Be=be.pointCoordinate(U);if(!Be)return;const Ne=be.pointCoordinate(te);if(!Ne)return;const qe=be.pointCoordinate(Pe);if(!qe)return;const Ye=be.pointCoordinate(Re);if(!Ye)return;const Je=new j.MercatorCoordinate(Be[0],Be[1]).toLngLat(),ut=new j.MercatorCoordinate(Ne[0],Ne[1]).toLngLat(),gt=new j.MercatorCoordinate(qe[0],qe[1]).toLngLat(),It=new j.MercatorCoordinate(Ye[0],Ye[1]).toLngLat(),kt=Math.min(Je.lng,Math.min(ut.lng,Math.min(gt.lng,It.lng))),At=Math.min(Je.lat,Math.min(ut.lat,Math.min(gt.lat,It.lat))),St=Math.max(Je.lng,Math.max(ut.lng,Math.max(gt.lng,It.lng))),Et=Math.max(Je.lat,Math.max(ut.lat,Math.max(gt.lat,It.lat))),$t=Math.min(Be[3],Math.min(Ne[3],Math.min(qe[3],Ye[3]))),Ot=Math.max(Be[3],Math.max(Ne[3],Math.max(qe[3],Ye[3])));return{minLngLat:new j.LngLat(kt,At),maxLngLat:new j.LngLat(St,Et),minAltitude:$t,maxAltitude:Ot}}fitScreenCoordinates(U,te,be,Pe,Re){let Be,Ne,qe,Ye;this.transform.projection.name==="globe"&&j.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const Je=j.pointGeometry.convert(U),ut=j.pointGeometry.convert(te),gt=this._raycastElevationBox(Je,ut);if(gt)Be=gt.minLngLat,Ne=gt.maxLngLat,qe=gt.minAltitude,Ye=gt.maxAltitude;else{if(this.transform.anyCornerOffEdge(Je,ut))return this;Be=this.transform.pointLocation(Je),Ne=this.transform.pointLocation(ut)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(j.pointGeometry.convert(U)),this.transform.pointLocation(j.pointGeometry.convert(te)),be,Pe):this._cameraForBox(Be,Ne,qe,Ye,Pe),Pe,Re)}_fitInternal(U,te,be){return U?(delete(te=j.extend(U,te)).padding,te.linear?this.easeTo(te,be):this.flyTo(te,be)):this}jumpTo(U,te){this.stop();const be=U.preloadOnly?this.transform.clone():this.transform;let Pe=!1,Re=!1,Be=!1;return"zoom"in U&&be.zoom!==+U.zoom&&(Pe=!0,be.zoom=+U.zoom),U.center!==void 0&&(be.center=j.LngLat.convert(U.center)),"bearing"in U&&be.bearing!==+U.bearing&&(Re=!0,be.bearing=+U.bearing),"pitch"in U&&be.pitch!==+U.pitch&&(Be=!0,be.pitch=+U.pitch),U.padding==null||be.isPaddingEqual(U.padding)||(be.padding=U.padding),U.preloadOnly?(this._preloadTiles(be),this):(this.fire(new j.Event("movestart",te)).fire(new j.Event("move",te)),Pe&&this.fire(new j.Event("zoomstart",te)).fire(new j.Event("zoom",te)).fire(new j.Event("zoomend",te)),Re&&this.fire(new j.Event("rotatestart",te)).fire(new j.Event("rotate",te)).fire(new j.Event("rotateend",te)),Be&&this.fire(new j.Event("pitchstart",te)).fire(new j.Event("pitch",te)).fire(new j.Event("pitchend",te)),this.fire(new j.Event("moveend",te)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||j.warnOnce(zc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(U,te){const be=this.transform;if(!be.projection.supportsFreeCamera)return j.warnOnce(zc),this;this.stop();const Pe=be.zoom,Re=be.pitch,Be=be.bearing;be.setFreeCameraOptions(U);const Ne=Pe!==be.zoom,qe=Re!==be.pitch,Ye=Be!==be.bearing;return this.fire(new j.Event("movestart",te)).fire(new j.Event("move",te)),Ne&&this.fire(new j.Event("zoomstart",te)).fire(new j.Event("zoom",te)).fire(new j.Event("zoomend",te)),Ye&&this.fire(new j.Event("rotatestart",te)).fire(new j.Event("rotate",te)).fire(new j.Event("rotateend",te)),qe&&this.fire(new j.Event("pitchstart",te)).fire(new j.Event("pitch",te)).fire(new j.Event("pitchend",te)),this.fire(new j.Event("moveend",te)),this}easeTo(U,te){this._stop(!1,U.easeId),((U=j.extend({offset:[0,0],duration:500,easing:j.ease},U)).animate===!1||!U.essential&&j.exported.prefersReducedMotion)&&(U.duration=0);const be=this.transform,Pe=this.getZoom(),Re=this.getBearing(),Be=this.getPitch(),Ne=this.getPadding(),qe="zoom"in U?+U.zoom:Pe,Ye="bearing"in U?this._normalizeBearing(U.bearing,Re):Re,Je="pitch"in U?+U.pitch:Be,ut="padding"in U?U.padding:be.padding,gt=j.pointGeometry.convert(U.offset);let It,kt,At;if(be.projection.name==="globe"){const sn=j.MercatorCoordinate.fromLngLat(be.center),mn=gt.rotate(-be.angle);sn.x+=mn.x/be.worldSize,sn.y+=mn.y/be.worldSize;const Wn=sn.toLngLat(),pn=j.LngLat.convert(U.center||Wn);this._normalizeCenter(pn),It=be.centerPoint.add(mn),kt=new j.pointGeometry(sn.x,sn.y).mult(be.worldSize),At=new j.pointGeometry(j.mercatorXfromLng(pn.lng),j.mercatorYfromLat(pn.lat)).mult(be.worldSize).sub(kt)}else{It=be.centerPoint.add(gt);const sn=be.pointLocation(It),mn=j.LngLat.convert(U.center||sn);this._normalizeCenter(mn),kt=be.project(sn),At=be.project(mn).sub(kt)}const St=be.zoomScale(qe-Pe);let Et,$t;U.around&&(Et=j.LngLat.convert(U.around),$t=be.locationPoint(Et));const Ot=this._zooming||qe!==Pe,Jt=this._rotating||Re!==Ye,Yt=this._pitching||Je!==Be,Gt=!be.isPaddingEqual(ut),Kt=sn=>mn=>{if(Ot&&(sn.zoom=j.number(Pe,qe,mn)),Jt&&(sn.bearing=j.number(Re,Ye,mn)),Yt&&(sn.pitch=j.number(Be,Je,mn)),Gt&&(sn.interpolatePadding(Ne,ut,mn),It=sn.centerPoint.add(gt)),Et)sn.setLocationAtPoint(Et,$t);else{const Wn=sn.zoomScale(sn.zoom-Pe),pn=qe>Pe?Math.min(2,St):Math.max(.5,St),zn=Math.pow(pn,1-mn),Nn=sn.unproject(kt.add(At.mult(mn*zn)).mult(Wn));sn.setLocationAtPoint(sn.renderWorldCopies?Nn.wrap():Nn,It)}return U.preloadOnly||this._fireMoveEvents(te),sn};if(U.preloadOnly){const sn=this._emulate(Kt,U.duration,be);return this._preloadTiles(sn),this}const Wt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ot,this._rotating=Jt,this._pitching=Yt,this._padding=Gt,this._easeId=U.easeId,this._prepareEase(te,U.noMoveStart,Wt),this._ease(Kt(be),sn=>{be.recenterOnTerrain(),this._afterEase(te,sn)},U),this}_prepareEase(U,te,be={}){this._moving=!0,this.transform.cameraElevationReference="sea",te||be.moving||this.fire(new j.Event("movestart",U)),this._zooming&&!be.zooming&&this.fire(new j.Event("zoomstart",U)),this._rotating&&!be.rotating&&this.fire(new j.Event("rotatestart",U)),this._pitching&&!be.pitching&&this.fire(new j.Event("pitchstart",U))}_fireMoveEvents(U){this.fire(new j.Event("move",U)),this._zooming&&this.fire(new j.Event("zoom",U)),this._rotating&&this.fire(new j.Event("rotate",U)),this._pitching&&this.fire(new j.Event("pitch",U))}_afterEase(U,te){if(this._easeId&&te&&this._easeId===te)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const be=this._zooming,Pe=this._rotating,Re=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,be&&this.fire(new j.Event("zoomend",U)),Pe&&this.fire(new j.Event("rotateend",U)),Re&&this.fire(new j.Event("pitchend",U)),this.fire(new j.Event("moveend",U))}flyTo(U,te){if(!U.essential&&j.exported.prefersReducedMotion){const or=j.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(or,te)}this.stop(),U=j.extend({offset:[0,0],speed:1.2,curve:1.42,easing:j.ease},U);const be=this.transform,Pe=this.getZoom(),Re=this.getBearing(),Be=this.getPitch(),Ne=this.getPadding(),qe="zoom"in U?j.clamp(+U.zoom,be.minZoom,be.maxZoom):Pe,Ye="bearing"in U?this._normalizeBearing(U.bearing,Re):Re,Je="pitch"in U?+U.pitch:Be,ut="padding"in U?U.padding:be.padding,gt=be.zoomScale(qe-Pe),It=j.pointGeometry.convert(U.offset);let kt=be.centerPoint.add(It);const At=be.pointLocation(kt),St=j.LngLat.convert(U.center||At);this._normalizeCenter(St);const Et=be.project(At),$t=be.project(St).sub(Et);let Ot=U.curve;const Jt=Math.max(be.width,be.height),Yt=Jt/gt,Gt=$t.mag();if("minZoom"in U){const or=j.clamp(Math.min(U.minZoom,Pe,qe),be.minZoom,be.maxZoom),tr=Jt/be.zoomScale(or-Pe);Ot=Math.sqrt(tr/Gt*2)}const Kt=Ot*Ot;function Wt(or){const tr=(Yt*Yt-Jt*Jt+(or?-1:1)*Kt*Kt*Gt*Gt)/(2*(or?Yt:Jt)*Kt*Gt);return Math.log(Math.sqrt(tr*tr+1)-tr)}function sn(or){return(Math.exp(or)-Math.exp(-or))/2}function mn(or){return(Math.exp(or)+Math.exp(-or))/2}const Wn=Wt(0);let pn=function(or){return mn(Wn)/mn(Wn+Ot*or)},zn=function(or){return Jt*((mn(Wn)*(sn(tr=Wn+Ot*or)/mn(tr))-sn(Wn))/Kt)/Gt;var tr},Nn=(Wt(1)-Wn)/Ot;if(Math.abs(Gt)<1e-6||!isFinite(Nn)){if(Math.abs(Jt-Yt)<1e-6)return this.easeTo(U,te);const or=Yt<Jt?-1:1;Nn=Math.abs(Math.log(Yt/Jt))/Ot,zn=function(){return 0},pn=function(tr){return Math.exp(or*Ot*tr)}}U.duration="duration"in U?+U.duration:1e3*Nn/("screenSpeed"in U?+U.screenSpeed/Ot:+U.speed),U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0);const er=Re!==Ye,kn=Je!==Be,Zn=!be.isPaddingEqual(ut),Ln=or=>tr=>{const pr=tr*Nn,yr=1/pn(pr);or.zoom=tr===1?qe:Pe+or.scaleZoom(yr),er&&(or.bearing=j.number(Re,Ye,tr)),kn&&(or.pitch=j.number(Be,Je,tr)),Zn&&(or.interpolatePadding(Ne,ut,tr),kt=or.centerPoint.add(It));const Ar=tr===1?St:or.unproject(Et.add($t.mult(zn(pr))).mult(yr));return or.setLocationAtPoint(or.renderWorldCopies?Ar.wrap():Ar,kt),or._updateCameraOnTerrain(),U.preloadOnly||this._fireMoveEvents(te),or};if(U.preloadOnly){const or=this._emulate(Ln,U.duration,be);return this._preloadTiles(or),this}return this._zooming=!0,this._rotating=er,this._pitching=kn,this._padding=Zn,this._prepareEase(te,!1),this._ease(Ln(be),()=>this._afterEase(te),U),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(U,te){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const be=this._onEaseEnd;this._onEaseEnd=void 0,be.call(this,te)}if(!U){const be=this.handlers;be&&be.stop(!1)}return this}_ease(U,te,be){be.animate===!1||be.duration===0?(U(1),te()):(this._easeStart=j.exported.now(),this._easeOptions=be,this._onEaseFrame=U,this._onEaseEnd=te,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const U=Math.min((j.exported.now()-this._easeStart)/this._easeOptions.duration,1),te=this._onEaseFrame;te&&te(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(U,te){U=j.wrap(U,-180,180);const be=Math.abs(U-te);return Math.abs(U-360-te)<be&&(U-=360),Math.abs(U+360-te)<be&&(U+=360),U}_normalizeCenter(U){const te=this.transform;if(!te.renderWorldCopies||te.maxBounds)return;const be=U.lng-te.center.lng;U.lng+=be>180?-360:be<-180?360:0}_emulate(U,te,be){const Pe=Math.ceil(15*te/1e3),Re=[],Be=U(be.clone());for(let Ne=0;Ne<=Pe;Ne++){const qe=Be(Ne/Pe);Re.push(qe.clone())}return Re}}class mo{constructor(U={}){this.options=U,j.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(U){const te=this.options&&this.options.compact;return this._map=U,this._container=Te("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Te("button","mapboxgl-ctrl-attrib-button",this._container),Te("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Te("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),te&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),te===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(U,te){const be=this._map._getUIString(`AttributionControl.${te}`);U.setAttribute("aria-label",be),U.removeAttribute("title"),U.firstElementChild&&U.firstElementChild.setAttribute("title",be)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let U=this._editLink;U||(U=this._editLink=this._container.querySelector(".mapbox-improve-map"));const te=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||j.config.ACCESS_TOKEN}];if(U){const be=te.reduce((Pe,Re,Be)=>(Re.value&&(Pe+=`${Re.key}=${Re.value}${Be<te.length-1?"&":""}`),Pe),"?");U.href=`${j.config.FEEDBACK_URL}/${be}#${zl(this._map,!0)}`,U.rel="noopener nofollow",this._setElementTitle(U,"MapFeedback")}}_updateData(U){!U||U.sourceDataType!=="metadata"&&U.sourceDataType!=="visibility"&&U.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let U=[];if(this._map.style.stylesheet){const Pe=this._map.style.stylesheet;this.styleOwner=Pe.owner,this.styleId=Pe.id}const te=this._map.style._sourceCaches;for(const Pe in te){const Re=te[Pe];if(Re.used){const Be=Re.getSource();Be.attribution&&U.indexOf(Be.attribution)<0&&U.push(Be.attribution)}}U.sort((Pe,Re)=>Pe.length-Re.length),U=U.filter((Pe,Re)=>{for(let Be=Re+1;Be<U.length;Be++)if(U[Be].indexOf(Pe)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?U=[...this.options.customAttribution,...U]:U.unshift(this.options.customAttribution));const be=U.join(" | ");be!==this._attribHTML&&(this._attribHTML=be,U.length?(this._innerContainer.innerHTML=be,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ya{constructor(){j.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(U){this._map=U,this._container=Te("div","mapboxgl-ctrl");const te=Te("a","mapboxgl-ctrl-logo");return te.target="_blank",te.rel="noopener nofollow",te.href="https://www.mapbox.com/",te.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),te.setAttribute("rel","noopener nofollow"),this._container.appendChild(te),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(U){U&&U.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const U=this._map.style._sourceCaches;if(Object.entries(U).length===0)return!0;for(const te in U){const be=U[te].getSource();if(be.hasOwnProperty("mapbox_logo")&&!be.mapbox_logo)return!1}return!0}_updateCompact(){const U=this._container.children;if(U.length){const te=U[0];this._map.getCanvasContainer().offsetWidth<250?te.classList.add("mapboxgl-compact"):te.classList.remove("mapboxgl-compact")}}}class Dc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(U){const te=++this._id;return this._queue.push({callback:U,id:te,cancelled:!1}),te}remove(U){const te=this._currentlyRunning,be=te?this._queue.concat(te):this._queue;for(const Pe of be)if(Pe.id===U)return void(Pe.cancelled=!0)}run(U=0){const te=this._currentlyRunning=this._queue;this._queue=[];for(const be of te)if(!be.cancelled&&(be.callback(U),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function va(de,U,te){if(de=new j.LngLat(de.lng,de.lat),U){const be=new j.LngLat(de.lng-360,de.lat),Pe=new j.LngLat(de.lng+360,de.lat),Re=360*Math.ceil(Math.abs(de.lng-te.center.lng)/360),Be=te.locationPoint(de).distSqr(U),Ne=U.x<0||U.y<0||U.x>te.width||U.y>te.height;te.locationPoint(be).distSqr(U)<Be&&(Ne||Math.abs(be.lng-te.center.lng)<Re)?de=be:te.locationPoint(Pe).distSqr(U)<Be&&(Ne||Math.abs(Pe.lng-te.center.lng)<Re)&&(de=Pe)}for(;Math.abs(de.lng-te.center.lng)>180;){const be=te.locationPoint(de);if(be.x>=0&&be.y>=0&&be.x<=te.width&&be.y<=te.height)break;de.lng>te.center.lng?de.lng-=360:de.lng+=360}return de}const nl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class jl extends j.Evented{constructor(U,te){if(super(),(U instanceof j.window.HTMLElement||te)&&(U=j.extend({element:U},te)),j.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=U&&U.anchor||"center",this._color=U&&U.color||"#3FB1CE",this._scale=U&&U.scale||1,this._draggable=U&&U.draggable||!1,this._clickTolerance=U&&U.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=U&&U.rotation||0,this._rotationAlignment=U&&U.rotationAlignment||"auto",this._pitchAlignment=U&&U.pitchAlignment&&U.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),U&&U.element)this._element=U.element,this._offset=j.pointGeometry.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0,this._element=Te("div");const Pe=41,Re=27,Be=Se("svg",{display:"block",height:Pe*this._scale+"px",width:Re*this._scale+"px",viewBox:`0 0 ${Re} ${Pe}`},this._element),Ne=Se("radialGradient",{id:"shadowGradient"},Se("defs",{},Be));Se("stop",{offset:"10%","stop-opacity":.4},Ne),Se("stop",{offset:"100%","stop-opacity":.05},Ne),Se("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Be),Se("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Be),Se("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Be),Se("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Be),this._offset=j.pointGeometry.convert(U&&U.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Pe=>{Pe.preventDefault()}),this._element.addEventListener("mousedown",Pe=>{Pe.preventDefault()});const be=this._element.classList;for(const Pe in nl)be.remove(`mapboxgl-marker-anchor-${Pe}`);be.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(U){return U===this._map||(this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._updateMoving),U.on("moveend",this._update),U.on("remove",this._clearFadeTimer),U._addMarker(this),this.setDraggable(this._draggable),this._update(),U.on("click",this._onMapClick)),this}remove(){const U=this._map;return U&&(U.off("click",this._onMapClick),U.off("move",this._updateMoving),U.off("moveend",this._update),U.off("mousedown",this._addDragHandler),U.off("touchstart",this._addDragHandler),U.off("mouseup",this._onUp),U.off("touchend",this._onUp),U.off("mousemove",this._onMove),U.off("touchmove",this._onMove),U.off("remove",this._clearFadeTimer),U._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(U){return this._lngLat=j.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){const Pe=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Pe,-1*(38.1-13.5+Pe)],"bottom-right":[-Pe,-1*(38.1-13.5+Pe)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=U,U._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(U){const te=U.code,be=U.charCode||U.keyCode;te!=="Space"&&te!=="Enter"&&be!==32&&be!==13||this.togglePopup()}_onMapClick(U){const te=U.originalEvent.target,be=this._element;this._popup&&(te===be||be.contains(te))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const U=this._popup;return U?(U.isOpen()?(U.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(U.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const U=this._map;if(!U)return!1;const te=U.unproject(this._pos),be=U.getFreeCameraOptions();if(!be.position)return!1;const Pe=be.position.toLngLat();return Pe.distanceTo(te)<.9*Pe.distanceTo(this._lngLat)}_evaluateOpacity(){const U=this._map;if(!U)return;const te=this._pos;if(!te||te.x<0||te.x>U.transform.width||te.y<0||te.y>U.transform.height)return void this._clearFadeTimer();const be=U.unproject(te);let Pe;U._showingGlobe()&&j.isLngLatBehindGlobe(U.transform,this._lngLat)?Pe=0:(Pe=1-U._queryFogOpacity(be),U.transform._terrainEnabled()&&U.getTerrain()&&this._behindTerrain()&&(Pe*=.2)),this._element.style.opacity=`${Pe}`,this._element.style.pointerEvents=Pe>0?"auto":"none",this._popup&&this._popup._setOpacity(Pe),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const U=this._pos;if(!U||!this._map)return;const te=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${U.x}px,${U.y}px)
            ${nl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${te.x}px,${te.y}px)
        `}_calculateXYTransform(){const U=this._pos,te=this._map,be=this.getPitchAlignment();if(!te||!U||be!=="map")return"";if(!te._showingGlobe()){const qe=te.getPitch();return qe?`rotateX(${qe}deg)`:""}const Pe=j.radToDeg(j.globeTiltAtLngLat(te.transform,this._lngLat)),Re=U.sub(j.globeCenterToScreenPoint(te.transform)),Be=Math.abs(Re.x)+Math.abs(Re.y);if(Be===0)return"";const Ne=Pe/Be;return`rotateX(${-Re.y*Ne}deg) rotateY(${Re.x*Ne}deg)`}_calculateZTransform(){const U=this._pos,te=this._map;if(!te||!U)return"";let be=0;const Pe=this.getRotationAlignment();if(Pe==="map")if(te._showingGlobe()){const Re=te.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Be=te.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(Re);be=j.radToDeg(Math.atan2(Be.y,Be.x))-90}else be=-te.getBearing();else if(Pe==="horizon"){const Re=j.smoothstep(4,6,te.getZoom()),Be=j.globeCenterToScreenPoint(te.transform);Be.y+=Re*te.transform.height;const Ne=U.sub(Be),qe=j.radToDeg(Math.atan2(Ne.y,Ne.x));be=(qe>90?qe-270:qe+90)*(1-Re)}return be+=this._rotation,be?`rotateZ(${be}deg)`:""}_update(U){j.window.cancelAnimationFrame(this._updateFrameId);const te=this._map;te&&(te.transform.renderWorldCopies&&(this._lngLat=va(this._lngLat,this._pos,te.transform)),this._pos=te.project(this._lngLat),U===!0?this._updateFrameId=j.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),te._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(te._showingGlobe()||te.getTerrain()||te.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(U){return this._offset=j.pointGeometry.convert(U),this._update(),this}_onMove(U){const te=this._map;if(te){if(!this._isDragging){const be=this._clickTolerance||te._clickTolerance;this._isDragging=U.point.dist(this._pointerdownPos)>=be}this._isDragging&&(this._pos=U.point.sub(this._positionDelta),this._lngLat=te.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new j.Event("dragstart"))),this.fire(new j.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const U=this._map;U&&(U.off("mousemove",this._onMove),U.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new j.Event("dragend")),this._state="inactive"}_addDragHandler(U){const te=this._map;te&&this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos),this._pointerdownPos=U.point,this._state="pending",te.on("mousemove",this._onMove),te.on("touchmove",this._onMove),te.once("mouseup",this._onUp),te.once("touchend",this._onUp))}setDraggable(U){this._draggable=!!U;const te=this._map;return te&&(U?(te.on("mousedown",this._addDragHandler),te.on("touchstart",this._addDragHandler)):(te.off("mousedown",this._addDragHandler),te.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(U){return this._rotation=U||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(U){return this._rotationAlignment=U||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(U){return this._pitchAlignment=U||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class ia{constructor(U){this.jumpTo(U)}getValue(U){if(U<=this._startTime)return this._start;if(U>=this._endTime)return this._end;const te=j.easeCubicInOut((U-this._startTime)/(this._endTime-this._startTime));return this._start*(1-te)+this._end*te}isEasing(U){return U>=this._startTime&&U<=this._endTime}jumpTo(U){this._startTime=-1/0,this._endTime=-1/0,this._start=U,this._end=U}easeTo(U,te,be){this._start=this.getValue(te),this._end=U,this._startTime=te,this._endTime=te+be}}const Lc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ul={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Do(de){de.parentNode&&de.parentNode.removeChild(de)}const Bc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vl{constructor(U,te,be=!1){this._clickTolerance=10,this.element=te,this.mouseRotate=new na({clickTolerance:U.dragRotate._mouseRotate._clickTolerance}),this.map=U,be&&(this.mousePitch=new qi({clickTolerance:U.dragRotate._mousePitch._clickTolerance})),j.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),te.addEventListener("mousedown",this.mousedown),te.addEventListener("touchstart",this.touchstart,{passive:!1}),te.addEventListener("touchmove",this.touchmove),te.addEventListener("touchend",this.touchend),te.addEventListener("touchcancel",this.reset)}down(U,te){this.mouseRotate.mousedown(U,te),this.mousePitch&&this.mousePitch.mousedown(U,te),Ue()}move(U,te){const be=this.map,Pe=this.mouseRotate.mousemoveWindow(U,te),Re=Pe&&Pe.bearingDelta;if(Re&&be.setBearing(be.getBearing()+Re),this.mousePitch){const Be=this.mousePitch.mousemoveWindow(U,te),Ne=Be&&Be.pitchDelta;Ne&&be.setPitch(be.getPitch()+Ne)}}off(){const U=this.element;U.removeEventListener("mousedown",this.mousedown),U.removeEventListener("touchstart",this.touchstart,{passive:!1}),U.removeEventListener("touchmove",this.touchmove),U.removeEventListener("touchend",this.touchend),U.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){De(),j.window.removeEventListener("mousemove",this.mousemove),j.window.removeEventListener("mouseup",this.mouseup)}mousedown(U){this.down(j.extend({},U,{ctrlKey:!0,preventDefault:()=>U.preventDefault()}),Ke(this.element,U)),j.window.addEventListener("mousemove",this.mousemove),j.window.addEventListener("mouseup",this.mouseup)}mousemove(U){this.move(U,Ke(this.element,U))}mouseup(U){this.mouseRotate.mouseupWindow(U),this.mousePitch&&this.mousePitch.mouseupWindow(U),this.offTemp()}touchstart(U){U.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=He(this.element,U.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>U.preventDefault()},this._startPos))}touchmove(U){U.targetTouches.length!==1?this.reset():(this._lastPos=He(this.element,U.targetTouches)[0],this.move({preventDefault:()=>U.preventDefault()},this._lastPos))}touchend(U){U.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Hr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Fc={maxWidth:100,unit:"metric"};function Gl(de,U,te){const be=rl(U),Pe=be/U,Re={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[te];this._map._requestDomTask(()=>{this._container.style.width=de*Pe+"px",this._container.innerHTML=`${be}&nbsp;${Re}`})}function rl(de){const U=Math.pow(10,`${Math.floor(de)}`.length-1);let te=de/U;return te=te>=10?10:te>=5?5:te>=3?3:te>=2?2:te>=1?1:function(be){const Pe=Math.pow(10,Math.ceil(-Math.log(be)/Math.LN10));return Math.round(be*Pe)/Pe}(te),U*te}const Nc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function il(de=new j.pointGeometry(0,0),U="bottom"){if(typeof de=="number"){const te=Math.round(Math.sqrt(.5*Math.pow(de,2)));switch(U){case"top":return new j.pointGeometry(0,de);case"top-left":return new j.pointGeometry(te,te);case"top-right":return new j.pointGeometry(-te,te);case"bottom":return new j.pointGeometry(0,-de);case"bottom-left":return new j.pointGeometry(te,-te);case"bottom-right":return new j.pointGeometry(-te,-te);case"left":return new j.pointGeometry(de,0);case"right":return new j.pointGeometry(-de,0)}return new j.pointGeometry(0,0)}return de instanceof j.pointGeometry||Array.isArray(de)?j.pointGeometry.convert(de):j.pointGeometry.convert(de[U]||[0,0])}const hs={version:j.version,supported:he,setRTLTextPlugin:j.setRTLTextPlugin,getRTLTextPluginStatus:j.getRTLTextPluginStatus,Map:class extends $c{constructor(de){if((de=j.extend({},Ul,de)).minZoom!=null&&de.maxZoom!=null&&de.minZoom>de.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(de.minPitch!=null&&de.maxPitch!=null&&de.minPitch>de.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(de.minPitch!=null&&de.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(de.maxPitch!=null&&de.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(de.antialias&&j.isSafariWithAntialiasingBug(j.window)&&(de.antialias=!1,j.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xs(de.minZoom,de.maxZoom,de.minPitch,de.maxPitch,de.renderWorldCopies),de),this._interactive=de.interactive,this._minTileCacheSize=de.minTileCacheSize,this._maxTileCacheSize=de.maxTileCacheSize,this._failIfMajorPerformanceCaveat=de.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=de.preserveDrawingBuffer,this._antialias=de.antialias,this._trackResize=de.trackResize,this._bearingSnap=de.bearingSnap,this._refreshExpiredTiles=de.refreshExpiredTiles,this._fadeDuration=de.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=de.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=de.collectResourceTiming,this._optimizeForTerrain=de.optimizeForTerrain,this._language=de.language==="auto"?j.window.navigator.language:de.language,this._worldview=de.worldview,this._renderTaskQueue=new Dc,this._domRenderTaskQueue=new Dc,this._controls=[],this._markers=[],this._mapId=j.uniqueId(),this._locale=j.extend({},Lc,de.locale),this._clickTolerance=de.clickTolerance,this._cooperativeGestures=de.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ia(0),this._useExplicitProjection=!1,this._requestManager=new j.RequestManager(de.transformRequest,de.accessToken,de.testMode),this._silenceAuthErrors=!!de.testMode,typeof de.container=="string"){if(this._container=j.window.document.getElementById(de.container),!this._container)throw new Error(`Container '${de.container}' not found.`)}else{if(!(de.container instanceof j.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=de.container}if(this._container.childNodes.length>0&&j.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),de.maxBounds&&this.setMaxBounds(de.maxBounds),j.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),j.window!==void 0&&(j.window.addEventListener("online",this._onWindowOnline,!1),j.window.addEventListener("resize",this._onWindowResize,!1),j.window.addEventListener("orientationchange",this._onWindowResize,!1),j.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Rc(this,de),this._localFontFamily=de.localFontFamily,this._localIdeographFontFamily=de.localIdeographFontFamily,de.style&&this.setStyle(de.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),de.projection&&this.setProjection(de.projection),this._hash=de.hash&&new gu(typeof de.hash=="string"&&de.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:de.center,zoom:de.zoom,bearing:de.bearing,pitch:de.pitch}),de.bounds&&(this.resize(),this.fitBounds(de.bounds,j.extend({},de.fitBoundsOptions,{duration:0})))),this.resize(),de.attributionControl&&this.addControl(new mo({customAttribution:de.customAttribution})),this._logoControl=new ya,this.addControl(this._logoControl,de.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",U=>{this._update(U.dataType==="style"),this.fire(new j.Event(`${U.dataType}data`,U))}),this.on("dataloading",U=>{this.fire(new j.Event(`${U.dataType}dataloading`,U))})}_getMapId(){return this._mapId}addControl(de,U){if(U===void 0&&(U=de.getDefaultPosition?de.getDefaultPosition():"top-right"),!de||!de.onAdd)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const te=de.onAdd(this);this._controls.push(de);const be=this._controlPositions[U];return U.indexOf("bottom")!==-1?be.insertBefore(te,be.firstChild):be.appendChild(te),this}removeControl(de){if(!de||!de.onRemove)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const U=this._controls.indexOf(de);return U>-1&&this._controls.splice(U,1),de.onRemove(this),this}hasControl(de){return this._controls.indexOf(de)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(de){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const U=!this._moving;return U&&this.fire(new j.Event("movestart",de)).fire(new j.Event("move",de)),this.fire(new j.Event("resize",de)),U&&this.fire(new j.Event("moveend",de)),this}getBounds(){return this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(de){return this.transform.setMaxBounds(j.LngLatBounds.convert(de)),this._update()}setMinZoom(de){if((de=de==null?-2:de)>=-2&&de<=this.transform.maxZoom)return this.transform.minZoom=de,this._update(),this.getZoom()<de?this.setZoom(de):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(de){if((de=de==null?22:de)>=this.transform.minZoom)return this.transform.maxZoom=de,this._update(),this.getZoom()>de?this.setZoom(de):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(de){if((de=de==null?0:de)<0)throw new Error("minPitch must be greater than or equal to 0");if(de>=0&&de<=this.transform.maxPitch)return this.transform.minPitch=de,this._update(),this.getPitch()<de?this.setPitch(de):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(de){if((de=de==null?85:de)>85)throw new Error("maxPitch must be less than or equal to 85");if(de>=this.transform.minPitch)return this.transform.maxPitch=de,this._update(),this.getPitch()>de?this.setPitch(de):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(de){return this.transform.renderWorldCopies=de,this._update()}getLanguage(){return this._language}setLanguage(de){if(this._language=de==="auto"?j.window.navigator.language:de,this.style)for(const U in this.style._sourceCaches){const te=this.style._sourceCaches[U]._source;te._setLanguage&&te._setLanguage(this._language)}for(const U of this._controls)U._setLanguage&&U._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(de){if(this._worldview=de,this.style)for(const U in this.style._sourceCaches){const te=this.style._sourceCaches[U]._source;te._setWorldview&&te._setWorldview(de)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(de){return this._lazyInitEmptyStyle(),de?typeof de=="string"&&(de={name:de}):de=null,this._useExplicitProjection=!!de,this._prioritizeAndUpdateProjection(de,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const de=this.transform,U=de.projection.name;let te;U==="globe"&&de.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?(de.setMercatorFromTransition(),te=!0):U==="mercator"&&de.zoom<j.GLOBE_ZOOM_THRESHOLD_MAX&&(de.setProjection({name:"globe"}),te=!0),te&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(de,U){return this._updateProjection(de||U||{name:"mercator"})}_updateProjection(de){let U;if(U=de.name==="globe"&&this.transform.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(de),this.style.applyProjectionUpdate(),U){this.painter.clearBackgroundTiles();for(const te in this.style._sourceCaches)this.style._sourceCaches[te].clearTiles();this._update(!0)}return this}project(de){return this.transform.locationPoint3D(j.LngLat.convert(de))}unproject(de){return this.transform.pointLocation3D(j.pointGeometry.convert(de))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(de,U,te){if(de==="mouseenter"||de==="mouseover"){let be=!1;const Pe=Be=>{const Ne=U.filter(Ye=>this.getLayer(Ye)),qe=Ne.length?this.queryRenderedFeatures(Be.point,{layers:Ne}):[];qe.length?be||(be=!0,te.call(this,new Ki(de,this,Be.originalEvent,{features:qe}))):be=!1},Re=()=>{be=!1};return{layers:new Set(U),listener:te,delegates:{mousemove:Pe,mouseout:Re}}}if(de==="mouseleave"||de==="mouseout"){let be=!1;const Pe=Be=>{const Ne=U.filter(qe=>this.getLayer(qe));(Ne.length?this.queryRenderedFeatures(Be.point,{layers:Ne}):[]).length?be=!0:be&&(be=!1,te.call(this,new Ki(de,this,Be.originalEvent)))},Re=Be=>{be&&(be=!1,te.call(this,new Ki(de,this,Be.originalEvent)))};return{layers:new Set(U),listener:te,delegates:{mousemove:Pe,mouseout:Re}}}{const be=Pe=>{const Re=U.filter(Ne=>this.getLayer(Ne)),Be=Re.length?this.queryRenderedFeatures(Pe.point,{layers:Re}):[];Be.length&&(Pe.features=Be,te.call(this,Pe),delete Pe.features)};return{layers:new Set(U),listener:te,delegates:{[de]:be}}}}on(de,U,te){if(te===void 0)return super.on(de,U);Array.isArray(U)||(U=[U]);const be=this._createDelegatedListener(de,U,te);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[de]=this._delegatedListeners[de]||[],this._delegatedListeners[de].push(be);for(const Pe in be.delegates)this.on(Pe,be.delegates[Pe]);return this}once(de,U,te){if(te===void 0)return super.once(de,U);Array.isArray(U)||(U=[U]);const be=this._createDelegatedListener(de,U,te);for(const Pe in be.delegates)this.once(Pe,be.delegates[Pe]);return this}off(de,U,te){if(te===void 0)return super.off(de,U);U=new Set(Array.isArray(U)?U:[U]);const be=(Re,Be)=>{if(Re.size!==Be.size)return!1;for(const Ne of Re)if(!Be.has(Ne))return!1;return!0},Pe=this._delegatedListeners?this._delegatedListeners[de]:void 0;return Pe&&(Re=>{for(let Be=0;Be<Re.length;Be++){const Ne=Re[Be];if(Ne.listener===te&&be(Ne.layers,U)){for(const qe in Ne.delegates)this.off(qe,Ne.delegates[qe]);return Re.splice(Be,1),this}}})(Pe),this}queryRenderedFeatures(de,U){return this.style?(U!==void 0||de===void 0||de instanceof j.pointGeometry||Array.isArray(de)||(U=de,de=void 0),this.style.queryRenderedFeatures(de=de||[[0,0],[this.transform.width,this.transform.height]],U=U||{},this.transform)):[]}querySourceFeatures(de,U){return this.style.querySourceFeatures(de,U)}queryTerrainElevation(de,U){const te=this.transform.elevation;return te?(U=j.extend({},{exaggerated:!0},U),te.getAtPoint(j.MercatorCoordinate.fromLngLat(de),null,U.exaggerated)):null}setStyle(de,U){return(U=j.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},U)).diff!==!1&&U.localIdeographFontFamily===this._localIdeographFontFamily&&U.localFontFamily===this._localFontFamily&&this.style&&de?(this._diffStyle(de,U),this):(this._localIdeographFontFamily=U.localIdeographFontFamily,this._localFontFamily=U.localFontFamily,this._updateStyle(de,U))}_getUIString(de){const U=this._locale[de];if(U==null)throw new Error(`Missing UI string '${de}'`);return U}_updateStyle(de,U){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),de&&(this.style=new xo(this,U||{}),this.style.setEventedParent(this,{style:this.style}),typeof de=="string"?this.style.loadURL(de):this.style.loadJSON(de)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new xo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(de,U){if(typeof de=="string"){const te=this._requestManager.normalizeStyleURL(de),be=this._requestManager.transformRequest(te,j.ResourceType.Style);j.getJSON(be,(Pe,Re)=>{Pe?this.fire(new j.ErrorEvent(Pe)):Re&&this._updateDiff(Re,U)})}else typeof de=="object"&&this._updateDiff(de,U)}_updateDiff(de,U){try{this.style.setState(de)&&this._update(!0)}catch(te){j.warnOnce(`Unable to perform style diff: ${te.message||te.error||te}.  Rebuilding the style from scratch.`),this._updateStyle(de,U)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(j.warnOnce("There is no style added to the map."),!1)}addSource(de,U){return this._lazyInitEmptyStyle(),this.style.addSource(de,U),this._update(!0)}isSourceLoaded(de){return!!this.style&&this.style._isSourceCacheLoaded(de)}areTilesLoaded(){const de=this.style&&this.style._sourceCaches;for(const U in de){const te=de[U]._tiles;for(const be in te){const Pe=te[be];if(Pe.state!=="loaded"&&Pe.state!=="errored")return!1}}return!0}addSourceType(de,U,te){this._lazyInitEmptyStyle(),this.style.addSourceType(de,U,te)}removeSource(de){return this.style.removeSource(de),this._updateTerrain(),this._update(!0)}getSource(de){return this.style.getSource(de)}addImage(de,U,{pixelRatio:te=1,sdf:be=!1,stretchX:Pe,stretchY:Re,content:Be}={}){if(this._lazyInitEmptyStyle(),U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap){const{width:Ne,height:qe,data:Ye}=j.exported.getImageData(U);this.style.addImage(de,{data:new j.RGBAImage({width:Ne,height:qe},Ye),pixelRatio:te,stretchX:Pe,stretchY:Re,content:Be,sdf:be,version:0})}else if(U.width===void 0||U.height===void 0)this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Ne,height:qe}=U,Ye=U;this.style.addImage(de,{data:new j.RGBAImage({width:Ne,height:qe},new Uint8Array(Ye.data)),pixelRatio:te,stretchX:Pe,stretchY:Re,content:Be,sdf:be,version:0,userImage:Ye}),Ye.onAdd&&Ye.onAdd(this,de)}}updateImage(de,U){const te=this.style.getImage(de);if(!te)return void this.fire(new j.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const be=U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap?j.exported.getImageData(U):U,{width:Pe,height:Re}=be;Pe!==void 0&&Re!==void 0?Pe===te.data.width&&Re===te.data.height?(te.data.replace(be.data,!(U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap)),this.style.updateImage(de,te)):this.fire(new j.ErrorEvent(new Error(`The width and height of the updated image (${Pe}, ${Re})
                must be that same as the previous version of the image
                (${te.data.width}, ${te.data.height})`))):this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(de){return de?!!this.style.getImage(de):(this.fire(new j.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(de){this.style.removeImage(de)}loadImage(de,U){j.getImage(this._requestManager.transformRequest(de,j.ResourceType.Image),(te,be)=>{U(te,be instanceof j.window.HTMLImageElement?j.exported.getImageData(be):be)})}listImages(){return this.style.listImages()}addLayer(de,U){return this._lazyInitEmptyStyle(),this.style.addLayer(de,U),this._update(!0)}moveLayer(de,U){return this.style.moveLayer(de,U),this._update(!0)}removeLayer(de){return this.style.removeLayer(de),this._update(!0)}getLayer(de){return this.style.getLayer(de)}setLayerZoomRange(de,U,te){return this.style.setLayerZoomRange(de,U,te),this._update(!0)}setFilter(de,U,te={}){return this.style.setFilter(de,U,te),this._update(!0)}getFilter(de){return this.style.getFilter(de)}setPaintProperty(de,U,te,be={}){return this.style.setPaintProperty(de,U,te,be),this._update(!0)}getPaintProperty(de,U){return this.style.getPaintProperty(de,U)}setLayoutProperty(de,U,te,be={}){return this.style.setLayoutProperty(de,U,te,be),this._update(!0)}getLayoutProperty(de,U){return this.style.getLayoutProperty(de,U)}setLight(de,U={}){return this._lazyInitEmptyStyle(),this.style.setLight(de,U),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(de){return this._lazyInitEmptyStyle(),!de&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(de),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(de){return this._lazyInitEmptyStyle(),this.style.setFog(de),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(de){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(j.LngLat.convert(de),this.transform):0}setFeatureState(de,U){return this.style.setFeatureState(de,U),this._update()}removeFeatureState(de,U){return this.style.removeFeatureState(de,U),this._update()}getFeatureState(de){return this.style.getFeatureState(de)}_updateContainerDimensions(){if(!this._container)return;const de=this._container.getBoundingClientRect().width||400,U=this._container.getBoundingClientRect().height||300;let te,be,Pe,Re=this._container;for(;Re&&(!be||!Pe);){const Be=j.window.getComputedStyle(Re).transform;Be&&Be!=="none"&&(te=Be.match(/matrix.*\((.+)\)/)[1].split(", "),te[0]&&te[0]!=="0"&&te[0]!=="1"&&(be=te[0]),te[3]&&te[3]!=="0"&&te[3]!=="1"&&(Pe=te[3])),Re=Re.parentElement}this._containerWidth=be?Math.abs(de/be):de,this._containerHeight=Pe?Math.abs(U/Pe):U}_detectMissingCSS(){j.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&j.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const de=this._container;de.classList.add("mapboxgl-map"),(this._missingCSSCanary=Te("div","mapboxgl-canary",de)).style.visibility="hidden",this._detectMissingCSS();const U=this._canvasContainer=Te("div","mapboxgl-canvas-container",de);this._interactive&&U.classList.add("mapboxgl-interactive"),this._canvas=Te("canvas","mapboxgl-canvas",U),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const te=this._controlContainer=Te("div","mapboxgl-control-container",de),be=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Pe=>{be[Pe]=Te("div",`mapboxgl-ctrl-${Pe}`,te)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(de,U){const te=j.exported.devicePixelRatio||1;this._canvas.width=te*Math.ceil(de),this._canvas.height=te*Math.ceil(U),this._canvas.style.width=`${de}px`,this._canvas.style.height=`${U}px`}_addMarker(de){this._markers.push(de)}_removeMarker(de){const U=this._markers.indexOf(de);U!==-1&&this._markers.splice(U,1)}_setupPainter(){const de=j.extend({},he.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),U=this._canvas.getContext("webgl",de)||this._canvas.getContext("experimental-webgl",de);U?(j.storeAuthState(U,!0),this.painter=new Ac(U,this.transform),this.on("data",te=>{te.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),j.exported$1.testSupport(U)):this.fire(new j.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(de){de.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new j.Event("webglcontextlost",{originalEvent:de}))}_contextRestored(de){this._setupPainter(),this.resize(),this._update(),this.fire(new j.Event("webglcontextrestored",{originalEvent:de}))}_onMapScroll(de){if(de.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(de){return this.style?(this._styleDirty=this._styleDirty||de,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(de){return this._update(),this._renderTaskQueue.add(de)}_cancelRenderFrame(de){this._renderTaskQueue.remove(de)}_requestDomTask(de){!this.loaded()||this.loaded()&&!this.isMoving()?de():this._domRenderTaskQueue.add(de)}_render(de){let U;const te=this.painter.context.extTimerQuery,be=j.exported.now();if(this.listens("gpu-timing-frame")&&(U=te.createQueryEXT(),te.beginQueryEXT(te.TIME_ELAPSED_EXT,U)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(de),this._domRenderTaskQueue.run(de),this._removed)return;this._updateProjectionTransition();let Pe=!1;const Re=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const qe=this.transform.zoom,Ye=this.transform.pitch,Je=j.exported.now();this.style.zoomHistory.update(qe,Je);const ut=new j.EvaluationParameters(qe,{now:Je,fadeDuration:Re,pitch:Ye,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),gt=ut.crossFadingFactor();gt===1&&gt===this._crossFadingFactor||(Pe=!0,this._crossFadingFactor=gt),this.style.update(ut)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Be=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Be=this._updateAverageElevation(be),this.style._updateSources(this.transform),this._forceMarkerUpdate()):Be=this._updateAverageElevation(be),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Re,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Re,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new j.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new j.Event("load"))),this.style&&(this.style.hasTransitions()||Pe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),U){const qe=j.exported.now()-be;te.endQueryEXT(te.TIME_ELAPSED_EXT,U),setTimeout(()=>{const Ye=te.getQueryObjectEXT(U,te.QUERY_RESULT_EXT)/1e6;te.deleteQueryEXT(U),this.fire(new j.Event("gpu-timing-frame",{cpuTime:qe,gpuTime:Ye})),j.window.performance.mark("frame-gpu",{startTime:be,detail:{gpuTime:Ye}})},50)}if(this.listens("gpu-timing-layer")){const qe=this.painter.collectGpuTimers();setTimeout(()=>{const Ye=this.painter.queryGpuTimers(qe);this.fire(new j.Event("gpu-timing-layer",{layerTimes:Ye}))},50)}if(this.listens("gpu-timing-deferred-render")){const qe=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Ye=this.painter.queryGpuTimeDeferredRender(qe);this.fire(new j.Event("gpu-timing-deferred-render",{gpuTime:Ye}))},50)}const Ne=this._sourcesDirty||this._styleDirty||this._placementDirty||Be;if(Ne||this._repaint)this.triggerRepaint();else{const qe=!this.isMoving()&&this.loaded();if(qe&&(Be=this._updateAverageElevation(be,!0)),Be)this.triggerRepaint();else if(this._triggerFrame(!1),qe&&(this.fire(new j.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Ye=this._calculateSpeedIndex();this.fire(new j.Event("speedindexcompleted",{speedIndex:Ye})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Ne||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const de of this._markers)de._update()}_updateAverageElevation(de,U=!1){const te=be=>(this.transform.averageElevation=be,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&te(0);if((U||de-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(de)){const be=this.transform.averageElevation;let Pe=this.transform.sampleAverageElevation(),Re=!1;this.transform.elevation&&(Re=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Pe)?Pe=0:this._averageElevationLastSampledAt=de;const Be=Math.abs(be-Pe);if(Be>1){if(this._isInitialLoad||Re)return this._averageElevation.jumpTo(Pe),te(Pe);this._averageElevation.easeTo(Pe,de,300)}else if(Be>1e-4)return this._averageElevation.jumpTo(Pe),te(Pe)}return!!this._averageElevation.isEasing(de)&&te(this._averageElevation.getValue(de))}_authenticate(){j.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,de=>{if(de&&(de.message===j.AUTH_ERR_MSG||de.status===401)){const U=this.painter.context.gl;j.storeAuthState(U,!1),this._logoControl instanceof ya&&this._logoControl._updateLogo(),U&&U.clear(U.DEPTH_BUFFER_BIT|U.COLOR_BUFFER_BIT|U.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new j.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),j.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const de=this.painter.canvasCopy(),U=this.painter.getCanvasCopiesAndTimestamps();U.timeStamps.push(performance.now());const te=this.painter.context.gl,be=te.createFramebuffer();function Pe(Re){te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Re,0);const Be=new Uint8Array(te.drawingBufferWidth*te.drawingBufferHeight*4);return te.readPixels(0,0,te.drawingBufferWidth,te.drawingBufferHeight,te.RGBA,te.UNSIGNED_BYTE,Be),Be}return te.bindFramebuffer(te.FRAMEBUFFER,be),this._canvasPixelComparison(Pe(de),U.canvasCopies.map(Pe),U.timeStamps)}_canvasPixelComparison(de,U,te){let be=te[1]-te[0];const Pe=de.length/4;for(let Re=0;Re<U.length;Re++){const Be=U[Re];let Ne=0;for(let qe=0;qe<Be.length;qe+=4)Be[qe]===de[qe]&&Be[qe+1]===de[qe+1]&&Be[qe+2]===de[qe+2]&&Be[qe+3]===de[qe+3]&&(Ne+=1);be+=(te[Re+2]-te[Re+1])*(1-Ne/Pe)}return be}remove(){this._hash&&this._hash.remove();for(const U of this._controls)U.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),j.window!==void 0&&(j.window.removeEventListener("resize",this._onWindowResize,!1),j.window.removeEventListener("orientationchange",this._onWindowResize,!1),j.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.removeEventListener("online",this._onWindowOnline,!1));const de=this.painter.context.gl.getExtension("WEBGL_lose_context");de&&de.loseContext(),Do(this._canvasContainer),Do(this._controlContainer),Do(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),j.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new j.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(de){this._renderNextFrame=this._renderNextFrame||de,this.style&&!this._frame&&(this._frame=j.exported.frame(U=>{const te=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,te&&this._render(U)}))}_preloadTiles(de){const U=this.style?Object.values(this.style._sourceCaches):[];return j.asyncAll(U,(te,be)=>te._preloadTiles(de,be),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(de){this._trackResize&&this.resize({originalEvent:de})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(de){this._showTileBoundaries!==de&&(this._showTileBoundaries=de,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(de){this._showTerrainWireframe!==de&&(this._showTerrainWireframe=de,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(de){this._speedIndexTiming!==de&&(this._speedIndexTiming=de,this._update())}get showPadding(){return!!this._showPadding}set showPadding(de){this._showPadding!==de&&(this._showPadding=de,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(de){this._showCollisionBoxes!==de&&(this._showCollisionBoxes=de,de?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(de){this._showOverdrawInspector!==de&&(this._showOverdrawInspector=de,this._update())}get repaint(){return!!this._repaint}set repaint(de){this._repaint!==de&&(this._repaint=de,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(de){this._vertices=de,this._update()}_setCacheLimits(de,U){j.setCacheLimits(de,U)}get version(){return j.version}},NavigationControl:class{constructor(de){this.options=j.extend({},Bc,de),this._container=Te("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",U=>U.preventDefault()),this.options.showZoom&&(j.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",U=>{this._map&&this._map.zoomIn({},{originalEvent:U})}),Te("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",U=>{this._map&&this._map.zoomOut({},{originalEvent:U})}),Te("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(j.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",U=>{const te=this._map;te&&(this.options.visualizePitch?te.resetNorthPitch({},{originalEvent:U}):te.resetNorth({},{originalEvent:U}))}),this._compassIcon=Te("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const de=this._map;if(!de)return;const U=de.getZoom(),te=U===de.getMaxZoom(),be=U===de.getMinZoom();this._zoomInButton.disabled=te,this._zoomOutButton.disabled=be,this._zoomInButton.setAttribute("aria-disabled",te.toString()),this._zoomOutButton.setAttribute("aria-disabled",be.toString())}_rotateCompassArrow(){const de=this._map;if(!de)return;const U=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(de.transform.pitch*(Math.PI/180)),.5)}) rotateX(${de.transform.pitch}deg) rotateZ(${de.transform.angle*(180/Math.PI)}deg)`:`rotate(${de.transform.angle*(180/Math.PI)}deg)`;de._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=U)})}onAdd(de){return this._map=de,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),de.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&de.on("pitch",this._rotateCompassArrow),de.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vl(de,this._compass,this.options.visualizePitch)),this._container}onRemove(){const de=this._map;de&&(this._container.remove(),this.options.showZoom&&de.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&de.off("pitch",this._rotateCompassArrow),de.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(de,U){const te=Te("button",de,this._container);return te.type="button",te.addEventListener("click",U),te}_setButtonTitle(de,U){if(!this._map)return;const te=this._map._getUIString(`NavigationControl.${U}`);de.setAttribute("aria-label",te),de.firstElementChild&&de.firstElementChild.setAttribute("title",te)}},GeolocateControl:class extends j.Evented{constructor(de){super(),this.options=j.extend({geolocation:j.window.navigator.geolocation},Hr,de),j.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ks(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(de){return this._map=de,this._container=Te("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(de){this._supportsGeolocation!==void 0?de(this._supportsGeolocation):j.window.navigator.permissions!==void 0?j.window.navigator.permissions.query({name:"geolocation"}).then(U=>{this._supportsGeolocation=U.state!=="denied",de(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,de(this._supportsGeolocation))}_isOutOfMapMaxBounds(de){const U=this._map.getMaxBounds(),te=de.coords;return!!U&&(te.longitude<U.getWest()||te.longitude>U.getEast()||te.latitude<U.getSouth()||te.latitude>U.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(de){if(this._map){if(this._isOutOfMapMaxBounds(de))return this._setErrorState(),this.fire(new j.Event("outofmaxbounds",de)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=de,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(de),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(de),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("geolocate",de)),this._finish()}}_updateCamera(de){const U=new j.LngLat(de.coords.longitude,de.coords.latitude),te=de.coords.accuracy,be=this._map.getBearing(),Pe=j.extend({bearing:be},this.options.fitBoundsOptions);this._map.fitBounds(U.toBounds(te),Pe,{geolocateSource:!0})}_updateMarker(de){if(de){const U=new j.LngLat(de.coords.longitude,de.coords.latitude);this._accuracyCircleMarker.setLngLat(U).addTo(this._map),this._userLocationDotMarker.setLngLat(U).addTo(this._map),this._accuracy=de.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const de=this._map.transform,U=j.mercatorZfromAltitude(1,de._center.lat)*de.worldSize,te=Math.ceil(2*this._accuracy*U);this._circleElement.style.width=`${te}px`,this._circleElement.style.height=`${te}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(de){if(this._map){if(this.options.trackUserLocation)if(de.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(de.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("error",de)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(de){if(this._container.addEventListener("contextmenu",U=>U.preventDefault()),this._geolocateButton=Te("button","mapboxgl-ctrl-geolocate",this._container),Te("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",de===!1){j.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U)}else{const U=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Te("div","mapboxgl-user-location"),this._dotElement.appendChild(Te("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Te("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Te("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",U=>{U.geolocateSource||this._watchState!=="ACTIVE_LOCK"||U.originalEvent&&U.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new j.Event("trackuserlocationend")))})}_onDeviceOrientation(de){this._userLocationDotMarker&&(de.webkitCompassHeading?this._heading=de.webkitCompassHeading:de.absolute===!0&&(this._heading=-1*de.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return j.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new j.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new j.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new j.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let de;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(de={maximumAge:6e5,timeout:0},this._noTimeout=!0):(de=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,de),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const de=()=>{j.window.addEventListener("ondeviceorientationabsolute"in j.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};j.window.DeviceMotionEvent!==void 0&&typeof j.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(U=>{U==="granted"&&de()}).catch(console.error):de()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),j.window.removeEventListener("deviceorientation",this._onDeviceOrientation),j.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:mo,ScaleControl:class{constructor(de){this.options=j.extend({},Fc,de),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Gl.bind(this)),j.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const de=this.options.maxWidth||100,U=this._map,te=U._containerHeight/2,be=U._containerWidth/2-de/2,Pe=U.unproject([be,te]),Re=U.unproject([be+de,te]),Be=Pe.distanceTo(Re);if(this.options.unit==="imperial"){const Ne=3.2808*Be;Ne>5280?this._setScale(de,Ne/5280,"mile"):this._setScale(de,Ne,"foot")}else this.options.unit==="nautical"?this._setScale(de,Be/1852,"nautical-mile"):Be>=1e3?this._setScale(de,Be/1e3,"kilometer"):this._setScale(de,Be,"meter")}_setScale(de,U,te){const be=rl(U),Pe=be/U;this._map._requestDomTask(()=>{this._container.style.width=de*Pe+"px",this._container.innerHTML=te!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:te}).format(be):`${be}&nbsp;nm`})}onAdd(de){return this._map=de,this._language=de.getLanguage(),this._container=Te("div","mapboxgl-ctrl mapboxgl-ctrl-scale",de.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(de){this._language=de,this._update()}setUnit(de){this.options.unit=de,this._update()}},FullscreenControl:class{constructor(de){this._fullscreen=!1,de&&de.container&&(de.container instanceof j.window.HTMLElement?this._container=de.container:j.warnOnce("Full screen control 'container' must be a DOM element.")),j.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in j.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in j.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(de){return this._map=de,this._container||(this._container=this._map.getContainer()),this._controlContainer=Te("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",j.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,j.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!j.window.document.fullscreenEnabled&&!j.window.document.webkitFullscreenEnabled)}_setupUI(){const de=this._fullscreenButton=Te("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Te("span","mapboxgl-ctrl-icon",de).setAttribute("aria-hidden","true"),de.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),j.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const de=this._getTitle();this._fullscreenButton.setAttribute("aria-label",de),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",de)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(j.window.document.fullscreenElement||j.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?j.window.document.exitFullscreen?j.window.document.exitFullscreen():j.window.document.webkitCancelFullScreen&&j.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends j.Evented{constructor(de){super(),this.options=j.extend(Object.create(Nc),de),j.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(de&&de.className?de.className.trim().split(/\s+/):[])}addTo(de){return this._map&&this.remove(),this._map=de,this.options.closeOnClick&&de.on("preclick",this._onClose),this.options.closeOnMove&&de.on("move",this._onClose),de.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(de.on("mousemove",this._onMouseEvent),de.on("mouseup",this._onMouseEvent),de._canvasContainer.classList.add("mapboxgl-track-pointer")):de.on("move",this._update),this.fire(new j.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const de=this._map;return de&&(de.off("move",this._update),de.off("move",this._onClose),de.off("preclick",this._onClose),de.off("click",this._onClose),de.off("remove",this.remove),de.off("mousemove",this._onMouseEvent),de.off("mouseup",this._onMouseEvent),de.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new j.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(de){this._lngLat=j.LngLat.convert(de),this._pos=null,this._trackPointer=!1,this._update();const U=this._map;return U&&(U.on("move",this._update),U.off("mousemove",this._onMouseEvent),U._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const de=this._map;return de&&(de.off("move",this._update),de.on("mousemove",this._onMouseEvent),de.on("drag",this._onMouseEvent),de._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(de){return this.setDOMContent(j.window.document.createTextNode(de))}setHTML(de){const U=j.window.document.createDocumentFragment(),te=j.window.document.createElement("body");let be;for(te.innerHTML=de;be=te.firstChild,be;)U.appendChild(be);return this.setDOMContent(U)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(de){return this.options.maxWidth=de,this._update(),this}setDOMContent(de){let U=this._content;if(U)for(;U.hasChildNodes();)U.firstChild&&U.removeChild(U.firstChild);else U=this._content=Te("div","mapboxgl-popup-content",this._container||void 0);if(U.appendChild(de),this.options.closeButton){const te=this._closeButton=Te("button","mapboxgl-popup-close-button",U);te.type="button",te.setAttribute("aria-label","Close popup"),te.setAttribute("aria-hidden","true"),te.innerHTML="&#215;",te.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(de){return this._classList.add(de),this._updateClassList(),this}removeClassName(de){return this._classList.delete(de),this._updateClassList(),this}setOffset(de){return this.options.offset=de,this._update(),this}toggleClassName(de){let U;return this._classList.delete(de)?U=!1:(this._classList.add(de),U=!0),this._updateClassList(),U}_onMouseEvent(de){this._update(de.point)}_getAnchor(de){if(this.options.anchor)return this.options.anchor;const U=this._map,te=this._container,be=this._pos;if(!U||!te||!be)return"bottom";const Pe=te.offsetWidth,Re=te.offsetHeight,Be=be.x<Pe/2,Ne=be.x>U.transform.width-Pe/2;if(be.y+de<Re)return Be?"top-left":Ne?"top-right":"top";if(be.y>U.transform.height-Re){if(Be)return"bottom-left";if(Ne)return"bottom-right"}return Be?"left":Ne?"right":"bottom"}_updateClassList(){const de=this._container;if(!de)return;const U=[...this._classList];U.push("mapboxgl-popup"),this._anchor&&U.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&U.push("mapboxgl-popup-track-pointer"),de.className=U.join(" ")}_update(de){const U=this._map,te=this._content;if(!U||!this._lngLat&&!this._trackPointer||!te)return;let be=this._container;if(be||(be=this._container=Te("div","mapboxgl-popup",U.getContainer()),this._tip=Te("div","mapboxgl-popup-tip",be),be.appendChild(te)),this.options.maxWidth&&be.style.maxWidth!==this.options.maxWidth&&(be.style.maxWidth=this.options.maxWidth),U.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=va(this._lngLat,this._pos,U.transform)),!this._trackPointer||de){const Pe=this._pos=this._trackPointer&&de?de:U.project(this._lngLat),Re=il(this.options.offset),Be=this._anchor=this._getAnchor(Re.y),Ne=il(this.options.offset,Be),qe=Pe.add(Ne).round();U._requestDomTask(()=>{this._container&&Be&&(this._container.style.transform=`${nl[Be]} translate(${qe.x}px,${qe.y}px)`)})}if(!this._marker&&U._showingGlobe()){const Pe=j.isLngLatBehindGlobe(U.transform,this._lngLat)?0:1;this._setOpacity(Pe)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const de=this._container.querySelector(jc);de&&de.focus()}_onClose(){this.remove()}_setOpacity(de){this._container&&(this._container.style.opacity=`${de}`),this._content&&(this._content.style.pointerEvents=de?"auto":"none")}},Marker:jl,Style:xo,LngLat:j.LngLat,LngLatBounds:j.LngLatBounds,Point:j.pointGeometry,MercatorCoordinate:j.MercatorCoordinate,FreeCameraOptions:cr,Evented:j.Evented,config:j.config,prewarm:function(){ei().acquire(gr)},clearPrewarmedResources:function(){const de=Dr;de&&(de.isPreloaded()&&de.numActive()===1?(de.release(gr),Dr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return j.config.ACCESS_TOKEN},set accessToken(de){j.config.ACCESS_TOKEN=de},get baseApiUrl(){return j.config.API_URL},set baseApiUrl(de){j.config.API_URL=de},get workerCount(){return Tr.workerCount},set workerCount(de){Tr.workerCount=de},get maxParallelImageRequests(){return j.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(de){j.config.MAX_PARALLEL_IMAGE_REQUESTS=de},clearStorage(de){j.clearTileCache(de)},workerUrl:"",workerClass:null,setNow:j.exported.setNow,restoreNow:j.exported.restoreNow};return hs});var Ee=ce;return Ee})})(mapboxGl);var mapbox=mapboxGl.exports;function render(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[createVNode("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})])}var axios$2={exports:{}},bind$2=function(Q,V){return function(){for(var ce=new Array(arguments.length),ne=0;ne<ce.length;ne++)ce[ne]=arguments[ne];return Q.apply(V,ce)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(q){return Array.isArray(q)}function isUndefined(q){return typeof q=="undefined"}function isBuffer(q){return q!==null&&!isUndefined(q)&&q.constructor!==null&&!isUndefined(q.constructor)&&typeof q.constructor.isBuffer=="function"&&q.constructor.isBuffer(q)}function isArrayBuffer(q){return toString.call(q)==="[object ArrayBuffer]"}function isFormData(q){return toString.call(q)==="[object FormData]"}function isArrayBufferView(q){var Q;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?Q=ArrayBuffer.isView(q):Q=q&&q.buffer&&isArrayBuffer(q.buffer),Q}function isString(q){return typeof q=="string"}function isNumber(q){return typeof q=="number"}function isObject(q){return q!==null&&typeof q=="object"}function isPlainObject(q){if(toString.call(q)!=="[object Object]")return!1;var Q=Object.getPrototypeOf(q);return Q===null||Q===Object.prototype}function isDate(q){return toString.call(q)==="[object Date]"}function isFile(q){return toString.call(q)==="[object File]"}function isBlob(q){return toString.call(q)==="[object Blob]"}function isFunction$1(q){return toString.call(q)==="[object Function]"}function isStream(q){return isObject(q)&&isFunction$1(q.pipe)}function isURLSearchParams(q){return toString.call(q)==="[object URLSearchParams]"}function trim(q){return q.trim?q.trim():q.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(q,Q){if(!(q===null||typeof q=="undefined"))if(typeof q!="object"&&(q=[q]),isArray(q))for(var V=0,_e=q.length;V<_e;V++)Q.call(null,q[V],V,q);else for(var ce in q)Object.prototype.hasOwnProperty.call(q,ce)&&Q.call(null,q[ce],ce,q)}function merge(){var q={};function Q(ce,ne){isPlainObject(q[ne])&&isPlainObject(ce)?q[ne]=merge(q[ne],ce):isPlainObject(ce)?q[ne]=merge({},ce):isArray(ce)?q[ne]=ce.slice():q[ne]=ce}for(var V=0,_e=arguments.length;V<_e;V++)forEach(arguments[V],Q);return q}function extend(q,Q,V){return forEach(Q,function(ce,ne){V&&typeof ce=="function"?q[ne]=bind$1(ce,V):q[ne]=ce}),q}function stripBOM(q){return q.charCodeAt(0)===65279&&(q=q.slice(1)),q}var utils$e={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction:isFunction$1,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$d=utils$e;function encode(q){return encodeURIComponent(q).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(Q,V,_e){if(!V)return Q;var ce;if(_e)ce=_e(V);else if(utils$d.isURLSearchParams(V))ce=V.toString();else{var ne=[];utils$d.forEach(V,function(we,he){we===null||typeof we=="undefined"||(utils$d.isArray(we)?he=he+"[]":we=[we],utils$d.forEach(we,function(xe){utils$d.isDate(xe)?xe=xe.toISOString():utils$d.isObject(xe)&&(xe=JSON.stringify(xe)),ne.push(encode(he)+"="+encode(xe))}))}),ce=ne.join("&")}if(ce){var Ee=Q.indexOf("#");Ee!==-1&&(Q=Q.slice(0,Ee)),Q+=(Q.indexOf("?")===-1?"?":"&")+ce}return Q},utils$c=utils$e;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(Q,V,_e){return this.handlers.push({fulfilled:Q,rejected:V,synchronous:_e?_e.synchronous:!1,runWhen:_e?_e.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(Q){this.handlers[Q]&&(this.handlers[Q]=null)};InterceptorManager$1.prototype.forEach=function(Q){utils$c.forEach(this.handlers,function(_e){_e!==null&&Q(_e)})};var InterceptorManager_1=InterceptorManager$1,utils$b=utils$e,normalizeHeaderName$1=function(Q,V){utils$b.forEach(Q,function(ce,ne){ne!==V&&ne.toUpperCase()===V.toUpperCase()&&(Q[V]=ce,delete Q[ne])})},enhanceError$2=function(Q,V,_e,ce,ne){return Q.config=V,_e&&(Q.code=_e),Q.request=ce,Q.response=ne,Q.isAxiosError=!0,Q.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Q},transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},enhanceError$1=enhanceError$2,createError$2=function(Q,V,_e,ce,ne){var Ee=new Error(Q);return enhanceError$1(Ee,V,_e,ce,ne)},createError$1=createError$2,settle$1=function(Q,V,_e){var ce=_e.config.validateStatus;!_e.status||!ce||ce(_e.status)?Q(_e):V(createError$1("Request failed with status code "+_e.status,_e.config,null,_e.request,_e))},utils$a=utils$e,cookies$1=utils$a.isStandardBrowserEnv()?function(){return{write:function(V,_e,ce,ne,Ee,j){var we=[];we.push(V+"="+encodeURIComponent(_e)),utils$a.isNumber(ce)&&we.push("expires="+new Date(ce).toGMTString()),utils$a.isString(ne)&&we.push("path="+ne),utils$a.isString(Ee)&&we.push("domain="+Ee),j===!0&&we.push("secure"),document.cookie=we.join("; ")},read:function(V){var _e=document.cookie.match(new RegExp("(^|;\\s*)("+V+")=([^;]*)"));return _e?decodeURIComponent(_e[3]):null},remove:function(V){this.write(V,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(Q){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Q)},combineURLs$1=function(Q,V){return V?Q.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):Q},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(Q,V){return Q&&!isAbsoluteURL(V)?combineURLs(Q,V):V},utils$9=utils$e,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(Q){var V={},_e,ce,ne;return Q&&utils$9.forEach(Q.split(`
`),function(j){if(ne=j.indexOf(":"),_e=utils$9.trim(j.substr(0,ne)).toLowerCase(),ce=utils$9.trim(j.substr(ne+1)),_e){if(V[_e]&&ignoreDuplicateOf.indexOf(_e)>=0)return;_e==="set-cookie"?V[_e]=(V[_e]?V[_e]:[]).concat([ce]):V[_e]=V[_e]?V[_e]+", "+ce:ce}}),V},utils$8=utils$e,isURLSameOrigin$1=utils$8.isStandardBrowserEnv()?function(){var Q=/(msie|trident)/i.test(navigator.userAgent),V=document.createElement("a"),_e;function ce(ne){var Ee=ne;return Q&&(V.setAttribute("href",Ee),Ee=V.href),V.setAttribute("href",Ee),{href:V.href,protocol:V.protocol?V.protocol.replace(/:$/,""):"",host:V.host,search:V.search?V.search.replace(/^\?/,""):"",hash:V.hash?V.hash.replace(/^#/,""):"",hostname:V.hostname,port:V.port,pathname:V.pathname.charAt(0)==="/"?V.pathname:"/"+V.pathname}}return _e=ce(window.location.href),function(Ee){var j=utils$8.isString(Ee)?ce(Ee):Ee;return j.protocol===_e.protocol&&j.host===_e.host}}():function(){return function(){return!0}}();function Cancel$3(q){this.message=q}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$7=utils$e,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,transitionalDefaults$1=transitional,Cancel$2=Cancel_1,xhr=function(Q){return new Promise(function(_e,ce){var ne=Q.data,Ee=Q.headers,j=Q.responseType,we;function he(){Q.cancelToken&&Q.cancelToken.unsubscribe(we),Q.signal&&Q.signal.removeEventListener("abort",we)}utils$7.isFormData(ne)&&delete Ee["Content-Type"];var ye=new XMLHttpRequest;if(Q.auth){var xe=Q.auth.username||"",Te=Q.auth.password?unescape(encodeURIComponent(Q.auth.password)):"";Ee.Authorization="Basic "+btoa(xe+":"+Te)}var Se=buildFullPath(Q.baseURL,Q.url);ye.open(Q.method.toUpperCase(),buildURL$1(Se,Q.params,Q.paramsSerializer),!0),ye.timeout=Q.timeout;function Ce(){if(!!ye){var ze="getAllResponseHeaders"in ye?parseHeaders(ye.getAllResponseHeaders()):null,Ue=!j||j==="text"||j==="json"?ye.responseText:ye.response,De={data:Ue,status:ye.status,statusText:ye.statusText,headers:ze,config:Q,request:ye};settle(function(Xe){_e(Xe),he()},function(Xe){ce(Xe),he()},De),ye=null}}if("onloadend"in ye?ye.onloadend=Ce:ye.onreadystatechange=function(){!ye||ye.readyState!==4||ye.status===0&&!(ye.responseURL&&ye.responseURL.indexOf("file:")===0)||setTimeout(Ce)},ye.onabort=function(){!ye||(ce(createError("Request aborted",Q,"ECONNABORTED",ye)),ye=null)},ye.onerror=function(){ce(createError("Network Error",Q,null,ye)),ye=null},ye.ontimeout=function(){var Ue=Q.timeout?"timeout of "+Q.timeout+"ms exceeded":"timeout exceeded",De=Q.transitional||transitionalDefaults$1;Q.timeoutErrorMessage&&(Ue=Q.timeoutErrorMessage),ce(createError(Ue,Q,De.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ye)),ye=null},utils$7.isStandardBrowserEnv()){var Oe=(Q.withCredentials||isURLSameOrigin(Se))&&Q.xsrfCookieName?cookies.read(Q.xsrfCookieName):void 0;Oe&&(Ee[Q.xsrfHeaderName]=Oe)}"setRequestHeader"in ye&&utils$7.forEach(Ee,function(Ue,De){typeof ne=="undefined"&&De.toLowerCase()==="content-type"?delete Ee[De]:ye.setRequestHeader(De,Ue)}),utils$7.isUndefined(Q.withCredentials)||(ye.withCredentials=!!Q.withCredentials),j&&j!=="json"&&(ye.responseType=Q.responseType),typeof Q.onDownloadProgress=="function"&&ye.addEventListener("progress",Q.onDownloadProgress),typeof Q.onUploadProgress=="function"&&ye.upload&&ye.upload.addEventListener("progress",Q.onUploadProgress),(Q.cancelToken||Q.signal)&&(we=function(ze){!ye||(ce(!ze||ze&&ze.type?new Cancel$2("canceled"):ze),ye.abort(),ye=null)},Q.cancelToken&&Q.cancelToken.subscribe(we),Q.signal&&(Q.signal.aborted?we():Q.signal.addEventListener("abort",we))),ne||(ne=null),ye.send(ne)})},utils$6=utils$e,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,transitionalDefaults=transitional,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(q,Q){!utils$6.isUndefined(q)&&utils$6.isUndefined(q["Content-Type"])&&(q["Content-Type"]=Q)}function getDefaultAdapter(){var q;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(q=xhr),q}function stringifySafely(q,Q,V){if(utils$6.isString(q))try{return(Q||JSON.parse)(q),utils$6.trim(q)}catch(_e){if(_e.name!=="SyntaxError")throw _e}return(V||JSON.stringify)(q)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(Q,V){return normalizeHeaderName(V,"Accept"),normalizeHeaderName(V,"Content-Type"),utils$6.isFormData(Q)||utils$6.isArrayBuffer(Q)||utils$6.isBuffer(Q)||utils$6.isStream(Q)||utils$6.isFile(Q)||utils$6.isBlob(Q)?Q:utils$6.isArrayBufferView(Q)?Q.buffer:utils$6.isURLSearchParams(Q)?(setContentTypeIfUnset(V,"application/x-www-form-urlencoded;charset=utf-8"),Q.toString()):utils$6.isObject(Q)||V&&V["Content-Type"]==="application/json"?(setContentTypeIfUnset(V,"application/json"),stringifySafely(Q)):Q}],transformResponse:[function(Q){var V=this.transitional||defaults$3.transitional,_e=V&&V.silentJSONParsing,ce=V&&V.forcedJSONParsing,ne=!_e&&this.responseType==="json";if(ne||ce&&utils$6.isString(Q)&&Q.length)try{return JSON.parse(Q)}catch(Ee){if(ne)throw Ee.name==="SyntaxError"?enhanceError(Ee,this,"E_JSON_PARSE"):Ee}return Q}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Q){return Q>=200&&Q<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],function(Q){defaults$3.headers[Q]={}});utils$6.forEach(["post","put","patch"],function(Q){defaults$3.headers[Q]=utils$6.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$5=utils$e,defaults$2=defaults_1,transformData$1=function(Q,V,_e){var ce=this||defaults$2;return utils$5.forEach(_e,function(Ee){Q=Ee.call(ce,Q,V)}),Q},isCancel$1=function(Q){return!!(Q&&Q.__CANCEL__)},utils$4=utils$e,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(q){if(q.cancelToken&&q.cancelToken.throwIfRequested(),q.signal&&q.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(Q){throwIfCancellationRequested(Q),Q.headers=Q.headers||{},Q.data=transformData.call(Q,Q.data,Q.headers,Q.transformRequest),Q.headers=utils$4.merge(Q.headers.common||{},Q.headers[Q.method]||{},Q.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],function(ce){delete Q.headers[ce]});var V=Q.adapter||defaults$1.adapter;return V(Q).then(function(ce){return throwIfCancellationRequested(Q),ce.data=transformData.call(Q,ce.data,ce.headers,Q.transformResponse),ce},function(ce){return isCancel(ce)||(throwIfCancellationRequested(Q),ce&&ce.response&&(ce.response.data=transformData.call(Q,ce.response.data,ce.response.headers,Q.transformResponse))),Promise.reject(ce)})},utils$3=utils$e,mergeConfig$2=function(Q,V){V=V||{};var _e={};function ce(ye,xe){return utils$3.isPlainObject(ye)&&utils$3.isPlainObject(xe)?utils$3.merge(ye,xe):utils$3.isPlainObject(xe)?utils$3.merge({},xe):utils$3.isArray(xe)?xe.slice():xe}function ne(ye){if(utils$3.isUndefined(V[ye])){if(!utils$3.isUndefined(Q[ye]))return ce(void 0,Q[ye])}else return ce(Q[ye],V[ye])}function Ee(ye){if(!utils$3.isUndefined(V[ye]))return ce(void 0,V[ye])}function j(ye){if(utils$3.isUndefined(V[ye])){if(!utils$3.isUndefined(Q[ye]))return ce(void 0,Q[ye])}else return ce(void 0,V[ye])}function we(ye){if(ye in V)return ce(Q[ye],V[ye]);if(ye in Q)return ce(void 0,Q[ye])}var he={url:Ee,method:Ee,data:Ee,baseURL:j,transformRequest:j,transformResponse:j,paramsSerializer:j,timeout:j,timeoutMessage:j,withCredentials:j,adapter:j,responseType:j,xsrfCookieName:j,xsrfHeaderName:j,onUploadProgress:j,onDownloadProgress:j,decompress:j,maxContentLength:j,maxBodyLength:j,transport:j,httpAgent:j,httpsAgent:j,cancelToken:j,socketPath:j,responseEncoding:j,validateStatus:we};return utils$3.forEach(Object.keys(Q).concat(Object.keys(V)),function(xe){var Te=he[xe]||ne,Se=Te(xe);utils$3.isUndefined(Se)&&Te!==we||(_e[xe]=Se)}),_e},data={version:"0.26.1"},VERSION=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(q,Q){validators$1[q]=function(_e){return typeof _e===q||"a"+(Q<1?"n ":" ")+q}});var deprecatedWarnings={};validators$1.transitional=function(Q,V,_e){function ce(ne,Ee){return"[Axios v"+VERSION+"] Transitional option '"+ne+"'"+Ee+(_e?". "+_e:"")}return function(ne,Ee,j){if(Q===!1)throw new Error(ce(Ee," has been removed"+(V?" in "+V:"")));return V&&!deprecatedWarnings[Ee]&&(deprecatedWarnings[Ee]=!0,console.warn(ce(Ee," has been deprecated since v"+V+" and will be removed in the near future"))),Q?Q(ne,Ee,j):!0}};function assertOptions(q,Q,V){if(typeof q!="object")throw new TypeError("options must be an object");for(var _e=Object.keys(q),ce=_e.length;ce-- >0;){var ne=_e[ce],Ee=Q[ne];if(Ee){var j=q[ne],we=j===void 0||Ee(j,ne,q);if(we!==!0)throw new TypeError("option "+ne+" must be "+we);continue}if(V!==!0)throw Error("Unknown option "+ne)}}var validator$1={assertOptions,validators:validators$1},utils$2=utils$e,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(q){this.defaults=q,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(Q,V){typeof Q=="string"?(V=V||{},V.url=Q):V=Q||{},V=mergeConfig$1(this.defaults,V),V.method?V.method=V.method.toLowerCase():this.defaults.method?V.method=this.defaults.method.toLowerCase():V.method="get";var _e=V.transitional;_e!==void 0&&validator.assertOptions(_e,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var ce=[],ne=!0;this.interceptors.request.forEach(function(Se){typeof Se.runWhen=="function"&&Se.runWhen(V)===!1||(ne=ne&&Se.synchronous,ce.unshift(Se.fulfilled,Se.rejected))});var Ee=[];this.interceptors.response.forEach(function(Se){Ee.push(Se.fulfilled,Se.rejected)});var j;if(!ne){var we=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(we,ce),we=we.concat(Ee),j=Promise.resolve(V);we.length;)j=j.then(we.shift(),we.shift());return j}for(var he=V;ce.length;){var ye=ce.shift(),xe=ce.shift();try{he=ye(he)}catch(Te){xe(Te);break}}try{j=dispatchRequest(he)}catch(Te){return Promise.reject(Te)}for(;Ee.length;)j=j.then(Ee.shift(),Ee.shift());return j};Axios$1.prototype.getUri=function(Q){return Q=mergeConfig$1(this.defaults,Q),buildURL(Q.url,Q.params,Q.paramsSerializer).replace(/^\?/,"")};utils$2.forEach(["delete","get","head","options"],function(Q){Axios$1.prototype[Q]=function(V,_e){return this.request(mergeConfig$1(_e||{},{method:Q,url:V,data:(_e||{}).data}))}});utils$2.forEach(["post","put","patch"],function(Q){Axios$1.prototype[Q]=function(V,_e,ce){return this.request(mergeConfig$1(ce||{},{method:Q,url:V,data:_e}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(q){if(typeof q!="function")throw new TypeError("executor must be a function.");var Q;this.promise=new Promise(function(ce){Q=ce});var V=this;this.promise.then(function(_e){if(!!V._listeners){var ce,ne=V._listeners.length;for(ce=0;ce<ne;ce++)V._listeners[ce](_e);V._listeners=null}}),this.promise.then=function(_e){var ce,ne=new Promise(function(Ee){V.subscribe(Ee),ce=Ee}).then(_e);return ne.cancel=function(){V.unsubscribe(ce)},ne},q(function(ce){V.reason||(V.reason=new Cancel(ce),Q(V.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function(Q){if(this.reason){Q(this.reason);return}this._listeners?this._listeners.push(Q):this._listeners=[Q]};CancelToken.prototype.unsubscribe=function(Q){if(!!this._listeners){var V=this._listeners.indexOf(Q);V!==-1&&this._listeners.splice(V,1)}};CancelToken.source=function(){var Q,V=new CancelToken(function(ce){Q=ce});return{token:V,cancel:Q}};var CancelToken_1=CancelToken,spread=function(Q){return function(_e){return Q.apply(null,_e)}},utils$1=utils$e,isAxiosError=function(Q){return utils$1.isObject(Q)&&Q.isAxiosError===!0},utils=utils$e,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(q){var Q=new Axios(q),V=bind(Axios.prototype.request,Q);return utils.extend(V,Axios.prototype,Q),utils.extend(V,Q),V.create=function(ce){return createInstance(mergeConfig(q,ce))},V}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.VERSION=data.version;axios$1.all=function(Q){return Promise.all(Q)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports;function unwrapObj(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(q).reduce((V,_e)=>(Q.includes(_e)||(V[_e]=unref(q[_e])),V),{})}function isFunction(q){return typeof q=="function"}function isProxy(q){return isReactive(q)||isReadonly(q)}function callRule(q,Q,V,_e){return q.call(_e,unref(Q),unref(V),_e)}function normalizeValidatorResponse(q){return q.$valid!==void 0?!q.$valid:!q}function createAsyncResult(q,Q,V,_e,ce,ne,Ee){let{$lazy:j,$rewardEarly:we}=ce,he=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],ye=arguments.length>8?arguments[8]:void 0,xe=arguments.length>9?arguments[9]:void 0,Te=arguments.length>10?arguments[10]:void 0;const Se=ref(!!_e.value),Ce=ref(0);V.value=!1;const Oe=watch([Q,_e].concat(he,Te),()=>{if(j&&!_e.value||we&&!xe.value&&!V.value)return;let ze;try{ze=callRule(q,Q,ye,Ee)}catch(Ue){ze=Promise.reject(Ue)}Ce.value++,V.value=!!Ce.value,Se.value=!1,Promise.resolve(ze).then(Ue=>{Ce.value--,V.value=!!Ce.value,ne.value=Ue,Se.value=normalizeValidatorResponse(Ue)}).catch(Ue=>{Ce.value--,V.value=!!Ce.value,ne.value=Ue,Se.value=!0})},{immediate:!0,deep:typeof Q=="object"});return{$invalid:Se,$unwatch:Oe}}function createSyncResult(q,Q,V,_e,ce,ne,Ee,j){let{$lazy:we,$rewardEarly:he}=_e;const ye=()=>({}),xe=computed(()=>{if(we&&!V.value||he&&!j.value)return!1;let Te=!0;try{const Se=callRule(q,Q,Ee,ne);ce.value=Se,Te=normalizeValidatorResponse(Se)}catch(Se){ce.value=Se}return Te});return{$unwatch:ye,$invalid:xe}}function createValidatorResult(q,Q,V,_e,ce,ne,Ee,j,we,he,ye){const xe=ref(!1),Te=q.$params||{},Se=ref(null);let Ce,Oe;q.$async?{$invalid:Ce,$unwatch:Oe}=createAsyncResult(q.$validator,Q,xe,V,_e,Se,ce,q.$watchTargets,we,he,ye):{$invalid:Ce,$unwatch:Oe}=createSyncResult(q.$validator,Q,V,_e,Se,ce,we,he);const ze=q.$message;return{$message:isFunction(ze)?computed(()=>ze(unwrapObj({$pending:xe,$invalid:Ce,$params:unwrapObj(Te),$model:Q,$response:Se,$validator:ne,$propertyPath:j,$property:Ee}))):ze||"",$params:Te,$pending:xe,$invalid:Ce,$response:Se,$unwatch:Oe}}function sortValidations(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Q=unref(q),V=Object.keys(Q),_e={},ce={},ne={};return V.forEach(Ee=>{const j=Q[Ee];switch(!0){case isFunction(j.$validator):_e[Ee]=j;break;case isFunction(j):_e[Ee]={$validator:j};break;case Ee.startsWith("$"):ne[Ee]=j;break;default:ce[Ee]=j}}),{rules:_e,nestedValidators:ce,config:ne}}function _empty(){}const ROOT_PATH="__root";function _call(q,Q,V){if(V)return Q?Q(q()):q();try{var _e=Promise.resolve(q());return Q?_e.then(Q):_e}catch(ce){return Promise.reject(ce)}}function _callIgnored(q,Q){return _call(q,_empty,Q)}function _invoke(q,Q){var V=q();return V&&V.then?V.then(Q):Q(V)}function _async(q){return function(){for(var Q=[],V=0;V<arguments.length;V++)Q[V]=arguments[V];try{return Promise.resolve(q.apply(this,Q))}catch(_e){return Promise.reject(_e)}}}function createValidationResults(q,Q,V,_e,ce,ne,Ee,j,we){const he=Object.keys(q),ye=_e.get(ce,q),xe=ref(!1),Te=ref(!1),Se=ref(0);if(ye){if(!ye.$partial)return ye;ye.$unwatch(),xe.value=ye.$dirty.value}const Ce={$dirty:xe,$path:ce,$touch:()=>{xe.value||(xe.value=!0)},$reset:()=>{xe.value&&(xe.value=!1)},$commit:()=>{}};return he.length?(he.forEach(Oe=>{Ce[Oe]=createValidatorResult(q[Oe],Q,Ce.$dirty,ne,Ee,Oe,V,ce,we,Te,Se)}),Ce.$externalResults=computed(()=>j.value?[].concat(j.value).map((Oe,ze)=>({$propertyPath:ce,$property:V,$validator:"$externalResults",$uid:`${ce}-externalResult-${ze}`,$message:Oe,$params:{},$response:null,$pending:!1})):[]),Ce.$invalid=computed(()=>{const Oe=he.some(ze=>unref(Ce[ze].$invalid));return Te.value=Oe,!!Ce.$externalResults.value.length||Oe}),Ce.$pending=computed(()=>he.some(Oe=>unref(Ce[Oe].$pending))),Ce.$error=computed(()=>Ce.$dirty.value?Ce.$pending.value||Ce.$invalid.value:!1),Ce.$silentErrors=computed(()=>he.filter(Oe=>unref(Ce[Oe].$invalid)).map(Oe=>{const ze=Ce[Oe];return reactive({$propertyPath:ce,$property:V,$validator:Oe,$uid:`${ce}-${Oe}`,$message:ze.$message,$params:ze.$params,$response:ze.$response,$pending:ze.$pending})}).concat(Ce.$externalResults.value)),Ce.$errors=computed(()=>Ce.$dirty.value?Ce.$silentErrors.value:[]),Ce.$unwatch=()=>he.forEach(Oe=>{Ce[Oe].$unwatch()}),Ce.$commit=()=>{Te.value=!0,Se.value=Date.now()},_e.set(ce,q,Ce),Ce):(ye&&_e.set(ce,q,Ce),Ce)}function collectNestedValidationResults(q,Q,V,_e,ce,ne,Ee){const j=Object.keys(q);return j.length?j.reduce((we,he)=>(we[he]=setValidations({validations:q[he],state:Q,key:he,parentKey:V,resultsCache:_e,globalConfig:ce,instance:ne,externalResults:Ee}),we),{}):{}}function createMetaFields(q,Q,V){const _e=computed(()=>[Q,V].filter(Ce=>Ce).reduce((Ce,Oe)=>Ce.concat(Object.values(unref(Oe))),[])),ce=computed({get(){return q.$dirty.value||(_e.value.length?_e.value.every(Ce=>Ce.$dirty):!1)},set(Ce){q.$dirty.value=Ce}}),ne=computed(()=>{const Ce=unref(q.$silentErrors)||[],Oe=_e.value.filter(ze=>(unref(ze).$silentErrors||[]).length).reduce((ze,Ue)=>ze.concat(...Ue.$silentErrors),[]);return Ce.concat(Oe)}),Ee=computed(()=>{const Ce=unref(q.$errors)||[],Oe=_e.value.filter(ze=>(unref(ze).$errors||[]).length).reduce((ze,Ue)=>ze.concat(...Ue.$errors),[]);return Ce.concat(Oe)}),j=computed(()=>_e.value.some(Ce=>Ce.$invalid)||unref(q.$invalid)||!1),we=computed(()=>_e.value.some(Ce=>unref(Ce.$pending))||unref(q.$pending)||!1),he=computed(()=>_e.value.some(Ce=>Ce.$dirty)||_e.value.some(Ce=>Ce.$anyDirty)||ce.value),ye=computed(()=>ce.value?we.value||j.value:!1),xe=()=>{q.$touch(),_e.value.forEach(Ce=>{Ce.$touch()})},Te=()=>{q.$commit(),_e.value.forEach(Ce=>{Ce.$commit()})},Se=()=>{q.$reset(),_e.value.forEach(Ce=>{Ce.$reset()})};return _e.value.length&&_e.value.every(Ce=>Ce.$dirty)&&xe(),{$dirty:ce,$errors:Ee,$invalid:j,$anyDirty:he,$error:ye,$pending:we,$touch:xe,$reset:Se,$silentErrors:ne,$commit:Te}}function setValidations(q){const Q=_async(function(){return bt(),_invoke(function(){if(Oe.$rewardEarly)return it(),_callIgnored(nextTick)},function(){return _call(nextTick,function(){return new Promise(xt=>{if(!wt.value)return xt(!Qe.value);const ht=watch(wt,()=>{xt(!Qe.value),ht()})})})})});let{validations:V,state:_e,key:ce,parentKey:ne,childResults:Ee,resultsCache:j,globalConfig:we={},instance:he,externalResults:ye}=q;const xe=ne?`${ne}.${ce}`:ce,{rules:Te,nestedValidators:Se,config:Ce}=sortValidations(V),Oe=Object.assign({},we,Ce),ze=ce?computed(()=>{const xt=unref(_e);return xt?unref(xt[ce]):void 0}):_e,Ue=Object.assign({},unref(ye)||{}),De=computed(()=>{const xt=unref(ye);return ce?xt?unref(xt[ce]):void 0:xt}),Fe=createValidationResults(Te,ze,ce,j,xe,Oe,he,De,_e),Xe=collectNestedValidationResults(Se,ze,xe,j,Oe,he,De),{$dirty:Ke,$errors:He,$invalid:Qe,$anyDirty:pt,$error:Mt,$pending:wt,$touch:bt,$reset:rt,$silentErrors:nt,$commit:it}=createMetaFields(Fe,Xe,Ee),dt=ce?computed({get:()=>unref(ze),set:xt=>{Ke.value=!0;const ht=unref(_e),Vt=unref(ye);Vt&&(Vt[ce]=Ue[ce]),isRef(ht[ce])?ht[ce].value=xt:ht[ce]=xt}}):null;ce&&Oe.$autoDirty&&watch(ze,()=>{Ke.value||bt();const xt=unref(ye);xt&&(xt[ce]=Ue[ce])},{flush:"sync"});function lt(xt){return(Ee.value||{})[xt]}function ft(){isRef(ye)?ye.value=Ue:Object.keys(Ue).length===0?Object.keys(ye).forEach(xt=>{delete ye[xt]}):Object.assign(ye,Ue)}return reactive(Object.assign({},Fe,{$model:dt,$dirty:Ke,$error:Mt,$errors:He,$invalid:Qe,$anyDirty:pt,$pending:wt,$touch:bt,$reset:rt,$path:xe||ROOT_PATH,$silentErrors:nt,$validate:Q,$commit:it},Ee&&{$getResultsForChild:lt,$clearExternalResults:ft},Xe))}class ResultsStorage{constructor(){this.storage=new Map}set(Q,V,_e){this.storage.set(Q,{rules:V,result:_e})}checkRulesValidity(Q,V,_e){const ce=Object.keys(_e),ne=Object.keys(V);return ne.length!==ce.length||!ne.every(j=>ce.includes(j))?!1:ne.every(j=>V[j].$params?Object.keys(V[j].$params).every(we=>unref(_e[j].$params[we])===unref(V[j].$params[we])):!0)}get(Q,V){const _e=this.storage.get(Q);if(!_e)return;const{rules:ce,result:ne}=_e,Ee=this.checkRulesValidity(Q,V,ce),j=ne.$unwatch?ne.$unwatch:()=>({});return Ee?ne:{$dirty:ne.$dirty,$partial:!0,$unwatch:j}}}const CollectFlag={COLLECT_ALL:!0,COLLECT_NONE:!1},VuelidateInjectChildResults=Symbol("vuelidate#injectChildResults"),VuelidateRemoveChildResults=Symbol("vuelidate#removeChildResults");function nestedValidations(q){let{$scope:Q,instance:V}=q;const _e={},ce=ref([]),ne=computed(()=>ce.value.reduce((ye,xe)=>(ye[xe]=unref(_e[xe]),ye),{}));function Ee(ye,xe){let{$registerAs:Te,$scope:Se,$stopPropagation:Ce}=xe;Ce||Q===CollectFlag.COLLECT_NONE||Se===CollectFlag.COLLECT_NONE||Q!==CollectFlag.COLLECT_ALL&&Q!==Se||(_e[Te]=ye,ce.value.push(Te))}V.__vuelidateInjectInstances=[].concat(V.__vuelidateInjectInstances||[],Ee);function j(ye){ce.value=ce.value.filter(xe=>xe!==ye),delete _e[ye]}V.__vuelidateRemoveInstances=[].concat(V.__vuelidateRemoveInstances||[],j);const we=inject(VuelidateInjectChildResults,[]);provide(VuelidateInjectChildResults,V.__vuelidateInjectInstances);const he=inject(VuelidateRemoveChildResults,[]);return provide(VuelidateRemoveChildResults,V.__vuelidateRemoveInstances),{childResults:ne,sendValidationResultsToParent:we,removeValidationResultsFromParent:he}}function ComputedProxyFactory(q){return new Proxy(q,{get(Q,V){return typeof Q[V]=="object"?ComputedProxyFactory(Q[V]):computed(()=>Q[V])}})}function useVuelidate(q,Q){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(V=q,q=void 0,Q=void 0);let{$registerAs:_e,$scope:ce=CollectFlag.COLLECT_ALL,$stopPropagation:ne,$externalResults:Ee,currentVueInstance:j}=V;const we=j||getCurrentInstance(),he=we?we.type:{};!_e&&we&&(_e=`_vuelidate_${we.uid||we._uid}`);const ye=ref({}),xe=new ResultsStorage,{childResults:Te,sendValidationResultsToParent:Se,removeValidationResultsFromParent:Ce}=we?nestedValidations({$scope:ce,instance:we}):{childResults:ref({})};if(!q&&he.validations){const Oe=he.validations;Q=ref({}),onBeforeMount(()=>{Q.value=we.proxy,watch(()=>isFunction(Oe)?Oe.call(Q.value,new ComputedProxyFactory(Q.value)):Oe,ze=>{ye.value=setValidations({validations:ze,state:Q,childResults:Te,resultsCache:xe,globalConfig:V,instance:we.proxy,externalResults:Ee||we.proxy.vuelidateExternalResults})},{immediate:!0})}),V=he.validationsConfig||V}else{const Oe=isRef(q)||isProxy(q)?q:reactive(q||{});watch(Oe,ze=>{ye.value=setValidations({validations:ze,state:Q,childResults:Te,resultsCache:xe,globalConfig:V,instance:we?we.proxy:{},externalResults:Ee})},{immediate:!0})}return we&&(Se.forEach(Oe=>Oe(ye,{$registerAs:_e,$scope:ce,$stopPropagation:ne})),onBeforeUnmount(()=>Ce.forEach(Oe=>Oe(_e)))),computed(()=>Object.assign({},unref(ye.value),Te.value))}const req=q=>{if(q=unref(q),Array.isArray(q))return!!q.length;if(q==null)return!1;if(q===!1)return!0;if(q instanceof Date)return!isNaN(q.getTime());if(typeof q=="object"){for(let Q in q)return!0;return!1}return!!String(q).length},len=q=>(q=unref(q),Array.isArray(q)?q.length:typeof q=="object"?Object.keys(q).length:String(q).length);function regex(){for(var q=arguments.length,Q=new Array(q),V=0;V<q;V++)Q[V]=arguments[V];return _e=>(_e=unref(_e),!req(_e)||Q.every(ce=>ce.test(_e)))}regex(/^[a-zA-Z]*$/);regex(/^[a-zA-Z0-9]*$/);var numeric$1=regex(/^\d*(\.\d+)?$/),numeric={$validator:numeric$1,$message:"Value must be numeric",$params:{type:"numeric"}};const emailRegex=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var email$1=regex(emailRegex),email={$validator:email$1,$message:"Value is not a valid email address",$params:{type:"email"}};function minLength$1(q){return Q=>!req(Q)||len(Q)>=unref(q)}function minLength(q){return{$validator:minLength$1(q),$message:Q=>{let{$params:V}=Q;return`This field should be at least ${V.min} long`},$params:{min:q,type:"minLength"}}}function required$1(q){return typeof q=="string"&&(q=q.trim()),req(q)}var required={$validator:required$1,$message:"Value is required",$params:{type:"required"}};function sameAs$1(q){return Q=>unref(Q)===unref(q)}function sameAs(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"other";return{$validator:sameAs$1(q),$message:V=>`The value must be equal to the ${Q} value`,$params:{equalTo:q,otherName:Q,type:"sameAs"}}}const urlRegex=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;regex(urlRegex);regex(/(^[0-9]*$)|(^-[0-9]+$)/);regex(/^[-]?\d*(\.\d+)?$/);var eruda$1={exports:{}};/*! eruda v2.6.1 https://eruda.liriliri.io/ */(function(module,exports){(function(q,Q){module.exports=Q()})(self,function(){return function(){var __webpack_modules__={3816:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container ._console-container{$pt:40px;$pb:24px}._console-container{$w:100%;$h:100%}._console-container._js-input-hidden{$pb:0}._console-container ._control{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$cu:default;$fs:0;$p:10px 10px 10px 35px;$b:var(--darker-background);$c:var(--primary);$lh:20px;$bb:1px solid var(--border)}._console-container ._control ._icon-clear,._console-container ._control ._icon-copy,._console-container ._control ._icon-search{$d:inline-block;$p:10px;$fs:16px;$po:absolute;$t:0;$cu:pointer;$tr:color .3s}._console-container ._control ._icon-clear:active,._console-container ._control ._icon-copy:active,._console-container ._control ._icon-search:active{$c:var(--accent)}._console-container ._control ._icon-clear{padding-right:0;$l:0}._console-container ._control ._icon-copy{right:0}._console-container ._control ._icon-search{right:23px}._console-container ._control ._filter{$cu:pointer;$fs:12px;$h:20px;$d:inline-block;$m:0 2px;$p:0 4px;$lh:20px;$tr:background-color .3s,color .3s}._console-container ._control ._filter._active{$b:var(--highlight);$c:var(--select-foreground)}._console-container ._control ._search-keyword{$ws:nowrap;$po:absolute;$lh:20px;max-width:80px;$o:hidden;right:63px;$fs:14px;text-overflow:ellipsis}._console-container ._js-input{$pe:none;$po:absolute;$z:100;$l:0;bottom:0;$w:100%;$bt:1px solid var(--border);$h:24px}._console-container ._js-input ._icon-arrow-right{$lh:23px;$c:var(--accent);$po:absolute;$l:10px;$t:0;$z:10}._console-container ._js-input._active{$h:100%;$pt:40px;$pb:40px;$bt:none}._console-container ._js-input._active ._icon-arrow-right{$d:none}._console-container ._js-input._active textarea{$pl:10px}._console-container ._js-input ._buttons{$d:none;$po:absolute;$l:0;bottom:0;$w:100%;$h:40px;$c:var(--primary);$b:var(--darker-background);$fs:12px;$bt:1px solid var(--border)}._console-container ._js-input ._buttons ._button{$pe:all;$cu:pointer;$w:50%;$d:inline-block;$ta:center;$br:1px solid var(--border);$h:40px;$lh:40px;$tr:background .3s,color .3s}._console-container ._js-input ._buttons ._button:last-child{$br:none}._console-container ._js-input ._buttons ._button:active{$c:var(--select-foreground);$b:var(--highlight)}._console-container ._js-input textarea{$pe:all;$p:3px 10px;$pl:25px;$ou:0;$bo:none;$fs:14px;$w:100%;$h:100%;-webkit-user-select:text;$us:text;resize:none;$c:var(--primary);$b:var(--background)}",""]),q.exports=Q},9217:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._dev-tools{$po:absolute;$w:100%;$h:100%;$l:0;bottom:0;$b:var(--background);$z:500;$d:none;$pt:40px!important;opacity:0;$tr:opacity .3s,height .3s}._dev-tools ._tools{$o:auto;$wos:touch;$h:100%;$w:100%;$po:relative}._dev-tools ._tools ._tool{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$o:hidden;$d:none}",""]),q.exports=Q},3409:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container ._nav-bar-container{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$z:100}._container ._nav-bar-container ._nav-bar{$ox:auto;$wos:touch;$bt:1px solid var(--border);$bb:1px solid var(--border);$w:100%;$h:100%;$b:var(--darker-background);$fs:0;$ws:nowrap}._container ._nav-bar-container ._nav-bar-item{$cu:pointer;$d:inline-block;$h:38px;$lh:38px;$p:0 10px;$c:var(--foreground);$fs:12px;$ta:center;$tt:capitalize;$tr:all .3s}._container ._nav-bar-container ._nav-bar-item:active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._nav-bar-item._active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._bottom-bar{$tr:left .3s,width .3s;$h:1px;$b:var(--accent);$po:absolute;bottom:0;$l:0}",""]),q.exports=Q},269:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_elements{$pb:40px;$fs:14px}#_elements ._show-area{$oy:auto;$wos:touch;$h:100%}#_elements ._parents{$ox:auto;$wos:touch;$b:var(--darker-background);$c:var(--primary);$p:0 10px;$h:40px;$lh:40px;$ws:nowrap;$bb:1px solid var(--border);$cu:pointer;$fs:14px}#_elements ._parents li{$d:inline-block}#_elements ._parents li ._parent{$d:inline-block}#_elements ._parents li:last-child{margin-right:0}#_elements ._parents ._icon-arrow-right{$fs:12px;$po:relative;$t:1px}#_elements ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border);$cu:pointer;$tr:background .3s,color .3s}#_elements ._breadcrumb:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._breadcrumb:active span{$c:var(--select-foreground)}#_elements ._section{$bb:1px solid var(--border);$c:var(--foreground);$mb:10px}#_elements ._section h2{$c:var(--primary);$b:var(--darker-background);$bt:1px solid var(--border);$p:10px;$fs:14px;$tr:background .3s}#_elements ._section h2 ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_elements ._section h2 ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_elements ._section h2 ._btn:active{$c:var(--accent)}#_elements ._section h2._active-effect{$cu:pointer}#_elements ._section h2._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children{$b:var(--darker-background);$c:var(--foreground);$mb:10px!important;$bb:1px solid var(--border)}#_elements ._children li{$ox:auto;$wos:touch;$cu:default;$p:10px;$bt:1px solid var(--border);$ws:nowrap;$tr:background .3s,color .3s}#_elements ._children li span{$tr:color .3s}#_elements ._children li._active-effect{$cu:pointer}#_elements ._children li._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children li._active-effect:active span{$c:var(--select-foreground)}#_elements ._attributes{$fs:12px}#_elements ._attributes a{$c:var(--link-color)}#_elements ._attributes ._table-wrapper{$ox:auto;$wos:touch}#_elements ._attributes table td{$p:5px 10px}#_elements ._text-content{$b:#fff}#_elements ._text-content ._content{$ox:auto;$wos:touch;$p:10px}#_elements ._style-color{$po:relative;$t:1px;$w:10px;$h:10px;$bra:50%;margin-right:2px;$bo:1px solid var(--border);$d:inline-block}#_elements ._box-model{$ox:auto;$wos:touch;$c:#222;$fs:12px;$p:10px;$ta:center;$ws:nowrap;$bb:1px solid var(--color)}#_elements ._box-model ._label{$po:absolute;$ml:3px;$p:0 2px}#_elements ._box-model ._bottom,#_elements ._box-model ._left,#_elements ._box-model ._right,#_elements ._box-model ._top{$d:inline-block}#_elements ._box-model ._left,#_elements ._box-model ._right{vertical-align:middle}#_elements ._box-model ._border,#_elements ._box-model ._content,#_elements ._box-model ._margin,#_elements ._box-model ._padding,#_elements ._box-model ._position{$po:relative;$b:#fff;$d:inline-block;$ta:center;vertical-align:middle;$p:3px;$m:3px}#_elements ._box-model ._position{$bo:1px grey dotted}#_elements ._box-model ._margin{$bo:1px dashed;$b:rgba(246,178,107,.66)}#_elements ._box-model ._border{$bo:1px #000 solid;$b:rgba(255,229,153,.66)}#_elements ._box-model ._padding{$bo:1px grey dashed;$b:rgba(147,196,125,.55)}#_elements ._box-model ._content{$bo:1px grey solid;min-width:100px;$b:rgba(111,168,220,.66)}#_elements ._computed-style{$fs:12px}#_elements ._computed-style a{$c:var(--link-color)}#_elements ._computed-style ._table-wrapper{$oy:auto;$wos:touch;max-height:200px;$bt:1px solid var(--border)}#_elements ._computed-style table td{$p:5px 10px}#_elements ._computed-style table td._key{$ws:nowrap;$c:var(--var-color)}#_elements ._styles{$fs:12px}#_elements ._styles ._style-wrapper{$p:10px}#_elements ._styles ._style-wrapper ._style-rules{$bo:1px solid var(--border);$p:10px;$mb:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{$pl:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{$c:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{$c:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{$mb:0}#_elements ._listeners{$fs:12px}#_elements ._listeners ._listener-wrapper{$p:10px}#_elements ._listeners ._listener-wrapper ._listener{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{$p:10px;$b:var(--darker-background);$c:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{$ox:auto;$wos:touch;$p:10px;$bt:none}#_elements ._bottom-bar{$h:40px;$b:var(--darker-background);$po:absolute;$l:0;bottom:0;$w:100%;$fs:0;$bt:1px solid var(--border)}#_elements ._bottom-bar ._btn{$cu:pointer;$ta:center;$c:var(--primary);$fs:14px;$lh:40px;$w:25%;$d:inline-block;$tr:background .3s,color .3s}#_elements ._bottom-bar ._btn:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._bottom-bar ._btn._active{$c:var(--accent)}",""]),q.exports=Q},7693:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container ._entry-btn{$w:40px;$h:40px;$d:flex;$b:#000;opacity:.3;$bra:10px;$po:relative;$z:1000;$tr:opacity .3s;$c:#fff;$fs:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),q.exports=Q},9577:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_info{$oy:auto;$wos:touch}#_info li{$m:10px;$bo:1px solid var(--border)}#_info li ._content,#_info li ._title{$p:10px}#_info li ._title{$pb:0;$fs:16px;$c:var(--accent)}#_info li ._content{$m:0;-webkit-user-select:text;$us:text;$c:var(--foreground);word-break:break-all}#_info li ._content table{$w:100%;$bc:collapse}#_info li ._content table td,#_info li ._content table th{$bo:1px solid var(--border);$p:10px}#_info li ._content *{-webkit-user-select:text;$us:text}#_info li ._content a{$c:var(--link-color)}#_info li ._device-key,#_info li ._system-key{$w:100px}",""]),q.exports=Q},3985:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_network{$pt:36px}#_network ._title{$po:absolute;$w:100%;$h:36px;$l:0;$t:0;$b:var(--darker-background);$p:10px;$c:var(--primary);$h:36px;$bb:1px solid var(--border)}#_network ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_network ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_network ._title ._btn:active{$c:var(--accent)}#_network ._requests{$oy:auto;$wos:touch;$h:100%;$bb:1px solid var(--border);$mb:10px}#_network ._requests li{$d:flex;$w:100%;$cu:pointer;$bb:1px solid var(--border);$h:41px;$c:var(--foreground);$ws:nowrap}#_network ._requests li._error span{$c:var(--console-error-foreground)}#_network ._requests li span{$d:block;$lh:40px;$h:40px;$p:0 5px;$fs:12px;vertical-align:top;text-overflow:ellipsis;$o:hidden}#_network ._requests li ._name{$fl:1;$pl:10px}#_network ._requests li ._status{$w:40px}#_network ._requests li ._method,#_network ._requests li ._type{$w:50px}#_network ._requests li ._size{$w:70px}#_network ._requests li ._time{$w:60px;padding-right:10px}#_network ._requests li:nth-child(even){$b:var(--contrast)}#_network ._detail{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$z:10;$d:none;$pb:40px;$b:var(--background)}#_network ._detail ._http{$oy:auto;$wos:touch;$h:100%}#_network ._detail ._http ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_network ._detail ._http ._section{$bt:1px solid var(--border);$bb:1px solid var(--border);$mb:10px}#_network ._detail ._http ._section h2{$b:var(--darker-background);$c:var(--primary);$p:10px;$fs:14px}#_network ._detail ._http ._section table{$c:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;$us:text}#_network ._detail ._http ._section table td{$fs:12px;$p:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{$ws:nowrap;$fw:700;$c:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;$us:text;$ox:auto;$wos:touch;$p:10px;$fs:12px;$mb:10px;$ws:pre-wrap;$bt:1px solid var(--border);$c:var(--foreground);$bb:1px solid var(--border)}#_network ._detail ._back{$po:absolute;$l:0;bottom:0;$c:var(--foreground);$w:100%;$bt:1px solid var(--border);$b:var(--darker-background);$d:block;$h:40px;$lh:40px;text-decoration:none;$ta:center;$mt:10px;$tr:background .3s;$cu:pointer}#_network ._detail ._back:active{$c:var(--select-foreground)}",""]),q.exports=Q},8070:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_resources{$oy:auto;$wos:touch;$p:10px;$fs:14px}#_resources ._section{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_resources ._section ._content{$oy:auto;$wos:touch;max-height:400px}#_resources ._section._warn{$bo:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}#_resources ._section._danger{$bo:1px solid var(--console-error-border)}#_resources ._section._danger ._title{$b:var(--console-error-background);$c:var(--console-error-foreground)}#_resources ._title{$p:10px;$c:var(--primary);$b:var(--darker-background)}#_resources ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_resources ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_resources ._title ._btn:active{$c:var(--accent)}#_resources ._link-list{$fs:12px;$c:var(--foreground)}#_resources ._link-list li{$p:10px;word-break:break-all}#_resources ._link-list li a{$c:var(--link-color)!important}#_resources ._image-list{$c:var(--foreground);$fs:12px;$d:flex;flex-wrap:wrap;$p:10px!important}#_resources ._image-list:after{$co:'';$d:block;$cl:both}#_resources ._image-list li{flex-grow:1;$cu:pointer;$oy:hidden}#_resources ._image-list li._image{$h:100px;$fs:0}#_resources ._image-list li img{$h:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}#_resources table{$c:var(--foreground);$bc:collapse;$w:100%;$fs:12px}#_resources table tr:nth-child(even){$b:var(--contrast)}#_resources table td{$p:10px;word-break:break-all}#_resources table td._key{$ox:auto;$wos:touch;$ws:nowrap;max-width:120px}#_resources table td._control{$p:0;$fs:0;$w:40px}#_resources table td._control ._icon-delete{$cu:pointer;$c:var(--primary);$fs:14px;$d:inline-block;$w:40px;$h:40px;$ta:center;$lh:40px;$tr:color .3s}#_resources table td._control ._icon-delete:active{$c:var(--accent)}",""]),q.exports=Q},6836:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_settings{$oy:auto;$wos:touch}#_settings ._separator{$h:10px}#_settings ._text{$p:10px;$c:var(--accent);$fs:12px}#_settings ._color,#_settings ._range,#_settings ._select{$cu:pointer}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head,#_settings ._switch{$p:10px;$b:var(--darker-background);$fs:14px;$bb:1px solid var(--border);$bt:1px solid var(--border);$c:var(--primary);$mt:-1px}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head{$tr:background .3s,color .3s}#_settings ._color ._head span,#_settings ._range ._head span,#_settings ._select ._head span{$f:right}#_settings ._color ._head:active,#_settings ._range ._head:active,#_settings ._select ._head:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ._head span{$d:inline-block;$bo:1px solid var(--border);$w:15px;$h:15px}#_settings ._select ul{$d:none;$bb:1px solid var(--border);$c:var(--foreground)}#_settings ._select ul._open{$d:block}#_settings ._select ul li{$p:10px;$tr:background .3s,color .3s}#_settings ._select ul li:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ul{$d:none;$p:10px;$fs:0;$bb:1px solid var(--border)}#_settings ._color ul._open{$d:block}#_settings ._color ul li{$d:inline-block;$w:20px;$bo:1px solid var(--border);$h:20px;margin-right:10px}#_settings ._range ._input-container{$d:none;$p:10px;$bb:1px solid var(--border);$po:relative}#_settings ._range ._input-container._open{$d:block}#_settings ._range ._input-container ._range-track{$h:4px;$w:100%;$p:0 10px;$po:absolute;$l:0;$t:16px}#_settings ._range ._input-container ._range-track ._range-track-bar{$b:var(--darker-background);$bra:2px;$o:hidden;$w:100%;$h:4px}#_settings ._range ._input-container ._range-track ._range-track-bar ._range-track-progress{$h:100%;$b:var(--accent);$w:50%}#_settings ._range ._input-container input{-webkit-appearance:none;$b:0 0;$h:4px;$w:100%;$po:relative;$t:-3px;$m:0 auto;$ou:0;$bra:2px}#_settings ._range ._input-container input::-webkit-slider-thumb{-webkit-appearance:none;$po:relative;$t:0;$z:1;$w:16px;$bo:none;$h:16px;$bra:10px;$bo:1px solid var(--border);$b:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}#_settings ._switch ._checkbox{$f:right;$po:relative;vertical-align:top;$w:46px;$h:20px;$p:3px;$bra:18px;$bo:1px solid var(--border);$cu:pointer;$bi:linear-gradient(to bottom,var(--dark),var(--light) 25px)}#_settings ._switch ._checkbox ._input{$po:absolute;$t:0;$l:0;opacity:0}#_settings ._switch ._checkbox ._label{$pe:none;$po:relative;$d:block;$h:12px;$fs:10px;$tt:uppercase;$b:var(--darker-background);$bra:inherit;$bs:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);$tr:.15s ease-out;transition-property:opacity background}#_settings ._switch ._checkbox ._label:after,#_settings ._switch ._checkbox ._label:before{$po:absolute;$t:50%;$mt:-.5em;$lh:1;$tr:inherit}#_settings ._switch ._checkbox ._input:checked~._label{$b:var(--accent);$bs:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}#_settings ._switch ._checkbox ._input:checked~._label:before{opacity:0}#_settings ._switch ._checkbox ._input:checked~._label:after{opacity:1}#_settings ._switch ._checkbox ._handle{$po:absolute;$pe:none;$t:0;$l:0;$w:18px;$h:18px;$bra:10px;$bs:1px 1px 5px rgba(0,0,0,.2);$bi:linear-gradient(to bottom,var(--light) 40%,var(--dark));$tr:left .15s ease-out}#_settings ._switch ._checkbox ._handle:before{$co:'';$po:absolute;$t:50%;$l:50%;$m:-6px 0 0 -6px;$w:12px;$h:12px;$bra:6px;$bs:inset 0 1px rgba(0,0,0,.02);$bi:linear-gradient(to bottom,var(--dark),var(--light))}#_settings ._switch ._checkbox ._input:checked~._handle{$l:30px;$bs:-1px 1px 5px rgba(0,0,0,.2)}",""]),q.exports=Q},8277:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_snippets{$oy:auto;$wos:touch;$p:10px}#_snippets ._section{$mb:10px;$bo:1px solid var(--border);$o:hidden;$cu:pointer}#_snippets ._section:active ._name{$b:var(--highlight);$c:var(--select-foreground)}#_snippets ._section ._name{$p:10px;$c:var(--primary);$b:var(--darker-background);$tr:background .3s}#_snippets ._section ._name ._btn{$ml:10px;$f:right;$ta:center;$w:18px;$h:18px;$lh:18px;$fs:12px}#_snippets ._section ._description{$c:var(--foreground);$p:10px;$tr:background .3s}",""]),q.exports=Q},6068:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._search-highlight-block{$d:inline}._search-highlight-block ._keyword{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}",""]),q.exports=Q},4214:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_sources{$oy:auto;$wos:touch;$c:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{$ox:auto;$wos:touch;$w:100%;$mh:100%}#_sources ._raw{-webkit-user-select:text;$us:text;$p:10px}#_sources ._code{$fs:12px}#_sources ._code ._content *{-webkit-user-select:text;$us:text}#_sources pre._code{$p:10px}#_sources table._code{$bc:collapse}#_sources table._code ._gutter{$b:var(--background);$c:var(--primary)}#_sources table._code ._line-num{$br:1px solid var(--border);$p:0 3px 0 5px;$ta:right}#_sources table._code ._code-line{$p:0 4px;$ws:pre}#_sources ._image ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_sources ._image ._img-container{$ta:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{$ta:center;$m:20px 0;$c:var(--foreground)}#_sources ._json{$p:0 10px}#_sources ._json *{-webkit-user-select:text;$us:text}#_sources iframe{$w:100%;$h:100%}",""]),q.exports=Q},3146:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{$m:0;$p:0;$bo:0;$fs:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{$d:block}._container body{$lh:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{$co:'';$co:none}._container table{$bc:collapse;border-spacing:0}",""]),q.exports=Q},6802:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,'.luna-console{$b:var(--background)}.luna-console-header{$c:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);$c:var(--foreground)}.luna-console-log-item a{$c:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$c:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$c:#e8a400}.luna-console-log-item .luna-console-count{$c:var(--select-foreground);$b:var(--highlight)}.luna-console-log-item.luna-console-warn{$c:var(--console-warn-foreground);$b:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{$b:var(--console-error-background);$c:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{$b:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{$c:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{$c:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{$c:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{$c:var(--comment-color)}.luna-console-preview .luna-console-key{$c:var(--var-color)}.luna-console-preview .luna-console-number{$c:var(--number-color)}.luna-console-preview .luna-console-null{$c:var(--operator-color)}.luna-console-preview .luna-console-string{$c:var(--string-color)}.luna-console-preview .luna-console-boolean{$c:var(--keyword-color)}.luna-console-preview .luna-console-special{$c:var(--operator-color)}.luna-console-preview .luna-console-keyword{$c:var(--keyword-color)}.luna-console-preview .luna-console-operator{$c:var(--operator-color)}.luna-console-preview .luna-console-comment{$c:var(--comment-color)}.luna-object-viewer{$c:var(--primary);$fs:12px!important}.luna-object-viewer-null{$c:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:var(--string-color)}.luna-object-viewer-number{$c:var(--number-color)}.luna-object-viewer-boolean{$c:var(--keyword-color)}.luna-object-viewer-special{$c:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;$btc:var(--foreground)}.luna-object-viewer-collapsed:before{$btc:transparent;$blc:var(--foreground)}.luna-notification{$pe:none!important;$p:10px;$z:1000}.luna-notification-item{$z:500;$c:var(--foreground);$b:var(--background);$bs:none;$p:5px 10px;$bo:1px solid var(--border)}.luna-notification-upper{$mb:10px}.luna-notification-lower{$mt:10px}.luna-data-grid{$c:var(--foreground);$b:var(--background);border-color:var(--border)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{$b:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:hover{$b:var(--darker-background)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){$b:var(--contrast)}.luna-dom-viewer{$c:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{$c:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{$c:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{$c:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-selection{$b:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{$c:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:var(--comment-color)}.luna-dom-viewer-children{$m:0;$pl:15px!important}._container{$pe:none;$po:fixed;$l:0;$t:0;$w:100%;$h:100%;$z:1000000;$c:var(--foreground);$ff:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;$fs:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{$bsi:border-box;$pe:all;-webkit-user-select:none;$us:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;$p:0;$m:0}._container h1,._container h2,._container h3,._container h4{$m:0}._hidden{$d:none}._icon-disabled{opacity:.5}._tag-name-color{$c:var(--tag-name-color)}._function-color{$c:var(--function-color)}._attribute-name-color{$c:var(--attribute-name-color)}._operator-color{$c:var(--operator-color)}._string-color{$c:var(--string-color)}',""]),q.exports=Q},276:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{$d:inline-block;$ff:luna-console-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{$co:'\\f101'}.luna-console-icon-input:before{$co:'\\f102'}.luna-console-icon-output:before{$co:'\\f103'}.luna-console-icon-warn:before{$co:'\\f104'}.luna-console-icon-caret-down:before{$co:'\\f105'}.luna-console-icon-caret-right:before{$co:'\\f106'}.luna-console{$b:#fff;$oy:auto;$wos:touch;$h:100%;$po:relative;$wc:scroll-position;$cu:default;$fs:12px;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{$d:none}.luna-console-fake-logs{$po:absolute;$l:0;$t:0;$pe:none;$v:hidden;$w:100%}.luna-console-logs{$pt:1px;$po:absolute;$w:100%}.luna-console-log-container{$bsi:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{$ws:nowrap;$d:flex;$fs:11px;$c:#545454;$bt:1px solid transparent;$bb:1px solid #ccc}.luna-console-header .luna-console-time-from-container{$ox:auto;$wos:touch;$p:3px 10px}.luna-console-nesting-level{$w:14px;$fsh:0;$mt:-1px;$mb:-1px;$po:relative;$br:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{$co:''}.luna-console-nesting-level::before{$bb:1px solid #ccc;$po:absolute;$t:0;$l:0;$ml:100%;$w:5px;$h:100%;$bsi:border-box}.luna-console-log-item{$po:relative;$d:flex;$bt:1px solid transparent;$bb:1px solid #ccc;$mt:-1px;$c:#333}.luna-console-log-item:after{$co:'';$d:block;$cl:both}.luna-console-log-item .luna-console-code{$d:inline;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:#881280}.luna-console-log-item .luna-console-code .luna-console-number{$c:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{$c:grey}.luna-console-log-item .luna-console-code .luna-console-comment{$c:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{$c:#1a1aa6}.luna-console-log-item a{$c:#15c!important}.luna-console-log-item .luna-console-icon-container{$m:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$lh:20px;$fs:12px;$c:#333;$po:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{$t:0;$l:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$t:0;$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$t:0;$c:#e8a400}.luna-console-log-item .luna-console-count{$b:#8097bd;$c:#fff;$p:2px 4px;$bra:10px;$fs:12px;$f:left;$m:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{$fl:1;$o:hidden}.luna-console-log-item .luna-console-log-content{$p:3px 0;$m:0 10px;$ox:auto;$wos:touch;$ws:pre-wrap;-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{$ws:initial}.luna-console-log-item.luna-console-error{$z:50;$b:#fff0f0;$c:red;$bt:1px solid #ffd6d6;$bb:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{$pl:1.2em;$ws:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{$b:red}.luna-console-log-item.luna-console-debug{$z:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{$z:40;$c:#5c5c00;$b:#fffbe5;$bt:1px solid #fff5c2;$bb:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{$b:#e8a400}.luna-console-log-item.luna-console-info{$z:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{$fw:700}.luna-console-preview{$d:inline-block}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{$c:#881391}.luna-console-preview .luna-console-number{$c:#1c00cf}.luna-console-preview .luna-console-null{$c:#5e5e5e}.luna-console-preview .luna-console-string{$c:#c41a16}.luna-console-preview .luna-console-boolean{$c:#0d22aa}.luna-console-preview .luna-console-special{$c:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{$c:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{$c:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{$c:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{$c:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{$b:#290000;$c:#ff8080;$btc:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{$b:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{$c:#ffcb6b;$b:#332a00;$btc:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{$b:#42597f;$c:#949494}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{$c:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{$c:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{$c:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{$c:#7f7f7f}",""]),q.exports=Q},2456:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,".luna-data-grid{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$po:relative;$fs:12px;$bo:1px solid #ccc;$o:hidden}.luna-data-grid.luna-data-grid-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{$d:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{$v:hidden}.luna-data-grid *{$bsi:border-box}.luna-data-grid.luna-data-grid-theme-dark{$c:#a5a5a5;$b:#242424;border-color:#3d3d3d}.luna-data-grid table{$w:100%;$h:100%;$bc:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{$p:1px 4px;border-left:1px solid #ccc;$ws:nowrap;text-overflow:ellipsis;$o:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{$fw:400;$bb:1px solid #ccc;$ta:left;$b:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:hover{$b:#e6e6e6}.luna-data-grid td{$h:20px;$cu:default;-webkit-user-select:text;$us:text}.luna-data-grid-data-container,.luna-data-grid-header-container{$o:hidden}.luna-data-grid-header-container{$h:21px}.luna-data-grid-data-container{$oy:auto}.luna-data-grid-data-container tr:nth-child(even){$b:#f2f7fd}.luna-data-grid-filler-row td{$h:auto}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{$b:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{$b:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){$b:#0b2544}",""]),q.exports=Q},5141:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{$d:inline-block;$ff:luna-dom-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{$co:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{$co:'\\f102'}.luna-dom-viewer{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$oy:auto;$wos:touch;$b:0 0;$ox:hidden;word-wrap:break-word;$p:0 0 0 12px;$fs:12px;$h:100%;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$cu:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{$d:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{$v:hidden}.luna-dom-viewer *{$bsi:border-box}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{$c:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;$ml:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{$po:absolute!important;$fs:12px!important}.luna-dom-viewer-tree-item{$lh:16px;$mh:16px;$po:relative;$z:10}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{$d:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{$d:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{$d:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{$d:none}.luna-dom-viewer-html-tag{$c:#881280}.luna-dom-viewer-tag-name{$c:#881280}.luna-dom-viewer-attribute-name{$c:#994500}.luna-dom-viewer-attribute-value{$c:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{$c:#236e25}.luna-dom-viewer-selection{$po:absolute;$d:none;$l:-10000px;right:-10000px;$t:0;bottom:0;$z:-1;$b:#f2f7fd}.luna-dom-viewer-children{$m:0;$ox:visible;$oy:visible;$pl:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{$c:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{$c:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{$c:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{$c:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{$c:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-selection{$b:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#f29766}",""]),q.exports=Q},5674:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,".luna-notification{$po:fixed;$t:0;$l:0;$w:100%;$h:100%;$p:20px;$bsi:border-box;$pe:none;$d:flex;flex-direction:column;$fs:14px;$ff:Arial,Helvetica,sans-serif}.luna-notification-item{$d:flex;$bs:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);$p:10px 16px;$c:#333;$b:#fff}.luna-notification-lower{$mt:16px}.luna-notification-upper{$mb:16px}.luna-notification-theme-dark .luna-notification-item{$bs:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);$c:#a5a5a5;$b:#242424}",""]),q.exports=Q},8418:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{$d:inline-block;$ff:luna-object-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{$co:'\\f101'}.luna-object-viewer-icon-caret-right:before{$co:'\\f102'}.luna-object-viewer{$ox:auto;$wos:touch;$oy:hidden;$cu:default;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$fs:12px;$lh:1.2;$mh:100%;$c:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;$p:0!important;$pl:12px!important;$m:0!important}.luna-object-viewer li{$po:relative;$ws:nowrap;$lh:16px;$mh:16px}.luna-object-viewer>li>.luna-object-viewer-key{$d:none}.luna-object-viewer span{$po:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{$c:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{$d:inline}.luna-object-viewer-null{$c:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:#c41a16}.luna-object-viewer-number{$c:#1c00cf}.luna-object-viewer-boolean{$c:#0d22aa}.luna-object-viewer-special{$c:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{$po:absolute!important;$l:-12px;$c:#727272;$fs:12px}.luna-object-viewer-icon-caret-right{$t:1px}.luna-object-viewer-icon-caret-down{$t:2px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{$d:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{$d:inline}.luna-object-viewer-hidden~ul{$d:none}.luna-object-viewer-theme-dark{$c:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{$c:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{$c:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{$c:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{$c:#5db0d7}",""]),q.exports=Q},8998:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA48AAsAAAAAGjgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAQEAAAG4LO8vdU9TLzIAAAIMAAAAPwAAAFZWm1KOY21hcAAAAkwAAAFLAAADpkj8yKVnbHlmAAADmAAAB88AAA7wW62fimhlYWQAAAtoAAAAMQAAADZ26MSyaGhlYQAAC5wAAAAdAAAAJAgEBC1obXR4AAALvAAAAB0AAACoVAv//GxvY2EAAAvcAAAANwAAAFZo5GTkbWF4cAAADBQAAAAfAAAAIAE7AQ1uYW1lAAAMNAAAASkAAAIWm5e+CnBvc3QAAA1gAAAA2gAAAT5KT479eJxNjzFTwkAQhb+DJARBRhlMgokoISahs7KwsHKsKC1oqRxnGCpLf4+/wB/ouwWFu9m7vX1v973DAWc88Ezn5XX1xmi7+dxxTcB+efw0d9uP9w3x30tYYHeMc2v6ZKzY8cU3Py5xrXukQ8RM54BUO2Oq6Sm33DFX3Un9WM8puDF2RMKInr1TnY3YF4SWFdYXcKVIhFZ0pZ9QSiNiSa28YiE34WF2ylCcVp2+b6LItHPhQzGf5Hmt2sCm+emnDrtyeKwvzGklnVjZvbT27hrNCs2/5/ZMoZai14vFLgybHRycK3IxW/vphEtj+M5SmuN/fmk/7Rsytf5SDmqaXw7eF6sAAAB4nGNgZGJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD8KsYC4MSxAg4A0CDMAALA5CMsAeJy100lOAlEQxvF/QwuCE2JAZhlFEj0UwTFxipKgd/FArlx7jXcC/KpfLdxiYpEfla5+dBf9qoEtIC/nkkLyRYLFp6pJVs9TzuopHzqu6GPrL5hzxzNL3kN1vfbKgnteWIUkq/yOJPtlhQ5jzrK7tagzZKRKlz4DTmgz0dkGpxwzpUeTmdYm5HTHVJ0WKLJNSf3sssc+BxxS5YiaLl9gs2htuN5C/Y463f7gBNqTcUNtTnvQnJ394Vr/Ebv2lXz70Sm2J5H927mry8IN5dKN5Mp15Np15cb15dYN5M7piWjno7Y8uIk8urE8uYY8O+vzxR3Lq5vK0ukxs3JNeXMzeXfahZBENrkhF2E5H9nkhjSyaQ9bkb0FoRBhuRhheTvCcinCcjmytyPsRLYDwWlCCU6zSnCaWoLT/BIqkSaZcBhppgnViNoPob5MjAB4nO1XXWwU1xW+597Zmf2ZndnZnZ3ZH7zL7jKz3vV6/70LdrCxMMZgg8H8NRgwxBQIoNLSJHXUVuIxiQhS3L6l6UvdqoIqiQQVLWpQRdWmVbFUNbSqVCkPfUjTPlSqKiE1zY577uyCm1R5zwP+Offce84959xzv3vuXAIEfxhlvyAKIVY274NW3dAlHxi6SN/Tg84M/Fixk4pzFb6qJEcVuIX9ZD7oXHVeDeaTxJ1PH7IV4iHEB20f5Ok5542dcN05vBM6cHLSOerMT3b1mEW/xf2ALoGYzYPdbDUydYNZgTUSSHFiqJSoBv2SyjsBwNFotOfjG8xan2sPac1W3QSDfh01/SnDSPlRGyevW+EcYa7f99n7xE+ipOiu0c7bQ802iBE01WrUTcM0ICuJkqhztt5utVtNrkSDR3ZPDQzU4PbMX2rO1J7jh6eniiXnl9+8eG7r2NjWcxc/esT8sVScmj48P+tM1WBsfi/crg0MTO2Gy59Qchl3KW5Mb7O3iUmquCJNF7MVkDixm2OQ76UFdBVM3IZcprfcNLQ5MSgx+gIH3hFVcdzjuTsXMBTA5cJbXX4N+XU5/HmNKEZg7q7HM44D7xwI9BkGfEXqcSqsS3u5+jI7TxKYqTJG1g0kigEOQBbDGgEtE9V5+nPrIje+iJbRYDwchH8Gw+HgHU5ed/aEE+E7fEyORGRHDYZH4Sab5jLeQSHcfJ33HolR9ffOHriJYXTx8i77Oe4hAYQlQtJEfAH71ZJz07m1BDMugT1Lzi22EwnMfELA87y2RogAAsHVbEcrogpivoz5HYMKlKFlYC55TnHTVWoakoJ7gFtQAUs3U8CRMAocCnxK1pXCw1BmJNYXDFNBfz47p9GNBe1ZKrAXjS2iED0f+JrpFwwlrl+gAu04/flrxxZ+t3DsWr7/f1h4C2309F7IzGnFNNXOU49nyYykEvoF75LZp3D7F6go7Dj36dku+xhDt9ltEnMx9FlY+Uxw/VtEtERVFy0pfxctItxd57tyF1nf9yJc+CHj3SjCReS6H6ytd9Sewuc2ri62/8AOkzBJkxpG5u7o423me8yyZWiOQj0FugIsq9ConoKGMUqbZQr/efbk8WuWde34yfceMeeHF4eHF5/nZCRe3aTnRnIJbPRNVXaoUFg+sbDcXyz2Ly+cWC4UOh/0NJHA06gS3zSSBWwbOOMx3sfZFaLyOmrnsiKeLaNRb0OryYqdB4GAZpqaX6Ylg5ZhRjS1zj7NlGA6vJk8nn+D3eA1DsGdWy9oDXeBOYXm3NLX5PXNrXpSRmODT33n0HOnT24ZHt5y8vRzp75wcMm8ZMy/uP3INFY+LGLTR8ZHtpR+BC+wwa3jI5tPLX64eGrzSLGwPD92aqhU3LX7zd27iqVEbBBV1uO4x+6Rfqy1CmTLdKjxqbrqxmZmNJPnmuoiG922cmvlysTFyuDe2TuzewcrnDm+Y9vW6ivOTy53hRP3tk1MXFk5evyR3FVMJiqvwNRlV3Rr5XPgX3T9/51dJSHSRzLEIgUyyG+dMm2OUu5OoQgtQGTVR6FZBo8V9TD8x8KagbYp0TfqRydte/Lo6W5Tr81Vq3PPcNK5AAecN4ET9trHl+ifqj+s/tqenF/sai7OT9pwo6eLZBgmqPMvugPohxOd1dr3aut3z8/wPoxglSdWLovHEg8ez1Af5IYyWgMkU8pLDA5dP3uWniknIl420Tl8n55dXd1x/+WXbpyhZ84mIik1eH21cwi0l+/vWF2lOTQrEbK2JngEIK+RG+QBeUg+Ih2+IdAagyHMfBnPu813oN1yG5FjNNsTqKAAFgaswzjoylSIGmbvN4qFxB3ioziQ6tZtro0kDY2WC2uz3u1hZxSLvOuq3eJDBrYYRc899Nqu1Ox5lfCaa9tuPHxumeYxE64z1wLnqJl3p+QxDs613aBs96bIcwuoxR2hcbOdx9l5yWTvKiktHAtIRrivHN/ok0PUJw1tlxOCGovuMxIqS0qp4bTiF5gEzJOpqCUj6fMbIUGQtIg3KEgCgNcjS/6oEkrIkqmlBuMbvbLCZGnD8Ka439TTkYIuKh5vSI4VmknNJ4JI0VLVrwdMpkUkOR4qhSKMSYKz7fTcbGmQsXp9/4GFxbl9g2VKq9XZuQX5rx5/cENl14QS9vqiVrZeGQfJK7djWqxYiWk4ZmcbhlcOyb/R+wVfUPYKqurTgoLIDOaRCnUzIujlfLxiMc/O6HdLB2emvkjTdK9f88fyraTml2Q5njXSlsekyZgQ8G6U5UAwI/mZLx4UI6rfCIS9tY2BkFcxEs3+EFCPLyD6/UYqbHlFr+D1iLIUsp9Kdy1lYilLNAQlEbIjqoeCXwxuiEZMnmXBCER81bTIqAQeX2hDy44lQpGk2VKdp1mjdvDQmRP79pTKjNZr+w88s7B/tlz9qa3H5cjYTjUS60spbLi5WSxqCVkLxAvVeJiP0S0p0ecVRzCh3lBY1ZjkCQbkgGhKctCuxvSiXt4Uq+WZuKK/VPjb9OwlSD85E0/OxJMz8X9ngq118LucCRTfcwmCN4eFHywiPuvwayuDtyI+O7ovC/xmNPmzA1+kIvuHc0xvtXSkvtYAqw60fJ3fpoop/GskLatlWd9mJTuZtD9+kB+37XF6NJpKRZ0fcPrQGrLtIQtd/xdNFnxoAHicY2BkYGAA4uO3TujH89t8ZeBmAQlEcT7e1wCj///9/5+FlYUJKMHBACIZAHZ2DWYAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABVoAW+QEOwAAAHicY2BgYGAhiP//J6wGiFmhmOH/XwYqAwDQmQRZAAAAeJxjYAACBQYThiCGAoZdjGyMPox5jHeYNJhKmI4wPWHWYM5gXsH8g0WNdQO7FXsFsRAA+8AThAB4nGNgZGBg0GJkZGBnAAEmIOYCQgaG/2A+AwANjAFKAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicbYzZboMwFEQ5CUsK3fc93ZdUPOSTLHMJkRyMjCXC35eG187DmdFIM8EkGJUG/2vBhCkhETEJM/ZIydjngEOOOOaEU84454JLrrjmhlvuuOeBR+Y88cwLr7zxzgeffPHNgp8gVc7ZLjdS+myMbr2qfKqVE58XtquzMe7qSBtRbqbtpnHStqG2TR8XYsRLJMPaxbJtVF3MRsuXU+klbIzqEyflMKmiAeKTHfNl3A53uhrMiPaht9bEf8iXYadcjcJh6cgxCCWeNSsqNAU1GxpaerZB8AvjDkPxAAA=') format('woff')}[class*=' _icon-'],[class^='_icon-']{$d:inline-block;$ff:eruda-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{$co:'\\f101'}._icon-arrow-right:before{$co:'\\f102'}._icon-caret-down:before{$co:'\\f103'}._icon-caret-right:before{$co:'\\f104'}._icon-clear:before{$co:'\\f105'}._icon-compress:before{$co:'\\f106'}._icon-copy:before{$co:'\\f107'}._icon-delete:before{$co:'\\f108'}._icon-error:before{$co:'\\f109'}._icon-expand:before{$co:'\\f10a'}._icon-eye:before{$co:'\\f10b'}._icon-play:before{$co:'\\f10c'}._icon-refresh:before{$co:'\\f10d'}._icon-reset:before{$co:'\\f10e'}._icon-search:before{$co:'\\f10f'}._icon-select:before{$co:'\\f110'}._icon-tool:before{$co:'\\f111'}._icon-warn:before{$co:'\\f112'}",""]),q.exports=Q},4432:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"console-container",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"control",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-clear clear-console",{name:"class",hash:{},data:we}))!=null?he:"")+"></span> <span "+((he=xe(Ee,"class").call(ye,"filter active",{name:"class",hash:{},data:we}))!=null?he:"")+' data-filter="all">All</span> <span '+((he=xe(Ee,"class").call(ye,"filter",{name:"class",hash:{},data:we}))!=null?he:"")+' data-filter="error">Error</span> <span '+((he=xe(Ee,"class").call(ye,"filter",{name:"class",hash:{},data:we}))!=null?he:"")+' data-filter="warn">Warning</span> <span '+((he=xe(Ee,"class").call(ye,"filter",{name:"class",hash:{},data:we}))!=null?he:"")+' data-filter="info">Info</span> <span '+((he=xe(Ee,"class").call(ye,"search-keyword",{name:"class",hash:{},data:we}))!=null?he:"")+"></span> <span "+((he=xe(Ee,"class").call(ye,"icon-search search",{name:"class",hash:{},data:we}))!=null?he:"")+"></span> <span "+((he=xe(Ee,"class").call(ye,"icon-copy icon-disabled copy",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"logs-container",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"logs-space",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"fake-logs",{name:"class",hash:{},data:we}))!=null?he:"")+"></div><div "+((he=xe(Ee,"class").call(ye,"logs",{name:"class",hash:{},data:we}))!=null?he:"")+"></div></div></div><div "+((he=xe(Ee,"class").call(ye,"js-input",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"buttons",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"button cancel",{name:"class",hash:{},data:we}))!=null?he:"")+">Cancel</div><div "+((he=xe(Ee,"class").call(ye,"button execute",{name:"class",hash:{},data:we}))!=null?he:"")+">Execute</div></div><span "+((he=xe(Ee,"class").call(ye,"icon-arrow-right",{name:"class",hash:{},data:we}))!=null?he:"")+"></span> <textarea></textarea></div></div>"},useData:!0})},8269:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"dev-tools",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"nav-bar-container",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"nav-bar",{name:"class",hash:{},data:we}))!=null?he:"")+'></div><div class="eruda-bottom-bar"></div></div><div '+((he=xe(Ee,"class").call(ye,"tools",{name:"class",hash:{},data:we}))!=null?he:"")+'></div><div class="eruda-notification"></div></div>'},useData:!0})},2407:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"bottom-bar",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"btn select",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon icon-select",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn highlight",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon icon-eye",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn reset",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon icon-reset",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div></div>"},useData:!0})},6560:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <ul "+((he=xe(Ee,"class").call(ye,"parents",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"parents"):ne,{name:"each",hash:{},fn:ce.program(2,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </ul> "},2:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return" <li><div "+((he=Te(Ee,"class").call(ye,"parent",{name:"class",hash:{},data:we}))!=null?he:"")+' data-idx="'+ce.escapeExpression(xe(ne!=null?Te(ne,"idx"):ne,ne))+'">'+((he=xe(ne!=null?Te(ne,"text"):ne,ne))!=null?he:"")+"</div><span "+((he=Te(Ee,"class").call(ye,"icon-arrow-right",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></li> "},4:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <ul "+((he=xe(Ee,"class").call(ye,"children",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"children"):ne,{name:"each",hash:{},fn:ce.program(5,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </ul> "},5:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return' <li class="eruda-child '+((he=Te(Ee,"if").call(ye,ne!=null?Te(ne,"isCmt"):ne,{name:"if",hash:{},fn:ce.program(6,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "+((he=Te(Ee,"if").call(ye,ne!=null?Te(ne,"isEl"):ne,{name:"if",hash:{},fn:ce.program(8,we,0),inverse:ce.noop,data:we}))!=null?he:"")+'" data-idx="'+ce.escapeExpression(xe(ne!=null?Te(ne,"idx"):ne,ne))+'">'+((he=xe(ne!=null?Te(ne,"text"):ne,ne))!=null?he:"")+"</li> "},6:function(ce,ne,Ee,j,we){return"eruda-green"},8:function(ce,ne,Ee,j,we){return"eruda-active-effect"},10:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"attributes"):ne,{name:"each",hash:{},fn:ce.program(11,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},11:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return' <tr><td class="eruda-attribute-name-color">'+ce.escapeExpression(ye(ne!=null?xe(ne,"name"):ne,ne))+'</td><td class="eruda-string-color">'+((he=ye(ne!=null?xe(ne,"value"):ne,ne))!=null?he:"")+"</td></tr> "},13:function(ce,ne,Ee,j,we){return" <tr><td>Empty</td></tr> "},15:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"styles section",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2>Styles</h2><div "+((he=xe(Ee,"class").call(ye,"style-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"styles"):ne,{name:"each",hash:{},fn:ce.program(16,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </div></div> "},16:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"style-rules",{name:"class",hash:{},data:we}))!=null?he:"")+"><div>"+ce.escapeExpression(ce.lambda(ne!=null?xe(ne,"selectorText"):ne,ne))+" {</div> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"style"):ne,{name:"each",hash:{},fn:ce.program(17,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" <div>}</div></div> "},17:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"rule",{name:"class",hash:{},data:we}))!=null?he:"")+"><span>"+ce.escapeExpression(ye(we&&xe(we,"key"),ne))+"</span>: "+((he=ye(ne,ne))!=null?he:"")+";</div> "},19:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return" <div "+((he=Se(Ee,"class").call(ye,"computed-style section",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2>Computed Style "+((he=Se(Ee,"if").call(ye,ne!=null?Se(ne,"rmDefComputedStyle"):ne,{name:"if",hash:{},fn:ce.program(20,we,0),inverse:ce.program(22,we,0),data:we}))!=null?he:"")+" <div "+((he=Se(Ee,"class").call(ye,"btn computed-style-search",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=Se(Ee,"class").call(ye,"icon-search",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div> "+((he=Se(Ee,"if").call(ye,ne!=null?Se(ne,"computedStyleSearchKeyword"):ne,{name:"if",hash:{},fn:ce.program(24,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </h2><div "+((he=Se(Ee,"class").call(ye,"box-model",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=Se(Ee,"if").call(ye,(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"position"):he,{name:"if",hash:{},fn:ce.program(26,we,0),inverse:ce.noop,data:we}))!=null?he:"")+"<div "+((he=Se(Ee,"class").call(ye,"margin",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(ye,"label",{name:"class",hash:{},data:we}))!=null?he:"")+">margin</div><div "+((he=Se(Ee,"class").call(ye,"top",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"margin"):he)!=null?Se(he,"top"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"left",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"margin"):he)!=null?Se(he,"left"):he,ne))+"</div><div "+((he=Se(Ee,"class").call(ye,"border",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(ye,"label",{name:"class",hash:{},data:we}))!=null?he:"")+">border</div><div "+((he=Se(Ee,"class").call(ye,"top",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"border"):he)!=null?Se(he,"top"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"left",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"border"):he)!=null?Se(he,"left"):he,ne))+"</div><div "+((he=Se(Ee,"class").call(ye,"padding",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(ye,"label",{name:"class",hash:{},data:we}))!=null?he:"")+">padding</div><div "+((he=Se(Ee,"class").call(ye,"top",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"padding"):he)!=null?Se(he,"top"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"left",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"padding"):he)!=null?Se(he,"left"):he,ne))+"</div><div "+((he=Se(Ee,"class").call(ye,"content",{name:"class",hash:{},data:we}))!=null?he:"")+"><span>"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"content"):he)!=null?Se(he,"width"):he,ne))+"</span>&nbsp;\xD7&nbsp;<span>"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"content"):he)!=null?Se(he,"height"):he,ne))+"</span></div><div "+((he=Se(Ee,"class").call(ye,"right",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"padding"):he)!=null?Se(he,"right"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"bottom",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"padding"):he)!=null?Se(he,"bottom"):he,ne))+"</div></div><div "+((he=Se(Ee,"class").call(ye,"right",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"border"):he)!=null?Se(he,"right"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"bottom",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"border"):he)!=null?Se(he,"bottom"):he,ne))+"</div></div><div "+((he=Se(Ee,"class").call(ye,"right",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"margin"):he)!=null?Se(he,"right"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"bottom",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"margin"):he)!=null?Se(he,"bottom"):he,ne))+"</div></div>"+((he=Se(Ee,"if").call(ye,(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"position"):he,{name:"if",hash:{},fn:ce.program(28,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </div><div "+((he=Se(Ee,"class").call(ye,"table-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"><table><tbody> "+((he=Se(Ee,"each").call(ye,ne!=null?Se(ne,"computedStyle"):ne,{name:"each",hash:{},fn:ce.program(30,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </tbody></table></div></div> "},20:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"btn toggle-all-computed-style",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-compress",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div> "},22:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"btn toggle-all-computed-style",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-expand",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div> "},24:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" <div "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"computedStyleSearchKeyword"):ne,ne))+" </div> "},26:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return"<div "+((he=Se(Ee,"class").call(ye,"position",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(ye,"label",{name:"class",hash:{},data:we}))!=null?he:"")+">position</div><div "+((he=Se(Ee,"class").call(ye,"top",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"position"):he)!=null?Se(he,"top"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"left",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"position"):he)!=null?Se(he,"left"):he,ne))+"</div>"},28:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return"<div "+((he=Se(Ee,"class").call(ye,"right",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"position"):he)!=null?Se(he,"right"):he,ne))+"</div><br><div "+((he=Se(Ee,"class").call(ye,"bottom",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe((he=(he=ne!=null?Se(ne,"boxModel"):ne)!=null?Se(he,"position"):he)!=null?Se(he,"bottom"):he,ne))+"</div></div>"},30:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <tr><td "+((he=xe(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"key",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ye(we&&xe(we,"key"),ne))+"</td><td>"+((he=ye(ne,ne))!=null?he:"")+"</td></tr> "},32:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"listeners section",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2>Event Listeners</h2><div "+((he=xe(Ee,"class").call(ye,"listener-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"listeners"):ne,{name:"each",hash:{},fn:ce.program(33,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </div></div> "},33:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"listener",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"listener-type",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(we&&xe(we,"key"),ne))+"</div><ul "+((he=xe(Ee,"class").call(ye,"listener-content",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne,{name:"each",hash:{},fn:ce.program(34,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </ul></div> "},34:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" <li "+((he=ye(Ee,"if").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"useCapture"):ne,{name:"if",hash:{},fn:ce.program(35,we,0),inverse:ce.noop,data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"listenerStr"):ne,ne))+"</li> "},35:function(ce,ne,Ee,j,we){var he;return(he=(ce.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]})(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"capture",{name:"class",hash:{},data:we}))!=null?he:""},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"parents"):ne,{name:"if",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" <div "+((he=xe(Ee,"class").call(ye,"breadcrumb",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=ce.lambda(ne!=null?xe(ne,"name"):ne,ne))!=null?he:"")+" </div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"children"):ne,{name:"if",hash:{},fn:ce.program(4,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" <div "+((he=xe(Ee,"class").call(ye,"attributes section",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2>Attributes</h2><div "+((he=xe(Ee,"class").call(ye,"table-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"><table><tbody> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"attributes"):ne,{name:"if",hash:{},fn:ce.program(10,we,0),inverse:ce.program(13,we,0),data:we}))!=null?he:"")+" </tbody></table></div></div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"styles"):ne,{name:"if",hash:{},fn:ce.program(15,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"computedStyle"):ne,{name:"if",hash:{},fn:ce.program(19,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"listeners"):ne,{name:"if",hash:{},fn:ce.program(32,we,0),inverse:ce.noop,data:we}))!=null?he:"")},useData:!0})},7640:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"entry-btn",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-tool",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div>"},useData:!0})},2861:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return" <li><h2 "+((he=Te(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(xe(ne!=null?Te(ne,"name"):ne,ne))+"</h2><div "+((he=Te(Ee,"class").call(ye,"content",{name:"class",hash:{},data:we}))!=null?he:"")+">"+((he=xe(ne!=null?Te(ne,"val"):ne,ne))!=null?he:"")+"</div></li> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return"<ul> "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"infos"):ne,{name:"each",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </ul>"},useData:!0})},4854:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Request<div "+((he=xe(Ee,"class").call(ye,"btn clear-request",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-clear",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div></div><ul "+((he=xe(Ee,"class").call(ye,"requests",{name:"class",hash:{},data:we}))!=null?he:"")+"></ul><div "+((he=xe(Ee,"class").call(ye,"detail",{name:"class",hash:{},data:we}))!=null?he:"")+"></div>"},useData:!0})},1083:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" <pre "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"data",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"data"):ne,ne))+"</pre> "},3:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"reqHeaders"):ne,{name:"each",hash:{},fn:ce.program(4,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},4:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return" <tr><td "+((he=Te(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"key",{name:"class",hash:{},data:we}))!=null?he:"")+">"+xe(ye(we&&Te(we,"key"),ne))+"</td><td>"+xe(ye(ne,ne))+"</td></tr> "},6:function(ce,ne,Ee,j,we){return" <tr><td>Empty</td></tr> "},8:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"resHeaders"):ne,{name:"each",hash:{},fn:ce.program(4,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},10:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" <pre "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"response",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"resTxt"):ne,ne))+"</pre> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"http",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"breadcrumb",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?xe(ne,"url"):ne,ne))+"</div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"data"):ne,{name:"if",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" <div "+((he=xe(Ee,"class").call(ye,"section",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2>Request Headers</h2><table "+((he=xe(Ee,"class").call(ye,"headers",{name:"class",hash:{},data:we}))!=null?he:"")+"><tbody> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"reqHeaders"):ne,{name:"if",hash:{},fn:ce.program(3,we,0),inverse:ce.program(6,we,0),data:we}))!=null?he:"")+" </tbody></table><h2>Response Headers</h2><table "+((he=xe(Ee,"class").call(ye,"headers",{name:"class",hash:{},data:we}))!=null?he:"")+"><tbody> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"resHeaders"):ne,{name:"if",hash:{},fn:ce.program(8,we,0),inverse:ce.program(6,we,0),data:we}))!=null?he:"")+" </tbody></table></div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"resTxt"):ne,{name:"if",hash:{},fn:ce.program(10,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </div><div "+((he=xe(Ee,"class").call(ye,"back",{name:"class",hash:{},data:we}))!=null?he:"")+">Back to the List</div>"},useData:!0})},726:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"requests"):ne,{name:"each",hash:{},fn:ce.program(2,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},2:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return' <li class="eruda-request '+((he=Se(Ee,"if").call(ye,ne!=null?Se(ne,"hasErr"):ne,{name:"if",hash:{},fn:ce.program(3,we,0),inverse:ce.noop,data:we}))!=null?he:"")+'" data-id="'+Te(xe(we&&Se(we,"key"),ne))+'"><span '+((he=Se(Ee,"class").call(ye,"name",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"name"):ne,ne))+"</span><span "+((he=Se(Ee,"class").call(ye,"status",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"status"):ne,ne))+"</span><span "+((he=Se(Ee,"class").call(ye,"method",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"method"):ne,ne))+"</span><span "+((he=Se(Ee,"class").call(ye,"type",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"subType"):ne,ne))+"</span><span "+((he=Se(Ee,"class").call(ye,"size",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"size"):ne,ne))+"</span><span "+((he=Se(Ee,"class").call(ye,"time",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"displayTime"):ne,ne))+"</span></li> "},3:function(ce,ne,Ee,j,we){return"eruda-error"},5:function(ce,ne,Ee,j,we){var he;return" <li><span "+((he=(ce.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]})(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"name",{name:"class",hash:{},data:we}))!=null?he:"")+">Empty</span></li> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return(he=ye(Ee,"if").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"requests"):ne,{name:"if",hash:{},fn:ce.program(1,we,0),inverse:ce.program(5,we,0),data:we}))!=null?he:""},useData:!0})},2875:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return"<div "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"localStoreSearchKeyword"):ne,ne))+"</div>"},3:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"localStoreData"):ne,{name:"each",hash:{},fn:ce.program(4,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},4:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return" <tr><td "+((he=Se(Ee,"class").call(ye,"key",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+"</td><td "+((he=Se(Ee,"class").call(ye,"storage-val",{name:"class",hash:{},data:we}))!=null?he:"")+' data-key="'+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+'" data-type="local">'+Te(xe(ne!=null?Se(ne,"val"):ne,ne))+"</td><td "+((he=Se(Ee,"class").call(ye,"control",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=Se(Ee,"class").call(ye,"icon-delete delete-storage",{name:"class",hash:{},data:we}))!=null?he:"")+' data-key="'+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+'" data-type="local"></span></td></tr> '},6:function(ce,ne,Ee,j,we){return" <tr><td>Empty</td></tr> "},8:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return"<div "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"sessionStoreSearchKeyword"):ne,ne))+"</div>"},10:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"sessionStoreData"):ne,{name:"each",hash:{},fn:ce.program(11,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},11:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return" <tr><td "+((he=Se(Ee,"class").call(ye,"key",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+"</td><td "+((he=Se(Ee,"class").call(ye,"storage-val",{name:"class",hash:{},data:we}))!=null?he:"")+' data-key="'+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+'" data-type="session">'+Te(xe(ne!=null?Se(ne,"val"):ne,ne))+"</td><td "+((he=Se(Ee,"class").call(ye,"control",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=Se(Ee,"class").call(ye,"icon-delete delete-storage",{name:"class",hash:{},data:we}))!=null?he:"")+' data-key="'+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+'" data-type="session"></span></td></tr> '},13:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return"<div "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"cookieSearchKeyword"):ne,ne))+"</div>"},15:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"cookieData"):ne,{name:"each",hash:{},fn:ce.program(16,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},16:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return" <tr><td "+((he=Se(Ee,"class").call(ye,"key",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+"</td><td>"+Te(xe(ne!=null?Se(ne,"val"):ne,ne))+"</td><td "+((he=Se(Ee,"class").call(ye,"control",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=Se(Ee,"class").call(ye,"icon-delete delete-cookie",{name:"class",hash:{},data:we}))!=null?he:"")+' data-key="'+Te(xe(ne!=null?Se(ne,"key"):ne,ne))+'"></span></td></tr> '},18:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"scriptData"):ne,{name:"each",hash:{},fn:ce.program(19,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},19:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return' <li><a href="'+xe(ye(ne,ne))+'" target="_blank" '+((he=Te(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"js-link",{name:"class",hash:{},data:we}))!=null?he:"")+">"+xe(ye(ne,ne))+"</a></li> "},21:function(ce,ne,Ee,j,we){return" <li>Empty</li> "},23:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"stylesheetData"):ne,{name:"each",hash:{},fn:ce.program(24,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},24:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return' <li><a href="'+xe(ye(ne,ne))+'" target="_blank" '+((he=Te(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"css-link",{name:"class",hash:{},data:we}))!=null?he:"")+">"+xe(ye(ne,ne))+"</a></li> "},26:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"iframeData"):ne,{name:"each",hash:{},fn:ce.program(27,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},27:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ce.lookupProperty||function(Se,Ce){if(Object.prototype.hasOwnProperty.call(Se,Ce))return Se[Ce]};return' <li><a href="'+xe(ye(ne,ne))+'" target="_blank" '+((he=Te(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"iframe-link",{name:"class",hash:{},data:we}))!=null?he:"")+">"+xe(ye(ne,ne))+"</a></li> "},29:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" "+((he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"imageData"):ne,{name:"each",hash:{},fn:ce.program(30,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" "},30:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <li "+((he=xe(Ee,"class").call(ye,"image",{name:"class",hash:{},data:we}))!=null?he:"")+'><img src="'+ce.escapeExpression(ce.lambda(ne,ne))+'" data-exclude="true" '+((he=xe(Ee,"class").call(ye,"img-link",{name:"class",hash:{},data:we}))!=null?he:"")+"></li> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"section local-storage",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Local Storage<div "+((he=xe(Ee,"class").call(ye,"btn refresh-local-storage",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn clear-storage",{name:"class",hash:{},data:we}))!=null?he:"")+' data-type="local"><span '+((he=xe(Ee,"class").call(ye,"icon-clear",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn search",{name:"class",hash:{},data:we}))!=null?he:"")+' data-type="local"><span '+((he=xe(Ee,"class").call(ye,"icon-search",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"localStoreSearchKeyword"):ne,{name:"if",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </h2><div "+((he=xe(Ee,"class").call(ye,"content",{name:"class",hash:{},data:we}))!=null?he:"")+"><table><tbody> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"localStoreData"):ne,{name:"if",hash:{},fn:ce.program(3,we,0),inverse:ce.program(6,we,0),data:we}))!=null?he:"")+" </tbody></table></div></div><div "+((he=xe(Ee,"class").call(ye,"section session-storage",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Session Storage<div "+((he=xe(Ee,"class").call(ye,"btn refresh-session-storage",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn clear-storage",{name:"class",hash:{},data:we}))!=null?he:"")+' data-type="session"><span '+((he=xe(Ee,"class").call(ye,"icon-clear",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn search",{name:"class",hash:{},data:we}))!=null?he:"")+' data-type="session"><span '+((he=xe(Ee,"class").call(ye,"icon-search",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"sessionStoreSearchKeyword"):ne,{name:"if",hash:{},fn:ce.program(8,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </h2><div "+((he=xe(Ee,"class").call(ye,"content",{name:"class",hash:{},data:we}))!=null?he:"")+"><table><tbody> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"sessionStoreData"):ne,{name:"if",hash:{},fn:ce.program(10,we,0),inverse:ce.program(6,we,0),data:we}))!=null?he:"")+" </tbody></table></div></div><div "+((he=xe(Ee,"class").call(ye,xe(Ee,"concat").call(ye,"section cookie ",ne!=null?xe(ne,"cookieState"):ne,{name:"concat",hash:{},data:we}),{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Cookie<div "+((he=xe(Ee,"class").call(ye,"btn refresh-cookie",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn clear-cookie",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-clear",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div><div "+((he=xe(Ee,"class").call(ye,"btn search",{name:"class",hash:{},data:we}))!=null?he:"")+' data-type="cookie"><span '+((he=xe(Ee,"class").call(ye,"icon-search",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"cookieSearchKeyword"):ne,{name:"if",hash:{},fn:ce.program(13,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </h2><div "+((he=xe(Ee,"class").call(ye,"content",{name:"class",hash:{},data:we}))!=null?he:"")+"><table><tbody> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"cookieData"):ne,{name:"if",hash:{},fn:ce.program(15,we,0),inverse:ce.program(6,we,0),data:we}))!=null?he:"")+" </tbody></table></div></div><div "+((he=xe(Ee,"class").call(ye,xe(Ee,"concat").call(ye,"section script ",ne!=null?xe(ne,"scriptState"):ne,{name:"concat",hash:{},data:we}),{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Script<div "+((he=xe(Ee,"class").call(ye,"btn refresh-script",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div></h2><ul "+((he=xe(Ee,"class").call(ye,"link-list",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"scriptData"):ne,{name:"if",hash:{},fn:ce.program(18,we,0),inverse:ce.program(21,we,0),data:we}))!=null?he:"")+" </ul></div><div "+((he=xe(Ee,"class").call(ye,xe(Ee,"concat").call(ye,"section stylesheet ",ne!=null?xe(ne,"stylesheetState"):ne,{name:"concat",hash:{},data:we}),{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Stylesheet<div "+((he=xe(Ee,"class").call(ye,"btn refresh-stylesheet",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div></h2><ul "+((he=xe(Ee,"class").call(ye,"link-list",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"stylesheetData"):ne,{name:"if",hash:{},fn:ce.program(23,we,0),inverse:ce.program(21,we,0),data:we}))!=null?he:"")+" </ul></div><div "+((he=xe(Ee,"class").call(ye,"section iframe",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,"title",{name:"class",hash:{},data:we}))!=null?he:"")+">Iframe<div "+((he=xe(Ee,"class").call(ye,"btn refresh-iframe",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div></h2><ul "+((he=xe(Ee,"class").call(ye,"link-list",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"iframeData"):ne,{name:"if",hash:{},fn:ce.program(26,we,0),inverse:ce.program(21,we,0),data:we}))!=null?he:"")+" </ul></div><div "+((he=xe(Ee,"class").call(ye,"section image",{name:"class",hash:{},data:we}))!=null?he:"")+"><h2 "+((he=xe(Ee,"class").call(ye,xe(Ee,"concat").call(ye,"title ",ne!=null?xe(ne,"imageState"):ne,{name:"concat",hash:{},data:we}),{name:"class",hash:{},data:we}))!=null?he:"")+">Image<div "+((he=xe(Ee,"class").call(ye,"btn refresh-image",{name:"class",hash:{},data:we}))!=null?he:"")+"><span "+((he=xe(Ee,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></div></h2><ul "+((he=xe(Ee,"class").call(ye,"image-list",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"if").call(ye,ne!=null?xe(ne,"imageData"):ne,{name:"if",hash:{},fn:ce.program(29,we,0),inverse:ce.program(21,we,0),data:we}))!=null?he:"")+" </ul></div>"},useData:!0})},6652:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){return' <li style="background: '+ce.escapeExpression(ce.lambda(ne,ne))+'"></li> '},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ne!=null?ne:ce.nullContext||{},Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return'<div id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'" '+((he=Se(Ee,"class").call(Te,"color",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(Te,"head",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+xe(ye(ne!=null?Se(ne,"desc"):ne,ne))+" <span "+((he=Se(Ee,"class").call(Te,"val",{name:"class",hash:{},data:we}))!=null?he:"")+' style="background-color: '+xe(ye(ne!=null?Se(ne,"val"):ne,ne))+'"></span></div><ul data-id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'"> '+((he=Se(Ee,"each").call(Te,ne!=null?Se(ne,"colors"):ne,{name:"each",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </ul></div>"},useData:!0})},480:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ne!=null?ne:ce.nullContext||{},Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return'<div id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'" '+((he=Se(Ee,"class").call(Te,"range",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(Te,"head",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+xe(ye(ne!=null?Se(ne,"desc"):ne,ne))+" <span "+((he=Se(Ee,"class").call(Te,"val",{name:"class",hash:{},data:we}))!=null?he:"")+">"+xe(ye(ne!=null?Se(ne,"val"):ne,ne))+"</span></div><div "+((he=Se(Ee,"class").call(Te,"input-container",{name:"class",hash:{},data:we}))!=null?he:"")+' data-id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'"><div '+((he=Se(Ee,"class").call(Te,"range-track",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(Te,"range-track-bar",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(Te,"range-track-progress",{name:"class",hash:{},data:we}))!=null?he:"")+' style="width: '+xe(ye(ne!=null?Se(ne,"progress"):ne,ne))+'%"></div></div></div><input type="range" min="'+xe(ye(ne!=null?Se(ne,"min"):ne,ne))+'" max="'+xe(ye(ne!=null?Se(ne,"max"):ne,ne))+'" step="'+xe(ye(ne!=null?Se(ne,"step"):ne,ne))+'" value="'+xe(ye(ne!=null?Se(ne,"val"):ne,ne))+'"></div></div>'},useData:!0})},1868:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){return" <li>"+ce.escapeExpression(ce.lambda(ne,ne))+"</li> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ne!=null?ne:ce.nullContext||{},Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return'<div id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'" '+((he=Se(Ee,"class").call(Te,"select",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(Te,"head",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+xe(ye(ne!=null?Se(ne,"desc"):ne,ne))+" <span "+((he=Se(Ee,"class").call(Te,"val",{name:"class",hash:{},data:we}))!=null?he:"")+">"+xe(ye(ne!=null?Se(ne,"val"):ne,ne))+'</span></div><ul data-id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'"> '+((he=Se(Ee,"each").call(Te,ne!=null?Se(ne,"selections"):ne,{name:"each",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </ul></div>"},useData:!0})},7006:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){return' checked="checked" '},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lambda,xe=ce.escapeExpression,Te=ne!=null?ne:ce.nullContext||{},Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return'<div id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'" '+((he=Se(Ee,"class").call(Te,"switch",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+xe(ye(ne!=null?Se(ne,"desc"):ne,ne))+" <label "+((he=Se(Ee,"class").call(Te,"checkbox",{name:"class",hash:{},data:we}))!=null?he:"")+'><input type="checkbox" '+((he=Se(Ee,"class").call(Te,"input",{name:"class",hash:{},data:we}))!=null?he:"")+' data-id="'+xe(ye(ne!=null?Se(ne,"id"):ne,ne))+'" '+((he=Se(Ee,"if").call(Te,ne!=null?Se(ne,"val"):ne,{name:"if",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:"")+"> <span "+((he=Se(Ee,"class").call(Te,"label",{name:"class",hash:{},data:we}))!=null?he:"")+"></span> <span "+((he=Se(Ee,"class").call(Te,"handle",{name:"class",hash:{},data:we}))!=null?he:"")+"></span></label></div>"},useData:!0})},1122:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he=ce.lambda,ye=ce.escapeExpression,xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return' <div class="eruda-section eruda-run" data-idx="'+ye(he(we&&xe(we,"index"),ne))+'"><h2 class="eruda-name">'+ye(he(ne!=null?xe(ne,"name"):ne,ne))+' <div class="eruda-btn"><span class="eruda-icon-play"></span></div></h2><div class="eruda-description"> '+ye(he(ne!=null?xe(ne,"desc"):ne,ne))+" </div></div> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return(he=ye(Ee,"each").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"snippets"):ne,{name:"each",hash:{},fn:ce.program(1,we,0),inverse:ce.noop,data:we}))!=null?he:""},useData:!0})},431:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({1:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"code-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"><table "+((he=xe(Ee,"class").call(ye,"code",{name:"class",hash:{},data:we}))!=null?he:"")+"><tbody><tr><td "+((he=xe(Ee,"class").call(ye,"gutter",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"code"):ne,{name:"each",hash:{},fn:ce.program(2,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </td><td "+((he=xe(Ee,"class").call(ye,"content",{name:"class",hash:{},data:we}))!=null?he:"")+"> "+((he=xe(Ee,"each").call(ye,ne!=null?xe(ne,"code"):ne,{name:"each",hash:{},fn:ce.program(4,we,0),inverse:ce.noop,data:we}))!=null?he:"")+" </td></tr></tbody></table></div> "},2:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" <div "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"line-num",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?ye(ne,"idx"):ne,ne))+"</div> "},4:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return" <pre "+((he=ye(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"code-line",{name:"class",hash:{},data:we}))!=null?he:"")+">"+((he=ce.lambda(ne!=null?ye(ne,"val"):ne,ne))!=null?he:"")+"</pre> "},6:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return" <div "+((he=xe(Ee,"class").call(ye,"code-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"><pre "+((he=xe(Ee,"class").call(ye,"code",{name:"class",hash:{},data:we}))!=null?he:"")+">"+((he=ce.lambda(ne!=null?xe(ne,"code"):ne,ne))!=null?he:"")+"</pre></div> "},compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return(he=ye(Ee,"if").call(ne!=null?ne:ce.nullContext||{},ne!=null?ye(ne,"showLineNum"):ne,{name:"if",hash:{},fn:ce.program(1,we,0),inverse:ce.program(6,we,0),data:we}))!=null?he:""},useData:!0})},6680:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ce.lookupProperty||function(xe,Te){if(Object.prototype.hasOwnProperty.call(xe,Te))return xe[Te]};return'<iframe src="'+((he=ce.lambda(ne!=null?ye(ne,"src"):ne,ne))!=null?he:"")+'"></iframe>'},useData:!0})},2229:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lambda,Te=ce.escapeExpression,Se=ce.lookupProperty||function(Ce,Oe){if(Object.prototype.hasOwnProperty.call(Ce,Oe))return Ce[Oe]};return"<div "+((he=Se(Ee,"class").call(ye,"image",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=Se(Ee,"class").call(ye,"breadcrumb",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"src"):ne,ne))+"</div><div "+((he=Se(Ee,"class").call(ye,"img-container",{name:"class",hash:{},data:we}))!=null?he:"")+' data-exclude="true"><img src="'+Te(xe(ne!=null?Se(ne,"src"):ne,ne))+'"></div><div '+((he=Se(Ee,"class").call(ye,"img-info",{name:"class",hash:{},data:we}))!=null?he:"")+">"+Te(xe(ne!=null?Se(ne,"width"):ne,ne))+" \xD7 "+Te(xe(ne!=null?Se(ne,"height"):ne,ne))+"</div></div>"},useData:!0})},2944:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he;return"<ul "+((he=(ce.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]})(Ee,"class").call(ne!=null?ne:ce.nullContext||{},"json",{name:"class",hash:{},data:we}))!=null?he:"")+"></ul>"},useData:!0})},8191:function(q,Q,V){var _e=V(9871);q.exports=(_e.default||_e).template({compiler:[8,">= 4.3.0"],main:function(ce,ne,Ee,j,we){var he,ye=ne!=null?ne:ce.nullContext||{},xe=ce.lookupProperty||function(Te,Se){if(Object.prototype.hasOwnProperty.call(Te,Se))return Te[Se]};return"<div "+((he=xe(Ee,"class").call(ye,"raw-wrapper",{name:"class",hash:{},data:we}))!=null?he:"")+"><div "+((he=xe(Ee,"class").call(ye,"raw",{name:"class",hash:{},data:we}))!=null?he:"")+">"+ce.escapeExpression(ce.lambda(ne!=null?xe(ne,"val"):ne,ne))+"</div></div>"},useData:!0})},9669:function(q,Q,V){q.exports=V(1609)},5448:function(q,Q,V){var _e=V(4867),ce=V(6026),ne=V(4372),Ee=V(5327),j=V(4097),we=V(4109),he=V(7985),ye=V(7874),xe=V(2648),Te=V(644),Se=V(205);q.exports=function(Ce){return new Promise(function(Oe,ze){var Ue,De=Ce.data,Fe=Ce.headers,Xe=Ce.responseType;function Ke(){Ce.cancelToken&&Ce.cancelToken.unsubscribe(Ue),Ce.signal&&Ce.signal.removeEventListener("abort",Ue)}_e.isFormData(De)&&_e.isStandardBrowserEnv()&&delete Fe["Content-Type"];var He=new XMLHttpRequest;if(Ce.auth){var Qe=Ce.auth.username||"",pt=Ce.auth.password?unescape(encodeURIComponent(Ce.auth.password)):"";Fe.Authorization="Basic "+btoa(Qe+":"+pt)}var Mt=j(Ce.baseURL,Ce.url);function wt(){if(He){var nt="getAllResponseHeaders"in He?we(He.getAllResponseHeaders()):null,it={data:Xe&&Xe!=="text"&&Xe!=="json"?He.response:He.responseText,status:He.status,statusText:He.statusText,headers:nt,config:Ce,request:He};ce(function(dt){Oe(dt),Ke()},function(dt){ze(dt),Ke()},it),He=null}}if(He.open(Ce.method.toUpperCase(),Ee(Mt,Ce.params,Ce.paramsSerializer),!0),He.timeout=Ce.timeout,"onloadend"in He?He.onloadend=wt:He.onreadystatechange=function(){He&&He.readyState===4&&(He.status!==0||He.responseURL&&He.responseURL.indexOf("file:")===0)&&setTimeout(wt)},He.onabort=function(){He&&(ze(new xe("Request aborted",xe.ECONNABORTED,Ce,He)),He=null)},He.onerror=function(){ze(new xe("Network Error",xe.ERR_NETWORK,Ce,He,He)),He=null},He.ontimeout=function(){var nt=Ce.timeout?"timeout of "+Ce.timeout+"ms exceeded":"timeout exceeded",it=Ce.transitional||ye;Ce.timeoutErrorMessage&&(nt=Ce.timeoutErrorMessage),ze(new xe(nt,it.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,Ce,He)),He=null},_e.isStandardBrowserEnv()){var bt=(Ce.withCredentials||he(Mt))&&Ce.xsrfCookieName?ne.read(Ce.xsrfCookieName):void 0;bt&&(Fe[Ce.xsrfHeaderName]=bt)}"setRequestHeader"in He&&_e.forEach(Fe,function(nt,it){De===void 0&&it.toLowerCase()==="content-type"?delete Fe[it]:He.setRequestHeader(it,nt)}),_e.isUndefined(Ce.withCredentials)||(He.withCredentials=!!Ce.withCredentials),Xe&&Xe!=="json"&&(He.responseType=Ce.responseType),typeof Ce.onDownloadProgress=="function"&&He.addEventListener("progress",Ce.onDownloadProgress),typeof Ce.onUploadProgress=="function"&&He.upload&&He.upload.addEventListener("progress",Ce.onUploadProgress),(Ce.cancelToken||Ce.signal)&&(Ue=function(nt){He&&(ze(!nt||nt&&nt.type?new Te:nt),He.abort(),He=null)},Ce.cancelToken&&Ce.cancelToken.subscribe(Ue),Ce.signal&&(Ce.signal.aborted?Ue():Ce.signal.addEventListener("abort",Ue))),De||(De=null);var rt=Se(Mt);rt&&["http","https","file"].indexOf(rt)===-1?ze(new xe("Unsupported protocol "+rt+":",xe.ERR_BAD_REQUEST,Ce)):He.send(De)})}},1609:function(q,Q,V){var _e=V(4867),ce=V(1849),ne=V(321),Ee=V(7185),j=function we(he){var ye=new ne(he),xe=ce(ne.prototype.request,ye);return _e.extend(xe,ne.prototype,ye),_e.extend(xe,ye),xe.create=function(Te){return we(Ee(he,Te))},xe}(V(5546));j.Axios=ne,j.CanceledError=V(644),j.CancelToken=V(4972),j.isCancel=V(6502),j.VERSION=V(7288).version,j.toFormData=V(7675),j.AxiosError=V(2648),j.Cancel=j.CanceledError,j.all=function(we){return Promise.all(we)},j.spread=V(8713),j.isAxiosError=V(6268),q.exports=j,q.exports.default=j},4972:function(q,Q,V){var _e=V(644);function ce(ne){if(typeof ne!="function")throw new TypeError("executor must be a function.");var Ee;this.promise=new Promise(function(we){Ee=we});var j=this;this.promise.then(function(we){if(j._listeners){var he,ye=j._listeners.length;for(he=0;he<ye;he++)j._listeners[he](we);j._listeners=null}}),this.promise.then=function(we){var he,ye=new Promise(function(xe){j.subscribe(xe),he=xe}).then(we);return ye.cancel=function(){j.unsubscribe(he)},ye},ne(function(we){j.reason||(j.reason=new _e(we),Ee(j.reason))})}ce.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ce.prototype.subscribe=function(ne){this.reason?ne(this.reason):this._listeners?this._listeners.push(ne):this._listeners=[ne]},ce.prototype.unsubscribe=function(ne){if(this._listeners){var Ee=this._listeners.indexOf(ne);Ee!==-1&&this._listeners.splice(Ee,1)}},ce.source=function(){var ne;return{token:new ce(function(Ee){ne=Ee}),cancel:ne}},q.exports=ce},644:function(q,Q,V){var _e=V(2648);function ce(ne){_e.call(this,ne==null?"canceled":ne,_e.ERR_CANCELED),this.name="CanceledError"}V(4867).inherits(ce,_e,{__CANCEL__:!0}),q.exports=ce},6502:function(q){q.exports=function(Q){return!(!Q||!Q.__CANCEL__)}},321:function(q,Q,V){var _e=V(4867),ce=V(5327),ne=V(782),Ee=V(3572),j=V(7185),we=V(4097),he=V(4875),ye=he.validators;function xe(Te){this.defaults=Te,this.interceptors={request:new ne,response:new ne}}xe.prototype.request=function(Te,Se){typeof Te=="string"?(Se=Se||{}).url=Te:Se=Te||{},(Se=j(this.defaults,Se)).method?Se.method=Se.method.toLowerCase():this.defaults.method?Se.method=this.defaults.method.toLowerCase():Se.method="get";var Ce=Se.transitional;Ce!==void 0&&he.assertOptions(Ce,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1);var Oe=[],ze=!0;this.interceptors.request.forEach(function(Qe){typeof Qe.runWhen=="function"&&Qe.runWhen(Se)===!1||(ze=ze&&Qe.synchronous,Oe.unshift(Qe.fulfilled,Qe.rejected))});var Ue,De=[];if(this.interceptors.response.forEach(function(Qe){De.push(Qe.fulfilled,Qe.rejected)}),!ze){var Fe=[Ee,void 0];for(Array.prototype.unshift.apply(Fe,Oe),Fe=Fe.concat(De),Ue=Promise.resolve(Se);Fe.length;)Ue=Ue.then(Fe.shift(),Fe.shift());return Ue}for(var Xe=Se;Oe.length;){var Ke=Oe.shift(),He=Oe.shift();try{Xe=Ke(Xe)}catch(Qe){He(Qe);break}}try{Ue=Ee(Xe)}catch(Qe){return Promise.reject(Qe)}for(;De.length;)Ue=Ue.then(De.shift(),De.shift());return Ue},xe.prototype.getUri=function(Te){Te=j(this.defaults,Te);var Se=we(Te.baseURL,Te.url);return ce(Se,Te.params,Te.paramsSerializer)},_e.forEach(["delete","get","head","options"],function(Te){xe.prototype[Te]=function(Se,Ce){return this.request(j(Ce||{},{method:Te,url:Se,data:(Ce||{}).data}))}}),_e.forEach(["post","put","patch"],function(Te){function Se(Ce){return function(Oe,ze,Ue){return this.request(j(Ue||{},{method:Te,headers:Ce?{"Content-Type":"multipart/form-data"}:{},url:Oe,data:ze}))}}xe.prototype[Te]=Se(),xe.prototype[Te+"Form"]=Se(!0)}),q.exports=xe},2648:function(q,Q,V){var _e=V(4867);function ce(j,we,he,ye,xe){Error.call(this),this.message=j,this.name="AxiosError",we&&(this.code=we),he&&(this.config=he),ye&&(this.request=ye),xe&&(this.response=xe)}_e.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ne=ce.prototype,Ee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(j){Ee[j]={value:j}}),Object.defineProperties(ce,Ee),Object.defineProperty(ne,"isAxiosError",{value:!0}),ce.from=function(j,we,he,ye,xe,Te){var Se=Object.create(ne);return _e.toFlatObject(j,Se,function(Ce){return Ce!==Error.prototype}),ce.call(Se,j.message,we,he,ye,xe),Se.name=j.name,Te&&Object.assign(Se,Te),Se},q.exports=ce},782:function(q,Q,V){var _e=V(4867);function ce(){this.handlers=[]}ce.prototype.use=function(ne,Ee,j){return this.handlers.push({fulfilled:ne,rejected:Ee,synchronous:!!j&&j.synchronous,runWhen:j?j.runWhen:null}),this.handlers.length-1},ce.prototype.eject=function(ne){this.handlers[ne]&&(this.handlers[ne]=null)},ce.prototype.forEach=function(ne){_e.forEach(this.handlers,function(Ee){Ee!==null&&ne(Ee)})},q.exports=ce},4097:function(q,Q,V){var _e=V(1793),ce=V(7303);q.exports=function(ne,Ee){return ne&&!_e(Ee)?ce(ne,Ee):Ee}},3572:function(q,Q,V){var _e=V(4867),ce=V(8527),ne=V(6502),Ee=V(5546),j=V(644);function we(he){if(he.cancelToken&&he.cancelToken.throwIfRequested(),he.signal&&he.signal.aborted)throw new j}q.exports=function(he){return we(he),he.headers=he.headers||{},he.data=ce.call(he,he.data,he.headers,he.transformRequest),he.headers=_e.merge(he.headers.common||{},he.headers[he.method]||{},he.headers),_e.forEach(["delete","get","head","post","put","patch","common"],function(ye){delete he.headers[ye]}),(he.adapter||Ee.adapter)(he).then(function(ye){return we(he),ye.data=ce.call(he,ye.data,ye.headers,he.transformResponse),ye},function(ye){return ne(ye)||(we(he),ye&&ye.response&&(ye.response.data=ce.call(he,ye.response.data,ye.response.headers,he.transformResponse))),Promise.reject(ye)})}},7185:function(q,Q,V){var _e=V(4867);q.exports=function(ce,ne){ne=ne||{};var Ee={};function j(Se,Ce){return _e.isPlainObject(Se)&&_e.isPlainObject(Ce)?_e.merge(Se,Ce):_e.isPlainObject(Ce)?_e.merge({},Ce):_e.isArray(Ce)?Ce.slice():Ce}function we(Se){return _e.isUndefined(ne[Se])?_e.isUndefined(ce[Se])?void 0:j(void 0,ce[Se]):j(ce[Se],ne[Se])}function he(Se){if(!_e.isUndefined(ne[Se]))return j(void 0,ne[Se])}function ye(Se){return _e.isUndefined(ne[Se])?_e.isUndefined(ce[Se])?void 0:j(void 0,ce[Se]):j(void 0,ne[Se])}function xe(Se){return Se in ne?j(ce[Se],ne[Se]):Se in ce?j(void 0,ce[Se]):void 0}var Te={url:he,method:he,data:he,baseURL:ye,transformRequest:ye,transformResponse:ye,paramsSerializer:ye,timeout:ye,timeoutMessage:ye,withCredentials:ye,adapter:ye,responseType:ye,xsrfCookieName:ye,xsrfHeaderName:ye,onUploadProgress:ye,onDownloadProgress:ye,decompress:ye,maxContentLength:ye,maxBodyLength:ye,beforeRedirect:ye,transport:ye,httpAgent:ye,httpsAgent:ye,cancelToken:ye,socketPath:ye,responseEncoding:ye,validateStatus:xe};return _e.forEach(Object.keys(ce).concat(Object.keys(ne)),function(Se){var Ce=Te[Se]||we,Oe=Ce(Se);_e.isUndefined(Oe)&&Ce!==xe||(Ee[Se]=Oe)}),Ee}},6026:function(q,Q,V){var _e=V(2648);q.exports=function(ce,ne,Ee){var j=Ee.config.validateStatus;Ee.status&&j&&!j(Ee.status)?ne(new _e("Request failed with status code "+Ee.status,[_e.ERR_BAD_REQUEST,_e.ERR_BAD_RESPONSE][Math.floor(Ee.status/100)-4],Ee.config,Ee.request,Ee)):ce(Ee)}},8527:function(q,Q,V){var _e=V(4867),ce=V(5546);q.exports=function(ne,Ee,j){var we=this||ce;return _e.forEach(j,function(he){ne=he.call(we,ne,Ee)}),ne}},5546:function(q,Q,V){var _e=V(4867),ce=V(6016),ne=V(2648),Ee=V(7874),j=V(7675),we={"Content-Type":"application/x-www-form-urlencoded"};function he(Te,Se){!_e.isUndefined(Te)&&_e.isUndefined(Te["Content-Type"])&&(Te["Content-Type"]=Se)}var ye,xe={transitional:Ee,adapter:((typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(ye=V(5448)),ye),transformRequest:[function(Te,Se){if(ce(Se,"Accept"),ce(Se,"Content-Type"),_e.isFormData(Te)||_e.isArrayBuffer(Te)||_e.isBuffer(Te)||_e.isStream(Te)||_e.isFile(Te)||_e.isBlob(Te))return Te;if(_e.isArrayBufferView(Te))return Te.buffer;if(_e.isURLSearchParams(Te))return he(Se,"application/x-www-form-urlencoded;charset=utf-8"),Te.toString();var Ce,Oe=_e.isObject(Te),ze=Se&&Se["Content-Type"];if((Ce=_e.isFileList(Te))||Oe&&ze==="multipart/form-data"){var Ue=this.env&&this.env.FormData;return j(Ce?{"files[]":Te}:Te,Ue&&new Ue)}return Oe||ze==="application/json"?(he(Se,"application/json"),function(De,Fe,Xe){if(_e.isString(De))try{return(Fe||JSON.parse)(De),_e.trim(De)}catch(Ke){if(Ke.name!=="SyntaxError")throw Ke}return(Xe||JSON.stringify)(De)}(Te)):Te}],transformResponse:[function(Te){var Se=this.transitional||xe.transitional,Ce=Se&&Se.silentJSONParsing,Oe=Se&&Se.forcedJSONParsing,ze=!Ce&&this.responseType==="json";if(ze||Oe&&_e.isString(Te)&&Te.length)try{return JSON.parse(Te)}catch(Ue){if(ze)throw Ue.name==="SyntaxError"?ne.from(Ue,ne.ERR_BAD_RESPONSE,this,null,this.response):Ue}return Te}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V(1623)},validateStatus:function(Te){return Te>=200&&Te<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_e.forEach(["delete","get","head"],function(Te){xe.headers[Te]={}}),_e.forEach(["post","put","patch"],function(Te){xe.headers[Te]=_e.merge(we)}),q.exports=xe},7874:function(q){q.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:function(q){q.exports={version:"0.27.2"}},1849:function(q){q.exports=function(Q,V){return function(){for(var _e=new Array(arguments.length),ce=0;ce<_e.length;ce++)_e[ce]=arguments[ce];return Q.apply(V,_e)}}},5327:function(q,Q,V){var _e=V(4867);function ce(ne){return encodeURIComponent(ne).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}q.exports=function(ne,Ee,j){if(!Ee)return ne;var we;if(j)we=j(Ee);else if(_e.isURLSearchParams(Ee))we=Ee.toString();else{var he=[];_e.forEach(Ee,function(xe,Te){xe!=null&&(_e.isArray(xe)?Te+="[]":xe=[xe],_e.forEach(xe,function(Se){_e.isDate(Se)?Se=Se.toISOString():_e.isObject(Se)&&(Se=JSON.stringify(Se)),he.push(ce(Te)+"="+ce(Se))}))}),we=he.join("&")}if(we){var ye=ne.indexOf("#");ye!==-1&&(ne=ne.slice(0,ye)),ne+=(ne.indexOf("?")===-1?"?":"&")+we}return ne}},7303:function(q){q.exports=function(Q,V){return V?Q.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):Q}},4372:function(q,Q,V){var _e=V(4867);q.exports=_e.isStandardBrowserEnv()?{write:function(ce,ne,Ee,j,we,he){var ye=[];ye.push(ce+"="+encodeURIComponent(ne)),_e.isNumber(Ee)&&ye.push("expires="+new Date(Ee).toGMTString()),_e.isString(j)&&ye.push("path="+j),_e.isString(we)&&ye.push("domain="+we),he===!0&&ye.push("secure"),document.cookie=ye.join("; ")},read:function(ce){var ne=document.cookie.match(new RegExp("(^|;\\s*)("+ce+")=([^;]*)"));return ne?decodeURIComponent(ne[3]):null},remove:function(ce){this.write(ce,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(q){q.exports=function(Q){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Q)}},6268:function(q,Q,V){var _e=V(4867);q.exports=function(ce){return _e.isObject(ce)&&ce.isAxiosError===!0}},7985:function(q,Q,V){var _e=V(4867);q.exports=_e.isStandardBrowserEnv()?function(){var ce,ne=/(msie|trident)/i.test(navigator.userAgent),Ee=document.createElement("a");function j(we){var he=we;return ne&&(Ee.setAttribute("href",he),he=Ee.href),Ee.setAttribute("href",he),{href:Ee.href,protocol:Ee.protocol?Ee.protocol.replace(/:$/,""):"",host:Ee.host,search:Ee.search?Ee.search.replace(/^\?/,""):"",hash:Ee.hash?Ee.hash.replace(/^#/,""):"",hostname:Ee.hostname,port:Ee.port,pathname:Ee.pathname.charAt(0)==="/"?Ee.pathname:"/"+Ee.pathname}}return ce=j(window.location.href),function(we){var he=_e.isString(we)?j(we):we;return he.protocol===ce.protocol&&he.host===ce.host}}():function(){return!0}},6016:function(q,Q,V){var _e=V(4867);q.exports=function(ce,ne){_e.forEach(ce,function(Ee,j){j!==ne&&j.toUpperCase()===ne.toUpperCase()&&(ce[ne]=Ee,delete ce[j])})}},1623:function(q){q.exports=null},4109:function(q,Q,V){var _e=V(4867),ce=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];q.exports=function(ne){var Ee,j,we,he={};return ne&&_e.forEach(ne.split(`
`),function(ye){if(we=ye.indexOf(":"),Ee=_e.trim(ye.substr(0,we)).toLowerCase(),j=_e.trim(ye.substr(we+1)),Ee){if(he[Ee]&&ce.indexOf(Ee)>=0)return;he[Ee]=Ee==="set-cookie"?(he[Ee]?he[Ee]:[]).concat([j]):he[Ee]?he[Ee]+", "+j:j}}),he}},205:function(q){q.exports=function(Q){var V=/^([-+\w]{1,25})(:?\/\/|:)/.exec(Q);return V&&V[1]||""}},8713:function(q){q.exports=function(Q){return function(V){return Q.apply(null,V)}}},7675:function(q,Q,V){var _e=V(4867);q.exports=function(ce,ne){ne=ne||new FormData;var Ee=[];function j(we){return we===null?"":_e.isDate(we)?we.toISOString():_e.isArrayBuffer(we)||_e.isTypedArray(we)?typeof Blob=="function"?new Blob([we]):Buffer.from(we):we}return function we(he,ye){if(_e.isPlainObject(he)||_e.isArray(he)){if(Ee.indexOf(he)!==-1)throw Error("Circular reference detected in "+ye);Ee.push(he),_e.forEach(he,function(xe,Te){if(!_e.isUndefined(xe)){var Se,Ce=ye?ye+"."+Te:Te;if(xe&&!ye&&typeof xe=="object"){if(_e.endsWith(Te,"{}"))xe=JSON.stringify(xe);else if(_e.endsWith(Te,"[]")&&(Se=_e.toArray(xe)))return void Se.forEach(function(Oe){!_e.isUndefined(Oe)&&ne.append(Ce,j(Oe))})}we(xe,Ce)}}),Ee.pop()}else ne.append(ye,j(he))}(ce),ne}},4875:function(q,Q,V){var _e=V(7288).version,ce=V(2648),ne={};["object","boolean","number","function","string","symbol"].forEach(function(j,we){ne[j]=function(he){return typeof he===j||"a"+(we<1?"n ":" ")+j}});var Ee={};ne.transitional=function(j,we,he){function ye(xe,Te){return"[Axios v"+_e+"] Transitional option '"+xe+"'"+Te+(he?". "+he:"")}return function(xe,Te,Se){if(j===!1)throw new ce(ye(Te," has been removed"+(we?" in "+we:"")),ce.ERR_DEPRECATED);return we&&!Ee[Te]&&(Ee[Te]=!0,console.warn(ye(Te," has been deprecated since v"+we+" and will be removed in the near future"))),!j||j(xe,Te,Se)}},q.exports={assertOptions:function(j,we,he){if(typeof j!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);for(var ye=Object.keys(j),xe=ye.length;xe-- >0;){var Te=ye[xe],Se=we[Te];if(Se){var Ce=j[Te],Oe=Ce===void 0||Se(Ce,Te,j);if(Oe!==!0)throw new ce("option "+Te+" must be "+Oe,ce.ERR_BAD_OPTION_VALUE)}else if(he!==!0)throw new ce("Unknown option "+Te,ce.ERR_BAD_OPTION)}},validators:ne}},4867:function(q,Q,V){var _e,ce=V(1849),ne=Object.prototype.toString,Ee=(_e=Object.create(null),function(He){var Qe=ne.call(He);return _e[Qe]||(_e[Qe]=Qe.slice(8,-1).toLowerCase())});function j(He){return He=He.toLowerCase(),function(Qe){return Ee(Qe)===He}}function we(He){return Array.isArray(He)}function he(He){return He===void 0}var ye=j("ArrayBuffer");function xe(He){return He!==null&&typeof He=="object"}function Te(He){if(Ee(He)!=="object")return!1;var Qe=Object.getPrototypeOf(He);return Qe===null||Qe===Object.prototype}var Se=j("Date"),Ce=j("File"),Oe=j("Blob"),ze=j("FileList");function Ue(He){return ne.call(He)==="[object Function]"}var De=j("URLSearchParams");function Fe(He,Qe){if(He!=null)if(typeof He!="object"&&(He=[He]),we(He))for(var pt=0,Mt=He.length;pt<Mt;pt++)Qe.call(null,He[pt],pt,He);else for(var wt in He)Object.prototype.hasOwnProperty.call(He,wt)&&Qe.call(null,He[wt],wt,He)}var Xe,Ke=(Xe=typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array),function(He){return Xe&&He instanceof Xe});q.exports={isArray:we,isArrayBuffer:ye,isBuffer:function(He){return He!==null&&!he(He)&&He.constructor!==null&&!he(He.constructor)&&typeof He.constructor.isBuffer=="function"&&He.constructor.isBuffer(He)},isFormData:function(He){var Qe="[object FormData]";return He&&(typeof FormData=="function"&&He instanceof FormData||ne.call(He)===Qe||Ue(He.toString)&&He.toString()===Qe)},isArrayBufferView:function(He){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(He):He&&He.buffer&&ye(He.buffer)},isString:function(He){return typeof He=="string"},isNumber:function(He){return typeof He=="number"},isObject:xe,isPlainObject:Te,isUndefined:he,isDate:Se,isFile:Ce,isBlob:Oe,isFunction:Ue,isStream:function(He){return xe(He)&&Ue(He.pipe)},isURLSearchParams:De,isStandardBrowserEnv:function(){return(typeof navigator=="undefined"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window!="undefined"&&typeof document!="undefined"},forEach:Fe,merge:function He(){var Qe={};function pt(bt,rt){Te(Qe[rt])&&Te(bt)?Qe[rt]=He(Qe[rt],bt):Te(bt)?Qe[rt]=He({},bt):we(bt)?Qe[rt]=bt.slice():Qe[rt]=bt}for(var Mt=0,wt=arguments.length;Mt<wt;Mt++)Fe(arguments[Mt],pt);return Qe},extend:function(He,Qe,pt){return Fe(Qe,function(Mt,wt){He[wt]=pt&&typeof Mt=="function"?ce(Mt,pt):Mt}),He},trim:function(He){return He.trim?He.trim():He.replace(/^\s+|\s+$/g,"")},stripBOM:function(He){return He.charCodeAt(0)===65279&&(He=He.slice(1)),He},inherits:function(He,Qe,pt,Mt){He.prototype=Object.create(Qe.prototype,Mt),He.prototype.constructor=He,pt&&Object.assign(He.prototype,pt)},toFlatObject:function(He,Qe,pt){var Mt,wt,bt,rt={};Qe=Qe||{};do{for(wt=(Mt=Object.getOwnPropertyNames(He)).length;wt-- >0;)rt[bt=Mt[wt]]||(Qe[bt]=He[bt],rt[bt]=!0);He=Object.getPrototypeOf(He)}while(He&&(!pt||pt(He,Qe))&&He!==Object.prototype);return Qe},kindOf:Ee,kindOfTest:j,endsWith:function(He,Qe,pt){He=String(He),(pt===void 0||pt>He.length)&&(pt=He.length),pt-=Qe.length;var Mt=He.indexOf(Qe,pt);return Mt!==-1&&Mt===pt},toArray:function(He){if(!He)return null;var Qe=He.length;if(he(Qe))return null;for(var pt=new Array(Qe);Qe-- >0;)pt[Qe]=He[Qe];return pt},isTypedArray:Ke,isFileList:ze}},2895:function(q,Q,V){V.d(Q,{default:function(){return vh}});var _e={};function ce(at,Ct){if(!(at instanceof Ct))throw new TypeError("Cannot call a class as a function")}function ne(at,Ct){for(var vt=0;vt<Ct.length;vt++){var Ge=Ct[vt];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(at,Ge.key,Ge)}}function Ee(at,Ct,vt){return Ct&&ne(at.prototype,Ct),vt&&ne(at,vt),Object.defineProperty(at,"prototype",{writable:!1}),at}function j(at,Ct){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(vt,Ge){return vt.__proto__=Ge,vt},j(at,Ct)}function we(at,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Super expression must either be null or a function");at.prototype=Object.create(Ct&&Ct.prototype,{constructor:{value:at,writable:!0,configurable:!0}}),Object.defineProperty(at,"prototype",{writable:!1}),Ct&&j(at,Ct)}function he(at){return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},he(at)}function ye(at){if(at===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return at}function xe(at,Ct){if(Ct&&(he(Ct)==="object"||typeof Ct=="function"))return Ct;if(Ct!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ye(at)}function Te(at){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ct){return Ct.__proto__||Object.getPrototypeOf(Ct)},Te(at)}V.r(_e),V.d(_e,{$:function(){return ze()},$attr:function(){return De()},$class:function(){return Xe()},$css:function(){return He()},$data:function(){return pt()},$event:function(){return wt()},$insert:function(){return rt()},$offset:function(){return it()},$property:function(){return lt()},$remove:function(){return xt()},$safeEls:function(){return Vt()},$show:function(){return Dt()},Class:function(){return In()},Emitter:function(){return an()},Enum:function(){return Rt()},LocalStore:function(){return hn()},Logger:function(){return Pn()},MediaQuery:function(){return zt()},MutationObserver:function(){return bn()},Select:function(){return $n()},SingleEmitter:function(){return xn()},Stack:function(){return Cn()},Store:function(){return nr()},Url:function(){return Kn()},ajax:function(){return un()},allKeys:function(){return Rn()},before:function(){return mr()},camelCase:function(){return Lr()},castPath:function(){return Br()},clamp:function(){return Gr()},clone:function(){return Ri()},cloneDeep:function(){return Ai()},concat:function(){return No()},contain:function(){return xi()},copy:function(){return Bt()},create:function(){return _t()},createAssigner:function(){return Ut()},dateFormat:function(){return fn()},debounce:function(){return nn()},defaults:function(){return jn()},defineProp:function(){return Hn()},delegate:function(){return Er()},detectBrowser:function(){return Tr()},detectOs:function(){return ei()},difference:function(){return ni()},each:function(){return gn()},endWith:function(){return ki()},escape:function(){return Aa()},escapeJsStr:function(){return dl()},escapeRegExp:function(){return ua()},extend:function(){return Or()},extendOwn:function(){return Oo()},extractUrls:function(){return Pr()},filter:function(){return ha()},flatten:function(){return _o()},freeze:function(){return Jc()},getProto:function(){return pl()},has:function(){return ic()},highlight:function(){return Xi()},identity:function(){return oc()},idxOf:function(){return ao()},inherits:function(){return ac()},isArgs:function(){return Oi()},isArr:function(){return Ms()},isArrLike:function(){return Ui()},isBool:function(){return Os()},isBrowser:function(){return Rs()},isBuffer:function(){return Ju()},isDarkMode:function(){return ka()},isDate:function(){return Qc()},isEl:function(){return lo()},isEmpty:function(){return zo()},isErr:function(){return ml()},isFn:function(){return zs()},isHidden:function(){return $s()},isMatch:function(){return th()},isMiniProgram:function(){return nh()},isMobile:function(){return Ca()},isNaN:function(){return yl()},isNil:function(){return Ka()},isNull:function(){return jo()},isNum:function(){return Uo()},isObj:function(){return Ds()},isPrimitive:function(){return Ma()},isPromise:function(){return wl()},isRegExp:function(){return dc()},isSorted:function(){return Ya()},isStr:function(){return $o()},isUndef:function(){return El()},kebabCase:function(){return Ja()},keys:function(){return Qo()},last:function(){return Bs()},linkify:function(){return Al()},loadJs:function(){return kl()},lowerCase:function(){return Vo()},lpad:function(){return iu()},ltrim:function(){return Sl()},map:function(){return Ia()},mapObj:function(){return _c()},matcher:function(){return mc()},memStorage:function(){return gc()},memoize:function(){return Cl()},mergeArr:function(){return Ml()},meta:function(){return Il()},ms:function(){return Ns()},nextTick:function(){return es()},noop:function(){return Pa()},now:function(){return uu()},objToStr:function(){return Pl()},once:function(){return du()},optimizeCb:function(){return xc()},orientation:function(){return js()},partial:function(){return Ol()},perfNow:function(){return Us()},pick:function(){return Oa()},prefix:function(){return _u()},property:function(){return Qr()},query:function(){return mu()},raf:function(){return qs()},repeat:function(){return ga()},restArgs:function(){return ns()},reverse:function(){return Rl()},root:function(){return Ac()},rtrim:function(){return kc()},safeCb:function(){return os()},safeGet:function(){return co()},safeSet:function(){return Cc()},sameOrigin:function(){return bo()},slice:function(){return Zs()},some:function(){return Ks()},sortKeys:function(){return zl()},splitCase:function(){return uh()},startWith:function(){return as()},stringify:function(){return Ic()},stringifyAll:function(){return Js()},throttle:function(){return Ra()},toArr:function(){return Qs()},toInt:function(){return xu()},toNum:function(){return ss()},toSrc:function(){return bu()},toStr:function(){return ls()},trim:function(){return na()},type:function(){return dh()},types:function(){return Fl()},uncaught:function(){return wo()},uniqId:function(){return za()},unique:function(){return ra()},upperFirst:function(){return cs()},values:function(){return us()},viewportScale:function(){return Oc()},wrap:function(){return Su()},xpath:function(){return Mu()}});var Se=V(8384),Ce=V.n(Se),Oe=V(1512),ze=V.n(Oe),Ue=V(4991),De=V.n(Ue),Fe=V(7781),Xe=V.n(Fe),Ke=V(975),He=V.n(Ke),Qe=V(8381),pt=V.n(Qe),Mt=V(5543),wt=V.n(Mt),bt=V(8908),rt=V.n(bt),nt=V(6906),it=V.n(nt),dt=V(4209),lt=V.n(dt),ft=V(6757),xt=V.n(ft),ht=V(2341),Vt=V.n(ht),st=V(7665),Dt=V.n(st),ln=V(7496),In=V.n(ln),on=V(1443),an=V.n(on),Xt=V(9640),Rt=V.n(Xt),en=V(125),hn=V.n(en),vn=V(4989),Pn=V.n(vn),Pt=V(2765),zt=V.n(Pt),rn=V(2289),bn=V.n(rn),Tn=V(3244),$n=V.n(Tn),Dn=V(8985),xn=V.n(Dn),En=V(9001),Cn=V.n(En),Qn=V(5128),nr=V.n(Qn),fr=V(6334),Kn=V.n(fr),qn=V(8991),un=V.n(qn),yn=V(1116),Rn=V.n(yn),Yn=V(5637),mr=V.n(Yn),Sr=V(7494),Lr=V.n(Sr),br=V(1694),Br=V.n(br),Fr=V(9882),Gr=V.n(Fr),Ur=V(4675),Ri=V.n(Ur),Li=V(550),Ai=V.n(Li),Cr=V(8099),No=V.n(Cr),Ta=V(6341),xi=V.n(Ta),la=V(2327),Bt=V.n(la),ct=V(1662),_t=V.n(ct),Lt=V(4427),Ut=V.n(Lt),tn=V(4407),fn=V.n(tn),dn=V(6049),nn=V.n(dn),_n=V(4193),jn=V.n(_n),sr=V(9803),Hn=V.n(sr),wr=V(2443),Er=V.n(wr),gr=V(4541),Tr=V.n(gr),Dr=V(6954),ei=V.n(Dr),ai=V(801),ni=V.n(ai),xr=V(3783),gn=V.n(xr),fo=V(4858),ki=V.n(fo),ca=V(8901),Aa=V.n(ca),Po=V(4187),dl=V.n(Po),Yu=V(2337),ua=V.n(Yu),lr=V(6329),Or=V.n(lr),Nr=V(3021),Oo=V.n(Nr),Ro=V(2581),Pr=V.n(Ro),As=V(5972),ha=V.n(As),ks=V(288),_o=V.n(ks),bi=V(4454),Jc=V.n(bi),Xa=V(415),pl=V.n(Xa),da=V(6257),ic=V.n(da),pa=V(3651),Xi=V.n(pa),ii=V(6362),oc=V.n(ii),Ss=V(496),ao=V.n(Ss),so=V(5022),ac=V.n(so),fa=V(7403),Oi=V.n(fa),Cs=V(6472),Ms=V.n(Cs),Is=V(1369),Ui=V.n(Is),Ps=V(4696),Os=V.n(Ps),vo=V(2727),Rs=V.n(vo),fl=V(2349),Ju=V.n(fl),sc=V(2520),ka=V.n(sc),Qu=V(2106),Qc=V.n(Qu),Sa=V(9833),lo=V.n(Sa),_l=V(8887),zo=V.n(_l),lc=V(2749),ml=V.n(lc),eh=V(4777),zs=V.n(eh),gl=V(9585),$s=V.n(gl),eu=V(7949),th=V.n(eu),tu=V(9537),nh=V.n(tu),xo=V(9956),Ca=V.n(xo),cc=V(9433),yl=V.n(cc),uc=V(2763),Ka=V.n(uc),vl=V(6156),jo=V.n(vl),_a=V(3990),Uo=V.n(_a),xl=V(5166),Ds=V.n(xl),bl=V(6997),Ma=V.n(bl),Yr=V(4321),wl=V.n(Yr),hc=V(1754),dc=V.n(hc),Wr=V(3843),Ya=V.n(Wr),Ls=V(6768),$o=V.n(Ls),pc=V(1286),El=V.n(pc),ma=V(7622),Ja=V.n(ma),rh=V(2533),Qo=V.n(rh),Tl=V(9702),Bs=V.n(Tl),fc=V(3988),Al=V.n(fc),nu=V(9622),kl=V.n(nu),ru=V(3063),Vo=V.n(ru),Qa=V(5351),iu=V.n(Qa),Fs=V(7767),Sl=V.n(Fs),Go=V(2461),Ia=V.n(Go),ou=V(8820),_c=V.n(ou),au=V(4491),mc=V.n(au),su=V(5026),gc=V.n(su),ih=V(1475),Cl=V.n(ih),oh=V(9971),Ml=V.n(oh),lu=V(8573),Il=V.n(lu),ah=V(4677),Ns=V.n(ah),cu=V(6837),es=V.n(cu),yc=V(1214),Pa=V.n(yc),sh=V(8847),uu=V.n(sh),lh=V(106),Pl=V.n(lh),hu=V(8763),du=V.n(hu),vc=V(3955),xc=V.n(vc),pu=V(442),js=V.n(pu),bc=V(4198),Ol=V.n(bc),ea=V(1194),Us=V.n(ea),fu=V(3487),Oa=V.n(fu),ts=V(747),_u=V.n(ts),wc=V(2994),Qr=V.n(wc),Vs=V(1745),mu=V.n(Vs),Gs=V(1571),qs=V.n(Gs),ch=V(4552),ga=V.n(ch),Ec=V(1137),ns=V.n(Ec),Tc=V(1527),Rl=V.n(Tc),rs=V(5610),Ac=V.n(rs),Hs=V(3597),kc=V.n(Hs),is=V(2838),os=V.n(is),cr=V(7653),co=V.n(cr),Sc=V(8079),Cc=V.n(Sc),Ws=V(4224),bo=V.n(Ws),Mc=V(9677),Zs=V.n(Mc),Xs=V(6053),Ks=V.n(Xs),gu=V(3629),zl=V.n(gu),ta=V(8935),uh=V.n(ta),hh=V(6930),as=V.n(hh),$l=V(4400),Ic=V.n($l),Ys=V(9963),Js=V.n(Ys),Ki=V(2439),Ra=V.n(Ki),yu=V(1352),Qs=V.n(yu),vu=V(9296),xu=V.n(vu),Dl=V(3875),ss=V.n(Dl),Ll=V(300),bu=V.n(Ll),wu=V(3367),ls=V.n(wu),Eu=V(4331),na=V.n(Eu),qi=V(3085),dh=V.n(qi),Bl=V(9016),Fl=V.n(Bl),Tu=V(5484),wo=V.n(Tu),Pc=V(5229),za=V.n(Pc),Eo=V(42),ra=V.n(Eo),ur=V(3023),cs=V.n(ur),Au=V(2578),us=V.n(Au),el=V(3514),Oc=V.n(el),ku=V(5491),Su=V.n(ku),Cu=V(8933),Mu=V.n(Cu),tl=new(an());tl.ADD="ADD",tl.SHOW="SHOW",tl.SCALE="SCALE";var si=tl;function Nl(at,Ct){for(;!Object.prototype.hasOwnProperty.call(at,Ct)&&(at=Te(at))!==null;);return at}function fi(){return fi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(at,Ct,vt){var Ge=Nl(at,Ct);if(Ge){var et=Object.getOwnPropertyDescriptor(Ge,Ct);return et.get?et.get.call(arguments.length<3?at:vt):et.value}},fi.apply(this,arguments)}var Hi=In()({init:function(at){this._$el=at},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),Rc=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],zc=Rc.length;function $c(at){for(var Ct={},vt=0;vt<zc;vt++)Ct[Rc[vt]]=at[vt];return Ct}function mo(at){return Ms()(at)&&(at=$c(at)),at.darkerBackground||(at.darkerBackground=at.contrast),Or()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},at)}function ya(at){return Ms()(at)&&(at=$c(at)),at.darkerBackground||(at.darkerBackground=at.contrast),Or()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},at)}var Dc=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],va={Light:ya({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:mo({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":mo(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":mo(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":ya(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":mo(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":mo(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":mo(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:mo(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":mo(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":mo(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":ya(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":mo(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":ya(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:ya(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":mo(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":ya(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},nl=V(2234),jl=V.n(nl),ia=[],Lc=1,Ul=va.Light,Do=function at(Ct,vt){Ct=ls()(Ct);for(var Ge=0,et=ia.length;Ge<et;Ge++)if(ia[Ge].css===Ct)return;vt=vt||at.container||document.head;var yt=document.createElement("style");yt.type="text/css",vt.appendChild(yt);var jt={css:Ct,el:yt,container:vt};return Vl(jt),ia.push(jt),jt};function Bc(){gn()(ia,function(at){return Vl(at)})}function Vl(at){var Ct=at.css,vt=at.el;Ct=(Ct=Ct.replace(/(\d+)px/g,function(et,yt){return+yt*Lc+"px"})).replace(/_/g,"eruda-"),gn()(jl(),function(et,yt){Ct=Ct.replace(new RegExp(ua()("$".concat(et,":")),"g"),yt+":")});var Ge=Qo()(va.Light);gn()(Ge,function(et){Ct=Ct.replace(new RegExp("var\\(--".concat(Ja()(et),"\\)"),"g"),Ul[et])}),vt.innerText=Ct}Do.setScale=function(at){Lc=at,Bc()},Do.setTheme=function(at){Ul=$o()(at)?va[at]||va.Light:jn()(at,va.Light),Bc()},Do.getCurTheme=function(){return Ul},Do.getThemes=function(){return va},Do.clear=function(){gn()(ia,function(at){var Ct=at.container,vt=at.el;return Ct.removeChild(vt)}),ia=[]},Do.remove=function(at){ia=ha()(ia,function(Ct){return Ct!==at}),at.container.removeChild(at.el)};var Hr=Do;function Fc(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Gl,rl,Nc,jc,il,hs,de=function(at){we(vt,at);var Ct=Fc(vt);function vt(){var Ge;return ce(this,vt),(Ge=Ct.call(this))._style=Hr(V(6836)),Ge.name="settings",Ge._switchTpl=V(7006),Ge._selectTpl=V(1868),Ge._rangeTpl=V(480),Ge._colorTpl=V(6652),Ge._settings=[],Ge}return Ee(vt,[{key:"init",value:function(Ge){fi(Te(vt.prototype),"init",this).call(this,Ge),this._bindEvent()}},{key:"remove",value:function(Ge,et){var yt=this;return $o()(Ge)?this._$el.find(".eruda-text").each(function(){var jt=ze()(this);jt.text()===Ge&&jt.remove()}):this._settings=ha()(this._settings,function(jt){return jt.config!==Ge||jt.key!==et||(yt._$el.find("#"+jt.id).remove(),!1)}),this._cleanSeparator(),this}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._$el.html("")}},{key:"switch",value:function(Ge,et,yt){var jt=this._genId("settings");return this._settings.push({config:Ge,key:et,id:jt}),this._$el.append(this._switchTpl({desc:yt,key:et,id:jt,val:Ge.get(et)})),this}},{key:"color",value:function(Ge,et,yt){var jt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["#2196f3","#707d8b","#f44336","#009688","#ffc107"],cn=this._genId("settings");return this._settings.push({config:Ge,key:et,id:cn}),this._$el.append(this._colorTpl({desc:yt,colors:jt,id:cn,val:Ge.get(et)})),this}},{key:"select",value:function(Ge,et,yt,jt){var cn=this._genId("settings");return this._settings.push({config:Ge,key:et,id:cn}),this._$el.append(this._selectTpl({desc:yt,selections:jt,id:cn,val:Ge.get(et)})),this}},{key:"range",value:function(Ge,et,yt,jt){var cn=jt.min,Mn=cn===void 0?0:cn,Un=jt.max,hr=Un===void 0?1:Un,ir=jt.step,Mi=ir===void 0?.1:ir,Fi=this._genId("settings");this._settings.push({config:Ge,key:et,min:Mn,max:hr,step:Mi,id:Fi});var ko=Ge.get(et);return this._$el.append(this._rangeTpl({desc:yt,min:Mn,max:hr,step:Mi,val:ko,progress:U(ko,Mn,hr),id:Fi})),this}},{key:"separator",value:function(){return this._$el.append('<div class="eruda-separator"></div>'),this}},{key:"text",value:function(Ge){return this._$el.append('<div class="eruda-text">'.concat(Ge,"</div>")),this}},{key:"_cleanSeparator",value:function(){var Ge=Ri()(this._$el.get(0).children);function et(cn){return cn.getAttribute("class")==="eruda-separator"}for(var yt=0,jt=Ge.length;yt<jt-1;yt++)et(Ge[yt])&&et(Ge[yt+1])&&ze()(Ge[yt]).remove()}},{key:"_genId",value:function(){return za()("eruda-settings")}},{key:"_closeAll",value:function(){this._$el.find(".eruda-open").rmClass("eruda-open")}},{key:"_getSetting",value:function(Ge){var et;return gn()(this._settings,function(yt){yt.id===Ge&&(et=yt)}),et}},{key:"_bindEvent",value:function(){var Ge=this;this._$el.on("click",".eruda-checkbox",function(){var et=ze()(this).find("input"),yt=et.data("id"),jt=et.get(0).checked,cn=Ge._getSetting(yt);cn.config.set(cn.key,jt)}).on("click",".eruda-select .eruda-head",function(){var et=ze()(this).parent().find("ul"),yt=et.hasClass("eruda-open");Ge._closeAll(),yt?et.rmClass("eruda-open"):et.addClass("eruda-open")}).on("click",".eruda-select li",function(){var et=ze()(this),yt=et.parent(),jt=et.text(),cn=yt.data("id"),Mn=Ge._getSetting(cn);yt.rmClass("eruda-open"),yt.parent().find(".eruda-head span").text(jt),Mn.config.set(Mn.key,jt)}).on("click",".eruda-range .eruda-head",function(){var et=ze()(this).parent().find(".eruda-input-container"),yt=et.hasClass("eruda-open");Ge._closeAll(),yt?et.rmClass("eruda-open"):et.addClass("eruda-open")}).on("change",".eruda-range input",function(){var et=ze()(this),yt=et.parent().data("id"),jt=+et.val(),cn=Ge._getSetting(yt);cn.config.set(cn.key,jt)}).on("input",".eruda-range input",function(){var et=ze()(this),yt=et.parent(),jt=yt.data("id"),cn=+et.val(),Mn=Ge._getSetting(jt),Un=Mn.min,hr=Mn.max;yt.parent().find(".eruda-head span").text(cn),yt.find(".eruda-range-track-progress").css("width",U(cn,Un,hr)+"%")}).on("click",".eruda-color .eruda-head",function(){var et=ze()(this).parent().find("ul"),yt=et.hasClass("eruda-open");Ge._closeAll(),yt?et.rmClass("eruda-open"):et.addClass("eruda-open")}).on("click",".eruda-color li",function(){var et=ze()(this),yt=et.parent(),jt=et.css("background-color"),cn=yt.data("id"),Mn=Ge._getSetting(cn);yt.rmClass("eruda-open"),yt.parent().find(".eruda-head span").css("background-color",jt),Mn.config.set(Mn.key,jt)})}}],[{key:"createCfg",value:function(Ge,et){return new(hn())("eruda-"+Ge,et)}}]),vt}(Hi),U=function(at,Ct,vt){return((at-Ct)/(vt-Ct)*100).toFixed(2)},te=(typeof window=="undefined"?"undefined":he(window))==="object"&&(typeof document=="undefined"?"undefined":he(document))==="object"&&document.nodeType===9,be=function(at){return at=function(Ct){var vt=he(Ct);return!!Ct&&(vt==="function"||vt==="object")},at}({}),Pe=function(at){return at==null?"":at.toString()},Re=(Gl=Object.prototype.hasOwnProperty,function(at,Ct){return Gl.call(at,Ct)}),Be=Object.keys?Object.keys:function(at){var Ct=[];for(var vt in at)Re(at,vt)&&Ct.push(vt);return Ct},Ne=function(at){at=function(vt){if(!be(vt))return{};if(Ct)return Ct(vt);function Ge(){}return Ge.prototype=vt,new Ge};var Ct=Object.create;return at}({}),qe=function(at){return at=function(Ct,vt){Ct.prototype=Ne(vt.prototype)},at}({}),Ye=function(at){return at===void 0},Je=function(at){return at=function(Ct,vt,Ge){if(Ye(vt))return Ct;switch(Ge==null?3:Ge){case 1:return function(et){return Ct.call(vt,et)};case 3:return function(et,yt,jt){return Ct.call(vt,et,yt,jt)};case 4:return function(et,yt,jt,cn){return Ct.call(vt,et,yt,jt,cn)}}return function(){return Ct.apply(vt,arguments)}},at}({}),ut=function(at){var Ct=at?at.length:0;if(Ct)return at[Ct-1]},gt=function(at){return at},It=(rl=Object.prototype.toString,function(at){return rl.call(at)}),kt=function(at){return It(at)==="[object Arguments]"},At=Array.isArray?Array.isArray:function(at){return It(at)==="[object Array]"},St=function(at){at=function(Ge,et){if(At(Ge))return Ge;if(et&&Re(et,Ge))return[Ge];var yt=[];return Ge.replace(Ct,function(jt,cn,Mn,Un){yt.push(Mn?Un.replace(vt,"$1"):cn||jt)}),yt};var Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vt=/\\(\\)?/g;return at}({}),Et=function(at,Ct){var vt;for(vt=(Ct=St(Ct,at)).shift();!Ye(vt);){if((at=at[vt])==null)return;vt=Ct.shift()}return at},$t=function(at){var Ct=It(at);return Ct==="[object Function]"||Ct==="[object GeneratorFunction]"||Ct==="[object AsyncFunction]"},Ot=(Nc=Object.getPrototypeOf,jc={}.constructor,function(at){if(be(at)){if(Nc)return Nc(at);var Ct=at.__proto__;return Ct||Ct===null?Ct:$t(at.constructor)?at.constructor.prototype:at instanceof jc?jc.prototype:void 0}}),Jt=typeof wx!="undefined"&&$t(wx.openLocation),Yt=function(at){return It(at)==="[object Number]"},Gt=(il=Math.pow(2,53)-1,function(at){if(!at)return!1;var Ct=at.length;return Yt(Ct)&&Ct>=0&&Ct<=il&&!$t(at)}),Kt=function(at,Ct,vt){var Ge,et;if(Ct=Je(Ct,vt),Gt(at))for(Ge=0,et=at.length;Ge<et;Ge++)Ct(at[Ge],Ge,at);else{var yt=Be(at);for(Ge=0,et=yt.length;Ge<et;Ge++)Ct(at[yt[Ge]],yt[Ge],at)}return at},Wt=function(at){return at=function(Ct,vt){return function(Ge){return Kt(arguments,function(et,yt){if(yt!==0){var jt=Ct(et);Kt(jt,function(cn){vt&&!Ye(Ge[cn])||(Ge[cn]=et[cn])})}}),Ge}},at}({}),sn=Wt(Be),mn=function(at){return It(at)==="[object String]"},Wn=function(at){return at==null||(Gt(at)&&(At(at)||mn(at)||kt(at))?at.length===0:Be(at).length===0)},pn=function(at,Ct){var vt=Be(Ct),Ge=vt.length;if(at==null)return!Ge;at=Object(at);for(var et=0;et<Ge;et++){var yt=vt[et];if(Ct[yt]!==at[yt]||!(yt in at))return!1}return!0},zn=(hs=/^\s+/,function(at,Ct){if(Ct==null)return at.trimLeft?at.trimLeft():at.replace(hs,"");for(var vt,Ge,et=0,yt=at.length,jt=Ct.length,cn=!0;cn&&et<yt;)for(cn=!1,vt=-1,Ge=at.charAt(et);++vt<jt;)if(Ge===Ct[vt]){cn=!0,et++;break}return et>=yt?"":at.substr(et,yt)}),Nn=function(at){return at=sn({},at),function(Ct){return pn(Ct,at)}},er=function(at){at={getItem:function(jt){return(vt[jt]?Ct[jt]:this[jt])||null},setItem:function(jt,cn){vt[jt]?Ct[jt]=cn:this[jt]=cn},removeItem:function(jt){vt[jt]?delete Ct[jt]:delete this[jt]},key:function(jt){var cn=Ge();return jt>=0&&jt<cn.length?cn[jt]:null},clear:function(){for(var jt,cn=et(),Mn=0;jt=cn[Mn];Mn++)delete this[jt];cn=yt();for(var Un,hr=0;Un=cn[hr];hr++)delete Ct[Un]}},Object.defineProperty(at,"length",{enumerable:!1,configurable:!0,get:function(){return Ge().length}});var Ct={},vt={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Ge(){return et().concat(yt())}function et(){return Be(at).filter(function(jt){return!vt[jt]})}function yt(){return Be(Ct)}return at}({}),kn=function(at){return At(at)?function(vt){return Et(vt,at)}:(Ct=at,function(vt){return vt==null?void 0:vt[Ct]});var Ct},Zn=function(at,Ct,vt){return at==null?gt:$t(at)?Je(at,Ct,vt):be(at)&&!At(at)?Nn(at):kn(at)},Ln=function(at,Ct,vt){var Ge=[];return Ct=Zn(Ct,vt),Kt(at,function(et,yt,jt){Ct(et,yt,jt)&&Ge.push(et)}),Ge},or=function(at){function Ct(vt,Ge){return vt===Ge}return function(vt,Ge){return Ge=Ge||Ct,Ln(vt,function(et,yt,jt){for(var cn=jt.length;++yt<cn;)if(Ge(et,jt[yt]))return!1;return!0})}}(),tr=function(at){var Ct=Object.getOwnPropertyNames,vt=Object.getOwnPropertySymbols;return at=function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt=et.prototype,jt=yt===void 0||yt,cn=et.unenumerable,Mn=cn!==void 0&&cn,Un=et.symbol,hr=Un!==void 0&&Un,ir=[];if((Mn||hr)&&Ct){var Mi=Be;Mn&&Ct&&(Mi=Ct);do ir=ir.concat(Mi(Ge)),hr&&vt&&(ir=ir.concat(vt(Ge)));while(jt&&(Ge=Ot(Ge))&&Ge!==Object.prototype);ir=or(ir)}else if(jt)for(var Fi in Ge)ir.push(Fi);else ir=Be(Ge);return ir},at}({}),pr=Wt(tr),yr=function(at,Ct,vt){Ct=Zn(Ct,vt);for(var Ge=!Gt(at)&&Be(at),et=(Ge||at).length,yt=Array(et),jt=0;jt<et;jt++){var cn=Ge?Ge[jt]:jt;yt[jt]=Ct(at[cn],cn,at)}return yt},Ar=function(at){return at?At(at)?at:Gt(at)&&!mn(at)?yr(at):[at]:[]},Vr=function(at){var Ct=(at=function(vt,Ge){return Ct.extend(vt,Ge)}).Base=function vt(Ge,et,yt){yt=yt||{};var jt=et.className||Et(et,"initialize.name")||"";delete et.className;var cn=function(){var Mn=Ar(arguments);return this.initialize&&this.initialize.apply(this,Mn)||this};if(!Jt)try{cn=new Function("toArr","return function "+jt+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(Ar)}catch{}return qe(cn,Ge),cn.prototype.constructor=cn,cn.extend=function(Mn,Un){return vt(cn,Mn,Un)},cn.inherits=function(Mn){qe(cn,Mn)},cn.methods=function(Mn){return pr(cn.prototype,Mn),cn},cn.statics=function(Mn){return pr(cn,Mn),cn},cn.methods(et).statics(yt),cn}(Object,{className:"Base",callSuper:function(vt,Ge,et){return vt.prototype[Ge].apply(this,et)},toString:function(){return this.constructor.name}});return at}({}),_r=function(at){if(Yt(at))return at;if(be(at)){var Ct=$t(at.valueOf)?at.valueOf():at;at=be(Ct)?Ct+"":Ct}return mn(at)?+at:at===0?at:+at},Mr=function(at){return _r(at.replace("px",""))},Zr=function(at,Ct){if(Ct==null){if(at.trimRight)return at.trimRight();Ct=` \r
	\f\v`}for(var vt,Ge,et=at.length-1,yt=Ct.length,jt=!0;jt&&et>=0;)for(jt=!1,vt=-1,Ge=at.charAt(et);++vt<yt;)if(Ge===Ct[vt]){jt=!0,et--;break}return et>=0?at.substring(0,et+1):""},ci=function(at,Ct){return Ct==null&&at.trim?at.trim():zn(Zr(at,Ct),Ct)},wi=function(at){at={parse:function(vt){var Ge={};return vt=ci(vt).replace(Ct,""),Kt(vt.split("&"),function(et){var yt=et.split("="),jt=yt.shift(),cn=yt.length>0?yt.join("="):null;jt=decodeURIComponent(jt),cn=decodeURIComponent(cn),Ye(Ge[jt])?Ge[jt]=cn:At(Ge[jt])?Ge[jt].push(cn):Ge[jt]=[Ge[jt],cn]}),Ge},stringify:function(vt,Ge){return Ln(yr(vt,function(et,yt){return be(et)&&Wn(et)?"":At(et)?at.stringify(et,yt):encodeURIComponent(Ge||yt)+"="+encodeURIComponent(et)}),function(et){return et.length>0}).join("&")}};var Ct=/^(\?|#|&)/g;return at}({}),oi=function(at){at=Vr({className:"Url",initialize:function(et){!et&&te&&(et=window.location.href),pr(this,at.parse(et||""))},setQuery:function(et,yt){var jt=this.query;return be(et)?Kt(et,function(cn,Mn){jt[Mn]=Pe(cn)}):jt[et]=Pe(yt),this},rmQuery:function(et){var yt=this.query;return At(et)||(et=Ar(et)),Kt(et,function(jt){delete yt[jt]}),this},toString:function(){return at.stringify(this)}},{parse:function(et){var yt={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},jt=ci(et),cn=!1,Mn=jt.match(Ct);if(Mn&&(Mn=Mn[0],yt.protocol=Mn.toLowerCase(),jt=jt.substr(Mn.length)),Mn&&(cn=jt.substr(0,2)==="//")&&(jt=jt.slice(2),yt.slashes=!0),cn){for(var Un=jt,hr=-1,ir=0,Mi=Ge.length;ir<Mi;ir++){var Fi=jt.indexOf(Ge[ir]);Fi!==-1&&(hr===-1||Fi<hr)&&(hr=Fi)}hr>-1&&(Un=jt.slice(0,hr),jt=jt.slice(hr));var ko=Un.lastIndexOf("@");ko!==-1&&(yt.auth=decodeURIComponent(Un.slice(0,ko)),Un=Un.slice(ko+1)),yt.hostname=Un;var Wo=Un.match(vt);Wo&&((Wo=Wo[0])!==":"&&(yt.port=Wo.substr(1)),yt.hostname=Un.substr(0,Un.length-Wo.length))}var li=jt.indexOf("#");li!==-1&&(yt.hash=jt.substr(li),jt=jt.slice(0,li));var Ei=jt.indexOf("?");return Ei!==-1&&(yt.query=wi.parse(jt.substr(Ei+1)),jt=jt.slice(0,Ei)),yt.pathname=jt||"/",yt},stringify:function(et){var yt=et.protocol+(et.slashes?"//":"")+(et.auth?encodeURIComponent(et.auth)+"@":"")+et.hostname+(et.port?":"+et.port:"")+et.pathname;return Wn(et.query)||(yt+="?"+wi.stringify(et.query)),et.hash&&(yt+=et.hash),yt}});var Ct=/^([a-z0-9.+-]+:)/i,vt=/:[0-9]*$/,Ge=["/","?","#"];return at}({}),Wi=function(at){var Ct=ut(at.split("/"));return Ct.indexOf("?")>-1&&(Ct=ci(Ct.split("?")[0])),Ct===""&&(Ct=(at=new oi(at)).hostname),Ct},To=function(at){return at=function(Ct,vt){var Ge;switch(Ye(vt)&&(vt=!0),Ct){case"local":Ge=window.localStorage;break;case"session":Ge=window.sessionStorage}try{var et="test-localStorage-"+Date.now();Ge.setItem(et,et);var yt=Ge.getItem(et);if(Ge.removeItem(et),yt!==et)throw new Error}catch{return vt?er:void 0}return Ge},at}({});function oa(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var _i=function(at){we(vt,at);var Ct=oa(vt);function vt(Ge){var et;return ce(this,vt),(et=Ct.call(this))._style=Hr(V(7693)),et._$container=Ge,et._appendTpl(),et._makeDraggable(),et._bindEvent(),et._registerListener(),et}return Ee(vt,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(Ge){this._isOutOfRange(Ge)&&(Ge=this._getDefPos()),this._$el.css({left:Ge.x,top:Ge.y}),this.config.set("pos",Ge)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){Hr.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(Ge){Ge=Ge||this.config.get("pos");var et=this._getDefPos();return Ge.x>et.x+10||Ge.x<0||Ge.y<0||Ge.y>et.y+10}},{key:"_registerListener",value:function(){var Ge=this;this._scaleListener=function(){return es()(function(){Ge._isOutOfRange()&&Ge._resetPos()})},si.on(si.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){si.off(si.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ge=this._$container;Ge.append(V(7640)()),this._$el=Ge.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(Ge){var et=this.config,yt=et.get("pos"),jt=this._getDefPos();et.get("rememberPos")&&!Ge||(yt=jt),this.setPos(yt)}},{key:"_bindEvent",value:function(){var Ge=this,et=this._draggabilly,yt=this._$el;et.on("staticClick",function(){return Ge.emit("click")}).on("dragStart",function(){return yt.addClass("eruda-active")}),et.on("dragEnd",function(){var jt=Ge.config;jt.get("rememberPos")&&jt.set("pos",{x:Mr(Ge._$el.css("left")),y:Mr(Ge._$el.css("top"))}),yt.rmClass("eruda-active")}),js().on("change",function(){return Ge._resetPos(!0)}),window.addEventListener("resize",function(){return Ge._resetPos()})}},{key:"_makeDraggable",value:function(){this._draggabilly=new(Ce())(this._$el.get(0),{containment:!0})}},{key:"initCfg",value:function(Ge){var et=this.config=de.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});Ge.separator().switch(et,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var Ge=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-Ge,y:window.innerHeight-Ge}}}]),vt}(an());function vi(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var zr,zi=function(at){we(vt,at);var Ct=vi(vt);function vt(Ge){var et;return ce(this,vt),(et=Ct.call(this))._style=Hr(V(3409)),et._$el=Ge.find(".eruda-nav-bar"),et._$bottomBar=Ge.find(".eruda-bottom-bar"),et._len=0,et._bindEvent(),et}return Ee(vt,[{key:"add",value:function(Ge){var et=this._$el;this._len++;var yt=et.find(".eruda-nav-bar-item").last(),jt='<div class="eruda-nav-bar-item">'.concat(Ge,"</div>");yt.length>0&&yt.text()==="settings"?yt.before(jt):et.append(jt),this.resetBottomBar()}},{key:"remove",value:function(Ge){this._len--,this._$el.find(".eruda-nav-bar-item").each(function(){var et=ze()(this);et.text().toLowerCase()===Ge.toLowerCase()&&et.remove()}),this.resetBottomBar()}},{key:"activateTool",value:function(Ge){var et=this;this._$el.find(".eruda-nav-bar-item").each(function(){var yt=ze()(this);yt.text()===Ge?(yt.addClass("eruda-active"),et.resetBottomBar(),et._scrollItemToView()):yt.rmClass("eruda-active")})}},{key:"destroy",value:function(){Hr.remove(this._style),this._$el.remove()}},{key:"_scrollItemToView",value:function(){var Ge,et=this._$el,yt=et.find(".eruda-active").get(0),jt=et.get(0),cn=yt.offsetLeft,Mn=yt.offsetWidth,Un=jt.offsetWidth,hr=jt.scrollLeft;cn<hr?Ge=cn:cn+Mn>Un+hr&&(Ge=cn+Mn-Un),Uo()(Ge)&&(jt.scrollLeft=Ge)}},{key:"resetBottomBar",value:function(){var Ge=this._$bottomBar,et=this._$el,yt=et.find(".eruda-active").get(0);yt&&Ge.css({width:yt.offsetWidth,left:yt.offsetLeft-et.get(0).scrollLeft})}},{key:"_bindEvent",value:function(){var Ge=this,et=this;this._$el.on("click",".eruda-nav-bar-item",function(){et.emit("showTool",ze()(this).text())}).on("scroll",function(){return Ge.resetBottomBar()})}}]),vt}(an()),$i=zr=new(Pn())("[Eruda]","warn");zr.formatter=function(at,Ct){return Ct.unshift(this.name),Ct};var ui=V(6093),Yi=V.n(ui);function $a(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var to=function(at){we(vt,at);var Ct=$a(vt);function vt(Ge){var et,yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=yt.defaults,cn=jt===void 0?{}:jt;return ce(this,vt),(et=Ct.call(this))._defCfg=Or()({transparency:1,displaySize:80,theme:ka()()?"Dark":"Light"},cn),et._style=Hr(V(9217)),et.$container=Ge,et._isShow=!1,et._opacity=1,et._tools={},et._isResizing=!1,et._resizeTimer=null,et._resizeStartY=0,et._resizeStartSize=0,et._appendTpl(),et._initNavBar(),et._initNotification(),et._bindEvent(),et}return Ee(vt,[{key:"show",value:function(){var Ge=this;return this._isShow=!0,this._$el.show(),this._navBar.resetBottomBar(),setTimeout(function(){Ge._$el.css("opacity",Ge._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var Ge=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return Ge._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(Ge){if(!(Ge instanceof Hi)){var et=new Hi,yt=et.init,jt=et.show,cn=et.hide,Mn=et.destroy;jn()(Ge,{init:yt,show:jt,hide:cn,destroy:Mn})}var Un=Ge.name;return Un?(Un=Un.toLowerCase(),this._tools[Un]?$i.warn("Tool ".concat(Un," already exists")):(this._$tools.prepend('<div id="eruda-'.concat(Un,'" class="eruda-').concat(Un,' eruda-tool"></div>')),Ge.init(this._$tools.find(".eruda-".concat(Un,".eruda-tool")),this),Ge.active=!1,this._tools[Un]=Ge,this._navBar.add(Un),this)):$i.error("You must specify a name for a tool")}},{key:"remove",value:function(Ge){var et=this._tools;if(!et[Ge])return $i.warn("Tool ".concat(Ge," doesn't exist"));this._navBar.remove(Ge);var yt=et[Ge];if(delete et[Ge],yt.active){var jt=Qo()(et);jt.length>0&&this.showTool(et[Bs()(jt)].name)}return yt.destroy(),this}},{key:"removeAll",value:function(){var Ge=this;return gn()(this._tools,function(et){return Ge.remove(et.name)}),this}},{key:"get",value:function(Ge){var et=this._tools[Ge];if(et)return et}},{key:"showTool",value:function(Ge){if(this._curTool===Ge)return this;this._curTool=Ge;var et=this._tools,yt=et[Ge];if(yt){var jt={};return gn()(et,function(cn){cn.active&&(jt=cn,cn.active=!1,cn.hide())}),yt.active=!0,yt.show(),this._navBar.activateTool(Ge),this.emit("showTool",Ge,jt),this}}},{key:"initCfg",value:function(Ge){var et=this,yt=this.config=de.createCfg("dev-tools",this._defCfg);this._setTransparency(yt.get("transparency")),this._setDisplaySize(yt.get("displaySize")),this._setTheme(yt.get("theme")),yt.on("change",function(jt,cn){switch(jt){case"transparency":return et._setTransparency(cn);case"displaySize":return et._setDisplaySize(cn);case"theme":return et._setTheme(cn)}}),Ge.separator().select(yt,"theme","Theme",Qo()(Hr.getThemes())).range(yt,"transparency","Transparency",{min:.2,max:1,step:.01}).range(yt,"displaySize","Display Size",{min:40,max:100,step:1}).separator()}},{key:"notify",value:function(Ge,et){this._notification.notify(Ge,et)}},{key:"destroy",value:function(){Hr.remove(this._style),this.removeAll(),this._navBar.destroy(),this._$el.remove()}},{key:"_setTheme",value:function(Ge){var et=this.$container;(function(yt){return xi()(Dc,yt)})(Ge)?et.addClass("eruda-dark"):et.rmClass("eruda-dark"),Hr.setTheme(Ge)}},{key:"_setTransparency",value:function(Ge){Uo()(Ge)&&(this._opacity=Ge,this._isShow&&this._$el.css({opacity:Ge}))}},{key:"_setDisplaySize",value:function(Ge){Uo()(Ge)&&this._$el.css({height:Ge+"%"})}},{key:"_appendTpl",value:function(){var Ge=this.$container;Ge.append(V(8269)()),this._$el=Ge.find(".eruda-dev-tools"),this._$tools=this._$el.find(".eruda-tools")}},{key:"_initNavBar",value:function(){var Ge=this;this._navBar=new zi(this._$el.find(".eruda-nav-bar-container")),this._navBar.on("showTool",function(et){return Ge.showTool(et)})}},{key:"_initNotification",value:function(){this._notification=new(Yi())(this._$el.find(".eruda-notification").get(0),{position:{x:"center",y:"top"}})}},{key:"_bindEvent",value:function(){var Ge=this,et=this._$el.find(".eruda-nav-bar"),yt=function(ir){ir=ir.origEvent,Ge._resizeTimer=setTimeout(function(){ir.preventDefault(),ir.stopPropagation(),Ge._isResizing=!0,Ge._resizeStartSize=Ge.config.get("displaySize"),Ge._resizeStartY=Un(ir),et.css("filter","brightness(1.2)")},1e3)},jt=Ra()(function(ir){return Ge.config.set("displaySize",ir)},50),cn=function(ir){if(!Ge._isResizing)return clearTimeout(Ge._resizeTimer);ir.preventDefault(),ir.stopPropagation(),ir=ir.origEvent;var Mi=Math.round((Ge._resizeStartY-Un(ir))/window.innerHeight*100),Fi=Ge._resizeStartSize+Mi;Fi<40?Fi=40:Fi>100&&(Fi=100),jt(Fi)},Mn=function(){clearTimeout(Ge._resizeTimer),Ge._isResizing=!1,et.css("filter","brightness(1)")},Un=function(ir){return ir.clientY?ir.clientY:ir.touches?ir.touches[0].clientY:0};et.on("contextmenu",function(ir){return ir.preventDefault()});var hr=ze()(document.documentElement);Ca()()?(et.on("touchstart",yt).on("touchmove",cn),hr.on("touchend",Mn)):(et.on("mousedown",yt),hr.on("mousemove",cn),hr.on("mouseup",Mn))}}]),vt}(an());function go(at,Ct,vt){return Ct in at?Object.defineProperty(at,Ct,{value:vt,enumerable:!0,configurable:!0,writable:!0}):at[Ct]=vt,at}var Da=V(7132),La=V.n(Da);function no(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}wo().start();var Ba=function(at){we(vt,at);var Ct=no(vt);function vt(){var Ge,et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yt=et.name,jt=yt===void 0?"console":yt;return ce(this,vt),go(ye(Ge=Ct.call(this)),"_handleShow",function(){$s()(Ge._$el.get(0))||Ge._logger.renderViewport()}),go(ye(Ge),"_handleErr",function(cn){Ge._logger.error(cn)}),an().mixin(ye(Ge)),Ge.name=jt,Ge._scale=1,Ge._selectedLog=null,Ge._registerListener(),Ge}return Ee(vt,[{key:"init",value:function(Ge,et){fi(Te(vt.prototype),"init",this).call(this,Ge),this._container=et,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){fi(Te(vt.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var Ge=this,et=this._origConsole={},yt=window.console;return qo.forEach(function(jt){var cn=et[jt]=Pa();yt[jt]&&(cn=et[jt]=yt[jt].bind(yt)),yt[jt]=function(){Ge[jt].apply(Ge,arguments),cn.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(Ge,et){this._logger.setGlobal(Ge,et)}},{key:"restoreConsole",value:function(){var Ge=this;return this._origConsole?(qo.forEach(function(et){return window.console[et]=Ge._origConsole[et]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return wo().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return wo().rmListener(this._handleErr),this}},{key:"destroy",value:function(){this._logger.destroy(),fi(Te(vt.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&Hr.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._unregisterListener(),this._rmCfg()}},{key:"_enableJsExecution",value:function(Ge){var et=this._$el,yt=et.find(".eruda-console-container"),jt=et.find(".eruda-js-input");Ge?(jt.show(),yt.rmClass("eruda-js-input-hidden")):(jt.hide(),yt.addClass("eruda-js-input-hidden"))}},{key:"_registerListener",value:function(){var Ge=this;this._scaleListener=function(et){return Ge._scale=et},si.on(si.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){si.off(si.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ge=this._$el;this._style=Hr(V(3816)),Ge.append(V(4432)());var et=Ge.find(".eruda-js-input"),yt=et.find("textarea"),jt=et.find(".eruda-buttons");Object.assign(this,{_$control:Ge.find(".eruda-control"),_$logs:Ge.find(".eruda-logs-container"),_$inputContainer:et,_$input:yt,_$inputBtns:jt,_$searchKeyword:Ge.find(".eruda-search-keyword")})}},{key:"_initLogger",value:function(){var Ge=this.config,et=Ge.get("maxLogNum");et=et==="infinite"?0:+et;var yt=this._$control.find(".eruda-filter"),jt=new(La())(this._$logs.get(0),{asyncRender:Ge.get("asyncRender"),maxNum:et,showHeader:Ge.get("displayExtraInfo"),unenumerable:Ge.get("displayUnenumerable"),accessGetter:Ge.get("displayGetterVal"),lazyEvaluation:Ge.get("lazyEvaluation")});jt.on("optionChange",function(cn,Mn){cn==="filter"&&yt.each(function(){var Un=ze()(this),hr=Un.data("filter")===Mn;Un[hr?"addClass":"rmClass"]("eruda-active")})}),Ge.get("overrideConsole")&&this.overrideConsole(),this._logger=jt}},{key:"_exposeLogger",value:function(){var Ge=this,et=this._logger;["filter","html"].concat(qo).forEach(function(yt){return Ge[yt]=function(){for(var jt=arguments.length,cn=new Array(jt),Mn=0;Mn<jt;Mn++)cn[Mn]=arguments[Mn];return et[yt].apply(et,cn),Ge.emit.apply(Ge,[yt].concat(cn)),Ge}})}},{key:"_bindEvent",value:function(){var Ge=this,et=this._container,yt=this._$input,jt=this._$inputBtns,cn=this._$control,Mn=this._$searchKeyword,Un=this._logger,hr=this.config;cn.on("click",".eruda-clear-console",function(){return Un.clear(!0)}).on("click",".eruda-filter",function(){Mn.text(""),Un.setOption("filter",ze()(this).data("filter"))}).on("click",".eruda-search",function(){var ir=prompt("Filter");jo()(ir)||(Mn.text(ir),na()(ir)!==""?Un.setOption("filter",new RegExp(ua()(Vo()(ir)))):Un.setOption("filter","all"))}).on("click",".eruda-copy",function(){Ge._selectedLog&&(Ge._selectedLog.copy(),et.notify("Copied"))}),jt.on("click",".eruda-cancel",function(){return Ge._hideInput()}).on("click",".eruda-execute",function(){var ir=yt.val().trim();ir!==""&&(Un.evaluate(ir),yt.val("").get(0).blur(),Ge._hideInput())}),yt.on("focusin",function(){return Ge._showInput()}),Un.on("insert",function(ir){ir.type==="error"&&hr.get("displayIfErr")&&et.showTool("console").show()}),Un.on("select",function(ir){Ge._selectedLog=ir,cn.find(".eruda-icon-copy").rmClass("eruda-icon-disabled")}),Un.on("deselect",function(){Ge._selectedLog=null,cn.find(".eruda-icon-copy").addClass("eruda-icon-disabled")}),et.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass("eruda-active"),this._$inputBtns.hide()}},{key:"_showInput",value:function(){this._$inputContainer.addClass("eruda-active"),this._$inputBtns.show()}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"asyncRender").remove(Ge,"jsExecution").remove(Ge,"catchGlobalErr").remove(Ge,"overrideConsole").remove(Ge,"displayExtraInfo").remove(Ge,"displayUnenumerable").remove(Ge,"displayGetterVal").remove(Ge,"lazyEvaluation").remove(Ge,"displayIfErr").remove(Ge,"maxLogNum").remove(cs()(this.name))}},{key:"_initCfg",value:function(){var Ge=this,et=this._container,yt=this.config=de.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(yt.get("jsExecution")),yt.get("catchGlobalErr")&&this.catchGlobalErr(),yt.on("change",function(cn,Mn){var Un=Ge._logger;switch(cn){case"asyncRender":return Un.setOption("asyncRender",Mn);case"jsExecution":return Ge._enableJsExecution(Mn);case"catchGlobalErr":return Mn?Ge.catchGlobalErr():Ge.ignoreGlobalErr();case"overrideConsole":return Mn?Ge.overrideConsole():Ge.restoreConsole();case"maxLogNum":return Un.setOption("maxNum",Mn==="infinite"?0:+Mn);case"displayExtraInfo":return Un.setOption("showHeader",Mn);case"displayUnenumerable":return Un.setOption("unenumerable",Mn);case"displayGetterVal":return Un.setOption("accessGetter",Mn);case"lazyEvaluation":return Un.setOption("lazyEvaluation",Mn)}});var jt=et.get("settings");jt&&jt.text(cs()(this.name)).switch(yt,"asyncRender","Asynchronous Rendering").switch(yt,"jsExecution","Enable JavaScript Execution").switch(yt,"catchGlobalErr","Catch Global Errors").switch(yt,"overrideConsole","Override Console").switch(yt,"displayIfErr","Auto Display If Error Occurs").switch(yt,"displayExtraInfo","Display Extra Information").switch(yt,"displayUnenumerable","Display Unenumerable Properties").switch(yt,"displayGetterVal","Access Getter Value").switch(yt,"lazyEvaluation","Lazy Evaluation").select(yt,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),vt}(Hi),qo=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],ol=V(9143),Xh=V.n(ol),Kh=V(2139),Yh=V(8689),ph=V(7935),Jh=V(9119);function fh(at,Ct){var vt=Object.keys(at);if(Object.getOwnPropertySymbols){var Ge=Object.getOwnPropertySymbols(at);Ct&&(Ge=Ge.filter(function(et){return Object.getOwnPropertyDescriptor(at,et).enumerable})),vt.push.apply(vt,Ge)}return vt}function _h(at){for(var Ct=1;Ct<arguments.length;Ct++){var vt=arguments[Ct]!=null?arguments[Ct]:{};Ct%2?fh(Object(vt),!0).forEach(function(Ge){go(at,Ge,vt[Ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(vt)):fh(Object(vt)).forEach(function(Ge){Object.defineProperty(at,Ge,Object.getOwnPropertyDescriptor(vt,Ge))})}return at}var ql=new(Xh());ql.register("Network",Kh),ql.register("Overlay",Yh),ql.register("DOM",_h(_h({},ph),{},{getNodeId:ph.getDOMNodeId})),ql.register("Storage",Jh);var Ao=ql;function Qh(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var ed=function(at){we(vt,at);var Ct=Qh(vt);function vt(){var Ge;return ce(this,vt),go(ye(Ge=Ct.call(this)),"_reqWillBeSent",function(et){Ge._requests[et.requestId]={name:Wi(et.request.url),url:et.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:et.request.postData,method:et.request.method,startTime:1e3*et.timestamp,time:0,resTxt:"",done:!1,reqHeaders:et.request.headers||{},resHeaders:{}}}),go(ye(Ge),"_resReceivedExtraInfo",function(et){var yt=Ge._requests[et.requestId];yt&&(yt.resHeaders=et.headers,Ge._updateType(yt),Ge._render())}),go(ye(Ge),"_resReceived",function(et){var yt=Ge._requests[et.requestId];if(yt){var jt=et.response,cn=jt.status,Mn=jt.headers;yt.status=cn,(cn<200||cn>=300)&&(yt.hasErr=!0),Mn&&(yt.resHeaders=Mn,Ge._updateType(yt)),Ge._render()}}),go(ye(Ge),"_loadingFinished",function(et){var yt=Ge._requests[et.requestId];if(yt){var jt=1e3*et.timestamp;yt.time=jt-yt.startTime,yt.displayTime=Ns()(yt.time),yt.size=et.encodedDataLength,yt.done=!0,yt.resTxt=Ao.domain("Network").getResponseBody({requestId:et.requestId}).body,Ge._render()}}),Ge._style=Hr(V(3985)),Ge.name="network",Ge._requests={},Ge._tpl=V(4854),Ge._detailTpl=V(1083),Ge._requestsTpl=V(726),Ge._detailData={},Ge}return Ee(vt,[{key:"init",value:function(Ge,et){fi(Te(vt.prototype),"init",this).call(this,Ge),this._container=et,this._bindEvent(),this._appendTpl()}},{key:"show",value:function(){fi(Te(vt.prototype),"show",this).call(this),this._render()}},{key:"clear",value:function(){this._requests={},this._render()}},{key:"requests",value:function(){var Ge=[];return gn()(this._requests,function(et){Ge.push(et)}),Ge}},{key:"_updateType",value:function(Ge){var et=function(cn){if(!cn)return"unknown";var Mn=cn.split(";")[0].split("/");return{type:Mn[0],subType:Bs()(Mn)}}(Ge.resHeaders["content-type"]||""),yt=et.type,jt=et.subType;Ge.type=yt,Ge.subType=jt}},{key:"_bindEvent",value:function(){var Ge=this,et=this._$el,yt=this._container,jt=this;function cn(Un,hr){var ir=yt.get("sources");ir&&(ir.set(Un,hr),yt.showTool("sources"))}et.on("click",".eruda-request",function(){var Un=ze()(this).data("id"),hr=jt._requests[Un];hr.done&&jt._showDetail(hr)}).on("click",".eruda-clear-request",function(){return Ge.clear()}).on("click",".eruda-back",function(){return Ge._hideDetail()}).on("click",".eruda-http .eruda-response",function(){var Un=Ge._detailData,hr=Un.resTxt;switch(Un.subType){case"css":return cn("css",hr);case"html":return cn("html",hr);case"javascript":return cn("js",hr);case"json":return cn("object",hr)}if(Un.type==="image")return cn("img",Un.url)}),Ao.domain("Network").enable();var Mn=Ao.domain("Network");Mn.on("requestWillBeSent",this._reqWillBeSent),Mn.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Mn.on("responseReceived",this._resReceived),Mn.on("loadingFinished",this._loadingFinished)}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),Hr.remove(this._style);var Ge=Ao.domain("Network");Ge.off("requestWillBeSent",this._reqWillBeSent),Ge.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),Ge.off("responseReceived",this._resReceived),Ge.off("loadingFinished",this._loadingFinished)}},{key:"_showDetail",value:function(Ge){Ge.resTxt&&na()(Ge.resTxt)===""&&delete Ge.resTxt,zo()(Ge.resHeaders)&&delete Ge.resHeaders,zo()(Ge.reqHeaders)&&delete Ge.reqHeaders,this._$detail.html(this._detailTpl(Ge)).show(),this._detailData=Ge}},{key:"_hideDetail",value:function(){this._$detail.hide()}},{key:"_appendTpl",value:function(){var Ge=this._$el;Ge.html(this._tpl()),this._$detail=Ge.find(".eruda-detail"),this._$requests=Ge.find(".eruda-requests")}},{key:"_render",value:function(){if(this.active){var Ge={};zo()(this._requests)||(Ge.requests=this._requests),this._renderHtml(this._requestsTpl(Ge))}}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$requests.html(Ge))}}]),vt}(Hi);function td(at){for(var Ct={},vt=0,Ge=at.length;vt<Ge;vt++){var et=at[vt];at[et]!=="initial"&&(Ct[et]=at[et])}return function(yt){return zl()(yt,{comparator:function(jt,cn){for(var Mn=jt.length,Un=cn.length,hr=Mn>Un?Un:Mn,ir=0;ir<hr;ir++){var Mi=Uc(jt.charCodeAt(ir),cn.charCodeAt(ir));if(Mi!==0)return Mi}return Mn>Un?1:Mn<Un?-1:0}})}(Ct)}var nd=Element.prototype,Iu=function(){return!1};nd.webkitMatchesSelector?Iu=function(at,Ct){return at.webkitMatchesSelector(Ct)}:nd.mozMatchesSelector&&(Iu=function(at,Ct){return at.mozMatchesSelector(Ct)});var Kd=function(){function at(Ct){ce(this,at),this._el=Ct}return Ee(at,[{key:"getComputedStyle",value:function(){return td(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var Ct=this,vt=[];return gn()(document.styleSheets,function(Ge){try{if(!Ge.cssRules)return}catch{return}gn()(Ge.cssRules,function(et){var yt=!1;try{yt=Ct._elMatchesSel(et.selectorText)}catch{}yt&&vt.push({selectorText:et.selectorText,style:td(et.style)})})}),vt}},{key:"_elMatchesSel",value:function(Ct){return Iu(this._el,Ct)}}]),at}();function Uc(at,Ct){return(at=rd(at))>(Ct=rd(Ct))?1:at<Ct?-1:0}function rd(at){return at===45?123:at}var Pu=function(){function at(){ce(this,at),this._isShow=!1,Ao.domain("Overlay").enable()}return Ee(at,[{key:"setEl",value:function(Ct){this._target=Ct}},{key:"show",value:function(){this._isShow=!0;var Ct=Ao.domain("DOM").getNodeId({node:this._target}).nodeId;Ao.domain("Overlay").highlightNode({nodeId:Ct,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){Ao.domain("Overlay").disable()}},{key:"hide",value:function(){this._isShow=!1,Ao.domain("Overlay").hideHighlight()}}]),at}(),id=V(4204),Hl=V.n(id);function Fa(at){var Ct=at.parentNode;if(!Ct)return!1;for(;Ct;)if((Ct=Ct.parentNode)&&Ct.id==="eruda")return!0;return!1}function Na(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Ou=function(at){we(vt,at);var Ct=Na(vt);function vt(){var Ge;ce(this,vt);var et=ye(Ge=Ct.call(this));return Ge._startListener=function(yt){if(!Fa(yt.target))return et._timer=setTimeout(function(){et.emit("select",yt.target)},200),!1},Ge._moveListener=function(){clearTimeout(et._timer)},Ge._clickListener=function(yt){Fa(yt.target)||(yt.preventDefault(),yt.stopImmediatePropagation())},Ge}return Ee(vt,[{key:"enable",value:function(){function Ge(et,yt){document.body.addEventListener(et,yt,!0)}return this.disable(),Ca()()?(Ge("touchstart",this._startListener),Ge("touchmove",this._moveListener)):(Ge("mousedown",this._startListener),Ge("mousemove",this._moveListener)),Ge("click",this._clickListener),this}},{key:"disable",value:function(){function Ge(et,yt){document.body.removeEventListener(et,yt,!0)}return Ca()()?(Ge("touchstart",this._startListener),Ge("touchmove",this._moveListener)):(Ge("mousedown",this._startListener),Ge("mousemove",this._moveListener)),Ge("click",this._clickListener),this}}]),vt}(an());function od(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var ad=function(at){we(vt,at);var Ct=od(vt);function vt(){var Ge;return ce(this,vt),(Ge=Ct.call(this))._style=Hr(V(269)),Ge.name="elements",Ge._tpl=V(6560),Ge._rmDefComputedStyle=!0,Ge._highlightElement=!1,Ge._selectElement=!1,Ge._observeElement=!0,Ge._computedStyleSearchKeyword="",Ge._history=[],an().mixin(ye(Ge)),Ge}return Ee(vt,[{key:"init",value:function(Ge,et){var yt=this;fi(Te(vt.prototype),"init",this).call(this,Ge),this._container=et,Ge.html('<div class="eruda-show-area"></div>'),this._$showArea=Ge.find(".eruda-show-area"),Ge.append(V(2407)()),this._htmlEl=document.documentElement,this._highlight=new Pu(this._container.$container),this._select=new Ou,this._bindEvent(),this._initObserver(),this._initCfg(),es()(function(){return yt._updateHistory()})}},{key:"show",value:function(){fi(Te(vt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this._curEl||this._setEl(this._htmlEl),this._render()}},{key:"hide",value:function(){return this._disableObserver(),fi(Te(vt.prototype),"hide",this).call(this)}},{key:"set",value:function(Ge){if(Ge!==this._curEl)return this._setEl(Ge),this.scrollToTop(),this._render(),this._updateHistory(),this.emit("change",Ge),this}},{key:"overrideEventTarget",value:function(){var Ge=ld(),et=this._origAddEvent=Ge.addEventListener,yt=this._origRmEvent=Ge.removeEventListener;Ge.addEventListener=function(jt,cn,Mn){_s(this,jt,cn,Mn),et.apply(this,arguments)},Ge.removeEventListener=function(jt,cn,Mn){al(this,jt,cn,Mn),yt.apply(this,arguments)}}},{key:"scrollToTop",value:function(){this._$showArea.get(0).scrollTop=0}},{key:"restoreEventTarget",value:function(){var Ge=ld();this._origAddEvent&&(Ge.addEventListener=this._origAddEvent),this._origRmEvent&&(Ge.removeEventListener=this._origRmEvent)}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),Hr.remove(this._style),this._select.disable(),this._highlight.destroy(),this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"_back",value:function(){if(this._curEl!==this._htmlEl){for(var Ge=this._curParentQueue,et=Ge.shift();!ds(et);)et=Ge.shift();this.set(et)}}},{key:"_bindEvent",value:function(){var Ge=this,et=this,yt=this._container,jt=this._select;this._$el.on("click",".eruda-child",function(){var cn=ze()(this).data("idx"),Mn=et._curEl,Un=Mn.childNodes[cn];if(Un&&Un.nodeType===3){var hr;switch(Mn.tagName){case"SCRIPT":hr="js";break;case"STYLE":hr="css";break;default:return}var ir=yt.get("sources");ir&&(ir.set(hr,Un.nodeValue),yt.showTool("sources"))}else ds(Un)?et.set(Un):et._render()}).on("click",".eruda-listener-content",function(){var cn=ze()(this).text(),Mn=yt.get("sources");Mn&&(Mn.set("js",cn),yt.showTool("sources"))}).on("click",".eruda-breadcrumb",function(){var cn=yt.get("sources");cn&&(cn.set("object",Ge._curEl),yt.showTool("sources"))}).on("click",".eruda-parent",function(){for(var cn=ze()(this).data("idx"),Mn=et._curEl.parentNode;cn--&&Mn.parentNode;)Mn=Mn.parentNode;ds(Mn)?et.set(Mn):et._render()}).on("click",".eruda-toggle-all-computed-style",function(){return Ge._toggleAllComputedStyle()}).on("click",".eruda-computed-style-search",function(){var cn=prompt("Filter");jo()(cn)||(cn=na()(cn),Ge._computedStyleSearchKeyword=cn,Ge._render())}),this._$el.find(".eruda-bottom-bar").on("click",".eruda-refresh",function(){Ge._render(),yt.notify("Refreshed")}).on("click",".eruda-highlight",function(){return Ge._toggleHighlight()}).on("click",".eruda-select",function(){return Ge._toggleSelect()}).on("click",".eruda-reset",function(){return Ge.set(Ge._htmlEl)}),jt.on("select",function(cn){return Ge.set(cn)})}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_enableObserver",value:function(){this._observer.observe(this._htmlEl,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_toggleHighlight",value:function(){this._selectElement||(this._$el.find(".eruda-highlight").toggleClass("eruda-active"),this._highlightElement=!this._highlightElement,this._render())}},{key:"_toggleSelect",value:function(){var Ge=this._select;this._$el.find(".eruda-select").toggleClass("eruda-active"),this._selectElement||this._highlightElement||this._toggleHighlight(),this._selectElement=!this._selectElement,this._selectElement?(Ge.enable(),this._container.hide()):Ge.disable()}},{key:"_setEl",value:function(Ge){this._curEl=Ge,this._curCssStore=new Kd(Ge),this._highlight.setEl(Ge),this._rmDefComputedStyle=!0;for(var et=[],yt=Ge.parentNode;yt;)et.push(yt),yt=yt.parentNode;this._curParentQueue=et}},{key:"_getData",value:function(){var Ge={},et=this._curEl,yt=this._curCssStore,jt=et.className,cn=et.id,Mn=et.attributes,Un=et.tagName;Ge.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Ge.parents=function(li){for(var Ei=[],Qi=0,Gi=li.parentNode;Gi&&Gi.nodeType===1;)Ei.push({text:ps(Gi,{noAttr:!0}),idx:Qi++}),Gi=Gi.parentNode;return Ei.reverse()}(et),Ge.children=function(li){for(var Ei=[],Qi=0,Gi=li.length;Qi<Gi;Qi++){var uo=li[Qi],ms=uo.nodeType;if(ms!==3&&ms!==8){var _d=!$o()(uo.className);ms===1&&uo.id!=="eruda"&&(_d||uo.className.indexOf("eruda")<0)&&Ei.push({text:ps(uo),isEl:!0,idx:Qi})}else{var md=uo.nodeValue.trim();md!==""&&Ei.push({text:md,isCmt:ms===8,idx:Qi})}}return Ei}(et.childNodes),Ge.attributes=ja(Mn),Ge.name=ps({tagName:Un,id:cn,className:jt,attributes:Mn});var hr=et.erudaEvents;if(hr&&Qo()(hr).length!==0&&(Ge.listeners=hr),fs(Un))return Ge;var ir=yt.getComputedStyle();function Mi(li){var Ei=["top","left","right","bottom"];return li!=="position"&&(Ei=Ia()(Ei,function(Qi){return"".concat(li,"-").concat(Qi)})),li==="border"&&(Ei=Ia()(Ei,function(Qi){return"".concat(Qi,"-width")})),{top:Wl(ir[Ei[0]],li),left:Wl(ir[Ei[1]],li),right:Wl(ir[Ei[2]],li),bottom:Wl(ir[Ei[3]],li)}}var Fi={margin:Mi("margin"),border:Mi("border"),padding:Mi("padding"),content:{width:Wl(ir.width),height:Wl(ir.height)}};ir.position!=="static"&&(Fi.position=Mi("position")),Ge.boxModel=Fi;var ko=yt.getMatchedCSSRules();ko.unshift(function(li){for(var Ei={selectorText:"element.style",style:{}},Qi=0,Gi=li.length;Qi<Gi;Qi++){var uo=li[Qi];Ei.style[uo]=li[uo]}return Ei}(et.style)),ko.forEach(function(li){return sd(li.style)}),Ge.styles=ko,this._rmDefComputedStyle&&(ir=function(li,Ei){var Qi={},Gi=["display","width","height"];return gn()(Ei,function(uo){Gi=Gi.concat(Qo()(uo.style))}),Gi=ra()(Gi),gn()(li,function(uo,ms){xi()(Gi,ms)&&(Qi[ms]=uo)}),Qi}(ir,ko)),Ge.rmDefComputedStyle=this._rmDefComputedStyle;var Wo=Vo()(Ge.computedStyleSearchKeyword);return Wo&&(ir=Oa()(ir,function(li,Ei){return xi()(Ei,Wo)||xi()(li,Wo)})),sd(ir),Ge.computedStyle=ir,Ge}},{key:"_render",value:function(){if(!ds(this._curEl))return this._back();this._highlight[this._highlightElement?"show":"hide"](),this._renderHtml(this._tpl(this._getData()))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$showArea.html(Ge))}},{key:"_updateHistory",value:function(){var Ge=this._container.get("console");if(Ge){var et=this._history;et.unshift(this._curEl),et.length>5&&et.pop();for(var yt=0;yt<5;yt++)Ge.setGlobal("$".concat(yt),et[yt])}}},{key:"_initObserver",value:function(){var Ge=this;this._observer=new(bn())(function(et){gn()(et,function(yt){return Ge._handleMutation(yt)})})}},{key:"_handleMutation",value:function(Ge){var et,yt;if(!Fa(Ge.target)){if(Ge.type==="attributes"){if(Ge.target!==this._curEl)return;this._render()}else if(Ge.type==="childList"){if(Ge.target===this._curEl)return this._render();var jt=Ge.addedNodes;for(et=0,yt=jt.length;et<yt;et++)if(jt[et].parentNode===this._curEl)return this._render();var cn=Ge.removedNodes;for(et=0,yt=cn.length;et<yt;et++)if(cn[et]===this._curEl)return this.set(this._htmlEl)}}}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"overrideEventTarget").remove(Ge,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var Ge=this,et=this.config=de.createCfg("elements",{overrideEventTarget:!0,observeElement:!0});et.get("overrideEventTarget")&&this.overrideEventTarget(),et.get("observeElement")&&(this._observeElement=!1),et.on("change",function(jt,cn){switch(jt){case"overrideEventTarget":return cn?Ge.overrideEventTarget():Ge.restoreEventTarget();case"observeElement":return Ge._observeElement=cn,cn?Ge._enableObserver():Ge._disableObserver()}});var yt=this._container.get("settings");yt&&(yt.text("Elements").switch(et,"overrideEventTarget","Catch Event Listeners"),this._observer&&yt.switch(et,"observeElement","Auto Refresh"),yt.separator())}}]),vt}(Hi);function sd(at){gn()(at,function(Ct,vt){return at[vt]=Ru(Ct)})}var Yd=/rgba?\((.*?)\)/g,Jd=/url\("?(.*?)"?\)/g;function Ru(at){return(at=ls()(at)).replace(Yd,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Jd,function(Ct,vt){return'url("'.concat(cd(vt),'")')})}var ds=function(at){return lo()(at)&&at.parentNode};function ps(at){var Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=Ct.noAttr,Ge=vt!==void 0&&vt,et=at.id,yt=at.className,jt=at.attributes,cn='<span class="eruda-tag-name-color">'.concat(at.tagName.toLowerCase(),"</span>");if(et!==""&&(cn+='<span class="eruda-function-color">#'.concat(et,"</span>")),$o()(yt)){var Mn="";gn()(yt.split(/\s+/g),function(Un){Un.trim()!==""&&(Mn+=".".concat(Un))}),cn+='<span class="eruda-attribute-name-color">'.concat(Mn,"</span>")}return Ge||gn()(jt,function(Un){var hr=Un.name;hr!=="id"&&hr!=="class"&&hr!=="style"&&(cn+=' <span class="eruda-attribute-name-color">'.concat(hr,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(Un.value,'</span><span class="eruda-operator-color">"</span>'))}),cn}var ja=function(at){return Ia()(at,function(Ct){var vt=Ct.value,Ge=Ct.name;return vt=Aa()(vt),(Ge==="src"||Ge==="href")&&!as()(vt,"data")&&(vt=cd(vt)),Ge==="style"&&(vt=Ru(vt)),{name:Ge,value:vt}})},aa=["script","style","meta","title","link","head"],fs=function(at){return aa.indexOf(at.toLowerCase())>-1};function _s(at,Ct,vt){var Ge=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(lo()(at)&&zs()(vt)&&Os()(Ge)){var et=at.erudaEvents=at.erudaEvents||{};et[Ct]=et[Ct]||[],et[Ct].push({listener:vt,listenerStr:vt.toString(),useCapture:Ge})}}function al(at,Ct,vt){var Ge=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(lo()(at)&&zs()(vt)&&Os()(Ge)){var et=at.erudaEvents;if(et&&et[Ct]){for(var yt=et[Ct],jt=0,cn=yt.length;jt<cn;jt++)if(yt[jt].listener===vt){yt.splice(jt,1);break}yt.length===0&&delete et[Ct],Qo()(et).length===0&&delete at.erudaEvents}}}var ld=function(){return co()(window,"EventTarget.prototype")||window.Node.prototype},cd=function(at){return'<a href="'.concat(at,'" target="_blank">').concat(at,"</a>")};function Wl(at,Ct){if(Uo()(at))return at;if(!$o()(at))return"\u2012";var vt=Mr(at);return yl()(vt)?at:Ct==="position"?vt:vt===0?"\u2012":vt}var zu=null,ud=[{name:"Border All",fn:function(){if(zu)return Hr.remove(zu),void(zu=null);zu=Hr("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var at=new(Kn());at.setQuery("timestamp",uu()()),window.location.replace(at.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){var at=prompt("Enter the text")||"";na()(at)!==""&&function(Ct){var vt=document.body,Ge=new RegExp(Ct,"ig");Zl(vt,function(et){var yt=ze()(et);if(yt.hasClass("eruda-search-highlight-block"))return document.createTextNode(yt.text())}),Zl(vt,function(et){if(et.nodeType===3){var yt=et.nodeValue;if((yt=yt.replace(Ge,function(cn){return'<span class="eruda-keyword">'.concat(cn,"</span>")}))!==et.nodeValue){var jt=ze()(document.createElement("div"));return jt.html(yt),jt.addClass("eruda-search-highlight-block"),jt.get(0)}}})}(at)},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var at=document.body;at.contentEditable=at.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var at=document.body,Ct=document.documentElement,vt=ze()(at);if(vt.data("scaled"))window.scrollTo(0,+vt.data("scaled")),vt.rmAttr("data-scaled"),vt.css("transform","none");else{var Ge=Math.max(at.scrollHeight,at.offsetHeight,Ct.clientHeight,Ct.scrollHeight,Ct.offsetHeight),et=Math.max(document.documentElement.clientHeight,window.innerHeight||0),yt=et/Ge;vt.css("transform","scale(".concat(yt,")")),vt.data("scaled",window.scrollY),window.scrollTo(0,Ge/2-et/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Fps Plugin",fn:function(){Vi("fps")},desc:"Display page fps"},{name:"Load Features Plugin",fn:function(){Vi("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){Vi("timing")},desc:"Show performance and resource timing"},{name:"Load Memory Plugin",fn:function(){Vi("memory")},desc:"Display memory"},{name:"Load Code Plugin",fn:function(){Vi("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){Vi("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){Vi("geolocation")},desc:"Test geolocation"},{name:"Load Dom Plugin",fn:function(){Vi("dom")},desc:"Navigate dom tree"},{name:"Load Orientation Plugin",fn:function(){Vi("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){Vi("touches")},desc:"Visualize screen touches"},{name:"Restore Settings",fn:function(){var at=To("local"),Ct=JSON.parse(JSON.stringify(at));gn()(Ct,function(vt,Ge){$o()(vt)&&as()(Ge,"eruda")&&at.removeItem(Ge)}),window.location.reload()},desc:"Restore defaults and reload"}];function Zl(at,Ct){var vt=at.childNodes;if(!Fa(at)){for(var Ge=0,et=vt.length;Ge<et;Ge++){var yt=Zl(vt[Ge],Ct);yt&&at.replaceChild(yt,vt[Ge])}return Ct(at)}}function Vi(at){var Ct="eruda"+cs()(at);if(!window[Ct]){var vt=location.protocol;as()(vt,"http")||(vt="http:"),kl()("".concat(vt,"//cdn.jsdelivr.net/npm/eruda-").concat(at,"@").concat(Qd[at]),function(Ge){if(!Ge||!window[Ct])return $i.error("Fail to load plugin "+at);si.emit(si.ADD,window[Ct]),si.emit(si.SHOW,at)})}}Hr(V(6068),document.head);var Qd={fps:"2.0.0",features:"2.0.0",timing:"2.0.1",memory:"2.0.0",code:"2.0.0",benchmark:"2.0.0",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"};function ep(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Bi=function(at){we(vt,at);var Ct=ep(vt);function vt(){var Ge;return ce(this,vt),(Ge=Ct.call(this))._style=Hr(V(8277)),Ge.name="snippets",Ge._snippets=[],Ge._tpl=V(1122),Ge}return Ee(vt,[{key:"init",value:function(Ge){fi(Te(vt.prototype),"init",this).call(this,Ge),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"add",value:function(Ge,et,yt){return this._snippets.push({name:Ge,fn:et,desc:yt}),this._render(),this}},{key:"remove",value:function(Ge){for(var et=this._snippets,yt=0,jt=et.length;yt<jt;yt++)et[yt].name===Ge&&et.splice(yt,1);return this._render(),this}},{key:"run",value:function(Ge){for(var et=this._snippets,yt=0,jt=et.length;yt<jt;yt++)et[yt].name===Ge&&this._run(yt);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var Ge=this;this._$el.on("click",".eruda-run",function(){var et=ze()(this).data("idx");Ge._run(et)})}},{key:"_run",value:function(Ge){this._snippets[Ge].fn.call(null)}},{key:"_addDefSnippets",value:function(){var Ge=this;gn()(ud,function(et){Ge.add(et.name,et.fn,et.desc)})}},{key:"_render",value:function(){this._renderHtml(this._tpl({snippets:this._snippets}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}}]),vt}(Hi);function kr(at,Ct){var vt=typeof Symbol!="undefined"&&at[Symbol.iterator]||at["@@iterator"];if(!vt){if(Array.isArray(at)||(vt=function(Mn,Un){if(!!Mn){if(typeof Mn=="string")return Ua(Mn,Un);var hr=Object.prototype.toString.call(Mn).slice(8,-1);if(hr==="Object"&&Mn.constructor&&(hr=Mn.constructor.name),hr==="Map"||hr==="Set")return Array.from(Mn);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return Ua(Mn,Un)}}(at))||Ct&&at&&typeof at.length=="number"){vt&&(at=vt);var Ge=0,et=function(){};return{s:et,n:function(){return Ge>=at.length?{done:!0}:{done:!1,value:at[Ge++]}},e:function(Mn){throw Mn},f:et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yt,jt=!0,cn=!1;return{s:function(){vt=vt.call(at)},n:function(){var Mn=vt.next();return jt=Mn.done,Mn},e:function(Mn){cn=!0,yt=Mn},f:function(){try{jt||vt.return==null||vt.return()}finally{if(cn)throw yt}}}}function Ua(at,Ct){(Ct==null||Ct>at.length)&&(Ct=at.length);for(var vt=0,Ge=new Array(Ct);vt<Ct;vt++)Ge[vt]=at[vt];return Ge}function mh(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var ti=function(at){we(vt,at);var Ct=mh(vt);function vt(){var Ge;return ce(this,vt),(Ge=Ct.call(this))._style=Hr(V(8070)),Ge.name="resources",Ge._localStoreData=[],Ge._localStoreSearchKeyword="",Ge._hideErudaSetting=!1,Ge._sessionStoreData=[],Ge._sessionStoreSearchKeyword="",Ge._cookieData=[],Ge._cookieSearchKeyword="",Ge._scriptData=[],Ge._stylesheetData=[],Ge._iframeData=[],Ge._imageData=[],Ge._observeElement=!0,Ge._tpl=V(2875),Ge}return Ee(vt,[{key:"init",value:function(Ge,et){fi(Te(vt.prototype),"init",this).call(this,Ge),this._container=et,this.refresh(),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()._render()}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),this._disableObserver(),Hr.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var Ge=[];return ze()("script").each(function(){var et=this.src;et!==""&&Ge.push(et)}),Ge=ra()(Ge),this._scriptData=Ge,this}},{key:"refreshStylesheet",value:function(){var Ge=[];return ze()("link").each(function(){this.rel==="stylesheet"&&Ge.push(this.href)}),Ge=ra()(Ge),this._stylesheetData=Ge,this}},{key:"refreshIframe",value:function(){var Ge=[];return ze()("iframe").each(function(){var et=ze()(this).attr("src");et&&Ge.push(et)}),Ge=ra()(Ge),this._iframeData=Ge,this}},{key:"refreshLocalStorage",value:function(){return this._refreshStorage("local"),this}},{key:"refreshSessionStorage",value:function(){return this._refreshStorage("session"),this}},{key:"_refreshStorage",value:function(Ge){var et=this,yt=To(Ge,!1);if(yt){var jt=[];yt=JSON.parse(JSON.stringify(yt)),gn()(yt,function(cn,Mn){$o()(cn)&&(et._hideErudaSetting&&(as()(Mn,"eruda")||Mn==="active-eruda")||jt.push({key:Mn,val:gh(cn,200)}))}),this["_"+Ge+"StoreData"]=jt}}},{key:"refreshCookie",value:function(){var Ge=Ao.domain("Network").getCookies().cookies,et=Ia()(Ge,function(yt){return{key:yt.name,val:yt.value}});return this._cookieData=et,this}},{key:"refreshImage",value:function(){var Ge=[],et=this._performance=window.webkitPerformance||window.performance;return et&&et.getEntries?this._performance.getEntries().forEach(function(yt){(yt.initiatorType==="img"||Va(yt.name))&&Ge.push(yt.name)}):ze()("img").each(function(){var yt=ze()(this),jt=yt.attr("src");yt.data("exclude")!=="true"&&Ge.push(jt)}),(Ge=ra()(Ge)).sort(),this._imageData=Ge,this}},{key:"show",value:function(){return fi(Te(vt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),fi(Te(vt.prototype),"hide",this).call(this)}},{key:"_bindEvent",value:function(){var Ge=this,et=this,yt=this._$el,jt=this._container;function cn(Un,hr){var ir=jt.get("sources");if(ir)return ir.set(Un,hr),jt.showTool("sources"),!0}function Mn(Un){return function(hr){if(jt.get("sources")){hr.preventDefault();var ir=ze()(this).attr("href");Un!=="iframe"&&bo()(location.href,ir)?un()({url:ir,success:function(Mi){cn(Un,Mi)},dataType:"raw"}):cn("iframe",ir)}}}yt.on("click",".eruda-refresh-local-storage",function(){jt.notify("Refreshed"),Ge.refreshLocalStorage()._render()}).on("click",".eruda-refresh-session-storage",function(){jt.notify("Refreshed"),Ge.refreshSessionStorage()._render()}).on("click",".eruda-refresh-cookie",function(){jt.notify("Refreshed"),Ge.refreshCookie()._render()}).on("click",".eruda-refresh-script",function(){jt.notify("Refreshed"),Ge.refreshScript()._render()}).on("click",".eruda-refresh-stylesheet",function(){jt.notify("Refreshed"),Ge.refreshStylesheet()._render()}).on("click",".eruda-refresh-iframe",function(){jt.notify("Refreshed"),Ge.refreshIframe()._render()}).on("click",".eruda-refresh-image",function(){jt.notify("Refreshed"),Ge.refreshImage()._render()}).on("click",".eruda-search",function(){var Un=ze()(this).data("type"),hr=prompt("Filter");if(!jo()(hr)){switch(hr=na()(hr),Un){case"local":et._localStoreSearchKeyword=hr;break;case"session":et._sessionStoreSearchKeyword=hr;break;case"cookie":et._cookieSearchKeyword=hr}et._render()}}).on("click",".eruda-delete-storage",function(){var Un=ze()(this),hr=Un.data("key");Un.data("type")==="local"?(localStorage.removeItem(hr),et.refreshLocalStorage()._render()):(sessionStorage.removeItem(hr),et.refreshSessionStorage()._render())}).on("click",".eruda-delete-cookie",function(){var Un=ze()(this).data("key");Ao.domain("Network").deleteCookies({name:Un}),et.refreshCookie()._render()}).on("click",".eruda-clear-storage",function(){ze()(this).data("type")==="local"?(gn()(et._localStoreData,function(Un){return localStorage.removeItem(Un.key)}),et.refreshLocalStorage()._render()):(gn()(et._sessionStoreData,function(Un){return sessionStorage.removeItem(Un.key)}),et.refreshSessionStorage()._render())}).on("click",".eruda-clear-cookie",function(){Ao.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),Ge.refreshCookie()._render()}).on("click",".eruda-storage-val",function(){var Un=ze()(this),hr=Un.data("key"),ir=Un.data("type")==="local"?localStorage.getItem(hr):sessionStorage.getItem(hr);try{cn("object",JSON.parse(ir))}catch{cn("raw",ir)}}).on("click",".eruda-img-link",function(){cn("img",ze()(this).attr("src"))}).on("click",".eruda-css-link",Mn("css")).on("click",".eruda-js-link",Mn("js")).on("click",".eruda-iframe-link",Mn("iframe")),js().on("change",function(){return Ge._render()})}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"hideErudaSetting").remove(Ge,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var Ge=this,et=this.config=de.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});et.get("hideErudaSetting")&&(this._hideErudaSetting=!0),et.get("observeElement")||(this._observeElement=!1),et.on("change",function(yt,jt){switch(yt){case"hideErudaSetting":return void(Ge._hideErudaSetting=jt);case"observeElement":return Ge._observeElement=jt,jt?Ge._enableObserver():Ge._disableObserver()}}),this._container.get("settings").text("Resources").switch(et,"hideErudaSetting","Hide Eruda Setting").switch(et,"observeElement","Auto Refresh Elements").separator()}},{key:"_render",value:function(){var Ge=this._cookieData,et=this._scriptData,yt=this._stylesheetData,jt=this._imageData,cn=this._localStoreSearchKeyword,Mn=this._sessionStoreSearchKeyword,Un=this._cookieSearchKeyword;function hr(ir,Mi){return(Mi=Vo()(Mi))?ha()(ir,function(Fi){var ko=Fi.key,Wo=Fi.val;return xi()(Vo()(ko),Mi)||xi()(Vo()(Wo),Mi)}):ir}this._renderHtml(this._tpl({localStoreData:hr(this._localStoreData,cn),localStoreSearchKeyword:cn,sessionStoreData:hr(this._sessionStoreData,Mn),sessionStoreSearchKeyword:Mn,cookieData:hr(Ge,Un),cookieSearchKeyword:Un,cookieState:Vc("cookie",Ge.length),scriptData:et,scriptState:Vc("script",et.length),stylesheetData:yt,stylesheetState:Vc("stylesheet",yt.length),iframeData:this._iframeData,imageData:jt,imageState:Vc("image",jt.length)}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}},{key:"_initObserver",value:function(){var Ge=this;this._observer=new(bn())(function(et){var yt=!1;gn()(et,function(jt){Ge._handleMutation(jt)&&(yt=!0)}),yt&&Ge._render()})}},{key:"_handleMutation",value:function(Ge){var et=this;if(!Fa(Ge.target)){var yt=function(Un){var hr=function(ir){return ir.tagName?ir.tagName.toLowerCase():""}(Un);switch(hr){case"script":return et.refreshScript(),!0;case"img":return et.refreshImage(),!0;case"link":return et.refreshStylesheet(),!0}return!1};if(Ge.type==="attributes"){if(yt(Ge.target))return!0}else if(Ge.type==="childList"){if(yt(Ge.target))return!0;var jt,cn=Qs()(Ge.addedNodes),Mn=kr(cn=No()(cn,Qs()(Ge.removedNodes)));try{for(Mn.s();!(jt=Mn.n()).done;)if(yt(jt.value))return!0}catch(Un){Mn.e(Un)}finally{Mn.f()}}return!1}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),vt}(Hi);function Vc(at,Ct){if(Ct===0)return"";var vt=0,Ge=0;switch(at){case"cookie":vt=30,Ge=60;break;case"script":vt=5,Ge=10;break;case"stylesheet":vt=4,Ge=8;break;case"image":vt=50,Ge=100}return Ct>=Ge?"danger":Ct>=vt?"warn":"ok"}var gh=function(at,Ct){return at.length<Ct?at:at.slice(0,Ct)+"..."},xa=/\.(jpeg|jpg|gif|png)$/,Va=function(at){return xa.test(at)},Lo=Tr()(),Ho=[{name:"Location",val:function(){return Aa()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(ei()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(Lo.name+" "+Lo.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://github.com/liriliri/eruda" target="_blank">Eruda v2.6.1</a>'}];function Ji(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var hd=function(at){we(vt,at);var Ct=Ji(vt);function vt(){var Ge;return ce(this,vt),(Ge=Ct.call(this))._style=Hr(V(9577)),Ge.name="info",Ge._tpl=V(2861),Ge._infos=[],Ge}return Ee(vt,[{key:"init",value:function(Ge){fi(Te(vt.prototype),"init",this).call(this,Ge),this._addDefInfo()}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"add",value:function(Ge,et){var yt=this._infos,jt=!1;return gn()(yt,function(cn){Ge===cn.name&&(cn.val=et,jt=!0)}),jt||yt.push({name:Ge,val:et}),this._render(),this}},{key:"get",value:function(Ge){var et,yt=this._infos;return El()(Ge)?Ai()(yt):(gn()(yt,function(jt){Ge===jt.name&&(et=jt.val)}),et)}},{key:"remove",value:function(Ge){for(var et=this._infos,yt=et.length-1;yt>=0;yt--)et[yt].name===Ge&&et.splice(yt,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var Ge=this;gn()(Ho,function(et){return Ge.add(et.name,et.val)})}},{key:"_render",value:function(){var Ge=[];gn()(this._infos,function(et){var yt=et.name,jt=et.val;zs()(jt)&&(jt=jt()),Ge.push({name:yt,val:jt})}),this._renderHtml(this._tpl({infos:Ge}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}}]),vt}(Hi),ba=V(4030),dd=V.n(ba);function Xl(at){var Ct=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Te(at);if(Ct){var et=Te(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var $u,pd=function(at){we(vt,at);var Ct=Xl(vt);function vt(){var Ge;return ce(this,vt),(Ge=Ct.call(this))._style=Hr(V(4214)),Ge.name="sources",Ge._showLineNum=!0,Ge._formatCode=!0,Ge._indentSize=4,Ge._loadTpl(),Ge}return Ee(vt,[{key:"init",value:function(Ge,et){fi(Te(vt.prototype),"init",this).call(this,Ge),this._container=et,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){fi(Te(vt.prototype),"destroy",this).call(this),Hr.remove(this._style),this._rmCfg()}},{key:"set",value:function(Ge,et){if(Ge==="img"){this._isFetchingData=!0;var yt=new Image,jt=this;return yt.onload=function(){jt._isFetchingData=!1,jt._data={type:"img",val:{width:this.width,height:this.height,src:et}},jt._render()},yt.onerror=function(){jt._isFetchingData=!1},void(yt.src=et)}return this._data={type:Ge,val:et},this._render(),this}},{key:"show",value:function(){return fi(Te(vt.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var Ge=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,un()({url:location.href,success:function(et){return Ge._html=et},error:function(){return Ge._html="Sorry, unable to fetch source code:("},complete:function(){Ge._isGettingHtml=!1,Ge._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var Ge=this;this._container.on("showTool",function(et,yt){et!==Ge.name&&yt.name===Ge.name&&delete Ge._data})}},{key:"_loadTpl",value:function(){this._codeTpl=V(431),this._imgTpl=V(2229),this._objTpl=V(2944),this._rawTpl=V(8191),this._iframeTpl=V(6680)}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"showLineNum").remove(Ge,"formatCode").remove(Ge,"indentSize").remove("Sources")}},{key:"_initCfg",value:function(){var Ge=this,et=this.config=de.createCfg("sources",{showLineNum:!0,formatCode:!0,indentSize:4});et.get("showLineNum")||(this._showLineNum=!1),et.get("formatCode")||(this._formatCode=!1),this._indentSize=et.get("indentSize"),et.on("change",function(yt,jt){switch(yt){case"showLineNum":return void(Ge._showLineNum=jt);case"formatCode":return void(Ge._formatCode=jt);case"indentSize":return void(Ge._indentSize=+jt)}}),this._container.get("settings").text("Sources").switch(et,"showLineNum","Show Line Numbers").switch(et,"formatCode","Beautify Code").select(et,"indentSize","Indent Size",["2","4"]).separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){this._renderHtml(this._imgTpl(this._data.val))}},{key:"_renderCode",value:function(){var Ge=this._data,et=this._indentSize,yt=Ge.val,jt=Ge.val.length;if(jt<yh&&this._formatCode){switch(Ge.type){case"html":yt=Hl().html(yt,{unformatted:[],indent_size:et});break;case"css":yt=Hl().css(yt,{indent_size:et});break;case"js":yt=Hl()(yt,{indent_size:et})}var cn=Hr.getCurTheme();yt=Xi()(yt,Ge.type,{keyword:"color:".concat(cn.keywordColor),number:"color:".concat(cn.numberColor),operator:"color:".concat(cn.operatorColor),comment:"color:".concat(cn.commentColor),string:"color:".concat(cn.stringColor)})}else yt=Aa()(yt);jt<fd&&this._showLineNum&&(yt=yt.split(`
`).map(function(Mn,Un){return na()(Mn)===""&&(Mn="&nbsp;"),{idx:Un+1,val:Mn}})),this._renderHtml(this._codeTpl({code:yt,showLineNum:jt<fd&&this._showLineNum}))}},{key:"_renderObj",value:function(){this._renderHtml(this._objTpl(),!1);var Ge=this._data.val;try{$o()(Ge)&&(Ge=JSON.parse(Ge))}catch{}new(dd())(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(Ge)}},{key:"_renderRaw",value:function(){this._renderHtml(this._rawTpl({val:this._data.val}))}},{key:"_renderIframe",value:function(){this._renderHtml(this._iframeTpl({src:this._data.val}))}},{key:"_renderHtml",value:function(Ge){var et=this,yt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];yt&&Ge===this._lastHtml||(this._lastHtml=Ge,this._$el.html(Ge),setTimeout(function(){return et._$el.get(0).scrollTop=0},0))}}]),vt}(Hi),yh=1e5,fd=4e5,vh={init:function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ct=at.container,vt=at.tool,Ge=at.autoScale,et=Ge===void 0||Ge,yt=at.useShadowDom,jt=yt===void 0||yt,cn=at.defaults,Mn=cn===void 0?{}:cn;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(Ct,jt),this._initStyle(),this._initDevTools(Mn),this._initEntryBtn(),this._initSettings(),this._initTools(vt),this._registerListener(),et&&this._autoScale())},_isInit:!1,version:"2.6.1",util:_e,chobitsu:Ao,Tool:Hi,Console:Ba,Elements:ad,Network:ed,Sources:pd,Resources:ti,Info:hd,Snippets:Bi,Settings:de,get:function(at){if(this._checkInit()){if(at==="entryBtn")return this._entryBtn;var Ct=this._devTools;return at?Ct.get(at):Ct}},add:function(at){if(this._checkInit())return zs()(at)&&(at=at(this)),this._devTools.add(at),this},remove:function(at){return this._devTools.remove(at),this},show:function(at){if(this._checkInit()){var Ct=this._devTools;return at?Ct.showTool(at):Ct.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),this._$el.remove(),Hr.clear(),this._isInit=!1},scale:function(at){return Uo()(at)?(this._scale=at,si.emit(si.SCALE,at),this):this._scale},position:function(at){var Ct=this._entryBtn;return Ds()(at)?(Ct.setPos(at),this):Ct.getPos()},_autoScale:function(){Ca()()&&this.scale(1/Oc()())},_registerListener:function(){var at=this;this._addListener=function(){return at.add.apply(at,arguments)},this._showListener=function(){return at.show.apply(at,arguments)},si.on(si.ADD,this._addListener),si.on(si.SHOW,this._showListener),si.on(si.SCALE,Hr.setScale)},_unregisterListener:function(){si.off(si.ADD,this._addListener),si.off(si.SHOW,this._showListener),si.off(si.SCALE,Hr.setScale)},_checkInit:function(){return this._isInit||$i.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(at,Ct){var vt;at||(at=document.createElement("div"),document.documentElement.appendChild(at),at.style.all="initial"),Ct&&(at.attachShadow?vt=at.attachShadow({mode:"open"}):at.createShadowRoot&&(vt=at.createShadowRoot()),vt&&(Hr.container=document.head,Hr(V(8998)+V(276)+V(8418)+V(5141)),at=document.createElement("div"),vt.appendChild(at),this._shadowRoot=vt)),Object.assign(at,{id:"eruda",className:"eruda-container",contentEditable:!1}),Tr()().name==="ios"&&at.setAttribute("ontouchstart",""),this._$el=ze()(at)},_initDevTools:function(at){this._devTools=new to(this._$el,{defaults:at})},_initStyle:function(){var at="eruda-style-container",Ct=this._$el;this._shadowRoot?(Hr.container=this._shadowRoot,Hr(":host { all: initial }")):(Ct.append('<div class="'.concat(at,'"></div>')),Hr.container=Ct.find(".".concat(at)).get(0)),Hr(V(3146)+V(8418)+V(276)+V(5674)+V(2456)+V(5141)+V(6802)+V(8998))},_initEntryBtn:function(){var at=this;this._entryBtn=new _i(this._$el),this._entryBtn.on("click",function(){return at._devTools.toggle()})},_initSettings:function(){var at=this._devTools,Ct=new de;at.add(Ct),this._entryBtn.initCfg(Ct),at.initCfg(Ct)},_initTools:function(){var at=this,Ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];Ct=Qs()(Ct);var vt=this._devTools;Ct.forEach(function(Ge){var et=at[cs()(Ge)];try{et&&vt.add(new et)}catch(yt){es()(function(){$i.error("Something wrong when initializing tool ".concat(Ge,":"),yt.message)})}}),vt.showTool(Ct[0]||"settings")}};$u=_e,Object.assign($u,{beautify:Hl(),evalCss:Hr,isErudaEl:Fa})},2234:function(q){q.exports={background:"b","background-image":"bi",border:"bo","border-bottom":"bb","border-collapse":"bc","border-left-color":"blc","border-right":"br","border-radius":"bra","border-top":"bt","border-top-color":"btc","box-shadow":"bs","box-sizing":"bsi",clear:"cl",color:"c",content:"co",cursor:"cu",display:"d",flex:"fl","flex-shrink":"fsh",float:"f","font-family":"ff","font-size":"fs","font-weight":"fw",height:"h",left:"l","line-height":"lh",margin:"m","margin-bottom":"mb","margin-left":"ml","margin-top":"mt","min-height":"mh",outline:"ou",overflow:"o","overflow-x":"ox","overflow-y":"oy",padding:"p","padding-bottom":"pb","padding-left":"pl","padding-top":"pt","pointer-events":"pe",position:"po","text-align":"ta","text-transform":"tt",top:"t",transition:"tr","user-select":"us","vertical-aligin":"va",visibility:"v",width:"w","will-change":"wc","white-space":"ws","-webkit-overflow-scrolling":"wos","z-index":"z"}},9871:function(q,Q,V){var _e=V(6834);_e.registerHelper("repeat",function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ne=arguments.length>1?arguments[1]:void 0;if(ce<1)return ne.inverse(this);var Ee=1,j=0,we=ce*Ee+j,he=j,ye="";do{var xe={index:he,count:ce,start:j,step:Ee,first:he===j,last:he>=we-Ee},Te=[he,xe];ye+=ne.fn(this,{data:xe,blockParams:Te}),he+=xe.step}while(he<we);return ye}),_e.registerHelper("class",function(ce){var ne=ce.split(/\s+/);return ne=ne.map(function(Ee){return"eruda-".concat(Ee)}),'class="'.concat(ne.join(" "),'"')}),_e.registerHelper("concat",function(){for(var ce="",ne=0,Ee=arguments.length;ne<Ee;ne++){var j=arguments[ne];typeof j=="string"&&(ce+=j)}return ce}),q.exports=_e},9143:function(q,Q,V){var _e=this&&this.__awaiter||function(Se,Ce,Oe,ze){return new(Oe||(Oe=Promise))(function(Ue,De){function Fe(He){try{Ke(ze.next(He))}catch(Qe){De(Qe)}}function Xe(He){try{Ke(ze.throw(He))}catch(Qe){De(Qe)}}function Ke(He){var Qe;He.done?Ue(He.value):(Qe=He.value,Qe instanceof Oe?Qe:new Oe(function(pt){pt(Qe)})).then(Fe,Xe)}Ke((ze=ze.apply(Se,Ce||[])).next())})},ce=this&&this.__generator||function(Se,Ce){var Oe,ze,Ue,De,Fe={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return De={next:Xe(0),throw:Xe(1),return:Xe(2)},typeof Symbol=="function"&&(De[Symbol.iterator]=function(){return this}),De;function Xe(Ke){return function(He){return function(Qe){if(Oe)throw new TypeError("Generator is already executing.");for(;Fe;)try{if(Oe=1,ze&&(Ue=2&Qe[0]?ze.return:Qe[0]?ze.throw||((Ue=ze.return)&&Ue.call(ze),0):ze.next)&&!(Ue=Ue.call(ze,Qe[1])).done)return Ue;switch(ze=0,Ue&&(Qe=[2&Qe[0],Ue.value]),Qe[0]){case 0:case 1:Ue=Qe;break;case 4:return Fe.label++,{value:Qe[1],done:!1};case 5:Fe.label++,ze=Qe[1],Qe=[0];continue;case 7:Qe=Fe.ops.pop(),Fe.trys.pop();continue;default:if(Ue=Fe.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||Qe[0]!==6&&Qe[0]!==2)){Fe=0;continue}if(Qe[0]===3&&(!Ue||Qe[1]>Ue[0]&&Qe[1]<Ue[3])){Fe.label=Qe[1];break}if(Qe[0]===6&&Fe.label<Ue[1]){Fe.label=Ue[1],Ue=Qe;break}if(Ue&&Fe.label<Ue[2]){Fe.label=Ue[2],Fe.ops.push(Qe);break}Ue[2]&&Fe.ops.pop(),Fe.trys.pop();continue}Qe=Ce.call(Se,Fe)}catch(pt){Qe=[6,pt],ze=0}finally{Oe=Ue=0}if(5&Qe[0])throw Qe[1];return{value:Qe[0]?Qe[1]:void 0,done:!0}}([Ke,He])}}},ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(3276)),j=ne(V(1214)),we=ne(V(5936)),he=ne(V(3783)),ye=ne(V(1443)),xe=V(316),Te=function(){function Se(){var Ce=this;this.resolves=new Map,this.domains=new Map,this.onMessage=j.default,Ee.default.on("message",function(Oe){var ze=JSON.parse(Oe),Ue=Ce.resolves.get(ze.id);if(Ue&&Ue(ze.result),!ze.id){var De=ze.method.split("."),Fe=De[0],Xe=De[1],Ke=Ce.domains.get(Fe);Ke&&Ke.emit(Xe,ze.params)}Ce.onMessage(Oe)})}return Se.prototype.domain=function(Ce){return this.domains.get(Ce)},Se.prototype.setOnMessage=function(Ce){this.onMessage=Ce},Se.prototype.sendMessage=function(Ce,Oe){var ze=this;Oe===void 0&&(Oe={});var Ue=we.default();return this.sendRawMessage(JSON.stringify({id:Ue,method:Ce,params:Oe})),new Promise(function(De){ze.resolves.set(Ue,De)})},Se.prototype.sendRawMessage=function(Ce){return _e(this,void 0,void 0,function(){var Oe,ze,Ue,De,Fe,Xe,Ke;return ce(this,function(He){switch(He.label){case 0:Oe=JSON.parse(Ce),ze=Oe.method,Ue=Oe.params,De=Oe.id,Fe={id:De},He.label=1;case 1:return He.trys.push([1,3,,4]),Xe=Fe,[4,this.callMethod(ze,Ue)];case 2:return Xe.result=He.sent(),[3,4];case 3:return(Ke=He.sent())instanceof xe.ErrorWithCode?Fe.error={message:Ke.message,code:Ke.code}:Ke instanceof Error&&(Fe.error={message:Ke.message}),[3,4];case 4:return Ee.default.emit("message",JSON.stringify(Fe)),[2]}})})},Se.prototype.register=function(Ce,Oe){var ze=this.domains,Ue=ze.get(Ce);Ue||(Ue={},ye.default.mixin(Ue)),he.default(Oe,function(De,Fe){Ue[Fe]=De}),ze.set(Ce,Ue)},Se.prototype.callMethod=function(Ce,Oe){return _e(this,void 0,void 0,function(){var ze,Ue,De,Fe;return ce(this,function(Xe){if(ze=Ce.split("."),Ue=ze[0],De=ze[1],(Fe=this.domain(Ue))&&Fe[De])return[2,Fe[De](Oe)||{}];throw Error(Ce+" unimplemented")})})},Se}();Q.default=Te},7935:function(q,Q,V){var _e=this&&this.__createBinding||(Object.create?function(it,dt,lt,ft){ft===void 0&&(ft=lt),Object.defineProperty(it,ft,{enumerable:!0,get:function(){return dt[lt]}})}:function(it,dt,lt,ft){ft===void 0&&(ft=lt),it[ft]=dt[lt]}),ce=this&&this.__setModuleDefault||(Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt}),ne=this&&this.__importStar||function(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var lt in it)lt!=="default"&&Object.hasOwnProperty.call(it,lt)&&_e(dt,it,lt);return ce(dt,it),dt},Ee=this&&this.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getDOMNodeId=Q.setOuterHTML=Q.setNodeValue=Q.setInspectedNode=Q.setAttributeValue=Q.setAttributesAsText=Q.resolveNode=Q.requestNode=Q.requestChildNodes=Q.removeNode=Q.pushNodesByBackendIdsToFrontend=Q.discardSearchResults=Q.pushNodesToFrontend=Q.getSearchResults=Q.performSearch=Q.moveTo=Q.getOuterHTML=Q.getDocument=Q.enable=Q.copyTo=Q.collectClassNamesFromSubtree=void 0;var j=Ee(V(3276)),we=ne(V(2049)),he=V(2049),ye=ne(V(7923)),xe=Ee(V(6126)),Te=Ee(V(1512)),Se=Ee(V(6156)),Ce=Ee(V(8887)),Oe=Ee(V(7483)),ze=Ee(V(2461)),Ue=Ee(V(42)),De=Ee(V(6341)),Fe=Ee(V(3063)),Xe=Ee(V(3783)),Ke=Ee(V(1352)),He=Ee(V(8933)),Qe=Ee(V(8099)),pt=V(5286),Mt=V(316);Q.collectClassNamesFromSubtree=function(it){var dt=he.getNode(it.nodeId),lt=[];return nt(dt,function(ft){if(ft.nodeType===1){var xt=ft.getAttribute("class");if(xt)for(var ht=0,Vt=xt.split(/\s+/);ht<Vt.length;ht++){var st=Vt[ht];lt.push(st)}}}),{classNames:Ue.default(lt)}},Q.copyTo=function(it){var dt=it.nodeId,lt=it.targetNodeId,ft=he.getNode(dt),xt=he.getNode(lt),ht=ft.cloneNode(!0);xt.appendChild(ht)},Q.enable=function(){xe.default.observe(),we.clear()},Q.getDocument=function(){return{root:we.wrap(document,{depth:2})}},Q.getOuterHTML=function(it){return{outerHTML:he.getNode(it.nodeId).outerHTML}},Q.moveTo=function(it){var dt=it.nodeId,lt=it.targetNodeId,ft=he.getNode(dt);he.getNode(lt).appendChild(ft)};var wt=new Map;function bt(it){for(var dt=[it],lt=it.parentNode;lt&&(dt.push(lt),!(xt=he.getNodeId(lt)));)lt=lt.parentNode;for(;dt.length;){var ft=dt.pop(),xt=he.getNodeId(ft);j.default.trigger("DOM.setChildNodes",{parentId:xt,nodes:we.getChildNodes(ft,1)})}return he.getNodeId(it)}Q.performSearch=function(it){var dt=Fe.default(it.query),lt=[];try{lt=Qe.default(lt,Ke.default(document.querySelectorAll(dt)))}catch{}try{lt=Qe.default(lt,He.default(dt))}catch{}nt(document,function(xt){var ht=xt.nodeType;if(ht===1){var Vt=xt.localName;if(De.default("<"+Vt+" ",dt)||De.default("</"+Vt+">",dt))return void lt.push(xt);var st=[];Xe.default(xt.attributes,function(In){var on=In.name,an=In.value;return st.push(on,an)});for(var Dt=0,ln=st.length;Dt<ln;Dt++)if(De.default(Fe.default(st[Dt]),dt)){lt.push(xt);break}}else ht===3&&De.default(Fe.default(xt.nodeValue),dt)&&lt.push(xt)});var ft=Mt.createId();return wt.set(ft,lt),{searchId:ft,resultCount:lt.length}},Q.getSearchResults=function(it){var dt=it.searchId,lt=it.fromIndex,ft=it.toIndex,xt=wt.get(dt).slice(lt,ft);return{nodeIds:ze.default(xt,function(ht){var Vt=he.getNodeId(ht);return Vt||bt(ht)})}},Q.pushNodesToFrontend=bt,Q.discardSearchResults=function(it){wt.delete(it.searchId)},Q.pushNodesByBackendIdsToFrontend=function(it){return{nodeIds:it.backendNodeIds}},Q.removeNode=function(it){var dt=he.getNode(it.nodeId);Te.default(dt).remove()},Q.requestChildNodes=function(it){var dt=it.nodeId,lt=it.depth,ft=lt===void 0?1:lt,xt=he.getNode(dt);j.default.trigger("DOM.setChildNodes",{parentId:dt,nodes:we.getChildNodes(xt,ft)})},Q.requestNode=function(it){var dt=ye.getObj(it.objectId);return{nodeId:he.getNodeId(dt)}},Q.resolveNode=function(it){var dt=he.getNode(it.nodeId);return{object:ye.wrap(dt)}},Q.setAttributesAsText=function(it){var dt,lt=it.name,ft=it.text,xt=it.nodeId,ht=he.getNode(xt);lt&&ht.removeAttribute(lt),Te.default(ht).attr((dt="<div "+(dt=ft)+"></div>",Oe.default.parse(dt)[0].attrs))},Q.setAttributeValue=function(it){var dt=it.nodeId,lt=it.name,ft=it.value;he.getNode(dt).setAttribute(lt,ft)};var rt=[];function nt(it,dt){for(var lt=we.filterNodes(it.childNodes),ft=0,xt=lt.length;ft<xt;ft++){var ht=lt[ft];dt(ht),nt(ht,dt)}}Q.setInspectedNode=function(it){var dt=he.getNode(it.nodeId);rt.unshift(dt),rt.length>5&&rt.pop();for(var lt=0;lt<5;lt++)pt.setGlobal("$"+lt,rt[lt])},Q.setNodeValue=function(it){var dt=it.nodeId,lt=it.value;he.getNode(dt).nodeValue=lt},Q.setOuterHTML=function(it){var dt=it.nodeId,lt=it.outerHTML;he.getNode(dt).outerHTML=lt},Q.getDOMNodeId=function(it){var dt=it.node;return{nodeId:we.getOrCreateNodeId(dt)}},xe.default.on("attributes",function(it,dt){var lt=he.getNodeId(it);if(lt){var ft=it.getAttribute(dt);Se.default(ft)?j.default.trigger("DOM.attributeRemoved",{nodeId:lt,name:dt}):j.default.trigger("DOM.attributeModified",{nodeId:lt,name:dt,value:ft})}}),xe.default.on("childList",function(it,dt,lt){var ft=he.getNodeId(it);if(ft){if(dt=we.filterNodes(dt),lt=we.filterNodes(lt),!Ce.default(dt)){In();for(var xt=0,ht=dt.length;xt<ht;xt++){var Vt=dt[xt],st=we.getPreviousNode(Vt),Dt=st?he.getNodeId(st):0,ln={node:we.wrap(Vt,{depth:0}),parentNodeId:ft,previousNodeId:Dt};j.default.trigger("DOM.childNodeInserted",ln)}}if(!Ce.default(lt))for(xt=0,ht=lt.length;xt<ht;xt++){if(Vt=lt[xt],!he.getNodeId(Vt)){In();break}j.default.trigger("DOM.childNodeRemoved",{nodeId:he.getNodeId(Vt),parentNodeId:ft})}}function In(){j.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:we.wrap(it,{depth:0}).childNodeCount,nodeId:ft})}}),xe.default.on("characterData",function(it){var dt=he.getNodeId(it);dt&&j.default.trigger("DOM.characterDataModified",{characterData:it.nodeValue,nodeId:dt})})},2139:function(q,Q,V){var _e=this&&this.__spreadArrays||function(){for(var ze=0,Ue=0,De=arguments.length;Ue<De;Ue++)ze+=arguments[Ue].length;var Fe=Array(ze),Xe=0;for(Ue=0;Ue<De;Ue++)for(var Ke=arguments[Ue],He=0,Qe=Ke.length;He<Qe;He++,Xe++)Fe[Xe]=Ke[He];return Fe},ce=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getResponseBody=Q.enable=Q.getCookies=Q.deleteCookies=void 0;var ne=ce(V(4331)),Ee=ce(V(3783)),j=ce(V(1420)),we=ce(V(5031)),he=ce(V(8763)),ye=ce(V(8740)),xe=ce(V(6341)),Te=V(2636),Se=ce(V(3276));Q.deleteCookies=function(ze){we.default(ze.name)},Q.getCookies=function(){var ze=[],Ue=document.cookie;return ne.default(Ue)!==""&&Ee.default(Ue.split(";"),function(De){De=De.split("=");var Fe=ne.default(De.shift());De=j.default(De.join("=")),ze.push({name:Fe,value:De})}),{cookies:ze}};var Ce=new Map;function Oe(ze){return!xe.default(ze,"__chobitsu-hide__=true")}Q.enable=he.default(function(){var ze=window.XMLHttpRequest.prototype,Ue=ze.send,De=ze.open,Fe=ze.setRequestHeader;ze.open=function(He,Qe){if(!Oe(Qe))return De.apply(this,arguments);var pt=this,Mt=pt.chobitsuRequest=new Te.XhrRequest(pt,He,Qe);Mt.on("send",function(wt,bt){var rt={method:bt.method,url:bt.url,headers:bt.reqHeaders};bt.data&&(rt.postData=bt.data),Se.default.trigger("Network.requestWillBeSent",{requestId:wt,type:"XHR",request:rt,timestamp:bt.time/1e3})}),Mt.on("headersReceived",function(wt,bt){Se.default.trigger("Network.responseReceivedExtraInfo",{requestId:wt,blockedCookies:[],headers:bt.resHeaders})}),Mt.on("done",function(wt,bt){Se.default.trigger("Network.responseReceived",{requestId:wt,type:"XHR",response:{status:bt.status},timestamp:bt.time/1e3}),Ce.set(wt,bt.resTxt),Se.default.trigger("Network.loadingFinished",{requestId:wt,encodedDataLength:bt.size,timestamp:bt.time/1e3})}),pt.addEventListener("readystatechange",function(){switch(pt.readyState){case 2:return Mt.handleHeadersReceived();case 4:return Mt.handleDone()}}),De.apply(this,arguments)},ze.send=function(He){var Qe=this.chobitsuRequest;Qe&&Qe.handleSend(He),Ue.apply(this,arguments)},ze.setRequestHeader=function(He,Qe){var pt=this.chobitsuRequest;pt&&pt.handleReqHeadersSet(He,Qe),Fe.apply(this,arguments)};var Xe=!1;if(window.fetch&&(Xe=ye.default(window.fetch)),!Xe&&navigator.serviceWorker&&(Xe=!0),Xe){var Ke=window.fetch;window.fetch=function(){for(var He=[],Qe=0;Qe<arguments.length;Qe++)He[Qe]=arguments[Qe];var pt=new(Te.FetchRequest.bind.apply(Te.FetchRequest,_e([void 0],He)));pt.on("send",function(wt,bt){var rt={method:bt.method,url:bt.url,headers:bt.reqHeaders};bt.data&&(rt.postData=bt.data),Se.default.trigger("Network.requestWillBeSent",{requestId:wt,type:"Fetch",request:rt,timestamp:bt.time/1e3})}),pt.on("done",function(wt,bt){Se.default.trigger("Network.responseReceived",{requestId:wt,type:"Fetch",response:{status:bt.status,headers:bt.resHeaders},timestamp:bt.time/1e3}),Ce.set(wt,bt.resTxt),Se.default.trigger("Network.loadingFinished",{requestId:wt,encodedDataLength:bt.size,timestamp:bt.time/1e3})});var Mt=Ke.apply(void 0,He);return pt.send(Mt),Mt}}}),Q.getResponseBody=function(ze){return{base64Encoded:!1,body:Ce.get(ze.requestId)}}},8689:function(q,Q,V){var _e=this&&this.__createBinding||(Object.create?function(ht,Vt,st,Dt){Dt===void 0&&(Dt=st),Object.defineProperty(ht,Dt,{enumerable:!0,get:function(){return Vt[st]}})}:function(ht,Vt,st,Dt){Dt===void 0&&(Dt=st),ht[Dt]=Vt[st]}),ce=this&&this.__setModuleDefault||(Object.create?function(ht,Vt){Object.defineProperty(ht,"default",{enumerable:!0,value:Vt})}:function(ht,Vt){ht.default=Vt}),ne=this&&this.__importStar||function(ht){if(ht&&ht.__esModule)return ht;var Vt={};if(ht!=null)for(var st in ht)st!=="default"&&Object.hasOwnProperty.call(ht,st)&&_e(Vt,ht,st);return ce(Vt,ht),Vt},Ee=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.setInspectMode=Q.setShowViewportSizeOnResize=Q.hideHighlight=Q.highlightNode=Q.disable=Q.enable=void 0;var j,we,he=V(2049),ye=V(7935),xe=Ee(V(1512)),Te=Ee(V(8613)),Se=Ee(V(9956)),Ce=Ee(V(642)),Oe=Ee(V(4193)),ze=Ee(V(3276)),Ue=Ee(V(7715)),De=ne(V(7923)),Fe=!1,Xe=!1;function Ke(ht){var Vt,st=ht.nodeId,Dt=ht.highlightConfig,ln=ht.objectId;st&&(Vt=he.getNode(st)),ln&&(Vt=De.getObj(ln)),Vt.nodeType!==1&&Vt.nodeType!==3||(Oe.default(Dt,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),j.highlight(Vt,Dt))}function He(){j.hide()}Q.enable=function(){if(!Xe){Fe||(Ce.default(V(9410)),Fe=!0);var ht=Te.default("div",{class:"__chobitsu-hide__"});we=xe.default(ht),document.documentElement.appendChild(ht),j=new Ue.default(ht),window.addEventListener("resize",lt),Xe=!0}},Q.disable=function(){j.destroy(),we.remove(),window.removeEventListener("resize",lt),Xe=!1},Q.highlightNode=Ke,Q.hideHighlight=He;var Qe=!1;Q.setShowViewportSizeOnResize=function(ht){Qe=ht.show};var pt={},Mt="none";function wt(ht){if(Se.default()){var Vt=ht.touches[0]||ht.changedTouches[0];return document.elementFromPoint(Vt.pageX,Vt.pageY)}return document.elementFromPoint(ht.clientX,ht.clientY)}Q.setInspectMode=function(ht){pt=ht.highlightConfig,Mt=ht.mode};var bt=-1;function rt(ht){if(Mt!=="none"){var Vt=wt(ht);if(Vt&&he.isValidNode(Vt)){var st=he.getNodeId(Vt);st||(st=ye.pushNodesToFrontend(Vt)),Ke({nodeId:st,highlightConfig:pt}),st!==bt&&(ze.default.trigger("Overlay.nodeHighlightRequested",{nodeId:st}),bt=st)}}}function nt(ht){if(Mt!=="none"){ht.preventDefault(),ht.stopImmediatePropagation();var Vt=wt(ht);ze.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:he.getNodeId(Vt)}),bt=-1,He()}}function it(ht,Vt){document.documentElement.addEventListener(ht,Vt,!0)}Se.default()?(it("touchstart",rt),it("touchmove",rt),it("touchend",nt)):(it("mousemove",rt),it("mouseout",function(){Mt!=="none"&&He()}),it("click",nt));var dt=Te.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function lt(){Qe&&(xt.text(window.innerWidth+"px \xD7 "+window.innerHeight+"px"),ft?clearTimeout(ft):document.documentElement.appendChild(dt),ft=setTimeout(function(){xt.remove(),ft=null},1e3))}var ft,xt=xe.default(dt)},9119:function(q,Q,V){var _e=this&&this.__importDefault||function(ye){return ye&&ye.__esModule?ye:{default:ye}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getTrustTokens=Q.clearDataForOrigin=Q.getUsageAndQuota=void 0;var ce=_e(V(3783)),ne=_e(V(5031)),Ee=_e(V(615)),j=V(2139),we=Ee.default("local"),he=Ee.default("session");Q.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},Q.clearDataForOrigin=function(ye){var xe=ye.storageTypes.split(",");ce.default(xe,function(Te){if(Te==="cookies"){var Se=j.getCookies().cookies;ce.default(Se,function(Ce){var Oe=Ce.name;return ne.default(Oe)})}else Te==="local_storage"&&(we.clear(),he.clear())})},Q.getTrustTokens=function(){return{tokens:[]}}},3276:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(j,we){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(he,ye){he.__proto__=ye}||function(he,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(he[xe]=ye[xe])},_e(j,we)},function(j,we){function he(){this.constructor=j}_e(j,we),j.prototype=we===null?Object.create(we):(he.prototype=we.prototype,new he)}),ne=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=function(j){function we(){return j!==null&&j.apply(this,arguments)||this}return ce(we,j),we.prototype.trigger=function(he,ye){this.emit("message",JSON.stringify({method:he,params:ye}))},we}(ne(V(1443)).default);Q.default=new Ee},5286:function(q,Q,V){var _e=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.setGlobal=void 0;var ce=_e(V(6768)),ne=_e(V(2327)),Ee=_e(V(1352)),j=_e(V(2533)),we=_e(V(8933)),he=_e(V(3783)),ye={copy:function(xe){ce.default(xe)||(xe=JSON.stringify(xe,null,2)),ne.default(xe)},$:function(xe){return document.querySelector(xe)},$$:function(xe){return Ee.default(document.querySelectorAll(xe))},$x:function(xe){return we.default(xe)},keys:j.default};Q.setGlobal=function(xe,Te){ye[xe]=Te},Q.default=function(xe){var Te;he.default(ye,function(Se,Ce){window[Ce]||(window[Ce]=Se)});try{Te=eval.call(window,"("+xe+")")}catch{Te=eval.call(window,xe)}return he.default(ye,function(Se,Ce){window[Ce]&&window[Ce]===Se&&delete window[Ce]}),Te}},6126:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(he,ye){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,Te){xe.__proto__=Te}||function(xe,Te){for(var Se in Te)Te.hasOwnProperty(Se)&&(xe[Se]=Te[Se])},_e(he,ye)},function(he,ye){function xe(){this.constructor=he}_e(he,ye),he.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}),ne=this&&this.__importDefault||function(he){return he&&he.__esModule?he:{default:he}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(3783)),we=function(he){function ye(){var xe=he.call(this)||this;return xe.observer=new MutationObserver(function(Te){j.default(Te,function(Se){return xe.handleMutation(Se)})}),xe}return ce(ye,he),ye.prototype.observe=function(){var xe=this.observer;xe.disconnect(),xe.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},ye.prototype.handleMutation=function(xe){xe.type==="attributes"?this.emit("attributes",xe.target,xe.attributeName):xe.type==="childList"?this.emit("childList",xe.target,xe.addedNodes,xe.removedNodes):xe.type==="characterData"&&this.emit("characterData",xe.target)},ye}(Ee.default);Q.default=new we},2049:function(q,Q,V){var _e=this&&this.__importDefault||function(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getNode=Q.isValidNode=Q.filterNodes=Q.getPreviousNode=Q.getChildNodes=Q.wrap=Q.getNodeId=Q.clear=Q.getOrCreateNodeId=void 0;var ce=_e(V(2461)),ne=_e(V(5972)),Ee=_e(V(3783)),j=_e(V(4331)),we=_e(V(6341)),he=_e(V(6329)),ye=V(316),xe=new Map,Te=new Map,Se=1;function Ce(Fe){var Xe=Te.get(Fe);return Xe||(Xe=Se++,Te.set(Fe,Xe),xe.set(Xe,Fe),Xe)}function Oe(Fe,Xe){var Ke=(Xe===void 0?{}:Xe).depth,He=Ke===void 0?1:Ke,Qe=Ce(Fe),pt={nodeName:Fe.nodeName,nodeType:Fe.nodeType,localName:Fe.localName||"",nodeValue:Fe.nodeValue||"",nodeId:Qe,backendNodeId:Qe};if(Fe.parentNode&&(pt.parentId=Ce(Fe.parentNode)),Fe.nodeType===10)return he.default(pt,{publicId:"",systemId:""});if(Fe.attributes){var Mt=[];Ee.default(Fe.attributes,function(rt){var nt=rt.name,it=rt.value;return Mt.push(nt,it)}),pt.attributes=Mt}var wt=Ue(Fe.childNodes);pt.childNodeCount=wt.length;var bt=pt.childNodeCount===1&&wt[0].nodeType===3;return(He>0||bt)&&(pt.children=ze(Fe,He)),pt}function ze(Fe,Xe){var Ke=Ue(Fe.childNodes);return ce.default(Ke,function(He){return Oe(He,{depth:Xe-1})})}function Ue(Fe){return ne.default(Fe,function(Xe){return De(Xe)})}function De(Fe){if(Fe.nodeType===1){var Xe=Fe.getAttribute("class")||"";if(we.default(Xe,"__chobitsu-hide__")||we.default(Xe,"html2canvas-container"))return!1}var Ke=!(Fe.nodeType===3&&j.default(Fe.nodeValue||"")==="");return Ke&&Fe.parentNode?De(Fe.parentNode):Ke}Q.getOrCreateNodeId=Ce,Q.clear=function(){xe.clear(),Te.clear()},Q.getNodeId=function(Fe){return Te.get(Fe)},Q.wrap=Oe,Q.getChildNodes=ze,Q.getPreviousNode=function(Fe){var Xe=Fe.previousSibling;if(Xe){for(;!De(Xe)&&Xe.previousSibling;)Xe=Xe.previousSibling;return Xe&&De(Xe)?Xe:void 0}},Q.filterNodes=Ue,Q.isValidNode=De,Q.getNode=function(Fe){var Xe=xe.get(Fe);if(!Xe||Xe.nodeType===10)throw ye.createErr(-32e3,"Could not find node with given id");return Xe}},7923:function(q,Q,V){var _e=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getProperties=Q.releaseObj=Q.getObj=Q.wrap=Q.clear=void 0;var ce=_e(V(3367)),ne=_e(V(6156)),Ee=_e(V(6472)),j=_e(V(4777)),we=_e(V(9833)),he=_e(V(2749)),ye=_e(V(3708)),xe=_e(V(7470)),Te=_e(V(1754)),Se=_e(V(3085)),Ce=_e(V(2533)),Oe=_e(V(300)),ze=_e(V(1116)),Ue=_e(V(8740)),De=_e(V(415)),Fe=_e(V(9804)),Xe=_e(V(6257)),Ke=new Map,He=new Map,Qe=new Map,pt=new Map,Mt=1;function wt(ht,Vt){var st=He.get(ht);return st||(st=JSON.stringify({injectedScriptId:0,id:Mt++}),He.set(ht,st),Ke.set(st,ht),Qe.set(st,Vt),st)}function bt(ht,Vt){var st=Vt===void 0?{}:Vt,Dt=st.generatePreview,ln=Dt!==void 0&&Dt,In=st.self,on=In===void 0?ht:In,an=lt(ht),Xt=an.type,Rt=an.subtype;return Xt==="undefined"?an:Xt==="string"||Xt==="boolean"||Rt==="null"?(an.value=ht,an):(an.description=dt(ht,on),Xt==="number"?(an.value=ht,an):Xt==="symbol"?(an.objectId=wt(ht,on),an):(an.className=Xt==="function"?"Function":Rt==="array"?"Array":Rt==="map"?"Map":Rt==="set"?"Set":Rt==="regexp"?"RegExp":Rt==="error"?ht.name:Se.default(ht,!1),ln&&(an.preview=nt(ht,on)),an.objectId=wt(ht,on),an))}function rt(ht){return Ke.get(ht)}Q.clear=function(){Ke.clear(),He.clear(),Qe.clear()},Q.wrap=bt,Q.getObj=rt,Q.releaseObj=function(ht){var Vt=rt(ht);He.delete(Vt),Qe.delete(ht),Ke.delete(ht)},Q.getProperties=function(ht){for(var Vt=ht.accessorPropertiesOnly,st=ht.objectId,Dt=ht.ownProperties,ln=ht.generatePreview,In=[],on={prototype:!Dt,unenumerable:!0,symbol:!Vt},an=Ke.get(st),Xt=Qe.get(st),Rt=ze.default(an,on),en=De.default(an),hn=0,vn=Rt.length;hn<vn;hn++){var Pn=Rt[hn],Pt=void 0;try{Pt=Xt[Pn]}catch{}var zt={name:ce.default(Pn),isOwn:Xe.default(Xt,Pn)},rn=Object.getOwnPropertyDescriptor(an,Pn);if(!rn&&en&&(rn=Object.getOwnPropertyDescriptor(en,Pn)),rn){if(Vt&&!rn.get&&!rn.set)continue;zt.configurable=rn.configurable,zt.enumerable=rn.enumerable,zt.writable=rn.writable,rn.get&&(zt.get=bt(rn.get)),rn.set&&(zt.set=bt(rn.set))}en&&Xe.default(en,Pn)&&zt.enumerable&&(zt.isOwn=!0);var bn=!0;!zt.isOwn&&zt.get&&(bn=!1),bn&&(Fe.default(Pn)?(zt.symbol=bt(Pn),zt.value={type:"undefined"}):zt.value=bt(Pt,{generatePreview:ln})),Vt&&j.default(Pt)&&Ue.default(Pt)||In.push(zt)}if(!en||Dt||xt(an)||In.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:Xe.default(an,"__proto__"),value:bt(en,{self:Xt}),writable:!1}),Vt)return{result:In};var Tn=[];if(en&&!xt(an)&&Tn.push({name:"[[Prototype]]",value:bt(en,{self:Xt})}),ye.default(an)||xe.default(an)){var $n=function(Dn){for(var xn=pt.get(Dn),En=xn?rt(xn):[],Cn=Dn.entries(),Qn=Cn.next().value;Qn;)ye.default(Dn)?En.push(new ft(Qn[1],Qn[0])):En.push(new ft(Qn[1])),Qn=Cn.next().value;return En}(an);Tn.push({name:"[[Entries]]",value:bt($n)})}return{internalProperties:Tn,result:In}};function nt(ht,Vt){Vt===void 0&&(Vt=ht);var st=lt(ht);st.description=dt(ht,Vt);var Dt=!1,ln=[],In=Ce.default(ht),on=In.length;on>5&&(on=5,Dt=!0);for(var an=0;an<on;an++){var Xt=In[an];ln.push(it(Xt,Vt[Xt]))}if(st.properties=ln,ye.default(ht)){for(var Rt=[],en=(an=0,ht.keys()),hn=en.next().value;hn;){if(an>5){Dt=!0;break}Rt.push({key:nt(hn),value:nt(ht.get(hn))}),an++,hn=en.next().value}st.entries=Rt}else if(xe.default(ht)){var vn=[],Pn=(an=0,ht.keys());for(hn=Pn.next().value;hn;){if(an>5){Dt=!0;break}vn.push({value:nt(hn)}),an++,hn=Pn.next().value}st.entries=vn}return st.overflow=Dt,st}function it(ht,Vt){var st=lt(Vt);st.name=ht;var Dt,ln=st.subtype;return Dt=st.type==="object"?ln==="null"?"null":ln==="array"?"Array("+Vt.length+")":ln==="map"?"Map("+Vt.size+")":ln==="set"?"Set("+Vt.size+")":Se.default(Vt,!1):ce.default(Vt),st.value=Dt,st}function dt(ht,Vt){Vt===void 0&&(Vt=ht);var st=lt(ht),Dt=st.type,ln=st.subtype;return Dt==="string"?ht:Dt==="number"||Dt==="symbol"?ce.default(ht):Dt==="function"?Oe.default(ht):ln==="array"?"Array("+ht.length+")":ln==="map"?"Map("+Vt.size+")":ln==="set"?"Set("+Vt.size+")":ln==="regexp"?ce.default(ht):ln==="error"?ht.stack:ln==="internal#entry"?ht.name?'{"'+ce.default(ht.name)+'" => "'+ce.default(ht.value)+'"}':'"'+ce.default(ht.value)+'"':Se.default(ht,!1)}function lt(ht){var Vt=typeof ht,st="object";if(ht instanceof ft)st="internal#entry";else if(ne.default(ht))st="null";else if(Ee.default(ht))st="array";else if(Te.default(ht))st="regexp";else if(he.default(ht))st="error";else if(ye.default(ht))st="map";else if(xe.default(ht))st="set";else try{we.default(ht)&&(st="node")}catch{}return{type:Vt,subtype:st}}var ft=function(ht,Vt){Vt&&(this.name=Vt),this.value=ht};function xt(ht){return ht instanceof ft||!!(ht[0]&&ht[0]instanceof ft)}},2636:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(nt,it){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,lt){dt.__proto__=lt}||function(dt,lt){for(var ft in lt)lt.hasOwnProperty(ft)&&(dt[ft]=lt[ft])},_e(nt,it)},function(nt,it){function dt(){this.constructor=nt}_e(nt,it),nt.prototype=it===null?Object.create(it):(dt.prototype=it.prototype,new dt)}),ne=this&&this.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.fullUrl=Q.FetchRequest=Q.XhrRequest=void 0;var Ee=ne(V(1443)),j=ne(V(6768)),we=ne(V(9702)),he=ne(V(6334)),ye=ne(V(8887)),xe=ne(V(4331)),Te=ne(V(8847)),Se=ne(V(3783)),Ce=ne(V(6930)),Oe=ne(V(3875)),ze=V(316),Ue=function(nt){function it(dt,lt,ft){var xt=nt.call(this)||this;return xt.xhr=dt,xt.reqHeaders={},xt.method=lt,xt.url=pt(ft),xt.id=ze.createId(),xt}return ce(it,nt),it.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},it.prototype.handleSend=function(dt){j.default(dt)||(dt=""),dt={name:Mt(this.url),url:this.url,data:dt,time:Te.default(),reqHeaders:this.reqHeaders,method:this.method},ye.default(this.reqHeaders)||(dt.reqHeaders=this.reqHeaders),this.emit("send",this.id,dt)},it.prototype.handleReqHeadersSet=function(dt,lt){dt&&lt&&(this.reqHeaders[dt]=lt)},it.prototype.handleHeadersReceived=function(){var dt=this.xhr,lt=wt(dt.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:lt.type,subType:lt.subType,size:He(dt,!0,this.url),time:Te.default(),resHeaders:Ke(dt)})},it.prototype.handleDone=function(){var dt,lt,ft,xt=this,ht=this.xhr,Vt=ht.responseType,st="",Dt=function(){xt.emit("done",xt.id,{status:ht.status,size:He(ht,!1,xt.url),time:Te.default(),resTxt:st})},ln=wt(ht.getResponseHeader("Content-Type")||"");Vt!=="blob"||ln.type!=="text"&&ln.subType!=="javascript"&&ln.subType!=="json"?(Vt!==""&&Vt!=="text"||(st=ht.responseText),Vt==="json"&&(st=JSON.stringify(ht.response)),Dt()):(dt=ht.response,lt=function(In,on){on&&(st=on),Dt()},(ft=new FileReader).onload=function(){lt(null,ft.result)},ft.onerror=function(In){lt(In)},ft.readAsText(dt))},it}(Ee.default);Q.XhrRequest=Ue;var De=function(nt){function it(dt,lt){lt===void 0&&(lt={});var ft=nt.call(this)||this;return dt instanceof window.Request&&(dt=dt.url),ft.url=pt(dt),ft.id=ze.createId(),ft.options=lt,ft.reqHeaders=lt.headers||{},ft.method=lt.method||"GET",ft}return ce(it,nt),it.prototype.send=function(dt){var lt=this,ft=this.options,xt=j.default(ft.body)?ft.body:"";this.emit("send",this.id,{name:Mt(this.url),url:this.url,data:xt,reqHeaders:this.reqHeaders,time:Te.default(),method:this.method}),dt.then(function(ht){var Vt=wt((ht=ht.clone()).headers.get("Content-Type"));return ht.text().then(function(st){var Dt={type:Vt.type,subType:Vt.subType,time:Te.default(),size:Fe(ht,st),resTxt:st,resHeaders:Xe(ht),status:ht.status};ye.default(lt.reqHeaders)||(Dt.reqHeaders=lt.reqHeaders),lt.emit("done",lt.id,Dt)}),ht})},it}(Ee.default);function Fe(nt,it){var dt=nt.headers.get("Content-length");return dt?Oe.default(dt):rt(it)}function Xe(nt){var it={};return nt.headers.forEach(function(dt,lt){return it[lt]=dt}),it}function Ke(nt){var it=nt.getAllResponseHeaders().split(`
`),dt={};return Se.default(it,function(lt){if((lt=xe.default(lt))!==""){var ft=lt.split(":",2),xt=ft[0],ht=ft[1];dt[xt]=xe.default(ht)}}),dt}function He(nt,it,dt){var lt=0;function ft(){if(!it){var xt=nt.responseType,ht="";xt!==""&&xt!=="text"||(ht=nt.responseText),ht&&(lt=rt(ht))}}if(function(xt){return!Ce.default(xt,bt)}(dt))ft();else try{lt=Oe.default(nt.getResponseHeader("Content-Length"))}catch{ft()}return lt===0&&ft(),lt}Q.FetchRequest=De;var Qe=document.createElement("a");function pt(nt){return Qe.href=nt,Qe.protocol+"//"+Qe.host+Qe.pathname+Qe.search+Qe.hash}function Mt(nt){var it=we.default(nt.split("/"));return it.indexOf("?")>-1&&(it=xe.default(it.split("?")[0])),it===""&&(it=new he.default(nt).hostname),it}function wt(nt){if(!nt)return{type:"unknown",subType:"unknown"};var it=nt.split(";")[0].split("/");return{type:it[0],subType:we.default(it)}}Q.fullUrl=pt;var bt=window.location.origin;function rt(nt){var it=encodeURIComponent(nt).match(/%[89ABab]/g);return nt.length+(it?it.length:0)}},316:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(De,Fe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xe,Ke){Xe.__proto__=Ke}||function(Xe,Ke){for(var He in Ke)Ke.hasOwnProperty(He)&&(Xe[He]=Ke[He])},_e(De,Fe)},function(De,Fe){function Xe(){this.constructor=De}_e(De,Fe),De.prototype=Fe===null?Object.create(Fe):(Xe.prototype=Fe.prototype,new Xe)}),ne=this&&this.__awaiter||function(De,Fe,Xe,Ke){return new(Xe||(Xe=Promise))(function(He,Qe){function pt(bt){try{wt(Ke.next(bt))}catch(rt){Qe(rt)}}function Mt(bt){try{wt(Ke.throw(bt))}catch(rt){Qe(rt)}}function wt(bt){var rt;bt.done?He(bt.value):(rt=bt.value,rt instanceof Xe?rt:new Xe(function(nt){nt(rt)})).then(pt,Mt)}wt((Ke=Ke.apply(De,Fe||[])).next())})},Ee=this&&this.__generator||function(De,Fe){var Xe,Ke,He,Qe,pt={label:0,sent:function(){if(1&He[0])throw He[1];return He[1]},trys:[],ops:[]};return Qe={next:Mt(0),throw:Mt(1),return:Mt(2)},typeof Symbol=="function"&&(Qe[Symbol.iterator]=function(){return this}),Qe;function Mt(wt){return function(bt){return function(rt){if(Xe)throw new TypeError("Generator is already executing.");for(;pt;)try{if(Xe=1,Ke&&(He=2&rt[0]?Ke.return:rt[0]?Ke.throw||((He=Ke.return)&&He.call(Ke),0):Ke.next)&&!(He=He.call(Ke,rt[1])).done)return He;switch(Ke=0,He&&(rt=[2&rt[0],He.value]),rt[0]){case 0:case 1:He=rt;break;case 4:return pt.label++,{value:rt[1],done:!1};case 5:pt.label++,Ke=rt[1],rt=[0];continue;case 7:rt=pt.ops.pop(),pt.trys.pop();continue;default:if(He=pt.trys,!((He=He.length>0&&He[He.length-1])||rt[0]!==6&&rt[0]!==2)){pt=0;continue}if(rt[0]===3&&(!He||rt[1]>He[0]&&rt[1]<He[3])){pt.label=rt[1];break}if(rt[0]===6&&pt.label<He[1]){pt.label=He[1],He=rt;break}if(He&&pt.label<He[2]){pt.label=He[2],pt.ops.push(rt);break}He[2]&&pt.ops.pop(),pt.trys.pop();continue}rt=Fe.call(De,pt)}catch(nt){rt=[6,nt],Ke=0}finally{Xe=He=0}if(5&rt[0])throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}([wt,bt])}}},j=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getBase64Content=Q.getTextContent=Q.getOrigin=Q.getUrl=Q.createErr=Q.ErrorWithCode=Q.getAbsoluteUrl=Q.createId=void 0;var we=j(V(5229)),he=j(V(1216)),ye=j(V(6930)),xe=j(V(6334)),Te=j(V(1792)),Se=j(V(9669)),Ce=he.default(1e3,9999)+".";Q.createId=function(){return we.default(Ce)},Q.getAbsoluteUrl=function(De){var Fe=document.createElement("a");return Fe.href=De,Fe.href};var Oe=function(De){function Fe(Xe,Ke){var He=this.constructor,Qe=De.call(this,Ke)||this;return Qe.code=Xe,Object.setPrototypeOf(Qe,He.prototype),Qe}return ce(Fe,De),Fe}(Error);function ze(De,Fe,Xe){return Xe===void 0&&(Xe=""),ne(this,void 0,void 0,function(){var Ke;return Ee(this,function(He){switch(He.label){case 0:return He.trys.push([0,2,,8]),(Ke=new xe.default(De)).setQuery("__chobitsu-hide__","true"),[4,Se.default.get(Ke.toString(),{responseType:Fe})];case 1:return[2,He.sent().data];case 2:if(He.sent(),!Xe)return[3,7];He.label=3;case 3:return He.trys.push([3,6,,7]),[4,Se.default.get(Ue(Xe,De),{responseType:Fe})];case 4:return[4,He.sent().data];case 5:return[2,He.sent()];case 6:return He.sent(),[3,7];case 7:return[3,8];case 8:return[2,Fe==="arraybuffer"?new ArrayBuffer(0):""]}})})}function Ue(De,Fe){var Xe=new xe.default(De);return Xe.setQuery("url",Fe),Xe.setQuery("__chobitsu-hide__","true"),Xe.toString()}Q.ErrorWithCode=Oe,Q.createErr=function(De,Fe){return new Oe(De,Fe)},Q.getUrl=function(){var De=location.href;return ye.default(De,"about:")?parent.location.href:De},Q.getOrigin=function(){var De=location.origin;return De==="null"?parent.location.origin:De},Q.getTextContent=function(De,Fe){return Fe===void 0&&(Fe=""),ne(this,void 0,void 0,function(){return Ee(this,function(Xe){switch(Xe.label){case 0:return[4,ze(De,"text",Fe)];case 1:return[2,Xe.sent()]}})})},Q.getBase64Content=function(De,Fe){return Fe===void 0&&(Fe=""),ne(this,void 0,void 0,function(){var Xe;return Ee(this,function(Ke){switch(Ke.label){case 0:return Xe=Te.default,[4,ze(De,"arraybuffer",Fe)];case 1:return[2,Xe.apply(void 0,[Ke.sent(),"base64"])]}})})}},9410:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}`,""]),q.exports=Q},3645:function(q){q.exports=function(Q){var V=[];return V.toString=function(){return this.map(function(_e){var ce=function(ne,Ee){var j=ne[1]||"",we=ne[3];if(!we)return j;if(Ee&&typeof btoa=="function"){var he=(xe=we,Te=btoa(unescape(encodeURIComponent(JSON.stringify(xe)))),Se="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(Te),"/*# ".concat(Se," */")),ye=we.sources.map(function(Ce){return"/*# sourceURL=".concat(we.sourceRoot||"").concat(Ce," */")});return[j].concat(ye).concat([he]).join(`
`)}var xe,Te,Se;return[j].join(`
`)}(_e,Q);return _e[2]?"@media ".concat(_e[2]," {").concat(ce,"}"):ce}).join("")},V.i=function(_e,ce,ne){typeof _e=="string"&&(_e=[[null,_e,""]]);var Ee={};if(ne)for(var j=0;j<this.length;j++){var we=this[j][0];we!=null&&(Ee[we]=!0)}for(var he=0;he<_e.length;he++){var ye=[].concat(_e[he]);ne&&Ee[ye[0]]||(ce&&(ye[2]?ye[2]="".concat(ce," and ").concat(ye[2]):ye[2]=ce),V.push(ye))}},V}},8384:function(q,Q,V){var _e,ce;/*!
 * Draggabilly v2.4.1
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */(function(ne,Ee){_e=[V(6131),V(4842)],ce=function(j,we){return function(he,ye,xe){function Te(Fe,Xe){for(var Ke in Xe)Fe[Ke]=Xe[Ke];return Fe}function Se(){}var Ce=he.jQuery;function Oe(Fe,Xe){this.element=typeof Fe=="string"?document.querySelector(Fe):Fe,Ce&&(this.$element=Ce(this.element)),this.options=Te({},this.constructor.defaults),this.option(Xe),this._create()}var ze=Oe.prototype=Object.create(xe.prototype);Oe.defaults={},ze.option=function(Fe){Te(this.options,Fe)};var Ue={relative:!0,absolute:!0,fixed:!0};function De(Fe,Xe,Ke){return Ke=Ke||"round",Xe?Math[Ke](Fe/Xe)*Xe:Fe}return ze._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=Te({},this.position);var Fe=getComputedStyle(this.element);Ue[Fe.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},ze.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},ze.dispatchEvent=function(Fe,Xe,Ke){var He=[Xe].concat(Ke);this.emitEvent(Fe,He),this.dispatchJQueryEvent(Fe,Xe,Ke)},ze.dispatchJQueryEvent=function(Fe,Xe,Ke){var He=he.jQuery;if(He&&this.$element){var Qe=He.Event(Xe);Qe.type=Fe,this.$element.trigger(Qe,Ke)}},ze._getPosition=function(){var Fe=getComputedStyle(this.element),Xe=this._getPositionCoord(Fe.left,"width"),Ke=this._getPositionCoord(Fe.top,"height");this.position.x=isNaN(Xe)?0:Xe,this.position.y=isNaN(Ke)?0:Ke,this._addTransformPosition(Fe)},ze._getPositionCoord=function(Fe,Xe){if(Fe.indexOf("%")!=-1){var Ke=ye(this.element.parentNode);return Ke?parseFloat(Fe)/100*Ke[Xe]:0}return parseInt(Fe,10)},ze._addTransformPosition=function(Fe){var Xe=Fe.transform;if(Xe.indexOf("matrix")===0){var Ke=Xe.split(","),He=Xe.indexOf("matrix3d")===0?12:4,Qe=parseInt(Ke[He],10),pt=parseInt(Ke[He+1],10);this.position.x+=Qe,this.position.y+=pt}},ze.onPointerDown=function(Fe,Xe){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",Fe,[Xe])},ze.pointerDown=function(Fe,Xe){this.okayPointerDown(Fe)&&this.isEnabled?(this.pointerDownPointer={pageX:Xe.pageX,pageY:Xe.pageY},Fe.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Fe),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",Fe,[Xe])):this._pointerReset()},ze.dragStart=function(Fe,Xe){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",Fe,[Xe]),this.animate())},ze.measureContainment=function(){var Fe=this.getContainer();if(Fe){var Xe=ye(this.element),Ke=ye(Fe),He=this.element.getBoundingClientRect(),Qe=Fe.getBoundingClientRect(),pt=Ke.borderLeftWidth+Ke.borderRightWidth,Mt=Ke.borderTopWidth+Ke.borderBottomWidth,wt=this.relativeStartPosition={x:He.left-(Qe.left+Ke.borderLeftWidth),y:He.top-(Qe.top+Ke.borderTopWidth)};this.containSize={width:Ke.width-pt-wt.x-Xe.width,height:Ke.height-Mt-wt.y-Xe.height}}},ze.getContainer=function(){var Fe=this.options.containment;if(Fe)return Fe instanceof HTMLElement?Fe:typeof Fe=="string"?document.querySelector(Fe):this.element.parentNode},ze.onPointerMove=function(Fe,Xe,Ke){this.dispatchJQueryEvent("pointerMove",Fe,[Xe,Ke])},ze.dragMove=function(Fe,Xe,Ke){if(this.isEnabled){var He=Ke.x,Qe=Ke.y,pt=this.options.grid,Mt=pt&&pt[0],wt=pt&&pt[1];He=De(He,Mt),Qe=De(Qe,wt),He=this.containDrag("x",He,Mt),Qe=this.containDrag("y",Qe,wt),He=this.options.axis=="y"?0:He,Qe=this.options.axis=="x"?0:Qe,this.position.x=this.startPosition.x+He,this.position.y=this.startPosition.y+Qe,this.dragPoint.x=He,this.dragPoint.y=Qe,this.dispatchEvent("dragMove",Fe,[Xe,Ke])}},ze.containDrag=function(Fe,Xe,Ke){if(!this.options.containment)return Xe;var He=Fe=="x"?"width":"height",Qe=De(-this.relativeStartPosition[Fe],Ke,"ceil"),pt=this.containSize[He];return pt=De(pt,Ke,"floor"),Math.max(Qe,Math.min(pt,Xe))},ze.onPointerUp=function(Fe,Xe){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",Fe,[Xe])},ze.dragEnd=function(Fe,Xe){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",Fe,[Xe]))},ze.animate=function(){if(this.isDragging){this.positionDrag();var Fe=this;requestAnimationFrame(function(){Fe.animate()})}},ze.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},ze.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},ze.staticClick=function(Fe,Xe){this.dispatchEvent("staticClick",Fe,[Xe])},ze.setPosition=function(Fe,Xe){this.position.x=Fe,this.position.y=Xe,this.setLeftTop()},ze.enable=function(){this.isEnabled=!0},ze.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},ze.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},ze._init=Se,Ce&&Ce.bridget&&Ce.bridget("draggabilly",Oe),Oe}(ne,j,we)}.apply(Q,_e),ce===void 0||(q.exports=ce)})(window)},7158:function(q,Q,V){var _e,ce;(ce=typeof(_e=function(){function ne(){}var Ee=ne.prototype;return Ee.on=function(j,we){if(j&&we){var he=this._events=this._events||{},ye=he[j]=he[j]||[];return ye.indexOf(we)==-1&&ye.push(we),this}},Ee.once=function(j,we){if(j&&we){this.on(j,we);var he=this._onceEvents=this._onceEvents||{};return(he[j]=he[j]||{})[we]=!0,this}},Ee.off=function(j,we){var he=this._events&&this._events[j];if(he&&he.length){var ye=he.indexOf(we);return ye!=-1&&he.splice(ye,1),this}},Ee.emitEvent=function(j,we){var he=this._events&&this._events[j];if(he&&he.length){he=he.slice(0),we=we||[];for(var ye=this._onceEvents&&this._onceEvents[j],xe=0;xe<he.length;xe++){var Te=he[xe];ye&&ye[Te]&&(this.off(j,Te),delete ye[Te]),Te.apply(this,we)}return this}},Ee.allOff=function(){delete this._events,delete this._onceEvents},ne})=="function"?_e.call(Q,V,Q,q):_e)===void 0||(q.exports=ce)},6131:function(q,Q,V){var _e,ce;/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(ce=typeof(_e=function(){function ne(ze){var Ue=parseFloat(ze);return ze.indexOf("%")==-1&&!isNaN(Ue)&&Ue}function Ee(){}var j=typeof console=="undefined"?Ee:function(ze){console.error(ze)},we=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],he=we.length;function ye(){for(var ze={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},Ue=0;Ue<he;Ue++)ze[we[Ue]]=0;return ze}function xe(ze){var Ue=getComputedStyle(ze);return Ue||j("Style returned "+Ue+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),Ue}var Te,Se=!1;function Ce(){if(!Se){Se=!0;var ze=document.createElement("div");ze.style.width="200px",ze.style.padding="1px 2px 3px 4px",ze.style.borderStyle="solid",ze.style.borderWidth="1px 2px 3px 4px",ze.style.boxSizing="border-box";var Ue=document.body||document.documentElement;Ue.appendChild(ze);var De=xe(ze);Te=Math.round(ne(De.width))==200,Oe.isBoxSizeOuter=Te,Ue.removeChild(ze)}}function Oe(ze){if(Ce(),typeof ze=="string"&&(ze=document.querySelector(ze)),ze&&typeof ze=="object"&&ze.nodeType){var Ue=xe(ze);if(Ue.display=="none")return ye();var De={};De.width=ze.offsetWidth,De.height=ze.offsetHeight;for(var Fe=De.isBorderBox=Ue.boxSizing=="border-box",Xe=0;Xe<he;Xe++){var Ke=we[Xe],He=Ue[Ke],Qe=parseFloat(He);De[Ke]=isNaN(Qe)?0:Qe}var pt=De.paddingLeft+De.paddingRight,Mt=De.paddingTop+De.paddingBottom,wt=De.marginLeft+De.marginRight,bt=De.marginTop+De.marginBottom,rt=De.borderLeftWidth+De.borderRightWidth,nt=De.borderTopWidth+De.borderBottomWidth,it=Fe&&Te,dt=ne(Ue.width);dt!==!1&&(De.width=dt+(it?0:pt+rt));var lt=ne(Ue.height);return lt!==!1&&(De.height=lt+(it?0:Mt+nt)),De.innerWidth=De.width-(pt+rt),De.innerHeight=De.height-(Mt+nt),De.outerWidth=De.width+wt,De.outerHeight=De.height+bt,De}}return Oe})=="function"?_e.call(Q,V,Q,q):_e)===void 0||(q.exports=ce)},6834:function(q,Q,V){function _e(Se){return Se&&Se.__esModule?Se:{default:Se}}function ce(Se){if(Se&&Se.__esModule)return Se;var Ce={};if(Se!=null)for(var Oe in Se)Object.prototype.hasOwnProperty.call(Se,Oe)&&(Ce[Oe]=Se[Oe]);return Ce.default=Se,Ce}Q.__esModule=!0;var ne=ce(V(2067)),Ee=_e(V(5558)),j=_e(V(8728)),we=ce(V(2392)),he=ce(V(1628)),ye=_e(V(3982));function xe(){var Se=new ne.HandlebarsEnvironment;return we.extend(Se,ne),Se.SafeString=Ee.default,Se.Exception=j.default,Se.Utils=we,Se.escapeExpression=we.escapeExpression,Se.VM=he,Se.template=function(Ce){return he.template(Ce,Se)},Se}var Te=xe();Te.create=xe,ye.default(Te),Te.default=Te,Q.default=Te,q.exports=Q.default},2067:function(q,Q,V){function _e(Se){return Se&&Se.__esModule?Se:{default:Se}}Q.__esModule=!0,Q.HandlebarsEnvironment=xe;var ce=V(2392),ne=_e(V(8728)),Ee=V(2638),j=V(881),we=_e(V(8037)),he=V(6293);Q.VERSION="4.7.7",Q.COMPILER_REVISION=8,Q.LAST_COMPATIBLE_COMPILER_REVISION=7,Q.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var ye="[object Object]";function xe(Se,Ce,Oe){this.helpers=Se||{},this.partials=Ce||{},this.decorators=Oe||{},Ee.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}xe.prototype={constructor:xe,logger:we.default,log:we.default.log,registerHelper:function(Se,Ce){if(ce.toString.call(Se)===ye){if(Ce)throw new ne.default("Arg not supported with multiple helpers");ce.extend(this.helpers,Se)}else this.helpers[Se]=Ce},unregisterHelper:function(Se){delete this.helpers[Se]},registerPartial:function(Se,Ce){if(ce.toString.call(Se)===ye)ce.extend(this.partials,Se);else{if(Ce===void 0)throw new ne.default('Attempting to register a partial called "'+Se+'" as undefined');this.partials[Se]=Ce}},unregisterPartial:function(Se){delete this.partials[Se]},registerDecorator:function(Se,Ce){if(ce.toString.call(Se)===ye){if(Ce)throw new ne.default("Arg not supported with multiple decorators");ce.extend(this.decorators,Se)}else this.decorators[Se]=Ce},unregisterDecorator:function(Se){delete this.decorators[Se]},resetLoggedPropertyAccesses:function(){he.resetLoggedProperties()}};var Te=we.default.log;Q.log=Te,Q.createFrame=ce.createFrame,Q.logger=we.default},881:function(q,Q,V){Q.__esModule=!0,Q.registerDefaultDecorators=function(Ee){ne.default(Ee)};var _e,ce=V(5670),ne=(_e=ce)&&_e.__esModule?_e:{default:_e}},5670:function(q,Q,V){Q.__esModule=!0;var _e=V(2392);Q.default=function(ce){ce.registerDecorator("inline",function(ne,Ee,j,we){var he=ne;return Ee.partials||(Ee.partials={},he=function(ye,xe){var Te=j.partials;j.partials=_e.extend({},Te,Ee.partials);var Se=ne(ye,xe);return j.partials=Te,Se}),Ee.partials[we.args[0]]=we.fn,he})},q.exports=Q.default},8728:function(q,Q){Q.__esModule=!0;var V=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function _e(ce,ne){var Ee=ne&&ne.loc,j=void 0,we=void 0,he=void 0,ye=void 0;Ee&&(j=Ee.start.line,we=Ee.end.line,he=Ee.start.column,ye=Ee.end.column,ce+=" - "+j+":"+he);for(var xe=Error.prototype.constructor.call(this,ce),Te=0;Te<V.length;Te++)this[V[Te]]=xe[V[Te]];Error.captureStackTrace&&Error.captureStackTrace(this,_e);try{Ee&&(this.lineNumber=j,this.endLineNumber=we,Object.defineProperty?(Object.defineProperty(this,"column",{value:he,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:ye,enumerable:!0})):(this.column=he,this.endColumn=ye))}catch{}}_e.prototype=new Error,Q.default=_e,q.exports=Q.default},2638:function(q,Q,V){function _e(xe){return xe&&xe.__esModule?xe:{default:xe}}Q.__esModule=!0,Q.registerDefaultHelpers=function(xe){ce.default(xe),ne.default(xe),Ee.default(xe),j.default(xe),we.default(xe),he.default(xe),ye.default(xe)},Q.moveHelperToHooks=function(xe,Te,Se){xe.helpers[Te]&&(xe.hooks[Te]=xe.helpers[Te],Se||delete xe.helpers[Te])};var ce=_e(V(7342)),ne=_e(V(6822)),Ee=_e(V(4905)),j=_e(V(7405)),we=_e(V(5702)),he=_e(V(7593)),ye=_e(V(3978))},7342:function(q,Q,V){Q.__esModule=!0;var _e=V(2392);Q.default=function(ce){ce.registerHelper("blockHelperMissing",function(ne,Ee){var j=Ee.inverse,we=Ee.fn;if(ne===!0)return we(this);if(ne===!1||ne==null)return j(this);if(_e.isArray(ne))return ne.length>0?(Ee.ids&&(Ee.ids=[Ee.name]),ce.helpers.each(ne,Ee)):j(this);if(Ee.data&&Ee.ids){var he=_e.createFrame(Ee.data);he.contextPath=_e.appendContextPath(Ee.data.contextPath,Ee.name),Ee={data:he}}return we(ne,Ee)})},q.exports=Q.default},6822:function(q,Q,V){Q.__esModule=!0;var _e,ce=V(2392),ne=V(8728),Ee=(_e=ne)&&_e.__esModule?_e:{default:_e};Q.default=function(j){j.registerHelper("each",function(we,he){if(!he)throw new Ee.default("Must pass iterator to #each");var ye,xe=he.fn,Te=he.inverse,Se=0,Ce="",Oe=void 0,ze=void 0;function Ue(He,Qe,pt){Oe&&(Oe.key=He,Oe.index=Qe,Oe.first=Qe===0,Oe.last=!!pt,ze&&(Oe.contextPath=ze+He)),Ce+=xe(we[He],{data:Oe,blockParams:ce.blockParams([we[He],He],[ze+He,null])})}if(he.data&&he.ids&&(ze=ce.appendContextPath(he.data.contextPath,he.ids[0])+"."),ce.isFunction(we)&&(we=we.call(this)),he.data&&(Oe=ce.createFrame(he.data)),we&&typeof we=="object")if(ce.isArray(we))for(var De=we.length;Se<De;Se++)Se in we&&Ue(Se,Se,Se===we.length-1);else if(V.g.Symbol&&we[V.g.Symbol.iterator]){for(var Fe=[],Xe=we[V.g.Symbol.iterator](),Ke=Xe.next();!Ke.done;Ke=Xe.next())Fe.push(Ke.value);for(De=(we=Fe).length;Se<De;Se++)Ue(Se,Se,Se===we.length-1)}else ye=void 0,Object.keys(we).forEach(function(He){ye!==void 0&&Ue(ye,Se-1),ye=He,Se++}),ye!==void 0&&Ue(ye,Se-1,!0);return Se===0&&(Ce=Te(this)),Ce})},q.exports=Q.default},4905:function(q,Q,V){Q.__esModule=!0;var _e,ce=V(8728),ne=(_e=ce)&&_e.__esModule?_e:{default:_e};Q.default=function(Ee){Ee.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new ne.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},q.exports=Q.default},7405:function(q,Q,V){Q.__esModule=!0;var _e,ce=V(2392),ne=V(8728),Ee=(_e=ne)&&_e.__esModule?_e:{default:_e};Q.default=function(j){j.registerHelper("if",function(we,he){if(arguments.length!=2)throw new Ee.default("#if requires exactly one argument");return ce.isFunction(we)&&(we=we.call(this)),!he.hash.includeZero&&!we||ce.isEmpty(we)?he.inverse(this):he.fn(this)}),j.registerHelper("unless",function(we,he){if(arguments.length!=2)throw new Ee.default("#unless requires exactly one argument");return j.helpers.if.call(this,we,{fn:he.inverse,inverse:he.fn,hash:he.hash})})},q.exports=Q.default},5702:function(q,Q){Q.__esModule=!0,Q.default=function(V){V.registerHelper("log",function(){for(var _e=[void 0],ce=arguments[arguments.length-1],ne=0;ne<arguments.length-1;ne++)_e.push(arguments[ne]);var Ee=1;ce.hash.level!=null?Ee=ce.hash.level:ce.data&&ce.data.level!=null&&(Ee=ce.data.level),_e[0]=Ee,V.log.apply(V,_e)})},q.exports=Q.default},7593:function(q,Q){Q.__esModule=!0,Q.default=function(V){V.registerHelper("lookup",function(_e,ce,ne){return _e&&ne.lookupProperty(_e,ce)})},q.exports=Q.default},3978:function(q,Q,V){Q.__esModule=!0;var _e,ce=V(2392),ne=V(8728),Ee=(_e=ne)&&_e.__esModule?_e:{default:_e};Q.default=function(j){j.registerHelper("with",function(we,he){if(arguments.length!=2)throw new Ee.default("#with requires exactly one argument");ce.isFunction(we)&&(we=we.call(this));var ye=he.fn;if(ce.isEmpty(we))return he.inverse(this);var xe=he.data;return he.data&&he.ids&&((xe=ce.createFrame(he.data)).contextPath=ce.appendContextPath(he.data.contextPath,he.ids[0])),ye(we,{data:xe,blockParams:ce.blockParams([we],[xe&&xe.contextPath])})})},q.exports=Q.default},8572:function(q,Q,V){Q.__esModule=!0,Q.createNewLookupObject=function(){for(var ce=arguments.length,ne=Array(ce),Ee=0;Ee<ce;Ee++)ne[Ee]=arguments[Ee];return _e.extend.apply(void 0,[Object.create(null)].concat(ne))};var _e=V(2392)},6293:function(q,Q,V){Q.__esModule=!0,Q.createProtoAccessControl=function(j){var we=Object.create(null);we.constructor=!1,we.__defineGetter__=!1,we.__defineSetter__=!1,we.__lookupGetter__=!1;var he=Object.create(null);return he.__proto__=!1,{properties:{whitelist:_e.createNewLookupObject(he,j.allowedProtoProperties),defaultValue:j.allowProtoPropertiesByDefault},methods:{whitelist:_e.createNewLookupObject(we,j.allowedProtoMethods),defaultValue:j.allowProtoMethodsByDefault}}},Q.resultIsAllowed=function(j,we,he){return Ee(typeof j=="function"?we.methods:we.properties,he)},Q.resetLoggedProperties=function(){Object.keys(ne).forEach(function(j){delete ne[j]})};var _e=V(8572),ce=function(j){if(j&&j.__esModule)return j;var we={};if(j!=null)for(var he in j)Object.prototype.hasOwnProperty.call(j,he)&&(we[he]=j[he]);return we.default=j,we}(V(8037)),ne=Object.create(null);function Ee(j,we){return j.whitelist[we]!==void 0?j.whitelist[we]===!0:j.defaultValue!==void 0?j.defaultValue:(function(he){ne[he]!==!0&&(ne[he]=!0,ce.log("error",'Handlebars: Access has been denied to resolve the property "'+he+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}(we),!1)}},5005:function(q,Q){Q.__esModule=!0,Q.wrapHelper=function(V,_e){return typeof V!="function"?V:function(){return arguments[arguments.length-1]=_e(arguments[arguments.length-1]),V.apply(this,arguments)}}},8037:function(q,Q,V){Q.__esModule=!0;var _e=V(2392),ce={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(ne){if(typeof ne=="string"){var Ee=_e.indexOf(ce.methodMap,ne.toLowerCase());ne=Ee>=0?Ee:parseInt(ne,10)}return ne},log:function(ne){if(ne=ce.lookupLevel(ne),typeof console!="undefined"&&ce.lookupLevel(ce.level)<=ne){var Ee=ce.methodMap[ne];console[Ee]||(Ee="log");for(var j=arguments.length,we=Array(j>1?j-1:0),he=1;he<j;he++)we[he-1]=arguments[he];console[Ee].apply(console,we)}}};Q.default=ce,q.exports=Q.default},3982:function(q,Q,V){Q.__esModule=!0,Q.default=function(_e){var ce=V.g!==void 0?V.g:window,ne=ce.Handlebars;_e.noConflict=function(){return ce.Handlebars===_e&&(ce.Handlebars=ne),_e}},q.exports=Q.default},1628:function(q,Q,V){Q.__esModule=!0,Q.checkRevision=function(Oe){var ze=Oe&&Oe[0]||1,Ue=j.COMPILER_REVISION;if(!(ze>=j.LAST_COMPATIBLE_COMPILER_REVISION&&ze<=j.COMPILER_REVISION)){if(ze<j.LAST_COMPATIBLE_COMPILER_REVISION){var De=j.REVISION_CHANGES[Ue],Fe=j.REVISION_CHANGES[ze];throw new Ee.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+De+") or downgrade your runtime to an older version ("+Fe+").")}throw new Ee.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+Oe[1]+").")}},Q.template=function(Oe,ze){if(!ze)throw new Ee.default("No environment passed to template");if(!Oe||!Oe.main)throw new Ee.default("Unknown template object: "+typeof Oe);Oe.main.decorator=Oe.main_d,ze.VM.checkRevision(Oe.compiler);var Ue=Oe.compiler&&Oe.compiler[0]===7,De={strict:function(Xe,Ke,He){if(!Xe||!(Ke in Xe))throw new Ee.default('"'+Ke+'" not defined in '+Xe,{loc:He});return De.lookupProperty(Xe,Ke)},lookupProperty:function(Xe,Ke){var He=Xe[Ke];return He==null||Object.prototype.hasOwnProperty.call(Xe,Ke)||ye.resultIsAllowed(He,De.protoAccessControl,Ke)?He:void 0},lookup:function(Xe,Ke){for(var He=Xe.length,Qe=0;Qe<He;Qe++)if((Xe[Qe]&&De.lookupProperty(Xe[Qe],Ke))!=null)return Xe[Qe][Ke]},lambda:function(Xe,Ke){return typeof Xe=="function"?Xe.call(Ke):Xe},escapeExpression:ce.escapeExpression,invokePartial:function(Xe,Ke,He){He.hash&&(Ke=ce.extend({},Ke,He.hash),He.ids&&(He.ids[0]=!0)),Xe=ze.VM.resolvePartial.call(this,Xe,Ke,He);var Qe=ce.extend({},He,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),pt=ze.VM.invokePartial.call(this,Xe,Ke,Qe);if(pt==null&&ze.compile&&(He.partials[He.name]=ze.compile(Xe,Oe.compilerOptions,ze),pt=He.partials[He.name](Ke,Qe)),pt!=null){if(He.indent){for(var Mt=pt.split(`
`),wt=0,bt=Mt.length;wt<bt&&(Mt[wt]||wt+1!==bt);wt++)Mt[wt]=He.indent+Mt[wt];pt=Mt.join(`
`)}return pt}throw new Ee.default("The partial "+He.name+" could not be compiled when running in runtime-only mode")},fn:function(Xe){var Ke=Oe[Xe];return Ke.decorator=Oe[Xe+"_d"],Ke},programs:[],program:function(Xe,Ke,He,Qe,pt){var Mt=this.programs[Xe],wt=this.fn(Xe);return Ke||pt||Qe||He?Mt=xe(this,Xe,wt,Ke,He,Qe,pt):Mt||(Mt=this.programs[Xe]=xe(this,Xe,wt)),Mt},data:function(Xe,Ke){for(;Xe&&Ke--;)Xe=Xe._parent;return Xe},mergeIfNeeded:function(Xe,Ke){var He=Xe||Ke;return Xe&&Ke&&Xe!==Ke&&(He=ce.extend({},Ke,Xe)),He},nullContext:Object.seal({}),noop:ze.VM.noop,compilerInfo:Oe.compiler};function Fe(Xe){var Ke=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],He=Ke.data;Fe._setup(Ke),!Ke.partial&&Oe.useData&&(He=Se(Xe,He));var Qe=void 0,pt=Oe.useBlockParams?[]:void 0;function Mt(wt){return""+Oe.main(De,wt,De.helpers,De.partials,He,pt,Qe)}return Oe.useDepths&&(Qe=Ke.depths?Xe!=Ke.depths[0]?[Xe].concat(Ke.depths):Ke.depths:[Xe]),(Mt=Ce(Oe.main,Mt,De,Ke.depths||[],He,pt))(Xe,Ke)}return Fe.isTop=!0,Fe._setup=function(Xe){if(Xe.partial)De.protoAccessControl=Xe.protoAccessControl,De.helpers=Xe.helpers,De.partials=Xe.partials,De.decorators=Xe.decorators,De.hooks=Xe.hooks;else{var Ke=ce.extend({},ze.helpers,Xe.helpers);(function(Qe,pt){Object.keys(Qe).forEach(function(Mt){var wt=Qe[Mt];Qe[Mt]=function(bt,rt){var nt=rt.lookupProperty;return he.wrapHelper(bt,function(it){return ce.extend({lookupProperty:nt},it)})}(wt,pt)})})(Ke,De),De.helpers=Ke,Oe.usePartial&&(De.partials=De.mergeIfNeeded(Xe.partials,ze.partials)),(Oe.usePartial||Oe.useDecorators)&&(De.decorators=ce.extend({},ze.decorators,Xe.decorators)),De.hooks={},De.protoAccessControl=ye.createProtoAccessControl(Xe);var He=Xe.allowCallsToHelperMissing||Ue;we.moveHelperToHooks(De,"helperMissing",He),we.moveHelperToHooks(De,"blockHelperMissing",He)}},Fe._child=function(Xe,Ke,He,Qe){if(Oe.useBlockParams&&!He)throw new Ee.default("must pass block params");if(Oe.useDepths&&!Qe)throw new Ee.default("must pass parent depths");return xe(De,Xe,Oe[Xe],Ke,0,He,Qe)},Fe},Q.wrapProgram=xe,Q.resolvePartial=function(Oe,ze,Ue){return Oe?Oe.call||Ue.name||(Ue.name=Oe,Oe=Ue.partials[Oe]):Oe=Ue.name==="@partial-block"?Ue.data["partial-block"]:Ue.partials[Ue.name],Oe},Q.invokePartial=function(Oe,ze,Ue){var De=Ue.data&&Ue.data["partial-block"];Ue.partial=!0,Ue.ids&&(Ue.data.contextPath=Ue.ids[0]||Ue.data.contextPath);var Fe=void 0;if(Ue.fn&&Ue.fn!==Te&&function(){Ue.data=j.createFrame(Ue.data);var Xe=Ue.fn;Fe=Ue.data["partial-block"]=function(Ke){var He=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return He.data=j.createFrame(He.data),He.data["partial-block"]=De,Xe(Ke,He)},Xe.partials&&(Ue.partials=ce.extend({},Ue.partials,Xe.partials))}(),Oe===void 0&&Fe&&(Oe=Fe),Oe===void 0)throw new Ee.default("The partial "+Ue.name+" could not be found");if(Oe instanceof Function)return Oe(ze,Ue)},Q.noop=Te;var _e,ce=function(Oe){if(Oe&&Oe.__esModule)return Oe;var ze={};if(Oe!=null)for(var Ue in Oe)Object.prototype.hasOwnProperty.call(Oe,Ue)&&(ze[Ue]=Oe[Ue]);return ze.default=Oe,ze}(V(2392)),ne=V(8728),Ee=(_e=ne)&&_e.__esModule?_e:{default:_e},j=V(2067),we=V(2638),he=V(5005),ye=V(6293);function xe(Oe,ze,Ue,De,Fe,Xe,Ke){function He(Qe){var pt=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],Mt=Ke;return!Ke||Qe==Ke[0]||Qe===Oe.nullContext&&Ke[0]===null||(Mt=[Qe].concat(Ke)),Ue(Oe,Qe,Oe.helpers,Oe.partials,pt.data||De,Xe&&[pt.blockParams].concat(Xe),Mt)}return(He=Ce(Ue,He,Oe,Ke,De,Xe)).program=ze,He.depth=Ke?Ke.length:0,He.blockParams=Fe||0,He}function Te(){return""}function Se(Oe,ze){return ze&&"root"in ze||((ze=ze?j.createFrame(ze):{}).root=Oe),ze}function Ce(Oe,ze,Ue,De,Fe,Xe){if(Oe.decorator){var Ke={};ze=Oe.decorator(ze,Ke,Ue,De&&De[0],Fe,Xe,De),ce.extend(ze,Ke)}return ze}},5558:function(q,Q){function V(_e){this.string=_e}Q.__esModule=!0,V.prototype.toString=V.prototype.toHTML=function(){return""+this.string},Q.default=V,q.exports=Q.default},2392:function(q,Q){Q.__esModule=!0,Q.extend=Ee,Q.indexOf=function(ye,xe){for(var Te=0,Se=ye.length;Te<Se;Te++)if(ye[Te]===xe)return Te;return-1},Q.escapeExpression=function(ye){if(typeof ye!="string"){if(ye&&ye.toHTML)return ye.toHTML();if(ye==null)return"";if(!ye)return ye+"";ye=""+ye}return ce.test(ye)?ye.replace(_e,ne):ye},Q.isEmpty=function(ye){return!ye&&ye!==0||!(!he(ye)||ye.length!==0)},Q.createFrame=function(ye){var xe=Ee({},ye);return xe._parent=ye,xe},Q.blockParams=function(ye,xe){return ye.path=xe,ye},Q.appendContextPath=function(ye,xe){return(ye?ye+".":"")+xe};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},_e=/[&<>"'`=]/g,ce=/[&<>"'`=]/;function ne(ye){return V[ye]}function Ee(ye){for(var xe=1;xe<arguments.length;xe++)for(var Te in arguments[xe])Object.prototype.hasOwnProperty.call(arguments[xe],Te)&&(ye[Te]=arguments[xe][Te]);return ye}var j=Object.prototype.toString;Q.toString=j;var we=function(ye){return typeof ye=="function"};we(/x/)&&(Q.isFunction=we=function(ye){return typeof ye=="function"&&j.call(ye)==="[object Function]"}),Q.isFunction=we;var he=Array.isArray||function(ye){return!(!ye||typeof ye!="object")&&j.call(ye)==="[object Array]"};Q.isArray=he},4204:function(q,Q,V){var _e,ce;_e=[V(7937),V(5040),V(3566)],(ce=function(ne,Ee,j){return function(we,he,ye){var xe=function(Te,Se){return we.js_beautify(Te,Se)};return xe.js=we.js_beautify,xe.css=he.css_beautify,xe.html=ye.html_beautify,xe.js_beautify=we.js_beautify,xe.css_beautify=he.css_beautify,xe.html_beautify=ye.html_beautify,xe}(ne,Ee,j)}.apply(Q,_e))===void 0||(q.exports=ce)},5040:function(q,Q){var V;(function(){var _e;(function(){var ne=[,,function(we){function he(Te){this.__parent=Te,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ye(Te,Se){this.__cache=[""],this.__indent_size=Te.indent_size,this.__indent_string=Te.indent_char,Te.indent_with_tabs||(this.__indent_string=new Array(Te.indent_size+1).join(Te.indent_char)),Se=Se||"",Te.indent_level>0&&(Se=new Array(Te.indent_level+1).join(this.__indent_string)),this.__base_string=Se,this.__base_string_length=Se.length}function xe(Te,Se){this.__indent_cache=new ye(Te,Se),this.raw=!1,this._end_with_newline=Te.end_with_newline,this.indent_size=Te.indent_size,this.wrap_line_length=Te.wrap_line_length,this.indent_empty_lines=Te.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new he(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}he.prototype.clone_empty=function(){var Te=new he(this.__parent);return Te.set_indent(this.__indent_count,this.__alignment_count),Te},he.prototype.item=function(Te){return Te<0?this.__items[this.__items.length+Te]:this.__items[Te]},he.prototype.has_match=function(Te){for(var Se=this.__items.length-1;Se>=0;Se--)if(this.__items[Se].match(Te))return!0;return!1},he.prototype.set_indent=function(Te,Se){this.is_empty()&&(this.__indent_count=Te||0,this.__alignment_count=Se||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},he.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},he.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},he.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Te=this.__parent.current_line;return Te.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Te.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Te.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Te.__items[0]===" "&&(Te.__items.splice(0,1),Te.__character_count-=1),!0}return!1},he.prototype.is_empty=function(){return this.__items.length===0},he.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},he.prototype.push=function(Te){this.__items.push(Te);var Se=Te.lastIndexOf(`
`);Se!==-1?this.__character_count=Te.length-Se:this.__character_count+=Te.length},he.prototype.pop=function(){var Te=null;return this.is_empty()||(Te=this.__items.pop(),this.__character_count-=Te.length),Te},he.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},he.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},he.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},he.prototype.toString=function(){var Te="";return this.is_empty()?this.__parent.indent_empty_lines&&(Te=this.__parent.get_indent_string(this.__indent_count)):(Te=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Te+=this.__items.join("")),Te},ye.prototype.get_indent_size=function(Te,Se){var Ce=this.__base_string_length;return Se=Se||0,Te<0&&(Ce=0),Ce+=Te*this.__indent_size,Ce+=Se},ye.prototype.get_indent_string=function(Te,Se){var Ce=this.__base_string;return Se=Se||0,Te<0&&(Te=0,Ce=""),Se+=Te*this.__indent_size,this.__ensure_cache(Se),Ce+=this.__cache[Se]},ye.prototype.__ensure_cache=function(Te){for(;Te>=this.__cache.length;)this.__add_column()},ye.prototype.__add_column=function(){var Te=this.__cache.length,Se=0,Ce="";this.__indent_size&&Te>=this.__indent_size&&(Te-=(Se=Math.floor(Te/this.__indent_size))*this.__indent_size,Ce=new Array(Se+1).join(this.__indent_string)),Te&&(Ce+=new Array(Te+1).join(" ")),this.__cache.push(Ce)},xe.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},xe.prototype.get_line_number=function(){return this.__lines.length},xe.prototype.get_indent_string=function(Te,Se){return this.__indent_cache.get_indent_string(Te,Se)},xe.prototype.get_indent_size=function(Te,Se){return this.__indent_cache.get_indent_size(Te,Se)},xe.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},xe.prototype.add_new_line=function(Te){return!(this.is_empty()||!Te&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},xe.prototype.get_code=function(Te){this.trim(!0);var Se=this.current_line.pop();Se&&(Se[Se.length-1]===`
`&&(Se=Se.replace(/\n+$/g,"")),this.current_line.push(Se)),this._end_with_newline&&this.__add_outputline();var Ce=this.__lines.join(`
`);return Te!==`
`&&(Ce=Ce.replace(/[\n]/g,Te)),Ce},xe.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},xe.prototype.set_indent=function(Te,Se){return Te=Te||0,Se=Se||0,this.next_line.set_indent(Te,Se),this.__lines.length>1?(this.current_line.set_indent(Te,Se),!0):(this.current_line.set_indent(),!1)},xe.prototype.add_raw_token=function(Te){for(var Se=0;Se<Te.newlines;Se++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Te.whitespace_before),this.current_line.push(Te.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},xe.prototype.add_token=function(Te){this.__add_space_before_token(),this.current_line.push(Te),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},xe.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},xe.prototype.remove_indent=function(Te){for(var Se=this.__lines.length;Te<Se;)this.__lines[Te]._remove_indent(),Te++;this.current_line._remove_wrap_indent()},xe.prototype.trim=function(Te){for(Te=Te!==void 0&&Te,this.current_line.trim();Te&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},xe.prototype.just_added_newline=function(){return this.current_line.is_empty()},xe.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},xe.prototype.ensure_empty_line_above=function(Te,Se){for(var Ce=this.__lines.length-2;Ce>=0;){var Oe=this.__lines[Ce];if(Oe.is_empty())break;if(Oe.item(0).indexOf(Te)!==0&&Oe.item(-1)!==Se){this.__lines.splice(Ce+1,0,new he(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Ce--}},we.exports.Output=xe},,,,function(we){function he(Te,Se){this.raw_options=ye(Te,Se),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ye(Te,Se){var Ce,Oe={};for(Ce in Te=xe(Te))Ce!==Se&&(Oe[Ce]=Te[Ce]);if(Se&&Te[Se])for(Ce in Te[Se])Oe[Ce]=Te[Se][Ce];return Oe}function xe(Te){var Se,Ce={};for(Se in Te)Ce[Se.replace(/-/g,"_")]=Te[Se];return Ce}he.prototype._get_array=function(Te,Se){var Ce=this.raw_options[Te],Oe=Se||[];return typeof Ce=="object"?Ce!==null&&typeof Ce.concat=="function"&&(Oe=Ce.concat()):typeof Ce=="string"&&(Oe=Ce.split(/[^a-zA-Z0-9_\/\-]+/)),Oe},he.prototype._get_boolean=function(Te,Se){var Ce=this.raw_options[Te];return Ce===void 0?!!Se:!!Ce},he.prototype._get_characters=function(Te,Se){var Ce=this.raw_options[Te],Oe=Se||"";return typeof Ce=="string"&&(Oe=Ce.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Oe},he.prototype._get_number=function(Te,Se){var Ce=this.raw_options[Te];Se=parseInt(Se,10),isNaN(Se)&&(Se=0);var Oe=parseInt(Ce,10);return isNaN(Oe)&&(Oe=Se),Oe},he.prototype._get_selection=function(Te,Se,Ce){var Oe=this._get_selection_list(Te,Se,Ce);if(Oe.length!==1)throw new Error("Invalid Option Value: The option '"+Te+`' can only be one of the following values:
`+Se+`
You passed in: '`+this.raw_options[Te]+"'");return Oe[0]},he.prototype._get_selection_list=function(Te,Se,Ce){if(!Se||Se.length===0)throw new Error("Selection list cannot be empty.");if(Ce=Ce||[Se[0]],!this._is_valid_selection(Ce,Se))throw new Error("Invalid Default Value!");var Oe=this._get_array(Te,Ce);if(!this._is_valid_selection(Oe,Se))throw new Error("Invalid Option Value: The option '"+Te+`' can contain only the following values:
`+Se+`
You passed in: '`+this.raw_options[Te]+"'");return Oe},he.prototype._is_valid_selection=function(Te,Se){return Te.length&&Se.length&&!Te.some(function(Ce){return Se.indexOf(Ce)===-1})},we.exports.Options=he,we.exports.normalizeOpts=xe,we.exports.mergeOpts=ye},,function(we){var he=RegExp.prototype.hasOwnProperty("sticky");function ye(xe){this.__input=xe||"",this.__input_length=this.__input.length,this.__position=0}ye.prototype.restart=function(){this.__position=0},ye.prototype.back=function(){this.__position>0&&(this.__position-=1)},ye.prototype.hasNext=function(){return this.__position<this.__input_length},ye.prototype.next=function(){var xe=null;return this.hasNext()&&(xe=this.__input.charAt(this.__position),this.__position+=1),xe},ye.prototype.peek=function(xe){var Te=null;return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__input_length&&(Te=this.__input.charAt(xe)),Te},ye.prototype.__match=function(xe,Te){xe.lastIndex=Te;var Se=xe.exec(this.__input);return!Se||he&&xe.sticky||Se.index!==Te&&(Se=null),Se},ye.prototype.test=function(xe,Te){return Te=Te||0,(Te+=this.__position)>=0&&Te<this.__input_length&&!!this.__match(xe,Te)},ye.prototype.testChar=function(xe,Te){var Se=this.peek(Te);return xe.lastIndex=0,Se!==null&&xe.test(Se)},ye.prototype.match=function(xe){var Te=this.__match(xe,this.__position);return Te?this.__position+=Te[0].length:Te=null,Te},ye.prototype.read=function(xe,Te,Se){var Ce,Oe="";return xe&&(Ce=this.match(xe))&&(Oe+=Ce[0]),!Te||!Ce&&xe||(Oe+=this.readUntil(Te,Se)),Oe},ye.prototype.readUntil=function(xe,Te){var Se,Ce=this.__position;xe.lastIndex=this.__position;var Oe=xe.exec(this.__input);return Oe?(Ce=Oe.index,Te&&(Ce+=Oe[0].length)):Ce=this.__input_length,Se=this.__input.substring(this.__position,Ce),this.__position=Ce,Se},ye.prototype.readUntilAfter=function(xe){return this.readUntil(xe,!0)},ye.prototype.get_regexp=function(xe,Te){var Se=null,Ce="g";return Te&&he&&(Ce="y"),typeof xe=="string"&&xe!==""?Se=new RegExp(xe,Ce):xe&&(Se=new RegExp(xe.source,Ce)),Se},ye.prototype.get_literal_regexp=function(xe){return RegExp(xe.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ye.prototype.peekUntilAfter=function(xe){var Te=this.__position,Se=this.readUntilAfter(xe);return this.__position=Te,Se},ye.prototype.lookBack=function(xe){var Te=this.__position-1;return Te>=xe.length&&this.__input.substring(Te-xe.length,Te).toLowerCase()===xe},we.exports.InputScanner=ye},,,,,function(we){function he(ye,xe){ye=typeof ye=="string"?ye:ye.source,xe=typeof xe=="string"?xe:xe.source,this.__directives_block_pattern=new RegExp(ye+/ beautify( \w+[:]\w+)+ /.source+xe,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ye+/\sbeautify\signore:end\s/.source+xe,"g")}he.prototype.get_directives=function(ye){if(!ye.match(this.__directives_block_pattern))return null;var xe={};this.__directive_pattern.lastIndex=0;for(var Te=this.__directive_pattern.exec(ye);Te;)xe[Te[1]]=Te[2],Te=this.__directive_pattern.exec(ye);return xe},he.prototype.readIgnored=function(ye){return ye.readUntilAfter(this.__directives_end_ignore_pattern)},we.exports.Directives=he},,function(we,he,ye){var xe=ye(16).Beautifier,Te=ye(17).Options;we.exports=function(Se,Ce){return new xe(Se,Ce).beautify()},we.exports.defaultOptions=function(){return new Te}},function(we,he,ye){var xe=ye(17).Options,Te=ye(2).Output,Se=ye(8).InputScanner,Ce=new(ye(13)).Directives(/\/\*/,/\*\//),Oe=/\r\n|[\r\n]/,ze=/\r\n|[\r\n]/g,Ue=/\s/,De=/(?:\s|\n)+/g,Fe=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,Xe=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function Ke(He,Qe){this._source_text=He||"",this._options=new xe(Qe),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}Ke.prototype.eatString=function(He){var Qe="";for(this._ch=this._input.next();this._ch;){if(Qe+=this._ch,this._ch==="\\")Qe+=this._input.next();else if(He.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return Qe},Ke.prototype.eatWhitespace=function(He){for(var Qe=Ue.test(this._input.peek()),pt=0;Ue.test(this._input.peek());)this._ch=this._input.next(),He&&this._ch===`
`&&(pt===0||pt<this._options.max_preserve_newlines)&&(pt++,this._output.add_new_line(!0));return Qe},Ke.prototype.foundNestedPseudoClass=function(){for(var He=0,Qe=1,pt=this._input.peek(Qe);pt;){if(pt==="{")return!0;if(pt==="(")He+=1;else if(pt===")"){if(He===0)return!1;He-=1}else if(pt===";"||pt==="}")return!1;Qe++,pt=this._input.peek(Qe)}return!1},Ke.prototype.print_string=function(He){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(He)},Ke.prototype.preserveSingleSpace=function(He){He&&(this._output.space_before_token=!0)},Ke.prototype.indent=function(){this._indentLevel++},Ke.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},Ke.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var He=this._source_text,Qe=this._options.eol;Qe==="auto"&&(Qe=`
`,He&&Oe.test(He||"")&&(Qe=He.match(Oe)[0]));var pt=(He=He.replace(ze,`
`)).match(/^[\t ]*/)[0];this._output=new Te(this._options,pt),this._input=new Se(He),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var Mt,wt,bt=0,rt=!1,nt=!1,it=!1,dt=!1,lt=!1,ft=!1,xt=this._ch,ht=!1;Mt=this._input.read(De)!=="",wt=xt,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),xt=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var Vt=this._input.read(Fe),st=Ce.get_directives(Vt);st&&st.ignore==="start"&&(Vt+=Ce.readIgnored(this._input)),this.print_string(Vt),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(Xe)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(Mt),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var Dt=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);Dt.match(/[ :]$/)&&(Dt=this.eatString(": ").replace(/\s$/,""),this.print_string(Dt),this._output.space_before_token=!0),(Dt=Dt.replace(/\s$/,""))==="extend"?dt=!0:Dt==="import"&&(lt=!0),Dt in this.NESTED_AT_RULE?(this._nestedLevel+=1,Dt in this.CONDITIONAL_GROUP_RULE&&(it=!0)):rt||bt!==0||Dt.indexOf(":")===-1||(nt=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(Mt),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")nt&&(nt=!1,this.outdent()),it?(it=!1,rt=this._indentLevel>=this._nestedLevel):rt=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&rt&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(wt==="("?this._output.space_before_token=!1:wt!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),wt==="{"&&this._output.trim(!0),lt=!1,dt=!1,nt&&(this.outdent(),nt=!1),this.print_string(this._ch),rt=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var ln=0;ln<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;ln++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[ln])){ht=!0;break}!rt&&!it||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||dt||bt!==0?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),nt||(nt=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if(this._ch==='"'||this._ch==="'"){var In=wt==='"'||wt==="'";this.preserveSingleSpace(In||Mt),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")ht=!1,bt===0?(nt&&(this.outdent(),nt=!1),dt=!1,lt=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),bt++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),bt&&(bt--,this.outdent()));else{var on=!1;this._input.lookBack("with")&&(on=!0),this.preserveSingleSpace(Mt||on),this.print_string(this._ch),nt&&wt==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),ft=!0):(this.eatWhitespace(),bt++,this.indent())}else if(this._ch===")")bt&&(bt--,this.outdent()),ft&&this._input.peek()===";"&&this._options.selector_separator_newline&&(ft=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||nt&&!ft||bt!==0||lt||dt?this._output.space_before_token=!0:this._output.add_new_line();else if(this._ch!==">"&&this._ch!=="+"&&this._ch!=="~"||nt||bt!==0)if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(Mt),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),Ue.test(this._ch)&&(this._ch="");else if(this._ch!=="!"||this._input.lookBack("\\")){var an=wt==='"'||wt==="'";this.preserveSingleSpace(an||Mt),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&ht&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Ue.test(this._ch)&&(this._ch=""));return this._output.get_code(Qe)},we.exports.Beautifier=Ke},function(we,he,ye){var xe=ye(6).Options;function Te(Se){xe.call(this,Se,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var Ce=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||Ce;var Oe=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var ze=0;ze<Oe.length;ze++)Oe[ze]!=="expand"?this.brace_style="collapse":this.brace_style=Oe[ze]}Te.prototype=new xe,we.exports.Options=Te}],Ee={},j=function we(he){var ye=Ee[he];if(ye!==void 0)return ye.exports;var xe=Ee[he]={exports:{}};return ne[he](xe,xe.exports,we),xe.exports}(15);_e=j})();var ce=_e;(V=function(){return{css_beautify:ce}}.apply(Q,[]))===void 0||(q.exports=V)})()},3566:function(q,Q,V){var _e,ce;(function(){var ne;(function(){var j=[,,function(ye){function xe(Ce){this.__parent=Ce,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function Te(Ce,Oe){this.__cache=[""],this.__indent_size=Ce.indent_size,this.__indent_string=Ce.indent_char,Ce.indent_with_tabs||(this.__indent_string=new Array(Ce.indent_size+1).join(Ce.indent_char)),Oe=Oe||"",Ce.indent_level>0&&(Oe=new Array(Ce.indent_level+1).join(this.__indent_string)),this.__base_string=Oe,this.__base_string_length=Oe.length}function Se(Ce,Oe){this.__indent_cache=new Te(Ce,Oe),this.raw=!1,this._end_with_newline=Ce.end_with_newline,this.indent_size=Ce.indent_size,this.wrap_line_length=Ce.wrap_line_length,this.indent_empty_lines=Ce.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new xe(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}xe.prototype.clone_empty=function(){var Ce=new xe(this.__parent);return Ce.set_indent(this.__indent_count,this.__alignment_count),Ce},xe.prototype.item=function(Ce){return Ce<0?this.__items[this.__items.length+Ce]:this.__items[Ce]},xe.prototype.has_match=function(Ce){for(var Oe=this.__items.length-1;Oe>=0;Oe--)if(this.__items[Oe].match(Ce))return!0;return!1},xe.prototype.set_indent=function(Ce,Oe){this.is_empty()&&(this.__indent_count=Ce||0,this.__alignment_count=Oe||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},xe.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},xe.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},xe.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Ce=this.__parent.current_line;return Ce.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Ce.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Ce.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Ce.__items[0]===" "&&(Ce.__items.splice(0,1),Ce.__character_count-=1),!0}return!1},xe.prototype.is_empty=function(){return this.__items.length===0},xe.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},xe.prototype.push=function(Ce){this.__items.push(Ce);var Oe=Ce.lastIndexOf(`
`);Oe!==-1?this.__character_count=Ce.length-Oe:this.__character_count+=Ce.length},xe.prototype.pop=function(){var Ce=null;return this.is_empty()||(Ce=this.__items.pop(),this.__character_count-=Ce.length),Ce},xe.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},xe.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},xe.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},xe.prototype.toString=function(){var Ce="";return this.is_empty()?this.__parent.indent_empty_lines&&(Ce=this.__parent.get_indent_string(this.__indent_count)):(Ce=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Ce+=this.__items.join("")),Ce},Te.prototype.get_indent_size=function(Ce,Oe){var ze=this.__base_string_length;return Oe=Oe||0,Ce<0&&(ze=0),ze+=Ce*this.__indent_size,ze+=Oe},Te.prototype.get_indent_string=function(Ce,Oe){var ze=this.__base_string;return Oe=Oe||0,Ce<0&&(Ce=0,ze=""),Oe+=Ce*this.__indent_size,this.__ensure_cache(Oe),ze+=this.__cache[Oe]},Te.prototype.__ensure_cache=function(Ce){for(;Ce>=this.__cache.length;)this.__add_column()},Te.prototype.__add_column=function(){var Ce=this.__cache.length,Oe=0,ze="";this.__indent_size&&Ce>=this.__indent_size&&(Ce-=(Oe=Math.floor(Ce/this.__indent_size))*this.__indent_size,ze=new Array(Oe+1).join(this.__indent_string)),Ce&&(ze+=new Array(Ce+1).join(" ")),this.__cache.push(ze)},Se.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},Se.prototype.get_line_number=function(){return this.__lines.length},Se.prototype.get_indent_string=function(Ce,Oe){return this.__indent_cache.get_indent_string(Ce,Oe)},Se.prototype.get_indent_size=function(Ce,Oe){return this.__indent_cache.get_indent_size(Ce,Oe)},Se.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},Se.prototype.add_new_line=function(Ce){return!(this.is_empty()||!Ce&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},Se.prototype.get_code=function(Ce){this.trim(!0);var Oe=this.current_line.pop();Oe&&(Oe[Oe.length-1]===`
`&&(Oe=Oe.replace(/\n+$/g,"")),this.current_line.push(Oe)),this._end_with_newline&&this.__add_outputline();var ze=this.__lines.join(`
`);return Ce!==`
`&&(ze=ze.replace(/[\n]/g,Ce)),ze},Se.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},Se.prototype.set_indent=function(Ce,Oe){return Ce=Ce||0,Oe=Oe||0,this.next_line.set_indent(Ce,Oe),this.__lines.length>1?(this.current_line.set_indent(Ce,Oe),!0):(this.current_line.set_indent(),!1)},Se.prototype.add_raw_token=function(Ce){for(var Oe=0;Oe<Ce.newlines;Oe++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Ce.whitespace_before),this.current_line.push(Ce.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},Se.prototype.add_token=function(Ce){this.__add_space_before_token(),this.current_line.push(Ce),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},Se.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},Se.prototype.remove_indent=function(Ce){for(var Oe=this.__lines.length;Ce<Oe;)this.__lines[Ce]._remove_indent(),Ce++;this.current_line._remove_wrap_indent()},Se.prototype.trim=function(Ce){for(Ce=Ce!==void 0&&Ce,this.current_line.trim();Ce&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},Se.prototype.just_added_newline=function(){return this.current_line.is_empty()},Se.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},Se.prototype.ensure_empty_line_above=function(Ce,Oe){for(var ze=this.__lines.length-2;ze>=0;){var Ue=this.__lines[ze];if(Ue.is_empty())break;if(Ue.item(0).indexOf(Ce)!==0&&Ue.item(-1)!==Oe){this.__lines.splice(ze+1,0,new xe(this)),this.previous_line=this.__lines[this.__lines.length-2];break}ze--}},ye.exports.Output=Se},function(ye){ye.exports.Token=function(xe,Te,Se,Ce){this.type=xe,this.text=Te,this.comments_before=null,this.newlines=Se||0,this.whitespace_before=Ce||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(ye){function xe(Ce,Oe){this.raw_options=Te(Ce,Oe),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function Te(Ce,Oe){var ze,Ue={};for(ze in Ce=Se(Ce))ze!==Oe&&(Ue[ze]=Ce[ze]);if(Oe&&Ce[Oe])for(ze in Ce[Oe])Ue[ze]=Ce[Oe][ze];return Ue}function Se(Ce){var Oe,ze={};for(Oe in Ce)ze[Oe.replace(/-/g,"_")]=Ce[Oe];return ze}xe.prototype._get_array=function(Ce,Oe){var ze=this.raw_options[Ce],Ue=Oe||[];return typeof ze=="object"?ze!==null&&typeof ze.concat=="function"&&(Ue=ze.concat()):typeof ze=="string"&&(Ue=ze.split(/[^a-zA-Z0-9_\/\-]+/)),Ue},xe.prototype._get_boolean=function(Ce,Oe){var ze=this.raw_options[Ce];return ze===void 0?!!Oe:!!ze},xe.prototype._get_characters=function(Ce,Oe){var ze=this.raw_options[Ce],Ue=Oe||"";return typeof ze=="string"&&(Ue=ze.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Ue},xe.prototype._get_number=function(Ce,Oe){var ze=this.raw_options[Ce];Oe=parseInt(Oe,10),isNaN(Oe)&&(Oe=0);var Ue=parseInt(ze,10);return isNaN(Ue)&&(Ue=Oe),Ue},xe.prototype._get_selection=function(Ce,Oe,ze){var Ue=this._get_selection_list(Ce,Oe,ze);if(Ue.length!==1)throw new Error("Invalid Option Value: The option '"+Ce+`' can only be one of the following values:
`+Oe+`
You passed in: '`+this.raw_options[Ce]+"'");return Ue[0]},xe.prototype._get_selection_list=function(Ce,Oe,ze){if(!Oe||Oe.length===0)throw new Error("Selection list cannot be empty.");if(ze=ze||[Oe[0]],!this._is_valid_selection(ze,Oe))throw new Error("Invalid Default Value!");var Ue=this._get_array(Ce,ze);if(!this._is_valid_selection(Ue,Oe))throw new Error("Invalid Option Value: The option '"+Ce+`' can contain only the following values:
`+Oe+`
You passed in: '`+this.raw_options[Ce]+"'");return Ue},xe.prototype._is_valid_selection=function(Ce,Oe){return Ce.length&&Oe.length&&!Ce.some(function(ze){return Oe.indexOf(ze)===-1})},ye.exports.Options=xe,ye.exports.normalizeOpts=Se,ye.exports.mergeOpts=Te},,function(ye){var xe=RegExp.prototype.hasOwnProperty("sticky");function Te(Se){this.__input=Se||"",this.__input_length=this.__input.length,this.__position=0}Te.prototype.restart=function(){this.__position=0},Te.prototype.back=function(){this.__position>0&&(this.__position-=1)},Te.prototype.hasNext=function(){return this.__position<this.__input_length},Te.prototype.next=function(){var Se=null;return this.hasNext()&&(Se=this.__input.charAt(this.__position),this.__position+=1),Se},Te.prototype.peek=function(Se){var Ce=null;return Se=Se||0,(Se+=this.__position)>=0&&Se<this.__input_length&&(Ce=this.__input.charAt(Se)),Ce},Te.prototype.__match=function(Se,Ce){Se.lastIndex=Ce;var Oe=Se.exec(this.__input);return!Oe||xe&&Se.sticky||Oe.index!==Ce&&(Oe=null),Oe},Te.prototype.test=function(Se,Ce){return Ce=Ce||0,(Ce+=this.__position)>=0&&Ce<this.__input_length&&!!this.__match(Se,Ce)},Te.prototype.testChar=function(Se,Ce){var Oe=this.peek(Ce);return Se.lastIndex=0,Oe!==null&&Se.test(Oe)},Te.prototype.match=function(Se){var Ce=this.__match(Se,this.__position);return Ce?this.__position+=Ce[0].length:Ce=null,Ce},Te.prototype.read=function(Se,Ce,Oe){var ze,Ue="";return Se&&(ze=this.match(Se))&&(Ue+=ze[0]),!Ce||!ze&&Se||(Ue+=this.readUntil(Ce,Oe)),Ue},Te.prototype.readUntil=function(Se,Ce){var Oe,ze=this.__position;Se.lastIndex=this.__position;var Ue=Se.exec(this.__input);return Ue?(ze=Ue.index,Ce&&(ze+=Ue[0].length)):ze=this.__input_length,Oe=this.__input.substring(this.__position,ze),this.__position=ze,Oe},Te.prototype.readUntilAfter=function(Se){return this.readUntil(Se,!0)},Te.prototype.get_regexp=function(Se,Ce){var Oe=null,ze="g";return Ce&&xe&&(ze="y"),typeof Se=="string"&&Se!==""?Oe=new RegExp(Se,ze):Se&&(Oe=new RegExp(Se.source,ze)),Oe},Te.prototype.get_literal_regexp=function(Se){return RegExp(Se.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},Te.prototype.peekUntilAfter=function(Se){var Ce=this.__position,Oe=this.readUntilAfter(Se);return this.__position=Ce,Oe},Te.prototype.lookBack=function(Se){var Ce=this.__position-1;return Ce>=Se.length&&this.__input.substring(Ce-Se.length,Ce).toLowerCase()===Se},ye.exports.InputScanner=Te},function(ye,xe,Te){var Se=Te(8).InputScanner,Ce=Te(3).Token,Oe=Te(10).TokenStream,ze=Te(11).WhitespacePattern,Ue={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},De=function(Fe,Xe){this._input=new Se(Fe),this._options=Xe||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new ze(this._input)};De.prototype.tokenize=function(){var Fe;this._input.restart(),this.__tokens=new Oe,this._reset();for(var Xe=new Ce(Ue.START,""),Ke=null,He=[],Qe=new Oe;Xe.type!==Ue.EOF;){for(Fe=this._get_next_token(Xe,Ke);this._is_comment(Fe);)Qe.add(Fe),Fe=this._get_next_token(Xe,Ke);Qe.isEmpty()||(Fe.comments_before=Qe,Qe=new Oe),Fe.parent=Ke,this._is_opening(Fe)?(He.push(Ke),Ke=Fe):Ke&&this._is_closing(Fe,Ke)&&(Fe.opened=Ke,Ke.closed=Fe,Ke=He.pop(),Fe.parent=Ke),Fe.previous=Xe,Xe.next=Fe,this.__tokens.add(Fe),Xe=Fe}return this.__tokens},De.prototype._is_first_token=function(){return this.__tokens.isEmpty()},De.prototype._reset=function(){},De.prototype._get_next_token=function(Fe,Xe){this._readWhitespace();var Ke=this._input.read(/.+/g);return Ke?this._create_token(Ue.RAW,Ke):this._create_token(Ue.EOF,"")},De.prototype._is_comment=function(Fe){return!1},De.prototype._is_opening=function(Fe){return!1},De.prototype._is_closing=function(Fe,Xe){return!1},De.prototype._create_token=function(Fe,Xe){return new Ce(Fe,Xe,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},De.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},ye.exports.Tokenizer=De,ye.exports.TOKEN=Ue},function(ye){function xe(Te){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=Te}xe.prototype.restart=function(){this.__position=0},xe.prototype.isEmpty=function(){return this.__tokens_length===0},xe.prototype.hasNext=function(){return this.__position<this.__tokens_length},xe.prototype.next=function(){var Te=null;return this.hasNext()&&(Te=this.__tokens[this.__position],this.__position+=1),Te},xe.prototype.peek=function(Te){var Se=null;return Te=Te||0,(Te+=this.__position)>=0&&Te<this.__tokens_length&&(Se=this.__tokens[Te]),Se},xe.prototype.add=function(Te){this.__parent_token&&(Te.parent=this.__parent_token),this.__tokens.push(Te),this.__tokens_length+=1},ye.exports.TokenStream=xe},function(ye,xe,Te){var Se=Te(12).Pattern;function Ce(Oe,ze){Se.call(this,Oe,ze),ze?this._line_regexp=this._input.get_regexp(ze._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Ce.prototype=new Se,Ce.prototype.__set_whitespace_patterns=function(Oe,ze){Oe+="\\t ",ze+="\\n\\r",this._match_pattern=this._input.get_regexp("["+Oe+ze+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+ze+"]")},Ce.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var Oe=this._input.read(this._match_pattern);if(Oe===" ")this.whitespace_before_token=" ";else if(Oe){var ze=this.__split(this._newline_regexp,Oe);this.newline_count=ze.length-1,this.whitespace_before_token=ze[this.newline_count]}return Oe},Ce.prototype.matching=function(Oe,ze){var Ue=this._create();return Ue.__set_whitespace_patterns(Oe,ze),Ue._update(),Ue},Ce.prototype._create=function(){return new Ce(this._input,this)},Ce.prototype.__split=function(Oe,ze){Oe.lastIndex=0;for(var Ue=0,De=[],Fe=Oe.exec(ze);Fe;)De.push(ze.substring(Ue,Fe.index)),Ue=Fe.index+Fe[0].length,Fe=Oe.exec(ze);return Ue<ze.length?De.push(ze.substring(Ue,ze.length)):De.push(""),De},ye.exports.WhitespacePattern=Ce},function(ye){function xe(Te,Se){this._input=Te,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,Se&&(this._starting_pattern=this._input.get_regexp(Se._starting_pattern,!0),this._match_pattern=this._input.get_regexp(Se._match_pattern,!0),this._until_pattern=this._input.get_regexp(Se._until_pattern),this._until_after=Se._until_after)}xe.prototype.read=function(){var Te=this._input.read(this._starting_pattern);return this._starting_pattern&&!Te||(Te+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),Te},xe.prototype.read_match=function(){return this._input.match(this._match_pattern)},xe.prototype.until_after=function(Te){var Se=this._create();return Se._until_after=!0,Se._until_pattern=this._input.get_regexp(Te),Se._update(),Se},xe.prototype.until=function(Te){var Se=this._create();return Se._until_after=!1,Se._until_pattern=this._input.get_regexp(Te),Se._update(),Se},xe.prototype.starting_with=function(Te){var Se=this._create();return Se._starting_pattern=this._input.get_regexp(Te,!0),Se._update(),Se},xe.prototype.matching=function(Te){var Se=this._create();return Se._match_pattern=this._input.get_regexp(Te,!0),Se._update(),Se},xe.prototype._create=function(){return new xe(this._input,this)},xe.prototype._update=function(){},ye.exports.Pattern=xe},function(ye){function xe(Te,Se){Te=typeof Te=="string"?Te:Te.source,Se=typeof Se=="string"?Se:Se.source,this.__directives_block_pattern=new RegExp(Te+/ beautify( \w+[:]\w+)+ /.source+Se,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(Te+/\sbeautify\signore:end\s/.source+Se,"g")}xe.prototype.get_directives=function(Te){if(!Te.match(this.__directives_block_pattern))return null;var Se={};this.__directive_pattern.lastIndex=0;for(var Ce=this.__directive_pattern.exec(Te);Ce;)Se[Ce[1]]=Ce[2],Ce=this.__directive_pattern.exec(Te);return Se},xe.prototype.readIgnored=function(Te){return Te.readUntilAfter(this.__directives_end_ignore_pattern)},ye.exports.Directives=xe},function(ye,xe,Te){var Se=Te(12).Pattern,Ce={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Oe(ze,Ue){Se.call(this,ze,Ue),this.__template_pattern=null,this._disabled=Object.assign({},Ce),this._excluded=Object.assign({},Ce),Ue&&(this.__template_pattern=this._input.get_regexp(Ue.__template_pattern),this._excluded=Object.assign(this._excluded,Ue._excluded),this._disabled=Object.assign(this._disabled,Ue._disabled));var De=new Se(ze);this.__patterns={handlebars_comment:De.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:De.starting_with(/{{{/).until_after(/}}}/),handlebars:De.starting_with(/{{/).until_after(/}}/),php:De.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:De.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:De.starting_with(/{%/).until_after(/%}/),django_value:De.starting_with(/{{/).until_after(/}}/),django_comment:De.starting_with(/{#/).until_after(/#}/),smarty:De.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:De.starting_with(/{\*/).until_after(/\*}/),smarty_literal:De.starting_with(/{literal}/).until_after(/{\/literal}/)}}Oe.prototype=new Se,Oe.prototype._create=function(){return new Oe(this._input,this)},Oe.prototype._update=function(){this.__set_templated_pattern()},Oe.prototype.disable=function(ze){var Ue=this._create();return Ue._disabled[ze]=!0,Ue._update(),Ue},Oe.prototype.read_options=function(ze){var Ue=this._create();for(var De in Ce)Ue._disabled[De]=ze.templating.indexOf(De)===-1;return Ue._update(),Ue},Oe.prototype.exclude=function(ze){var Ue=this._create();return Ue._excluded[ze]=!0,Ue._update(),Ue},Oe.prototype.read=function(){var ze="";ze=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Ue=this._read_template();Ue;)this._match_pattern?Ue+=this._input.read(this._match_pattern):Ue+=this._input.readUntil(this.__template_pattern),ze+=Ue,Ue=this._read_template();return this._until_after&&(ze+=this._input.readUntilAfter(this._until_pattern)),ze},Oe.prototype.__set_templated_pattern=function(){var ze=[];this._disabled.php||ze.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||ze.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||ze.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(ze.push(this.__patterns.django._starting_pattern.source),ze.push(this.__patterns.django_value._starting_pattern.source),ze.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||ze.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&ze.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+ze.join("|")+")")},Oe.prototype._read_template=function(){var ze="",Ue=this._input.peek();if(Ue==="<"){var De=this._input.peek(1);this._disabled.php||this._excluded.php||De!=="?"||(ze=ze||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||De!=="%"||(ze=ze||this.__patterns.erb.read())}else Ue==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(ze=(ze=(ze=ze||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(ze=ze||this.__patterns.django_value.read()),this._excluded.django||(ze=(ze=ze||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(ze=(ze=(ze=ze||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return ze},ye.exports.TemplatablePattern=Oe},,,,function(ye,xe,Te){var Se=Te(19).Beautifier,Ce=Te(20).Options;ye.exports=function(Oe,ze,Ue,De){return new Se(Oe,ze,Ue,De).beautify()},ye.exports.defaultOptions=function(){return new Ce}},function(ye,xe,Te){var Se=Te(20).Options,Ce=Te(2).Output,Oe=Te(21).Tokenizer,ze=Te(21).TOKEN,Ue=/\r\n|[\r\n]/,De=/\r\n|[\r\n]/g,Fe=function(rt,nt){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=rt.max_preserve_newlines,this.preserve_newlines=rt.preserve_newlines,this._output=new Ce(rt,nt)};Fe.prototype.current_line_has_match=function(rt){return this._output.current_line.has_match(rt)},Fe.prototype.set_space_before_token=function(rt,nt){this._output.space_before_token=rt,this._output.non_breaking_space=nt},Fe.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},Fe.prototype.add_raw_token=function(rt){this._output.add_raw_token(rt)},Fe.prototype.print_preserved_newlines=function(rt){var nt=0;rt.type!==ze.TEXT&&rt.previous.type!==ze.TEXT&&(nt=rt.newlines?1:0),this.preserve_newlines&&(nt=rt.newlines<this.max_preserve_newlines+1?rt.newlines:this.max_preserve_newlines+1);for(var it=0;it<nt;it++)this.print_newline(it>0);return nt!==0},Fe.prototype.traverse_whitespace=function(rt){return!(!rt.whitespace_before&&!rt.newlines)&&(this.print_preserved_newlines(rt)||(this._output.space_before_token=!0),!0)},Fe.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},Fe.prototype.print_newline=function(rt){this._output.add_new_line(rt)},Fe.prototype.print_token=function(rt){rt.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(rt.text))},Fe.prototype.indent=function(){this.indent_level++},Fe.prototype.get_full_indent=function(rt){return(rt=this.indent_level+(rt||0))<1?"":this._output.get_indent_string(rt)};var Xe=function(rt,nt){var it=null,dt=null;return nt.closed?(rt==="script"?it="text/javascript":rt==="style"&&(it="text/css"),it=function(lt){for(var ft=null,xt=lt.next;xt.type!==ze.EOF&&lt.closed!==xt;){if(xt.type===ze.ATTRIBUTE&&xt.text==="type"){xt.next&&xt.next.type===ze.EQUALS&&xt.next.next&&xt.next.next.type===ze.VALUE&&(ft=xt.next.next.text);break}xt=xt.next}return ft}(nt)||it,it.search("text/css")>-1?dt="css":it.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?dt="javascript":it.search(/(text|application|dojo)\/(x-)?(html)/)>-1?dt="html":it.search(/test\/null/)>-1&&(dt="null"),dt):null};function Ke(rt,nt){return nt.indexOf(rt)!==-1}function He(rt,nt,it){this.parent=rt||null,this.tag=nt?nt.tag_name:"",this.indent_level=it||0,this.parser_token=nt||null}function Qe(rt){this._printer=rt,this._current_frame=null}function pt(rt,nt,it,dt){this._source_text=rt||"",nt=nt||{},this._js_beautify=it,this._css_beautify=dt,this._tag_stack=null;var lt=new Se(nt,"html");this._options=lt,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Qe.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},Qe.prototype.record_tag=function(rt){var nt=new He(this._current_frame,rt,this._printer.indent_level);this._current_frame=nt},Qe.prototype._try_pop_frame=function(rt){var nt=null;return rt&&(nt=rt.parser_token,this._printer.indent_level=rt.indent_level,this._current_frame=rt.parent),nt},Qe.prototype._get_frame=function(rt,nt){for(var it=this._current_frame;it&&rt.indexOf(it.tag)===-1;){if(nt&&nt.indexOf(it.tag)!==-1){it=null;break}it=it.parent}return it},Qe.prototype.try_pop=function(rt,nt){var it=this._get_frame([rt],nt);return this._try_pop_frame(it)},Qe.prototype.indent_to_tag=function(rt){var nt=this._get_frame(rt);nt&&(this._printer.indent_level=nt.indent_level)},pt.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var rt=this._source_text,nt=this._options.eol;this._options.eol==="auto"&&(nt=`
`,rt&&Ue.test(rt)&&(nt=rt.match(Ue)[0]));var it=(rt=rt.replace(De,`
`)).match(/^[\t ]*/)[0],dt={text:"",type:""},lt=new Mt,ft=new Fe(this._options,it),xt=new Oe(rt,this._options).tokenize();this._tag_stack=new Qe(ft);for(var ht=null,Vt=xt.next();Vt.type!==ze.EOF;)Vt.type===ze.TAG_OPEN||Vt.type===ze.COMMENT?lt=ht=this._handle_tag_open(ft,Vt,lt,dt):Vt.type===ze.ATTRIBUTE||Vt.type===ze.EQUALS||Vt.type===ze.VALUE||Vt.type===ze.TEXT&&!lt.tag_complete?ht=this._handle_inside_tag(ft,Vt,lt,xt):Vt.type===ze.TAG_CLOSE?ht=this._handle_tag_close(ft,Vt,lt):Vt.type===ze.TEXT?ht=this._handle_text(ft,Vt,lt):ft.add_raw_token(Vt),dt=ht,Vt=xt.next();return ft._output.get_code(nt)},pt.prototype._handle_tag_close=function(rt,nt,it){var dt={text:nt.text,type:nt.type};return rt.alignment_size=0,it.tag_complete=!0,rt.set_space_before_token(nt.newlines||nt.whitespace_before!=="",!0),it.is_unformatted?rt.add_raw_token(nt):(it.tag_start_char==="<"&&(rt.set_space_before_token(nt.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&it.has_wrapped_attrs&&rt.print_newline(!1)),rt.print_token(nt)),!it.indent_content||it.is_unformatted||it.is_content_unformatted||(rt.indent(),it.indent_content=!1),it.is_inline_element||it.is_unformatted||it.is_content_unformatted||rt.set_wrap_point(),dt},pt.prototype._handle_inside_tag=function(rt,nt,it,dt){var lt=it.has_wrapped_attrs,ft={text:nt.text,type:nt.type};if(rt.set_space_before_token(nt.newlines||nt.whitespace_before!=="",!0),it.is_unformatted)rt.add_raw_token(nt);else if(it.tag_start_char==="{"&&nt.type===ze.TEXT)rt.print_preserved_newlines(nt)?(nt.newlines=0,rt.add_raw_token(nt)):rt.print_token(nt);else{if(nt.type===ze.ATTRIBUTE?(rt.set_space_before_token(!0),it.attr_count+=1):(nt.type===ze.EQUALS||nt.type===ze.VALUE&&nt.previous.type===ze.EQUALS)&&rt.set_space_before_token(!1),nt.type===ze.ATTRIBUTE&&it.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(rt.traverse_whitespace(nt),lt=lt||nt.newlines!==0),this._is_wrap_attributes_force)){var xt=it.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&it.attr_count===1){var ht,Vt=!0,st=0;do{if((ht=dt.peek(st)).type===ze.ATTRIBUTE){Vt=!1;break}st+=1}while(st<4&&ht.type!==ze.EOF&&ht.type!==ze.TAG_CLOSE);xt=!Vt}xt&&(rt.print_newline(!1),lt=!0)}rt.print_token(nt),lt=lt||rt.previous_token_wrapped(),it.has_wrapped_attrs=lt}return ft},pt.prototype._handle_text=function(rt,nt,it){var dt={text:nt.text,type:"TK_CONTENT"};return it.custom_beautifier_name?this._print_custom_beatifier_text(rt,nt,it):it.is_unformatted||it.is_content_unformatted?rt.add_raw_token(nt):(rt.traverse_whitespace(nt),rt.print_token(nt)),dt},pt.prototype._print_custom_beatifier_text=function(rt,nt,it){var dt=this;if(nt.text!==""){var lt,ft=nt.text,xt=1,ht="",Vt="";it.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?lt=this._js_beautify:it.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?lt=this._css_beautify:it.custom_beautifier_name==="html"&&(lt=function(on,an){return new pt(on,an,dt._js_beautify,dt._css_beautify).beautify()}),this._options.indent_scripts==="keep"?xt=0:this._options.indent_scripts==="separate"&&(xt=-rt.indent_level);var st=rt.get_full_indent(xt);if(ft=ft.replace(/\n[ \t]*$/,""),it.custom_beautifier_name!=="html"&&ft[0]==="<"&&ft.match(/^(<!--|<!\[CDATA\[)/)){var Dt=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(ft);if(!Dt)return void rt.add_raw_token(nt);ht=st+Dt[1]+`
`,ft=Dt[4],Dt[5]&&(Vt=st+Dt[5]),ft=ft.replace(/\n[ \t]*$/,""),(Dt[2]||Dt[3].indexOf(`
`)!==-1)&&(Dt=Dt[3].match(/[ \t]+$/))&&(nt.whitespace_before=Dt[0])}if(ft)if(lt){var ln=function(){this.eol=`
`};ln.prototype=this._options.raw_options,ft=lt(st+ft,new ln)}else{var In=nt.whitespace_before;In&&(ft=ft.replace(new RegExp(`
(`+In+")?","g"),`
`)),ft=st+ft.replace(/\n/g,`
`+st)}ht&&(ft=ft?ht+ft+`
`+Vt:ht+Vt),rt.print_newline(!1),ft&&(nt.text=ft,nt.whitespace_before="",nt.newlines=0,rt.add_raw_token(nt),rt.print_newline(!0))}},pt.prototype._handle_tag_open=function(rt,nt,it,dt){var lt=this._get_tag_open_token(nt);return!it.is_unformatted&&!it.is_content_unformatted||it.is_empty_element||nt.type!==ze.TAG_OPEN||nt.text.indexOf("</")!==0?(rt.traverse_whitespace(nt),this._set_tag_position(rt,nt,lt,it,dt),lt.is_inline_element||rt.set_wrap_point(),rt.print_token(nt)):(rt.add_raw_token(nt),lt.start_tag_token=this._tag_stack.try_pop(lt.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(lt.alignment_size=nt.text.length+1),lt.tag_complete||lt.is_unformatted||(rt.alignment_size=lt.alignment_size),lt};var Mt=function(rt,nt){if(this.parent=rt||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",nt){var it;this.tag_start_char=nt.text[0],this.text=nt.text,this.tag_start_char==="<"?(it=nt.text.match(/^<([^\s>]*)/),this.tag_check=it?it[1]:""):(it=nt.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=it?it[1]:"",(nt.text.startsWith("{{#>")||nt.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&nt.next!==null?this.tag_check=nt.next.text.split(" ")[0]:this.tag_check=nt.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),nt.type===ze.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||nt.closed&&nt.closed.text==="/>";var dt=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(dt=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(dt)))}else this.tag_complete=!0};pt.prototype._get_tag_open_token=function(rt){var nt=new Mt(this._tag_stack.get_parser_token(),rt);return nt.alignment_size=this._options.wrap_attributes_indent_size,nt.is_end_tag=nt.is_end_tag||Ke(nt.tag_check,this._options.void_elements),nt.is_empty_element=nt.tag_complete||nt.is_start_tag&&nt.is_end_tag,nt.is_unformatted=!nt.tag_complete&&Ke(nt.tag_check,this._options.unformatted),nt.is_content_unformatted=!nt.is_empty_element&&Ke(nt.tag_check,this._options.content_unformatted),nt.is_inline_element=Ke(nt.tag_name,this._options.inline)||nt.tag_name.includes("-")||nt.tag_start_char==="{",nt},pt.prototype._set_tag_position=function(rt,nt,it,dt,lt){if(it.is_empty_element||(it.is_end_tag?it.start_tag_token=this._tag_stack.try_pop(it.tag_name):(this._do_optional_end_element(it)&&(it.is_inline_element||rt.print_newline(!1)),this._tag_stack.record_tag(it),it.tag_name!=="script"&&it.tag_name!=="style"||it.is_unformatted||it.is_content_unformatted||(it.custom_beautifier_name=Xe(it.tag_check,nt)))),Ke(it.tag_check,this._options.extra_liners)&&(rt.print_newline(!1),rt._output.just_added_blankline()||rt.print_newline(!0)),it.is_empty_element)it.tag_start_char==="{"&&it.tag_check==="else"&&(this._tag_stack.indent_to_tag(["if","unless","each"]),it.indent_content=!0,rt.current_line_has_match(/{{#if/)||rt.print_newline(!1)),it.tag_name==="!--"&&lt.type===ze.TAG_CLOSE&&dt.is_end_tag&&it.text.indexOf(`
`)===-1||(it.is_inline_element||it.is_unformatted||rt.print_newline(!1),this._calcluate_parent_multiline(rt,it));else if(it.is_end_tag){var ft=!1;ft=(ft=it.start_tag_token&&it.start_tag_token.multiline_content)||!it.is_inline_element&&!(dt.is_inline_element||dt.is_unformatted)&&!(lt.type===ze.TAG_CLOSE&&it.start_tag_token===dt)&&lt.type!=="TK_CONTENT",(it.is_content_unformatted||it.is_unformatted)&&(ft=!1),ft&&rt.print_newline(!1)}else it.indent_content=!it.custom_beautifier_name,it.tag_start_char==="<"&&(it.tag_name==="html"?it.indent_content=this._options.indent_inner_html:it.tag_name==="head"?it.indent_content=this._options.indent_head_inner_html:it.tag_name==="body"&&(it.indent_content=this._options.indent_body_inner_html)),it.is_inline_element||it.is_unformatted||lt.type==="TK_CONTENT"&&!it.is_content_unformatted||rt.print_newline(!1),this._calcluate_parent_multiline(rt,it)},pt.prototype._calcluate_parent_multiline=function(rt,nt){!nt.parent||!rt._output.just_added_newline()||(nt.is_inline_element||nt.is_unformatted)&&nt.parent.is_inline_element||(nt.parent.multiline_content=!0)};var wt=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],bt=["a","audio","del","ins","map","noscript","video"];pt.prototype._do_optional_end_element=function(rt){var nt=null;if(!rt.is_empty_element&&rt.is_start_tag&&rt.parent){if(rt.tag_name==="body")nt=nt||this._tag_stack.try_pop("head");else if(rt.tag_name==="li")nt=nt||this._tag_stack.try_pop("li",["ol","ul"]);else if(rt.tag_name==="dd"||rt.tag_name==="dt")nt=(nt=nt||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if(rt.parent.tag_name==="p"&&wt.indexOf(rt.tag_name)!==-1){var it=rt.parent.parent;it&&bt.indexOf(it.tag_name)!==-1||(nt=nt||this._tag_stack.try_pop("p"))}else rt.tag_name==="rp"||rt.tag_name==="rt"?nt=(nt=nt||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):rt.tag_name==="optgroup"?nt=nt||this._tag_stack.try_pop("optgroup",["select"]):rt.tag_name==="option"?nt=nt||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):rt.tag_name==="colgroup"?nt=nt||this._tag_stack.try_pop("caption",["table"]):rt.tag_name==="thead"?nt=(nt=nt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):rt.tag_name==="tbody"||rt.tag_name==="tfoot"?nt=(nt=(nt=(nt=nt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):rt.tag_name==="tr"?nt=(nt=(nt=nt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):rt.tag_name!=="th"&&rt.tag_name!=="td"||(nt=(nt=nt||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return rt.parent=this._tag_stack.get_parser_token(),nt}},ye.exports.Beautifier=pt},function(ye,xe,Te){var Se=Te(6).Options;function Ce(Oe){Se.call(this,Oe,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Ce.prototype=new Se,ye.exports.Options=Ce},function(ye,xe,Te){var Se=Te(9).Tokenizer,Ce=Te(9).TOKEN,Oe=Te(13).Directives,ze=Te(14).TemplatablePattern,Ue=Te(12).Pattern,De={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:Ce.START,RAW:Ce.RAW,EOF:Ce.EOF},Fe=new Oe(/<\!--/,/-->/),Xe=function(Ke,He){Se.call(this,Ke,He),this._current_tag_name="";var Qe=new ze(this._input).read_options(this._options),pt=new Ue(this._input);if(this.__patterns={word:Qe.until(/[\n\r\t <]/),single_quote:Qe.until_after(/'/),double_quote:Qe.until_after(/"/),attribute:Qe.until(/[\n\r\t =>]|\/>/),element_name:Qe.until(/[\n\r\t >\/]/),handlebars_comment:pt.starting_with(/{{!--/).until_after(/--}}/),handlebars:pt.starting_with(/{{/).until_after(/}}/),handlebars_open:pt.until(/[\n\r\t }]/),handlebars_raw_close:pt.until(/}}/),comment:pt.starting_with(/<!--/).until_after(/-->/),cdata:pt.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:pt.starting_with(/<!\[/).until_after(/]>/),processing:pt.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var Mt=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=pt.matching(Mt).until_after(Mt)}};(Xe.prototype=new Se)._is_comment=function(Ke){return!1},Xe.prototype._is_opening=function(Ke){return Ke.type===De.TAG_OPEN},Xe.prototype._is_closing=function(Ke,He){return Ke.type===De.TAG_CLOSE&&He&&((Ke.text===">"||Ke.text==="/>")&&He.text[0]==="<"||Ke.text==="}}"&&He.text[0]==="{"&&He.text[1]==="{")},Xe.prototype._reset=function(){this._current_tag_name=""},Xe.prototype._get_next_token=function(Ke,He){var Qe=null;this._readWhitespace();var pt=this._input.peek();return pt===null?this._create_token(De.EOF,""):Qe=(Qe=(Qe=(Qe=(Qe=(Qe=(Qe=(Qe=(Qe=Qe||this._read_open_handlebars(pt,He))||this._read_attribute(pt,Ke,He))||this._read_close(pt,He))||this._read_raw_content(pt,Ke,He))||this._read_content_word(pt))||this._read_comment_or_cdata(pt))||this._read_processing(pt))||this._read_open(pt,He))||this._create_token(De.UNKNOWN,this._input.next())},Xe.prototype._read_comment_or_cdata=function(Ke){var He=null,Qe=null,pt=null;return Ke==="<"&&(this._input.peek(1)==="!"&&((Qe=this.__patterns.comment.read())?(pt=Fe.get_directives(Qe))&&pt.ignore==="start"&&(Qe+=Fe.readIgnored(this._input)):Qe=this.__patterns.cdata.read()),Qe&&((He=this._create_token(De.COMMENT,Qe)).directives=pt)),He},Xe.prototype._read_processing=function(Ke){var He=null,Qe=null;if(Ke==="<"){var pt=this._input.peek(1);pt!=="!"&&pt!=="?"||(Qe=(Qe=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),Qe&&((He=this._create_token(De.COMMENT,Qe)).directives=null)}return He},Xe.prototype._read_open=function(Ke,He){var Qe=null,pt=null;return He||Ke==="<"&&(Qe=this._input.next(),this._input.peek()==="/"&&(Qe+=this._input.next()),Qe+=this.__patterns.element_name.read(),pt=this._create_token(De.TAG_OPEN,Qe)),pt},Xe.prototype._read_open_handlebars=function(Ke,He){var Qe=null,pt=null;return He||this._options.indent_handlebars&&Ke==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(Qe=(Qe=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),pt=this._create_token(De.COMMENT,Qe)):(Qe=this.__patterns.handlebars_open.read(),pt=this._create_token(De.TAG_OPEN,Qe))),pt},Xe.prototype._read_close=function(Ke,He){var Qe=null,pt=null;return He&&(He.text[0]==="<"&&(Ke===">"||Ke==="/"&&this._input.peek(1)===">")?(Qe=this._input.next(),Ke==="/"&&(Qe+=this._input.next()),pt=this._create_token(De.TAG_CLOSE,Qe)):He.text[0]==="{"&&Ke==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),pt=this._create_token(De.TAG_CLOSE,"}}"))),pt},Xe.prototype._read_attribute=function(Ke,He,Qe){var pt=null,Mt="";if(Qe&&Qe.text[0]==="<")if(Ke==="=")pt=this._create_token(De.EQUALS,this._input.next());else if(Ke==='"'||Ke==="'"){var wt=this._input.next();wt+=Ke==='"'?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),pt=this._create_token(De.VALUE,wt)}else(Mt=this.__patterns.attribute.read())&&(pt=He.type===De.EQUALS?this._create_token(De.VALUE,Mt):this._create_token(De.ATTRIBUTE,Mt));return pt},Xe.prototype._is_content_unformatted=function(Ke){return this._options.void_elements.indexOf(Ke)===-1&&(this._options.content_unformatted.indexOf(Ke)!==-1||this._options.unformatted.indexOf(Ke)!==-1)},Xe.prototype._read_raw_content=function(Ke,He,Qe){var pt="";if(Qe&&Qe.text[0]==="{")pt=this.__patterns.handlebars_raw_close.read();else if(He.type===De.TAG_CLOSE&&He.opened.text[0]==="<"&&He.text[0]!=="/"){var Mt=He.opened.text.substr(1).toLowerCase();if(Mt==="script"||Mt==="style"){var wt=this._read_comment_or_cdata(Ke);if(wt)return wt.type=De.TEXT,wt;pt=this._input.readUntil(new RegExp("</"+Mt+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(Mt)&&(pt=this._input.readUntil(new RegExp("</"+Mt+"[\\n\\r\\t ]*?>","ig")))}return pt?this._create_token(De.TEXT,pt):null},Xe.prototype._read_content_word=function(Ke){var He="";if(this._options.unformatted_content_delimiter&&Ke===this._options.unformatted_content_delimiter[0]&&(He=this.__patterns.unformatted_content_delimiter.read()),He||(He=this.__patterns.word.read()),He)return this._create_token(De.TEXT,He)},ye.exports.Tokenizer=Xe,ye.exports.TOKEN=De}],we={},he=function ye(xe){var Te=we[xe];if(Te!==void 0)return Te.exports;var Se=we[xe]={exports:{}};return j[xe](Se,Se.exports,ye),Se.exports}(18);ne=he})();var Ee=ne;_e=[V,V(7937),V(5040)],ce=function(j){var we=V(7937),he=V(5040);return{html_beautify:function(ye,xe){return Ee(ye,xe,we.js_beautify,he.css_beautify)}}}.apply(Q,_e),ce===void 0||(q.exports=ce)})()},7937:function(q,Q){var V;(function(){var _e;(function(){var ne=[function(we,he,ye){var xe=ye(1).Beautifier,Te=ye(5).Options;we.exports=function(Se,Ce){return new xe(Se,Ce).beautify()},we.exports.defaultOptions=function(){return new Te}},function(we,he,ye){var xe=ye(2).Output,Te=ye(3).Token,Se=ye(4),Ce=ye(5).Options,Oe=ye(7).Tokenizer,ze=ye(7).line_starters,Ue=ye(7).positionable_operators,De=ye(7).TOKEN;function Fe(st,Dt){return Dt.indexOf(st)!==-1}function Xe(st,Dt){return st&&st.type===De.RESERVED&&st.text===Dt}function Ke(st,Dt){return st&&st.type===De.RESERVED&&Fe(st.text,Dt)}var He=["case","return","do","if","throw","else","await","break","continue","async"],Qe=function(st){for(var Dt={},ln=0;ln<st.length;ln++)Dt[st[ln].replace(/-/g,"_")]=st[ln];return Dt}(["before-newline","after-newline","preserve-newline"]),pt=[Qe.before_newline,Qe.preserve_newline],Mt="BlockStatement",wt="Statement",bt="ObjectLiteral",rt="ArrayLiteral",nt="ForInitializer",it="Conditional",dt="Expression";function lt(st,Dt){Dt.multiline_frame||Dt.mode===nt||Dt.mode===it||st.remove_indent(Dt.start_line_index)}function ft(st){return st===rt}function xt(st){return Fe(st,[dt,nt,it])}function ht(st,Dt){Dt=Dt||{},this._source_text=st||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Ce(Dt)}ht.prototype.create_flags=function(st,Dt){var ln=0;return st&&(ln=st.indentation_level,!this._output.just_added_newline()&&st.line_indent_level>ln&&(ln=st.line_indent_level)),{mode:Dt,parent:st,last_token:st?st.last_token:new Te(De.START_BLOCK,""),last_word:st?st.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:ln,alignment:0,line_indent_level:st?st.line_indent_level:ln,start_line_index:this._output.get_line_number(),ternary_depth:0}},ht.prototype._reset=function(st){var Dt=st.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new xe(this._options,Dt),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(Mt);var ln=new Oe(st,this._options);return this._tokens=ln.tokenize(),st},ht.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var st=this._reset(this._source_text),Dt=this._options.eol;this._options.eol==="auto"&&(Dt=`
`,st&&Se.lineBreak.test(st||"")&&(Dt=st.match(Se.lineBreak)[0]));for(var ln=this._tokens.next();ln;)this.handle_token(ln),this._last_last_text=this._flags.last_token.text,this._flags.last_token=ln,ln=this._tokens.next();return this._output.get_code(Dt)},ht.prototype.handle_token=function(st,Dt){st.type===De.START_EXPR?this.handle_start_expr(st):st.type===De.END_EXPR?this.handle_end_expr(st):st.type===De.START_BLOCK?this.handle_start_block(st):st.type===De.END_BLOCK?this.handle_end_block(st):st.type===De.WORD||st.type===De.RESERVED?this.handle_word(st):st.type===De.SEMICOLON?this.handle_semicolon(st):st.type===De.STRING?this.handle_string(st):st.type===De.EQUALS?this.handle_equals(st):st.type===De.OPERATOR?this.handle_operator(st):st.type===De.COMMA?this.handle_comma(st):st.type===De.BLOCK_COMMENT?this.handle_block_comment(st,Dt):st.type===De.COMMENT?this.handle_comment(st,Dt):st.type===De.DOT?this.handle_dot(st):st.type===De.EOF?this.handle_eof(st):(st.type,De.UNKNOWN,this.handle_unknown(st,Dt))},ht.prototype.handle_whitespace_and_comments=function(st,Dt){var ln=st.newlines,In=this._options.keep_array_indentation&&ft(this._flags.mode);if(st.comments_before)for(var on=st.comments_before.next();on;)this.handle_whitespace_and_comments(on,Dt),this.handle_token(on,Dt),on=st.comments_before.next();if(In)for(var an=0;an<ln;an+=1)this.print_newline(an>0,Dt);else if(this._options.max_preserve_newlines&&ln>this._options.max_preserve_newlines&&(ln=this._options.max_preserve_newlines),this._options.preserve_newlines&&ln>1){this.print_newline(!1,Dt);for(var Xt=1;Xt<ln;Xt+=1)this.print_newline(!0,Dt)}};var Vt=["async","break","continue","return","throw","yield"];ht.prototype.allow_wrap_or_preserved_newline=function(st,Dt){if(Dt=Dt!==void 0&&Dt,!this._output.just_added_newline()){var ln=this._options.preserve_newlines&&st.newlines||Dt;if(Fe(this._flags.last_token.text,Ue)||Fe(st.text,Ue)){var In=Fe(this._flags.last_token.text,Ue)&&Fe(this._options.operator_position,pt)||Fe(st.text,Ue);ln=ln&&In}if(ln)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(Ke(this._flags.last_token,Vt))return;this._output.set_wrap_point()}}},ht.prototype.print_newline=function(st,Dt){if(!Dt&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==De.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var ln=this._tokens.peek();!(this._flags.mode!==wt||this._flags.if_block&&Xe(ln,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(st)&&(this._flags.multiline_frame=!0)},ht.prototype.print_token_line_indentation=function(st){this._output.just_added_newline()&&(this._options.keep_array_indentation&&st.newlines&&(st.text==="["||ft(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(st.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},ht.prototype.print_token=function(st){if(this._output.raw)this._output.add_raw_token(st);else{if(this._options.comma_first&&st.previous&&st.previous.type===De.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var Dt=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(Dt),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(st),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(st),this._output.non_breaking_space=!0,this._output.add_token(st.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},ht.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ht.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ht.prototype.set_mode=function(st){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,st),this._flags=this.create_flags(this._previous_flags,st),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ht.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===wt&&lt(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ht.prototype.start_of_object_property=function(){return this._flags.parent.mode===bt&&this._flags.mode===wt&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||Ke(this._flags.last_token,["get","set"]))},ht.prototype.start_of_statement=function(st){var Dt=!1;return!!(Dt=(Dt=(Dt=(Dt=(Dt=(Dt=(Dt=Dt||Ke(this._flags.last_token,["var","let","const"])&&st.type===De.WORD)||Xe(this._flags.last_token,"do"))||!(this._flags.parent.mode===bt&&this._flags.mode===wt)&&Ke(this._flags.last_token,Vt)&&!st.newlines)||Xe(this._flags.last_token,"else")&&!(Xe(st,"if")&&!st.comments_before))||this._flags.last_token.type===De.END_EXPR&&(this._previous_flags.mode===nt||this._previous_flags.mode===it))||this._flags.last_token.type===De.WORD&&this._flags.mode===Mt&&!this._flags.in_case&&!(st.text==="--"||st.text==="++")&&this._last_last_text!=="function"&&st.type!==De.WORD&&st.type!==De.RESERVED)||this._flags.mode===bt&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||Ke(this._flags.last_token,["get","set"])))&&(this.set_mode(wt),this.indent(),this.handle_whitespace_and_comments(st,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st,Ke(st,["do","for","if","while"])),!0)},ht.prototype.handle_start_expr=function(st){this.start_of_statement(st)||this.handle_whitespace_and_comments(st);var Dt=dt;if(st.text==="["){if(this._flags.last_token.type===De.WORD||this._flags.last_token.text===")")return Ke(this._flags.last_token,ze)&&(this._output.space_before_token=!0),this.print_token(st),this.set_mode(Dt),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));Dt=rt,ft(this._flags.mode)&&(this._flags.last_token.text!=="["&&(this._flags.last_token.text!==","||this._last_last_text!=="]"&&this._last_last_text!=="}")||this._options.keep_array_indentation||this.print_newline()),Fe(this._flags.last_token.type,[De.START_EXPR,De.END_EXPR,De.WORD,De.OPERATOR,De.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===De.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,Dt=nt):Fe(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,Dt=it):Fe(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&st.whitespace_before===""?this._output.space_before_token=!1:(Fe(this._flags.last_token.text,ze)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===De.EQUALS||this._flags.last_token.type===De.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st);else if(this._flags.last_token.type===De.WORD){this._output.space_before_token=!1;var ln=this._tokens.peek(-3);if(this._options.space_after_named_function&&ln){var In=this._tokens.peek(-4);Ke(ln,["async","function"])||ln.text==="*"&&Ke(In,["async","function"])?this._output.space_before_token=!0:this._flags.mode===bt?ln.text!=="{"&&ln.text!==","&&(ln.text!=="*"||In.text!=="{"&&In.text!==",")||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(st);(this._flags.last_token.type===De.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(Fe(this._last_last_text,["function","yield"])||this._flags.mode===bt&&Fe(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===De.START_BLOCK?this.print_newline():this._flags.last_token.type!==De.END_EXPR&&this._flags.last_token.type!==De.START_EXPR&&this._flags.last_token.type!==De.END_BLOCK&&this._flags.last_token.text!=="."&&this._flags.last_token.type!==De.COMMA||this.allow_wrap_or_preserved_newline(st,st.newlines),this.print_token(st),this.set_mode(Dt),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},ht.prototype.handle_end_expr=function(st){for(;this._flags.mode===wt;)this.restore_mode();this.handle_whitespace_and_comments(st),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(st,st.text==="]"&&ft(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==De.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(st),this.restore_mode(),lt(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===it&&(this._previous_flags.mode=dt,this._flags.do_block=!1,this._flags.do_while=!1)},ht.prototype.handle_start_block=function(st){this.handle_whitespace_and_comments(st);var Dt=this._tokens.peek(),ln=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===De.END_EXPR?(this.set_mode(Mt),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(Mt):ln&&(Fe(ln.text,[":",","])&&Fe(Dt.type,[De.STRING,De.WORD,De.RESERVED])||Fe(Dt.text,["get","set","..."])&&Fe(ln.type,[De.WORD,De.RESERVED]))?Fe(this._last_last_text,["class","interface"])&&!Fe(ln.text,[":",","])?this.set_mode(Mt):this.set_mode(bt):this._flags.last_token.type===De.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(Mt):Fe(this._flags.last_token.type,[De.EQUALS,De.START_EXPR,De.COMMA,De.OPERATOR])||Ke(this._flags.last_token,["return","throw","import","default"])?this.set_mode(bt):this.set_mode(Mt),this._flags.last_token&&Ke(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var In=!Dt.comments_before&&Dt.text==="}",on=In&&this._flags.last_word==="function"&&this._flags.last_token.type===De.END_EXPR;if(this._options.brace_preserve_inline){var an=0,Xt=null;this._flags.inline_frame=!0;do if(an+=1,(Xt=this._tokens.peek(an-1)).newlines){this._flags.inline_frame=!1;break}while(Xt.type!==De.EOF&&(Xt.type!==De.END_BLOCK||Xt.opened!==st))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&st.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==De.OPERATOR&&(on||this._flags.last_token.type===De.EQUALS||Ke(this._flags.last_token,He)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(!ft(this._previous_flags.mode)||this._flags.last_token.type!==De.START_EXPR&&this._flags.last_token.type!==De.COMMA||((this._flags.last_token.type===De.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===De.COMMA||this._flags.last_token.type===De.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(st),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==De.OPERATOR&&this._flags.last_token.type!==De.START_EXPR&&(this._flags.last_token.type!==De.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(st),this.indent(),In||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},ht.prototype.handle_end_block=function(st){for(this.handle_whitespace_and_comments(st);this._flags.mode===wt;)this.restore_mode();var Dt=this._flags.last_token.type===De.START_BLOCK;this._flags.inline_frame&&!Dt?this._output.space_before_token=!0:this._options.brace_style==="expand"?Dt||this.print_newline():Dt||(ft(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(st)},ht.prototype.handle_word=function(st){if(st.type===De.RESERVED&&(Fe(st.text,["set","get"])&&this._flags.mode!==bt||st.text==="import"&&Fe(this._tokens.peek().text,["(","."])||Fe(st.text,["as","from"])&&!this._flags.import_block||this._flags.mode===bt&&this._tokens.peek().text===":")&&(st.type=De.WORD),this.start_of_statement(st)?Ke(this._flags.last_token,["var","let","const"])&&st.type===De.WORD&&(this._flags.declaration_statement=!0):!st.newlines||xt(this._flags.mode)||this._flags.last_token.type===De.OPERATOR&&this._flags.last_token.text!=="--"&&this._flags.last_token.text!=="++"||this._flags.last_token.type===De.EQUALS||!this._options.preserve_newlines&&Ke(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(st):(this.handle_whitespace_and_comments(st),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(Xe(st,"while"))return this._output.space_before_token=!0,this.print_token(st),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&Xe(st,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===wt;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&Ke(st,["case","default"]))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(st),void(this._flags.in_case=!0);if(this._flags.last_token.type!==De.COMMA&&this._flags.last_token.type!==De.START_EXPR&&this._flags.last_token.type!==De.EQUALS&&this._flags.last_token.type!==De.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st),Xe(st,"function"))return(Fe(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!Fe(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==De.OPERATOR)&&(this._output.just_added_blankline()||st.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===De.RESERVED||this._flags.last_token.type===De.WORD?Ke(this._flags.last_token,["get","set","new","export"])||Ke(this._flags.last_token,Vt)||Xe(this._flags.last_token,"default")&&this._last_last_text==="export"||this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===De.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:(this._flags.multiline_frame||!xt(this._flags.mode)&&!ft(this._flags.mode))&&this.print_newline(),this.print_token(st),void(this._flags.last_word=st.text);var Dt="NONE";this._flags.last_token.type===De.END_BLOCK?this._previous_flags.inline_frame?Dt="SPACE":Ke(st,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&st.newlines?Dt="NEWLINE":(Dt="SPACE",this._output.space_before_token=!0):Dt="NEWLINE":this._flags.last_token.type===De.SEMICOLON&&this._flags.mode===Mt?Dt="NEWLINE":this._flags.last_token.type===De.SEMICOLON&&xt(this._flags.mode)?Dt="SPACE":this._flags.last_token.type===De.STRING?Dt="NEWLINE":this._flags.last_token.type===De.RESERVED||this._flags.last_token.type===De.WORD||this._flags.last_token.text==="*"&&(Fe(this._last_last_text,["function","yield"])||this._flags.mode===bt&&Fe(this._last_last_text,["{",","]))?Dt="SPACE":this._flags.last_token.type===De.START_BLOCK?Dt=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===De.END_EXPR&&(this._output.space_before_token=!0,Dt="NEWLINE"),Ke(st,ze)&&this._flags.last_token.text!==")"&&(Dt=this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?"SPACE":"NEWLINE"),Ke(st,["else","catch","finally"])?(this._flags.last_token.type!==De.END_BLOCK||this._previous_flags.mode!==Mt||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&st.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),this._output.current_line.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0):Dt==="NEWLINE"?Ke(this._flags.last_token,He)||this._flags.last_token.text==="declare"&&Ke(st,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==De.END_EXPR?this._flags.last_token.type===De.START_EXPR&&Ke(st,["var","let","const"])||this._flags.last_token.text===":"||(Xe(st,"if")&&Xe(st.previous,"else")?this._output.space_before_token=!0:this.print_newline()):Ke(st,ze)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&ft(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():Dt==="SPACE"&&(this._output.space_before_token=!0),!st.previous||st.previous.type!==De.WORD&&st.previous.type!==De.RESERVED||(this._output.space_before_token=!0),this.print_token(st),this._flags.last_word=st.text,st.type===De.RESERVED&&(st.text==="do"?this._flags.do_block=!0:st.text==="if"?this._flags.if_block=!0:st.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Xe(st,"from")&&(this._flags.import_block=!1))},ht.prototype.handle_semicolon=function(st){this.start_of_statement(st)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(st);for(var Dt=this._tokens.peek();!(this._flags.mode!==wt||this._flags.if_block&&Xe(Dt,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(st)},ht.prototype.handle_string=function(st){(!st.text.startsWith("`")||st.newlines!==0||st.whitespace_before!==""||st.previous.text!==")"&&this._flags.last_token.type!==De.WORD)&&(this.start_of_statement(st)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(st),this._flags.last_token.type===De.RESERVED||this._flags.last_token.type===De.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===De.COMMA||this._flags.last_token.type===De.START_EXPR||this._flags.last_token.type===De.EQUALS||this._flags.last_token.type===De.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st):!st.text.startsWith("`")||this._flags.last_token.type!==De.END_EXPR||st.previous.text!=="]"&&st.previous.text!==")"||st.newlines!==0?this.print_newline():this._output.space_before_token=!0)),this.print_token(st)},ht.prototype.handle_equals=function(st){this.start_of_statement(st)||this.handle_whitespace_and_comments(st),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(st),this._output.space_before_token=!0},ht.prototype.handle_comma=function(st){this.handle_whitespace_and_comments(st,!0),this.print_token(st),this._output.space_before_token=!0,this._flags.declaration_statement?(xt(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(st)):this._flags.mode===bt||this._flags.mode===wt&&this._flags.parent.mode===bt?(this._flags.mode===wt&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(st)},ht.prototype.handle_operator=function(st){var Dt=st.text==="*"&&(Ke(this._flags.last_token,["function","yield"])||Fe(this._flags.last_token.type,[De.START_BLOCK,De.COMMA,De.END_BLOCK,De.SEMICOLON])),ln=Fe(st.text,["-","+"])&&(Fe(this._flags.last_token.type,[De.START_BLOCK,De.START_EXPR,De.EQUALS,De.OPERATOR])||Fe(this._flags.last_token.text,ze)||this._flags.last_token.text===",");if(!this.start_of_statement(st)){var In=!Dt;this.handle_whitespace_and_comments(st,In)}if(st.text!=="*"||this._flags.last_token.type!==De.DOT)if(st.text!=="::"){if(this._flags.last_token.type===De.OPERATOR&&Fe(this._options.operator_position,pt)&&this.allow_wrap_or_preserved_newline(st),st.text===":"&&this._flags.in_case)return this.print_token(st),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==De.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var on=!0,an=!0,Xt=!1;if(st.text===":"?this._flags.ternary_depth===0?on=!1:(this._flags.ternary_depth-=1,Xt=!0):st.text==="?"&&(this._flags.ternary_depth+=1),!ln&&!Dt&&this._options.preserve_newlines&&Fe(st.text,Ue)){var Rt=st.text===":",en=Rt&&Xt,hn=Rt&&!Xt;switch(this._options.operator_position){case Qe.before_newline:return this._output.space_before_token=!hn,this.print_token(st),Rt&&!en||this.allow_wrap_or_preserved_newline(st),void(this._output.space_before_token=!0);case Qe.after_newline:return this._output.space_before_token=!0,!Rt||en?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(st):this._output.space_before_token=!1,this.print_token(st),void(this._output.space_before_token=!0);case Qe.preserve_newline:return hn||this.allow_wrap_or_preserved_newline(st),on=!(this._output.just_added_newline()||hn),this._output.space_before_token=on,this.print_token(st),void(this._output.space_before_token=!0)}}if(Dt){this.allow_wrap_or_preserved_newline(st),on=!1;var vn=this._tokens.peek();an=vn&&Fe(vn.type,[De.WORD,De.RESERVED])}else if(st.text==="...")this.allow_wrap_or_preserved_newline(st),on=this._flags.last_token.type===De.START_BLOCK,an=!1;else if(Fe(st.text,["--","++","!","~"])||ln){if(this._flags.last_token.type!==De.COMMA&&this._flags.last_token.type!==De.START_EXPR||this.allow_wrap_or_preserved_newline(st),on=!1,an=!1,st.newlines&&(st.text==="--"||st.text==="++"||st.text==="~")){var Pn=Ke(this._flags.last_token,He)&&st.newlines;Pn&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(Pn,!0)}this._flags.last_token.text===";"&&xt(this._flags.mode)&&(on=!0),this._flags.last_token.type===De.RESERVED?on=!0:this._flags.last_token.type===De.END_EXPR?on=!(this._flags.last_token.text==="]"&&(st.text==="--"||st.text==="++")):this._flags.last_token.type===De.OPERATOR&&(on=Fe(st.text,["--","-","++","+"])&&Fe(this._flags.last_token.text,["--","-","++","+"]),Fe(st.text,["+","-"])&&Fe(this._flags.last_token.text,["--","++"])&&(an=!0)),(this._flags.mode!==Mt||this._flags.inline_frame)&&this._flags.mode!==wt||this._flags.last_token.text!=="{"&&this._flags.last_token.text!==";"||this.print_newline()}this._output.space_before_token=this._output.space_before_token||on,this.print_token(st),this._output.space_before_token=an}else this.print_token(st);else this.print_token(st)},ht.prototype.handle_block_comment=function(st,Dt){return this._output.raw?(this._output.add_raw_token(st),void(st.directives&&st.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw))):st.directives?(this.print_newline(!1,Dt),this.print_token(st),st.directives.preserve==="start"&&(this._output.raw=!0),void this.print_newline(!1,!0)):Se.newline.test(st.text)||st.newlines?void this.print_block_commment(st,Dt):(this._output.space_before_token=!0,this.print_token(st),void(this._output.space_before_token=!0))},ht.prototype.print_block_commment=function(st,Dt){var ln,In=function(en){for(var hn=[],vn=(en=en.replace(Se.allLineBreaks,`
`)).indexOf(`
`);vn!==-1;)hn.push(en.substring(0,vn)),vn=(en=en.substring(vn+1)).indexOf(`
`);return en.length&&hn.push(en),hn}(st.text),on=!1,an=!1,Xt=st.whitespace_before,Rt=Xt.length;if(this.print_newline(!1,Dt),this.print_token_line_indentation(st),this._output.add_token(In[0]),this.print_newline(!1,Dt),In.length>1){for(on=function(en,hn){for(var vn=0;vn<en.length;vn++)if(en[vn].trim().charAt(0)!==hn)return!1;return!0}(In=In.slice(1),"*"),an=function(en,hn){for(var vn,Pn=0,Pt=en.length;Pn<Pt;Pn++)if((vn=en[Pn])&&vn.indexOf(hn)!==0)return!1;return!0}(In,Xt),on&&(this._flags.alignment=1),ln=0;ln<In.length;ln++)on?(this.print_token_line_indentation(st),this._output.add_token(In[ln].replace(/^\s+/g,""))):an&&In[ln]?(this.print_token_line_indentation(st),this._output.add_token(In[ln].substring(Rt))):(this._output.current_line.set_indent(-1),this._output.add_token(In[ln])),this.print_newline(!1,Dt);this._flags.alignment=0}},ht.prototype.handle_comment=function(st,Dt){st.newlines?this.print_newline(!1,Dt):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(st),this.print_newline(!1,Dt)},ht.prototype.handle_dot=function(st){this.start_of_statement(st)||this.handle_whitespace_and_comments(st,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),Ke(this._flags.last_token,He)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(st,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(st)},ht.prototype.handle_unknown=function(st,Dt){this.print_token(st),st.text[st.text.length-1]===`
`&&this.print_newline(!1,Dt)},ht.prototype.handle_eof=function(st){for(;this._flags.mode===wt;)this.restore_mode();this.handle_whitespace_and_comments(st)},we.exports.Beautifier=ht},function(we){function he(Te){this.__parent=Te,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ye(Te,Se){this.__cache=[""],this.__indent_size=Te.indent_size,this.__indent_string=Te.indent_char,Te.indent_with_tabs||(this.__indent_string=new Array(Te.indent_size+1).join(Te.indent_char)),Se=Se||"",Te.indent_level>0&&(Se=new Array(Te.indent_level+1).join(this.__indent_string)),this.__base_string=Se,this.__base_string_length=Se.length}function xe(Te,Se){this.__indent_cache=new ye(Te,Se),this.raw=!1,this._end_with_newline=Te.end_with_newline,this.indent_size=Te.indent_size,this.wrap_line_length=Te.wrap_line_length,this.indent_empty_lines=Te.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new he(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}he.prototype.clone_empty=function(){var Te=new he(this.__parent);return Te.set_indent(this.__indent_count,this.__alignment_count),Te},he.prototype.item=function(Te){return Te<0?this.__items[this.__items.length+Te]:this.__items[Te]},he.prototype.has_match=function(Te){for(var Se=this.__items.length-1;Se>=0;Se--)if(this.__items[Se].match(Te))return!0;return!1},he.prototype.set_indent=function(Te,Se){this.is_empty()&&(this.__indent_count=Te||0,this.__alignment_count=Se||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},he.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},he.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},he.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Te=this.__parent.current_line;return Te.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Te.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Te.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Te.__items[0]===" "&&(Te.__items.splice(0,1),Te.__character_count-=1),!0}return!1},he.prototype.is_empty=function(){return this.__items.length===0},he.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},he.prototype.push=function(Te){this.__items.push(Te);var Se=Te.lastIndexOf(`
`);Se!==-1?this.__character_count=Te.length-Se:this.__character_count+=Te.length},he.prototype.pop=function(){var Te=null;return this.is_empty()||(Te=this.__items.pop(),this.__character_count-=Te.length),Te},he.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},he.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},he.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},he.prototype.toString=function(){var Te="";return this.is_empty()?this.__parent.indent_empty_lines&&(Te=this.__parent.get_indent_string(this.__indent_count)):(Te=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Te+=this.__items.join("")),Te},ye.prototype.get_indent_size=function(Te,Se){var Ce=this.__base_string_length;return Se=Se||0,Te<0&&(Ce=0),Ce+=Te*this.__indent_size,Ce+=Se},ye.prototype.get_indent_string=function(Te,Se){var Ce=this.__base_string;return Se=Se||0,Te<0&&(Te=0,Ce=""),Se+=Te*this.__indent_size,this.__ensure_cache(Se),Ce+=this.__cache[Se]},ye.prototype.__ensure_cache=function(Te){for(;Te>=this.__cache.length;)this.__add_column()},ye.prototype.__add_column=function(){var Te=this.__cache.length,Se=0,Ce="";this.__indent_size&&Te>=this.__indent_size&&(Te-=(Se=Math.floor(Te/this.__indent_size))*this.__indent_size,Ce=new Array(Se+1).join(this.__indent_string)),Te&&(Ce+=new Array(Te+1).join(" ")),this.__cache.push(Ce)},xe.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},xe.prototype.get_line_number=function(){return this.__lines.length},xe.prototype.get_indent_string=function(Te,Se){return this.__indent_cache.get_indent_string(Te,Se)},xe.prototype.get_indent_size=function(Te,Se){return this.__indent_cache.get_indent_size(Te,Se)},xe.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},xe.prototype.add_new_line=function(Te){return!(this.is_empty()||!Te&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},xe.prototype.get_code=function(Te){this.trim(!0);var Se=this.current_line.pop();Se&&(Se[Se.length-1]===`
`&&(Se=Se.replace(/\n+$/g,"")),this.current_line.push(Se)),this._end_with_newline&&this.__add_outputline();var Ce=this.__lines.join(`
`);return Te!==`
`&&(Ce=Ce.replace(/[\n]/g,Te)),Ce},xe.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},xe.prototype.set_indent=function(Te,Se){return Te=Te||0,Se=Se||0,this.next_line.set_indent(Te,Se),this.__lines.length>1?(this.current_line.set_indent(Te,Se),!0):(this.current_line.set_indent(),!1)},xe.prototype.add_raw_token=function(Te){for(var Se=0;Se<Te.newlines;Se++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Te.whitespace_before),this.current_line.push(Te.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},xe.prototype.add_token=function(Te){this.__add_space_before_token(),this.current_line.push(Te),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},xe.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},xe.prototype.remove_indent=function(Te){for(var Se=this.__lines.length;Te<Se;)this.__lines[Te]._remove_indent(),Te++;this.current_line._remove_wrap_indent()},xe.prototype.trim=function(Te){for(Te=Te!==void 0&&Te,this.current_line.trim();Te&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},xe.prototype.just_added_newline=function(){return this.current_line.is_empty()},xe.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},xe.prototype.ensure_empty_line_above=function(Te,Se){for(var Ce=this.__lines.length-2;Ce>=0;){var Oe=this.__lines[Ce];if(Oe.is_empty())break;if(Oe.item(0).indexOf(Te)!==0&&Oe.item(-1)!==Se){this.__lines.splice(Ce+1,0,new he(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Ce--}},we.exports.Output=xe},function(we){we.exports.Token=function(he,ye,xe,Te){this.type=he,this.text=ye,this.comments_before=null,this.newlines=xe||0,this.whitespace_before=Te||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(we,he){var ye="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",xe="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",Te="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",Se="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+xe+"])";he.identifier=new RegExp(Se+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),he.identifierStart=new RegExp(Se),he.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+ye+xe+Te+"])+"),he.newline=/[\n\r\u2028\u2029]/,he.lineBreak=new RegExp(`\r
|`+he.newline.source),he.allLineBreaks=new RegExp(he.lineBreak.source,"g")},function(we,he,ye){var xe=ye(6).Options,Te=["before-newline","after-newline","preserve-newline"];function Se(Ce){xe.call(this,Ce,"js");var Oe=this.raw_options.brace_style||null;Oe==="expand-strict"?this.raw_options.brace_style="expand":Oe==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var ze=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var Ue=0;Ue<ze.length;Ue++)ze[Ue]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=ze[Ue];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",Te),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Se.prototype=new xe,we.exports.Options=Se},function(we){function he(Te,Se){this.raw_options=ye(Te,Se),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ye(Te,Se){var Ce,Oe={};for(Ce in Te=xe(Te))Ce!==Se&&(Oe[Ce]=Te[Ce]);if(Se&&Te[Se])for(Ce in Te[Se])Oe[Ce]=Te[Se][Ce];return Oe}function xe(Te){var Se,Ce={};for(Se in Te)Ce[Se.replace(/-/g,"_")]=Te[Se];return Ce}he.prototype._get_array=function(Te,Se){var Ce=this.raw_options[Te],Oe=Se||[];return typeof Ce=="object"?Ce!==null&&typeof Ce.concat=="function"&&(Oe=Ce.concat()):typeof Ce=="string"&&(Oe=Ce.split(/[^a-zA-Z0-9_\/\-]+/)),Oe},he.prototype._get_boolean=function(Te,Se){var Ce=this.raw_options[Te];return Ce===void 0?!!Se:!!Ce},he.prototype._get_characters=function(Te,Se){var Ce=this.raw_options[Te],Oe=Se||"";return typeof Ce=="string"&&(Oe=Ce.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Oe},he.prototype._get_number=function(Te,Se){var Ce=this.raw_options[Te];Se=parseInt(Se,10),isNaN(Se)&&(Se=0);var Oe=parseInt(Ce,10);return isNaN(Oe)&&(Oe=Se),Oe},he.prototype._get_selection=function(Te,Se,Ce){var Oe=this._get_selection_list(Te,Se,Ce);if(Oe.length!==1)throw new Error("Invalid Option Value: The option '"+Te+`' can only be one of the following values:
`+Se+`
You passed in: '`+this.raw_options[Te]+"'");return Oe[0]},he.prototype._get_selection_list=function(Te,Se,Ce){if(!Se||Se.length===0)throw new Error("Selection list cannot be empty.");if(Ce=Ce||[Se[0]],!this._is_valid_selection(Ce,Se))throw new Error("Invalid Default Value!");var Oe=this._get_array(Te,Ce);if(!this._is_valid_selection(Oe,Se))throw new Error("Invalid Option Value: The option '"+Te+`' can contain only the following values:
`+Se+`
You passed in: '`+this.raw_options[Te]+"'");return Oe},he.prototype._is_valid_selection=function(Te,Se){return Te.length&&Se.length&&!Te.some(function(Ce){return Se.indexOf(Ce)===-1})},we.exports.Options=he,we.exports.normalizeOpts=xe,we.exports.mergeOpts=ye},function(we,he,ye){var xe=ye(8).InputScanner,Te=ye(9).Tokenizer,Se=ye(9).TOKEN,Ce=ye(13).Directives,Oe=ye(4),ze=ye(12).Pattern,Ue=ye(14).TemplatablePattern;function De(lt,ft){return ft.indexOf(lt)!==-1}var Fe={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:Se.START,RAW:Se.RAW,EOF:Se.EOF},Xe=new Ce(/\/\*/,/\*\//),Ke=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,He=/[0-9]/,Qe=/[^\d\.]/,pt=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),Mt=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";Mt=(Mt="\\?\\.(?!\\d) "+(Mt=Mt.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var wt,bt=new RegExp(Mt),rt="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),nt=rt.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),it=new RegExp("^(?:"+nt.join("|")+")$"),dt=function(lt,ft){Te.call(this,lt,ft),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var xt=new ze(this._input),ht=new Ue(this._input).read_options(this._options);this.__patterns={template:ht,identifier:ht.starting_with(Oe.identifier).matching(Oe.identifierMatch),number:xt.matching(Ke),punct:xt.matching(bt),comment:xt.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:xt.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:xt.matching(/<!--/),html_comment_end:xt.matching(/-->/),include:xt.starting_with(/#include/).until_after(Oe.lineBreak),shebang:xt.starting_with(/#!/).until_after(Oe.lineBreak),xml:xt.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:ht.until(/['\\\n\r\u2028\u2029]/),double_quote:ht.until(/["\\\n\r\u2028\u2029]/),template_text:ht.until(/[`\\$]/),template_expression:ht.until(/[`}\\]/)}};(dt.prototype=new Te)._is_comment=function(lt){return lt.type===Fe.COMMENT||lt.type===Fe.BLOCK_COMMENT||lt.type===Fe.UNKNOWN},dt.prototype._is_opening=function(lt){return lt.type===Fe.START_BLOCK||lt.type===Fe.START_EXPR},dt.prototype._is_closing=function(lt,ft){return(lt.type===Fe.END_BLOCK||lt.type===Fe.END_EXPR)&&ft&&(lt.text==="]"&&ft.text==="["||lt.text===")"&&ft.text==="("||lt.text==="}"&&ft.text==="{")},dt.prototype._reset=function(){wt=!1},dt.prototype._get_next_token=function(lt,ft){var xt=null;this._readWhitespace();var ht=this._input.peek();return ht===null?this._create_token(Fe.EOF,""):xt=(xt=(xt=(xt=(xt=(xt=(xt=(xt=(xt=xt||this._read_non_javascript(ht))||this._read_string(ht))||this._read_word(lt))||this._read_singles(ht))||this._read_comment(ht))||this._read_regexp(ht,lt))||this._read_xml(ht,lt))||this._read_punctuation())||this._create_token(Fe.UNKNOWN,this._input.next())},dt.prototype._read_word=function(lt){var ft;return(ft=this.__patterns.identifier.read())!==""?(ft=ft.replace(Oe.allLineBreaks,`
`),lt.type!==Fe.DOT&&(lt.type!==Fe.RESERVED||lt.text!=="set"&&lt.text!=="get")&&it.test(ft)?ft!=="in"&&ft!=="of"||lt.type!==Fe.WORD&&lt.type!==Fe.STRING?this._create_token(Fe.RESERVED,ft):this._create_token(Fe.OPERATOR,ft):this._create_token(Fe.WORD,ft)):(ft=this.__patterns.number.read())!==""?this._create_token(Fe.WORD,ft):void 0},dt.prototype._read_singles=function(lt){var ft=null;return lt==="("||lt==="["?ft=this._create_token(Fe.START_EXPR,lt):lt===")"||lt==="]"?ft=this._create_token(Fe.END_EXPR,lt):lt==="{"?ft=this._create_token(Fe.START_BLOCK,lt):lt==="}"?ft=this._create_token(Fe.END_BLOCK,lt):lt===";"?ft=this._create_token(Fe.SEMICOLON,lt):lt==="."&&Qe.test(this._input.peek(1))?ft=this._create_token(Fe.DOT,lt):lt===","&&(ft=this._create_token(Fe.COMMA,lt)),ft&&this._input.next(),ft},dt.prototype._read_punctuation=function(){var lt=this.__patterns.punct.read();if(lt!=="")return lt==="="?this._create_token(Fe.EQUALS,lt):lt==="?."?this._create_token(Fe.DOT,lt):this._create_token(Fe.OPERATOR,lt)},dt.prototype._read_non_javascript=function(lt){var ft="";if(lt==="#"){if(this._is_first_token()&&(ft=this.__patterns.shebang.read()))return this._create_token(Fe.UNKNOWN,ft.trim()+`
`);if(ft=this.__patterns.include.read())return this._create_token(Fe.UNKNOWN,ft.trim()+`
`);lt=this._input.next();var xt="#";if(this._input.hasNext()&&this._input.testChar(He)){do xt+=lt=this._input.next();while(this._input.hasNext()&&lt!=="#"&&lt!=="=");return lt==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(xt+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(xt+="{}",this._input.next(),this._input.next())),this._create_token(Fe.WORD,xt)}this._input.back()}else if(lt==="<"&&this._is_first_token()){if(ft=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(Oe.newline);)ft+=this._input.next();return wt=!0,this._create_token(Fe.COMMENT,ft)}}else if(wt&&lt==="-"&&(ft=this.__patterns.html_comment_end.read()))return wt=!1,this._create_token(Fe.COMMENT,ft);return null},dt.prototype._read_comment=function(lt){var ft=null;if(lt==="/"){var xt="";if(this._input.peek(1)==="*"){xt=this.__patterns.block_comment.read();var ht=Xe.get_directives(xt);ht&&ht.ignore==="start"&&(xt+=Xe.readIgnored(this._input)),xt=xt.replace(Oe.allLineBreaks,`
`),(ft=this._create_token(Fe.BLOCK_COMMENT,xt)).directives=ht}else this._input.peek(1)==="/"&&(xt=this.__patterns.comment.read(),ft=this._create_token(Fe.COMMENT,xt))}return ft},dt.prototype._read_string=function(lt){if(lt==="`"||lt==="'"||lt==='"'){var ft=this._input.next();return this.has_char_escapes=!1,ft+=lt==="`"?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(lt),this.has_char_escapes&&this._options.unescape_strings&&(ft=function(xt){for(var ht="",Vt=0,st=new xe(xt),Dt=null;st.hasNext();)if((Dt=st.match(/([\s]|[^\\]|\\\\)+/g))&&(ht+=Dt[0]),st.peek()==="\\"){if(st.next(),st.peek()==="x")Dt=st.match(/x([0-9A-Fa-f]{2})/g);else{if(st.peek()!=="u"){ht+="\\",st.hasNext()&&(ht+=st.next());continue}Dt=st.match(/u([0-9A-Fa-f]{4})/g)}if(!Dt||(Vt=parseInt(Dt[1],16))>126&&Vt<=255&&Dt[0].indexOf("x")===0)return xt;if(Vt>=0&&Vt<32){ht+="\\"+Dt[0];continue}ht+=Vt===34||Vt===39||Vt===92?"\\"+String.fromCharCode(Vt):String.fromCharCode(Vt)}return ht}(ft)),this._input.peek()===lt&&(ft+=this._input.next()),ft=ft.replace(Oe.allLineBreaks,`
`),this._create_token(Fe.STRING,ft)}return null},dt.prototype._allow_regexp_or_xml=function(lt){return lt.type===Fe.RESERVED&&De(lt.text,["return","case","throw","else","do","typeof","yield"])||lt.type===Fe.END_EXPR&&lt.text===")"&&lt.opened.previous.type===Fe.RESERVED&&De(lt.opened.previous.text,["if","while","for"])||De(lt.type,[Fe.COMMENT,Fe.START_EXPR,Fe.START_BLOCK,Fe.START,Fe.END_BLOCK,Fe.OPERATOR,Fe.EQUALS,Fe.EOF,Fe.SEMICOLON,Fe.COMMA])},dt.prototype._read_regexp=function(lt,ft){if(lt==="/"&&this._allow_regexp_or_xml(ft)){for(var xt=this._input.next(),ht=!1,Vt=!1;this._input.hasNext()&&(ht||Vt||this._input.peek()!==lt)&&!this._input.testChar(Oe.newline);)xt+=this._input.peek(),ht?ht=!1:(ht=this._input.peek()==="\\",this._input.peek()==="["?Vt=!0:this._input.peek()==="]"&&(Vt=!1)),this._input.next();return this._input.peek()===lt&&(xt+=this._input.next(),xt+=this._input.read(Oe.identifier)),this._create_token(Fe.STRING,xt)}return null},dt.prototype._read_xml=function(lt,ft){if(this._options.e4x&&lt==="<"&&this._allow_regexp_or_xml(ft)){var xt="",ht=this.__patterns.xml.read_match();if(ht){for(var Vt=ht[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),st=Vt.indexOf("{")===0,Dt=0;ht;){var ln=!!ht[1],In=ht[2];if(!(!!ht[ht.length-1]||In.slice(0,8)==="![CDATA[")&&(In===Vt||st&&In.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(ln?--Dt:++Dt),xt+=ht[0],Dt<=0)break;ht=this.__patterns.xml.read_match()}return ht||(xt+=this._input.match(/[\s\S]*/g)[0]),xt=xt.replace(Oe.allLineBreaks,`
`),this._create_token(Fe.STRING,xt)}}return null},dt.prototype._read_string_recursive=function(lt,ft,xt){var ht,Vt;lt==="'"?Vt=this.__patterns.single_quote:lt==='"'?Vt=this.__patterns.double_quote:lt==="`"?Vt=this.__patterns.template_text:lt==="}"&&(Vt=this.__patterns.template_expression);for(var st=Vt.read(),Dt="";this._input.hasNext();){if((Dt=this._input.next())===lt||!ft&&Oe.newline.test(Dt)){this._input.back();break}Dt==="\\"&&this._input.hasNext()?((ht=this._input.peek())==="x"||ht==="u"?this.has_char_escapes=!0:ht==="\r"&&this._input.peek(1)===`
`&&this._input.next(),Dt+=this._input.next()):xt&&(xt==="${"&&Dt==="$"&&this._input.peek()==="{"&&(Dt+=this._input.next()),xt===Dt&&(Dt+=lt==="`"?this._read_string_recursive("}",ft,"`"):this._read_string_recursive("`",ft,"${"),this._input.hasNext()&&(Dt+=this._input.next()))),st+=Dt+=Vt.read()}return st},we.exports.Tokenizer=dt,we.exports.TOKEN=Fe,we.exports.positionable_operators=pt.slice(),we.exports.line_starters=rt.slice()},function(we){var he=RegExp.prototype.hasOwnProperty("sticky");function ye(xe){this.__input=xe||"",this.__input_length=this.__input.length,this.__position=0}ye.prototype.restart=function(){this.__position=0},ye.prototype.back=function(){this.__position>0&&(this.__position-=1)},ye.prototype.hasNext=function(){return this.__position<this.__input_length},ye.prototype.next=function(){var xe=null;return this.hasNext()&&(xe=this.__input.charAt(this.__position),this.__position+=1),xe},ye.prototype.peek=function(xe){var Te=null;return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__input_length&&(Te=this.__input.charAt(xe)),Te},ye.prototype.__match=function(xe,Te){xe.lastIndex=Te;var Se=xe.exec(this.__input);return!Se||he&&xe.sticky||Se.index!==Te&&(Se=null),Se},ye.prototype.test=function(xe,Te){return Te=Te||0,(Te+=this.__position)>=0&&Te<this.__input_length&&!!this.__match(xe,Te)},ye.prototype.testChar=function(xe,Te){var Se=this.peek(Te);return xe.lastIndex=0,Se!==null&&xe.test(Se)},ye.prototype.match=function(xe){var Te=this.__match(xe,this.__position);return Te?this.__position+=Te[0].length:Te=null,Te},ye.prototype.read=function(xe,Te,Se){var Ce,Oe="";return xe&&(Ce=this.match(xe))&&(Oe+=Ce[0]),!Te||!Ce&&xe||(Oe+=this.readUntil(Te,Se)),Oe},ye.prototype.readUntil=function(xe,Te){var Se,Ce=this.__position;xe.lastIndex=this.__position;var Oe=xe.exec(this.__input);return Oe?(Ce=Oe.index,Te&&(Ce+=Oe[0].length)):Ce=this.__input_length,Se=this.__input.substring(this.__position,Ce),this.__position=Ce,Se},ye.prototype.readUntilAfter=function(xe){return this.readUntil(xe,!0)},ye.prototype.get_regexp=function(xe,Te){var Se=null,Ce="g";return Te&&he&&(Ce="y"),typeof xe=="string"&&xe!==""?Se=new RegExp(xe,Ce):xe&&(Se=new RegExp(xe.source,Ce)),Se},ye.prototype.get_literal_regexp=function(xe){return RegExp(xe.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ye.prototype.peekUntilAfter=function(xe){var Te=this.__position,Se=this.readUntilAfter(xe);return this.__position=Te,Se},ye.prototype.lookBack=function(xe){var Te=this.__position-1;return Te>=xe.length&&this.__input.substring(Te-xe.length,Te).toLowerCase()===xe},we.exports.InputScanner=ye},function(we,he,ye){var xe=ye(8).InputScanner,Te=ye(3).Token,Se=ye(10).TokenStream,Ce=ye(11).WhitespacePattern,Oe={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},ze=function(Ue,De){this._input=new xe(Ue),this._options=De||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new Ce(this._input)};ze.prototype.tokenize=function(){var Ue;this._input.restart(),this.__tokens=new Se,this._reset();for(var De=new Te(Oe.START,""),Fe=null,Xe=[],Ke=new Se;De.type!==Oe.EOF;){for(Ue=this._get_next_token(De,Fe);this._is_comment(Ue);)Ke.add(Ue),Ue=this._get_next_token(De,Fe);Ke.isEmpty()||(Ue.comments_before=Ke,Ke=new Se),Ue.parent=Fe,this._is_opening(Ue)?(Xe.push(Fe),Fe=Ue):Fe&&this._is_closing(Ue,Fe)&&(Ue.opened=Fe,Fe.closed=Ue,Fe=Xe.pop(),Ue.parent=Fe),Ue.previous=De,De.next=Ue,this.__tokens.add(Ue),De=Ue}return this.__tokens},ze.prototype._is_first_token=function(){return this.__tokens.isEmpty()},ze.prototype._reset=function(){},ze.prototype._get_next_token=function(Ue,De){this._readWhitespace();var Fe=this._input.read(/.+/g);return Fe?this._create_token(Oe.RAW,Fe):this._create_token(Oe.EOF,"")},ze.prototype._is_comment=function(Ue){return!1},ze.prototype._is_opening=function(Ue){return!1},ze.prototype._is_closing=function(Ue,De){return!1},ze.prototype._create_token=function(Ue,De){return new Te(Ue,De,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},ze.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},we.exports.Tokenizer=ze,we.exports.TOKEN=Oe},function(we){function he(ye){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=ye}he.prototype.restart=function(){this.__position=0},he.prototype.isEmpty=function(){return this.__tokens_length===0},he.prototype.hasNext=function(){return this.__position<this.__tokens_length},he.prototype.next=function(){var ye=null;return this.hasNext()&&(ye=this.__tokens[this.__position],this.__position+=1),ye},he.prototype.peek=function(ye){var xe=null;return ye=ye||0,(ye+=this.__position)>=0&&ye<this.__tokens_length&&(xe=this.__tokens[ye]),xe},he.prototype.add=function(ye){this.__parent_token&&(ye.parent=this.__parent_token),this.__tokens.push(ye),this.__tokens_length+=1},we.exports.TokenStream=he},function(we,he,ye){var xe=ye(12).Pattern;function Te(Se,Ce){xe.call(this,Se,Ce),Ce?this._line_regexp=this._input.get_regexp(Ce._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Te.prototype=new xe,Te.prototype.__set_whitespace_patterns=function(Se,Ce){Se+="\\t ",Ce+="\\n\\r",this._match_pattern=this._input.get_regexp("["+Se+Ce+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+Ce+"]")},Te.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var Se=this._input.read(this._match_pattern);if(Se===" ")this.whitespace_before_token=" ";else if(Se){var Ce=this.__split(this._newline_regexp,Se);this.newline_count=Ce.length-1,this.whitespace_before_token=Ce[this.newline_count]}return Se},Te.prototype.matching=function(Se,Ce){var Oe=this._create();return Oe.__set_whitespace_patterns(Se,Ce),Oe._update(),Oe},Te.prototype._create=function(){return new Te(this._input,this)},Te.prototype.__split=function(Se,Ce){Se.lastIndex=0;for(var Oe=0,ze=[],Ue=Se.exec(Ce);Ue;)ze.push(Ce.substring(Oe,Ue.index)),Oe=Ue.index+Ue[0].length,Ue=Se.exec(Ce);return Oe<Ce.length?ze.push(Ce.substring(Oe,Ce.length)):ze.push(""),ze},we.exports.WhitespacePattern=Te},function(we){function he(ye,xe){this._input=ye,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,xe&&(this._starting_pattern=this._input.get_regexp(xe._starting_pattern,!0),this._match_pattern=this._input.get_regexp(xe._match_pattern,!0),this._until_pattern=this._input.get_regexp(xe._until_pattern),this._until_after=xe._until_after)}he.prototype.read=function(){var ye=this._input.read(this._starting_pattern);return this._starting_pattern&&!ye||(ye+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),ye},he.prototype.read_match=function(){return this._input.match(this._match_pattern)},he.prototype.until_after=function(ye){var xe=this._create();return xe._until_after=!0,xe._until_pattern=this._input.get_regexp(ye),xe._update(),xe},he.prototype.until=function(ye){var xe=this._create();return xe._until_after=!1,xe._until_pattern=this._input.get_regexp(ye),xe._update(),xe},he.prototype.starting_with=function(ye){var xe=this._create();return xe._starting_pattern=this._input.get_regexp(ye,!0),xe._update(),xe},he.prototype.matching=function(ye){var xe=this._create();return xe._match_pattern=this._input.get_regexp(ye,!0),xe._update(),xe},he.prototype._create=function(){return new he(this._input,this)},he.prototype._update=function(){},we.exports.Pattern=he},function(we){function he(ye,xe){ye=typeof ye=="string"?ye:ye.source,xe=typeof xe=="string"?xe:xe.source,this.__directives_block_pattern=new RegExp(ye+/ beautify( \w+[:]\w+)+ /.source+xe,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ye+/\sbeautify\signore:end\s/.source+xe,"g")}he.prototype.get_directives=function(ye){if(!ye.match(this.__directives_block_pattern))return null;var xe={};this.__directive_pattern.lastIndex=0;for(var Te=this.__directive_pattern.exec(ye);Te;)xe[Te[1]]=Te[2],Te=this.__directive_pattern.exec(ye);return xe},he.prototype.readIgnored=function(ye){return ye.readUntilAfter(this.__directives_end_ignore_pattern)},we.exports.Directives=he},function(we,he,ye){var xe=ye(12).Pattern,Te={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Se(Ce,Oe){xe.call(this,Ce,Oe),this.__template_pattern=null,this._disabled=Object.assign({},Te),this._excluded=Object.assign({},Te),Oe&&(this.__template_pattern=this._input.get_regexp(Oe.__template_pattern),this._excluded=Object.assign(this._excluded,Oe._excluded),this._disabled=Object.assign(this._disabled,Oe._disabled));var ze=new xe(Ce);this.__patterns={handlebars_comment:ze.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:ze.starting_with(/{{{/).until_after(/}}}/),handlebars:ze.starting_with(/{{/).until_after(/}}/),php:ze.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:ze.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:ze.starting_with(/{%/).until_after(/%}/),django_value:ze.starting_with(/{{/).until_after(/}}/),django_comment:ze.starting_with(/{#/).until_after(/#}/),smarty:ze.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:ze.starting_with(/{\*/).until_after(/\*}/),smarty_literal:ze.starting_with(/{literal}/).until_after(/{\/literal}/)}}Se.prototype=new xe,Se.prototype._create=function(){return new Se(this._input,this)},Se.prototype._update=function(){this.__set_templated_pattern()},Se.prototype.disable=function(Ce){var Oe=this._create();return Oe._disabled[Ce]=!0,Oe._update(),Oe},Se.prototype.read_options=function(Ce){var Oe=this._create();for(var ze in Te)Oe._disabled[ze]=Ce.templating.indexOf(ze)===-1;return Oe._update(),Oe},Se.prototype.exclude=function(Ce){var Oe=this._create();return Oe._excluded[Ce]=!0,Oe._update(),Oe},Se.prototype.read=function(){var Ce="";Ce=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Oe=this._read_template();Oe;)this._match_pattern?Oe+=this._input.read(this._match_pattern):Oe+=this._input.readUntil(this.__template_pattern),Ce+=Oe,Oe=this._read_template();return this._until_after&&(Ce+=this._input.readUntilAfter(this._until_pattern)),Ce},Se.prototype.__set_templated_pattern=function(){var Ce=[];this._disabled.php||Ce.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||Ce.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||Ce.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(Ce.push(this.__patterns.django._starting_pattern.source),Ce.push(this.__patterns.django_value._starting_pattern.source),Ce.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||Ce.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&Ce.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+Ce.join("|")+")")},Se.prototype._read_template=function(){var Ce="",Oe=this._input.peek();if(Oe==="<"){var ze=this._input.peek(1);this._disabled.php||this._excluded.php||ze!=="?"||(Ce=Ce||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||ze!=="%"||(Ce=Ce||this.__patterns.erb.read())}else Oe==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(Ce=(Ce=(Ce=Ce||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(Ce=Ce||this.__patterns.django_value.read()),this._excluded.django||(Ce=(Ce=Ce||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(Ce=(Ce=(Ce=Ce||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return Ce},we.exports.TemplatablePattern=Se}],Ee={},j=function we(he){var ye=Ee[he];if(ye!==void 0)return ye.exports;var xe=Ee[he]={exports:{}};return ne[he](xe,xe.exports,we),xe.exports}(0);_e=j})();var ce=_e;(V=function(){return{js_beautify:ce}}.apply(Q,[]))===void 0||(q.exports=V)})()},1512:function(q,Q,V){var _e=V(3244),ce=V(6906),ne=V(7665),Ee=V(975),j=V(4991),we=V(4209),he=V(9702),ye=V(6757),xe=V(8381),Te=V(5543),Se=V(7781),Ce=V(8908),Oe=V(1286),ze=V(6768);Q=function(De){return new _e(De)},_e.methods({offset:function(){return ce(this)},hide:function(){return this.css("display","none")},show:function(){return ne(this),this},first:function(){return Q(this[0])},last:function(){return Q(he(this))},get:function(De){return this[De]},eq:function(De){return Q(this[De])},on:function(De,Fe,Xe){return Te.on(this,De,Fe,Xe),this},off:function(De,Fe,Xe){return Te.off(this,De,Fe,Xe),this},html:function(De){var Fe=we.html(this,De);return Oe(De)?Fe:this},text:function(De){var Fe=we.text(this,De);return Oe(De)?Fe:this},val:function(De){var Fe=we.val(this,De);return Oe(De)?Fe:this},css:function(De,Fe){var Xe=Ee(this,De,Fe);return Ue(De,Fe)?Xe:this},attr:function(De,Fe){var Xe=j(this,De,Fe);return Ue(De,Fe)?Xe:this},data:function(De,Fe){var Xe=xe(this,De,Fe);return Ue(De,Fe)?Xe:this},rmAttr:function(De){return j.remove(this,De),this},remove:function(){return ye(this),this},addClass:function(De){return Se.add(this,De),this},rmClass:function(De){return Se.remove(this,De),this},toggleClass:function(De){return Se.toggle(this,De),this},hasClass:function(De){return Se.has(this,De)},parent:function(){return Q(this[0].parentNode)},append:function(De){return Ce.append(this,De),this},prepend:function(De){return Ce.prepend(this,De),this},before:function(De){return Ce.before(this,De),this},after:function(De){return Ce.after(this,De),this}});var Ue=function(De,Fe){return Oe(Fe)&&ze(De)};q.exports=Q},4991:function(q,Q,V){var _e=V(1352),ce=V(5166),ne=V(6768),Ee=V(3783),j=V(1286),we=V(2341);(Q=function(he,ye,xe){if(he=we(he),j(xe)&&ne(ye))return function(Se,Ce){return Se.getAttribute(Ce)}(he[0],ye);var Te=ye;ce(Te)||((Te={})[ye]=xe),function(Se,Ce){Ee(Se,function(Oe){Ee(Ce,function(ze,Ue){Oe.setAttribute(Ue,ze)})})}(he,Te)}).remove=function(he,ye){he=we(he),ye=_e(ye),Ee(he,function(xe){Ee(ye,function(Te){xe.removeAttribute(Te)})})},q.exports=Q},7781:function(q,Q,V){var _e=V(1352),ce=V(6053),ne=V(2341),Ee=V(6768),j=V(3783);function we(he){return Ee(he)?he.split(/\s+/):_e(he)}Q={add:function(he,ye){he=ne(he);var xe=we(ye);j(he,function(Te){var Se=[];j(xe,function(Ce){Q.has(Te,Ce)||Se.push(Ce)}),Se.length!==0&&(Te.className+=(Te.className?" ":"")+Se.join(" "))})},has:function(he,ye){he=ne(he);var xe=new RegExp("(^|\\s)"+ye+"(\\s|$)");return ce(he,function(Te){return xe.test(Te.className)})},toggle:function(he,ye){he=ne(he),j(he,function(xe){if(!Q.has(xe,ye))return Q.add(xe,ye);Q.remove(xe,ye)})},remove:function(he,ye){he=ne(he);var xe=we(ye);j(he,function(Te){j(xe,function(Se){Te.classList.remove(Se)})})}},q.exports=Q},975:function(q,Q,V){var _e=V(6768),ce=V(5166),ne=V(7622),Ee=V(1286),j=V(6341),we=V(3990),he=V(2341),ye=V(747),xe=V(3783);Q=function(Se,Ce,Oe){if(Se=he(Se),Ee(Oe)&&_e(Ce))return function(Ue,De){return Ue.style[ye(De)]||getComputedStyle(Ue,"").getPropertyValue(De)}(Se[0],Ce);var ze=Ce;ce(ze)||((ze={})[Ce]=Oe),function(Ue,De){xe(Ue,function(Fe){var Xe=";";xe(De,function(Ke,He){He=ye.dash(He),Xe+=He+":"+function(Qe,pt){return we(pt)&&!j(Te,ne(Qe))?pt+"px":pt}(He,Ke)+";"}),Fe.style.cssText+=Xe})}(Se,ze)};var Te=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];q.exports=Q},8381:function(q,Q,V){var _e=V(4991),ce=V(6768),ne=V(5166),Ee=V(3783);V(2341),Q=function(j,we,he){var ye=we;return ce(we)&&(ye="data-"+we),ne(we)&&(ye={},Ee(we,function(xe,Te){ye["data-"+Te]=xe})),_e(j,ye,he)},q.exports=Q},5543:function(q,Q,V){var _e=V(2443),ce=V(1286),ne=V(2341),Ee=V(3783);function j(we){return function(he,ye,xe,Te){he=ne(he),ce(Te)&&(Te=xe,xe=void 0),Ee(he,function(Se){_e[we](Se,ye,xe,Te)})}}Q={on:j("add"),off:j("remove")},q.exports=Q},8908:function(q,Q,V){var _e=V(3783),ce=V(2341),ne=V(6768);function Ee(j){return function(we,he){we=ce(we),_e(we,function(ye){if(ne(he))ye.insertAdjacentHTML(j,he);else{var xe=ye.parentNode;switch(j){case"beforebegin":xe&&xe.insertBefore(he,ye);break;case"afterend":xe&&xe.insertBefore(he,ye.nextSibling);break;case"beforeend":ye.appendChild(he);break;case"afterbegin":ye.prepend(he)}}})}}Q={before:Ee("beforebegin"),after:Ee("afterend"),append:Ee("beforeend"),prepend:Ee("afterbegin")},q.exports=Q},6906:function(q,Q,V){var _e=V(2341);Q=function(ce){var ne=(ce=_e(ce))[0].getBoundingClientRect();return{left:ne.left+window.pageXOffset,top:ne.top+window.pageYOffset,width:Math.round(ne.width),height:Math.round(ne.height)}},q.exports=Q},4209:function(q,Q,V){var _e=V(1286),ce=V(3783),ne=V(2341);function Ee(j){return function(we,he){var ye=(we=ne(we))[0];if(_e(he))return ye?ye[j]:"";ye&&ce(we,function(xe){xe[j]=he})}}Q={html:Ee("innerHTML"),text:Ee("textContent"),val:Ee("value")},q.exports=Q},6757:function(q,Q,V){var _e=V(3783),ce=V(2341);Q=function(ne){ne=ce(ne),_e(ne,function(Ee){var j=Ee.parentNode;j&&j.removeChild(Ee)})},q.exports=Q},2341:function(q,Q,V){var _e=V(6768),ce=V(1352),ne=V(3244);Q=function(Ee){return ce(_e(Ee)?new ne(Ee):Ee)},q.exports=Q},7665:function(q,Q,V){var _e=V(3783),ce=V(2341);Q=function(Ee){Ee=ce(Ee),_e(Ee,function(j){(function(we){return getComputedStyle(we,"").getPropertyValue("display")=="none"})(j)&&(j.style.display=function(we){var he,ye;return ne[we]||(he=document.createElement(we),document.documentElement.appendChild(he),ye=getComputedStyle(he,"").getPropertyValue("display"),he.parentNode.removeChild(he),ye=="none"&&(ye="block"),ne[we]=ye),ne[we]}(j.nodeName))})};var ne={};q.exports=Q},7496:function(q,Q,V){var _e=V(6329),ce=V(1352),ne=V(5022),Ee=V(7653),j=V(9537),we=(Q=function(he,ye){return we.extend(he,ye)}).Base=function he(ye,xe,Te){Te=Te||{};var Se=xe.className||Ee(xe,"initialize.name")||"";delete xe.className;var Ce=function(){var Oe=ce(arguments);return this.initialize&&this.initialize.apply(this,Oe)||this};if(!j)try{Ce=new Function("toArr","return function "+Se+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(ce)}catch{}return ne(Ce,ye),Ce.prototype.constructor=Ce,Ce.extend=function(Oe,ze){return he(Ce,Oe,ze)},Ce.inherits=function(Oe){ne(Ce,Oe)},Ce.methods=function(Oe){return _e(Ce.prototype,Oe),Ce},Ce.statics=function(Oe){return _e(Ce,Oe),Ce},Ce.methods(xe).statics(Te),Ce}(Object,{className:"Base",callSuper:function(he,ye,xe){return he.prototype[ye].apply(this,xe)},toString:function(){return this.constructor.name}});q.exports=Q},3009:function(q,Q,V){var _e=V(7496),ce=V(6768),ne=V(9882),Ee=V(3279),j=V(5925),we=V(5044);Q=_e({initialize:function(Ce){ce(Ce)&&(Ce=Q.parse(Ce)),this.model=Ce.model,this.val=Ce.val},toRgb:function(){var Ce=this.val;this.model==="hsl"&&(Ce=j(Ce));var Oe="rgba";return Ce[3]===1&&(Oe="rgb",Ce=Ce.slice(0,3)),Oe+"("+Ce.join(", ")+")"},toHex:function(){var Ce=this.val;this.model==="hsl"&&(Ce=j(Ce));var Oe=we.encode(Ce.slice(0,3));return Oe[0]===Oe[1]&&Oe[2]===Oe[3]&&Oe[4]===Oe[5]&&(Oe=Oe[0]+Oe[2]+Oe[5]),"#"+Oe},toHsl:function(){var Ce=this.val;this.model==="rgb"&&(Ce=Ee(Ce));var Oe="hsla";return Ce[3]===1&&(Oe="hsl",Ce=Ce.slice(0,3)),Ce[1]=Ce[1]+"%",Ce[2]=Ce[2]+"%",Oe+"("+Ce.join(", ")+")"}},{parse:function(Ce){var Oe,ze,Ue=[0,0,0,1],De="rgb";if(ze=Ce.match(he))for(ze=ze[1],Oe=0;Oe<3;Oe++)Ue[Oe]=parseInt(ze[Oe]+ze[Oe],16);else if(ze=Ce.match(ye))for(ze=ze[1],Oe=0;Oe<3;Oe++){var Fe=2*Oe;Ue[Oe]=parseInt(ze.slice(Fe,Fe+2),16)}else if(ze=Ce.match(xe)){for(Oe=0;Oe<3;Oe++)Ue[Oe]=parseInt(ze[Oe+1],0);ze[4]&&(Ue[3]=parseFloat(ze[4]))}else if(ze=Ce.match(Te)){for(Oe=0;Oe<3;Oe++)Ue[Oe]=Math.round(2.55*parseFloat(ze[Oe+1]));ze[4]&&(Ue[3]=parseFloat(ze[4]))}else(ze=Ce.match(Se))&&(De="hsl",Ue=[(parseFloat(ze[1])%360+360)%360,ne(parseFloat(ze[2]),0,100),ne(parseFloat(ze[3]),0,100),ne(parseFloat(ze[4]),0,1)]);return{val:Ue,model:De}}});var he=/^#([a-fA-F0-9]{3})$/,ye=/^#([a-fA-F0-9]{6})$/,xe=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,Te=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,Se=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;q.exports=Q},1443:function(q,Q,V){var _e=V(7496),ce=V(6257),ne=V(3783),Ee=V(9677),j=V(8763),we=V(4675);Q=_e({initialize:function(){this._events=this._events||{}},on:function(he,ye){return this._events[he]=this._events[he]||[],this._events[he].push(ye),this},off:function(he,ye){var xe=this._events;if(ce(xe,he)){var Te=xe[he].indexOf(ye);return Te>-1&&xe[he].splice(Te,1),this}},once:function(he,ye){return this.on(he,j(ye)),this},emit:function(he){var ye=this;if(ce(this._events,he)){var xe=Ee(arguments,1),Te=we(this._events[he]);return ne(Te,function(Se){return Se.apply(ye,xe)},this),this}},removeAllListeners:function(he){return he?delete this._events[he]:this._events={},this}},{mixin:function(he){ne(["on","off","once","emit","removeAllListeners"],function(ye){he[ye]=Q.prototype[ye]}),he._events=he._events||{}}}),q.exports=Q},9640:function(q,Q,V){var _e=V(7496),ce=V(4454),ne=V(6472),Ee=V(3783),j=V(2533);Q=_e({initialize:function(we){ne(we)?(this.size=we.length,Ee(we,function(he,ye){this[he]=ye},this)):(this.size=j(we).length,Ee(we,function(he,ye){this[ye]=he},this)),ce(this)}}),q.exports=Q},125:function(q,Q,V){var _e=V(5128),ce=V(615),ne=V(8887),Ee=V(4400),j=V(4193),we=V(5166),he=ce("local");Q=_e.extend({initialize:function(ye,xe){this._name=ye,xe=xe||{};var Te=he.getItem(ye);try{Te=JSON.parse(Te)}catch{Te={}}we(Te)||(Te={}),xe=j(Te,xe),this.callSuper(_e,"initialize",[xe])},save:function(ye){if(ne(ye))return he.removeItem(this._name);he.setItem(this._name,Ee(ye))}}),q.exports=Q},4989:function(q,Q,V){var _e=V(1443),ce=V(9640),ne=V(1352),Ee=V(1286),j=V(4675),we=V(6768),he=V(3990);Q=_e.extend({initialize:function(ye,xe){this.name=ye,this.setLevel(Ee(xe)?Q.level.DEBUG:xe),this.callSuper(_e,"initialize",arguments)},setLevel:function(ye){return we(ye)?((ye=Q.level[ye.toUpperCase()])&&(this._level=ye),this):(he(ye)&&(this._level=ye),this)},getLevel:function(){return this._level},formatter:function(ye,xe){return xe},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(ye,xe){return(xe=ne(xe)).length===0?this:(this.emit("all",ye,j(xe)),Q.level[ye.toUpperCase()]<this._level||(this.emit(ye,j(xe)),(ye==="debug"?console.log:console[ye]).apply(console,this.formatter(ye,xe))),this)}},{level:new ce({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),q.exports=Q},2765:function(q,Q,V){var _e=V(1443);Q=_e.extend({className:"MediaQuery",initialize:function(ce){var ne=this;this.callSuper(_e,"initialize"),this._mql=window.matchMedia(ce),this._mql.addListener(function(){ne.emit(ne.isMatch()?"match":"unmatch")})},isMatch:function(){return this._mql.matches}}),q.exports=Q},2289:function(q,Q,V){var _e=V(7496);(Q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(Q=_e({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),q.exports=Q},242:function(q,Q,V){var _e=V(8985),ce=V(8613),ne=V(5543),Ee=V(975),j=V(6341),we=V(6329),he=V(5610);Q=he.ResizeObserver?_e.extend({initialize:function(ye){var xe=this;if(ye._resizeSensor)return ye._resizeSensor;this.callSuper(_e,"initialize");var Te=new he.ResizeObserver(function(){return xe.emit()});Te.observe(ye),ye._resizeSensor=this,this._resizeObserver=Te,this._el=ye},destroy:function(){var ye=this._el;ye._resizeSensor&&(this.rmAllListeners(),delete ye._resizeSensor,this._resizeObserver.unobserve(ye))}}):_e.extend({initialize:function(ye){if(ye._resizeSensor)return ye._resizeSensor;this.callSuper(_e,"initialize"),this._el=ye,ye._resizeSensor=this,j(["absolute","relative","fixed","sticky"],Ee(ye,"position"))||Ee(ye,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var ye=this._el;ye._resizeSensor&&(this.rmAllListeners(),delete ye._resizeSensor,ye.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var ye=this._el,xe={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},Te={position:"absolute",left:"0px",top:"0px",transition:"0s"},Se=ce("div",{style:Te}),Ce=ce("div.resize-sensor-expand",{style:xe},Se),Oe=ce("div.resize-sensor-shrink",{style:xe},ce("div",{style:we({width:"200%",height:"200%"},Te)})),ze=ce("div.resize-sensor",{dir:"ltr",style:xe},Ce,Oe);this._expandEl=Ce,this._expandChildEl=Se,this._shrinkEl=Oe,this._resizeSensorEl=ze,ye.appendChild(ze),this._resetExpandShrink()},_bindEvent:function(){var ye=this;ne.on(this._expandEl,"scroll",function(){return ye._onScroll()}),ne.on(this._shrinkEl,"scroll",function(){return ye._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var ye=this._el,xe=ye.offsetWidth,Te=ye.offsetHeight;Ee(this._expandChildEl,{width:xe+10,height:Te+10}),we(this._expandEl,{scrollLeft:xe+10,scrollTop:Te+10}),we(this._shrinkEl,{scrollLeft:xe+10,scrollTop:Te+10})}}),q.exports=Q},3244:function(q,Q,V){var _e=V(7496),ce=V(6768),ne=V(3783),Ee=V(9971),j=new(Q=_e({className:"Select",initialize:function(we){return this.length=0,we?ce(we)?j.find(we):void(we.nodeType&&(this[0]=we,this.length=1)):this},find:function(we){var he=new Q;return this.each(function(){Ee(he,this.querySelectorAll(we))}),he},each:function(we){return ne(this,function(he,ye){we.call(he,ye,he)}),this}}))(document);q.exports=Q},8985:function(q,Q,V){var _e=V(7496),ce=V(4675),ne=V(3783),Ee=V(1352);Q=_e({initialize:function(){this._listeners=[]},addListener:function(j){this._listeners.push(j)},rmListener:function(j){var we=this._listeners.indexOf(j);we>-1&&this._listeners.splice(we,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var j=this,we=Ee(arguments),he=ce(this._listeners);ne(he,function(ye){return ye.apply(j,we)},this)}},{mixin:function(j){ne(["addListener","rmListener","emit","rmAllListeners"],function(we){j[we]=Q.prototype[we]}),j._listeners=j._listeners||[]}}),q.exports=Q},9001:function(q,Q,V){var _e=V(7496),ce=V(1527);Q=_e({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(ne){return this._items.push(ne),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(ne,Ee){Ee=arguments.length>1?Ee:this;for(var j=this._items,we=this.size-1,he=0;we>=0;we--,he++)ne.call(Ee,j[we],he,this)},toArr:function(){return ce(this._items)}}),q.exports=Q},5128:function(q,Q,V){var _e=V(1443),ce=V(6768),ne=V(5166),Ee=V(3783),j=V(1352);Q=_e.extend({initialize:function(we){this.callSuper(_e,"initialize",arguments),this._data=we||{},this.save(this._data)},set:function(we,he){var ye;ce(we)?(ye={})[we]=he:ne(we)&&(ye=we);var xe=this;Ee(ye,function(Te,Se){var Ce=xe._data[Se];xe._data[Se]=Te,xe.emit("change",Se,Te,Ce)}),this.save(this._data)},get:function(we){var he=this._data;if(ce(we))return he[we];var ye={};return Ee(we,function(xe){ye[xe]=he[xe]}),ye},remove:function(we){we=j(we);var he=this._data;Ee(we,function(ye){delete he[ye]}),this.save(he)},clear:function(){this._data={},this.save(this._data)},each:function(we){Ee(this._data,we)},save:function(we){this._data=we}}),q.exports=Q},6334:function(q,Q,V){var _e=V(7496),ce=V(6329),ne=V(4331),Ee=V(1745),j=V(8887),we=V(3783),he=V(6472),ye=V(1352),xe=V(2727),Te=V(5166),Se=V(3367);Q=_e({className:"Url",initialize:function(Ue){!Ue&&xe&&(Ue=window.location.href),ce(this,Q.parse(Ue||""))},setQuery:function(Ue,De){var Fe=this.query;return Te(Ue)?we(Ue,function(Xe,Ke){Fe[Ke]=Se(Xe)}):Fe[Ue]=Se(De),this},rmQuery:function(Ue){var De=this.query;return he(Ue)||(Ue=ye(Ue)),we(Ue,function(Fe){delete De[Fe]}),this},toString:function(){return Q.stringify(this)}},{parse:function(Ue){var De={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},Fe=ne(Ue),Xe=!1,Ke=Fe.match(Ce);if(Ke&&(Ke=Ke[0],De.protocol=Ke.toLowerCase(),Fe=Fe.substr(Ke.length)),Ke&&(Xe=Fe.substr(0,2)==="//")&&(Fe=Fe.slice(2),De.slashes=!0),Xe){for(var He=Fe,Qe=-1,pt=0,Mt=ze.length;pt<Mt;pt++){var wt=Fe.indexOf(ze[pt]);wt!==-1&&(Qe===-1||wt<Qe)&&(Qe=wt)}Qe>-1&&(He=Fe.slice(0,Qe),Fe=Fe.slice(Qe));var bt=He.lastIndexOf("@");bt!==-1&&(De.auth=decodeURIComponent(He.slice(0,bt)),He=He.slice(bt+1)),De.hostname=He;var rt=He.match(Oe);rt&&((rt=rt[0])!==":"&&(De.port=rt.substr(1)),De.hostname=He.substr(0,He.length-rt.length))}var nt=Fe.indexOf("#");nt!==-1&&(De.hash=Fe.substr(nt),Fe=Fe.slice(0,nt));var it=Fe.indexOf("?");return it!==-1&&(De.query=Ee.parse(Fe.substr(it+1)),Fe=Fe.slice(0,it)),De.pathname=Fe||"/",De},stringify:function(Ue){var De=Ue.protocol+(Ue.slashes?"//":"")+(Ue.auth?encodeURIComponent(Ue.auth)+"@":"")+Ue.hostname+(Ue.port?":"+Ue.port:"")+Ue.pathname;return j(Ue.query)||(De+="?"+Ee.stringify(Ue.query)),Ue.hash&&(De+=Ue.hash),De}});var Ce=/^([a-z0-9.+-]+:)/i,Oe=/:[0-9]*$/,ze=["/","?","#"];q.exports=Q},8991:function(q,Q,V){var _e=V(4777),ce=V(1214),ne=V(4193),Ee=V(5166),j=V(1745);function we(he,ye,xe,Te){return _e(ye)&&(Te=xe,xe=ye,ye={}),{url:he,data:ye,success:xe,dataType:Te}}(Q=function(he){ne(he,Q.setting);var ye,xe=he.type,Te=he.url,Se=he.data,Ce=he.dataType,Oe=he.success,ze=he.error,Ue=he.timeout,De=he.complete,Fe=he.xhr();return Fe.onreadystatechange=function(){if(Fe.readyState===4){var Xe;clearTimeout(ye);var Ke=Fe.status;if(Ke>=200&&Ke<300||Ke===304){Xe=Fe.responseText,Ce==="xml"&&(Xe=Fe.responseXML);try{Ce==="json"&&(Xe=JSON.parse(Xe))}catch{}Oe(Xe,Fe)}else ze(Fe);De(Fe)}},xe==="GET"?(Se=j.stringify(Se))&&(Te+=Te.indexOf("?")>-1?"&"+Se:"?"+Se):he.contentType==="application/x-www-form-urlencoded"?Ee(Se)&&(Se=j.stringify(Se)):he.contentType==="application/json"&&Ee(Se)&&(Se=JSON.stringify(Se)),Fe.open(xe,Te,!0),Fe.setRequestHeader("Content-Type",he.contentType),Ue>0&&(ye=setTimeout(function(){Fe.onreadystatechange=ce,Fe.abort(),ze(Fe,"timeout"),De(Fe)},Ue)),Fe.send(xe==="GET"?null:Se),Fe}).setting={type:"GET",success:ce,error:ce,complete:ce,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},Q.get=function(){return Q(we.apply(null,arguments))},Q.post=function(){var he=we.apply(null,arguments);return he.type="POST",Q(he)},q.exports=Q},1116:function(q,Q,V){var _e=V(2533),ce=V(415),ne=V(42),Ee=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols;Q=function(we){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=he.prototype,xe=ye===void 0||ye,Te=he.unenumerable,Se=Te!==void 0&&Te,Ce=he.symbol,Oe=Ce!==void 0&&Ce,ze=[];if((Se||Oe)&&Ee){var Ue=_e;Se&&Ee&&(Ue=Ee);do ze=ze.concat(Ue(we)),Oe&&j&&(ze=ze.concat(j(we)));while(xe&&(we=ce(we))&&we!==Object.prototype);ze=ne(ze)}else if(xe)for(var De in we)ze.push(De);else ze=_e(we);return ze},q.exports=Q},7913:function(q,Q,V){var _e=V(3783),ce=V(1286),ne=V(4777);Q=function(Ee,j){ce(j)&&(j=!0);var we=ne(j),he={};return _e(Ee,function(ye){he[ye]=we?j(ye):j}),he},q.exports=Q},3901:function(q,Q){Q={encode:function(Ee){var j,we,he=[],ye=Ee.length,xe=ye%3;ye-=xe;for(var Te=0;Te<ye;Te+=3)he.push((j=(Ee[Te]<<16)+(Ee[Te+1]<<8)+Ee[Te+2],_e[j>>18&63]+_e[j>>12&63]+_e[j>>6&63]+_e[63&j]));return ye=Ee.length,xe===1?(we=Ee[ye-1],he.push(_e[we>>2]),he.push(_e[we<<4&63]),he.push("==")):xe===2&&(we=(Ee[ye-2]<<8)+Ee[ye-1],he.push(_e[we>>10]),he.push(_e[we>>4&63]),he.push(_e[we<<2&63]),he.push("=")),he.join("")},decode:function(Ee){var j=Ee.length,we=0;Ee[j-2]==="="?we=2:Ee[j-1]==="="&&(we=1);var he,ye,xe,Te,Se,Ce,Oe,ze=new Array(3*j/4-we);for(j=we>0?j-4:j,he=0,ye=0;he<j;he+=4){var Ue=(xe=Ee[he],Te=Ee[he+1],Se=Ee[he+2],Ce=Ee[he+3],V[xe.charCodeAt(0)]<<18|V[Te.charCodeAt(0)]<<12|V[Se.charCodeAt(0)]<<6|V[Ce.charCodeAt(0)]);ze[ye++]=Ue>>16&255,ze[ye++]=Ue>>8&255,ze[ye++]=255&Ue}return we===2?(Oe=V[Ee.charCodeAt(he)]<<2|V[Ee.charCodeAt(he+1)]>>4,ze[ye++]=255&Oe):we===1&&(Oe=V[Ee.charCodeAt(he)]<<10|V[Ee.charCodeAt(he+1)]<<4|V[Ee.charCodeAt(he+2)]>>2,ze[ye++]=Oe>>8&255,ze[ye++]=255&Oe),ze}};for(var V=[],_e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ce=0,ne=_e.length;ce<ne;ce++)V[_e.charCodeAt(ce)]=ce;q.exports=Q},5637:function(q,Q){Q=function(V,_e){var ce;return function(){return--V>0&&(ce=_e.apply(this,arguments)),V<=1&&(_e=null),ce}},q.exports=Q},7494:function(q,Q,V){var _e=V(8935);function ce(ne,Ee){this[Ee]=ne.replace(/\w/,function(j){return j.toUpperCase()})}Q=function(ne){var Ee=_e(ne),j=Ee[0];return Ee.shift(),Ee.forEach(ce,Ee),j+=Ee.join("")},q.exports=Q},1694:function(q,Q,V){var _e=V(6257),ce=V(6472);Q=function(j,we){if(ce(j))return j;if(we&&_e(we,j))return[j];var he=[];return j.replace(ne,function(ye,xe,Te,Se){he.push(Te?Se.replace(Ee,"$1"):xe||ye)}),he};var ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ee=/\\(\\)?/g;q.exports=Q},996:function(q,Q){Q=function(V,_e){var ce=[];_e=_e||1;for(var ne=0,Ee=Math.ceil(V.length/_e);ne<Ee;ne++){var j=ne*_e,we=j+_e;ce.push(V.slice(j,we))}return ce},q.exports=Q},9882:function(q,Q,V){var _e=V(1286);Q=function(ce,ne,Ee){return _e(Ee)&&(Ee=ne,ne=void 0),!_e(ne)&&ce<ne?ne:ce>Ee?Ee:ce},q.exports=Q},4675:function(q,Q,V){var _e=V(5166),ce=V(6472),ne=V(6329);Q=function(Ee){return _e(Ee)?ce(Ee)?Ee.slice():ne({},Ee):Ee},q.exports=Q},550:function(q,Q,V){var _e=V(5166),ce=V(4777),ne=V(6472),Ee=V(8820);Q=function(j){return ne(j)?j.map(function(we){return Q(we)}):_e(j)&&!ce(j)?Ee(j,function(we){return Q(we)}):j},q.exports=Q},8099:function(q,Q,V){var _e=V(1352);Q=function(){for(var ce=_e(arguments),ne=[],Ee=0,j=ce.length;Ee<j;Ee++)ne=ne.concat(_e(ce[Ee]));return ne},q.exports=Q},6341:function(q,Q,V){var _e=V(496),ce=V(6768),ne=V(1369),Ee=V(2578);Q=function(j,we){return ce(j)?j.indexOf(we)>-1:(ne(j)||(j=Ee(j)),_e(j,we)>=0)},q.exports=Q},1792:function(q,Q,V){var _e=V(6768),ce=V(3901),ne=V(385),Ee=V(6472),j=V(2349),we=V(3085),he=V(3063);(Q=function(ye,xe){var Te;if(xe=he(xe),_e(ye))Te=new Uint8Array(ce.decode(ye));else if(ne(ye))ye=ye.slice(0),Te=new Uint8Array(ye);else if(Ee(ye))Te=new Uint8Array(ye);else if(we(ye)==="uint8array")Te=ye.slice(0);else if(j(ye)){Te=new Uint8Array(ye.length);for(var Se=0;Se<ye.length;Se++)Te[Se]=ye[Se]}if(Te)switch(xe){case"base64":Te=ce.encode(Te);break;case"arraybuffer":Te=Te.buffer;break;case"array":Te=[].slice.call(Te);break;case"buffer":Te=Buffer.from(Te);break;case"blob":Te=new Blob([Te.buffer])}return Te}).blobToArrBuffer=function(ye){return new Promise(function(xe,Te){var Se=new FileReader;Se.onload=function(Ce){xe(Ce.target.result)},Se.onerror=function(Ce){Te(Ce)},Se.readAsArrayBuffer(ye)})},q.exports=Q},6299:function(q,Q,V){var _e=V(4193),ce=V(3990),ne=V(1286),Ee=V(1420),j={path:"/"};function we(he,ye,xe){if(!ne(ye)){if(xe=_e(xe=xe||{},j),ce(xe.expires)){var Te=new Date;Te.setMilliseconds(Te.getMilliseconds()+864e5*xe.expires),xe.expires=Te}return ye=encodeURIComponent(ye),he=encodeURIComponent(he),document.cookie=[he,"=",ye,xe.expires&&"; expires="+xe.expires.toUTCString(),xe.path&&"; path="+xe.path,xe.domain&&"; domain="+xe.domain,xe.secure?"; secure":""].join(""),Q}for(var Se=document.cookie?document.cookie.split("; "):[],Ce=he?void 0:{},Oe=0,ze=Se.length;Oe<ze;Oe++){var Ue=Se[Oe],De=Ue.split("="),Fe=Ee(De.shift());if(Ue=De.join("="),Ue=Ee(Ue),he===Fe){Ce=Ue;break}he||(Ce[Fe]=Ue)}return Ce}Q={get:we,set:we,remove:function(he,ye){return(ye=ye||{}).expires=-1,we(he,"",ye)}},q.exports=Q},2327:function(q,Q,V){var _e=V(6329),ce=V(1214);Q=function(ne,Ee){Ee=Ee||ce;var j=document.createElement("textarea"),we=document.body;_e(j.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),j.value=ne,we.appendChild(j),j.setAttribute("readonly",""),j.select(),j.setSelectionRange(0,ne.length);try{document.execCommand("copy"),Ee()}catch(he){Ee(he)}finally{we.removeChild(j)}},q.exports=Q},1662:function(q,Q,V){var _e=V(5166);Q=function(ne){if(!_e(ne))return{};if(ce)return ce(ne);function Ee(){}return Ee.prototype=ne,new Ee};var ce=Object.create;q.exports=Q},4427:function(q,Q,V){var _e=V(1286),ce=V(3783);Q=function(ne,Ee){return function(j){return ce(arguments,function(we,he){if(he!==0){var ye=ne(we);ce(ye,function(xe){Ee&&!_e(j[xe])||(j[xe]=we[xe])})}}),j}},q.exports=Q},4407:function(q,Q,V){var _e=V(6768),ce=V(2106),ne=V(3367),Ee=V(5351);Q=function(Te,Se,Ce,Oe){arguments.length===1&&_e(Te)&&!ye.test(Te)&&(Se=Te,Te=void 0),Te=Te||new Date,ce(Te)||(Te=new Date(Te));var ze=(Se=ne(Q.masks[Se]||Se||Q.masks.default)).slice(0,4);ze!=="UTC:"&&ze!=="GMT:"||(Se=Se.slice(4),Ce=!0,ze==="GMT:"&&(Oe=!0));var Ue=Ce?"getUTC":"get",De=Te[Ue+"Date"](),Fe=Te[Ue+"Day"](),Xe=Te[Ue+"Month"](),Ke=Te[Ue+"FullYear"](),He=Te[Ue+"Hours"](),Qe=Te[Ue+"Minutes"](),pt=Te[Ue+"Seconds"](),Mt=Te[Ue+"Milliseconds"](),wt=Ce?0:Te.getTimezoneOffset(),bt={d:De,dd:j(De),ddd:Q.i18n.dayNames[Fe],dddd:Q.i18n.dayNames[Fe+7],m:Xe+1,mm:j(Xe+1),mmm:Q.i18n.monthNames[Xe],mmmm:Q.i18n.monthNames[Xe+12],yy:ne(Ke).slice(2),yyyy:Ke,h:He%12||12,hh:j(He%12||12),H:He,HH:j(He),M:Qe,MM:j(Qe),s:pt,ss:j(pt),l:j(Mt,3),L:j(Math.round(Mt/10)),t:He<12?"a":"p",tt:He<12?"am":"pm",T:He<12?"A":"P",TT:He<12?"AM":"PM",Z:Oe?"GMT":Ce?"UTC":(ne(Te).match(he)||[""]).pop().replace(xe,""),o:(wt>0?"-":"+")+j(100*Math.floor(Math.abs(wt)/60)+Math.abs(wt)%60,4),S:["th","st","nd","rd"][De%10>3?0:(De%100-De%10!=10)*De%10]};return Se.replace(we,function(rt){return rt in bt?bt[rt]:rt.slice(1,rt.length-1)})};var j=function(Te){var Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Ee(ne(Te),Se,"0")},we=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,he=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ye=/\d/,xe=/[^-+\dA-Z]/g;Q.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},Q.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},q.exports=Q},6049:function(q,Q){Q=function(V,_e,ce){var ne;return function(){var Ee=this,j=arguments,we=function(){ne=null,V.apply(Ee,j)};ce||clearTimeout(ne),ce&&ne||(ne=setTimeout(we,_e))}},q.exports=Q},1420:function(q,Q,V){var _e=V(3783),ce=V(8166),ne=V(2461),Ee=V(5742);function j(he){return+("0x"+he)}Q=function(he){try{return decodeURIComponent(he)}catch{var ye=he.match(we);return ye&&_e(ye,function(Te){he=he.replace(Te,function(Se){Se=Se.split("%").slice(1);var Ce=ne(Se,j);return Se=ce.encode(Ce),Se=Ee.decode(Se,!0)}(Te))}),he}};var we=/(%[a-f0-9]{2})+/gi;q.exports=Q},4193:function(q,Q,V){Q=V(4427)(V(1116),!0),q.exports=Q},9803:function(q,Q,V){var _e=V(1694),ce=V(6768),ne=V(5166),Ee=V(3783);function j(we,he,ye){for(var xe=_e(he,we),Te=xe.pop();he=xe.shift();)we[he]||(we[he]={}),we=we[he];Object.defineProperty(we,Te,ye)}Q=function(we,he,ye){return ce(he)?j(we,he,ye):ne(he)&&Ee(he,function(xe,Te){j(we,Te,xe)}),we},q.exports=Q},2443:function(q,Q,V){var _e=V(7496),ce=V(6341);function ne(){return!0}function Ee(){return!1}function j(he){var ye,xe=this.events[he.type],Te=we.call(this,he,xe);he=new Q.Event(he);for(var Se,Ce,Oe=0;(Ce=Te[Oe++])&&!he.isPropagationStopped();)for(he.curTarget=Ce.el,Se=0;(ye=Ce.handlers[Se++])&&!he.isImmediatePropagationStopped();)ye.handler.apply(Ce.el,[he])===!1&&(he.preventDefault(),he.stopPropagation())}function we(he,ye){var xe,Te,Se,Ce,Oe=he.target,ze=[],Ue=ye.delegateCount;if(Oe.nodeType)for(;Oe!==this;Oe=Oe.parentNode||this){for(Te=[],Ce=0;Ce<Ue;Ce++)Te[xe=(Se=ye[Ce]).selector+" "]===void 0&&(Te[xe]=ce(this.querySelectorAll(xe),Oe)),Te[xe]&&Te.push(Se);Te.length&&ze.push({el:Oe,handlers:Te})}return Ue<ye.length&&ze.push({el:this,handlers:ye.slice(Ue)}),ze}Q={add:function(he,ye,xe,Te){var Se,Ce={selector:xe,handler:Te};he.events||(he.events={}),(Se=he.events[ye])||((Se=he.events[ye]=[]).delegateCount=0,he.addEventListener(ye,function(){j.apply(he,arguments)},!1)),xe?Se.splice(Se.delegateCount++,0,Ce):Se.push(Ce)},remove:function(he,ye,xe,Te){var Se=he.events;if(Se&&Se[ye])for(var Ce,Oe=Se[ye],ze=Oe.length;ze--;)Ce=Oe[ze],xe&&Ce.selector!=xe||Ce.handler!=Te||(Oe.splice(ze,1),Ce.selector&&Oe.delegateCount--)},Event:_e({className:"Event",initialize:function(he){this.origEvent=he},isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,preventDefault:function(){var he=this.origEvent;this.isDefaultPrevented=ne,he&&he.preventDefault&&he.preventDefault()},stopPropagation:function(){var he=this.origEvent;this.isPropagationStopped=ne,he&&he.stopPropagation&&he.stopPropagation()},stopImmediatePropagation:function(){var he=this.origEvent;this.isImmediatePropagationStopped=ne,he&&he.stopImmediatePropagation&&he.stopImmediatePropagation(),this.stopPropagation()}})},q.exports=Q},4541:function(q,Q,V){var _e=V(2727),ce=V(9296),ne=V(2533);Q=function(ye){var xe=he(ye=(ye=ye||(_e?navigator.userAgent:"")).toLowerCase(),"msie ");if(xe)return{version:xe,name:"ie"};if(j.test(ye))return{version:11,name:"ie"};for(var Te=0,Se=we.length;Te<Se;Te++){var Ce=we[Te],Oe=ye.match(Ee[Ce]);if(Oe!=null){var ze=ce(Oe[1].split(".")[0]);return Ce==="opera"&&(ze=he(ye,"version/")||ze),{name:Ce,version:ze}}}return{name:"unknown",version:-1}};var Ee={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},j=/trident\/7\./,we=ne(Ee);function he(ye,xe){var Te=ye.indexOf(xe);if(Te>-1)return ce(ye.substring(Te+xe.length,ye.indexOf(".",Te)))}q.exports=Q},6954:function(q,Q,V){var _e=V(2727);Q=function(ce){if(ce=(ce=ce||(_e?navigator.userAgent:"")).toLowerCase(),ne("windows phone"))return"windows phone";if(ne("win"))return"windows";if(ne("android"))return"android";if(ne("ipad")||ne("iphone")||ne("ipod"))return"ios";if(ne("mac"))return"os x";if(ne("linux"))return"linux";function ne(Ee){return ce.indexOf(Ee)>-1}return"unknown"},q.exports=Q},801:function(q,Q,V){var _e=V(1137),ce=V(288),ne=V(5972),Ee=V(6341);Q=_e(function(j,we){return we=ce(we),ne(j,function(he){return!Ee(we,he)})}),q.exports=Q},3783:function(q,Q,V){var _e=V(1369),ce=V(2533),ne=V(3955);Q=function(Ee,j,we){var he,ye;if(j=ne(j,we),_e(Ee))for(he=0,ye=Ee.length;he<ye;he++)j(Ee[he],he,Ee);else{var xe=ce(Ee);for(he=0,ye=xe.length;he<ye;he++)j(Ee[xe[he]],xe[he],Ee)}return Ee},q.exports=Q},4858:function(q,Q){Q=function(V,_e){var ce=V.length-_e.length;return ce>=0&&V.indexOf(_e,ce)===ce},q.exports=Q},8901:function(q,Q,V){var _e=V(2533),ce=(Q=function(he){return Ee.test(he)?he.replace(j,we):he}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ne="(?:"+_e(ce).join("|")+")",Ee=new RegExp(ne),j=new RegExp(ne,"g"),we=function(he){return ce[he]};q.exports=Q},4187:function(q,Q,V){var _e=V(3367);Q=function(ne){return _e(ne).replace(ce,function(Ee){switch(Ee){case'"':case"'":case"\\":return"\\"+Ee;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var ce=/["'\\\n\r\u2028\u2029]/g;q.exports=Q},2337:function(q,Q){Q=function(V){return V.replace(/\W/g,"\\$&")},q.exports=Q},642:function(q,Q){Q=function(V){var _e=document.createElement("style");return _e.textContent=V,_e.type="text/css",document.head.appendChild(_e),_e},q.exports=Q},6329:function(q,Q,V){Q=V(4427)(V(1116)),q.exports=Q},3021:function(q,Q,V){var _e=V(2533);Q=V(4427)(_e),q.exports=Q},2581:function(q,Q,V){var _e=V(42),ce=V(4331),ne=V(2461),Ee=V(1352);Q=function(we){var he=Ee(we.match(j));return _e(ne(he,function(ye){return ce(ye)}))};var j=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;q.exports=Q},5972:function(q,Q,V){var _e=V(2838),ce=V(3783);Q=function(ne,Ee,j){var we=[];return Ee=_e(Ee,j),ce(ne,function(he,ye,xe){Ee(he,ye,xe)&&we.push(he)}),we},q.exports=Q},2244:function(q,Q,V){var _e=V(2267),ce=V(4072),ne=V(1369),Ee=V(1286);Q=function(j,we,he){var ye=(ne(j)?ce:_e)(j,we,he);if(!Ee(ye)&&ye!==-1)return j[ye]},q.exports=Q},4072:function(q,Q,V){var _e=V(2838);Q=function(ce,ne,Ee,j){j=j||1,ne=_e(ne,Ee);for(var we=ce.length,he=j>0?0:we-1;he>=0&&he<we;){if(ne(ce[he],he,ce))return he;he+=j}return-1},q.exports=Q},2267:function(q,Q,V){var _e=V(2838),ce=V(2533);Q=function(ne,Ee,j){Ee=_e(Ee,j);for(var we,he=ce(ne),ye=0,xe=he.length;ye<xe;ye++)if(Ee(ne[we=he[ye]],we,ne))return we},q.exports=Q},288:function(q,Q,V){var _e=V(6472);function ce(ne,Ee){for(var j,we=ne.length,he=-1;we--;)j=ne[++he],_e(j)?ce(j,Ee):Ee.push(j);return Ee}Q=function(ne){return ce(ne,[])},q.exports=Q},4454:function(q,Q,V){var _e=V(2533);Q=function(ce){return Object.freeze?Object.freeze(ce):(_e(ce).forEach(function(ne){Object.getOwnPropertyDescriptor(ce,ne).configurable&&Object.defineProperty(ce,ne,{writable:!1,configurable:!1})}),ce)},q.exports=Q},415:function(q,Q,V){var _e=V(5166),ce=V(4777),ne=Object.getPrototypeOf,Ee={}.constructor;Q=function(j){if(_e(j)){if(ne)return ne(j);var we=j.__proto__;return we||we===null?we:ce(j.constructor)?j.constructor.prototype:j instanceof Ee?Ee.prototype:void 0}},q.exports=Q},8613:function(q,Q,V){var _e=V(9833),ce=V(6768),ne=V(6930),Ee=V(7781),j=V(975),we=V(3783),he=V(4777);function ye(xe){for(var Te="div",Se="",Ce=[],Oe=[],ze="",Ue=0,De=xe.length;Ue<De;Ue++){var Fe=xe[Ue];Fe==="#"||Fe==="."?(Oe.push(ze),ze=Fe):ze+=Fe}Oe.push(ze);for(var Xe=0,Ke=Oe.length;Xe<Ke;Xe++)(ze=Oe[Xe])&&(ne(ze,"#")?Se=ze.slice(1):ne(ze,".")?Ce.push(ze.slice(1)):Te=ze);return{tagName:Te,id:Se,classes:Ce}}Q=function(xe,Te){for(var Se=arguments.length,Ce=new Array(Se>2?Se-2:0),Oe=2;Oe<Se;Oe++)Ce[Oe-2]=arguments[Oe];(_e(Te)||ce(Te))&&(Ce.unshift(Te),Te=null),Te||(Te={});var ze=ye(xe),Ue=ze.tagName,De=ze.id,Fe=ze.classes,Xe=document.createElement(Ue);return De&&Xe.setAttribute("id",De),Ee.add(Xe,Fe),we(Ce,function(Ke){ce(Ke)?Xe.appendChild(document.createTextNode(Ke)):_e(Ke)&&Xe.appendChild(Ke)}),we(Te,function(Ke,He){ce(Ke)?Xe.setAttribute(He,Ke):he(Ke)&&ne(He,"on")?Xe.addEventListener(He.slice(2),Ke,!1):He==="style"&&j(Xe,Ke)}),Xe},q.exports=Q},6257:function(q,Q){var V=Object.prototype.hasOwnProperty;Q=function(_e,ce){return V.call(_e,ce)},q.exports=Q},5044:function(q,Q,V){var _e=V(7348);Q={encode:function(ce){for(var ne=[],Ee=0,j=ce.length;Ee<j;Ee++){var we=ce[Ee];ne.push((we>>>4).toString(16)),ne.push((15&we).toString(16))}return ne.join("")},decode:function(ce){var ne=[],Ee=ce.length;_e(Ee)&&Ee--;for(var j=0;j<Ee;j+=2)ne.push(parseInt(ce.substr(j,2),16));return ne}},q.exports=Q},3651:function(q,Q,V){var _e=V(3783),ce=V(4193);Q=function(j){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",he=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ce(he,ne),j=j.replace(/</g,"&lt;").replace(/>/g,"&gt;"),we=Ee[we];var ye=0,xe=[];_e(we,function(Se){Se.language&&(j=j.replace(Se.re,function(Ce,Oe){return Oe?(xe[ye++]=Q(Oe,Se.language,he),Ce.replace(Oe,"___subtmpl"+(ye-1)+"___")):Ce}))}),_e(we,function(Se,Ce){Ee[Se.language]||(j=j.replace(Se.re,"___"+Ce+"___$1___end"+Ce+"___"))});var Te=[];return j=j.replace(/___(?!subtmpl)\w+?___/g,function(Se){var Ce=Se.substr(3,3)==="end",Oe=(Ce?Se.substr(6):Se.substr(3)).replace(/_/g,""),ze=Te.length>0?Te[Te.length-1]:null;return!Ce&&(ze==null||Oe==ze||ze!=null&&we[ze]&&we[ze].embed!=null&&we[ze].embed.indexOf(Oe)>-1)?(Te.push(Oe),Se):Ce&&Oe==ze?(Te.pop(),Se):""}),_e(we,function(Se,Ce){var Oe=he[Se.style]?' style="'.concat(he[Se.style],'"'):"";j=j.replace(new RegExp("___end"+Ce+"___","g"),"</span>").replace(new RegExp("___"+Ce+"___","g"),'<span class="'.concat(Se.style,'"').concat(Oe,">"))}),_e(we,function(Se){Se.language&&(j=j.replace(/___subtmpl\d+___/g,function(Ce){var Oe=parseInt(Ce.replace(/___subtmpl(\d+)___/,"$1"),10);return xe[Oe]}))}),j};var ne={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},Ee={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};Ee.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:Ee.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},Ee.css={comment:Ee.js.comment,string:Ee.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},q.exports=Q},5925:function(q,Q){Q=function(_e){var ce,ne,Ee,j=_e[0]/360,we=_e[1]/100,he=_e[2]/100,ye=[];if(_e[3]&&(ye[3]=_e[3]),we===0)return Ee=V(255*he),ye[0]=ye[1]=ye[2]=Ee,ye;for(var xe=2*he-(ce=he<.5?he*(1+we):he+we-he*we),Te=0;Te<3;Te++)(ne=j+.3333333333333333*-(Te-1))<0&&ne++,ne>1&&ne--,Ee=6*ne<1?xe+6*(ce-xe)*ne:2*ne<1?ce:3*ne<2?xe+(ce-xe)*(.6666666666666666-ne)*6:xe,ye[Te]=V(255*Ee);return ye};var V=Math.round;q.exports=Q},7483:function(q,Q,V){var _e=V(8702),ce=V(9001),ne=V(6472),Ee=V(3783),j=V(6768),we=V(8820),he=function(xe){return xe.replace(/&quot;/g,'"')},ye=function(xe){return xe.replace(/"/g,"&quot;")};Q={parse:function(xe){var Te=[],Se=new ce;return _e(xe,{start:function(Ce,Oe){Oe=we(Oe,function(ze){return he(ze)}),Se.push({tag:Ce,attrs:Oe})},end:function(){var Ce=Se.pop();if(Se.size){var Oe=Se.peek();ne(Oe.content)||(Oe.content=[]),Oe.content.push(Ce)}else Te.push(Ce)},comment:function(Ce){var Oe="<!--".concat(Ce,"-->"),ze=Se.peek();ze?(ze.content||(ze.content=[]),ze.content.push(Oe)):Te.push(Oe)},text:function(Ce){var Oe=Se.peek();Oe?(Oe.content||(Oe.content=[]),Oe.content.push(Ce)):Te.push(Ce)}}),Te},stringify:function xe(Te){var Se="";return ne(Te)?Ee(Te,function(Ce){return Se+=xe(Ce)}):j(Te)?Se=Te:(Se+="<".concat(Te.tag),Ee(Te.attrs,function(Ce,Oe){return Se+=" ".concat(Oe,'="').concat(ye(Ce),'"')}),Se+=">",Te.content&&(Se+=xe(Te.content)),Se+="</".concat(Te.tag,">")),Se}},q.exports=Q},6362:function(q,Q){Q=function(V){return V},q.exports=Q},496:function(q,Q){Q=function(V,_e,ce){return Array.prototype.indexOf.call(V,_e,ce)},q.exports=Q},5022:function(q,Q,V){var _e=V(1662);Q=function(ce,ne){ce.prototype=_e(ne.prototype)},q.exports=Q},7403:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object Arguments]"},q.exports=Q},6472:function(q,Q,V){var _e=V(106);Q=Array.isArray?Array.isArray:function(ce){return _e(ce)==="[object Array]"},q.exports=Q},385:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object ArrayBuffer]"},q.exports=Q},1369:function(q,Q,V){var _e=V(3990),ce=V(4777),ne=Math.pow(2,53)-1;Q=function(Ee){if(!Ee)return!1;var j=Ee.length;return _e(j)&&j>=0&&j<=ne&&!ce(Ee)},q.exports=Q},4696:function(q,Q){Q=function(V){return V===!0||V===!1},q.exports=Q},2727:function(q,Q){Q=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,q.exports=Q},2349:function(q,Q,V){var _e=V(4777);Q=function(ce){return ce!=null&&(!!ce._isBuffer||ce.constructor&&_e(ce.constructor.isBuffer)&&ce.constructor.isBuffer(ce))},q.exports=Q},2520:function(q,Q,V){var _e=new(V(2765))("(prefers-color-scheme: dark)");Q=function(){return _e.isMatch()},q.exports=Q},2106:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object Date]"},q.exports=Q},9833:function(q,Q){Q=function(V){return!(!V||V.nodeType!==1)},q.exports=Q},8887:function(q,Q,V){var _e=V(1369),ce=V(6472),ne=V(6768),Ee=V(7403),j=V(2533);Q=function(we){return we==null||(_e(we)&&(ce(we)||ne(we)||Ee(we))?we.length===0:j(we).length===0)},q.exports=Q},2749:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object Error]"},q.exports=Q},4777:function(q,Q,V){var _e=V(106);Q=function(ce){var ne=_e(ce);return ne==="[object Function]"||ne==="[object GeneratorFunction]"||ne==="[object AsyncFunction]"},q.exports=Q},9585:function(q,Q,V){var _e=V(5610),ce=_e.getComputedStyle,ne=_e.document;function Ee(j,we){return j.right<we.left||j.left>we.right||j.bottom<we.top||j.top>we.bottom}Q=function(j){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he=we.display,ye=he===void 0||he,xe=we.visibility,Te=xe!==void 0&&xe,Se=we.opacity,Ce=Se!==void 0&&Se,Oe=we.size,ze=Oe!==void 0&&Oe,Ue=we.viewport,De=Ue!==void 0&&Ue,Fe=we.overflow,Xe=Fe!==void 0&&Fe;if(ye)return j.offsetParent===null;var Ke=ce(j);if(Te&&Ke.visibility==="hidden")return!0;if(Ce){if(Ke.opacity==="0")return!0;for(var He=j;He=He.parentElement;){var Qe=ce(He);if(Qe.opacity==="0")return!0}}var pt=j.getBoundingClientRect();if(ze&&(pt.width===0||pt.height===0))return!0;if(De){var Mt={top:0,left:0,right:ne.documentElement.clientWidth,bottom:ne.documentElement.clientHeight};return Ee(pt,Mt)}if(Xe)for(var wt=j;wt=wt.parentElement;){var bt=ce(wt),rt=bt.overflow;if(rt==="scroll"||rt==="hidden"){var nt=wt.getBoundingClientRect();if(Ee(pt,nt))return!0}}return!1},q.exports=Q},2246:function(q,Q,V){var _e=V(3990);Q=function(ce){return _e(ce)&&ce%1==0},q.exports=Q},3708:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object Map]"},q.exports=Q},7949:function(q,Q,V){var _e=V(2533);Q=function(ce,ne){var Ee=_e(ne),j=Ee.length;if(ce==null)return!j;ce=Object(ce);for(var we=0;we<j;we++){var he=Ee[we];if(ne[he]!==ce[he]||!(he in ce))return!1}return!0},q.exports=Q},9537:function(q,Q,V){var _e=V(4777);Q=typeof wx!="undefined"&&_e(wx.openLocation),q.exports=Q},9956:function(q,Q,V){var _e=V(2727),ce=V(1475),ne=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Ee=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;Q=ce(function(j){return j=j||(_e?navigator.userAgent:""),ne.test(j)||Ee.test(j.substr(0,4))}),q.exports=Q},9433:function(q,Q,V){var _e=V(3990);Q=function(ce){return _e(ce)&&ce!==+ce},q.exports=Q},8740:function(q,Q,V){var _e=V(5166),ce=V(4777),ne=V(300);Q=function(he){return!!_e(he)&&(ce(he)?j.test(ne(he)):we.test(ne(he)))};var Ee=Object.prototype.hasOwnProperty,j=new RegExp("^"+ne(Ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),we=/^\[object .+?Constructor\]$/;q.exports=Q},2763:function(q,Q){Q=function(V){return V==null},q.exports=Q},1965:function(q,Q,V){var _e=V(106);Q=typeof process!="undefined"&&_e(process)==="[object process]",q.exports=Q},6156:function(q,Q){Q=function(V){return V===null},q.exports=Q},3990:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object Number]"},q.exports=Q},5166:function(q,Q){Q=function(V){var _e=typeof V;return!!V&&(_e==="function"||_e==="object")},q.exports=Q},7348:function(q,Q,V){var _e=V(2246);Q=function(ce){return!!_e(ce)&&ce%2!=0},q.exports=Q},6997:function(q,Q){Q=function(V){var _e=typeof V;return V==null||_e!=="function"&&_e!=="object"},q.exports=Q},4321:function(q,Q,V){var _e=V(5166),ce=V(4777);Q=function(ne){return _e(ne)&&ce(ne.then)&&ce(ne.catch)},q.exports=Q},1754:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object RegExp]"},q.exports=Q},7470:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object Set]"},q.exports=Q},3843:function(q,Q){Q=function(V){for(var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.defComparator,ce=0,ne=V.length;ce<ne-1;ce++)if(_e(V[ce],V[ce+1])>0)return!1;return!0},Q.defComparator=function(V,_e){return V<_e?-1:V>_e?1:0},q.exports=Q},6768:function(q,Q,V){var _e=V(106);Q=function(ce){return _e(ce)==="[object String]"},q.exports=Q},9804:function(q,Q){Q=function(V){return typeof V=="symbol"},q.exports=Q},1286:function(q,Q){Q=function(V){return V===void 0},q.exports=Q},7622:function(q,Q,V){var _e=V(8935);Q=function(ce){return _e(ce).join("-")},q.exports=Q},2533:function(q,Q,V){var _e=V(6257);Q=Object.keys?Object.keys:function(ce){var ne=[];for(var Ee in ce)_e(ce,Ee)&&ne.push(Ee);return ne},q.exports=Q},9702:function(q,Q){Q=function(V){var _e=V?V.length:0;if(_e)return V[_e-1]},q.exports=Q},3988:function(q,Q,V){var _e=V(2581),ce=V(3783),ne=V(2337);function Ee(j){return'<a href="'+j+'">'+j+"</a>"}Q=function(j,we){we=we||Ee;var he=_e(j);return ce(he,function(ye){j=j.replace(new RegExp(ne(ye),"g"),we)}),j},q.exports=Q},9622:function(q,Q){Q=function(V,_e){var ce=document.createElement("script");ce.src=V,ce.onload=function(){var ne=ce.readyState&&ce.readyState!="complete"&&ce.readyState!="loaded";_e&&_e(!ne)},ce.onerror=function(){_e(!1)},document.body.appendChild(ce)},q.exports=Q},3063:function(q,Q,V){var _e=V(3367);Q=function(ce){return _e(ce).toLocaleLowerCase()},q.exports=Q},5351:function(q,Q,V){var _e=V(4552),ce=V(3367);Q=function(ne,Ee,j){var we=(ne=ce(ne)).length;return j=j||" ",we<Ee&&(ne=(_e(j,Ee-we)+ne).slice(-Ee)),ne},q.exports=Q},7767:function(q,Q){var V=/^\s+/;Q=function(_e,ce){if(ce==null)return _e.trimLeft?_e.trimLeft():_e.replace(V,"");for(var ne,Ee,j=0,we=_e.length,he=ce.length,ye=!0;ye&&j<we;)for(ye=!1,ne=-1,Ee=_e.charAt(j);++ne<he;)if(Ee===ce[ne]){ye=!0,j++;break}return j>=we?"":_e.substr(j,we)},q.exports=Q},2461:function(q,Q,V){var _e=V(2838),ce=V(2533),ne=V(1369);Q=function(Ee,j,we){j=_e(j,we);for(var he=!ne(Ee)&&ce(Ee),ye=(he||Ee).length,xe=Array(ye),Te=0;Te<ye;Te++){var Se=he?he[Te]:Te;xe[Te]=j(Ee[Se],Se,Ee)}return xe},q.exports=Q},8820:function(q,Q,V){var _e=V(2838),ce=V(2533);Q=function(ne,Ee,j){Ee=_e(Ee,j);for(var we=ce(ne),he=we.length,ye={},xe=0;xe<he;xe++){var Te=we[xe];ye[Te]=Ee(ne[Te],Te,ne)}return ye},q.exports=Q},4491:function(q,Q,V){var _e=V(3021),ce=V(7949);Q=function(ne){return ne=_e({},ne),function(Ee){return ce(Ee,ne)}},q.exports=Q},5026:function(q,Q,V){var _e=V(2533);Q={getItem:function(he){return(ne[he]?ce[he]:this[he])||null},setItem:function(he,ye){ne[he]?ce[he]=ye:this[he]=ye},removeItem:function(he){ne[he]?delete ce[he]:delete this[he]},key:function(he){var ye=Ee();return he>=0&&he<ye.length?ye[he]:null},clear:function(){for(var he,ye=j(),xe=0;he=ye[xe];xe++)delete this[he];ye=we();for(var Te,Se=0;Te=ye[Se];Se++)delete ce[Te]}},Object.defineProperty(Q,"length",{enumerable:!1,configurable:!0,get:function(){return Ee().length}});var ce={},ne={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Ee(){return j().concat(we())}function j(){return _e(Q).filter(function(he){return!ne[he]})}function we(){return _e(ce)}q.exports=Q},1475:function(q,Q,V){var _e=V(6257);Q=function(ce,ne){var Ee=function(j){var we=Ee.cache,he=""+(ne?ne.apply(this,arguments):j);return _e(we,he)||(we[he]=ce.apply(this,arguments)),we[he]};return Ee.cache={},Ee},q.exports=Q},9971:function(q,Q,V){Q=V(1137)(function(_e,ce){for(var ne=_e.length,Ee=0,j=ce.length;Ee<j;Ee++)for(var we=ce[Ee],he=0,ye=we.length;he<ye;he++)_e[ne++]=we[he];return _e.length=ne,_e}),q.exports=Q},8573:function(q,Q,V){var _e=V(3783),ce=V(6768),ne=V(1286),Ee=V(6341),j=V(6472),we=V(5166),he=V(1352);(Q=function(Se,Ce){if(ne(Se))return Oe={},xe(function(Ue,De){Oe[Ue]=De}),Oe;var Oe;if(ce(Se)&&ne(Ce)||j(Se))return function(Ue){if(!ce(Ue)){var De={};return xe(function(Xe,Ke){Ee(Ue,Xe)&&(De[Xe]=Ke)}),De}var Fe=Te(Ue);if(Fe)return Fe.getAttribute("content")}(Se);var ze=Se;we(ze)||((ze={})[Se]=Ce),function(Ue){_e(Ue,function(De,Fe){var Xe=Te(Fe);if(Xe)return Xe.setAttribute("content",De);(Xe=ye.createElement("meta")).setAttribute("name",Fe),Xe.setAttribute("content",De),ye.head.appendChild(Xe)})}(ze)}).remove=function(Se){Se=he(Se),_e(Se,function(Ce){var Oe=Te(Ce);Oe&&ye.head.removeChild(Oe)})};var ye=document;function xe(Se){var Ce=ye.querySelectorAll("meta");_e(Ce,function(Oe){var ze=Oe.getAttribute("name"),Ue=Oe.getAttribute("content");ze&&Ue&&Se(ze,Ue)})}function Te(Se){return ye.querySelector('meta[name="'+Se+'"]')}q.exports=Q},6435:function(q,Q){Q=function(){for(var V=arguments,_e=V[0],ce=1,ne=V.length;ce<ne;ce++)V[ce]<_e&&(_e=V[ce]);return _e},q.exports=Q},4677:function(q,Q,V){var _e=V(3875),ce=V(6768);Q=function(we){if(ce(we)){var he=we.match(j);return he?_e(he[1])*ne[he[2]||"ms"]:0}for(var ye=we,xe="ms",Te=0,Se=Ee.length;Te<Se;Te++)if(ye>=ne[Ee[Te]]){xe=Ee[Te];break}return+(ye/ne[xe]).toFixed(2)+xe};var ne={ms:1,s:1e3};ne.m=60*ne.s,ne.h=60*ne.m,ne.d=24*ne.h,ne.y=365.25*ne.d;var Ee=["y","d","h","m","s"],j=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;q.exports=Q},6339:function(q,Q,V){var _e=V(6930),ce=V(5610),ne=V(3367);function Ee(j,we){if(j=ne(j),we=ne(we),_e(j,"_")&&!_e(we,"_"))return 1;if(_e(we,"_")&&!_e(j,"_"))return-1;for(var he,ye,xe,Te,Se=/^\d+|^\D+/;;){if(!j)return we?-1:0;if(!we)return 1;if(he=j.match(Se)[0],ye=we.match(Se)[0],xe=!ce.isNaN(he),Te=!ce.isNaN(ye),xe&&!Te)return-1;if(Te&&!xe)return 1;if(xe&&Te){var Ce=he-ye;if(Ce)return Ce;if(he.length!==ye.length)return+he||+ye?ye.length-he.length:he.length-ye.length}else if(he!==ye)return he<ye?-1:1;j=j.substring(he.length),we=we.substring(ye.length)}}Q=function(j){return j.sort(Ee)},q.exports=Q},6837:function(q,Q){function V(_e){if(typeof _e!="function")throw new TypeError(_e+" is not a function");return _e}Q=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(_e){setImmediate(V(_e))}:function(_e){setTimeout(V(_e),0)},q.exports=Q},1214:function(q,Q){Q=function(){},q.exports=Q},8847:function(q,Q){Q=Date.now?Date.now:function(){return new Date().getTime()},q.exports=Q},106:function(q,Q){var V=Object.prototype.toString;Q=function(_e){return V.call(_e)},q.exports=Q},8763:function(q,Q,V){Q=V(4198)(V(5637),2),q.exports=Q},3955:function(q,Q,V){var _e=V(1286);Q=function(ce,ne,Ee){if(_e(ne))return ce;switch(Ee==null?3:Ee){case 1:return function(j){return ce.call(ne,j)};case 3:return function(j,we,he){return ce.call(ne,j,we,he)};case 4:return function(j,we,he,ye){return ce.call(ne,j,we,he,ye)}}return function(){return ce.apply(ne,arguments)}},q.exports=Q},442:function(q,Q,V){var _e=V(1443),ce=V(7653),ne=window.screen;Q={get:function(){if(ne){var Ee=ce(ne,"orientation.type");if(Ee)return Ee.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},_e.mixin(Q),window.addEventListener("orientationchange",function(){setTimeout(function(){Q.emit("change",Q.get())},200)},!1),q.exports=Q},8702:function(q,Q,V){var _e=V(9702),ce=V(7913),ne=V(6930),Ee=V(3063);Q=function(Te,Se){for(var Ce,Oe=[],ze=Te;Te;){if(Ce=!0,_e(Oe)&&xe[_e(Oe)]){var Ue=new RegExp("</".concat(_e(Oe),"[^>]*>")).exec(Te);if(Ue){var De=Te.substring(0,Ue.index);Te=Te.substring(Ue.index+Ue[0].length),De&&Se.text&&Se.text(De)}wt("",_e(Oe))}else{if(ne(Te,"<!--")){var Fe=Te.indexOf("-->");Fe>=0&&(Se.comment&&Se.comment(Te.substring(4,Fe)),Te=Te.substring(Fe+3),Ce=!1)}else if(ne(Te,"<!")){var Xe=Te.match(j);Xe&&(Se.text&&Se.text(Te.substring(0,Xe[0].length)),Te=Te.substring(Xe[0].length),Ce=!1)}else if(ne(Te,"</")){var Ke=Te.match(we);Ke&&(Te=Te.substring(Ke[0].length),Ke[0].replace(we,wt),Ce=!1)}else if(ne(Te,"<")){var He=Te.match(he);He&&(Te=Te.substring(He[0].length),He[0].replace(he,Mt),Ce=!1)}if(Ce){var Qe=Te.indexOf("<"),pt=Qe<0?Te:Te.substring(0,Qe);Te=Qe<0?"":Te.substring(Qe),Se.text&&Se.text(pt)}}if(ze===Te)throw Error("Parse Error: "+Te);ze=Te}function Mt(bt,rt,nt,it){if(rt=Ee(rt),(it=!!it)||Oe.push(rt),Se.start){var dt={};nt.replace(ye,function(lt,ft,xt,ht,Vt){dt[ft]=xt||ht||Vt||""}),Se.start(rt,dt,it)}}function wt(bt,rt){var nt;if(rt=Ee(rt))for(nt=Oe.length-1;nt>=0&&Oe[nt]!==rt;nt--);else nt=0;if(nt>=0){for(var it=Oe.length-1;it>=nt;it--)Se.end&&Se.end(Oe[it]);Oe.length=nt}}wt()};var j=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,we=/^<\/([-A-Za-z0-9_]+)[^>]*>/,he=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,ye=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,xe=ce("script,style".split(","));q.exports=Q},4198:function(q,Q,V){var _e=V(1137),ce=V(1352);Q=_e(function(ne,Ee){return function(){var j=[];return j=(j=j.concat(Ee)).concat(ce(arguments)),ne.apply(this,j)}}),q.exports=Q},1194:function(q,Q,V){var _e,ce=V(8847),ne=V(5610),Ee=ne.performance,j=ne.process;if(Ee&&Ee.now)Q=function(){return Ee.now()};else if(j&&j.hrtime){var we=function(){var he=j.hrtime();return 1e9*he[0]+he[1]};_e=we()-1e9*j.uptime(),Q=function(){return(we()-_e)/1e6}}else _e=ce(),Q=function(){return ce()-_e};q.exports=Q},3487:function(q,Q,V){var _e=V(6768),ce=V(6472),ne=V(6341),Ee=V(3783);Q=function(j,we,he){if(_e(we)&&(we=[we]),ce(we)){var ye=we;we=function(Se,Ce){return ne(ye,Ce)}}var xe={},Te=function(Se,Ce){we(Se,Ce)&&(xe[Ce]=Se)};return he&&(Te=function(Se,Ce){we(Se,Ce)||(xe[Ce]=Se)}),Ee(j,Te),xe},q.exports=Q},747:function(q,Q,V){var _e=V(1475),ce=V(7494),ne=V(3023),Ee=V(6257),j=V(7622);(Q=_e(function(xe){if(xe=xe.replace(he,""),xe=ce(xe),Ee(ye,xe))return xe;for(var Te=we.length;Te--;){var Se=we[Te]+ne(xe);if(Ee(ye,Se))return Se}return xe})).dash=_e(function(xe){var Te=Q(xe);return(he.test(Te)?"-":"")+j(Te)});var we=["O","ms","Moz","Webkit"],he=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,ye=document.createElement("p").style;q.exports=Q},2994:function(q,Q,V){var _e=V(6472),ce=V(7653);Q=function(ne){return _e(ne)?function(j){return ce(j,ne)}:(Ee=ne,function(j){return j==null?void 0:j[Ee]});var Ee},q.exports=Q},1745:function(q,Q,V){var _e=V(4331),ce=V(3783),ne=V(1286),Ee=V(6472),j=V(2461),we=V(8887),he=V(5972),ye=V(5166);Q={parse:function(Te){var Se={};return Te=_e(Te).replace(xe,""),ce(Te.split("&"),function(Ce){var Oe=Ce.split("="),ze=Oe.shift(),Ue=Oe.length>0?Oe.join("="):null;ze=decodeURIComponent(ze),Ue=decodeURIComponent(Ue),ne(Se[ze])?Se[ze]=Ue:Ee(Se[ze])?Se[ze].push(Ue):Se[ze]=[Se[ze],Ue]}),Se},stringify:function(Te,Se){return he(j(Te,function(Ce,Oe){return ye(Ce)&&we(Ce)?"":Ee(Ce)?Q.stringify(Ce,Oe):encodeURIComponent(Se||Oe)+"="+encodeURIComponent(Ce)}),function(Ce){return Ce.length>0}).join("&")}};var xe=/^(\?|#|&)/g;q.exports=Q},1571:function(q,Q,V){var _e,ce,ne=V(8847),Ee=V(2727),j=0;if(Ee){_e=window.requestAnimationFrame,ce=window.cancelAnimationFrame;for(var we=["ms","moz","webkit","o"],he=0,ye=we.length;he<ye&&!_e;he++)_e=window[we[he]+"RequestAnimationFrame"],ce=window[we[he]+"CancelAnimationFrame"]||window[we[he]+"CancelRequestAnimationFrame"];_e&&(_e=_e.bind(window),ce=ce.bind(window))}ce=ce||function(xe){clearTimeout(xe)},(_e=_e||function(xe){var Te=ne(),Se=Math.max(0,16-(Te-j)),Ce=setTimeout(function(){xe(Te+Se)},Se);return j=Te+Se,Ce}).cancel=ce,Q=_e,q.exports=Q},1216:function(q,Q){Q=function(V,_e,ce){_e==null&&(_e=V,V=0);var ne=Math.random();return ce||V%1||_e%1?Math.min(V+ne*(_e-V+parseFloat("1e-"+((ne+"").length-1))),_e):V+Math.floor(ne*(_e-V+1))},q.exports=Q},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(q){for(var Q=new Uint8Array(q),V=0;V<q;V++)Q[V]=random(0,255);return Q},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(q){var Q=new Uint8Array(q);return crypto.getRandomValues(Q),Q})):isNode&&(crypto=eval("require")("crypto"),exports=function(q){return crypto.randomBytes(q)}),module.exports=exports},5852:function(q,Q,V){var _e=V(2838);Q=function(ce,ne,Ee){var j=[];ne=_e(ne,Ee);for(var we=-1,he=ce.length;++we<he;){var ye=ce[we];ne(ye,we,ce)&&(j.push(ye),ce.splice(we,1))}return j},q.exports=Q},4552:function(q,Q){Q=function(V,_e){var ce="";if(_e<1)return"";for(;_e>0;)1&_e&&(ce+=V),_e>>=1,V+=V;return ce},q.exports=Q},1137:function(q,Q){Q=function(V,_e){return _e=_e==null?V.length-1:+_e,function(){var ce,ne=Math.max(arguments.length-_e,0),Ee=new Array(ne);for(ce=0;ce<ne;ce++)Ee[ce]=arguments[ce+_e];switch(_e){case 0:return V.call(this,Ee);case 1:return V.call(this,arguments[0],Ee);case 2:return V.call(this,arguments[0],arguments[1],Ee)}var j=new Array(_e+1);for(ce=0;ce<_e;ce++)j[ce]=arguments[ce];return j[_e]=Ee,V.apply(this,j)}},q.exports=Q},1527:function(q,Q){Q=function(V){var _e=V.length,ce=Array(_e);_e--;for(var ne=0;ne<=_e;ne++)ce[_e-ne]=V[ne];return ce},q.exports=Q},3279:function(q,Q){Q=function(ne){var Ee,j,we=ne[0]/255,he=ne[1]/255,ye=ne[2]/255,xe=V(we,he,ye),Te=_e(we,he,ye),Se=Te-xe;(Ee=V(60*(Ee=Te===xe?0:we===Te?(he-ye)/Se:he===Te?2+(ye-we)/Se:4+(we-he)/Se),360))<0&&(Ee+=360);var Ce=(xe+Te)/2;j=Te===xe?0:Ce<=.5?Se/(Te+xe):Se/(2-Te-xe);var Oe=[ce(Ee),ce(100*j),ce(100*Ce)];return ne[3]&&(Oe[3]=ne[3]),Oe};var V=Math.min,_e=Math.max,ce=Math.round;q.exports=Q},5031:function(q,Q,V){var _e=V(6299);Q=function(ce){var ne,Ee=window.location,j=Ee.hostname,we=Ee.pathname,he=j.split("."),ye=we.split("/"),xe="",Te=ye.length;if(!Ue())for(var Se=he.length-1;Se>=0;Se--){var Ce=he[Se];if(Ce!==""){if(Ue({domain:xe=xe===""?Ce:Ce+"."+xe,path:ne="/"})||Ue({domain:xe}))return;for(var Oe=0;Oe<Te;Oe++){var ze=ye[Oe];if(ze!==""&&(Ue({domain:xe,path:ne+=ze})||Ue({path:ne})||Ue({domain:xe,path:ne+="/"})||Ue({path:ne})))return}}}function Ue(De){return De=De||{},_e.remove(ce,De),!_e.get(ce)}},q.exports=Q},5610:function(q,Q,V){Q=V(2727)?window:V.g,q.exports=Q},3597:function(q,Q){Q=function(V,_e){if(_e==null){if(V.trimRight)return V.trimRight();_e=` \r
	\f\v`}for(var ce,ne,Ee=V.length-1,j=_e.length,we=!0;we&&Ee>=0;)for(we=!1,ce=-1,ne=V.charAt(Ee);++ce<j;)if(ne===_e[ce]){we=!0,Ee--;break}return Ee>=0?V.substring(0,Ee+1):""},q.exports=Q},2838:function(q,Q,V){var _e=V(4777),ce=V(5166),ne=V(6472),Ee=V(3955),j=V(4491),we=V(6362),he=V(2994);Q=function(ye,xe,Te){return ye==null?we:_e(ye)?Ee(ye,xe,Te):ce(ye)&&!ne(ye)?j(ye):he(ye)},q.exports=Q},7653:function(q,Q,V){var _e=V(1286),ce=V(1694);Q=function(ne,Ee){var j;for(j=(Ee=ce(Ee,ne)).shift();!_e(j);){if((ne=ne[j])==null)return;j=Ee.shift()}return ne},q.exports=Q},8079:function(q,Q,V){var _e=V(1694),ce=V(1286),ne=V(3367),Ee=V(9804),j=V(6768);Q=function(we,he,ye){var xe,Te=(he=_e(he,we)).pop();for(xe=he.shift();!ce(xe);){if(j(xe)||Ee(xe)||(xe=ne(xe)),xe==="__proto__"||xe==="constructor"||xe==="prototype")return;we[xe]||(we[xe]={}),we=we[xe],xe=he.shift()}we[Te]=ye},q.exports=Q},615:function(q,Q,V){var _e=V(5026);Q=function(ce){var ne;switch(ce=ce||"local"){case"local":ne=window.localStorage;break;case"session":ne=window.sessionStorage}try{var Ee="test-localStorage-"+Date.now();ne.setItem(Ee,Ee);var j=ne.getItem(Ee);if(ne.removeItem(Ee),j!==Ee)throw new Error}catch{return _e}return ne},q.exports=Q},4224:function(q,Q,V){var _e=V(6334);Q=function(ce,ne){return ce=new _e(ce),ne=new _e(ne),ce.port=0|ce.port||(ce.protocol==="https"?443:80),ne.port=0|ne.port||(ne.protocol==="https"?443:80),ce.protocol===ne.protocol&&ce.hostname===ne.hostname&&ce.port===ne.port},q.exports=Q},9677:function(q,Q){Q=function(V,_e,ce){var ne=V.length;_e=_e==null?0:_e<0?Math.max(ne+_e,0):Math.min(_e,ne),ce=ce==null?ne:ce<0?Math.max(ne+ce,0):Math.min(ce,ne);for(var Ee=[];_e<ce;)Ee.push(V[_e++]);return Ee},q.exports=Q},6053:function(q,Q,V){var _e=V(2838),ce=V(1369),ne=V(2533);Q=function(Ee,j,we){j=_e(j,we);for(var he=!ce(Ee)&&ne(Ee),ye=(he||Ee).length,xe=0;xe<ye;xe++){var Te=he?he[xe]:xe;if(j(Ee[Te],Te,Ee))return!0}return!1},q.exports=Q},3629:function(q,Q,V){var _e=V(3843),ce=V(4193),ne=V(2533),Ee=V(6472),j=V(5166);Q=function(he){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ce(ye,we);var xe=ye.deep,Te=ye.comparator,Se=[],Ce=[];function Oe(ze){var Ue,De=Se.indexOf(ze);if(De>-1)return Ce[De];if(Ee(ze)){Ue=[],Se.push(ze),Ce.push(Ue);for(var Fe=0,Xe=ze.length;Fe<Xe;Fe++){var Ke=ze[Fe];xe&&j(Ke)?Ue[Fe]=Oe(Ke):Ue[Fe]=Ke}}else{Ue={},Se.push(ze),Ce.push(Ue);for(var He=ne(ze).sort(Te),Qe=0,pt=He.length;Qe<pt;Qe++){var Mt=He[Qe],wt=ze[Mt];xe&&j(wt)?Ue[Mt]=Oe(wt):Ue[Mt]=wt}}return Ue}return Oe(he)};var we={deep:!1,comparator:_e.defComparator};q.exports=Q},8935:function(q,Q){var V=/([A-Z])/g,_e=/[_.\- ]+/g,ce=/(^-)|(-$)/g;Q=function(ne){return(ne=ne.replace(V,"-$1").toLowerCase().replace(_e,"-").replace(ce,"")).split("-")},q.exports=Q},6930:function(q,Q){Q=function(V,_e){return V.indexOf(_e)===0},q.exports=Q},4400:function(q,Q,V){var _e=V(3085),ce=V(3023),ne=V(3367),Ee=V(1286),j=V(4777),we=V(1754);Q=function(he,ye){return JSON.stringify(he,(xe=[],Te=[],function(Se,Ce){if(xe.length>0){var Oe=xe.indexOf(this);Oe>-1?(xe.splice(Oe+1),Te.splice(Oe,1/0,Se)):(xe.push(this),Te.push(Se));var ze=xe.indexOf(Ce);ze>-1&&(Ce=xe[0]===Ce?"[Circular ~]":"[Circular ~."+Te.slice(0,ze).join(".")+"]")}else xe.push(Ce);return we(Ce)||j(Ce)?Ce="["+ce(_e(Ce))+" "+ne(Ce)+"]":Ee(Ce)&&(Ce=null),Ce}),ye);var xe,Te},q.exports=Q},9963:function(q,Q,V){var _e=V(4187),ce=V(3085),ne=V(3367),Ee=V(4858),j=V(300),we=V(2533),he=V(3783),ye=V(7496),xe=V(415),Te=V(801),Se=V(6329),Ce=V(4321),Oe=V(5972),ze=V(8847),Ue=V(1116),De=V(6341),Fe=V(5166),Xe=V(9537),Ke=V(1662),He=V(6930),Qe=V(8079),pt=V(9803),Mt=V(3487),wt=V(1369);function bt(xt,ht,Vt,st){var Dt=[];return he(ht,function(ln){var In,on=Object.getOwnPropertyDescriptor(Vt,ln),an=on&&on.get,Xt=on&&on.set;if(!st.accessGetter&&an)In="(...)";else try{if(In=Vt[ln],De(st.ignore,In))return;Ce(In)&&In.catch(function(){})}catch(Rt){In=Rt.message}Dt.push("".concat(rt(ln),":").concat(Q(In,st))),an&&Dt.push("".concat(rt("get "+ne(ln)),":").concat(Q(on.get,st))),Xt&&Dt.push("".concat(rt("set "+ne(ln)),":").concat(Q(on.set,st)))}),'"'.concat(xt,'":{')+Dt.join(",")+"}"}function rt(xt){return'"'.concat(it(xt),'"')}function nt(xt){return'"'.concat(it(ne(xt)),'"')}function it(xt){return _e(xt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}Q=function(xt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=ht.self,st=ht.startTime,Dt=st===void 0?ze():st,ln=ht.timeout,In=ln===void 0?0:ln,on=ht.depth,an=on===void 0?0:on,Xt=ht.curDepth,Rt=Xt===void 0?1:Xt,en=ht.visitor,hn=en===void 0?new dt:en,vn=ht.unenumerable,Pn=vn!==void 0&&vn,Pt=ht.symbol,zt=Pt!==void 0&&Pt,rn=ht.accessGetter,bn=rn!==void 0&&rn,Tn=ht.ignore,$n=Tn===void 0?[]:Tn,Dn="",xn={visitor:hn,unenumerable:Pn,symbol:zt,accessGetter:bn,depth:an,curDepth:Rt+1,timeout:In,startTime:Dt,ignore:$n},En=ce(xt,!1);if(En==="String")Dn=nt(xt);else if(En==="Number")Dn=ne(xt),Ee(Dn,"Infinity")&&(Dn='{"value":"'.concat(Dn,'","type":"Number"}'));else if(En==="NaN")Dn='{"value":"NaN","type":"Number"}';else if(En==="Boolean")Dn=xt?"true":"false";else if(En==="Null")Dn="null";else if(En==="Undefined")Dn='{"type":"Undefined"}';else if(En==="Symbol"){var Cn="Symbol";try{Cn=ne(xt)}catch{}Dn='{"value":'.concat(nt(Cn),',"type":"Symbol"}')}else{if(In&&ze()-Dt>In)return nt("Timeout");if(an&&Rt>an)return nt("{...}");Dn="{";var Qn,nr=[],fr=hn.get(xt);if(fr?(Qn=fr.id,nr.push('"reference":'.concat(Qn))):(Qn=hn.set(xt),nr.push('"id":'.concat(Qn))),nr.push('"type":"'.concat(En,'"')),Ee(En,"Function")?nr.push('"value":'.concat(nt(j(xt)))):En==="RegExp"&&nr.push('"value":'.concat(nt(xt))),!fr){var Kn=we(xt);if(Kn.length&&nr.push(bt("enumerable",Kn,Vt||xt,xn)),Pn){var qn=Te(Ue(xt,{prototype:!1,unenumerable:!0}),Kn);qn.length&&nr.push(bt("unenumerable",qn,Vt||xt,xn))}if(zt){var un=Oe(Ue(xt,{prototype:!1,symbol:!0}),function(Yn){return typeof Yn=="symbol"});un.length&&nr.push(bt("symbol",un,Vt||xt,xn))}var yn=xe(xt);if(yn&&!De($n,yn)){var Rn='"proto":'.concat(Q(yn,Se(xn,{self:Vt||xt})));nr.push(Rn)}}Dn+=nr.join(",")+"}"}return Dn};var dt=ye({initialize:function(){this.id=1,this.visited=[]},set:function(xt){var ht=this.visited,Vt=this.id,st={id:Vt,val:xt};return ht.push(st),this.id++,Vt},get:function(xt){for(var ht=this.visited,Vt=0,st=ht.length;Vt<st;Vt++){var Dt=ht[Vt];if(xt===Dt.val)return Dt}return!1}});function lt(xt,ht){var Vt=ht.map;if(!Fe(xt))return xt;var st=xt.id,Dt=xt.type,ln=xt.value,In=xt.proto,on=xt.reference,an=xt.enumerable,Xt=xt.unenumerable;if(on)return xt;if(Dt==="Number")return ln==="Infinity"?Number.POSITIVE_INFINITY:ln==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(Dt!=="Undefined"){var Rt,en,hn;if(Dt==="Function")(Rt=function(){}).toString=function(){return ln},In&&Object.setPrototypeOf(Rt,lt(In,ht));else if(Dt==="RegExp")hn=(en=ln).lastIndexOf("/"),Rt=new RegExp(en.slice(1,hn),en.slice(hn+1));else{var vn;Dt!=="Object"?(vn=Xe?function(){}:new Function(Dt,""),In&&(vn.prototype=lt(In,ht)),Rt=new vn):Rt=Ke(In?lt(In,ht):null)}var Pn,Pt={};return an&&(wt(an)&&(Pn=an.length,delete an.length),an=Mt(an,function(rn,bn){return!zt(an,rn,bn)}),he(an,function(rn,bn){(Pt[bn]||{}).get||(Rt[bn]=lt(rn,ht))}),Pn&&(Rt.length=Pn)),Xt&&(Xt=Mt(Xt,function(rn,bn){return!zt(Xt,rn,bn)}),he(Xt,function(rn,bn){var Tn=Pt[bn]||{};if(!Tn.get)if(rn=lt(rn,ht),Fe(rn)&&rn.reference){var $n=rn.reference;rn=function(){return Vt[$n]},Tn.get=rn}else Tn.value=rn;Tn.enumerable=!1,Pt[bn]=Tn})),pt(Rt,Pt),Vt[st]=Rt,Rt}function zt(rn,bn,Tn){Tn=ne(Tn);var $n=!1;return he(["get","set"],function(Dn){if(He(Tn,Dn+" ")){var xn=Tn.replace(Dn+" ","");rn[xn]&&((bn=lt(bn,ht))==="Timeout"&&(bn=ft),Qe(Pt,[xn,Dn],bn),$n=!0)}}),$n}}function ft(){return"Timeout"}Q.parse=function(xt){var ht={},Vt=lt(JSON.parse(xt),{map:ht});return function(st){he(st,function(Dt){for(var ln=we(Dt),In=0,on=ln.length;In<on;In++){var an=ln[In];if(Fe(Dt[an])){var Xt=Dt[an].reference;Xt&&st[Xt]&&(Dt[an]=st[Xt])}}var Rt=xe(Dt);Rt&&Rt.reference&&st[Rt.reference]&&Object.setPrototypeOf(Dt,st[Rt.reference])})}(ht),Vt},q.exports=Q},1907:function(q,Q,V){var _e=V(6768),ce=V(1352),ne=V(6435),Ee=V(2461),j=V(4331);Q=function(he){_e(he)&&(he=ce(he));for(var ye="",xe=arguments.length,Te=new Array(xe>1?xe-1:0),Se=1;Se<xe;Se++)Te[Se-1]=arguments[Se];for(var Ce=0,Oe=he.length;Ce<Oe;Ce++)ye+=he[Ce],Te[Ce]&&(ye+=Te[Ce]);for(var ze=ye.split(`
`),Ue=[],De=0,Fe=ze.length;De<Fe;De++){var Xe=ze[De],Ke=Xe.match(we);Ke&&Ue.push(Ke[1].length)}var He=Ue.length>0?ne.apply(null,Ue):0;return j(Ee(ze,function(Qe){return Qe[0]===" "?Qe.slice(He):Qe}).join(`
`))};var we=/^(\s+)\S+/;q.exports=Q},2439:function(q,Q,V){var _e=V(6049);Q=function(ce,ne){return _e(ce,ne,!0)},q.exports=Q},1352:function(q,Q,V){var _e=V(1369),ce=V(2461),ne=V(6472),Ee=V(6768);Q=function(j){return j?ne(j)?j:_e(j)&&!Ee(j)?ce(j):[j]:[]},q.exports=Q},4891:function(q,Q){var V=document;if(Q=function(ce){var ne=V.createElement("body");return ne.innerHTML=ce,ne.childNodes[0]},V.createRange&&V.body){var _e=V.createRange();_e.selectNode(V.body),_e.createContextualFragment&&(Q=function(ce){return _e.createContextualFragment(ce).childNodes[0]})}q.exports=Q},9296:function(q,Q,V){var _e=V(3875);Q=function(ce){return ce?(ce=_e(ce))-ce%1:ce===0?ce:0},q.exports=Q},3875:function(q,Q,V){var _e=V(3990),ce=V(5166),ne=V(4777),Ee=V(6768);Q=function(j){if(_e(j))return j;if(ce(j)){var we=ne(j.valueOf)?j.valueOf():j;j=ce(we)?we+"":we}return Ee(j)?+j:j===0?j:+j},q.exports=Q},300:function(q,Q,V){var _e=V(2763);Q=function(ne){if(_e(ne))return"";try{return ce.call(ne)}catch{}try{return ne+""}catch{}return""};var ce=Function.prototype.toString;q.exports=Q},3367:function(q,Q){Q=function(V){return V==null?"":V.toString()},q.exports=Q},4331:function(q,Q,V){var _e=V(7767),ce=V(3597);Q=function(ne,Ee){return Ee==null&&ne.trim?ne.trim():_e(ce(ne,Ee),Ee)},q.exports=Q},7756:function(q,Q,V){var _e=V(4193),ce=V(1286);Q=function(Ee,j){var we=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_e(we,ne);var he=we.ellipsis,ye=we.separator,xe=Ee.length;if(j>xe)return Ee;var Te=j-he.length;if(Te<1)return he;var Se=Ee.slice(0,Te);if(ce(ye))return Se+he;if(Ee.indexOf(ye,Te)!==Te){var Ce=Se.lastIndexOf(ye);Ce>-1&&(Se=Se.slice(0,Ce))}return Se+he};var ne={ellipsis:"..."};q.exports=Q},3085:function(q,Q,V){var _e=V(106),ce=V(9433),ne=V(3063),Ee=V(2349);Q=function(we){var he,ye=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return we===null&&(he="Null"),we===void 0&&(he="Undefined"),ce(we)&&(he="NaN"),Ee(we)&&(he="Buffer"),he||(he=_e(we).match(j))&&(he=he[1]),he?ye?ne(he):he:""};var j=/^\[object\s+(.*?)]$/;q.exports=Q},9016:function(q,Q){Q={},q.exports=Q},8166:function(q,Q,V){var _e=V(996),ce=V(2461);Q={encode:function(ne){return ne.length<32768?String.fromCodePoint.apply(String,ne):ce(_e(ne,32767),function(Ee){return String.fromCodePoint.apply(String,Ee)}).join("")},decode:function(ne){for(var Ee=[],j=0,we=ne.length;j<we;){var he=ne.charCodeAt(j++);if(he>=55296&&he<=56319&&j<we){var ye=ne.charCodeAt(j++);(64512&ye)==56320?Ee.push(((1023&he)<<10)+(1023&ye)+65536):(Ee.push(he),j--)}else Ee.push(he)}return Ee}},q.exports=Q},5484:function(q,Q,V){var _e=V(2727),ce=V(8985),ne=!1;function Ee(j){ne&&Q.emit(j)}Q={start:function(){ne=!0},stop:function(){ne=!1}},ce.mixin(Q),_e?(window.addEventListener("error",function(j){Ee(j.error)}),window.addEventListener("unhandledrejection",function(j){Ee(j.reason)})):(process.on("uncaughtException",Ee),process.on("unhandledRejection",Ee)),q.exports=Q},5229:function(q,Q){var V=0;Q=function(_e){var ce=++V+"";return _e?_e+ce:ce},q.exports=Q},42:function(q,Q,V){var _e=V(5972);function ce(ne,Ee){return ne===Ee}Q=function(ne,Ee){return Ee=Ee||ce,_e(ne,function(j,we,he){for(var ye=he.length;++we<ye;)if(Ee(j,he[we]))return!1;return!0})},q.exports=Q},4502:function(q,Q,V){var _e=V(3367);Q=function(ce){return _e(ce).toLocaleUpperCase()},q.exports=Q},3023:function(q,Q){Q=function(V){return V.length<1?V:V[0].toUpperCase()+V.slice(1)},q.exports=Q},5742:function(q,Q,V){var _e=V(8166);Q={encode:function(ze){for(var Ue=_e.decode(ze),De="",Fe=0,Xe=Ue.length;Fe<Xe;Fe++)De+=Se(Ue[Fe]);return De},decode:function(ze,Ue){ce=_e.decode(ze),ne=0,Ee=ce.length,j=0,we=0,he=0,ye=128,xe=191;for(var De,Fe=[];(De=Ce(Ue))!==!1;)Fe.push(De);return _e.encode(Fe)}};var ce,ne,Ee,j,we,he,ye,xe,Te=String.fromCharCode;function Se(ze){if((4294967168&ze)==0)return Te(ze);var Ue,De,Fe="";for((4294965248&ze)==0?(Ue=1,De=192):(4294901760&ze)==0?(Ue=2,De=224):(4292870144&ze)==0&&(Ue=3,De=240),Fe+=Te((ze>>6*Ue)+De);Ue>0;)Fe+=Te(128|63&ze>>6*(Ue-1)),Ue--;return Fe}function Ce(ze){for(;;){if(ne>=Ee&&he){if(ze)return Oe();throw new Error("Invalid byte index")}if(ne===Ee)return!1;var Ue=ce[ne];if(ne++,he){if(Ue<ye||Ue>xe){if(ze)return ne--,Oe();throw new Error("Invalid continuation byte")}if(ye=128,xe=191,j=j<<6|63&Ue,++we===he){var De=j;return j=0,he=0,we=0,De}}else{if((128&Ue)==0)return Ue;if((224&Ue)==192)he=1,j=31&Ue;else if((240&Ue)==224)Ue===224&&(ye=160),Ue===237&&(xe=159),he=2,j=15&Ue;else{if((248&Ue)!=240){if(ze)return Oe();throw new Error("Invalid UTF-8 detected")}Ue===240&&(ye=144),Ue===244&&(xe=143),he=3,j=7&Ue}}}}function Oe(){var ze=ne-we-1;return ne=ze+1,j=0,he=0,we=0,ye=128,xe=191,ce[ze]}q.exports=Q},5936:function(q,Q,V){var _e=V(3366);Q=function(){var Ee=_e(16);return Ee[6]=15&Ee[6]|64,Ee[8]=63&Ee[8]|128,ce[Ee[0]]+ce[Ee[1]]+ce[Ee[2]]+ce[Ee[3]]+"-"+ce[Ee[4]]+ce[Ee[5]]+"-"+ce[Ee[6]]+ce[Ee[7]]+"-"+ce[Ee[8]]+ce[Ee[9]]+"-"+ce[Ee[10]]+ce[Ee[11]]+ce[Ee[12]]+ce[Ee[13]]+ce[Ee[14]]+ce[Ee[15]]};for(var ce=[],ne=0;ne<256;ne++)ce[ne]=(ne+256).toString(16).substr(1);q.exports=Q},2578:function(q,Q,V){var _e=V(3783);Q=function(ce){var ne=[];return _e(ce,function(Ee){ne.push(Ee)}),ne},q.exports=Q},3514:function(q,Q,V){var _e=V(8573),ce=V(9882),ne=V(4331),Ee=V(3783),j=V(2461),we=V(9433);Q=function(){var he=_e("viewport");if(!he)return 1;he=j(he.split(","),function(Ce){return ne(Ce)});var ye=.25,xe=5,Te=1;Ee(he,function(Ce){var Oe=(Ce=Ce.split("="))[0];Ce=Ce[1],Oe==="initial-scale"&&(Te=+Ce),Oe==="maximum-scale"&&(xe=+Ce),Oe==="minimum-scale"&&(ye=+Ce)});var Se=ce(Te,ye,xe);return we(Se)?1:Se},q.exports=Q},5491:function(q,Q,V){var _e=V(4198);Q=function(ce,ne){return _e(ne,ce)},q.exports=Q},8933:function(q,Q){Q=function(V){for(var _e=[],ce=document.evaluate(V,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),ne=0;ne<ce.snapshotLength;ne++)_e.push(ce.snapshotItem(ne));return _e},q.exports=Q},4095:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Kn,qn){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(un,yn){un.__proto__=yn}||function(un,yn){for(var Rn in yn)Object.prototype.hasOwnProperty.call(yn,Rn)&&(un[Rn]=yn[Rn])},_e(Kn,qn)},function(Kn,qn){if(typeof qn!="function"&&qn!==null)throw new TypeError("Class extends value "+String(qn)+" is not a constructor or null");function un(){this.constructor=Kn}_e(Kn,qn),Kn.prototype=qn===null?Object.create(qn):(un.prototype=qn.prototype,new un)}),ne=this&&this.__makeTemplateObject||function(Kn,qn){return Object.defineProperty?Object.defineProperty(Kn,"raw",{value:qn}):Kn.raw=qn,Kn},Ee=this&&this.__createBinding||(Object.create?function(Kn,qn,un,yn){yn===void 0&&(yn=un);var Rn=Object.getOwnPropertyDescriptor(qn,un);Rn&&!("get"in Rn?!qn.__esModule:Rn.writable||Rn.configurable)||(Rn={enumerable:!0,get:function(){return qn[un]}}),Object.defineProperty(Kn,yn,Rn)}:function(Kn,qn,un,yn){yn===void 0&&(yn=un),Kn[yn]=qn[un]}),j=this&&this.__setModuleDefault||(Object.create?function(Kn,qn){Object.defineProperty(Kn,"default",{enumerable:!0,value:qn})}:function(Kn,qn){Kn.default=qn}),we=this&&this.__importStar||function(Kn){if(Kn&&Kn.__esModule)return Kn;var qn={};if(Kn!=null)for(var un in Kn)un!=="default"&&Object.prototype.hasOwnProperty.call(Kn,un)&&Ee(qn,Kn,un);return j(qn,Kn),qn},he=this&&this.__read||function(Kn,qn){var un=typeof Symbol=="function"&&Kn[Symbol.iterator];if(!un)return Kn;var yn,Rn,Yn=un.call(Kn),mr=[];try{for(;(qn===void 0||qn-- >0)&&!(yn=Yn.next()).done;)mr.push(yn.value)}catch(Sr){Rn={error:Sr}}finally{try{yn&&!yn.done&&(un=Yn.return)&&un.call(Yn)}finally{if(Rn)throw Rn.error}}return mr},ye=this&&this.__importDefault||function(Kn){return Kn&&Kn.__esModule?Kn:{default:Kn}};Object.defineProperty(Q,"__esModule",{value:!0});var xe,Te=ye(V(2925)),Se=we(V(4030)),Ce=ye(V(3467)),Oe=ye(V(8719)),ze=ye(V(242)),Ue=ye(V(5166)),De=ye(V(6768)),Fe=ye(V(2749)),Xe=ye(V(6997)),Ke=ye(V(4193)),He=ye(V(9833)),Qe=ye(V(3367)),pt=ye(V(3875)),Mt=ye(V(9296)),wt=ye(V(8099)),bt=ye(V(8901)),rt=ye(V(6156)),nt=ye(V(1286)),it=ye(V(4777)),dt=ye(V(1352)),lt=ye(V(6472)),ft=ye(V(42)),xt=ye(V(6341)),ht=ye(V(8887)),Vt=ye(V(4675)),st=ye(V(3783)),Dt=ye(V(2461)),ln=ye(V(4331)),In=ye(V(3063)),on=ye(V(9585)),an=ye(V(2533)),Xt=ye(V(1512)),Rt=ye(V(8613)),en=ye(V(1443)),hn=ye(V(6049)),vn=ye(V(4400)),Pn=ye(V(2327)),Pt=ye(V(9963)),zt=ye(V(6837)),rn=ye(V(3988)),bn=ye(V(3651)),Tn=ye(V(6053)),$n=V(1893),Dn=ye(V(1907)),xn=ye(V(4891)),En=ye(V(5229)),Cn=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,Qn={comment:"",string:"",number:"",keyword:"",operator:""},nr=function(Kn){function qn(un,yn){var Rn=yn.type,Yn=Rn===void 0?"log":Rn,mr=yn.args,Sr=mr===void 0?[]:mr,Lr=yn.id,br=yn.group,Br=yn.targetGroup,Fr=yn.header,Gr=yn.ignoreFilter,Ur=Gr!==void 0&&Gr,Ri=yn.accessGetter,Li=yn.unenumerable,Ai=yn.lazyEvaluation,Cr=Kn.call(this)||this;return Cr.container=(0,Rt.default)("div"),Cr.count=1,Cr.width=0,Cr.height=0,Cr.isHidden=!1,Cr.columns=[],Cr.elements={},Cr.objects={},Cr.console=un,Cr.type=Yn,Cr.group=br,Cr.targetGroup=Br,Cr.args=Sr,Cr.id=Lr,Cr.header=Fr,Cr.ignoreFilter=Ur,Cr.collapsed=!1,Cr.container.log=Cr,Cr.height=0,Cr.width=0,Cr.$container=(0,Xt.default)(Cr.container),Cr.accessGetter=Ri,Cr.unenumerable=Li,Cr.lazyEvaluation=Ai,Cr.resizeSensor=new ze.default(Cr.container),Cr.onResize=(0,hn.default)(function(){(0,on.default)(Cr.container)?Cr.isHidden=!0:(Cr.isHidden||Cr.updateSize(!1),Cr.isHidden=!1)},16),Cr.formatMsg(),Cr.group&&Cr.checkGroup(),Cr.bindEvent(),Cr}return ce(qn,Kn),qn.prototype.checkGroup=function(){for(var un=this.group,yn=!1;un;){if(un.collapsed){yn=!0;break}un=un.parent}return yn!==this.collapsed&&(this.collapsed=yn,!0)},qn.prototype.updateIcon=function(un){var yn=this.console.c;return this.$container.find(yn(".icon")).rmAttr("class").addClass([yn("icon"),yn("icon-".concat(un))]),this},qn.prototype.addCount=function(){this.count++;var un=this.$container,yn=this.count,Rn=this.console.c,Yn=un.find(Rn(".count-container")),mr=un.find(Rn(".icon-container")),Sr=Yn.find(Rn(".count"));return yn===2&&Yn.rmClass(Rn("hidden")),Sr.text((0,Qe.default)(yn)),mr.addClass(Rn("hidden")),this},qn.prototype.groupEnd=function(){var un=this.$container,yn=this.console.c;return un.find(".".concat(yn("nesting-level"),":not(.").concat(yn("group-closed"),")")).last().addClass(yn("group-closed")),this},qn.prototype.updateTime=function(un){var yn=this.$container.find(this.console.c(".time-container"));return this.header&&(yn.find("span").eq(0).text(un),this.header.time=un),this},qn.prototype.isAttached=function(){return!!this.container.parentNode},qn.prototype.isSimple=function(){return!(0,Tn.default)(this.args,function(un){return(0,Ue.default)(un)})},qn.prototype.updateSize=function(un){un===void 0&&(un=!0);var yn=this.container.getBoundingClientRect(),Rn=yn.width,Yn=yn.height-1;this.height!==Yn&&(this.height=Yn,un||this.emit("updateHeight")),this.width!==Rn&&(this.width=Rn)},qn.prototype.html=function(){return this.container.outerHTML},qn.prototype.text=function(){return this.content.textContent||""},qn.prototype.select=function(){this.$container.addClass(this.console.c("selected"))},qn.prototype.deselect=function(){this.$container.rmClass(this.console.c("selected"))},qn.prototype.copy=function(){var un=this.args,yn="";(0,st.default)(un,function(Rn,Yn){Yn!==0&&(yn+=" "),(0,Ue.default)(Rn)?yn+=(0,vn.default)(Rn):yn+=(0,Qe.default)(Rn)}),(0,Pn.default)(yn)},qn.prototype.bindEvent=function(){var un=this,yn=this.console.c,Rn=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",yn(".dom-viewer"),function(Yn){return Yn.stopPropagation()}).on("click",yn(".preview"),function(Yn){Yn.stopPropagation(),Rn.renderObjectViewer(this)}).on("click",function(){return un.click()})},qn.prototype.renderEl=function(){var un=this.elements,yn=this.console.c,Rn=this;this.$container.find(yn(".dom-viewer")).each(function(){var Yn=(0,Xt.default)(this).data("id");new Oe.default(this,{node:un[Yn],theme:Rn.console.getOption("theme")})})},qn.prototype.renderObjectViewer=function(un){var yn=this,Rn=yn.console,Yn=yn.unenumerable,mr=yn.accessGetter,Sr=yn.lazyEvaluation,Lr=Rn.c,br=(0,Xt.default)(un),Br=br.data("id");if(Br){var Fr=this.objects[Br],Gr=br.find(Lr(".json"));if(Gr.hasClass(Lr("hidden"))){if(Gr.data("init")!=="true"){if(Sr){var Ur=new Se.default(Gr.get(0),{unenumerable:Yn,accessGetter:mr});Ur.setOption("theme",Rn.getOption("theme")),Ur.set(Fr)}else{var Ri=new Se.Static(Gr.get(0));Ri.setOption("theme",Rn.getOption("theme")),Ri.set(Fr)}Gr.data("init","true")}Gr.rmClass(Lr("hidden"))}else Gr.addClass(Lr("hidden"))}},qn.prototype.renderTable=function(un){var yn=this,Rn="__LunaConsoleValue",Yn=this,mr=Yn.columns,Sr=Yn.$container,Lr=Yn.console,br=Lr.c,Br=Sr.find(br(".data-grid")),Fr=un[0],Gr=new Ce.default(Br.get(0),{columns:(0,wt.default)([{id:"(index)",title:"(index)",sortable:!0}],(0,Dt.default)(mr,function(Ur){return{id:Ur,title:Ur,sortable:!0}})),theme:Lr.getOption("theme")});(0,st.default)(Fr,function(Ur,Ri){var Li={"(index)":(0,Qe.default)(Ri)};mr.forEach(function(Ai){(0,Ue.default)(Ur)?Li[Ai]=Ai===Rn?"":yn.formatTableVal(Ur[Ai]):(0,Xe.default)(Ur)&&(Li[Ai]=Ai===Rn?yn.formatTableVal(Ur):"")}),Gr.append(Li)})},qn.prototype.extractObj=function(un,yn,Rn){yn===void 0&&(yn={});var Yn=this.accessGetter,mr=this.unenumerable;(0,Ke.default)(yn,{accessGetter:Yn,unenumerable:mr,symbol:mr,timeout:1e3}),function(Sr,Lr,br){var Br=(0,Pt.default)(Sr,Lr);(0,zt.default)(function(){return br(Br)})}(un,yn,function(Sr){return Rn(JSON.parse(Sr))})},qn.prototype.click=function(){var un=this,yn=un.type,Rn=un.$container,Yn=un.console,mr=Yn.c;switch(yn){case"log":case"warn":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Yn.toggleGroup(this);break;case"error":Rn.find(mr(".stack")).toggleClass(mr("hidden"))}},qn.prototype.formatMsg=function(){var un=this.args,yn=this,Rn=yn.type,Yn=yn.id,mr=yn.header,Sr=yn.group,Lr=this.console.c;un=(0,Vt.default)(un);var br,Br,Fr="";switch(Rn!=="group"&&Rn!=="groupCollapsed"||un.length===0&&(un=["console.group"]),Rn){case"log":case"debug":Fr=this.formatCommon(un);break;case"dir":Fr=this.formatDir(un);break;case"warn":br="warn",Fr=this.formatCommon(un);break;case"error":(0,De.default)(un[0])&&un.length!==1&&(un=this.substituteStr(un)),Br=un[0],br="error",Br=(0,Fe.default)(Br)?Br:new Error(this.formatCommon(un)),Fr=this.formatErr(Br);break;case"table":Fr=this.formatTable(un);break;case"html":Fr=un[0];break;case"input":Fr=this.formatJs(un[0]),br="input";break;case"output":Fr=this.formatCommon(un),br="output";break;case"groupCollapsed":Fr=this.formatCommon(un),br="caret-right";break;case"group":Fr=this.formatCommon(un),br="caret-down"}(0,xt.default)(["log","debug","warn"],Rn)&&this.isSimple()&&(Fr=(0,rn.default)(Fr,function(Gr){return'<a href="'.concat(Gr,'" target="_blank">').concat(Gr,"</a>")})),Fr=this.render({msg:Fr,type:Rn,icon:br,id:Yn,header:mr,group:Sr}),this.$container.addClass("".concat(Lr("log-container"))).html(Fr),Rn==="table"&&((0,ht.default)(this.columns)||this.renderTable(un)),(0,ht.default)(this.elements)||this.renderEl(),this.$content=this.$container.find(Lr(".log-content")),this.content=this.$content.get(0)},qn.prototype.render=function(un){var yn=this.console.c,Rn="",Yn="";if(un.group)for(var mr=un.group.indentLevel,Sr=0;Sr<mr;Sr++)Yn+='<div class="'.concat(yn("nesting-level"),'"></div>');un.header&&(Rn+=(0,Dn.default)(xe||(xe=ne([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`],[`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),yn("header"),Yn,yn("time-from-container"),un.header.time,un.header.from));var Lr="";return un.icon&&(Lr='<div class="'.concat(yn("icon-container"),'"><span class="').concat(yn("icon icon-"+un.icon),'"></span></div>')),Rn+=`
    <div class="`.concat(yn(un.type+" log-item"),`">
      `).concat(Yn,`
      `).concat(Lr,`
      <div class="`).concat(yn("count-container hidden"),`">
        <div class="`).concat(yn("count"),`"></div>
      </div>    
      <div class="`).concat(yn("log-content-wrapper"),`">
        <div class="`).concat(yn("log-content"),'">').concat(un.msg,`</div>
      </div>
    </div>`)},qn.prototype.formatTable=function(un){var yn=un[0],Rn=un[1],Yn=[];return(0,De.default)(Rn)&&(Rn=(0,dt.default)(Rn)),(0,lt.default)(Rn)||(Rn=null),(0,Ue.default)(yn)?((0,st.default)(yn,function(mr){(0,Xe.default)(mr)?Yn.push("__LunaConsoleValue"):(0,Ue.default)(mr)&&(Yn=Yn.concat((0,an.default)(mr)))}),(Yn=(0,ft.default)(Yn)).sort(),Rn&&(Yn=Yn.filter(function(mr){return(0,xt.default)(Rn,mr)})),Yn.length>20&&(Yn=Yn.slice(0,20)),(0,ht.default)(Yn)?this.formatCommon(un):(this.columns=Yn,this.console.c('<div class="data-grid"></div>')+this.formatPreview(yn))):this.formatCommon(un)},qn.prototype.formatErr=function(un){var yn=un.stack?un.stack.split(`
`):[],Rn="".concat(un.message||yn[0],"<br/>");return yn=yn.map(function(Yn){return(0,bt.default)(Yn)}),Rn+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(yn.slice(1).join("<br/>"),"</div>").replace(Cn,function(Yn){return'<a href="'.concat(Yn,'" target="_blank">').concat(Yn,"</a>")})},qn.prototype.formatCommon=function(un,yn){var Rn=(yn===void 0?{}:yn).htmlForEl,Yn=Rn===void 0||Rn,mr=(0,De.default)(un[0])&&un.length!==1;mr&&(un=this.substituteStr(un));for(var Sr=0,Lr=un.length;Sr<Lr;Sr++){var br=un[Sr];(0,He.default)(br)&&Yn?un[Sr]=this.formatEl(br):(0,it.default)(br)?un[Sr]=this.formatFn(br):(0,Ue.default)(br)?un[Sr]=this.formatPreview(br):(0,nt.default)(br)?un[Sr]="undefined":(0,rt.default)(br)?un[Sr]="null":(br=(0,Qe.default)(br),Sr===0&&mr||(br=(0,bt.default)(br)),un[Sr]=br)}return un.join(" ")},qn.prototype.formatDir=function(un){return this.formatCommon(un,{htmlForEl:!1})},qn.prototype.formatTableVal=function(un){var yn=this.console.c;return(0,Ue.default)(un)?"{\u2026}":(0,Xe.default)(un)?(0,xn.default)('<div class="'.concat(yn("preview"),'">').concat((0,Te.default)(un),"</div>")):(0,Qe.default)(un)},qn.prototype.formatPreview=function(un){var yn=this,Rn=this.console.c,Yn=(0,En.default)();this.lazyEvaluation?this.objects[Yn]=un:this.extractObj(un,{},function(Sr){yn.objects[Yn]=Sr});var mr=(0,$n.getObjType)(un);return mr==="Array"&&un.length>1&&(mr="(".concat(un.length,")")),'<div class="'.concat(Rn("preview"),'" data-id="').concat(Yn,'">')+'<span class="'.concat(Rn("descriptor"),'">').concat(mr,"</span> ")+'<span class="'.concat(Rn("object-preview"),'">').concat((0,Te.default)(un,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+'<div class="'.concat(Rn("json hidden"),'"></div></div>')},qn.prototype.substituteStr=function(un){var yn=(0,bt.default)(un[0]),Rn=!1,Yn="";un.shift();for(var mr=0,Sr=yn.length;mr<Sr;mr++){var Lr=yn[mr];if(Lr==="%"&&un.length!==0){mr++;var br=un.shift();switch(yn[mr]){case"i":case"d":Yn+=(0,Mt.default)(br);break;case"f":Yn+=(0,pt.default)(br);break;case"s":Yn+=(0,Qe.default)(br);break;case"O":(0,Ue.default)(br)&&(Yn+=this.formatPreview(br));break;case"o":(0,He.default)(br)?Yn+=this.formatEl(br):(0,Ue.default)(br)&&(Yn+=this.formatPreview(br));break;case"c":if(yn.length<=mr+1)break;Rn&&(Yn+="</span>"),Rn=!0,Yn+='<span style="'.concat(fr(br),'">');break;default:mr--,un.unshift(br),Yn+=Lr}}else Yn+=Lr}return Rn&&(Yn+="</span>"),un.unshift(Yn),un},qn.prototype.formatJs=function(un){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c((0,bn.default)(un,"js",Qn)),"</pre>")},qn.prototype.formatFn=function(un){return'<pre style="display:inline">'.concat(this.formatJs(un.toString()),"</pre>")},qn.prototype.formatEl=function(un){var yn=(0,En.default)();return this.elements[yn]=un,this.console.c('<div class="dom-viewer" data-id="'.concat(yn,'"></div>'))},qn}(en.default);function fr(Kn){var qn=(Kn=(0,In.default)(Kn)).split(";"),un={};(0,st.default)(qn,function(Rn){if((0,xt.default)(Rn,":")){var Yn=he(Rn.split(":"),2),mr=Yn[0],Sr=Yn[1];un[(0,ln.default)(mr)]=(0,ln.default)(Sr)}}),un.display="inline-block",un["max-width"]="100%",delete un.width,delete un.height;var yn="";return(0,st.default)(un,function(Rn,Yn){yn+="".concat(Yn,":").concat(Rn,";")}),yn}Q.default=nr},2925:function(q,Q,V){var _e=this&&this.__importDefault||function(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}};Object.defineProperty(Q,"__esModule",{value:!0});var ce=_e(V(8901)),ne=_e(V(3367)),Ee=_e(V(6341)),j=_e(V(6930)),we=_e(V(4187)),he=_e(V(3783)),ye=_e(V(4858)),xe=_e(V(8887)),Te=V(1893),Se=(0,V(2375).classPrefix)("console");Q.default=function Ue(De,Fe){var Xe,Ke=Fe===void 0?{}:Fe,He=Ke.topObj,Qe=Ke.level,pt=Qe===void 0?0:Qe,Mt=Ke.getterVal,wt=Mt!==void 0&&Mt,bt=Ke.unenumerable,rt=bt===void 0||bt,nt="",it="",dt=[],lt=[],ft="";He=He||De;var xt={getterVal:wt,unenumerable:rt,level:pt+1},ht=pt===0,Vt='<span class="'.concat(Se("key"),'">'),st='<span class="'.concat(Se("number"),'">'),Dt='<span class="'.concat(Se("null"),'">'),ln='<span class="'.concat(Se("string"),'">'),In='<span class="'.concat(Se("boolean"),'">'),on='<span class="'.concat(Se("special"),'">'),an=function(En){return(0,ce.default)(En).replace(/\\n/g,"\u21B5").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Xt="</span>";function Rt(En){return En=(0,ne.default)(En),(0,Ee.default)(Ce,En)||(0,j.default)(En,"Array[")?on+an(En)+Xt:ln+an('"'.concat(En,'"'))+Xt}function en(En){if(Xe>5)ft=", \u2026";else{var Cn=function(nr){return Vt+an(nr)+Xt}(ze(En));if(!wt){var Qn=Object.getOwnPropertyDescriptor(De,En);if(Qn&&Qn.get)return dt.push("".concat(Cn,": ").concat(Rt("(...)"))),void Xe++}dt.push("".concat(Cn,": ").concat(Ue(He[En],xt))),Xe++}}try{it={}.toString.call(De)}catch{it="[object Object]"}var hn,vn=it=="[object Array]",Pn=it=="[object Object]",Pt=it=="[object Number]",zt=it=="[object RegExp]",rn=it=="[object Symbol]",bn=it=="[object Function]",Tn=it=="[object Boolean]";if(it=="[object String]")nt=Rt(ze(De));else if(zt)hn=ze(De.toString()),nt=ln+hn+Xt;else if(bn)nt=Rt("\u0192");else if(vn)if(ht){nt="[";var $n=De.length,Dn="";$n>100&&($n=100,Dn=", \u2026");for(var xn=0;xn<$n;xn++)dt.push("".concat(Ue(De[xn],xt)));nt+=dt.join(", ")+Dn+"]"}else nt="Array(".concat(De.length,")");else if(Pn)Oe(De)&&(De=Object.getPrototypeOf(De)),lt=rt?Object.getOwnPropertyNames(De):Object.keys(De),ht?(Xe=1,nt="{",(0,he.default)(lt,en),nt+=dt.join(", ")+ft+"}"):(nt=(0,Te.getObjType)(De))==="Object"&&(nt="{\u2026}");else if(Pt)nt=De+"",nt=(0,ye.default)(nt,"Infinity")||nt==="NaN"?'"'.concat(nt,'"'):st+nt+Xt;else if(Tn)nt=In+(De?"true":"false")+Xt;else if(De===null)nt=function(En){return Dt+En+Xt}("null");else if(rn)nt=Rt("Symbol");else if(De===void 0)nt=Rt("undefined");else try{Oe(De)&&(De=Object.getPrototypeOf(De)),ht?(Xe=1,nt="{",lt=rt?Object.getOwnPropertyNames(De):Object.keys(De),(0,he.default)(lt,en),nt+=dt.join(", ")+ft+"}"):(nt=(0,Te.getObjType)(De))==="Object"&&(nt="{\u2026}")}catch{nt=Rt(De)}return nt};var Ce=["(...)","undefined","Symbol","Object","\u0192"];function Oe(Ue){var De=(0,xe.default)(Object.getOwnPropertyNames(Ue)),Fe=Object.getPrototypeOf(Ue);return De&&Fe&&Fe!==Object.prototype}function ze(Ue){return(0,we.default)(Ue).replace(/\\'/g,"'").replace(/\t/g,"\\t")}},7132:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(an,Xt){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,en){Rt.__proto__=en}||function(Rt,en){for(var hn in en)Object.prototype.hasOwnProperty.call(en,hn)&&(Rt[hn]=en[hn])},_e(an,Xt)},function(an,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Class extends value "+String(Xt)+" is not a constructor or null");function Rt(){this.constructor=an}_e(an,Xt),an.prototype=Xt===null?Object.create(Xt):(Rt.prototype=Xt.prototype,new Rt)}),ne=this&&this.__makeTemplateObject||function(an,Xt){return Object.defineProperty?Object.defineProperty(an,"raw",{value:Xt}):an.raw=Xt,an},Ee=this&&this.__read||function(an,Xt){var Rt=typeof Symbol=="function"&&an[Symbol.iterator];if(!Rt)return an;var en,hn,vn=Rt.call(an),Pn=[];try{for(;(Xt===void 0||Xt-- >0)&&!(en=vn.next()).done;)Pn.push(en.value)}catch(Pt){hn={error:Pt}}finally{try{en&&!en.done&&(Rt=vn.return)&&Rt.call(vn)}finally{if(hn)throw hn.error}}return Pn},j=this&&this.__importDefault||function(an){return an&&an.__esModule?an:{default:an}};Object.defineProperty(Q,"__esModule",{value:!0});var we=j(V(4095)),he=j(V(1286)),ye=j(V(1194)),xe=j(V(8847)),Te=j(V(6768)),Se=j(V(6329)),Ce=j(V(5229)),Oe=j(V(1754)),ze=j(V(4777)),Ue=j(V(9001)),De=j(V(8887)),Fe=j(V(6341)),Xe=j(V(2327)),Ke=j(V(3783)),He=j(V(1352)),Qe=j(V(2533)),pt=j(V(9702)),Mt=j(V(2439)),wt=j(V(8933)),bt=j(V(3063)),rt=j(V(4407)),nt=j(V(9585)),it=j(V(1907)),dt=j(V(242)),lt=j(V(6156)),ft=j(V(1018)),xt=V(1571),ht=navigator.userAgent,Vt=ht.indexOf("Android")>-1||ht.indexOf("Adr")>-1,st=0,Dt=function(an){function Xt(Rt,en){en===void 0&&(en={});var hn=an.call(this,Rt,{compName:"console"},en)||this;return hn.spaceHeight=0,hn.topSpaceHeight=0,hn.bottomSpaceHeight=0,hn.lastScrollTop=0,hn.lastTimestamp=0,hn.speedToleranceFactor=100,hn.maxSpeedTolerance=2e3,hn.minSpeedTolerance=100,hn.logs=[],hn.displayLogs=[],hn.timer={},hn.counter={},hn.asyncList=[],hn.asyncTimer=null,hn.isAtBottom=!0,hn.groupStack=new Ue.default,hn.selectedLog=null,hn.onScroll=function(){var vn=hn.container,Pn=vn.scrollHeight,Pt=vn.offsetHeight,zt=vn.scrollTop;if(!(zt<=0||Pt+zt>Pn)){var rn=!1;(Pn===Pt||zt===Pn-Pt)&&(rn=!0),hn.isAtBottom=rn;var bn=hn.lastScrollTop,Tn=hn.lastTimestamp,$n=(0,xe.default)(),Dn=$n-Tn,xn=zt-bn,En=Math.abs(xn/Dn)*hn.speedToleranceFactor;Dn>1e3&&(En=1e3),En>hn.maxSpeedTolerance&&(En=hn.maxSpeedTolerance),En<hn.minSpeedTolerance&&(En=hn.minSpeedTolerance),hn.lastScrollTop=zt,hn.lastTimestamp=$n;var Cn=0,Qn=0;bn<zt?(Cn=hn.minSpeedTolerance,Qn=En):(Cn=En,Qn=hn.minSpeedTolerance),hn.topSpaceHeight<zt-Cn&&hn.topSpaceHeight+hn.el.offsetHeight>zt+Pt+Qn||hn.renderViewport({topTolerance:2*Cn,bottomTolerance:2*Qn})}},hn.initTpl(),hn.initOptions(en,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"all",accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),hn.$el=hn.find(".logs"),hn.el=hn.$el.get(0),hn.$fakeEl=hn.find(".fake-logs"),hn.fakeEl=hn.$fakeEl.get(0),hn.$space=hn.find(".logs-space"),hn.space=hn.$space.get(0),Vt&&(hn.speedToleranceFactor=800,hn.maxSpeedTolerance=3e3,hn.minSpeedTolerance=800),hn.resizeSensor=new dt.default(Rt),hn.renderViewport=(0,Mt.default)(function(vn){hn._renderViewport(vn)},16),hn.global={copy:function(vn){(0,Te.default)(vn)||(vn=JSON.stringify(vn,null,2)),(0,Xe.default)(vn)},$:function(vn){return document.querySelector(vn)},$$:function(vn){return(0,He.default)(document.querySelectorAll(vn))},$x:function(vn){return(0,wt.default)(vn)},clear:function(){hn.clear()},dir:function(vn){hn.dir(vn)},table:function(vn,Pn){hn.table(vn,Pn)},keys:Qe.default},hn.bindEvent(),hn}return ce(Xt,an),Xt.prototype.setGlobal=function(Rt,en){this.global[Rt]=en},Xt.prototype.destroy=function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),an.prototype.destroy.call(this)},Xt.prototype.count=function(Rt){Rt===void 0&&(Rt="default");var en=this.counter;(0,he.default)(en[Rt])?en[Rt]=1:en[Rt]++,this.info("".concat(Rt,": ").concat(en[Rt]))},Xt.prototype.countReset=function(Rt){Rt===void 0&&(Rt="default"),this.counter[Rt]=0},Xt.prototype.assert=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];if(!(0,De.default)(Rt)){var hn=Rt.shift();hn||(Rt.length===0&&Rt.unshift("console.assert"),Rt.unshift("Assertion failed: "),this.insert("error",Rt))}},Xt.prototype.log=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,De.default)(Rt)||this.insert("log",Rt)},Xt.prototype.debug=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,De.default)(Rt)||this.insert("debug",Rt)},Xt.prototype.dir=function(Rt){(0,he.default)(Rt)||this.insert("dir",[Rt])},Xt.prototype.table=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,De.default)(Rt)||this.insert("table",Rt)},Xt.prototype.time=function(Rt){if(Rt===void 0&&(Rt="default"),this.timer[Rt])return this.insert("warn",["Timer '".concat(Rt,"' already exists")]);this.timer[Rt]=(0,ye.default)()},Xt.prototype.timeLog=function(Rt){Rt===void 0&&(Rt="default");var en=this.timer[Rt];if(!en)return this.insert("warn",["Timer '".concat(Rt,"' does not exist")]);this.info("".concat(Rt,": ").concat((0,ye.default)()-en,"ms"))},Xt.prototype.timeEnd=function(Rt){Rt===void 0&&(Rt="default"),this.timeLog(Rt),delete this.timer[Rt]},Xt.prototype.clear=function(Rt){Rt===void 0&&(Rt=!1),this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new Ue.default,this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),Rt?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])},Xt.prototype.info=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,De.default)(Rt)||this.insert("log",Rt)},Xt.prototype.error=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,De.default)(Rt)||this.insert("error",Rt)},Xt.prototype.warn=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,De.default)(Rt)||this.insert("warn",Rt)},Xt.prototype.group=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];this.insert({type:"group",args:Rt,ignoreFilter:!0})},Xt.prototype.groupCollapsed=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];this.insert({type:"groupCollapsed",args:Rt,ignoreFilter:!0})},Xt.prototype.groupEnd=function(){this.insert("groupEnd")},Xt.prototype.evaluate=function(Rt){this.insert({type:"input",args:[Rt],ignoreFilter:!0});try{this.output(this.evalJs(Rt))}catch(en){this.insert({type:"error",ignoreFilter:!0,args:[en]})}},Xt.prototype.html=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];this.insert("html",Rt)},Xt.prototype.toggleGroup=function(Rt){Rt.targetGroup.collapsed?this.openGroup(Rt):this.collapseGroup(Rt)},Xt.prototype.output=function(Rt){this.insert({type:"output",args:[Rt],ignoreFilter:!0})},Xt.prototype.render=function(){var Rt=this.logs,en=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var hn=0,vn=Rt.length;hn<vn;hn++)this.attachLog(Rt[hn]);en&&((0,Fe.default)(this.displayLogs,en)||this.selectLog(null))},Xt.prototype.insert=function(Rt,en){var hn,vn=this.options,Pn=vn.showHeader,Pt=vn.asyncRender;if(Pn&&(hn={time:In(),from:on()}),Pt)return this.insertAsync(Rt,en,hn);this.insertSync(Rt,en,hn)},Xt.prototype.insertAsync=function(Rt,en,hn){this.asyncList.push([Rt,en,hn]),this.handleAsyncList()},Xt.prototype.insertSync=function(Rt,en,hn){var vn,Pn=this,Pt=this.logs,zt=this.groupStack,rn=this.options,bn=rn.maxNum,Tn=rn.accessGetter,$n=rn.unenumerable,Dn=rn.lazyEvaluation;if((vn=(0,Te.default)(Rt)?{type:Rt,args:en,header:hn}:Rt).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(zt.size>0&&(vn.group=zt.peek()),(0,Se.default)(vn,{id:++st,accessGetter:Tn,unenumerable:$n,lazyEvaluation:Dn}),vn.type==="group"||vn.type==="groupCollapsed"){var xn={id:(0,Ce.default)("group"),collapsed:!1,parent:zt.peek(),indentLevel:zt.size+1};vn.type==="groupCollapsed"&&(xn.collapsed=!0),vn.targetGroup=xn,zt.push(xn)}var En=new we.default(this,vn);En.on("updateHeight",function(){Pn.isAtBottom=!1,Pn.renderViewport()});var Cn=this.lastLog;if(Cn&&!(0,Fe.default)(["html","group","groupCollapsed"],En.type)&&Cn.type===En.type&&En.isSimple()&&Cn.text()===En.text()?(Cn.addCount(),En.header&&Cn.updateTime(En.header.time),En=Cn,this.detachLog(Cn)):(Pt.push(En),this.lastLog=En),bn!==0&&Pt.length>bn){var Qn=Pt[0];this.detachLog(Qn),Pt.shift()}this.attachLog(En),this.emit("insert",En)},Xt.prototype.updateTopSpace=function(Rt){this.topSpaceHeight=Rt,this.el.style.top=Rt+"px"},Xt.prototype.updateBottomSpace=function(Rt){this.bottomSpaceHeight=Rt},Xt.prototype.updateSpace=function(Rt){this.spaceHeight!==Rt&&(this.spaceHeight=Rt,this.space.style.height=Rt+"px")},Xt.prototype.detachLog=function(Rt){var en=this.displayLogs,hn=en.indexOf(Rt);hn>-1&&(en.splice(hn,1),this.renderViewport())},Xt.prototype.attachLog=function(Rt){if(this.filterLog(Rt)&&!Rt.collapsed){var en=this.displayLogs;if(en.length===0)return en.push(Rt),void this.renderViewport();var hn=(0,pt.default)(en);if(Rt.id>hn.id)return en.push(Rt),void this.renderViewport();for(var vn,Pn=0,Pt=en.length-1,zt=0;Pn<=Pt;){if((vn=en[zt=Pn+Math.floor((Pt-Pn)/2)]).id===Rt.id)return;vn.id<Rt.id?Pn=zt+1:Pt=zt-1}vn.id<Rt.id?en.splice(zt+1,0,Rt):en.splice(zt,0,Rt),this.renderViewport()}},Xt.prototype.handleAsyncList=function(Rt){var en=this;Rt===void 0&&(Rt=20);var hn=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){en.asyncTimer=null;var vn,Pn,Pt=!1,zt=hn.length;zt<1e3?(Pn=200,vn=400):zt<5e3?(Pn=500,vn=800):zt<1e4?(Pn=800,vn=1e3):zt<25e3?(Pn=1e3,vn=1200):zt<5e4?(Pn=1500,vn=1500):(Pn=2e3,vn=2500),Pn>zt&&(Pn=zt,Pt=!0);for(var rn=0;rn<Pn;rn++){var bn=Ee(hn.shift(),3),Tn=bn[0],$n=bn[1],Dn=bn[2];en.insertSync(Tn,$n,Dn)}Pt||xt(function(){return en.handleAsyncList(vn)})},Rt))},Xt.prototype.injectGlobal=function(){(0,Ke.default)(this.global,function(Rt,en){window[en]||(window[en]=Rt)})},Xt.prototype.clearGlobal=function(){(0,Ke.default)(this.global,function(Rt,en){window[en]&&window[en]===Rt&&delete window[en]})},Xt.prototype.evalJs=function(Rt){var en;this.injectGlobal();try{en=eval.call(window,"(".concat(Rt,")"))}catch{en=eval.call(window,Rt)}return this.setGlobal("$_",en),this.clearGlobal(),en},Xt.prototype.filterLog=function(Rt){var en=this.options.filter;return en==="all"||!!Rt.ignoreFilter||((0,ze.default)(en)?en(Rt):(0,Oe.default)(en)?en.test((0,bt.default)(Rt.text())):Rt.type===en)},Xt.prototype.collapseGroup=function(Rt){Rt.targetGroup.collapsed=!0,Rt.updateIcon("caret-right"),this.updateGroup(Rt)},Xt.prototype.openGroup=function(Rt){Rt.targetGroup.collapsed=!1,Rt.updateIcon("caret-down"),this.updateGroup(Rt)},Xt.prototype.updateGroup=function(Rt){for(var en=Rt.targetGroup,hn=this.logs,vn=hn.length,Pn=hn.indexOf(Rt)+1;Pn<vn;){var Pt=hn[Pn];if(!Pt.checkGroup()&&Pt.group===en)break;Pt.collapsed?this.detachLog(Pt):this.attachLog(Pt),Pn++}},Xt.prototype.selectLog=function(Rt){var en;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),(0,lt.default)(Rt)?this.emit("deselect"):(this.selectedLog=Rt,(en=this.selectedLog)===null||en===void 0||en.select(),this.emit("select",Rt))},Xt.prototype.bindEvent=function(){var Rt=this,en=this.$el,hn=this.c;this.resizeSensor.addListener(this.renderViewport);var vn=this;en.on("click",hn(".log-container"),function(){vn.selectLog(this.log)}),this.on("optionChange",function(Pn,Pt){var zt=Rt.logs;switch(Pn){case"maxNum":Pt>0&&zt.length>Pt&&(Rt.logs=zt.slice(zt.length-Pt),Rt.render());break;case"filter":Rt.render()}}),this.$container.on("scroll",this.onScroll)},Xt.prototype._renderViewport=function(Rt){var en=Rt===void 0?{}:Rt,hn=en.topTolerance,vn=hn===void 0?500:hn,Pn=en.bottomTolerance,Pt=Pn===void 0?500:Pn,zt=this.el,rn=this.container;if(!(0,nt.default)(rn)){for(var bn=rn,Tn=bn.scrollTop,$n=bn.offsetHeight,Dn=rn.getBoundingClientRect().width,xn=Tn-vn,En=Tn+$n+Pt,Cn=this.displayLogs,Qn=0,nr=0,fr=0,Kn=Cn.length,qn=this.fakeEl,un=document.createDocumentFragment(),yn=[],Rn=0;Rn<Kn;Rn++){var Yn=(Lr=Cn[Rn]).width;(Br=Lr.height)!==0&&Yn===Dn||(un.appendChild(Lr.container),yn.push(Lr))}if(yn.length>0){qn.appendChild(un),Rn=0;for(var mr=yn.length;Rn<mr;Rn++)yn[Rn].updateSize();qn.innerHTML=""}var Sr=document.createDocumentFragment();for(Rn=0;Rn<Kn;Rn++){var Lr,br=(Lr=Cn[Rn]).container,Br=Lr.height;fr>En?nr+=Br:fr+Br>xn?Sr.appendChild(br):fr<xn&&(Qn+=Br),fr+=Br}for(this.updateSpace(fr),this.updateTopSpace(Qn),this.updateBottomSpace(nr);zt.firstChild;)zt.lastChild&&zt.removeChild(zt.lastChild);zt.appendChild(Sr);var Fr=rn.scrollHeight;this.isAtBottom&&Tn<=Fr-$n&&(rn.scrollTop=1e7)}},Xt.prototype.initTpl=function(){this.$container.html(this.c((0,it.default)(ln||(ln=ne([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `],[`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))},Xt}(ft.default);Q.default=Dt,q.exports=Dt,q.exports.default=Dt;var ln,In=function(){return(0,rt.default)("HH:MM:ss ")};function on(){for(var an=new Error,Xt="",Rt=an.stack?an.stack.split(`
`):"",en=0,hn=Rt.length;en<hn;en++)if((Xt=Rt[en]).indexOf("winConsole")>-1&&en<hn-1){Xt=Rt[en+1];break}return Xt}},1893:function(q,Q,V){var _e=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getObjType=void 0;var ce=_e(V(3023));Q.getObjType=function(ne){return ne.constructor&&ne.constructor.name?ne.constructor.name:(0,ce.default)({}.toString.call(ne).replace(/(\[object )|]/g,""))}},1018:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Ce,Oe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Ue){ze.__proto__=Ue}||function(ze,Ue){for(var De in Ue)Object.prototype.hasOwnProperty.call(Ue,De)&&(ze[De]=Ue[De])},_e(Ce,Oe)},function(Ce,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function ze(){this.constructor=Ce}_e(Ce,Oe),Ce.prototype=Oe===null?Object.create(Oe):(ze.prototype=Oe.prototype,new ze)}),ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(1512)),we=V(2375),he=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Te=ne(V(5852)),Se=function(Ce){function Oe(ze,Ue,De){var Fe=Ue.compName,Xe=(De===void 0?{}:De).theme,Ke=Xe===void 0?"light":Xe,He=Ce.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,we.classPrefix)(Fe),He.options={},He.container=ze,He.$container=(0,j.default)(ze),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,we.getPlatform)()))]),He.on("optionChange",function(Qe,pt,Mt){var wt=He.c;Qe==="theme"&&(He.$container.rmClass(wt("theme-".concat(Mt))).addClass(wt("theme-".concat(pt))),(0,he.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ke),He}return ce(Oe,Ce),Oe.prototype.destroy=function(){this.destroySubComponents();var ze=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ze("platform-".concat((0,we.getPlatform)()))).rmClass(ze("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(ze,Ue){var De=this,Fe=this.options,Xe={};typeof ze=="string"?Xe[ze]=Ue:Xe=ze,(0,he.default)(Xe,function(Ke,He){var Qe=Fe[He];Fe[He]=Ke,De.emit("optionChange",He,Ke,Qe)})},Oe.prototype.getOption=function(ze){return this.options[ze]},Oe.prototype.addSubComponent=function(ze){ze.setOption("theme",this.options.theme),this.subComponents.push(ze)},Oe.prototype.removeSubComponent=function(ze){(0,Te.default)(this.subComponents,function(Ue){return Ue===ze})},Oe.prototype.destroySubComponents=function(){(0,he.default)(this.subComponents,function(ze){return ze.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(ze,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(ze,Ue),(0,ye.default)(this.options,ze)},Oe.prototype.find=function(ze){return this.$container.find(this.c(ze))},Oe}(Ee.default);Q.default=Se},2375:function(q,Q,V){var _e=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var ce=_e(V(2461)),ne=_e(V(4331)),Ee=_e(V(5610)),j=_e(V(7483)),we=_e(V(3990)),he=_e(V(6341)),ye=_e(V(3875)),xe=_e(V(6954)),Te=_e(V(9585));function Se(De,Fe){for(var Xe=0,Ke=De.length;Xe<Ke;Xe++){var He=De[Xe];Fe(He),He.content&&Se(He.content,Fe)}}Q.classPrefix=function(De){var Fe="luna-".concat(De,"-");function Xe(Ke){return(0,ce.default)((0,ne.default)(Ke).split(/\s+/),function(He){return(0,he.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Qe){return"".concat(Fe).concat(Qe)})}).join(" ")}return function(Ke){if(/<[^>]*>/g.test(Ke))try{var He=j.default.parse(Ke);return Se(He,function(Qe){Qe.attrs&&Qe.attrs.class&&(Qe.attrs.class=Xe(Qe.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ke)}return Xe(Ke)}};var Ce,Oe="ontouchstart"in Ee.default,ze={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function(De){return Oe?ze[De]:Ue[De]},Q.eventClient=function(De,Fe){var Xe=De==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function(De,Fe){var Xe=De==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,we.default)(Ce))return Ce;if(!document)return 16;var De=document.createElement("div"),Fe=document.createElement("div");return De.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),De.appendChild(Fe),document.body.appendChild(De),Ce=De.offsetWidth-De.clientWidth,document.body.removeChild(De),Ce},Q.hasVerticalScrollbar=function(De){return De.scrollHeight>De.offsetHeight},Q.executeAfterTransition=function(De,Fe){if((0,Te.default)(De))return Fe();var Xe=function(Ke){Ke.target===De&&(De.removeEventListener("transitionend",Xe),Fe())};De.addEventListener("transitionend",Xe)},Q.pxToNum=function(De){return(0,ye.default)(De.replace("px",""))},Q.getPlatform=function(){var De=(0,xe.default)();return De==="os x"?"mac":De},Q.resetCanvasSize=function(De){De.width=Math.round(De.offsetWidth*window.devicePixelRatio),De.height=Math.round(De.offsetHeight*window.devicePixelRatio)}},3467:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(pt,Mt){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(wt,bt){wt.__proto__=bt}||function(wt,bt){for(var rt in bt)Object.prototype.hasOwnProperty.call(bt,rt)&&(wt[rt]=bt[rt])},_e(pt,Mt)},function(pt,Mt){if(typeof Mt!="function"&&Mt!==null)throw new TypeError("Class extends value "+String(Mt)+" is not a constructor or null");function wt(){this.constructor=pt}_e(pt,Mt),pt.prototype=Mt===null?Object.create(Mt):(wt.prototype=Mt.prototype,new wt)}),ne=this&&this.__makeTemplateObject||function(pt,Mt){return Object.defineProperty?Object.defineProperty(pt,"raw",{value:Mt}):pt.raw=Mt,pt},Ee=this&&this.__importDefault||function(pt){return pt&&pt.__esModule?pt:{default:pt}};Object.defineProperty(Q,"__esModule",{value:!0});var j=Ee(V(1512)),we=Ee(V(1907)),he=Ee(V(6959)),ye=Ee(V(3783)),xe=Ee(V(8901)),Te=Ee(V(8613)),Se=Ee(V(3367)),Ce=Ee(V(9833)),Oe=Ee(V(1286)),ze=Ee(V(242)),Ue=Ee(V(2439)),De=Ee(V(4193)),Fe=Ee(V(6930)),Xe=function(pt){function Mt(wt,bt){var rt=pt.call(this,wt,{compName:"data-grid"},bt)||this;rt.nodes=[],rt.columnWidthsInitialized=!1,rt.columnMap={},rt.isAscending=!0,rt.resizeSensor=new ze.default(wt),rt.onResize=(0,Ue.default)(function(){rt.updateHeight(),rt.updateWeights()},16),bt.height&&(bt.maxHeight=bt.height,bt.minHeight=bt.height),rt.initOptions(bt,{minHeight:41,maxHeight:1/0});var nt=rt.options,it=nt.columns,dt=nt.minHeight,lt=nt.maxHeight;return(0,ye.default)(it,function(ft){(0,De.default)(ft,{sortable:!1}),rt.columnMap[ft.id]=ft}),lt<dt&&rt.setOption("maxHeight",dt),rt.initTpl(),rt.$headerRow=rt.find(".header").find("tr"),rt.$fillerRow=rt.find(".filler-row"),rt.fillerRow=rt.$fillerRow.get(0),rt.$tableBody=rt.find(".data").find("tbody"),rt.tableBody=rt.$tableBody.get(0),rt.$colgroup=rt.$container.find("colgroup"),rt.$dataContainer=rt.find(".data-container"),rt.renderHeader(),rt.updateWeights(),rt.updateHeight(),rt.bindEvent(),rt}return ce(Mt,pt),Mt.prototype.destroy=function(){pt.prototype.destroy.call(this),this.resizeSensor.destroy()},Mt.prototype.append=function(wt){var bt=new He(this,wt);return this.nodes.push(bt),this.sortId?this.sortNodes(this.sortId,this.isAscending):(this.tableBody.insertBefore(bt.container,this.fillerRow),this.updateHeight()),bt},Mt.prototype.clear=function(){(0,ye.default)(this.nodes,function(wt){return wt.detach()}),this.nodes=[],this.updateHeight()},Mt.prototype.updateHeight=function(){var wt=this.$fillerRow,bt=this.options,rt=bt.maxHeight,nt=bt.minHeight;this.$dataContainer.css({height:"auto"}),(nt-=21)<0&&(nt=0),rt-=21;var it=20*this.nodes.length;it>nt?wt.hide():wt.show(),it<nt?it=nt:it>=rt&&(it=rt),this.$dataContainer.css({height:it})},Mt.prototype.bindEvent=function(){var wt=this,bt=this.c,rt=this.$headerRow;this.resizeSensor.addListener(this.onResize);var nt=this;rt.on("click",bt(".sortable"),function(it){it.stopPropagation();var dt=(0,j.default)(this),lt=dt.data("id"),ft=dt.data("order")!=="descending";dt.data("order",ft?"descending":"ascending"),nt.sortNodes(lt,ft),rt.find("th").each(function(){var xt=(0,j.default)(this);xt.data("id")!==lt&&xt.rmAttr("data-order")})}),this.on("optionChange",function(it){switch(it){case"minHeight":case"maxHeight":wt.updateHeight()}})},Mt.prototype.sortNodes=function(wt,bt){var rt=this.columnMap[wt].comparator||Qe;this.nodes.sort(function(nt,it){var dt=nt.data[wt],lt=it.data[wt];return(0,Ce.default)(dt)&&(dt=dt.innerText),(0,Ce.default)(lt)&&(lt=lt.innerText),bt?rt(dt,lt):rt(lt,dt)}),this.renderData(),this.sortId=wt,this.isAscending=bt},Mt.prototype.updateWeights=function(){var wt=this.container,bt=this.$headerRow,rt=this.options.columns,nt=wt.offsetWidth;if(!this.columnWidthsInitialized&&nt){for(var it=0,dt=rt.length;it<dt;it++){var lt=rt[it];if(!lt.weight){var ft=bt.find("th").get(it).offsetWidth;lt.weight=100*ft/nt}}this.columnWidthsInitialized=!0}this.applyColumnWeights()},Mt.prototype.applyColumnWeights=function(){var wt=this.container,bt=this.$colgroup,rt=this.options.columns,nt=wt.offsetWidth;if(!(nt<=0)){for(var it=0,dt=rt.length,lt=0;lt<dt;lt++)it+=rt[lt].weight;var ft="",xt=0,ht=0;for(lt=0;lt<dt;lt++){var Vt=(xt+=rt[lt].weight)*nt/it|0,st=Math.max(Vt-ht,14);ht=Vt,ft+='<col style="width:'.concat(st,'px"></col>')}bt.html(ft)}},Mt.prototype.renderData=function(){var wt=this,bt=wt.tableBody,rt=wt.nodes,nt=wt.fillerRow;(0,ye.default)(rt,function(it){return it.detach()}),(0,ye.default)(rt,function(it){bt.insertBefore(it.container,nt)}),this.updateHeight()},Mt.prototype.renderHeader=function(){var wt=this.c,bt="",rt="";(0,ye.default)(this.options.columns,function(nt){var it=(0,xe.default)(nt.title);nt.sortable?bt+=wt('<th class="sortable" data-id="'.concat(nt.id,'">').concat(it,"</th>")):bt+="<th>".concat(it,"</th>"),rt+="<td></td>"}),this.$headerRow.html(bt),this.$fillerRow.html(rt)},Mt.prototype.initTpl=function(){this.$container.html(this.c((0,we.default)(Ke||(Ke=ne([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `],[`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))},Mt}(he.default);Q.default=Xe;var Ke,He=function(){function pt(Mt,wt){this.container=(0,Te.default)("tr"),this.$container=(0,j.default)(this.container),this.dataGrid=Mt,this.data=wt,this.render()}return pt.prototype.detach=function(){this.$container.remove()},pt.prototype.render=function(){var Mt=this,wt=Mt.data,bt=Mt.$container,rt=Mt.container,nt=this.dataGrid.getOption("columns");bt.html(""),(0,ye.default)(nt,function(it){var dt=(0,Te.default)("td"),lt=wt[it.id];(0,Oe.default)(lt)||((0,Ce.default)(lt)?dt.appendChild(lt):dt.innerText=(0,Se.default)(lt)),rt.appendChild(dt)})},pt}();function Qe(pt,Mt){if(pt=(0,Se.default)(pt),Mt=(0,Se.default)(Mt),(0,Fe.default)(pt,"_")&&!(0,Fe.default)(Mt,"_"))return 1;if((0,Fe.default)(Mt,"_")&&!(0,Fe.default)(pt,"_"))return-1;for(var wt,bt,rt,nt,it=/^\d+|^\D+/;;){if(!pt)return Mt?-1:0;if(!Mt)return 1;if(wt=pt.match(it)[0],bt=Mt.match(it)[0],rt=!isNaN(wt),nt=!isNaN(bt),rt&&!nt)return-1;if(nt&&!rt)return 1;if(rt&&nt){var dt=wt-bt;if(dt)return dt;if(wt.length!==bt.length)return+wt||+bt?bt.length-wt.length:wt.length-bt.length}else if(wt!==bt)return wt<bt?-1:1;pt=pt.substring(wt.length),Mt=Mt.substring(bt.length)}}q.exports=Xe,q.exports.default=Xe},6959:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Ce,Oe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Ue){ze.__proto__=Ue}||function(ze,Ue){for(var De in Ue)Object.prototype.hasOwnProperty.call(Ue,De)&&(ze[De]=Ue[De])},_e(Ce,Oe)},function(Ce,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function ze(){this.constructor=Ce}_e(Ce,Oe),Ce.prototype=Oe===null?Object.create(Oe):(ze.prototype=Oe.prototype,new ze)}),ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(1512)),we=V(3692),he=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Te=ne(V(5852)),Se=function(Ce){function Oe(ze,Ue,De){var Fe=Ue.compName,Xe=(De===void 0?{}:De).theme,Ke=Xe===void 0?"light":Xe,He=Ce.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,we.classPrefix)(Fe),He.options={},He.container=ze,He.$container=(0,j.default)(ze),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,we.getPlatform)()))]),He.on("optionChange",function(Qe,pt,Mt){var wt=He.c;Qe==="theme"&&(He.$container.rmClass(wt("theme-".concat(Mt))).addClass(wt("theme-".concat(pt))),(0,he.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ke),He}return ce(Oe,Ce),Oe.prototype.destroy=function(){this.destroySubComponents();var ze=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ze("platform-".concat((0,we.getPlatform)()))).rmClass(ze("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(ze,Ue){var De=this,Fe=this.options,Xe={};typeof ze=="string"?Xe[ze]=Ue:Xe=ze,(0,he.default)(Xe,function(Ke,He){var Qe=Fe[He];Fe[He]=Ke,De.emit("optionChange",He,Ke,Qe)})},Oe.prototype.getOption=function(ze){return this.options[ze]},Oe.prototype.addSubComponent=function(ze){ze.setOption("theme",this.options.theme),this.subComponents.push(ze)},Oe.prototype.removeSubComponent=function(ze){(0,Te.default)(this.subComponents,function(Ue){return Ue===ze})},Oe.prototype.destroySubComponents=function(){(0,he.default)(this.subComponents,function(ze){return ze.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(ze,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(ze,Ue),(0,ye.default)(this.options,ze)},Oe.prototype.find=function(ze){return this.$container.find(this.c(ze))},Oe}(Ee.default);Q.default=Se},3692:function(q,Q,V){var _e=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var ce=_e(V(2461)),ne=_e(V(4331)),Ee=_e(V(5610)),j=_e(V(7483)),we=_e(V(3990)),he=_e(V(6341)),ye=_e(V(3875)),xe=_e(V(6954)),Te=_e(V(9585));function Se(De,Fe){for(var Xe=0,Ke=De.length;Xe<Ke;Xe++){var He=De[Xe];Fe(He),He.content&&Se(He.content,Fe)}}Q.classPrefix=function(De){var Fe="luna-".concat(De,"-");function Xe(Ke){return(0,ce.default)((0,ne.default)(Ke).split(/\s+/),function(He){return(0,he.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Qe){return"".concat(Fe).concat(Qe)})}).join(" ")}return function(Ke){if(/<[^>]*>/g.test(Ke))try{var He=j.default.parse(Ke);return Se(He,function(Qe){Qe.attrs&&Qe.attrs.class&&(Qe.attrs.class=Xe(Qe.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ke)}return Xe(Ke)}};var Ce,Oe="ontouchstart"in Ee.default,ze={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function(De){return Oe?ze[De]:Ue[De]},Q.eventClient=function(De,Fe){var Xe=De==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function(De,Fe){var Xe=De==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,we.default)(Ce))return Ce;if(!document)return 16;var De=document.createElement("div"),Fe=document.createElement("div");return De.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),De.appendChild(Fe),document.body.appendChild(De),Ce=De.offsetWidth-De.clientWidth,document.body.removeChild(De),Ce},Q.hasVerticalScrollbar=function(De){return De.scrollHeight>De.offsetHeight},Q.executeAfterTransition=function(De,Fe){if((0,Te.default)(De))return Fe();var Xe=function(Ke){Ke.target===De&&(De.removeEventListener("transitionend",Xe),Fe())};De.addEventListener("transitionend",Xe)},Q.pxToNum=function(De){return(0,ye.default)(De.replace("px",""))},Q.getPlatform=function(){var De=(0,xe.default)();return De==="os x"?"mac":De},Q.resetCanvasSize=function(De){De.width=Math.round(De.offsetWidth*window.devicePixelRatio),De.height=Math.round(De.offsetHeight*window.devicePixelRatio)}},3577:function(q,Q){Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(nt,it){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,lt){dt.__proto__=lt}||function(dt,lt){for(var ft in lt)Object.prototype.hasOwnProperty.call(lt,ft)&&(dt[ft]=lt[ft])},_e(nt,it)},function(nt,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function dt(){this.constructor=nt}_e(nt,it),nt.prototype=it===null?Object.create(it):(dt.prototype=it.prototype,new dt)}),ne=this&&this.__assign||function(){return ne=Object.assign||function(nt){for(var it,dt=1,lt=arguments.length;dt<lt;dt++)for(var ft in it=arguments[dt])Object.prototype.hasOwnProperty.call(it,ft)&&(nt[ft]=it[ft]);return nt},ne.apply(this,arguments)},Ee=this&&this.__values||function(nt){var it=typeof Symbol=="function"&&Symbol.iterator,dt=it&&nt[it],lt=0;if(dt)return dt.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&lt>=nt.length&&(nt=void 0),{value:nt&&nt[lt++],done:!nt}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")},j=this&&this.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(Q,"__esModule",{value:!0});var we=j(V(1160)),he=V(7669),ye=V(2062),xe=j(V(242)),Te=j(V(2439)),Se=j(V(3063)),Ce=j(V(3783)),Oe=j(V(3009)),ze=j(V(5044)),Ue=j(V(4502)),De=j(V(6329)),Fe=j(V(7494)),Xe=j(V(6341)),Ke=j(V(3875)),He=j(V(3577)),Qe=j(V(6768)),pt=function(nt){function it(dt,lt){lt===void 0&&(lt={});var ft=nt.call(this,dt,{compName:"dom-highlighter"},lt)||this;return ft.overlay=new he.HighlightOverlay(window),ft.reset=function(){var xt=document.documentElement.clientWidth,ht=document.documentElement.clientHeight;ft.overlay.reset({viewportSize:{width:xt,height:ht},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},ft.initOptions(lt,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),ft.overlay.setContainer(dt),ft.overlay.setPlatform("mac"),ft.redraw=(0,Te.default)(function(){ft.reset(),ft.draw()},16),ft.redraw(),ft.bindEvent(),ft}return ce(it,nt),it.prototype.highlight=function(dt,lt){lt&&(0,De.default)(this.options,lt),this.target=dt,dt instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new xe.default(dt),this.resizeSensor.addListener(this.redraw)),this.redraw()},it.prototype.hide=function(){this.target=null,this.redraw()},it.prototype.intercept=function(dt){this.interceptor=dt},it.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),nt.prototype.destroy.call(this)},it.prototype.draw=function(){var dt=this.target;dt&&(dt instanceof Text?this.drawText(dt):this.drawElement(dt))},it.prototype.drawText=function(dt){var lt=this.options,ft=document.createRange();ft.selectNode(dt);var xt=ft.getBoundingClientRect(),ht=xt.left,Vt=xt.top,st=xt.width,Dt=xt.height;ft.detach();var ln={paths:[{path:this.rectToPath({left:ht,top:Vt,width:st,height:Dt}),fillColor:bt(lt.contentColor),name:"content"}],showExtensionLines:lt.showExtensionLines,showRulers:lt.showRulers};lt.showInfo&&(ln.elementInfo={tagName:"#text",nodeWidth:st,nodeHeight:Dt}),this.overlay.drawHighlight(ln)},it.prototype.drawElement=function(dt){var lt={paths:this.getPaths(dt),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(lt.elementInfo=this.getElementInfo(dt)),this.interceptor){var ft=this.interceptor(lt);ft&&(lt=ft)}this.overlay.drawHighlight(lt)},it.prototype.getPaths=function(dt){var lt=this.options,ft=window.getComputedStyle(dt),xt=dt.getBoundingClientRect(),ht=xt.left,Vt=xt.top,st=xt.width,Dt=xt.height,ln=function(bn){return(0,ye.pxToNum)(ft.getPropertyValue(bn))},In=ln("margin-left"),on=ln("margin-right"),an=ln("margin-top"),Xt=ln("margin-bottom"),Rt=ln("border-left-width"),en=ln("border-right-width"),hn=ln("border-top-width"),vn=ln("border-bottom-width"),Pn=ln("padding-left"),Pt=ln("padding-right"),zt=ln("padding-top"),rn=ln("padding-bottom");return[{path:this.rectToPath({left:ht+Rt+Pn,top:Vt+hn+zt,width:st-Rt-Pn-en-Pt,height:Dt-hn-zt-vn-rn}),fillColor:bt(lt.contentColor),name:"content"},{path:this.rectToPath({left:ht+Rt,top:Vt+hn,width:st-Rt-en,height:Dt-hn-vn}),fillColor:bt(lt.paddingColor),name:"padding"},{path:this.rectToPath({left:ht,top:Vt,width:st,height:Dt}),fillColor:bt(lt.borderColor),name:"border"},{path:this.rectToPath({left:ht-In,top:Vt-an,width:st+In+on,height:Dt+an+Xt}),fillColor:bt(lt.marginColor),name:"margin"}]},it.prototype.getElementInfo=function(dt){var lt=dt.getBoundingClientRect(),ft=lt.width,xt=lt.height,ht=dt.getAttribute("class")||"";ht=ht.split(/\s+/).map(function(st){return"."+st}).join("");var Vt={tagName:(0,Se.default)(dt.tagName),className:ht,idValue:dt.id,nodeWidth:ft,nodeHeight:xt};return this.options.showStyles&&(Vt.style=this.getStyles(dt)),this.options.showAccessibilityInfo&&(0,De.default)(Vt,this.getAccessibilityInfo(dt)),Vt},it.prototype.getStyles=function(dt){for(var lt=window.getComputedStyle(dt),ft=!1,xt=dt.childNodes,ht=0,Vt=xt.length;ht<Vt;ht++)xt[ht].nodeType===3&&(ft=!0);var st=[];return ft&&st.push("color","font-family","font-size","line-height"),st.push("padding","margin","background-color"),rt(lt,st)},it.prototype.getAccessibilityInfo=function(dt){var lt=window.getComputedStyle(dt);return ne({showAccessibilityInfo:!0,contrast:ne({contrastAlgorithm:"aa",textOpacity:.1},rt(lt,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(dt)},this.getAccessibleNameAndRole(dt))},it.prototype.isFocusable=function(dt){var lt=(0,Se.default)(dt.tagName);if((0,Xe.default)(["a","button","input","textarea","select","details"],lt))return!0;var ft=dt.getAttribute("tabindex");return!!(ft&&(0,Ke.default)(ft)>-1)},it.prototype.getAccessibleNameAndRole=function(dt){var lt=dt.getAttribute("labelledby")||dt.getAttribute("aria-label"),ft=dt.getAttribute("role"),xt=(0,Se.default)(dt.tagName);return He.default.forEach(function(ht){var Vt,st;if(!ft){var Dt=ht[0],ln=ht[2];if(Dt===xt){if(ln)try{for(var In=Ee(ln),on=In.next();!on.done;on=In.next()){var an=on.value;if(dt.getAttribute(an[0])!==an[1])return}}catch(Xt){Vt={error:Xt}}finally{try{on&&!on.done&&(st=In.return)&&st.call(In)}finally{if(Vt)throw Vt.error}}ft=ht[1]}}}),{accessibleName:lt||dt.getAttribute("title")||"",accessibleRole:ft||"generic"}},it.prototype.bindEvent=function(){var dt=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return dt.redraw()})},it.prototype.rectToPath=function(dt){var lt=dt.left,ft=dt.top,xt=dt.width,ht=dt.height,Vt=[];return Vt.push("M",lt,ft),Vt.push("L",lt+xt,ft),Vt.push("L",lt+xt,ft+ht),Vt.push("L",lt,ft+ht),Vt.push("Z"),Vt},it}(we.default);Q.default=pt,q.exports=pt,q.exports.default=pt;var Mt=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,wt=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function bt(nt){return(0,Qe.default)(nt)?nt:nt.a?"rgba(".concat(nt.r,", ").concat(nt.g,", ").concat(nt.b,", ").concat(nt.a,")"):"rgb(".concat(nt.r,", ").concat(nt.g,", ").concat(nt.b,")")}function rt(nt,it,dt){dt===void 0&&(dt=!1);var lt={};return(0,Ce.default)(it,function(ft){var xt,ht=nt[ft==="text-opacity"?"color":ft];ht&&(xt=ht,(Mt.test(xt)||wt.test(xt))&&(ht=function(Vt){var st=Oe.default.parse(Vt),Dt=st.val[3]||1;return st.val=st.val.slice(0,3),st.val.push(Math.round(255*Dt)),"#"+(0,Ue.default)(ze.default.encode(st.val))}(ht),ft==="text-opacity"&&(ht=ht.slice(7),ht=ze.default.decode(ht)[0]/255)),dt&&(ft=(0,Fe.default)(ft)),lt[ft]=ht)}),lt}},9706:function(q,Q){var V=this&&this.__read||function(Oe,ze){var Ue=typeof Symbol=="function"&&Oe[Symbol.iterator];if(!Ue)return Oe;var De,Fe,Xe=Ue.call(Oe),Ke=[];try{for(;(ze===void 0||ze-- >0)&&!(De=Xe.next()).done;)Ke.push(De.value)}catch(He){Fe={error:He}}finally{try{De&&!De.done&&(Ue=Xe.return)&&Ue.call(Xe)}finally{if(Fe)throw Fe.error}}return Ke},_e=this&&this.__values||function(Oe){var ze=typeof Symbol=="function"&&Symbol.iterator,Ue=ze&&Oe[ze],De=0;if(Ue)return Ue.call(Oe);if(Oe&&typeof Oe.length=="number")return{next:function(){return Oe&&De>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[De++],done:!Oe}}};throw new TypeError(ze?"Object is not iterable.":"Symbol.iterator is not defined.")};function ce(Oe,ze){var Ue=Oe[3];return[(1-Ue)*ze[0]+Ue*Oe[0],(1-Ue)*ze[1]+Ue*Oe[1],(1-Ue)*ze[2]+Ue*Oe[2],Ue+ze[3]*(1-Ue)]}function ne(Oe){var ze=V(Oe,3),Ue=ze[0],De=ze[1],Fe=ze[2];return .2126*(Ue<=.03928?Ue/12.92:Math.pow((Ue+.055)/1.055,2.4))+.7152*(De<=.03928?De/12.92:Math.pow((De+.055)/1.055,2.4))+.0722*(Fe<=.03928?Fe/12.92:Math.pow((Fe+.055)/1.055,2.4))}Object.defineProperty(Q,"__esModule",{value:!0}),Q.getContrastThreshold=Q.isLargeFont=Q.getAPCAThreshold=Q.desiredLuminanceAPCA=Q.contrastRatioByLuminanceAPCA=Q.contrastRatioAPCA=Q.luminanceAPCA=Q.contrastRatio=Q.luminance=Q.rgbaToHsla=Q.blendColors=void 0,Q.blendColors=ce,Q.rgbaToHsla=function(Oe){var ze=V(Oe,4),Ue=ze[0],De=ze[1],Fe=ze[2],Xe=ze[3],Ke=Math.max(Ue,De,Fe),He=Math.min(Ue,De,Fe),Qe=Ke-He,pt=Ke+He,Mt=.5*pt;return[He===Ke?0:Ue===Ke?(.16666666666666666*(De-Fe)/Qe+1)%1:De===Ke?.16666666666666666*(Fe-Ue)/Qe+.3333333333333333:.16666666666666666*(Ue-De)/Qe+.6666666666666666,Mt===0||Mt===1?0:Mt<=.5?Qe/pt:Qe/(2-pt),Mt,Xe]},Q.luminance=ne,Q.contrastRatio=function(Oe,ze){var Ue=ne(ce(Oe,ze)),De=ne(ze);return(Math.max(Ue,De)+.05)/(Math.min(Ue,De)+.05)};var Ee=12.82051282051282,j=.06;function we(Oe){var ze=V(Oe,3),Ue=ze[0],De=ze[1],Fe=ze[2];return .2126729*Math.pow(Ue,2.4)+.7151522*Math.pow(De,2.4)+.072175*Math.pow(Fe,2.4)}function he(Oe){return Oe>.03?Oe:Oe+Math.pow(.03-Oe,1.45)}function ye(Oe,ze){if(Oe=he(Oe),ze=he(ze),Math.abs(Oe-ze)<5e-4)return 0;var Ue=0;return 100*(Ue=ze>=Oe?(Ue=1.25*(Math.pow(ze,.55)-Math.pow(Oe,.58)))<.001?0:Ue<.078?Ue-Ue*Ee*j:Ue-j:(Ue=1.25*(Math.pow(ze,.62)-Math.pow(Oe,.57)))>-.001?0:Ue>-.078?Ue-Ue*Ee*j:Ue+j)}Q.luminanceAPCA=we,Q.contrastRatioAPCA=function(Oe,ze){return ye(we(Oe),we(ze))},Q.contrastRatioByLuminanceAPCA=ye,Q.desiredLuminanceAPCA=function(Oe,ze,Ue){function De(){return Ue?Math.pow(Math.abs(Math.pow(Oe,.62)-(-ze-j)/1.25),1.7543859649122808):Math.pow(Math.abs(Math.pow(Oe,.55)-(ze+j)/1.25),1.7241379310344829)}Oe=he(Oe),ze/=100;var Fe=De();return(Fe<0||Fe>1)&&(Ue=!Ue,Fe=De()),Fe};var xe=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function Te(Oe,ze){var Ue=72*parseFloat(Oe.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(ze)!==-1?Ue>=14:Ue>=18}xe.reverse(),Q.getAPCAThreshold=function(Oe,ze){var Ue,De,Fe,Xe,Ke=parseFloat(Oe.replace("px","")),He=parseFloat(ze);try{for(var Qe=_e(xe),pt=Qe.next();!pt.done;pt=Qe.next()){var Mt=V(pt.value),wt=Mt[0],bt=Mt.slice(1);if(Ke>=wt)try{for(var rt=(Fe=void 0,_e([900,800,700,600,500,400,300,200,100].entries())),nt=rt.next();!nt.done;nt=rt.next()){var it=V(nt.value,2),dt=it[0];if(He>=it[1]){var lt=bt[bt.length-1-dt];return lt===-1?null:lt}}}catch(ft){Fe={error:ft}}finally{try{nt&&!nt.done&&(Xe=rt.return)&&Xe.call(rt)}finally{if(Fe)throw Fe.error}}}}catch(ft){Ue={error:ft}}finally{try{pt&&!pt.done&&(De=Qe.return)&&De.call(Qe)}finally{if(Ue)throw Ue.error}}return null},Q.isLargeFont=Te;var Se={aa:3,aaa:4.5},Ce={aa:4.5,aaa:7};Q.getContrastThreshold=function(Oe,ze){return Te(Oe,ze)?Se:Ce}},9434:function(q,Q){var V=this&&this.__values||function(he){var ye=typeof Symbol=="function"&&Symbol.iterator,xe=ye&&he[ye],Te=0;if(xe)return xe.call(he);if(he&&typeof he.length=="number")return{next:function(){return he&&Te>=he.length&&(he=void 0),{value:he&&he[Te++],done:!he}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")},_e=this&&this.__read||function(he,ye){var xe=typeof Symbol=="function"&&he[Symbol.iterator];if(!xe)return he;var Te,Se,Ce=xe.call(he),Oe=[];try{for(;(ye===void 0||ye-- >0)&&!(Te=Ce.next()).done;)Oe.push(Te.value)}catch(ze){Se={error:ze}}finally{try{Te&&!Te.done&&(xe=Ce.return)&&xe.call(Ce)}finally{if(Se)throw Se.error}}return Oe},ce=this&&this.__spreadArray||function(he,ye,xe){if(xe||arguments.length===2)for(var Te,Se=0,Ce=ye.length;Se<Ce;Se++)!Te&&Se in ye||(Te||(Te=Array.prototype.slice.call(ye,0,Se)),Te[Se]=ye[Se]);return he.concat(Te||Array.prototype.slice.call(ye))};Object.defineProperty(Q,"__esModule",{value:!0}),Q.adoptStyleSheet=Q.constrainNumber=Q.ellipsify=Q.createElement=Q.createTextChild=Q.createChild=Q.log=Q.Overlay=void 0;var ne=function(){function he(ye,xe){xe===void 0&&(xe=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=ye,this._document=ye.document,Array.isArray(xe)||(xe=[xe]),this.style=xe}return he.prototype.setCanvas=function(ye){this.canvas=ye,this._context=ye.getContext("2d")},he.prototype.install=function(){var ye,xe;try{for(var Te=V(this.style),Se=Te.next();!Se.done;Se=Te.next())we(Se.value)}catch(Ce){ye={error:Ce}}finally{try{Se&&!Se.done&&(xe=Te.return)&&xe.call(Te)}finally{if(ye)throw ye.error}}this._installed=!0},he.prototype.uninstall=function(){var ye,xe,Te=function(Oe){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(ze){return ze!==Oe})};try{for(var Se=V(this.style),Ce=Se.next();!Ce.done;Ce=Se.next())Te(Ce.value)}catch(Oe){ye={error:Oe}}finally{try{Ce&&!Ce.done&&(xe=Se.return)&&xe.call(Se)}finally{if(ye)throw ye.error}}this._installed=!1},he.prototype.reset=function(ye){ye&&(this.viewportSize=ye.viewportSize,this.visualViewportSize=ye.visualViewportSize,this.deviceScaleFactor=ye.deviceScaleFactor,this.pageScaleFactor=ye.pageScaleFactor,this.pageZoomFactor=ye.pageZoomFactor,this.emulationScaleFactor=ye.emulationScaleFactor,this.scrollX=Math.round(ye.scrollX),this.scrollY=Math.round(ye.scrollY)),this.resetCanvas()},he.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},he.prototype.setPlatform=function(ye){this.platform=ye,this._installed||this.install()},he.prototype.dispatch=function(ye){this[ye.shift()].apply(this,ye)},he.prototype.eventHasCtrlOrMeta=function(ye){return this.platform==="mac"?ye.metaKey&&!ye.ctrlKey:ye.ctrlKey&&!ye.metaKey},Object.defineProperty(he.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(he.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),he}();function Ee(he,ye,xe){var Te=j(ye,xe);return Te.addEventListener("click",function(Se){Se.stopPropagation()},!1),he.appendChild(Te),Te}function j(he,ye){var xe=document.createElement(he);if(ye){var Te=ye.split(/\s+/);Te=Te.map(function(Se){return"luna-dom-highlighter-"+Se}),xe.className=Te.join(" ")}return xe}function we(he){document.adoptedStyleSheets=ce(ce([],_e(document.adoptedStyleSheets),!1),[he],!1)}Q.Overlay=ne,Q.log=function(he){var ye=document.getElementById("log");ye||((ye=Ee(document.body,"div")).id="log"),Ee(ye,"div").textContent=he},Q.createChild=Ee,Q.createTextChild=function(he,ye){var xe=document.createTextNode(ye);return he.appendChild(xe),xe},Q.createElement=j,Q.ellipsify=function(he,ye){return he.length<=ye?String(he):he.substr(0,ye-1)+"\u2026"},Q.constrainNumber=function(he,ye,xe){return he<ye?he=ye:he>xe&&(he=xe),he},Q.adoptStyleSheet=we},1521:function(q,Q,V){var _e=this&&this.__values||function(Se){var Ce=typeof Symbol=="function"&&Symbol.iterator,Oe=Ce&&Se[Ce],ze=0;if(Oe)return Oe.call(Se);if(Se&&typeof Se.length=="number")return{next:function(){return Se&&ze>=Se.length&&(Se=void 0),{value:Se&&Se[ze++],done:!Se}}};throw new TypeError(Ce?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=this&&this.__read||function(Se,Ce){var Oe=typeof Symbol=="function"&&Se[Symbol.iterator];if(!Oe)return Se;var ze,Ue,De=Oe.call(Se),Fe=[];try{for(;(Ce===void 0||Ce-- >0)&&!(ze=De.next()).done;)Fe.push(ze.value)}catch(Xe){Ue={error:Xe}}finally{try{ze&&!ze.done&&(Oe=De.return)&&Oe.call(De)}finally{if(Ue)throw Ue.error}}return Fe},ne=this&&this.__spreadArray||function(Se,Ce,Oe){if(Oe||arguments.length===2)for(var ze,Ue=0,De=Ce.length;Ue<De;Ue++)!ze&&Ue in Ce||(ze||(ze=Array.prototype.slice.call(Ce,0,Ue)),ze[Ue]=Ce[Ue]);return Se.concat(ze||Array.prototype.slice.call(Ce))};Object.defineProperty(Q,"__esModule",{value:!0}),Q.drawPath=Q.formatColor=Q.formatRgba=Q.parseHexa=Q.createPathForQuad=Q.hatchFillPath=Q.applyMatrixToPoint=Q.emptyBounds=Q.buildPath=Q.fillPathWithBoxStyle=Q.drawPathWithLineStyle=void 0;var Ee=V(9706);function j(Se,Ce,Oe){var ze=0;function Ue(Xe){for(var Ke=[],He=0;He<Xe;++He){var Qe=Math.round(Se[ze++]*Oe);Ce.maxX=Math.max(Ce.maxX,Qe),Ce.minX=Math.min(Ce.minX,Qe);var pt=Math.round(Se[ze++]*Oe);Ce.maxY=Math.max(Ce.maxY,pt),Ce.minY=Math.min(Ce.minY,pt),Ce.leftmostXForY[pt]=Math.min(Ce.leftmostXForY[pt]||Number.MAX_VALUE,Qe),Ce.rightmostXForY[pt]=Math.max(Ce.rightmostXForY[pt]||Number.MIN_VALUE,Qe),Ce.topmostYForX[Qe]=Math.min(Ce.topmostYForX[Qe]||Number.MAX_VALUE,pt),Ce.bottommostYForX[Qe]=Math.max(Ce.bottommostYForX[Qe]||Number.MIN_VALUE,pt),Ce.allPoints.push({x:Qe,y:pt}),Ke.push(Qe,pt)}return Ke}for(var De=Se.length,Fe=new Path2D;ze<De;)switch(Se[ze++]){case"M":Fe.moveTo.apply(Fe,Ue(1));break;case"L":Fe.lineTo.apply(Fe,Ue(1));break;case"C":Fe.bezierCurveTo.apply(Fe,Ue(3));break;case"Q":Fe.quadraticCurveTo.apply(Fe,Ue(2));break;case"Z":Fe.closePath()}return Fe}Q.drawPathWithLineStyle=function(Se,Ce,Oe,ze){ze===void 0&&(ze=1),Oe&&Oe.color&&(Se.save(),Se.translate(.5,.5),Se.lineWidth=ze,Oe.pattern==="dashed"&&Se.setLineDash([3,3]),Oe.pattern==="dotted"&&Se.setLineDash([2,2]),Se.strokeStyle=Oe.color,Se.stroke(Ce),Se.restore())},Q.fillPathWithBoxStyle=function(Se,Ce,Oe,ze,Ue){Ue&&(Se.save(),Ue.fillColor&&(Se.fillStyle=Ue.fillColor,Se.fill(Ce)),Ue.hatchColor&&ye(Se,Ce,Oe,10,Ue.hatchColor,ze,!1),Se.restore())},Q.buildPath=j,Q.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},Q.applyMatrixToPoint=function(Se,Ce){var Oe=new DOMPoint(Se.x,Se.y);return{x:(Oe=Oe.matrixTransform(Ce)).x,y:Oe.y}};var we,he="";function ye(Se,Ce,Oe,ze,Ue,De,Fe){if((Se.canvas.width<Oe.maxX-Oe.minX||Se.canvas.height<Oe.maxY-Oe.minY)&&(Oe={minX:0,maxX:Se.canvas.width,minY:0,maxY:Se.canvas.height,allPoints:[]}),!we||Ue!==he){he=Ue;var Xe=document.createElement("canvas");Xe.width=ze,Xe.height=8;var Ke=Xe.getContext("2d");Ke.clearRect(0,0,Xe.width,Xe.height),Ke.rect(0,0,1,5),Ke.fillStyle=Ue,Ke.fill(),we=Se.createPattern(Xe,"repeat")}Se.save();var He=new DOMMatrix;we.setTransform(He.scale(Fe?-1:1,1).rotate(0,0,-45+De)),Se.fillStyle=we,Se.fill(Ce),Se.restore()}function xe(Se){return(Se.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(Ce){return parseInt(Ce,16)/255})}function Te(Se,Ce){if(Ce==="rgb"){var Oe=ce(Se,4),ze=Oe[0],Ue=Oe[1],De=Oe[2],Fe=Oe[3];return"rgb(".concat((255*ze).toFixed()," ").concat((255*Ue).toFixed()," ").concat((255*De).toFixed()).concat(Fe===1?"":" / "+Math.round(100*Fe)/100,")")}if(Ce==="hsl"){var Xe=ce((0,Ee.rgbaToHsla)(Se),4),Ke=Xe[0],He=Xe[1],Qe=Xe[2];return Fe=Xe[3],"hsl(".concat(Math.round(360*Ke),"deg ").concat(Math.round(100*He)," ").concat(Math.round(100*Qe)).concat(Fe===1?"":" / "+Math.round(100*Fe)/100,")")}throw new Error("NOT_REACHED")}Q.hatchFillPath=ye,Q.createPathForQuad=function(Se,Ce,Oe,ze){var Ue,De,Fe=["M",Se.p1.x,Se.p1.y,"L",Se.p2.x,Se.p2.y,"L",Se.p3.x,Se.p3.y,"L",Se.p4.x,Se.p4.y];try{for(var Xe=_e(Ce),Ke=Xe.next();!Ke.done;Ke=Xe.next()){var He=Ke.value;Fe=ne(ne([],ce(Fe),!1),["L",He.p4.x,He.p4.y,"L",He.p3.x,He.p3.y,"L",He.p2.x,He.p2.y,"L",He.p1.x,He.p1.y,"L",He.p4.x,He.p4.y,"L",Se.p4.x,Se.p4.y],!1)}}catch(Qe){Ue={error:Qe}}finally{try{Ke&&!Ke.done&&(De=Xe.return)&&De.call(Xe)}finally{if(Ue)throw Ue.error}}return Fe.push("Z"),j(Fe,Oe,ze)},Q.parseHexa=xe,Q.formatRgba=Te,Q.formatColor=function(Se,Ce){return Ce==="rgb"||Ce==="hsl"?Te(xe(Se),Ce):Se.endsWith("FF")?Se.substr(0,7):Se},Q.drawPath=function(Se,Ce,Oe,ze,Ue,De,Fe){Se.save();var Xe=j(Ce,De,Fe);return Oe&&(Se.fillStyle=Oe,Se.fill(Xe)),ze&&(Ue==="dashed"&&Se.setLineDash([3,3]),Ue==="dotted"&&Se.setLineDash([2,2]),Se.lineWidth=2,Se.strokeStyle=ze,Se.stroke(Xe)),Se.restore(),Xe}},7669:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Se,Ce){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,ze){Oe.__proto__=ze}||function(Oe,ze){for(var Ue in ze)Object.prototype.hasOwnProperty.call(ze,Ue)&&(Oe[Ue]=ze[Ue])},_e(Se,Ce)},function(Se,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Class extends value "+String(Ce)+" is not a constructor or null");function Oe(){this.constructor=Se}_e(Se,Ce),Se.prototype=Ce===null?Object.create(Ce):(Oe.prototype=Ce.prototype,new Oe)});Object.defineProperty(Q,"__esModule",{value:!0}),Q.HighlightOverlay=void 0;var ne=V(9706),Ee=V(9434),j=V(1521),we=function(Se){function Ce(){var Oe=Se!==null&&Se.apply(this,arguments)||this;return Oe.gridLabelState={gridLayerCounter:0},Oe}return ce(Ce,Se),Ce.prototype.setContainer=function(Oe){this._container=Oe},Ce.prototype.setPlatform=function(Oe){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+Oe),Se.prototype.setPlatform.call(this,Oe)},Object.defineProperty(Ce.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Ce.prototype.reset=function(Oe){Se.prototype.reset.call(this,Oe),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},Ce.prototype.install=function(){var Oe=this.document.createElement("canvas");Oe.classList.add("luna-dom-highlighter-fill"),this.container.append(Oe);var ze=this.document.createElement("div");this.container.append(ze),this.tooltip=ze,this.setCanvas(Oe),Se.prototype.install.call(this)},Ce.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",Se.prototype.uninstall.call(this)},Ce.prototype.drawHighlight=function(Oe){this.context.save();for(var ze=(0,j.emptyBounds)(),Ue=Oe.paths.slice();Ue.length;){var De=Ue.pop();De&&(this.context.save(),(0,j.drawPath)(this.context,De.path,De.fillColor,De.outlineColor,void 0,ze,this.emulationScaleFactor),Ue.length&&(this.context.globalCompositeOperation="destination-out",(0,j.drawPath)(this.context,Ue[Ue.length-1].path,"red",void 0,void 0,ze,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var Fe=Boolean(Oe.paths.length&&Oe.showRulers&&ze.minX<20&&ze.maxX+20<this.canvasWidth),Xe=Boolean(Oe.paths.length&&Oe.showRulers&&ze.minY<20&&ze.maxY+20<this.canvasHeight);return Oe.showRulers&&this.drawAxis(this.context,Fe,Xe),Oe.paths.length&&(Oe.showExtensionLines&&function(Ke,He,Qe,pt,Mt,wt,bt,rt){Ke.save();var nt=bt,it=rt;if(Ke.strokeStyle=Mt||Te,Ke.lineWidth=1,Ke.translate(.5,.5),wt&&Ke.setLineDash([3,3]),Qe)for(var dt in He.rightmostXForY)Ke.beginPath(),Ke.moveTo(nt,Number(dt)),Ke.lineTo(He.rightmostXForY[dt],Number(dt)),Ke.stroke();else for(var dt in He.leftmostXForY)Ke.beginPath(),Ke.moveTo(0,Number(dt)),Ke.lineTo(He.leftmostXForY[dt],Number(dt)),Ke.stroke();if(pt)for(var lt in He.bottommostYForX)Ke.beginPath(),Ke.moveTo(Number(lt),it),Ke.lineTo(Number(lt),He.topmostYForX[lt]),Ke.stroke();else for(var lt in He.topmostYForX)Ke.beginPath(),Ke.moveTo(Number(lt),0),Ke.lineTo(Number(lt),He.topmostYForX[lt]),Ke.stroke();Ke.restore()}(this.context,ze,Fe,Xe,void 0,!1,this.canvasWidth,this.canvasHeight),Oe.elementInfo&&function(Ke,He,Qe,pt,Mt,wt){Ke.innerHTML="";var bt=(0,Ee.createChild)(Ke,"div"),rt=(0,Ee.createChild)(bt,"div","tooltip-content"),nt=function(vn,Pn){var Pt=(0,Ee.createElement)("div","element-info"),zt=(0,Ee.createChild)(Pt,"div","element-info-header"),rn=function(Gr){return Gr.layoutObjectName&&Gr.layoutObjectName.endsWith("Grid")?"grid":Gr.layoutObjectName&&Gr.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(vn);rn&&(0,Ee.createChild)(zt,"div","element-layout-type ".concat(rn));var bn=(0,Ee.createChild)(zt,"div","element-description");(0,Ee.createChild)(bn,"span","material-tag-name").textContent=vn.tagName;var Tn=(0,Ee.createChild)(bn,"span","material-node-id"),$n=80;Tn.textContent=vn.idValue?"#"+(0,Ee.ellipsify)(vn.idValue,$n):"",Tn.classList.toggle("hidden",!vn.idValue);var Dn=(0,Ee.createChild)(bn,"span","material-class-name");Tn.textContent.length<$n&&(Dn.textContent=(0,Ee.ellipsify)(vn.className||"",$n-Tn.textContent.length)),Dn.classList.toggle("hidden",!vn.className);var xn=(0,Ee.createChild)(zt,"div","dimensions");(0,Ee.createChild)(xn,"span","material-node-width").textContent=String(Math.round(100*vn.nodeWidth)/100),(0,Ee.createTextChild)(xn,"\xD7"),(0,Ee.createChild)(xn,"span","material-node-height").textContent=String(Math.round(100*vn.nodeHeight)/100);var En,Cn=vn.style||{};vn.isLockedAncestor&&br("Showing content-visibility ancestor",""),vn.isLocked&&br("Descendants are skipped due to content-visibility","");var Qn=Cn.color;Qn&&Qn!=="#00000000"&&Br("Color",Qn,Pn);var nr=Cn["font-family"],fr=Cn["font-size"];nr&&fr!=="0px"&&br("Font","".concat(fr," ").concat(nr));var Kn=Cn["background-color"];Kn&&Kn!=="#00000000"&&Br("Background",Kn,Pn);var qn=Cn.margin;qn&&qn!=="0px"&&br("Margin",qn);var un=Cn.padding;un&&un!=="0px"&&br("Padding",un);var yn=vn.contrast?vn.contrast.backgroundColor:null,Rn=Qn&&Qn!=="#00000000"&&yn&&yn!=="#00000000";vn.showAccessibilityInfo&&(mr("Accessibility"),Rn&&Cn.color&&vn.contrast&&Fr(Cn.color,vn.contrast),br("Name",vn.accessibleName),br("Role",vn.accessibleRole),Lr("Keyboard-focusable",vn.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function Yn(){En||(En=(0,Ee.createChild)(Pt,"div","element-info-body"))}function mr(Gr){Yn();var Ur=(0,Ee.createChild)(En,"div","element-info-row element-info-section");(0,Ee.createChild)(Ur,"div","section-name").textContent=Gr,(0,Ee.createChild)((0,Ee.createChild)(Ur,"div","separator-container"),"div","separator")}function Sr(Gr,Ur,Ri){Yn();var Li=(0,Ee.createChild)(En,"div","element-info-row");return Ur&&Li.classList.add(Ur),(0,Ee.createChild)(Li,"div","element-info-name").textContent=Gr,(0,Ee.createChild)(Li,"div","element-info-gap"),(0,Ee.createChild)(Li,"div",Ri||"")}function Lr(Gr,Ur){(0,Ee.createChild)(Sr(Gr,"","element-info-value-icon"),"div",Ur)}function br(Gr,Ur){(0,Ee.createTextChild)(Sr(Gr,"","element-info-value-text"),Ur)}function Br(Gr,Ur,Ri){var Li=Sr(Gr,"","element-info-value-color"),Ai=(0,Ee.createChild)(Li,"div","color-swatch");(0,Ee.createChild)(Ai,"div","color-swatch-inner").style.backgroundColor=Ur,(0,Ee.createTextChild)(Li,(0,j.formatColor)(Ur,Ri))}function Fr(Gr,Ur){var Ri=(0,j.parseHexa)(Gr),Li=(0,j.parseHexa)(Ur.backgroundColor);Ri[3]*=Ur.textOpacity;var Ai=Sr("Contrast","","element-info-value-contrast"),Cr=(0,Ee.createChild)(Ai,"div","contrast-text");Cr.style.color=(0,j.formatRgba)(Ri,"rgb"),Cr.style.backgroundColor=Ur.backgroundColor,Cr.textContent="Aa";var No=(0,Ee.createChild)(Ai,"span");if(Ur.contrastAlgorithm==="apca"){var Ta=(0,ne.contrastRatioAPCA)(Ri,Li),xi=(0,ne.getAPCAThreshold)(Ur.fontSize,Ur.fontWeight);No.textContent=String(Math.floor(100*Ta)/100)+"%",(0,Ee.createChild)(Ai,"div",xi===null||Math.abs(Ta)<xi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(Ur.contrastAlgorithm==="aa"||Ur.contrastAlgorithm==="aaa"){var la=(0,ne.contrastRatio)(Ri,Li);xi=(0,ne.getContrastThreshold)(Ur.fontSize,Ur.fontWeight)[Ur.contrastAlgorithm],No.textContent=String(Math.floor(100*la)/100),(0,Ee.createChild)(Ai,"div",la<xi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return Pt}(He,Qe);rt.appendChild(nt);var it,dt=rt.offsetWidth,lt=rt.offsetHeight,ft=8,xt=2,ht=2*ft,Vt=ft+2,st=xt+Vt,Dt=Mt-xt-Vt-ht;if(pt.maxX-pt.minX<ht+2*Vt)it=.5*(pt.minX+pt.maxX)-ft;else{var ln=pt.minX+Vt,In=pt.maxX-Vt-ht;it=ln>st&&ln<Dt?ln:(0,Ee.constrainNumber)(st,ln,In)}var on=it<st||it>Dt,an=it-Vt;an=(0,Ee.constrainNumber)(an,xt,Mt-dt-xt);var Xt=pt.minY-ft-lt,Rt=!0;Xt<0?(Xt=Math.min(wt-lt,pt.maxY+ft),Rt=!1):pt.minY>wt&&(Xt=wt-ft-lt);var en=an>=pt.minX&&an+dt<=pt.maxX&&Xt>=pt.minY&&Xt+lt<=pt.maxY;if(an<pt.maxX&&an+dt>pt.minX&&Xt<pt.maxY&&Xt+lt>pt.minY&&!en)return void(rt.style.display="none");if(rt.style.top=Xt+"px",rt.style.left=an+"px",!on){var hn=(0,Ee.createChild)(rt,"div","tooltip-arrow");hn.style.clipPath=Rt?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",hn.style.top=(Rt?lt-1:-ft)+"px",hn.style.left=it-an+"px"}}(this.tooltip,Oe.elementInfo,Oe.colorFormat,ze,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:ze}},Ce.prototype.drawAxis=function(Oe,ze,Ue){Oe.save();var De=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,Fe=this.scrollX*this.pageScaleFactor,Xe=this.scrollY*this.pageScaleFactor;function Ke(dt){return Math.round(dt*De)}function He(dt){return Math.round(dt/De)}var Qe=this.canvasWidth/De,pt=this.canvasHeight/De,Mt=50;Oe.save(),Oe.fillStyle=xe,Ue?Oe.fillRect(0,Ke(pt)-15,Ke(Qe),Ke(pt)):Oe.fillRect(0,0,Ke(Qe),15),Oe.globalCompositeOperation="destination-out",Oe.fillStyle="red",ze?Oe.fillRect(Ke(Qe)-15,0,Ke(Qe),Ke(pt)):Oe.fillRect(0,0,15,Ke(pt)),Oe.restore(),Oe.fillStyle=xe,ze?Oe.fillRect(Ke(Qe)-15,0,Ke(Qe),Ke(pt)):Oe.fillRect(0,0,15,Ke(pt)),Oe.lineWidth=1,Oe.strokeStyle=ye,Oe.fillStyle=ye,Oe.save(),Oe.translate(-Fe,.5-Xe);for(var wt=pt+He(Xe),bt=100;bt<wt;bt+=100)Oe.save(),Oe.translate(Fe,Ke(bt)),Oe.rotate(-Math.PI/2),Oe.fillText(String(bt),2,ze?Ke(Qe)-7:13),Oe.restore();Oe.translate(.5,-.5);for(var rt=Qe+He(Fe),nt=100;nt<rt;nt+=100)Oe.save(),Oe.fillText(String(nt),Ke(nt)+2,Ue?Xe+Ke(pt)-7:Xe+13),Oe.restore();for(Oe.restore(),Oe.save(),ze&&(Oe.translate(Ke(Qe),0),Oe.scale(-1,1)),Oe.translate(-Fe,.5-Xe),wt=pt+He(Xe),bt=Mt;bt<wt;bt+=Mt){Oe.beginPath(),Oe.moveTo(Fe,Ke(bt));var it=bt%100?5:8;Oe.lineTo(Fe+it,Ke(bt)),Oe.stroke()}for(Oe.strokeStyle=he,bt=5;bt<wt;bt+=5)bt%Mt&&(Oe.beginPath(),Oe.moveTo(Fe,Ke(bt)),Oe.lineTo(Fe+5,Ke(bt)),Oe.stroke());for(Oe.restore(),Oe.save(),Ue&&(Oe.translate(0,Ke(pt)),Oe.scale(1,-1)),Oe.translate(.5-Fe,-Xe),rt=Qe+He(Fe),nt=Mt;nt<rt;nt+=Mt)Oe.beginPath(),Oe.moveTo(Ke(nt),Xe),it=nt%100?5:8,Oe.lineTo(Ke(nt),Xe+it),Oe.stroke();for(Oe.strokeStyle=he,nt=5;nt<rt;nt+=5)nt%Mt&&(Oe.beginPath(),Oe.moveTo(Ke(nt),Xe),Oe.lineTo(Ke(nt),Xe+5),Oe.stroke());Oe.restore(),Oe.restore()},Ce}(Ee.Overlay);Q.HighlightOverlay=we;var he="rgba(0,0,0,0.2)",ye="rgba(0,0,0,0.7)",xe="rgba(255, 255, 255, 0.8)",Te="rgba(128, 128, 128, 0.3)"},1160:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Ce,Oe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Ue){ze.__proto__=Ue}||function(ze,Ue){for(var De in Ue)Object.prototype.hasOwnProperty.call(Ue,De)&&(ze[De]=Ue[De])},_e(Ce,Oe)},function(Ce,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function ze(){this.constructor=Ce}_e(Ce,Oe),Ce.prototype=Oe===null?Object.create(Oe):(ze.prototype=Oe.prototype,new ze)}),ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(1512)),we=V(2062),he=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Te=ne(V(5852)),Se=function(Ce){function Oe(ze,Ue,De){var Fe=Ue.compName,Xe=(De===void 0?{}:De).theme,Ke=Xe===void 0?"light":Xe,He=Ce.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,we.classPrefix)(Fe),He.options={},He.container=ze,He.$container=(0,j.default)(ze),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,we.getPlatform)()))]),He.on("optionChange",function(Qe,pt,Mt){var wt=He.c;Qe==="theme"&&(He.$container.rmClass(wt("theme-".concat(Mt))).addClass(wt("theme-".concat(pt))),(0,he.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ke),He}return ce(Oe,Ce),Oe.prototype.destroy=function(){this.destroySubComponents();var ze=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ze("platform-".concat((0,we.getPlatform)()))).rmClass(ze("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(ze,Ue){var De=this,Fe=this.options,Xe={};typeof ze=="string"?Xe[ze]=Ue:Xe=ze,(0,he.default)(Xe,function(Ke,He){var Qe=Fe[He];Fe[He]=Ke,De.emit("optionChange",He,Ke,Qe)})},Oe.prototype.getOption=function(ze){return this.options[ze]},Oe.prototype.addSubComponent=function(ze){ze.setOption("theme",this.options.theme),this.subComponents.push(ze)},Oe.prototype.removeSubComponent=function(ze){(0,Te.default)(this.subComponents,function(Ue){return Ue===ze})},Oe.prototype.destroySubComponents=function(){(0,he.default)(this.subComponents,function(ze){return ze.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(ze,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(ze,Ue),(0,ye.default)(this.options,ze)},Oe.prototype.find=function(ze){return this.$container.find(this.c(ze))},Oe}(Ee.default);Q.default=Se},2062:function(q,Q,V){var _e=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var ce=_e(V(2461)),ne=_e(V(4331)),Ee=_e(V(5610)),j=_e(V(7483)),we=_e(V(3990)),he=_e(V(6341)),ye=_e(V(3875)),xe=_e(V(6954)),Te=_e(V(9585));function Se(De,Fe){for(var Xe=0,Ke=De.length;Xe<Ke;Xe++){var He=De[Xe];Fe(He),He.content&&Se(He.content,Fe)}}Q.classPrefix=function(De){var Fe="luna-".concat(De,"-");function Xe(Ke){return(0,ce.default)((0,ne.default)(Ke).split(/\s+/),function(He){return(0,he.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Qe){return"".concat(Fe).concat(Qe)})}).join(" ")}return function(Ke){if(/<[^>]*>/g.test(Ke))try{var He=j.default.parse(Ke);return Se(He,function(Qe){Qe.attrs&&Qe.attrs.class&&(Qe.attrs.class=Xe(Qe.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ke)}return Xe(Ke)}};var Ce,Oe="ontouchstart"in Ee.default,ze={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function(De){return Oe?ze[De]:Ue[De]},Q.eventClient=function(De,Fe){var Xe=De==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function(De,Fe){var Xe=De==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,we.default)(Ce))return Ce;if(!document)return 16;var De=document.createElement("div"),Fe=document.createElement("div");return De.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),De.appendChild(Fe),document.body.appendChild(De),Ce=De.offsetWidth-De.clientWidth,document.body.removeChild(De),Ce},Q.hasVerticalScrollbar=function(De){return De.scrollHeight>De.offsetHeight},Q.executeAfterTransition=function(De,Fe){if((0,Te.default)(De))return Fe();var Xe=function(Ke){Ke.target===De&&(De.removeEventListener("transitionend",Xe),Fe())};De.addEventListener("transitionend",Xe)},Q.pxToNum=function(De){return(0,ye.default)(De.replace("px",""))},Q.getPlatform=function(){var De=(0,xe.default)();return De==="os x"?"mac":De},Q.resetCanvasSize=function(De){De.width=Math.round(De.offsetWidth*window.devicePixelRatio),De.height=Math.round(De.offsetHeight*window.devicePixelRatio)}},8719:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(bt,rt){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,it){nt.__proto__=it}||function(nt,it){for(var dt in it)Object.prototype.hasOwnProperty.call(it,dt)&&(nt[dt]=it[dt])},_e(bt,rt)},function(bt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");function nt(){this.constructor=bt}_e(bt,rt),bt.prototype=rt===null?Object.create(rt):(nt.prototype=rt.prototype,new nt)}),ne=this&&this.__makeTemplateObject||function(bt,rt){return Object.defineProperty?Object.defineProperty(bt,"raw",{value:rt}):bt.raw=rt,bt},Ee=this&&this.__assign||function(){return Ee=Object.assign||function(bt){for(var rt,nt=1,it=arguments.length;nt<it;nt++)for(var dt in rt=arguments[nt])Object.prototype.hasOwnProperty.call(rt,dt)&&(bt[dt]=rt[dt]);return bt},Ee.apply(this,arguments)},j=this&&this.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(Q,"__esModule",{value:!0});var we,he=j(V(6370)),ye=j(V(3783)),xe=j(V(1512)),Te=j(V(8613)),Se=j(V(2461)),Ce=j(V(5972)),Oe=j(V(1907)),ze=j(V(1352)),Ue=j(V(2289)),De=j(V(6341)),Fe=j(V(3651)),Xe=j(V(7756)),Ke=j(V(8901)),He=j(V(4331)),Qe={comment:"",string:"",number:"",keyword:"",operator:""},pt=function(bt){function rt(nt,it){it===void 0&&(it={});var dt=bt.call(this,nt,{compName:"dom-viewer"},it)||this;return dt.isExpanded=!1,dt.isChildNodesRendered=!1,dt.select=function(){var lt=dt.c;(0,xe.default)(dt.options.rootContainer).find(lt(".selected")).rmClass(lt("selected")),dt.$tag.addClass(lt("selected"))},dt.toggle=function(){dt.isExpanded?dt.collapse():dt.expand()},dt.initOptions(it,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:nt,ignore:function(){return!1}}),dt.initTpl(),dt.bindEvent(),dt.options.isEndTag||dt.initObserver(),dt}return ce(rt,bt),rt.prototype.expand=function(){if(this.isExpandable()){this.isExpanded=!0;var nt=this.$tag,it=this.c,dt=this.options.node;nt.html(this.renderHtmlTag(Ee(Ee({},Mt(dt)),{hasTail:!1,hasToggleButton:!0}))),nt.addClass(it("expanded")),this.$children.rmClass(it("hidden")),this.renderChildNodes(dt)}},rt.prototype.collapse=function(){if(this.isExpandable()){this.isExpanded=!1;var nt=this.$tag,it=this.c,dt=this.options.node;this.$children.addClass(it("hidden")),this.$tag.html(this.renderHtmlTag(Ee(Ee({},Mt(dt)),{hasTail:!0,hasToggleButton:!0}))),nt.rmClass(it("expanded"))}},rt.prototype.destroy=function(){this.observer&&this.observer.disconnect(),bt.prototype.destroy.call(this)},rt.prototype.initObserver=function(){var nt=this;this.observer=new Ue.default(function(it){(0,ye.default)(it,function(dt){return nt.handleMutation(dt)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})},rt.prototype.handleMutation=function(nt){var it=this.$tag,dt=this.c,lt=this.options.node;(0,De.default)(["attributes","childList"],nt.type)?(nt.type==="childList"&&(this.isChildNodesRendered=!1),this.isExpandable()?this.isExpanded?this.expand():this.collapse():(this.$children.addClass(dt("hidden")),it.html(this.renderHtmlTag(Ee(Ee({},Mt(lt)),{hasTail:!1}))))):nt.type==="characterData"&&(lt.nodeType===Node.TEXT_NODE?it.html(this.renderTextNode(lt)):lt.nodeType===Node.COMMENT_NODE&&it.html(this.renderHtmlComment(lt.nodeValue)))},rt.prototype.bindEvent=function(){var nt=this,it=this.c,dt=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&dt.on("click",it(".toggle"),function(lt){lt.stopPropagation(),nt.toggle()}),dt.on("click",this.select)},rt.prototype.isExpandable=function(){var nt=this.options.node;return nt.nodeType===Node.ELEMENT_NODE&&this.getChildNodes(nt).length>0},rt.prototype.getChildNodes=function(nt){var it=this.options,dt=it.rootContainer,lt=it.ignore,ft=(0,ze.default)(nt.childNodes);return ft=(0,Ce.default)(ft,function(xt){if(xt.nodeType===Node.TEXT_NODE||xt.nodeType===Node.COMMENT_NODE){var ht=xt.nodeValue;if((0,He.default)(ht)==="")return!1}return xt!==dt&&!lt(xt)})},rt.prototype.initTpl=function(){var nt=this.container,it=this.c,dt=this.options,lt=dt.node,ft=dt.isEndTag,xt=(0,xe.default)((0,Te.default)("li"));if(xt.addClass(it("tree-item")),this.$tag=xt,ft)xt.html(it('<span class="html-tag" style="margin-left: -12px;">&lt;<span class="tag-name">/'.concat(lt.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(lt.nodeType===Node.ELEMENT_NODE){var ht=this.isExpandable(),Vt=Ee(Ee({},Mt(lt)),{hasTail:ht,hasToggleButton:ht});xt.html(this.renderHtmlTag(Vt))}else if(lt.nodeType===Node.TEXT_NODE)xt.html(this.renderTextNode(lt));else{if(lt.nodeType!==Node.COMMENT_NODE)return;var st=lt.nodeValue;if(st.trim()==="")return;xt.html(this.renderHtmlComment(st))}if(nt.appendChild(xt.get(0)),lt.nodeType===lt.ELEMENT_NODE){var Dt=(0,xe.default)((0,Te.default)("ul"));Dt.addClass([it("children"),it("hidden")]),nt.appendChild(Dt.get(0)),this.$children=Dt}},rt.prototype.renderChildNodes=function(nt){var it=this;if(!this.isChildNodesRendered){this.isChildNodesRendered=!0,this.destroySubComponents();var dt=this.options,lt=dt.rootContainer,ft=dt.ignore,xt=this.$children.get(0),ht=this.getChildNodes(nt);(0,ye.default)(ht,function(Vt){it.addSubComponent(new rt(xt,{node:Vt,parent:it,rootContainer:lt,ignore:ft}))}),nt&&this.addSubComponent(new rt(xt,{node:nt,parent:this,isEndTag:!0,rootContainer:lt,ignore:ft}))}},rt.prototype.renderHtmlTag=function(nt){var it=(0,Se.default)(nt.attributes,function(ft){var xt=ft.name,ht=ft.value,Vt=ft.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat((0,Ke.default)(xt),"</span>").concat(ht?'="<span class="attribute-value'.concat(Vt?" attribute-underline":"",'">').concat((0,Ke.default)(ht),'</span>"'):"","</span>")}),dt="";nt.hasTail?dt="".concat(nt.hasTail?"\u2026":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(nt.tagName,"</span>&gt;</span>"):this.isExpandable()||(dt='<span class="html-tag">&lt;<span class="tag-name">/'.concat(nt.tagName,"</span>&gt;</span>"));var lt="";return nt.hasToggleButton&&(lt='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c((0,Oe.default)(we||(we=ne([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`],[`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),lt,nt.tagName,it,dt))},rt.prototype.renderTextNode=function(nt){var it=this.c,dt=nt.nodeValue,lt=nt.parentElement,ft='<span class="text-node">',xt='</span><span class="selection"></span>';if(lt&&dt.length<1e4){if(lt.tagName==="STYLE")return it("".concat(ft).concat((0,Fe.default)(dt,"css",Qe)).concat(xt));if(lt.tagName==="SCRIPT")return it("".concat(ft).concat((0,Fe.default)(dt,"js",Qe)).concat(xt))}return it('"'.concat(ft).concat((0,Ke.default)((0,Xe.default)(dt,1e4,{separator:" ",ellipsis:"\u2026"}))).concat(xt,'"'))},rt.prototype.renderHtmlComment=function(nt){return this.c('<span class="html-comment">&lt;!-- '.concat((0,Ke.default)(nt),' --&gt;</span><span class="selection"></span>'))},rt}(he.default);function Mt(bt){var rt={tagName:"",attributes:[]};rt.tagName=bt.tagName.toLocaleLowerCase();var nt=[];return(0,ye.default)(bt.attributes,function(it){var dt=it.name,lt=it.value;nt.push({name:dt,value:lt,isLink:wt(bt,dt)})}),rt.attributes=nt,rt}function wt(bt,rt){var nt=bt.tagName;return(nt==="SCRIPT"||nt==="IMAGE"||nt==="VIDEO"||nt==="AUDIO")&&rt==="src"||nt==="LINK"&&rt==="href"}Q.default=pt,q.exports=pt,q.exports.default=pt},6370:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Ce,Oe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Ue){ze.__proto__=Ue}||function(ze,Ue){for(var De in Ue)Object.prototype.hasOwnProperty.call(Ue,De)&&(ze[De]=Ue[De])},_e(Ce,Oe)},function(Ce,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function ze(){this.constructor=Ce}_e(Ce,Oe),Ce.prototype=Oe===null?Object.create(Oe):(ze.prototype=Oe.prototype,new ze)}),ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(1512)),we=V(8759),he=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Te=ne(V(5852)),Se=function(Ce){function Oe(ze,Ue,De){var Fe=Ue.compName,Xe=(De===void 0?{}:De).theme,Ke=Xe===void 0?"light":Xe,He=Ce.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,we.classPrefix)(Fe),He.options={},He.container=ze,He.$container=(0,j.default)(ze),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,we.getPlatform)()))]),He.on("optionChange",function(Qe,pt,Mt){var wt=He.c;Qe==="theme"&&(He.$container.rmClass(wt("theme-".concat(Mt))).addClass(wt("theme-".concat(pt))),(0,he.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ke),He}return ce(Oe,Ce),Oe.prototype.destroy=function(){this.destroySubComponents();var ze=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ze("platform-".concat((0,we.getPlatform)()))).rmClass(ze("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(ze,Ue){var De=this,Fe=this.options,Xe={};typeof ze=="string"?Xe[ze]=Ue:Xe=ze,(0,he.default)(Xe,function(Ke,He){var Qe=Fe[He];Fe[He]=Ke,De.emit("optionChange",He,Ke,Qe)})},Oe.prototype.getOption=function(ze){return this.options[ze]},Oe.prototype.addSubComponent=function(ze){ze.setOption("theme",this.options.theme),this.subComponents.push(ze)},Oe.prototype.removeSubComponent=function(ze){(0,Te.default)(this.subComponents,function(Ue){return Ue===ze})},Oe.prototype.destroySubComponents=function(){(0,he.default)(this.subComponents,function(ze){return ze.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(ze,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(ze,Ue),(0,ye.default)(this.options,ze)},Oe.prototype.find=function(ze){return this.$container.find(this.c(ze))},Oe}(Ee.default);Q.default=Se},8759:function(q,Q,V){var _e=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var ce=_e(V(2461)),ne=_e(V(4331)),Ee=_e(V(5610)),j=_e(V(7483)),we=_e(V(3990)),he=_e(V(6341)),ye=_e(V(3875)),xe=_e(V(6954)),Te=_e(V(9585));function Se(De,Fe){for(var Xe=0,Ke=De.length;Xe<Ke;Xe++){var He=De[Xe];Fe(He),He.content&&Se(He.content,Fe)}}Q.classPrefix=function(De){var Fe="luna-".concat(De,"-");function Xe(Ke){return(0,ce.default)((0,ne.default)(Ke).split(/\s+/),function(He){return(0,he.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Qe){return"".concat(Fe).concat(Qe)})}).join(" ")}return function(Ke){if(/<[^>]*>/g.test(Ke))try{var He=j.default.parse(Ke);return Se(He,function(Qe){Qe.attrs&&Qe.attrs.class&&(Qe.attrs.class=Xe(Qe.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ke)}return Xe(Ke)}};var Ce,Oe="ontouchstart"in Ee.default,ze={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function(De){return Oe?ze[De]:Ue[De]},Q.eventClient=function(De,Fe){var Xe=De==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function(De,Fe){var Xe=De==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,we.default)(Ce))return Ce;if(!document)return 16;var De=document.createElement("div"),Fe=document.createElement("div");return De.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),De.appendChild(Fe),document.body.appendChild(De),Ce=De.offsetWidth-De.clientWidth,document.body.removeChild(De),Ce},Q.hasVerticalScrollbar=function(De){return De.scrollHeight>De.offsetHeight},Q.executeAfterTransition=function(De,Fe){if((0,Te.default)(De))return Fe();var Xe=function(Ke){Ke.target===De&&(De.removeEventListener("transitionend",Xe),Fe())};De.addEventListener("transitionend",Xe)},Q.pxToNum=function(De){return(0,ye.default)(De.replace("px",""))},Q.getPlatform=function(){var De=(0,xe.default)();return De==="os x"?"mac":De},Q.resetCanvasSize=function(De){De.width=Math.round(De.offsetWidth*window.devicePixelRatio),De.height=Math.round(De.offsetHeight*window.devicePixelRatio)}},6093:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Te,Se){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ce,Oe){Ce.__proto__=Oe}||function(Ce,Oe){for(var ze in Oe)Object.prototype.hasOwnProperty.call(Oe,ze)&&(Ce[ze]=Oe[ze])},_e(Te,Se)},function(Te,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Ce(){this.constructor=Te}_e(Te,Se),Te.prototype=Se===null?Object.create(Se):(Ce.prototype=Se.prototype,new Ce)}),ne=this&&this.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1512)),j=ne(V(5229)),we=ne(V(2244)),he=ne(V(8613)),ye=function(Te){function Se(Ce,Oe){Oe===void 0&&(Oe={});var ze=Te.call(this,Ce,{compName:"notification"},Oe)||this;return ze.notifications=[],ze.initOptions(Oe,{position:{x:"right",y:"bottom"},duration:2e3}),ze.initTpl(),ze}return ce(Se,Te),Se.prototype.notify=function(Ce,Oe){var ze=this;Oe===void 0&&(Oe={duration:this.options.duration});var Ue=new xe(this,Ce);this.notifications.push(Ue),this.add(Ue),setTimeout(function(){return ze.remove(Ue.id)},Oe.duration)},Se.prototype.dismissAll=function(){for(var Ce=this.notifications,Oe=Ce[0];Oe;)this.remove(Oe.id),Oe=Ce[0]},Se.prototype.add=function(Ce){this.container.appendChild(Ce.container)},Se.prototype.remove=function(Ce){var Oe=this.notifications,ze=(0,we.default)(Oe,function(De){return De.id===Ce});if(ze){ze.destroy();var Ue=Oe.indexOf(ze);Oe.splice(Ue,1)}},Se.prototype.initTpl=function(){var Ce=this.$container,Oe=this.options.position,ze=Oe.x,Ue=Oe.y,De="flex-end",Fe="flex-end";switch(ze){case"center":Fe="center";break;case"left":Fe="flex-start"}Ue==="top"&&(De="flex-start"),Ce.attr("style","justify-content: ".concat(De,"; align-items: ").concat(Fe))},Se}(ne(V(5404)).default);Q.default=ye;var xe=function(){function Te(Se,Ce){this.container=(0,he.default)("div"),this.$container=(0,Ee.default)(this.container),this.notification=Se,this.content=Ce,this.id=(0,j.default)("luna-notification-"),this.$container.attr({id:this.id,class:Se.c("item ".concat(Se.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return Te.prototype.destroy=function(){this.$container.remove()},Te.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},Te}();q.exports=ye,q.exports.default=ye},5404:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Ce,Oe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Ue){ze.__proto__=Ue}||function(ze,Ue){for(var De in Ue)Object.prototype.hasOwnProperty.call(Ue,De)&&(ze[De]=Ue[De])},_e(Ce,Oe)},function(Ce,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function ze(){this.constructor=Ce}_e(Ce,Oe),Ce.prototype=Oe===null?Object.create(Oe):(ze.prototype=Oe.prototype,new ze)}),ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(1512)),we=V(164),he=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Te=ne(V(5852)),Se=function(Ce){function Oe(ze,Ue,De){var Fe=Ue.compName,Xe=(De===void 0?{}:De).theme,Ke=Xe===void 0?"light":Xe,He=Ce.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,we.classPrefix)(Fe),He.options={},He.container=ze,He.$container=(0,j.default)(ze),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,we.getPlatform)()))]),He.on("optionChange",function(Qe,pt,Mt){var wt=He.c;Qe==="theme"&&(He.$container.rmClass(wt("theme-".concat(Mt))).addClass(wt("theme-".concat(pt))),(0,he.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ke),He}return ce(Oe,Ce),Oe.prototype.destroy=function(){this.destroySubComponents();var ze=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ze("platform-".concat((0,we.getPlatform)()))).rmClass(ze("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(ze,Ue){var De=this,Fe=this.options,Xe={};typeof ze=="string"?Xe[ze]=Ue:Xe=ze,(0,he.default)(Xe,function(Ke,He){var Qe=Fe[He];Fe[He]=Ke,De.emit("optionChange",He,Ke,Qe)})},Oe.prototype.getOption=function(ze){return this.options[ze]},Oe.prototype.addSubComponent=function(ze){ze.setOption("theme",this.options.theme),this.subComponents.push(ze)},Oe.prototype.removeSubComponent=function(ze){(0,Te.default)(this.subComponents,function(Ue){return Ue===ze})},Oe.prototype.destroySubComponents=function(){(0,he.default)(this.subComponents,function(ze){return ze.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(ze,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(ze,Ue),(0,ye.default)(this.options,ze)},Oe.prototype.find=function(ze){return this.$container.find(this.c(ze))},Oe}(Ee.default);Q.default=Se},164:function(q,Q,V){var _e=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventClient=Q.drag=Q.classPrefix=void 0;var ce=_e(V(2461)),ne=_e(V(4331)),Ee=_e(V(5610)),j=_e(V(7483)),we=_e(V(3990)),he=_e(V(6341)),ye=_e(V(3875)),xe=_e(V(6954)),Te=_e(V(9585));function Se(De,Fe){for(var Xe=0,Ke=De.length;Xe<Ke;Xe++){var He=De[Xe];Fe(He),He.content&&Se(He.content,Fe)}}Q.classPrefix=function(De){var Fe="luna-".concat(De,"-");function Xe(Ke){return(0,ce.default)((0,ne.default)(Ke).split(/\s+/),function(He){return(0,he.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Qe){return"".concat(Fe).concat(Qe)})}).join(" ")}return function(Ke){if(/<[^>]*>/g.test(Ke))try{var He=j.default.parse(Ke);return Se(He,function(Qe){Qe.attrs&&Qe.attrs.class&&(Qe.attrs.class=Xe(Qe.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ke)}return Xe(Ke)}};var Ce,Oe="ontouchstart"in Ee.default,ze={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function(De){return Oe?ze[De]:Ue[De]},Q.eventClient=function(De,Fe){var Xe=De==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,we.default)(Ce))return Ce;if(!document)return 16;var De=document.createElement("div"),Fe=document.createElement("div");return De.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),De.appendChild(Fe),document.body.appendChild(De),Ce=De.offsetWidth-De.clientWidth,document.body.removeChild(De),Ce},Q.hasVerticalScrollbar=function(De){return De.scrollHeight>De.offsetHeight},Q.executeAfterTransition=function(De,Fe){if((0,Te.default)(De))return Fe();var Xe=function(Ke){Ke.target===De&&(De.removeEventListener("transitionend",Xe),Fe())};De.addEventListener("transitionend",Xe)},Q.pxToNum=function(De){return(0,ye.default)(De.replace("px",""))},Q.getPlatform=function(){var De=(0,xe.default)();return De==="os x"?"mac":De},Q.resetCanvasSize=function(De){De.width=Math.round(De.offsetWidth*window.devicePixelRatio),De.height=Math.round(De.offsetHeight*window.devicePixelRatio)}},1717:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Mt,wt){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,rt){bt.__proto__=rt}||function(bt,rt){for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(bt[nt]=rt[nt])},_e(Mt,wt)},function(Mt,wt){if(typeof wt!="function"&&wt!==null)throw new TypeError("Class extends value "+String(wt)+" is not a constructor or null");function bt(){this.constructor=Mt}_e(Mt,wt),Mt.prototype=wt===null?Object.create(wt):(bt.prototype=wt.prototype,new bt)}),ne=this&&this.__importDefault||function(Mt){return Mt&&Mt.__esModule?Mt:{default:Mt}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getObjAbstract=void 0;var Ee=ne(V(1512)),j=ne(V(6930)),we=ne(V(5166)),he=ne(V(5229)),ye=ne(V(3023)),xe=ne(V(3875)),Te=ne(V(996)),Se=ne(V(3783)),Ce=ne(V(9433)),Oe=ne(V(3990)),ze=ne(V(4696)),Ue=ne(V(6768)),De=ne(V(2533)),Fe=ne(V(3063)),Xe=ne(V(6339)),Ke=V(8629),He=function(Mt){function wt(bt){var rt=Mt.call(this,bt,{compName:"object-viewer"})||this;return rt.onItemClick=function(nt){var it=rt,dt=it.map,lt=it.c,ft=(0,Ee.default)(nt.curTarget),xt=ft.data("object-id"),ht=ft.find("span").eq(0);if(!ft.data("first-level")&&(xt&&(ft.find("ul").html(rt.objToHtml(dt[xt],!1)),ft.rmAttr("data-object-id")),nt.stopImmediatePropagation(),ht.hasClass(lt("expanded")))){var Vt=ft.find("ul").eq(0);ht.hasClass(lt("collapsed"))?(ht.rmClass(lt("collapsed")),Vt.show()):(ht.addClass(lt("collapsed")),Vt.hide()),rt.emit("change")}},rt.bindEvent(),rt}return ce(wt,Mt),wt.prototype.set=function(bt){(0,Ue.default)(bt)&&(bt=JSON.parse(bt)),this.data={id:(0,he.default)("json"),enumerable:{0:bt}},this.map={},Qe(this.map,this.data),this.render()},wt.prototype.destroy=function(){Mt.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},wt.prototype.objToHtml=function(bt,rt){var nt=this,it="";return(0,Se.default)(["enumerable","unenumerable","symbol"],function(dt){if(bt[dt]){var lt=(0,De.default)(bt[dt]);(0,Xe.default)(lt);for(var ft=0,xt=lt.length;ft<xt;ft++){var ht=lt[ft];it+=nt.createEl(ht,bt[dt][ht],dt,rt)}}}),bt.proto&&(it===""?it=this.objToHtml(bt.proto):it+=this.createEl("__proto__",bt.proto,"proto")),it},wt.prototype.createEl=function(bt,rt,nt,it){it===void 0&&(it=!1);var dt=this.c,lt=typeof rt;if(rt===null)return"<li>".concat(Dt(bt),'<span class="').concat(dt("null"),'">null</span></li>');if((0,Oe.default)(rt)||(0,ze.default)(rt))return"<li>".concat(Dt(bt),'<span class="').concat(dt(lt),'">').concat((0,Ke.encode)(rt),"</span></li>");if(rt.type==="RegExp"&&(lt="regexp"),rt.type==="Number"&&(lt="number"),rt.type==="Number"||rt.type==="RegExp")return"<li>".concat(Dt(bt),'<span class="').concat(dt(lt),'">').concat((0,Ke.encode)(rt.value),"</span></li>");if(rt.type==="Undefined"||rt.type==="Symbol")return"<li>".concat(Dt(bt),'<span class="').concat(dt("special"),'">').concat((0,Fe.default)(rt.type),"</span></li>");if(rt==="(...)")return"<li>".concat(Dt(bt),'<span class="').concat(dt("special"),'">').concat(rt,"</span></li>");if((0,we.default)(rt)){var ft=rt.id,xt=rt.reference,ht=pt(rt)||(0,ye.default)(lt),Vt=it?"":'<span class="'.concat(dt("expanded collapsed"),'"><span class="').concat(dt("icon icon-caret-right"),'"></span><span class="').concat(dt("icon icon-caret-down"),'"></span></span>'),st="<li ".concat(it?'data-first-level="true"':""," ").concat('data-object-id="'+(xt||ft)+'"',">").concat(Vt).concat(Dt(bt),'<span class="').concat(dt("open"),'">').concat(it?"":ht,'</span><ul class="').concat(dt(lt),'" ').concat(it?"":'style="display:none"',">");return it&&(st+=this.objToHtml(this.map[ft])),st+'</ul><span class="'.concat(dt("close"),'"></span></li>')}function Dt(ln){if(it||(0,we.default)(rt)&&rt.jsonSplitArr)return"";var In=dt("key");return nt!=="unenumerable"&&nt!=="proto"&&nt!=="symbol"||(In=dt("key-lighter")),'<span class="'.concat(In,'">').concat((0,Ke.encode)(ln),"</span>: ")}return"<li>".concat(Dt(bt),'<span class="').concat(dt(typeof rt),'">"').concat((0,Ke.encode)(rt),'"</span></li>')},wt.prototype.render=function(){var bt=this.map[this.data.id];this.$container.html(this.objToHtml(bt,!0))},wt.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},wt}(ne(V(5198)).default);function Qe(Mt,wt){var bt=wt.id;if(bt||bt===0){if(wt.type&&(0,j.default)(wt.type,"Array")&&wt.enumerable){var rt=function(ft,xt,ht){var Vt=[],st={};return(0,Se.default)(ft.enumerable,function(Dt,ln){var In=(0,xe.default)(ln);(0,Ce.default)(In)?st[ln]=Dt:Vt[In]=Dt}),Vt.enumerable=st,Vt.type=ht,Vt.id=xt,ft.unenumerable&&(Vt.unenumerable=ft.unenumerable),ft.symbol&&(Vt.symbol=ft.symbol),ft.proto&&(Vt.proto=ft.proto),Vt}(wt,bt,wt.type);rt.length>100&&(wt=function(ft){var xt=0,ht={};(0,Se.default)((0,Te.default)(ft,100),function(st){var Dt={},ln=xt;Dt.type="["+ln,Dt.enumerable={},(0,Se.default)(st,function(on){Dt.enumerable[xt]=on,xt+=1});var In=xt-1;Dt.type+=(In-ln>0?" \u2026 "+In:"")+"]",Dt.id=(0,he.default)("json"),Dt.jsonSplitArr=!0,ht[xt]=Dt});var Vt={};return Vt.enumerable=ht,Vt.id=ft.id,Vt.type=ft.type,ft.unenumerable&&(Vt.unenumerable=ft.unenumerable),ft.symbol&&(Vt.symbol=ft.symbol),ft.proto&&(Vt.proto=ft.proto),Vt}(rt))}Mt[bt]=wt;var nt=[];(0,Se.default)(["enumerable","unenumerable","symbol"],function(ft){if(wt[ft])for(var xt in wt[ft])nt.push(wt[ft][xt])}),wt.proto&&nt.push(wt.proto);for(var it=0,dt=nt.length;it<dt;it++){var lt=nt[it];(0,we.default)(lt)&&Qe(Mt,lt)}}}function pt(Mt){var wt=Mt.type,bt=Mt.value;if(wt)return wt==="Function"?(0,Ke.getFnAbstract)(bt):wt==="Array"&&Mt.unenumerable?"Array(".concat(Mt.unenumerable.length,")"):Mt.type}Q.default=He,Q.getObjAbstract=pt},3465:function(q,Q,V){var _e=this&&this.__importDefault||function(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}};Object.defineProperty(Q,"__esModule",{value:!0});var ce=_e(V(6329)),ne=function(){function Ee(){this.id=0,this.visited=[]}return Ee.prototype.set=function(j,we){var he=this.visited,ye=this.id,xe={id:ye,val:j};return(0,ce.default)(xe,we),he.push(xe),this.id++,ye},Ee.prototype.get=function(j){for(var we=this.visited,he=0,ye=we.length;he<ye;he++){var xe=we[he];if(j===xe.val)return xe}return!1},Ee}();Q.default=ne},4030:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(dt,lt){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,xt){ft.__proto__=xt}||function(ft,xt){for(var ht in xt)Object.prototype.hasOwnProperty.call(xt,ht)&&(ft[ht]=xt[ht])},_e(dt,lt)},function(dt,lt){if(typeof lt!="function"&&lt!==null)throw new TypeError("Class extends value "+String(lt)+" is not a constructor or null");function ft(){this.constructor=dt}_e(dt,lt),dt.prototype=lt===null?Object.create(lt):(ft.prototype=lt.prototype,new ft)}),ne=this&&this.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.Static=void 0;var Ee=ne(V(415)),j=ne(V(3990)),we=ne(V(4696)),he=ne(V(3063)),ye=ne(V(5166)),xe=ne(V(6472)),Te=ne(V(3023)),Se=ne(V(2533)),Ce=ne(V(3783)),Oe=ne(V(300)),ze=ne(V(4321)),Ue=ne(V(3085)),De=ne(V(1512)),Fe=ne(V(801)),Xe=ne(V(1116)),Ke=ne(V(5972)),He=ne(V(996)),Qe=ne(V(3367)),pt=ne(V(1214)),Mt=ne(V(6329)),wt=ne(V(6339)),bt=ne(V(3465)),rt=V(8629),nt=ne(V(1717));Q.Static=nt.default;var it=function(dt){function lt(ft,xt){xt===void 0&&(xt={});var ht=dt.call(this,ft,{compName:"object-viewer"})||this;return ht.onItemClick=function(Vt){var st=ht,Dt=st.map,ln=st.c,In=(0,De.default)(Vt.curTarget),on=In.data("object-id"),an=In.find("span").eq(0);if(!In.data("first-level")&&(on&&(In.find("ul").html(ht.objToHtml(Dt[on],!1)),In.rmAttr("data-object-id")),Vt.stopImmediatePropagation(),an.hasClass(ln("expanded")))){var Xt=In.find("ul").eq(0);an.hasClass(ln("collapsed"))?(an.rmClass(ln("collapsed")),Xt.show()):(an.addClass(ln("collapsed")),Xt.hide()),ht.emit("change")}},ht.initOptions(xt,{unenumerable:!1,accessGetter:!1}),ht.bindEvent(),ht}return ce(lt,dt),lt.prototype.set=function(ft){this.data=[ft],this.visitor=new bt.default,this.map={},this.render()},lt.prototype.destroy=function(){dt.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},lt.prototype.objToHtml=function(ft,xt){var ht=this,Vt=this.visitor,st=ft,Dt=!1,ln=Vt.get(ft);ln&&ln.self&&(st=ln.self);var In="",on=["enumerable"],an=(0,Se.default)(ft),Xt=[],Rt=[],en=[],hn={};if(this.options.unenumerable&&!xt&&(on.push("unenumerable"),on.push("symbol"),Xt=(0,Fe.default)((0,Xe.default)(ft,{prototype:!1,unenumerable:!0}),an),Rt=(0,Ke.default)((0,Xe.default)(ft,{prototype:!1,symbol:!0}),function(rn){return typeof rn=="symbol"})),(0,xe.default)(ft)&&ft.length>100){on.unshift("virtual"),Dt=!0;var vn=0,Pn={};(0,Ce.default)((0,He.default)(ft,100),function(rn){var bn=Object.create(null),Tn=vn,$n="["+Tn;(0,Ce.default)(rn,function(xn){bn[vn]=xn,Pn[vn]=!0,vn++});var Dn=vn-1;hn[$n+=(Dn-Tn>0?" \u2026 "+Dn:"")+"]"]=bn}),en=(0,Se.default)(hn),an=(0,Ke.default)(an,function(rn){return!Pn[rn]})}(0,Ce.default)(on,function(rn){var bn=[];bn=rn==="symbol"?Rt:rn==="unenumerable"?Xt:rn==="virtual"?en:an,Dt||(0,wt.default)(bn);for(var Tn=0,$n=bn.length;Tn<$n;Tn++){var Dn=(0,Qe.default)(bn[Tn]),xn="",En=Object.getOwnPropertyDescriptor(ft,Dn),Cn=En&&En.get,Qn=En&&En.set;if(Cn&&!ht.options.accessGetter)xn="(...)";else try{xn=rn==="virtual"?hn[Dn]:st[Dn],(0,ze.default)(xn)&&xn.catch(pt.default)}catch(nr){xn=nr instanceof Error?nr.message:(0,Qe.default)(nr)}In+=ht.createEl(Dn,ft,xn,rn,xt),Cn&&(In+=ht.createEl("get ".concat(Dn),ft,En.get,rn,xt)),Qn&&(In+=ht.createEl("set ".concat(Dn),ft,En.set,rn,xt))}});var Pt=(0,Ee.default)(ft);if(!xt&&Pt)if(In===""){var zt=Vt.set(Pt,{self:ft});this.map[zt]=Pt,In=this.objToHtml(Pt)}else In+=this.createEl("__proto__",st||ft,Pt,"proto");return In},lt.prototype.createEl=function(ft,xt,ht,Vt,st){st===void 0&&(st=!1);var Dt=this.visitor,ln=this.c,In=typeof ht,on=(0,Ue.default)(ht,!1);if(Vt==="virtual"&&(on=ft),ht===null)return"<li>".concat(Pn(ft),'<span class="').concat(ln("null"),'">null</span></li>');if((0,j.default)(ht)||(0,we.default)(ht))return"<li>".concat(Pn(ft),'<span class="').concat(ln(In),'">').concat((0,rt.encode)(ht),"</span></li>");if(on==="RegExp"&&(In="regexp"),on==="Number"&&(In="number"),on==="Number"||on==="RegExp")return"<li>".concat(Pn(ft),'<span class="').concat(ln(In),'">').concat((0,rt.encode)(ht.value),"</span></li>");if(on==="Undefined"||on==="Symbol")return"<li>".concat(Pn(ft),'<span class="').concat(ln("special"),'">').concat((0,he.default)(on),"</span></li>");if(ht==="(...)")return"<li>".concat(Pn(ft),'<span class="').concat(ln("special"),'">').concat(ht,"</span></li>");if((0,ye.default)(ht)){var an=Dt.get(ht),Xt=void 0;if(an)Xt=an.id;else{var Rt={};Vt==="proto"&&(Rt.self=xt),Xt=Dt.set(ht,Rt),this.map[Xt]=ht}var en=function(Pt,zt){if(!!zt)return zt==="Function"?(0,rt.getFnAbstract)((0,Oe.default)(Pt)):zt==="Array"?"Array(".concat(Pt.length,")"):zt}(ht,on)||(0,Te.default)(In),hn=st?"":'<span class="'.concat(ln("expanded collapsed"),'"><span class="').concat(ln("icon icon-caret-right"),'"></span><span class="').concat(ln("icon icon-caret-down"),'"></span></span>'),vn="<li ".concat(st?'data-first-level="true"':""," ").concat('data-object-id="'+Xt+'"',">").concat(hn).concat(Pn(ft),'<span class="').concat(ln("open"),'">').concat(st?"":en,'</span><ul class="').concat(ln(In),'" ').concat(st?"":'style="display:none"',">");return st&&(vn+=this.objToHtml(ht)),vn+'</ul><span class="'.concat(ln("close"),'"></span></li>')}function Pn(Pt){if(st||(0,ye.default)(ht)&&Vt==="virtual")return"";var zt=ln("key");return Vt!=="unenumerable"&&Vt!=="proto"&&Vt!=="symbol"||(zt=ln("key-lighter")),'<span class="'.concat(zt,'">').concat((0,rt.encode)(Pt),"</span>: ")}return"<li>".concat(Pn(ft),'<span class="').concat(ln(typeof ht),'">"').concat((0,rt.encode)(ht),'"</span></li>')},lt.prototype.render=function(){this.$container.html(this.objToHtml(this.data,!0))},lt.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},lt}(ne(V(5198)).default);Q.default=it,q.exports=(0,Mt.default)(it,Q),q.exports.default=it},8629:function(q,Q,V){var _e=this&&this.__importDefault||function(we){return we&&we.__esModule?we:{default:we}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getFnAbstract=Q.encode=void 0;var ce=_e(V(3367)),ne=_e(V(4331)),Ee=_e(V(8901));Q.encode=function(we){return(0,Ee.default)((0,ce.default)(we)).replace(/\n/g,"\u21B5").replace(/\f|\r|\t/g,"")},Q.getFnAbstract=function(we){return we.length>500&&(we=we.slice(0,500)+"..."),"\u0192 "+(0,ne.default)(function(he){var ye=he.match(j);return ye?ye[0]:he}(we).replace("function",""))};var j=/function(.*?)\((.*?)\)/},5198:function(q,Q,V){var _e,ce=this&&this.__extends||(_e=function(Ce,Oe){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,Ue){ze.__proto__=Ue}||function(ze,Ue){for(var De in Ue)Object.prototype.hasOwnProperty.call(Ue,De)&&(ze[De]=Ue[De])},_e(Ce,Oe)},function(Ce,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function ze(){this.constructor=Ce}_e(Ce,Oe),Ce.prototype=Oe===null?Object.create(Oe):(ze.prototype=Oe.prototype,new ze)}),ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Ee=ne(V(1443)),j=ne(V(1512)),we=V(2702),he=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Te=ne(V(5852)),Se=function(Ce){function Oe(ze,Ue,De){var Fe=Ue.compName,Xe=(De===void 0?{}:De).theme,Ke=Xe===void 0?"light":Xe,He=Ce.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,we.classPrefix)(Fe),He.options={},He.container=ze,He.$container=(0,j.default)(ze),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,we.getPlatform)()))]),He.on("optionChange",function(Qe,pt,Mt){var wt=He.c;Qe==="theme"&&(He.$container.rmClass(wt("theme-".concat(Mt))).addClass(wt("theme-".concat(pt))),(0,he.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ke),He}return ce(Oe,Ce),Oe.prototype.destroy=function(){this.destroySubComponents();var ze=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(ze("platform-".concat((0,we.getPlatform)()))).rmClass(ze("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(ze,Ue){var De=this,Fe=this.options,Xe={};typeof ze=="string"?Xe[ze]=Ue:Xe=ze,(0,he.default)(Xe,function(Ke,He){var Qe=Fe[He];Fe[He]=Ke,De.emit("optionChange",He,Ke,Qe)})},Oe.prototype.getOption=function(ze){return this.options[ze]},Oe.prototype.addSubComponent=function(ze){ze.setOption("theme",this.options.theme),this.subComponents.push(ze)},Oe.prototype.removeSubComponent=function(ze){(0,Te.default)(this.subComponents,function(Ue){return Ue===ze})},Oe.prototype.destroySubComponents=function(){(0,he.default)(this.subComponents,function(ze){return ze.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(ze,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(ze,Ue),(0,ye.default)(this.options,ze)},Oe.prototype.find=function(ze){return this.$container.find(this.c(ze))},Oe}(Ee.default);Q.default=Se},2702:function(q,Q,V){var _e=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventClient=Q.drag=Q.classPrefix=void 0;var ce=_e(V(2461)),ne=_e(V(4331)),Ee=_e(V(5610)),j=_e(V(7483)),we=_e(V(3990)),he=_e(V(6341)),ye=_e(V(3875)),xe=_e(V(6954)),Te=_e(V(9585));function Se(De,Fe){for(var Xe=0,Ke=De.length;Xe<Ke;Xe++){var He=De[Xe];Fe(He),He.content&&Se(He.content,Fe)}}Q.classPrefix=function(De){var Fe="luna-".concat(De,"-");function Xe(Ke){return(0,ce.default)((0,ne.default)(Ke).split(/\s+/),function(He){return(0,he.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Qe){return"".concat(Fe).concat(Qe)})}).join(" ")}return function(Ke){if(/<[^>]*>/g.test(Ke))try{var He=j.default.parse(Ke);return Se(He,function(Qe){Qe.attrs&&Qe.attrs.class&&(Qe.attrs.class=Xe(Qe.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ke)}return Xe(Ke)}};var Ce,Oe="ontouchstart"in Ee.default,ze={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function(De){return Oe?ze[De]:Ue[De]},Q.eventClient=function(De,Fe){var Xe=De==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,we.default)(Ce))return Ce;if(!document)return 16;var De=document.createElement("div"),Fe=document.createElement("div");return De.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),De.appendChild(Fe),document.body.appendChild(De),Ce=De.offsetWidth-De.clientWidth,document.body.removeChild(De),Ce},Q.hasVerticalScrollbar=function(De){return De.scrollHeight>De.offsetHeight},Q.executeAfterTransition=function(De,Fe){if((0,Te.default)(De))return Fe();var Xe=function(Ke){Ke.target===De&&(De.removeEventListener("transitionend",Xe),Fe())};De.addEventListener("transitionend",Xe)},Q.pxToNum=function(De){return(0,ye.default)(De.replace("px",""))},Q.getPlatform=function(){var De=(0,xe.default)();return De==="os x"?"mac":De},Q.resetCanvasSize=function(De){De.width=Math.round(De.offsetWidth*window.devicePixelRatio),De.height=Math.round(De.offsetHeight*window.devicePixelRatio)}},4842:function(q,Q,V){var _e,ce;/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */(function(ne,Ee){_e=[V(4704)],ce=function(j){return function(we,he){function ye(){}var xe=ye.prototype=Object.create(he.prototype);xe.bindHandles=function(){this._bindHandles(!0)},xe.unbindHandles=function(){this._bindHandles(!1)},xe._bindHandles=function(Ce){for(var Oe=(Ce=Ce===void 0||Ce)?"addEventListener":"removeEventListener",ze=Ce?this._touchActionValue:"",Ue=0;Ue<this.handles.length;Ue++){var De=this.handles[Ue];this._bindStartEvent(De,Ce),De[Oe]("click",this),we.PointerEvent&&(De.style.touchAction=ze)}},xe._touchActionValue="none",xe.pointerDown=function(Ce,Oe){this.okayPointerDown(Ce)&&(this.pointerDownPointer={pageX:Oe.pageX,pageY:Oe.pageY},Ce.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Ce),this.emitEvent("pointerDown",[Ce,Oe]))};var Te={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},Se={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return xe.okayPointerDown=function(Ce){var Oe=Te[Ce.target.nodeName],ze=Se[Ce.target.type],Ue=!Oe||ze;return Ue||this._pointerReset(),Ue},xe.pointerDownBlur=function(){var Ce=document.activeElement;Ce&&Ce.blur&&Ce!=document.body&&Ce.blur()},xe.pointerMove=function(Ce,Oe){var ze=this._dragPointerMove(Ce,Oe);this.emitEvent("pointerMove",[Ce,Oe,ze]),this._dragMove(Ce,Oe,ze)},xe._dragPointerMove=function(Ce,Oe){var ze={x:Oe.pageX-this.pointerDownPointer.pageX,y:Oe.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(ze)&&this._dragStart(Ce,Oe),ze},xe.hasDragStarted=function(Ce){return Math.abs(Ce.x)>3||Math.abs(Ce.y)>3},xe.pointerUp=function(Ce,Oe){this.emitEvent("pointerUp",[Ce,Oe]),this._dragPointerUp(Ce,Oe)},xe._dragPointerUp=function(Ce,Oe){this.isDragging?this._dragEnd(Ce,Oe):this._staticClick(Ce,Oe)},xe._dragStart=function(Ce,Oe){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(Ce,Oe)},xe.dragStart=function(Ce,Oe){this.emitEvent("dragStart",[Ce,Oe])},xe._dragMove=function(Ce,Oe,ze){this.isDragging&&this.dragMove(Ce,Oe,ze)},xe.dragMove=function(Ce,Oe,ze){Ce.preventDefault(),this.emitEvent("dragMove",[Ce,Oe,ze])},xe._dragEnd=function(Ce,Oe){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(Ce,Oe)},xe.dragEnd=function(Ce,Oe){this.emitEvent("dragEnd",[Ce,Oe])},xe.onclick=function(Ce){this.isPreventingClicks&&Ce.preventDefault()},xe._staticClick=function(Ce,Oe){this.isIgnoringMouseUp&&Ce.type=="mouseup"||(this.staticClick(Ce,Oe),Ce.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},xe.staticClick=function(Ce,Oe){this.emitEvent("staticClick",[Ce,Oe])},ye.getPointerPoint=he.getPointerPoint,ye}(ne,j)}.apply(Q,_e),ce===void 0||(q.exports=ce)})(window)},4704:function(q,Q,V){var _e,ce;/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */(function(ne,Ee){_e=[V(7158)],ce=function(j){return function(we,he){function ye(){}function xe(){}var Te=xe.prototype=Object.create(he.prototype);Te.bindStartEvent=function(Ce){this._bindStartEvent(Ce,!0)},Te.unbindStartEvent=function(Ce){this._bindStartEvent(Ce,!1)},Te._bindStartEvent=function(Ce,Oe){var ze=(Oe=Oe===void 0||Oe)?"addEventListener":"removeEventListener",Ue="mousedown";"ontouchstart"in we?Ue="touchstart":we.PointerEvent&&(Ue="pointerdown"),Ce[ze](Ue,this)},Te.handleEvent=function(Ce){var Oe="on"+Ce.type;this[Oe]&&this[Oe](Ce)},Te.getTouch=function(Ce){for(var Oe=0;Oe<Ce.length;Oe++){var ze=Ce[Oe];if(ze.identifier==this.pointerIdentifier)return ze}},Te.onmousedown=function(Ce){var Oe=Ce.button;Oe&&Oe!==0&&Oe!==1||this._pointerDown(Ce,Ce)},Te.ontouchstart=function(Ce){this._pointerDown(Ce,Ce.changedTouches[0])},Te.onpointerdown=function(Ce){this._pointerDown(Ce,Ce)},Te._pointerDown=function(Ce,Oe){Ce.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=Oe.pointerId!==void 0?Oe.pointerId:Oe.identifier,this.pointerDown(Ce,Oe))},Te.pointerDown=function(Ce,Oe){this._bindPostStartEvents(Ce),this.emitEvent("pointerDown",[Ce,Oe])};var Se={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return Te._bindPostStartEvents=function(Ce){if(Ce){var Oe=Se[Ce.type];Oe.forEach(function(ze){we.addEventListener(ze,this)},this),this._boundPointerEvents=Oe}},Te._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(Ce){we.removeEventListener(Ce,this)},this),delete this._boundPointerEvents)},Te.onmousemove=function(Ce){this._pointerMove(Ce,Ce)},Te.onpointermove=function(Ce){Ce.pointerId==this.pointerIdentifier&&this._pointerMove(Ce,Ce)},Te.ontouchmove=function(Ce){var Oe=this.getTouch(Ce.changedTouches);Oe&&this._pointerMove(Ce,Oe)},Te._pointerMove=function(Ce,Oe){this.pointerMove(Ce,Oe)},Te.pointerMove=function(Ce,Oe){this.emitEvent("pointerMove",[Ce,Oe])},Te.onmouseup=function(Ce){this._pointerUp(Ce,Ce)},Te.onpointerup=function(Ce){Ce.pointerId==this.pointerIdentifier&&this._pointerUp(Ce,Ce)},Te.ontouchend=function(Ce){var Oe=this.getTouch(Ce.changedTouches);Oe&&this._pointerUp(Ce,Oe)},Te._pointerUp=function(Ce,Oe){this._pointerDone(),this.pointerUp(Ce,Oe)},Te.pointerUp=function(Ce,Oe){this.emitEvent("pointerUp",[Ce,Oe])},Te._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},Te._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},Te.pointerDone=ye,Te.onpointercancel=function(Ce){Ce.pointerId==this.pointerIdentifier&&this._pointerCancel(Ce,Ce)},Te.ontouchcancel=function(Ce){var Oe=this.getTouch(Ce.changedTouches);Oe&&this._pointerCancel(Ce,Oe)},Te._pointerCancel=function(Ce,Oe){this._pointerDone(),this.pointerCancel(Ce,Oe)},Te.pointerCancel=function(Ce,Oe){this.emitEvent("pointerCancel",[Ce,Oe])},xe.getPointerPoint=function(Ce){return{x:Ce.pageX,y:Ce.pageY}},xe}(ne,j)}.apply(Q,_e),ce===void 0||(q.exports=ce)})(window)},8138:function(q,Q,V){q.exports=V(2895).default}},__webpack_module_cache__={};function __webpack_require__(q){var Q=__webpack_module_cache__[q];if(Q!==void 0)return Q.exports;var V=__webpack_module_cache__[q]={id:q,exports:{}};return __webpack_modules__[q].call(V.exports,V,V.exports,__webpack_require__),V.exports}__webpack_require__.n=function(q){var Q=q&&q.__esModule?function(){return q.default}:function(){return q};return __webpack_require__.d(Q,{a:Q}),Q},__webpack_require__.d=function(q,Q){for(var V in Q)__webpack_require__.o(Q,V)&&!__webpack_require__.o(q,V)&&Object.defineProperty(q,V,{enumerable:!0,get:Q[V]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(q,Q){return Object.prototype.hasOwnProperty.call(q,Q)},__webpack_require__.r=function(q){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(8138);return __webpack_exports__}()})})(eruda$1);var eruda=getDefaultExportFromCjs(eruda$1.exports);export{required as $,Ae as A,toDisplayString as B,render$1 as C,renderList as D,withDirectives as E,Fragment as F,vModelText as G,resolveDynamicComponent as H,render$g as I,render$8 as J,render$a as K,normalizeStyle as L,Me as M,render$b as N,render$6 as O,render$e as P,reactive as Q,RouterView as R,computed as S,Transition as T,useVuelidate as U,render$7 as V,render$2 as W,render as X,Y,X as Z,W as _,openBlock as a,email as a0,axios as a1,nextTick as a2,numeric as a3,minLength as a4,sameAs as a5,createStaticVNode as a6,Z as a7,J$1 as a8,render$f as a9,G as aa,render$c as ab,render$3 as ac,render$9 as ad,render$4 as ae,withAsyncContext as af,Suspense as ag,createRouter as ah,createWebHistory as ai,createApp as aj,createPinia as ak,eruda as al,createBaseVNode as b,createElementBlock as c,defineStore as d,createCommentVNode as e,createVNode as f,unref as g,oe as h,isRef as i,je as j,render$5 as k,fe as l,createTextVNode as m,createBlock as n,onMounted as o,me as p,pe as q,ref as r,normalizeClass as s,fe$1 as t,useRouter as u,ve as v,withCtx as w,A as x,mapbox as y,render$d as z};
