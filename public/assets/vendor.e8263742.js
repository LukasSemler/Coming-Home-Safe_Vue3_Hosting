var ay=Object.defineProperty,sy=Object.defineProperties;var ly=Object.getOwnPropertyDescriptors;var Xd=Object.getOwnPropertySymbols;var Q_=Object.prototype.hasOwnProperty,J_=Object.prototype.propertyIsEnumerable;var K_=(q,Q,V)=>Q in q?ay(q,Q,{enumerable:!0,configurable:!0,writable:!0,value:V}):q[Q]=V,Yr=(q,Q)=>{for(var V in Q||(Q={}))Q_.call(Q,V)&&K_(q,V,Q[V]);if(Xd)for(var V of Xd(Q))J_.call(Q,V)&&K_(q,V,Q[V]);return q},Qo=(q,Q)=>sy(q,ly(Q));var Es=(q,Q)=>{var V={};for(var de in q)Q_.call(q,de)&&Q.indexOf(de)<0&&(V[de]=q[de]);if(q!=null&&Xd)for(var de of Xd(q))Q.indexOf(de)<0&&J_.call(q,de)&&(V[de]=q[de]);return V};function makeMap(q,Q){const V=Object.create(null),de=q.split(",");for(let he=0;he<de.length;he++)V[de[he]]=!0;return Q?he=>!!V[he.toLowerCase()]:he=>!!V[he]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(q){return!!q||q===""}function normalizeStyle(q){if(isArray$1(q)){const Q={};for(let V=0;V<q.length;V++){const de=q[V],he=isString$1(de)?parseStringStyle(de):normalizeStyle(de);if(he)for(const ne in he)Q[ne]=he[ne]}return Q}else{if(isString$1(q))return q;if(isObject$1(q))return q}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(q){const Q={};return q.split(listDelimiterRE).forEach(V=>{if(V){const de=V.split(propertyDelimiterRE);de.length>1&&(Q[de[0].trim()]=de[1].trim())}}),Q}function normalizeClass(q){let Q="";if(isString$1(q))Q=q;else if(isArray$1(q))for(let V=0;V<q.length;V++){const de=normalizeClass(q[V]);de&&(Q+=de+" ")}else if(isObject$1(q))for(const V in q)q[V]&&(Q+=V+" ");return Q.trim()}const toDisplayString=q=>isString$1(q)?q:q==null?"":isArray$1(q)||isObject$1(q)&&(q.toString===objectToString||!isFunction$2(q.toString))?JSON.stringify(q,replacer,2):String(q),replacer=(q,Q)=>Q&&Q.__v_isRef?replacer(q,Q.value):isMap(Q)?{[`Map(${Q.size})`]:[...Q.entries()].reduce((V,[de,he])=>(V[`${de} =>`]=he,V),{})}:isSet(Q)?{[`Set(${Q.size})`]:[...Q.values()]}:isObject$1(Q)&&!isArray$1(Q)&&!isPlainObject$2(Q)?String(Q):Q,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=q=>onRE.test(q),isModelListener=q=>q.startsWith("onUpdate:"),extend$1=Object.assign,remove=(q,Q)=>{const V=q.indexOf(Q);V>-1&&q.splice(V,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(q,Q)=>hasOwnProperty.call(q,Q),isArray$1=Array.isArray,isMap=q=>toTypeString(q)==="[object Map]",isSet=q=>toTypeString(q)==="[object Set]",isFunction$2=q=>typeof q=="function",isString$1=q=>typeof q=="string",isSymbol=q=>typeof q=="symbol",isObject$1=q=>q!==null&&typeof q=="object",isPromise=q=>isObject$1(q)&&isFunction$2(q.then)&&isFunction$2(q.catch),objectToString=Object.prototype.toString,toTypeString=q=>objectToString.call(q),toRawType=q=>toTypeString(q).slice(8,-1),isPlainObject$2=q=>toTypeString(q)==="[object Object]",isIntegerKey=q=>isString$1(q)&&q!=="NaN"&&q[0]!=="-"&&""+parseInt(q,10)===q,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=q=>{const Q=Object.create(null);return V=>Q[V]||(Q[V]=q(V))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(q=>q.replace(camelizeRE,(Q,V)=>V?V.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(q=>q.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(q=>q.charAt(0).toUpperCase()+q.slice(1)),toHandlerKey=cacheStringFunction(q=>q?`on${capitalize(q)}`:""),hasChanged=(q,Q)=>!Object.is(q,Q),invokeArrayFns=(q,Q)=>{for(let V=0;V<q.length;V++)q[V](Q)},def=(q,Q,V)=>{Object.defineProperty(q,Q,{configurable:!0,enumerable:!1,value:V})},toNumber=q=>{const Q=parseFloat(q);return isNaN(Q)?q:Q};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(Q=!1){this.active=!0,this.effects=[],this.cleanups=[],!Q&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(Q){if(this.active)try{return activeEffectScope=this,Q()}finally{activeEffectScope=this.parent}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(Q){if(this.active){let V,de;for(V=0,de=this.effects.length;V<de;V++)this.effects[V].stop();for(V=0,de=this.cleanups.length;V<de;V++)this.cleanups[V]();if(this.scopes)for(V=0,de=this.scopes.length;V<de;V++)this.scopes[V].stop(!0);if(this.parent&&!Q){const he=this.parent.scopes.pop();he&&he!==this&&(this.parent.scopes[this.index]=he,he.index=this.index)}this.active=!1}}}function effectScope(q){return new EffectScope(q)}function recordEffectScope(q,Q=activeEffectScope){Q&&Q.active&&Q.effects.push(q)}const createDep=q=>{const Q=new Set(q);return Q.w=0,Q.n=0,Q},wasTracked=q=>(q.w&trackOpBit)>0,newTracked=q=>(q.n&trackOpBit)>0,initDepMarkers=({deps:q})=>{if(q.length)for(let Q=0;Q<q.length;Q++)q[Q].w|=trackOpBit},finalizeDepMarkers=q=>{const{deps:Q}=q;if(Q.length){let V=0;for(let de=0;de<Q.length;de++){const he=Q[de];wasTracked(he)&&!newTracked(he)?he.delete(q):Q[V++]=he,he.w&=~trackOpBit,he.n&=~trackOpBit}Q.length=V}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(Q,V=null,de){this.fn=Q,this.scheduler=V,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,de)}run(){if(!this.active)return this.fn();let Q=activeEffect,V=shouldTrack;for(;Q;){if(Q===this)return;Q=Q.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=V,this.parent=void 0}}stop(){this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(q){const{deps:Q}=q;if(Q.length){for(let V=0;V<Q.length;V++)Q[V].delete(q);Q.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const q=trackStack.pop();shouldTrack=q===void 0?!0:q}function track(q,Q,V){if(shouldTrack&&activeEffect){let de=targetMap.get(q);de||targetMap.set(q,de=new Map);let he=de.get(V);he||de.set(V,he=createDep()),trackEffects(he)}}function trackEffects(q,Q){let V=!1;effectTrackDepth<=maxMarkerBits?newTracked(q)||(q.n|=trackOpBit,V=!wasTracked(q)):V=!q.has(activeEffect),V&&(q.add(activeEffect),activeEffect.deps.push(q))}function trigger$1(q,Q,V,de,he,ne){const Te=targetMap.get(q);if(!Te)return;let j=[];if(Q==="clear")j=[...Te.values()];else if(V==="length"&&isArray$1(q))Te.forEach((be,ce)=>{(ce==="length"||ce>=de)&&j.push(be)});else switch(V!==void 0&&j.push(Te.get(V)),Q){case"add":isArray$1(q)?isIntegerKey(V)&&j.push(Te.get("length")):(j.push(Te.get(ITERATE_KEY)),isMap(q)&&j.push(Te.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(q)||(j.push(Te.get(ITERATE_KEY)),isMap(q)&&j.push(Te.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(q)&&j.push(Te.get(ITERATE_KEY));break}if(j.length===1)j[0]&&triggerEffects(j[0]);else{const be=[];for(const ce of j)ce&&be.push(...ce);triggerEffects(createDep(be))}}function triggerEffects(q,Q){for(const V of isArray$1(q)?q:[...q])(V!==activeEffect||V.allowRecurse)&&(V.scheduler?V.scheduler():V.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(q=>Symbol[q]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const q={};return["includes","indexOf","lastIndexOf"].forEach(Q=>{q[Q]=function(...V){const de=toRaw(this);for(let ne=0,Te=this.length;ne<Te;ne++)track(de,"get",ne+"");const he=de[Q](...V);return he===-1||he===!1?de[Q](...V.map(toRaw)):he}}),["push","pop","shift","unshift","splice"].forEach(Q=>{q[Q]=function(...V){pauseTracking();const de=toRaw(this)[Q].apply(this,V);return resetTracking(),de}}),q}function createGetter(q=!1,Q=!1){return function(de,he,ne){if(he==="__v_isReactive")return!q;if(he==="__v_isReadonly")return q;if(he==="__v_isShallow")return Q;if(he==="__v_raw"&&ne===(q?Q?shallowReadonlyMap:readonlyMap:Q?shallowReactiveMap:reactiveMap).get(de))return de;const Te=isArray$1(de);if(!q&&Te&&hasOwn(arrayInstrumentations,he))return Reflect.get(arrayInstrumentations,he,ne);const j=Reflect.get(de,he,ne);return(isSymbol(he)?builtInSymbols.has(he):isNonTrackableKeys(he))||(q||track(de,"get",he),Q)?j:isRef(j)?!Te||!isIntegerKey(he)?j.value:j:isObject$1(j)?q?readonly(j):reactive(j):j}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(q=!1){return function(V,de,he,ne){let Te=V[de];if(isReadonly(Te)&&isRef(Te)&&!isRef(he))return!1;if(!q&&!isReadonly(he)&&(isShallow(he)||(he=toRaw(he),Te=toRaw(Te)),!isArray$1(V)&&isRef(Te)&&!isRef(he)))return Te.value=he,!0;const j=isArray$1(V)&&isIntegerKey(de)?Number(de)<V.length:hasOwn(V,de),be=Reflect.set(V,de,he,ne);return V===toRaw(ne)&&(j?hasChanged(he,Te)&&trigger$1(V,"set",de,he):trigger$1(V,"add",de,he)),be}}function deleteProperty(q,Q){const V=hasOwn(q,Q);q[Q];const de=Reflect.deleteProperty(q,Q);return de&&V&&trigger$1(q,"delete",Q,void 0),de}function has(q,Q){const V=Reflect.has(q,Q);return(!isSymbol(Q)||!builtInSymbols.has(Q))&&track(q,"has",Q),V}function ownKeys(q){return track(q,"iterate",isArray$1(q)?"length":ITERATE_KEY),Reflect.ownKeys(q)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(q,Q){return!0},deleteProperty(q,Q){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=q=>q,getProto=q=>Reflect.getPrototypeOf(q);function get$1(q,Q,V=!1,de=!1){q=q.__v_raw;const he=toRaw(q),ne=toRaw(Q);Q!==ne&&!V&&track(he,"get",Q),!V&&track(he,"get",ne);const{has:Te}=getProto(he),j=de?toShallow:V?toReadonly:toReactive;if(Te.call(he,Q))return j(q.get(Q));if(Te.call(he,ne))return j(q.get(ne));q!==he&&q.get(Q)}function has$1(q,Q=!1){const V=this.__v_raw,de=toRaw(V),he=toRaw(q);return q!==he&&!Q&&track(de,"has",q),!Q&&track(de,"has",he),q===he?V.has(q):V.has(q)||V.has(he)}function size(q,Q=!1){return q=q.__v_raw,!Q&&track(toRaw(q),"iterate",ITERATE_KEY),Reflect.get(q,"size",q)}function add(q){q=toRaw(q);const Q=toRaw(this);return getProto(Q).has.call(Q,q)||(Q.add(q),trigger$1(Q,"add",q,q)),this}function set$1(q,Q){Q=toRaw(Q);const V=toRaw(this),{has:de,get:he}=getProto(V);let ne=de.call(V,q);ne||(q=toRaw(q),ne=de.call(V,q));const Te=he.call(V,q);return V.set(q,Q),ne?hasChanged(Q,Te)&&trigger$1(V,"set",q,Q):trigger$1(V,"add",q,Q),this}function deleteEntry(q){const Q=toRaw(this),{has:V,get:de}=getProto(Q);let he=V.call(Q,q);he||(q=toRaw(q),he=V.call(Q,q)),de&&de.call(Q,q);const ne=Q.delete(q);return he&&trigger$1(Q,"delete",q,void 0),ne}function clear(){const q=toRaw(this),Q=q.size!==0,V=q.clear();return Q&&trigger$1(q,"clear",void 0,void 0),V}function createForEach(q,Q){return function(de,he){const ne=this,Te=ne.__v_raw,j=toRaw(Te),be=Q?toShallow:q?toReadonly:toReactive;return!q&&track(j,"iterate",ITERATE_KEY),Te.forEach((ce,ye)=>de.call(he,be(ce),be(ye),ne))}}function createIterableMethod(q,Q,V){return function(...de){const he=this.__v_raw,ne=toRaw(he),Te=isMap(ne),j=q==="entries"||q===Symbol.iterator&&Te,be=q==="keys"&&Te,ce=he[q](...de),ye=V?toShallow:Q?toReadonly:toReactive;return!Q&&track(ne,"iterate",be?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:xe,done:Ee}=ce.next();return Ee?{value:xe,done:Ee}:{value:j?[ye(xe[0]),ye(xe[1])]:ye(xe),done:Ee}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(q){return function(...Q){return q==="delete"?!1:this}}function createInstrumentations(){const q={get(ne){return get$1(this,ne)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},Q={get(ne){return get$1(this,ne,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},V={get(ne){return get$1(this,ne,!0)},get size(){return size(this,!0)},has(ne){return has$1.call(this,ne,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},de={get(ne){return get$1(this,ne,!0,!0)},get size(){return size(this,!0)},has(ne){return has$1.call(this,ne,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(ne=>{q[ne]=createIterableMethod(ne,!1,!1),V[ne]=createIterableMethod(ne,!0,!1),Q[ne]=createIterableMethod(ne,!1,!0),de[ne]=createIterableMethod(ne,!0,!0)}),[q,V,Q,de]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(q,Q){const V=Q?q?shallowReadonlyInstrumentations:shallowInstrumentations:q?readonlyInstrumentations:mutableInstrumentations;return(de,he,ne)=>he==="__v_isReactive"?!q:he==="__v_isReadonly"?q:he==="__v_raw"?de:Reflect.get(hasOwn(V,he)&&he in de?V:de,he,ne)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(q){switch(q){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(q){return q.__v_skip||!Object.isExtensible(q)?0:targetTypeMap(toRawType(q))}function reactive(q){return isReadonly(q)?q:createReactiveObject(q,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(q){return createReactiveObject(q,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(q){return createReactiveObject(q,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(q,Q,V,de,he){if(!isObject$1(q)||q.__v_raw&&!(Q&&q.__v_isReactive))return q;const ne=he.get(q);if(ne)return ne;const Te=getTargetType(q);if(Te===0)return q;const j=new Proxy(q,Te===2?de:V);return he.set(q,j),j}function isReactive(q){return isReadonly(q)?isReactive(q.__v_raw):!!(q&&q.__v_isReactive)}function isReadonly(q){return!!(q&&q.__v_isReadonly)}function isShallow(q){return!!(q&&q.__v_isShallow)}function isProxy$1(q){return isReactive(q)||isReadonly(q)}function toRaw(q){const Q=q&&q.__v_raw;return Q?toRaw(Q):q}function markRaw(q){return def(q,"__v_skip",!0),q}const toReactive=q=>isObject$1(q)?reactive(q):q,toReadonly=q=>isObject$1(q)?readonly(q):q;function trackRefValue(q){shouldTrack&&activeEffect&&(q=toRaw(q),trackEffects(q.dep||(q.dep=createDep())))}function triggerRefValue(q,Q){q=toRaw(q),q.dep&&triggerEffects(q.dep)}function isRef(q){return!!(q&&q.__v_isRef===!0)}function ref(q){return createRef(q,!1)}function shallowRef(q){return createRef(q,!0)}function createRef(q,Q){return isRef(q)?q:new RefImpl(q,Q)}class RefImpl{constructor(Q,V){this.__v_isShallow=V,this.dep=void 0,this.__v_isRef=!0,this._rawValue=V?Q:toRaw(Q),this._value=V?Q:toReactive(Q)}get value(){return trackRefValue(this),this._value}set value(Q){Q=this.__v_isShallow?Q:toRaw(Q),hasChanged(Q,this._rawValue)&&(this._rawValue=Q,this._value=this.__v_isShallow?Q:toReactive(Q),triggerRefValue(this))}}function unref(q){return isRef(q)?q.value:q}const shallowUnwrapHandlers={get:(q,Q,V)=>unref(Reflect.get(q,Q,V)),set:(q,Q,V,de)=>{const he=q[Q];return isRef(he)&&!isRef(V)?(he.value=V,!0):Reflect.set(q,Q,V,de)}};function proxyRefs(q){return isReactive(q)?q:new Proxy(q,shallowUnwrapHandlers)}function toRefs(q){const Q=isArray$1(q)?new Array(q.length):{};for(const V in q)Q[V]=toRef(q,V);return Q}class ObjectRefImpl{constructor(Q,V,de){this._object=Q,this._key=V,this._defaultValue=de,this.__v_isRef=!0}get value(){const Q=this._object[this._key];return Q===void 0?this._defaultValue:Q}set value(Q){this._object[this._key]=Q}}function toRef(q,Q,V){const de=q[Q];return isRef(de)?de:new ObjectRefImpl(q,Q,V)}class ComputedRefImpl{constructor(Q,V,de,he){this._setter=V,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(Q,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!he,this.__v_isReadonly=de}get value(){const Q=toRaw(this);return trackRefValue(Q),(Q._dirty||!Q._cacheable)&&(Q._dirty=!1,Q._value=Q.effect.run()),Q._value}set value(Q){this._setter(Q)}}function computed$1(q,Q,V=!1){let de,he;const ne=isFunction$2(q);return ne?(de=q,he=NOOP):(de=q.get,he=q.set),new ComputedRefImpl(de,he,ne||!he,V)}Promise.resolve();function callWithErrorHandling(q,Q,V,de){let he;try{he=de?q(...de):q()}catch(ne){handleError(ne,Q,V)}return he}function callWithAsyncErrorHandling(q,Q,V,de){if(isFunction$2(q)){const ne=callWithErrorHandling(q,Q,V,de);return ne&&isPromise(ne)&&ne.catch(Te=>{handleError(Te,Q,V)}),ne}const he=[];for(let ne=0;ne<q.length;ne++)he.push(callWithAsyncErrorHandling(q[ne],Q,V,de));return he}function handleError(q,Q,V,de=!0){const he=Q?Q.vnode:null;if(Q){let ne=Q.parent;const Te=Q.proxy,j=V;for(;ne;){const ce=ne.ec;if(ce){for(let ye=0;ye<ce.length;ye++)if(ce[ye](q,Te,j)===!1)return}ne=ne.parent}const be=Q.appContext.config.errorHandler;if(be){callWithErrorHandling(be,null,10,[q,Te,j]);return}}logError(q,V,he,de)}function logError(q,Q,V,de=!0){console.error(q)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(q){const Q=currentFlushPromise||resolvedPromise;return q?Q.then(this?q.bind(this):q):Q}function findInsertionIndex(q){let Q=flushIndex+1,V=queue.length;for(;Q<V;){const de=Q+V>>>1;getId(queue[de])<q?Q=de+1:V=de}return Q}function queueJob(q){(!queue.length||!queue.includes(q,isFlushing&&q.allowRecurse?flushIndex+1:flushIndex))&&q!==currentPreFlushParentJob&&(q.id==null?queue.push(q):queue.splice(findInsertionIndex(q.id),0,q),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(q){const Q=queue.indexOf(q);Q>flushIndex&&queue.splice(Q,1)}function queueCb(q,Q,V,de){isArray$1(q)?V.push(...q):(!Q||!Q.includes(q,q.allowRecurse?de+1:de))&&V.push(q),queueFlush()}function queuePreFlushCb(q){queueCb(q,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(q){queueCb(q,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(q,Q=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=Q,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(q,Q)}}function flushPostFlushCbs(q){if(pendingPostFlushCbs.length){const Q=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...Q);return}for(activePostFlushCbs=Q,activePostFlushCbs.sort((V,de)=>getId(V)-getId(de)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=q=>q.id==null?1/0:q.id;function flushJobs(q){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(q),queue.sort((V,de)=>getId(V)-getId(de));const Q=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const V=queue[flushIndex];V&&V.active!==!1&&callWithErrorHandling(V,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(q)}}function emit$1(q,Q,...V){const de=q.vnode.props||EMPTY_OBJ;let he=V;const ne=Q.startsWith("update:"),Te=ne&&Q.slice(7);if(Te&&Te in de){const ye=`${Te==="modelValue"?"model":Te}Modifiers`,{number:xe,trim:Ee}=de[ye]||EMPTY_OBJ;Ee?he=V.map(Ce=>Ce.trim()):xe&&(he=V.map(toNumber))}let j,be=de[j=toHandlerKey(Q)]||de[j=toHandlerKey(camelize(Q))];!be&&ne&&(be=de[j=toHandlerKey(hyphenate(Q))]),be&&callWithAsyncErrorHandling(be,q,6,he);const ce=de[j+"Once"];if(ce){if(!q.emitted)q.emitted={};else if(q.emitted[j])return;q.emitted[j]=!0,callWithAsyncErrorHandling(ce,q,6,he)}}function normalizeEmitsOptions(q,Q,V=!1){const de=Q.emitsCache,he=de.get(q);if(he!==void 0)return he;const ne=q.emits;let Te={},j=!1;if(!isFunction$2(q)){const be=ce=>{const ye=normalizeEmitsOptions(ce,Q,!0);ye&&(j=!0,extend$1(Te,ye))};!V&&Q.mixins.length&&Q.mixins.forEach(be),q.extends&&be(q.extends),q.mixins&&q.mixins.forEach(be)}return!ne&&!j?(de.set(q,null),null):(isArray$1(ne)?ne.forEach(be=>Te[be]=null):extend$1(Te,ne),de.set(q,Te),Te)}function isEmitListener(q,Q){return!q||!isOn(Q)?!1:(Q=Q.slice(2).replace(/Once$/,""),hasOwn(q,Q[0].toLowerCase()+Q.slice(1))||hasOwn(q,hyphenate(Q))||hasOwn(q,Q))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(q){const Q=currentRenderingInstance;return currentRenderingInstance=q,currentScopeId=q&&q.type.__scopeId||null,Q}function withCtx(q,Q=currentRenderingInstance,V){if(!Q||q._n)return q;const de=(...he)=>{de._d&&setBlockTracking(-1);const ne=setCurrentRenderingInstance(Q),Te=q(...he);return setCurrentRenderingInstance(ne),de._d&&setBlockTracking(1),Te};return de._n=!0,de._c=!0,de._d=!0,de}function markAttrsAccessed(){}function renderComponentRoot(q){const{type:Q,vnode:V,proxy:de,withProxy:he,props:ne,propsOptions:[Te],slots:j,attrs:be,emit:ce,render:ye,renderCache:xe,data:Ee,setupState:Ce,ctx:Se,inheritAttrs:Oe}=q;let De,Ue;const $e=setCurrentRenderingInstance(q);try{if(V.shapeFlag&4){const Xe=he||de;De=normalizeVNode(ye.call(Xe,Xe,xe,ne,Ce,Ee,Se)),Ue=be}else{const Xe=Q;De=normalizeVNode(Xe.length>1?Xe(ne,{attrs:be,slots:j,emit:ce}):Xe(ne,null)),Ue=Q.props?be:getFunctionalFallthrough(be)}}catch(Xe){blockStack.length=0,handleError(Xe,q,1),De=createVNode(Comment$1)}let Fe=De;if(Ue&&Oe!==!1){const Xe=Object.keys(Ue),{shapeFlag:Ye}=Fe;Xe.length&&Ye&7&&(Te&&Xe.some(isModelListener)&&(Ue=filterModelListeners(Ue,Te)),Fe=cloneVNode(Fe,Ue))}return V.dirs&&(Fe.dirs=Fe.dirs?Fe.dirs.concat(V.dirs):V.dirs),V.transition&&(Fe.transition=V.transition),De=Fe,setCurrentRenderingInstance($e),De}function filterSingleRoot(q){let Q;for(let V=0;V<q.length;V++){const de=q[V];if(isVNode(de)){if(de.type!==Comment$1||de.children==="v-if"){if(Q)return;Q=de}}else return}return Q}const getFunctionalFallthrough=q=>{let Q;for(const V in q)(V==="class"||V==="style"||isOn(V))&&((Q||(Q={}))[V]=q[V]);return Q},filterModelListeners=(q,Q)=>{const V={};for(const de in q)(!isModelListener(de)||!(de.slice(9)in Q))&&(V[de]=q[de]);return V};function shouldUpdateComponent(q,Q,V){const{props:de,children:he,component:ne}=q,{props:Te,children:j,patchFlag:be}=Q,ce=ne.emitsOptions;if(Q.dirs||Q.transition)return!0;if(V&&be>=0){if(be&1024)return!0;if(be&16)return de?hasPropsChanged(de,Te,ce):!!Te;if(be&8){const ye=Q.dynamicProps;for(let xe=0;xe<ye.length;xe++){const Ee=ye[xe];if(Te[Ee]!==de[Ee]&&!isEmitListener(ce,Ee))return!0}}}else return(he||j)&&(!j||!j.$stable)?!0:de===Te?!1:de?Te?hasPropsChanged(de,Te,ce):!0:!!Te;return!1}function hasPropsChanged(q,Q,V){const de=Object.keys(Q);if(de.length!==Object.keys(q).length)return!0;for(let he=0;he<de.length;he++){const ne=de[he];if(Q[ne]!==q[ne]&&!isEmitListener(V,ne))return!0}return!1}function updateHOCHostEl({vnode:q,parent:Q},V){for(;Q&&Q.subTree===q;)(q=Q.vnode).el=V,Q=Q.parent}const isSuspense=q=>q.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(q,Q,V,de,he,ne,Te,j,be,ce){q==null?mountSuspense(Q,V,de,he,ne,Te,j,be,ce):patchSuspense(q,Q,V,de,he,Te,j,be,ce)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(q,Q){const V=q.props&&q.props[Q];isFunction$2(V)&&V()}function mountSuspense(q,Q,V,de,he,ne,Te,j,be){const{p:ce,o:{createElement:ye}}=be,xe=ye("div"),Ee=q.suspense=createSuspenseBoundary(q,he,de,Q,xe,V,ne,Te,j,be);ce(null,Ee.pendingBranch=q.ssContent,xe,null,de,Ee,ne,Te),Ee.deps>0?(triggerEvent(q,"onPending"),triggerEvent(q,"onFallback"),ce(null,q.ssFallback,Q,V,de,null,ne,Te),setActiveBranch(Ee,q.ssFallback)):Ee.resolve()}function patchSuspense(q,Q,V,de,he,ne,Te,j,{p:be,um:ce,o:{createElement:ye}}){const xe=Q.suspense=q.suspense;xe.vnode=Q,Q.el=q.el;const Ee=Q.ssContent,Ce=Q.ssFallback,{activeBranch:Se,pendingBranch:Oe,isInFallback:De,isHydrating:Ue}=xe;if(Oe)xe.pendingBranch=Ee,isSameVNodeType(Ee,Oe)?(be(Oe,Ee,xe.hiddenContainer,null,he,xe,ne,Te,j),xe.deps<=0?xe.resolve():De&&(be(Se,Ce,V,de,he,null,ne,Te,j),setActiveBranch(xe,Ce))):(xe.pendingId++,Ue?(xe.isHydrating=!1,xe.activeBranch=Oe):ce(Oe,he,xe),xe.deps=0,xe.effects.length=0,xe.hiddenContainer=ye("div"),De?(be(null,Ee,xe.hiddenContainer,null,he,xe,ne,Te,j),xe.deps<=0?xe.resolve():(be(Se,Ce,V,de,he,null,ne,Te,j),setActiveBranch(xe,Ce))):Se&&isSameVNodeType(Ee,Se)?(be(Se,Ee,V,de,he,xe,ne,Te,j),xe.resolve(!0)):(be(null,Ee,xe.hiddenContainer,null,he,xe,ne,Te,j),xe.deps<=0&&xe.resolve()));else if(Se&&isSameVNodeType(Ee,Se))be(Se,Ee,V,de,he,xe,ne,Te,j),setActiveBranch(xe,Ee);else if(triggerEvent(Q,"onPending"),xe.pendingBranch=Ee,xe.pendingId++,be(null,Ee,xe.hiddenContainer,null,he,xe,ne,Te,j),xe.deps<=0)xe.resolve();else{const{timeout:$e,pendingId:Fe}=xe;$e>0?setTimeout(()=>{xe.pendingId===Fe&&xe.fallback(Ce)},$e):$e===0&&xe.fallback(Ce)}}function createSuspenseBoundary(q,Q,V,de,he,ne,Te,j,be,ce,ye=!1){const{p:xe,m:Ee,um:Ce,n:Se,o:{parentNode:Oe,remove:De}}=ce,Ue=toNumber(q.props&&q.props.timeout),$e={vnode:q,parent:Q,parentComponent:V,isSVG:Te,container:de,hiddenContainer:he,anchor:ne,deps:0,pendingId:0,timeout:typeof Ue=="number"?Ue:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:ye,isUnmounted:!1,effects:[],resolve(Fe=!1){const{vnode:Xe,activeBranch:Ye,pendingBranch:He,pendingId:Je,effects:pt,parentComponent:It,container:At}=$e;if($e.isHydrating)$e.isHydrating=!1;else if(!Fe){const nt=Ye&&He.transition&&He.transition.mode==="out-in";nt&&(Ye.transition.afterLeave=()=>{Je===$e.pendingId&&Ee(He,At,it,0)});let{anchor:it}=$e;Ye&&(it=Se(Ye),Ce(Ye,It,$e,!0)),nt||Ee(He,At,it,0)}setActiveBranch($e,He),$e.pendingBranch=null,$e.isInFallback=!1;let bt=$e.parent,rt=!1;for(;bt;){if(bt.pendingBranch){bt.effects.push(...pt),rt=!0;break}bt=bt.parent}rt||queuePostFlushCb(pt),$e.effects=[],triggerEvent(Xe,"onResolve")},fallback(Fe){if(!$e.pendingBranch)return;const{vnode:Xe,activeBranch:Ye,parentComponent:He,container:Je,isSVG:pt}=$e;triggerEvent(Xe,"onFallback");const It=Se(Ye),At=()=>{!$e.isInFallback||(xe(null,Fe,Je,It,He,null,pt,j,be),setActiveBranch($e,Fe))},bt=Fe.transition&&Fe.transition.mode==="out-in";bt&&(Ye.transition.afterLeave=At),$e.isInFallback=!0,Ce(Ye,He,null,!0),bt||At()},move(Fe,Xe,Ye){$e.activeBranch&&Ee($e.activeBranch,Fe,Xe,Ye),$e.container=Fe},next(){return $e.activeBranch&&Se($e.activeBranch)},registerDep(Fe,Xe){const Ye=!!$e.pendingBranch;Ye&&$e.deps++;const He=Fe.vnode.el;Fe.asyncDep.catch(Je=>{handleError(Je,Fe,0)}).then(Je=>{if(Fe.isUnmounted||$e.isUnmounted||$e.pendingId!==Fe.suspenseId)return;Fe.asyncResolved=!0;const{vnode:pt}=Fe;handleSetupResult(Fe,Je,!1),He&&(pt.el=He);const It=!He&&Fe.subTree.el;Xe(Fe,pt,Oe(He||Fe.subTree.el),He?null:Se(Fe.subTree),$e,Te,be),It&&De(It),updateHOCHostEl(Fe,pt.el),Ye&&--$e.deps===0&&$e.resolve()})},unmount(Fe,Xe){$e.isUnmounted=!0,$e.activeBranch&&Ce($e.activeBranch,V,Fe,Xe),$e.pendingBranch&&Ce($e.pendingBranch,V,Fe,Xe)}};return $e}function hydrateSuspense(q,Q,V,de,he,ne,Te,j,be){const ce=Q.suspense=createSuspenseBoundary(Q,de,V,q.parentNode,document.createElement("div"),null,he,ne,Te,j,!0),ye=be(q,ce.pendingBranch=Q.ssContent,V,ce,ne,Te);return ce.deps===0&&ce.resolve(),ye}function normalizeSuspenseChildren(q){const{shapeFlag:Q,children:V}=q,de=Q&32;q.ssContent=normalizeSuspenseSlot(de?V.default:V),q.ssFallback=de?normalizeSuspenseSlot(V.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(q){let Q;if(isFunction$2(q)){const V=isBlockTreeEnabled&&q._c;V&&(q._d=!1,openBlock()),q=q(),V&&(q._d=!0,Q=currentBlock,closeBlock())}return isArray$1(q)&&(q=filterSingleRoot(q)),q=normalizeVNode(q),Q&&!q.dynamicChildren&&(q.dynamicChildren=Q.filter(V=>V!==q)),q}function queueEffectWithSuspense(q,Q){Q&&Q.pendingBranch?isArray$1(q)?Q.effects.push(...q):Q.effects.push(q):queuePostFlushCb(q)}function setActiveBranch(q,Q){q.activeBranch=Q;const{vnode:V,parentComponent:de}=q,he=V.el=Q.el;de&&de.subTree===V&&(de.vnode.el=he,updateHOCHostEl(de,he))}function provide(q,Q){if(currentInstance){let V=currentInstance.provides;const de=currentInstance.parent&&currentInstance.parent.provides;de===V&&(V=currentInstance.provides=Object.create(de)),V[q]=Q}}function inject(q,Q,V=!1){const de=currentInstance||currentRenderingInstance;if(de){const he=de.parent==null?de.vnode.appContext&&de.vnode.appContext.provides:de.parent.provides;if(he&&q in he)return he[q];if(arguments.length>1)return V&&isFunction$2(Q)?Q.call(de.proxy):Q}}function watchEffect(q,Q){return doWatch(q,null,Q)}const INITIAL_WATCHER_VALUE={};function watch(q,Q,V){return doWatch(q,Q,V)}function doWatch(q,Q,{immediate:V,deep:de,flush:he,onTrack:ne,onTrigger:Te}=EMPTY_OBJ){const j=currentInstance;let be,ce=!1,ye=!1;if(isRef(q)?(be=()=>q.value,ce=isShallow(q)):isReactive(q)?(be=()=>q,de=!0):isArray$1(q)?(ye=!0,ce=q.some(isReactive),be=()=>q.map(Ue=>{if(isRef(Ue))return Ue.value;if(isReactive(Ue))return traverse(Ue);if(isFunction$2(Ue))return callWithErrorHandling(Ue,j,2)})):isFunction$2(q)?Q?be=()=>callWithErrorHandling(q,j,2):be=()=>{if(!(j&&j.isUnmounted))return xe&&xe(),callWithAsyncErrorHandling(q,j,3,[Ee])}:be=NOOP,Q&&de){const Ue=be;be=()=>traverse(Ue())}let xe,Ee=Ue=>{xe=De.onStop=()=>{callWithErrorHandling(Ue,j,4)}};if(isInSSRComponentSetup)return Ee=NOOP,Q?V&&callWithAsyncErrorHandling(Q,j,3,[be(),ye?[]:void 0,Ee]):be(),NOOP;let Ce=ye?[]:INITIAL_WATCHER_VALUE;const Se=()=>{if(!!De.active)if(Q){const Ue=De.run();(de||ce||(ye?Ue.some(($e,Fe)=>hasChanged($e,Ce[Fe])):hasChanged(Ue,Ce)))&&(xe&&xe(),callWithAsyncErrorHandling(Q,j,3,[Ue,Ce===INITIAL_WATCHER_VALUE?void 0:Ce,Ee]),Ce=Ue)}else De.run()};Se.allowRecurse=!!Q;let Oe;he==="sync"?Oe=Se:he==="post"?Oe=()=>queuePostRenderEffect(Se,j&&j.suspense):Oe=()=>{!j||j.isMounted?queuePreFlushCb(Se):Se()};const De=new ReactiveEffect(be,Oe);return Q?V?Se():Ce=De.run():he==="post"?queuePostRenderEffect(De.run.bind(De),j&&j.suspense):De.run(),()=>{De.stop(),j&&j.scope&&remove(j.scope.effects,De)}}function instanceWatch(q,Q,V){const de=this.proxy,he=isString$1(q)?q.includes(".")?createPathGetter(de,q):()=>de[q]:q.bind(de,de);let ne;isFunction$2(Q)?ne=Q:(ne=Q.handler,V=Q);const Te=currentInstance;setCurrentInstance(this);const j=doWatch(he,ne.bind(de),V);return Te?setCurrentInstance(Te):unsetCurrentInstance(),j}function createPathGetter(q,Q){const V=Q.split(".");return()=>{let de=q;for(let he=0;he<V.length&&de;he++)de=de[V[he]];return de}}function traverse(q,Q){if(!isObject$1(q)||q.__v_skip||(Q=Q||new Set,Q.has(q)))return q;if(Q.add(q),isRef(q))traverse(q.value,Q);else if(isArray$1(q))for(let V=0;V<q.length;V++)traverse(q[V],Q);else if(isSet(q)||isMap(q))q.forEach(V=>{traverse(V,Q)});else if(isPlainObject$2(q))for(const V in q)traverse(q[V],Q);return q}function useTransitionState(){const q={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{q.isMounted=!0}),onBeforeUnmount(()=>{q.isUnmounting=!0}),q}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(q,{slots:Q}){const V=getCurrentInstance(),de=useTransitionState();let he;return()=>{const ne=Q.default&&getTransitionRawChildren(Q.default(),!0);if(!ne||!ne.length)return;const Te=toRaw(q),{mode:j}=Te,be=ne[0];if(de.isLeaving)return emptyPlaceholder(be);const ce=getKeepAliveChild(be);if(!ce)return emptyPlaceholder(be);const ye=resolveTransitionHooks(ce,Te,de,V);setTransitionHooks(ce,ye);const xe=V.subTree,Ee=xe&&getKeepAliveChild(xe);let Ce=!1;const{getTransitionKey:Se}=ce.type;if(Se){const Oe=Se();he===void 0?he=Oe:Oe!==he&&(he=Oe,Ce=!0)}if(Ee&&Ee.type!==Comment$1&&(!isSameVNodeType(ce,Ee)||Ce)){const Oe=resolveTransitionHooks(Ee,Te,de,V);if(setTransitionHooks(Ee,Oe),j==="out-in")return de.isLeaving=!0,Oe.afterLeave=()=>{de.isLeaving=!1,V.update()},emptyPlaceholder(be);j==="in-out"&&ce.type!==Comment$1&&(Oe.delayLeave=(De,Ue,$e)=>{const Fe=getLeavingNodesForType(de,Ee);Fe[String(Ee.key)]=Ee,De._leaveCb=()=>{Ue(),De._leaveCb=void 0,delete ye.delayedLeave},ye.delayedLeave=$e})}return be}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(q,Q){const{leavingVNodes:V}=q;let de=V.get(Q.type);return de||(de=Object.create(null),V.set(Q.type,de)),de}function resolveTransitionHooks(q,Q,V,de){const{appear:he,mode:ne,persisted:Te=!1,onBeforeEnter:j,onEnter:be,onAfterEnter:ce,onEnterCancelled:ye,onBeforeLeave:xe,onLeave:Ee,onAfterLeave:Ce,onLeaveCancelled:Se,onBeforeAppear:Oe,onAppear:De,onAfterAppear:Ue,onAppearCancelled:$e}=Q,Fe=String(q.key),Xe=getLeavingNodesForType(V,q),Ye=(Je,pt)=>{Je&&callWithAsyncErrorHandling(Je,de,9,pt)},He={mode:ne,persisted:Te,beforeEnter(Je){let pt=j;if(!V.isMounted)if(he)pt=Oe||j;else return;Je._leaveCb&&Je._leaveCb(!0);const It=Xe[Fe];It&&isSameVNodeType(q,It)&&It.el._leaveCb&&It.el._leaveCb(),Ye(pt,[Je])},enter(Je){let pt=be,It=ce,At=ye;if(!V.isMounted)if(he)pt=De||be,It=Ue||ce,At=$e||ye;else return;let bt=!1;const rt=Je._enterCb=nt=>{bt||(bt=!0,nt?Ye(At,[Je]):Ye(It,[Je]),He.delayedLeave&&He.delayedLeave(),Je._enterCb=void 0)};pt?(pt(Je,rt),pt.length<=1&&rt()):rt()},leave(Je,pt){const It=String(q.key);if(Je._enterCb&&Je._enterCb(!0),V.isUnmounting)return pt();Ye(xe,[Je]);let At=!1;const bt=Je._leaveCb=rt=>{At||(At=!0,pt(),rt?Ye(Se,[Je]):Ye(Ce,[Je]),Je._leaveCb=void 0,Xe[It]===q&&delete Xe[It])};Xe[It]=q,Ee?(Ee(Je,bt),Ee.length<=1&&bt()):bt()},clone(Je){return resolveTransitionHooks(Je,Q,V,de)}};return He}function emptyPlaceholder(q){if(isKeepAlive(q))return q=cloneVNode(q),q.children=null,q}function getKeepAliveChild(q){return isKeepAlive(q)?q.children?q.children[0]:void 0:q}function setTransitionHooks(q,Q){q.shapeFlag&6&&q.component?setTransitionHooks(q.component.subTree,Q):q.shapeFlag&128?(q.ssContent.transition=Q.clone(q.ssContent),q.ssFallback.transition=Q.clone(q.ssFallback)):q.transition=Q}function getTransitionRawChildren(q,Q=!1){let V=[],de=0;for(let he=0;he<q.length;he++){const ne=q[he];ne.type===Fragment?(ne.patchFlag&128&&de++,V=V.concat(getTransitionRawChildren(ne.children,Q))):(Q||ne.type!==Comment$1)&&V.push(ne)}if(de>1)for(let he=0;he<V.length;he++)V[he].patchFlag=-2;return V}function defineComponent(q){return isFunction$2(q)?{setup:q,name:q.name}:q}const isAsyncWrapper=q=>!!q.type.__asyncLoader,isKeepAlive=q=>q.type.__isKeepAlive;function onActivated(q,Q){registerKeepAliveHook(q,"a",Q)}function onDeactivated(q,Q){registerKeepAliveHook(q,"da",Q)}function registerKeepAliveHook(q,Q,V=currentInstance){const de=q.__wdc||(q.__wdc=()=>{let he=V;for(;he;){if(he.isDeactivated)return;he=he.parent}return q()});if(injectHook(Q,de,V),V){let he=V.parent;for(;he&&he.parent;)isKeepAlive(he.parent.vnode)&&injectToKeepAliveRoot(de,Q,V,he),he=he.parent}}function injectToKeepAliveRoot(q,Q,V,de){const he=injectHook(Q,q,de,!0);onUnmounted(()=>{remove(de[Q],he)},V)}function injectHook(q,Q,V=currentInstance,de=!1){if(V){const he=V[q]||(V[q]=[]),ne=Q.__weh||(Q.__weh=(...Te)=>{if(V.isUnmounted)return;pauseTracking(),setCurrentInstance(V);const j=callWithAsyncErrorHandling(Q,V,q,Te);return unsetCurrentInstance(),resetTracking(),j});return de?he.unshift(ne):he.push(ne),ne}}const createHook=q=>(Q,V=currentInstance)=>(!isInSSRComponentSetup||q==="sp")&&injectHook(q,Q,V),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(q,Q=currentInstance){injectHook("ec",q,Q)}let shouldCacheAccess=!0;function applyOptions(q){const Q=resolveMergedOptions(q),V=q.proxy,de=q.ctx;shouldCacheAccess=!1,Q.beforeCreate&&callHook$1(Q.beforeCreate,q,"bc");const{data:he,computed:ne,methods:Te,watch:j,provide:be,inject:ce,created:ye,beforeMount:xe,mounted:Ee,beforeUpdate:Ce,updated:Se,activated:Oe,deactivated:De,beforeDestroy:Ue,beforeUnmount:$e,destroyed:Fe,unmounted:Xe,render:Ye,renderTracked:He,renderTriggered:Je,errorCaptured:pt,serverPrefetch:It,expose:At,inheritAttrs:bt,components:rt,directives:nt,filters:it}=Q;if(ce&&resolveInjections(ce,de,null,q.appContext.config.unwrapInjectedRef),Te)for(const ft in Te){const xt=Te[ft];isFunction$2(xt)&&(de[ft]=xt.bind(V))}if(he){const ft=he.call(V,V);isObject$1(ft)&&(q.data=reactive(ft))}if(shouldCacheAccess=!0,ne)for(const ft in ne){const xt=ne[ft],ht=isFunction$2(xt)?xt.bind(V,V):isFunction$2(xt.get)?xt.get.bind(V,V):NOOP,Vt=!isFunction$2(xt)&&isFunction$2(xt.set)?xt.set.bind(V):NOOP,st=computed({get:ht,set:Vt});Object.defineProperty(de,ft,{enumerable:!0,configurable:!0,get:()=>st.value,set:$t=>st.value=$t})}if(j)for(const ft in j)createWatcher(j[ft],de,V,ft);if(be){const ft=isFunction$2(be)?be.call(V):be;Reflect.ownKeys(ft).forEach(xt=>{provide(xt,ft[xt])})}ye&&callHook$1(ye,q,"c");function lt(ft,xt){isArray$1(xt)?xt.forEach(ht=>ft(ht.bind(V))):xt&&ft(xt.bind(V))}if(lt(onBeforeMount,xe),lt(onMounted,Ee),lt(onBeforeUpdate,Ce),lt(onUpdated,Se),lt(onActivated,Oe),lt(onDeactivated,De),lt(onErrorCaptured,pt),lt(onRenderTracked,He),lt(onRenderTriggered,Je),lt(onBeforeUnmount,$e),lt(onUnmounted,Xe),lt(onServerPrefetch,It),isArray$1(At))if(At.length){const ft=q.exposed||(q.exposed={});At.forEach(xt=>{Object.defineProperty(ft,xt,{get:()=>V[xt],set:ht=>V[xt]=ht})})}else q.exposed||(q.exposed={});Ye&&q.render===NOOP&&(q.render=Ye),bt!=null&&(q.inheritAttrs=bt),rt&&(q.components=rt),nt&&(q.directives=nt)}function resolveInjections(q,Q,V=NOOP,de=!1){isArray$1(q)&&(q=normalizeInject(q));for(const he in q){const ne=q[he];let Te;isObject$1(ne)?"default"in ne?Te=inject(ne.from||he,ne.default,!0):Te=inject(ne.from||he):Te=inject(ne),isRef(Te)&&de?Object.defineProperty(Q,he,{enumerable:!0,configurable:!0,get:()=>Te.value,set:j=>Te.value=j}):Q[he]=Te}}function callHook$1(q,Q,V){callWithAsyncErrorHandling(isArray$1(q)?q.map(de=>de.bind(Q.proxy)):q.bind(Q.proxy),Q,V)}function createWatcher(q,Q,V,de){const he=de.includes(".")?createPathGetter(V,de):()=>V[de];if(isString$1(q)){const ne=Q[q];isFunction$2(ne)&&watch(he,ne)}else if(isFunction$2(q))watch(he,q.bind(V));else if(isObject$1(q))if(isArray$1(q))q.forEach(ne=>createWatcher(ne,Q,V,de));else{const ne=isFunction$2(q.handler)?q.handler.bind(V):Q[q.handler];isFunction$2(ne)&&watch(he,ne,q)}}function resolveMergedOptions(q){const Q=q.type,{mixins:V,extends:de}=Q,{mixins:he,optionsCache:ne,config:{optionMergeStrategies:Te}}=q.appContext,j=ne.get(Q);let be;return j?be=j:!he.length&&!V&&!de?be=Q:(be={},he.length&&he.forEach(ce=>mergeOptions$1(be,ce,Te,!0)),mergeOptions$1(be,Q,Te)),ne.set(Q,be),be}function mergeOptions$1(q,Q,V,de=!1){const{mixins:he,extends:ne}=Q;ne&&mergeOptions$1(q,ne,V,!0),he&&he.forEach(Te=>mergeOptions$1(q,Te,V,!0));for(const Te in Q)if(!(de&&Te==="expose")){const j=internalOptionMergeStrats[Te]||V&&V[Te];q[Te]=j?j(q[Te],Q[Te]):Q[Te]}return q}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(q,Q){return Q?q?function(){return extend$1(isFunction$2(q)?q.call(this,this):q,isFunction$2(Q)?Q.call(this,this):Q)}:Q:q}function mergeInject(q,Q){return mergeObjectOptions(normalizeInject(q),normalizeInject(Q))}function normalizeInject(q){if(isArray$1(q)){const Q={};for(let V=0;V<q.length;V++)Q[q[V]]=q[V];return Q}return q}function mergeAsArray(q,Q){return q?[...new Set([].concat(q,Q))]:Q}function mergeObjectOptions(q,Q){return q?extend$1(extend$1(Object.create(null),q),Q):Q}function mergeWatchOptions(q,Q){if(!q)return Q;if(!Q)return q;const V=extend$1(Object.create(null),q);for(const de in Q)V[de]=mergeAsArray(q[de],Q[de]);return V}function initProps(q,Q,V,de=!1){const he={},ne={};def(ne,InternalObjectKey,1),q.propsDefaults=Object.create(null),setFullProps(q,Q,he,ne);for(const Te in q.propsOptions[0])Te in he||(he[Te]=void 0);V?q.props=de?he:shallowReactive(he):q.type.props?q.props=he:q.props=ne,q.attrs=ne}function updateProps(q,Q,V,de){const{props:he,attrs:ne,vnode:{patchFlag:Te}}=q,j=toRaw(he),[be]=q.propsOptions;let ce=!1;if((de||Te>0)&&!(Te&16)){if(Te&8){const ye=q.vnode.dynamicProps;for(let xe=0;xe<ye.length;xe++){let Ee=ye[xe];const Ce=Q[Ee];if(be)if(hasOwn(ne,Ee))Ce!==ne[Ee]&&(ne[Ee]=Ce,ce=!0);else{const Se=camelize(Ee);he[Se]=resolvePropValue(be,j,Se,Ce,q,!1)}else Ce!==ne[Ee]&&(ne[Ee]=Ce,ce=!0)}}}else{setFullProps(q,Q,he,ne)&&(ce=!0);let ye;for(const xe in j)(!Q||!hasOwn(Q,xe)&&((ye=hyphenate(xe))===xe||!hasOwn(Q,ye)))&&(be?V&&(V[xe]!==void 0||V[ye]!==void 0)&&(he[xe]=resolvePropValue(be,j,xe,void 0,q,!0)):delete he[xe]);if(ne!==j)for(const xe in ne)(!Q||!hasOwn(Q,xe)&&!0)&&(delete ne[xe],ce=!0)}ce&&trigger$1(q,"set","$attrs")}function setFullProps(q,Q,V,de){const[he,ne]=q.propsOptions;let Te=!1,j;if(Q)for(let be in Q){if(isReservedProp(be))continue;const ce=Q[be];let ye;he&&hasOwn(he,ye=camelize(be))?!ne||!ne.includes(ye)?V[ye]=ce:(j||(j={}))[ye]=ce:isEmitListener(q.emitsOptions,be)||(!(be in de)||ce!==de[be])&&(de[be]=ce,Te=!0)}if(ne){const be=toRaw(V),ce=j||EMPTY_OBJ;for(let ye=0;ye<ne.length;ye++){const xe=ne[ye];V[xe]=resolvePropValue(he,be,xe,ce[xe],q,!hasOwn(ce,xe))}}return Te}function resolvePropValue(q,Q,V,de,he,ne){const Te=q[V];if(Te!=null){const j=hasOwn(Te,"default");if(j&&de===void 0){const be=Te.default;if(Te.type!==Function&&isFunction$2(be)){const{propsDefaults:ce}=he;V in ce?de=ce[V]:(setCurrentInstance(he),de=ce[V]=be.call(null,Q),unsetCurrentInstance())}else de=be}Te[0]&&(ne&&!j?de=!1:Te[1]&&(de===""||de===hyphenate(V))&&(de=!0))}return de}function normalizePropsOptions(q,Q,V=!1){const de=Q.propsCache,he=de.get(q);if(he)return he;const ne=q.props,Te={},j=[];let be=!1;if(!isFunction$2(q)){const ye=xe=>{be=!0;const[Ee,Ce]=normalizePropsOptions(xe,Q,!0);extend$1(Te,Ee),Ce&&j.push(...Ce)};!V&&Q.mixins.length&&Q.mixins.forEach(ye),q.extends&&ye(q.extends),q.mixins&&q.mixins.forEach(ye)}if(!ne&&!be)return de.set(q,EMPTY_ARR),EMPTY_ARR;if(isArray$1(ne))for(let ye=0;ye<ne.length;ye++){const xe=camelize(ne[ye]);validatePropName(xe)&&(Te[xe]=EMPTY_OBJ)}else if(ne)for(const ye in ne){const xe=camelize(ye);if(validatePropName(xe)){const Ee=ne[ye],Ce=Te[xe]=isArray$1(Ee)||isFunction$2(Ee)?{type:Ee}:Ee;if(Ce){const Se=getTypeIndex(Boolean,Ce.type),Oe=getTypeIndex(String,Ce.type);Ce[0]=Se>-1,Ce[1]=Oe<0||Se<Oe,(Se>-1||hasOwn(Ce,"default"))&&j.push(xe)}}}const ce=[Te,j];return de.set(q,ce),ce}function validatePropName(q){return q[0]!=="$"}function getType(q){const Q=q&&q.toString().match(/^\s*function (\w+)/);return Q?Q[1]:q===null?"null":""}function isSameType(q,Q){return getType(q)===getType(Q)}function getTypeIndex(q,Q){return isArray$1(Q)?Q.findIndex(V=>isSameType(V,q)):isFunction$2(Q)&&isSameType(Q,q)?0:-1}const isInternalKey=q=>q[0]==="_"||q==="$stable",normalizeSlotValue=q=>isArray$1(q)?q.map(normalizeVNode):[normalizeVNode(q)],normalizeSlot$1=(q,Q,V)=>{const de=withCtx((...he)=>normalizeSlotValue(Q(...he)),V);return de._c=!1,de},normalizeObjectSlots=(q,Q,V)=>{const de=q._ctx;for(const he in q){if(isInternalKey(he))continue;const ne=q[he];if(isFunction$2(ne))Q[he]=normalizeSlot$1(he,ne,de);else if(ne!=null){const Te=normalizeSlotValue(ne);Q[he]=()=>Te}}},normalizeVNodeSlots=(q,Q)=>{const V=normalizeSlotValue(Q);q.slots.default=()=>V},initSlots=(q,Q)=>{if(q.vnode.shapeFlag&32){const V=Q._;V?(q.slots=toRaw(Q),def(Q,"_",V)):normalizeObjectSlots(Q,q.slots={})}else q.slots={},Q&&normalizeVNodeSlots(q,Q);def(q.slots,InternalObjectKey,1)},updateSlots=(q,Q,V)=>{const{vnode:de,slots:he}=q;let ne=!0,Te=EMPTY_OBJ;if(de.shapeFlag&32){const j=Q._;j?V&&j===1?ne=!1:(extend$1(he,Q),!V&&j===1&&delete he._):(ne=!Q.$stable,normalizeObjectSlots(Q,he)),Te=Q}else Q&&(normalizeVNodeSlots(q,Q),Te={default:1});if(ne)for(const j in he)!isInternalKey(j)&&!(j in Te)&&delete he[j]};function withDirectives(q,Q){const V=currentRenderingInstance;if(V===null)return q;const de=V.proxy,he=q.dirs||(q.dirs=[]);for(let ne=0;ne<Q.length;ne++){let[Te,j,be,ce=EMPTY_OBJ]=Q[ne];isFunction$2(Te)&&(Te={mounted:Te,updated:Te}),Te.deep&&traverse(j),he.push({dir:Te,instance:de,value:j,oldValue:void 0,arg:be,modifiers:ce})}return q}function invokeDirectiveHook(q,Q,V,de){const he=q.dirs,ne=Q&&Q.dirs;for(let Te=0;Te<he.length;Te++){const j=he[Te];ne&&(j.oldValue=ne[Te].value);let be=j.dir[de];be&&(pauseTracking(),callWithAsyncErrorHandling(be,V,8,[q.el,j,q,Q]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(q,Q){return function(de,he=null){he!=null&&!isObject$1(he)&&(he=null);const ne=createAppContext(),Te=new Set;let j=!1;const be=ne.app={_uid:uid++,_component:de,_props:he,_container:null,_context:ne,_instance:null,version,get config(){return ne.config},set config(ce){},use(ce,...ye){return Te.has(ce)||(ce&&isFunction$2(ce.install)?(Te.add(ce),ce.install(be,...ye)):isFunction$2(ce)&&(Te.add(ce),ce(be,...ye))),be},mixin(ce){return ne.mixins.includes(ce)||ne.mixins.push(ce),be},component(ce,ye){return ye?(ne.components[ce]=ye,be):ne.components[ce]},directive(ce,ye){return ye?(ne.directives[ce]=ye,be):ne.directives[ce]},mount(ce,ye,xe){if(!j){const Ee=createVNode(de,he);return Ee.appContext=ne,ye&&Q?Q(Ee,ce):q(Ee,ce,xe),j=!0,be._container=ce,ce.__vue_app__=be,getExposeProxy(Ee.component)||Ee.component.proxy}},unmount(){j&&(q(null,be._container),delete be._container.__vue_app__)},provide(ce,ye){return ne.provides[ce]=ye,be}};return be}}function setRef(q,Q,V,de,he=!1){if(isArray$1(q)){q.forEach((Ee,Ce)=>setRef(Ee,Q&&(isArray$1(Q)?Q[Ce]:Q),V,de,he));return}if(isAsyncWrapper(de)&&!he)return;const ne=de.shapeFlag&4?getExposeProxy(de.component)||de.component.proxy:de.el,Te=he?null:ne,{i:j,r:be}=q,ce=Q&&Q.r,ye=j.refs===EMPTY_OBJ?j.refs={}:j.refs,xe=j.setupState;if(ce!=null&&ce!==be&&(isString$1(ce)?(ye[ce]=null,hasOwn(xe,ce)&&(xe[ce]=null)):isRef(ce)&&(ce.value=null)),isFunction$2(be))callWithErrorHandling(be,j,12,[Te,ye]);else{const Ee=isString$1(be),Ce=isRef(be);if(Ee||Ce){const Se=()=>{if(q.f){const Oe=Ee?ye[be]:be.value;he?isArray$1(Oe)&&remove(Oe,ne):isArray$1(Oe)?Oe.includes(ne)||Oe.push(ne):Ee?ye[be]=[ne]:(be.value=[ne],q.k&&(ye[q.k]=be.value))}else Ee?(ye[be]=Te,hasOwn(xe,be)&&(xe[be]=Te)):isRef(be)&&(be.value=Te,q.k&&(ye[q.k]=Te))};Te?(Se.id=-1,queuePostRenderEffect(Se,V)):Se()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(q){return baseCreateRenderer(q)}function baseCreateRenderer(q,Q){const V=getGlobalThis();V.__VUE__=!0;const{insert:de,remove:he,patchProp:ne,createElement:Te,createText:j,createComment:be,setText:ce,setElementText:ye,parentNode:xe,nextSibling:Ee,setScopeId:Ce=NOOP,cloneNode:Se,insertStaticContent:Oe}=q,De=(Pt,Dt,rn,bn=null,En=null,zn=null,$n=!1,xn=null,wn=!!Dt.dynamicChildren)=>{if(Pt===Dt)return;Pt&&!isSameVNodeType(Pt,Dt)&&(bn=Rt(Pt),ln(Pt,En,zn,!0),Pt=null),Dt.patchFlag===-2&&(wn=!1,Dt.dynamicChildren=null);const{type:Sn,ref:Jn,shapeFlag:nr}=Dt;switch(Sn){case Text$1:Ue(Pt,Dt,rn,bn);break;case Comment$1:$e(Pt,Dt,rn,bn);break;case Static:Pt==null&&Fe(Dt,rn,bn,$n);break;case Fragment:nt(Pt,Dt,rn,bn,En,zn,$n,xn,wn);break;default:nr&1?He(Pt,Dt,rn,bn,En,zn,$n,xn,wn):nr&6?it(Pt,Dt,rn,bn,En,zn,$n,xn,wn):(nr&64||nr&128)&&Sn.process(Pt,Dt,rn,bn,En,zn,$n,xn,wn,hn)}Jn!=null&&En&&setRef(Jn,Pt&&Pt.ref,zn,Dt||Pt,!Dt)},Ue=(Pt,Dt,rn,bn)=>{if(Pt==null)de(Dt.el=j(Dt.children),rn,bn);else{const En=Dt.el=Pt.el;Dt.children!==Pt.children&&ce(En,Dt.children)}},$e=(Pt,Dt,rn,bn)=>{Pt==null?de(Dt.el=be(Dt.children||""),rn,bn):Dt.el=Pt.el},Fe=(Pt,Dt,rn,bn)=>{[Pt.el,Pt.anchor]=Oe(Pt.children,Dt,rn,bn,Pt.el,Pt.anchor)},Xe=({el:Pt,anchor:Dt},rn,bn)=>{let En;for(;Pt&&Pt!==Dt;)En=Ee(Pt),de(Pt,rn,bn),Pt=En;de(Dt,rn,bn)},Ye=({el:Pt,anchor:Dt})=>{let rn;for(;Pt&&Pt!==Dt;)rn=Ee(Pt),he(Pt),Pt=rn;he(Dt)},He=(Pt,Dt,rn,bn,En,zn,$n,xn,wn)=>{$n=$n||Dt.type==="svg",Pt==null?Je(Dt,rn,bn,En,zn,$n,xn,wn):At(Pt,Dt,En,zn,$n,xn,wn)},Je=(Pt,Dt,rn,bn,En,zn,$n,xn)=>{let wn,Sn;const{type:Jn,props:nr,shapeFlag:fr,transition:Yn,patchFlag:qn,dirs:un}=Pt;if(Pt.el&&Se!==void 0&&qn===-1)wn=Pt.el=Se(Pt.el);else{if(wn=Pt.el=Te(Pt.type,zn,nr&&nr.is,nr),fr&8?ye(wn,Pt.children):fr&16&&It(Pt.children,wn,null,bn,En,zn&&Jn!=="foreignObject",$n,xn),un&&invokeDirectiveHook(Pt,null,bn,"created"),nr){for(const Rn in nr)Rn!=="value"&&!isReservedProp(Rn)&&ne(wn,Rn,null,nr[Rn],zn,Pt.children,bn,En,Xt);"value"in nr&&ne(wn,"value",null,nr.value),(Sn=nr.onVnodeBeforeMount)&&invokeVNodeHook(Sn,bn,Pt)}pt(wn,Pt,Pt.scopeId,$n,bn)}un&&invokeDirectiveHook(Pt,null,bn,"beforeMount");const yn=(!En||En&&!En.pendingBranch)&&Yn&&!Yn.persisted;yn&&Yn.beforeEnter(wn),de(wn,Dt,rn),((Sn=nr&&nr.onVnodeMounted)||yn||un)&&queuePostRenderEffect(()=>{Sn&&invokeVNodeHook(Sn,bn,Pt),yn&&Yn.enter(wn),un&&invokeDirectiveHook(Pt,null,bn,"mounted")},En)},pt=(Pt,Dt,rn,bn,En)=>{if(rn&&Ce(Pt,rn),bn)for(let zn=0;zn<bn.length;zn++)Ce(Pt,bn[zn]);if(En){let zn=En.subTree;if(Dt===zn){const $n=En.vnode;pt(Pt,$n,$n.scopeId,$n.slotScopeIds,En.parent)}}},It=(Pt,Dt,rn,bn,En,zn,$n,xn,wn=0)=>{for(let Sn=wn;Sn<Pt.length;Sn++){const Jn=Pt[Sn]=xn?cloneIfMounted(Pt[Sn]):normalizeVNode(Pt[Sn]);De(null,Jn,Dt,rn,bn,En,zn,$n,xn)}},At=(Pt,Dt,rn,bn,En,zn,$n)=>{const xn=Dt.el=Pt.el;let{patchFlag:wn,dynamicChildren:Sn,dirs:Jn}=Dt;wn|=Pt.patchFlag&16;const nr=Pt.props||EMPTY_OBJ,fr=Dt.props||EMPTY_OBJ;let Yn;rn&&toggleRecurse(rn,!1),(Yn=fr.onVnodeBeforeUpdate)&&invokeVNodeHook(Yn,rn,Dt,Pt),Jn&&invokeDirectiveHook(Dt,Pt,rn,"beforeUpdate"),rn&&toggleRecurse(rn,!0);const qn=En&&Dt.type!=="foreignObject";if(Sn?bt(Pt.dynamicChildren,Sn,xn,rn,bn,qn,zn):$n||ht(Pt,Dt,xn,null,rn,bn,qn,zn,!1),wn>0){if(wn&16)rt(xn,Dt,nr,fr,rn,bn,En);else if(wn&2&&nr.class!==fr.class&&ne(xn,"class",null,fr.class,En),wn&4&&ne(xn,"style",nr.style,fr.style,En),wn&8){const un=Dt.dynamicProps;for(let yn=0;yn<un.length;yn++){const Rn=un[yn],Kn=nr[Rn],mr=fr[Rn];(mr!==Kn||Rn==="value")&&ne(xn,Rn,Kn,mr,En,Pt.children,rn,bn,Xt)}}wn&1&&Pt.children!==Dt.children&&ye(xn,Dt.children)}else!$n&&Sn==null&&rt(xn,Dt,nr,fr,rn,bn,En);((Yn=fr.onVnodeUpdated)||Jn)&&queuePostRenderEffect(()=>{Yn&&invokeVNodeHook(Yn,rn,Dt,Pt),Jn&&invokeDirectiveHook(Dt,Pt,rn,"updated")},bn)},bt=(Pt,Dt,rn,bn,En,zn,$n)=>{for(let xn=0;xn<Dt.length;xn++){const wn=Pt[xn],Sn=Dt[xn],Jn=wn.el&&(wn.type===Fragment||!isSameVNodeType(wn,Sn)||wn.shapeFlag&70)?xe(wn.el):rn;De(wn,Sn,Jn,null,bn,En,zn,$n,!0)}},rt=(Pt,Dt,rn,bn,En,zn,$n)=>{if(rn!==bn){for(const xn in bn){if(isReservedProp(xn))continue;const wn=bn[xn],Sn=rn[xn];wn!==Sn&&xn!=="value"&&ne(Pt,xn,Sn,wn,$n,Dt.children,En,zn,Xt)}if(rn!==EMPTY_OBJ)for(const xn in rn)!isReservedProp(xn)&&!(xn in bn)&&ne(Pt,xn,rn[xn],null,$n,Dt.children,En,zn,Xt);"value"in bn&&ne(Pt,"value",rn.value,bn.value)}},nt=(Pt,Dt,rn,bn,En,zn,$n,xn,wn)=>{const Sn=Dt.el=Pt?Pt.el:j(""),Jn=Dt.anchor=Pt?Pt.anchor:j("");let{patchFlag:nr,dynamicChildren:fr,slotScopeIds:Yn}=Dt;Yn&&(xn=xn?xn.concat(Yn):Yn),Pt==null?(de(Sn,rn,bn),de(Jn,rn,bn),It(Dt.children,rn,Jn,En,zn,$n,xn,wn)):nr>0&&nr&64&&fr&&Pt.dynamicChildren?(bt(Pt.dynamicChildren,fr,rn,En,zn,$n,xn),(Dt.key!=null||En&&Dt===En.subTree)&&traverseStaticChildren(Pt,Dt,!0)):ht(Pt,Dt,rn,Jn,En,zn,$n,xn,wn)},it=(Pt,Dt,rn,bn,En,zn,$n,xn,wn)=>{Dt.slotScopeIds=xn,Pt==null?Dt.shapeFlag&512?En.ctx.activate(Dt,rn,bn,$n,wn):dt(Dt,rn,bn,En,zn,$n,wn):lt(Pt,Dt,wn)},dt=(Pt,Dt,rn,bn,En,zn,$n)=>{const xn=Pt.component=createComponentInstance(Pt,bn,En);if(isKeepAlive(Pt)&&(xn.ctx.renderer=hn),setupComponent(xn),xn.asyncDep){if(En&&En.registerDep(xn,ft),!Pt.el){const wn=xn.subTree=createVNode(Comment$1);$e(null,wn,Dt,rn)}return}ft(xn,Pt,Dt,rn,En,zn,$n)},lt=(Pt,Dt,rn)=>{const bn=Dt.component=Pt.component;if(shouldUpdateComponent(Pt,Dt,rn))if(bn.asyncDep&&!bn.asyncResolved){xt(bn,Dt,rn);return}else bn.next=Dt,invalidateJob(bn.update),bn.update();else Dt.component=Pt.component,Dt.el=Pt.el,bn.vnode=Dt},ft=(Pt,Dt,rn,bn,En,zn,$n)=>{const xn=()=>{if(Pt.isMounted){let{next:Jn,bu:nr,u:fr,parent:Yn,vnode:qn}=Pt,un=Jn,yn;toggleRecurse(Pt,!1),Jn?(Jn.el=qn.el,xt(Pt,Jn,$n)):Jn=qn,nr&&invokeArrayFns(nr),(yn=Jn.props&&Jn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(yn,Yn,Jn,qn),toggleRecurse(Pt,!0);const Rn=renderComponentRoot(Pt),Kn=Pt.subTree;Pt.subTree=Rn,De(Kn,Rn,xe(Kn.el),Rt(Kn),Pt,En,zn),Jn.el=Rn.el,un===null&&updateHOCHostEl(Pt,Rn.el),fr&&queuePostRenderEffect(fr,En),(yn=Jn.props&&Jn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(yn,Yn,Jn,qn),En)}else{let Jn;const{el:nr,props:fr}=Dt,{bm:Yn,m:qn,parent:un}=Pt,yn=isAsyncWrapper(Dt);if(toggleRecurse(Pt,!1),Yn&&invokeArrayFns(Yn),!yn&&(Jn=fr&&fr.onVnodeBeforeMount)&&invokeVNodeHook(Jn,un,Dt),toggleRecurse(Pt,!0),nr&&Pn){const Rn=()=>{Pt.subTree=renderComponentRoot(Pt),Pn(nr,Pt.subTree,Pt,En,null)};yn?Dt.type.__asyncLoader().then(()=>!Pt.isUnmounted&&Rn()):Rn()}else{const Rn=Pt.subTree=renderComponentRoot(Pt);De(null,Rn,rn,bn,Pt,En,zn),Dt.el=Rn.el}if(qn&&queuePostRenderEffect(qn,En),!yn&&(Jn=fr&&fr.onVnodeMounted)){const Rn=Dt;queuePostRenderEffect(()=>invokeVNodeHook(Jn,un,Rn),En)}Dt.shapeFlag&256&&Pt.a&&queuePostRenderEffect(Pt.a,En),Pt.isMounted=!0,Dt=rn=bn=null}},wn=Pt.effect=new ReactiveEffect(xn,()=>queueJob(Pt.update),Pt.scope),Sn=Pt.update=wn.run.bind(wn);Sn.id=Pt.uid,toggleRecurse(Pt,!0),Sn()},xt=(Pt,Dt,rn)=>{Dt.component=Pt;const bn=Pt.vnode.props;Pt.vnode=Dt,Pt.next=null,updateProps(Pt,Dt.props,bn,rn),updateSlots(Pt,Dt.children,rn),pauseTracking(),flushPreFlushCbs(void 0,Pt.update),resetTracking()},ht=(Pt,Dt,rn,bn,En,zn,$n,xn,wn=!1)=>{const Sn=Pt&&Pt.children,Jn=Pt?Pt.shapeFlag:0,nr=Dt.children,{patchFlag:fr,shapeFlag:Yn}=Dt;if(fr>0){if(fr&128){st(Sn,nr,rn,bn,En,zn,$n,xn,wn);return}else if(fr&256){Vt(Sn,nr,rn,bn,En,zn,$n,xn,wn);return}}Yn&8?(Jn&16&&Xt(Sn,En,zn),nr!==Sn&&ye(rn,nr)):Jn&16?Yn&16?st(Sn,nr,rn,bn,En,zn,$n,xn,wn):Xt(Sn,En,zn,!0):(Jn&8&&ye(rn,""),Yn&16&&It(nr,rn,bn,En,zn,$n,xn,wn))},Vt=(Pt,Dt,rn,bn,En,zn,$n,xn,wn)=>{Pt=Pt||EMPTY_ARR,Dt=Dt||EMPTY_ARR;const Sn=Pt.length,Jn=Dt.length,nr=Math.min(Sn,Jn);let fr;for(fr=0;fr<nr;fr++){const Yn=Dt[fr]=wn?cloneIfMounted(Dt[fr]):normalizeVNode(Dt[fr]);De(Pt[fr],Yn,rn,null,En,zn,$n,xn,wn)}Sn>Jn?Xt(Pt,En,zn,!0,!1,nr):It(Dt,rn,bn,En,zn,$n,xn,wn,nr)},st=(Pt,Dt,rn,bn,En,zn,$n,xn,wn)=>{let Sn=0;const Jn=Dt.length;let nr=Pt.length-1,fr=Jn-1;for(;Sn<=nr&&Sn<=fr;){const Yn=Pt[Sn],qn=Dt[Sn]=wn?cloneIfMounted(Dt[Sn]):normalizeVNode(Dt[Sn]);if(isSameVNodeType(Yn,qn))De(Yn,qn,rn,null,En,zn,$n,xn,wn);else break;Sn++}for(;Sn<=nr&&Sn<=fr;){const Yn=Pt[nr],qn=Dt[fr]=wn?cloneIfMounted(Dt[fr]):normalizeVNode(Dt[fr]);if(isSameVNodeType(Yn,qn))De(Yn,qn,rn,null,En,zn,$n,xn,wn);else break;nr--,fr--}if(Sn>nr){if(Sn<=fr){const Yn=fr+1,qn=Yn<Jn?Dt[Yn].el:bn;for(;Sn<=fr;)De(null,Dt[Sn]=wn?cloneIfMounted(Dt[Sn]):normalizeVNode(Dt[Sn]),rn,qn,En,zn,$n,xn,wn),Sn++}}else if(Sn>fr)for(;Sn<=nr;)ln(Pt[Sn],En,zn,!0),Sn++;else{const Yn=Sn,qn=Sn,un=new Map;for(Sn=qn;Sn<=fr;Sn++){const Br=Dt[Sn]=wn?cloneIfMounted(Dt[Sn]):normalizeVNode(Dt[Sn]);Br.key!=null&&un.set(Br.key,Sn)}let yn,Rn=0;const Kn=fr-qn+1;let mr=!1,Cr=0;const Lr=new Array(Kn);for(Sn=0;Sn<Kn;Sn++)Lr[Sn]=0;for(Sn=Yn;Sn<=nr;Sn++){const Br=Pt[Sn];if(Rn>=Kn){ln(Br,En,zn,!0);continue}let Fr;if(Br.key!=null)Fr=un.get(Br.key);else for(yn=qn;yn<=fr;yn++)if(Lr[yn-qn]===0&&isSameVNodeType(Br,Dt[yn])){Fr=yn;break}Fr===void 0?ln(Br,En,zn,!0):(Lr[Fr-qn]=Sn+1,Fr>=Cr?Cr=Fr:mr=!0,De(Br,Dt[Fr],rn,null,En,zn,$n,xn,wn),Rn++)}const br=mr?getSequence(Lr):EMPTY_ARR;for(yn=br.length-1,Sn=Kn-1;Sn>=0;Sn--){const Br=qn+Sn,Fr=Dt[Br],Gr=Br+1<Jn?Dt[Br+1].el:bn;Lr[Sn]===0?De(null,Fr,rn,Gr,En,zn,$n,xn,wn):mr&&(yn<0||Sn!==br[yn]?$t(Fr,rn,Gr,2):yn--)}}},$t=(Pt,Dt,rn,bn,En=null)=>{const{el:zn,type:$n,transition:xn,children:wn,shapeFlag:Sn}=Pt;if(Sn&6){$t(Pt.component.subTree,Dt,rn,bn);return}if(Sn&128){Pt.suspense.move(Dt,rn,bn);return}if(Sn&64){$n.move(Pt,Dt,rn,hn);return}if($n===Fragment){de(zn,Dt,rn);for(let nr=0;nr<wn.length;nr++)$t(wn[nr],Dt,rn,bn);de(Pt.anchor,Dt,rn);return}if($n===Static){Xe(Pt,Dt,rn);return}if(bn!==2&&Sn&1&&xn)if(bn===0)xn.beforeEnter(zn),de(zn,Dt,rn),queuePostRenderEffect(()=>xn.enter(zn),En);else{const{leave:nr,delayLeave:fr,afterLeave:Yn}=xn,qn=()=>de(zn,Dt,rn),un=()=>{nr(zn,()=>{qn(),Yn&&Yn()})};fr?fr(zn,qn,un):un()}else de(zn,Dt,rn)},ln=(Pt,Dt,rn,bn=!1,En=!1)=>{const{type:zn,props:$n,ref:xn,children:wn,dynamicChildren:Sn,shapeFlag:Jn,patchFlag:nr,dirs:fr}=Pt;if(xn!=null&&setRef(xn,null,rn,Pt,!0),Jn&256){Dt.ctx.deactivate(Pt);return}const Yn=Jn&1&&fr,qn=!isAsyncWrapper(Pt);let un;if(qn&&(un=$n&&$n.onVnodeBeforeUnmount)&&invokeVNodeHook(un,Dt,Pt),Jn&6)an(Pt.component,rn,bn);else{if(Jn&128){Pt.suspense.unmount(rn,bn);return}Yn&&invokeDirectiveHook(Pt,null,Dt,"beforeUnmount"),Jn&64?Pt.type.remove(Pt,Dt,rn,En,hn,bn):Sn&&(zn!==Fragment||nr>0&&nr&64)?Xt(Sn,Dt,rn,!1,!0):(zn===Fragment&&nr&384||!En&&Jn&16)&&Xt(wn,Dt,rn),bn&&Mn(Pt)}(qn&&(un=$n&&$n.onVnodeUnmounted)||Yn)&&queuePostRenderEffect(()=>{un&&invokeVNodeHook(un,Dt,Pt),Yn&&invokeDirectiveHook(Pt,null,Dt,"unmounted")},rn)},Mn=Pt=>{const{type:Dt,el:rn,anchor:bn,transition:En}=Pt;if(Dt===Fragment){on(rn,bn);return}if(Dt===Static){Ye(Pt);return}const zn=()=>{he(rn),En&&!En.persisted&&En.afterLeave&&En.afterLeave()};if(Pt.shapeFlag&1&&En&&!En.persisted){const{leave:$n,delayLeave:xn}=En,wn=()=>$n(rn,zn);xn?xn(Pt.el,zn,wn):wn()}else zn()},on=(Pt,Dt)=>{let rn;for(;Pt!==Dt;)rn=Ee(Pt),he(Pt),Pt=rn;he(Dt)},an=(Pt,Dt,rn)=>{const{bum:bn,scope:En,update:zn,subTree:$n,um:xn}=Pt;bn&&invokeArrayFns(bn),En.stop(),zn&&(zn.active=!1,ln($n,Pt,Dt,rn)),xn&&queuePostRenderEffect(xn,Dt),queuePostRenderEffect(()=>{Pt.isUnmounted=!0},Dt),Dt&&Dt.pendingBranch&&!Dt.isUnmounted&&Pt.asyncDep&&!Pt.asyncResolved&&Pt.suspenseId===Dt.pendingId&&(Dt.deps--,Dt.deps===0&&Dt.resolve())},Xt=(Pt,Dt,rn,bn=!1,En=!1,zn=0)=>{for(let $n=zn;$n<Pt.length;$n++)ln(Pt[$n],Dt,rn,bn,En)},Rt=Pt=>Pt.shapeFlag&6?Rt(Pt.component.subTree):Pt.shapeFlag&128?Pt.suspense.next():Ee(Pt.anchor||Pt.el),en=(Pt,Dt,rn)=>{Pt==null?Dt._vnode&&ln(Dt._vnode,null,null,!0):De(Dt._vnode||null,Pt,Dt,null,null,null,rn),flushPostFlushCbs(),Dt._vnode=Pt},hn={p:De,um:ln,m:$t,r:Mn,mt:dt,mc:It,pc:ht,pbc:bt,n:Rt,o:q};let vn,Pn;return Q&&([vn,Pn]=Q(hn)),{render:en,hydrate:vn,createApp:createAppAPI(en,vn)}}function toggleRecurse({effect:q,update:Q},V){q.allowRecurse=Q.allowRecurse=V}function traverseStaticChildren(q,Q,V=!1){const de=q.children,he=Q.children;if(isArray$1(de)&&isArray$1(he))for(let ne=0;ne<de.length;ne++){const Te=de[ne];let j=he[ne];j.shapeFlag&1&&!j.dynamicChildren&&((j.patchFlag<=0||j.patchFlag===32)&&(j=he[ne]=cloneIfMounted(he[ne]),j.el=Te.el),V||traverseStaticChildren(Te,j))}}function getSequence(q){const Q=q.slice(),V=[0];let de,he,ne,Te,j;const be=q.length;for(de=0;de<be;de++){const ce=q[de];if(ce!==0){if(he=V[V.length-1],q[he]<ce){Q[de]=he,V.push(de);continue}for(ne=0,Te=V.length-1;ne<Te;)j=ne+Te>>1,q[V[j]]<ce?ne=j+1:Te=j;ce<q[V[ne]]&&(ne>0&&(Q[de]=V[ne-1]),V[ne]=de)}}for(ne=V.length,Te=V[ne-1];ne-- >0;)V[ne]=Te,Te=Q[Te];return V}const isTeleport=q=>q.__isTeleport,isTeleportDisabled=q=>q&&(q.disabled||q.disabled===""),isTargetSVG=q=>typeof SVGElement!="undefined"&&q instanceof SVGElement,resolveTarget=(q,Q)=>{const V=q&&q.to;return isString$1(V)?Q?Q(V):null:V},TeleportImpl={__isTeleport:!0,process(q,Q,V,de,he,ne,Te,j,be,ce){const{mc:ye,pc:xe,pbc:Ee,o:{insert:Ce,querySelector:Se,createText:Oe,createComment:De}}=ce,Ue=isTeleportDisabled(Q.props);let{shapeFlag:$e,children:Fe,dynamicChildren:Xe}=Q;if(q==null){const Ye=Q.el=Oe(""),He=Q.anchor=Oe("");Ce(Ye,V,de),Ce(He,V,de);const Je=Q.target=resolveTarget(Q.props,Se),pt=Q.targetAnchor=Oe("");Je&&(Ce(pt,Je),Te=Te||isTargetSVG(Je));const It=(At,bt)=>{$e&16&&ye(Fe,At,bt,he,ne,Te,j,be)};Ue?It(V,He):Je&&It(Je,pt)}else{Q.el=q.el;const Ye=Q.anchor=q.anchor,He=Q.target=q.target,Je=Q.targetAnchor=q.targetAnchor,pt=isTeleportDisabled(q.props),It=pt?V:He,At=pt?Ye:Je;if(Te=Te||isTargetSVG(He),Xe?(Ee(q.dynamicChildren,Xe,It,he,ne,Te,j),traverseStaticChildren(q,Q,!0)):be||xe(q,Q,It,At,he,ne,Te,j,!1),Ue)pt||moveTeleport(Q,V,Ye,ce,1);else if((Q.props&&Q.props.to)!==(q.props&&q.props.to)){const bt=Q.target=resolveTarget(Q.props,Se);bt&&moveTeleport(Q,bt,null,ce,0)}else pt&&moveTeleport(Q,He,Je,ce,1)}},remove(q,Q,V,de,{um:he,o:{remove:ne}},Te){const{shapeFlag:j,children:be,anchor:ce,targetAnchor:ye,target:xe,props:Ee}=q;if(xe&&ne(ye),(Te||!isTeleportDisabled(Ee))&&(ne(ce),j&16))for(let Ce=0;Ce<be.length;Ce++){const Se=be[Ce];he(Se,Q,V,!0,!!Se.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(q,Q,V,{o:{insert:de},m:he},ne=2){ne===0&&de(q.targetAnchor,Q,V);const{el:Te,anchor:j,shapeFlag:be,children:ce,props:ye}=q,xe=ne===2;if(xe&&de(Te,Q,V),(!xe||isTeleportDisabled(ye))&&be&16)for(let Ee=0;Ee<ce.length;Ee++)he(ce[Ee],Q,V,2);xe&&de(j,Q,V)}function hydrateTeleport(q,Q,V,de,he,ne,{o:{nextSibling:Te,parentNode:j,querySelector:be}},ce){const ye=Q.target=resolveTarget(Q.props,be);if(ye){const xe=ye._lpa||ye.firstChild;Q.shapeFlag&16&&(isTeleportDisabled(Q.props)?(Q.anchor=ce(Te(q),Q,j(q),V,de,he,ne),Q.targetAnchor=xe):(Q.anchor=Te(q),Q.targetAnchor=ce(xe,Q,ye,V,de,he,ne)),ye._lpa=Q.targetAnchor&&Te(Q.targetAnchor))}return Q.anchor&&Te(Q.anchor)}const Teleport=TeleportImpl,COMPONENTS="components",NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(q){return isString$1(q)?resolveAsset(COMPONENTS,q,!1)||q:q||NULL_DYNAMIC_COMPONENT}function resolveAsset(q,Q,V=!0,de=!1){const he=currentRenderingInstance||currentInstance;if(he){const ne=he.type;if(q===COMPONENTS){const j=getComponentName(ne);if(j&&(j===Q||j===camelize(Q)||j===capitalize(camelize(Q))))return ne}const Te=resolve(he[q]||ne[q],Q)||resolve(he.appContext[q],Q);return!Te&&de?ne:Te}}function resolve(q,Q){return q&&(q[Q]||q[camelize(Q)]||q[capitalize(camelize(Q))])}const Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment$1=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(q=!1){blockStack.push(currentBlock=q?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(q){isBlockTreeEnabled+=q}function setupBlock(q){return q.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(q),q}function createElementBlock(q,Q,V,de,he,ne){return setupBlock(createBaseVNode(q,Q,V,de,he,ne,!0))}function createBlock(q,Q,V,de,he){return setupBlock(createVNode(q,Q,V,de,he,!0))}function isVNode(q){return q?q.__v_isVNode===!0:!1}function isSameVNodeType(q,Q){return q.type===Q.type&&q.key===Q.key}const InternalObjectKey="__vInternal",normalizeKey=({key:q})=>q!=null?q:null,normalizeRef=({ref:q,ref_key:Q,ref_for:V})=>q!=null?isString$1(q)||isRef(q)||isFunction$2(q)?{i:currentRenderingInstance,r:q,k:Q,f:!!V}:q:null;function createBaseVNode(q,Q=null,V=null,de=0,he=null,ne=q===Fragment?0:1,Te=!1,j=!1){const be={__v_isVNode:!0,__v_skip:!0,type:q,props:Q,key:Q&&normalizeKey(Q),ref:Q&&normalizeRef(Q),scopeId:currentScopeId,slotScopeIds:null,children:V,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:ne,patchFlag:de,dynamicProps:he,dynamicChildren:null,appContext:null};return j?(normalizeChildren(be,V),ne&128&&q.normalize(be)):V&&(be.shapeFlag|=isString$1(V)?8:16),isBlockTreeEnabled>0&&!Te&&currentBlock&&(be.patchFlag>0||ne&6)&&be.patchFlag!==32&&currentBlock.push(be),be}const createVNode=_createVNode;function _createVNode(q,Q=null,V=null,de=0,he=null,ne=!1){if((!q||q===NULL_DYNAMIC_COMPONENT)&&(q=Comment$1),isVNode(q)){const j=cloneVNode(q,Q,!0);return V&&normalizeChildren(j,V),j}if(isClassComponent(q)&&(q=q.__vccOpts),Q){Q=guardReactiveProps(Q);let{class:j,style:be}=Q;j&&!isString$1(j)&&(Q.class=normalizeClass(j)),isObject$1(be)&&(isProxy$1(be)&&!isArray$1(be)&&(be=extend$1({},be)),Q.style=normalizeStyle(be))}const Te=isString$1(q)?1:isSuspense(q)?128:isTeleport(q)?64:isObject$1(q)?4:isFunction$2(q)?2:0;return createBaseVNode(q,Q,V,de,he,Te,ne,!0)}function guardReactiveProps(q){return q?isProxy$1(q)||InternalObjectKey in q?extend$1({},q):q:null}function cloneVNode(q,Q,V=!1){const{props:de,ref:he,patchFlag:ne,children:Te}=q,j=Q?mergeProps(de||{},Q):de;return{__v_isVNode:!0,__v_skip:!0,type:q.type,props:j,key:j&&normalizeKey(j),ref:Q&&Q.ref?V&&he?isArray$1(he)?he.concat(normalizeRef(Q)):[he,normalizeRef(Q)]:normalizeRef(Q):he,scopeId:q.scopeId,slotScopeIds:q.slotScopeIds,children:Te,target:q.target,targetAnchor:q.targetAnchor,staticCount:q.staticCount,shapeFlag:q.shapeFlag,patchFlag:Q&&q.type!==Fragment?ne===-1?16:ne|16:ne,dynamicProps:q.dynamicProps,dynamicChildren:q.dynamicChildren,appContext:q.appContext,dirs:q.dirs,transition:q.transition,component:q.component,suspense:q.suspense,ssContent:q.ssContent&&cloneVNode(q.ssContent),ssFallback:q.ssFallback&&cloneVNode(q.ssFallback),el:q.el,anchor:q.anchor}}function createTextVNode(q=" ",Q=0){return createVNode(Text$1,null,q,Q)}function createStaticVNode(q,Q){const V=createVNode(Static,null,q);return V.staticCount=Q,V}function createCommentVNode(q="",Q=!1){return Q?(openBlock(),createBlock(Comment$1,null,q)):createVNode(Comment$1,null,q)}function normalizeVNode(q){return q==null||typeof q=="boolean"?createVNode(Comment$1):isArray$1(q)?createVNode(Fragment,null,q.slice()):typeof q=="object"?cloneIfMounted(q):createVNode(Text$1,null,String(q))}function cloneIfMounted(q){return q.el===null||q.memo?q:cloneVNode(q)}function normalizeChildren(q,Q){let V=0;const{shapeFlag:de}=q;if(Q==null)Q=null;else if(isArray$1(Q))V=16;else if(typeof Q=="object")if(de&65){const he=Q.default;he&&(he._c&&(he._d=!1),normalizeChildren(q,he()),he._c&&(he._d=!0));return}else{V=32;const he=Q._;!he&&!(InternalObjectKey in Q)?Q._ctx=currentRenderingInstance:he===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?Q._=1:(Q._=2,q.patchFlag|=1024))}else isFunction$2(Q)?(Q={default:Q,_ctx:currentRenderingInstance},V=32):(Q=String(Q),de&64?(V=16,Q=[createTextVNode(Q)]):V=8);q.children=Q,q.shapeFlag|=V}function mergeProps(...q){const Q={};for(let V=0;V<q.length;V++){const de=q[V];for(const he in de)if(he==="class")Q.class!==de.class&&(Q.class=normalizeClass([Q.class,de.class]));else if(he==="style")Q.style=normalizeStyle([Q.style,de.style]);else if(isOn(he)){const ne=Q[he],Te=de[he];Te&&ne!==Te&&!(isArray$1(ne)&&ne.includes(Te))&&(Q[he]=ne?[].concat(ne,Te):Te)}else he!==""&&(Q[he]=de[he])}return Q}function invokeVNodeHook(q,Q,V,de=null){callWithAsyncErrorHandling(q,Q,7,[V,de])}function renderList(q,Q,V,de){let he;const ne=V&&V[de];if(isArray$1(q)||isString$1(q)){he=new Array(q.length);for(let Te=0,j=q.length;Te<j;Te++)he[Te]=Q(q[Te],Te,void 0,ne&&ne[Te])}else if(typeof q=="number"){he=new Array(q);for(let Te=0;Te<q;Te++)he[Te]=Q(Te+1,Te,void 0,ne&&ne[Te])}else if(isObject$1(q))if(q[Symbol.iterator])he=Array.from(q,(Te,j)=>Q(Te,j,void 0,ne&&ne[j]));else{const Te=Object.keys(q);he=new Array(Te.length);for(let j=0,be=Te.length;j<be;j++){const ce=Te[j];he[j]=Q(q[ce],ce,j,ne&&ne[j])}}else he=[];return V&&(V[de]=he),he}const getPublicInstance=q=>q?isStatefulComponent(q)?getExposeProxy(q)||q.proxy:getPublicInstance(q.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:q=>q,$el:q=>q.vnode.el,$data:q=>q.data,$props:q=>q.props,$attrs:q=>q.attrs,$slots:q=>q.slots,$refs:q=>q.refs,$parent:q=>getPublicInstance(q.parent),$root:q=>getPublicInstance(q.root),$emit:q=>q.emit,$options:q=>resolveMergedOptions(q),$forceUpdate:q=>()=>queueJob(q.update),$nextTick:q=>nextTick.bind(q.proxy),$watch:q=>instanceWatch.bind(q)}),PublicInstanceProxyHandlers={get({_:q},Q){const{ctx:V,setupState:de,data:he,props:ne,accessCache:Te,type:j,appContext:be}=q;let ce;if(Q[0]!=="$"){const Ce=Te[Q];if(Ce!==void 0)switch(Ce){case 1:return de[Q];case 2:return he[Q];case 4:return V[Q];case 3:return ne[Q]}else{if(de!==EMPTY_OBJ&&hasOwn(de,Q))return Te[Q]=1,de[Q];if(he!==EMPTY_OBJ&&hasOwn(he,Q))return Te[Q]=2,he[Q];if((ce=q.propsOptions[0])&&hasOwn(ce,Q))return Te[Q]=3,ne[Q];if(V!==EMPTY_OBJ&&hasOwn(V,Q))return Te[Q]=4,V[Q];shouldCacheAccess&&(Te[Q]=0)}}const ye=publicPropertiesMap[Q];let xe,Ee;if(ye)return Q==="$attrs"&&track(q,"get",Q),ye(q);if((xe=j.__cssModules)&&(xe=xe[Q]))return xe;if(V!==EMPTY_OBJ&&hasOwn(V,Q))return Te[Q]=4,V[Q];if(Ee=be.config.globalProperties,hasOwn(Ee,Q))return Ee[Q]},set({_:q},Q,V){const{data:de,setupState:he,ctx:ne}=q;return he!==EMPTY_OBJ&&hasOwn(he,Q)?(he[Q]=V,!0):de!==EMPTY_OBJ&&hasOwn(de,Q)?(de[Q]=V,!0):hasOwn(q.props,Q)||Q[0]==="$"&&Q.slice(1)in q?!1:(ne[Q]=V,!0)},has({_:{data:q,setupState:Q,accessCache:V,ctx:de,appContext:he,propsOptions:ne}},Te){let j;return!!V[Te]||q!==EMPTY_OBJ&&hasOwn(q,Te)||Q!==EMPTY_OBJ&&hasOwn(Q,Te)||(j=ne[0])&&hasOwn(j,Te)||hasOwn(de,Te)||hasOwn(publicPropertiesMap,Te)||hasOwn(he.config.globalProperties,Te)},defineProperty(q,Q,V){return V.get!=null?this.set(q,Q,V.get(),null):V.value!=null&&this.set(q,Q,V.value,null),Reflect.defineProperty(q,Q,V)}},emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(q,Q,V){const de=q.type,he=(Q?Q.appContext:q.appContext)||emptyAppContext,ne={uid:uid$1++,vnode:q,type:de,parent:Q,appContext:he,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:Q?Q.provides:Object.create(he.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(de,he),emitsOptions:normalizeEmitsOptions(de,he),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:de.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:V,suspenseId:V?V.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return ne.ctx={_:ne},ne.root=Q?Q.root:ne,ne.emit=emit$1.bind(null,ne),q.ce&&q.ce(ne),ne}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=q=>{currentInstance=q,q.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(q){return q.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(q,Q=!1){isInSSRComponentSetup=Q;const{props:V,children:de}=q.vnode,he=isStatefulComponent(q);initProps(q,V,he,Q),initSlots(q,de);const ne=he?setupStatefulComponent(q,Q):void 0;return isInSSRComponentSetup=!1,ne}function setupStatefulComponent(q,Q){const V=q.type;q.accessCache=Object.create(null),q.proxy=markRaw(new Proxy(q.ctx,PublicInstanceProxyHandlers));const{setup:de}=V;if(de){const he=q.setupContext=de.length>1?createSetupContext(q):null;setCurrentInstance(q),pauseTracking();const ne=callWithErrorHandling(de,q,0,[q.props,he]);if(resetTracking(),unsetCurrentInstance(),isPromise(ne)){if(ne.then(unsetCurrentInstance,unsetCurrentInstance),Q)return ne.then(Te=>{handleSetupResult(q,Te,Q)}).catch(Te=>{handleError(Te,q,0)});q.asyncDep=ne}else handleSetupResult(q,ne,Q)}else finishComponentSetup(q,Q)}function handleSetupResult(q,Q,V){isFunction$2(Q)?q.type.__ssrInlineRender?q.ssrRender=Q:q.render=Q:isObject$1(Q)&&(q.setupState=proxyRefs(Q)),finishComponentSetup(q,V)}let compile;function finishComponentSetup(q,Q,V){const de=q.type;if(!q.render){if(!Q&&compile&&!de.render){const he=de.template;if(he){const{isCustomElement:ne,compilerOptions:Te}=q.appContext.config,{delimiters:j,compilerOptions:be}=de,ce=extend$1(extend$1({isCustomElement:ne,delimiters:j},Te),be);de.render=compile(he,ce)}}q.render=de.render||NOOP}setCurrentInstance(q),pauseTracking(),applyOptions(q),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(q){return new Proxy(q.attrs,{get(Q,V){return track(q,"get","$attrs"),Q[V]}})}function createSetupContext(q){const Q=de=>{q.exposed=de||{}};let V;return{get attrs(){return V||(V=createAttrsProxy(q))},slots:q.slots,emit:q.emit,expose:Q}}function getExposeProxy(q){if(q.exposed)return q.exposeProxy||(q.exposeProxy=new Proxy(proxyRefs(markRaw(q.exposed)),{get(Q,V){if(V in Q)return Q[V];if(V in publicPropertiesMap)return publicPropertiesMap[V](q)}}))}function getComponentName(q){return isFunction$2(q)&&q.displayName||q.name}function isClassComponent(q){return isFunction$2(q)&&"__vccOpts"in q}const computed=(q,Q)=>computed$1(q,Q,isInSSRComponentSetup);function withAsyncContext(q){const Q=getCurrentInstance();let V=q();return unsetCurrentInstance(),isPromise(V)&&(V=V.catch(de=>{throw setCurrentInstance(Q),de})),[V,()=>setCurrentInstance(Q)]}function h$3(q,Q,V){const de=arguments.length;return de===2?isObject$1(Q)&&!isArray$1(Q)?isVNode(Q)?createVNode(q,null,[Q]):createVNode(q,Q):createVNode(q,null,Q):(de>3?V=Array.prototype.slice.call(arguments,2):de===3&&isVNode(V)&&(V=[V]),createVNode(q,Q,V))}const version="3.2.31",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(q,Q,V)=>{Q.insertBefore(q,V||null)},remove:q=>{const Q=q.parentNode;Q&&Q.removeChild(q)},createElement:(q,Q,V,de)=>{const he=Q?doc.createElementNS(svgNS,q):doc.createElement(q,V?{is:V}:void 0);return q==="select"&&de&&de.multiple!=null&&he.setAttribute("multiple",de.multiple),he},createText:q=>doc.createTextNode(q),createComment:q=>doc.createComment(q),setText:(q,Q)=>{q.nodeValue=Q},setElementText:(q,Q)=>{q.textContent=Q},parentNode:q=>q.parentNode,nextSibling:q=>q.nextSibling,querySelector:q=>doc.querySelector(q),setScopeId(q,Q){q.setAttribute(Q,"")},cloneNode(q){const Q=q.cloneNode(!0);return"_value"in q&&(Q._value=q._value),Q},insertStaticContent(q,Q,V,de,he,ne){const Te=V?V.previousSibling:Q.lastChild;if(he&&(he===ne||he.nextSibling))for(;Q.insertBefore(he.cloneNode(!0),V),!(he===ne||!(he=he.nextSibling)););else{templateContainer.innerHTML=de?`<svg>${q}</svg>`:q;const j=templateContainer.content;if(de){const be=j.firstChild;for(;be.firstChild;)j.appendChild(be.firstChild);j.removeChild(be)}Q.insertBefore(j,V)}return[Te?Te.nextSibling:Q.firstChild,V?V.previousSibling:Q.lastChild]}};function patchClass(q,Q,V){const de=q._vtc;de&&(Q=(Q?[Q,...de]:[...de]).join(" ")),Q==null?q.removeAttribute("class"):V?q.setAttribute("class",Q):q.className=Q}function patchStyle(q,Q,V){const de=q.style,he=isString$1(V);if(V&&!he){for(const ne in V)setStyle(de,ne,V[ne]);if(Q&&!isString$1(Q))for(const ne in Q)V[ne]==null&&setStyle(de,ne,"")}else{const ne=de.display;he?Q!==V&&(de.cssText=V):Q&&q.removeAttribute("style"),"_vod"in q&&(de.display=ne)}}const importantRE=/\s*!important$/;function setStyle(q,Q,V){if(isArray$1(V))V.forEach(de=>setStyle(q,Q,de));else if(Q.startsWith("--"))q.setProperty(Q,V);else{const de=autoPrefix(q,Q);importantRE.test(V)?q.setProperty(hyphenate(de),V.replace(importantRE,""),"important"):q[de]=V}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(q,Q){const V=prefixCache[Q];if(V)return V;let de=camelize(Q);if(de!=="filter"&&de in q)return prefixCache[Q]=de;de=capitalize(de);for(let he=0;he<prefixes.length;he++){const ne=prefixes[he]+de;if(ne in q)return prefixCache[Q]=ne}return Q}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(q,Q,V,de,he){if(de&&Q.startsWith("xlink:"))V==null?q.removeAttributeNS(xlinkNS,Q.slice(6,Q.length)):q.setAttributeNS(xlinkNS,Q,V);else{const ne=isSpecialBooleanAttr(Q);V==null||ne&&!includeBooleanAttr(V)?q.removeAttribute(Q):q.setAttribute(Q,ne?"":V)}}function patchDOMProp(q,Q,V,de,he,ne,Te){if(Q==="innerHTML"||Q==="textContent"){de&&Te(de,he,ne),q[Q]=V==null?"":V;return}if(Q==="value"&&q.tagName!=="PROGRESS"&&!q.tagName.includes("-")){q._value=V;const j=V==null?"":V;(q.value!==j||q.tagName==="OPTION")&&(q.value=j),V==null&&q.removeAttribute(Q);return}if(V===""||V==null){const j=typeof q[Q];if(j==="boolean"){q[Q]=includeBooleanAttr(V);return}else if(V==null&&j==="string"){q[Q]="",q.removeAttribute(Q);return}else if(j==="number"){try{q[Q]=0}catch{}q.removeAttribute(Q);return}}try{q[Q]=V}catch{}}let _getNow=Date.now,skipTimestampCheck=!1;if(typeof window!="undefined"){_getNow()>document.createEvent("Event").timeStamp&&(_getNow=()=>performance.now());const q=navigator.userAgent.match(/firefox\/(\d+)/i);skipTimestampCheck=!!(q&&Number(q[1])<=53)}let cachedNow=0;const p$5=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$5.then(reset),cachedNow=_getNow());function addEventListener(q,Q,V,de){q.addEventListener(Q,V,de)}function removeEventListener(q,Q,V,de){q.removeEventListener(Q,V,de)}function patchEvent(q,Q,V,de,he=null){const ne=q._vei||(q._vei={}),Te=ne[Q];if(de&&Te)Te.value=de;else{const[j,be]=parseName(Q);if(de){const ce=ne[Q]=createInvoker(de,he);addEventListener(q,j,ce,be)}else Te&&(removeEventListener(q,j,Te,be),ne[Q]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(q){let Q;if(optionsModifierRE.test(q)){Q={};let V;for(;V=q.match(optionsModifierRE);)q=q.slice(0,q.length-V[0].length),Q[V[0].toLowerCase()]=!0}return[hyphenate(q.slice(2)),Q]}function createInvoker(q,Q){const V=de=>{const he=de.timeStamp||_getNow();(skipTimestampCheck||he>=V.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(de,V.value),Q,5,[de])};return V.value=q,V.attached=getNow(),V}function patchStopImmediatePropagation(q,Q){if(isArray$1(Q)){const V=q.stopImmediatePropagation;return q.stopImmediatePropagation=()=>{V.call(q),q._stopped=!0},Q.map(de=>he=>!he._stopped&&de&&de(he))}else return Q}const nativeOnRE=/^on[a-z]/,patchProp=(q,Q,V,de,he=!1,ne,Te,j,be)=>{Q==="class"?patchClass(q,de,he):Q==="style"?patchStyle(q,V,de):isOn(Q)?isModelListener(Q)||patchEvent(q,Q,V,de,Te):(Q[0]==="."?(Q=Q.slice(1),!0):Q[0]==="^"?(Q=Q.slice(1),!1):shouldSetAsProp(q,Q,de,he))?patchDOMProp(q,Q,de,ne,Te,j,be):(Q==="true-value"?q._trueValue=de:Q==="false-value"&&(q._falseValue=de),patchAttr(q,Q,de,he))};function shouldSetAsProp(q,Q,V,de){return de?!!(Q==="innerHTML"||Q==="textContent"||Q in q&&nativeOnRE.test(Q)&&isFunction$2(V)):Q==="spellcheck"||Q==="draggable"||Q==="form"||Q==="list"&&q.tagName==="INPUT"||Q==="type"&&q.tagName==="TEXTAREA"||nativeOnRE.test(Q)&&isString$1(V)?!1:Q in q}const TRANSITION="transition",ANIMATION="animation",Transition=(q,{slots:Q})=>h$3(BaseTransition,resolveTransitionProps(q),Q);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$1({},BaseTransition.props,DOMTransitionPropsValidators);const callHook=(q,Q=[])=>{isArray$1(q)?q.forEach(V=>V(...Q)):q&&q(...Q)},hasExplicitCallback=q=>q?isArray$1(q)?q.some(Q=>Q.length>1):q.length>1:!1;function resolveTransitionProps(q){const Q={};for(const rt in q)rt in DOMTransitionPropsValidators||(Q[rt]=q[rt]);if(q.css===!1)return Q;const{name:V="v",type:de,duration:he,enterFromClass:ne=`${V}-enter-from`,enterActiveClass:Te=`${V}-enter-active`,enterToClass:j=`${V}-enter-to`,appearFromClass:be=ne,appearActiveClass:ce=Te,appearToClass:ye=j,leaveFromClass:xe=`${V}-leave-from`,leaveActiveClass:Ee=`${V}-leave-active`,leaveToClass:Ce=`${V}-leave-to`}=q,Se=normalizeDuration(he),Oe=Se&&Se[0],De=Se&&Se[1],{onBeforeEnter:Ue,onEnter:$e,onEnterCancelled:Fe,onLeave:Xe,onLeaveCancelled:Ye,onBeforeAppear:He=Ue,onAppear:Je=$e,onAppearCancelled:pt=Fe}=Q,It=(rt,nt,it)=>{removeTransitionClass(rt,nt?ye:j),removeTransitionClass(rt,nt?ce:Te),it&&it()},At=(rt,nt)=>{removeTransitionClass(rt,Ce),removeTransitionClass(rt,Ee),nt&&nt()},bt=rt=>(nt,it)=>{const dt=rt?Je:$e,lt=()=>It(nt,rt,it);callHook(dt,[nt,lt]),nextFrame(()=>{removeTransitionClass(nt,rt?be:ne),addTransitionClass(nt,rt?ye:j),hasExplicitCallback(dt)||whenTransitionEnds(nt,de,Oe,lt)})};return extend$1(Q,{onBeforeEnter(rt){callHook(Ue,[rt]),addTransitionClass(rt,ne),addTransitionClass(rt,Te)},onBeforeAppear(rt){callHook(He,[rt]),addTransitionClass(rt,be),addTransitionClass(rt,ce)},onEnter:bt(!1),onAppear:bt(!0),onLeave(rt,nt){const it=()=>At(rt,nt);addTransitionClass(rt,xe),forceReflow(),addTransitionClass(rt,Ee),nextFrame(()=>{removeTransitionClass(rt,xe),addTransitionClass(rt,Ce),hasExplicitCallback(Xe)||whenTransitionEnds(rt,de,De,it)}),callHook(Xe,[rt,it])},onEnterCancelled(rt){It(rt,!1),callHook(Fe,[rt])},onAppearCancelled(rt){It(rt,!0),callHook(pt,[rt])},onLeaveCancelled(rt){At(rt),callHook(Ye,[rt])}})}function normalizeDuration(q){if(q==null)return null;if(isObject$1(q))return[NumberOf(q.enter),NumberOf(q.leave)];{const Q=NumberOf(q);return[Q,Q]}}function NumberOf(q){return toNumber(q)}function addTransitionClass(q,Q){Q.split(/\s+/).forEach(V=>V&&q.classList.add(V)),(q._vtc||(q._vtc=new Set)).add(Q)}function removeTransitionClass(q,Q){Q.split(/\s+/).forEach(de=>de&&q.classList.remove(de));const{_vtc:V}=q;V&&(V.delete(Q),V.size||(q._vtc=void 0))}function nextFrame(q){requestAnimationFrame(()=>{requestAnimationFrame(q)})}let endId=0;function whenTransitionEnds(q,Q,V,de){const he=q._endId=++endId,ne=()=>{he===q._endId&&de()};if(V)return setTimeout(ne,V);const{type:Te,timeout:j,propCount:be}=getTransitionInfo(q,Q);if(!Te)return de();const ce=Te+"end";let ye=0;const xe=()=>{q.removeEventListener(ce,Ee),ne()},Ee=Ce=>{Ce.target===q&&++ye>=be&&xe()};setTimeout(()=>{ye<be&&xe()},j+1),q.addEventListener(ce,Ee)}function getTransitionInfo(q,Q){const V=window.getComputedStyle(q),de=Se=>(V[Se]||"").split(", "),he=de(TRANSITION+"Delay"),ne=de(TRANSITION+"Duration"),Te=getTimeout(he,ne),j=de(ANIMATION+"Delay"),be=de(ANIMATION+"Duration"),ce=getTimeout(j,be);let ye=null,xe=0,Ee=0;Q===TRANSITION?Te>0&&(ye=TRANSITION,xe=Te,Ee=ne.length):Q===ANIMATION?ce>0&&(ye=ANIMATION,xe=ce,Ee=be.length):(xe=Math.max(Te,ce),ye=xe>0?Te>ce?TRANSITION:ANIMATION:null,Ee=ye?ye===TRANSITION?ne.length:be.length:0);const Ce=ye===TRANSITION&&/\b(transform|all)(,|$)/.test(V[TRANSITION+"Property"]);return{type:ye,timeout:xe,propCount:Ee,hasTransform:Ce}}function getTimeout(q,Q){for(;q.length<Q.length;)q=q.concat(q);return Math.max(...Q.map((V,de)=>toMs(V)+toMs(q[de])))}function toMs(q){return Number(q.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const getModelAssigner=q=>{const Q=q.props["onUpdate:modelValue"];return isArray$1(Q)?V=>invokeArrayFns(Q,V):Q};function onCompositionStart(q){q.target.composing=!0}function onCompositionEnd(q){const Q=q.target;Q.composing&&(Q.composing=!1,trigger(Q,"input"))}function trigger(q,Q){const V=document.createEvent("HTMLEvents");V.initEvent(Q,!0,!0),q.dispatchEvent(V)}const vModelText={created(q,{modifiers:{lazy:Q,trim:V,number:de}},he){q._assign=getModelAssigner(he);const ne=de||he.props&&he.props.type==="number";addEventListener(q,Q?"change":"input",Te=>{if(Te.target.composing)return;let j=q.value;V?j=j.trim():ne&&(j=toNumber(j)),q._assign(j)}),V&&addEventListener(q,"change",()=>{q.value=q.value.trim()}),Q||(addEventListener(q,"compositionstart",onCompositionStart),addEventListener(q,"compositionend",onCompositionEnd),addEventListener(q,"change",onCompositionEnd))},mounted(q,{value:Q}){q.value=Q==null?"":Q},beforeUpdate(q,{value:Q,modifiers:{lazy:V,trim:de,number:he}},ne){if(q._assign=getModelAssigner(ne),q.composing||document.activeElement===q&&(V||de&&q.value.trim()===Q||(he||q.type==="number")&&toNumber(q.value)===Q))return;const Te=Q==null?"":Q;q.value!==Te&&(q.value=Te)}},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...q)=>{const Q=ensureRenderer().createApp(...q),{mount:V}=Q;return Q.mount=de=>{const he=normalizeContainer(de);if(!he)return;const ne=Q._component;!isFunction$2(ne)&&!ne.render&&!ne.template&&(ne.template=he.innerHTML),he.innerHTML="";const Te=V(he,!1,he instanceof SVGElement);return he instanceof Element&&(he.removeAttribute("v-cloak"),he.setAttribute("data-v-app","")),Te},Q};function normalizeContainer(q){return isString$1(q)?document.querySelector(q):q}/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",PolySymbol=q=>hasSymbol?Symbol(q):"_vr_"+q,matchedRouteKey=PolySymbol("rvlm"),viewDepthKey=PolySymbol("rvd"),routerKey=PolySymbol("r"),routeLocationKey=PolySymbol("rl"),routerViewLocationKey=PolySymbol("rvl"),isBrowser=typeof window!="undefined";function isESModule(q){return q.__esModule||hasSymbol&&q[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams(q,Q){const V={};for(const de in Q){const he=Q[de];V[de]=Array.isArray(he)?he.map(q):q(he)}return V}const noop$1=()=>{},TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=q=>q.replace(TRAILING_SLASH_RE,"");function parseURL(q,Q,V="/"){let de,he={},ne="",Te="";const j=Q.indexOf("?"),be=Q.indexOf("#",j>-1?j:0);return j>-1&&(de=Q.slice(0,j),ne=Q.slice(j+1,be>-1?be:Q.length),he=q(ne)),be>-1&&(de=de||Q.slice(0,be),Te=Q.slice(be,Q.length)),de=resolveRelativePath(de!=null?de:Q,V),{fullPath:de+(ne&&"?")+ne+Te,path:de,query:he,hash:Te}}function stringifyURL(q,Q){const V=Q.query?q(Q.query):"";return Q.path+(V&&"?")+V+(Q.hash||"")}function stripBase(q,Q){return!Q||!q.toLowerCase().startsWith(Q.toLowerCase())?q:q.slice(Q.length)||"/"}function isSameRouteLocation(q,Q,V){const de=Q.matched.length-1,he=V.matched.length-1;return de>-1&&de===he&&isSameRouteRecord(Q.matched[de],V.matched[he])&&isSameRouteLocationParams(Q.params,V.params)&&q(Q.query)===q(V.query)&&Q.hash===V.hash}function isSameRouteRecord(q,Q){return(q.aliasOf||q)===(Q.aliasOf||Q)}function isSameRouteLocationParams(q,Q){if(Object.keys(q).length!==Object.keys(Q).length)return!1;for(const V in q)if(!isSameRouteLocationParamsValue(q[V],Q[V]))return!1;return!0}function isSameRouteLocationParamsValue(q,Q){return Array.isArray(q)?isEquivalentArray(q,Q):Array.isArray(Q)?isEquivalentArray(Q,q):q===Q}function isEquivalentArray(q,Q){return Array.isArray(Q)?q.length===Q.length&&q.every((V,de)=>V===Q[de]):q.length===1&&q[0]===Q}function resolveRelativePath(q,Q){if(q.startsWith("/"))return q;if(!q)return Q;const V=Q.split("/"),de=q.split("/");let he=V.length-1,ne,Te;for(ne=0;ne<de.length;ne++)if(Te=de[ne],!(he===1||Te==="."))if(Te==="..")he--;else break;return V.slice(0,he).join("/")+"/"+de.slice(ne-(ne===de.length?1:0)).join("/")}var NavigationType;(function(q){q.pop="pop",q.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(q){q.back="back",q.forward="forward",q.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(q){if(!q)if(isBrowser){const Q=document.querySelector("base");q=Q&&Q.getAttribute("href")||"/",q=q.replace(/^\w+:\/\/[^\/]+/,"")}else q="/";return q[0]!=="/"&&q[0]!=="#"&&(q="/"+q),removeTrailingSlash(q)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(q,Q){return q.replace(BEFORE_HASH_RE,"#")+Q}function getElementPosition(q,Q){const V=document.documentElement.getBoundingClientRect(),de=q.getBoundingClientRect();return{behavior:Q.behavior,left:de.left-V.left-(Q.left||0),top:de.top-V.top-(Q.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(q){let Q;if("el"in q){const V=q.el,de=typeof V=="string"&&V.startsWith("#"),he=typeof V=="string"?de?document.getElementById(V.slice(1)):document.querySelector(V):V;if(!he)return;Q=getElementPosition(he,q)}else Q=q;"scrollBehavior"in document.documentElement.style?window.scrollTo(Q):window.scrollTo(Q.left!=null?Q.left:window.pageXOffset,Q.top!=null?Q.top:window.pageYOffset)}function getScrollKey(q,Q){return(history.state?history.state.position-Q:-1)+q}const scrollPositions=new Map;function saveScrollPosition(q,Q){scrollPositions.set(q,Q)}function getSavedScrollPosition(q){const Q=scrollPositions.get(q);return scrollPositions.delete(q),Q}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(q,Q){const{pathname:V,search:de,hash:he}=Q,ne=q.indexOf("#");if(ne>-1){let j=he.includes(q.slice(ne))?q.slice(ne).length:1,be=he.slice(j);return be[0]!=="/"&&(be="/"+be),stripBase(be,"")}return stripBase(V,q)+de+he}function useHistoryListeners(q,Q,V,de){let he=[],ne=[],Te=null;const j=({state:Ee})=>{const Ce=createCurrentLocation(q,location),Se=V.value,Oe=Q.value;let De=0;if(Ee){if(V.value=Ce,Q.value=Ee,Te&&Te===Se){Te=null;return}De=Oe?Ee.position-Oe.position:0}else de(Ce);he.forEach(Ue=>{Ue(V.value,Se,{delta:De,type:NavigationType.pop,direction:De?De>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function be(){Te=V.value}function ce(Ee){he.push(Ee);const Ce=()=>{const Se=he.indexOf(Ee);Se>-1&&he.splice(Se,1)};return ne.push(Ce),Ce}function ye(){const{history:Ee}=window;!Ee.state||Ee.replaceState(assign$1({},Ee.state,{scroll:computeScrollPosition()}),"")}function xe(){for(const Ee of ne)Ee();ne=[],window.removeEventListener("popstate",j),window.removeEventListener("beforeunload",ye)}return window.addEventListener("popstate",j),window.addEventListener("beforeunload",ye),{pauseListeners:be,listen:ce,destroy:xe}}function buildState(q,Q,V,de=!1,he=!1){return{back:q,current:Q,forward:V,replaced:de,position:window.history.length,scroll:he?computeScrollPosition():null}}function useHistoryStateNavigation(q){const{history:Q,location:V}=window,de={value:createCurrentLocation(q,V)},he={value:Q.state};he.value||ne(de.value,{back:null,current:de.value,forward:null,position:Q.length-1,replaced:!0,scroll:null},!0);function ne(be,ce,ye){const xe=q.indexOf("#"),Ee=xe>-1?(V.host&&document.querySelector("base")?q:q.slice(xe))+be:createBaseLocation()+q+be;try{Q[ye?"replaceState":"pushState"](ce,"",Ee),he.value=ce}catch(Ce){console.error(Ce),V[ye?"replace":"assign"](Ee)}}function Te(be,ce){const ye=assign$1({},Q.state,buildState(he.value.back,be,he.value.forward,!0),ce,{position:he.value.position});ne(be,ye,!0),de.value=be}function j(be,ce){const ye=assign$1({},he.value,Q.state,{forward:be,scroll:computeScrollPosition()});ne(ye.current,ye,!0);const xe=assign$1({},buildState(de.value,be,null),{position:ye.position+1},ce);ne(be,xe,!1),de.value=be}return{location:de,state:he,push:j,replace:Te}}function createWebHistory(q){q=normalizeBase(q);const Q=useHistoryStateNavigation(q),V=useHistoryListeners(q,Q.state,Q.location,Q.replace);function de(ne,Te=!0){Te||V.pauseListeners(),history.go(ne)}const he=assign$1({location:"",base:q,go:de,createHref:createHref.bind(null,q)},Q,V);return Object.defineProperty(he,"location",{enumerable:!0,get:()=>Q.location.value}),Object.defineProperty(he,"state",{enumerable:!0,get:()=>Q.state.value}),he}function isRouteLocation(q){return typeof q=="string"||q&&typeof q=="object"}function isRouteName(q){return typeof q=="string"||typeof q=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=PolySymbol("nf");var NavigationFailureType;(function(q){q[q.aborted=4]="aborted",q[q.cancelled=8]="cancelled",q[q.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(q,Q){return assign$1(new Error,{type:q,[NavigationFailureSymbol]:!0},Q)}function isNavigationFailure(q,Q){return q instanceof Error&&NavigationFailureSymbol in q&&(Q==null||!!(q.type&Q))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(q,Q){const V=assign$1({},BASE_PATH_PARSER_OPTIONS,Q),de=[];let he=V.start?"^":"";const ne=[];for(const ce of q){const ye=ce.length?[]:[90];V.strict&&!ce.length&&(he+="/");for(let xe=0;xe<ce.length;xe++){const Ee=ce[xe];let Ce=40+(V.sensitive?.25:0);if(Ee.type===0)xe||(he+="/"),he+=Ee.value.replace(REGEX_CHARS_RE,"\\$&"),Ce+=40;else if(Ee.type===1){const{value:Se,repeatable:Oe,optional:De,regexp:Ue}=Ee;ne.push({name:Se,repeatable:Oe,optional:De});const $e=Ue||BASE_PARAM_PATTERN;if($e!==BASE_PARAM_PATTERN){Ce+=10;try{new RegExp(`(${$e})`)}catch(Xe){throw new Error(`Invalid custom RegExp for param "${Se}" (${$e}): `+Xe.message)}}let Fe=Oe?`((?:${$e})(?:/(?:${$e}))*)`:`(${$e})`;xe||(Fe=De&&ce.length<2?`(?:/${Fe})`:"/"+Fe),De&&(Fe+="?"),he+=Fe,Ce+=20,De&&(Ce+=-8),Oe&&(Ce+=-20),$e===".*"&&(Ce+=-50)}ye.push(Ce)}de.push(ye)}if(V.strict&&V.end){const ce=de.length-1;de[ce][de[ce].length-1]+=.7000000000000001}V.strict||(he+="/?"),V.end?he+="$":V.strict&&(he+="(?:/|$)");const Te=new RegExp(he,V.sensitive?"":"i");function j(ce){const ye=ce.match(Te),xe={};if(!ye)return null;for(let Ee=1;Ee<ye.length;Ee++){const Ce=ye[Ee]||"",Se=ne[Ee-1];xe[Se.name]=Ce&&Se.repeatable?Ce.split("/"):Ce}return xe}function be(ce){let ye="",xe=!1;for(const Ee of q){(!xe||!ye.endsWith("/"))&&(ye+="/"),xe=!1;for(const Ce of Ee)if(Ce.type===0)ye+=Ce.value;else if(Ce.type===1){const{value:Se,repeatable:Oe,optional:De}=Ce,Ue=Se in ce?ce[Se]:"";if(Array.isArray(Ue)&&!Oe)throw new Error(`Provided param "${Se}" is an array but it is not repeatable (* or + modifiers)`);const $e=Array.isArray(Ue)?Ue.join("/"):Ue;if(!$e)if(De)Ee.length<2&&(ye.endsWith("/")?ye=ye.slice(0,-1):xe=!0);else throw new Error(`Missing required param "${Se}"`);ye+=$e}}return ye}return{re:Te,score:de,keys:ne,parse:j,stringify:be}}function compareScoreArray(q,Q){let V=0;for(;V<q.length&&V<Q.length;){const de=Q[V]-q[V];if(de)return de;V++}return q.length<Q.length?q.length===1&&q[0]===40+40?-1:1:q.length>Q.length?Q.length===1&&Q[0]===40+40?1:-1:0}function comparePathParserScore(q,Q){let V=0;const de=q.score,he=Q.score;for(;V<de.length&&V<he.length;){const ne=compareScoreArray(de[V],he[V]);if(ne)return ne;V++}return he.length-de.length}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(q){if(!q)return[[]];if(q==="/")return[[ROOT_TOKEN]];if(!q.startsWith("/"))throw new Error(`Invalid path "${q}"`);function Q(Ce){throw new Error(`ERR (${V})/"${ce}": ${Ce}`)}let V=0,de=V;const he=[];let ne;function Te(){ne&&he.push(ne),ne=[]}let j=0,be,ce="",ye="";function xe(){!ce||(V===0?ne.push({type:0,value:ce}):V===1||V===2||V===3?(ne.length>1&&(be==="*"||be==="+")&&Q(`A repeatable param (${ce}) must be alone in its segment. eg: '/:ids+.`),ne.push({type:1,value:ce,regexp:ye,repeatable:be==="*"||be==="+",optional:be==="*"||be==="?"})):Q("Invalid state to consume buffer"),ce="")}function Ee(){ce+=be}for(;j<q.length;){if(be=q[j++],be==="\\"&&V!==2){de=V,V=4;continue}switch(V){case 0:be==="/"?(ce&&xe(),Te()):be===":"?(xe(),V=1):Ee();break;case 4:Ee(),V=de;break;case 1:be==="("?V=2:VALID_PARAM_RE.test(be)?Ee():(xe(),V=0,be!=="*"&&be!=="?"&&be!=="+"&&j--);break;case 2:be===")"?ye[ye.length-1]=="\\"?ye=ye.slice(0,-1)+be:V=3:ye+=be;break;case 3:xe(),V=0,be!=="*"&&be!=="?"&&be!=="+"&&j--,ye="";break;default:Q("Unknown state");break}}return V===2&&Q(`Unfinished custom RegExp for param "${ce}"`),xe(),Te(),he}function createRouteRecordMatcher(q,Q,V){const de=tokensToParser(tokenizePath(q.path),V),he=assign$1(de,{record:q,parent:Q,children:[],alias:[]});return Q&&!he.record.aliasOf==!Q.record.aliasOf&&Q.children.push(he),he}function createRouterMatcher(q,Q){const V=[],de=new Map;Q=mergeOptions({strict:!1,end:!0,sensitive:!1},Q);function he(ye){return de.get(ye)}function ne(ye,xe,Ee){const Ce=!Ee,Se=normalizeRouteRecord(ye);Se.aliasOf=Ee&&Ee.record;const Oe=mergeOptions(Q,ye),De=[Se];if("alias"in ye){const Fe=typeof ye.alias=="string"?[ye.alias]:ye.alias;for(const Xe of Fe)De.push(assign$1({},Se,{components:Ee?Ee.record.components:Se.components,path:Xe,aliasOf:Ee?Ee.record:Se}))}let Ue,$e;for(const Fe of De){const{path:Xe}=Fe;if(xe&&Xe[0]!=="/"){const Ye=xe.record.path,He=Ye[Ye.length-1]==="/"?"":"/";Fe.path=xe.record.path+(Xe&&He+Xe)}if(Ue=createRouteRecordMatcher(Fe,xe,Oe),Ee?Ee.alias.push(Ue):($e=$e||Ue,$e!==Ue&&$e.alias.push(Ue),Ce&&ye.name&&!isAliasRecord(Ue)&&Te(ye.name)),"children"in Se){const Ye=Se.children;for(let He=0;He<Ye.length;He++)ne(Ye[He],Ue,Ee&&Ee.children[He])}Ee=Ee||Ue,be(Ue)}return $e?()=>{Te($e)}:noop$1}function Te(ye){if(isRouteName(ye)){const xe=de.get(ye);xe&&(de.delete(ye),V.splice(V.indexOf(xe),1),xe.children.forEach(Te),xe.alias.forEach(Te))}else{const xe=V.indexOf(ye);xe>-1&&(V.splice(xe,1),ye.record.name&&de.delete(ye.record.name),ye.children.forEach(Te),ye.alias.forEach(Te))}}function j(){return V}function be(ye){let xe=0;for(;xe<V.length&&comparePathParserScore(ye,V[xe])>=0&&(ye.record.path!==V[xe].record.path||!isRecordChildOf(ye,V[xe]));)xe++;V.splice(xe,0,ye),ye.record.name&&!isAliasRecord(ye)&&de.set(ye.record.name,ye)}function ce(ye,xe){let Ee,Ce={},Se,Oe;if("name"in ye&&ye.name){if(Ee=de.get(ye.name),!Ee)throw createRouterError(1,{location:ye});Oe=Ee.record.name,Ce=assign$1(paramsFromLocation(xe.params,Ee.keys.filter($e=>!$e.optional).map($e=>$e.name)),ye.params),Se=Ee.stringify(Ce)}else if("path"in ye)Se=ye.path,Ee=V.find($e=>$e.re.test(Se)),Ee&&(Ce=Ee.parse(Se),Oe=Ee.record.name);else{if(Ee=xe.name?de.get(xe.name):V.find($e=>$e.re.test(xe.path)),!Ee)throw createRouterError(1,{location:ye,currentLocation:xe});Oe=Ee.record.name,Ce=assign$1({},xe.params,ye.params),Se=Ee.stringify(Ce)}const De=[];let Ue=Ee;for(;Ue;)De.unshift(Ue.record),Ue=Ue.parent;return{name:Oe,path:Se,params:Ce,matched:De,meta:mergeMetaFields(De)}}return q.forEach(ye=>ne(ye)),{addRoute:ne,resolve:ce,removeRoute:Te,getRoutes:j,getRecordMatcher:he}}function paramsFromLocation(q,Q){const V={};for(const de of Q)de in q&&(V[de]=q[de]);return V}function normalizeRouteRecord(q){return{path:q.path,redirect:q.redirect,name:q.name,meta:q.meta||{},aliasOf:void 0,beforeEnter:q.beforeEnter,props:normalizeRecordProps(q),children:q.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in q?q.components||{}:{default:q.component}}}function normalizeRecordProps(q){const Q={},V=q.props||!1;if("component"in q)Q.default=V;else for(const de in q.components)Q[de]=typeof V=="boolean"?V:V[de];return Q}function isAliasRecord(q){for(;q;){if(q.record.aliasOf)return!0;q=q.parent}return!1}function mergeMetaFields(q){return q.reduce((Q,V)=>assign$1(Q,V.meta),{})}function mergeOptions(q,Q){const V={};for(const de in q)V[de]=de in Q?Q[de]:q[de];return V}function isRecordChildOf(q,Q){return Q.children.some(V=>V===q||isRecordChildOf(q,V))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(q){return encodeURI(""+q).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(q){return commonEncode(q).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(q){return commonEncode(q).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(q){return encodeQueryValue(q).replace(EQUAL_RE,"%3D")}function encodePath(q){return commonEncode(q).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(q){return q==null?"":encodePath(q).replace(SLASH_RE,"%2F")}function decode(q){try{return decodeURIComponent(""+q)}catch{}return""+q}function parseQuery(q){const Q={};if(q===""||q==="?")return Q;const de=(q[0]==="?"?q.slice(1):q).split("&");for(let he=0;he<de.length;++he){const ne=de[he].replace(PLUS_RE," "),Te=ne.indexOf("="),j=decode(Te<0?ne:ne.slice(0,Te)),be=Te<0?null:decode(ne.slice(Te+1));if(j in Q){let ce=Q[j];Array.isArray(ce)||(ce=Q[j]=[ce]),ce.push(be)}else Q[j]=be}return Q}function stringifyQuery(q){let Q="";for(let V in q){const de=q[V];if(V=encodeQueryKey(V),de==null){de!==void 0&&(Q+=(Q.length?"&":"")+V);continue}(Array.isArray(de)?de.map(ne=>ne&&encodeQueryValue(ne)):[de&&encodeQueryValue(de)]).forEach(ne=>{ne!==void 0&&(Q+=(Q.length?"&":"")+V,ne!=null&&(Q+="="+ne))})}return Q}function normalizeQuery(q){const Q={};for(const V in q){const de=q[V];de!==void 0&&(Q[V]=Array.isArray(de)?de.map(he=>he==null?null:""+he):de==null?de:""+de)}return Q}function useCallbacks(){let q=[];function Q(de){return q.push(de),()=>{const he=q.indexOf(de);he>-1&&q.splice(he,1)}}function V(){q=[]}return{add:Q,list:()=>q,reset:V}}function guardToPromiseFn(q,Q,V,de,he){const ne=de&&(de.enterCallbacks[he]=de.enterCallbacks[he]||[]);return()=>new Promise((Te,j)=>{const be=xe=>{xe===!1?j(createRouterError(4,{from:V,to:Q})):xe instanceof Error?j(xe):isRouteLocation(xe)?j(createRouterError(2,{from:Q,to:xe})):(ne&&de.enterCallbacks[he]===ne&&typeof xe=="function"&&ne.push(xe),Te())},ce=q.call(de&&de.instances[he],Q,V,be);let ye=Promise.resolve(ce);q.length<3&&(ye=ye.then(be)),ye.catch(xe=>j(xe))})}function extractComponentsGuards(q,Q,V,de){const he=[];for(const ne of q)for(const Te in ne.components){let j=ne.components[Te];if(!(Q!=="beforeRouteEnter"&&!ne.instances[Te]))if(isRouteComponent(j)){const ce=(j.__vccOpts||j)[Q];ce&&he.push(guardToPromiseFn(ce,V,de,ne,Te))}else{let be=j();he.push(()=>be.then(ce=>{if(!ce)return Promise.reject(new Error(`Couldn't resolve component "${Te}" at "${ne.path}"`));const ye=isESModule(ce)?ce.default:ce;ne.components[Te]=ye;const Ee=(ye.__vccOpts||ye)[Q];return Ee&&guardToPromiseFn(Ee,V,de,ne,Te)()}))}}return he}function isRouteComponent(q){return typeof q=="object"||"displayName"in q||"props"in q||"__vccOpts"in q}function useLink(q){const Q=inject(routerKey),V=inject(routeLocationKey),de=computed(()=>Q.resolve(unref(q.to))),he=computed(()=>{const{matched:be}=de.value,{length:ce}=be,ye=be[ce-1],xe=V.matched;if(!ye||!xe.length)return-1;const Ee=xe.findIndex(isSameRouteRecord.bind(null,ye));if(Ee>-1)return Ee;const Ce=getOriginalPath(be[ce-2]);return ce>1&&getOriginalPath(ye)===Ce&&xe[xe.length-1].path!==Ce?xe.findIndex(isSameRouteRecord.bind(null,be[ce-2])):Ee}),ne=computed(()=>he.value>-1&&includesParams(V.params,de.value.params)),Te=computed(()=>he.value>-1&&he.value===V.matched.length-1&&isSameRouteLocationParams(V.params,de.value.params));function j(be={}){return guardEvent(be)?Q[unref(q.replace)?"replace":"push"](unref(q.to)).catch(noop$1):Promise.resolve()}return{route:de,href:computed(()=>de.value.href),isActive:ne,isExactActive:Te,navigate:j}}const RouterLinkImpl=defineComponent({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(q,{slots:Q}){const V=reactive(useLink(q)),{options:de}=inject(routerKey),he=computed(()=>({[getLinkClass(q.activeClass,de.linkActiveClass,"router-link-active")]:V.isActive,[getLinkClass(q.exactActiveClass,de.linkExactActiveClass,"router-link-exact-active")]:V.isExactActive}));return()=>{const ne=Q.default&&Q.default(V);return q.custom?ne:h$3("a",{"aria-current":V.isExactActive?q.ariaCurrentValue:null,href:V.href,onClick:V.navigate,class:he.value},ne)}}}),RouterLink=RouterLinkImpl;function guardEvent(q){if(!(q.metaKey||q.altKey||q.ctrlKey||q.shiftKey)&&!q.defaultPrevented&&!(q.button!==void 0&&q.button!==0)){if(q.currentTarget&&q.currentTarget.getAttribute){const Q=q.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(Q))return}return q.preventDefault&&q.preventDefault(),!0}}function includesParams(q,Q){for(const V in Q){const de=Q[V],he=q[V];if(typeof de=="string"){if(de!==he)return!1}else if(!Array.isArray(he)||he.length!==de.length||de.some((ne,Te)=>ne!==he[Te]))return!1}return!0}function getOriginalPath(q){return q?q.aliasOf?q.aliasOf.path:q.path:""}const getLinkClass=(q,Q,V)=>q!=null?q:Q!=null?Q:V,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(q,{attrs:Q,slots:V}){const de=inject(routerViewLocationKey),he=computed(()=>q.route||de.value),ne=inject(viewDepthKey,0),Te=computed(()=>he.value.matched[ne]);provide(viewDepthKey,ne+1),provide(matchedRouteKey,Te),provide(routerViewLocationKey,he);const j=ref();return watch(()=>[j.value,Te.value,q.name],([be,ce,ye],[xe,Ee,Ce])=>{ce&&(ce.instances[ye]=be,Ee&&Ee!==ce&&be&&be===xe&&(ce.leaveGuards.size||(ce.leaveGuards=Ee.leaveGuards),ce.updateGuards.size||(ce.updateGuards=Ee.updateGuards))),be&&ce&&(!Ee||!isSameRouteRecord(ce,Ee)||!xe)&&(ce.enterCallbacks[ye]||[]).forEach(Se=>Se(be))},{flush:"post"}),()=>{const be=he.value,ce=Te.value,ye=ce&&ce.components[q.name],xe=q.name;if(!ye)return normalizeSlot(V.default,{Component:ye,route:be});const Ee=ce.props[q.name],Ce=Ee?Ee===!0?be.params:typeof Ee=="function"?Ee(be):Ee:null,Oe=h$3(ye,assign$1({},Ce,Q,{onVnodeUnmounted:De=>{De.component.isUnmounted&&(ce.instances[xe]=null)},ref:j}));return normalizeSlot(V.default,{Component:Oe,route:be})||Oe}}});function normalizeSlot(q,Q){if(!q)return null;const V=q(Q);return V.length===1?V[0]:V}const RouterView=RouterViewImpl;function createRouter(q){const Q=createRouterMatcher(q.routes,q),V=q.parseQuery||parseQuery,de=q.stringifyQuery||stringifyQuery,he=q.history,ne=useCallbacks(),Te=useCallbacks(),j=useCallbacks(),be=shallowRef(START_LOCATION_NORMALIZED);let ce=START_LOCATION_NORMALIZED;isBrowser&&q.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const ye=applyToParams.bind(null,on=>""+on),xe=applyToParams.bind(null,encodeParam),Ee=applyToParams.bind(null,decode);function Ce(on,an){let Xt,Rt;return isRouteName(on)?(Xt=Q.getRecordMatcher(on),Rt=an):Rt=on,Q.addRoute(Rt,Xt)}function Se(on){const an=Q.getRecordMatcher(on);an&&Q.removeRoute(an)}function Oe(){return Q.getRoutes().map(on=>on.record)}function De(on){return!!Q.getRecordMatcher(on)}function Ue(on,an){if(an=assign$1({},an||be.value),typeof on=="string"){const Pn=parseURL(V,on,an.path),Pt=Q.resolve({path:Pn.path},an),Dt=he.createHref(Pn.fullPath);return assign$1(Pn,Pt,{params:Ee(Pt.params),hash:decode(Pn.hash),redirectedFrom:void 0,href:Dt})}let Xt;if("path"in on)Xt=assign$1({},on,{path:parseURL(V,on.path,an.path).path});else{const Pn=assign$1({},on.params);for(const Pt in Pn)Pn[Pt]==null&&delete Pn[Pt];Xt=assign$1({},on,{params:xe(on.params)}),an.params=xe(an.params)}const Rt=Q.resolve(Xt,an),en=on.hash||"";Rt.params=ye(Ee(Rt.params));const hn=stringifyURL(de,assign$1({},on,{hash:encodeHash(en),path:Rt.path})),vn=he.createHref(hn);return assign$1({fullPath:hn,hash:en,query:de===stringifyQuery?normalizeQuery(on.query):on.query||{}},Rt,{redirectedFrom:void 0,href:vn})}function $e(on){return typeof on=="string"?parseURL(V,on,be.value.path):assign$1({},on)}function Fe(on,an){if(ce!==on)return createRouterError(8,{from:an,to:on})}function Xe(on){return Je(on)}function Ye(on){return Xe(assign$1($e(on),{replace:!0}))}function He(on){const an=on.matched[on.matched.length-1];if(an&&an.redirect){const{redirect:Xt}=an;let Rt=typeof Xt=="function"?Xt(on):Xt;return typeof Rt=="string"&&(Rt=Rt.includes("?")||Rt.includes("#")?Rt=$e(Rt):{path:Rt},Rt.params={}),assign$1({query:on.query,hash:on.hash,params:on.params},Rt)}}function Je(on,an){const Xt=ce=Ue(on),Rt=be.value,en=on.state,hn=on.force,vn=on.replace===!0,Pn=He(Xt);if(Pn)return Je(assign$1($e(Pn),{state:en,force:hn,replace:vn}),an||Xt);const Pt=Xt;Pt.redirectedFrom=an;let Dt;return!hn&&isSameRouteLocation(de,Rt,Xt)&&(Dt=createRouterError(16,{to:Pt,from:Rt}),Vt(Rt,Rt,!0,!1)),(Dt?Promise.resolve(Dt):It(Pt,Rt)).catch(rn=>isNavigationFailure(rn)?isNavigationFailure(rn,2)?rn:ht(rn):ft(rn,Pt,Rt)).then(rn=>{if(rn){if(isNavigationFailure(rn,2))return Je(assign$1($e(rn.to),{state:en,force:hn,replace:vn}),an||Pt)}else rn=bt(Pt,Rt,!0,vn,en);return At(Pt,Rt,rn),rn})}function pt(on,an){const Xt=Fe(on,an);return Xt?Promise.reject(Xt):Promise.resolve()}function It(on,an){let Xt;const[Rt,en,hn]=extractChangingRecords(on,an);Xt=extractComponentsGuards(Rt.reverse(),"beforeRouteLeave",on,an);for(const Pn of Rt)Pn.leaveGuards.forEach(Pt=>{Xt.push(guardToPromiseFn(Pt,on,an))});const vn=pt.bind(null,on,an);return Xt.push(vn),runGuardQueue(Xt).then(()=>{Xt=[];for(const Pn of ne.list())Xt.push(guardToPromiseFn(Pn,on,an));return Xt.push(vn),runGuardQueue(Xt)}).then(()=>{Xt=extractComponentsGuards(en,"beforeRouteUpdate",on,an);for(const Pn of en)Pn.updateGuards.forEach(Pt=>{Xt.push(guardToPromiseFn(Pt,on,an))});return Xt.push(vn),runGuardQueue(Xt)}).then(()=>{Xt=[];for(const Pn of on.matched)if(Pn.beforeEnter&&!an.matched.includes(Pn))if(Array.isArray(Pn.beforeEnter))for(const Pt of Pn.beforeEnter)Xt.push(guardToPromiseFn(Pt,on,an));else Xt.push(guardToPromiseFn(Pn.beforeEnter,on,an));return Xt.push(vn),runGuardQueue(Xt)}).then(()=>(on.matched.forEach(Pn=>Pn.enterCallbacks={}),Xt=extractComponentsGuards(hn,"beforeRouteEnter",on,an),Xt.push(vn),runGuardQueue(Xt))).then(()=>{Xt=[];for(const Pn of Te.list())Xt.push(guardToPromiseFn(Pn,on,an));return Xt.push(vn),runGuardQueue(Xt)}).catch(Pn=>isNavigationFailure(Pn,8)?Pn:Promise.reject(Pn))}function At(on,an,Xt){for(const Rt of j.list())Rt(on,an,Xt)}function bt(on,an,Xt,Rt,en){const hn=Fe(on,an);if(hn)return hn;const vn=an===START_LOCATION_NORMALIZED,Pn=isBrowser?history.state:{};Xt&&(Rt||vn?he.replace(on.fullPath,assign$1({scroll:vn&&Pn&&Pn.scroll},en)):he.push(on.fullPath,en)),be.value=on,Vt(on,an,Xt,vn),ht()}let rt;function nt(){rt=he.listen((on,an,Xt)=>{const Rt=Ue(on),en=He(Rt);if(en){Je(assign$1(en,{replace:!0}),Rt).catch(noop$1);return}ce=Rt;const hn=be.value;isBrowser&&saveScrollPosition(getScrollKey(hn.fullPath,Xt.delta),computeScrollPosition()),It(Rt,hn).catch(vn=>isNavigationFailure(vn,12)?vn:isNavigationFailure(vn,2)?(Je(vn.to,Rt).then(Pn=>{isNavigationFailure(Pn,20)&&!Xt.delta&&Xt.type===NavigationType.pop&&he.go(-1,!1)}).catch(noop$1),Promise.reject()):(Xt.delta&&he.go(-Xt.delta,!1),ft(vn,Rt,hn))).then(vn=>{vn=vn||bt(Rt,hn,!1),vn&&(Xt.delta?he.go(-Xt.delta,!1):Xt.type===NavigationType.pop&&isNavigationFailure(vn,20)&&he.go(-1,!1)),At(Rt,hn,vn)}).catch(noop$1)})}let it=useCallbacks(),dt=useCallbacks(),lt;function ft(on,an,Xt){ht(on);const Rt=dt.list();return Rt.length?Rt.forEach(en=>en(on,an,Xt)):console.error(on),Promise.reject(on)}function xt(){return lt&&be.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((on,an)=>{it.add([on,an])})}function ht(on){return lt||(lt=!on,nt(),it.list().forEach(([an,Xt])=>on?Xt(on):an()),it.reset()),on}function Vt(on,an,Xt,Rt){const{scrollBehavior:en}=q;if(!isBrowser||!en)return Promise.resolve();const hn=!Xt&&getSavedScrollPosition(getScrollKey(on.fullPath,0))||(Rt||!Xt)&&history.state&&history.state.scroll||null;return nextTick().then(()=>en(on,an,hn)).then(vn=>vn&&scrollToPosition(vn)).catch(vn=>ft(vn,on,an))}const st=on=>he.go(on);let $t;const ln=new Set;return{currentRoute:be,addRoute:Ce,removeRoute:Se,hasRoute:De,getRoutes:Oe,resolve:Ue,options:q,push:Xe,replace:Ye,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:ne.add,beforeResolve:Te.add,afterEach:j.add,onError:dt.add,isReady:xt,install(on){const an=this;on.component("RouterLink",RouterLink),on.component("RouterView",RouterView),on.config.globalProperties.$router=an,Object.defineProperty(on.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(be)}),isBrowser&&!$t&&be.value===START_LOCATION_NORMALIZED&&($t=!0,Xe(he.location).catch(en=>{}));const Xt={};for(const en in START_LOCATION_NORMALIZED)Xt[en]=computed(()=>be.value[en]);on.provide(routerKey,an),on.provide(routeLocationKey,reactive(Xt)),on.provide(routerViewLocationKey,be);const Rt=on.unmount;ln.add(on),on.unmount=function(){ln.delete(on),ln.size<1&&(ce=START_LOCATION_NORMALIZED,rt&&rt(),be.value=START_LOCATION_NORMALIZED,$t=!1,lt=!1),Rt()}}}}function runGuardQueue(q){return q.reduce((Q,V)=>Q.then(()=>V()),Promise.resolve())}function extractChangingRecords(q,Q){const V=[],de=[],he=[],ne=Math.max(Q.matched.length,q.matched.length);for(let Te=0;Te<ne;Te++){const j=Q.matched[Te];j&&(q.matched.find(ce=>isSameRouteRecord(ce,j))?de.push(j):V.push(j));const be=q.matched[Te];be&&(Q.matched.find(ce=>isSameRouteRecord(ce,be))||he.push(be))}return[V,de,he]}function useRouter(){return inject(routerKey)}try{self["workbox:window:6.5.2"]&&_()}catch{}function n$2(q,Q){return new Promise(function(V){var de=new MessageChannel;de.port1.onmessage=function(he){V(he.data)},q.postMessage(Q,[de.port2])})}function t$2(q,Q){for(var V=0;V<Q.length;V++){var de=Q[V];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(q,de.key,de)}}function r$4(q,Q){(Q==null||Q>q.length)&&(Q=q.length);for(var V=0,de=new Array(Q);V<Q;V++)de[V]=q[V];return de}function e$3(q,Q){var V;if(typeof Symbol=="undefined"||q[Symbol.iterator]==null){if(Array.isArray(q)||(V=function(he,ne){if(he){if(typeof he=="string")return r$4(he,ne);var Te=Object.prototype.toString.call(he).slice(8,-1);return Te==="Object"&&he.constructor&&(Te=he.constructor.name),Te==="Map"||Te==="Set"?Array.from(he):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?r$4(he,ne):void 0}}(q))||Q&&q&&typeof q.length=="number"){V&&(q=V);var de=0;return function(){return de>=q.length?{done:!0}:{done:!1,value:q[de++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(V=q[Symbol.iterator]()).next.bind(V)}try{self["workbox:core:6.5.2"]&&_()}catch{}var i$2=function(){var q=this;this.promise=new Promise(function(Q,V){q.resolve=Q,q.reject=V})};function o$1(q,Q){var V=location.href;return new URL(q,V).href===new URL(Q,V).href}var u$5=function(q,Q){this.type=q,Object.assign(this,Q)};function a$4(q,Q,V){return V?Q?Q(q):q:(q&&q.then||(q=Promise.resolve(q)),Q?q.then(Q):q)}function c$3(){}var f$2={type:"SKIP_WAITING"};function s$3(q,Q){if(!Q)return q&&q.then?q.then(c$3):Promise.resolve()}var v$2=function(q){var Q,V;function de(j,be){var ce,ye;return be===void 0&&(be={}),(ce=q.call(this)||this).nn={},ce.tn=0,ce.rn=new i$2,ce.en=new i$2,ce.on=new i$2,ce.un=0,ce.an=new Set,ce.cn=function(){var xe=ce.fn,Ee=xe.installing;ce.tn>0||!o$1(Ee.scriptURL,ce.sn.toString())||performance.now()>ce.un+6e4?(ce.vn=Ee,xe.removeEventListener("updatefound",ce.cn)):(ce.hn=Ee,ce.an.add(Ee),ce.rn.resolve(Ee)),++ce.tn,Ee.addEventListener("statechange",ce.ln)},ce.ln=function(xe){var Ee=ce.fn,Ce=xe.target,Se=Ce.state,Oe=Ce===ce.vn,De={sw:Ce,isExternal:Oe,originalEvent:xe};!Oe&&ce.mn&&(De.isUpdate=!0),ce.dispatchEvent(new u$5(Se,De)),Se==="installed"?ce.wn=self.setTimeout(function(){Se==="installed"&&Ee.waiting===Ce&&ce.dispatchEvent(new u$5("waiting",De))},200):Se==="activating"&&(clearTimeout(ce.wn),Oe||ce.en.resolve(Ce))},ce.dn=function(xe){var Ee=ce.hn,Ce=Ee!==navigator.serviceWorker.controller;ce.dispatchEvent(new u$5("controlling",{isExternal:Ce,originalEvent:xe,sw:Ee,isUpdate:ce.mn})),Ce||ce.on.resolve(Ee)},ce.gn=(ye=function(xe){var Ee=xe.data,Ce=xe.ports,Se=xe.source;return a$4(ce.getSW(),function(){ce.an.has(Se)&&ce.dispatchEvent(new u$5("message",{data:Ee,originalEvent:xe,ports:Ce,sw:Se}))})},function(){for(var xe=[],Ee=0;Ee<arguments.length;Ee++)xe[Ee]=arguments[Ee];try{return Promise.resolve(ye.apply(this,xe))}catch(Ce){return Promise.reject(Ce)}}),ce.sn=j,ce.nn=be,navigator.serviceWorker.addEventListener("message",ce.gn),ce}V=q,(Q=de).prototype=Object.create(V.prototype),Q.prototype.constructor=Q,Q.__proto__=V;var he,ne,Te=de.prototype;return Te.register=function(j){var be=(j===void 0?{}:j).immediate,ce=be!==void 0&&be;try{var ye=this;return function(xe,Ee){var Ce=xe();return Ce&&Ce.then?Ce.then(Ee):Ee(Ce)}(function(){if(!ce&&document.readyState!=="complete")return s$3(new Promise(function(xe){return window.addEventListener("load",xe)}))},function(){return ye.mn=Boolean(navigator.serviceWorker.controller),ye.yn=ye.pn(),a$4(ye.bn(),function(xe){ye.fn=xe,ye.yn&&(ye.hn=ye.yn,ye.en.resolve(ye.yn),ye.on.resolve(ye.yn),ye.yn.addEventListener("statechange",ye.ln,{once:!0}));var Ee=ye.fn.waiting;return Ee&&o$1(Ee.scriptURL,ye.sn.toString())&&(ye.hn=Ee,Promise.resolve().then(function(){ye.dispatchEvent(new u$5("waiting",{sw:Ee,wasWaitingBeforeRegister:!0}))}).then(function(){})),ye.hn&&(ye.rn.resolve(ye.hn),ye.an.add(ye.hn)),ye.fn.addEventListener("updatefound",ye.cn),navigator.serviceWorker.addEventListener("controllerchange",ye.dn),ye.fn})})}catch(xe){return Promise.reject(xe)}},Te.update=function(){try{return this.fn?s$3(this.fn.update()):void 0}catch(j){return Promise.reject(j)}},Te.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},Te.messageSW=function(j){try{return a$4(this.getSW(),function(be){return n$2(be,j)})}catch(be){return Promise.reject(be)}},Te.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n$2(this.fn.waiting,f$2)},Te.pn=function(){var j=navigator.serviceWorker.controller;return j&&o$1(j.scriptURL,this.sn.toString())?j:void 0},Te.bn=function(){try{var j=this;return function(be,ce){try{var ye=be()}catch(xe){return ce(xe)}return ye&&ye.then?ye.then(void 0,ce):ye}(function(){return a$4(navigator.serviceWorker.register(j.sn,j.nn),function(be){return j.un=performance.now(),be})},function(be){throw be})}catch(be){return Promise.reject(be)}},he=de,(ne=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&t$2(he.prototype,ne),de}(function(){function q(){this.Pn=new Map}var Q=q.prototype;return Q.addEventListener=function(V,de){this.Sn(V).add(de)},Q.removeEventListener=function(V,de){this.Sn(V).delete(de)},Q.dispatchEvent=function(V){V.target=this;for(var de,he=e$3(this.Sn(V.type));!(de=he()).done;)(0,de.value)(V)},Q.Sn=function(V){return this.Pn.has(V)||this.Pn.set(V,new Set),this.Pn.get(V)},q}()),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}var media={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"};const{webm,mp4}=media,oldIOS=()=>typeof navigator!="undefined"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,nativeWakeLock=()=>"wakeLock"in navigator;class NoSleep{constructor(){if(this.enabled=!1,nativeWakeLock()){this._wakeLock=null;const Q=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",Q),document.addEventListener("fullscreenchange",Q)}else oldIOS()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",webm),this._addSourceToVideo(this.noSleepVideo,"mp4",mp4),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(Q,V,de){var he=document.createElement("source");he.src=de,he.type=`video/${V}`,Q.appendChild(he)}get isEnabled(){return this.enabled}enable(){return nativeWakeLock()?navigator.wakeLock.request("screen").then(Q=>{this._wakeLock=Q,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(Q=>{throw this.enabled=!1,console.error(`${Q.name}, ${Q.message}`),Q}):oldIOS()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(V=>(this.enabled=!0,V)).catch(V=>{throw this.enabled=!1,V})}disable(){nativeWakeLock()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):oldIOS()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var src=NoSleep;function u$4(q,Q,...V){if(q in Q){let he=Q[q];return typeof he=="function"?he(...V):he}let de=new Error(`Tried to handle "${q}" but there is no handler defined. Only defined handlers are: ${Object.keys(Q).map(he=>`"${he}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(de,u$4),de}var m$1=(q=>(q[q.None=0]="None",q[q.RenderStrategy=1]="RenderStrategy",q[q.Static=2]="Static",q))(m$1||{}),h$2=(q=>(q[q.Unmount=0]="Unmount",q[q.Hidden=1]="Hidden",q))(h$2||{});function k(de){var he=de,{visible:q=!0,features:Q=0}=he,V=Es(he,["visible","features"]);var ne;if(q||Q&2&&V.props.static)return a$3(V);if(Q&1){let Te=(ne=V.props.unmount)==null||ne?0:1;return u$4(Te,{[0](){return null},[1](){return a$3(Qo(Yr({},V),{props:Qo(Yr({},V.props),{hidden:!0,style:{display:"none"}})}))}})}return a$3(V)}function a$3({props:q,attrs:Q,slots:V,slot:de,name:he}){var ne;let ce=R$2(q,["unmount","static"]),{as:Te}=ce,j=Es(ce,["as"]),be=(ne=V.default)==null?void 0:ne.call(V,de);if(Te==="template"){if(Object.keys(j).length>0||Object.keys(Q).length>0){let[ye,...xe]=be!=null?be:[];if(!b$3(ye)||xe.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${he} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(j).concat(Object.keys(Q)).map(Ee=>`  - ${Ee}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(Ee=>`  - ${Ee}`).join(`
`)].join(`
`));return cloneVNode(ye,j)}return Array.isArray(be)&&be.length===1?be[0]:be}return h$3(Te,j,be)}function O(q){let Q=Object.assign({},q);for(let V in Q)Q[V]===void 0&&delete Q[V];return Q}function R$2(q,Q=[]){let V=Object.assign({},q);for(let de of Q)de in V&&delete V[de];return V}function b$3(q){return q==null?!1:typeof q.type=="string"||typeof q.type=="object"||typeof q.type=="function"}let e$2=0;function n$1(){return++e$2}function t$1(){return n$1()}var o=(q=>(q.Space=" ",q.Enter="Enter",q.Escape="Escape",q.Backspace="Backspace",q.Delete="Delete",q.ArrowLeft="ArrowLeft",q.ArrowUp="ArrowUp",q.ArrowRight="ArrowRight",q.ArrowDown="ArrowDown",q.Home="Home",q.End="End",q.PageUp="PageUp",q.PageDown="PageDown",q.Tab="Tab",q))(o||{});function f$1(q){throw new Error("Unexpected object: "+q)}var a$2=(q=>(q[q.First=0]="First",q[q.Previous=1]="Previous",q[q.Next=2]="Next",q[q.Last=3]="Last",q[q.Specific=4]="Specific",q[q.Nothing=5]="Nothing",q))(a$2||{});function x$4(q,Q){let V=Q.resolveItems();if(V.length<=0)return null;let de=Q.resolveActiveIndex(),he=de!=null?de:-1,ne=(()=>{switch(q.focus){case 0:return V.findIndex(Te=>!Q.resolveDisabled(Te));case 1:{let Te=V.slice().reverse().findIndex((j,be,ce)=>he!==-1&&ce.length-be-1>=he?!1:!Q.resolveDisabled(j));return Te===-1?Te:V.length-1-Te}case 2:return V.findIndex((Te,j)=>j<=he?!1:!Q.resolveDisabled(Te));case 3:{let Te=V.slice().reverse().findIndex(j=>!Q.resolveDisabled(j));return Te===-1?Te:V.length-1-Te}case 4:return V.findIndex(Te=>Q.resolveId(Te)===q.id);case 5:return null;default:f$1(q)}})();return ne===-1?de:ne}function t(q){return q==null||q.value==null?null:"$el"in q.value?q.value.$el:q.value}let n=Symbol("Context");var l$3=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(l$3||{});function f(){return p$4()!==null}function p$4(){return inject(n,null)}function c$2(q){provide(n,q)}function r$3(q,Q){if(q)return q;let V=Q!=null?Q:"button";if(typeof V=="string"&&V.toLowerCase()==="button")return"button"}function b$2(q,Q){let V=ref(r$3(q.value.type,q.value.as));return onMounted(()=>{V.value=r$3(q.value.type,q.value.as)}),watchEffect(()=>{var de;V.value||!t(Q)||t(Q)instanceof HTMLButtonElement&&!((de=t(Q))!=null&&de.hasAttribute("type"))&&(V.value="button")}),V}function e$1(q){if(typeof window=="undefined")return null;if(q instanceof Node)return q.ownerDocument;if(q!=null&&q.hasOwnProperty("value")){let Q=t(q);if(Q)return Q.ownerDocument}return document}function p$3({container:q,accept:Q,walk:V,enabled:de}){watchEffect(()=>{let he=q.value;if(!he||de!==void 0&&!de.value)return;let ne=e$1(q);if(!ne)return;let Te=Object.assign(be=>Q(be),{acceptNode:Q}),j=ne.createTreeWalker(he,NodeFilter.SHOW_ELEMENT,Te,!1);for(;j.nextNode();)V(j.currentNode)})}let c$1=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(q=>`${q}:not([tabindex='-1'])`).join(",");var p$2=(q=>(q[q.First=1]="First",q[q.Previous=2]="Previous",q[q.Next=4]="Next",q[q.Last=8]="Last",q[q.WrapAround=16]="WrapAround",q[q.NoScroll=32]="NoScroll",q))(p$2||{}),L$2=(q=>(q[q.Error=0]="Error",q[q.Overflow=1]="Overflow",q[q.Success=2]="Success",q[q.Underflow=3]="Underflow",q))(L$2||{}),N=(q=>(q[q.Previous=-1]="Previous",q[q.Next=1]="Next",q))(N||{});function T$2(q=document.body){return q==null?[]:Array.from(q.querySelectorAll(c$1))}var b$1=(q=>(q[q.Strict=0]="Strict",q[q.Loose=1]="Loose",q))(b$1||{});function S$1(q,Q=0){var V;return q===((V=e$1(q))==null?void 0:V.body)?!1:u$4(Q,{[0](){return q.matches(c$1)},[1](){let de=q;for(;de!==null;){if(de.matches(c$1))return!0;de=de.parentElement}return!1}})}function F$2(q){q==null||q.focus({preventScroll:!0})}let M=["textarea","input"].join(",");function h$1(q){var Q,V;return(V=(Q=q==null?void 0:q.matches)==null?void 0:Q.call(q,M))!=null?V:!1}function v$1(q,Q=V=>V){return q.slice().sort((V,de)=>{let he=Q(V),ne=Q(de);if(he===null||ne===null)return 0;let Te=he.compareDocumentPosition(ne);return Te&Node.DOCUMENT_POSITION_FOLLOWING?-1:Te&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function H$1(q,Q){var V;let de=(V=Array.isArray(q)?q.length>0?q[0].ownerDocument:document:q==null?void 0:q.ownerDocument)!=null?V:document,he=Array.isArray(q)?v$1(q):T$2(q),ne=de.activeElement,Te=(()=>{if(Q&5)return 1;if(Q&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),j=(()=>{if(Q&1)return 0;if(Q&2)return Math.max(0,he.indexOf(ne))-1;if(Q&4)return Math.max(0,he.indexOf(ne))+1;if(Q&8)return he.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),be=Q&32?{preventScroll:!0}:{},ce=0,ye=he.length,xe;do{if(ce>=ye||ce+ye<=0)return 0;let Ee=j+ce;if(Q&16)Ee=(Ee+ye)%ye;else{if(Ee<0)return 3;if(Ee>=ye)return 1}xe=he[Ee],xe==null||xe.focus(be),ce+=Te}while(xe!==de.activeElement);return xe.hasAttribute("tabindex")||xe.setAttribute("tabindex","0"),Q&6&&h$1(xe)&&xe.select(),2}function w$1(q,Q,V){typeof window!="undefined"&&watchEffect(de=>{window.addEventListener(q,Q,V),de(()=>window.removeEventListener(q,Q,V))})}function s$2(q){typeof queueMicrotask=="function"?queueMicrotask(q):Promise.resolve().then(q).catch(Q=>setTimeout(()=>{throw Q}))}var p$1=(q=>(q[q.None=1]="None",q[q.IgnoreScrollbars=2]="IgnoreScrollbars",q))(p$1||{});function g$4(q,Q,V=1){let de=!1;function he(ne){if(de)return;de=!0,s$2(()=>{de=!1});let Te=ne.target;if(!Te.ownerDocument.documentElement.contains(Te))return;let j=function be(ce){return typeof ce=="function"?be(ce()):Array.isArray(ce)||ce instanceof Set?ce:[ce]}(q);if((V&2)===2){let be=20,ce=Te.ownerDocument.documentElement;if(ne.clientX>ce.clientWidth-be||ne.clientX<be||ne.clientY>ce.clientHeight-be||ne.clientY<be)return}for(let be of j){if(be===null)continue;let ce=be instanceof HTMLElement?be:t(be);if(ce!=null&&ce.contains(Te))return}Q(ne,Te)}w$1("pointerdown",he),w$1("mousedown",he)}let l$2=defineComponent({name:"VisuallyHidden",props:{as:{type:[Object,String],default:"div"}},setup(q,{slots:Q,attrs:V}){return()=>k({props:Qo(Yr({},q),{style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",display:"none"}}),slot:{},attrs:V,slots:Q,name:"VisuallyHidden"})}});function p(q){var Q;let V=(Q=q==null?void 0:q.form)!=null?Q:q.closest("form");if(V){for(let de of V.elements)if(de.tagName==="INPUT"&&de.type==="submit"||de.tagName==="BUTTON"&&de.type==="submit"||de.nodeName==="INPUT"&&de.type==="image"){de.click();return}}}function r$2(q,Q,V,de){typeof window!="undefined"&&watchEffect(he=>{q=q!=null?q:window,q.addEventListener(Q,V,de),he(()=>q.removeEventListener(Q,V,de))})}var g$3=(q=>(q[q.None=1]="None",q[q.InitialFocus=2]="InitialFocus",q[q.TabLock=4]="TabLock",q[q.FocusLock=8]="FocusLock",q[q.RestoreFocus=16]="RestoreFocus",q[q.All=30]="All",q))(g$3||{});function W$2(q,Q=ref(30),V=ref({})){var de,he;let ne=ref(null),Te=ref(null),j={value:!1},be=computed(()=>Boolean(Q.value&16)),ce=computed(()=>Boolean(Q.value&2)),ye=computed(()=>e$1(q));return onMounted(()=>{watch(be,(xe,Ee)=>{var Ce;xe!==Ee&&(!be.value||(j.value=!0,ne.value||(ne.value=(Ce=ye.value)==null?void 0:Ce.activeElement)))},{immediate:!0}),watch(be,(xe,Ee,Ce)=>{xe!==Ee&&(!be.value||Ce(()=>{j.value!==!1&&(j.value=!1,F$2(ne.value),ne.value=null)}))},{immediate:!0}),watch([q,V,V.value.initialFocus,ce],(xe,Ee)=>{var Ce,Se;if(xe.every(($e,Fe)=>(Ee==null?void 0:Ee[Fe])===$e)||!ce.value)return;let Oe=q.value;if(!Oe)return;let De=t(V.value.initialFocus),Ue=(Ce=ye.value)==null?void 0:Ce.activeElement;if(De){if(De===Ue){Te.value=Ue;return}}else if(Oe.contains(Ue)){Te.value=Ue;return}De?F$2(De):H$1(Oe,p$2.First)===L$2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),Te.value=(Se=ye.value)==null?void 0:Se.activeElement},{immediate:!0})}),r$2((de=ye.value)==null?void 0:de.defaultView,"keydown",xe=>{var Ee;!(Q.value&4)||!q.value||xe.key===o.Tab&&(xe.preventDefault(),H$1(q.value,(xe.shiftKey?p$2.Previous:p$2.Next)|p$2.WrapAround)===L$2.Success&&(Te.value=(Ee=ye.value)==null?void 0:Ee.activeElement))}),r$2((he=ye.value)==null?void 0:he.defaultView,"focus",xe=>{var Ee;if(!(Q.value&8))return;let Ce=new Set((Ee=V.value.containers)==null?void 0:Ee.value);if(Ce.add(q),!Ce.size)return;let Se=Te.value;if(!Se||!j.value)return;let Oe=xe.target;Oe&&Oe instanceof HTMLElement?x$3(Ce,Oe)?(Te.value=Oe,F$2(Oe)):(xe.preventDefault(),xe.stopPropagation(),F$2(Se)):F$2(Te.value)},!0),ne}function x$3(q,Q){var V;for(let de of q)if((V=de.value)!=null&&V.contains(Q))return!0;return!1}let l$1="body > *",i$1=new Set,r$1=new Map;function u$3(q){q.setAttribute("aria-hidden","true"),q.inert=!0}function s$1(q){let Q=r$1.get(q);!Q||(Q["aria-hidden"]===null?q.removeAttribute("aria-hidden"):q.setAttribute("aria-hidden",Q["aria-hidden"]),q.inert=Q.inert)}function g$2(q,Q=ref(!0)){watchEffect(V=>{if(!Q.value||!q.value)return;let de=q.value,he=e$1(de);if(he){i$1.add(de);for(let ne of r$1.keys())ne.contains(de)&&(s$1(ne),r$1.delete(ne));he.querySelectorAll(l$1).forEach(ne=>{if(ne instanceof HTMLElement){for(let Te of i$1)if(ne.contains(Te))return;i$1.size===1&&(r$1.set(ne,{"aria-hidden":ne.getAttribute("aria-hidden"),inert:ne.inert}),u$3(ne))}}),V(()=>{if(i$1.delete(de),i$1.size>0)he.querySelectorAll(l$1).forEach(ne=>{if(ne instanceof HTMLElement&&!r$1.has(ne)){for(let Te of i$1)if(ne.contains(Te))return;r$1.set(ne,{"aria-hidden":ne.getAttribute("aria-hidden"),inert:ne.inert}),u$3(ne)}});else for(let ne of r$1.keys())s$1(ne),r$1.delete(ne)})}})}let e=Symbol("ForcePortalRootContext");function u$2(){return inject(e,!1)}let P$2=defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(q,{slots:Q,attrs:V}){return provide(e,q.force),()=>{let ne=q,{force:de}=ne,he=Es(ne,["force"]);return k({props:he,slot:{},slots:Q,attrs:V,name:"ForcePortalRoot"})}}});function v(q){let Q=e$1(q);if(!Q)throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${q}`);let V=Q.getElementById("headlessui-portal-root");if(V)return V;let de=Q.createElement("div");return de.setAttribute("id","headlessui-portal-root"),Q.body.appendChild(de)}let R$1=defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(q,{slots:Q,attrs:V}){let de=ref(null),he=computed(()=>e$1(de)),ne=u$2(),Te=inject(g$1,null),j=ref(ne===!0||Te==null?v(de.value):Te.resolveTarget());return watchEffect(()=>{ne||Te!=null&&(j.value=Te.resolveTarget())}),onUnmounted(()=>{var be,ce;let ye=(be=he.value)==null?void 0:be.getElementById("headlessui-portal-root");!ye||j.value===ye&&j.value.children.length<=0&&((ce=j.value.parentElement)==null||ce.removeChild(j.value))}),()=>{if(j.value===null)return null;let be={ref:de};return h$3(Teleport,{to:j.value},k({props:Yr(Yr({},q),be),slot:{},attrs:V,slots:Q,name:"Portal"}))}}}),g$1=Symbol("PortalGroupContext"),L$1=defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(q,{attrs:Q,slots:V}){let de=reactive({resolveTarget(){return q.target}});return provide(g$1,de),()=>{let Te=q,{target:he}=Te,ne=Es(Te,["target"]);return k({props:ne,slot:{},attrs:Q,slots:V,name:"PortalGroup"})}}}),i=Symbol("StackContext");var c=(q=>(q[q.Add=0]="Add",q[q.Remove=1]="Remove",q))(c||{});function a$1(){return inject(i,()=>{})}function s({type:q,element:Q,onUpdate:V}){let de=a$1();function he(...ne){V==null||V(...ne),de(...ne)}onMounted(()=>{he(0,q,Q),onUnmounted(()=>{he(1,q,Q)})}),provide(i,he)}let u$1=Symbol("DescriptionContext");function h(){let q=inject(u$1,null);if(q===null)throw new Error("Missing parent");return q}function P$1({slot:q=ref({}),name:Q="Description",props:V={}}={}){let de=ref([]);function he(ne){return de.value.push(ne),()=>{let Te=de.value.indexOf(ne);Te!==-1&&de.value.splice(Te,1)}}return provide(u$1,{register:he,slot:q,name:Q,props:V}),computed(()=>de.value.length>0?de.value.join(" "):void 0)}let S=defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"}},setup(q,{attrs:Q,slots:V}){let de=h(),he=`headlessui-description-${t$1()}`;return onMounted(()=>onUnmounted(de.register(he))),()=>{let{name:ne="Description",slot:Te=ref({}),props:j={}}=de,be=q,ce=Qo(Yr({},Object.entries(j).reduce((ye,[xe,Ee])=>Object.assign(ye,{[xe]:unref(Ee)}),{})),{id:he});return k({props:Yr(Yr({},be),ce),slot:Te.value,attrs:Q,slots:V,name:ne})}}});var fe$2=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(fe$2||{});let x$2=Symbol("DialogContext");function P(q){let Q=inject(x$2,null);if(Q===null){let V=new Error(`<${q} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,P),V}return Q}let T$1="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Me=defineComponent({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:T$1},initialFocus:{type:Object,default:null}},emits:{close:q=>!0},setup(q,{emit:Q,attrs:V,slots:de,expose:he}){var ne;let Te=ref(0),j=p$4(),be=computed(()=>q.open===T$1&&j!==null?u$4(j.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):q.open),ce=ref(new Set),ye=ref(null),xe=computed(()=>e$1(ye));if(he({el:ye,$el:ye}),!(q.open!==T$1||j!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof be.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${be.value===T$1?void 0:q.open}`);let Ee=computed(()=>be.value?0:1),Ce=computed(()=>Ee.value===0),Se=computed(()=>Te.value>1),Oe=inject(x$2,null)!==null,De=computed(()=>Se.value?"parent":"leaf"),Ue=W$2(ye,computed(()=>Ce.value?u$4(De.value,{parent:g$3.RestoreFocus,leaf:g$3.All&~g$3.FocusLock}):g$3.None),computed(()=>({initialFocus:ref(q.initialFocus),containers:ce})));g$2(ye,computed(()=>Se.value?Ce.value:!1)),s({type:"Dialog",element:ye,onUpdate:(Je,pt,It)=>{if(pt==="Dialog")return u$4(Je,{[c.Add](){ce.value.add(It),Te.value+=1},[c.Remove](){ce.value.delete(It),Te.value-=1}})}});let $e=P$1({name:"DialogDescription",slot:computed(()=>({open:be.value}))}),Fe=`headlessui-dialog-${t$1()}`,Xe=ref(null),Ye={titleId:Xe,panelRef:ref(null),dialogState:Ee,setTitleId(Je){Xe.value!==Je&&(Xe.value=Je)},close(){Q("close",!1)}};provide(x$2,Ye),g$4(()=>{var Je,pt,It;return[...Array.from((pt=(Je=xe.value)==null?void 0:Je.querySelectorAll("body > *"))!=null?pt:[]).filter(At=>!(!(At instanceof HTMLElement)||At.contains(Ue.value)||Ye.panelRef.value&&At.contains(Ye.panelRef.value))),(It=Ye.panelRef.value)!=null?It:ye.value]},(Je,pt)=>{Ee.value===0&&(Se.value||(Ye.close(),nextTick(()=>pt==null?void 0:pt.focus())))},p$1.IgnoreScrollbars),r$2((ne=xe.value)==null?void 0:ne.defaultView,"keydown",Je=>{Je.key===o.Escape&&Ee.value===0&&(Se.value||(Je.preventDefault(),Je.stopPropagation(),Ye.close()))}),watchEffect(Je=>{var pt;if(Ee.value!==0||Oe)return;let It=xe.value;if(!It)return;let At=It==null?void 0:It.documentElement,bt=(pt=It.defaultView)!=null?pt:window,rt=At.style.overflow,nt=At.style.paddingRight,it=bt.innerWidth-At.clientWidth;At.style.overflow="hidden",At.style.paddingRight=`${it}px`,Je(()=>{At.style.overflow=rt,At.style.paddingRight=nt})}),watchEffect(Je=>{if(Ee.value!==0)return;let pt=t(ye);if(!pt)return;let It=new IntersectionObserver(At=>{for(let bt of At)bt.boundingClientRect.x===0&&bt.boundingClientRect.y===0&&bt.boundingClientRect.width===0&&bt.boundingClientRect.height===0&&Ye.close()});It.observe(pt),Je(()=>It.disconnect())});function He(Je){Je.stopPropagation()}return()=>{let Je=Qo(Yr({},V),{ref:ye,id:Fe,role:"dialog","aria-modal":Ee.value===0?!0:void 0,"aria-labelledby":Xe.value,"aria-describedby":$e.value,onClick:He}),rt=q,{open:pt,initialFocus:It}=rt,At=Es(rt,["open","initialFocus"]),bt={open:Ee.value===0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>h$3(L$1,{target:ye.value},()=>h$3(P$2,{force:!1},()=>k({props:Yr(Yr({},At),Je),slot:bt,attrs:V,slots:de,visible:Ee.value===0,features:m$1.RenderStrategy|m$1.Static,name:"Dialog"})))))}}});defineComponent({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(q,{attrs:Q,slots:V}){let de=P("DialogOverlay"),he=`headlessui-dialog-overlay-${t$1()}`;function ne(Te){Te.target===Te.currentTarget&&(Te.preventDefault(),Te.stopPropagation(),de.close())}return()=>k({props:Qo(Yr({},q),{id:he,"aria-hidden":!0,onClick:ne}),slot:{open:de.dialogState.value===0},attrs:Q,slots:V,name:"DialogOverlay"})}});defineComponent({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(q,{attrs:Q,slots:V,expose:de}){let he=P("DialogBackdrop"),ne=`headlessui-dialog-backdrop-${t$1()}`,Te=ref(null);return de({el:Te,$el:Te}),onMounted(()=>{if(he.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let j=q,be={id:ne,ref:Te,"aria-hidden":!0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>k({props:Yr(Yr(Yr({},Q),j),be),slot:{open:he.dialogState.value===0},attrs:Q,slots:V,name:"DialogBackdrop"})))}}});let je=defineComponent({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(q,{attrs:Q,slots:V}){let de=P("DialogPanel"),he=`headlessui-dialog-panel-${t$1()}`;return()=>{let ne={id:he,ref:de.panelRef};return k({props:Yr(Yr({},q),ne),slot:{open:de.dialogState.value===0},attrs:Q,slots:V,name:"DialogPanel"})}}}),Ae=defineComponent({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(q,{attrs:Q,slots:V}){let de=P("DialogTitle"),he=`headlessui-dialog-title-${t$1()}`;return onMounted(()=>{de.setTitleId(he),onUnmounted(()=>de.setTitleId(null))}),()=>k({props:Qo(Yr({},q),{id:he}),slot:{open:de.dialogState.value===0},attrs:Q,slots:V,name:"DialogTitle"})}});var w=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(w||{});let x$1=Symbol("DisclosureContext");function C(q){let Q=inject(x$1,null);if(Q===null){let V=new Error(`<${q} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,C),V}return Q}let B=Symbol("DisclosurePanelContext");function H(){return inject(B,null)}let A=defineComponent({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(q,{slots:Q,attrs:V}){let de=`headlessui-disclosure-button-${t$1()}`,he=`headlessui-disclosure-panel-${t$1()}`,ne=ref(q.defaultOpen?0:1),Te=ref(null),j=ref(null),be={buttonId:de,panelId:he,disclosureState:ne,panel:Te,button:j,toggleDisclosure(){ne.value=u$4(ne.value,{[0]:1,[1]:0})},closeDisclosure(){ne.value!==1&&(ne.value=1)},close(ce){be.closeDisclosure();let ye=(()=>ce?ce instanceof HTMLElement?ce:ce.value instanceof HTMLElement?t(ce):t(be.button):t(be.button))();ye==null||ye.focus()}};return provide(x$1,be),c$2(computed(()=>u$4(ne.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let Ee=q,{defaultOpen:ce}=Ee,ye=Es(Ee,["defaultOpen"]),xe={open:ne.value===0,close:be.close};return k({props:ye,slot:xe,slots:Q,attrs:V,name:"Disclosure"})}}}),G=defineComponent({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(q,{attrs:Q,slots:V,expose:de}){let he=C("DisclosureButton"),ne=H(),Te=ne===null?!1:ne===he.panelId,j=ref(null);de({el:j,$el:j}),Te||watchEffect(()=>{he.button.value=j.value});let be=b$2(computed(()=>({as:q.as,type:Q.type})),j);function ce(){var Ee;q.disabled||(Te?(he.toggleDisclosure(),(Ee=t(he.button))==null||Ee.focus()):he.toggleDisclosure())}function ye(Ee){var Ce;if(!q.disabled)if(Te)switch(Ee.key){case o.Space:case o.Enter:Ee.preventDefault(),Ee.stopPropagation(),he.toggleDisclosure(),(Ce=t(he.button))==null||Ce.focus();break}else switch(Ee.key){case o.Space:case o.Enter:Ee.preventDefault(),Ee.stopPropagation(),he.toggleDisclosure();break}}function xe(Ee){switch(Ee.key){case o.Space:Ee.preventDefault();break}}return()=>{let Ee={open:he.disclosureState.value===0},Ce=Te?{ref:j,type:be.value,onClick:ce,onKeydown:ye}:{id:he.buttonId,ref:j,type:be.value,"aria-expanded":q.disabled?void 0:he.disclosureState.value===0,"aria-controls":t(he.panel)?he.panelId:void 0,disabled:q.disabled?!0:void 0,onClick:ce,onKeydown:ye,onKeyup:xe};return k({props:Yr(Yr({},q),Ce),slot:Ee,attrs:Q,slots:V,name:"DisclosureButton"})}}}),J$1=defineComponent({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(q,{attrs:Q,slots:V,expose:de}){let he=C("DisclosurePanel");de({el:he.panel,$el:he.panel}),provide(B,he.panelId);let ne=p$4(),Te=computed(()=>ne!==null?ne.value===l$3.Open:he.disclosureState.value===0);return()=>{let j={open:he.disclosureState.value===0,close:he.close},be={id:he.panelId,ref:he.panel};return k({props:Yr(Yr({},q),be),slot:j,attrs:Q,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:Te.value,name:"DisclosurePanel"})}}});var W$1=(q=>(q[q.Open=0]="Open",q[q.Closed=1]="Closed",q))(W$1||{}),J=(q=>(q[q.Pointer=0]="Pointer",q[q.Other=1]="Other",q))(J||{});function z(q){requestAnimationFrame(()=>requestAnimationFrame(q))}let E=Symbol("MenuContext");function D(q){let Q=inject(E,null);if(Q===null){let V=new Error(`<${q} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,D),V}return Q}let fe$1=defineComponent({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(q,{slots:Q,attrs:V}){let de=ref(1),he=ref(null),ne=ref(null),Te=ref([]),j=ref(""),be=ref(null),ce=ref(1);function ye(Ee=Ce=>Ce){let Ce=be.value!==null?Te.value[be.value]:null,Se=v$1(Ee(Te.value.slice()),De=>t(De.dataRef.domRef)),Oe=Ce?Se.indexOf(Ce):null;return Oe===-1&&(Oe=null),{items:Se,activeItemIndex:Oe}}let xe={menuState:de,buttonRef:he,itemsRef:ne,items:Te,searchQuery:j,activeItemIndex:be,activationTrigger:ce,closeMenu:()=>{de.value=1,be.value=null},openMenu:()=>de.value=0,goToItem(Ee,Ce,Se){let Oe=ye(),De=x$4(Ee===a$2.Specific?{focus:a$2.Specific,id:Ce}:{focus:Ee},{resolveItems:()=>Oe.items,resolveActiveIndex:()=>Oe.activeItemIndex,resolveId:Ue=>Ue.id,resolveDisabled:Ue=>Ue.dataRef.disabled});j.value="",be.value=De,ce.value=Se!=null?Se:1,Te.value=Oe.items},search(Ee){let Ce=j.value!==""?0:1;j.value+=Ee.toLowerCase();let Se=(be.value!==null?Te.value.slice(be.value+Ce).concat(Te.value.slice(0,be.value+Ce)):Te.value).find(De=>De.dataRef.textValue.startsWith(j.value)&&!De.dataRef.disabled),Oe=Se?Te.value.indexOf(Se):-1;Oe===-1||Oe===be.value||(be.value=Oe,ce.value=1)},clearSearch(){j.value=""},registerItem(Ee,Ce){let Se=ye(Oe=>[...Oe,{id:Ee,dataRef:Ce}]);Te.value=Se.items,be.value=Se.activeItemIndex,ce.value=1},unregisterItem(Ee){let Ce=ye(Se=>{let Oe=Se.findIndex(De=>De.id===Ee);return Oe!==-1&&Se.splice(Oe,1),Se});Te.value=Ce.items,be.value=Ce.activeItemIndex,ce.value=1}};return g$4([he,ne],(Ee,Ce)=>{var Se;de.value===0&&(xe.closeMenu(),S$1(Ce,b$1.Loose)||(Ee.preventDefault(),(Se=t(he))==null||Se.focus()))}),provide(E,xe),c$2(computed(()=>u$4(de.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let Ee={open:de.value===0};return k({props:q,slot:Ee,slots:Q,attrs:V,name:"Menu"})}}}),me=defineComponent({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(q,{attrs:Q,slots:V,expose:de}){let he=D("MenuButton"),ne=`headlessui-menu-button-${t$1()}`;de({el:he.buttonRef,$el:he.buttonRef});function Te(ye){switch(ye.key){case o.Space:case o.Enter:case o.ArrowDown:ye.preventDefault(),ye.stopPropagation(),he.openMenu(),nextTick(()=>{var xe;(xe=t(he.itemsRef))==null||xe.focus({preventScroll:!0}),he.goToItem(a$2.First)});break;case o.ArrowUp:ye.preventDefault(),ye.stopPropagation(),he.openMenu(),nextTick(()=>{var xe;(xe=t(he.itemsRef))==null||xe.focus({preventScroll:!0}),he.goToItem(a$2.Last)});break}}function j(ye){switch(ye.key){case o.Space:ye.preventDefault();break}}function be(ye){q.disabled||(he.menuState.value===0?(he.closeMenu(),nextTick(()=>{var xe;return(xe=t(he.buttonRef))==null?void 0:xe.focus({preventScroll:!0})})):(ye.preventDefault(),ye.stopPropagation(),he.openMenu(),z(()=>{var xe;return(xe=t(he.itemsRef))==null?void 0:xe.focus({preventScroll:!0})})))}let ce=b$2(computed(()=>({as:q.as,type:Q.type})),he.buttonRef);return()=>{var ye;let xe={open:he.menuState.value===0},Ee={ref:he.buttonRef,id:ne,type:ce.value,"aria-haspopup":!0,"aria-controls":(ye=t(he.itemsRef))==null?void 0:ye.id,"aria-expanded":q.disabled?void 0:he.menuState.value===0,onKeydown:Te,onKeyup:j,onClick:be};return k({props:Yr(Yr({},q),Ee),slot:xe,attrs:Q,slots:V,name:"MenuButton"})}}}),pe=defineComponent({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(q,{attrs:Q,slots:V,expose:de}){let he=D("MenuItems"),ne=`headlessui-menu-items-${t$1()}`,Te=ref(null);de({el:he.itemsRef,$el:he.itemsRef}),p$3({container:computed(()=>t(he.itemsRef)),enabled:computed(()=>he.menuState.value===0),accept(xe){return xe.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:xe.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(xe){xe.setAttribute("role","none")}});function j(xe){var Ee;switch(Te.value&&clearTimeout(Te.value),xe.key){case o.Space:if(he.searchQuery.value!=="")return xe.preventDefault(),xe.stopPropagation(),he.search(xe.key);case o.Enter:if(xe.preventDefault(),xe.stopPropagation(),he.activeItemIndex.value!==null){let Ce=he.items.value[he.activeItemIndex.value];(Ee=t(Ce.dataRef.domRef))==null||Ee.click()}he.closeMenu(),nextTick(()=>{var Ce;return(Ce=t(he.buttonRef))==null?void 0:Ce.focus({preventScroll:!0})});break;case o.ArrowDown:return xe.preventDefault(),xe.stopPropagation(),he.goToItem(a$2.Next);case o.ArrowUp:return xe.preventDefault(),xe.stopPropagation(),he.goToItem(a$2.Previous);case o.Home:case o.PageUp:return xe.preventDefault(),xe.stopPropagation(),he.goToItem(a$2.First);case o.End:case o.PageDown:return xe.preventDefault(),xe.stopPropagation(),he.goToItem(a$2.Last);case o.Escape:xe.preventDefault(),xe.stopPropagation(),he.closeMenu(),nextTick(()=>{var Ce;return(Ce=t(he.buttonRef))==null?void 0:Ce.focus({preventScroll:!0})});break;case o.Tab:xe.preventDefault(),xe.stopPropagation();break;default:xe.key.length===1&&(he.search(xe.key),Te.value=setTimeout(()=>he.clearSearch(),350));break}}function be(xe){switch(xe.key){case o.Space:xe.preventDefault();break}}let ce=p$4(),ye=computed(()=>ce!==null?ce.value===l$3.Open:he.menuState.value===0);return()=>{var xe,Ee;let Ce={open:he.menuState.value===0},Se={"aria-activedescendant":he.activeItemIndex.value===null||(xe=he.items.value[he.activeItemIndex.value])==null?void 0:xe.id,"aria-labelledby":(Ee=t(he.buttonRef))==null?void 0:Ee.id,id:ne,onKeydown:j,onKeyup:be,role:"menu",tabIndex:0,ref:he.itemsRef};return k({props:Yr(Yr({},q),Se),slot:Ce,attrs:Q,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:ye.value,name:"MenuItems"})}}}),ve=defineComponent({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(q,{slots:Q,attrs:V,expose:de}){let he=D("MenuItem"),ne=`headlessui-menu-item-${t$1()}`,Te=ref(null);de({el:Te,$el:Te});let j=computed(()=>he.activeItemIndex.value!==null?he.items.value[he.activeItemIndex.value].id===ne:!1),be=computed(()=>({disabled:q.disabled,textValue:"",domRef:Te}));onMounted(()=>{var Ce,Se;let Oe=(Se=(Ce=t(Te))==null?void 0:Ce.textContent)==null?void 0:Se.toLowerCase().trim();Oe!==void 0&&(be.value.textValue=Oe)}),onMounted(()=>he.registerItem(ne,be)),onUnmounted(()=>he.unregisterItem(ne)),watchEffect(()=>{he.menuState.value===0&&(!j.value||he.activationTrigger.value!==0&&nextTick(()=>{var Ce,Se;return(Se=(Ce=t(Te))==null?void 0:Ce.scrollIntoView)==null?void 0:Se.call(Ce,{block:"nearest"})}))});function ce(Ce){if(q.disabled)return Ce.preventDefault();he.closeMenu(),nextTick(()=>{var Se;return(Se=t(he.buttonRef))==null?void 0:Se.focus({preventScroll:!0})})}function ye(){if(q.disabled)return he.goToItem(a$2.Nothing);he.goToItem(a$2.Specific,ne)}function xe(){q.disabled||j.value||he.goToItem(a$2.Specific,ne,0)}function Ee(){q.disabled||!j.value||he.goToItem(a$2.Nothing)}return()=>{let{disabled:Ce}=q,Se={active:j.value,disabled:Ce};return k({props:Qo(Yr({},q),{id:ne,ref:Te,role:"menuitem",tabIndex:Ce===!0?void 0:-1,"aria-disabled":Ce===!0?!0:void 0,onClick:ce,onFocus:ye,onPointermove:xe,onMousemove:xe,onPointerleave:Ee,onMouseleave:Ee}),slot:Se,attrs:V,slots:Q,name:"MenuItem"})}}}),u=Symbol("LabelContext");function a(){let q=inject(u,null);if(q===null){let Q=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(Q,a),Q}return q}function K$1({slot:q={},name:Q="Label",props:V={}}={}){let de=ref([]);function he(ne){return de.value.push(ne),()=>{let Te=de.value.indexOf(ne);Te!==-1&&de.value.splice(Te,1)}}return provide(u,{register:he,slot:q,name:Q,props:V}),computed(()=>de.value.length>0?de.value.join(" "):void 0)}let T=defineComponent({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1}},setup(q,{slots:Q,attrs:V}){let de=a(),he=`headlessui-label-${t$1()}`;return onMounted(()=>onUnmounted(de.register(he))),()=>{let{name:ne="Label",slot:Te={},props:j={}}=de,Ee=q,{passive:be}=Ee,ce=Es(Ee,["passive"]),ye=Qo(Yr({},Object.entries(j).reduce((Ce,[Se,Oe])=>Object.assign(Ce,{[Se]:unref(Oe)}),{})),{id:he}),xe=Yr(Yr({},ce),ye);return be&&delete xe.onClick,k({props:xe,slot:Te,attrs:V,slots:Q,name:ne})}}}),b=Symbol("GroupContext"),W=defineComponent({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(q,{slots:Q,attrs:V}){let de=ref(null),he=K$1({name:"SwitchLabel",props:{onClick(){!de.value||(de.value.click(),de.value.focus({preventScroll:!0}))}}}),ne=P$1({name:"SwitchDescription"});return provide(b,{switchRef:de,labelledby:he,describedby:ne}),()=>k({props:q,slot:{},slots:Q,attrs:V,name:"SwitchGroup"})}}),X=defineComponent({name:"Switch",emits:{"update:modelValue":q=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:!1},name:{type:String,optional:!0},value:{type:String,optional:!0}},inheritAttrs:!1,setup(q,{emit:Q,attrs:V,slots:de,expose:he}){let ne=inject(b,null),Te=`headlessui-switch-${t$1()}`;function j(){Q("update:modelValue",!q.modelValue)}let be=ref(null),ce=ne===null?be:ne.switchRef,ye=b$2(computed(()=>({as:q.as,type:V.type})),ce);he({el:ce,$el:ce});function xe(Se){Se.preventDefault(),j()}function Ee(Se){Se.key===o.Space?(Se.preventDefault(),j()):Se.key===o.Enter&&p(Se.currentTarget)}function Ce(Se){Se.preventDefault()}return()=>{let Xe=q,{name:Se,value:Oe,modelValue:De}=Xe,Ue=Es(Xe,["name","value","modelValue"]),$e={checked:De},Fe={id:Te,ref:ce,role:"switch",type:ye.value,tabIndex:0,"aria-checked":De,"aria-labelledby":ne==null?void 0:ne.labelledby.value,"aria-describedby":ne==null?void 0:ne.describedby.value,onClick:xe,onKeyup:Ee,onKeypress:Ce};return h$3(Fragment,[Se!=null&&De!=null?h$3(l$2,O({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:De,name:Se,value:Oe})):null,k({props:Yr(Yr(Yr({},V),Ue),Fe),slot:$e,attrs:V,slots:de,name:"Switch"})])}}}),Y=T,Z=S;function l(q){let Q={called:!1};return(...V)=>{if(!Q.called)return Q.called=!0,q(...V)}}function r(){let q=[],Q=[],V={enqueue(de){Q.push(de)},requestAnimationFrame(...de){let he=requestAnimationFrame(...de);V.add(()=>cancelAnimationFrame(he))},nextFrame(...de){V.requestAnimationFrame(()=>{V.requestAnimationFrame(...de)})},setTimeout(...de){let he=setTimeout(...de);V.add(()=>clearTimeout(he))},add(de){q.push(de)},dispose(){for(let de of q.splice(0))de()},async workQueue(){for(let de of Q.splice(0))await de()}};return V}function m(q,...Q){q&&Q.length>0&&q.classList.add(...Q)}function d$1(q,...Q){q&&Q.length>0&&q.classList.remove(...Q)}var g=(q=>(q.Finished="finished",q.Cancelled="cancelled",q))(g||{});function F$1(q,Q){let V=r();if(!q)return V.dispose;let{transitionDuration:de,transitionDelay:he}=getComputedStyle(q),[ne,Te]=[de,he].map(j=>{let[be=0]=j.split(",").filter(Boolean).map(ce=>ce.includes("ms")?parseFloat(ce):parseFloat(ce)*1e3).sort((ce,ye)=>ye-ce);return be});return ne!==0?V.setTimeout(()=>Q("finished"),ne+Te):Q("finished"),V.add(()=>Q("cancelled")),V.dispose}function L(q,Q,V,de,he,ne){let Te=r(),j=ne!==void 0?l(ne):()=>{};return d$1(q,...he),m(q,...Q,...V),Te.nextFrame(()=>{d$1(q,...V),m(q,...de),Te.add(F$1(q,be=>(d$1(q,...de,...Q),m(q,...he),j(be))))}),Te.add(()=>d$1(q,...Q,...V,...de,...he)),Te.add(()=>j("cancelled")),Te.dispose}function d(q=""){return q.split(" ").filter(Q=>Q.trim().length>1)}let F=Symbol("TransitionContext");var ae=(q=>(q.Visible="visible",q.Hidden="hidden",q))(ae||{});function le(){return inject(F,null)!==null}function ie(){let q=inject(F,null);if(q===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return q}function se(){let q=inject(R,null);if(q===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return q}let R=Symbol("NestingContext");function x(q){return"children"in q?x(q.children):q.value.filter(({state:Q})=>Q==="visible").length>0}function K(q){let Q=ref([]),V=ref(!1);onMounted(()=>V.value=!0),onUnmounted(()=>V.value=!1);function de(ne,Te=h$2.Hidden){let j=Q.value.findIndex(({id:be})=>be===ne);j!==-1&&(u$4(Te,{[h$2.Unmount](){Q.value.splice(j,1)},[h$2.Hidden](){Q.value[j].state="hidden"}}),!x(Q)&&V.value&&(q==null||q()))}function he(ne){let Te=Q.value.find(({id:j})=>j===ne);return Te?Te.state!=="visible"&&(Te.state="visible"):Q.value.push({id:ne,state:"visible"}),()=>de(ne,h$2.Unmount)}return{children:Q,register:he,unregister:de}}let _$1=m$1.RenderStrategy,oe=defineComponent({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(q,{emit:Q,attrs:V,slots:de,expose:he}){if(!le()&&f())return()=>h$3(fe,Qo(Yr({},q),{onBeforeEnter:()=>Q("beforeEnter"),onAfterEnter:()=>Q("afterEnter"),onBeforeLeave:()=>Q("beforeLeave"),onAfterLeave:()=>Q("afterLeave")}),de);let ne=ref(null),Te=ref("visible"),j=computed(()=>q.unmount?h$2.Unmount:h$2.Hidden);he({el:ne,$el:ne});let{show:be,appear:ce}=ie(),{register:ye,unregister:xe}=se(),Ee={value:!0},Ce=t$1(),Se={value:!1},Oe=K(()=>{Se.value||(Te.value="hidden",xe(Ce),Q("afterLeave"))});onMounted(()=>{let pt=ye(Ce);onUnmounted(pt)}),watchEffect(()=>{if(j.value===h$2.Hidden&&!!Ce){if(be&&Te.value!=="visible"){Te.value="visible";return}u$4(Te.value,{hidden:()=>xe(Ce),visible:()=>ye(Ce)})}});let De=d(q.enter),Ue=d(q.enterFrom),$e=d(q.enterTo),Fe=d(q.entered),Xe=d(q.leave),Ye=d(q.leaveFrom),He=d(q.leaveTo);onMounted(()=>{watchEffect(()=>{if(Te.value==="visible"){let pt=t(ne);if(pt instanceof Comment&&pt.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Je(pt){let It=Ee.value&&!ce.value,At=t(ne);!At||!(At instanceof HTMLElement)||It||(Se.value=!0,be.value&&Q("beforeEnter"),be.value||Q("beforeLeave"),pt(be.value?L(At,De,Ue,$e,Fe,bt=>{Se.value=!1,bt===g.Finished&&Q("afterEnter")}):L(At,Xe,Ye,He,Fe,bt=>{Se.value=!1,bt===g.Finished&&(x(Oe)||(Te.value="hidden",xe(Ce),Q("afterLeave")))})))}return onMounted(()=>{watch([be,ce],(pt,It,At)=>{Je(At),Ee.value=!1},{immediate:!0})}),provide(R,Oe),c$2(computed(()=>u$4(Te.value,{visible:l$3.Open,hidden:l$3.Closed}))),()=>{let xt=q,{appear:pt,show:It,enter:At,enterFrom:bt,enterTo:rt,entered:nt,leave:it,leaveFrom:dt,leaveTo:lt}=xt,ft=Es(xt,["appear","show","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]);return k({props:Qo(Yr({},ft),{ref:ne}),slot:{},slots:de,attrs:V,features:_$1,visible:Te.value==="visible",name:"TransitionChild"})}}}),ue=oe,fe=defineComponent({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(q,{emit:Q,attrs:V,slots:de}){let he=p$4(),ne=computed(()=>q.show===null&&he!==null?u$4(he.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):q.show);watchEffect(()=>{if(![!0,!1].includes(ne.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let Te=ref(ne.value?"visible":"hidden"),j=K(()=>{Te.value="hidden"}),be={value:!0},ce={show:ne,appear:computed(()=>q.appear||!be.value)};return onMounted(()=>{watchEffect(()=>{be.value=!1,ne.value?Te.value="visible":x(j)||(Te.value="hidden")})}),provide(R,j),provide(F,ce),()=>{let ye=R$2(q,["show","appear","unmount"]),xe={unmount:q.unmount};return k({props:Qo(Yr({},xe),{as:"template"}),slot:{},slots:Qo(Yr({},de),{default:()=>[h$3(ue,Yr(Yr(Yr({onBeforeEnter:()=>Q("beforeEnter"),onAfterEnter:()=>Q("afterEnter"),onBeforeLeave:()=>Q("beforeLeave"),onAfterLeave:()=>Q("afterLeave")},V),xe),ye),de.default)]}),attrs:{},features:_$1,visible:Te.value==="visible",name:"Transition"})}}});function render$g(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$f(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})])}function render$e(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])}function render$d(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$c(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$b(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])}function render$a(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])}function render$9(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})])}function render$8(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])}function render$7(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])}function render$6(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})])}function render$5(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})])}function render$4(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])}function render$3(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$2(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$1(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}var isVue2=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=q=>activePinia=q,piniaSymbol=Symbol();function isPlainObject$1(q){return q&&typeof q=="object"&&Object.prototype.toString.call(q)==="[object Object]"&&typeof q.toJSON!="function"}var MutationType;(function(q){q.direct="direct",q.patchObject="patch object",q.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const q=effectScope(!0),Q=q.run(()=>ref({}));let V=[],de=[];const he=markRaw({install(ne){setActivePinia(he),he._a=ne,ne.provide(piniaSymbol,he),ne.config.globalProperties.$pinia=he,de.forEach(Te=>V.push(Te)),de=[]},use(ne){return!this._a&&!isVue2?de.push(ne):V.push(ne),this},_p:V,_a:null,_e:q,_s:new Map,state:Q});return he}const noop=()=>{};function addSubscription(q,Q,V,de=noop){q.push(Q);const he=()=>{const ne=q.indexOf(Q);ne>-1&&(q.splice(ne,1),de())};return!V&&getCurrentInstance()&&onUnmounted(he),he}function triggerSubscriptions(q,...Q){q.slice().forEach(V=>{V(...Q)})}function mergeReactiveObjects(q,Q){for(const V in Q){if(!Q.hasOwnProperty(V))continue;const de=Q[V],he=q[V];isPlainObject$1(he)&&isPlainObject$1(de)&&q.hasOwnProperty(V)&&!isRef(de)&&!isReactive(de)?q[V]=mergeReactiveObjects(he,de):q[V]=de}return q}const skipHydrateSymbol=Symbol();function shouldHydrate(q){return!isPlainObject$1(q)||!q.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(q){return!!(isRef(q)&&q.effect)}function createOptionsStore(q,Q,V,de){const{state:he,actions:ne,getters:Te}=Q,j=V.state.value[q];let be;function ce(){j||(V.state.value[q]=he?he():{});const ye=toRefs(V.state.value[q]);return assign(ye,ne,Object.keys(Te||{}).reduce((xe,Ee)=>(xe[Ee]=markRaw(computed(()=>{setActivePinia(V);const Ce=V._s.get(q);return Te[Ee].call(Ce,Ce)})),xe),{}))}return be=createSetupStore(q,ce,Q,V),be.$reset=function(){const xe=he?he():{};this.$patch(Ee=>{assign(Ee,xe)})},be}function createSetupStore(q,Q,V={},de,he){let ne;const Te=V.state,j=assign({actions:{}},V),be={deep:!0};let ce,ye,xe=markRaw([]),Ee=markRaw([]),Ce;const Se=de.state.value[q];!Te&&!Se&&(de.state.value[q]={}),ref({});function Oe(He){let Je;ce=ye=!1,typeof He=="function"?(He(de.state.value[q]),Je={type:MutationType.patchFunction,storeId:q,events:Ce}):(mergeReactiveObjects(de.state.value[q],He),Je={type:MutationType.patchObject,payload:He,storeId:q,events:Ce}),nextTick().then(()=>{ce=!0}),ye=!0,triggerSubscriptions(xe,Je,de.state.value[q])}const De=noop;function Ue(){ne.stop(),xe=[],Ee=[],de._s.delete(q)}function $e(He,Je){return function(){setActivePinia(de);const pt=Array.from(arguments),It=[],At=[];function bt(it){It.push(it)}function rt(it){At.push(it)}triggerSubscriptions(Ee,{args:pt,name:He,store:Xe,after:bt,onError:rt});let nt;try{nt=Je.apply(this&&this.$id===q?this:Xe,pt)}catch(it){throw triggerSubscriptions(At,it),it}return nt instanceof Promise?nt.then(it=>(triggerSubscriptions(It,it),it)).catch(it=>(triggerSubscriptions(At,it),Promise.reject(it))):(triggerSubscriptions(It,nt),nt)}}const Fe={_p:de,$id:q,$onAction:addSubscription.bind(null,Ee),$patch:Oe,$reset:De,$subscribe(He,Je={}){const pt=addSubscription(xe,He,Je.detached,()=>It()),It=ne.run(()=>watch(()=>de.state.value[q],At=>{(Je.flush==="sync"?ye:ce)&&He({storeId:q,type:MutationType.direct,events:Ce},At)},assign({},be,Je)));return pt},$dispose:Ue},Xe=reactive(assign({},Fe));de._s.set(q,Xe);const Ye=de._e.run(()=>(ne=effectScope(),ne.run(()=>Q())));for(const He in Ye){const Je=Ye[He];if(isRef(Je)&&!isComputed(Je)||isReactive(Je))Te||(Se&&shouldHydrate(Je)&&(isRef(Je)?Je.value=Se[He]:mergeReactiveObjects(Je,Se[He])),de.state.value[q][He]=Je);else if(typeof Je=="function"){const pt=$e(He,Je);Ye[He]=pt,j.actions[He]=Je}}return assign(Xe,Ye),assign(toRaw(Xe),Ye),Object.defineProperty(Xe,"$state",{get:()=>de.state.value[q],set:He=>{Oe(Je=>{assign(Je,He)})}}),de._p.forEach(He=>{assign(Xe,ne.run(()=>He({store:Xe,app:de._a,pinia:de,options:j})))}),Se&&Te&&V.hydrate&&V.hydrate(Xe.$state,Se),ce=!0,ye=!0,Xe}function defineStore(q,Q,V){let de,he;const ne=typeof Q=="function";typeof q=="string"?(de=q,he=ne?V:Q):(he=q,de=q.id);function Te(j,be){const ce=getCurrentInstance();return j=j||ce&&inject(piniaSymbol),j&&setActivePinia(j),j=activePinia,j._s.has(de)||(ne?createSetupStore(de,Q,he,j):createOptionsStore(de,he,j)),j._s.get(de)}return Te.$id=de,Te}var mapboxGl={exports:{}};(function(q,Q){(function(V,de){q.exports=de()})(commonjsGlobal,function(){var V,de,he;function ne(j,be){if(!V)V=be;else if(!de)de=be;else{var ce="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+V+")(sharedChunk); ("+de+")(sharedChunk); self.onerror = null;",ye={};V(ye),he=be(ye),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(he.workerUrl=window.URL.createObjectURL(new Blob([ce],{type:"text/javascript"})))}}ne(["exports"],function(j){var be=typeof self!="undefined"?self:{},ce=ye;function ye($,y,I,ee){this.cx=3*$,this.bx=3*(I-$)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*y,this.by=3*(ee-y)-this.cy,this.ay=1-this.cy-this.by,this.p1x=$,this.p1y=ee,this.p2x=I,this.p2y=ee}ye.prototype.sampleCurveX=function($){return((this.ax*$+this.bx)*$+this.cx)*$},ye.prototype.sampleCurveY=function($){return((this.ay*$+this.by)*$+this.cy)*$},ye.prototype.sampleCurveDerivativeX=function($){return(3*this.ax*$+2*this.bx)*$+this.cx},ye.prototype.solveCurveX=function($,y){var I,ee,re,ge,ke;for(y===void 0&&(y=1e-6),re=$,ke=0;ke<8;ke++){if(ge=this.sampleCurveX(re)-$,Math.abs(ge)<y)return re;var Ie=this.sampleCurveDerivativeX(re);if(Math.abs(Ie)<1e-6)break;re-=ge/Ie}if((re=$)<(I=0))return I;if(re>(ee=1))return ee;for(;I<ee;){if(ge=this.sampleCurveX(re),Math.abs(ge-$)<y)return re;$>ge?I=re:ee=re,re=.5*(ee-I)+I}return re},ye.prototype.solve=function($,y){return this.sampleCurveY(this.solveCurveX($,y))};var xe=Ee;function Ee($,y){this.x=$,this.y=y}Ee.prototype={clone:function(){return new Ee(this.x,this.y)},add:function($){return this.clone()._add($)},sub:function($){return this.clone()._sub($)},multByPoint:function($){return this.clone()._multByPoint($)},divByPoint:function($){return this.clone()._divByPoint($)},mult:function($){return this.clone()._mult($)},div:function($){return this.clone()._div($)},rotate:function($){return this.clone()._rotate($)},rotateAround:function($,y){return this.clone()._rotateAround($,y)},matMult:function($){return this.clone()._matMult($)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function($){return this.x===$.x&&this.y===$.y},dist:function($){return Math.sqrt(this.distSqr($))},distSqr:function($){var y=$.x-this.x,I=$.y-this.y;return y*y+I*I},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function($){return Math.atan2(this.y-$.y,this.x-$.x)},angleWith:function($){return this.angleWithSep($.x,$.y)},angleWithSep:function($,y){return Math.atan2(this.x*y-this.y*$,this.x*$+this.y*y)},_matMult:function($){var y=$[2]*this.x+$[3]*this.y;return this.x=$[0]*this.x+$[1]*this.y,this.y=y,this},_add:function($){return this.x+=$.x,this.y+=$.y,this},_sub:function($){return this.x-=$.x,this.y-=$.y,this},_mult:function($){return this.x*=$,this.y*=$,this},_div:function($){return this.x/=$,this.y/=$,this},_multByPoint:function($){return this.x*=$.x,this.y*=$.y,this},_divByPoint:function($){return this.x/=$.x,this.y/=$.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var $=this.y;return this.y=this.x,this.x=-$,this},_rotate:function($){var y=Math.cos($),I=Math.sin($),ee=I*this.x+y*this.y;return this.x=y*this.x-I*this.y,this.y=ee,this},_rotateAround:function($,y){var I=Math.cos($),ee=Math.sin($),re=y.y+ee*(this.x-y.x)+I*(this.y-y.y);return this.x=y.x+I*(this.x-y.x)-ee*(this.y-y.y),this.y=re,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ee.convert=function($){return $ instanceof Ee?$:Array.isArray($)?new Ee($[0],$[1]):$};const Ce=Math.PI/180,Se=180/Math.PI;function Oe($){return $*Ce}function De($){return $*Se}const Ue=[[0,0],[1,0],[1,1],[0,1]];function $e($){if($<=0)return 0;if($>=1)return 1;const y=$*$,I=y*$;return 4*($<.5?I:3*($-y)+I-.75)}function Fe($,y,I,ee){const re=new ce($,y,I,ee);return function(ge){return re.solve(ge)}}const Xe=Fe(.25,.1,.25,1);function Ye($,y,I){return Math.min(I,Math.max(y,$))}function He($,y,I){return(I=Ye((I-$)/(y-$),0,1))*I*(3-2*I)}function Je($,y,I){const ee=I-y,re=(($-y)%ee+ee)%ee+y;return re===y?I:re}function pt($,y,I){if(!$.length)return I(null,[]);let ee=$.length;const re=new Array($.length);let ge=null;$.forEach((ke,Ie)=>{y(ke,(ze,Le)=>{ze&&(ge=ze),re[Ie]=Le,--ee==0&&I(ge,re)})})}function It($){const y=[];for(const I in $)y.push($[I]);return y}function At($,...y){for(const I of y)for(const ee in I)$[ee]=I[ee];return $}let bt=1;function rt(){return bt++}function nt(){return function $(y){return y?(y^Math.random()*(16>>y/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,$)}()}function it($){return $<=1?1:Math.pow(2,Math.ceil(Math.log($)/Math.LN2))}function dt($){return!!$&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)}function lt($,y){$.forEach(I=>{y[I]&&(y[I]=y[I].bind(y))})}function ft($,y){return $.indexOf(y,$.length-y.length)!==-1}function xt($,y,I){const ee={};for(const re in $)ee[re]=y.call(I||this,$[re],re,$);return ee}function ht($,y,I){const ee={};for(const re in $)y.call(I||this,$[re],re,$)&&(ee[re]=$[re]);return ee}function Vt($){return Array.isArray($)?$.map(Vt):typeof $=="object"&&$?xt($,Vt):$}const st={};function $t($){st[$]||(typeof console!="undefined"&&console.warn($),st[$]=!0)}function ln($,y,I){return(I.y-$.y)*(y.x-$.x)>(y.y-$.y)*(I.x-$.x)}function Mn($){let y=0;for(let I,ee,re=0,ge=$.length,ke=ge-1;re<ge;ke=re++)I=$[re],ee=$[ke],y+=(ee.x-I.x)*(I.y+ee.y);return y}function on(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function an($){const y={};if($.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(I,ee,re,ge)=>{const ke=re||ge;return y[ee]=!ke||ke.toLowerCase(),""}),y["max-age"]){const I=parseInt(y["max-age"],10);isNaN(I)?delete y["max-age"]:y["max-age"]=I}return y}let Xt=null;function Rt($){if(Xt==null){const y=$.navigator?$.navigator.userAgent:null;Xt=!!$.safari||!(!y||!(/\b(iPad|iPhone|iPod)\b/.test(y)||y.match("Safari")&&!y.match("Chrome")))}return Xt}function en($){try{const y=be[$];return y.setItem("_mapbox_test_",1),y.removeItem("_mapbox_test_"),!0}catch{return!1}}function hn($,y){return[$[4*y],$[4*y+1],$[4*y+2],$[4*y+3]]}const vn=be.performance;function Pn($){const y=$?$.url.toString():void 0;return vn.getEntriesByName(y)}var Pt="2.10.0";let Dt,rn,bn,En;const zn={now:()=>bn!==void 0?bn:be.performance.now(),setNow($){bn=$},restoreNow(){bn=void 0},frame($){const y=be.requestAnimationFrame($);return{cancel:()=>be.cancelAnimationFrame(y)}},getImageData($,y=0){const{width:I,height:ee}=$;En||(En=be.document.createElement("canvas"));const re=En.getContext("2d");if(!re)throw new Error("failed to create canvas 2d context");return(I>En.width||ee>En.height)&&(En.width=I,En.height=ee),re.clearRect(-y,-y,I+2*y,ee+2*y),re.drawImage($,0,0,I,ee),re.getImageData(-y,-y,I+2*y,ee+2*y)},resolveURL:$=>(Dt||(Dt=be.document.createElement("a")),Dt.href=$,Dt.href),get devicePixelRatio(){return be.devicePixelRatio},get prefersReducedMotion(){return!!be.matchMedia&&(rn==null&&(rn=be.matchMedia("(prefers-reduced-motion: reduce)")),rn.matches)}};let $n;const xn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if($n==null){const $=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{$n={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):$}catch{$n=$}}return $n},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},wn={supported:!1,testSupport:function($){!nr&&Jn&&(fr?Yn($):Sn=$)}};let Sn,Jn,nr=!1,fr=!1;function Yn($){const y=$.createTexture();$.bindTexture($.TEXTURE_2D,y);try{if($.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,Jn),$.isContextLost())return;wn.supported=!0}catch{}$.deleteTexture(y),nr=!0}be.document&&(Jn=be.document.createElement("img"),Jn.onload=function(){Sn&&Yn(Sn),Sn=null,fr=!0},Jn.onerror=function(){nr=!0,Sn=null},Jn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const qn="01",un="NO_ACCESS_TOKEN";function yn($){return $.indexOf("mapbox:")===0}function Rn($){return xn.API_URL_REGEX.test($)}const Kn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function mr($){const y=$.match(Kn);if(!y)throw new Error("Unable to parse URL object");return{protocol:y[1],authority:y[2],path:y[3]||"/",params:y[4]?y[4].split("&"):[]}}function Cr($){const y=$.params.length?`?${$.params.join("&")}`:"";return`${$.protocol}://${$.authority}${$.path}${y}`}function Lr($){if(!$)return null;const y=$.split(".");if(!y||y.length!==3)return null;try{return JSON.parse(decodeURIComponent(be.atob(y[1]).split("").map(I=>"%"+("00"+I.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class br{constructor(y){this.type=y,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(y){const I=Lr(xn.ACCESS_TOKEN);let ee="";return ee=I&&I.u?be.btoa(encodeURIComponent(I.u).replace(/%([0-9A-F]{2})/g,(re,ge)=>String.fromCharCode(Number("0x"+ge)))):xn.ACCESS_TOKEN||"",y?`mapbox.eventData.${y}:${ee}`:`mapbox.eventData:${ee}`}fetchEventData(){const y=en("localStorage"),I=this.getStorageKey(),ee=this.getStorageKey("uuid");if(y)try{const re=be.localStorage.getItem(I);re&&(this.eventData=JSON.parse(re));const ge=be.localStorage.getItem(ee);ge&&(this.anonId=ge)}catch{$t("Unable to read from LocalStorage")}}saveEventData(){const y=en("localStorage"),I=this.getStorageKey(),ee=this.getStorageKey("uuid");if(y)try{be.localStorage.setItem(ee,this.anonId),Object.keys(this.eventData).length>=1&&be.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{$t("Unable to write to LocalStorage")}}processRequests(y){}postEvent(y,I,ee,re){if(!xn.EVENTS_URL)return;const ge=mr(xn.EVENTS_URL);ge.params.push(`access_token=${re||xn.ACCESS_TOKEN||""}`);const ke={event:this.type,created:new Date(y).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:Pt,skuId:qn,userId:this.anonId},Ie=I?At(ke,I):ke,ze={url:Cr(ge),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ie])};this.pendingRequest=jn(ze,Le=>{this.pendingRequest=null,ee(Le),this.saveEventData(),this.processRequests(re)})}queueRequest(y,I){this.queue.push(y),this.processRequests(I)}}const Br=new class extends br{constructor($){super("appUserTurnstile"),this._customAccessToken=$}postTurnstileEvent($,y){xn.EVENTS_URL&&xn.ACCESS_TOKEN&&Array.isArray($)&&$.some(I=>yn(I)||Rn(I))&&this.queueRequest(Date.now(),y)}processRequests($){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const y=Lr(xn.ACCESS_TOKEN),I=y?y.u:xn.ACCESS_TOKEN;let ee=I!==this.eventData.tokenU;dt(this.anonId)||(this.anonId=nt(),ee=!0);const re=this.queue.shift();if(this.eventData.lastSuccess){const ge=new Date(this.eventData.lastSuccess),ke=new Date(re),Ie=(re-this.eventData.lastSuccess)/864e5;ee=ee||Ie>=1||Ie<-1||ge.getDate()!==ke.getDate()}else ee=!0;ee?this.postEvent(re,{"enabled.telemetry":!1},ge=>{ge||(this.eventData.lastSuccess=re,this.eventData.tokenU=I)},$):this.processRequests()}},Fr=Br.postTurnstileEvent.bind(Br),Gr=new class extends br{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent($,y,I,ee){this.skuToken=y,this.errorCb=ee,xn.EVENTS_URL&&(I||xn.ACCESS_TOKEN?this.queueRequest({id:$,timestamp:Date.now()},I):this.errorCb(new Error(un)))}processRequests($){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:I}=this.queue.shift();y&&this.success[y]||(this.anonId||this.fetchEventData(),dt(this.anonId)||(this.anonId=nt()),this.postEvent(I,{skuToken:this.skuToken},ee=>{ee?this.errorCb(ee):y&&(this.success[y]=!0)},$))}},Ur=Gr.postMapLoadEvent.bind(Gr),Ri=new class extends br{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession($,y,I,ee){if(!xn.API_URL||!xn.SESSION_PATH)return;const re=mr(xn.API_URL+xn.SESSION_PATH);re.params.push(`sku=${y||""}`),re.params.push(`access_token=${ee||xn.ACCESS_TOKEN||""}`);const ge={url:Cr(re),headers:{"Content-Type":"text/plain"}};this.pendingRequest=sr(ge,ke=>{this.pendingRequest=null,I(ke),this.saveEventData(),this.processRequests(ee)})}getSessionAPI($,y,I,ee){this.skuToken=y,this.errorCb=ee,xn.SESSION_PATH&&xn.API_URL&&(I||xn.ACCESS_TOKEN?this.queueRequest({id:$,timestamp:Date.now()},I):this.errorCb(new Error(un)))}processRequests($){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:I}=this.queue.shift();y&&this.success[y]||this.getSession(I,this.skuToken,ee=>{ee?this.errorCb(ee):y&&(this.success[y]=!0)},$)}},Li=Ri.getSessionAPI.bind(Ri),Ti=new Set;let Sr,No=500,Ea=50,xi={};function la($){const y=_t($);let I,ee;y&&y.forEach(ge=>{const ke=ge.split("=");ke[0]==="language"?I=ke[1]:ke[0]==="worldview"&&(ee=ke[1])});let re="mapbox-tiles";return I&&(re+=`-${I}`),ee&&(re+=`-${ee}`),re}function Bt(){try{return be.caches}catch{}}function ct($){const y=Bt();y&&!xi[$]&&(xi[$]=y.open($))}function _t($){const y=$.indexOf("?");return y>0?$.slice(y+1).split("&"):[]}function Lt($){const y=$.indexOf("?");if(y<0)return $;const I=_t($).filter(ee=>{const re=ee.split("=");return re[0]==="language"||re[0]==="worldview"});return I.length?`${$.slice(0,y)}?${I.join("&")}`:$.slice(0,y)}let Ut=1/0;const tn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(tn);class fn extends Error{constructor(y,I,ee){I===401&&Rn(ee)&&(y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(y),this.status=I,this.url=ee}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const dn=on()?()=>self.worker&&self.worker.referrer:()=>(be.location.protocol==="blob:"?be.parent:be).location.href,nn=function($,y){if(!(/^file:/.test(I=$.url)||/^file:/.test(dn())&&!/^\w+:/.test(I))){if(be.fetch&&be.Request&&be.AbortController&&be.Request.prototype.hasOwnProperty("signal"))return function(ee,re){const ge=new be.AbortController,ke=new be.Request(ee.url,{method:ee.method||"GET",body:ee.body,credentials:ee.credentials,headers:ee.headers,referrer:dn(),signal:ge.signal});let Ie=!1,ze=!1;const Le=(Ve=ke.url).indexOf("sku=")>0&&Rn(Ve);var Ve;ee.type==="json"&&ke.headers.set("Accept","application/json");const We=(tt,ot,mt)=>{if(ze)return;if(tt&&tt.message!=="SecurityError"&&$t(tt),ot&&mt)return Ze(ot);const Et=Date.now();be.fetch(ke).then(Ft=>{if(Ft.ok){const Ht=Le?Ft.clone():null;return Ze(Ft,Ht,Et)}return re(new fn(Ft.statusText,Ft.status,ee.url))}).catch(Ft=>{Ft.code!==20&&re(new Error(Ft.message))})},Ze=(tt,ot,mt)=>{(ee.type==="arrayBuffer"?tt.arrayBuffer():ee.type==="json"?tt.json():tt.text()).then(Et=>{ze||(ot&&mt&&function(Ft,Ht,Nt){const qt=la(Ft.url);if(ct(qt),!xi[qt])return;const Jt={status:Ht.status,statusText:Ht.statusText,headers:new be.Headers};Ht.headers.forEach((An,On)=>Jt.headers.set(On,An));const Zt=an(Ht.headers.get("Cache-Control")||"");if(Zt["no-store"])return;Zt["max-age"]&&Jt.headers.set("Expires",new Date(Nt+1e3*Zt["max-age"]).toUTCString());const Tn=Jt.headers.get("Expires");Tn&&(new Date(Tn).getTime()-Nt<42e4||function(An,On){if(Sr===void 0)try{new Response(new ReadableStream),Sr=!0}catch{Sr=!1}Sr?On(An.body):An.blob().then(On)}(Ht,An=>{const On=new be.Response(An,Jt);ct(qt),xi[qt]&&xi[qt].then(Qn=>Qn.put(Lt(Ft.url),On)).catch(Qn=>$t(Qn.message))}))}(ke,ot,mt),Ie=!0,re(null,Et,tt.headers.get("Cache-Control"),tt.headers.get("Expires")))}).catch(Et=>{ze||re(new Error(Et.message))})};return Le?function(tt,ot){const mt=la(tt.url);if(ct(mt),!xi[mt])return ot(null);const Et=Lt(tt.url);xi[mt].then(Ft=>{Ft.match(Et).then(Ht=>{const Nt=function(qt){if(!qt)return!1;const Jt=new Date(qt.headers.get("Expires")||0),Zt=an(qt.headers.get("Cache-Control")||"");return Jt>Date.now()&&!Zt["no-cache"]}(Ht);Ft.delete(Et),Nt&&Ft.put(Et,Ht.clone()),ot(null,Ht,Nt)}).catch(ot)}).catch(ot)}(ke,We):We(null,null),{cancel:()=>{ze=!0,Ie||ge.abort()}}}($,y);if(on()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",$,y,void 0,!0)}var I;return function(ee,re){const ge=new be.XMLHttpRequest;ge.open(ee.method||"GET",ee.url,!0),ee.type==="arrayBuffer"&&(ge.responseType="arraybuffer");for(const ke in ee.headers)ge.setRequestHeader(ke,ee.headers[ke]);return ee.type==="json"&&(ge.responseType="text",ge.setRequestHeader("Accept","application/json")),ge.withCredentials=ee.credentials==="include",ge.onerror=()=>{re(new Error(ge.statusText))},ge.onload=()=>{if((ge.status>=200&&ge.status<300||ge.status===0)&&ge.response!==null){let ke=ge.response;if(ee.type==="json")try{ke=JSON.parse(ge.response)}catch(Ie){return re(Ie)}re(null,ke,ge.getResponseHeader("Cache-Control"),ge.getResponseHeader("Expires"))}else re(new fn(ge.statusText,ge.status,ee.url))},ge.send(ee.body),{cancel:()=>ge.abort()}}($,y)},_n=function($,y){return nn(At($,{type:"arrayBuffer"}),y)},jn=function($,y){return nn(At($,{method:"POST"}),y)},sr=function($,y){return nn(At($,{method:"GET"}),y)};function Hn($){const y=be.document.createElement("a");return y.href=$,y.protocol===be.document.location.protocol&&y.host===be.document.location.host}const Ar="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let wr,gr;wr=[],gr=0;const Er=function($,y){if(wn.supported&&($.headers||($.headers={}),$.headers.accept="image/webp,*/*"),gr>=xn.MAX_PARALLEL_IMAGE_REQUESTS){const ge={requestParameters:$,callback:y,cancelled:!1,cancel(){this.cancelled=!0}};return wr.push(ge),ge}gr++;let I=!1;const ee=()=>{if(!I)for(I=!0,gr--;wr.length&&gr<xn.MAX_PARALLEL_IMAGE_REQUESTS;){const ge=wr.shift(),{requestParameters:ke,callback:Ie,cancelled:ze}=ge;ze||(ge.cancel=Er(ke,Ie).cancel)}},re=_n($,(ge,ke,Ie,ze)=>{ee(),ge?y(ge):ke&&(be.createImageBitmap?function(Le,Ve){const We=new be.Blob([new Uint8Array(Le)],{type:"image/png"});be.createImageBitmap(We).then(Ze=>{Ve(null,Ze)}).catch(Ze=>{Ve(new Error(`Could not load image because of ${Ze.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(ke,(Le,Ve)=>y(Le,Ve,Ie,ze)):function(Le,Ve){const We=new be.Image,Ze=be.URL;We.onload=()=>{Ve(null,We),Ze.revokeObjectURL(We.src),We.onload=null,be.requestAnimationFrame(()=>{We.src=Ar})},We.onerror=()=>Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const tt=new be.Blob([new Uint8Array(Le)],{type:"image/png"});We.src=Le.byteLength?Ze.createObjectURL(tt):Ar}(ke,(Le,Ve)=>y(Le,Ve,Ie,ze)))});return{cancel:()=>{re.cancel(),ee()}}};function $r($,y,I){I[$]&&I[$].indexOf(y)!==-1||(I[$]=I[$]||[],I[$].push(y))}function ei($,y,I){if(I&&I[$]){const ee=I[$].indexOf(y);ee!==-1&&I[$].splice(ee,1)}}class ai{constructor(y,I={}){At(this,I),this.type=y}}class ni extends ai{constructor(y,I={}){super("error",At({error:y},I))}}class xr{on(y,I){return this._listeners=this._listeners||{},$r(y,I,this._listeners),this}off(y,I){return ei(y,I,this._listeners),ei(y,I,this._oneTimeListeners),this}once(y,I){return I?(this._oneTimeListeners=this._oneTimeListeners||{},$r(y,I,this._oneTimeListeners),this):new Promise(ee=>this.once(y,ee))}fire(y,I){typeof y=="string"&&(y=new ai(y,I||{}));const ee=y.type;if(this.listens(ee)){y.target=this;const re=this._listeners&&this._listeners[ee]?this._listeners[ee].slice():[];for(const Ie of re)Ie.call(this,y);const ge=this._oneTimeListeners&&this._oneTimeListeners[ee]?this._oneTimeListeners[ee].slice():[];for(const Ie of ge)ei(ee,Ie,this._oneTimeListeners),Ie.call(this,y);const ke=this._eventedParent;ke&&(At(y,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ke.fire(y))}else y instanceof ni&&console.error(y.error);return this}listens(y){return!!(this._listeners&&this._listeners[y]&&this._listeners[y].length>0||this._oneTimeListeners&&this._oneTimeListeners[y]&&this._oneTimeListeners[y].length>0||this._eventedParent&&this._eventedParent.listens(y))}setEventedParent(y,I){return this._eventedParent=y,this._eventedParentData=I,this}}var gn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function fo($,...y){for(const I of y)for(const ee in I)$[ee]=I[ee];return $}function ki($){return $ instanceof Number||$ instanceof String||$ instanceof Boolean?$.valueOf():$}function ca($){if(Array.isArray($))return $.map(ca);if($ instanceof Object&&!($ instanceof Number||$ instanceof String||$ instanceof Boolean)){const y={};for(const I in $)y[I]=ca($[I]);return y}return ki($)}class Ta extends Error{constructor(y,I){super(I),this.message=I,this.key=y}}var Po=Ta;class dl{constructor(y,I=[]){this.parent=y,this.bindings={};for(const[ee,re]of I)this.bindings[ee]=re}concat(y){return new dl(this,y)}get(y){if(this.bindings[y])return this.bindings[y];if(this.parent)return this.parent.get(y);throw new Error(`${y} not found in scope.`)}has(y){return!!this.bindings[y]||!!this.parent&&this.parent.has(y)}}var Ku=dl;const ua={kind:"null"},lr={kind:"number"},Or={kind:"string"},Nr={kind:"boolean"},Oo={kind:"color"},Ro={kind:"object"},Pr={kind:"value"},Ts={kind:"collator"},ha={kind:"formatted"},ks={kind:"resolvedImage"};function _o($,y){return{kind:"array",itemType:$,N:y}}function bi($){if($.kind==="array"){const y=bi($.itemType);return typeof $.N=="number"?`array<${y}, ${$.N}>`:$.itemType.kind==="value"?"array":`array<${y}>`}return $.kind}const Qc=[ua,lr,Or,Nr,Oo,ha,Ro,_o(Pr),ks];function Xa($,y){if(y.kind==="error")return null;if($.kind==="array"){if(y.kind==="array"&&(y.N===0&&y.itemType.kind==="value"||!Xa($.itemType,y.itemType))&&(typeof $.N!="number"||$.N===y.N))return null}else{if($.kind===y.kind)return null;if($.kind==="value"){for(const I of Qc)if(!Xa(I,y))return null}}return`Expected ${bi($)} but found ${bi(y)} instead.`}function pl($,y){return y.some(I=>I.kind===$.kind)}function da($,y){return y.some(I=>I==="null"?$===null:I==="array"?Array.isArray($):I==="object"?$&&!Array.isArray($)&&typeof $=="object":I===typeof $)}function ic($){var y={exports:{}};return $(y,y.exports),y.exports}var pa=ic(function($,y){var I={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ee(Ie){return(Ie=Math.round(Ie))<0?0:Ie>255?255:Ie}function re(Ie){return ee(Ie[Ie.length-1]==="%"?parseFloat(Ie)/100*255:parseInt(Ie))}function ge(Ie){return(ze=Ie[Ie.length-1]==="%"?parseFloat(Ie)/100:parseFloat(Ie))<0?0:ze>1?1:ze;var ze}function ke(Ie,ze,Le){return Le<0?Le+=1:Le>1&&(Le-=1),6*Le<1?Ie+(ze-Ie)*Le*6:2*Le<1?ze:3*Le<2?Ie+(ze-Ie)*(2/3-Le)*6:Ie}try{y.parseCSSColor=function(Ie){var ze,Le=Ie.replace(/ /g,"").toLowerCase();if(Le in I)return I[Le].slice();if(Le[0]==="#")return Le.length===4?(ze=parseInt(Le.substr(1),16))>=0&&ze<=4095?[(3840&ze)>>4|(3840&ze)>>8,240&ze|(240&ze)>>4,15&ze|(15&ze)<<4,1]:null:Le.length===7&&(ze=parseInt(Le.substr(1),16))>=0&&ze<=16777215?[(16711680&ze)>>16,(65280&ze)>>8,255&ze,1]:null;var Ve=Le.indexOf("("),We=Le.indexOf(")");if(Ve!==-1&&We+1===Le.length){var Ze=Le.substr(0,Ve),tt=Le.substr(Ve+1,We-(Ve+1)).split(","),ot=1;switch(Ze){case"rgba":if(tt.length!==4)return null;ot=ge(tt.pop());case"rgb":return tt.length!==3?null:[re(tt[0]),re(tt[1]),re(tt[2]),ot];case"hsla":if(tt.length!==4)return null;ot=ge(tt.pop());case"hsl":if(tt.length!==3)return null;var mt=(parseFloat(tt[0])%360+360)%360/360,Et=ge(tt[1]),Ft=ge(tt[2]),Ht=Ft<=.5?Ft*(Et+1):Ft+Et-Ft*Et,Nt=2*Ft-Ht;return[ee(255*ke(Nt,Ht,mt+1/3)),ee(255*ke(Nt,Ht,mt)),ee(255*ke(Nt,Ht,mt-1/3)),ot];default:return null}}return null}}catch{}});class Xi{constructor(y,I,ee,re=1){this.r=y,this.g=I,this.b=ee,this.a=re}static parse(y){if(!y)return;if(y instanceof Xi)return y;if(typeof y!="string")return;const I=pa.parseCSSColor(y);return I?new Xi(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3]):void 0}toString(){const[y,I,ee,re]=this.toArray();return`rgba(${Math.round(y)},${Math.round(I)},${Math.round(ee)},${re})`}toArray(){const{r:y,g:I,b:ee,a:re}=this;return re===0?[0,0,0,0]:[255*y/re,255*I/re,255*ee/re,re]}toArray01(){const{r:y,g:I,b:ee,a:re}=this;return re===0?[0,0,0,0]:[y/re,I/re,ee/re,re]}toArray01PremultipliedAlpha(){const{r:y,g:I,b:ee,a:re}=this;return[y,I,ee,re]}}Xi.black=new Xi(0,0,0,1),Xi.white=new Xi(1,1,1,1),Xi.transparent=new Xi(0,0,0,0),Xi.red=new Xi(1,0,0,1),Xi.blue=new Xi(0,0,1,1);var ii=Xi;class oc{constructor(y,I,ee){this.sensitivity=y?I?"variant":"case":I?"accent":"base",this.locale=ee,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(y,I){return this.collator.compare(y,I)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Cs{constructor(y,I,ee,re,ge){this.text=y.normalize?y.normalize():y,this.image=I,this.scale=ee,this.fontStack=re,this.textColor=ge}}class ao{constructor(y){this.sections=y}static fromString(y){return new ao([new Cs(y,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(y=>y.text.length!==0||y.image&&y.image.name.length!==0)}static factory(y){return y instanceof ao?y:ao.fromString(y)}toString(){return this.sections.length===0?"":this.sections.map(y=>y.text).join("")}serialize(){const y=["format"];for(const I of this.sections){if(I.image){y.push(["image",I.image.name]);continue}y.push(I.text);const ee={};I.fontStack&&(ee["text-font"]=["literal",I.fontStack.split(",")]),I.scale&&(ee["font-scale"]=I.scale),I.textColor&&(ee["text-color"]=["rgba"].concat(I.textColor.toArray())),y.push(ee)}return y}}class so{constructor(y){this.name=y.name,this.available=y.available}toString(){return this.name}static fromString(y){return y?new so({name:y,available:!1}):null}serialize(){return["image",this.name]}}function ac($,y,I,ee){return typeof $=="number"&&$>=0&&$<=255&&typeof y=="number"&&y>=0&&y<=255&&typeof I=="number"&&I>=0&&I<=255?ee===void 0||typeof ee=="number"&&ee>=0&&ee<=1?null:`Invalid rgba value [${[$,y,I,ee].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ee=="number"?[$,y,I,ee]:[$,y,I]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fa($){if($===null||typeof $=="string"||typeof $=="boolean"||typeof $=="number"||$ instanceof ii||$ instanceof oc||$ instanceof ao||$ instanceof so)return!0;if(Array.isArray($)){for(const y of $)if(!fa(y))return!1;return!0}if(typeof $=="object"){for(const y in $)if(!fa($[y]))return!1;return!0}return!1}function Oi($){if($===null)return ua;if(typeof $=="string")return Or;if(typeof $=="boolean")return Nr;if(typeof $=="number")return lr;if($ instanceof ii)return Oo;if($ instanceof oc)return Ts;if($ instanceof ao)return ha;if($ instanceof so)return ks;if(Array.isArray($)){const y=$.length;let I;for(const ee of $){const re=Oi(ee);if(I){if(I===re)continue;I=Pr;break}I=re}return _o(I||Pr,y)}return Ro}function Ss($){const y=typeof $;return $===null?"":y==="string"||y==="number"||y==="boolean"?String($):$ instanceof ii||$ instanceof ao||$ instanceof so?$.toString():JSON.stringify($)}class Is{constructor(y,I){this.type=y,this.value=I}static parse(y,I){if(y.length!==2)return I.error(`'literal' expression requires exactly one argument, but found ${y.length-1} instead.`);if(!fa(y[1]))return I.error("invalid value");const ee=y[1];let re=Oi(ee);const ge=I.expectedType;return re.kind!=="array"||re.N!==0||!ge||ge.kind!=="array"||typeof ge.N=="number"&&ge.N!==0||(re=ge),new Is(re,ee)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ii?["rgba"].concat(this.value.toArray()):this.value instanceof ao?this.value.serialize():this.value}}var Ms=Is,Ui=class{constructor($){this.name="ExpressionEvaluationError",this.message=$}toJSON(){return this.message}};const Ps={string:Or,number:lr,boolean:Nr,object:Ro};class Os{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");let ee,re=1;const ge=y[0];if(ge==="array"){let Ie,ze;if(y.length>2){const Le=y[1];if(typeof Le!="string"||!(Le in Ps)||Le==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);Ie=Ps[Le],re++}else Ie=Pr;if(y.length>3){if(y[2]!==null&&(typeof y[2]!="number"||y[2]<0||y[2]!==Math.floor(y[2])))return I.error('The length argument to "array" must be a positive integer literal',2);ze=y[2],re++}ee=_o(Ie,ze)}else ee=Ps[ge];const ke=[];for(;re<y.length;re++){const Ie=I.parse(y[re],re,Pr);if(!Ie)return null;ke.push(Ie)}return new Os(ee,ke)}evaluate(y){for(let I=0;I<this.args.length;I++){const ee=this.args[I].evaluate(y);if(!Xa(this.type,Oi(ee)))return ee;if(I===this.args.length-1)throw new Ui(`Expected value to be of type ${bi(this.type)}, but found ${bi(Oi(ee))} instead.`)}return null}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=this.type,I=[y.kind];if(y.kind==="array"){const ee=y.itemType;if(ee.kind==="string"||ee.kind==="number"||ee.kind==="boolean"){I.push(ee.kind);const re=y.N;(typeof re=="number"||this.args.length>1)&&I.push(re)}}return I.concat(this.args.map(ee=>ee.serialize()))}}var vo=Os;class Rs{constructor(y){this.type=ha,this.sections=y}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");const ee=y[1];if(!Array.isArray(ee)&&typeof ee=="object")return I.error("First argument must be an image or text section.");const re=[];let ge=!1;for(let ke=1;ke<=y.length-1;++ke){const Ie=y[ke];if(ge&&typeof Ie=="object"&&!Array.isArray(Ie)){ge=!1;let ze=null;if(Ie["font-scale"]&&(ze=I.parse(Ie["font-scale"],1,lr),!ze))return null;let Le=null;if(Ie["text-font"]&&(Le=I.parse(Ie["text-font"],1,_o(Or)),!Le))return null;let Ve=null;if(Ie["text-color"]&&(Ve=I.parse(Ie["text-color"],1,Oo),!Ve))return null;const We=re[re.length-1];We.scale=ze,We.font=Le,We.textColor=Ve}else{const ze=I.parse(y[ke],1,Pr);if(!ze)return null;const Le=ze.type.kind;if(Le!=="string"&&Le!=="value"&&Le!=="null"&&Le!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");ge=!0,re.push({content:ze,scale:null,font:null,textColor:null})}}return new Rs(re)}evaluate(y){return new ao(this.sections.map(I=>{const ee=I.content.evaluate(y);return Oi(ee)===ks?new Cs("",ee,null,null,null):new Cs(Ss(ee),null,I.scale?I.scale.evaluate(y):null,I.font?I.font.evaluate(y).join(","):null,I.textColor?I.textColor.evaluate(y):null)}))}eachChild(y){for(const I of this.sections)y(I.content),I.scale&&y(I.scale),I.font&&y(I.font),I.textColor&&y(I.textColor)}outputDefined(){return!1}serialize(){const y=["format"];for(const I of this.sections){y.push(I.content.serialize());const ee={};I.scale&&(ee["font-scale"]=I.scale.serialize()),I.font&&(ee["text-font"]=I.font.serialize()),I.textColor&&(ee["text-color"]=I.textColor.serialize()),y.push(ee)}return y}}class fl{constructor(y){this.type=ks,this.input=y}static parse(y,I){if(y.length!==2)return I.error("Expected two arguments.");const ee=I.parse(y[1],1,Or);return ee?new fl(ee):I.error("No image name provided.")}evaluate(y){const I=this.input.evaluate(y),ee=so.fromString(I);return ee&&y.availableImages&&(ee.available=y.availableImages.indexOf(I)>-1),ee}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Qu={"to-boolean":Nr,"to-color":Oo,"to-number":lr,"to-string":Or};class sc{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");const ee=y[0];if((ee==="to-boolean"||ee==="to-string")&&y.length!==2)return I.error("Expected one argument.");const re=Qu[ee],ge=[];for(let ke=1;ke<y.length;ke++){const Ie=I.parse(y[ke],ke,Pr);if(!Ie)return null;ge.push(Ie)}return new sc(re,ge)}evaluate(y){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(y));if(this.type.kind==="color"){let I,ee;for(const re of this.args){if(I=re.evaluate(y),ee=null,I instanceof ii)return I;if(typeof I=="string"){const ge=y.parseColor(I);if(ge)return ge}else if(Array.isArray(I)&&(ee=I.length<3||I.length>4?`Invalid rbga value ${JSON.stringify(I)}: expected an array containing either three or four numeric values.`:ac(I[0],I[1],I[2],I[3]),!ee))return new ii(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new Ui(ee||`Could not parse color from value '${typeof I=="string"?I:String(JSON.stringify(I))}'`)}if(this.type.kind==="number"){let I=null;for(const ee of this.args){if(I=ee.evaluate(y),I===null)return 0;const re=Number(I);if(!isNaN(re))return re}throw new Ui(`Could not convert ${JSON.stringify(I)} to number.`)}return this.type.kind==="formatted"?ao.fromString(Ss(this.args[0].evaluate(y))):this.type.kind==="resolvedImage"?so.fromString(Ss(this.args[0].evaluate(y))):Ss(this.args[0].evaluate(y))}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Rs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new fl(this.args[0]).serialize();const y=[`to-${this.type.kind}`];return this.eachChild(I=>{y.push(I.serialize())}),y}}var ka=sc;const Ju=["Unknown","Point","LineString","Polygon"];var Jc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ju[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const $=this.featureDistanceData.center,y=this.featureDistanceData.scale,{x:I,y:ee}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(I*y-$[0])+this.featureDistanceData.bearing[1]*(ee*y-$[1])}return 0}parseColor($){let y=this._parseColorCache[$];return y||(y=this._parseColorCache[$]=ii.parse($)),y}};class Ca{constructor(y,I,ee,re){this.name=y,this.type=I,this._evaluate=ee,this.args=re}evaluate(y){return this._evaluate(y,this.args)}eachChild(y){this.args.forEach(y)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(y=>y.serialize()))}static parse(y,I){const ee=y[0],re=Ca.definitions[ee];if(!re)return I.error(`Unknown expression "${ee}". If you wanted a literal array, use ["literal", [...]].`,0);const ge=Array.isArray(re)?re[0]:re.type,ke=Array.isArray(re)?[[re[1],re[2]]]:re.overloads,Ie=ke.filter(([Le])=>!Array.isArray(Le)||Le.length===y.length-1);let ze=null;for(const[Le,Ve]of Ie){ze=new Ia(I.registry,I.path,null,I.scope);const We=[];let Ze=!1;for(let tt=1;tt<y.length;tt++){const ot=y[tt],mt=Array.isArray(Le)?Le[tt-1]:Le.type,Et=ze.parse(ot,1+We.length,mt);if(!Et){Ze=!0;break}We.push(Et)}if(!Ze)if(Array.isArray(Le)&&Le.length!==We.length)ze.error(`Expected ${Le.length} arguments, but found ${We.length} instead.`);else{for(let tt=0;tt<We.length;tt++){const ot=Array.isArray(Le)?Le[tt]:Le.type,mt=We[tt];ze.concat(tt+1).checkSubtype(ot,mt.type)}if(ze.errors.length===0)return new Ca(ee,ge,Ve,We)}}if(Ie.length===1)I.errors.push(...ze.errors);else{const Le=(Ie.length?Ie:ke).map(([We])=>{return Ze=We,Array.isArray(Ze)?`(${Ze.map(bi).join(", ")})`:`(${bi(Ze.type)}...)`;var Ze}).join(" | "),Ve=[];for(let We=1;We<y.length;We++){const Ze=I.parse(y[We],1+Ve.length);if(!Ze)return null;Ve.push(bi(Ze.type))}I.error(`Expected arguments of type ${Le}, but found (${Ve.join(", ")}) instead.`)}return null}static register(y,I){Ca.definitions=I;for(const ee in I)y[ee]=Ca}}var lo=Ca;class _l{constructor(y,I,ee){this.type=Ts,this.locale=ee,this.caseSensitive=y,this.diacriticSensitive=I}static parse(y,I){if(y.length!==2)return I.error("Expected one argument.");const ee=y[1];if(typeof ee!="object"||Array.isArray(ee))return I.error("Collator options argument must be an object.");const re=I.parse(ee["case-sensitive"]!==void 0&&ee["case-sensitive"],1,Nr);if(!re)return null;const ge=I.parse(ee["diacritic-sensitive"]!==void 0&&ee["diacritic-sensitive"],1,Nr);if(!ge)return null;let ke=null;return ee.locale&&(ke=I.parse(ee.locale,1,Or),!ke)?null:new _l(re,ge,ke)}evaluate(y){return new oc(this.caseSensitive.evaluate(y),this.diacriticSensitive.evaluate(y),this.locale?this.locale.evaluate(y):null)}eachChild(y){y(this.caseSensitive),y(this.diacriticSensitive),this.locale&&y(this.locale)}outputDefined(){return!1}serialize(){const y={};return y["case-sensitive"]=this.caseSensitive.serialize(),y["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(y.locale=this.locale.serialize()),["collator",y]}}const Do=8192;function lc($,y){$[0]=Math.min($[0],y[0]),$[1]=Math.min($[1],y[1]),$[2]=Math.max($[2],y[0]),$[3]=Math.max($[3],y[1])}function ml($,y){return!($[0]<=y[0]||$[2]>=y[2]||$[1]<=y[1]||$[3]>=y[3])}function eh($,y){const I=(180+$[0])/360,ee=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+$[1]*Math.PI/360)))/360,re=Math.pow(2,y.z);return[Math.round(I*re*Do),Math.round(ee*re*Do)]}function Ds($,y,I){const ee=$[0]-y[0],re=$[1]-y[1],ge=$[0]-I[0],ke=$[1]-I[1];return ee*ke-ge*re==0&&ee*ge<=0&&re*ke<=0}function gl($,y){let I=!1;for(let ke=0,Ie=y.length;ke<Ie;ke++){const ze=y[ke];for(let Le=0,Ve=ze.length;Le<Ve-1;Le++){if(Ds($,ze[Le],ze[Le+1]))return!1;(re=ze[Le])[1]>(ee=$)[1]!=(ge=ze[Le+1])[1]>ee[1]&&ee[0]<(ge[0]-re[0])*(ee[1]-re[1])/(ge[1]-re[1])+re[0]&&(I=!I)}}var ee,re,ge;return I}function zs($,y){for(let I=0;I<y.length;I++)if(gl($,y[I]))return!0;return!1}function eu($,y,I,ee){const re=ee[0]-I[0],ge=ee[1]-I[1],ke=($[0]-I[0])*ge-re*($[1]-I[1]),Ie=(y[0]-I[0])*ge-re*(y[1]-I[1]);return ke>0&&Ie<0||ke<0&&Ie>0}function th($,y,I){for(const Le of I)for(let Ve=0;Ve<Le.length-1;++Ve)if((Ie=[(ke=Le[Ve+1])[0]-(ge=Le[Ve])[0],ke[1]-ge[1]])[0]*(ze=[(re=y)[0]-(ee=$)[0],re[1]-ee[1]])[1]-Ie[1]*ze[0]!=0&&eu(ee,re,ge,ke)&&eu(ge,ke,ee,re))return!0;var ee,re,ge,ke,Ie,ze;return!1}function tu($,y){for(let I=0;I<$.length;++I)if(!gl($[I],y))return!1;for(let I=0;I<$.length-1;++I)if(th($[I],$[I+1],y))return!1;return!0}function nh($,y){for(let I=0;I<y.length;I++)if(tu($,y[I]))return!0;return!1}function xo($,y,I){const ee=[];for(let re=0;re<$.length;re++){const ge=[];for(let ke=0;ke<$[re].length;ke++){const Ie=eh($[re][ke],I);lc(y,Ie),ge.push(Ie)}ee.push(ge)}return ee}function Sa($,y,I){const ee=[];for(let re=0;re<$.length;re++){const ge=xo($[re],y,I);ee.push(ge)}return ee}function cc($,y,I,ee){if($[0]<I[0]||$[0]>I[2]){const re=.5*ee;let ge=$[0]-I[0]>re?-ee:I[0]-$[0]>re?ee:0;ge===0&&(ge=$[0]-I[2]>re?-ee:I[2]-$[0]>re?ee:0),$[0]+=ge}lc(y,$)}function yl($,y,I,ee){const re=Math.pow(2,ee.z)*Do,ge=[ee.x*Do,ee.y*Do],ke=[];if(!$)return ke;for(const Ie of $)for(const ze of Ie){const Le=[ze.x+ge[0],ze.y+ge[1]];cc(Le,y,I,re),ke.push(Le)}return ke}function uc($,y,I,ee){const re=Math.pow(2,ee.z)*Do,ge=[ee.x*Do,ee.y*Do],ke=[];if(!$)return ke;for(const ze of $){const Le=[];for(const Ve of ze){const We=[Ve.x+ge[0],Ve.y+ge[1]];lc(y,We),Le.push(We)}ke.push(Le)}if(y[2]-y[0]<=re/2){(Ie=y)[0]=Ie[1]=1/0,Ie[2]=Ie[3]=-1/0;for(const ze of ke)for(const Le of ze)cc(Le,y,I,re)}var Ie;return ke}class Ya{constructor(y,I){this.type=Nr,this.geojson=y,this.geometries=I}static parse(y,I){if(y.length!==2)return I.error(`'within' expression requires exactly one argument, but found ${y.length-1} instead.`);if(fa(y[1])){const ee=y[1];if(ee.type==="FeatureCollection")for(let re=0;re<ee.features.length;++re){const ge=ee.features[re].geometry.type;if(ge==="Polygon"||ge==="MultiPolygon")return new Ya(ee,ee.features[re].geometry)}else if(ee.type==="Feature"){const re=ee.geometry.type;if(re==="Polygon"||re==="MultiPolygon")return new Ya(ee,ee.geometry)}else if(ee.type==="Polygon"||ee.type==="MultiPolygon")return new Ya(ee,ee)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(y){if(y.geometry()!=null&&y.canonicalID()!=null){if(y.geometryType()==="Point")return function(I,ee){const re=[1/0,1/0,-1/0,-1/0],ge=[1/0,1/0,-1/0,-1/0],ke=I.canonicalID();if(!ke)return!1;if(ee.type==="Polygon"){const Ie=xo(ee.coordinates,ge,ke),ze=yl(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of ze)if(!gl(Le,Ie))return!1}if(ee.type==="MultiPolygon"){const Ie=Sa(ee.coordinates,ge,ke),ze=yl(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of ze)if(!zs(Le,Ie))return!1}return!0}(y,this.geometries);if(y.geometryType()==="LineString")return function(I,ee){const re=[1/0,1/0,-1/0,-1/0],ge=[1/0,1/0,-1/0,-1/0],ke=I.canonicalID();if(!ke)return!1;if(ee.type==="Polygon"){const Ie=xo(ee.coordinates,ge,ke),ze=uc(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of ze)if(!tu(Le,Ie))return!1}if(ee.type==="MultiPolygon"){const Ie=Sa(ee.coordinates,ge,ke),ze=uc(I.geometry(),re,ge,ke);if(!ml(re,ge))return!1;for(const Le of ze)if(!nh(Le,Ie))return!1}return!0}(y,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var vl=Ya;function jo($){if($ instanceof lo&&($.name==="get"&&$.args.length===1||$.name==="feature-state"||$.name==="has"&&$.args.length===1||$.name==="properties"||$.name==="geometry-type"||$.name==="id"||/^filter-/.test($.name))||$ instanceof vl)return!1;let y=!0;return $.eachChild(I=>{y&&!jo(I)&&(y=!1)}),y}function _a($){if($ instanceof lo&&$.name==="feature-state")return!1;let y=!0;return $.eachChild(I=>{y&&!_a(I)&&(y=!1)}),y}function Uo($,y){if($ instanceof lo&&y.indexOf($.name)>=0)return!1;let I=!0;return $.eachChild(ee=>{I&&!Uo(ee,y)&&(I=!1)}),I}class xl{constructor(y,I){this.type=I.type,this.name=y,this.boundExpression=I}static parse(y,I){if(y.length!==2||typeof y[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");const ee=y[1];return I.scope.has(ee)?new xl(ee,I.scope.get(ee)):I.error(`Unknown variable "${ee}". Make sure "${ee}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(y){return this.boundExpression.evaluate(y)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var $s=xl;class bl{constructor(y,I=[],ee,re=new Ku,ge=[]){this.registry=y,this.path=I,this.key=I.map(ke=>`[${ke}]`).join(""),this.scope=re,this.errors=ge,this.expectedType=ee}parse(y,I,ee,re,ge={}){return I?this.concat(I,ee,re)._parse(y,ge):this._parse(y,ge)}_parse(y,I){function ee(re,ge,ke){return ke==="assert"?new vo(ge,[re]):ke==="coerce"?new ka(ge,[re]):re}if(y!==null&&typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"||(y=["literal",y]),Array.isArray(y)){if(y.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const re=y[0];if(typeof re!="string")return this.error(`Expression name must be a string, but found ${typeof re} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const ge=this.registry[re];if(ge){let ke=ge.parse(y,this);if(!ke)return null;if(this.expectedType){const Ie=this.expectedType,ze=ke.type;if(Ie.kind!=="string"&&Ie.kind!=="number"&&Ie.kind!=="boolean"&&Ie.kind!=="object"&&Ie.kind!=="array"||ze.kind!=="value")if(Ie.kind!=="color"&&Ie.kind!=="formatted"&&Ie.kind!=="resolvedImage"||ze.kind!=="value"&&ze.kind!=="string"){if(this.checkSubtype(Ie,ze))return null}else ke=ee(ke,Ie,I.typeAnnotation||"coerce");else ke=ee(ke,Ie,I.typeAnnotation||"assert")}if(!(ke instanceof Ms)&&ke.type.kind!=="resolvedImage"&&Kr(ke)){const Ie=new Jc;try{ke=new Ms(ke.type,ke.evaluate(Ie))}catch(ze){return this.error(ze.message),null}}return ke}return this.error(`Unknown expression "${re}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(y===void 0?"'undefined' value invalid. Use null instead.":typeof y=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof y} instead.`)}concat(y,I,ee){const re=typeof y=="number"?this.path.concat(y):this.path,ge=ee?this.scope.concat(ee):this.scope;return new bl(this.registry,re,I||null,ge,this.errors)}error(y,...I){const ee=`${this.key}${I.map(re=>`[${re}]`).join("")}`;this.errors.push(new Po(ee,y))}checkSubtype(y,I){const ee=Xa(y,I);return ee&&this.error(ee),ee}}var Ia=bl;function Kr($){if($ instanceof $s)return Kr($.boundExpression);if($ instanceof lo&&$.name==="error"||$ instanceof _l||$ instanceof vl)return!1;const y=$ instanceof ka||$ instanceof vo;let I=!0;return $.eachChild(ee=>{I=y?I&&Kr(ee):I&&ee instanceof Ms}),!!I&&jo($)&&Uo($,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Al($,y){const I=$.length-1;let ee,re,ge=0,ke=I,Ie=0;for(;ge<=ke;)if(Ie=Math.floor((ge+ke)/2),ee=$[Ie],re=$[Ie+1],ee<=y){if(Ie===I||y<re)return Ie;ge=Ie+1}else{if(!(ee>y))throw new Ui("Input is not a number.");ke=Ie-1}return 0}class hc{constructor(y,I,ee){this.type=y,this.input=I,this.labels=[],this.outputs=[];for(const[re,ge]of ee)this.labels.push(re),this.outputs.push(ge)}static parse(y,I){if(y.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return I.error("Expected an even number of arguments.");const ee=I.parse(y[1],1,lr);if(!ee)return null;const re=[];let ge=null;I.expectedType&&I.expectedType.kind!=="value"&&(ge=I.expectedType);for(let ke=1;ke<y.length;ke+=2){const Ie=ke===1?-1/0:y[ke],ze=y[ke+1],Le=ke,Ve=ke+1;if(typeof Ie!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Le);if(re.length&&re[re.length-1][0]>=Ie)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Le);const We=I.parse(ze,Ve,ge);if(!We)return null;ge=ge||We.type,re.push([Ie,We])}return new hc(ge,ee,re)}evaluate(y){const I=this.labels,ee=this.outputs;if(I.length===1)return ee[0].evaluate(y);const re=this.input.evaluate(y);if(re<=I[0])return ee[0].evaluate(y);const ge=I.length;return re>=I[ge-1]?ee[ge-1].evaluate(y):ee[Al(I,re)].evaluate(y)}eachChild(y){y(this.input);for(const I of this.outputs)y(I)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){const y=["step",this.input.serialize()];for(let I=0;I<this.labels.length;I++)I>0&&y.push(this.labels[I]),y.push(this.outputs[I].serialize());return y}}var dc=hc;function Wr($,y,I){return $*(1-I)+y*I}function Ka($,y,I){return $.map((ee,re)=>Wr(ee,y[re],I))}var Ls=Object.freeze({__proto__:null,number:Wr,color:function($,y,I){return new ii(Wr($.r,y.r,I),Wr($.g,y.g,I),Wr($.b,y.b,I),Wr($.a,y.a,I))},array:Ka});const zo=.95047,pc=1.08883,wl=4/29,ma=6/29,Qa=3*ma*ma,rh=Math.PI/180,Jo=180/Math.PI;function El($){return $>.008856451679035631?Math.pow($,1/3):$/Qa+wl}function Bs($){return $>ma?$*$*$:Qa*($-wl)}function fc($){return 255*($<=.0031308?12.92*$:1.055*Math.pow($,1/2.4)-.055)}function Tl($){return($/=255)<=.04045?$/12.92:Math.pow(($+.055)/1.055,2.4)}function nu($){const y=Tl($.r),I=Tl($.g),ee=Tl($.b),re=El((.4124564*y+.3575761*I+.1804375*ee)/zo),ge=El((.2126729*y+.7151522*I+.072175*ee)/1);return{l:116*ge-16,a:500*(re-ge),b:200*(ge-El((.0193339*y+.119192*I+.9503041*ee)/pc)),alpha:$.a}}function kl($){let y=($.l+16)/116,I=isNaN($.a)?y:y+$.a/500,ee=isNaN($.b)?y:y-$.b/200;return y=1*Bs(y),I=zo*Bs(I),ee=pc*Bs(ee),new ii(fc(3.2404542*I-1.5371385*y-.4985314*ee),fc(-.969266*I+1.8760108*y+.041556*ee),fc(.0556434*I-.2040259*y+1.0572252*ee),$.alpha)}function ru($,y,I){const ee=y-$;return $+I*(ee>180||ee<-180?ee-360*Math.round(ee/360):ee)}const Vo={forward:nu,reverse:kl,interpolate:function($,y,I){return{l:Wr($.l,y.l,I),a:Wr($.a,y.a,I),b:Wr($.b,y.b,I),alpha:Wr($.alpha,y.alpha,I)}}},Ja={forward:function($){const{l:y,a:I,b:ee}=nu($),re=Math.atan2(ee,I)*Jo;return{h:re<0?re+360:re,c:Math.sqrt(I*I+ee*ee),l:y,alpha:$.a}},reverse:function($){const y=$.h*rh,I=$.c;return kl({l:$.l,a:Math.cos(y)*I,b:Math.sin(y)*I,alpha:$.alpha})},interpolate:function($,y,I){return{h:ru($.h,y.h,I),c:Wr($.c,y.c,I),l:Wr($.l,y.l,I),alpha:Wr($.alpha,y.alpha,I)}}};var iu=Object.freeze({__proto__:null,lab:Vo,hcl:Ja});class Fs{constructor(y,I,ee,re,ge){this.type=y,this.operator=I,this.interpolation=ee,this.input=re,this.labels=[],this.outputs=[];for(const[ke,Ie]of ge)this.labels.push(ke),this.outputs.push(Ie)}static interpolationFactor(y,I,ee,re){let ge=0;if(y.name==="exponential")ge=Cl(I,y.base,ee,re);else if(y.name==="linear")ge=Cl(I,1,ee,re);else if(y.name==="cubic-bezier"){const ke=y.controlPoints;ge=new ce(ke[0],ke[1],ke[2],ke[3]).solve(Cl(I,1,ee,re))}return ge}static parse(y,I){let[ee,re,ge,...ke]=y;if(!Array.isArray(re)||re.length===0)return I.error("Expected an interpolation type expression.",1);if(re[0]==="linear")re={name:"linear"};else if(re[0]==="exponential"){const Le=re[1];if(typeof Le!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);re={name:"exponential",base:Le}}else{if(re[0]!=="cubic-bezier")return I.error(`Unknown interpolation type ${String(re[0])}`,1,0);{const Le=re.slice(1);if(Le.length!==4||Le.some(Ve=>typeof Ve!="number"||Ve<0||Ve>1))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);re={name:"cubic-bezier",controlPoints:Le}}}if(y.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(ge=I.parse(ge,2,lr),!ge)return null;const Ie=[];let ze=null;ee==="interpolate-hcl"||ee==="interpolate-lab"?ze=Oo:I.expectedType&&I.expectedType.kind!=="value"&&(ze=I.expectedType);for(let Le=0;Le<ke.length;Le+=2){const Ve=ke[Le],We=ke[Le+1],Ze=Le+3,tt=Le+4;if(typeof Ve!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ze);if(Ie.length&&Ie[Ie.length-1][0]>=Ve)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ze);const ot=I.parse(We,tt,ze);if(!ot)return null;ze=ze||ot.type,Ie.push([Ve,ot])}return ze.kind==="number"||ze.kind==="color"||ze.kind==="array"&&ze.itemType.kind==="number"&&typeof ze.N=="number"?new Fs(ze,ee,re,ge,Ie):I.error(`Type ${bi(ze)} is not interpolatable.`)}evaluate(y){const I=this.labels,ee=this.outputs;if(I.length===1)return ee[0].evaluate(y);const re=this.input.evaluate(y);if(re<=I[0])return ee[0].evaluate(y);const ge=I.length;if(re>=I[ge-1])return ee[ge-1].evaluate(y);const ke=Al(I,re),Ie=Fs.interpolationFactor(this.interpolation,re,I[ke],I[ke+1]),ze=ee[ke].evaluate(y),Le=ee[ke+1].evaluate(y);return this.operator==="interpolate"?Ls[this.type.kind.toLowerCase()](ze,Le,Ie):this.operator==="interpolate-hcl"?Ja.reverse(Ja.interpolate(Ja.forward(ze),Ja.forward(Le),Ie)):Vo.reverse(Vo.interpolate(Vo.forward(ze),Vo.forward(Le),Ie))}eachChild(y){y(this.input);for(const I of this.outputs)y(I)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){let y;y=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const I=[this.operator,y,this.input.serialize()];for(let ee=0;ee<this.labels.length;ee++)I.push(this.labels[ee],this.outputs[ee].serialize());return I}}function Cl($,y,I,ee){const re=ee-I,ge=$-I;return re===0?0:y===1?ge/re:(Math.pow(y,ge)-1)/(Math.pow(y,re)-1)}var Go=Fs;class Ma{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expectected at least one argument.");let ee=null;const re=I.expectedType;re&&re.kind!=="value"&&(ee=re);const ge=[];for(const Ie of y.slice(1)){const ze=I.parse(Ie,1+ge.length,ee,void 0,{typeAnnotation:"omit"});if(!ze)return null;ee=ee||ze.type,ge.push(ze)}const ke=re&&ge.some(Ie=>Xa(re,Ie.type));return new Ma(ke?Pr:ee,ge)}evaluate(y){let I,ee=null,re=0;for(const ge of this.args){if(re++,ee=ge.evaluate(y),ee&&ee instanceof so&&!ee.available&&(I||(I=ee),ee=null,re===this.args.length))return I;if(ee!==null)break}return ee}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=["coalesce"];return this.eachChild(I=>{y.push(I.serialize())}),y}}var ou=Ma;class _c{constructor(y,I){this.type=I.type,this.bindings=[].concat(y),this.result=I}evaluate(y){return this.result.evaluate(y)}eachChild(y){for(const I of this.bindings)y(I[1]);y(this.result)}static parse(y,I){if(y.length<4)return I.error(`Expected at least 3 arguments, but found ${y.length-1} instead.`);const ee=[];for(let ge=1;ge<y.length-1;ge+=2){const ke=y[ge];if(typeof ke!="string")return I.error(`Expected string, but found ${typeof ke} instead.`,ge);if(/[^a-zA-Z0-9_]/.test(ke))return I.error("Variable names must contain only alphanumeric characters or '_'.",ge);const Ie=I.parse(y[ge+1],ge+1);if(!Ie)return null;ee.push([ke,Ie])}const re=I.parse(y[y.length-1],y.length-1,I.expectedType,ee);return re?new _c(ee,re):null}outputDefined(){return this.result.outputDefined()}serialize(){const y=["let"];for(const[I,ee]of this.bindings)y.push(I,ee.serialize());return y.push(this.result.serialize()),y}}var au=_c;class mc{constructor(y,I,ee){this.type=y,this.index=I,this.input=ee}static parse(y,I){if(y.length!==3)return I.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,lr),re=I.parse(y[2],2,_o(I.expectedType||Pr));return ee&&re?new mc(re.type.itemType,ee,re):null}evaluate(y){const I=this.index.evaluate(y),ee=this.input.evaluate(y);if(I<0)throw new Ui(`Array index out of bounds: ${I} < 0.`);if(I>=ee.length)throw new Ui(`Array index out of bounds: ${I} > ${ee.length-1}.`);if(I!==Math.floor(I))throw new Ui(`Array index must be an integer, but found ${I} instead.`);return ee[I]}eachChild(y){y(this.index),y(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var su=mc;class gc{constructor(y,I){this.type=Nr,this.needle=y,this.haystack=I}static parse(y,I){if(y.length!==3)return I.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,Pr),re=I.parse(y[2],2,Pr);return ee&&re?pl(ee.type,[Nr,Or,lr,ua,Pr])?new gc(ee,re):I.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ee.type)} instead`):null}evaluate(y){const I=this.needle.evaluate(y),ee=this.haystack.evaluate(y);if(ee==null)return!1;if(!da(I,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${bi(Oi(I))} instead.`);if(!da(ee,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${bi(Oi(ee))} instead.`);return ee.indexOf(I)>=0}eachChild(y){y(this.needle),y(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ih=gc;class Sl{constructor(y,I,ee){this.type=lr,this.needle=y,this.haystack=I,this.fromIndex=ee}static parse(y,I){if(y.length<=2||y.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,Pr),re=I.parse(y[2],2,Pr);if(!ee||!re)return null;if(!pl(ee.type,[Nr,Or,lr,ua,Pr]))return I.error(`Expected first argument to be of type boolean, string, number or null, but found ${bi(ee.type)} instead`);if(y.length===4){const ge=I.parse(y[3],3,lr);return ge?new Sl(ee,re,ge):null}return new Sl(ee,re)}evaluate(y){const I=this.needle.evaluate(y),ee=this.haystack.evaluate(y);if(!da(I,["boolean","string","number","null"]))throw new Ui(`Expected first argument to be of type boolean, string, number or null, but found ${bi(Oi(I))} instead.`);if(!da(ee,["string","array"]))throw new Ui(`Expected second argument to be of type array or string, but found ${bi(Oi(ee))} instead.`);if(this.fromIndex){const re=this.fromIndex.evaluate(y);return ee.indexOf(I,re)}return ee.indexOf(I)}eachChild(y){y(this.needle),y(this.haystack),this.fromIndex&&y(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const y=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),y]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var oh=Sl;class Il{constructor(y,I,ee,re,ge,ke){this.inputType=y,this.type=I,this.input=ee,this.cases=re,this.outputs=ge,this.otherwise=ke}static parse(y,I){if(y.length<5)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if(y.length%2!=1)return I.error("Expected an even number of arguments.");let ee,re;I.expectedType&&I.expectedType.kind!=="value"&&(re=I.expectedType);const ge={},ke=[];for(let Le=2;Le<y.length-1;Le+=2){let Ve=y[Le];const We=y[Le+1];Array.isArray(Ve)||(Ve=[Ve]);const Ze=I.concat(Le);if(Ve.length===0)return Ze.error("Expected at least one branch label.");for(const ot of Ve){if(typeof ot!="number"&&typeof ot!="string")return Ze.error("Branch labels must be numbers or strings.");if(typeof ot=="number"&&Math.abs(ot)>Number.MAX_SAFE_INTEGER)return Ze.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ot=="number"&&Math.floor(ot)!==ot)return Ze.error("Numeric branch labels must be integer values.");if(ee){if(Ze.checkSubtype(ee,Oi(ot)))return null}else ee=Oi(ot);if(ge[String(ot)]!==void 0)return Ze.error("Branch labels must be unique.");ge[String(ot)]=ke.length}const tt=I.parse(We,Le,re);if(!tt)return null;re=re||tt.type,ke.push(tt)}const Ie=I.parse(y[1],1,Pr);if(!Ie)return null;const ze=I.parse(y[y.length-1],y.length-1,re);return ze?Ie.type.kind!=="value"&&I.concat(1).checkSubtype(ee,Ie.type)?null:new Il(ee,re,Ie,ge,ke,ze):null}evaluate(y){const I=this.input.evaluate(y);return(Oi(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(y)}eachChild(y){y(this.input),this.outputs.forEach(y),y(this.otherwise)}outputDefined(){return this.outputs.every(y=>y.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["match",this.input.serialize()],I=Object.keys(this.cases).sort(),ee=[],re={};for(const ke of I){const Ie=re[this.cases[ke]];Ie===void 0?(re[this.cases[ke]]=ee.length,ee.push([this.cases[ke],[ke]])):ee[Ie][1].push(ke)}const ge=ke=>this.inputType.kind==="number"?Number(ke):ke;for(const[ke,Ie]of ee)y.push(Ie.length===1?ge(Ie[0]):Ie.map(ge)),y.push(this.outputs[ke].serialize());return y.push(this.otherwise.serialize()),y}}var lu=Il;class Ml{constructor(y,I,ee){this.type=y,this.branches=I,this.otherwise=ee}static parse(y,I){if(y.length<4)return I.error(`Expected at least 3 arguments, but found only ${y.length-1}.`);if(y.length%2!=0)return I.error("Expected an odd number of arguments.");let ee;I.expectedType&&I.expectedType.kind!=="value"&&(ee=I.expectedType);const re=[];for(let ke=1;ke<y.length-1;ke+=2){const Ie=I.parse(y[ke],ke,Nr);if(!Ie)return null;const ze=I.parse(y[ke+1],ke+1,ee);if(!ze)return null;re.push([Ie,ze]),ee=ee||ze.type}const ge=I.parse(y[y.length-1],y.length-1,ee);return ge?new Ml(ee,re,ge):null}evaluate(y){for(const[I,ee]of this.branches)if(I.evaluate(y))return ee.evaluate(y);return this.otherwise.evaluate(y)}eachChild(y){for(const[I,ee]of this.branches)y(I),y(ee);y(this.otherwise)}outputDefined(){return this.branches.every(([y,I])=>I.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["case"];return this.eachChild(I=>{y.push(I.serialize())}),y}}var ah=Ml;class Ns{constructor(y,I,ee,re){this.type=y,this.input=I,this.beginIndex=ee,this.endIndex=re}static parse(y,I){if(y.length<=2||y.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1,Pr),re=I.parse(y[2],2,lr);if(!ee||!re)return null;if(!pl(ee.type,[_o(Pr),Or,Pr]))return I.error(`Expected first argument to be of type array or string, but found ${bi(ee.type)} instead`);if(y.length===4){const ge=I.parse(y[3],3,lr);return ge?new Ns(ee.type,ee,re,ge):null}return new Ns(ee.type,ee,re)}evaluate(y){const I=this.input.evaluate(y),ee=this.beginIndex.evaluate(y);if(!da(I,["string","array"]))throw new Ui(`Expected first argument to be of type array or string, but found ${bi(Oi(I))} instead.`);if(this.endIndex){const re=this.endIndex.evaluate(y);return I.slice(ee,re)}return I.slice(ee)}eachChild(y){y(this.input),y(this.beginIndex),this.endIndex&&y(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const y=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),y]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var cu=Ns;function es($,y){return $==="=="||$==="!="?y.kind==="boolean"||y.kind==="string"||y.kind==="number"||y.kind==="null"||y.kind==="value":y.kind==="string"||y.kind==="number"||y.kind==="value"}function yc($,y,I,ee){return ee.compare(y,I)===0}function Pa($,y,I){const ee=$!=="=="&&$!=="!=";return class em{constructor(ge,ke,Ie){this.type=Nr,this.lhs=ge,this.rhs=ke,this.collator=Ie,this.hasUntypedArgument=ge.type.kind==="value"||ke.type.kind==="value"}static parse(ge,ke){if(ge.length!==3&&ge.length!==4)return ke.error("Expected two or three arguments.");const Ie=ge[0];let ze=ke.parse(ge[1],1,Pr);if(!ze)return null;if(!es(Ie,ze.type))return ke.concat(1).error(`"${Ie}" comparisons are not supported for type '${bi(ze.type)}'.`);let Le=ke.parse(ge[2],2,Pr);if(!Le)return null;if(!es(Ie,Le.type))return ke.concat(2).error(`"${Ie}" comparisons are not supported for type '${bi(Le.type)}'.`);if(ze.type.kind!==Le.type.kind&&ze.type.kind!=="value"&&Le.type.kind!=="value")return ke.error(`Cannot compare types '${bi(ze.type)}' and '${bi(Le.type)}'.`);ee&&(ze.type.kind==="value"&&Le.type.kind!=="value"?ze=new vo(Le.type,[ze]):ze.type.kind!=="value"&&Le.type.kind==="value"&&(Le=new vo(ze.type,[Le])));let Ve=null;if(ge.length===4){if(ze.type.kind!=="string"&&Le.type.kind!=="string"&&ze.type.kind!=="value"&&Le.type.kind!=="value")return ke.error("Cannot use collator to compare non-string types.");if(Ve=ke.parse(ge[3],3,Ts),!Ve)return null}return new em(ze,Le,Ve)}evaluate(ge){const ke=this.lhs.evaluate(ge),Ie=this.rhs.evaluate(ge);if(ee&&this.hasUntypedArgument){const ze=Oi(ke),Le=Oi(Ie);if(ze.kind!==Le.kind||ze.kind!=="string"&&ze.kind!=="number")throw new Ui(`Expected arguments for "${$}" to be (string, string) or (number, number), but found (${ze.kind}, ${Le.kind}) instead.`)}if(this.collator&&!ee&&this.hasUntypedArgument){const ze=Oi(ke),Le=Oi(Ie);if(ze.kind!=="string"||Le.kind!=="string")return y(ge,ke,Ie)}return this.collator?I(ge,ke,Ie,this.collator.evaluate(ge)):y(ge,ke,Ie)}eachChild(ge){ge(this.lhs),ge(this.rhs),this.collator&&ge(this.collator)}outputDefined(){return!0}serialize(){const ge=[$];return this.eachChild(ke=>{ge.push(ke.serialize())}),ge}}}const sh=Pa("==",function($,y,I){return y===I},yc),uu=Pa("!=",function($,y,I){return y!==I},function($,y,I,ee){return!yc(0,y,I,ee)}),lh=Pa("<",function($,y,I){return y<I},function($,y,I,ee){return ee.compare(y,I)<0}),Pl=Pa(">",function($,y,I){return y>I},function($,y,I,ee){return ee.compare(y,I)>0}),hu=Pa("<=",function($,y,I){return y<=I},function($,y,I,ee){return ee.compare(y,I)<=0}),du=Pa(">=",function($,y,I){return y>=I},function($,y,I,ee){return ee.compare(y,I)>=0});class vc{constructor(y,I,ee,re,ge,ke){this.type=Or,this.number=y,this.locale=I,this.currency=ee,this.unit=re,this.minFractionDigits=ge,this.maxFractionDigits=ke}static parse(y,I){if(y.length!==3)return I.error("Expected two arguments.");const ee=I.parse(y[1],1,lr);if(!ee)return null;const re=y[2];if(typeof re!="object"||Array.isArray(re))return I.error("NumberFormat options argument must be an object.");let ge=null;if(re.locale&&(ge=I.parse(re.locale,1,Or),!ge))return null;let ke=null;if(re.currency&&(ke=I.parse(re.currency,1,Or),!ke))return null;let Ie=null;if(re.unit&&(Ie=I.parse(re.unit,1,Or),!Ie))return null;let ze=null;if(re["min-fraction-digits"]&&(ze=I.parse(re["min-fraction-digits"],1,lr),!ze))return null;let Le=null;return re["max-fraction-digits"]&&(Le=I.parse(re["max-fraction-digits"],1,lr),!Le)?null:new vc(ee,ge,ke,Ie,ze,Le)}evaluate(y){return new Intl.NumberFormat(this.locale?this.locale.evaluate(y):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(y):void 0,unit:this.unit?this.unit.evaluate(y):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(y):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(y):void 0}).format(this.number.evaluate(y))}eachChild(y){y(this.number),this.locale&&y(this.locale),this.currency&&y(this.currency),this.unit&&y(this.unit),this.minFractionDigits&&y(this.minFractionDigits),this.maxFractionDigits&&y(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const y={};return this.locale&&(y.locale=this.locale.serialize()),this.currency&&(y.currency=this.currency.serialize()),this.unit&&(y.unit=this.unit.serialize()),this.minFractionDigits&&(y["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(y["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),y]}}class xc{constructor(y){this.type=lr,this.input=y}static parse(y,I){if(y.length!==2)return I.error(`Expected 1 argument, but found ${y.length-1} instead.`);const ee=I.parse(y[1],1);return ee?ee.type.kind!=="array"&&ee.type.kind!=="string"&&ee.type.kind!=="value"?I.error(`Expected argument of type string or array, but found ${bi(ee.type)} instead.`):new xc(ee):null}evaluate(y){const I=this.input.evaluate(y);if(typeof I=="string"||Array.isArray(I))return I.length;throw new Ui(`Expected value to be of type string or array, but found ${bi(Oi(I))} instead.`)}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){const y=["length"];return this.eachChild(I=>{y.push(I.serialize())}),y}}const pu={"==":sh,"!=":uu,">":Pl,"<":lh,">=":du,"<=":hu,array:vo,at:su,boolean:vo,case:ah,coalesce:ou,collator:_l,format:Rs,image:fl,in:ih,"index-of":oh,interpolate:Go,"interpolate-hcl":Go,"interpolate-lab":Go,length:xc,let:au,literal:Ms,match:lu,number:vo,"number-format":vc,object:vo,slice:cu,step:dc,string:vo,"to-boolean":ka,"to-color":ka,"to-number":ka,"to-string":ka,var:$s,within:vl};function js($,[y,I,ee,re]){y=y.evaluate($),I=I.evaluate($),ee=ee.evaluate($);const ge=re?re.evaluate($):1,ke=ac(y,I,ee,ge);if(ke)throw new Ui(ke);return new ii(y/255*ge,I/255*ge,ee/255*ge,ge)}function bc($,y){return $ in y}function Ol($,y){const I=y[$];return I===void 0?null:I}function ea($){return{type:$}}lo.register(pu,{error:[{kind:"error"},[Or],($,[y])=>{throw new Ui(y.evaluate($))}],typeof:[Or,[Pr],($,[y])=>bi(Oi(y.evaluate($)))],"to-rgba":[_o(lr,4),[Oo],($,[y])=>y.evaluate($).toArray()],rgb:[Oo,[lr,lr,lr],js],rgba:[Oo,[lr,lr,lr,lr],js],has:{type:Nr,overloads:[[[Or],($,[y])=>bc(y.evaluate($),$.properties())],[[Or,Ro],($,[y,I])=>bc(y.evaluate($),I.evaluate($))]]},get:{type:Pr,overloads:[[[Or],($,[y])=>Ol(y.evaluate($),$.properties())],[[Or,Ro],($,[y,I])=>Ol(y.evaluate($),I.evaluate($))]]},"feature-state":[Pr,[Or],($,[y])=>Ol(y.evaluate($),$.featureState||{})],properties:[Ro,[],$=>$.properties()],"geometry-type":[Or,[],$=>$.geometryType()],id:[Pr,[],$=>$.id()],zoom:[lr,[],$=>$.globals.zoom],pitch:[lr,[],$=>$.globals.pitch||0],"distance-from-center":[lr,[],$=>$.distanceFromCenter()],"heatmap-density":[lr,[],$=>$.globals.heatmapDensity||0],"line-progress":[lr,[],$=>$.globals.lineProgress||0],"sky-radial-progress":[lr,[],$=>$.globals.skyRadialProgress||0],accumulated:[Pr,[],$=>$.globals.accumulated===void 0?null:$.globals.accumulated],"+":[lr,ea(lr),($,y)=>{let I=0;for(const ee of y)I+=ee.evaluate($);return I}],"*":[lr,ea(lr),($,y)=>{let I=1;for(const ee of y)I*=ee.evaluate($);return I}],"-":{type:lr,overloads:[[[lr,lr],($,[y,I])=>y.evaluate($)-I.evaluate($)],[[lr],($,[y])=>-y.evaluate($)]]},"/":[lr,[lr,lr],($,[y,I])=>y.evaluate($)/I.evaluate($)],"%":[lr,[lr,lr],($,[y,I])=>y.evaluate($)%I.evaluate($)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],($,[y,I])=>Math.pow(y.evaluate($),I.evaluate($))],sqrt:[lr,[lr],($,[y])=>Math.sqrt(y.evaluate($))],log10:[lr,[lr],($,[y])=>Math.log(y.evaluate($))/Math.LN10],ln:[lr,[lr],($,[y])=>Math.log(y.evaluate($))],log2:[lr,[lr],($,[y])=>Math.log(y.evaluate($))/Math.LN2],sin:[lr,[lr],($,[y])=>Math.sin(y.evaluate($))],cos:[lr,[lr],($,[y])=>Math.cos(y.evaluate($))],tan:[lr,[lr],($,[y])=>Math.tan(y.evaluate($))],asin:[lr,[lr],($,[y])=>Math.asin(y.evaluate($))],acos:[lr,[lr],($,[y])=>Math.acos(y.evaluate($))],atan:[lr,[lr],($,[y])=>Math.atan(y.evaluate($))],min:[lr,ea(lr),($,y)=>Math.min(...y.map(I=>I.evaluate($)))],max:[lr,ea(lr),($,y)=>Math.max(...y.map(I=>I.evaluate($)))],abs:[lr,[lr],($,[y])=>Math.abs(y.evaluate($))],round:[lr,[lr],($,[y])=>{const I=y.evaluate($);return I<0?-Math.round(-I):Math.round(I)}],floor:[lr,[lr],($,[y])=>Math.floor(y.evaluate($))],ceil:[lr,[lr],($,[y])=>Math.ceil(y.evaluate($))],"filter-==":[Nr,[Or,Pr],($,[y,I])=>$.properties()[y.value]===I.value],"filter-id-==":[Nr,[Pr],($,[y])=>$.id()===y.value],"filter-type-==":[Nr,[Or],($,[y])=>$.geometryType()===y.value],"filter-<":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee<re}],"filter-id-<":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I<ee}],"filter->":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee>re}],"filter-id->":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I>ee}],"filter-<=":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee<=re}],"filter-id-<=":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I<=ee}],"filter->=":[Nr,[Or,Pr],($,[y,I])=>{const ee=$.properties()[y.value],re=I.value;return typeof ee==typeof re&&ee>=re}],"filter-id->=":[Nr,[Pr],($,[y])=>{const I=$.id(),ee=y.value;return typeof I==typeof ee&&I>=ee}],"filter-has":[Nr,[Pr],($,[y])=>y.value in $.properties()],"filter-has-id":[Nr,[],$=>$.id()!==null&&$.id()!==void 0],"filter-type-in":[Nr,[_o(Or)],($,[y])=>y.value.indexOf($.geometryType())>=0],"filter-id-in":[Nr,[_o(Pr)],($,[y])=>y.value.indexOf($.id())>=0],"filter-in-small":[Nr,[Or,_o(Pr)],($,[y,I])=>I.value.indexOf($.properties()[y.value])>=0],"filter-in-large":[Nr,[Or,_o(Pr)],($,[y,I])=>function(ee,re,ge,ke){for(;ge<=ke;){const Ie=ge+ke>>1;if(re[Ie]===ee)return!0;re[Ie]>ee?ke=Ie-1:ge=Ie+1}return!1}($.properties()[y.value],I.value,0,I.value.length-1)],all:{type:Nr,overloads:[[[Nr,Nr],($,[y,I])=>y.evaluate($)&&I.evaluate($)],[ea(Nr),($,y)=>{for(const I of y)if(!I.evaluate($))return!1;return!0}]]},any:{type:Nr,overloads:[[[Nr,Nr],($,[y,I])=>y.evaluate($)||I.evaluate($)],[ea(Nr),($,y)=>{for(const I of y)if(I.evaluate($))return!0;return!1}]]},"!":[Nr,[Nr],($,[y])=>!y.evaluate($)],"is-supported-script":[Nr,[Or],($,[y])=>{const I=$.globals&&$.globals.isSupportedScript;return!I||I(y.evaluate($))}],upcase:[Or,[Or],($,[y])=>y.evaluate($).toUpperCase()],downcase:[Or,[Or],($,[y])=>y.evaluate($).toLowerCase()],concat:[Or,ea(Pr),($,y)=>y.map(I=>Ss(I.evaluate($))).join("")],"resolved-locale":[Or,[Ts],($,[y])=>y.evaluate($).resolvedLocale()]});var Us=pu;function fu($){return{result:"success",value:$}}function Oa($){return{result:"error",value:$}}function ts($){return $["property-type"]==="data-driven"||$["property-type"]==="cross-faded-data-driven"}function _u($){return!!$.expression&&$.expression.parameters.indexOf("zoom")>-1}function Ac($){return!!$.expression&&$.expression.interpolated}function Jr($){return $ instanceof Number?"number":$ instanceof String?"string":$ instanceof Boolean?"boolean":Array.isArray($)?"array":$===null?"null":typeof $}function Vs($){return typeof $=="object"&&$!==null&&!Array.isArray($)}function mu($){return $}function Gs($,y){const I=y.type==="color",ee=$.stops&&typeof $.stops[0][0]=="object",re=ee||!(ee||$.property!==void 0),ge=$.type||(Ac(y)?"exponential":"interval");if(I&&(($=fo({},$)).stops&&($.stops=$.stops.map(Le=>[Le[0],ii.parse(Le[1])])),$.default=ii.parse($.default?$.default:y.default)),$.colorSpace&&$.colorSpace!=="rgb"&&!iu[$.colorSpace])throw new Error(`Unknown color space: ${$.colorSpace}`);let ke,Ie,ze;if(ge==="exponential")ke=wc;else if(ge==="interval")ke=ga;else if(ge==="categorical"){ke=ch,Ie=Object.create(null);for(const Le of $.stops)Ie[Le[0]]=Le[1];ze=typeof $.stops[0][0]}else{if(ge!=="identity")throw new Error(`Unknown function type "${ge}"`);ke=ns}if(ee){const Le={},Ve=[];for(let tt=0;tt<$.stops.length;tt++){const ot=$.stops[tt],mt=ot[0].zoom;Le[mt]===void 0&&(Le[mt]={zoom:mt,type:$.type,property:$.property,default:$.default,stops:[]},Ve.push(mt)),Le[mt].stops.push([ot[0].value,ot[1]])}const We=[];for(const tt of Ve)We.push([Le[tt].zoom,Gs(Le[tt],y)]);const Ze={name:"linear"};return{kind:"composite",interpolationType:Ze,interpolationFactor:Go.interpolationFactor.bind(void 0,Ze),zoomStops:We.map(tt=>tt[0]),evaluate:({zoom:tt},ot)=>wc({stops:We,base:$.base},y,tt).evaluate(tt,ot)}}if(re){const Le=ge==="exponential"?{name:"exponential",base:$.base!==void 0?$.base:1}:null;return{kind:"camera",interpolationType:Le,interpolationFactor:Go.interpolationFactor.bind(void 0,Le),zoomStops:$.stops.map(Ve=>Ve[0]),evaluate:({zoom:Ve})=>ke($,y,Ve,Ie,ze)}}return{kind:"source",evaluate(Le,Ve){const We=Ve&&Ve.properties?Ve.properties[$.property]:void 0;return We===void 0?qs($.default,y.default):ke($,y,We,Ie,ze)}}}function qs($,y,I){return $!==void 0?$:y!==void 0?y:I!==void 0?I:void 0}function ch($,y,I,ee,re){return qs(typeof I===re?ee[I]:void 0,$.default,y.default)}function ga($,y,I){if(Jr(I)!=="number")return qs($.default,y.default);const ee=$.stops.length;if(ee===1||I<=$.stops[0][0])return $.stops[0][1];if(I>=$.stops[ee-1][0])return $.stops[ee-1][1];const re=Al($.stops.map(ge=>ge[0]),I);return $.stops[re][1]}function wc($,y,I){const ee=$.base!==void 0?$.base:1;if(Jr(I)!=="number")return qs($.default,y.default);const re=$.stops.length;if(re===1||I<=$.stops[0][0])return $.stops[0][1];if(I>=$.stops[re-1][0])return $.stops[re-1][1];const ge=Al($.stops.map(Ve=>Ve[0]),I),ke=function(Ve,We,Ze,tt){const ot=tt-Ze,mt=Ve-Ze;return ot===0?0:We===1?mt/ot:(Math.pow(We,mt)-1)/(Math.pow(We,ot)-1)}(I,ee,$.stops[ge][0],$.stops[ge+1][0]),Ie=$.stops[ge][1],ze=$.stops[ge+1][1];let Le=Ls[y.type]||mu;if($.colorSpace&&$.colorSpace!=="rgb"){const Ve=iu[$.colorSpace];Le=(We,Ze)=>Ve.reverse(Ve.interpolate(Ve.forward(We),Ve.forward(Ze),ke))}return typeof Ie.evaluate=="function"?{evaluate(...Ve){const We=Ie.evaluate.apply(void 0,Ve),Ze=ze.evaluate.apply(void 0,Ve);if(We!==void 0&&Ze!==void 0)return Le(We,Ze,ke)}}:Le(Ie,ze,ke)}function ns($,y,I){return y.type==="color"?I=ii.parse(I):y.type==="formatted"?I=ao.fromString(I.toString()):y.type==="resolvedImage"?I=so.fromString(I.toString()):Jr(I)===y.type||y.type==="enum"&&y.values[I]||(I=void 0),qs(I,$.default,y.default)}class Ec{constructor(y,I){this.expression=y,this._warningHistory={},this._evaluator=new Jc,this._defaultValue=I?function(ee){return ee.type==="color"&&(Vs(ee.default)||Array.isArray(ee.default))?new ii(0,0,0,0):ee.type==="color"?ii.parse(ee.default)||null:ee.default===void 0?null:ee.default}(I):null,this._enumValues=I&&I.type==="enum"?I.values:null}evaluateWithoutErrorHandling(y,I,ee,re,ge,ke,Ie,ze){return this._evaluator.globals=y,this._evaluator.feature=I,this._evaluator.featureState=ee,this._evaluator.canonical=re||null,this._evaluator.availableImages=ge||null,this._evaluator.formattedSection=ke,this._evaluator.featureTileCoord=Ie||null,this._evaluator.featureDistanceData=ze||null,this.expression.evaluate(this._evaluator)}evaluate(y,I,ee,re,ge,ke,Ie,ze){this._evaluator.globals=y,this._evaluator.feature=I||null,this._evaluator.featureState=ee||null,this._evaluator.canonical=re||null,this._evaluator.availableImages=ge||null,this._evaluator.formattedSection=ke||null,this._evaluator.featureTileCoord=Ie||null,this._evaluator.featureDistanceData=ze||null;try{const Le=this.expression.evaluate(this._evaluator);if(Le==null||typeof Le=="number"&&Le!=Le)return this._defaultValue;if(this._enumValues&&!(Le in this._enumValues))throw new Ui(`Expected value to be one of ${Object.keys(this._enumValues).map(Ve=>JSON.stringify(Ve)).join(", ")}, but found ${JSON.stringify(Le)} instead.`);return Le}catch(Le){return this._warningHistory[Le.message]||(this._warningHistory[Le.message]=!0,typeof console!="undefined"&&console.warn(Le.message)),this._defaultValue}}}function Rl($){return Array.isArray($)&&$.length>0&&typeof $[0]=="string"&&$[0]in Us}function rs($,y){const I=new Ia(Us,[],y?function(re){const ge={color:Oo,string:Or,number:lr,enum:Or,boolean:Nr,formatted:ha,resolvedImage:ks};return re.type==="array"?_o(ge[re.value]||Pr,re.length):ge[re.type]}(y):void 0),ee=I.parse($,void 0,void 0,void 0,y&&y.type==="string"?{typeAnnotation:"coerce"}:void 0);return ee?fu(new Ec(ee,y)):Oa(I.errors)}class Tc{constructor(y,I){this.kind=y,this._styleExpression=I,this.isStateDependent=y!=="constant"&&!_a(I.expression)}evaluateWithoutErrorHandling(y,I,ee,re,ge,ke){return this._styleExpression.evaluateWithoutErrorHandling(y,I,ee,re,ge,ke)}evaluate(y,I,ee,re,ge,ke){return this._styleExpression.evaluate(y,I,ee,re,ge,ke)}}class Hs{constructor(y,I,ee,re){this.kind=y,this.zoomStops=ee,this._styleExpression=I,this.isStateDependent=y!=="camera"&&!_a(I.expression),this.interpolationType=re}evaluateWithoutErrorHandling(y,I,ee,re,ge,ke){return this._styleExpression.evaluateWithoutErrorHandling(y,I,ee,re,ge,ke)}evaluate(y,I,ee,re,ge,ke){return this._styleExpression.evaluate(y,I,ee,re,ge,ke)}interpolationFactor(y,I,ee){return this.interpolationType?Go.interpolationFactor(this.interpolationType,y,I,ee):0}}function kc($,y){if(($=rs($,y)).result==="error")return $;const I=$.value.expression,ee=jo(I);if(!ee&&!ts(y))return Oa([new Po("","data expressions not supported")]);const re=Uo(I,["zoom","pitch","distance-from-center"]);if(!re&&!_u(y))return Oa([new Po("","zoom expressions not supported")]);const ge=os(I);return ge||re?ge instanceof Po?Oa([ge]):ge instanceof Go&&!Ac(y)?Oa([new Po("",'"interpolate" expressions cannot be used with this property')]):fu(ge?new Hs(ee?"camera":"composite",$.value,ge.labels,ge instanceof Go?ge.interpolation:void 0):new Tc(ee?"constant":"source",$.value)):Oa([new Po("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class is{constructor(y,I){this._parameters=y,this._specification=I,fo(this,Gs(this._parameters,this._specification))}static deserialize(y){return new is(y._parameters,y._specification)}static serialize(y){return{_parameters:y._parameters,_specification:y._specification}}}function os($){let y=null;if($ instanceof au)y=os($.result);else if($ instanceof ou){for(const I of $.args)if(y=os(I),y)break}else($ instanceof dc||$ instanceof Go)&&$.input instanceof lo&&$.input.name==="zoom"&&(y=$);return y instanceof Po||$.eachChild(I=>{const ee=os(I);ee instanceof Po?y=ee:!y&&ee?y=new Po("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):y&&ee&&y!==ee&&(y=new Po("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),y}class cr{constructor(y,I,ee,re){this.message=(y?`${y}: `:"")+ee,re&&(this.identifier=re),I!=null&&I.__line__&&(this.line=I.__line__)}}function co($){const y=$.key,I=$.value,ee=$.valueSpec||{},re=$.objectElementValidators||{},ge=$.style,ke=$.styleSpec;let Ie=[];const ze=Jr(I);if(ze!=="object")return[new cr(y,I,`object expected, ${ze} found`)];for(const Le in I){const Ve=Le.split(".")[0],We=ee[Ve]||ee["*"];let Ze;re[Ve]?Ze=re[Ve]:ee[Ve]?Ze=qi:re["*"]?Ze=re["*"]:ee["*"]&&(Ze=qi),Ze?Ie=Ie.concat(Ze({key:(y&&`${y}.`)+Le,value:I[Le],valueSpec:We,style:ge,styleSpec:ke,object:I,objectKey:Le},I)):Ie.push(new cr(y,I[Le],`unknown property "${Le}"`))}for(const Le in ee)re[Le]||ee[Le].required&&ee[Le].default===void 0&&I[Le]===void 0&&Ie.push(new cr(y,I,`missing required property "${Le}"`));return Ie}function Cc($){const y=$.value,I=$.valueSpec,ee=$.style,re=$.styleSpec,ge=$.key,ke=$.arrayElementValidator||qi;if(Jr(y)!=="array")return[new cr(ge,y,`array expected, ${Jr(y)} found`)];if(I.length&&y.length!==I.length)return[new cr(ge,y,`array length ${I.length} expected, length ${y.length} found`)];if(I["min-length"]&&y.length<I["min-length"])return[new cr(ge,y,`array length at least ${I["min-length"]} expected, length ${y.length} found`)];let Ie={type:I.value,values:I.values,minimum:I.minimum,maximum:I.maximum,function:void 0};re.$version<7&&(Ie.function=I.function),Jr(I.value)==="object"&&(Ie=I.value);let ze=[];for(let Le=0;Le<y.length;Le++)ze=ze.concat(ke({array:y,arrayIndex:Le,value:y[Le],valueSpec:Ie,style:ee,styleSpec:re,key:`${ge}[${Le}]`}));return ze}function Sc($){const y=$.key,I=$.value,ee=$.valueSpec;let re=Jr(I);if(re==="number"&&I!=I&&(re="NaN"),re!=="number")return[new cr(y,I,`number expected, ${re} found`)];if("minimum"in ee){let ge=ee.minimum;if(Jr(ee.minimum)==="array"&&(ge=ee.minimum[$.arrayIndex]),I<ge)return[new cr(y,I,`${I} is less than the minimum value ${ge}`)]}if("maximum"in ee){let ge=ee.maximum;if(Jr(ee.maximum)==="array"&&(ge=ee.maximum[$.arrayIndex]),I>ge)return[new cr(y,I,`${I} is greater than the maximum value ${ge}`)]}return[]}function Ws($){const y=$.valueSpec,I=ki($.value.type);let ee,re,ge,ke={};const Ie=I!=="categorical"&&$.value.property===void 0,ze=!Ie,Le=Jr($.value.stops)==="array"&&Jr($.value.stops[0])==="array"&&Jr($.value.stops[0][0])==="object",Ve=co({key:$.key,value:$.value,valueSpec:$.styleSpec.function,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{stops:function(tt){if(I==="identity")return[new cr(tt.key,tt.value,'identity function may not have a "stops" property')];let ot=[];const mt=tt.value;return ot=ot.concat(Cc({key:tt.key,value:mt,valueSpec:tt.valueSpec,style:tt.style,styleSpec:tt.styleSpec,arrayElementValidator:We})),Jr(mt)==="array"&&mt.length===0&&ot.push(new cr(tt.key,mt,"array must have at least one stop")),ot},default:function(tt){return qi({key:tt.key,value:tt.value,valueSpec:y,style:tt.style,styleSpec:tt.styleSpec})}}});return I==="identity"&&Ie&&Ve.push(new cr($.key,$.value,'missing required property "property"')),I==="identity"||$.value.stops||Ve.push(new cr($.key,$.value,'missing required property "stops"')),I==="exponential"&&$.valueSpec.expression&&!Ac($.valueSpec)&&Ve.push(new cr($.key,$.value,"exponential functions not supported")),$.styleSpec.$version>=8&&(ze&&!ts($.valueSpec)?Ve.push(new cr($.key,$.value,"property functions not supported")):Ie&&!_u($.valueSpec)&&Ve.push(new cr($.key,$.value,"zoom functions not supported"))),I!=="categorical"&&!Le||$.value.property!==void 0||Ve.push(new cr($.key,$.value,'"property" property is required')),Ve;function We(tt){let ot=[];const mt=tt.value,Et=tt.key;if(Jr(mt)!=="array")return[new cr(Et,mt,`array expected, ${Jr(mt)} found`)];if(mt.length!==2)return[new cr(Et,mt,`array length 2 expected, length ${mt.length} found`)];if(Le){if(Jr(mt[0])!=="object")return[new cr(Et,mt,`object expected, ${Jr(mt[0])} found`)];if(mt[0].zoom===void 0)return[new cr(Et,mt,"object stop key must have zoom")];if(mt[0].value===void 0)return[new cr(Et,mt,"object stop key must have value")];const Ft=ki(mt[0].zoom);if(typeof Ft!="number")return[new cr(Et,mt[0].zoom,"stop zoom values must be numbers")];if(ge&&ge>Ft)return[new cr(Et,mt[0].zoom,"stop zoom values must appear in ascending order")];Ft!==ge&&(ge=Ft,re=void 0,ke={}),ot=ot.concat(co({key:`${Et}[0]`,value:mt[0],valueSpec:{zoom:{}},style:tt.style,styleSpec:tt.styleSpec,objectElementValidators:{zoom:Sc,value:Ze}}))}else ot=ot.concat(Ze({key:`${Et}[0]`,value:mt[0],valueSpec:{},style:tt.style,styleSpec:tt.styleSpec},mt));return Rl(ca(mt[1]))?ot.concat([new cr(`${Et}[1]`,mt[1],"expressions are not allowed in function stops.")]):ot.concat(qi({key:`${Et}[1]`,value:mt[1],valueSpec:y,style:tt.style,styleSpec:tt.styleSpec}))}function Ze(tt,ot){const mt=Jr(tt.value),Et=ki(tt.value),Ft=tt.value!==null?tt.value:ot;if(ee){if(mt!==ee)return[new cr(tt.key,Ft,`${mt} stop domain type must match previous stop domain type ${ee}`)]}else ee=mt;if(mt!=="number"&&mt!=="string"&&mt!=="boolean"&&typeof Et!="number"&&typeof Et!="string"&&typeof Et!="boolean")return[new cr(tt.key,Ft,"stop domain value must be a number, string, or boolean")];if(mt!=="number"&&I!=="categorical"){let Ht=`number expected, ${mt} found`;return ts(y)&&I===void 0&&(Ht+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new cr(tt.key,Ft,Ht)]}return I!=="categorical"||mt!=="number"||typeof Et=="number"&&isFinite(Et)&&Math.floor(Et)===Et?I!=="categorical"&&mt==="number"&&typeof Et=="number"&&typeof re=="number"&&re!==void 0&&Et<re?[new cr(tt.key,Ft,"stop domain values must appear in ascending order")]:(re=Et,I==="categorical"&&Et in ke?[new cr(tt.key,Ft,"stop domain values must be unique")]:(ke[Et]=!0,[])):[new cr(tt.key,Ft,`integer expected, found ${String(Et)}`)]}}function bo($){const y=($.expressionContext==="property"?kc:rs)(ca($.value),$.valueSpec);if(y.result==="error")return y.value.map(ee=>new cr(`${$.key}${ee.key}`,$.value,ee.message));const I=y.value.expression||y.value._styleExpression.expression;if($.expressionContext==="property"&&$.propertyKey==="text-font"&&!I.outputDefined())return[new cr($.key,$.value,`Invalid data expression for "${$.propertyKey}". Output values must be contained as literals within the expression.`)];if($.expressionContext==="property"&&$.propertyType==="layout"&&!_a(I))return[new cr($.key,$.value,'"feature-state" data expressions are not supported with layout properties.')];if($.expressionContext==="filter")return Ic(I,$);if($.expressionContext&&$.expressionContext.indexOf("cluster")===0){if(!Uo(I,["zoom","feature-state"]))return[new cr($.key,$.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if($.expressionContext==="cluster-initial"&&!jo(I))return[new cr($.key,$.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ic($,y){const I=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(y.valueSpec&&y.valueSpec.expression)for(const re of y.valueSpec.expression.parameters)I.delete(re);if(I.size===0)return[];const ee=[];return $ instanceof lo&&I.has($.name)?[new cr(y.key,y.value,`["${$.name}"] expression is not supported in a filter for a ${y.object.type} layer with id: ${y.object.id}`)]:($.eachChild(re=>{ee.push(...Ic(re,y))}),ee)}function Zs($){const y=$.key,I=$.value,ee=$.valueSpec,re=[];return Array.isArray(ee.values)?ee.values.indexOf(ki(I))===-1&&re.push(new cr(y,I,`expected one of [${ee.values.join(", ")}], ${JSON.stringify(I)} found`)):Object.keys(ee.values).indexOf(ki(I))===-1&&re.push(new cr(y,I,`expected one of [${Object.keys(ee.values).join(", ")}], ${JSON.stringify(I)} found`)),re}function Xs($){if($===!0||$===!1)return!0;if(!Array.isArray($)||$.length===0)return!1;switch($[0]){case"has":return $.length>=2&&$[1]!=="$id"&&$[1]!=="$type";case"in":return $.length>=3&&(typeof $[1]!="string"||Array.isArray($[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return $.length!==3||Array.isArray($[1])||Array.isArray($[2]);case"any":case"all":for(const y of $.slice(1))if(!Xs(y)&&typeof y!="boolean")return!1;return!0;default:return!0}}function Ys($,y="fill"){if($==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Xs($)||($=zl($));const I=$;let ee=!0;try{ee=function(Le){if(!ta(Le))return Le;let Ve=ca(Le);return Dl(Ve),Ve=gu(Ve),Ve}(I)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(I,null,2)}
        `)}const re=gn[`filter_${y}`],ge=rs(ee,re);let ke=null;if(ge.result==="error")throw new Error(ge.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));ke=(Le,Ve,We)=>ge.value.evaluate(Le,Ve,{},We);let Ie=null,ze=null;if(ee!==I){const Le=rs(I,re);if(Le.result==="error")throw new Error(Le.value.map(Ve=>`${Ve.key}: ${Ve.message}`).join(", "));Ie=(Ve,We,Ze,tt,ot)=>Le.value.evaluate(Ve,We,{},Ze,void 0,void 0,tt,ot),ze=!jo(Le.value.expression)}return ke=ke,{filter:ke,dynamicFilter:Ie||void 0,needGeometry:as(ee),needFeature:!!ze}}function gu($){if(!Array.isArray($))return $;const y=function(I){if(uh.has(I[0])){for(let ee=1;ee<I.length;ee++)if(ta(I[ee]))return!0}return I}($);return y===!0?y:y.map(I=>gu(I))}function Dl($){let y=!1;const I=[];if($[0]==="case"){for(let ee=1;ee<$.length-1;ee+=2)y=y||ta($[ee]),I.push($[ee+1]);I.push($[$.length-1])}else if($[0]==="match"){y=y||ta($[1]);for(let ee=2;ee<$.length-1;ee+=2)I.push($[ee+1]);I.push($[$.length-1])}else if($[0]==="step"){y=y||ta($[1]);for(let ee=1;ee<$.length-1;ee+=2)I.push($[ee+1])}y&&($.length=0,$.push("any",...I));for(let ee=1;ee<$.length;ee++)Dl($[ee])}function ta($){if(!Array.isArray($))return!1;if((y=$[0])==="pitch"||y==="distance-from-center")return!0;var y;for(let I=1;I<$.length;I++)if(ta($[I]))return!0;return!1}const uh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function hh($,y){return $<y?-1:$>y?1:0}function as($){if(!Array.isArray($))return!1;if($[0]==="within")return!0;for(let y=1;y<$.length;y++)if(as($[y]))return!0;return!1}function zl($){if(!$)return!0;const y=$[0];return $.length<=1?y!=="any":y==="=="?Mc($[1],$[2],"=="):y==="!="?Yi(Mc($[1],$[2],"==")):y==="<"||y===">"||y==="<="||y===">="?Mc($[1],$[2],y):y==="any"?(I=$.slice(1),["any"].concat(I.map(zl))):y==="all"?["all"].concat($.slice(1).map(zl)):y==="none"?["all"].concat($.slice(1).map(zl).map(Yi)):y==="in"?Ks($[1],$.slice(2)):y==="!in"?Yi(Ks($[1],$.slice(2))):y==="has"?Qs($[1]):y==="!has"?Yi(Qs($[1])):y!=="within"||$;var I}function Mc($,y,I){switch($){case"$type":return[`filter-type-${I}`,y];case"$id":return[`filter-id-${I}`,y];default:return[`filter-${I}`,$,y]}}function Ks($,y){if(y.length===0)return!1;switch($){case"$type":return["filter-type-in",["literal",y]];case"$id":return["filter-id-in",["literal",y]];default:return y.length>200&&!y.some(I=>typeof I!=typeof y[0])?["filter-in-large",$,["literal",y.sort(hh)]]:["filter-in-small",$,["literal",y]]}}function Qs($){switch($){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",$]}}function Yi($){return["!",$]}function Ra($){return Xs(ca($.value))?bo(fo({},$,{expressionContext:"filter",valueSpec:$.styleSpec[`filter_${$.layerType||"fill"}`]})):yu($)}function yu($){const y=$.value,I=$.key;if(Jr(y)!=="array")return[new cr(I,y,`array expected, ${Jr(y)} found`)];const ee=$.styleSpec;let re,ge=[];if(y.length<1)return[new cr(I,y,"filter array must have at least 1 element")];switch(ge=ge.concat(Zs({key:`${I}[0]`,value:y[0],valueSpec:ee.filter_operator,style:$.style,styleSpec:$.styleSpec})),ki(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&ki(y[1])==="$type"&&ge.push(new cr(I,y,`"$type" cannot be use with operator "${y[0]}"`));case"==":case"!=":y.length!==3&&ge.push(new cr(I,y,`filter array for operator "${y[0]}" must have 3 elements`));case"in":case"!in":y.length>=2&&(re=Jr(y[1]),re!=="string"&&ge.push(new cr(`${I}[1]`,y[1],`string expected, ${re} found`)));for(let ke=2;ke<y.length;ke++)re=Jr(y[ke]),ki(y[1])==="$type"?ge=ge.concat(Zs({key:`${I}[${ke}]`,value:y[ke],valueSpec:ee.geometry_type,style:$.style,styleSpec:$.styleSpec})):re!=="string"&&re!=="number"&&re!=="boolean"&&ge.push(new cr(`${I}[${ke}]`,y[ke],`string, number, or boolean expected, ${re} found`));break;case"any":case"all":case"none":for(let ke=1;ke<y.length;ke++)ge=ge.concat(yu({key:`${I}[${ke}]`,value:y[ke],style:$.style,styleSpec:$.styleSpec}));break;case"has":case"!has":re=Jr(y[1]),y.length!==2?ge.push(new cr(I,y,`filter array for "${y[0]}" operator must have 2 elements`)):re!=="string"&&ge.push(new cr(`${I}[1]`,y[1],`string expected, ${re} found`));break;case"within":re=Jr(y[1]),y.length!==2?ge.push(new cr(I,y,`filter array for "${y[0]}" operator must have 2 elements`)):re!=="object"&&ge.push(new cr(`${I}[1]`,y[1],`object expected, ${re} found`))}return ge}function Js($,y){const I=$.key,ee=$.style,re=$.styleSpec,ge=$.value,ke=$.objectKey,Ie=re[`${y}_${$.layerType}`];if(!Ie)return[];const ze=ke.match(/^(.*)-transition$/);if(y==="paint"&&ze&&Ie[ze[1]]&&Ie[ze[1]].transition)return qi({key:I,value:ge,valueSpec:re.transition,style:ee,styleSpec:re});const Le=$.valueSpec||Ie[ke];if(!Le)return[new cr(I,ge,`unknown property "${ke}"`)];let Ve;if(Jr(ge)==="string"&&ts(Le)&&!Le.tokens&&(Ve=/^{([^}]+)}$/.exec(ge)))return[new cr(I,ge,`"${ke}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ve[1])} }\`.`)];const We=[];return $.layerType==="symbol"&&(ke==="text-field"&&ee&&!ee.glyphs&&We.push(new cr(I,ge,'use of "text-field" requires a style "glyphs" property')),ke==="text-font"&&Vs(ca(ge))&&ki(ge.type)==="identity"&&We.push(new cr(I,ge,'"text-font" does not support identity functions'))),We.concat(qi({key:$.key,value:ge,valueSpec:Le,style:ee,styleSpec:re,expressionContext:"property",propertyType:y,propertyKey:ke}))}function vu($){return Js($,"paint")}function xu($){return Js($,"layout")}function $l($){let y=[];const I=$.value,ee=$.key,re=$.style,ge=$.styleSpec;I.type||I.ref||y.push(new cr(ee,I,'either "type" or "ref" is required'));let ke=ki(I.type);const Ie=ki(I.ref);if(I.id){const ze=ki(I.id);for(let Le=0;Le<$.arrayIndex;Le++){const Ve=re.layers[Le];ki(Ve.id)===ze&&y.push(new cr(ee,I.id,`duplicate layer id "${I.id}", previously used at line ${Ve.id.__line__}`))}}if("ref"in I){let ze;["type","source","source-layer","filter","layout"].forEach(Le=>{Le in I&&y.push(new cr(ee,I[Le],`"${Le}" is prohibited for ref layers`))}),re.layers.forEach(Le=>{ki(Le.id)===Ie&&(ze=Le)}),ze?ze.ref?y.push(new cr(ee,I.ref,"ref cannot reference another ref layer")):ke=ki(ze.type):typeof Ie=="string"&&y.push(new cr(ee,I.ref,`ref layer "${Ie}" not found`))}else if(ke!=="background"&&ke!=="sky")if(I.source){const ze=re.sources&&re.sources[I.source],Le=ze&&ki(ze.type);ze?Le==="vector"&&ke==="raster"?y.push(new cr(ee,I.source,`layer "${I.id}" requires a raster source`)):Le==="raster"&&ke!=="raster"?y.push(new cr(ee,I.source,`layer "${I.id}" requires a vector source`)):Le!=="vector"||I["source-layer"]?Le==="raster-dem"&&ke!=="hillshade"?y.push(new cr(ee,I.source,"raster-dem source can only be used with layer type 'hillshade'.")):ke!=="line"||!I.paint||!I.paint["line-gradient"]&&!I.paint["line-trim-offset"]||Le==="geojson"&&ze.lineMetrics||y.push(new cr(ee,I,`layer "${I.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):y.push(new cr(ee,I,`layer "${I.id}" must specify a "source-layer"`)):y.push(new cr(ee,I.source,`source "${I.source}" not found`))}else y.push(new cr(ee,I,'missing required property "source"'));return y=y.concat(co({key:ee,value:I,valueSpec:ge.layer,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":()=>[],type:()=>qi({key:`${ee}.type`,value:I.type,valueSpec:ge.layer.type,style:$.style,styleSpec:$.styleSpec,object:I,objectKey:"type"}),filter:ze=>Ra(fo({layerType:ke},ze)),layout:ze=>co({layer:I,key:ze.key,value:ze.value,valueSpec:{},style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{"*":Le=>xu(fo({layerType:ke},Le))}}),paint:ze=>co({layer:I,key:ze.key,value:ze.value,valueSpec:{},style:ze.style,styleSpec:ze.styleSpec,objectElementValidators:{"*":Le=>vu(fo({layerType:ke},Le))}})}})),y}function ss($){const y=$.value,I=$.key,ee=Jr(y);return ee!=="string"?[new cr(I,y,`string expected, ${ee} found`)]:[]}const Ll={promoteId:function({key:$,value:y}){if(Jr(y)==="string")return ss({key:$,value:y});{const I=[];for(const ee in y)I.push(...ss({key:`${$}.${ee}`,value:y[ee]}));return I}}};function bu($){const y=$.value,I=$.key,ee=$.styleSpec,re=$.style;if(!y.type)return[new cr(I,y,'"type" is required')];const ge=ki(y.type);let ke;switch(ge){case"vector":case"raster":case"raster-dem":return ke=co({key:I,value:y,valueSpec:ee[`source_${ge.replace("-","_")}`],style:$.style,styleSpec:ee,objectElementValidators:Ll}),ke;case"geojson":if(ke=co({key:I,value:y,valueSpec:ee.source_geojson,style:re,styleSpec:ee,objectElementValidators:Ll}),y.cluster)for(const Ie in y.clusterProperties){const[ze,Le]=y.clusterProperties[Ie],Ve=typeof ze=="string"?[ze,["accumulated"],["get",Ie]]:ze;ke.push(...bo({key:`${I}.${Ie}.map`,value:Le,expressionContext:"cluster-map"})),ke.push(...bo({key:`${I}.${Ie}.reduce`,value:Ve,expressionContext:"cluster-reduce"}))}return ke;case"video":return co({key:I,value:y,valueSpec:ee.source_video,style:re,styleSpec:ee});case"image":return co({key:I,value:y,valueSpec:ee.source_image,style:re,styleSpec:ee});case"canvas":return[new cr(I,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zs({key:`${I}.type`,value:y.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:re,styleSpec:ee})}}function Au($){const y=$.value,I=$.styleSpec,ee=I.light,re=$.style;let ge=[];const ke=Jr(y);if(y===void 0)return ge;if(ke!=="object")return ge=ge.concat([new cr("light",y,`object expected, ${ke} found`)]),ge;for(const Ie in y){const ze=Ie.match(/^(.*)-transition$/);ge=ge.concat(ze&&ee[ze[1]]&&ee[ze[1]].transition?qi({key:Ie,value:y[Ie],valueSpec:I.transition,style:re,styleSpec:I}):ee[Ie]?qi({key:Ie,value:y[Ie],valueSpec:ee[Ie],style:re,styleSpec:I}):[new cr(Ie,y[Ie],`unknown property "${Ie}"`)])}return ge}function ls($){const y=$.value,I=$.key,ee=$.style,re=$.styleSpec,ge=re.terrain;let ke=[];const Ie=Jr(y);if(y===void 0)return ke;if(Ie!=="object")return ke=ke.concat([new cr("terrain",y,`object expected, ${Ie} found`)]),ke;for(const ze in y){const Le=ze.match(/^(.*)-transition$/);ke=ke.concat(Le&&ge[Le[1]]&&ge[Le[1]].transition?qi({key:ze,value:y[ze],valueSpec:re.transition,style:ee,styleSpec:re}):ge[ze]?qi({key:ze,value:y[ze],valueSpec:ge[ze],style:ee,styleSpec:re}):[new cr(ze,y[ze],`unknown property "${ze}"`)])}if(y.source){const ze=ee.sources&&ee.sources[y.source],Le=ze&&ki(ze.type);ze?Le!=="raster-dem"&&ke.push(new cr(I,y.source,`terrain cannot be used with a source of type ${String(Le)}, it only be used with a "raster-dem" source type`)):ke.push(new cr(I,y.source,`source "${y.source}" not found`))}else ke.push(new cr(I,y,'terrain is missing required property "source"'));return ke}function wu($){const y=$.value,I=$.style,ee=$.styleSpec,re=ee.fog;let ge=[];const ke=Jr(y);if(y===void 0)return ge;if(ke!=="object")return ge=ge.concat([new cr("fog",y,`object expected, ${ke} found`)]),ge;for(const Ie in y){const ze=Ie.match(/^(.*)-transition$/);ge=ge.concat(ze&&re[ze[1]]&&re[ze[1]].transition?qi({key:Ie,value:y[Ie],valueSpec:ee.transition,style:I,styleSpec:ee}):re[Ie]?qi({key:Ie,value:y[Ie],valueSpec:re[Ie],style:I,styleSpec:ee}):[new cr(Ie,y[Ie],`unknown property "${Ie}"`)])}return ge}const na={"*":()=>[],array:Cc,boolean:function($){const y=$.value,I=$.key,ee=Jr(y);return ee!=="boolean"?[new cr(I,y,`boolean expected, ${ee} found`)]:[]},number:Sc,color:function($){const y=$.key,I=$.value,ee=Jr(I);return ee!=="string"?[new cr(y,I,`color expected, ${ee} found`)]:pa.parseCSSColor(I)===null?[new cr(y,I,`color expected, "${I}" found`)]:[]},enum:Zs,filter:Ra,function:Ws,layer:$l,object:co,source:bu,light:Au,terrain:ls,fog:wu,string:ss,formatted:function($){return ss($).length===0?[]:bo($)},resolvedImage:function($){return ss($).length===0?[]:bo($)},projection:function($){const y=$.value,I=$.styleSpec,ee=I.projection,re=$.style;let ge=[];const ke=Jr(y);if(ke==="object")for(const Ie in y)ge=ge.concat(qi({key:Ie,value:y[Ie],valueSpec:ee[Ie],style:re,styleSpec:I}));else ke!=="string"&&(ge=ge.concat([new cr("projection",y,`object or string expected, ${ke} found`)]));return ge}};function qi($){const y=$.value,I=$.valueSpec,ee=$.styleSpec;return I.expression&&Vs(ki(y))?Ws($):I.expression&&Rl(ca(y))?bo($):I.type&&na[I.type]?na[I.type]($):co(fo({},$,{valueSpec:I.type?ee[I.type]:I}))}function dh($){const y=$.value,I=$.key,ee=ss($);return ee.length||(y.indexOf("{fontstack}")===-1&&ee.push(new cr(I,y,'"glyphs" url must include a "{fontstack}" token')),y.indexOf("{range}")===-1&&ee.push(new cr(I,y,'"glyphs" url must include a "{range}" token'))),ee}function Bl($,y=gn){return Ao(qi({key:"",value:$,valueSpec:y.$root,styleSpec:y,style:$,objectElementValidators:{glyphs:dh,"*":()=>[]}}))}const Fl=$=>Ao(vu($)),Eu=$=>Ao(xu($));function Ao($){return $.slice().sort((y,I)=>y.line&&I.line?y.line-I.line:0)}function Pc($,y){let I=!1;if(y&&y.length)for(const ee of y)$.fire(new ni(new Error(ee.message))),I=!0;return I}var Da=wo;function wo($,y,I){var ee=this.cells=[];if($ instanceof ArrayBuffer){this.arrayBuffer=$;var re=new Int32Array(this.arrayBuffer);$=re[0],this.d=(y=re[1])+2*(I=re[2]);for(var ge=0;ge<this.d*this.d;ge++){var ke=re[3+ge],Ie=re[3+ge+1];ee.push(ke===Ie?null:re.subarray(ke,Ie))}var ze=re[3+ee.length+1];this.keys=re.subarray(re[3+ee.length],ze),this.bboxes=re.subarray(ze),this.insert=this._insertReadonly}else{this.d=y+2*I;for(var Le=0;Le<this.d*this.d;Le++)ee.push([]);this.keys=[],this.bboxes=[]}this.n=y,this.extent=$,this.padding=I,this.scale=y/$,this.uid=0;var Ve=I/y*$;this.min=-Ve,this.max=$+Ve}wo.prototype.insert=function($,y,I,ee,re){this._forEachCell(y,I,ee,re,this._insertCell,this.uid++),this.keys.push($),this.bboxes.push(y),this.bboxes.push(I),this.bboxes.push(ee),this.bboxes.push(re)},wo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wo.prototype._insertCell=function($,y,I,ee,re,ge){this.cells[re].push(ge)},wo.prototype.query=function($,y,I,ee,re){var ge=this.min,ke=this.max;if($<=ge&&y<=ge&&ke<=I&&ke<=ee&&!re)return Array.prototype.slice.call(this.keys);var Ie=[];return this._forEachCell($,y,I,ee,this._queryCell,Ie,{},re),Ie},wo.prototype._queryCell=function($,y,I,ee,re,ge,ke,Ie){var ze=this.cells[re];if(ze!==null)for(var Le=this.keys,Ve=this.bboxes,We=0;We<ze.length;We++){var Ze=ze[We];if(ke[Ze]===void 0){var tt=4*Ze;(Ie?Ie(Ve[tt+0],Ve[tt+1],Ve[tt+2],Ve[tt+3]):$<=Ve[tt+2]&&y<=Ve[tt+3]&&I>=Ve[tt+0]&&ee>=Ve[tt+1])?(ke[Ze]=!0,ge.push(Le[Ze])):ke[Ze]=!1}}},wo.prototype._forEachCell=function($,y,I,ee,re,ge,ke,Ie){for(var ze=this._convertToCellCoord($),Le=this._convertToCellCoord(y),Ve=this._convertToCellCoord(I),We=this._convertToCellCoord(ee),Ze=ze;Ze<=Ve;Ze++)for(var tt=Le;tt<=We;tt++){var ot=this.d*tt+Ze;if((!Ie||Ie(this._convertFromCellCoord(Ze),this._convertFromCellCoord(tt),this._convertFromCellCoord(Ze+1),this._convertFromCellCoord(tt+1)))&&re.call(this,$,y,I,ee,ot,ge,ke,Ie))return}},wo.prototype._convertFromCellCoord=function($){return($-this.padding)/this.scale},wo.prototype._convertToCellCoord=function($){return Math.max(0,Math.min(this.d-1,Math.floor($*this.scale)+this.padding))},wo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var $=this.cells,y=3+this.cells.length+1+1,I=0,ee=0;ee<this.cells.length;ee++)I+=this.cells[ee].length;var re=new Int32Array(y+I+this.keys.length+this.bboxes.length);re[0]=this.extent,re[1]=this.n,re[2]=this.padding;for(var ge=y,ke=0;ke<$.length;ke++){var Ie=$[ke];re[3+ke]=ge,re.set(Ie,ge),ge+=Ie.length}return re[3+$.length]=ge,re.set(this.keys,ge),re[3+$.length+1]=ge+=this.keys.length,re.set(this.bboxes,ge),ge+=this.bboxes.length,re.buffer};const ra={};function ur($,y,I={}){Object.defineProperty($,"_classRegistryKey",{value:y,writeable:!1}),ra[y]={klass:$,omit:I.omit||[]}}ur(Object,"Object"),Da.serialize=function($,y){const I=$.toArrayBuffer();return y&&y.push(I),{buffer:I}},Da.deserialize=function($){return new Da($.buffer)},Object.defineProperty(Da,"name",{value:"Grid"}),ur(Da,"Grid"),ur(ii,"Color"),ur(Error,"Error"),ur(fn,"AJAXError"),ur(so,"ResolvedImage"),ur(is,"StylePropertyFunction"),ur(Ec,"StyleExpression",{omit:["_evaluator"]}),ur(Hs,"ZoomDependentExpression"),ur(Tc,"ZoomConstantExpression"),ur(lo,"CompoundExpression",{omit:["_evaluate"]});for(const $ in Us)ra[Us[$]._classRegistryKey]||ur(Us[$],`Expression${$}`);function cs($){return $&&typeof ArrayBuffer!="undefined"&&($ instanceof ArrayBuffer||$.constructor&&$.constructor.name==="ArrayBuffer")}function Tu($){return be.ImageBitmap&&$ instanceof be.ImageBitmap}function us($,y){if($==null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||$ instanceof Boolean||$ instanceof Number||$ instanceof String||$ instanceof Date||$ instanceof RegExp)return $;if(cs($)||Tu($))return y&&y.push($),$;if(ArrayBuffer.isView($)){const I=$;return y&&y.push(I.buffer),I}if($ instanceof be.ImageData)return y&&y.push($.data.buffer),$;if(Array.isArray($)){const I=[];for(const ee of $)I.push(us(ee,y));return I}if(typeof $=="object"){const I=$.constructor,ee=I._classRegistryKey;if(!ee)throw new Error(`can't serialize object of unregistered class ${ee}`);const re=I.serialize?I.serialize($,y):{};if(!I.serialize){for(const ge in $)$.hasOwnProperty(ge)&&(ra[ee].omit.indexOf(ge)>=0||(re[ge]=us($[ge],y)));$ instanceof Error&&(re.message=$.message)}if(re.$name)throw new Error("$name property is reserved for worker serialization logic.");return ee!=="Object"&&(re.$name=ee),re}throw new Error("can't serialize object of type "+typeof $)}function el($){if($==null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||$ instanceof Boolean||$ instanceof Number||$ instanceof String||$ instanceof Date||$ instanceof RegExp||cs($)||Tu($)||ArrayBuffer.isView($)||$ instanceof be.ImageData)return $;if(Array.isArray($))return $.map(el);if(typeof $=="object"){const y=$.$name||"Object",{klass:I}=ra[y];if(!I)throw new Error(`can't deserialize unregistered class ${y}`);if(I.deserialize)return I.deserialize($);const ee=Object.create(I.prototype);for(const re of Object.keys($))re!=="$name"&&(ee[re]=el($[re]));return ee}throw new Error("can't deserialize object of type "+typeof $)}class Oc{constructor(){this.first=!0}update(y,I){const ee=Math.floor(y);return this.first?(this.first=!1,this.lastIntegerZoom=ee,this.lastIntegerZoomTime=0,this.lastZoom=y,this.lastFloorZoom=ee,!0):(this.lastFloorZoom>ee?(this.lastIntegerZoom=ee+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<ee&&(this.lastIntegerZoom=ee,this.lastIntegerZoomTime=I),y!==this.lastZoom&&(this.lastZoom=y,this.lastFloorZoom=ee,!0))}}const ku=$=>$>=1536&&$<=1791,Cu=$=>$>=1872&&$<=1919,Su=$=>$>=2208&&$<=2303,Iu=$=>$>=11904&&$<=12031,tl=$=>$>=12032&&$<=12255,si=$=>$>=12272&&$<=12287,Nl=$=>$>=12288&&$<=12351,fi=$=>$>=12352&&$<=12447,Hi=$=>$>=12448&&$<=12543,Rc=$=>$>=12544&&$<=12591,Dc=$=>$>=12704&&$<=12735,zc=$=>$>=12736&&$<=12783,mo=$=>$>=12784&&$<=12799,ya=$=>$>=12800&&$<=13055,$c=$=>$>=13056&&$<=13311,va=$=>$>=13312&&$<=19903,nl=$=>$>=19968&&$<=40959,jl=$=>$>=40960&&$<=42127,ia=$=>$>=42128&&$<=42191,Lc=$=>$>=44032&&$<=55215,Ul=$=>$>=63744&&$<=64255,$o=$=>$>=64336&&$<=65023,Bc=$=>$>=65040&&$<=65055,Vl=$=>$>=65072&&$<=65103,Hr=$=>$>=65104&&$<=65135,Fc=$=>$>=65136&&$<=65279,Gl=$=>$>=65280&&$<=65519;function rl($){for(const y of $)if(il(y.charCodeAt(0)))return!0;return!1}function Nc($){for(const y of $)if(!jc(y.charCodeAt(0)))return!1;return!0}function jc($){return!(ku($)||Cu($)||Su($)||$o($)||Fc($))}function il($){return!($!==746&&$!==747&&($<4352||!(Dc($)||Rc($)||Vl($)&&!($>=65097&&$<=65103)||Ul($)||$c($)||Iu($)||zc($)||!(!Nl($)||$>=12296&&$<=12305||$>=12308&&$<=12319||$===12336)||va($)||nl($)||ya($)||(y=>y>=12592&&y<=12687)($)||(y=>y>=43360&&y<=43391)($)||(y=>y>=55216&&y<=55295)($)||(y=>y>=4352&&y<=4607)($)||Lc($)||fi($)||si($)||(y=>y>=12688&&y<=12703)($)||tl($)||mo($)||Hi($)&&$!==12540||!(!Gl($)||$===65288||$===65289||$===65293||$>=65306&&$<=65310||$===65339||$===65341||$===65343||$>=65371&&$<=65503||$===65507||$>=65512&&$<=65519)||!(!Hr($)||$>=65112&&$<=65118||$>=65123&&$<=65126)||(y=>y>=5120&&y<=5759)($)||(y=>y>=6320&&y<=6399)($)||Bc($)||(y=>y>=19904&&y<=19967)($)||jl($)||ia($))))}function hs($){return!(il($)||function(y){return!!((I=>I>=128&&I<=255)(y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||(I=>I>=8192&&I<=8303)(y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||(I=>I>=8448&&I<=8527)(y)||(I=>I>=8528&&I<=8591)(y)||(I=>I>=8960&&I<=9215)(y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||(I=>I>=9216&&I<=9279)(y)&&y!==9251||(I=>I>=9280&&I<=9311)(y)||(I=>I>=9312&&I<=9471)(y)||(I=>I>=9632&&I<=9727)(y)||(I=>I>=9728&&I<=9983)(y)&&!(y>=9754&&y<=9759)||(I=>I>=11008&&I<=11263)(y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Nl(y)||Hi(y)||(I=>I>=57344&&I<=63743)(y)||Vl(y)||Hr(y)||Gl(y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}($))}function _e($){return $>=1424&&$<=2303||$o($)||Fc($)}function U($,y){return!(!y&&_e($)||$>=2304&&$<=3583||$>=3840&&$<=4255||(I=>I>=6016&&I<=6143)($))}function te($){for(const y of $)if(_e(y.charCodeAt(0)))return!0;return!1}const we="deferred",Pe="loading",Re="loaded";let Be=null,Ne="unavailable",qe=null;const Ke=function($){$&&typeof $=="string"&&$.indexOf("NetworkError")>-1&&(Ne="error"),Be&&Be($)};function Qe(){ut.fire(new ai("pluginStateChange",{pluginStatus:Ne,pluginURL:qe}))}const ut=new xr,gt=function(){return Ne},Mt=function(){if(Ne!==we||!qe)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ne=Pe,Qe(),qe&&_n({url:qe},$=>{$?Ke($):(Ne=Re,Qe())})},kt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ne===Re||kt.applyArabicShaping!=null,isLoading:()=>Ne===Pe,setState($){Ne=$.pluginStatus,qe=$.pluginURL},isParsed:()=>kt.applyArabicShaping!=null&&kt.processBidirectionalText!=null&&kt.processStyledBidirectionalText!=null,getPluginURL:()=>qe};class Tt{constructor(y,I){this.zoom=y,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition,this.pitch=I.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oc,this.transition={},this.pitch=0)}isSupportedScript(y){return function(I,ee){for(const re of I)if(!U(re.charCodeAt(0),ee))return!1;return!0}(y,kt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const y=this.zoom,I=y-Math.floor(y),ee=this.crossFadingFactor();return y>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*ee}:{fromScale:.5,toScale:1,t:1-(1-ee)*I}}}class Ct{constructor(y,I){this.property=y,this.value=I,this.expression=function(ee,re){if(Vs(ee))return new is(ee,re);if(Rl(ee)){const ge=kc(ee,re);if(ge.result==="error")throw new Error(ge.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));return ge.value}{let ge=ee;return typeof ee=="string"&&re.type==="color"&&(ge=ii.parse(ee)),{kind:"constant",evaluate:()=>ge}}}(I===void 0?y.specification.default:I,y.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(y,I,ee){return this.property.possiblyEvaluate(this,y,I,ee)}}class wt{constructor(y){this.property=y,this.value=new Ct(y,void 0)}transitioned(y,I){return new Ot(this.property,this.value,I,At({},y.transition,this.transition),y.now)}untransitioned(){return new Ot(this.property,this.value,null,{},0)}}class zt{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitionablePropertyValues)}getValue(y){return Vt(this._values[y].value.value)}setValue(y,I){this._values.hasOwnProperty(y)||(this._values[y]=new wt(this._values[y].property)),this._values[y].value=new Ct(this._values[y].property,I===null?void 0:Vt(I))}getTransition(y){return Vt(this._values[y].transition)}setTransition(y,I){this._values.hasOwnProperty(y)||(this._values[y]=new wt(this._values[y].property)),this._values[y].transition=Vt(I)||void 0}serialize(){const y={};for(const I of Object.keys(this._values)){const ee=this.getValue(I);ee!==void 0&&(y[I]=ee);const re=this.getTransition(I);re!==void 0&&(y[`${I}-transition`]=re)}return y}transitioned(y,I){const ee=new Qt(this._properties);for(const re of Object.keys(this._values))ee._values[re]=this._values[re].transitioned(y,I._values[re]);return ee}untransitioned(){const y=new Qt(this._properties);for(const I of Object.keys(this._values))y._values[I]=this._values[I].untransitioned();return y}}class Ot{constructor(y,I,ee,re,ge){const ke=re.delay||0,Ie=re.duration||0;ge=ge||0,this.property=y,this.value=I,this.begin=ge+ke,this.end=this.begin+Ie,y.specification.transition&&(re.delay||re.duration)&&(this.prior=ee)}possiblyEvaluate(y,I,ee){const re=y.now||0,ge=this.value.possiblyEvaluate(y,I,ee),ke=this.prior;if(ke){if(re>this.end)return this.prior=null,ge;if(this.value.isDataDriven())return this.prior=null,ge;if(re<this.begin)return ke.possiblyEvaluate(y,I,ee);{const Ie=(re-this.begin)/(this.end-this.begin);return this.property.interpolate(ke.possiblyEvaluate(y,I,ee),ge,$e(Ie))}}return ge}}class Qt{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitioningPropertyValues)}possiblyEvaluate(y,I,ee){const re=new Yt(this._properties);for(const ge of Object.keys(this._values))re._values[ge]=this._values[ge].possiblyEvaluate(y,I,ee);return re}hasTransition(){for(const y of Object.keys(this._values))if(this._values[y].prior)return!0;return!1}}class Kt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPropertyValues)}getValue(y){return Vt(this._values[y].value)}setValue(y,I){this._values[y]=new Ct(this._values[y].property,I===null?void 0:Vt(I))}serialize(){const y={};for(const I of Object.keys(this._values)){const ee=this.getValue(I);ee!==void 0&&(y[I]=ee)}return y}possiblyEvaluate(y,I,ee){const re=new Yt(this._properties);for(const ge of Object.keys(this._values))re._values[ge]=this._values[ge].possiblyEvaluate(y,I,ee);return re}}class Gt{constructor(y,I,ee){this.property=y,this.value=I,this.parameters=ee}isConstant(){return this.value.kind==="constant"}constantOr(y){return this.value.kind==="constant"?this.value.value:y}evaluate(y,I,ee,re){return this.property.evaluate(this.value,this.parameters,y,I,ee,re)}}class Yt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPossiblyEvaluatedValues)}get(y){return this._values[y]}}class Wt{constructor(y){this.specification=y}possiblyEvaluate(y,I){return y.expression.evaluate(I)}interpolate(y,I,ee){const re=Ls[this.specification.type];return re?re(y,I,ee):y}}class sn{constructor(y,I){this.specification=y,this.overrides=I}possiblyEvaluate(y,I,ee,re){return new Gt(this,y.expression.kind==="constant"||y.expression.kind==="camera"?{kind:"constant",value:y.expression.evaluate(I,null,{},ee,re)}:y.expression,I)}interpolate(y,I,ee){if(y.value.kind!=="constant"||I.value.kind!=="constant")return y;if(y.value.value===void 0||I.value.value===void 0)return new Gt(this,{kind:"constant",value:void 0},y.parameters);const re=Ls[this.specification.type];return re?new Gt(this,{kind:"constant",value:re(y.value.value,I.value.value,ee)},y.parameters):y}evaluate(y,I,ee,re,ge,ke){return y.kind==="constant"?y.value:y.evaluate(I,ee,re,ge,ke)}}class mn extends sn{possiblyEvaluate(y,I,ee,re){if(y.value===void 0)return new Gt(this,{kind:"constant",value:void 0},I);if(y.expression.kind==="constant"){const ge=y.expression.evaluate(I,null,{},ee,re),ke=y.property.specification.type==="resolvedImage"&&typeof ge!="string"?ge.name:ge,Ie=this._calculate(ke,ke,ke,I);return new Gt(this,{kind:"constant",value:Ie},I)}if(y.expression.kind==="camera"){const ge=this._calculate(y.expression.evaluate({zoom:I.zoom-1}),y.expression.evaluate({zoom:I.zoom}),y.expression.evaluate({zoom:I.zoom+1}),I);return new Gt(this,{kind:"constant",value:ge},I)}return new Gt(this,y.expression,I)}evaluate(y,I,ee,re,ge,ke){if(y.kind==="source"){const Ie=y.evaluate(I,ee,re,ge,ke);return this._calculate(Ie,Ie,Ie,I)}return y.kind==="composite"?this._calculate(y.evaluate({zoom:Math.floor(I.zoom)-1},ee,re),y.evaluate({zoom:Math.floor(I.zoom)},ee,re),y.evaluate({zoom:Math.floor(I.zoom)+1},ee,re),I):y.value}_calculate(y,I,ee,re){return re.zoom>re.zoomHistory.lastIntegerZoom?{from:y,to:I,other:ee}:{from:ee,to:I,other:y}}interpolate(y){return y}}class Wn{constructor(y){this.specification=y}possiblyEvaluate(y,I,ee,re){if(y.value!==void 0){if(y.expression.kind==="constant"){const ge=y.expression.evaluate(I,null,{},ee,re);return this._calculate(ge,ge,ge,I)}return this._calculate(y.expression.evaluate(new Tt(Math.floor(I.zoom-1),I)),y.expression.evaluate(new Tt(Math.floor(I.zoom),I)),y.expression.evaluate(new Tt(Math.floor(I.zoom+1),I)),I)}}_calculate(y,I,ee,re){return re.zoom>re.zoomHistory.lastIntegerZoom?{from:y,to:I}:{from:ee,to:I}}interpolate(y){return y}}class pn{constructor(y){this.specification=y}possiblyEvaluate(y,I,ee,re){return!!y.expression.evaluate(I,null,{},ee,re)}interpolate(){return!1}}class Dn{constructor(y){this.properties=y,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const I=new Tt(0,{});for(const ee in y){const re=y[ee];re.specification.overridable&&this.overridableProperties.push(ee);const ge=this.defaultPropertyValues[ee]=new Ct(re,void 0),ke=this.defaultTransitionablePropertyValues[ee]=new wt(re);this.defaultTransitioningPropertyValues[ee]=ke.untransitioned(),this.defaultPossiblyEvaluatedValues[ee]=ge.possiblyEvaluate(I)}}}function Nn($,y){return 256*($=Ye(Math.floor($),0,255))+Ye(Math.floor(y),0,255)}ur(sn,"DataDrivenProperty"),ur(Wt,"DataConstantProperty"),ur(mn,"CrossFadedDataDrivenProperty"),ur(Wn,"CrossFadedProperty"),ur(pn,"ColorRampProperty");const er={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kn{constructor(y,I){this._structArray=y,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(y,I){return y._trim(),I&&(y.isTransferred=!0,I.push(y.arrayBuffer)),{length:y.length,arrayBuffer:y.arrayBuffer}}static deserialize(y){const I=Object.create(this.prototype);return I.arrayBuffer=y.arrayBuffer,I.length=y.length,I.capacity=y.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(y){this.reserve(y),this.length=y}reserve(y){if(y>this.capacity){this.capacity=Math.max(y,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ln($,y=1){let I=0,ee=0;return{members:$.map(re=>{const ge=er[re.type].BYTES_PER_ELEMENT,ke=I=or(I,Math.max(y,ge)),Ie=re.components||1;return ee=Math.max(ee,ge),I+=ge*Ie,{name:re.name,type:re.type,components:Ie,offset:ke}}),size:or(I,Math.max(ee,y)),alignment:y}}function or($,y){return Math.ceil($/y)*y}class tr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,I)}emplace(y,I,ee){const re=2*y;return this.int16[re+0]=I,this.int16[re+1]=ee,y}}tr.prototype.bytesPerElement=4,ur(tr,"StructArrayLayout2i4");class pr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee){const re=this.length;return this.resize(re+1),this.emplace(re,y,I,ee)}emplace(y,I,ee,re){const ge=3*y;return this.int16[ge+0]=I,this.int16[ge+1]=ee,this.int16[ge+2]=re,y}}pr.prototype.bytesPerElement=6,ur(pr,"StructArrayLayout3i6");class yr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=4*y;return this.int16[ke+0]=I,this.int16[ke+1]=ee,this.int16[ke+2]=re,this.int16[ke+3]=ge,y}}yr.prototype.bytesPerElement=8,ur(yr,"StructArrayLayout4i8");class Tr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie){const ze=this.length;return this.resize(ze+1),this.emplace(ze,y,I,ee,re,ge,ke,Ie)}emplace(y,I,ee,re,ge,ke,Ie,ze){const Le=6*y,Ve=12*y,We=3*y;return this.int16[Le+0]=I,this.int16[Le+1]=ee,this.uint8[Ve+4]=re,this.uint8[Ve+5]=ge,this.uint8[Ve+6]=ke,this.uint8[Ve+7]=Ie,this.float32[We+2]=ze,y}}Tr.prototype.bytesPerElement=12,ur(Tr,"StructArrayLayout2i4ub1f12");class Vr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=4*y;return this.float32[ke+0]=I,this.float32[ke+1]=ee,this.float32[ke+2]=re,this.float32[ke+3]=ge,y}}Vr.prototype.bytesPerElement=16,ur(Vr,"StructArrayLayout4f16");class _r extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,ze,Le,Ve){const We=this.length;return this.resize(We+1),this.emplace(We,y,I,ee,re,ge,ke,Ie,ze,Le,Ve)}emplace(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We){const Ze=10*y;return this.uint16[Ze+0]=I,this.uint16[Ze+1]=ee,this.uint16[Ze+2]=re,this.uint16[Ze+3]=ge,this.uint16[Ze+4]=ke,this.uint16[Ze+5]=Ie,this.uint16[Ze+6]=ze,this.uint16[Ze+7]=Le,this.uint16[Ze+8]=Ve,this.uint16[Ze+9]=We,y}}_r.prototype.bytesPerElement=20,ur(_r,"StructArrayLayout10ui20");class Ir extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,ze){const Le=this.length;return this.resize(Le+1),this.emplace(Le,y,I,ee,re,ge,ke,Ie,ze)}emplace(y,I,ee,re,ge,ke,Ie,ze,Le){const Ve=8*y;return this.uint16[Ve+0]=I,this.uint16[Ve+1]=ee,this.uint16[Ve+2]=re,this.uint16[Ve+3]=ge,this.uint16[Ve+4]=ke,this.uint16[Ve+5]=Ie,this.uint16[Ve+6]=ze,this.uint16[Ve+7]=Le,y}}Ir.prototype.bytesPerElement=16,ur(Ir,"StructArrayLayout8ui16");class Zr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,y,I,ee,re,ge,ke)}emplace(y,I,ee,re,ge,ke,Ie){const ze=6*y;return this.int16[ze+0]=I,this.int16[ze+1]=ee,this.int16[ze+2]=re,this.int16[ze+3]=ge,this.int16[ze+4]=ke,this.int16[ze+5]=Ie,y}}Zr.prototype.bytesPerElement=12,ur(Zr,"StructArrayLayout6i12");class ci extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze){const tt=this.length;return this.resize(tt+1),this.emplace(tt,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze)}emplace(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt){const ot=12*y;return this.int16[ot+0]=I,this.int16[ot+1]=ee,this.int16[ot+2]=re,this.int16[ot+3]=ge,this.uint16[ot+4]=ke,this.uint16[ot+5]=Ie,this.uint16[ot+6]=ze,this.uint16[ot+7]=Le,this.int16[ot+8]=Ve,this.int16[ot+9]=We,this.int16[ot+10]=Ze,this.int16[ot+11]=tt,y}}ci.prototype.bytesPerElement=24,ur(ci,"StructArrayLayout4i4ui4i24");class Ai extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke){const Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,y,I,ee,re,ge,ke)}emplace(y,I,ee,re,ge,ke,Ie){const ze=10*y,Le=5*y;return this.int16[ze+0]=I,this.int16[ze+1]=ee,this.int16[ze+2]=re,this.float32[Le+2]=ge,this.float32[Le+3]=ke,this.float32[Le+4]=Ie,y}}Ai.prototype.bytesPerElement=20,ur(Ai,"StructArrayLayout3i3f20");class oi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.uint32[1*y+0]=I,y}}oi.prototype.bytesPerElement=4,ur(oi,"StructArrayLayout1ul4");class Wi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt){const ot=this.length;return this.resize(ot+1),this.emplace(ot,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt)}emplace(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot){const mt=20*y,Et=10*y;return this.int16[mt+0]=I,this.int16[mt+1]=ee,this.int16[mt+2]=re,this.int16[mt+3]=ge,this.int16[mt+4]=ke,this.float32[Et+3]=Ie,this.float32[Et+4]=ze,this.float32[Et+5]=Le,this.float32[Et+6]=Ve,this.int16[mt+14]=We,this.uint32[Et+8]=Ze,this.uint16[mt+18]=tt,this.uint16[mt+19]=ot,y}}Wi.prototype.bytesPerElement=40,ur(Wi,"StructArrayLayout5i4f1i1ul2ui40");class Eo extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie){const ze=this.length;return this.resize(ze+1),this.emplace(ze,y,I,ee,re,ge,ke,Ie)}emplace(y,I,ee,re,ge,ke,Ie,ze){const Le=8*y;return this.int16[Le+0]=I,this.int16[Le+1]=ee,this.int16[Le+2]=re,this.int16[Le+4]=ge,this.int16[Le+5]=ke,this.int16[Le+6]=Ie,this.int16[Le+7]=ze,y}}Eo.prototype.bytesPerElement=16,ur(Eo,"StructArrayLayout3i2i2i16");class oa extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge){const ke=this.length;return this.resize(ke+1),this.emplace(ke,y,I,ee,re,ge)}emplace(y,I,ee,re,ge,ke){const Ie=4*y,ze=8*y;return this.float32[Ie+0]=I,this.float32[Ie+1]=ee,this.float32[Ie+2]=re,this.int16[ze+6]=ge,this.int16[ze+7]=ke,y}}oa.prototype.bytesPerElement=16,ur(oa,"StructArrayLayout2f1f2i16");class _i extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=12*y,Ie=3*y;return this.uint8[ke+0]=I,this.uint8[ke+1]=ee,this.float32[Ie+1]=re,this.float32[Ie+2]=ge,y}}_i.prototype.bytesPerElement=12,ur(_i,"StructArrayLayout2ub2f12");class vi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee){const re=this.length;return this.resize(re+1),this.emplace(re,y,I,ee)}emplace(y,I,ee,re){const ge=3*y;return this.float32[ge+0]=I,this.float32[ge+1]=ee,this.float32[ge+2]=re,y}}vi.prototype.bytesPerElement=12,ur(vi,"StructArrayLayout3f12");class Dr extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee){const re=this.length;return this.resize(re+1),this.emplace(re,y,I,ee)}emplace(y,I,ee,re){const ge=3*y;return this.uint16[ge+0]=I,this.uint16[ge+1]=ee,this.uint16[ge+2]=re,y}}Dr.prototype.bytesPerElement=6,ur(Dr,"StructArrayLayout3ui6");class Di extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et,Ft,Ht,Nt,qt,Jt){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et,Ft,Ht,Nt,qt,Jt)}emplace(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et,Ft,Ht,Nt,qt,Jt,Zt){const Tn=30*y,An=15*y,On=60*y;return this.int16[Tn+0]=I,this.int16[Tn+1]=ee,this.int16[Tn+2]=re,this.float32[An+2]=ge,this.float32[An+3]=ke,this.uint16[Tn+8]=Ie,this.uint16[Tn+9]=ze,this.uint32[An+5]=Le,this.uint32[An+6]=Ve,this.uint32[An+7]=We,this.uint16[Tn+16]=Ze,this.uint16[Tn+17]=tt,this.uint16[Tn+18]=ot,this.float32[An+10]=mt,this.float32[An+11]=Et,this.uint8[On+48]=Ft,this.uint8[On+49]=Ht,this.uint8[On+50]=Nt,this.uint32[An+13]=qt,this.int16[Tn+28]=Jt,this.uint8[On+58]=Zt,y}}Di.prototype.bytesPerElement=60,ur(Di,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class zi extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et,Ft,Ht,Nt,qt,Jt,Zt,Tn,An,On,Qn,Cn,Bn,Vn,Fn){const Xn=this.length;return this.resize(Xn+1),this.emplace(Xn,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et,Ft,Ht,Nt,qt,Jt,Zt,Tn,An,On,Qn,Cn,Bn,Vn,Fn)}emplace(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et,Ft,Ht,Nt,qt,Jt,Zt,Tn,An,On,Qn,Cn,Bn,Vn,Fn,Xn){const Gn=38*y,ar=19*y;return this.int16[Gn+0]=I,this.int16[Gn+1]=ee,this.int16[Gn+2]=re,this.float32[ar+2]=ge,this.float32[ar+3]=ke,this.int16[Gn+8]=Ie,this.int16[Gn+9]=ze,this.int16[Gn+10]=Le,this.int16[Gn+11]=Ve,this.int16[Gn+12]=We,this.int16[Gn+13]=Ze,this.uint16[Gn+14]=tt,this.uint16[Gn+15]=ot,this.uint16[Gn+16]=mt,this.uint16[Gn+17]=Et,this.uint16[Gn+18]=Ft,this.uint16[Gn+19]=Ht,this.uint16[Gn+20]=Nt,this.uint16[Gn+21]=qt,this.uint16[Gn+22]=Jt,this.uint16[Gn+23]=Zt,this.uint16[Gn+24]=Tn,this.uint16[Gn+25]=An,this.uint16[Gn+26]=On,this.uint16[Gn+27]=Qn,this.uint16[Gn+28]=Cn,this.uint32[ar+15]=Bn,this.float32[ar+16]=Vn,this.float32[ar+17]=Fn,this.float32[ar+18]=Xn,y}}zi.prototype.bytesPerElement=76,ur(zi,"StructArrayLayout3i2f6i15ui1ul3f76");class ui extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.float32[1*y+0]=I,y}}ui.prototype.bytesPerElement=4,ur(ui,"StructArrayLayout1f4");class Ki extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,ee,re,ge){const ke=this.length;return this.resize(ke+1),this.emplace(ke,y,I,ee,re,ge)}emplace(y,I,ee,re,ge,ke){const Ie=5*y;return this.float32[Ie+0]=I,this.float32[Ie+1]=ee,this.float32[Ie+2]=re,this.float32[Ie+3]=ge,this.float32[Ie+4]=ke,y}}Ki.prototype.bytesPerElement=20,ur(Ki,"StructArrayLayout5f20");class za extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,ee,re){const ge=this.length;return this.resize(ge+1),this.emplace(ge,y,I,ee,re)}emplace(y,I,ee,re,ge){const ke=6*y;return this.uint32[3*y+0]=I,this.uint16[ke+2]=ee,this.uint16[ke+3]=re,this.uint16[ke+4]=ge,y}}za.prototype.bytesPerElement=12,ur(za,"StructArrayLayout1ul3ui12");class to extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,I)}emplace(y,I,ee){const re=2*y;return this.uint16[re+0]=I,this.uint16[re+1]=ee,y}}to.prototype.bytesPerElement=4,ur(to,"StructArrayLayout2ui4");class go extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.uint16[1*y+0]=I,y}}go.prototype.bytesPerElement=2,ur(go,"StructArrayLayout1ui2");class $a extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,I)}emplace(y,I,ee){const re=2*y;return this.float32[re+0]=I,this.float32[re+1]=ee,y}}$a.prototype.bytesPerElement=8,ur($a,"StructArrayLayout2f8");class La extends kn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}La.prototype.size=12;class no extends Zr{get(y){return new La(this,y)}}ur(no,"FillExtrusionExtArray");class Ba extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ba.prototype.size=40;class qo extends Wi{get(y){return new Ba(this,y)}}ur(qo,"CollisionBoxArray");class ol extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(y){this._structArray.uint8[this._pos1+49]=y}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(y){this._structArray.uint8[this._pos1+50]=y}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(y){this._structArray.uint32[this._pos4+13]=y}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(y){this._structArray.uint8[this._pos1+58]=y}}ol.prototype.size=60;class Xh extends Di{get(y){return new ol(this,y)}}ur(Xh,"PlacedSymbolArray");class Yh extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(y){this._structArray.uint32[this._pos4+15]=y}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Yh.prototype.size=76;class Kh extends zi{get(y){return new Yh(this,y)}}ur(Kh,"SymbolInstanceArray");class ph extends ui{getoffsetX(y){return this.float32[1*y+0]}}ur(ph,"GlyphOffsetArray");class Qh extends pr{getx(y){return this.int16[3*y+0]}gety(y){return this.int16[3*y+1]}gettileUnitDistanceFromAnchor(y){return this.int16[3*y+2]}}ur(Qh,"SymbolLineVertexArray");class fh extends kn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}fh.prototype.size=12;class _h extends za{get(y){return new fh(this,y)}}ur(_h,"FeatureIndexArray");class ql extends kn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}ql.prototype.size=4;class To extends to{get(y){return new ql(this,y)}}ur(To,"FillExtrusionCentroidArray");class Jh extends kn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Jh.prototype.size=12;class ed extends Zr{get(y){return new Jh(this,y)}}ur(ed,"CircleGlobeExtArray");const td=Ln([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),nd=Ln([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Mu=ic(function($){$.exports=function(y,I){var ee,re,ge,ke,Ie,ze,Le,Ve;for(re=y.length-(ee=3&y.length),ge=I,Ie=3432918353,ze=461845907,Ve=0;Ve<re;)Le=255&y.charCodeAt(Ve)|(255&y.charCodeAt(++Ve))<<8|(255&y.charCodeAt(++Ve))<<16|(255&y.charCodeAt(++Ve))<<24,++Ve,ge=27492+(65535&(ke=5*(65535&(ge=(ge^=Le=(65535&(Le=(Le=(65535&Le)*Ie+(((Le>>>16)*Ie&65535)<<16)&4294967295)<<15|Le>>>17))*ze+(((Le>>>16)*ze&65535)<<16)&4294967295)<<13|ge>>>19))+((5*(ge>>>16)&65535)<<16)&4294967295))+((58964+(ke>>>16)&65535)<<16);switch(Le=0,ee){case 3:Le^=(255&y.charCodeAt(Ve+2))<<16;case 2:Le^=(255&y.charCodeAt(Ve+1))<<8;case 1:ge^=Le=(65535&(Le=(Le=(65535&(Le^=255&y.charCodeAt(Ve)))*Ie+(((Le>>>16)*Ie&65535)<<16)&4294967295)<<15|Le>>>17))*ze+(((Le>>>16)*ze&65535)<<16)&4294967295}return ge^=y.length,ge=2246822507*(65535&(ge^=ge>>>16))+((2246822507*(ge>>>16)&65535)<<16)&4294967295,ge=3266489909*(65535&(ge^=ge>>>13))+((3266489909*(ge>>>16)&65535)<<16)&4294967295,(ge^=ge>>>16)>>>0}}),Yd=ic(function($){$.exports=function(y,I){for(var ee,re=y.length,ge=I^re,ke=0;re>=4;)ee=1540483477*(65535&(ee=255&y.charCodeAt(ke)|(255&y.charCodeAt(++ke))<<8|(255&y.charCodeAt(++ke))<<16|(255&y.charCodeAt(++ke))<<24))+((1540483477*(ee>>>16)&65535)<<16),ge=1540483477*(65535&ge)+((1540483477*(ge>>>16)&65535)<<16)^(ee=1540483477*(65535&(ee^=ee>>>24))+((1540483477*(ee>>>16)&65535)<<16)),re-=4,++ke;switch(re){case 3:ge^=(255&y.charCodeAt(ke+2))<<16;case 2:ge^=(255&y.charCodeAt(ke+1))<<8;case 1:ge=1540483477*(65535&(ge^=255&y.charCodeAt(ke)))+((1540483477*(ge>>>16)&65535)<<16)}return ge=1540483477*(65535&(ge^=ge>>>13))+((1540483477*(ge>>>16)&65535)<<16),(ge^=ge>>>15)>>>0}}),Uc=Mu,rd=Yd;Uc.murmur3=Mu,Uc.murmur2=rd;class Pu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(y,I,ee,re){this.ids.push(id(y)),this.positions.push(I,ee,re)}getPositions(y){const I=id(y);let ee=0,re=this.ids.length-1;for(;ee<re;){const ke=ee+re>>1;this.ids[ke]>=I?re=ke:ee=ke+1}const ge=[];for(;this.ids[ee]===I;)ge.push({index:this.positions[3*ee],start:this.positions[3*ee+1],end:this.positions[3*ee+2]}),ee++;return ge}static serialize(y,I){const ee=new Float64Array(y.ids),re=new Uint32Array(y.positions);return Hl(ee,re,0,ee.length-1),I&&I.push(ee.buffer,re.buffer),{ids:ee,positions:re}}static deserialize(y){const I=new Pu;return I.ids=y.ids,I.positions=y.positions,I.indexed=!0,I}}function id($){const y=+$;return!isNaN(y)&&Number.MIN_SAFE_INTEGER<=y&&y<=Number.MAX_SAFE_INTEGER?y:Uc(String($))}function Hl($,y,I,ee){for(;I<ee;){const re=$[I+ee>>1];let ge=I-1,ke=ee+1;for(;;){do ge++;while($[ge]<re);do ke--;while($[ke]>re);if(ge>=ke)break;Fa($,ge,ke),Fa(y,3*ge,3*ke),Fa(y,3*ge+1,3*ke+1),Fa(y,3*ge+2,3*ke+2)}ke-I<ee-ke?(Hl($,y,I,ke),I=ke+1):(Hl($,y,ke+1,ee),ee=ke)}}function Fa($,y,I){const ee=$[y];$[y]=$[I],$[I]=ee}ur(Pu,"FeaturePositionMap");class Na{constructor(y){this.gl=y.gl,this.initialized=!1}fetchUniformLocation(y,I){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(y,I),this.initialized=!0),!!this.location}}class Ou extends Na{constructor(y){super(y),this.current=0}set(y,I,ee){this.fetchUniformLocation(y,I)&&this.current!==ee&&(this.current=ee,this.gl.uniform1f(this.location,ee))}}class od extends Na{constructor(y){super(y),this.current=[0,0,0,0]}set(y,I,ee){this.fetchUniformLocation(y,I)&&(ee[0]===this.current[0]&&ee[1]===this.current[1]&&ee[2]===this.current[2]&&ee[3]===this.current[3]||(this.current=ee,this.gl.uniform4f(this.location,ee[0],ee[1],ee[2],ee[3])))}}class ad extends Na{constructor(y){super(y),this.current=ii.transparent}set(y,I,ee){this.fetchUniformLocation(y,I)&&(ee.r===this.current.r&&ee.g===this.current.g&&ee.b===this.current.b&&ee.a===this.current.a||(this.current=ee,this.gl.uniform4f(this.location,ee.r,ee.g,ee.b,ee.a)))}}const sd=new Float32Array(16),Kd=new Float32Array(9),Qd=new Float32Array(4);function Ru($){return[Nn(255*$.r,255*$.g),Nn(255*$.b,255*$.a)]}class ds{constructor(y,I,ee){this.value=y,this.uniformNames=I.map(re=>`u_${re}`),this.type=ee}setUniform(y,I,ee,re,ge){I.set(y,ge,re.constantOr(this.value))}getBinding(y,I){return this.type==="color"?new ad(y):new Ou(y)}}class ps{constructor(y,I){this.uniformNames=I.map(ee=>`u_${ee}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(y,I){this.pixelRatioFrom=I.pixelRatio||1,this.pixelRatioTo=y.pixelRatio||1,this.patternFrom=I.tl.concat(I.br),this.patternTo=y.tl.concat(y.br)}setUniform(y,I,ee,re,ge){const ke=ge==="u_pattern_to"||ge==="u_dash_to"?this.patternTo:ge==="u_pattern_from"||ge==="u_dash_from"?this.patternFrom:ge==="u_pixel_ratio_to"?this.pixelRatioTo:ge==="u_pixel_ratio_from"?this.pixelRatioFrom:null;ke&&I.set(y,ge,ke)}getBinding(y,I){return I==="u_pattern_from"||I==="u_pattern_to"||I==="u_dash_from"||I==="u_dash_to"?new od(y):new Ou(y)}}class ja{constructor(y,I,ee,re){this.expression=y,this.type=ee,this.maxValue=0,this.paintVertexAttributes=I.map(ge=>({name:`a_${ge}`,type:"Float32",components:ee==="color"?2:1,offset:0})),this.paintVertexArray=new re}populatePaintArray(y,I,ee,re,ge,ke){const Ie=this.paintVertexArray.length,ze=this.expression.evaluate(new Tt(0),I,{},ge,re,ke);this.paintVertexArray.resize(y),this._setPaintValue(Ie,y,ze)}updatePaintArray(y,I,ee,re,ge){const ke=this.expression.evaluate({zoom:0},ee,re,void 0,ge);this._setPaintValue(y,I,ke)}_setPaintValue(y,I,ee){if(this.type==="color"){const re=Ru(ee);for(let ge=y;ge<I;ge++)this.paintVertexArray.emplace(ge,re[0],re[1])}else{for(let re=y;re<I;re++)this.paintVertexArray.emplace(re,ee);this.maxValue=Math.max(this.maxValue,Math.abs(ee))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class aa{constructor(y,I,ee,re,ge,ke){this.expression=y,this.uniformNames=I.map(Ie=>`u_${Ie}_t`),this.type=ee,this.useIntegerZoom=re,this.zoom=ge,this.maxValue=0,this.paintVertexAttributes=I.map(Ie=>({name:`a_${Ie}`,type:"Float32",components:ee==="color"?4:2,offset:0})),this.paintVertexArray=new ke}populatePaintArray(y,I,ee,re,ge,ke){const Ie=this.expression.evaluate(new Tt(this.zoom),I,{},ge,re,ke),ze=this.expression.evaluate(new Tt(this.zoom+1),I,{},ge,re,ke),Le=this.paintVertexArray.length;this.paintVertexArray.resize(y),this._setPaintValue(Le,y,Ie,ze)}updatePaintArray(y,I,ee,re,ge){const ke=this.expression.evaluate({zoom:this.zoom},ee,re,void 0,ge),Ie=this.expression.evaluate({zoom:this.zoom+1},ee,re,void 0,ge);this._setPaintValue(y,I,ke,Ie)}_setPaintValue(y,I,ee,re){if(this.type==="color"){const ge=Ru(ee),ke=Ru(re);for(let Ie=y;Ie<I;Ie++)this.paintVertexArray.emplace(Ie,ge[0],ge[1],ke[0],ke[1])}else{for(let ge=y;ge<I;ge++)this.paintVertexArray.emplace(ge,ee,re);this.maxValue=Math.max(this.maxValue,Math.abs(ee),Math.abs(re))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(y,I,ee,re,ge){const ke=this.useIntegerZoom?Math.floor(ee.zoom):ee.zoom,Ie=Ye(this.expression.interpolationFactor(ke,this.zoom,this.zoom+1),0,1);I.set(y,ge,Ie)}getBinding(y,I){return new Ou(y)}}class fs{constructor(y,I,ee,re,ge,ke,Ie){this.expression=y,this.type=ee,this.useIntegerZoom=re,this.zoom=ge,this.layerId=Ie,this.paintVertexAttributes=(ee==="array"?nd:td).members;for(let ze=0;ze<I.length;++ze);this.zoomInPaintVertexArray=new ke,this.zoomOutPaintVertexArray=new ke}populatePaintArray(y,I,ee){const re=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(y),this.zoomOutPaintVertexArray.resize(y),this._setPaintValues(re,y,I.patterns&&I.patterns[this.layerId],ee)}updatePaintArray(y,I,ee,re,ge,ke){this._setPaintValues(y,I,ee.patterns&&ee.patterns[this.layerId],ke)}_setPaintValues(y,I,ee,re){if(!re||!ee)return;const{min:ge,mid:ke,max:Ie}=ee,ze=re[ge],Le=re[ke],Ve=re[Ie];if(ze&&Le&&Ve)for(let We=y;We<I;We++)this._setPaintValue(this.zoomInPaintVertexArray,We,Le,ze),this._setPaintValue(this.zoomOutPaintVertexArray,We,Le,Ve)}_setPaintValue(y,I,ee,re){y.emplace(I,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],re.tl[0],re.tl[1],re.br[0],re.br[1],ee.pixelRatio,re.pixelRatio)}upload(y){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=y.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=y.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _s{constructor(y,I,ee=()=>!0){this.binders={},this._buffers=[];const re=[];for(const ge in y.paint._values){if(!ee(ge))continue;const ke=y.paint.get(ge);if(!(ke instanceof Gt&&ts(ke.property.specification)))continue;const Ie=cd(ge,y.type),ze=ke.value,Le=ke.property.specification.type,Ve=ke.property.useIntegerZoom,We=ke.property.specification["property-type"],Ze=We==="cross-faded"||We==="cross-faded-data-driven",tt=String(ge)==="line-dasharray"&&y.layout.get("line-cap").value.kind!=="constant";if(ze.kind!=="constant"||tt)if(ze.kind==="source"||tt||Ze){const ot=ud(ge,Le,"source");this.binders[ge]=Ze?new fs(ze,Ie,Le,Ve,I,ot,y.id):new ja(ze,Ie,Le,ot),re.push(`/a_${ge}`)}else{const ot=ud(ge,Le,"composite");this.binders[ge]=new aa(ze,Ie,Le,Ve,I,ot),re.push(`/z_${ge}`)}else this.binders[ge]=Ze?new ps(ze.value,Ie):new ds(ze.value,Ie,Le),re.push(`/u_${ge}`)}this.cacheKey=re.sort().join("")}getMaxValue(y){const I=this.binders[y];return I instanceof ja||I instanceof aa?I.maxValue:0}populatePaintArrays(y,I,ee,re,ge,ke){for(const Ie in this.binders){const ze=this.binders[Ie];(ze instanceof ja||ze instanceof aa||ze instanceof fs)&&ze.populatePaintArray(y,I,ee,re,ge,ke)}}setConstantPatternPositions(y,I){for(const ee in this.binders){const re=this.binders[ee];re instanceof ps&&re.setConstantPatternPositions(y,I)}}updatePaintArrays(y,I,ee,re,ge,ke){let Ie=!1;for(const ze in y){const Le=I.getPositions(ze);for(const Ve of Le){const We=ee.feature(Ve.index);for(const Ze in this.binders){const tt=this.binders[Ze];if((tt instanceof ja||tt instanceof aa||tt instanceof fs)&&tt.expression.isStateDependent===!0){const ot=re.paint.get(Ze);tt.expression=ot.value,tt.updatePaintArray(Ve.start,Ve.end,We,y[ze],ge,ke),Ie=!0}}}}return Ie}defines(){const y=[];for(const I in this.binders){const ee=this.binders[I];(ee instanceof ds||ee instanceof ps)&&y.push(...ee.uniformNames.map(re=>`#define HAS_UNIFORM_${re}`))}return y}getBinderAttributes(){const y=[];for(const I in this.binders){const ee=this.binders[I];if(ee instanceof ja||ee instanceof aa||ee instanceof fs)for(let re=0;re<ee.paintVertexAttributes.length;re++)y.push(ee.paintVertexAttributes[re].name)}return y}getBinderUniforms(){const y=[];for(const I in this.binders){const ee=this.binders[I];if(ee instanceof ds||ee instanceof ps||ee instanceof aa)for(const re of ee.uniformNames)y.push(re)}return y}getPaintVertexBuffers(){return this._buffers}getUniforms(y){const I=[];for(const ee in this.binders){const re=this.binders[ee];if(re instanceof ds||re instanceof ps||re instanceof aa)for(const ge of re.uniformNames)I.push({name:ge,property:ee,binding:re.getBinding(y,ge)})}return I}setUniforms(y,I,ee,re,ge){for(const{name:ke,property:Ie,binding:ze}of ee)this.binders[Ie].setUniform(y,ze,ge,re.get(Ie),ke)}updatePaintBuffers(y){this._buffers=[];for(const I in this.binders){const ee=this.binders[I];if(y&&ee instanceof fs){const re=y.fromScale===2?ee.zoomInPaintVertexBuffer:ee.zoomOutPaintVertexBuffer;re&&this._buffers.push(re)}else(ee instanceof ja||ee instanceof aa)&&ee.paintVertexBuffer&&this._buffers.push(ee.paintVertexBuffer)}}upload(y){for(const I in this.binders){const ee=this.binders[I];(ee instanceof ja||ee instanceof aa||ee instanceof fs)&&ee.upload(y)}this.updatePaintBuffers()}destroy(){for(const y in this.binders){const I=this.binders[y];(I instanceof ja||I instanceof aa||I instanceof fs)&&I.destroy()}}}class al{constructor(y,I,ee=()=>!0){this.programConfigurations={};for(const re of y)this.programConfigurations[re.id]=new _s(re,I,ee);this.needsUpload=!1,this._featureMap=new Pu,this._bufferOffset=0}populatePaintArrays(y,I,ee,re,ge,ke,Ie){for(const ze in this.programConfigurations)this.programConfigurations[ze].populatePaintArrays(y,I,re,ge,ke,Ie);I.id!==void 0&&this._featureMap.add(I.id,ee,this._bufferOffset,y),this._bufferOffset=y,this.needsUpload=!0}updatePaintArrays(y,I,ee,re,ge){for(const ke of ee)this.needsUpload=this.programConfigurations[ke.id].updatePaintArrays(y,this._featureMap,I,ke,re,ge)||this.needsUpload}get(y){return this.programConfigurations[y]}upload(y){if(this.needsUpload){for(const I in this.programConfigurations)this.programConfigurations[I].upload(y);this.needsUpload=!1}}destroy(){for(const y in this.programConfigurations)this.programConfigurations[y].destroy()}}const ld={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function cd($,y){return ld[$]||[$.replace(`${y}-`,"").replace(/-/g,"_")]}const Wl={"line-pattern":{source:_r,composite:_r},"fill-pattern":{source:_r,composite:_r},"fill-extrusion-pattern":{source:_r,composite:_r},"line-dasharray":{source:Ir,composite:Ir}},Du={color:{source:$a,composite:Vr},number:{source:ui,composite:$a}};function ud($,y,I){const ee=Wl[$];return ee&&ee[I]||Du[y][I]}ur(ds,"ConstantBinder"),ur(ps,"CrossFadedConstantBinder"),ur(ja,"SourceExpressionBinder"),ur(fs,"CrossFadedCompositeBinder"),ur(aa,"CompositeExpressionBinder"),ur(_s,"ProgramConfiguration",{omit:["_buffers"]}),ur(al,"ProgramConfigurationSet");const Zl="-transition";class Vi extends xr{constructor(y,I){if(super(),this.id=y.id,this.type=y.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,y.type!=="custom"&&(this.metadata=(y=y).metadata,this.minzoom=y.minzoom,this.maxzoom=y.maxzoom,y.type!=="background"&&y.type!=="sky"&&(this.source=y.source,this.sourceLayer=y["source-layer"],this.filter=y.filter),I.layout&&(this._unevaluatedLayout=new Kt(I.layout)),I.paint)){this._transitionablePaint=new zt(I.paint);for(const ee in y.paint)this.setPaintProperty(ee,y.paint[ee],{validate:!1});for(const ee in y.layout)this.setLayoutProperty(ee,y.layout[ee],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yt(I.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(y){return y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(y)}setLayoutProperty(y,I,ee={}){I!=null&&this._validate(Eu,`layers.${this.id}.layout.${y}`,y,I,ee)||(y!=="visibility"?this._unevaluatedLayout.setValue(y,I):this.visibility=I)}getPaintProperty(y){return ft(y,Zl)?this._transitionablePaint.getTransition(y.slice(0,-Zl.length)):this._transitionablePaint.getValue(y)}setPaintProperty(y,I,ee={}){if(I!=null&&this._validate(Fl,`layers.${this.id}.paint.${y}`,y,I,ee))return!1;if(ft(y,Zl))return this._transitionablePaint.setTransition(y.slice(0,-Zl.length),I||void 0),!1;{const re=this._transitionablePaint._values[y],ge=re.property.specification["property-type"]==="cross-faded-data-driven",ke=re.value.isDataDriven(),Ie=re.value;this._transitionablePaint.setValue(y,I),this._handleSpecialPaintPropertyUpdate(y);const ze=this._transitionablePaint._values[y].value;return ze.isDataDriven()||ke||ge||this._handleOverridablePaintPropertyUpdate(y,Ie,ze)}}_handleSpecialPaintPropertyUpdate(y){}getProgramIds(){return null}getProgramConfiguration(y){return null}_handleOverridablePaintPropertyUpdate(y,I,ee){return!1}isHidden(y){return!!(this.minzoom&&y<this.minzoom)||!!(this.maxzoom&&y>=this.maxzoom)||this.visibility==="none"}updateTransitions(y){this._transitioningPaint=this._transitionablePaint.transitioned(y,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(y,I){y.getCrossfadeParameters&&(this._crossfadeParameters=y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(y,void 0,I)),this.paint=this._transitioningPaint.possiblyEvaluate(y,void 0,I)}serialize(){const y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(y.layout=y.layout||{},y.layout.visibility=this.visibility),ht(y,(I,ee)=>!(I===void 0||ee==="layout"&&!Object.keys(I).length||ee==="paint"&&!Object.keys(I).length))}_validate(y,I,ee,re,ge={}){return(!ge||ge.validate!==!1)&&Pc(this,y.call(Bl,{key:I,layerType:this.type,objectKey:ee,value:re,styleSpec:gn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const y in this.paint._values){const I=this.paint.get(y);if(I instanceof Gt&&ts(I.property.specification)&&(I.value.kind==="source"||I.value.kind==="composite")&&I.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Ys(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Jd=Ln([{name:"a_pos",components:2,type:"Int16"}],4),ep=Ln([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Bi{constructor(y=[]){this.segments=y}prepareSegment(y,I,ee,re){let ge=this.segments[this.segments.length-1];return y>Bi.MAX_VERTEX_ARRAY_LENGTH&&$t(`Max vertices per segment is ${Bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${y}`),(!ge||ge.vertexLength+y>Bi.MAX_VERTEX_ARRAY_LENGTH||ge.sortKey!==re)&&(ge={vertexOffset:I.length,primitiveOffset:ee.length,vertexLength:0,primitiveLength:0},re!==void 0&&(ge.sortKey=re),this.segments.push(ge)),ge}get(){return this.segments}destroy(){for(const y of this.segments)for(const I in y.vaos)y.vaos[I].destroy()}static simpleSegment(y,I,ee,re){return new Bi([{vertexOffset:y,primitiveOffset:I,vertexLength:ee,primitiveLength:re,vaos:{},sortKey:0}])}}Bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ur(Bi,"SegmentVector");var kr=8192;class Ua{constructor(y,I){y&&(I?this.setSouthWest(y).setNorthEast(I):y.length===4?this.setSouthWest([y[0],y[1]]).setNorthEast([y[2],y[3]]):this.setSouthWest(y[0]).setNorthEast(y[1]))}setNorthEast(y){return this._ne=y instanceof ti?new ti(y.lng,y.lat):ti.convert(y),this}setSouthWest(y){return this._sw=y instanceof ti?new ti(y.lng,y.lat):ti.convert(y),this}extend(y){const I=this._sw,ee=this._ne;let re,ge;if(y instanceof ti)re=y,ge=y;else{if(!(y instanceof Ua))return Array.isArray(y)?y.length===4||y.every(Array.isArray)?this.extend(Ua.convert(y)):this.extend(ti.convert(y)):this;if(re=y._sw,ge=y._ne,!re||!ge)return this}return I||ee?(I.lng=Math.min(re.lng,I.lng),I.lat=Math.min(re.lat,I.lat),ee.lng=Math.max(ge.lng,ee.lng),ee.lat=Math.max(ge.lat,ee.lat)):(this._sw=new ti(re.lng,re.lat),this._ne=new ti(ge.lng,ge.lat)),this}getCenter(){return new ti((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ti(this.getWest(),this.getNorth())}getSouthEast(){return new ti(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(y){const{lng:I,lat:ee}=ti.convert(y);let re=this._sw.lng<=I&&I<=this._ne.lng;return this._sw.lng>this._ne.lng&&(re=this._sw.lng>=I&&I>=this._ne.lng),this._sw.lat<=ee&&ee<=this._ne.lat&&re}static convert(y){return!y||y instanceof Ua?y:new Ua(y)}}const mh=63710088e-1;class ti{constructor(y,I){if(isNaN(y)||isNaN(I))throw new Error(`Invalid LngLat object: (${y}, ${I})`);if(this.lng=+y,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ti(Je(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(y){const I=Math.PI/180,ee=this.lat*I,re=y.lat*I,ge=Math.sin(ee)*Math.sin(re)+Math.cos(ee)*Math.cos(re)*Math.cos((y.lng-this.lng)*I);return mh*Math.acos(Math.min(ge,1))}toBounds(y=0){const I=360*y/40075017,ee=I/Math.cos(Math.PI/180*this.lat);return new Ua(new ti(this.lng-ee,this.lat-I),new ti(this.lng+ee,this.lat+I))}static convert(y){if(y instanceof ti)return y;if(Array.isArray(y)&&(y.length===2||y.length===3))return new ti(Number(y[0]),Number(y[1]));if(!Array.isArray(y)&&typeof y=="object"&&y!==null)return new ti(Number("lng"in y?y.lng:y.lon),Number(y.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Vc=2*Math.PI*mh;function gh($){return Vc*Math.cos($*Math.PI/180)}function xa($){return(180+$)/360}function Va($){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+$*Math.PI/360)))/360}function Lo($,y){return $/gh(y)}function Ho($){return 360*$-180}function Qi($){return 360/Math.PI*Math.atan(Math.exp((180-360*$)*Math.PI/180))-90}function hd($,y){return $*gh(Qi(y))}const ba=85.051129;function dd($){return 1/Math.cos($*Math.PI/180)}class Xl{constructor(y,I,ee=0){this.x=+y,this.y=+I,this.z=+ee}static fromLngLat(y,I=0){const ee=ti.convert(y);return new Xl(xa(ee.lng),Va(ee.lat),Lo(I,ee.lat))}toLngLat(){return new ti(Ho(this.x),Qi(this.y))}toAltitude(){return hd(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Vc*dd(Qi(this.y))}}function zu($,y,I,ee,re,ge,ke,Ie,ze){const Le=(y+ee)/2,Ve=(I+re)/2,We=new xe(Le,Ve);Ie(We),function(Ze,tt,ot,mt,Et,Ft){const Ht=ot-Et,Nt=mt-Ft;return Math.abs((mt-tt)*Ht-(ot-Ze)*Nt)/Math.hypot(Ht,Nt)}(We.x,We.y,ge.x,ge.y,ke.x,ke.y)>=ze?(zu($,y,I,Le,Ve,ge,We,Ie,ze),zu($,Le,Ve,ee,re,We,ke,Ie,ze)):$.push(ke)}function pd($,y,I){let ee=$[0],re=ee.x,ge=ee.y;y(ee);const ke=[ee];for(let Ie=1;Ie<$.length;Ie++){const ze=$[Ie],{x:Le,y:Ve}=ze;y(ze),zu(ke,re,ge,Le,Ve,ee,ze,y,I),re=Le,ge=Ve,ee=ze}return ke}function yh($,y,I,ee,re){if(re(y,I)){const ge=y.add(I).mult(.5);ee(ge),yh($,y,ge,ee,re),yh($,ge,I,ee,re)}else $.push(I)}function fd($,y,I){let ee=$[0];y(ee);const re=[ee];for(let ge=1;ge<$.length;ge++){const ke=$[ge];y(ke),yh(re,ee,ke,y,I),ee=ke}return re}const vh=Math.pow(2,14)-1,at=-vh-1;function St($,y){const I=Math.round($.x*y),ee=Math.round($.y*y);return $.x=Ye(I,at,vh),$.y=Ye(ee,at,vh),(I<$.x||I>$.x+1||ee<$.y||ee>$.y+1)&&$t("Geometry exceeds allowed extent, reduce your vector tile buffer size"),$}function vt($,y,I){const ee=$.loadGeometry(),re=$.extent,ge=kr/re;if(y&&I&&I.projection.isReprojectedInTileSpace){const ke=1<<y.z,{scale:Ie,x:ze,y:Le,projection:Ve}=I,We=Ze=>{const tt=Ho((y.x+Ze.x/re)/ke),ot=Qi((y.y+Ze.y/re)/ke),mt=Ve.project(tt,ot);Ze.x=(mt.x*Ie-ze)*re,Ze.y=(mt.y*Ie-Le)*re};for(let Ze=0;Ze<ee.length;Ze++)if($.type!==1)ee[Ze]=pd(ee[Ze],We,1);else{const tt=[];for(const ot of ee[Ze])ot.x<0||ot.x>=re||ot.y<0||ot.y>=re||(We(ot),tt.push(ot));ee[Ze]=tt}}for(const ke of ee)for(const Ie of ke)St(Ie,ge);return ee}function Ge($,y){return{type:$.type,id:$.id,properties:$.properties,geometry:y?vt($):[]}}function et($,y,I,ee,re){$.emplaceBack(2*y+(ee+1)/2,2*I+(re+1)/2)}function yt($,y,I){$.emplaceBack(y.x,y.y,y.z,I[0]*16384,I[1]*16384,I[2]*16384)}class jt{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.projection=y.projection,this.layoutVertexArray=new tr,this.indexArray=new Dr,this.segments=new Bi,this.programConfigurations=new al(y.layers,y.zoom),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(y,I,ee,re){const ge=this.layers[0],ke=[];let Ie=null;ge.type==="circle"&&(Ie=ge.layout.get("circle-sort-key"));for(const{feature:Le,id:Ve,index:We,sourceLayerIndex:Ze}of y){const tt=this.layers[0]._featureFilter.needGeometry,ot=Ge(Le,tt);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),ot,ee))continue;const mt=Ie?Ie.evaluate(ot,{},ee):void 0,Et={id:Ve,properties:Le.properties,type:Le.type,sourceLayerIndex:Ze,index:We,geometry:tt?ot.geometry:vt(Le,ee,re),patterns:{},sortKey:mt};ke.push(Et)}Ie&&ke.sort((Le,Ve)=>Le.sortKey-Ve.sortKey);let ze=null;re.projection.name==="globe"&&(this.globeExtVertexArray=new ed,ze=re.projection);for(const Le of ke){const{geometry:Ve,index:We,sourceLayerIndex:Ze}=Le,tt=y[We].feature;this.addFeature(Le,Ve,We,I.availableImages,ee,ze),I.featureIndex.insert(tt,Ve,We,Ze,this.index)}}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Jd.members),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,ep.members))),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(y,I,ee,re,ge,ke){for(const Ie of I)for(const ze of Ie){const Le=ze.x,Ve=ze.y;if(Le<0||Le>=kr||Ve<0||Ve>=kr)continue;if(ke){const tt=ke.projectTilePoint(Le,Ve,ge),ot=ke.upVector(ge,Le,Ve),mt=this.globeExtVertexArray;yt(mt,tt,ot),yt(mt,tt,ot),yt(mt,tt,ot),yt(mt,tt,ot)}const We=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,y.sortKey),Ze=We.vertexLength;et(this.layoutVertexArray,Le,Ve,-1,-1),et(this.layoutVertexArray,Le,Ve,1,-1),et(this.layoutVertexArray,Le,Ve,1,1),et(this.layoutVertexArray,Le,Ve,-1,1),this.indexArray.emplaceBack(Ze,Ze+1,Ze+2),this.indexArray.emplaceBack(Ze,Ze+2,Ze+3),We.vertexLength+=4,We.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,{},re,ge)}}function cn($,y){for(let I=0;I<$.length;I++)if(li(y,$[I]))return!0;for(let I=0;I<y.length;I++)if(li($,y[I]))return!0;return!!ir($,y)}function In($,y,I){return!!li($,y)||!!Fi(y,$,I)}function Un($,y){if($.length===1)return Wo(y,$[0]);for(let I=0;I<y.length;I++){const ee=y[I];for(let re=0;re<ee.length;re++)if(li($,ee[re]))return!0}for(let I=0;I<$.length;I++)if(Wo(y,$[I]))return!0;for(let I=0;I<y.length;I++)if(ir($,y[I]))return!0;return!1}function hr($,y,I){if($.length>1){if(ir($,y))return!0;for(let ee=0;ee<y.length;ee++)if(Fi(y[ee],$,I))return!0}for(let ee=0;ee<$.length;ee++)if(Fi($[ee],y,I))return!0;return!1}function ir($,y){if($.length===0||y.length===0)return!1;for(let I=0;I<$.length-1;I++){const ee=$[I],re=$[I+1];for(let ge=0;ge<y.length-1;ge++)if(Ii(ee,re,y[ge],y[ge+1]))return!0}return!1}function Ii($,y,I,ee){return ln($,I,ee)!==ln(y,I,ee)&&ln($,y,I)!==ln($,y,ee)}function Fi($,y,I){const ee=I*I;if(y.length===1)return $.distSqr(y[0])<ee;for(let re=1;re<y.length;re++)if(ko($,y[re-1],y[re])<ee)return!0;return!1}function ko($,y,I){const ee=y.distSqr(I);if(ee===0)return $.distSqr(y);const re=(($.x-y.x)*(I.x-y.x)+($.y-y.y)*(I.y-y.y))/ee;return $.distSqr(re<0?y:re>1?I:I.sub(y)._mult(re)._add(y))}function Wo($,y){let I,ee,re,ge=!1;for(let ke=0;ke<$.length;ke++){I=$[ke];for(let Ie=0,ze=I.length-1;Ie<I.length;ze=Ie++)ee=I[Ie],re=I[ze],ee.y>y.y!=re.y>y.y&&y.x<(re.x-ee.x)*(y.y-ee.y)/(re.y-ee.y)+ee.x&&(ge=!ge)}return ge}function li($,y){let I=!1;for(let ee=0,re=$.length-1;ee<$.length;re=ee++){const ge=$[ee],ke=$[re];ge.y>y.y!=ke.y>y.y&&y.x<(ke.x-ge.x)*(y.y-ge.y)/(ke.y-ge.y)+ge.x&&(I=!I)}return I}function wi($,y,I,ee,re){for(const ke of $)if(y<=ke.x&&I<=ke.y&&ee>=ke.x&&re>=ke.y)return!0;const ge=[new xe(y,I),new xe(y,re),new xe(ee,re),new xe(ee,I)];if($.length>2){for(const ke of ge)if(li($,ke))return!0}for(let ke=0;ke<$.length-1;ke++)if(Ji($[ke],$[ke+1],ge))return!0;return!1}function Ji($,y,I){const ee=I[0],re=I[2];if($.x<ee.x&&y.x<ee.x||$.x>re.x&&y.x>re.x||$.y<ee.y&&y.y<ee.y||$.y>re.y&&y.y>re.y)return!1;const ge=ln($,y,I[0]);return ge!==ln($,y,I[1])||ge!==ln($,y,I[2])||ge!==ln($,y,I[3])}function Gi($,y,I){const ee=y.paint.get($).value;return ee.kind==="constant"?ee.value:I.programConfigurations.get(y.id).getMaxValue($)}function uo($){return Math.sqrt($[0]*$[0]+$[1]*$[1])}function ms($,y,I,ee,re){if(!y[0]&&!y[1])return $;const ge=xe.convert(y)._mult(re);I==="viewport"&&ge._rotate(-ee);const ke=[];for(let Ie=0;Ie<$.length;Ie++)ke.push($[Ie].sub(ge));return ke}function _d($,y,I,ee){const re=xe.convert($)._mult(ee);return y==="viewport"&&re._rotate(-I),re}ur(jt,"CircleBucket",{omit:["layers"]});const md=new Dn({"circle-sort-key":new sn(gn.layout_circle["circle-sort-key"])});var tm={paint:new Dn({"circle-radius":new sn(gn.paint_circle["circle-radius"]),"circle-color":new sn(gn.paint_circle["circle-color"]),"circle-blur":new sn(gn.paint_circle["circle-blur"]),"circle-opacity":new sn(gn.paint_circle["circle-opacity"]),"circle-translate":new Wt(gn.paint_circle["circle-translate"]),"circle-translate-anchor":new Wt(gn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wt(gn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wt(gn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(gn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(gn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(gn.paint_circle["circle-stroke-opacity"])}),layout:md},gd=1e-6,Zo=typeof Float32Array!="undefined"?Float32Array:Array;function Kp(){var $=new Zo(9);return Zo!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}function gs($){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=1,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=1,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$}function tp($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=y[4],Ie=y[5],ze=y[6],Le=y[7],Ve=y[8],We=y[9],Ze=y[10],tt=y[11],ot=y[12],mt=y[13],Et=y[14],Ft=y[15],Ht=I*Ie-ee*ke,Nt=I*ze-re*ke,qt=I*Le-ge*ke,Jt=ee*ze-re*Ie,Zt=ee*Le-ge*Ie,Tn=re*Le-ge*ze,An=Ve*mt-We*ot,On=Ve*Et-Ze*ot,Qn=Ve*Ft-tt*ot,Cn=We*Et-Ze*mt,Bn=We*Ft-tt*mt,Vn=Ze*Ft-tt*Et,Fn=Ht*Vn-Nt*Bn+qt*Cn+Jt*Qn-Zt*On+Tn*An;return Fn?($[0]=(Ie*Vn-ze*Bn+Le*Cn)*(Fn=1/Fn),$[1]=(re*Bn-ee*Vn-ge*Cn)*Fn,$[2]=(mt*Tn-Et*Zt+Ft*Jt)*Fn,$[3]=(Ze*Zt-We*Tn-tt*Jt)*Fn,$[4]=(ze*Qn-ke*Vn-Le*On)*Fn,$[5]=(I*Vn-re*Qn+ge*On)*Fn,$[6]=(Et*qt-ot*Tn-Ft*Nt)*Fn,$[7]=(Ve*Tn-Ze*qt+tt*Nt)*Fn,$[8]=(ke*Bn-Ie*Qn+Le*An)*Fn,$[9]=(ee*Qn-I*Bn-ge*An)*Fn,$[10]=(ot*Zt-mt*qt+Ft*Ht)*Fn,$[11]=(We*qt-Ve*Zt-tt*Ht)*Fn,$[12]=(Ie*On-ke*Cn-ze*An)*Fn,$[13]=(I*Cn-ee*On+re*An)*Fn,$[14]=(mt*Nt-ot*Jt-Et*Ht)*Fn,$[15]=(Ve*Jt-We*Nt+Ze*Ht)*Fn,$):null}function $u($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=y[4],ze=y[5],Le=y[6],Ve=y[7],We=y[8],Ze=y[9],tt=y[10],ot=y[11],mt=y[12],Et=y[13],Ft=y[14],Ht=y[15],Nt=I[0],qt=I[1],Jt=I[2],Zt=I[3];return $[0]=Nt*ee+qt*Ie+Jt*We+Zt*mt,$[1]=Nt*re+qt*ze+Jt*Ze+Zt*Et,$[2]=Nt*ge+qt*Le+Jt*tt+Zt*Ft,$[3]=Nt*ke+qt*Ve+Jt*ot+Zt*Ht,$[4]=(Nt=I[4])*ee+(qt=I[5])*Ie+(Jt=I[6])*We+(Zt=I[7])*mt,$[5]=Nt*re+qt*ze+Jt*Ze+Zt*Et,$[6]=Nt*ge+qt*Le+Jt*tt+Zt*Ft,$[7]=Nt*ke+qt*Ve+Jt*ot+Zt*Ht,$[8]=(Nt=I[8])*ee+(qt=I[9])*Ie+(Jt=I[10])*We+(Zt=I[11])*mt,$[9]=Nt*re+qt*ze+Jt*Ze+Zt*Et,$[10]=Nt*ge+qt*Le+Jt*tt+Zt*Ft,$[11]=Nt*ke+qt*Ve+Jt*ot+Zt*Ht,$[12]=(Nt=I[12])*ee+(qt=I[13])*Ie+(Jt=I[14])*We+(Zt=I[15])*mt,$[13]=Nt*re+qt*ze+Jt*Ze+Zt*Et,$[14]=Nt*ge+qt*Le+Jt*tt+Zt*Ft,$[15]=Nt*ke+qt*Ve+Jt*ot+Zt*Ht,$}function xh($,y,I){var ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt=I[0],Et=I[1],Ft=I[2];return y===$?($[12]=y[0]*mt+y[4]*Et+y[8]*Ft+y[12],$[13]=y[1]*mt+y[5]*Et+y[9]*Ft+y[13],$[14]=y[2]*mt+y[6]*Et+y[10]*Ft+y[14],$[15]=y[3]*mt+y[7]*Et+y[11]*Ft+y[15]):(re=y[1],ge=y[2],ke=y[3],Ie=y[4],ze=y[5],Le=y[6],Ve=y[7],We=y[8],Ze=y[9],tt=y[10],ot=y[11],$[0]=ee=y[0],$[1]=re,$[2]=ge,$[3]=ke,$[4]=Ie,$[5]=ze,$[6]=Le,$[7]=Ve,$[8]=We,$[9]=Ze,$[10]=tt,$[11]=ot,$[12]=ee*mt+Ie*Et+We*Ft+y[12],$[13]=re*mt+ze*Et+Ze*Ft+y[13],$[14]=ge*mt+Le*Et+tt*Ft+y[14],$[15]=ke*mt+Ve*Et+ot*Ft+y[15]),$}function Gc($,y,I){var ee=I[0],re=I[1],ge=I[2];return $[0]=y[0]*ee,$[1]=y[1]*ee,$[2]=y[2]*ee,$[3]=y[3]*ee,$[4]=y[4]*re,$[5]=y[5]*re,$[6]=y[6]*re,$[7]=y[7]*re,$[8]=y[8]*ge,$[9]=y[9]*ge,$[10]=y[10]*ge,$[11]=y[11]*ge,$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15],$}function np($,y,I){var ee=Math.sin(I),re=Math.cos(I),ge=y[4],ke=y[5],Ie=y[6],ze=y[7],Le=y[8],Ve=y[9],We=y[10],Ze=y[11];return y!==$&&($[0]=y[0],$[1]=y[1],$[2]=y[2],$[3]=y[3],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[4]=ge*re+Le*ee,$[5]=ke*re+Ve*ee,$[6]=Ie*re+We*ee,$[7]=ze*re+Ze*ee,$[8]=Le*re-ge*ee,$[9]=Ve*re-ke*ee,$[10]=We*re-Ie*ee,$[11]=Ze*re-ze*ee,$}function yd($,y,I){var ee=Math.sin(I),re=Math.cos(I),ge=y[0],ke=y[1],Ie=y[2],ze=y[3],Le=y[8],Ve=y[9],We=y[10],Ze=y[11];return y!==$&&($[4]=y[4],$[5]=y[5],$[6]=y[6],$[7]=y[7],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[0]=ge*re-Le*ee,$[1]=ke*re-Ve*ee,$[2]=Ie*re-We*ee,$[3]=ze*re-Ze*ee,$[8]=ge*ee+Le*re,$[9]=ke*ee+Ve*re,$[10]=Ie*ee+We*re,$[11]=ze*ee+Ze*re,$}function Qp($,y){return $[0]=y[0],$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=y[1],$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=y[2],$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$}function Jp($,y,I){var ee,re,ge,ke=I[0],Ie=I[1],ze=I[2],Le=Math.hypot(ke,Ie,ze);return Le<gd?null:(ke*=Le=1/Le,Ie*=Le,ze*=Le,ee=Math.sin(y),re=Math.cos(y),$[0]=ke*ke*(ge=1-re)+re,$[1]=Ie*ke*ge+ze*ee,$[2]=ze*ke*ge-Ie*ee,$[3]=0,$[4]=ke*Ie*ge-ze*ee,$[5]=Ie*Ie*ge+re,$[6]=ze*Ie*ge+ke*ee,$[7]=0,$[8]=ke*ze*ge+Ie*ee,$[9]=Ie*ze*ge-ke*ee,$[10]=ze*ze*ge+re,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$)}Math.hypot||(Math.hypot=function(){for(var $=0,y=arguments.length;y--;)$+=arguments[y]*arguments[y];return Math.sqrt($)});var nm=$u;function rp(){var $=new Zo(3);return Zo!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$}function ef($){var y=new Zo(3);return y[0]=$[0],y[1]=$[1],y[2]=$[2],y}function bh($){return Math.hypot($[0],$[1],$[2])}function Lu($,y,I){var ee=new Zo(3);return ee[0]=$,ee[1]=y,ee[2]=I,ee}function Yl($,y,I){return $[0]=y[0]+I[0],$[1]=y[1]+I[1],$[2]=y[2]+I[2],$}function ip($,y,I){return $[0]=y[0]-I[0],$[1]=y[1]-I[1],$[2]=y[2]-I[2],$}function tf($,y,I){return $[0]=y[0]*I[0],$[1]=y[1]*I[1],$[2]=y[2]*I[2],$}function op($,y,I){return $[0]=Math.min(y[0],I[0]),$[1]=Math.min(y[1],I[1]),$[2]=Math.min(y[2],I[2]),$}function ap($,y,I){return $[0]=Math.max(y[0],I[0]),$[1]=Math.max(y[1],I[1]),$[2]=Math.max(y[2],I[2]),$}function Ga($,y,I){return $[0]=y[0]*I,$[1]=y[1]*I,$[2]=y[2]*I,$}function vd($,y,I,ee){return $[0]=y[0]+I[0]*ee,$[1]=y[1]+I[1]*ee,$[2]=y[2]+I[2]*ee,$}function Co($,y){var I=y[0],ee=y[1],re=y[2],ge=I*I+ee*ee+re*re;return ge>0&&(ge=1/Math.sqrt(ge)),$[0]=y[0]*ge,$[1]=y[1]*ge,$[2]=y[2]*ge,$}function Aa($,y){return $[0]*y[0]+$[1]*y[1]+$[2]*y[2]}function sp($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=I[0],Ie=I[1],ze=I[2];return $[0]=re*ze-ge*Ie,$[1]=ge*ke-ee*ze,$[2]=ee*Ie-re*ke,$}function Zi($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=I[3]*ee+I[7]*re+I[11]*ge+I[15];return $[0]=(I[0]*ee+I[4]*re+I[8]*ge+I[12])/(ke=ke||1),$[1]=(I[1]*ee+I[5]*re+I[9]*ge+I[13])/ke,$[2]=(I[2]*ee+I[6]*re+I[10]*ge+I[14])/ke,$}function nf($,y,I){var ee=I[0],re=I[1],ge=I[2],ke=y[0],Ie=y[1],ze=y[2],Le=re*ze-ge*Ie,Ve=ge*ke-ee*ze,We=ee*Ie-re*ke,Ze=re*We-ge*Ve,tt=ge*Le-ee*We,ot=ee*Ve-re*Le,mt=2*I[3];return Ve*=mt,We*=mt,tt*=2,ot*=2,$[0]=ke+(Le*=mt)+(Ze*=2),$[1]=Ie+Ve+tt,$[2]=ze+We+ot,$}var Ah,qa=ip,rm=tf,im=bh;function rf($,y,I){return $[0]=y[0]*I,$[1]=y[1]*I,$[2]=y[2]*I,$[3]=y[3]*I,$}function qc($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=y[3];return $[0]=I[0]*ee+I[4]*re+I[8]*ge+I[12]*ke,$[1]=I[1]*ee+I[5]*re+I[9]*ge+I[13]*ke,$[2]=I[2]*ee+I[6]*re+I[10]*ge+I[14]*ke,$[3]=I[3]*ee+I[7]*re+I[11]*ge+I[15]*ke,$}function of(){var $=new Zo(4);return Zo!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$[3]=1,$}function af($){return $[0]=0,$[1]=0,$[2]=0,$[3]=1,$}function sf($,y,I){I*=.5;var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=Math.sin(I),ze=Math.cos(I);return $[0]=ee*ze+ke*Ie,$[1]=re*ze+ge*Ie,$[2]=ge*ze-re*Ie,$[3]=ke*ze-ee*Ie,$}function lf($,y,I){I*=.5;var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=Math.sin(I),ze=Math.cos(I);return $[0]=ee*ze-ge*Ie,$[1]=re*ze+ke*Ie,$[2]=ge*ze+ee*Ie,$[3]=ke*ze-re*Ie,$}rp(),Ah=new Zo(4),Zo!=Float32Array&&(Ah[0]=0,Ah[1]=0,Ah[2]=0,Ah[3]=0),rp(),Lu(1,0,0),Lu(0,1,0),of(),of(),Kp();class lp{constructor(y,I){this.pos=y,this.dir=I}intersectsPlane(y,I,ee){const re=Aa(I,this.dir);if(Math.abs(re)<1e-6)return!1;const ge=((y[0]-this.pos[0])*I[0]+(y[1]-this.pos[1])*I[1]+(y[2]-this.pos[2])*I[2])/re;return ee[0]=this.pos[0]+this.dir[0]*ge,ee[1]=this.pos[1]+this.dir[1]*ge,ee[2]=this.pos[2]+this.dir[2]*ge,!0}closestPointOnSphere(y,I,ee){if(function(tt,ot){var mt=tt[0],Et=tt[1],Ft=tt[2],Ht=ot[0],Nt=ot[1],qt=ot[2];return Math.abs(mt-Ht)<=gd*Math.max(1,Math.abs(mt),Math.abs(Ht))&&Math.abs(Et-Nt)<=gd*Math.max(1,Math.abs(Et),Math.abs(Nt))&&Math.abs(Ft-qt)<=gd*Math.max(1,Math.abs(Ft),Math.abs(qt))}(this.pos,y)||I===0)return ee[0]=ee[1]=ee[2]=0,!1;const[re,ge,ke]=this.dir,Ie=this.pos[0]-y[0],ze=this.pos[1]-y[1],Le=this.pos[2]-y[2],Ve=re*re+ge*ge+ke*ke,We=2*(Ie*re+ze*ge+Le*ke),Ze=We*We-4*Ve*(Ie*Ie+ze*ze+Le*Le-I*I);if(Ze<0){const tt=Math.max(-We/2,0),ot=Ie+re*tt,mt=ze+ge*tt,Et=Le+ke*tt,Ft=Math.hypot(ot,mt,Et);return ee[0]=ot*I/Ft,ee[1]=mt*I/Ft,ee[2]=Et*I/Ft,!1}{const tt=(-We-Math.sqrt(Ze))/(2*Ve);if(tt<0){const ot=Math.hypot(Ie,ze,Le);return ee[0]=Ie*I/ot,ee[1]=ze*I/ot,ee[2]=Le*I/ot,!1}return ee[0]=Ie+re*tt,ee[1]=ze+ge*tt,ee[2]=Le+ke*tt,!0}}}class cp{constructor(y,I,ee,re,ge){this.TL=y,this.TR=I,this.BR=ee,this.BL=re,this.horizon=ge}static fromInvProjectionMatrix(y,I,ee){const re=[-1,1,1],ge=[1,1,1],ke=[1,-1,1],Ie=[-1,-1,1],ze=Zi(re,re,y),Le=Zi(ge,ge,y),Ve=Zi(ke,ke,y),We=Zi(Ie,Ie,y);return new cp(ze,Le,Ve,We,I/ee)}}class up{constructor(y,I){this.points=y,this.planes=I}static fromInvProjectionMatrix(y,I,ee,re){const ge=Math.pow(2,ee),ke=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(ze=>{const Le=qc([],ze,y),Ve=1/Le[3]/I*ge;return function(We,Ze,tt){return We[0]=Ze[0]*tt[0],We[1]=Ze[1]*tt[1],We[2]=Ze[2]*tt[2],We[3]=Ze[3]*tt[3],We}(Le,Le,[Ve,Ve,re?1/Le[3]:Ve,Ve])}),Ie=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(ze=>{const Le=Co([],sp([],qa([],ke[ze[0]],ke[ze[1]]),qa([],ke[ze[2]],ke[ze[1]]))),Ve=-Aa(Le,ke[ze[1]]);return Le.concat(Ve)});return new up(ke,Ie)}}class Bo{static fromPoints(y){const I=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],ee=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const re of y)I[0]=Math.min(I[0],re[0]),I[1]=Math.min(I[1],re[1]),I[2]=Math.min(I[2],re[2]),ee[0]=Math.max(ee[0],re[0]),ee[1]=Math.max(ee[1],re[1]),ee[2]=Math.max(ee[2],re[2]);return new Bo(I,ee)}constructor(y,I){this.min=y,this.max=I,this.center=Ga([],Yl([],this.min,this.max),.5)}quadrant(y){const I=[y%2==0,y<2],ee=ef(this.min),re=ef(this.max);for(let ge=0;ge<I.length;ge++)ee[ge]=I[ge]?this.min[ge]:this.center[ge],re[ge]=I[ge]?this.center[ge]:this.max[ge];return re[2]=this.max[2],new Bo(ee,re)}distanceX(y){return Math.max(Math.min(this.max[0],y[0]),this.min[0])-y[0]}distanceY(y){return Math.max(Math.min(this.max[1],y[1]),this.min[1])-y[1]}distanceZ(y){return Math.max(Math.min(this.max[2],y[2]),this.min[2])-y[2]}getCorners(){const y=this.min,I=this.max;return[[y[0],y[1],y[2]],[I[0],y[1],y[2]],[I[0],I[1],y[2]],[y[0],I[1],y[2]],[y[0],y[1],I[2]],[I[0],y[1],I[2]],[I[0],I[1],I[2]],[y[0],I[1],I[2]]]}intersects(y){const I=this.getCorners();let ee=!0;for(let re=0;re<y.planes.length;re++){const ge=y.planes[re];let ke=0;for(let Ie=0;Ie<I.length;Ie++)ke+=Aa(ge,I[Ie])+ge[3]>=0;if(ke===0)return 0;ke!==I.length&&(ee=!1)}if(ee)return 2;for(let re=0;re<3;re++){let ge=Number.MAX_VALUE,ke=-Number.MAX_VALUE;for(let Ie=0;Ie<y.points.length;Ie++){const ze=y.points[Ie][re]-this.min[re];ge=Math.min(ge,ze),ke=Math.max(ke,ze)}if(ke<0||ge>this.max[re]-this.min[re])return 0}return 1}}function cf($,y,I,ee,re,ge,ke,Ie,ze){if(ge&&$.queryGeometry.isAboveHorizon)return!1;ge&&(ze*=$.pixelToTileUnitsFactor);const Le=$.tileID.canonical,Ve=I.projection.upVectorScale(Le,I.center.lat,I.worldSize).metersToTile;for(const We of y)for(const Ze of We){const tt=Ze.add(Ie),ot=re&&I.elevation?I.elevation.exaggeration()*re.getElevationAt(tt.x,tt.y,!0):0,mt=I.projection.projectTilePoint(tt.x,tt.y,Le);if(ot>0){const Nt=I.projection.upVector(Le,tt.x,tt.y);mt.x+=Nt[0]*Ve*ot,mt.y+=Nt[1]*Ve*ot,mt.z+=Nt[2]*Ve*ot}const Et=ge?tt:om(mt.x,mt.y,mt.z,ee),Ft=ge?$.tilespaceRays.map(Nt=>sm(Nt,ot)):$.queryGeometry.screenGeometry,Ht=qc([],[mt.x,mt.y,mt.z,1],ee);if(!ke&&ge?ze*=Ht[3]/I.cameraToCenterDistance:ke&&!ge&&(ze*=I.cameraToCenterDistance/Ht[3]),ge){const Nt=Qi((Ze.y/kr+Le.y)/(1<<Le.z));ze/=I.projection.pixelsPerMeter(Nt,1)/Lo(1,Nt)}if(In(Ft,Et,ze))return!0}return!1}function om($,y,I,ee){const re=qc([],[$,y,I,1],ee);return new xe(re[0]/re[3],re[1]/re[3])}const uf=Lu(0,0,0),am=Lu(0,0,1);function sm($,y){const I=rp();return uf[2]=y,$.intersectsPlane(uf,am,I),new xe(I[0],I[1])}class hf extends jt{}function df($,{width:y,height:I},ee,re){if(re){if(re instanceof Uint8ClampedArray)re=new Uint8Array(re.buffer);else if(re.length!==y*I*ee)throw new RangeError("mismatched image size")}else re=new Uint8Array(y*I*ee);return $.width=y,$.height=I,$.data=re,$}function pf($,y,I){const{width:ee,height:re}=y;ee===$.width&&re===$.height||(hp($,y,{x:0,y:0},{x:0,y:0},{width:Math.min($.width,ee),height:Math.min($.height,re)},I),$.width=ee,$.height=re,$.data=y.data)}function hp($,y,I,ee,re,ge){if(re.width===0||re.height===0)return y;if(re.width>$.width||re.height>$.height||I.x>$.width-re.width||I.y>$.height-re.height)throw new RangeError("out of range source coordinates for image copy");if(re.width>y.width||re.height>y.height||ee.x>y.width-re.width||ee.y>y.height-re.height)throw new RangeError("out of range destination coordinates for image copy");const ke=$.data,Ie=y.data;for(let ze=0;ze<re.height;ze++){const Le=((I.y+ze)*$.width+I.x)*ge,Ve=((ee.y+ze)*y.width+ee.x)*ge;for(let We=0;We<re.width*ge;We++)Ie[Ve+We]=ke[Le+We]}return y}ur(hf,"HeatmapBucket",{omit:["layers"]});class sl{constructor(y,I){df(this,y,1,I)}resize(y){pf(this,new sl(y),1)}clone(){return new sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,I,ee,re,ge){hp(y,I,ee,re,ge,1)}}class Xo{constructor(y,I){df(this,y,4,I)}resize(y){pf(this,new Xo(y),4)}replace(y,I){I?this.data.set(y):this.data=y instanceof Uint8ClampedArray?new Uint8Array(y.buffer):y}clone(){return new Xo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,I,ee,re,ge){hp(y,I,ee,re,ge,4)}}ur(sl,"AlphaImage"),ur(Xo,"RGBAImage");var lm={paint:new Dn({"heatmap-radius":new sn(gn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(gn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wt(gn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new pn(gn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wt(gn.paint_heatmap["heatmap-opacity"])})};function dp($){const y={},I=$.resolution||256,ee=$.clips?$.clips.length:1,re=$.image||new Xo({width:I,height:ee}),ge=(ke,Ie,ze)=>{y[$.evaluationKey]=ze;const Le=$.expression.evaluate(y);re.data[ke+Ie+0]=Math.floor(255*Le.r/Le.a),re.data[ke+Ie+1]=Math.floor(255*Le.g/Le.a),re.data[ke+Ie+2]=Math.floor(255*Le.b/Le.a),re.data[ke+Ie+3]=Math.floor(255*Le.a)};if($.clips)for(let ke=0,Ie=0;ke<ee;++ke,Ie+=4*I)for(let ze=0,Le=0;ze<I;ze++,Le+=4){const Ve=ze/(I-1),{start:We,end:Ze}=$.clips[ke];ge(Ie,Le,We*(1-Ve)+Ze*Ve)}else for(let ke=0,Ie=0;ke<I;ke++,Ie+=4)ge(0,Ie,ke/(I-1));return re}var cm={paint:new Dn({"hillshade-illumination-direction":new Wt(gn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wt(gn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wt(gn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wt(gn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wt(gn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wt(gn.paint_hillshade["hillshade-accent-color"])})};const um=Ln([{name:"a_pos",components:2,type:"Int16"}],4),{members:hm}=um;var xd=bd,dm=bd;function bd($,y,I){I=I||2;var ee,re,ge,ke,Ie,ze,Le,Ve=y&&y.length,We=Ve?y[0]*I:$.length,Ze=ff($,0,We,I,!0),tt=[];if(!Ze||Ze.next===Ze.prev)return tt;if(Ve&&(Ze=function(mt,Et,Ft,Ht){var Nt,qt,Jt,Zt=[];for(Nt=0,qt=Et.length;Nt<qt;Nt++)(Jt=ff(mt,Et[Nt]*Ht,Nt<qt-1?Et[Nt+1]*Ht:mt.length,Ht,!1))===Jt.next&&(Jt.steiner=!0),Zt.push(xm(Jt));for(Zt.sort(gm),Nt=0;Nt<Zt.length;Nt++)Ft=ym(Zt[Nt],Ft);return Ft}($,y,Ze,I)),$.length>80*I){ee=ge=$[0],re=ke=$[1];for(var ot=I;ot<We;ot+=I)(Ie=$[ot])<ee&&(ee=Ie),(ze=$[ot+1])<re&&(re=ze),Ie>ge&&(ge=Ie),ze>ke&&(ke=ze);Le=(Le=Math.max(ge-ee,ke-re))!==0?32767/Le:0}return wh(Ze,tt,I,ee,re,Le,0),tt}function ff($,y,I,ee,re){var ge,ke;if(re===_p($,y,I,ee)>0)for(ge=y;ge<I;ge+=ee)ke=gf(ge,$[ge],$[ge+1],ke);else for(ge=I-ee;ge>=y;ge-=ee)ke=gf(ge,$[ge],$[ge+1],ke);return ke&&Ad(ke,ke.next)&&(Th(ke),ke=ke.next),ke}function Hc($,y){if(!$)return $;y||(y=$);var I,ee=$;do if(I=!1,ee.steiner||!Ad(ee,ee.next)&&ji(ee.prev,ee,ee.next)!==0)ee=ee.next;else{if(Th(ee),(ee=y=ee.prev)===ee.next)break;I=!0}while(I||ee!==y);return y}function wh($,y,I,ee,re,ge,ke){if($){!ke&&ge&&function(Ve,We,Ze,tt){var ot=Ve;do ot.z===0&&(ot.z=pp(ot.x,ot.y,We,Ze,tt)),ot.prevZ=ot.prev,ot.nextZ=ot.next,ot=ot.next;while(ot!==Ve);ot.prevZ.nextZ=null,ot.prevZ=null,function(mt){var Et,Ft,Ht,Nt,qt,Jt,Zt,Tn,An=1;do{for(Ft=mt,mt=null,qt=null,Jt=0;Ft;){for(Jt++,Ht=Ft,Zt=0,Et=0;Et<An&&(Zt++,Ht=Ht.nextZ);Et++);for(Tn=An;Zt>0||Tn>0&&Ht;)Zt!==0&&(Tn===0||!Ht||Ft.z<=Ht.z)?(Nt=Ft,Ft=Ft.nextZ,Zt--):(Nt=Ht,Ht=Ht.nextZ,Tn--),qt?qt.nextZ=Nt:mt=Nt,Nt.prevZ=qt,qt=Nt;Ft=Ht}qt.nextZ=null,An*=2}while(Jt>1)}(ot)}($,ee,re,ge);for(var Ie,ze,Le=$;$.prev!==$.next;)if(Ie=$.prev,ze=$.next,ge?fm($,ee,re,ge):pm($))y.push(Ie.i/I|0),y.push($.i/I|0),y.push(ze.i/I|0),Th($),$=ze.next,Le=ze.next;else if(($=ze)===Le){ke?ke===1?wh($=_m(Hc($),y,I),y,I,ee,re,ge,2):ke===2&&mm($,y,I,ee,re,ge):wh(Hc($),y,I,ee,re,ge,1);break}}}function pm($){var y=$.prev,I=$,ee=$.next;if(ji(y,I,ee)>=0)return!1;for(var re=y.x,ge=I.x,ke=ee.x,Ie=y.y,ze=I.y,Le=ee.y,Ve=re<ge?re<ke?re:ke:ge<ke?ge:ke,We=Ie<ze?Ie<Le?Ie:Le:ze<Le?ze:Le,Ze=re>ge?re>ke?re:ke:ge>ke?ge:ke,tt=Ie>ze?Ie>Le?Ie:Le:ze>Le?ze:Le,ot=ee.next;ot!==y;){if(ot.x>=Ve&&ot.x<=Ze&&ot.y>=We&&ot.y<=tt&&Bu(re,Ie,ge,ze,ke,Le,ot.x,ot.y)&&ji(ot.prev,ot,ot.next)>=0)return!1;ot=ot.next}return!0}function fm($,y,I,ee){var re=$.prev,ge=$,ke=$.next;if(ji(re,ge,ke)>=0)return!1;for(var Ie=re.x,ze=ge.x,Le=ke.x,Ve=re.y,We=ge.y,Ze=ke.y,tt=Ie<ze?Ie<Le?Ie:Le:ze<Le?ze:Le,ot=Ve<We?Ve<Ze?Ve:Ze:We<Ze?We:Ze,mt=Ie>ze?Ie>Le?Ie:Le:ze>Le?ze:Le,Et=Ve>We?Ve>Ze?Ve:Ze:We>Ze?We:Ze,Ft=pp(tt,ot,y,I,ee),Ht=pp(mt,Et,y,I,ee),Nt=$.prevZ,qt=$.nextZ;Nt&&Nt.z>=Ft&&qt&&qt.z<=Ht;){if(Nt.x>=tt&&Nt.x<=mt&&Nt.y>=ot&&Nt.y<=Et&&Nt!==re&&Nt!==ke&&Bu(Ie,Ve,ze,We,Le,Ze,Nt.x,Nt.y)&&ji(Nt.prev,Nt,Nt.next)>=0||(Nt=Nt.prevZ,qt.x>=tt&&qt.x<=mt&&qt.y>=ot&&qt.y<=Et&&qt!==re&&qt!==ke&&Bu(Ie,Ve,ze,We,Le,Ze,qt.x,qt.y)&&ji(qt.prev,qt,qt.next)>=0))return!1;qt=qt.nextZ}for(;Nt&&Nt.z>=Ft;){if(Nt.x>=tt&&Nt.x<=mt&&Nt.y>=ot&&Nt.y<=Et&&Nt!==re&&Nt!==ke&&Bu(Ie,Ve,ze,We,Le,Ze,Nt.x,Nt.y)&&ji(Nt.prev,Nt,Nt.next)>=0)return!1;Nt=Nt.prevZ}for(;qt&&qt.z<=Ht;){if(qt.x>=tt&&qt.x<=mt&&qt.y>=ot&&qt.y<=Et&&qt!==re&&qt!==ke&&Bu(Ie,Ve,ze,We,Le,Ze,qt.x,qt.y)&&ji(qt.prev,qt,qt.next)>=0)return!1;qt=qt.nextZ}return!0}function _m($,y,I){var ee=$;do{var re=ee.prev,ge=ee.next.next;!Ad(re,ge)&&_f(re,ee,ee.next,ge)&&Eh(re,ge)&&Eh(ge,re)&&(y.push(re.i/I|0),y.push(ee.i/I|0),y.push(ge.i/I|0),Th(ee),Th(ee.next),ee=$=ge),ee=ee.next}while(ee!==$);return Hc(ee)}function mm($,y,I,ee,re,ge){var ke=$;do{for(var Ie=ke.next.next;Ie!==ke.prev;){if(ke.i!==Ie.i&&bm(ke,Ie)){var ze=mf(ke,Ie);return ke=Hc(ke,ke.next),ze=Hc(ze,ze.next),wh(ke,y,I,ee,re,ge,0),void wh(ze,y,I,ee,re,ge,0)}Ie=Ie.next}ke=ke.next}while(ke!==$)}function gm($,y){return $.x-y.x}function ym($,y){var I=function(re,ge){var ke,Ie=ge,ze=re.x,Le=re.y,Ve=-1/0;do{if(Le<=Ie.y&&Le>=Ie.next.y&&Ie.next.y!==Ie.y){var We=Ie.x+(Le-Ie.y)*(Ie.next.x-Ie.x)/(Ie.next.y-Ie.y);if(We<=ze&&We>Ve&&(Ve=We,ke=Ie.x<Ie.next.x?Ie:Ie.next,We===ze))return ke}Ie=Ie.next}while(Ie!==ge);if(!ke)return null;var Ze,tt=ke,ot=ke.x,mt=ke.y,Et=1/0;Ie=ke;do ze>=Ie.x&&Ie.x>=ot&&ze!==Ie.x&&Bu(Le<mt?ze:Ve,Le,ot,mt,Le<mt?Ve:ze,Le,Ie.x,Ie.y)&&(Ze=Math.abs(Le-Ie.y)/(ze-Ie.x),Eh(Ie,re)&&(Ze<Et||Ze===Et&&(Ie.x>ke.x||Ie.x===ke.x&&vm(ke,Ie)))&&(ke=Ie,Et=Ze)),Ie=Ie.next;while(Ie!==tt);return ke}($,y);if(!I)return y;var ee=mf(I,$);return Hc(ee,ee.next),Hc(I,I.next)}function vm($,y){return ji($.prev,$,y.prev)<0&&ji(y.next,$,$.next)<0}function pp($,y,I,ee,re){return($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=($-I)*re|0)|$<<8))|$<<4))|$<<2))|$<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-ee)*re|0)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function xm($){var y=$,I=$;do(y.x<I.x||y.x===I.x&&y.y<I.y)&&(I=y),y=y.next;while(y!==$);return I}function Bu($,y,I,ee,re,ge,ke,Ie){return(re-ke)*(y-Ie)>=($-ke)*(ge-Ie)&&($-ke)*(ee-Ie)>=(I-ke)*(y-Ie)&&(I-ke)*(ge-Ie)>=(re-ke)*(ee-Ie)}function bm($,y){return $.next.i!==y.i&&$.prev.i!==y.i&&!function(I,ee){var re=I;do{if(re.i!==I.i&&re.next.i!==I.i&&re.i!==ee.i&&re.next.i!==ee.i&&_f(re,re.next,I,ee))return!0;re=re.next}while(re!==I);return!1}($,y)&&(Eh($,y)&&Eh(y,$)&&function(I,ee){var re=I,ge=!1,ke=(I.x+ee.x)/2,Ie=(I.y+ee.y)/2;do re.y>Ie!=re.next.y>Ie&&re.next.y!==re.y&&ke<(re.next.x-re.x)*(Ie-re.y)/(re.next.y-re.y)+re.x&&(ge=!ge),re=re.next;while(re!==I);return ge}($,y)&&(ji($.prev,$,y.prev)||ji($,y.prev,y))||Ad($,y)&&ji($.prev,$,$.next)>0&&ji(y.prev,y,y.next)>0)}function ji($,y,I){return(y.y-$.y)*(I.x-y.x)-(y.x-$.x)*(I.y-y.y)}function Ad($,y){return $.x===y.x&&$.y===y.y}function _f($,y,I,ee){var re=Ed(ji($,y,I)),ge=Ed(ji($,y,ee)),ke=Ed(ji(I,ee,$)),Ie=Ed(ji(I,ee,y));return re!==ge&&ke!==Ie||!(re!==0||!wd($,I,y))||!(ge!==0||!wd($,ee,y))||!(ke!==0||!wd(I,$,ee))||!(Ie!==0||!wd(I,y,ee))}function wd($,y,I){return y.x<=Math.max($.x,I.x)&&y.x>=Math.min($.x,I.x)&&y.y<=Math.max($.y,I.y)&&y.y>=Math.min($.y,I.y)}function Ed($){return $>0?1:$<0?-1:0}function Eh($,y){return ji($.prev,$,$.next)<0?ji($,y,$.next)>=0&&ji($,$.prev,y)>=0:ji($,y,$.prev)<0||ji($,$.next,y)<0}function mf($,y){var I=new fp($.i,$.x,$.y),ee=new fp(y.i,y.x,y.y),re=$.next,ge=y.prev;return $.next=y,y.prev=$,I.next=re,re.prev=I,ee.next=I,I.prev=ee,ge.next=ee,ee.prev=ge,ee}function gf($,y,I,ee){var re=new fp($,y,I);return ee?(re.next=ee.next,re.prev=ee,ee.next.prev=re,ee.next=re):(re.prev=re,re.next=re),re}function Th($){$.next.prev=$.prev,$.prev.next=$.next,$.prevZ&&($.prevZ.nextZ=$.nextZ),$.nextZ&&($.nextZ.prevZ=$.prevZ)}function fp($,y,I){this.i=$,this.x=y,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _p($,y,I,ee){for(var re=0,ge=y,ke=I-ee;ge<I;ge+=ee)re+=($[ke]-$[ge])*($[ge+1]+$[ke+1]),ke=ge;return re}function Am($,y,I,ee,re){yf($,y,I||0,ee||$.length-1,re||wm)}function yf($,y,I,ee,re){for(;ee>I;){if(ee-I>600){var ge=ee-I+1,ke=y-I+1,Ie=Math.log(ge),ze=.5*Math.exp(2*Ie/3),Le=.5*Math.sqrt(Ie*ze*(ge-ze)/ge)*(ke-ge/2<0?-1:1);yf($,y,Math.max(I,Math.floor(y-ke*ze/ge+Le)),Math.min(ee,Math.floor(y+(ge-ke)*ze/ge+Le)),re)}var Ve=$[y],We=I,Ze=ee;for(kh($,I,y),re($[ee],Ve)>0&&kh($,I,ee);We<Ze;){for(kh($,We,Ze),We++,Ze--;re($[We],Ve)<0;)We++;for(;re($[Ze],Ve)>0;)Ze--}re($[I],Ve)===0?kh($,I,Ze):kh($,++Ze,ee),Ze<=y&&(I=Ze+1),y<=Ze&&(ee=Ze-1)}}function kh($,y,I){var ee=$[y];$[y]=$[I],$[I]=ee}function wm($,y){return $<y?-1:$>y?1:0}function mp($,y){const I=$.length;if(I<=1)return[$];const ee=[];let re,ge;for(let ke=0;ke<I;ke++){const Ie=Mn($[ke]);Ie!==0&&($[ke].area=Math.abs(Ie),ge===void 0&&(ge=Ie<0),ge===Ie<0?(re&&ee.push(re),re=[$[ke]]):re.push($[ke]))}if(re&&ee.push(re),y>1)for(let ke=0;ke<ee.length;ke++)ee[ke].length<=y||(Am(ee[ke],y,1,ee[ke].length-1,Em),ee[ke]=ee[ke].slice(0,y));return ee}function Em($,y){return y.area-$.area}function gp($,y,I){const ee=I.patternDependencies;let re=!1;for(const ge of y){const ke=ge.paint.get(`${$}-pattern`);ke.isConstant()||(re=!0);const Ie=ke.constantOr(null);Ie&&(re=!0,ee[Ie.to]=!0,ee[Ie.from]=!0)}return re}function yp($,y,I,ee,re){const ge=re.patternDependencies;for(const ke of y){const Ie=ke.paint.get(`${$}-pattern`).value;if(Ie.kind!=="constant"){let ze=Ie.evaluate({zoom:ee-1},I,{},re.availableImages),Le=Ie.evaluate({zoom:ee},I,{},re.availableImages),Ve=Ie.evaluate({zoom:ee+1},I,{},re.availableImages);ze=ze&&ze.name?ze.name:ze,Le=Le&&Le.name?Le.name:Le,Ve=Ve&&Ve.name?Ve.name:Ve,ge[ze]=!0,ge[Le]=!0,ge[Ve]=!0,I.patterns[ke.id]={min:ze,mid:Le,max:Ve}}}return I}bd.deviation=function($,y,I,ee){var re=y&&y.length,ge=Math.abs(_p($,0,re?y[0]*I:$.length,I));if(re)for(var ke=0,Ie=y.length;ke<Ie;ke++)ge-=Math.abs(_p($,y[ke]*I,ke<Ie-1?y[ke+1]*I:$.length,I));var ze=0;for(ke=0;ke<ee.length;ke+=3){var Le=ee[ke]*I,Ve=ee[ke+1]*I,We=ee[ke+2]*I;ze+=Math.abs(($[Le]-$[We])*($[Ve+1]-$[Le+1])-($[Le]-$[Ve])*($[We+1]-$[Le+1]))}return ge===0&&ze===0?0:Math.abs((ze-ge)/ge)},bd.flatten=function($){for(var y=$[0][0].length,I={vertices:[],holes:[],dimensions:y},ee=0,re=0;re<$.length;re++){for(var ge=0;ge<$[re].length;ge++)for(var ke=0;ke<y;ke++)I.vertices.push($[re][ge][ke]);re>0&&I.holes.push(ee+=$[re-1].length)}return I},xd.default=dm;class Td{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new tr,this.indexArray=new Dr,this.indexArray2=new to,this.programConfigurations=new al(y.layers,y.zoom),this.segments=new Bi,this.segments2=new Bi,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.projection=y.projection}populate(y,I,ee,re){this.hasPattern=gp("fill",this.layers,I);const ge=this.layers[0].layout.get("fill-sort-key"),ke=[];for(const{feature:Ie,id:ze,index:Le,sourceLayerIndex:Ve}of y){const We=this.layers[0]._featureFilter.needGeometry,Ze=Ge(Ie,We);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),Ze,ee))continue;const tt=ge?ge.evaluate(Ze,{},ee,I.availableImages):void 0,ot={id:ze,properties:Ie.properties,type:Ie.type,sourceLayerIndex:Ve,index:Le,geometry:We?Ze.geometry:vt(Ie,ee,re),patterns:{},sortKey:tt};ke.push(ot)}ge&&ke.sort((Ie,ze)=>Ie.sortKey-ze.sortKey);for(const Ie of ke){const{geometry:ze,index:Le,sourceLayerIndex:Ve}=Ie;if(this.hasPattern){const We=yp("fill",this.layers,Ie,this.zoom,I);this.patternFeatures.push(We)}else this.addFeature(Ie,ze,Le,ee,{},I.availableImages);I.featureIndex.insert(y[Le].feature,ze,Le,Ve,this.index)}}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}addFeatures(y,I,ee,re,ge){for(const ke of this.patternFeatures)this.addFeature(ke,ke.geometry,ke.index,I,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,hm),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.indexBuffer2=y.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(y,I,ee,re,ge,ke=[]){for(const Ie of mp(I,500)){let ze=0;for(const ot of Ie)ze+=ot.length;const Le=this.segments.prepareSegment(ze,this.layoutVertexArray,this.indexArray),Ve=Le.vertexLength,We=[],Ze=[];for(const ot of Ie){if(ot.length===0)continue;ot!==Ie[0]&&Ze.push(We.length/2);const mt=this.segments2.prepareSegment(ot.length,this.layoutVertexArray,this.indexArray2),Et=mt.vertexLength;this.layoutVertexArray.emplaceBack(ot[0].x,ot[0].y),this.indexArray2.emplaceBack(Et+ot.length-1,Et),We.push(ot[0].x),We.push(ot[0].y);for(let Ft=1;Ft<ot.length;Ft++)this.layoutVertexArray.emplaceBack(ot[Ft].x,ot[Ft].y),this.indexArray2.emplaceBack(Et+Ft-1,Et+Ft),We.push(ot[Ft].x),We.push(ot[Ft].y);mt.vertexLength+=ot.length,mt.primitiveLength+=ot.length}const tt=xd(We,Ze);for(let ot=0;ot<tt.length;ot+=3)this.indexArray.emplaceBack(Ve+tt[ot],Ve+tt[ot+1],Ve+tt[ot+2]);Le.vertexLength+=ze,Le.primitiveLength+=tt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,ge,ke,re)}}ur(Td,"FillBucket",{omit:["layers","patternFeatures"]});const Tm=new Dn({"fill-sort-key":new sn(gn.layout_fill["fill-sort-key"])});var km={paint:new Dn({"fill-antialias":new Wt(gn.paint_fill["fill-antialias"]),"fill-opacity":new sn(gn.paint_fill["fill-opacity"]),"fill-color":new sn(gn.paint_fill["fill-color"]),"fill-outline-color":new sn(gn.paint_fill["fill-outline-color"]),"fill-translate":new Wt(gn.paint_fill["fill-translate"]),"fill-translate-anchor":new Wt(gn.paint_fill["fill-translate-anchor"]),"fill-pattern":new mn(gn.paint_fill["fill-pattern"])}),layout:Tm};const Cm=Ln([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Sm=Ln([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Im=Ln([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Mm}=Cm;var vf=Fu;function Fu($,y,I,ee,re){this.properties={},this.extent=I,this.type=0,this._pbf=$,this._geometry=-1,this._keys=ee,this._values=re,$.readFields(Pm,this,y)}function Pm($,y,I){$==1?y.id=I.readVarint():$==2?function(ee,re){for(var ge=ee.readVarint()+ee.pos;ee.pos<ge;){var ke=re._keys[ee.readVarint()],Ie=re._values[ee.readVarint()];re.properties[ke]=Ie}}(I,y):$==3?y.type=I.readVarint():$==4&&(y._geometry=I.pos)}function Om($){for(var y,I,ee=0,re=0,ge=$.length,ke=ge-1;re<ge;ke=re++)ee+=((I=$[ke]).x-(y=$[re]).x)*(y.y+I.y);return ee}Fu.types=["Unknown","Point","LineString","Polygon"],Fu.prototype.loadGeometry=function(){var $=this._pbf;$.pos=this._geometry;for(var y,I=$.readVarint()+$.pos,ee=1,re=0,ge=0,ke=0,Ie=[];$.pos<I;){if(re<=0){var ze=$.readVarint();ee=7&ze,re=ze>>3}if(re--,ee===1||ee===2)ge+=$.readSVarint(),ke+=$.readSVarint(),ee===1&&(y&&Ie.push(y),y=[]),y.push(new xe(ge,ke));else{if(ee!==7)throw new Error("unknown command "+ee);y&&y.push(y[0].clone())}}return y&&Ie.push(y),Ie},Fu.prototype.bbox=function(){var $=this._pbf;$.pos=this._geometry;for(var y=$.readVarint()+$.pos,I=1,ee=0,re=0,ge=0,ke=1/0,Ie=-1/0,ze=1/0,Le=-1/0;$.pos<y;){if(ee<=0){var Ve=$.readVarint();I=7&Ve,ee=Ve>>3}if(ee--,I===1||I===2)(re+=$.readSVarint())<ke&&(ke=re),re>Ie&&(Ie=re),(ge+=$.readSVarint())<ze&&(ze=ge),ge>Le&&(Le=ge);else if(I!==7)throw new Error("unknown command "+I)}return[ke,ze,Ie,Le]},Fu.prototype.toGeoJSON=function($,y,I){var ee,re,ge=this.extent*Math.pow(2,I),ke=this.extent*$,Ie=this.extent*y,ze=this.loadGeometry(),Le=Fu.types[this.type];function Ve(tt){for(var ot=0;ot<tt.length;ot++){var mt=tt[ot];tt[ot]=[360*(mt.x+ke)/ge-180,360/Math.PI*Math.atan(Math.exp((180-360*(mt.y+Ie)/ge)*Math.PI/180))-90]}}switch(this.type){case 1:var We=[];for(ee=0;ee<ze.length;ee++)We[ee]=ze[ee][0];Ve(ze=We);break;case 2:for(ee=0;ee<ze.length;ee++)Ve(ze[ee]);break;case 3:for(ze=function(tt){var ot=tt.length;if(ot<=1)return[tt];for(var mt,Et,Ft=[],Ht=0;Ht<ot;Ht++){var Nt=Om(tt[Ht]);Nt!==0&&(Et===void 0&&(Et=Nt<0),Et===Nt<0?(mt&&Ft.push(mt),mt=[tt[Ht]]):mt.push(tt[Ht]))}return mt&&Ft.push(mt),Ft}(ze),ee=0;ee<ze.length;ee++)for(re=0;re<ze[ee].length;re++)Ve(ze[ee][re])}ze.length===1?ze=ze[0]:Le="Multi"+Le;var Ze={type:"Feature",geometry:{type:Le,coordinates:ze},properties:this.properties};return"id"in this&&(Ze.id=this.id),Ze};var xf=bf;function bf($,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=$,this._keys=[],this._values=[],this._features=[],$.readFields(Rm,this,y),this.length=this._features.length}function Rm($,y,I){$===15?y.version=I.readVarint():$===1?y.name=I.readString():$===5?y.extent=I.readVarint():$===2?y._features.push(I.pos):$===3?y._keys.push(I.readString()):$===4&&y._values.push(function(ee){for(var re=null,ge=ee.readVarint()+ee.pos;ee.pos<ge;){var ke=ee.readVarint()>>3;re=ke===1?ee.readString():ke===2?ee.readFloat():ke===3?ee.readDouble():ke===4?ee.readVarint64():ke===5?ee.readVarint():ke===6?ee.readSVarint():ke===7?ee.readBoolean():null}return re}(I))}function Dm($,y,I){if($===3){var ee=new xf(I,I.readVarint()+I.pos);ee.length&&(y[ee.name]=ee)}}bf.prototype.feature=function($){if($<0||$>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[$];var y=this._pbf.readVarint()+this._pbf.pos;return new vf(this._pbf,y,this.extent,this._keys,this._values)};var Wc={VectorTile:function($,y){this.layers=$.readFields(Dm,{},y)},VectorTileFeature:vf,VectorTileLayer:xf};function kd($,y,I,ee){const re=[],ge=ee===0?(ke,Ie,ze,Le,Ve,We)=>{ke.push(new xe(We,ze+(We-Ie)/(Le-Ie)*(Ve-ze)))}:(ke,Ie,ze,Le,Ve,We)=>{ke.push(new xe(Ie+(We-ze)/(Ve-ze)*(Le-Ie),We))};for(const ke of $){const Ie=[];for(const ze of ke){if(ze.length<=2)continue;const Le=[];for(let Ze=0;Ze<ze.length-1;Ze++){const tt=ze[Ze].x,ot=ze[Ze].y,mt=ze[Ze+1].x,Et=ze[Ze+1].y,Ft=ee===0?tt:ot,Ht=ee===0?mt:Et;Ft<y?Ht>y&&ge(Le,tt,ot,mt,Et,y):Ft>I?Ht<I&&ge(Le,tt,ot,mt,Et,I):Le.push(ze[Ze]),Ht<y&&Ft>=y&&ge(Le,tt,ot,mt,Et,y),Ht>I&&Ft<=I&&ge(Le,tt,ot,mt,Et,I)}let Ve=ze[ze.length-1];const We=ee===0?Ve.x:Ve.y;We>=y&&We<=I&&Le.push(Ve),Le.length&&(Ve=Le[Le.length-1],Le[0].x===Ve.x&&Le[0].y===Ve.y||Le.push(Le[0]),Ie.push(Le))}Ie.length&&re.push(Ie)}return re}const zm=Wc.VectorTileFeature.types,$m=Math.pow(2,13);function Ch($,y,I,ee,re,ge,ke,Ie){$.emplaceBack((y<<1)+ke,(I<<1)+ge,(Math.floor(ee*$m)<<1)+re,Math.round(Ie))}function Sh($,y,I){$.emplaceBack(y.x,y.y,y.z,I[0]*16384,I[1]*16384,I[2]*16384)}class Af{constructor(){this.acc=new xe(0,0),this.polyCount=[]}startRing(y){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new xe(y.x,y.y),this.max=new xe(y.x,y.y))}append(y,I){this.currentPolyCount.edges++,this.acc._add(y);const ee=this.min,re=this.max;y.x<ee.x?ee.x=y.x:y.x>re.x&&(re.x=y.x),y.y<ee.y?ee.y=y.y:y.y>re.y&&(re.y=y.y),((y.x===0||y.x===kr)&&y.x===I.x)!=((y.y===0||y.y===kr)&&y.y===I.y)&&this.processBorderOverlap(y,I),I.x<0!=y.x<0&&this.addBorderIntersection(0,Wr(I.y,y.y,(0-I.x)/(y.x-I.x))),I.x>kr!=y.x>kr&&this.addBorderIntersection(1,Wr(I.y,y.y,(kr-I.x)/(y.x-I.x))),I.y<0!=y.y<0&&this.addBorderIntersection(2,Wr(I.x,y.x,(0-I.y)/(y.y-I.y))),I.y>kr!=y.y>kr&&this.addBorderIntersection(3,Wr(I.x,y.x,(kr-I.y)/(y.y-I.y)))}addBorderIntersection(y,I){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const ee=this.borders[y];I<ee[0]&&(ee[0]=I),I>ee[1]&&(ee[1]=I)}processBorderOverlap(y,I){if(y.x===I.x){if(y.y===I.y)return;const ee=y.x===0?0:1;this.addBorderIntersection(ee,I.y),this.addBorderIntersection(ee,y.y)}else{const ee=y.y===0?2:3;this.addBorderIntersection(ee,I.x),this.addBorderIntersection(ee,y.x)}}centroid(){const y=this.polyCount.reduce((I,ee)=>I+ee.edges,0);return y!==0?this.acc.div(y)._round():new xe(0,0)}span(){return new xe(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((y,I)=>y+ +(I[0]!==Number.MAX_VALUE),0)}}class Ih{constructor(y){this.zoom=y.zoom,this.canonical=y.canonical,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=y.projection,this.layoutVertexArray=new yr,this.centroidVertexArray=new To,this.indexArray=new Dr,this.programConfigurations=new al(y.layers,y.zoom),this.segments=new Bi,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.enableTerrain=y.enableTerrain}populate(y,I,ee,re){this.features=[],this.hasPattern=gp("fill-extrusion",this.layers,I),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(ge){const ke=Math.exp(Math.PI*(1-ge.y/(1<<ge.z)*2));return 80150034*ke/(ke*ke+1)/kr/(1<<ge.z)}(ee),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:ge,id:ke,index:Ie,sourceLayerIndex:ze}of y){const Le=this.layers[0]._featureFilter.needGeometry,Ve=Ge(ge,Le);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),Ve,ee))continue;const We={id:ke,sourceLayerIndex:ze,index:Ie,geometry:Le?Ve.geometry:vt(ge,ee,re),properties:ge.properties,type:ge.type,patterns:{}},Ze=this.layoutVertexArray.length;this.hasPattern?this.features.push(yp("fill-extrusion",this.layers,We,this.zoom,I)):this.addFeature(We,We.geometry,Ie,ee,{},I.availableImages,re),I.featureIndex.insert(ge,We.geometry,Ie,ze,this.index,Ze)}this.sortBorders()}addFeatures(y,I,ee,re,ge){for(const ke of this.features){const{geometry:Ie}=ke;this.addFeature(ke,Ie,ke.index,I,ee,re,ge)}this.sortBorders()}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Mm),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=y.createVertexBuffer(this.layoutVertexExtArray,Im.members,!0))),this.programConfigurations.upload(y),this.uploaded=!0}uploadCentroid(y){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=y.createVertexBuffer(this.centroidVertexArray,Sm.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(y,I,ee,re,ge,ke,Ie){const ze=[new xe(0,0),new xe(kr,kr)],Le=Ie.projection,Ve=Le.name==="globe",We=this.enableTerrain&&!Ve?new Af:null,Ze=zm[y.type]==="Polygon";Ve&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new no);const tt=mp(I,500);for(let Ft=tt.length-1;Ft>=0;Ft--){const Ht=tt[Ft];(Ht.length===0||(ot=Ht[0]).every(Nt=>Nt.x<=0)||ot.every(Nt=>Nt.x>=kr)||ot.every(Nt=>Nt.y<=0)||ot.every(Nt=>Nt.y>=kr))&&tt.splice(Ft,1)}var ot;let mt;if(Ve)mt=If(tt,ze,re);else{mt=[];for(const Ft of tt)mt.push({polygon:Ft,bounds:ze})}const Et=Ze?this.edgeRadius:0;for(const{polygon:Ft,bounds:Ht}of mt){let Nt=0,qt=0;for(const Zt of Ft)Ze&&!Zt[0].equals(Zt[Zt.length-1])&&Zt.push(Zt[0]),qt+=Ze?Zt.length-1:Zt.length;const Jt=this.segments.prepareSegment((Ze?5:4)*qt,this.layoutVertexArray,this.indexArray);if(Ze){const Zt=[],Tn=[];Nt=Jt.vertexLength;for(const On of Ft){let Qn,Cn;On.length&&On!==Ft[0]&&Tn.push(Zt.length/2),Qn=On[1].sub(On[0])._perp()._unit();for(let Bn=1;Bn<On.length;Bn++){const Vn=On[Bn],Fn=On[Bn===On.length-1?1:Bn+1];let{x:Xn,y:Gn}=Vn;if(Et){Cn=Fn.sub(Vn)._perp()._unit();const ar=Qn.add(Cn)._unit(),Rr=Et*Math.min(4,1/(Qn.x*ar.x+Qn.y*ar.y));Xn+=Rr*ar.x,Gn+=Rr*ar.y,Qn=Cn}Ch(this.layoutVertexArray,Xn,Gn,0,0,1,1,0),Jt.vertexLength++,Zt.push(Vn.x,Vn.y),Ve&&Sh(this.layoutVertexExtArray,Le.projectTilePoint(Xn,Gn,re),Le.upVector(re,Xn,Gn))}}const An=xd(Zt,Tn);for(let On=0;On<An.length;On+=3)this.indexArray.emplaceBack(Nt+An[On],Nt+An[On+2],Nt+An[On+1]),Jt.primitiveLength++}for(const Zt of Ft){We&&Zt.length&&We.startRing(Zt[0]);let Tn,An,On,Qn=Zt.length>4&&kf(Zt[Zt.length-2],Zt[0],Zt[1]),Cn=Et?Lm(Zt[Zt.length-2],Zt[0],Zt[1],Et):0;An=Zt[1].sub(Zt[0])._perp()._unit();for(let Bn=1,Vn=0;Bn<Zt.length;Bn++){let Fn=Zt[Bn-1],Xn=Zt[Bn];const Gn=Zt[Bn===Zt.length-1?1:Bn+1];if(We&&Ze&&We.currentPolyCount.top++,Tf(Xn,Fn,Ht)){Et&&(An=Gn.sub(Xn)._perp()._unit());continue}We&&We.append(Xn,Fn);const ar=Xn.sub(Fn)._perp(),Rr=ar.x/(Math.abs(ar.x)+Math.abs(ar.y)),zr=ar.y>0?1:0,vr=Fn.dist(Xn);if(Vn+vr>32768&&(Vn=0),Et){On=Gn.sub(Xn)._perp()._unit();let dr=Ef(Fn,Xn,Gn,wf(An,On),Et);isNaN(dr)&&(dr=0);const gi=Xn.sub(Fn)._unit();Fn=Fn.add(gi.mult(Cn))._round(),Xn=Xn.add(gi.mult(-dr))._round(),Cn=dr,An=On}const rr=Jt.vertexLength,qr=Zt.length>4&&kf(Fn,Xn,Gn);let Mr=Cf(Vn,Qn,!0);if(Ch(this.layoutVertexArray,Fn.x,Fn.y,Rr,zr,0,0,Mr),Ch(this.layoutVertexArray,Fn.x,Fn.y,Rr,zr,0,1,Mr),Vn+=vr,Mr=Cf(Vn,qr,!1),Qn=qr,Ch(this.layoutVertexArray,Xn.x,Xn.y,Rr,zr,0,0,Mr),Ch(this.layoutVertexArray,Xn.x,Xn.y,Rr,zr,0,1,Mr),Jt.vertexLength+=4,this.indexArray.emplaceBack(rr+0,rr+1,rr+2),this.indexArray.emplaceBack(rr+1,rr+3,rr+2),Jt.primitiveLength+=2,Et){const dr=Nt+(Bn===1?Zt.length-2:Bn-2),gi=Bn===1?Nt:dr+1;if(this.indexArray.emplaceBack(rr+1,dr,rr+3),this.indexArray.emplaceBack(dr,gi,rr+3),Jt.primitiveLength+=2,Tn===void 0&&(Tn=rr),!Tf(Gn,Zt[Bn],Ht)){const di=Bn===Zt.length-1?Tn:Jt.vertexLength;this.indexArray.emplaceBack(rr+2,rr+3,di),this.indexArray.emplaceBack(rr+3,di+1,di),this.indexArray.emplaceBack(rr+3,gi,di+1),Jt.primitiveLength+=3}}if(Ve){const dr=this.layoutVertexExtArray,gi=Le.projectTilePoint(Fn.x,Fn.y,re),di=Le.projectTilePoint(Xn.x,Xn.y,re),Ci=Le.upVector(re,Fn.x,Fn.y),jr=Le.upVector(re,Xn.x,Xn.y);Sh(dr,gi,Ci),Sh(dr,gi,Ci),Sh(dr,di,jr),Sh(dr,di,jr)}}Ze&&(Nt+=Zt.length-1)}}if(We&&We.polyCount.length>0){if(We.borders){We.vertexArrayOffset=this.centroidVertexArray.length;const Ft=We.borders,Ht=this.featuresOnBorder.push(We)-1;for(let Nt=0;Nt<4;Nt++)Ft[Nt][0]!==Number.MAX_VALUE&&this.borders[Nt].push(Ht)}this.encodeCentroid(We.borders?void 0:We.centroid(),We)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,ge,ke,re)}sortBorders(){for(let y=0;y<4;y++)this.borders[y].sort((I,ee)=>this.featuresOnBorder[I].borders[y][0]-this.featuresOnBorder[ee].borders[y][0])}encodeCentroid(y,I,ee=!0){let re,ge;if(y)if(y.y!==0){const Ie=I.span()._mult(this.tileToMeter);re=(Math.max(y.x,1)<<3)+Math.min(7,Math.round(Ie.x/10)),ge=(Math.max(y.y,1)<<3)+Math.min(7,Math.round(Ie.y/10))}else re=Math.ceil(7*(y.x+450)),ge=0;else re=0,ge=+ee;let ke=ee?this.centroidVertexArray.length:I.vertexArrayOffset;for(const Ie of I.polyCount){ee&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Ie.edges+Ie.top);for(let ze=0;ze<Ie.top;ze++)this.centroidVertexArray.emplace(ke++,re,ge);for(let ze=0;ze<2*Ie.edges;ze++)this.centroidVertexArray.emplace(ke++,0,ge),this.centroidVertexArray.emplace(ke++,re,ge)}}}function wf($,y){const I=$.add(y)._unit();return $.x*I.x+$.y*I.y}function Lm($,y,I,ee){const re=y.sub($)._perp()._unit(),ge=I.sub(y)._perp()._unit();return Ef($,y,I,wf(re,ge),ee)}function Ef($,y,I,ee,re){const ge=Math.sqrt(1-ee*ee);return Math.min($.dist(y)/3,y.dist(I)/3,re*ge/ee)}function Tf($,y,I){return $.x<I[0].x&&y.x<I[0].x||$.x>I[1].x&&y.x>I[1].x||$.y<I[0].y&&y.y<I[0].y||$.y>I[1].y&&y.y>I[1].y}function kf($,y,I){if($.x<0||$.x>=kr||y.x<0||y.x>=kr||I.x<0||I.x>=kr)return!1;const ee=I.sub(y),re=ee.perp(),ge=$.sub(y);return(ee.x*ge.x+ee.y*ge.y)/Math.sqrt((ee.x*ee.x+ee.y*ee.y)*(ge.x*ge.x+ge.y*ge.y))>-.866&&re.x*ge.x+re.y*ge.y<0}function Cf($,y,I){const ee=y?2|$:-3&$;return I?1|ee:-2&ee}function Sf(){const $=Math.PI/32,y=Math.tan($),I=mh;return I*Math.sqrt(1+2*y*y)-I}function If($,y,I){const ee=1<<I.z,re=Ho(I.x/ee),ge=Ho((I.x+1)/ee),ke=Qi(I.y/ee),Ie=Qi((I.y+1)/ee);return function(ze,Le,Ve,We,Ze=0,tt){const ot=[];if(!ze.length||!Ve||!We)return ot;const mt=(Zt,Tn)=>{for(const An of Zt)ot.push({polygon:An,bounds:Tn})},Et=Math.ceil(Math.log2(Ve)),Ft=Math.ceil(Math.log2(We)),Ht=Et-Ft,Nt=[];for(let Zt=0;Zt<Math.abs(Ht);Zt++)Nt.push(Ht>0?0:1);for(let Zt=0;Zt<Math.min(Et,Ft);Zt++)Nt.push(0),Nt.push(1);let qt=ze;if(qt=kd(qt,Le[0].y-Ze,Le[1].y+Ze,1),qt=kd(qt,Le[0].x-Ze,Le[1].x+Ze,0),!qt.length)return ot;const Jt=[];for(Nt.length?Jt.push({polygons:qt,bounds:Le,depth:0}):mt(qt,Le);Jt.length;){const Zt=Jt.pop(),Tn=Zt.depth,An=Nt[Tn],On=Zt.bounds[0],Qn=Zt.bounds[1],Cn=An===0?On.x:On.y,Bn=An===0?Qn.x:Qn.y,Vn=tt?tt(An,Cn,Bn):.5*(Cn+Bn),Fn=kd(Zt.polygons,Cn-Ze,Vn+Ze,An),Xn=kd(Zt.polygons,Vn-Ze,Bn+Ze,An);if(Fn.length){const Gn=[On,new xe(An===0?Vn:Qn.x,An===1?Vn:Qn.y)];Nt.length>Tn+1?Jt.push({polygons:Fn,bounds:Gn,depth:Tn+1}):mt(Fn,Gn)}if(Xn.length){const Gn=[new xe(An===0?Vn:On.x,An===1?Vn:On.y),Qn];Nt.length>Tn+1?Jt.push({polygons:Xn,bounds:Gn,depth:Tn+1}):mt(Xn,Gn)}}return ot}($,y,Math.ceil((ge-re)/11.25),Math.ceil((ke-Ie)/11.25),1,(ze,Le,Ve)=>{if(ze===0)return .5*(Le+Ve);{const We=Qi((I.y+Le/kr)/ee);return(Va(.5*(Qi((I.y+Ve/kr)/ee)+We))*ee-I.y)*kr}})}ur(Ih,"FillExtrusionBucket",{omit:["layers","features"]}),ur(Af,"PartMetadata");const Bm=new Dn({"fill-extrusion-edge-radius":new Wt(gn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Fm={paint:new Dn({"fill-extrusion-opacity":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(gn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mn(gn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(gn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(gn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Wt(gn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Bm};function Mf($,y,I){var ee=2*Math.PI*6378137/256/Math.pow(2,I);return[$*ee-2*Math.PI*6378137/2,y*ee-2*Math.PI*6378137/2]}class Cd{constructor(y,I,ee){this.z=y,this.x=I,this.y=ee,this.key=Mh(0,y,y,I,ee)}equals(y){return this.z===y.z&&this.x===y.x&&this.y===y.y}url(y,I){const ee=function(ge,ke,Ie){var ze=Mf(256*ge,256*(ke=Math.pow(2,Ie)-ke-1),Ie),Le=Mf(256*(ge+1),256*(ke+1),Ie);return ze[0]+","+ze[1]+","+Le[0]+","+Le[1]}(this.x,this.y,this.z),re=function(ge,ke,Ie){let ze,Le="";for(let Ve=ge;Ve>0;Ve--)ze=1<<Ve-1,Le+=(ke&ze?1:0)+(Ie&ze?2:0);return Le}(this.z,this.x,this.y);return y[(this.x+this.y)%y.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",re).replace("{bbox-epsg-3857}",ee)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Pf{constructor(y,I){this.wrap=y,this.canonical=I,this.key=Mh(y,I.z,I.z,I.x,I.y)}}class So{constructor(y,I,ee,re,ge){this.overscaledZ=y,this.wrap=I,this.canonical=new Cd(ee,+re,+ge),this.key=I===0&&y===ee?this.canonical.key:Mh(I,y,ee,re,ge)}equals(y){return this.overscaledZ===y.overscaledZ&&this.wrap===y.wrap&&this.canonical.equals(y.canonical)}scaledTo(y){const I=this.canonical.z-y;return y>this.canonical.z?new So(y,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new So(y,this.wrap,y,this.canonical.x>>I,this.canonical.y>>I)}calculateScaledKey(y,I=!0){if(this.overscaledZ===y&&I)return this.key;if(y>this.canonical.z)return Mh(this.wrap*+I,y,this.canonical.z,this.canonical.x,this.canonical.y);{const ee=this.canonical.z-y;return Mh(this.wrap*+I,y,y,this.canonical.x>>ee,this.canonical.y>>ee)}}isChildOf(y){if(y.wrap!==this.wrap)return!1;const I=this.canonical.z-y.canonical.z;return y.overscaledZ===0||y.overscaledZ<this.overscaledZ&&y.canonical.x===this.canonical.x>>I&&y.canonical.y===this.canonical.y>>I}children(y){if(this.overscaledZ>=y)return[new So(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const I=this.canonical.z+1,ee=2*this.canonical.x,re=2*this.canonical.y;return[new So(I,this.wrap,I,ee,re),new So(I,this.wrap,I,ee+1,re),new So(I,this.wrap,I,ee,re+1),new So(I,this.wrap,I,ee+1,re+1)]}isLessThan(y){return this.wrap<y.wrap||!(this.wrap>y.wrap)&&(this.overscaledZ<y.overscaledZ||!(this.overscaledZ>y.overscaledZ)&&(this.canonical.x<y.canonical.x||!(this.canonical.x>y.canonical.x)&&this.canonical.y<y.canonical.y))}wrapped(){return new So(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(y){return new So(this.overscaledZ,y,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Pf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Mh($,y,I,ee,re){const ge=1<<Math.min(I,22);let ke=ge*(re%ge)+ee%ge;return $&&I<22&&(ke+=ge*ge*(($<0?-2*$-1:2*$)%(1<<2*(22-I)))),16*(32*ke+I)+(y-I)}function Ph($,y){return $.x*y.x+$.y*y.y}function Of($,y){if($.length===1){let I=0;const ee=y[I++];let re;for(;!re||ee.equals(re);)if(re=y[I++],!re)return 1/0;for(;I<y.length;I++){const ge=y[I],ke=$[0],Ie=re.sub(ee),ze=ge.sub(ee),Le=ke.sub(ee),Ve=Ph(Ie,Ie),We=Ph(Ie,ze),Ze=Ph(ze,ze),tt=Ph(Le,Ie),ot=Ph(Le,ze),mt=Ve*Ze-We*We,Et=(Ze*tt-We*ot)/mt,Ft=(Ve*ot-We*tt)/mt,Ht=ee.z*(1-Et-Ft)+re.z*Et+ge.z*Ft;if(isFinite(Ht))return Ht}return 1/0}{let I=1/0;for(const ee of y)I=Math.min(I,ee.z);return I}}function Sd($){const y=new xe($[0],$[1]);return y.z=$[2],y}function Rf($,y,I,ee,re,ge,ke,Ie){const ze=ke*re.getElevationAt($,y,!0,!0),Le=ge[0]!==0,Ve=Le?ge[1]===0?ke*(ge[0]/7-450):ke*function(We,Ze,tt){const ot=Math.floor(Ze[0]/8),mt=Math.floor(Ze[1]/8),Et=10*(Ze[0]-8*ot),Ft=10*(Ze[1]-8*mt),Ht=We.getElevationAt(ot,mt,!0,!0),Nt=We.getMeterToDEM(tt),qt=Math.floor(.5*(Et*Nt-1)),Jt=Math.floor(.5*(Ft*Nt-1)),Zt=We.tileCoordToPixel(ot,mt),Tn=2*qt+1,An=2*Jt+1,On=function(Xn,Gn,ar,Rr,zr){return[Xn.getElevationAtPixel(Gn,ar,!0),Xn.getElevationAtPixel(Gn+zr,ar,!0),Xn.getElevationAtPixel(Gn,ar+zr,!0),Xn.getElevationAtPixel(Gn+Rr,ar+zr,!0)]}(We,Zt.x-qt,Zt.y-Jt,Tn,An),Qn=Math.abs(On[0]-On[1]),Cn=Math.abs(On[2]-On[3]),Bn=Math.abs(On[0]-On[2])+Math.abs(On[1]-On[3]),Vn=Math.min(.25,.5*Nt*(Qn+Cn)/Tn),Fn=Math.min(.25,.5*Nt*Bn/An);return Ht+Math.max(Vn*Et,Fn*Ft)}(re,ge,Ie):ze;return{base:ze+(I===0)?-1:I,top:Le?Math.max(Ve+ee,ze+I+2):ze+ee}}ur(Cd,"CanonicalTileID"),ur(So,"OverscaledTileID",{omit:["projMatrix"]});const Nm=Ln([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:jm}=Nm,Um=Ln([{name:"a_packed",components:4,type:"Float32"}]),{members:Vm}=Um,Gm=Wc.VectorTileFeature.types,qm=Math.cos(Math.PI/180*37.5);class Id{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.projection=y.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(I=>{this.gradients[I.id]={}}),this.layoutVertexArray=new Tr,this.layoutVertexArray2=new Vr,this.indexArray=new Dr,this.programConfigurations=new al(y.layers,y.zoom),this.segments=new Bi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(y,I,ee,re){this.hasPattern=gp("line",this.layers,I);const ge=this.layers[0].layout.get("line-sort-key"),ke=[];for(const{feature:Ve,id:We,index:Ze,sourceLayerIndex:tt}of y){const ot=this.layers[0]._featureFilter.needGeometry,mt=Ge(Ve,ot);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),mt,ee))continue;const Et=ge?ge.evaluate(mt,{},ee):void 0,Ft={id:We,properties:Ve.properties,type:Ve.type,sourceLayerIndex:tt,index:Ze,geometry:ot?mt.geometry:vt(Ve,ee,re),patterns:{},sortKey:Et};ke.push(Ft)}ge&&ke.sort((Ve,We)=>Ve.sortKey-We.sortKey);const{lineAtlas:Ie,featureIndex:ze}=I,Le=this.addConstantDashes(Ie);for(const Ve of ke){const{geometry:We,index:Ze,sourceLayerIndex:tt}=Ve;if(Le&&this.addFeatureDashes(Ve,Ie),this.hasPattern){const ot=yp("line",this.layers,Ve,this.zoom,I);this.patternFeatures.push(ot)}else this.addFeature(Ve,We,Ze,ee,Ie.positions,I.availableImages);ze.insert(y[Ze].feature,We,Ze,tt,this.index)}}addConstantDashes(y){let I=!1;for(const ee of this.layers){const re=ee.paint.get("line-dasharray").value,ge=ee.layout.get("line-cap").value;if(re.kind!=="constant"||ge.kind!=="constant")I=!0;else{const ke=ge.value,Ie=re.value;if(!Ie)continue;y.addDash(Ie.from,ke),y.addDash(Ie.to,ke),Ie.other&&y.addDash(Ie.other,ke)}}return I}addFeatureDashes(y,I){const ee=this.zoom;for(const re of this.layers){const ge=re.paint.get("line-dasharray").value,ke=re.layout.get("line-cap").value;if(ge.kind==="constant"&&ke.kind==="constant")continue;let Ie,ze,Le,Ve,We,Ze;if(ge.kind==="constant"){const Et=ge.value;if(!Et)continue;Ie=Et.other||Et.to,ze=Et.to,Le=Et.from}else Ie=ge.evaluate({zoom:ee-1},y),ze=ge.evaluate({zoom:ee},y),Le=ge.evaluate({zoom:ee+1},y);ke.kind==="constant"?Ve=We=Ze=ke.value:(Ve=ke.evaluate({zoom:ee-1},y),We=ke.evaluate({zoom:ee},y),Ze=ke.evaluate({zoom:ee+1},y)),I.addDash(Ie,Ve),I.addDash(ze,We),I.addDash(Le,Ze);const tt=I.getKey(Ie,Ve),ot=I.getKey(ze,We),mt=I.getKey(Le,Ze);y.patterns[re.id]={min:tt,mid:ot,max:mt}}}update(y,I,ee,re){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,ee,re)}addFeatures(y,I,ee,re,ge){for(const ke of this.patternFeatures)this.addFeature(ke,ke.geometry,ke.index,I,ee,re)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=y.createVertexBuffer(this.layoutVertexArray2,Vm)),this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,jm),this.indexBuffer=y.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(y){if(y.properties&&y.properties.hasOwnProperty("mapbox_clip_start")&&y.properties.hasOwnProperty("mapbox_clip_end"))return{start:+y.properties.mapbox_clip_start,end:+y.properties.mapbox_clip_end}}addFeature(y,I,ee,re,ge,ke){const Ie=this.layers[0].layout,ze=Ie.get("line-join").evaluate(y,{}),Le=Ie.get("line-cap").evaluate(y,{}),Ve=Ie.get("line-miter-limit"),We=Ie.get("line-round-limit");this.lineClips=this.lineFeatureClips(y);for(const Ze of I)this.addLine(Ze,y,ze,Le,Ve,We);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,ge,ke,re)}addLine(y,I,ee,re,ge,ke){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ft=0;Ft<y.length-1;Ft++)this.totalDistance+=y[Ft].dist(y[Ft+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Ie=Gm[I.type]==="Polygon";let ze=y.length;for(;ze>=2&&y[ze-1].equals(y[ze-2]);)ze--;let Le=0;for(;Le<ze-1&&y[Le].equals(y[Le+1]);)Le++;if(ze<(Ie?3:2))return;ee==="bevel"&&(ge=1.05);const Ve=this.overscaling<=16?122880/(512*this.overscaling):0,We=this.segments.prepareSegment(10*ze,this.layoutVertexArray,this.indexArray);let Ze,tt,ot,mt,Et;this.e1=this.e2=-1,Ie&&(Ze=y[ze-2],Et=y[Le].sub(Ze)._unit()._perp());for(let Ft=Le;Ft<ze;Ft++){if(ot=Ft===ze-1?Ie?y[Le+1]:void 0:y[Ft+1],ot&&y[Ft].equals(ot))continue;Et&&(mt=Et),Ze&&(tt=Ze),Ze=y[Ft],Et=ot?ot.sub(Ze)._unit()._perp():mt,mt=mt||Et;let Ht=mt.add(Et);Ht.x===0&&Ht.y===0||Ht._unit();const Nt=mt.x*Et.x+mt.y*Et.y,qt=Ht.x*Et.x+Ht.y*Et.y,Jt=qt!==0?1/qt:1/0,Zt=2*Math.sqrt(2-2*qt),Tn=qt<qm&&tt&&ot,An=mt.x*Et.y-mt.y*Et.x>0;if(Tn&&Ft>Le){const Cn=Ze.dist(tt);if(Cn>2*Ve){const Bn=Ze.sub(Ze.sub(tt)._mult(Ve/Cn)._round());this.updateDistance(tt,Bn),this.addCurrentVertex(Bn,mt,0,0,We),tt=Bn}}const On=tt&&ot;let Qn=On?ee:Ie?"butt":re;if(On&&Qn==="round"&&(Jt<ke?Qn="miter":Jt<=2&&(Qn="fakeround")),Qn==="miter"&&Jt>ge&&(Qn="bevel"),Qn==="bevel"&&(Jt>2&&(Qn="flipbevel"),Jt<ge&&(Qn="miter")),tt&&this.updateDistance(tt,Ze),Qn==="miter")Ht._mult(Jt),this.addCurrentVertex(Ze,Ht,0,0,We);else if(Qn==="flipbevel"){if(Jt>100)Ht=Et.mult(-1);else{const Cn=Jt*mt.add(Et).mag()/mt.sub(Et).mag();Ht._perp()._mult(Cn*(An?-1:1))}this.addCurrentVertex(Ze,Ht,0,0,We),this.addCurrentVertex(Ze,Ht.mult(-1),0,0,We)}else if(Qn==="bevel"||Qn==="fakeround"){const Cn=-Math.sqrt(Jt*Jt-1),Bn=An?Cn:0,Vn=An?0:Cn;if(tt&&this.addCurrentVertex(Ze,mt,Bn,Vn,We),Qn==="fakeround"){const Fn=Math.round(180*Zt/Math.PI/20);for(let Xn=1;Xn<Fn;Xn++){let Gn=Xn/Fn;if(Gn!==.5){const Rr=Gn-.5;Gn+=Gn*Rr*(Gn-1)*((1.0904+Nt*(Nt*(3.55645-1.43519*Nt)-3.2452))*Rr*Rr+(.848013+Nt*(.215638*Nt-1.06021)))}const ar=Et.sub(mt)._mult(Gn)._add(mt)._unit()._mult(An?-1:1);this.addHalfVertex(Ze,ar.x,ar.y,!1,An,0,We)}}ot&&this.addCurrentVertex(Ze,Et,-Bn,-Vn,We)}else if(Qn==="butt")this.addCurrentVertex(Ze,Ht,0,0,We);else if(Qn==="square"){const Cn=tt?1:-1;tt||this.addCurrentVertex(Ze,Ht,Cn,Cn,We),this.addCurrentVertex(Ze,Ht,0,0,We),tt&&this.addCurrentVertex(Ze,Ht,Cn,Cn,We)}else Qn==="round"&&(tt&&(this.addCurrentVertex(Ze,mt,0,0,We),this.addCurrentVertex(Ze,mt,1,1,We,!0)),ot&&(this.addCurrentVertex(Ze,Et,-1,-1,We,!0),this.addCurrentVertex(Ze,Et,0,0,We)));if(Tn&&Ft<ze-1){const Cn=Ze.dist(ot);if(Cn>2*Ve){const Bn=Ze.add(ot.sub(Ze)._mult(Ve/Cn)._round());this.updateDistance(Ze,Bn),this.addCurrentVertex(Bn,Et,0,0,We),Ze=Bn}}}}addCurrentVertex(y,I,ee,re,ge,ke=!1){const Ie=I.y*re-I.x,ze=-I.y-I.x*re;this.addHalfVertex(y,I.x+I.y*ee,I.y-I.x*ee,ke,!1,ee,ge),this.addHalfVertex(y,Ie,ze,ke,!0,-re,ge)}addHalfVertex({x:y,y:I},ee,re,ge,ke,Ie,ze){this.layoutVertexArray.emplaceBack((y<<1)+(ge?1:0),(I<<1)+(ke?1:0),Math.round(63*ee)+128,Math.round(63*re)+128,1+(Ie===0?0:Ie<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const Le=ze.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Le),ze.primitiveLength++),ke?this.e2=Le:this.e1=Le}updateScaledDistance(){if(this.lineClips){const y=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=y*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(y,I){this.distance+=y.dist(I),this.updateScaledDistance()}}ur(Id,"LineBucket",{omit:["layers","patternFeatures"]});const Hm=new Dn({"line-cap":new sn(gn.layout_line["line-cap"]),"line-join":new sn(gn.layout_line["line-join"]),"line-miter-limit":new Wt(gn.layout_line["line-miter-limit"]),"line-round-limit":new Wt(gn.layout_line["line-round-limit"]),"line-sort-key":new sn(gn.layout_line["line-sort-key"])});var Df={paint:new Dn({"line-opacity":new sn(gn.paint_line["line-opacity"]),"line-color":new sn(gn.paint_line["line-color"]),"line-translate":new Wt(gn.paint_line["line-translate"]),"line-translate-anchor":new Wt(gn.paint_line["line-translate-anchor"]),"line-width":new sn(gn.paint_line["line-width"]),"line-gap-width":new sn(gn.paint_line["line-gap-width"]),"line-offset":new sn(gn.paint_line["line-offset"]),"line-blur":new sn(gn.paint_line["line-blur"]),"line-dasharray":new mn(gn.paint_line["line-dasharray"]),"line-pattern":new mn(gn.paint_line["line-pattern"]),"line-gradient":new pn(gn.paint_line["line-gradient"]),"line-trim-offset":new Wt(gn.paint_line["line-trim-offset"])}),layout:Hm};const zf=new class extends sn{possiblyEvaluate($,y){return y=new Tt(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),super.possiblyEvaluate($,y)}evaluate($,y,I,ee){return y=At({},y,{zoom:Math.floor(y.zoom)}),super.evaluate($,y,I,ee)}}(Df.paint.properties["line-width"].specification);function $f($,y){return y>0?y+2*$:$}zf.useIntegerZoom=!0;const Wm=Ln([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Zm=Ln([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Xm=Ln([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ln([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ym=Ln([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Km=Ln([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ln([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lf=Ln([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Qm=Ln([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ln([{name:"triangle",components:3,type:"Uint16"}]),Ln([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ln([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ln([{type:"Float32",name:"offsetX"}]),Ln([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ho=24;const ys=128;function vp($,y){const{expression:I}=y;if(I.kind==="constant")return{kind:"constant",layoutSize:I.evaluate(new Tt($+1))};if(I.kind==="source")return{kind:"source"};{const{zoomStops:ee,interpolationType:re}=I;let ge=0;for(;ge<ee.length&&ee[ge]<=$;)ge++;ge=Math.max(0,ge-1);let ke=ge;for(;ke<ee.length&&ee[ke]<$+1;)ke++;ke=Math.min(ee.length-1,ke);const Ie=ee[ge],ze=ee[ke];return I.kind==="composite"?{kind:"composite",minZoom:Ie,maxZoom:ze,interpolationType:re}:{kind:"camera",minZoom:Ie,maxZoom:ze,minSize:I.evaluate(new Tt(Ie)),maxSize:I.evaluate(new Tt(ze)),interpolationType:re}}}function Md($,{uSize:y,uSizeT:I},{lowerSize:ee,upperSize:re}){return $.kind==="source"?ee/ys:$.kind==="composite"?Wr(ee/ys,re/ys,I):y}function Nu($,y){let I=0,ee=0;if($.kind==="constant")ee=$.layoutSize;else if($.kind!=="source"){const{interpolationType:re,minZoom:ge,maxZoom:ke}=$,Ie=re?Ye(Go.interpolationFactor(re,y,ge,ke),0,1):0;$.kind==="camera"?ee=Wr($.minSize,$.maxSize,Ie):I=Ie}return{uSizeT:I,uSize:ee}}var Jm=Object.freeze({__proto__:null,getSizeData:vp,evaluateSizeForFeature:Md,evaluateSizeForZoom:Nu,SIZE_PACK_FACTOR:ys});function eg($,y,I){return $.sections.forEach(ee=>{ee.text=function(re,ge,ke){const Ie=ge.layout.get("text-transform").evaluate(ke,{});return Ie==="uppercase"?re=re.toLocaleUpperCase():Ie==="lowercase"&&(re=re.toLocaleLowerCase()),kt.applyArabicShaping&&(re=kt.applyArabicShaping(re)),re}(ee.text,y,I)}),$}const Oh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function tg($){return $==="\uFE36"||$==="\uFE48"||$==="\uFE38"||$==="\uFE44"||$==="\uFE42"||$==="\uFE3E"||$==="\uFE3C"||$==="\uFE3A"||$==="\uFE18"||$==="\uFE40"||$==="\uFE10"||$==="\uFE13"||$==="\uFE14"||$==="\uFF40"||$==="\uFFE3"||$==="\uFE11"||$==="\uFE12"}function ng($){return $==="\uFE35"||$==="\uFE47"||$==="\uFE37"||$==="\uFE43"||$==="\uFE41"||$==="\uFE3D"||$==="\uFE3B"||$==="\uFE39"||$==="\uFE17"||$==="\uFE3F"}var Bf=function($,y,I,ee,re){var ge,ke,Ie=8*re-ee-1,ze=(1<<Ie)-1,Le=ze>>1,Ve=-7,We=I?re-1:0,Ze=I?-1:1,tt=$[y+We];for(We+=Ze,ge=tt&(1<<-Ve)-1,tt>>=-Ve,Ve+=Ie;Ve>0;ge=256*ge+$[y+We],We+=Ze,Ve-=8);for(ke=ge&(1<<-Ve)-1,ge>>=-Ve,Ve+=ee;Ve>0;ke=256*ke+$[y+We],We+=Ze,Ve-=8);if(ge===0)ge=1-Le;else{if(ge===ze)return ke?NaN:1/0*(tt?-1:1);ke+=Math.pow(2,ee),ge-=Le}return(tt?-1:1)*ke*Math.pow(2,ge-ee)},Ff=function($,y,I,ee,re,ge){var ke,Ie,ze,Le=8*ge-re-1,Ve=(1<<Le)-1,We=Ve>>1,Ze=re===23?Math.pow(2,-24)-Math.pow(2,-77):0,tt=ee?0:ge-1,ot=ee?1:-1,mt=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(Ie=isNaN(y)?1:0,ke=Ve):(ke=Math.floor(Math.log(y)/Math.LN2),y*(ze=Math.pow(2,-ke))<1&&(ke--,ze*=2),(y+=ke+We>=1?Ze/ze:Ze*Math.pow(2,1-We))*ze>=2&&(ke++,ze/=2),ke+We>=Ve?(Ie=0,ke=Ve):ke+We>=1?(Ie=(y*ze-1)*Math.pow(2,re),ke+=We):(Ie=y*Math.pow(2,We-1)*Math.pow(2,re),ke=0));re>=8;$[I+tt]=255&Ie,tt+=ot,Ie/=256,re-=8);for(ke=ke<<re|Ie,Le+=re;Le>0;$[I+tt]=255&ke,tt+=ot,ke/=256,Le-=8);$[I+tt-ot]|=128*mt},Rh=mi;function mi($){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView($)?$:new Uint8Array($||0),this.pos=0,this.type=0,this.length=this.buf.length}mi.Varint=0,mi.Fixed64=1,mi.Bytes=2,mi.Fixed32=5;var xp=4294967296,Nf=1/xp,jf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function ll($){return $.type===mi.Bytes?$.readVarint()+$.pos:$.pos+1}function ju($,y,I){return I?4294967296*y+($>>>0):4294967296*(y>>>0)+($>>>0)}function Uf($,y,I){var ee=y<=16383?1:y<=2097151?2:y<=268435455?3:Math.floor(Math.log(y)/(7*Math.LN2));I.realloc(ee);for(var re=I.pos-1;re>=$;re--)I.buf[re+ee]=I.buf[re]}function rg($,y){for(var I=0;I<$.length;I++)y.writeVarint($[I])}function ig($,y){for(var I=0;I<$.length;I++)y.writeSVarint($[I])}function og($,y){for(var I=0;I<$.length;I++)y.writeFloat($[I])}function ag($,y){for(var I=0;I<$.length;I++)y.writeDouble($[I])}function sg($,y){for(var I=0;I<$.length;I++)y.writeBoolean($[I])}function lg($,y){for(var I=0;I<$.length;I++)y.writeFixed32($[I])}function cg($,y){for(var I=0;I<$.length;I++)y.writeSFixed32($[I])}function ug($,y){for(var I=0;I<$.length;I++)y.writeFixed64($[I])}function hg($,y){for(var I=0;I<$.length;I++)y.writeSFixed64($[I])}function Pd($,y){return($[y]|$[y+1]<<8|$[y+2]<<16)+16777216*$[y+3]}function Uu($,y,I){$[I]=y,$[I+1]=y>>>8,$[I+2]=y>>>16,$[I+3]=y>>>24}function Vf($,y){return($[y]|$[y+1]<<8|$[y+2]<<16)+($[y+3]<<24)}function dg($,y,I){y.glyphs=[],$===1&&I.readMessage(pg,y)}function pg($,y,I){if($===3){const{id:ee,bitmap:re,width:ge,height:ke,left:Ie,top:ze,advance:Le}=I.readMessage(fg,{});y.glyphs.push({id:ee,bitmap:new sl({width:ge+6,height:ke+6},re),metrics:{width:ge,height:ke,left:Ie,top:ze,advance:Le}})}else $===4?y.ascender=I.readSVarint():$===5&&(y.descender=I.readSVarint())}function fg($,y,I){$===1?y.id=I.readVarint():$===2?y.bitmap=I.readBytes():$===3?y.width=I.readVarint():$===4?y.height=I.readVarint():$===5?y.left=I.readSVarint():$===6?y.top=I.readSVarint():$===7&&(y.advance=I.readVarint())}function bp($){let y=0,I=0;for(const ke of $)y+=ke.w*ke.h,I=Math.max(I,ke.w);$.sort((ke,Ie)=>Ie.h-ke.h);const ee=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(y/.95)),I),h:1/0}];let re=0,ge=0;for(const ke of $)for(let Ie=ee.length-1;Ie>=0;Ie--){const ze=ee[Ie];if(!(ke.w>ze.w||ke.h>ze.h)){if(ke.x=ze.x,ke.y=ze.y,ge=Math.max(ge,ke.y+ke.h),re=Math.max(re,ke.x+ke.w),ke.w===ze.w&&ke.h===ze.h){const Le=ee.pop();Ie<ee.length&&(ee[Ie]=Le)}else ke.h===ze.h?(ze.x+=ke.w,ze.w-=ke.w):ke.w===ze.w?(ze.y+=ke.h,ze.h-=ke.h):(ee.push({x:ze.x+ke.w,y:ze.y,w:ze.w-ke.w,h:ke.h}),ze.y+=ke.h,ze.h-=ke.h);break}}return{w:re,h:ge,fill:y/(re*ge)||0}}mi.prototype={destroy:function(){this.buf=null},readFields:function($,y,I){for(I=I||this.length;this.pos<I;){var ee=this.readVarint(),re=ee>>3,ge=this.pos;this.type=7&ee,$(re,y,this),this.pos===ge&&this.skip(ee)}return y},readMessage:function($,y){return this.readFields($,y,this.readVarint()+this.pos)},readFixed32:function(){var $=Pd(this.buf,this.pos);return this.pos+=4,$},readSFixed32:function(){var $=Vf(this.buf,this.pos);return this.pos+=4,$},readFixed64:function(){var $=Pd(this.buf,this.pos)+Pd(this.buf,this.pos+4)*xp;return this.pos+=8,$},readSFixed64:function(){var $=Pd(this.buf,this.pos)+Vf(this.buf,this.pos+4)*xp;return this.pos+=8,$},readFloat:function(){var $=Bf(this.buf,this.pos,!0,23,4);return this.pos+=4,$},readDouble:function(){var $=Bf(this.buf,this.pos,!0,52,8);return this.pos+=8,$},readVarint:function($){var y,I,ee=this.buf;return y=127&(I=ee[this.pos++]),I<128?y:(y|=(127&(I=ee[this.pos++]))<<7,I<128?y:(y|=(127&(I=ee[this.pos++]))<<14,I<128?y:(y|=(127&(I=ee[this.pos++]))<<21,I<128?y:function(re,ge,ke){var Ie,ze,Le=ke.buf;if(Ie=(112&(ze=Le[ke.pos++]))>>4,ze<128||(Ie|=(127&(ze=Le[ke.pos++]))<<3,ze<128)||(Ie|=(127&(ze=Le[ke.pos++]))<<10,ze<128)||(Ie|=(127&(ze=Le[ke.pos++]))<<17,ze<128)||(Ie|=(127&(ze=Le[ke.pos++]))<<24,ze<128)||(Ie|=(1&(ze=Le[ke.pos++]))<<31,ze<128))return ju(re,Ie,ge);throw new Error("Expected varint not more than 10 bytes")}(y|=(15&(I=ee[this.pos]))<<28,$,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var $=this.readVarint();return $%2==1?($+1)/-2:$/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var $=this.readVarint()+this.pos,y=this.pos;return this.pos=$,$-y>=12&&jf?function(I,ee,re){return jf.decode(I.subarray(ee,re))}(this.buf,y,$):function(I,ee,re){for(var ge="",ke=ee;ke<re;){var Ie,ze,Le,Ve=I[ke],We=null,Ze=Ve>239?4:Ve>223?3:Ve>191?2:1;if(ke+Ze>re)break;Ze===1?Ve<128&&(We=Ve):Ze===2?(192&(Ie=I[ke+1]))==128&&(We=(31&Ve)<<6|63&Ie)<=127&&(We=null):Ze===3?(ze=I[ke+2],(192&(Ie=I[ke+1]))==128&&(192&ze)==128&&((We=(15&Ve)<<12|(63&Ie)<<6|63&ze)<=2047||We>=55296&&We<=57343)&&(We=null)):Ze===4&&(ze=I[ke+2],Le=I[ke+3],(192&(Ie=I[ke+1]))==128&&(192&ze)==128&&(192&Le)==128&&((We=(15&Ve)<<18|(63&Ie)<<12|(63&ze)<<6|63&Le)<=65535||We>=1114112)&&(We=null)),We===null?(We=65533,Ze=1):We>65535&&(We-=65536,ge+=String.fromCharCode(We>>>10&1023|55296),We=56320|1023&We),ge+=String.fromCharCode(We),ke+=Ze}return ge}(this.buf,y,$)},readBytes:function(){var $=this.readVarint()+this.pos,y=this.buf.subarray(this.pos,$);return this.pos=$,y},readPackedVarint:function($,y){if(this.type!==mi.Bytes)return $.push(this.readVarint(y));var I=ll(this);for($=$||[];this.pos<I;)$.push(this.readVarint(y));return $},readPackedSVarint:function($){if(this.type!==mi.Bytes)return $.push(this.readSVarint());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readSVarint());return $},readPackedBoolean:function($){if(this.type!==mi.Bytes)return $.push(this.readBoolean());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readBoolean());return $},readPackedFloat:function($){if(this.type!==mi.Bytes)return $.push(this.readFloat());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readFloat());return $},readPackedDouble:function($){if(this.type!==mi.Bytes)return $.push(this.readDouble());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readDouble());return $},readPackedFixed32:function($){if(this.type!==mi.Bytes)return $.push(this.readFixed32());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readFixed32());return $},readPackedSFixed32:function($){if(this.type!==mi.Bytes)return $.push(this.readSFixed32());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readSFixed32());return $},readPackedFixed64:function($){if(this.type!==mi.Bytes)return $.push(this.readFixed64());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readFixed64());return $},readPackedSFixed64:function($){if(this.type!==mi.Bytes)return $.push(this.readSFixed64());var y=ll(this);for($=$||[];this.pos<y;)$.push(this.readSFixed64());return $},skip:function($){var y=7&$;if(y===mi.Varint)for(;this.buf[this.pos++]>127;);else if(y===mi.Bytes)this.pos=this.readVarint()+this.pos;else if(y===mi.Fixed32)this.pos+=4;else{if(y!==mi.Fixed64)throw new Error("Unimplemented type: "+y);this.pos+=8}},writeTag:function($,y){this.writeVarint($<<3|y)},realloc:function($){for(var y=this.length||16;y<this.pos+$;)y*=2;if(y!==this.length){var I=new Uint8Array(y);I.set(this.buf),this.buf=I,this.length=y}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function($){this.realloc(4),Uu(this.buf,$,this.pos),this.pos+=4},writeSFixed32:function($){this.realloc(4),Uu(this.buf,$,this.pos),this.pos+=4},writeFixed64:function($){this.realloc(8),Uu(this.buf,-1&$,this.pos),Uu(this.buf,Math.floor($*Nf),this.pos+4),this.pos+=8},writeSFixed64:function($){this.realloc(8),Uu(this.buf,-1&$,this.pos),Uu(this.buf,Math.floor($*Nf),this.pos+4),this.pos+=8},writeVarint:function($){($=+$||0)>268435455||$<0?function(y,I){var ee,re;if(y>=0?(ee=y%4294967296|0,re=y/4294967296|0):(re=~(-y/4294967296),4294967295^(ee=~(-y%4294967296))?ee=ee+1|0:(ee=0,re=re+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");I.realloc(10),function(ge,ke,Ie){Ie.buf[Ie.pos++]=127&ge|128,ge>>>=7,Ie.buf[Ie.pos++]=127&ge|128,ge>>>=7,Ie.buf[Ie.pos++]=127&ge|128,ge>>>=7,Ie.buf[Ie.pos++]=127&ge|128,Ie.buf[Ie.pos]=127&(ge>>>=7)}(ee,0,I),function(ge,ke){var Ie=(7&ge)<<4;ke.buf[ke.pos++]|=Ie|((ge>>>=3)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge|((ge>>>=7)?128:0),ge&&(ke.buf[ke.pos++]=127&ge)))))}(re,I)}($,this):(this.realloc(4),this.buf[this.pos++]=127&$|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=$>>>7&127))))},writeSVarint:function($){this.writeVarint($<0?2*-$-1:2*$)},writeBoolean:function($){this.writeVarint(Boolean($))},writeString:function($){$=String($),this.realloc(4*$.length),this.pos++;var y=this.pos;this.pos=function(ee,re,ge){for(var ke,Ie,ze=0;ze<re.length;ze++){if((ke=re.charCodeAt(ze))>55295&&ke<57344){if(!Ie){ke>56319||ze+1===re.length?(ee[ge++]=239,ee[ge++]=191,ee[ge++]=189):Ie=ke;continue}if(ke<56320){ee[ge++]=239,ee[ge++]=191,ee[ge++]=189,Ie=ke;continue}ke=Ie-55296<<10|ke-56320|65536,Ie=null}else Ie&&(ee[ge++]=239,ee[ge++]=191,ee[ge++]=189,Ie=null);ke<128?ee[ge++]=ke:(ke<2048?ee[ge++]=ke>>6|192:(ke<65536?ee[ge++]=ke>>12|224:(ee[ge++]=ke>>18|240,ee[ge++]=ke>>12&63|128),ee[ge++]=ke>>6&63|128),ee[ge++]=63&ke|128)}return ge}(this.buf,$,this.pos);var I=this.pos-y;I>=128&&Uf(y,I,this),this.pos=y-1,this.writeVarint(I),this.pos+=I},writeFloat:function($){this.realloc(4),Ff(this.buf,$,this.pos,!0,23,4),this.pos+=4},writeDouble:function($){this.realloc(8),Ff(this.buf,$,this.pos,!0,52,8),this.pos+=8},writeBytes:function($){var y=$.length;this.writeVarint(y),this.realloc(y);for(var I=0;I<y;I++)this.buf[this.pos++]=$[I]},writeRawMessage:function($,y){this.pos++;var I=this.pos;$(y,this);var ee=this.pos-I;ee>=128&&Uf(I,ee,this),this.pos=I-1,this.writeVarint(ee),this.pos+=ee},writeMessage:function($,y,I){this.writeTag($,mi.Bytes),this.writeRawMessage(y,I)},writePackedVarint:function($,y){y.length&&this.writeMessage($,rg,y)},writePackedSVarint:function($,y){y.length&&this.writeMessage($,ig,y)},writePackedBoolean:function($,y){y.length&&this.writeMessage($,sg,y)},writePackedFloat:function($,y){y.length&&this.writeMessage($,og,y)},writePackedDouble:function($,y){y.length&&this.writeMessage($,ag,y)},writePackedFixed32:function($,y){y.length&&this.writeMessage($,lg,y)},writePackedSFixed32:function($,y){y.length&&this.writeMessage($,cg,y)},writePackedFixed64:function($,y){y.length&&this.writeMessage($,ug,y)},writePackedSFixed64:function($,y){y.length&&this.writeMessage($,hg,y)},writeBytesField:function($,y){this.writeTag($,mi.Bytes),this.writeBytes(y)},writeFixed32Field:function($,y){this.writeTag($,mi.Fixed32),this.writeFixed32(y)},writeSFixed32Field:function($,y){this.writeTag($,mi.Fixed32),this.writeSFixed32(y)},writeFixed64Field:function($,y){this.writeTag($,mi.Fixed64),this.writeFixed64(y)},writeSFixed64Field:function($,y){this.writeTag($,mi.Fixed64),this.writeSFixed64(y)},writeVarintField:function($,y){this.writeTag($,mi.Varint),this.writeVarint(y)},writeSVarintField:function($,y){this.writeTag($,mi.Varint),this.writeSVarint(y)},writeStringField:function($,y){this.writeTag($,mi.Bytes),this.writeString(y)},writeFloatField:function($,y){this.writeTag($,mi.Fixed32),this.writeFloat(y)},writeDoubleField:function($,y){this.writeTag($,mi.Fixed64),this.writeDouble(y)},writeBooleanField:function($,y){this.writeVarintField($,Boolean(y))}};class Ap{constructor(y,{pixelRatio:I,version:ee,stretchX:re,stretchY:ge,content:ke}){this.paddedRect=y,this.pixelRatio=I,this.stretchX=re,this.stretchY=ge,this.content=ke,this.version=ee}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Gf{constructor(y,I){const ee={},re={};this.haveRenderCallbacks=[];const ge=[];this.addImages(y,ee,ge),this.addImages(I,re,ge);const{w:ke,h:Ie}=bp(ge),ze=new Xo({width:ke||1,height:Ie||1});for(const Le in y){const Ve=y[Le],We=ee[Le].paddedRect;Xo.copy(Ve.data,ze,{x:0,y:0},{x:We.x+1,y:We.y+1},Ve.data)}for(const Le in I){const Ve=I[Le],We=re[Le].paddedRect,Ze=We.x+1,tt=We.y+1,ot=Ve.data.width,mt=Ve.data.height;Xo.copy(Ve.data,ze,{x:0,y:0},{x:Ze,y:tt},Ve.data),Xo.copy(Ve.data,ze,{x:0,y:mt-1},{x:Ze,y:tt-1},{width:ot,height:1}),Xo.copy(Ve.data,ze,{x:0,y:0},{x:Ze,y:tt+mt},{width:ot,height:1}),Xo.copy(Ve.data,ze,{x:ot-1,y:0},{x:Ze-1,y:tt},{width:1,height:mt}),Xo.copy(Ve.data,ze,{x:0,y:0},{x:Ze+ot,y:tt},{width:1,height:mt})}this.image=ze,this.iconPositions=ee,this.patternPositions=re}addImages(y,I,ee){for(const re in y){const ge=y[re],ke={x:0,y:0,w:ge.data.width+2,h:ge.data.height+2};ee.push(ke),I[re]=new Ap(ke,ge),ge.hasRenderCallback&&this.haveRenderCallbacks.push(re)}}patchUpdatedImages(y,I){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(ee=>y.hasImage(ee)),y.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ee in y.updatedImages)this.patchUpdatedImage(this.iconPositions[ee],y.getImage(ee),I),this.patchUpdatedImage(this.patternPositions[ee],y.getImage(ee),I)}patchUpdatedImage(y,I,ee){if(!y||!I||y.version===I.version)return;y.version=I.version;const[re,ge]=y.tl;ee.update(I.data,void 0,{x:re,y:ge})}}ur(Ap,"ImagePosition"),ur(Gf,"ImageAtlas");const sa={horizontal:1,vertical:2,horizontalOnly:3};class Dh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(y,I){const ee=new Dh;return ee.scale=y||1,ee.fontStack=I,ee}static forImage(y){const I=new Dh;return I.imageName=y,I}}class Vu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(y,I){const ee=new Vu;for(let re=0;re<y.sections.length;re++){const ge=y.sections[re];ge.image?ee.addImageSection(ge):ee.addTextSection(ge,I)}return ee}length(){return this.text.length}getSection(y){return this.sections[this.sectionIndex[y]]}getSections(){return this.sections}getSectionIndex(y){return this.sectionIndex[y]}getCharCode(y){return this.text.charCodeAt(y)}verticalizePunctuation(y){this.text=function(I,ee){let re="";for(let ge=0;ge<I.length;ge++){const ke=I.charCodeAt(ge+1)||null,Ie=I.charCodeAt(ge-1)||null;re+=!ee&&(ke&&hs(ke)&&!Oh[I[ge+1]]||Ie&&hs(Ie)&&!Oh[I[ge-1]])||!Oh[I[ge]]?I[ge]:Oh[I[ge]]}return re}(this.text,y)}trim(){let y=0;for(let ee=0;ee<this.text.length&&Od[this.text.charCodeAt(ee)];ee++)y++;let I=this.text.length;for(let ee=this.text.length-1;ee>=0&&ee>=y&&Od[this.text.charCodeAt(ee)];ee--)I--;this.text=this.text.substring(y,I),this.sectionIndex=this.sectionIndex.slice(y,I)}substring(y,I){const ee=new Vu;return ee.text=this.text.substring(y,I),ee.sectionIndex=this.sectionIndex.slice(y,I),ee.sections=this.sections,ee}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((y,I)=>Math.max(y,this.sections[I].scale),0)}addTextSection(y,I){this.text+=y.text,this.sections.push(Dh.forText(y.scale,y.fontStack||I));const ee=this.sections.length-1;for(let re=0;re<y.text.length;++re)this.sectionIndex.push(ee)}addImageSection(y){const I=y.image?y.image.name:"";if(I.length===0)return void $t("Can't add FormattedSection with an empty image.");const ee=this.getNextImageSectionCharCode();ee?(this.text+=String.fromCharCode(ee),this.sections.push(Dh.forImage(I)),this.sectionIndex.push(this.sections.length-1)):$t("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wp($,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt){const Et=Vu.fromFeature($,re);let Ft;We===sa.vertical&&Et.verticalizePunctuation(Ze);const{processBidirectionalText:Ht,processStyledBidirectionalText:Nt}=kt;if(Ht&&Et.sections.length===1){Ft=[];const Zt=Ht(Et.toString(),Ep(Et,Le,ge,y,ee,tt,ot));for(const Tn of Zt){const An=new Vu;An.text=Tn,An.sections=Et.sections;for(let On=0;On<Tn.length;On++)An.sectionIndex.push(0);Ft.push(An)}}else if(Nt){Ft=[];const Zt=Nt(Et.text,Et.sectionIndex,Ep(Et,Le,ge,y,ee,tt,ot));for(const Tn of Zt){const An=new Vu;An.text=Tn[0],An.sectionIndex=Tn[1],An.sections=Et.sections,Ft.push(An)}}else Ft=function(Zt,Tn){const An=[],On=Zt.text;let Qn=0;for(const Cn of Tn)An.push(Zt.substring(Qn,Cn)),Qn=Cn;return Qn<On.length&&An.push(Zt.substring(Qn,On.length)),An}(Et,Ep(Et,Le,ge,y,ee,tt,ot));const qt=[],Jt={positionedLines:qt,text:Et.toString(),top:Ve[1],bottom:Ve[1],left:Ve[0],right:Ve[0],writingMode:We,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Zt,Tn,An,On,Qn,Cn,Bn,Vn,Fn,Xn,Gn,ar){let Rr=0,zr=0,vr=0;const rr=Vn==="right"?1:Vn==="left"?0:.5;let qr=!1;for(const jr of Qn){const Qr=jr.getSections();for(const yi of Qr){if(yi.imageName)continue;const pi=Tn[yi.fontStack];if(pi&&(qr=pi.ascender!==void 0&&pi.descender!==void 0,!qr))break}if(!qr)break}let Mr=0;for(const jr of Qn){jr.trim();const Qr=jr.getMaxScale(),yi=(Qr-1)*ho,pi={positionedGlyphs:[],lineOffset:0};Zt.positionedLines[Mr]=pi;const hi=pi.positionedGlyphs;let Ei=0;if(!jr.length()){zr+=Cn,++Mr;continue}let Mi=0,ro=0;for(let Xr=0;Xr<jr.length();Xr++){const $i=jr.getSection(Xr),yo=jr.getSectionIndex(Xr),ri=jr.getCharCode(Xr);let Pi=$i.scale,Io=null,Si=null,Ni=null,io=ho,eo=0;const po=!(Fn===sa.horizontal||!Gn&&!il(ri)||Gn&&(Od[ri]||(dr=ri,ku(dr)||Cu(dr)||Su(dr)||$o(dr)||Fc(dr))));if($i.imageName){const Mo=On[$i.imageName];if(!Mo)continue;Ni=$i.imageName,Zt.iconsInText=Zt.iconsInText||!0,Si=Mo.paddedRect;const oo=Mo.displaySize;Pi=Pi*ho/ar,Io={width:oo[0],height:oo[1],left:1,top:-3,advance:po?oo[1]:oo[0],localGlyph:!1},eo=qr?-Io.height*Pi:Qr*ho-17-oo[1]*Pi,io=Io.advance;const hl=(po?oo[0]:oo[1])*Pi-ho*Qr;hl>0&&hl>Ei&&(Ei=hl)}else{const Mo=An[$i.fontStack];if(!Mo)continue;Mo[ri]&&(Si=Mo[ri]);const oo=Tn[$i.fontStack];if(!oo)continue;const hl=oo.glyphs[ri];if(!hl)continue;if(Io=hl.metrics,io=ri!==8203?ho:0,qr){const Yu=oo.ascender!==void 0?Math.abs(oo.ascender):0,Hh=oo.descender!==void 0?Math.abs(oo.descender):0,Wh=(Yu+Hh)*Pi;Mi<Wh&&(Mi=Wh,ro=(Yu-Hh)/2*Pi),eo=-Yu*Pi}else eo=(Qr-Pi)*ho-17}po?(Zt.verticalizable=!0,hi.push({glyph:ri,imageName:Ni,x:Rr,y:zr+eo,vertical:po,scale:Pi,localGlyph:Io.localGlyph,fontStack:$i.fontStack,sectionIndex:yo,metrics:Io,rect:Si}),Rr+=io*Pi+Xn):(hi.push({glyph:ri,imageName:Ni,x:Rr,y:zr+eo,vertical:po,scale:Pi,localGlyph:Io.localGlyph,fontStack:$i.fontStack,sectionIndex:yo,metrics:Io,rect:Si}),Rr+=Io.advance*Pi+Xn)}hi.length!==0&&(vr=Math.max(Rr-Xn,vr),qr?Xf(hi,rr,Ei,ro,Cn*Qr/2):Xf(hi,rr,Ei,0,Cn/2)),Rr=0;const Fo=Cn*Qr+Ei;pi.lineOffset=Math.max(Ei,yi),zr+=Fo,++Mr}var dr;const gi=zr,{horizontalAlign:di,verticalAlign:Ci}=Tp(Bn);(function(jr,Qr,yi,pi,hi,Ei){const Mi=(Qr-yi)*hi,ro=-Ei*pi;for(const Fo of jr)for(const Xr of Fo.positionedGlyphs)Xr.x+=Mi,Xr.y+=ro})(Zt.positionedLines,rr,di,Ci,vr,gi),Zt.top+=-Ci*gi,Zt.bottom=Zt.top+gi,Zt.left+=-di*vr,Zt.right=Zt.left+vr,Zt.hasBaseline=qr}(Jt,y,I,ee,Ft,ke,Ie,ze,We,Le,Ze,mt),!function(Zt){for(const Tn of Zt)if(Tn.positionedGlyphs.length!==0)return!1;return!0}(qt)&&Jt}const Od={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},_g={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function qf($,y,I,ee,re,ge){if(y.imageName){const ke=ee[y.imageName];return ke?ke.displaySize[0]*y.scale*ho/ge+re:0}{const ke=I[y.fontStack],Ie=ke&&ke.glyphs[$];return Ie?Ie.metrics.advance*y.scale+re:0}}function Hf($,y,I,ee){const re=Math.pow($-y,2);return ee?$<y?re/2:2*re:re+Math.abs(I)*I}function mg($,y,I){let ee=0;return $===10&&(ee-=1e4),I&&(ee+=150),$!==40&&$!==65288||(ee+=50),y!==41&&y!==65289||(ee+=50),ee}function Wf($,y,I,ee,re,ge){let ke=null,Ie=Hf(y,I,re,ge);for(const ze of ee){const Le=Hf(y-ze.x,I,re,ge)+ze.badness;Le<=Ie&&(ke=ze,Ie=Le)}return{index:$,x:y,priorBreak:ke,badness:Ie}}function Zf($){return $?Zf($.priorBreak).concat($.index):[]}function Ep($,y,I,ee,re,ge,ke){if(ge!=="point")return[];if(!$)return[];const Ie=[],ze=function(Ze,tt,ot,mt,Et,Ft){let Ht=0;for(let Nt=0;Nt<Ze.length();Nt++){const qt=Ze.getSection(Nt);Ht+=qf(Ze.getCharCode(Nt),qt,mt,Et,tt,Ft)}return Ht/Math.max(1,Math.ceil(Ht/ot))}($,y,I,ee,re,ke),Le=$.text.indexOf("\u200B")>=0;let Ve=0;for(let Ze=0;Ze<$.length();Ze++){const tt=$.getSection(Ze),ot=$.getCharCode(Ze);if(Od[ot]||(Ve+=qf(ot,tt,ee,re,y,ke)),Ze<$.length()-1){const mt=!((We=ot)<11904||!(Dc(We)||Rc(We)||Vl(We)||Ul(We)||$c(We)||Iu(We)||zc(We)||Nl(We)||va(We)||nl(We)||ya(We)||Gl(We)||fi(We)||si(We)||tl(We)||mo(We)||Hi(We)||Bc(We)||ia(We)||jl(We)));(_g[ot]||mt||tt.imageName)&&Ie.push(Wf(Ze+1,Ve,ze,Ie,mg(ot,$.getCharCode(Ze+1),mt&&Le),!1))}}var We;return Zf(Wf($.length(),Ve,ze,Ie,0,!0))}function Tp($){let y=.5,I=.5;switch($){case"right":case"top-right":case"bottom-right":y=1;break;case"left":case"top-left":case"bottom-left":y=0}switch($){case"bottom":case"bottom-right":case"bottom-left":I=1;break;case"top":case"top-right":case"top-left":I=0}return{horizontalAlign:y,verticalAlign:I}}function Xf($,y,I,ee,re){if(!(y||I||ee||re))return;const ge=$.length-1,ke=$[ge],Ie=(ke.x+ke.metrics.advance*ke.scale)*y;for(let ze=0;ze<=ge;ze++)$[ze].x-=Ie,$[ze].y+=I+ee+re}function gg($,y,I){const{horizontalAlign:ee,verticalAlign:re}=Tp(I),ge=y[0]-$.displaySize[0]*ee,ke=y[1]-$.displaySize[1]*re;return{image:$,top:ke,bottom:ke+$.displaySize[1],left:ge,right:ge+$.displaySize[0]}}function Yf($,y,I,ee,re,ge){const ke=$.image;let Ie;if(ke.content){const Et=ke.content,Ft=ke.pixelRatio||1;Ie=[Et[0]/Ft,Et[1]/Ft,ke.displaySize[0]-Et[2]/Ft,ke.displaySize[1]-Et[3]/Ft]}const ze=y.left*ge,Le=y.right*ge;let Ve,We,Ze,tt;I==="width"||I==="both"?(tt=re[0]+ze-ee[3],We=re[0]+Le+ee[1]):(tt=re[0]+(ze+Le-ke.displaySize[0])/2,We=tt+ke.displaySize[0]);const ot=y.top*ge,mt=y.bottom*ge;return I==="height"||I==="both"?(Ve=re[1]+ot-ee[0],Ze=re[1]+mt+ee[2]):(Ve=re[1]+(ot+mt-ke.displaySize[1])/2,Ze=Ve+ke.displaySize[1]),{image:ke,top:Ve,right:We,bottom:Ze,left:tt,collisionPadding:Ie}}class cl extends xe{constructor(y,I,ee,re,ge){super(y,I),this.angle=re,this.z=ee,ge!==void 0&&(this.segment=ge)}clone(){return new cl(this.x,this.y,this.z,this.angle,this.segment)}}function Kf($,y,I,ee,re){if(y.segment===void 0)return!0;let ge=y,ke=y.segment+1,Ie=0;for(;Ie>-I/2;){if(ke--,ke<0)return!1;Ie-=$[ke].dist(ge),ge=$[ke]}Ie+=$[ke].dist($[ke+1]),ke++;const ze=[];let Le=0;for(;Ie<I/2;){const Ve=$[ke],We=$[ke+1];if(!We)return!1;let Ze=$[ke-1].angleTo(Ve)-Ve.angleTo(We);for(Ze=Math.abs((Ze+3*Math.PI)%(2*Math.PI)-Math.PI),ze.push({distance:Ie,angleDelta:Ze}),Le+=Ze;Ie-ze[0].distance>ee;)Le-=ze.shift().angleDelta;if(Le>re)return!1;ke++,Ie+=Ve.dist(We)}return!0}function Qf($){let y=0;for(let I=0;I<$.length-1;I++)y+=$[I].dist($[I+1]);return y}function Jf($,y,I){return $?.6*y*I:0}function e_($,y){return Math.max($?$.right-$.left:0,y?y.right-y.left:0)}function yg($,y,I,ee,re,ge){const ke=Jf(I,re,ge),Ie=e_(I,ee)*ge;let ze=0;const Le=Qf($)/2;for(let Ve=0;Ve<$.length-1;Ve++){const We=$[Ve],Ze=$[Ve+1],tt=We.dist(Ze);if(ze+tt>Le){const ot=(Le-ze)/tt,mt=Wr(We.x,Ze.x,ot),Et=Wr(We.y,Ze.y,ot),Ft=new cl(mt,Et,0,Ze.angleTo(We),Ve);return!ke||Kf($,Ft,Ie,ke,y)?Ft:void 0}ze+=tt}}function vg($,y,I,ee,re,ge,ke,Ie,ze){const Le=Jf(ee,ge,ke),Ve=e_(ee,re),We=Ve*ke,Ze=$[0].x===0||$[0].x===ze||$[0].y===0||$[0].y===ze;return y-We<y/4&&(y=We+y/4),t_($,Ze?y/2*Ie%y:(Ve/2+2*ge)*ke*Ie%y,y,Le,I,We,Ze,!1,ze)}function t_($,y,I,ee,re,ge,ke,Ie,ze){const Le=ge/2,Ve=Qf($);let We=0,Ze=y-I,tt=[];for(let ot=0;ot<$.length-1;ot++){const mt=$[ot],Et=$[ot+1],Ft=mt.dist(Et),Ht=Et.angleTo(mt);for(;Ze+I<We+Ft;){Ze+=I;const Nt=(Ze-We)/Ft,qt=Wr(mt.x,Et.x,Nt),Jt=Wr(mt.y,Et.y,Nt);if(qt>=0&&qt<ze&&Jt>=0&&Jt<ze&&Ze-Le>=0&&Ze+Le<=Ve){const Zt=new cl(qt,Jt,0,Ht,ot);Zt._round(),ee&&!Kf($,Zt,ge,ee,re)||tt.push(Zt)}}We+=Ft}return Ie||tt.length||ke||(tt=t_($,We/2,I,ee,re,ge,ke,!0,ze)),tt}function n_($,y,I,ee,re){const ge=[];for(let ke=0;ke<$.length;ke++){const Ie=$[ke];let ze;for(let Le=0;Le<Ie.length-1;Le++){let Ve=Ie[Le],We=Ie[Le+1];Ve.x<y&&We.x<y||(Ve.x<y?Ve=new xe(y,Ve.y+(y-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round():We.x<y&&(We=new xe(y,Ve.y+(y-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round()),Ve.y<I&&We.y<I||(Ve.y<I?Ve=new xe(Ve.x+(I-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),I)._round():We.y<I&&(We=new xe(Ve.x+(I-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),I)._round()),Ve.x>=ee&&We.x>=ee||(Ve.x>=ee?Ve=new xe(ee,Ve.y+(ee-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round():We.x>=ee&&(We=new xe(ee,Ve.y+(ee-Ve.x)/(We.x-Ve.x)*(We.y-Ve.y))._round()),Ve.y>=re&&We.y>=re||(Ve.y>=re?Ve=new xe(Ve.x+(re-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),re)._round():We.y>=re&&(We=new xe(Ve.x+(re-Ve.y)/(We.y-Ve.y)*(We.x-Ve.x),re)._round()),ze&&Ve.equals(ze[ze.length-1])||(ze=[Ve],ge.push(ze)),ze.push(We)))))}}return ge}ur(cl,"Anchor");const zh=1e20;function r_($,y,I,ee,re,ge,ke,Ie,ze){for(let Le=y;Le<y+ee;Le++)i_($,I*ge+Le,ge,re,ke,Ie,ze);for(let Le=I;Le<I+re;Le++)i_($,Le*ge+y,1,ee,ke,Ie,ze)}function i_($,y,I,ee,re,ge,ke){ge[0]=0,ke[0]=-zh,ke[1]=zh,re[0]=$[y];for(let Ie=1,ze=0,Le=0;Ie<ee;Ie++){re[Ie]=$[y+Ie*I];const Ve=Ie*Ie;do{const We=ge[ze];Le=(re[Ie]-re[We]+Ve-We*We)/(Ie-We)/2}while(Le<=ke[ze]&&--ze>-1);ze++,ge[ze]=Ie,ke[ze]=Le,ke[ze+1]=zh}for(let Ie=0,ze=0;Ie<ee;Ie++){for(;ke[ze+1]<Ie;)ze++;const Le=ge[ze],Ve=Ie-Le;$[y+Ie*I]=re[Le]+Ve*Ve}}const kp={none:0,ideographs:1,all:2};class Gu{constructor(y,I,ee){this.requestManager=y,this.localGlyphMode=I,this.localFontFamily=ee,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(y){this.url=y}getGlyphs(y,I){const ee=[];for(const re in y)for(const ge of y[re])ee.push({stack:re,id:ge});pt(ee,({stack:re,id:ge},ke)=>{let Ie=this.entries[re];Ie||(Ie=this.entries[re]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let ze=Ie.glyphs[ge];if(ze!==void 0)return void ke(null,{stack:re,id:ge,glyph:ze});if(ze=this._tinySDF(Ie,re,ge),ze)return Ie.glyphs[ge]=ze,void ke(null,{stack:re,id:ge,glyph:ze});const Le=Math.floor(ge/256);if(256*Le>65535)return void ke(new Error("glyphs > 65535 not supported"));if(Ie.ranges[Le])return void ke(null,{stack:re,id:ge,glyph:ze});let Ve=Ie.requests[Le];Ve||(Ve=Ie.requests[Le]=[],Gu.loadGlyphRange(re,Le,this.url,this.requestManager,(We,Ze)=>{if(Ze){Ie.ascender=Ze.ascender,Ie.descender=Ze.descender;for(const tt in Ze.glyphs)this._doesCharSupportLocalGlyph(+tt)||(Ie.glyphs[+tt]=Ze.glyphs[+tt]);Ie.ranges[Le]=!0}for(const tt of Ve)tt(We,Ze);delete Ie.requests[Le]})),Ve.push((We,Ze)=>{We?ke(We):Ze&&ke(null,{stack:re,id:ge,glyph:Ze.glyphs[ge]||null})})},(re,ge)=>{if(re)I(re);else if(ge){const ke={};for(const{stack:Ie,id:ze,glyph:Le}of ge)ke[Ie]===void 0&&(ke[Ie]={}),ke[Ie].glyphs===void 0&&(ke[Ie].glyphs={}),ke[Ie].glyphs[ze]=Le&&{id:Le.id,bitmap:Le.bitmap.clone(),metrics:Le.metrics},ke[Ie].ascender=this.entries[Ie].ascender,ke[Ie].descender=this.entries[Ie].descender;I(null,ke)}})}_doesCharSupportLocalGlyph(y){return this.localGlyphMode!==kp.none&&(this.localGlyphMode===kp.all?!!this.localFontFamily:!!this.localFontFamily&&(nl(y)||Lc(y)||fi(y)||Hi(y)||Nl(y)))}_tinySDF(y,I,ee){const re=this.localFontFamily;if(!re||!this._doesCharSupportLocalGlyph(ee))return;let ge=y.tinySDF;if(!ge){let mt="400";/bold/i.test(I)?mt="900":/medium/i.test(I)?mt="500":/light/i.test(I)&&(mt="200"),ge=y.tinySDF=new Gu.TinySDF({fontFamily:re,fontWeight:mt,fontSize:48,buffer:6,radius:16}),ge.fontWeight=mt}if(this.localGlyphs[ge.fontWeight][ee])return this.localGlyphs[ge.fontWeight][ee];const ke=String.fromCharCode(ee),{data:Ie,width:ze,height:Le,glyphWidth:Ve,glyphHeight:We,glyphLeft:Ze,glyphTop:tt,glyphAdvance:ot}=ge.draw(ke);return this.localGlyphs[ge.fontWeight][ee]={id:ee,bitmap:new sl({width:ze,height:Le},Ie),metrics:{width:Ve/2,height:We/2,left:Ze/2,top:tt/2-27,advance:ot/2,localGlyph:!0}}}}function o_($,y,I,ee){const re=[],ge=$.image,ke=ge.pixelRatio,Ie=ge.paddedRect.w-2,ze=ge.paddedRect.h-2,Le=$.right-$.left,Ve=$.bottom-$.top,We=ge.stretchX||[[0,Ie]],Ze=ge.stretchY||[[0,ze]],tt=(Cn,Bn)=>Cn+Bn[1]-Bn[0],ot=We.reduce(tt,0),mt=Ze.reduce(tt,0),Et=Ie-ot,Ft=ze-mt;let Ht=0,Nt=ot,qt=0,Jt=mt,Zt=0,Tn=Et,An=0,On=Ft;if(ge.content&&ee){const Cn=ge.content;Ht=Rd(We,0,Cn[0]),qt=Rd(Ze,0,Cn[1]),Nt=Rd(We,Cn[0],Cn[2]),Jt=Rd(Ze,Cn[1],Cn[3]),Zt=Cn[0]-Ht,An=Cn[1]-qt,Tn=Cn[2]-Cn[0]-Nt,On=Cn[3]-Cn[1]-Jt}const Qn=(Cn,Bn,Vn,Fn)=>{const Xn=Dd(Cn.stretch-Ht,Nt,Le,$.left),Gn=zd(Cn.fixed-Zt,Tn,Cn.stretch,ot),ar=Dd(Bn.stretch-qt,Jt,Ve,$.top),Rr=zd(Bn.fixed-An,On,Bn.stretch,mt),zr=Dd(Vn.stretch-Ht,Nt,Le,$.left),vr=zd(Vn.fixed-Zt,Tn,Vn.stretch,ot),rr=Dd(Fn.stretch-qt,Jt,Ve,$.top),qr=zd(Fn.fixed-An,On,Fn.stretch,mt),Mr=new xe(Xn,ar),dr=new xe(zr,ar),gi=new xe(zr,rr),di=new xe(Xn,rr),Ci=new xe(Gn/ke,Rr/ke),jr=new xe(vr/ke,qr/ke),Qr=y*Math.PI/180;if(Qr){const hi=Math.sin(Qr),Ei=Math.cos(Qr),Mi=[Ei,-hi,hi,Ei];Mr._matMult(Mi),dr._matMult(Mi),di._matMult(Mi),gi._matMult(Mi)}const yi=Cn.stretch+Cn.fixed,pi=Bn.stretch+Bn.fixed;return{tl:Mr,tr:dr,bl:di,br:gi,tex:{x:ge.paddedRect.x+1+yi,y:ge.paddedRect.y+1+pi,w:Vn.stretch+Vn.fixed-yi,h:Fn.stretch+Fn.fixed-pi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ci,pixelOffsetBR:jr,minFontScaleX:Tn/ke/Le,minFontScaleY:On/ke/Ve,isSDF:I}};if(ee&&(ge.stretchX||ge.stretchY)){const Cn=a_(We,Et,ot),Bn=a_(Ze,Ft,mt);for(let Vn=0;Vn<Cn.length-1;Vn++){const Fn=Cn[Vn],Xn=Cn[Vn+1];for(let Gn=0;Gn<Bn.length-1;Gn++)re.push(Qn(Fn,Bn[Gn],Xn,Bn[Gn+1]))}}else re.push(Qn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ie+1},{fixed:0,stretch:ze+1}));return re}function Rd($,y,I){let ee=0;for(const re of $)ee+=Math.max(y,Math.min(I,re[1]))-Math.max(y,Math.min(I,re[0]));return ee}function a_($,y,I){const ee=[{fixed:-1,stretch:0}];for(const[re,ge]of $){const ke=ee[ee.length-1];ee.push({fixed:re-ke.stretch,stretch:ke.stretch}),ee.push({fixed:re-ke.stretch,stretch:ke.stretch+(ge-re)})}return ee.push({fixed:y+1,stretch:I}),ee}function Dd($,y,I,ee){return $/y*I+ee}function zd($,y,I,ee){return $-y*I/ee}function xg($,y,I,ee){const re=y+$.positionedLines[ee].lineOffset;return ee===0?I+re/2:I+(re+(y+$.positionedLines[ee-1].lineOffset))/2}Gu.loadGlyphRange=function($,y,I,ee,re){const ge=256*y,ke=ge+255,Ie=ee.transformRequest(ee.normalizeGlyphsURL(I).replace("{fontstack}",$).replace("{range}",`${ge}-${ke}`),tn.Glyphs);_n(Ie,(ze,Le)=>{if(ze)re(ze);else if(Le){const Ve={},We=function(Ze){return new Rh(Ze).readFields(dg,{})}(Le);for(const Ze of We.glyphs)Ve[Ze.id]=Ze;re(null,{glyphs:Ve,ascender:We.ascender,descender:We.descender})}})},Gu.TinySDF=class{constructor({fontSize:$=24,buffer:y=3,radius:I=8,cutoff:ee=.25,fontFamily:re="sans-serif",fontWeight:ge="normal",fontStyle:ke="normal"}={}){this.buffer=y,this.cutoff=ee,this.radius=I;const Ie=this.size=$+4*y,ze=this._createCanvas(Ie),Le=this.ctx=ze.getContext("2d",{willReadFrequently:!0});Le.font=`${ke} ${ge} ${$}px ${re}`,Le.textBaseline="alphabetic",Le.textAlign="left",Le.fillStyle="black",this.gridOuter=new Float64Array(Ie*Ie),this.gridInner=new Float64Array(Ie*Ie),this.f=new Float64Array(Ie),this.z=new Float64Array(Ie+1),this.v=new Uint16Array(Ie)}_createCanvas($){const y=document.createElement("canvas");return y.width=y.height=$,y}draw($){const{width:y,actualBoundingBoxAscent:I,actualBoundingBoxDescent:ee,actualBoundingBoxLeft:re,actualBoundingBoxRight:ge}=this.ctx.measureText($),ke=Math.ceil(I),Ie=Math.min(this.size-this.buffer,Math.ceil(ge-re)),ze=Math.min(this.size-this.buffer,ke+Math.ceil(ee)),Le=Ie+2*this.buffer,Ve=ze+2*this.buffer,We=Math.max(Le*Ve,0),Ze=new Uint8ClampedArray(We),tt={data:Ze,width:Le,height:Ve,glyphWidth:Ie,glyphHeight:ze,glyphTop:ke,glyphLeft:0,glyphAdvance:y};if(Ie===0||ze===0)return tt;const{ctx:ot,buffer:mt,gridInner:Et,gridOuter:Ft}=this;ot.clearRect(mt,mt,Ie,ze),ot.fillText($,mt,mt+ke);const Ht=ot.getImageData(mt,mt,Ie,ze);Ft.fill(zh,0,We),Et.fill(0,0,We);for(let Nt=0;Nt<ze;Nt++)for(let qt=0;qt<Ie;qt++){const Jt=Ht.data[4*(Nt*Ie+qt)+3]/255;if(Jt===0)continue;const Zt=(Nt+mt)*Le+qt+mt;if(Jt===1)Ft[Zt]=0,Et[Zt]=zh;else{const Tn=.5-Jt;Ft[Zt]=Tn>0?Tn*Tn:0,Et[Zt]=Tn<0?Tn*Tn:0}}r_(Ft,0,0,Le,Ve,Le,this.f,this.v,this.z),r_(Et,mt,mt,Ie,ze,Le,this.f,this.v,this.z);for(let Nt=0;Nt<We;Nt++){const qt=Math.sqrt(Ft[Nt])-Math.sqrt(Et[Nt]);Ze[Nt]=Math.round(255-255*(qt/this.radius+this.cutoff))}return tt}};class bg{constructor(y=[],I=Ag){if(this.data=y,this.length=this.data.length,this.compare=I,this.length>0)for(let ee=(this.length>>1)-1;ee>=0;ee--)this._down(ee)}push(y){this.data.push(y),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const y=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),y}peek(){return this.data[0]}_up(y){const{data:I,compare:ee}=this,re=I[y];for(;y>0;){const ge=y-1>>1,ke=I[ge];if(ee(re,ke)>=0)break;I[y]=ke,y=ge}I[y]=re}_down(y){const{data:I,compare:ee}=this,re=this.length>>1,ge=I[y];for(;y<re;){let ke=1+(y<<1),Ie=I[ke];const ze=ke+1;if(ze<this.length&&ee(I[ze],Ie)<0&&(ke=ze,Ie=I[ze]),ee(Ie,ge)>=0)break;I[y]=Ie,y=ke}I[y]=ge}}function Ag($,y){return $<y?-1:$>y?1:0}function wg($,y=1,I=!1){let ee=1/0,re=1/0,ge=-1/0,ke=-1/0;const Ie=$[0];for(let tt=0;tt<Ie.length;tt++){const ot=Ie[tt];(!tt||ot.x<ee)&&(ee=ot.x),(!tt||ot.y<re)&&(re=ot.y),(!tt||ot.x>ge)&&(ge=ot.x),(!tt||ot.y>ke)&&(ke=ot.y)}const ze=Math.min(ge-ee,ke-re);let Le=ze/2;const Ve=new bg([],Eg);if(ze===0)return new xe(ee,re);for(let tt=ee;tt<ge;tt+=ze)for(let ot=re;ot<ke;ot+=ze)Ve.push(new qu(tt+Le,ot+Le,Le,$));let We=function(tt){let ot=0,mt=0,Et=0;const Ft=tt[0];for(let Ht=0,Nt=Ft.length,qt=Nt-1;Ht<Nt;qt=Ht++){const Jt=Ft[Ht],Zt=Ft[qt],Tn=Jt.x*Zt.y-Zt.x*Jt.y;mt+=(Jt.x+Zt.x)*Tn,Et+=(Jt.y+Zt.y)*Tn,ot+=3*Tn}return new qu(mt/ot,Et/ot,0,tt)}($),Ze=Ve.length;for(;Ve.length;){const tt=Ve.pop();(tt.d>We.d||!We.d)&&(We=tt,I&&console.log("found best %d after %d probes",Math.round(1e4*tt.d)/1e4,Ze)),tt.max-We.d<=y||(Le=tt.h/2,Ve.push(new qu(tt.p.x-Le,tt.p.y-Le,Le,$)),Ve.push(new qu(tt.p.x+Le,tt.p.y-Le,Le,$)),Ve.push(new qu(tt.p.x-Le,tt.p.y+Le,Le,$)),Ve.push(new qu(tt.p.x+Le,tt.p.y+Le,Le,$)),Ze+=4)}return I&&(console.log(`num probes: ${Ze}`),console.log(`best distance: ${We.d}`)),We.p}function Eg($,y){return y.max-$.max}function qu($,y,I,ee){this.p=new xe($,y),this.h=I,this.d=function(re,ge){let ke=!1,Ie=1/0;for(let ze=0;ze<ge.length;ze++){const Le=ge[ze];for(let Ve=0,We=Le.length,Ze=We-1;Ve<We;Ze=Ve++){const tt=Le[Ve],ot=Le[Ze];tt.y>re.y!=ot.y>re.y&&re.x<(ot.x-tt.x)*(re.y-tt.y)/(ot.y-tt.y)+tt.x&&(ke=!ke),Ie=Math.min(Ie,ko(re,tt,ot))}}return(ke?1:-1)*Math.sqrt(Ie)}(this.p,ee),this.max=this.d+this.h*Math.SQRT2}const Cp=Number.POSITIVE_INFINITY,Tg=Math.sqrt(2);function s_($,y){return y[1]!==Cp?function(I,ee,re){let ge=0,ke=0;switch(ee=Math.abs(ee),re=Math.abs(re),I){case"top-right":case"top-left":case"top":ke=re-7;break;case"bottom-right":case"bottom-left":case"bottom":ke=7-re}switch(I){case"top-right":case"bottom-right":case"right":ge=-ee;break;case"top-left":case"bottom-left":case"left":ge=ee}return[ge,ke]}($,y[0],y[1]):function(I,ee){let re=0,ge=0;ee<0&&(ee=0);const ke=ee/Tg;switch(I){case"top-right":case"top-left":ge=ke-7;break;case"bottom-right":case"bottom-left":ge=7-ke;break;case"bottom":ge=7-ee;break;case"top":ge=ee-7}switch(I){case"top-right":case"bottom-right":re=-ke;break;case"top-left":case"bottom-left":re=ke;break;case"left":re=ee;break;case"right":re=-ee}return[re,ge]}($,y[0])}function kg($,y,I,ee,re,ge,ke,Ie,ze,Le){$.createArrays(),$.tilePixelRatio=kr/(512*$.overscaling),$.compareText={},$.iconsNeedLinear=!1;const Ve=$.layers[0].layout,We=$.layers[0]._unevaluatedLayout._values,Ze={};if($.textSizeData.kind==="composite"){const{minZoom:mt,maxZoom:Et}=$.textSizeData;Ze.compositeTextSizes=[We["text-size"].possiblyEvaluate(new Tt(mt),Ie),We["text-size"].possiblyEvaluate(new Tt(Et),Ie)]}if($.iconSizeData.kind==="composite"){const{minZoom:mt,maxZoom:Et}=$.iconSizeData;Ze.compositeIconSizes=[We["icon-size"].possiblyEvaluate(new Tt(mt),Ie),We["icon-size"].possiblyEvaluate(new Tt(Et),Ie)]}Ze.layoutTextSize=We["text-size"].possiblyEvaluate(new Tt(ze+1),Ie),Ze.layoutIconSize=We["icon-size"].possiblyEvaluate(new Tt(ze+1),Ie),Ze.textMaxSize=We["text-size"].possiblyEvaluate(new Tt(18),Ie);const tt=Ve.get("text-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",ot=Ve.get("text-size");for(const mt of $.features){const Et=Ve.get("text-font").evaluate(mt,{},Ie).join(","),Ft=ot.evaluate(mt,{},Ie),Ht=Ze.layoutTextSize.evaluate(mt,{},Ie),Nt=(Ze.layoutIconSize.evaluate(mt,{},Ie),{horizontal:{},vertical:void 0}),qt=mt.text;let Jt,Zt=[0,0];if(qt){const On=qt.toString(),Qn=Ve.get("text-letter-spacing").evaluate(mt,{},Ie)*ho,Cn=Ve.get("text-line-height").evaluate(mt,{},Ie)*ho,Bn=Nc(On)?Qn:0,Vn=Ve.get("text-anchor").evaluate(mt,{},Ie),Fn=Ve.get("text-variable-anchor");if(!Fn){const vr=Ve.get("text-radial-offset").evaluate(mt,{},Ie);Zt=vr?s_(Vn,[vr*ho,Cp]):Ve.get("text-offset").evaluate(mt,{},Ie).map(rr=>rr*ho)}let Xn=tt?"center":Ve.get("text-justify").evaluate(mt,{},Ie);const Gn=Ve.get("symbol-placement"),ar=Gn==="point",Rr=Gn==="point"?Ve.get("text-max-width").evaluate(mt,{},Ie)*ho:0,zr=vr=>{$.allowVerticalPlacement&&rl(On)&&(Nt.vertical=wp(qt,y,I,re,Et,Rr,Cn,Vn,vr,Bn,Zt,sa.vertical,!0,Gn,Ht,Ft))};if(!tt&&Fn){const vr=Xn==="auto"?Fn.map(qr=>Sp(qr)):[Xn];let rr=!1;for(let qr=0;qr<vr.length;qr++){const Mr=vr[qr];if(!Nt.horizontal[Mr])if(rr)Nt.horizontal[Mr]=Nt.horizontal[0];else{const dr=wp(qt,y,I,re,Et,Rr,Cn,"center",Mr,Bn,Zt,sa.horizontal,!1,Gn,Ht,Ft);dr&&(Nt.horizontal[Mr]=dr,rr=dr.positionedLines.length===1)}}zr("left")}else{if(Xn==="auto"&&(Xn=Sp(Vn)),ar||Ve.get("text-writing-mode").indexOf("horizontal")>=0||!rl(On)){const vr=wp(qt,y,I,re,Et,Rr,Cn,Vn,Xn,Bn,Zt,sa.horizontal,!1,Gn,Ht,Ft);vr&&(Nt.horizontal[Xn]=vr)}zr(Gn==="point"?"left":Xn)}}let Tn=!1;if(mt.icon&&mt.icon.name){const On=ee[mt.icon.name];On&&(Jt=gg(re[mt.icon.name],Ve.get("icon-offset").evaluate(mt,{},Ie),Ve.get("icon-anchor").evaluate(mt,{},Ie)),Tn=On.sdf,$.sdfIcons===void 0?$.sdfIcons=On.sdf:$.sdfIcons!==On.sdf&&$t("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(On.pixelRatio!==$.pixelRatio||Ve.get("icon-rotate").constantOr(1)!==0)&&($.iconsNeedLinear=!0))}const An=c_(Nt.horizontal)||Nt.vertical;$.iconsInText||($.iconsInText=!!An&&An.iconsInText),(An||Jt)&&Cg($,mt,Nt,Jt,ee,Ze,Ht,0,Zt,Tn,ke,Ie,Le)}ge&&$.generateCollisionDebugBuffers(ze,$.collisionBoxArray)}function Sp($){switch($){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Cg($,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze){let tt=ge.textMaxSize.evaluate(y,{},We);tt===void 0&&(tt=ke);const ot=$.layers[0].layout,mt=ot.get("icon-offset").evaluate(y,{},We),Et=c_(I.horizontal)||I.vertical,Ft=Ze.name==="globe",Ht=ke/24,Nt=$.tilePixelRatio*tt/24,qt=(Bn=$.overscaling,$.zoom>18&&Bn>2&&(Bn>>=1),Math.max(kr/(512*Bn),1)*ot.get("symbol-spacing")),Jt=ot.get("text-padding")*$.tilePixelRatio,Zt=ot.get("icon-padding")*$.tilePixelRatio,Tn=Oe(ot.get("text-max-angle")),An=ot.get("text-rotation-alignment")==="map"&&ot.get("symbol-placement")!=="point",On=ot.get("icon-rotation-alignment")==="map"&&ot.get("symbol-placement")!=="point",Qn=ot.get("symbol-placement"),Cn=qt/2;var Bn;const Vn=ot.get("icon-text-fit");let Fn;ee&&Vn!=="none"&&($.allowVerticalPlacement&&I.vertical&&(Fn=Yf(ee,I.vertical,Vn,ot.get("icon-text-fit-padding"),mt,Ht)),Et&&(ee=Yf(ee,Et,Vn,ot.get("icon-text-fit-padding"),mt,Ht)));const Xn=(Gn,ar,Rr)=>{if(ar.x<0||ar.x>=kr||ar.y<0||ar.y>=kr)return;let zr=null;if(Ft){const{x:vr,y:rr,z:qr}=Ze.projectTilePoint(ar.x,ar.y,Rr);zr={anchor:new cl(vr,rr,qr,0,void 0),up:Ze.upVector(Rr,ar.x,ar.y)}}(function(vr,rr,qr,Mr,dr,gi,di,Ci,jr,Qr,yi,pi,hi,Ei,Mi,ro,Fo,Xr,$i,yo,ri,Pi,Io,Si,Ni){const io=vr.addToLineVertexArray(rr,Mr);let eo,po,Mo,oo,hl,Yu,Hh,Wh=0,H_=0,W_=0,Z_=0,qp=-1,Hp=-1;const ws={};let X_=Uc("");const Yc=qr?qr.anchor:rr;let Wp=0,Zp=0;if(jr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Wp,Zp]=jr.layout.get("text-offset").evaluate(ri,{},Ni).map(Yo=>Yo*ho):(Wp=jr.layout.get("text-radial-offset").evaluate(ri,{},Ni)*ho,Zp=Cp),vr.allowVerticalPlacement&&dr.vertical){const Yo=dr.vertical;if(Mi)Yu=Ip(Yo),Ci&&(Hh=Ip(Ci));else{const Ko=jr.layout.get("text-rotate").evaluate(ri,{},Ni)+90;Mo=$d(Qr,Yc,rr,yi,pi,hi,Yo,Ei,Ko,ro),Ci&&(oo=$d(Qr,Yc,rr,yi,pi,hi,Ci,Xr,Ko))}}if(gi){const Yo=jr.layout.get("icon-rotate").evaluate(ri,{},Ni),Ko=jr.layout.get("icon-text-fit")!=="none",Zh=o_(gi,Yo,Io,Ko),Yp=Ci?o_(Ci,Yo,Io,Ko):void 0;po=$d(Qr,Yc,rr,yi,pi,hi,gi,Xr,Yo),Wh=4*Zh.length;const Y_=vr.iconSizeData;let Kc=null;Y_.kind==="source"?(Kc=[ys*jr.layout.get("icon-size").evaluate(ri,{},Ni)],Kc[0]>Kl&&$t(`${vr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Y_.kind==="composite"&&(Kc=[ys*Pi.compositeIconSizes[0].evaluate(ri,{},Ni),ys*Pi.compositeIconSizes[1].evaluate(ri,{},Ni)],(Kc[0]>Kl||Kc[1]>Kl)&&$t(`${vr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),vr.addSymbols(vr.icon,Zh,Kc,yo,$i,ri,!1,qr,rr,io.lineStartIndex,io.lineLength,-1,Si,Ni),qp=vr.icon.placedSymbolArray.length-1,Yp&&(H_=4*Yp.length,vr.addSymbols(vr.icon,Yp,Kc,yo,$i,ri,sa.vertical,qr,rr,io.lineStartIndex,io.lineLength,-1,Si,Ni),Hp=vr.icon.placedSymbolArray.length-1)}for(const Yo in dr.horizontal){const Ko=dr.horizontal[Yo];eo||(X_=Uc(Ko.text),Mi?hl=Ip(Ko):eo=$d(Qr,Yc,rr,yi,pi,hi,Ko,Ei,jr.layout.get("text-rotate").evaluate(ri,{},Ni),ro));const Zh=Ko.positionedLines.length===1;if(W_+=l_(vr,qr,rr,Ko,di,jr,Mi,ri,ro,io,dr.vertical?sa.horizontal:sa.horizontalOnly,Zh?Object.keys(dr.horizontal):[Yo],ws,qp,Pi,Si,Ni),Zh)break}dr.vertical&&(Z_+=l_(vr,qr,rr,dr.vertical,di,jr,Mi,ri,ro,io,sa.vertical,["vertical"],ws,Hp,Pi,Si,Ni));let rc=-1;const Xp=(Yo,Ko)=>Yo?Math.max(Yo,Ko):Ko;rc=Xp(hl,rc),rc=Xp(Yu,rc),rc=Xp(Hh,rc);const oy=rc>-1?1:0;vr.glyphOffsetArray.length>=Jl.MAX_GLYPHS&&$t("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ri.sortKey!==void 0&&vr.addToSortKeyRanges(vr.symbolInstances.length,ri.sortKey),vr.symbolInstances.emplaceBack(Yc.x,Yc.y,Yc.z,rr.x,rr.y,ws.right>=0?ws.right:-1,ws.center>=0?ws.center:-1,ws.left>=0?ws.left:-1,ws.vertical>=0?ws.vertical:-1,qp,Hp,X_,eo!==void 0?eo:vr.collisionBoxArray.length,eo!==void 0?eo+1:vr.collisionBoxArray.length,Mo!==void 0?Mo:vr.collisionBoxArray.length,Mo!==void 0?Mo+1:vr.collisionBoxArray.length,po!==void 0?po:vr.collisionBoxArray.length,po!==void 0?po+1:vr.collisionBoxArray.length,oo||vr.collisionBoxArray.length,oo?oo+1:vr.collisionBoxArray.length,yi,W_,Z_,Wh,H_,oy,0,Wp,Zp,rc)})($,ar,zr,Gn,I,ee,re,Fn,$.layers[0],$.collisionBoxArray,y.index,y.sourceLayerIndex,$.index,Jt,An,ze,0,Zt,On,mt,y,ge,Le,Ve,We)};if(Qn==="line")for(const Gn of n_(y.geometry,0,0,kr,kr)){const ar=vg(Gn,qt,Tn,I.vertical||Et,ee,24,Nt,$.overscaling,kr);for(const Rr of ar){const zr=Et;zr&&Sg($,zr.text,Cn,Rr)||Xn(Gn,Rr,We)}}else if(Qn==="line-center"){for(const Gn of y.geometry)if(Gn.length>1){const ar=yg(Gn,Tn,I.vertical||Et,ee,24,Nt);ar&&Xn(Gn,ar,We)}}else if(y.type==="Polygon")for(const Gn of mp(y.geometry,0)){const ar=wg(Gn,16);Xn(Gn[0],new cl(ar.x,ar.y,0,0,void 0),We)}else if(y.type==="LineString")for(const Gn of y.geometry)Xn(Gn,new cl(Gn[0].x,Gn[0].y,0,0,void 0),We);else if(y.type==="Point")for(const Gn of y.geometry)for(const ar of Gn)Xn([ar],new cl(ar.x,ar.y,0,0,void 0),We)}const Kl=32640;function l_($,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot,mt,Et){const Ft=function(qt,Jt,Zt,Tn,An,On,Qn,Cn){const Bn=[];if(Jt.positionedLines.length===0)return Bn;const Vn=Tn.layout.get("text-rotate").evaluate(On,{})*Math.PI/180,Fn=function(zr){const vr=zr[0],rr=zr[1],qr=vr*rr;return qr>0?[vr,-rr]:qr<0?[-vr,rr]:vr===0?[rr,vr]:[rr,-vr]}(Zt);let Xn=Math.abs(Jt.top-Jt.bottom);for(const zr of Jt.positionedLines)Xn-=zr.lineOffset;const Gn=Jt.positionedLines.length,ar=Xn/Gn;let Rr=Jt.top-Zt[1];for(let zr=0;zr<Gn;++zr){const vr=Jt.positionedLines[zr];Rr=xg(Jt,ar,Rr,zr);for(const rr of vr.positionedGlyphs){if(!rr.rect)continue;const qr=rr.rect||{};let Mr=4,dr=!0,gi=1,di=0;if(rr.imageName){const Si=Qn[rr.imageName];if(!Si)continue;if(Si.sdf){$t("SDF images are not supported in formatted text and will be ignored.");continue}dr=!1,gi=Si.pixelRatio,Mr=1/gi}const Ci=(An||Cn)&&rr.vertical,jr=rr.metrics.advance*rr.scale/2,Qr=rr.metrics,yi=rr.rect;if(yi===null)continue;Cn&&Jt.verticalizable&&(di=rr.imageName?jr-rr.metrics.width*rr.scale/2:0);const pi=An?[rr.x+jr,rr.y]:[0,0];let hi=[0,0],Ei=[0,0],Mi=!1;An||(Ci?(Ei=[rr.x+jr+Fn[0],rr.y+Fn[1]-di],Mi=!0):hi=[rr.x+jr+Zt[0],rr.y+Zt[1]-di]);const ro=yi.w*rr.scale/(gi*(rr.localGlyph?2:1)),Fo=yi.h*rr.scale/(gi*(rr.localGlyph?2:1));let Xr,$i,yo,ri;if(Ci){const Si=rr.y-Rr,Ni=new xe(-jr,jr-Si),io=-Math.PI/2,eo=new xe(...Ei);Xr=new xe(-jr+hi[0],hi[1]),Xr._rotateAround(io,Ni)._add(eo),Xr.x+=-Si+jr,Xr.y-=(Qr.left-Mr)*rr.scale;const po=rr.imageName?Qr.advance*rr.scale:ho*rr.scale,Mo=String.fromCharCode(rr.glyph);tg(Mo)?Xr.x+=(1-Mr)*rr.scale:ng(Mo)?Xr.x+=po-Qr.height*rr.scale+(-Mr-1)*rr.scale:Xr.x+=rr.imageName||Qr.width+2*Mr===yi.w&&Qr.height+2*Mr===yi.h?(po-Fo)/2:(po-(Qr.height+2*Mr)*rr.scale)/2,$i=new xe(Xr.x,Xr.y-ro),yo=new xe(Xr.x+Fo,Xr.y),ri=new xe(Xr.x+Fo,Xr.y-ro)}else{const Si=(Qr.left-Mr)*rr.scale-jr+hi[0],Ni=(-Qr.top-Mr)*rr.scale+hi[1],io=Si+ro,eo=Ni+Fo;Xr=new xe(Si,Ni),$i=new xe(io,Ni),yo=new xe(Si,eo),ri=new xe(io,eo)}if(Vn){let Si;Si=An?new xe(0,0):Mi?new xe(Fn[0],Fn[1]):new xe(Zt[0],Zt[1]),Xr._rotateAround(Vn,Si),$i._rotateAround(Vn,Si),yo._rotateAround(Vn,Si),ri._rotateAround(Vn,Si)}const Pi=new xe(0,0),Io=new xe(0,0);Bn.push({tl:Xr,tr:$i,bl:yo,br:ri,tex:qr,writingMode:Jt.writingMode,glyphOffset:pi,sectionIndex:rr.sectionIndex,isSDF:dr,pixelOffsetTL:Pi,pixelOffsetBR:Io,minFontScaleX:0,minFontScaleY:0})}}return Bn}(0,ee,ze,ge,ke,Ie,re,$.allowVerticalPlacement),Ht=$.textSizeData;let Nt=null;Ht.kind==="source"?(Nt=[ys*ge.layout.get("text-size").evaluate(Ie,{},Et)],Nt[0]>Kl&&$t(`${$.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ht.kind==="composite"&&(Nt=[ys*ot.compositeTextSizes[0].evaluate(Ie,{},Et),ys*ot.compositeTextSizes[1].evaluate(Ie,{},Et)],(Nt[0]>Kl||Nt[1]>Kl)&&$t(`${$.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),$.addSymbols($.text,Ft,Nt,ze,ke,Ie,Ve,y,I,Le.lineStartIndex,Le.lineLength,tt,mt,Et);for(const qt of We)Ze[qt]=$.text.placedSymbolArray.length-1;return 4*Ft.length}function c_($){for(const y in $)return $[y];return null}function $d($,y,I,ee,re,ge,ke,Ie,ze,Le){let Ve=ke.top,We=ke.bottom,Ze=ke.left,tt=ke.right;const ot=ke.collisionPadding;if(ot&&(Ze-=ot[0],Ve-=ot[1],tt+=ot[2],We+=ot[3]),ze){const mt=new xe(Ze,Ve),Et=new xe(tt,Ve),Ft=new xe(Ze,We),Ht=new xe(tt,We),Nt=Oe(ze);let qt=new xe(0,0);Le&&(qt=new xe(Le[0],Le[1])),mt._rotateAround(Nt,qt),Et._rotateAround(Nt,qt),Ft._rotateAround(Nt,qt),Ht._rotateAround(Nt,qt),Ze=Math.min(mt.x,Et.x,Ft.x,Ht.x),tt=Math.max(mt.x,Et.x,Ft.x,Ht.x),Ve=Math.min(mt.y,Et.y,Ft.y,Ht.y),We=Math.max(mt.y,Et.y,Ft.y,Ht.y)}return $.emplaceBack(y.x,y.y,y.z,I.x,I.y,Ze,Ve,tt,We,Ie,ee,re,ge),$.length-1}function Ip($){$.collisionPadding&&($.top-=$.collisionPadding[1],$.bottom+=$.collisionPadding[3]);const y=$.bottom-$.top;return y>0?Math.max(10,y):null}function Sg($,y,I,ee){const re=$.compareText;if(y in re){const ge=re[y];for(let ke=ge.length-1;ke>=0;ke--)if(ee.dist(ge[ke])<I)return!0}else re[y]=[];return re[y].push(ee),!1}const Ig=Ln([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:u_}=Ig,h_=Ln([{name:"a_pos_3",components:3,type:"Int16"}]);var $h=Ln([{name:"a_pos",type:"Int16",components:2}]);const ul=kr/Math.PI/2,Mp=2*Lo(1,0)*ul*Math.PI,Hu=[64,32,16],Ha=-ul,Wa=ul,Mg=[new Bo([Ha,Ha,Ha],[Wa,Wa,Wa]),new Bo([Ha,Ha,Ha],[0,0,Wa]),new Bo([0,Ha,Ha],[Wa,0,Wa]),new Bo([Ha,0,Ha],[0,Wa,Wa]),new Bo([0,0,Ha],[Wa,Wa,Wa])];function d_($,y,I,ee=!0){const re=Ga([],$._camera.position,$.worldSize),ge=[y,I,1,1];qc(ge,ge,$.pixelMatrixInverse),rf(ge,ge,1/ge[3]);const ke=Co([],qa([],ge,re)),Ie=$.globeMatrix,ze=[Ie[12],Ie[13],Ie[14]],Le=qa([],ze,re),Ve=bh(Le),We=Co([],Le),Ze=$.worldSize/(2*Math.PI),tt=Aa(We,ke),ot=Math.asin(Ze/Ve);if(ot<Math.acos(tt)){if(!ee)return null;const Qn=[],Cn=[];Ga(Qn,ke,Ve/tt),Co(Cn,qa(Cn,Qn,Le)),Co(ke,Yl(ke,Le,Ga(ke,Cn,Math.tan(ot)*Ve)))}const mt=[];new lp(re,ke).closestPointOnSphere(ze,Ze,mt);const Et=Co([],hn(Ie,0)),Ft=Co([],hn(Ie,1)),Ht=Co([],hn(Ie,2)),Nt=Aa(Et,mt),qt=Aa(Ft,mt),Jt=Aa(Ht,mt),Zt=De(Math.asin(-qt/Ze));let Tn=De(Math.atan2(Nt,Jt));Tn=$.center.lng+function(Qn,Cn){const Bn=(Cn-Qn+180)%360-180;return Bn<-180?Bn+360:Bn}($.center.lng,Tn);const An=xa(Tn),On=Ye(Va(Zt),0,1);return new Xl(An,On)}class Pg{constructor(y,I,ee){this.a=qa([],y,ee),this.b=qa([],I,ee),this.center=ee;const re=Co([],this.a),ge=Co([],this.b);this.angle=Math.acos(Aa(re,ge))}}function Pp($,y){if($.angle===0)return null;let I;return I=$.a[y]===0?1/$.angle*.5*Math.PI:1/$.angle*Math.atan($.b[y]/$.a[y]/Math.sin($.angle)-1/Math.tan($.angle)),I<0||I>1?null:function(ee,re,ge,ke){const Ie=Math.sin(ge);return ee*(Math.sin((1-ke)*ge)/Ie)+re*(Math.sin(ke*ge)/Ie)}($.a[y],$.b[y],$.angle,Ye(I,0,1))+$.center[y]}function vs($){if($.z<=1)return Mg[$.z+2*$.y+$.x];const y=Op(Ld($));return Bo.fromPoints(y)}function p_($,y){const I=Fh(y.zoom);if(I===0)return vs($);const ee=Ld($),re=Op(ee),ge=xa(ee.getWest())*y.worldSize,ke=xa(ee.getEast())*y.worldSize,Ie=Va(ee.getNorth())*y.worldSize,ze=Va(ee.getSouth())*y.worldSize,Le=[ge,Ie,0],Ve=[ke,Ie,0],We=[ge,ze,0],Ze=[ke,ze,0],tt=tp([],y.globeMatrix);return Zi(Le,Le,tt),Zi(Ve,Ve,tt),Zi(We,We,tt),Zi(Ze,Ze,tt),re[0]=Ka(re[0],We,I),re[1]=Ka(re[1],Ze,I),re[2]=Ka(re[2],Ve,I),re[3]=Ka(re[3],Le,I),Bo.fromPoints(re)}function f_($,y,I,ee,re){for(const ge of I)Zi(ge,ge,ee),Ga(ge,ge,re),op($,$,ge),ap(y,y,ge)}function Og($,y,I){const ee=y/$.worldSize,re=Number.MAX_VALUE,ge=[-re,-re,-re],ke=[re,re,re],Ie=$.globeMatrix;if(I.z<=1)return f_(ke,ge,vs(I).getCorners(),Ie,ee),new Bo(ke,ge);const ze=Ld(I),Le=Op(ze);if(f_(ke,ge,Le,Ie,ee),ze.contains($.center)){ge[2]=0;const Tn=$.point,An=[Tn.x*ee,Tn.y*ee,0];return op(ke,ke,An),ap(ge,ge,An),new Bo(ke,ge)}const Ve=[Ie[12]*ee,Ie[13]*ee,Ie[14]*ee],We=ze.getCenter(),Ze=Ye($.center.lat,-85.051129,ba),tt=Ye(We.lat,-85.051129,ba),ot=xa($.center.lng),mt=Va(Ze);let Et=ot-xa(We.lng);const Ft=mt-Va(tt);Et>.5?Et-=1:Et<-.5&&(Et+=1);let Ht=0;Math.abs(Et)>Math.abs(Ft)?Ht=Et>=0?1:3:(Ht=Ft>=0?0:2,vd(Ve,Ve,[Ie[4]*ee,Ie[5]*ee,Ie[6]*ee],-Math.sin(Oe(Ft>=0?ze.getSouth():ze.getNorth()))*ul));const Nt=Le[Ht],qt=Le[(Ht+1)%4],Jt=new Pg(Nt,qt,Ve),Zt=[Pp(Jt,0)||Nt[0],Pp(Jt,1)||Nt[1],Pp(Jt,2)||Nt[2]];return ke[2]=Math.min(Nt[2],qt[2]),op(ke,ke,Zt),ap(ge,ge,Zt),new Bo(ke,ge)}function Ld({x:$,y,z:I}){const ee=1/(1<<I),re=new ti(Ho($*ee),Qi((y+1)*ee)),ge=new ti(Ho(($+1)*ee),Qi(y*ee));return new Ua(re,ge)}function Op($){const y=Oe($.getNorth()),I=Oe($.getSouth()),ee=Math.cos(y),re=Math.cos(I),ge=Math.sin(y),ke=Math.sin(I),Ie=$.getWest(),ze=$.getEast();return[Wu(re,ke,Ie),Wu(re,ke,ze),Wu(ee,ge,ze),Wu(ee,ge,Ie)]}function Wu($,y,I,ee=ul){return I=Oe(I),[$*Math.sin(I)*ee,-y*ee,$*Math.cos(I)*ee]}function Bd($,y,I){return Wu(Math.cos(Oe($)),Math.sin(Oe($)),y,I)}function Lh($,y,I,ee){const re=1<<I.z,ge=($/kr+I.x)/re;return Bd(Qi((y/kr+I.y)/re),Ho(ge),ee)}function Fd({min:$,max:y}){return 16383/Math.max(y[0]-$[0],y[1]-$[1],y[2]-$[2])}const __=new Float64Array(16);function Bh($){const y=Fd($),I=Qp(__,[y,y,y]);return xh(I,I,((ee=[])[0]=-(re=$.min)[0],ee[1]=-re[1],ee[2]=-re[2],ee));var ee,re}function Rp($){const y=(ee=$.min,(I=__)[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=ee[0],I[13]=ee[1],I[14]=ee[2],I[15]=1,I);var I,ee;const re=1/Fd($);return Gc(y,y,[re,re,re])}function m_($,y,I,ee,re){const ge=function(ze){const Le=kr/(2*Math.PI);return ze/(2*Math.PI)/Le}(I),ke=[$,y,-I/(2*Math.PI)],Ie=gs(new Float64Array(16));return xh(Ie,Ie,ke),Gc(Ie,Ie,[ge,ge,ge]),np(Ie,Ie,Oe(-re)),yd(Ie,Ie,Oe(-ee)),Ie}function Fh($){return He(5,6,$)}function g_($,y){const I=Bd(y.lat,y.lng);return ge=(ee=ip([],function(tt){const ot=Bd(tt._center.lat,tt._center.lng);let mt=sp([],Lu(0,1,0),ot);const Et=Jp([],-tt.angle,ot);mt=Zi(mt,mt,Et),Jp(Et,-tt._pitch,mt);const Ft=Co([],ot);return Ga(Ft,Ft,tt.cameraToCenterDistance/tt.pixelsPerMeter*Mp),Zi(Ft,Ft,Et),Yl([],ot,Ft)}($),I))[0],ke=ee[1],Ie=ee[2],ze=(re=I)[0],Le=re[1],Ve=re[2],Ze=(We=Math.sqrt(ge*ge+ke*ke+Ie*Ie)*Math.sqrt(ze*ze+Le*Le+Ve*Ve))&&Aa(ee,re)/We,Math.acos(Math.min(Math.max(Ze,-1),1));var ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze}const y_=Oe(85),Rg=Math.cos(y_),Dg=Math.sin(y_);function v_($,y){const I=$.fovAboveCenter,ee=$.elevation?$.elevation.getMinElevationBelowMSL()*y:0,re=($._camera.position[2]*$.worldSize-ee)/Math.cos($._pitch),ge=Math.sin(I)*re/Math.sin(Math.max(Math.PI/2-$._pitch-I,.01)),ke=Math.sin($._pitch)*ge+re;return Math.min(1.01*ke,re*(1/$._horizonShift))}function Zc($,y){if(!y.isReprojectedInTileSpace)return{scale:1<<$.z,x:$.x,y:$.y,x2:$.x+1,y2:$.y+1,projection:y};const I=Math.pow(2,-$.z),ee=$.x*I,re=($.x+1)*I,ge=$.y*I,ke=($.y+1)*I,Ie=Ho(ee),ze=Ho(re),Le=Qi(ge),Ve=Qi(ke),We=y.project(Ie,Le),Ze=y.project(ze,Le),tt=y.project(ze,Ve),ot=y.project(Ie,Ve);let mt=Math.min(We.x,Ze.x,tt.x,ot.x),Et=Math.min(We.y,Ze.y,tt.y,ot.y),Ft=Math.max(We.x,Ze.x,tt.x,ot.x),Ht=Math.max(We.y,Ze.y,tt.y,ot.y);const Nt=I/16;function qt(Zt,Tn,An,On,Qn,Cn){const Bn=(An+Qn)/2,Vn=(On+Cn)/2,Fn=y.project(Ho(Bn),Qi(Vn)),Xn=Math.max(0,mt-Fn.x,Et-Fn.y,Fn.x-Ft,Fn.y-Ht);mt=Math.min(mt,Fn.x),Ft=Math.max(Ft,Fn.x),Et=Math.min(Et,Fn.y),Ht=Math.max(Ht,Fn.y),Xn>Nt&&(qt(Zt,Fn,An,On,Bn,Vn),qt(Fn,Tn,Bn,Vn,Qn,Cn))}qt(We,Ze,ee,ge,re,ge),qt(Ze,tt,re,ge,re,ke),qt(tt,ot,re,ke,ee,ke),qt(ot,We,ee,ke,ee,ge),mt-=Nt,Et-=Nt,Ft+=Nt,Ht+=Nt;const Jt=1/Math.max(Ft-mt,Ht-Et);return{scale:Jt,x:mt*Jt,y:Et*Jt,x2:Ft*Jt,y2:Ht*Jt,projection:y}}const zg=gs(new Float32Array(16));class Ql{constructor(y){this.spec=y,this.name=y.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(y,I){return{x:0,y:0,z:0}}unproject(y,I){return new ti(0,0)}projectTilePoint(y,I,ee){return{x:y,y:I,z:0}}locationPoint(y,I,ee=!0){return y._coordinatePoint(y.locationCoordinate(I),ee)}pixelsPerMeter(y,I){return Lo(1,y)*I}pixelSpaceConversion(y,I,ee){return 1}farthestPixelDistance(y){return v_(y,y.pixelsPerMeter)}pointCoordinate(y,I,ee,re){const ge=y.horizonLineFromTop(!1),ke=new xe(I,Math.max(ge,ee));return y.rayIntersectionCoordinate(y.pointRayIntersection(ke,re))}pointCoordinate3D(y,I,ee){const re=new xe(I,ee);if(y.elevation)return y.elevation.pointCoordinate(re);{const ge=this.pointCoordinate(y,re.x,re.y,0);return[ge.x,ge.y,ge.z]}}isPointAboveHorizon(y,I){if(y.elevation)return!this.pointCoordinate3D(y,I.x,I.y);const ee=y.horizonLineFromTop();return I.y<ee}createInversionMatrix(y,I){return zg}createTileMatrix(y,I,ee){let re,ge,ke;const Ie=ee.canonical,ze=gs(new Float64Array(16));if(this.isReprojectedInTileSpace){const Le=Zc(Ie,this);re=1,ge=Le.x+ee.wrap*Le.scale,ke=Le.y,Gc(ze,ze,[re/Le.scale,re/Le.scale,y.pixelsPerMeter/I])}else re=I/y.zoomScale(Ie.z),ge=(Ie.x+Math.pow(2,Ie.z)*ee.wrap)*re,ke=Ie.y*re;return xh(ze,ze,[ge,ke,0]),Gc(ze,ze,[re/kr,re/kr,1]),ze}upVector(y,I,ee){return[0,0,1]}upVectorScale(y,I,ee){return{metersToTile:1}}}class $g extends Ql{constructor(y){super(y),this.range=[4,7],this.center=y.center||[-96,37.5];const[I,ee]=this.parallels=y.parallels||[29.5,45.5],re=Math.sin(Oe(I));this.n=(re+Math.sin(Oe(ee)))/2,this.c=1+re*(2*this.n-re),this.r0=Math.sqrt(this.c)/this.n}project(y,I){const{n:ee,c:re,r0:ge}=this,ke=Oe(y-this.center[0]),Ie=Oe(I),ze=Math.sqrt(re-2*ee*Math.sin(Ie))/ee;return{x:ze*Math.sin(ke*ee),y:ze*Math.cos(ke*ee)-ge,z:0}}unproject(y,I){const{n:ee,c:re,r0:ge}=this,ke=ge+I;let Ie=Math.atan2(y,Math.abs(ke))*Math.sign(ke);ke*ee<0&&(Ie-=Math.PI*Math.sign(y)*Math.sign(ke));const ze=Oe(this.center[0])*ee;Ie=Je(Ie,-Math.PI-ze,Math.PI-ze);const Le=De(Ie/ee)+this.center[0],Ve=Math.asin(Ye((re-(y*y+ke*ke)*ee*ee)/(2*ee),-1,1)),We=Ye(De(Ve),-85.051129,ba);return new ti(Le,We)}}const Nh=1.340264,jh=-.081106,Uh=893e-6,Vh=.003796,Nd=Math.sqrt(3)/2;class Lg extends Ql{project(y,I){I=I/180*Math.PI,y=y/180*Math.PI;const ee=Math.asin(Nd*Math.sin(I)),re=ee*ee,ge=re*re*re;return{x:.5*(y*Math.cos(ee)/(Nd*(Nh+3*jh*re+ge*(7*Uh+9*Vh*re)))/Math.PI+.5),y:1-.5*(ee*(Nh+jh*re+ge*(Uh+Vh*re))/Math.PI+1),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI;let ee=I=(2*(1-I)-1)*Math.PI,re=ee*ee,ge=re*re*re;for(let Ve,We,Ze,tt=0;tt<12&&(We=ee*(Nh+jh*re+ge*(Uh+Vh*re))-I,Ze=Nh+3*jh*re+ge*(7*Uh+9*Vh*re),Ve=We/Ze,ee=Ye(ee-Ve,-Math.PI/3,Math.PI/3),re=ee*ee,ge=re*re*re,!(Math.abs(Ve)<1e-12));++tt);const ke=Nd*y*(Nh+3*jh*re+ge*(7*Uh+9*Vh*re))/Math.cos(ee),Ie=Math.asin(Math.sin(ee)/Nd),ze=Ye(180*ke/Math.PI,-180,180),Le=Ye(180*Ie/Math.PI,-85.051129,ba);return new ti(ze,Le)}}class Bg extends Ql{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0}project(y,I){return{x:.5+y/360,y:.5-I/360,z:0}}unproject(y,I){const ee=360*(y-.5),re=Ye(360*(.5-I),-85.051129,ba);return new ti(ee,re)}}const Zu=Math.PI/2;function jd($){return Math.tan((Zu+$)/2)}class Fg extends Ql{constructor(y){super(y),this.center=y.center||[0,30];const[I,ee]=this.parallels=y.parallels||[30,30],re=Oe(I),ge=Oe(ee),ke=Math.cos(re);this.n=re===ge?Math.sin(re):Math.log(ke/Math.cos(ge))/Math.log(jd(ge)/jd(re)),this.f=ke*Math.pow(jd(re),this.n)/this.n}project(y,I){I=Oe(I),y=Oe(y-this.center[0]);const ee=1e-6,{n:re,f:ge}=this;ge>0?I<-Zu+ee&&(I=-Zu+ee):I>Zu-ee&&(I=Zu-ee);const ke=ge/Math.pow(jd(I),re),Ie=ke*Math.sin(re*y),ze=ge-ke*Math.cos(re*y);return{x:.5*(Ie/Math.PI+.5),y:1-.5*(ze/Math.PI+.5),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI,I=(2*(1-I)-.5)*Math.PI;const{n:ee,f:re}=this,ge=re-I,ke=Math.sign(ge),Ie=Math.sign(ee)*Math.sqrt(y*y+ge*ge);let ze=Math.atan2(y,Math.abs(ge))*ke;ge*ee<0&&(ze-=Math.PI*Math.sign(y)*ke);const Le=Ye(De(ze/ee)+this.center[0],-180,180),Ve=Ye(De(2*Math.atan(Math.pow(re/Ie,1/ee))-Zu),-85.051129,ba);return new ti(Le,Ve)}}class x_ extends Ql{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(y,I){return{x:xa(y),y:Va(I),z:0}}unproject(y,I){const ee=Ho(y),re=Qi(I);return new ti(ee,re)}}const b_=Oe(ba);class Ng extends Ql{project(y,I){const ee=(I=Oe(I))*I,re=ee*ee;return{x:.5*((y=Oe(y))*(.8707-.131979*ee+re*(re*(.003971*ee-.001529*re)-.013791))/Math.PI+.5),y:1-.5*(I*(1.007226+ee*(.015085+re*(.028874*ee-.044475-.005916*re)))/Math.PI+1),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI;let ee=I=(2*(1-I)-1)*Math.PI,re=25,ge=0,ke=ee*ee;do{ke=ee*ee;const Le=ke*ke;ge=(ee*(1.007226+ke*(.015085+Le*(.028874*ke-.044475-.005916*Le)))-I)/(1.007226+ke*(.045255+Le*(.259866*ke-.311325-.005916*11*Le))),ee=Ye(ee-ge,-b_,b_)}while(Math.abs(ge)>1e-6&&--re>0);ke=ee*ee;const Ie=Ye(De(y/(.8707+ke*(ke*(ke*ke*ke*(.003971-.001529*ke)-.013791)-.131979))),-180,180),ze=De(ee);return new ti(Ie,ze)}}const A_=Oe(ba);class jg extends Ql{project(y,I){I=Oe(I),y=Oe(y);const ee=Math.cos(I),re=2/Math.PI,ge=Math.acos(ee*Math.cos(y/2)),ke=Math.sin(ge)/ge,Ie=.5*(y*re+2*ee*Math.sin(y/2)/ke)||0,ze=.5*(I+Math.sin(I)/ke)||0;return{x:.5*(Ie/Math.PI+.5),y:1-.5*(ze/Math.PI+1),z:0}}unproject(y,I){let ee=y=(2*y-.5)*Math.PI,re=I=(2*(1-I)-1)*Math.PI,ge=25;const ke=1e-6;let Ie=0,ze=0;do{const Le=Math.cos(re),Ve=Math.sin(re),We=2*Ve*Le,Ze=Ve*Ve,tt=Le*Le,ot=Math.cos(ee/2),mt=Math.sin(ee/2),Et=2*ot*mt,Ft=mt*mt,Ht=1-tt*ot*ot,Nt=Ht?1/Ht:0,qt=Ht?Math.acos(Le*ot)*Math.sqrt(1/Ht):0,Jt=.5*(2*qt*Le*mt+2*ee/Math.PI)-y,Zt=.5*(qt*Ve+re)-I,Tn=.5*Nt*(tt*Ft+qt*Le*ot*Ze)+1/Math.PI,An=Nt*(Et*We/4-qt*Ve*mt),On=.125*Nt*(We*mt-qt*Ve*tt*Et),Qn=.5*Nt*(Ze*ot+qt*Ft*Le)+.5,Cn=An*On-Qn*Tn;Ie=(Zt*An-Jt*Qn)/Cn,ze=(Jt*On-Zt*Tn)/Cn,ee=Ye(ee-Ie,-Math.PI,Math.PI),re=Ye(re-ze,-A_,A_)}while((Math.abs(Ie)>ke||Math.abs(ze)>ke)&&--ge>0);return new ti(De(ee),De(re))}}class w_ extends Ql{constructor(y){super(y),this.center=y.center||[0,0],this.parallels=y.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Oe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(y,I){const{scale:ee,cosPhi:re}=this;return{x:Oe(y)*re*ee+.5,y:-Math.sin(Oe(I))/re*ee+.5,z:0}}unproject(y,I){const{scale:ee,cosPhi:re}=this,ge=-(I-.5)/ee,ke=Ye(De((y-.5)/ee)/re,-180,180),Ie=Math.asin(Ye(ge*re,-1,1)),ze=Ye(De(Ie),-85.051129,ba);return new ti(ke,ze)}}class Ug extends x_{constructor(y){super(y),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(y,I,ee){const re=Lh(y,I,ee);return Zi(re,re,Bh(vs(ee))),{x:re[0],y:re[1],z:re[2]}}locationPoint(y,I){const ee=Bd(I.lat,I.lng),re=Co([],ee),ge=y.elevation?y.elevation.getAtPointOrZero(y.locationCoordinate(I),y._centerAltitude):y._centerAltitude;vd(ee,ee,re,Lo(1,0)*kr*ge);const ke=gs(new Float64Array(16));return $u(ke,y.pixelMatrix,y.globeMatrix),Zi(ee,ee,ke),new xe(ee[0],ee[1])}pixelsPerMeter(y,I){return Lo(1,0)*I}pixelSpaceConversion(y,I,ee){const re=Wr(Lo(1,45)*I,Lo(1,y)*I,ee);return this.pixelsPerMeter(y,I)/re}createTileMatrix(y,I,ee){const re=Rp(vs(ee.canonical));return $u(new Float64Array(16),y.globeMatrix,re)}createInversionMatrix(y,I){const{center:ee}=y,re=Bh(vs(I));return yd(re,re,Oe(ee.lng)),np(re,re,Oe(ee.lat)),Gc(re,re,[y._pixelsPerMercatorPixel,y._pixelsPerMercatorPixel,1]),Float32Array.from(re)}pointCoordinate(y,I,ee,re){return d_(y,I,ee,!0)||new Xl(0,0)}pointCoordinate3D(y,I,ee){const re=this.pointCoordinate(y,I,ee,0);return[re.x,re.y,re.z]}isPointAboveHorizon(y,I){return!d_(y,I.x,I.y,!1)}farthestPixelDistance(y){const I=function(re,ge){const ke=re.cameraToCenterDistance,Ie=re._centerAltitude*ge,ze=re._camera,Le=re._camera.forward(),Ve=Yl([],Ga([],Le,-ke),[0,0,Ie]),We=re.worldSize/(2*Math.PI),Ze=[0,0,-We],tt=re.width/re.height,ot=Math.tan(re.fovAboveCenter),mt=Ga([],ze.up(),ot),Et=Ga([],ze.right(),ot*tt),Ft=Co([],Yl([],Yl([],Le,mt),Et)),Ht=[];let Nt;if(new lp(Ve,Ft).closestPointOnSphere(Ze,We,Ht)){const qt=Yl([],Ht,Ze),Jt=qa([],qt,Ve);Nt=Math.cos(re.fovAboveCenter)*bh(Jt)}else{const qt=qa([],Ve,Ze),Jt=qa([],Ze,Ve);Co(Jt,Jt);const Zt=bh(qt)-We;Nt=Math.sqrt(Zt*(Zt+2*We));const Tn=Math.acos(Nt/(We+Zt))-Math.acos(Aa(Le,Jt));Nt*=Math.cos(Tn)}return 1.01*Nt}(y,this.pixelsPerMeter(y.center.lat,y.worldSize)),ee=Fh(y.zoom);if(ee>0){const re=v_(y,Lo(1,y.center.lat)*y.worldSize),ge=y.worldSize/(2*Math.PI),ke=Math.max(y.width,y.height)/y.worldSize*Math.PI;return Wr(I,re+ge*(1-Math.cos(ke)),Math.pow(ee,10))}return I}upVector(y,I,ee){return Lh(I,ee,y,1)}upVectorScale(y){return{metersToTile:Mp*Fd(vs(y))}}}function E_($){const y=$.parallels,I=!!y&&Math.abs(y[0]+y[1])<.01;switch($.name){case"mercator":return new x_($);case"equirectangular":return new Bg($);case"naturalEarth":return new Ng($);case"equalEarth":return new Lg($);case"winkelTripel":return new jg($);case"albers":return I?new w_($):new $g($);case"lambertConformalConic":return I?new w_($):new Fg($);case"globe":return new Ug($)}throw new Error(`Invalid projection name: ${$.name}`)}const Vg=Wc.VectorTileFeature.types,Gg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ud($,y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze){const tt=Ie?Math.min(Kl,Math.round(Ie[0])):0,ot=Ie?Math.min(Kl,Math.round(Ie[1])):0;$.emplaceBack(y,I,Math.round(32*ee),Math.round(32*re),ge,ke,(tt<<1)+(ze?1:0),ot,16*Le,16*Ve,256*We,256*Ze)}function Vd($,y,I,ee,re,ge,ke){$.emplaceBack(y,I,ee,re,ge,ke)}function Gd($,y,I,ee,re){$.emplaceBack(y,I,ee,re),$.emplaceBack(y,I,ee,re),$.emplaceBack(y,I,ee,re),$.emplaceBack(y,I,ee,re)}function qg($){for(const y of $.sections)if(te(y.text))return!0;return!1}class Dp{constructor(y){this.layoutVertexArray=new ci,this.indexArray=new Dr,this.programConfigurations=y,this.segments=new Bi,this.dynamicLayoutVertexArray=new Vr,this.opacityVertexArray=new oi,this.placedSymbolArray=new Xh,this.globeExtVertexArray=new Ai}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(y,I,ee,re){this.isEmpty()||(ee&&(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Wm.members),this.indexBuffer=y.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=y.createVertexBuffer(this.dynamicLayoutVertexArray,Xm.members,!0),this.opacityVertexBuffer=y.createVertexBuffer(this.opacityVertexArray,Gg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,Zm.members,!0)),this.opacityVertexBuffer.itemSize=1),(ee||re)&&this.programConfigurations.upload(y))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}ur(Dp,"SymbolBuffers");class zp{constructor(y,I,ee){this.layoutVertexArray=new y,this.layoutAttributes=I,this.indexArray=new ee,this.segments=new Bi,this.collisionVertexArray=new _i,this.collisionVertexArrayExt=new vi}upload(y){this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=y.createVertexBuffer(this.collisionVertexArray,Ym.members,!0),this.collisionVertexBufferExt=y.createVertexBuffer(this.collisionVertexArrayExt,Km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ur(zp,"CollisionBuffers");class Jl{constructor(y){this.collisionBoxArray=y.collisionBoxArray,this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(ke=>ke.id),this.index=y.index,this.pixelRatio=y.pixelRatio,this.sourceLayerIndex=y.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gs([]),this.placementViewportMatrix=gs([]);const I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vp(this.zoom,I["text-size"]),this.iconSizeData=vp(this.zoom,I["icon-size"]);const ee=this.layers[0].layout,re=ee.get("symbol-sort-key"),ge=ee.get("symbol-z-order");this.canOverlap=ee.get("text-allow-overlap")||ee.get("icon-allow-overlap")||ee.get("text-ignore-placement")||ee.get("icon-ignore-placement"),this.sortFeaturesByKey=ge!=="viewport-y"&&re.constantOr(1)!==void 0,this.sortFeaturesByY=(ge==="viewport-y"||ge==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=ee.get("text-writing-mode").map(ke=>sa[ke]),this.stateDependentLayerIds=this.layers.filter(ke=>ke.isStateDependent()).map(ke=>ke.id),this.sourceID=y.sourceID,this.projection=y.projection}createArrays(){this.text=new Dp(new al(this.layers,this.zoom,y=>/^text/.test(y))),this.icon=new Dp(new al(this.layers,this.zoom,y=>/^icon/.test(y))),this.glyphOffsetArray=new ph,this.lineVertexArray=new Qh,this.symbolInstances=new Kh}calculateGlyphDependencies(y,I,ee,re,ge){for(let ke=0;ke<y.length;ke++)if(I[y.charCodeAt(ke)]=!0,re&&ge){const Ie=Oh[y.charAt(ke)];Ie&&(I[Ie.charCodeAt(0)]=!0)}}populate(y,I,ee,re){const ge=this.layers[0],ke=ge.layout,Ie=this.projection.name==="globe",ze=ke.get("text-font"),Le=ke.get("text-field"),Ve=ke.get("icon-image"),We=(Le.value.kind!=="constant"||Le.value.value instanceof ao&&!Le.value.value.isEmpty()||Le.value.value.toString().length>0)&&(ze.value.kind!=="constant"||ze.value.value.length>0),Ze=Ve.value.kind!=="constant"||!!Ve.value.value||Object.keys(Ve.parameters).length>0,tt=ke.get("symbol-sort-key");if(this.features=[],!We&&!Ze)return;const ot=I.iconDependencies,mt=I.glyphDependencies,Et=I.availableImages,Ft=new Tt(this.zoom);for(const{feature:Ht,id:Nt,index:qt,sourceLayerIndex:Jt}of y){const Zt=ge._featureFilter.needGeometry,Tn=Ge(Ht,Zt);if(!ge._featureFilter.filter(Ft,Tn,ee))continue;if(Zt||(Tn.geometry=vt(Ht,ee,re)),Ie&&Ht.type!==1&&ee.z<=5){const Cn=Tn.geometry,Bn=.98078528056;for(let Vn=0;Vn<Cn.length;Vn++)Cn[Vn]=fd(Cn[Vn],Fn=>Fn,(Fn,Xn)=>Aa(Lh(Fn.x,Fn.y,ee,1),Lh(Xn.x,Xn.y,ee,1))<Bn)}let An,On;if(We){const Cn=ge.getValueAndResolveTokens("text-field",Tn,ee,Et),Bn=ao.factory(Cn);qg(Bn)&&(this.hasRTLText=!0),(!this.hasRTLText||gt()==="unavailable"||this.hasRTLText&&kt.isParsed())&&(An=eg(Bn,ge,Tn))}if(Ze){const Cn=ge.getValueAndResolveTokens("icon-image",Tn,ee,Et);On=Cn instanceof so?Cn:so.fromString(Cn)}if(!An&&!On)continue;const Qn=this.sortFeaturesByKey?tt.evaluate(Tn,{},ee):void 0;if(this.features.push({id:Nt,text:An,icon:On,index:qt,sourceLayerIndex:Jt,geometry:Tn.geometry,properties:Ht.properties,type:Vg[Ht.type],sortKey:Qn}),On&&(ot[On.name]=!0),An){const Cn=ze.evaluate(Tn,{},ee).join(","),Bn=ke.get("text-rotation-alignment")==="map"&&ke.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(sa.vertical)>=0;for(const Vn of An.sections)if(Vn.image)ot[Vn.image.name]=!0;else{const Fn=rl(An.toString()),Xn=Vn.fontStack||Cn,Gn=mt[Xn]=mt[Xn]||{};this.calculateGlyphDependencies(Vn.text,Gn,Bn,this.allowVerticalPlacement,Fn)}}}ke.get("symbol-placement")==="line"&&(this.features=function(Ht){const Nt={},qt={},Jt=[];let Zt=0;function Tn(Cn){Jt.push(Ht[Cn]),Zt++}function An(Cn,Bn,Vn){const Fn=qt[Cn];return delete qt[Cn],qt[Bn]=Fn,Jt[Fn].geometry[0].pop(),Jt[Fn].geometry[0]=Jt[Fn].geometry[0].concat(Vn[0]),Fn}function On(Cn,Bn,Vn){const Fn=Nt[Bn];return delete Nt[Bn],Nt[Cn]=Fn,Jt[Fn].geometry[0].shift(),Jt[Fn].geometry[0]=Vn[0].concat(Jt[Fn].geometry[0]),Fn}function Qn(Cn,Bn,Vn){const Fn=Vn?Bn[0][Bn[0].length-1]:Bn[0][0];return`${Cn}:${Fn.x}:${Fn.y}`}for(let Cn=0;Cn<Ht.length;Cn++){const Bn=Ht[Cn],Vn=Bn.geometry,Fn=Bn.text?Bn.text.toString():null;if(!Fn){Tn(Cn);continue}const Xn=Qn(Fn,Vn),Gn=Qn(Fn,Vn,!0);if(Xn in qt&&Gn in Nt&&qt[Xn]!==Nt[Gn]){const ar=On(Xn,Gn,Vn),Rr=An(Xn,Gn,Jt[ar].geometry);delete Nt[Xn],delete qt[Gn],qt[Qn(Fn,Jt[Rr].geometry,!0)]=Rr,Jt[ar].geometry=null}else Xn in qt?An(Xn,Gn,Vn):Gn in Nt?On(Xn,Gn,Vn):(Tn(Cn),Nt[Xn]=Zt-1,qt[Gn]=Zt-1)}return Jt.filter(Cn=>Cn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ht,Nt)=>Ht.sortKey-Nt.sortKey)}update(y,I,ee,re){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(y,I,this.layers,ee,re),this.icon.programConfigurations.updatePaintArrays(y,I,this.layers,ee,re))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(y){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(y),this.iconCollisionBox.upload(y)),this.text.upload(y,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(y,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=E_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(y,I){const ee=this.lineVertexArray.length,re=y.segment;if(re!==void 0){let ge=y.dist(I[re+1]),ke=y.dist(I[re]);const Ie={};for(let ze=re+1;ze<I.length;ze++)Ie[ze]={x:I[ze].x,y:I[ze].y,tileUnitDistanceFromAnchor:ge},ze<I.length-1&&(ge+=I[ze+1].dist(I[ze]));for(let ze=re||0;ze>=0;ze--)Ie[ze]={x:I[ze].x,y:I[ze].y,tileUnitDistanceFromAnchor:ke},ze>0&&(ke+=I[ze-1].dist(I[ze]));for(let ze=0;ze<I.length;ze++){const Le=Ie[ze];this.lineVertexArray.emplaceBack(Le.x,Le.y,Le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ee,lineLength:this.lineVertexArray.length-ee}}addSymbols(y,I,ee,re,ge,ke,Ie,ze,Le,Ve,We,Ze,tt,ot){const mt=y.indexArray,Et=y.layoutVertexArray,Ft=y.globeExtVertexArray,Ht=y.segments.prepareSegment(4*I.length,Et,mt,this.canOverlap?ke.sortKey:void 0),Nt=this.glyphOffsetArray.length,qt=Ht.vertexLength,Jt=this.allowVerticalPlacement&&Ie===sa.vertical?Math.PI/2:0,Zt=ke.text&&ke.text.sections;for(let An=0;An<I.length;An++){const{tl:On,tr:Qn,bl:Cn,br:Bn,tex:Vn,pixelOffsetTL:Fn,pixelOffsetBR:Xn,minFontScaleX:Gn,minFontScaleY:ar,glyphOffset:Rr,isSDF:zr,sectionIndex:vr}=I[An],rr=Ht.vertexLength,qr=Rr[1];if(Ud(Et,Le.x,Le.y,On.x,qr+On.y,Vn.x,Vn.y,ee,zr,Fn.x,Fn.y,Gn,ar),Ud(Et,Le.x,Le.y,Qn.x,qr+Qn.y,Vn.x+Vn.w,Vn.y,ee,zr,Xn.x,Fn.y,Gn,ar),Ud(Et,Le.x,Le.y,Cn.x,qr+Cn.y,Vn.x,Vn.y+Vn.h,ee,zr,Fn.x,Xn.y,Gn,ar),Ud(Et,Le.x,Le.y,Bn.x,qr+Bn.y,Vn.x+Vn.w,Vn.y+Vn.h,ee,zr,Xn.x,Xn.y,Gn,ar),ze){const Mr=ze.anchor,dr=ze.up;Vd(Ft,Mr.x,Mr.y,Mr.z,dr[0],dr[1],dr[2]),Vd(Ft,Mr.x,Mr.y,Mr.z,dr[0],dr[1],dr[2]),Vd(Ft,Mr.x,Mr.y,Mr.z,dr[0],dr[1],dr[2]),Vd(Ft,Mr.x,Mr.y,Mr.z,dr[0],dr[1],dr[2]),Gd(y.dynamicLayoutVertexArray,Mr.x,Mr.y,Mr.z,Jt)}else Gd(y.dynamicLayoutVertexArray,Le.x,Le.y,Le.z,Jt);mt.emplaceBack(rr,rr+1,rr+2),mt.emplaceBack(rr+1,rr+2,rr+3),Ht.vertexLength+=4,Ht.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Rr[0]),An!==I.length-1&&vr===I[An+1].sectionIndex||y.programConfigurations.populatePaintArrays(Et.length,ke,ke.index,{},tt,ot,Zt&&Zt[vr])}const Tn=ze?ze.anchor:Le;y.placedSymbolArray.emplaceBack(Tn.x,Tn.y,Tn.z,Le.x,Le.y,Nt,this.glyphOffsetArray.length-Nt,qt,Ve,We,Le.segment,ee?ee[0]:0,ee?ee[1]:0,re[0],re[1],Ie,0,!1,0,Ze,0)}_commitLayoutVertex(y,I,ee,re,ge,ke,Ie){y.emplaceBack(I,ee,re,ge,ke,Math.round(Ie.x),Math.round(Ie.y))}_addCollisionDebugVertices(y,I,ee,re,ge,ke,Ie){const ze=ee.segments.prepareSegment(4,ee.layoutVertexArray,ee.indexArray),Le=ze.vertexLength,Ve=Ie.tileAnchorX,We=Ie.tileAnchorY;for(let tt=0;tt<4;tt++)ee.collisionVertexArray.emplaceBack(0,0,0,0);ee.collisionVertexArrayExt.emplaceBack(I,-y.padding,-y.padding),ee.collisionVertexArrayExt.emplaceBack(I,y.padding,-y.padding),ee.collisionVertexArrayExt.emplaceBack(I,y.padding,y.padding),ee.collisionVertexArrayExt.emplaceBack(I,-y.padding,y.padding),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x1,y.y1)),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x2,y.y1)),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x2,y.y2)),this._commitLayoutVertex(ee.layoutVertexArray,re,ge,ke,Ve,We,new xe(y.x1,y.y2)),ze.vertexLength+=4;const Ze=ee.indexArray;Ze.emplaceBack(Le,Le+1),Ze.emplaceBack(Le+1,Le+2),Ze.emplaceBack(Le+2,Le+3),Ze.emplaceBack(Le+3,Le),ze.primitiveLength+=4}_addTextDebugCollisionBoxes(y,I,ee,re,ge,ke){for(let Ie=re;Ie<ge;Ie++){const ze=ee.get(Ie),Le=this.getSymbolInstanceTextSize(y,ke,I,Ie);this._addCollisionDebugVertices(ze,Le,this.textCollisionBox,ze.projectedAnchorX,ze.projectedAnchorY,ze.projectedAnchorZ,ke)}}_addIconDebugCollisionBoxes(y,I,ee,re,ge,ke){for(let Ie=re;Ie<ge;Ie++){const ze=ee.get(Ie),Le=this.getSymbolInstanceIconSize(y,I,Ie);this._addCollisionDebugVertices(ze,Le,this.iconCollisionBox,ze.projectedAnchorX,ze.projectedAnchorY,ze.projectedAnchorZ,ke)}}generateCollisionDebugBuffers(y,I){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new zp(Eo,Lf.members,to),this.iconCollisionBox=new zp(Eo,Lf.members,to);const ee=Nu(this.iconSizeData,y),re=Nu(this.textSizeData,y);for(let ge=0;ge<this.symbolInstances.length;ge++){const ke=this.symbolInstances.get(ge);this._addTextDebugCollisionBoxes(re,y,I,ke.textBoxStartIndex,ke.textBoxEndIndex,ke),this._addTextDebugCollisionBoxes(re,y,I,ke.verticalTextBoxStartIndex,ke.verticalTextBoxEndIndex,ke),this._addIconDebugCollisionBoxes(ee,y,I,ke.iconBoxStartIndex,ke.iconBoxEndIndex,ke),this._addIconDebugCollisionBoxes(ee,y,I,ke.verticalIconBoxStartIndex,ke.verticalIconBoxEndIndex,ke)}}getSymbolInstanceTextSize(y,I,ee,re){const ge=this.text.placedSymbolArray.get(I.rightJustifiedTextSymbolIndex>=0?I.rightJustifiedTextSymbolIndex:I.centerJustifiedTextSymbolIndex>=0?I.centerJustifiedTextSymbolIndex:I.leftJustifiedTextSymbolIndex>=0?I.leftJustifiedTextSymbolIndex:I.verticalPlacedTextSymbolIndex>=0?I.verticalPlacedTextSymbolIndex:re),ke=Md(this.textSizeData,y,ge)/ho;return this.tilePixelRatio*ke}getSymbolInstanceIconSize(y,I,ee){const re=this.icon.placedSymbolArray.get(ee),ge=Md(this.iconSizeData,y,re);return this.tilePixelRatio*ge}_commitDebugCollisionVertexUpdate(y,I,ee){y.emplaceBack(I,-ee,-ee),y.emplaceBack(I,ee,-ee),y.emplaceBack(I,ee,ee),y.emplaceBack(I,-ee,ee)}_updateTextDebugCollisionBoxes(y,I,ee,re,ge,ke){for(let Ie=re;Ie<ge;Ie++){const ze=ee.get(Ie),Le=this.getSymbolInstanceTextSize(y,ke,I,Ie);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,Le,ze.padding)}}_updateIconDebugCollisionBoxes(y,I,ee,re,ge){for(let ke=re;ke<ge;ke++){const Ie=ee.get(ke),ze=this.getSymbolInstanceIconSize(y,I,ke);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,ze,Ie.padding)}}updateCollisionDebugBuffers(y,I){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const ee=Nu(this.iconSizeData,y),re=Nu(this.textSizeData,y);for(let ge=0;ge<this.symbolInstances.length;ge++){const ke=this.symbolInstances.get(ge);this._updateTextDebugCollisionBoxes(re,y,I,ke.textBoxStartIndex,ke.textBoxEndIndex,ke),this._updateTextDebugCollisionBoxes(re,y,I,ke.verticalTextBoxStartIndex,ke.verticalTextBoxEndIndex,ke),this._updateIconDebugCollisionBoxes(ee,y,I,ke.iconBoxStartIndex,ke.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(ee,y,I,ke.verticalIconBoxStartIndex,ke.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(y,I,ee,re,ge,ke,Ie,ze,Le){const Ve={};for(let We=I;We<ee;We++){const Ze=y.get(We);Ve.textBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.textFeatureIndex=Ze.featureIndex;break}for(let We=re;We<ge;We++){const Ze=y.get(We);Ve.verticalTextBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.verticalTextFeatureIndex=Ze.featureIndex;break}for(let We=ke;We<Ie;We++){const Ze=y.get(We);Ve.iconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.iconFeatureIndex=Ze.featureIndex;break}for(let We=ze;We<Le;We++){const Ze=y.get(We);Ve.verticalIconBox={x1:Ze.x1,y1:Ze.y1,x2:Ze.x2,y2:Ze.y2,padding:Ze.padding,projectedAnchorX:Ze.projectedAnchorX,projectedAnchorY:Ze.projectedAnchorY,projectedAnchorZ:Ze.projectedAnchorZ,tileAnchorX:Ze.tileAnchorX,tileAnchorY:Ze.tileAnchorY},Ve.verticalIconFeatureIndex=Ze.featureIndex;break}return Ve}deserializeCollisionBoxes(y){this.collisionArrays=[];for(let I=0;I<this.symbolInstances.length;I++){const ee=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(y,ee.textBoxStartIndex,ee.textBoxEndIndex,ee.verticalTextBoxStartIndex,ee.verticalTextBoxEndIndex,ee.iconBoxStartIndex,ee.iconBoxEndIndex,ee.verticalIconBoxStartIndex,ee.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(y,I){const ee=y.placedSymbolArray.get(I),re=ee.vertexStartIndex+4*ee.numGlyphs;for(let ge=ee.vertexStartIndex;ge<re;ge+=4)y.indexArray.emplaceBack(ge,ge+1,ge+2),y.indexArray.emplaceBack(ge+1,ge+2,ge+3)}getSortedSymbolIndexes(y){if(this.sortedAngle===y&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const I=Math.sin(y),ee=Math.cos(y),re=[],ge=[],ke=[];for(let Ie=0;Ie<this.symbolInstances.length;++Ie){ke.push(Ie);const ze=this.symbolInstances.get(Ie);re.push(0|Math.round(I*ze.tileAnchorX+ee*ze.tileAnchorY)),ge.push(ze.featureIndex)}return ke.sort((Ie,ze)=>re[Ie]-re[ze]||ge[ze]-ge[Ie]),ke}addToSortKeyRanges(y,I){const ee=this.sortKeyRanges[this.sortKeyRanges.length-1];ee&&ee.sortKey===I?ee.symbolInstanceEnd=y+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:y,symbolInstanceEnd:y+1})}sortFeatures(y){if(this.sortFeaturesByY&&this.sortedAngle!==y&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(y),this.sortedAngle=y,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const I of this.symbolInstanceIndexes){const ee=this.symbolInstances.get(I);this.featureSortOrder.push(ee.featureIndex),[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach((re,ge,ke)=>{re>=0&&ke.indexOf(re)===ge&&this.addIndicesForPlacedSymbol(this.text,re)}),ee.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ee.verticalPlacedTextSymbolIndex),ee.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ee.placedIconSymbolIndex),ee.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ee.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ur(Jl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Jl.MAX_GLYPHS=65535,Jl.addDynamicAttributes=Gd;const Hg=new Dn({"symbol-placement":new Wt(gn.layout_symbol["symbol-placement"]),"symbol-spacing":new Wt(gn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wt(gn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(gn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wt(gn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wt(gn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wt(gn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wt(gn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wt(gn.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(gn.layout_symbol["icon-size"]),"icon-text-fit":new Wt(gn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wt(gn.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(gn.layout_symbol["icon-image"]),"icon-rotate":new sn(gn.layout_symbol["icon-rotate"]),"icon-padding":new Wt(gn.layout_symbol["icon-padding"]),"icon-keep-upright":new Wt(gn.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(gn.layout_symbol["icon-offset"]),"icon-anchor":new sn(gn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wt(gn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wt(gn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wt(gn.layout_symbol["text-rotation-alignment"]),"text-field":new sn(gn.layout_symbol["text-field"]),"text-font":new sn(gn.layout_symbol["text-font"]),"text-size":new sn(gn.layout_symbol["text-size"]),"text-max-width":new sn(gn.layout_symbol["text-max-width"]),"text-line-height":new sn(gn.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(gn.layout_symbol["text-letter-spacing"]),"text-justify":new sn(gn.layout_symbol["text-justify"]),"text-radial-offset":new sn(gn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wt(gn.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(gn.layout_symbol["text-anchor"]),"text-max-angle":new Wt(gn.layout_symbol["text-max-angle"]),"text-writing-mode":new Wt(gn.layout_symbol["text-writing-mode"]),"text-rotate":new sn(gn.layout_symbol["text-rotate"]),"text-padding":new Wt(gn.layout_symbol["text-padding"]),"text-keep-upright":new Wt(gn.layout_symbol["text-keep-upright"]),"text-transform":new sn(gn.layout_symbol["text-transform"]),"text-offset":new sn(gn.layout_symbol["text-offset"]),"text-allow-overlap":new Wt(gn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wt(gn.layout_symbol["text-ignore-placement"]),"text-optional":new Wt(gn.layout_symbol["text-optional"])});var $p={paint:new Dn({"icon-opacity":new sn(gn.paint_symbol["icon-opacity"]),"icon-color":new sn(gn.paint_symbol["icon-color"]),"icon-halo-color":new sn(gn.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(gn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(gn.paint_symbol["icon-halo-blur"]),"icon-translate":new Wt(gn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wt(gn.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(gn.paint_symbol["text-opacity"]),"text-color":new sn(gn.paint_symbol["text-color"],{runtimeType:Oo,getOverride:$=>$.textColor,hasOverride:$=>!!$.textColor}),"text-halo-color":new sn(gn.paint_symbol["text-halo-color"]),"text-halo-width":new sn(gn.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(gn.paint_symbol["text-halo-blur"]),"text-translate":new Wt(gn.paint_symbol["text-translate"]),"text-translate-anchor":new Wt(gn.paint_symbol["text-translate-anchor"])}),layout:Hg};class T_{constructor(y){this.type=y.property.overrides?y.property.overrides.runtimeType:ua,this.defaultValue=y}evaluate(y){if(y.formattedSection){const I=this.defaultValue.property.overrides;if(I&&I.hasOverride(y.formattedSection))return I.getOverride(y.formattedSection)}return y.feature&&y.featureState?this.defaultValue.evaluate(y.feature,y.featureState):this.defaultValue.property.specification.default}eachChild(y){this.defaultValue.isConstant()||y(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ur(T_,"FormatSectionOverride",{omit:["defaultValue"]});class qd extends Vi{constructor(y){super(y,$p)}recalculate(y,I){super.recalculate(y,I),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const ee=this.layout.get("text-writing-mode");if(ee){const re=[];for(const ge of ee)re.indexOf(ge)<0&&re.push(ge);this.layout._values["text-writing-mode"]=re}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(y,I,ee,re){const ge=this.layout.get(y).evaluate(I,{},ee,re),ke=this._unevaluatedLayout._values[y];return ke.isDataDriven()||Rl(ke.value)||!ge?ge:function(Ie,ze){return ze.replace(/{([^{}]+)}/g,(Le,Ve)=>Ve in Ie?String(Ie[Ve]):"")}(I.properties,ge)}createBucket(y){return new Jl(y)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const y of $p.paint.overridableProperties){if(!qd.hasPaintOverride(this.layout,y))continue;const I=this.paint.get(y),ee=new T_(I),re=new Ec(ee,I.property.specification);let ge=null;ge=I.value.kind==="constant"||I.value.kind==="source"?new Tc("source",re):new Hs("composite",re,I.value.zoomStops,I.value._interpolationType),this.paint._values[y]=new Gt(I.property,ge,I.parameters)}}_handleOverridablePaintPropertyUpdate(y,I,ee){return!(!this.layout||I.isDataDriven()||ee.isDataDriven())&&qd.hasPaintOverride(this.layout,y)}static hasPaintOverride(y,I){const ee=y.get("text-field"),re=$p.paint.properties[I];let ge=!1;const ke=Ie=>{for(const ze of Ie)if(re.overrides&&re.overrides.hasOverride(ze))return void(ge=!0)};if(ee.value.kind==="constant"&&ee.value.value instanceof ao)ke(ee.value.value.sections);else if(ee.value.kind==="source"){const Ie=Le=>{ge||(Le instanceof Ms&&Oi(Le.value)===ha?ke(Le.value.sections):Le instanceof Rs?ke(Le.sections):Le.eachChild(Ie))},ze=ee.value;ze._styleExpression&&Ie(ze._styleExpression.expression)}return ge}getProgramConfiguration(y){return new _s(this,y)}}var Wg={paint:new Dn({"background-color":new Wt(gn.paint_background["background-color"]),"background-pattern":new Wn(gn.paint_background["background-pattern"]),"background-opacity":new Wt(gn.paint_background["background-opacity"])})},Zg={paint:new Dn({"raster-opacity":new Wt(gn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wt(gn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wt(gn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wt(gn.paint_raster["raster-brightness-max"]),"raster-saturation":new Wt(gn.paint_raster["raster-saturation"]),"raster-contrast":new Wt(gn.paint_raster["raster-contrast"]),"raster-resampling":new Wt(gn.paint_raster["raster-resampling"]),"raster-fade-duration":new Wt(gn.paint_raster["raster-fade-duration"])})};class Xg extends Vi{constructor(y){super(y,{}),this.implementation=y}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(y){this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)}onRemove(y){this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)}}var Yg={paint:new Dn({"sky-type":new Wt(gn.paint_sky["sky-type"]),"sky-atmosphere-sun":new Wt(gn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Wt(gn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Wt(gn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Wt(gn.paint_sky["sky-gradient-radius"]),"sky-gradient":new pn(gn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Wt(gn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Wt(gn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Wt(gn.paint_sky["sky-opacity"])})};function Lp($,y,I){const ee=[0,0,1],re=af([]);return lf(re,re,I?-Oe($)+Math.PI:Oe($)),sf(re,re,-Oe(y)),nf(ee,ee,re),Co(ee,ee)}const Kg={circle:class extends Vi{constructor($){super($,tm)}createBucket($){return new jt($)}queryRadius($){const y=$;return Gi("circle-radius",this,y)+Gi("circle-stroke-width",this,y)+uo(this.paint.get("circle-translate"))}queryIntersectsFeature($,y,I,ee,re,ge,ke,Ie){const ze=_d(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),Le=this.paint.get("circle-radius").evaluate(y,I)+this.paint.get("circle-stroke-width").evaluate(y,I);return cf($,ee,ge,ke,Ie,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",ze,Le)}getProgramIds(){return["circle"]}getProgramConfiguration($){return new _s(this,$)}},heatmap:class extends Vi{createBucket($){return new hf($)}constructor($){super($,lm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate($){$==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius($){return Gi("heatmap-radius",this,$)}queryIntersectsFeature($,y,I,ee,re,ge,ke,Ie){const ze=this.paint.get("heatmap-radius").evaluate(y,I);return cf($,ee,ge,ke,Ie,!0,!0,new xe(0,0),ze)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration($){return new _s(this,$)}},hillshade:class extends Vi{constructor($){super($,cm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Vi{constructor($){super($,km)}getProgramIds(){const $=this.paint.get("fill-pattern"),y=$&&$.constantOr(1),I=[y?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&I.push(y&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),I}getProgramConfiguration($){return new _s(this,$)}recalculate($,y){super.recalculate($,y);const I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket($){return new Td($)}queryRadius(){return uo(this.paint.get("fill-translate"))}queryIntersectsFeature($,y,I,ee,re,ge){return!$.queryGeometry.isAboveHorizon&&Un(ms($.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),ee)}isTileClipped(){return!0}},"fill-extrusion":class extends Vi{constructor($){super($,Fm)}createBucket($){return new Ih($)}queryRadius(){return uo(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration($){return new _s(this,$)}queryIntersectsFeature($,y,I,ee,re,ge,ke,Ie,ze){const Le=_d(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),Ve=this.paint.get("fill-extrusion-height").evaluate(y,I),We=this.paint.get("fill-extrusion-base").evaluate(y,I),Ze=[0,0],tt=Ie&&ge.elevation,ot=ge.elevation?ge.elevation.exaggeration():1,mt=$.tile.getBucket(this);if(tt&&mt instanceof Ih){const Ht=mt.centroidVertexArray,Nt=ze+1;if(Nt<Ht.length){const qt=Ht.get(Nt);Ze[0]=qt.a_centroid_pos0,Ze[1]=qt.a_centroid_pos1}}if(Ze[0]===0&&Ze[1]===1)return!1;ge.projection.name==="globe"&&(ee=If([ee],[new xe(0,0),new xe(kr,kr)],$.tileID.canonical).map(Ht=>Ht.polygon).flat());const Et=function(Ht,Nt,qt,Jt,Zt,Tn,An,On,Qn,Cn,Bn){return Ht.projection.name==="globe"?function(Vn,Fn,Xn,Gn,ar,Rr,zr,vr,rr,qr,Mr){const dr=[],gi=[],di=Vn.projection.upVectorScale(Mr,Vn.center.lat,Vn.worldSize).metersToTile,Ci=[0,0,0,1],jr=[0,0,0,1],Qr=(pi,hi,Ei,Mi)=>{pi[0]=hi,pi[1]=Ei,pi[2]=Mi,pi[3]=1},yi=Sf();Xn>0&&(Xn+=yi),Gn+=yi;for(const pi of Fn){const hi=[],Ei=[];for(const Mi of pi){const ro=Mi.x+ar.x,Fo=Mi.y+ar.y,Xr=Vn.projection.projectTilePoint(ro,Fo,Mr),$i=Vn.projection.upVector(Mr,Mi.x,Mi.y);let yo=Xn,ri=Gn;if(zr){const Pi=Rf(ro,Fo,Xn,Gn,zr,vr,rr,qr);yo+=Pi.base,ri+=Pi.top}Xn!==0?Qr(Ci,Xr.x+$i[0]*di*yo,Xr.y+$i[1]*di*yo,Xr.z+$i[2]*di*yo):Qr(Ci,Xr.x,Xr.y,Xr.z),Qr(jr,Xr.x+$i[0]*di*ri,Xr.y+$i[1]*di*ri,Xr.z+$i[2]*di*ri),Zi(Ci,Ci,Rr),Zi(jr,jr,Rr),hi.push(Sd(Ci)),Ei.push(Sd(jr))}dr.push(hi),gi.push(Ei)}return[dr,gi]}(Ht,Nt,qt,Jt,Zt,Tn,An,On,Qn,Cn,Bn):An?function(Vn,Fn,Xn,Gn,ar,Rr,zr,vr,rr){const qr=[],Mr=[],dr=[0,0,0,1];for(const gi of Vn){const di=[],Ci=[];for(const jr of gi){const Qr=jr.x+Gn.x,yi=jr.y+Gn.y,pi=Rf(Qr,yi,Fn,Xn,Rr,zr,vr,rr);dr[0]=Qr,dr[1]=yi,dr[2]=pi.base,dr[3]=1,qc(dr,dr,ar),dr[3]=Math.max(dr[3],1e-5);const hi=Sd([dr[0]/dr[3],dr[1]/dr[3],dr[2]/dr[3]]);dr[0]=Qr,dr[1]=yi,dr[2]=pi.top,dr[3]=1,qc(dr,dr,ar),dr[3]=Math.max(dr[3],1e-5);const Ei=Sd([dr[0]/dr[3],dr[1]/dr[3],dr[2]/dr[3]]);di.push(hi),Ci.push(Ei)}qr.push(di),Mr.push(Ci)}return[qr,Mr]}(Nt,qt,Jt,Zt,Tn,An,On,Qn,Cn):function(Vn,Fn,Xn,Gn,ar){const Rr=[],zr=[],vr=ar[8]*Fn,rr=ar[9]*Fn,qr=ar[10]*Fn,Mr=ar[11]*Fn,dr=ar[8]*Xn,gi=ar[9]*Xn,di=ar[10]*Xn,Ci=ar[11]*Xn;for(const jr of Vn){const Qr=[],yi=[];for(const pi of jr){const hi=pi.x+Gn.x,Ei=pi.y+Gn.y,Mi=ar[0]*hi+ar[4]*Ei+ar[12],ro=ar[1]*hi+ar[5]*Ei+ar[13],Fo=ar[2]*hi+ar[6]*Ei+ar[14],Xr=ar[3]*hi+ar[7]*Ei+ar[15],$i=Mi+vr,yo=ro+rr,ri=Fo+qr,Pi=Math.max(Xr+Mr,1e-5),Io=Mi+dr,Si=ro+gi,Ni=Fo+di,io=Math.max(Xr+Ci,1e-5),eo=new xe($i/Pi,yo/Pi);eo.z=ri/Pi,Qr.push(eo);const po=new xe(Io/io,Si/io);po.z=Ni/io,yi.push(po)}Rr.push(Qr),zr.push(yi)}return[Rr,zr]}(Nt,qt,Jt,Zt,Tn)}(ge,ee,We,Ve,Le,ke,tt?Ie:null,Ze,ot,ge.center.lat,$.tileID.canonical),Ft=$.queryGeometry;return function(Ht,Nt,qt){let Jt=1/0;Un(qt,Nt)&&(Jt=Of(qt,Nt[0]));for(let Zt=0;Zt<Nt.length;Zt++){const Tn=Nt[Zt],An=Ht[Zt];for(let On=0;On<Tn.length-1;On++){const Qn=Tn[On],Cn=[Qn,Tn[On+1],An[On+1],An[On],Qn];cn(qt,Cn)&&(Jt=Math.min(Jt,Of(qt,Cn)))}}return Jt!==1/0&&Jt}(Et[0],Et[1],Ft.isPointQuery()?Ft.screenBounds:Ft.screenGeometry)}},line:class extends Vi{constructor($){super($,Df),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate($){if($==="line-gradient"){const y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=y._styleExpression&&y._styleExpression.expression instanceof dc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate($,y){super.recalculate($,y),this.paint._values["line-floorwidth"]=zf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)}createBucket($){return new Id($)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration($){return new _s(this,$)}queryRadius($){const y=$,I=$f(Gi("line-width",this,y),Gi("line-gap-width",this,y)),ee=Gi("line-offset",this,y);return I/2+Math.abs(ee)+uo(this.paint.get("line-translate"))}queryIntersectsFeature($,y,I,ee,re,ge){if($.queryGeometry.isAboveHorizon)return!1;const ke=ms($.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ge.angle,$.pixelToTileUnitsFactor),Ie=$.pixelToTileUnitsFactor/2*$f(this.paint.get("line-width").evaluate(y,I),this.paint.get("line-gap-width").evaluate(y,I)),ze=this.paint.get("line-offset").evaluate(y,I);return ze&&(ee=function(Le,Ve){const We=[],Ze=new xe(0,0);for(let tt=0;tt<Le.length;tt++){const ot=Le[tt],mt=[];for(let Et=0;Et<ot.length;Et++){const Ft=ot[Et-1],Ht=ot[Et],Nt=ot[Et+1],qt=Et===0?Ze:Ht.sub(Ft)._unit()._perp(),Jt=Et===ot.length-1?Ze:Nt.sub(Ht)._unit()._perp(),Zt=qt._add(Jt)._unit();Zt._mult(1/(Zt.x*Jt.x+Zt.y*Jt.y)),mt.push(Zt._mult(Ve)._add(Ht))}We.push(mt)}return We}(ee,ze*$.pixelToTileUnitsFactor)),function(Le,Ve,We){for(let Ze=0;Ze<Ve.length;Ze++){const tt=Ve[Ze];if(Le.length>=3){for(let ot=0;ot<tt.length;ot++)if(li(Le,tt[ot]))return!0}if(hr(Le,tt,We))return!0}return!1}(ke,ee,Ie)}isTileClipped(){return!0}},symbol:qd,background:class extends Vi{constructor($){super($,Wg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Vi{constructor($){super($,Zg)}getProgramIds(){return["raster"]}},sky:class extends Vi{constructor($){super($,Yg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate($){$==="sky-gradient"?this._updateColorRamp():$!=="sky-atmosphere-sun"&&$!=="sky-atmosphere-halo-color"&&$!=="sky-atmosphere-color"&&$!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=dp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture($){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const y=$.style.light.properties.get("position");return this._lightPosition.azimuthal!==y.azimuthal||this._lightPosition.polar!==y.polar}return!1}getCenter($,y){if(this.paint.get("sky-type")==="atmosphere"){const ee=this.paint.get("sky-atmosphere-sun"),re=!ee,ge=$.style.light,ke=ge.properties.get("position");return re&&ge.properties.get("anchor")==="viewport"&&$t("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),re?Lp(ke.azimuthal,90-ke.polar,y):Lp(ee[0],90-ee[1],y)}const I=this.paint.get("sky-gradient-center");return Lp(I[0],90-I[1],y)}is3D(){return!1}isSky(){return!0}markSkyboxValid($){this._skyboxInvalidated=!1,this._lightPosition=$.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const $=this.paint.get("sky-type");return $==="atmosphere"?["skyboxCapture","skybox"]:$==="gradient"?["skyboxGradient"]:null}}};class Gh{constructor(y,I,ee,re){this.context=y,this.format=ee,this.texture=y.gl.createTexture(),this.update(I,re)}update(y,I,ee){const{width:re,height:ge}=y,{context:ke}=this,{gl:Ie}=ke,{HTMLImageElement:ze,HTMLCanvasElement:Le,HTMLVideoElement:Ve,ImageData:We,ImageBitmap:Ze}=be;if(Ie.bindTexture(Ie.TEXTURE_2D,this.texture),ke.pixelStoreUnpackFlipY.set(!1),ke.pixelStoreUnpack.set(1),ke.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ie.RGBA&&(!I||I.premultiply!==!1)),ee||this.size&&this.size[0]===re&&this.size[1]===ge){const{x:tt,y:ot}=ee||{x:0,y:0};y instanceof ze||y instanceof Le||y instanceof Ve||y instanceof We||Ze&&y instanceof Ze?Ie.texSubImage2D(Ie.TEXTURE_2D,0,tt,ot,Ie.RGBA,Ie.UNSIGNED_BYTE,y):Ie.texSubImage2D(Ie.TEXTURE_2D,0,tt,ot,re,ge,Ie.RGBA,Ie.UNSIGNED_BYTE,y.data)}else this.size=[re,ge],y instanceof ze||y instanceof Le||y instanceof Ve||y instanceof We||Ze&&y instanceof Ze?Ie.texImage2D(Ie.TEXTURE_2D,0,this.format,this.format,Ie.UNSIGNED_BYTE,y):Ie.texImage2D(Ie.TEXTURE_2D,0,this.format,re,ge,0,this.format,Ie.UNSIGNED_BYTE,y.data);this.useMipmap=Boolean(I&&I.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&Ie.generateMipmap(Ie.TEXTURE_2D)}bind(y,I){const{context:ee}=this,{gl:re}=ee;re.bindTexture(re.TEXTURE_2D,this.texture),y!==this.filter&&(re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MAG_FILTER,y),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,this.useMipmap?y===re.NEAREST?re.NEAREST_MIPMAP_NEAREST:re.LINEAR_MIPMAP_NEAREST:y),this.filter=y),I!==this.wrap&&(re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_S,I),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:y}=this.context;y.deleteTexture(this.texture),this.texture=null}}class Bp{constructor(y,I){this.width=y,this.height=I,this.nextRow=0,this.image=new sl({width:y,height:I}),this.positions={},this.uploaded=!1}getDash(y,I){const ee=this.getKey(y,I);return this.positions[ee]}trim(){const y=this.width,I=this.height=it(this.nextRow);this.image.resize({width:y,height:I})}getKey(y,I){return y.join(",")+I}getDashRanges(y,I,ee){const re=[];let ge=y.length%2==1?-y[y.length-1]*ee:0,ke=y[0]*ee,Ie=!0;re.push({left:ge,right:ke,isDash:Ie,zeroLength:y[0]===0});let ze=y[0];for(let Le=1;Le<y.length;Le++){Ie=!Ie;const Ve=y[Le];ge=ze*ee,ze+=Ve,ke=ze*ee,re.push({left:ge,right:ke,isDash:Ie,zeroLength:Ve===0})}return re}addRoundDash(y,I,ee){const re=I/2;for(let ge=-ee;ge<=ee;ge++){const ke=this.width*(this.nextRow+ee+ge);let Ie=0,ze=y[Ie];for(let Le=0;Le<this.width;Le++){Le/ze.right>1&&(ze=y[++Ie]);const Ve=Math.abs(Le-ze.left),We=Math.abs(Le-ze.right),Ze=Math.min(Ve,We);let tt;const ot=ge/ee*(re+1);if(ze.isDash){const mt=re-Math.abs(ot);tt=Math.sqrt(Ze*Ze+mt*mt)}else tt=re-Math.sqrt(Ze*Ze+ot*ot);this.image.data[ke+Le]=Math.max(0,Math.min(255,tt+128))}}}addRegularDash(y,I){for(let ze=y.length-1;ze>=0;--ze){const Le=y[ze],Ve=y[ze+1];Le.zeroLength?y.splice(ze,1):Ve&&Ve.isDash===Le.isDash&&(Ve.left=Le.left,y.splice(ze,1))}const ee=y[0],re=y[y.length-1];ee.isDash===re.isDash&&(ee.left=re.left-this.width,re.right=ee.right+this.width);const ge=this.width*this.nextRow;let ke=0,Ie=y[ke];for(let ze=0;ze<this.width;ze++){ze/Ie.right>1&&(Ie=y[++ke]);const Le=Math.abs(ze-Ie.left),Ve=Math.abs(ze-Ie.right),We=Math.min(Le,Ve);this.image.data[ge+ze]=Math.max(0,Math.min(255,(Ie.isDash?We:-We)+I+128))}}addDash(y,I){const ee=this.getKey(y,I);if(this.positions[ee])return this.positions[ee];const re=I==="round",ge=re?7:0,ke=2*ge+1;if(this.nextRow+ke>this.height)return $t("LineAtlas out of space"),null;y.length===0&&y.push(1);let Ie=0;for(let Ve=0;Ve<y.length;Ve++)y[Ve]<0&&($t("Negative value is found in line dasharray, replacing values with 0"),y[Ve]=0),Ie+=y[Ve];if(Ie!==0){const Ve=this.width/Ie,We=this.getDashRanges(y,this.width,Ve);re?this.addRoundDash(We,Ve,ge):this.addRegularDash(We,I==="square"?.5*Ve:0)}const ze=this.nextRow+ge;this.nextRow+=ke;const Le={tl:[ze,ge],br:[Ie,0]};return this.positions[ee]=Le,Le}}ur(Bp,"LineAtlas");class Qg{constructor(y){this._callback=y,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Jg{constructor(){this.tasks={},this.taskQueue=[],lt(["process"],this),this.invoker=new Qg(this.process),this.nextId=0}add(y,I){const ee=this.nextId++,re=function({type:ge,isSymbolTile:ke,zoom:Ie}){return Ie=Ie||0,ge==="message"?0:ge!=="maybePrepare"||ke?ge!=="parseTile"||ke?ge==="parseTile"&&ke?300-Ie:ge==="maybePrepare"&&ke?400-Ie:500:200-Ie:100-Ie}(I);if(re===0){on();try{y()}finally{}return{cancel:()=>{}}}return this.tasks[ee]={fn:y,metadata:I,priority:re,id:ee},this.taskQueue.push(ee),this.invoker.trigger(),{cancel:()=>{delete this.tasks[ee]}}}process(){on();try{if(this.taskQueue=this.taskQueue.filter(ee=>!!this.tasks[ee]),!this.taskQueue.length)return;const y=this.pick();if(y===null)return;const I=this.tasks[y];if(delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),!I)return;I.fn()}finally{}}pick(){let y=null,I=1/0;for(let re=0;re<this.taskQueue.length;re++){const ge=this.tasks[this.taskQueue[re]];ge.priority<I&&(I=ge.priority,y=re)}if(y===null)return null;const ee=this.taskQueue[y];return this.taskQueue.splice(y,1),ee}remove(){this.invoker.remove()}}class k_{constructor(y){this._stringToNumber={},this._numberToString=[];for(let I=0;I<y.length;I++){const ee=y[I];this._stringToNumber[ee]=I,this._numberToString[I]=ee}}encode(y){return this._stringToNumber[y]}decode(y){return this._numberToString[y]}}const ey=["tile","layer","source","sourceLayer","state"];class C_{constructor(y,I,ee,re,ge){this.type="Feature",this._vectorTileFeature=y,this._z=I,this._x=ee,this._y=re,this.properties=y.properties,this.id=ge}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(y){this._geometry=y}toJSON(){const y={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(y.id=this.id);for(const I of ey)this[I]!==void 0&&(y[I]=this[I]);return y}}const wa=32,xs=33,ec=new Uint16Array(8184);for(let $=0;$<2046;$++){let y=$+2,I=0,ee=0,re=0,ge=0,ke=0,Ie=0;for(1&y?re=ge=ke=wa:I=ee=Ie=wa;(y>>=1)>1;){const Le=I+re>>1,Ve=ee+ge>>1;1&y?(re=I,ge=ee,I=ke,ee=Ie):(I=re,ee=ge,re=ke,ge=Ie),ke=Le,Ie=Ve}const ze=4*$;ec[ze+0]=I,ec[ze+1]=ee,ec[ze+2]=re,ec[ze+3]=ge}const bs=new Uint16Array(2178),tc=new Uint8Array(1089),Hd=new Uint16Array(1089);function S_($){return $===0?-.03125:$===32?.03125:0}var I_=Ln([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const M_={type:2,extent:kr,loadGeometry:()=>[[new xe(0,0),new xe(8193,0),new xe(8193,8193),new xe(0,8193),new xe(0,0)]]};class Fp{constructor(y,I,ee,re,ge){this.tileID=y,this.uid=rt(),this.uses=0,this.tileSize=I,this.tileZoom=ee,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=ge,this.expiredRequestCount=0,this.state="loading",re&&re.transform&&(this.projection=re.transform.projection)}registerFadeDuration(y){const I=y+this.timeAdded;I<zn.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Zc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(y,I,ee){if(this.unloadVectorData(),this.state="loaded",y){y.featureIndex&&(this.latestFeatureIndex=y.featureIndex,y.rawTileData?(this.latestRawTileData=y.rawTileData,this.latestFeatureIndex.rawTileData=y.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=y.collisionBoxArray,this.buckets=function(re,ge){const ke={};if(!ge)return ke;for(const Ie of re){const ze=Ie.layerIds.map(Le=>ge.getLayer(Le)).filter(Boolean);if(ze.length!==0){Ie.layers=ze,Ie.stateDependentLayerIds&&(Ie.stateDependentLayers=Ie.stateDependentLayerIds.map(Le=>ze.filter(Ve=>Ve.id===Le)[0]));for(const Le of ze)ke[Le.id]=Ie}}return ke}(y.buckets,I.style),this.hasSymbolBuckets=!1;for(const re in this.buckets){const ge=this.buckets[re];if(ge instanceof Jl){if(this.hasSymbolBuckets=!0,!ee)break;ge.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const re in this.buckets){const ge=this.buckets[re];if(ge instanceof Jl&&ge.hasRTLText){this.hasRTLText=!0,kt.isLoading()||kt.isLoaded()||gt()!=="deferred"||Mt();break}}this.queryPadding=0;for(const re in this.buckets){const ge=this.buckets[re];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(re).queryRadius(ge))}y.imageAtlas&&(this.imageAtlas=y.imageAtlas),y.glyphAtlasImage&&(this.glyphAtlasImage=y.glyphAtlasImage),y.lineAtlas&&(this.lineAtlas=y.lineAtlas)}else this.collisionBoxArray=new qo}unloadVectorData(){if(this.hasData()){for(const y in this.buckets)this.buckets[y].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(y){return this.buckets[y.id]}upload(y){for(const ee in this.buckets){const re=this.buckets[ee];re.uploadPending()&&re.upload(y)}const I=y.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Gh(y,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Gh(y,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Gh(y,this.lineAtlas.image,I.ALPHA),this.lineAtlas.uploaded=!0)}prepare(y){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(y,this.imageAtlasTexture)}queryRenderedFeatures(y,I,ee,re,ge,ke,Ie,ze){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:re,pixelPosMatrix:Ie,transform:ke,params:ge,tileTransform:this.tileTransform},y,I,ee):{}}querySourceFeatures(y,I){const ee=this.latestFeatureIndex;if(!ee||!ee.rawTileData)return;const re=ee.loadVTLayers(),ge=I?I.sourceLayer:"",ke=re._geojsonTileLayer||re[ge];if(!ke)return;const Ie=Ys(I&&I.filter),{z:ze,x:Le,y:Ve}=this.tileID.canonical,We={z:ze,x:Le,y:Ve};for(let Ze=0;Ze<ke.length;Ze++){const tt=ke.feature(Ze);if(Ie.needGeometry){const Et=Ge(tt,!0);if(!Ie.filter(new Tt(this.tileID.overscaledZ),Et,this.tileID.canonical))continue}else if(!Ie.filter(new Tt(this.tileID.overscaledZ),tt))continue;const ot=ee.getId(tt,ge),mt=new C_(tt,ze,Le,Ve,ot);mt.tile=We,y.push(mt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(y){const I=this.expirationTime;if(y.cacheControl){const ee=an(y.cacheControl);ee["max-age"]&&(this.expirationTime=Date.now()+1e3*ee["max-age"])}else y.expires&&(this.expirationTime=new Date(y.expires).getTime());if(this.expirationTime){const ee=Date.now();let re=!1;if(this.expirationTime>ee)re=!1;else if(I)if(this.expirationTime<I)re=!0;else{const ge=this.expirationTime-I;ge?this.expirationTime=ee+Math.max(ge,3e4):re=!0}else re=!0;re?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(y,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(y).length===0||!I)return;const ee=this.latestFeatureIndex.loadVTLayers(),re=I.style.listImages();for(const ge in this.buckets){if(!I.style.hasLayer(ge))continue;const ke=this.buckets[ge],Ie=ke.layers[0].sourceLayer||"_geojsonTileLayer",ze=ee[Ie],Le=y[Ie];if(!ze||!Le||Object.keys(Le).length===0)continue;if(ke.update(Le,ze,re,this.imageAtlas&&this.imageAtlas.patternPositions||{}),ke instanceof Id||ke instanceof Td){const We=I.style._getSourceCache(ke.layers[0].source);I._terrain&&I._terrain.enabled&&We&&ke.programConfigurations.needsUpload&&I._terrain._clearRenderCacheForTile(We.id,this.tileID)}const Ve=I&&I.style&&I.style.getLayer(ge);Ve&&(this.queryPadding=Math.max(this.queryPadding,Ve.queryRadius(ke)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<zn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(y){this.symbolFadeHoldUntil=zn.now()+y}setTexture(y,I){const ee=I.context,re=ee.gl;this.texture=I.getTileTexture(y.width),this.texture?this.texture.update(y,{useMipmap:!0}):(this.texture=new Gh(ee,y,re.RGBA,{useMipmap:!0}),this.texture.bind(re.LINEAR,re.CLAMP_TO_EDGE),ee.extTextureFilterAnisotropic&&re.texParameterf(re.TEXTURE_2D,ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ee.extTextureFilterAnisotropicMax))}setDependencies(y,I){const ee={};for(const re of I)ee[re]=!0;this.dependencies[y]=ee}hasDependency(y,I){for(const ee of y){const re=this.dependencies[ee];if(re){for(const ge of I)if(re[ge])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(y,I){if(!I||I.name==="mercator"||this._tileDebugBuffer)return;const ee=vt(M_,this.tileID.canonical,this.tileTransform)[0],re=new tr,ge=new go;for(let ke=0;ke<ee.length;ke++){const{x:Ie,y:ze}=ee[ke];re.emplaceBack(Ie,ze),ge.emplaceBack(ke)}ge.emplaceBack(0),this._tileDebugIndexBuffer=y.createIndexBuffer(ge),this._tileDebugBuffer=y.createVertexBuffer(re,$h.members),this._tileDebugSegments=Bi.simpleSegment(0,0,re.length,ge.length)}_makeTileBoundsBuffers(y,I){if(this._tileBoundsBuffer||!I||I.name==="mercator")return;const ee=vt(M_,this.tileID.canonical,this.tileTransform)[0];let re,ge;if(this.isRaster){const ke=function(Ie,ze){const Le=Zc(Ie,ze),Ve=Math.pow(2,Ie.z);for(let Et=0;Et<xs;Et++)for(let Ft=0;Ft<xs;Ft++){const Ht=Ho((Ie.x+(Ft+S_(Ft))/wa)/Ve),Nt=Qi((Ie.y+(Et+S_(Et))/wa)/Ve),qt=ze.project(Ht,Nt),Jt=Et*xs+Ft;bs[2*Jt+0]=Math.round((qt.x*Le.scale-Le.x)*kr),bs[2*Jt+1]=Math.round((qt.y*Le.scale-Le.y)*kr)}tc.fill(0),Hd.fill(0);for(let Et=2045;Et>=0;Et--){const Ft=4*Et,Ht=ec[Ft+0],Nt=ec[Ft+1],qt=ec[Ft+2],Jt=ec[Ft+3],Zt=Ht+qt>>1,Tn=Nt+Jt>>1,An=Zt+Tn-Nt,On=Tn+Ht-Zt,Qn=Nt*xs+Ht,Cn=Jt*xs+qt,Bn=Tn*xs+Zt,Vn=Math.hypot((bs[2*Qn+0]+bs[2*Cn+0])/2-bs[2*Bn+0],(bs[2*Qn+1]+bs[2*Cn+1])/2-bs[2*Bn+1])>=16;if(tc[Bn]=tc[Bn]||(Vn?1:0),Et<1022){const Fn=(Nt+On>>1)*xs+(Ht+An>>1),Xn=(Jt+On>>1)*xs+(qt+An>>1);tc[Bn]=tc[Bn]||tc[Fn]||tc[Xn]}}const We=new yr,Ze=new Dr;let tt=0;function ot(Et,Ft){const Ht=Ft*xs+Et;return Hd[Ht]===0&&(We.emplaceBack(bs[2*Ht+0],bs[2*Ht+1],Et*kr/wa,Ft*kr/wa),Hd[Ht]=++tt),Hd[Ht]-1}function mt(Et,Ft,Ht,Nt,qt,Jt){const Zt=Et+Ht>>1,Tn=Ft+Nt>>1;if(Math.abs(Et-qt)+Math.abs(Ft-Jt)>1&&tc[Tn*xs+Zt])mt(qt,Jt,Et,Ft,Zt,Tn),mt(Ht,Nt,qt,Jt,Zt,Tn);else{const An=ot(Et,Ft),On=ot(Ht,Nt),Qn=ot(qt,Jt);Ze.emplaceBack(An,On,Qn)}}return mt(0,0,wa,wa,wa,0),mt(wa,wa,0,0,0,wa),{vertices:We,indices:Ze}}(this.tileID.canonical,I);re=ke.vertices,ge=ke.indices}else{re=new yr,ge=new Dr;for(const{x:Ie,y:ze}of ee)re.emplaceBack(Ie,ze,0,0);const ke=xd(re.int16,void 0,4);for(let Ie=0;Ie<ke.length;Ie+=3)ge.emplaceBack(ke[Ie],ke[Ie+1],ke[Ie+2])}this._tileBoundsBuffer=y.createVertexBuffer(re,I_.members),this._tileBoundsIndexBuffer=y.createIndexBuffer(ge),this._tileBoundsSegments=Bi.simpleSegment(0,0,re.length,ge.length)}_makeGlobeTileDebugBuffers(y,I){const ee=I.projection;if(!ee||ee.name!=="globe"||I.freezeTileCoverage)return;const re=this.tileID.canonical,ge=Bh(p_(re,I)),ke=Fh(I.zoom);let Ie;ke>0&&(Ie=tp(new Float64Array(16),I.globeMatrix));const ze=(re.x+.5)/(1<<re.z)-xa(I.center.lng);let Le=0;ze>.5?Le=-1:ze<-.5&&(Le=1),this._makeGlobeTileDebugBorderBuffer(y,re,I,ge,Ie,ke,Le),this._makeGlobeTileDebugTextBuffer(y,re,I,ge,Ie,ke,Le)}_globePoint(y,I,ee,re,ge,ke,Ie,ze){let Le=Lh(y,I,ee);if(ke){const Ve=1<<ee.z,We=[((y/kr+ee.x)/Ve+ze)*re,(I/kr+ee.y)/Ve*re,0];Zi(We,We,ke),Le=Ka(Le,We,Ie)}return Zi(Le,Le,ge)}_makeGlobeTileDebugBorderBuffer(y,I,ee,re,ge,ke,Ie){const ze=new tr,Le=new go,Ve=new pr,We=(tt,ot,mt,Et,Ft)=>{const Ht=(mt-tt)/(Ft-1),Nt=(Et-ot)/(Ft-1),qt=ze.length;for(let Jt=0;Jt<Ft;Jt++){const Zt=tt+Jt*Ht,Tn=ot+Jt*Nt;ze.emplaceBack(Zt,Tn);const An=this._globePoint(Zt,Tn,I,ee.worldSize,re,ge,ke,Ie);Ve.emplaceBack(An[0],An[1],An[2]),Le.emplaceBack(qt+Jt)}},Ze=kr;We(0,0,Ze,0,16),We(Ze,0,Ze,Ze,16),We(Ze,Ze,0,Ze,16),We(0,Ze,0,0,16),this._tileDebugIndexBuffer=y.createIndexBuffer(Le),this._tileDebugBuffer=y.createVertexBuffer(ze,$h.members),this._globeTileDebugBorderBuffer=y.createVertexBuffer(Ve,h_.members),this._tileDebugSegments=Bi.simpleSegment(0,0,ze.length,Le.length)}_makeGlobeTileDebugTextBuffer(y,I,ee,re,ge,ke,Ie){const ze=new tr,Le=new Dr,Ve=new pr,We=25;Le.reserve(32),ze.reserve(We),Ve.reserve(We);const Ze=(tt,ot)=>We*tt+ot;for(let tt=0;tt<We;tt++){const ot=2048*tt;for(let mt=0;mt<We;mt++){const Et=2048*mt;ze.emplaceBack(Et,ot);const Ft=this._globePoint(Et,ot,I,ee.worldSize,re,ge,ke,Ie);Ve.emplaceBack(Ft[0],Ft[1],Ft[2])}}for(let tt=0;tt<4;tt++)for(let ot=0;ot<4;ot++){const mt=Ze(tt,ot),Et=Ze(tt,ot+1),Ft=Ze(tt+1,ot),Ht=Ze(tt+1,ot+1);Le.emplaceBack(mt,Et,Ft),Le.emplaceBack(Ft,Et,Ht)}this._tileDebugTextIndexBuffer=y.createIndexBuffer(Le),this._tileDebugTextBuffer=y.createVertexBuffer(ze,$h.members),this._globeTileDebugTextBuffer=y.createVertexBuffer(Ve,h_.members),this._tileDebugTextSegments=Bi.simpleSegment(0,0,We,32)}}class ty{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(y,I,ee){const re=String(I);if(this.stateChanges[y]=this.stateChanges[y]||{},this.stateChanges[y][re]=this.stateChanges[y][re]||{},At(this.stateChanges[y][re],ee),this.deletedStates[y]===null){this.deletedStates[y]={};for(const ge in this.state[y])ge!==re&&(this.deletedStates[y][ge]=null)}else if(this.deletedStates[y]&&this.deletedStates[y][re]===null){this.deletedStates[y][re]={};for(const ge in this.state[y][re])ee[ge]||(this.deletedStates[y][re][ge]=null)}else for(const ge in ee)this.deletedStates[y]&&this.deletedStates[y][re]&&this.deletedStates[y][re][ge]===null&&delete this.deletedStates[y][re][ge]}removeFeatureState(y,I,ee){if(this.deletedStates[y]===null)return;const re=String(I);if(this.deletedStates[y]=this.deletedStates[y]||{},ee&&I!==void 0)this.deletedStates[y][re]!==null&&(this.deletedStates[y][re]=this.deletedStates[y][re]||{},this.deletedStates[y][re][ee]=null);else if(I!==void 0)if(this.stateChanges[y]&&this.stateChanges[y][re])for(ee in this.deletedStates[y][re]={},this.stateChanges[y][re])this.deletedStates[y][re][ee]=null;else this.deletedStates[y][re]=null;else this.deletedStates[y]=null}getState(y,I){const ee=String(I),re=At({},(this.state[y]||{})[ee],(this.stateChanges[y]||{})[ee]);if(this.deletedStates[y]===null)return{};if(this.deletedStates[y]){const ge=this.deletedStates[y][I];if(ge===null)return{};for(const ke in ge)delete re[ke]}return re}initializeTileState(y,I){y.setFeatureState(this.state,I)}coalesceChanges(y,I){const ee={};for(const re in this.stateChanges){this.state[re]=this.state[re]||{};const ge={};for(const ke in this.stateChanges[re])this.state[re][ke]||(this.state[re][ke]={}),At(this.state[re][ke],this.stateChanges[re][ke]),ge[ke]=this.state[re][ke];ee[re]=ge}for(const re in this.deletedStates){this.state[re]=this.state[re]||{};const ge={};if(this.deletedStates[re]===null)for(const ke in this.state[re])ge[ke]={},this.state[re][ke]={};else for(const ke in this.deletedStates[re]){if(this.deletedStates[re][ke]===null)this.state[re][ke]={};else for(const Ie of Object.keys(this.deletedStates[re][ke]))delete this.state[re][ke][Ie];ge[ke]=this.state[re][ke]}ee[re]=ee[re]||{},At(ee[re],ge)}if(this.stateChanges={},this.deletedStates={},Object.keys(ee).length!==0)for(const re in y)y[re].setFeatureState(ee,I)}}class P_{constructor(y){this.size=y,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(y,I){const ee=this.toIdx(y,I);return{min:this.minimums[ee],max:this.maximums[ee]}}isLeaf(y,I){return this.leaves[this.toIdx(y,I)]}toIdx(y,I){return I*this.size+y}}function O_($,y,I,ee){let re=0,ge=Number.MAX_VALUE;for(let ke=0;ke<3;ke++)if(Math.abs(ee[ke])<1e-15){if(I[ke]<$[ke]||I[ke]>y[ke])return null}else{const Ie=1/ee[ke];let ze=($[ke]-I[ke])*Ie,Le=(y[ke]-I[ke])*Ie;if(ze>Le){const Ve=ze;ze=Le,Le=Ve}if(ze>re&&(re=ze),Le<ge&&(ge=Le),re>ge)return null}return re}function R_($,y,I,ee,re,ge,ke,Ie,ze,Le,Ve){const We=ee-$,Ze=re-y,tt=ge-I,ot=ke-$,mt=Ie-y,Et=ze-I,Ft=Ve[1]*Et-Ve[2]*mt,Ht=Ve[2]*ot-Ve[0]*Et,Nt=Ve[0]*mt-Ve[1]*ot,qt=We*Ft+Ze*Ht+tt*Nt;if(Math.abs(qt)<1e-15)return null;const Jt=1/qt,Zt=Le[0]-$,Tn=Le[1]-y,An=Le[2]-I,On=(Zt*Ft+Tn*Ht+An*Nt)*Jt;if(On<0||On>1)return null;const Qn=Tn*tt-An*Ze,Cn=An*We-Zt*tt,Bn=Zt*Ze-Tn*We,Vn=(Ve[0]*Qn+Ve[1]*Cn+Ve[2]*Bn)*Jt;return Vn<0||On+Vn>1?null:(ot*Qn+mt*Cn+Et*Bn)*Jt}function D_($,y,I){return($-y)/(I-y)}function z_($,y,I,ee,re,ge,ke,Ie,ze){const Le=1<<I,Ve=ge-ee,We=ke-re,Ze=($+1)/Le*Ve+ee,tt=(y+0)/Le*We+re,ot=(y+1)/Le*We+re;Ie[0]=($+0)/Le*Ve+ee,Ie[1]=tt,ze[0]=Ze,ze[1]=ot}class $_{constructor(y){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=y,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const I=function(ge){const ke=Math.ceil(Math.log2(ge.dim/8)),Ie=[];let ze=Math.ceil(Math.pow(2,ke));const Le=1/ze,Ve=(tt,ot,mt,Et,Ft)=>{const Ht=Et?1:0,Nt=(tt+1)*mt-Ht,qt=ot*mt,Jt=(ot+1)*mt-Ht;Ft[0]=tt*mt,Ft[1]=qt,Ft[2]=Nt,Ft[3]=Jt};let We=new P_(ze);const Ze=[];for(let tt=0;tt<ze*ze;tt++){Ve(tt%ze,Math.floor(tt/ze),Le,!1,Ze);const ot=nc(Ze[0],Ze[1],ge),mt=nc(Ze[2],Ze[1],ge),Et=nc(Ze[2],Ze[3],ge),Ft=nc(Ze[0],Ze[3],ge);We.minimums.push(Math.min(ot,mt,Et,Ft)),We.maximums.push(Math.max(ot,mt,Et,Ft)),We.leaves.push(1)}for(Ie.push(We),ze/=2;ze>=1;ze/=2){const tt=Ie[Ie.length-1];We=new P_(ze);for(let ot=0;ot<ze*ze;ot++){Ve(ot%ze,Math.floor(ot/ze),2,!0,Ze);const mt=tt.getElevation(Ze[0],Ze[1]),Et=tt.getElevation(Ze[2],Ze[1]),Ft=tt.getElevation(Ze[2],Ze[3]),Ht=tt.getElevation(Ze[0],Ze[3]),Nt=tt.isLeaf(Ze[0],Ze[1]),qt=tt.isLeaf(Ze[2],Ze[1]),Jt=tt.isLeaf(Ze[2],Ze[3]),Zt=tt.isLeaf(Ze[0],Ze[3]),Tn=Math.min(mt.min,Et.min,Ft.min,Ht.min),An=Math.max(mt.max,Et.max,Ft.max,Ht.max),On=Nt&&qt&&Jt&&Zt;We.maximums.push(An),We.minimums.push(Tn),We.leaves.push(An-Tn<=5&&On?1:0)}Ie.push(We)}return Ie}(this.dem),ee=I.length-1,re=I[ee];this._addNode(re.minimums[0],re.maximums[0],re.leaves[0]),this._construct(I,0,0,ee,0)}raycastRoot(y,I,ee,re,ge,ke,Ie=1){return O_([y,I,-100],[ee,re,this.maximums[0]*Ie],ge,ke)}raycast(y,I,ee,re,ge,ke,Ie=1){if(!this.nodeCount)return null;const ze=this.raycastRoot(y,I,ee,re,ge,ke,Ie);if(ze==null)return null;const Le=[],Ve=[],We=[],Ze=[],tt=[{idx:0,t:ze,nodex:0,nodey:0,depth:0}];for(;tt.length>0;){const{idx:ot,t:mt,nodex:Et,nodey:Ft,depth:Ht}=tt.pop();if(this.leaves[ot]){z_(Et,Ft,Ht,y,I,ee,re,We,Ze);const qt=1<<Ht,Jt=(Et+0)/qt,Zt=(Et+1)/qt,Tn=(Ft+0)/qt,An=(Ft+1)/qt,On=nc(Jt,Tn,this.dem)*Ie,Qn=nc(Zt,Tn,this.dem)*Ie,Cn=nc(Zt,An,this.dem)*Ie,Bn=nc(Jt,An,this.dem)*Ie,Vn=R_(We[0],We[1],On,Ze[0],We[1],Qn,Ze[0],Ze[1],Cn,ge,ke),Fn=R_(Ze[0],Ze[1],Cn,We[0],Ze[1],Bn,We[0],We[1],On,ge,ke),Xn=Math.min(Vn!==null?Vn:Number.MAX_VALUE,Fn!==null?Fn:Number.MAX_VALUE);if(Xn!==Number.MAX_VALUE)return Xn;{const Gn=vd([],ge,ke,mt);if(L_(On,Qn,Bn,Cn,D_(Gn[0],We[0],Ze[0]),D_(Gn[1],We[1],Ze[1]))>=Gn[2])return mt}continue}let Nt=0;for(let qt=0;qt<this._siblingOffset.length;qt++){z_((Et<<1)+this._siblingOffset[qt][0],(Ft<<1)+this._siblingOffset[qt][1],Ht+1,y,I,ee,re,We,Ze),We[2]=-100,Ze[2]=this.maximums[this.childOffsets[ot]+qt]*Ie;const Jt=O_(We,Ze,ge,ke);if(Jt!=null){const Zt=Jt;Le[qt]=Zt;let Tn=!1;for(let An=0;An<Nt&&!Tn;An++)Zt>=Le[Ve[An]]&&(Ve.splice(An,0,qt),Tn=!0);Tn||(Ve[Nt]=qt),Nt++}}for(let qt=0;qt<Nt;qt++){const Jt=Ve[qt];tt.push({idx:this.childOffsets[ot]+Jt,t:Le[Jt],nodex:(Et<<1)+this._siblingOffset[Jt][0],nodey:(Ft<<1)+this._siblingOffset[Jt][1],depth:Ht+1})}}return null}_addNode(y,I,ee){return this.minimums.push(y),this.maximums.push(I),this.leaves.push(ee),this.childOffsets.push(0),this.nodeCount++}_construct(y,I,ee,re,ge){if(y[re].isLeaf(I,ee)===1)return;this.childOffsets[ge]||(this.childOffsets[ge]=this.nodeCount);const ke=re-1,Ie=y[ke];let ze=0,Le=0;for(let Ve=0;Ve<this._siblingOffset.length;Ve++){const We=2*I+this._siblingOffset[Ve][0],Ze=2*ee+this._siblingOffset[Ve][1],tt=Ie.getElevation(We,Ze),ot=Ie.isLeaf(We,Ze),mt=this._addNode(tt.min,tt.max,ot);ot&&(ze|=1<<Ve),Le||(Le=mt)}for(let Ve=0;Ve<this._siblingOffset.length;Ve++)ze&1<<Ve||this._construct(y,2*I+this._siblingOffset[Ve][0],2*ee+this._siblingOffset[Ve][1],ke,Le+Ve)}}function L_($,y,I,ee,re,ge){return Wr(Wr($,I,ge),Wr(y,ee,ge),re)}function nc($,y,I){const ee=I.dim,re=Ye($*ee-.5,0,ee-1),ge=Ye(y*ee-.5,0,ee-1),ke=Math.floor(re),Ie=Math.floor(ge),ze=Math.min(ke+1,ee-1),Le=Math.min(Ie+1,ee-1);return L_(I.get(ke,Ie),I.get(ze,Ie),I.get(ke,Le),I.get(ze,Le),re-ke,ge-Ie)}const B_={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Wd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(y,I,ee,re=!1,ge=!1){if(this.uid=y,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(ee&&ee!=="mapbox"&&ee!=="terrarium")return $t(`"${ee}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=I.height;const ke=this.dim=I.height-2,Ie=new Uint32Array(I.data.buffer);if(this.pixels=new Uint8Array(I.data.buffer),this.encoding=ee||"mapbox",this.borderReady=re,!re){for(let ze=0;ze<ke;ze++)Ie[this._idx(-1,ze)]=Ie[this._idx(0,ze)],Ie[this._idx(ke,ze)]=Ie[this._idx(ke-1,ze)],Ie[this._idx(ze,-1)]=Ie[this._idx(ze,0)],Ie[this._idx(ze,ke)]=Ie[this._idx(ze,ke-1)];Ie[this._idx(-1,-1)]=Ie[this._idx(0,0)],Ie[this._idx(ke,-1)]=Ie[this._idx(ke-1,0)],Ie[this._idx(-1,ke)]=Ie[this._idx(0,ke-1)],Ie[this._idx(ke,ke)]=Ie[this._idx(ke-1,ke-1)],ge&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new $_(this)}get(y,I,ee=!1){ee&&(y=Ye(y,-1,this.dim),I=Ye(I,-1,this.dim));const re=4*this._idx(y,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[re],this.pixels[re+1],this.pixels[re+2])}static getUnpackVector(y){return B_[y]}get unpackVector(){return B_[this.encoding]}_idx(y,I){if(y<-1||y>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(y+1)}_unpackMapbox(y,I,ee){return(256*y*256+256*I+ee)/10-1e4}_unpackTerrarium(y,I,ee){return 256*y+I+ee/256-32768}static pack(y,I){const ee=[0,0,0,0],re=Wd.getUnpackVector(I);let ge=Math.floor((y+re[3])/re[2]);return ee[2]=ge%256,ge=Math.floor(ge/256),ee[1]=ge%256,ge=Math.floor(ge/256),ee[0]=ge,ee}getPixels(){return new Xo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(y,I,ee){if(this.dim!==y.dim)throw new Error("dem dimension mismatch");let re=I*this.dim,ge=I*this.dim+this.dim,ke=ee*this.dim,Ie=ee*this.dim+this.dim;switch(I){case-1:re=ge-1;break;case 1:ge=re+1}switch(ee){case-1:ke=Ie-1;break;case 1:Ie=ke+1}const ze=-I*this.dim,Le=-ee*this.dim;for(let Ve=ke;Ve<Ie;Ve++)for(let We=re;We<ge;We++){const Ze=4*this._idx(We,Ve),tt=4*this._idx(We+ze,Ve+Le);this.pixels[Ze+0]=y.pixels[tt+0],this.pixels[Ze+1]=y.pixels[tt+1],this.pixels[Ze+2]=y.pixels[tt+2],this.pixels[Ze+3]=y.pixels[tt+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ur(Wd,"DEMData"),ur($_,"DemMinMaxQuadTree",{omit:["dem"]});class ny{constructor(y,I){this.max=y,this.onRemove=I,this.reset()}reset(){for(const y in this.data)for(const I of this.data[y])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(y,I,ee){const re=y.wrapped().key;this.data[re]===void 0&&(this.data[re]=[]);const ge={value:I,timeout:void 0};if(ee!==void 0&&(ge.timeout=setTimeout(()=>{this.remove(y,ge)},ee)),this.data[re].push(ge),this.order.push(re),this.order.length>this.max){const ke=this._getAndRemoveByKey(this.order[0]);ke&&this.onRemove(ke)}return this}has(y){return y.wrapped().key in this.data}getAndRemove(y){return this.has(y)?this._getAndRemoveByKey(y.wrapped().key):null}_getAndRemoveByKey(y){const I=this.data[y].shift();return I.timeout&&clearTimeout(I.timeout),this.data[y].length===0&&delete this.data[y],this.order.splice(this.order.indexOf(y),1),I.value}getByKey(y){const I=this.data[y];return I?I[0].value:null}get(y){return this.has(y)?this.data[y.wrapped().key][0].value:null}remove(y,I){if(!this.has(y))return this;const ee=y.wrapped().key,re=I===void 0?0:this.data[ee].indexOf(I),ge=this.data[ee][re];return this.data[ee].splice(re,1),ge.timeout&&clearTimeout(ge.timeout),this.data[ee].length===0&&delete this.data[ee],this.onRemove(ge.value),this.order.splice(this.order.indexOf(ee),1),this}setMaxSize(y){for(this.max=y;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(y){const I=[];for(const ee in this.data)for(const re of this.data[ee])y(re.value)||I.push(re);for(const ee of I)this.remove(ee.value.tileID,ee)}}class Xu{constructor(y,I,ee){this.func=y,this.mask=I,this.range=ee}}Xu.ReadOnly=!1,Xu.ReadWrite=!0,Xu.disabled=new Xu(519,Xu.ReadOnly,[0,1]);const Np=7680;class jp{constructor(y,I,ee,re,ge,ke){this.test=y,this.ref=I,this.mask=ee,this.fail=re,this.depthFail=ge,this.pass=ke}}jp.disabled=new jp({func:519,mask:0},0,0,Np,Np,Np);class As{constructor(y,I,ee){this.blendFunction=y,this.blendColor=I,this.mask=ee}}As.Replace=[1,0],As.disabled=new As(As.Replace,ii.transparent,[!1,!1,!1,!1]),As.unblended=new As(As.Replace,ii.transparent,[!0,!0,!0,!0]),As.alphaBlended=new As([1,771],ii.transparent,[!0,!0,!0,!0]);const Up=1029,Vp=2305;class Za{constructor(y,I,ee){this.enable=y,this.mode=I,this.frontFace=ee}}Za.disabled=new Za(!1,Up,Vp),Za.backCCW=new Za(!0,Up,Vp),Za.backCW=new Za(!0,Up,2304),Za.frontCW=new Za(!0,1028,2304),Za.frontCCW=new Za(!0,1028,Vp);class Xc extends xr{constructor(y,I,ee){super(),this.id=y,this._onlySymbols=ee,I.on("data",re=>{re.dataType==="source"&&re.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&re.dataType==="source"&&re.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),I.on("error",()=>{this._sourceErrored=!0}),this._source=I,this._tiles={},this._cache=new ny(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=I.minTileCacheSize,this._maxTileCacheSize=I.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new ty,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(y){this.map=y,this._minTileCacheSize=this._minTileCacheSize===void 0&&y?y._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&y?y._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const y in this._tiles){const I=this._tiles[y];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const y=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,y&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(y,I){return y.isSymbolTile=this._onlySymbols,this._source.loadTile(y,I)}_unloadTile(y){if(this._source.unloadTile)return this._source.unloadTile(y,()=>{})}_abortTile(y){if(this._source.abortTile)return this._source.abortTile(y,()=>{})}serialize(){return this._source.serialize()}prepare(y){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const I in this._tiles){const ee=this._tiles[I];this._source.prepareTile(ee)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,ee.tileID),ee.upload(y),ee.prepare(this.map.style.imageManager)}else for(const I in this._tiles){const ee=this._tiles[I];ee.upload(y),ee.prepare(this.map.style.imageManager)}}getIds(){return It(this._tiles).map(y=>y.tileID).sort(F_).map(y=>y.key)}getRenderableIds(y){const I=[];for(const ee in this._tiles)this._isIdRenderable(+ee,y)&&I.push(this._tiles[ee]);return y?I.sort((ee,re)=>{const ge=ee.tileID,ke=re.tileID,Ie=new xe(ge.canonical.x,ge.canonical.y)._rotate(this.transform.angle),ze=new xe(ke.canonical.x,ke.canonical.y)._rotate(this.transform.angle);return ge.overscaledZ-ke.overscaledZ||ze.y-Ie.y||ze.x-Ie.x}).map(ee=>ee.tileID.key):I.map(ee=>ee.tileID).sort(F_).map(ee=>ee.key)}hasRenderableParent(y){const I=this.findLoadedParent(y,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(y,I){return this._tiles[y]&&this._tiles[y].hasData()&&!this._coveredTiles[y]&&(I||!this._tiles[y].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const y in this._tiles)this._tiles[y].state!=="errored"&&this._reloadTile(+y,"reloading")}}_reloadTile(y,I){const ee=this._tiles[y];ee&&(ee.state!=="loading"&&(ee.state=I),this._loadTile(ee,this._tileLoaded.bind(this,ee,y,I)))}_tileLoaded(y,I,ee,re){if(re)if(y.state="errored",re.status!==404)this._source.fire(new ni(re,{tile:y}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const ge=this.map.painter.terrain;this.update(this.transform,ge.getScaledDemTileSize(),!0),ge.resetTileLookupCache(this.id)}else this.update(this.transform);else y.timeAdded=zn.now(),ee==="expired"&&(y.refreshedUponExpiration=!0),this._setTileReloadTimer(I,y),this._source.type==="raster-dem"&&y.dem&&this._backfillDEM(y),this._state.initializeTileState(y,this.map?this.map.painter:null),this._source.fire(new ai("data",{dataType:"source",tile:y,coord:y.tileID,sourceCacheId:this.id}))}_backfillDEM(y){const I=this.getRenderableIds();for(let re=0;re<I.length;re++){const ge=I[re];if(y.neighboringTiles&&y.neighboringTiles[ge]){const ke=this.getTileByID(ge);ee(y,ke),ee(ke,y)}}function ee(re,ge){if(!re.dem||re.dem.borderReady)return;re.needsHillshadePrepare=!0,re.needsDEMTextureUpload=!0;let ke=ge.tileID.canonical.x-re.tileID.canonical.x;const Ie=ge.tileID.canonical.y-re.tileID.canonical.y,ze=Math.pow(2,re.tileID.canonical.z),Le=ge.tileID.key;ke===0&&Ie===0||Math.abs(Ie)>1||(Math.abs(ke)>1&&(Math.abs(ke+ze)===1?ke+=ze:Math.abs(ke-ze)===1&&(ke-=ze)),ge.dem&&re.dem&&(re.dem.backfillBorder(ge.dem,ke,Ie),re.neighboringTiles&&re.neighboringTiles[Le]&&(re.neighboringTiles[Le].backfilled=!0)))}}getTile(y){return this.getTileByID(y.key)}getTileByID(y){return this._tiles[y]}_retainLoadedChildren(y,I,ee,re){for(const ge in this._tiles){let ke=this._tiles[ge];if(re[ge]||!ke.hasData()||ke.tileID.overscaledZ<=I||ke.tileID.overscaledZ>ee)continue;let Ie=ke.tileID;for(;ke&&ke.tileID.overscaledZ>I+1;){const Le=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);ke=this._tiles[Le.key],ke&&ke.hasData()&&(Ie=Le)}let ze=Ie;for(;ze.overscaledZ>I;)if(ze=ze.scaledTo(ze.overscaledZ-1),y[ze.key]){re[Ie.key]=Ie;break}}}findLoadedParent(y,I){if(y.key in this._loadedParentTiles){const ee=this._loadedParentTiles[y.key];return ee&&ee.tileID.overscaledZ>=I?ee:null}for(let ee=y.overscaledZ-1;ee>=I;ee--){const re=y.scaledTo(ee),ge=this._getLoadedTile(re);if(ge)return ge}}_getLoadedTile(y){const I=this._tiles[y.key];return I&&I.hasData()?I:this._cache.getByKey(this._source.reparseOverscaled?y.wrapped().key:y.canonical.key)}updateCacheSize(y,I){I=I||this._source.tileSize;const ee=Math.ceil(y.width/I)+1,re=Math.ceil(y.height/I)+1,ge=Math.floor(ee*re*5),ke=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,ge):ge,Ie=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ke):ke;this._cache.setMaxSize(Ie)}handleWrapJump(y){const I=Math.round((y-(this._prevLng===void 0?y:this._prevLng))/360);if(this._prevLng=y,I){const ee={};for(const re in this._tiles){const ge=this._tiles[re];ge.tileID=ge.tileID.unwrapTo(ge.tileID.wrap+I),ee[ge.tileID.key]=ge}this._tiles=ee;for(const re in this._timers)clearTimeout(this._timers[re]),delete this._timers[re];for(const re in this._tiles)this._setTileReloadTimer(+re,this._tiles[re])}}update(y,I,ee){if(this.transform=y,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!ee)return;let re;this.updateCacheSize(y,I),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?re=y.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ie=>new So(Ie.canonical.z,Ie.wrap,Ie.canonical.z,Ie.canonical.x,Ie.canonical.y)):(re=y.coveringTiles({tileSize:I||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!ee,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(re=re.filter(Ie=>this._source.hasTile(Ie)))):re=[];const ge=this._updateRetainedTiles(re);if(N_(this._source.type)&&re.length!==0){const Ie={},ze={},Le=Object.keys(ge);for(const We of Le){const Ze=ge[We],tt=this._tiles[We];if(!tt||tt.fadeEndTime&&tt.fadeEndTime<=zn.now())continue;const ot=this.findLoadedParent(Ze,Math.max(Ze.overscaledZ-Xc.maxOverzooming,this._source.minzoom));ot&&(this._addTile(ot.tileID),Ie[ot.tileID.key]=ot.tileID),ze[We]=Ze}const Ve=re[re.length-1].overscaledZ;for(const We in this._tiles){const Ze=this._tiles[We];if(ge[We]||!Ze.hasData())continue;let tt=Ze.tileID;for(;tt.overscaledZ>Ve;){tt=tt.scaledTo(tt.overscaledZ-1);const ot=this._tiles[tt.key];if(ot&&ot.hasData()&&ze[tt.key]){ge[We]=Ze.tileID;break}}}for(const We in Ie)ge[We]||(this._coveredTiles[We]=!0,ge[We]=Ie[We])}for(const Ie in ge)this._tiles[Ie].clearFadeHold();const ke=function(Ie,ze){const Le=[];for(const Ve in Ie)Ve in ze||Le.push(Ve);return Le}(this._tiles,ge);for(const Ie of ke){const ze=this._tiles[Ie];ze.hasSymbolBuckets&&!ze.holdingForFade()?ze.setHoldDuration(this.map._fadeDuration):ze.hasSymbolBuckets&&!ze.symbolFadeFinished()||this._removeTile(+Ie)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const y in this._tiles)this._tiles[y].holdingForFade()&&this._removeTile(+y)}_updateRetainedTiles(y){const I={};if(y.length===0)return I;const ee={},re=y.reduce((Le,Ve)=>Math.min(Le,Ve.overscaledZ),1/0),ge=y[0].overscaledZ,ke=Math.max(ge-Xc.maxOverzooming,this._source.minzoom),Ie=Math.max(ge+Xc.maxUnderzooming,this._source.minzoom),ze={};for(const Le of y){const Ve=this._addTile(Le);I[Le.key]=Le,Ve.hasData()||re<this._source.maxzoom&&(ze[Le.key]=Le)}this._retainLoadedChildren(ze,re,Ie,I);for(const Le of y){let Ve=this._tiles[Le.key];if(Ve.hasData())continue;if(Le.canonical.z>=this._source.maxzoom){const Ze=Le.children(this._source.maxzoom)[0],tt=this.getTile(Ze);if(tt&&tt.hasData()){I[Ze.key]=Ze;continue}}else{const Ze=Le.children(this._source.maxzoom);if(I[Ze[0].key]&&I[Ze[1].key]&&I[Ze[2].key]&&I[Ze[3].key])continue}let We=Ve.wasRequested();for(let Ze=Le.overscaledZ-1;Ze>=ke;--Ze){const tt=Le.scaledTo(Ze);if(ee[tt.key]||(ee[tt.key]=!0,Ve=this.getTile(tt),!Ve&&We&&(Ve=this._addTile(tt)),Ve&&(I[tt.key]=tt,We=Ve.wasRequested(),Ve.hasData())))break}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const y in this._tiles){const I=[];let ee,re=this._tiles[y].tileID;for(;re.overscaledZ>0;){if(re.key in this._loadedParentTiles){ee=this._loadedParentTiles[re.key];break}I.push(re.key);const ge=re.scaledTo(re.overscaledZ-1);if(ee=this._getLoadedTile(ge),ee)break;re=ge}for(const ge of I)this._loadedParentTiles[ge]=ee}}_addTile(y){let I=this._tiles[y.key];if(I)return this._source.prepareTile&&this._source.prepareTile(I),I;I=this._cache.getAndRemove(y),I&&(this._setTileReloadTimer(y.key,I),I.tileID=y,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[y.key]&&(clearTimeout(this._cacheTimers[y.key]),delete this._cacheTimers[y.key],this._setTileReloadTimer(y.key,I)));const ee=Boolean(I);if(!ee){const re=this.map?this.map.painter:null;I=new Fp(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,re,this._isRaster),this._source.prepareTile&&this._source.prepareTile(I)||this._loadTile(I,this._tileLoaded.bind(this,I,y.key,I.state))}return I?(I.uses++,this._tiles[y.key]=I,ee||this._source.fire(new ai("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null}_setTileReloadTimer(y,I){y in this._timers&&(clearTimeout(this._timers[y]),delete this._timers[y]);const ee=I.getExpiryTimeout();ee&&(this._timers[y]=setTimeout(()=>{this._reloadTile(y,"expired"),delete this._timers[y]},ee))}_removeTile(y){const I=this._tiles[y];I&&(I.uses--,delete this._tiles[y],this._timers[y]&&(clearTimeout(this._timers[y]),delete this._timers[y]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const y in this._tiles)this._removeTile(+y);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(y,I,ee){const re=[],ge=this.transform;if(!ge)return re;const ke=ge.projection.name==="globe",Ie=xa(ge.center.lng);for(const ze in this._tiles){const Le=this._tiles[ze];if(ee&&Le.clearQueryDebugViz(),Le.holdingForFade())continue;let Ve;if(ke){const We=Le.tileID.canonical;if(We.z===0){const Ze=[Math.abs(Ye(Ie,...qh(We,-1))-Ie),Math.abs(Ye(Ie,...qh(We,1))-Ie)];Ve=[0,2*Ze.indexOf(Math.min(...Ze))-1]}else{const Ze=[Math.abs(Ye(Ie,...qh(We,-1))-Ie),Math.abs(Ye(Ie,...qh(We,0))-Ie),Math.abs(Ye(Ie,...qh(We,1))-Ie)];Ve=[Ze.indexOf(Math.min(...Ze))-1]}}else Ve=[0];for(const We of Ve){const Ze=y.containsTile(Le,ge,I,We);Ze&&re.push(Ze)}}return re}getVisibleCoordinates(y){const I=this.getRenderableIds(y).map(ee=>this._tiles[ee].tileID);for(const ee of I)ee.projMatrix=this.transform.calculateProjMatrix(ee.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(N_(this._source.type))for(const y in this._tiles){const I=this._tiles[y];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=zn.now())return!0}return!1}setFeatureState(y,I,ee){this._state.updateState(y=y||"_geojsonTileLayer",I,ee)}removeFeatureState(y,I,ee){this._state.removeFeatureState(y=y||"_geojsonTileLayer",I,ee)}getFeatureState(y,I){return this._state.getState(y=y||"_geojsonTileLayer",I)}setDependencies(y,I,ee){const re=this._tiles[y];re&&re.setDependencies(I,ee)}reloadTilesForDependencies(y,I){for(const ee in this._tiles)this._tiles[ee].hasDependency(y,I)&&this._reloadTile(+ee,"reloading");this._cache.filter(ee=>!ee.hasDependency(y,I))}_preloadTiles(y,I){const ee=new Map,re=Array.isArray(y)?y:[y],ge=this.map.painter.terrain,ke=this.usedForTerrain&&ge?ge.getScaledDemTileSize():this._source.tileSize;for(const Ie of re){const ze=Ie.coveringTiles({tileSize:ke,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Le of ze)ee.set(Le.key,Le);this.usedForTerrain&&Ie.updateElevation(!1)}pt(Array.from(ee.values()),(Ie,ze)=>{const Le=new Fp(Ie,this._source.tileSize*Ie.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Le,Ve=>{this._source.type==="raster-dem"&&Le.dem&&this._backfillDEM(Le),ze(Ve,Le)})},I)}}function F_($,y){const I=Math.abs(2*$.wrap)-+($.wrap<0),ee=Math.abs(2*y.wrap)-+(y.wrap<0);return $.overscaledZ-y.overscaledZ||ee-I||y.canonical.y-$.canonical.y||y.canonical.x-$.canonical.x}function N_($){return $==="raster"||$==="image"||$==="video"}function qh($,y){const I=1<<$.z;return[$.x/I+y,($.x+1)/I+y]}Xc.maxOverzooming=10,Xc.maxUnderzooming=3;class Zd{constructor(y,I,ee){this._demTile=y,this._dem=this._demTile.dem,this._scale=I,this._offset=ee}static create(y,I,ee){const re=ee||y.findDEMTileFor(I);if(!re||!re.dem)return;const ge=re.dem,ke=re.tileID,Ie=1<<I.canonical.z-ke.canonical.z;return new Zd(re,re.tileSize/kr/Ie,[(I.canonical.x/Ie-ke.canonical.x)*ge.dim,(I.canonical.y/Ie-ke.canonical.y)*ge.dim])}tileCoordToPixel(y,I){const ee=I*this._scale+this._offset[1],re=Math.floor(y*this._scale+this._offset[0]),ge=Math.floor(ee);return new xe(re,ge)}getElevationAt(y,I,ee,re){const ge=y*this._scale+this._offset[0],ke=I*this._scale+this._offset[1],Ie=Math.floor(ge),ze=Math.floor(ke),Le=this._dem;return re=!!re,ee?Wr(Wr(Le.get(Ie,ze,re),Le.get(Ie,ze+1,re),ke-ze),Wr(Le.get(Ie+1,ze,re),Le.get(Ie+1,ze+1,re),ke-ze),ge-Ie):Le.get(Ie,ze,re)}getElevationAtPixel(y,I,ee){return this._dem.get(y,I,!!ee)}getMeterToDEM(y){return(1<<this._demTile.tileID.canonical.z)*Lo(1,y)*this._dem.stride}}class j_{constructor(y,I){this.tileID=y,this.x=y.canonical.x,this.y=y.canonical.y,this.z=y.canonical.z,this.grid=new Da(kr,16,0),this.featureIndexArray=new _h,this.promoteId=I}insert(y,I,ee,re,ge,ke=0){const Ie=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ee,re,ge,ke);const ze=this.grid;for(let Le=0;Le<I.length;Le++){const Ve=I[Le],We=[1/0,1/0,-1/0,-1/0];for(let Ze=0;Ze<Ve.length;Ze++){const tt=Ve[Ze];We[0]=Math.min(We[0],tt.x),We[1]=Math.min(We[1],tt.y),We[2]=Math.max(We[2],tt.x),We[3]=Math.max(We[3],tt.y)}We[0]<kr&&We[1]<kr&&We[2]>=0&&We[3]>=0&&ze.insert(Ie,We[0],We[1],We[2],We[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Wc.VectorTile(new Rh(this.rawTileData)).layers,this.sourceLayerCoder=new k_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const y in this.vtLayers)this.vtFeatures[y]=[]}return this.vtLayers}query(y,I,ee,re){this.loadVTLayers();const ge=y.params||{},ke=Ys(ge.filter),Ie=y.tileResult,ze=y.transform,Le=Ie.bufferedTilespaceBounds,Ve=this.grid.query(Le.min.x,Le.min.y,Le.max.x,Le.max.y,(ot,mt,Et,Ft)=>wi(Ie.bufferedTilespaceGeometry,ot,mt,Et,Ft));Ve.sort(ry);let We=null;ze.elevation&&Ve.length>0&&(We=Zd.create(ze.elevation,this.tileID));const Ze={};let tt;for(let ot=0;ot<Ve.length;ot++){const mt=Ve[ot];if(mt===tt)continue;tt=mt;const Et=this.featureIndexArray.get(mt);let Ft=null;this.loadMatchingFeature(Ze,Et,ke,ge.layers,ge.availableImages,I,ee,re,(Ht,Nt,qt,Jt=0)=>(Ft||(Ft=vt(Ht,this.tileID.canonical,y.tileTransform)),Nt.queryIntersectsFeature(Ie,Ht,qt,Ft,this.z,y.transform,y.pixelPosMatrix,We,Jt)))}return Ze}loadMatchingFeature(y,I,ee,re,ge,ke,Ie,ze,Le){const{featureIndex:Ve,bucketIndex:We,sourceLayerIndex:Ze,layoutVertexArrayOffset:tt}=I,ot=this.bucketLayerIDs[We];if(re&&!function(Ht,Nt){for(let qt=0;qt<Ht.length;qt++)if(Nt.indexOf(Ht[qt])>=0)return!0;return!1}(re,ot))return;const mt=this.sourceLayerCoder.decode(Ze),Et=this.vtLayers[mt].feature(Ve);if(ee.needGeometry){const Ht=Ge(Et,!0);if(!ee.filter(new Tt(this.tileID.overscaledZ),Ht,this.tileID.canonical))return}else if(!ee.filter(new Tt(this.tileID.overscaledZ),Et))return;const Ft=this.getId(Et,mt);for(let Ht=0;Ht<ot.length;Ht++){const Nt=ot[Ht];if(re&&re.indexOf(Nt)<0)continue;const qt=ke[Nt];if(!qt)continue;let Jt={};Ft!==void 0&&ze&&(Jt=ze.getState(qt.sourceLayer||"_geojsonTileLayer",Ft));const Zt=At({},Ie[Nt]);Zt.paint=U_(Zt.paint,qt.paint,Et,Jt,ge),Zt.layout=U_(Zt.layout,qt.layout,Et,Jt,ge);const Tn=!Le||Le(Et,qt,Jt,tt);if(!Tn)continue;const An=new C_(Et,this.z,this.x,this.y,Ft);An.layer=Zt;let On=y[Nt];On===void 0&&(On=y[Nt]=[]),On.push({featureIndex:Ve,feature:An,intersectionZ:Tn})}}lookupSymbolFeatures(y,I,ee,re,ge,ke,Ie,ze){const Le={};this.loadVTLayers();const Ve=Ys(ge);for(const We of y)this.loadMatchingFeature(Le,{bucketIndex:ee,sourceLayerIndex:re,featureIndex:We,layoutVertexArrayOffset:0},Ve,ke,Ie,ze,I);return Le}loadFeature(y){const{featureIndex:I,sourceLayerIndex:ee}=y;this.loadVTLayers();const re=this.sourceLayerCoder.decode(ee),ge=this.vtFeatures[re];if(ge[I])return ge[I];const ke=this.vtLayers[re].feature(I);return ge[I]=ke,ke}hasLayer(y){for(const I of this.bucketLayerIDs)for(const ee of I)if(y===ee)return!0;return!1}getId(y,I){let ee=y.id;return this.promoteId&&(ee=y.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[I]],typeof ee=="boolean"&&(ee=Number(ee))),ee}}function U_($,y,I,ee,re){return xt($,(ge,ke)=>{const Ie=y instanceof Yt?y.get(ke):null;return Ie&&Ie.evaluate?Ie.evaluate(I,ee,re):Ie})}function ry($,y){return y-$}ur(j_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class V_{constructor(y){const I={},ee=[];for(const Ie in y){const ze=y[Ie],Le=I[Ie]={};for(const Ve in ze.glyphs){const We=ze.glyphs[+Ve];if(!We||We.bitmap.width===0||We.bitmap.height===0)continue;const Ze=We.metrics.localGlyph?2:1,tt={x:0,y:0,w:We.bitmap.width+2*Ze,h:We.bitmap.height+2*Ze};ee.push(tt),Le[Ve]=tt}}const{w:re,h:ge}=bp(ee),ke=new sl({width:re||1,height:ge||1});for(const Ie in y){const ze=y[Ie];for(const Le in ze.glyphs){const Ve=ze.glyphs[+Le];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const We=I[Ie][Le],Ze=Ve.metrics.localGlyph?2:1;sl.copy(Ve.bitmap,ke,{x:0,y:0},{x:We.x+Ze,y:We.y+Ze},Ve.bitmap)}}this.image=ke,this.positions=I}}ur(V_,"GlyphAtlas");class iy{constructor(y){this.tileID=new So(y.tileID.overscaledZ,y.tileID.wrap,y.tileID.canonical.z,y.tileID.canonical.x,y.tileID.canonical.y),this.tileZoom=y.tileZoom,this.uid=y.uid,this.zoom=y.zoom,this.canonical=y.tileID.canonical,this.pixelRatio=y.pixelRatio,this.tileSize=y.tileSize,this.source=y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=y.showCollisionBoxes,this.collectResourceTiming=!!y.collectResourceTiming,this.returnDependencies=!!y.returnDependencies,this.promoteId=y.promoteId,this.enableTerrain=!!y.enableTerrain,this.isSymbolTile=y.isSymbolTile,this.tileTransform=Zc(y.tileID.canonical,y.projection),this.projection=y.projection}parse(y,I,ee,re,ge){this.status="parsing",this.data=y,this.collisionBoxArray=new qo;const ke=new k_(Object.keys(y.layers).sort()),Ie=new j_(this.tileID,this.promoteId);Ie.bucketLayerIDs=[];const ze={},Le=new Bp(256,256),Ve={featureIndex:Ie,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Le,availableImages:ee},We=I.familiesBySource[this.source];for(const Jt in We){const Zt=y.layers[Jt];if(!Zt)continue;let Tn=!1,An=!1;for(const Cn of We[Jt])Cn[0].type==="symbol"?Tn=!0:An=!0;if(this.isSymbolTile===!0&&!Tn||this.isSymbolTile===!1&&!An)continue;Zt.version===1&&$t(`Vector tile source "${this.source}" layer "${Jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const On=ke.encode(Jt),Qn=[];for(let Cn=0;Cn<Zt.length;Cn++){const Bn=Zt.feature(Cn),Vn=Ie.getId(Bn,Jt);Qn.push({feature:Bn,id:Vn,index:Cn,sourceLayerIndex:On})}for(const Cn of We[Jt]){const Bn=Cn[0];this.isSymbolTile!==void 0&&Bn.type==="symbol"!==this.isSymbolTile||Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||Bn.visibility!=="none"&&(Gp(Cn,this.zoom,ee),(ze[Bn.id]=Bn.createBucket({index:Ie.bucketLayerIDs.length,layers:Cn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:On,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:ee})).populate(Qn,Ve,this.tileID.canonical,this.tileTransform),Ie.bucketLayerIDs.push(Cn.map(Vn=>Vn.id)))}}let Ze,tt,ot,mt;Le.trim();const Et={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ft=xt(Ve.glyphDependencies,Jt=>Object.keys(Jt).map(Number));Object.keys(Ft).length?re.send("getGlyphs",{uid:this.uid,stacks:Ft},(Jt,Zt)=>{Ze||(Ze=Jt,tt=Zt,qt.call(this))},void 0,!1,Et):tt={};const Ht=Object.keys(Ve.iconDependencies);Ht.length?re.send("getImages",{icons:Ht,source:this.source,tileID:this.tileID,type:"icons"},(Jt,Zt)=>{Ze||(Ze=Jt,ot=Zt,qt.call(this))},void 0,!1,Et):ot={};const Nt=Object.keys(Ve.patternDependencies);function qt(){if(Ze)return ge(Ze);if(tt&&ot&&mt){const Jt=new V_(tt),Zt=new Gf(ot,mt);for(const Tn in ze){const An=ze[Tn];An instanceof Jl?(Gp(An.layers,this.zoom,ee),kg(An,tt,Jt.positions,ot,Zt.iconPositions,this.showCollisionBoxes,ee,this.tileID.canonical,this.tileZoom,this.projection)):An.hasPattern&&(An instanceof Id||An instanceof Td||An instanceof Ih)&&(Gp(An.layers,this.zoom,ee),An.addFeatures(Ve,this.tileID.canonical,Zt.patternPositions,ee,this.tileTransform))}this.status="done",ge(null,{buckets:It(ze).filter(Tn=>!Tn.isEmpty()),featureIndex:Ie,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jt.image,lineAtlas:Le,imageAtlas:Zt,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?ot:null,glyphPositions:this.returnDependencies?Jt.positions:null})}}Nt.length?re.send("getImages",{icons:Nt,source:this.source,tileID:this.tileID,type:"patterns"},(Jt,Zt)=>{Ze||(Ze=Jt,mt=Zt,qt.call(this))},void 0,!1,Et):mt={},qt.call(this)}}function Gp($,y,I){const ee=new Tt(y);for(const re of $)re.recalculate(ee,I)}class G_{constructor(y){this.entries={},this.scheduler=y}request(y,I,ee,re){const ge=this.entries[y]=this.entries[y]||{callbacks:[]};if(ge.result){const[ke,Ie]=ge.result;return this.scheduler?this.scheduler.add(()=>{re(ke,Ie)},I):re(ke,Ie),()=>{}}return ge.callbacks.push(re),ge.cancel||(ge.cancel=ee((ke,Ie)=>{ge.result=[ke,Ie];for(const ze of ge.callbacks)this.scheduler?this.scheduler.add(()=>{ze(ke,Ie)},I):ze(ke,Ie);setTimeout(()=>delete this.entries[y],3e3)})),()=>{ge.result||(ge.callbacks=ge.callbacks.filter(ke=>ke!==re),ge.callbacks.length||(ge.cancel(),delete this.entries[y]))}}}function q_($,y,I){const ee=JSON.stringify($.request);return $.data&&(this.deduped.entries[ee]={result:[null,$.data]}),this.deduped.request(ee,{type:"parseTile",isSymbolTile:$.isSymbolTile,zoom:$.tileZoom},re=>{const ge=_n($.request,(ke,Ie,ze,Le)=>{ke?re(ke):Ie&&re(null,{vectorTile:I?void 0:new Wc.VectorTile(new Rh(Ie)),rawData:Ie,cacheControl:ze,expires:Le})});return()=>{ge.cancel(),re()}},y)}j.ARRAY_TYPE=Zo,j.AUTH_ERR_MSG=un,j.Aabb=Bo,j.Actor=class{constructor($,y,I){this.target=$,this.parent=y,this.mapId=I,this.callbacks={},this.cancelCallbacks={},lt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=on()?$:be,this.scheduler=new Jg}send($,y,I,ee,re=!1,ge){const ke=Math.round(1e18*Math.random()).toString(36).substring(0,10);I&&(I.metadata=ge,this.callbacks[ke]=I);const Ie=Rt(this.globalScope)?void 0:[];return this.target.postMessage({id:ke,type:$,hasCallback:!!I,targetMapId:ee,mustQueue:re,sourceMapId:this.mapId,data:us(y,Ie)},Ie),{cancel:()=>{I&&delete this.callbacks[ke],this.target.postMessage({id:ke,type:"<cancel>",targetMapId:ee,sourceMapId:this.mapId})}}}receive($){const y=$.data,I=y.id;if(I&&(!y.targetMapId||this.mapId===y.targetMapId))if(y.type==="<cancel>"){const ee=this.cancelCallbacks[I];delete this.cancelCallbacks[I],ee&&ee.cancel()}else if(y.mustQueue||on()){const ee=this.callbacks[I];this.cancelCallbacks[I]=this.scheduler.add(()=>this.processTask(I,y),ee&&ee.metadata||{type:"message"})}else this.processTask(I,y)}processTask($,y){if(y.type==="<response>"){const I=this.callbacks[$];delete this.callbacks[$],I&&(y.error?I(el(y.error)):I(null,el(y.data)))}else{const I=Rt(this.globalScope)?void 0:[],ee=y.hasCallback?(ge,ke)=>{delete this.cancelCallbacks[$],this.target.postMessage({id:$,type:"<response>",sourceMapId:this.mapId,error:ge?us(ge):null,data:us(ke,I)},I)}:ge=>{},re=el(y.data);if(this.parent[y.type])this.parent[y.type](y.sourceMapId,re,ee);else if(this.parent.getWorkerSource){const ge=y.type.split(".");this.parent.getWorkerSource(y.sourceMapId,ge[0],re.source)[ge[1]](re,ee)}else ee(new Error(`Could not find function ${y.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},j.CanonicalTileID=Cd,j.Color=ii,j.ColorMode=As,j.CullFaceMode=Za,j.DEMData=Wd,j.DataConstantProperty=Wt,j.DedupedRequest=G_,j.DepthMode=Xu,j.EXTENT=kr,j.Elevation=class{isDataAvailableAtPoint($){const y=this._source();if(!y||$.y<0||$.y>1)return!1;const I=y.getSource().maxzoom,ee=1<<I,re=Math.floor($.x),ge=Math.floor(($.x-re)*ee),ke=Math.floor($.y*ee),Ie=this.findDEMTileFor(new So(I,re,I,ge,ke));return!(!Ie||!Ie.dem)}getAtPointOrZero($,y=0){return this.getAtPoint($,y)||0}getAtPoint($,y,I=!0){y==null&&(y=null);const ee=this._source();if(!ee||$.y<0||$.y>1)return y;const re=ee.getSource().maxzoom,ge=1<<re,ke=Math.floor($.x),Ie=$.x-ke,ze=new So(re,ke,re,Math.floor(Ie*ge),Math.floor($.y*ge)),Le=this.findDEMTileFor(ze);if(!Le||!Le.dem)return y;const Ve=Le.dem,We=1<<Le.tileID.canonical.z,Ze=(Ie*We-Le.tileID.canonical.x)*Ve.dim,tt=($.y*We-Le.tileID.canonical.y)*Ve.dim,ot=Math.floor(Ze),mt=Math.floor(tt);return(I?this.exaggeration():1)*Wr(Wr(Ve.get(ot,mt),Ve.get(ot,mt+1),tt-mt),Wr(Ve.get(ot+1,mt),Ve.get(ot+1,mt+1),tt-mt),Ze-ot)}getAtTileOffset($,y,I){const ee=1<<$.canonical.z;return this.getAtPointOrZero(new Xl($.wrap+($.canonical.x+y/kr)/ee,($.canonical.y+I/kr)/ee))}getAtTileOffsetFunc($,y,I,ee){return re=>{const ge=this.getAtTileOffset($,re.x,re.y),ke=ee.upVector($.canonical,re.x,re.y);return Ga(ke,ke,ge*ee.upVectorScale($.canonical,y,I).metersToTile),ke}}getForTilePoints($,y,I,ee){const re=Zd.create(this,$,ee);return!!re&&(y.forEach(ge=>{ge[2]=this.exaggeration()*re.getElevationAt(ge[0],ge[1],I)}),!0)}getMinMaxForTile($){const y=this.findDEMTileFor($);if(!y||!y.dem)return null;const I=y.dem.tree,ee=y.tileID,re=1<<$.canonical.z-ee.canonical.z;let ge=$.canonical.x/re-ee.canonical.x,ke=$.canonical.y/re-ee.canonical.y,Ie=0;for(let ze=0;ze<$.canonical.z-ee.canonical.z&&!I.leaves[Ie];ze++){ge*=2,ke*=2;const Le=2*Math.floor(ke)+Math.floor(ge);Ie=I.childOffsets[Ie]+Le,ge%=1,ke%=1}return{min:this.exaggeration()*I.minimums[Ie],max:this.exaggeration()*I.maximums[Ie]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast($,y,I){throw new Error("Pure virtual method called.")}pointCoordinate($){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor($){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},j.ErrorEvent=ni,j.EvaluationParameters=Tt,j.Event=ai,j.Evented=xr,j.FillExtrusionBucket=Ih,j.Frustum=up,j.FrustumCorners=cp,j.GLOBE_METERS_TO_ECEF=Mp,j.GLOBE_RADIUS=ul,j.GLOBE_SCALE_MATCH_LATITUDE=45,j.GLOBE_ZOOM_THRESHOLD_MAX=6,j.GLOBE_ZOOM_THRESHOLD_MIN=5,j.GlobeSharedBuffers=class{constructor($){this._createGrid($),this._createPoles($)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const $ of this._poleSegments)$.destroy();for(const $ of this._gridSegments)$.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const $ of this._wireframeSegments)$.destroy()}}_createGrid($){const y=new tr,I=new Dr,ee=65;for(let re=0;re<ee;re++)for(let ge=0;ge<ee;ge++)y.emplaceBack(ge,re);this._gridSegments=[];for(let re=0,ge=0;re<Hu.length;re++){const ke=Hu[re];for(let ze=0;ze<ke;ze++)for(let Le=0;Le<64;Le++){const Ve=ze*ee+Le;I.emplaceBack(Ve+1,Ve,Ve+ee),I.emplaceBack(Ve+ee,Ve+ee+1,Ve+1)}const Ie=64*ke*2;this._gridSegments.push(Bi.simpleSegment(0,ge,(ke+1)*ee,Ie)),ge+=Ie}this._gridBuffer=$.createVertexBuffer(y,$h.members),this._gridIndexBuffer=$.createIndexBuffer(I,!0)}_createPoles($){const y=new Dr;for(let re=0;re<=64;re++)y.emplaceBack(0,re+1,re+2);this._poleIndexBuffer=$.createIndexBuffer(y,!0);const I=new Ki,ee=new Ki;this._poleSegments=[];for(let re=0,ge=0;re<5;re++){const ke=360/(1<<re);I.emplaceBack(0,-ul,0,.5,0),ee.emplaceBack(0,-ul,0,.5,1);for(let Ie=0;Ie<=64;Ie++){const ze=Ie/64,Le=Wr(0,ke,ze),[Ve,We,Ze]=Wu(Rg,Dg,Le,ul);I.emplaceBack(Ve,We,Ze,ze,0),ee.emplaceBack(Ve,We,Ze,ze,1)}this._poleSegments.push(Bi.simpleSegment(ge,0,66,64)),ge+=66}this._poleNorthVertexBuffer=$.createVertexBuffer(I,u_,!1),this._poleSouthVertexBuffer=$.createVertexBuffer(ee,u_,!1)}getGridBuffers($){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[$]]}getPoleBuffers($){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[$]]}getWirefameBuffers($,y){if(!this._wireframeSegments){const I=new to,ee=64,re=ee+1;this._wireframeSegments=[];for(let ge=0,ke=0;ge<Hu.length;ge++){const Ie=Hu[ge];for(let Le=0;Le<Ie;Le++)for(let Ve=0;Ve<ee;Ve++){const We=Le*re+Ve;I.emplaceBack(We,We+1),I.emplaceBack(We,We+re),I.emplaceBack(We,We+re+1)}const ze=Ie*ee*3;this._wireframeSegments.push(Bi.simpleSegment(0,ke,(Ie+1)*re,ze)),ke+=ze}this._wireframeIndexBuffer=$.createIndexBuffer(I)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[y]]}},j.GlyphManager=Gu,j.ImagePosition=Ap,j.LineAtlas=Bp,j.LngLat=ti,j.LngLatBounds=Ua,j.LocalGlyphMode=kp,j.MAX_MERCATOR_LATITUDE=ba,j.MercatorCoordinate=Xl,j.ONE_EM=ho,j.OverscaledTileID=So,j.Properties=Dn,j.RGBAImage=Xo,j.Ray=lp,j.RequestManager=class{constructor($,y,I){this._transformRequestFn=$,this._customAccessToken=y,this._silenceAuthErrors=!!I,this._createSkuToken()}_createSkuToken(){const $=function(){let y="";for(let I=0;I<10;I++)y+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",qn,y].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=$.token,this._skuTokenExpiresAt=$.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest($,y){return this._transformRequestFn&&this._transformRequestFn($,y)||{url:$}}normalizeStyleURL($,y){if(!yn($))return $;const I=mr($);return I.path=`/styles/v1${I.path}`,this._makeAPIURL(I,this._customAccessToken||y)}normalizeGlyphsURL($,y){if(!yn($))return $;const I=mr($);return I.path=`/fonts/v1${I.path}`,this._makeAPIURL(I,this._customAccessToken||y)}normalizeSourceURL($,y,I,ee){if(!yn($))return $;const re=mr($);return re.path=`/v4/${re.authority}.json`,re.params.push("secure"),I&&re.params.push(`language=${I}`),ee&&re.params.push(`worldview=${ee}`),this._makeAPIURL(re,this._customAccessToken||y)}normalizeSpriteURL($,y,I,ee){const re=mr($);return yn($)?(re.path=`/styles/v1${re.path}/sprite${y}${I}`,this._makeAPIURL(re,this._customAccessToken||ee)):(re.path+=`${y}${I}`,Cr(re))}normalizeTileURL($,y,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),$&&!yn($))return $;const ee=mr($);ee.path=ee.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${y||I&&ee.authority!=="raster"&&I===512?"@2x":""}${wn.supported?".webp":"$1"}`),ee.authority==="raster"?ee.path=`/${xn.RASTER_URL_PREFIX}${ee.path}`:(ee.path=ee.path.replace(/^.+\/v4\//,"/"),ee.path=`/${xn.TILE_URL_VERSION}${ee.path}`);const re=this._customAccessToken||function(ge){for(const ke of ge){const Ie=ke.match(/^access_token=(.*)$/);if(Ie)return Ie[1]}return null}(ee.params)||xn.ACCESS_TOKEN;return xn.REQUIRE_ACCESS_TOKEN&&re&&this._skuToken&&ee.params.push(`sku=${this._skuToken}`),this._makeAPIURL(ee,re)}canonicalizeTileURL($,y){const I=mr($);if(!I.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!I.path.match(/\.[\w]+$/))return $;let ee="mapbox://";I.path.match(/^\/raster\/v1\//)?ee+=`raster/${I.path.replace(`/${xn.RASTER_URL_PREFIX}/`,"")}`:ee+=`tiles/${I.path.replace(`/${xn.TILE_URL_VERSION}/`,"")}`;let re=I.params;return y&&(re=re.filter(ge=>!ge.match(/^access_token=/))),re.length&&(ee+=`?${re.join("&")}`),ee}canonicalizeTileset($,y){const I=!!y&&yn(y),ee=[];for(const re of $.tiles||[])Rn(re)?ee.push(this.canonicalizeTileURL(re,I)):ee.push(re);return ee}_makeAPIURL($,y){const I="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ee=mr(xn.API_URL);if($.protocol=ee.protocol,$.authority=ee.authority,$.protocol==="http"){const re=$.params.indexOf("secure");re>=0&&$.params.splice(re,1)}if(ee.path!=="/"&&($.path=`${ee.path}${$.path}`),!xn.REQUIRE_ACCESS_TOKEN)return Cr($);if(y=y||xn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!y)throw new Error(`An API access token is required to use Mapbox GL. ${I}`);if(y[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${I}`)}return $.params=$.params.filter(re=>re.indexOf("access_token")===-1),$.params.push(`access_token=${y||""}`),Cr($)}},j.ResourceType=tn,j.SegmentVector=Bi,j.SourceCache=Xc,j.StencilMode=jp,j.StructArrayLayout1ui2=go,j.StructArrayLayout2f1f2i16=oa,j.StructArrayLayout2i4=tr,j.StructArrayLayout2ui4=to,j.StructArrayLayout3f12=vi,j.StructArrayLayout3ui6=Dr,j.StructArrayLayout4i8=yr,j.StructArrayLayout5f20=Ki,j.Texture=Gh,j.Tile=Fp,j.Transitionable=zt,j.Uniform1f=Ou,j.Uniform1i=class extends Na{constructor($){super($),this.current=0}set($,y,I){this.fetchUniformLocation($,y)&&this.current!==I&&(this.current=I,this.gl.uniform1i(this.location,I))}},j.Uniform2f=class extends Na{constructor($){super($),this.current=[0,0]}set($,y,I){this.fetchUniformLocation($,y)&&(I[0]===this.current[0]&&I[1]===this.current[1]||(this.current=I,this.gl.uniform2f(this.location,I[0],I[1])))}},j.Uniform3f=class extends Na{constructor($){super($),this.current=[0,0,0]}set($,y,I){this.fetchUniformLocation($,y)&&(I[0]===this.current[0]&&I[1]===this.current[1]&&I[2]===this.current[2]||(this.current=I,this.gl.uniform3f(this.location,I[0],I[1],I[2])))}},j.Uniform4f=od,j.UniformColor=ad,j.UniformMatrix2f=class extends Na{constructor($){super($),this.current=Qd}set($,y,I){if(this.fetchUniformLocation($,y)){for(let ee=0;ee<4;ee++)if(I[ee]!==this.current[ee]){this.current=I,this.gl.uniformMatrix2fv(this.location,!1,I);break}}}},j.UniformMatrix3f=class extends Na{constructor($){super($),this.current=Kd}set($,y,I){if(this.fetchUniformLocation($,y)){for(let ee=0;ee<9;ee++)if(I[ee]!==this.current[ee]){this.current=I,this.gl.uniformMatrix3fv(this.location,!1,I);break}}}},j.UniformMatrix4f=class extends Na{constructor($){super($),this.current=sd}set($,y,I){if(this.fetchUniformLocation($,y)){if(I[12]!==this.current[12]||I[0]!==this.current[0])return this.current=I,void this.gl.uniformMatrix4fv(this.location,!1,I);for(let ee=1;ee<16;ee++)if(I[ee]!==this.current[ee]){this.current=I,this.gl.uniformMatrix4fv(this.location,!1,I);break}}}},j.UnwrappedTileID=Pf,j.ValidationError=cr,j.VectorTileWorkerSource=class extends xr{constructor($,y,I,ee,re){super(),this.actor=$,this.layerIndex=y,this.availableImages=I,this.loadVectorData=re||q_,this.loading={},this.loaded={},this.deduped=new G_($.scheduler),this.isSpriteLoaded=ee,this.scheduler=$.scheduler}loadTile($,y){const I=$.uid,ee=$&&$.request,re=ee&&ee.collectResourceTiming,ge=this.loading[I]=new iy($);ge.abort=this.loadVectorData($,(ke,Ie)=>{const ze=!this.loading[I];if(delete this.loading[I],ze||ke||!Ie)return ge.status="done",ze||(this.loaded[I]=ge),y(ke);const Le=Ie.rawData,Ve={};Ie.expires&&(Ve.expires=Ie.expires),Ie.cacheControl&&(Ve.cacheControl=Ie.cacheControl),ge.vectorTile=Ie.vectorTile||new Wc.VectorTile(new Rh(Le));const We=()=>{ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ze,tt)=>{if(Ze||!tt)return y(Ze);const ot={};if(re){const mt=Pn(ee);mt.length>0&&(ot.resourceTiming=JSON.parse(JSON.stringify(mt)))}y(null,At({rawTileData:Le.slice(0)},tt,Ve,ot))})};this.isSpriteLoaded?We():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(We,{type:"parseTile",isSymbolTile:$.isSymbolTile,zoom:$.tileZoom}):We()}),this.loaded=this.loaded||{},this.loaded[I]=ge})}reloadTile($,y){const I=this.loaded,ee=$.uid,re=this;if(I&&I[ee]){const ge=I[ee];ge.showCollisionBoxes=$.showCollisionBoxes,ge.enableTerrain=!!$.enableTerrain,ge.projection=$.projection,ge.tileTransform=Zc($.tileID.canonical,$.projection);const ke=(Ie,ze)=>{const Le=ge.reloadCallback;Le&&(delete ge.reloadCallback,ge.parse(ge.vectorTile,re.layerIndex,this.availableImages,re.actor,Le)),y(Ie,ze)};ge.status==="parsing"?ge.reloadCallback=ke:ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,ke):ke())}}abortTile($,y){const I=$.uid,ee=this.loading[I];ee&&(ee.abort&&ee.abort(),delete this.loading[I]),y()}removeTile($,y){const I=this.loaded,ee=$.uid;I&&I[ee]&&delete I[ee],y()}},j.WritingMode=sa,j.ZoomHistory=Oc,j.add=Yl,j.addDynamicAttributes=Gd,j.adjoint=function($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=y[4],Ie=y[5],ze=y[6],Le=y[7],Ve=y[8];return $[0]=ke*Ve-Ie*Le,$[1]=re*Le-ee*Ve,$[2]=ee*Ie-re*ke,$[3]=Ie*ze-ge*Ve,$[4]=I*Ve-re*ze,$[5]=re*ge-I*Ie,$[6]=ge*Le-ke*ze,$[7]=ee*ze-I*Le,$[8]=I*ke-ee*ge,$},j.asyncAll=pt,j.bezier=Fe,j.bindAll=lt,j.boundsAttributes=I_,j.bufferConvexPolygon=function($,y){const I=[];for(let ee=0;ee<$.length;ee++){const re=Je(ee-1,-1,$.length-1),ge=Je(ee+1,-1,$.length-1),ke=$[ee],Ie=$[ge],ze=$[re].sub(ke).unit(),Le=Ie.sub(ke).unit(),Ve=Le.angleWithSep(ze.x,ze.y),We=ze.add(Le).unit().mult(-1*y/Math.sin(Ve/2));I.push(ke.add(We))}return I},j.cacheEntryPossiblyAdded=function($){Ut++,Ut>Ea&&($.getActor().send("enforceCacheSizeLimit",No),Ut=0)},j.calculateGlobeLabelMatrix=function($,y){const{x:I,y:ee}=$.point,re=m_(I,ee,$.worldSize/$._pixelsPerMercatorPixel,0,0);return $u(re,re,Rp(vs(y)))},j.calculateGlobeMatrix=function($){const{x:y,y:I}=$.point,{lng:ee,lat:re}=$._center;return m_(y,I,$.worldSize,ee,re)},j.calculateGlobeMercatorMatrix=function($){const y=$.pixelsPerMeter,I=y/Lo(1,$.center.lat),ee=gs(new Float64Array(16));return xh(ee,ee,[$.point.x,$.point.y,0]),Gc(ee,ee,[I,I,y]),Float32Array.from(ee)},j.circumferenceAtLatitude=gh,j.clamp=Ye,j.clearTileCache=function($){const y=Bt(),I=[];for(const ee in xi)y&&I.push(y.delete(ee)),delete xi[ee];$&&Promise.all(I).catch($).then(()=>$())},j.clipLine=n_,j.clone=function($){var y=new Zo(16);return y[0]=$[0],y[1]=$[1],y[2]=$[2],y[3]=$[3],y[4]=$[4],y[5]=$[5],y[6]=$[6],y[7]=$[7],y[8]=$[8],y[9]=$[9],y[10]=$[10],y[11]=$[11],y[12]=$[12],y[13]=$[13],y[14]=$[14],y[15]=$[15],y},j.clone$1=Vt,j.collisionCircleLayout=Qm,j.config=xn,j.conjugate=function($,y){return $[0]=-y[0],$[1]=-y[1],$[2]=-y[2],$[3]=y[3],$},j.create=function(){var $=new Zo(16);return Zo!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[4]=0,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[11]=0,$[12]=0,$[13]=0,$[14]=0),$[0]=1,$[5]=1,$[10]=1,$[15]=1,$},j.create$1=Kp,j.createExpression=rs,j.createLayout=Ln,j.createStyleLayer=function($){return $.type==="custom"?new Xg($):new Kg[$.type]($)},j.cross=sp,j.degToRad=Oe,j.distance=function($,y){return Math.hypot(y[0]-$[0],y[1]-$[1],y[2]-$[2])},j.div=function($,y,I){return $[0]=y[0]/I[0],$[1]=y[1]/I[1],$[2]=y[2]/I[2],$},j.dot=Aa,j.ease=Xe,j.easeCubicInOut=$e,j.emitValidationErrors=Pc,j.endsWith=ft,j.enforceCacheSizeLimit=function($){for(const y in xi)ct(y),xi[y].then(I=>{I.keys().then(ee=>{for(let re=0;re<ee.length-$;re++)I.delete(ee[re])})})},j.evaluateSizeForFeature=Md,j.evaluateSizeForZoom=Nu,j.evaluateVariableOffset=s_,j.evented=ut,j.exactEquals=function($,y){return $[0]===y[0]&&$[1]===y[1]&&$[2]===y[2]&&$[3]===y[3]},j.exactEquals$1=function($,y){return $[0]===y[0]&&$[1]===y[1]&&$[2]===y[2]},j.exported=zn,j.exported$1=wn,j.extend=At,j.extend$1=fo,j.fillExtrusionHeightLift=Sf,j.filterObject=ht,j.fromMat4=function($,y){return $[0]=y[0],$[1]=y[1],$[2]=y[2],$[3]=y[4],$[4]=y[5],$[5]=y[6],$[6]=y[8],$[7]=y[9],$[8]=y[10],$},j.fromQuat=function($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=I+I,Ie=ee+ee,ze=re+re,Le=I*ke,Ve=ee*ke,We=ee*Ie,Ze=re*ke,tt=re*Ie,ot=re*ze,mt=ge*ke,Et=ge*Ie,Ft=ge*ze;return $[0]=1-We-ot,$[1]=Ve+Ft,$[2]=Ze-Et,$[3]=0,$[4]=Ve-Ft,$[5]=1-Le-ot,$[6]=tt+mt,$[7]=0,$[8]=Ze+Et,$[9]=tt-mt,$[10]=1-Le-We,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$},j.fromRotation=function($,y){var I=Math.sin(y),ee=Math.cos(y);return $[0]=ee,$[1]=I,$[2]=0,$[3]=-I,$[4]=ee,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$},j.fromScaling=Qp,j.furthestTileCorner=function($){const y=Math.round(($+45+360)%360/90)%4;return Ue[y]},j.getAABBPointSquareDist=function($,y,I){let ee=0;for(let re=0;re<2;++re){const ge=I?I[re]:0;$[re]>ge&&(ee+=($[re]-ge)*($[re]-ge)),y[re]<ge&&(ee+=(ge-y[re])*(ge-y[re]))}return ee},j.getAnchorAlignment=Tp,j.getAnchorJustification=Sp,j.getBounds=function($){let y=1/0,I=1/0,ee=-1/0,re=-1/0;for(const ge of $)y=Math.min(y,ge.x),I=Math.min(I,ge.y),ee=Math.max(ee,ge.x),re=Math.max(re,ge.y);return{min:new xe(y,I),max:new xe(ee,re)}},j.getColumn=hn,j.getGridMatrix=function($,y,I){const ee=y.getNorth(),re=y.getSouth(),ge=y.getWest(),ke=.015625;return[0,(y.getEast()-ge)*ke,1<<$.z,(re-ee)/Hu[I],0,$.y,ee,ge,ke]},j.getImage=Er,j.getJSON=function($,y){return nn(At($,{type:"json"}),y)},j.getLatitudinalLod=function($){const y=80.051129;$=Ye($,-80.051129,y)/y*90;const I=Math.pow(Math.abs(Math.sin(Oe($))),3);return Math.round(I*(Hu.length-1))},j.getMapSessionAPI=Li,j.getPerformanceMeasurement=Pn,j.getProjection=E_,j.getRTLTextPluginStatus=gt,j.getReferrer=dn,j.getTilePoint=function($,{x:y,y:I},ee=0){return new xe(((y-ee)*$.scale-$.x)*kr,(I*$.scale-$.y)*kr)},j.getTileVec3=function($,y,I=0){return Lu(((y.x-I)*$.scale-$.x)*kr,(y.y*$.scale-$.y)*kr,hd(y.z,y.y))},j.getVideo=function($,y){const I=be.document.createElement("video");I.muted=!0,I.onloadstart=function(){y(null,I)};for(let ee=0;ee<$.length;ee++){const re=be.document.createElement("source");Hn($[ee])||(I.crossOrigin="Anonymous"),re.src=$[ee],I.appendChild(re)}return{cancel:()=>{}}},j.globeCenterToScreenPoint=function($){const y=[0,0,0],I=gs(new Float64Array(16));return $u(I,$.pixelMatrix,$.globeMatrix),Zi(y,y,I),new xe(y[0],y[1])},j.globeDenormalizeECEF=Rp,j.globeECEFOrigin=function($,y){const I=[0,0,0];return Zi(I,I,Bh(vs(y.canonical))),Zi(I,I,$),I},j.globeNormalizeECEF=Bh,j.globePixelsToTileUnits=function($,y){return kr/(512*Math.pow(2,$))*Fd(vs(y))},j.globePoleMatrixForTile=function($,y,I){const ee=gs(new Float64Array(16)),re=(y/(1<<$)-.5)*Math.PI*2;return yd(ee,I.globeMatrix,re),Float32Array.from(ee)},j.globeTileBounds=vs,j.globeTiltAtLngLat=g_,j.globeToMercatorTransition=Fh,j.globeUseCustomAntiAliasing=function($,y,I){const ee=Fh(I.zoom),re=$.style.map._antialias,ge=!!y.extStandardDerivatives,ke=y.extStandardDerivativesForceOff||$.terrain&&$.terrain.exaggeration()>0;return ee===0&&!re&&!ke&&ge},j.identity=gs,j.identity$1=af,j.invert=tp,j.isFullscreen=function(){return!!be.document.fullscreenElement||!!be.document.webkitFullscreenElement},j.isLngLatBehindGlobe=function($,y){return g_($,y)>Math.PI/2*1.01},j.isMapAuthenticated=function($){return Ti.has($)},j.isMapboxURL=yn,j.isSafariWithAntialiasingBug=function($){const y=$.navigator?$.navigator.userAgent:null;return!!Rt($)&&y&&(y.match("Version/15.4")||y.match("Version/15.5")||y.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},j.latFromMercatorY=Qi,j.len=im,j.length=bh,j.length$1=function($){return Math.hypot($[0],$[1],$[2],$[3])},j.loadVectorTile=q_,j.makeRequest=nn,j.mapValue=function($,y,I,ee,re){return Ye(($-y)/(I-y)*(re-ee)+ee,ee,re)},j.mercatorScale=dd,j.mercatorXfromLng=xa,j.mercatorYfromLat=Va,j.mercatorZfromAltitude=Lo,j.mul=nm,j.mul$1=rm,j.multiply=$u,j.multiply$1=function($,y,I){var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=y[4],ze=y[5],Le=y[6],Ve=y[7],We=y[8],Ze=I[0],tt=I[1],ot=I[2],mt=I[3],Et=I[4],Ft=I[5],Ht=I[6],Nt=I[7],qt=I[8];return $[0]=Ze*ee+tt*ke+ot*Le,$[1]=Ze*re+tt*Ie+ot*Ve,$[2]=Ze*ge+tt*ze+ot*We,$[3]=mt*ee+Et*ke+Ft*Le,$[4]=mt*re+Et*Ie+Ft*Ve,$[5]=mt*ge+Et*ze+Ft*We,$[6]=Ht*ee+Nt*ke+qt*Le,$[7]=Ht*re+Nt*Ie+qt*Ve,$[8]=Ht*ge+Nt*ze+qt*We,$},j.multiply$2=tf,j.nextPowerOfTwo=it,j.normalize=Co,j.normalize$1=function($,y){var I=y[0],ee=y[1],re=y[2],ge=y[3],ke=I*I+ee*ee+re*re+ge*ge;return ke>0&&(ke=1/Math.sqrt(ke)),$[0]=I*ke,$[1]=ee*ke,$[2]=re*ke,$[3]=ge*ke,$},j.number=Wr,j.ortho=function($,y,I,ee,re,ge,ke){var Ie=1/(y-I),ze=1/(ee-re),Le=1/(ge-ke);return $[0]=-2*Ie,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=-2*ze,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=2*Le,$[11]=0,$[12]=(y+I)*Ie,$[13]=(re+ee)*ze,$[14]=(ke+ge)*Le,$[15]=1,$},j.pbf=Rh,j.perspective=function($,y,I,ee,re){var ge,ke=1/Math.tan(y/2);return $[0]=ke/I,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=ke,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[11]=-1,$[12]=0,$[13]=0,$[15]=0,re!=null&&re!==1/0?($[10]=(re+ee)*(ge=1/(ee-re)),$[14]=2*re*ee*ge):($[10]=-1,$[14]=-2*ee),$},j.pick=function($,y){const I={};for(let ee=0;ee<y.length;ee++){const re=y[ee];re in $&&(I[re]=$[re])}return I},j.plugin=kt,j.pointGeometry=xe,j.polygonContainsPoint=li,j.polygonIntersectsBox=wi,j.polygonIntersectsPolygon=cn,j.polygonizeBounds=function($,y,I=0,ee=!0){const re=new xe(I,I),ge=$.sub(re),ke=y.add(re),Ie=[ge,new xe(ke.x,ge.y),ke,new xe(ge.x,ke.y)];return ee&&Ie.push(ge.clone()),Ie},j.posAttributes=$h,j.postMapLoadEvent=Ur,j.postTurnstileEvent=Fr,j.potpack=bp,j.prevPowerOfTwo=function($){return $<=1?1:Math.pow(2,Math.floor(Math.log($)/Math.LN2))},j.radToDeg=De,j.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],j.registerForPluginStateChange=function($){return $({pluginStatus:Ne,pluginURL:qe}),ut.on("pluginStateChange",$),$},j.removeAuthState=function($){Ti.delete($)},j.renderColorRamp=dp,j.resample=pd,j.rotateX=np,j.rotateX$1=sf,j.rotateY=yd,j.rotateY$1=lf,j.rotateZ=function($,y,I){var ee=Math.sin(I),re=Math.cos(I),ge=y[0],ke=y[1],Ie=y[2],ze=y[3],Le=y[4],Ve=y[5],We=y[6],Ze=y[7];return y!==$&&($[8]=y[8],$[9]=y[9],$[10]=y[10],$[11]=y[11],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[0]=ge*re+Le*ee,$[1]=ke*re+Ve*ee,$[2]=Ie*re+We*ee,$[3]=ze*re+Ze*ee,$[4]=Le*re-ge*ee,$[5]=Ve*re-ke*ee,$[6]=We*re-Ie*ee,$[7]=Ze*re-ze*ee,$},j.rotateZ$1=function($,y,I){I*=.5;var ee=y[0],re=y[1],ge=y[2],ke=y[3],Ie=Math.sin(I),ze=Math.cos(I);return $[0]=ee*ze+re*Ie,$[1]=re*ze-ee*Ie,$[2]=ge*ze+ke*Ie,$[3]=ke*ze-ge*Ie,$},j.scale=Gc,j.scale$1=rf,j.scale$2=Ga,j.scaleAndAdd=vd,j.setCacheLimits=function($,y){No=$,Ea=y},j.setColumn=function($,y,I){$[4*y+0]=I[0],$[4*y+1]=I[1],$[4*y+2]=I[2],$[4*y+3]=I[3]},j.setRTLTextPlugin=function($,y,I=!1){if(Ne===we||Ne===Pe||Ne===Re)throw new Error("setRTLTextPlugin cannot be called multiple times.");qe=zn.resolveURL($),Ne=we,Be=y,Qe(),I||Mt()},j.smoothstep=He,j.spec=gn,j.storeAuthState=function($,y){y?Ti.add($):Ti.delete($)},j.sub=qa,j.subtract=ip,j.symbolSize=Jm,j.tileAABB=function($,y,I,ee,re,ge,ke,Ie,ze){if(ze.name==="globe")return Og($,y,new Cd(I,ee,re));const Le=Zc({z:I,x:ee,y:re},ze);return new Bo([(ge+Le.x/Le.scale)*y,y*(Le.y/Le.scale),ke],[(ge+Le.x2/Le.scale)*y,y*(Le.y2/Le.scale),Ie])},j.tileCornersToBounds=Ld,j.tileTransform=Zc,j.transformMat3=function($,y,I){var ee=y[0],re=y[1],ge=y[2];return $[0]=ee*I[0]+re*I[3]+ge*I[6],$[1]=ee*I[1]+re*I[4]+ge*I[7],$[2]=ee*I[2]+re*I[5]+ge*I[8],$},j.transformMat4=Zi,j.transformMat4$1=qc,j.transformQuat=nf,j.transitionTileAABBinECEF=p_,j.translate=xh,j.transpose=function($,y){if($===y){var I=y[1],ee=y[2],re=y[5];$[1]=y[3],$[2]=y[6],$[3]=I,$[5]=y[7],$[6]=ee,$[7]=re}else $[0]=y[0],$[1]=y[3],$[2]=y[6],$[3]=y[1],$[4]=y[4],$[5]=y[7],$[6]=y[2],$[7]=y[5],$[8]=y[8];return $},j.triggerPluginCompletionEvent=Ke,j.uniqueId=rt,j.updateGlobeVertexNormal=function($,y,I,ee,re){const ge=5*y+2;$.float32[ge+0]=I,$.float32[ge+1]=ee,$.float32[ge+2]=re},j.validateCustomStyleLayer=function($){const y=[],I=$.id;return I===void 0&&y.push({message:`layers.${I}: missing required property "id"`}),$.render===void 0&&y.push({message:`layers.${I}: missing required method "render"`}),$.renderingMode&&$.renderingMode!=="2d"&&$.renderingMode!=="3d"&&y.push({message:`layers.${I}: property "renderingMode" must be either "2d" or "3d"`}),y},j.validateFilter=$=>Ao(Ra($)),j.validateFog=$=>Ao(wu($)),j.validateLayer=$=>Ao($l($)),j.validateLight=$=>Ao(Au($)),j.validateSource=$=>Ao(bu($)),j.validateStyle=Bl,j.validateTerrain=$=>Ao(ls($)),j.values=It,j.vectorTile=Wc,j.version=Pt,j.warnOnce=$t,j.window=be,j.wrap=Je}),ne(["./shared"],function(j){function be(Bt){if(typeof Bt=="number"||typeof Bt=="boolean"||typeof Bt=="string"||Bt==null)return JSON.stringify(Bt);if(Array.isArray(Bt)){let _t="[";for(const Lt of Bt)_t+=`${be(Lt)},`;return`${_t}]`}let ct="{";for(const _t of Object.keys(Bt).sort())ct+=`${_t}:${be(Bt[_t])},`;return`${ct}}`}function ce(Bt){let ct="";for(const _t of j.refProperties)ct+=`/${be(Bt[_t])}`;return ct}class ye{constructor(ct){this.keyCache={},ct&&this.replace(ct)}replace(ct){this._layerConfigs={},this._layers={},this.update(ct,[])}update(ct,_t){for(const Ut of ct)this._layerConfigs[Ut.id]=Ut,(this._layers[Ut.id]=j.createStyleLayer(Ut)).compileFilter(),this.keyCache[Ut.id]&&delete this.keyCache[Ut.id];for(const Ut of _t)delete this.keyCache[Ut],delete this._layerConfigs[Ut],delete this._layers[Ut];this.familiesBySource={};const Lt=function(Ut,tn){const fn={};for(let nn=0;nn<Ut.length;nn++){const _n=tn&&tn[Ut[nn].id]||ce(Ut[nn]);tn&&(tn[Ut[nn].id]=_n);let jn=fn[_n];jn||(jn=fn[_n]=[]),jn.push(Ut[nn])}const dn=[];for(const nn in fn)dn.push(fn[nn]);return dn}(j.values(this._layerConfigs),this.keyCache);for(const Ut of Lt){const tn=Ut.map(sr=>this._layers[sr.id]),fn=tn[0];if(fn.visibility==="none")continue;const dn=fn.source||"";let nn=this.familiesBySource[dn];nn||(nn=this.familiesBySource[dn]={});const _n=fn.sourceLayer||"_geojsonTileLayer";let jn=nn[_n];jn||(jn=nn[_n]=[]),jn.push(tn)}}}class xe{loadTile(ct,_t){const{uid:Lt,encoding:Ut,rawImageData:tn,padding:fn,buildQuadTree:dn}=ct,nn=j.window.ImageBitmap&&tn instanceof j.window.ImageBitmap?this.getImageData(tn,fn):tn;_t(null,new j.DEMData(Lt,nn,Ut,fn<1,dn))}getImageData(ct,_t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ct.width,ct.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ct.width,this.offscreenCanvas.height=ct.height,this.offscreenCanvasContext.drawImage(ct,0,0,ct.width,ct.height);const Lt=this.offscreenCanvasContext.getImageData(-_t,-_t,ct.width+2*_t,ct.height+2*_t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Lt}}var Ee=function Bt(ct,_t){var Lt,Ut=ct&&ct.type;if(Ut==="FeatureCollection")for(Lt=0;Lt<ct.features.length;Lt++)Bt(ct.features[Lt],_t);else if(Ut==="GeometryCollection")for(Lt=0;Lt<ct.geometries.length;Lt++)Bt(ct.geometries[Lt],_t);else if(Ut==="Feature")Bt(ct.geometry,_t);else if(Ut==="Polygon")Ce(ct.coordinates,_t);else if(Ut==="MultiPolygon")for(Lt=0;Lt<ct.coordinates.length;Lt++)Ce(ct.coordinates[Lt],_t);return ct};function Ce(Bt,ct){if(Bt.length!==0){Se(Bt[0],ct);for(var _t=1;_t<Bt.length;_t++)Se(Bt[_t],!ct)}}function Se(Bt,ct){for(var _t=0,Lt=0,Ut=0,tn=Bt.length,fn=tn-1;Ut<tn;fn=Ut++){var dn=(Bt[Ut][0]-Bt[fn][0])*(Bt[fn][1]+Bt[Ut][1]),nn=_t+dn;Lt+=Math.abs(_t)>=Math.abs(dn)?_t-nn+dn:dn-nn+_t,_t=nn}_t+Lt>=0!=!!ct&&Bt.reverse()}const Oe=j.vectorTile.VectorTileFeature.prototype.toGeoJSON;class De{constructor(ct){this._feature=ct,this.extent=j.EXTENT,this.type=ct.type,this.properties=ct.tags,"id"in ct&&!isNaN(ct.id)&&(this.id=parseInt(ct.id,10))}loadGeometry(){if(this._feature.type===1){const ct=[];for(const _t of this._feature.geometry)ct.push([new j.pointGeometry(_t[0],_t[1])]);return ct}{const ct=[];for(const _t of this._feature.geometry){const Lt=[];for(const Ut of _t)Lt.push(new j.pointGeometry(Ut[0],Ut[1]));ct.push(Lt)}return ct}}toGeoJSON(ct,_t,Lt){return Oe.call(this,ct,_t,Lt)}}class Ue{constructor(ct){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=j.EXTENT,this.length=ct.length,this._features=ct}feature(ct){return new De(this._features[ct])}}var $e=j.vectorTile.VectorTileFeature,Fe=Xe;function Xe(Bt,ct){this.options=ct||{},this.features=Bt,this.length=Bt.length}function Ye(Bt,ct){this.id=typeof Bt.id=="number"?Bt.id:void 0,this.type=Bt.type,this.rawGeometry=Bt.type===1?[Bt.geometry]:Bt.geometry,this.properties=Bt.tags,this.extent=ct||4096}Xe.prototype.feature=function(Bt){return new Ye(this.features[Bt],this.options.extent)},Ye.prototype.loadGeometry=function(){var Bt=this.rawGeometry;this.geometry=[];for(var ct=0;ct<Bt.length;ct++){for(var _t=Bt[ct],Lt=[],Ut=0;Ut<_t.length;Ut++)Lt.push(new j.pointGeometry(_t[Ut][0],_t[Ut][1]));this.geometry.push(Lt)}return this.geometry},Ye.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Bt=this.geometry,ct=1/0,_t=-1/0,Lt=1/0,Ut=-1/0,tn=0;tn<Bt.length;tn++)for(var fn=Bt[tn],dn=0;dn<fn.length;dn++){var nn=fn[dn];ct=Math.min(ct,nn.x),_t=Math.max(_t,nn.x),Lt=Math.min(Lt,nn.y),Ut=Math.max(Ut,nn.y)}return[ct,Lt,_t,Ut]},Ye.prototype.toGeoJSON=$e.prototype.toGeoJSON;var He=pt,Je=Fe;function pt(Bt){var ct=new j.pbf;return function(_t,Lt){for(var Ut in _t.layers)Lt.writeMessage(3,It,_t.layers[Ut])}(Bt,ct),ct.finish()}function It(Bt,ct){var _t;ct.writeVarintField(15,Bt.version||1),ct.writeStringField(1,Bt.name||""),ct.writeVarintField(5,Bt.extent||4096);var Lt={keys:[],values:[],keycache:{},valuecache:{}};for(_t=0;_t<Bt.length;_t++)Lt.feature=Bt.feature(_t),ct.writeMessage(2,At,Lt);var Ut=Lt.keys;for(_t=0;_t<Ut.length;_t++)ct.writeStringField(3,Ut[_t]);var tn=Lt.values;for(_t=0;_t<tn.length;_t++)ct.writeMessage(4,dt,tn[_t])}function At(Bt,ct){var _t=Bt.feature;_t.id!==void 0&&ct.writeVarintField(1,_t.id),ct.writeMessage(2,bt,Bt),ct.writeVarintField(3,_t.type),ct.writeMessage(4,it,_t)}function bt(Bt,ct){var _t=Bt.feature,Lt=Bt.keys,Ut=Bt.values,tn=Bt.keycache,fn=Bt.valuecache;for(var dn in _t.properties){var nn=_t.properties[dn],_n=tn[dn];if(nn!==null){_n===void 0&&(Lt.push(dn),tn[dn]=_n=Lt.length-1),ct.writeVarint(_n);var jn=typeof nn;jn!=="string"&&jn!=="boolean"&&jn!=="number"&&(nn=JSON.stringify(nn));var sr=jn+":"+nn,Hn=fn[sr];Hn===void 0&&(Ut.push(nn),fn[sr]=Hn=Ut.length-1),ct.writeVarint(Hn)}}}function rt(Bt,ct){return(ct<<3)+(7&Bt)}function nt(Bt){return Bt<<1^Bt>>31}function it(Bt,ct){for(var _t=Bt.loadGeometry(),Lt=Bt.type,Ut=0,tn=0,fn=_t.length,dn=0;dn<fn;dn++){var nn=_t[dn],_n=1;Lt===1&&(_n=nn.length),ct.writeVarint(rt(1,_n));for(var jn=Lt===3?nn.length-1:nn.length,sr=0;sr<jn;sr++){sr===1&&Lt!==1&&ct.writeVarint(rt(2,jn-1));var Hn=nn[sr].x-Ut,Ar=nn[sr].y-tn;ct.writeVarint(nt(Hn)),ct.writeVarint(nt(Ar)),Ut+=Hn,tn+=Ar}Lt===3&&ct.writeVarint(rt(7,1))}}function dt(Bt,ct){var _t=typeof Bt;_t==="string"?ct.writeStringField(1,Bt):_t==="boolean"?ct.writeBooleanField(7,Bt):_t==="number"&&(Bt%1!=0?ct.writeDoubleField(3,Bt):Bt<0?ct.writeSVarintField(6,Bt):ct.writeVarintField(5,Bt))}function lt(Bt,ct,_t,Lt,Ut,tn){if(Ut-Lt<=_t)return;const fn=Lt+Ut>>1;ft(Bt,ct,fn,Lt,Ut,tn%2),lt(Bt,ct,_t,Lt,fn-1,tn+1),lt(Bt,ct,_t,fn+1,Ut,tn+1)}function ft(Bt,ct,_t,Lt,Ut,tn){for(;Ut>Lt;){if(Ut-Lt>600){const _n=Ut-Lt+1,jn=_t-Lt+1,sr=Math.log(_n),Hn=.5*Math.exp(2*sr/3),Ar=.5*Math.sqrt(sr*Hn*(_n-Hn)/_n)*(jn-_n/2<0?-1:1);ft(Bt,ct,_t,Math.max(Lt,Math.floor(_t-jn*Hn/_n+Ar)),Math.min(Ut,Math.floor(_t+(_n-jn)*Hn/_n+Ar)),tn)}const fn=ct[2*_t+tn];let dn=Lt,nn=Ut;for(xt(Bt,ct,Lt,_t),ct[2*Ut+tn]>fn&&xt(Bt,ct,Lt,Ut);dn<nn;){for(xt(Bt,ct,dn,nn),dn++,nn--;ct[2*dn+tn]<fn;)dn++;for(;ct[2*nn+tn]>fn;)nn--}ct[2*Lt+tn]===fn?xt(Bt,ct,Lt,nn):(nn++,xt(Bt,ct,nn,Ut)),nn<=_t&&(Lt=nn+1),_t<=nn&&(Ut=nn-1)}}function xt(Bt,ct,_t,Lt){ht(Bt,_t,Lt),ht(ct,2*_t,2*Lt),ht(ct,2*_t+1,2*Lt+1)}function ht(Bt,ct,_t){const Lt=Bt[ct];Bt[ct]=Bt[_t],Bt[_t]=Lt}function Vt(Bt,ct,_t,Lt){const Ut=Bt-_t,tn=ct-Lt;return Ut*Ut+tn*tn}He.fromVectorTileJs=pt,He.fromGeojsonVt=function(Bt,ct){ct=ct||{};var _t={};for(var Lt in Bt)_t[Lt]=new Fe(Bt[Lt].features,ct),_t[Lt].name=Lt,_t[Lt].version=ct.version,_t[Lt].extent=ct.extent;return pt({layers:_t})},He.GeoJSONWrapper=Je;const st=Bt=>Bt[0],$t=Bt=>Bt[1];class ln{constructor(ct,_t=st,Lt=$t,Ut=64,tn=Float64Array){this.nodeSize=Ut,this.points=ct;const fn=ct.length<65536?Uint16Array:Uint32Array,dn=this.ids=new fn(ct.length),nn=this.coords=new tn(2*ct.length);for(let _n=0;_n<ct.length;_n++)dn[_n]=_n,nn[2*_n]=_t(ct[_n]),nn[2*_n+1]=Lt(ct[_n]);lt(dn,nn,Ut,0,dn.length-1,0)}range(ct,_t,Lt,Ut){return function(tn,fn,dn,nn,_n,jn,sr){const Hn=[0,tn.length-1,0],Ar=[];let wr,gr;for(;Hn.length;){const Er=Hn.pop(),$r=Hn.pop(),ei=Hn.pop();if($r-ei<=sr){for(let xr=ei;xr<=$r;xr++)wr=fn[2*xr],gr=fn[2*xr+1],wr>=dn&&wr<=_n&&gr>=nn&&gr<=jn&&Ar.push(tn[xr]);continue}const ai=Math.floor((ei+$r)/2);wr=fn[2*ai],gr=fn[2*ai+1],wr>=dn&&wr<=_n&&gr>=nn&&gr<=jn&&Ar.push(tn[ai]);const ni=(Er+1)%2;(Er===0?dn<=wr:nn<=gr)&&(Hn.push(ei),Hn.push(ai-1),Hn.push(ni)),(Er===0?_n>=wr:jn>=gr)&&(Hn.push(ai+1),Hn.push($r),Hn.push(ni))}return Ar}(this.ids,this.coords,ct,_t,Lt,Ut,this.nodeSize)}within(ct,_t,Lt){return function(Ut,tn,fn,dn,nn,_n){const jn=[0,Ut.length-1,0],sr=[],Hn=nn*nn;for(;jn.length;){const Ar=jn.pop(),wr=jn.pop(),gr=jn.pop();if(wr-gr<=_n){for(let ni=gr;ni<=wr;ni++)Vt(tn[2*ni],tn[2*ni+1],fn,dn)<=Hn&&sr.push(Ut[ni]);continue}const Er=Math.floor((gr+wr)/2),$r=tn[2*Er],ei=tn[2*Er+1];Vt($r,ei,fn,dn)<=Hn&&sr.push(Ut[Er]);const ai=(Ar+1)%2;(Ar===0?fn-nn<=$r:dn-nn<=ei)&&(jn.push(gr),jn.push(Er-1),jn.push(ai)),(Ar===0?fn+nn>=$r:dn+nn>=ei)&&(jn.push(Er+1),jn.push(wr),jn.push(ai))}return sr}(this.ids,this.coords,ct,_t,Lt,this.nodeSize)}}const Mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Bt=>Bt},on=Math.fround||(an=new Float32Array(1),Bt=>(an[0]=+Bt,an[0]));var an;class Xt{constructor(ct){this.options=rn(Object.create(Mn),ct),this.trees=new Array(this.options.maxZoom+1)}load(ct){const{log:_t,minZoom:Lt,maxZoom:Ut,nodeSize:tn}=this.options;_t&&console.time("total time");const fn=`prepare ${ct.length} points`;_t&&console.time(fn),this.points=ct;let dn=[];for(let nn=0;nn<ct.length;nn++)ct[nn].geometry&&dn.push(en(ct[nn],nn));this.trees[Ut+1]=new ln(dn,bn,En,tn,Float32Array),_t&&console.timeEnd(fn);for(let nn=Ut;nn>=Lt;nn--){const _n=+Date.now();dn=this._cluster(dn,nn),this.trees[nn]=new ln(dn,bn,En,tn,Float32Array),_t&&console.log("z%d: %d clusters in %dms",nn,dn.length,+Date.now()-_n)}return _t&&console.timeEnd("total time"),this}getClusters(ct,_t){let Lt=((ct[0]+180)%360+360)%360-180;const Ut=Math.max(-90,Math.min(90,ct[1]));let tn=ct[2]===180?180:((ct[2]+180)%360+360)%360-180;const fn=Math.max(-90,Math.min(90,ct[3]));if(ct[2]-ct[0]>=360)Lt=-180,tn=180;else if(Lt>tn){const jn=this.getClusters([Lt,Ut,180,fn],_t),sr=this.getClusters([-180,Ut,tn,fn],_t);return jn.concat(sr)}const dn=this.trees[this._limitZoom(_t)],nn=dn.range(Pn(Lt),Pt(fn),Pn(tn),Pt(Ut)),_n=[];for(const jn of nn){const sr=dn.points[jn];_n.push(sr.numPoints?hn(sr):this.points[sr.index])}return _n}getChildren(ct){const _t=this._getOriginId(ct),Lt=this._getOriginZoom(ct),Ut="No cluster with the specified id.",tn=this.trees[Lt];if(!tn)throw new Error(Ut);const fn=tn.points[_t];if(!fn)throw new Error(Ut);const dn=this.options.radius/(this.options.extent*Math.pow(2,Lt-1)),nn=tn.within(fn.x,fn.y,dn),_n=[];for(const jn of nn){const sr=tn.points[jn];sr.parentId===ct&&_n.push(sr.numPoints?hn(sr):this.points[sr.index])}if(_n.length===0)throw new Error(Ut);return _n}getLeaves(ct,_t,Lt){const Ut=[];return this._appendLeaves(Ut,ct,_t=_t||10,Lt=Lt||0,0),Ut}getTile(ct,_t,Lt){const Ut=this.trees[this._limitZoom(ct)],tn=Math.pow(2,ct),{extent:fn,radius:dn}=this.options,nn=dn/fn,_n=(Lt-nn)/tn,jn=(Lt+1+nn)/tn,sr={features:[]};return this._addTileFeatures(Ut.range((_t-nn)/tn,_n,(_t+1+nn)/tn,jn),Ut.points,_t,Lt,tn,sr),_t===0&&this._addTileFeatures(Ut.range(1-nn/tn,_n,1,jn),Ut.points,tn,Lt,tn,sr),_t===tn-1&&this._addTileFeatures(Ut.range(0,_n,nn/tn,jn),Ut.points,-1,Lt,tn,sr),sr.features.length?sr:null}getClusterExpansionZoom(ct){let _t=this._getOriginZoom(ct)-1;for(;_t<=this.options.maxZoom;){const Lt=this.getChildren(ct);if(_t++,Lt.length!==1)break;ct=Lt[0].properties.cluster_id}return _t}_appendLeaves(ct,_t,Lt,Ut,tn){const fn=this.getChildren(_t);for(const dn of fn){const nn=dn.properties;if(nn&&nn.cluster?tn+nn.point_count<=Ut?tn+=nn.point_count:tn=this._appendLeaves(ct,nn.cluster_id,Lt,Ut,tn):tn<Ut?tn++:ct.push(dn),ct.length===Lt)break}return tn}_addTileFeatures(ct,_t,Lt,Ut,tn,fn){for(const dn of ct){const nn=_t[dn],_n=nn.numPoints;let jn,sr,Hn;if(_n)jn=vn(nn),sr=nn.x,Hn=nn.y;else{const gr=this.points[nn.index];jn=gr.properties,sr=Pn(gr.geometry.coordinates[0]),Hn=Pt(gr.geometry.coordinates[1])}const Ar={type:1,geometry:[[Math.round(this.options.extent*(sr*tn-Lt)),Math.round(this.options.extent*(Hn*tn-Ut))]],tags:jn};let wr;_n?wr=nn.id:this.options.generateId?wr=nn.index:this.points[nn.index].id&&(wr=this.points[nn.index].id),wr!==void 0&&(Ar.id=wr),fn.features.push(Ar)}}_limitZoom(ct){return Math.max(this.options.minZoom,Math.min(+ct,this.options.maxZoom+1))}_cluster(ct,_t){const Lt=[],{radius:Ut,extent:tn,reduce:fn,minPoints:dn}=this.options,nn=Ut/(tn*Math.pow(2,_t));for(let _n=0;_n<ct.length;_n++){const jn=ct[_n];if(jn.zoom<=_t)continue;jn.zoom=_t;const sr=this.trees[_t+1],Hn=sr.within(jn.x,jn.y,nn),Ar=jn.numPoints||1;let wr=Ar;for(const gr of Hn){const Er=sr.points[gr];Er.zoom>_t&&(wr+=Er.numPoints||1)}if(wr>Ar&&wr>=dn){let gr=jn.x*Ar,Er=jn.y*Ar,$r=fn&&Ar>1?this._map(jn,!0):null;const ei=(_n<<5)+(_t+1)+this.points.length;for(const ai of Hn){const ni=sr.points[ai];if(ni.zoom<=_t)continue;ni.zoom=_t;const xr=ni.numPoints||1;gr+=ni.x*xr,Er+=ni.y*xr,ni.parentId=ei,fn&&($r||($r=this._map(jn,!0)),fn($r,this._map(ni)))}jn.parentId=ei,Lt.push(Rt(gr/wr,Er/wr,ei,wr,$r))}else if(Lt.push(jn),wr>1)for(const gr of Hn){const Er=sr.points[gr];Er.zoom<=_t||(Er.zoom=_t,Lt.push(Er))}}return Lt}_getOriginId(ct){return ct-this.points.length>>5}_getOriginZoom(ct){return(ct-this.points.length)%32}_map(ct,_t){if(ct.numPoints)return _t?rn({},ct.properties):ct.properties;const Lt=this.points[ct.index].properties,Ut=this.options.map(Lt);return _t&&Ut===Lt?rn({},Ut):Ut}}function Rt(Bt,ct,_t,Lt,Ut){return{x:on(Bt),y:on(ct),zoom:1/0,id:_t,parentId:-1,numPoints:Lt,properties:Ut}}function en(Bt,ct){const[_t,Lt]=Bt.geometry.coordinates;return{x:on(Pn(_t)),y:on(Pt(Lt)),zoom:1/0,index:ct,parentId:-1}}function hn(Bt){return{type:"Feature",id:Bt.id,properties:vn(Bt),geometry:{type:"Point",coordinates:[(ct=Bt.x,360*(ct-.5)),Dt(Bt.y)]}};var ct}function vn(Bt){const ct=Bt.numPoints,_t=ct>=1e4?`${Math.round(ct/1e3)}k`:ct>=1e3?Math.round(ct/100)/10+"k":ct;return rn(rn({},Bt.properties),{cluster:!0,cluster_id:Bt.id,point_count:ct,point_count_abbreviated:_t})}function Pn(Bt){return Bt/360+.5}function Pt(Bt){const ct=Math.sin(Bt*Math.PI/180),_t=.5-.25*Math.log((1+ct)/(1-ct))/Math.PI;return _t<0?0:_t>1?1:_t}function Dt(Bt){const ct=(180-360*Bt)*Math.PI/180;return 360*Math.atan(Math.exp(ct))/Math.PI-90}function rn(Bt,ct){for(const _t in ct)Bt[_t]=ct[_t];return Bt}function bn(Bt){return Bt.x}function En(Bt){return Bt.y}function zn(Bt,ct,_t,Lt){for(var Ut,tn=Lt,fn=_t-ct>>1,dn=_t-ct,nn=Bt[ct],_n=Bt[ct+1],jn=Bt[_t],sr=Bt[_t+1],Hn=ct+3;Hn<_t;Hn+=3){var Ar=$n(Bt[Hn],Bt[Hn+1],nn,_n,jn,sr);if(Ar>tn)Ut=Hn,tn=Ar;else if(Ar===tn){var wr=Math.abs(Hn-fn);wr<dn&&(Ut=Hn,dn=wr)}}tn>Lt&&(Ut-ct>3&&zn(Bt,ct,Ut,Lt),Bt[Ut+2]=tn,_t-Ut>3&&zn(Bt,Ut,_t,Lt))}function $n(Bt,ct,_t,Lt,Ut,tn){var fn=Ut-_t,dn=tn-Lt;if(fn!==0||dn!==0){var nn=((Bt-_t)*fn+(ct-Lt)*dn)/(fn*fn+dn*dn);nn>1?(_t=Ut,Lt=tn):nn>0&&(_t+=fn*nn,Lt+=dn*nn)}return(fn=Bt-_t)*fn+(dn=ct-Lt)*dn}function xn(Bt,ct,_t,Lt){var Ut={id:Bt===void 0?null:Bt,type:ct,geometry:_t,tags:Lt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tn){var fn=tn.geometry,dn=tn.type;if(dn==="Point"||dn==="MultiPoint"||dn==="LineString")wn(tn,fn);else if(dn==="Polygon"||dn==="MultiLineString")for(var nn=0;nn<fn.length;nn++)wn(tn,fn[nn]);else if(dn==="MultiPolygon")for(nn=0;nn<fn.length;nn++)for(var _n=0;_n<fn[nn].length;_n++)wn(tn,fn[nn][_n])}(Ut),Ut}function wn(Bt,ct){for(var _t=0;_t<ct.length;_t+=3)Bt.minX=Math.min(Bt.minX,ct[_t]),Bt.minY=Math.min(Bt.minY,ct[_t+1]),Bt.maxX=Math.max(Bt.maxX,ct[_t]),Bt.maxY=Math.max(Bt.maxY,ct[_t+1])}function Sn(Bt,ct,_t,Lt){if(ct.geometry){var Ut=ct.geometry.coordinates,tn=ct.geometry.type,fn=Math.pow(_t.tolerance/((1<<_t.maxZoom)*_t.extent),2),dn=[],nn=ct.id;if(_t.promoteId?nn=ct.properties[_t.promoteId]:_t.generateId&&(nn=Lt||0),tn==="Point")Jn(Ut,dn);else if(tn==="MultiPoint")for(var _n=0;_n<Ut.length;_n++)Jn(Ut[_n],dn);else if(tn==="LineString")nr(Ut,dn,fn,!1);else if(tn==="MultiLineString"){if(_t.lineMetrics){for(_n=0;_n<Ut.length;_n++)nr(Ut[_n],dn=[],fn,!1),Bt.push(xn(nn,"LineString",dn,ct.properties));return}fr(Ut,dn,fn,!1)}else if(tn==="Polygon")fr(Ut,dn,fn,!0);else{if(tn!=="MultiPolygon"){if(tn==="GeometryCollection"){for(_n=0;_n<ct.geometry.geometries.length;_n++)Sn(Bt,{id:nn,geometry:ct.geometry.geometries[_n],properties:ct.properties},_t,Lt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_n=0;_n<Ut.length;_n++){var jn=[];fr(Ut[_n],jn,fn,!0),dn.push(jn)}}Bt.push(xn(nn,tn,dn,ct.properties))}}function Jn(Bt,ct){ct.push(Yn(Bt[0])),ct.push(qn(Bt[1])),ct.push(0)}function nr(Bt,ct,_t,Lt){for(var Ut,tn,fn=0,dn=0;dn<Bt.length;dn++){var nn=Yn(Bt[dn][0]),_n=qn(Bt[dn][1]);ct.push(nn),ct.push(_n),ct.push(0),dn>0&&(fn+=Lt?(Ut*_n-nn*tn)/2:Math.sqrt(Math.pow(nn-Ut,2)+Math.pow(_n-tn,2))),Ut=nn,tn=_n}var jn=ct.length-3;ct[2]=1,zn(ct,0,jn,_t),ct[jn+2]=1,ct.size=Math.abs(fn),ct.start=0,ct.end=ct.size}function fr(Bt,ct,_t,Lt){for(var Ut=0;Ut<Bt.length;Ut++){var tn=[];nr(Bt[Ut],tn,_t,Lt),ct.push(tn)}}function Yn(Bt){return Bt/360+.5}function qn(Bt){var ct=Math.sin(Bt*Math.PI/180),_t=.5-.25*Math.log((1+ct)/(1-ct))/Math.PI;return _t<0?0:_t>1?1:_t}function un(Bt,ct,_t,Lt,Ut,tn,fn,dn){if(Lt/=ct,tn>=(_t/=ct)&&fn<Lt)return Bt;if(fn<_t||tn>=Lt)return null;for(var nn=[],_n=0;_n<Bt.length;_n++){var jn=Bt[_n],sr=jn.geometry,Hn=jn.type,Ar=Ut===0?jn.minX:jn.minY,wr=Ut===0?jn.maxX:jn.maxY;if(Ar>=_t&&wr<Lt)nn.push(jn);else if(!(wr<_t||Ar>=Lt)){var gr=[];if(Hn==="Point"||Hn==="MultiPoint")yn(sr,gr,_t,Lt,Ut);else if(Hn==="LineString")Rn(sr,gr,_t,Lt,Ut,!1,dn.lineMetrics);else if(Hn==="MultiLineString")mr(sr,gr,_t,Lt,Ut,!1);else if(Hn==="Polygon")mr(sr,gr,_t,Lt,Ut,!0);else if(Hn==="MultiPolygon")for(var Er=0;Er<sr.length;Er++){var $r=[];mr(sr[Er],$r,_t,Lt,Ut,!0),$r.length&&gr.push($r)}if(gr.length){if(dn.lineMetrics&&Hn==="LineString"){for(Er=0;Er<gr.length;Er++)nn.push(xn(jn.id,Hn,gr[Er],jn.tags));continue}Hn!=="LineString"&&Hn!=="MultiLineString"||(gr.length===1?(Hn="LineString",gr=gr[0]):Hn="MultiLineString"),Hn!=="Point"&&Hn!=="MultiPoint"||(Hn=gr.length===3?"Point":"MultiPoint"),nn.push(xn(jn.id,Hn,gr,jn.tags))}}}return nn.length?nn:null}function yn(Bt,ct,_t,Lt,Ut){for(var tn=0;tn<Bt.length;tn+=3){var fn=Bt[tn+Ut];fn>=_t&&fn<=Lt&&(ct.push(Bt[tn]),ct.push(Bt[tn+1]),ct.push(Bt[tn+2]))}}function Rn(Bt,ct,_t,Lt,Ut,tn,fn){for(var dn,nn,_n=Kn(Bt),jn=Ut===0?Lr:br,sr=Bt.start,Hn=0;Hn<Bt.length-3;Hn+=3){var Ar=Bt[Hn],wr=Bt[Hn+1],gr=Bt[Hn+2],Er=Bt[Hn+3],$r=Bt[Hn+4],ei=Ut===0?Ar:wr,ai=Ut===0?Er:$r,ni=!1;fn&&(dn=Math.sqrt(Math.pow(Ar-Er,2)+Math.pow(wr-$r,2))),ei<_t?ai>_t&&(nn=jn(_n,Ar,wr,Er,$r,_t),fn&&(_n.start=sr+dn*nn)):ei>Lt?ai<Lt&&(nn=jn(_n,Ar,wr,Er,$r,Lt),fn&&(_n.start=sr+dn*nn)):Cr(_n,Ar,wr,gr),ai<_t&&ei>=_t&&(nn=jn(_n,Ar,wr,Er,$r,_t),ni=!0),ai>Lt&&ei<=Lt&&(nn=jn(_n,Ar,wr,Er,$r,Lt),ni=!0),!tn&&ni&&(fn&&(_n.end=sr+dn*nn),ct.push(_n),_n=Kn(Bt)),fn&&(sr+=dn)}var xr=Bt.length-3;Ar=Bt[xr],wr=Bt[xr+1],gr=Bt[xr+2],(ei=Ut===0?Ar:wr)>=_t&&ei<=Lt&&Cr(_n,Ar,wr,gr),xr=_n.length-3,tn&&xr>=3&&(_n[xr]!==_n[0]||_n[xr+1]!==_n[1])&&Cr(_n,_n[0],_n[1],_n[2]),_n.length&&ct.push(_n)}function Kn(Bt){var ct=[];return ct.size=Bt.size,ct.start=Bt.start,ct.end=Bt.end,ct}function mr(Bt,ct,_t,Lt,Ut,tn){for(var fn=0;fn<Bt.length;fn++)Rn(Bt[fn],ct,_t,Lt,Ut,tn,!1)}function Cr(Bt,ct,_t,Lt){Bt.push(ct),Bt.push(_t),Bt.push(Lt)}function Lr(Bt,ct,_t,Lt,Ut,tn){var fn=(tn-ct)/(Lt-ct);return Bt.push(tn),Bt.push(_t+(Ut-_t)*fn),Bt.push(1),fn}function br(Bt,ct,_t,Lt,Ut,tn){var fn=(tn-_t)/(Ut-_t);return Bt.push(ct+(Lt-ct)*fn),Bt.push(tn),Bt.push(1),fn}function Br(Bt,ct){for(var _t=[],Lt=0;Lt<Bt.length;Lt++){var Ut,tn=Bt[Lt],fn=tn.type;if(fn==="Point"||fn==="MultiPoint"||fn==="LineString")Ut=Fr(tn.geometry,ct);else if(fn==="MultiLineString"||fn==="Polygon"){Ut=[];for(var dn=0;dn<tn.geometry.length;dn++)Ut.push(Fr(tn.geometry[dn],ct))}else if(fn==="MultiPolygon")for(Ut=[],dn=0;dn<tn.geometry.length;dn++){for(var nn=[],_n=0;_n<tn.geometry[dn].length;_n++)nn.push(Fr(tn.geometry[dn][_n],ct));Ut.push(nn)}_t.push(xn(tn.id,fn,Ut,tn.tags))}return _t}function Fr(Bt,ct){var _t=[];_t.size=Bt.size,Bt.start!==void 0&&(_t.start=Bt.start,_t.end=Bt.end);for(var Lt=0;Lt<Bt.length;Lt+=3)_t.push(Bt[Lt]+ct,Bt[Lt+1],Bt[Lt+2]);return _t}function Gr(Bt,ct){if(Bt.transformed)return Bt;var _t,Lt,Ut,tn=1<<Bt.z,fn=Bt.x,dn=Bt.y;for(_t=0;_t<Bt.features.length;_t++){var nn=Bt.features[_t],_n=nn.geometry,jn=nn.type;if(nn.geometry=[],jn===1)for(Lt=0;Lt<_n.length;Lt+=2)nn.geometry.push(Ur(_n[Lt],_n[Lt+1],ct,tn,fn,dn));else for(Lt=0;Lt<_n.length;Lt++){var sr=[];for(Ut=0;Ut<_n[Lt].length;Ut+=2)sr.push(Ur(_n[Lt][Ut],_n[Lt][Ut+1],ct,tn,fn,dn));nn.geometry.push(sr)}}return Bt.transformed=!0,Bt}function Ur(Bt,ct,_t,Lt,Ut,tn){return[Math.round(_t*(Bt*Lt-Ut)),Math.round(_t*(ct*Lt-tn))]}function Ri(Bt,ct,_t,Lt,Ut){for(var tn=ct===Ut.maxZoom?0:Ut.tolerance/((1<<ct)*Ut.extent),fn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:_t,y:Lt,z:ct,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},dn=0;dn<Bt.length;dn++){fn.numFeatures++,Li(fn,Bt[dn],tn,Ut);var nn=Bt[dn].minX,_n=Bt[dn].minY,jn=Bt[dn].maxX,sr=Bt[dn].maxY;nn<fn.minX&&(fn.minX=nn),_n<fn.minY&&(fn.minY=_n),jn>fn.maxX&&(fn.maxX=jn),sr>fn.maxY&&(fn.maxY=sr)}return fn}function Li(Bt,ct,_t,Lt){var Ut=ct.geometry,tn=ct.type,fn=[];if(tn==="Point"||tn==="MultiPoint")for(var dn=0;dn<Ut.length;dn+=3)fn.push(Ut[dn]),fn.push(Ut[dn+1]),Bt.numPoints++,Bt.numSimplified++;else if(tn==="LineString")Ti(fn,Ut,Bt,_t,!1,!1);else if(tn==="MultiLineString"||tn==="Polygon")for(dn=0;dn<Ut.length;dn++)Ti(fn,Ut[dn],Bt,_t,tn==="Polygon",dn===0);else if(tn==="MultiPolygon")for(var nn=0;nn<Ut.length;nn++){var _n=Ut[nn];for(dn=0;dn<_n.length;dn++)Ti(fn,_n[dn],Bt,_t,!0,dn===0)}if(fn.length){var jn=ct.tags||null;if(tn==="LineString"&&Lt.lineMetrics){for(var sr in jn={},ct.tags)jn[sr]=ct.tags[sr];jn.mapbox_clip_start=Ut.start/Ut.size,jn.mapbox_clip_end=Ut.end/Ut.size}var Hn={geometry:fn,type:tn==="Polygon"||tn==="MultiPolygon"?3:tn==="LineString"||tn==="MultiLineString"?2:1,tags:jn};ct.id!==null&&(Hn.id=ct.id),Bt.features.push(Hn)}}function Ti(Bt,ct,_t,Lt,Ut,tn){var fn=Lt*Lt;if(Lt>0&&ct.size<(Ut?fn:Lt))_t.numPoints+=ct.length/3;else{for(var dn=[],nn=0;nn<ct.length;nn+=3)(Lt===0||ct[nn+2]>fn)&&(_t.numSimplified++,dn.push(ct[nn]),dn.push(ct[nn+1])),_t.numPoints++;Ut&&function(_n,jn){for(var sr=0,Hn=0,Ar=_n.length,wr=Ar-2;Hn<Ar;wr=Hn,Hn+=2)sr+=(_n[Hn]-_n[wr])*(_n[Hn+1]+_n[wr+1]);if(sr>0===jn)for(Hn=0,Ar=_n.length;Hn<Ar/2;Hn+=2){var gr=_n[Hn],Er=_n[Hn+1];_n[Hn]=_n[Ar-2-Hn],_n[Hn+1]=_n[Ar-1-Hn],_n[Ar-2-Hn]=gr,_n[Ar-1-Hn]=Er}}(dn,tn),Bt.push(dn)}}function Sr(Bt,ct){var _t=(ct=this.options=function(Ut,tn){for(var fn in tn)Ut[fn]=tn[fn];return Ut}(Object.create(this.options),ct)).debug;if(_t&&console.time("preprocess data"),ct.maxZoom<0||ct.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ct.promoteId&&ct.generateId)throw new Error("promoteId and generateId cannot be used together.");var Lt=function(Ut,tn){var fn=[];if(Ut.type==="FeatureCollection")for(var dn=0;dn<Ut.features.length;dn++)Sn(fn,Ut.features[dn],tn,dn);else Sn(fn,Ut.type==="Feature"?Ut:{geometry:Ut},tn);return fn}(Bt,ct);this.tiles={},this.tileCoords=[],_t&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ct.indexMaxZoom,ct.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Lt=function(Ut,tn){var fn=tn.buffer/tn.extent,dn=Ut,nn=un(Ut,1,-1-fn,fn,0,-1,2,tn),_n=un(Ut,1,1-fn,2+fn,0,-1,2,tn);return(nn||_n)&&(dn=un(Ut,1,-fn,1+fn,0,-1,2,tn)||[],nn&&(dn=Br(nn,1).concat(dn)),_n&&(dn=dn.concat(Br(_n,-1)))),dn}(Lt,ct)).length&&this.splitTile(Lt,0,0,0),_t&&(Lt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function No(Bt,ct,_t){return 32*((1<<Bt)*_t+ct)+Bt}function Ea(Bt,ct){const _t=Bt.tileID.canonical;if(!this._geoJSONIndex)return ct(null,null);const Lt=this._geoJSONIndex.getTile(_t.z,_t.x,_t.y);if(!Lt)return ct(null,null);const Ut=new Ue(Lt.features);let tn=He(Ut);tn.byteOffset===0&&tn.byteLength===tn.buffer.byteLength||(tn=new Uint8Array(tn)),ct(null,{vectorTile:Ut,rawData:tn.buffer})}Sr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Sr.prototype.splitTile=function(Bt,ct,_t,Lt,Ut,tn,fn){for(var dn=[Bt,ct,_t,Lt],nn=this.options,_n=nn.debug;dn.length;){Lt=dn.pop(),_t=dn.pop(),ct=dn.pop(),Bt=dn.pop();var jn=1<<ct,sr=No(ct,_t,Lt),Hn=this.tiles[sr];if(!Hn&&(_n>1&&console.time("creation"),Hn=this.tiles[sr]=Ri(Bt,ct,_t,Lt,nn),this.tileCoords.push({z:ct,x:_t,y:Lt}),_n)){_n>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ct,_t,Lt,Hn.numFeatures,Hn.numPoints,Hn.numSimplified),console.timeEnd("creation"));var Ar="z"+ct;this.stats[Ar]=(this.stats[Ar]||0)+1,this.total++}if(Hn.source=Bt,Ut){if(ct===nn.maxZoom||ct===Ut)continue;var wr=1<<Ut-ct;if(_t!==Math.floor(tn/wr)||Lt!==Math.floor(fn/wr))continue}else if(ct===nn.indexMaxZoom||Hn.numPoints<=nn.indexMaxPoints)continue;if(Hn.source=null,Bt.length!==0){_n>1&&console.time("clipping");var gr,Er,$r,ei,ai,ni,xr=.5*nn.buffer/nn.extent,gn=.5-xr,fo=.5+xr,ki=1+xr;gr=Er=$r=ei=null,ai=un(Bt,jn,_t-xr,_t+fo,0,Hn.minX,Hn.maxX,nn),ni=un(Bt,jn,_t+gn,_t+ki,0,Hn.minX,Hn.maxX,nn),Bt=null,ai&&(gr=un(ai,jn,Lt-xr,Lt+fo,1,Hn.minY,Hn.maxY,nn),Er=un(ai,jn,Lt+gn,Lt+ki,1,Hn.minY,Hn.maxY,nn),ai=null),ni&&($r=un(ni,jn,Lt-xr,Lt+fo,1,Hn.minY,Hn.maxY,nn),ei=un(ni,jn,Lt+gn,Lt+ki,1,Hn.minY,Hn.maxY,nn),ni=null),_n>1&&console.timeEnd("clipping"),dn.push(gr||[],ct+1,2*_t,2*Lt),dn.push(Er||[],ct+1,2*_t,2*Lt+1),dn.push($r||[],ct+1,2*_t+1,2*Lt),dn.push(ei||[],ct+1,2*_t+1,2*Lt+1)}}},Sr.prototype.getTile=function(Bt,ct,_t){var Lt=this.options,Ut=Lt.extent,tn=Lt.debug;if(Bt<0||Bt>24)return null;var fn=1<<Bt,dn=No(Bt,ct=(ct%fn+fn)%fn,_t);if(this.tiles[dn])return Gr(this.tiles[dn],Ut);tn>1&&console.log("drilling down to z%d-%d-%d",Bt,ct,_t);for(var nn,_n=Bt,jn=ct,sr=_t;!nn&&_n>0;)_n--,jn=Math.floor(jn/2),sr=Math.floor(sr/2),nn=this.tiles[No(_n,jn,sr)];return nn&&nn.source?(tn>1&&console.log("found parent tile z%d-%d-%d",_n,jn,sr),tn>1&&console.time("drilling down"),this.splitTile(nn.source,_n,jn,sr,Bt,ct,_t),tn>1&&console.timeEnd("drilling down"),this.tiles[dn]?Gr(this.tiles[dn],Ut):null):null};class xi extends j.VectorTileWorkerSource{constructor(ct,_t,Lt,Ut,tn){super(ct,_t,Lt,Ut,Ea),tn&&(this.loadGeoJSON=tn)}loadData(ct,_t){const Lt=ct&&ct.request,Ut=Lt&&Lt.collectResourceTiming;this.loadGeoJSON(ct,(tn,fn)=>{if(tn||!fn)return _t(tn);if(typeof fn!="object")return _t(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`));{Ee(fn,!0);try{if(ct.filter){const nn=j.createExpression(ct.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(nn.result==="error")throw new Error(nn.value.map(jn=>`${jn.key}: ${jn.message}`).join(", "));const _n=fn.features.filter(jn=>nn.value.evaluate({zoom:0},jn));fn={type:"FeatureCollection",features:_n}}this._geoJSONIndex=ct.cluster?new Xt(function({superclusterOptions:nn,clusterProperties:_n}){if(!_n||!nn)return nn;const jn={},sr={},Hn={accumulated:null,zoom:0},Ar={properties:null},wr=Object.keys(_n);for(const gr of wr){const[Er,$r]=_n[gr],ei=j.createExpression($r),ai=j.createExpression(typeof Er=="string"?[Er,["accumulated"],["get",gr]]:Er);jn[gr]=ei.value,sr[gr]=ai.value}return nn.map=gr=>{Ar.properties=gr;const Er={};for(const $r of wr)Er[$r]=jn[$r].evaluate(Hn,Ar);return Er},nn.reduce=(gr,Er)=>{Ar.properties=Er;for(const $r of wr)Hn.accumulated=gr[$r],gr[$r]=sr[$r].evaluate(Hn,Ar)},nn}(ct)).load(fn.features):function(nn,_n){return new Sr(nn,_n)}(fn,ct.geojsonVtOptions)}catch(nn){return _t(nn)}this.loaded={};const dn={};if(Ut){const nn=j.getPerformanceMeasurement(Lt);nn&&(dn.resourceTiming={},dn.resourceTiming[ct.source]=JSON.parse(JSON.stringify(nn)))}_t(null,dn)}})}reloadTile(ct,_t){const Lt=this.loaded;return Lt&&Lt[ct.uid]?super.reloadTile(ct,_t):this.loadTile(ct,_t)}loadGeoJSON(ct,_t){if(ct.request)j.getJSON(ct.request,_t);else{if(typeof ct.data!="string")return _t(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`));try{return _t(null,JSON.parse(ct.data))}catch{return _t(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ct,_t){try{_t(null,this._geoJSONIndex.getClusterExpansionZoom(ct.clusterId))}catch(Lt){_t(Lt)}}getClusterChildren(ct,_t){try{_t(null,this._geoJSONIndex.getChildren(ct.clusterId))}catch(Lt){_t(Lt)}}getClusterLeaves(ct,_t){try{_t(null,this._geoJSONIndex.getLeaves(ct.clusterId,ct.limit,ct.offset))}catch(Lt){_t(Lt)}}}class la{constructor(ct){this.self=ct,this.actor=new j.Actor(ct,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=j.getProjection({name:"mercator"}),this.workerSourceTypes={vector:j.VectorTileWorkerSource,geojson:xi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(_t,Lt)=>{if(this.workerSourceTypes[_t])throw new Error(`Worker source with name "${_t}" already registered.`);this.workerSourceTypes[_t]=Lt},this.self.registerRTLTextPlugin=_t=>{if(j.plugin.isParsed())throw new Error("RTL text plugin already registered.");j.plugin.applyArabicShaping=_t.applyArabicShaping,j.plugin.processBidirectionalText=_t.processBidirectionalText,j.plugin.processStyledBidirectionalText=_t.processStyledBidirectionalText}}clearCaches(ct,_t,Lt){delete this.layerIndexes[ct],delete this.availableImages[ct],delete this.workerSources[ct],delete this.demWorkerSources[ct],Lt()}checkIfReady(ct,_t,Lt){Lt()}setReferrer(ct,_t){this.referrer=_t}spriteLoaded(ct,_t){this.isSpriteLoaded[ct]=_t;for(const Lt in this.workerSources[ct]){const Ut=this.workerSources[ct][Lt];for(const tn in Ut)Ut[tn]instanceof j.VectorTileWorkerSource&&(Ut[tn].isSpriteLoaded=_t,Ut[tn].fire(new j.Event("isSpriteLoaded")))}}setImages(ct,_t,Lt){this.availableImages[ct]=_t;for(const Ut in this.workerSources[ct]){const tn=this.workerSources[ct][Ut];for(const fn in tn)tn[fn].availableImages=_t}Lt()}enableTerrain(ct,_t,Lt){this.terrain=_t,Lt()}setProjection(ct,_t){this.projections[ct]=j.getProjection(_t)}setLayers(ct,_t,Lt){this.getLayerIndex(ct).replace(_t),Lt()}updateLayers(ct,_t,Lt){this.getLayerIndex(ct).update(_t.layers,_t.removedIds),Lt()}loadTile(ct,_t,Lt){const Ut=this.enableTerrain?j.extend({enableTerrain:this.terrain},_t):_t;Ut.projection=this.projections[ct]||this.defaultProjection,this.getWorkerSource(ct,_t.type,_t.source).loadTile(Ut,Lt)}loadDEMTile(ct,_t,Lt){const Ut=this.enableTerrain?j.extend({buildQuadTree:this.terrain},_t):_t;this.getDEMWorkerSource(ct,_t.source).loadTile(Ut,Lt)}reloadTile(ct,_t,Lt){const Ut=this.enableTerrain?j.extend({enableTerrain:this.terrain},_t):_t;Ut.projection=this.projections[ct]||this.defaultProjection,this.getWorkerSource(ct,_t.type,_t.source).reloadTile(Ut,Lt)}abortTile(ct,_t,Lt){this.getWorkerSource(ct,_t.type,_t.source).abortTile(_t,Lt)}removeTile(ct,_t,Lt){this.getWorkerSource(ct,_t.type,_t.source).removeTile(_t,Lt)}removeSource(ct,_t,Lt){if(!this.workerSources[ct]||!this.workerSources[ct][_t.type]||!this.workerSources[ct][_t.type][_t.source])return;const Ut=this.workerSources[ct][_t.type][_t.source];delete this.workerSources[ct][_t.type][_t.source],Ut.removeSource!==void 0?Ut.removeSource(_t,Lt):Lt()}loadWorkerSource(ct,_t,Lt){try{this.self.importScripts(_t.url),Lt()}catch(Ut){Lt(Ut.toString())}}syncRTLPluginState(ct,_t,Lt){try{j.plugin.setState(_t);const Ut=j.plugin.getPluginURL();if(j.plugin.isLoaded()&&!j.plugin.isParsed()&&Ut!=null){this.self.importScripts(Ut);const tn=j.plugin.isParsed();Lt(tn?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ut}`),tn)}}catch(Ut){Lt(Ut.toString())}}getAvailableImages(ct){let _t=this.availableImages[ct];return _t||(_t=[]),_t}getLayerIndex(ct){let _t=this.layerIndexes[ct];return _t||(_t=this.layerIndexes[ct]=new ye),_t}getWorkerSource(ct,_t,Lt){return this.workerSources[ct]||(this.workerSources[ct]={}),this.workerSources[ct][_t]||(this.workerSources[ct][_t]={}),this.workerSources[ct][_t][Lt]||(this.workerSources[ct][_t][Lt]=new this.workerSourceTypes[_t]({send:(Ut,tn,fn,dn,nn,_n)=>{this.actor.send(Ut,tn,fn,ct,nn,_n)},scheduler:this.actor.scheduler},this.getLayerIndex(ct),this.getAvailableImages(ct),this.isSpriteLoaded[ct])),this.workerSources[ct][_t][Lt]}getDEMWorkerSource(ct,_t){return this.demWorkerSources[ct]||(this.demWorkerSources[ct]={}),this.demWorkerSources[ct][_t]||(this.demWorkerSources[ct][_t]=new xe),this.demWorkerSources[ct][_t]}enforceCacheSizeLimit(ct,_t){j.enforceCacheSizeLimit(_t)}getWorkerPerformanceMetrics(ct,_t,Lt){Lt(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new la(self)),la}),ne(["./shared"],function(j){function be(_e,U){if(Array.isArray(_e)){if(!Array.isArray(U)||_e.length!==U.length)return!1;for(let te=0;te<_e.length;te++)if(!be(_e[te],U[te]))return!1;return!0}if(typeof _e=="object"&&_e!==null&&U!==null){if(typeof U!="object"||Object.keys(_e).length!==Object.keys(U).length)return!1;for(const te in _e)if(!be(_e[te],U[te]))return!1;return!0}return _e===U}var ce=ye;function ye(_e){return!function(U){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var we,Pe,Re=new Blob([""],{type:"text/javascript"}),Be=URL.createObjectURL(Re);try{Pe=new Worker(Be),we=!0}catch{we=!1}return Pe&&Pe.terminate(),URL.revokeObjectURL(Be),we}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var we=document.createElement("canvas");we.width=we.height=1;var Pe=we.getContext("2d");if(!Pe)return!1;var Re=Pe.getImageData(0,0,1,1);return Re&&Re.width===we.width}()?(xe[te=U&&U.failIfMajorPerformanceCaveat]===void 0&&(xe[te]=function(we){var Pe,Re=function(Be){var Ne=document.createElement("canvas"),qe=Object.create(ye.webGLContextAttributes);return qe.failIfMajorPerformanceCaveat=Be,Ne.getContext("webgl",qe)||Ne.getContext("experimental-webgl",qe)}(we);if(!Re)return!1;try{Pe=Re.createShader(Re.VERTEX_SHADER)}catch{return!1}return!(!Pe||Re.isContextLost())&&(Re.shaderSource(Pe,"void main() {}"),Re.compileShader(Pe),Re.getShaderParameter(Pe,Re.COMPILE_STATUS)===!0)}(te)),xe[te]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var te}(_e)}var xe={};function Ee(_e,U,te){const we=j.window.document.createElement(_e);return U!==void 0&&(we.className=U),te&&te.appendChild(we),we}function Ce(_e,U,te){const we=j.window.document.createElementNS("http://www.w3.org/2000/svg",_e);for(const Pe of Object.keys(U))we.setAttributeNS(null,Pe,U[Pe]);return te&&te.appendChild(we),we}ye.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Se=j.window.document&&j.window.document.documentElement.style,Oe=Se&&Se.userSelect!==void 0?"userSelect":"WebkitUserSelect";let De;function Ue(){Se&&Oe&&(De=Se[Oe],Se[Oe]="none")}function $e(){Se&&Oe&&(Se[Oe]=De)}function Fe(_e){_e.preventDefault(),_e.stopPropagation(),j.window.removeEventListener("click",Fe,!0)}function Xe(){j.window.addEventListener("click",Fe,!0),j.window.setTimeout(()=>{j.window.removeEventListener("click",Fe,!0)},0)}function Ye(_e,U){const te=_e.getBoundingClientRect();return pt(_e,te,U)}function He(_e,U){const te=_e.getBoundingClientRect(),we=[];for(let Pe=0;Pe<U.length;Pe++)we.push(pt(_e,te,U[Pe]));return we}function Je(_e){return j.window.InstallTrigger!==void 0&&_e.button===2&&_e.ctrlKey&&j.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_e.button}function pt(_e,U,te){const we=_e.offsetWidth===U.width?1:_e.offsetWidth/U.width;return new j.pointGeometry((te.clientX-U.left)*we,(te.clientY-U.top)*we)}function It(_e,U){var te=U[0],we=U[1],Pe=U[2],Re=U[3],Be=te*Re-Pe*we;return Be?(_e[0]=Re*(Be=1/Be),_e[1]=-we*Be,_e[2]=-Pe*Be,_e[3]=te*Be,_e):null}function At(_e){const{userImage:U}=_e;return!!(U&&U.render&&U.render())&&(_e.data.replace(new Uint8Array(U.data.buffer)),!0)}class bt extends j.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new j.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(U){if(this.loaded!==U&&(this.loaded=U,U)){for(const{ids:te,callback:we}of this.requestors)this._notify(te,we);this.requestors=[]}}hasImage(U){return!!this.getImage(U)}getImage(U){return this.images[U]}addImage(U,te){this._validate(U,te)&&(this.images[U]=te)}_validate(U,te){let we=!0;return this._validateStretch(te.stretchX,te.data&&te.data.width)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "stretchX" value`))),we=!1),this._validateStretch(te.stretchY,te.data&&te.data.height)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "stretchY" value`))),we=!1),this._validateContent(te.content,te)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "content" value`))),we=!1),we}_validateStretch(U,te){if(!U)return!0;let we=0;for(const Pe of U){if(Pe[0]<we||Pe[1]<Pe[0]||te<Pe[1])return!1;we=Pe[1]}return!0}_validateContent(U,te){return!(U&&(U.length!==4||U[0]<0||te.data.width<U[0]||U[1]<0||te.data.height<U[1]||U[2]<0||te.data.width<U[2]||U[3]<0||te.data.height<U[3]||U[2]<U[0]||U[3]<U[1]))}updateImage(U,te){te.version=this.images[U].version+1,this.images[U]=te,this.updatedImages[U]=!0}removeImage(U){const te=this.images[U];delete this.images[U],delete this.patterns[U],te.userImage&&te.userImage.onRemove&&te.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(U,te){let we=!0;if(!this.isLoaded())for(const Pe of U)this.images[Pe]||(we=!1);this.isLoaded()||we?this._notify(U,te):this.requestors.push({ids:U,callback:te})}_notify(U,te){const we={};for(const Pe of U){this.images[Pe]||this.fire(new j.Event("styleimagemissing",{id:Pe}));const Re=this.images[Pe];Re?we[Pe]={data:Re.data.clone(),pixelRatio:Re.pixelRatio,sdf:Re.sdf,version:Re.version,stretchX:Re.stretchX,stretchY:Re.stretchY,content:Re.content,hasRenderCallback:Boolean(Re.userImage&&Re.userImage.render)}:j.warnOnce(`Image "${Pe}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}te(null,we)}getPixelSize(){const{width:U,height:te}=this.atlasImage;return{width:U,height:te}}getPattern(U){const te=this.patterns[U],we=this.getImage(U);if(!we)return null;if(te&&te.position.version===we.version)return te.position;if(te)te.position.version=we.version;else{const Pe={w:we.data.width+2,h:we.data.height+2,x:0,y:0},Re=new j.ImagePosition(Pe,we);this.patterns[U]={bin:Pe,position:Re}}return this._updatePatternAtlas(),this.patterns[U].position}bind(U){const te=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new j.Texture(U,this.atlasImage,te.RGBA),this.atlasTexture.bind(te.LINEAR,te.CLAMP_TO_EDGE)}_updatePatternAtlas(){const U=[];for(const Re in this.patterns)U.push(this.patterns[Re].bin);const{w:te,h:we}=j.potpack(U),Pe=this.atlasImage;Pe.resize({width:te||1,height:we||1});for(const Re in this.patterns){const{bin:Be}=this.patterns[Re],Ne=Be.x+1,qe=Be.y+1,Ke=this.images[Re].data,Qe=Ke.width,ut=Ke.height;j.RGBAImage.copy(Ke,Pe,{x:0,y:0},{x:Ne,y:qe},{width:Qe,height:ut}),j.RGBAImage.copy(Ke,Pe,{x:0,y:ut-1},{x:Ne,y:qe-1},{width:Qe,height:1}),j.RGBAImage.copy(Ke,Pe,{x:0,y:0},{x:Ne,y:qe+ut},{width:Qe,height:1}),j.RGBAImage.copy(Ke,Pe,{x:Qe-1,y:0},{x:Ne-1,y:qe},{width:1,height:ut}),j.RGBAImage.copy(Ke,Pe,{x:0,y:0},{x:Ne+Qe,y:qe},{width:1,height:ut})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(U){for(const te of U){if(this.callbackDispatchedThisFrame[te])continue;this.callbackDispatchedThisFrame[te]=!0;const we=this.images[te];At(we)&&this.updateImage(te,we)}}}const rt=new j.Properties({anchor:new j.DataConstantProperty(j.spec.light.anchor),position:new class{constructor(){this.specification=j.spec.light.position}possiblyEvaluate(_e,U){return function([te,we,Pe]){const Re=j.degToRad(we+90),Be=j.degToRad(Pe);return{x:te*Math.cos(Re)*Math.sin(Be),y:te*Math.sin(Re)*Math.sin(Be),z:te*Math.cos(Be),azimuthal:we,polar:Pe}}(_e.expression.evaluate(U))}interpolate(_e,U,te){return{x:j.number(_e.x,U.x,te),y:j.number(_e.y,U.y,te),z:j.number(_e.z,U.z,te),azimuthal:j.number(_e.azimuthal,U.azimuthal,te),polar:j.number(_e.polar,U.polar,te)}}},color:new j.DataConstantProperty(j.spec.light.color),intensity:new j.DataConstantProperty(j.spec.light.intensity)}),nt="-transition";class it extends j.Evented{constructor(U){super(),this._transitionable=new j.Transitionable(rt),this.setLight(U),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(U,te={}){if(!this._validate(j.validateLight,U,te))for(const we in U){const Pe=U[we];j.endsWith(we,nt)?this._transitionable.setTransition(we.slice(0,-nt.length),Pe):this._transitionable.setValue(we,Pe)}}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}_validate(U,te,we){return(!we||we.validate!==!1)&&j.emitValidationErrors(this,U.call(j.validateStyle,j.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}const dt=new j.Properties({source:new j.DataConstantProperty(j.spec.terrain.source),exaggeration:new j.DataConstantProperty(j.spec.terrain.exaggeration)}),lt="-transition";class ft extends j.Evented{constructor(U,te){super(),this._transitionable=new j.Transitionable(dt),this.set(U),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=te}get(){return this._transitionable.serialize()}set(U){for(const te in U){const we=U[te];j.endsWith(te,lt)?this._transitionable.setTransition(te.slice(0,-lt.length),we):this._transitionable.setValue(te,we)}}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}}function xt(_e,U,te,we){const Pe=j.smoothstep(45,65,te),[Re,Be]=ht(_e,we),Ne=j.length(U);let qe=1-Math.min(1,Math.exp((Ne-Re)/(Be-Re)*-6));return qe*=qe*qe,qe=Math.min(1,1.00747*qe),qe*Pe*_e.alpha}function ht(_e,U){const te=.5/Math.tan(.5*U);return[_e.range[0]+te,_e.range[1]+te]}const Vt=new j.Properties({range:new j.DataConstantProperty(j.spec.fog.range),color:new j.DataConstantProperty(j.spec.fog.color),"high-color":new j.DataConstantProperty(j.spec.fog["high-color"]),"space-color":new j.DataConstantProperty(j.spec.fog["space-color"]),"horizon-blend":new j.DataConstantProperty(j.spec.fog["horizon-blend"]),"star-intensity":new j.DataConstantProperty(j.spec.fog["star-intensity"])}),st="-transition";class $t extends j.Evented{constructor(U,te){super(),this._transitionable=new j.Transitionable(Vt),this.set(U),this._transitioning=this._transitionable.untransitioned(),this._transform=te}get state(){const U=this._transform,te=U.projection.name==="globe",we=j.globeToMercatorTransition(U.zoom),Pe=this.properties.get("range"),Re=[.5,3];return{range:te?[j.number(Re[0],Pe[0],we),j.number(Re[1],Pe[1],we)]:Pe,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(U,te={}){if(!this._validate(j.validateFog,U,te)){for(const we of Object.keys(j.spec.fog))U&&U[we]===void 0&&(U[we]=j.spec.fog[we].default);for(const we in U){const Pe=U[we];j.endsWith(we,st)?this._transitionable.setTransition(we.slice(0,-st.length),Pe):this._transitionable.setValue(we,Pe)}}}getOpacity(U){if(!this._transform.projection.supportsFog)return 0;const te=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:j.smoothstep(45,65,U))*te.a}getOpacityAtLatLng(U,te){return this._transform.projection.supportsFog?function(we,Pe,Re){const Be=j.MercatorCoordinate.fromLngLat(Pe),Ne=Re.elevation?Re.elevation.getAtPointOrZero(Be):0,qe=[Be.x,Be.y,Ne];return j.transformMat4(qe,qe,Re.mercatorFogMatrix),xt(we,qe,Re.pitch,Re._fov)}(this.state,U,te):0}getFovAdjustedRange(U){return this._transform.projection.supportsFog?ht(this.state,U):[0,1]}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}_validate(U,te,we){return(!we||we.validate!==!1)&&j.emitValidationErrors(this,U.call(j.validateStyle,j.extend({value:te,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}class ln{constructor(U,te){this.workerPool=U,this.actors=[],this.currentActor=0,this.id=j.uniqueId();const we=this.workerPool.acquire(this.id);for(let Pe=0;Pe<we.length;Pe++){const Re=new ln.Actor(we[Pe],te,this.id);Re.name=`Worker ${Pe}`,this.actors.push(Re)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(U,te,we){j.asyncAll(this.actors,(Pe,Re)=>{Pe.send(U,te,Re)},we=we||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(U=>{U.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Mn(_e,U,te){return U*(j.EXTENT/(_e.tileSize*Math.pow(2,te-_e.tileID.overscaledZ)))}ln.Actor=j.Actor;class on{constructor(U,te,we,Pe){this.screenBounds=U,this.cameraPoint=te,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=we,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Pe)}static createFromScreenPoints(U,te){let we,Pe;if(U instanceof j.pointGeometry||typeof U[0]=="number"){const Re=j.pointGeometry.convert(U);we=[j.pointGeometry.convert(U)],Pe=te.isPointAboveHorizon(Re)}else{const Re=j.pointGeometry.convert(U[0]),Be=j.pointGeometry.convert(U[1]);we=[Re,Be],Pe=j.polygonizeBounds(Re,Be).every(Ne=>te.isPointAboveHorizon(Ne))}return new on(we,te.getCameraPoint(),Pe,te)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(U){return j.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],U)}bufferedCameraGeometry(U){const te=this.screenBounds[0],we=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],Pe=j.polygonizeBounds(te,we,0,!1);return this.cameraPoint.y>we.y&&(this.cameraPoint.x>te.x&&this.cameraPoint.x<we.x?Pe.splice(3,0,this.cameraPoint):this.cameraPoint.x>=we.x?Pe[2]=this.cameraPoint:this.cameraPoint.x<=te.x&&(Pe[3]=this.cameraPoint)),j.bufferConvexPolygon(Pe,U)}bufferedCameraGeometryGlobe(U){const te=this.screenBounds[0],we=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],Pe=j.polygonizeBounds(te,we,U),Re=this.cameraPoint.clone();switch(3*((Re.y>te.y)+(Re.y>we.y))+((Re.x>te.x)+(Re.x>we.x))){case 0:Pe[0]=Re,Pe[4]=Re.clone();break;case 1:Pe.splice(1,0,Re);break;case 2:Pe[1]=Re;break;case 3:Pe.splice(4,0,Re);break;case 5:Pe.splice(2,0,Re);break;case 6:Pe[3]=Re;break;case 7:Pe.splice(3,0,Re);break;case 8:Pe[2]=Re}return Pe}containsTile(U,te,we,Pe=0){const Re=U.queryPadding/te._pixelsPerMercatorPixel+1,Be=we?this._bufferedCameraMercator(Re,te):this._bufferedScreenMercator(Re,te);let Ne=U.tileID.wrap+(Be.unwrapped?Pe:0);const qe=Be.polygon.map(Ct=>j.getTilePoint(U.tileTransform,Ct,Ne));if(!j.polygonIntersectsBox(qe,0,0,j.EXTENT,j.EXTENT))return;Ne=U.tileID.wrap+(this.screenGeometryMercator.unwrapped?Pe:0);const Ke=this.screenGeometryMercator.polygon.map(Ct=>j.getTileVec3(U.tileTransform,Ct,Ne)),Qe=Ke.map(Ct=>new j.pointGeometry(Ct[0],Ct[1])),ut=te.getFreeCameraOptions().position||new j.MercatorCoordinate(0,0,0),gt=j.getTileVec3(U.tileTransform,ut,Ne),Mt=Ke.map(Ct=>{const wt=j.sub(Ct,Ct,gt);return j.normalize(wt,wt),new j.Ray(gt,wt)}),kt=Mn(U,1,te.zoom)*te._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Qe,tilespaceRays:Mt,bufferedTilespaceGeometry:qe,bufferedTilespaceBounds:(Tt=j.getBounds(qe),Tt.min.x=j.clamp(Tt.min.x,0,j.EXTENT),Tt.min.y=j.clamp(Tt.min.y,0,j.EXTENT),Tt.max.x=j.clamp(Tt.max.x,0,j.EXTENT),Tt.max.y=j.clamp(Tt.max.y,0,j.EXTENT),Tt),tile:U,tileID:U.tileID,pixelToTileUnitsFactor:kt};var Tt}_bufferedScreenMercator(U,te){const we=Rt(U);if(this._screenRaycastCache[we])return this._screenRaycastCache[we];{let Pe;return Pe=te.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(U),te):{polygon:this.bufferedScreenGeometry(U).map(Re=>te.pointCoordinate3D(Re)),unwrapped:!0},this._screenRaycastCache[we]=Pe,Pe}}_bufferedCameraMercator(U,te){const we=Rt(U);if(this._cameraRaycastCache[we])return this._cameraRaycastCache[we];{let Pe;return Pe=te.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(U),te):{polygon:this.bufferedCameraGeometry(U).map(Re=>te.pointCoordinate3D(Re)),unwrapped:!0},this._cameraRaycastCache[we]=Pe,Pe}}_projectAndResample(U,te){const we=function(Re,Be){const Ne=j.multiply([],Be.pixelMatrix,Be.globeMatrix),qe=[0,-j.GLOBE_RADIUS,0,1],Ke=[0,j.GLOBE_RADIUS,0,1],Qe=[0,0,0,1];j.transformMat4$1(qe,qe,Ne),j.transformMat4$1(Ke,Ke,Ne),j.transformMat4$1(Qe,Qe,Ne);const ut=new j.pointGeometry(qe[0]/qe[3],qe[1]/qe[3]),gt=new j.pointGeometry(Ke[0]/Ke[3],Ke[1]/Ke[3]),Mt=j.polygonContainsPoint(Re,ut)&&qe[3]<Qe[3],kt=j.polygonContainsPoint(Re,gt)&&Ke[3]<Qe[3];if(!Mt&&!kt)return null;const Tt=function(Yt,Wt,sn){for(let mn=1;mn<Yt.length;mn++){const Wn=Xt(Wt.pointCoordinate3D(Yt[mn-1]).x),pn=Xt(Wt.pointCoordinate3D(Yt[mn]).x);if(sn<0){if(Wn<pn)return{idx:mn,t:-Wn/(pn-1-Wn)}}else if(pn<Wn)return{idx:mn,t:(1-Wn)/(pn+1-Wn)}}return null}(Re,Be,Mt?-1:1);if(!Tt)return null;const{idx:Ct,t:wt}=Tt;let zt=Ct>1?an(Re.slice(0,Ct),Be):[],Ot=Ct<Re.length?an(Re.slice(Ct),Be):[];zt=zt.map(Yt=>new j.pointGeometry(Xt(Yt.x),Yt.y)),Ot=Ot.map(Yt=>new j.pointGeometry(Xt(Yt.x),Yt.y));const Qt=[...zt];Qt.length===0&&Qt.push(Ot[Ot.length-1]);const Kt=j.number(Qt[Qt.length-1].y,(Ot.length===0?zt[0]:Ot[0]).y,wt);let Gt;return Gt=Mt?[new j.pointGeometry(0,Kt),new j.pointGeometry(0,0),new j.pointGeometry(1,0),new j.pointGeometry(1,Kt)]:[new j.pointGeometry(1,Kt),new j.pointGeometry(1,1),new j.pointGeometry(0,1),new j.pointGeometry(0,Kt)],Qt.push(...Gt),Ot.length===0?Qt.push(zt[0]):Qt.push(...Ot),{polygon:Qt.map(Yt=>new j.MercatorCoordinate(Yt.x,Yt.y)),unwrapped:!1}}(U,te);if(we)return we;const Pe=function(Re,Be){let Ne=!1,qe=-1/0,Ke=0;for(let ut=0;ut<Re.length-1;ut++)Re[ut].x>qe&&(qe=Re[ut].x,Ke=ut);for(let ut=0;ut<Re.length-1;ut++){const gt=(Ke+ut)%(Re.length-1),Mt=Re[gt],kt=Re[gt+1];Math.abs(Mt.x-kt.x)>.5&&(Mt.x<kt.x?(Mt.x+=1,gt===0&&(Re[Re.length-1].x+=1)):(kt.x+=1,gt+1===Re.length-1&&(Re[0].x+=1)),Ne=!0)}const Qe=j.mercatorXfromLng(Be.center.lng);return Ne&&Qe<Math.abs(Qe-1)&&Re.forEach(ut=>{ut.x-=1}),{polygon:Re,unwrapped:Ne}}(an(U,te).map(Re=>new j.pointGeometry(Xt(Re.x),Re.y)),te);return{polygon:Pe.polygon.map(Re=>new j.MercatorCoordinate(Re.x,Re.y)),unwrapped:Pe.unwrapped}}}function an(_e,U){return j.resample(_e,te=>{const we=U.pointCoordinate3D(te);te.x=we.x,te.y=we.y},1/256)}function Xt(_e){return _e<0?1+_e%1:_e%1}function Rt(_e){return 100*_e|0}function en(_e,U,te,we,Pe){const Re=function(Be,Ne){if(Be)return Pe(Be);if(Ne){const qe=j.pick(j.extend(Ne,_e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ne.vector_layers&&(qe.vectorLayers=Ne.vector_layers,qe.vectorLayerIds=qe.vectorLayers.map(Ke=>Ke.id)),Ne.language_options&&(qe.languageOptions=Ne.language_options),Ne.language&&Ne.language[Ne.id]&&(qe.language=Ne.language[Ne.id]),Ne.worldview_options&&(qe.worldviewOptions=Ne.worldview_options),Ne.worldview?qe.worldview=Ne.worldview[Ne.id]:Ne.worldview_default&&(qe.worldview=Ne.worldview_default),qe.tiles=U.canonicalizeTileset(qe,_e.url),Pe(null,qe)}};return _e.url?j.getJSON(U.transformRequest(U.normalizeSourceURL(_e.url,null,te,we),j.ResourceType.Source),Re):j.exported.frame(()=>Re(null,_e))}class hn{constructor(U,te,we){this.bounds=j.LngLatBounds.convert(this.validateBounds(U)),this.minzoom=te||0,this.maxzoom=we||24}validateBounds(U){return Array.isArray(U)&&U.length===4?[Math.max(-180,U[0]),Math.max(-90,U[1]),Math.min(180,U[2]),Math.min(90,U[3])]:[-180,-90,180,90]}contains(U){const te=Math.pow(2,U.z),we=Math.floor(j.mercatorXfromLng(this.bounds.getWest())*te),Pe=Math.floor(j.mercatorYfromLat(this.bounds.getNorth())*te),Re=Math.ceil(j.mercatorXfromLng(this.bounds.getEast())*te),Be=Math.ceil(j.mercatorYfromLat(this.bounds.getSouth())*te);return U.x>=we&&U.x<Re&&U.y>=Pe&&U.y<Be}}class vn{constructor(U,te,we){this.context=U;const Pe=U.gl;this.buffer=Pe.createBuffer(),this.dynamicDraw=Boolean(we),this.context.unbindVAO(),U.bindElementBuffer.set(this.buffer),Pe.bufferData(Pe.ELEMENT_ARRAY_BUFFER,te.arrayBuffer,this.dynamicDraw?Pe.DYNAMIC_DRAW:Pe.STATIC_DRAW),this.dynamicDraw||te.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(U){const te=this.context.gl;this.context.unbindVAO(),this.bind(),te.bufferSubData(te.ELEMENT_ARRAY_BUFFER,0,U.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Pn={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pt{constructor(U,te,we,Pe){this.length=te.length,this.attributes=we,this.itemSize=te.bytesPerElement,this.dynamicDraw=Pe,this.context=U;const Re=U.gl;this.buffer=Re.createBuffer(),U.bindVertexBuffer.set(this.buffer),Re.bufferData(Re.ARRAY_BUFFER,te.arrayBuffer,this.dynamicDraw?Re.DYNAMIC_DRAW:Re.STATIC_DRAW),this.dynamicDraw||te.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(U){const te=this.context.gl;this.bind(),te.bufferSubData(te.ARRAY_BUFFER,0,U.arrayBuffer)}enableAttributes(U,te){for(let we=0;we<this.attributes.length;we++){const Pe=te.attributes[this.attributes[we].name];Pe!==void 0&&U.enableVertexAttribArray(Pe)}}setVertexAttribPointers(U,te,we){for(let Pe=0;Pe<this.attributes.length;Pe++){const Re=this.attributes[Pe],Be=te.attributes[Re.name];Be!==void 0&&U.vertexAttribPointer(Be,Re.components,U[Pn[Re.type]],!1,this.itemSize,Re.offset+this.itemSize*(we||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Dt{constructor(U){this.gl=U.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(U){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class rn extends Dt{getDefault(){return j.Color.transparent}set(U){const te=this.current;(U.r!==te.r||U.g!==te.g||U.b!==te.b||U.a!==te.a||this.dirty)&&(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)}}class bn extends Dt{getDefault(){return 1}set(U){(U!==this.current||this.dirty)&&(this.gl.clearDepth(U),this.current=U,this.dirty=!1)}}class En extends Dt{getDefault(){return 0}set(U){(U!==this.current||this.dirty)&&(this.gl.clearStencil(U),this.current=U,this.dirty=!1)}}class zn extends Dt{getDefault(){return[!0,!0,!0,!0]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||U[2]!==te[2]||U[3]!==te[3]||this.dirty)&&(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)}}class $n extends Dt{getDefault(){return!0}set(U){(U!==this.current||this.dirty)&&(this.gl.depthMask(U),this.current=U,this.dirty=!1)}}class xn extends Dt{getDefault(){return 255}set(U){(U!==this.current||this.dirty)&&(this.gl.stencilMask(U),this.current=U,this.dirty=!1)}}class wn extends Dt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(U){const te=this.current;(U.func!==te.func||U.ref!==te.ref||U.mask!==te.mask||this.dirty)&&(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)}}class Sn extends Dt{getDefault(){const U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||U[2]!==te[2]||this.dirty)&&(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)}}class Jn extends Dt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.STENCIL_TEST):te.disable(te.STENCIL_TEST),this.current=U,this.dirty=!1}}class nr extends Dt{getDefault(){return[0,1]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||this.dirty)&&(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)}}class fr extends Dt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.DEPTH_TEST):te.disable(te.DEPTH_TEST),this.current=U,this.dirty=!1}}class Yn extends Dt{getDefault(){return this.gl.LESS}set(U){(U!==this.current||this.dirty)&&(this.gl.depthFunc(U),this.current=U,this.dirty=!1)}}class qn extends Dt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.BLEND):te.disable(te.BLEND),this.current=U,this.dirty=!1}}class un extends Dt{getDefault(){const U=this.gl;return[U.ONE,U.ZERO]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||this.dirty)&&(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)}}class yn extends Dt{getDefault(){return j.Color.transparent}set(U){const te=this.current;(U.r!==te.r||U.g!==te.g||U.b!==te.b||U.a!==te.a||this.dirty)&&(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)}}class Rn extends Dt{getDefault(){return this.gl.FUNC_ADD}set(U){(U!==this.current||this.dirty)&&(this.gl.blendEquation(U),this.current=U,this.dirty=!1)}}class Kn extends Dt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;U?te.enable(te.CULL_FACE):te.disable(te.CULL_FACE),this.current=U,this.dirty=!1}}class mr extends Dt{getDefault(){return this.gl.BACK}set(U){(U!==this.current||this.dirty)&&(this.gl.cullFace(U),this.current=U,this.dirty=!1)}}class Cr extends Dt{getDefault(){return this.gl.CCW}set(U){(U!==this.current||this.dirty)&&(this.gl.frontFace(U),this.current=U,this.dirty=!1)}}class Lr extends Dt{getDefault(){return null}set(U){(U!==this.current||this.dirty)&&(this.gl.useProgram(U),this.current=U,this.dirty=!1)}}class br extends Dt{getDefault(){return this.gl.TEXTURE0}set(U){(U!==this.current||this.dirty)&&(this.gl.activeTexture(U),this.current=U,this.dirty=!1)}}class Br extends Dt{getDefault(){const U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]}set(U){const te=this.current;(U[0]!==te[0]||U[1]!==te[1]||U[2]!==te[2]||U[3]!==te[3]||this.dirty)&&(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)}}class Fr extends Dt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindFramebuffer(te.FRAMEBUFFER,U),this.current=U,this.dirty=!1}}class Gr extends Dt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindRenderbuffer(te.RENDERBUFFER,U),this.current=U,this.dirty=!1}}class Ur extends Dt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindTexture(te.TEXTURE_2D,U),this.current=U,this.dirty=!1}}class Ri extends Dt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.bindBuffer(te.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}}class Li extends Dt{getDefault(){return null}set(U){const te=this.gl;te.bindBuffer(te.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1}}class Ti extends Dt{constructor(U){super(U),this.vao=U.extVertexArrayObject}getDefault(){return null}set(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)}}class Sr extends Dt{getDefault(){return 4}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.pixelStorei(te.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}}class No extends Dt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}}class Ea extends Dt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const te=this.gl;te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}}class xi extends Dt{constructor(U,te){super(U),this.context=U,this.parent=te}getDefault(){return null}}class la extends xi{setDirty(){this.dirty=!0}set(U){if(U===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const te=this.gl;te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}}class Bt extends xi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(U){if(U===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const te=this.gl;te.framebufferRenderbuffer(te.FRAMEBUFFER,this.attachment(),te.RENDERBUFFER,U),this.current=U,this.dirty=!1}}class ct extends Bt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class _t{constructor(U,te,we,Pe){this.context=U,this.width=te,this.height=we;const Re=this.framebuffer=U.gl.createFramebuffer();this.colorAttachment=new la(U,Re),Pe&&(this.depthAttachment=new Bt(U,Re))}destroy(){const U=this.context.gl,te=this.colorAttachment.get();if(te&&U.deleteTexture(te),this.depthAttachment){const we=this.depthAttachment.get();we&&U.deleteRenderbuffer(we)}U.deleteFramebuffer(this.framebuffer)}}class Lt{constructor(U){this.gl=U,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new rn(this),this.clearDepth=new bn(this),this.clearStencil=new En(this),this.colorMask=new zn(this),this.depthMask=new $n(this),this.stencilMask=new xn(this),this.stencilFunc=new wn(this),this.stencilOp=new Sn(this),this.stencilTest=new Jn(this),this.depthRange=new nr(this),this.depthTest=new fr(this),this.depthFunc=new Yn(this),this.blend=new qn(this),this.blendFunc=new un(this),this.blendColor=new yn(this),this.blendEquation=new Rn(this),this.cullFace=new Kn(this),this.cullFaceSide=new mr(this),this.frontFace=new Cr(this),this.program=new Lr(this),this.activeTexture=new br(this),this.viewport=new Br(this),this.bindFramebuffer=new Fr(this),this.bindRenderbuffer=new Gr(this),this.bindTexture=new Ur(this),this.bindVertexBuffer=new Ri(this),this.bindElementBuffer=new Li(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ti(this),this.pixelStoreUnpack=new Sr(this),this.pixelStoreUnpackPremultiplyAlpha=new No(this),this.pixelStoreUnpackFlipY=new Ea(this),this.extTextureFilterAnisotropic=U.getExtension("EXT_texture_filter_anisotropic")||U.getExtension("MOZ_EXT_texture_filter_anisotropic")||U.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=U.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=U.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(U.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=U.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=U.getExtension("OES_standard_derivatives"),this.extTimerQuery=U.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=U.getParameter(U.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(U,te){return new vn(this,U,te)}createVertexBuffer(U,te,we){return new Pt(this,U,te,we)}createRenderbuffer(U,te,we){const Pe=this.gl,Re=Pe.createRenderbuffer();return this.bindRenderbuffer.set(Re),Pe.renderbufferStorage(Pe.RENDERBUFFER,U,te,we),this.bindRenderbuffer.set(null),Re}createFramebuffer(U,te,we){return new _t(this,U,te,we)}clear({color:U,depth:te,stencil:we}){const Pe=this.gl;let Re=0;U&&(Re|=Pe.COLOR_BUFFER_BIT,this.clearColor.set(U),this.colorMask.set([!0,!0,!0,!0])),te!==void 0&&(Re|=Pe.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(te),this.depthMask.set(!0)),we!==void 0&&(Re|=Pe.STENCIL_BUFFER_BIT,this.clearStencil.set(we),this.stencilMask.set(255)),Pe.clear(Re)}setCullFace(U){U.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(U.mode),this.frontFace.set(U.frontFace))}setDepthMode(U){U.func!==this.gl.ALWAYS||U.mask?(this.depthTest.set(!0),this.depthFunc.set(U.func),this.depthMask.set(U.mask),this.depthRange.set(U.range)):this.depthTest.set(!1)}setStencilMode(U){U.test.func!==this.gl.ALWAYS||U.mask?(this.stencilTest.set(!0),this.stencilMask.set(U.mask),this.stencilOp.set([U.fail,U.depthFail,U.pass]),this.stencilFunc.set({func:U.test.func,ref:U.ref,mask:U.test.mask})):this.stencilTest.set(!1)}setColorMode(U){be(U.blendFunction,j.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(U.blendFunction),this.blendColor.set(U.blendColor)),this.colorMask.set(U.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ut extends j.Evented{constructor(U,te,we,Pe){super(),this.id=U,this.dispatcher=we,this.setEventedParent(Pe),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=j.extend({type:"raster"},te),j.extend(this,j.pick(te,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=en(this._options,this.map._requestManager,null,null,(U,te)=>{this._tileJSONRequest=null,this._loaded=!0,U?this.fire(new j.ErrorEvent(U)):te&&(j.extend(this,te),te.bounds&&(this.tileBounds=new hn(te.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(te.tiles),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(U){this.map=U,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}hasTile(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)}loadTile(U,te){const we=j.exported.devicePixelRatio>=2,Pe=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),we,this.tileSize);U.request=j.getImage(this.map._requestManager.transformRequest(Pe,j.ResourceType.Tile),(Re,Be,Ne,qe)=>(delete U.request,U.aborted?(U.state="unloaded",te(null)):Re?(U.state="errored",te(Re)):Be?(this.map._refreshExpiredTiles&&U.setExpiryData({cacheControl:Ne,expires:qe}),U.setTexture(Be,this.map.painter),U.state="loaded",j.cacheEntryPossiblyAdded(this.dispatcher),void te(null)):te(null)))}static loadTileData(U,te,we){U.setTexture(te,we)}static unloadTileData(U,te){U.texture&&te.saveTileTexture(U.texture)}abortTile(U,te){U.request&&(U.request.cancel(),delete U.request),te()}unloadTile(U,te){U.texture&&this.map.painter.saveTileTexture(U.texture),te()}hasTransition(){return!1}}let tn;function fn(_e,U,te,we,Pe,Re,Be,Ne){const qe=[_e,te,Pe,U,we,Re,1,1,1],Ke=[Be,Ne,1],Qe=j.adjoint([],qe),[ut,gt,Mt]=j.transformMat3(Ke,Ke,j.transpose(Qe,Qe));return j.multiply$1(qe,[ut,0,0,0,gt,0,0,0,Mt],qe)}class dn extends j.Evented{constructor(U,te,we,Pe){super(),this.id=U,this.dispatcher=we,this.coordinates=te.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Pe),this.options=te}load(U,te){this._loaded=te||!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this.url=this.options.url,j.getImage(this.map._requestManager.transformRequest(this.url,j.ResourceType.Image),(we,Pe)=>{if(this._loaded=!0,we)this.fire(new j.ErrorEvent(we));else if(Pe){const{HTMLImageElement:Re}=j.window;this.image=Pe instanceof Re?j.exported.getImageData(Pe):Pe,this.width=this.image.width,this.height=this.image.height,U&&(this.coordinates=U),this._finishLoading()}})}loaded(){return this._loaded}updateImage(U){return this.image&&U.url?(this.options.url=U.url,this.load(U.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(U){this.map=U,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(U){this.coordinates=U,this._boundsArray=void 0;const te=U.map(j.MercatorCoordinate.fromLngLat);return this.tileID=function(we){let Pe=1/0,Re=1/0,Be=-1/0,Ne=-1/0;for(const ut of we)Pe=Math.min(Pe,ut.x),Re=Math.min(Re,ut.y),Be=Math.max(Be,ut.x),Ne=Math.max(Ne,ut.y);const qe=Math.max(Be-Pe,Ne-Re),Ke=Math.max(0,Math.floor(-Math.log(qe)/Math.LN2)),Qe=Math.pow(2,Ke);return new j.CanonicalTileID(Ke,Math.floor((Pe+Be)/2*Qe),Math.floor((Re+Ne)/2*Qe))}(te),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(U){for(const qe in this.tiles){const Ke=this.tiles[qe];Ke.state!=="loaded"&&(Ke.state="loaded",Ke.texture=this.texture)}if(this._boundsArray)return;const te=j.tileTransform(this.tileID,this.map.transform.projection),[we,Pe,Re,Be]=this.coordinates.map(qe=>{const Ke=te.projection.project(qe[0],qe[1]);return j.getTilePoint(te,Ke)._round()});this.perspectiveTransform=function(qe,Ke,Qe,ut,gt,Mt,kt,Tt,Ct,wt){const zt=fn(0,0,qe,0,0,Ke,qe,Ke),Ot=fn(Qe,ut,gt,Mt,kt,Tt,Ct,wt);return j.multiply$1(Ot,j.adjoint(zt,zt),Ot),[Ot[6]/Ot[8]*qe/j.EXTENT,Ot[7]/Ot[8]*Ke/j.EXTENT]}(this.width,this.height,we.x,we.y,Pe.x,Pe.y,Be.x,Be.y,Re.x,Re.y);const Ne=this._boundsArray=new j.StructArrayLayout4i8;Ne.emplaceBack(we.x,we.y,0,0),Ne.emplaceBack(Pe.x,Pe.y,j.EXTENT,0),Ne.emplaceBack(Be.x,Be.y,0,j.EXTENT),Ne.emplaceBack(Re.x,Re.y,j.EXTENT,j.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=U.createVertexBuffer(Ne,j.boundsAttributes.members),this.boundsSegments=j.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const U=this.map.painter.context,te=U.gl;this.texture?this.texture.update(this.image):(this.texture=new j.Texture(U,this.image,te.RGBA),this.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE)),this._prepareData(U)}loadTile(U,te){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},te(null)):(U.state="errored",te(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const nn={vector:class extends j.Evented{constructor(_e,U,te,we){if(super(),this.id=_e,this.dispatcher=te,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,j.extend(this,j.pick(U,["url","scheme","tileSize","promoteId"])),this._options=j.extend({type:"vector"},U),this._collectResourceTiming=U.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(we),this._tileWorkers={},this._deduped=new j.DedupedRequest}load(_e){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"}));const U=this.language||this.map._language,te=this.worldview||this.map._worldview;this._tileJSONRequest=en(this._options,this.map._requestManager,U,te,(we,Pe)=>{this._tileJSONRequest=null,this._loaded=!0,we?(U&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${U}`),te&&te.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${te}`),this.fire(new j.ErrorEvent(we))):Pe&&(j.extend(this,Pe),Pe.bounds&&(this.tileBounds=new hn(Pe.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(Pe.tiles,this.map._requestManager._customAccessToken),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))),_e&&_e(we)})}loaded(){return this._loaded}hasTile(_e){return!this.tileBounds||this.tileBounds.contains(_e.canonical)}onAdd(_e){this.map=_e,this.load()}setSourceProperty(_e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),_e(),this.load(()=>{const U=this.map.style._getSourceCaches(this.id);for(const te of U)te.clearTiles()})}setTiles(_e){return this.setSourceProperty(()=>{this._options.tiles=_e}),this}setUrl(_e){return this.setSourceProperty(()=>{this.url=_e,this._options.url=_e}),this}_setLanguage(_e){return _e===this.language||this.setSourceProperty(()=>{this.language=_e}),this}_setWorldview(_e){return _e===this.worldview?this:this.worldviewOptions&&_e&&!this.worldviewOptions[_e]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${_e}".`),this):(this.setSourceProperty(()=>{this.worldview=_e}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}loadTile(_e,U){const te=this.map._requestManager.normalizeTileURL(_e.tileID.canonical.url(this.tiles,this.scheme)),we={request:this.map._requestManager.transformRequest(te,j.ResourceType.Tile),data:void 0,uid:_e.uid,tileID:_e.tileID,tileZoom:_e.tileZoom,zoom:_e.tileID.overscaledZ,tileSize:this.tileSize*_e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:_e.isSymbolTile};if(we.request.collectResourceTiming=this._collectResourceTiming,_e.actor&&_e.state!=="expired")_e.state==="loading"?_e.reloadCallback=U:_e.request=_e.actor.send("reloadTile",we,Pe.bind(this));else if(_e.actor=this._tileWorkers[te]=this._tileWorkers[te]||this.dispatcher.getActor(),this.dispatcher.ready)_e.request=_e.actor.send("loadTile",we,Pe.bind(this),void 0,!0);else{const Re=j.loadVectorTile.call({deduped:this._deduped},we,(Be,Ne)=>{Be||!Ne?Pe.call(this,Be):(we.data={cacheControl:Ne.cacheControl,expires:Ne.expires,rawData:Ne.rawData.slice(0)},_e.actor&&_e.actor.send("loadTile",we,Pe.bind(this),void 0,!0))},!0);_e.request={cancel:Re}}function Pe(Re,Be){return delete _e.request,_e.aborted?U(null):Re&&Re.status!==404?U(Re):(Be&&Be.resourceTiming&&(_e.resourceTiming=Be.resourceTiming),this.map._refreshExpiredTiles&&Be&&_e.setExpiryData(Be),_e.loadVectorData(Be,this.map.painter),j.cacheEntryPossiblyAdded(this.dispatcher),U(null),void(_e.reloadCallback&&(this.loadTile(_e,_e.reloadCallback),_e.reloadCallback=null)))}}abortTile(_e){_e.request&&(_e.request.cancel(),delete _e.request),_e.actor&&_e.actor.send("abortTile",{uid:_e.uid,type:this.type,source:this.id})}unloadTile(_e){_e.unloadVectorData(),_e.actor&&_e.actor.send("removeTile",{uid:_e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ut,"raster-dem":class extends Ut{constructor(_e,U,te,we){super(_e,U,te,we),this.type="raster-dem",this.maxzoom=22,this._options=j.extend({type:"raster-dem"},U),this.encoding=U.encoding||"mapbox"}loadTile(_e,U){const te=this.map._requestManager.normalizeTileURL(_e.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function we(Pe,Re){Pe&&(_e.state="errored",U(Pe)),Re&&(_e.dem=Re,_e.dem.onDeserialize(),_e.needsHillshadePrepare=!0,_e.needsDEMTextureUpload=!0,_e.state="loaded",U(null))}_e.request=j.getImage(this.map._requestManager.transformRequest(te,j.ResourceType.Tile),function(Pe,Re,Be,Ne){if(delete _e.request,_e.aborted)_e.state="unloaded",U(null);else if(Pe)_e.state="errored",U(Pe);else if(Re){this.map._refreshExpiredTiles&&_e.setExpiryData({cacheControl:Be,expires:Ne});const qe=j.window.ImageBitmap&&Re instanceof j.window.ImageBitmap&&(tn==null&&(tn=j.window.OffscreenCanvas&&new j.window.OffscreenCanvas(1,1).getContext("2d")&&typeof j.window.createImageBitmap=="function"),tn),Ke=1-(Re.width-j.prevPowerOfTwo(Re.width))/2;Ke<1||_e.neighboringTiles||(_e.neighboringTiles=this._getNeighboringTiles(_e.tileID));const Qe=qe?Re:j.exported.getImageData(Re,Ke),ut={uid:_e.uid,coord:_e.tileID,source:this.id,rawImageData:Qe,encoding:this.encoding,padding:Ke};_e.actor&&_e.state!=="expired"||(_e.actor=this.dispatcher.getActor(),_e.actor.send("loadDEMTile",ut,we.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(_e){const U=_e.canonical,te=Math.pow(2,U.z),we=(U.x-1+te)%te,Pe=U.x===0?_e.wrap-1:_e.wrap,Re=(U.x+1+te)%te,Be=U.x+1===te?_e.wrap+1:_e.wrap,Ne={};return Ne[new j.OverscaledTileID(_e.overscaledZ,Pe,U.z,we,U.y).key]={backfilled:!1},Ne[new j.OverscaledTileID(_e.overscaledZ,Be,U.z,Re,U.y).key]={backfilled:!1},U.y>0&&(Ne[new j.OverscaledTileID(_e.overscaledZ,Pe,U.z,we,U.y-1).key]={backfilled:!1},Ne[new j.OverscaledTileID(_e.overscaledZ,_e.wrap,U.z,U.x,U.y-1).key]={backfilled:!1},Ne[new j.OverscaledTileID(_e.overscaledZ,Be,U.z,Re,U.y-1).key]={backfilled:!1}),U.y+1<te&&(Ne[new j.OverscaledTileID(_e.overscaledZ,Pe,U.z,we,U.y+1).key]={backfilled:!1},Ne[new j.OverscaledTileID(_e.overscaledZ,_e.wrap,U.z,U.x,U.y+1).key]={backfilled:!1},Ne[new j.OverscaledTileID(_e.overscaledZ,Be,U.z,Re,U.y+1).key]={backfilled:!1}),Ne}unloadTile(_e){_e.demTexture&&this.map.painter.saveTileTexture(_e.demTexture),_e.fbo&&(_e.fbo.destroy(),delete _e.fbo),_e.dem&&delete _e.dem,delete _e.neighboringTiles,_e.state="unloaded"}},geojson:class extends j.Evented{constructor(_e,U,te,we){super(),this.id=_e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=te.getActor(),this.setEventedParent(we),this._data=U.data,this._options=j.extend({},U),this._collectResourceTiming=U.collectResourceTiming,U.maxzoom!==void 0&&(this.maxzoom=U.maxzoom),U.type&&(this.type=U.type),U.attribution&&(this.attribution=U.attribution),this.promoteId=U.promoteId;const Pe=j.EXTENT/this.tileSize;this.workerOptions=j.extend({source:this.id,cluster:U.cluster||!1,geojsonVtOptions:{buffer:(U.buffer!==void 0?U.buffer:128)*Pe,tolerance:(U.tolerance!==void 0?U.tolerance:.375)*Pe,extent:j.EXTENT,maxZoom:this.maxzoom,lineMetrics:U.lineMetrics||!1,generateId:U.generateId||!1},superclusterOptions:{maxZoom:U.clusterMaxZoom!==void 0?U.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,U.clusterMinPoints||2),extent:j.EXTENT,radius:(U.clusterRadius!==void 0?U.clusterRadius:50)*Pe,log:!1,generateId:U.generateId||!1},clusterProperties:U.clusterProperties,filter:U.filter},U.workerOptions)}onAdd(_e){this.map=_e,this.setData(this._data)}setData(_e){return this._data=_e,this._updateWorkerData(),this}getClusterExpansionZoom(_e,U){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:_e,source:this.id},U),this}getClusterChildren(_e,U){return this.actor.send("geojson.getClusterChildren",{clusterId:_e,source:this.id},U),this}getClusterLeaves(_e,U,te,we){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:_e,limit:U,offset:te},we),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new j.Event("dataloading",{dataType:"source"})),this._loaded=!1;const _e=j.extend({},this.workerOptions),U=this._data;typeof U=="string"?(_e.request=this.map._requestManager.transformRequest(j.exported.resolveURL(U),j.ResourceType.Source),_e.request.collectResourceTiming=this._collectResourceTiming):_e.data=JSON.stringify(U),this._pendingLoad=this.actor.send(`${this.type}.loadData`,_e,(te,we)=>{if(this._loaded=!0,this._pendingLoad=null,te)this.fire(new j.ErrorEvent(te));else{const Pe={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&we&&we.resourceTiming&&we.resourceTiming[this.id]&&(Pe.resourceTiming=we.resourceTiming[this.id]),this.fire(new j.Event("data",Pe)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(_e,U){const te=_e.actor?"reloadTile":"loadTile";_e.actor=this.actor,_e.request=this.actor.send(te,{type:this.type,uid:_e.uid,tileID:_e.tileID,tileZoom:_e.tileZoom,zoom:_e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(we,Pe)=>(delete _e.request,_e.unloadVectorData(),_e.aborted?U(null):we?U(we):(_e.loadVectorData(Pe,this.map.painter,te==="reloadTile"),U(null))),void 0,te==="loadTile")}abortTile(_e){_e.request&&(_e.request.cancel(),delete _e.request),_e.aborted=!0}unloadTile(_e){_e.unloadVectorData(),this.actor.send("removeTile",{uid:_e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return j.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends dn{constructor(_e,U,te,we){super(_e,U,te,we),this.roundZoom=!0,this.type="video",this.options=U}load(){this._loaded=!1;const _e=this.options;this.urls=[];for(const U of _e.urls)this.urls.push(this.map._requestManager.transformRequest(U,j.ResourceType.Source).url);j.getVideo(this.urls,(U,te)=>{this._loaded=!0,U?this.fire(new j.ErrorEvent(U)):te&&(this.video=te,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(_e){if(this.video){const U=this.video.seekable;_e<U.start(0)||_e>U.end(0)?this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${U.start(0)} and ${U.end(0)}-second mark.`))):this.video.currentTime=_e}}getVideo(){return this.video}onAdd(_e){this.map||(this.map=_e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _e=this.map.painter.context,U=_e.gl;this.texture?this.video.paused||(this.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE),U.texSubImage2D(U.TEXTURE_2D,0,0,0,U.RGBA,U.UNSIGNED_BYTE,this.video)):(this.texture=new j.Texture(_e,this.video,U.RGBA),this.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(_e)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:dn,canvas:class extends dn{constructor(_e,U,te,we){super(_e,U,te,we),U.coordinates?Array.isArray(U.coordinates)&&U.coordinates.length===4&&!U.coordinates.some(Pe=>!Array.isArray(Pe)||Pe.length!==2||Pe.some(Re=>typeof Re!="number"))||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${_e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${_e}`,null,'missing required property "coordinates"'))),U.animate&&typeof U.animate!="boolean"&&this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${_e}`,null,'optional "animate" property must be a boolean value'))),U.canvas?typeof U.canvas=="string"||U.canvas instanceof j.window.HTMLCanvasElement||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${_e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${_e}`,null,'missing required property "canvas"'))),this.options=U,this.animate=U.animate===void 0||U.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof j.window.HTMLCanvasElement?this.options.canvas:j.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new j.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(_e){this.map=_e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let _e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const U=this.map.painter.context;this.texture?(_e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new j.Texture(U,this.canvas,U.gl.RGBA,{premultiply:!0}),this._prepareData(U)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const _e of[this.canvas.width,this.canvas.height])if(isNaN(_e)||_e<=0)return!0;return!1}},custom:class extends j.Evented{constructor(_e,U,te,we){super(),this.id=_e,this.type="custom",this._dataType="raster",this._dispatcher=te,this._implementation=U,this.setEventedParent(we),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new j.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new j.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new hn(this._implementation.bounds,this.minzoom,this.maxzoom)),U.update=this._update.bind(this),U.coveringTiles=this._coveringTiles.bind(this),j.extend(this,j.pick(U,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return j.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(_e){this._map=_e,this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(_e),this.load()}onRemove(_e){this._implementation.onRemove&&this._implementation.onRemove(_e)}hasTile(_e){if(this._implementation.hasTile){const{x:U,y:te,z:we}=_e.canonical;return this._implementation.hasTile({x:U,y:te,z:we})}return!this.tileBounds||this.tileBounds.contains(_e.canonical)}loadTile(_e,U){const{x:te,y:we,z:Pe}=_e.tileID.canonical,Re=new j.window.AbortController,Be=this._implementation.loadTile({x:te,y:we,z:Pe},{signal:Re.signal});if(!Be)return this.loadTileData(_e,{width:this.tileSize,height:this.tileSize,data:null}),_e.state="loaded",U(null);Be.cancel=()=>Re.abort(),_e.request=Be.then(function(Ne){return delete _e.request,_e.aborted?(_e.state="unloaded",U(null)):Ne?function(qe){return qe instanceof j.window.ImageData||qe instanceof j.window.ImageBitmap||qe instanceof j.window.HTMLCanvasElement}(Ne)?(this.loadTileData(_e,Ne),_e.state="loaded",void U(null)):(_e.state="errored",U(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(_e,{width:this.tileSize,height:this.tileSize,data:null}),_e.state="loaded",U(null))}.bind(this)).catch(Ne=>{Ne.code!==20&&(_e.state="errored",U(Ne))})}loadTileData(_e,U){Ut.loadTileData(_e,U,this._map.painter)}unloadTileData(_e){Ut.unloadTileData(_e,this._map.painter)}prepareTile(_e){if(!this._implementation.prepareTile)return null;const{x:U,y:te,z:we}=_e.tileID.canonical,Pe=this._implementation.prepareTile({x:U,y:te,z:we});return Pe?(this.loadTileData(_e,Pe),_e.state="loaded",Pe):null}unloadTile(_e,U){if(this.unloadTileData(_e),this._implementation.unloadTile){const{x:te,y:we,z:Pe}=_e.tileID.canonical;this._implementation.unloadTile({x:te,y:we,z:Pe})}U()}abortTile(_e,U){_e.request&&_e.request.cancel&&(_e.request.cancel(),delete _e.request),U()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(_e=>({x:_e.canonical.x,y:_e.canonical.y,z:_e.canonical.z}))}_update(){this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}}},_n=function(_e,U,te,we){const Pe=new nn[U.type](_e,U,te,we);if(Pe.id!==_e)throw new Error(`Expected Source id to be ${_e} instead of ${Pe.id}`);return j.bindAll(["load","abort","unload","serialize","prepare"],Pe),Pe};function jn(_e,U){const te=j.identity([]);return j.scale(te,te,[.5*_e.width,.5*-_e.height,1]),j.translate(te,te,[1,-1,0]),j.multiply(te,te,_e.calculateProjMatrix(U.toUnwrapped())),Float32Array.from(te)}function sr(_e,U,te,we,Pe,Re,Be,Ne=!1){const qe=_e.tilesIn(we,Be,Ne);qe.sort(Ar);const Ke=[];for(const ut of qe)Ke.push({wrappedTileID:ut.tile.tileID.wrapped().key,queryResults:ut.tile.queryRenderedFeatures(U,te,_e._state,ut,Pe,Re,jn(_e.transform,ut.tile.tileID),Ne)});const Qe=function(ut){const gt={},Mt={};for(const kt of ut){const Tt=kt.queryResults,Ct=kt.wrappedTileID,wt=Mt[Ct]=Mt[Ct]||{};for(const zt in Tt){const Ot=Tt[zt],Qt=wt[zt]=wt[zt]||{},Kt=gt[zt]=gt[zt]||[];for(const Gt of Ot)Qt[Gt.featureIndex]||(Qt[Gt.featureIndex]=!0,Kt.push(Gt))}}return gt}(Ke);for(const ut in Qe)Qe[ut].forEach(gt=>{const Mt=gt.feature,kt=Mt.layer;kt&&kt.type!=="background"&&kt.type!=="sky"&&(Mt.source=kt.source,kt["source-layer"]&&(Mt.sourceLayer=kt["source-layer"]),Mt.state=Mt.id!==void 0?_e.getFeatureState(kt["source-layer"],Mt.id):{})});return Qe}function Hn(_e,U){const te=_e.getRenderableIds().map(Re=>_e.getTileByID(Re)),we=[],Pe={};for(let Re=0;Re<te.length;Re++){const Be=te[Re],Ne=Be.tileID.canonical.key;Pe[Ne]||(Pe[Ne]=!0,Be.querySourceFeatures(we,U))}return we}function Ar(_e,U){const te=_e.tileID,we=U.tileID;return te.overscaledZ-we.overscaledZ||te.canonical.y-we.canonical.y||te.wrap-we.wrap||te.canonical.x-we.canonical.x}function wr(){return hs.workerClass!=null?new hs.workerClass:new j.window.Worker(hs.workerUrl)}const gr="mapboxgl_preloaded_worker_pool";class Er{constructor(){this.active={}}acquire(U){if(!this.workers)for(this.workers=[];this.workers.length<Er.workerCount;)this.workers.push(new wr);return this.active[U]=!0,this.workers.slice()}release(U){delete this.active[U],this.numActive()===0&&(this.workers.forEach(te=>{te.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[gr]}numActive(){return Object.keys(this.active).length}}let $r;function ei(){return $r||($r=new Er),$r}function ai(_e,U){const te={};for(const we in _e)we!=="ref"&&(te[we]=_e[we]);return j.refProperties.forEach(we=>{we in U&&(te[we]=U[we])}),te}function ni(_e){_e=_e.slice();const U=Object.create(null);for(let te=0;te<_e.length;te++)U[_e[te].id]=_e[te];for(let te=0;te<_e.length;te++)"ref"in _e[te]&&(_e[te]=ai(_e[te],U[_e[te].ref]));return _e}Er.workerCount=2;const xr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function gn(_e,U,te){te.push({command:xr.addSource,args:[_e,U[_e]]})}function fo(_e,U,te){U.push({command:xr.removeSource,args:[_e]}),te[_e]=!0}function ki(_e,U,te,we){fo(_e,te,we),gn(_e,U,te)}function ca(_e,U,te){let we;for(we in _e[te])if(_e[te].hasOwnProperty(we)&&we!=="data"&&!be(_e[te][we],U[te][we]))return!1;for(we in U[te])if(U[te].hasOwnProperty(we)&&we!=="data"&&!be(_e[te][we],U[te][we]))return!1;return!0}function Ta(_e,U,te,we,Pe,Re){let Be;for(Be in U=U||{},_e=_e||{})_e.hasOwnProperty(Be)&&(be(_e[Be],U[Be])||te.push({command:Re,args:[we,Be,U[Be],Pe]}));for(Be in U)U.hasOwnProperty(Be)&&!_e.hasOwnProperty(Be)&&(be(_e[Be],U[Be])||te.push({command:Re,args:[we,Be,U[Be],Pe]}))}function Po(_e){return _e.id}function dl(_e,U){return _e[U.id]=U,_e}class Ku{constructor(U,te){this.reset(U,te)}reset(U,te){this.points=U||[],this._distances=[0];for(let we=1;we<this.points.length;we++)this._distances[we]=this._distances[we-1]+this.points[we].dist(this.points[we-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(te||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(U){if(this.points.length===1)return this.points[0];U=j.clamp(U,0,1);let te=1,we=this._distances[te];const Pe=U*this.paddedLength+this.padding;for(;we<Pe&&te<this._distances.length;)we=this._distances[++te];const Re=te-1,Be=this._distances[Re],Ne=we-Be,qe=Ne>0?(Pe-Be)/Ne:0;return this.points[Re].mult(1-qe).add(this.points[te].mult(qe))}}class ua{constructor(U,te,we){const Pe=this.boxCells=[],Re=this.circleCells=[];this.xCellCount=Math.ceil(U/we),this.yCellCount=Math.ceil(te/we);for(let Be=0;Be<this.xCellCount*this.yCellCount;Be++)Pe.push([]),Re.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=U,this.height=te,this.xScale=this.xCellCount/U,this.yScale=this.yCellCount/te,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(U,te,we,Pe,Re){this._forEachCell(te,we,Pe,Re,this._insertBoxCell,this.boxUid++),this.boxKeys.push(U),this.bboxes.push(te),this.bboxes.push(we),this.bboxes.push(Pe),this.bboxes.push(Re)}insertCircle(U,te,we,Pe){this._forEachCell(te-Pe,we-Pe,te+Pe,we+Pe,this._insertCircleCell,this.circleUid++),this.circleKeys.push(U),this.circles.push(te),this.circles.push(we),this.circles.push(Pe)}_insertBoxCell(U,te,we,Pe,Re,Be){this.boxCells[Re].push(Be)}_insertCircleCell(U,te,we,Pe,Re,Be){this.circleCells[Re].push(Be)}_query(U,te,we,Pe,Re,Be){if(we<0||U>this.width||Pe<0||te>this.height)return!Re&&[];const Ne=[];if(U<=0&&te<=0&&this.width<=we&&this.height<=Pe){if(Re)return!0;for(let qe=0;qe<this.boxKeys.length;qe++)Ne.push({key:this.boxKeys[qe],x1:this.bboxes[4*qe],y1:this.bboxes[4*qe+1],x2:this.bboxes[4*qe+2],y2:this.bboxes[4*qe+3]});for(let qe=0;qe<this.circleKeys.length;qe++){const Ke=this.circles[3*qe],Qe=this.circles[3*qe+1],ut=this.circles[3*qe+2];Ne.push({key:this.circleKeys[qe],x1:Ke-ut,y1:Qe-ut,x2:Ke+ut,y2:Qe+ut})}return Be?Ne.filter(Be):Ne}return this._forEachCell(U,te,we,Pe,this._queryCell,Ne,{hitTest:Re,seenUids:{box:{},circle:{}}},Be),Re?Ne.length>0:Ne}_queryCircle(U,te,we,Pe,Re){const Be=U-we,Ne=U+we,qe=te-we,Ke=te+we;if(Ne<0||Be>this.width||Ke<0||qe>this.height)return!Pe&&[];const Qe=[];return this._forEachCell(Be,qe,Ne,Ke,this._queryCellCircle,Qe,{hitTest:Pe,circle:{x:U,y:te,radius:we},seenUids:{box:{},circle:{}}},Re),Pe?Qe.length>0:Qe}query(U,te,we,Pe,Re){return this._query(U,te,we,Pe,!1,Re)}hitTest(U,te,we,Pe,Re){return this._query(U,te,we,Pe,!0,Re)}hitTestCircle(U,te,we,Pe){return this._queryCircle(U,te,we,!0,Pe)}_queryCell(U,te,we,Pe,Re,Be,Ne,qe){const Ke=Ne.seenUids,Qe=this.boxCells[Re];if(Qe!==null){const gt=this.bboxes;for(const Mt of Qe)if(!Ke.box[Mt]){Ke.box[Mt]=!0;const kt=4*Mt;if(U<=gt[kt+2]&&te<=gt[kt+3]&&we>=gt[kt+0]&&Pe>=gt[kt+1]&&(!qe||qe(this.boxKeys[Mt]))){if(Ne.hitTest)return Be.push(!0),!0;Be.push({key:this.boxKeys[Mt],x1:gt[kt],y1:gt[kt+1],x2:gt[kt+2],y2:gt[kt+3]})}}}const ut=this.circleCells[Re];if(ut!==null){const gt=this.circles;for(const Mt of ut)if(!Ke.circle[Mt]){Ke.circle[Mt]=!0;const kt=3*Mt;if(this._circleAndRectCollide(gt[kt],gt[kt+1],gt[kt+2],U,te,we,Pe)&&(!qe||qe(this.circleKeys[Mt]))){if(Ne.hitTest)return Be.push(!0),!0;{const Tt=gt[kt],Ct=gt[kt+1],wt=gt[kt+2];Be.push({key:this.circleKeys[Mt],x1:Tt-wt,y1:Ct-wt,x2:Tt+wt,y2:Ct+wt})}}}}}_queryCellCircle(U,te,we,Pe,Re,Be,Ne,qe){const Ke=Ne.circle,Qe=Ne.seenUids,ut=this.boxCells[Re];if(ut!==null){const Mt=this.bboxes;for(const kt of ut)if(!Qe.box[kt]){Qe.box[kt]=!0;const Tt=4*kt;if(this._circleAndRectCollide(Ke.x,Ke.y,Ke.radius,Mt[Tt+0],Mt[Tt+1],Mt[Tt+2],Mt[Tt+3])&&(!qe||qe(this.boxKeys[kt])))return Be.push(!0),!0}}const gt=this.circleCells[Re];if(gt!==null){const Mt=this.circles;for(const kt of gt)if(!Qe.circle[kt]){Qe.circle[kt]=!0;const Tt=3*kt;if(this._circlesCollide(Mt[Tt],Mt[Tt+1],Mt[Tt+2],Ke.x,Ke.y,Ke.radius)&&(!qe||qe(this.circleKeys[kt])))return Be.push(!0),!0}}}_forEachCell(U,te,we,Pe,Re,Be,Ne,qe){const Ke=this._convertToXCellCoord(U),Qe=this._convertToYCellCoord(te),ut=this._convertToXCellCoord(we),gt=this._convertToYCellCoord(Pe);for(let Mt=Ke;Mt<=ut;Mt++)for(let kt=Qe;kt<=gt;kt++)if(Re.call(this,U,te,we,Pe,this.xCellCount*kt+Mt,Be,Ne,qe))return}_convertToXCellCoord(U){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(U*this.xScale)))}_convertToYCellCoord(U){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(U*this.yScale)))}_circlesCollide(U,te,we,Pe,Re,Be){const Ne=Pe-U,qe=Re-te,Ke=we+Be;return Ke*Ke>Ne*Ne+qe*qe}_circleAndRectCollide(U,te,we,Pe,Re,Be,Ne){const qe=(Be-Pe)/2,Ke=Math.abs(U-(Pe+qe));if(Ke>qe+we)return!1;const Qe=(Ne-Re)/2,ut=Math.abs(te-(Re+Qe));if(ut>Qe+we)return!1;if(Ke<=qe||ut<=Qe)return!0;const gt=Ke-qe,Mt=ut-Qe;return gt*gt+Mt*Mt<=we*we}}const lr=Math.tan(85*Math.PI/180);function Or(_e,U,te,we,Pe,Re,Be){const Ne=j.create();if(te)if(Re.name==="globe"){const qe=j.calculateGlobeLabelMatrix(Pe,U);j.multiply(Ne,Ne,qe)}else{const qe=It([],Be);Ne[0]=qe[0],Ne[1]=qe[1],Ne[4]=qe[2],Ne[5]=qe[3],we||j.rotateZ(Ne,Ne,Pe.angle)}else j.multiply(Ne,Pe.labelPlaneMatrix,_e);return Ne}function Nr(_e,U,te,we,Pe,Re,Be){const Ne=Or(_e,U,te,we,Pe,Re,Be);return Re.name==="globe"&&te||(Ne[2]=Ne[6]=Ne[10]=Ne[14]=0),Ne}function Oo(_e,U,te,we,Pe,Re,Be){if(te){if(Re.name==="globe"){const Ne=Or(_e,U,te,we,Pe,Re,Be);return j.invert(Ne,Ne),j.multiply(Ne,_e,Ne),Ne}{const Ne=j.clone(_e),qe=j.identity([]);return qe[0]=Be[0],qe[1]=Be[1],qe[4]=Be[2],qe[5]=Be[3],j.multiply(Ne,Ne,qe),we||j.rotateZ(Ne,Ne,-Pe.angle),Ne}}return Pe.glCoordMatrix}function Ro(_e,U,te=0){const we=[_e.x,_e.y,te,1];te?j.transformMat4$1(we,we,U):Xi(we,we,U);const Pe=we[3];return{point:[we[0]/Pe,we[1]/Pe,we[2]/Pe],signedDistanceFromCamera:Pe}}function Pr(_e,U){const te=[_e[0],_e[1],_e[2],1];j.transformMat4$1(te,te,U);const we=te[3];return{point:[te[0]/we,te[1]/we,te[2]/we],signedDistanceFromCamera:we}}function Ts(_e,U){return Math.min(.5+_e/U*.5,1.5)}function ha(_e,U){const te=_e[0]/_e[3],we=_e[1]/_e[3];return te>=-U[0]&&te<=U[0]&&we>=-U[1]&&we<=U[1]}function ks(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke){const Qe=te.transform,ut=we?_e.textSizeData:_e.iconSizeData,gt=j.evaluateSizeForZoom(ut,te.transform.zoom),Mt=Qe.projection.name==="globe",kt=[256/te.width*2+1,256/te.height*2+1],Tt=we?_e.text.dynamicLayoutVertexArray:_e.icon.dynamicLayoutVertexArray;Tt.clear();let Ct=null;Mt&&(Ct=we?_e.text.globeExtVertexArray:_e.icon.globeExtVertexArray);const wt=_e.lineVertexArray,zt=we?_e.text.placedSymbolArray:_e.icon.placedSymbolArray,Ot=te.transform.width/te.transform.height;let Qt=!1;for(let Kt=0;Kt<zt.length;Kt++){const Gt=zt.get(Kt);if(Gt.writingMode!==j.WritingMode.vertical||Qt||Kt!==0&&zt.get(Kt-1).writingMode===j.WritingMode.horizontal||(Qt=!0),(Gt.hidden||Gt.writingMode===j.WritingMode.vertical)&&!Qt){pa(Gt.numGlyphs,Tt);continue}Qt=!1;const Yt=new j.pointGeometry(Gt.tileAnchorX,Gt.tileAnchorY),Wt=qe?qe(Yt):[0,0,0],sn=Qe.projection.projectTilePoint(Yt.x,Yt.y,Ke.canonical),mn=[sn.x+Wt[0],sn.y+Wt[1],sn.z+Wt[2]],Wn=[...mn,1];if(j.transformMat4$1(Wn,Wn,U),!ha(Wn,kt)){pa(Gt.numGlyphs,Tt);continue}const pn=Ts(te.transform.cameraToCenterDistance,Wn[3]),Dn=j.evaluateSizeForFeature(ut,gt,Gt),Nn=Be?Dn/pn:Dn*pn,er=Ro(new j.pointGeometry(mn[0],mn[1]),Pe,mn[2]);if(er.signedDistanceFromCamera<=0){pa(Gt.numGlyphs,Tt);continue}let kn={};const Zn=Be?null:qe,Ln=Qc(Gt,Nn,!1,Ne,U,Pe,Re,_e.glyphOffsetArray,wt,Tt,Ct,er.point,Yt,kn,Ot,Zn,Qe.projection,Ke,Be);Qt=Ln.useVertical,Zn&&Ln.needsFlipping&&(kn={}),(Ln.notEnoughRoom||Qt||Ln.needsFlipping&&Qc(Gt,Nn,!0,Ne,U,Pe,Re,_e.glyphOffsetArray,wt,Tt,Ct,er.point,Yt,kn,Ot,Zn,Qe.projection,Ke,Be).notEnoughRoom)&&pa(Gt.numGlyphs,Tt)}we?(_e.text.dynamicLayoutVertexBuffer.updateData(Tt),Ct&&_e.text.globeExtVertexBuffer.updateData(Ct)):(_e.icon.dynamicLayoutVertexBuffer.updateData(Tt),Ct&&_e.icon.globeExtVertexBuffer.updateData(Ct))}function _o(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt){const Ct=Ne.glyphStartIndex+Ne.numGlyphs,wt=Ne.lineStartIndex,zt=Ne.lineStartIndex+Ne.lineLength,Ot=U.getoffsetX(Ne.glyphStartIndex),Qt=U.getoffsetX(Ct-1),Kt=da(_e*Ot,te,we,Pe,Re,Be,Ne.segment,wt,zt,qe,Ke,Qe,ut,gt,!0,Mt,kt,Tt);if(!Kt)return null;const Gt=da(_e*Qt,te,we,Pe,Re,Be,Ne.segment,wt,zt,qe,Ke,Qe,ut,gt,!0,Mt,kt,Tt);return Gt?{first:Kt,last:Gt}:null}function bi(_e,U,te,we){return _e.writingMode===j.WritingMode.horizontal&&Math.abs(te.y-U.y)>Math.abs(te.x-U.x)*we?{useVertical:!0}:_e.writingMode===j.WritingMode.vertical?U.y<te.y?{needsFlipping:!0}:null:_e.flipState!==0&&function(Pe,Re,Be){const Ne=(Re.x-Pe.x)*Be;return Ne===0||Math.abs((Re.y-Pe.y)/Ne)>lr}(U,te,we)?_e.flipState===1?{needsFlipping:!0}:null:U.x>te.x?{needsFlipping:!0}:null}function Qc(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt,Ct,wt,zt){const Ot=U/24,Qt=_e.lineOffsetX*Ot,Kt=_e.lineOffsetY*Ot;let Gt;if(_e.numGlyphs>1){const Yt=_e.glyphStartIndex+_e.numGlyphs,Wt=_e.lineStartIndex,sn=_e.lineStartIndex+_e.lineLength,mn=_o(Ot,Ne,Qt,Kt,te,ut,gt,_e,qe,Re,Mt,Tt,!1,Ct,wt,zt);if(!mn)return{notEnoughRoom:!0};const Wn=Pr(mn.first.point,Be).point,pn=Pr(mn.last.point,Be).point,Dn=new j.pointGeometry(Wn[0],Wn[1]),Nn=new j.pointGeometry(pn[0],pn[1]);if(we&&!te){const er=bi(_e,Dn,Nn,kt);if(_e.flipState=er&&er.needsFlipping?1:2,er)return er}Gt=[mn.first];for(let er=_e.glyphStartIndex+1;er<Yt-1;er++)Gt.push(da(Ot*Ne.getoffsetX(er),Qt,Kt,te,ut,gt,_e.segment,Wt,sn,qe,Re,Mt,Tt,!1,!1,Ct,wt,zt));Gt.push(mn.last)}else{if(we&&!te){const Wt=Ro(gt,Pe).point,sn=_e.lineStartIndex+_e.segment+1,mn=new j.pointGeometry(qe.getx(sn),qe.gety(sn)),Wn=Ro(mn,Pe),pn=Wn.signedDistanceFromCamera>0?Wn.point:pl(gt,mn,Wt,1,Pe,void 0,Ct,wt.canonical),Dn=bi(_e,new j.pointGeometry(Wt[0],Wt[1]),new j.pointGeometry(pn[0],pn[1]),kt);if(_e.flipState=Dn&&Dn.needsFlipping?1:2,Dn)return Dn}const Yt=da(Ot*Ne.getoffsetX(_e.glyphStartIndex),Qt,Kt,te,ut,gt,_e.segment,_e.lineStartIndex,_e.lineStartIndex+_e.lineLength,qe,Re,Mt,Tt,!1,!1,Ct,wt,zt);if(!Yt)return{notEnoughRoom:!0};Gt=[Yt]}if(Qe)for(const Yt of Gt)j.updateGlobeVertexNormal(Qe,Ke.length+0,Yt.up[0],Yt.up[1],Yt.up[2]),j.updateGlobeVertexNormal(Qe,Ke.length+1,Yt.up[0],Yt.up[1],Yt.up[2]),j.updateGlobeVertexNormal(Qe,Ke.length+2,Yt.up[0],Yt.up[1],Yt.up[2]),j.updateGlobeVertexNormal(Qe,Ke.length+3,Yt.up[0],Yt.up[1],Yt.up[2]),j.addDynamicAttributes(Ke,Yt.point[0],Yt.point[1],Yt.point[2],Yt.angle);else for(const Yt of Gt)j.addDynamicAttributes(Ke,Yt.point[0],Yt.point[1],Yt.point[2],Yt.angle);return{}}function Xa(_e,U,te,we,Pe){const Re=we.projectTilePoint(_e.x,_e.y,U);if(!Pe)return Ro(Re,te,Re.z);const Be=Pe(_e);return Ro(new j.pointGeometry(Re.x+Be[0],Re.y+Be[1]),te,Re.z+Be[2])}function pl(_e,U,te,we,Pe,Re,Be,Ne){const qe=Xa(_e.add(_e.sub(U)._unit()),Ne,Pe,Be,Re).point,Ke=j.sub([],te,qe);return j.scaleAndAdd([],te,Ke,we/j.length(Ke))}function da(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt,Ct,wt){const zt=we?_e-U:_e+U;let Ot=zt>0?1:-1,Qt=0;we&&(Ot*=-1,Qt=Math.PI),Ot<0&&(Qt+=Math.PI);let Kt=Ot>0?Ne+Be:Ne+Be+1,Gt=Pe,Yt=Pe,Wt=0,sn=0;const mn=Math.abs(zt),Wn=[],pn=[];let Dn=Re;const Nn=()=>{const _r=Kt-Ot;return Wt===0?Re:new j.pointGeometry(Ke.getx(_r),Ke.gety(_r))},er=()=>pl(Nn(),Dn,Yt,mn-Wt+1,Qe,gt,Tt,Ct.canonical);for(;Wt+sn<=mn;){if(Kt+=Ot,Kt<Ne||Kt>=qe)return null;if(Yt=Gt,Wn.push(Gt),Mt&&pn.push(Dn||Nn()),Gt=ut[Kt],Gt===void 0){Dn=new j.pointGeometry(Ke.getx(Kt),Ke.gety(Kt));const _r=Xa(Dn,Ct.canonical,Qe,Tt,gt);Gt=_r.signedDistanceFromCamera>0?ut[Kt]=_r.point:er()}else Dn=null;Wt+=sn,sn=j.distance(Yt,Gt)}Dn=Dn||new j.pointGeometry(Ke.getx(Kt),Ke.gety(Kt));const kn=Nn();kt&&gt&&(ut[Kt]=Gt=ut[Kt]===void 0?Gt:er(),sn=j.distance(Yt,Gt));const Zn=(mn-Wt)/sn,Ln=Dn.sub(kn).mult(Zn)._add(kn),or=j.sub([],Gt,Yt),tr=j.scaleAndAdd([],Yt,or,Zn);let pr=[0,0,1],yr=or[0],Tr=or[1];if(wt&&(pr=Tt.upVector(Ct.canonical,Ln.x,Ln.y),pr[0]!==0||pr[1]!==0||pr[2]!==1)){const _r=[1,0,0],Ir=[0,1,0];_r[0]=pr[2],_r[1]=0,_r[2]=-pr[0],j.cross(Ir,pr,_r),j.normalize(_r,_r),j.normalize(Ir,Ir),yr=j.dot(or,_r),Tr=j.dot(or,Ir)}if(te){const _r=j.cross([],pr,or);j.normalize(_r,_r),j.scaleAndAdd(tr,tr,_r,te*Ot)}const Vr=Qt+Math.atan2(Tr,yr);return Wn.push(tr),Mt&&pn.push(Ln),{point:tr,angle:Vr,path:Wn,tilePath:pn,up:pr}}const ic=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function pa(_e,U){for(let te=0;te<_e;te++){const we=U.length;U.resize(we+4),U.float32.set(ic,4*we)}}function Xi(_e,U,te){const we=U[0],Pe=U[1];return _e[0]=te[0]*we+te[4]*Pe+te[12],_e[1]=te[1]*we+te[5]*Pe+te[13],_e[3]=te[3]*we+te[7]*Pe+te[15],_e}const ii=100;class oc{constructor(U,te,we=new ua(U.width+200,U.height+200,25),Pe=new ua(U.width+200,U.height+200,25)){this.transform=U,this.grid=we,this.ignoredGrid=Pe,this.pitchfactor=Math.cos(U._pitch)*U.cameraToCenterDistance,this.screenRightBoundary=U.width+ii,this.screenBottomBoundary=U.height+ii,this.gridRightBoundary=U.width+200,this.gridBottomBoundary=U.height+200,this.fogState=te}placeCollisionBox(U,te,we,Pe,Re,Be,Ne,qe){let Ke=we.projectedAnchorX,Qe=we.projectedAnchorY,ut=we.projectedAnchorZ;const gt=we.elevation,Mt=we.tileID;if(gt&&Mt){const Kt=U.getProjection().upVector(Mt.canonical,we.tileAnchorX,we.tileAnchorY),Gt=U.getProjection().upVectorScale(Mt.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Ke+=Kt[0]*gt*Gt,Qe+=Kt[1]*gt*Gt,ut+=Kt[2]*gt*Gt}const kt=this.projectAndGetPerspectiveRatio(Ne,[Ke,Qe,ut],we.tileID,U.projection.name==="globe"||!!gt||this.transform.pitch>0,U.getProjection()),Tt=Be*kt.perspectiveRatio,Ct=(we.x1*te+Pe.x-we.padding)*Tt+kt.point.x,wt=(we.y1*te+Pe.y-we.padding)*Tt+kt.point.y,zt=(we.x2*te+Pe.x+we.padding)*Tt+kt.point.x,Ot=(we.y2*te+Pe.y+we.padding)*Tt+kt.point.y,Qt=kt.perspectiveRatio<=.55||kt.occluded;return!this.isInsideGrid(Ct,wt,zt,Ot)||!Re&&this.grid.hitTest(Ct,wt,zt,Ot,qe)||Qt?{box:[],offscreen:!1,occluded:kt.occluded}:{box:[Ct,wt,zt,Ot],offscreen:this.isOffscreen(Ct,wt,zt,Ot),occluded:!1}}placeCollisionCircles(U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt){const Ct=[],wt=this.transform.elevation,zt=wt?wt.getAtTileOffsetFunc(Tt,this.transform.center.lat,this.transform.worldSize,U.getProjection()):kn=>[0,0,0],Ot=new j.pointGeometry(we.tileAnchorX,we.tileAnchorY),Qt=U.getProjection().projectTilePoint(we.tileAnchorX,we.tileAnchorY,Tt.canonical),Kt=zt(Ot),Gt=[Qt.x+Kt[0],Qt.y+Kt[1],Qt.z+Kt[2]],Yt=U.projection.name==="globe",Wt=this.projectAndGetPerspectiveRatio(Ne,[Gt[0],Gt[1],Gt[2]],Tt,Yt||!!wt||this.transform.pitch>0,U.getProjection()),{perspectiveRatio:sn}=Wt,mn=(ut?Be/sn:Be*sn)/j.ONE_EM,Wn=Ro(new j.pointGeometry(Gt[0],Gt[1]),qe,Gt[2]).point,pn=Wt.signedDistanceFromCamera>0?_o(mn,Re,we.lineOffsetX*mn,we.lineOffsetY*mn,!1,Wn,Ot,we,Pe,qe,{},wt&&!ut?zt:null,ut&&!!wt,U.getProjection(),Tt,ut):null;let Dn=!1,Nn=!1,er=!0;if(pn&&!Wt.occluded){const kn=.5*Mt*sn+kt,Zn=new j.pointGeometry(-100,-100),Ln=new j.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),or=new Ku,tr=pn.first,pr=pn.last;let yr=[];for(let _r=tr.path.length-1;_r>=1;_r--)yr.push(tr.path[_r]);for(let _r=1;_r<pr.path.length;_r++)yr.push(pr.path[_r]);const Tr=2.5*kn;if(Ke){const _r=yr.map(wt&&!Yt?(Ir,Zr)=>{const ci=zt(Zr<tr.path.length-1?tr.tilePath[tr.path.length-1-Zr]:pr.tilePath[Zr-tr.path.length+2]);return Ir[2]=ci[2],Pr(Ir,Ke)}:Ir=>Pr(Ir,Ke));yr=_r.some(Ir=>Ir.signedDistanceFromCamera<=0)?[]:_r.map(Ir=>Ir.point)}let Vr=[];if(yr.length>0){const _r=yr.map(oi=>new j.pointGeometry(oi[0],oi[1]));let Ir=1/0,Zr=-1/0,ci=1/0,Ai=-1/0;for(let oi=0;oi<_r.length;oi++)Ir=Math.min(Ir,_r[oi].x),ci=Math.min(ci,_r[oi].y),Zr=Math.max(Zr,_r[oi].x),Ai=Math.max(Ai,_r[oi].y);Vr=Ir>=Zn.x&&Zr<=Ln.x&&ci>=Zn.y&&Ai<=Ln.y?[_r]:Zr<Zn.x||Ir>Ln.x||Ai<Zn.y||ci>Ln.y?[]:j.clipLine([_r],Zn.x,Zn.y,Ln.x,Ln.y)}for(const _r of Vr){or.reset(_r,.25*kn);let Ir=0;Ir=or.length<=.5*kn?1:Math.ceil(or.paddedLength/Tr)+1;for(let Zr=0;Zr<Ir;Zr++){const ci=Zr/Math.max(Ir-1,1),Ai=or.lerp(ci),oi=Ai.x+ii,Wi=Ai.y+ii;Ct.push(oi,Wi,kn,0);const Eo=oi-kn,oa=Wi-kn,_i=oi+kn,vi=Wi+kn;if(er=er&&this.isOffscreen(Eo,oa,_i,vi),Nn=Nn||this.isInsideGrid(Eo,oa,_i,vi),!te&&this.grid.hitTestCircle(oi,Wi,kn,gt)&&(Dn=!0,!Qe))return{circles:[],offscreen:!1,collisionDetected:Dn,occluded:!1}}}}return{circles:!Qe&&Dn||!Nn?[]:Ct,offscreen:er,collisionDetected:Dn,occluded:Wt.occluded}}queryRenderedSymbols(U){if(U.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const te=[];let we=1/0,Pe=1/0,Re=-1/0,Be=-1/0;for(const Qe of U){const ut=new j.pointGeometry(Qe.x+ii,Qe.y+ii);we=Math.min(we,ut.x),Pe=Math.min(Pe,ut.y),Re=Math.max(Re,ut.x),Be=Math.max(Be,ut.y),te.push(ut)}const Ne=this.grid.query(we,Pe,Re,Be).concat(this.ignoredGrid.query(we,Pe,Re,Be)),qe={},Ke={};for(const Qe of Ne){const ut=Qe.key;if(qe[ut.bucketInstanceId]===void 0&&(qe[ut.bucketInstanceId]={}),qe[ut.bucketInstanceId][ut.featureIndex])continue;const gt=[new j.pointGeometry(Qe.x1,Qe.y1),new j.pointGeometry(Qe.x2,Qe.y1),new j.pointGeometry(Qe.x2,Qe.y2),new j.pointGeometry(Qe.x1,Qe.y2)];j.polygonIntersectsPolygon(te,gt)&&(qe[ut.bucketInstanceId][ut.featureIndex]=!0,Ke[ut.bucketInstanceId]===void 0&&(Ke[ut.bucketInstanceId]=[]),Ke[ut.bucketInstanceId].push(ut.featureIndex))}return Ke}insertCollisionBox(U,te,we,Pe,Re){(te?this.ignoredGrid:this.grid).insert({bucketInstanceId:we,featureIndex:Pe,collisionGroupID:Re},U[0],U[1],U[2],U[3])}insertCollisionCircles(U,te,we,Pe,Re){const Be=te?this.ignoredGrid:this.grid,Ne={bucketInstanceId:we,featureIndex:Pe,collisionGroupID:Re};for(let qe=0;qe<U.length;qe+=4)Be.insertCircle(Ne,U[qe],U[qe+1],U[qe+2])}projectAndGetPerspectiveRatio(U,te,we,Pe,Re){const Be=[te[0],te[1],te[2],1];let Ne=!1;if(te[2]||this.transform.pitch>0){j.transformMat4$1(Be,Be,U);const qe=Re.name==="globe";this.fogState&&we&&!qe&&(Ne=function(Ke,Qe,ut,gt,Mt,kt){const Tt=kt.calculateFogTileMatrix(Mt),Ct=[Qe,ut,gt];return j.transformMat4(Ct,Ct,Tt),xt(Ke,Ct,kt.pitch,kt._fov)}(this.fogState,te[0],te[1],te[2],we.toUnwrapped(),this.transform)>.9)}else Xi(Be,Be,U);return{point:new j.pointGeometry((Be[0]/Be[3]+1)/2*this.transform.width+ii,(-Be[1]/Be[3]+1)/2*this.transform.height+ii),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Re)/Be[3]*.5,1.5),signedDistanceFromCamera:Be[3],occluded:Pe&&Be[2]>Be[3]||Ne}}isOffscreen(U,te,we,Pe){return we<ii||U>=this.screenRightBoundary||Pe<ii||te>this.screenBottomBoundary}isInsideGrid(U,te,we,Pe){return we>=0&&U<this.gridRightBoundary&&Pe>=0&&te<this.gridBottomBoundary}getViewportMatrix(){const U=j.identity([]);return j.translate(U,U,[-100,-100,0]),U}}function Cs(_e,U,te){const we=U.createTileMatrix(_e,_e.worldSize,te.toUnwrapped());return j.multiply(new Float32Array(16),_e.projMatrix,we)}function ao(_e,U,te){if(U.projection.name===te.projection.name)return _e.projMatrix;const we=te.clone();return we.setProjection(U.projection),Cs(we,U.getProjection(),_e)}function so(_e,U,te){return U.name===te.projection.name?_e.projMatrix:Cs(te,U,_e)}class ac{constructor(U,te,we,Pe){this.opacity=U?Math.max(0,Math.min(1,U.opacity+(U.placed?te:-te))):Pe&&we?1:0,this.placed=we}isHidden(){return this.opacity===0&&!this.placed}}class fa{constructor(U,te,we,Pe,Re,Be=!1){this.text=new ac(U?U.text:null,te,we,Re),this.icon=new ac(U?U.icon:null,te,Pe,Re),this.clipped=Be}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Oi{constructor(U,te,we,Pe=!1){this.text=U,this.icon=te,this.skipFade=we,this.clipped=Pe}}class Ss{constructor(){this.invProjMatrix=j.create(),this.viewportMatrix=j.create(),this.circles=[]}}class Is{constructor(U,te,we,Pe,Re){this.bucketInstanceId=U,this.featureIndex=te,this.sourceLayerIndex=we,this.bucketIndex=Pe,this.tileID=Re}}class Ms{constructor(U){this.crossSourceCollisions=U,this.maxGroupID=0,this.collisionGroups={}}get(U){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[U]){const te=++this.maxGroupID;this.collisionGroups[U]={ID:te,predicate:we=>we.collisionGroupID===te}}return this.collisionGroups[U]}}function Ui(_e,U,te,we,Pe){const{horizontalAlign:Re,verticalAlign:Be}=j.getAnchorAlignment(_e),Ne=-(Re-.5)*U,qe=-(Be-.5)*te,Ke=j.evaluateVariableOffset(_e,we);return new j.pointGeometry(Ne+Ke[0]*Pe,qe+Ke[1]*Pe)}function Ps(_e,U,te,we,Pe){const Re=new j.pointGeometry(_e,U);return te&&Re._rotate(we?Pe:-Pe),Re}class Os{constructor(U,te,we,Pe,Re){this.transform=U.clone(),this.projection=U.projection.name,this.collisionIndex=new oc(this.transform,Re),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=te,this.retainedQueryData={},this.collisionGroups=new Ms(we),this.collisionCircleArrays={},this.prevPlacement=Pe,Pe&&(Pe.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(U,te,we,Pe){const Re=we.getBucket(te),Be=we.latestFeatureIndex;if(!Re||!Be||te.id!==Re.layerIds[0])return;const Ne=Re.layers[0].layout,qe=we.collisionBoxArray,Ke=Math.pow(2,this.transform.zoom-we.tileID.overscaledZ),Qe=we.tileSize/j.EXTENT,ut=we.tileID.toUnwrapped();this.transform.setProjection(Re.projection);const gt=(Mt=we.tileID,kt=Re.getProjection(),Tt=this.transform,kt.name===this.projection?Tt.calculateProjMatrix(Mt.toUnwrapped()):Cs(Tt,kt,Mt));var Mt,kt,Tt;const Ct=Ne.get("text-pitch-alignment")==="map",wt=Ne.get("text-rotation-alignment")==="map";te.compileFilter();const zt=te.dynamicFilter(),Ot=te.dynamicFilterNeedsFeature(),Qt=this.transform.calculatePixelsToTileUnitsMatrix(we),Kt=Nr(gt,we.tileID.canonical,Ct,wt,this.transform,Re.getProjection(),Qt);let Gt=null;if(Ct){const sn=Oo(gt,we.tileID.canonical,Ct,wt,this.transform,Re.getProjection(),Qt);Gt=j.multiply([],this.transform.labelPlaneMatrix,sn)}let Yt=null;zt&&we.latestFeatureIndex&&(Yt={unwrappedTileID:ut,dynamicFilter:zt,dynamicFilterNeedsFeature:Ot,featureIndex:we.latestFeatureIndex}),this.retainedQueryData[Re.bucketInstanceId]=new Is(Re.bucketInstanceId,Be,Re.sourceLayerIndex,Re.index,we.tileID);const Wt={bucket:Re,layout:Ne,posMatrix:gt,textLabelPlaneMatrix:Kt,labelToScreenMatrix:Gt,clippingData:Yt,scale:Ke,textPixelRatio:Qe,holdingForFade:we.holdingForFade(),collisionBoxArray:qe,partiallyEvaluatedTextSize:j.evaluateSizeForZoom(Re.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:j.evaluateSizeForZoom(Re.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Re.sourceID)};if(Pe)for(const sn of Re.sortKeyRanges){const{sortKey:mn,symbolInstanceStart:Wn,symbolInstanceEnd:pn}=sn;U.push({sortKey:mn,symbolInstanceStart:Wn,symbolInstanceEnd:pn,parameters:Wt})}else U.push({symbolInstanceStart:0,symbolInstanceEnd:Re.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt,Ct,wt,zt){const Ot=[gt.textOffset0,gt.textOffset1],Qt=Ui(U,we,Pe,Ot,Re),Kt=this.collisionIndex.placeCollisionBox(kt,Re,te,Ps(Qt.x,Qt.y,Be,Ne,this.transform.angle),ut,qe,Ke,Qe.predicate);if((!Ct||this.collisionIndex.placeCollisionBox(kt,kt.getSymbolInstanceIconSize(zt,this.transform.zoom,Mt),Ct,Ps(Qt.x,Qt.y,Be,Ne,this.transform.angle),ut,qe,Ke,Qe.predicate).box.length!==0)&&Kt.box.length>0){let Gt;return this.prevPlacement&&this.prevPlacement.variableOffsets[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID]&&this.prevPlacement.placements[gt.crossTileID].text&&(Gt=this.prevPlacement.variableOffsets[gt.crossTileID].anchor),this.variableOffsets[gt.crossTileID]={textOffset:Ot,width:we,height:Pe,anchor:U,textScale:Re,prevAnchor:Gt},this.markUsedJustification(kt,U,gt,Tt),kt.allowVerticalPlacement&&(this.markUsedOrientation(kt,Tt,gt),this.placedOrientations[gt.crossTileID]=Tt),{shift:Qt,placedGlyphBoxes:Kt}}}placeLayerBucketPart(U,te,we,Pe){const{bucket:Re,layout:Be,posMatrix:Ne,textLabelPlaneMatrix:qe,labelToScreenMatrix:Ke,clippingData:Qe,textPixelRatio:ut,holdingForFade:gt,collisionBoxArray:Mt,partiallyEvaluatedTextSize:kt,partiallyEvaluatedIconSize:Tt,collisionGroup:Ct}=U.parameters,wt=Be.get("text-optional"),zt=Be.get("icon-optional"),Ot=Be.get("text-allow-overlap"),Qt=Be.get("icon-allow-overlap"),Kt=Be.get("text-rotation-alignment")==="map",Gt=Be.get("text-pitch-alignment")==="map",Yt=Be.get("icon-text-fit")!=="none",Wt=Be.get("symbol-z-order")==="viewport-y";this.transform.setProjection(Re.projection);let sn=Ot&&(Qt||!Re.hasIconData()||zt),mn=Qt&&(Ot||!Re.hasTextData()||wt);!Re.collisionArrays&&Mt&&Re.deserializeCollisionBoxes(Mt),we&&Pe&&Re.updateCollisionDebugBuffers(this.transform.zoom,Mt);const Wn=(pn,Dn,Nn)=>{if(Qe){const _i={zoom:this.transform.zoom,pitch:this.transform.pitch};let vi=null;if(Qe.dynamicFilterNeedsFeature){const Dr=this.retainedQueryData[Re.bucketInstanceId];vi=Qe.featureIndex.loadFeature({featureIndex:pn.featureIndex,bucketIndex:Dr.bucketIndex,sourceLayerIndex:Dr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Qe.dynamicFilter)(_i,vi,this.retainedQueryData[Re.bucketInstanceId].tileID.canonical,new j.pointGeometry(pn.tileAnchorX,pn.tileAnchorY),this.transform.calculateDistanceTileData(Qe.unwrappedTileID)))return this.placements[pn.crossTileID]=new Oi(!1,!1,!1,!0),void(te[pn.crossTileID]=!0)}if(te[pn.crossTileID])return;if(gt)return void(this.placements[pn.crossTileID]=new Oi(!1,!1,!1));let er=!1,kn=!1,Zn=!0,Ln=!1,or=!1,tr=null,pr={box:null,offscreen:null,occluded:null},yr={box:null,offscreen:null,occluded:null},Tr=null,Vr=null,_r=null,Ir=0,Zr=0,ci=0;Nn.textFeatureIndex?Ir=Nn.textFeatureIndex:pn.useRuntimeCollisionCircles&&(Ir=pn.featureIndex),Nn.verticalTextFeatureIndex&&(Zr=Nn.verticalTextFeatureIndex);const Ai=_i=>{_i.tileID=this.retainedQueryData[Re.bucketInstanceId].tileID,(this.transform.elevation||_i.elevation)&&(_i.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[Re.bucketInstanceId].tileID,_i.tileAnchorX,_i.tileAnchorY):0)},oi=Nn.textBox;if(oi){Ai(oi);const _i=Dr=>{let Di=j.WritingMode.horizontal;if(Re.allowVerticalPlacement&&!Dr&&this.prevPlacement){const zi=this.prevPlacement.placedOrientations[pn.crossTileID];zi&&(this.placedOrientations[pn.crossTileID]=zi,Di=zi,this.markUsedOrientation(Re,Di,pn))}return Di},vi=(Dr,Di)=>{if(Re.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&Nn.verticalTextBox){for(const zi of Re.writingModes)if(zi===j.WritingMode.vertical?(pr=Di(),yr=pr):pr=Dr(),pr&&pr.box&&pr.box.length)break}else pr=Dr()};if(Be.get("text-variable-anchor")){let Dr=Be.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[pn.crossTileID]){const ui=this.prevPlacement.variableOffsets[pn.crossTileID];Dr.indexOf(ui.anchor)>0&&(Dr=Dr.filter(Ki=>Ki!==ui.anchor),Dr.unshift(ui.anchor))}const Di=(ui,Ki,za)=>{const to=Re.getSymbolInstanceTextSize(kt,pn,this.transform.zoom,Dn),go=(ui.x2-ui.x1)*to+2*ui.padding,$a=(ui.y2-ui.y1)*to+2*ui.padding,La=Yt&&!Qt?Ki:null;La&&Ai(La);let no={box:[],offscreen:!1,occluded:!1};const Ba=Ot?2*Dr.length:Dr.length;for(let qo=0;qo<Ba;++qo){const ol=this.attemptAnchorPlacement(Dr[qo%Dr.length],ui,go,$a,to,Kt,Gt,ut,Ne,Ct,qo>=Dr.length,pn,Dn,Re,za,La,kt,Tt);if(ol&&(no=ol.placedGlyphBoxes,no&&no.box&&no.box.length)){er=!0,tr=ol.shift;break}}return no};vi(()=>Di(oi,Nn.iconBox,j.WritingMode.horizontal),()=>{const ui=Nn.verticalTextBox;return ui&&Ai(ui),Re.allowVerticalPlacement&&!(pr&&pr.box&&pr.box.length)&&pn.numVerticalGlyphVertices>0&&ui?Di(ui,Nn.verticalIconBox,j.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),pr&&(er=pr.box,Zn=pr.offscreen,Ln=pr.occluded);const zi=_i(pr&&pr.box);if(!er&&this.prevPlacement){const ui=this.prevPlacement.variableOffsets[pn.crossTileID];ui&&(this.variableOffsets[pn.crossTileID]=ui,this.markUsedJustification(Re,ui.anchor,pn,zi))}}else{const Dr=(Di,zi)=>{const ui=Re.getSymbolInstanceTextSize(kt,pn,this.transform.zoom,Dn),Ki=this.collisionIndex.placeCollisionBox(Re,ui,Di,new j.pointGeometry(0,0),Ot,ut,Ne,Ct.predicate);return Ki&&Ki.box&&Ki.box.length&&(this.markUsedOrientation(Re,zi,pn),this.placedOrientations[pn.crossTileID]=zi),Ki};vi(()=>Dr(oi,j.WritingMode.horizontal),()=>{const Di=Nn.verticalTextBox;return Re.allowVerticalPlacement&&pn.numVerticalGlyphVertices>0&&Di?(Ai(Di),Dr(Di,j.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),_i(pr&&pr.box&&pr.box.length)}}if(Tr=pr,er=Tr&&Tr.box&&Tr.box.length>0,Zn=Tr&&Tr.offscreen,Ln=Tr&&Tr.occluded,pn.useRuntimeCollisionCircles){const _i=Re.text.placedSymbolArray.get(pn.centerJustifiedTextSymbolIndex>=0?pn.centerJustifiedTextSymbolIndex:pn.verticalPlacedTextSymbolIndex),vi=j.evaluateSizeForFeature(Re.textSizeData,kt,_i),Dr=Be.get("text-padding");Vr=this.collisionIndex.placeCollisionCircles(Re,Ot,_i,Re.lineVertexArray,Re.glyphOffsetArray,vi,Ne,qe,Ke,we,Gt,Ct.predicate,pn.collisionCircleDiameter*vi/j.ONE_EM,Dr,this.retainedQueryData[Re.bucketInstanceId].tileID),er=Ot||Vr.circles.length>0&&!Vr.collisionDetected,Zn=Zn&&Vr.offscreen,Ln=Vr.occluded}if(Nn.iconFeatureIndex&&(ci=Nn.iconFeatureIndex),Nn.iconBox){const _i=vi=>{Ai(vi);const Dr=Yt&&tr?Ps(tr.x,tr.y,Kt,Gt,this.transform.angle):new j.pointGeometry(0,0),Di=Re.getSymbolInstanceIconSize(Tt,this.transform.zoom,Dn);return this.collisionIndex.placeCollisionBox(Re,Di,vi,Dr,Qt,ut,Ne,Ct.predicate)};yr&&yr.box&&yr.box.length&&Nn.verticalIconBox?(_r=_i(Nn.verticalIconBox),kn=_r.box.length>0):(_r=_i(Nn.iconBox),kn=_r.box.length>0),Zn=Zn&&_r.offscreen,or=_r.occluded}const Wi=wt||pn.numHorizontalGlyphVertices===0&&pn.numVerticalGlyphVertices===0,Eo=zt||pn.numIconVertices===0;if(Wi||Eo?Eo?Wi||(kn=kn&&er):er=kn&&er:kn=er=kn&&er,er&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,Be.get("text-ignore-placement"),Re.bucketInstanceId,yr&&yr.box&&Zr?Zr:Ir,Ct.ID),kn&&_r&&this.collisionIndex.insertCollisionBox(_r.box,Be.get("icon-ignore-placement"),Re.bucketInstanceId,ci,Ct.ID),Vr&&(er&&this.collisionIndex.insertCollisionCircles(Vr.circles,Be.get("text-ignore-placement"),Re.bucketInstanceId,Ir,Ct.ID),we)){const _i=Re.bucketInstanceId;let vi=this.collisionCircleArrays[_i];vi===void 0&&(vi=this.collisionCircleArrays[_i]=new Ss);for(let Dr=0;Dr<Vr.circles.length;Dr+=4)vi.circles.push(Vr.circles[Dr+0]),vi.circles.push(Vr.circles[Dr+1]),vi.circles.push(Vr.circles[Dr+2]),vi.circles.push(Vr.collisionDetected?1:0)}const oa=Re.projection.name!=="globe";sn=sn&&(oa||!Ln),mn=mn&&(oa||!or),this.placements[pn.crossTileID]=new Oi(er||sn,kn||mn,Zn||Re.justReloaded),te[pn.crossTileID]=!0};if(Wt){const pn=Re.getSortedSymbolIndexes(this.transform.angle);for(let Dn=pn.length-1;Dn>=0;--Dn){const Nn=pn[Dn];Wn(Re.symbolInstances.get(Nn),Nn,Re.collisionArrays[Nn])}}else for(let pn=U.symbolInstanceStart;pn<U.symbolInstanceEnd;pn++)Wn(Re.symbolInstances.get(pn),pn,Re.collisionArrays[pn]);if(we&&Re.bucketInstanceId in this.collisionCircleArrays){const pn=this.collisionCircleArrays[Re.bucketInstanceId];j.invert(pn.invProjMatrix,Ne),pn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Re.justReloaded=!1}markUsedJustification(U,te,we,Pe){let Re;Re=Pe===j.WritingMode.vertical?we.verticalPlacedTextSymbolIndex:{left:we.leftJustifiedTextSymbolIndex,center:we.centerJustifiedTextSymbolIndex,right:we.rightJustifiedTextSymbolIndex}[j.getAnchorJustification(te)];const Be=[we.leftJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.rightJustifiedTextSymbolIndex,we.verticalPlacedTextSymbolIndex];for(const Ne of Be)Ne>=0&&(U.text.placedSymbolArray.get(Ne).crossTileID=Re>=0&&Ne!==Re?0:we.crossTileID)}markUsedOrientation(U,te,we){const Pe=te===j.WritingMode.horizontal||te===j.WritingMode.horizontalOnly?te:0,Re=te===j.WritingMode.vertical?te:0,Be=[we.leftJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.rightJustifiedTextSymbolIndex];for(const Ne of Be)U.text.placedSymbolArray.get(Ne).placedOrientation=Pe;we.verticalPlacedTextSymbolIndex&&(U.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).placedOrientation=Re)}commit(U){this.commitTime=U,this.zoomAtLastRecencyCheck=this.transform.zoom;const te=this.prevPlacement;let we=!1;this.prevZoomAdjustment=te?te.zoomAdjustment(this.transform.zoom):0;const Pe=te?te.symbolFadeChange(U):1,Re=te?te.opacities:{},Be=te?te.variableOffsets:{},Ne=te?te.placedOrientations:{};for(const qe in this.placements){const Ke=this.placements[qe],Qe=Re[qe];Qe?(this.opacities[qe]=new fa(Qe,Pe,Ke.text,Ke.icon,null,Ke.clipped),we=we||Ke.text!==Qe.text.placed||Ke.icon!==Qe.icon.placed):(this.opacities[qe]=new fa(null,Pe,Ke.text,Ke.icon,Ke.skipFade,Ke.clipped),we=we||Ke.text||Ke.icon)}for(const qe in Re){const Ke=Re[qe];if(!this.opacities[qe]){const Qe=new fa(Ke,Pe,!1,!1);Qe.isHidden()||(this.opacities[qe]=Qe,we=we||Ke.text.placed||Ke.icon.placed)}}for(const qe in Be)this.variableOffsets[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.variableOffsets[qe]=Be[qe]);for(const qe in Ne)this.placedOrientations[qe]||!this.opacities[qe]||this.opacities[qe].isHidden()||(this.placedOrientations[qe]=Ne[qe]);we?this.lastPlacementChangeTime=U:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=te?te.lastPlacementChangeTime:U)}updateLayerOpacities(U,te){const we={};for(const Pe of te){const Re=Pe.getBucket(U);Re&&Pe.latestFeatureIndex&&U.id===Re.layerIds[0]&&this.updateBucketOpacities(Re,we,Pe.collisionBoxArray)}}updateBucketOpacities(U,te,we){U.hasTextData()&&U.text.opacityVertexArray.clear(),U.hasIconData()&&U.icon.opacityVertexArray.clear(),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexArray.clear(),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexArray.clear();const Pe=U.layers[0].layout,Re=!!U.layers[0].dynamicFilter(),Be=new fa(null,0,!1,!1,!0),Ne=Pe.get("text-allow-overlap"),qe=Pe.get("icon-allow-overlap"),Ke=Pe.get("text-variable-anchor"),Qe=Pe.get("text-rotation-alignment")==="map",ut=Pe.get("text-pitch-alignment")==="map",gt=Pe.get("icon-text-fit")!=="none",Mt=new fa(null,0,Ne&&(qe||!U.hasIconData()||Pe.get("icon-optional")),qe&&(Ne||!U.hasTextData()||Pe.get("text-optional")),!0);!U.collisionArrays&&we&&(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())&&U.deserializeCollisionBoxes(we);const kt=(Ct,wt,zt)=>{for(let Ot=0;Ot<wt/4;Ot++)Ct.opacityVertexArray.emplaceBack(zt)};let Tt=0;for(let Ct=0;Ct<U.symbolInstances.length;Ct++){const wt=U.symbolInstances.get(Ct),{numHorizontalGlyphVertices:zt,numVerticalGlyphVertices:Ot,crossTileID:Qt}=wt;let Kt=this.opacities[Qt];te[Qt]?Kt=Be:Kt||(Kt=Mt,this.opacities[Qt]=Kt),te[Qt]=!0;const Gt=zt>0||Ot>0,Yt=wt.numIconVertices>0,Wt=this.placedOrientations[wt.crossTileID],sn=Wt===j.WritingMode.vertical,mn=Wt===j.WritingMode.horizontal||Wt===j.WritingMode.horizontalOnly;if(!Gt&&!Yt||Kt.isHidden()||Tt++,Gt){const Wn=Ca(Kt.text);kt(U.text,zt,sn?lo:Wn),kt(U.text,Ot,mn?lo:Wn);const pn=Kt.text.isHidden();[wt.rightJustifiedTextSymbolIndex,wt.centerJustifiedTextSymbolIndex,wt.leftJustifiedTextSymbolIndex].forEach(er=>{er>=0&&(U.text.placedSymbolArray.get(er).hidden=pn||sn?1:0)}),wt.verticalPlacedTextSymbolIndex>=0&&(U.text.placedSymbolArray.get(wt.verticalPlacedTextSymbolIndex).hidden=pn||mn?1:0);const Dn=this.variableOffsets[wt.crossTileID];Dn&&this.markUsedJustification(U,Dn.anchor,wt,Wt);const Nn=this.placedOrientations[wt.crossTileID];Nn&&(this.markUsedJustification(U,"left",wt,Nn),this.markUsedOrientation(U,Nn,wt))}if(Yt){const Wn=Ca(Kt.icon);wt.placedIconSymbolIndex>=0&&(kt(U.icon,wt.numIconVertices,sn?lo:Wn),U.icon.placedSymbolArray.get(wt.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),wt.verticalPlacedIconSymbolIndex>=0&&(kt(U.icon,wt.numVerticalIconVertices,mn?lo:Wn),U.icon.placedSymbolArray.get(wt.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}if(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData()){const Wn=U.collisionArrays[Ct];if(Wn){let pn=new j.pointGeometry(0,0),Dn=!0;if(Wn.textBox||Wn.verticalTextBox){if(Ke){const er=this.variableOffsets[Qt];er?(pn=Ui(er.anchor,er.width,er.height,er.textOffset,er.textScale),Qe&&pn._rotate(ut?this.transform.angle:-this.transform.angle)):Dn=!1}Re&&(Dn=!Kt.clipped),Wn.textBox&&vo(U.textCollisionBox.collisionVertexArray,Kt.text.placed,!Dn||sn,pn.x,pn.y),Wn.verticalTextBox&&vo(U.textCollisionBox.collisionVertexArray,Kt.text.placed,!Dn||mn,pn.x,pn.y)}const Nn=Dn&&Boolean(!mn&&Wn.verticalIconBox);Wn.iconBox&&vo(U.iconCollisionBox.collisionVertexArray,Kt.icon.placed,Nn,gt?pn.x:0,gt?pn.y:0),Wn.verticalIconBox&&vo(U.iconCollisionBox.collisionVertexArray,Kt.icon.placed,!Nn,gt?pn.x:0,gt?pn.y:0)}}}if(U.fullyClipped=Tt===0,U.sortFeatures(this.transform.angle),this.retainedQueryData[U.bucketInstanceId]&&(this.retainedQueryData[U.bucketInstanceId].featureSortOrder=U.featureSortOrder),U.hasTextData()&&U.text.opacityVertexBuffer&&U.text.opacityVertexBuffer.updateData(U.text.opacityVertexArray),U.hasIconData()&&U.icon.opacityVertexBuffer&&U.icon.opacityVertexBuffer.updateData(U.icon.opacityVertexArray),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexBuffer&&U.iconCollisionBox.collisionVertexBuffer.updateData(U.iconCollisionBox.collisionVertexArray),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexBuffer&&U.textCollisionBox.collisionVertexBuffer.updateData(U.textCollisionBox.collisionVertexArray),U.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[U.bucketInstanceId];U.placementInvProjMatrix=Ct.invProjMatrix,U.placementViewportMatrix=Ct.viewportMatrix,U.collisionCircleArray=Ct.circles,delete this.collisionCircleArrays[U.bucketInstanceId]}}symbolFadeChange(U){return this.fadeDuration===0?1:(U-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(U){return Math.max(0,(this.transform.zoom-U)/1.5)}hasTransitions(U){return this.stale||U-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(U,te){const we=this.zoomAtLastRecencyCheck===te?1-this.zoomAdjustment(te):1;return this.zoomAtLastRecencyCheck=te,this.commitTime+this.fadeDuration*we>U}setStale(){this.stale=!0}}function vo(_e,U,te,we,Pe){_e.emplaceBack(U?1:0,te?1:0,we||0,Pe||0),_e.emplaceBack(U?1:0,te?1:0,we||0,Pe||0),_e.emplaceBack(U?1:0,te?1:0,we||0,Pe||0),_e.emplaceBack(U?1:0,te?1:0,we||0,Pe||0)}const Rs=Math.pow(2,25),fl=Math.pow(2,24),Qu=Math.pow(2,17),sc=Math.pow(2,16),ka=Math.pow(2,9),Ju=Math.pow(2,8),Jc=Math.pow(2,1);function Ca(_e){if(_e.opacity===0&&!_e.placed)return 0;if(_e.opacity===1&&_e.placed)return 4294967295;const U=_e.placed?1:0,te=Math.floor(127*_e.opacity);return te*Rs+U*fl+te*Qu+U*sc+te*ka+U*Ju+te*Jc+U}const lo=0;class _l{constructor(U){this._sortAcrossTiles=U.layout.get("symbol-z-order")!=="viewport-y"&&U.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(U,te,we,Pe,Re){const Be=this._bucketParts;for(;this._currentTileIndex<U.length;)if(te.getBucketParts(Be,Pe,U[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Re())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Be.sort((Ne,qe)=>Ne.sortKey-qe.sortKey));this._currentPartIndex<Be.length;){const Ne=Be[this._currentPartIndex];if(te.placeLayerBucketPart(Ne,this._seenCrossTileIDs,we,Ne.symbolInstanceStart===0),this._currentPartIndex++,Re())return!0}return!1}}class Do{constructor(U,te,we,Pe,Re,Be,Ne,qe){this.placement=new Os(U,Re,Be,Ne,qe),this._currentPlacementIndex=te.length-1,this._forceFullPlacement=we,this._showCollisionBoxes=Pe,this._done=!1}isDone(){return this._done}continuePlacement(U,te,we){const Pe=j.exported.now(),Re=()=>{const Be=j.exported.now()-Pe;return!this._forceFullPlacement&&Be>2};for(;this._currentPlacementIndex>=0;){const Be=te[U[this._currentPlacementIndex]],Ne=this.placement.collisionIndex.transform.zoom;if(Be.type==="symbol"&&(!Be.minzoom||Be.minzoom<=Ne)&&(!Be.maxzoom||Be.maxzoom>Ne)){if(this._inProgressLayer||(this._inProgressLayer=new _l(Be)),this._inProgressLayer.continuePlacement(we[Be.source],this.placement,this._showCollisionBoxes,Be,Re))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(U){return this.placement.commit(U),this.placement}}const lc=512/j.EXTENT/2;class ml{constructor(U,te,we){this.tileID=U,this.indexedSymbolInstances={},this.bucketInstanceId=we;for(let Pe=0;Pe<te.length;Pe++){const Re=te.get(Pe),Be=Re.key;this.indexedSymbolInstances[Be]||(this.indexedSymbolInstances[Be]=[]),this.indexedSymbolInstances[Be].push({crossTileID:Re.crossTileID,coord:this.getScaledCoordinates(Re,U)})}}getScaledCoordinates(U,te){const we=lc/Math.pow(2,te.canonical.z-this.tileID.canonical.z);return{x:Math.floor((te.canonical.x*j.EXTENT+U.tileAnchorX)*we),y:Math.floor((te.canonical.y*j.EXTENT+U.tileAnchorY)*we)}}findMatches(U,te,we){const Pe=this.tileID.canonical.z<te.canonical.z?1:Math.pow(2,this.tileID.canonical.z-te.canonical.z);for(let Re=0;Re<U.length;Re++){const Be=U.get(Re);if(Be.crossTileID)continue;const Ne=this.indexedSymbolInstances[Be.key];if(!Ne)continue;const qe=this.getScaledCoordinates(Be,te);for(const Ke of Ne)if(Math.abs(Ke.coord.x-qe.x)<=Pe&&Math.abs(Ke.coord.y-qe.y)<=Pe&&!we[Ke.crossTileID]){we[Ke.crossTileID]=!0,Be.crossTileID=Ke.crossTileID;break}}}}class eh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ds{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(U){const te=Math.round((U-this.lng)/360);if(te!==0)for(const we in this.indexes){const Pe=this.indexes[we],Re={};for(const Be in Pe){const Ne=Pe[Be];Ne.tileID=Ne.tileID.unwrapTo(Ne.tileID.wrap+te),Re[Ne.tileID.key]=Ne}this.indexes[we]=Re}this.lng=U}addBucket(U,te,we){if(this.indexes[U.overscaledZ]&&this.indexes[U.overscaledZ][U.key]){if(this.indexes[U.overscaledZ][U.key].bucketInstanceId===te.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(U.overscaledZ,this.indexes[U.overscaledZ][U.key])}for(let Re=0;Re<te.symbolInstances.length;Re++)te.symbolInstances.get(Re).crossTileID=0;this.usedCrossTileIDs[U.overscaledZ]||(this.usedCrossTileIDs[U.overscaledZ]={});const Pe=this.usedCrossTileIDs[U.overscaledZ];for(const Re in this.indexes){const Be=this.indexes[Re];if(Number(Re)>U.overscaledZ)for(const Ne in Be){const qe=Be[Ne];qe.tileID.isChildOf(U)&&qe.findMatches(te.symbolInstances,U,Pe)}else{const Ne=Be[U.scaledTo(Number(Re)).key];Ne&&Ne.findMatches(te.symbolInstances,U,Pe)}}for(let Re=0;Re<te.symbolInstances.length;Re++){const Be=te.symbolInstances.get(Re);Be.crossTileID||(Be.crossTileID=we.generate(),Pe[Be.crossTileID]=!0)}return this.indexes[U.overscaledZ]===void 0&&(this.indexes[U.overscaledZ]={}),this.indexes[U.overscaledZ][U.key]=new ml(U,te.symbolInstances,te.bucketInstanceId),!0}removeBucketCrossTileIDs(U,te){for(const we in te.indexedSymbolInstances)for(const Pe of te.indexedSymbolInstances[we])delete this.usedCrossTileIDs[U][Pe.crossTileID]}removeStaleBuckets(U){let te=!1;for(const we in this.indexes){const Pe=this.indexes[we];for(const Re in Pe)U[Pe[Re].bucketInstanceId]||(this.removeBucketCrossTileIDs(we,Pe[Re]),delete Pe[Re],te=!0)}return te}}class gl{constructor(){this.layerIndexes={},this.crossTileIDs=new eh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(U,te,we,Pe){let Re=this.layerIndexes[U.id];Re===void 0&&(Re=this.layerIndexes[U.id]=new Ds);let Be=!1;const Ne={};Pe.name!=="globe"&&Re.handleWrapJump(we);for(const qe of te){const Ke=qe.getBucket(U);Ke&&U.id===Ke.layerIds[0]&&(Ke.bucketInstanceId||(Ke.bucketInstanceId=++this.maxBucketInstanceId),Re.addBucket(qe.tileID,Ke,this.crossTileIDs)&&(Be=!0),Ne[Ke.bucketInstanceId]=!0)}return Re.removeStaleBuckets(Ne)&&(Be=!0),Be}pruneUnusedLayers(U){const te={};U.forEach(we=>{te[we]=!0});for(const we in this.layerIndexes)te[we]||delete this.layerIndexes[we]}}const zs=(_e,U)=>j.emitValidationErrors(_e,U&&U.filter(te=>te.identifier!=="source.canvas")),eu=j.pick(xr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),th=j.pick(xr,["setCenter","setZoom","setBearing","setPitch"]),tu={version:8,layers:[],sources:{}},nh={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class xo extends j.Evented{constructor(U,te={}){super(),this.map=U,this.dispatcher=new ln(ei(),this),this.imageManager=new bt,this.imageManager.setEventedParent(this),this.glyphManager=new j.GlyphManager(U._requestManager,te.localFontFamily?j.LocalGlyphMode.all:te.localIdeographFontFamily?j.LocalGlyphMode.ideographs:j.LocalGlyphMode.none,te.localFontFamily||te.localIdeographFontFamily),this.lineAtlas=new j.LineAtlas(256,512),this.crossTileSymbolIndex=new gl,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new j.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",j.getReferrer());const we=this;this._rtlTextPluginCallback=xo.registerForPluginStateChange(Pe=>{we.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL},(Re,Be)=>{if(j.triggerPluginCompletionEvent(Re),Be&&Be.every(Ne=>Ne))for(const Ne in we._sourceCaches){const qe=we._sourceCaches[Ne],Ke=qe.getSource().type;Ke!=="vector"&&Ke!=="geojson"||qe.reload()}})}),this.on("data",Pe=>{if(Pe.dataType!=="source"||Pe.sourceDataType!=="metadata")return;const Re=this.getSource(Pe.sourceId);if(Re&&Re.vectorLayerIds)for(const Be in this._layers){const Ne=this._layers[Be];Ne.source===Re.id&&this._validateLayer(Ne)}})}loadURL(U,te={}){this.fire(new j.Event("dataloading",{dataType:"style"}));const we=typeof te.validate=="boolean"?te.validate:!j.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,te.accessToken);const Pe=this.map._requestManager.transformRequest(U,j.ResourceType.Style);this._request=j.getJSON(Pe,(Re,Be)=>{this._request=null,Re?this.fire(new j.ErrorEvent(Re)):Be&&this._load(Be,we)})}loadJSON(U,te={}){this.fire(new j.Event("dataloading",{dataType:"style"})),this._request=j.exported.frame(()=>{this._request=null,this._load(U,te.validate!==!1)})}loadEmpty(){this.fire(new j.Event("dataloading",{dataType:"style"})),this._load(tu,!1)}_updateLayerCount(U,te){const we=te?1:-1;U.is3D()&&(this._num3DLayers+=we),U.type==="circle"&&(this._numCircleLayers+=we),U.type==="symbol"&&(this._numSymbolLayers+=we)}_load(U,te){if(te&&zs(this,j.validateStyle(U)))return;this._loaded=!0,this.stylesheet=j.clone$1(U),this._updateMapProjection();for(const Pe in U.sources)this.addSource(Pe,U.sources[Pe],{validate:!1});this._changed=!1,U.sprite?this._loadSprite(U.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(U.glyphs);const we=ni(this.stylesheet.layers);this._order=we.map(Pe=>Pe.id),this._layers={},this._serializedLayers={};for(let Pe of we)Pe=j.createStyleLayer(Pe),Pe.setEventedParent(this,{layer:{id:Pe.id}}),this._layers[Pe.id]=Pe,this._serializedLayers[Pe.id]=Pe.serialize(),this._updateLayerCount(Pe,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new it(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new j.Event("data",{dataType:"style"})),this.fire(new j.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(U){U?this.stylesheet.projection=U:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(U){this._spriteRequest=function(te,we,Pe){let Re,Be,Ne;const qe=j.exported.devicePixelRatio>1?"@2x":"";let Ke=j.getJSON(we.transformRequest(we.normalizeSpriteURL(te,qe,".json"),j.ResourceType.SpriteJSON),(gt,Mt)=>{Ke=null,Ne||(Ne=gt,Re=Mt,ut())}),Qe=j.getImage(we.transformRequest(we.normalizeSpriteURL(te,qe,".png"),j.ResourceType.SpriteImage),(gt,Mt)=>{Qe=null,Ne||(Ne=gt,Be=Mt,ut())});function ut(){if(Ne)Pe(Ne);else if(Re&&Be){const gt=j.exported.getImageData(Be),Mt={};for(const kt in Re){const{width:Tt,height:Ct,x:wt,y:zt,sdf:Ot,pixelRatio:Qt,stretchX:Kt,stretchY:Gt,content:Yt}=Re[kt],Wt=new j.RGBAImage({width:Tt,height:Ct});j.RGBAImage.copy(gt,Wt,{x:wt,y:zt},{x:0,y:0},{width:Tt,height:Ct}),Mt[kt]={data:Wt,pixelRatio:Qt,sdf:Ot,stretchX:Kt,stretchY:Gt,content:Yt}}Pe(null,Mt)}}return{cancel(){Ke&&(Ke.cancel(),Ke=null),Qe&&(Qe.cancel(),Qe=null)}}}(U,this.map._requestManager,(te,we)=>{if(this._spriteRequest=null,te)this.fire(new j.ErrorEvent(te));else if(we)for(const Pe in we)this.imageManager.addImage(Pe,we[Pe]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new j.Event("data",{dataType:"style"}))})}_validateLayer(U){const te=this.getSource(U.source);if(!te)return;const we=U.sourceLayer;we&&(te.type==="geojson"||te.vectorLayerIds&&te.vectorLayerIds.indexOf(we)===-1)&&this.fire(new j.ErrorEvent(new Error(`Source layer "${we}" does not exist on source "${te.id}" as specified by style layer "${U.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const U in this._sourceCaches)if(!this._sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(U){const te=[];for(const we of U){const Pe=this._layers[we];Pe.type!=="custom"&&te.push(Pe.serialize())}return te}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const U in this._sourceCaches)if(this._sourceCaches[U].hasTransition())return!0;for(const U in this._layers)if(this._layers[U].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(U){return!!this.terrain&&nh[U.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(U){if(!this._loaded)return;const te=this._changed;if(this._changed){const Pe=Object.keys(this._updatedLayers),Re=Object.keys(this._removedLayers);(Pe.length||Re.length)&&this._updateWorkerLayers(Pe,Re);for(const Be in this._updatedSources){const Ne=this._updatedSources[Be];Ne==="reload"?this._reloadSource(Be):Ne==="clear"&&this._clearSource(Be)}this._updateTilesForChangedImages();for(const Be in this._updatedPaintProps)this._layers[Be].updateTransitions(U);this.light.updateTransitions(U),this.fog&&this.fog.updateTransitions(U),this._resetUpdates()}const we={};for(const Pe in this._sourceCaches){const Re=this._sourceCaches[Pe];we[Pe]=Re.used,Re.used=!1}for(const Pe of this._order){const Re=this._layers[Pe];if(Re.recalculate(U,this._availableImages),!Re.isHidden(U.zoom)){const Ne=this._getLayerSourceCache(Re);Ne&&(Ne.used=!0)}const Be=this.map.painter;if(Be){const Ne=Re.getProgramIds();if(!Ne)continue;const qe=Re.getProgramConfiguration(U.zoom);for(const Ke of Ne)Be.useProgram(Ke,qe)}}for(const Pe in we){const Re=this._sourceCaches[Pe];we[Pe]!==Re.used&&Re.getSource().fire(new j.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Re.getSource().id}))}this.light.recalculate(U),this.terrain&&this.terrain.recalculate(U),this.fog&&this.fog.recalculate(U),this.z=U.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),te&&this.fire(new j.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const U=Object.keys(this._changedImages);if(U.length){for(const te in this._sourceCaches)this._sourceCaches[te].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}}_updateWorkerLayers(U,te){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:te})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(U){if(this._checkLoaded(),zs(this,j.validateStyle(U)))return!1;(U=j.clone$1(U)).layers=ni(U.layers);const te=function(Pe,Re){if(!Pe)return[{command:xr.setStyle,args:[Re]}];let Be=[];try{if(!be(Pe.version,Re.version))return[{command:xr.setStyle,args:[Re]}];be(Pe.center,Re.center)||Be.push({command:xr.setCenter,args:[Re.center]}),be(Pe.zoom,Re.zoom)||Be.push({command:xr.setZoom,args:[Re.zoom]}),be(Pe.bearing,Re.bearing)||Be.push({command:xr.setBearing,args:[Re.bearing]}),be(Pe.pitch,Re.pitch)||Be.push({command:xr.setPitch,args:[Re.pitch]}),be(Pe.sprite,Re.sprite)||Be.push({command:xr.setSprite,args:[Re.sprite]}),be(Pe.glyphs,Re.glyphs)||Be.push({command:xr.setGlyphs,args:[Re.glyphs]}),be(Pe.transition,Re.transition)||Be.push({command:xr.setTransition,args:[Re.transition]}),be(Pe.light,Re.light)||Be.push({command:xr.setLight,args:[Re.light]}),be(Pe.fog,Re.fog)||Be.push({command:xr.setFog,args:[Re.fog]}),be(Pe.projection,Re.projection)||Be.push({command:xr.setProjection,args:[Re.projection]});const Ne={},qe=[];(function(ut,gt,Mt,kt){let Tt;for(Tt in gt=gt||{},ut=ut||{})ut.hasOwnProperty(Tt)&&(gt.hasOwnProperty(Tt)||fo(Tt,Mt,kt));for(Tt in gt)gt.hasOwnProperty(Tt)&&(ut.hasOwnProperty(Tt)?be(ut[Tt],gt[Tt])||(ut[Tt].type==="geojson"&&gt[Tt].type==="geojson"&&ca(ut,gt,Tt)?Mt.push({command:xr.setGeoJSONSourceData,args:[Tt,gt[Tt].data]}):ki(Tt,gt,Mt,kt)):gn(Tt,gt,Mt))})(Pe.sources,Re.sources,qe,Ne);const Ke=[];Pe.layers&&Pe.layers.forEach(ut=>{ut.source&&Ne[ut.source]?Be.push({command:xr.removeLayer,args:[ut.id]}):Ke.push(ut)});let Qe=Pe.terrain;Qe&&Ne[Qe.source]&&(Be.push({command:xr.setTerrain,args:[void 0]}),Qe=void 0),Be=Be.concat(qe),be(Qe,Re.terrain)||Be.push({command:xr.setTerrain,args:[Re.terrain]}),function(ut,gt,Mt){gt=gt||[];const kt=(ut=ut||[]).map(Po),Tt=gt.map(Po),Ct=ut.reduce(dl,{}),wt=gt.reduce(dl,{}),zt=kt.slice(),Ot=Object.create(null);let Qt,Kt,Gt,Yt,Wt,sn,mn;for(Qt=0,Kt=0;Qt<kt.length;Qt++)Gt=kt[Qt],wt.hasOwnProperty(Gt)?Kt++:(Mt.push({command:xr.removeLayer,args:[Gt]}),zt.splice(zt.indexOf(Gt,Kt),1));for(Qt=0,Kt=0;Qt<Tt.length;Qt++)Gt=Tt[Tt.length-1-Qt],zt[zt.length-1-Qt]!==Gt&&(Ct.hasOwnProperty(Gt)?(Mt.push({command:xr.removeLayer,args:[Gt]}),zt.splice(zt.lastIndexOf(Gt,zt.length-Kt),1)):Kt++,sn=zt[zt.length-Qt],Mt.push({command:xr.addLayer,args:[wt[Gt],sn]}),zt.splice(zt.length-Qt,0,Gt),Ot[Gt]=!0);for(Qt=0;Qt<Tt.length;Qt++)if(Gt=Tt[Qt],Yt=Ct[Gt],Wt=wt[Gt],!Ot[Gt]&&!be(Yt,Wt))if(be(Yt.source,Wt.source)&&be(Yt["source-layer"],Wt["source-layer"])&&be(Yt.type,Wt.type)){for(mn in Ta(Yt.layout,Wt.layout,Mt,Gt,null,xr.setLayoutProperty),Ta(Yt.paint,Wt.paint,Mt,Gt,null,xr.setPaintProperty),be(Yt.filter,Wt.filter)||Mt.push({command:xr.setFilter,args:[Gt,Wt.filter]}),be(Yt.minzoom,Wt.minzoom)&&be(Yt.maxzoom,Wt.maxzoom)||Mt.push({command:xr.setLayerZoomRange,args:[Gt,Wt.minzoom,Wt.maxzoom]}),Yt)Yt.hasOwnProperty(mn)&&mn!=="layout"&&mn!=="paint"&&mn!=="filter"&&mn!=="metadata"&&mn!=="minzoom"&&mn!=="maxzoom"&&(mn.indexOf("paint.")===0?Ta(Yt[mn],Wt[mn],Mt,Gt,mn.slice(6),xr.setPaintProperty):be(Yt[mn],Wt[mn])||Mt.push({command:xr.setLayerProperty,args:[Gt,mn,Wt[mn]]}));for(mn in Wt)Wt.hasOwnProperty(mn)&&!Yt.hasOwnProperty(mn)&&mn!=="layout"&&mn!=="paint"&&mn!=="filter"&&mn!=="metadata"&&mn!=="minzoom"&&mn!=="maxzoom"&&(mn.indexOf("paint.")===0?Ta(Yt[mn],Wt[mn],Mt,Gt,mn.slice(6),xr.setPaintProperty):be(Yt[mn],Wt[mn])||Mt.push({command:xr.setLayerProperty,args:[Gt,mn,Wt[mn]]}))}else Mt.push({command:xr.removeLayer,args:[Gt]}),sn=zt[zt.lastIndexOf(Gt)+1],Mt.push({command:xr.addLayer,args:[Wt,sn]})}(Ke,Re.layers,Be)}catch(Ne){console.warn("Unable to compute style diff:",Ne),Be=[{command:xr.setStyle,args:[Re]}]}return Be}(this.serialize(),U).filter(Pe=>!(Pe.command in th));if(te.length===0)return!1;const we=te.filter(Pe=>!(Pe.command in eu));if(we.length>0)throw new Error(`Unimplemented: ${we.map(Pe=>Pe.command).join(", ")}.`);return te.forEach(Pe=>{Pe.command!=="setTransition"&&Pe.command!=="setProjection"&&this[Pe.command].apply(this,Pe.args)}),this.stylesheet=U,this._updateMapProjection(),!0}addImage(U,te){return this.getImage(U)?this.fire(new j.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(U,te),this._afterImageUpdated(U),this)}updateImage(U,te){this.imageManager.updateImage(U,te)}getImage(U){return this.imageManager.getImage(U)}removeImage(U){return this.getImage(U)?(this.imageManager.removeImage(U),this._afterImageUpdated(U),this):this.fire(new j.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(U){this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new j.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(U,te,we={}){if(this._checkLoaded(),this.getSource(U)!==void 0)throw new Error("There is already a source with this ID");if(!te.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(te).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(te.type)>=0&&this._validate(j.validateSource,`sources.${U}`,te,null,we))return;this.map&&this.map._collectResourceTiming&&(te.collectResourceTiming=!0);const Pe=_n(U,te,this.dispatcher,this);Pe.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(U),source:Pe.serialize(),sourceId:U}));const Re=Be=>{const Ne=(Be?"symbol:":"other:")+U,qe=this._sourceCaches[Ne]=new j.SourceCache(Ne,Pe,Be);(Be?this._symbolSourceCaches:this._otherSourceCaches)[U]=qe,qe.style=this,qe.onAdd(this.map)};Re(!1),te.type!=="vector"&&te.type!=="geojson"||Re(!0),Pe.onAdd&&Pe.onAdd(this.map),this._changed=!0}removeSource(U){this._checkLoaded();const te=this.getSource(U);if(!te)throw new Error("There is no source with this ID");for(const Pe in this._layers)if(this._layers[Pe].source===U)return this.fire(new j.ErrorEvent(new Error(`Source "${U}" cannot be removed while layer "${Pe}" is using it.`)));if(this.terrain&&this.terrain.get().source===U)return this.fire(new j.ErrorEvent(new Error(`Source "${U}" cannot be removed while terrain is using it.`)));const we=this._getSourceCaches(U);for(const Pe of we)delete this._sourceCaches[Pe.id],delete this._updatedSources[Pe.id],Pe.fire(new j.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Pe.getSource().id})),Pe.setEventedParent(null),Pe.clearTiles();return delete this._otherSourceCaches[U],delete this._symbolSourceCaches[U],te.setEventedParent(null),te.onRemove&&te.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(U,te){this._checkLoaded(),this.getSource(U).setData(te),this._changed=!0}getSource(U){const te=this._getSourceCache(U);return te&&te.getSource()}addLayer(U,te,we={}){this._checkLoaded();const Pe=U.id;if(this.getLayer(Pe))return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${Pe}" already exists on this map`)));let Re;if(U.type==="custom"){if(zs(this,j.validateCustomStyleLayer(U)))return;Re=j.createStyleLayer(U)}else{if(typeof U.source=="object"&&(this.addSource(Pe,U.source),U=j.clone$1(U),U=j.extend(U,{source:Pe})),this._validate(j.validateLayer,`layers.${Pe}`,U,{arrayIndex:-1},we))return;Re=j.createStyleLayer(U),this._validateLayer(Re),Re.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[Re.id]=Re.serialize(),this._updateLayerCount(Re,!0)}const Be=te?this._order.indexOf(te):this._order.length;if(te&&Be===-1)return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${te}" does not exist on this map.`)));this._order.splice(Be,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=Re;const Ne=this._getLayerSourceCache(Re);if(this._removedLayers[Pe]&&Re.source&&Ne&&Re.type!=="custom"){const qe=this._removedLayers[Pe];delete this._removedLayers[Pe],qe.type!==Re.type?this._updatedSources[Re.source]="clear":(this._updatedSources[Re.source]="reload",Ne.pause())}this._updateLayer(Re),Re.onAdd&&Re.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(U,te){if(this._checkLoaded(),this._changed=!0,!this._layers[U])return void this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be moved.`)));if(U===te)return;const we=this._order.indexOf(U);this._order.splice(we,1);const Pe=te?this._order.indexOf(te):this._order.length;te&&Pe===-1?this.fire(new j.ErrorEvent(new Error(`Layer with id "${te}" does not exist on this map.`))):(this._order.splice(Pe,0,U),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(U){this._checkLoaded();const te=this._layers[U];if(!te)return void this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be removed.`)));te.setEventedParent(null),this._updateLayerCount(te,!1);const we=this._order.indexOf(U);this._order.splice(we,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=te,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],te.onRemove&&te.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(U){return this._layers[U]}hasLayer(U){return U in this._layers}hasLayerType(U){for(const te in this._layers)if(this._layers[te].type===U)return!0;return!1}setLayerZoomRange(U,te,we){this._checkLoaded();const Pe=this.getLayer(U);Pe?Pe.minzoom===te&&Pe.maxzoom===we||(te!=null&&(Pe.minzoom=te),we!=null&&(Pe.maxzoom=we),this._updateLayer(Pe)):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(U,te,we={}){this._checkLoaded();const Pe=this.getLayer(U);if(Pe){if(!be(Pe.filter,te))return te==null?(Pe.filter=void 0,void this._updateLayer(Pe)):void(this._validate(j.validateFilter,`layers.${Pe.id}.filter`,te,{layerType:Pe.type},we)||(Pe.filter=j.clone$1(te),this._updateLayer(Pe)))}else this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be filtered.`)))}getFilter(U){const te=this.getLayer(U);return te&&j.clone$1(te.filter)}setLayoutProperty(U,te,we,Pe={}){this._checkLoaded();const Re=this.getLayer(U);Re?be(Re.getLayoutProperty(te),we)||(Re.setLayoutProperty(te,we,Pe),this._updateLayer(Re)):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(U,te){const we=this.getLayer(U);if(we)return we.getLayoutProperty(te);this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style.`)))}setPaintProperty(U,te,we,Pe={}){this._checkLoaded();const Re=this.getLayer(U);Re?be(Re.getPaintProperty(te),we)||(Re.setPaintProperty(te,we,Pe)&&this._updateLayer(Re),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(U,te){const we=this.getLayer(U);return we&&we.getPaintProperty(te)}setFeatureState(U,te){this._checkLoaded();const we=U.source,Pe=U.sourceLayer,Re=this.getSource(we);if(!Re)return void this.fire(new j.ErrorEvent(new Error(`The source '${we}' does not exist in the map's style.`)));const Be=Re.type;if(Be==="geojson"&&Pe)return void this.fire(new j.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Be==="vector"&&!Pe)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));U.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided.")));const Ne=this._getSourceCaches(we);for(const qe of Ne)qe.setFeatureState(Pe,U.id,te)}removeFeatureState(U,te){this._checkLoaded();const we=U.source,Pe=this.getSource(we);if(!Pe)return void this.fire(new j.ErrorEvent(new Error(`The source '${we}' does not exist in the map's style.`)));const Re=Pe.type,Be=Re==="vector"?U.sourceLayer:void 0;if(Re==="vector"&&!Be)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(te&&typeof U.id!="string"&&typeof U.id!="number")return void this.fire(new j.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const Ne=this._getSourceCaches(we);for(const qe of Ne)qe.removeFeatureState(Be,U.id,te)}getFeatureState(U){this._checkLoaded();const te=U.source,we=U.sourceLayer,Pe=this.getSource(te);if(Pe){if(Pe.type!=="vector"||we)return U.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(te)[0].getFeatureState(we,U.id);this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new j.ErrorEvent(new Error(`The source '${te}' does not exist in the map's style.`)))}getTransition(){return j.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const U={};for(const te in this._sourceCaches){const we=this._sourceCaches[te].getSource();U[we.id]||(U[we.id]=we.serialize())}return j.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:U,layers:this._serializeLayers(this._order)},te=>te!==void 0)}_updateLayer(U){this._updatedLayers[U.id]=!0;const te=this._getLayerSourceCache(U);U.source&&!this._updatedSources[U.source]&&te&&te.getSource().type!=="raster"&&(this._updatedSources[U.source]="reload",te.pause()),this._changed=!0,U.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(U){const te=Be=>this._layers[Be].type==="fill-extrusion",we={},Pe=[];for(let Be=this._order.length-1;Be>=0;Be--){const Ne=this._order[Be];if(te(Ne)){we[Ne]=Be;for(const qe of U){const Ke=qe[Ne];if(Ke)for(const Qe of Ke)Pe.push(Qe)}}}Pe.sort((Be,Ne)=>Ne.intersectionZ-Be.intersectionZ);const Re=[];for(let Be=this._order.length-1;Be>=0;Be--){const Ne=this._order[Be];if(te(Ne))for(let qe=Pe.length-1;qe>=0;qe--){const Ke=Pe[qe].feature;if(we[Ke.layer.id]<Be)break;Re.push(Ke),Pe.pop()}else for(const qe of U){const Ke=qe[Ne];if(Ke)for(const Qe of Ke)Re.push(Qe.feature)}}return Re}queryRenderedFeatures(U,te,we){te&&te.filter&&this._validate(j.validateFilter,"queryRenderedFeatures.filter",te.filter,null,te);const Pe={};if(te&&te.layers){if(!Array.isArray(te.layers))return this.fire(new j.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const qe of te.layers){const Ke=this._layers[qe];if(!Ke)return this.fire(new j.ErrorEvent(new Error(`The layer '${qe}' does not exist in the map's style and cannot be queried for features.`))),[];Pe[Ke.source]=!0}}const Re=[];te.availableImages=this._availableImages;const Be=te&&te.layers?te.layers.some(qe=>{const Ke=this.getLayer(qe);return Ke&&Ke.is3D()}):this.has3DLayers(),Ne=on.createFromScreenPoints(U,we);for(const qe in this._sourceCaches){const Ke=this._sourceCaches[qe].getSource().id;te.layers&&!Pe[Ke]||Re.push(sr(this._sourceCaches[qe],this._layers,this._serializedLayers,Ne,te,we,Be,!!this.map._showQueryGeometry))}return this.placement&&Re.push(function(qe,Ke,Qe,ut,gt,Mt,kt){const Tt={},Ct=Mt.queryRenderedSymbols(ut),wt=[];for(const zt of Object.keys(Ct).map(Number))wt.push(kt[zt]);wt.sort(Ar);for(const zt of wt){const Ot=zt.featureIndex.lookupSymbolFeatures(Ct[zt.bucketInstanceId],Ke,zt.bucketIndex,zt.sourceLayerIndex,gt.filter,gt.layers,gt.availableImages,qe);for(const Qt in Ot){const Kt=Tt[Qt]=Tt[Qt]||[],Gt=Ot[Qt];Gt.sort((Yt,Wt)=>{const sn=zt.featureSortOrder;if(sn){const mn=sn.indexOf(Yt.featureIndex);return sn.indexOf(Wt.featureIndex)-mn}return Wt.featureIndex-Yt.featureIndex});for(const Yt of Gt)Kt.push(Yt)}}for(const zt in Tt)Tt[zt].forEach(Ot=>{const Qt=Ot.feature,Kt=Qe(qe[zt]).getFeatureState(Qt.layer["source-layer"],Qt.id);Qt.source=Qt.layer.source,Qt.layer["source-layer"]&&(Qt.sourceLayer=Qt.layer["source-layer"]),Qt.state=Kt});return Tt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),Ne.screenGeometry,te,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Re)}querySourceFeatures(U,te){te&&te.filter&&this._validate(j.validateFilter,"querySourceFeatures.filter",te.filter,null,te);const we=this._getSourceCaches(U);let Pe=[];for(const Re of we)Pe=Pe.concat(Hn(Re,te));return Pe}addSourceType(U,te,we){return xo.getSourceType(U)?we(new Error(`A source type called "${U}" already exists.`)):(xo.setSourceType(U,te),te.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:U,url:te.workerSourceURL},we):we(null,null))}getLight(){return this.light.getLight()}setLight(U,te={}){this._checkLoaded();const we=this.light.getLight();let Pe=!1;for(const Be in U)if(!be(U[Be],we[Be])){Pe=!0;break}if(!Pe)return;const Re=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(U,te),this.light.updateTransitions(Re)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(U,te=1){if(this._checkLoaded(),!U)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(te===1){if(typeof U.source=="object"){const we="terrain-dem-src";this.addSource(we,U.source),U=j.clone$1(U),U=j.extend(U,{source:we})}if(this._validate(j.validateTerrain,"terrain",U))return}if(!this.terrain||this.terrain&&te!==this.terrain.drapeRenderMode)this._createTerrain(U,te);else{const we=this.terrain,Pe=we.get();for(const Re of Object.keys(j.spec.terrain))!U.hasOwnProperty(Re)&&j.spec.terrain[Re].default&&(U[Re]=j.spec.terrain[Re].default);for(const Re in U)if(!be(U[Re],Pe[Re])){we.set(U),this.stylesheet.terrain=U;const Be=this._setTransitionParameters({duration:0});we.updateTransitions(Be);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(U){const te=this.fog=new $t(U,this.map.transform);this.stylesheet.fog=U;const we=this._setTransitionParameters({duration:0});te.updateTransitions(we)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const U of this.map._markers)U._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(U){if(this._checkLoaded(),!U)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const te=this.fog,we=te.get();Object.keys(U).length===0&&te.set(U);for(const Pe in U)if(!be(U[Pe],we[Pe])){te.set(U),this.stylesheet.fog=U;const Re=this._setTransitionParameters({duration:0});te.updateTransitions(Re);break}}else this._createFog(U);this._markersNeedUpdate=!0}_setTransitionParameters(U){return{now:j.exported.now(),transition:j.extend(U,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const U=this._order.filter(we=>this.isLayerDraped(this._layers[we])),te=this._order.filter(we=>!this.isLayerDraped(this._layers[we]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...U),this._drapedFirstOrder.push(...te)}_createTerrain(U,te){const we=this.terrain=new ft(U,te);this.stylesheet.terrain=U,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const Pe=this._setTransitionParameters({duration:0});we.updateTransitions(Pe)}_force3DLayerUpdate(){for(const U in this._layers){const te=this._layers[U];te.type==="fill-extrusion"&&this._updateLayer(te)}}_forceSymbolLayerUpdate(){for(const U in this._layers){const te=this._layers[U];te.type==="symbol"&&this._updateLayer(te)}}_validate(U,te,we,Pe,Re={}){return(!Re||Re.validate!==!1)&&zs(this,U.call(j.validateStyle,j.extend({key:te,style:this.serialize(),value:we,styleSpec:j.spec},Pe)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),j.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const U in this._layers)this._layers[U].setEventedParent(null);for(const U in this._sourceCaches)this._sourceCaches[U].clearTiles(),this._sourceCaches[U].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(U){const te=this._getSourceCaches(U);for(const we of te)we.clearTiles()}_reloadSource(U){const te=this._getSourceCaches(U);for(const we of te)we.resume(),we.reload()}_updateSources(U){for(const te in this._sourceCaches)this._sourceCaches[te].update(U)}_generateCollisionBoxes(){for(const U in this._sourceCaches){const te=this._sourceCaches[U];te.resume(),te.reload()}}_updatePlacement(U,te,we,Pe,Re=!1){let Be=!1,Ne=!1;const qe={};for(const Ke of this._order){const Qe=this._layers[Ke];if(Qe.type!=="symbol")continue;if(!qe[Qe.source]){const gt=this._getLayerSourceCache(Qe);if(!gt)continue;qe[Qe.source]=gt.getRenderableIds(!0).map(Mt=>gt.getTileByID(Mt)).sort((Mt,kt)=>kt.tileID.overscaledZ-Mt.tileID.overscaledZ||(Mt.tileID.isLessThan(kt.tileID)?-1:1))}const ut=this.crossTileSymbolIndex.addLayer(Qe,qe[Qe.source],U.center.lng,U.projection);Be=Be||ut}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Re=Re||this._layerOrderChanged||we===0,this._layerOrderChanged&&this.fire(new j.Event("neworder")),(Re||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.exported.now(),U.zoom))&&(this.pauseablePlacement=new Do(U,this._order,Re,te,we,Pe,this.placement,this.fog&&U.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,qe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.exported.now()),Ne=!0),Be&&this.pauseablePlacement.placement.setStale()),Ne||Be)for(const Ke of this._order){const Qe=this._layers[Ke];Qe.type==="symbol"&&this.placement.updateLayerOpacities(Qe,qe[Qe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.exported.now())}_releaseSymbolFadeTiles(){for(const U in this._sourceCaches)this._sourceCaches[U].releaseSymbolFadeTiles()}getImages(U,te,we){this.imageManager.getImages(te.icons,we),this._updateTilesForChangedImages();const Pe=Re=>{Re&&Re.setDependencies(te.tileID.key,te.type,te.icons)};Pe(this._otherSourceCaches[te.source]),Pe(this._symbolSourceCaches[te.source])}getGlyphs(U,te,we){this.glyphManager.getGlyphs(te.stacks,we)}getResource(U,te,we){return j.makeRequest(te,we)}_getSourceCache(U){return this._otherSourceCaches[U]}_getLayerSourceCache(U){return U.type==="symbol"?this._symbolSourceCaches[U.source]:this._otherSourceCaches[U.source]}_getSourceCaches(U){const te=[];return this._otherSourceCaches[U]&&te.push(this._otherSourceCaches[U]),this._symbolSourceCaches[U]&&te.push(this._symbolSourceCaches[U]),te}_isSourceCacheLoaded(U){const te=this._getSourceCaches(U);return te.length===0?(this.fire(new j.ErrorEvent(new Error(`There is no source with ID '${U}'`))),!1):te.every(we=>we.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}xo.getSourceType=function(_e){return nn[_e]},xo.setSourceType=function(_e,U){nn[_e]=U},xo.registerForPluginStateChange=j.registerForPluginStateChange;var Sa=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,cc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",yl=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,uc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ya=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let vl={},jo={};const _a=[];Ia(Sa,_a),Ia(yl,_a),Ia(uc,_a),Ia(Ya,_a),vl=Kr("",yl),jo=Kr(Ya,uc);const Uo=Kr(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),xl=Sa,$s=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var bl={background:Kr(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Kr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Kr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Kr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Kr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Kr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Kr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Kr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Kr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Kr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Kr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Kr(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Kr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Kr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Kr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Kr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Kr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Kr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Kr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Kr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Kr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Kr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cc),skyboxGradient:Kr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cc),skyboxCapture:Kr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Kr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Kr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Ia(_e,U){const te=_e.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let we of te)if(we=we.trim(),we[0]==="#"&&we.includes("if")&&!we.includes("endif")){we=we.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Pe=we.split(" ");for(const Re of Pe)U.includes(Re)||U.push(Re)}}function Kr(_e,U){const te=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,we=U.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),Pe={},Re=[..._a];return Ia(_e,Re),Ia(U,Re),{fragmentSource:_e=_e.replace(te,(Be,Ne,qe,Ke,Qe)=>(Pe[Qe]=!0,Ne==="define"?`
#ifndef HAS_UNIFORM_u_${Qe}
varying ${qe} ${Ke} ${Qe};
#else
uniform ${qe} ${Ke} u_${Qe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Qe}
    ${qe} ${Ke} ${Qe} = u_${Qe};
#endif
`)),vertexSource:U=U.replace(te,(Be,Ne,qe,Ke,Qe)=>{const ut=Ke==="float"?"vec2":"vec4",gt=Qe.match(/color/)?"color":ut;return Pe[Qe]?Ne==="define"?`
#ifndef HAS_UNIFORM_u_${Qe}
uniform lowp float u_${Qe}_t;
attribute ${qe} ${ut} a_${Qe};
varying ${qe} ${Ke} ${Qe};
#else
uniform ${qe} ${Ke} u_${Qe};
#endif
`:gt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Qe}
    ${Qe} = a_${Qe};
#else
    ${qe} ${Ke} ${Qe} = u_${Qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Qe}
    ${Qe} = unpack_mix_${gt}(a_${Qe}, u_${Qe}_t);
#else
    ${qe} ${Ke} ${Qe} = u_${Qe};
#endif
`:Ne==="define"?`
#ifndef HAS_UNIFORM_u_${Qe}
uniform lowp float u_${Qe}_t;
attribute ${qe} ${ut} a_${Qe};
#else
uniform ${qe} ${Ke} u_${Qe};
#endif
`:gt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Qe}
    ${qe} ${Ke} ${Qe} = a_${Qe};
#else
    ${qe} ${Ke} ${Qe} = u_${Qe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Qe}
    ${qe} ${Ke} ${Qe} = unpack_mix_${gt}(a_${Qe}, u_${Qe}_t);
#else
    ${qe} ${Ke} ${Qe} = u_${Qe};
#endif
`}),staticAttributes:we,usedDefines:Re}}class Al{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(U,te,we,Pe,Re,Be,Ne){this.context=U;let qe=this.boundPaintVertexBuffers.length!==Pe.length;for(let Qe=0;!qe&&Qe<Pe.length;Qe++)this.boundPaintVertexBuffers[Qe]!==Pe[Qe]&&(qe=!0);let Ke=this.boundDynamicVertexBuffers.length!==Ne.length;for(let Qe=0;!Ke&&Qe<Ne.length;Qe++)this.boundDynamicVertexBuffers[Qe]!==Ne[Qe]&&(Ke=!0);if(!U.extVertexArrayObject||!this.vao||this.boundProgram!==te||this.boundLayoutVertexBuffer!==we||qe||Ke||this.boundIndexBuffer!==Re||this.boundVertexOffset!==Be)this.freshBind(te,we,Pe,Re,Be,Ne);else{U.bindVertexArrayOES.set(this.vao);for(const Qe of Ne)Qe&&Qe.bind();Re&&Re.dynamicDraw&&Re.bind()}}freshBind(U,te,we,Pe,Re,Be){let Ne;const qe=U.numAttributes,Ke=this.context,Qe=Ke.gl;if(Ke.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ke.extVertexArrayObject.createVertexArrayOES(),Ke.bindVertexArrayOES.set(this.vao),Ne=0,this.boundProgram=U,this.boundLayoutVertexBuffer=te,this.boundPaintVertexBuffers=we,this.boundIndexBuffer=Pe,this.boundVertexOffset=Re,this.boundDynamicVertexBuffers=Be;else{Ne=Ke.currentNumAttributes||0;for(let ut=qe;ut<Ne;ut++)Qe.disableVertexAttribArray(ut)}te.enableAttributes(Qe,U),te.bind(),te.setVertexAttribPointers(Qe,U,Re);for(const ut of we)ut.enableAttributes(Qe,U),ut.bind(),ut.setVertexAttribPointers(Qe,U,Re);for(const ut of Be)ut&&(ut.enableAttributes(Qe,U),ut.bind(),ut.setVertexAttribPointers(Qe,U,Re));Pe&&Pe.bind(),Ke.currentNumAttributes=qe}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function hc(_e,U){const te=Math.pow(2,U.canonical.z),we=U.canonical.y;return[new j.MercatorCoordinate(0,we/te).toLngLat().lat,new j.MercatorCoordinate(0,(we+1)/te).toLngLat().lat]}function dc(_e,U,te,we,Pe,Re,Be){const Ne=_e.context,qe=Ne.gl,Ke=te.fbo;if(!Ke)return;_e.prepareDrawTile();const Qe=_e.useProgram("hillshade");Ne.activeTexture.set(qe.TEXTURE0),qe.bindTexture(qe.TEXTURE_2D,Ke.colorAttachment.get());const ut=((Tt,Ct,wt,zt)=>{const Ot=wt.paint.get("hillshade-shadow-color"),Qt=wt.paint.get("hillshade-highlight-color"),Kt=wt.paint.get("hillshade-accent-color");let Gt=wt.paint.get("hillshade-illumination-direction")*(Math.PI/180);wt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Gt-=Tt.transform.angle);const Yt=!Tt.options.moving;return{u_matrix:zt||Tt.transform.calculateProjMatrix(Ct.tileID.toUnwrapped(),Yt),u_image:0,u_latrange:hc(0,Ct.tileID),u_light:[wt.paint.get("hillshade-exaggeration"),Gt],u_shadow:Ot,u_highlight:Qt,u_accent:Kt}})(_e,te,we,_e.terrain?U.projMatrix:null);_e.prepareDrawProgram(Ne,Qe,U.toUnwrapped());const{tileBoundsBuffer:gt,tileBoundsIndexBuffer:Mt,tileBoundsSegments:kt}=_e.getTileBoundsBuffers(te);Qe.draw(Ne,qe.TRIANGLES,Pe,Re,Be,j.CullFaceMode.disabled,ut,we.id,gt,Mt,kt)}function Wr(_e,U,te){if(!U.needsDEMTextureUpload)return;const we=_e.context,Pe=we.gl;we.pixelStoreUnpackPremultiplyAlpha.set(!1),U.demTexture=U.demTexture||_e.getTileTexture(te.stride);const Re=te.getPixels();U.demTexture?U.demTexture.update(Re,{premultiply:!1}):U.demTexture=new j.Texture(we,Re,Pe.RGBA,{premultiply:!1}),U.needsDEMTextureUpload=!1}function Ka(_e,U,te,we,Pe,Re){const Be=_e.context,Ne=Be.gl;if(!U.dem)return;const qe=U.dem;if(Be.activeTexture.set(Ne.TEXTURE1),Wr(_e,U,qe),!U.demTexture)return;U.demTexture.bind(Ne.NEAREST,Ne.CLAMP_TO_EDGE);const Ke=qe.dim;Be.activeTexture.set(Ne.TEXTURE0);let Qe=U.fbo;if(!Qe){const kt=new j.Texture(Be,{width:Ke,height:Ke,data:null},Ne.RGBA);kt.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Qe=U.fbo=Be.createFramebuffer(Ke,Ke,!0),Qe.colorAttachment.set(kt.texture)}Be.bindFramebuffer.set(Qe.framebuffer),Be.viewport.set([0,0,Ke,Ke]);const{tileBoundsBuffer:ut,tileBoundsIndexBuffer:gt,tileBoundsSegments:Mt}=_e.getMercatorTileBoundsBuffers();_e.useProgram("hillshadePrepare").draw(Be,Ne.TRIANGLES,we,Pe,Re,j.CullFaceMode.disabled,((kt,Tt)=>{const Ct=Tt.stride,wt=j.create();return j.ortho(wt,0,j.EXTENT,-j.EXTENT,0,0,1),j.translate(wt,wt,[0,-j.EXTENT,0]),{u_matrix:wt,u_image:1,u_dimension:[Ct,Ct],u_zoom:kt.overscaledZ,u_unpack:Tt.unpackVector}})(U.tileID,qe),te.id,ut,gt,Mt),U.needsHillshadePrepare=!1}const Ls=_e=>({u_matrix:new j.UniformMatrix4f(_e),u_image0:new j.Uniform1i(_e),u_skirt_height:new j.Uniform1f(_e)}),zo=(_e,U)=>({u_matrix:_e,u_image0:0,u_skirt_height:U}),pc=(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt)=>({u_proj_matrix:Float32Array.from(_e),u_globe_matrix:U,u_normalize_matrix:Float32Array.from(we),u_merc_matrix:te,u_zoom_transition:Pe,u_merc_center:Re,u_image0:0,u_frustum_tl:Be,u_frustum_tr:Ne,u_frustum_br:qe,u_frustum_bl:Ke,u_globe_pos:Qe,u_globe_radius:ut,u_viewport:gt,u_grid_matrix:Mt?Float32Array.from(Mt):new Float32Array(9)});function wl(_e,U){return _e!=null&&U!=null&&!(!_e.hasData()||!U.hasData())&&_e.demTexture!=null&&U.demTexture!=null&&_e.tileID.key!==U.tileID.key}const ma=new class{constructor(){this.operations={}}newMorphing(_e,U,te,we,Pe){if(_e in this.operations){const Re=this.operations[_e];Re.to.tileID.key!==te.tileID.key&&(Re.queued=te)}else this.operations[_e]={startTime:we,phase:0,duration:Pe,from:U,to:te,queued:null}}getMorphValuesForProxy(_e){if(!(_e in this.operations))return null;const U=this.operations[_e];return{from:U.from,to:U.to,phase:U.phase}}update(_e){for(const U in this.operations){const te=this.operations[U];for(te.phase=(_e-te.startTime)/te.duration;te.phase>=1||!this._validOp(te);)if(!this._nextOp(te,_e)){delete this.operations[U];break}}}_nextOp(_e,U){return!!_e.queued&&(_e.from=_e.to,_e.to=_e.queued,_e.queued=null,_e.phase=0,_e.startTime=U,!0)}_validOp(_e){return _e.from.hasData()&&_e.to.hasData()}},Qa={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function rh(_e,U){const te=1<<_e.z;return!U&&(_e.x===0||_e.x===te-1)||_e.y===0||_e.y===te-1}const Jo=_e=>({u_matrix:_e});function El(_e,U,te,we,Pe){if(Pe>0){const Re=j.exported.now(),Be=(Re-_e.timeAdded)/Pe,Ne=U?(Re-U.timeAdded)/Pe:-1,qe=te.getSource(),Ke=we.coveringZoomLevel({tileSize:qe.tileSize,roundZoom:qe.roundZoom}),Qe=!U||Math.abs(U.tileID.overscaledZ-Ke)>Math.abs(_e.tileID.overscaledZ-Ke),ut=Qe&&_e.refreshedUponExpiration?1:j.clamp(Qe?Be:1-Ne,0,1);return _e.refreshedUponExpiration&&Be>=1&&(_e.refreshedUponExpiration=!1),U?{opacity:1,mix:1-ut}:{opacity:ut,mix:0}}return{opacity:1,mix:0}}class Bs extends j.SourceCache{constructor(U){const te={type:"raster-dem",maxzoom:U.transform.maxZoom},we=new ln(ei(),null),Pe=_n("mock-dem",te,we,U.style);super("mock-dem",Pe,!1),Pe.setEventedParent(this),this._sourceLoaded=!0}_loadTile(U,te){U.state="loaded",te(null)}}class fc extends j.SourceCache{constructor(U){const te=_n("proxy",{type:"geojson",maxzoom:U.transform.maxZoom},new ln(ei(),null),U.style);super("proxy",te,!1),te.setEventedParent(this),this.map=this.getSource().map=U,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(U,te,we){if(U.freezeTileCoverage)return;this.transform=U;const Pe=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Re,Be)=>{if(Re[Be.key]="",!this._tiles[Be.key]){const Ne=new j.Tile(Be,this._source.tileSize*Be.overscaleFactor(),U.tileZoom);Ne.state="loaded",this._tiles[Be.key]=Ne}return Re},{});for(const Re in this._tiles)Re in Pe||(this.freeFBO(Re),this._tiles[Re].unloadVectorData(),delete this._tiles[Re])}freeFBO(U){const te=this.proxyCachedFBO[U];if(te!==void 0){const we=Object.values(te);this.renderCachePool.push(...we),delete this.proxyCachedFBO[U]}}deallocRenderCache(){this.renderCache.forEach(U=>U.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Tl extends j.OverscaledTileID{constructor(U,te,we){super(U.overscaledZ,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y),this.proxyTileKey=te,this.projMatrix=we}}class nu extends j.Elevation{constructor(U,te){super(),this.painter=U,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[we,Pe,Re]=function(qe){const Ke=new j.StructArrayLayout4i8,Qe=new j.StructArrayLayout3ui6,ut=131;Ke.reserve(17161),Qe.reserve(33800);const gt=j.EXTENT/128,Mt=j.EXTENT+gt/2,kt=Mt+gt;for(let Ct=-gt;Ct<kt;Ct+=gt)for(let wt=-gt;wt<kt;wt+=gt){const zt=wt<0||wt>Mt||Ct<0||Ct>Mt?24575:0,Ot=j.clamp(Math.round(wt),0,j.EXTENT),Qt=j.clamp(Math.round(Ct),0,j.EXTENT);Ke.emplaceBack(Ot+zt,Qt,Ot,Qt)}const Tt=(Ct,wt)=>{const zt=wt*ut+Ct;Qe.emplaceBack(zt+1,zt,zt+ut),Qe.emplaceBack(zt+ut,zt+ut+1,zt+1)};for(let Ct=1;Ct<129;Ct++)for(let wt=1;wt<129;wt++)Tt(wt,Ct);return[0,129].forEach(Ct=>{for(let wt=0;wt<130;wt++)Tt(wt,Ct),Tt(Ct,wt)}),[Ke,Qe,32768]}(),Be=U.context;this.gridBuffer=Be.createVertexBuffer(we,j.boundsAttributes.members),this.gridIndexBuffer=Be.createIndexBuffer(Pe),this.gridSegments=j.SegmentVector.simpleSegment(0,0,we.length,Pe.length),this.gridNoSkirtSegments=j.SegmentVector.simpleSegment(0,0,we.length,Re),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fc(te.map),this.orthoMatrix=j.create(),j.ortho(this.orthoMatrix,0,j.EXTENT,0,j.EXTENT,0,1);const Ne=Be.gl;this._overlapStencilMode=new j.StencilMode({func:Ne.GEQUAL,mask:255},0,255,Ne.KEEP,Ne.KEEP,Ne.REPLACE),this._previousZoom=U.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=te,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Bs(te.map)}set style(U){U.on("data",this._onStyleDataEvent.bind(this)),U.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=U,this._checkRenderCacheEfficiency()}update(U,te,we){if(U&&U.terrain){this._style!==U&&(this.style=U),this.enabled=!0;const Pe=U.terrain.properties;this.sourceCache=U.terrain.drapeRenderMode===0?this._mockSourceCache:U._getSourceCache(Pe.get("source")),this._exaggeration=Pe.get("exaggeration");const Re=()=>{this.sourceCache.used&&j.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Be=this.getScaledDemTileSize();this.sourceCache.update(te,Be,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Re(),this._initializing=!0),Re(),te.updateElevation(!we),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(te),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(U){this._findCoveringTileCache[U]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const U=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||U.efficiency!==100&&j.warnOnce(`Terrain render cache efficiency is not optimal (${U.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${U.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(U){U.coord&&U.dataType==="source"?this._clearRenderCacheForTile(U.sourceCacheId,U.coord):U.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const U in this._style._sourceCaches)this._style._sourceCaches[U].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(U=>U.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const U=2*this.proxySourceCache.getSource().tileSize;return[U,U]}set useVertexMorphing(U){this._useVertexMorphing=U}updateTileBinding(U){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const te=this.proxySourceCache,we=this.painter.transform;this._initializing&&(this._initializing=we._centerAltitude===0&&this.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(we.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const Pe=this.proxyCoords=te.getIds().map(qe=>{const Ke=te.getTileByID(qe).tileID;return Ke.projMatrix=we.calculateProjMatrix(Ke.toUnwrapped()),Ke});(function(qe,Ke){const Qe=Ke.transform.pointCoordinate(Ke.transform.getCameraPoint()),ut=new j.pointGeometry(Qe.x,Qe.y);qe.sort((gt,Mt)=>{if(Mt.overscaledZ-gt.overscaledZ)return Mt.overscaledZ-gt.overscaledZ;const kt=new j.pointGeometry(gt.canonical.x+(1<<gt.canonical.z)*gt.wrap,gt.canonical.y),Tt=new j.pointGeometry(Mt.canonical.x+(1<<Mt.canonical.z)*Mt.wrap,Mt.canonical.y),Ct=ut.mult(1<<gt.canonical.z);return Ct.x-=.5,Ct.y-=.5,Ct.distSqr(kt)-Ct.distSqr(Tt)})})(Pe,this.painter),this._previousZoom=we.zoom;const Re=this.proxyToSource||{};this.proxyToSource={},Pe.forEach(qe=>{this.proxyToSource[qe.key]={}}),this.terrainTileForTile={};const Be=this._style._sourceCaches;for(const qe in Be){const Ke=Be[qe];if(!Ke.used||(Ke!==this.sourceCache&&this.resetTileLookupCache(Ke.id),this._setupProxiedCoordsForOrtho(Ke,U[qe],Re),Ke.usedForTerrain))continue;const Qe=U[qe];Ke.getSource().reparseOverscaled&&this._assignTerrainTiles(Qe)}this.proxiedCoords[te.id]=Pe.map(qe=>new Tl(qe,qe.key,this.orthoMatrix)),this._assignTerrainTiles(Pe),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Re),this.renderingToTexture=!1,this._updateTimestamp=j.exported.now();const Ne={};this._visibleDemTiles=[];for(const qe of this.proxyCoords){const Ke=this.terrainTileForTile[qe.key];if(!Ke)continue;const Qe=Ke.tileID.key;Qe in Ne||(this._visibleDemTiles.push(Ke),Ne[Qe]=Qe)}}_assignTerrainTiles(U){this._initializing||U.forEach(te=>{if(this.terrainTileForTile[te.key])return;const we=this._findTileCoveringTileID(te,this.sourceCache);we&&(this.terrainTileForTile[te.key]=we)})}_prepareDEMTextures(){const U=this.painter.context,te=U.gl;for(const we in this.terrainTileForTile){const Pe=this.terrainTileForTile[we],Re=Pe.dem;!Re||Pe.demTexture&&!Pe.needsDEMTextureUpload||(U.activeTexture.set(te.TEXTURE1),Wr(this.painter,Pe,Re))}}_prepareDemTileUniforms(U,te,we,Pe){if(!te||te.demTexture==null)return!1;const Re=U.tileID.canonical,Be=Math.pow(2,te.tileID.canonical.z-Re.z),Ne=Pe||"";return we[`u_dem_tl${Ne}`]=[Re.x*Be%1,Re.y*Be%1],we[`u_dem_scale${Ne}`]=Be,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const U=this.painter.context,te=U.gl;if(!this._emptyDepthBufferTexture){const we=new j.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new j.Texture(U,we,te.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let U=0;const te=this._visibleDemTiles.reduce((we,Pe)=>{if(!Pe.dem)return we;const Re=Pe.dem.tree.minimums[0];return Re>0&&U++,we+Re},0);return U?te/U:0}_updateEmptyDEMTexture(){const U=this.painter.context,te=U.gl;U.activeTexture.set(te.TEXTURE2);const we=this._getLoadedAreaMinimum(),Pe=new j.RGBAImage({width:1,height:1},new Uint8Array(j.DEMData.pack(we,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let Re=this._emptyDEMTexture;return Re?Re.update(Pe,{premultiply:!1}):Re=this._emptyDEMTexture=new j.Texture(U,Pe,te.RGBA,{premultiply:!1}),Re}setupElevationDraw(U,te,we){const Pe=this.painter.context,Re=Pe.gl,Be=(Ne=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:j.DEMData.getUnpackVector(Ne),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var Ne;Be.u_dem_size=this.sourceCache.getSource().tileSize,Be.u_exaggeration=this.exaggeration();const qe=this.painter.transform,Ke=qe.projection,Qe=U.tileID.canonical;Be.u_tile_tl_up=Ke.upVector(Qe,0,0),Be.u_tile_tr_up=Ke.upVector(Qe,j.EXTENT,0),Be.u_tile_br_up=Ke.upVector(Qe,j.EXTENT,j.EXTENT),Be.u_tile_bl_up=Ke.upVector(Qe,0,j.EXTENT),Be.u_tile_up_scale=we&&we.useDenormalizedUpVectorScale?j.GLOBE_METERS_TO_ECEF:Ke.upVectorScale(Qe,qe.center.lat,qe.worldSize).metersToTile;let ut=null,gt=null,Mt=1;if(we&&we.morphing&&this._useVertexMorphing){const kt=we.morphing.srcDemTile,Tt=we.morphing.dstDemTile;Mt=we.morphing.phase,kt&&Tt&&(this._prepareDemTileUniforms(U,kt,Be,"_prev")&&(gt=kt),this._prepareDemTileUniforms(U,Tt,Be)&&(ut=Tt))}if(gt&&ut?(Pe.activeTexture.set(Re.TEXTURE2),ut.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE,Re.NEAREST),Pe.activeTexture.set(Re.TEXTURE4),gt.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE,Re.NEAREST),Be.u_dem_lerp=Mt):(ut=this.terrainTileForTile[U.tileID.key],Pe.activeTexture.set(Re.TEXTURE2),(this._prepareDemTileUniforms(U,ut,Be)?ut.demTexture:this.emptyDEMTexture).bind(Re.NEAREST,Re.CLAMP_TO_EDGE)),Pe.activeTexture.set(Re.TEXTURE3),we&&we.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),this._depthFBO&&(Be.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),Be.u_depth_size_inv=[1,1]),we&&we.useMeterToDem&&ut){const kt=(1<<ut.tileID.canonical.z)*j.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Be.u_meter_to_dem=kt}we&&we.labelPlaneMatrixInv&&(Be.u_label_plane_matrix_inv=we.labelPlaneMatrixInv),te.setTerrainUniformValues(Pe,Be)}renderToBackBuffer(U){const te=this.painter,we=this.painter.context;U.length!==0&&(we.bindFramebuffer.set(null),we.viewport.set([0,0,te.width,te.height]),te.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Pe,Re,Be,Ne,qe){if(Pe.transform.projection.name==="globe")(function(Ke,Qe,ut,gt,Mt){const kt=Ke.context,Tt=kt.gl;let Ct,wt;const zt=Ke.options.showTerrainWireframe?2:0,Ot=Ke.transform,Qt=j.globeUseCustomAntiAliasing(Ke,kt,Ot),Kt=(er,kn)=>{if(wt===er)return;const Zn=[Qa[er],"PROJECTION_GLOBE_VIEW"];Qt&&Zn.push("CUSTOM_ANTIALIASING"),kn&&Zn.push(Qa[zt]),Ct=Ke.useProgram("globeRaster",null,Zn),wt=er},Gt=Ke.colorModeForRenderPass(),Yt=new j.DepthMode(Tt.LEQUAL,j.DepthMode.ReadWrite,Ke.depthRangeFor3D);ma.update(Mt);const Wt=j.calculateGlobeMercatorMatrix(Ot),sn=[j.mercatorXfromLng(Ot.center.lng),j.mercatorYfromLat(Ot.center.lat)],mn=zt?[!1,!0]:[!1],Wn=Ke.globeSharedBuffers,pn=[Ot.width*j.exported.devicePixelRatio,Ot.height*j.exported.devicePixelRatio],Dn=Float32Array.from(Ot.globeMatrix),Nn={useDenormalizedUpVectorScale:!0};if(mn.forEach(er=>{wt=-1;const kn=er?Tt.LINES:Tt.TRIANGLES;for(const Zn of gt){const Ln=ut.getTile(Zn),or=j.StencilMode.disabled,tr=Qe.prevTerrainTileForTile[Zn.key],pr=Qe.terrainTileForTile[Zn.key];wl(tr,pr)&&ma.newMorphing(Zn.key,tr,pr,Mt,250),kt.activeTexture.set(Tt.TEXTURE0),Ln.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);const yr=ma.getMorphValuesForProxy(Zn.key),Tr=yr?1:0;yr&&j.extend$1(Nn,{morphing:{srcDemTile:yr.from,dstDemTile:yr.to,phase:j.easeCubicInOut(yr.phase)}});const Vr=j.tileCornersToBounds(Zn.canonical),_r=j.getLatitudinalLod(Vr.getCenter().lat),Ir=j.getGridMatrix(Zn.canonical,Vr,_r),Zr=j.globeNormalizeECEF(j.globeTileBounds(Zn.canonical)),ci=pc(Ot.projMatrix,Dn,Wt,Zr,j.globeToMercatorTransition(Ot.zoom),sn,Ot.frustumCorners.TL,Ot.frustumCorners.TR,Ot.frustumCorners.BR,Ot.frustumCorners.BL,Ot.globeCenterInViewSpace,Ot.globeRadius,pn,Ir);if(Kt(Tr,er),Qe.setupElevationDraw(Ln,Ct,Nn),Ke.prepareDrawProgram(kt,Ct,Zn.toUnwrapped()),Wn){const[Ai,oi,Wi]=er?Wn.getWirefameBuffers(Ke.context,_r):Wn.getGridBuffers(_r);Ct.draw(kt,kn,Yt,or,Gt,j.CullFaceMode.backCCW,ci,"globe_raster",Ai,oi,Wi)}}}),Wn){const er=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Qt&&er.push("CUSTOM_ANTIALIASING"),Ct=Ke.useProgram("globeRaster",null,er);for(const kn of gt){const{x:Zn,y:Ln,z:or}=kn.canonical,tr=Ln===0,pr=Ln===(1<<or)-1,[yr,Tr,Vr,_r]=Wn.getPoleBuffers(or);if(_r&&(tr||pr)){const Ir=ut.getTile(kn);kt.activeTexture.set(Tt.TEXTURE0),Ir.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);let Zr=j.globePoleMatrixForTile(or,Zn,Ot);const ci=j.globeNormalizeECEF(j.globeTileBounds(kn.canonical)),Ai=(oi,Wi)=>oi.draw(kt,Tt.TRIANGLES,Yt,j.StencilMode.disabled,Gt,j.CullFaceMode.disabled,pc(Ot.projMatrix,Zr,Zr,ci,0,sn,Ot.frustumCorners.TL,Ot.frustumCorners.TR,Ot.frustumCorners.BR,Ot.frustumCorners.BL,Ot.globeCenterInViewSpace,Ot.globeRadius,pn),"globe_pole_raster",Wi,Vr,_r);Qe.setupElevationDraw(Ir,Ct,Nn),Ke.prepareDrawProgram(kt,Ct,kn.toUnwrapped()),tr&&Ai(Ct,yr),pr&&(Zr=j.scale(j.create(),Zr,[1,-1,1]),Ai(Ct,Tr))}}}})(Pe,Re,Be,Ne,qe);else{const Ke=Pe.context,Qe=Ke.gl;let ut,gt;const Mt=Pe.options.showTerrainWireframe?2:0,kt=(Ot,Qt)=>{if(gt===Ot)return;const Kt=[Qa[Ot]];Qt&&Kt.push(Qa[Mt]),ut=Pe.useProgram("terrainRaster",null,Kt),gt=Ot},Tt=Pe.colorModeForRenderPass(),Ct=new j.DepthMode(Qe.LEQUAL,j.DepthMode.ReadWrite,Pe.depthRangeFor3D);ma.update(qe);const wt=Pe.transform,zt=6*Math.pow(1.5,22-wt.zoom)*Re.exaggeration();(Mt?[!1,!0]:[!1]).forEach(Ot=>{gt=-1;const Qt=Ot?Qe.LINES:Qe.TRIANGLES,[Kt,Gt]=Ot?Re.getWirefameBuffer():[Re.gridIndexBuffer,Re.gridSegments];for(const Yt of Ne){const Wt=Be.getTile(Yt),sn=j.StencilMode.disabled,mn=Re.prevTerrainTileForTile[Yt.key],Wn=Re.terrainTileForTile[Yt.key];wl(mn,Wn)&&ma.newMorphing(Yt.key,mn,Wn,qe,250),Ke.activeTexture.set(Qe.TEXTURE0),Wt.texture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE,Qe.LINEAR_MIPMAP_NEAREST);const pn=ma.getMorphValuesForProxy(Yt.key),Dn=pn?1:0;let Nn;pn&&(Nn={morphing:{srcDemTile:pn.from,dstDemTile:pn.to,phase:j.easeCubicInOut(pn.phase)}});const er=zo(Yt.projMatrix,rh(Yt.canonical,wt.renderWorldCopies)?zt/10:zt);kt(Dn,Ot),Re.setupElevationDraw(Wt,ut,Nn),Pe.prepareDrawProgram(Ke,ut,Yt.toUnwrapped()),ut.draw(Ke,Qt,Ct,sn,Tt,j.CullFaceMode.backCCW,er,"terrain_raster",Re.gridBuffer,Kt,Gt)}})}}(te,this,this.proxySourceCache,U,this._updateTimestamp),this.renderingToTexture=!0,te.gpuTimingDeferredRenderEnd(),U.splice(0,U.length))}renderBatch(U){if(this._drapedRenderBatches.length===0)return U+1;this.renderingToTexture=!0;const te=this.painter,we=this.painter.context,Pe=this.proxySourceCache,Re=this.proxiedCoords[Pe.id],Be=this._drapedRenderBatches.shift(),Ne=[],qe=te.style.order;let Ke=0;for(const Qe of Re){const ut=Pe.getTileByID(Qe.proxyTileKey),gt=Pe.proxyCachedFBO[Qe.key]?Pe.proxyCachedFBO[Qe.key][U]:void 0,Mt=gt!==void 0?Pe.renderCache[gt]:this.pool[Ke++],kt=gt!==void 0;if(ut.texture=Mt.tex,kt&&!Mt.dirty){Ne.push(ut.tileID);continue}let Tt;we.bindFramebuffer.set(Mt.fb.framebuffer),this.renderedToTile=!1,Mt.dirty&&(we.clear({color:j.Color.transparent,stencil:0}),Mt.dirty=!1);for(let Ct=Be.start;Ct<=Be.end;++Ct){const wt=te.style._layers[qe[Ct]];if(wt.isHidden(te.transform.zoom))continue;const zt=te.style._getLayerSourceCache(wt),Ot=zt?this.proxyToSource[Qe.key][zt.id]:[Qe];if(!Ot)continue;const Qt=Ot;we.viewport.set([0,0,Mt.fb.width,Mt.fb.height]),Tt!==(zt?zt.id:null)&&(this._setupStencil(Mt,Ot,wt,zt),Tt=zt?zt.id:null),te.renderLayer(te,zt,wt,Qt)}this.renderedToTile?(Mt.dirty=!0,Ne.push(ut.tileID)):kt||--Ke,Ke===5&&(Ke=0,this.renderToBackBuffer(Ne))}return this.renderToBackBuffer(Ne),this.renderingToTexture=!1,we.bindFramebuffer.set(null),we.viewport.set([0,0,te.width,te.height]),Be.end+1}postRender(){}renderCacheEfficiency(U){const te=U.order.length;if(te===0)return{efficiency:100};let we,Pe=0,Re=0,Be=!1;for(let Ne=0;Ne<te;++Ne){const qe=U._layers[U.order[Ne]];this._style.isLayerDraped(qe)?(Be&&++Pe,++Re):Be||(Be=!0,we=qe.id)}return Re===0?{efficiency:100}:{efficiency:100*(1-Pe/Re),firstUndrapedLayer:we}}getMinElevationBelowMSL(){let U=0;return this._visibleDemTiles.filter(te=>te.dem).forEach(te=>{U=Math.min(U,te.dem.tree.minimums[0])}),U===0?U:(U-30)*this._exaggeration}raycast(U,te,we){if(!this._visibleDemTiles)return null;const Pe=this._visibleDemTiles.filter(Re=>Re.dem).map(Re=>{const Be=Re.tileID,Ne=1<<Be.overscaledZ,{x:qe,y:Ke}=Be.canonical,Qe=qe/Ne,ut=(qe+1)/Ne,gt=Ke/Ne,Mt=(Ke+1)/Ne;return{minx:Qe,miny:gt,maxx:ut,maxy:Mt,t:Re.dem.tree.raycastRoot(Qe,gt,ut,Mt,U,te,we),tile:Re}});Pe.sort((Re,Be)=>(Re.t!==null?Re.t:Number.MAX_VALUE)-(Be.t!==null?Be.t:Number.MAX_VALUE));for(const Re of Pe){if(Re.t==null)return null;const Be=Re.tile.dem.tree.raycast(Re.minx,Re.miny,Re.maxx,Re.maxy,U,te,we);if(Be!=null)return Be}return null}_createFBO(){const U=this.painter.context,te=U.gl,we=this.drapeBufferSize;U.activeTexture.set(te.TEXTURE0);const Pe=new j.Texture(U,{width:we[0],height:we[1],data:null},te.RGBA);Pe.bind(te.LINEAR,te.CLAMP_TO_EDGE);const Re=U.createFramebuffer(we[0],we[1],!1);return Re.colorAttachment.set(Pe.texture),Re.depthAttachment=new ct(U,Re.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=U.createRenderbuffer(U.gl.DEPTH_STENCIL,we[0],we[1]),this._stencilRef=0,Re.depthAttachment.set(this._sharedDepthStencil),U.clear({stencil:0})):Re.depthAttachment.set(this._sharedDepthStencil),U.extTextureFilterAnisotropic&&!U.extTextureFilterAnisotropicForceOff&&te.texParameterf(te.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax),{fb:Re,tex:Pe,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const U in this._style._sourceCaches)if(this._style._sourceCaches[U].hasTransition())return!0;return this._style.order.some(U=>{const te=this._style._layers[U],we=te.isHidden(this.painter.transform.zoom),Pe=te.getCrossfadeParameters(),Re=!!Pe&&Pe.t!==1,Be=te.hasTransition();return te.type!=="custom"&&!we&&(Re||Be)})}_clearRasterFadeFromRenderCache(){let U=!1;for(const te in this._style._sourceCaches)if(this._style._sourceCaches[te]._source instanceof Ut){U=!0;break}if(U)for(let te=0;te<this._style.order.length;++te){const we=this._style._layers[this._style.order[te]],Pe=we.isHidden(this.painter.transform.zoom),Re=this._style._getLayerSourceCache(we);if(we.type!=="raster"||Pe||!Re)continue;const Be=we.paint.get("raster-fade-duration");for(const Ne of this.proxyCoords){const qe=this.proxyToSource[Ne.key][Re.id];if(qe)for(const Ke of qe){const Qe=El(Re.getTile(Ke),Re.findLoadedParent(Ke,0),Re,this.painter.transform,Be);(Qe.opacity!==1||Qe.mix!==0)&&this._clearRenderCacheForTile(Re.id,Ke)}}}}_setupDrapedRenderBatches(){const U=this._style.order,te=U.length;if(te===0)return;const we=[];let Pe,Re=0,Be=this._style._layers[U[Re]];for(;!this._style.isLayerDraped(Be)&&Be.isHidden(this.painter.transform.zoom)&&++Re<te;)Be=this._style._layers[U[Re]];for(;Re<te;++Re){const Ne=this._style._layers[U[Re]];Ne.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(Ne)?Pe===void 0&&(Pe=Re):Pe!==void 0&&(we.push({start:Pe,end:Re-1}),Pe=void 0))}Pe!==void 0&&we.push({start:Pe,end:Re-1}),this._drapedRenderBatches=we}_setupRenderCache(U){const te=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,te.renderCache.length>te.renderCachePool.length){const Be=Object.values(te.proxyCachedFBO);te.proxyCachedFBO={};for(let Ne=0;Ne<Be.length;++Ne){const qe=Object.values(Be[Ne]);te.renderCachePool.push(...qe)}}return}this._clearRasterFadeFromRenderCache();const we=this.proxyCoords,Pe=this._tilesDirty;for(let Be=we.length-1;Be>=0;Be--){const Ne=we[Be];if(te.getTileByID(Ne.key),te.proxyCachedFBO[Ne.key]!==void 0){const qe=U[Ne.key],Ke=this.proxyToSource[Ne.key];let Qe=0;for(const ut in Ke){const gt=Ke[ut],Mt=qe[ut];if(!Mt||Mt.length!==gt.length||gt.some((kt,Tt)=>kt!==Mt[Tt]||Pe[ut]&&Pe[ut].hasOwnProperty(kt.key))){Qe=-1;break}++Qe}for(const ut in te.proxyCachedFBO[Ne.key])te.renderCache[te.proxyCachedFBO[Ne.key][ut]].dirty=Qe<0||Qe!==Object.values(qe).length}}const Re=[...this._drapedRenderBatches];Re.sort((Be,Ne)=>Ne.end-Ne.start-(Be.end-Be.start));for(const Be of Re)for(const Ne of we){if(te.proxyCachedFBO[Ne.key])continue;let qe=te.renderCachePool.pop();qe===void 0&&te.renderCache.length<50&&(qe=te.renderCache.length,te.renderCache.push(this._createFBO())),qe!==void 0&&(te.proxyCachedFBO[Ne.key]={},te.proxyCachedFBO[Ne.key][Be.start]=qe,te.renderCache[qe].dirty=!0)}this._tilesDirty={}}_setupStencil(U,te,we,Pe){if(!Pe||!this._sourceTilesOverlap[Pe.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Re=this.painter.context,Be=Re.gl;if(te.length<=1)return void(this._overlapStencilType=!1);let Ne;if(we.isTileClipped())Ne=te.length,this._overlapStencilMode.test={func:Be.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(te[0].overscaledZ>te[te.length-1].overscaledZ))return void(this._overlapStencilType=!1);Ne=1,this._overlapStencilMode.test={func:Be.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+Ne>255&&(Re.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=Ne,this._overlapStencilMode.ref=this._stencilRef,we.isTileClipped()&&this._renderTileClippingMasks(te,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(U){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[U.key]),this._overlapStencilMode):j.StencilMode.disabled}_renderTileClippingMasks(U,te){const we=this.painter,Pe=this.painter.context,Re=Pe.gl;we._tileClippingMaskIDs={},Pe.setColorMode(j.ColorMode.disabled),Pe.setDepthMode(j.DepthMode.disabled);const Be=we.useProgram("clippingMask");for(const Ne of U){const qe=we._tileClippingMaskIDs[Ne.key]=--te;Be.draw(Pe,Re.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Re.ALWAYS,mask:0},qe,255,Re.KEEP,Re.KEEP,Re.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,Jo(Ne.projMatrix),"$clipping",we.tileExtentBuffer,we.quadTriangleIndexBuffer,we.tileExtentSegments)}}pointCoordinate(U){const te=this.painter.transform;if(U.x<0||U.x>te.width||U.y<0||U.y>te.height)return null;const we=[U.x,U.y,1,1];j.transformMat4$1(we,we,te.pixelMatrixInverse),j.scale$1(we,we,1/we[3]),we[0]/=te.worldSize,we[1]/=te.worldSize;const Pe=te._camera.position,Re=j.mercatorZfromAltitude(1,te.center.lat),Be=[Pe[0],Pe[1],Pe[2]/Re,0],Ne=j.subtract([],we.slice(0,3),Be);j.normalize(Ne,Ne);const qe=this.raycast(Be,Ne,this._exaggeration);return qe!==null&&qe?(j.scaleAndAdd(Be,Be,Ne,qe),Be[3]=Be[2],Be[2]*=Re,Be):null}drawDepth(){const U=this.painter,te=U.context,we=this.proxySourceCache,Pe=Math.ceil(U.width),Re=Math.ceil(U.height);if(!this._depthFBO||this._depthFBO.width===Pe&&this._depthFBO.height===Re||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Be=te.gl,Ne=te.createFramebuffer(Pe,Re,!0);te.activeTexture.set(Be.TEXTURE0);const qe=new j.Texture(te,{width:Pe,height:Re,data:null},Be.RGBA);qe.bind(Be.NEAREST,Be.CLAMP_TO_EDGE),Ne.colorAttachment.set(qe.texture);const Ke=te.createRenderbuffer(te.gl.DEPTH_COMPONENT16,Pe,Re);Ne.depthAttachment.set(Ke),this._depthFBO=Ne,this._depthTexture=qe}te.bindFramebuffer.set(this._depthFBO.framebuffer),te.viewport.set([0,0,Pe,Re]),function(Be,Ne,qe,Ke){if(Be.transform.projection.name==="globe")return;const Qe=Be.context,ut=Qe.gl;Qe.clear({depth:1});const gt=Be.useProgram("terrainDepth"),Mt=new j.DepthMode(ut.LESS,j.DepthMode.ReadWrite,Be.depthRangeFor3D);for(const kt of Ke){const Tt=qe.getTile(kt),Ct=zo(kt.projMatrix,0);Ne.setupElevationDraw(Tt,gt),gt.draw(Qe,ut.TRIANGLES,Mt,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.backCCW,Ct,"terrain_depth",Ne.gridBuffer,Ne.gridIndexBuffer,Ne.gridNoSkirtSegments)}}(U,this,we,this.proxyCoords)}_setupProxiedCoordsForOrtho(U,te,we){if(U.getSource()instanceof dn)return this._setupProxiedCoordsForImageSource(U,te,we);this._findCoveringTileCache[U.id]=this._findCoveringTileCache[U.id]||{};const Pe=this.proxiedCoords[U.id]=[],Re=this.proxyCoords;for(let Ne=0;Ne<Re.length;Ne++){const qe=Re[Ne],Ke=this._findTileCoveringTileID(qe,U);if(Ke){const Qe=this._createProxiedId(qe,Ke,we[qe.key]&&we[qe.key][U.id]);Pe.push(Qe),this.proxyToSource[qe.key][U.id]=[Qe]}}let Be=!1;for(let Ne=0;Ne<te.length;Ne++){const qe=U.getTile(te[Ne]);if(!qe||!qe.hasData())continue;const Ke=this._findTileCoveringTileID(qe.tileID,this.proxySourceCache);if(Ke&&Ke.tileID.canonical.z!==qe.tileID.canonical.z){const Qe=this.proxyToSource[Ke.tileID.key][U.id],ut=this._createProxiedId(Ke.tileID,qe,we[Ke.tileID.key]&&we[Ke.tileID.key][U.id]);Qe?Qe.splice(Qe.length-1,0,ut):this.proxyToSource[Ke.tileID.key][U.id]=[ut],Pe.push(ut),Be=!0}}this._sourceTilesOverlap[U.id]=Be}_setupProxiedCoordsForImageSource(U,te,we){if(!U.getSource().loaded())return;const Pe=this.proxiedCoords[U.id]=[],Re=this.proxyCoords,Be=U.getSource(),Ne=new j.pointGeometry(Be.tileID.x,Be.tileID.y)._div(1<<Be.tileID.z),qe=Be.coordinates.map(j.MercatorCoordinate.fromLngLat).reduce((Qe,ut)=>(Qe.min.x=Math.min(Qe.min.x,ut.x-Ne.x),Qe.min.y=Math.min(Qe.min.y,ut.y-Ne.y),Qe.max.x=Math.max(Qe.max.x,ut.x-Ne.x),Qe.max.y=Math.max(Qe.max.y,ut.y-Ne.y),Qe),{min:new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new j.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Ke=(Qe,ut)=>{const gt=Qe.wrap+Qe.canonical.x/(1<<Qe.canonical.z),Mt=Qe.canonical.y/(1<<Qe.canonical.z),kt=j.EXTENT/(1<<Qe.canonical.z),Tt=ut.wrap+ut.canonical.x/(1<<ut.canonical.z),Ct=ut.canonical.y/(1<<ut.canonical.z);return gt+kt<Tt+qe.min.x||gt>Tt+qe.max.x||Mt+kt<Ct+qe.min.y||Mt>Ct+qe.max.y};for(let Qe=0;Qe<Re.length;Qe++){const ut=Re[Qe];for(let gt=0;gt<te.length;gt++){const Mt=U.getTile(te[gt]);if(!Mt||!Mt.hasData()||Ke(ut,Mt.tileID))continue;const kt=this._createProxiedId(ut,Mt,we[ut.key]&&we[ut.key][U.id]),Tt=this.proxyToSource[ut.key][U.id];Tt?Tt.push(kt):this.proxyToSource[ut.key][U.id]=[kt],Pe.push(kt)}}}_createProxiedId(U,te,we){let Pe=this.orthoMatrix;if(we){const Re=we.find(Be=>Be.key===te.tileID.key);if(Re)return Re}if(te.tileID.key!==U.key){const Re=U.canonical.z-te.tileID.canonical.z;let Be,Ne,qe;Pe=j.create();const Ke=te.tileID.wrap-U.wrap<<U.overscaledZ;Re>0?(Be=j.EXTENT>>Re,Ne=Be*((te.tileID.canonical.x<<Re)-U.canonical.x+Ke),qe=Be*((te.tileID.canonical.y<<Re)-U.canonical.y)):(Be=j.EXTENT<<-Re,Ne=j.EXTENT*(te.tileID.canonical.x-(U.canonical.x+Ke<<-Re)),qe=j.EXTENT*(te.tileID.canonical.y-(U.canonical.y<<-Re))),j.ortho(Pe,0,Be,0,Be,0,1),j.translate(Pe,Pe,[Ne,qe,0])}return new Tl(te.tileID,U.key,Pe)}_findTileCoveringTileID(U,te){let we=te.getTile(U);if(we&&we.hasData())return we;const Pe=this._findCoveringTileCache[te.id],Re=Pe[U.key];if(we=Re?te.getTileByID(Re):null,we&&we.hasData()||Re===null)return we;let Be=we?we.tileID:U,Ne=Be.overscaledZ;const qe=te.getSource().minzoom,Ke=[];if(!Re){const ut=te.getSource().maxzoom;if(U.canonical.z>=ut){const gt=U.canonical.z-ut;te.getSource().reparseOverscaled?(Ne=Math.max(U.canonical.z+2,te.transform.tileZoom),Be=new j.OverscaledTileID(Ne,U.wrap,ut,U.canonical.x>>gt,U.canonical.y>>gt)):gt!==0&&(Ne=ut,Be=new j.OverscaledTileID(Ne,U.wrap,ut,U.canonical.x>>gt,U.canonical.y>>gt))}Be.key!==U.key&&(Ke.push(Be.key),we=te.getTile(Be))}const Qe=ut=>{Ke.forEach(gt=>{Pe[gt]=ut}),Ke.length=0};for(Ne-=1;Ne>=qe&&(!we||!we.hasData());Ne--){we&&Qe(we.tileID.key);const ut=Be.calculateScaledKey(Ne);if(we=te.getTileByID(ut),we&&we.hasData())break;const gt=Pe[ut];if(gt===null)break;gt===void 0?Ke.push(ut):we=te.getTileByID(gt)}return Qe(we?we.tileID.key:null),we&&we.hasData()?we:null}findDEMTileFor(U){return this.enabled?this._findTileCoveringTileID(U,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(U,te){let we=this._tilesDirty[U];we||(we=this._tilesDirty[U]={}),we[te.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const U=function(te){let we=0;const Pe=new j.StructArrayLayout2ui4,Re=131;for(let Be=1;Be<129;Be++){for(let Ne=1;Ne<129;Ne++)we=Be*Re+Ne,Pe.emplaceBack(we,we+1),Pe.emplaceBack(we,we+Re),Pe.emplaceBack(we+1,we+Re),Be===128&&Pe.emplaceBack(we+Re,we+Re+1);Pe.emplaceBack(we+1,we+1+Re)}return Pe}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(U),this.wireframeSegments=j.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,U.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class kl{static cacheKey(U,te,we,Pe){let Re=`${te}${Pe?Pe.cacheKey:""}`;for(const Be of we)U.usedDefines.includes(Be)&&(Re+=`/${Be}`);return Re}constructor(U,te,we,Pe,Re,Be){const Ne=U.gl;this.program=Ne.createProgram();const qe=function(Ct){const wt=[];for(let zt=0;zt<Ct.length;zt++){if(Ct[zt]===null)continue;const Ot=Ct[zt].split(" ");wt.push(Ot.pop())}return wt}(we.staticAttributes),Ke=Pe?Pe.getBinderAttributes():[],Qe=qe.concat(Ke);let ut=Pe?Pe.defines():[];ut=ut.concat(Be.map(Ct=>`#define ${Ct}`));const gt=ut.concat(U.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat($s):$s,$s,xl,Uo.fragmentSource,jo.fragmentSource,we.fragmentSource).join(`
`),Mt=ut.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,xl,Uo.vertexSource,jo.vertexSource,vl.vertexSource,we.vertexSource).join(`
`),kt=Ne.createShader(Ne.FRAGMENT_SHADER);if(Ne.isContextLost())return void(this.failedToCreate=!0);Ne.shaderSource(kt,gt),Ne.compileShader(kt),Ne.attachShader(this.program,kt);const Tt=Ne.createShader(Ne.VERTEX_SHADER);if(Ne.isContextLost())this.failedToCreate=!0;else{Ne.shaderSource(Tt,Mt),Ne.compileShader(Tt),Ne.attachShader(this.program,Tt),this.attributes={},this.numAttributes=Qe.length;for(let Ct=0;Ct<this.numAttributes;Ct++)Qe[Ct]&&(Ne.bindAttribLocation(this.program,Ct,Qe[Ct]),this.attributes[Qe[Ct]]=Ct);Ne.linkProgram(this.program),Ne.deleteShader(Tt),Ne.deleteShader(kt),this.fixedUniforms=Re(U),this.binderUniforms=Pe?Pe.getUniforms(U):[],Be.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(Ct=>({u_dem:new j.Uniform1i(Ct),u_dem_prev:new j.Uniform1i(Ct),u_dem_unpack:new j.Uniform4f(Ct),u_dem_tl:new j.Uniform2f(Ct),u_dem_scale:new j.Uniform1f(Ct),u_dem_tl_prev:new j.Uniform2f(Ct),u_dem_scale_prev:new j.Uniform1f(Ct),u_dem_size:new j.Uniform1f(Ct),u_dem_lerp:new j.Uniform1f(Ct),u_exaggeration:new j.Uniform1f(Ct),u_depth:new j.Uniform1i(Ct),u_depth_size_inv:new j.Uniform2f(Ct),u_meter_to_dem:new j.Uniform1f(Ct),u_label_plane_matrix_inv:new j.UniformMatrix4f(Ct),u_tile_tl_up:new j.Uniform3f(Ct),u_tile_tr_up:new j.Uniform3f(Ct),u_tile_br_up:new j.Uniform3f(Ct),u_tile_bl_up:new j.Uniform3f(Ct),u_tile_up_scale:new j.Uniform1f(Ct)}))(U)),Be.indexOf("FOG")!==-1&&(this.fogUniforms=(Ct=>({u_fog_matrix:new j.UniformMatrix4f(Ct),u_fog_range:new j.Uniform2f(Ct),u_fog_color:new j.Uniform4f(Ct),u_fog_horizon_blend:new j.Uniform1f(Ct),u_fog_temporal_offset:new j.Uniform1f(Ct),u_frustum_tl:new j.Uniform3f(Ct),u_frustum_tr:new j.Uniform3f(Ct),u_frustum_br:new j.Uniform3f(Ct),u_frustum_bl:new j.Uniform3f(Ct),u_globe_pos:new j.Uniform3f(Ct),u_globe_radius:new j.Uniform1f(Ct),u_globe_transition:new j.Uniform1f(Ct),u_is_globe:new j.Uniform1i(Ct),u_viewport:new j.Uniform2f(Ct)}))(U))}}setTerrainUniformValues(U,te){if(!this.terrainUniforms)return;const we=this.terrainUniforms;if(!this.failedToCreate){U.program.set(this.program);for(const Pe in te)we[Pe].set(this.program,Pe,te[Pe])}}setFogUniformValues(U,te){if(!this.fogUniforms)return;const we=this.fogUniforms;if(!this.failedToCreate){U.program.set(this.program);for(const Pe in te)we[Pe].set(this.program,Pe,te[Pe])}}draw(U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt){const Ct=U.gl;if(this.failedToCreate)return;U.program.set(this.program),U.setDepthMode(we),U.setStencilMode(Pe),U.setColorMode(Re),U.setCullFace(Be);for(const zt of Object.keys(this.fixedUniforms))this.fixedUniforms[zt].set(this.program,zt,Ne[zt]);kt&&kt.setUniforms(this.program,U,this.binderUniforms,gt,{zoom:Mt});const wt={[Ct.LINES]:2,[Ct.TRIANGLES]:3,[Ct.LINE_STRIP]:1}[te];for(const zt of ut.get()){const Ot=zt.vaos||(zt.vaos={});(Ot[qe]||(Ot[qe]=new Al)).bind(U,this,Ke,kt?kt.getPaintVertexBuffers():[],Qe,zt.vertexOffset,Tt||[]),Ct.drawElements(te,zt.primitiveLength*wt,Ct.UNSIGNED_SHORT,zt.primitiveOffset*wt*2)}}}function ru(_e,U,te){const we=1/Mn(te,1,U.transform.tileZoom),Pe=Math.pow(2,te.tileID.overscaledZ),Re=te.tileSize*Math.pow(2,U.transform.tileZoom)/Pe,Be=Re*(te.tileID.canonical.x+te.tileID.wrap*Pe),Ne=Re*te.tileID.canonical.y;return{u_image:0,u_texsize:te.imageAtlasTexture.size,u_scale:[we,_e.fromScale,_e.toScale],u_fade:_e.t,u_pixel_coord_upper:[Be>>16,Ne>>16],u_pixel_coord_lower:[65535&Be,65535&Ne]}}const Vo=j.create(),Ja=(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe)=>{const ut=U.style.light,gt=ut.properties.get("position"),Mt=[gt.x,gt.y,gt.z],kt=j.create$1();ut.properties.get("anchor")==="viewport"&&(j.fromRotation(kt,-U.transform.angle),j.transformMat3(Mt,Mt,kt));const Tt=ut.properties.get("color"),Ct=U.transform,wt={u_matrix:_e,u_lightpos:Mt,u_lightintensity:ut.properties.get("intensity"),u_lightcolor:[Tt.r,Tt.g,Tt.b],u_vertical_gradient:+te,u_opacity:we,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Vo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Pe,u_edge_radius:Re};return Ct.projection.name==="globe"&&(wt.u_tile_id=[Be.canonical.x,Be.canonical.y,1<<Be.canonical.z],wt.u_zoom_transition=qe,wt.u_inv_rot_matrix=Qe,wt.u_merc_center=Ke,wt.u_up_dir=Ct.projection.upVector(new j.CanonicalTileID(0,0,0),Ke[0]*j.EXTENT,Ke[1]*j.EXTENT),wt.u_height_lift=Ne),wt},iu=(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt)=>{const Mt=Ja(_e,U,te,we,Pe,Re,Be,Ke,Qe,ut,gt),kt={u_height_factor:-Math.pow(2,Be.overscaledZ)/qe.tileSize/8};return j.extend(Mt,ru(Ne,U,qe),kt)},Fs=_e=>({u_matrix:_e}),Cl=(_e,U,te,we)=>j.extend(Fs(_e),ru(te,U,we)),Go=(_e,U)=>({u_matrix:_e,u_world:U}),Ma=(_e,U,te,we,Pe)=>j.extend(Cl(_e,U,te,we),{u_world:Pe}),ou=j.create(),_c=(_e,U,te,we,Pe,Re)=>{const Be=_e.transform,Ne=Be.projection.name==="globe";let qe;if(Re.paint.get("circle-pitch-alignment")==="map")if(Ne){const Qe=j.globePixelsToTileUnits(Be.zoom,U.canonical)*Be._pixelsPerMercatorPixel;qe=Float32Array.from([Qe,0,0,Qe])}else qe=Be.calculatePixelsToTileUnitsMatrix(te);else qe=new Float32Array([Be.pixelsToGLUnits[0],0,0,Be.pixelsToGLUnits[1]]);const Ke={u_camera_to_center_distance:Be.cameraToCenterDistance,u_matrix:_e.translatePosMatrix(U.projMatrix,te,Re.paint.get("circle-translate"),Re.paint.get("circle-translate-anchor")),u_device_pixel_ratio:j.exported.devicePixelRatio,u_extrude_scale:qe,u_inv_rot_matrix:ou,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Ne){Ke.u_inv_rot_matrix=we,Ke.u_merc_center=Pe,Ke.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Ke.u_zoom_transition=j.globeToMercatorTransition(Be.zoom);const Qe=Pe[0]*j.EXTENT,ut=Pe[1]*j.EXTENT;Ke.u_up_dir=Be.projection.upVector(new j.CanonicalTileID(0,0,0),Qe,ut)}return Ke},au=_e=>{const U=[];return _e.paint.get("circle-pitch-alignment")==="map"&&U.push("PITCH_WITH_MAP"),_e.paint.get("circle-pitch-scale")==="map"&&U.push("SCALE_WITH_MAP"),U},mc=(_e,U,te,we)=>{const Pe=j.EXTENT/te.tileSize;return{u_matrix:_e,u_camera_to_center_distance:U.getCameraToCenterDistance(we),u_extrude_scale:[U.pixelsToGLUnits[0]/Pe,U.pixelsToGLUnits[1]/Pe]}},su=(_e,U,te=1)=>({u_matrix:_e,u_color:U,u_overlay:0,u_overlay_scale:te}),gc=j.create(),ih=(_e,U,te,we,Pe,Re,Be)=>{const Ne=_e.transform,qe=Ne.projection.name==="globe",Ke=qe?j.globePixelsToTileUnits(Ne.zoom,U.canonical)*Ne._pixelsPerMercatorPixel:Mn(te,1,Re),Qe={u_matrix:U.projMatrix,u_extrude_scale:Ke,u_intensity:Be,u_inv_rot_matrix:gc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(qe){Qe.u_inv_rot_matrix=we,Qe.u_merc_center=Pe,Qe.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Qe.u_zoom_transition=j.globeToMercatorTransition(Ne.zoom);const ut=Pe[0]*j.EXTENT,gt=Pe[1]*j.EXTENT;Qe.u_up_dir=Ne.projection.upVector(new j.CanonicalTileID(0,0,0),ut,gt)}return Qe},Sl=(_e,U,te,we,Pe,Re,Be,Ne)=>{const qe=_e.transform,Ke=qe.calculatePixelsToTileUnitsMatrix(U),Qe={u_matrix:lu(_e,U,te,Pe),u_pixels_to_tile_units:Ke,u_device_pixel_ratio:Be,u_units_to_pixels:[1/qe.pixelsToGLUnits[0],1/qe.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Re,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:Ne};if(Ml(te)){const ut=Il(U,_e.transform);Qe.u_texsize=U.lineAtlasTexture.size,Qe.u_scale=[ut,we.fromScale,we.toScale],Qe.u_mix=we.t}return Qe},oh=(_e,U,te,we,Pe,Re)=>{const Be=_e.transform,Ne=Il(U,Be);return{u_matrix:lu(_e,U,te,Pe),u_texsize:U.imageAtlasTexture.size,u_pixels_to_tile_units:Be.calculatePixelsToTileUnitsMatrix(U),u_device_pixel_ratio:Re,u_image:0,u_scale:[Ne,we.fromScale,we.toScale],u_fade:we.t,u_units_to_pixels:[1/Be.pixelsToGLUnits[0],1/Be.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Il(_e,U){return 1/Mn(_e,1,U.tileZoom)}function lu(_e,U,te,we){return _e.translatePosMatrix(we||U.tileID.projMatrix,U,te.paint.get("line-translate"),te.paint.get("line-translate-anchor"))}function Ml(_e){const U=_e.paint.get("line-dasharray").value;return U.value||U.kind!=="constant"}const ah=(_e,U,te,we,Pe,Re)=>{return{u_matrix:_e,u_tl_parent:U,u_scale_parent:te,u_fade_t:we.mix,u_opacity:we.opacity*Pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Pe.paint.get("raster-brightness-min"),u_brightness_high:Pe.paint.get("raster-brightness-max"),u_saturation_factor:(Ne=Pe.paint.get("raster-saturation"),Ne>0?1-1/(1.001-Ne):-Ne),u_contrast_factor:(Be=Pe.paint.get("raster-contrast"),Be>0?1/(1-Be):1+Be),u_spin_weights:Ns(Pe.paint.get("raster-hue-rotate")),u_perspective_transform:Re};var Be,Ne};function Ns(_e){_e*=Math.PI/180;const U=Math.sin(_e),te=Math.cos(_e);return[(2*te+1)/3,(-Math.sqrt(3)*U-te+1)/3,(Math.sqrt(3)*U-te+1)/3]}const cu=j.create(),es=(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt)=>{const Ct=Pe.transform,wt={u_is_size_zoom_constant:+(_e==="constant"||_e==="source"),u_is_size_feature_constant:+(_e==="constant"||_e==="camera"),u_size_t:U?U.uSizeT:0,u_size:U?U.uSize:0,u_camera_to_center_distance:Ct.cameraToCenterDistance,u_rotate_symbol:+te,u_aspect_ratio:Ct.width/Ct.height,u_fade_change:Pe.options.fadeDuration?Pe.symbolFadeChange:1,u_matrix:Re,u_label_plane_matrix:Be,u_coord_matrix:Ne,u_is_text:+qe,u_pitch_with_map:+we,u_texsize:Ke,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:cu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:cu,u_up_vector:[0,-1,0]};return Tt.name==="globe"&&(wt.u_tile_id=[Qe.canonical.x,Qe.canonical.y,1<<Qe.canonical.z],wt.u_zoom_transition=ut,wt.u_inv_rot_matrix=Mt,wt.u_merc_center=gt,wt.u_camera_forward=Ct._camera.forward(),wt.u_ecef_origin=j.globeECEFOrigin(Ct.globeMatrix,Qe.toUnwrapped()),wt.u_tile_matrix=Float32Array.from(Ct.globeMatrix),wt.u_up_vector=kt),wt},yc=(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt,Ct)=>j.extend(es(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,ut,gt,Mt,kt,Tt,Ct),{u_gamma_scale:we?Pe.transform.cameraToCenterDistance*Math.cos(Pe.terrain?0:Pe.transform._pitch):1,u_device_pixel_ratio:j.exported.devicePixelRatio,u_is_halo:+Qe}),Pa=(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt)=>j.extend(yc(_e,U,te,we,Pe,Re,Be,Ne,!0,qe,!0,Qe,ut,gt,Mt,kt,Tt),{u_texsize_icon:Ke,u_texture_icon:1}),sh=(_e,U,te)=>({u_matrix:_e,u_opacity:U,u_color:te}),uu=(_e,U,te,we,Pe,Re)=>j.extend(function(Be,Ne,qe,Ke){const Qe=qe.imageManager.getPattern(Be.from.toString()),ut=qe.imageManager.getPattern(Be.to.toString()),{width:gt,height:Mt}=qe.imageManager.getPixelSize(),kt=Math.pow(2,Ke.tileID.overscaledZ),Tt=Ke.tileSize*Math.pow(2,qe.transform.tileZoom)/kt,Ct=Tt*(Ke.tileID.canonical.x+Ke.tileID.wrap*kt),wt=Tt*Ke.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Qe.tl,u_pattern_br_a:Qe.br,u_pattern_tl_b:ut.tl,u_pattern_br_b:ut.br,u_texsize:[gt,Mt],u_mix:Ne.t,u_pattern_size_a:Qe.displaySize,u_pattern_size_b:ut.displaySize,u_scale_a:Ne.fromScale,u_scale_b:Ne.toScale,u_tile_units_to_pixels:1/Mn(Ke,1,qe.transform.tileZoom),u_pixel_coord_upper:[Ct>>16,wt>>16],u_pixel_coord_lower:[65535&Ct,65535&wt]}}(we,Re,te,Pe),{u_matrix:_e,u_opacity:U}),lh={fillExtrusion:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_lightpos:new j.Uniform3f(_e),u_lightintensity:new j.Uniform1f(_e),u_lightcolor:new j.Uniform3f(_e),u_vertical_gradient:new j.Uniform1f(_e),u_opacity:new j.Uniform1f(_e),u_edge_radius:new j.Uniform1f(_e),u_ao:new j.Uniform2f(_e),u_tile_id:new j.Uniform3f(_e),u_zoom_transition:new j.Uniform1f(_e),u_inv_rot_matrix:new j.UniformMatrix4f(_e),u_merc_center:new j.Uniform2f(_e),u_up_dir:new j.Uniform3f(_e),u_height_lift:new j.Uniform1f(_e)}),fillExtrusionPattern:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_lightpos:new j.Uniform3f(_e),u_lightintensity:new j.Uniform1f(_e),u_lightcolor:new j.Uniform3f(_e),u_vertical_gradient:new j.Uniform1f(_e),u_height_factor:new j.Uniform1f(_e),u_edge_radius:new j.Uniform1f(_e),u_ao:new j.Uniform2f(_e),u_tile_id:new j.Uniform3f(_e),u_zoom_transition:new j.Uniform1f(_e),u_inv_rot_matrix:new j.UniformMatrix4f(_e),u_merc_center:new j.Uniform2f(_e),u_up_dir:new j.Uniform3f(_e),u_height_lift:new j.Uniform1f(_e),u_image:new j.Uniform1i(_e),u_texsize:new j.Uniform2f(_e),u_pixel_coord_upper:new j.Uniform2f(_e),u_pixel_coord_lower:new j.Uniform2f(_e),u_scale:new j.Uniform3f(_e),u_fade:new j.Uniform1f(_e),u_opacity:new j.Uniform1f(_e)}),fill:_e=>({u_matrix:new j.UniformMatrix4f(_e)}),fillPattern:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_image:new j.Uniform1i(_e),u_texsize:new j.Uniform2f(_e),u_pixel_coord_upper:new j.Uniform2f(_e),u_pixel_coord_lower:new j.Uniform2f(_e),u_scale:new j.Uniform3f(_e),u_fade:new j.Uniform1f(_e)}),fillOutline:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_world:new j.Uniform2f(_e)}),fillOutlinePattern:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_world:new j.Uniform2f(_e),u_image:new j.Uniform1i(_e),u_texsize:new j.Uniform2f(_e),u_pixel_coord_upper:new j.Uniform2f(_e),u_pixel_coord_lower:new j.Uniform2f(_e),u_scale:new j.Uniform3f(_e),u_fade:new j.Uniform1f(_e)}),circle:_e=>({u_camera_to_center_distance:new j.Uniform1f(_e),u_extrude_scale:new j.UniformMatrix2f(_e),u_device_pixel_ratio:new j.Uniform1f(_e),u_matrix:new j.UniformMatrix4f(_e),u_inv_rot_matrix:new j.UniformMatrix4f(_e),u_merc_center:new j.Uniform2f(_e),u_tile_id:new j.Uniform3f(_e),u_zoom_transition:new j.Uniform1f(_e),u_up_dir:new j.Uniform3f(_e)}),collisionBox:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_camera_to_center_distance:new j.Uniform1f(_e),u_extrude_scale:new j.Uniform2f(_e)}),collisionCircle:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_inv_matrix:new j.UniformMatrix4f(_e),u_camera_to_center_distance:new j.Uniform1f(_e),u_viewport_size:new j.Uniform2f(_e)}),debug:_e=>({u_color:new j.UniformColor(_e),u_matrix:new j.UniformMatrix4f(_e),u_overlay:new j.Uniform1i(_e),u_overlay_scale:new j.Uniform1f(_e)}),clippingMask:_e=>({u_matrix:new j.UniformMatrix4f(_e)}),heatmap:_e=>({u_extrude_scale:new j.Uniform1f(_e),u_intensity:new j.Uniform1f(_e),u_matrix:new j.UniformMatrix4f(_e),u_inv_rot_matrix:new j.UniformMatrix4f(_e),u_merc_center:new j.Uniform2f(_e),u_tile_id:new j.Uniform3f(_e),u_zoom_transition:new j.Uniform1f(_e),u_up_dir:new j.Uniform3f(_e)}),heatmapTexture:_e=>({u_image:new j.Uniform1i(_e),u_color_ramp:new j.Uniform1i(_e),u_opacity:new j.Uniform1f(_e)}),hillshade:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_image:new j.Uniform1i(_e),u_latrange:new j.Uniform2f(_e),u_light:new j.Uniform2f(_e),u_shadow:new j.UniformColor(_e),u_highlight:new j.UniformColor(_e),u_accent:new j.UniformColor(_e)}),hillshadePrepare:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_image:new j.Uniform1i(_e),u_dimension:new j.Uniform2f(_e),u_zoom:new j.Uniform1f(_e),u_unpack:new j.Uniform4f(_e)}),line:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_pixels_to_tile_units:new j.UniformMatrix2f(_e),u_device_pixel_ratio:new j.Uniform1f(_e),u_units_to_pixels:new j.Uniform2f(_e),u_dash_image:new j.Uniform1i(_e),u_gradient_image:new j.Uniform1i(_e),u_image_height:new j.Uniform1f(_e),u_texsize:new j.Uniform2f(_e),u_scale:new j.Uniform3f(_e),u_mix:new j.Uniform1f(_e),u_alpha_discard_threshold:new j.Uniform1f(_e),u_trim_offset:new j.Uniform2f(_e)}),linePattern:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_texsize:new j.Uniform2f(_e),u_pixels_to_tile_units:new j.UniformMatrix2f(_e),u_device_pixel_ratio:new j.Uniform1f(_e),u_image:new j.Uniform1i(_e),u_units_to_pixels:new j.Uniform2f(_e),u_scale:new j.Uniform3f(_e),u_fade:new j.Uniform1f(_e),u_alpha_discard_threshold:new j.Uniform1f(_e)}),raster:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_tl_parent:new j.Uniform2f(_e),u_scale_parent:new j.Uniform1f(_e),u_fade_t:new j.Uniform1f(_e),u_opacity:new j.Uniform1f(_e),u_image0:new j.Uniform1i(_e),u_image1:new j.Uniform1i(_e),u_brightness_low:new j.Uniform1f(_e),u_brightness_high:new j.Uniform1f(_e),u_saturation_factor:new j.Uniform1f(_e),u_contrast_factor:new j.Uniform1f(_e),u_spin_weights:new j.Uniform3f(_e),u_perspective_transform:new j.Uniform2f(_e)}),symbolIcon:_e=>({u_is_size_zoom_constant:new j.Uniform1i(_e),u_is_size_feature_constant:new j.Uniform1i(_e),u_size_t:new j.Uniform1f(_e),u_size:new j.Uniform1f(_e),u_camera_to_center_distance:new j.Uniform1f(_e),u_rotate_symbol:new j.Uniform1i(_e),u_aspect_ratio:new j.Uniform1f(_e),u_fade_change:new j.Uniform1f(_e),u_matrix:new j.UniformMatrix4f(_e),u_label_plane_matrix:new j.UniformMatrix4f(_e),u_coord_matrix:new j.UniformMatrix4f(_e),u_is_text:new j.Uniform1i(_e),u_pitch_with_map:new j.Uniform1i(_e),u_texsize:new j.Uniform2f(_e),u_tile_id:new j.Uniform3f(_e),u_zoom_transition:new j.Uniform1f(_e),u_inv_rot_matrix:new j.UniformMatrix4f(_e),u_merc_center:new j.Uniform2f(_e),u_camera_forward:new j.Uniform3f(_e),u_tile_matrix:new j.UniformMatrix4f(_e),u_up_vector:new j.Uniform3f(_e),u_ecef_origin:new j.Uniform3f(_e),u_texture:new j.Uniform1i(_e)}),symbolSDF:_e=>({u_is_size_zoom_constant:new j.Uniform1i(_e),u_is_size_feature_constant:new j.Uniform1i(_e),u_size_t:new j.Uniform1f(_e),u_size:new j.Uniform1f(_e),u_camera_to_center_distance:new j.Uniform1f(_e),u_rotate_symbol:new j.Uniform1i(_e),u_aspect_ratio:new j.Uniform1f(_e),u_fade_change:new j.Uniform1f(_e),u_matrix:new j.UniformMatrix4f(_e),u_label_plane_matrix:new j.UniformMatrix4f(_e),u_coord_matrix:new j.UniformMatrix4f(_e),u_is_text:new j.Uniform1i(_e),u_pitch_with_map:new j.Uniform1i(_e),u_texsize:new j.Uniform2f(_e),u_texture:new j.Uniform1i(_e),u_gamma_scale:new j.Uniform1f(_e),u_device_pixel_ratio:new j.Uniform1f(_e),u_tile_id:new j.Uniform3f(_e),u_zoom_transition:new j.Uniform1f(_e),u_inv_rot_matrix:new j.UniformMatrix4f(_e),u_merc_center:new j.Uniform2f(_e),u_camera_forward:new j.Uniform3f(_e),u_tile_matrix:new j.UniformMatrix4f(_e),u_up_vector:new j.Uniform3f(_e),u_ecef_origin:new j.Uniform3f(_e),u_is_halo:new j.Uniform1i(_e)}),symbolTextAndIcon:_e=>({u_is_size_zoom_constant:new j.Uniform1i(_e),u_is_size_feature_constant:new j.Uniform1i(_e),u_size_t:new j.Uniform1f(_e),u_size:new j.Uniform1f(_e),u_camera_to_center_distance:new j.Uniform1f(_e),u_rotate_symbol:new j.Uniform1i(_e),u_aspect_ratio:new j.Uniform1f(_e),u_fade_change:new j.Uniform1f(_e),u_matrix:new j.UniformMatrix4f(_e),u_label_plane_matrix:new j.UniformMatrix4f(_e),u_coord_matrix:new j.UniformMatrix4f(_e),u_is_text:new j.Uniform1i(_e),u_pitch_with_map:new j.Uniform1i(_e),u_texsize:new j.Uniform2f(_e),u_texsize_icon:new j.Uniform2f(_e),u_texture:new j.Uniform1i(_e),u_texture_icon:new j.Uniform1i(_e),u_gamma_scale:new j.Uniform1f(_e),u_device_pixel_ratio:new j.Uniform1f(_e),u_is_halo:new j.Uniform1i(_e)}),background:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_opacity:new j.Uniform1f(_e),u_color:new j.UniformColor(_e)}),backgroundPattern:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_opacity:new j.Uniform1f(_e),u_image:new j.Uniform1i(_e),u_pattern_tl_a:new j.Uniform2f(_e),u_pattern_br_a:new j.Uniform2f(_e),u_pattern_tl_b:new j.Uniform2f(_e),u_pattern_br_b:new j.Uniform2f(_e),u_texsize:new j.Uniform2f(_e),u_mix:new j.Uniform1f(_e),u_pattern_size_a:new j.Uniform2f(_e),u_pattern_size_b:new j.Uniform2f(_e),u_scale_a:new j.Uniform1f(_e),u_scale_b:new j.Uniform1f(_e),u_pixel_coord_upper:new j.Uniform2f(_e),u_pixel_coord_lower:new j.Uniform2f(_e),u_tile_units_to_pixels:new j.Uniform1f(_e)}),terrainRaster:Ls,terrainDepth:Ls,skybox:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_sun_direction:new j.Uniform3f(_e),u_cubemap:new j.Uniform1i(_e),u_opacity:new j.Uniform1f(_e),u_temporal_offset:new j.Uniform1f(_e)}),skyboxGradient:_e=>({u_matrix:new j.UniformMatrix4f(_e),u_color_ramp:new j.Uniform1i(_e),u_center_direction:new j.Uniform3f(_e),u_radius:new j.Uniform1f(_e),u_opacity:new j.Uniform1f(_e),u_temporal_offset:new j.Uniform1f(_e)}),skyboxCapture:_e=>({u_matrix_3f:new j.UniformMatrix3f(_e),u_sun_direction:new j.Uniform3f(_e),u_sun_intensity:new j.Uniform1f(_e),u_color_tint_r:new j.Uniform4f(_e),u_color_tint_m:new j.Uniform4f(_e),u_luminance:new j.Uniform1f(_e)}),globeRaster:_e=>({u_proj_matrix:new j.UniformMatrix4f(_e),u_globe_matrix:new j.UniformMatrix4f(_e),u_normalize_matrix:new j.UniformMatrix4f(_e),u_merc_matrix:new j.UniformMatrix4f(_e),u_zoom_transition:new j.Uniform1f(_e),u_merc_center:new j.Uniform2f(_e),u_image0:new j.Uniform1i(_e),u_grid_matrix:new j.UniformMatrix3f(_e),u_frustum_tl:new j.Uniform3f(_e),u_frustum_tr:new j.Uniform3f(_e),u_frustum_br:new j.Uniform3f(_e),u_frustum_bl:new j.Uniform3f(_e),u_globe_pos:new j.Uniform3f(_e),u_globe_radius:new j.Uniform1f(_e),u_viewport:new j.Uniform2f(_e)}),globeAtmosphere:_e=>({u_frustum_tl:new j.Uniform3f(_e),u_frustum_tr:new j.Uniform3f(_e),u_frustum_br:new j.Uniform3f(_e),u_frustum_bl:new j.Uniform3f(_e),u_horizon:new j.Uniform1f(_e),u_transition:new j.Uniform1f(_e),u_fadeout_range:new j.Uniform1f(_e),u_color:new j.Uniform4f(_e),u_high_color:new j.Uniform4f(_e),u_space_color:new j.Uniform4f(_e),u_star_intensity:new j.Uniform1f(_e),u_star_density:new j.Uniform1f(_e),u_star_size:new j.Uniform1f(_e),u_temporal_offset:new j.Uniform1f(_e),u_horizon_angle:new j.Uniform1f(_e),u_rotation_matrix:new j.UniformMatrix4f(_e)})};let Pl;function hu(_e,U,te,we,Pe,Re,Be){const Ne=_e.context,qe=Ne.gl,Ke=_e.transform,Qe=_e.useProgram("collisionBox"),ut=[];let gt=0,Mt=0;for(let Qt=0;Qt<we.length;Qt++){const Kt=we[Qt],Gt=U.getTile(Kt),Yt=Gt.getBucket(te);if(!Yt)continue;const Wt=ao(Kt,Yt,Ke);let sn=Wt;Pe[0]===0&&Pe[1]===0||(sn=_e.translatePosMatrix(Wt,Gt,Pe,Re));const mn=Be?Yt.textCollisionBox:Yt.iconCollisionBox,Wn=Yt.collisionCircleArray;if(Wn.length>0){const pn=j.create(),Dn=sn;j.mul(pn,Yt.placementInvProjMatrix,Ke.glCoordMatrix),j.mul(pn,pn,Yt.placementViewportMatrix),ut.push({circleArray:Wn,circleOffset:Mt,transform:Dn,invTransform:pn,projection:Yt.getProjection()}),gt+=Wn.length/4,Mt=gt}mn&&(_e.terrain&&_e.terrain.setupElevationDraw(Gt,Qe),Qe.draw(Ne,qe.LINES,j.DepthMode.disabled,j.StencilMode.disabled,_e.colorModeForRenderPass(),j.CullFaceMode.disabled,mc(sn,Ke,Gt,Yt.getProjection()),te.id,mn.layoutVertexBuffer,mn.indexBuffer,mn.segments,null,Ke.zoom,null,[mn.collisionVertexBuffer,mn.collisionVertexBufferExt]))}if(!Be||!ut.length)return;const kt=_e.useProgram("collisionCircle"),Tt=new j.StructArrayLayout2f1f2i16;Tt.resize(4*gt),Tt._trim();let Ct=0;for(const Qt of ut)for(let Kt=0;Kt<Qt.circleArray.length/4;Kt++){const Gt=4*Kt,Yt=Qt.circleArray[Gt+0],Wt=Qt.circleArray[Gt+1],sn=Qt.circleArray[Gt+2],mn=Qt.circleArray[Gt+3];Tt.emplace(Ct++,Yt,Wt,sn,mn,0),Tt.emplace(Ct++,Yt,Wt,sn,mn,1),Tt.emplace(Ct++,Yt,Wt,sn,mn,2),Tt.emplace(Ct++,Yt,Wt,sn,mn,3)}(!Pl||Pl.length<2*gt)&&(Pl=function(Qt){const Kt=2*Qt,Gt=new j.StructArrayLayout3ui6;Gt.resize(Kt),Gt._trim();for(let Yt=0;Yt<Kt;Yt++){const Wt=6*Yt;Gt.uint16[Wt+0]=4*Yt+0,Gt.uint16[Wt+1]=4*Yt+1,Gt.uint16[Wt+2]=4*Yt+2,Gt.uint16[Wt+3]=4*Yt+2,Gt.uint16[Wt+4]=4*Yt+3,Gt.uint16[Wt+5]=4*Yt+0}return Gt}(gt));const wt=Ne.createIndexBuffer(Pl,!0),zt=Ne.createVertexBuffer(Tt,j.collisionCircleLayout.members,!0);for(const Qt of ut){const Kt={u_matrix:Qt.transform,u_inv_matrix:Qt.invTransform,u_camera_to_center_distance:(Ot=Ke).getCameraToCenterDistance(Qt.projection),u_viewport_size:[Ot.width,Ot.height]};kt.draw(Ne,qe.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,_e.colorModeForRenderPass(),j.CullFaceMode.disabled,Kt,te.id,zt,wt,j.SegmentVector.simpleSegment(0,2*Qt.circleOffset,Qt.circleArray.length,Qt.circleArray.length/2),null,Ke.zoom)}var Ot;zt.destroy(),wt.destroy()}const du=j.create();function vc(_e,U,te,we,Pe,Re){const{horizontalAlign:Be,verticalAlign:Ne}=j.getAnchorAlignment(_e),qe=-(Be-.5)*U,Ke=-(Ne-.5)*te,Qe=j.evaluateVariableOffset(_e,we);return new j.pointGeometry((qe/Pe+Qe[0])*Re,(Ke/Pe+Qe[1])*Re)}function xc(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe){const ut=_e.text.placedSymbolArray,gt=_e.text.dynamicLayoutVertexArray,Mt=_e.icon.dynamicLayoutVertexArray,kt={},Tt=so(Ne,_e.getProjection(),Re),Ct=Re.elevation,wt=_e.getProjection().upVectorScale(Ne.canonical,Re.center.lat,Re.worldSize);gt.clear();for(let zt=0;zt<ut.length;zt++){const Ot=ut.get(zt),Qt=_e.allowVerticalPlacement&&!Ot.placedOrientation,Kt=Ot.hidden||!Ot.crossTileID||Qt?null:we[Ot.crossTileID];if(Kt){const Gt=new j.pointGeometry(Ot.tileAnchorX,Ot.tileAnchorY),Yt=_e.getProjection().upVector(Ne.canonical,Gt.x,Gt.y),Wt=Ct?Ct.getAtTileOffset(Ne,Gt.x,Gt.y):0,sn=Pr([Ot.projectedAnchorX+Wt*Yt[0]*wt.metersToTile,Ot.projectedAnchorY+Wt*Yt[1]*wt.metersToTile,Ot.projectedAnchorZ+Wt*Yt[2]*wt.metersToTile],te?Tt:Be),mn=Ts(Re.getCameraToCenterDistance(_e.getProjection()),sn.signedDistanceFromCamera);let Wn=Pe.evaluateSizeForFeature(_e.textSizeData,Ke,Ot)*mn/j.ONE_EM;te&&(Wn*=_e.tilePixelRatio/qe);const{width:pn,height:Dn,anchor:Nn,textOffset:er,textScale:kn}=Kt,Zn=vc(Nn,pn,Dn,er,kn,Wn);let Ln;if(te){const tr=Gt.add(Zn),{x:pr,y:yr,z:Tr}=_e.getProjection().projectTilePoint(tr.x,tr.y,Ne.canonical);Ln=Pr([pr+Wt*Yt[0]*wt.metersToTile,yr+Wt*Yt[1]*wt.metersToTile,Tr+Wt*Yt[2]*wt.metersToTile],Be).point}else{const tr=U?Zn.rotate(-Re.angle):Zn;Ln=[sn.point[0]+tr.x,sn.point[1]+tr.y,0]}const or=_e.allowVerticalPlacement&&Ot.placedOrientation===j.WritingMode.vertical?Math.PI/2:0;for(let tr=0;tr<Ot.numGlyphs;tr++)j.addDynamicAttributes(gt,Ln[0],Ln[1],Ln[2],or);Qe&&Ot.associatedIconIndex>=0&&(kt[Ot.associatedIconIndex]={shiftedAnchor:Ln,angle:or})}else pa(Ot.numGlyphs,gt)}if(Qe){Mt.clear();const zt=_e.icon.placedSymbolArray;for(let Ot=0;Ot<zt.length;Ot++){const Qt=zt.get(Ot);if(Qt.hidden)pa(Qt.numGlyphs,Mt);else{const Kt=kt[Ot];if(Kt)for(let Gt=0;Gt<Qt.numGlyphs;Gt++)j.addDynamicAttributes(Mt,Kt.shiftedAnchor[0],Kt.shiftedAnchor[1],Kt.shiftedAnchor[2],Kt.angle);else pa(Qt.numGlyphs,Mt)}}_e.icon.dynamicLayoutVertexBuffer.updateData(Mt)}_e.text.dynamicLayoutVertexBuffer.updateData(gt)}function pu(_e,U,te){return te.iconsInText&&U?"symbolTextAndIcon":_e?"symbolSDF":"symbolIcon"}function js(_e,U,te,we,Pe,Re,Be,Ne,qe,Ke,Qe,ut){const gt=_e.context,Mt=gt.gl,kt=_e.transform,Tt=Ne==="map",Ct=qe==="map",wt=Tt&&te.layout.get("symbol-placement")!=="point",zt=Tt&&!Ct&&!wt,Ot=te.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Qt=!1;const Kt=_e.depthModeForSublayer(0,j.DepthMode.ReadOnly),Gt=[j.mercatorXfromLng(kt.center.lng),j.mercatorYfromLat(kt.center.lat)],Yt=te.layout.get("text-variable-anchor"),Wt=kt.projection.name==="globe",sn=[],mn=[0,-1,0];let Wn=mn;!Wt&&!kt.mercatorFromTransition||Tt||(Wn=function(pn){const Dn=pn._camera.getWorldToCamera(pn.worldSize,1),Nn=j.multiply([],Dn,pn.globeMatrix);j.invert(Nn,Nn);const er=[0,0,0],kn=[0,1,0,0];return j.transformMat4$1(kn,kn,Nn),er[0]=kn[0],er[1]=kn[1],er[2]=kn[2],j.normalize(er,er),er}(kt));for(const pn of we){const Dn=U.getTile(pn),Nn=Dn.getBucket(te);if(!Nn||Nn.projection.name==="mercator"&&Wt)continue;const er=Pe?Nn.text:Nn.icon;if(!er||Nn.fullyClipped||!er.segments.get().length)continue;const kn=er.programConfigurations.get(te.id),Zn=Pe||Nn.sdfIcons,Ln=Pe?Nn.textSizeData:Nn.iconSizeData,or=Ct||kt.pitch!==0,tr=j.evaluateSizeForZoom(Ln,kt.zoom);let pr,yr,Tr,Vr,_r=[0,0],Ir=null;if(Pe){if(yr=Dn.glyphAtlasTexture,Tr=Mt.LINEAR,pr=Dn.glyphAtlasTexture.size,Nn.iconsInText){_r=Dn.imageAtlasTexture.size,Ir=Dn.imageAtlasTexture;const no=Ln.kind==="composite"||Ln.kind==="camera";Vr=or||_e.options.rotating||_e.options.zooming||no?Mt.LINEAR:Mt.NEAREST}}else{const no=te.layout.get("icon-size").constantOr(0)!==1||Nn.iconsNeedLinear;yr=Dn.imageAtlasTexture,Tr=Zn||_e.options.rotating||_e.options.zooming||no||or?Mt.LINEAR:Mt.NEAREST,pr=Dn.imageAtlasTexture.size}const Zr=Nn.projection.name==="globe",ci=Zr?Wn:mn,Ai=Zr?j.globeToMercatorTransition(kt.zoom):0,oi=so(pn,Nn.getProjection(),kt),Wi=kt.calculatePixelsToTileUnitsMatrix(Dn),Eo=Or(oi,Dn.tileID.canonical,Ct,Tt,kt,Nn.getProjection(),Wi),oa=_e.terrain&&Ct&&wt?j.invert(j.create(),Eo):du,_i=Oo(oi,Dn.tileID.canonical,Ct,Tt,kt,Nn.getProjection(),Wi),vi=Yt&&Nn.hasTextData(),Dr=te.layout.get("icon-text-fit")!=="none"&&vi&&Nn.hasIconData();if(wt){const no=kt.elevation,Ba=no?no.getAtTileOffsetFunc(pn,kt.center.lat,kt.worldSize,Nn.getProjection()):ol=>[0,0,0],qo=Nr(oi,Dn.tileID.canonical,Ct,Tt,kt,Nn.getProjection(),Wi);ks(Nn,oi,_e,Pe,qo,_i,Ct,Ke,Ba,pn)}const Di=wt||Pe&&Yt||Dr,zi=_e.translatePosMatrix(oi,Dn,Re,Be),ui=Di?du:Eo,Ki=_e.translatePosMatrix(_i,Dn,Re,Be,!0),za=Nn.getProjection().createInversionMatrix(kt,pn.canonical),to=[];_e.terrain&&Ct&&to.push("PITCH_WITH_MAP_TERRAIN"),Zr&&to.push("PROJECTION_GLOBE_VIEW"),Di&&to.push("PROJECTED_POS_ON_VIEWPORT");const go=Zn&&te.paint.get(Pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $a;$a=Zn?Nn.iconsInText?Pa(Ln.kind,tr,zt,Ct,_e,zi,ui,Ki,pr,_r,pn,Ai,Gt,za,ci,Nn.getProjection()):yc(Ln.kind,tr,zt,Ct,_e,zi,ui,Ki,Pe,pr,!0,pn,Ai,Gt,za,ci,Nn.getProjection()):es(Ln.kind,tr,zt,Ct,_e,zi,ui,Ki,Pe,pr,pn,Ai,Gt,za,ci,Nn.getProjection());const La={program:_e.useProgram(pu(Zn,Pe,Nn),kn,to),buffers:er,uniformValues:$a,atlasTexture:yr,atlasTextureIcon:Ir,atlasInterpolation:Tr,atlasInterpolationIcon:Vr,isSDF:Zn,hasHalo:go,tile:Dn,labelPlaneMatrixInv:oa};if(Ot&&Nn.canOverlap){Qt=!0;const no=er.segments.get();for(const Ba of no)sn.push({segments:new j.SegmentVector([Ba]),sortKey:Ba.sortKey,state:La})}else sn.push({segments:er.segments,sortKey:0,state:La})}Qt&&sn.sort((pn,Dn)=>pn.sortKey-Dn.sortKey);for(const pn of sn){const Dn=pn.state;if(_e.terrain&&_e.terrain.setupElevationDraw(Dn.tile,Dn.program,{useDepthForOcclusion:!Wt,labelPlaneMatrixInv:Dn.labelPlaneMatrixInv}),gt.activeTexture.set(Mt.TEXTURE0),Dn.atlasTexture.bind(Dn.atlasInterpolation,Mt.CLAMP_TO_EDGE),Dn.atlasTextureIcon&&(gt.activeTexture.set(Mt.TEXTURE1),Dn.atlasTextureIcon&&Dn.atlasTextureIcon.bind(Dn.atlasInterpolationIcon,Mt.CLAMP_TO_EDGE)),Dn.isSDF){const Nn=Dn.uniformValues;Dn.hasHalo&&(Nn.u_is_halo=1,bc(Dn.buffers,pn.segments,te,_e,Dn.program,Kt,Qe,ut,Nn)),Nn.u_is_halo=0}bc(Dn.buffers,pn.segments,te,_e,Dn.program,Kt,Qe,ut,Dn.uniformValues)}}function bc(_e,U,te,we,Pe,Re,Be,Ne,qe){const Ke=we.context,Qe=[_e.dynamicLayoutVertexBuffer,_e.opacityVertexBuffer,_e.globeExtVertexBuffer];Pe.draw(Ke,Ke.gl.TRIANGLES,Re,Be,Ne,j.CullFaceMode.disabled,qe,te.id,_e.layoutVertexBuffer,_e.indexBuffer,U,te.paint,we.transform.zoom,_e.programConfigurations.get(te.id),Qe)}function Ol(_e,U,te,we,Pe,Re,Be){const Ne=_e.context.gl,qe=te.paint.get("fill-pattern"),Ke=qe&&qe.constantOr(1),Qe=te.getCrossfadeParameters();let ut,gt,Mt,kt,Tt;Be?(gt=Ke&&!te.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ut=Ne.LINES):(gt=Ke?"fillPattern":"fill",ut=Ne.TRIANGLES);for(const Ct of we){const wt=U.getTile(Ct);if(Ke&&!wt.patternsLoaded())continue;const zt=wt.getBucket(te);if(!zt)continue;_e.prepareDrawTile();const Ot=zt.programConfigurations.get(te.id),Qt=_e.useProgram(gt,Ot);Ke&&(_e.context.activeTexture.set(Ne.TEXTURE0),wt.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Ot.updatePaintBuffers(Qe));const Kt=qe.constantOr(null);if(Kt&&wt.imageAtlas){const Yt=wt.imageAtlas,Wt=Yt.patternPositions[Kt.to.toString()],sn=Yt.patternPositions[Kt.from.toString()];Wt&&sn&&Ot.setConstantPatternPositions(Wt,sn)}const Gt=_e.translatePosMatrix(Ct.projMatrix,wt,te.paint.get("fill-translate"),te.paint.get("fill-translate-anchor"));if(Be){kt=zt.indexBuffer2,Tt=zt.segments2;const Yt=_e.terrain&&_e.terrain.renderingToTexture?_e.terrain.drapeBufferSize:[Ne.drawingBufferWidth,Ne.drawingBufferHeight];Mt=gt==="fillOutlinePattern"&&Ke?Ma(Gt,_e,Qe,wt,Yt):Go(Gt,Yt)}else kt=zt.indexBuffer,Tt=zt.segments,Mt=Ke?Cl(Gt,_e,Qe,wt):Fs(Gt);_e.prepareDrawProgram(_e.context,Qt,Ct.toUnwrapped()),Qt.draw(_e.context,ut,Pe,_e.stencilModeForClipping(Ct),Re,j.CullFaceMode.disabled,Mt,te.id,zt.layoutVertexBuffer,kt,Tt,te.paint,_e.transform.zoom,Ot)}}function ea(_e,U,te,we,Pe,Re,Be){const Ne=_e.context,qe=Ne.gl,Ke=_e.transform,Qe=te.paint.get("fill-extrusion-pattern"),ut=Qe.constantOr(1),gt=te.getCrossfadeParameters(),Mt=te.paint.get("fill-extrusion-opacity"),kt=[te.paint.get("fill-extrusion-ambient-occlusion-intensity"),te.paint.get("fill-extrusion-ambient-occlusion-radius")],Tt=te.layout.get("fill-extrusion-edge-radius"),Ct=Ke.projection.name==="globe"?j.fillExtrusionHeightLift():0,wt=Ke.projection.name==="globe",zt=wt?j.globeToMercatorTransition(Ke.zoom):0,Ot=[j.mercatorXfromLng(Ke.center.lng),j.mercatorYfromLat(Ke.center.lat)],Qt=[];wt&&(Qt.push("PROJECTION_GLOBE_VIEW"),_e.style.terrainSetForDrapingOnly()&&Qt.push("TERRAIN")),kt[0]>0&&Qt.push("FAUX_AO");for(const Kt of we){const Gt=U.getTile(Kt),Yt=Gt.getBucket(te);if(!Yt||Yt.projection.name!==Ke.projection.name)continue;const Wt=Yt.programConfigurations.get(te.id),sn=_e.useProgram(ut?"fillExtrusionPattern":"fillExtrusion",Wt,Qt);if(_e.terrain){const kn=_e.terrain;if(_e.style.terrainSetForDrapingOnly())kn.setupElevationDraw(Gt,sn,{useMeterToDem:!0});else{if(!Yt.enableTerrain)continue;if(kn.setupElevationDraw(Gt,sn,{useMeterToDem:!0}),Us(Ne,U,Kt,Yt,te,kn),!Yt.centroidVertexBuffer){const Zn=sn.attributes.a_centroid_pos;Zn!==void 0&&qe.vertexAttrib2f(Zn,0,0)}}}ut&&(_e.context.activeTexture.set(qe.TEXTURE0),Gt.imageAtlasTexture.bind(qe.LINEAR,qe.CLAMP_TO_EDGE),Wt.updatePaintBuffers(gt));const mn=Qe.constantOr(null);if(mn&&Gt.imageAtlas){const kn=Gt.imageAtlas,Zn=kn.patternPositions[mn.to.toString()],Ln=kn.patternPositions[mn.from.toString()];Zn&&Ln&&Wt.setConstantPatternPositions(Zn,Ln)}const Wn=_e.translatePosMatrix(Kt.projMatrix,Gt,te.paint.get("fill-extrusion-translate"),te.paint.get("fill-extrusion-translate-anchor")),pn=Ke.projection.createInversionMatrix(Ke,Kt.canonical),Dn=te.paint.get("fill-extrusion-vertical-gradient"),Nn=ut?iu(Wn,_e,Dn,Mt,kt,Tt,Kt,gt,Gt,Ct,zt,Ot,pn):Ja(Wn,_e,Dn,Mt,kt,Tt,Kt,Ct,zt,Ot,pn);_e.prepareDrawProgram(Ne,sn,Kt.toUnwrapped());const er=[];_e.terrain&&er.push(Yt.centroidVertexBuffer),wt&&er.push(Yt.layoutVertexExtBuffer),sn.draw(Ne,Ne.gl.TRIANGLES,Pe,Re,Be,j.CullFaceMode.backCCW,Nn,te.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,te.paint,_e.transform.zoom,Wt,er)}}function Us(_e,U,te,we,Pe,Re){const Be=[wt=>{let zt=wt.canonical.x-1,Ot=wt.wrap;return zt<0&&(zt=(1<<wt.canonical.z)-1,Ot--),new j.OverscaledTileID(wt.overscaledZ,Ot,wt.canonical.z,zt,wt.canonical.y)},wt=>{let zt=wt.canonical.x+1,Ot=wt.wrap;return zt===1<<wt.canonical.z&&(zt=0,Ot++),new j.OverscaledTileID(wt.overscaledZ,Ot,wt.canonical.z,zt,wt.canonical.y)},wt=>new j.OverscaledTileID(wt.overscaledZ,wt.wrap,wt.canonical.z,wt.canonical.x,(wt.canonical.y===0?1<<wt.canonical.z:wt.canonical.y)-1),wt=>new j.OverscaledTileID(wt.overscaledZ,wt.wrap,wt.canonical.z,wt.canonical.x,wt.canonical.y===(1<<wt.canonical.z)-1?0:wt.canonical.y+1)],Ne=wt=>{const zt=U.getSource().minzoom,Ot=Kt=>{const Gt=U.getTileByID(Kt);if(Gt&&Gt.hasData())return Gt.getBucket(Pe)},Qt=[0,-1,1];for(const Kt of Qt){if(wt.overscaledZ+Kt<zt)continue;const Gt=Ot(wt.calculateScaledKey(wt.overscaledZ+Kt));if(Gt)return Gt}},qe=[0,0,0],Ke=(wt,zt)=>(qe[0]=Math.min(wt.min.y,zt.min.y),qe[1]=Math.max(wt.max.y,zt.max.y),qe[2]=j.EXTENT-zt.min.x>wt.max.x?zt.min.x-j.EXTENT:wt.max.x,qe),Qe=(wt,zt)=>(qe[0]=Math.min(wt.min.x,zt.min.x),qe[1]=Math.max(wt.max.x,zt.max.x),qe[2]=j.EXTENT-zt.min.y>wt.max.y?zt.min.y-j.EXTENT:wt.max.y,qe),ut=[(wt,zt)=>Ke(wt,zt),(wt,zt)=>Ke(zt,wt),(wt,zt)=>Qe(wt,zt),(wt,zt)=>Qe(zt,wt)],gt=new j.pointGeometry(0,0);let Mt,kt,Tt;const Ct=(wt,zt,Ot,Qt,Kt)=>{const Gt=[[Qt?Ot:wt,Qt?wt:Ot,0],[Qt?Ot:zt,Qt?zt:Ot,0]],Yt=Kt<0?j.EXTENT+Kt:Kt,Wt=[Qt?Yt:(wt+zt)/2,Qt?(wt+zt)/2:Yt,0];return Ot===0&&Kt<0||Ot!==0&&Kt>0?Re.getForTilePoints(Tt,[Wt],!0,kt):Gt.push(Wt),Re.getForTilePoints(te,Gt,!0,Mt),Math.max(Gt[0][2],Gt[1][2],Wt[2])/Re.exaggeration()};for(let wt=0;wt<4;wt++){const zt=(wt<2?1:5)-wt,Ot=we.borders[wt];if(Ot.length===0)continue;const Qt=Tt=Be[wt](te),Kt=Ne(Qt);if(!(Kt&&Kt instanceof j.FillExtrusionBucket&&Kt.enableTerrain)||we.borderDoneWithNeighborZ[wt]===Kt.canonical.z&&Kt.borderDoneWithNeighborZ[zt]===we.canonical.z||(kt=Re.findDEMTileFor(Qt),!kt||!kt.dem))continue;if(!Mt){const sn=Re.findDEMTileFor(te);if(!sn||!sn.dem)return;Mt=sn}const Gt=Kt.borders[zt];let Yt=0;const Wt=Kt.borderDoneWithNeighborZ[zt]!==we.canonical.z;if(we.canonical.z===Kt.canonical.z){for(let sn=0;sn<Ot.length;sn++){const mn=we.featuresOnBorder[Ot[sn]],Wn=mn.borders[wt];let pn;for(;Yt<Gt.length&&(pn=Kt.featuresOnBorder[Gt[Yt]],!(pn.borders[zt][1]>Wn[0]+3));)Wt&&Kt.encodeCentroid(void 0,pn,!1),Yt++;if(pn&&Yt<Gt.length){const Dn=Yt;let Nn=0;for(;!(pn.borders[zt][0]>Wn[1]-3)&&(Nn++,++Yt!==Gt.length);)pn=Kt.featuresOnBorder[Gt[Yt]];if(pn=Kt.featuresOnBorder[Gt[Dn]],mn.intersectsCount()>1||pn.intersectsCount()>1||Nn!==1){Nn!==1&&(Yt=Dn),we.encodeCentroid(void 0,mn,!1),Wt&&Kt.encodeCentroid(void 0,pn,!1);continue}const er=ut[wt](mn,pn),kn=wt%2?j.EXTENT-1:0;gt.x=Ct(er[0],Math.min(j.EXTENT-1,er[1]),kn,wt<2,er[2]),gt.y=0,we.encodeCentroid(gt,mn,!1),Wt&&Kt.encodeCentroid(gt,pn,!1)}else we.encodeCentroid(void 0,mn,!1)}we.borderDoneWithNeighborZ[wt]=Kt.canonical.z,we.needsCentroidUpdate=!0,Wt&&(Kt.borderDoneWithNeighborZ[zt]=we.canonical.z,Kt.needsCentroidUpdate=!0)}else{for(const sn of Ot)we.encodeCentroid(void 0,we.featuresOnBorder[sn],!1);if(Wt){for(const sn of Gt)Kt.encodeCentroid(void 0,Kt.featuresOnBorder[sn],!1);Kt.borderDoneWithNeighborZ[zt]=we.canonical.z,Kt.needsCentroidUpdate=!0}we.borderDoneWithNeighborZ[wt]=Kt.canonical.z,we.needsCentroidUpdate=!0}}(we.needsCentroidUpdate||!we.centroidVertexBuffer&&we.centroidVertexArray.length!==0)&&we.uploadCentroid(_e)}const fu=new j.Color(1,0,0,1),Oa=new j.Color(0,1,0,1),ts=new j.Color(0,0,1,1),_u=new j.Color(1,0,1,1),Ac=new j.Color(0,1,1,1);function Jr(_e,U,te){const we=_e.context,Pe=_e.transform,Re=we.gl,Be=Pe.projection.name==="globe",Ne=Be?["PROJECTION_GLOBE_VIEW"]:null;let qe=te.projMatrix;if(Be&&j.globeToMercatorTransition(Pe.zoom)>0){const mn=j.transitionTileAABBinECEF(te.canonical,Pe),Wn=j.globeDenormalizeECEF(mn);qe=j.multiply(new Float32Array(16),Pe.globeMatrix,Wn),j.multiply(qe,Pe.projMatrix,qe)}const Ke=_e.useProgram("debug",null,Ne),Qe=U.getTileByID(te.key);_e.terrain&&_e.terrain.setupElevationDraw(Qe,Ke);const ut=j.DepthMode.disabled,gt=j.StencilMode.disabled,Mt=_e.colorModeForRenderPass(),kt="$debug";we.activeTexture.set(Re.TEXTURE0),_e.emptyTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Be?Qe._makeGlobeTileDebugBuffers(_e.context,Pe):Qe._makeDebugTileBoundsBuffers(_e.context,Pe.projection);const Tt=Qe._tileDebugBuffer||_e.debugBuffer,Ct=Qe._tileDebugIndexBuffer||_e.debugIndexBuffer,wt=Qe._tileDebugSegments||_e.debugSegments;Ke.draw(we,Re.LINE_STRIP,ut,gt,Mt,j.CullFaceMode.disabled,su(qe,j.Color.red),kt,Tt,Ct,wt,null,null,null,[Qe._globeTileDebugBorderBuffer]);const zt=Qe.latestRawTileData,Ot=Math.floor((zt&&zt.byteLength||0)/1024),Qt=U.getTile(te).tileSize,Kt=512/Math.min(Qt,512)*(te.overscaledZ/Pe.zoom)*.5;let Gt=te.canonical.toString();te.overscaledZ!==te.canonical.z&&(Gt+=` => ${te.overscaledZ}`),Gt+=` ${Ot}kb`,function(mn,Wn){mn.initDebugOverlayCanvas();const pn=mn.debugOverlayCanvas,Dn=mn.context.gl,Nn=mn.debugOverlayCanvas.getContext("2d");Nn.clearRect(0,0,pn.width,pn.height),Nn.shadowColor="white",Nn.shadowBlur=2,Nn.lineWidth=1.5,Nn.strokeStyle="white",Nn.textBaseline="top",Nn.font="bold 36px Open Sans, sans-serif",Nn.fillText(Wn,5,5),Nn.strokeText(Wn,5,5),mn.debugOverlayTexture.update(pn),mn.debugOverlayTexture.bind(Dn.LINEAR,Dn.CLAMP_TO_EDGE)}(_e,Gt);const Yt=Qe._tileDebugTextBuffer||_e.debugBuffer,Wt=Qe._tileDebugTextIndexBuffer||_e.quadTriangleIndexBuffer,sn=Qe._tileDebugTextSegments||_e.debugSegments;Ke.draw(we,Re.TRIANGLES,ut,gt,j.ColorMode.alphaBlended,j.CullFaceMode.disabled,su(qe,j.Color.transparent,Kt),kt,Yt,Wt,sn,null,null,null,[Qe._globeTileDebugTextBuffer])}function Vs(_e,U,te,we){Gs(_e,0,U+te/2,_e.transform.width,te,we)}function mu(_e,U,te,we){Gs(_e,U-te/2,0,te,_e.transform.height,we)}function Gs(_e,U,te,we,Pe,Re){const Be=_e.context,Ne=Be.gl;Ne.enable(Ne.SCISSOR_TEST),Ne.scissor(U*j.exported.devicePixelRatio,te*j.exported.devicePixelRatio,we*j.exported.devicePixelRatio,Pe*j.exported.devicePixelRatio),Be.clear({color:Re}),Ne.disable(Ne.SCISSOR_TEST)}const qs=j.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:ch}=qs;function ga(_e,U,te,we){_e.emplaceBack(U,te,we)}class wc{constructor(U){this.vertexArray=new j.StructArrayLayout3f12,this.indices=new j.StructArrayLayout3ui6,ga(this.vertexArray,-1,-1,1),ga(this.vertexArray,1,-1,1),ga(this.vertexArray,-1,1,1),ga(this.vertexArray,1,1,1),ga(this.vertexArray,-1,-1,-1),ga(this.vertexArray,1,-1,-1),ga(this.vertexArray,-1,1,-1),ga(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=U.createVertexBuffer(this.vertexArray,ch),this.indexBuffer=U.createIndexBuffer(this.indices),this.segment=j.SegmentVector.simpleSegment(0,0,36,12)}}function ns(_e,U,te,we,Pe,Re){const Be=_e.gl,Ne=U.paint.get("sky-atmosphere-color"),qe=U.paint.get("sky-atmosphere-halo-color"),Ke=U.paint.get("sky-atmosphere-sun-intensity"),Qe=((ut,gt,Mt,kt,Tt)=>({u_matrix_3f:ut,u_sun_direction:gt,u_sun_intensity:Mt,u_color_tint_r:[kt.r,kt.g,kt.b,kt.a],u_color_tint_m:[Tt.r,Tt.g,Tt.b,Tt.a],u_luminance:5e-5}))(j.fromMat4(j.create$1(),we),Pe,Ke,Ne,qe);Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_CUBE_MAP_POSITIVE_X+Re,U.skyboxTexture,0),te.draw(_e,Be.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.frontCW,Qe,"skyboxCapture",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}const Ec=j.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Rl{constructor(U){const te=new j.StructArrayLayout5f20;te.emplaceBack(-1,1,1,0,0),te.emplaceBack(1,1,1,1,0),te.emplaceBack(1,-1,1,1,1),te.emplaceBack(-1,-1,1,0,1);const we=new j.StructArrayLayout3ui6;we.emplaceBack(0,1,2),we.emplaceBack(2,3,0),this.vertexBuffer=U.createVertexBuffer(te,Ec.members),this.indexBuffer=U.createIndexBuffer(we),this.segments=j.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const rs={symbol:function(_e,U,te,we,Pe){if(_e.renderPass!=="translucent")return;const Re=j.StencilMode.disabled,Be=_e.colorModeForRenderPass();te.layout.get("text-variable-anchor")&&function(Ne,qe,Ke,Qe,ut,gt,Mt){const kt=qe.transform,Tt=ut==="map",Ct=gt==="map";for(const wt of Ne){const zt=Qe.getTile(wt),Ot=zt.getBucket(Ke);if(!Ot||!Ot.text||!Ot.text.segments.get().length)continue;const Qt=j.evaluateSizeForZoom(Ot.textSizeData,kt.zoom),Kt=so(wt,Ot.getProjection(),kt),Gt=kt.calculatePixelsToTileUnitsMatrix(zt),Yt=Or(Kt,zt.tileID.canonical,Ct,Tt,kt,Ot.getProjection(),Gt),Wt=Ke.layout.get("icon-text-fit")!=="none"&&Ot.hasIconData();if(Qt){const sn=Math.pow(2,kt.zoom-zt.tileID.overscaledZ);xc(Ot,Tt,Ct,Mt,j.symbolSize,kt,Yt,wt,sn,Qt,Wt)}}}(we,_e,te,U,te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),Pe),te.paint.get("icon-opacity").constantOr(1)!==0&&js(_e,U,te,we,!1,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),te.layout.get("icon-rotation-alignment"),te.layout.get("icon-pitch-alignment"),te.layout.get("icon-keep-upright"),Re,Be),te.paint.get("text-opacity").constantOr(1)!==0&&js(_e,U,te,we,!0,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),te.layout.get("text-rotation-alignment"),te.layout.get("text-pitch-alignment"),te.layout.get("text-keep-upright"),Re,Be),U.map.showCollisionBoxes&&(hu(_e,U,te,we,te.paint.get("text-translate"),te.paint.get("text-translate-anchor"),!0),hu(_e,U,te,we,te.paint.get("icon-translate"),te.paint.get("icon-translate-anchor"),!1))},circle:function(_e,U,te,we){if(_e.renderPass!=="translucent")return;const Pe=te.paint.get("circle-opacity"),Re=te.paint.get("circle-stroke-width"),Be=te.paint.get("circle-stroke-opacity"),Ne=te.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Pe.constantOr(1)===0&&(Re.constantOr(1)===0||Be.constantOr(1)===0))return;const qe=_e.context,Ke=qe.gl,Qe=_e.transform,ut=_e.depthModeForSublayer(0,j.DepthMode.ReadOnly),gt=j.StencilMode.disabled,Mt=_e.colorModeForRenderPass(),kt=Qe.projection.name==="globe",Tt=[j.mercatorXfromLng(Qe.center.lng),j.mercatorYfromLat(Qe.center.lat)],Ct=[];for(let zt=0;zt<we.length;zt++){const Ot=we[zt],Qt=U.getTile(Ot),Kt=Qt.getBucket(te);if(!Kt||Kt.projection.name!==Qe.projection.name)continue;const Gt=Kt.programConfigurations.get(te.id),Yt=au(te);kt&&Yt.push("PROJECTION_GLOBE_VIEW");const Wt=_e.useProgram("circle",Gt,Yt),sn=Kt.layoutVertexBuffer,mn=Kt.globeExtVertexBuffer,Wn=Kt.indexBuffer,pn=Qe.projection.createInversionMatrix(Qe,Ot.canonical),Dn={programConfiguration:Gt,program:Wt,layoutVertexBuffer:sn,globeExtVertexBuffer:mn,indexBuffer:Wn,uniformValues:_c(_e,Ot,Qt,pn,Tt,te),tile:Qt};if(Ne){const Nn=Kt.segments.get();for(const er of Nn)Ct.push({segments:new j.SegmentVector([er]),sortKey:er.sortKey,state:Dn})}else Ct.push({segments:Kt.segments,sortKey:0,state:Dn})}Ne&&Ct.sort((zt,Ot)=>zt.sortKey-Ot.sortKey);const wt={useDepthForOcclusion:!kt};for(const zt of Ct){const{programConfiguration:Ot,program:Qt,layoutVertexBuffer:Kt,globeExtVertexBuffer:Gt,indexBuffer:Yt,uniformValues:Wt,tile:sn}=zt.state,mn=zt.segments;_e.terrain&&_e.terrain.setupElevationDraw(sn,Qt,wt),_e.prepareDrawProgram(qe,Qt,sn.tileID.toUnwrapped()),Qt.draw(qe,Ke.TRIANGLES,ut,gt,Mt,j.CullFaceMode.disabled,Wt,te.id,Kt,Yt,mn,te.paint,Qe.zoom,Ot,[Gt])}},heatmap:function(_e,U,te,we){if(te.paint.get("heatmap-opacity")!==0)if(_e.renderPass==="offscreen"){const Pe=_e.context,Re=Pe.gl,Be=j.StencilMode.disabled,Ne=new j.ColorMode([Re.ONE,Re.ONE],j.Color.transparent,[!0,!0,!0,!0]);(function(Mt,kt,Tt,Ct){const wt=Mt.gl,zt=kt.width*Ct,Ot=kt.height*Ct;Mt.activeTexture.set(wt.TEXTURE1),Mt.viewport.set([0,0,zt,Ot]);let Qt=Tt.heatmapFbo;if(!Qt||Qt&&(Qt.width!==zt||Qt.height!==Ot)){Qt&&Qt.destroy();const Kt=wt.createTexture();wt.bindTexture(wt.TEXTURE_2D,Kt),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_S,wt.CLAMP_TO_EDGE),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_T,wt.CLAMP_TO_EDGE),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MIN_FILTER,wt.LINEAR),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MAG_FILTER,wt.LINEAR),Qt=Tt.heatmapFbo=Mt.createFramebuffer(zt,Ot,!1),function(Gt,Yt,Wt,sn,mn,Wn){const pn=Gt.gl;pn.texImage2D(pn.TEXTURE_2D,0,pn.RGBA,mn,Wn,0,pn.RGBA,Gt.extRenderToTextureHalfFloat?Gt.extTextureHalfFloat.HALF_FLOAT_OES:pn.UNSIGNED_BYTE,null),sn.colorAttachment.set(Wt)}(Mt,0,Kt,Qt,zt,Ot)}else wt.bindTexture(wt.TEXTURE_2D,Qt.colorAttachment.get()),Mt.bindFramebuffer.set(Qt.framebuffer)})(Pe,_e,te,_e.transform.projection.name==="globe"?.5:.25),Pe.clear({color:j.Color.transparent});const qe=_e.transform,Ke=qe.projection.name==="globe",Qe=Ke?["PROJECTION_GLOBE_VIEW"]:null,ut=Ke?j.CullFaceMode.frontCCW:j.CullFaceMode.disabled,gt=[j.mercatorXfromLng(qe.center.lng),j.mercatorYfromLat(qe.center.lat)];for(let Mt=0;Mt<we.length;Mt++){const kt=we[Mt];if(U.hasRenderableParent(kt))continue;const Tt=U.getTile(kt),Ct=Tt.getBucket(te);if(!Ct||Ct.projection.name!==qe.projection.name)continue;const wt=Ct.programConfigurations.get(te.id),zt=_e.useProgram("heatmap",wt,Qe),{zoom:Ot}=_e.transform;_e.terrain&&_e.terrain.setupElevationDraw(Tt,zt),_e.prepareDrawProgram(Pe,zt,kt.toUnwrapped());const Qt=qe.projection.createInversionMatrix(qe,kt.canonical);zt.draw(Pe,Re.TRIANGLES,j.DepthMode.disabled,Be,Ne,ut,ih(_e,kt,Tt,Qt,gt,Ot,te.paint.get("heatmap-intensity")),te.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,te.paint,_e.transform.zoom,wt,Ke?[Ct.globeExtVertexBuffer]:null)}Pe.viewport.set([0,0,_e.width,_e.height])}else _e.renderPass==="translucent"&&(_e.context.setColorMode(_e.colorModeForRenderPass()),function(Pe,Re){const Be=Pe.context,Ne=Be.gl,qe=Re.heatmapFbo;if(!qe)return;Be.activeTexture.set(Ne.TEXTURE0),Ne.bindTexture(Ne.TEXTURE_2D,qe.colorAttachment.get()),Be.activeTexture.set(Ne.TEXTURE1);let Ke=Re.colorRampTexture;Ke||(Ke=Re.colorRampTexture=new j.Texture(Be,Re.colorRamp,Ne.RGBA)),Ke.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Pe.useProgram("heatmapTexture").draw(Be,Ne.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,Pe.colorModeForRenderPass(),j.CullFaceMode.disabled,((Qe,ut,gt,Mt)=>({u_image:0,u_color_ramp:1,u_opacity:ut.paint.get("heatmap-opacity")}))(0,Re),Re.id,Pe.viewportBuffer,Pe.quadTriangleIndexBuffer,Pe.viewportSegments,Re.paint,Pe.transform.zoom)}(_e,te))},line:function(_e,U,te,we){if(_e.renderPass!=="translucent")return;const Pe=te.paint.get("line-opacity"),Re=te.paint.get("line-width");if(Pe.constantOr(1)===0||Re.constantOr(1)===0)return;const Be=_e.depthModeForSublayer(0,j.DepthMode.ReadOnly),Ne=_e.colorModeForRenderPass(),qe=_e.terrain&&_e.terrain.renderingToTexture?1:j.exported.devicePixelRatio,Ke=te.paint.get("line-dasharray"),Qe=Ke.constantOr(1),ut=te.layout.get("line-cap"),gt=te.paint.get("line-pattern"),Mt=gt.constantOr(1),kt=te.paint.get("line-gradient"),Tt=te.getCrossfadeParameters(),Ct=Mt?"linePattern":"line",wt=_e.context,zt=wt.gl,Ot=(Kt=>{const Gt=[];Ml(Kt)&&Gt.push("RENDER_LINE_DASH"),Kt.paint.get("line-gradient")&&Gt.push("RENDER_LINE_GRADIENT");const Yt=Kt.paint.get("line-trim-offset");Yt[0]===0&&Yt[1]===0||Gt.push("RENDER_LINE_TRIM_OFFSET");const Wt=Kt.paint.get("line-pattern").constantOr(1),sn=Kt.paint.get("line-opacity").constantOr(1)!==1;return!Wt&&sn&&Gt.push("RENDER_LINE_ALPHA_DISCARD"),Gt})(te);let Qt=Ot.includes("RENDER_LINE_ALPHA_DISCARD");_e.terrain&&_e.terrain.clipOrMaskOverlapStencilType()&&(Qt=!1);for(const Kt of we){const Gt=U.getTile(Kt);if(Mt&&!Gt.patternsLoaded())continue;const Yt=Gt.getBucket(te);if(!Yt)continue;_e.prepareDrawTile();const Wt=Yt.programConfigurations.get(te.id),sn=_e.useProgram(Ct,Wt,Ot),mn=gt.constantOr(null);if(mn&&Gt.imageAtlas){const Ln=Gt.imageAtlas,or=Ln.patternPositions[mn.to.toString()],tr=Ln.patternPositions[mn.from.toString()];or&&tr&&Wt.setConstantPatternPositions(or,tr)}const Wn=Ke.constantOr(null),pn=ut.constantOr(null);if(!Mt&&Wn&&pn&&Gt.lineAtlas){const Ln=Gt.lineAtlas,or=Ln.getDash(Wn.to,pn),tr=Ln.getDash(Wn.from,pn);or&&tr&&Wt.setConstantPatternPositions(or,tr)}let[Dn,Nn]=te.paint.get("line-trim-offset");(pn==="round"||pn==="square")&&Dn!==Nn&&(Dn===0&&(Dn-=1),Nn===1&&(Nn+=1));const er=_e.terrain?Kt.projMatrix:null,kn=Mt?oh(_e,Gt,te,Tt,er,qe):Sl(_e,Gt,te,Tt,er,Yt.lineClipsArray.length,qe,[Dn,Nn]);if(kt){const Ln=Yt.gradients[te.id];let or=Ln.texture;if(te.gradientVersion!==Ln.version){let tr=256;if(te.stepInterpolant){const pr=U.getSource().maxzoom,yr=Kt.canonical.z===pr?Math.ceil(1<<_e.transform.maxZoom-Kt.canonical.z):1;tr=j.clamp(j.nextPowerOfTwo(Yt.maxLineLength/j.EXTENT*1024*yr),256,wt.maxTextureSize)}Ln.gradient=j.renderColorRamp({expression:te.gradientExpression(),evaluationKey:"lineProgress",resolution:tr,image:Ln.gradient||void 0,clips:Yt.lineClipsArray}),Ln.texture?Ln.texture.update(Ln.gradient):Ln.texture=new j.Texture(wt,Ln.gradient,zt.RGBA),Ln.version=te.gradientVersion,or=Ln.texture}wt.activeTexture.set(zt.TEXTURE1),or.bind(te.stepInterpolant?zt.NEAREST:zt.LINEAR,zt.CLAMP_TO_EDGE)}Qe&&(wt.activeTexture.set(zt.TEXTURE0),Gt.lineAtlasTexture.bind(zt.LINEAR,zt.REPEAT),Wt.updatePaintBuffers(Tt)),Mt&&(wt.activeTexture.set(zt.TEXTURE0),Gt.imageAtlasTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE),Wt.updatePaintBuffers(Tt)),_e.prepareDrawProgram(wt,sn,Kt.toUnwrapped());const Zn=Ln=>{sn.draw(wt,zt.TRIANGLES,Be,Ln,Ne,j.CullFaceMode.disabled,kn,te.id,Yt.layoutVertexBuffer,Yt.indexBuffer,Yt.segments,te.paint,_e.transform.zoom,Wt,[Yt.layoutVertexBuffer2])};if(Qt){const Ln=_e.stencilModeForClipping(Kt).ref;Ln===0&&_e.terrain&&wt.clear({stencil:0});const or={func:zt.EQUAL,mask:255};kn.u_alpha_discard_threshold=.8,Zn(new j.StencilMode(or,Ln,255,zt.KEEP,zt.KEEP,zt.INVERT)),kn.u_alpha_discard_threshold=0,Zn(new j.StencilMode(or,Ln,255,zt.KEEP,zt.KEEP,zt.KEEP))}else Zn(_e.stencilModeForClipping(Kt))}Qt&&(_e.resetStencilClippingMasks(),_e.terrain&&wt.clear({stencil:0}))},fill:function(_e,U,te,we){const Pe=te.paint.get("fill-color"),Re=te.paint.get("fill-opacity");if(Re.constantOr(1)===0)return;const Be=_e.colorModeForRenderPass(),Ne=te.paint.get("fill-pattern"),qe=_e.opaquePassEnabledForLayer()&&!Ne.constantOr(1)&&Pe.constantOr(j.Color.transparent).a===1&&Re.constantOr(0)===1?"opaque":"translucent";if(_e.renderPass===qe){const Ke=_e.depthModeForSublayer(1,_e.renderPass==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly);Ol(_e,U,te,we,Ke,Be,!1)}if(_e.renderPass==="translucent"&&te.paint.get("fill-antialias")){const Ke=_e.depthModeForSublayer(te.getPaintProperty("fill-outline-color")?2:0,j.DepthMode.ReadOnly);Ol(_e,U,te,we,Ke,Be,!0)}},"fill-extrusion":function(_e,U,te,we){const Pe=te.paint.get("fill-extrusion-opacity");if(Pe!==0&&_e.renderPass==="translucent"){const Re=new j.DepthMode(_e.context.gl.LEQUAL,j.DepthMode.ReadWrite,_e.depthRangeFor3D);if(Pe!==1||te.paint.get("fill-extrusion-pattern").constantOr(1))ea(_e,U,te,we,Re,j.StencilMode.disabled,j.ColorMode.disabled),ea(_e,U,te,we,Re,_e.stencilModeFor3D(),_e.colorModeForRenderPass()),_e.resetStencilClippingMasks();else{const Be=_e.colorModeForRenderPass();ea(_e,U,te,we,Re,j.StencilMode.disabled,Be)}}},hillshade:function(_e,U,te,we){if(_e.renderPass!=="offscreen"&&_e.renderPass!=="translucent")return;const Pe=_e.context,Re=_e.depthModeForSublayer(0,j.DepthMode.ReadOnly),Be=_e.colorModeForRenderPass(),Ne=_e.terrain&&_e.terrain.renderingToTexture,[qe,Ke]=_e.renderPass!=="translucent"||Ne?[{},we]:_e.stencilConfigForOverlap(we);for(const Qe of Ke){const ut=U.getTile(Qe);if(ut.needsHillshadePrepare&&_e.renderPass==="offscreen")Ka(_e,ut,te,Re,j.StencilMode.disabled,Be);else if(_e.renderPass==="translucent"){const gt=Ne&&_e.terrain?_e.terrain.stencilModeForRTTOverlap(Qe):qe[Qe.overscaledZ];dc(_e,Qe,ut,te,Re,gt,Be)}}Pe.viewport.set([0,0,_e.width,_e.height]),_e.resetStencilClippingMasks()},raster:function(_e,U,te,we,Pe,Re){if(_e.renderPass!=="translucent"||te.paint.get("raster-opacity")===0||!we.length)return;const Be=_e.context,Ne=Be.gl,qe=U.getSource(),Ke=_e.useProgram("raster"),Qe=_e.colorModeForRenderPass(),ut=_e.terrain&&_e.terrain.renderingToTexture,[gt,Mt]=qe instanceof dn||ut?[{},we]:_e.stencilConfigForOverlap(we),kt=Mt[Mt.length-1].overscaledZ,Tt=!_e.options.moving;for(const Ct of Mt){const wt=ut?j.DepthMode.disabled:_e.depthModeForSublayer(Ct.overscaledZ-kt,te.paint.get("raster-opacity")===1?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly,Ne.LESS),zt=Ct.toUnwrapped(),Ot=U.getTile(Ct);if(ut&&(!Ot||!Ot.hasData()))continue;const Qt=ut?Ct.projMatrix:_e.transform.calculateProjMatrix(zt,Tt),Kt=_e.terrain&&ut?_e.terrain.stencilModeForRTTOverlap(Ct):gt[Ct.overscaledZ],Gt=Re?0:te.paint.get("raster-fade-duration");Ot.registerFadeDuration(Gt);const Yt=U.findLoadedParent(Ct,0),Wt=El(Ot,Yt,U,_e.transform,Gt);let sn,mn;_e.terrain&&_e.terrain.prepareDrawTile();const Wn=te.paint.get("raster-resampling")==="nearest"?Ne.NEAREST:Ne.LINEAR;Be.activeTexture.set(Ne.TEXTURE0),Ot.texture.bind(Wn,Ne.CLAMP_TO_EDGE),Be.activeTexture.set(Ne.TEXTURE1),Yt?(Yt.texture.bind(Wn,Ne.CLAMP_TO_EDGE),sn=Math.pow(2,Yt.tileID.overscaledZ-Ot.tileID.overscaledZ),mn=[Ot.tileID.canonical.x*sn%1,Ot.tileID.canonical.y*sn%1]):Ot.texture.bind(Wn,Ne.CLAMP_TO_EDGE);const pn=ah(Qt,mn||[0,0],sn||1,Wt,te,qe instanceof dn?qe.perspectiveTransform:[0,0]);if(_e.prepareDrawProgram(Be,Ke,zt),qe instanceof dn)qe.boundsBuffer&&qe.boundsSegments&&Ke.draw(Be,Ne.TRIANGLES,wt,j.StencilMode.disabled,Qe,j.CullFaceMode.disabled,pn,te.id,qe.boundsBuffer,_e.quadTriangleIndexBuffer,qe.boundsSegments);else{const{tileBoundsBuffer:Dn,tileBoundsIndexBuffer:Nn,tileBoundsSegments:er}=_e.getTileBoundsBuffers(Ot);Ke.draw(Be,Ne.TRIANGLES,wt,Kt,Qe,j.CullFaceMode.disabled,pn,te.id,Dn,Nn,er)}}_e.resetStencilClippingMasks()},background:function(_e,U,te,we){const Pe=te.paint.get("background-color"),Re=te.paint.get("background-opacity");if(Re===0)return;const Be=_e.context,Ne=Be.gl,qe=_e.transform,Ke=qe.tileSize,Qe=te.paint.get("background-pattern");if(_e.isPatternMissing(Qe))return;const ut=!Qe&&Pe.a===1&&Re===1&&_e.opaquePassEnabledForLayer()?"opaque":"translucent";if(_e.renderPass!==ut)return;const gt=j.StencilMode.disabled,Mt=_e.depthModeForSublayer(0,ut==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly),kt=_e.colorModeForRenderPass(),Tt=_e.useProgram(Qe?"backgroundPattern":"background");let Ct,wt=we;wt||(Ct=_e.getBackgroundTiles(),wt=Object.values(Ct).map(Ot=>Ot.tileID)),Qe&&(Be.activeTexture.set(Ne.TEXTURE0),_e.imageManager.bind(_e.context));const zt=te.getCrossfadeParameters();for(const Ot of wt){const Qt=Ot.toUnwrapped(),Kt=we?Ot.projMatrix:_e.transform.calculateProjMatrix(Qt);_e.prepareDrawTile();const Gt=U?U.getTile(Ot):Ct?Ct[Ot.key]:new j.Tile(Ot,Ke,qe.zoom,_e),Yt=Qe?uu(Kt,Re,_e,Qe,{tileID:Ot,tileSize:Ke},zt):sh(Kt,Re,Pe);_e.prepareDrawProgram(Be,Tt,Qt);const{tileBoundsBuffer:Wt,tileBoundsIndexBuffer:sn,tileBoundsSegments:mn}=_e.getTileBoundsBuffers(Gt);Tt.draw(Be,Ne.TRIANGLES,Mt,gt,kt,j.CullFaceMode.disabled,Yt,te.id,Wt,sn,mn)}},sky:function(_e,U,te){const we=_e.transform,Pe=we.projection.name==="mercator"||we.projection.name==="globe"?1:j.smoothstep(7,8,we.zoom),Re=te.paint.get("sky-opacity")*Pe;if(Re===0)return;const Be=_e.context,Ne=te.paint.get("sky-type"),qe=new j.DepthMode(Be.gl.LEQUAL,j.DepthMode.ReadOnly,[0,1]),Ke=_e.frameCounter/1e3%1;Ne==="atmosphere"?_e.renderPass==="offscreen"?te.needsSkyboxCapture(_e)&&(function(Qe,ut,gt,Mt){const kt=Qe.context,Tt=kt.gl;let Ct=ut.skyboxFbo;if(!Ct){Ct=ut.skyboxFbo=kt.createFramebuffer(32,32,!1),ut.skyboxGeometry=new wc(kt),ut.skyboxTexture=kt.gl.createTexture(),Tt.bindTexture(Tt.TEXTURE_CUBE_MAP,ut.skyboxTexture),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_WRAP_S,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_WRAP_T,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_MIN_FILTER,Tt.LINEAR),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_MAG_FILTER,Tt.LINEAR);for(let Qt=0;Qt<6;++Qt)Tt.texImage2D(Tt.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,Tt.RGBA,32,32,0,Tt.RGBA,Tt.UNSIGNED_BYTE,null)}kt.bindFramebuffer.set(Ct.framebuffer),kt.viewport.set([0,0,32,32]);const wt=ut.getCenter(Qe,!0),zt=Qe.useProgram("skyboxCapture"),Ot=new Float64Array(16);j.identity(Ot),j.rotateY(Ot,Ot,.5*-Math.PI),ns(kt,ut,zt,Ot,wt,0),j.identity(Ot),j.rotateY(Ot,Ot,.5*Math.PI),ns(kt,ut,zt,Ot,wt,1),j.identity(Ot),j.rotateX(Ot,Ot,.5*-Math.PI),ns(kt,ut,zt,Ot,wt,2),j.identity(Ot),j.rotateX(Ot,Ot,.5*Math.PI),ns(kt,ut,zt,Ot,wt,3),j.identity(Ot),ns(kt,ut,zt,Ot,wt,4),j.identity(Ot),j.rotateY(Ot,Ot,Math.PI),ns(kt,ut,zt,Ot,wt,5),kt.viewport.set([0,0,Qe.width,Qe.height])}(_e,te),te.markSkyboxValid(_e)):_e.renderPass==="sky"&&function(Qe,ut,gt,Mt,kt){const Tt=Qe.context,Ct=Tt.gl,wt=Qe.transform,zt=Qe.useProgram("skybox");Tt.activeTexture.set(Ct.TEXTURE0),Ct.bindTexture(Ct.TEXTURE_CUBE_MAP,ut.skyboxTexture);const Ot=((Qt,Kt,Gt,Yt,Wt)=>({u_matrix:Qt,u_sun_direction:Kt,u_cubemap:0,u_opacity:Yt,u_temporal_offset:Wt}))(wt.skyboxMatrix,ut.getCenter(Qe,!1),0,Mt,kt);Qe.prepareDrawProgram(Tt,zt),zt.draw(Tt,Ct.TRIANGLES,gt,j.StencilMode.disabled,Qe.colorModeForRenderPass(),j.CullFaceMode.backCW,Ot,"skybox",ut.skyboxGeometry.vertexBuffer,ut.skyboxGeometry.indexBuffer,ut.skyboxGeometry.segment)}(_e,te,qe,Re,Ke):Ne==="gradient"&&_e.renderPass==="sky"&&function(Qe,ut,gt,Mt,kt){const Tt=Qe.context,Ct=Tt.gl,wt=Qe.transform,zt=Qe.useProgram("skyboxGradient");ut.skyboxGeometry||(ut.skyboxGeometry=new wc(Tt)),Tt.activeTexture.set(Ct.TEXTURE0);let Ot=ut.colorRampTexture;Ot||(Ot=ut.colorRampTexture=new j.Texture(Tt,ut.colorRamp,Ct.RGBA)),Ot.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE);const Qt=((Kt,Gt,Yt,Wt,sn)=>({u_matrix:Kt,u_color_ramp:0,u_center_direction:Gt,u_radius:j.degToRad(Yt),u_opacity:Wt,u_temporal_offset:sn}))(wt.skyboxMatrix,ut.getCenter(Qe,!1),ut.paint.get("sky-gradient-radius"),Mt,kt);Qe.prepareDrawProgram(Tt,zt),zt.draw(Tt,Ct.TRIANGLES,gt,j.StencilMode.disabled,Qe.colorModeForRenderPass(),j.CullFaceMode.backCW,Qt,"skyboxGradient",ut.skyboxGeometry.vertexBuffer,ut.skyboxGeometry.indexBuffer,ut.skyboxGeometry.segment)}(_e,te,qe,Re,Ke)},debug:function(_e,U,te){for(let we=0;we<te.length;we++)Jr(_e,U,te[we])},custom:function(_e,U,te){const we=_e.context,Pe=te.implementation;if(_e.transform.projection.unsupportedLayers&&_e.transform.projection.unsupportedLayers.includes("custom"))j.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(_e.renderPass==="offscreen"){const Re=Pe.prerender;Re&&(_e.setCustomLayerDefaults(),we.setColorMode(_e.colorModeForRenderPass()),Re.call(Pe,we.gl,_e.transform.customLayerMatrix()),we.setDirty(),_e.setBaseState())}else if(_e.renderPass==="translucent"){_e.setCustomLayerDefaults(),we.setColorMode(_e.colorModeForRenderPass()),we.setStencilMode(j.StencilMode.disabled);const Re=Pe.renderingMode==="3d"?new j.DepthMode(_e.context.gl.LEQUAL,j.DepthMode.ReadWrite,_e.depthRangeFor3D):_e.depthModeForSublayer(0,j.DepthMode.ReadOnly);we.setDepthMode(Re),Pe.render(we.gl,_e.transform.customLayerMatrix()),we.setDirty(),_e.setBaseState(),we.bindFramebuffer.set(null)}}};class Tc{constructor(U,te){this.context=new Lt(U),this.transform=te,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=j.SourceCache.maxUnderzooming+j.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gl,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(U,te){const we=!!U&&!!U.terrain&&this.transform.projection.supportsTerrain;if(!(we||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new nu(this,U));const Pe=this._terrain;this.transform.elevation=we?Pe:null,Pe.update(U,this.transform,te)}_updateFog(U){const te=U.fog;if(!te||this.transform.projection.name==="globe"||te.getOpacity(this.transform.pitch)<1||te.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[we,Pe]=te.getFovAdjustedRange(this.transform._fov);if(we>Pe)return void(this.transform.fogCullDistSq=null);const Re=we+.78*(Pe-we);this.transform.fogCullDistSq=Re*Re}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(U,te){if(this.width=U*j.exported.devicePixelRatio,this.height=te*j.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const we of this.style.order)this.style._layers[we].resize()}setup(){const U=this.context,te=new j.StructArrayLayout2i4;te.emplaceBack(0,0),te.emplaceBack(j.EXTENT,0),te.emplaceBack(0,j.EXTENT),te.emplaceBack(j.EXTENT,j.EXTENT),this.tileExtentBuffer=U.createVertexBuffer(te,j.posAttributes.members),this.tileExtentSegments=j.SegmentVector.simpleSegment(0,0,4,2);const we=new j.StructArrayLayout2i4;we.emplaceBack(0,0),we.emplaceBack(j.EXTENT,0),we.emplaceBack(0,j.EXTENT),we.emplaceBack(j.EXTENT,j.EXTENT),this.debugBuffer=U.createVertexBuffer(we,j.posAttributes.members),this.debugSegments=j.SegmentVector.simpleSegment(0,0,4,5);const Pe=new j.StructArrayLayout2i4;Pe.emplaceBack(-1,-1),Pe.emplaceBack(1,-1),Pe.emplaceBack(-1,1),Pe.emplaceBack(1,1),this.viewportBuffer=U.createVertexBuffer(Pe,j.posAttributes.members),this.viewportSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Re=new j.StructArrayLayout4i8;Re.emplaceBack(0,0,0,0),Re.emplaceBack(j.EXTENT,0,j.EXTENT,0),Re.emplaceBack(0,j.EXTENT,0,j.EXTENT),Re.emplaceBack(j.EXTENT,j.EXTENT,j.EXTENT,j.EXTENT),this.mercatorBoundsBuffer=U.createVertexBuffer(Re,j.boundsAttributes.members),this.mercatorBoundsSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Be=new j.StructArrayLayout3ui6;Be.emplaceBack(0,1,2),Be.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=U.createIndexBuffer(Be);const Ne=new j.StructArrayLayout1ui2;for(const Ke of[0,1,3,2,0])Ne.emplaceBack(Ke);this.debugIndexBuffer=U.createIndexBuffer(Ne),this.emptyTexture=new j.Texture(U,new j.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),U.gl.RGBA),this.identityMat=j.create();const qe=this.context.gl;this.stencilClearMode=new j.StencilMode({func:qe.ALWAYS,mask:0},0,255,qe.ZERO,qe.ZERO,qe.ZERO),this.loadTimeStamps.push(j.window.performance.now()),this.atmosphereBuffer=new Rl(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(U){return U._makeTileBoundsBuffers(this.context,this.transform.projection),U._tileBoundsBuffer?{tileBoundsBuffer:U._tileBoundsBuffer,tileBoundsIndexBuffer:U._tileBoundsIndexBuffer,tileBoundsSegments:U._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const U=this.context,te=U.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(U,te.TRIANGLES,j.DepthMode.disabled,this.stencilClearMode,j.ColorMode.disabled,j.CullFaceMode.disabled,Jo(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(U,te,we){if(!te||this.currentStencilSource===te.id||!U.isTileClipped()||!we||we.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let Ne=!1;for(const qe of we)if(this._tileClippingMaskIDs[qe.key]===void 0){Ne=!0;break}if(!Ne)return}this.currentStencilSource=te.id;const Pe=this.context,Re=Pe.gl;this.nextStencilID+we.length>256&&this.clearStencil(),Pe.setColorMode(j.ColorMode.disabled),Pe.setDepthMode(j.DepthMode.disabled);const Be=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Ne of we){const qe=te.getTile(Ne),Ke=this._tileClippingMaskIDs[Ne.key]=this.nextStencilID++,{tileBoundsBuffer:Qe,tileBoundsIndexBuffer:ut,tileBoundsSegments:gt}=this.getTileBoundsBuffers(qe);Be.draw(Pe,Re.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Re.ALWAYS,mask:0},Ke,255,Re.KEEP,Re.KEEP,Re.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,Jo(Ne.projMatrix),"$clipping",Qe,ut,gt)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const U=this.nextStencilID++,te=this.context.gl;return new j.StencilMode({func:te.NOTEQUAL,mask:255},U,255,te.KEEP,te.KEEP,te.REPLACE)}stencilModeForClipping(U){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(U);const te=this.context.gl;return new j.StencilMode({func:te.EQUAL,mask:255},this._tileClippingMaskIDs[U.key],0,te.KEEP,te.KEEP,te.REPLACE)}stencilConfigForOverlap(U){const te=this.context.gl,we=U.sort((Be,Ne)=>Ne.overscaledZ-Be.overscaledZ),Pe=we[we.length-1].overscaledZ,Re=we[0].overscaledZ-Pe+1;if(Re>1){this.currentStencilSource=void 0,this.nextStencilID+Re>256&&this.clearStencil();const Be={};for(let Ne=0;Ne<Re;Ne++)Be[Ne+Pe]=new j.StencilMode({func:te.GEQUAL,mask:255},Ne+this.nextStencilID,255,te.KEEP,te.KEEP,te.REPLACE);return this.nextStencilID+=Re,[Be,we]}return[{[Pe]:j.StencilMode.disabled},we]}colorModeForRenderPass(){const U=this.context.gl;return this._showOverdrawInspector?new j.ColorMode([U.CONSTANT_COLOR,U.ONE],new j.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?j.ColorMode.unblended:j.ColorMode.alphaBlended}depthModeForSublayer(U,te,we){if(!this.opaquePassEnabledForLayer())return j.DepthMode.disabled;const Pe=1-((1+this.currentLayer)*this.numSublayers+U)*this.depthEpsilon;return new j.DepthMode(we||this.context.gl.LEQUAL,te,[Pe,Pe])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(U,te){this.style=U,this.options=te,this.lineAtlas=U.lineAtlas,this.imageManager=U.imageManager,this.glyphManager=U.glyphManager,this.symbolFadeChange=U.placement.symbolFadeChange(j.exported.now()),this.imageManager.beginFrame();const we=this.style.order,Pe=this.style._sourceCaches;for(const qe in Pe){const Ke=Pe[qe];Ke.used&&Ke.prepare(this.context)}const Re={},Be={},Ne={};for(const qe in Pe){const Ke=Pe[qe];Re[qe]=Ke.getVisibleCoordinates(),Be[qe]=Re[qe].slice().reverse(),Ne[qe]=Ke.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let qe=0;qe<we.length;qe++)if(this.style._layers[we[qe]].is3D()){this.opaquePassCutoff=qe;break}if(this.terrain&&(this.terrain.updateTileBinding(Ne),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new j.GlobeSharedBuffers(this.context)),j.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const qe of we){const Ke=this.style._layers[qe],Qe=U._getLayerSourceCache(Ke);if(!Ke.hasOffscreenPass()||Ke.isHidden(this.transform.zoom))continue;const ut=Qe?Be[Qe.id]:void 0;(Ke.type==="custom"||Ke.isSky()||ut&&ut.length)&&this.renderLayer(this,Qe,Ke,ut)}if(this.depthRangeFor3D=[0,1-(U.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:te.showOverdrawInspector?j.Color.black:j.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=te.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=we.length-1;this.currentLayer>=0;this.currentLayer--){const qe=this.style._layers[we[this.currentLayer]],Ke=U._getLayerSourceCache(qe);if(qe.isSky())continue;const Qe=Ke?Be[Ke.id]:void 0;this._renderTileClippingMasks(qe,Ke,Qe),this.renderLayer(this,Ke,qe,Qe)}if(this.style.fog&&this.transform.projection.supportsFog&&function(qe,Ke){const Qe=qe.context,ut=Qe.gl,gt=qe.transform,Mt=new j.DepthMode(ut.LEQUAL,j.DepthMode.ReadOnly,[0,1]),kt=qe.useProgram("globeAtmosphere",null,gt.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Tt=j.globeToMercatorTransition(gt.zoom),Ct=Ke.properties.get("color").toArray01(),wt=Ke.properties.get("high-color").toArray01(),zt=Ke.properties.get("space-color").toArray01PremultipliedAlpha(),Ot=j.identity$1([]);j.rotateY$1(Ot,Ot,-j.degToRad(gt._center.lng)),j.rotateX$1(Ot,Ot,j.degToRad(gt._center.lat)),j.rotateZ$1(Ot,Ot,gt.angle),j.rotateX$1(Ot,Ot,-gt._pitch);const Qt=j.fromQuat(new Float32Array(16),Ot),Kt=j.mapValue(Ke.properties.get("star-intensity"),0,1,0,.25),Gt=5e-4,Yt=j.mapValue(Ke.properties.get("horizon-blend"),0,1,Gt,.25),Wt=j.globeUseCustomAntiAliasing(qe,Qe,gt)&&Yt===Gt?gt.worldSize/(2*Math.PI*1.025)-1:gt.globeRadius,sn=qe.frameCounter/1e3%1,mn=j.length(gt.globeCenterInViewSpace),Wn=Math.sqrt(Math.pow(mn,2)-Math.pow(Wt,2)),pn=Math.acos(Wn/mn),Dn=((er,kn,Zn,Ln,or,tr,pr,yr,Tr,Vr,_r,Ir,Zr,ci)=>({u_frustum_tl:er,u_frustum_tr:kn,u_frustum_br:Zn,u_frustum_bl:Ln,u_horizon:or,u_transition:tr,u_fadeout_range:pr,u_color:yr,u_high_color:Tr,u_space_color:Vr,u_star_intensity:_r,u_star_size:5*j.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Ir,u_horizon_angle:Zr,u_rotation_matrix:ci}))(gt.frustumCorners.TL,gt.frustumCorners.TR,gt.frustumCorners.BR,gt.frustumCorners.BL,gt.frustumCorners.horizon,Tt,Yt,Ct,wt,zt,Kt,sn,pn,Qt);qe.prepareDrawProgram(Qe,kt);const Nn=qe.atmosphereBuffer;Nn&&kt.draw(Qe,ut.TRIANGLES,Mt,j.StencilMode.disabled,j.ColorMode.alphaBlended,j.CullFaceMode.backCW,Dn,"skybox",Nn.vertexBuffer,Nn.indexBuffer,Nn.segments)}(this,this.style.fog),this.renderPass="sky",(j.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<we.length;this.currentLayer++){const qe=this.style._layers[we[this.currentLayer]],Ke=U._getLayerSourceCache(qe);qe.isSky()&&this.renderLayer(this,Ke,qe,Ke?Be[Ke.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<we.length;){const qe=this.style._layers[we[this.currentLayer]],Ke=U._getLayerSourceCache(qe);if(qe.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(qe)){if(qe.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Qe=Ke?(qe.type==="symbol"?Ne:Be)[Ke.id]:void 0;this._renderTileClippingMasks(qe,Ke,Ke?Re[Ke.id]:void 0),this.renderLayer(this,Ke,qe,Qe),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let qe=null;j.values(this.style._layers).forEach(Ke=>{const Qe=U._getLayerSourceCache(Ke);Qe&&!Ke.isHidden(this.transform.zoom)&&(!qe||qe.getSource().maxzoom<Qe.getSource().maxzoom)&&(qe=Qe)}),qe&&this.options.showTileBoundaries&&rs.debug(this,qe,qe.getVisibleCoordinates())}this.options.showPadding&&function(qe){const Ke=qe.transform.padding;Vs(qe,qe.transform.height-(Ke.top||0),3,fu),Vs(qe,Ke.bottom||0,3,Oa),mu(qe,Ke.left||0,3,ts),mu(qe,qe.transform.width-(Ke.right||0),3,_u);const Qe=qe.transform.centerPoint;(function(ut,gt,Mt,kt){Gs(ut,gt-1,Mt-10,2,20,kt),Gs(ut,gt-10,Mt-1,20,2,kt)})(qe,Qe.x,qe.transform.height-Qe.y,Ac)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(j.window.performance.now()),this.saveCanvasCopy())}}renderLayer(U,te,we,Pe){we.isHidden(this.transform.zoom)||(we.type==="background"||we.type==="sky"||we.type==="custom"||Pe&&Pe.length)&&(this.id=we.id,this.gpuTimingStart(we),U.transform.projection.unsupportedLayers&&U.transform.projection.unsupportedLayers.includes(we.type)||rs[we.type](U,te,we,Pe,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(U){if(!this.options.gpuTiming)return;const te=this.context.extTimerQuery;let we=this.gpuTimers[U.id];we||(we=this.gpuTimers[U.id]={calls:0,cpuTime:0,query:te.createQueryEXT()}),we.calls++,te.beginQueryEXT(te.TIME_ELAPSED_EXT,we.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const U=this.context.extTimerQuery,te=U.createQueryEXT();this.deferredRenderGpuTimeQueries.push(te),U.beginQueryEXT(U.TIME_ELAPSED_EXT,te)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}collectGpuTimers(){const U=this.gpuTimers;return this.gpuTimers={},U}collectDeferredRenderGpuQueries(){const U=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],U}queryGpuTimers(U){const te={};for(const we in U){const Pe=U[we],Re=this.context.extTimerQuery,Be=Re.getQueryObjectEXT(Pe.query,Re.QUERY_RESULT_EXT)/1e6;Re.deleteQueryEXT(Pe.query),te[we]=Be}return te}queryGpuTimeDeferredRender(U){if(!this.options.gpuTimingDeferredRender)return 0;const te=this.context.extTimerQuery;let we=0;for(const Pe of U)we+=te.getQueryObjectEXT(Pe,te.QUERY_RESULT_EXT)/1e6,te.deleteQueryEXT(Pe);return we}translatePosMatrix(U,te,we,Pe,Re){if(!we[0]&&!we[1])return U;const Be=Re?Pe==="map"?this.transform.angle:0:Pe==="viewport"?-this.transform.angle:0;if(Be){const Ke=Math.sin(Be),Qe=Math.cos(Be);we=[we[0]*Qe-we[1]*Ke,we[0]*Ke+we[1]*Qe]}const Ne=[Re?we[0]:Mn(te,we[0],this.transform.zoom),Re?we[1]:Mn(te,we[1],this.transform.zoom),0],qe=new Float32Array(16);return j.translate(qe,U,Ne),qe}saveTileTexture(U){const te=this._tileTextures[U.size[0]];te?te.push(U):this._tileTextures[U.size[0]]=[U]}getTileTexture(U){const te=this._tileTextures[U];return te&&te.length>0?te.pop():null}isPatternMissing(U){if(!U)return!1;if(!U.from||!U.to)return!0;const te=this.imageManager.getPattern(U.from.toString()),we=this.imageManager.getPattern(U.to.toString());return!te||!we}currentGlobalDefines(){const U=this.terrain&&this.terrain.renderingToTexture,te=this.style&&this.style.fog,we=[];return this.terrain&&!this.terrain.renderingToTexture&&we.push("TERRAIN"),te&&!U&&te.getOpacity(this.transform.pitch)!==0&&we.push("FOG"),U&&we.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&we.push("OVERDRAW_INSPECTOR"),we}useProgram(U,te,we){this.cache=this.cache||{};const Pe=we||[],Re=this.currentGlobalDefines().concat(Pe),Be=kl.cacheKey(bl[U],U,Re,te);return this.cache[Be]||(this.cache[Be]=new kl(this.context,U,bl[U],te,lh[U],Re)),this.cache[Be]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const U=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(U.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=j.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new j.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(U,te,we){if(this.terrain&&this.terrain.renderingToTexture)return;const Pe=this.style.fog;if(Pe){const Re=Pe.getOpacity(this.transform.pitch),Be=((Ne,qe,Ke,Qe,ut,gt,Mt,kt,Tt,Ct,wt)=>{const zt=Ne.transform,Ot=qe.properties.get("color").toArray01();Ot[3]=Qe;const Qt=Ne.frameCounter/1e3%1;return{u_fog_matrix:Ke?zt.calculateFogTileMatrix(Ke):Ne.identityMat,u_fog_range:qe.getFovAdjustedRange(zt._fov),u_fog_color:Ot,u_fog_horizon_blend:qe.properties.get("horizon-blend"),u_fog_temporal_offset:Qt,u_frustum_tl:ut,u_frustum_tr:gt,u_frustum_br:Mt,u_frustum_bl:kt,u_globe_pos:Tt,u_globe_radius:Ct,u_viewport:wt,u_globe_transition:j.globeToMercatorTransition(zt.zoom),u_is_globe:+(zt.projection.name==="globe")}})(this,Pe,we,Re,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*j.exported.devicePixelRatio,this.transform.height*j.exported.devicePixelRatio]);te.setFogUniformValues(U,Be)}}setTileLoadedFlag(U){this.tileLoaded=U}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const U=this.context.gl,te=U.createTexture();return U.bindTexture(U.TEXTURE_2D,te),U.copyTexImage2D(U.TEXTURE_2D,0,U.RGBA,0,0,U.drawingBufferWidth,U.drawingBufferHeight,0),te}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const U=this.style&&this.style.fog;return!!U&&U.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const U=this._backgroundTiles,te=this._backgroundTiles={},we=this.transform.coveringTiles({tileSize:512});for(const Pe of we)te[Pe.key]=U[Pe.key]||new j.Tile(Pe,512,this.transform.tileZoom,this);return te}clearBackgroundTiles(){this._backgroundTiles={}}}class Hs{constructor(U=0,te=0,we=0,Pe=0){if(isNaN(U)||U<0||isNaN(te)||te<0||isNaN(we)||we<0||isNaN(Pe)||Pe<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=U,this.bottom=te,this.left=we,this.right=Pe}interpolate(U,te,we){return te.top!=null&&U.top!=null&&(this.top=j.number(U.top,te.top,we)),te.bottom!=null&&U.bottom!=null&&(this.bottom=j.number(U.bottom,te.bottom,we)),te.left!=null&&U.left!=null&&(this.left=j.number(U.left,te.left,we)),te.right!=null&&U.right!=null&&(this.right=j.number(U.right,te.right,we)),this}getCenter(U,te){const we=j.clamp((this.left+U-this.right)/2,0,U),Pe=j.clamp((this.top+te-this.bottom)/2,0,te);return new j.pointGeometry(we,Pe)}equals(U){return this.top===U.top&&this.bottom===U.bottom&&this.left===U.left&&this.right===U.right}clone(){return new Hs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function kc(_e,U){const te=j.getColumn(_e,3);j.fromQuat(_e,U),j.setColumn(_e,3,te)}function is(_e,U){const te=j.identity$1([]);return j.rotateZ$1(te,te,-U),j.rotateX$1(te,te,-_e),te}function os(_e,U){const te=[_e[0],_e[1],0],we=[U[0],U[1],0];if(j.length(te)>=1e-15){const Be=j.normalize([],te);j.scale$2(we,Be,j.dot(we,Be)),U[0]=we[0],U[1]=we[1]}const Pe=j.cross([],U,_e);if(j.len(Pe)<1e-15)return null;const Re=Math.atan2(-Pe[1],Pe[0]);return is(Math.atan2(Math.sqrt(_e[0]*_e[0]+_e[1]*_e[1]),-_e[2]),Re)}class cr{constructor(U,te){this.position=U,this.orientation=te}get position(){return this._position}set position(U){if(U){const te=U instanceof j.MercatorCoordinate?U:new j.MercatorCoordinate(U[0],U[1],U[2]);this._renderWorldCopies&&(te.x=j.wrap(te.x,0,1)),this._position=te}else this._position=null}lookAtPoint(U,te){if(this.orientation=null,!this.position)return;const we=this._elevation?this._elevation.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(U)):0,Pe=this.position,Re=j.MercatorCoordinate.fromLngLat(U,we),Be=[Re.x-Pe.x,Re.y-Pe.y,Re.z-Pe.z];te||(te=[0,0,1]),te[2]=Math.abs(te[2]),this.orientation=os(Be,te)}setPitchBearing(U,te){this.orientation=is(j.degToRad(U),j.degToRad(-te))}}class co{constructor(U,te){this._transform=j.identity([]),this.orientation=te,this.position=U}get mercatorPosition(){const U=this.position;return new j.MercatorCoordinate(U[0],U[1],U[2])}get position(){const U=j.getColumn(this._transform,3);return[U[0],U[1],U[2]]}set position(U){var te;U&&j.setColumn(this._transform,3,[(te=U)[0],te[1],te[2],1])}get orientation(){return this._orientation}set orientation(U){this._orientation=U||j.identity$1([]),U&&kc(this._transform,this._orientation)}getPitchBearing(){const U=this.forward(),te=this.right();return{bearing:Math.atan2(-te[1],te[0]),pitch:Math.atan2(Math.sqrt(U[0]*U[0]+U[1]*U[1]),-U[2])}}setPitchBearing(U,te){this._orientation=is(U,te),kc(this._transform,this._orientation)}forward(){const U=j.getColumn(this._transform,2);return[-U[0],-U[1],-U[2]]}up(){const U=j.getColumn(this._transform,1);return[-U[0],-U[1],-U[2]]}right(){const U=j.getColumn(this._transform,0);return[U[0],U[1],U[2]]}getCameraToWorld(U,te){const we=new Float64Array(16);return j.invert(we,this.getWorldToCamera(U,te)),we}getWorldToCameraPosition(U,te,we){const Pe=this.position;j.scale$2(Pe,Pe,-U);const Re=new Float64Array(16);return j.fromScaling(Re,[we,we,we]),j.translate(Re,Re,Pe),Re[10]*=te,Re}getWorldToCamera(U,te){const we=new Float64Array(16),Pe=new Float64Array(4),Re=this.position;return j.conjugate(Pe,this._orientation),j.scale$2(Re,Re,-U),j.fromQuat(we,Pe),j.translate(we,we,Re),we[1]*=-1,we[5]*=-1,we[9]*=-1,we[13]*=-1,we[8]*=te,we[9]*=te,we[10]*=te,we[11]*=te,we}getCameraToClipPerspective(U,te,we,Pe){const Re=new Float64Array(16);return j.perspective(Re,U,te,we,Pe),Re}getDistanceToElevation(U){const te=U===0?0:j.mercatorZfromAltitude(U,this.position[1]),we=this.forward();return(te-this.position[2])/we[2]}clone(){return new co([...this.position],[...this.orientation])}}function Cc(_e,U){const te=Ws(_e.projection,_e.zoom,_e.width,_e.height),we=function(Re,Be,Ne,qe,Ke){const Qe=new j.LngLat(Ne.lng-180*bo,Ne.lat),ut=new j.LngLat(Ne.lng+180*bo,Ne.lat),gt=Re.project(Qe.lng,Qe.lat),Mt=Re.project(ut.lng,ut.lat),kt=-Math.atan2(Mt.y-gt.y,Mt.x-gt.x),Tt=j.MercatorCoordinate.fromLngLat(Ne);Tt.y=j.clamp(Tt.y,-.999975,.999975);const Ct=Tt.toLngLat(),wt=Re.project(Ct.lng,Ct.lat),zt=j.MercatorCoordinate.fromLngLat(Ct);zt.x+=bo;const Ot=zt.toLngLat(),Qt=Re.project(Ot.lng,Ot.lat),Kt=Zs(Qt.x-wt.x,Qt.y-wt.y,kt),Gt=j.MercatorCoordinate.fromLngLat(Ct);Gt.y+=bo;const Yt=Gt.toLngLat(),Wt=Re.project(Yt.lng,Yt.lat),sn=Zs(Wt.x-wt.x,Wt.y-wt.y,kt),mn=Math.abs(Kt.x)/Math.abs(sn.y),Wn=j.identity([]);j.rotateZ(Wn,Wn,-kt*(1-(Ke?0:qe)));const pn=j.identity([]);return j.scale(pn,pn,[1,1-(1-mn)*qe,1]),pn[4]=-sn.x/sn.y*qe,j.rotateZ(pn,pn,kt),j.multiply(pn,Wn,pn),pn}(_e.projection,0,_e.center,te,U),Pe=Sc(_e);return j.scale(we,we,[Pe,Pe,1]),we}function Sc(_e){const U=_e.projection,te=Ws(_e.projection,_e.zoom,_e.width,_e.height),we=Ic(U,_e.center),Pe=Ic(U,j.LngLat.convert(U.center));return Math.pow(2,we*te+(1-te)*Pe)}function Ws(_e,U,te,we,Pe=1/0){const Re=_e.range;if(!Re)return 0;const Be=Math.min(Pe,Math.max(te,we)),Ne=Math.log(Be/1024)/Math.LN2;return j.smoothstep(Re[0]+Ne,Re[1]+Ne,U)}const bo=1/4e4;function Ic(_e,U){const te=j.clamp(U.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),we=new j.LngLat(U.lng-180*bo,te),Pe=new j.LngLat(U.lng+180*bo,te),Re=_e.project(we.lng,te),Be=_e.project(Pe.lng,te),Ne=j.MercatorCoordinate.fromLngLat(we),qe=j.MercatorCoordinate.fromLngLat(Pe),Ke=Be.x-Re.x,Qe=Be.y-Re.y,ut=qe.x-Ne.x,gt=qe.y-Ne.y,Mt=Math.sqrt((ut*ut+gt*gt)/(Ke*Ke+Qe*Qe));return Math.log(Mt)/Math.LN2}function Zs(_e,U,te){const we=Math.cos(te),Pe=Math.sin(te);return{x:_e*we-U*Pe,y:_e*Pe+U*we}}class Xs{constructor(U,te,we,Pe,Re,Be,Ne){this.tileSize=512,this._renderWorldCopies=Re===void 0||Re,this._minZoom=U||0,this._maxZoom=te||22,this._minPitch=we==null?0:we,this._maxPitch=Pe==null?60:Pe,this.setProjection(Be),this.setMaxBounds(Ne),this.width=0,this.height=0,this._center=new j.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Hs,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new co,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const U=new Xs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return U._elevation=this._elevation,U._centerAltitude=this._centerAltitude,U._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,U.tileSize=this.tileSize,U.width=this.width,U.height=this.height,U.cameraElevationReference=this.cameraElevationReference,U._center=this._center,U._setZoom(this.zoom),U._seaLevelZoom=this._seaLevelZoom,U.angle=this.angle,U._fov=this._fov,U._pitch=this._pitch,U._nearZ=this._nearZ,U._farZ=this._farZ,U._averageElevation=this._averageElevation,U._unmodified=this._unmodified,U._edgeInsets=this._edgeInsets.clone(),U._camera=this._camera.clone(),U._calcMatrices(),U.freezeTileCoverage=this.freezeTileCoverage,U.frustumCorners=this.frustumCorners,U}get elevation(){return this._elevation}set elevation(U){this._elevation!==U&&(this._elevation=U,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(U){const te=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||te)&&this._updateCameraOnTerrain(),(U||te)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return j.pick(this.projection,["name","center","parallels"])}setProjection(U){this.projectionOptions=U||{name:"mercator"};const te=this.projection?this.getProjection():void 0;this.projection=j.getProjection(this.projectionOptions);const we=!be(te,this.getProjection());return we&&this._calcMatrices(),this.mercatorFromTransition=!1,we}setMercatorFromTransition(){const U=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=j.getProjection({name:"mercator"});const te=U!==this.projection.name;return te&&this._calcMatrices(),te}get minZoom(){return this._minZoom}set minZoom(U){this._minZoom!==U&&(this._minZoom=U,this.zoom=Math.max(this.zoom,U))}get maxZoom(){return this._maxZoom}set maxZoom(U){this._maxZoom!==U&&(this._maxZoom=U,this.zoom=Math.min(this.zoom,U))}get minPitch(){return this._minPitch}set minPitch(U){this._minPitch!==U&&(this._minPitch=U,this.pitch=Math.max(this.pitch,U))}get maxPitch(){return this._maxPitch}set maxPitch(U){this._maxPitch!==U&&(this._maxPitch=U,this.pitch=Math.min(this.pitch,U))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(U){U===void 0?U=!0:U===null&&(U=!1),this._renderWorldCopies=U}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const U=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(U))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return j.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new j.pointGeometry(this.width,this.height)}get bearing(){return j.wrap(this.rotation,-180,180)}set bearing(U){this.rotation=U}get rotation(){return-this.angle/Math.PI*180}set rotation(U){const te=-U*Math.PI/180;var we;this.angle!==te&&(this._unmodified=!1,this.angle=te,this._calcMatrices(),this.rotationMatrix=(we=new j.ARRAY_TYPE(4),j.ARRAY_TYPE!=Float32Array&&(we[1]=0,we[2]=0),we[0]=1,we[3]=1,we),function(Pe,Re,Be){var Ne=Re[0],qe=Re[1],Ke=Re[2],Qe=Re[3],ut=Math.sin(Be),gt=Math.cos(Be);Pe[0]=Ne*gt+Ke*ut,Pe[1]=qe*gt+Qe*ut,Pe[2]=Ne*-ut+Ke*gt,Pe[3]=qe*-ut+Qe*gt}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(U){const te=j.clamp(U,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==te&&(this._unmodified=!1,this._pitch=te,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(U){U=Math.max(.01,Math.min(60,U)),this._fov!==U&&(this._unmodified=!1,this._fov=U/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(U){this._averageElevation=U,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(U){const te=Math.min(Math.max(U,this.minZoom),this.maxZoom);this._zoom!==te&&(this._unmodified=!1,this._setZoom(te),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(U){this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const U=this._elevation;this._centerAltitude=U.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=U.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const U=this._elevation,te=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],we=this.horizonLineFromTop();let Pe=0,Re=0;for(let Be=0;Be<te.length;Be++){const Ne=new j.pointGeometry(te[Be][0]*this.width,we+te[Be][1]*(this.height-we)),qe=U.pointCoordinate(Ne);if(!qe)continue;const Ke=1/Math.hypot(qe[0]-this._camera.position[0],qe[1]-this._camera.position[1]);Pe+=qe[3]*Ke,Re+=Ke}return Re===0?NaN:Pe/Re}get center(){return this._center}set center(U){U.lat===this._center.lat&&U.lng===this._center.lng||(this._unmodified=!1,this._center=U,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const U=this._seaLevelZoom,te=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),we=this.pixelsPerMeter/this.worldSize*te,Pe=this._mercatorZfromZoom(U),Re=this._mercatorZfromZoom(this._maxZoom),Be=Math.max(Pe-we,Re);this._setZoom(this._zoomFromMercatorZ(Be))}get padding(){return this._edgeInsets.toJSON()}set padding(U){this._edgeInsets.equals(U)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,U,1),this._calcMatrices())}computeZoomRelativeTo(U){const te=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,U.toAltitude()));let we;we=U.z<this._camera.position[2]?[te.x,te.y,te.z]:[U.x,U.y,U.z];const Pe=j.length(j.sub([],this._camera.position,we));return j.clamp(this._zoomFromMercatorZ(Pe),this._minZoom,this._maxZoom)}setFreeCameraOptions(U){if(!this.height||!U.position&&!U.orientation)return;this._updateCameraState();let te=!1;if(U.orientation&&!j.exactEquals(U.orientation,this._camera.orientation)&&(te=this._setCameraOrientation(U.orientation)),U.position){const we=[U.position.x,U.position.y,U.position.z];j.exactEquals$1(we,this._camera.position)||(this._setCameraPosition(we),te=!0)}te&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const U=this._camera.position,te=new cr;return te.position=new j.MercatorCoordinate(U[0],U[1],U[2]),te.orientation=this._camera.orientation,te._elevation=this.elevation,te._renderWorldCopies=this.renderWorldCopies,te}_setCameraOrientation(U){if(!j.length$1(U))return!1;j.normalize$1(U,U);const te=j.transformQuat([],[0,0,-1],U),we=j.transformQuat([],[0,-1,0],U);if(we[2]<0)return!1;const Pe=os(te,we);return!!Pe&&(this._camera.orientation=Pe,!0)}_setCameraPosition(U){const te=this.zoomScale(this.minZoom)*this.tileSize,we=this.zoomScale(this.maxZoom)*this.tileSize,Pe=this.cameraToCenterDistance;U[2]=j.clamp(U[2],Pe/we,Pe/te),this._camera.position=U}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(U){return this._edgeInsets.equals(U)}interpolatePadding(U,te,we){this._unmodified=!1,this._edgeInsets.interpolate(U,te,we),this._constrain(),this._calcMatrices()}coveringZoomLevel(U){const te=(U.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/U.tileSize));return Math.max(0,te)}getVisibleUnwrappedCoordinates(U){const te=[new j.UnwrappedTileID(0,U)];if(this.renderWorldCopies){const we=this.pointCoordinate(new j.pointGeometry(0,0)),Pe=this.pointCoordinate(new j.pointGeometry(this.width,0)),Re=this.pointCoordinate(new j.pointGeometry(this.width,this.height)),Be=this.pointCoordinate(new j.pointGeometry(0,this.height)),Ne=Math.floor(Math.min(we.x,Pe.x,Re.x,Be.x)),qe=Math.floor(Math.max(we.x,Pe.x,Re.x,Be.x)),Ke=1;for(let Qe=Ne-Ke;Qe<=qe+Ke;Qe++)Qe!==0&&te.push(new j.UnwrappedTileID(Qe,U))}return te}coveringTiles(U){let te=this.coveringZoomLevel(U);const we=te,Pe=this.elevation&&!U.isTerrainDEM,Re=this.projection.name==="mercator";if(U.minzoom!==void 0&&te<U.minzoom)return[];U.maxzoom!==void 0&&te>U.maxzoom&&(te=U.maxzoom);const Be=this.locationCoordinate(this.center),Ne=this.center.lat,qe=1<<te,Ke=[qe*Be.x,qe*Be.y,0],Qe=this.projection.name==="globe",ut=!Qe,gt=j.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,te,ut),Mt=Qe?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),kt=qe*j.mercatorZfromAltitude(1,this.center.lat),Tt=this._camera.position[2]/j.mercatorZfromAltitude(1,this.center.lat),Ct=[qe*Mt.x,qe*Mt.y,Tt*(ut?1:kt)],wt=this.cameraToCenterDistance/U.tileSize*(U.roundZoom?1:.502),zt=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?te:0,Ot=U.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Qt=U.isTerrainDEM?-Ot:this._elevation?this._elevation.getMinElevationBelowMSL():0,Kt=this.projection.isReprojectedInTileSpace?Sc(this):1,Gt=kn=>{const Ln=new j.MercatorCoordinate(kn.x+25e-6,kn.y,kn.z),or=new j.MercatorCoordinate(kn.x,kn.y+25e-6,kn.z),tr=kn.toLngLat(),pr=Ln.toLngLat(),yr=or.toLngLat(),Tr=this.locationCoordinate(tr),Vr=this.locationCoordinate(pr),_r=this.locationCoordinate(yr),Ir=Math.hypot(Vr.x-Tr.x,Vr.y-Tr.y),Zr=Math.hypot(_r.x-Tr.x,_r.y-Tr.y);return Math.sqrt(Ir*Zr)*Kt/25e-6},Yt=kn=>{const Zn=Ot,Ln=Qt;return{aabb:j.tileAABB(this,qe,0,0,0,kn,Ln,Zn,this.projection),zoom:0,x:0,y:0,minZ:Ln,maxZ:Zn,wrap:kn,fullyVisible:!1}},Wt=[];let sn=[];const mn=te,Wn=U.reparseOverscaled?we:te,pn=kn=>kn*kn,Dn=pn((Tt-this._centerAltitude)*kt),Nn=kn=>{if(!this._elevation||!kn.tileID||!Re)return;const Zn=this._elevation.getMinMaxForTile(kn.tileID),Ln=kn.aabb;Zn?(Ln.min[2]=Zn.min,Ln.max[2]=Zn.max,Ln.center[2]=(Ln.min[2]+Ln.max[2])/2):(kn.shouldSplit=er(kn),kn.shouldSplit||(Ln.min[2]=Ln.max[2]=Ln.center[2]=this._centerAltitude))},er=kn=>{if(kn.zoom<zt)return!0;if(kn.zoom===mn)return!1;if(kn.shouldSplit!=null)return kn.shouldSplit;const Zn=kn.aabb.distanceX(Ct),Ln=kn.aabb.distanceY(Ct);let or=Dn,tr=1;if(Qe){or=pn(kn.aabb.distanceZ(Ct));const yr=Math.pow(2,kn.zoom),Tr=j.latFromMercatorY((kn.y+1)/yr),Vr=j.latFromMercatorY(kn.y/yr),_r=Math.min(Math.max(Ne,Tr),Vr),Ir=j.circumferenceAtLatitude(_r)/j.circumferenceAtLatitude(Ne);if(tr=_r===Ne?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Ir/this._mercatorScaleRatio),this.zoom<=j.GLOBE_ZOOM_THRESHOLD_MIN&&kn.zoom===mn-1&&Ir>=.9)return!0}else if(Pe&&(or=pn(kn.aabb.distanceZ(Ct)*kt)),this.projection.isReprojectedInTileSpace&&we<=5){const yr=Math.pow(2,kn.zoom),Tr=Gt(new j.MercatorCoordinate((kn.x+.5)/yr,(kn.y+.5)/yr));tr=Tr>.85?1:Tr}const pr=Zn*Zn+Ln*Ln+or;return pr<pn((1<<mn-kn.zoom)*wt*tr*((yr,Tr)=>{if(Tr*pn(.707)<yr)return 1;const Vr=Math.sqrt(Tr/yr);return Vr/(1.4144271570014144+(Math.pow(1.1,Vr-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(or,Dn),pr))};if(this.renderWorldCopies)for(let kn=1;kn<=3;kn++)Wt.push(Yt(-kn)),Wt.push(Yt(kn));for(Wt.push(Yt(0));Wt.length>0;){const kn=Wt.pop(),Zn=kn.x,Ln=kn.y;let or=kn.fullyVisible;if(!or){const tr=kn.aabb.intersects(gt);if(tr===0)continue;or=tr===2}if(kn.zoom!==mn&&er(kn))for(let tr=0;tr<4;tr++){const pr=(Zn<<1)+tr%2,yr=(Ln<<1)+(tr>>1),Tr={aabb:Re?kn.aabb.quadrant(tr):j.tileAABB(this,qe,kn.zoom+1,pr,yr,kn.wrap,kn.minZ,kn.maxZ,this.projection),zoom:kn.zoom+1,x:pr,y:yr,wrap:kn.wrap,fullyVisible:or,tileID:void 0,shouldSplit:void 0,minZ:kn.minZ,maxZ:kn.maxZ};Pe&&!Qe&&(Tr.tileID=new j.OverscaledTileID(kn.zoom+1===mn?Wn:kn.zoom+1,kn.wrap,kn.zoom+1,pr,yr),Nn(Tr)),Wt.push(Tr)}else{const tr=kn.zoom===mn?Wn:kn.zoom;if(U.minzoom&&U.minzoom>tr)continue;const pr=Ke[0]-(.5+Zn+(kn.wrap<<kn.zoom))*(1<<te-kn.zoom),yr=Ke[1]-.5-Ln,Tr=kn.tileID?kn.tileID:new j.OverscaledTileID(tr,kn.wrap,kn.zoom,Zn,Ln);sn.push({tileID:Tr,distanceSq:pr*pr+yr*yr})}}if(this.fogCullDistSq){const kn=this.fogCullDistSq,Zn=this.horizonLineFromTop();sn=sn.filter(Ln=>{const or=[0,0,0,1],tr=[j.EXTENT,j.EXTENT,0,1],pr=this.calculateFogTileMatrix(Ln.tileID.toUnwrapped());j.transformMat4$1(or,or,pr),j.transformMat4$1(tr,tr,pr);const yr=j.getAABBPointSquareDist(or,tr);if(yr===0)return!0;let Tr=!1;const Vr=this._elevation;if(Vr&&yr>kn&&Zn!==0){const _r=this.calculateProjMatrix(Ln.tileID.toUnwrapped());let Ir;U.isTerrainDEM||(Ir=Vr.getMinMaxForTile(Ln.tileID)),Ir||(Ir={min:Qt,max:Ot});const Zr=j.furthestTileCorner(this.rotation),ci=[Zr[0]*j.EXTENT,Zr[1]*j.EXTENT,Ir.max];j.transformMat4(ci,ci,_r),Tr=(1-ci[1])*this.height*.5<Zn}return yr<kn||Tr})}return sn.sort((kn,Zn)=>kn.distanceSq-Zn.distanceSq).map(kn=>kn.tileID)}resize(U,te){this.width=U,this.height=te,this.pixelsToGLUnits=[2/U,-2/te],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(U){return Math.pow(2,U)}scaleZoom(U){return Math.log(U)/Math.LN2}project(U){const te=j.clamp(U.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),we=this.projection.project(U.lng,te);return new j.pointGeometry(we.x*this.worldSize,we.y*this.worldSize)}unproject(U){return this.projection.unproject(U.x/this.worldSize,U.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(U,te){let we,Pe;const Re=this.centerPoint;if(this.projection.name==="globe"){const Ne=this.worldSize;we=(te.x-Re.x)/Ne,Pe=(te.y-Re.y)/Ne}else{const Ne=this.pointCoordinate(te),qe=this.pointCoordinate(Re);we=Ne.x-qe.x,Pe=Ne.y-qe.y}const Be=this.locationCoordinate(U);this.setLocation(new j.MercatorCoordinate(Be.x-we,Be.y-Pe))}setLocation(U){this.center=this.coordinateLocation(U),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(U){return this.projection.locationPoint(this,U)}locationPoint3D(U){return this.projection.locationPoint(this,U,!0)}pointLocation(U){return this.coordinateLocation(this.pointCoordinate(U))}pointLocation3D(U){return this.coordinateLocation(this.pointCoordinate3D(U))}locationCoordinate(U,te){const we=te?j.mercatorZfromAltitude(te,U.lat):void 0,Pe=this.projection.project(U.lng,U.lat);return new j.MercatorCoordinate(Pe.x,Pe.y,we)}coordinateLocation(U){return this.projection.unproject(U.x,U.y)}pointRayIntersection(U,te){const we=te!=null?te:this._centerAltitude,Pe=[U.x,U.y,0,1],Re=[U.x,U.y,1,1];j.transformMat4$1(Pe,Pe,this.pixelMatrixInverse),j.transformMat4$1(Re,Re,this.pixelMatrixInverse);const Be=Re[3];j.scale$1(Pe,Pe,1/Pe[3]),j.scale$1(Re,Re,1/Be);const Ne=Pe[2],qe=Re[2];return{p0:Pe,p1:Re,t:Ne===qe?0:(we-Ne)/(qe-Ne)}}screenPointToMercatorRay(U){const te=[U.x,U.y,0,1],we=[U.x,U.y,1,1];return j.transformMat4$1(te,te,this.pixelMatrixInverse),j.transformMat4$1(we,we,this.pixelMatrixInverse),j.scale$1(te,te,1/te[3]),j.scale$1(we,we,1/we[3]),te[2]=j.mercatorZfromAltitude(te[2],this._center.lat)*this.worldSize,we[2]=j.mercatorZfromAltitude(we[2],this._center.lat)*this.worldSize,j.scale$1(te,te,1/this.worldSize),j.scale$1(we,we,1/this.worldSize),new j.Ray([te[0],te[1],te[2]],j.normalize([],j.sub([],we,te)))}rayIntersectionCoordinate(U){const{p0:te,p1:we,t:Pe}=U,Re=j.mercatorZfromAltitude(te[2],this._center.lat),Be=j.mercatorZfromAltitude(we[2],this._center.lat);return new j.MercatorCoordinate(j.number(te[0],we[0],Pe)/this.worldSize,j.number(te[1],we[1],Pe)/this.worldSize,j.number(Re,Be,Pe))}pointCoordinate(U,te=this._centerAltitude){return this.projection.pointCoordinate(this,U.x,U.y,te)}pointCoordinate3D(U){if(!this.elevation)return this.pointCoordinate(U);let te=this.projection.pointCoordinate3D(this,U.x,U.y);if(te)return new j.MercatorCoordinate(te[0],te[1],te[2]);let we=0,Pe=this.horizonLineFromTop();if(U.y>Pe)return this.pointCoordinate(U);const Re=.02*Pe,Be=U.clone();for(let Ne=0;Ne<10&&Pe-we>Re;Ne++){Be.y=j.number(we,Pe,.66);const qe=this.projection.pointCoordinate3D(this,Be.x,Be.y);qe?(Pe=Be.y,te=qe):we=Be.y}return te?new j.MercatorCoordinate(te[0],te[1],te[2]):this.pointCoordinate(U)}isPointAboveHorizon(U){return this.projection.isPointAboveHorizon(this,U)}_coordinatePoint(U,te){const we=te&&this.elevation?this.elevation.getAtPointOrZero(U,this._centerAltitude):this._centerAltitude,Pe=[U.x*this.worldSize,U.y*this.worldSize,we+U.toAltitude(),1];return j.transformMat4$1(Pe,Pe,this.pixelMatrix),Pe[3]>0?new j.pointGeometry(Pe[0]/Pe[3],Pe[1]/Pe[3]):new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(U,te){const we=new j.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),Pe=new j.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),Re=new j.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),Be=new j.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let Ne=this.pointCoordinate(we,U),qe=this.pointCoordinate(Pe,U);const Ke=this.pointCoordinate(Re,te),Qe=this.pointCoordinate(Be,te),ut=(gt,Mt)=>(Mt.y-gt.y)/(Mt.x-gt.x);return Ne.y>1&&qe.y>=0?Ne=new j.MercatorCoordinate((1-Qe.y)/ut(Qe,Ne)+Qe.x,1):Ne.y<0&&qe.y<=1&&(Ne=new j.MercatorCoordinate(-Qe.y/ut(Qe,Ne)+Qe.x,0)),qe.y>1&&Ne.y>=0?qe=new j.MercatorCoordinate((1-Ke.y)/ut(Ke,qe)+Ke.x,1):qe.y<0&&Ne.y<=1&&(qe=new j.MercatorCoordinate(-Ke.y/ut(Ke,qe)+Ke.x,0)),new j.LngLatBounds().extend(this.coordinateLocation(Ne)).extend(this.coordinateLocation(qe)).extend(this.coordinateLocation(Qe)).extend(this.coordinateLocation(Ke))}_getBounds3D(){const U=this.elevation;if(!U.visibleDemTiles.length)return this._getBounds(0,0);const te=U.visibleDemTiles.reduce((we,Pe)=>{if(Pe.dem){const Re=Pe.dem.tree;we.min=Math.min(we.min,Re.minimums[0]),we.max=Math.max(we.max,Re.maximums[0])}return we},{min:Number.MAX_VALUE,max:0});return this._getBounds(te.min*U.exaggeration(),te.max*U.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(U=!0){const te=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,we=this.height/2-te*(1-this._horizonShift);return U?Math.max(0,we):we}getMaxBounds(){return this.maxBounds}setMaxBounds(U){this.maxBounds=U,this.minLat=-j.MAX_MERCATOR_LATITUDE,this.maxLat=j.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,U&&(this.minLat=U.getSouth(),this.maxLat=U.getNorth(),this.minLng=U.getWest(),this.maxLng=U.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=j.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=j.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=j.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=j.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(U,te){return this.projection.createTileMatrix(this,te,U)}calculateDistanceTileData(U){const te=U.key,we=this._distanceTileDataCache;if(we[te])return we[te];const Pe=U.canonical,Re=1/this.height,Be=this.cameraWorldSize/this.zoomScale(Pe.z),Ne=(Pe.x+Math.pow(2,Pe.z)*U.wrap)*Be,qe=Pe.y*Be,Ke=this.point,Qe=this.angle,ut=Math.sin(-Qe),gt=-Math.cos(-Qe);return we[te]={bearing:[ut,gt],center:[(Ke.x-Ne)*Re,(Ke.y-qe)*Re],scale:Be/j.EXTENT*Re},we[te]}calculateFogTileMatrix(U){const te=U.key,we=this._fogTileMatrixCache;if(we[te])return we[te];const Pe=this.projection.createTileMatrix(this,this.cameraWorldSize,U);return j.multiply(Pe,this.worldToFogMatrix,Pe),we[te]=new Float32Array(Pe),we[te]}calculateProjMatrix(U,te=!1){const we=U.key,Pe=te?this._alignedProjMatrixCache:this._projMatrixCache;if(Pe[we])return Pe[we];const Re=this.calculatePosMatrix(U,this.worldSize);return j.multiply(Re,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:te?this.alignedProjMatrix:this.projMatrix,Re),Pe[we]=new Float32Array(Re),Pe[we]}calculatePixelsToTileUnitsMatrix(U){const te=U.tileID.key,we=this._pixelsToTileUnitsCache;if(we[te])return we[te];const Pe=function(Re,Be){const{scale:Ne}=Re.tileTransform,qe=Ne*j.EXTENT/(Re.tileSize*Math.pow(2,Be.zoom-Re.tileID.overscaledZ+Re.tileID.canonical.z));return Ke=new Float32Array(4),gt=(Qe=Be.inverseAdjustmentMatrix)[1],Mt=Qe[2],kt=Qe[3],Ct=(ut=[qe,qe])[1],Ke[0]=Qe[0]*(Tt=ut[0]),Ke[1]=gt*Tt,Ke[2]=Mt*Ct,Ke[3]=kt*Ct,Ke;var Ke,Qe,ut,gt,Mt,kt,Tt,Ct}(U,this);return we[te]=Pe,we[te]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const U=this._elevation;this._updateCameraState();const te=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,we=this._computeCameraPosition(te),Pe=this._camera.forward(),Re=j.mercatorZfromAltitude(1,this._center.lat);we[2]/=Re,Pe[2]/=Re,j.normalize(Pe,Pe);const Be=U.raycast(we,Pe,U.exaggeration());if(Be){const Ne=j.scaleAndAdd([],we,Pe,Be),qe=new j.MercatorCoordinate(Ne[0],Ne[1],j.mercatorZfromAltitude(Ne[2],j.latFromMercatorY(Ne[1]))),Ke=(qe.z+j.length([qe.x-we[0],qe.y-we[1],qe.z-we[2]*Re]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Ke),this._centerAltitude=qe.toAltitude(),this._center=this.coordinateLocation(qe),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const U=this._elevation;this._updateCameraState();const te=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,we=this._computeCameraPosition(te),Pe=U.getAtPointOrZero(new j.MercatorCoordinate(...we)),Re=this._minimumHeightOverTerrain()*Math.cos(j.degToRad(this._maxPitch)),Be=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*Pe;if(Be<Re){const Ne=this.locationCoordinate(this._center,this._centerAltitude),qe=[Ne.x-we[0],Ne.y-we[1],Ne.z-we[2]],Ke=j.length(qe);qe[2]-=(Re-Be)/this._pixelsPerMercatorPixel;const Qe=j.length(qe);if(Qe===0)return;j.scale$2(qe,qe,Ke/Qe*this._pixelsPerMercatorPixel),this._camera.position=[Ne.x-qe[0],Ne.y-qe[1],Ne.z*this._pixelsPerMercatorPixel-qe[2]],this._camera.orientation=os(qe,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const U=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||U){const gt=this.center;return gt.lat=j.clamp(gt.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!U)&&(gt.lng=j.clamp(gt.lng,this.minLng,this.maxLng)),this.center=gt,void(this._constraining=!1)}const te=this._unmodified,{x:we,y:Pe}=this.point;let Re=0,Be=we,Ne=Pe;const qe=this.width/2,Ke=this.height/2,Qe=this.worldMinY*this.scale,ut=this.worldMaxY*this.scale;if(Pe-Ke<Qe&&(Ne=Qe+Ke),Pe+Ke>ut&&(Ne=ut-Ke),ut-Qe<this.height&&(Re=Math.max(Re,this.height/(ut-Qe)),Ne=(ut+Qe)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const gt=this.worldMinX*this.scale,Mt=this.worldMaxX*this.scale,kt=this.worldSize/2-(gt+Mt)/2;Be=(we+kt+this.worldSize)%this.worldSize-kt,Be-qe<gt&&(Be=gt+qe),Be+qe>Mt&&(Be=Mt-qe),Mt-gt<this.width&&(Re=Math.max(Re,this.width/(Mt-gt)),Be=(Mt+gt)/2)}Be===we&&Ne===Pe||(this.center=this.unproject(new j.pointGeometry(Be,Ne))),Re&&(this.zoom+=this.scaleZoom(Re)),this._constrainCameraAltitude(),this._unmodified=te,this._constraining=!1}_minZoomForBounds(){let U=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(U=Math.max(U,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),U}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const U=this.centerOffset,te=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=j.mercatorZfromAltitude(1,this.center.lat)/j.mercatorZfromAltitude(1,j.GLOBE_SCALE_MATCH_LATITUDE));const we=Ws(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,we),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Pe=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?te:1),Re=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Re[8]=2*-U.x/this.width,Re[9]=2*U.y/this.height;let Be=j.mul([],Re,Pe);if(this.projection.isReprojectedInTileSpace){const Kt=this.locationCoordinate(this.center),Gt=j.identity([]);j.translate(Gt,Gt,[Kt.x*this.worldSize,Kt.y*this.worldSize,0]),j.multiply(Gt,Gt,Cc(this)),j.translate(Gt,Gt,[-Kt.x*this.worldSize,-Kt.y*this.worldSize,0]),j.multiply(Be,Be,Gt),this.inverseAdjustmentMatrix=function(Yt){const Wt=Cc(Yt,!0);return It([],[Wt[0],Wt[1],Wt[4],Wt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=j.scale([],Be,[this.worldSize,this.worldSize,this.worldSize/te,1]),this.projMatrix=Be,this.invProjMatrix=j.invert(new Float64Array(16),this.projMatrix);const Ne=j.invert([],Re);this.frustumCorners=j.FrustumCorners.fromInvProjectionMatrix(Ne,this.horizonLineFromTop(),this.height);const qe=new Float32Array(16);j.identity(qe),j.scale(qe,qe,[1,-1,1]),j.rotateX(qe,qe,this._pitch),j.rotateZ(qe,qe,this.angle);const Ke=j.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Qe=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ke[8]=2*-U.x/this.width,Ke[9]=2*(U.y+Qe)/this.height,this.skyboxMatrix=j.multiply(qe,Ke,qe);const ut=this.point,gt=ut.x,Mt=ut.y,kt=this.width%2/2,Tt=this.height%2/2,Ct=Math.cos(this.angle),wt=Math.sin(this.angle),zt=gt-Math.round(gt)+Ct*kt+wt*Tt,Ot=Mt-Math.round(Mt)+Ct*Tt+wt*kt,Qt=new Float64Array(Be);if(j.translate(Qt,Qt,[zt>.5?zt-1:zt,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Qt,Be=j.create(),j.scale(Be,Be,[this.width/2,-this.height/2,1]),j.translate(Be,Be,[1,-1,0]),this.labelPlaneMatrix=Be,Be=j.create(),j.scale(Be,Be,[1,-1,1]),j.translate(Be,Be,[-1,-1,0]),j.scale(Be,Be,[2/this.width,2/this.height,1]),this.glCoordMatrix=Be,this.pixelMatrix=j.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Be=j.invert(new Float64Array(16),this.pixelMatrix),!Be)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Be,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=j.calculateGlobeMatrix(this);const Kt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=j.transformMat4(Kt,Kt,Pe),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Be;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const U=this.cameraWorldSize,te=this.cameraPixelsPerMeter,we=this._camera.position,Pe=1/this.height/this._pixelsPerMercatorPixel,Re=[U,U,te];j.scale$2(Re,Re,Pe),j.scale$2(we,we,-1),j.multiply$2(we,we,Re);const Be=j.create();j.translate(Be,Be,we),j.scale(Be,Be,Re),this.mercatorFogMatrix=Be,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(U,te,Pe)}_computeCameraPosition(U){const te=(U=U||this.pixelsPerMeter)/this.pixelsPerMeter,we=this._camera.forward(),Pe=this.point,Re=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*te-U/this.worldSize*this._centerAltitude;return[Pe.x/this.worldSize-we[0]*Re,Pe.y/this.worldSize-we[1]*Re,U/this.worldSize*this._centerAltitude-we[2]*Re]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(U){const te=this._maxCameraBoundsDistance()*Math.cos(this._pitch),we=U[2];let Pe=1;we>0&&(Pe=Math.min((te-this._camera.position[2])/we,1)),this._camera.position=j.scaleAndAdd([],this._camera.position,U,Pe),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const U=this._camera.position,te=this._camera.forward(),{pitch:we,bearing:Pe}=this._camera.getPitchBearing(),Re=j.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Be=this._mercatorZfromZoom(this._maxZoom)*Math.cos(j.degToRad(this._maxPitch)),Ne=Math.max((U[2]-Re)/Math.cos(we),Be),qe=this._zoomFromMercatorZ(Ne);j.scaleAndAdd(U,U,te,Ne),this._pitch=j.clamp(we,j.degToRad(this.minPitch),j.degToRad(this.maxPitch)),this.angle=j.wrap(Pe,-Math.PI,Math.PI),this._setZoom(j.clamp(qe,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new j.MercatorCoordinate(U[0],U[1],U[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(U){return Math.pow(2,U)*this.tileSize}_mercatorZfromZoom(U){return this.cameraToCenterDistance/this._worldSizeFromZoom(U)}_minimumHeightOverTerrain(){const U=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(U)}_zoomFromMercatorZ(U){return this.scaleZoom(this.cameraToCenterDistance/(U*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(j.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(U,te){const we=Math.min(U.x,te.x),Pe=Math.max(U.x,te.x),Re=Math.min(U.y,te.y),Be=Math.max(U.y,te.y);if(Re<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const Ne=[new j.pointGeometry(we,Re),new j.pointGeometry(Pe,Be),new j.pointGeometry(we,Be),new j.pointGeometry(Pe,Re)],qe=this.renderWorldCopies?-3:0,Ke=this.renderWorldCopies?4:1;for(const Qe of Ne){const ut=this.pointRayIntersection(Qe);if(ut.t<0)return!0;const gt=this.rayIntersectionCoordinate(ut);if(gt.x<qe||gt.y<0||gt.x>Ke||gt.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+j.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new j.pointGeometry(0,0),new j.pointGeometry(this.width,this.height))}zoomDeltaToMovement(U,te){const we=j.length(j.sub([],this._camera.position,U)),Pe=this._zoomFromMercatorZ(we)+te;return we-this._mercatorZfromZoom(Pe)}getCameraPoint(){if(this.projection.name==="globe"){const U=function(te,we){const Pe=[te[0],te[1],te[2],1];j.transformMat4$1(Pe,Pe,we);const Re=Math.max(Pe[3],1e-6);return[Pe[0]/Re,Pe[1]/Re,Pe[2]/Re,Re]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new j.pointGeometry(U[0],U[1])}{const U=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new j.pointGeometry(0,U))}}getCameraToCenterDistance(U){const te=Ws(U,this.zoom,this.width,this.height,1024),we=U.pixelSpaceConversion(this.center.lat,this.worldSize,te);return .5/Math.tan(.5*this._fov)*this.height*we}}function Ys(_e,U){let te=!1,we=null;const Pe=()=>{we=null,te&&(_e(),we=setTimeout(Pe,U),te=!1)};return()=>(te=!0,we||Pe(),we)}class gu{constructor(U){this._hashName=U&&encodeURIComponent(U),j.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ys(this._updateHashUnthrottled.bind(this),300)}addTo(U){return this._map=U,j.window.addEventListener("hashchange",this._onHashChange,!1),U.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),j.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const U=this._map;if(!U)return"";const te=Dl(U);if(this._hashName){const we=this._hashName;let Pe=!1;const Re=j.window.location.hash.slice(1).split("&").map(Be=>{const Ne=Be.split("=")[0];return Ne===we?(Pe=!0,`${Ne}=${te}`):Be}).filter(Be=>Be);return Pe||Re.push(`${we}=${te}`),`#${Re.join("&")}`}return`#${te}`}_getCurrentHash(){const U=j.window.location.hash.replace("#","");if(this._hashName){let te;return U.split("&").map(we=>we.split("=")).forEach(we=>{we[0]===this._hashName&&(te=we)}),(te&&te[1]||"").split("/")}return U.split("/")}_onHashChange(){const U=this._map;if(!U)return!1;const te=this._getCurrentHash();if(te.length>=3&&!te.some(we=>isNaN(we))){const we=U.dragRotate.isEnabled()&&U.touchZoomRotate.isEnabled()?+(te[3]||0):U.getBearing();return U.jumpTo({center:[+te[2],+te[1]],zoom:+te[0],bearing:we,pitch:+(te[4]||0)}),!0}return!1}_updateHashUnthrottled(){const U=j.window.location.href.replace(/(#.+)?$/,this.getHashString());j.window.history.replaceState(j.window.history.state,null,U)}}function Dl(_e,U){const te=_e.getCenter(),we=Math.round(100*_e.getZoom())/100,Pe=Math.ceil((we*Math.LN2+Math.log(512/360/.5))/Math.LN10),Re=Math.pow(10,Pe),Be=Math.round(te.lng*Re)/Re,Ne=Math.round(te.lat*Re)/Re,qe=_e.getBearing(),Ke=_e.getPitch();let Qe=U?`/${Be}/${Ne}/${we}`:`${we}/${Ne}/${Be}`;return(qe||Ke)&&(Qe+="/"+Math.round(10*qe)/10),Ke&&(Qe+=`/${Math.round(Ke)}`),Qe}const ta={linearity:.3,easing:j.bezier(0,0,.3,1)},uh=j.extend({deceleration:2500,maxSpeed:1400},ta),hh=j.extend({deceleration:20,maxSpeed:1400},ta),as=j.extend({deceleration:1e3,maxSpeed:360},ta),zl=j.extend({deceleration:1e3,maxSpeed:90},ta);class Mc{constructor(U){this._map=U,this.clear()}clear(){this._inertiaBuffer=[]}record(U){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.exported.now(),settings:U})}_drainInertiaBuffer(){const U=this._inertiaBuffer,te=j.exported.now();for(;U.length>0&&te-U[0].time>160;)U.shift()}_onMoveEnd(U){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const te={zoom:0,bearing:0,pitch:0,pan:new j.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:Re}of this._inertiaBuffer)te.zoom+=Re.zoomDelta||0,te.bearing+=Re.bearingDelta||0,te.pitch+=Re.pitchDelta||0,Re.panDelta&&te.pan._add(Re.panDelta),Re.around&&(te.around=Re.around),Re.pinchAround&&(te.pinchAround=Re.pinchAround);const we=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Pe={};if(te.pan.mag()){const Re=Qs(te.pan.mag(),we,j.extend({},uh,U||{}));Pe.offset=te.pan.mult(Re.amount/te.pan.mag()),Pe.center=this._map.transform.center,Ks(Pe,Re)}if(te.zoom){const Re=Qs(te.zoom,we,hh);Pe.zoom=this._map.transform.zoom+Re.amount,Ks(Pe,Re)}if(te.bearing){const Re=Qs(te.bearing,we,as);Pe.bearing=this._map.transform.bearing+j.clamp(Re.amount,-179,179),Ks(Pe,Re)}if(te.pitch){const Re=Qs(te.pitch,we,zl);Pe.pitch=this._map.transform.pitch+Re.amount,Ks(Pe,Re)}if(Pe.zoom||Pe.bearing){const Re=te.pinchAround===void 0?te.around:te.pinchAround;Pe.around=Re?this._map.unproject(Re):this._map.getCenter()}return this.clear(),Pe.noMoveStart=!0,Pe}}function Ks(_e,U){(!_e.duration||_e.duration<U.duration)&&(_e.duration=U.duration,_e.easing=U.easing)}function Qs(_e,U,te){const{maxSpeed:we,linearity:Pe,deceleration:Re}=te,Be=j.clamp(_e*Pe/(U/1e3),-we,we),Ne=Math.abs(Be)/(Re*Pe);return{easing:te.easing,duration:1e3*Ne,amount:Be*(Ne/2)}}class Yi extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,te,we,Pe={}){const Re=Ye(te.getCanvasContainer(),we),Be=te.unproject(Re);super(U,j.extend({point:Re,lngLat:Be,originalEvent:we},Pe)),this._defaultPrevented=!1,this.target=te}}class Ra extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,te,we){const Pe=U==="touchend"?we.changedTouches:we.touches,Re=He(te.getCanvasContainer(),Pe),Be=Re.map(qe=>te.unproject(qe)),Ne=Re.reduce((qe,Ke,Qe,ut)=>qe.add(Ke.div(ut.length)),new j.pointGeometry(0,0));super(U,{points:Re,point:Ne,lngLats:Be,lngLat:te.unproject(Ne),originalEvent:we}),this._defaultPrevented=!1}}class yu extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,te,we){super(U,{originalEvent:we}),this._defaultPrevented=!1}}class Js{constructor(U,te){this._map=U,this._clickTolerance=te.clickTolerance}reset(){this._mousedownPos=void 0}wheel(U){return this._firePreventable(new yu(U.type,this._map,U))}mousedown(U,te){return this._mousedownPos=te,this._firePreventable(new Yi(U.type,this._map,U))}mouseup(U){this._map.fire(new Yi(U.type,this._map,U))}preclick(U){const te=j.extend({},U);te.type="preclick",this._map.fire(new Yi(te.type,this._map,te))}click(U,te){this._mousedownPos&&this._mousedownPos.dist(te)>=this._clickTolerance||(this.preclick(U),this._map.fire(new Yi(U.type,this._map,U)))}dblclick(U){return this._firePreventable(new Yi(U.type,this._map,U))}mouseover(U){this._map.fire(new Yi(U.type,this._map,U))}mouseout(U){this._map.fire(new Yi(U.type,this._map,U))}touchstart(U){return this._firePreventable(new Ra(U.type,this._map,U))}touchmove(U){this._map.fire(new Ra(U.type,this._map,U))}touchend(U){this._map.fire(new Ra(U.type,this._map,U))}touchcancel(U){this._map.fire(new Ra(U.type,this._map,U))}_firePreventable(U){if(this._map.fire(U),U.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vu{constructor(U){this._map=U}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(U){this._map.fire(new Yi(U.type,this._map,U))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(U){this._delayContextMenu?this._contextMenuEvent=U:this._map.fire(new Yi(U.type,this._map,U)),this._map.listens("contextmenu")&&U.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xu{constructor(U,te){this._map=U,this._el=U.getCanvasContainer(),this._container=U.getContainer(),this._clickTolerance=te.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(U,te){this.isEnabled()&&U.shiftKey&&U.button===0&&(Ue(),this._startPos=this._lastPos=te,this._active=!0)}mousemoveWindow(U,te){if(!this._active)return;const we=te;if(this._lastPos.equals(we)||!this._box&&we.dist(this._startPos)<this._clickTolerance)return;const Pe=this._startPos;this._lastPos=we,this._box||(this._box=Ee("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",U));const Re=Math.min(Pe.x,we.x),Be=Math.max(Pe.x,we.x),Ne=Math.min(Pe.y,we.y),qe=Math.max(Pe.y,we.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Re}px,${Ne}px)`,this._box.style.width=Be-Re+"px",this._box.style.height=qe-Ne+"px")})}mouseupWindow(U,te){if(!this._active||U.button!==0)return;const we=this._startPos,Pe=te;if(this.reset(),Xe(),we.x!==Pe.x||we.y!==Pe.y)return this._map.fire(new j.Event("boxzoomend",{originalEvent:U})),{cameraAnimation:Re=>Re.fitScreenCoordinates(we,Pe,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",U)}keydown(U){this._active&&U.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",U))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),$e(),delete this._startPos,delete this._lastPos}_fireEvent(U,te){return this._map.fire(new j.Event(U,{originalEvent:te}))}}function $l(_e,U){const te={};for(let we=0;we<_e.length;we++)te[_e[we].identifier]=U[we];return te}class ss{constructor(U){this.reset(),this.numTouches=U.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(U,te,we){(this.centroid||we.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=U.timeStamp),we.length===this.numTouches&&(this.centroid=function(Pe){const Re=new j.pointGeometry(0,0);for(const Be of Pe)Re._add(Be);return Re.div(Pe.length)}(te),this.touches=$l(we,te)))}touchmove(U,te,we){if(this.aborted||!this.centroid)return;const Pe=$l(we,te);for(const Re in this.touches){const Be=this.touches[Re],Ne=Pe[Re];(!Ne||Ne.dist(Be)>30)&&(this.aborted=!0)}}touchend(U,te,we){if((!this.centroid||U.timeStamp-this.startTime>500)&&(this.aborted=!0),we.length===0){const Pe=!this.aborted&&this.centroid;if(this.reset(),Pe)return Pe}}}class Ll{constructor(U){this.singleTap=new ss(U),this.numTaps=U.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(U,te,we){this.singleTap.touchstart(U,te,we)}touchmove(U,te,we){this.singleTap.touchmove(U,te,we)}touchend(U,te,we){const Pe=this.singleTap.touchend(U,te,we);if(Pe){const Re=U.timeStamp-this.lastTime<500,Be=!this.lastTap||this.lastTap.dist(Pe)<30;if(Re&&Be||this.reset(),this.count++,this.lastTime=U.timeStamp,this.lastTap=Pe,this.count===this.numTaps)return this.reset(),Pe}}}class bu{constructor(){this._zoomIn=new Ll({numTouches:1,numTaps:2}),this._zoomOut=new Ll({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(U,te,we){this._zoomIn.touchstart(U,te,we),this._zoomOut.touchstart(U,te,we)}touchmove(U,te,we){this._zoomIn.touchmove(U,te,we),this._zoomOut.touchmove(U,te,we)}touchend(U,te,we){const Pe=this._zoomIn.touchend(U,te,we),Re=this._zoomOut.touchend(U,te,we);return Pe?(this._active=!0,U.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Be=>Be.easeTo({duration:300,zoom:Be.getZoom()+1,around:Be.unproject(Pe)},{originalEvent:U})}):Re?(this._active=!0,U.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Be=>Be.easeTo({duration:300,zoom:Be.getZoom()-1,around:Be.unproject(Re)},{originalEvent:U})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Au={0:1,2:2};class ls{constructor(U){this.reset(),this._clickTolerance=U.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(U,te){return!1}_move(U,te){return{}}mousedown(U,te){if(this._lastPoint)return;const we=Je(U);this._correctButton(U,we)&&(this._lastPoint=te,this._eventButton=we)}mousemoveWindow(U,te){const we=this._lastPoint;if(we){if(U.preventDefault(),this._eventButton!=null&&function(Pe,Re){const Be=Au[Re];return Pe.buttons===void 0||(Pe.buttons&Be)!==Be}(U,this._eventButton))this.reset();else if(this._moved||!(te.dist(we)<this._clickTolerance))return this._moved=!0,this._lastPoint=te,this._move(we,te)}}mouseupWindow(U){this._lastPoint&&Je(U)===this._eventButton&&(this._moved&&Xe(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wu extends ls{mousedown(U,te){super.mousedown(U,te),this._lastPoint&&(this._active=!0)}_correctButton(U,te){return te===0&&!U.ctrlKey}_move(U,te){return{around:te,panDelta:te.sub(U)}}}class na extends ls{_correctButton(U,te){return te===0&&U.ctrlKey||te===2}_move(U,te){const we=.8*(te.x-U.x);if(we)return this._active=!0,{bearingDelta:we}}contextmenu(U){U.preventDefault()}}class qi extends ls{_correctButton(U,te){return te===0&&U.ctrlKey||te===2}_move(U,te){const we=-.5*(te.y-U.y);if(we)return this._active=!0,{pitchDelta:we}}contextmenu(U){U.preventDefault()}}class dh{constructor(U,te){this._map=U,this._el=U.getCanvasContainer(),this._minTouches=1,this._clickTolerance=te.clickTolerance||1,this.reset(),j.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new j.pointGeometry(0,0)}touchstart(U,te,we){return this._calculateTransform(U,te,we)}touchmove(U,te,we){if(this._active&&!(we.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(we.length===1&&!j.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return U.cancelable&&U.preventDefault(),this._calculateTransform(U,te,we)}}touchend(U,te,we){this._calculateTransform(U,te,we),this._active&&we.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(U,te,we){we.length>0&&(this._active=!0);const Pe=$l(we,te),Re=new j.pointGeometry(0,0),Be=new j.pointGeometry(0,0);let Ne=0;for(const Ke in Pe){const Qe=Pe[Ke],ut=this._touches[Ke];ut&&(Re._add(Qe),Be._add(Qe.sub(ut)),Ne++,Pe[Ke]=Qe)}if(this._touches=Pe,Ne<this._minTouches||!Be.mag())return;const qe=Be.div(Ne);return this._sum._add(qe),this._sum.mag()<this._clickTolerance?void 0:{around:Re.div(Ne),panDelta:qe}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ee("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Bl{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(U){}_move(U,te,we){return{}}touchstart(U,te,we){this._firstTwoTouches||we.length<2||(this._firstTwoTouches=[we[0].identifier,we[1].identifier],this._start([te[0],te[1]]))}touchmove(U,te,we){const Pe=this._firstTwoTouches;if(!Pe)return;U.preventDefault();const[Re,Be]=Pe,Ne=Fl(we,te,Re),qe=Fl(we,te,Be);if(!Ne||!qe)return;const Ke=this._aroundCenter?null:Ne.add(qe).div(2);return this._move([Ne,qe],Ke,U)}touchend(U,te,we){if(!this._firstTwoTouches)return;const[Pe,Re]=this._firstTwoTouches,Be=Fl(we,te,Pe),Ne=Fl(we,te,Re);Be&&Ne||(this._active&&Xe(),this.reset())}touchcancel(){this.reset()}enable(U){this._enabled=!0,this._aroundCenter=!!U&&U.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fl(_e,U,te){for(let we=0;we<_e.length;we++)if(_e[we].identifier===te)return U[we]}function Eu(_e,U){return Math.log(_e/U)/Math.LN2}class Ao extends Bl{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(U){this._startDistance=this._distance=U[0].dist(U[1])}_move(U,te){const we=this._distance;if(this._distance=U[0].dist(U[1]),this._active||!(Math.abs(Eu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eu(this._distance,we),pinchAround:te}}}function Pc(_e,U){return 180*_e.angleWith(U)/Math.PI}class Da extends Bl{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])}_move(U,te){const we=this._vector;if(this._vector=U[0].sub(U[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pc(this._vector,we),pinchAround:te}}_isBelowThreshold(U){this._minDiameter=Math.min(this._minDiameter,U.mag());const te=25/(Math.PI*this._minDiameter)*360,we=Pc(U,this._startVector);return Math.abs(we)<te}}function wo(_e){return Math.abs(_e.y)>Math.abs(_e.x)}class ra extends Bl{constructor(U){super(),this._map=U}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(U){this._lastPoints=U,wo(U[0].sub(U[1]))&&(this._valid=!1)}_move(U,te,we){const Pe=this._lastPoints;if(!Pe)return;const Re=U[0].sub(Pe[0]),Be=U[1].sub(Pe[1]);return this._map._cooperativeGestures&&we.touches.length<3||(this._valid=this.gestureBeginsVertically(Re,Be,we.timeStamp),!this._valid)?void 0:(this._lastPoints=U,this._active=!0,{pitchDelta:(Re.y+Be.y)/2*-.5})}gestureBeginsVertically(U,te,we){if(this._valid!==void 0)return this._valid;const Pe=U.mag()>=2,Re=te.mag()>=2;if(!Pe&&!Re)return;if(!Pe||!Re)return this._firstMove==null&&(this._firstMove=we),we-this._firstMove<100&&void 0;const Be=U.y>0==te.y>0;return wo(U)&&wo(te)&&Be}}const ur={panStep:100,bearingStep:15,pitchStep:10};class cs{constructor(){const U=ur;this._panStep=U.panStep,this._bearingStep=U.bearingStep,this._pitchStep=U.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(U){if(U.altKey||U.ctrlKey||U.metaKey)return;let te=0,we=0,Pe=0,Re=0,Be=0;switch(U.keyCode){case 61:case 107:case 171:case 187:te=1;break;case 189:case 109:case 173:te=-1;break;case 37:U.shiftKey?we=-1:(U.preventDefault(),Re=-1);break;case 39:U.shiftKey?we=1:(U.preventDefault(),Re=1);break;case 38:U.shiftKey?Pe=1:(U.preventDefault(),Be=-1);break;case 40:U.shiftKey?Pe=-1:(U.preventDefault(),Be=1);break;default:return}return this._rotationDisabled&&(we=0,Pe=0),{cameraAnimation:Ne=>{const qe=Ne.getZoom();Ne.easeTo({duration:300,easeId:"keyboardHandler",easing:Tu,zoom:te?Math.round(qe)+te*(U.shiftKey?2:1):qe,bearing:Ne.getBearing()+we*this._bearingStep,pitch:Ne.getPitch()+Pe*this._pitchStep,offset:[-Re*this._panStep,-Be*this._panStep],center:Ne.getCenter()},{originalEvent:U})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tu(_e){return _e*(2-_e)}const us=4.000244140625;class el{constructor(U,te){this._map=U,this._el=U.getCanvasContainer(),this._handler=te,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,j.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(U){this._defaultZoomRate=U}setWheelZoomRate(U){this._wheelZoomRate=U}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(U){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!U&&U.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(U){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(U.ctrlKey||U.metaKey||this.isZooming()||j.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let te=U.deltaMode===j.window.WheelEvent.DOM_DELTA_LINE?40*U.deltaY:U.deltaY;const we=j.exported.now(),Pe=we-(this._lastWheelEventTime||0);this._lastWheelEventTime=we,te!==0&&te%us==0?this._type="wheel":te!==0&&Math.abs(te)<4?this._type="trackpad":Pe>400?(this._type=null,this._lastValue=te,this._timeout=setTimeout(this._onTimeout,40,U)):this._type||(this._type=Math.abs(Pe*te)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,te+=this._lastValue)),U.shiftKey&&te&&(te/=4),this._type&&(this._lastWheelEvent=U,this._delta-=te,this._active||this._start(U)),U.preventDefault()}_onTimeout(U){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(U)}_start(U){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const te=Ye(this._el,U);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:te,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const U=this._map.transform,te=()=>U._terrainEnabled()&&this._aroundCoord?U.computeZoomRelativeTo(this._aroundCoord):U.zoom;if(this._delta!==0){const qe=this._type==="wheel"&&Math.abs(this._delta)>us?this._wheelZoomRate:this._defaultZoomRate;let Ke=2/(1+Math.exp(-Math.abs(this._delta*qe)));this._delta<0&&Ke!==0&&(Ke=1/Ke);const Qe=te(),ut=Math.pow(2,Qe),gt=typeof this._targetZoom=="number"?U.zoomScale(this._targetZoom):ut;this._targetZoom=Math.min(U.maxZoom,Math.max(U.minZoom,U.scaleZoom(gt*Ke))),this._type==="wheel"&&(this._startZoom=Qe,this._easing=this._smoothOutEasing(200)),this._delta=0}const we=typeof this._targetZoom=="number"?this._targetZoom:te(),Pe=this._startZoom,Re=this._easing;let Be,Ne=!1;if(this._type==="wheel"&&Pe&&Re){const qe=Math.min((j.exported.now()-this._lastWheelEventTime)/200,1),Ke=Re(qe);Be=j.number(Pe,we,Ke),qe<1?this._frameId||(this._frameId=!0):Ne=!0}else Be=we,Ne=!0;return this._active=!0,Ne&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ne,zoomDelta:Be-te(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(U){let te=j.ease;if(this._prevEase){const we=this._prevEase,Pe=(j.exported.now()-we.start)/we.duration,Re=we.easing(Pe+.01)-we.easing(Pe),Be=.27/Math.sqrt(Re*Re+1e-4)*.01,Ne=Math.sqrt(.0729-Be*Be);te=j.bezier(Be,Ne,.25,1)}return this._prevEase={start:j.exported.now(),duration:U,easing:te},te}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=Ee("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(j.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Oc{constructor(U,te){this._clickZoom=U,this._tapZoom=te}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ku{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(U,te){return U.preventDefault(),{cameraAnimation:we=>{we.easeTo({duration:300,zoom:we.getZoom()+(U.shiftKey?-1:1),around:we.unproject(te)},{originalEvent:U})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cu{constructor(){this._tap=new Ll({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(U,te,we){this._swipePoint||(this._tapTime&&U.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?we.length>0&&(this._swipePoint=te[0],this._swipeTouch=we[0].identifier):this._tap.touchstart(U,te,we))}touchmove(U,te,we){if(this._tapTime){if(this._swipePoint){if(we[0].identifier!==this._swipeTouch)return;const Pe=te[0],Re=Pe.y-this._swipePoint.y;return this._swipePoint=Pe,U.preventDefault(),this._active=!0,{zoomDelta:Re/128}}}else this._tap.touchmove(U,te,we)}touchend(U,te,we){this._tapTime?this._swipePoint&&we.length===0&&this.reset():this._tap.touchend(U,te,we)&&(this._tapTime=U.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Su{constructor(U,te,we){this._el=U,this._mousePan=te,this._touchPan=we}enable(U){this._inertiaOptions=U||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Iu{constructor(U,te,we){this._pitchWithRotate=U.pitchWithRotate,this._mouseRotate=te,this._mousePitch=we}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class tl{constructor(U,te,we,Pe){this._el=U,this._touchZoom=te,this._touchRotate=we,this._tapDragZoom=Pe,this._rotationDisabled=!1,this._enabled=!0}enable(U){this._touchZoom.enable(U),this._rotationDisabled||this._touchRotate.enable(U),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const si=_e=>_e.zoom||_e.drag||_e.pitch||_e.rotate;class Nl extends j.Event{}class fi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(U,te){const we=j.sub([],te,U);this.radius=j.length(we[2]<0?j.div([],we,this.constants):[we[0],we[1],0])}projectRay(U){j.div(U,U,this.constants),j.normalize(U,U),j.mul$1(U,U,this.constants);const te=j.scale$2([],U,this.radius);if(te[2]>0){const we=j.scale$2([],[0,0,1],j.dot(te,[0,0,1])),Pe=j.scale$2([],j.normalize([],[te[0],te[1],0]),this.radius),Re=j.add([],te,j.scale$2([],j.sub([],j.add([],Pe,we),te),2));te[0]=Re[0],te[1]=Re[1]}return te}}function Hi(_e){return _e.panDelta&&_e.panDelta.mag()||_e.zoomDelta||_e.bearingDelta||_e.pitchDelta}class Rc{constructor(U,te){this._map=U,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mc(U),this._bearingSnap=te.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new fi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(te),j.bindAll(["handleEvent","handleWindowEvent"],this);const we=this._el;this._listeners=[[we,"touchstart",{passive:!0}],[we,"touchmove",{passive:!1}],[we,"touchend",void 0],[we,"touchcancel",void 0],[we,"mousedown",void 0],[we,"mousemove",void 0],[we,"mouseup",void 0],[j.window.document,"mousemove",{capture:!0}],[j.window.document,"mouseup",void 0],[we,"mouseover",void 0],[we,"mouseout",void 0],[we,"dblclick",void 0],[we,"click",void 0],[we,"keydown",{capture:!1}],[we,"keyup",void 0],[we,"wheel",{passive:!1}],[we,"contextmenu",void 0],[j.window,"blur",void 0]];for(const[Pe,Re,Be]of this._listeners)Pe.addEventListener(Re,Pe===j.window.document?this.handleWindowEvent:this.handleEvent,Be)}destroy(){for(const[U,te,we]of this._listeners)U.removeEventListener(te,U===j.window.document?this.handleWindowEvent:this.handleEvent,we)}_addDefaultHandlers(U){const te=this._map,we=te.getCanvasContainer();this._add("mapEvent",new Js(te,U));const Pe=te.boxZoom=new xu(te,U);this._add("boxZoom",Pe);const Re=new bu,Be=new ku;te.doubleClickZoom=new Oc(Be,Re),this._add("tapZoom",Re),this._add("clickZoom",Be);const Ne=new Cu;this._add("tapDragZoom",Ne);const qe=te.touchPitch=new ra(te);this._add("touchPitch",qe);const Ke=new na(U),Qe=new qi(U);te.dragRotate=new Iu(U,Ke,Qe),this._add("mouseRotate",Ke,["mousePitch"]),this._add("mousePitch",Qe,["mouseRotate"]);const ut=new wu(U),gt=new dh(te,U);te.dragPan=new Su(we,ut,gt),this._add("mousePan",ut),this._add("touchPan",gt,["touchZoom","touchRotate"]);const Mt=new Da,kt=new Ao;te.touchZoomRotate=new tl(we,kt,Mt,Ne),this._add("touchRotate",Mt,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]),this._add("blockableMapEvent",new vu(te));const Tt=te.scrollZoom=new el(te,this);this._add("scrollZoom",Tt,["mousePan"]);const Ct=te.keyboard=new cs;this._add("keyboard",Ct);for(const wt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])U.interactive&&U[wt]&&te[wt].enable(U[wt])}_add(U,te,we){this._handlers.push({handlerName:U,handler:te,allowed:we}),this._handlersById[U]=te}stop(U){if(!this._updatingCamera){for(const{handler:te}of this._handlers)te.reset();this._inertia.clear(),this._fireEvents({},{},U),this._changes=[]}}isActive(){for(const{handler:U}of this._handlers)if(U.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!si(this._eventsInProgress)||this.isZooming()}_blockedByActive(U,te,we){for(const Pe in U)if(Pe!==we&&(!te||te.indexOf(Pe)<0))return!0;return!1}handleWindowEvent(U){this.handleEvent(U,`${U.type}Window`)}_getMapTouches(U){const te=[];for(const we of U)this._el.contains(we.target)&&te.push(we);return te}handleEvent(U,te){this._updatingCamera=!0;const we=U.type==="renderFrame",Pe=we?void 0:U,Re={needsRenderFrame:!1},Be={},Ne={},qe=U.touches?this._getMapTouches(U.touches):void 0,Ke=qe?He(this._el,qe):we?void 0:Ye(this._el,U);for(const{handlerName:gt,handler:Mt,allowed:kt}of this._handlers){if(!Mt.isEnabled())continue;let Tt;this._blockedByActive(Ne,kt,gt)?Mt.reset():Mt[te||U.type]&&(Tt=Mt[te||U.type](U,Ke,qe),this.mergeHandlerResult(Re,Be,Tt,gt,Pe),Tt&&Tt.needsRenderFrame&&this._triggerRenderFrame()),(Tt||Mt.isActive())&&(Ne[gt]=Mt)}const Qe={};for(const gt in this._previousActiveHandlers)Ne[gt]||(Qe[gt]=Pe);this._previousActiveHandlers=Ne,(Object.keys(Qe).length||Hi(Re))&&(this._changes.push([Re,Be,Qe]),this._triggerRenderFrame()),(Object.keys(Ne).length||Hi(Re))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ut}=Re;ut&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ut(this._map))}mergeHandlerResult(U,te,we,Pe,Re){if(!we)return;j.extend(U,we);const Be={handlerName:Pe,originalEvent:we.originalEvent||Re};we.zoomDelta!==void 0&&(te.zoom=Be),we.panDelta!==void 0&&(te.drag=Be),we.pitchDelta!==void 0&&(te.pitch=Be),we.bearingDelta!==void 0&&(te.rotate=Be)}_applyChanges(){const U={},te={},we={};for(const[Pe,Re,Be]of this._changes)Pe.panDelta&&(U.panDelta=(U.panDelta||new j.pointGeometry(0,0))._add(Pe.panDelta)),Pe.zoomDelta&&(U.zoomDelta=(U.zoomDelta||0)+Pe.zoomDelta),Pe.bearingDelta&&(U.bearingDelta=(U.bearingDelta||0)+Pe.bearingDelta),Pe.pitchDelta&&(U.pitchDelta=(U.pitchDelta||0)+Pe.pitchDelta),Pe.around!==void 0&&(U.around=Pe.around),Pe.aroundCoord!==void 0&&(U.aroundCoord=Pe.aroundCoord),Pe.pinchAround!==void 0&&(U.pinchAround=Pe.pinchAround),Pe.noInertia&&(U.noInertia=Pe.noInertia),j.extend(te,Re),j.extend(we,Be);this._updateMapTransform(U,te,we),this._changes=[]}_updateMapTransform(U,te,we){const Pe=this._map,Re=Pe.transform,Be=zt=>[zt.x,zt.y,zt.z];if((zt=>{const Ot=this._eventsInProgress.drag;return Ot&&!this._handlersById[Ot.handlerName].isActive()})()&&!Hi(U)){const zt=Re.zoom;Re.cameraElevationReference="sea",Re.recenterOnTerrain(),Re.cameraElevationReference="ground",zt!==Re.zoom&&this._map._update(!0)}if(!Hi(U))return void this._fireEvents(te,we,!0);let{panDelta:Ne,zoomDelta:qe,bearingDelta:Ke,pitchDelta:Qe,around:ut,aroundCoord:gt,pinchAround:Mt}=U;Mt!==void 0&&(ut=Mt),(zt=>te.drag&&!this._eventsInProgress.drag)()&&ut&&(this._dragOrigin=Be(Re.pointCoordinate3D(ut)),this._trackingEllipsoid.setup(Re._camera.position,this._dragOrigin)),Re.cameraElevationReference="sea",Pe._stop(!0),ut=ut||Pe.transform.centerPoint,Ke&&(Re.bearing+=Ke),Qe&&(Re.pitch+=Qe),Re._updateCameraState();const kt=[0,0,0];if(Ne)if(Re.projection.name==="mercator"){const zt=this._trackingEllipsoid.projectRay(Re.screenPointToMercatorRay(ut).dir),Ot=this._trackingEllipsoid.projectRay(Re.screenPointToMercatorRay(ut.sub(Ne)).dir);kt[0]=Ot[0]-zt[0],kt[1]=Ot[1]-zt[1]}else{const zt=Re.pointCoordinate(ut);if(Re.projection.name==="globe"){Ne=Ne.rotate(-Re.angle);const Ot=Re._pixelsPerMercatorPixel/Re.worldSize;kt[0]=-Ne.x*j.mercatorScale(j.latFromMercatorY(zt.y))*Ot,kt[1]=-Ne.y*j.mercatorScale(Re.center.lat)*Ot}else{const Ot=Re.pointCoordinate(ut.sub(Ne));zt&&Ot&&(kt[0]=Ot.x-zt.x,kt[1]=Ot.y-zt.y)}}const Tt=Re.zoom,Ct=[0,0,0];if(qe){const zt=Be(gt||Re.pointCoordinate3D(ut)),Ot={dir:j.normalize([],j.sub([],zt,Re._camera.position))};if(Ot.dir[2]<0){const Qt=Re.zoomDeltaToMovement(zt,qe);j.scale$2(Ct,Ot.dir,Qt)}}const wt=j.add(kt,kt,Ct);Re._translateCameraConstrained(wt),qe&&Math.abs(Re.zoom-Tt)>1e-4&&Re.recenterOnTerrain(),Re.cameraElevationReference="ground",this._map._update(),U.noInertia||this._inertia.record(U),this._fireEvents(te,we,!0)}_fireEvents(U,te,we){const Pe=si(this._eventsInProgress),Re=si(U),Be={};for(const Qe in U){const{originalEvent:ut}=U[Qe];this._eventsInProgress[Qe]||(Be[`${Qe}start`]=ut),this._eventsInProgress[Qe]=U[Qe]}!Pe&&Re&&this._fireEvent("movestart",Re.originalEvent);for(const Qe in Be)this._fireEvent(Qe,Be[Qe]);Re&&this._fireEvent("move",Re.originalEvent);for(const Qe in U){const{originalEvent:ut}=U[Qe];this._fireEvent(Qe,ut)}const Ne={};let qe;for(const Qe in this._eventsInProgress){const{handlerName:ut,originalEvent:gt}=this._eventsInProgress[Qe];this._handlersById[ut].isActive()||(delete this._eventsInProgress[Qe],qe=te[ut]||gt,Ne[`${Qe}end`]=qe)}for(const Qe in Ne)this._fireEvent(Qe,Ne[Qe]);const Ke=si(this._eventsInProgress);if(we&&(Pe||Re)&&!Ke){this._updatingCamera=!0;const Qe=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ut=gt=>gt!==0&&-this._bearingSnap<gt&&gt<this._bearingSnap;Qe?(ut(Qe.bearing||this._map.getBearing())&&(Qe.bearing=0),this._map.easeTo(Qe,{originalEvent:qe})):(this._map.fire(new j.Event("moveend",{originalEvent:qe})),ut(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(U,te){this._map.fire(new j.Event(U,te?{originalEvent:te}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(U=>{this._frameId=void 0,this.handleEvent(new Nl("renderFrame",{timeStamp:U})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Dc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class zc extends j.Evented{constructor(U,te){super(),this._moving=!1,this._zooming=!1,this.transform=U,this._bearingSnap=te.bearingSnap,j.bindAll(["_renderFrameCallback"],this)}getCenter(){return new j.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(U,te){return this.jumpTo({center:U},te)}panBy(U,te,we){return U=j.pointGeometry.convert(U).mult(-1),this.panTo(this.transform.center,j.extend({offset:U},te),we)}panTo(U,te,we){return this.easeTo(j.extend({center:U},te),we)}getZoom(){return this.transform.zoom}setZoom(U,te){return this.jumpTo({zoom:U},te),this}zoomTo(U,te,we){return this.easeTo(j.extend({zoom:U},te),we)}zoomIn(U,te){return this.zoomTo(this.getZoom()+1,U,te),this}zoomOut(U,te){return this.zoomTo(this.getZoom()-1,U,te),this}getBearing(){return this.transform.bearing}setBearing(U,te){return this.jumpTo({bearing:U},te),this}getPadding(){return this.transform.padding}setPadding(U,te){return this.jumpTo({padding:U},te),this}rotateTo(U,te,we){return this.easeTo(j.extend({bearing:U},te),we)}resetNorth(U,te){return this.rotateTo(0,j.extend({duration:1e3},U),te),this}resetNorthPitch(U,te){return this.easeTo(j.extend({bearing:0,pitch:0,duration:1e3},U),te),this}snapToNorth(U,te){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,te):this}getPitch(){return this.transform.pitch}setPitch(U,te){return this.jumpTo({pitch:U},te),this}cameraForBounds(U,te){this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),U=j.LngLatBounds.convert(U);const we=te&&te.bearing||0;return this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),we,te)}_extendCameraOptions(U){const te={top:0,bottom:0,right:0,left:0};if(typeof(U=j.extend({padding:te,offset:[0,0],maxZoom:this.transform.maxZoom},U)).padding=="number"){const we=U.padding;U.padding={top:we,bottom:we,right:we,left:we}}return U.padding=j.extend(te,U.padding),U}_cameraForBoxAndBearing(U,te,we,Pe){const Re=this._extendCameraOptions(Pe),Be=this.transform,Ne=Be.padding,qe=Be.project(j.LngLat.convert(U)),Ke=Be.project(j.LngLat.convert(te)),Qe=new j.pointGeometry(qe.x,Ke.y),ut=new j.pointGeometry(Ke.x,qe.y),gt=-j.degToRad(we),Mt=qe.rotate(gt),kt=Ke.rotate(gt),Tt=Qe.rotate(gt),Ct=ut.rotate(gt),wt=new j.pointGeometry(Math.max(Mt.x,kt.x,Tt.x,Ct.x),Math.max(Mt.y,kt.y,Tt.y,Ct.y)),zt=new j.pointGeometry(Math.min(Mt.x,kt.x,Tt.x,Ct.x),Math.min(Mt.y,kt.y,Tt.y,Ct.y)),Ot=wt.sub(zt),Qt=(Be.width-((Ne.left||0)+(Ne.right||0)+Re.padding.left+Re.padding.right))/Ot.x,Kt=(Be.height-((Ne.top||0)+(Ne.bottom||0)+Re.padding.top+Re.padding.bottom))/Ot.y;if(Kt<0||Qt<0)return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Gt=Math.min(Be.scaleZoom(Be.scale*Math.min(Qt,Kt)),Re.maxZoom),Yt=typeof Re.offset.x=="number"&&typeof Re.offset.y=="number"?new j.pointGeometry(Re.offset.x,Re.offset.y):j.pointGeometry.convert(Re.offset),Wt=new j.pointGeometry((Re.padding.left-Re.padding.right)/2,(Re.padding.top-Re.padding.bottom)/2).rotate(we*Math.PI/180),sn=Yt.add(Wt).mult(Be.scale/Be.zoomScale(Gt));return{center:Be.unproject(qe.add(Ke).div(2).sub(sn)),zoom:Gt,bearing:we}}_cameraForBox(U,te,we,Pe,Re){const Be=this._extendCameraOptions(Re);we=we||0,Pe=Pe||0,U=j.LngLat.convert(U),te=j.LngLat.convert(te);const Ne=this.transform.clone();Ne.padding=Be.padding;const qe=this.getFreeCameraOptions(),Ke=new j.LngLat(.5*(U.lng+te.lng),.5*(U.lat+te.lat)),Qe=.5*(we+Pe);if(Ne._camera.position[2]<j.mercatorZfromAltitude(Qe,Ke.lat))return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");qe.lookAtPoint(Ke),Ne.setFreeCameraOptions(qe);const ut=j.MercatorCoordinate.fromLngLat(U),gt=j.MercatorCoordinate.fromLngLat(te),Mt=Ne.pointRayIntersection(Ne.centerPoint,Qe),kt=[(Tt=Ne.rayIntersectionCoordinate(Mt)).x,Tt.y,Tt.z];var Tt;const Ct=Ne.screenPointToMercatorRay(Ne.centerPoint),wt=Ne.projection.name!=="globe";let zt,Ot=0;do{const Qt=Math.floor(Ne.zoom),Kt=1<<Qt,Gt=Math.min(Kt*ut.x,Kt*gt.x),Yt=Math.min(Kt*ut.y,Kt*gt.y),Wt=Math.max(Kt*ut.x,Kt*gt.x),sn=Math.max(Kt*ut.y,Kt*gt.y),mn=new j.Aabb([Gt,Yt,we],[Wt,sn,Pe]),Wn=j.Frustum.fromInvProjectionMatrix(Ne.invProjMatrix,Ne.worldSize,Qt,wt);if(mn.intersects(Wn)!==2){zt&&(Ne._camera.position=j.scaleAndAdd([],Ne._camera.position,Ct.dir,-zt),Ne._updateStateFromCamera());break}const pn=j.sub([],Ne._camera.position,kt);zt=.5*j.length(pn),Ne._camera.position=j.scaleAndAdd([],Ne._camera.position,Ct.dir,zt);try{Ne._updateStateFromCamera()}catch{return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ot<10);return{center:Ne.center,zoom:Ne.zoom,bearing:Ne.bearing,pitch:Ne.pitch}}fitBounds(U,te,we){return this.transform.projection.name==="globe"&&j.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(U,te),te,we)}_raycastElevationBox(U,te){const we=this.transform.elevation;if(!we)return;const Pe=new j.pointGeometry(U.x,te.y),Re=new j.pointGeometry(te.x,U.y),Be=we.pointCoordinate(U);if(!Be)return;const Ne=we.pointCoordinate(te);if(!Ne)return;const qe=we.pointCoordinate(Pe);if(!qe)return;const Ke=we.pointCoordinate(Re);if(!Ke)return;const Qe=new j.MercatorCoordinate(Be[0],Be[1]).toLngLat(),ut=new j.MercatorCoordinate(Ne[0],Ne[1]).toLngLat(),gt=new j.MercatorCoordinate(qe[0],qe[1]).toLngLat(),Mt=new j.MercatorCoordinate(Ke[0],Ke[1]).toLngLat(),kt=Math.min(Qe.lng,Math.min(ut.lng,Math.min(gt.lng,Mt.lng))),Tt=Math.min(Qe.lat,Math.min(ut.lat,Math.min(gt.lat,Mt.lat))),Ct=Math.max(Qe.lng,Math.max(ut.lng,Math.max(gt.lng,Mt.lng))),wt=Math.max(Qe.lat,Math.max(ut.lat,Math.max(gt.lat,Mt.lat))),zt=Math.min(Be[3],Math.min(Ne[3],Math.min(qe[3],Ke[3]))),Ot=Math.max(Be[3],Math.max(Ne[3],Math.max(qe[3],Ke[3])));return{minLngLat:new j.LngLat(kt,Tt),maxLngLat:new j.LngLat(Ct,wt),minAltitude:zt,maxAltitude:Ot}}fitScreenCoordinates(U,te,we,Pe,Re){let Be,Ne,qe,Ke;this.transform.projection.name==="globe"&&j.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const Qe=j.pointGeometry.convert(U),ut=j.pointGeometry.convert(te),gt=this._raycastElevationBox(Qe,ut);if(gt)Be=gt.minLngLat,Ne=gt.maxLngLat,qe=gt.minAltitude,Ke=gt.maxAltitude;else{if(this.transform.anyCornerOffEdge(Qe,ut))return this;Be=this.transform.pointLocation(Qe),Ne=this.transform.pointLocation(ut)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(j.pointGeometry.convert(U)),this.transform.pointLocation(j.pointGeometry.convert(te)),we,Pe):this._cameraForBox(Be,Ne,qe,Ke,Pe),Pe,Re)}_fitInternal(U,te,we){return U?(delete(te=j.extend(U,te)).padding,te.linear?this.easeTo(te,we):this.flyTo(te,we)):this}jumpTo(U,te){this.stop();const we=U.preloadOnly?this.transform.clone():this.transform;let Pe=!1,Re=!1,Be=!1;return"zoom"in U&&we.zoom!==+U.zoom&&(Pe=!0,we.zoom=+U.zoom),U.center!==void 0&&(we.center=j.LngLat.convert(U.center)),"bearing"in U&&we.bearing!==+U.bearing&&(Re=!0,we.bearing=+U.bearing),"pitch"in U&&we.pitch!==+U.pitch&&(Be=!0,we.pitch=+U.pitch),U.padding==null||we.isPaddingEqual(U.padding)||(we.padding=U.padding),U.preloadOnly?(this._preloadTiles(we),this):(this.fire(new j.Event("movestart",te)).fire(new j.Event("move",te)),Pe&&this.fire(new j.Event("zoomstart",te)).fire(new j.Event("zoom",te)).fire(new j.Event("zoomend",te)),Re&&this.fire(new j.Event("rotatestart",te)).fire(new j.Event("rotate",te)).fire(new j.Event("rotateend",te)),Be&&this.fire(new j.Event("pitchstart",te)).fire(new j.Event("pitch",te)).fire(new j.Event("pitchend",te)),this.fire(new j.Event("moveend",te)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||j.warnOnce(Dc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(U,te){const we=this.transform;if(!we.projection.supportsFreeCamera)return j.warnOnce(Dc),this;this.stop();const Pe=we.zoom,Re=we.pitch,Be=we.bearing;we.setFreeCameraOptions(U);const Ne=Pe!==we.zoom,qe=Re!==we.pitch,Ke=Be!==we.bearing;return this.fire(new j.Event("movestart",te)).fire(new j.Event("move",te)),Ne&&this.fire(new j.Event("zoomstart",te)).fire(new j.Event("zoom",te)).fire(new j.Event("zoomend",te)),Ke&&this.fire(new j.Event("rotatestart",te)).fire(new j.Event("rotate",te)).fire(new j.Event("rotateend",te)),qe&&this.fire(new j.Event("pitchstart",te)).fire(new j.Event("pitch",te)).fire(new j.Event("pitchend",te)),this.fire(new j.Event("moveend",te)),this}easeTo(U,te){this._stop(!1,U.easeId),((U=j.extend({offset:[0,0],duration:500,easing:j.ease},U)).animate===!1||!U.essential&&j.exported.prefersReducedMotion)&&(U.duration=0);const we=this.transform,Pe=this.getZoom(),Re=this.getBearing(),Be=this.getPitch(),Ne=this.getPadding(),qe="zoom"in U?+U.zoom:Pe,Ke="bearing"in U?this._normalizeBearing(U.bearing,Re):Re,Qe="pitch"in U?+U.pitch:Be,ut="padding"in U?U.padding:we.padding,gt=j.pointGeometry.convert(U.offset);let Mt,kt,Tt;if(we.projection.name==="globe"){const sn=j.MercatorCoordinate.fromLngLat(we.center),mn=gt.rotate(-we.angle);sn.x+=mn.x/we.worldSize,sn.y+=mn.y/we.worldSize;const Wn=sn.toLngLat(),pn=j.LngLat.convert(U.center||Wn);this._normalizeCenter(pn),Mt=we.centerPoint.add(mn),kt=new j.pointGeometry(sn.x,sn.y).mult(we.worldSize),Tt=new j.pointGeometry(j.mercatorXfromLng(pn.lng),j.mercatorYfromLat(pn.lat)).mult(we.worldSize).sub(kt)}else{Mt=we.centerPoint.add(gt);const sn=we.pointLocation(Mt),mn=j.LngLat.convert(U.center||sn);this._normalizeCenter(mn),kt=we.project(sn),Tt=we.project(mn).sub(kt)}const Ct=we.zoomScale(qe-Pe);let wt,zt;U.around&&(wt=j.LngLat.convert(U.around),zt=we.locationPoint(wt));const Ot=this._zooming||qe!==Pe,Qt=this._rotating||Re!==Ke,Kt=this._pitching||Qe!==Be,Gt=!we.isPaddingEqual(ut),Yt=sn=>mn=>{if(Ot&&(sn.zoom=j.number(Pe,qe,mn)),Qt&&(sn.bearing=j.number(Re,Ke,mn)),Kt&&(sn.pitch=j.number(Be,Qe,mn)),Gt&&(sn.interpolatePadding(Ne,ut,mn),Mt=sn.centerPoint.add(gt)),wt)sn.setLocationAtPoint(wt,zt);else{const Wn=sn.zoomScale(sn.zoom-Pe),pn=qe>Pe?Math.min(2,Ct):Math.max(.5,Ct),Dn=Math.pow(pn,1-mn),Nn=sn.unproject(kt.add(Tt.mult(mn*Dn)).mult(Wn));sn.setLocationAtPoint(sn.renderWorldCopies?Nn.wrap():Nn,Mt)}return U.preloadOnly||this._fireMoveEvents(te),sn};if(U.preloadOnly){const sn=this._emulate(Yt,U.duration,we);return this._preloadTiles(sn),this}const Wt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ot,this._rotating=Qt,this._pitching=Kt,this._padding=Gt,this._easeId=U.easeId,this._prepareEase(te,U.noMoveStart,Wt),this._ease(Yt(we),sn=>{we.recenterOnTerrain(),this._afterEase(te,sn)},U),this}_prepareEase(U,te,we={}){this._moving=!0,this.transform.cameraElevationReference="sea",te||we.moving||this.fire(new j.Event("movestart",U)),this._zooming&&!we.zooming&&this.fire(new j.Event("zoomstart",U)),this._rotating&&!we.rotating&&this.fire(new j.Event("rotatestart",U)),this._pitching&&!we.pitching&&this.fire(new j.Event("pitchstart",U))}_fireMoveEvents(U){this.fire(new j.Event("move",U)),this._zooming&&this.fire(new j.Event("zoom",U)),this._rotating&&this.fire(new j.Event("rotate",U)),this._pitching&&this.fire(new j.Event("pitch",U))}_afterEase(U,te){if(this._easeId&&te&&this._easeId===te)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const we=this._zooming,Pe=this._rotating,Re=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,we&&this.fire(new j.Event("zoomend",U)),Pe&&this.fire(new j.Event("rotateend",U)),Re&&this.fire(new j.Event("pitchend",U)),this.fire(new j.Event("moveend",U))}flyTo(U,te){if(!U.essential&&j.exported.prefersReducedMotion){const or=j.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(or,te)}this.stop(),U=j.extend({offset:[0,0],speed:1.2,curve:1.42,easing:j.ease},U);const we=this.transform,Pe=this.getZoom(),Re=this.getBearing(),Be=this.getPitch(),Ne=this.getPadding(),qe="zoom"in U?j.clamp(+U.zoom,we.minZoom,we.maxZoom):Pe,Ke="bearing"in U?this._normalizeBearing(U.bearing,Re):Re,Qe="pitch"in U?+U.pitch:Be,ut="padding"in U?U.padding:we.padding,gt=we.zoomScale(qe-Pe),Mt=j.pointGeometry.convert(U.offset);let kt=we.centerPoint.add(Mt);const Tt=we.pointLocation(kt),Ct=j.LngLat.convert(U.center||Tt);this._normalizeCenter(Ct);const wt=we.project(Tt),zt=we.project(Ct).sub(wt);let Ot=U.curve;const Qt=Math.max(we.width,we.height),Kt=Qt/gt,Gt=zt.mag();if("minZoom"in U){const or=j.clamp(Math.min(U.minZoom,Pe,qe),we.minZoom,we.maxZoom),tr=Qt/we.zoomScale(or-Pe);Ot=Math.sqrt(tr/Gt*2)}const Yt=Ot*Ot;function Wt(or){const tr=(Kt*Kt-Qt*Qt+(or?-1:1)*Yt*Yt*Gt*Gt)/(2*(or?Kt:Qt)*Yt*Gt);return Math.log(Math.sqrt(tr*tr+1)-tr)}function sn(or){return(Math.exp(or)-Math.exp(-or))/2}function mn(or){return(Math.exp(or)+Math.exp(-or))/2}const Wn=Wt(0);let pn=function(or){return mn(Wn)/mn(Wn+Ot*or)},Dn=function(or){return Qt*((mn(Wn)*(sn(tr=Wn+Ot*or)/mn(tr))-sn(Wn))/Yt)/Gt;var tr},Nn=(Wt(1)-Wn)/Ot;if(Math.abs(Gt)<1e-6||!isFinite(Nn)){if(Math.abs(Qt-Kt)<1e-6)return this.easeTo(U,te);const or=Kt<Qt?-1:1;Nn=Math.abs(Math.log(Kt/Qt))/Ot,Dn=function(){return 0},pn=function(tr){return Math.exp(or*Ot*tr)}}U.duration="duration"in U?+U.duration:1e3*Nn/("screenSpeed"in U?+U.screenSpeed/Ot:+U.speed),U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0);const er=Re!==Ke,kn=Qe!==Be,Zn=!we.isPaddingEqual(ut),Ln=or=>tr=>{const pr=tr*Nn,yr=1/pn(pr);or.zoom=tr===1?qe:Pe+or.scaleZoom(yr),er&&(or.bearing=j.number(Re,Ke,tr)),kn&&(or.pitch=j.number(Be,Qe,tr)),Zn&&(or.interpolatePadding(Ne,ut,tr),kt=or.centerPoint.add(Mt));const Tr=tr===1?Ct:or.unproject(wt.add(zt.mult(Dn(pr))).mult(yr));return or.setLocationAtPoint(or.renderWorldCopies?Tr.wrap():Tr,kt),or._updateCameraOnTerrain(),U.preloadOnly||this._fireMoveEvents(te),or};if(U.preloadOnly){const or=this._emulate(Ln,U.duration,we);return this._preloadTiles(or),this}return this._zooming=!0,this._rotating=er,this._pitching=kn,this._padding=Zn,this._prepareEase(te,!1),this._ease(Ln(we),()=>this._afterEase(te),U),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(U,te){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const we=this._onEaseEnd;this._onEaseEnd=void 0,we.call(this,te)}if(!U){const we=this.handlers;we&&we.stop(!1)}return this}_ease(U,te,we){we.animate===!1||we.duration===0?(U(1),te()):(this._easeStart=j.exported.now(),this._easeOptions=we,this._onEaseFrame=U,this._onEaseEnd=te,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const U=Math.min((j.exported.now()-this._easeStart)/this._easeOptions.duration,1),te=this._onEaseFrame;te&&te(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(U,te){U=j.wrap(U,-180,180);const we=Math.abs(U-te);return Math.abs(U-360-te)<we&&(U-=360),Math.abs(U+360-te)<we&&(U+=360),U}_normalizeCenter(U){const te=this.transform;if(!te.renderWorldCopies||te.maxBounds)return;const we=U.lng-te.center.lng;U.lng+=we>180?-360:we<-180?360:0}_emulate(U,te,we){const Pe=Math.ceil(15*te/1e3),Re=[],Be=U(we.clone());for(let Ne=0;Ne<=Pe;Ne++){const qe=Be(Ne/Pe);Re.push(qe.clone())}return Re}}class mo{constructor(U={}){this.options=U,j.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(U){const te=this.options&&this.options.compact;return this._map=U,this._container=Ee("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=Ee("button","mapboxgl-ctrl-attrib-button",this._container),Ee("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ee("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),te&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),te===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(U,te){const we=this._map._getUIString(`AttributionControl.${te}`);U.setAttribute("aria-label",we),U.removeAttribute("title"),U.firstElementChild&&U.firstElementChild.setAttribute("title",we)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let U=this._editLink;U||(U=this._editLink=this._container.querySelector(".mapbox-improve-map"));const te=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||j.config.ACCESS_TOKEN}];if(U){const we=te.reduce((Pe,Re,Be)=>(Re.value&&(Pe+=`${Re.key}=${Re.value}${Be<te.length-1?"&":""}`),Pe),"?");U.href=`${j.config.FEEDBACK_URL}/${we}#${Dl(this._map,!0)}`,U.rel="noopener nofollow",this._setElementTitle(U,"MapFeedback")}}_updateData(U){!U||U.sourceDataType!=="metadata"&&U.sourceDataType!=="visibility"&&U.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let U=[];if(this._map.style.stylesheet){const Pe=this._map.style.stylesheet;this.styleOwner=Pe.owner,this.styleId=Pe.id}const te=this._map.style._sourceCaches;for(const Pe in te){const Re=te[Pe];if(Re.used){const Be=Re.getSource();Be.attribution&&U.indexOf(Be.attribution)<0&&U.push(Be.attribution)}}U.sort((Pe,Re)=>Pe.length-Re.length),U=U.filter((Pe,Re)=>{for(let Be=Re+1;Be<U.length;Be++)if(U[Be].indexOf(Pe)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?U=[...this.options.customAttribution,...U]:U.unshift(this.options.customAttribution));const we=U.join(" | ");we!==this._attribHTML&&(this._attribHTML=we,U.length?(this._innerContainer.innerHTML=we,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ya{constructor(){j.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(U){this._map=U,this._container=Ee("div","mapboxgl-ctrl");const te=Ee("a","mapboxgl-ctrl-logo");return te.target="_blank",te.rel="noopener nofollow",te.href="https://www.mapbox.com/",te.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),te.setAttribute("rel","noopener nofollow"),this._container.appendChild(te),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(U){U&&U.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const U=this._map.style._sourceCaches;if(Object.entries(U).length===0)return!0;for(const te in U){const we=U[te].getSource();if(we.hasOwnProperty("mapbox_logo")&&!we.mapbox_logo)return!1}return!0}_updateCompact(){const U=this._container.children;if(U.length){const te=U[0];this._map.getCanvasContainer().offsetWidth<250?te.classList.add("mapboxgl-compact"):te.classList.remove("mapboxgl-compact")}}}class $c{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(U){const te=++this._id;return this._queue.push({callback:U,id:te,cancelled:!1}),te}remove(U){const te=this._currentlyRunning,we=te?this._queue.concat(te):this._queue;for(const Pe of we)if(Pe.id===U)return void(Pe.cancelled=!0)}run(U=0){const te=this._currentlyRunning=this._queue;this._queue=[];for(const we of te)if(!we.cancelled&&(we.callback(U),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function va(_e,U,te){if(_e=new j.LngLat(_e.lng,_e.lat),U){const we=new j.LngLat(_e.lng-360,_e.lat),Pe=new j.LngLat(_e.lng+360,_e.lat),Re=360*Math.ceil(Math.abs(_e.lng-te.center.lng)/360),Be=te.locationPoint(_e).distSqr(U),Ne=U.x<0||U.y<0||U.x>te.width||U.y>te.height;te.locationPoint(we).distSqr(U)<Be&&(Ne||Math.abs(we.lng-te.center.lng)<Re)?_e=we:te.locationPoint(Pe).distSqr(U)<Be&&(Ne||Math.abs(Pe.lng-te.center.lng)<Re)&&(_e=Pe)}for(;Math.abs(_e.lng-te.center.lng)>180;){const we=te.locationPoint(_e);if(we.x>=0&&we.y>=0&&we.x<=te.width&&we.y<=te.height)break;_e.lng>te.center.lng?_e.lng-=360:_e.lng+=360}return _e}const nl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class jl extends j.Evented{constructor(U,te){if(super(),(U instanceof j.window.HTMLElement||te)&&(U=j.extend({element:U},te)),j.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=U&&U.anchor||"center",this._color=U&&U.color||"#3FB1CE",this._scale=U&&U.scale||1,this._draggable=U&&U.draggable||!1,this._clickTolerance=U&&U.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=U&&U.rotation||0,this._rotationAlignment=U&&U.rotationAlignment||"auto",this._pitchAlignment=U&&U.pitchAlignment&&U.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),U&&U.element)this._element=U.element,this._offset=j.pointGeometry.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ee("div");const Pe=41,Re=27,Be=Ce("svg",{display:"block",height:Pe*this._scale+"px",width:Re*this._scale+"px",viewBox:`0 0 ${Re} ${Pe}`},this._element),Ne=Ce("radialGradient",{id:"shadowGradient"},Ce("defs",{},Be));Ce("stop",{offset:"10%","stop-opacity":.4},Ne),Ce("stop",{offset:"100%","stop-opacity":.05},Ne),Ce("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Be),Ce("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Be),Ce("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Be),Ce("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Be),this._offset=j.pointGeometry.convert(U&&U.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Pe=>{Pe.preventDefault()}),this._element.addEventListener("mousedown",Pe=>{Pe.preventDefault()});const we=this._element.classList;for(const Pe in nl)we.remove(`mapboxgl-marker-anchor-${Pe}`);we.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(U){return U===this._map||(this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._updateMoving),U.on("moveend",this._update),U.on("remove",this._clearFadeTimer),U._addMarker(this),this.setDraggable(this._draggable),this._update(),U.on("click",this._onMapClick)),this}remove(){const U=this._map;return U&&(U.off("click",this._onMapClick),U.off("move",this._updateMoving),U.off("moveend",this._update),U.off("mousedown",this._addDragHandler),U.off("touchstart",this._addDragHandler),U.off("mouseup",this._onUp),U.off("touchend",this._onUp),U.off("mousemove",this._onMove),U.off("touchmove",this._onMove),U.off("remove",this._clearFadeTimer),U._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(U){return this._lngLat=j.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){const Pe=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Pe,-1*(38.1-13.5+Pe)],"bottom-right":[-Pe,-1*(38.1-13.5+Pe)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=U,U._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(U){const te=U.code,we=U.charCode||U.keyCode;te!=="Space"&&te!=="Enter"&&we!==32&&we!==13||this.togglePopup()}_onMapClick(U){const te=U.originalEvent.target,we=this._element;this._popup&&(te===we||we.contains(te))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const U=this._popup;return U?(U.isOpen()?(U.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(U.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const U=this._map;if(!U)return!1;const te=U.unproject(this._pos),we=U.getFreeCameraOptions();if(!we.position)return!1;const Pe=we.position.toLngLat();return Pe.distanceTo(te)<.9*Pe.distanceTo(this._lngLat)}_evaluateOpacity(){const U=this._map;if(!U)return;const te=this._pos;if(!te||te.x<0||te.x>U.transform.width||te.y<0||te.y>U.transform.height)return void this._clearFadeTimer();const we=U.unproject(te);let Pe;U._showingGlobe()&&j.isLngLatBehindGlobe(U.transform,this._lngLat)?Pe=0:(Pe=1-U._queryFogOpacity(we),U.transform._terrainEnabled()&&U.getTerrain()&&this._behindTerrain()&&(Pe*=.2)),this._element.style.opacity=`${Pe}`,this._element.style.pointerEvents=Pe>0?"auto":"none",this._popup&&this._popup._setOpacity(Pe),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const U=this._pos;if(!U||!this._map)return;const te=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${U.x}px,${U.y}px)
            ${nl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${te.x}px,${te.y}px)
        `}_calculateXYTransform(){const U=this._pos,te=this._map,we=this.getPitchAlignment();if(!te||!U||we!=="map")return"";if(!te._showingGlobe()){const qe=te.getPitch();return qe?`rotateX(${qe}deg)`:""}const Pe=j.radToDeg(j.globeTiltAtLngLat(te.transform,this._lngLat)),Re=U.sub(j.globeCenterToScreenPoint(te.transform)),Be=Math.abs(Re.x)+Math.abs(Re.y);if(Be===0)return"";const Ne=Pe/Be;return`rotateX(${-Re.y*Ne}deg) rotateY(${Re.x*Ne}deg)`}_calculateZTransform(){const U=this._pos,te=this._map;if(!te||!U)return"";let we=0;const Pe=this.getRotationAlignment();if(Pe==="map")if(te._showingGlobe()){const Re=te.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Be=te.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(Re);we=j.radToDeg(Math.atan2(Be.y,Be.x))-90}else we=-te.getBearing();else if(Pe==="horizon"){const Re=j.smoothstep(4,6,te.getZoom()),Be=j.globeCenterToScreenPoint(te.transform);Be.y+=Re*te.transform.height;const Ne=U.sub(Be),qe=j.radToDeg(Math.atan2(Ne.y,Ne.x));we=(qe>90?qe-270:qe+90)*(1-Re)}return we+=this._rotation,we?`rotateZ(${we}deg)`:""}_update(U){j.window.cancelAnimationFrame(this._updateFrameId);const te=this._map;te&&(te.transform.renderWorldCopies&&(this._lngLat=va(this._lngLat,this._pos,te.transform)),this._pos=te.project(this._lngLat),U===!0?this._updateFrameId=j.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),te._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(te._showingGlobe()||te.getTerrain()||te.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(U){return this._offset=j.pointGeometry.convert(U),this._update(),this}_onMove(U){const te=this._map;if(te){if(!this._isDragging){const we=this._clickTolerance||te._clickTolerance;this._isDragging=U.point.dist(this._pointerdownPos)>=we}this._isDragging&&(this._pos=U.point.sub(this._positionDelta),this._lngLat=te.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new j.Event("dragstart"))),this.fire(new j.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const U=this._map;U&&(U.off("mousemove",this._onMove),U.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new j.Event("dragend")),this._state="inactive"}_addDragHandler(U){const te=this._map;te&&this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos),this._pointerdownPos=U.point,this._state="pending",te.on("mousemove",this._onMove),te.on("touchmove",this._onMove),te.once("mouseup",this._onUp),te.once("touchend",this._onUp))}setDraggable(U){this._draggable=!!U;const te=this._map;return te&&(U?(te.on("mousedown",this._addDragHandler),te.on("touchstart",this._addDragHandler)):(te.off("mousedown",this._addDragHandler),te.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(U){return this._rotation=U||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(U){return this._rotationAlignment=U||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(U){return this._pitchAlignment=U||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class ia{constructor(U){this.jumpTo(U)}getValue(U){if(U<=this._startTime)return this._start;if(U>=this._endTime)return this._end;const te=j.easeCubicInOut((U-this._startTime)/(this._endTime-this._startTime));return this._start*(1-te)+this._end*te}isEasing(U){return U>=this._startTime&&U<=this._endTime}jumpTo(U){this._startTime=-1/0,this._endTime=-1/0,this._start=U,this._end=U}easeTo(U,te,we){this._start=this.getValue(te),this._end=U,this._startTime=te,this._endTime=te+we}}const Lc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Ul={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function $o(_e){_e.parentNode&&_e.parentNode.removeChild(_e)}const Bc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Vl{constructor(U,te,we=!1){this._clickTolerance=10,this.element=te,this.mouseRotate=new na({clickTolerance:U.dragRotate._mouseRotate._clickTolerance}),this.map=U,we&&(this.mousePitch=new qi({clickTolerance:U.dragRotate._mousePitch._clickTolerance})),j.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),te.addEventListener("mousedown",this.mousedown),te.addEventListener("touchstart",this.touchstart,{passive:!1}),te.addEventListener("touchmove",this.touchmove),te.addEventListener("touchend",this.touchend),te.addEventListener("touchcancel",this.reset)}down(U,te){this.mouseRotate.mousedown(U,te),this.mousePitch&&this.mousePitch.mousedown(U,te),Ue()}move(U,te){const we=this.map,Pe=this.mouseRotate.mousemoveWindow(U,te),Re=Pe&&Pe.bearingDelta;if(Re&&we.setBearing(we.getBearing()+Re),this.mousePitch){const Be=this.mousePitch.mousemoveWindow(U,te),Ne=Be&&Be.pitchDelta;Ne&&we.setPitch(we.getPitch()+Ne)}}off(){const U=this.element;U.removeEventListener("mousedown",this.mousedown),U.removeEventListener("touchstart",this.touchstart,{passive:!1}),U.removeEventListener("touchmove",this.touchmove),U.removeEventListener("touchend",this.touchend),U.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){$e(),j.window.removeEventListener("mousemove",this.mousemove),j.window.removeEventListener("mouseup",this.mouseup)}mousedown(U){this.down(j.extend({},U,{ctrlKey:!0,preventDefault:()=>U.preventDefault()}),Ye(this.element,U)),j.window.addEventListener("mousemove",this.mousemove),j.window.addEventListener("mouseup",this.mouseup)}mousemove(U){this.move(U,Ye(this.element,U))}mouseup(U){this.mouseRotate.mouseupWindow(U),this.mousePitch&&this.mousePitch.mouseupWindow(U),this.offTemp()}touchstart(U){U.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=He(this.element,U.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>U.preventDefault()},this._startPos))}touchmove(U){U.targetTouches.length!==1?this.reset():(this._lastPos=He(this.element,U.targetTouches)[0],this.move({preventDefault:()=>U.preventDefault()},this._lastPos))}touchend(U){U.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Hr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Fc={maxWidth:100,unit:"metric"};function Gl(_e,U,te){const we=rl(U),Pe=we/U,Re={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[te];this._map._requestDomTask(()=>{this._container.style.width=_e*Pe+"px",this._container.innerHTML=`${we}&nbsp;${Re}`})}function rl(_e){const U=Math.pow(10,`${Math.floor(_e)}`.length-1);let te=_e/U;return te=te>=10?10:te>=5?5:te>=3?3:te>=2?2:te>=1?1:function(we){const Pe=Math.pow(10,Math.ceil(-Math.log(we)/Math.LN10));return Math.round(we*Pe)/Pe}(te),U*te}const Nc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},jc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function il(_e=new j.pointGeometry(0,0),U="bottom"){if(typeof _e=="number"){const te=Math.round(Math.sqrt(.5*Math.pow(_e,2)));switch(U){case"top":return new j.pointGeometry(0,_e);case"top-left":return new j.pointGeometry(te,te);case"top-right":return new j.pointGeometry(-te,te);case"bottom":return new j.pointGeometry(0,-_e);case"bottom-left":return new j.pointGeometry(te,-te);case"bottom-right":return new j.pointGeometry(-te,-te);case"left":return new j.pointGeometry(_e,0);case"right":return new j.pointGeometry(-_e,0)}return new j.pointGeometry(0,0)}return _e instanceof j.pointGeometry||Array.isArray(_e)?j.pointGeometry.convert(_e):j.pointGeometry.convert(_e[U]||[0,0])}const hs={version:j.version,supported:ce,setRTLTextPlugin:j.setRTLTextPlugin,getRTLTextPluginStatus:j.getRTLTextPluginStatus,Map:class extends zc{constructor(_e){if((_e=j.extend({},Ul,_e)).minZoom!=null&&_e.maxZoom!=null&&_e.minZoom>_e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_e.minPitch!=null&&_e.maxPitch!=null&&_e.minPitch>_e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_e.minPitch!=null&&_e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_e.maxPitch!=null&&_e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(_e.antialias&&j.isSafariWithAntialiasingBug(j.window)&&(_e.antialias=!1,j.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Xs(_e.minZoom,_e.maxZoom,_e.minPitch,_e.maxPitch,_e.renderWorldCopies),_e),this._interactive=_e.interactive,this._minTileCacheSize=_e.minTileCacheSize,this._maxTileCacheSize=_e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=_e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_e.preserveDrawingBuffer,this._antialias=_e.antialias,this._trackResize=_e.trackResize,this._bearingSnap=_e.bearingSnap,this._refreshExpiredTiles=_e.refreshExpiredTiles,this._fadeDuration=_e.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=_e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_e.collectResourceTiming,this._optimizeForTerrain=_e.optimizeForTerrain,this._language=_e.language==="auto"?j.window.navigator.language:_e.language,this._worldview=_e.worldview,this._renderTaskQueue=new $c,this._domRenderTaskQueue=new $c,this._controls=[],this._markers=[],this._mapId=j.uniqueId(),this._locale=j.extend({},Lc,_e.locale),this._clickTolerance=_e.clickTolerance,this._cooperativeGestures=_e.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ia(0),this._useExplicitProjection=!1,this._requestManager=new j.RequestManager(_e.transformRequest,_e.accessToken,_e.testMode),this._silenceAuthErrors=!!_e.testMode,typeof _e.container=="string"){if(this._container=j.window.document.getElementById(_e.container),!this._container)throw new Error(`Container '${_e.container}' not found.`)}else{if(!(_e.container instanceof j.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_e.container}if(this._container.childNodes.length>0&&j.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),_e.maxBounds&&this.setMaxBounds(_e.maxBounds),j.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),j.window!==void 0&&(j.window.addEventListener("online",this._onWindowOnline,!1),j.window.addEventListener("resize",this._onWindowResize,!1),j.window.addEventListener("orientationchange",this._onWindowResize,!1),j.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Rc(this,_e),this._localFontFamily=_e.localFontFamily,this._localIdeographFontFamily=_e.localIdeographFontFamily,_e.style&&this.setStyle(_e.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),_e.projection&&this.setProjection(_e.projection),this._hash=_e.hash&&new gu(typeof _e.hash=="string"&&_e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_e.center,zoom:_e.zoom,bearing:_e.bearing,pitch:_e.pitch}),_e.bounds&&(this.resize(),this.fitBounds(_e.bounds,j.extend({},_e.fitBoundsOptions,{duration:0})))),this.resize(),_e.attributionControl&&this.addControl(new mo({customAttribution:_e.customAttribution})),this._logoControl=new ya,this.addControl(this._logoControl,_e.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",U=>{this._update(U.dataType==="style"),this.fire(new j.Event(`${U.dataType}data`,U))}),this.on("dataloading",U=>{this.fire(new j.Event(`${U.dataType}dataloading`,U))})}_getMapId(){return this._mapId}addControl(_e,U){if(U===void 0&&(U=_e.getDefaultPosition?_e.getDefaultPosition():"top-right"),!_e||!_e.onAdd)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const te=_e.onAdd(this);this._controls.push(_e);const we=this._controlPositions[U];return U.indexOf("bottom")!==-1?we.insertBefore(te,we.firstChild):we.appendChild(te),this}removeControl(_e){if(!_e||!_e.onRemove)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const U=this._controls.indexOf(_e);return U>-1&&this._controls.splice(U,1),_e.onRemove(this),this}hasControl(_e){return this._controls.indexOf(_e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(_e){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const U=!this._moving;return U&&this.fire(new j.Event("movestart",_e)).fire(new j.Event("move",_e)),this.fire(new j.Event("resize",_e)),U&&this.fire(new j.Event("moveend",_e)),this}getBounds(){return this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(_e){return this.transform.setMaxBounds(j.LngLatBounds.convert(_e)),this._update()}setMinZoom(_e){if((_e=_e==null?-2:_e)>=-2&&_e<=this.transform.maxZoom)return this.transform.minZoom=_e,this._update(),this.getZoom()<_e?this.setZoom(_e):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_e){if((_e=_e==null?22:_e)>=this.transform.minZoom)return this.transform.maxZoom=_e,this._update(),this.getZoom()>_e?this.setZoom(_e):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_e){if((_e=_e==null?0:_e)<0)throw new Error("minPitch must be greater than or equal to 0");if(_e>=0&&_e<=this.transform.maxPitch)return this.transform.minPitch=_e,this._update(),this.getPitch()<_e?this.setPitch(_e):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_e){if((_e=_e==null?85:_e)>85)throw new Error("maxPitch must be less than or equal to 85");if(_e>=this.transform.minPitch)return this.transform.maxPitch=_e,this._update(),this.getPitch()>_e?this.setPitch(_e):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_e){return this.transform.renderWorldCopies=_e,this._update()}getLanguage(){return this._language}setLanguage(_e){if(this._language=_e==="auto"?j.window.navigator.language:_e,this.style)for(const U in this.style._sourceCaches){const te=this.style._sourceCaches[U]._source;te._setLanguage&&te._setLanguage(this._language)}for(const U of this._controls)U._setLanguage&&U._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(_e){if(this._worldview=_e,this.style)for(const U in this.style._sourceCaches){const te=this.style._sourceCaches[U]._source;te._setWorldview&&te._setWorldview(_e)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(_e){return this._lazyInitEmptyStyle(),_e?typeof _e=="string"&&(_e={name:_e}):_e=null,this._useExplicitProjection=!!_e,this._prioritizeAndUpdateProjection(_e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const _e=this.transform,U=_e.projection.name;let te;U==="globe"&&_e.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?(_e.setMercatorFromTransition(),te=!0):U==="mercator"&&_e.zoom<j.GLOBE_ZOOM_THRESHOLD_MAX&&(_e.setProjection({name:"globe"}),te=!0),te&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(_e,U){return this._updateProjection(_e||U||{name:"mercator"})}_updateProjection(_e){let U;if(U=_e.name==="globe"&&this.transform.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(_e),this.style.applyProjectionUpdate(),U){this.painter.clearBackgroundTiles();for(const te in this.style._sourceCaches)this.style._sourceCaches[te].clearTiles();this._update(!0)}return this}project(_e){return this.transform.locationPoint3D(j.LngLat.convert(_e))}unproject(_e){return this.transform.pointLocation3D(j.pointGeometry.convert(_e))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(_e,U,te){if(_e==="mouseenter"||_e==="mouseover"){let we=!1;const Pe=Be=>{const Ne=U.filter(Ke=>this.getLayer(Ke)),qe=Ne.length?this.queryRenderedFeatures(Be.point,{layers:Ne}):[];qe.length?we||(we=!0,te.call(this,new Yi(_e,this,Be.originalEvent,{features:qe}))):we=!1},Re=()=>{we=!1};return{layers:new Set(U),listener:te,delegates:{mousemove:Pe,mouseout:Re}}}if(_e==="mouseleave"||_e==="mouseout"){let we=!1;const Pe=Be=>{const Ne=U.filter(qe=>this.getLayer(qe));(Ne.length?this.queryRenderedFeatures(Be.point,{layers:Ne}):[]).length?we=!0:we&&(we=!1,te.call(this,new Yi(_e,this,Be.originalEvent)))},Re=Be=>{we&&(we=!1,te.call(this,new Yi(_e,this,Be.originalEvent)))};return{layers:new Set(U),listener:te,delegates:{mousemove:Pe,mouseout:Re}}}{const we=Pe=>{const Re=U.filter(Ne=>this.getLayer(Ne)),Be=Re.length?this.queryRenderedFeatures(Pe.point,{layers:Re}):[];Be.length&&(Pe.features=Be,te.call(this,Pe),delete Pe.features)};return{layers:new Set(U),listener:te,delegates:{[_e]:we}}}}on(_e,U,te){if(te===void 0)return super.on(_e,U);Array.isArray(U)||(U=[U]);const we=this._createDelegatedListener(_e,U,te);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_e]=this._delegatedListeners[_e]||[],this._delegatedListeners[_e].push(we);for(const Pe in we.delegates)this.on(Pe,we.delegates[Pe]);return this}once(_e,U,te){if(te===void 0)return super.once(_e,U);Array.isArray(U)||(U=[U]);const we=this._createDelegatedListener(_e,U,te);for(const Pe in we.delegates)this.once(Pe,we.delegates[Pe]);return this}off(_e,U,te){if(te===void 0)return super.off(_e,U);U=new Set(Array.isArray(U)?U:[U]);const we=(Re,Be)=>{if(Re.size!==Be.size)return!1;for(const Ne of Re)if(!Be.has(Ne))return!1;return!0},Pe=this._delegatedListeners?this._delegatedListeners[_e]:void 0;return Pe&&(Re=>{for(let Be=0;Be<Re.length;Be++){const Ne=Re[Be];if(Ne.listener===te&&we(Ne.layers,U)){for(const qe in Ne.delegates)this.off(qe,Ne.delegates[qe]);return Re.splice(Be,1),this}}})(Pe),this}queryRenderedFeatures(_e,U){return this.style?(U!==void 0||_e===void 0||_e instanceof j.pointGeometry||Array.isArray(_e)||(U=_e,_e=void 0),this.style.queryRenderedFeatures(_e=_e||[[0,0],[this.transform.width,this.transform.height]],U=U||{},this.transform)):[]}querySourceFeatures(_e,U){return this.style.querySourceFeatures(_e,U)}queryTerrainElevation(_e,U){const te=this.transform.elevation;return te?(U=j.extend({},{exaggerated:!0},U),te.getAtPoint(j.MercatorCoordinate.fromLngLat(_e),null,U.exaggerated)):null}setStyle(_e,U){return(U=j.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},U)).diff!==!1&&U.localIdeographFontFamily===this._localIdeographFontFamily&&U.localFontFamily===this._localFontFamily&&this.style&&_e?(this._diffStyle(_e,U),this):(this._localIdeographFontFamily=U.localIdeographFontFamily,this._localFontFamily=U.localFontFamily,this._updateStyle(_e,U))}_getUIString(_e){const U=this._locale[_e];if(U==null)throw new Error(`Missing UI string '${_e}'`);return U}_updateStyle(_e,U){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),_e&&(this.style=new xo(this,U||{}),this.style.setEventedParent(this,{style:this.style}),typeof _e=="string"?this.style.loadURL(_e):this.style.loadJSON(_e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new xo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_e,U){if(typeof _e=="string"){const te=this._requestManager.normalizeStyleURL(_e),we=this._requestManager.transformRequest(te,j.ResourceType.Style);j.getJSON(we,(Pe,Re)=>{Pe?this.fire(new j.ErrorEvent(Pe)):Re&&this._updateDiff(Re,U)})}else typeof _e=="object"&&this._updateDiff(_e,U)}_updateDiff(_e,U){try{this.style.setState(_e)&&this._update(!0)}catch(te){j.warnOnce(`Unable to perform style diff: ${te.message||te.error||te}.  Rebuilding the style from scratch.`),this._updateStyle(_e,U)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(j.warnOnce("There is no style added to the map."),!1)}addSource(_e,U){return this._lazyInitEmptyStyle(),this.style.addSource(_e,U),this._update(!0)}isSourceLoaded(_e){return!!this.style&&this.style._isSourceCacheLoaded(_e)}areTilesLoaded(){const _e=this.style&&this.style._sourceCaches;for(const U in _e){const te=_e[U]._tiles;for(const we in te){const Pe=te[we];if(Pe.state!=="loaded"&&Pe.state!=="errored")return!1}}return!0}addSourceType(_e,U,te){this._lazyInitEmptyStyle(),this.style.addSourceType(_e,U,te)}removeSource(_e){return this.style.removeSource(_e),this._updateTerrain(),this._update(!0)}getSource(_e){return this.style.getSource(_e)}addImage(_e,U,{pixelRatio:te=1,sdf:we=!1,stretchX:Pe,stretchY:Re,content:Be}={}){if(this._lazyInitEmptyStyle(),U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap){const{width:Ne,height:qe,data:Ke}=j.exported.getImageData(U);this.style.addImage(_e,{data:new j.RGBAImage({width:Ne,height:qe},Ke),pixelRatio:te,stretchX:Pe,stretchY:Re,content:Be,sdf:we,version:0})}else if(U.width===void 0||U.height===void 0)this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Ne,height:qe}=U,Ke=U;this.style.addImage(_e,{data:new j.RGBAImage({width:Ne,height:qe},new Uint8Array(Ke.data)),pixelRatio:te,stretchX:Pe,stretchY:Re,content:Be,sdf:we,version:0,userImage:Ke}),Ke.onAdd&&Ke.onAdd(this,_e)}}updateImage(_e,U){const te=this.style.getImage(_e);if(!te)return void this.fire(new j.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const we=U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap?j.exported.getImageData(U):U,{width:Pe,height:Re}=we;Pe!==void 0&&Re!==void 0?Pe===te.data.width&&Re===te.data.height?(te.data.replace(we.data,!(U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap)),this.style.updateImage(_e,te)):this.fire(new j.ErrorEvent(new Error(`The width and height of the updated image (${Pe}, ${Re})
                must be that same as the previous version of the image
                (${te.data.width}, ${te.data.height})`))):this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(_e){return _e?!!this.style.getImage(_e):(this.fire(new j.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(_e){this.style.removeImage(_e)}loadImage(_e,U){j.getImage(this._requestManager.transformRequest(_e,j.ResourceType.Image),(te,we)=>{U(te,we instanceof j.window.HTMLImageElement?j.exported.getImageData(we):we)})}listImages(){return this.style.listImages()}addLayer(_e,U){return this._lazyInitEmptyStyle(),this.style.addLayer(_e,U),this._update(!0)}moveLayer(_e,U){return this.style.moveLayer(_e,U),this._update(!0)}removeLayer(_e){return this.style.removeLayer(_e),this._update(!0)}getLayer(_e){return this.style.getLayer(_e)}setLayerZoomRange(_e,U,te){return this.style.setLayerZoomRange(_e,U,te),this._update(!0)}setFilter(_e,U,te={}){return this.style.setFilter(_e,U,te),this._update(!0)}getFilter(_e){return this.style.getFilter(_e)}setPaintProperty(_e,U,te,we={}){return this.style.setPaintProperty(_e,U,te,we),this._update(!0)}getPaintProperty(_e,U){return this.style.getPaintProperty(_e,U)}setLayoutProperty(_e,U,te,we={}){return this.style.setLayoutProperty(_e,U,te,we),this._update(!0)}getLayoutProperty(_e,U){return this.style.getLayoutProperty(_e,U)}setLight(_e,U={}){return this._lazyInitEmptyStyle(),this.style.setLight(_e,U),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(_e){return this._lazyInitEmptyStyle(),!_e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(_e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(_e){return this._lazyInitEmptyStyle(),this.style.setFog(_e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(_e){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(j.LngLat.convert(_e),this.transform):0}setFeatureState(_e,U){return this.style.setFeatureState(_e,U),this._update()}removeFeatureState(_e,U){return this.style.removeFeatureState(_e,U),this._update()}getFeatureState(_e){return this.style.getFeatureState(_e)}_updateContainerDimensions(){if(!this._container)return;const _e=this._container.getBoundingClientRect().width||400,U=this._container.getBoundingClientRect().height||300;let te,we,Pe,Re=this._container;for(;Re&&(!we||!Pe);){const Be=j.window.getComputedStyle(Re).transform;Be&&Be!=="none"&&(te=Be.match(/matrix.*\((.+)\)/)[1].split(", "),te[0]&&te[0]!=="0"&&te[0]!=="1"&&(we=te[0]),te[3]&&te[3]!=="0"&&te[3]!=="1"&&(Pe=te[3])),Re=Re.parentElement}this._containerWidth=we?Math.abs(_e/we):_e,this._containerHeight=Pe?Math.abs(U/Pe):U}_detectMissingCSS(){j.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&j.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const _e=this._container;_e.classList.add("mapboxgl-map"),(this._missingCSSCanary=Ee("div","mapboxgl-canary",_e)).style.visibility="hidden",this._detectMissingCSS();const U=this._canvasContainer=Ee("div","mapboxgl-canvas-container",_e);this._interactive&&U.classList.add("mapboxgl-interactive"),this._canvas=Ee("canvas","mapboxgl-canvas",U),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const te=this._controlContainer=Ee("div","mapboxgl-control-container",_e),we=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Pe=>{we[Pe]=Ee("div",`mapboxgl-ctrl-${Pe}`,te)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_e,U){const te=j.exported.devicePixelRatio||1;this._canvas.width=te*Math.ceil(_e),this._canvas.height=te*Math.ceil(U),this._canvas.style.width=`${_e}px`,this._canvas.style.height=`${U}px`}_addMarker(_e){this._markers.push(_e)}_removeMarker(_e){const U=this._markers.indexOf(_e);U!==-1&&this._markers.splice(U,1)}_setupPainter(){const _e=j.extend({},ce.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),U=this._canvas.getContext("webgl",_e)||this._canvas.getContext("experimental-webgl",_e);U?(j.storeAuthState(U,!0),this.painter=new Tc(U,this.transform),this.on("data",te=>{te.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),j.exported$1.testSupport(U)):this.fire(new j.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(_e){_e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new j.Event("webglcontextlost",{originalEvent:_e}))}_contextRestored(_e){this._setupPainter(),this.resize(),this._update(),this.fire(new j.Event("webglcontextrestored",{originalEvent:_e}))}_onMapScroll(_e){if(_e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_e){return this.style?(this._styleDirty=this._styleDirty||_e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_e){return this._update(),this._renderTaskQueue.add(_e)}_cancelRenderFrame(_e){this._renderTaskQueue.remove(_e)}_requestDomTask(_e){!this.loaded()||this.loaded()&&!this.isMoving()?_e():this._domRenderTaskQueue.add(_e)}_render(_e){let U;const te=this.painter.context.extTimerQuery,we=j.exported.now();if(this.listens("gpu-timing-frame")&&(U=te.createQueryEXT(),te.beginQueryEXT(te.TIME_ELAPSED_EXT,U)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_e),this._domRenderTaskQueue.run(_e),this._removed)return;this._updateProjectionTransition();let Pe=!1;const Re=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const qe=this.transform.zoom,Ke=this.transform.pitch,Qe=j.exported.now();this.style.zoomHistory.update(qe,Qe);const ut=new j.EvaluationParameters(qe,{now:Qe,fadeDuration:Re,pitch:Ke,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),gt=ut.crossFadingFactor();gt===1&&gt===this._crossFadingFactor||(Pe=!0,this._crossFadingFactor=gt),this.style.update(ut)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Be=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Be=this._updateAverageElevation(we),this.style._updateSources(this.transform),this._forceMarkerUpdate()):Be=this._updateAverageElevation(we),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Re,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Re,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new j.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new j.Event("load"))),this.style&&(this.style.hasTransitions()||Pe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),U){const qe=j.exported.now()-we;te.endQueryEXT(te.TIME_ELAPSED_EXT,U),setTimeout(()=>{const Ke=te.getQueryObjectEXT(U,te.QUERY_RESULT_EXT)/1e6;te.deleteQueryEXT(U),this.fire(new j.Event("gpu-timing-frame",{cpuTime:qe,gpuTime:Ke})),j.window.performance.mark("frame-gpu",{startTime:we,detail:{gpuTime:Ke}})},50)}if(this.listens("gpu-timing-layer")){const qe=this.painter.collectGpuTimers();setTimeout(()=>{const Ke=this.painter.queryGpuTimers(qe);this.fire(new j.Event("gpu-timing-layer",{layerTimes:Ke}))},50)}if(this.listens("gpu-timing-deferred-render")){const qe=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Ke=this.painter.queryGpuTimeDeferredRender(qe);this.fire(new j.Event("gpu-timing-deferred-render",{gpuTime:Ke}))},50)}const Ne=this._sourcesDirty||this._styleDirty||this._placementDirty||Be;if(Ne||this._repaint)this.triggerRepaint();else{const qe=!this.isMoving()&&this.loaded();if(qe&&(Be=this._updateAverageElevation(we,!0)),Be)this.triggerRepaint();else if(this._triggerFrame(!1),qe&&(this.fire(new j.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Ke=this._calculateSpeedIndex();this.fire(new j.Event("speedindexcompleted",{speedIndex:Ke})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Ne||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const _e of this._markers)_e._update()}_updateAverageElevation(_e,U=!1){const te=we=>(this.transform.averageElevation=we,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&te(0);if((U||_e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(_e)){const we=this.transform.averageElevation;let Pe=this.transform.sampleAverageElevation(),Re=!1;this.transform.elevation&&(Re=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Pe)?Pe=0:this._averageElevationLastSampledAt=_e;const Be=Math.abs(we-Pe);if(Be>1){if(this._isInitialLoad||Re)return this._averageElevation.jumpTo(Pe),te(Pe);this._averageElevation.easeTo(Pe,_e,300)}else if(Be>1e-4)return this._averageElevation.jumpTo(Pe),te(Pe)}return!!this._averageElevation.isEasing(_e)&&te(this._averageElevation.getValue(_e))}_authenticate(){j.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,_e=>{if(_e&&(_e.message===j.AUTH_ERR_MSG||_e.status===401)){const U=this.painter.context.gl;j.storeAuthState(U,!1),this._logoControl instanceof ya&&this._logoControl._updateLogo(),U&&U.clear(U.DEPTH_BUFFER_BIT|U.COLOR_BUFFER_BIT|U.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new j.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),j.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const _e=this.painter.canvasCopy(),U=this.painter.getCanvasCopiesAndTimestamps();U.timeStamps.push(performance.now());const te=this.painter.context.gl,we=te.createFramebuffer();function Pe(Re){te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Re,0);const Be=new Uint8Array(te.drawingBufferWidth*te.drawingBufferHeight*4);return te.readPixels(0,0,te.drawingBufferWidth,te.drawingBufferHeight,te.RGBA,te.UNSIGNED_BYTE,Be),Be}return te.bindFramebuffer(te.FRAMEBUFFER,we),this._canvasPixelComparison(Pe(_e),U.canvasCopies.map(Pe),U.timeStamps)}_canvasPixelComparison(_e,U,te){let we=te[1]-te[0];const Pe=_e.length/4;for(let Re=0;Re<U.length;Re++){const Be=U[Re];let Ne=0;for(let qe=0;qe<Be.length;qe+=4)Be[qe]===_e[qe]&&Be[qe+1]===_e[qe+1]&&Be[qe+2]===_e[qe+2]&&Be[qe+3]===_e[qe+3]&&(Ne+=1);we+=(te[Re+2]-te[Re+1])*(1-Ne/Pe)}return we}remove(){this._hash&&this._hash.remove();for(const U of this._controls)U.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),j.window!==void 0&&(j.window.removeEventListener("resize",this._onWindowResize,!1),j.window.removeEventListener("orientationchange",this._onWindowResize,!1),j.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.removeEventListener("online",this._onWindowOnline,!1));const _e=this.painter.context.gl.getExtension("WEBGL_lose_context");_e&&_e.loseContext(),$o(this._canvasContainer),$o(this._controlContainer),$o(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),j.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new j.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(_e){this._renderNextFrame=this._renderNextFrame||_e,this.style&&!this._frame&&(this._frame=j.exported.frame(U=>{const te=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,te&&this._render(U)}))}_preloadTiles(_e){const U=this.style?Object.values(this.style._sourceCaches):[];return j.asyncAll(U,(te,we)=>te._preloadTiles(_e,we),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(_e){this._trackResize&&this.resize({originalEvent:_e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_e){this._showTileBoundaries!==_e&&(this._showTileBoundaries=_e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(_e){this._showTerrainWireframe!==_e&&(this._showTerrainWireframe=_e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(_e){this._speedIndexTiming!==_e&&(this._speedIndexTiming=_e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_e){this._showPadding!==_e&&(this._showPadding=_e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_e){this._showCollisionBoxes!==_e&&(this._showCollisionBoxes=_e,_e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_e){this._showOverdrawInspector!==_e&&(this._showOverdrawInspector=_e,this._update())}get repaint(){return!!this._repaint}set repaint(_e){this._repaint!==_e&&(this._repaint=_e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_e){this._vertices=_e,this._update()}_setCacheLimits(_e,U){j.setCacheLimits(_e,U)}get version(){return j.version}},NavigationControl:class{constructor(_e){this.options=j.extend({},Bc,_e),this._container=Ee("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",U=>U.preventDefault()),this.options.showZoom&&(j.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",U=>{this._map&&this._map.zoomIn({},{originalEvent:U})}),Ee("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",U=>{this._map&&this._map.zoomOut({},{originalEvent:U})}),Ee("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(j.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",U=>{const te=this._map;te&&(this.options.visualizePitch?te.resetNorthPitch({},{originalEvent:U}):te.resetNorth({},{originalEvent:U}))}),this._compassIcon=Ee("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const _e=this._map;if(!_e)return;const U=_e.getZoom(),te=U===_e.getMaxZoom(),we=U===_e.getMinZoom();this._zoomInButton.disabled=te,this._zoomOutButton.disabled=we,this._zoomInButton.setAttribute("aria-disabled",te.toString()),this._zoomOutButton.setAttribute("aria-disabled",we.toString())}_rotateCompassArrow(){const _e=this._map;if(!_e)return;const U=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(_e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${_e.transform.pitch}deg) rotateZ(${_e.transform.angle*(180/Math.PI)}deg)`:`rotate(${_e.transform.angle*(180/Math.PI)}deg)`;_e._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=U)})}onAdd(_e){return this._map=_e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),_e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&_e.on("pitch",this._rotateCompassArrow),_e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Vl(_e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const _e=this._map;_e&&(this._container.remove(),this.options.showZoom&&_e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&_e.off("pitch",this._rotateCompassArrow),_e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(_e,U){const te=Ee("button",_e,this._container);return te.type="button",te.addEventListener("click",U),te}_setButtonTitle(_e,U){if(!this._map)return;const te=this._map._getUIString(`NavigationControl.${U}`);_e.setAttribute("aria-label",te),_e.firstElementChild&&_e.firstElementChild.setAttribute("title",te)}},GeolocateControl:class extends j.Evented{constructor(_e){super(),this.options=j.extend({geolocation:j.window.navigator.geolocation},Hr,_e),j.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ys(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(_e){return this._map=_e,this._container=Ee("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(_e){this._supportsGeolocation!==void 0?_e(this._supportsGeolocation):j.window.navigator.permissions!==void 0?j.window.navigator.permissions.query({name:"geolocation"}).then(U=>{this._supportsGeolocation=U.state!=="denied",_e(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,_e(this._supportsGeolocation))}_isOutOfMapMaxBounds(_e){const U=this._map.getMaxBounds(),te=_e.coords;return!!U&&(te.longitude<U.getWest()||te.longitude>U.getEast()||te.latitude<U.getSouth()||te.latitude>U.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(_e){if(this._map){if(this._isOutOfMapMaxBounds(_e))return this._setErrorState(),this.fire(new j.Event("outofmaxbounds",_e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=_e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(_e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(_e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("geolocate",_e)),this._finish()}}_updateCamera(_e){const U=new j.LngLat(_e.coords.longitude,_e.coords.latitude),te=_e.coords.accuracy,we=this._map.getBearing(),Pe=j.extend({bearing:we},this.options.fitBoundsOptions);this._map.fitBounds(U.toBounds(te),Pe,{geolocateSource:!0})}_updateMarker(_e){if(_e){const U=new j.LngLat(_e.coords.longitude,_e.coords.latitude);this._accuracyCircleMarker.setLngLat(U).addTo(this._map),this._userLocationDotMarker.setLngLat(U).addTo(this._map),this._accuracy=_e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const _e=this._map.transform,U=j.mercatorZfromAltitude(1,_e._center.lat)*_e.worldSize,te=Math.ceil(2*this._accuracy*U);this._circleElement.style.width=`${te}px`,this._circleElement.style.height=`${te}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(_e){if(this._map){if(this.options.trackUserLocation)if(_e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(_e.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("error",_e)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(_e){if(this._container.addEventListener("contextmenu",U=>U.preventDefault()),this._geolocateButton=Ee("button","mapboxgl-ctrl-geolocate",this._container),Ee("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",_e===!1){j.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U)}else{const U=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ee("div","mapboxgl-user-location"),this._dotElement.appendChild(Ee("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(Ee("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=Ee("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",U=>{U.geolocateSource||this._watchState!=="ACTIVE_LOCK"||U.originalEvent&&U.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new j.Event("trackuserlocationend")))})}_onDeviceOrientation(_e){this._userLocationDotMarker&&(_e.webkitCompassHeading?this._heading=_e.webkitCompassHeading:_e.absolute===!0&&(this._heading=-1*_e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return j.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new j.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new j.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new j.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(_e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(_e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,_e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const _e=()=>{j.window.addEventListener("ondeviceorientationabsolute"in j.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};j.window.DeviceMotionEvent!==void 0&&typeof j.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(U=>{U==="granted"&&_e()}).catch(console.error):_e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),j.window.removeEventListener("deviceorientation",this._onDeviceOrientation),j.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:mo,ScaleControl:class{constructor(_e){this.options=j.extend({},Fc,_e),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Gl.bind(this)),j.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const _e=this.options.maxWidth||100,U=this._map,te=U._containerHeight/2,we=U._containerWidth/2-_e/2,Pe=U.unproject([we,te]),Re=U.unproject([we+_e,te]),Be=Pe.distanceTo(Re);if(this.options.unit==="imperial"){const Ne=3.2808*Be;Ne>5280?this._setScale(_e,Ne/5280,"mile"):this._setScale(_e,Ne,"foot")}else this.options.unit==="nautical"?this._setScale(_e,Be/1852,"nautical-mile"):Be>=1e3?this._setScale(_e,Be/1e3,"kilometer"):this._setScale(_e,Be,"meter")}_setScale(_e,U,te){const we=rl(U),Pe=we/U;this._map._requestDomTask(()=>{this._container.style.width=_e*Pe+"px",this._container.innerHTML=te!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:te}).format(we):`${we}&nbsp;nm`})}onAdd(_e){return this._map=_e,this._language=_e.getLanguage(),this._container=Ee("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(_e){this._language=_e,this._update()}setUnit(_e){this.options.unit=_e,this._update()}},FullscreenControl:class{constructor(_e){this._fullscreen=!1,_e&&_e.container&&(_e.container instanceof j.window.HTMLElement?this._container=_e.container:j.warnOnce("Full screen control 'container' must be a DOM element.")),j.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in j.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in j.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(_e){return this._map=_e,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ee("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",j.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,j.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!j.window.document.fullscreenEnabled&&!j.window.document.webkitFullscreenEnabled)}_setupUI(){const _e=this._fullscreenButton=Ee("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ee("span","mapboxgl-ctrl-icon",_e).setAttribute("aria-hidden","true"),_e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),j.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const _e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",_e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(j.window.document.fullscreenElement||j.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?j.window.document.exitFullscreen?j.window.document.exitFullscreen():j.window.document.webkitCancelFullScreen&&j.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends j.Evented{constructor(_e){super(),this.options=j.extend(Object.create(Nc),_e),j.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(_e&&_e.className?_e.className.trim().split(/\s+/):[])}addTo(_e){return this._map&&this.remove(),this._map=_e,this.options.closeOnClick&&_e.on("preclick",this._onClose),this.options.closeOnMove&&_e.on("move",this._onClose),_e.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(_e.on("mousemove",this._onMouseEvent),_e.on("mouseup",this._onMouseEvent),_e._canvasContainer.classList.add("mapboxgl-track-pointer")):_e.on("move",this._update),this.fire(new j.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const _e=this._map;return _e&&(_e.off("move",this._update),_e.off("move",this._onClose),_e.off("preclick",this._onClose),_e.off("click",this._onClose),_e.off("remove",this.remove),_e.off("mousemove",this._onMouseEvent),_e.off("mouseup",this._onMouseEvent),_e.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new j.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(_e){this._lngLat=j.LngLat.convert(_e),this._pos=null,this._trackPointer=!1,this._update();const U=this._map;return U&&(U.on("move",this._update),U.off("mousemove",this._onMouseEvent),U._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const _e=this._map;return _e&&(_e.off("move",this._update),_e.on("mousemove",this._onMouseEvent),_e.on("drag",this._onMouseEvent),_e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(_e){return this.setDOMContent(j.window.document.createTextNode(_e))}setHTML(_e){const U=j.window.document.createDocumentFragment(),te=j.window.document.createElement("body");let we;for(te.innerHTML=_e;we=te.firstChild,we;)U.appendChild(we);return this.setDOMContent(U)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(_e){return this.options.maxWidth=_e,this._update(),this}setDOMContent(_e){let U=this._content;if(U)for(;U.hasChildNodes();)U.firstChild&&U.removeChild(U.firstChild);else U=this._content=Ee("div","mapboxgl-popup-content",this._container||void 0);if(U.appendChild(_e),this.options.closeButton){const te=this._closeButton=Ee("button","mapboxgl-popup-close-button",U);te.type="button",te.setAttribute("aria-label","Close popup"),te.setAttribute("aria-hidden","true"),te.innerHTML="&#215;",te.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(_e){return this._classList.add(_e),this._updateClassList(),this}removeClassName(_e){return this._classList.delete(_e),this._updateClassList(),this}setOffset(_e){return this.options.offset=_e,this._update(),this}toggleClassName(_e){let U;return this._classList.delete(_e)?U=!1:(this._classList.add(_e),U=!0),this._updateClassList(),U}_onMouseEvent(_e){this._update(_e.point)}_getAnchor(_e){if(this.options.anchor)return this.options.anchor;const U=this._map,te=this._container,we=this._pos;if(!U||!te||!we)return"bottom";const Pe=te.offsetWidth,Re=te.offsetHeight,Be=we.x<Pe/2,Ne=we.x>U.transform.width-Pe/2;if(we.y+_e<Re)return Be?"top-left":Ne?"top-right":"top";if(we.y>U.transform.height-Re){if(Be)return"bottom-left";if(Ne)return"bottom-right"}return Be?"left":Ne?"right":"bottom"}_updateClassList(){const _e=this._container;if(!_e)return;const U=[...this._classList];U.push("mapboxgl-popup"),this._anchor&&U.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&U.push("mapboxgl-popup-track-pointer"),_e.className=U.join(" ")}_update(_e){const U=this._map,te=this._content;if(!U||!this._lngLat&&!this._trackPointer||!te)return;let we=this._container;if(we||(we=this._container=Ee("div","mapboxgl-popup",U.getContainer()),this._tip=Ee("div","mapboxgl-popup-tip",we),we.appendChild(te)),this.options.maxWidth&&we.style.maxWidth!==this.options.maxWidth&&(we.style.maxWidth=this.options.maxWidth),U.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=va(this._lngLat,this._pos,U.transform)),!this._trackPointer||_e){const Pe=this._pos=this._trackPointer&&_e?_e:U.project(this._lngLat),Re=il(this.options.offset),Be=this._anchor=this._getAnchor(Re.y),Ne=il(this.options.offset,Be),qe=Pe.add(Ne).round();U._requestDomTask(()=>{this._container&&Be&&(this._container.style.transform=`${nl[Be]} translate(${qe.x}px,${qe.y}px)`)})}if(!this._marker&&U._showingGlobe()){const Pe=j.isLngLatBehindGlobe(U.transform,this._lngLat)?0:1;this._setOpacity(Pe)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _e=this._container.querySelector(jc);_e&&_e.focus()}_onClose(){this.remove()}_setOpacity(_e){this._container&&(this._container.style.opacity=`${_e}`),this._content&&(this._content.style.pointerEvents=_e?"auto":"none")}},Marker:jl,Style:xo,LngLat:j.LngLat,LngLatBounds:j.LngLatBounds,Point:j.pointGeometry,MercatorCoordinate:j.MercatorCoordinate,FreeCameraOptions:cr,Evented:j.Evented,config:j.config,prewarm:function(){ei().acquire(gr)},clearPrewarmedResources:function(){const _e=$r;_e&&(_e.isPreloaded()&&_e.numActive()===1?(_e.release(gr),$r=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return j.config.ACCESS_TOKEN},set accessToken(_e){j.config.ACCESS_TOKEN=_e},get baseApiUrl(){return j.config.API_URL},set baseApiUrl(_e){j.config.API_URL=_e},get workerCount(){return Er.workerCount},set workerCount(_e){Er.workerCount=_e},get maxParallelImageRequests(){return j.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_e){j.config.MAX_PARALLEL_IMAGE_REQUESTS=_e},clearStorage(_e){j.clearTileCache(_e)},workerUrl:"",workerClass:null,setNow:j.exported.setNow,restoreNow:j.exported.restoreNow};return hs});var Te=he;return Te})})(mapboxGl);var mapbox=mapboxGl.exports;function render(q,Q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[createVNode("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})])}var axios$2={exports:{}},bind$2=function(Q,V){return function(){for(var he=new Array(arguments.length),ne=0;ne<he.length;ne++)he[ne]=arguments[ne];return Q.apply(V,he)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(q){return Array.isArray(q)}function isUndefined(q){return typeof q=="undefined"}function isBuffer(q){return q!==null&&!isUndefined(q)&&q.constructor!==null&&!isUndefined(q.constructor)&&typeof q.constructor.isBuffer=="function"&&q.constructor.isBuffer(q)}function isArrayBuffer(q){return toString.call(q)==="[object ArrayBuffer]"}function isFormData(q){return toString.call(q)==="[object FormData]"}function isArrayBufferView(q){var Q;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?Q=ArrayBuffer.isView(q):Q=q&&q.buffer&&isArrayBuffer(q.buffer),Q}function isString(q){return typeof q=="string"}function isNumber(q){return typeof q=="number"}function isObject(q){return q!==null&&typeof q=="object"}function isPlainObject(q){if(toString.call(q)!=="[object Object]")return!1;var Q=Object.getPrototypeOf(q);return Q===null||Q===Object.prototype}function isDate(q){return toString.call(q)==="[object Date]"}function isFile(q){return toString.call(q)==="[object File]"}function isBlob(q){return toString.call(q)==="[object Blob]"}function isFunction$1(q){return toString.call(q)==="[object Function]"}function isStream(q){return isObject(q)&&isFunction$1(q.pipe)}function isURLSearchParams(q){return toString.call(q)==="[object URLSearchParams]"}function trim(q){return q.trim?q.trim():q.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(q,Q){if(!(q===null||typeof q=="undefined"))if(typeof q!="object"&&(q=[q]),isArray(q))for(var V=0,de=q.length;V<de;V++)Q.call(null,q[V],V,q);else for(var he in q)Object.prototype.hasOwnProperty.call(q,he)&&Q.call(null,q[he],he,q)}function merge(){var q={};function Q(he,ne){isPlainObject(q[ne])&&isPlainObject(he)?q[ne]=merge(q[ne],he):isPlainObject(he)?q[ne]=merge({},he):isArray(he)?q[ne]=he.slice():q[ne]=he}for(var V=0,de=arguments.length;V<de;V++)forEach(arguments[V],Q);return q}function extend(q,Q,V){return forEach(Q,function(he,ne){V&&typeof he=="function"?q[ne]=bind$1(he,V):q[ne]=he}),q}function stripBOM(q){return q.charCodeAt(0)===65279&&(q=q.slice(1)),q}var utils$e={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction:isFunction$1,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$d=utils$e;function encode(q){return encodeURIComponent(q).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(Q,V,de){if(!V)return Q;var he;if(de)he=de(V);else if(utils$d.isURLSearchParams(V))he=V.toString();else{var ne=[];utils$d.forEach(V,function(be,ce){be===null||typeof be=="undefined"||(utils$d.isArray(be)?ce=ce+"[]":be=[be],utils$d.forEach(be,function(xe){utils$d.isDate(xe)?xe=xe.toISOString():utils$d.isObject(xe)&&(xe=JSON.stringify(xe)),ne.push(encode(ce)+"="+encode(xe))}))}),he=ne.join("&")}if(he){var Te=Q.indexOf("#");Te!==-1&&(Q=Q.slice(0,Te)),Q+=(Q.indexOf("?")===-1?"?":"&")+he}return Q},utils$c=utils$e;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(Q,V,de){return this.handlers.push({fulfilled:Q,rejected:V,synchronous:de?de.synchronous:!1,runWhen:de?de.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(Q){this.handlers[Q]&&(this.handlers[Q]=null)};InterceptorManager$1.prototype.forEach=function(Q){utils$c.forEach(this.handlers,function(de){de!==null&&Q(de)})};var InterceptorManager_1=InterceptorManager$1,utils$b=utils$e,normalizeHeaderName$1=function(Q,V){utils$b.forEach(Q,function(he,ne){ne!==V&&ne.toUpperCase()===V.toUpperCase()&&(Q[V]=he,delete Q[ne])})},enhanceError$2=function(Q,V,de,he,ne){return Q.config=V,de&&(Q.code=de),Q.request=he,Q.response=ne,Q.isAxiosError=!0,Q.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Q},transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},enhanceError$1=enhanceError$2,createError$2=function(Q,V,de,he,ne){var Te=new Error(Q);return enhanceError$1(Te,V,de,he,ne)},createError$1=createError$2,settle$1=function(Q,V,de){var he=de.config.validateStatus;!de.status||!he||he(de.status)?Q(de):V(createError$1("Request failed with status code "+de.status,de.config,null,de.request,de))},utils$a=utils$e,cookies$1=utils$a.isStandardBrowserEnv()?function(){return{write:function(V,de,he,ne,Te,j){var be=[];be.push(V+"="+encodeURIComponent(de)),utils$a.isNumber(he)&&be.push("expires="+new Date(he).toGMTString()),utils$a.isString(ne)&&be.push("path="+ne),utils$a.isString(Te)&&be.push("domain="+Te),j===!0&&be.push("secure"),document.cookie=be.join("; ")},read:function(V){var de=document.cookie.match(new RegExp("(^|;\\s*)("+V+")=([^;]*)"));return de?decodeURIComponent(de[3]):null},remove:function(V){this.write(V,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(Q){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Q)},combineURLs$1=function(Q,V){return V?Q.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):Q},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(Q,V){return Q&&!isAbsoluteURL(V)?combineURLs(Q,V):V},utils$9=utils$e,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(Q){var V={},de,he,ne;return Q&&utils$9.forEach(Q.split(`
`),function(j){if(ne=j.indexOf(":"),de=utils$9.trim(j.substr(0,ne)).toLowerCase(),he=utils$9.trim(j.substr(ne+1)),de){if(V[de]&&ignoreDuplicateOf.indexOf(de)>=0)return;de==="set-cookie"?V[de]=(V[de]?V[de]:[]).concat([he]):V[de]=V[de]?V[de]+", "+he:he}}),V},utils$8=utils$e,isURLSameOrigin$1=utils$8.isStandardBrowserEnv()?function(){var Q=/(msie|trident)/i.test(navigator.userAgent),V=document.createElement("a"),de;function he(ne){var Te=ne;return Q&&(V.setAttribute("href",Te),Te=V.href),V.setAttribute("href",Te),{href:V.href,protocol:V.protocol?V.protocol.replace(/:$/,""):"",host:V.host,search:V.search?V.search.replace(/^\?/,""):"",hash:V.hash?V.hash.replace(/^#/,""):"",hostname:V.hostname,port:V.port,pathname:V.pathname.charAt(0)==="/"?V.pathname:"/"+V.pathname}}return de=he(window.location.href),function(Te){var j=utils$8.isString(Te)?he(Te):Te;return j.protocol===de.protocol&&j.host===de.host}}():function(){return function(){return!0}}();function Cancel$3(q){this.message=q}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$7=utils$e,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,transitionalDefaults$1=transitional,Cancel$2=Cancel_1,xhr=function(Q){return new Promise(function(de,he){var ne=Q.data,Te=Q.headers,j=Q.responseType,be;function ce(){Q.cancelToken&&Q.cancelToken.unsubscribe(be),Q.signal&&Q.signal.removeEventListener("abort",be)}utils$7.isFormData(ne)&&delete Te["Content-Type"];var ye=new XMLHttpRequest;if(Q.auth){var xe=Q.auth.username||"",Ee=Q.auth.password?unescape(encodeURIComponent(Q.auth.password)):"";Te.Authorization="Basic "+btoa(xe+":"+Ee)}var Ce=buildFullPath(Q.baseURL,Q.url);ye.open(Q.method.toUpperCase(),buildURL$1(Ce,Q.params,Q.paramsSerializer),!0),ye.timeout=Q.timeout;function Se(){if(!!ye){var De="getAllResponseHeaders"in ye?parseHeaders(ye.getAllResponseHeaders()):null,Ue=!j||j==="text"||j==="json"?ye.responseText:ye.response,$e={data:Ue,status:ye.status,statusText:ye.statusText,headers:De,config:Q,request:ye};settle(function(Xe){de(Xe),ce()},function(Xe){he(Xe),ce()},$e),ye=null}}if("onloadend"in ye?ye.onloadend=Se:ye.onreadystatechange=function(){!ye||ye.readyState!==4||ye.status===0&&!(ye.responseURL&&ye.responseURL.indexOf("file:")===0)||setTimeout(Se)},ye.onabort=function(){!ye||(he(createError("Request aborted",Q,"ECONNABORTED",ye)),ye=null)},ye.onerror=function(){he(createError("Network Error",Q,null,ye)),ye=null},ye.ontimeout=function(){var Ue=Q.timeout?"timeout of "+Q.timeout+"ms exceeded":"timeout exceeded",$e=Q.transitional||transitionalDefaults$1;Q.timeoutErrorMessage&&(Ue=Q.timeoutErrorMessage),he(createError(Ue,Q,$e.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ye)),ye=null},utils$7.isStandardBrowserEnv()){var Oe=(Q.withCredentials||isURLSameOrigin(Ce))&&Q.xsrfCookieName?cookies.read(Q.xsrfCookieName):void 0;Oe&&(Te[Q.xsrfHeaderName]=Oe)}"setRequestHeader"in ye&&utils$7.forEach(Te,function(Ue,$e){typeof ne=="undefined"&&$e.toLowerCase()==="content-type"?delete Te[$e]:ye.setRequestHeader($e,Ue)}),utils$7.isUndefined(Q.withCredentials)||(ye.withCredentials=!!Q.withCredentials),j&&j!=="json"&&(ye.responseType=Q.responseType),typeof Q.onDownloadProgress=="function"&&ye.addEventListener("progress",Q.onDownloadProgress),typeof Q.onUploadProgress=="function"&&ye.upload&&ye.upload.addEventListener("progress",Q.onUploadProgress),(Q.cancelToken||Q.signal)&&(be=function(De){!ye||(he(!De||De&&De.type?new Cancel$2("canceled"):De),ye.abort(),ye=null)},Q.cancelToken&&Q.cancelToken.subscribe(be),Q.signal&&(Q.signal.aborted?be():Q.signal.addEventListener("abort",be))),ne||(ne=null),ye.send(ne)})},utils$6=utils$e,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,transitionalDefaults=transitional,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(q,Q){!utils$6.isUndefined(q)&&utils$6.isUndefined(q["Content-Type"])&&(q["Content-Type"]=Q)}function getDefaultAdapter(){var q;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(q=xhr),q}function stringifySafely(q,Q,V){if(utils$6.isString(q))try{return(Q||JSON.parse)(q),utils$6.trim(q)}catch(de){if(de.name!=="SyntaxError")throw de}return(V||JSON.stringify)(q)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(Q,V){return normalizeHeaderName(V,"Accept"),normalizeHeaderName(V,"Content-Type"),utils$6.isFormData(Q)||utils$6.isArrayBuffer(Q)||utils$6.isBuffer(Q)||utils$6.isStream(Q)||utils$6.isFile(Q)||utils$6.isBlob(Q)?Q:utils$6.isArrayBufferView(Q)?Q.buffer:utils$6.isURLSearchParams(Q)?(setContentTypeIfUnset(V,"application/x-www-form-urlencoded;charset=utf-8"),Q.toString()):utils$6.isObject(Q)||V&&V["Content-Type"]==="application/json"?(setContentTypeIfUnset(V,"application/json"),stringifySafely(Q)):Q}],transformResponse:[function(Q){var V=this.transitional||defaults$3.transitional,de=V&&V.silentJSONParsing,he=V&&V.forcedJSONParsing,ne=!de&&this.responseType==="json";if(ne||he&&utils$6.isString(Q)&&Q.length)try{return JSON.parse(Q)}catch(Te){if(ne)throw Te.name==="SyntaxError"?enhanceError(Te,this,"E_JSON_PARSE"):Te}return Q}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Q){return Q>=200&&Q<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],function(Q){defaults$3.headers[Q]={}});utils$6.forEach(["post","put","patch"],function(Q){defaults$3.headers[Q]=utils$6.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$5=utils$e,defaults$2=defaults_1,transformData$1=function(Q,V,de){var he=this||defaults$2;return utils$5.forEach(de,function(Te){Q=Te.call(he,Q,V)}),Q},isCancel$1=function(Q){return!!(Q&&Q.__CANCEL__)},utils$4=utils$e,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(q){if(q.cancelToken&&q.cancelToken.throwIfRequested(),q.signal&&q.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(Q){throwIfCancellationRequested(Q),Q.headers=Q.headers||{},Q.data=transformData.call(Q,Q.data,Q.headers,Q.transformRequest),Q.headers=utils$4.merge(Q.headers.common||{},Q.headers[Q.method]||{},Q.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],function(he){delete Q.headers[he]});var V=Q.adapter||defaults$1.adapter;return V(Q).then(function(he){return throwIfCancellationRequested(Q),he.data=transformData.call(Q,he.data,he.headers,Q.transformResponse),he},function(he){return isCancel(he)||(throwIfCancellationRequested(Q),he&&he.response&&(he.response.data=transformData.call(Q,he.response.data,he.response.headers,Q.transformResponse))),Promise.reject(he)})},utils$3=utils$e,mergeConfig$2=function(Q,V){V=V||{};var de={};function he(ye,xe){return utils$3.isPlainObject(ye)&&utils$3.isPlainObject(xe)?utils$3.merge(ye,xe):utils$3.isPlainObject(xe)?utils$3.merge({},xe):utils$3.isArray(xe)?xe.slice():xe}function ne(ye){if(utils$3.isUndefined(V[ye])){if(!utils$3.isUndefined(Q[ye]))return he(void 0,Q[ye])}else return he(Q[ye],V[ye])}function Te(ye){if(!utils$3.isUndefined(V[ye]))return he(void 0,V[ye])}function j(ye){if(utils$3.isUndefined(V[ye])){if(!utils$3.isUndefined(Q[ye]))return he(void 0,Q[ye])}else return he(void 0,V[ye])}function be(ye){if(ye in V)return he(Q[ye],V[ye]);if(ye in Q)return he(void 0,Q[ye])}var ce={url:Te,method:Te,data:Te,baseURL:j,transformRequest:j,transformResponse:j,paramsSerializer:j,timeout:j,timeoutMessage:j,withCredentials:j,adapter:j,responseType:j,xsrfCookieName:j,xsrfHeaderName:j,onUploadProgress:j,onDownloadProgress:j,decompress:j,maxContentLength:j,maxBodyLength:j,transport:j,httpAgent:j,httpsAgent:j,cancelToken:j,socketPath:j,responseEncoding:j,validateStatus:be};return utils$3.forEach(Object.keys(Q).concat(Object.keys(V)),function(xe){var Ee=ce[xe]||ne,Ce=Ee(xe);utils$3.isUndefined(Ce)&&Ee!==be||(de[xe]=Ce)}),de},data={version:"0.26.1"},VERSION=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(q,Q){validators$1[q]=function(de){return typeof de===q||"a"+(Q<1?"n ":" ")+q}});var deprecatedWarnings={};validators$1.transitional=function(Q,V,de){function he(ne,Te){return"[Axios v"+VERSION+"] Transitional option '"+ne+"'"+Te+(de?". "+de:"")}return function(ne,Te,j){if(Q===!1)throw new Error(he(Te," has been removed"+(V?" in "+V:"")));return V&&!deprecatedWarnings[Te]&&(deprecatedWarnings[Te]=!0,console.warn(he(Te," has been deprecated since v"+V+" and will be removed in the near future"))),Q?Q(ne,Te,j):!0}};function assertOptions(q,Q,V){if(typeof q!="object")throw new TypeError("options must be an object");for(var de=Object.keys(q),he=de.length;he-- >0;){var ne=de[he],Te=Q[ne];if(Te){var j=q[ne],be=j===void 0||Te(j,ne,q);if(be!==!0)throw new TypeError("option "+ne+" must be "+be);continue}if(V!==!0)throw Error("Unknown option "+ne)}}var validator$1={assertOptions,validators:validators$1},utils$2=utils$e,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(q){this.defaults=q,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(Q,V){typeof Q=="string"?(V=V||{},V.url=Q):V=Q||{},V=mergeConfig$1(this.defaults,V),V.method?V.method=V.method.toLowerCase():this.defaults.method?V.method=this.defaults.method.toLowerCase():V.method="get";var de=V.transitional;de!==void 0&&validator.assertOptions(de,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var he=[],ne=!0;this.interceptors.request.forEach(function(Ce){typeof Ce.runWhen=="function"&&Ce.runWhen(V)===!1||(ne=ne&&Ce.synchronous,he.unshift(Ce.fulfilled,Ce.rejected))});var Te=[];this.interceptors.response.forEach(function(Ce){Te.push(Ce.fulfilled,Ce.rejected)});var j;if(!ne){var be=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(be,he),be=be.concat(Te),j=Promise.resolve(V);be.length;)j=j.then(be.shift(),be.shift());return j}for(var ce=V;he.length;){var ye=he.shift(),xe=he.shift();try{ce=ye(ce)}catch(Ee){xe(Ee);break}}try{j=dispatchRequest(ce)}catch(Ee){return Promise.reject(Ee)}for(;Te.length;)j=j.then(Te.shift(),Te.shift());return j};Axios$1.prototype.getUri=function(Q){return Q=mergeConfig$1(this.defaults,Q),buildURL(Q.url,Q.params,Q.paramsSerializer).replace(/^\?/,"")};utils$2.forEach(["delete","get","head","options"],function(Q){Axios$1.prototype[Q]=function(V,de){return this.request(mergeConfig$1(de||{},{method:Q,url:V,data:(de||{}).data}))}});utils$2.forEach(["post","put","patch"],function(Q){Axios$1.prototype[Q]=function(V,de,he){return this.request(mergeConfig$1(he||{},{method:Q,url:V,data:de}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(q){if(typeof q!="function")throw new TypeError("executor must be a function.");var Q;this.promise=new Promise(function(he){Q=he});var V=this;this.promise.then(function(de){if(!!V._listeners){var he,ne=V._listeners.length;for(he=0;he<ne;he++)V._listeners[he](de);V._listeners=null}}),this.promise.then=function(de){var he,ne=new Promise(function(Te){V.subscribe(Te),he=Te}).then(de);return ne.cancel=function(){V.unsubscribe(he)},ne},q(function(he){V.reason||(V.reason=new Cancel(he),Q(V.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function(Q){if(this.reason){Q(this.reason);return}this._listeners?this._listeners.push(Q):this._listeners=[Q]};CancelToken.prototype.unsubscribe=function(Q){if(!!this._listeners){var V=this._listeners.indexOf(Q);V!==-1&&this._listeners.splice(V,1)}};CancelToken.source=function(){var Q,V=new CancelToken(function(he){Q=he});return{token:V,cancel:Q}};var CancelToken_1=CancelToken,spread=function(Q){return function(de){return Q.apply(null,de)}},utils$1=utils$e,isAxiosError=function(Q){return utils$1.isObject(Q)&&Q.isAxiosError===!0},utils=utils$e,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(q){var Q=new Axios(q),V=bind(Axios.prototype.request,Q);return utils.extend(V,Axios.prototype,Q),utils.extend(V,Q),V.create=function(he){return createInstance(mergeConfig(q,he))},V}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.VERSION=data.version;axios$1.all=function(Q){return Promise.all(Q)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports;function unwrapObj(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(q).reduce((V,de)=>(Q.includes(de)||(V[de]=unref(q[de])),V),{})}function isFunction(q){return typeof q=="function"}function isProxy(q){return isReactive(q)||isReadonly(q)}function callRule(q,Q,V,de){return q.call(de,unref(Q),unref(V),de)}function normalizeValidatorResponse(q){return q.$valid!==void 0?!q.$valid:!q}function createAsyncResult(q,Q,V,de,he,ne,Te){let{$lazy:j,$rewardEarly:be}=he,ce=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],ye=arguments.length>8?arguments[8]:void 0,xe=arguments.length>9?arguments[9]:void 0,Ee=arguments.length>10?arguments[10]:void 0;const Ce=ref(!!de.value),Se=ref(0);V.value=!1;const Oe=watch([Q,de].concat(ce,Ee),()=>{if(j&&!de.value||be&&!xe.value&&!V.value)return;let De;try{De=callRule(q,Q,ye,Te)}catch(Ue){De=Promise.reject(Ue)}Se.value++,V.value=!!Se.value,Ce.value=!1,Promise.resolve(De).then(Ue=>{Se.value--,V.value=!!Se.value,ne.value=Ue,Ce.value=normalizeValidatorResponse(Ue)}).catch(Ue=>{Se.value--,V.value=!!Se.value,ne.value=Ue,Ce.value=!0})},{immediate:!0,deep:typeof Q=="object"});return{$invalid:Ce,$unwatch:Oe}}function createSyncResult(q,Q,V,de,he,ne,Te,j){let{$lazy:be,$rewardEarly:ce}=de;const ye=()=>({}),xe=computed(()=>{if(be&&!V.value||ce&&!j.value)return!1;let Ee=!0;try{const Ce=callRule(q,Q,Te,ne);he.value=Ce,Ee=normalizeValidatorResponse(Ce)}catch(Ce){he.value=Ce}return Ee});return{$unwatch:ye,$invalid:xe}}function createValidatorResult(q,Q,V,de,he,ne,Te,j,be,ce,ye){const xe=ref(!1),Ee=q.$params||{},Ce=ref(null);let Se,Oe;q.$async?{$invalid:Se,$unwatch:Oe}=createAsyncResult(q.$validator,Q,xe,V,de,Ce,he,q.$watchTargets,be,ce,ye):{$invalid:Se,$unwatch:Oe}=createSyncResult(q.$validator,Q,V,de,Ce,he,be,ce);const De=q.$message;return{$message:isFunction(De)?computed(()=>De(unwrapObj({$pending:xe,$invalid:Se,$params:unwrapObj(Ee),$model:Q,$response:Ce,$validator:ne,$propertyPath:j,$property:Te}))):De||"",$params:Ee,$pending:xe,$invalid:Se,$response:Ce,$unwatch:Oe}}function sortValidations(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const Q=unref(q),V=Object.keys(Q),de={},he={},ne={};return V.forEach(Te=>{const j=Q[Te];switch(!0){case isFunction(j.$validator):de[Te]=j;break;case isFunction(j):de[Te]={$validator:j};break;case Te.startsWith("$"):ne[Te]=j;break;default:he[Te]=j}}),{rules:de,nestedValidators:he,config:ne}}function _empty(){}const ROOT_PATH="__root";function _call(q,Q,V){if(V)return Q?Q(q()):q();try{var de=Promise.resolve(q());return Q?de.then(Q):de}catch(he){return Promise.reject(he)}}function _callIgnored(q,Q){return _call(q,_empty,Q)}function _invoke(q,Q){var V=q();return V&&V.then?V.then(Q):Q(V)}function _async(q){return function(){for(var Q=[],V=0;V<arguments.length;V++)Q[V]=arguments[V];try{return Promise.resolve(q.apply(this,Q))}catch(de){return Promise.reject(de)}}}function createValidationResults(q,Q,V,de,he,ne,Te,j,be){const ce=Object.keys(q),ye=de.get(he,q),xe=ref(!1),Ee=ref(!1),Ce=ref(0);if(ye){if(!ye.$partial)return ye;ye.$unwatch(),xe.value=ye.$dirty.value}const Se={$dirty:xe,$path:he,$touch:()=>{xe.value||(xe.value=!0)},$reset:()=>{xe.value&&(xe.value=!1)},$commit:()=>{}};return ce.length?(ce.forEach(Oe=>{Se[Oe]=createValidatorResult(q[Oe],Q,Se.$dirty,ne,Te,Oe,V,he,be,Ee,Ce)}),Se.$externalResults=computed(()=>j.value?[].concat(j.value).map((Oe,De)=>({$propertyPath:he,$property:V,$validator:"$externalResults",$uid:`${he}-externalResult-${De}`,$message:Oe,$params:{},$response:null,$pending:!1})):[]),Se.$invalid=computed(()=>{const Oe=ce.some(De=>unref(Se[De].$invalid));return Ee.value=Oe,!!Se.$externalResults.value.length||Oe}),Se.$pending=computed(()=>ce.some(Oe=>unref(Se[Oe].$pending))),Se.$error=computed(()=>Se.$dirty.value?Se.$pending.value||Se.$invalid.value:!1),Se.$silentErrors=computed(()=>ce.filter(Oe=>unref(Se[Oe].$invalid)).map(Oe=>{const De=Se[Oe];return reactive({$propertyPath:he,$property:V,$validator:Oe,$uid:`${he}-${Oe}`,$message:De.$message,$params:De.$params,$response:De.$response,$pending:De.$pending})}).concat(Se.$externalResults.value)),Se.$errors=computed(()=>Se.$dirty.value?Se.$silentErrors.value:[]),Se.$unwatch=()=>ce.forEach(Oe=>{Se[Oe].$unwatch()}),Se.$commit=()=>{Ee.value=!0,Ce.value=Date.now()},de.set(he,q,Se),Se):(ye&&de.set(he,q,Se),Se)}function collectNestedValidationResults(q,Q,V,de,he,ne,Te){const j=Object.keys(q);return j.length?j.reduce((be,ce)=>(be[ce]=setValidations({validations:q[ce],state:Q,key:ce,parentKey:V,resultsCache:de,globalConfig:he,instance:ne,externalResults:Te}),be),{}):{}}function createMetaFields(q,Q,V){const de=computed(()=>[Q,V].filter(Se=>Se).reduce((Se,Oe)=>Se.concat(Object.values(unref(Oe))),[])),he=computed({get(){return q.$dirty.value||(de.value.length?de.value.every(Se=>Se.$dirty):!1)},set(Se){q.$dirty.value=Se}}),ne=computed(()=>{const Se=unref(q.$silentErrors)||[],Oe=de.value.filter(De=>(unref(De).$silentErrors||[]).length).reduce((De,Ue)=>De.concat(...Ue.$silentErrors),[]);return Se.concat(Oe)}),Te=computed(()=>{const Se=unref(q.$errors)||[],Oe=de.value.filter(De=>(unref(De).$errors||[]).length).reduce((De,Ue)=>De.concat(...Ue.$errors),[]);return Se.concat(Oe)}),j=computed(()=>de.value.some(Se=>Se.$invalid)||unref(q.$invalid)||!1),be=computed(()=>de.value.some(Se=>unref(Se.$pending))||unref(q.$pending)||!1),ce=computed(()=>de.value.some(Se=>Se.$dirty)||de.value.some(Se=>Se.$anyDirty)||he.value),ye=computed(()=>he.value?be.value||j.value:!1),xe=()=>{q.$touch(),de.value.forEach(Se=>{Se.$touch()})},Ee=()=>{q.$commit(),de.value.forEach(Se=>{Se.$commit()})},Ce=()=>{q.$reset(),de.value.forEach(Se=>{Se.$reset()})};return de.value.length&&de.value.every(Se=>Se.$dirty)&&xe(),{$dirty:he,$errors:Te,$invalid:j,$anyDirty:ce,$error:ye,$pending:be,$touch:xe,$reset:Ce,$silentErrors:ne,$commit:Ee}}function setValidations(q){const Q=_async(function(){return bt(),_invoke(function(){if(Oe.$rewardEarly)return it(),_callIgnored(nextTick)},function(){return _call(nextTick,function(){return new Promise(xt=>{if(!At.value)return xt(!Je.value);const ht=watch(At,()=>{xt(!Je.value),ht()})})})})});let{validations:V,state:de,key:he,parentKey:ne,childResults:Te,resultsCache:j,globalConfig:be={},instance:ce,externalResults:ye}=q;const xe=ne?`${ne}.${he}`:he,{rules:Ee,nestedValidators:Ce,config:Se}=sortValidations(V),Oe=Object.assign({},be,Se),De=he?computed(()=>{const xt=unref(de);return xt?unref(xt[he]):void 0}):de,Ue=Object.assign({},unref(ye)||{}),$e=computed(()=>{const xt=unref(ye);return he?xt?unref(xt[he]):void 0:xt}),Fe=createValidationResults(Ee,De,he,j,xe,Oe,ce,$e,de),Xe=collectNestedValidationResults(Ce,De,xe,j,Oe,ce,$e),{$dirty:Ye,$errors:He,$invalid:Je,$anyDirty:pt,$error:It,$pending:At,$touch:bt,$reset:rt,$silentErrors:nt,$commit:it}=createMetaFields(Fe,Xe,Te),dt=he?computed({get:()=>unref(De),set:xt=>{Ye.value=!0;const ht=unref(de),Vt=unref(ye);Vt&&(Vt[he]=Ue[he]),isRef(ht[he])?ht[he].value=xt:ht[he]=xt}}):null;he&&Oe.$autoDirty&&watch(De,()=>{Ye.value||bt();const xt=unref(ye);xt&&(xt[he]=Ue[he])},{flush:"sync"});function lt(xt){return(Te.value||{})[xt]}function ft(){isRef(ye)?ye.value=Ue:Object.keys(Ue).length===0?Object.keys(ye).forEach(xt=>{delete ye[xt]}):Object.assign(ye,Ue)}return reactive(Object.assign({},Fe,{$model:dt,$dirty:Ye,$error:It,$errors:He,$invalid:Je,$anyDirty:pt,$pending:At,$touch:bt,$reset:rt,$path:xe||ROOT_PATH,$silentErrors:nt,$validate:Q,$commit:it},Te&&{$getResultsForChild:lt,$clearExternalResults:ft},Xe))}class ResultsStorage{constructor(){this.storage=new Map}set(Q,V,de){this.storage.set(Q,{rules:V,result:de})}checkRulesValidity(Q,V,de){const he=Object.keys(de),ne=Object.keys(V);return ne.length!==he.length||!ne.every(j=>he.includes(j))?!1:ne.every(j=>V[j].$params?Object.keys(V[j].$params).every(be=>unref(de[j].$params[be])===unref(V[j].$params[be])):!0)}get(Q,V){const de=this.storage.get(Q);if(!de)return;const{rules:he,result:ne}=de,Te=this.checkRulesValidity(Q,V,he),j=ne.$unwatch?ne.$unwatch:()=>({});return Te?ne:{$dirty:ne.$dirty,$partial:!0,$unwatch:j}}}const CollectFlag={COLLECT_ALL:!0,COLLECT_NONE:!1},VuelidateInjectChildResults=Symbol("vuelidate#injectChildResults"),VuelidateRemoveChildResults=Symbol("vuelidate#removeChildResults");function nestedValidations(q){let{$scope:Q,instance:V}=q;const de={},he=ref([]),ne=computed(()=>he.value.reduce((ye,xe)=>(ye[xe]=unref(de[xe]),ye),{}));function Te(ye,xe){let{$registerAs:Ee,$scope:Ce,$stopPropagation:Se}=xe;Se||Q===CollectFlag.COLLECT_NONE||Ce===CollectFlag.COLLECT_NONE||Q!==CollectFlag.COLLECT_ALL&&Q!==Ce||(de[Ee]=ye,he.value.push(Ee))}V.__vuelidateInjectInstances=[].concat(V.__vuelidateInjectInstances||[],Te);function j(ye){he.value=he.value.filter(xe=>xe!==ye),delete de[ye]}V.__vuelidateRemoveInstances=[].concat(V.__vuelidateRemoveInstances||[],j);const be=inject(VuelidateInjectChildResults,[]);provide(VuelidateInjectChildResults,V.__vuelidateInjectInstances);const ce=inject(VuelidateRemoveChildResults,[]);return provide(VuelidateRemoveChildResults,V.__vuelidateRemoveInstances),{childResults:ne,sendValidationResultsToParent:be,removeValidationResultsFromParent:ce}}function ComputedProxyFactory(q){return new Proxy(q,{get(Q,V){return typeof Q[V]=="object"?ComputedProxyFactory(Q[V]):computed(()=>Q[V])}})}function useVuelidate(q,Q){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(V=q,q=void 0,Q=void 0);let{$registerAs:de,$scope:he=CollectFlag.COLLECT_ALL,$stopPropagation:ne,$externalResults:Te,currentVueInstance:j}=V;const be=j||getCurrentInstance(),ce=be?be.type:{};!de&&be&&(de=`_vuelidate_${be.uid||be._uid}`);const ye=ref({}),xe=new ResultsStorage,{childResults:Ee,sendValidationResultsToParent:Ce,removeValidationResultsFromParent:Se}=be?nestedValidations({$scope:he,instance:be}):{childResults:ref({})};if(!q&&ce.validations){const Oe=ce.validations;Q=ref({}),onBeforeMount(()=>{Q.value=be.proxy,watch(()=>isFunction(Oe)?Oe.call(Q.value,new ComputedProxyFactory(Q.value)):Oe,De=>{ye.value=setValidations({validations:De,state:Q,childResults:Ee,resultsCache:xe,globalConfig:V,instance:be.proxy,externalResults:Te||be.proxy.vuelidateExternalResults})},{immediate:!0})}),V=ce.validationsConfig||V}else{const Oe=isRef(q)||isProxy(q)?q:reactive(q||{});watch(Oe,De=>{ye.value=setValidations({validations:De,state:Q,childResults:Ee,resultsCache:xe,globalConfig:V,instance:be?be.proxy:{},externalResults:Te})},{immediate:!0})}return be&&(Ce.forEach(Oe=>Oe(ye,{$registerAs:de,$scope:he,$stopPropagation:ne})),onBeforeUnmount(()=>Se.forEach(Oe=>Oe(de)))),computed(()=>Object.assign({},unref(ye.value),Ee.value))}const req=q=>{if(q=unref(q),Array.isArray(q))return!!q.length;if(q==null)return!1;if(q===!1)return!0;if(q instanceof Date)return!isNaN(q.getTime());if(typeof q=="object"){for(let Q in q)return!0;return!1}return!!String(q).length},len=q=>(q=unref(q),Array.isArray(q)?q.length:typeof q=="object"?Object.keys(q).length:String(q).length);function regex(){for(var q=arguments.length,Q=new Array(q),V=0;V<q;V++)Q[V]=arguments[V];return de=>(de=unref(de),!req(de)||Q.every(he=>he.test(de)))}regex(/^[a-zA-Z]*$/);regex(/^[a-zA-Z0-9]*$/);var numeric$1=regex(/^\d*(\.\d+)?$/),numeric={$validator:numeric$1,$message:"Value must be numeric",$params:{type:"numeric"}};const emailRegex=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var email$1=regex(emailRegex),email={$validator:email$1,$message:"Value is not a valid email address",$params:{type:"email"}};function minLength$1(q){return Q=>!req(Q)||len(Q)>=unref(q)}function minLength(q){return{$validator:minLength$1(q),$message:Q=>{let{$params:V}=Q;return`This field should be at least ${V.min} long`},$params:{min:q,type:"minLength"}}}function required$1(q){return typeof q=="string"&&(q=q.trim()),req(q)}var required={$validator:required$1,$message:"Value is required",$params:{type:"required"}};function sameAs$1(q){return Q=>unref(Q)===unref(q)}function sameAs(q){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"other";return{$validator:sameAs$1(q),$message:V=>`The value must be equal to the ${Q} value`,$params:{equalTo:q,otherName:Q,type:"sameAs"}}}const urlRegex=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;regex(urlRegex);regex(/(^[0-9]*$)|(^-[0-9]+$)/);regex(/^[-]?\d*(\.\d+)?$/);var eruda$1={exports:{}};/*! eruda v2.6.1 https://eruda.liriliri.io/ */(function(module,exports){(function(q,Q){module.exports=Q()})(self,function(){return function(){var __webpack_modules__={3816:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container ._console-container{$pt:40px;$pb:24px}._console-container{$w:100%;$h:100%}._console-container._js-input-hidden{$pb:0}._console-container ._control{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$cu:default;$fs:0;$p:10px 10px 10px 35px;$b:var(--darker-background);$c:var(--primary);$lh:20px;$bb:1px solid var(--border)}._console-container ._control ._icon-clear,._console-container ._control ._icon-copy,._console-container ._control ._icon-search{$d:inline-block;$p:10px;$fs:16px;$po:absolute;$t:0;$cu:pointer;$tr:color .3s}._console-container ._control ._icon-clear:active,._console-container ._control ._icon-copy:active,._console-container ._control ._icon-search:active{$c:var(--accent)}._console-container ._control ._icon-clear{padding-right:0;$l:0}._console-container ._control ._icon-copy{right:0}._console-container ._control ._icon-search{right:23px}._console-container ._control ._filter{$cu:pointer;$fs:12px;$h:20px;$d:inline-block;$m:0 2px;$p:0 4px;$lh:20px;$tr:background-color .3s,color .3s}._console-container ._control ._filter._active{$b:var(--highlight);$c:var(--select-foreground)}._console-container ._control ._search-keyword{$ws:nowrap;$po:absolute;$lh:20px;max-width:80px;$o:hidden;right:63px;$fs:14px;text-overflow:ellipsis}._console-container ._js-input{$pe:none;$po:absolute;$z:100;$l:0;bottom:0;$w:100%;$bt:1px solid var(--border);$h:24px}._console-container ._js-input ._icon-arrow-right{$lh:23px;$c:var(--accent);$po:absolute;$l:10px;$t:0;$z:10}._console-container ._js-input._active{$h:100%;$pt:40px;$pb:40px;$bt:none}._console-container ._js-input._active ._icon-arrow-right{$d:none}._console-container ._js-input._active textarea{$pl:10px}._console-container ._js-input ._buttons{$d:none;$po:absolute;$l:0;bottom:0;$w:100%;$h:40px;$c:var(--primary);$b:var(--darker-background);$fs:12px;$bt:1px solid var(--border)}._console-container ._js-input ._buttons ._button{$pe:all;$cu:pointer;$w:50%;$d:inline-block;$ta:center;$br:1px solid var(--border);$h:40px;$lh:40px;$tr:background .3s,color .3s}._console-container ._js-input ._buttons ._button:last-child{$br:none}._console-container ._js-input ._buttons ._button:active{$c:var(--select-foreground);$b:var(--highlight)}._console-container ._js-input textarea{$pe:all;$p:3px 10px;$pl:25px;$ou:0;$bo:none;$fs:14px;$w:100%;$h:100%;-webkit-user-select:text;$us:text;resize:none;$c:var(--primary);$b:var(--background)}",""]),q.exports=Q},9217:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._dev-tools{$po:absolute;$w:100%;$h:100%;$l:0;bottom:0;$b:var(--background);$z:500;$d:none;$pt:40px!important;opacity:0;$tr:opacity .3s,height .3s}._dev-tools ._tools{$o:auto;$wos:touch;$h:100%;$w:100%;$po:relative}._dev-tools ._tools ._tool{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$o:hidden;$d:none}",""]),q.exports=Q},3409:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container ._nav-bar-container{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$z:100}._container ._nav-bar-container ._nav-bar{$ox:auto;$wos:touch;$bt:1px solid var(--border);$bb:1px solid var(--border);$w:100%;$h:100%;$b:var(--darker-background);$fs:0;$ws:nowrap}._container ._nav-bar-container ._nav-bar-item{$cu:pointer;$d:inline-block;$h:38px;$lh:38px;$p:0 10px;$c:var(--foreground);$fs:12px;$ta:center;$tt:capitalize;$tr:all .3s}._container ._nav-bar-container ._nav-bar-item:active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._nav-bar-item._active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._bottom-bar{$tr:left .3s,width .3s;$h:1px;$b:var(--accent);$po:absolute;bottom:0;$l:0}",""]),q.exports=Q},269:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_elements{$pb:40px;$fs:14px}#_elements ._show-area{$oy:auto;$wos:touch;$h:100%}#_elements ._parents{$ox:auto;$wos:touch;$b:var(--darker-background);$c:var(--primary);$p:0 10px;$h:40px;$lh:40px;$ws:nowrap;$bb:1px solid var(--border);$cu:pointer;$fs:14px}#_elements ._parents li{$d:inline-block}#_elements ._parents li ._parent{$d:inline-block}#_elements ._parents li:last-child{margin-right:0}#_elements ._parents ._icon-arrow-right{$fs:12px;$po:relative;$t:1px}#_elements ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border);$cu:pointer;$tr:background .3s,color .3s}#_elements ._breadcrumb:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._breadcrumb:active span{$c:var(--select-foreground)}#_elements ._section{$bb:1px solid var(--border);$c:var(--foreground);$mb:10px}#_elements ._section h2{$c:var(--primary);$b:var(--darker-background);$bt:1px solid var(--border);$p:10px;$fs:14px;$tr:background .3s}#_elements ._section h2 ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_elements ._section h2 ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_elements ._section h2 ._btn:active{$c:var(--accent)}#_elements ._section h2._active-effect{$cu:pointer}#_elements ._section h2._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children{$b:var(--darker-background);$c:var(--foreground);$mb:10px!important;$bb:1px solid var(--border)}#_elements ._children li{$ox:auto;$wos:touch;$cu:default;$p:10px;$bt:1px solid var(--border);$ws:nowrap;$tr:background .3s,color .3s}#_elements ._children li span{$tr:color .3s}#_elements ._children li._active-effect{$cu:pointer}#_elements ._children li._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children li._active-effect:active span{$c:var(--select-foreground)}#_elements ._attributes{$fs:12px}#_elements ._attributes a{$c:var(--link-color)}#_elements ._attributes ._table-wrapper{$ox:auto;$wos:touch}#_elements ._attributes table td{$p:5px 10px}#_elements ._text-content{$b:#fff}#_elements ._text-content ._content{$ox:auto;$wos:touch;$p:10px}#_elements ._style-color{$po:relative;$t:1px;$w:10px;$h:10px;$bra:50%;margin-right:2px;$bo:1px solid var(--border);$d:inline-block}#_elements ._box-model{$ox:auto;$wos:touch;$c:#222;$fs:12px;$p:10px;$ta:center;$ws:nowrap;$bb:1px solid var(--color)}#_elements ._box-model ._label{$po:absolute;$ml:3px;$p:0 2px}#_elements ._box-model ._bottom,#_elements ._box-model ._left,#_elements ._box-model ._right,#_elements ._box-model ._top{$d:inline-block}#_elements ._box-model ._left,#_elements ._box-model ._right{vertical-align:middle}#_elements ._box-model ._border,#_elements ._box-model ._content,#_elements ._box-model ._margin,#_elements ._box-model ._padding,#_elements ._box-model ._position{$po:relative;$b:#fff;$d:inline-block;$ta:center;vertical-align:middle;$p:3px;$m:3px}#_elements ._box-model ._position{$bo:1px grey dotted}#_elements ._box-model ._margin{$bo:1px dashed;$b:rgba(246,178,107,.66)}#_elements ._box-model ._border{$bo:1px #000 solid;$b:rgba(255,229,153,.66)}#_elements ._box-model ._padding{$bo:1px grey dashed;$b:rgba(147,196,125,.55)}#_elements ._box-model ._content{$bo:1px grey solid;min-width:100px;$b:rgba(111,168,220,.66)}#_elements ._computed-style{$fs:12px}#_elements ._computed-style a{$c:var(--link-color)}#_elements ._computed-style ._table-wrapper{$oy:auto;$wos:touch;max-height:200px;$bt:1px solid var(--border)}#_elements ._computed-style table td{$p:5px 10px}#_elements ._computed-style table td._key{$ws:nowrap;$c:var(--var-color)}#_elements ._styles{$fs:12px}#_elements ._styles ._style-wrapper{$p:10px}#_elements ._styles ._style-wrapper ._style-rules{$bo:1px solid var(--border);$p:10px;$mb:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{$pl:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{$c:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{$c:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{$mb:0}#_elements ._listeners{$fs:12px}#_elements ._listeners ._listener-wrapper{$p:10px}#_elements ._listeners ._listener-wrapper ._listener{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{$p:10px;$b:var(--darker-background);$c:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{$ox:auto;$wos:touch;$p:10px;$bt:none}#_elements ._bottom-bar{$h:40px;$b:var(--darker-background);$po:absolute;$l:0;bottom:0;$w:100%;$fs:0;$bt:1px solid var(--border)}#_elements ._bottom-bar ._btn{$cu:pointer;$ta:center;$c:var(--primary);$fs:14px;$lh:40px;$w:25%;$d:inline-block;$tr:background .3s,color .3s}#_elements ._bottom-bar ._btn:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._bottom-bar ._btn._active{$c:var(--accent)}",""]),q.exports=Q},7693:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container ._entry-btn{$w:40px;$h:40px;$d:flex;$b:#000;opacity:.3;$bra:10px;$po:relative;$z:1000;$tr:opacity .3s;$c:#fff;$fs:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),q.exports=Q},9577:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_info{$oy:auto;$wos:touch}#_info li{$m:10px;$bo:1px solid var(--border)}#_info li ._content,#_info li ._title{$p:10px}#_info li ._title{$pb:0;$fs:16px;$c:var(--accent)}#_info li ._content{$m:0;-webkit-user-select:text;$us:text;$c:var(--foreground);word-break:break-all}#_info li ._content table{$w:100%;$bc:collapse}#_info li ._content table td,#_info li ._content table th{$bo:1px solid var(--border);$p:10px}#_info li ._content *{-webkit-user-select:text;$us:text}#_info li ._content a{$c:var(--link-color)}#_info li ._device-key,#_info li ._system-key{$w:100px}",""]),q.exports=Q},3985:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_network{$pt:36px}#_network ._title{$po:absolute;$w:100%;$h:36px;$l:0;$t:0;$b:var(--darker-background);$p:10px;$c:var(--primary);$h:36px;$bb:1px solid var(--border)}#_network ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_network ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_network ._title ._btn:active{$c:var(--accent)}#_network ._requests{$oy:auto;$wos:touch;$h:100%;$bb:1px solid var(--border);$mb:10px}#_network ._requests li{$d:flex;$w:100%;$cu:pointer;$bb:1px solid var(--border);$h:41px;$c:var(--foreground);$ws:nowrap}#_network ._requests li._error span{$c:var(--console-error-foreground)}#_network ._requests li span{$d:block;$lh:40px;$h:40px;$p:0 5px;$fs:12px;vertical-align:top;text-overflow:ellipsis;$o:hidden}#_network ._requests li ._name{$fl:1;$pl:10px}#_network ._requests li ._status{$w:40px}#_network ._requests li ._method,#_network ._requests li ._type{$w:50px}#_network ._requests li ._size{$w:70px}#_network ._requests li ._time{$w:60px;padding-right:10px}#_network ._requests li:nth-child(even){$b:var(--contrast)}#_network ._detail{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$z:10;$d:none;$pb:40px;$b:var(--background)}#_network ._detail ._http{$oy:auto;$wos:touch;$h:100%}#_network ._detail ._http ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_network ._detail ._http ._section{$bt:1px solid var(--border);$bb:1px solid var(--border);$mb:10px}#_network ._detail ._http ._section h2{$b:var(--darker-background);$c:var(--primary);$p:10px;$fs:14px}#_network ._detail ._http ._section table{$c:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;$us:text}#_network ._detail ._http ._section table td{$fs:12px;$p:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{$ws:nowrap;$fw:700;$c:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;$us:text;$ox:auto;$wos:touch;$p:10px;$fs:12px;$mb:10px;$ws:pre-wrap;$bt:1px solid var(--border);$c:var(--foreground);$bb:1px solid var(--border)}#_network ._detail ._back{$po:absolute;$l:0;bottom:0;$c:var(--foreground);$w:100%;$bt:1px solid var(--border);$b:var(--darker-background);$d:block;$h:40px;$lh:40px;text-decoration:none;$ta:center;$mt:10px;$tr:background .3s;$cu:pointer}#_network ._detail ._back:active{$c:var(--select-foreground)}",""]),q.exports=Q},8070:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_resources{$oy:auto;$wos:touch;$p:10px;$fs:14px}#_resources ._section{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_resources ._section ._content{$oy:auto;$wos:touch;max-height:400px}#_resources ._section._warn{$bo:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}#_resources ._section._danger{$bo:1px solid var(--console-error-border)}#_resources ._section._danger ._title{$b:var(--console-error-background);$c:var(--console-error-foreground)}#_resources ._title{$p:10px;$c:var(--primary);$b:var(--darker-background)}#_resources ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_resources ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_resources ._title ._btn:active{$c:var(--accent)}#_resources ._link-list{$fs:12px;$c:var(--foreground)}#_resources ._link-list li{$p:10px;word-break:break-all}#_resources ._link-list li a{$c:var(--link-color)!important}#_resources ._image-list{$c:var(--foreground);$fs:12px;$d:flex;flex-wrap:wrap;$p:10px!important}#_resources ._image-list:after{$co:'';$d:block;$cl:both}#_resources ._image-list li{flex-grow:1;$cu:pointer;$oy:hidden}#_resources ._image-list li._image{$h:100px;$fs:0}#_resources ._image-list li img{$h:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}#_resources table{$c:var(--foreground);$bc:collapse;$w:100%;$fs:12px}#_resources table tr:nth-child(even){$b:var(--contrast)}#_resources table td{$p:10px;word-break:break-all}#_resources table td._key{$ox:auto;$wos:touch;$ws:nowrap;max-width:120px}#_resources table td._control{$p:0;$fs:0;$w:40px}#_resources table td._control ._icon-delete{$cu:pointer;$c:var(--primary);$fs:14px;$d:inline-block;$w:40px;$h:40px;$ta:center;$lh:40px;$tr:color .3s}#_resources table td._control ._icon-delete:active{$c:var(--accent)}",""]),q.exports=Q},6836:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_settings{$oy:auto;$wos:touch}#_settings ._separator{$h:10px}#_settings ._text{$p:10px;$c:var(--accent);$fs:12px}#_settings ._color,#_settings ._range,#_settings ._select{$cu:pointer}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head,#_settings ._switch{$p:10px;$b:var(--darker-background);$fs:14px;$bb:1px solid var(--border);$bt:1px solid var(--border);$c:var(--primary);$mt:-1px}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head{$tr:background .3s,color .3s}#_settings ._color ._head span,#_settings ._range ._head span,#_settings ._select ._head span{$f:right}#_settings ._color ._head:active,#_settings ._range ._head:active,#_settings ._select ._head:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ._head span{$d:inline-block;$bo:1px solid var(--border);$w:15px;$h:15px}#_settings ._select ul{$d:none;$bb:1px solid var(--border);$c:var(--foreground)}#_settings ._select ul._open{$d:block}#_settings ._select ul li{$p:10px;$tr:background .3s,color .3s}#_settings ._select ul li:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ul{$d:none;$p:10px;$fs:0;$bb:1px solid var(--border)}#_settings ._color ul._open{$d:block}#_settings ._color ul li{$d:inline-block;$w:20px;$bo:1px solid var(--border);$h:20px;margin-right:10px}#_settings ._range ._input-container{$d:none;$p:10px;$bb:1px solid var(--border);$po:relative}#_settings ._range ._input-container._open{$d:block}#_settings ._range ._input-container ._range-track{$h:4px;$w:100%;$p:0 10px;$po:absolute;$l:0;$t:16px}#_settings ._range ._input-container ._range-track ._range-track-bar{$b:var(--darker-background);$bra:2px;$o:hidden;$w:100%;$h:4px}#_settings ._range ._input-container ._range-track ._range-track-bar ._range-track-progress{$h:100%;$b:var(--accent);$w:50%}#_settings ._range ._input-container input{-webkit-appearance:none;$b:0 0;$h:4px;$w:100%;$po:relative;$t:-3px;$m:0 auto;$ou:0;$bra:2px}#_settings ._range ._input-container input::-webkit-slider-thumb{-webkit-appearance:none;$po:relative;$t:0;$z:1;$w:16px;$bo:none;$h:16px;$bra:10px;$bo:1px solid var(--border);$b:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}#_settings ._switch ._checkbox{$f:right;$po:relative;vertical-align:top;$w:46px;$h:20px;$p:3px;$bra:18px;$bo:1px solid var(--border);$cu:pointer;$bi:linear-gradient(to bottom,var(--dark),var(--light) 25px)}#_settings ._switch ._checkbox ._input{$po:absolute;$t:0;$l:0;opacity:0}#_settings ._switch ._checkbox ._label{$pe:none;$po:relative;$d:block;$h:12px;$fs:10px;$tt:uppercase;$b:var(--darker-background);$bra:inherit;$bs:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);$tr:.15s ease-out;transition-property:opacity background}#_settings ._switch ._checkbox ._label:after,#_settings ._switch ._checkbox ._label:before{$po:absolute;$t:50%;$mt:-.5em;$lh:1;$tr:inherit}#_settings ._switch ._checkbox ._input:checked~._label{$b:var(--accent);$bs:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}#_settings ._switch ._checkbox ._input:checked~._label:before{opacity:0}#_settings ._switch ._checkbox ._input:checked~._label:after{opacity:1}#_settings ._switch ._checkbox ._handle{$po:absolute;$pe:none;$t:0;$l:0;$w:18px;$h:18px;$bra:10px;$bs:1px 1px 5px rgba(0,0,0,.2);$bi:linear-gradient(to bottom,var(--light) 40%,var(--dark));$tr:left .15s ease-out}#_settings ._switch ._checkbox ._handle:before{$co:'';$po:absolute;$t:50%;$l:50%;$m:-6px 0 0 -6px;$w:12px;$h:12px;$bra:6px;$bs:inset 0 1px rgba(0,0,0,.02);$bi:linear-gradient(to bottom,var(--dark),var(--light))}#_settings ._switch ._checkbox ._input:checked~._handle{$l:30px;$bs:-1px 1px 5px rgba(0,0,0,.2)}",""]),q.exports=Q},8277:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_snippets{$oy:auto;$wos:touch;$p:10px}#_snippets ._section{$mb:10px;$bo:1px solid var(--border);$o:hidden;$cu:pointer}#_snippets ._section:active ._name{$b:var(--highlight);$c:var(--select-foreground)}#_snippets ._section ._name{$p:10px;$c:var(--primary);$b:var(--darker-background);$tr:background .3s}#_snippets ._section ._name ._btn{$ml:10px;$f:right;$ta:center;$w:18px;$h:18px;$lh:18px;$fs:12px}#_snippets ._section ._description{$c:var(--foreground);$p:10px;$tr:background .3s}",""]),q.exports=Q},6068:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._search-highlight-block{$d:inline}._search-highlight-block ._keyword{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}",""]),q.exports=Q},4214:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"#_sources{$oy:auto;$wos:touch;$c:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{$ox:auto;$wos:touch;$w:100%;$mh:100%}#_sources ._raw{-webkit-user-select:text;$us:text;$p:10px}#_sources ._code{$fs:12px}#_sources ._code ._content *{-webkit-user-select:text;$us:text}#_sources pre._code{$p:10px}#_sources table._code{$bc:collapse}#_sources table._code ._gutter{$b:var(--background);$c:var(--primary)}#_sources table._code ._line-num{$br:1px solid var(--border);$p:0 3px 0 5px;$ta:right}#_sources table._code ._code-line{$p:0 4px;$ws:pre}#_sources ._image ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_sources ._image ._img-container{$ta:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{$ta:center;$m:20px 0;$c:var(--foreground)}#_sources ._json{$p:0 10px}#_sources ._json *{-webkit-user-select:text;$us:text}#_sources iframe{$w:100%;$h:100%}",""]),q.exports=Q},3146:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{$m:0;$p:0;$bo:0;$fs:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{$d:block}._container body{$lh:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{$co:'';$co:none}._container table{$bc:collapse;border-spacing:0}",""]),q.exports=Q},6802:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,'.luna-console{$b:var(--background)}.luna-console-header{$c:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);$c:var(--foreground)}.luna-console-log-item a{$c:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$c:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$c:#e8a400}.luna-console-log-item .luna-console-count{$c:var(--select-foreground);$b:var(--highlight)}.luna-console-log-item.luna-console-warn{$c:var(--console-warn-foreground);$b:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{$b:var(--console-error-background);$c:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{$b:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{$c:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{$c:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{$c:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{$c:var(--comment-color)}.luna-console-preview .luna-console-key{$c:var(--var-color)}.luna-console-preview .luna-console-number{$c:var(--number-color)}.luna-console-preview .luna-console-null{$c:var(--operator-color)}.luna-console-preview .luna-console-string{$c:var(--string-color)}.luna-console-preview .luna-console-boolean{$c:var(--keyword-color)}.luna-console-preview .luna-console-special{$c:var(--operator-color)}.luna-console-preview .luna-console-keyword{$c:var(--keyword-color)}.luna-console-preview .luna-console-operator{$c:var(--operator-color)}.luna-console-preview .luna-console-comment{$c:var(--comment-color)}.luna-object-viewer{$c:var(--primary);$fs:12px!important}.luna-object-viewer-null{$c:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:var(--string-color)}.luna-object-viewer-number{$c:var(--number-color)}.luna-object-viewer-boolean{$c:var(--keyword-color)}.luna-object-viewer-special{$c:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;$btc:var(--foreground)}.luna-object-viewer-collapsed:before{$btc:transparent;$blc:var(--foreground)}.luna-notification{$pe:none!important;$p:10px;$z:1000}.luna-notification-item{$z:500;$c:var(--foreground);$b:var(--background);$bs:none;$p:5px 10px;$bo:1px solid var(--border)}.luna-notification-upper{$mb:10px}.luna-notification-lower{$mt:10px}.luna-data-grid{$c:var(--foreground);$b:var(--background);border-color:var(--border)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{$b:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:hover{$b:var(--darker-background)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){$b:var(--contrast)}.luna-dom-viewer{$c:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{$c:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{$c:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{$c:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-selection{$b:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{$c:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:var(--comment-color)}.luna-dom-viewer-children{$m:0;$pl:15px!important}._container{$pe:none;$po:fixed;$l:0;$t:0;$w:100%;$h:100%;$z:1000000;$c:var(--foreground);$ff:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;$fs:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{$bsi:border-box;$pe:all;-webkit-user-select:none;$us:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;$p:0;$m:0}._container h1,._container h2,._container h3,._container h4{$m:0}._hidden{$d:none}._icon-disabled{opacity:.5}._tag-name-color{$c:var(--tag-name-color)}._function-color{$c:var(--function-color)}._attribute-name-color{$c:var(--attribute-name-color)}._operator-color{$c:var(--operator-color)}._string-color{$c:var(--string-color)}',""]),q.exports=Q},276:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{$d:inline-block;$ff:luna-console-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{$co:'\\f101'}.luna-console-icon-input:before{$co:'\\f102'}.luna-console-icon-output:before{$co:'\\f103'}.luna-console-icon-warn:before{$co:'\\f104'}.luna-console-icon-caret-down:before{$co:'\\f105'}.luna-console-icon-caret-right:before{$co:'\\f106'}.luna-console{$b:#fff;$oy:auto;$wos:touch;$h:100%;$po:relative;$wc:scroll-position;$cu:default;$fs:12px;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{$d:none}.luna-console-fake-logs{$po:absolute;$l:0;$t:0;$pe:none;$v:hidden;$w:100%}.luna-console-logs{$pt:1px;$po:absolute;$w:100%}.luna-console-log-container{$bsi:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{$ws:nowrap;$d:flex;$fs:11px;$c:#545454;$bt:1px solid transparent;$bb:1px solid #ccc}.luna-console-header .luna-console-time-from-container{$ox:auto;$wos:touch;$p:3px 10px}.luna-console-nesting-level{$w:14px;$fsh:0;$mt:-1px;$mb:-1px;$po:relative;$br:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{$co:''}.luna-console-nesting-level::before{$bb:1px solid #ccc;$po:absolute;$t:0;$l:0;$ml:100%;$w:5px;$h:100%;$bsi:border-box}.luna-console-log-item{$po:relative;$d:flex;$bt:1px solid transparent;$bb:1px solid #ccc;$mt:-1px;$c:#333}.luna-console-log-item:after{$co:'';$d:block;$cl:both}.luna-console-log-item .luna-console-code{$d:inline;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:#881280}.luna-console-log-item .luna-console-code .luna-console-number{$c:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{$c:grey}.luna-console-log-item .luna-console-code .luna-console-comment{$c:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{$c:#1a1aa6}.luna-console-log-item a{$c:#15c!important}.luna-console-log-item .luna-console-icon-container{$m:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$lh:20px;$fs:12px;$c:#333;$po:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{$t:0;$l:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$t:0;$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$t:0;$c:#e8a400}.luna-console-log-item .luna-console-count{$b:#8097bd;$c:#fff;$p:2px 4px;$bra:10px;$fs:12px;$f:left;$m:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{$fl:1;$o:hidden}.luna-console-log-item .luna-console-log-content{$p:3px 0;$m:0 10px;$ox:auto;$wos:touch;$ws:pre-wrap;-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{$ws:initial}.luna-console-log-item.luna-console-error{$z:50;$b:#fff0f0;$c:red;$bt:1px solid #ffd6d6;$bb:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{$pl:1.2em;$ws:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{$b:red}.luna-console-log-item.luna-console-debug{$z:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{$z:40;$c:#5c5c00;$b:#fffbe5;$bt:1px solid #fff5c2;$bb:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{$b:#e8a400}.luna-console-log-item.luna-console-info{$z:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{$fw:700}.luna-console-preview{$d:inline-block}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{$c:#881391}.luna-console-preview .luna-console-number{$c:#1c00cf}.luna-console-preview .luna-console-null{$c:#5e5e5e}.luna-console-preview .luna-console-string{$c:#c41a16}.luna-console-preview .luna-console-boolean{$c:#0d22aa}.luna-console-preview .luna-console-special{$c:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{$c:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{$c:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{$c:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{$c:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{$b:#290000;$c:#ff8080;$btc:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{$b:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{$c:#ffcb6b;$b:#332a00;$btc:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{$b:#42597f;$c:#949494}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{$c:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{$c:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{$c:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{$c:#7f7f7f}",""]),q.exports=Q},2456:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,".luna-data-grid{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$po:relative;$fs:12px;$bo:1px solid #ccc;$o:hidden}.luna-data-grid.luna-data-grid-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{$d:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{$v:hidden}.luna-data-grid *{$bsi:border-box}.luna-data-grid.luna-data-grid-theme-dark{$c:#a5a5a5;$b:#242424;border-color:#3d3d3d}.luna-data-grid table{$w:100%;$h:100%;$bc:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{$p:1px 4px;border-left:1px solid #ccc;$ws:nowrap;text-overflow:ellipsis;$o:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{$fw:400;$bb:1px solid #ccc;$ta:left;$b:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:hover{$b:#e6e6e6}.luna-data-grid td{$h:20px;$cu:default;-webkit-user-select:text;$us:text}.luna-data-grid-data-container,.luna-data-grid-header-container{$o:hidden}.luna-data-grid-header-container{$h:21px}.luna-data-grid-data-container{$oy:auto}.luna-data-grid-data-container tr:nth-child(even){$b:#f2f7fd}.luna-data-grid-filler-row td{$h:auto}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{$b:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{$b:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){$b:#0b2544}",""]),q.exports=Q},5141:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{$d:inline-block;$ff:luna-dom-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{$co:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{$co:'\\f102'}.luna-dom-viewer{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$oy:auto;$wos:touch;$b:0 0;$ox:hidden;word-wrap:break-word;$p:0 0 0 12px;$fs:12px;$h:100%;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$cu:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{$d:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{$v:hidden}.luna-dom-viewer *{$bsi:border-box}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{$c:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;$ml:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{$po:absolute!important;$fs:12px!important}.luna-dom-viewer-tree-item{$lh:16px;$mh:16px;$po:relative;$z:10}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{$d:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{$d:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{$d:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{$d:none}.luna-dom-viewer-html-tag{$c:#881280}.luna-dom-viewer-tag-name{$c:#881280}.luna-dom-viewer-attribute-name{$c:#994500}.luna-dom-viewer-attribute-value{$c:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{$c:#236e25}.luna-dom-viewer-selection{$po:absolute;$d:none;$l:-10000px;right:-10000px;$t:0;bottom:0;$z:-1;$b:#f2f7fd}.luna-dom-viewer-children{$m:0;$ox:visible;$oy:visible;$pl:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{$c:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{$c:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{$c:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{$c:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{$c:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-selection{$b:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#f29766}",""]),q.exports=Q},5674:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,".luna-notification{$po:fixed;$t:0;$l:0;$w:100%;$h:100%;$p:20px;$bsi:border-box;$pe:none;$d:flex;flex-direction:column;$fs:14px;$ff:Arial,Helvetica,sans-serif}.luna-notification-item{$d:flex;$bs:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);$p:10px 16px;$c:#333;$b:#fff}.luna-notification-lower{$mt:16px}.luna-notification-upper{$mb:16px}.luna-notification-theme-dark .luna-notification-item{$bs:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);$c:#a5a5a5;$b:#242424}",""]),q.exports=Q},8418:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{$d:inline-block;$ff:luna-object-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{$co:'\\f101'}.luna-object-viewer-icon-caret-right:before{$co:'\\f102'}.luna-object-viewer{$ox:auto;$wos:touch;$oy:hidden;$cu:default;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$fs:12px;$lh:1.2;$mh:100%;$c:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;$p:0!important;$pl:12px!important;$m:0!important}.luna-object-viewer li{$po:relative;$ws:nowrap;$lh:16px;$mh:16px}.luna-object-viewer>li>.luna-object-viewer-key{$d:none}.luna-object-viewer span{$po:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{$c:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{$d:inline}.luna-object-viewer-null{$c:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:#c41a16}.luna-object-viewer-number{$c:#1c00cf}.luna-object-viewer-boolean{$c:#0d22aa}.luna-object-viewer-special{$c:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{$po:absolute!important;$l:-12px;$c:#727272;$fs:12px}.luna-object-viewer-icon-caret-right{$t:1px}.luna-object-viewer-icon-caret-down{$t:2px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{$d:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{$d:inline}.luna-object-viewer-hidden~ul{$d:none}.luna-object-viewer-theme-dark{$c:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{$c:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{$c:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{$c:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{$c:#5db0d7}",""]),q.exports=Q},8998:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,"@font-face{$ff:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA48AAsAAAAAGjgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAQEAAAG4LO8vdU9TLzIAAAIMAAAAPwAAAFZWm1KOY21hcAAAAkwAAAFLAAADpkj8yKVnbHlmAAADmAAAB88AAA7wW62fimhlYWQAAAtoAAAAMQAAADZ26MSyaGhlYQAAC5wAAAAdAAAAJAgEBC1obXR4AAALvAAAAB0AAACoVAv//GxvY2EAAAvcAAAANwAAAFZo5GTkbWF4cAAADBQAAAAfAAAAIAE7AQ1uYW1lAAAMNAAAASkAAAIWm5e+CnBvc3QAAA1gAAAA2gAAAT5KT479eJxNjzFTwkAQhb+DJARBRhlMgokoISahs7KwsHKsKC1oqRxnGCpLf4+/wB/ouwWFu9m7vX1v973DAWc88Ezn5XX1xmi7+dxxTcB+efw0d9uP9w3x30tYYHeMc2v6ZKzY8cU3Py5xrXukQ8RM54BUO2Oq6Sm33DFX3Un9WM8puDF2RMKInr1TnY3YF4SWFdYXcKVIhFZ0pZ9QSiNiSa28YiE34WF2ylCcVp2+b6LItHPhQzGf5Hmt2sCm+emnDrtyeKwvzGklnVjZvbT27hrNCs2/5/ZMoZai14vFLgybHRycK3IxW/vphEtj+M5SmuN/fmk/7Rsytf5SDmqaXw7eF6sAAAB4nGNgZGJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD8KsYC4MSxAg4A0CDMAALA5CMsAeJy100lOAlEQxvF/QwuCE2JAZhlFEj0UwTFxipKgd/FArlx7jXcC/KpfLdxiYpEfla5+dBf9qoEtIC/nkkLyRYLFp6pJVs9TzuopHzqu6GPrL5hzxzNL3kN1vfbKgnteWIUkq/yOJPtlhQ5jzrK7tagzZKRKlz4DTmgz0dkGpxwzpUeTmdYm5HTHVJ0WKLJNSf3sssc+BxxS5YiaLl9gs2htuN5C/Y463f7gBNqTcUNtTnvQnJ394Vr/Ebv2lXz70Sm2J5H927mry8IN5dKN5Mp15Np15cb15dYN5M7piWjno7Y8uIk8urE8uYY8O+vzxR3Lq5vK0ukxs3JNeXMzeXfahZBENrkhF2E5H9nkhjSyaQ9bkb0FoRBhuRhheTvCcinCcjmytyPsRLYDwWlCCU6zSnCaWoLT/BIqkSaZcBhppgnViNoPob5MjAB4nO1XXWwU1xW+597Zmf2ZndnZnZ3ZH7zL7jKz3vV6/70LdrCxMMZgg8H8NRgwxBQIoNLSJHXUVuIxiQhS3L6l6UvdqoIqiQQVLWpQRdWmVbFUNbSqVCkPfUjTPlSqKiE1zY577uyCm1R5zwP+Offce84959xzv3vuXAIEfxhlvyAKIVY274NW3dAlHxi6SN/Tg84M/Fixk4pzFb6qJEcVuIX9ZD7oXHVeDeaTxJ1PH7IV4iHEB20f5Ok5542dcN05vBM6cHLSOerMT3b1mEW/xf2ALoGYzYPdbDUydYNZgTUSSHFiqJSoBv2SyjsBwNFotOfjG8xan2sPac1W3QSDfh01/SnDSPlRGyevW+EcYa7f99n7xE+ipOiu0c7bQ802iBE01WrUTcM0ICuJkqhztt5utVtNrkSDR3ZPDQzU4PbMX2rO1J7jh6eniiXnl9+8eG7r2NjWcxc/esT8sVScmj48P+tM1WBsfi/crg0MTO2Gy59Qchl3KW5Mb7O3iUmquCJNF7MVkDixm2OQ76UFdBVM3IZcprfcNLQ5MSgx+gIH3hFVcdzjuTsXMBTA5cJbXX4N+XU5/HmNKEZg7q7HM44D7xwI9BkGfEXqcSqsS3u5+jI7TxKYqTJG1g0kigEOQBbDGgEtE9V5+nPrIje+iJbRYDwchH8Gw+HgHU5ed/aEE+E7fEyORGRHDYZH4Sab5jLeQSHcfJ33HolR9ffOHriJYXTx8i77Oe4hAYQlQtJEfAH71ZJz07m1BDMugT1Lzi22EwnMfELA87y2RogAAsHVbEcrogpivoz5HYMKlKFlYC55TnHTVWoakoJ7gFtQAUs3U8CRMAocCnxK1pXCw1BmJNYXDFNBfz47p9GNBe1ZKrAXjS2iED0f+JrpFwwlrl+gAu04/flrxxZ+t3DsWr7/f1h4C2309F7IzGnFNNXOU49nyYykEvoF75LZp3D7F6go7Dj36dku+xhDt9ltEnMx9FlY+Uxw/VtEtERVFy0pfxctItxd57tyF1nf9yJc+CHj3SjCReS6H6ytd9Sewuc2ri62/8AOkzBJkxpG5u7o423me8yyZWiOQj0FugIsq9ConoKGMUqbZQr/efbk8WuWde34yfceMeeHF4eHF5/nZCRe3aTnRnIJbPRNVXaoUFg+sbDcXyz2Ly+cWC4UOh/0NJHA06gS3zSSBWwbOOMx3sfZFaLyOmrnsiKeLaNRb0OryYqdB4GAZpqaX6Ylg5ZhRjS1zj7NlGA6vJk8nn+D3eA1DsGdWy9oDXeBOYXm3NLX5PXNrXpSRmODT33n0HOnT24ZHt5y8vRzp75wcMm8ZMy/uP3INFY+LGLTR8ZHtpR+BC+wwa3jI5tPLX64eGrzSLGwPD92aqhU3LX7zd27iqVEbBBV1uO4x+6Rfqy1CmTLdKjxqbrqxmZmNJPnmuoiG922cmvlysTFyuDe2TuzewcrnDm+Y9vW6ivOTy53hRP3tk1MXFk5evyR3FVMJiqvwNRlV3Rr5XPgX3T9/51dJSHSRzLEIgUyyG+dMm2OUu5OoQgtQGTVR6FZBo8V9TD8x8KagbYp0TfqRydte/Lo6W5Tr81Vq3PPcNK5AAecN4ET9trHl+ifqj+s/tqenF/sai7OT9pwo6eLZBgmqPMvugPohxOd1dr3aut3z8/wPoxglSdWLovHEg8ez1Af5IYyWgMkU8pLDA5dP3uWniknIl420Tl8n55dXd1x/+WXbpyhZ84mIik1eH21cwi0l+/vWF2lOTQrEbK2JngEIK+RG+QBeUg+Ih2+IdAagyHMfBnPu813oN1yG5FjNNsTqKAAFgaswzjoylSIGmbvN4qFxB3ioziQ6tZtro0kDY2WC2uz3u1hZxSLvOuq3eJDBrYYRc899Nqu1Ox5lfCaa9tuPHxumeYxE64z1wLnqJl3p+QxDs613aBs96bIcwuoxR2hcbOdx9l5yWTvKiktHAtIRrivHN/ok0PUJw1tlxOCGovuMxIqS0qp4bTiF5gEzJOpqCUj6fMbIUGQtIg3KEgCgNcjS/6oEkrIkqmlBuMbvbLCZGnD8Ka439TTkYIuKh5vSI4VmknNJ4JI0VLVrwdMpkUkOR4qhSKMSYKz7fTcbGmQsXp9/4GFxbl9g2VKq9XZuQX5rx5/cENl14QS9vqiVrZeGQfJK7djWqxYiWk4ZmcbhlcOyb/R+wVfUPYKqurTgoLIDOaRCnUzIujlfLxiMc/O6HdLB2emvkjTdK9f88fyraTml2Q5njXSlsekyZgQ8G6U5UAwI/mZLx4UI6rfCIS9tY2BkFcxEs3+EFCPLyD6/UYqbHlFr+D1iLIUsp9Kdy1lYilLNAQlEbIjqoeCXwxuiEZMnmXBCER81bTIqAQeX2hDy44lQpGk2VKdp1mjdvDQmRP79pTKjNZr+w88s7B/tlz9qa3H5cjYTjUS60spbLi5WSxqCVkLxAvVeJiP0S0p0ecVRzCh3lBY1ZjkCQbkgGhKctCuxvSiXt4Uq+WZuKK/VPjb9OwlSD85E0/OxJMz8X9ngq118LucCRTfcwmCN4eFHywiPuvwayuDtyI+O7ovC/xmNPmzA1+kIvuHc0xvtXSkvtYAqw60fJ3fpoop/GskLatlWd9mJTuZtD9+kB+37XF6NJpKRZ0fcPrQGrLtIQtd/xdNFnxoAHicY2BkYGAA4uO3TujH89t8ZeBmAQlEcT7e1wCj///9/5+FlYUJKMHBACIZAHZ2DWYAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABVoAW+QEOwAAAHicY2BgYGAhiP//J6wGiFmhmOH/XwYqAwDQmQRZAAAAeJxjYAACBQYThiCGAoZdjGyMPox5jHeYNJhKmI4wPWHWYM5gXsH8g0WNdQO7FXsFsRAA+8AThAB4nGNgZGBg0GJkZGBnAAEmIOYCQgaG/2A+AwANjAFKAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicbYzZboMwFEQ5CUsK3fc93ZdUPOSTLHMJkRyMjCXC35eG187DmdFIM8EkGJUG/2vBhCkhETEJM/ZIydjngEOOOOaEU84454JLrrjmhlvuuOeBR+Y88cwLr7zxzgeffPHNgp8gVc7ZLjdS+myMbr2qfKqVE58XtquzMe7qSBtRbqbtpnHStqG2TR8XYsRLJMPaxbJtVF3MRsuXU+klbIzqEyflMKmiAeKTHfNl3A53uhrMiPaht9bEf8iXYadcjcJh6cgxCCWeNSsqNAU1GxpaerZB8AvjDkPxAAA=') format('woff')}[class*=' _icon-'],[class^='_icon-']{$d:inline-block;$ff:eruda-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{$co:'\\f101'}._icon-arrow-right:before{$co:'\\f102'}._icon-caret-down:before{$co:'\\f103'}._icon-caret-right:before{$co:'\\f104'}._icon-clear:before{$co:'\\f105'}._icon-compress:before{$co:'\\f106'}._icon-copy:before{$co:'\\f107'}._icon-delete:before{$co:'\\f108'}._icon-error:before{$co:'\\f109'}._icon-expand:before{$co:'\\f10a'}._icon-eye:before{$co:'\\f10b'}._icon-play:before{$co:'\\f10c'}._icon-refresh:before{$co:'\\f10d'}._icon-reset:before{$co:'\\f10e'}._icon-search:before{$co:'\\f10f'}._icon-select:before{$co:'\\f110'}._icon-tool:before{$co:'\\f111'}._icon-warn:before{$co:'\\f112'}",""]),q.exports=Q},4432:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"console-container",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"control",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-clear clear-console",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span> <span "+((ce=xe(Te,"class").call(ye,"filter active",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-filter="all">All</span> <span '+((ce=xe(Te,"class").call(ye,"filter",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-filter="error">Error</span> <span '+((ce=xe(Te,"class").call(ye,"filter",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-filter="warn">Warning</span> <span '+((ce=xe(Te,"class").call(ye,"filter",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-filter="info">Info</span> <span '+((ce=xe(Te,"class").call(ye,"search-keyword",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span> <span "+((ce=xe(Te,"class").call(ye,"icon-search search",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span> <span "+((ce=xe(Te,"class").call(ye,"icon-copy icon-disabled copy",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"logs-container",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"logs-space",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"fake-logs",{name:"class",hash:{},data:be}))!=null?ce:"")+"></div><div "+((ce=xe(Te,"class").call(ye,"logs",{name:"class",hash:{},data:be}))!=null?ce:"")+"></div></div></div><div "+((ce=xe(Te,"class").call(ye,"js-input",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"buttons",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"button cancel",{name:"class",hash:{},data:be}))!=null?ce:"")+">Cancel</div><div "+((ce=xe(Te,"class").call(ye,"button execute",{name:"class",hash:{},data:be}))!=null?ce:"")+">Execute</div></div><span "+((ce=xe(Te,"class").call(ye,"icon-arrow-right",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span> <textarea></textarea></div></div>"},useData:!0})},8269:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"dev-tools",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"nav-bar-container",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"nav-bar",{name:"class",hash:{},data:be}))!=null?ce:"")+'></div><div class="eruda-bottom-bar"></div></div><div '+((ce=xe(Te,"class").call(ye,"tools",{name:"class",hash:{},data:be}))!=null?ce:"")+'></div><div class="eruda-notification"></div></div>'},useData:!0})},2407:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"bottom-bar",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"btn select",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon icon-select",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn highlight",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon icon-eye",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn reset",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon icon-reset",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div></div>"},useData:!0})},6560:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <ul "+((ce=xe(Te,"class").call(ye,"parents",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"parents"):ne,{name:"each",hash:{},fn:he.program(2,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </ul> "},2:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return" <li><div "+((ce=Ee(Te,"class").call(ye,"parent",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-idx="'+he.escapeExpression(xe(ne!=null?Ee(ne,"idx"):ne,ne))+'">'+((ce=xe(ne!=null?Ee(ne,"text"):ne,ne))!=null?ce:"")+"</div><span "+((ce=Ee(Te,"class").call(ye,"icon-arrow-right",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></li> "},4:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <ul "+((ce=xe(Te,"class").call(ye,"children",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"children"):ne,{name:"each",hash:{},fn:he.program(5,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </ul> "},5:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return' <li class="eruda-child '+((ce=Ee(Te,"if").call(ye,ne!=null?Ee(ne,"isCmt"):ne,{name:"if",hash:{},fn:he.program(6,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "+((ce=Ee(Te,"if").call(ye,ne!=null?Ee(ne,"isEl"):ne,{name:"if",hash:{},fn:he.program(8,be,0),inverse:he.noop,data:be}))!=null?ce:"")+'" data-idx="'+he.escapeExpression(xe(ne!=null?Ee(ne,"idx"):ne,ne))+'">'+((ce=xe(ne!=null?Ee(ne,"text"):ne,ne))!=null?ce:"")+"</li> "},6:function(he,ne,Te,j,be){return"eruda-green"},8:function(he,ne,Te,j,be){return"eruda-active-effect"},10:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"attributes"):ne,{name:"each",hash:{},fn:he.program(11,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},11:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return' <tr><td class="eruda-attribute-name-color">'+he.escapeExpression(ye(ne!=null?xe(ne,"name"):ne,ne))+'</td><td class="eruda-string-color">'+((ce=ye(ne!=null?xe(ne,"value"):ne,ne))!=null?ce:"")+"</td></tr> "},13:function(he,ne,Te,j,be){return" <tr><td>Empty</td></tr> "},15:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"styles section",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2>Styles</h2><div "+((ce=xe(Te,"class").call(ye,"style-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"styles"):ne,{name:"each",hash:{},fn:he.program(16,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </div></div> "},16:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"style-rules",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div>"+he.escapeExpression(he.lambda(ne!=null?xe(ne,"selectorText"):ne,ne))+" {</div> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"style"):ne,{name:"each",hash:{},fn:he.program(17,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" <div>}</div></div> "},17:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ne!=null?ne:he.nullContext||{},"rule",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span>"+he.escapeExpression(ye(be&&xe(be,"key"),ne))+"</span>: "+((ce=ye(ne,ne))!=null?ce:"")+";</div> "},19:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return" <div "+((ce=Ce(Te,"class").call(ye,"computed-style section",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2>Computed Style "+((ce=Ce(Te,"if").call(ye,ne!=null?Ce(ne,"rmDefComputedStyle"):ne,{name:"if",hash:{},fn:he.program(20,be,0),inverse:he.program(22,be,0),data:be}))!=null?ce:"")+" <div "+((ce=Ce(Te,"class").call(ye,"btn computed-style-search",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=Ce(Te,"class").call(ye,"icon-search",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div> "+((ce=Ce(Te,"if").call(ye,ne!=null?Ce(ne,"computedStyleSearchKeyword"):ne,{name:"if",hash:{},fn:he.program(24,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </h2><div "+((ce=Ce(Te,"class").call(ye,"box-model",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=Ce(Te,"if").call(ye,(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"position"):ce,{name:"if",hash:{},fn:he.program(26,be,0),inverse:he.noop,data:be}))!=null?ce:"")+"<div "+((ce=Ce(Te,"class").call(ye,"margin",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(ye,"label",{name:"class",hash:{},data:be}))!=null?ce:"")+">margin</div><div "+((ce=Ce(Te,"class").call(ye,"top",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"margin"):ce)!=null?Ce(ce,"top"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"left",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"margin"):ce)!=null?Ce(ce,"left"):ce,ne))+"</div><div "+((ce=Ce(Te,"class").call(ye,"border",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(ye,"label",{name:"class",hash:{},data:be}))!=null?ce:"")+">border</div><div "+((ce=Ce(Te,"class").call(ye,"top",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"border"):ce)!=null?Ce(ce,"top"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"left",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"border"):ce)!=null?Ce(ce,"left"):ce,ne))+"</div><div "+((ce=Ce(Te,"class").call(ye,"padding",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(ye,"label",{name:"class",hash:{},data:be}))!=null?ce:"")+">padding</div><div "+((ce=Ce(Te,"class").call(ye,"top",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"padding"):ce)!=null?Ce(ce,"top"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"left",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"padding"):ce)!=null?Ce(ce,"left"):ce,ne))+"</div><div "+((ce=Ce(Te,"class").call(ye,"content",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span>"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"content"):ce)!=null?Ce(ce,"width"):ce,ne))+"</span>&nbsp;\xD7&nbsp;<span>"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"content"):ce)!=null?Ce(ce,"height"):ce,ne))+"</span></div><div "+((ce=Ce(Te,"class").call(ye,"right",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"padding"):ce)!=null?Ce(ce,"right"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"bottom",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"padding"):ce)!=null?Ce(ce,"bottom"):ce,ne))+"</div></div><div "+((ce=Ce(Te,"class").call(ye,"right",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"border"):ce)!=null?Ce(ce,"right"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"bottom",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"border"):ce)!=null?Ce(ce,"bottom"):ce,ne))+"</div></div><div "+((ce=Ce(Te,"class").call(ye,"right",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"margin"):ce)!=null?Ce(ce,"right"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"bottom",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"margin"):ce)!=null?Ce(ce,"bottom"):ce,ne))+"</div></div>"+((ce=Ce(Te,"if").call(ye,(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"position"):ce,{name:"if",hash:{},fn:he.program(28,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </div><div "+((ce=Ce(Te,"class").call(ye,"table-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"><table><tbody> "+((ce=Ce(Te,"each").call(ye,ne!=null?Ce(ne,"computedStyle"):ne,{name:"each",hash:{},fn:he.program(30,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </tbody></table></div></div> "},20:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"btn toggle-all-computed-style",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-compress",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div> "},22:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"btn toggle-all-computed-style",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-expand",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div> "},24:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" <div "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+he.escapeExpression(he.lambda(ne!=null?ye(ne,"computedStyleSearchKeyword"):ne,ne))+" </div> "},26:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return"<div "+((ce=Ce(Te,"class").call(ye,"position",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(ye,"label",{name:"class",hash:{},data:be}))!=null?ce:"")+">position</div><div "+((ce=Ce(Te,"class").call(ye,"top",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"position"):ce)!=null?Ce(ce,"top"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"left",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"position"):ce)!=null?Ce(ce,"left"):ce,ne))+"</div>"},28:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return"<div "+((ce=Ce(Te,"class").call(ye,"right",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"position"):ce)!=null?Ce(ce,"right"):ce,ne))+"</div><br><div "+((ce=Ce(Te,"class").call(ye,"bottom",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe((ce=(ce=ne!=null?Ce(ne,"boxModel"):ne)!=null?Ce(ce,"position"):ce)!=null?Ce(ce,"bottom"):ce,ne))+"</div></div>"},30:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <tr><td "+((ce=xe(Te,"class").call(ne!=null?ne:he.nullContext||{},"key",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(ye(be&&xe(be,"key"),ne))+"</td><td>"+((ce=ye(ne,ne))!=null?ce:"")+"</td></tr> "},32:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"listeners section",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2>Event Listeners</h2><div "+((ce=xe(Te,"class").call(ye,"listener-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"listeners"):ne,{name:"each",hash:{},fn:he.program(33,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </div></div> "},33:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"listener",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"listener-type",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(be&&xe(be,"key"),ne))+"</div><ul "+((ce=xe(Te,"class").call(ye,"listener-content",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne,{name:"each",hash:{},fn:he.program(34,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </ul></div> "},34:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" <li "+((ce=ye(Te,"if").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"useCapture"):ne,{name:"if",hash:{},fn:he.program(35,be,0),inverse:he.noop,data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"listenerStr"):ne,ne))+"</li> "},35:function(he,ne,Te,j,be){var ce;return(ce=(he.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]})(Te,"class").call(ne!=null?ne:he.nullContext||{},"capture",{name:"class",hash:{},data:be}))!=null?ce:""},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"parents"):ne,{name:"if",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" <div "+((ce=xe(Te,"class").call(ye,"breadcrumb",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=he.lambda(ne!=null?xe(ne,"name"):ne,ne))!=null?ce:"")+" </div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"children"):ne,{name:"if",hash:{},fn:he.program(4,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" <div "+((ce=xe(Te,"class").call(ye,"attributes section",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2>Attributes</h2><div "+((ce=xe(Te,"class").call(ye,"table-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"><table><tbody> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"attributes"):ne,{name:"if",hash:{},fn:he.program(10,be,0),inverse:he.program(13,be,0),data:be}))!=null?ce:"")+" </tbody></table></div></div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"styles"):ne,{name:"if",hash:{},fn:he.program(15,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"computedStyle"):ne,{name:"if",hash:{},fn:he.program(19,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"listeners"):ne,{name:"if",hash:{},fn:he.program(32,be,0),inverse:he.noop,data:be}))!=null?ce:"")},useData:!0})},7640:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"entry-btn",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-tool",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div>"},useData:!0})},2861:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return" <li><h2 "+((ce=Ee(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(xe(ne!=null?Ee(ne,"name"):ne,ne))+"</h2><div "+((ce=Ee(Te,"class").call(ye,"content",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+((ce=xe(ne!=null?Ee(ne,"val"):ne,ne))!=null?ce:"")+"</div></li> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return"<ul> "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"infos"):ne,{name:"each",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </ul>"},useData:!0})},4854:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Request<div "+((ce=xe(Te,"class").call(ye,"btn clear-request",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-clear",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div></div><ul "+((ce=xe(Te,"class").call(ye,"requests",{name:"class",hash:{},data:be}))!=null?ce:"")+"></ul><div "+((ce=xe(Te,"class").call(ye,"detail",{name:"class",hash:{},data:be}))!=null?ce:"")+"></div>"},useData:!0})},1083:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" <pre "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"data",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"data"):ne,ne))+"</pre> "},3:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"reqHeaders"):ne,{name:"each",hash:{},fn:he.program(4,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},4:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return" <tr><td "+((ce=Ee(Te,"class").call(ne!=null?ne:he.nullContext||{},"key",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+xe(ye(be&&Ee(be,"key"),ne))+"</td><td>"+xe(ye(ne,ne))+"</td></tr> "},6:function(he,ne,Te,j,be){return" <tr><td>Empty</td></tr> "},8:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"resHeaders"):ne,{name:"each",hash:{},fn:he.program(4,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},10:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" <pre "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"response",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"resTxt"):ne,ne))+"</pre> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"http",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"breadcrumb",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?xe(ne,"url"):ne,ne))+"</div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"data"):ne,{name:"if",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" <div "+((ce=xe(Te,"class").call(ye,"section",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2>Request Headers</h2><table "+((ce=xe(Te,"class").call(ye,"headers",{name:"class",hash:{},data:be}))!=null?ce:"")+"><tbody> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"reqHeaders"):ne,{name:"if",hash:{},fn:he.program(3,be,0),inverse:he.program(6,be,0),data:be}))!=null?ce:"")+" </tbody></table><h2>Response Headers</h2><table "+((ce=xe(Te,"class").call(ye,"headers",{name:"class",hash:{},data:be}))!=null?ce:"")+"><tbody> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"resHeaders"):ne,{name:"if",hash:{},fn:he.program(8,be,0),inverse:he.program(6,be,0),data:be}))!=null?ce:"")+" </tbody></table></div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"resTxt"):ne,{name:"if",hash:{},fn:he.program(10,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </div><div "+((ce=xe(Te,"class").call(ye,"back",{name:"class",hash:{},data:be}))!=null?ce:"")+">Back to the List</div>"},useData:!0})},726:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"requests"):ne,{name:"each",hash:{},fn:he.program(2,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},2:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return' <li class="eruda-request '+((ce=Ce(Te,"if").call(ye,ne!=null?Ce(ne,"hasErr"):ne,{name:"if",hash:{},fn:he.program(3,be,0),inverse:he.noop,data:be}))!=null?ce:"")+'" data-id="'+Ee(xe(be&&Ce(be,"key"),ne))+'"><span '+((ce=Ce(Te,"class").call(ye,"name",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"name"):ne,ne))+"</span><span "+((ce=Ce(Te,"class").call(ye,"status",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"status"):ne,ne))+"</span><span "+((ce=Ce(Te,"class").call(ye,"method",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"method"):ne,ne))+"</span><span "+((ce=Ce(Te,"class").call(ye,"type",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"subType"):ne,ne))+"</span><span "+((ce=Ce(Te,"class").call(ye,"size",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"size"):ne,ne))+"</span><span "+((ce=Ce(Te,"class").call(ye,"time",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"displayTime"):ne,ne))+"</span></li> "},3:function(he,ne,Te,j,be){return"eruda-error"},5:function(he,ne,Te,j,be){var ce;return" <li><span "+((ce=(he.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]})(Te,"class").call(ne!=null?ne:he.nullContext||{},"name",{name:"class",hash:{},data:be}))!=null?ce:"")+">Empty</span></li> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return(ce=ye(Te,"if").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"requests"):ne,{name:"if",hash:{},fn:he.program(1,be,0),inverse:he.program(5,be,0),data:be}))!=null?ce:""},useData:!0})},2875:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return"<div "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"localStoreSearchKeyword"):ne,ne))+"</div>"},3:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"localStoreData"):ne,{name:"each",hash:{},fn:he.program(4,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},4:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return" <tr><td "+((ce=Ce(Te,"class").call(ye,"key",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+"</td><td "+((ce=Ce(Te,"class").call(ye,"storage-val",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-key="'+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+'" data-type="local">'+Ee(xe(ne!=null?Ce(ne,"val"):ne,ne))+"</td><td "+((ce=Ce(Te,"class").call(ye,"control",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=Ce(Te,"class").call(ye,"icon-delete delete-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-key="'+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+'" data-type="local"></span></td></tr> '},6:function(he,ne,Te,j,be){return" <tr><td>Empty</td></tr> "},8:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return"<div "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"sessionStoreSearchKeyword"):ne,ne))+"</div>"},10:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"sessionStoreData"):ne,{name:"each",hash:{},fn:he.program(11,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},11:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return" <tr><td "+((ce=Ce(Te,"class").call(ye,"key",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+"</td><td "+((ce=Ce(Te,"class").call(ye,"storage-val",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-key="'+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+'" data-type="session">'+Ee(xe(ne!=null?Ce(ne,"val"):ne,ne))+"</td><td "+((ce=Ce(Te,"class").call(ye,"control",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=Ce(Te,"class").call(ye,"icon-delete delete-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-key="'+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+'" data-type="session"></span></td></tr> '},13:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return"<div "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"cookieSearchKeyword"):ne,ne))+"</div>"},15:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"cookieData"):ne,{name:"each",hash:{},fn:he.program(16,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},16:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return" <tr><td "+((ce=Ce(Te,"class").call(ye,"key",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+"</td><td>"+Ee(xe(ne!=null?Ce(ne,"val"):ne,ne))+"</td><td "+((ce=Ce(Te,"class").call(ye,"control",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=Ce(Te,"class").call(ye,"icon-delete delete-cookie",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-key="'+Ee(xe(ne!=null?Ce(ne,"key"):ne,ne))+'"></span></td></tr> '},18:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"scriptData"):ne,{name:"each",hash:{},fn:he.program(19,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},19:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return' <li><a href="'+xe(ye(ne,ne))+'" target="_blank" '+((ce=Ee(Te,"class").call(ne!=null?ne:he.nullContext||{},"js-link",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+xe(ye(ne,ne))+"</a></li> "},21:function(he,ne,Te,j,be){return" <li>Empty</li> "},23:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"stylesheetData"):ne,{name:"each",hash:{},fn:he.program(24,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},24:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return' <li><a href="'+xe(ye(ne,ne))+'" target="_blank" '+((ce=Ee(Te,"class").call(ne!=null?ne:he.nullContext||{},"css-link",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+xe(ye(ne,ne))+"</a></li> "},26:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"iframeData"):ne,{name:"each",hash:{},fn:he.program(27,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},27:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=he.lookupProperty||function(Ce,Se){if(Object.prototype.hasOwnProperty.call(Ce,Se))return Ce[Se]};return' <li><a href="'+xe(ye(ne,ne))+'" target="_blank" '+((ce=Ee(Te,"class").call(ne!=null?ne:he.nullContext||{},"iframe-link",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+xe(ye(ne,ne))+"</a></li> "},29:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" "+((ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"imageData"):ne,{name:"each",hash:{},fn:he.program(30,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" "},30:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <li "+((ce=xe(Te,"class").call(ye,"image",{name:"class",hash:{},data:be}))!=null?ce:"")+'><img src="'+he.escapeExpression(he.lambda(ne,ne))+'" data-exclude="true" '+((ce=xe(Te,"class").call(ye,"img-link",{name:"class",hash:{},data:be}))!=null?ce:"")+"></li> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"section local-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Local Storage<div "+((ce=xe(Te,"class").call(ye,"btn refresh-local-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn clear-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-type="local"><span '+((ce=xe(Te,"class").call(ye,"icon-clear",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn search",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-type="local"><span '+((ce=xe(Te,"class").call(ye,"icon-search",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"localStoreSearchKeyword"):ne,{name:"if",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </h2><div "+((ce=xe(Te,"class").call(ye,"content",{name:"class",hash:{},data:be}))!=null?ce:"")+"><table><tbody> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"localStoreData"):ne,{name:"if",hash:{},fn:he.program(3,be,0),inverse:he.program(6,be,0),data:be}))!=null?ce:"")+" </tbody></table></div></div><div "+((ce=xe(Te,"class").call(ye,"section session-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Session Storage<div "+((ce=xe(Te,"class").call(ye,"btn refresh-session-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn clear-storage",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-type="session"><span '+((ce=xe(Te,"class").call(ye,"icon-clear",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn search",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-type="session"><span '+((ce=xe(Te,"class").call(ye,"icon-search",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"sessionStoreSearchKeyword"):ne,{name:"if",hash:{},fn:he.program(8,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </h2><div "+((ce=xe(Te,"class").call(ye,"content",{name:"class",hash:{},data:be}))!=null?ce:"")+"><table><tbody> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"sessionStoreData"):ne,{name:"if",hash:{},fn:he.program(10,be,0),inverse:he.program(6,be,0),data:be}))!=null?ce:"")+" </tbody></table></div></div><div "+((ce=xe(Te,"class").call(ye,xe(Te,"concat").call(ye,"section cookie ",ne!=null?xe(ne,"cookieState"):ne,{name:"concat",hash:{},data:be}),{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Cookie<div "+((ce=xe(Te,"class").call(ye,"btn refresh-cookie",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn clear-cookie",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-clear",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div><div "+((ce=xe(Te,"class").call(ye,"btn search",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-type="cookie"><span '+((ce=xe(Te,"class").call(ye,"icon-search",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"cookieSearchKeyword"):ne,{name:"if",hash:{},fn:he.program(13,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </h2><div "+((ce=xe(Te,"class").call(ye,"content",{name:"class",hash:{},data:be}))!=null?ce:"")+"><table><tbody> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"cookieData"):ne,{name:"if",hash:{},fn:he.program(15,be,0),inverse:he.program(6,be,0),data:be}))!=null?ce:"")+" </tbody></table></div></div><div "+((ce=xe(Te,"class").call(ye,xe(Te,"concat").call(ye,"section script ",ne!=null?xe(ne,"scriptState"):ne,{name:"concat",hash:{},data:be}),{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Script<div "+((ce=xe(Te,"class").call(ye,"btn refresh-script",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div></h2><ul "+((ce=xe(Te,"class").call(ye,"link-list",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"scriptData"):ne,{name:"if",hash:{},fn:he.program(18,be,0),inverse:he.program(21,be,0),data:be}))!=null?ce:"")+" </ul></div><div "+((ce=xe(Te,"class").call(ye,xe(Te,"concat").call(ye,"section stylesheet ",ne!=null?xe(ne,"stylesheetState"):ne,{name:"concat",hash:{},data:be}),{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Stylesheet<div "+((ce=xe(Te,"class").call(ye,"btn refresh-stylesheet",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div></h2><ul "+((ce=xe(Te,"class").call(ye,"link-list",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"stylesheetData"):ne,{name:"if",hash:{},fn:he.program(23,be,0),inverse:he.program(21,be,0),data:be}))!=null?ce:"")+" </ul></div><div "+((ce=xe(Te,"class").call(ye,"section iframe",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,"title",{name:"class",hash:{},data:be}))!=null?ce:"")+">Iframe<div "+((ce=xe(Te,"class").call(ye,"btn refresh-iframe",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div></h2><ul "+((ce=xe(Te,"class").call(ye,"link-list",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"iframeData"):ne,{name:"if",hash:{},fn:he.program(26,be,0),inverse:he.program(21,be,0),data:be}))!=null?ce:"")+" </ul></div><div "+((ce=xe(Te,"class").call(ye,"section image",{name:"class",hash:{},data:be}))!=null?ce:"")+"><h2 "+((ce=xe(Te,"class").call(ye,xe(Te,"concat").call(ye,"title ",ne!=null?xe(ne,"imageState"):ne,{name:"concat",hash:{},data:be}),{name:"class",hash:{},data:be}))!=null?ce:"")+">Image<div "+((ce=xe(Te,"class").call(ye,"btn refresh-image",{name:"class",hash:{},data:be}))!=null?ce:"")+"><span "+((ce=xe(Te,"class").call(ye,"icon-refresh",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></div></h2><ul "+((ce=xe(Te,"class").call(ye,"image-list",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"if").call(ye,ne!=null?xe(ne,"imageData"):ne,{name:"if",hash:{},fn:he.program(29,be,0),inverse:he.program(21,be,0),data:be}))!=null?ce:"")+" </ul></div>"},useData:!0})},6652:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){return' <li style="background: '+he.escapeExpression(he.lambda(ne,ne))+'"></li> '},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=ne!=null?ne:he.nullContext||{},Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return'<div id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'" '+((ce=Ce(Te,"class").call(Ee,"color",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(Ee,"head",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+xe(ye(ne!=null?Ce(ne,"desc"):ne,ne))+" <span "+((ce=Ce(Te,"class").call(Ee,"val",{name:"class",hash:{},data:be}))!=null?ce:"")+' style="background-color: '+xe(ye(ne!=null?Ce(ne,"val"):ne,ne))+'"></span></div><ul data-id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'"> '+((ce=Ce(Te,"each").call(Ee,ne!=null?Ce(ne,"colors"):ne,{name:"each",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </ul></div>"},useData:!0})},480:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=ne!=null?ne:he.nullContext||{},Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return'<div id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'" '+((ce=Ce(Te,"class").call(Ee,"range",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(Ee,"head",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+xe(ye(ne!=null?Ce(ne,"desc"):ne,ne))+" <span "+((ce=Ce(Te,"class").call(Ee,"val",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+xe(ye(ne!=null?Ce(ne,"val"):ne,ne))+"</span></div><div "+((ce=Ce(Te,"class").call(Ee,"input-container",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'"><div '+((ce=Ce(Te,"class").call(Ee,"range-track",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(Ee,"range-track-bar",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(Ee,"range-track-progress",{name:"class",hash:{},data:be}))!=null?ce:"")+' style="width: '+xe(ye(ne!=null?Ce(ne,"progress"):ne,ne))+'%"></div></div></div><input type="range" min="'+xe(ye(ne!=null?Ce(ne,"min"):ne,ne))+'" max="'+xe(ye(ne!=null?Ce(ne,"max"):ne,ne))+'" step="'+xe(ye(ne!=null?Ce(ne,"step"):ne,ne))+'" value="'+xe(ye(ne!=null?Ce(ne,"val"):ne,ne))+'"></div></div>'},useData:!0})},1868:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){return" <li>"+he.escapeExpression(he.lambda(ne,ne))+"</li> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=ne!=null?ne:he.nullContext||{},Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return'<div id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'" '+((ce=Ce(Te,"class").call(Ee,"select",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(Ee,"head",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+xe(ye(ne!=null?Ce(ne,"desc"):ne,ne))+" <span "+((ce=Ce(Te,"class").call(Ee,"val",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+xe(ye(ne!=null?Ce(ne,"val"):ne,ne))+'</span></div><ul data-id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'"> '+((ce=Ce(Te,"each").call(Ee,ne!=null?Ce(ne,"selections"):ne,{name:"each",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </ul></div>"},useData:!0})},7006:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){return' checked="checked" '},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lambda,xe=he.escapeExpression,Ee=ne!=null?ne:he.nullContext||{},Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return'<div id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'" '+((ce=Ce(Te,"class").call(Ee,"switch",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+xe(ye(ne!=null?Ce(ne,"desc"):ne,ne))+" <label "+((ce=Ce(Te,"class").call(Ee,"checkbox",{name:"class",hash:{},data:be}))!=null?ce:"")+'><input type="checkbox" '+((ce=Ce(Te,"class").call(Ee,"input",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-id="'+xe(ye(ne!=null?Ce(ne,"id"):ne,ne))+'" '+((ce=Ce(Te,"if").call(Ee,ne!=null?Ce(ne,"val"):ne,{name:"if",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:"")+"> <span "+((ce=Ce(Te,"class").call(Ee,"label",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span> <span "+((ce=Ce(Te,"class").call(Ee,"handle",{name:"class",hash:{},data:be}))!=null?ce:"")+"></span></label></div>"},useData:!0})},1122:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce=he.lambda,ye=he.escapeExpression,xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return' <div class="eruda-section eruda-run" data-idx="'+ye(ce(be&&xe(be,"index"),ne))+'"><h2 class="eruda-name">'+ye(ce(ne!=null?xe(ne,"name"):ne,ne))+' <div class="eruda-btn"><span class="eruda-icon-play"></span></div></h2><div class="eruda-description"> '+ye(ce(ne!=null?xe(ne,"desc"):ne,ne))+" </div></div> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return(ce=ye(Te,"each").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"snippets"):ne,{name:"each",hash:{},fn:he.program(1,be,0),inverse:he.noop,data:be}))!=null?ce:""},useData:!0})},431:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({1:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"code-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"><table "+((ce=xe(Te,"class").call(ye,"code",{name:"class",hash:{},data:be}))!=null?ce:"")+"><tbody><tr><td "+((ce=xe(Te,"class").call(ye,"gutter",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"code"):ne,{name:"each",hash:{},fn:he.program(2,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </td><td "+((ce=xe(Te,"class").call(ye,"content",{name:"class",hash:{},data:be}))!=null?ce:"")+"> "+((ce=xe(Te,"each").call(ye,ne!=null?xe(ne,"code"):ne,{name:"each",hash:{},fn:he.program(4,be,0),inverse:he.noop,data:be}))!=null?ce:"")+" </td></tr></tbody></table></div> "},2:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" <div "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"line-num",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?ye(ne,"idx"):ne,ne))+"</div> "},4:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return" <pre "+((ce=ye(Te,"class").call(ne!=null?ne:he.nullContext||{},"code-line",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+((ce=he.lambda(ne!=null?ye(ne,"val"):ne,ne))!=null?ce:"")+"</pre> "},6:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return" <div "+((ce=xe(Te,"class").call(ye,"code-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"><pre "+((ce=xe(Te,"class").call(ye,"code",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+((ce=he.lambda(ne!=null?xe(ne,"code"):ne,ne))!=null?ce:"")+"</pre></div> "},compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return(ce=ye(Te,"if").call(ne!=null?ne:he.nullContext||{},ne!=null?ye(ne,"showLineNum"):ne,{name:"if",hash:{},fn:he.program(1,be,0),inverse:he.program(6,be,0),data:be}))!=null?ce:""},useData:!0})},6680:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=he.lookupProperty||function(xe,Ee){if(Object.prototype.hasOwnProperty.call(xe,Ee))return xe[Ee]};return'<iframe src="'+((ce=he.lambda(ne!=null?ye(ne,"src"):ne,ne))!=null?ce:"")+'"></iframe>'},useData:!0})},2229:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lambda,Ee=he.escapeExpression,Ce=he.lookupProperty||function(Se,Oe){if(Object.prototype.hasOwnProperty.call(Se,Oe))return Se[Oe]};return"<div "+((ce=Ce(Te,"class").call(ye,"image",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=Ce(Te,"class").call(ye,"breadcrumb",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"src"):ne,ne))+"</div><div "+((ce=Ce(Te,"class").call(ye,"img-container",{name:"class",hash:{},data:be}))!=null?ce:"")+' data-exclude="true"><img src="'+Ee(xe(ne!=null?Ce(ne,"src"):ne,ne))+'"></div><div '+((ce=Ce(Te,"class").call(ye,"img-info",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+Ee(xe(ne!=null?Ce(ne,"width"):ne,ne))+" \xD7 "+Ee(xe(ne!=null?Ce(ne,"height"):ne,ne))+"</div></div>"},useData:!0})},2944:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce;return"<ul "+((ce=(he.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]})(Te,"class").call(ne!=null?ne:he.nullContext||{},"json",{name:"class",hash:{},data:be}))!=null?ce:"")+"></ul>"},useData:!0})},8191:function(q,Q,V){var de=V(9871);q.exports=(de.default||de).template({compiler:[8,">= 4.3.0"],main:function(he,ne,Te,j,be){var ce,ye=ne!=null?ne:he.nullContext||{},xe=he.lookupProperty||function(Ee,Ce){if(Object.prototype.hasOwnProperty.call(Ee,Ce))return Ee[Ce]};return"<div "+((ce=xe(Te,"class").call(ye,"raw-wrapper",{name:"class",hash:{},data:be}))!=null?ce:"")+"><div "+((ce=xe(Te,"class").call(ye,"raw",{name:"class",hash:{},data:be}))!=null?ce:"")+">"+he.escapeExpression(he.lambda(ne!=null?xe(ne,"val"):ne,ne))+"</div></div>"},useData:!0})},9669:function(q,Q,V){q.exports=V(1609)},5448:function(q,Q,V){var de=V(4867),he=V(6026),ne=V(4372),Te=V(5327),j=V(4097),be=V(4109),ce=V(7985),ye=V(7874),xe=V(2648),Ee=V(644),Ce=V(205);q.exports=function(Se){return new Promise(function(Oe,De){var Ue,$e=Se.data,Fe=Se.headers,Xe=Se.responseType;function Ye(){Se.cancelToken&&Se.cancelToken.unsubscribe(Ue),Se.signal&&Se.signal.removeEventListener("abort",Ue)}de.isFormData($e)&&de.isStandardBrowserEnv()&&delete Fe["Content-Type"];var He=new XMLHttpRequest;if(Se.auth){var Je=Se.auth.username||"",pt=Se.auth.password?unescape(encodeURIComponent(Se.auth.password)):"";Fe.Authorization="Basic "+btoa(Je+":"+pt)}var It=j(Se.baseURL,Se.url);function At(){if(He){var nt="getAllResponseHeaders"in He?be(He.getAllResponseHeaders()):null,it={data:Xe&&Xe!=="text"&&Xe!=="json"?He.response:He.responseText,status:He.status,statusText:He.statusText,headers:nt,config:Se,request:He};he(function(dt){Oe(dt),Ye()},function(dt){De(dt),Ye()},it),He=null}}if(He.open(Se.method.toUpperCase(),Te(It,Se.params,Se.paramsSerializer),!0),He.timeout=Se.timeout,"onloadend"in He?He.onloadend=At:He.onreadystatechange=function(){He&&He.readyState===4&&(He.status!==0||He.responseURL&&He.responseURL.indexOf("file:")===0)&&setTimeout(At)},He.onabort=function(){He&&(De(new xe("Request aborted",xe.ECONNABORTED,Se,He)),He=null)},He.onerror=function(){De(new xe("Network Error",xe.ERR_NETWORK,Se,He,He)),He=null},He.ontimeout=function(){var nt=Se.timeout?"timeout of "+Se.timeout+"ms exceeded":"timeout exceeded",it=Se.transitional||ye;Se.timeoutErrorMessage&&(nt=Se.timeoutErrorMessage),De(new xe(nt,it.clarifyTimeoutError?xe.ETIMEDOUT:xe.ECONNABORTED,Se,He)),He=null},de.isStandardBrowserEnv()){var bt=(Se.withCredentials||ce(It))&&Se.xsrfCookieName?ne.read(Se.xsrfCookieName):void 0;bt&&(Fe[Se.xsrfHeaderName]=bt)}"setRequestHeader"in He&&de.forEach(Fe,function(nt,it){$e===void 0&&it.toLowerCase()==="content-type"?delete Fe[it]:He.setRequestHeader(it,nt)}),de.isUndefined(Se.withCredentials)||(He.withCredentials=!!Se.withCredentials),Xe&&Xe!=="json"&&(He.responseType=Se.responseType),typeof Se.onDownloadProgress=="function"&&He.addEventListener("progress",Se.onDownloadProgress),typeof Se.onUploadProgress=="function"&&He.upload&&He.upload.addEventListener("progress",Se.onUploadProgress),(Se.cancelToken||Se.signal)&&(Ue=function(nt){He&&(De(!nt||nt&&nt.type?new Ee:nt),He.abort(),He=null)},Se.cancelToken&&Se.cancelToken.subscribe(Ue),Se.signal&&(Se.signal.aborted?Ue():Se.signal.addEventListener("abort",Ue))),$e||($e=null);var rt=Ce(It);rt&&["http","https","file"].indexOf(rt)===-1?De(new xe("Unsupported protocol "+rt+":",xe.ERR_BAD_REQUEST,Se)):He.send($e)})}},1609:function(q,Q,V){var de=V(4867),he=V(1849),ne=V(321),Te=V(7185),j=function be(ce){var ye=new ne(ce),xe=he(ne.prototype.request,ye);return de.extend(xe,ne.prototype,ye),de.extend(xe,ye),xe.create=function(Ee){return be(Te(ce,Ee))},xe}(V(5546));j.Axios=ne,j.CanceledError=V(644),j.CancelToken=V(4972),j.isCancel=V(6502),j.VERSION=V(7288).version,j.toFormData=V(7675),j.AxiosError=V(2648),j.Cancel=j.CanceledError,j.all=function(be){return Promise.all(be)},j.spread=V(8713),j.isAxiosError=V(6268),q.exports=j,q.exports.default=j},4972:function(q,Q,V){var de=V(644);function he(ne){if(typeof ne!="function")throw new TypeError("executor must be a function.");var Te;this.promise=new Promise(function(be){Te=be});var j=this;this.promise.then(function(be){if(j._listeners){var ce,ye=j._listeners.length;for(ce=0;ce<ye;ce++)j._listeners[ce](be);j._listeners=null}}),this.promise.then=function(be){var ce,ye=new Promise(function(xe){j.subscribe(xe),ce=xe}).then(be);return ye.cancel=function(){j.unsubscribe(ce)},ye},ne(function(be){j.reason||(j.reason=new de(be),Te(j.reason))})}he.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},he.prototype.subscribe=function(ne){this.reason?ne(this.reason):this._listeners?this._listeners.push(ne):this._listeners=[ne]},he.prototype.unsubscribe=function(ne){if(this._listeners){var Te=this._listeners.indexOf(ne);Te!==-1&&this._listeners.splice(Te,1)}},he.source=function(){var ne;return{token:new he(function(Te){ne=Te}),cancel:ne}},q.exports=he},644:function(q,Q,V){var de=V(2648);function he(ne){de.call(this,ne==null?"canceled":ne,de.ERR_CANCELED),this.name="CanceledError"}V(4867).inherits(he,de,{__CANCEL__:!0}),q.exports=he},6502:function(q){q.exports=function(Q){return!(!Q||!Q.__CANCEL__)}},321:function(q,Q,V){var de=V(4867),he=V(5327),ne=V(782),Te=V(3572),j=V(7185),be=V(4097),ce=V(4875),ye=ce.validators;function xe(Ee){this.defaults=Ee,this.interceptors={request:new ne,response:new ne}}xe.prototype.request=function(Ee,Ce){typeof Ee=="string"?(Ce=Ce||{}).url=Ee:Ce=Ee||{},(Ce=j(this.defaults,Ce)).method?Ce.method=Ce.method.toLowerCase():this.defaults.method?Ce.method=this.defaults.method.toLowerCase():Ce.method="get";var Se=Ce.transitional;Se!==void 0&&ce.assertOptions(Se,{silentJSONParsing:ye.transitional(ye.boolean),forcedJSONParsing:ye.transitional(ye.boolean),clarifyTimeoutError:ye.transitional(ye.boolean)},!1);var Oe=[],De=!0;this.interceptors.request.forEach(function(Je){typeof Je.runWhen=="function"&&Je.runWhen(Ce)===!1||(De=De&&Je.synchronous,Oe.unshift(Je.fulfilled,Je.rejected))});var Ue,$e=[];if(this.interceptors.response.forEach(function(Je){$e.push(Je.fulfilled,Je.rejected)}),!De){var Fe=[Te,void 0];for(Array.prototype.unshift.apply(Fe,Oe),Fe=Fe.concat($e),Ue=Promise.resolve(Ce);Fe.length;)Ue=Ue.then(Fe.shift(),Fe.shift());return Ue}for(var Xe=Ce;Oe.length;){var Ye=Oe.shift(),He=Oe.shift();try{Xe=Ye(Xe)}catch(Je){He(Je);break}}try{Ue=Te(Xe)}catch(Je){return Promise.reject(Je)}for(;$e.length;)Ue=Ue.then($e.shift(),$e.shift());return Ue},xe.prototype.getUri=function(Ee){Ee=j(this.defaults,Ee);var Ce=be(Ee.baseURL,Ee.url);return he(Ce,Ee.params,Ee.paramsSerializer)},de.forEach(["delete","get","head","options"],function(Ee){xe.prototype[Ee]=function(Ce,Se){return this.request(j(Se||{},{method:Ee,url:Ce,data:(Se||{}).data}))}}),de.forEach(["post","put","patch"],function(Ee){function Ce(Se){return function(Oe,De,Ue){return this.request(j(Ue||{},{method:Ee,headers:Se?{"Content-Type":"multipart/form-data"}:{},url:Oe,data:De}))}}xe.prototype[Ee]=Ce(),xe.prototype[Ee+"Form"]=Ce(!0)}),q.exports=xe},2648:function(q,Q,V){var de=V(4867);function he(j,be,ce,ye,xe){Error.call(this),this.message=j,this.name="AxiosError",be&&(this.code=be),ce&&(this.config=ce),ye&&(this.request=ye),xe&&(this.response=xe)}de.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var ne=he.prototype,Te={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(j){Te[j]={value:j}}),Object.defineProperties(he,Te),Object.defineProperty(ne,"isAxiosError",{value:!0}),he.from=function(j,be,ce,ye,xe,Ee){var Ce=Object.create(ne);return de.toFlatObject(j,Ce,function(Se){return Se!==Error.prototype}),he.call(Ce,j.message,be,ce,ye,xe),Ce.name=j.name,Ee&&Object.assign(Ce,Ee),Ce},q.exports=he},782:function(q,Q,V){var de=V(4867);function he(){this.handlers=[]}he.prototype.use=function(ne,Te,j){return this.handlers.push({fulfilled:ne,rejected:Te,synchronous:!!j&&j.synchronous,runWhen:j?j.runWhen:null}),this.handlers.length-1},he.prototype.eject=function(ne){this.handlers[ne]&&(this.handlers[ne]=null)},he.prototype.forEach=function(ne){de.forEach(this.handlers,function(Te){Te!==null&&ne(Te)})},q.exports=he},4097:function(q,Q,V){var de=V(1793),he=V(7303);q.exports=function(ne,Te){return ne&&!de(Te)?he(ne,Te):Te}},3572:function(q,Q,V){var de=V(4867),he=V(8527),ne=V(6502),Te=V(5546),j=V(644);function be(ce){if(ce.cancelToken&&ce.cancelToken.throwIfRequested(),ce.signal&&ce.signal.aborted)throw new j}q.exports=function(ce){return be(ce),ce.headers=ce.headers||{},ce.data=he.call(ce,ce.data,ce.headers,ce.transformRequest),ce.headers=de.merge(ce.headers.common||{},ce.headers[ce.method]||{},ce.headers),de.forEach(["delete","get","head","post","put","patch","common"],function(ye){delete ce.headers[ye]}),(ce.adapter||Te.adapter)(ce).then(function(ye){return be(ce),ye.data=he.call(ce,ye.data,ye.headers,ce.transformResponse),ye},function(ye){return ne(ye)||(be(ce),ye&&ye.response&&(ye.response.data=he.call(ce,ye.response.data,ye.response.headers,ce.transformResponse))),Promise.reject(ye)})}},7185:function(q,Q,V){var de=V(4867);q.exports=function(he,ne){ne=ne||{};var Te={};function j(Ce,Se){return de.isPlainObject(Ce)&&de.isPlainObject(Se)?de.merge(Ce,Se):de.isPlainObject(Se)?de.merge({},Se):de.isArray(Se)?Se.slice():Se}function be(Ce){return de.isUndefined(ne[Ce])?de.isUndefined(he[Ce])?void 0:j(void 0,he[Ce]):j(he[Ce],ne[Ce])}function ce(Ce){if(!de.isUndefined(ne[Ce]))return j(void 0,ne[Ce])}function ye(Ce){return de.isUndefined(ne[Ce])?de.isUndefined(he[Ce])?void 0:j(void 0,he[Ce]):j(void 0,ne[Ce])}function xe(Ce){return Ce in ne?j(he[Ce],ne[Ce]):Ce in he?j(void 0,he[Ce]):void 0}var Ee={url:ce,method:ce,data:ce,baseURL:ye,transformRequest:ye,transformResponse:ye,paramsSerializer:ye,timeout:ye,timeoutMessage:ye,withCredentials:ye,adapter:ye,responseType:ye,xsrfCookieName:ye,xsrfHeaderName:ye,onUploadProgress:ye,onDownloadProgress:ye,decompress:ye,maxContentLength:ye,maxBodyLength:ye,beforeRedirect:ye,transport:ye,httpAgent:ye,httpsAgent:ye,cancelToken:ye,socketPath:ye,responseEncoding:ye,validateStatus:xe};return de.forEach(Object.keys(he).concat(Object.keys(ne)),function(Ce){var Se=Ee[Ce]||be,Oe=Se(Ce);de.isUndefined(Oe)&&Se!==xe||(Te[Ce]=Oe)}),Te}},6026:function(q,Q,V){var de=V(2648);q.exports=function(he,ne,Te){var j=Te.config.validateStatus;Te.status&&j&&!j(Te.status)?ne(new de("Request failed with status code "+Te.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(Te.status/100)-4],Te.config,Te.request,Te)):he(Te)}},8527:function(q,Q,V){var de=V(4867),he=V(5546);q.exports=function(ne,Te,j){var be=this||he;return de.forEach(j,function(ce){ne=ce.call(be,ne,Te)}),ne}},5546:function(q,Q,V){var de=V(4867),he=V(6016),ne=V(2648),Te=V(7874),j=V(7675),be={"Content-Type":"application/x-www-form-urlencoded"};function ce(Ee,Ce){!de.isUndefined(Ee)&&de.isUndefined(Ee["Content-Type"])&&(Ee["Content-Type"]=Ce)}var ye,xe={transitional:Te,adapter:((typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(ye=V(5448)),ye),transformRequest:[function(Ee,Ce){if(he(Ce,"Accept"),he(Ce,"Content-Type"),de.isFormData(Ee)||de.isArrayBuffer(Ee)||de.isBuffer(Ee)||de.isStream(Ee)||de.isFile(Ee)||de.isBlob(Ee))return Ee;if(de.isArrayBufferView(Ee))return Ee.buffer;if(de.isURLSearchParams(Ee))return ce(Ce,"application/x-www-form-urlencoded;charset=utf-8"),Ee.toString();var Se,Oe=de.isObject(Ee),De=Ce&&Ce["Content-Type"];if((Se=de.isFileList(Ee))||Oe&&De==="multipart/form-data"){var Ue=this.env&&this.env.FormData;return j(Se?{"files[]":Ee}:Ee,Ue&&new Ue)}return Oe||De==="application/json"?(ce(Ce,"application/json"),function($e,Fe,Xe){if(de.isString($e))try{return(Fe||JSON.parse)($e),de.trim($e)}catch(Ye){if(Ye.name!=="SyntaxError")throw Ye}return(Xe||JSON.stringify)($e)}(Ee)):Ee}],transformResponse:[function(Ee){var Ce=this.transitional||xe.transitional,Se=Ce&&Ce.silentJSONParsing,Oe=Ce&&Ce.forcedJSONParsing,De=!Se&&this.responseType==="json";if(De||Oe&&de.isString(Ee)&&Ee.length)try{return JSON.parse(Ee)}catch(Ue){if(De)throw Ue.name==="SyntaxError"?ne.from(Ue,ne.ERR_BAD_RESPONSE,this,null,this.response):Ue}return Ee}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V(1623)},validateStatus:function(Ee){return Ee>=200&&Ee<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};de.forEach(["delete","get","head"],function(Ee){xe.headers[Ee]={}}),de.forEach(["post","put","patch"],function(Ee){xe.headers[Ee]=de.merge(be)}),q.exports=xe},7874:function(q){q.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:function(q){q.exports={version:"0.27.2"}},1849:function(q){q.exports=function(Q,V){return function(){for(var de=new Array(arguments.length),he=0;he<de.length;he++)de[he]=arguments[he];return Q.apply(V,de)}}},5327:function(q,Q,V){var de=V(4867);function he(ne){return encodeURIComponent(ne).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}q.exports=function(ne,Te,j){if(!Te)return ne;var be;if(j)be=j(Te);else if(de.isURLSearchParams(Te))be=Te.toString();else{var ce=[];de.forEach(Te,function(xe,Ee){xe!=null&&(de.isArray(xe)?Ee+="[]":xe=[xe],de.forEach(xe,function(Ce){de.isDate(Ce)?Ce=Ce.toISOString():de.isObject(Ce)&&(Ce=JSON.stringify(Ce)),ce.push(he(Ee)+"="+he(Ce))}))}),be=ce.join("&")}if(be){var ye=ne.indexOf("#");ye!==-1&&(ne=ne.slice(0,ye)),ne+=(ne.indexOf("?")===-1?"?":"&")+be}return ne}},7303:function(q){q.exports=function(Q,V){return V?Q.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):Q}},4372:function(q,Q,V){var de=V(4867);q.exports=de.isStandardBrowserEnv()?{write:function(he,ne,Te,j,be,ce){var ye=[];ye.push(he+"="+encodeURIComponent(ne)),de.isNumber(Te)&&ye.push("expires="+new Date(Te).toGMTString()),de.isString(j)&&ye.push("path="+j),de.isString(be)&&ye.push("domain="+be),ce===!0&&ye.push("secure"),document.cookie=ye.join("; ")},read:function(he){var ne=document.cookie.match(new RegExp("(^|;\\s*)("+he+")=([^;]*)"));return ne?decodeURIComponent(ne[3]):null},remove:function(he){this.write(he,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(q){q.exports=function(Q){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Q)}},6268:function(q,Q,V){var de=V(4867);q.exports=function(he){return de.isObject(he)&&he.isAxiosError===!0}},7985:function(q,Q,V){var de=V(4867);q.exports=de.isStandardBrowserEnv()?function(){var he,ne=/(msie|trident)/i.test(navigator.userAgent),Te=document.createElement("a");function j(be){var ce=be;return ne&&(Te.setAttribute("href",ce),ce=Te.href),Te.setAttribute("href",ce),{href:Te.href,protocol:Te.protocol?Te.protocol.replace(/:$/,""):"",host:Te.host,search:Te.search?Te.search.replace(/^\?/,""):"",hash:Te.hash?Te.hash.replace(/^#/,""):"",hostname:Te.hostname,port:Te.port,pathname:Te.pathname.charAt(0)==="/"?Te.pathname:"/"+Te.pathname}}return he=j(window.location.href),function(be){var ce=de.isString(be)?j(be):be;return ce.protocol===he.protocol&&ce.host===he.host}}():function(){return!0}},6016:function(q,Q,V){var de=V(4867);q.exports=function(he,ne){de.forEach(he,function(Te,j){j!==ne&&j.toUpperCase()===ne.toUpperCase()&&(he[ne]=Te,delete he[j])})}},1623:function(q){q.exports=null},4109:function(q,Q,V){var de=V(4867),he=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];q.exports=function(ne){var Te,j,be,ce={};return ne&&de.forEach(ne.split(`
`),function(ye){if(be=ye.indexOf(":"),Te=de.trim(ye.substr(0,be)).toLowerCase(),j=de.trim(ye.substr(be+1)),Te){if(ce[Te]&&he.indexOf(Te)>=0)return;ce[Te]=Te==="set-cookie"?(ce[Te]?ce[Te]:[]).concat([j]):ce[Te]?ce[Te]+", "+j:j}}),ce}},205:function(q){q.exports=function(Q){var V=/^([-+\w]{1,25})(:?\/\/|:)/.exec(Q);return V&&V[1]||""}},8713:function(q){q.exports=function(Q){return function(V){return Q.apply(null,V)}}},7675:function(q,Q,V){var de=V(4867);q.exports=function(he,ne){ne=ne||new FormData;var Te=[];function j(be){return be===null?"":de.isDate(be)?be.toISOString():de.isArrayBuffer(be)||de.isTypedArray(be)?typeof Blob=="function"?new Blob([be]):Buffer.from(be):be}return function be(ce,ye){if(de.isPlainObject(ce)||de.isArray(ce)){if(Te.indexOf(ce)!==-1)throw Error("Circular reference detected in "+ye);Te.push(ce),de.forEach(ce,function(xe,Ee){if(!de.isUndefined(xe)){var Ce,Se=ye?ye+"."+Ee:Ee;if(xe&&!ye&&typeof xe=="object"){if(de.endsWith(Ee,"{}"))xe=JSON.stringify(xe);else if(de.endsWith(Ee,"[]")&&(Ce=de.toArray(xe)))return void Ce.forEach(function(Oe){!de.isUndefined(Oe)&&ne.append(Se,j(Oe))})}be(xe,Se)}}),Te.pop()}else ne.append(ye,j(ce))}(he),ne}},4875:function(q,Q,V){var de=V(7288).version,he=V(2648),ne={};["object","boolean","number","function","string","symbol"].forEach(function(j,be){ne[j]=function(ce){return typeof ce===j||"a"+(be<1?"n ":" ")+j}});var Te={};ne.transitional=function(j,be,ce){function ye(xe,Ee){return"[Axios v"+de+"] Transitional option '"+xe+"'"+Ee+(ce?". "+ce:"")}return function(xe,Ee,Ce){if(j===!1)throw new he(ye(Ee," has been removed"+(be?" in "+be:"")),he.ERR_DEPRECATED);return be&&!Te[Ee]&&(Te[Ee]=!0,console.warn(ye(Ee," has been deprecated since v"+be+" and will be removed in the near future"))),!j||j(xe,Ee,Ce)}},q.exports={assertOptions:function(j,be,ce){if(typeof j!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);for(var ye=Object.keys(j),xe=ye.length;xe-- >0;){var Ee=ye[xe],Ce=be[Ee];if(Ce){var Se=j[Ee],Oe=Se===void 0||Ce(Se,Ee,j);if(Oe!==!0)throw new he("option "+Ee+" must be "+Oe,he.ERR_BAD_OPTION_VALUE)}else if(ce!==!0)throw new he("Unknown option "+Ee,he.ERR_BAD_OPTION)}},validators:ne}},4867:function(q,Q,V){var de,he=V(1849),ne=Object.prototype.toString,Te=(de=Object.create(null),function(He){var Je=ne.call(He);return de[Je]||(de[Je]=Je.slice(8,-1).toLowerCase())});function j(He){return He=He.toLowerCase(),function(Je){return Te(Je)===He}}function be(He){return Array.isArray(He)}function ce(He){return He===void 0}var ye=j("ArrayBuffer");function xe(He){return He!==null&&typeof He=="object"}function Ee(He){if(Te(He)!=="object")return!1;var Je=Object.getPrototypeOf(He);return Je===null||Je===Object.prototype}var Ce=j("Date"),Se=j("File"),Oe=j("Blob"),De=j("FileList");function Ue(He){return ne.call(He)==="[object Function]"}var $e=j("URLSearchParams");function Fe(He,Je){if(He!=null)if(typeof He!="object"&&(He=[He]),be(He))for(var pt=0,It=He.length;pt<It;pt++)Je.call(null,He[pt],pt,He);else for(var At in He)Object.prototype.hasOwnProperty.call(He,At)&&Je.call(null,He[At],At,He)}var Xe,Ye=(Xe=typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array),function(He){return Xe&&He instanceof Xe});q.exports={isArray:be,isArrayBuffer:ye,isBuffer:function(He){return He!==null&&!ce(He)&&He.constructor!==null&&!ce(He.constructor)&&typeof He.constructor.isBuffer=="function"&&He.constructor.isBuffer(He)},isFormData:function(He){var Je="[object FormData]";return He&&(typeof FormData=="function"&&He instanceof FormData||ne.call(He)===Je||Ue(He.toString)&&He.toString()===Je)},isArrayBufferView:function(He){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(He):He&&He.buffer&&ye(He.buffer)},isString:function(He){return typeof He=="string"},isNumber:function(He){return typeof He=="number"},isObject:xe,isPlainObject:Ee,isUndefined:ce,isDate:Ce,isFile:Se,isBlob:Oe,isFunction:Ue,isStream:function(He){return xe(He)&&Ue(He.pipe)},isURLSearchParams:$e,isStandardBrowserEnv:function(){return(typeof navigator=="undefined"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window!="undefined"&&typeof document!="undefined"},forEach:Fe,merge:function He(){var Je={};function pt(bt,rt){Ee(Je[rt])&&Ee(bt)?Je[rt]=He(Je[rt],bt):Ee(bt)?Je[rt]=He({},bt):be(bt)?Je[rt]=bt.slice():Je[rt]=bt}for(var It=0,At=arguments.length;It<At;It++)Fe(arguments[It],pt);return Je},extend:function(He,Je,pt){return Fe(Je,function(It,At){He[At]=pt&&typeof It=="function"?he(It,pt):It}),He},trim:function(He){return He.trim?He.trim():He.replace(/^\s+|\s+$/g,"")},stripBOM:function(He){return He.charCodeAt(0)===65279&&(He=He.slice(1)),He},inherits:function(He,Je,pt,It){He.prototype=Object.create(Je.prototype,It),He.prototype.constructor=He,pt&&Object.assign(He.prototype,pt)},toFlatObject:function(He,Je,pt){var It,At,bt,rt={};Je=Je||{};do{for(At=(It=Object.getOwnPropertyNames(He)).length;At-- >0;)rt[bt=It[At]]||(Je[bt]=He[bt],rt[bt]=!0);He=Object.getPrototypeOf(He)}while(He&&(!pt||pt(He,Je))&&He!==Object.prototype);return Je},kindOf:Te,kindOfTest:j,endsWith:function(He,Je,pt){He=String(He),(pt===void 0||pt>He.length)&&(pt=He.length),pt-=Je.length;var It=He.indexOf(Je,pt);return It!==-1&&It===pt},toArray:function(He){if(!He)return null;var Je=He.length;if(ce(Je))return null;for(var pt=new Array(Je);Je-- >0;)pt[Je]=He[Je];return pt},isTypedArray:Ye,isFileList:De}},2895:function(q,Q,V){V.d(Q,{default:function(){return vh}});var de={};function he(at,St){if(!(at instanceof St))throw new TypeError("Cannot call a class as a function")}function ne(at,St){for(var vt=0;vt<St.length;vt++){var Ge=St[vt];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(at,Ge.key,Ge)}}function Te(at,St,vt){return St&&ne(at.prototype,St),vt&&ne(at,vt),Object.defineProperty(at,"prototype",{writable:!1}),at}function j(at,St){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(vt,Ge){return vt.__proto__=Ge,vt},j(at,St)}function be(at,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");at.prototype=Object.create(St&&St.prototype,{constructor:{value:at,writable:!0,configurable:!0}}),Object.defineProperty(at,"prototype",{writable:!1}),St&&j(at,St)}function ce(at){return ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St},ce(at)}function ye(at){if(at===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return at}function xe(at,St){if(St&&(ce(St)==="object"||typeof St=="function"))return St;if(St!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ye(at)}function Ee(at){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(St){return St.__proto__||Object.getPrototypeOf(St)},Ee(at)}V.r(de),V.d(de,{$:function(){return De()},$attr:function(){return $e()},$class:function(){return Xe()},$css:function(){return He()},$data:function(){return pt()},$event:function(){return At()},$insert:function(){return rt()},$offset:function(){return it()},$property:function(){return lt()},$remove:function(){return xt()},$safeEls:function(){return Vt()},$show:function(){return $t()},Class:function(){return Mn()},Emitter:function(){return an()},Enum:function(){return Rt()},LocalStore:function(){return hn()},Logger:function(){return Pn()},MediaQuery:function(){return Dt()},MutationObserver:function(){return bn()},Select:function(){return zn()},SingleEmitter:function(){return xn()},Stack:function(){return Sn()},Store:function(){return nr()},Url:function(){return Yn()},ajax:function(){return un()},allKeys:function(){return Rn()},before:function(){return mr()},camelCase:function(){return Lr()},castPath:function(){return Br()},clamp:function(){return Gr()},clone:function(){return Ri()},cloneDeep:function(){return Ti()},concat:function(){return No()},contain:function(){return xi()},copy:function(){return Bt()},create:function(){return _t()},createAssigner:function(){return Ut()},dateFormat:function(){return fn()},debounce:function(){return nn()},defaults:function(){return jn()},defineProp:function(){return Hn()},delegate:function(){return wr()},detectBrowser:function(){return Er()},detectOs:function(){return ei()},difference:function(){return ni()},each:function(){return gn()},endWith:function(){return ki()},escape:function(){return Ta()},escapeJsStr:function(){return dl()},escapeRegExp:function(){return ua()},extend:function(){return Or()},extendOwn:function(){return Oo()},extractUrls:function(){return Pr()},filter:function(){return ha()},flatten:function(){return _o()},freeze:function(){return Qc()},getProto:function(){return pl()},has:function(){return ic()},highlight:function(){return Xi()},identity:function(){return oc()},idxOf:function(){return ao()},inherits:function(){return ac()},isArgs:function(){return Oi()},isArr:function(){return Is()},isArrLike:function(){return Ui()},isBool:function(){return Os()},isBrowser:function(){return Rs()},isBuffer:function(){return Qu()},isDarkMode:function(){return ka()},isDate:function(){return Jc()},isEl:function(){return lo()},isEmpty:function(){return Do()},isErr:function(){return ml()},isFn:function(){return Ds()},isHidden:function(){return zs()},isMatch:function(){return th()},isMiniProgram:function(){return nh()},isMobile:function(){return Sa()},isNaN:function(){return yl()},isNil:function(){return Ya()},isNull:function(){return jo()},isNum:function(){return Uo()},isObj:function(){return $s()},isPrimitive:function(){return Ia()},isPromise:function(){return Al()},isRegExp:function(){return dc()},isSorted:function(){return Ka()},isStr:function(){return zo()},isUndef:function(){return wl()},kebabCase:function(){return Qa()},keys:function(){return Jo()},last:function(){return Bs()},linkify:function(){return Tl()},loadJs:function(){return kl()},lowerCase:function(){return Vo()},lpad:function(){return iu()},ltrim:function(){return Cl()},map:function(){return Ma()},mapObj:function(){return _c()},matcher:function(){return mc()},memStorage:function(){return gc()},memoize:function(){return Sl()},mergeArr:function(){return Il()},meta:function(){return Ml()},ms:function(){return Ns()},nextTick:function(){return es()},noop:function(){return Pa()},now:function(){return uu()},objToStr:function(){return Pl()},once:function(){return du()},optimizeCb:function(){return xc()},orientation:function(){return js()},partial:function(){return Ol()},perfNow:function(){return Us()},pick:function(){return Oa()},prefix:function(){return _u()},property:function(){return Jr()},query:function(){return mu()},raf:function(){return qs()},repeat:function(){return ga()},restArgs:function(){return ns()},reverse:function(){return Rl()},root:function(){return Tc()},rtrim:function(){return kc()},safeCb:function(){return os()},safeGet:function(){return co()},safeSet:function(){return Sc()},sameOrigin:function(){return bo()},slice:function(){return Zs()},some:function(){return Ys()},sortKeys:function(){return Dl()},splitCase:function(){return uh()},startWith:function(){return as()},stringify:function(){return Mc()},stringifyAll:function(){return Qs()},throttle:function(){return Ra()},toArr:function(){return Js()},toInt:function(){return xu()},toNum:function(){return ss()},toSrc:function(){return bu()},toStr:function(){return ls()},trim:function(){return na()},type:function(){return dh()},types:function(){return Fl()},uncaught:function(){return Ao()},uniqId:function(){return Da()},unique:function(){return ra()},upperFirst:function(){return cs()},values:function(){return us()},viewportScale:function(){return Oc()},wrap:function(){return Cu()},xpath:function(){return Iu()}});var Ce=V(8384),Se=V.n(Ce),Oe=V(1512),De=V.n(Oe),Ue=V(4991),$e=V.n(Ue),Fe=V(7781),Xe=V.n(Fe),Ye=V(975),He=V.n(Ye),Je=V(8381),pt=V.n(Je),It=V(5543),At=V.n(It),bt=V(8908),rt=V.n(bt),nt=V(6906),it=V.n(nt),dt=V(4209),lt=V.n(dt),ft=V(6757),xt=V.n(ft),ht=V(2341),Vt=V.n(ht),st=V(7665),$t=V.n(st),ln=V(7496),Mn=V.n(ln),on=V(1443),an=V.n(on),Xt=V(9640),Rt=V.n(Xt),en=V(125),hn=V.n(en),vn=V(4989),Pn=V.n(vn),Pt=V(2765),Dt=V.n(Pt),rn=V(2289),bn=V.n(rn),En=V(3244),zn=V.n(En),$n=V(8985),xn=V.n($n),wn=V(9001),Sn=V.n(wn),Jn=V(5128),nr=V.n(Jn),fr=V(6334),Yn=V.n(fr),qn=V(8991),un=V.n(qn),yn=V(1116),Rn=V.n(yn),Kn=V(5637),mr=V.n(Kn),Cr=V(7494),Lr=V.n(Cr),br=V(1694),Br=V.n(br),Fr=V(9882),Gr=V.n(Fr),Ur=V(4675),Ri=V.n(Ur),Li=V(550),Ti=V.n(Li),Sr=V(8099),No=V.n(Sr),Ea=V(6341),xi=V.n(Ea),la=V(2327),Bt=V.n(la),ct=V(1662),_t=V.n(ct),Lt=V(4427),Ut=V.n(Lt),tn=V(4407),fn=V.n(tn),dn=V(6049),nn=V.n(dn),_n=V(4193),jn=V.n(_n),sr=V(9803),Hn=V.n(sr),Ar=V(2443),wr=V.n(Ar),gr=V(4541),Er=V.n(gr),$r=V(6954),ei=V.n($r),ai=V(801),ni=V.n(ai),xr=V(3783),gn=V.n(xr),fo=V(4858),ki=V.n(fo),ca=V(8901),Ta=V.n(ca),Po=V(4187),dl=V.n(Po),Ku=V(2337),ua=V.n(Ku),lr=V(6329),Or=V.n(lr),Nr=V(3021),Oo=V.n(Nr),Ro=V(2581),Pr=V.n(Ro),Ts=V(5972),ha=V.n(Ts),ks=V(288),_o=V.n(ks),bi=V(4454),Qc=V.n(bi),Xa=V(415),pl=V.n(Xa),da=V(6257),ic=V.n(da),pa=V(3651),Xi=V.n(pa),ii=V(6362),oc=V.n(ii),Cs=V(496),ao=V.n(Cs),so=V(5022),ac=V.n(so),fa=V(7403),Oi=V.n(fa),Ss=V(6472),Is=V.n(Ss),Ms=V(1369),Ui=V.n(Ms),Ps=V(4696),Os=V.n(Ps),vo=V(2727),Rs=V.n(vo),fl=V(2349),Qu=V.n(fl),sc=V(2520),ka=V.n(sc),Ju=V(2106),Jc=V.n(Ju),Ca=V(9833),lo=V.n(Ca),_l=V(8887),Do=V.n(_l),lc=V(2749),ml=V.n(lc),eh=V(4777),Ds=V.n(eh),gl=V(9585),zs=V.n(gl),eu=V(7949),th=V.n(eu),tu=V(9537),nh=V.n(tu),xo=V(9956),Sa=V.n(xo),cc=V(9433),yl=V.n(cc),uc=V(2763),Ya=V.n(uc),vl=V(6156),jo=V.n(vl),_a=V(3990),Uo=V.n(_a),xl=V(5166),$s=V.n(xl),bl=V(6997),Ia=V.n(bl),Kr=V(4321),Al=V.n(Kr),hc=V(1754),dc=V.n(hc),Wr=V(3843),Ka=V.n(Wr),Ls=V(6768),zo=V.n(Ls),pc=V(1286),wl=V.n(pc),ma=V(7622),Qa=V.n(ma),rh=V(2533),Jo=V.n(rh),El=V(9702),Bs=V.n(El),fc=V(3988),Tl=V.n(fc),nu=V(9622),kl=V.n(nu),ru=V(3063),Vo=V.n(ru),Ja=V(5351),iu=V.n(Ja),Fs=V(7767),Cl=V.n(Fs),Go=V(2461),Ma=V.n(Go),ou=V(8820),_c=V.n(ou),au=V(4491),mc=V.n(au),su=V(5026),gc=V.n(su),ih=V(1475),Sl=V.n(ih),oh=V(9971),Il=V.n(oh),lu=V(8573),Ml=V.n(lu),ah=V(4677),Ns=V.n(ah),cu=V(6837),es=V.n(cu),yc=V(1214),Pa=V.n(yc),sh=V(8847),uu=V.n(sh),lh=V(106),Pl=V.n(lh),hu=V(8763),du=V.n(hu),vc=V(3955),xc=V.n(vc),pu=V(442),js=V.n(pu),bc=V(4198),Ol=V.n(bc),ea=V(1194),Us=V.n(ea),fu=V(3487),Oa=V.n(fu),ts=V(747),_u=V.n(ts),Ac=V(2994),Jr=V.n(Ac),Vs=V(1745),mu=V.n(Vs),Gs=V(1571),qs=V.n(Gs),ch=V(4552),ga=V.n(ch),wc=V(1137),ns=V.n(wc),Ec=V(1527),Rl=V.n(Ec),rs=V(5610),Tc=V.n(rs),Hs=V(3597),kc=V.n(Hs),is=V(2838),os=V.n(is),cr=V(7653),co=V.n(cr),Cc=V(8079),Sc=V.n(Cc),Ws=V(4224),bo=V.n(Ws),Ic=V(9677),Zs=V.n(Ic),Xs=V(6053),Ys=V.n(Xs),gu=V(3629),Dl=V.n(gu),ta=V(8935),uh=V.n(ta),hh=V(6930),as=V.n(hh),zl=V(4400),Mc=V.n(zl),Ks=V(9963),Qs=V.n(Ks),Yi=V(2439),Ra=V.n(Yi),yu=V(1352),Js=V.n(yu),vu=V(9296),xu=V.n(vu),$l=V(3875),ss=V.n($l),Ll=V(300),bu=V.n(Ll),Au=V(3367),ls=V.n(Au),wu=V(4331),na=V.n(wu),qi=V(3085),dh=V.n(qi),Bl=V(9016),Fl=V.n(Bl),Eu=V(5484),Ao=V.n(Eu),Pc=V(5229),Da=V.n(Pc),wo=V(42),ra=V.n(wo),ur=V(3023),cs=V.n(ur),Tu=V(2578),us=V.n(Tu),el=V(3514),Oc=V.n(el),ku=V(5491),Cu=V.n(ku),Su=V(8933),Iu=V.n(Su),tl=new(an());tl.ADD="ADD",tl.SHOW="SHOW",tl.SCALE="SCALE";var si=tl;function Nl(at,St){for(;!Object.prototype.hasOwnProperty.call(at,St)&&(at=Ee(at))!==null;);return at}function fi(){return fi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(at,St,vt){var Ge=Nl(at,St);if(Ge){var et=Object.getOwnPropertyDescriptor(Ge,St);return et.get?et.get.call(arguments.length<3?at:vt):et.value}},fi.apply(this,arguments)}var Hi=Mn()({init:function(at){this._$el=at},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),Rc=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Dc=Rc.length;function zc(at){for(var St={},vt=0;vt<Dc;vt++)St[Rc[vt]]=at[vt];return St}function mo(at){return Is()(at)&&(at=zc(at)),at.darkerBackground||(at.darkerBackground=at.contrast),Or()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},at)}function ya(at){return Is()(at)&&(at=zc(at)),at.darkerBackground||(at.darkerBackground=at.contrast),Or()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},at)}var $c=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],va={Light:ya({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:mo({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":mo(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":mo(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":ya(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":mo(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":mo(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":mo(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:mo(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":mo(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":mo(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":ya(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":mo(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":ya(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:ya(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":mo(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":ya(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},nl=V(2234),jl=V.n(nl),ia=[],Lc=1,Ul=va.Light,$o=function at(St,vt){St=ls()(St);for(var Ge=0,et=ia.length;Ge<et;Ge++)if(ia[Ge].css===St)return;vt=vt||at.container||document.head;var yt=document.createElement("style");yt.type="text/css",vt.appendChild(yt);var jt={css:St,el:yt,container:vt};return Vl(jt),ia.push(jt),jt};function Bc(){gn()(ia,function(at){return Vl(at)})}function Vl(at){var St=at.css,vt=at.el;St=(St=St.replace(/(\d+)px/g,function(et,yt){return+yt*Lc+"px"})).replace(/_/g,"eruda-"),gn()(jl(),function(et,yt){St=St.replace(new RegExp(ua()("$".concat(et,":")),"g"),yt+":")});var Ge=Jo()(va.Light);gn()(Ge,function(et){St=St.replace(new RegExp("var\\(--".concat(Qa()(et),"\\)"),"g"),Ul[et])}),vt.innerText=St}$o.setScale=function(at){Lc=at,Bc()},$o.setTheme=function(at){Ul=zo()(at)?va[at]||va.Light:jn()(at,va.Light),Bc()},$o.getCurTheme=function(){return Ul},$o.getThemes=function(){return va},$o.clear=function(){gn()(ia,function(at){var St=at.container,vt=at.el;return St.removeChild(vt)}),ia=[]},$o.remove=function(at){ia=ha()(ia,function(St){return St!==at}),at.container.removeChild(at.el)};var Hr=$o;function Fc(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Gl,rl,Nc,jc,il,hs,_e=function(at){be(vt,at);var St=Fc(vt);function vt(){var Ge;return he(this,vt),(Ge=St.call(this))._style=Hr(V(6836)),Ge.name="settings",Ge._switchTpl=V(7006),Ge._selectTpl=V(1868),Ge._rangeTpl=V(480),Ge._colorTpl=V(6652),Ge._settings=[],Ge}return Te(vt,[{key:"init",value:function(Ge){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._bindEvent()}},{key:"remove",value:function(Ge,et){var yt=this;return zo()(Ge)?this._$el.find(".eruda-text").each(function(){var jt=De()(this);jt.text()===Ge&&jt.remove()}):this._settings=ha()(this._settings,function(jt){return jt.config!==Ge||jt.key!==et||(yt._$el.find("#"+jt.id).remove(),!1)}),this._cleanSeparator(),this}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._$el.html("")}},{key:"switch",value:function(Ge,et,yt){var jt=this._genId("settings");return this._settings.push({config:Ge,key:et,id:jt}),this._$el.append(this._switchTpl({desc:yt,key:et,id:jt,val:Ge.get(et)})),this}},{key:"color",value:function(Ge,et,yt){var jt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["#2196f3","#707d8b","#f44336","#009688","#ffc107"],cn=this._genId("settings");return this._settings.push({config:Ge,key:et,id:cn}),this._$el.append(this._colorTpl({desc:yt,colors:jt,id:cn,val:Ge.get(et)})),this}},{key:"select",value:function(Ge,et,yt,jt){var cn=this._genId("settings");return this._settings.push({config:Ge,key:et,id:cn}),this._$el.append(this._selectTpl({desc:yt,selections:jt,id:cn,val:Ge.get(et)})),this}},{key:"range",value:function(Ge,et,yt,jt){var cn=jt.min,In=cn===void 0?0:cn,Un=jt.max,hr=Un===void 0?1:Un,ir=jt.step,Ii=ir===void 0?.1:ir,Fi=this._genId("settings");this._settings.push({config:Ge,key:et,min:In,max:hr,step:Ii,id:Fi});var ko=Ge.get(et);return this._$el.append(this._rangeTpl({desc:yt,min:In,max:hr,step:Ii,val:ko,progress:U(ko,In,hr),id:Fi})),this}},{key:"separator",value:function(){return this._$el.append('<div class="eruda-separator"></div>'),this}},{key:"text",value:function(Ge){return this._$el.append('<div class="eruda-text">'.concat(Ge,"</div>")),this}},{key:"_cleanSeparator",value:function(){var Ge=Ri()(this._$el.get(0).children);function et(cn){return cn.getAttribute("class")==="eruda-separator"}for(var yt=0,jt=Ge.length;yt<jt-1;yt++)et(Ge[yt])&&et(Ge[yt+1])&&De()(Ge[yt]).remove()}},{key:"_genId",value:function(){return Da()("eruda-settings")}},{key:"_closeAll",value:function(){this._$el.find(".eruda-open").rmClass("eruda-open")}},{key:"_getSetting",value:function(Ge){var et;return gn()(this._settings,function(yt){yt.id===Ge&&(et=yt)}),et}},{key:"_bindEvent",value:function(){var Ge=this;this._$el.on("click",".eruda-checkbox",function(){var et=De()(this).find("input"),yt=et.data("id"),jt=et.get(0).checked,cn=Ge._getSetting(yt);cn.config.set(cn.key,jt)}).on("click",".eruda-select .eruda-head",function(){var et=De()(this).parent().find("ul"),yt=et.hasClass("eruda-open");Ge._closeAll(),yt?et.rmClass("eruda-open"):et.addClass("eruda-open")}).on("click",".eruda-select li",function(){var et=De()(this),yt=et.parent(),jt=et.text(),cn=yt.data("id"),In=Ge._getSetting(cn);yt.rmClass("eruda-open"),yt.parent().find(".eruda-head span").text(jt),In.config.set(In.key,jt)}).on("click",".eruda-range .eruda-head",function(){var et=De()(this).parent().find(".eruda-input-container"),yt=et.hasClass("eruda-open");Ge._closeAll(),yt?et.rmClass("eruda-open"):et.addClass("eruda-open")}).on("change",".eruda-range input",function(){var et=De()(this),yt=et.parent().data("id"),jt=+et.val(),cn=Ge._getSetting(yt);cn.config.set(cn.key,jt)}).on("input",".eruda-range input",function(){var et=De()(this),yt=et.parent(),jt=yt.data("id"),cn=+et.val(),In=Ge._getSetting(jt),Un=In.min,hr=In.max;yt.parent().find(".eruda-head span").text(cn),yt.find(".eruda-range-track-progress").css("width",U(cn,Un,hr)+"%")}).on("click",".eruda-color .eruda-head",function(){var et=De()(this).parent().find("ul"),yt=et.hasClass("eruda-open");Ge._closeAll(),yt?et.rmClass("eruda-open"):et.addClass("eruda-open")}).on("click",".eruda-color li",function(){var et=De()(this),yt=et.parent(),jt=et.css("background-color"),cn=yt.data("id"),In=Ge._getSetting(cn);yt.rmClass("eruda-open"),yt.parent().find(".eruda-head span").css("background-color",jt),In.config.set(In.key,jt)})}}],[{key:"createCfg",value:function(Ge,et){return new(hn())("eruda-"+Ge,et)}}]),vt}(Hi),U=function(at,St,vt){return((at-St)/(vt-St)*100).toFixed(2)},te=(typeof window=="undefined"?"undefined":ce(window))==="object"&&(typeof document=="undefined"?"undefined":ce(document))==="object"&&document.nodeType===9,we=function(at){return at=function(St){var vt=ce(St);return!!St&&(vt==="function"||vt==="object")},at}({}),Pe=function(at){return at==null?"":at.toString()},Re=(Gl=Object.prototype.hasOwnProperty,function(at,St){return Gl.call(at,St)}),Be=Object.keys?Object.keys:function(at){var St=[];for(var vt in at)Re(at,vt)&&St.push(vt);return St},Ne=function(at){at=function(vt){if(!we(vt))return{};if(St)return St(vt);function Ge(){}return Ge.prototype=vt,new Ge};var St=Object.create;return at}({}),qe=function(at){return at=function(St,vt){St.prototype=Ne(vt.prototype)},at}({}),Ke=function(at){return at===void 0},Qe=function(at){return at=function(St,vt,Ge){if(Ke(vt))return St;switch(Ge==null?3:Ge){case 1:return function(et){return St.call(vt,et)};case 3:return function(et,yt,jt){return St.call(vt,et,yt,jt)};case 4:return function(et,yt,jt,cn){return St.call(vt,et,yt,jt,cn)}}return function(){return St.apply(vt,arguments)}},at}({}),ut=function(at){var St=at?at.length:0;if(St)return at[St-1]},gt=function(at){return at},Mt=(rl=Object.prototype.toString,function(at){return rl.call(at)}),kt=function(at){return Mt(at)==="[object Arguments]"},Tt=Array.isArray?Array.isArray:function(at){return Mt(at)==="[object Array]"},Ct=function(at){at=function(Ge,et){if(Tt(Ge))return Ge;if(et&&Re(et,Ge))return[Ge];var yt=[];return Ge.replace(St,function(jt,cn,In,Un){yt.push(In?Un.replace(vt,"$1"):cn||jt)}),yt};var St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vt=/\\(\\)?/g;return at}({}),wt=function(at,St){var vt;for(vt=(St=Ct(St,at)).shift();!Ke(vt);){if((at=at[vt])==null)return;vt=St.shift()}return at},zt=function(at){var St=Mt(at);return St==="[object Function]"||St==="[object GeneratorFunction]"||St==="[object AsyncFunction]"},Ot=(Nc=Object.getPrototypeOf,jc={}.constructor,function(at){if(we(at)){if(Nc)return Nc(at);var St=at.__proto__;return St||St===null?St:zt(at.constructor)?at.constructor.prototype:at instanceof jc?jc.prototype:void 0}}),Qt=typeof wx!="undefined"&&zt(wx.openLocation),Kt=function(at){return Mt(at)==="[object Number]"},Gt=(il=Math.pow(2,53)-1,function(at){if(!at)return!1;var St=at.length;return Kt(St)&&St>=0&&St<=il&&!zt(at)}),Yt=function(at,St,vt){var Ge,et;if(St=Qe(St,vt),Gt(at))for(Ge=0,et=at.length;Ge<et;Ge++)St(at[Ge],Ge,at);else{var yt=Be(at);for(Ge=0,et=yt.length;Ge<et;Ge++)St(at[yt[Ge]],yt[Ge],at)}return at},Wt=function(at){return at=function(St,vt){return function(Ge){return Yt(arguments,function(et,yt){if(yt!==0){var jt=St(et);Yt(jt,function(cn){vt&&!Ke(Ge[cn])||(Ge[cn]=et[cn])})}}),Ge}},at}({}),sn=Wt(Be),mn=function(at){return Mt(at)==="[object String]"},Wn=function(at){return at==null||(Gt(at)&&(Tt(at)||mn(at)||kt(at))?at.length===0:Be(at).length===0)},pn=function(at,St){var vt=Be(St),Ge=vt.length;if(at==null)return!Ge;at=Object(at);for(var et=0;et<Ge;et++){var yt=vt[et];if(St[yt]!==at[yt]||!(yt in at))return!1}return!0},Dn=(hs=/^\s+/,function(at,St){if(St==null)return at.trimLeft?at.trimLeft():at.replace(hs,"");for(var vt,Ge,et=0,yt=at.length,jt=St.length,cn=!0;cn&&et<yt;)for(cn=!1,vt=-1,Ge=at.charAt(et);++vt<jt;)if(Ge===St[vt]){cn=!0,et++;break}return et>=yt?"":at.substr(et,yt)}),Nn=function(at){return at=sn({},at),function(St){return pn(St,at)}},er=function(at){at={getItem:function(jt){return(vt[jt]?St[jt]:this[jt])||null},setItem:function(jt,cn){vt[jt]?St[jt]=cn:this[jt]=cn},removeItem:function(jt){vt[jt]?delete St[jt]:delete this[jt]},key:function(jt){var cn=Ge();return jt>=0&&jt<cn.length?cn[jt]:null},clear:function(){for(var jt,cn=et(),In=0;jt=cn[In];In++)delete this[jt];cn=yt();for(var Un,hr=0;Un=cn[hr];hr++)delete St[Un]}},Object.defineProperty(at,"length",{enumerable:!1,configurable:!0,get:function(){return Ge().length}});var St={},vt={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Ge(){return et().concat(yt())}function et(){return Be(at).filter(function(jt){return!vt[jt]})}function yt(){return Be(St)}return at}({}),kn=function(at){return Tt(at)?function(vt){return wt(vt,at)}:(St=at,function(vt){return vt==null?void 0:vt[St]});var St},Zn=function(at,St,vt){return at==null?gt:zt(at)?Qe(at,St,vt):we(at)&&!Tt(at)?Nn(at):kn(at)},Ln=function(at,St,vt){var Ge=[];return St=Zn(St,vt),Yt(at,function(et,yt,jt){St(et,yt,jt)&&Ge.push(et)}),Ge},or=function(at){function St(vt,Ge){return vt===Ge}return function(vt,Ge){return Ge=Ge||St,Ln(vt,function(et,yt,jt){for(var cn=jt.length;++yt<cn;)if(Ge(et,jt[yt]))return!1;return!0})}}(),tr=function(at){var St=Object.getOwnPropertyNames,vt=Object.getOwnPropertySymbols;return at=function(Ge){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt=et.prototype,jt=yt===void 0||yt,cn=et.unenumerable,In=cn!==void 0&&cn,Un=et.symbol,hr=Un!==void 0&&Un,ir=[];if((In||hr)&&St){var Ii=Be;In&&St&&(Ii=St);do ir=ir.concat(Ii(Ge)),hr&&vt&&(ir=ir.concat(vt(Ge)));while(jt&&(Ge=Ot(Ge))&&Ge!==Object.prototype);ir=or(ir)}else if(jt)for(var Fi in Ge)ir.push(Fi);else ir=Be(Ge);return ir},at}({}),pr=Wt(tr),yr=function(at,St,vt){St=Zn(St,vt);for(var Ge=!Gt(at)&&Be(at),et=(Ge||at).length,yt=Array(et),jt=0;jt<et;jt++){var cn=Ge?Ge[jt]:jt;yt[jt]=St(at[cn],cn,at)}return yt},Tr=function(at){return at?Tt(at)?at:Gt(at)&&!mn(at)?yr(at):[at]:[]},Vr=function(at){var St=(at=function(vt,Ge){return St.extend(vt,Ge)}).Base=function vt(Ge,et,yt){yt=yt||{};var jt=et.className||wt(et,"initialize.name")||"";delete et.className;var cn=function(){var In=Tr(arguments);return this.initialize&&this.initialize.apply(this,In)||this};if(!Qt)try{cn=new Function("toArr","return function "+jt+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(Tr)}catch{}return qe(cn,Ge),cn.prototype.constructor=cn,cn.extend=function(In,Un){return vt(cn,In,Un)},cn.inherits=function(In){qe(cn,In)},cn.methods=function(In){return pr(cn.prototype,In),cn},cn.statics=function(In){return pr(cn,In),cn},cn.methods(et).statics(yt),cn}(Object,{className:"Base",callSuper:function(vt,Ge,et){return vt.prototype[Ge].apply(this,et)},toString:function(){return this.constructor.name}});return at}({}),_r=function(at){if(Kt(at))return at;if(we(at)){var St=zt(at.valueOf)?at.valueOf():at;at=we(St)?St+"":St}return mn(at)?+at:at===0?at:+at},Ir=function(at){return _r(at.replace("px",""))},Zr=function(at,St){if(St==null){if(at.trimRight)return at.trimRight();St=` \r
	\f\v`}for(var vt,Ge,et=at.length-1,yt=St.length,jt=!0;jt&&et>=0;)for(jt=!1,vt=-1,Ge=at.charAt(et);++vt<yt;)if(Ge===St[vt]){jt=!0,et--;break}return et>=0?at.substring(0,et+1):""},ci=function(at,St){return St==null&&at.trim?at.trim():Dn(Zr(at,St),St)},Ai=function(at){at={parse:function(vt){var Ge={};return vt=ci(vt).replace(St,""),Yt(vt.split("&"),function(et){var yt=et.split("="),jt=yt.shift(),cn=yt.length>0?yt.join("="):null;jt=decodeURIComponent(jt),cn=decodeURIComponent(cn),Ke(Ge[jt])?Ge[jt]=cn:Tt(Ge[jt])?Ge[jt].push(cn):Ge[jt]=[Ge[jt],cn]}),Ge},stringify:function(vt,Ge){return Ln(yr(vt,function(et,yt){return we(et)&&Wn(et)?"":Tt(et)?at.stringify(et,yt):encodeURIComponent(Ge||yt)+"="+encodeURIComponent(et)}),function(et){return et.length>0}).join("&")}};var St=/^(\?|#|&)/g;return at}({}),oi=function(at){at=Vr({className:"Url",initialize:function(et){!et&&te&&(et=window.location.href),pr(this,at.parse(et||""))},setQuery:function(et,yt){var jt=this.query;return we(et)?Yt(et,function(cn,In){jt[In]=Pe(cn)}):jt[et]=Pe(yt),this},rmQuery:function(et){var yt=this.query;return Tt(et)||(et=Tr(et)),Yt(et,function(jt){delete yt[jt]}),this},toString:function(){return at.stringify(this)}},{parse:function(et){var yt={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},jt=ci(et),cn=!1,In=jt.match(St);if(In&&(In=In[0],yt.protocol=In.toLowerCase(),jt=jt.substr(In.length)),In&&(cn=jt.substr(0,2)==="//")&&(jt=jt.slice(2),yt.slashes=!0),cn){for(var Un=jt,hr=-1,ir=0,Ii=Ge.length;ir<Ii;ir++){var Fi=jt.indexOf(Ge[ir]);Fi!==-1&&(hr===-1||Fi<hr)&&(hr=Fi)}hr>-1&&(Un=jt.slice(0,hr),jt=jt.slice(hr));var ko=Un.lastIndexOf("@");ko!==-1&&(yt.auth=decodeURIComponent(Un.slice(0,ko)),Un=Un.slice(ko+1)),yt.hostname=Un;var Wo=Un.match(vt);Wo&&((Wo=Wo[0])!==":"&&(yt.port=Wo.substr(1)),yt.hostname=Un.substr(0,Un.length-Wo.length))}var li=jt.indexOf("#");li!==-1&&(yt.hash=jt.substr(li),jt=jt.slice(0,li));var wi=jt.indexOf("?");return wi!==-1&&(yt.query=Ai.parse(jt.substr(wi+1)),jt=jt.slice(0,wi)),yt.pathname=jt||"/",yt},stringify:function(et){var yt=et.protocol+(et.slashes?"//":"")+(et.auth?encodeURIComponent(et.auth)+"@":"")+et.hostname+(et.port?":"+et.port:"")+et.pathname;return Wn(et.query)||(yt+="?"+Ai.stringify(et.query)),et.hash&&(yt+=et.hash),yt}});var St=/^([a-z0-9.+-]+:)/i,vt=/:[0-9]*$/,Ge=["/","?","#"];return at}({}),Wi=function(at){var St=ut(at.split("/"));return St.indexOf("?")>-1&&(St=ci(St.split("?")[0])),St===""&&(St=(at=new oi(at)).hostname),St},Eo=function(at){return at=function(St,vt){var Ge;switch(Ke(vt)&&(vt=!0),St){case"local":Ge=window.localStorage;break;case"session":Ge=window.sessionStorage}try{var et="test-localStorage-"+Date.now();Ge.setItem(et,et);var yt=Ge.getItem(et);if(Ge.removeItem(et),yt!==et)throw new Error}catch{return vt?er:void 0}return Ge},at}({});function oa(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var _i=function(at){be(vt,at);var St=oa(vt);function vt(Ge){var et;return he(this,vt),(et=St.call(this))._style=Hr(V(7693)),et._$container=Ge,et._appendTpl(),et._makeDraggable(),et._bindEvent(),et._registerListener(),et}return Te(vt,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(Ge){this._isOutOfRange(Ge)&&(Ge=this._getDefPos()),this._$el.css({left:Ge.x,top:Ge.y}),this.config.set("pos",Ge)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){Hr.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(Ge){Ge=Ge||this.config.get("pos");var et=this._getDefPos();return Ge.x>et.x+10||Ge.x<0||Ge.y<0||Ge.y>et.y+10}},{key:"_registerListener",value:function(){var Ge=this;this._scaleListener=function(){return es()(function(){Ge._isOutOfRange()&&Ge._resetPos()})},si.on(si.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){si.off(si.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ge=this._$container;Ge.append(V(7640)()),this._$el=Ge.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(Ge){var et=this.config,yt=et.get("pos"),jt=this._getDefPos();et.get("rememberPos")&&!Ge||(yt=jt),this.setPos(yt)}},{key:"_bindEvent",value:function(){var Ge=this,et=this._draggabilly,yt=this._$el;et.on("staticClick",function(){return Ge.emit("click")}).on("dragStart",function(){return yt.addClass("eruda-active")}),et.on("dragEnd",function(){var jt=Ge.config;jt.get("rememberPos")&&jt.set("pos",{x:Ir(Ge._$el.css("left")),y:Ir(Ge._$el.css("top"))}),yt.rmClass("eruda-active")}),js().on("change",function(){return Ge._resetPos(!0)}),window.addEventListener("resize",function(){return Ge._resetPos()})}},{key:"_makeDraggable",value:function(){this._draggabilly=new(Se())(this._$el.get(0),{containment:!0})}},{key:"initCfg",value:function(Ge){var et=this.config=_e.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});Ge.separator().switch(et,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var Ge=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-Ge,y:window.innerHeight-Ge}}}]),vt}(an());function vi(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Dr,Di=function(at){be(vt,at);var St=vi(vt);function vt(Ge){var et;return he(this,vt),(et=St.call(this))._style=Hr(V(3409)),et._$el=Ge.find(".eruda-nav-bar"),et._$bottomBar=Ge.find(".eruda-bottom-bar"),et._len=0,et._bindEvent(),et}return Te(vt,[{key:"add",value:function(Ge){var et=this._$el;this._len++;var yt=et.find(".eruda-nav-bar-item").last(),jt='<div class="eruda-nav-bar-item">'.concat(Ge,"</div>");yt.length>0&&yt.text()==="settings"?yt.before(jt):et.append(jt),this.resetBottomBar()}},{key:"remove",value:function(Ge){this._len--,this._$el.find(".eruda-nav-bar-item").each(function(){var et=De()(this);et.text().toLowerCase()===Ge.toLowerCase()&&et.remove()}),this.resetBottomBar()}},{key:"activateTool",value:function(Ge){var et=this;this._$el.find(".eruda-nav-bar-item").each(function(){var yt=De()(this);yt.text()===Ge?(yt.addClass("eruda-active"),et.resetBottomBar(),et._scrollItemToView()):yt.rmClass("eruda-active")})}},{key:"destroy",value:function(){Hr.remove(this._style),this._$el.remove()}},{key:"_scrollItemToView",value:function(){var Ge,et=this._$el,yt=et.find(".eruda-active").get(0),jt=et.get(0),cn=yt.offsetLeft,In=yt.offsetWidth,Un=jt.offsetWidth,hr=jt.scrollLeft;cn<hr?Ge=cn:cn+In>Un+hr&&(Ge=cn+In-Un),Uo()(Ge)&&(jt.scrollLeft=Ge)}},{key:"resetBottomBar",value:function(){var Ge=this._$bottomBar,et=this._$el,yt=et.find(".eruda-active").get(0);yt&&Ge.css({width:yt.offsetWidth,left:yt.offsetLeft-et.get(0).scrollLeft})}},{key:"_bindEvent",value:function(){var Ge=this,et=this;this._$el.on("click",".eruda-nav-bar-item",function(){et.emit("showTool",De()(this).text())}).on("scroll",function(){return Ge.resetBottomBar()})}}]),vt}(an()),zi=Dr=new(Pn())("[Eruda]","warn");Dr.formatter=function(at,St){return St.unshift(this.name),St};var ui=V(6093),Ki=V.n(ui);function za(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var to=function(at){be(vt,at);var St=za(vt);function vt(Ge){var et,yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=yt.defaults,cn=jt===void 0?{}:jt;return he(this,vt),(et=St.call(this))._defCfg=Or()({transparency:1,displaySize:80,theme:ka()()?"Dark":"Light"},cn),et._style=Hr(V(9217)),et.$container=Ge,et._isShow=!1,et._opacity=1,et._tools={},et._isResizing=!1,et._resizeTimer=null,et._resizeStartY=0,et._resizeStartSize=0,et._appendTpl(),et._initNavBar(),et._initNotification(),et._bindEvent(),et}return Te(vt,[{key:"show",value:function(){var Ge=this;return this._isShow=!0,this._$el.show(),this._navBar.resetBottomBar(),setTimeout(function(){Ge._$el.css("opacity",Ge._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var Ge=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return Ge._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(Ge){if(!(Ge instanceof Hi)){var et=new Hi,yt=et.init,jt=et.show,cn=et.hide,In=et.destroy;jn()(Ge,{init:yt,show:jt,hide:cn,destroy:In})}var Un=Ge.name;return Un?(Un=Un.toLowerCase(),this._tools[Un]?zi.warn("Tool ".concat(Un," already exists")):(this._$tools.prepend('<div id="eruda-'.concat(Un,'" class="eruda-').concat(Un,' eruda-tool"></div>')),Ge.init(this._$tools.find(".eruda-".concat(Un,".eruda-tool")),this),Ge.active=!1,this._tools[Un]=Ge,this._navBar.add(Un),this)):zi.error("You must specify a name for a tool")}},{key:"remove",value:function(Ge){var et=this._tools;if(!et[Ge])return zi.warn("Tool ".concat(Ge," doesn't exist"));this._navBar.remove(Ge);var yt=et[Ge];if(delete et[Ge],yt.active){var jt=Jo()(et);jt.length>0&&this.showTool(et[Bs()(jt)].name)}return yt.destroy(),this}},{key:"removeAll",value:function(){var Ge=this;return gn()(this._tools,function(et){return Ge.remove(et.name)}),this}},{key:"get",value:function(Ge){var et=this._tools[Ge];if(et)return et}},{key:"showTool",value:function(Ge){if(this._curTool===Ge)return this;this._curTool=Ge;var et=this._tools,yt=et[Ge];if(yt){var jt={};return gn()(et,function(cn){cn.active&&(jt=cn,cn.active=!1,cn.hide())}),yt.active=!0,yt.show(),this._navBar.activateTool(Ge),this.emit("showTool",Ge,jt),this}}},{key:"initCfg",value:function(Ge){var et=this,yt=this.config=_e.createCfg("dev-tools",this._defCfg);this._setTransparency(yt.get("transparency")),this._setDisplaySize(yt.get("displaySize")),this._setTheme(yt.get("theme")),yt.on("change",function(jt,cn){switch(jt){case"transparency":return et._setTransparency(cn);case"displaySize":return et._setDisplaySize(cn);case"theme":return et._setTheme(cn)}}),Ge.separator().select(yt,"theme","Theme",Jo()(Hr.getThemes())).range(yt,"transparency","Transparency",{min:.2,max:1,step:.01}).range(yt,"displaySize","Display Size",{min:40,max:100,step:1}).separator()}},{key:"notify",value:function(Ge,et){this._notification.notify(Ge,et)}},{key:"destroy",value:function(){Hr.remove(this._style),this.removeAll(),this._navBar.destroy(),this._$el.remove()}},{key:"_setTheme",value:function(Ge){var et=this.$container;(function(yt){return xi()($c,yt)})(Ge)?et.addClass("eruda-dark"):et.rmClass("eruda-dark"),Hr.setTheme(Ge)}},{key:"_setTransparency",value:function(Ge){Uo()(Ge)&&(this._opacity=Ge,this._isShow&&this._$el.css({opacity:Ge}))}},{key:"_setDisplaySize",value:function(Ge){Uo()(Ge)&&this._$el.css({height:Ge+"%"})}},{key:"_appendTpl",value:function(){var Ge=this.$container;Ge.append(V(8269)()),this._$el=Ge.find(".eruda-dev-tools"),this._$tools=this._$el.find(".eruda-tools")}},{key:"_initNavBar",value:function(){var Ge=this;this._navBar=new Di(this._$el.find(".eruda-nav-bar-container")),this._navBar.on("showTool",function(et){return Ge.showTool(et)})}},{key:"_initNotification",value:function(){this._notification=new(Ki())(this._$el.find(".eruda-notification").get(0),{position:{x:"center",y:"top"}})}},{key:"_bindEvent",value:function(){var Ge=this,et=this._$el.find(".eruda-nav-bar"),yt=function(ir){ir=ir.origEvent,Ge._resizeTimer=setTimeout(function(){ir.preventDefault(),ir.stopPropagation(),Ge._isResizing=!0,Ge._resizeStartSize=Ge.config.get("displaySize"),Ge._resizeStartY=Un(ir),et.css("filter","brightness(1.2)")},1e3)},jt=Ra()(function(ir){return Ge.config.set("displaySize",ir)},50),cn=function(ir){if(!Ge._isResizing)return clearTimeout(Ge._resizeTimer);ir.preventDefault(),ir.stopPropagation(),ir=ir.origEvent;var Ii=Math.round((Ge._resizeStartY-Un(ir))/window.innerHeight*100),Fi=Ge._resizeStartSize+Ii;Fi<40?Fi=40:Fi>100&&(Fi=100),jt(Fi)},In=function(){clearTimeout(Ge._resizeTimer),Ge._isResizing=!1,et.css("filter","brightness(1)")},Un=function(ir){return ir.clientY?ir.clientY:ir.touches?ir.touches[0].clientY:0};et.on("contextmenu",function(ir){return ir.preventDefault()});var hr=De()(document.documentElement);Sa()()?(et.on("touchstart",yt).on("touchmove",cn),hr.on("touchend",In)):(et.on("mousedown",yt),hr.on("mousemove",cn),hr.on("mouseup",In))}}]),vt}(an());function go(at,St,vt){return St in at?Object.defineProperty(at,St,{value:vt,enumerable:!0,configurable:!0,writable:!0}):at[St]=vt,at}var $a=V(7132),La=V.n($a);function no(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}Ao().start();var Ba=function(at){be(vt,at);var St=no(vt);function vt(){var Ge,et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yt=et.name,jt=yt===void 0?"console":yt;return he(this,vt),go(ye(Ge=St.call(this)),"_handleShow",function(){zs()(Ge._$el.get(0))||Ge._logger.renderViewport()}),go(ye(Ge),"_handleErr",function(cn){Ge._logger.error(cn)}),an().mixin(ye(Ge)),Ge.name=jt,Ge._scale=1,Ge._selectedLog=null,Ge._registerListener(),Ge}return Te(vt,[{key:"init",value:function(Ge,et){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._container=et,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){fi(Ee(vt.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var Ge=this,et=this._origConsole={},yt=window.console;return qo.forEach(function(jt){var cn=et[jt]=Pa();yt[jt]&&(cn=et[jt]=yt[jt].bind(yt)),yt[jt]=function(){Ge[jt].apply(Ge,arguments),cn.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(Ge,et){this._logger.setGlobal(Ge,et)}},{key:"restoreConsole",value:function(){var Ge=this;return this._origConsole?(qo.forEach(function(et){return window.console[et]=Ge._origConsole[et]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return Ao().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return Ao().rmListener(this._handleErr),this}},{key:"destroy",value:function(){this._logger.destroy(),fi(Ee(vt.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&Hr.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._unregisterListener(),this._rmCfg()}},{key:"_enableJsExecution",value:function(Ge){var et=this._$el,yt=et.find(".eruda-console-container"),jt=et.find(".eruda-js-input");Ge?(jt.show(),yt.rmClass("eruda-js-input-hidden")):(jt.hide(),yt.addClass("eruda-js-input-hidden"))}},{key:"_registerListener",value:function(){var Ge=this;this._scaleListener=function(et){return Ge._scale=et},si.on(si.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){si.off(si.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ge=this._$el;this._style=Hr(V(3816)),Ge.append(V(4432)());var et=Ge.find(".eruda-js-input"),yt=et.find("textarea"),jt=et.find(".eruda-buttons");Object.assign(this,{_$control:Ge.find(".eruda-control"),_$logs:Ge.find(".eruda-logs-container"),_$inputContainer:et,_$input:yt,_$inputBtns:jt,_$searchKeyword:Ge.find(".eruda-search-keyword")})}},{key:"_initLogger",value:function(){var Ge=this.config,et=Ge.get("maxLogNum");et=et==="infinite"?0:+et;var yt=this._$control.find(".eruda-filter"),jt=new(La())(this._$logs.get(0),{asyncRender:Ge.get("asyncRender"),maxNum:et,showHeader:Ge.get("displayExtraInfo"),unenumerable:Ge.get("displayUnenumerable"),accessGetter:Ge.get("displayGetterVal"),lazyEvaluation:Ge.get("lazyEvaluation")});jt.on("optionChange",function(cn,In){cn==="filter"&&yt.each(function(){var Un=De()(this),hr=Un.data("filter")===In;Un[hr?"addClass":"rmClass"]("eruda-active")})}),Ge.get("overrideConsole")&&this.overrideConsole(),this._logger=jt}},{key:"_exposeLogger",value:function(){var Ge=this,et=this._logger;["filter","html"].concat(qo).forEach(function(yt){return Ge[yt]=function(){for(var jt=arguments.length,cn=new Array(jt),In=0;In<jt;In++)cn[In]=arguments[In];return et[yt].apply(et,cn),Ge.emit.apply(Ge,[yt].concat(cn)),Ge}})}},{key:"_bindEvent",value:function(){var Ge=this,et=this._container,yt=this._$input,jt=this._$inputBtns,cn=this._$control,In=this._$searchKeyword,Un=this._logger,hr=this.config;cn.on("click",".eruda-clear-console",function(){return Un.clear(!0)}).on("click",".eruda-filter",function(){In.text(""),Un.setOption("filter",De()(this).data("filter"))}).on("click",".eruda-search",function(){var ir=prompt("Filter");jo()(ir)||(In.text(ir),na()(ir)!==""?Un.setOption("filter",new RegExp(ua()(Vo()(ir)))):Un.setOption("filter","all"))}).on("click",".eruda-copy",function(){Ge._selectedLog&&(Ge._selectedLog.copy(),et.notify("Copied"))}),jt.on("click",".eruda-cancel",function(){return Ge._hideInput()}).on("click",".eruda-execute",function(){var ir=yt.val().trim();ir!==""&&(Un.evaluate(ir),yt.val("").get(0).blur(),Ge._hideInput())}),yt.on("focusin",function(){return Ge._showInput()}),Un.on("insert",function(ir){ir.type==="error"&&hr.get("displayIfErr")&&et.showTool("console").show()}),Un.on("select",function(ir){Ge._selectedLog=ir,cn.find(".eruda-icon-copy").rmClass("eruda-icon-disabled")}),Un.on("deselect",function(){Ge._selectedLog=null,cn.find(".eruda-icon-copy").addClass("eruda-icon-disabled")}),et.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass("eruda-active"),this._$inputBtns.hide()}},{key:"_showInput",value:function(){this._$inputContainer.addClass("eruda-active"),this._$inputBtns.show()}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"asyncRender").remove(Ge,"jsExecution").remove(Ge,"catchGlobalErr").remove(Ge,"overrideConsole").remove(Ge,"displayExtraInfo").remove(Ge,"displayUnenumerable").remove(Ge,"displayGetterVal").remove(Ge,"lazyEvaluation").remove(Ge,"displayIfErr").remove(Ge,"maxLogNum").remove(cs()(this.name))}},{key:"_initCfg",value:function(){var Ge=this,et=this._container,yt=this.config=_e.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(yt.get("jsExecution")),yt.get("catchGlobalErr")&&this.catchGlobalErr(),yt.on("change",function(cn,In){var Un=Ge._logger;switch(cn){case"asyncRender":return Un.setOption("asyncRender",In);case"jsExecution":return Ge._enableJsExecution(In);case"catchGlobalErr":return In?Ge.catchGlobalErr():Ge.ignoreGlobalErr();case"overrideConsole":return In?Ge.overrideConsole():Ge.restoreConsole();case"maxLogNum":return Un.setOption("maxNum",In==="infinite"?0:+In);case"displayExtraInfo":return Un.setOption("showHeader",In);case"displayUnenumerable":return Un.setOption("unenumerable",In);case"displayGetterVal":return Un.setOption("accessGetter",In);case"lazyEvaluation":return Un.setOption("lazyEvaluation",In)}});var jt=et.get("settings");jt&&jt.text(cs()(this.name)).switch(yt,"asyncRender","Asynchronous Rendering").switch(yt,"jsExecution","Enable JavaScript Execution").switch(yt,"catchGlobalErr","Catch Global Errors").switch(yt,"overrideConsole","Override Console").switch(yt,"displayIfErr","Auto Display If Error Occurs").switch(yt,"displayExtraInfo","Display Extra Information").switch(yt,"displayUnenumerable","Display Unenumerable Properties").switch(yt,"displayGetterVal","Access Getter Value").switch(yt,"lazyEvaluation","Lazy Evaluation").select(yt,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),vt}(Hi),qo=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],ol=V(9143),Xh=V.n(ol),Yh=V(2139),Kh=V(8689),ph=V(7935),Qh=V(9119);function fh(at,St){var vt=Object.keys(at);if(Object.getOwnPropertySymbols){var Ge=Object.getOwnPropertySymbols(at);St&&(Ge=Ge.filter(function(et){return Object.getOwnPropertyDescriptor(at,et).enumerable})),vt.push.apply(vt,Ge)}return vt}function _h(at){for(var St=1;St<arguments.length;St++){var vt=arguments[St]!=null?arguments[St]:{};St%2?fh(Object(vt),!0).forEach(function(Ge){go(at,Ge,vt[Ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(vt)):fh(Object(vt)).forEach(function(Ge){Object.defineProperty(at,Ge,Object.getOwnPropertyDescriptor(vt,Ge))})}return at}var ql=new(Xh());ql.register("Network",Yh),ql.register("Overlay",Kh),ql.register("DOM",_h(_h({},ph),{},{getNodeId:ph.getDOMNodeId})),ql.register("Storage",Qh);var To=ql;function Jh(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var ed=function(at){be(vt,at);var St=Jh(vt);function vt(){var Ge;return he(this,vt),go(ye(Ge=St.call(this)),"_reqWillBeSent",function(et){Ge._requests[et.requestId]={name:Wi(et.request.url),url:et.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:et.request.postData,method:et.request.method,startTime:1e3*et.timestamp,time:0,resTxt:"",done:!1,reqHeaders:et.request.headers||{},resHeaders:{}}}),go(ye(Ge),"_resReceivedExtraInfo",function(et){var yt=Ge._requests[et.requestId];yt&&(yt.resHeaders=et.headers,Ge._updateType(yt),Ge._render())}),go(ye(Ge),"_resReceived",function(et){var yt=Ge._requests[et.requestId];if(yt){var jt=et.response,cn=jt.status,In=jt.headers;yt.status=cn,(cn<200||cn>=300)&&(yt.hasErr=!0),In&&(yt.resHeaders=In,Ge._updateType(yt)),Ge._render()}}),go(ye(Ge),"_loadingFinished",function(et){var yt=Ge._requests[et.requestId];if(yt){var jt=1e3*et.timestamp;yt.time=jt-yt.startTime,yt.displayTime=Ns()(yt.time),yt.size=et.encodedDataLength,yt.done=!0,yt.resTxt=To.domain("Network").getResponseBody({requestId:et.requestId}).body,Ge._render()}}),Ge._style=Hr(V(3985)),Ge.name="network",Ge._requests={},Ge._tpl=V(4854),Ge._detailTpl=V(1083),Ge._requestsTpl=V(726),Ge._detailData={},Ge}return Te(vt,[{key:"init",value:function(Ge,et){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._container=et,this._bindEvent(),this._appendTpl()}},{key:"show",value:function(){fi(Ee(vt.prototype),"show",this).call(this),this._render()}},{key:"clear",value:function(){this._requests={},this._render()}},{key:"requests",value:function(){var Ge=[];return gn()(this._requests,function(et){Ge.push(et)}),Ge}},{key:"_updateType",value:function(Ge){var et=function(cn){if(!cn)return"unknown";var In=cn.split(";")[0].split("/");return{type:In[0],subType:Bs()(In)}}(Ge.resHeaders["content-type"]||""),yt=et.type,jt=et.subType;Ge.type=yt,Ge.subType=jt}},{key:"_bindEvent",value:function(){var Ge=this,et=this._$el,yt=this._container,jt=this;function cn(Un,hr){var ir=yt.get("sources");ir&&(ir.set(Un,hr),yt.showTool("sources"))}et.on("click",".eruda-request",function(){var Un=De()(this).data("id"),hr=jt._requests[Un];hr.done&&jt._showDetail(hr)}).on("click",".eruda-clear-request",function(){return Ge.clear()}).on("click",".eruda-back",function(){return Ge._hideDetail()}).on("click",".eruda-http .eruda-response",function(){var Un=Ge._detailData,hr=Un.resTxt;switch(Un.subType){case"css":return cn("css",hr);case"html":return cn("html",hr);case"javascript":return cn("js",hr);case"json":return cn("object",hr)}if(Un.type==="image")return cn("img",Un.url)}),To.domain("Network").enable();var In=To.domain("Network");In.on("requestWillBeSent",this._reqWillBeSent),In.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),In.on("responseReceived",this._resReceived),In.on("loadingFinished",this._loadingFinished)}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),Hr.remove(this._style);var Ge=To.domain("Network");Ge.off("requestWillBeSent",this._reqWillBeSent),Ge.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),Ge.off("responseReceived",this._resReceived),Ge.off("loadingFinished",this._loadingFinished)}},{key:"_showDetail",value:function(Ge){Ge.resTxt&&na()(Ge.resTxt)===""&&delete Ge.resTxt,Do()(Ge.resHeaders)&&delete Ge.resHeaders,Do()(Ge.reqHeaders)&&delete Ge.reqHeaders,this._$detail.html(this._detailTpl(Ge)).show(),this._detailData=Ge}},{key:"_hideDetail",value:function(){this._$detail.hide()}},{key:"_appendTpl",value:function(){var Ge=this._$el;Ge.html(this._tpl()),this._$detail=Ge.find(".eruda-detail"),this._$requests=Ge.find(".eruda-requests")}},{key:"_render",value:function(){if(this.active){var Ge={};Do()(this._requests)||(Ge.requests=this._requests),this._renderHtml(this._requestsTpl(Ge))}}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$requests.html(Ge))}}]),vt}(Hi);function td(at){for(var St={},vt=0,Ge=at.length;vt<Ge;vt++){var et=at[vt];at[et]!=="initial"&&(St[et]=at[et])}return function(yt){return Dl()(yt,{comparator:function(jt,cn){for(var In=jt.length,Un=cn.length,hr=In>Un?Un:In,ir=0;ir<hr;ir++){var Ii=Uc(jt.charCodeAt(ir),cn.charCodeAt(ir));if(Ii!==0)return Ii}return In>Un?1:In<Un?-1:0}})}(St)}var nd=Element.prototype,Mu=function(){return!1};nd.webkitMatchesSelector?Mu=function(at,St){return at.webkitMatchesSelector(St)}:nd.mozMatchesSelector&&(Mu=function(at,St){return at.mozMatchesSelector(St)});var Yd=function(){function at(St){he(this,at),this._el=St}return Te(at,[{key:"getComputedStyle",value:function(){return td(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var St=this,vt=[];return gn()(document.styleSheets,function(Ge){try{if(!Ge.cssRules)return}catch{return}gn()(Ge.cssRules,function(et){var yt=!1;try{yt=St._elMatchesSel(et.selectorText)}catch{}yt&&vt.push({selectorText:et.selectorText,style:td(et.style)})})}),vt}},{key:"_elMatchesSel",value:function(St){return Mu(this._el,St)}}]),at}();function Uc(at,St){return(at=rd(at))>(St=rd(St))?1:at<St?-1:0}function rd(at){return at===45?123:at}var Pu=function(){function at(){he(this,at),this._isShow=!1,To.domain("Overlay").enable()}return Te(at,[{key:"setEl",value:function(St){this._target=St}},{key:"show",value:function(){this._isShow=!0;var St=To.domain("DOM").getNodeId({node:this._target}).nodeId;To.domain("Overlay").highlightNode({nodeId:St,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){To.domain("Overlay").disable()}},{key:"hide",value:function(){this._isShow=!1,To.domain("Overlay").hideHighlight()}}]),at}(),id=V(4204),Hl=V.n(id);function Fa(at){var St=at.parentNode;if(!St)return!1;for(;St;)if((St=St.parentNode)&&St.id==="eruda")return!0;return!1}function Na(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Ou=function(at){be(vt,at);var St=Na(vt);function vt(){var Ge;he(this,vt);var et=ye(Ge=St.call(this));return Ge._startListener=function(yt){if(!Fa(yt.target))return et._timer=setTimeout(function(){et.emit("select",yt.target)},200),!1},Ge._moveListener=function(){clearTimeout(et._timer)},Ge._clickListener=function(yt){Fa(yt.target)||(yt.preventDefault(),yt.stopImmediatePropagation())},Ge}return Te(vt,[{key:"enable",value:function(){function Ge(et,yt){document.body.addEventListener(et,yt,!0)}return this.disable(),Sa()()?(Ge("touchstart",this._startListener),Ge("touchmove",this._moveListener)):(Ge("mousedown",this._startListener),Ge("mousemove",this._moveListener)),Ge("click",this._clickListener),this}},{key:"disable",value:function(){function Ge(et,yt){document.body.removeEventListener(et,yt,!0)}return Sa()()?(Ge("touchstart",this._startListener),Ge("touchmove",this._moveListener)):(Ge("mousedown",this._startListener),Ge("mousemove",this._moveListener)),Ge("click",this._clickListener),this}}]),vt}(an());function od(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var ad=function(at){be(vt,at);var St=od(vt);function vt(){var Ge;return he(this,vt),(Ge=St.call(this))._style=Hr(V(269)),Ge.name="elements",Ge._tpl=V(6560),Ge._rmDefComputedStyle=!0,Ge._highlightElement=!1,Ge._selectElement=!1,Ge._observeElement=!0,Ge._computedStyleSearchKeyword="",Ge._history=[],an().mixin(ye(Ge)),Ge}return Te(vt,[{key:"init",value:function(Ge,et){var yt=this;fi(Ee(vt.prototype),"init",this).call(this,Ge),this._container=et,Ge.html('<div class="eruda-show-area"></div>'),this._$showArea=Ge.find(".eruda-show-area"),Ge.append(V(2407)()),this._htmlEl=document.documentElement,this._highlight=new Pu(this._container.$container),this._select=new Ou,this._bindEvent(),this._initObserver(),this._initCfg(),es()(function(){return yt._updateHistory()})}},{key:"show",value:function(){fi(Ee(vt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this._curEl||this._setEl(this._htmlEl),this._render()}},{key:"hide",value:function(){return this._disableObserver(),fi(Ee(vt.prototype),"hide",this).call(this)}},{key:"set",value:function(Ge){if(Ge!==this._curEl)return this._setEl(Ge),this.scrollToTop(),this._render(),this._updateHistory(),this.emit("change",Ge),this}},{key:"overrideEventTarget",value:function(){var Ge=ld(),et=this._origAddEvent=Ge.addEventListener,yt=this._origRmEvent=Ge.removeEventListener;Ge.addEventListener=function(jt,cn,In){_s(this,jt,cn,In),et.apply(this,arguments)},Ge.removeEventListener=function(jt,cn,In){al(this,jt,cn,In),yt.apply(this,arguments)}}},{key:"scrollToTop",value:function(){this._$showArea.get(0).scrollTop=0}},{key:"restoreEventTarget",value:function(){var Ge=ld();this._origAddEvent&&(Ge.addEventListener=this._origAddEvent),this._origRmEvent&&(Ge.removeEventListener=this._origRmEvent)}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),Hr.remove(this._style),this._select.disable(),this._highlight.destroy(),this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"_back",value:function(){if(this._curEl!==this._htmlEl){for(var Ge=this._curParentQueue,et=Ge.shift();!ds(et);)et=Ge.shift();this.set(et)}}},{key:"_bindEvent",value:function(){var Ge=this,et=this,yt=this._container,jt=this._select;this._$el.on("click",".eruda-child",function(){var cn=De()(this).data("idx"),In=et._curEl,Un=In.childNodes[cn];if(Un&&Un.nodeType===3){var hr;switch(In.tagName){case"SCRIPT":hr="js";break;case"STYLE":hr="css";break;default:return}var ir=yt.get("sources");ir&&(ir.set(hr,Un.nodeValue),yt.showTool("sources"))}else ds(Un)?et.set(Un):et._render()}).on("click",".eruda-listener-content",function(){var cn=De()(this).text(),In=yt.get("sources");In&&(In.set("js",cn),yt.showTool("sources"))}).on("click",".eruda-breadcrumb",function(){var cn=yt.get("sources");cn&&(cn.set("object",Ge._curEl),yt.showTool("sources"))}).on("click",".eruda-parent",function(){for(var cn=De()(this).data("idx"),In=et._curEl.parentNode;cn--&&In.parentNode;)In=In.parentNode;ds(In)?et.set(In):et._render()}).on("click",".eruda-toggle-all-computed-style",function(){return Ge._toggleAllComputedStyle()}).on("click",".eruda-computed-style-search",function(){var cn=prompt("Filter");jo()(cn)||(cn=na()(cn),Ge._computedStyleSearchKeyword=cn,Ge._render())}),this._$el.find(".eruda-bottom-bar").on("click",".eruda-refresh",function(){Ge._render(),yt.notify("Refreshed")}).on("click",".eruda-highlight",function(){return Ge._toggleHighlight()}).on("click",".eruda-select",function(){return Ge._toggleSelect()}).on("click",".eruda-reset",function(){return Ge.set(Ge._htmlEl)}),jt.on("select",function(cn){return Ge.set(cn)})}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_enableObserver",value:function(){this._observer.observe(this._htmlEl,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_toggleHighlight",value:function(){this._selectElement||(this._$el.find(".eruda-highlight").toggleClass("eruda-active"),this._highlightElement=!this._highlightElement,this._render())}},{key:"_toggleSelect",value:function(){var Ge=this._select;this._$el.find(".eruda-select").toggleClass("eruda-active"),this._selectElement||this._highlightElement||this._toggleHighlight(),this._selectElement=!this._selectElement,this._selectElement?(Ge.enable(),this._container.hide()):Ge.disable()}},{key:"_setEl",value:function(Ge){this._curEl=Ge,this._curCssStore=new Yd(Ge),this._highlight.setEl(Ge),this._rmDefComputedStyle=!0;for(var et=[],yt=Ge.parentNode;yt;)et.push(yt),yt=yt.parentNode;this._curParentQueue=et}},{key:"_getData",value:function(){var Ge={},et=this._curEl,yt=this._curCssStore,jt=et.className,cn=et.id,In=et.attributes,Un=et.tagName;Ge.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Ge.parents=function(li){for(var wi=[],Ji=0,Gi=li.parentNode;Gi&&Gi.nodeType===1;)wi.push({text:ps(Gi,{noAttr:!0}),idx:Ji++}),Gi=Gi.parentNode;return wi.reverse()}(et),Ge.children=function(li){for(var wi=[],Ji=0,Gi=li.length;Ji<Gi;Ji++){var uo=li[Ji],ms=uo.nodeType;if(ms!==3&&ms!==8){var _d=!zo()(uo.className);ms===1&&uo.id!=="eruda"&&(_d||uo.className.indexOf("eruda")<0)&&wi.push({text:ps(uo),isEl:!0,idx:Ji})}else{var md=uo.nodeValue.trim();md!==""&&wi.push({text:md,isCmt:ms===8,idx:Ji})}}return wi}(et.childNodes),Ge.attributes=ja(In),Ge.name=ps({tagName:Un,id:cn,className:jt,attributes:In});var hr=et.erudaEvents;if(hr&&Jo()(hr).length!==0&&(Ge.listeners=hr),fs(Un))return Ge;var ir=yt.getComputedStyle();function Ii(li){var wi=["top","left","right","bottom"];return li!=="position"&&(wi=Ma()(wi,function(Ji){return"".concat(li,"-").concat(Ji)})),li==="border"&&(wi=Ma()(wi,function(Ji){return"".concat(Ji,"-width")})),{top:Wl(ir[wi[0]],li),left:Wl(ir[wi[1]],li),right:Wl(ir[wi[2]],li),bottom:Wl(ir[wi[3]],li)}}var Fi={margin:Ii("margin"),border:Ii("border"),padding:Ii("padding"),content:{width:Wl(ir.width),height:Wl(ir.height)}};ir.position!=="static"&&(Fi.position=Ii("position")),Ge.boxModel=Fi;var ko=yt.getMatchedCSSRules();ko.unshift(function(li){for(var wi={selectorText:"element.style",style:{}},Ji=0,Gi=li.length;Ji<Gi;Ji++){var uo=li[Ji];wi.style[uo]=li[uo]}return wi}(et.style)),ko.forEach(function(li){return sd(li.style)}),Ge.styles=ko,this._rmDefComputedStyle&&(ir=function(li,wi){var Ji={},Gi=["display","width","height"];return gn()(wi,function(uo){Gi=Gi.concat(Jo()(uo.style))}),Gi=ra()(Gi),gn()(li,function(uo,ms){xi()(Gi,ms)&&(Ji[ms]=uo)}),Ji}(ir,ko)),Ge.rmDefComputedStyle=this._rmDefComputedStyle;var Wo=Vo()(Ge.computedStyleSearchKeyword);return Wo&&(ir=Oa()(ir,function(li,wi){return xi()(wi,Wo)||xi()(li,Wo)})),sd(ir),Ge.computedStyle=ir,Ge}},{key:"_render",value:function(){if(!ds(this._curEl))return this._back();this._highlight[this._highlightElement?"show":"hide"](),this._renderHtml(this._tpl(this._getData()))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$showArea.html(Ge))}},{key:"_updateHistory",value:function(){var Ge=this._container.get("console");if(Ge){var et=this._history;et.unshift(this._curEl),et.length>5&&et.pop();for(var yt=0;yt<5;yt++)Ge.setGlobal("$".concat(yt),et[yt])}}},{key:"_initObserver",value:function(){var Ge=this;this._observer=new(bn())(function(et){gn()(et,function(yt){return Ge._handleMutation(yt)})})}},{key:"_handleMutation",value:function(Ge){var et,yt;if(!Fa(Ge.target)){if(Ge.type==="attributes"){if(Ge.target!==this._curEl)return;this._render()}else if(Ge.type==="childList"){if(Ge.target===this._curEl)return this._render();var jt=Ge.addedNodes;for(et=0,yt=jt.length;et<yt;et++)if(jt[et].parentNode===this._curEl)return this._render();var cn=Ge.removedNodes;for(et=0,yt=cn.length;et<yt;et++)if(cn[et]===this._curEl)return this.set(this._htmlEl)}}}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"overrideEventTarget").remove(Ge,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var Ge=this,et=this.config=_e.createCfg("elements",{overrideEventTarget:!0,observeElement:!0});et.get("overrideEventTarget")&&this.overrideEventTarget(),et.get("observeElement")&&(this._observeElement=!1),et.on("change",function(jt,cn){switch(jt){case"overrideEventTarget":return cn?Ge.overrideEventTarget():Ge.restoreEventTarget();case"observeElement":return Ge._observeElement=cn,cn?Ge._enableObserver():Ge._disableObserver()}});var yt=this._container.get("settings");yt&&(yt.text("Elements").switch(et,"overrideEventTarget","Catch Event Listeners"),this._observer&&yt.switch(et,"observeElement","Auto Refresh"),yt.separator())}}]),vt}(Hi);function sd(at){gn()(at,function(St,vt){return at[vt]=Ru(St)})}var Kd=/rgba?\((.*?)\)/g,Qd=/url\("?(.*?)"?\)/g;function Ru(at){return(at=ls()(at)).replace(Kd,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Qd,function(St,vt){return'url("'.concat(cd(vt),'")')})}var ds=function(at){return lo()(at)&&at.parentNode};function ps(at){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=St.noAttr,Ge=vt!==void 0&&vt,et=at.id,yt=at.className,jt=at.attributes,cn='<span class="eruda-tag-name-color">'.concat(at.tagName.toLowerCase(),"</span>");if(et!==""&&(cn+='<span class="eruda-function-color">#'.concat(et,"</span>")),zo()(yt)){var In="";gn()(yt.split(/\s+/g),function(Un){Un.trim()!==""&&(In+=".".concat(Un))}),cn+='<span class="eruda-attribute-name-color">'.concat(In,"</span>")}return Ge||gn()(jt,function(Un){var hr=Un.name;hr!=="id"&&hr!=="class"&&hr!=="style"&&(cn+=' <span class="eruda-attribute-name-color">'.concat(hr,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(Un.value,'</span><span class="eruda-operator-color">"</span>'))}),cn}var ja=function(at){return Ma()(at,function(St){var vt=St.value,Ge=St.name;return vt=Ta()(vt),(Ge==="src"||Ge==="href")&&!as()(vt,"data")&&(vt=cd(vt)),Ge==="style"&&(vt=Ru(vt)),{name:Ge,value:vt}})},aa=["script","style","meta","title","link","head"],fs=function(at){return aa.indexOf(at.toLowerCase())>-1};function _s(at,St,vt){var Ge=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(lo()(at)&&Ds()(vt)&&Os()(Ge)){var et=at.erudaEvents=at.erudaEvents||{};et[St]=et[St]||[],et[St].push({listener:vt,listenerStr:vt.toString(),useCapture:Ge})}}function al(at,St,vt){var Ge=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(lo()(at)&&Ds()(vt)&&Os()(Ge)){var et=at.erudaEvents;if(et&&et[St]){for(var yt=et[St],jt=0,cn=yt.length;jt<cn;jt++)if(yt[jt].listener===vt){yt.splice(jt,1);break}yt.length===0&&delete et[St],Jo()(et).length===0&&delete at.erudaEvents}}}var ld=function(){return co()(window,"EventTarget.prototype")||window.Node.prototype},cd=function(at){return'<a href="'.concat(at,'" target="_blank">').concat(at,"</a>")};function Wl(at,St){if(Uo()(at))return at;if(!zo()(at))return"\u2012";var vt=Ir(at);return yl()(vt)?at:St==="position"?vt:vt===0?"\u2012":vt}var Du=null,ud=[{name:"Border All",fn:function(){if(Du)return Hr.remove(Du),void(Du=null);Du=Hr("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var at=new(Yn());at.setQuery("timestamp",uu()()),window.location.replace(at.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){var at=prompt("Enter the text")||"";na()(at)!==""&&function(St){var vt=document.body,Ge=new RegExp(St,"ig");Zl(vt,function(et){var yt=De()(et);if(yt.hasClass("eruda-search-highlight-block"))return document.createTextNode(yt.text())}),Zl(vt,function(et){if(et.nodeType===3){var yt=et.nodeValue;if((yt=yt.replace(Ge,function(cn){return'<span class="eruda-keyword">'.concat(cn,"</span>")}))!==et.nodeValue){var jt=De()(document.createElement("div"));return jt.html(yt),jt.addClass("eruda-search-highlight-block"),jt.get(0)}}})}(at)},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var at=document.body;at.contentEditable=at.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var at=document.body,St=document.documentElement,vt=De()(at);if(vt.data("scaled"))window.scrollTo(0,+vt.data("scaled")),vt.rmAttr("data-scaled"),vt.css("transform","none");else{var Ge=Math.max(at.scrollHeight,at.offsetHeight,St.clientHeight,St.scrollHeight,St.offsetHeight),et=Math.max(document.documentElement.clientHeight,window.innerHeight||0),yt=et/Ge;vt.css("transform","scale(".concat(yt,")")),vt.data("scaled",window.scrollY),window.scrollTo(0,Ge/2-et/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Fps Plugin",fn:function(){Vi("fps")},desc:"Display page fps"},{name:"Load Features Plugin",fn:function(){Vi("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){Vi("timing")},desc:"Show performance and resource timing"},{name:"Load Memory Plugin",fn:function(){Vi("memory")},desc:"Display memory"},{name:"Load Code Plugin",fn:function(){Vi("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){Vi("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){Vi("geolocation")},desc:"Test geolocation"},{name:"Load Dom Plugin",fn:function(){Vi("dom")},desc:"Navigate dom tree"},{name:"Load Orientation Plugin",fn:function(){Vi("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){Vi("touches")},desc:"Visualize screen touches"},{name:"Restore Settings",fn:function(){var at=Eo("local"),St=JSON.parse(JSON.stringify(at));gn()(St,function(vt,Ge){zo()(vt)&&as()(Ge,"eruda")&&at.removeItem(Ge)}),window.location.reload()},desc:"Restore defaults and reload"}];function Zl(at,St){var vt=at.childNodes;if(!Fa(at)){for(var Ge=0,et=vt.length;Ge<et;Ge++){var yt=Zl(vt[Ge],St);yt&&at.replaceChild(yt,vt[Ge])}return St(at)}}function Vi(at){var St="eruda"+cs()(at);if(!window[St]){var vt=location.protocol;as()(vt,"http")||(vt="http:"),kl()("".concat(vt,"//cdn.jsdelivr.net/npm/eruda-").concat(at,"@").concat(Jd[at]),function(Ge){if(!Ge||!window[St])return zi.error("Fail to load plugin "+at);si.emit(si.ADD,window[St]),si.emit(si.SHOW,at)})}}Hr(V(6068),document.head);var Jd={fps:"2.0.0",features:"2.0.0",timing:"2.0.1",memory:"2.0.0",code:"2.0.0",benchmark:"2.0.0",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"};function ep(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var Bi=function(at){be(vt,at);var St=ep(vt);function vt(){var Ge;return he(this,vt),(Ge=St.call(this))._style=Hr(V(8277)),Ge.name="snippets",Ge._snippets=[],Ge._tpl=V(1122),Ge}return Te(vt,[{key:"init",value:function(Ge){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"add",value:function(Ge,et,yt){return this._snippets.push({name:Ge,fn:et,desc:yt}),this._render(),this}},{key:"remove",value:function(Ge){for(var et=this._snippets,yt=0,jt=et.length;yt<jt;yt++)et[yt].name===Ge&&et.splice(yt,1);return this._render(),this}},{key:"run",value:function(Ge){for(var et=this._snippets,yt=0,jt=et.length;yt<jt;yt++)et[yt].name===Ge&&this._run(yt);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var Ge=this;this._$el.on("click",".eruda-run",function(){var et=De()(this).data("idx");Ge._run(et)})}},{key:"_run",value:function(Ge){this._snippets[Ge].fn.call(null)}},{key:"_addDefSnippets",value:function(){var Ge=this;gn()(ud,function(et){Ge.add(et.name,et.fn,et.desc)})}},{key:"_render",value:function(){this._renderHtml(this._tpl({snippets:this._snippets}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}}]),vt}(Hi);function kr(at,St){var vt=typeof Symbol!="undefined"&&at[Symbol.iterator]||at["@@iterator"];if(!vt){if(Array.isArray(at)||(vt=function(In,Un){if(!!In){if(typeof In=="string")return Ua(In,Un);var hr=Object.prototype.toString.call(In).slice(8,-1);if(hr==="Object"&&In.constructor&&(hr=In.constructor.name),hr==="Map"||hr==="Set")return Array.from(In);if(hr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(hr))return Ua(In,Un)}}(at))||St&&at&&typeof at.length=="number"){vt&&(at=vt);var Ge=0,et=function(){};return{s:et,n:function(){return Ge>=at.length?{done:!0}:{done:!1,value:at[Ge++]}},e:function(In){throw In},f:et}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yt,jt=!0,cn=!1;return{s:function(){vt=vt.call(at)},n:function(){var In=vt.next();return jt=In.done,In},e:function(In){cn=!0,yt=In},f:function(){try{jt||vt.return==null||vt.return()}finally{if(cn)throw yt}}}}function Ua(at,St){(St==null||St>at.length)&&(St=at.length);for(var vt=0,Ge=new Array(St);vt<St;vt++)Ge[vt]=at[vt];return Ge}function mh(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var ti=function(at){be(vt,at);var St=mh(vt);function vt(){var Ge;return he(this,vt),(Ge=St.call(this))._style=Hr(V(8070)),Ge.name="resources",Ge._localStoreData=[],Ge._localStoreSearchKeyword="",Ge._hideErudaSetting=!1,Ge._sessionStoreData=[],Ge._sessionStoreSearchKeyword="",Ge._cookieData=[],Ge._cookieSearchKeyword="",Ge._scriptData=[],Ge._stylesheetData=[],Ge._iframeData=[],Ge._imageData=[],Ge._observeElement=!0,Ge._tpl=V(2875),Ge}return Te(vt,[{key:"init",value:function(Ge,et){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._container=et,this.refresh(),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()._render()}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),this._disableObserver(),Hr.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var Ge=[];return De()("script").each(function(){var et=this.src;et!==""&&Ge.push(et)}),Ge=ra()(Ge),this._scriptData=Ge,this}},{key:"refreshStylesheet",value:function(){var Ge=[];return De()("link").each(function(){this.rel==="stylesheet"&&Ge.push(this.href)}),Ge=ra()(Ge),this._stylesheetData=Ge,this}},{key:"refreshIframe",value:function(){var Ge=[];return De()("iframe").each(function(){var et=De()(this).attr("src");et&&Ge.push(et)}),Ge=ra()(Ge),this._iframeData=Ge,this}},{key:"refreshLocalStorage",value:function(){return this._refreshStorage("local"),this}},{key:"refreshSessionStorage",value:function(){return this._refreshStorage("session"),this}},{key:"_refreshStorage",value:function(Ge){var et=this,yt=Eo(Ge,!1);if(yt){var jt=[];yt=JSON.parse(JSON.stringify(yt)),gn()(yt,function(cn,In){zo()(cn)&&(et._hideErudaSetting&&(as()(In,"eruda")||In==="active-eruda")||jt.push({key:In,val:gh(cn,200)}))}),this["_"+Ge+"StoreData"]=jt}}},{key:"refreshCookie",value:function(){var Ge=To.domain("Network").getCookies().cookies,et=Ma()(Ge,function(yt){return{key:yt.name,val:yt.value}});return this._cookieData=et,this}},{key:"refreshImage",value:function(){var Ge=[],et=this._performance=window.webkitPerformance||window.performance;return et&&et.getEntries?this._performance.getEntries().forEach(function(yt){(yt.initiatorType==="img"||Va(yt.name))&&Ge.push(yt.name)}):De()("img").each(function(){var yt=De()(this),jt=yt.attr("src");yt.data("exclude")!=="true"&&Ge.push(jt)}),(Ge=ra()(Ge)).sort(),this._imageData=Ge,this}},{key:"show",value:function(){return fi(Ee(vt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),fi(Ee(vt.prototype),"hide",this).call(this)}},{key:"_bindEvent",value:function(){var Ge=this,et=this,yt=this._$el,jt=this._container;function cn(Un,hr){var ir=jt.get("sources");if(ir)return ir.set(Un,hr),jt.showTool("sources"),!0}function In(Un){return function(hr){if(jt.get("sources")){hr.preventDefault();var ir=De()(this).attr("href");Un!=="iframe"&&bo()(location.href,ir)?un()({url:ir,success:function(Ii){cn(Un,Ii)},dataType:"raw"}):cn("iframe",ir)}}}yt.on("click",".eruda-refresh-local-storage",function(){jt.notify("Refreshed"),Ge.refreshLocalStorage()._render()}).on("click",".eruda-refresh-session-storage",function(){jt.notify("Refreshed"),Ge.refreshSessionStorage()._render()}).on("click",".eruda-refresh-cookie",function(){jt.notify("Refreshed"),Ge.refreshCookie()._render()}).on("click",".eruda-refresh-script",function(){jt.notify("Refreshed"),Ge.refreshScript()._render()}).on("click",".eruda-refresh-stylesheet",function(){jt.notify("Refreshed"),Ge.refreshStylesheet()._render()}).on("click",".eruda-refresh-iframe",function(){jt.notify("Refreshed"),Ge.refreshIframe()._render()}).on("click",".eruda-refresh-image",function(){jt.notify("Refreshed"),Ge.refreshImage()._render()}).on("click",".eruda-search",function(){var Un=De()(this).data("type"),hr=prompt("Filter");if(!jo()(hr)){switch(hr=na()(hr),Un){case"local":et._localStoreSearchKeyword=hr;break;case"session":et._sessionStoreSearchKeyword=hr;break;case"cookie":et._cookieSearchKeyword=hr}et._render()}}).on("click",".eruda-delete-storage",function(){var Un=De()(this),hr=Un.data("key");Un.data("type")==="local"?(localStorage.removeItem(hr),et.refreshLocalStorage()._render()):(sessionStorage.removeItem(hr),et.refreshSessionStorage()._render())}).on("click",".eruda-delete-cookie",function(){var Un=De()(this).data("key");To.domain("Network").deleteCookies({name:Un}),et.refreshCookie()._render()}).on("click",".eruda-clear-storage",function(){De()(this).data("type")==="local"?(gn()(et._localStoreData,function(Un){return localStorage.removeItem(Un.key)}),et.refreshLocalStorage()._render()):(gn()(et._sessionStoreData,function(Un){return sessionStorage.removeItem(Un.key)}),et.refreshSessionStorage()._render())}).on("click",".eruda-clear-cookie",function(){To.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),Ge.refreshCookie()._render()}).on("click",".eruda-storage-val",function(){var Un=De()(this),hr=Un.data("key"),ir=Un.data("type")==="local"?localStorage.getItem(hr):sessionStorage.getItem(hr);try{cn("object",JSON.parse(ir))}catch{cn("raw",ir)}}).on("click",".eruda-img-link",function(){cn("img",De()(this).attr("src"))}).on("click",".eruda-css-link",In("css")).on("click",".eruda-js-link",In("js")).on("click",".eruda-iframe-link",In("iframe")),js().on("change",function(){return Ge._render()})}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"hideErudaSetting").remove(Ge,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var Ge=this,et=this.config=_e.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});et.get("hideErudaSetting")&&(this._hideErudaSetting=!0),et.get("observeElement")||(this._observeElement=!1),et.on("change",function(yt,jt){switch(yt){case"hideErudaSetting":return void(Ge._hideErudaSetting=jt);case"observeElement":return Ge._observeElement=jt,jt?Ge._enableObserver():Ge._disableObserver()}}),this._container.get("settings").text("Resources").switch(et,"hideErudaSetting","Hide Eruda Setting").switch(et,"observeElement","Auto Refresh Elements").separator()}},{key:"_render",value:function(){var Ge=this._cookieData,et=this._scriptData,yt=this._stylesheetData,jt=this._imageData,cn=this._localStoreSearchKeyword,In=this._sessionStoreSearchKeyword,Un=this._cookieSearchKeyword;function hr(ir,Ii){return(Ii=Vo()(Ii))?ha()(ir,function(Fi){var ko=Fi.key,Wo=Fi.val;return xi()(Vo()(ko),Ii)||xi()(Vo()(Wo),Ii)}):ir}this._renderHtml(this._tpl({localStoreData:hr(this._localStoreData,cn),localStoreSearchKeyword:cn,sessionStoreData:hr(this._sessionStoreData,In),sessionStoreSearchKeyword:In,cookieData:hr(Ge,Un),cookieSearchKeyword:Un,cookieState:Vc("cookie",Ge.length),scriptData:et,scriptState:Vc("script",et.length),stylesheetData:yt,stylesheetState:Vc("stylesheet",yt.length),iframeData:this._iframeData,imageData:jt,imageState:Vc("image",jt.length)}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}},{key:"_initObserver",value:function(){var Ge=this;this._observer=new(bn())(function(et){var yt=!1;gn()(et,function(jt){Ge._handleMutation(jt)&&(yt=!0)}),yt&&Ge._render()})}},{key:"_handleMutation",value:function(Ge){var et=this;if(!Fa(Ge.target)){var yt=function(Un){var hr=function(ir){return ir.tagName?ir.tagName.toLowerCase():""}(Un);switch(hr){case"script":return et.refreshScript(),!0;case"img":return et.refreshImage(),!0;case"link":return et.refreshStylesheet(),!0}return!1};if(Ge.type==="attributes"){if(yt(Ge.target))return!0}else if(Ge.type==="childList"){if(yt(Ge.target))return!0;var jt,cn=Js()(Ge.addedNodes),In=kr(cn=No()(cn,Js()(Ge.removedNodes)));try{for(In.s();!(jt=In.n()).done;)if(yt(jt.value))return!0}catch(Un){In.e(Un)}finally{In.f()}}return!1}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),vt}(Hi);function Vc(at,St){if(St===0)return"";var vt=0,Ge=0;switch(at){case"cookie":vt=30,Ge=60;break;case"script":vt=5,Ge=10;break;case"stylesheet":vt=4,Ge=8;break;case"image":vt=50,Ge=100}return St>=Ge?"danger":St>=vt?"warn":"ok"}var gh=function(at,St){return at.length<St?at:at.slice(0,St)+"..."},xa=/\.(jpeg|jpg|gif|png)$/,Va=function(at){return xa.test(at)},Lo=Er()(),Ho=[{name:"Location",val:function(){return Ta()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(ei()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(Lo.name+" "+Lo.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://github.com/liriliri/eruda" target="_blank">Eruda v2.6.1</a>'}];function Qi(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var hd=function(at){be(vt,at);var St=Qi(vt);function vt(){var Ge;return he(this,vt),(Ge=St.call(this))._style=Hr(V(9577)),Ge.name="info",Ge._tpl=V(2861),Ge._infos=[],Ge}return Te(vt,[{key:"init",value:function(Ge){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._addDefInfo()}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"add",value:function(Ge,et){var yt=this._infos,jt=!1;return gn()(yt,function(cn){Ge===cn.name&&(cn.val=et,jt=!0)}),jt||yt.push({name:Ge,val:et}),this._render(),this}},{key:"get",value:function(Ge){var et,yt=this._infos;return wl()(Ge)?Ti()(yt):(gn()(yt,function(jt){Ge===jt.name&&(et=jt.val)}),et)}},{key:"remove",value:function(Ge){for(var et=this._infos,yt=et.length-1;yt>=0;yt--)et[yt].name===Ge&&et.splice(yt,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var Ge=this;gn()(Ho,function(et){return Ge.add(et.name,et.val)})}},{key:"_render",value:function(){var Ge=[];gn()(this._infos,function(et){var yt=et.name,jt=et.val;Ds()(jt)&&(jt=jt()),Ge.push({name:yt,val:jt})}),this._renderHtml(this._tpl({infos:Ge}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}}]),vt}(Hi),ba=V(4030),dd=V.n(ba);function Xl(at){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var vt,Ge=Ee(at);if(St){var et=Ee(this).constructor;vt=Reflect.construct(Ge,arguments,et)}else vt=Ge.apply(this,arguments);return xe(this,vt)}}var zu,pd=function(at){be(vt,at);var St=Xl(vt);function vt(){var Ge;return he(this,vt),(Ge=St.call(this))._style=Hr(V(4214)),Ge.name="sources",Ge._showLineNum=!0,Ge._formatCode=!0,Ge._indentSize=4,Ge._loadTpl(),Ge}return Te(vt,[{key:"init",value:function(Ge,et){fi(Ee(vt.prototype),"init",this).call(this,Ge),this._container=et,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){fi(Ee(vt.prototype),"destroy",this).call(this),Hr.remove(this._style),this._rmCfg()}},{key:"set",value:function(Ge,et){if(Ge==="img"){this._isFetchingData=!0;var yt=new Image,jt=this;return yt.onload=function(){jt._isFetchingData=!1,jt._data={type:"img",val:{width:this.width,height:this.height,src:et}},jt._render()},yt.onerror=function(){jt._isFetchingData=!1},void(yt.src=et)}return this._data={type:Ge,val:et},this._render(),this}},{key:"show",value:function(){return fi(Ee(vt.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var Ge=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,un()({url:location.href,success:function(et){return Ge._html=et},error:function(){return Ge._html="Sorry, unable to fetch source code:("},complete:function(){Ge._isGettingHtml=!1,Ge._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var Ge=this;this._container.on("showTool",function(et,yt){et!==Ge.name&&yt.name===Ge.name&&delete Ge._data})}},{key:"_loadTpl",value:function(){this._codeTpl=V(431),this._imgTpl=V(2229),this._objTpl=V(2944),this._rawTpl=V(8191),this._iframeTpl=V(6680)}},{key:"_rmCfg",value:function(){var Ge=this.config,et=this._container.get("settings");et&&et.remove(Ge,"showLineNum").remove(Ge,"formatCode").remove(Ge,"indentSize").remove("Sources")}},{key:"_initCfg",value:function(){var Ge=this,et=this.config=_e.createCfg("sources",{showLineNum:!0,formatCode:!0,indentSize:4});et.get("showLineNum")||(this._showLineNum=!1),et.get("formatCode")||(this._formatCode=!1),this._indentSize=et.get("indentSize"),et.on("change",function(yt,jt){switch(yt){case"showLineNum":return void(Ge._showLineNum=jt);case"formatCode":return void(Ge._formatCode=jt);case"indentSize":return void(Ge._indentSize=+jt)}}),this._container.get("settings").text("Sources").switch(et,"showLineNum","Show Line Numbers").switch(et,"formatCode","Beautify Code").select(et,"indentSize","Indent Size",["2","4"]).separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){this._renderHtml(this._imgTpl(this._data.val))}},{key:"_renderCode",value:function(){var Ge=this._data,et=this._indentSize,yt=Ge.val,jt=Ge.val.length;if(jt<yh&&this._formatCode){switch(Ge.type){case"html":yt=Hl().html(yt,{unformatted:[],indent_size:et});break;case"css":yt=Hl().css(yt,{indent_size:et});break;case"js":yt=Hl()(yt,{indent_size:et})}var cn=Hr.getCurTheme();yt=Xi()(yt,Ge.type,{keyword:"color:".concat(cn.keywordColor),number:"color:".concat(cn.numberColor),operator:"color:".concat(cn.operatorColor),comment:"color:".concat(cn.commentColor),string:"color:".concat(cn.stringColor)})}else yt=Ta()(yt);jt<fd&&this._showLineNum&&(yt=yt.split(`
`).map(function(In,Un){return na()(In)===""&&(In="&nbsp;"),{idx:Un+1,val:In}})),this._renderHtml(this._codeTpl({code:yt,showLineNum:jt<fd&&this._showLineNum}))}},{key:"_renderObj",value:function(){this._renderHtml(this._objTpl(),!1);var Ge=this._data.val;try{zo()(Ge)&&(Ge=JSON.parse(Ge))}catch{}new(dd())(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(Ge)}},{key:"_renderRaw",value:function(){this._renderHtml(this._rawTpl({val:this._data.val}))}},{key:"_renderIframe",value:function(){this._renderHtml(this._iframeTpl({src:this._data.val}))}},{key:"_renderHtml",value:function(Ge){var et=this,yt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];yt&&Ge===this._lastHtml||(this._lastHtml=Ge,this._$el.html(Ge),setTimeout(function(){return et._$el.get(0).scrollTop=0},0))}}]),vt}(Hi),yh=1e5,fd=4e5,vh={init:function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=at.container,vt=at.tool,Ge=at.autoScale,et=Ge===void 0||Ge,yt=at.useShadowDom,jt=yt===void 0||yt,cn=at.defaults,In=cn===void 0?{}:cn;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(St,jt),this._initStyle(),this._initDevTools(In),this._initEntryBtn(),this._initSettings(),this._initTools(vt),this._registerListener(),et&&this._autoScale())},_isInit:!1,version:"2.6.1",util:de,chobitsu:To,Tool:Hi,Console:Ba,Elements:ad,Network:ed,Sources:pd,Resources:ti,Info:hd,Snippets:Bi,Settings:_e,get:function(at){if(this._checkInit()){if(at==="entryBtn")return this._entryBtn;var St=this._devTools;return at?St.get(at):St}},add:function(at){if(this._checkInit())return Ds()(at)&&(at=at(this)),this._devTools.add(at),this},remove:function(at){return this._devTools.remove(at),this},show:function(at){if(this._checkInit()){var St=this._devTools;return at?St.showTool(at):St.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),this._$el.remove(),Hr.clear(),this._isInit=!1},scale:function(at){return Uo()(at)?(this._scale=at,si.emit(si.SCALE,at),this):this._scale},position:function(at){var St=this._entryBtn;return $s()(at)?(St.setPos(at),this):St.getPos()},_autoScale:function(){Sa()()&&this.scale(1/Oc()())},_registerListener:function(){var at=this;this._addListener=function(){return at.add.apply(at,arguments)},this._showListener=function(){return at.show.apply(at,arguments)},si.on(si.ADD,this._addListener),si.on(si.SHOW,this._showListener),si.on(si.SCALE,Hr.setScale)},_unregisterListener:function(){si.off(si.ADD,this._addListener),si.off(si.SHOW,this._showListener),si.off(si.SCALE,Hr.setScale)},_checkInit:function(){return this._isInit||zi.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(at,St){var vt;at||(at=document.createElement("div"),document.documentElement.appendChild(at),at.style.all="initial"),St&&(at.attachShadow?vt=at.attachShadow({mode:"open"}):at.createShadowRoot&&(vt=at.createShadowRoot()),vt&&(Hr.container=document.head,Hr(V(8998)+V(276)+V(8418)+V(5141)),at=document.createElement("div"),vt.appendChild(at),this._shadowRoot=vt)),Object.assign(at,{id:"eruda",className:"eruda-container",contentEditable:!1}),Er()().name==="ios"&&at.setAttribute("ontouchstart",""),this._$el=De()(at)},_initDevTools:function(at){this._devTools=new to(this._$el,{defaults:at})},_initStyle:function(){var at="eruda-style-container",St=this._$el;this._shadowRoot?(Hr.container=this._shadowRoot,Hr(":host { all: initial }")):(St.append('<div class="'.concat(at,'"></div>')),Hr.container=St.find(".".concat(at)).get(0)),Hr(V(3146)+V(8418)+V(276)+V(5674)+V(2456)+V(5141)+V(6802)+V(8998))},_initEntryBtn:function(){var at=this;this._entryBtn=new _i(this._$el),this._entryBtn.on("click",function(){return at._devTools.toggle()})},_initSettings:function(){var at=this._devTools,St=new _e;at.add(St),this._entryBtn.initCfg(St),at.initCfg(St)},_initTools:function(){var at=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];St=Js()(St);var vt=this._devTools;St.forEach(function(Ge){var et=at[cs()(Ge)];try{et&&vt.add(new et)}catch(yt){es()(function(){zi.error("Something wrong when initializing tool ".concat(Ge,":"),yt.message)})}}),vt.showTool(St[0]||"settings")}};zu=de,Object.assign(zu,{beautify:Hl(),evalCss:Hr,isErudaEl:Fa})},2234:function(q){q.exports={background:"b","background-image":"bi",border:"bo","border-bottom":"bb","border-collapse":"bc","border-left-color":"blc","border-right":"br","border-radius":"bra","border-top":"bt","border-top-color":"btc","box-shadow":"bs","box-sizing":"bsi",clear:"cl",color:"c",content:"co",cursor:"cu",display:"d",flex:"fl","flex-shrink":"fsh",float:"f","font-family":"ff","font-size":"fs","font-weight":"fw",height:"h",left:"l","line-height":"lh",margin:"m","margin-bottom":"mb","margin-left":"ml","margin-top":"mt","min-height":"mh",outline:"ou",overflow:"o","overflow-x":"ox","overflow-y":"oy",padding:"p","padding-bottom":"pb","padding-left":"pl","padding-top":"pt","pointer-events":"pe",position:"po","text-align":"ta","text-transform":"tt",top:"t",transition:"tr","user-select":"us","vertical-aligin":"va",visibility:"v",width:"w","will-change":"wc","white-space":"ws","-webkit-overflow-scrolling":"wos","z-index":"z"}},9871:function(q,Q,V){var de=V(6834);de.registerHelper("repeat",function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,ne=arguments.length>1?arguments[1]:void 0;if(he<1)return ne.inverse(this);var Te=1,j=0,be=he*Te+j,ce=j,ye="";do{var xe={index:ce,count:he,start:j,step:Te,first:ce===j,last:ce>=be-Te},Ee=[ce,xe];ye+=ne.fn(this,{data:xe,blockParams:Ee}),ce+=xe.step}while(ce<be);return ye}),de.registerHelper("class",function(he){var ne=he.split(/\s+/);return ne=ne.map(function(Te){return"eruda-".concat(Te)}),'class="'.concat(ne.join(" "),'"')}),de.registerHelper("concat",function(){for(var he="",ne=0,Te=arguments.length;ne<Te;ne++){var j=arguments[ne];typeof j=="string"&&(he+=j)}return he}),q.exports=de},9143:function(q,Q,V){var de=this&&this.__awaiter||function(Ce,Se,Oe,De){return new(Oe||(Oe=Promise))(function(Ue,$e){function Fe(He){try{Ye(De.next(He))}catch(Je){$e(Je)}}function Xe(He){try{Ye(De.throw(He))}catch(Je){$e(Je)}}function Ye(He){var Je;He.done?Ue(He.value):(Je=He.value,Je instanceof Oe?Je:new Oe(function(pt){pt(Je)})).then(Fe,Xe)}Ye((De=De.apply(Ce,Se||[])).next())})},he=this&&this.__generator||function(Ce,Se){var Oe,De,Ue,$e,Fe={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return $e={next:Xe(0),throw:Xe(1),return:Xe(2)},typeof Symbol=="function"&&($e[Symbol.iterator]=function(){return this}),$e;function Xe(Ye){return function(He){return function(Je){if(Oe)throw new TypeError("Generator is already executing.");for(;Fe;)try{if(Oe=1,De&&(Ue=2&Je[0]?De.return:Je[0]?De.throw||((Ue=De.return)&&Ue.call(De),0):De.next)&&!(Ue=Ue.call(De,Je[1])).done)return Ue;switch(De=0,Ue&&(Je=[2&Je[0],Ue.value]),Je[0]){case 0:case 1:Ue=Je;break;case 4:return Fe.label++,{value:Je[1],done:!1};case 5:Fe.label++,De=Je[1],Je=[0];continue;case 7:Je=Fe.ops.pop(),Fe.trys.pop();continue;default:if(Ue=Fe.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||Je[0]!==6&&Je[0]!==2)){Fe=0;continue}if(Je[0]===3&&(!Ue||Je[1]>Ue[0]&&Je[1]<Ue[3])){Fe.label=Je[1];break}if(Je[0]===6&&Fe.label<Ue[1]){Fe.label=Ue[1],Ue=Je;break}if(Ue&&Fe.label<Ue[2]){Fe.label=Ue[2],Fe.ops.push(Je);break}Ue[2]&&Fe.ops.pop(),Fe.trys.pop();continue}Je=Se.call(Ce,Fe)}catch(pt){Je=[6,pt],De=0}finally{Oe=Ue=0}if(5&Je[0])throw Je[1];return{value:Je[0]?Je[1]:void 0,done:!0}}([Ye,He])}}},ne=this&&this.__importDefault||function(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(3276)),j=ne(V(1214)),be=ne(V(5936)),ce=ne(V(3783)),ye=ne(V(1443)),xe=V(316),Ee=function(){function Ce(){var Se=this;this.resolves=new Map,this.domains=new Map,this.onMessage=j.default,Te.default.on("message",function(Oe){var De=JSON.parse(Oe),Ue=Se.resolves.get(De.id);if(Ue&&Ue(De.result),!De.id){var $e=De.method.split("."),Fe=$e[0],Xe=$e[1],Ye=Se.domains.get(Fe);Ye&&Ye.emit(Xe,De.params)}Se.onMessage(Oe)})}return Ce.prototype.domain=function(Se){return this.domains.get(Se)},Ce.prototype.setOnMessage=function(Se){this.onMessage=Se},Ce.prototype.sendMessage=function(Se,Oe){var De=this;Oe===void 0&&(Oe={});var Ue=be.default();return this.sendRawMessage(JSON.stringify({id:Ue,method:Se,params:Oe})),new Promise(function($e){De.resolves.set(Ue,$e)})},Ce.prototype.sendRawMessage=function(Se){return de(this,void 0,void 0,function(){var Oe,De,Ue,$e,Fe,Xe,Ye;return he(this,function(He){switch(He.label){case 0:Oe=JSON.parse(Se),De=Oe.method,Ue=Oe.params,$e=Oe.id,Fe={id:$e},He.label=1;case 1:return He.trys.push([1,3,,4]),Xe=Fe,[4,this.callMethod(De,Ue)];case 2:return Xe.result=He.sent(),[3,4];case 3:return(Ye=He.sent())instanceof xe.ErrorWithCode?Fe.error={message:Ye.message,code:Ye.code}:Ye instanceof Error&&(Fe.error={message:Ye.message}),[3,4];case 4:return Te.default.emit("message",JSON.stringify(Fe)),[2]}})})},Ce.prototype.register=function(Se,Oe){var De=this.domains,Ue=De.get(Se);Ue||(Ue={},ye.default.mixin(Ue)),ce.default(Oe,function($e,Fe){Ue[Fe]=$e}),De.set(Se,Ue)},Ce.prototype.callMethod=function(Se,Oe){return de(this,void 0,void 0,function(){var De,Ue,$e,Fe;return he(this,function(Xe){if(De=Se.split("."),Ue=De[0],$e=De[1],(Fe=this.domain(Ue))&&Fe[$e])return[2,Fe[$e](Oe)||{}];throw Error(Se+" unimplemented")})})},Ce}();Q.default=Ee},7935:function(q,Q,V){var de=this&&this.__createBinding||(Object.create?function(it,dt,lt,ft){ft===void 0&&(ft=lt),Object.defineProperty(it,ft,{enumerable:!0,get:function(){return dt[lt]}})}:function(it,dt,lt,ft){ft===void 0&&(ft=lt),it[ft]=dt[lt]}),he=this&&this.__setModuleDefault||(Object.create?function(it,dt){Object.defineProperty(it,"default",{enumerable:!0,value:dt})}:function(it,dt){it.default=dt}),ne=this&&this.__importStar||function(it){if(it&&it.__esModule)return it;var dt={};if(it!=null)for(var lt in it)lt!=="default"&&Object.hasOwnProperty.call(it,lt)&&de(dt,it,lt);return he(dt,it),dt},Te=this&&this.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getDOMNodeId=Q.setOuterHTML=Q.setNodeValue=Q.setInspectedNode=Q.setAttributeValue=Q.setAttributesAsText=Q.resolveNode=Q.requestNode=Q.requestChildNodes=Q.removeNode=Q.pushNodesByBackendIdsToFrontend=Q.discardSearchResults=Q.pushNodesToFrontend=Q.getSearchResults=Q.performSearch=Q.moveTo=Q.getOuterHTML=Q.getDocument=Q.enable=Q.copyTo=Q.collectClassNamesFromSubtree=void 0;var j=Te(V(3276)),be=ne(V(2049)),ce=V(2049),ye=ne(V(7923)),xe=Te(V(6126)),Ee=Te(V(1512)),Ce=Te(V(6156)),Se=Te(V(8887)),Oe=Te(V(7483)),De=Te(V(2461)),Ue=Te(V(42)),$e=Te(V(6341)),Fe=Te(V(3063)),Xe=Te(V(3783)),Ye=Te(V(1352)),He=Te(V(8933)),Je=Te(V(8099)),pt=V(5286),It=V(316);Q.collectClassNamesFromSubtree=function(it){var dt=ce.getNode(it.nodeId),lt=[];return nt(dt,function(ft){if(ft.nodeType===1){var xt=ft.getAttribute("class");if(xt)for(var ht=0,Vt=xt.split(/\s+/);ht<Vt.length;ht++){var st=Vt[ht];lt.push(st)}}}),{classNames:Ue.default(lt)}},Q.copyTo=function(it){var dt=it.nodeId,lt=it.targetNodeId,ft=ce.getNode(dt),xt=ce.getNode(lt),ht=ft.cloneNode(!0);xt.appendChild(ht)},Q.enable=function(){xe.default.observe(),be.clear()},Q.getDocument=function(){return{root:be.wrap(document,{depth:2})}},Q.getOuterHTML=function(it){return{outerHTML:ce.getNode(it.nodeId).outerHTML}},Q.moveTo=function(it){var dt=it.nodeId,lt=it.targetNodeId,ft=ce.getNode(dt);ce.getNode(lt).appendChild(ft)};var At=new Map;function bt(it){for(var dt=[it],lt=it.parentNode;lt&&(dt.push(lt),!(xt=ce.getNodeId(lt)));)lt=lt.parentNode;for(;dt.length;){var ft=dt.pop(),xt=ce.getNodeId(ft);j.default.trigger("DOM.setChildNodes",{parentId:xt,nodes:be.getChildNodes(ft,1)})}return ce.getNodeId(it)}Q.performSearch=function(it){var dt=Fe.default(it.query),lt=[];try{lt=Je.default(lt,Ye.default(document.querySelectorAll(dt)))}catch{}try{lt=Je.default(lt,He.default(dt))}catch{}nt(document,function(xt){var ht=xt.nodeType;if(ht===1){var Vt=xt.localName;if($e.default("<"+Vt+" ",dt)||$e.default("</"+Vt+">",dt))return void lt.push(xt);var st=[];Xe.default(xt.attributes,function(Mn){var on=Mn.name,an=Mn.value;return st.push(on,an)});for(var $t=0,ln=st.length;$t<ln;$t++)if($e.default(Fe.default(st[$t]),dt)){lt.push(xt);break}}else ht===3&&$e.default(Fe.default(xt.nodeValue),dt)&&lt.push(xt)});var ft=It.createId();return At.set(ft,lt),{searchId:ft,resultCount:lt.length}},Q.getSearchResults=function(it){var dt=it.searchId,lt=it.fromIndex,ft=it.toIndex,xt=At.get(dt).slice(lt,ft);return{nodeIds:De.default(xt,function(ht){var Vt=ce.getNodeId(ht);return Vt||bt(ht)})}},Q.pushNodesToFrontend=bt,Q.discardSearchResults=function(it){At.delete(it.searchId)},Q.pushNodesByBackendIdsToFrontend=function(it){return{nodeIds:it.backendNodeIds}},Q.removeNode=function(it){var dt=ce.getNode(it.nodeId);Ee.default(dt).remove()},Q.requestChildNodes=function(it){var dt=it.nodeId,lt=it.depth,ft=lt===void 0?1:lt,xt=ce.getNode(dt);j.default.trigger("DOM.setChildNodes",{parentId:dt,nodes:be.getChildNodes(xt,ft)})},Q.requestNode=function(it){var dt=ye.getObj(it.objectId);return{nodeId:ce.getNodeId(dt)}},Q.resolveNode=function(it){var dt=ce.getNode(it.nodeId);return{object:ye.wrap(dt)}},Q.setAttributesAsText=function(it){var dt,lt=it.name,ft=it.text,xt=it.nodeId,ht=ce.getNode(xt);lt&&ht.removeAttribute(lt),Ee.default(ht).attr((dt="<div "+(dt=ft)+"></div>",Oe.default.parse(dt)[0].attrs))},Q.setAttributeValue=function(it){var dt=it.nodeId,lt=it.name,ft=it.value;ce.getNode(dt).setAttribute(lt,ft)};var rt=[];function nt(it,dt){for(var lt=be.filterNodes(it.childNodes),ft=0,xt=lt.length;ft<xt;ft++){var ht=lt[ft];dt(ht),nt(ht,dt)}}Q.setInspectedNode=function(it){var dt=ce.getNode(it.nodeId);rt.unshift(dt),rt.length>5&&rt.pop();for(var lt=0;lt<5;lt++)pt.setGlobal("$"+lt,rt[lt])},Q.setNodeValue=function(it){var dt=it.nodeId,lt=it.value;ce.getNode(dt).nodeValue=lt},Q.setOuterHTML=function(it){var dt=it.nodeId,lt=it.outerHTML;ce.getNode(dt).outerHTML=lt},Q.getDOMNodeId=function(it){var dt=it.node;return{nodeId:be.getOrCreateNodeId(dt)}},xe.default.on("attributes",function(it,dt){var lt=ce.getNodeId(it);if(lt){var ft=it.getAttribute(dt);Ce.default(ft)?j.default.trigger("DOM.attributeRemoved",{nodeId:lt,name:dt}):j.default.trigger("DOM.attributeModified",{nodeId:lt,name:dt,value:ft})}}),xe.default.on("childList",function(it,dt,lt){var ft=ce.getNodeId(it);if(ft){if(dt=be.filterNodes(dt),lt=be.filterNodes(lt),!Se.default(dt)){Mn();for(var xt=0,ht=dt.length;xt<ht;xt++){var Vt=dt[xt],st=be.getPreviousNode(Vt),$t=st?ce.getNodeId(st):0,ln={node:be.wrap(Vt,{depth:0}),parentNodeId:ft,previousNodeId:$t};j.default.trigger("DOM.childNodeInserted",ln)}}if(!Se.default(lt))for(xt=0,ht=lt.length;xt<ht;xt++){if(Vt=lt[xt],!ce.getNodeId(Vt)){Mn();break}j.default.trigger("DOM.childNodeRemoved",{nodeId:ce.getNodeId(Vt),parentNodeId:ft})}}function Mn(){j.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:be.wrap(it,{depth:0}).childNodeCount,nodeId:ft})}}),xe.default.on("characterData",function(it){var dt=ce.getNodeId(it);dt&&j.default.trigger("DOM.characterDataModified",{characterData:it.nodeValue,nodeId:dt})})},2139:function(q,Q,V){var de=this&&this.__spreadArrays||function(){for(var De=0,Ue=0,$e=arguments.length;Ue<$e;Ue++)De+=arguments[Ue].length;var Fe=Array(De),Xe=0;for(Ue=0;Ue<$e;Ue++)for(var Ye=arguments[Ue],He=0,Je=Ye.length;He<Je;He++,Xe++)Fe[Xe]=Ye[He];return Fe},he=this&&this.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getResponseBody=Q.enable=Q.getCookies=Q.deleteCookies=void 0;var ne=he(V(4331)),Te=he(V(3783)),j=he(V(1420)),be=he(V(5031)),ce=he(V(8763)),ye=he(V(8740)),xe=he(V(6341)),Ee=V(2636),Ce=he(V(3276));Q.deleteCookies=function(De){be.default(De.name)},Q.getCookies=function(){var De=[],Ue=document.cookie;return ne.default(Ue)!==""&&Te.default(Ue.split(";"),function($e){$e=$e.split("=");var Fe=ne.default($e.shift());$e=j.default($e.join("=")),De.push({name:Fe,value:$e})}),{cookies:De}};var Se=new Map;function Oe(De){return!xe.default(De,"__chobitsu-hide__=true")}Q.enable=ce.default(function(){var De=window.XMLHttpRequest.prototype,Ue=De.send,$e=De.open,Fe=De.setRequestHeader;De.open=function(He,Je){if(!Oe(Je))return $e.apply(this,arguments);var pt=this,It=pt.chobitsuRequest=new Ee.XhrRequest(pt,He,Je);It.on("send",function(At,bt){var rt={method:bt.method,url:bt.url,headers:bt.reqHeaders};bt.data&&(rt.postData=bt.data),Ce.default.trigger("Network.requestWillBeSent",{requestId:At,type:"XHR",request:rt,timestamp:bt.time/1e3})}),It.on("headersReceived",function(At,bt){Ce.default.trigger("Network.responseReceivedExtraInfo",{requestId:At,blockedCookies:[],headers:bt.resHeaders})}),It.on("done",function(At,bt){Ce.default.trigger("Network.responseReceived",{requestId:At,type:"XHR",response:{status:bt.status},timestamp:bt.time/1e3}),Se.set(At,bt.resTxt),Ce.default.trigger("Network.loadingFinished",{requestId:At,encodedDataLength:bt.size,timestamp:bt.time/1e3})}),pt.addEventListener("readystatechange",function(){switch(pt.readyState){case 2:return It.handleHeadersReceived();case 4:return It.handleDone()}}),$e.apply(this,arguments)},De.send=function(He){var Je=this.chobitsuRequest;Je&&Je.handleSend(He),Ue.apply(this,arguments)},De.setRequestHeader=function(He,Je){var pt=this.chobitsuRequest;pt&&pt.handleReqHeadersSet(He,Je),Fe.apply(this,arguments)};var Xe=!1;if(window.fetch&&(Xe=ye.default(window.fetch)),!Xe&&navigator.serviceWorker&&(Xe=!0),Xe){var Ye=window.fetch;window.fetch=function(){for(var He=[],Je=0;Je<arguments.length;Je++)He[Je]=arguments[Je];var pt=new(Ee.FetchRequest.bind.apply(Ee.FetchRequest,de([void 0],He)));pt.on("send",function(At,bt){var rt={method:bt.method,url:bt.url,headers:bt.reqHeaders};bt.data&&(rt.postData=bt.data),Ce.default.trigger("Network.requestWillBeSent",{requestId:At,type:"Fetch",request:rt,timestamp:bt.time/1e3})}),pt.on("done",function(At,bt){Ce.default.trigger("Network.responseReceived",{requestId:At,type:"Fetch",response:{status:bt.status,headers:bt.resHeaders},timestamp:bt.time/1e3}),Se.set(At,bt.resTxt),Ce.default.trigger("Network.loadingFinished",{requestId:At,encodedDataLength:bt.size,timestamp:bt.time/1e3})});var It=Ye.apply(void 0,He);return pt.send(It),It}}}),Q.getResponseBody=function(De){return{base64Encoded:!1,body:Se.get(De.requestId)}}},8689:function(q,Q,V){var de=this&&this.__createBinding||(Object.create?function(ht,Vt,st,$t){$t===void 0&&($t=st),Object.defineProperty(ht,$t,{enumerable:!0,get:function(){return Vt[st]}})}:function(ht,Vt,st,$t){$t===void 0&&($t=st),ht[$t]=Vt[st]}),he=this&&this.__setModuleDefault||(Object.create?function(ht,Vt){Object.defineProperty(ht,"default",{enumerable:!0,value:Vt})}:function(ht,Vt){ht.default=Vt}),ne=this&&this.__importStar||function(ht){if(ht&&ht.__esModule)return ht;var Vt={};if(ht!=null)for(var st in ht)st!=="default"&&Object.hasOwnProperty.call(ht,st)&&de(Vt,ht,st);return he(Vt,ht),Vt},Te=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.setInspectMode=Q.setShowViewportSizeOnResize=Q.hideHighlight=Q.highlightNode=Q.disable=Q.enable=void 0;var j,be,ce=V(2049),ye=V(7935),xe=Te(V(1512)),Ee=Te(V(8613)),Ce=Te(V(9956)),Se=Te(V(642)),Oe=Te(V(4193)),De=Te(V(3276)),Ue=Te(V(7715)),$e=ne(V(7923)),Fe=!1,Xe=!1;function Ye(ht){var Vt,st=ht.nodeId,$t=ht.highlightConfig,ln=ht.objectId;st&&(Vt=ce.getNode(st)),ln&&(Vt=$e.getObj(ln)),Vt.nodeType!==1&&Vt.nodeType!==3||(Oe.default($t,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),j.highlight(Vt,$t))}function He(){j.hide()}Q.enable=function(){if(!Xe){Fe||(Se.default(V(9410)),Fe=!0);var ht=Ee.default("div",{class:"__chobitsu-hide__"});be=xe.default(ht),document.documentElement.appendChild(ht),j=new Ue.default(ht),window.addEventListener("resize",lt),Xe=!0}},Q.disable=function(){j.destroy(),be.remove(),window.removeEventListener("resize",lt),Xe=!1},Q.highlightNode=Ye,Q.hideHighlight=He;var Je=!1;Q.setShowViewportSizeOnResize=function(ht){Je=ht.show};var pt={},It="none";function At(ht){if(Ce.default()){var Vt=ht.touches[0]||ht.changedTouches[0];return document.elementFromPoint(Vt.pageX,Vt.pageY)}return document.elementFromPoint(ht.clientX,ht.clientY)}Q.setInspectMode=function(ht){pt=ht.highlightConfig,It=ht.mode};var bt=-1;function rt(ht){if(It!=="none"){var Vt=At(ht);if(Vt&&ce.isValidNode(Vt)){var st=ce.getNodeId(Vt);st||(st=ye.pushNodesToFrontend(Vt)),Ye({nodeId:st,highlightConfig:pt}),st!==bt&&(De.default.trigger("Overlay.nodeHighlightRequested",{nodeId:st}),bt=st)}}}function nt(ht){if(It!=="none"){ht.preventDefault(),ht.stopImmediatePropagation();var Vt=At(ht);De.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:ce.getNodeId(Vt)}),bt=-1,He()}}function it(ht,Vt){document.documentElement.addEventListener(ht,Vt,!0)}Ce.default()?(it("touchstart",rt),it("touchmove",rt),it("touchend",nt)):(it("mousemove",rt),it("mouseout",function(){It!=="none"&&He()}),it("click",nt));var dt=Ee.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function lt(){Je&&(xt.text(window.innerWidth+"px \xD7 "+window.innerHeight+"px"),ft?clearTimeout(ft):document.documentElement.appendChild(dt),ft=setTimeout(function(){xt.remove(),ft=null},1e3))}var ft,xt=xe.default(dt)},9119:function(q,Q,V){var de=this&&this.__importDefault||function(ye){return ye&&ye.__esModule?ye:{default:ye}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getTrustTokens=Q.clearDataForOrigin=Q.getUsageAndQuota=void 0;var he=de(V(3783)),ne=de(V(5031)),Te=de(V(615)),j=V(2139),be=Te.default("local"),ce=Te.default("session");Q.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},Q.clearDataForOrigin=function(ye){var xe=ye.storageTypes.split(",");he.default(xe,function(Ee){if(Ee==="cookies"){var Ce=j.getCookies().cookies;he.default(Ce,function(Se){var Oe=Se.name;return ne.default(Oe)})}else Ee==="local_storage"&&(be.clear(),ce.clear())})},Q.getTrustTokens=function(){return{tokens:[]}}},3276:function(q,Q,V){var de,he=this&&this.__extends||(de=function(j,be){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,ye){ce.__proto__=ye}||function(ce,ye){for(var xe in ye)ye.hasOwnProperty(xe)&&(ce[xe]=ye[xe])},de(j,be)},function(j,be){function ce(){this.constructor=j}de(j,be),j.prototype=be===null?Object.create(be):(ce.prototype=be.prototype,new ce)}),ne=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=function(j){function be(){return j!==null&&j.apply(this,arguments)||this}return he(be,j),be.prototype.trigger=function(ce,ye){this.emit("message",JSON.stringify({method:ce,params:ye}))},be}(ne(V(1443)).default);Q.default=new Te},5286:function(q,Q,V){var de=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.setGlobal=void 0;var he=de(V(6768)),ne=de(V(2327)),Te=de(V(1352)),j=de(V(2533)),be=de(V(8933)),ce=de(V(3783)),ye={copy:function(xe){he.default(xe)||(xe=JSON.stringify(xe,null,2)),ne.default(xe)},$:function(xe){return document.querySelector(xe)},$$:function(xe){return Te.default(document.querySelectorAll(xe))},$x:function(xe){return be.default(xe)},keys:j.default};Q.setGlobal=function(xe,Ee){ye[xe]=Ee},Q.default=function(xe){var Ee;ce.default(ye,function(Ce,Se){window[Se]||(window[Se]=Ce)});try{Ee=eval.call(window,"("+xe+")")}catch{Ee=eval.call(window,xe)}return ce.default(ye,function(Ce,Se){window[Se]&&window[Se]===Ce&&delete window[Se]}),Ee}},6126:function(q,Q,V){var de,he=this&&this.__extends||(de=function(ce,ye){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,Ee){xe.__proto__=Ee}||function(xe,Ee){for(var Ce in Ee)Ee.hasOwnProperty(Ce)&&(xe[Ce]=Ee[Ce])},de(ce,ye)},function(ce,ye){function xe(){this.constructor=ce}de(ce,ye),ce.prototype=ye===null?Object.create(ye):(xe.prototype=ye.prototype,new xe)}),ne=this&&this.__importDefault||function(ce){return ce&&ce.__esModule?ce:{default:ce}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(3783)),be=function(ce){function ye(){var xe=ce.call(this)||this;return xe.observer=new MutationObserver(function(Ee){j.default(Ee,function(Ce){return xe.handleMutation(Ce)})}),xe}return he(ye,ce),ye.prototype.observe=function(){var xe=this.observer;xe.disconnect(),xe.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},ye.prototype.handleMutation=function(xe){xe.type==="attributes"?this.emit("attributes",xe.target,xe.attributeName):xe.type==="childList"?this.emit("childList",xe.target,xe.addedNodes,xe.removedNodes):xe.type==="characterData"&&this.emit("characterData",xe.target)},ye}(Te.default);Q.default=new be},2049:function(q,Q,V){var de=this&&this.__importDefault||function(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getNode=Q.isValidNode=Q.filterNodes=Q.getPreviousNode=Q.getChildNodes=Q.wrap=Q.getNodeId=Q.clear=Q.getOrCreateNodeId=void 0;var he=de(V(2461)),ne=de(V(5972)),Te=de(V(3783)),j=de(V(4331)),be=de(V(6341)),ce=de(V(6329)),ye=V(316),xe=new Map,Ee=new Map,Ce=1;function Se(Fe){var Xe=Ee.get(Fe);return Xe||(Xe=Ce++,Ee.set(Fe,Xe),xe.set(Xe,Fe),Xe)}function Oe(Fe,Xe){var Ye=(Xe===void 0?{}:Xe).depth,He=Ye===void 0?1:Ye,Je=Se(Fe),pt={nodeName:Fe.nodeName,nodeType:Fe.nodeType,localName:Fe.localName||"",nodeValue:Fe.nodeValue||"",nodeId:Je,backendNodeId:Je};if(Fe.parentNode&&(pt.parentId=Se(Fe.parentNode)),Fe.nodeType===10)return ce.default(pt,{publicId:"",systemId:""});if(Fe.attributes){var It=[];Te.default(Fe.attributes,function(rt){var nt=rt.name,it=rt.value;return It.push(nt,it)}),pt.attributes=It}var At=Ue(Fe.childNodes);pt.childNodeCount=At.length;var bt=pt.childNodeCount===1&&At[0].nodeType===3;return(He>0||bt)&&(pt.children=De(Fe,He)),pt}function De(Fe,Xe){var Ye=Ue(Fe.childNodes);return he.default(Ye,function(He){return Oe(He,{depth:Xe-1})})}function Ue(Fe){return ne.default(Fe,function(Xe){return $e(Xe)})}function $e(Fe){if(Fe.nodeType===1){var Xe=Fe.getAttribute("class")||"";if(be.default(Xe,"__chobitsu-hide__")||be.default(Xe,"html2canvas-container"))return!1}var Ye=!(Fe.nodeType===3&&j.default(Fe.nodeValue||"")==="");return Ye&&Fe.parentNode?$e(Fe.parentNode):Ye}Q.getOrCreateNodeId=Se,Q.clear=function(){xe.clear(),Ee.clear()},Q.getNodeId=function(Fe){return Ee.get(Fe)},Q.wrap=Oe,Q.getChildNodes=De,Q.getPreviousNode=function(Fe){var Xe=Fe.previousSibling;if(Xe){for(;!$e(Xe)&&Xe.previousSibling;)Xe=Xe.previousSibling;return Xe&&$e(Xe)?Xe:void 0}},Q.filterNodes=Ue,Q.isValidNode=$e,Q.getNode=function(Fe){var Xe=xe.get(Fe);if(!Xe||Xe.nodeType===10)throw ye.createErr(-32e3,"Could not find node with given id");return Xe}},7923:function(q,Q,V){var de=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getProperties=Q.releaseObj=Q.getObj=Q.wrap=Q.clear=void 0;var he=de(V(3367)),ne=de(V(6156)),Te=de(V(6472)),j=de(V(4777)),be=de(V(9833)),ce=de(V(2749)),ye=de(V(3708)),xe=de(V(7470)),Ee=de(V(1754)),Ce=de(V(3085)),Se=de(V(2533)),Oe=de(V(300)),De=de(V(1116)),Ue=de(V(8740)),$e=de(V(415)),Fe=de(V(9804)),Xe=de(V(6257)),Ye=new Map,He=new Map,Je=new Map,pt=new Map,It=1;function At(ht,Vt){var st=He.get(ht);return st||(st=JSON.stringify({injectedScriptId:0,id:It++}),He.set(ht,st),Ye.set(st,ht),Je.set(st,Vt),st)}function bt(ht,Vt){var st=Vt===void 0?{}:Vt,$t=st.generatePreview,ln=$t!==void 0&&$t,Mn=st.self,on=Mn===void 0?ht:Mn,an=lt(ht),Xt=an.type,Rt=an.subtype;return Xt==="undefined"?an:Xt==="string"||Xt==="boolean"||Rt==="null"?(an.value=ht,an):(an.description=dt(ht,on),Xt==="number"?(an.value=ht,an):Xt==="symbol"?(an.objectId=At(ht,on),an):(an.className=Xt==="function"?"Function":Rt==="array"?"Array":Rt==="map"?"Map":Rt==="set"?"Set":Rt==="regexp"?"RegExp":Rt==="error"?ht.name:Ce.default(ht,!1),ln&&(an.preview=nt(ht,on)),an.objectId=At(ht,on),an))}function rt(ht){return Ye.get(ht)}Q.clear=function(){Ye.clear(),He.clear(),Je.clear()},Q.wrap=bt,Q.getObj=rt,Q.releaseObj=function(ht){var Vt=rt(ht);He.delete(Vt),Je.delete(ht),Ye.delete(ht)},Q.getProperties=function(ht){for(var Vt=ht.accessorPropertiesOnly,st=ht.objectId,$t=ht.ownProperties,ln=ht.generatePreview,Mn=[],on={prototype:!$t,unenumerable:!0,symbol:!Vt},an=Ye.get(st),Xt=Je.get(st),Rt=De.default(an,on),en=$e.default(an),hn=0,vn=Rt.length;hn<vn;hn++){var Pn=Rt[hn],Pt=void 0;try{Pt=Xt[Pn]}catch{}var Dt={name:he.default(Pn),isOwn:Xe.default(Xt,Pn)},rn=Object.getOwnPropertyDescriptor(an,Pn);if(!rn&&en&&(rn=Object.getOwnPropertyDescriptor(en,Pn)),rn){if(Vt&&!rn.get&&!rn.set)continue;Dt.configurable=rn.configurable,Dt.enumerable=rn.enumerable,Dt.writable=rn.writable,rn.get&&(Dt.get=bt(rn.get)),rn.set&&(Dt.set=bt(rn.set))}en&&Xe.default(en,Pn)&&Dt.enumerable&&(Dt.isOwn=!0);var bn=!0;!Dt.isOwn&&Dt.get&&(bn=!1),bn&&(Fe.default(Pn)?(Dt.symbol=bt(Pn),Dt.value={type:"undefined"}):Dt.value=bt(Pt,{generatePreview:ln})),Vt&&j.default(Pt)&&Ue.default(Pt)||Mn.push(Dt)}if(!en||$t||xt(an)||Mn.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:Xe.default(an,"__proto__"),value:bt(en,{self:Xt}),writable:!1}),Vt)return{result:Mn};var En=[];if(en&&!xt(an)&&En.push({name:"[[Prototype]]",value:bt(en,{self:Xt})}),ye.default(an)||xe.default(an)){var zn=function($n){for(var xn=pt.get($n),wn=xn?rt(xn):[],Sn=$n.entries(),Jn=Sn.next().value;Jn;)ye.default($n)?wn.push(new ft(Jn[1],Jn[0])):wn.push(new ft(Jn[1])),Jn=Sn.next().value;return wn}(an);En.push({name:"[[Entries]]",value:bt(zn)})}return{internalProperties:En,result:Mn}};function nt(ht,Vt){Vt===void 0&&(Vt=ht);var st=lt(ht);st.description=dt(ht,Vt);var $t=!1,ln=[],Mn=Se.default(ht),on=Mn.length;on>5&&(on=5,$t=!0);for(var an=0;an<on;an++){var Xt=Mn[an];ln.push(it(Xt,Vt[Xt]))}if(st.properties=ln,ye.default(ht)){for(var Rt=[],en=(an=0,ht.keys()),hn=en.next().value;hn;){if(an>5){$t=!0;break}Rt.push({key:nt(hn),value:nt(ht.get(hn))}),an++,hn=en.next().value}st.entries=Rt}else if(xe.default(ht)){var vn=[],Pn=(an=0,ht.keys());for(hn=Pn.next().value;hn;){if(an>5){$t=!0;break}vn.push({value:nt(hn)}),an++,hn=Pn.next().value}st.entries=vn}return st.overflow=$t,st}function it(ht,Vt){var st=lt(Vt);st.name=ht;var $t,ln=st.subtype;return $t=st.type==="object"?ln==="null"?"null":ln==="array"?"Array("+Vt.length+")":ln==="map"?"Map("+Vt.size+")":ln==="set"?"Set("+Vt.size+")":Ce.default(Vt,!1):he.default(Vt),st.value=$t,st}function dt(ht,Vt){Vt===void 0&&(Vt=ht);var st=lt(ht),$t=st.type,ln=st.subtype;return $t==="string"?ht:$t==="number"||$t==="symbol"?he.default(ht):$t==="function"?Oe.default(ht):ln==="array"?"Array("+ht.length+")":ln==="map"?"Map("+Vt.size+")":ln==="set"?"Set("+Vt.size+")":ln==="regexp"?he.default(ht):ln==="error"?ht.stack:ln==="internal#entry"?ht.name?'{"'+he.default(ht.name)+'" => "'+he.default(ht.value)+'"}':'"'+he.default(ht.value)+'"':Ce.default(ht,!1)}function lt(ht){var Vt=typeof ht,st="object";if(ht instanceof ft)st="internal#entry";else if(ne.default(ht))st="null";else if(Te.default(ht))st="array";else if(Ee.default(ht))st="regexp";else if(ce.default(ht))st="error";else if(ye.default(ht))st="map";else if(xe.default(ht))st="set";else try{be.default(ht)&&(st="node")}catch{}return{type:Vt,subtype:st}}var ft=function(ht,Vt){Vt&&(this.name=Vt),this.value=ht};function xt(ht){return ht instanceof ft||!!(ht[0]&&ht[0]instanceof ft)}},2636:function(q,Q,V){var de,he=this&&this.__extends||(de=function(nt,it){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,lt){dt.__proto__=lt}||function(dt,lt){for(var ft in lt)lt.hasOwnProperty(ft)&&(dt[ft]=lt[ft])},de(nt,it)},function(nt,it){function dt(){this.constructor=nt}de(nt,it),nt.prototype=it===null?Object.create(it):(dt.prototype=it.prototype,new dt)}),ne=this&&this.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.fullUrl=Q.FetchRequest=Q.XhrRequest=void 0;var Te=ne(V(1443)),j=ne(V(6768)),be=ne(V(9702)),ce=ne(V(6334)),ye=ne(V(8887)),xe=ne(V(4331)),Ee=ne(V(8847)),Ce=ne(V(3783)),Se=ne(V(6930)),Oe=ne(V(3875)),De=V(316),Ue=function(nt){function it(dt,lt,ft){var xt=nt.call(this)||this;return xt.xhr=dt,xt.reqHeaders={},xt.method=lt,xt.url=pt(ft),xt.id=De.createId(),xt}return he(it,nt),it.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},it.prototype.handleSend=function(dt){j.default(dt)||(dt=""),dt={name:It(this.url),url:this.url,data:dt,time:Ee.default(),reqHeaders:this.reqHeaders,method:this.method},ye.default(this.reqHeaders)||(dt.reqHeaders=this.reqHeaders),this.emit("send",this.id,dt)},it.prototype.handleReqHeadersSet=function(dt,lt){dt&&lt&&(this.reqHeaders[dt]=lt)},it.prototype.handleHeadersReceived=function(){var dt=this.xhr,lt=At(dt.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:lt.type,subType:lt.subType,size:He(dt,!0,this.url),time:Ee.default(),resHeaders:Ye(dt)})},it.prototype.handleDone=function(){var dt,lt,ft,xt=this,ht=this.xhr,Vt=ht.responseType,st="",$t=function(){xt.emit("done",xt.id,{status:ht.status,size:He(ht,!1,xt.url),time:Ee.default(),resTxt:st})},ln=At(ht.getResponseHeader("Content-Type")||"");Vt!=="blob"||ln.type!=="text"&&ln.subType!=="javascript"&&ln.subType!=="json"?(Vt!==""&&Vt!=="text"||(st=ht.responseText),Vt==="json"&&(st=JSON.stringify(ht.response)),$t()):(dt=ht.response,lt=function(Mn,on){on&&(st=on),$t()},(ft=new FileReader).onload=function(){lt(null,ft.result)},ft.onerror=function(Mn){lt(Mn)},ft.readAsText(dt))},it}(Te.default);Q.XhrRequest=Ue;var $e=function(nt){function it(dt,lt){lt===void 0&&(lt={});var ft=nt.call(this)||this;return dt instanceof window.Request&&(dt=dt.url),ft.url=pt(dt),ft.id=De.createId(),ft.options=lt,ft.reqHeaders=lt.headers||{},ft.method=lt.method||"GET",ft}return he(it,nt),it.prototype.send=function(dt){var lt=this,ft=this.options,xt=j.default(ft.body)?ft.body:"";this.emit("send",this.id,{name:It(this.url),url:this.url,data:xt,reqHeaders:this.reqHeaders,time:Ee.default(),method:this.method}),dt.then(function(ht){var Vt=At((ht=ht.clone()).headers.get("Content-Type"));return ht.text().then(function(st){var $t={type:Vt.type,subType:Vt.subType,time:Ee.default(),size:Fe(ht,st),resTxt:st,resHeaders:Xe(ht),status:ht.status};ye.default(lt.reqHeaders)||($t.reqHeaders=lt.reqHeaders),lt.emit("done",lt.id,$t)}),ht})},it}(Te.default);function Fe(nt,it){var dt=nt.headers.get("Content-length");return dt?Oe.default(dt):rt(it)}function Xe(nt){var it={};return nt.headers.forEach(function(dt,lt){return it[lt]=dt}),it}function Ye(nt){var it=nt.getAllResponseHeaders().split(`
`),dt={};return Ce.default(it,function(lt){if((lt=xe.default(lt))!==""){var ft=lt.split(":",2),xt=ft[0],ht=ft[1];dt[xt]=xe.default(ht)}}),dt}function He(nt,it,dt){var lt=0;function ft(){if(!it){var xt=nt.responseType,ht="";xt!==""&&xt!=="text"||(ht=nt.responseText),ht&&(lt=rt(ht))}}if(function(xt){return!Se.default(xt,bt)}(dt))ft();else try{lt=Oe.default(nt.getResponseHeader("Content-Length"))}catch{ft()}return lt===0&&ft(),lt}Q.FetchRequest=$e;var Je=document.createElement("a");function pt(nt){return Je.href=nt,Je.protocol+"//"+Je.host+Je.pathname+Je.search+Je.hash}function It(nt){var it=be.default(nt.split("/"));return it.indexOf("?")>-1&&(it=xe.default(it.split("?")[0])),it===""&&(it=new ce.default(nt).hostname),it}function At(nt){if(!nt)return{type:"unknown",subType:"unknown"};var it=nt.split(";")[0].split("/");return{type:it[0],subType:be.default(it)}}Q.fullUrl=pt;var bt=window.location.origin;function rt(nt){var it=encodeURIComponent(nt).match(/%[89ABab]/g);return nt.length+(it?it.length:0)}},316:function(q,Q,V){var de,he=this&&this.__extends||(de=function($e,Fe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Xe,Ye){Xe.__proto__=Ye}||function(Xe,Ye){for(var He in Ye)Ye.hasOwnProperty(He)&&(Xe[He]=Ye[He])},de($e,Fe)},function($e,Fe){function Xe(){this.constructor=$e}de($e,Fe),$e.prototype=Fe===null?Object.create(Fe):(Xe.prototype=Fe.prototype,new Xe)}),ne=this&&this.__awaiter||function($e,Fe,Xe,Ye){return new(Xe||(Xe=Promise))(function(He,Je){function pt(bt){try{At(Ye.next(bt))}catch(rt){Je(rt)}}function It(bt){try{At(Ye.throw(bt))}catch(rt){Je(rt)}}function At(bt){var rt;bt.done?He(bt.value):(rt=bt.value,rt instanceof Xe?rt:new Xe(function(nt){nt(rt)})).then(pt,It)}At((Ye=Ye.apply($e,Fe||[])).next())})},Te=this&&this.__generator||function($e,Fe){var Xe,Ye,He,Je,pt={label:0,sent:function(){if(1&He[0])throw He[1];return He[1]},trys:[],ops:[]};return Je={next:It(0),throw:It(1),return:It(2)},typeof Symbol=="function"&&(Je[Symbol.iterator]=function(){return this}),Je;function It(At){return function(bt){return function(rt){if(Xe)throw new TypeError("Generator is already executing.");for(;pt;)try{if(Xe=1,Ye&&(He=2&rt[0]?Ye.return:rt[0]?Ye.throw||((He=Ye.return)&&He.call(Ye),0):Ye.next)&&!(He=He.call(Ye,rt[1])).done)return He;switch(Ye=0,He&&(rt=[2&rt[0],He.value]),rt[0]){case 0:case 1:He=rt;break;case 4:return pt.label++,{value:rt[1],done:!1};case 5:pt.label++,Ye=rt[1],rt=[0];continue;case 7:rt=pt.ops.pop(),pt.trys.pop();continue;default:if(He=pt.trys,!((He=He.length>0&&He[He.length-1])||rt[0]!==6&&rt[0]!==2)){pt=0;continue}if(rt[0]===3&&(!He||rt[1]>He[0]&&rt[1]<He[3])){pt.label=rt[1];break}if(rt[0]===6&&pt.label<He[1]){pt.label=He[1],He=rt;break}if(He&&pt.label<He[2]){pt.label=He[2],pt.ops.push(rt);break}He[2]&&pt.ops.pop(),pt.trys.pop();continue}rt=Fe.call($e,pt)}catch(nt){rt=[6,nt],Ye=0}finally{Xe=He=0}if(5&rt[0])throw rt[1];return{value:rt[0]?rt[1]:void 0,done:!0}}([At,bt])}}},j=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getBase64Content=Q.getTextContent=Q.getOrigin=Q.getUrl=Q.createErr=Q.ErrorWithCode=Q.getAbsoluteUrl=Q.createId=void 0;var be=j(V(5229)),ce=j(V(1216)),ye=j(V(6930)),xe=j(V(6334)),Ee=j(V(1792)),Ce=j(V(9669)),Se=ce.default(1e3,9999)+".";Q.createId=function(){return be.default(Se)},Q.getAbsoluteUrl=function($e){var Fe=document.createElement("a");return Fe.href=$e,Fe.href};var Oe=function($e){function Fe(Xe,Ye){var He=this.constructor,Je=$e.call(this,Ye)||this;return Je.code=Xe,Object.setPrototypeOf(Je,He.prototype),Je}return he(Fe,$e),Fe}(Error);function De($e,Fe,Xe){return Xe===void 0&&(Xe=""),ne(this,void 0,void 0,function(){var Ye;return Te(this,function(He){switch(He.label){case 0:return He.trys.push([0,2,,8]),(Ye=new xe.default($e)).setQuery("__chobitsu-hide__","true"),[4,Ce.default.get(Ye.toString(),{responseType:Fe})];case 1:return[2,He.sent().data];case 2:if(He.sent(),!Xe)return[3,7];He.label=3;case 3:return He.trys.push([3,6,,7]),[4,Ce.default.get(Ue(Xe,$e),{responseType:Fe})];case 4:return[4,He.sent().data];case 5:return[2,He.sent()];case 6:return He.sent(),[3,7];case 7:return[3,8];case 8:return[2,Fe==="arraybuffer"?new ArrayBuffer(0):""]}})})}function Ue($e,Fe){var Xe=new xe.default($e);return Xe.setQuery("url",Fe),Xe.setQuery("__chobitsu-hide__","true"),Xe.toString()}Q.ErrorWithCode=Oe,Q.createErr=function($e,Fe){return new Oe($e,Fe)},Q.getUrl=function(){var $e=location.href;return ye.default($e,"about:")?parent.location.href:$e},Q.getOrigin=function(){var $e=location.origin;return $e==="null"?parent.location.origin:$e},Q.getTextContent=function($e,Fe){return Fe===void 0&&(Fe=""),ne(this,void 0,void 0,function(){return Te(this,function(Xe){switch(Xe.label){case 0:return[4,De($e,"text",Fe)];case 1:return[2,Xe.sent()]}})})},Q.getBase64Content=function($e,Fe){return Fe===void 0&&(Fe=""),ne(this,void 0,void 0,function(){var Xe;return Te(this,function(Ye){switch(Ye.label){case 0:return Xe=Ee.default,[4,De($e,"arraybuffer",Fe)];case 1:return[2,Xe.apply(void 0,[Ye.sent(),"base64"])]}})})}},9410:function(q,Q,V){(Q=V(3645)(!1)).push([q.id,`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}`,""]),q.exports=Q},3645:function(q){q.exports=function(Q){var V=[];return V.toString=function(){return this.map(function(de){var he=function(ne,Te){var j=ne[1]||"",be=ne[3];if(!be)return j;if(Te&&typeof btoa=="function"){var ce=(xe=be,Ee=btoa(unescape(encodeURIComponent(JSON.stringify(xe)))),Ce="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(Ee),"/*# ".concat(Ce," */")),ye=be.sources.map(function(Se){return"/*# sourceURL=".concat(be.sourceRoot||"").concat(Se," */")});return[j].concat(ye).concat([ce]).join(`
`)}var xe,Ee,Ce;return[j].join(`
`)}(de,Q);return de[2]?"@media ".concat(de[2]," {").concat(he,"}"):he}).join("")},V.i=function(de,he,ne){typeof de=="string"&&(de=[[null,de,""]]);var Te={};if(ne)for(var j=0;j<this.length;j++){var be=this[j][0];be!=null&&(Te[be]=!0)}for(var ce=0;ce<de.length;ce++){var ye=[].concat(de[ce]);ne&&Te[ye[0]]||(he&&(ye[2]?ye[2]="".concat(he," and ").concat(ye[2]):ye[2]=he),V.push(ye))}},V}},8384:function(q,Q,V){var de,he;/*!
 * Draggabilly v2.4.1
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */(function(ne,Te){de=[V(6131),V(4842)],he=function(j,be){return function(ce,ye,xe){function Ee(Fe,Xe){for(var Ye in Xe)Fe[Ye]=Xe[Ye];return Fe}function Ce(){}var Se=ce.jQuery;function Oe(Fe,Xe){this.element=typeof Fe=="string"?document.querySelector(Fe):Fe,Se&&(this.$element=Se(this.element)),this.options=Ee({},this.constructor.defaults),this.option(Xe),this._create()}var De=Oe.prototype=Object.create(xe.prototype);Oe.defaults={},De.option=function(Fe){Ee(this.options,Fe)};var Ue={relative:!0,absolute:!0,fixed:!0};function $e(Fe,Xe,Ye){return Ye=Ye||"round",Xe?Math[Ye](Fe/Xe)*Xe:Fe}return De._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=Ee({},this.position);var Fe=getComputedStyle(this.element);Ue[Fe.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},De.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},De.dispatchEvent=function(Fe,Xe,Ye){var He=[Xe].concat(Ye);this.emitEvent(Fe,He),this.dispatchJQueryEvent(Fe,Xe,Ye)},De.dispatchJQueryEvent=function(Fe,Xe,Ye){var He=ce.jQuery;if(He&&this.$element){var Je=He.Event(Xe);Je.type=Fe,this.$element.trigger(Je,Ye)}},De._getPosition=function(){var Fe=getComputedStyle(this.element),Xe=this._getPositionCoord(Fe.left,"width"),Ye=this._getPositionCoord(Fe.top,"height");this.position.x=isNaN(Xe)?0:Xe,this.position.y=isNaN(Ye)?0:Ye,this._addTransformPosition(Fe)},De._getPositionCoord=function(Fe,Xe){if(Fe.indexOf("%")!=-1){var Ye=ye(this.element.parentNode);return Ye?parseFloat(Fe)/100*Ye[Xe]:0}return parseInt(Fe,10)},De._addTransformPosition=function(Fe){var Xe=Fe.transform;if(Xe.indexOf("matrix")===0){var Ye=Xe.split(","),He=Xe.indexOf("matrix3d")===0?12:4,Je=parseInt(Ye[He],10),pt=parseInt(Ye[He+1],10);this.position.x+=Je,this.position.y+=pt}},De.onPointerDown=function(Fe,Xe){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",Fe,[Xe])},De.pointerDown=function(Fe,Xe){this.okayPointerDown(Fe)&&this.isEnabled?(this.pointerDownPointer={pageX:Xe.pageX,pageY:Xe.pageY},Fe.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Fe),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",Fe,[Xe])):this._pointerReset()},De.dragStart=function(Fe,Xe){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",Fe,[Xe]),this.animate())},De.measureContainment=function(){var Fe=this.getContainer();if(Fe){var Xe=ye(this.element),Ye=ye(Fe),He=this.element.getBoundingClientRect(),Je=Fe.getBoundingClientRect(),pt=Ye.borderLeftWidth+Ye.borderRightWidth,It=Ye.borderTopWidth+Ye.borderBottomWidth,At=this.relativeStartPosition={x:He.left-(Je.left+Ye.borderLeftWidth),y:He.top-(Je.top+Ye.borderTopWidth)};this.containSize={width:Ye.width-pt-At.x-Xe.width,height:Ye.height-It-At.y-Xe.height}}},De.getContainer=function(){var Fe=this.options.containment;if(Fe)return Fe instanceof HTMLElement?Fe:typeof Fe=="string"?document.querySelector(Fe):this.element.parentNode},De.onPointerMove=function(Fe,Xe,Ye){this.dispatchJQueryEvent("pointerMove",Fe,[Xe,Ye])},De.dragMove=function(Fe,Xe,Ye){if(this.isEnabled){var He=Ye.x,Je=Ye.y,pt=this.options.grid,It=pt&&pt[0],At=pt&&pt[1];He=$e(He,It),Je=$e(Je,At),He=this.containDrag("x",He,It),Je=this.containDrag("y",Je,At),He=this.options.axis=="y"?0:He,Je=this.options.axis=="x"?0:Je,this.position.x=this.startPosition.x+He,this.position.y=this.startPosition.y+Je,this.dragPoint.x=He,this.dragPoint.y=Je,this.dispatchEvent("dragMove",Fe,[Xe,Ye])}},De.containDrag=function(Fe,Xe,Ye){if(!this.options.containment)return Xe;var He=Fe=="x"?"width":"height",Je=$e(-this.relativeStartPosition[Fe],Ye,"ceil"),pt=this.containSize[He];return pt=$e(pt,Ye,"floor"),Math.max(Je,Math.min(pt,Xe))},De.onPointerUp=function(Fe,Xe){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",Fe,[Xe])},De.dragEnd=function(Fe,Xe){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",Fe,[Xe]))},De.animate=function(){if(this.isDragging){this.positionDrag();var Fe=this;requestAnimationFrame(function(){Fe.animate()})}},De.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},De.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},De.staticClick=function(Fe,Xe){this.dispatchEvent("staticClick",Fe,[Xe])},De.setPosition=function(Fe,Xe){this.position.x=Fe,this.position.y=Xe,this.setLeftTop()},De.enable=function(){this.isEnabled=!0},De.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},De.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},De._init=Ce,Se&&Se.bridget&&Se.bridget("draggabilly",Oe),Oe}(ne,j,be)}.apply(Q,de),he===void 0||(q.exports=he)})(window)},7158:function(q,Q,V){var de,he;(he=typeof(de=function(){function ne(){}var Te=ne.prototype;return Te.on=function(j,be){if(j&&be){var ce=this._events=this._events||{},ye=ce[j]=ce[j]||[];return ye.indexOf(be)==-1&&ye.push(be),this}},Te.once=function(j,be){if(j&&be){this.on(j,be);var ce=this._onceEvents=this._onceEvents||{};return(ce[j]=ce[j]||{})[be]=!0,this}},Te.off=function(j,be){var ce=this._events&&this._events[j];if(ce&&ce.length){var ye=ce.indexOf(be);return ye!=-1&&ce.splice(ye,1),this}},Te.emitEvent=function(j,be){var ce=this._events&&this._events[j];if(ce&&ce.length){ce=ce.slice(0),be=be||[];for(var ye=this._onceEvents&&this._onceEvents[j],xe=0;xe<ce.length;xe++){var Ee=ce[xe];ye&&ye[Ee]&&(this.off(j,Ee),delete ye[Ee]),Ee.apply(this,be)}return this}},Te.allOff=function(){delete this._events,delete this._onceEvents},ne})=="function"?de.call(Q,V,Q,q):de)===void 0||(q.exports=he)},6131:function(q,Q,V){var de,he;/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(he=typeof(de=function(){function ne(De){var Ue=parseFloat(De);return De.indexOf("%")==-1&&!isNaN(Ue)&&Ue}function Te(){}var j=typeof console=="undefined"?Te:function(De){console.error(De)},be=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],ce=be.length;function ye(){for(var De={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},Ue=0;Ue<ce;Ue++)De[be[Ue]]=0;return De}function xe(De){var Ue=getComputedStyle(De);return Ue||j("Style returned "+Ue+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),Ue}var Ee,Ce=!1;function Se(){if(!Ce){Ce=!0;var De=document.createElement("div");De.style.width="200px",De.style.padding="1px 2px 3px 4px",De.style.borderStyle="solid",De.style.borderWidth="1px 2px 3px 4px",De.style.boxSizing="border-box";var Ue=document.body||document.documentElement;Ue.appendChild(De);var $e=xe(De);Ee=Math.round(ne($e.width))==200,Oe.isBoxSizeOuter=Ee,Ue.removeChild(De)}}function Oe(De){if(Se(),typeof De=="string"&&(De=document.querySelector(De)),De&&typeof De=="object"&&De.nodeType){var Ue=xe(De);if(Ue.display=="none")return ye();var $e={};$e.width=De.offsetWidth,$e.height=De.offsetHeight;for(var Fe=$e.isBorderBox=Ue.boxSizing=="border-box",Xe=0;Xe<ce;Xe++){var Ye=be[Xe],He=Ue[Ye],Je=parseFloat(He);$e[Ye]=isNaN(Je)?0:Je}var pt=$e.paddingLeft+$e.paddingRight,It=$e.paddingTop+$e.paddingBottom,At=$e.marginLeft+$e.marginRight,bt=$e.marginTop+$e.marginBottom,rt=$e.borderLeftWidth+$e.borderRightWidth,nt=$e.borderTopWidth+$e.borderBottomWidth,it=Fe&&Ee,dt=ne(Ue.width);dt!==!1&&($e.width=dt+(it?0:pt+rt));var lt=ne(Ue.height);return lt!==!1&&($e.height=lt+(it?0:It+nt)),$e.innerWidth=$e.width-(pt+rt),$e.innerHeight=$e.height-(It+nt),$e.outerWidth=$e.width+At,$e.outerHeight=$e.height+bt,$e}}return Oe})=="function"?de.call(Q,V,Q,q):de)===void 0||(q.exports=he)},6834:function(q,Q,V){function de(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function he(Ce){if(Ce&&Ce.__esModule)return Ce;var Se={};if(Ce!=null)for(var Oe in Ce)Object.prototype.hasOwnProperty.call(Ce,Oe)&&(Se[Oe]=Ce[Oe]);return Se.default=Ce,Se}Q.__esModule=!0;var ne=he(V(2067)),Te=de(V(5558)),j=de(V(8728)),be=he(V(2392)),ce=he(V(1628)),ye=de(V(3982));function xe(){var Ce=new ne.HandlebarsEnvironment;return be.extend(Ce,ne),Ce.SafeString=Te.default,Ce.Exception=j.default,Ce.Utils=be,Ce.escapeExpression=be.escapeExpression,Ce.VM=ce,Ce.template=function(Se){return ce.template(Se,Ce)},Ce}var Ee=xe();Ee.create=xe,ye.default(Ee),Ee.default=Ee,Q.default=Ee,q.exports=Q.default},2067:function(q,Q,V){function de(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}Q.__esModule=!0,Q.HandlebarsEnvironment=xe;var he=V(2392),ne=de(V(8728)),Te=V(2638),j=V(881),be=de(V(8037)),ce=V(6293);Q.VERSION="4.7.7",Q.COMPILER_REVISION=8,Q.LAST_COMPATIBLE_COMPILER_REVISION=7,Q.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var ye="[object Object]";function xe(Ce,Se,Oe){this.helpers=Ce||{},this.partials=Se||{},this.decorators=Oe||{},Te.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}xe.prototype={constructor:xe,logger:be.default,log:be.default.log,registerHelper:function(Ce,Se){if(he.toString.call(Ce)===ye){if(Se)throw new ne.default("Arg not supported with multiple helpers");he.extend(this.helpers,Ce)}else this.helpers[Ce]=Se},unregisterHelper:function(Ce){delete this.helpers[Ce]},registerPartial:function(Ce,Se){if(he.toString.call(Ce)===ye)he.extend(this.partials,Ce);else{if(Se===void 0)throw new ne.default('Attempting to register a partial called "'+Ce+'" as undefined');this.partials[Ce]=Se}},unregisterPartial:function(Ce){delete this.partials[Ce]},registerDecorator:function(Ce,Se){if(he.toString.call(Ce)===ye){if(Se)throw new ne.default("Arg not supported with multiple decorators");he.extend(this.decorators,Ce)}else this.decorators[Ce]=Se},unregisterDecorator:function(Ce){delete this.decorators[Ce]},resetLoggedPropertyAccesses:function(){ce.resetLoggedProperties()}};var Ee=be.default.log;Q.log=Ee,Q.createFrame=he.createFrame,Q.logger=be.default},881:function(q,Q,V){Q.__esModule=!0,Q.registerDefaultDecorators=function(Te){ne.default(Te)};var de,he=V(5670),ne=(de=he)&&de.__esModule?de:{default:de}},5670:function(q,Q,V){Q.__esModule=!0;var de=V(2392);Q.default=function(he){he.registerDecorator("inline",function(ne,Te,j,be){var ce=ne;return Te.partials||(Te.partials={},ce=function(ye,xe){var Ee=j.partials;j.partials=de.extend({},Ee,Te.partials);var Ce=ne(ye,xe);return j.partials=Ee,Ce}),Te.partials[be.args[0]]=be.fn,ce})},q.exports=Q.default},8728:function(q,Q){Q.__esModule=!0;var V=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function de(he,ne){var Te=ne&&ne.loc,j=void 0,be=void 0,ce=void 0,ye=void 0;Te&&(j=Te.start.line,be=Te.end.line,ce=Te.start.column,ye=Te.end.column,he+=" - "+j+":"+ce);for(var xe=Error.prototype.constructor.call(this,he),Ee=0;Ee<V.length;Ee++)this[V[Ee]]=xe[V[Ee]];Error.captureStackTrace&&Error.captureStackTrace(this,de);try{Te&&(this.lineNumber=j,this.endLineNumber=be,Object.defineProperty?(Object.defineProperty(this,"column",{value:ce,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:ye,enumerable:!0})):(this.column=ce,this.endColumn=ye))}catch{}}de.prototype=new Error,Q.default=de,q.exports=Q.default},2638:function(q,Q,V){function de(xe){return xe&&xe.__esModule?xe:{default:xe}}Q.__esModule=!0,Q.registerDefaultHelpers=function(xe){he.default(xe),ne.default(xe),Te.default(xe),j.default(xe),be.default(xe),ce.default(xe),ye.default(xe)},Q.moveHelperToHooks=function(xe,Ee,Ce){xe.helpers[Ee]&&(xe.hooks[Ee]=xe.helpers[Ee],Ce||delete xe.helpers[Ee])};var he=de(V(7342)),ne=de(V(6822)),Te=de(V(4905)),j=de(V(7405)),be=de(V(5702)),ce=de(V(7593)),ye=de(V(3978))},7342:function(q,Q,V){Q.__esModule=!0;var de=V(2392);Q.default=function(he){he.registerHelper("blockHelperMissing",function(ne,Te){var j=Te.inverse,be=Te.fn;if(ne===!0)return be(this);if(ne===!1||ne==null)return j(this);if(de.isArray(ne))return ne.length>0?(Te.ids&&(Te.ids=[Te.name]),he.helpers.each(ne,Te)):j(this);if(Te.data&&Te.ids){var ce=de.createFrame(Te.data);ce.contextPath=de.appendContextPath(Te.data.contextPath,Te.name),Te={data:ce}}return be(ne,Te)})},q.exports=Q.default},6822:function(q,Q,V){Q.__esModule=!0;var de,he=V(2392),ne=V(8728),Te=(de=ne)&&de.__esModule?de:{default:de};Q.default=function(j){j.registerHelper("each",function(be,ce){if(!ce)throw new Te.default("Must pass iterator to #each");var ye,xe=ce.fn,Ee=ce.inverse,Ce=0,Se="",Oe=void 0,De=void 0;function Ue(He,Je,pt){Oe&&(Oe.key=He,Oe.index=Je,Oe.first=Je===0,Oe.last=!!pt,De&&(Oe.contextPath=De+He)),Se+=xe(be[He],{data:Oe,blockParams:he.blockParams([be[He],He],[De+He,null])})}if(ce.data&&ce.ids&&(De=he.appendContextPath(ce.data.contextPath,ce.ids[0])+"."),he.isFunction(be)&&(be=be.call(this)),ce.data&&(Oe=he.createFrame(ce.data)),be&&typeof be=="object")if(he.isArray(be))for(var $e=be.length;Ce<$e;Ce++)Ce in be&&Ue(Ce,Ce,Ce===be.length-1);else if(V.g.Symbol&&be[V.g.Symbol.iterator]){for(var Fe=[],Xe=be[V.g.Symbol.iterator](),Ye=Xe.next();!Ye.done;Ye=Xe.next())Fe.push(Ye.value);for($e=(be=Fe).length;Ce<$e;Ce++)Ue(Ce,Ce,Ce===be.length-1)}else ye=void 0,Object.keys(be).forEach(function(He){ye!==void 0&&Ue(ye,Ce-1),ye=He,Ce++}),ye!==void 0&&Ue(ye,Ce-1,!0);return Ce===0&&(Se=Ee(this)),Se})},q.exports=Q.default},4905:function(q,Q,V){Q.__esModule=!0;var de,he=V(8728),ne=(de=he)&&de.__esModule?de:{default:de};Q.default=function(Te){Te.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new ne.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},q.exports=Q.default},7405:function(q,Q,V){Q.__esModule=!0;var de,he=V(2392),ne=V(8728),Te=(de=ne)&&de.__esModule?de:{default:de};Q.default=function(j){j.registerHelper("if",function(be,ce){if(arguments.length!=2)throw new Te.default("#if requires exactly one argument");return he.isFunction(be)&&(be=be.call(this)),!ce.hash.includeZero&&!be||he.isEmpty(be)?ce.inverse(this):ce.fn(this)}),j.registerHelper("unless",function(be,ce){if(arguments.length!=2)throw new Te.default("#unless requires exactly one argument");return j.helpers.if.call(this,be,{fn:ce.inverse,inverse:ce.fn,hash:ce.hash})})},q.exports=Q.default},5702:function(q,Q){Q.__esModule=!0,Q.default=function(V){V.registerHelper("log",function(){for(var de=[void 0],he=arguments[arguments.length-1],ne=0;ne<arguments.length-1;ne++)de.push(arguments[ne]);var Te=1;he.hash.level!=null?Te=he.hash.level:he.data&&he.data.level!=null&&(Te=he.data.level),de[0]=Te,V.log.apply(V,de)})},q.exports=Q.default},7593:function(q,Q){Q.__esModule=!0,Q.default=function(V){V.registerHelper("lookup",function(de,he,ne){return de&&ne.lookupProperty(de,he)})},q.exports=Q.default},3978:function(q,Q,V){Q.__esModule=!0;var de,he=V(2392),ne=V(8728),Te=(de=ne)&&de.__esModule?de:{default:de};Q.default=function(j){j.registerHelper("with",function(be,ce){if(arguments.length!=2)throw new Te.default("#with requires exactly one argument");he.isFunction(be)&&(be=be.call(this));var ye=ce.fn;if(he.isEmpty(be))return ce.inverse(this);var xe=ce.data;return ce.data&&ce.ids&&((xe=he.createFrame(ce.data)).contextPath=he.appendContextPath(ce.data.contextPath,ce.ids[0])),ye(be,{data:xe,blockParams:he.blockParams([be],[xe&&xe.contextPath])})})},q.exports=Q.default},8572:function(q,Q,V){Q.__esModule=!0,Q.createNewLookupObject=function(){for(var he=arguments.length,ne=Array(he),Te=0;Te<he;Te++)ne[Te]=arguments[Te];return de.extend.apply(void 0,[Object.create(null)].concat(ne))};var de=V(2392)},6293:function(q,Q,V){Q.__esModule=!0,Q.createProtoAccessControl=function(j){var be=Object.create(null);be.constructor=!1,be.__defineGetter__=!1,be.__defineSetter__=!1,be.__lookupGetter__=!1;var ce=Object.create(null);return ce.__proto__=!1,{properties:{whitelist:de.createNewLookupObject(ce,j.allowedProtoProperties),defaultValue:j.allowProtoPropertiesByDefault},methods:{whitelist:de.createNewLookupObject(be,j.allowedProtoMethods),defaultValue:j.allowProtoMethodsByDefault}}},Q.resultIsAllowed=function(j,be,ce){return Te(typeof j=="function"?be.methods:be.properties,ce)},Q.resetLoggedProperties=function(){Object.keys(ne).forEach(function(j){delete ne[j]})};var de=V(8572),he=function(j){if(j&&j.__esModule)return j;var be={};if(j!=null)for(var ce in j)Object.prototype.hasOwnProperty.call(j,ce)&&(be[ce]=j[ce]);return be.default=j,be}(V(8037)),ne=Object.create(null);function Te(j,be){return j.whitelist[be]!==void 0?j.whitelist[be]===!0:j.defaultValue!==void 0?j.defaultValue:(function(ce){ne[ce]!==!0&&(ne[ce]=!0,he.log("error",'Handlebars: Access has been denied to resolve the property "'+ce+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}(be),!1)}},5005:function(q,Q){Q.__esModule=!0,Q.wrapHelper=function(V,de){return typeof V!="function"?V:function(){return arguments[arguments.length-1]=de(arguments[arguments.length-1]),V.apply(this,arguments)}}},8037:function(q,Q,V){Q.__esModule=!0;var de=V(2392),he={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(ne){if(typeof ne=="string"){var Te=de.indexOf(he.methodMap,ne.toLowerCase());ne=Te>=0?Te:parseInt(ne,10)}return ne},log:function(ne){if(ne=he.lookupLevel(ne),typeof console!="undefined"&&he.lookupLevel(he.level)<=ne){var Te=he.methodMap[ne];console[Te]||(Te="log");for(var j=arguments.length,be=Array(j>1?j-1:0),ce=1;ce<j;ce++)be[ce-1]=arguments[ce];console[Te].apply(console,be)}}};Q.default=he,q.exports=Q.default},3982:function(q,Q,V){Q.__esModule=!0,Q.default=function(de){var he=V.g!==void 0?V.g:window,ne=he.Handlebars;de.noConflict=function(){return he.Handlebars===de&&(he.Handlebars=ne),de}},q.exports=Q.default},1628:function(q,Q,V){Q.__esModule=!0,Q.checkRevision=function(Oe){var De=Oe&&Oe[0]||1,Ue=j.COMPILER_REVISION;if(!(De>=j.LAST_COMPATIBLE_COMPILER_REVISION&&De<=j.COMPILER_REVISION)){if(De<j.LAST_COMPATIBLE_COMPILER_REVISION){var $e=j.REVISION_CHANGES[Ue],Fe=j.REVISION_CHANGES[De];throw new Te.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+$e+") or downgrade your runtime to an older version ("+Fe+").")}throw new Te.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+Oe[1]+").")}},Q.template=function(Oe,De){if(!De)throw new Te.default("No environment passed to template");if(!Oe||!Oe.main)throw new Te.default("Unknown template object: "+typeof Oe);Oe.main.decorator=Oe.main_d,De.VM.checkRevision(Oe.compiler);var Ue=Oe.compiler&&Oe.compiler[0]===7,$e={strict:function(Xe,Ye,He){if(!Xe||!(Ye in Xe))throw new Te.default('"'+Ye+'" not defined in '+Xe,{loc:He});return $e.lookupProperty(Xe,Ye)},lookupProperty:function(Xe,Ye){var He=Xe[Ye];return He==null||Object.prototype.hasOwnProperty.call(Xe,Ye)||ye.resultIsAllowed(He,$e.protoAccessControl,Ye)?He:void 0},lookup:function(Xe,Ye){for(var He=Xe.length,Je=0;Je<He;Je++)if((Xe[Je]&&$e.lookupProperty(Xe[Je],Ye))!=null)return Xe[Je][Ye]},lambda:function(Xe,Ye){return typeof Xe=="function"?Xe.call(Ye):Xe},escapeExpression:he.escapeExpression,invokePartial:function(Xe,Ye,He){He.hash&&(Ye=he.extend({},Ye,He.hash),He.ids&&(He.ids[0]=!0)),Xe=De.VM.resolvePartial.call(this,Xe,Ye,He);var Je=he.extend({},He,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),pt=De.VM.invokePartial.call(this,Xe,Ye,Je);if(pt==null&&De.compile&&(He.partials[He.name]=De.compile(Xe,Oe.compilerOptions,De),pt=He.partials[He.name](Ye,Je)),pt!=null){if(He.indent){for(var It=pt.split(`
`),At=0,bt=It.length;At<bt&&(It[At]||At+1!==bt);At++)It[At]=He.indent+It[At];pt=It.join(`
`)}return pt}throw new Te.default("The partial "+He.name+" could not be compiled when running in runtime-only mode")},fn:function(Xe){var Ye=Oe[Xe];return Ye.decorator=Oe[Xe+"_d"],Ye},programs:[],program:function(Xe,Ye,He,Je,pt){var It=this.programs[Xe],At=this.fn(Xe);return Ye||pt||Je||He?It=xe(this,Xe,At,Ye,He,Je,pt):It||(It=this.programs[Xe]=xe(this,Xe,At)),It},data:function(Xe,Ye){for(;Xe&&Ye--;)Xe=Xe._parent;return Xe},mergeIfNeeded:function(Xe,Ye){var He=Xe||Ye;return Xe&&Ye&&Xe!==Ye&&(He=he.extend({},Ye,Xe)),He},nullContext:Object.seal({}),noop:De.VM.noop,compilerInfo:Oe.compiler};function Fe(Xe){var Ye=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],He=Ye.data;Fe._setup(Ye),!Ye.partial&&Oe.useData&&(He=Ce(Xe,He));var Je=void 0,pt=Oe.useBlockParams?[]:void 0;function It(At){return""+Oe.main($e,At,$e.helpers,$e.partials,He,pt,Je)}return Oe.useDepths&&(Je=Ye.depths?Xe!=Ye.depths[0]?[Xe].concat(Ye.depths):Ye.depths:[Xe]),(It=Se(Oe.main,It,$e,Ye.depths||[],He,pt))(Xe,Ye)}return Fe.isTop=!0,Fe._setup=function(Xe){if(Xe.partial)$e.protoAccessControl=Xe.protoAccessControl,$e.helpers=Xe.helpers,$e.partials=Xe.partials,$e.decorators=Xe.decorators,$e.hooks=Xe.hooks;else{var Ye=he.extend({},De.helpers,Xe.helpers);(function(Je,pt){Object.keys(Je).forEach(function(It){var At=Je[It];Je[It]=function(bt,rt){var nt=rt.lookupProperty;return ce.wrapHelper(bt,function(it){return he.extend({lookupProperty:nt},it)})}(At,pt)})})(Ye,$e),$e.helpers=Ye,Oe.usePartial&&($e.partials=$e.mergeIfNeeded(Xe.partials,De.partials)),(Oe.usePartial||Oe.useDecorators)&&($e.decorators=he.extend({},De.decorators,Xe.decorators)),$e.hooks={},$e.protoAccessControl=ye.createProtoAccessControl(Xe);var He=Xe.allowCallsToHelperMissing||Ue;be.moveHelperToHooks($e,"helperMissing",He),be.moveHelperToHooks($e,"blockHelperMissing",He)}},Fe._child=function(Xe,Ye,He,Je){if(Oe.useBlockParams&&!He)throw new Te.default("must pass block params");if(Oe.useDepths&&!Je)throw new Te.default("must pass parent depths");return xe($e,Xe,Oe[Xe],Ye,0,He,Je)},Fe},Q.wrapProgram=xe,Q.resolvePartial=function(Oe,De,Ue){return Oe?Oe.call||Ue.name||(Ue.name=Oe,Oe=Ue.partials[Oe]):Oe=Ue.name==="@partial-block"?Ue.data["partial-block"]:Ue.partials[Ue.name],Oe},Q.invokePartial=function(Oe,De,Ue){var $e=Ue.data&&Ue.data["partial-block"];Ue.partial=!0,Ue.ids&&(Ue.data.contextPath=Ue.ids[0]||Ue.data.contextPath);var Fe=void 0;if(Ue.fn&&Ue.fn!==Ee&&function(){Ue.data=j.createFrame(Ue.data);var Xe=Ue.fn;Fe=Ue.data["partial-block"]=function(Ye){var He=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return He.data=j.createFrame(He.data),He.data["partial-block"]=$e,Xe(Ye,He)},Xe.partials&&(Ue.partials=he.extend({},Ue.partials,Xe.partials))}(),Oe===void 0&&Fe&&(Oe=Fe),Oe===void 0)throw new Te.default("The partial "+Ue.name+" could not be found");if(Oe instanceof Function)return Oe(De,Ue)},Q.noop=Ee;var de,he=function(Oe){if(Oe&&Oe.__esModule)return Oe;var De={};if(Oe!=null)for(var Ue in Oe)Object.prototype.hasOwnProperty.call(Oe,Ue)&&(De[Ue]=Oe[Ue]);return De.default=Oe,De}(V(2392)),ne=V(8728),Te=(de=ne)&&de.__esModule?de:{default:de},j=V(2067),be=V(2638),ce=V(5005),ye=V(6293);function xe(Oe,De,Ue,$e,Fe,Xe,Ye){function He(Je){var pt=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],It=Ye;return!Ye||Je==Ye[0]||Je===Oe.nullContext&&Ye[0]===null||(It=[Je].concat(Ye)),Ue(Oe,Je,Oe.helpers,Oe.partials,pt.data||$e,Xe&&[pt.blockParams].concat(Xe),It)}return(He=Se(Ue,He,Oe,Ye,$e,Xe)).program=De,He.depth=Ye?Ye.length:0,He.blockParams=Fe||0,He}function Ee(){return""}function Ce(Oe,De){return De&&"root"in De||((De=De?j.createFrame(De):{}).root=Oe),De}function Se(Oe,De,Ue,$e,Fe,Xe){if(Oe.decorator){var Ye={};De=Oe.decorator(De,Ye,Ue,$e&&$e[0],Fe,Xe,$e),he.extend(De,Ye)}return De}},5558:function(q,Q){function V(de){this.string=de}Q.__esModule=!0,V.prototype.toString=V.prototype.toHTML=function(){return""+this.string},Q.default=V,q.exports=Q.default},2392:function(q,Q){Q.__esModule=!0,Q.extend=Te,Q.indexOf=function(ye,xe){for(var Ee=0,Ce=ye.length;Ee<Ce;Ee++)if(ye[Ee]===xe)return Ee;return-1},Q.escapeExpression=function(ye){if(typeof ye!="string"){if(ye&&ye.toHTML)return ye.toHTML();if(ye==null)return"";if(!ye)return ye+"";ye=""+ye}return he.test(ye)?ye.replace(de,ne):ye},Q.isEmpty=function(ye){return!ye&&ye!==0||!(!ce(ye)||ye.length!==0)},Q.createFrame=function(ye){var xe=Te({},ye);return xe._parent=ye,xe},Q.blockParams=function(ye,xe){return ye.path=xe,ye},Q.appendContextPath=function(ye,xe){return(ye?ye+".":"")+xe};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},de=/[&<>"'`=]/g,he=/[&<>"'`=]/;function ne(ye){return V[ye]}function Te(ye){for(var xe=1;xe<arguments.length;xe++)for(var Ee in arguments[xe])Object.prototype.hasOwnProperty.call(arguments[xe],Ee)&&(ye[Ee]=arguments[xe][Ee]);return ye}var j=Object.prototype.toString;Q.toString=j;var be=function(ye){return typeof ye=="function"};be(/x/)&&(Q.isFunction=be=function(ye){return typeof ye=="function"&&j.call(ye)==="[object Function]"}),Q.isFunction=be;var ce=Array.isArray||function(ye){return!(!ye||typeof ye!="object")&&j.call(ye)==="[object Array]"};Q.isArray=ce},4204:function(q,Q,V){var de,he;de=[V(7937),V(5040),V(3566)],(he=function(ne,Te,j){return function(be,ce,ye){var xe=function(Ee,Ce){return be.js_beautify(Ee,Ce)};return xe.js=be.js_beautify,xe.css=ce.css_beautify,xe.html=ye.html_beautify,xe.js_beautify=be.js_beautify,xe.css_beautify=ce.css_beautify,xe.html_beautify=ye.html_beautify,xe}(ne,Te,j)}.apply(Q,de))===void 0||(q.exports=he)},5040:function(q,Q){var V;(function(){var de;(function(){var ne=[,,function(be){function ce(Ee){this.__parent=Ee,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ye(Ee,Ce){this.__cache=[""],this.__indent_size=Ee.indent_size,this.__indent_string=Ee.indent_char,Ee.indent_with_tabs||(this.__indent_string=new Array(Ee.indent_size+1).join(Ee.indent_char)),Ce=Ce||"",Ee.indent_level>0&&(Ce=new Array(Ee.indent_level+1).join(this.__indent_string)),this.__base_string=Ce,this.__base_string_length=Ce.length}function xe(Ee,Ce){this.__indent_cache=new ye(Ee,Ce),this.raw=!1,this._end_with_newline=Ee.end_with_newline,this.indent_size=Ee.indent_size,this.wrap_line_length=Ee.wrap_line_length,this.indent_empty_lines=Ee.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ce(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ce.prototype.clone_empty=function(){var Ee=new ce(this.__parent);return Ee.set_indent(this.__indent_count,this.__alignment_count),Ee},ce.prototype.item=function(Ee){return Ee<0?this.__items[this.__items.length+Ee]:this.__items[Ee]},ce.prototype.has_match=function(Ee){for(var Ce=this.__items.length-1;Ce>=0;Ce--)if(this.__items[Ce].match(Ee))return!0;return!1},ce.prototype.set_indent=function(Ee,Ce){this.is_empty()&&(this.__indent_count=Ee||0,this.__alignment_count=Ce||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},ce.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},ce.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},ce.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Ee=this.__parent.current_line;return Ee.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Ee.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Ee.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Ee.__items[0]===" "&&(Ee.__items.splice(0,1),Ee.__character_count-=1),!0}return!1},ce.prototype.is_empty=function(){return this.__items.length===0},ce.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},ce.prototype.push=function(Ee){this.__items.push(Ee);var Ce=Ee.lastIndexOf(`
`);Ce!==-1?this.__character_count=Ee.length-Ce:this.__character_count+=Ee.length},ce.prototype.pop=function(){var Ee=null;return this.is_empty()||(Ee=this.__items.pop(),this.__character_count-=Ee.length),Ee},ce.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},ce.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},ce.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},ce.prototype.toString=function(){var Ee="";return this.is_empty()?this.__parent.indent_empty_lines&&(Ee=this.__parent.get_indent_string(this.__indent_count)):(Ee=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Ee+=this.__items.join("")),Ee},ye.prototype.get_indent_size=function(Ee,Ce){var Se=this.__base_string_length;return Ce=Ce||0,Ee<0&&(Se=0),Se+=Ee*this.__indent_size,Se+=Ce},ye.prototype.get_indent_string=function(Ee,Ce){var Se=this.__base_string;return Ce=Ce||0,Ee<0&&(Ee=0,Se=""),Ce+=Ee*this.__indent_size,this.__ensure_cache(Ce),Se+=this.__cache[Ce]},ye.prototype.__ensure_cache=function(Ee){for(;Ee>=this.__cache.length;)this.__add_column()},ye.prototype.__add_column=function(){var Ee=this.__cache.length,Ce=0,Se="";this.__indent_size&&Ee>=this.__indent_size&&(Ee-=(Ce=Math.floor(Ee/this.__indent_size))*this.__indent_size,Se=new Array(Ce+1).join(this.__indent_string)),Ee&&(Se+=new Array(Ee+1).join(" ")),this.__cache.push(Se)},xe.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},xe.prototype.get_line_number=function(){return this.__lines.length},xe.prototype.get_indent_string=function(Ee,Ce){return this.__indent_cache.get_indent_string(Ee,Ce)},xe.prototype.get_indent_size=function(Ee,Ce){return this.__indent_cache.get_indent_size(Ee,Ce)},xe.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},xe.prototype.add_new_line=function(Ee){return!(this.is_empty()||!Ee&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},xe.prototype.get_code=function(Ee){this.trim(!0);var Ce=this.current_line.pop();Ce&&(Ce[Ce.length-1]===`
`&&(Ce=Ce.replace(/\n+$/g,"")),this.current_line.push(Ce)),this._end_with_newline&&this.__add_outputline();var Se=this.__lines.join(`
`);return Ee!==`
`&&(Se=Se.replace(/[\n]/g,Ee)),Se},xe.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},xe.prototype.set_indent=function(Ee,Ce){return Ee=Ee||0,Ce=Ce||0,this.next_line.set_indent(Ee,Ce),this.__lines.length>1?(this.current_line.set_indent(Ee,Ce),!0):(this.current_line.set_indent(),!1)},xe.prototype.add_raw_token=function(Ee){for(var Ce=0;Ce<Ee.newlines;Ce++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Ee.whitespace_before),this.current_line.push(Ee.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},xe.prototype.add_token=function(Ee){this.__add_space_before_token(),this.current_line.push(Ee),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},xe.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},xe.prototype.remove_indent=function(Ee){for(var Ce=this.__lines.length;Ee<Ce;)this.__lines[Ee]._remove_indent(),Ee++;this.current_line._remove_wrap_indent()},xe.prototype.trim=function(Ee){for(Ee=Ee!==void 0&&Ee,this.current_line.trim();Ee&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},xe.prototype.just_added_newline=function(){return this.current_line.is_empty()},xe.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},xe.prototype.ensure_empty_line_above=function(Ee,Ce){for(var Se=this.__lines.length-2;Se>=0;){var Oe=this.__lines[Se];if(Oe.is_empty())break;if(Oe.item(0).indexOf(Ee)!==0&&Oe.item(-1)!==Ce){this.__lines.splice(Se+1,0,new ce(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Se--}},be.exports.Output=xe},,,,function(be){function ce(Ee,Ce){this.raw_options=ye(Ee,Ce),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ye(Ee,Ce){var Se,Oe={};for(Se in Ee=xe(Ee))Se!==Ce&&(Oe[Se]=Ee[Se]);if(Ce&&Ee[Ce])for(Se in Ee[Ce])Oe[Se]=Ee[Ce][Se];return Oe}function xe(Ee){var Ce,Se={};for(Ce in Ee)Se[Ce.replace(/-/g,"_")]=Ee[Ce];return Se}ce.prototype._get_array=function(Ee,Ce){var Se=this.raw_options[Ee],Oe=Ce||[];return typeof Se=="object"?Se!==null&&typeof Se.concat=="function"&&(Oe=Se.concat()):typeof Se=="string"&&(Oe=Se.split(/[^a-zA-Z0-9_\/\-]+/)),Oe},ce.prototype._get_boolean=function(Ee,Ce){var Se=this.raw_options[Ee];return Se===void 0?!!Ce:!!Se},ce.prototype._get_characters=function(Ee,Ce){var Se=this.raw_options[Ee],Oe=Ce||"";return typeof Se=="string"&&(Oe=Se.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Oe},ce.prototype._get_number=function(Ee,Ce){var Se=this.raw_options[Ee];Ce=parseInt(Ce,10),isNaN(Ce)&&(Ce=0);var Oe=parseInt(Se,10);return isNaN(Oe)&&(Oe=Ce),Oe},ce.prototype._get_selection=function(Ee,Ce,Se){var Oe=this._get_selection_list(Ee,Ce,Se);if(Oe.length!==1)throw new Error("Invalid Option Value: The option '"+Ee+`' can only be one of the following values:
`+Ce+`
You passed in: '`+this.raw_options[Ee]+"'");return Oe[0]},ce.prototype._get_selection_list=function(Ee,Ce,Se){if(!Ce||Ce.length===0)throw new Error("Selection list cannot be empty.");if(Se=Se||[Ce[0]],!this._is_valid_selection(Se,Ce))throw new Error("Invalid Default Value!");var Oe=this._get_array(Ee,Se);if(!this._is_valid_selection(Oe,Ce))throw new Error("Invalid Option Value: The option '"+Ee+`' can contain only the following values:
`+Ce+`
You passed in: '`+this.raw_options[Ee]+"'");return Oe},ce.prototype._is_valid_selection=function(Ee,Ce){return Ee.length&&Ce.length&&!Ee.some(function(Se){return Ce.indexOf(Se)===-1})},be.exports.Options=ce,be.exports.normalizeOpts=xe,be.exports.mergeOpts=ye},,function(be){var ce=RegExp.prototype.hasOwnProperty("sticky");function ye(xe){this.__input=xe||"",this.__input_length=this.__input.length,this.__position=0}ye.prototype.restart=function(){this.__position=0},ye.prototype.back=function(){this.__position>0&&(this.__position-=1)},ye.prototype.hasNext=function(){return this.__position<this.__input_length},ye.prototype.next=function(){var xe=null;return this.hasNext()&&(xe=this.__input.charAt(this.__position),this.__position+=1),xe},ye.prototype.peek=function(xe){var Ee=null;return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__input_length&&(Ee=this.__input.charAt(xe)),Ee},ye.prototype.__match=function(xe,Ee){xe.lastIndex=Ee;var Ce=xe.exec(this.__input);return!Ce||ce&&xe.sticky||Ce.index!==Ee&&(Ce=null),Ce},ye.prototype.test=function(xe,Ee){return Ee=Ee||0,(Ee+=this.__position)>=0&&Ee<this.__input_length&&!!this.__match(xe,Ee)},ye.prototype.testChar=function(xe,Ee){var Ce=this.peek(Ee);return xe.lastIndex=0,Ce!==null&&xe.test(Ce)},ye.prototype.match=function(xe){var Ee=this.__match(xe,this.__position);return Ee?this.__position+=Ee[0].length:Ee=null,Ee},ye.prototype.read=function(xe,Ee,Ce){var Se,Oe="";return xe&&(Se=this.match(xe))&&(Oe+=Se[0]),!Ee||!Se&&xe||(Oe+=this.readUntil(Ee,Ce)),Oe},ye.prototype.readUntil=function(xe,Ee){var Ce,Se=this.__position;xe.lastIndex=this.__position;var Oe=xe.exec(this.__input);return Oe?(Se=Oe.index,Ee&&(Se+=Oe[0].length)):Se=this.__input_length,Ce=this.__input.substring(this.__position,Se),this.__position=Se,Ce},ye.prototype.readUntilAfter=function(xe){return this.readUntil(xe,!0)},ye.prototype.get_regexp=function(xe,Ee){var Ce=null,Se="g";return Ee&&ce&&(Se="y"),typeof xe=="string"&&xe!==""?Ce=new RegExp(xe,Se):xe&&(Ce=new RegExp(xe.source,Se)),Ce},ye.prototype.get_literal_regexp=function(xe){return RegExp(xe.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ye.prototype.peekUntilAfter=function(xe){var Ee=this.__position,Ce=this.readUntilAfter(xe);return this.__position=Ee,Ce},ye.prototype.lookBack=function(xe){var Ee=this.__position-1;return Ee>=xe.length&&this.__input.substring(Ee-xe.length,Ee).toLowerCase()===xe},be.exports.InputScanner=ye},,,,,function(be){function ce(ye,xe){ye=typeof ye=="string"?ye:ye.source,xe=typeof xe=="string"?xe:xe.source,this.__directives_block_pattern=new RegExp(ye+/ beautify( \w+[:]\w+)+ /.source+xe,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ye+/\sbeautify\signore:end\s/.source+xe,"g")}ce.prototype.get_directives=function(ye){if(!ye.match(this.__directives_block_pattern))return null;var xe={};this.__directive_pattern.lastIndex=0;for(var Ee=this.__directive_pattern.exec(ye);Ee;)xe[Ee[1]]=Ee[2],Ee=this.__directive_pattern.exec(ye);return xe},ce.prototype.readIgnored=function(ye){return ye.readUntilAfter(this.__directives_end_ignore_pattern)},be.exports.Directives=ce},,function(be,ce,ye){var xe=ye(16).Beautifier,Ee=ye(17).Options;be.exports=function(Ce,Se){return new xe(Ce,Se).beautify()},be.exports.defaultOptions=function(){return new Ee}},function(be,ce,ye){var xe=ye(17).Options,Ee=ye(2).Output,Ce=ye(8).InputScanner,Se=new(ye(13)).Directives(/\/\*/,/\*\//),Oe=/\r\n|[\r\n]/,De=/\r\n|[\r\n]/g,Ue=/\s/,$e=/(?:\s|\n)+/g,Fe=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,Xe=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function Ye(He,Je){this._source_text=He||"",this._options=new xe(Je),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}Ye.prototype.eatString=function(He){var Je="";for(this._ch=this._input.next();this._ch;){if(Je+=this._ch,this._ch==="\\")Je+=this._input.next();else if(He.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return Je},Ye.prototype.eatWhitespace=function(He){for(var Je=Ue.test(this._input.peek()),pt=0;Ue.test(this._input.peek());)this._ch=this._input.next(),He&&this._ch===`
`&&(pt===0||pt<this._options.max_preserve_newlines)&&(pt++,this._output.add_new_line(!0));return Je},Ye.prototype.foundNestedPseudoClass=function(){for(var He=0,Je=1,pt=this._input.peek(Je);pt;){if(pt==="{")return!0;if(pt==="(")He+=1;else if(pt===")"){if(He===0)return!1;He-=1}else if(pt===";"||pt==="}")return!1;Je++,pt=this._input.peek(Je)}return!1},Ye.prototype.print_string=function(He){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(He)},Ye.prototype.preserveSingleSpace=function(He){He&&(this._output.space_before_token=!0)},Ye.prototype.indent=function(){this._indentLevel++},Ye.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},Ye.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var He=this._source_text,Je=this._options.eol;Je==="auto"&&(Je=`
`,He&&Oe.test(He||"")&&(Je=He.match(Oe)[0]));var pt=(He=He.replace(De,`
`)).match(/^[\t ]*/)[0];this._output=new Ee(this._options,pt),this._input=new Ce(He),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var It,At,bt=0,rt=!1,nt=!1,it=!1,dt=!1,lt=!1,ft=!1,xt=this._ch,ht=!1;It=this._input.read($e)!=="",At=xt,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),xt=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var Vt=this._input.read(Fe),st=Se.get_directives(Vt);st&&st.ignore==="start"&&(Vt+=Se.readIgnored(this._input)),this.print_string(Vt),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(Xe)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(It),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var $t=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);$t.match(/[ :]$/)&&($t=this.eatString(": ").replace(/\s$/,""),this.print_string($t),this._output.space_before_token=!0),($t=$t.replace(/\s$/,""))==="extend"?dt=!0:$t==="import"&&(lt=!0),$t in this.NESTED_AT_RULE?(this._nestedLevel+=1,$t in this.CONDITIONAL_GROUP_RULE&&(it=!0)):rt||bt!==0||$t.indexOf(":")===-1||(nt=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(It),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")nt&&(nt=!1,this.outdent()),it?(it=!1,rt=this._indentLevel>=this._nestedLevel):rt=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&rt&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(At==="("?this._output.space_before_token=!1:At!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),At==="{"&&this._output.trim(!0),lt=!1,dt=!1,nt&&(this.outdent(),nt=!1),this.print_string(this._ch),rt=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var ln=0;ln<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;ln++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[ln])){ht=!0;break}!rt&&!it||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||dt||bt!==0?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),nt||(nt=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if(this._ch==='"'||this._ch==="'"){var Mn=At==='"'||At==="'";this.preserveSingleSpace(Mn||It),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")ht=!1,bt===0?(nt&&(this.outdent(),nt=!1),dt=!1,lt=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),bt++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),bt&&(bt--,this.outdent()));else{var on=!1;this._input.lookBack("with")&&(on=!0),this.preserveSingleSpace(It||on),this.print_string(this._ch),nt&&At==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),ft=!0):(this.eatWhitespace(),bt++,this.indent())}else if(this._ch===")")bt&&(bt--,this.outdent()),ft&&this._input.peek()===";"&&this._options.selector_separator_newline&&(ft=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||nt&&!ft||bt!==0||lt||dt?this._output.space_before_token=!0:this._output.add_new_line();else if(this._ch!==">"&&this._ch!=="+"&&this._ch!=="~"||nt||bt!==0)if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(It),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),Ue.test(this._ch)&&(this._ch="");else if(this._ch!=="!"||this._input.lookBack("\\")){var an=At==='"'||At==="'";this.preserveSingleSpace(an||It),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&ht&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Ue.test(this._ch)&&(this._ch=""));return this._output.get_code(Je)},be.exports.Beautifier=Ye},function(be,ce,ye){var xe=ye(6).Options;function Ee(Ce){xe.call(this,Ce,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var Se=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||Se;var Oe=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var De=0;De<Oe.length;De++)Oe[De]!=="expand"?this.brace_style="collapse":this.brace_style=Oe[De]}Ee.prototype=new xe,be.exports.Options=Ee}],Te={},j=function be(ce){var ye=Te[ce];if(ye!==void 0)return ye.exports;var xe=Te[ce]={exports:{}};return ne[ce](xe,xe.exports,be),xe.exports}(15);de=j})();var he=de;(V=function(){return{css_beautify:he}}.apply(Q,[]))===void 0||(q.exports=V)})()},3566:function(q,Q,V){var de,he;(function(){var ne;(function(){var j=[,,function(ye){function xe(Se){this.__parent=Se,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function Ee(Se,Oe){this.__cache=[""],this.__indent_size=Se.indent_size,this.__indent_string=Se.indent_char,Se.indent_with_tabs||(this.__indent_string=new Array(Se.indent_size+1).join(Se.indent_char)),Oe=Oe||"",Se.indent_level>0&&(Oe=new Array(Se.indent_level+1).join(this.__indent_string)),this.__base_string=Oe,this.__base_string_length=Oe.length}function Ce(Se,Oe){this.__indent_cache=new Ee(Se,Oe),this.raw=!1,this._end_with_newline=Se.end_with_newline,this.indent_size=Se.indent_size,this.wrap_line_length=Se.wrap_line_length,this.indent_empty_lines=Se.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new xe(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}xe.prototype.clone_empty=function(){var Se=new xe(this.__parent);return Se.set_indent(this.__indent_count,this.__alignment_count),Se},xe.prototype.item=function(Se){return Se<0?this.__items[this.__items.length+Se]:this.__items[Se]},xe.prototype.has_match=function(Se){for(var Oe=this.__items.length-1;Oe>=0;Oe--)if(this.__items[Oe].match(Se))return!0;return!1},xe.prototype.set_indent=function(Se,Oe){this.is_empty()&&(this.__indent_count=Se||0,this.__alignment_count=Oe||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},xe.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},xe.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},xe.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Se=this.__parent.current_line;return Se.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Se.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Se.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Se.__items[0]===" "&&(Se.__items.splice(0,1),Se.__character_count-=1),!0}return!1},xe.prototype.is_empty=function(){return this.__items.length===0},xe.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},xe.prototype.push=function(Se){this.__items.push(Se);var Oe=Se.lastIndexOf(`
`);Oe!==-1?this.__character_count=Se.length-Oe:this.__character_count+=Se.length},xe.prototype.pop=function(){var Se=null;return this.is_empty()||(Se=this.__items.pop(),this.__character_count-=Se.length),Se},xe.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},xe.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},xe.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},xe.prototype.toString=function(){var Se="";return this.is_empty()?this.__parent.indent_empty_lines&&(Se=this.__parent.get_indent_string(this.__indent_count)):(Se=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Se+=this.__items.join("")),Se},Ee.prototype.get_indent_size=function(Se,Oe){var De=this.__base_string_length;return Oe=Oe||0,Se<0&&(De=0),De+=Se*this.__indent_size,De+=Oe},Ee.prototype.get_indent_string=function(Se,Oe){var De=this.__base_string;return Oe=Oe||0,Se<0&&(Se=0,De=""),Oe+=Se*this.__indent_size,this.__ensure_cache(Oe),De+=this.__cache[Oe]},Ee.prototype.__ensure_cache=function(Se){for(;Se>=this.__cache.length;)this.__add_column()},Ee.prototype.__add_column=function(){var Se=this.__cache.length,Oe=0,De="";this.__indent_size&&Se>=this.__indent_size&&(Se-=(Oe=Math.floor(Se/this.__indent_size))*this.__indent_size,De=new Array(Oe+1).join(this.__indent_string)),Se&&(De+=new Array(Se+1).join(" ")),this.__cache.push(De)},Ce.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},Ce.prototype.get_line_number=function(){return this.__lines.length},Ce.prototype.get_indent_string=function(Se,Oe){return this.__indent_cache.get_indent_string(Se,Oe)},Ce.prototype.get_indent_size=function(Se,Oe){return this.__indent_cache.get_indent_size(Se,Oe)},Ce.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},Ce.prototype.add_new_line=function(Se){return!(this.is_empty()||!Se&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},Ce.prototype.get_code=function(Se){this.trim(!0);var Oe=this.current_line.pop();Oe&&(Oe[Oe.length-1]===`
`&&(Oe=Oe.replace(/\n+$/g,"")),this.current_line.push(Oe)),this._end_with_newline&&this.__add_outputline();var De=this.__lines.join(`
`);return Se!==`
`&&(De=De.replace(/[\n]/g,Se)),De},Ce.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},Ce.prototype.set_indent=function(Se,Oe){return Se=Se||0,Oe=Oe||0,this.next_line.set_indent(Se,Oe),this.__lines.length>1?(this.current_line.set_indent(Se,Oe),!0):(this.current_line.set_indent(),!1)},Ce.prototype.add_raw_token=function(Se){for(var Oe=0;Oe<Se.newlines;Oe++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Se.whitespace_before),this.current_line.push(Se.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},Ce.prototype.add_token=function(Se){this.__add_space_before_token(),this.current_line.push(Se),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},Ce.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},Ce.prototype.remove_indent=function(Se){for(var Oe=this.__lines.length;Se<Oe;)this.__lines[Se]._remove_indent(),Se++;this.current_line._remove_wrap_indent()},Ce.prototype.trim=function(Se){for(Se=Se!==void 0&&Se,this.current_line.trim();Se&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},Ce.prototype.just_added_newline=function(){return this.current_line.is_empty()},Ce.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},Ce.prototype.ensure_empty_line_above=function(Se,Oe){for(var De=this.__lines.length-2;De>=0;){var Ue=this.__lines[De];if(Ue.is_empty())break;if(Ue.item(0).indexOf(Se)!==0&&Ue.item(-1)!==Oe){this.__lines.splice(De+1,0,new xe(this)),this.previous_line=this.__lines[this.__lines.length-2];break}De--}},ye.exports.Output=Ce},function(ye){ye.exports.Token=function(xe,Ee,Ce,Se){this.type=xe,this.text=Ee,this.comments_before=null,this.newlines=Ce||0,this.whitespace_before=Se||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(ye){function xe(Se,Oe){this.raw_options=Ee(Se,Oe),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function Ee(Se,Oe){var De,Ue={};for(De in Se=Ce(Se))De!==Oe&&(Ue[De]=Se[De]);if(Oe&&Se[Oe])for(De in Se[Oe])Ue[De]=Se[Oe][De];return Ue}function Ce(Se){var Oe,De={};for(Oe in Se)De[Oe.replace(/-/g,"_")]=Se[Oe];return De}xe.prototype._get_array=function(Se,Oe){var De=this.raw_options[Se],Ue=Oe||[];return typeof De=="object"?De!==null&&typeof De.concat=="function"&&(Ue=De.concat()):typeof De=="string"&&(Ue=De.split(/[^a-zA-Z0-9_\/\-]+/)),Ue},xe.prototype._get_boolean=function(Se,Oe){var De=this.raw_options[Se];return De===void 0?!!Oe:!!De},xe.prototype._get_characters=function(Se,Oe){var De=this.raw_options[Se],Ue=Oe||"";return typeof De=="string"&&(Ue=De.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Ue},xe.prototype._get_number=function(Se,Oe){var De=this.raw_options[Se];Oe=parseInt(Oe,10),isNaN(Oe)&&(Oe=0);var Ue=parseInt(De,10);return isNaN(Ue)&&(Ue=Oe),Ue},xe.prototype._get_selection=function(Se,Oe,De){var Ue=this._get_selection_list(Se,Oe,De);if(Ue.length!==1)throw new Error("Invalid Option Value: The option '"+Se+`' can only be one of the following values:
`+Oe+`
You passed in: '`+this.raw_options[Se]+"'");return Ue[0]},xe.prototype._get_selection_list=function(Se,Oe,De){if(!Oe||Oe.length===0)throw new Error("Selection list cannot be empty.");if(De=De||[Oe[0]],!this._is_valid_selection(De,Oe))throw new Error("Invalid Default Value!");var Ue=this._get_array(Se,De);if(!this._is_valid_selection(Ue,Oe))throw new Error("Invalid Option Value: The option '"+Se+`' can contain only the following values:
`+Oe+`
You passed in: '`+this.raw_options[Se]+"'");return Ue},xe.prototype._is_valid_selection=function(Se,Oe){return Se.length&&Oe.length&&!Se.some(function(De){return Oe.indexOf(De)===-1})},ye.exports.Options=xe,ye.exports.normalizeOpts=Ce,ye.exports.mergeOpts=Ee},,function(ye){var xe=RegExp.prototype.hasOwnProperty("sticky");function Ee(Ce){this.__input=Ce||"",this.__input_length=this.__input.length,this.__position=0}Ee.prototype.restart=function(){this.__position=0},Ee.prototype.back=function(){this.__position>0&&(this.__position-=1)},Ee.prototype.hasNext=function(){return this.__position<this.__input_length},Ee.prototype.next=function(){var Ce=null;return this.hasNext()&&(Ce=this.__input.charAt(this.__position),this.__position+=1),Ce},Ee.prototype.peek=function(Ce){var Se=null;return Ce=Ce||0,(Ce+=this.__position)>=0&&Ce<this.__input_length&&(Se=this.__input.charAt(Ce)),Se},Ee.prototype.__match=function(Ce,Se){Ce.lastIndex=Se;var Oe=Ce.exec(this.__input);return!Oe||xe&&Ce.sticky||Oe.index!==Se&&(Oe=null),Oe},Ee.prototype.test=function(Ce,Se){return Se=Se||0,(Se+=this.__position)>=0&&Se<this.__input_length&&!!this.__match(Ce,Se)},Ee.prototype.testChar=function(Ce,Se){var Oe=this.peek(Se);return Ce.lastIndex=0,Oe!==null&&Ce.test(Oe)},Ee.prototype.match=function(Ce){var Se=this.__match(Ce,this.__position);return Se?this.__position+=Se[0].length:Se=null,Se},Ee.prototype.read=function(Ce,Se,Oe){var De,Ue="";return Ce&&(De=this.match(Ce))&&(Ue+=De[0]),!Se||!De&&Ce||(Ue+=this.readUntil(Se,Oe)),Ue},Ee.prototype.readUntil=function(Ce,Se){var Oe,De=this.__position;Ce.lastIndex=this.__position;var Ue=Ce.exec(this.__input);return Ue?(De=Ue.index,Se&&(De+=Ue[0].length)):De=this.__input_length,Oe=this.__input.substring(this.__position,De),this.__position=De,Oe},Ee.prototype.readUntilAfter=function(Ce){return this.readUntil(Ce,!0)},Ee.prototype.get_regexp=function(Ce,Se){var Oe=null,De="g";return Se&&xe&&(De="y"),typeof Ce=="string"&&Ce!==""?Oe=new RegExp(Ce,De):Ce&&(Oe=new RegExp(Ce.source,De)),Oe},Ee.prototype.get_literal_regexp=function(Ce){return RegExp(Ce.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},Ee.prototype.peekUntilAfter=function(Ce){var Se=this.__position,Oe=this.readUntilAfter(Ce);return this.__position=Se,Oe},Ee.prototype.lookBack=function(Ce){var Se=this.__position-1;return Se>=Ce.length&&this.__input.substring(Se-Ce.length,Se).toLowerCase()===Ce},ye.exports.InputScanner=Ee},function(ye,xe,Ee){var Ce=Ee(8).InputScanner,Se=Ee(3).Token,Oe=Ee(10).TokenStream,De=Ee(11).WhitespacePattern,Ue={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},$e=function(Fe,Xe){this._input=new Ce(Fe),this._options=Xe||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new De(this._input)};$e.prototype.tokenize=function(){var Fe;this._input.restart(),this.__tokens=new Oe,this._reset();for(var Xe=new Se(Ue.START,""),Ye=null,He=[],Je=new Oe;Xe.type!==Ue.EOF;){for(Fe=this._get_next_token(Xe,Ye);this._is_comment(Fe);)Je.add(Fe),Fe=this._get_next_token(Xe,Ye);Je.isEmpty()||(Fe.comments_before=Je,Je=new Oe),Fe.parent=Ye,this._is_opening(Fe)?(He.push(Ye),Ye=Fe):Ye&&this._is_closing(Fe,Ye)&&(Fe.opened=Ye,Ye.closed=Fe,Ye=He.pop(),Fe.parent=Ye),Fe.previous=Xe,Xe.next=Fe,this.__tokens.add(Fe),Xe=Fe}return this.__tokens},$e.prototype._is_first_token=function(){return this.__tokens.isEmpty()},$e.prototype._reset=function(){},$e.prototype._get_next_token=function(Fe,Xe){this._readWhitespace();var Ye=this._input.read(/.+/g);return Ye?this._create_token(Ue.RAW,Ye):this._create_token(Ue.EOF,"")},$e.prototype._is_comment=function(Fe){return!1},$e.prototype._is_opening=function(Fe){return!1},$e.prototype._is_closing=function(Fe,Xe){return!1},$e.prototype._create_token=function(Fe,Xe){return new Se(Fe,Xe,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},$e.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},ye.exports.Tokenizer=$e,ye.exports.TOKEN=Ue},function(ye){function xe(Ee){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=Ee}xe.prototype.restart=function(){this.__position=0},xe.prototype.isEmpty=function(){return this.__tokens_length===0},xe.prototype.hasNext=function(){return this.__position<this.__tokens_length},xe.prototype.next=function(){var Ee=null;return this.hasNext()&&(Ee=this.__tokens[this.__position],this.__position+=1),Ee},xe.prototype.peek=function(Ee){var Ce=null;return Ee=Ee||0,(Ee+=this.__position)>=0&&Ee<this.__tokens_length&&(Ce=this.__tokens[Ee]),Ce},xe.prototype.add=function(Ee){this.__parent_token&&(Ee.parent=this.__parent_token),this.__tokens.push(Ee),this.__tokens_length+=1},ye.exports.TokenStream=xe},function(ye,xe,Ee){var Ce=Ee(12).Pattern;function Se(Oe,De){Ce.call(this,Oe,De),De?this._line_regexp=this._input.get_regexp(De._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Se.prototype=new Ce,Se.prototype.__set_whitespace_patterns=function(Oe,De){Oe+="\\t ",De+="\\n\\r",this._match_pattern=this._input.get_regexp("["+Oe+De+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+De+"]")},Se.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var Oe=this._input.read(this._match_pattern);if(Oe===" ")this.whitespace_before_token=" ";else if(Oe){var De=this.__split(this._newline_regexp,Oe);this.newline_count=De.length-1,this.whitespace_before_token=De[this.newline_count]}return Oe},Se.prototype.matching=function(Oe,De){var Ue=this._create();return Ue.__set_whitespace_patterns(Oe,De),Ue._update(),Ue},Se.prototype._create=function(){return new Se(this._input,this)},Se.prototype.__split=function(Oe,De){Oe.lastIndex=0;for(var Ue=0,$e=[],Fe=Oe.exec(De);Fe;)$e.push(De.substring(Ue,Fe.index)),Ue=Fe.index+Fe[0].length,Fe=Oe.exec(De);return Ue<De.length?$e.push(De.substring(Ue,De.length)):$e.push(""),$e},ye.exports.WhitespacePattern=Se},function(ye){function xe(Ee,Ce){this._input=Ee,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,Ce&&(this._starting_pattern=this._input.get_regexp(Ce._starting_pattern,!0),this._match_pattern=this._input.get_regexp(Ce._match_pattern,!0),this._until_pattern=this._input.get_regexp(Ce._until_pattern),this._until_after=Ce._until_after)}xe.prototype.read=function(){var Ee=this._input.read(this._starting_pattern);return this._starting_pattern&&!Ee||(Ee+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),Ee},xe.prototype.read_match=function(){return this._input.match(this._match_pattern)},xe.prototype.until_after=function(Ee){var Ce=this._create();return Ce._until_after=!0,Ce._until_pattern=this._input.get_regexp(Ee),Ce._update(),Ce},xe.prototype.until=function(Ee){var Ce=this._create();return Ce._until_after=!1,Ce._until_pattern=this._input.get_regexp(Ee),Ce._update(),Ce},xe.prototype.starting_with=function(Ee){var Ce=this._create();return Ce._starting_pattern=this._input.get_regexp(Ee,!0),Ce._update(),Ce},xe.prototype.matching=function(Ee){var Ce=this._create();return Ce._match_pattern=this._input.get_regexp(Ee,!0),Ce._update(),Ce},xe.prototype._create=function(){return new xe(this._input,this)},xe.prototype._update=function(){},ye.exports.Pattern=xe},function(ye){function xe(Ee,Ce){Ee=typeof Ee=="string"?Ee:Ee.source,Ce=typeof Ce=="string"?Ce:Ce.source,this.__directives_block_pattern=new RegExp(Ee+/ beautify( \w+[:]\w+)+ /.source+Ce,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(Ee+/\sbeautify\signore:end\s/.source+Ce,"g")}xe.prototype.get_directives=function(Ee){if(!Ee.match(this.__directives_block_pattern))return null;var Ce={};this.__directive_pattern.lastIndex=0;for(var Se=this.__directive_pattern.exec(Ee);Se;)Ce[Se[1]]=Se[2],Se=this.__directive_pattern.exec(Ee);return Ce},xe.prototype.readIgnored=function(Ee){return Ee.readUntilAfter(this.__directives_end_ignore_pattern)},ye.exports.Directives=xe},function(ye,xe,Ee){var Ce=Ee(12).Pattern,Se={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Oe(De,Ue){Ce.call(this,De,Ue),this.__template_pattern=null,this._disabled=Object.assign({},Se),this._excluded=Object.assign({},Se),Ue&&(this.__template_pattern=this._input.get_regexp(Ue.__template_pattern),this._excluded=Object.assign(this._excluded,Ue._excluded),this._disabled=Object.assign(this._disabled,Ue._disabled));var $e=new Ce(De);this.__patterns={handlebars_comment:$e.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:$e.starting_with(/{{{/).until_after(/}}}/),handlebars:$e.starting_with(/{{/).until_after(/}}/),php:$e.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:$e.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:$e.starting_with(/{%/).until_after(/%}/),django_value:$e.starting_with(/{{/).until_after(/}}/),django_comment:$e.starting_with(/{#/).until_after(/#}/),smarty:$e.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:$e.starting_with(/{\*/).until_after(/\*}/),smarty_literal:$e.starting_with(/{literal}/).until_after(/{\/literal}/)}}Oe.prototype=new Ce,Oe.prototype._create=function(){return new Oe(this._input,this)},Oe.prototype._update=function(){this.__set_templated_pattern()},Oe.prototype.disable=function(De){var Ue=this._create();return Ue._disabled[De]=!0,Ue._update(),Ue},Oe.prototype.read_options=function(De){var Ue=this._create();for(var $e in Se)Ue._disabled[$e]=De.templating.indexOf($e)===-1;return Ue._update(),Ue},Oe.prototype.exclude=function(De){var Ue=this._create();return Ue._excluded[De]=!0,Ue._update(),Ue},Oe.prototype.read=function(){var De="";De=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Ue=this._read_template();Ue;)this._match_pattern?Ue+=this._input.read(this._match_pattern):Ue+=this._input.readUntil(this.__template_pattern),De+=Ue,Ue=this._read_template();return this._until_after&&(De+=this._input.readUntilAfter(this._until_pattern)),De},Oe.prototype.__set_templated_pattern=function(){var De=[];this._disabled.php||De.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||De.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||De.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(De.push(this.__patterns.django._starting_pattern.source),De.push(this.__patterns.django_value._starting_pattern.source),De.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||De.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&De.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+De.join("|")+")")},Oe.prototype._read_template=function(){var De="",Ue=this._input.peek();if(Ue==="<"){var $e=this._input.peek(1);this._disabled.php||this._excluded.php||$e!=="?"||(De=De||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||$e!=="%"||(De=De||this.__patterns.erb.read())}else Ue==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(De=(De=(De=De||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(De=De||this.__patterns.django_value.read()),this._excluded.django||(De=(De=De||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(De=(De=(De=De||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return De},ye.exports.TemplatablePattern=Oe},,,,function(ye,xe,Ee){var Ce=Ee(19).Beautifier,Se=Ee(20).Options;ye.exports=function(Oe,De,Ue,$e){return new Ce(Oe,De,Ue,$e).beautify()},ye.exports.defaultOptions=function(){return new Se}},function(ye,xe,Ee){var Ce=Ee(20).Options,Se=Ee(2).Output,Oe=Ee(21).Tokenizer,De=Ee(21).TOKEN,Ue=/\r\n|[\r\n]/,$e=/\r\n|[\r\n]/g,Fe=function(rt,nt){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=rt.max_preserve_newlines,this.preserve_newlines=rt.preserve_newlines,this._output=new Se(rt,nt)};Fe.prototype.current_line_has_match=function(rt){return this._output.current_line.has_match(rt)},Fe.prototype.set_space_before_token=function(rt,nt){this._output.space_before_token=rt,this._output.non_breaking_space=nt},Fe.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},Fe.prototype.add_raw_token=function(rt){this._output.add_raw_token(rt)},Fe.prototype.print_preserved_newlines=function(rt){var nt=0;rt.type!==De.TEXT&&rt.previous.type!==De.TEXT&&(nt=rt.newlines?1:0),this.preserve_newlines&&(nt=rt.newlines<this.max_preserve_newlines+1?rt.newlines:this.max_preserve_newlines+1);for(var it=0;it<nt;it++)this.print_newline(it>0);return nt!==0},Fe.prototype.traverse_whitespace=function(rt){return!(!rt.whitespace_before&&!rt.newlines)&&(this.print_preserved_newlines(rt)||(this._output.space_before_token=!0),!0)},Fe.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},Fe.prototype.print_newline=function(rt){this._output.add_new_line(rt)},Fe.prototype.print_token=function(rt){rt.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(rt.text))},Fe.prototype.indent=function(){this.indent_level++},Fe.prototype.get_full_indent=function(rt){return(rt=this.indent_level+(rt||0))<1?"":this._output.get_indent_string(rt)};var Xe=function(rt,nt){var it=null,dt=null;return nt.closed?(rt==="script"?it="text/javascript":rt==="style"&&(it="text/css"),it=function(lt){for(var ft=null,xt=lt.next;xt.type!==De.EOF&&lt.closed!==xt;){if(xt.type===De.ATTRIBUTE&&xt.text==="type"){xt.next&&xt.next.type===De.EQUALS&&xt.next.next&&xt.next.next.type===De.VALUE&&(ft=xt.next.next.text);break}xt=xt.next}return ft}(nt)||it,it.search("text/css")>-1?dt="css":it.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?dt="javascript":it.search(/(text|application|dojo)\/(x-)?(html)/)>-1?dt="html":it.search(/test\/null/)>-1&&(dt="null"),dt):null};function Ye(rt,nt){return nt.indexOf(rt)!==-1}function He(rt,nt,it){this.parent=rt||null,this.tag=nt?nt.tag_name:"",this.indent_level=it||0,this.parser_token=nt||null}function Je(rt){this._printer=rt,this._current_frame=null}function pt(rt,nt,it,dt){this._source_text=rt||"",nt=nt||{},this._js_beautify=it,this._css_beautify=dt,this._tag_stack=null;var lt=new Ce(nt,"html");this._options=lt,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Je.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},Je.prototype.record_tag=function(rt){var nt=new He(this._current_frame,rt,this._printer.indent_level);this._current_frame=nt},Je.prototype._try_pop_frame=function(rt){var nt=null;return rt&&(nt=rt.parser_token,this._printer.indent_level=rt.indent_level,this._current_frame=rt.parent),nt},Je.prototype._get_frame=function(rt,nt){for(var it=this._current_frame;it&&rt.indexOf(it.tag)===-1;){if(nt&&nt.indexOf(it.tag)!==-1){it=null;break}it=it.parent}return it},Je.prototype.try_pop=function(rt,nt){var it=this._get_frame([rt],nt);return this._try_pop_frame(it)},Je.prototype.indent_to_tag=function(rt){var nt=this._get_frame(rt);nt&&(this._printer.indent_level=nt.indent_level)},pt.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var rt=this._source_text,nt=this._options.eol;this._options.eol==="auto"&&(nt=`
`,rt&&Ue.test(rt)&&(nt=rt.match(Ue)[0]));var it=(rt=rt.replace($e,`
`)).match(/^[\t ]*/)[0],dt={text:"",type:""},lt=new It,ft=new Fe(this._options,it),xt=new Oe(rt,this._options).tokenize();this._tag_stack=new Je(ft);for(var ht=null,Vt=xt.next();Vt.type!==De.EOF;)Vt.type===De.TAG_OPEN||Vt.type===De.COMMENT?lt=ht=this._handle_tag_open(ft,Vt,lt,dt):Vt.type===De.ATTRIBUTE||Vt.type===De.EQUALS||Vt.type===De.VALUE||Vt.type===De.TEXT&&!lt.tag_complete?ht=this._handle_inside_tag(ft,Vt,lt,xt):Vt.type===De.TAG_CLOSE?ht=this._handle_tag_close(ft,Vt,lt):Vt.type===De.TEXT?ht=this._handle_text(ft,Vt,lt):ft.add_raw_token(Vt),dt=ht,Vt=xt.next();return ft._output.get_code(nt)},pt.prototype._handle_tag_close=function(rt,nt,it){var dt={text:nt.text,type:nt.type};return rt.alignment_size=0,it.tag_complete=!0,rt.set_space_before_token(nt.newlines||nt.whitespace_before!=="",!0),it.is_unformatted?rt.add_raw_token(nt):(it.tag_start_char==="<"&&(rt.set_space_before_token(nt.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&it.has_wrapped_attrs&&rt.print_newline(!1)),rt.print_token(nt)),!it.indent_content||it.is_unformatted||it.is_content_unformatted||(rt.indent(),it.indent_content=!1),it.is_inline_element||it.is_unformatted||it.is_content_unformatted||rt.set_wrap_point(),dt},pt.prototype._handle_inside_tag=function(rt,nt,it,dt){var lt=it.has_wrapped_attrs,ft={text:nt.text,type:nt.type};if(rt.set_space_before_token(nt.newlines||nt.whitespace_before!=="",!0),it.is_unformatted)rt.add_raw_token(nt);else if(it.tag_start_char==="{"&&nt.type===De.TEXT)rt.print_preserved_newlines(nt)?(nt.newlines=0,rt.add_raw_token(nt)):rt.print_token(nt);else{if(nt.type===De.ATTRIBUTE?(rt.set_space_before_token(!0),it.attr_count+=1):(nt.type===De.EQUALS||nt.type===De.VALUE&&nt.previous.type===De.EQUALS)&&rt.set_space_before_token(!1),nt.type===De.ATTRIBUTE&&it.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(rt.traverse_whitespace(nt),lt=lt||nt.newlines!==0),this._is_wrap_attributes_force)){var xt=it.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&it.attr_count===1){var ht,Vt=!0,st=0;do{if((ht=dt.peek(st)).type===De.ATTRIBUTE){Vt=!1;break}st+=1}while(st<4&&ht.type!==De.EOF&&ht.type!==De.TAG_CLOSE);xt=!Vt}xt&&(rt.print_newline(!1),lt=!0)}rt.print_token(nt),lt=lt||rt.previous_token_wrapped(),it.has_wrapped_attrs=lt}return ft},pt.prototype._handle_text=function(rt,nt,it){var dt={text:nt.text,type:"TK_CONTENT"};return it.custom_beautifier_name?this._print_custom_beatifier_text(rt,nt,it):it.is_unformatted||it.is_content_unformatted?rt.add_raw_token(nt):(rt.traverse_whitespace(nt),rt.print_token(nt)),dt},pt.prototype._print_custom_beatifier_text=function(rt,nt,it){var dt=this;if(nt.text!==""){var lt,ft=nt.text,xt=1,ht="",Vt="";it.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?lt=this._js_beautify:it.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?lt=this._css_beautify:it.custom_beautifier_name==="html"&&(lt=function(on,an){return new pt(on,an,dt._js_beautify,dt._css_beautify).beautify()}),this._options.indent_scripts==="keep"?xt=0:this._options.indent_scripts==="separate"&&(xt=-rt.indent_level);var st=rt.get_full_indent(xt);if(ft=ft.replace(/\n[ \t]*$/,""),it.custom_beautifier_name!=="html"&&ft[0]==="<"&&ft.match(/^(<!--|<!\[CDATA\[)/)){var $t=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(ft);if(!$t)return void rt.add_raw_token(nt);ht=st+$t[1]+`
`,ft=$t[4],$t[5]&&(Vt=st+$t[5]),ft=ft.replace(/\n[ \t]*$/,""),($t[2]||$t[3].indexOf(`
`)!==-1)&&($t=$t[3].match(/[ \t]+$/))&&(nt.whitespace_before=$t[0])}if(ft)if(lt){var ln=function(){this.eol=`
`};ln.prototype=this._options.raw_options,ft=lt(st+ft,new ln)}else{var Mn=nt.whitespace_before;Mn&&(ft=ft.replace(new RegExp(`
(`+Mn+")?","g"),`
`)),ft=st+ft.replace(/\n/g,`
`+st)}ht&&(ft=ft?ht+ft+`
`+Vt:ht+Vt),rt.print_newline(!1),ft&&(nt.text=ft,nt.whitespace_before="",nt.newlines=0,rt.add_raw_token(nt),rt.print_newline(!0))}},pt.prototype._handle_tag_open=function(rt,nt,it,dt){var lt=this._get_tag_open_token(nt);return!it.is_unformatted&&!it.is_content_unformatted||it.is_empty_element||nt.type!==De.TAG_OPEN||nt.text.indexOf("</")!==0?(rt.traverse_whitespace(nt),this._set_tag_position(rt,nt,lt,it,dt),lt.is_inline_element||rt.set_wrap_point(),rt.print_token(nt)):(rt.add_raw_token(nt),lt.start_tag_token=this._tag_stack.try_pop(lt.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(lt.alignment_size=nt.text.length+1),lt.tag_complete||lt.is_unformatted||(rt.alignment_size=lt.alignment_size),lt};var It=function(rt,nt){if(this.parent=rt||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",nt){var it;this.tag_start_char=nt.text[0],this.text=nt.text,this.tag_start_char==="<"?(it=nt.text.match(/^<([^\s>]*)/),this.tag_check=it?it[1]:""):(it=nt.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=it?it[1]:"",(nt.text.startsWith("{{#>")||nt.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&nt.next!==null?this.tag_check=nt.next.text.split(" ")[0]:this.tag_check=nt.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),nt.type===De.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||nt.closed&&nt.closed.text==="/>";var dt=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(dt=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(dt)))}else this.tag_complete=!0};pt.prototype._get_tag_open_token=function(rt){var nt=new It(this._tag_stack.get_parser_token(),rt);return nt.alignment_size=this._options.wrap_attributes_indent_size,nt.is_end_tag=nt.is_end_tag||Ye(nt.tag_check,this._options.void_elements),nt.is_empty_element=nt.tag_complete||nt.is_start_tag&&nt.is_end_tag,nt.is_unformatted=!nt.tag_complete&&Ye(nt.tag_check,this._options.unformatted),nt.is_content_unformatted=!nt.is_empty_element&&Ye(nt.tag_check,this._options.content_unformatted),nt.is_inline_element=Ye(nt.tag_name,this._options.inline)||nt.tag_name.includes("-")||nt.tag_start_char==="{",nt},pt.prototype._set_tag_position=function(rt,nt,it,dt,lt){if(it.is_empty_element||(it.is_end_tag?it.start_tag_token=this._tag_stack.try_pop(it.tag_name):(this._do_optional_end_element(it)&&(it.is_inline_element||rt.print_newline(!1)),this._tag_stack.record_tag(it),it.tag_name!=="script"&&it.tag_name!=="style"||it.is_unformatted||it.is_content_unformatted||(it.custom_beautifier_name=Xe(it.tag_check,nt)))),Ye(it.tag_check,this._options.extra_liners)&&(rt.print_newline(!1),rt._output.just_added_blankline()||rt.print_newline(!0)),it.is_empty_element)it.tag_start_char==="{"&&it.tag_check==="else"&&(this._tag_stack.indent_to_tag(["if","unless","each"]),it.indent_content=!0,rt.current_line_has_match(/{{#if/)||rt.print_newline(!1)),it.tag_name==="!--"&&lt.type===De.TAG_CLOSE&&dt.is_end_tag&&it.text.indexOf(`
`)===-1||(it.is_inline_element||it.is_unformatted||rt.print_newline(!1),this._calcluate_parent_multiline(rt,it));else if(it.is_end_tag){var ft=!1;ft=(ft=it.start_tag_token&&it.start_tag_token.multiline_content)||!it.is_inline_element&&!(dt.is_inline_element||dt.is_unformatted)&&!(lt.type===De.TAG_CLOSE&&it.start_tag_token===dt)&&lt.type!=="TK_CONTENT",(it.is_content_unformatted||it.is_unformatted)&&(ft=!1),ft&&rt.print_newline(!1)}else it.indent_content=!it.custom_beautifier_name,it.tag_start_char==="<"&&(it.tag_name==="html"?it.indent_content=this._options.indent_inner_html:it.tag_name==="head"?it.indent_content=this._options.indent_head_inner_html:it.tag_name==="body"&&(it.indent_content=this._options.indent_body_inner_html)),it.is_inline_element||it.is_unformatted||lt.type==="TK_CONTENT"&&!it.is_content_unformatted||rt.print_newline(!1),this._calcluate_parent_multiline(rt,it)},pt.prototype._calcluate_parent_multiline=function(rt,nt){!nt.parent||!rt._output.just_added_newline()||(nt.is_inline_element||nt.is_unformatted)&&nt.parent.is_inline_element||(nt.parent.multiline_content=!0)};var At=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],bt=["a","audio","del","ins","map","noscript","video"];pt.prototype._do_optional_end_element=function(rt){var nt=null;if(!rt.is_empty_element&&rt.is_start_tag&&rt.parent){if(rt.tag_name==="body")nt=nt||this._tag_stack.try_pop("head");else if(rt.tag_name==="li")nt=nt||this._tag_stack.try_pop("li",["ol","ul"]);else if(rt.tag_name==="dd"||rt.tag_name==="dt")nt=(nt=nt||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if(rt.parent.tag_name==="p"&&At.indexOf(rt.tag_name)!==-1){var it=rt.parent.parent;it&&bt.indexOf(it.tag_name)!==-1||(nt=nt||this._tag_stack.try_pop("p"))}else rt.tag_name==="rp"||rt.tag_name==="rt"?nt=(nt=nt||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):rt.tag_name==="optgroup"?nt=nt||this._tag_stack.try_pop("optgroup",["select"]):rt.tag_name==="option"?nt=nt||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):rt.tag_name==="colgroup"?nt=nt||this._tag_stack.try_pop("caption",["table"]):rt.tag_name==="thead"?nt=(nt=nt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):rt.tag_name==="tbody"||rt.tag_name==="tfoot"?nt=(nt=(nt=(nt=nt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):rt.tag_name==="tr"?nt=(nt=(nt=nt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):rt.tag_name!=="th"&&rt.tag_name!=="td"||(nt=(nt=nt||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return rt.parent=this._tag_stack.get_parser_token(),nt}},ye.exports.Beautifier=pt},function(ye,xe,Ee){var Ce=Ee(6).Options;function Se(Oe){Ce.call(this,Oe,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Se.prototype=new Ce,ye.exports.Options=Se},function(ye,xe,Ee){var Ce=Ee(9).Tokenizer,Se=Ee(9).TOKEN,Oe=Ee(13).Directives,De=Ee(14).TemplatablePattern,Ue=Ee(12).Pattern,$e={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:Se.START,RAW:Se.RAW,EOF:Se.EOF},Fe=new Oe(/<\!--/,/-->/),Xe=function(Ye,He){Ce.call(this,Ye,He),this._current_tag_name="";var Je=new De(this._input).read_options(this._options),pt=new Ue(this._input);if(this.__patterns={word:Je.until(/[\n\r\t <]/),single_quote:Je.until_after(/'/),double_quote:Je.until_after(/"/),attribute:Je.until(/[\n\r\t =>]|\/>/),element_name:Je.until(/[\n\r\t >\/]/),handlebars_comment:pt.starting_with(/{{!--/).until_after(/--}}/),handlebars:pt.starting_with(/{{/).until_after(/}}/),handlebars_open:pt.until(/[\n\r\t }]/),handlebars_raw_close:pt.until(/}}/),comment:pt.starting_with(/<!--/).until_after(/-->/),cdata:pt.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:pt.starting_with(/<!\[/).until_after(/]>/),processing:pt.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var It=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=pt.matching(It).until_after(It)}};(Xe.prototype=new Ce)._is_comment=function(Ye){return!1},Xe.prototype._is_opening=function(Ye){return Ye.type===$e.TAG_OPEN},Xe.prototype._is_closing=function(Ye,He){return Ye.type===$e.TAG_CLOSE&&He&&((Ye.text===">"||Ye.text==="/>")&&He.text[0]==="<"||Ye.text==="}}"&&He.text[0]==="{"&&He.text[1]==="{")},Xe.prototype._reset=function(){this._current_tag_name=""},Xe.prototype._get_next_token=function(Ye,He){var Je=null;this._readWhitespace();var pt=this._input.peek();return pt===null?this._create_token($e.EOF,""):Je=(Je=(Je=(Je=(Je=(Je=(Je=(Je=(Je=Je||this._read_open_handlebars(pt,He))||this._read_attribute(pt,Ye,He))||this._read_close(pt,He))||this._read_raw_content(pt,Ye,He))||this._read_content_word(pt))||this._read_comment_or_cdata(pt))||this._read_processing(pt))||this._read_open(pt,He))||this._create_token($e.UNKNOWN,this._input.next())},Xe.prototype._read_comment_or_cdata=function(Ye){var He=null,Je=null,pt=null;return Ye==="<"&&(this._input.peek(1)==="!"&&((Je=this.__patterns.comment.read())?(pt=Fe.get_directives(Je))&&pt.ignore==="start"&&(Je+=Fe.readIgnored(this._input)):Je=this.__patterns.cdata.read()),Je&&((He=this._create_token($e.COMMENT,Je)).directives=pt)),He},Xe.prototype._read_processing=function(Ye){var He=null,Je=null;if(Ye==="<"){var pt=this._input.peek(1);pt!=="!"&&pt!=="?"||(Je=(Je=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),Je&&((He=this._create_token($e.COMMENT,Je)).directives=null)}return He},Xe.prototype._read_open=function(Ye,He){var Je=null,pt=null;return He||Ye==="<"&&(Je=this._input.next(),this._input.peek()==="/"&&(Je+=this._input.next()),Je+=this.__patterns.element_name.read(),pt=this._create_token($e.TAG_OPEN,Je)),pt},Xe.prototype._read_open_handlebars=function(Ye,He){var Je=null,pt=null;return He||this._options.indent_handlebars&&Ye==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(Je=(Je=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),pt=this._create_token($e.COMMENT,Je)):(Je=this.__patterns.handlebars_open.read(),pt=this._create_token($e.TAG_OPEN,Je))),pt},Xe.prototype._read_close=function(Ye,He){var Je=null,pt=null;return He&&(He.text[0]==="<"&&(Ye===">"||Ye==="/"&&this._input.peek(1)===">")?(Je=this._input.next(),Ye==="/"&&(Je+=this._input.next()),pt=this._create_token($e.TAG_CLOSE,Je)):He.text[0]==="{"&&Ye==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),pt=this._create_token($e.TAG_CLOSE,"}}"))),pt},Xe.prototype._read_attribute=function(Ye,He,Je){var pt=null,It="";if(Je&&Je.text[0]==="<")if(Ye==="=")pt=this._create_token($e.EQUALS,this._input.next());else if(Ye==='"'||Ye==="'"){var At=this._input.next();At+=Ye==='"'?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),pt=this._create_token($e.VALUE,At)}else(It=this.__patterns.attribute.read())&&(pt=He.type===$e.EQUALS?this._create_token($e.VALUE,It):this._create_token($e.ATTRIBUTE,It));return pt},Xe.prototype._is_content_unformatted=function(Ye){return this._options.void_elements.indexOf(Ye)===-1&&(this._options.content_unformatted.indexOf(Ye)!==-1||this._options.unformatted.indexOf(Ye)!==-1)},Xe.prototype._read_raw_content=function(Ye,He,Je){var pt="";if(Je&&Je.text[0]==="{")pt=this.__patterns.handlebars_raw_close.read();else if(He.type===$e.TAG_CLOSE&&He.opened.text[0]==="<"&&He.text[0]!=="/"){var It=He.opened.text.substr(1).toLowerCase();if(It==="script"||It==="style"){var At=this._read_comment_or_cdata(Ye);if(At)return At.type=$e.TEXT,At;pt=this._input.readUntil(new RegExp("</"+It+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(It)&&(pt=this._input.readUntil(new RegExp("</"+It+"[\\n\\r\\t ]*?>","ig")))}return pt?this._create_token($e.TEXT,pt):null},Xe.prototype._read_content_word=function(Ye){var He="";if(this._options.unformatted_content_delimiter&&Ye===this._options.unformatted_content_delimiter[0]&&(He=this.__patterns.unformatted_content_delimiter.read()),He||(He=this.__patterns.word.read()),He)return this._create_token($e.TEXT,He)},ye.exports.Tokenizer=Xe,ye.exports.TOKEN=$e}],be={},ce=function ye(xe){var Ee=be[xe];if(Ee!==void 0)return Ee.exports;var Ce=be[xe]={exports:{}};return j[xe](Ce,Ce.exports,ye),Ce.exports}(18);ne=ce})();var Te=ne;de=[V,V(7937),V(5040)],he=function(j){var be=V(7937),ce=V(5040);return{html_beautify:function(ye,xe){return Te(ye,xe,be.js_beautify,ce.css_beautify)}}}.apply(Q,de),he===void 0||(q.exports=he)})()},7937:function(q,Q){var V;(function(){var de;(function(){var ne=[function(be,ce,ye){var xe=ye(1).Beautifier,Ee=ye(5).Options;be.exports=function(Ce,Se){return new xe(Ce,Se).beautify()},be.exports.defaultOptions=function(){return new Ee}},function(be,ce,ye){var xe=ye(2).Output,Ee=ye(3).Token,Ce=ye(4),Se=ye(5).Options,Oe=ye(7).Tokenizer,De=ye(7).line_starters,Ue=ye(7).positionable_operators,$e=ye(7).TOKEN;function Fe(st,$t){return $t.indexOf(st)!==-1}function Xe(st,$t){return st&&st.type===$e.RESERVED&&st.text===$t}function Ye(st,$t){return st&&st.type===$e.RESERVED&&Fe(st.text,$t)}var He=["case","return","do","if","throw","else","await","break","continue","async"],Je=function(st){for(var $t={},ln=0;ln<st.length;ln++)$t[st[ln].replace(/-/g,"_")]=st[ln];return $t}(["before-newline","after-newline","preserve-newline"]),pt=[Je.before_newline,Je.preserve_newline],It="BlockStatement",At="Statement",bt="ObjectLiteral",rt="ArrayLiteral",nt="ForInitializer",it="Conditional",dt="Expression";function lt(st,$t){$t.multiline_frame||$t.mode===nt||$t.mode===it||st.remove_indent($t.start_line_index)}function ft(st){return st===rt}function xt(st){return Fe(st,[dt,nt,it])}function ht(st,$t){$t=$t||{},this._source_text=st||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Se($t)}ht.prototype.create_flags=function(st,$t){var ln=0;return st&&(ln=st.indentation_level,!this._output.just_added_newline()&&st.line_indent_level>ln&&(ln=st.line_indent_level)),{mode:$t,parent:st,last_token:st?st.last_token:new Ee($e.START_BLOCK,""),last_word:st?st.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:ln,alignment:0,line_indent_level:st?st.line_indent_level:ln,start_line_index:this._output.get_line_number(),ternary_depth:0}},ht.prototype._reset=function(st){var $t=st.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new xe(this._options,$t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(It);var ln=new Oe(st,this._options);return this._tokens=ln.tokenize(),st},ht.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var st=this._reset(this._source_text),$t=this._options.eol;this._options.eol==="auto"&&($t=`
`,st&&Ce.lineBreak.test(st||"")&&($t=st.match(Ce.lineBreak)[0]));for(var ln=this._tokens.next();ln;)this.handle_token(ln),this._last_last_text=this._flags.last_token.text,this._flags.last_token=ln,ln=this._tokens.next();return this._output.get_code($t)},ht.prototype.handle_token=function(st,$t){st.type===$e.START_EXPR?this.handle_start_expr(st):st.type===$e.END_EXPR?this.handle_end_expr(st):st.type===$e.START_BLOCK?this.handle_start_block(st):st.type===$e.END_BLOCK?this.handle_end_block(st):st.type===$e.WORD||st.type===$e.RESERVED?this.handle_word(st):st.type===$e.SEMICOLON?this.handle_semicolon(st):st.type===$e.STRING?this.handle_string(st):st.type===$e.EQUALS?this.handle_equals(st):st.type===$e.OPERATOR?this.handle_operator(st):st.type===$e.COMMA?this.handle_comma(st):st.type===$e.BLOCK_COMMENT?this.handle_block_comment(st,$t):st.type===$e.COMMENT?this.handle_comment(st,$t):st.type===$e.DOT?this.handle_dot(st):st.type===$e.EOF?this.handle_eof(st):(st.type,$e.UNKNOWN,this.handle_unknown(st,$t))},ht.prototype.handle_whitespace_and_comments=function(st,$t){var ln=st.newlines,Mn=this._options.keep_array_indentation&&ft(this._flags.mode);if(st.comments_before)for(var on=st.comments_before.next();on;)this.handle_whitespace_and_comments(on,$t),this.handle_token(on,$t),on=st.comments_before.next();if(Mn)for(var an=0;an<ln;an+=1)this.print_newline(an>0,$t);else if(this._options.max_preserve_newlines&&ln>this._options.max_preserve_newlines&&(ln=this._options.max_preserve_newlines),this._options.preserve_newlines&&ln>1){this.print_newline(!1,$t);for(var Xt=1;Xt<ln;Xt+=1)this.print_newline(!0,$t)}};var Vt=["async","break","continue","return","throw","yield"];ht.prototype.allow_wrap_or_preserved_newline=function(st,$t){if($t=$t!==void 0&&$t,!this._output.just_added_newline()){var ln=this._options.preserve_newlines&&st.newlines||$t;if(Fe(this._flags.last_token.text,Ue)||Fe(st.text,Ue)){var Mn=Fe(this._flags.last_token.text,Ue)&&Fe(this._options.operator_position,pt)||Fe(st.text,Ue);ln=ln&&Mn}if(ln)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(Ye(this._flags.last_token,Vt))return;this._output.set_wrap_point()}}},ht.prototype.print_newline=function(st,$t){if(!$t&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==$e.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var ln=this._tokens.peek();!(this._flags.mode!==At||this._flags.if_block&&Xe(ln,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(st)&&(this._flags.multiline_frame=!0)},ht.prototype.print_token_line_indentation=function(st){this._output.just_added_newline()&&(this._options.keep_array_indentation&&st.newlines&&(st.text==="["||ft(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(st.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},ht.prototype.print_token=function(st){if(this._output.raw)this._output.add_raw_token(st);else{if(this._options.comma_first&&st.previous&&st.previous.type===$e.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var $t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push($t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(st),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(st),this._output.non_breaking_space=!0,this._output.add_token(st.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},ht.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ht.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ht.prototype.set_mode=function(st){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,st),this._flags=this.create_flags(this._previous_flags,st),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ht.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===At&&lt(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ht.prototype.start_of_object_property=function(){return this._flags.parent.mode===bt&&this._flags.mode===At&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||Ye(this._flags.last_token,["get","set"]))},ht.prototype.start_of_statement=function(st){var $t=!1;return!!($t=($t=($t=($t=($t=($t=($t=$t||Ye(this._flags.last_token,["var","let","const"])&&st.type===$e.WORD)||Xe(this._flags.last_token,"do"))||!(this._flags.parent.mode===bt&&this._flags.mode===At)&&Ye(this._flags.last_token,Vt)&&!st.newlines)||Xe(this._flags.last_token,"else")&&!(Xe(st,"if")&&!st.comments_before))||this._flags.last_token.type===$e.END_EXPR&&(this._previous_flags.mode===nt||this._previous_flags.mode===it))||this._flags.last_token.type===$e.WORD&&this._flags.mode===It&&!this._flags.in_case&&!(st.text==="--"||st.text==="++")&&this._last_last_text!=="function"&&st.type!==$e.WORD&&st.type!==$e.RESERVED)||this._flags.mode===bt&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||Ye(this._flags.last_token,["get","set"])))&&(this.set_mode(At),this.indent(),this.handle_whitespace_and_comments(st,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st,Ye(st,["do","for","if","while"])),!0)},ht.prototype.handle_start_expr=function(st){this.start_of_statement(st)||this.handle_whitespace_and_comments(st);var $t=dt;if(st.text==="["){if(this._flags.last_token.type===$e.WORD||this._flags.last_token.text===")")return Ye(this._flags.last_token,De)&&(this._output.space_before_token=!0),this.print_token(st),this.set_mode($t),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));$t=rt,ft(this._flags.mode)&&(this._flags.last_token.text!=="["&&(this._flags.last_token.text!==","||this._last_last_text!=="]"&&this._last_last_text!=="}")||this._options.keep_array_indentation||this.print_newline()),Fe(this._flags.last_token.type,[$e.START_EXPR,$e.END_EXPR,$e.WORD,$e.OPERATOR,$e.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===$e.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,$t=nt):Fe(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,$t=it):Fe(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&st.whitespace_before===""?this._output.space_before_token=!1:(Fe(this._flags.last_token.text,De)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===$e.EQUALS||this._flags.last_token.type===$e.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st);else if(this._flags.last_token.type===$e.WORD){this._output.space_before_token=!1;var ln=this._tokens.peek(-3);if(this._options.space_after_named_function&&ln){var Mn=this._tokens.peek(-4);Ye(ln,["async","function"])||ln.text==="*"&&Ye(Mn,["async","function"])?this._output.space_before_token=!0:this._flags.mode===bt?ln.text!=="{"&&ln.text!==","&&(ln.text!=="*"||Mn.text!=="{"&&Mn.text!==",")||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(st);(this._flags.last_token.type===$e.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(Fe(this._last_last_text,["function","yield"])||this._flags.mode===bt&&Fe(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===$e.START_BLOCK?this.print_newline():this._flags.last_token.type!==$e.END_EXPR&&this._flags.last_token.type!==$e.START_EXPR&&this._flags.last_token.type!==$e.END_BLOCK&&this._flags.last_token.text!=="."&&this._flags.last_token.type!==$e.COMMA||this.allow_wrap_or_preserved_newline(st,st.newlines),this.print_token(st),this.set_mode($t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},ht.prototype.handle_end_expr=function(st){for(;this._flags.mode===At;)this.restore_mode();this.handle_whitespace_and_comments(st),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(st,st.text==="]"&&ft(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==$e.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(st),this.restore_mode(),lt(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===it&&(this._previous_flags.mode=dt,this._flags.do_block=!1,this._flags.do_while=!1)},ht.prototype.handle_start_block=function(st){this.handle_whitespace_and_comments(st);var $t=this._tokens.peek(),ln=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===$e.END_EXPR?(this.set_mode(It),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(It):ln&&(Fe(ln.text,[":",","])&&Fe($t.type,[$e.STRING,$e.WORD,$e.RESERVED])||Fe($t.text,["get","set","..."])&&Fe(ln.type,[$e.WORD,$e.RESERVED]))?Fe(this._last_last_text,["class","interface"])&&!Fe(ln.text,[":",","])?this.set_mode(It):this.set_mode(bt):this._flags.last_token.type===$e.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(It):Fe(this._flags.last_token.type,[$e.EQUALS,$e.START_EXPR,$e.COMMA,$e.OPERATOR])||Ye(this._flags.last_token,["return","throw","import","default"])?this.set_mode(bt):this.set_mode(It),this._flags.last_token&&Ye(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var Mn=!$t.comments_before&&$t.text==="}",on=Mn&&this._flags.last_word==="function"&&this._flags.last_token.type===$e.END_EXPR;if(this._options.brace_preserve_inline){var an=0,Xt=null;this._flags.inline_frame=!0;do if(an+=1,(Xt=this._tokens.peek(an-1)).newlines){this._flags.inline_frame=!1;break}while(Xt.type!==$e.EOF&&(Xt.type!==$e.END_BLOCK||Xt.opened!==st))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&st.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==$e.OPERATOR&&(on||this._flags.last_token.type===$e.EQUALS||Ye(this._flags.last_token,He)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(!ft(this._previous_flags.mode)||this._flags.last_token.type!==$e.START_EXPR&&this._flags.last_token.type!==$e.COMMA||((this._flags.last_token.type===$e.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===$e.COMMA||this._flags.last_token.type===$e.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(st),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==$e.OPERATOR&&this._flags.last_token.type!==$e.START_EXPR&&(this._flags.last_token.type!==$e.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(st),this.indent(),Mn||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},ht.prototype.handle_end_block=function(st){for(this.handle_whitespace_and_comments(st);this._flags.mode===At;)this.restore_mode();var $t=this._flags.last_token.type===$e.START_BLOCK;this._flags.inline_frame&&!$t?this._output.space_before_token=!0:this._options.brace_style==="expand"?$t||this.print_newline():$t||(ft(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(st)},ht.prototype.handle_word=function(st){if(st.type===$e.RESERVED&&(Fe(st.text,["set","get"])&&this._flags.mode!==bt||st.text==="import"&&Fe(this._tokens.peek().text,["(","."])||Fe(st.text,["as","from"])&&!this._flags.import_block||this._flags.mode===bt&&this._tokens.peek().text===":")&&(st.type=$e.WORD),this.start_of_statement(st)?Ye(this._flags.last_token,["var","let","const"])&&st.type===$e.WORD&&(this._flags.declaration_statement=!0):!st.newlines||xt(this._flags.mode)||this._flags.last_token.type===$e.OPERATOR&&this._flags.last_token.text!=="--"&&this._flags.last_token.text!=="++"||this._flags.last_token.type===$e.EQUALS||!this._options.preserve_newlines&&Ye(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(st):(this.handle_whitespace_and_comments(st),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(Xe(st,"while"))return this._output.space_before_token=!0,this.print_token(st),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&Xe(st,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===At;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&Ye(st,["case","default"]))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(st),void(this._flags.in_case=!0);if(this._flags.last_token.type!==$e.COMMA&&this._flags.last_token.type!==$e.START_EXPR&&this._flags.last_token.type!==$e.EQUALS&&this._flags.last_token.type!==$e.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st),Xe(st,"function"))return(Fe(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!Fe(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==$e.OPERATOR)&&(this._output.just_added_blankline()||st.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===$e.RESERVED||this._flags.last_token.type===$e.WORD?Ye(this._flags.last_token,["get","set","new","export"])||Ye(this._flags.last_token,Vt)||Xe(this._flags.last_token,"default")&&this._last_last_text==="export"||this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===$e.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:(this._flags.multiline_frame||!xt(this._flags.mode)&&!ft(this._flags.mode))&&this.print_newline(),this.print_token(st),void(this._flags.last_word=st.text);var $t="NONE";this._flags.last_token.type===$e.END_BLOCK?this._previous_flags.inline_frame?$t="SPACE":Ye(st,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&st.newlines?$t="NEWLINE":($t="SPACE",this._output.space_before_token=!0):$t="NEWLINE":this._flags.last_token.type===$e.SEMICOLON&&this._flags.mode===It?$t="NEWLINE":this._flags.last_token.type===$e.SEMICOLON&&xt(this._flags.mode)?$t="SPACE":this._flags.last_token.type===$e.STRING?$t="NEWLINE":this._flags.last_token.type===$e.RESERVED||this._flags.last_token.type===$e.WORD||this._flags.last_token.text==="*"&&(Fe(this._last_last_text,["function","yield"])||this._flags.mode===bt&&Fe(this._last_last_text,["{",","]))?$t="SPACE":this._flags.last_token.type===$e.START_BLOCK?$t=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===$e.END_EXPR&&(this._output.space_before_token=!0,$t="NEWLINE"),Ye(st,De)&&this._flags.last_token.text!==")"&&($t=this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?"SPACE":"NEWLINE"),Ye(st,["else","catch","finally"])?(this._flags.last_token.type!==$e.END_BLOCK||this._previous_flags.mode!==It||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&st.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),this._output.current_line.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0):$t==="NEWLINE"?Ye(this._flags.last_token,He)||this._flags.last_token.text==="declare"&&Ye(st,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==$e.END_EXPR?this._flags.last_token.type===$e.START_EXPR&&Ye(st,["var","let","const"])||this._flags.last_token.text===":"||(Xe(st,"if")&&Xe(st.previous,"else")?this._output.space_before_token=!0:this.print_newline()):Ye(st,De)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&ft(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():$t==="SPACE"&&(this._output.space_before_token=!0),!st.previous||st.previous.type!==$e.WORD&&st.previous.type!==$e.RESERVED||(this._output.space_before_token=!0),this.print_token(st),this._flags.last_word=st.text,st.type===$e.RESERVED&&(st.text==="do"?this._flags.do_block=!0:st.text==="if"?this._flags.if_block=!0:st.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Xe(st,"from")&&(this._flags.import_block=!1))},ht.prototype.handle_semicolon=function(st){this.start_of_statement(st)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(st);for(var $t=this._tokens.peek();!(this._flags.mode!==At||this._flags.if_block&&Xe($t,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(st)},ht.prototype.handle_string=function(st){(!st.text.startsWith("`")||st.newlines!==0||st.whitespace_before!==""||st.previous.text!==")"&&this._flags.last_token.type!==$e.WORD)&&(this.start_of_statement(st)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(st),this._flags.last_token.type===$e.RESERVED||this._flags.last_token.type===$e.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===$e.COMMA||this._flags.last_token.type===$e.START_EXPR||this._flags.last_token.type===$e.EQUALS||this._flags.last_token.type===$e.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(st):!st.text.startsWith("`")||this._flags.last_token.type!==$e.END_EXPR||st.previous.text!=="]"&&st.previous.text!==")"||st.newlines!==0?this.print_newline():this._output.space_before_token=!0)),this.print_token(st)},ht.prototype.handle_equals=function(st){this.start_of_statement(st)||this.handle_whitespace_and_comments(st),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(st),this._output.space_before_token=!0},ht.prototype.handle_comma=function(st){this.handle_whitespace_and_comments(st,!0),this.print_token(st),this._output.space_before_token=!0,this._flags.declaration_statement?(xt(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(st)):this._flags.mode===bt||this._flags.mode===At&&this._flags.parent.mode===bt?(this._flags.mode===At&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(st)},ht.prototype.handle_operator=function(st){var $t=st.text==="*"&&(Ye(this._flags.last_token,["function","yield"])||Fe(this._flags.last_token.type,[$e.START_BLOCK,$e.COMMA,$e.END_BLOCK,$e.SEMICOLON])),ln=Fe(st.text,["-","+"])&&(Fe(this._flags.last_token.type,[$e.START_BLOCK,$e.START_EXPR,$e.EQUALS,$e.OPERATOR])||Fe(this._flags.last_token.text,De)||this._flags.last_token.text===",");if(!this.start_of_statement(st)){var Mn=!$t;this.handle_whitespace_and_comments(st,Mn)}if(st.text!=="*"||this._flags.last_token.type!==$e.DOT)if(st.text!=="::"){if(this._flags.last_token.type===$e.OPERATOR&&Fe(this._options.operator_position,pt)&&this.allow_wrap_or_preserved_newline(st),st.text===":"&&this._flags.in_case)return this.print_token(st),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==$e.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var on=!0,an=!0,Xt=!1;if(st.text===":"?this._flags.ternary_depth===0?on=!1:(this._flags.ternary_depth-=1,Xt=!0):st.text==="?"&&(this._flags.ternary_depth+=1),!ln&&!$t&&this._options.preserve_newlines&&Fe(st.text,Ue)){var Rt=st.text===":",en=Rt&&Xt,hn=Rt&&!Xt;switch(this._options.operator_position){case Je.before_newline:return this._output.space_before_token=!hn,this.print_token(st),Rt&&!en||this.allow_wrap_or_preserved_newline(st),void(this._output.space_before_token=!0);case Je.after_newline:return this._output.space_before_token=!0,!Rt||en?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(st):this._output.space_before_token=!1,this.print_token(st),void(this._output.space_before_token=!0);case Je.preserve_newline:return hn||this.allow_wrap_or_preserved_newline(st),on=!(this._output.just_added_newline()||hn),this._output.space_before_token=on,this.print_token(st),void(this._output.space_before_token=!0)}}if($t){this.allow_wrap_or_preserved_newline(st),on=!1;var vn=this._tokens.peek();an=vn&&Fe(vn.type,[$e.WORD,$e.RESERVED])}else if(st.text==="...")this.allow_wrap_or_preserved_newline(st),on=this._flags.last_token.type===$e.START_BLOCK,an=!1;else if(Fe(st.text,["--","++","!","~"])||ln){if(this._flags.last_token.type!==$e.COMMA&&this._flags.last_token.type!==$e.START_EXPR||this.allow_wrap_or_preserved_newline(st),on=!1,an=!1,st.newlines&&(st.text==="--"||st.text==="++"||st.text==="~")){var Pn=Ye(this._flags.last_token,He)&&st.newlines;Pn&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(Pn,!0)}this._flags.last_token.text===";"&&xt(this._flags.mode)&&(on=!0),this._flags.last_token.type===$e.RESERVED?on=!0:this._flags.last_token.type===$e.END_EXPR?on=!(this._flags.last_token.text==="]"&&(st.text==="--"||st.text==="++")):this._flags.last_token.type===$e.OPERATOR&&(on=Fe(st.text,["--","-","++","+"])&&Fe(this._flags.last_token.text,["--","-","++","+"]),Fe(st.text,["+","-"])&&Fe(this._flags.last_token.text,["--","++"])&&(an=!0)),(this._flags.mode!==It||this._flags.inline_frame)&&this._flags.mode!==At||this._flags.last_token.text!=="{"&&this._flags.last_token.text!==";"||this.print_newline()}this._output.space_before_token=this._output.space_before_token||on,this.print_token(st),this._output.space_before_token=an}else this.print_token(st);else this.print_token(st)},ht.prototype.handle_block_comment=function(st,$t){return this._output.raw?(this._output.add_raw_token(st),void(st.directives&&st.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw))):st.directives?(this.print_newline(!1,$t),this.print_token(st),st.directives.preserve==="start"&&(this._output.raw=!0),void this.print_newline(!1,!0)):Ce.newline.test(st.text)||st.newlines?void this.print_block_commment(st,$t):(this._output.space_before_token=!0,this.print_token(st),void(this._output.space_before_token=!0))},ht.prototype.print_block_commment=function(st,$t){var ln,Mn=function(en){for(var hn=[],vn=(en=en.replace(Ce.allLineBreaks,`
`)).indexOf(`
`);vn!==-1;)hn.push(en.substring(0,vn)),vn=(en=en.substring(vn+1)).indexOf(`
`);return en.length&&hn.push(en),hn}(st.text),on=!1,an=!1,Xt=st.whitespace_before,Rt=Xt.length;if(this.print_newline(!1,$t),this.print_token_line_indentation(st),this._output.add_token(Mn[0]),this.print_newline(!1,$t),Mn.length>1){for(on=function(en,hn){for(var vn=0;vn<en.length;vn++)if(en[vn].trim().charAt(0)!==hn)return!1;return!0}(Mn=Mn.slice(1),"*"),an=function(en,hn){for(var vn,Pn=0,Pt=en.length;Pn<Pt;Pn++)if((vn=en[Pn])&&vn.indexOf(hn)!==0)return!1;return!0}(Mn,Xt),on&&(this._flags.alignment=1),ln=0;ln<Mn.length;ln++)on?(this.print_token_line_indentation(st),this._output.add_token(Mn[ln].replace(/^\s+/g,""))):an&&Mn[ln]?(this.print_token_line_indentation(st),this._output.add_token(Mn[ln].substring(Rt))):(this._output.current_line.set_indent(-1),this._output.add_token(Mn[ln])),this.print_newline(!1,$t);this._flags.alignment=0}},ht.prototype.handle_comment=function(st,$t){st.newlines?this.print_newline(!1,$t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(st),this.print_newline(!1,$t)},ht.prototype.handle_dot=function(st){this.start_of_statement(st)||this.handle_whitespace_and_comments(st,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),Ye(this._flags.last_token,He)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(st,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(st)},ht.prototype.handle_unknown=function(st,$t){this.print_token(st),st.text[st.text.length-1]===`
`&&this.print_newline(!1,$t)},ht.prototype.handle_eof=function(st){for(;this._flags.mode===At;)this.restore_mode();this.handle_whitespace_and_comments(st)},be.exports.Beautifier=ht},function(be){function ce(Ee){this.__parent=Ee,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ye(Ee,Ce){this.__cache=[""],this.__indent_size=Ee.indent_size,this.__indent_string=Ee.indent_char,Ee.indent_with_tabs||(this.__indent_string=new Array(Ee.indent_size+1).join(Ee.indent_char)),Ce=Ce||"",Ee.indent_level>0&&(Ce=new Array(Ee.indent_level+1).join(this.__indent_string)),this.__base_string=Ce,this.__base_string_length=Ce.length}function xe(Ee,Ce){this.__indent_cache=new ye(Ee,Ce),this.raw=!1,this._end_with_newline=Ee.end_with_newline,this.indent_size=Ee.indent_size,this.wrap_line_length=Ee.wrap_line_length,this.indent_empty_lines=Ee.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ce(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ce.prototype.clone_empty=function(){var Ee=new ce(this.__parent);return Ee.set_indent(this.__indent_count,this.__alignment_count),Ee},ce.prototype.item=function(Ee){return Ee<0?this.__items[this.__items.length+Ee]:this.__items[Ee]},ce.prototype.has_match=function(Ee){for(var Ce=this.__items.length-1;Ce>=0;Ce--)if(this.__items[Ce].match(Ee))return!0;return!1},ce.prototype.set_indent=function(Ee,Ce){this.is_empty()&&(this.__indent_count=Ee||0,this.__alignment_count=Ce||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},ce.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},ce.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},ce.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Ee=this.__parent.current_line;return Ee.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Ee.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Ee.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Ee.__items[0]===" "&&(Ee.__items.splice(0,1),Ee.__character_count-=1),!0}return!1},ce.prototype.is_empty=function(){return this.__items.length===0},ce.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},ce.prototype.push=function(Ee){this.__items.push(Ee);var Ce=Ee.lastIndexOf(`
`);Ce!==-1?this.__character_count=Ee.length-Ce:this.__character_count+=Ee.length},ce.prototype.pop=function(){var Ee=null;return this.is_empty()||(Ee=this.__items.pop(),this.__character_count-=Ee.length),Ee},ce.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},ce.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},ce.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},ce.prototype.toString=function(){var Ee="";return this.is_empty()?this.__parent.indent_empty_lines&&(Ee=this.__parent.get_indent_string(this.__indent_count)):(Ee=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Ee+=this.__items.join("")),Ee},ye.prototype.get_indent_size=function(Ee,Ce){var Se=this.__base_string_length;return Ce=Ce||0,Ee<0&&(Se=0),Se+=Ee*this.__indent_size,Se+=Ce},ye.prototype.get_indent_string=function(Ee,Ce){var Se=this.__base_string;return Ce=Ce||0,Ee<0&&(Ee=0,Se=""),Ce+=Ee*this.__indent_size,this.__ensure_cache(Ce),Se+=this.__cache[Ce]},ye.prototype.__ensure_cache=function(Ee){for(;Ee>=this.__cache.length;)this.__add_column()},ye.prototype.__add_column=function(){var Ee=this.__cache.length,Ce=0,Se="";this.__indent_size&&Ee>=this.__indent_size&&(Ee-=(Ce=Math.floor(Ee/this.__indent_size))*this.__indent_size,Se=new Array(Ce+1).join(this.__indent_string)),Ee&&(Se+=new Array(Ee+1).join(" ")),this.__cache.push(Se)},xe.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},xe.prototype.get_line_number=function(){return this.__lines.length},xe.prototype.get_indent_string=function(Ee,Ce){return this.__indent_cache.get_indent_string(Ee,Ce)},xe.prototype.get_indent_size=function(Ee,Ce){return this.__indent_cache.get_indent_size(Ee,Ce)},xe.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},xe.prototype.add_new_line=function(Ee){return!(this.is_empty()||!Ee&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},xe.prototype.get_code=function(Ee){this.trim(!0);var Ce=this.current_line.pop();Ce&&(Ce[Ce.length-1]===`
`&&(Ce=Ce.replace(/\n+$/g,"")),this.current_line.push(Ce)),this._end_with_newline&&this.__add_outputline();var Se=this.__lines.join(`
`);return Ee!==`
`&&(Se=Se.replace(/[\n]/g,Ee)),Se},xe.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},xe.prototype.set_indent=function(Ee,Ce){return Ee=Ee||0,Ce=Ce||0,this.next_line.set_indent(Ee,Ce),this.__lines.length>1?(this.current_line.set_indent(Ee,Ce),!0):(this.current_line.set_indent(),!1)},xe.prototype.add_raw_token=function(Ee){for(var Ce=0;Ce<Ee.newlines;Ce++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Ee.whitespace_before),this.current_line.push(Ee.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},xe.prototype.add_token=function(Ee){this.__add_space_before_token(),this.current_line.push(Ee),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},xe.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},xe.prototype.remove_indent=function(Ee){for(var Ce=this.__lines.length;Ee<Ce;)this.__lines[Ee]._remove_indent(),Ee++;this.current_line._remove_wrap_indent()},xe.prototype.trim=function(Ee){for(Ee=Ee!==void 0&&Ee,this.current_line.trim();Ee&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},xe.prototype.just_added_newline=function(){return this.current_line.is_empty()},xe.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},xe.prototype.ensure_empty_line_above=function(Ee,Ce){for(var Se=this.__lines.length-2;Se>=0;){var Oe=this.__lines[Se];if(Oe.is_empty())break;if(Oe.item(0).indexOf(Ee)!==0&&Oe.item(-1)!==Ce){this.__lines.splice(Se+1,0,new ce(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Se--}},be.exports.Output=xe},function(be){be.exports.Token=function(ce,ye,xe,Ee){this.type=ce,this.text=ye,this.comments_before=null,this.newlines=xe||0,this.whitespace_before=Ee||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(be,ce){var ye="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",xe="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",Ee="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",Ce="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+xe+"])";ce.identifier=new RegExp(Ce+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),ce.identifierStart=new RegExp(Ce),ce.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+ye+xe+Ee+"])+"),ce.newline=/[\n\r\u2028\u2029]/,ce.lineBreak=new RegExp(`\r
|`+ce.newline.source),ce.allLineBreaks=new RegExp(ce.lineBreak.source,"g")},function(be,ce,ye){var xe=ye(6).Options,Ee=["before-newline","after-newline","preserve-newline"];function Ce(Se){xe.call(this,Se,"js");var Oe=this.raw_options.brace_style||null;Oe==="expand-strict"?this.raw_options.brace_style="expand":Oe==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var De=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var Ue=0;Ue<De.length;Ue++)De[Ue]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=De[Ue];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",Ee),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Ce.prototype=new xe,be.exports.Options=Ce},function(be){function ce(Ee,Ce){this.raw_options=ye(Ee,Ce),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ye(Ee,Ce){var Se,Oe={};for(Se in Ee=xe(Ee))Se!==Ce&&(Oe[Se]=Ee[Se]);if(Ce&&Ee[Ce])for(Se in Ee[Ce])Oe[Se]=Ee[Ce][Se];return Oe}function xe(Ee){var Ce,Se={};for(Ce in Ee)Se[Ce.replace(/-/g,"_")]=Ee[Ce];return Se}ce.prototype._get_array=function(Ee,Ce){var Se=this.raw_options[Ee],Oe=Ce||[];return typeof Se=="object"?Se!==null&&typeof Se.concat=="function"&&(Oe=Se.concat()):typeof Se=="string"&&(Oe=Se.split(/[^a-zA-Z0-9_\/\-]+/)),Oe},ce.prototype._get_boolean=function(Ee,Ce){var Se=this.raw_options[Ee];return Se===void 0?!!Ce:!!Se},ce.prototype._get_characters=function(Ee,Ce){var Se=this.raw_options[Ee],Oe=Ce||"";return typeof Se=="string"&&(Oe=Se.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Oe},ce.prototype._get_number=function(Ee,Ce){var Se=this.raw_options[Ee];Ce=parseInt(Ce,10),isNaN(Ce)&&(Ce=0);var Oe=parseInt(Se,10);return isNaN(Oe)&&(Oe=Ce),Oe},ce.prototype._get_selection=function(Ee,Ce,Se){var Oe=this._get_selection_list(Ee,Ce,Se);if(Oe.length!==1)throw new Error("Invalid Option Value: The option '"+Ee+`' can only be one of the following values:
`+Ce+`
You passed in: '`+this.raw_options[Ee]+"'");return Oe[0]},ce.prototype._get_selection_list=function(Ee,Ce,Se){if(!Ce||Ce.length===0)throw new Error("Selection list cannot be empty.");if(Se=Se||[Ce[0]],!this._is_valid_selection(Se,Ce))throw new Error("Invalid Default Value!");var Oe=this._get_array(Ee,Se);if(!this._is_valid_selection(Oe,Ce))throw new Error("Invalid Option Value: The option '"+Ee+`' can contain only the following values:
`+Ce+`
You passed in: '`+this.raw_options[Ee]+"'");return Oe},ce.prototype._is_valid_selection=function(Ee,Ce){return Ee.length&&Ce.length&&!Ee.some(function(Se){return Ce.indexOf(Se)===-1})},be.exports.Options=ce,be.exports.normalizeOpts=xe,be.exports.mergeOpts=ye},function(be,ce,ye){var xe=ye(8).InputScanner,Ee=ye(9).Tokenizer,Ce=ye(9).TOKEN,Se=ye(13).Directives,Oe=ye(4),De=ye(12).Pattern,Ue=ye(14).TemplatablePattern;function $e(lt,ft){return ft.indexOf(lt)!==-1}var Fe={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:Ce.START,RAW:Ce.RAW,EOF:Ce.EOF},Xe=new Se(/\/\*/,/\*\//),Ye=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,He=/[0-9]/,Je=/[^\d\.]/,pt=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),It=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";It=(It="\\?\\.(?!\\d) "+(It=It.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var At,bt=new RegExp(It),rt="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),nt=rt.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),it=new RegExp("^(?:"+nt.join("|")+")$"),dt=function(lt,ft){Ee.call(this,lt,ft),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var xt=new De(this._input),ht=new Ue(this._input).read_options(this._options);this.__patterns={template:ht,identifier:ht.starting_with(Oe.identifier).matching(Oe.identifierMatch),number:xt.matching(Ye),punct:xt.matching(bt),comment:xt.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:xt.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:xt.matching(/<!--/),html_comment_end:xt.matching(/-->/),include:xt.starting_with(/#include/).until_after(Oe.lineBreak),shebang:xt.starting_with(/#!/).until_after(Oe.lineBreak),xml:xt.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:ht.until(/['\\\n\r\u2028\u2029]/),double_quote:ht.until(/["\\\n\r\u2028\u2029]/),template_text:ht.until(/[`\\$]/),template_expression:ht.until(/[`}\\]/)}};(dt.prototype=new Ee)._is_comment=function(lt){return lt.type===Fe.COMMENT||lt.type===Fe.BLOCK_COMMENT||lt.type===Fe.UNKNOWN},dt.prototype._is_opening=function(lt){return lt.type===Fe.START_BLOCK||lt.type===Fe.START_EXPR},dt.prototype._is_closing=function(lt,ft){return(lt.type===Fe.END_BLOCK||lt.type===Fe.END_EXPR)&&ft&&(lt.text==="]"&&ft.text==="["||lt.text===")"&&ft.text==="("||lt.text==="}"&&ft.text==="{")},dt.prototype._reset=function(){At=!1},dt.prototype._get_next_token=function(lt,ft){var xt=null;this._readWhitespace();var ht=this._input.peek();return ht===null?this._create_token(Fe.EOF,""):xt=(xt=(xt=(xt=(xt=(xt=(xt=(xt=(xt=xt||this._read_non_javascript(ht))||this._read_string(ht))||this._read_word(lt))||this._read_singles(ht))||this._read_comment(ht))||this._read_regexp(ht,lt))||this._read_xml(ht,lt))||this._read_punctuation())||this._create_token(Fe.UNKNOWN,this._input.next())},dt.prototype._read_word=function(lt){var ft;return(ft=this.__patterns.identifier.read())!==""?(ft=ft.replace(Oe.allLineBreaks,`
`),lt.type!==Fe.DOT&&(lt.type!==Fe.RESERVED||lt.text!=="set"&&lt.text!=="get")&&it.test(ft)?ft!=="in"&&ft!=="of"||lt.type!==Fe.WORD&&lt.type!==Fe.STRING?this._create_token(Fe.RESERVED,ft):this._create_token(Fe.OPERATOR,ft):this._create_token(Fe.WORD,ft)):(ft=this.__patterns.number.read())!==""?this._create_token(Fe.WORD,ft):void 0},dt.prototype._read_singles=function(lt){var ft=null;return lt==="("||lt==="["?ft=this._create_token(Fe.START_EXPR,lt):lt===")"||lt==="]"?ft=this._create_token(Fe.END_EXPR,lt):lt==="{"?ft=this._create_token(Fe.START_BLOCK,lt):lt==="}"?ft=this._create_token(Fe.END_BLOCK,lt):lt===";"?ft=this._create_token(Fe.SEMICOLON,lt):lt==="."&&Je.test(this._input.peek(1))?ft=this._create_token(Fe.DOT,lt):lt===","&&(ft=this._create_token(Fe.COMMA,lt)),ft&&this._input.next(),ft},dt.prototype._read_punctuation=function(){var lt=this.__patterns.punct.read();if(lt!=="")return lt==="="?this._create_token(Fe.EQUALS,lt):lt==="?."?this._create_token(Fe.DOT,lt):this._create_token(Fe.OPERATOR,lt)},dt.prototype._read_non_javascript=function(lt){var ft="";if(lt==="#"){if(this._is_first_token()&&(ft=this.__patterns.shebang.read()))return this._create_token(Fe.UNKNOWN,ft.trim()+`
`);if(ft=this.__patterns.include.read())return this._create_token(Fe.UNKNOWN,ft.trim()+`
`);lt=this._input.next();var xt="#";if(this._input.hasNext()&&this._input.testChar(He)){do xt+=lt=this._input.next();while(this._input.hasNext()&&lt!=="#"&&lt!=="=");return lt==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(xt+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(xt+="{}",this._input.next(),this._input.next())),this._create_token(Fe.WORD,xt)}this._input.back()}else if(lt==="<"&&this._is_first_token()){if(ft=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(Oe.newline);)ft+=this._input.next();return At=!0,this._create_token(Fe.COMMENT,ft)}}else if(At&&lt==="-"&&(ft=this.__patterns.html_comment_end.read()))return At=!1,this._create_token(Fe.COMMENT,ft);return null},dt.prototype._read_comment=function(lt){var ft=null;if(lt==="/"){var xt="";if(this._input.peek(1)==="*"){xt=this.__patterns.block_comment.read();var ht=Xe.get_directives(xt);ht&&ht.ignore==="start"&&(xt+=Xe.readIgnored(this._input)),xt=xt.replace(Oe.allLineBreaks,`
`),(ft=this._create_token(Fe.BLOCK_COMMENT,xt)).directives=ht}else this._input.peek(1)==="/"&&(xt=this.__patterns.comment.read(),ft=this._create_token(Fe.COMMENT,xt))}return ft},dt.prototype._read_string=function(lt){if(lt==="`"||lt==="'"||lt==='"'){var ft=this._input.next();return this.has_char_escapes=!1,ft+=lt==="`"?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(lt),this.has_char_escapes&&this._options.unescape_strings&&(ft=function(xt){for(var ht="",Vt=0,st=new xe(xt),$t=null;st.hasNext();)if(($t=st.match(/([\s]|[^\\]|\\\\)+/g))&&(ht+=$t[0]),st.peek()==="\\"){if(st.next(),st.peek()==="x")$t=st.match(/x([0-9A-Fa-f]{2})/g);else{if(st.peek()!=="u"){ht+="\\",st.hasNext()&&(ht+=st.next());continue}$t=st.match(/u([0-9A-Fa-f]{4})/g)}if(!$t||(Vt=parseInt($t[1],16))>126&&Vt<=255&&$t[0].indexOf("x")===0)return xt;if(Vt>=0&&Vt<32){ht+="\\"+$t[0];continue}ht+=Vt===34||Vt===39||Vt===92?"\\"+String.fromCharCode(Vt):String.fromCharCode(Vt)}return ht}(ft)),this._input.peek()===lt&&(ft+=this._input.next()),ft=ft.replace(Oe.allLineBreaks,`
`),this._create_token(Fe.STRING,ft)}return null},dt.prototype._allow_regexp_or_xml=function(lt){return lt.type===Fe.RESERVED&&$e(lt.text,["return","case","throw","else","do","typeof","yield"])||lt.type===Fe.END_EXPR&&lt.text===")"&&lt.opened.previous.type===Fe.RESERVED&&$e(lt.opened.previous.text,["if","while","for"])||$e(lt.type,[Fe.COMMENT,Fe.START_EXPR,Fe.START_BLOCK,Fe.START,Fe.END_BLOCK,Fe.OPERATOR,Fe.EQUALS,Fe.EOF,Fe.SEMICOLON,Fe.COMMA])},dt.prototype._read_regexp=function(lt,ft){if(lt==="/"&&this._allow_regexp_or_xml(ft)){for(var xt=this._input.next(),ht=!1,Vt=!1;this._input.hasNext()&&(ht||Vt||this._input.peek()!==lt)&&!this._input.testChar(Oe.newline);)xt+=this._input.peek(),ht?ht=!1:(ht=this._input.peek()==="\\",this._input.peek()==="["?Vt=!0:this._input.peek()==="]"&&(Vt=!1)),this._input.next();return this._input.peek()===lt&&(xt+=this._input.next(),xt+=this._input.read(Oe.identifier)),this._create_token(Fe.STRING,xt)}return null},dt.prototype._read_xml=function(lt,ft){if(this._options.e4x&&lt==="<"&&this._allow_regexp_or_xml(ft)){var xt="",ht=this.__patterns.xml.read_match();if(ht){for(var Vt=ht[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),st=Vt.indexOf("{")===0,$t=0;ht;){var ln=!!ht[1],Mn=ht[2];if(!(!!ht[ht.length-1]||Mn.slice(0,8)==="![CDATA[")&&(Mn===Vt||st&&Mn.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(ln?--$t:++$t),xt+=ht[0],$t<=0)break;ht=this.__patterns.xml.read_match()}return ht||(xt+=this._input.match(/[\s\S]*/g)[0]),xt=xt.replace(Oe.allLineBreaks,`
`),this._create_token(Fe.STRING,xt)}}return null},dt.prototype._read_string_recursive=function(lt,ft,xt){var ht,Vt;lt==="'"?Vt=this.__patterns.single_quote:lt==='"'?Vt=this.__patterns.double_quote:lt==="`"?Vt=this.__patterns.template_text:lt==="}"&&(Vt=this.__patterns.template_expression);for(var st=Vt.read(),$t="";this._input.hasNext();){if(($t=this._input.next())===lt||!ft&&Oe.newline.test($t)){this._input.back();break}$t==="\\"&&this._input.hasNext()?((ht=this._input.peek())==="x"||ht==="u"?this.has_char_escapes=!0:ht==="\r"&&this._input.peek(1)===`
`&&this._input.next(),$t+=this._input.next()):xt&&(xt==="${"&&$t==="$"&&this._input.peek()==="{"&&($t+=this._input.next()),xt===$t&&($t+=lt==="`"?this._read_string_recursive("}",ft,"`"):this._read_string_recursive("`",ft,"${"),this._input.hasNext()&&($t+=this._input.next()))),st+=$t+=Vt.read()}return st},be.exports.Tokenizer=dt,be.exports.TOKEN=Fe,be.exports.positionable_operators=pt.slice(),be.exports.line_starters=rt.slice()},function(be){var ce=RegExp.prototype.hasOwnProperty("sticky");function ye(xe){this.__input=xe||"",this.__input_length=this.__input.length,this.__position=0}ye.prototype.restart=function(){this.__position=0},ye.prototype.back=function(){this.__position>0&&(this.__position-=1)},ye.prototype.hasNext=function(){return this.__position<this.__input_length},ye.prototype.next=function(){var xe=null;return this.hasNext()&&(xe=this.__input.charAt(this.__position),this.__position+=1),xe},ye.prototype.peek=function(xe){var Ee=null;return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__input_length&&(Ee=this.__input.charAt(xe)),Ee},ye.prototype.__match=function(xe,Ee){xe.lastIndex=Ee;var Ce=xe.exec(this.__input);return!Ce||ce&&xe.sticky||Ce.index!==Ee&&(Ce=null),Ce},ye.prototype.test=function(xe,Ee){return Ee=Ee||0,(Ee+=this.__position)>=0&&Ee<this.__input_length&&!!this.__match(xe,Ee)},ye.prototype.testChar=function(xe,Ee){var Ce=this.peek(Ee);return xe.lastIndex=0,Ce!==null&&xe.test(Ce)},ye.prototype.match=function(xe){var Ee=this.__match(xe,this.__position);return Ee?this.__position+=Ee[0].length:Ee=null,Ee},ye.prototype.read=function(xe,Ee,Ce){var Se,Oe="";return xe&&(Se=this.match(xe))&&(Oe+=Se[0]),!Ee||!Se&&xe||(Oe+=this.readUntil(Ee,Ce)),Oe},ye.prototype.readUntil=function(xe,Ee){var Ce,Se=this.__position;xe.lastIndex=this.__position;var Oe=xe.exec(this.__input);return Oe?(Se=Oe.index,Ee&&(Se+=Oe[0].length)):Se=this.__input_length,Ce=this.__input.substring(this.__position,Se),this.__position=Se,Ce},ye.prototype.readUntilAfter=function(xe){return this.readUntil(xe,!0)},ye.prototype.get_regexp=function(xe,Ee){var Ce=null,Se="g";return Ee&&ce&&(Se="y"),typeof xe=="string"&&xe!==""?Ce=new RegExp(xe,Se):xe&&(Ce=new RegExp(xe.source,Se)),Ce},ye.prototype.get_literal_regexp=function(xe){return RegExp(xe.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ye.prototype.peekUntilAfter=function(xe){var Ee=this.__position,Ce=this.readUntilAfter(xe);return this.__position=Ee,Ce},ye.prototype.lookBack=function(xe){var Ee=this.__position-1;return Ee>=xe.length&&this.__input.substring(Ee-xe.length,Ee).toLowerCase()===xe},be.exports.InputScanner=ye},function(be,ce,ye){var xe=ye(8).InputScanner,Ee=ye(3).Token,Ce=ye(10).TokenStream,Se=ye(11).WhitespacePattern,Oe={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},De=function(Ue,$e){this._input=new xe(Ue),this._options=$e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new Se(this._input)};De.prototype.tokenize=function(){var Ue;this._input.restart(),this.__tokens=new Ce,this._reset();for(var $e=new Ee(Oe.START,""),Fe=null,Xe=[],Ye=new Ce;$e.type!==Oe.EOF;){for(Ue=this._get_next_token($e,Fe);this._is_comment(Ue);)Ye.add(Ue),Ue=this._get_next_token($e,Fe);Ye.isEmpty()||(Ue.comments_before=Ye,Ye=new Ce),Ue.parent=Fe,this._is_opening(Ue)?(Xe.push(Fe),Fe=Ue):Fe&&this._is_closing(Ue,Fe)&&(Ue.opened=Fe,Fe.closed=Ue,Fe=Xe.pop(),Ue.parent=Fe),Ue.previous=$e,$e.next=Ue,this.__tokens.add(Ue),$e=Ue}return this.__tokens},De.prototype._is_first_token=function(){return this.__tokens.isEmpty()},De.prototype._reset=function(){},De.prototype._get_next_token=function(Ue,$e){this._readWhitespace();var Fe=this._input.read(/.+/g);return Fe?this._create_token(Oe.RAW,Fe):this._create_token(Oe.EOF,"")},De.prototype._is_comment=function(Ue){return!1},De.prototype._is_opening=function(Ue){return!1},De.prototype._is_closing=function(Ue,$e){return!1},De.prototype._create_token=function(Ue,$e){return new Ee(Ue,$e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},De.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},be.exports.Tokenizer=De,be.exports.TOKEN=Oe},function(be){function ce(ye){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=ye}ce.prototype.restart=function(){this.__position=0},ce.prototype.isEmpty=function(){return this.__tokens_length===0},ce.prototype.hasNext=function(){return this.__position<this.__tokens_length},ce.prototype.next=function(){var ye=null;return this.hasNext()&&(ye=this.__tokens[this.__position],this.__position+=1),ye},ce.prototype.peek=function(ye){var xe=null;return ye=ye||0,(ye+=this.__position)>=0&&ye<this.__tokens_length&&(xe=this.__tokens[ye]),xe},ce.prototype.add=function(ye){this.__parent_token&&(ye.parent=this.__parent_token),this.__tokens.push(ye),this.__tokens_length+=1},be.exports.TokenStream=ce},function(be,ce,ye){var xe=ye(12).Pattern;function Ee(Ce,Se){xe.call(this,Ce,Se),Se?this._line_regexp=this._input.get_regexp(Se._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Ee.prototype=new xe,Ee.prototype.__set_whitespace_patterns=function(Ce,Se){Ce+="\\t ",Se+="\\n\\r",this._match_pattern=this._input.get_regexp("["+Ce+Se+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+Se+"]")},Ee.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var Ce=this._input.read(this._match_pattern);if(Ce===" ")this.whitespace_before_token=" ";else if(Ce){var Se=this.__split(this._newline_regexp,Ce);this.newline_count=Se.length-1,this.whitespace_before_token=Se[this.newline_count]}return Ce},Ee.prototype.matching=function(Ce,Se){var Oe=this._create();return Oe.__set_whitespace_patterns(Ce,Se),Oe._update(),Oe},Ee.prototype._create=function(){return new Ee(this._input,this)},Ee.prototype.__split=function(Ce,Se){Ce.lastIndex=0;for(var Oe=0,De=[],Ue=Ce.exec(Se);Ue;)De.push(Se.substring(Oe,Ue.index)),Oe=Ue.index+Ue[0].length,Ue=Ce.exec(Se);return Oe<Se.length?De.push(Se.substring(Oe,Se.length)):De.push(""),De},be.exports.WhitespacePattern=Ee},function(be){function ce(ye,xe){this._input=ye,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,xe&&(this._starting_pattern=this._input.get_regexp(xe._starting_pattern,!0),this._match_pattern=this._input.get_regexp(xe._match_pattern,!0),this._until_pattern=this._input.get_regexp(xe._until_pattern),this._until_after=xe._until_after)}ce.prototype.read=function(){var ye=this._input.read(this._starting_pattern);return this._starting_pattern&&!ye||(ye+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),ye},ce.prototype.read_match=function(){return this._input.match(this._match_pattern)},ce.prototype.until_after=function(ye){var xe=this._create();return xe._until_after=!0,xe._until_pattern=this._input.get_regexp(ye),xe._update(),xe},ce.prototype.until=function(ye){var xe=this._create();return xe._until_after=!1,xe._until_pattern=this._input.get_regexp(ye),xe._update(),xe},ce.prototype.starting_with=function(ye){var xe=this._create();return xe._starting_pattern=this._input.get_regexp(ye,!0),xe._update(),xe},ce.prototype.matching=function(ye){var xe=this._create();return xe._match_pattern=this._input.get_regexp(ye,!0),xe._update(),xe},ce.prototype._create=function(){return new ce(this._input,this)},ce.prototype._update=function(){},be.exports.Pattern=ce},function(be){function ce(ye,xe){ye=typeof ye=="string"?ye:ye.source,xe=typeof xe=="string"?xe:xe.source,this.__directives_block_pattern=new RegExp(ye+/ beautify( \w+[:]\w+)+ /.source+xe,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ye+/\sbeautify\signore:end\s/.source+xe,"g")}ce.prototype.get_directives=function(ye){if(!ye.match(this.__directives_block_pattern))return null;var xe={};this.__directive_pattern.lastIndex=0;for(var Ee=this.__directive_pattern.exec(ye);Ee;)xe[Ee[1]]=Ee[2],Ee=this.__directive_pattern.exec(ye);return xe},ce.prototype.readIgnored=function(ye){return ye.readUntilAfter(this.__directives_end_ignore_pattern)},be.exports.Directives=ce},function(be,ce,ye){var xe=ye(12).Pattern,Ee={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Ce(Se,Oe){xe.call(this,Se,Oe),this.__template_pattern=null,this._disabled=Object.assign({},Ee),this._excluded=Object.assign({},Ee),Oe&&(this.__template_pattern=this._input.get_regexp(Oe.__template_pattern),this._excluded=Object.assign(this._excluded,Oe._excluded),this._disabled=Object.assign(this._disabled,Oe._disabled));var De=new xe(Se);this.__patterns={handlebars_comment:De.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:De.starting_with(/{{{/).until_after(/}}}/),handlebars:De.starting_with(/{{/).until_after(/}}/),php:De.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:De.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:De.starting_with(/{%/).until_after(/%}/),django_value:De.starting_with(/{{/).until_after(/}}/),django_comment:De.starting_with(/{#/).until_after(/#}/),smarty:De.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:De.starting_with(/{\*/).until_after(/\*}/),smarty_literal:De.starting_with(/{literal}/).until_after(/{\/literal}/)}}Ce.prototype=new xe,Ce.prototype._create=function(){return new Ce(this._input,this)},Ce.prototype._update=function(){this.__set_templated_pattern()},Ce.prototype.disable=function(Se){var Oe=this._create();return Oe._disabled[Se]=!0,Oe._update(),Oe},Ce.prototype.read_options=function(Se){var Oe=this._create();for(var De in Ee)Oe._disabled[De]=Se.templating.indexOf(De)===-1;return Oe._update(),Oe},Ce.prototype.exclude=function(Se){var Oe=this._create();return Oe._excluded[Se]=!0,Oe._update(),Oe},Ce.prototype.read=function(){var Se="";Se=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Oe=this._read_template();Oe;)this._match_pattern?Oe+=this._input.read(this._match_pattern):Oe+=this._input.readUntil(this.__template_pattern),Se+=Oe,Oe=this._read_template();return this._until_after&&(Se+=this._input.readUntilAfter(this._until_pattern)),Se},Ce.prototype.__set_templated_pattern=function(){var Se=[];this._disabled.php||Se.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||Se.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||Se.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(Se.push(this.__patterns.django._starting_pattern.source),Se.push(this.__patterns.django_value._starting_pattern.source),Se.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||Se.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&Se.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+Se.join("|")+")")},Ce.prototype._read_template=function(){var Se="",Oe=this._input.peek();if(Oe==="<"){var De=this._input.peek(1);this._disabled.php||this._excluded.php||De!=="?"||(Se=Se||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||De!=="%"||(Se=Se||this.__patterns.erb.read())}else Oe==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(Se=(Se=(Se=Se||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(Se=Se||this.__patterns.django_value.read()),this._excluded.django||(Se=(Se=Se||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(Se=(Se=(Se=Se||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return Se},be.exports.TemplatablePattern=Ce}],Te={},j=function be(ce){var ye=Te[ce];if(ye!==void 0)return ye.exports;var xe=Te[ce]={exports:{}};return ne[ce](xe,xe.exports,be),xe.exports}(0);de=j})();var he=de;(V=function(){return{js_beautify:he}}.apply(Q,[]))===void 0||(q.exports=V)})()},1512:function(q,Q,V){var de=V(3244),he=V(6906),ne=V(7665),Te=V(975),j=V(4991),be=V(4209),ce=V(9702),ye=V(6757),xe=V(8381),Ee=V(5543),Ce=V(7781),Se=V(8908),Oe=V(1286),De=V(6768);Q=function($e){return new de($e)},de.methods({offset:function(){return he(this)},hide:function(){return this.css("display","none")},show:function(){return ne(this),this},first:function(){return Q(this[0])},last:function(){return Q(ce(this))},get:function($e){return this[$e]},eq:function($e){return Q(this[$e])},on:function($e,Fe,Xe){return Ee.on(this,$e,Fe,Xe),this},off:function($e,Fe,Xe){return Ee.off(this,$e,Fe,Xe),this},html:function($e){var Fe=be.html(this,$e);return Oe($e)?Fe:this},text:function($e){var Fe=be.text(this,$e);return Oe($e)?Fe:this},val:function($e){var Fe=be.val(this,$e);return Oe($e)?Fe:this},css:function($e,Fe){var Xe=Te(this,$e,Fe);return Ue($e,Fe)?Xe:this},attr:function($e,Fe){var Xe=j(this,$e,Fe);return Ue($e,Fe)?Xe:this},data:function($e,Fe){var Xe=xe(this,$e,Fe);return Ue($e,Fe)?Xe:this},rmAttr:function($e){return j.remove(this,$e),this},remove:function(){return ye(this),this},addClass:function($e){return Ce.add(this,$e),this},rmClass:function($e){return Ce.remove(this,$e),this},toggleClass:function($e){return Ce.toggle(this,$e),this},hasClass:function($e){return Ce.has(this,$e)},parent:function(){return Q(this[0].parentNode)},append:function($e){return Se.append(this,$e),this},prepend:function($e){return Se.prepend(this,$e),this},before:function($e){return Se.before(this,$e),this},after:function($e){return Se.after(this,$e),this}});var Ue=function($e,Fe){return Oe(Fe)&&De($e)};q.exports=Q},4991:function(q,Q,V){var de=V(1352),he=V(5166),ne=V(6768),Te=V(3783),j=V(1286),be=V(2341);(Q=function(ce,ye,xe){if(ce=be(ce),j(xe)&&ne(ye))return function(Ce,Se){return Ce.getAttribute(Se)}(ce[0],ye);var Ee=ye;he(Ee)||((Ee={})[ye]=xe),function(Ce,Se){Te(Ce,function(Oe){Te(Se,function(De,Ue){Oe.setAttribute(Ue,De)})})}(ce,Ee)}).remove=function(ce,ye){ce=be(ce),ye=de(ye),Te(ce,function(xe){Te(ye,function(Ee){xe.removeAttribute(Ee)})})},q.exports=Q},7781:function(q,Q,V){var de=V(1352),he=V(6053),ne=V(2341),Te=V(6768),j=V(3783);function be(ce){return Te(ce)?ce.split(/\s+/):de(ce)}Q={add:function(ce,ye){ce=ne(ce);var xe=be(ye);j(ce,function(Ee){var Ce=[];j(xe,function(Se){Q.has(Ee,Se)||Ce.push(Se)}),Ce.length!==0&&(Ee.className+=(Ee.className?" ":"")+Ce.join(" "))})},has:function(ce,ye){ce=ne(ce);var xe=new RegExp("(^|\\s)"+ye+"(\\s|$)");return he(ce,function(Ee){return xe.test(Ee.className)})},toggle:function(ce,ye){ce=ne(ce),j(ce,function(xe){if(!Q.has(xe,ye))return Q.add(xe,ye);Q.remove(xe,ye)})},remove:function(ce,ye){ce=ne(ce);var xe=be(ye);j(ce,function(Ee){j(xe,function(Ce){Ee.classList.remove(Ce)})})}},q.exports=Q},975:function(q,Q,V){var de=V(6768),he=V(5166),ne=V(7622),Te=V(1286),j=V(6341),be=V(3990),ce=V(2341),ye=V(747),xe=V(3783);Q=function(Ce,Se,Oe){if(Ce=ce(Ce),Te(Oe)&&de(Se))return function(Ue,$e){return Ue.style[ye($e)]||getComputedStyle(Ue,"").getPropertyValue($e)}(Ce[0],Se);var De=Se;he(De)||((De={})[Se]=Oe),function(Ue,$e){xe(Ue,function(Fe){var Xe=";";xe($e,function(Ye,He){He=ye.dash(He),Xe+=He+":"+function(Je,pt){return be(pt)&&!j(Ee,ne(Je))?pt+"px":pt}(He,Ye)+";"}),Fe.style.cssText+=Xe})}(Ce,De)};var Ee=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];q.exports=Q},8381:function(q,Q,V){var de=V(4991),he=V(6768),ne=V(5166),Te=V(3783);V(2341),Q=function(j,be,ce){var ye=be;return he(be)&&(ye="data-"+be),ne(be)&&(ye={},Te(be,function(xe,Ee){ye["data-"+Ee]=xe})),de(j,ye,ce)},q.exports=Q},5543:function(q,Q,V){var de=V(2443),he=V(1286),ne=V(2341),Te=V(3783);function j(be){return function(ce,ye,xe,Ee){ce=ne(ce),he(Ee)&&(Ee=xe,xe=void 0),Te(ce,function(Ce){de[be](Ce,ye,xe,Ee)})}}Q={on:j("add"),off:j("remove")},q.exports=Q},8908:function(q,Q,V){var de=V(3783),he=V(2341),ne=V(6768);function Te(j){return function(be,ce){be=he(be),de(be,function(ye){if(ne(ce))ye.insertAdjacentHTML(j,ce);else{var xe=ye.parentNode;switch(j){case"beforebegin":xe&&xe.insertBefore(ce,ye);break;case"afterend":xe&&xe.insertBefore(ce,ye.nextSibling);break;case"beforeend":ye.appendChild(ce);break;case"afterbegin":ye.prepend(ce)}}})}}Q={before:Te("beforebegin"),after:Te("afterend"),append:Te("beforeend"),prepend:Te("afterbegin")},q.exports=Q},6906:function(q,Q,V){var de=V(2341);Q=function(he){var ne=(he=de(he))[0].getBoundingClientRect();return{left:ne.left+window.pageXOffset,top:ne.top+window.pageYOffset,width:Math.round(ne.width),height:Math.round(ne.height)}},q.exports=Q},4209:function(q,Q,V){var de=V(1286),he=V(3783),ne=V(2341);function Te(j){return function(be,ce){var ye=(be=ne(be))[0];if(de(ce))return ye?ye[j]:"";ye&&he(be,function(xe){xe[j]=ce})}}Q={html:Te("innerHTML"),text:Te("textContent"),val:Te("value")},q.exports=Q},6757:function(q,Q,V){var de=V(3783),he=V(2341);Q=function(ne){ne=he(ne),de(ne,function(Te){var j=Te.parentNode;j&&j.removeChild(Te)})},q.exports=Q},2341:function(q,Q,V){var de=V(6768),he=V(1352),ne=V(3244);Q=function(Te){return he(de(Te)?new ne(Te):Te)},q.exports=Q},7665:function(q,Q,V){var de=V(3783),he=V(2341);Q=function(Te){Te=he(Te),de(Te,function(j){(function(be){return getComputedStyle(be,"").getPropertyValue("display")=="none"})(j)&&(j.style.display=function(be){var ce,ye;return ne[be]||(ce=document.createElement(be),document.documentElement.appendChild(ce),ye=getComputedStyle(ce,"").getPropertyValue("display"),ce.parentNode.removeChild(ce),ye=="none"&&(ye="block"),ne[be]=ye),ne[be]}(j.nodeName))})};var ne={};q.exports=Q},7496:function(q,Q,V){var de=V(6329),he=V(1352),ne=V(5022),Te=V(7653),j=V(9537),be=(Q=function(ce,ye){return be.extend(ce,ye)}).Base=function ce(ye,xe,Ee){Ee=Ee||{};var Ce=xe.className||Te(xe,"initialize.name")||"";delete xe.className;var Se=function(){var Oe=he(arguments);return this.initialize&&this.initialize.apply(this,Oe)||this};if(!j)try{Se=new Function("toArr","return function "+Ce+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(he)}catch{}return ne(Se,ye),Se.prototype.constructor=Se,Se.extend=function(Oe,De){return ce(Se,Oe,De)},Se.inherits=function(Oe){ne(Se,Oe)},Se.methods=function(Oe){return de(Se.prototype,Oe),Se},Se.statics=function(Oe){return de(Se,Oe),Se},Se.methods(xe).statics(Ee),Se}(Object,{className:"Base",callSuper:function(ce,ye,xe){return ce.prototype[ye].apply(this,xe)},toString:function(){return this.constructor.name}});q.exports=Q},3009:function(q,Q,V){var de=V(7496),he=V(6768),ne=V(9882),Te=V(3279),j=V(5925),be=V(5044);Q=de({initialize:function(Se){he(Se)&&(Se=Q.parse(Se)),this.model=Se.model,this.val=Se.val},toRgb:function(){var Se=this.val;this.model==="hsl"&&(Se=j(Se));var Oe="rgba";return Se[3]===1&&(Oe="rgb",Se=Se.slice(0,3)),Oe+"("+Se.join(", ")+")"},toHex:function(){var Se=this.val;this.model==="hsl"&&(Se=j(Se));var Oe=be.encode(Se.slice(0,3));return Oe[0]===Oe[1]&&Oe[2]===Oe[3]&&Oe[4]===Oe[5]&&(Oe=Oe[0]+Oe[2]+Oe[5]),"#"+Oe},toHsl:function(){var Se=this.val;this.model==="rgb"&&(Se=Te(Se));var Oe="hsla";return Se[3]===1&&(Oe="hsl",Se=Se.slice(0,3)),Se[1]=Se[1]+"%",Se[2]=Se[2]+"%",Oe+"("+Se.join(", ")+")"}},{parse:function(Se){var Oe,De,Ue=[0,0,0,1],$e="rgb";if(De=Se.match(ce))for(De=De[1],Oe=0;Oe<3;Oe++)Ue[Oe]=parseInt(De[Oe]+De[Oe],16);else if(De=Se.match(ye))for(De=De[1],Oe=0;Oe<3;Oe++){var Fe=2*Oe;Ue[Oe]=parseInt(De.slice(Fe,Fe+2),16)}else if(De=Se.match(xe)){for(Oe=0;Oe<3;Oe++)Ue[Oe]=parseInt(De[Oe+1],0);De[4]&&(Ue[3]=parseFloat(De[4]))}else if(De=Se.match(Ee)){for(Oe=0;Oe<3;Oe++)Ue[Oe]=Math.round(2.55*parseFloat(De[Oe+1]));De[4]&&(Ue[3]=parseFloat(De[4]))}else(De=Se.match(Ce))&&($e="hsl",Ue=[(parseFloat(De[1])%360+360)%360,ne(parseFloat(De[2]),0,100),ne(parseFloat(De[3]),0,100),ne(parseFloat(De[4]),0,1)]);return{val:Ue,model:$e}}});var ce=/^#([a-fA-F0-9]{3})$/,ye=/^#([a-fA-F0-9]{6})$/,xe=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,Ee=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,Ce=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;q.exports=Q},1443:function(q,Q,V){var de=V(7496),he=V(6257),ne=V(3783),Te=V(9677),j=V(8763),be=V(4675);Q=de({initialize:function(){this._events=this._events||{}},on:function(ce,ye){return this._events[ce]=this._events[ce]||[],this._events[ce].push(ye),this},off:function(ce,ye){var xe=this._events;if(he(xe,ce)){var Ee=xe[ce].indexOf(ye);return Ee>-1&&xe[ce].splice(Ee,1),this}},once:function(ce,ye){return this.on(ce,j(ye)),this},emit:function(ce){var ye=this;if(he(this._events,ce)){var xe=Te(arguments,1),Ee=be(this._events[ce]);return ne(Ee,function(Ce){return Ce.apply(ye,xe)},this),this}},removeAllListeners:function(ce){return ce?delete this._events[ce]:this._events={},this}},{mixin:function(ce){ne(["on","off","once","emit","removeAllListeners"],function(ye){ce[ye]=Q.prototype[ye]}),ce._events=ce._events||{}}}),q.exports=Q},9640:function(q,Q,V){var de=V(7496),he=V(4454),ne=V(6472),Te=V(3783),j=V(2533);Q=de({initialize:function(be){ne(be)?(this.size=be.length,Te(be,function(ce,ye){this[ce]=ye},this)):(this.size=j(be).length,Te(be,function(ce,ye){this[ye]=ce},this)),he(this)}}),q.exports=Q},125:function(q,Q,V){var de=V(5128),he=V(615),ne=V(8887),Te=V(4400),j=V(4193),be=V(5166),ce=he("local");Q=de.extend({initialize:function(ye,xe){this._name=ye,xe=xe||{};var Ee=ce.getItem(ye);try{Ee=JSON.parse(Ee)}catch{Ee={}}be(Ee)||(Ee={}),xe=j(Ee,xe),this.callSuper(de,"initialize",[xe])},save:function(ye){if(ne(ye))return ce.removeItem(this._name);ce.setItem(this._name,Te(ye))}}),q.exports=Q},4989:function(q,Q,V){var de=V(1443),he=V(9640),ne=V(1352),Te=V(1286),j=V(4675),be=V(6768),ce=V(3990);Q=de.extend({initialize:function(ye,xe){this.name=ye,this.setLevel(Te(xe)?Q.level.DEBUG:xe),this.callSuper(de,"initialize",arguments)},setLevel:function(ye){return be(ye)?((ye=Q.level[ye.toUpperCase()])&&(this._level=ye),this):(ce(ye)&&(this._level=ye),this)},getLevel:function(){return this._level},formatter:function(ye,xe){return xe},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(ye,xe){return(xe=ne(xe)).length===0?this:(this.emit("all",ye,j(xe)),Q.level[ye.toUpperCase()]<this._level||(this.emit(ye,j(xe)),(ye==="debug"?console.log:console[ye]).apply(console,this.formatter(ye,xe))),this)}},{level:new he({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),q.exports=Q},2765:function(q,Q,V){var de=V(1443);Q=de.extend({className:"MediaQuery",initialize:function(he){var ne=this;this.callSuper(de,"initialize"),this._mql=window.matchMedia(he),this._mql.addListener(function(){ne.emit(ne.isMatch()?"match":"unmatch")})},isMatch:function(){return this._mql.matches}}),q.exports=Q},2289:function(q,Q,V){var de=V(7496);(Q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(Q=de({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),q.exports=Q},242:function(q,Q,V){var de=V(8985),he=V(8613),ne=V(5543),Te=V(975),j=V(6341),be=V(6329),ce=V(5610);Q=ce.ResizeObserver?de.extend({initialize:function(ye){var xe=this;if(ye._resizeSensor)return ye._resizeSensor;this.callSuper(de,"initialize");var Ee=new ce.ResizeObserver(function(){return xe.emit()});Ee.observe(ye),ye._resizeSensor=this,this._resizeObserver=Ee,this._el=ye},destroy:function(){var ye=this._el;ye._resizeSensor&&(this.rmAllListeners(),delete ye._resizeSensor,this._resizeObserver.unobserve(ye))}}):de.extend({initialize:function(ye){if(ye._resizeSensor)return ye._resizeSensor;this.callSuper(de,"initialize"),this._el=ye,ye._resizeSensor=this,j(["absolute","relative","fixed","sticky"],Te(ye,"position"))||Te(ye,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var ye=this._el;ye._resizeSensor&&(this.rmAllListeners(),delete ye._resizeSensor,ye.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var ye=this._el,xe={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},Ee={position:"absolute",left:"0px",top:"0px",transition:"0s"},Ce=he("div",{style:Ee}),Se=he("div.resize-sensor-expand",{style:xe},Ce),Oe=he("div.resize-sensor-shrink",{style:xe},he("div",{style:be({width:"200%",height:"200%"},Ee)})),De=he("div.resize-sensor",{dir:"ltr",style:xe},Se,Oe);this._expandEl=Se,this._expandChildEl=Ce,this._shrinkEl=Oe,this._resizeSensorEl=De,ye.appendChild(De),this._resetExpandShrink()},_bindEvent:function(){var ye=this;ne.on(this._expandEl,"scroll",function(){return ye._onScroll()}),ne.on(this._shrinkEl,"scroll",function(){return ye._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var ye=this._el,xe=ye.offsetWidth,Ee=ye.offsetHeight;Te(this._expandChildEl,{width:xe+10,height:Ee+10}),be(this._expandEl,{scrollLeft:xe+10,scrollTop:Ee+10}),be(this._shrinkEl,{scrollLeft:xe+10,scrollTop:Ee+10})}}),q.exports=Q},3244:function(q,Q,V){var de=V(7496),he=V(6768),ne=V(3783),Te=V(9971),j=new(Q=de({className:"Select",initialize:function(be){return this.length=0,be?he(be)?j.find(be):void(be.nodeType&&(this[0]=be,this.length=1)):this},find:function(be){var ce=new Q;return this.each(function(){Te(ce,this.querySelectorAll(be))}),ce},each:function(be){return ne(this,function(ce,ye){be.call(ce,ye,ce)}),this}}))(document);q.exports=Q},8985:function(q,Q,V){var de=V(7496),he=V(4675),ne=V(3783),Te=V(1352);Q=de({initialize:function(){this._listeners=[]},addListener:function(j){this._listeners.push(j)},rmListener:function(j){var be=this._listeners.indexOf(j);be>-1&&this._listeners.splice(be,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var j=this,be=Te(arguments),ce=he(this._listeners);ne(ce,function(ye){return ye.apply(j,be)},this)}},{mixin:function(j){ne(["addListener","rmListener","emit","rmAllListeners"],function(be){j[be]=Q.prototype[be]}),j._listeners=j._listeners||[]}}),q.exports=Q},9001:function(q,Q,V){var de=V(7496),he=V(1527);Q=de({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(ne){return this._items.push(ne),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(ne,Te){Te=arguments.length>1?Te:this;for(var j=this._items,be=this.size-1,ce=0;be>=0;be--,ce++)ne.call(Te,j[be],ce,this)},toArr:function(){return he(this._items)}}),q.exports=Q},5128:function(q,Q,V){var de=V(1443),he=V(6768),ne=V(5166),Te=V(3783),j=V(1352);Q=de.extend({initialize:function(be){this.callSuper(de,"initialize",arguments),this._data=be||{},this.save(this._data)},set:function(be,ce){var ye;he(be)?(ye={})[be]=ce:ne(be)&&(ye=be);var xe=this;Te(ye,function(Ee,Ce){var Se=xe._data[Ce];xe._data[Ce]=Ee,xe.emit("change",Ce,Ee,Se)}),this.save(this._data)},get:function(be){var ce=this._data;if(he(be))return ce[be];var ye={};return Te(be,function(xe){ye[xe]=ce[xe]}),ye},remove:function(be){be=j(be);var ce=this._data;Te(be,function(ye){delete ce[ye]}),this.save(ce)},clear:function(){this._data={},this.save(this._data)},each:function(be){Te(this._data,be)},save:function(be){this._data=be}}),q.exports=Q},6334:function(q,Q,V){var de=V(7496),he=V(6329),ne=V(4331),Te=V(1745),j=V(8887),be=V(3783),ce=V(6472),ye=V(1352),xe=V(2727),Ee=V(5166),Ce=V(3367);Q=de({className:"Url",initialize:function(Ue){!Ue&&xe&&(Ue=window.location.href),he(this,Q.parse(Ue||""))},setQuery:function(Ue,$e){var Fe=this.query;return Ee(Ue)?be(Ue,function(Xe,Ye){Fe[Ye]=Ce(Xe)}):Fe[Ue]=Ce($e),this},rmQuery:function(Ue){var $e=this.query;return ce(Ue)||(Ue=ye(Ue)),be(Ue,function(Fe){delete $e[Fe]}),this},toString:function(){return Q.stringify(this)}},{parse:function(Ue){var $e={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},Fe=ne(Ue),Xe=!1,Ye=Fe.match(Se);if(Ye&&(Ye=Ye[0],$e.protocol=Ye.toLowerCase(),Fe=Fe.substr(Ye.length)),Ye&&(Xe=Fe.substr(0,2)==="//")&&(Fe=Fe.slice(2),$e.slashes=!0),Xe){for(var He=Fe,Je=-1,pt=0,It=De.length;pt<It;pt++){var At=Fe.indexOf(De[pt]);At!==-1&&(Je===-1||At<Je)&&(Je=At)}Je>-1&&(He=Fe.slice(0,Je),Fe=Fe.slice(Je));var bt=He.lastIndexOf("@");bt!==-1&&($e.auth=decodeURIComponent(He.slice(0,bt)),He=He.slice(bt+1)),$e.hostname=He;var rt=He.match(Oe);rt&&((rt=rt[0])!==":"&&($e.port=rt.substr(1)),$e.hostname=He.substr(0,He.length-rt.length))}var nt=Fe.indexOf("#");nt!==-1&&($e.hash=Fe.substr(nt),Fe=Fe.slice(0,nt));var it=Fe.indexOf("?");return it!==-1&&($e.query=Te.parse(Fe.substr(it+1)),Fe=Fe.slice(0,it)),$e.pathname=Fe||"/",$e},stringify:function(Ue){var $e=Ue.protocol+(Ue.slashes?"//":"")+(Ue.auth?encodeURIComponent(Ue.auth)+"@":"")+Ue.hostname+(Ue.port?":"+Ue.port:"")+Ue.pathname;return j(Ue.query)||($e+="?"+Te.stringify(Ue.query)),Ue.hash&&($e+=Ue.hash),$e}});var Se=/^([a-z0-9.+-]+:)/i,Oe=/:[0-9]*$/,De=["/","?","#"];q.exports=Q},8991:function(q,Q,V){var de=V(4777),he=V(1214),ne=V(4193),Te=V(5166),j=V(1745);function be(ce,ye,xe,Ee){return de(ye)&&(Ee=xe,xe=ye,ye={}),{url:ce,data:ye,success:xe,dataType:Ee}}(Q=function(ce){ne(ce,Q.setting);var ye,xe=ce.type,Ee=ce.url,Ce=ce.data,Se=ce.dataType,Oe=ce.success,De=ce.error,Ue=ce.timeout,$e=ce.complete,Fe=ce.xhr();return Fe.onreadystatechange=function(){if(Fe.readyState===4){var Xe;clearTimeout(ye);var Ye=Fe.status;if(Ye>=200&&Ye<300||Ye===304){Xe=Fe.responseText,Se==="xml"&&(Xe=Fe.responseXML);try{Se==="json"&&(Xe=JSON.parse(Xe))}catch{}Oe(Xe,Fe)}else De(Fe);$e(Fe)}},xe==="GET"?(Ce=j.stringify(Ce))&&(Ee+=Ee.indexOf("?")>-1?"&"+Ce:"?"+Ce):ce.contentType==="application/x-www-form-urlencoded"?Te(Ce)&&(Ce=j.stringify(Ce)):ce.contentType==="application/json"&&Te(Ce)&&(Ce=JSON.stringify(Ce)),Fe.open(xe,Ee,!0),Fe.setRequestHeader("Content-Type",ce.contentType),Ue>0&&(ye=setTimeout(function(){Fe.onreadystatechange=he,Fe.abort(),De(Fe,"timeout"),$e(Fe)},Ue)),Fe.send(xe==="GET"?null:Ce),Fe}).setting={type:"GET",success:he,error:he,complete:he,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},Q.get=function(){return Q(be.apply(null,arguments))},Q.post=function(){var ce=be.apply(null,arguments);return ce.type="POST",Q(ce)},q.exports=Q},1116:function(q,Q,V){var de=V(2533),he=V(415),ne=V(42),Te=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols;Q=function(be){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ye=ce.prototype,xe=ye===void 0||ye,Ee=ce.unenumerable,Ce=Ee!==void 0&&Ee,Se=ce.symbol,Oe=Se!==void 0&&Se,De=[];if((Ce||Oe)&&Te){var Ue=de;Ce&&Te&&(Ue=Te);do De=De.concat(Ue(be)),Oe&&j&&(De=De.concat(j(be)));while(xe&&(be=he(be))&&be!==Object.prototype);De=ne(De)}else if(xe)for(var $e in be)De.push($e);else De=de(be);return De},q.exports=Q},7913:function(q,Q,V){var de=V(3783),he=V(1286),ne=V(4777);Q=function(Te,j){he(j)&&(j=!0);var be=ne(j),ce={};return de(Te,function(ye){ce[ye]=be?j(ye):j}),ce},q.exports=Q},3901:function(q,Q){Q={encode:function(Te){var j,be,ce=[],ye=Te.length,xe=ye%3;ye-=xe;for(var Ee=0;Ee<ye;Ee+=3)ce.push((j=(Te[Ee]<<16)+(Te[Ee+1]<<8)+Te[Ee+2],de[j>>18&63]+de[j>>12&63]+de[j>>6&63]+de[63&j]));return ye=Te.length,xe===1?(be=Te[ye-1],ce.push(de[be>>2]),ce.push(de[be<<4&63]),ce.push("==")):xe===2&&(be=(Te[ye-2]<<8)+Te[ye-1],ce.push(de[be>>10]),ce.push(de[be>>4&63]),ce.push(de[be<<2&63]),ce.push("=")),ce.join("")},decode:function(Te){var j=Te.length,be=0;Te[j-2]==="="?be=2:Te[j-1]==="="&&(be=1);var ce,ye,xe,Ee,Ce,Se,Oe,De=new Array(3*j/4-be);for(j=be>0?j-4:j,ce=0,ye=0;ce<j;ce+=4){var Ue=(xe=Te[ce],Ee=Te[ce+1],Ce=Te[ce+2],Se=Te[ce+3],V[xe.charCodeAt(0)]<<18|V[Ee.charCodeAt(0)]<<12|V[Ce.charCodeAt(0)]<<6|V[Se.charCodeAt(0)]);De[ye++]=Ue>>16&255,De[ye++]=Ue>>8&255,De[ye++]=255&Ue}return be===2?(Oe=V[Te.charCodeAt(ce)]<<2|V[Te.charCodeAt(ce+1)]>>4,De[ye++]=255&Oe):be===1&&(Oe=V[Te.charCodeAt(ce)]<<10|V[Te.charCodeAt(ce+1)]<<4|V[Te.charCodeAt(ce+2)]>>2,De[ye++]=Oe>>8&255,De[ye++]=255&Oe),De}};for(var V=[],de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he=0,ne=de.length;he<ne;he++)V[de.charCodeAt(he)]=he;q.exports=Q},5637:function(q,Q){Q=function(V,de){var he;return function(){return--V>0&&(he=de.apply(this,arguments)),V<=1&&(de=null),he}},q.exports=Q},7494:function(q,Q,V){var de=V(8935);function he(ne,Te){this[Te]=ne.replace(/\w/,function(j){return j.toUpperCase()})}Q=function(ne){var Te=de(ne),j=Te[0];return Te.shift(),Te.forEach(he,Te),j+=Te.join("")},q.exports=Q},1694:function(q,Q,V){var de=V(6257),he=V(6472);Q=function(j,be){if(he(j))return j;if(be&&de(be,j))return[j];var ce=[];return j.replace(ne,function(ye,xe,Ee,Ce){ce.push(Ee?Ce.replace(Te,"$1"):xe||ye)}),ce};var ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Te=/\\(\\)?/g;q.exports=Q},996:function(q,Q){Q=function(V,de){var he=[];de=de||1;for(var ne=0,Te=Math.ceil(V.length/de);ne<Te;ne++){var j=ne*de,be=j+de;he.push(V.slice(j,be))}return he},q.exports=Q},9882:function(q,Q,V){var de=V(1286);Q=function(he,ne,Te){return de(Te)&&(Te=ne,ne=void 0),!de(ne)&&he<ne?ne:he>Te?Te:he},q.exports=Q},4675:function(q,Q,V){var de=V(5166),he=V(6472),ne=V(6329);Q=function(Te){return de(Te)?he(Te)?Te.slice():ne({},Te):Te},q.exports=Q},550:function(q,Q,V){var de=V(5166),he=V(4777),ne=V(6472),Te=V(8820);Q=function(j){return ne(j)?j.map(function(be){return Q(be)}):de(j)&&!he(j)?Te(j,function(be){return Q(be)}):j},q.exports=Q},8099:function(q,Q,V){var de=V(1352);Q=function(){for(var he=de(arguments),ne=[],Te=0,j=he.length;Te<j;Te++)ne=ne.concat(de(he[Te]));return ne},q.exports=Q},6341:function(q,Q,V){var de=V(496),he=V(6768),ne=V(1369),Te=V(2578);Q=function(j,be){return he(j)?j.indexOf(be)>-1:(ne(j)||(j=Te(j)),de(j,be)>=0)},q.exports=Q},1792:function(q,Q,V){var de=V(6768),he=V(3901),ne=V(385),Te=V(6472),j=V(2349),be=V(3085),ce=V(3063);(Q=function(ye,xe){var Ee;if(xe=ce(xe),de(ye))Ee=new Uint8Array(he.decode(ye));else if(ne(ye))ye=ye.slice(0),Ee=new Uint8Array(ye);else if(Te(ye))Ee=new Uint8Array(ye);else if(be(ye)==="uint8array")Ee=ye.slice(0);else if(j(ye)){Ee=new Uint8Array(ye.length);for(var Ce=0;Ce<ye.length;Ce++)Ee[Ce]=ye[Ce]}if(Ee)switch(xe){case"base64":Ee=he.encode(Ee);break;case"arraybuffer":Ee=Ee.buffer;break;case"array":Ee=[].slice.call(Ee);break;case"buffer":Ee=Buffer.from(Ee);break;case"blob":Ee=new Blob([Ee.buffer])}return Ee}).blobToArrBuffer=function(ye){return new Promise(function(xe,Ee){var Ce=new FileReader;Ce.onload=function(Se){xe(Se.target.result)},Ce.onerror=function(Se){Ee(Se)},Ce.readAsArrayBuffer(ye)})},q.exports=Q},6299:function(q,Q,V){var de=V(4193),he=V(3990),ne=V(1286),Te=V(1420),j={path:"/"};function be(ce,ye,xe){if(!ne(ye)){if(xe=de(xe=xe||{},j),he(xe.expires)){var Ee=new Date;Ee.setMilliseconds(Ee.getMilliseconds()+864e5*xe.expires),xe.expires=Ee}return ye=encodeURIComponent(ye),ce=encodeURIComponent(ce),document.cookie=[ce,"=",ye,xe.expires&&"; expires="+xe.expires.toUTCString(),xe.path&&"; path="+xe.path,xe.domain&&"; domain="+xe.domain,xe.secure?"; secure":""].join(""),Q}for(var Ce=document.cookie?document.cookie.split("; "):[],Se=ce?void 0:{},Oe=0,De=Ce.length;Oe<De;Oe++){var Ue=Ce[Oe],$e=Ue.split("="),Fe=Te($e.shift());if(Ue=$e.join("="),Ue=Te(Ue),ce===Fe){Se=Ue;break}ce||(Se[Fe]=Ue)}return Se}Q={get:be,set:be,remove:function(ce,ye){return(ye=ye||{}).expires=-1,be(ce,"",ye)}},q.exports=Q},2327:function(q,Q,V){var de=V(6329),he=V(1214);Q=function(ne,Te){Te=Te||he;var j=document.createElement("textarea"),be=document.body;de(j.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),j.value=ne,be.appendChild(j),j.setAttribute("readonly",""),j.select(),j.setSelectionRange(0,ne.length);try{document.execCommand("copy"),Te()}catch(ce){Te(ce)}finally{be.removeChild(j)}},q.exports=Q},1662:function(q,Q,V){var de=V(5166);Q=function(ne){if(!de(ne))return{};if(he)return he(ne);function Te(){}return Te.prototype=ne,new Te};var he=Object.create;q.exports=Q},4427:function(q,Q,V){var de=V(1286),he=V(3783);Q=function(ne,Te){return function(j){return he(arguments,function(be,ce){if(ce!==0){var ye=ne(be);he(ye,function(xe){Te&&!de(j[xe])||(j[xe]=be[xe])})}}),j}},q.exports=Q},4407:function(q,Q,V){var de=V(6768),he=V(2106),ne=V(3367),Te=V(5351);Q=function(Ee,Ce,Se,Oe){arguments.length===1&&de(Ee)&&!ye.test(Ee)&&(Ce=Ee,Ee=void 0),Ee=Ee||new Date,he(Ee)||(Ee=new Date(Ee));var De=(Ce=ne(Q.masks[Ce]||Ce||Q.masks.default)).slice(0,4);De!=="UTC:"&&De!=="GMT:"||(Ce=Ce.slice(4),Se=!0,De==="GMT:"&&(Oe=!0));var Ue=Se?"getUTC":"get",$e=Ee[Ue+"Date"](),Fe=Ee[Ue+"Day"](),Xe=Ee[Ue+"Month"](),Ye=Ee[Ue+"FullYear"](),He=Ee[Ue+"Hours"](),Je=Ee[Ue+"Minutes"](),pt=Ee[Ue+"Seconds"](),It=Ee[Ue+"Milliseconds"](),At=Se?0:Ee.getTimezoneOffset(),bt={d:$e,dd:j($e),ddd:Q.i18n.dayNames[Fe],dddd:Q.i18n.dayNames[Fe+7],m:Xe+1,mm:j(Xe+1),mmm:Q.i18n.monthNames[Xe],mmmm:Q.i18n.monthNames[Xe+12],yy:ne(Ye).slice(2),yyyy:Ye,h:He%12||12,hh:j(He%12||12),H:He,HH:j(He),M:Je,MM:j(Je),s:pt,ss:j(pt),l:j(It,3),L:j(Math.round(It/10)),t:He<12?"a":"p",tt:He<12?"am":"pm",T:He<12?"A":"P",TT:He<12?"AM":"PM",Z:Oe?"GMT":Se?"UTC":(ne(Ee).match(ce)||[""]).pop().replace(xe,""),o:(At>0?"-":"+")+j(100*Math.floor(Math.abs(At)/60)+Math.abs(At)%60,4),S:["th","st","nd","rd"][$e%10>3?0:($e%100-$e%10!=10)*$e%10]};return Ce.replace(be,function(rt){return rt in bt?bt[rt]:rt.slice(1,rt.length-1)})};var j=function(Ee){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Te(ne(Ee),Ce,"0")},be=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,ce=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ye=/\d/,xe=/[^-+\dA-Z]/g;Q.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},Q.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},q.exports=Q},6049:function(q,Q){Q=function(V,de,he){var ne;return function(){var Te=this,j=arguments,be=function(){ne=null,V.apply(Te,j)};he||clearTimeout(ne),he&&ne||(ne=setTimeout(be,de))}},q.exports=Q},1420:function(q,Q,V){var de=V(3783),he=V(8166),ne=V(2461),Te=V(5742);function j(ce){return+("0x"+ce)}Q=function(ce){try{return decodeURIComponent(ce)}catch{var ye=ce.match(be);return ye&&de(ye,function(Ee){ce=ce.replace(Ee,function(Ce){Ce=Ce.split("%").slice(1);var Se=ne(Ce,j);return Ce=he.encode(Se),Ce=Te.decode(Ce,!0)}(Ee))}),ce}};var be=/(%[a-f0-9]{2})+/gi;q.exports=Q},4193:function(q,Q,V){Q=V(4427)(V(1116),!0),q.exports=Q},9803:function(q,Q,V){var de=V(1694),he=V(6768),ne=V(5166),Te=V(3783);function j(be,ce,ye){for(var xe=de(ce,be),Ee=xe.pop();ce=xe.shift();)be[ce]||(be[ce]={}),be=be[ce];Object.defineProperty(be,Ee,ye)}Q=function(be,ce,ye){return he(ce)?j(be,ce,ye):ne(ce)&&Te(ce,function(xe,Ee){j(be,Ee,xe)}),be},q.exports=Q},2443:function(q,Q,V){var de=V(7496),he=V(6341);function ne(){return!0}function Te(){return!1}function j(ce){var ye,xe=this.events[ce.type],Ee=be.call(this,ce,xe);ce=new Q.Event(ce);for(var Ce,Se,Oe=0;(Se=Ee[Oe++])&&!ce.isPropagationStopped();)for(ce.curTarget=Se.el,Ce=0;(ye=Se.handlers[Ce++])&&!ce.isImmediatePropagationStopped();)ye.handler.apply(Se.el,[ce])===!1&&(ce.preventDefault(),ce.stopPropagation())}function be(ce,ye){var xe,Ee,Ce,Se,Oe=ce.target,De=[],Ue=ye.delegateCount;if(Oe.nodeType)for(;Oe!==this;Oe=Oe.parentNode||this){for(Ee=[],Se=0;Se<Ue;Se++)Ee[xe=(Ce=ye[Se]).selector+" "]===void 0&&(Ee[xe]=he(this.querySelectorAll(xe),Oe)),Ee[xe]&&Ee.push(Ce);Ee.length&&De.push({el:Oe,handlers:Ee})}return Ue<ye.length&&De.push({el:this,handlers:ye.slice(Ue)}),De}Q={add:function(ce,ye,xe,Ee){var Ce,Se={selector:xe,handler:Ee};ce.events||(ce.events={}),(Ce=ce.events[ye])||((Ce=ce.events[ye]=[]).delegateCount=0,ce.addEventListener(ye,function(){j.apply(ce,arguments)},!1)),xe?Ce.splice(Ce.delegateCount++,0,Se):Ce.push(Se)},remove:function(ce,ye,xe,Ee){var Ce=ce.events;if(Ce&&Ce[ye])for(var Se,Oe=Ce[ye],De=Oe.length;De--;)Se=Oe[De],xe&&Se.selector!=xe||Se.handler!=Ee||(Oe.splice(De,1),Se.selector&&Oe.delegateCount--)},Event:de({className:"Event",initialize:function(ce){this.origEvent=ce},isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,preventDefault:function(){var ce=this.origEvent;this.isDefaultPrevented=ne,ce&&ce.preventDefault&&ce.preventDefault()},stopPropagation:function(){var ce=this.origEvent;this.isPropagationStopped=ne,ce&&ce.stopPropagation&&ce.stopPropagation()},stopImmediatePropagation:function(){var ce=this.origEvent;this.isImmediatePropagationStopped=ne,ce&&ce.stopImmediatePropagation&&ce.stopImmediatePropagation(),this.stopPropagation()}})},q.exports=Q},4541:function(q,Q,V){var de=V(2727),he=V(9296),ne=V(2533);Q=function(ye){var xe=ce(ye=(ye=ye||(de?navigator.userAgent:"")).toLowerCase(),"msie ");if(xe)return{version:xe,name:"ie"};if(j.test(ye))return{version:11,name:"ie"};for(var Ee=0,Ce=be.length;Ee<Ce;Ee++){var Se=be[Ee],Oe=ye.match(Te[Se]);if(Oe!=null){var De=he(Oe[1].split(".")[0]);return Se==="opera"&&(De=ce(ye,"version/")||De),{name:Se,version:De}}}return{name:"unknown",version:-1}};var Te={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},j=/trident\/7\./,be=ne(Te);function ce(ye,xe){var Ee=ye.indexOf(xe);if(Ee>-1)return he(ye.substring(Ee+xe.length,ye.indexOf(".",Ee)))}q.exports=Q},6954:function(q,Q,V){var de=V(2727);Q=function(he){if(he=(he=he||(de?navigator.userAgent:"")).toLowerCase(),ne("windows phone"))return"windows phone";if(ne("win"))return"windows";if(ne("android"))return"android";if(ne("ipad")||ne("iphone")||ne("ipod"))return"ios";if(ne("mac"))return"os x";if(ne("linux"))return"linux";function ne(Te){return he.indexOf(Te)>-1}return"unknown"},q.exports=Q},801:function(q,Q,V){var de=V(1137),he=V(288),ne=V(5972),Te=V(6341);Q=de(function(j,be){return be=he(be),ne(j,function(ce){return!Te(be,ce)})}),q.exports=Q},3783:function(q,Q,V){var de=V(1369),he=V(2533),ne=V(3955);Q=function(Te,j,be){var ce,ye;if(j=ne(j,be),de(Te))for(ce=0,ye=Te.length;ce<ye;ce++)j(Te[ce],ce,Te);else{var xe=he(Te);for(ce=0,ye=xe.length;ce<ye;ce++)j(Te[xe[ce]],xe[ce],Te)}return Te},q.exports=Q},4858:function(q,Q){Q=function(V,de){var he=V.length-de.length;return he>=0&&V.indexOf(de,he)===he},q.exports=Q},8901:function(q,Q,V){var de=V(2533),he=(Q=function(ce){return Te.test(ce)?ce.replace(j,be):ce}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ne="(?:"+de(he).join("|")+")",Te=new RegExp(ne),j=new RegExp(ne,"g"),be=function(ce){return he[ce]};q.exports=Q},4187:function(q,Q,V){var de=V(3367);Q=function(ne){return de(ne).replace(he,function(Te){switch(Te){case'"':case"'":case"\\":return"\\"+Te;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var he=/["'\\\n\r\u2028\u2029]/g;q.exports=Q},2337:function(q,Q){Q=function(V){return V.replace(/\W/g,"\\$&")},q.exports=Q},642:function(q,Q){Q=function(V){var de=document.createElement("style");return de.textContent=V,de.type="text/css",document.head.appendChild(de),de},q.exports=Q},6329:function(q,Q,V){Q=V(4427)(V(1116)),q.exports=Q},3021:function(q,Q,V){var de=V(2533);Q=V(4427)(de),q.exports=Q},2581:function(q,Q,V){var de=V(42),he=V(4331),ne=V(2461),Te=V(1352);Q=function(be){var ce=Te(be.match(j));return de(ne(ce,function(ye){return he(ye)}))};var j=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;q.exports=Q},5972:function(q,Q,V){var de=V(2838),he=V(3783);Q=function(ne,Te,j){var be=[];return Te=de(Te,j),he(ne,function(ce,ye,xe){Te(ce,ye,xe)&&be.push(ce)}),be},q.exports=Q},2244:function(q,Q,V){var de=V(2267),he=V(4072),ne=V(1369),Te=V(1286);Q=function(j,be,ce){var ye=(ne(j)?he:de)(j,be,ce);if(!Te(ye)&&ye!==-1)return j[ye]},q.exports=Q},4072:function(q,Q,V){var de=V(2838);Q=function(he,ne,Te,j){j=j||1,ne=de(ne,Te);for(var be=he.length,ce=j>0?0:be-1;ce>=0&&ce<be;){if(ne(he[ce],ce,he))return ce;ce+=j}return-1},q.exports=Q},2267:function(q,Q,V){var de=V(2838),he=V(2533);Q=function(ne,Te,j){Te=de(Te,j);for(var be,ce=he(ne),ye=0,xe=ce.length;ye<xe;ye++)if(Te(ne[be=ce[ye]],be,ne))return be},q.exports=Q},288:function(q,Q,V){var de=V(6472);function he(ne,Te){for(var j,be=ne.length,ce=-1;be--;)j=ne[++ce],de(j)?he(j,Te):Te.push(j);return Te}Q=function(ne){return he(ne,[])},q.exports=Q},4454:function(q,Q,V){var de=V(2533);Q=function(he){return Object.freeze?Object.freeze(he):(de(he).forEach(function(ne){Object.getOwnPropertyDescriptor(he,ne).configurable&&Object.defineProperty(he,ne,{writable:!1,configurable:!1})}),he)},q.exports=Q},415:function(q,Q,V){var de=V(5166),he=V(4777),ne=Object.getPrototypeOf,Te={}.constructor;Q=function(j){if(de(j)){if(ne)return ne(j);var be=j.__proto__;return be||be===null?be:he(j.constructor)?j.constructor.prototype:j instanceof Te?Te.prototype:void 0}},q.exports=Q},8613:function(q,Q,V){var de=V(9833),he=V(6768),ne=V(6930),Te=V(7781),j=V(975),be=V(3783),ce=V(4777);function ye(xe){for(var Ee="div",Ce="",Se=[],Oe=[],De="",Ue=0,$e=xe.length;Ue<$e;Ue++){var Fe=xe[Ue];Fe==="#"||Fe==="."?(Oe.push(De),De=Fe):De+=Fe}Oe.push(De);for(var Xe=0,Ye=Oe.length;Xe<Ye;Xe++)(De=Oe[Xe])&&(ne(De,"#")?Ce=De.slice(1):ne(De,".")?Se.push(De.slice(1)):Ee=De);return{tagName:Ee,id:Ce,classes:Se}}Q=function(xe,Ee){for(var Ce=arguments.length,Se=new Array(Ce>2?Ce-2:0),Oe=2;Oe<Ce;Oe++)Se[Oe-2]=arguments[Oe];(de(Ee)||he(Ee))&&(Se.unshift(Ee),Ee=null),Ee||(Ee={});var De=ye(xe),Ue=De.tagName,$e=De.id,Fe=De.classes,Xe=document.createElement(Ue);return $e&&Xe.setAttribute("id",$e),Te.add(Xe,Fe),be(Se,function(Ye){he(Ye)?Xe.appendChild(document.createTextNode(Ye)):de(Ye)&&Xe.appendChild(Ye)}),be(Ee,function(Ye,He){he(Ye)?Xe.setAttribute(He,Ye):ce(Ye)&&ne(He,"on")?Xe.addEventListener(He.slice(2),Ye,!1):He==="style"&&j(Xe,Ye)}),Xe},q.exports=Q},6257:function(q,Q){var V=Object.prototype.hasOwnProperty;Q=function(de,he){return V.call(de,he)},q.exports=Q},5044:function(q,Q,V){var de=V(7348);Q={encode:function(he){for(var ne=[],Te=0,j=he.length;Te<j;Te++){var be=he[Te];ne.push((be>>>4).toString(16)),ne.push((15&be).toString(16))}return ne.join("")},decode:function(he){var ne=[],Te=he.length;de(Te)&&Te--;for(var j=0;j<Te;j+=2)ne.push(parseInt(he.substr(j,2),16));return ne}},q.exports=Q},3651:function(q,Q,V){var de=V(3783),he=V(4193);Q=function(j){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(ce,ne),j=j.replace(/</g,"&lt;").replace(/>/g,"&gt;"),be=Te[be];var ye=0,xe=[];de(be,function(Ce){Ce.language&&(j=j.replace(Ce.re,function(Se,Oe){return Oe?(xe[ye++]=Q(Oe,Ce.language,ce),Se.replace(Oe,"___subtmpl"+(ye-1)+"___")):Se}))}),de(be,function(Ce,Se){Te[Ce.language]||(j=j.replace(Ce.re,"___"+Se+"___$1___end"+Se+"___"))});var Ee=[];return j=j.replace(/___(?!subtmpl)\w+?___/g,function(Ce){var Se=Ce.substr(3,3)==="end",Oe=(Se?Ce.substr(6):Ce.substr(3)).replace(/_/g,""),De=Ee.length>0?Ee[Ee.length-1]:null;return!Se&&(De==null||Oe==De||De!=null&&be[De]&&be[De].embed!=null&&be[De].embed.indexOf(Oe)>-1)?(Ee.push(Oe),Ce):Se&&Oe==De?(Ee.pop(),Ce):""}),de(be,function(Ce,Se){var Oe=ce[Ce.style]?' style="'.concat(ce[Ce.style],'"'):"";j=j.replace(new RegExp("___end"+Se+"___","g"),"</span>").replace(new RegExp("___"+Se+"___","g"),'<span class="'.concat(Ce.style,'"').concat(Oe,">"))}),de(be,function(Ce){Ce.language&&(j=j.replace(/___subtmpl\d+___/g,function(Se){var Oe=parseInt(Se.replace(/___subtmpl(\d+)___/,"$1"),10);return xe[Oe]}))}),j};var ne={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},Te={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};Te.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:Te.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},Te.css={comment:Te.js.comment,string:Te.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},q.exports=Q},5925:function(q,Q){Q=function(de){var he,ne,Te,j=de[0]/360,be=de[1]/100,ce=de[2]/100,ye=[];if(de[3]&&(ye[3]=de[3]),be===0)return Te=V(255*ce),ye[0]=ye[1]=ye[2]=Te,ye;for(var xe=2*ce-(he=ce<.5?ce*(1+be):ce+be-ce*be),Ee=0;Ee<3;Ee++)(ne=j+.3333333333333333*-(Ee-1))<0&&ne++,ne>1&&ne--,Te=6*ne<1?xe+6*(he-xe)*ne:2*ne<1?he:3*ne<2?xe+(he-xe)*(.6666666666666666-ne)*6:xe,ye[Ee]=V(255*Te);return ye};var V=Math.round;q.exports=Q},7483:function(q,Q,V){var de=V(8702),he=V(9001),ne=V(6472),Te=V(3783),j=V(6768),be=V(8820),ce=function(xe){return xe.replace(/&quot;/g,'"')},ye=function(xe){return xe.replace(/"/g,"&quot;")};Q={parse:function(xe){var Ee=[],Ce=new he;return de(xe,{start:function(Se,Oe){Oe=be(Oe,function(De){return ce(De)}),Ce.push({tag:Se,attrs:Oe})},end:function(){var Se=Ce.pop();if(Ce.size){var Oe=Ce.peek();ne(Oe.content)||(Oe.content=[]),Oe.content.push(Se)}else Ee.push(Se)},comment:function(Se){var Oe="<!--".concat(Se,"-->"),De=Ce.peek();De?(De.content||(De.content=[]),De.content.push(Oe)):Ee.push(Oe)},text:function(Se){var Oe=Ce.peek();Oe?(Oe.content||(Oe.content=[]),Oe.content.push(Se)):Ee.push(Se)}}),Ee},stringify:function xe(Ee){var Ce="";return ne(Ee)?Te(Ee,function(Se){return Ce+=xe(Se)}):j(Ee)?Ce=Ee:(Ce+="<".concat(Ee.tag),Te(Ee.attrs,function(Se,Oe){return Ce+=" ".concat(Oe,'="').concat(ye(Se),'"')}),Ce+=">",Ee.content&&(Ce+=xe(Ee.content)),Ce+="</".concat(Ee.tag,">")),Ce}},q.exports=Q},6362:function(q,Q){Q=function(V){return V},q.exports=Q},496:function(q,Q){Q=function(V,de,he){return Array.prototype.indexOf.call(V,de,he)},q.exports=Q},5022:function(q,Q,V){var de=V(1662);Q=function(he,ne){he.prototype=de(ne.prototype)},q.exports=Q},7403:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object Arguments]"},q.exports=Q},6472:function(q,Q,V){var de=V(106);Q=Array.isArray?Array.isArray:function(he){return de(he)==="[object Array]"},q.exports=Q},385:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object ArrayBuffer]"},q.exports=Q},1369:function(q,Q,V){var de=V(3990),he=V(4777),ne=Math.pow(2,53)-1;Q=function(Te){if(!Te)return!1;var j=Te.length;return de(j)&&j>=0&&j<=ne&&!he(Te)},q.exports=Q},4696:function(q,Q){Q=function(V){return V===!0||V===!1},q.exports=Q},2727:function(q,Q){Q=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,q.exports=Q},2349:function(q,Q,V){var de=V(4777);Q=function(he){return he!=null&&(!!he._isBuffer||he.constructor&&de(he.constructor.isBuffer)&&he.constructor.isBuffer(he))},q.exports=Q},2520:function(q,Q,V){var de=new(V(2765))("(prefers-color-scheme: dark)");Q=function(){return de.isMatch()},q.exports=Q},2106:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object Date]"},q.exports=Q},9833:function(q,Q){Q=function(V){return!(!V||V.nodeType!==1)},q.exports=Q},8887:function(q,Q,V){var de=V(1369),he=V(6472),ne=V(6768),Te=V(7403),j=V(2533);Q=function(be){return be==null||(de(be)&&(he(be)||ne(be)||Te(be))?be.length===0:j(be).length===0)},q.exports=Q},2749:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object Error]"},q.exports=Q},4777:function(q,Q,V){var de=V(106);Q=function(he){var ne=de(he);return ne==="[object Function]"||ne==="[object GeneratorFunction]"||ne==="[object AsyncFunction]"},q.exports=Q},9585:function(q,Q,V){var de=V(5610),he=de.getComputedStyle,ne=de.document;function Te(j,be){return j.right<be.left||j.left>be.right||j.bottom<be.top||j.top>be.bottom}Q=function(j){var be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=be.display,ye=ce===void 0||ce,xe=be.visibility,Ee=xe!==void 0&&xe,Ce=be.opacity,Se=Ce!==void 0&&Ce,Oe=be.size,De=Oe!==void 0&&Oe,Ue=be.viewport,$e=Ue!==void 0&&Ue,Fe=be.overflow,Xe=Fe!==void 0&&Fe;if(ye)return j.offsetParent===null;var Ye=he(j);if(Ee&&Ye.visibility==="hidden")return!0;if(Se){if(Ye.opacity==="0")return!0;for(var He=j;He=He.parentElement;){var Je=he(He);if(Je.opacity==="0")return!0}}var pt=j.getBoundingClientRect();if(De&&(pt.width===0||pt.height===0))return!0;if($e){var It={top:0,left:0,right:ne.documentElement.clientWidth,bottom:ne.documentElement.clientHeight};return Te(pt,It)}if(Xe)for(var At=j;At=At.parentElement;){var bt=he(At),rt=bt.overflow;if(rt==="scroll"||rt==="hidden"){var nt=At.getBoundingClientRect();if(Te(pt,nt))return!0}}return!1},q.exports=Q},2246:function(q,Q,V){var de=V(3990);Q=function(he){return de(he)&&he%1==0},q.exports=Q},3708:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object Map]"},q.exports=Q},7949:function(q,Q,V){var de=V(2533);Q=function(he,ne){var Te=de(ne),j=Te.length;if(he==null)return!j;he=Object(he);for(var be=0;be<j;be++){var ce=Te[be];if(ne[ce]!==he[ce]||!(ce in he))return!1}return!0},q.exports=Q},9537:function(q,Q,V){var de=V(4777);Q=typeof wx!="undefined"&&de(wx.openLocation),q.exports=Q},9956:function(q,Q,V){var de=V(2727),he=V(1475),ne=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Te=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;Q=he(function(j){return j=j||(de?navigator.userAgent:""),ne.test(j)||Te.test(j.substr(0,4))}),q.exports=Q},9433:function(q,Q,V){var de=V(3990);Q=function(he){return de(he)&&he!==+he},q.exports=Q},8740:function(q,Q,V){var de=V(5166),he=V(4777),ne=V(300);Q=function(ce){return!!de(ce)&&(he(ce)?j.test(ne(ce)):be.test(ne(ce)))};var Te=Object.prototype.hasOwnProperty,j=new RegExp("^"+ne(Te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=/^\[object .+?Constructor\]$/;q.exports=Q},2763:function(q,Q){Q=function(V){return V==null},q.exports=Q},1965:function(q,Q,V){var de=V(106);Q=typeof process!="undefined"&&de(process)==="[object process]",q.exports=Q},6156:function(q,Q){Q=function(V){return V===null},q.exports=Q},3990:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object Number]"},q.exports=Q},5166:function(q,Q){Q=function(V){var de=typeof V;return!!V&&(de==="function"||de==="object")},q.exports=Q},7348:function(q,Q,V){var de=V(2246);Q=function(he){return!!de(he)&&he%2!=0},q.exports=Q},6997:function(q,Q){Q=function(V){var de=typeof V;return V==null||de!=="function"&&de!=="object"},q.exports=Q},4321:function(q,Q,V){var de=V(5166),he=V(4777);Q=function(ne){return de(ne)&&he(ne.then)&&he(ne.catch)},q.exports=Q},1754:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object RegExp]"},q.exports=Q},7470:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object Set]"},q.exports=Q},3843:function(q,Q){Q=function(V){for(var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.defComparator,he=0,ne=V.length;he<ne-1;he++)if(de(V[he],V[he+1])>0)return!1;return!0},Q.defComparator=function(V,de){return V<de?-1:V>de?1:0},q.exports=Q},6768:function(q,Q,V){var de=V(106);Q=function(he){return de(he)==="[object String]"},q.exports=Q},9804:function(q,Q){Q=function(V){return typeof V=="symbol"},q.exports=Q},1286:function(q,Q){Q=function(V){return V===void 0},q.exports=Q},7622:function(q,Q,V){var de=V(8935);Q=function(he){return de(he).join("-")},q.exports=Q},2533:function(q,Q,V){var de=V(6257);Q=Object.keys?Object.keys:function(he){var ne=[];for(var Te in he)de(he,Te)&&ne.push(Te);return ne},q.exports=Q},9702:function(q,Q){Q=function(V){var de=V?V.length:0;if(de)return V[de-1]},q.exports=Q},3988:function(q,Q,V){var de=V(2581),he=V(3783),ne=V(2337);function Te(j){return'<a href="'+j+'">'+j+"</a>"}Q=function(j,be){be=be||Te;var ce=de(j);return he(ce,function(ye){j=j.replace(new RegExp(ne(ye),"g"),be)}),j},q.exports=Q},9622:function(q,Q){Q=function(V,de){var he=document.createElement("script");he.src=V,he.onload=function(){var ne=he.readyState&&he.readyState!="complete"&&he.readyState!="loaded";de&&de(!ne)},he.onerror=function(){de(!1)},document.body.appendChild(he)},q.exports=Q},3063:function(q,Q,V){var de=V(3367);Q=function(he){return de(he).toLocaleLowerCase()},q.exports=Q},5351:function(q,Q,V){var de=V(4552),he=V(3367);Q=function(ne,Te,j){var be=(ne=he(ne)).length;return j=j||" ",be<Te&&(ne=(de(j,Te-be)+ne).slice(-Te)),ne},q.exports=Q},7767:function(q,Q){var V=/^\s+/;Q=function(de,he){if(he==null)return de.trimLeft?de.trimLeft():de.replace(V,"");for(var ne,Te,j=0,be=de.length,ce=he.length,ye=!0;ye&&j<be;)for(ye=!1,ne=-1,Te=de.charAt(j);++ne<ce;)if(Te===he[ne]){ye=!0,j++;break}return j>=be?"":de.substr(j,be)},q.exports=Q},2461:function(q,Q,V){var de=V(2838),he=V(2533),ne=V(1369);Q=function(Te,j,be){j=de(j,be);for(var ce=!ne(Te)&&he(Te),ye=(ce||Te).length,xe=Array(ye),Ee=0;Ee<ye;Ee++){var Ce=ce?ce[Ee]:Ee;xe[Ee]=j(Te[Ce],Ce,Te)}return xe},q.exports=Q},8820:function(q,Q,V){var de=V(2838),he=V(2533);Q=function(ne,Te,j){Te=de(Te,j);for(var be=he(ne),ce=be.length,ye={},xe=0;xe<ce;xe++){var Ee=be[xe];ye[Ee]=Te(ne[Ee],Ee,ne)}return ye},q.exports=Q},4491:function(q,Q,V){var de=V(3021),he=V(7949);Q=function(ne){return ne=de({},ne),function(Te){return he(Te,ne)}},q.exports=Q},5026:function(q,Q,V){var de=V(2533);Q={getItem:function(ce){return(ne[ce]?he[ce]:this[ce])||null},setItem:function(ce,ye){ne[ce]?he[ce]=ye:this[ce]=ye},removeItem:function(ce){ne[ce]?delete he[ce]:delete this[ce]},key:function(ce){var ye=Te();return ce>=0&&ce<ye.length?ye[ce]:null},clear:function(){for(var ce,ye=j(),xe=0;ce=ye[xe];xe++)delete this[ce];ye=be();for(var Ee,Ce=0;Ee=ye[Ce];Ce++)delete he[Ee]}},Object.defineProperty(Q,"length",{enumerable:!1,configurable:!0,get:function(){return Te().length}});var he={},ne={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Te(){return j().concat(be())}function j(){return de(Q).filter(function(ce){return!ne[ce]})}function be(){return de(he)}q.exports=Q},1475:function(q,Q,V){var de=V(6257);Q=function(he,ne){var Te=function(j){var be=Te.cache,ce=""+(ne?ne.apply(this,arguments):j);return de(be,ce)||(be[ce]=he.apply(this,arguments)),be[ce]};return Te.cache={},Te},q.exports=Q},9971:function(q,Q,V){Q=V(1137)(function(de,he){for(var ne=de.length,Te=0,j=he.length;Te<j;Te++)for(var be=he[Te],ce=0,ye=be.length;ce<ye;ce++)de[ne++]=be[ce];return de.length=ne,de}),q.exports=Q},8573:function(q,Q,V){var de=V(3783),he=V(6768),ne=V(1286),Te=V(6341),j=V(6472),be=V(5166),ce=V(1352);(Q=function(Ce,Se){if(ne(Ce))return Oe={},xe(function(Ue,$e){Oe[Ue]=$e}),Oe;var Oe;if(he(Ce)&&ne(Se)||j(Ce))return function(Ue){if(!he(Ue)){var $e={};return xe(function(Xe,Ye){Te(Ue,Xe)&&($e[Xe]=Ye)}),$e}var Fe=Ee(Ue);if(Fe)return Fe.getAttribute("content")}(Ce);var De=Ce;be(De)||((De={})[Ce]=Se),function(Ue){de(Ue,function($e,Fe){var Xe=Ee(Fe);if(Xe)return Xe.setAttribute("content",$e);(Xe=ye.createElement("meta")).setAttribute("name",Fe),Xe.setAttribute("content",$e),ye.head.appendChild(Xe)})}(De)}).remove=function(Ce){Ce=ce(Ce),de(Ce,function(Se){var Oe=Ee(Se);Oe&&ye.head.removeChild(Oe)})};var ye=document;function xe(Ce){var Se=ye.querySelectorAll("meta");de(Se,function(Oe){var De=Oe.getAttribute("name"),Ue=Oe.getAttribute("content");De&&Ue&&Ce(De,Ue)})}function Ee(Ce){return ye.querySelector('meta[name="'+Ce+'"]')}q.exports=Q},6435:function(q,Q){Q=function(){for(var V=arguments,de=V[0],he=1,ne=V.length;he<ne;he++)V[he]<de&&(de=V[he]);return de},q.exports=Q},4677:function(q,Q,V){var de=V(3875),he=V(6768);Q=function(be){if(he(be)){var ce=be.match(j);return ce?de(ce[1])*ne[ce[2]||"ms"]:0}for(var ye=be,xe="ms",Ee=0,Ce=Te.length;Ee<Ce;Ee++)if(ye>=ne[Te[Ee]]){xe=Te[Ee];break}return+(ye/ne[xe]).toFixed(2)+xe};var ne={ms:1,s:1e3};ne.m=60*ne.s,ne.h=60*ne.m,ne.d=24*ne.h,ne.y=365.25*ne.d;var Te=["y","d","h","m","s"],j=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;q.exports=Q},6339:function(q,Q,V){var de=V(6930),he=V(5610),ne=V(3367);function Te(j,be){if(j=ne(j),be=ne(be),de(j,"_")&&!de(be,"_"))return 1;if(de(be,"_")&&!de(j,"_"))return-1;for(var ce,ye,xe,Ee,Ce=/^\d+|^\D+/;;){if(!j)return be?-1:0;if(!be)return 1;if(ce=j.match(Ce)[0],ye=be.match(Ce)[0],xe=!he.isNaN(ce),Ee=!he.isNaN(ye),xe&&!Ee)return-1;if(Ee&&!xe)return 1;if(xe&&Ee){var Se=ce-ye;if(Se)return Se;if(ce.length!==ye.length)return+ce||+ye?ye.length-ce.length:ce.length-ye.length}else if(ce!==ye)return ce<ye?-1:1;j=j.substring(ce.length),be=be.substring(ye.length)}}Q=function(j){return j.sort(Te)},q.exports=Q},6837:function(q,Q){function V(de){if(typeof de!="function")throw new TypeError(de+" is not a function");return de}Q=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(de){setImmediate(V(de))}:function(de){setTimeout(V(de),0)},q.exports=Q},1214:function(q,Q){Q=function(){},q.exports=Q},8847:function(q,Q){Q=Date.now?Date.now:function(){return new Date().getTime()},q.exports=Q},106:function(q,Q){var V=Object.prototype.toString;Q=function(de){return V.call(de)},q.exports=Q},8763:function(q,Q,V){Q=V(4198)(V(5637),2),q.exports=Q},3955:function(q,Q,V){var de=V(1286);Q=function(he,ne,Te){if(de(ne))return he;switch(Te==null?3:Te){case 1:return function(j){return he.call(ne,j)};case 3:return function(j,be,ce){return he.call(ne,j,be,ce)};case 4:return function(j,be,ce,ye){return he.call(ne,j,be,ce,ye)}}return function(){return he.apply(ne,arguments)}},q.exports=Q},442:function(q,Q,V){var de=V(1443),he=V(7653),ne=window.screen;Q={get:function(){if(ne){var Te=he(ne,"orientation.type");if(Te)return Te.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},de.mixin(Q),window.addEventListener("orientationchange",function(){setTimeout(function(){Q.emit("change",Q.get())},200)},!1),q.exports=Q},8702:function(q,Q,V){var de=V(9702),he=V(7913),ne=V(6930),Te=V(3063);Q=function(Ee,Ce){for(var Se,Oe=[],De=Ee;Ee;){if(Se=!0,de(Oe)&&xe[de(Oe)]){var Ue=new RegExp("</".concat(de(Oe),"[^>]*>")).exec(Ee);if(Ue){var $e=Ee.substring(0,Ue.index);Ee=Ee.substring(Ue.index+Ue[0].length),$e&&Ce.text&&Ce.text($e)}At("",de(Oe))}else{if(ne(Ee,"<!--")){var Fe=Ee.indexOf("-->");Fe>=0&&(Ce.comment&&Ce.comment(Ee.substring(4,Fe)),Ee=Ee.substring(Fe+3),Se=!1)}else if(ne(Ee,"<!")){var Xe=Ee.match(j);Xe&&(Ce.text&&Ce.text(Ee.substring(0,Xe[0].length)),Ee=Ee.substring(Xe[0].length),Se=!1)}else if(ne(Ee,"</")){var Ye=Ee.match(be);Ye&&(Ee=Ee.substring(Ye[0].length),Ye[0].replace(be,At),Se=!1)}else if(ne(Ee,"<")){var He=Ee.match(ce);He&&(Ee=Ee.substring(He[0].length),He[0].replace(ce,It),Se=!1)}if(Se){var Je=Ee.indexOf("<"),pt=Je<0?Ee:Ee.substring(0,Je);Ee=Je<0?"":Ee.substring(Je),Ce.text&&Ce.text(pt)}}if(De===Ee)throw Error("Parse Error: "+Ee);De=Ee}function It(bt,rt,nt,it){if(rt=Te(rt),(it=!!it)||Oe.push(rt),Ce.start){var dt={};nt.replace(ye,function(lt,ft,xt,ht,Vt){dt[ft]=xt||ht||Vt||""}),Ce.start(rt,dt,it)}}function At(bt,rt){var nt;if(rt=Te(rt))for(nt=Oe.length-1;nt>=0&&Oe[nt]!==rt;nt--);else nt=0;if(nt>=0){for(var it=Oe.length-1;it>=nt;it--)Ce.end&&Ce.end(Oe[it]);Oe.length=nt}}At()};var j=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,be=/^<\/([-A-Za-z0-9_]+)[^>]*>/,ce=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,ye=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,xe=he("script,style".split(","));q.exports=Q},4198:function(q,Q,V){var de=V(1137),he=V(1352);Q=de(function(ne,Te){return function(){var j=[];return j=(j=j.concat(Te)).concat(he(arguments)),ne.apply(this,j)}}),q.exports=Q},1194:function(q,Q,V){var de,he=V(8847),ne=V(5610),Te=ne.performance,j=ne.process;if(Te&&Te.now)Q=function(){return Te.now()};else if(j&&j.hrtime){var be=function(){var ce=j.hrtime();return 1e9*ce[0]+ce[1]};de=be()-1e9*j.uptime(),Q=function(){return(be()-de)/1e6}}else de=he(),Q=function(){return he()-de};q.exports=Q},3487:function(q,Q,V){var de=V(6768),he=V(6472),ne=V(6341),Te=V(3783);Q=function(j,be,ce){if(de(be)&&(be=[be]),he(be)){var ye=be;be=function(Ce,Se){return ne(ye,Se)}}var xe={},Ee=function(Ce,Se){be(Ce,Se)&&(xe[Se]=Ce)};return ce&&(Ee=function(Ce,Se){be(Ce,Se)||(xe[Se]=Ce)}),Te(j,Ee),xe},q.exports=Q},747:function(q,Q,V){var de=V(1475),he=V(7494),ne=V(3023),Te=V(6257),j=V(7622);(Q=de(function(xe){if(xe=xe.replace(ce,""),xe=he(xe),Te(ye,xe))return xe;for(var Ee=be.length;Ee--;){var Ce=be[Ee]+ne(xe);if(Te(ye,Ce))return Ce}return xe})).dash=de(function(xe){var Ee=Q(xe);return(ce.test(Ee)?"-":"")+j(Ee)});var be=["O","ms","Moz","Webkit"],ce=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,ye=document.createElement("p").style;q.exports=Q},2994:function(q,Q,V){var de=V(6472),he=V(7653);Q=function(ne){return de(ne)?function(j){return he(j,ne)}:(Te=ne,function(j){return j==null?void 0:j[Te]});var Te},q.exports=Q},1745:function(q,Q,V){var de=V(4331),he=V(3783),ne=V(1286),Te=V(6472),j=V(2461),be=V(8887),ce=V(5972),ye=V(5166);Q={parse:function(Ee){var Ce={};return Ee=de(Ee).replace(xe,""),he(Ee.split("&"),function(Se){var Oe=Se.split("="),De=Oe.shift(),Ue=Oe.length>0?Oe.join("="):null;De=decodeURIComponent(De),Ue=decodeURIComponent(Ue),ne(Ce[De])?Ce[De]=Ue:Te(Ce[De])?Ce[De].push(Ue):Ce[De]=[Ce[De],Ue]}),Ce},stringify:function(Ee,Ce){return ce(j(Ee,function(Se,Oe){return ye(Se)&&be(Se)?"":Te(Se)?Q.stringify(Se,Oe):encodeURIComponent(Ce||Oe)+"="+encodeURIComponent(Se)}),function(Se){return Se.length>0}).join("&")}};var xe=/^(\?|#|&)/g;q.exports=Q},1571:function(q,Q,V){var de,he,ne=V(8847),Te=V(2727),j=0;if(Te){de=window.requestAnimationFrame,he=window.cancelAnimationFrame;for(var be=["ms","moz","webkit","o"],ce=0,ye=be.length;ce<ye&&!de;ce++)de=window[be[ce]+"RequestAnimationFrame"],he=window[be[ce]+"CancelAnimationFrame"]||window[be[ce]+"CancelRequestAnimationFrame"];de&&(de=de.bind(window),he=he.bind(window))}he=he||function(xe){clearTimeout(xe)},(de=de||function(xe){var Ee=ne(),Ce=Math.max(0,16-(Ee-j)),Se=setTimeout(function(){xe(Ee+Ce)},Ce);return j=Ee+Ce,Se}).cancel=he,Q=de,q.exports=Q},1216:function(q,Q){Q=function(V,de,he){de==null&&(de=V,V=0);var ne=Math.random();return he||V%1||de%1?Math.min(V+ne*(de-V+parseFloat("1e-"+((ne+"").length-1))),de):V+Math.floor(ne*(de-V+1))},q.exports=Q},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(q){for(var Q=new Uint8Array(q),V=0;V<q;V++)Q[V]=random(0,255);return Q},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(q){var Q=new Uint8Array(q);return crypto.getRandomValues(Q),Q})):isNode&&(crypto=eval("require")("crypto"),exports=function(q){return crypto.randomBytes(q)}),module.exports=exports},5852:function(q,Q,V){var de=V(2838);Q=function(he,ne,Te){var j=[];ne=de(ne,Te);for(var be=-1,ce=he.length;++be<ce;){var ye=he[be];ne(ye,be,he)&&(j.push(ye),he.splice(be,1))}return j},q.exports=Q},4552:function(q,Q){Q=function(V,de){var he="";if(de<1)return"";for(;de>0;)1&de&&(he+=V),de>>=1,V+=V;return he},q.exports=Q},1137:function(q,Q){Q=function(V,de){return de=de==null?V.length-1:+de,function(){var he,ne=Math.max(arguments.length-de,0),Te=new Array(ne);for(he=0;he<ne;he++)Te[he]=arguments[he+de];switch(de){case 0:return V.call(this,Te);case 1:return V.call(this,arguments[0],Te);case 2:return V.call(this,arguments[0],arguments[1],Te)}var j=new Array(de+1);for(he=0;he<de;he++)j[he]=arguments[he];return j[de]=Te,V.apply(this,j)}},q.exports=Q},1527:function(q,Q){Q=function(V){var de=V.length,he=Array(de);de--;for(var ne=0;ne<=de;ne++)he[de-ne]=V[ne];return he},q.exports=Q},3279:function(q,Q){Q=function(ne){var Te,j,be=ne[0]/255,ce=ne[1]/255,ye=ne[2]/255,xe=V(be,ce,ye),Ee=de(be,ce,ye),Ce=Ee-xe;(Te=V(60*(Te=Ee===xe?0:be===Ee?(ce-ye)/Ce:ce===Ee?2+(ye-be)/Ce:4+(be-ce)/Ce),360))<0&&(Te+=360);var Se=(xe+Ee)/2;j=Ee===xe?0:Se<=.5?Ce/(Ee+xe):Ce/(2-Ee-xe);var Oe=[he(Te),he(100*j),he(100*Se)];return ne[3]&&(Oe[3]=ne[3]),Oe};var V=Math.min,de=Math.max,he=Math.round;q.exports=Q},5031:function(q,Q,V){var de=V(6299);Q=function(he){var ne,Te=window.location,j=Te.hostname,be=Te.pathname,ce=j.split("."),ye=be.split("/"),xe="",Ee=ye.length;if(!Ue())for(var Ce=ce.length-1;Ce>=0;Ce--){var Se=ce[Ce];if(Se!==""){if(Ue({domain:xe=xe===""?Se:Se+"."+xe,path:ne="/"})||Ue({domain:xe}))return;for(var Oe=0;Oe<Ee;Oe++){var De=ye[Oe];if(De!==""&&(Ue({domain:xe,path:ne+=De})||Ue({path:ne})||Ue({domain:xe,path:ne+="/"})||Ue({path:ne})))return}}}function Ue($e){return $e=$e||{},de.remove(he,$e),!de.get(he)}},q.exports=Q},5610:function(q,Q,V){Q=V(2727)?window:V.g,q.exports=Q},3597:function(q,Q){Q=function(V,de){if(de==null){if(V.trimRight)return V.trimRight();de=` \r
	\f\v`}for(var he,ne,Te=V.length-1,j=de.length,be=!0;be&&Te>=0;)for(be=!1,he=-1,ne=V.charAt(Te);++he<j;)if(ne===de[he]){be=!0,Te--;break}return Te>=0?V.substring(0,Te+1):""},q.exports=Q},2838:function(q,Q,V){var de=V(4777),he=V(5166),ne=V(6472),Te=V(3955),j=V(4491),be=V(6362),ce=V(2994);Q=function(ye,xe,Ee){return ye==null?be:de(ye)?Te(ye,xe,Ee):he(ye)&&!ne(ye)?j(ye):ce(ye)},q.exports=Q},7653:function(q,Q,V){var de=V(1286),he=V(1694);Q=function(ne,Te){var j;for(j=(Te=he(Te,ne)).shift();!de(j);){if((ne=ne[j])==null)return;j=Te.shift()}return ne},q.exports=Q},8079:function(q,Q,V){var de=V(1694),he=V(1286),ne=V(3367),Te=V(9804),j=V(6768);Q=function(be,ce,ye){var xe,Ee=(ce=de(ce,be)).pop();for(xe=ce.shift();!he(xe);){if(j(xe)||Te(xe)||(xe=ne(xe)),xe==="__proto__"||xe==="constructor"||xe==="prototype")return;be[xe]||(be[xe]={}),be=be[xe],xe=ce.shift()}be[Ee]=ye},q.exports=Q},615:function(q,Q,V){var de=V(5026);Q=function(he){var ne;switch(he=he||"local"){case"local":ne=window.localStorage;break;case"session":ne=window.sessionStorage}try{var Te="test-localStorage-"+Date.now();ne.setItem(Te,Te);var j=ne.getItem(Te);if(ne.removeItem(Te),j!==Te)throw new Error}catch{return de}return ne},q.exports=Q},4224:function(q,Q,V){var de=V(6334);Q=function(he,ne){return he=new de(he),ne=new de(ne),he.port=0|he.port||(he.protocol==="https"?443:80),ne.port=0|ne.port||(ne.protocol==="https"?443:80),he.protocol===ne.protocol&&he.hostname===ne.hostname&&he.port===ne.port},q.exports=Q},9677:function(q,Q){Q=function(V,de,he){var ne=V.length;de=de==null?0:de<0?Math.max(ne+de,0):Math.min(de,ne),he=he==null?ne:he<0?Math.max(ne+he,0):Math.min(he,ne);for(var Te=[];de<he;)Te.push(V[de++]);return Te},q.exports=Q},6053:function(q,Q,V){var de=V(2838),he=V(1369),ne=V(2533);Q=function(Te,j,be){j=de(j,be);for(var ce=!he(Te)&&ne(Te),ye=(ce||Te).length,xe=0;xe<ye;xe++){var Ee=ce?ce[xe]:xe;if(j(Te[Ee],Ee,Te))return!0}return!1},q.exports=Q},3629:function(q,Q,V){var de=V(3843),he=V(4193),ne=V(2533),Te=V(6472),j=V(5166);Q=function(ce){var ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};he(ye,be);var xe=ye.deep,Ee=ye.comparator,Ce=[],Se=[];function Oe(De){var Ue,$e=Ce.indexOf(De);if($e>-1)return Se[$e];if(Te(De)){Ue=[],Ce.push(De),Se.push(Ue);for(var Fe=0,Xe=De.length;Fe<Xe;Fe++){var Ye=De[Fe];xe&&j(Ye)?Ue[Fe]=Oe(Ye):Ue[Fe]=Ye}}else{Ue={},Ce.push(De),Se.push(Ue);for(var He=ne(De).sort(Ee),Je=0,pt=He.length;Je<pt;Je++){var It=He[Je],At=De[It];xe&&j(At)?Ue[It]=Oe(At):Ue[It]=At}}return Ue}return Oe(ce)};var be={deep:!1,comparator:de.defComparator};q.exports=Q},8935:function(q,Q){var V=/([A-Z])/g,de=/[_.\- ]+/g,he=/(^-)|(-$)/g;Q=function(ne){return(ne=ne.replace(V,"-$1").toLowerCase().replace(de,"-").replace(he,"")).split("-")},q.exports=Q},6930:function(q,Q){Q=function(V,de){return V.indexOf(de)===0},q.exports=Q},4400:function(q,Q,V){var de=V(3085),he=V(3023),ne=V(3367),Te=V(1286),j=V(4777),be=V(1754);Q=function(ce,ye){return JSON.stringify(ce,(xe=[],Ee=[],function(Ce,Se){if(xe.length>0){var Oe=xe.indexOf(this);Oe>-1?(xe.splice(Oe+1),Ee.splice(Oe,1/0,Ce)):(xe.push(this),Ee.push(Ce));var De=xe.indexOf(Se);De>-1&&(Se=xe[0]===Se?"[Circular ~]":"[Circular ~."+Ee.slice(0,De).join(".")+"]")}else xe.push(Se);return be(Se)||j(Se)?Se="["+he(de(Se))+" "+ne(Se)+"]":Te(Se)&&(Se=null),Se}),ye);var xe,Ee},q.exports=Q},9963:function(q,Q,V){var de=V(4187),he=V(3085),ne=V(3367),Te=V(4858),j=V(300),be=V(2533),ce=V(3783),ye=V(7496),xe=V(415),Ee=V(801),Ce=V(6329),Se=V(4321),Oe=V(5972),De=V(8847),Ue=V(1116),$e=V(6341),Fe=V(5166),Xe=V(9537),Ye=V(1662),He=V(6930),Je=V(8079),pt=V(9803),It=V(3487),At=V(1369);function bt(xt,ht,Vt,st){var $t=[];return ce(ht,function(ln){var Mn,on=Object.getOwnPropertyDescriptor(Vt,ln),an=on&&on.get,Xt=on&&on.set;if(!st.accessGetter&&an)Mn="(...)";else try{if(Mn=Vt[ln],$e(st.ignore,Mn))return;Se(Mn)&&Mn.catch(function(){})}catch(Rt){Mn=Rt.message}$t.push("".concat(rt(ln),":").concat(Q(Mn,st))),an&&$t.push("".concat(rt("get "+ne(ln)),":").concat(Q(on.get,st))),Xt&&$t.push("".concat(rt("set "+ne(ln)),":").concat(Q(on.set,st)))}),'"'.concat(xt,'":{')+$t.join(",")+"}"}function rt(xt){return'"'.concat(it(xt),'"')}function nt(xt){return'"'.concat(it(ne(xt)),'"')}function it(xt){return de(xt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}Q=function(xt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Vt=ht.self,st=ht.startTime,$t=st===void 0?De():st,ln=ht.timeout,Mn=ln===void 0?0:ln,on=ht.depth,an=on===void 0?0:on,Xt=ht.curDepth,Rt=Xt===void 0?1:Xt,en=ht.visitor,hn=en===void 0?new dt:en,vn=ht.unenumerable,Pn=vn!==void 0&&vn,Pt=ht.symbol,Dt=Pt!==void 0&&Pt,rn=ht.accessGetter,bn=rn!==void 0&&rn,En=ht.ignore,zn=En===void 0?[]:En,$n="",xn={visitor:hn,unenumerable:Pn,symbol:Dt,accessGetter:bn,depth:an,curDepth:Rt+1,timeout:Mn,startTime:$t,ignore:zn},wn=he(xt,!1);if(wn==="String")$n=nt(xt);else if(wn==="Number")$n=ne(xt),Te($n,"Infinity")&&($n='{"value":"'.concat($n,'","type":"Number"}'));else if(wn==="NaN")$n='{"value":"NaN","type":"Number"}';else if(wn==="Boolean")$n=xt?"true":"false";else if(wn==="Null")$n="null";else if(wn==="Undefined")$n='{"type":"Undefined"}';else if(wn==="Symbol"){var Sn="Symbol";try{Sn=ne(xt)}catch{}$n='{"value":'.concat(nt(Sn),',"type":"Symbol"}')}else{if(Mn&&De()-$t>Mn)return nt("Timeout");if(an&&Rt>an)return nt("{...}");$n="{";var Jn,nr=[],fr=hn.get(xt);if(fr?(Jn=fr.id,nr.push('"reference":'.concat(Jn))):(Jn=hn.set(xt),nr.push('"id":'.concat(Jn))),nr.push('"type":"'.concat(wn,'"')),Te(wn,"Function")?nr.push('"value":'.concat(nt(j(xt)))):wn==="RegExp"&&nr.push('"value":'.concat(nt(xt))),!fr){var Yn=be(xt);if(Yn.length&&nr.push(bt("enumerable",Yn,Vt||xt,xn)),Pn){var qn=Ee(Ue(xt,{prototype:!1,unenumerable:!0}),Yn);qn.length&&nr.push(bt("unenumerable",qn,Vt||xt,xn))}if(Dt){var un=Oe(Ue(xt,{prototype:!1,symbol:!0}),function(Kn){return typeof Kn=="symbol"});un.length&&nr.push(bt("symbol",un,Vt||xt,xn))}var yn=xe(xt);if(yn&&!$e(zn,yn)){var Rn='"proto":'.concat(Q(yn,Ce(xn,{self:Vt||xt})));nr.push(Rn)}}$n+=nr.join(",")+"}"}return $n};var dt=ye({initialize:function(){this.id=1,this.visited=[]},set:function(xt){var ht=this.visited,Vt=this.id,st={id:Vt,val:xt};return ht.push(st),this.id++,Vt},get:function(xt){for(var ht=this.visited,Vt=0,st=ht.length;Vt<st;Vt++){var $t=ht[Vt];if(xt===$t.val)return $t}return!1}});function lt(xt,ht){var Vt=ht.map;if(!Fe(xt))return xt;var st=xt.id,$t=xt.type,ln=xt.value,Mn=xt.proto,on=xt.reference,an=xt.enumerable,Xt=xt.unenumerable;if(on)return xt;if($t==="Number")return ln==="Infinity"?Number.POSITIVE_INFINITY:ln==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if($t!=="Undefined"){var Rt,en,hn;if($t==="Function")(Rt=function(){}).toString=function(){return ln},Mn&&Object.setPrototypeOf(Rt,lt(Mn,ht));else if($t==="RegExp")hn=(en=ln).lastIndexOf("/"),Rt=new RegExp(en.slice(1,hn),en.slice(hn+1));else{var vn;$t!=="Object"?(vn=Xe?function(){}:new Function($t,""),Mn&&(vn.prototype=lt(Mn,ht)),Rt=new vn):Rt=Ye(Mn?lt(Mn,ht):null)}var Pn,Pt={};return an&&(At(an)&&(Pn=an.length,delete an.length),an=It(an,function(rn,bn){return!Dt(an,rn,bn)}),ce(an,function(rn,bn){(Pt[bn]||{}).get||(Rt[bn]=lt(rn,ht))}),Pn&&(Rt.length=Pn)),Xt&&(Xt=It(Xt,function(rn,bn){return!Dt(Xt,rn,bn)}),ce(Xt,function(rn,bn){var En=Pt[bn]||{};if(!En.get)if(rn=lt(rn,ht),Fe(rn)&&rn.reference){var zn=rn.reference;rn=function(){return Vt[zn]},En.get=rn}else En.value=rn;En.enumerable=!1,Pt[bn]=En})),pt(Rt,Pt),Vt[st]=Rt,Rt}function Dt(rn,bn,En){En=ne(En);var zn=!1;return ce(["get","set"],function($n){if(He(En,$n+" ")){var xn=En.replace($n+" ","");rn[xn]&&((bn=lt(bn,ht))==="Timeout"&&(bn=ft),Je(Pt,[xn,$n],bn),zn=!0)}}),zn}}function ft(){return"Timeout"}Q.parse=function(xt){var ht={},Vt=lt(JSON.parse(xt),{map:ht});return function(st){ce(st,function($t){for(var ln=be($t),Mn=0,on=ln.length;Mn<on;Mn++){var an=ln[Mn];if(Fe($t[an])){var Xt=$t[an].reference;Xt&&st[Xt]&&($t[an]=st[Xt])}}var Rt=xe($t);Rt&&Rt.reference&&st[Rt.reference]&&Object.setPrototypeOf($t,st[Rt.reference])})}(ht),Vt},q.exports=Q},1907:function(q,Q,V){var de=V(6768),he=V(1352),ne=V(6435),Te=V(2461),j=V(4331);Q=function(ce){de(ce)&&(ce=he(ce));for(var ye="",xe=arguments.length,Ee=new Array(xe>1?xe-1:0),Ce=1;Ce<xe;Ce++)Ee[Ce-1]=arguments[Ce];for(var Se=0,Oe=ce.length;Se<Oe;Se++)ye+=ce[Se],Ee[Se]&&(ye+=Ee[Se]);for(var De=ye.split(`
`),Ue=[],$e=0,Fe=De.length;$e<Fe;$e++){var Xe=De[$e],Ye=Xe.match(be);Ye&&Ue.push(Ye[1].length)}var He=Ue.length>0?ne.apply(null,Ue):0;return j(Te(De,function(Je){return Je[0]===" "?Je.slice(He):Je}).join(`
`))};var be=/^(\s+)\S+/;q.exports=Q},2439:function(q,Q,V){var de=V(6049);Q=function(he,ne){return de(he,ne,!0)},q.exports=Q},1352:function(q,Q,V){var de=V(1369),he=V(2461),ne=V(6472),Te=V(6768);Q=function(j){return j?ne(j)?j:de(j)&&!Te(j)?he(j):[j]:[]},q.exports=Q},4891:function(q,Q){var V=document;if(Q=function(he){var ne=V.createElement("body");return ne.innerHTML=he,ne.childNodes[0]},V.createRange&&V.body){var de=V.createRange();de.selectNode(V.body),de.createContextualFragment&&(Q=function(he){return de.createContextualFragment(he).childNodes[0]})}q.exports=Q},9296:function(q,Q,V){var de=V(3875);Q=function(he){return he?(he=de(he))-he%1:he===0?he:0},q.exports=Q},3875:function(q,Q,V){var de=V(3990),he=V(5166),ne=V(4777),Te=V(6768);Q=function(j){if(de(j))return j;if(he(j)){var be=ne(j.valueOf)?j.valueOf():j;j=he(be)?be+"":be}return Te(j)?+j:j===0?j:+j},q.exports=Q},300:function(q,Q,V){var de=V(2763);Q=function(ne){if(de(ne))return"";try{return he.call(ne)}catch{}try{return ne+""}catch{}return""};var he=Function.prototype.toString;q.exports=Q},3367:function(q,Q){Q=function(V){return V==null?"":V.toString()},q.exports=Q},4331:function(q,Q,V){var de=V(7767),he=V(3597);Q=function(ne,Te){return Te==null&&ne.trim?ne.trim():de(he(ne,Te),Te)},q.exports=Q},7756:function(q,Q,V){var de=V(4193),he=V(1286);Q=function(Te,j){var be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};de(be,ne);var ce=be.ellipsis,ye=be.separator,xe=Te.length;if(j>xe)return Te;var Ee=j-ce.length;if(Ee<1)return ce;var Ce=Te.slice(0,Ee);if(he(ye))return Ce+ce;if(Te.indexOf(ye,Ee)!==Ee){var Se=Ce.lastIndexOf(ye);Se>-1&&(Ce=Ce.slice(0,Se))}return Ce+ce};var ne={ellipsis:"..."};q.exports=Q},3085:function(q,Q,V){var de=V(106),he=V(9433),ne=V(3063),Te=V(2349);Q=function(be){var ce,ye=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return be===null&&(ce="Null"),be===void 0&&(ce="Undefined"),he(be)&&(ce="NaN"),Te(be)&&(ce="Buffer"),ce||(ce=de(be).match(j))&&(ce=ce[1]),ce?ye?ne(ce):ce:""};var j=/^\[object\s+(.*?)]$/;q.exports=Q},9016:function(q,Q){Q={},q.exports=Q},8166:function(q,Q,V){var de=V(996),he=V(2461);Q={encode:function(ne){return ne.length<32768?String.fromCodePoint.apply(String,ne):he(de(ne,32767),function(Te){return String.fromCodePoint.apply(String,Te)}).join("")},decode:function(ne){for(var Te=[],j=0,be=ne.length;j<be;){var ce=ne.charCodeAt(j++);if(ce>=55296&&ce<=56319&&j<be){var ye=ne.charCodeAt(j++);(64512&ye)==56320?Te.push(((1023&ce)<<10)+(1023&ye)+65536):(Te.push(ce),j--)}else Te.push(ce)}return Te}},q.exports=Q},5484:function(q,Q,V){var de=V(2727),he=V(8985),ne=!1;function Te(j){ne&&Q.emit(j)}Q={start:function(){ne=!0},stop:function(){ne=!1}},he.mixin(Q),de?(window.addEventListener("error",function(j){Te(j.error)}),window.addEventListener("unhandledrejection",function(j){Te(j.reason)})):(process.on("uncaughtException",Te),process.on("unhandledRejection",Te)),q.exports=Q},5229:function(q,Q){var V=0;Q=function(de){var he=++V+"";return de?de+he:he},q.exports=Q},42:function(q,Q,V){var de=V(5972);function he(ne,Te){return ne===Te}Q=function(ne,Te){return Te=Te||he,de(ne,function(j,be,ce){for(var ye=ce.length;++be<ye;)if(Te(j,ce[be]))return!1;return!0})},q.exports=Q},4502:function(q,Q,V){var de=V(3367);Q=function(he){return de(he).toLocaleUpperCase()},q.exports=Q},3023:function(q,Q){Q=function(V){return V.length<1?V:V[0].toUpperCase()+V.slice(1)},q.exports=Q},5742:function(q,Q,V){var de=V(8166);Q={encode:function(De){for(var Ue=de.decode(De),$e="",Fe=0,Xe=Ue.length;Fe<Xe;Fe++)$e+=Ce(Ue[Fe]);return $e},decode:function(De,Ue){he=de.decode(De),ne=0,Te=he.length,j=0,be=0,ce=0,ye=128,xe=191;for(var $e,Fe=[];($e=Se(Ue))!==!1;)Fe.push($e);return de.encode(Fe)}};var he,ne,Te,j,be,ce,ye,xe,Ee=String.fromCharCode;function Ce(De){if((4294967168&De)==0)return Ee(De);var Ue,$e,Fe="";for((4294965248&De)==0?(Ue=1,$e=192):(4294901760&De)==0?(Ue=2,$e=224):(4292870144&De)==0&&(Ue=3,$e=240),Fe+=Ee((De>>6*Ue)+$e);Ue>0;)Fe+=Ee(128|63&De>>6*(Ue-1)),Ue--;return Fe}function Se(De){for(;;){if(ne>=Te&&ce){if(De)return Oe();throw new Error("Invalid byte index")}if(ne===Te)return!1;var Ue=he[ne];if(ne++,ce){if(Ue<ye||Ue>xe){if(De)return ne--,Oe();throw new Error("Invalid continuation byte")}if(ye=128,xe=191,j=j<<6|63&Ue,++be===ce){var $e=j;return j=0,ce=0,be=0,$e}}else{if((128&Ue)==0)return Ue;if((224&Ue)==192)ce=1,j=31&Ue;else if((240&Ue)==224)Ue===224&&(ye=160),Ue===237&&(xe=159),ce=2,j=15&Ue;else{if((248&Ue)!=240){if(De)return Oe();throw new Error("Invalid UTF-8 detected")}Ue===240&&(ye=144),Ue===244&&(xe=143),ce=3,j=7&Ue}}}}function Oe(){var De=ne-be-1;return ne=De+1,j=0,ce=0,be=0,ye=128,xe=191,he[De]}q.exports=Q},5936:function(q,Q,V){var de=V(3366);Q=function(){var Te=de(16);return Te[6]=15&Te[6]|64,Te[8]=63&Te[8]|128,he[Te[0]]+he[Te[1]]+he[Te[2]]+he[Te[3]]+"-"+he[Te[4]]+he[Te[5]]+"-"+he[Te[6]]+he[Te[7]]+"-"+he[Te[8]]+he[Te[9]]+"-"+he[Te[10]]+he[Te[11]]+he[Te[12]]+he[Te[13]]+he[Te[14]]+he[Te[15]]};for(var he=[],ne=0;ne<256;ne++)he[ne]=(ne+256).toString(16).substr(1);q.exports=Q},2578:function(q,Q,V){var de=V(3783);Q=function(he){var ne=[];return de(he,function(Te){ne.push(Te)}),ne},q.exports=Q},3514:function(q,Q,V){var de=V(8573),he=V(9882),ne=V(4331),Te=V(3783),j=V(2461),be=V(9433);Q=function(){var ce=de("viewport");if(!ce)return 1;ce=j(ce.split(","),function(Se){return ne(Se)});var ye=.25,xe=5,Ee=1;Te(ce,function(Se){var Oe=(Se=Se.split("="))[0];Se=Se[1],Oe==="initial-scale"&&(Ee=+Se),Oe==="maximum-scale"&&(xe=+Se),Oe==="minimum-scale"&&(ye=+Se)});var Ce=he(Ee,ye,xe);return be(Ce)?1:Ce},q.exports=Q},5491:function(q,Q,V){var de=V(4198);Q=function(he,ne){return de(ne,he)},q.exports=Q},8933:function(q,Q){Q=function(V){for(var de=[],he=document.evaluate(V,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),ne=0;ne<he.snapshotLength;ne++)de.push(he.snapshotItem(ne));return de},q.exports=Q},4095:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Yn,qn){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(un,yn){un.__proto__=yn}||function(un,yn){for(var Rn in yn)Object.prototype.hasOwnProperty.call(yn,Rn)&&(un[Rn]=yn[Rn])},de(Yn,qn)},function(Yn,qn){if(typeof qn!="function"&&qn!==null)throw new TypeError("Class extends value "+String(qn)+" is not a constructor or null");function un(){this.constructor=Yn}de(Yn,qn),Yn.prototype=qn===null?Object.create(qn):(un.prototype=qn.prototype,new un)}),ne=this&&this.__makeTemplateObject||function(Yn,qn){return Object.defineProperty?Object.defineProperty(Yn,"raw",{value:qn}):Yn.raw=qn,Yn},Te=this&&this.__createBinding||(Object.create?function(Yn,qn,un,yn){yn===void 0&&(yn=un);var Rn=Object.getOwnPropertyDescriptor(qn,un);Rn&&!("get"in Rn?!qn.__esModule:Rn.writable||Rn.configurable)||(Rn={enumerable:!0,get:function(){return qn[un]}}),Object.defineProperty(Yn,yn,Rn)}:function(Yn,qn,un,yn){yn===void 0&&(yn=un),Yn[yn]=qn[un]}),j=this&&this.__setModuleDefault||(Object.create?function(Yn,qn){Object.defineProperty(Yn,"default",{enumerable:!0,value:qn})}:function(Yn,qn){Yn.default=qn}),be=this&&this.__importStar||function(Yn){if(Yn&&Yn.__esModule)return Yn;var qn={};if(Yn!=null)for(var un in Yn)un!=="default"&&Object.prototype.hasOwnProperty.call(Yn,un)&&Te(qn,Yn,un);return j(qn,Yn),qn},ce=this&&this.__read||function(Yn,qn){var un=typeof Symbol=="function"&&Yn[Symbol.iterator];if(!un)return Yn;var yn,Rn,Kn=un.call(Yn),mr=[];try{for(;(qn===void 0||qn-- >0)&&!(yn=Kn.next()).done;)mr.push(yn.value)}catch(Cr){Rn={error:Cr}}finally{try{yn&&!yn.done&&(un=Kn.return)&&un.call(Kn)}finally{if(Rn)throw Rn.error}}return mr},ye=this&&this.__importDefault||function(Yn){return Yn&&Yn.__esModule?Yn:{default:Yn}};Object.defineProperty(Q,"__esModule",{value:!0});var xe,Ee=ye(V(2925)),Ce=be(V(4030)),Se=ye(V(3467)),Oe=ye(V(8719)),De=ye(V(242)),Ue=ye(V(5166)),$e=ye(V(6768)),Fe=ye(V(2749)),Xe=ye(V(6997)),Ye=ye(V(4193)),He=ye(V(9833)),Je=ye(V(3367)),pt=ye(V(3875)),It=ye(V(9296)),At=ye(V(8099)),bt=ye(V(8901)),rt=ye(V(6156)),nt=ye(V(1286)),it=ye(V(4777)),dt=ye(V(1352)),lt=ye(V(6472)),ft=ye(V(42)),xt=ye(V(6341)),ht=ye(V(8887)),Vt=ye(V(4675)),st=ye(V(3783)),$t=ye(V(2461)),ln=ye(V(4331)),Mn=ye(V(3063)),on=ye(V(9585)),an=ye(V(2533)),Xt=ye(V(1512)),Rt=ye(V(8613)),en=ye(V(1443)),hn=ye(V(6049)),vn=ye(V(4400)),Pn=ye(V(2327)),Pt=ye(V(9963)),Dt=ye(V(6837)),rn=ye(V(3988)),bn=ye(V(3651)),En=ye(V(6053)),zn=V(1893),$n=ye(V(1907)),xn=ye(V(4891)),wn=ye(V(5229)),Sn=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,Jn={comment:"",string:"",number:"",keyword:"",operator:""},nr=function(Yn){function qn(un,yn){var Rn=yn.type,Kn=Rn===void 0?"log":Rn,mr=yn.args,Cr=mr===void 0?[]:mr,Lr=yn.id,br=yn.group,Br=yn.targetGroup,Fr=yn.header,Gr=yn.ignoreFilter,Ur=Gr!==void 0&&Gr,Ri=yn.accessGetter,Li=yn.unenumerable,Ti=yn.lazyEvaluation,Sr=Yn.call(this)||this;return Sr.container=(0,Rt.default)("div"),Sr.count=1,Sr.width=0,Sr.height=0,Sr.isHidden=!1,Sr.columns=[],Sr.elements={},Sr.objects={},Sr.console=un,Sr.type=Kn,Sr.group=br,Sr.targetGroup=Br,Sr.args=Cr,Sr.id=Lr,Sr.header=Fr,Sr.ignoreFilter=Ur,Sr.collapsed=!1,Sr.container.log=Sr,Sr.height=0,Sr.width=0,Sr.$container=(0,Xt.default)(Sr.container),Sr.accessGetter=Ri,Sr.unenumerable=Li,Sr.lazyEvaluation=Ti,Sr.resizeSensor=new De.default(Sr.container),Sr.onResize=(0,hn.default)(function(){(0,on.default)(Sr.container)?Sr.isHidden=!0:(Sr.isHidden||Sr.updateSize(!1),Sr.isHidden=!1)},16),Sr.formatMsg(),Sr.group&&Sr.checkGroup(),Sr.bindEvent(),Sr}return he(qn,Yn),qn.prototype.checkGroup=function(){for(var un=this.group,yn=!1;un;){if(un.collapsed){yn=!0;break}un=un.parent}return yn!==this.collapsed&&(this.collapsed=yn,!0)},qn.prototype.updateIcon=function(un){var yn=this.console.c;return this.$container.find(yn(".icon")).rmAttr("class").addClass([yn("icon"),yn("icon-".concat(un))]),this},qn.prototype.addCount=function(){this.count++;var un=this.$container,yn=this.count,Rn=this.console.c,Kn=un.find(Rn(".count-container")),mr=un.find(Rn(".icon-container")),Cr=Kn.find(Rn(".count"));return yn===2&&Kn.rmClass(Rn("hidden")),Cr.text((0,Je.default)(yn)),mr.addClass(Rn("hidden")),this},qn.prototype.groupEnd=function(){var un=this.$container,yn=this.console.c;return un.find(".".concat(yn("nesting-level"),":not(.").concat(yn("group-closed"),")")).last().addClass(yn("group-closed")),this},qn.prototype.updateTime=function(un){var yn=this.$container.find(this.console.c(".time-container"));return this.header&&(yn.find("span").eq(0).text(un),this.header.time=un),this},qn.prototype.isAttached=function(){return!!this.container.parentNode},qn.prototype.isSimple=function(){return!(0,En.default)(this.args,function(un){return(0,Ue.default)(un)})},qn.prototype.updateSize=function(un){un===void 0&&(un=!0);var yn=this.container.getBoundingClientRect(),Rn=yn.width,Kn=yn.height-1;this.height!==Kn&&(this.height=Kn,un||this.emit("updateHeight")),this.width!==Rn&&(this.width=Rn)},qn.prototype.html=function(){return this.container.outerHTML},qn.prototype.text=function(){return this.content.textContent||""},qn.prototype.select=function(){this.$container.addClass(this.console.c("selected"))},qn.prototype.deselect=function(){this.$container.rmClass(this.console.c("selected"))},qn.prototype.copy=function(){var un=this.args,yn="";(0,st.default)(un,function(Rn,Kn){Kn!==0&&(yn+=" "),(0,Ue.default)(Rn)?yn+=(0,vn.default)(Rn):yn+=(0,Je.default)(Rn)}),(0,Pn.default)(yn)},qn.prototype.bindEvent=function(){var un=this,yn=this.console.c,Rn=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",yn(".dom-viewer"),function(Kn){return Kn.stopPropagation()}).on("click",yn(".preview"),function(Kn){Kn.stopPropagation(),Rn.renderObjectViewer(this)}).on("click",function(){return un.click()})},qn.prototype.renderEl=function(){var un=this.elements,yn=this.console.c,Rn=this;this.$container.find(yn(".dom-viewer")).each(function(){var Kn=(0,Xt.default)(this).data("id");new Oe.default(this,{node:un[Kn],theme:Rn.console.getOption("theme")})})},qn.prototype.renderObjectViewer=function(un){var yn=this,Rn=yn.console,Kn=yn.unenumerable,mr=yn.accessGetter,Cr=yn.lazyEvaluation,Lr=Rn.c,br=(0,Xt.default)(un),Br=br.data("id");if(Br){var Fr=this.objects[Br],Gr=br.find(Lr(".json"));if(Gr.hasClass(Lr("hidden"))){if(Gr.data("init")!=="true"){if(Cr){var Ur=new Ce.default(Gr.get(0),{unenumerable:Kn,accessGetter:mr});Ur.setOption("theme",Rn.getOption("theme")),Ur.set(Fr)}else{var Ri=new Ce.Static(Gr.get(0));Ri.setOption("theme",Rn.getOption("theme")),Ri.set(Fr)}Gr.data("init","true")}Gr.rmClass(Lr("hidden"))}else Gr.addClass(Lr("hidden"))}},qn.prototype.renderTable=function(un){var yn=this,Rn="__LunaConsoleValue",Kn=this,mr=Kn.columns,Cr=Kn.$container,Lr=Kn.console,br=Lr.c,Br=Cr.find(br(".data-grid")),Fr=un[0],Gr=new Se.default(Br.get(0),{columns:(0,At.default)([{id:"(index)",title:"(index)",sortable:!0}],(0,$t.default)(mr,function(Ur){return{id:Ur,title:Ur,sortable:!0}})),theme:Lr.getOption("theme")});(0,st.default)(Fr,function(Ur,Ri){var Li={"(index)":(0,Je.default)(Ri)};mr.forEach(function(Ti){(0,Ue.default)(Ur)?Li[Ti]=Ti===Rn?"":yn.formatTableVal(Ur[Ti]):(0,Xe.default)(Ur)&&(Li[Ti]=Ti===Rn?yn.formatTableVal(Ur):"")}),Gr.append(Li)})},qn.prototype.extractObj=function(un,yn,Rn){yn===void 0&&(yn={});var Kn=this.accessGetter,mr=this.unenumerable;(0,Ye.default)(yn,{accessGetter:Kn,unenumerable:mr,symbol:mr,timeout:1e3}),function(Cr,Lr,br){var Br=(0,Pt.default)(Cr,Lr);(0,Dt.default)(function(){return br(Br)})}(un,yn,function(Cr){return Rn(JSON.parse(Cr))})},qn.prototype.click=function(){var un=this,yn=un.type,Rn=un.$container,Kn=un.console,mr=Kn.c;switch(yn){case"log":case"warn":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Kn.toggleGroup(this);break;case"error":Rn.find(mr(".stack")).toggleClass(mr("hidden"))}},qn.prototype.formatMsg=function(){var un=this.args,yn=this,Rn=yn.type,Kn=yn.id,mr=yn.header,Cr=yn.group,Lr=this.console.c;un=(0,Vt.default)(un);var br,Br,Fr="";switch(Rn!=="group"&&Rn!=="groupCollapsed"||un.length===0&&(un=["console.group"]),Rn){case"log":case"debug":Fr=this.formatCommon(un);break;case"dir":Fr=this.formatDir(un);break;case"warn":br="warn",Fr=this.formatCommon(un);break;case"error":(0,$e.default)(un[0])&&un.length!==1&&(un=this.substituteStr(un)),Br=un[0],br="error",Br=(0,Fe.default)(Br)?Br:new Error(this.formatCommon(un)),Fr=this.formatErr(Br);break;case"table":Fr=this.formatTable(un);break;case"html":Fr=un[0];break;case"input":Fr=this.formatJs(un[0]),br="input";break;case"output":Fr=this.formatCommon(un),br="output";break;case"groupCollapsed":Fr=this.formatCommon(un),br="caret-right";break;case"group":Fr=this.formatCommon(un),br="caret-down"}(0,xt.default)(["log","debug","warn"],Rn)&&this.isSimple()&&(Fr=(0,rn.default)(Fr,function(Gr){return'<a href="'.concat(Gr,'" target="_blank">').concat(Gr,"</a>")})),Fr=this.render({msg:Fr,type:Rn,icon:br,id:Kn,header:mr,group:Cr}),this.$container.addClass("".concat(Lr("log-container"))).html(Fr),Rn==="table"&&((0,ht.default)(this.columns)||this.renderTable(un)),(0,ht.default)(this.elements)||this.renderEl(),this.$content=this.$container.find(Lr(".log-content")),this.content=this.$content.get(0)},qn.prototype.render=function(un){var yn=this.console.c,Rn="",Kn="";if(un.group)for(var mr=un.group.indentLevel,Cr=0;Cr<mr;Cr++)Kn+='<div class="'.concat(yn("nesting-level"),'"></div>');un.header&&(Rn+=(0,$n.default)(xe||(xe=ne([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`],[`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),yn("header"),Kn,yn("time-from-container"),un.header.time,un.header.from));var Lr="";return un.icon&&(Lr='<div class="'.concat(yn("icon-container"),'"><span class="').concat(yn("icon icon-"+un.icon),'"></span></div>')),Rn+=`
    <div class="`.concat(yn(un.type+" log-item"),`">
      `).concat(Kn,`
      `).concat(Lr,`
      <div class="`).concat(yn("count-container hidden"),`">
        <div class="`).concat(yn("count"),`"></div>
      </div>    
      <div class="`).concat(yn("log-content-wrapper"),`">
        <div class="`).concat(yn("log-content"),'">').concat(un.msg,`</div>
      </div>
    </div>`)},qn.prototype.formatTable=function(un){var yn=un[0],Rn=un[1],Kn=[];return(0,$e.default)(Rn)&&(Rn=(0,dt.default)(Rn)),(0,lt.default)(Rn)||(Rn=null),(0,Ue.default)(yn)?((0,st.default)(yn,function(mr){(0,Xe.default)(mr)?Kn.push("__LunaConsoleValue"):(0,Ue.default)(mr)&&(Kn=Kn.concat((0,an.default)(mr)))}),(Kn=(0,ft.default)(Kn)).sort(),Rn&&(Kn=Kn.filter(function(mr){return(0,xt.default)(Rn,mr)})),Kn.length>20&&(Kn=Kn.slice(0,20)),(0,ht.default)(Kn)?this.formatCommon(un):(this.columns=Kn,this.console.c('<div class="data-grid"></div>')+this.formatPreview(yn))):this.formatCommon(un)},qn.prototype.formatErr=function(un){var yn=un.stack?un.stack.split(`
`):[],Rn="".concat(un.message||yn[0],"<br/>");return yn=yn.map(function(Kn){return(0,bt.default)(Kn)}),Rn+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(yn.slice(1).join("<br/>"),"</div>").replace(Sn,function(Kn){return'<a href="'.concat(Kn,'" target="_blank">').concat(Kn,"</a>")})},qn.prototype.formatCommon=function(un,yn){var Rn=(yn===void 0?{}:yn).htmlForEl,Kn=Rn===void 0||Rn,mr=(0,$e.default)(un[0])&&un.length!==1;mr&&(un=this.substituteStr(un));for(var Cr=0,Lr=un.length;Cr<Lr;Cr++){var br=un[Cr];(0,He.default)(br)&&Kn?un[Cr]=this.formatEl(br):(0,it.default)(br)?un[Cr]=this.formatFn(br):(0,Ue.default)(br)?un[Cr]=this.formatPreview(br):(0,nt.default)(br)?un[Cr]="undefined":(0,rt.default)(br)?un[Cr]="null":(br=(0,Je.default)(br),Cr===0&&mr||(br=(0,bt.default)(br)),un[Cr]=br)}return un.join(" ")},qn.prototype.formatDir=function(un){return this.formatCommon(un,{htmlForEl:!1})},qn.prototype.formatTableVal=function(un){var yn=this.console.c;return(0,Ue.default)(un)?"{\u2026}":(0,Xe.default)(un)?(0,xn.default)('<div class="'.concat(yn("preview"),'">').concat((0,Ee.default)(un),"</div>")):(0,Je.default)(un)},qn.prototype.formatPreview=function(un){var yn=this,Rn=this.console.c,Kn=(0,wn.default)();this.lazyEvaluation?this.objects[Kn]=un:this.extractObj(un,{},function(Cr){yn.objects[Kn]=Cr});var mr=(0,zn.getObjType)(un);return mr==="Array"&&un.length>1&&(mr="(".concat(un.length,")")),'<div class="'.concat(Rn("preview"),'" data-id="').concat(Kn,'">')+'<span class="'.concat(Rn("descriptor"),'">').concat(mr,"</span> ")+'<span class="'.concat(Rn("object-preview"),'">').concat((0,Ee.default)(un,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+'<div class="'.concat(Rn("json hidden"),'"></div></div>')},qn.prototype.substituteStr=function(un){var yn=(0,bt.default)(un[0]),Rn=!1,Kn="";un.shift();for(var mr=0,Cr=yn.length;mr<Cr;mr++){var Lr=yn[mr];if(Lr==="%"&&un.length!==0){mr++;var br=un.shift();switch(yn[mr]){case"i":case"d":Kn+=(0,It.default)(br);break;case"f":Kn+=(0,pt.default)(br);break;case"s":Kn+=(0,Je.default)(br);break;case"O":(0,Ue.default)(br)&&(Kn+=this.formatPreview(br));break;case"o":(0,He.default)(br)?Kn+=this.formatEl(br):(0,Ue.default)(br)&&(Kn+=this.formatPreview(br));break;case"c":if(yn.length<=mr+1)break;Rn&&(Kn+="</span>"),Rn=!0,Kn+='<span style="'.concat(fr(br),'">');break;default:mr--,un.unshift(br),Kn+=Lr}}else Kn+=Lr}return Rn&&(Kn+="</span>"),un.unshift(Kn),un},qn.prototype.formatJs=function(un){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c((0,bn.default)(un,"js",Jn)),"</pre>")},qn.prototype.formatFn=function(un){return'<pre style="display:inline">'.concat(this.formatJs(un.toString()),"</pre>")},qn.prototype.formatEl=function(un){var yn=(0,wn.default)();return this.elements[yn]=un,this.console.c('<div class="dom-viewer" data-id="'.concat(yn,'"></div>'))},qn}(en.default);function fr(Yn){var qn=(Yn=(0,Mn.default)(Yn)).split(";"),un={};(0,st.default)(qn,function(Rn){if((0,xt.default)(Rn,":")){var Kn=ce(Rn.split(":"),2),mr=Kn[0],Cr=Kn[1];un[(0,ln.default)(mr)]=(0,ln.default)(Cr)}}),un.display="inline-block",un["max-width"]="100%",delete un.width,delete un.height;var yn="";return(0,st.default)(un,function(Rn,Kn){yn+="".concat(Kn,":").concat(Rn,";")}),yn}Q.default=nr},2925:function(q,Q,V){var de=this&&this.__importDefault||function(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}};Object.defineProperty(Q,"__esModule",{value:!0});var he=de(V(8901)),ne=de(V(3367)),Te=de(V(6341)),j=de(V(6930)),be=de(V(4187)),ce=de(V(3783)),ye=de(V(4858)),xe=de(V(8887)),Ee=V(1893),Ce=(0,V(2375).classPrefix)("console");Q.default=function Ue($e,Fe){var Xe,Ye=Fe===void 0?{}:Fe,He=Ye.topObj,Je=Ye.level,pt=Je===void 0?0:Je,It=Ye.getterVal,At=It!==void 0&&It,bt=Ye.unenumerable,rt=bt===void 0||bt,nt="",it="",dt=[],lt=[],ft="";He=He||$e;var xt={getterVal:At,unenumerable:rt,level:pt+1},ht=pt===0,Vt='<span class="'.concat(Ce("key"),'">'),st='<span class="'.concat(Ce("number"),'">'),$t='<span class="'.concat(Ce("null"),'">'),ln='<span class="'.concat(Ce("string"),'">'),Mn='<span class="'.concat(Ce("boolean"),'">'),on='<span class="'.concat(Ce("special"),'">'),an=function(wn){return(0,he.default)(wn).replace(/\\n/g,"\u21B5").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Xt="</span>";function Rt(wn){return wn=(0,ne.default)(wn),(0,Te.default)(Se,wn)||(0,j.default)(wn,"Array[")?on+an(wn)+Xt:ln+an('"'.concat(wn,'"'))+Xt}function en(wn){if(Xe>5)ft=", \u2026";else{var Sn=function(nr){return Vt+an(nr)+Xt}(De(wn));if(!At){var Jn=Object.getOwnPropertyDescriptor($e,wn);if(Jn&&Jn.get)return dt.push("".concat(Sn,": ").concat(Rt("(...)"))),void Xe++}dt.push("".concat(Sn,": ").concat(Ue(He[wn],xt))),Xe++}}try{it={}.toString.call($e)}catch{it="[object Object]"}var hn,vn=it=="[object Array]",Pn=it=="[object Object]",Pt=it=="[object Number]",Dt=it=="[object RegExp]",rn=it=="[object Symbol]",bn=it=="[object Function]",En=it=="[object Boolean]";if(it=="[object String]")nt=Rt(De($e));else if(Dt)hn=De($e.toString()),nt=ln+hn+Xt;else if(bn)nt=Rt("\u0192");else if(vn)if(ht){nt="[";var zn=$e.length,$n="";zn>100&&(zn=100,$n=", \u2026");for(var xn=0;xn<zn;xn++)dt.push("".concat(Ue($e[xn],xt)));nt+=dt.join(", ")+$n+"]"}else nt="Array(".concat($e.length,")");else if(Pn)Oe($e)&&($e=Object.getPrototypeOf($e)),lt=rt?Object.getOwnPropertyNames($e):Object.keys($e),ht?(Xe=1,nt="{",(0,ce.default)(lt,en),nt+=dt.join(", ")+ft+"}"):(nt=(0,Ee.getObjType)($e))==="Object"&&(nt="{\u2026}");else if(Pt)nt=$e+"",nt=(0,ye.default)(nt,"Infinity")||nt==="NaN"?'"'.concat(nt,'"'):st+nt+Xt;else if(En)nt=Mn+($e?"true":"false")+Xt;else if($e===null)nt=function(wn){return $t+wn+Xt}("null");else if(rn)nt=Rt("Symbol");else if($e===void 0)nt=Rt("undefined");else try{Oe($e)&&($e=Object.getPrototypeOf($e)),ht?(Xe=1,nt="{",lt=rt?Object.getOwnPropertyNames($e):Object.keys($e),(0,ce.default)(lt,en),nt+=dt.join(", ")+ft+"}"):(nt=(0,Ee.getObjType)($e))==="Object"&&(nt="{\u2026}")}catch{nt=Rt($e)}return nt};var Se=["(...)","undefined","Symbol","Object","\u0192"];function Oe(Ue){var $e=(0,xe.default)(Object.getOwnPropertyNames(Ue)),Fe=Object.getPrototypeOf(Ue);return $e&&Fe&&Fe!==Object.prototype}function De(Ue){return(0,be.default)(Ue).replace(/\\'/g,"'").replace(/\t/g,"\\t")}},7132:function(q,Q,V){var de,he=this&&this.__extends||(de=function(an,Xt){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,en){Rt.__proto__=en}||function(Rt,en){for(var hn in en)Object.prototype.hasOwnProperty.call(en,hn)&&(Rt[hn]=en[hn])},de(an,Xt)},function(an,Xt){if(typeof Xt!="function"&&Xt!==null)throw new TypeError("Class extends value "+String(Xt)+" is not a constructor or null");function Rt(){this.constructor=an}de(an,Xt),an.prototype=Xt===null?Object.create(Xt):(Rt.prototype=Xt.prototype,new Rt)}),ne=this&&this.__makeTemplateObject||function(an,Xt){return Object.defineProperty?Object.defineProperty(an,"raw",{value:Xt}):an.raw=Xt,an},Te=this&&this.__read||function(an,Xt){var Rt=typeof Symbol=="function"&&an[Symbol.iterator];if(!Rt)return an;var en,hn,vn=Rt.call(an),Pn=[];try{for(;(Xt===void 0||Xt-- >0)&&!(en=vn.next()).done;)Pn.push(en.value)}catch(Pt){hn={error:Pt}}finally{try{en&&!en.done&&(Rt=vn.return)&&Rt.call(vn)}finally{if(hn)throw hn.error}}return Pn},j=this&&this.__importDefault||function(an){return an&&an.__esModule?an:{default:an}};Object.defineProperty(Q,"__esModule",{value:!0});var be=j(V(4095)),ce=j(V(1286)),ye=j(V(1194)),xe=j(V(8847)),Ee=j(V(6768)),Ce=j(V(6329)),Se=j(V(5229)),Oe=j(V(1754)),De=j(V(4777)),Ue=j(V(9001)),$e=j(V(8887)),Fe=j(V(6341)),Xe=j(V(2327)),Ye=j(V(3783)),He=j(V(1352)),Je=j(V(2533)),pt=j(V(9702)),It=j(V(2439)),At=j(V(8933)),bt=j(V(3063)),rt=j(V(4407)),nt=j(V(9585)),it=j(V(1907)),dt=j(V(242)),lt=j(V(6156)),ft=j(V(1018)),xt=V(1571),ht=navigator.userAgent,Vt=ht.indexOf("Android")>-1||ht.indexOf("Adr")>-1,st=0,$t=function(an){function Xt(Rt,en){en===void 0&&(en={});var hn=an.call(this,Rt,{compName:"console"},en)||this;return hn.spaceHeight=0,hn.topSpaceHeight=0,hn.bottomSpaceHeight=0,hn.lastScrollTop=0,hn.lastTimestamp=0,hn.speedToleranceFactor=100,hn.maxSpeedTolerance=2e3,hn.minSpeedTolerance=100,hn.logs=[],hn.displayLogs=[],hn.timer={},hn.counter={},hn.asyncList=[],hn.asyncTimer=null,hn.isAtBottom=!0,hn.groupStack=new Ue.default,hn.selectedLog=null,hn.onScroll=function(){var vn=hn.container,Pn=vn.scrollHeight,Pt=vn.offsetHeight,Dt=vn.scrollTop;if(!(Dt<=0||Pt+Dt>Pn)){var rn=!1;(Pn===Pt||Dt===Pn-Pt)&&(rn=!0),hn.isAtBottom=rn;var bn=hn.lastScrollTop,En=hn.lastTimestamp,zn=(0,xe.default)(),$n=zn-En,xn=Dt-bn,wn=Math.abs(xn/$n)*hn.speedToleranceFactor;$n>1e3&&(wn=1e3),wn>hn.maxSpeedTolerance&&(wn=hn.maxSpeedTolerance),wn<hn.minSpeedTolerance&&(wn=hn.minSpeedTolerance),hn.lastScrollTop=Dt,hn.lastTimestamp=zn;var Sn=0,Jn=0;bn<Dt?(Sn=hn.minSpeedTolerance,Jn=wn):(Sn=wn,Jn=hn.minSpeedTolerance),hn.topSpaceHeight<Dt-Sn&&hn.topSpaceHeight+hn.el.offsetHeight>Dt+Pt+Jn||hn.renderViewport({topTolerance:2*Sn,bottomTolerance:2*Jn})}},hn.initTpl(),hn.initOptions(en,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"all",accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),hn.$el=hn.find(".logs"),hn.el=hn.$el.get(0),hn.$fakeEl=hn.find(".fake-logs"),hn.fakeEl=hn.$fakeEl.get(0),hn.$space=hn.find(".logs-space"),hn.space=hn.$space.get(0),Vt&&(hn.speedToleranceFactor=800,hn.maxSpeedTolerance=3e3,hn.minSpeedTolerance=800),hn.resizeSensor=new dt.default(Rt),hn.renderViewport=(0,It.default)(function(vn){hn._renderViewport(vn)},16),hn.global={copy:function(vn){(0,Ee.default)(vn)||(vn=JSON.stringify(vn,null,2)),(0,Xe.default)(vn)},$:function(vn){return document.querySelector(vn)},$$:function(vn){return(0,He.default)(document.querySelectorAll(vn))},$x:function(vn){return(0,At.default)(vn)},clear:function(){hn.clear()},dir:function(vn){hn.dir(vn)},table:function(vn,Pn){hn.table(vn,Pn)},keys:Je.default},hn.bindEvent(),hn}return he(Xt,an),Xt.prototype.setGlobal=function(Rt,en){this.global[Rt]=en},Xt.prototype.destroy=function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),an.prototype.destroy.call(this)},Xt.prototype.count=function(Rt){Rt===void 0&&(Rt="default");var en=this.counter;(0,ce.default)(en[Rt])?en[Rt]=1:en[Rt]++,this.info("".concat(Rt,": ").concat(en[Rt]))},Xt.prototype.countReset=function(Rt){Rt===void 0&&(Rt="default"),this.counter[Rt]=0},Xt.prototype.assert=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];if(!(0,$e.default)(Rt)){var hn=Rt.shift();hn||(Rt.length===0&&Rt.unshift("console.assert"),Rt.unshift("Assertion failed: "),this.insert("error",Rt))}},Xt.prototype.log=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,$e.default)(Rt)||this.insert("log",Rt)},Xt.prototype.debug=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,$e.default)(Rt)||this.insert("debug",Rt)},Xt.prototype.dir=function(Rt){(0,ce.default)(Rt)||this.insert("dir",[Rt])},Xt.prototype.table=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,$e.default)(Rt)||this.insert("table",Rt)},Xt.prototype.time=function(Rt){if(Rt===void 0&&(Rt="default"),this.timer[Rt])return this.insert("warn",["Timer '".concat(Rt,"' already exists")]);this.timer[Rt]=(0,ye.default)()},Xt.prototype.timeLog=function(Rt){Rt===void 0&&(Rt="default");var en=this.timer[Rt];if(!en)return this.insert("warn",["Timer '".concat(Rt,"' does not exist")]);this.info("".concat(Rt,": ").concat((0,ye.default)()-en,"ms"))},Xt.prototype.timeEnd=function(Rt){Rt===void 0&&(Rt="default"),this.timeLog(Rt),delete this.timer[Rt]},Xt.prototype.clear=function(Rt){Rt===void 0&&(Rt=!1),this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new Ue.default,this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),Rt?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])},Xt.prototype.info=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,$e.default)(Rt)||this.insert("log",Rt)},Xt.prototype.error=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,$e.default)(Rt)||this.insert("error",Rt)},Xt.prototype.warn=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];(0,$e.default)(Rt)||this.insert("warn",Rt)},Xt.prototype.group=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];this.insert({type:"group",args:Rt,ignoreFilter:!0})},Xt.prototype.groupCollapsed=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];this.insert({type:"groupCollapsed",args:Rt,ignoreFilter:!0})},Xt.prototype.groupEnd=function(){this.insert("groupEnd")},Xt.prototype.evaluate=function(Rt){this.insert({type:"input",args:[Rt],ignoreFilter:!0});try{this.output(this.evalJs(Rt))}catch(en){this.insert({type:"error",ignoreFilter:!0,args:[en]})}},Xt.prototype.html=function(){for(var Rt=[],en=0;en<arguments.length;en++)Rt[en]=arguments[en];this.insert("html",Rt)},Xt.prototype.toggleGroup=function(Rt){Rt.targetGroup.collapsed?this.openGroup(Rt):this.collapseGroup(Rt)},Xt.prototype.output=function(Rt){this.insert({type:"output",args:[Rt],ignoreFilter:!0})},Xt.prototype.render=function(){var Rt=this.logs,en=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var hn=0,vn=Rt.length;hn<vn;hn++)this.attachLog(Rt[hn]);en&&((0,Fe.default)(this.displayLogs,en)||this.selectLog(null))},Xt.prototype.insert=function(Rt,en){var hn,vn=this.options,Pn=vn.showHeader,Pt=vn.asyncRender;if(Pn&&(hn={time:Mn(),from:on()}),Pt)return this.insertAsync(Rt,en,hn);this.insertSync(Rt,en,hn)},Xt.prototype.insertAsync=function(Rt,en,hn){this.asyncList.push([Rt,en,hn]),this.handleAsyncList()},Xt.prototype.insertSync=function(Rt,en,hn){var vn,Pn=this,Pt=this.logs,Dt=this.groupStack,rn=this.options,bn=rn.maxNum,En=rn.accessGetter,zn=rn.unenumerable,$n=rn.lazyEvaluation;if((vn=(0,Ee.default)(Rt)?{type:Rt,args:en,header:hn}:Rt).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(Dt.size>0&&(vn.group=Dt.peek()),(0,Ce.default)(vn,{id:++st,accessGetter:En,unenumerable:zn,lazyEvaluation:$n}),vn.type==="group"||vn.type==="groupCollapsed"){var xn={id:(0,Se.default)("group"),collapsed:!1,parent:Dt.peek(),indentLevel:Dt.size+1};vn.type==="groupCollapsed"&&(xn.collapsed=!0),vn.targetGroup=xn,Dt.push(xn)}var wn=new be.default(this,vn);wn.on("updateHeight",function(){Pn.isAtBottom=!1,Pn.renderViewport()});var Sn=this.lastLog;if(Sn&&!(0,Fe.default)(["html","group","groupCollapsed"],wn.type)&&Sn.type===wn.type&&wn.isSimple()&&Sn.text()===wn.text()?(Sn.addCount(),wn.header&&Sn.updateTime(wn.header.time),wn=Sn,this.detachLog(Sn)):(Pt.push(wn),this.lastLog=wn),bn!==0&&Pt.length>bn){var Jn=Pt[0];this.detachLog(Jn),Pt.shift()}this.attachLog(wn),this.emit("insert",wn)},Xt.prototype.updateTopSpace=function(Rt){this.topSpaceHeight=Rt,this.el.style.top=Rt+"px"},Xt.prototype.updateBottomSpace=function(Rt){this.bottomSpaceHeight=Rt},Xt.prototype.updateSpace=function(Rt){this.spaceHeight!==Rt&&(this.spaceHeight=Rt,this.space.style.height=Rt+"px")},Xt.prototype.detachLog=function(Rt){var en=this.displayLogs,hn=en.indexOf(Rt);hn>-1&&(en.splice(hn,1),this.renderViewport())},Xt.prototype.attachLog=function(Rt){if(this.filterLog(Rt)&&!Rt.collapsed){var en=this.displayLogs;if(en.length===0)return en.push(Rt),void this.renderViewport();var hn=(0,pt.default)(en);if(Rt.id>hn.id)return en.push(Rt),void this.renderViewport();for(var vn,Pn=0,Pt=en.length-1,Dt=0;Pn<=Pt;){if((vn=en[Dt=Pn+Math.floor((Pt-Pn)/2)]).id===Rt.id)return;vn.id<Rt.id?Pn=Dt+1:Pt=Dt-1}vn.id<Rt.id?en.splice(Dt+1,0,Rt):en.splice(Dt,0,Rt),this.renderViewport()}},Xt.prototype.handleAsyncList=function(Rt){var en=this;Rt===void 0&&(Rt=20);var hn=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){en.asyncTimer=null;var vn,Pn,Pt=!1,Dt=hn.length;Dt<1e3?(Pn=200,vn=400):Dt<5e3?(Pn=500,vn=800):Dt<1e4?(Pn=800,vn=1e3):Dt<25e3?(Pn=1e3,vn=1200):Dt<5e4?(Pn=1500,vn=1500):(Pn=2e3,vn=2500),Pn>Dt&&(Pn=Dt,Pt=!0);for(var rn=0;rn<Pn;rn++){var bn=Te(hn.shift(),3),En=bn[0],zn=bn[1],$n=bn[2];en.insertSync(En,zn,$n)}Pt||xt(function(){return en.handleAsyncList(vn)})},Rt))},Xt.prototype.injectGlobal=function(){(0,Ye.default)(this.global,function(Rt,en){window[en]||(window[en]=Rt)})},Xt.prototype.clearGlobal=function(){(0,Ye.default)(this.global,function(Rt,en){window[en]&&window[en]===Rt&&delete window[en]})},Xt.prototype.evalJs=function(Rt){var en;this.injectGlobal();try{en=eval.call(window,"(".concat(Rt,")"))}catch{en=eval.call(window,Rt)}return this.setGlobal("$_",en),this.clearGlobal(),en},Xt.prototype.filterLog=function(Rt){var en=this.options.filter;return en==="all"||!!Rt.ignoreFilter||((0,De.default)(en)?en(Rt):(0,Oe.default)(en)?en.test((0,bt.default)(Rt.text())):Rt.type===en)},Xt.prototype.collapseGroup=function(Rt){Rt.targetGroup.collapsed=!0,Rt.updateIcon("caret-right"),this.updateGroup(Rt)},Xt.prototype.openGroup=function(Rt){Rt.targetGroup.collapsed=!1,Rt.updateIcon("caret-down"),this.updateGroup(Rt)},Xt.prototype.updateGroup=function(Rt){for(var en=Rt.targetGroup,hn=this.logs,vn=hn.length,Pn=hn.indexOf(Rt)+1;Pn<vn;){var Pt=hn[Pn];if(!Pt.checkGroup()&&Pt.group===en)break;Pt.collapsed?this.detachLog(Pt):this.attachLog(Pt),Pn++}},Xt.prototype.selectLog=function(Rt){var en;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),(0,lt.default)(Rt)?this.emit("deselect"):(this.selectedLog=Rt,(en=this.selectedLog)===null||en===void 0||en.select(),this.emit("select",Rt))},Xt.prototype.bindEvent=function(){var Rt=this,en=this.$el,hn=this.c;this.resizeSensor.addListener(this.renderViewport);var vn=this;en.on("click",hn(".log-container"),function(){vn.selectLog(this.log)}),this.on("optionChange",function(Pn,Pt){var Dt=Rt.logs;switch(Pn){case"maxNum":Pt>0&&Dt.length>Pt&&(Rt.logs=Dt.slice(Dt.length-Pt),Rt.render());break;case"filter":Rt.render()}}),this.$container.on("scroll",this.onScroll)},Xt.prototype._renderViewport=function(Rt){var en=Rt===void 0?{}:Rt,hn=en.topTolerance,vn=hn===void 0?500:hn,Pn=en.bottomTolerance,Pt=Pn===void 0?500:Pn,Dt=this.el,rn=this.container;if(!(0,nt.default)(rn)){for(var bn=rn,En=bn.scrollTop,zn=bn.offsetHeight,$n=rn.getBoundingClientRect().width,xn=En-vn,wn=En+zn+Pt,Sn=this.displayLogs,Jn=0,nr=0,fr=0,Yn=Sn.length,qn=this.fakeEl,un=document.createDocumentFragment(),yn=[],Rn=0;Rn<Yn;Rn++){var Kn=(Lr=Sn[Rn]).width;(Br=Lr.height)!==0&&Kn===$n||(un.appendChild(Lr.container),yn.push(Lr))}if(yn.length>0){qn.appendChild(un),Rn=0;for(var mr=yn.length;Rn<mr;Rn++)yn[Rn].updateSize();qn.innerHTML=""}var Cr=document.createDocumentFragment();for(Rn=0;Rn<Yn;Rn++){var Lr,br=(Lr=Sn[Rn]).container,Br=Lr.height;fr>wn?nr+=Br:fr+Br>xn?Cr.appendChild(br):fr<xn&&(Jn+=Br),fr+=Br}for(this.updateSpace(fr),this.updateTopSpace(Jn),this.updateBottomSpace(nr);Dt.firstChild;)Dt.lastChild&&Dt.removeChild(Dt.lastChild);Dt.appendChild(Cr);var Fr=rn.scrollHeight;this.isAtBottom&&En<=Fr-zn&&(rn.scrollTop=1e7)}},Xt.prototype.initTpl=function(){this.$container.html(this.c((0,it.default)(ln||(ln=ne([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `],[`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))},Xt}(ft.default);Q.default=$t,q.exports=$t,q.exports.default=$t;var ln,Mn=function(){return(0,rt.default)("HH:MM:ss ")};function on(){for(var an=new Error,Xt="",Rt=an.stack?an.stack.split(`
`):"",en=0,hn=Rt.length;en<hn;en++)if((Xt=Rt[en]).indexOf("winConsole")>-1&&en<hn-1){Xt=Rt[en+1];break}return Xt}},1893:function(q,Q,V){var de=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getObjType=void 0;var he=de(V(3023));Q.getObjType=function(ne){return ne.constructor&&ne.constructor.name?ne.constructor.name:(0,he.default)({}.toString.call(ne).replace(/(\[object )|]/g,""))}},1018:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Se,Oe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,Ue){De.__proto__=Ue}||function(De,Ue){for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&(De[$e]=Ue[$e])},de(Se,Oe)},function(Se,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function De(){this.constructor=Se}de(Se,Oe),Se.prototype=Oe===null?Object.create(Oe):(De.prototype=Oe.prototype,new De)}),ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(1512)),be=V(2375),ce=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Ee=ne(V(5852)),Ce=function(Se){function Oe(De,Ue,$e){var Fe=Ue.compName,Xe=($e===void 0?{}:$e).theme,Ye=Xe===void 0?"light":Xe,He=Se.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,be.classPrefix)(Fe),He.options={},He.container=De,He.$container=(0,j.default)(De),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,be.getPlatform)()))]),He.on("optionChange",function(Je,pt,It){var At=He.c;Je==="theme"&&(He.$container.rmClass(At("theme-".concat(It))).addClass(At("theme-".concat(pt))),(0,ce.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ye),He}return he(Oe,Se),Oe.prototype.destroy=function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat((0,be.getPlatform)()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(De,Ue){var $e=this,Fe=this.options,Xe={};typeof De=="string"?Xe[De]=Ue:Xe=De,(0,ce.default)(Xe,function(Ye,He){var Je=Fe[He];Fe[He]=Ye,$e.emit("optionChange",He,Ye,Je)})},Oe.prototype.getOption=function(De){return this.options[De]},Oe.prototype.addSubComponent=function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)},Oe.prototype.removeSubComponent=function(De){(0,Ee.default)(this.subComponents,function(Ue){return Ue===De})},Oe.prototype.destroySubComponents=function(){(0,ce.default)(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(De,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(De,Ue),(0,ye.default)(this.options,De)},Oe.prototype.find=function(De){return this.$container.find(this.c(De))},Oe}(Te.default);Q.default=Ce},2375:function(q,Q,V){var de=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var he=de(V(2461)),ne=de(V(4331)),Te=de(V(5610)),j=de(V(7483)),be=de(V(3990)),ce=de(V(6341)),ye=de(V(3875)),xe=de(V(6954)),Ee=de(V(9585));function Ce($e,Fe){for(var Xe=0,Ye=$e.length;Xe<Ye;Xe++){var He=$e[Xe];Fe(He),He.content&&Ce(He.content,Fe)}}Q.classPrefix=function($e){var Fe="luna-".concat($e,"-");function Xe(Ye){return(0,he.default)((0,ne.default)(Ye).split(/\s+/),function(He){return(0,ce.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Je){return"".concat(Fe).concat(Je)})}).join(" ")}return function(Ye){if(/<[^>]*>/g.test(Ye))try{var He=j.default.parse(Ye);return Ce(He,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Xe(Je.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ye)}return Xe(Ye)}};var Se,Oe="ontouchstart"in Te.default,De={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function($e){return Oe?De[$e]:Ue[$e]},Q.eventClient=function($e,Fe){var Xe=$e==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function($e,Fe){var Xe=$e==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,be.default)(Se))return Se;if(!document)return 16;var $e=document.createElement("div"),Fe=document.createElement("div");return $e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),$e.appendChild(Fe),document.body.appendChild($e),Se=$e.offsetWidth-$e.clientWidth,document.body.removeChild($e),Se},Q.hasVerticalScrollbar=function($e){return $e.scrollHeight>$e.offsetHeight},Q.executeAfterTransition=function($e,Fe){if((0,Ee.default)($e))return Fe();var Xe=function(Ye){Ye.target===$e&&($e.removeEventListener("transitionend",Xe),Fe())};$e.addEventListener("transitionend",Xe)},Q.pxToNum=function($e){return(0,ye.default)($e.replace("px",""))},Q.getPlatform=function(){var $e=(0,xe.default)();return $e==="os x"?"mac":$e},Q.resetCanvasSize=function($e){$e.width=Math.round($e.offsetWidth*window.devicePixelRatio),$e.height=Math.round($e.offsetHeight*window.devicePixelRatio)}},3467:function(q,Q,V){var de,he=this&&this.__extends||(de=function(pt,It){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(At,bt){At.__proto__=bt}||function(At,bt){for(var rt in bt)Object.prototype.hasOwnProperty.call(bt,rt)&&(At[rt]=bt[rt])},de(pt,It)},function(pt,It){if(typeof It!="function"&&It!==null)throw new TypeError("Class extends value "+String(It)+" is not a constructor or null");function At(){this.constructor=pt}de(pt,It),pt.prototype=It===null?Object.create(It):(At.prototype=It.prototype,new At)}),ne=this&&this.__makeTemplateObject||function(pt,It){return Object.defineProperty?Object.defineProperty(pt,"raw",{value:It}):pt.raw=It,pt},Te=this&&this.__importDefault||function(pt){return pt&&pt.__esModule?pt:{default:pt}};Object.defineProperty(Q,"__esModule",{value:!0});var j=Te(V(1512)),be=Te(V(1907)),ce=Te(V(6959)),ye=Te(V(3783)),xe=Te(V(8901)),Ee=Te(V(8613)),Ce=Te(V(3367)),Se=Te(V(9833)),Oe=Te(V(1286)),De=Te(V(242)),Ue=Te(V(2439)),$e=Te(V(4193)),Fe=Te(V(6930)),Xe=function(pt){function It(At,bt){var rt=pt.call(this,At,{compName:"data-grid"},bt)||this;rt.nodes=[],rt.columnWidthsInitialized=!1,rt.columnMap={},rt.isAscending=!0,rt.resizeSensor=new De.default(At),rt.onResize=(0,Ue.default)(function(){rt.updateHeight(),rt.updateWeights()},16),bt.height&&(bt.maxHeight=bt.height,bt.minHeight=bt.height),rt.initOptions(bt,{minHeight:41,maxHeight:1/0});var nt=rt.options,it=nt.columns,dt=nt.minHeight,lt=nt.maxHeight;return(0,ye.default)(it,function(ft){(0,$e.default)(ft,{sortable:!1}),rt.columnMap[ft.id]=ft}),lt<dt&&rt.setOption("maxHeight",dt),rt.initTpl(),rt.$headerRow=rt.find(".header").find("tr"),rt.$fillerRow=rt.find(".filler-row"),rt.fillerRow=rt.$fillerRow.get(0),rt.$tableBody=rt.find(".data").find("tbody"),rt.tableBody=rt.$tableBody.get(0),rt.$colgroup=rt.$container.find("colgroup"),rt.$dataContainer=rt.find(".data-container"),rt.renderHeader(),rt.updateWeights(),rt.updateHeight(),rt.bindEvent(),rt}return he(It,pt),It.prototype.destroy=function(){pt.prototype.destroy.call(this),this.resizeSensor.destroy()},It.prototype.append=function(At){var bt=new He(this,At);return this.nodes.push(bt),this.sortId?this.sortNodes(this.sortId,this.isAscending):(this.tableBody.insertBefore(bt.container,this.fillerRow),this.updateHeight()),bt},It.prototype.clear=function(){(0,ye.default)(this.nodes,function(At){return At.detach()}),this.nodes=[],this.updateHeight()},It.prototype.updateHeight=function(){var At=this.$fillerRow,bt=this.options,rt=bt.maxHeight,nt=bt.minHeight;this.$dataContainer.css({height:"auto"}),(nt-=21)<0&&(nt=0),rt-=21;var it=20*this.nodes.length;it>nt?At.hide():At.show(),it<nt?it=nt:it>=rt&&(it=rt),this.$dataContainer.css({height:it})},It.prototype.bindEvent=function(){var At=this,bt=this.c,rt=this.$headerRow;this.resizeSensor.addListener(this.onResize);var nt=this;rt.on("click",bt(".sortable"),function(it){it.stopPropagation();var dt=(0,j.default)(this),lt=dt.data("id"),ft=dt.data("order")!=="descending";dt.data("order",ft?"descending":"ascending"),nt.sortNodes(lt,ft),rt.find("th").each(function(){var xt=(0,j.default)(this);xt.data("id")!==lt&&xt.rmAttr("data-order")})}),this.on("optionChange",function(it){switch(it){case"minHeight":case"maxHeight":At.updateHeight()}})},It.prototype.sortNodes=function(At,bt){var rt=this.columnMap[At].comparator||Je;this.nodes.sort(function(nt,it){var dt=nt.data[At],lt=it.data[At];return(0,Se.default)(dt)&&(dt=dt.innerText),(0,Se.default)(lt)&&(lt=lt.innerText),bt?rt(dt,lt):rt(lt,dt)}),this.renderData(),this.sortId=At,this.isAscending=bt},It.prototype.updateWeights=function(){var At=this.container,bt=this.$headerRow,rt=this.options.columns,nt=At.offsetWidth;if(!this.columnWidthsInitialized&&nt){for(var it=0,dt=rt.length;it<dt;it++){var lt=rt[it];if(!lt.weight){var ft=bt.find("th").get(it).offsetWidth;lt.weight=100*ft/nt}}this.columnWidthsInitialized=!0}this.applyColumnWeights()},It.prototype.applyColumnWeights=function(){var At=this.container,bt=this.$colgroup,rt=this.options.columns,nt=At.offsetWidth;if(!(nt<=0)){for(var it=0,dt=rt.length,lt=0;lt<dt;lt++)it+=rt[lt].weight;var ft="",xt=0,ht=0;for(lt=0;lt<dt;lt++){var Vt=(xt+=rt[lt].weight)*nt/it|0,st=Math.max(Vt-ht,14);ht=Vt,ft+='<col style="width:'.concat(st,'px"></col>')}bt.html(ft)}},It.prototype.renderData=function(){var At=this,bt=At.tableBody,rt=At.nodes,nt=At.fillerRow;(0,ye.default)(rt,function(it){return it.detach()}),(0,ye.default)(rt,function(it){bt.insertBefore(it.container,nt)}),this.updateHeight()},It.prototype.renderHeader=function(){var At=this.c,bt="",rt="";(0,ye.default)(this.options.columns,function(nt){var it=(0,xe.default)(nt.title);nt.sortable?bt+=At('<th class="sortable" data-id="'.concat(nt.id,'">').concat(it,"</th>")):bt+="<th>".concat(it,"</th>"),rt+="<td></td>"}),this.$headerRow.html(bt),this.$fillerRow.html(rt)},It.prototype.initTpl=function(){this.$container.html(this.c((0,be.default)(Ye||(Ye=ne([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `],[`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))},It}(ce.default);Q.default=Xe;var Ye,He=function(){function pt(It,At){this.container=(0,Ee.default)("tr"),this.$container=(0,j.default)(this.container),this.dataGrid=It,this.data=At,this.render()}return pt.prototype.detach=function(){this.$container.remove()},pt.prototype.render=function(){var It=this,At=It.data,bt=It.$container,rt=It.container,nt=this.dataGrid.getOption("columns");bt.html(""),(0,ye.default)(nt,function(it){var dt=(0,Ee.default)("td"),lt=At[it.id];(0,Oe.default)(lt)||((0,Se.default)(lt)?dt.appendChild(lt):dt.innerText=(0,Ce.default)(lt)),rt.appendChild(dt)})},pt}();function Je(pt,It){if(pt=(0,Ce.default)(pt),It=(0,Ce.default)(It),(0,Fe.default)(pt,"_")&&!(0,Fe.default)(It,"_"))return 1;if((0,Fe.default)(It,"_")&&!(0,Fe.default)(pt,"_"))return-1;for(var At,bt,rt,nt,it=/^\d+|^\D+/;;){if(!pt)return It?-1:0;if(!It)return 1;if(At=pt.match(it)[0],bt=It.match(it)[0],rt=!isNaN(At),nt=!isNaN(bt),rt&&!nt)return-1;if(nt&&!rt)return 1;if(rt&&nt){var dt=At-bt;if(dt)return dt;if(At.length!==bt.length)return+At||+bt?bt.length-At.length:At.length-bt.length}else if(At!==bt)return At<bt?-1:1;pt=pt.substring(At.length),It=It.substring(bt.length)}}q.exports=Xe,q.exports.default=Xe},6959:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Se,Oe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,Ue){De.__proto__=Ue}||function(De,Ue){for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&(De[$e]=Ue[$e])},de(Se,Oe)},function(Se,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function De(){this.constructor=Se}de(Se,Oe),Se.prototype=Oe===null?Object.create(Oe):(De.prototype=Oe.prototype,new De)}),ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(1512)),be=V(3692),ce=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Ee=ne(V(5852)),Ce=function(Se){function Oe(De,Ue,$e){var Fe=Ue.compName,Xe=($e===void 0?{}:$e).theme,Ye=Xe===void 0?"light":Xe,He=Se.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,be.classPrefix)(Fe),He.options={},He.container=De,He.$container=(0,j.default)(De),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,be.getPlatform)()))]),He.on("optionChange",function(Je,pt,It){var At=He.c;Je==="theme"&&(He.$container.rmClass(At("theme-".concat(It))).addClass(At("theme-".concat(pt))),(0,ce.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ye),He}return he(Oe,Se),Oe.prototype.destroy=function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat((0,be.getPlatform)()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(De,Ue){var $e=this,Fe=this.options,Xe={};typeof De=="string"?Xe[De]=Ue:Xe=De,(0,ce.default)(Xe,function(Ye,He){var Je=Fe[He];Fe[He]=Ye,$e.emit("optionChange",He,Ye,Je)})},Oe.prototype.getOption=function(De){return this.options[De]},Oe.prototype.addSubComponent=function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)},Oe.prototype.removeSubComponent=function(De){(0,Ee.default)(this.subComponents,function(Ue){return Ue===De})},Oe.prototype.destroySubComponents=function(){(0,ce.default)(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(De,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(De,Ue),(0,ye.default)(this.options,De)},Oe.prototype.find=function(De){return this.$container.find(this.c(De))},Oe}(Te.default);Q.default=Ce},3692:function(q,Q,V){var de=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var he=de(V(2461)),ne=de(V(4331)),Te=de(V(5610)),j=de(V(7483)),be=de(V(3990)),ce=de(V(6341)),ye=de(V(3875)),xe=de(V(6954)),Ee=de(V(9585));function Ce($e,Fe){for(var Xe=0,Ye=$e.length;Xe<Ye;Xe++){var He=$e[Xe];Fe(He),He.content&&Ce(He.content,Fe)}}Q.classPrefix=function($e){var Fe="luna-".concat($e,"-");function Xe(Ye){return(0,he.default)((0,ne.default)(Ye).split(/\s+/),function(He){return(0,ce.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Je){return"".concat(Fe).concat(Je)})}).join(" ")}return function(Ye){if(/<[^>]*>/g.test(Ye))try{var He=j.default.parse(Ye);return Ce(He,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Xe(Je.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ye)}return Xe(Ye)}};var Se,Oe="ontouchstart"in Te.default,De={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function($e){return Oe?De[$e]:Ue[$e]},Q.eventClient=function($e,Fe){var Xe=$e==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function($e,Fe){var Xe=$e==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,be.default)(Se))return Se;if(!document)return 16;var $e=document.createElement("div"),Fe=document.createElement("div");return $e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),$e.appendChild(Fe),document.body.appendChild($e),Se=$e.offsetWidth-$e.clientWidth,document.body.removeChild($e),Se},Q.hasVerticalScrollbar=function($e){return $e.scrollHeight>$e.offsetHeight},Q.executeAfterTransition=function($e,Fe){if((0,Ee.default)($e))return Fe();var Xe=function(Ye){Ye.target===$e&&($e.removeEventListener("transitionend",Xe),Fe())};$e.addEventListener("transitionend",Xe)},Q.pxToNum=function($e){return(0,ye.default)($e.replace("px",""))},Q.getPlatform=function(){var $e=(0,xe.default)();return $e==="os x"?"mac":$e},Q.resetCanvasSize=function($e){$e.width=Math.round($e.offsetWidth*window.devicePixelRatio),$e.height=Math.round($e.offsetHeight*window.devicePixelRatio)}},3577:function(q,Q){Object.defineProperty(Q,"__esModule",{value:!0}),Q.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(q,Q,V){var de,he=this&&this.__extends||(de=function(nt,it){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,lt){dt.__proto__=lt}||function(dt,lt){for(var ft in lt)Object.prototype.hasOwnProperty.call(lt,ft)&&(dt[ft]=lt[ft])},de(nt,it)},function(nt,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function dt(){this.constructor=nt}de(nt,it),nt.prototype=it===null?Object.create(it):(dt.prototype=it.prototype,new dt)}),ne=this&&this.__assign||function(){return ne=Object.assign||function(nt){for(var it,dt=1,lt=arguments.length;dt<lt;dt++)for(var ft in it=arguments[dt])Object.prototype.hasOwnProperty.call(it,ft)&&(nt[ft]=it[ft]);return nt},ne.apply(this,arguments)},Te=this&&this.__values||function(nt){var it=typeof Symbol=="function"&&Symbol.iterator,dt=it&&nt[it],lt=0;if(dt)return dt.call(nt);if(nt&&typeof nt.length=="number")return{next:function(){return nt&&lt>=nt.length&&(nt=void 0),{value:nt&&nt[lt++],done:!nt}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")},j=this&&this.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(Q,"__esModule",{value:!0});var be=j(V(1160)),ce=V(7669),ye=V(2062),xe=j(V(242)),Ee=j(V(2439)),Ce=j(V(3063)),Se=j(V(3783)),Oe=j(V(3009)),De=j(V(5044)),Ue=j(V(4502)),$e=j(V(6329)),Fe=j(V(7494)),Xe=j(V(6341)),Ye=j(V(3875)),He=j(V(3577)),Je=j(V(6768)),pt=function(nt){function it(dt,lt){lt===void 0&&(lt={});var ft=nt.call(this,dt,{compName:"dom-highlighter"},lt)||this;return ft.overlay=new ce.HighlightOverlay(window),ft.reset=function(){var xt=document.documentElement.clientWidth,ht=document.documentElement.clientHeight;ft.overlay.reset({viewportSize:{width:xt,height:ht},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},ft.initOptions(lt,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),ft.overlay.setContainer(dt),ft.overlay.setPlatform("mac"),ft.redraw=(0,Ee.default)(function(){ft.reset(),ft.draw()},16),ft.redraw(),ft.bindEvent(),ft}return he(it,nt),it.prototype.highlight=function(dt,lt){lt&&(0,$e.default)(this.options,lt),this.target=dt,dt instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new xe.default(dt),this.resizeSensor.addListener(this.redraw)),this.redraw()},it.prototype.hide=function(){this.target=null,this.redraw()},it.prototype.intercept=function(dt){this.interceptor=dt},it.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),nt.prototype.destroy.call(this)},it.prototype.draw=function(){var dt=this.target;dt&&(dt instanceof Text?this.drawText(dt):this.drawElement(dt))},it.prototype.drawText=function(dt){var lt=this.options,ft=document.createRange();ft.selectNode(dt);var xt=ft.getBoundingClientRect(),ht=xt.left,Vt=xt.top,st=xt.width,$t=xt.height;ft.detach();var ln={paths:[{path:this.rectToPath({left:ht,top:Vt,width:st,height:$t}),fillColor:bt(lt.contentColor),name:"content"}],showExtensionLines:lt.showExtensionLines,showRulers:lt.showRulers};lt.showInfo&&(ln.elementInfo={tagName:"#text",nodeWidth:st,nodeHeight:$t}),this.overlay.drawHighlight(ln)},it.prototype.drawElement=function(dt){var lt={paths:this.getPaths(dt),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(lt.elementInfo=this.getElementInfo(dt)),this.interceptor){var ft=this.interceptor(lt);ft&&(lt=ft)}this.overlay.drawHighlight(lt)},it.prototype.getPaths=function(dt){var lt=this.options,ft=window.getComputedStyle(dt),xt=dt.getBoundingClientRect(),ht=xt.left,Vt=xt.top,st=xt.width,$t=xt.height,ln=function(bn){return(0,ye.pxToNum)(ft.getPropertyValue(bn))},Mn=ln("margin-left"),on=ln("margin-right"),an=ln("margin-top"),Xt=ln("margin-bottom"),Rt=ln("border-left-width"),en=ln("border-right-width"),hn=ln("border-top-width"),vn=ln("border-bottom-width"),Pn=ln("padding-left"),Pt=ln("padding-right"),Dt=ln("padding-top"),rn=ln("padding-bottom");return[{path:this.rectToPath({left:ht+Rt+Pn,top:Vt+hn+Dt,width:st-Rt-Pn-en-Pt,height:$t-hn-Dt-vn-rn}),fillColor:bt(lt.contentColor),name:"content"},{path:this.rectToPath({left:ht+Rt,top:Vt+hn,width:st-Rt-en,height:$t-hn-vn}),fillColor:bt(lt.paddingColor),name:"padding"},{path:this.rectToPath({left:ht,top:Vt,width:st,height:$t}),fillColor:bt(lt.borderColor),name:"border"},{path:this.rectToPath({left:ht-Mn,top:Vt-an,width:st+Mn+on,height:$t+an+Xt}),fillColor:bt(lt.marginColor),name:"margin"}]},it.prototype.getElementInfo=function(dt){var lt=dt.getBoundingClientRect(),ft=lt.width,xt=lt.height,ht=dt.getAttribute("class")||"";ht=ht.split(/\s+/).map(function(st){return"."+st}).join("");var Vt={tagName:(0,Ce.default)(dt.tagName),className:ht,idValue:dt.id,nodeWidth:ft,nodeHeight:xt};return this.options.showStyles&&(Vt.style=this.getStyles(dt)),this.options.showAccessibilityInfo&&(0,$e.default)(Vt,this.getAccessibilityInfo(dt)),Vt},it.prototype.getStyles=function(dt){for(var lt=window.getComputedStyle(dt),ft=!1,xt=dt.childNodes,ht=0,Vt=xt.length;ht<Vt;ht++)xt[ht].nodeType===3&&(ft=!0);var st=[];return ft&&st.push("color","font-family","font-size","line-height"),st.push("padding","margin","background-color"),rt(lt,st)},it.prototype.getAccessibilityInfo=function(dt){var lt=window.getComputedStyle(dt);return ne({showAccessibilityInfo:!0,contrast:ne({contrastAlgorithm:"aa",textOpacity:.1},rt(lt,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(dt)},this.getAccessibleNameAndRole(dt))},it.prototype.isFocusable=function(dt){var lt=(0,Ce.default)(dt.tagName);if((0,Xe.default)(["a","button","input","textarea","select","details"],lt))return!0;var ft=dt.getAttribute("tabindex");return!!(ft&&(0,Ye.default)(ft)>-1)},it.prototype.getAccessibleNameAndRole=function(dt){var lt=dt.getAttribute("labelledby")||dt.getAttribute("aria-label"),ft=dt.getAttribute("role"),xt=(0,Ce.default)(dt.tagName);return He.default.forEach(function(ht){var Vt,st;if(!ft){var $t=ht[0],ln=ht[2];if($t===xt){if(ln)try{for(var Mn=Te(ln),on=Mn.next();!on.done;on=Mn.next()){var an=on.value;if(dt.getAttribute(an[0])!==an[1])return}}catch(Xt){Vt={error:Xt}}finally{try{on&&!on.done&&(st=Mn.return)&&st.call(Mn)}finally{if(Vt)throw Vt.error}}ft=ht[1]}}}),{accessibleName:lt||dt.getAttribute("title")||"",accessibleRole:ft||"generic"}},it.prototype.bindEvent=function(){var dt=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return dt.redraw()})},it.prototype.rectToPath=function(dt){var lt=dt.left,ft=dt.top,xt=dt.width,ht=dt.height,Vt=[];return Vt.push("M",lt,ft),Vt.push("L",lt+xt,ft),Vt.push("L",lt+xt,ft+ht),Vt.push("L",lt,ft+ht),Vt.push("Z"),Vt},it}(be.default);Q.default=pt,q.exports=pt,q.exports.default=pt;var It=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,At=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function bt(nt){return(0,Je.default)(nt)?nt:nt.a?"rgba(".concat(nt.r,", ").concat(nt.g,", ").concat(nt.b,", ").concat(nt.a,")"):"rgb(".concat(nt.r,", ").concat(nt.g,", ").concat(nt.b,")")}function rt(nt,it,dt){dt===void 0&&(dt=!1);var lt={};return(0,Se.default)(it,function(ft){var xt,ht=nt[ft==="text-opacity"?"color":ft];ht&&(xt=ht,(It.test(xt)||At.test(xt))&&(ht=function(Vt){var st=Oe.default.parse(Vt),$t=st.val[3]||1;return st.val=st.val.slice(0,3),st.val.push(Math.round(255*$t)),"#"+(0,Ue.default)(De.default.encode(st.val))}(ht),ft==="text-opacity"&&(ht=ht.slice(7),ht=De.default.decode(ht)[0]/255)),dt&&(ft=(0,Fe.default)(ft)),lt[ft]=ht)}),lt}},9706:function(q,Q){var V=this&&this.__read||function(Oe,De){var Ue=typeof Symbol=="function"&&Oe[Symbol.iterator];if(!Ue)return Oe;var $e,Fe,Xe=Ue.call(Oe),Ye=[];try{for(;(De===void 0||De-- >0)&&!($e=Xe.next()).done;)Ye.push($e.value)}catch(He){Fe={error:He}}finally{try{$e&&!$e.done&&(Ue=Xe.return)&&Ue.call(Xe)}finally{if(Fe)throw Fe.error}}return Ye},de=this&&this.__values||function(Oe){var De=typeof Symbol=="function"&&Symbol.iterator,Ue=De&&Oe[De],$e=0;if(Ue)return Ue.call(Oe);if(Oe&&typeof Oe.length=="number")return{next:function(){return Oe&&$e>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[$e++],done:!Oe}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")};function he(Oe,De){var Ue=Oe[3];return[(1-Ue)*De[0]+Ue*Oe[0],(1-Ue)*De[1]+Ue*Oe[1],(1-Ue)*De[2]+Ue*Oe[2],Ue+De[3]*(1-Ue)]}function ne(Oe){var De=V(Oe,3),Ue=De[0],$e=De[1],Fe=De[2];return .2126*(Ue<=.03928?Ue/12.92:Math.pow((Ue+.055)/1.055,2.4))+.7152*($e<=.03928?$e/12.92:Math.pow(($e+.055)/1.055,2.4))+.0722*(Fe<=.03928?Fe/12.92:Math.pow((Fe+.055)/1.055,2.4))}Object.defineProperty(Q,"__esModule",{value:!0}),Q.getContrastThreshold=Q.isLargeFont=Q.getAPCAThreshold=Q.desiredLuminanceAPCA=Q.contrastRatioByLuminanceAPCA=Q.contrastRatioAPCA=Q.luminanceAPCA=Q.contrastRatio=Q.luminance=Q.rgbaToHsla=Q.blendColors=void 0,Q.blendColors=he,Q.rgbaToHsla=function(Oe){var De=V(Oe,4),Ue=De[0],$e=De[1],Fe=De[2],Xe=De[3],Ye=Math.max(Ue,$e,Fe),He=Math.min(Ue,$e,Fe),Je=Ye-He,pt=Ye+He,It=.5*pt;return[He===Ye?0:Ue===Ye?(.16666666666666666*($e-Fe)/Je+1)%1:$e===Ye?.16666666666666666*(Fe-Ue)/Je+.3333333333333333:.16666666666666666*(Ue-$e)/Je+.6666666666666666,It===0||It===1?0:It<=.5?Je/pt:Je/(2-pt),It,Xe]},Q.luminance=ne,Q.contrastRatio=function(Oe,De){var Ue=ne(he(Oe,De)),$e=ne(De);return(Math.max(Ue,$e)+.05)/(Math.min(Ue,$e)+.05)};var Te=12.82051282051282,j=.06;function be(Oe){var De=V(Oe,3),Ue=De[0],$e=De[1],Fe=De[2];return .2126729*Math.pow(Ue,2.4)+.7151522*Math.pow($e,2.4)+.072175*Math.pow(Fe,2.4)}function ce(Oe){return Oe>.03?Oe:Oe+Math.pow(.03-Oe,1.45)}function ye(Oe,De){if(Oe=ce(Oe),De=ce(De),Math.abs(Oe-De)<5e-4)return 0;var Ue=0;return 100*(Ue=De>=Oe?(Ue=1.25*(Math.pow(De,.55)-Math.pow(Oe,.58)))<.001?0:Ue<.078?Ue-Ue*Te*j:Ue-j:(Ue=1.25*(Math.pow(De,.62)-Math.pow(Oe,.57)))>-.001?0:Ue>-.078?Ue-Ue*Te*j:Ue+j)}Q.luminanceAPCA=be,Q.contrastRatioAPCA=function(Oe,De){return ye(be(Oe),be(De))},Q.contrastRatioByLuminanceAPCA=ye,Q.desiredLuminanceAPCA=function(Oe,De,Ue){function $e(){return Ue?Math.pow(Math.abs(Math.pow(Oe,.62)-(-De-j)/1.25),1.7543859649122808):Math.pow(Math.abs(Math.pow(Oe,.55)-(De+j)/1.25),1.7241379310344829)}Oe=ce(Oe),De/=100;var Fe=$e();return(Fe<0||Fe>1)&&(Ue=!Ue,Fe=$e()),Fe};var xe=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function Ee(Oe,De){var Ue=72*parseFloat(Oe.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(De)!==-1?Ue>=14:Ue>=18}xe.reverse(),Q.getAPCAThreshold=function(Oe,De){var Ue,$e,Fe,Xe,Ye=parseFloat(Oe.replace("px","")),He=parseFloat(De);try{for(var Je=de(xe),pt=Je.next();!pt.done;pt=Je.next()){var It=V(pt.value),At=It[0],bt=It.slice(1);if(Ye>=At)try{for(var rt=(Fe=void 0,de([900,800,700,600,500,400,300,200,100].entries())),nt=rt.next();!nt.done;nt=rt.next()){var it=V(nt.value,2),dt=it[0];if(He>=it[1]){var lt=bt[bt.length-1-dt];return lt===-1?null:lt}}}catch(ft){Fe={error:ft}}finally{try{nt&&!nt.done&&(Xe=rt.return)&&Xe.call(rt)}finally{if(Fe)throw Fe.error}}}}catch(ft){Ue={error:ft}}finally{try{pt&&!pt.done&&($e=Je.return)&&$e.call(Je)}finally{if(Ue)throw Ue.error}}return null},Q.isLargeFont=Ee;var Ce={aa:3,aaa:4.5},Se={aa:4.5,aaa:7};Q.getContrastThreshold=function(Oe,De){return Ee(Oe,De)?Ce:Se}},9434:function(q,Q){var V=this&&this.__values||function(ce){var ye=typeof Symbol=="function"&&Symbol.iterator,xe=ye&&ce[ye],Ee=0;if(xe)return xe.call(ce);if(ce&&typeof ce.length=="number")return{next:function(){return ce&&Ee>=ce.length&&(ce=void 0),{value:ce&&ce[Ee++],done:!ce}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")},de=this&&this.__read||function(ce,ye){var xe=typeof Symbol=="function"&&ce[Symbol.iterator];if(!xe)return ce;var Ee,Ce,Se=xe.call(ce),Oe=[];try{for(;(ye===void 0||ye-- >0)&&!(Ee=Se.next()).done;)Oe.push(Ee.value)}catch(De){Ce={error:De}}finally{try{Ee&&!Ee.done&&(xe=Se.return)&&xe.call(Se)}finally{if(Ce)throw Ce.error}}return Oe},he=this&&this.__spreadArray||function(ce,ye,xe){if(xe||arguments.length===2)for(var Ee,Ce=0,Se=ye.length;Ce<Se;Ce++)!Ee&&Ce in ye||(Ee||(Ee=Array.prototype.slice.call(ye,0,Ce)),Ee[Ce]=ye[Ce]);return ce.concat(Ee||Array.prototype.slice.call(ye))};Object.defineProperty(Q,"__esModule",{value:!0}),Q.adoptStyleSheet=Q.constrainNumber=Q.ellipsify=Q.createElement=Q.createTextChild=Q.createChild=Q.log=Q.Overlay=void 0;var ne=function(){function ce(ye,xe){xe===void 0&&(xe=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=ye,this._document=ye.document,Array.isArray(xe)||(xe=[xe]),this.style=xe}return ce.prototype.setCanvas=function(ye){this.canvas=ye,this._context=ye.getContext("2d")},ce.prototype.install=function(){var ye,xe;try{for(var Ee=V(this.style),Ce=Ee.next();!Ce.done;Ce=Ee.next())be(Ce.value)}catch(Se){ye={error:Se}}finally{try{Ce&&!Ce.done&&(xe=Ee.return)&&xe.call(Ee)}finally{if(ye)throw ye.error}}this._installed=!0},ce.prototype.uninstall=function(){var ye,xe,Ee=function(Oe){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(De){return De!==Oe})};try{for(var Ce=V(this.style),Se=Ce.next();!Se.done;Se=Ce.next())Ee(Se.value)}catch(Oe){ye={error:Oe}}finally{try{Se&&!Se.done&&(xe=Ce.return)&&xe.call(Ce)}finally{if(ye)throw ye.error}}this._installed=!1},ce.prototype.reset=function(ye){ye&&(this.viewportSize=ye.viewportSize,this.visualViewportSize=ye.visualViewportSize,this.deviceScaleFactor=ye.deviceScaleFactor,this.pageScaleFactor=ye.pageScaleFactor,this.pageZoomFactor=ye.pageZoomFactor,this.emulationScaleFactor=ye.emulationScaleFactor,this.scrollX=Math.round(ye.scrollX),this.scrollY=Math.round(ye.scrollY)),this.resetCanvas()},ce.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},ce.prototype.setPlatform=function(ye){this.platform=ye,this._installed||this.install()},ce.prototype.dispatch=function(ye){this[ye.shift()].apply(this,ye)},ce.prototype.eventHasCtrlOrMeta=function(ye){return this.platform==="mac"?ye.metaKey&&!ye.ctrlKey:ye.ctrlKey&&!ye.metaKey},Object.defineProperty(ce.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(ce.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),ce}();function Te(ce,ye,xe){var Ee=j(ye,xe);return Ee.addEventListener("click",function(Ce){Ce.stopPropagation()},!1),ce.appendChild(Ee),Ee}function j(ce,ye){var xe=document.createElement(ce);if(ye){var Ee=ye.split(/\s+/);Ee=Ee.map(function(Ce){return"luna-dom-highlighter-"+Ce}),xe.className=Ee.join(" ")}return xe}function be(ce){document.adoptedStyleSheets=he(he([],de(document.adoptedStyleSheets),!1),[ce],!1)}Q.Overlay=ne,Q.log=function(ce){var ye=document.getElementById("log");ye||((ye=Te(document.body,"div")).id="log"),Te(ye,"div").textContent=ce},Q.createChild=Te,Q.createTextChild=function(ce,ye){var xe=document.createTextNode(ye);return ce.appendChild(xe),xe},Q.createElement=j,Q.ellipsify=function(ce,ye){return ce.length<=ye?String(ce):ce.substr(0,ye-1)+"\u2026"},Q.constrainNumber=function(ce,ye,xe){return ce<ye?ce=ye:ce>xe&&(ce=xe),ce},Q.adoptStyleSheet=be},1521:function(q,Q,V){var de=this&&this.__values||function(Ce){var Se=typeof Symbol=="function"&&Symbol.iterator,Oe=Se&&Ce[Se],De=0;if(Oe)return Oe.call(Ce);if(Ce&&typeof Ce.length=="number")return{next:function(){return Ce&&De>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[De++],done:!Ce}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")},he=this&&this.__read||function(Ce,Se){var Oe=typeof Symbol=="function"&&Ce[Symbol.iterator];if(!Oe)return Ce;var De,Ue,$e=Oe.call(Ce),Fe=[];try{for(;(Se===void 0||Se-- >0)&&!(De=$e.next()).done;)Fe.push(De.value)}catch(Xe){Ue={error:Xe}}finally{try{De&&!De.done&&(Oe=$e.return)&&Oe.call($e)}finally{if(Ue)throw Ue.error}}return Fe},ne=this&&this.__spreadArray||function(Ce,Se,Oe){if(Oe||arguments.length===2)for(var De,Ue=0,$e=Se.length;Ue<$e;Ue++)!De&&Ue in Se||(De||(De=Array.prototype.slice.call(Se,0,Ue)),De[Ue]=Se[Ue]);return Ce.concat(De||Array.prototype.slice.call(Se))};Object.defineProperty(Q,"__esModule",{value:!0}),Q.drawPath=Q.formatColor=Q.formatRgba=Q.parseHexa=Q.createPathForQuad=Q.hatchFillPath=Q.applyMatrixToPoint=Q.emptyBounds=Q.buildPath=Q.fillPathWithBoxStyle=Q.drawPathWithLineStyle=void 0;var Te=V(9706);function j(Ce,Se,Oe){var De=0;function Ue(Xe){for(var Ye=[],He=0;He<Xe;++He){var Je=Math.round(Ce[De++]*Oe);Se.maxX=Math.max(Se.maxX,Je),Se.minX=Math.min(Se.minX,Je);var pt=Math.round(Ce[De++]*Oe);Se.maxY=Math.max(Se.maxY,pt),Se.minY=Math.min(Se.minY,pt),Se.leftmostXForY[pt]=Math.min(Se.leftmostXForY[pt]||Number.MAX_VALUE,Je),Se.rightmostXForY[pt]=Math.max(Se.rightmostXForY[pt]||Number.MIN_VALUE,Je),Se.topmostYForX[Je]=Math.min(Se.topmostYForX[Je]||Number.MAX_VALUE,pt),Se.bottommostYForX[Je]=Math.max(Se.bottommostYForX[Je]||Number.MIN_VALUE,pt),Se.allPoints.push({x:Je,y:pt}),Ye.push(Je,pt)}return Ye}for(var $e=Ce.length,Fe=new Path2D;De<$e;)switch(Ce[De++]){case"M":Fe.moveTo.apply(Fe,Ue(1));break;case"L":Fe.lineTo.apply(Fe,Ue(1));break;case"C":Fe.bezierCurveTo.apply(Fe,Ue(3));break;case"Q":Fe.quadraticCurveTo.apply(Fe,Ue(2));break;case"Z":Fe.closePath()}return Fe}Q.drawPathWithLineStyle=function(Ce,Se,Oe,De){De===void 0&&(De=1),Oe&&Oe.color&&(Ce.save(),Ce.translate(.5,.5),Ce.lineWidth=De,Oe.pattern==="dashed"&&Ce.setLineDash([3,3]),Oe.pattern==="dotted"&&Ce.setLineDash([2,2]),Ce.strokeStyle=Oe.color,Ce.stroke(Se),Ce.restore())},Q.fillPathWithBoxStyle=function(Ce,Se,Oe,De,Ue){Ue&&(Ce.save(),Ue.fillColor&&(Ce.fillStyle=Ue.fillColor,Ce.fill(Se)),Ue.hatchColor&&ye(Ce,Se,Oe,10,Ue.hatchColor,De,!1),Ce.restore())},Q.buildPath=j,Q.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},Q.applyMatrixToPoint=function(Ce,Se){var Oe=new DOMPoint(Ce.x,Ce.y);return{x:(Oe=Oe.matrixTransform(Se)).x,y:Oe.y}};var be,ce="";function ye(Ce,Se,Oe,De,Ue,$e,Fe){if((Ce.canvas.width<Oe.maxX-Oe.minX||Ce.canvas.height<Oe.maxY-Oe.minY)&&(Oe={minX:0,maxX:Ce.canvas.width,minY:0,maxY:Ce.canvas.height,allPoints:[]}),!be||Ue!==ce){ce=Ue;var Xe=document.createElement("canvas");Xe.width=De,Xe.height=8;var Ye=Xe.getContext("2d");Ye.clearRect(0,0,Xe.width,Xe.height),Ye.rect(0,0,1,5),Ye.fillStyle=Ue,Ye.fill(),be=Ce.createPattern(Xe,"repeat")}Ce.save();var He=new DOMMatrix;be.setTransform(He.scale(Fe?-1:1,1).rotate(0,0,-45+$e)),Ce.fillStyle=be,Ce.fill(Se),Ce.restore()}function xe(Ce){return(Ce.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(Se){return parseInt(Se,16)/255})}function Ee(Ce,Se){if(Se==="rgb"){var Oe=he(Ce,4),De=Oe[0],Ue=Oe[1],$e=Oe[2],Fe=Oe[3];return"rgb(".concat((255*De).toFixed()," ").concat((255*Ue).toFixed()," ").concat((255*$e).toFixed()).concat(Fe===1?"":" / "+Math.round(100*Fe)/100,")")}if(Se==="hsl"){var Xe=he((0,Te.rgbaToHsla)(Ce),4),Ye=Xe[0],He=Xe[1],Je=Xe[2];return Fe=Xe[3],"hsl(".concat(Math.round(360*Ye),"deg ").concat(Math.round(100*He)," ").concat(Math.round(100*Je)).concat(Fe===1?"":" / "+Math.round(100*Fe)/100,")")}throw new Error("NOT_REACHED")}Q.hatchFillPath=ye,Q.createPathForQuad=function(Ce,Se,Oe,De){var Ue,$e,Fe=["M",Ce.p1.x,Ce.p1.y,"L",Ce.p2.x,Ce.p2.y,"L",Ce.p3.x,Ce.p3.y,"L",Ce.p4.x,Ce.p4.y];try{for(var Xe=de(Se),Ye=Xe.next();!Ye.done;Ye=Xe.next()){var He=Ye.value;Fe=ne(ne([],he(Fe),!1),["L",He.p4.x,He.p4.y,"L",He.p3.x,He.p3.y,"L",He.p2.x,He.p2.y,"L",He.p1.x,He.p1.y,"L",He.p4.x,He.p4.y,"L",Ce.p4.x,Ce.p4.y],!1)}}catch(Je){Ue={error:Je}}finally{try{Ye&&!Ye.done&&($e=Xe.return)&&$e.call(Xe)}finally{if(Ue)throw Ue.error}}return Fe.push("Z"),j(Fe,Oe,De)},Q.parseHexa=xe,Q.formatRgba=Ee,Q.formatColor=function(Ce,Se){return Se==="rgb"||Se==="hsl"?Ee(xe(Ce),Se):Ce.endsWith("FF")?Ce.substr(0,7):Ce},Q.drawPath=function(Ce,Se,Oe,De,Ue,$e,Fe){Ce.save();var Xe=j(Se,$e,Fe);return Oe&&(Ce.fillStyle=Oe,Ce.fill(Xe)),De&&(Ue==="dashed"&&Ce.setLineDash([3,3]),Ue==="dotted"&&Ce.setLineDash([2,2]),Ce.lineWidth=2,Ce.strokeStyle=De,Ce.stroke(Xe)),Ce.restore(),Xe}},7669:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Ce,Se){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,De){Oe.__proto__=De}||function(Oe,De){for(var Ue in De)Object.prototype.hasOwnProperty.call(De,Ue)&&(Oe[Ue]=De[Ue])},de(Ce,Se)},function(Ce,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=Ce}de(Ce,Se),Ce.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)});Object.defineProperty(Q,"__esModule",{value:!0}),Q.HighlightOverlay=void 0;var ne=V(9706),Te=V(9434),j=V(1521),be=function(Ce){function Se(){var Oe=Ce!==null&&Ce.apply(this,arguments)||this;return Oe.gridLabelState={gridLayerCounter:0},Oe}return he(Se,Ce),Se.prototype.setContainer=function(Oe){this._container=Oe},Se.prototype.setPlatform=function(Oe){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+Oe),Ce.prototype.setPlatform.call(this,Oe)},Object.defineProperty(Se.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Se.prototype.reset=function(Oe){Ce.prototype.reset.call(this,Oe),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},Se.prototype.install=function(){var Oe=this.document.createElement("canvas");Oe.classList.add("luna-dom-highlighter-fill"),this.container.append(Oe);var De=this.document.createElement("div");this.container.append(De),this.tooltip=De,this.setCanvas(Oe),Ce.prototype.install.call(this)},Se.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",Ce.prototype.uninstall.call(this)},Se.prototype.drawHighlight=function(Oe){this.context.save();for(var De=(0,j.emptyBounds)(),Ue=Oe.paths.slice();Ue.length;){var $e=Ue.pop();$e&&(this.context.save(),(0,j.drawPath)(this.context,$e.path,$e.fillColor,$e.outlineColor,void 0,De,this.emulationScaleFactor),Ue.length&&(this.context.globalCompositeOperation="destination-out",(0,j.drawPath)(this.context,Ue[Ue.length-1].path,"red",void 0,void 0,De,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var Fe=Boolean(Oe.paths.length&&Oe.showRulers&&De.minX<20&&De.maxX+20<this.canvasWidth),Xe=Boolean(Oe.paths.length&&Oe.showRulers&&De.minY<20&&De.maxY+20<this.canvasHeight);return Oe.showRulers&&this.drawAxis(this.context,Fe,Xe),Oe.paths.length&&(Oe.showExtensionLines&&function(Ye,He,Je,pt,It,At,bt,rt){Ye.save();var nt=bt,it=rt;if(Ye.strokeStyle=It||Ee,Ye.lineWidth=1,Ye.translate(.5,.5),At&&Ye.setLineDash([3,3]),Je)for(var dt in He.rightmostXForY)Ye.beginPath(),Ye.moveTo(nt,Number(dt)),Ye.lineTo(He.rightmostXForY[dt],Number(dt)),Ye.stroke();else for(var dt in He.leftmostXForY)Ye.beginPath(),Ye.moveTo(0,Number(dt)),Ye.lineTo(He.leftmostXForY[dt],Number(dt)),Ye.stroke();if(pt)for(var lt in He.bottommostYForX)Ye.beginPath(),Ye.moveTo(Number(lt),it),Ye.lineTo(Number(lt),He.topmostYForX[lt]),Ye.stroke();else for(var lt in He.topmostYForX)Ye.beginPath(),Ye.moveTo(Number(lt),0),Ye.lineTo(Number(lt),He.topmostYForX[lt]),Ye.stroke();Ye.restore()}(this.context,De,Fe,Xe,void 0,!1,this.canvasWidth,this.canvasHeight),Oe.elementInfo&&function(Ye,He,Je,pt,It,At){Ye.innerHTML="";var bt=(0,Te.createChild)(Ye,"div"),rt=(0,Te.createChild)(bt,"div","tooltip-content"),nt=function(vn,Pn){var Pt=(0,Te.createElement)("div","element-info"),Dt=(0,Te.createChild)(Pt,"div","element-info-header"),rn=function(Gr){return Gr.layoutObjectName&&Gr.layoutObjectName.endsWith("Grid")?"grid":Gr.layoutObjectName&&Gr.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(vn);rn&&(0,Te.createChild)(Dt,"div","element-layout-type ".concat(rn));var bn=(0,Te.createChild)(Dt,"div","element-description");(0,Te.createChild)(bn,"span","material-tag-name").textContent=vn.tagName;var En=(0,Te.createChild)(bn,"span","material-node-id"),zn=80;En.textContent=vn.idValue?"#"+(0,Te.ellipsify)(vn.idValue,zn):"",En.classList.toggle("hidden",!vn.idValue);var $n=(0,Te.createChild)(bn,"span","material-class-name");En.textContent.length<zn&&($n.textContent=(0,Te.ellipsify)(vn.className||"",zn-En.textContent.length)),$n.classList.toggle("hidden",!vn.className);var xn=(0,Te.createChild)(Dt,"div","dimensions");(0,Te.createChild)(xn,"span","material-node-width").textContent=String(Math.round(100*vn.nodeWidth)/100),(0,Te.createTextChild)(xn,"\xD7"),(0,Te.createChild)(xn,"span","material-node-height").textContent=String(Math.round(100*vn.nodeHeight)/100);var wn,Sn=vn.style||{};vn.isLockedAncestor&&br("Showing content-visibility ancestor",""),vn.isLocked&&br("Descendants are skipped due to content-visibility","");var Jn=Sn.color;Jn&&Jn!=="#00000000"&&Br("Color",Jn,Pn);var nr=Sn["font-family"],fr=Sn["font-size"];nr&&fr!=="0px"&&br("Font","".concat(fr," ").concat(nr));var Yn=Sn["background-color"];Yn&&Yn!=="#00000000"&&Br("Background",Yn,Pn);var qn=Sn.margin;qn&&qn!=="0px"&&br("Margin",qn);var un=Sn.padding;un&&un!=="0px"&&br("Padding",un);var yn=vn.contrast?vn.contrast.backgroundColor:null,Rn=Jn&&Jn!=="#00000000"&&yn&&yn!=="#00000000";vn.showAccessibilityInfo&&(mr("Accessibility"),Rn&&Sn.color&&vn.contrast&&Fr(Sn.color,vn.contrast),br("Name",vn.accessibleName),br("Role",vn.accessibleRole),Lr("Keyboard-focusable",vn.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function Kn(){wn||(wn=(0,Te.createChild)(Pt,"div","element-info-body"))}function mr(Gr){Kn();var Ur=(0,Te.createChild)(wn,"div","element-info-row element-info-section");(0,Te.createChild)(Ur,"div","section-name").textContent=Gr,(0,Te.createChild)((0,Te.createChild)(Ur,"div","separator-container"),"div","separator")}function Cr(Gr,Ur,Ri){Kn();var Li=(0,Te.createChild)(wn,"div","element-info-row");return Ur&&Li.classList.add(Ur),(0,Te.createChild)(Li,"div","element-info-name").textContent=Gr,(0,Te.createChild)(Li,"div","element-info-gap"),(0,Te.createChild)(Li,"div",Ri||"")}function Lr(Gr,Ur){(0,Te.createChild)(Cr(Gr,"","element-info-value-icon"),"div",Ur)}function br(Gr,Ur){(0,Te.createTextChild)(Cr(Gr,"","element-info-value-text"),Ur)}function Br(Gr,Ur,Ri){var Li=Cr(Gr,"","element-info-value-color"),Ti=(0,Te.createChild)(Li,"div","color-swatch");(0,Te.createChild)(Ti,"div","color-swatch-inner").style.backgroundColor=Ur,(0,Te.createTextChild)(Li,(0,j.formatColor)(Ur,Ri))}function Fr(Gr,Ur){var Ri=(0,j.parseHexa)(Gr),Li=(0,j.parseHexa)(Ur.backgroundColor);Ri[3]*=Ur.textOpacity;var Ti=Cr("Contrast","","element-info-value-contrast"),Sr=(0,Te.createChild)(Ti,"div","contrast-text");Sr.style.color=(0,j.formatRgba)(Ri,"rgb"),Sr.style.backgroundColor=Ur.backgroundColor,Sr.textContent="Aa";var No=(0,Te.createChild)(Ti,"span");if(Ur.contrastAlgorithm==="apca"){var Ea=(0,ne.contrastRatioAPCA)(Ri,Li),xi=(0,ne.getAPCAThreshold)(Ur.fontSize,Ur.fontWeight);No.textContent=String(Math.floor(100*Ea)/100)+"%",(0,Te.createChild)(Ti,"div",xi===null||Math.abs(Ea)<xi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(Ur.contrastAlgorithm==="aa"||Ur.contrastAlgorithm==="aaa"){var la=(0,ne.contrastRatio)(Ri,Li);xi=(0,ne.getContrastThreshold)(Ur.fontSize,Ur.fontWeight)[Ur.contrastAlgorithm],No.textContent=String(Math.floor(100*la)/100),(0,Te.createChild)(Ti,"div",la<xi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return Pt}(He,Je);rt.appendChild(nt);var it,dt=rt.offsetWidth,lt=rt.offsetHeight,ft=8,xt=2,ht=2*ft,Vt=ft+2,st=xt+Vt,$t=It-xt-Vt-ht;if(pt.maxX-pt.minX<ht+2*Vt)it=.5*(pt.minX+pt.maxX)-ft;else{var ln=pt.minX+Vt,Mn=pt.maxX-Vt-ht;it=ln>st&&ln<$t?ln:(0,Te.constrainNumber)(st,ln,Mn)}var on=it<st||it>$t,an=it-Vt;an=(0,Te.constrainNumber)(an,xt,It-dt-xt);var Xt=pt.minY-ft-lt,Rt=!0;Xt<0?(Xt=Math.min(At-lt,pt.maxY+ft),Rt=!1):pt.minY>At&&(Xt=At-ft-lt);var en=an>=pt.minX&&an+dt<=pt.maxX&&Xt>=pt.minY&&Xt+lt<=pt.maxY;if(an<pt.maxX&&an+dt>pt.minX&&Xt<pt.maxY&&Xt+lt>pt.minY&&!en)return void(rt.style.display="none");if(rt.style.top=Xt+"px",rt.style.left=an+"px",!on){var hn=(0,Te.createChild)(rt,"div","tooltip-arrow");hn.style.clipPath=Rt?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",hn.style.top=(Rt?lt-1:-ft)+"px",hn.style.left=it-an+"px"}}(this.tooltip,Oe.elementInfo,Oe.colorFormat,De,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:De}},Se.prototype.drawAxis=function(Oe,De,Ue){Oe.save();var $e=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,Fe=this.scrollX*this.pageScaleFactor,Xe=this.scrollY*this.pageScaleFactor;function Ye(dt){return Math.round(dt*$e)}function He(dt){return Math.round(dt/$e)}var Je=this.canvasWidth/$e,pt=this.canvasHeight/$e,It=50;Oe.save(),Oe.fillStyle=xe,Ue?Oe.fillRect(0,Ye(pt)-15,Ye(Je),Ye(pt)):Oe.fillRect(0,0,Ye(Je),15),Oe.globalCompositeOperation="destination-out",Oe.fillStyle="red",De?Oe.fillRect(Ye(Je)-15,0,Ye(Je),Ye(pt)):Oe.fillRect(0,0,15,Ye(pt)),Oe.restore(),Oe.fillStyle=xe,De?Oe.fillRect(Ye(Je)-15,0,Ye(Je),Ye(pt)):Oe.fillRect(0,0,15,Ye(pt)),Oe.lineWidth=1,Oe.strokeStyle=ye,Oe.fillStyle=ye,Oe.save(),Oe.translate(-Fe,.5-Xe);for(var At=pt+He(Xe),bt=100;bt<At;bt+=100)Oe.save(),Oe.translate(Fe,Ye(bt)),Oe.rotate(-Math.PI/2),Oe.fillText(String(bt),2,De?Ye(Je)-7:13),Oe.restore();Oe.translate(.5,-.5);for(var rt=Je+He(Fe),nt=100;nt<rt;nt+=100)Oe.save(),Oe.fillText(String(nt),Ye(nt)+2,Ue?Xe+Ye(pt)-7:Xe+13),Oe.restore();for(Oe.restore(),Oe.save(),De&&(Oe.translate(Ye(Je),0),Oe.scale(-1,1)),Oe.translate(-Fe,.5-Xe),At=pt+He(Xe),bt=It;bt<At;bt+=It){Oe.beginPath(),Oe.moveTo(Fe,Ye(bt));var it=bt%100?5:8;Oe.lineTo(Fe+it,Ye(bt)),Oe.stroke()}for(Oe.strokeStyle=ce,bt=5;bt<At;bt+=5)bt%It&&(Oe.beginPath(),Oe.moveTo(Fe,Ye(bt)),Oe.lineTo(Fe+5,Ye(bt)),Oe.stroke());for(Oe.restore(),Oe.save(),Ue&&(Oe.translate(0,Ye(pt)),Oe.scale(1,-1)),Oe.translate(.5-Fe,-Xe),rt=Je+He(Fe),nt=It;nt<rt;nt+=It)Oe.beginPath(),Oe.moveTo(Ye(nt),Xe),it=nt%100?5:8,Oe.lineTo(Ye(nt),Xe+it),Oe.stroke();for(Oe.strokeStyle=ce,nt=5;nt<rt;nt+=5)nt%It&&(Oe.beginPath(),Oe.moveTo(Ye(nt),Xe),Oe.lineTo(Ye(nt),Xe+5),Oe.stroke());Oe.restore(),Oe.restore()},Se}(Te.Overlay);Q.HighlightOverlay=be;var ce="rgba(0,0,0,0.2)",ye="rgba(0,0,0,0.7)",xe="rgba(255, 255, 255, 0.8)",Ee="rgba(128, 128, 128, 0.3)"},1160:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Se,Oe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,Ue){De.__proto__=Ue}||function(De,Ue){for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&(De[$e]=Ue[$e])},de(Se,Oe)},function(Se,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function De(){this.constructor=Se}de(Se,Oe),Se.prototype=Oe===null?Object.create(Oe):(De.prototype=Oe.prototype,new De)}),ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(1512)),be=V(2062),ce=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Ee=ne(V(5852)),Ce=function(Se){function Oe(De,Ue,$e){var Fe=Ue.compName,Xe=($e===void 0?{}:$e).theme,Ye=Xe===void 0?"light":Xe,He=Se.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,be.classPrefix)(Fe),He.options={},He.container=De,He.$container=(0,j.default)(De),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,be.getPlatform)()))]),He.on("optionChange",function(Je,pt,It){var At=He.c;Je==="theme"&&(He.$container.rmClass(At("theme-".concat(It))).addClass(At("theme-".concat(pt))),(0,ce.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ye),He}return he(Oe,Se),Oe.prototype.destroy=function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat((0,be.getPlatform)()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(De,Ue){var $e=this,Fe=this.options,Xe={};typeof De=="string"?Xe[De]=Ue:Xe=De,(0,ce.default)(Xe,function(Ye,He){var Je=Fe[He];Fe[He]=Ye,$e.emit("optionChange",He,Ye,Je)})},Oe.prototype.getOption=function(De){return this.options[De]},Oe.prototype.addSubComponent=function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)},Oe.prototype.removeSubComponent=function(De){(0,Ee.default)(this.subComponents,function(Ue){return Ue===De})},Oe.prototype.destroySubComponents=function(){(0,ce.default)(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(De,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(De,Ue),(0,ye.default)(this.options,De)},Oe.prototype.find=function(De){return this.$container.find(this.c(De))},Oe}(Te.default);Q.default=Ce},2062:function(q,Q,V){var de=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var he=de(V(2461)),ne=de(V(4331)),Te=de(V(5610)),j=de(V(7483)),be=de(V(3990)),ce=de(V(6341)),ye=de(V(3875)),xe=de(V(6954)),Ee=de(V(9585));function Ce($e,Fe){for(var Xe=0,Ye=$e.length;Xe<Ye;Xe++){var He=$e[Xe];Fe(He),He.content&&Ce(He.content,Fe)}}Q.classPrefix=function($e){var Fe="luna-".concat($e,"-");function Xe(Ye){return(0,he.default)((0,ne.default)(Ye).split(/\s+/),function(He){return(0,ce.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Je){return"".concat(Fe).concat(Je)})}).join(" ")}return function(Ye){if(/<[^>]*>/g.test(Ye))try{var He=j.default.parse(Ye);return Ce(He,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Xe(Je.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ye)}return Xe(Ye)}};var Se,Oe="ontouchstart"in Te.default,De={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function($e){return Oe?De[$e]:Ue[$e]},Q.eventClient=function($e,Fe){var Xe=$e==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function($e,Fe){var Xe=$e==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,be.default)(Se))return Se;if(!document)return 16;var $e=document.createElement("div"),Fe=document.createElement("div");return $e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),$e.appendChild(Fe),document.body.appendChild($e),Se=$e.offsetWidth-$e.clientWidth,document.body.removeChild($e),Se},Q.hasVerticalScrollbar=function($e){return $e.scrollHeight>$e.offsetHeight},Q.executeAfterTransition=function($e,Fe){if((0,Ee.default)($e))return Fe();var Xe=function(Ye){Ye.target===$e&&($e.removeEventListener("transitionend",Xe),Fe())};$e.addEventListener("transitionend",Xe)},Q.pxToNum=function($e){return(0,ye.default)($e.replace("px",""))},Q.getPlatform=function(){var $e=(0,xe.default)();return $e==="os x"?"mac":$e},Q.resetCanvasSize=function($e){$e.width=Math.round($e.offsetWidth*window.devicePixelRatio),$e.height=Math.round($e.offsetHeight*window.devicePixelRatio)}},8719:function(q,Q,V){var de,he=this&&this.__extends||(de=function(bt,rt){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,it){nt.__proto__=it}||function(nt,it){for(var dt in it)Object.prototype.hasOwnProperty.call(it,dt)&&(nt[dt]=it[dt])},de(bt,rt)},function(bt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");function nt(){this.constructor=bt}de(bt,rt),bt.prototype=rt===null?Object.create(rt):(nt.prototype=rt.prototype,new nt)}),ne=this&&this.__makeTemplateObject||function(bt,rt){return Object.defineProperty?Object.defineProperty(bt,"raw",{value:rt}):bt.raw=rt,bt},Te=this&&this.__assign||function(){return Te=Object.assign||function(bt){for(var rt,nt=1,it=arguments.length;nt<it;nt++)for(var dt in rt=arguments[nt])Object.prototype.hasOwnProperty.call(rt,dt)&&(bt[dt]=rt[dt]);return bt},Te.apply(this,arguments)},j=this&&this.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(Q,"__esModule",{value:!0});var be,ce=j(V(6370)),ye=j(V(3783)),xe=j(V(1512)),Ee=j(V(8613)),Ce=j(V(2461)),Se=j(V(5972)),Oe=j(V(1907)),De=j(V(1352)),Ue=j(V(2289)),$e=j(V(6341)),Fe=j(V(3651)),Xe=j(V(7756)),Ye=j(V(8901)),He=j(V(4331)),Je={comment:"",string:"",number:"",keyword:"",operator:""},pt=function(bt){function rt(nt,it){it===void 0&&(it={});var dt=bt.call(this,nt,{compName:"dom-viewer"},it)||this;return dt.isExpanded=!1,dt.isChildNodesRendered=!1,dt.select=function(){var lt=dt.c;(0,xe.default)(dt.options.rootContainer).find(lt(".selected")).rmClass(lt("selected")),dt.$tag.addClass(lt("selected"))},dt.toggle=function(){dt.isExpanded?dt.collapse():dt.expand()},dt.initOptions(it,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:nt,ignore:function(){return!1}}),dt.initTpl(),dt.bindEvent(),dt.options.isEndTag||dt.initObserver(),dt}return he(rt,bt),rt.prototype.expand=function(){if(this.isExpandable()){this.isExpanded=!0;var nt=this.$tag,it=this.c,dt=this.options.node;nt.html(this.renderHtmlTag(Te(Te({},It(dt)),{hasTail:!1,hasToggleButton:!0}))),nt.addClass(it("expanded")),this.$children.rmClass(it("hidden")),this.renderChildNodes(dt)}},rt.prototype.collapse=function(){if(this.isExpandable()){this.isExpanded=!1;var nt=this.$tag,it=this.c,dt=this.options.node;this.$children.addClass(it("hidden")),this.$tag.html(this.renderHtmlTag(Te(Te({},It(dt)),{hasTail:!0,hasToggleButton:!0}))),nt.rmClass(it("expanded"))}},rt.prototype.destroy=function(){this.observer&&this.observer.disconnect(),bt.prototype.destroy.call(this)},rt.prototype.initObserver=function(){var nt=this;this.observer=new Ue.default(function(it){(0,ye.default)(it,function(dt){return nt.handleMutation(dt)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})},rt.prototype.handleMutation=function(nt){var it=this.$tag,dt=this.c,lt=this.options.node;(0,$e.default)(["attributes","childList"],nt.type)?(nt.type==="childList"&&(this.isChildNodesRendered=!1),this.isExpandable()?this.isExpanded?this.expand():this.collapse():(this.$children.addClass(dt("hidden")),it.html(this.renderHtmlTag(Te(Te({},It(lt)),{hasTail:!1}))))):nt.type==="characterData"&&(lt.nodeType===Node.TEXT_NODE?it.html(this.renderTextNode(lt)):lt.nodeType===Node.COMMENT_NODE&&it.html(this.renderHtmlComment(lt.nodeValue)))},rt.prototype.bindEvent=function(){var nt=this,it=this.c,dt=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&dt.on("click",it(".toggle"),function(lt){lt.stopPropagation(),nt.toggle()}),dt.on("click",this.select)},rt.prototype.isExpandable=function(){var nt=this.options.node;return nt.nodeType===Node.ELEMENT_NODE&&this.getChildNodes(nt).length>0},rt.prototype.getChildNodes=function(nt){var it=this.options,dt=it.rootContainer,lt=it.ignore,ft=(0,De.default)(nt.childNodes);return ft=(0,Se.default)(ft,function(xt){if(xt.nodeType===Node.TEXT_NODE||xt.nodeType===Node.COMMENT_NODE){var ht=xt.nodeValue;if((0,He.default)(ht)==="")return!1}return xt!==dt&&!lt(xt)})},rt.prototype.initTpl=function(){var nt=this.container,it=this.c,dt=this.options,lt=dt.node,ft=dt.isEndTag,xt=(0,xe.default)((0,Ee.default)("li"));if(xt.addClass(it("tree-item")),this.$tag=xt,ft)xt.html(it('<span class="html-tag" style="margin-left: -12px;">&lt;<span class="tag-name">/'.concat(lt.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(lt.nodeType===Node.ELEMENT_NODE){var ht=this.isExpandable(),Vt=Te(Te({},It(lt)),{hasTail:ht,hasToggleButton:ht});xt.html(this.renderHtmlTag(Vt))}else if(lt.nodeType===Node.TEXT_NODE)xt.html(this.renderTextNode(lt));else{if(lt.nodeType!==Node.COMMENT_NODE)return;var st=lt.nodeValue;if(st.trim()==="")return;xt.html(this.renderHtmlComment(st))}if(nt.appendChild(xt.get(0)),lt.nodeType===lt.ELEMENT_NODE){var $t=(0,xe.default)((0,Ee.default)("ul"));$t.addClass([it("children"),it("hidden")]),nt.appendChild($t.get(0)),this.$children=$t}},rt.prototype.renderChildNodes=function(nt){var it=this;if(!this.isChildNodesRendered){this.isChildNodesRendered=!0,this.destroySubComponents();var dt=this.options,lt=dt.rootContainer,ft=dt.ignore,xt=this.$children.get(0),ht=this.getChildNodes(nt);(0,ye.default)(ht,function(Vt){it.addSubComponent(new rt(xt,{node:Vt,parent:it,rootContainer:lt,ignore:ft}))}),nt&&this.addSubComponent(new rt(xt,{node:nt,parent:this,isEndTag:!0,rootContainer:lt,ignore:ft}))}},rt.prototype.renderHtmlTag=function(nt){var it=(0,Ce.default)(nt.attributes,function(ft){var xt=ft.name,ht=ft.value,Vt=ft.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat((0,Ye.default)(xt),"</span>").concat(ht?'="<span class="attribute-value'.concat(Vt?" attribute-underline":"",'">').concat((0,Ye.default)(ht),'</span>"'):"","</span>")}),dt="";nt.hasTail?dt="".concat(nt.hasTail?"\u2026":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(nt.tagName,"</span>&gt;</span>"):this.isExpandable()||(dt='<span class="html-tag">&lt;<span class="tag-name">/'.concat(nt.tagName,"</span>&gt;</span>"));var lt="";return nt.hasToggleButton&&(lt='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c((0,Oe.default)(be||(be=ne([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`],[`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),lt,nt.tagName,it,dt))},rt.prototype.renderTextNode=function(nt){var it=this.c,dt=nt.nodeValue,lt=nt.parentElement,ft='<span class="text-node">',xt='</span><span class="selection"></span>';if(lt&&dt.length<1e4){if(lt.tagName==="STYLE")return it("".concat(ft).concat((0,Fe.default)(dt,"css",Je)).concat(xt));if(lt.tagName==="SCRIPT")return it("".concat(ft).concat((0,Fe.default)(dt,"js",Je)).concat(xt))}return it('"'.concat(ft).concat((0,Ye.default)((0,Xe.default)(dt,1e4,{separator:" ",ellipsis:"\u2026"}))).concat(xt,'"'))},rt.prototype.renderHtmlComment=function(nt){return this.c('<span class="html-comment">&lt;!-- '.concat((0,Ye.default)(nt),' --&gt;</span><span class="selection"></span>'))},rt}(ce.default);function It(bt){var rt={tagName:"",attributes:[]};rt.tagName=bt.tagName.toLocaleLowerCase();var nt=[];return(0,ye.default)(bt.attributes,function(it){var dt=it.name,lt=it.value;nt.push({name:dt,value:lt,isLink:At(bt,dt)})}),rt.attributes=nt,rt}function At(bt,rt){var nt=bt.tagName;return(nt==="SCRIPT"||nt==="IMAGE"||nt==="VIDEO"||nt==="AUDIO")&&rt==="src"||nt==="LINK"&&rt==="href"}Q.default=pt,q.exports=pt,q.exports.default=pt},6370:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Se,Oe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,Ue){De.__proto__=Ue}||function(De,Ue){for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&(De[$e]=Ue[$e])},de(Se,Oe)},function(Se,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function De(){this.constructor=Se}de(Se,Oe),Se.prototype=Oe===null?Object.create(Oe):(De.prototype=Oe.prototype,new De)}),ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(1512)),be=V(8759),ce=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Ee=ne(V(5852)),Ce=function(Se){function Oe(De,Ue,$e){var Fe=Ue.compName,Xe=($e===void 0?{}:$e).theme,Ye=Xe===void 0?"light":Xe,He=Se.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,be.classPrefix)(Fe),He.options={},He.container=De,He.$container=(0,j.default)(De),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,be.getPlatform)()))]),He.on("optionChange",function(Je,pt,It){var At=He.c;Je==="theme"&&(He.$container.rmClass(At("theme-".concat(It))).addClass(At("theme-".concat(pt))),(0,ce.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ye),He}return he(Oe,Se),Oe.prototype.destroy=function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat((0,be.getPlatform)()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(De,Ue){var $e=this,Fe=this.options,Xe={};typeof De=="string"?Xe[De]=Ue:Xe=De,(0,ce.default)(Xe,function(Ye,He){var Je=Fe[He];Fe[He]=Ye,$e.emit("optionChange",He,Ye,Je)})},Oe.prototype.getOption=function(De){return this.options[De]},Oe.prototype.addSubComponent=function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)},Oe.prototype.removeSubComponent=function(De){(0,Ee.default)(this.subComponents,function(Ue){return Ue===De})},Oe.prototype.destroySubComponents=function(){(0,ce.default)(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(De,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(De,Ue),(0,ye.default)(this.options,De)},Oe.prototype.find=function(De){return this.$container.find(this.c(De))},Oe}(Te.default);Q.default=Ce},8759:function(q,Q,V){var de=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventPage=Q.eventClient=Q.drag=Q.classPrefix=void 0;var he=de(V(2461)),ne=de(V(4331)),Te=de(V(5610)),j=de(V(7483)),be=de(V(3990)),ce=de(V(6341)),ye=de(V(3875)),xe=de(V(6954)),Ee=de(V(9585));function Ce($e,Fe){for(var Xe=0,Ye=$e.length;Xe<Ye;Xe++){var He=$e[Xe];Fe(He),He.content&&Ce(He.content,Fe)}}Q.classPrefix=function($e){var Fe="luna-".concat($e,"-");function Xe(Ye){return(0,he.default)((0,ne.default)(Ye).split(/\s+/),function(He){return(0,ce.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Je){return"".concat(Fe).concat(Je)})}).join(" ")}return function(Ye){if(/<[^>]*>/g.test(Ye))try{var He=j.default.parse(Ye);return Ce(He,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Xe(Je.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ye)}return Xe(Ye)}};var Se,Oe="ontouchstart"in Te.default,De={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function($e){return Oe?De[$e]:Ue[$e]},Q.eventClient=function($e,Fe){var Xe=$e==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.eventPage=function($e,Fe){var Xe=$e==="x"?"pageX":"pageY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,be.default)(Se))return Se;if(!document)return 16;var $e=document.createElement("div"),Fe=document.createElement("div");return $e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),$e.appendChild(Fe),document.body.appendChild($e),Se=$e.offsetWidth-$e.clientWidth,document.body.removeChild($e),Se},Q.hasVerticalScrollbar=function($e){return $e.scrollHeight>$e.offsetHeight},Q.executeAfterTransition=function($e,Fe){if((0,Ee.default)($e))return Fe();var Xe=function(Ye){Ye.target===$e&&($e.removeEventListener("transitionend",Xe),Fe())};$e.addEventListener("transitionend",Xe)},Q.pxToNum=function($e){return(0,ye.default)($e.replace("px",""))},Q.getPlatform=function(){var $e=(0,xe.default)();return $e==="os x"?"mac":$e},Q.resetCanvasSize=function($e){$e.width=Math.round($e.offsetWidth*window.devicePixelRatio),$e.height=Math.round($e.offsetHeight*window.devicePixelRatio)}},6093:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Ee,Ce){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Oe){Se.__proto__=Oe}||function(Se,Oe){for(var De in Oe)Object.prototype.hasOwnProperty.call(Oe,De)&&(Se[De]=Oe[De])},de(Ee,Ce)},function(Ee,Ce){if(typeof Ce!="function"&&Ce!==null)throw new TypeError("Class extends value "+String(Ce)+" is not a constructor or null");function Se(){this.constructor=Ee}de(Ee,Ce),Ee.prototype=Ce===null?Object.create(Ce):(Se.prototype=Ce.prototype,new Se)}),ne=this&&this.__importDefault||function(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1512)),j=ne(V(5229)),be=ne(V(2244)),ce=ne(V(8613)),ye=function(Ee){function Ce(Se,Oe){Oe===void 0&&(Oe={});var De=Ee.call(this,Se,{compName:"notification"},Oe)||this;return De.notifications=[],De.initOptions(Oe,{position:{x:"right",y:"bottom"},duration:2e3}),De.initTpl(),De}return he(Ce,Ee),Ce.prototype.notify=function(Se,Oe){var De=this;Oe===void 0&&(Oe={duration:this.options.duration});var Ue=new xe(this,Se);this.notifications.push(Ue),this.add(Ue),setTimeout(function(){return De.remove(Ue.id)},Oe.duration)},Ce.prototype.dismissAll=function(){for(var Se=this.notifications,Oe=Se[0];Oe;)this.remove(Oe.id),Oe=Se[0]},Ce.prototype.add=function(Se){this.container.appendChild(Se.container)},Ce.prototype.remove=function(Se){var Oe=this.notifications,De=(0,be.default)(Oe,function($e){return $e.id===Se});if(De){De.destroy();var Ue=Oe.indexOf(De);Oe.splice(Ue,1)}},Ce.prototype.initTpl=function(){var Se=this.$container,Oe=this.options.position,De=Oe.x,Ue=Oe.y,$e="flex-end",Fe="flex-end";switch(De){case"center":Fe="center";break;case"left":Fe="flex-start"}Ue==="top"&&($e="flex-start"),Se.attr("style","justify-content: ".concat($e,"; align-items: ").concat(Fe))},Ce}(ne(V(5404)).default);Q.default=ye;var xe=function(){function Ee(Ce,Se){this.container=(0,ce.default)("div"),this.$container=(0,Te.default)(this.container),this.notification=Ce,this.content=Se,this.id=(0,j.default)("luna-notification-"),this.$container.attr({id:this.id,class:Ce.c("item ".concat(Ce.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return Ee.prototype.destroy=function(){this.$container.remove()},Ee.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},Ee}();q.exports=ye,q.exports.default=ye},5404:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Se,Oe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,Ue){De.__proto__=Ue}||function(De,Ue){for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&(De[$e]=Ue[$e])},de(Se,Oe)},function(Se,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function De(){this.constructor=Se}de(Se,Oe),Se.prototype=Oe===null?Object.create(Oe):(De.prototype=Oe.prototype,new De)}),ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(1512)),be=V(164),ce=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Ee=ne(V(5852)),Ce=function(Se){function Oe(De,Ue,$e){var Fe=Ue.compName,Xe=($e===void 0?{}:$e).theme,Ye=Xe===void 0?"light":Xe,He=Se.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,be.classPrefix)(Fe),He.options={},He.container=De,He.$container=(0,j.default)(De),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,be.getPlatform)()))]),He.on("optionChange",function(Je,pt,It){var At=He.c;Je==="theme"&&(He.$container.rmClass(At("theme-".concat(It))).addClass(At("theme-".concat(pt))),(0,ce.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ye),He}return he(Oe,Se),Oe.prototype.destroy=function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat((0,be.getPlatform)()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(De,Ue){var $e=this,Fe=this.options,Xe={};typeof De=="string"?Xe[De]=Ue:Xe=De,(0,ce.default)(Xe,function(Ye,He){var Je=Fe[He];Fe[He]=Ye,$e.emit("optionChange",He,Ye,Je)})},Oe.prototype.getOption=function(De){return this.options[De]},Oe.prototype.addSubComponent=function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)},Oe.prototype.removeSubComponent=function(De){(0,Ee.default)(this.subComponents,function(Ue){return Ue===De})},Oe.prototype.destroySubComponents=function(){(0,ce.default)(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(De,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(De,Ue),(0,ye.default)(this.options,De)},Oe.prototype.find=function(De){return this.$container.find(this.c(De))},Oe}(Te.default);Q.default=Ce},164:function(q,Q,V){var de=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventClient=Q.drag=Q.classPrefix=void 0;var he=de(V(2461)),ne=de(V(4331)),Te=de(V(5610)),j=de(V(7483)),be=de(V(3990)),ce=de(V(6341)),ye=de(V(3875)),xe=de(V(6954)),Ee=de(V(9585));function Ce($e,Fe){for(var Xe=0,Ye=$e.length;Xe<Ye;Xe++){var He=$e[Xe];Fe(He),He.content&&Ce(He.content,Fe)}}Q.classPrefix=function($e){var Fe="luna-".concat($e,"-");function Xe(Ye){return(0,he.default)((0,ne.default)(Ye).split(/\s+/),function(He){return(0,ce.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Je){return"".concat(Fe).concat(Je)})}).join(" ")}return function(Ye){if(/<[^>]*>/g.test(Ye))try{var He=j.default.parse(Ye);return Ce(He,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Xe(Je.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ye)}return Xe(Ye)}};var Se,Oe="ontouchstart"in Te.default,De={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function($e){return Oe?De[$e]:Ue[$e]},Q.eventClient=function($e,Fe){var Xe=$e==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,be.default)(Se))return Se;if(!document)return 16;var $e=document.createElement("div"),Fe=document.createElement("div");return $e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),$e.appendChild(Fe),document.body.appendChild($e),Se=$e.offsetWidth-$e.clientWidth,document.body.removeChild($e),Se},Q.hasVerticalScrollbar=function($e){return $e.scrollHeight>$e.offsetHeight},Q.executeAfterTransition=function($e,Fe){if((0,Ee.default)($e))return Fe();var Xe=function(Ye){Ye.target===$e&&($e.removeEventListener("transitionend",Xe),Fe())};$e.addEventListener("transitionend",Xe)},Q.pxToNum=function($e){return(0,ye.default)($e.replace("px",""))},Q.getPlatform=function(){var $e=(0,xe.default)();return $e==="os x"?"mac":$e},Q.resetCanvasSize=function($e){$e.width=Math.round($e.offsetWidth*window.devicePixelRatio),$e.height=Math.round($e.offsetHeight*window.devicePixelRatio)}},1717:function(q,Q,V){var de,he=this&&this.__extends||(de=function(It,At){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,rt){bt.__proto__=rt}||function(bt,rt){for(var nt in rt)Object.prototype.hasOwnProperty.call(rt,nt)&&(bt[nt]=rt[nt])},de(It,At)},function(It,At){if(typeof At!="function"&&At!==null)throw new TypeError("Class extends value "+String(At)+" is not a constructor or null");function bt(){this.constructor=It}de(It,At),It.prototype=At===null?Object.create(At):(bt.prototype=At.prototype,new bt)}),ne=this&&this.__importDefault||function(It){return It&&It.__esModule?It:{default:It}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getObjAbstract=void 0;var Te=ne(V(1512)),j=ne(V(6930)),be=ne(V(5166)),ce=ne(V(5229)),ye=ne(V(3023)),xe=ne(V(3875)),Ee=ne(V(996)),Ce=ne(V(3783)),Se=ne(V(9433)),Oe=ne(V(3990)),De=ne(V(4696)),Ue=ne(V(6768)),$e=ne(V(2533)),Fe=ne(V(3063)),Xe=ne(V(6339)),Ye=V(8629),He=function(It){function At(bt){var rt=It.call(this,bt,{compName:"object-viewer"})||this;return rt.onItemClick=function(nt){var it=rt,dt=it.map,lt=it.c,ft=(0,Te.default)(nt.curTarget),xt=ft.data("object-id"),ht=ft.find("span").eq(0);if(!ft.data("first-level")&&(xt&&(ft.find("ul").html(rt.objToHtml(dt[xt],!1)),ft.rmAttr("data-object-id")),nt.stopImmediatePropagation(),ht.hasClass(lt("expanded")))){var Vt=ft.find("ul").eq(0);ht.hasClass(lt("collapsed"))?(ht.rmClass(lt("collapsed")),Vt.show()):(ht.addClass(lt("collapsed")),Vt.hide()),rt.emit("change")}},rt.bindEvent(),rt}return he(At,It),At.prototype.set=function(bt){(0,Ue.default)(bt)&&(bt=JSON.parse(bt)),this.data={id:(0,ce.default)("json"),enumerable:{0:bt}},this.map={},Je(this.map,this.data),this.render()},At.prototype.destroy=function(){It.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},At.prototype.objToHtml=function(bt,rt){var nt=this,it="";return(0,Ce.default)(["enumerable","unenumerable","symbol"],function(dt){if(bt[dt]){var lt=(0,$e.default)(bt[dt]);(0,Xe.default)(lt);for(var ft=0,xt=lt.length;ft<xt;ft++){var ht=lt[ft];it+=nt.createEl(ht,bt[dt][ht],dt,rt)}}}),bt.proto&&(it===""?it=this.objToHtml(bt.proto):it+=this.createEl("__proto__",bt.proto,"proto")),it},At.prototype.createEl=function(bt,rt,nt,it){it===void 0&&(it=!1);var dt=this.c,lt=typeof rt;if(rt===null)return"<li>".concat($t(bt),'<span class="').concat(dt("null"),'">null</span></li>');if((0,Oe.default)(rt)||(0,De.default)(rt))return"<li>".concat($t(bt),'<span class="').concat(dt(lt),'">').concat((0,Ye.encode)(rt),"</span></li>");if(rt.type==="RegExp"&&(lt="regexp"),rt.type==="Number"&&(lt="number"),rt.type==="Number"||rt.type==="RegExp")return"<li>".concat($t(bt),'<span class="').concat(dt(lt),'">').concat((0,Ye.encode)(rt.value),"</span></li>");if(rt.type==="Undefined"||rt.type==="Symbol")return"<li>".concat($t(bt),'<span class="').concat(dt("special"),'">').concat((0,Fe.default)(rt.type),"</span></li>");if(rt==="(...)")return"<li>".concat($t(bt),'<span class="').concat(dt("special"),'">').concat(rt,"</span></li>");if((0,be.default)(rt)){var ft=rt.id,xt=rt.reference,ht=pt(rt)||(0,ye.default)(lt),Vt=it?"":'<span class="'.concat(dt("expanded collapsed"),'"><span class="').concat(dt("icon icon-caret-right"),'"></span><span class="').concat(dt("icon icon-caret-down"),'"></span></span>'),st="<li ".concat(it?'data-first-level="true"':""," ").concat('data-object-id="'+(xt||ft)+'"',">").concat(Vt).concat($t(bt),'<span class="').concat(dt("open"),'">').concat(it?"":ht,'</span><ul class="').concat(dt(lt),'" ').concat(it?"":'style="display:none"',">");return it&&(st+=this.objToHtml(this.map[ft])),st+'</ul><span class="'.concat(dt("close"),'"></span></li>')}function $t(ln){if(it||(0,be.default)(rt)&&rt.jsonSplitArr)return"";var Mn=dt("key");return nt!=="unenumerable"&&nt!=="proto"&&nt!=="symbol"||(Mn=dt("key-lighter")),'<span class="'.concat(Mn,'">').concat((0,Ye.encode)(ln),"</span>: ")}return"<li>".concat($t(bt),'<span class="').concat(dt(typeof rt),'">"').concat((0,Ye.encode)(rt),'"</span></li>')},At.prototype.render=function(){var bt=this.map[this.data.id];this.$container.html(this.objToHtml(bt,!0))},At.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},At}(ne(V(5198)).default);function Je(It,At){var bt=At.id;if(bt||bt===0){if(At.type&&(0,j.default)(At.type,"Array")&&At.enumerable){var rt=function(ft,xt,ht){var Vt=[],st={};return(0,Ce.default)(ft.enumerable,function($t,ln){var Mn=(0,xe.default)(ln);(0,Se.default)(Mn)?st[ln]=$t:Vt[Mn]=$t}),Vt.enumerable=st,Vt.type=ht,Vt.id=xt,ft.unenumerable&&(Vt.unenumerable=ft.unenumerable),ft.symbol&&(Vt.symbol=ft.symbol),ft.proto&&(Vt.proto=ft.proto),Vt}(At,bt,At.type);rt.length>100&&(At=function(ft){var xt=0,ht={};(0,Ce.default)((0,Ee.default)(ft,100),function(st){var $t={},ln=xt;$t.type="["+ln,$t.enumerable={},(0,Ce.default)(st,function(on){$t.enumerable[xt]=on,xt+=1});var Mn=xt-1;$t.type+=(Mn-ln>0?" \u2026 "+Mn:"")+"]",$t.id=(0,ce.default)("json"),$t.jsonSplitArr=!0,ht[xt]=$t});var Vt={};return Vt.enumerable=ht,Vt.id=ft.id,Vt.type=ft.type,ft.unenumerable&&(Vt.unenumerable=ft.unenumerable),ft.symbol&&(Vt.symbol=ft.symbol),ft.proto&&(Vt.proto=ft.proto),Vt}(rt))}It[bt]=At;var nt=[];(0,Ce.default)(["enumerable","unenumerable","symbol"],function(ft){if(At[ft])for(var xt in At[ft])nt.push(At[ft][xt])}),At.proto&&nt.push(At.proto);for(var it=0,dt=nt.length;it<dt;it++){var lt=nt[it];(0,be.default)(lt)&&Je(It,lt)}}}function pt(It){var At=It.type,bt=It.value;if(At)return At==="Function"?(0,Ye.getFnAbstract)(bt):At==="Array"&&It.unenumerable?"Array(".concat(It.unenumerable.length,")"):It.type}Q.default=He,Q.getObjAbstract=pt},3465:function(q,Q,V){var de=this&&this.__importDefault||function(Te){return Te&&Te.__esModule?Te:{default:Te}};Object.defineProperty(Q,"__esModule",{value:!0});var he=de(V(6329)),ne=function(){function Te(){this.id=0,this.visited=[]}return Te.prototype.set=function(j,be){var ce=this.visited,ye=this.id,xe={id:ye,val:j};return(0,he.default)(xe,be),ce.push(xe),this.id++,ye},Te.prototype.get=function(j){for(var be=this.visited,ce=0,ye=be.length;ce<ye;ce++){var xe=be[ce];if(j===xe.val)return xe}return!1},Te}();Q.default=ne},4030:function(q,Q,V){var de,he=this&&this.__extends||(de=function(dt,lt){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,xt){ft.__proto__=xt}||function(ft,xt){for(var ht in xt)Object.prototype.hasOwnProperty.call(xt,ht)&&(ft[ht]=xt[ht])},de(dt,lt)},function(dt,lt){if(typeof lt!="function"&&lt!==null)throw new TypeError("Class extends value "+String(lt)+" is not a constructor or null");function ft(){this.constructor=dt}de(dt,lt),dt.prototype=lt===null?Object.create(lt):(ft.prototype=lt.prototype,new ft)}),ne=this&&this.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.Static=void 0;var Te=ne(V(415)),j=ne(V(3990)),be=ne(V(4696)),ce=ne(V(3063)),ye=ne(V(5166)),xe=ne(V(6472)),Ee=ne(V(3023)),Ce=ne(V(2533)),Se=ne(V(3783)),Oe=ne(V(300)),De=ne(V(4321)),Ue=ne(V(3085)),$e=ne(V(1512)),Fe=ne(V(801)),Xe=ne(V(1116)),Ye=ne(V(5972)),He=ne(V(996)),Je=ne(V(3367)),pt=ne(V(1214)),It=ne(V(6329)),At=ne(V(6339)),bt=ne(V(3465)),rt=V(8629),nt=ne(V(1717));Q.Static=nt.default;var it=function(dt){function lt(ft,xt){xt===void 0&&(xt={});var ht=dt.call(this,ft,{compName:"object-viewer"})||this;return ht.onItemClick=function(Vt){var st=ht,$t=st.map,ln=st.c,Mn=(0,$e.default)(Vt.curTarget),on=Mn.data("object-id"),an=Mn.find("span").eq(0);if(!Mn.data("first-level")&&(on&&(Mn.find("ul").html(ht.objToHtml($t[on],!1)),Mn.rmAttr("data-object-id")),Vt.stopImmediatePropagation(),an.hasClass(ln("expanded")))){var Xt=Mn.find("ul").eq(0);an.hasClass(ln("collapsed"))?(an.rmClass(ln("collapsed")),Xt.show()):(an.addClass(ln("collapsed")),Xt.hide()),ht.emit("change")}},ht.initOptions(xt,{unenumerable:!1,accessGetter:!1}),ht.bindEvent(),ht}return he(lt,dt),lt.prototype.set=function(ft){this.data=[ft],this.visitor=new bt.default,this.map={},this.render()},lt.prototype.destroy=function(){dt.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},lt.prototype.objToHtml=function(ft,xt){var ht=this,Vt=this.visitor,st=ft,$t=!1,ln=Vt.get(ft);ln&&ln.self&&(st=ln.self);var Mn="",on=["enumerable"],an=(0,Ce.default)(ft),Xt=[],Rt=[],en=[],hn={};if(this.options.unenumerable&&!xt&&(on.push("unenumerable"),on.push("symbol"),Xt=(0,Fe.default)((0,Xe.default)(ft,{prototype:!1,unenumerable:!0}),an),Rt=(0,Ye.default)((0,Xe.default)(ft,{prototype:!1,symbol:!0}),function(rn){return typeof rn=="symbol"})),(0,xe.default)(ft)&&ft.length>100){on.unshift("virtual"),$t=!0;var vn=0,Pn={};(0,Se.default)((0,He.default)(ft,100),function(rn){var bn=Object.create(null),En=vn,zn="["+En;(0,Se.default)(rn,function(xn){bn[vn]=xn,Pn[vn]=!0,vn++});var $n=vn-1;hn[zn+=($n-En>0?" \u2026 "+$n:"")+"]"]=bn}),en=(0,Ce.default)(hn),an=(0,Ye.default)(an,function(rn){return!Pn[rn]})}(0,Se.default)(on,function(rn){var bn=[];bn=rn==="symbol"?Rt:rn==="unenumerable"?Xt:rn==="virtual"?en:an,$t||(0,At.default)(bn);for(var En=0,zn=bn.length;En<zn;En++){var $n=(0,Je.default)(bn[En]),xn="",wn=Object.getOwnPropertyDescriptor(ft,$n),Sn=wn&&wn.get,Jn=wn&&wn.set;if(Sn&&!ht.options.accessGetter)xn="(...)";else try{xn=rn==="virtual"?hn[$n]:st[$n],(0,De.default)(xn)&&xn.catch(pt.default)}catch(nr){xn=nr instanceof Error?nr.message:(0,Je.default)(nr)}Mn+=ht.createEl($n,ft,xn,rn,xt),Sn&&(Mn+=ht.createEl("get ".concat($n),ft,wn.get,rn,xt)),Jn&&(Mn+=ht.createEl("set ".concat($n),ft,wn.set,rn,xt))}});var Pt=(0,Te.default)(ft);if(!xt&&Pt)if(Mn===""){var Dt=Vt.set(Pt,{self:ft});this.map[Dt]=Pt,Mn=this.objToHtml(Pt)}else Mn+=this.createEl("__proto__",st||ft,Pt,"proto");return Mn},lt.prototype.createEl=function(ft,xt,ht,Vt,st){st===void 0&&(st=!1);var $t=this.visitor,ln=this.c,Mn=typeof ht,on=(0,Ue.default)(ht,!1);if(Vt==="virtual"&&(on=ft),ht===null)return"<li>".concat(Pn(ft),'<span class="').concat(ln("null"),'">null</span></li>');if((0,j.default)(ht)||(0,be.default)(ht))return"<li>".concat(Pn(ft),'<span class="').concat(ln(Mn),'">').concat((0,rt.encode)(ht),"</span></li>");if(on==="RegExp"&&(Mn="regexp"),on==="Number"&&(Mn="number"),on==="Number"||on==="RegExp")return"<li>".concat(Pn(ft),'<span class="').concat(ln(Mn),'">').concat((0,rt.encode)(ht.value),"</span></li>");if(on==="Undefined"||on==="Symbol")return"<li>".concat(Pn(ft),'<span class="').concat(ln("special"),'">').concat((0,ce.default)(on),"</span></li>");if(ht==="(...)")return"<li>".concat(Pn(ft),'<span class="').concat(ln("special"),'">').concat(ht,"</span></li>");if((0,ye.default)(ht)){var an=$t.get(ht),Xt=void 0;if(an)Xt=an.id;else{var Rt={};Vt==="proto"&&(Rt.self=xt),Xt=$t.set(ht,Rt),this.map[Xt]=ht}var en=function(Pt,Dt){if(!!Dt)return Dt==="Function"?(0,rt.getFnAbstract)((0,Oe.default)(Pt)):Dt==="Array"?"Array(".concat(Pt.length,")"):Dt}(ht,on)||(0,Ee.default)(Mn),hn=st?"":'<span class="'.concat(ln("expanded collapsed"),'"><span class="').concat(ln("icon icon-caret-right"),'"></span><span class="').concat(ln("icon icon-caret-down"),'"></span></span>'),vn="<li ".concat(st?'data-first-level="true"':""," ").concat('data-object-id="'+Xt+'"',">").concat(hn).concat(Pn(ft),'<span class="').concat(ln("open"),'">').concat(st?"":en,'</span><ul class="').concat(ln(Mn),'" ').concat(st?"":'style="display:none"',">");return st&&(vn+=this.objToHtml(ht)),vn+'</ul><span class="'.concat(ln("close"),'"></span></li>')}function Pn(Pt){if(st||(0,ye.default)(ht)&&Vt==="virtual")return"";var Dt=ln("key");return Vt!=="unenumerable"&&Vt!=="proto"&&Vt!=="symbol"||(Dt=ln("key-lighter")),'<span class="'.concat(Dt,'">').concat((0,rt.encode)(Pt),"</span>: ")}return"<li>".concat(Pn(ft),'<span class="').concat(ln(typeof ht),'">"').concat((0,rt.encode)(ht),'"</span></li>')},lt.prototype.render=function(){this.$container.html(this.objToHtml(this.data,!0))},lt.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},lt}(ne(V(5198)).default);Q.default=it,q.exports=(0,It.default)(it,Q),q.exports.default=it},8629:function(q,Q,V){var de=this&&this.__importDefault||function(be){return be&&be.__esModule?be:{default:be}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getFnAbstract=Q.encode=void 0;var he=de(V(3367)),ne=de(V(4331)),Te=de(V(8901));Q.encode=function(be){return(0,Te.default)((0,he.default)(be)).replace(/\n/g,"\u21B5").replace(/\f|\r|\t/g,"")},Q.getFnAbstract=function(be){return be.length>500&&(be=be.slice(0,500)+"..."),"\u0192 "+(0,ne.default)(function(ce){var ye=ce.match(j);return ye?ye[0]:ce}(be).replace("function",""))};var j=/function(.*?)\((.*?)\)/},5198:function(q,Q,V){var de,he=this&&this.__extends||(de=function(Se,Oe){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(De,Ue){De.__proto__=Ue}||function(De,Ue){for(var $e in Ue)Object.prototype.hasOwnProperty.call(Ue,$e)&&(De[$e]=Ue[$e])},de(Se,Oe)},function(Se,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Class extends value "+String(Oe)+" is not a constructor or null");function De(){this.constructor=Se}de(Se,Oe),Se.prototype=Oe===null?Object.create(Oe):(De.prototype=Oe.prototype,new De)}),ne=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(Q,"__esModule",{value:!0});var Te=ne(V(1443)),j=ne(V(1512)),be=V(2702),ce=ne(V(3783)),ye=ne(V(6329)),xe=ne(V(4193)),Ee=ne(V(5852)),Ce=function(Se){function Oe(De,Ue,$e){var Fe=Ue.compName,Xe=($e===void 0?{}:$e).theme,Ye=Xe===void 0?"light":Xe,He=Se.call(this)||this;return He.subComponents=[],He.compName=Fe,He.c=(0,be.classPrefix)(Fe),He.options={},He.container=De,He.$container=(0,j.default)(De),He.$container.addClass(["luna-".concat(Fe),He.c("platform-".concat((0,be.getPlatform)()))]),He.on("optionChange",function(Je,pt,It){var At=He.c;Je==="theme"&&(He.$container.rmClass(At("theme-".concat(It))).addClass(At("theme-".concat(pt))),(0,ce.default)(He.subComponents,function(bt){return bt.setOption("theme",pt)}))}),He.setOption("theme",Ye),He}return he(Oe,Se),Oe.prototype.destroy=function(){this.destroySubComponents();var De=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(De("platform-".concat((0,be.getPlatform)()))).rmClass(De("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Oe.prototype.setOption=function(De,Ue){var $e=this,Fe=this.options,Xe={};typeof De=="string"?Xe[De]=Ue:Xe=De,(0,ce.default)(Xe,function(Ye,He){var Je=Fe[He];Fe[He]=Ye,$e.emit("optionChange",He,Ye,Je)})},Oe.prototype.getOption=function(De){return this.options[De]},Oe.prototype.addSubComponent=function(De){De.setOption("theme",this.options.theme),this.subComponents.push(De)},Oe.prototype.removeSubComponent=function(De){(0,Ee.default)(this.subComponents,function(Ue){return Ue===De})},Oe.prototype.destroySubComponents=function(){(0,ce.default)(this.subComponents,function(De){return De.destroy()}),this.subComponents=[]},Oe.prototype.initOptions=function(De,Ue){Ue===void 0&&(Ue={}),(0,xe.default)(De,Ue),(0,ye.default)(this.options,De)},Oe.prototype.find=function(De){return this.$container.find(this.c(De))},Oe}(Te.default);Q.default=Ce},2702:function(q,Q,V){var de=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.resetCanvasSize=Q.getPlatform=Q.pxToNum=Q.executeAfterTransition=Q.hasVerticalScrollbar=Q.measuredScrollbarWidth=Q.eventClient=Q.drag=Q.classPrefix=void 0;var he=de(V(2461)),ne=de(V(4331)),Te=de(V(5610)),j=de(V(7483)),be=de(V(3990)),ce=de(V(6341)),ye=de(V(3875)),xe=de(V(6954)),Ee=de(V(9585));function Ce($e,Fe){for(var Xe=0,Ye=$e.length;Xe<Ye;Xe++){var He=$e[Xe];Fe(He),He.content&&Ce(He.content,Fe)}}Q.classPrefix=function($e){var Fe="luna-".concat($e,"-");function Xe(Ye){return(0,he.default)((0,ne.default)(Ye).split(/\s+/),function(He){return(0,ce.default)(He,Fe)?He:He.replace(/[\w-]+/,function(Je){return"".concat(Fe).concat(Je)})}).join(" ")}return function(Ye){if(/<[^>]*>/g.test(Ye))try{var He=j.default.parse(Ye);return Ce(He,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Xe(Je.attrs.class))}),j.default.stringify(He)}catch{return Xe(Ye)}return Xe(Ye)}};var Se,Oe="ontouchstart"in Te.default,De={start:"touchstart",move:"touchmove",end:"touchend"},Ue={start:"mousedown",move:"mousemove",end:"mouseup"};Q.drag=function($e){return Oe?De[$e]:Ue[$e]},Q.eventClient=function($e,Fe){var Xe=$e==="x"?"clientX":"clientY";return Fe[Xe]?Fe[Xe]:Fe.changedTouches?Fe.changedTouches[0][Xe]:0},Q.measuredScrollbarWidth=function(){if((0,be.default)(Se))return Se;if(!document)return 16;var $e=document.createElement("div"),Fe=document.createElement("div");return $e.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Fe.setAttribute("style","height: 200px"),$e.appendChild(Fe),document.body.appendChild($e),Se=$e.offsetWidth-$e.clientWidth,document.body.removeChild($e),Se},Q.hasVerticalScrollbar=function($e){return $e.scrollHeight>$e.offsetHeight},Q.executeAfterTransition=function($e,Fe){if((0,Ee.default)($e))return Fe();var Xe=function(Ye){Ye.target===$e&&($e.removeEventListener("transitionend",Xe),Fe())};$e.addEventListener("transitionend",Xe)},Q.pxToNum=function($e){return(0,ye.default)($e.replace("px",""))},Q.getPlatform=function(){var $e=(0,xe.default)();return $e==="os x"?"mac":$e},Q.resetCanvasSize=function($e){$e.width=Math.round($e.offsetWidth*window.devicePixelRatio),$e.height=Math.round($e.offsetHeight*window.devicePixelRatio)}},4842:function(q,Q,V){var de,he;/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */(function(ne,Te){de=[V(4704)],he=function(j){return function(be,ce){function ye(){}var xe=ye.prototype=Object.create(ce.prototype);xe.bindHandles=function(){this._bindHandles(!0)},xe.unbindHandles=function(){this._bindHandles(!1)},xe._bindHandles=function(Se){for(var Oe=(Se=Se===void 0||Se)?"addEventListener":"removeEventListener",De=Se?this._touchActionValue:"",Ue=0;Ue<this.handles.length;Ue++){var $e=this.handles[Ue];this._bindStartEvent($e,Se),$e[Oe]("click",this),be.PointerEvent&&($e.style.touchAction=De)}},xe._touchActionValue="none",xe.pointerDown=function(Se,Oe){this.okayPointerDown(Se)&&(this.pointerDownPointer={pageX:Oe.pageX,pageY:Oe.pageY},Se.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Se),this.emitEvent("pointerDown",[Se,Oe]))};var Ee={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},Ce={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return xe.okayPointerDown=function(Se){var Oe=Ee[Se.target.nodeName],De=Ce[Se.target.type],Ue=!Oe||De;return Ue||this._pointerReset(),Ue},xe.pointerDownBlur=function(){var Se=document.activeElement;Se&&Se.blur&&Se!=document.body&&Se.blur()},xe.pointerMove=function(Se,Oe){var De=this._dragPointerMove(Se,Oe);this.emitEvent("pointerMove",[Se,Oe,De]),this._dragMove(Se,Oe,De)},xe._dragPointerMove=function(Se,Oe){var De={x:Oe.pageX-this.pointerDownPointer.pageX,y:Oe.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(De)&&this._dragStart(Se,Oe),De},xe.hasDragStarted=function(Se){return Math.abs(Se.x)>3||Math.abs(Se.y)>3},xe.pointerUp=function(Se,Oe){this.emitEvent("pointerUp",[Se,Oe]),this._dragPointerUp(Se,Oe)},xe._dragPointerUp=function(Se,Oe){this.isDragging?this._dragEnd(Se,Oe):this._staticClick(Se,Oe)},xe._dragStart=function(Se,Oe){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(Se,Oe)},xe.dragStart=function(Se,Oe){this.emitEvent("dragStart",[Se,Oe])},xe._dragMove=function(Se,Oe,De){this.isDragging&&this.dragMove(Se,Oe,De)},xe.dragMove=function(Se,Oe,De){Se.preventDefault(),this.emitEvent("dragMove",[Se,Oe,De])},xe._dragEnd=function(Se,Oe){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(Se,Oe)},xe.dragEnd=function(Se,Oe){this.emitEvent("dragEnd",[Se,Oe])},xe.onclick=function(Se){this.isPreventingClicks&&Se.preventDefault()},xe._staticClick=function(Se,Oe){this.isIgnoringMouseUp&&Se.type=="mouseup"||(this.staticClick(Se,Oe),Se.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},xe.staticClick=function(Se,Oe){this.emitEvent("staticClick",[Se,Oe])},ye.getPointerPoint=ce.getPointerPoint,ye}(ne,j)}.apply(Q,de),he===void 0||(q.exports=he)})(window)},4704:function(q,Q,V){var de,he;/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */(function(ne,Te){de=[V(7158)],he=function(j){return function(be,ce){function ye(){}function xe(){}var Ee=xe.prototype=Object.create(ce.prototype);Ee.bindStartEvent=function(Se){this._bindStartEvent(Se,!0)},Ee.unbindStartEvent=function(Se){this._bindStartEvent(Se,!1)},Ee._bindStartEvent=function(Se,Oe){var De=(Oe=Oe===void 0||Oe)?"addEventListener":"removeEventListener",Ue="mousedown";"ontouchstart"in be?Ue="touchstart":be.PointerEvent&&(Ue="pointerdown"),Se[De](Ue,this)},Ee.handleEvent=function(Se){var Oe="on"+Se.type;this[Oe]&&this[Oe](Se)},Ee.getTouch=function(Se){for(var Oe=0;Oe<Se.length;Oe++){var De=Se[Oe];if(De.identifier==this.pointerIdentifier)return De}},Ee.onmousedown=function(Se){var Oe=Se.button;Oe&&Oe!==0&&Oe!==1||this._pointerDown(Se,Se)},Ee.ontouchstart=function(Se){this._pointerDown(Se,Se.changedTouches[0])},Ee.onpointerdown=function(Se){this._pointerDown(Se,Se)},Ee._pointerDown=function(Se,Oe){Se.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=Oe.pointerId!==void 0?Oe.pointerId:Oe.identifier,this.pointerDown(Se,Oe))},Ee.pointerDown=function(Se,Oe){this._bindPostStartEvents(Se),this.emitEvent("pointerDown",[Se,Oe])};var Ce={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return Ee._bindPostStartEvents=function(Se){if(Se){var Oe=Ce[Se.type];Oe.forEach(function(De){be.addEventListener(De,this)},this),this._boundPointerEvents=Oe}},Ee._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(Se){be.removeEventListener(Se,this)},this),delete this._boundPointerEvents)},Ee.onmousemove=function(Se){this._pointerMove(Se,Se)},Ee.onpointermove=function(Se){Se.pointerId==this.pointerIdentifier&&this._pointerMove(Se,Se)},Ee.ontouchmove=function(Se){var Oe=this.getTouch(Se.changedTouches);Oe&&this._pointerMove(Se,Oe)},Ee._pointerMove=function(Se,Oe){this.pointerMove(Se,Oe)},Ee.pointerMove=function(Se,Oe){this.emitEvent("pointerMove",[Se,Oe])},Ee.onmouseup=function(Se){this._pointerUp(Se,Se)},Ee.onpointerup=function(Se){Se.pointerId==this.pointerIdentifier&&this._pointerUp(Se,Se)},Ee.ontouchend=function(Se){var Oe=this.getTouch(Se.changedTouches);Oe&&this._pointerUp(Se,Oe)},Ee._pointerUp=function(Se,Oe){this._pointerDone(),this.pointerUp(Se,Oe)},Ee.pointerUp=function(Se,Oe){this.emitEvent("pointerUp",[Se,Oe])},Ee._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},Ee._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},Ee.pointerDone=ye,Ee.onpointercancel=function(Se){Se.pointerId==this.pointerIdentifier&&this._pointerCancel(Se,Se)},Ee.ontouchcancel=function(Se){var Oe=this.getTouch(Se.changedTouches);Oe&&this._pointerCancel(Se,Oe)},Ee._pointerCancel=function(Se,Oe){this._pointerDone(),this.pointerCancel(Se,Oe)},Ee.pointerCancel=function(Se,Oe){this.emitEvent("pointerCancel",[Se,Oe])},xe.getPointerPoint=function(Se){return{x:Se.pageX,y:Se.pageY}},xe}(ne,j)}.apply(Q,de),he===void 0||(q.exports=he)})(window)},8138:function(q,Q,V){q.exports=V(2895).default}},__webpack_module_cache__={};function __webpack_require__(q){var Q=__webpack_module_cache__[q];if(Q!==void 0)return Q.exports;var V=__webpack_module_cache__[q]={id:q,exports:{}};return __webpack_modules__[q].call(V.exports,V,V.exports,__webpack_require__),V.exports}__webpack_require__.n=function(q){var Q=q&&q.__esModule?function(){return q.default}:function(){return q};return __webpack_require__.d(Q,{a:Q}),Q},__webpack_require__.d=function(q,Q){for(var V in Q)__webpack_require__.o(Q,V)&&!__webpack_require__.o(q,V)&&Object.defineProperty(q,V,{enumerable:!0,get:Q[V]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(q,Q){return Object.prototype.hasOwnProperty.call(q,Q)},__webpack_require__.r=function(q){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(8138);return __webpack_exports__}()})})(eruda$1);var eruda=getDefaultExportFromCjs(eruda$1.exports);export{X as $,Ae as A,mapbox as B,render$d as C,toDisplayString as D,render$1 as E,Fragment as F,renderList as G,withDirectives as H,vModelText as I,resolveDynamicComponent as J,render$g as K,render$8 as L,Me as M,render$a as N,normalizeStyle as O,render$b as P,render$6 as Q,RouterView as R,render$e as S,Transition as T,reactive as U,computed as V,useVuelidate as W,render$7 as X,render$2 as Y,render as Z,Y as _,openBlock as a,W as a0,required as a1,email as a2,axios as a3,nextTick as a4,numeric as a5,minLength as a6,sameAs as a7,createStaticVNode as a8,Z as a9,J$1 as aa,render$f as ab,G as ac,render$c as ad,render$3 as ae,render$9 as af,render$4 as ag,withAsyncContext as ah,Suspense as ai,createRouter as aj,createWebHistory as ak,createApp as al,createPinia as am,eruda as an,createVNode as b,createElementBlock as c,defineStore as d,unref as e,oe as f,createBaseVNode as g,render$5 as h,isRef as i,je as j,fe as k,createTextVNode as l,createBlock as m,me as n,onMounted as o,createCommentVNode as p,pe as q,ref as r,src as s,ve as t,useRouter as u,v$2 as v,withCtx as w,normalizeClass as x,fe$1 as y,A as z};
