var o0=Object.defineProperty,a0=Object.defineProperties;var s0=Object.getOwnPropertyDescriptors;var Zd=Object.getOwnPropertySymbols;var Y_=Object.prototype.hasOwnProperty,J_=Object.prototype.propertyIsEnumerable;var K_=(U,G,V)=>G in U?o0(U,G,{enumerable:!0,configurable:!0,writable:!0,value:V}):U[G]=V,Xr=(U,G)=>{for(var V in G||(G={}))Y_.call(G,V)&&K_(U,V,G[V]);if(Zd)for(var V of Zd(G))J_.call(G,V)&&K_(U,V,G[V]);return U},Yo=(U,G)=>a0(U,s0(G));var Es=(U,G)=>{var V={};for(var re in U)Y_.call(U,re)&&G.indexOf(re)<0&&(V[re]=U[re]);if(U!=null&&Zd)for(var re of Zd(U))G.indexOf(re)<0&&J_.call(U,re)&&(V[re]=U[re]);return V};function makeMap(U,G){const V=Object.create(null),re=U.split(",");for(let te=0;te<re.length;te++)V[re[te]]=!0;return G?te=>!!V[te.toLowerCase()]:te=>!!V[te]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(U){return!!U||U===""}function normalizeStyle(U){if(isArray$1(U)){const G={};for(let V=0;V<U.length;V++){const re=U[V],te=isString$1(re)?parseStringStyle(re):normalizeStyle(re);if(te)for(const Q in te)G[Q]=te[Q]}return G}else{if(isString$1(U))return U;if(isObject$1(U))return U}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(U){const G={};return U.split(listDelimiterRE).forEach(V=>{if(V){const re=V.split(propertyDelimiterRE);re.length>1&&(G[re[0].trim()]=re[1].trim())}}),G}function normalizeClass(U){let G="";if(isString$1(U))G=U;else if(isArray$1(U))for(let V=0;V<U.length;V++){const re=normalizeClass(U[V]);re&&(G+=re+" ")}else if(isObject$1(U))for(const V in U)U[V]&&(G+=V+" ");return G.trim()}const toDisplayString=U=>isString$1(U)?U:U==null?"":isArray$1(U)||isObject$1(U)&&(U.toString===objectToString||!isFunction$2(U.toString))?JSON.stringify(U,replacer,2):String(U),replacer=(U,G)=>G&&G.__v_isRef?replacer(U,G.value):isMap(G)?{[`Map(${G.size})`]:[...G.entries()].reduce((V,[re,te])=>(V[`${re} =>`]=te,V),{})}:isSet(G)?{[`Set(${G.size})`]:[...G.values()]}:isObject$1(G)&&!isArray$1(G)&&!isPlainObject$2(G)?String(G):G,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=U=>onRE.test(U),isModelListener=U=>U.startsWith("onUpdate:"),extend$1=Object.assign,remove=(U,G)=>{const V=U.indexOf(G);V>-1&&U.splice(V,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(U,G)=>hasOwnProperty.call(U,G),isArray$1=Array.isArray,isMap=U=>toTypeString(U)==="[object Map]",isSet=U=>toTypeString(U)==="[object Set]",isFunction$2=U=>typeof U=="function",isString$1=U=>typeof U=="string",isSymbol=U=>typeof U=="symbol",isObject$1=U=>U!==null&&typeof U=="object",isPromise=U=>isObject$1(U)&&isFunction$2(U.then)&&isFunction$2(U.catch),objectToString=Object.prototype.toString,toTypeString=U=>objectToString.call(U),toRawType=U=>toTypeString(U).slice(8,-1),isPlainObject$2=U=>toTypeString(U)==="[object Object]",isIntegerKey=U=>isString$1(U)&&U!=="NaN"&&U[0]!=="-"&&""+parseInt(U,10)===U,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=U=>{const G=Object.create(null);return V=>G[V]||(G[V]=U(V))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(U=>U.replace(camelizeRE,(G,V)=>V?V.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(U=>U.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(U=>U.charAt(0).toUpperCase()+U.slice(1)),toHandlerKey=cacheStringFunction(U=>U?`on${capitalize(U)}`:""),hasChanged=(U,G)=>!Object.is(U,G),invokeArrayFns=(U,G)=>{for(let V=0;V<U.length;V++)U[V](G)},def=(U,G,V)=>{Object.defineProperty(U,G,{configurable:!0,enumerable:!1,value:V})},toNumber=U=>{const G=parseFloat(U);return isNaN(G)?U:G};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(G=!1){this.active=!0,this.effects=[],this.cleanups=[],!G&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(G){if(this.active)try{return activeEffectScope=this,G()}finally{activeEffectScope=this.parent}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(G){if(this.active){let V,re;for(V=0,re=this.effects.length;V<re;V++)this.effects[V].stop();for(V=0,re=this.cleanups.length;V<re;V++)this.cleanups[V]();if(this.scopes)for(V=0,re=this.scopes.length;V<re;V++)this.scopes[V].stop(!0);if(this.parent&&!G){const te=this.parent.scopes.pop();te&&te!==this&&(this.parent.scopes[this.index]=te,te.index=this.index)}this.active=!1}}}function effectScope(U){return new EffectScope(U)}function recordEffectScope(U,G=activeEffectScope){G&&G.active&&G.effects.push(U)}const createDep=U=>{const G=new Set(U);return G.w=0,G.n=0,G},wasTracked=U=>(U.w&trackOpBit)>0,newTracked=U=>(U.n&trackOpBit)>0,initDepMarkers=({deps:U})=>{if(U.length)for(let G=0;G<U.length;G++)U[G].w|=trackOpBit},finalizeDepMarkers=U=>{const{deps:G}=U;if(G.length){let V=0;for(let re=0;re<G.length;re++){const te=G[re];wasTracked(te)&&!newTracked(te)?te.delete(U):G[V++]=te,te.w&=~trackOpBit,te.n&=~trackOpBit}G.length=V}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(G,V=null,re){this.fn=G,this.scheduler=V,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,re)}run(){if(!this.active)return this.fn();let G=activeEffect,V=shouldTrack;for(;G;){if(G===this)return;G=G.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=V,this.parent=void 0}}stop(){this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(U){const{deps:G}=U;if(G.length){for(let V=0;V<G.length;V++)G[V].delete(U);G.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const U=trackStack.pop();shouldTrack=U===void 0?!0:U}function track(U,G,V){if(shouldTrack&&activeEffect){let re=targetMap.get(U);re||targetMap.set(U,re=new Map);let te=re.get(V);te||re.set(V,te=createDep()),trackEffects(te)}}function trackEffects(U,G){let V=!1;effectTrackDepth<=maxMarkerBits?newTracked(U)||(U.n|=trackOpBit,V=!wasTracked(U)):V=!U.has(activeEffect),V&&(U.add(activeEffect),activeEffect.deps.push(U))}function trigger$1(U,G,V,re,te,Q){const de=targetMap.get(U);if(!de)return;let I=[];if(G==="clear")I=[...de.values()];else if(V==="length"&&isArray$1(U))de.forEach((_e,ne)=>{(ne==="length"||ne>=re)&&I.push(_e)});else switch(V!==void 0&&I.push(de.get(V)),G){case"add":isArray$1(U)?isIntegerKey(V)&&I.push(de.get("length")):(I.push(de.get(ITERATE_KEY)),isMap(U)&&I.push(de.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(U)||(I.push(de.get(ITERATE_KEY)),isMap(U)&&I.push(de.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(U)&&I.push(de.get(ITERATE_KEY));break}if(I.length===1)I[0]&&triggerEffects(I[0]);else{const _e=[];for(const ne of I)ne&&_e.push(...ne);triggerEffects(createDep(_e))}}function triggerEffects(U,G){for(const V of isArray$1(U)?U:[...U])(V!==activeEffect||V.allowRecurse)&&(V.scheduler?V.scheduler():V.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(U=>Symbol[U]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const U={};return["includes","indexOf","lastIndexOf"].forEach(G=>{U[G]=function(...V){const re=toRaw(this);for(let Q=0,de=this.length;Q<de;Q++)track(re,"get",Q+"");const te=re[G](...V);return te===-1||te===!1?re[G](...V.map(toRaw)):te}}),["push","pop","shift","unshift","splice"].forEach(G=>{U[G]=function(...V){pauseTracking();const re=toRaw(this)[G].apply(this,V);return resetTracking(),re}}),U}function createGetter(U=!1,G=!1){return function(re,te,Q){if(te==="__v_isReactive")return!U;if(te==="__v_isReadonly")return U;if(te==="__v_isShallow")return G;if(te==="__v_raw"&&Q===(U?G?shallowReadonlyMap:readonlyMap:G?shallowReactiveMap:reactiveMap).get(re))return re;const de=isArray$1(re);if(!U&&de&&hasOwn(arrayInstrumentations,te))return Reflect.get(arrayInstrumentations,te,Q);const I=Reflect.get(re,te,Q);return(isSymbol(te)?builtInSymbols.has(te):isNonTrackableKeys(te))||(U||track(re,"get",te),G)?I:isRef(I)?!de||!isIntegerKey(te)?I.value:I:isObject$1(I)?U?readonly(I):reactive(I):I}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(U=!1){return function(V,re,te,Q){let de=V[re];if(isReadonly(de)&&isRef(de)&&!isRef(te))return!1;if(!U&&!isReadonly(te)&&(isShallow(te)||(te=toRaw(te),de=toRaw(de)),!isArray$1(V)&&isRef(de)&&!isRef(te)))return de.value=te,!0;const I=isArray$1(V)&&isIntegerKey(re)?Number(re)<V.length:hasOwn(V,re),_e=Reflect.set(V,re,te,Q);return V===toRaw(Q)&&(I?hasChanged(te,de)&&trigger$1(V,"set",re,te):trigger$1(V,"add",re,te)),_e}}function deleteProperty(U,G){const V=hasOwn(U,G);U[G];const re=Reflect.deleteProperty(U,G);return re&&V&&trigger$1(U,"delete",G,void 0),re}function has(U,G){const V=Reflect.has(U,G);return(!isSymbol(G)||!builtInSymbols.has(G))&&track(U,"has",G),V}function ownKeys$1(U){return track(U,"iterate",isArray$1(U)?"length":ITERATE_KEY),Reflect.ownKeys(U)}const mutableHandlers={get,set,deleteProperty,has,ownKeys:ownKeys$1},readonlyHandlers={get:readonlyGet,set(U,G){return!0},deleteProperty(U,G){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=U=>U,getProto=U=>Reflect.getPrototypeOf(U);function get$1(U,G,V=!1,re=!1){U=U.__v_raw;const te=toRaw(U),Q=toRaw(G);G!==Q&&!V&&track(te,"get",G),!V&&track(te,"get",Q);const{has:de}=getProto(te),I=re?toShallow:V?toReadonly:toReactive;if(de.call(te,G))return I(U.get(G));if(de.call(te,Q))return I(U.get(Q));U!==te&&U.get(G)}function has$1(U,G=!1){const V=this.__v_raw,re=toRaw(V),te=toRaw(U);return U!==te&&!G&&track(re,"has",U),!G&&track(re,"has",te),U===te?V.has(U):V.has(U)||V.has(te)}function size(U,G=!1){return U=U.__v_raw,!G&&track(toRaw(U),"iterate",ITERATE_KEY),Reflect.get(U,"size",U)}function add(U){U=toRaw(U);const G=toRaw(this);return getProto(G).has.call(G,U)||(G.add(U),trigger$1(G,"add",U,U)),this}function set$1(U,G){G=toRaw(G);const V=toRaw(this),{has:re,get:te}=getProto(V);let Q=re.call(V,U);Q||(U=toRaw(U),Q=re.call(V,U));const de=te.call(V,U);return V.set(U,G),Q?hasChanged(G,de)&&trigger$1(V,"set",U,G):trigger$1(V,"add",U,G),this}function deleteEntry(U){const G=toRaw(this),{has:V,get:re}=getProto(G);let te=V.call(G,U);te||(U=toRaw(U),te=V.call(G,U)),re&&re.call(G,U);const Q=G.delete(U);return te&&trigger$1(G,"delete",U,void 0),Q}function clear(){const U=toRaw(this),G=U.size!==0,V=U.clear();return G&&trigger$1(U,"clear",void 0,void 0),V}function createForEach(U,G){return function(re,te){const Q=this,de=Q.__v_raw,I=toRaw(de),_e=G?toShallow:U?toReadonly:toReactive;return!U&&track(I,"iterate",ITERATE_KEY),de.forEach((ne,ge)=>re.call(te,_e(ne),_e(ge),Q))}}function createIterableMethod(U,G,V){return function(...re){const te=this.__v_raw,Q=toRaw(te),de=isMap(Q),I=U==="entries"||U===Symbol.iterator&&de,_e=U==="keys"&&de,ne=te[U](...re),ge=V?toShallow:G?toReadonly:toReactive;return!G&&track(Q,"iterate",_e?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ye,done:xe}=ne.next();return xe?{value:ye,done:xe}:{value:I?[ge(ye[0]),ge(ye[1])]:ge(ye),done:xe}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(U){return function(...G){return U==="delete"?!1:this}}function createInstrumentations(){const U={get(Q){return get$1(this,Q)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},G={get(Q){return get$1(this,Q,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},V={get(Q){return get$1(this,Q,!0)},get size(){return size(this,!0)},has(Q){return has$1.call(this,Q,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},re={get(Q){return get$1(this,Q,!0,!0)},get size(){return size(this,!0)},has(Q){return has$1.call(this,Q,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Q=>{U[Q]=createIterableMethod(Q,!1,!1),V[Q]=createIterableMethod(Q,!0,!1),G[Q]=createIterableMethod(Q,!1,!0),re[Q]=createIterableMethod(Q,!0,!0)}),[U,V,G,re]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(U,G){const V=G?U?shallowReadonlyInstrumentations:shallowInstrumentations:U?readonlyInstrumentations:mutableInstrumentations;return(re,te,Q)=>te==="__v_isReactive"?!U:te==="__v_isReadonly"?U:te==="__v_raw"?re:Reflect.get(hasOwn(V,te)&&te in re?V:re,te,Q)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(U){switch(U){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(U){return U.__v_skip||!Object.isExtensible(U)?0:targetTypeMap(toRawType(U))}function reactive(U){return isReadonly(U)?U:createReactiveObject(U,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(U){return createReactiveObject(U,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(U){return createReactiveObject(U,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(U,G,V,re,te){if(!isObject$1(U)||U.__v_raw&&!(G&&U.__v_isReactive))return U;const Q=te.get(U);if(Q)return Q;const de=getTargetType(U);if(de===0)return U;const I=new Proxy(U,de===2?re:V);return te.set(U,I),I}function isReactive(U){return isReadonly(U)?isReactive(U.__v_raw):!!(U&&U.__v_isReactive)}function isReadonly(U){return!!(U&&U.__v_isReadonly)}function isShallow(U){return!!(U&&U.__v_isShallow)}function isProxy$1(U){return isReactive(U)||isReadonly(U)}function toRaw(U){const G=U&&U.__v_raw;return G?toRaw(G):U}function markRaw(U){return def(U,"__v_skip",!0),U}const toReactive=U=>isObject$1(U)?reactive(U):U,toReadonly=U=>isObject$1(U)?readonly(U):U;function trackRefValue(U){shouldTrack&&activeEffect&&(U=toRaw(U),trackEffects(U.dep||(U.dep=createDep())))}function triggerRefValue(U,G){U=toRaw(U),U.dep&&triggerEffects(U.dep)}function isRef(U){return!!(U&&U.__v_isRef===!0)}function ref(U){return createRef(U,!1)}function shallowRef(U){return createRef(U,!0)}function createRef(U,G){return isRef(U)?U:new RefImpl(U,G)}class RefImpl{constructor(G,V){this.__v_isShallow=V,this.dep=void 0,this.__v_isRef=!0,this._rawValue=V?G:toRaw(G),this._value=V?G:toReactive(G)}get value(){return trackRefValue(this),this._value}set value(G){G=this.__v_isShallow?G:toRaw(G),hasChanged(G,this._rawValue)&&(this._rawValue=G,this._value=this.__v_isShallow?G:toReactive(G),triggerRefValue(this))}}function unref(U){return isRef(U)?U.value:U}const shallowUnwrapHandlers={get:(U,G,V)=>unref(Reflect.get(U,G,V)),set:(U,G,V,re)=>{const te=U[G];return isRef(te)&&!isRef(V)?(te.value=V,!0):Reflect.set(U,G,V,re)}};function proxyRefs(U){return isReactive(U)?U:new Proxy(U,shallowUnwrapHandlers)}function toRefs(U){const G=isArray$1(U)?new Array(U.length):{};for(const V in U)G[V]=toRef(U,V);return G}class ObjectRefImpl{constructor(G,V,re){this._object=G,this._key=V,this._defaultValue=re,this.__v_isRef=!0}get value(){const G=this._object[this._key];return G===void 0?this._defaultValue:G}set value(G){this._object[this._key]=G}}function toRef(U,G,V){const re=U[G];return isRef(re)?re:new ObjectRefImpl(U,G,V)}class ComputedRefImpl{constructor(G,V,re,te){this._setter=V,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(G,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!te,this.__v_isReadonly=re}get value(){const G=toRaw(this);return trackRefValue(G),(G._dirty||!G._cacheable)&&(G._dirty=!1,G._value=G.effect.run()),G._value}set value(G){this._setter(G)}}function computed$1(U,G,V=!1){let re,te;const Q=isFunction$2(U);return Q?(re=U,te=NOOP):(re=U.get,te=U.set),new ComputedRefImpl(re,te,Q||!te,V)}Promise.resolve();function callWithErrorHandling(U,G,V,re){let te;try{te=re?U(...re):U()}catch(Q){handleError(Q,G,V)}return te}function callWithAsyncErrorHandling(U,G,V,re){if(isFunction$2(U)){const Q=callWithErrorHandling(U,G,V,re);return Q&&isPromise(Q)&&Q.catch(de=>{handleError(de,G,V)}),Q}const te=[];for(let Q=0;Q<U.length;Q++)te.push(callWithAsyncErrorHandling(U[Q],G,V,re));return te}function handleError(U,G,V,re=!0){const te=G?G.vnode:null;if(G){let Q=G.parent;const de=G.proxy,I=V;for(;Q;){const ne=Q.ec;if(ne){for(let ge=0;ge<ne.length;ge++)if(ne[ge](U,de,I)===!1)return}Q=Q.parent}const _e=G.appContext.config.errorHandler;if(_e){callWithErrorHandling(_e,null,10,[U,de,I]);return}}logError(U,V,te,re)}function logError(U,G,V,re=!0){console.error(U)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(U){const G=currentFlushPromise||resolvedPromise;return U?G.then(this?U.bind(this):U):G}function findInsertionIndex(U){let G=flushIndex+1,V=queue.length;for(;G<V;){const re=G+V>>>1;getId(queue[re])<U?G=re+1:V=re}return G}function queueJob(U){(!queue.length||!queue.includes(U,isFlushing&&U.allowRecurse?flushIndex+1:flushIndex))&&U!==currentPreFlushParentJob&&(U.id==null?queue.push(U):queue.splice(findInsertionIndex(U.id),0,U),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(U){const G=queue.indexOf(U);G>flushIndex&&queue.splice(G,1)}function queueCb(U,G,V,re){isArray$1(U)?V.push(...U):(!G||!G.includes(U,U.allowRecurse?re+1:re))&&V.push(U),queueFlush()}function queuePreFlushCb(U){queueCb(U,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(U){queueCb(U,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(U,G=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=G,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(U,G)}}function flushPostFlushCbs(U){if(pendingPostFlushCbs.length){const G=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...G);return}for(activePostFlushCbs=G,activePostFlushCbs.sort((V,re)=>getId(V)-getId(re)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=U=>U.id==null?1/0:U.id;function flushJobs(U){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(U),queue.sort((V,re)=>getId(V)-getId(re));const G=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const V=queue[flushIndex];V&&V.active!==!1&&callWithErrorHandling(V,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(U)}}function emit$1(U,G,...V){const re=U.vnode.props||EMPTY_OBJ;let te=V;const Q=G.startsWith("update:"),de=Q&&G.slice(7);if(de&&de in re){const ge=`${de==="modelValue"?"model":de}Modifiers`,{number:ye,trim:xe}=re[ge]||EMPTY_OBJ;xe?te=V.map(we=>we.trim()):ye&&(te=V.map(toNumber))}let I,_e=re[I=toHandlerKey(G)]||re[I=toHandlerKey(camelize(G))];!_e&&Q&&(_e=re[I=toHandlerKey(hyphenate(G))]),_e&&callWithAsyncErrorHandling(_e,U,6,te);const ne=re[I+"Once"];if(ne){if(!U.emitted)U.emitted={};else if(U.emitted[I])return;U.emitted[I]=!0,callWithAsyncErrorHandling(ne,U,6,te)}}function normalizeEmitsOptions(U,G,V=!1){const re=G.emitsCache,te=re.get(U);if(te!==void 0)return te;const Q=U.emits;let de={},I=!1;if(!isFunction$2(U)){const _e=ne=>{const ge=normalizeEmitsOptions(ne,G,!0);ge&&(I=!0,extend$1(de,ge))};!V&&G.mixins.length&&G.mixins.forEach(_e),U.extends&&_e(U.extends),U.mixins&&U.mixins.forEach(_e)}return!Q&&!I?(re.set(U,null),null):(isArray$1(Q)?Q.forEach(_e=>de[_e]=null):extend$1(de,Q),re.set(U,de),de)}function isEmitListener(U,G){return!U||!isOn(G)?!1:(G=G.slice(2).replace(/Once$/,""),hasOwn(U,G[0].toLowerCase()+G.slice(1))||hasOwn(U,hyphenate(G))||hasOwn(U,G))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(U){const G=currentRenderingInstance;return currentRenderingInstance=U,currentScopeId=U&&U.type.__scopeId||null,G}function withCtx(U,G=currentRenderingInstance,V){if(!G||U._n)return U;const re=(...te)=>{re._d&&setBlockTracking(-1);const Q=setCurrentRenderingInstance(G),de=U(...te);return setCurrentRenderingInstance(Q),re._d&&setBlockTracking(1),de};return re._n=!0,re._c=!0,re._d=!0,re}function markAttrsAccessed(){}function renderComponentRoot(U){const{type:G,vnode:V,proxy:re,withProxy:te,props:Q,propsOptions:[de],slots:I,attrs:_e,emit:ne,render:ge,renderCache:ye,data:xe,setupState:we,ctx:ke,inheritAttrs:Se}=U;let Oe,Fe;const ze=setCurrentRenderingInstance(U);try{if(V.shapeFlag&4){const We=te||re;Oe=normalizeVNode(ge.call(We,We,ye,Q,we,xe,ke)),Fe=_e}else{const We=G;Oe=normalizeVNode(We.length>1?We(Q,{attrs:_e,slots:I,emit:ne}):We(Q,null)),Fe=G.props?_e:getFunctionalFallthrough(_e)}}catch(We){blockStack.length=0,handleError(We,U,1),Oe=createVNode(Comment$1)}let Le=Oe;if(Fe&&Se!==!1){const We=Object.keys(Fe),{shapeFlag:qe}=Le;We.length&&qe&7&&(de&&We.some(isModelListener)&&(Fe=filterModelListeners(Fe,de)),Le=cloneVNode(Le,Fe))}return V.dirs&&(Le.dirs=Le.dirs?Le.dirs.concat(V.dirs):V.dirs),V.transition&&(Le.transition=V.transition),Oe=Le,setCurrentRenderingInstance(ze),Oe}function filterSingleRoot(U){let G;for(let V=0;V<U.length;V++){const re=U[V];if(isVNode(re)){if(re.type!==Comment$1||re.children==="v-if"){if(G)return;G=re}}else return}return G}const getFunctionalFallthrough=U=>{let G;for(const V in U)(V==="class"||V==="style"||isOn(V))&&((G||(G={}))[V]=U[V]);return G},filterModelListeners=(U,G)=>{const V={};for(const re in U)(!isModelListener(re)||!(re.slice(9)in G))&&(V[re]=U[re]);return V};function shouldUpdateComponent(U,G,V){const{props:re,children:te,component:Q}=U,{props:de,children:I,patchFlag:_e}=G,ne=Q.emitsOptions;if(G.dirs||G.transition)return!0;if(V&&_e>=0){if(_e&1024)return!0;if(_e&16)return re?hasPropsChanged(re,de,ne):!!de;if(_e&8){const ge=G.dynamicProps;for(let ye=0;ye<ge.length;ye++){const xe=ge[ye];if(de[xe]!==re[xe]&&!isEmitListener(ne,xe))return!0}}}else return(te||I)&&(!I||!I.$stable)?!0:re===de?!1:re?de?hasPropsChanged(re,de,ne):!0:!!de;return!1}function hasPropsChanged(U,G,V){const re=Object.keys(G);if(re.length!==Object.keys(U).length)return!0;for(let te=0;te<re.length;te++){const Q=re[te];if(G[Q]!==U[Q]&&!isEmitListener(V,Q))return!0}return!1}function updateHOCHostEl({vnode:U,parent:G},V){for(;G&&G.subTree===U;)(U=G.vnode).el=V,G=G.parent}const isSuspense=U=>U.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(U,G,V,re,te,Q,de,I,_e,ne){U==null?mountSuspense(G,V,re,te,Q,de,I,_e,ne):patchSuspense(U,G,V,re,te,de,I,_e,ne)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(U,G){const V=U.props&&U.props[G];isFunction$2(V)&&V()}function mountSuspense(U,G,V,re,te,Q,de,I,_e){const{p:ne,o:{createElement:ge}}=_e,ye=ge("div"),xe=U.suspense=createSuspenseBoundary(U,te,re,G,ye,V,Q,de,I,_e);ne(null,xe.pendingBranch=U.ssContent,ye,null,re,xe,Q,de),xe.deps>0?(triggerEvent(U,"onPending"),triggerEvent(U,"onFallback"),ne(null,U.ssFallback,G,V,re,null,Q,de),setActiveBranch(xe,U.ssFallback)):xe.resolve()}function patchSuspense(U,G,V,re,te,Q,de,I,{p:_e,um:ne,o:{createElement:ge}}){const ye=G.suspense=U.suspense;ye.vnode=G,G.el=U.el;const xe=G.ssContent,we=G.ssFallback,{activeBranch:ke,pendingBranch:Se,isInFallback:Oe,isHydrating:Fe}=ye;if(Se)ye.pendingBranch=xe,isSameVNodeType(xe,Se)?(_e(Se,xe,ye.hiddenContainer,null,te,ye,Q,de,I),ye.deps<=0?ye.resolve():Oe&&(_e(ke,we,V,re,te,null,Q,de,I),setActiveBranch(ye,we))):(ye.pendingId++,Fe?(ye.isHydrating=!1,ye.activeBranch=Se):ne(Se,te,ye),ye.deps=0,ye.effects.length=0,ye.hiddenContainer=ge("div"),Oe?(_e(null,xe,ye.hiddenContainer,null,te,ye,Q,de,I),ye.deps<=0?ye.resolve():(_e(ke,we,V,re,te,null,Q,de,I),setActiveBranch(ye,we))):ke&&isSameVNodeType(xe,ke)?(_e(ke,xe,V,re,te,ye,Q,de,I),ye.resolve(!0)):(_e(null,xe,ye.hiddenContainer,null,te,ye,Q,de,I),ye.deps<=0&&ye.resolve()));else if(ke&&isSameVNodeType(xe,ke))_e(ke,xe,V,re,te,ye,Q,de,I),setActiveBranch(ye,xe);else if(triggerEvent(G,"onPending"),ye.pendingBranch=xe,ye.pendingId++,_e(null,xe,ye.hiddenContainer,null,te,ye,Q,de,I),ye.deps<=0)ye.resolve();else{const{timeout:ze,pendingId:Le}=ye;ze>0?setTimeout(()=>{ye.pendingId===Le&&ye.fallback(we)},ze):ze===0&&ye.fallback(we)}}function createSuspenseBoundary(U,G,V,re,te,Q,de,I,_e,ne,ge=!1){const{p:ye,m:xe,um:we,n:ke,o:{parentNode:Se,remove:Oe}}=ne,Fe=toNumber(U.props&&U.props.timeout),ze={vnode:U,parent:G,parentComponent:V,isSVG:de,container:re,hiddenContainer:te,anchor:Q,deps:0,pendingId:0,timeout:typeof Fe=="number"?Fe:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:ge,isUnmounted:!1,effects:[],resolve(Le=!1){const{vnode:We,activeBranch:qe,pendingBranch:Ne,pendingId:Ke,effects:ot,parentComponent:yt,container:ft}=ze;if(ze.isHydrating)ze.isHydrating=!1;else if(!Le){const Qe=qe&&Ne.transition&&Ne.transition.mode==="out-in";Qe&&(qe.transition.afterLeave=()=>{Ke===ze.pendingId&&xe(Ne,ft,tt,0)});let{anchor:tt}=ze;qe&&(tt=ke(qe),we(qe,yt,ze,!0)),Qe||xe(Ne,ft,tt,0)}setActiveBranch(ze,Ne),ze.pendingBranch=null,ze.isInFallback=!1;let _t=ze.parent,Je=!1;for(;_t;){if(_t.pendingBranch){_t.effects.push(...ot),Je=!0;break}_t=_t.parent}Je||queuePostFlushCb(ot),ze.effects=[],triggerEvent(We,"onResolve")},fallback(Le){if(!ze.pendingBranch)return;const{vnode:We,activeBranch:qe,parentComponent:Ne,container:Ke,isSVG:ot}=ze;triggerEvent(We,"onFallback");const yt=ke(qe),ft=()=>{!ze.isInFallback||(ye(null,Le,Ke,yt,Ne,null,ot,I,_e),setActiveBranch(ze,Le))},_t=Le.transition&&Le.transition.mode==="out-in";_t&&(qe.transition.afterLeave=ft),ze.isInFallback=!0,we(qe,Ne,null,!0),_t||ft()},move(Le,We,qe){ze.activeBranch&&xe(ze.activeBranch,Le,We,qe),ze.container=Le},next(){return ze.activeBranch&&ke(ze.activeBranch)},registerDep(Le,We){const qe=!!ze.pendingBranch;qe&&ze.deps++;const Ne=Le.vnode.el;Le.asyncDep.catch(Ke=>{handleError(Ke,Le,0)}).then(Ke=>{if(Le.isUnmounted||ze.isUnmounted||ze.pendingId!==Le.suspenseId)return;Le.asyncResolved=!0;const{vnode:ot}=Le;handleSetupResult(Le,Ke,!1),Ne&&(ot.el=Ne);const yt=!Ne&&Le.subTree.el;We(Le,ot,Se(Ne||Le.subTree.el),Ne?null:ke(Le.subTree),ze,de,_e),yt&&Oe(yt),updateHOCHostEl(Le,ot.el),qe&&--ze.deps===0&&ze.resolve()})},unmount(Le,We){ze.isUnmounted=!0,ze.activeBranch&&we(ze.activeBranch,V,Le,We),ze.pendingBranch&&we(ze.pendingBranch,V,Le,We)}};return ze}function hydrateSuspense(U,G,V,re,te,Q,de,I,_e){const ne=G.suspense=createSuspenseBoundary(G,re,V,U.parentNode,document.createElement("div"),null,te,Q,de,I,!0),ge=_e(U,ne.pendingBranch=G.ssContent,V,ne,Q,de);return ne.deps===0&&ne.resolve(),ge}function normalizeSuspenseChildren(U){const{shapeFlag:G,children:V}=U,re=G&32;U.ssContent=normalizeSuspenseSlot(re?V.default:V),U.ssFallback=re?normalizeSuspenseSlot(V.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(U){let G;if(isFunction$2(U)){const V=isBlockTreeEnabled&&U._c;V&&(U._d=!1,openBlock()),U=U(),V&&(U._d=!0,G=currentBlock,closeBlock())}return isArray$1(U)&&(U=filterSingleRoot(U)),U=normalizeVNode(U),G&&!U.dynamicChildren&&(U.dynamicChildren=G.filter(V=>V!==U)),U}function queueEffectWithSuspense(U,G){G&&G.pendingBranch?isArray$1(U)?G.effects.push(...U):G.effects.push(U):queuePostFlushCb(U)}function setActiveBranch(U,G){U.activeBranch=G;const{vnode:V,parentComponent:re}=U,te=V.el=G.el;re&&re.subTree===V&&(re.vnode.el=te,updateHOCHostEl(re,te))}function provide(U,G){if(currentInstance){let V=currentInstance.provides;const re=currentInstance.parent&&currentInstance.parent.provides;re===V&&(V=currentInstance.provides=Object.create(re)),V[U]=G}}function inject(U,G,V=!1){const re=currentInstance||currentRenderingInstance;if(re){const te=re.parent==null?re.vnode.appContext&&re.vnode.appContext.provides:re.parent.provides;if(te&&U in te)return te[U];if(arguments.length>1)return V&&isFunction$2(G)?G.call(re.proxy):G}}function watchEffect(U,G){return doWatch(U,null,G)}const INITIAL_WATCHER_VALUE={};function watch(U,G,V){return doWatch(U,G,V)}function doWatch(U,G,{immediate:V,deep:re,flush:te,onTrack:Q,onTrigger:de}=EMPTY_OBJ){const I=currentInstance;let _e,ne=!1,ge=!1;if(isRef(U)?(_e=()=>U.value,ne=isShallow(U)):isReactive(U)?(_e=()=>U,re=!0):isArray$1(U)?(ge=!0,ne=U.some(isReactive),_e=()=>U.map(Fe=>{if(isRef(Fe))return Fe.value;if(isReactive(Fe))return traverse(Fe);if(isFunction$2(Fe))return callWithErrorHandling(Fe,I,2)})):isFunction$2(U)?G?_e=()=>callWithErrorHandling(U,I,2):_e=()=>{if(!(I&&I.isUnmounted))return ye&&ye(),callWithAsyncErrorHandling(U,I,3,[xe])}:_e=NOOP,G&&re){const Fe=_e;_e=()=>traverse(Fe())}let ye,xe=Fe=>{ye=Oe.onStop=()=>{callWithErrorHandling(Fe,I,4)}};if(isInSSRComponentSetup)return xe=NOOP,G?V&&callWithAsyncErrorHandling(G,I,3,[_e(),ge?[]:void 0,xe]):_e(),NOOP;let we=ge?[]:INITIAL_WATCHER_VALUE;const ke=()=>{if(!!Oe.active)if(G){const Fe=Oe.run();(re||ne||(ge?Fe.some((ze,Le)=>hasChanged(ze,we[Le])):hasChanged(Fe,we)))&&(ye&&ye(),callWithAsyncErrorHandling(G,I,3,[Fe,we===INITIAL_WATCHER_VALUE?void 0:we,xe]),we=Fe)}else Oe.run()};ke.allowRecurse=!!G;let Se;te==="sync"?Se=ke:te==="post"?Se=()=>queuePostRenderEffect(ke,I&&I.suspense):Se=()=>{!I||I.isMounted?queuePreFlushCb(ke):ke()};const Oe=new ReactiveEffect(_e,Se);return G?V?ke():we=Oe.run():te==="post"?queuePostRenderEffect(Oe.run.bind(Oe),I&&I.suspense):Oe.run(),()=>{Oe.stop(),I&&I.scope&&remove(I.scope.effects,Oe)}}function instanceWatch(U,G,V){const re=this.proxy,te=isString$1(U)?U.includes(".")?createPathGetter(re,U):()=>re[U]:U.bind(re,re);let Q;isFunction$2(G)?Q=G:(Q=G.handler,V=G);const de=currentInstance;setCurrentInstance(this);const I=doWatch(te,Q.bind(re),V);return de?setCurrentInstance(de):unsetCurrentInstance(),I}function createPathGetter(U,G){const V=G.split(".");return()=>{let re=U;for(let te=0;te<V.length&&re;te++)re=re[V[te]];return re}}function traverse(U,G){if(!isObject$1(U)||U.__v_skip||(G=G||new Set,G.has(U)))return U;if(G.add(U),isRef(U))traverse(U.value,G);else if(isArray$1(U))for(let V=0;V<U.length;V++)traverse(U[V],G);else if(isSet(U)||isMap(U))U.forEach(V=>{traverse(V,G)});else if(isPlainObject$2(U))for(const V in U)traverse(U[V],G);return U}function useTransitionState(){const U={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{U.isMounted=!0}),onBeforeUnmount(()=>{U.isUnmounting=!0}),U}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(U,{slots:G}){const V=getCurrentInstance(),re=useTransitionState();let te;return()=>{const Q=G.default&&getTransitionRawChildren(G.default(),!0);if(!Q||!Q.length)return;const de=toRaw(U),{mode:I}=de,_e=Q[0];if(re.isLeaving)return emptyPlaceholder(_e);const ne=getKeepAliveChild(_e);if(!ne)return emptyPlaceholder(_e);const ge=resolveTransitionHooks(ne,de,re,V);setTransitionHooks(ne,ge);const ye=V.subTree,xe=ye&&getKeepAliveChild(ye);let we=!1;const{getTransitionKey:ke}=ne.type;if(ke){const Se=ke();te===void 0?te=Se:Se!==te&&(te=Se,we=!0)}if(xe&&xe.type!==Comment$1&&(!isSameVNodeType(ne,xe)||we)){const Se=resolveTransitionHooks(xe,de,re,V);if(setTransitionHooks(xe,Se),I==="out-in")return re.isLeaving=!0,Se.afterLeave=()=>{re.isLeaving=!1,V.update()},emptyPlaceholder(_e);I==="in-out"&&ne.type!==Comment$1&&(Se.delayLeave=(Oe,Fe,ze)=>{const Le=getLeavingNodesForType(re,xe);Le[String(xe.key)]=xe,Oe._leaveCb=()=>{Fe(),Oe._leaveCb=void 0,delete ge.delayedLeave},ge.delayedLeave=ze})}return _e}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(U,G){const{leavingVNodes:V}=U;let re=V.get(G.type);return re||(re=Object.create(null),V.set(G.type,re)),re}function resolveTransitionHooks(U,G,V,re){const{appear:te,mode:Q,persisted:de=!1,onBeforeEnter:I,onEnter:_e,onAfterEnter:ne,onEnterCancelled:ge,onBeforeLeave:ye,onLeave:xe,onAfterLeave:we,onLeaveCancelled:ke,onBeforeAppear:Se,onAppear:Oe,onAfterAppear:Fe,onAppearCancelled:ze}=G,Le=String(U.key),We=getLeavingNodesForType(V,U),qe=(Ke,ot)=>{Ke&&callWithAsyncErrorHandling(Ke,re,9,ot)},Ne={mode:Q,persisted:de,beforeEnter(Ke){let ot=I;if(!V.isMounted)if(te)ot=Se||I;else return;Ke._leaveCb&&Ke._leaveCb(!0);const yt=We[Le];yt&&isSameVNodeType(U,yt)&&yt.el._leaveCb&&yt.el._leaveCb(),qe(ot,[Ke])},enter(Ke){let ot=_e,yt=ne,ft=ge;if(!V.isMounted)if(te)ot=Oe||_e,yt=Fe||ne,ft=ze||ge;else return;let _t=!1;const Je=Ke._enterCb=Qe=>{_t||(_t=!0,Qe?qe(ft,[Ke]):qe(yt,[Ke]),Ne.delayedLeave&&Ne.delayedLeave(),Ke._enterCb=void 0)};ot?(ot(Ke,Je),ot.length<=1&&Je()):Je()},leave(Ke,ot){const yt=String(U.key);if(Ke._enterCb&&Ke._enterCb(!0),V.isUnmounting)return ot();qe(ye,[Ke]);let ft=!1;const _t=Ke._leaveCb=Je=>{ft||(ft=!0,ot(),Je?qe(ke,[Ke]):qe(we,[Ke]),Ke._leaveCb=void 0,We[yt]===U&&delete We[yt])};We[yt]=U,xe?(xe(Ke,_t),xe.length<=1&&_t()):_t()},clone(Ke){return resolveTransitionHooks(Ke,G,V,re)}};return Ne}function emptyPlaceholder(U){if(isKeepAlive(U))return U=cloneVNode(U),U.children=null,U}function getKeepAliveChild(U){return isKeepAlive(U)?U.children?U.children[0]:void 0:U}function setTransitionHooks(U,G){U.shapeFlag&6&&U.component?setTransitionHooks(U.component.subTree,G):U.shapeFlag&128?(U.ssContent.transition=G.clone(U.ssContent),U.ssFallback.transition=G.clone(U.ssFallback)):U.transition=G}function getTransitionRawChildren(U,G=!1){let V=[],re=0;for(let te=0;te<U.length;te++){const Q=U[te];Q.type===Fragment?(Q.patchFlag&128&&re++,V=V.concat(getTransitionRawChildren(Q.children,G))):(G||Q.type!==Comment$1)&&V.push(Q)}if(re>1)for(let te=0;te<V.length;te++)V[te].patchFlag=-2;return V}function defineComponent(U){return isFunction$2(U)?{setup:U,name:U.name}:U}const isAsyncWrapper=U=>!!U.type.__asyncLoader,isKeepAlive=U=>U.type.__isKeepAlive;function onActivated(U,G){registerKeepAliveHook(U,"a",G)}function onDeactivated(U,G){registerKeepAliveHook(U,"da",G)}function registerKeepAliveHook(U,G,V=currentInstance){const re=U.__wdc||(U.__wdc=()=>{let te=V;for(;te;){if(te.isDeactivated)return;te=te.parent}return U()});if(injectHook(G,re,V),V){let te=V.parent;for(;te&&te.parent;)isKeepAlive(te.parent.vnode)&&injectToKeepAliveRoot(re,G,V,te),te=te.parent}}function injectToKeepAliveRoot(U,G,V,re){const te=injectHook(G,U,re,!0);onUnmounted(()=>{remove(re[G],te)},V)}function injectHook(U,G,V=currentInstance,re=!1){if(V){const te=V[U]||(V[U]=[]),Q=G.__weh||(G.__weh=(...de)=>{if(V.isUnmounted)return;pauseTracking(),setCurrentInstance(V);const I=callWithAsyncErrorHandling(G,V,U,de);return unsetCurrentInstance(),resetTracking(),I});return re?te.unshift(Q):te.push(Q),Q}}const createHook=U=>(G,V=currentInstance)=>(!isInSSRComponentSetup||U==="sp")&&injectHook(U,G,V),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(U,G=currentInstance){injectHook("ec",U,G)}let shouldCacheAccess=!0;function applyOptions(U){const G=resolveMergedOptions(U),V=U.proxy,re=U.ctx;shouldCacheAccess=!1,G.beforeCreate&&callHook$1(G.beforeCreate,U,"bc");const{data:te,computed:Q,methods:de,watch:I,provide:_e,inject:ne,created:ge,beforeMount:ye,mounted:xe,beforeUpdate:we,updated:ke,activated:Se,deactivated:Oe,beforeDestroy:Fe,beforeUnmount:ze,destroyed:Le,unmounted:We,render:qe,renderTracked:Ne,renderTriggered:Ke,errorCaptured:ot,serverPrefetch:yt,expose:ft,inheritAttrs:_t,components:Je,directives:Qe,filters:tt}=G;if(ne&&resolveInjections(ne,re,null,U.appContext.config.unwrapInjectedRef),de)for(const pt in de){const vt=de[pt];isFunction$2(vt)&&(re[pt]=vt.bind(V))}if(te){const pt=te.call(V,V);isObject$1(pt)&&(U.data=reactive(pt))}if(shouldCacheAccess=!0,Q)for(const pt in Q){const vt=Q[pt],ut=isFunction$2(vt)?vt.bind(V,V):isFunction$2(vt.get)?vt.get.bind(V,V):NOOP,Nt=!isFunction$2(vt)&&isFunction$2(vt.set)?vt.set.bind(V):NOOP,at=computed({get:ut,set:Nt});Object.defineProperty(re,pt,{enumerable:!0,configurable:!0,get:()=>at.value,set:Mt=>at.value=Mt})}if(I)for(const pt in I)createWatcher(I[pt],re,V,pt);if(_e){const pt=isFunction$2(_e)?_e.call(V):_e;Reflect.ownKeys(pt).forEach(vt=>{provide(vt,pt[vt])})}ge&&callHook$1(ge,U,"c");function it(pt,vt){isArray$1(vt)?vt.forEach(ut=>pt(ut.bind(V))):vt&&pt(vt.bind(V))}if(it(onBeforeMount,ye),it(onMounted,xe),it(onBeforeUpdate,we),it(onUpdated,ke),it(onActivated,Se),it(onDeactivated,Oe),it(onErrorCaptured,ot),it(onRenderTracked,Ne),it(onRenderTriggered,Ke),it(onBeforeUnmount,ze),it(onUnmounted,We),it(onServerPrefetch,yt),isArray$1(ft))if(ft.length){const pt=U.exposed||(U.exposed={});ft.forEach(vt=>{Object.defineProperty(pt,vt,{get:()=>V[vt],set:ut=>V[vt]=ut})})}else U.exposed||(U.exposed={});qe&&U.render===NOOP&&(U.render=qe),_t!=null&&(U.inheritAttrs=_t),Je&&(U.components=Je),Qe&&(U.directives=Qe)}function resolveInjections(U,G,V=NOOP,re=!1){isArray$1(U)&&(U=normalizeInject(U));for(const te in U){const Q=U[te];let de;isObject$1(Q)?"default"in Q?de=inject(Q.from||te,Q.default,!0):de=inject(Q.from||te):de=inject(Q),isRef(de)&&re?Object.defineProperty(G,te,{enumerable:!0,configurable:!0,get:()=>de.value,set:I=>de.value=I}):G[te]=de}}function callHook$1(U,G,V){callWithAsyncErrorHandling(isArray$1(U)?U.map(re=>re.bind(G.proxy)):U.bind(G.proxy),G,V)}function createWatcher(U,G,V,re){const te=re.includes(".")?createPathGetter(V,re):()=>V[re];if(isString$1(U)){const Q=G[U];isFunction$2(Q)&&watch(te,Q)}else if(isFunction$2(U))watch(te,U.bind(V));else if(isObject$1(U))if(isArray$1(U))U.forEach(Q=>createWatcher(Q,G,V,re));else{const Q=isFunction$2(U.handler)?U.handler.bind(V):G[U.handler];isFunction$2(Q)&&watch(te,Q,U)}}function resolveMergedOptions(U){const G=U.type,{mixins:V,extends:re}=G,{mixins:te,optionsCache:Q,config:{optionMergeStrategies:de}}=U.appContext,I=Q.get(G);let _e;return I?_e=I:!te.length&&!V&&!re?_e=G:(_e={},te.length&&te.forEach(ne=>mergeOptions$1(_e,ne,de,!0)),mergeOptions$1(_e,G,de)),Q.set(G,_e),_e}function mergeOptions$1(U,G,V,re=!1){const{mixins:te,extends:Q}=G;Q&&mergeOptions$1(U,Q,V,!0),te&&te.forEach(de=>mergeOptions$1(U,de,V,!0));for(const de in G)if(!(re&&de==="expose")){const I=internalOptionMergeStrats[de]||V&&V[de];U[de]=I?I(U[de],G[de]):G[de]}return U}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(U,G){return G?U?function(){return extend$1(isFunction$2(U)?U.call(this,this):U,isFunction$2(G)?G.call(this,this):G)}:G:U}function mergeInject(U,G){return mergeObjectOptions(normalizeInject(U),normalizeInject(G))}function normalizeInject(U){if(isArray$1(U)){const G={};for(let V=0;V<U.length;V++)G[U[V]]=U[V];return G}return U}function mergeAsArray(U,G){return U?[...new Set([].concat(U,G))]:G}function mergeObjectOptions(U,G){return U?extend$1(extend$1(Object.create(null),U),G):G}function mergeWatchOptions(U,G){if(!U)return G;if(!G)return U;const V=extend$1(Object.create(null),U);for(const re in G)V[re]=mergeAsArray(U[re],G[re]);return V}function initProps(U,G,V,re=!1){const te={},Q={};def(Q,InternalObjectKey,1),U.propsDefaults=Object.create(null),setFullProps(U,G,te,Q);for(const de in U.propsOptions[0])de in te||(te[de]=void 0);V?U.props=re?te:shallowReactive(te):U.type.props?U.props=te:U.props=Q,U.attrs=Q}function updateProps(U,G,V,re){const{props:te,attrs:Q,vnode:{patchFlag:de}}=U,I=toRaw(te),[_e]=U.propsOptions;let ne=!1;if((re||de>0)&&!(de&16)){if(de&8){const ge=U.vnode.dynamicProps;for(let ye=0;ye<ge.length;ye++){let xe=ge[ye];const we=G[xe];if(_e)if(hasOwn(Q,xe))we!==Q[xe]&&(Q[xe]=we,ne=!0);else{const ke=camelize(xe);te[ke]=resolvePropValue(_e,I,ke,we,U,!1)}else we!==Q[xe]&&(Q[xe]=we,ne=!0)}}}else{setFullProps(U,G,te,Q)&&(ne=!0);let ge;for(const ye in I)(!G||!hasOwn(G,ye)&&((ge=hyphenate(ye))===ye||!hasOwn(G,ge)))&&(_e?V&&(V[ye]!==void 0||V[ge]!==void 0)&&(te[ye]=resolvePropValue(_e,I,ye,void 0,U,!0)):delete te[ye]);if(Q!==I)for(const ye in Q)(!G||!hasOwn(G,ye)&&!0)&&(delete Q[ye],ne=!0)}ne&&trigger$1(U,"set","$attrs")}function setFullProps(U,G,V,re){const[te,Q]=U.propsOptions;let de=!1,I;if(G)for(let _e in G){if(isReservedProp(_e))continue;const ne=G[_e];let ge;te&&hasOwn(te,ge=camelize(_e))?!Q||!Q.includes(ge)?V[ge]=ne:(I||(I={}))[ge]=ne:isEmitListener(U.emitsOptions,_e)||(!(_e in re)||ne!==re[_e])&&(re[_e]=ne,de=!0)}if(Q){const _e=toRaw(V),ne=I||EMPTY_OBJ;for(let ge=0;ge<Q.length;ge++){const ye=Q[ge];V[ye]=resolvePropValue(te,_e,ye,ne[ye],U,!hasOwn(ne,ye))}}return de}function resolvePropValue(U,G,V,re,te,Q){const de=U[V];if(de!=null){const I=hasOwn(de,"default");if(I&&re===void 0){const _e=de.default;if(de.type!==Function&&isFunction$2(_e)){const{propsDefaults:ne}=te;V in ne?re=ne[V]:(setCurrentInstance(te),re=ne[V]=_e.call(null,G),unsetCurrentInstance())}else re=_e}de[0]&&(Q&&!I?re=!1:de[1]&&(re===""||re===hyphenate(V))&&(re=!0))}return re}function normalizePropsOptions(U,G,V=!1){const re=G.propsCache,te=re.get(U);if(te)return te;const Q=U.props,de={},I=[];let _e=!1;if(!isFunction$2(U)){const ge=ye=>{_e=!0;const[xe,we]=normalizePropsOptions(ye,G,!0);extend$1(de,xe),we&&I.push(...we)};!V&&G.mixins.length&&G.mixins.forEach(ge),U.extends&&ge(U.extends),U.mixins&&U.mixins.forEach(ge)}if(!Q&&!_e)return re.set(U,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Q))for(let ge=0;ge<Q.length;ge++){const ye=camelize(Q[ge]);validatePropName(ye)&&(de[ye]=EMPTY_OBJ)}else if(Q)for(const ge in Q){const ye=camelize(ge);if(validatePropName(ye)){const xe=Q[ge],we=de[ye]=isArray$1(xe)||isFunction$2(xe)?{type:xe}:xe;if(we){const ke=getTypeIndex(Boolean,we.type),Se=getTypeIndex(String,we.type);we[0]=ke>-1,we[1]=Se<0||ke<Se,(ke>-1||hasOwn(we,"default"))&&I.push(ye)}}}const ne=[de,I];return re.set(U,ne),ne}function validatePropName(U){return U[0]!=="$"}function getType(U){const G=U&&U.toString().match(/^\s*function (\w+)/);return G?G[1]:U===null?"null":""}function isSameType(U,G){return getType(U)===getType(G)}function getTypeIndex(U,G){return isArray$1(G)?G.findIndex(V=>isSameType(V,U)):isFunction$2(G)&&isSameType(G,U)?0:-1}const isInternalKey=U=>U[0]==="_"||U==="$stable",normalizeSlotValue=U=>isArray$1(U)?U.map(normalizeVNode):[normalizeVNode(U)],normalizeSlot$1=(U,G,V)=>{const re=withCtx((...te)=>normalizeSlotValue(G(...te)),V);return re._c=!1,re},normalizeObjectSlots=(U,G,V)=>{const re=U._ctx;for(const te in U){if(isInternalKey(te))continue;const Q=U[te];if(isFunction$2(Q))G[te]=normalizeSlot$1(te,Q,re);else if(Q!=null){const de=normalizeSlotValue(Q);G[te]=()=>de}}},normalizeVNodeSlots=(U,G)=>{const V=normalizeSlotValue(G);U.slots.default=()=>V},initSlots=(U,G)=>{if(U.vnode.shapeFlag&32){const V=G._;V?(U.slots=toRaw(G),def(G,"_",V)):normalizeObjectSlots(G,U.slots={})}else U.slots={},G&&normalizeVNodeSlots(U,G);def(U.slots,InternalObjectKey,1)},updateSlots=(U,G,V)=>{const{vnode:re,slots:te}=U;let Q=!0,de=EMPTY_OBJ;if(re.shapeFlag&32){const I=G._;I?V&&I===1?Q=!1:(extend$1(te,G),!V&&I===1&&delete te._):(Q=!G.$stable,normalizeObjectSlots(G,te)),de=G}else G&&(normalizeVNodeSlots(U,G),de={default:1});if(Q)for(const I in te)!isInternalKey(I)&&!(I in de)&&delete te[I]};function withDirectives(U,G){const V=currentRenderingInstance;if(V===null)return U;const re=V.proxy,te=U.dirs||(U.dirs=[]);for(let Q=0;Q<G.length;Q++){let[de,I,_e,ne=EMPTY_OBJ]=G[Q];isFunction$2(de)&&(de={mounted:de,updated:de}),de.deep&&traverse(I),te.push({dir:de,instance:re,value:I,oldValue:void 0,arg:_e,modifiers:ne})}return U}function invokeDirectiveHook(U,G,V,re){const te=U.dirs,Q=G&&G.dirs;for(let de=0;de<te.length;de++){const I=te[de];Q&&(I.oldValue=Q[de].value);let _e=I.dir[re];_e&&(pauseTracking(),callWithAsyncErrorHandling(_e,V,8,[U.el,I,U,G]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(U,G){return function(re,te=null){te!=null&&!isObject$1(te)&&(te=null);const Q=createAppContext(),de=new Set;let I=!1;const _e=Q.app={_uid:uid++,_component:re,_props:te,_container:null,_context:Q,_instance:null,version,get config(){return Q.config},set config(ne){},use(ne,...ge){return de.has(ne)||(ne&&isFunction$2(ne.install)?(de.add(ne),ne.install(_e,...ge)):isFunction$2(ne)&&(de.add(ne),ne(_e,...ge))),_e},mixin(ne){return Q.mixins.includes(ne)||Q.mixins.push(ne),_e},component(ne,ge){return ge?(Q.components[ne]=ge,_e):Q.components[ne]},directive(ne,ge){return ge?(Q.directives[ne]=ge,_e):Q.directives[ne]},mount(ne,ge,ye){if(!I){const xe=createVNode(re,te);return xe.appContext=Q,ge&&G?G(xe,ne):U(xe,ne,ye),I=!0,_e._container=ne,ne.__vue_app__=_e,getExposeProxy(xe.component)||xe.component.proxy}},unmount(){I&&(U(null,_e._container),delete _e._container.__vue_app__)},provide(ne,ge){return Q.provides[ne]=ge,_e}};return _e}}function setRef(U,G,V,re,te=!1){if(isArray$1(U)){U.forEach((xe,we)=>setRef(xe,G&&(isArray$1(G)?G[we]:G),V,re,te));return}if(isAsyncWrapper(re)&&!te)return;const Q=re.shapeFlag&4?getExposeProxy(re.component)||re.component.proxy:re.el,de=te?null:Q,{i:I,r:_e}=U,ne=G&&G.r,ge=I.refs===EMPTY_OBJ?I.refs={}:I.refs,ye=I.setupState;if(ne!=null&&ne!==_e&&(isString$1(ne)?(ge[ne]=null,hasOwn(ye,ne)&&(ye[ne]=null)):isRef(ne)&&(ne.value=null)),isFunction$2(_e))callWithErrorHandling(_e,I,12,[de,ge]);else{const xe=isString$1(_e),we=isRef(_e);if(xe||we){const ke=()=>{if(U.f){const Se=xe?ge[_e]:_e.value;te?isArray$1(Se)&&remove(Se,Q):isArray$1(Se)?Se.includes(Q)||Se.push(Q):xe?ge[_e]=[Q]:(_e.value=[Q],U.k&&(ge[U.k]=_e.value))}else xe?(ge[_e]=de,hasOwn(ye,_e)&&(ye[_e]=de)):isRef(_e)&&(_e.value=de,U.k&&(ge[U.k]=de))};de?(ke.id=-1,queuePostRenderEffect(ke,V)):ke()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(U){return baseCreateRenderer(U)}function baseCreateRenderer(U,G){const V=getGlobalThis();V.__VUE__=!0;const{insert:re,remove:te,patchProp:Q,createElement:de,createText:I,createComment:_e,setText:ne,setElementText:ge,parentNode:ye,nextSibling:xe,setScopeId:we=NOOP,cloneNode:ke,insertStaticContent:Se}=U,Oe=(It,$t,an,xn=null,En=null,$n=null,zn=!1,vn=null,wn=!!$t.dynamicChildren)=>{if(It===$t)return;It&&!isSameVNodeType(It,$t)&&(xn=Rt(It),nn(It,En,$n,!0),It=null),$t.patchFlag===-2&&(wn=!1,$t.dynamicChildren=null);const{type:Sn,ref:Jn,shapeFlag:tr}=$t;switch(Sn){case Text$1:Fe(It,$t,an,xn);break;case Comment$1:ze(It,$t,an,xn);break;case Static:It==null&&Le($t,an,xn,zn);break;case Fragment:Qe(It,$t,an,xn,En,$n,zn,vn,wn);break;default:tr&1?Ne(It,$t,an,xn,En,$n,zn,vn,wn):tr&6?tt(It,$t,an,xn,En,$n,zn,vn,wn):(tr&64||tr&128)&&Sn.process(It,$t,an,xn,En,$n,zn,vn,wn,un)}Jn!=null&&En&&setRef(Jn,It&&It.ref,$n,$t||It,!$t)},Fe=(It,$t,an,xn)=>{if(It==null)re($t.el=I($t.children),an,xn);else{const En=$t.el=It.el;$t.children!==It.children&&ne(En,$t.children)}},ze=(It,$t,an,xn)=>{It==null?re($t.el=_e($t.children||""),an,xn):$t.el=It.el},Le=(It,$t,an,xn)=>{[It.el,It.anchor]=Se(It.children,$t,an,xn,It.el,It.anchor)},We=({el:It,anchor:$t},an,xn)=>{let En;for(;It&&It!==$t;)En=xe(It),re(It,an,xn),It=En;re($t,an,xn)},qe=({el:It,anchor:$t})=>{let an;for(;It&&It!==$t;)an=xe(It),te(It),It=an;te($t)},Ne=(It,$t,an,xn,En,$n,zn,vn,wn)=>{zn=zn||$t.type==="svg",It==null?Ke($t,an,xn,En,$n,zn,vn,wn):ft(It,$t,En,$n,zn,vn,wn)},Ke=(It,$t,an,xn,En,$n,zn,vn)=>{let wn,Sn;const{type:Jn,props:tr,shapeFlag:pr,transition:Xn,patchFlag:Gn,dirs:cn}=It;if(It.el&&ke!==void 0&&Gn===-1)wn=It.el=ke(It.el);else{if(wn=It.el=de(It.type,$n,tr&&tr.is,tr),pr&8?ge(wn,It.children):pr&16&&yt(It.children,wn,null,xn,En,$n&&Jn!=="foreignObject",zn,vn),cn&&invokeDirectiveHook(It,null,xn,"created"),tr){for(const On in tr)On!=="value"&&!isReservedProp(On)&&Q(wn,On,null,tr[On],$n,It.children,xn,En,Vt);"value"in tr&&Q(wn,"value",null,tr.value),(Sn=tr.onVnodeBeforeMount)&&invokeVNodeHook(Sn,xn,It)}ot(wn,It,It.scopeId,zn,xn)}cn&&invokeDirectiveHook(It,null,xn,"beforeMount");const gn=(!En||En&&!En.pendingBranch)&&Xn&&!Xn.persisted;gn&&Xn.beforeEnter(wn),re(wn,$t,an),((Sn=tr&&tr.onVnodeMounted)||gn||cn)&&queuePostRenderEffect(()=>{Sn&&invokeVNodeHook(Sn,xn,It),gn&&Xn.enter(wn),cn&&invokeDirectiveHook(It,null,xn,"mounted")},En)},ot=(It,$t,an,xn,En)=>{if(an&&we(It,an),xn)for(let $n=0;$n<xn.length;$n++)we(It,xn[$n]);if(En){let $n=En.subTree;if($t===$n){const zn=En.vnode;ot(It,zn,zn.scopeId,zn.slotScopeIds,En.parent)}}},yt=(It,$t,an,xn,En,$n,zn,vn,wn=0)=>{for(let Sn=wn;Sn<It.length;Sn++){const Jn=It[Sn]=vn?cloneIfMounted(It[Sn]):normalizeVNode(It[Sn]);Oe(null,Jn,$t,an,xn,En,$n,zn,vn)}},ft=(It,$t,an,xn,En,$n,zn)=>{const vn=$t.el=It.el;let{patchFlag:wn,dynamicChildren:Sn,dirs:Jn}=$t;wn|=It.patchFlag&16;const tr=It.props||EMPTY_OBJ,pr=$t.props||EMPTY_OBJ;let Xn;an&&toggleRecurse(an,!1),(Xn=pr.onVnodeBeforeUpdate)&&invokeVNodeHook(Xn,an,$t,It),Jn&&invokeDirectiveHook($t,It,an,"beforeUpdate"),an&&toggleRecurse(an,!0);const Gn=En&&$t.type!=="foreignObject";if(Sn?_t(It.dynamicChildren,Sn,vn,an,xn,Gn,$n):zn||ut(It,$t,vn,null,an,xn,Gn,$n,!1),wn>0){if(wn&16)Je(vn,$t,tr,pr,an,xn,En);else if(wn&2&&tr.class!==pr.class&&Q(vn,"class",null,pr.class,En),wn&4&&Q(vn,"style",tr.style,pr.style,En),wn&8){const cn=$t.dynamicProps;for(let gn=0;gn<cn.length;gn++){const On=cn[gn],Kn=tr[On],_r=pr[On];(_r!==Kn||On==="value")&&Q(vn,On,Kn,_r,En,It.children,an,xn,Vt)}}wn&1&&It.children!==$t.children&&ge(vn,$t.children)}else!zn&&Sn==null&&Je(vn,$t,tr,pr,an,xn,En);((Xn=pr.onVnodeUpdated)||Jn)&&queuePostRenderEffect(()=>{Xn&&invokeVNodeHook(Xn,an,$t,It),Jn&&invokeDirectiveHook($t,It,an,"updated")},xn)},_t=(It,$t,an,xn,En,$n,zn)=>{for(let vn=0;vn<$t.length;vn++){const wn=It[vn],Sn=$t[vn],Jn=wn.el&&(wn.type===Fragment||!isSameVNodeType(wn,Sn)||wn.shapeFlag&70)?ye(wn.el):an;Oe(wn,Sn,Jn,null,xn,En,$n,zn,!0)}},Je=(It,$t,an,xn,En,$n,zn)=>{if(an!==xn){for(const vn in xn){if(isReservedProp(vn))continue;const wn=xn[vn],Sn=an[vn];wn!==Sn&&vn!=="value"&&Q(It,vn,Sn,wn,zn,$t.children,En,$n,Vt)}if(an!==EMPTY_OBJ)for(const vn in an)!isReservedProp(vn)&&!(vn in xn)&&Q(It,vn,an[vn],null,zn,$t.children,En,$n,Vt);"value"in xn&&Q(It,"value",an.value,xn.value)}},Qe=(It,$t,an,xn,En,$n,zn,vn,wn)=>{const Sn=$t.el=It?It.el:I(""),Jn=$t.anchor=It?It.anchor:I("");let{patchFlag:tr,dynamicChildren:pr,slotScopeIds:Xn}=$t;Xn&&(vn=vn?vn.concat(Xn):Xn),It==null?(re(Sn,an,xn),re(Jn,an,xn),yt($t.children,an,Jn,En,$n,zn,vn,wn)):tr>0&&tr&64&&pr&&It.dynamicChildren?(_t(It.dynamicChildren,pr,an,En,$n,zn,vn),($t.key!=null||En&&$t===En.subTree)&&traverseStaticChildren(It,$t,!0)):ut(It,$t,an,Jn,En,$n,zn,vn,wn)},tt=(It,$t,an,xn,En,$n,zn,vn,wn)=>{$t.slotScopeIds=vn,It==null?$t.shapeFlag&512?En.ctx.activate($t,an,xn,zn,wn):ht($t,an,xn,En,$n,zn,wn):it(It,$t,wn)},ht=(It,$t,an,xn,En,$n,zn)=>{const vn=It.component=createComponentInstance(It,xn,En);if(isKeepAlive(It)&&(vn.ctx.renderer=un),setupComponent(vn),vn.asyncDep){if(En&&En.registerDep(vn,pt),!It.el){const wn=vn.subTree=createVNode(Comment$1);ze(null,wn,$t,an)}return}pt(vn,It,$t,an,En,$n,zn)},it=(It,$t,an)=>{const xn=$t.component=It.component;if(shouldUpdateComponent(It,$t,an))if(xn.asyncDep&&!xn.asyncResolved){vt(xn,$t,an);return}else xn.next=$t,invalidateJob(xn.update),xn.update();else $t.component=It.component,$t.el=It.el,xn.vnode=$t},pt=(It,$t,an,xn,En,$n,zn)=>{const vn=()=>{if(It.isMounted){let{next:Jn,bu:tr,u:pr,parent:Xn,vnode:Gn}=It,cn=Jn,gn;toggleRecurse(It,!1),Jn?(Jn.el=Gn.el,vt(It,Jn,zn)):Jn=Gn,tr&&invokeArrayFns(tr),(gn=Jn.props&&Jn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(gn,Xn,Jn,Gn),toggleRecurse(It,!0);const On=renderComponentRoot(It),Kn=It.subTree;It.subTree=On,Oe(Kn,On,ye(Kn.el),Rt(Kn),It,En,$n),Jn.el=On.el,cn===null&&updateHOCHostEl(It,On.el),pr&&queuePostRenderEffect(pr,En),(gn=Jn.props&&Jn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(gn,Xn,Jn,Gn),En)}else{let Jn;const{el:tr,props:pr}=$t,{bm:Xn,m:Gn,parent:cn}=It,gn=isAsyncWrapper($t);if(toggleRecurse(It,!1),Xn&&invokeArrayFns(Xn),!gn&&(Jn=pr&&pr.onVnodeBeforeMount)&&invokeVNodeHook(Jn,cn,$t),toggleRecurse(It,!0),tr&&In){const On=()=>{It.subTree=renderComponentRoot(It),In(tr,It.subTree,It,En,null)};gn?$t.type.__asyncLoader().then(()=>!It.isUnmounted&&On()):On()}else{const On=It.subTree=renderComponentRoot(It);Oe(null,On,an,xn,It,En,$n),$t.el=On.el}if(Gn&&queuePostRenderEffect(Gn,En),!gn&&(Jn=pr&&pr.onVnodeMounted)){const On=$t;queuePostRenderEffect(()=>invokeVNodeHook(Jn,cn,On),En)}$t.shapeFlag&256&&It.a&&queuePostRenderEffect(It.a,En),It.isMounted=!0,$t=an=xn=null}},wn=It.effect=new ReactiveEffect(vn,()=>queueJob(It.update),It.scope),Sn=It.update=wn.run.bind(wn);Sn.id=It.uid,toggleRecurse(It,!0),Sn()},vt=(It,$t,an)=>{$t.component=It;const xn=It.vnode.props;It.vnode=$t,It.next=null,updateProps(It,$t.props,xn,an),updateSlots(It,$t.children,an),pauseTracking(),flushPreFlushCbs(void 0,It.update),resetTracking()},ut=(It,$t,an,xn,En,$n,zn,vn,wn=!1)=>{const Sn=It&&It.children,Jn=It?It.shapeFlag:0,tr=$t.children,{patchFlag:pr,shapeFlag:Xn}=$t;if(pr>0){if(pr&128){at(Sn,tr,an,xn,En,$n,zn,vn,wn);return}else if(pr&256){Nt(Sn,tr,an,xn,En,$n,zn,vn,wn);return}}Xn&8?(Jn&16&&Vt(Sn,En,$n),tr!==Sn&&ge(an,tr)):Jn&16?Xn&16?at(Sn,tr,an,xn,En,$n,zn,vn,wn):Vt(Sn,En,$n,!0):(Jn&8&&ge(an,""),Xn&16&&yt(tr,an,xn,En,$n,zn,vn,wn))},Nt=(It,$t,an,xn,En,$n,zn,vn,wn)=>{It=It||EMPTY_ARR,$t=$t||EMPTY_ARR;const Sn=It.length,Jn=$t.length,tr=Math.min(Sn,Jn);let pr;for(pr=0;pr<tr;pr++){const Xn=$t[pr]=wn?cloneIfMounted($t[pr]):normalizeVNode($t[pr]);Oe(It[pr],Xn,an,null,En,$n,zn,vn,wn)}Sn>Jn?Vt(It,En,$n,!0,!1,tr):yt($t,an,xn,En,$n,zn,vn,wn,tr)},at=(It,$t,an,xn,En,$n,zn,vn,wn)=>{let Sn=0;const Jn=$t.length;let tr=It.length-1,pr=Jn-1;for(;Sn<=tr&&Sn<=pr;){const Xn=It[Sn],Gn=$t[Sn]=wn?cloneIfMounted($t[Sn]):normalizeVNode($t[Sn]);if(isSameVNodeType(Xn,Gn))Oe(Xn,Gn,an,null,En,$n,zn,vn,wn);else break;Sn++}for(;Sn<=tr&&Sn<=pr;){const Xn=It[tr],Gn=$t[pr]=wn?cloneIfMounted($t[pr]):normalizeVNode($t[pr]);if(isSameVNodeType(Xn,Gn))Oe(Xn,Gn,an,null,En,$n,zn,vn,wn);else break;tr--,pr--}if(Sn>tr){if(Sn<=pr){const Xn=pr+1,Gn=Xn<Jn?$t[Xn].el:xn;for(;Sn<=pr;)Oe(null,$t[Sn]=wn?cloneIfMounted($t[Sn]):normalizeVNode($t[Sn]),an,Gn,En,$n,zn,vn,wn),Sn++}}else if(Sn>pr)for(;Sn<=tr;)nn(It[Sn],En,$n,!0),Sn++;else{const Xn=Sn,Gn=Sn,cn=new Map;for(Sn=Gn;Sn<=pr;Sn++){const Lr=$t[Sn]=wn?cloneIfMounted($t[Sn]):normalizeVNode($t[Sn]);Lr.key!=null&&cn.set(Lr.key,Sn)}let gn,On=0;const Kn=pr-Gn+1;let _r=!1,kr=0;const Dr=new Array(Kn);for(Sn=0;Sn<Kn;Sn++)Dr[Sn]=0;for(Sn=Xn;Sn<=tr;Sn++){const Lr=It[Sn];if(On>=Kn){nn(Lr,En,$n,!0);continue}let Br;if(Lr.key!=null)Br=cn.get(Lr.key);else for(gn=Gn;gn<=pr;gn++)if(Dr[gn-Gn]===0&&isSameVNodeType(Lr,$t[gn])){Br=gn;break}Br===void 0?nn(Lr,En,$n,!0):(Dr[Br-Gn]=Sn+1,Br>=kr?kr=Br:_r=!0,Oe(Lr,$t[Br],an,null,En,$n,zn,vn,wn),On++)}const xr=_r?getSequence(Dr):EMPTY_ARR;for(gn=xr.length-1,Sn=Kn-1;Sn>=0;Sn--){const Lr=Gn+Sn,Br=$t[Lr],Vr=Lr+1<Jn?$t[Lr+1].el:xn;Dr[Sn]===0?Oe(null,Br,an,Vr,En,$n,zn,vn,wn):_r&&(gn<0||Sn!==xr[gn]?Mt(Br,an,Vr,2):gn--)}}},Mt=(It,$t,an,xn,En=null)=>{const{el:$n,type:zn,transition:vn,children:wn,shapeFlag:Sn}=It;if(Sn&6){Mt(It.component.subTree,$t,an,xn);return}if(Sn&128){It.suspense.move($t,an,xn);return}if(Sn&64){zn.move(It,$t,an,un);return}if(zn===Fragment){re($n,$t,an);for(let tr=0;tr<wn.length;tr++)Mt(wn[tr],$t,an,xn);re(It.anchor,$t,an);return}if(zn===Static){We(It,$t,an);return}if(xn!==2&&Sn&1&&vn)if(xn===0)vn.beforeEnter($n),re($n,$t,an),queuePostRenderEffect(()=>vn.enter($n),En);else{const{leave:tr,delayLeave:pr,afterLeave:Xn}=vn,Gn=()=>re($n,$t,an),cn=()=>{tr($n,()=>{Gn(),Xn&&Xn()})};pr?pr($n,Gn,cn):cn()}else re($n,$t,an)},nn=(It,$t,an,xn=!1,En=!1)=>{const{type:$n,props:zn,ref:vn,children:wn,dynamicChildren:Sn,shapeFlag:Jn,patchFlag:tr,dirs:pr}=It;if(vn!=null&&setRef(vn,null,an,It,!0),Jn&256){$t.ctx.deactivate(It);return}const Xn=Jn&1&&pr,Gn=!isAsyncWrapper(It);let cn;if(Gn&&(cn=zn&&zn.onVnodeBeforeUnmount)&&invokeVNodeHook(cn,$t,It),Jn&6)on(It.component,an,xn);else{if(Jn&128){It.suspense.unmount(an,xn);return}Xn&&invokeDirectiveHook(It,null,$t,"beforeUnmount"),Jn&64?It.type.remove(It,$t,an,En,un,xn):Sn&&($n!==Fragment||tr>0&&tr&64)?Vt(Sn,$t,an,!1,!0):($n===Fragment&&tr&384||!En&&Jn&16)&&Vt(wn,$t,an),xn&&Tn(It)}(Gn&&(cn=zn&&zn.onVnodeUnmounted)||Xn)&&queuePostRenderEffect(()=>{cn&&invokeVNodeHook(cn,$t,It),Xn&&invokeDirectiveHook(It,null,$t,"unmounted")},an)},Tn=It=>{const{type:$t,el:an,anchor:xn,transition:En}=It;if($t===Fragment){Jt(an,xn);return}if($t===Static){qe(It);return}const $n=()=>{te(an),En&&!En.persisted&&En.afterLeave&&En.afterLeave()};if(It.shapeFlag&1&&En&&!En.persisted){const{leave:zn,delayLeave:vn}=En,wn=()=>zn(an,$n);vn?vn(It.el,$n,wn):wn()}else $n()},Jt=(It,$t)=>{let an;for(;It!==$t;)an=xe(It),te(It),It=an;te($t)},on=(It,$t,an)=>{const{bum:xn,scope:En,update:$n,subTree:zn,um:vn}=It;xn&&invokeArrayFns(xn),En.stop(),$n&&($n.active=!1,nn(zn,It,$t,an)),vn&&queuePostRenderEffect(vn,$t),queuePostRenderEffect(()=>{It.isUnmounted=!0},$t),$t&&$t.pendingBranch&&!$t.isUnmounted&&It.asyncDep&&!It.asyncResolved&&It.suspenseId===$t.pendingId&&($t.deps--,$t.deps===0&&$t.resolve())},Vt=(It,$t,an,xn=!1,En=!1,$n=0)=>{for(let zn=$n;zn<It.length;zn++)nn(It[zn],$t,an,xn,En)},Rt=It=>It.shapeFlag&6?Rt(It.component.subTree):It.shapeFlag&128?It.suspense.next():xe(It.anchor||It.el),Yt=(It,$t,an)=>{It==null?$t._vnode&&nn($t._vnode,null,null,!0):Oe($t._vnode||null,It,$t,null,null,null,an),flushPostFlushCbs(),$t._vnode=It},un={p:Oe,um:nn,m:Mt,r:Tn,mt:ht,mc:yt,pc:ut,pbc:_t,n:Rt,o:U};let yn,In;return G&&([yn,In]=G(un)),{render:Yt,hydrate:yn,createApp:createAppAPI(Yt,yn)}}function toggleRecurse({effect:U,update:G},V){U.allowRecurse=G.allowRecurse=V}function traverseStaticChildren(U,G,V=!1){const re=U.children,te=G.children;if(isArray$1(re)&&isArray$1(te))for(let Q=0;Q<re.length;Q++){const de=re[Q];let I=te[Q];I.shapeFlag&1&&!I.dynamicChildren&&((I.patchFlag<=0||I.patchFlag===32)&&(I=te[Q]=cloneIfMounted(te[Q]),I.el=de.el),V||traverseStaticChildren(de,I))}}function getSequence(U){const G=U.slice(),V=[0];let re,te,Q,de,I;const _e=U.length;for(re=0;re<_e;re++){const ne=U[re];if(ne!==0){if(te=V[V.length-1],U[te]<ne){G[re]=te,V.push(re);continue}for(Q=0,de=V.length-1;Q<de;)I=Q+de>>1,U[V[I]]<ne?Q=I+1:de=I;ne<U[V[Q]]&&(Q>0&&(G[re]=V[Q-1]),V[Q]=re)}}for(Q=V.length,de=V[Q-1];Q-- >0;)V[Q]=de,de=G[de];return V}const isTeleport=U=>U.__isTeleport,isTeleportDisabled=U=>U&&(U.disabled||U.disabled===""),isTargetSVG=U=>typeof SVGElement!="undefined"&&U instanceof SVGElement,resolveTarget=(U,G)=>{const V=U&&U.to;return isString$1(V)?G?G(V):null:V},TeleportImpl={__isTeleport:!0,process(U,G,V,re,te,Q,de,I,_e,ne){const{mc:ge,pc:ye,pbc:xe,o:{insert:we,querySelector:ke,createText:Se,createComment:Oe}}=ne,Fe=isTeleportDisabled(G.props);let{shapeFlag:ze,children:Le,dynamicChildren:We}=G;if(U==null){const qe=G.el=Se(""),Ne=G.anchor=Se("");we(qe,V,re),we(Ne,V,re);const Ke=G.target=resolveTarget(G.props,ke),ot=G.targetAnchor=Se("");Ke&&(we(ot,Ke),de=de||isTargetSVG(Ke));const yt=(ft,_t)=>{ze&16&&ge(Le,ft,_t,te,Q,de,I,_e)};Fe?yt(V,Ne):Ke&&yt(Ke,ot)}else{G.el=U.el;const qe=G.anchor=U.anchor,Ne=G.target=U.target,Ke=G.targetAnchor=U.targetAnchor,ot=isTeleportDisabled(U.props),yt=ot?V:Ne,ft=ot?qe:Ke;if(de=de||isTargetSVG(Ne),We?(xe(U.dynamicChildren,We,yt,te,Q,de,I),traverseStaticChildren(U,G,!0)):_e||ye(U,G,yt,ft,te,Q,de,I,!1),Fe)ot||moveTeleport(G,V,qe,ne,1);else if((G.props&&G.props.to)!==(U.props&&U.props.to)){const _t=G.target=resolveTarget(G.props,ke);_t&&moveTeleport(G,_t,null,ne,0)}else ot&&moveTeleport(G,Ne,Ke,ne,1)}},remove(U,G,V,re,{um:te,o:{remove:Q}},de){const{shapeFlag:I,children:_e,anchor:ne,targetAnchor:ge,target:ye,props:xe}=U;if(ye&&Q(ge),(de||!isTeleportDisabled(xe))&&(Q(ne),I&16))for(let we=0;we<_e.length;we++){const ke=_e[we];te(ke,G,V,!0,!!ke.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(U,G,V,{o:{insert:re},m:te},Q=2){Q===0&&re(U.targetAnchor,G,V);const{el:de,anchor:I,shapeFlag:_e,children:ne,props:ge}=U,ye=Q===2;if(ye&&re(de,G,V),(!ye||isTeleportDisabled(ge))&&_e&16)for(let xe=0;xe<ne.length;xe++)te(ne[xe],G,V,2);ye&&re(I,G,V)}function hydrateTeleport(U,G,V,re,te,Q,{o:{nextSibling:de,parentNode:I,querySelector:_e}},ne){const ge=G.target=resolveTarget(G.props,_e);if(ge){const ye=ge._lpa||ge.firstChild;G.shapeFlag&16&&(isTeleportDisabled(G.props)?(G.anchor=ne(de(U),G,I(U),V,re,te,Q),G.targetAnchor=ye):(G.anchor=de(U),G.targetAnchor=ne(ye,G,ge,V,re,te,Q)),ge._lpa=G.targetAnchor&&de(G.targetAnchor))}return G.anchor&&de(G.anchor)}const Teleport=TeleportImpl,COMPONENTS="components",NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(U){return isString$1(U)?resolveAsset(COMPONENTS,U,!1)||U:U||NULL_DYNAMIC_COMPONENT}function resolveAsset(U,G,V=!0,re=!1){const te=currentRenderingInstance||currentInstance;if(te){const Q=te.type;if(U===COMPONENTS){const I=getComponentName(Q);if(I&&(I===G||I===camelize(G)||I===capitalize(camelize(G))))return Q}const de=resolve(te[U]||Q[U],G)||resolve(te.appContext[U],G);return!de&&re?Q:de}}function resolve(U,G){return U&&(U[G]||U[camelize(G)]||U[capitalize(camelize(G))])}const Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment$1=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(U=!1){blockStack.push(currentBlock=U?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(U){isBlockTreeEnabled+=U}function setupBlock(U){return U.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(U),U}function createElementBlock(U,G,V,re,te,Q){return setupBlock(createBaseVNode(U,G,V,re,te,Q,!0))}function createBlock(U,G,V,re,te){return setupBlock(createVNode(U,G,V,re,te,!0))}function isVNode(U){return U?U.__v_isVNode===!0:!1}function isSameVNodeType(U,G){return U.type===G.type&&U.key===G.key}const InternalObjectKey="__vInternal",normalizeKey=({key:U})=>U!=null?U:null,normalizeRef=({ref:U,ref_key:G,ref_for:V})=>U!=null?isString$1(U)||isRef(U)||isFunction$2(U)?{i:currentRenderingInstance,r:U,k:G,f:!!V}:U:null;function createBaseVNode(U,G=null,V=null,re=0,te=null,Q=U===Fragment?0:1,de=!1,I=!1){const _e={__v_isVNode:!0,__v_skip:!0,type:U,props:G,key:G&&normalizeKey(G),ref:G&&normalizeRef(G),scopeId:currentScopeId,slotScopeIds:null,children:V,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:Q,patchFlag:re,dynamicProps:te,dynamicChildren:null,appContext:null};return I?(normalizeChildren(_e,V),Q&128&&U.normalize(_e)):V&&(_e.shapeFlag|=isString$1(V)?8:16),isBlockTreeEnabled>0&&!de&&currentBlock&&(_e.patchFlag>0||Q&6)&&_e.patchFlag!==32&&currentBlock.push(_e),_e}const createVNode=_createVNode;function _createVNode(U,G=null,V=null,re=0,te=null,Q=!1){if((!U||U===NULL_DYNAMIC_COMPONENT)&&(U=Comment$1),isVNode(U)){const I=cloneVNode(U,G,!0);return V&&normalizeChildren(I,V),I}if(isClassComponent(U)&&(U=U.__vccOpts),G){G=guardReactiveProps(G);let{class:I,style:_e}=G;I&&!isString$1(I)&&(G.class=normalizeClass(I)),isObject$1(_e)&&(isProxy$1(_e)&&!isArray$1(_e)&&(_e=extend$1({},_e)),G.style=normalizeStyle(_e))}const de=isString$1(U)?1:isSuspense(U)?128:isTeleport(U)?64:isObject$1(U)?4:isFunction$2(U)?2:0;return createBaseVNode(U,G,V,re,te,de,Q,!0)}function guardReactiveProps(U){return U?isProxy$1(U)||InternalObjectKey in U?extend$1({},U):U:null}function cloneVNode(U,G,V=!1){const{props:re,ref:te,patchFlag:Q,children:de}=U,I=G?mergeProps(re||{},G):re;return{__v_isVNode:!0,__v_skip:!0,type:U.type,props:I,key:I&&normalizeKey(I),ref:G&&G.ref?V&&te?isArray$1(te)?te.concat(normalizeRef(G)):[te,normalizeRef(G)]:normalizeRef(G):te,scopeId:U.scopeId,slotScopeIds:U.slotScopeIds,children:de,target:U.target,targetAnchor:U.targetAnchor,staticCount:U.staticCount,shapeFlag:U.shapeFlag,patchFlag:G&&U.type!==Fragment?Q===-1?16:Q|16:Q,dynamicProps:U.dynamicProps,dynamicChildren:U.dynamicChildren,appContext:U.appContext,dirs:U.dirs,transition:U.transition,component:U.component,suspense:U.suspense,ssContent:U.ssContent&&cloneVNode(U.ssContent),ssFallback:U.ssFallback&&cloneVNode(U.ssFallback),el:U.el,anchor:U.anchor}}function createTextVNode(U=" ",G=0){return createVNode(Text$1,null,U,G)}function createStaticVNode(U,G){const V=createVNode(Static,null,U);return V.staticCount=G,V}function createCommentVNode(U="",G=!1){return G?(openBlock(),createBlock(Comment$1,null,U)):createVNode(Comment$1,null,U)}function normalizeVNode(U){return U==null||typeof U=="boolean"?createVNode(Comment$1):isArray$1(U)?createVNode(Fragment,null,U.slice()):typeof U=="object"?cloneIfMounted(U):createVNode(Text$1,null,String(U))}function cloneIfMounted(U){return U.el===null||U.memo?U:cloneVNode(U)}function normalizeChildren(U,G){let V=0;const{shapeFlag:re}=U;if(G==null)G=null;else if(isArray$1(G))V=16;else if(typeof G=="object")if(re&65){const te=G.default;te&&(te._c&&(te._d=!1),normalizeChildren(U,te()),te._c&&(te._d=!0));return}else{V=32;const te=G._;!te&&!(InternalObjectKey in G)?G._ctx=currentRenderingInstance:te===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?G._=1:(G._=2,U.patchFlag|=1024))}else isFunction$2(G)?(G={default:G,_ctx:currentRenderingInstance},V=32):(G=String(G),re&64?(V=16,G=[createTextVNode(G)]):V=8);U.children=G,U.shapeFlag|=V}function mergeProps(...U){const G={};for(let V=0;V<U.length;V++){const re=U[V];for(const te in re)if(te==="class")G.class!==re.class&&(G.class=normalizeClass([G.class,re.class]));else if(te==="style")G.style=normalizeStyle([G.style,re.style]);else if(isOn(te)){const Q=G[te],de=re[te];de&&Q!==de&&!(isArray$1(Q)&&Q.includes(de))&&(G[te]=Q?[].concat(Q,de):de)}else te!==""&&(G[te]=re[te])}return G}function invokeVNodeHook(U,G,V,re=null){callWithAsyncErrorHandling(U,G,7,[V,re])}function renderList(U,G,V,re){let te;const Q=V&&V[re];if(isArray$1(U)||isString$1(U)){te=new Array(U.length);for(let de=0,I=U.length;de<I;de++)te[de]=G(U[de],de,void 0,Q&&Q[de])}else if(typeof U=="number"){te=new Array(U);for(let de=0;de<U;de++)te[de]=G(de+1,de,void 0,Q&&Q[de])}else if(isObject$1(U))if(U[Symbol.iterator])te=Array.from(U,(de,I)=>G(de,I,void 0,Q&&Q[I]));else{const de=Object.keys(U);te=new Array(de.length);for(let I=0,_e=de.length;I<_e;I++){const ne=de[I];te[I]=G(U[ne],ne,I,Q&&Q[I])}}else te=[];return V&&(V[re]=te),te}const getPublicInstance=U=>U?isStatefulComponent(U)?getExposeProxy(U)||U.proxy:getPublicInstance(U.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:U=>U,$el:U=>U.vnode.el,$data:U=>U.data,$props:U=>U.props,$attrs:U=>U.attrs,$slots:U=>U.slots,$refs:U=>U.refs,$parent:U=>getPublicInstance(U.parent),$root:U=>getPublicInstance(U.root),$emit:U=>U.emit,$options:U=>resolveMergedOptions(U),$forceUpdate:U=>()=>queueJob(U.update),$nextTick:U=>nextTick.bind(U.proxy),$watch:U=>instanceWatch.bind(U)}),PublicInstanceProxyHandlers={get({_:U},G){const{ctx:V,setupState:re,data:te,props:Q,accessCache:de,type:I,appContext:_e}=U;let ne;if(G[0]!=="$"){const we=de[G];if(we!==void 0)switch(we){case 1:return re[G];case 2:return te[G];case 4:return V[G];case 3:return Q[G]}else{if(re!==EMPTY_OBJ&&hasOwn(re,G))return de[G]=1,re[G];if(te!==EMPTY_OBJ&&hasOwn(te,G))return de[G]=2,te[G];if((ne=U.propsOptions[0])&&hasOwn(ne,G))return de[G]=3,Q[G];if(V!==EMPTY_OBJ&&hasOwn(V,G))return de[G]=4,V[G];shouldCacheAccess&&(de[G]=0)}}const ge=publicPropertiesMap[G];let ye,xe;if(ge)return G==="$attrs"&&track(U,"get",G),ge(U);if((ye=I.__cssModules)&&(ye=ye[G]))return ye;if(V!==EMPTY_OBJ&&hasOwn(V,G))return de[G]=4,V[G];if(xe=_e.config.globalProperties,hasOwn(xe,G))return xe[G]},set({_:U},G,V){const{data:re,setupState:te,ctx:Q}=U;return te!==EMPTY_OBJ&&hasOwn(te,G)?(te[G]=V,!0):re!==EMPTY_OBJ&&hasOwn(re,G)?(re[G]=V,!0):hasOwn(U.props,G)||G[0]==="$"&&G.slice(1)in U?!1:(Q[G]=V,!0)},has({_:{data:U,setupState:G,accessCache:V,ctx:re,appContext:te,propsOptions:Q}},de){let I;return!!V[de]||U!==EMPTY_OBJ&&hasOwn(U,de)||G!==EMPTY_OBJ&&hasOwn(G,de)||(I=Q[0])&&hasOwn(I,de)||hasOwn(re,de)||hasOwn(publicPropertiesMap,de)||hasOwn(te.config.globalProperties,de)},defineProperty(U,G,V){return V.get!=null?this.set(U,G,V.get(),null):V.value!=null&&this.set(U,G,V.value,null),Reflect.defineProperty(U,G,V)}},emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(U,G,V){const re=U.type,te=(G?G.appContext:U.appContext)||emptyAppContext,Q={uid:uid$1++,vnode:U,type:re,parent:G,appContext:te,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:G?G.provides:Object.create(te.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(re,te),emitsOptions:normalizeEmitsOptions(re,te),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:re.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:V,suspenseId:V?V.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Q.ctx={_:Q},Q.root=G?G.root:Q,Q.emit=emit$1.bind(null,Q),U.ce&&U.ce(Q),Q}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=U=>{currentInstance=U,U.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(U){return U.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(U,G=!1){isInSSRComponentSetup=G;const{props:V,children:re}=U.vnode,te=isStatefulComponent(U);initProps(U,V,te,G),initSlots(U,re);const Q=te?setupStatefulComponent(U,G):void 0;return isInSSRComponentSetup=!1,Q}function setupStatefulComponent(U,G){const V=U.type;U.accessCache=Object.create(null),U.proxy=markRaw(new Proxy(U.ctx,PublicInstanceProxyHandlers));const{setup:re}=V;if(re){const te=U.setupContext=re.length>1?createSetupContext(U):null;setCurrentInstance(U),pauseTracking();const Q=callWithErrorHandling(re,U,0,[U.props,te]);if(resetTracking(),unsetCurrentInstance(),isPromise(Q)){if(Q.then(unsetCurrentInstance,unsetCurrentInstance),G)return Q.then(de=>{handleSetupResult(U,de,G)}).catch(de=>{handleError(de,U,0)});U.asyncDep=Q}else handleSetupResult(U,Q,G)}else finishComponentSetup(U,G)}function handleSetupResult(U,G,V){isFunction$2(G)?U.type.__ssrInlineRender?U.ssrRender=G:U.render=G:isObject$1(G)&&(U.setupState=proxyRefs(G)),finishComponentSetup(U,V)}let compile;function finishComponentSetup(U,G,V){const re=U.type;if(!U.render){if(!G&&compile&&!re.render){const te=re.template;if(te){const{isCustomElement:Q,compilerOptions:de}=U.appContext.config,{delimiters:I,compilerOptions:_e}=re,ne=extend$1(extend$1({isCustomElement:Q,delimiters:I},de),_e);re.render=compile(te,ne)}}U.render=re.render||NOOP}setCurrentInstance(U),pauseTracking(),applyOptions(U),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(U){return new Proxy(U.attrs,{get(G,V){return track(U,"get","$attrs"),G[V]}})}function createSetupContext(U){const G=re=>{U.exposed=re||{}};let V;return{get attrs(){return V||(V=createAttrsProxy(U))},slots:U.slots,emit:U.emit,expose:G}}function getExposeProxy(U){if(U.exposed)return U.exposeProxy||(U.exposeProxy=new Proxy(proxyRefs(markRaw(U.exposed)),{get(G,V){if(V in G)return G[V];if(V in publicPropertiesMap)return publicPropertiesMap[V](U)}}))}function getComponentName(U){return isFunction$2(U)&&U.displayName||U.name}function isClassComponent(U){return isFunction$2(U)&&"__vccOpts"in U}const computed=(U,G)=>computed$1(U,G,isInSSRComponentSetup);function withAsyncContext(U){const G=getCurrentInstance();let V=U();return unsetCurrentInstance(),isPromise(V)&&(V=V.catch(re=>{throw setCurrentInstance(G),re})),[V,()=>setCurrentInstance(G)]}function h$3(U,G,V){const re=arguments.length;return re===2?isObject$1(G)&&!isArray$1(G)?isVNode(G)?createVNode(U,null,[G]):createVNode(U,G):createVNode(U,null,G):(re>3?V=Array.prototype.slice.call(arguments,2):re===3&&isVNode(V)&&(V=[V]),createVNode(U,G,V))}const version="3.2.31",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(U,G,V)=>{G.insertBefore(U,V||null)},remove:U=>{const G=U.parentNode;G&&G.removeChild(U)},createElement:(U,G,V,re)=>{const te=G?doc.createElementNS(svgNS,U):doc.createElement(U,V?{is:V}:void 0);return U==="select"&&re&&re.multiple!=null&&te.setAttribute("multiple",re.multiple),te},createText:U=>doc.createTextNode(U),createComment:U=>doc.createComment(U),setText:(U,G)=>{U.nodeValue=G},setElementText:(U,G)=>{U.textContent=G},parentNode:U=>U.parentNode,nextSibling:U=>U.nextSibling,querySelector:U=>doc.querySelector(U),setScopeId(U,G){U.setAttribute(G,"")},cloneNode(U){const G=U.cloneNode(!0);return"_value"in U&&(G._value=U._value),G},insertStaticContent(U,G,V,re,te,Q){const de=V?V.previousSibling:G.lastChild;if(te&&(te===Q||te.nextSibling))for(;G.insertBefore(te.cloneNode(!0),V),!(te===Q||!(te=te.nextSibling)););else{templateContainer.innerHTML=re?`<svg>${U}</svg>`:U;const I=templateContainer.content;if(re){const _e=I.firstChild;for(;_e.firstChild;)I.appendChild(_e.firstChild);I.removeChild(_e)}G.insertBefore(I,V)}return[de?de.nextSibling:G.firstChild,V?V.previousSibling:G.lastChild]}};function patchClass(U,G,V){const re=U._vtc;re&&(G=(G?[G,...re]:[...re]).join(" ")),G==null?U.removeAttribute("class"):V?U.setAttribute("class",G):U.className=G}function patchStyle(U,G,V){const re=U.style,te=isString$1(V);if(V&&!te){for(const Q in V)setStyle(re,Q,V[Q]);if(G&&!isString$1(G))for(const Q in G)V[Q]==null&&setStyle(re,Q,"")}else{const Q=re.display;te?G!==V&&(re.cssText=V):G&&U.removeAttribute("style"),"_vod"in U&&(re.display=Q)}}const importantRE=/\s*!important$/;function setStyle(U,G,V){if(isArray$1(V))V.forEach(re=>setStyle(U,G,re));else if(G.startsWith("--"))U.setProperty(G,V);else{const re=autoPrefix(U,G);importantRE.test(V)?U.setProperty(hyphenate(re),V.replace(importantRE,""),"important"):U[re]=V}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(U,G){const V=prefixCache[G];if(V)return V;let re=camelize(G);if(re!=="filter"&&re in U)return prefixCache[G]=re;re=capitalize(re);for(let te=0;te<prefixes.length;te++){const Q=prefixes[te]+re;if(Q in U)return prefixCache[G]=Q}return G}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(U,G,V,re,te){if(re&&G.startsWith("xlink:"))V==null?U.removeAttributeNS(xlinkNS,G.slice(6,G.length)):U.setAttributeNS(xlinkNS,G,V);else{const Q=isSpecialBooleanAttr(G);V==null||Q&&!includeBooleanAttr(V)?U.removeAttribute(G):U.setAttribute(G,Q?"":V)}}function patchDOMProp(U,G,V,re,te,Q,de){if(G==="innerHTML"||G==="textContent"){re&&de(re,te,Q),U[G]=V==null?"":V;return}if(G==="value"&&U.tagName!=="PROGRESS"&&!U.tagName.includes("-")){U._value=V;const I=V==null?"":V;(U.value!==I||U.tagName==="OPTION")&&(U.value=I),V==null&&U.removeAttribute(G);return}if(V===""||V==null){const I=typeof U[G];if(I==="boolean"){U[G]=includeBooleanAttr(V);return}else if(V==null&&I==="string"){U[G]="",U.removeAttribute(G);return}else if(I==="number"){try{U[G]=0}catch{}U.removeAttribute(G);return}}try{U[G]=V}catch{}}let _getNow=Date.now,skipTimestampCheck=!1;if(typeof window!="undefined"){_getNow()>document.createEvent("Event").timeStamp&&(_getNow=()=>performance.now());const U=navigator.userAgent.match(/firefox\/(\d+)/i);skipTimestampCheck=!!(U&&Number(U[1])<=53)}let cachedNow=0;const p$5=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$5.then(reset),cachedNow=_getNow());function addEventListener(U,G,V,re){U.addEventListener(G,V,re)}function removeEventListener(U,G,V,re){U.removeEventListener(G,V,re)}function patchEvent(U,G,V,re,te=null){const Q=U._vei||(U._vei={}),de=Q[G];if(re&&de)de.value=re;else{const[I,_e]=parseName(G);if(re){const ne=Q[G]=createInvoker(re,te);addEventListener(U,I,ne,_e)}else de&&(removeEventListener(U,I,de,_e),Q[G]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(U){let G;if(optionsModifierRE.test(U)){G={};let V;for(;V=U.match(optionsModifierRE);)U=U.slice(0,U.length-V[0].length),G[V[0].toLowerCase()]=!0}return[hyphenate(U.slice(2)),G]}function createInvoker(U,G){const V=re=>{const te=re.timeStamp||_getNow();(skipTimestampCheck||te>=V.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(re,V.value),G,5,[re])};return V.value=U,V.attached=getNow(),V}function patchStopImmediatePropagation(U,G){if(isArray$1(G)){const V=U.stopImmediatePropagation;return U.stopImmediatePropagation=()=>{V.call(U),U._stopped=!0},G.map(re=>te=>!te._stopped&&re&&re(te))}else return G}const nativeOnRE=/^on[a-z]/,patchProp=(U,G,V,re,te=!1,Q,de,I,_e)=>{G==="class"?patchClass(U,re,te):G==="style"?patchStyle(U,V,re):isOn(G)?isModelListener(G)||patchEvent(U,G,V,re,de):(G[0]==="."?(G=G.slice(1),!0):G[0]==="^"?(G=G.slice(1),!1):shouldSetAsProp(U,G,re,te))?patchDOMProp(U,G,re,Q,de,I,_e):(G==="true-value"?U._trueValue=re:G==="false-value"&&(U._falseValue=re),patchAttr(U,G,re,te))};function shouldSetAsProp(U,G,V,re){return re?!!(G==="innerHTML"||G==="textContent"||G in U&&nativeOnRE.test(G)&&isFunction$2(V)):G==="spellcheck"||G==="draggable"||G==="form"||G==="list"&&U.tagName==="INPUT"||G==="type"&&U.tagName==="TEXTAREA"||nativeOnRE.test(G)&&isString$1(V)?!1:G in U}const TRANSITION="transition",ANIMATION="animation",Transition=(U,{slots:G})=>h$3(BaseTransition,resolveTransitionProps(U),G);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$1({},BaseTransition.props,DOMTransitionPropsValidators);const callHook=(U,G=[])=>{isArray$1(U)?U.forEach(V=>V(...G)):U&&U(...G)},hasExplicitCallback=U=>U?isArray$1(U)?U.some(G=>G.length>1):U.length>1:!1;function resolveTransitionProps(U){const G={};for(const Je in U)Je in DOMTransitionPropsValidators||(G[Je]=U[Je]);if(U.css===!1)return G;const{name:V="v",type:re,duration:te,enterFromClass:Q=`${V}-enter-from`,enterActiveClass:de=`${V}-enter-active`,enterToClass:I=`${V}-enter-to`,appearFromClass:_e=Q,appearActiveClass:ne=de,appearToClass:ge=I,leaveFromClass:ye=`${V}-leave-from`,leaveActiveClass:xe=`${V}-leave-active`,leaveToClass:we=`${V}-leave-to`}=U,ke=normalizeDuration(te),Se=ke&&ke[0],Oe=ke&&ke[1],{onBeforeEnter:Fe,onEnter:ze,onEnterCancelled:Le,onLeave:We,onLeaveCancelled:qe,onBeforeAppear:Ne=Fe,onAppear:Ke=ze,onAppearCancelled:ot=Le}=G,yt=(Je,Qe,tt)=>{removeTransitionClass(Je,Qe?ge:I),removeTransitionClass(Je,Qe?ne:de),tt&&tt()},ft=(Je,Qe)=>{removeTransitionClass(Je,we),removeTransitionClass(Je,xe),Qe&&Qe()},_t=Je=>(Qe,tt)=>{const ht=Je?Ke:ze,it=()=>yt(Qe,Je,tt);callHook(ht,[Qe,it]),nextFrame(()=>{removeTransitionClass(Qe,Je?_e:Q),addTransitionClass(Qe,Je?ge:I),hasExplicitCallback(ht)||whenTransitionEnds(Qe,re,Se,it)})};return extend$1(G,{onBeforeEnter(Je){callHook(Fe,[Je]),addTransitionClass(Je,Q),addTransitionClass(Je,de)},onBeforeAppear(Je){callHook(Ne,[Je]),addTransitionClass(Je,_e),addTransitionClass(Je,ne)},onEnter:_t(!1),onAppear:_t(!0),onLeave(Je,Qe){const tt=()=>ft(Je,Qe);addTransitionClass(Je,ye),forceReflow(),addTransitionClass(Je,xe),nextFrame(()=>{removeTransitionClass(Je,ye),addTransitionClass(Je,we),hasExplicitCallback(We)||whenTransitionEnds(Je,re,Oe,tt)}),callHook(We,[Je,tt])},onEnterCancelled(Je){yt(Je,!1),callHook(Le,[Je])},onAppearCancelled(Je){yt(Je,!0),callHook(ot,[Je])},onLeaveCancelled(Je){ft(Je),callHook(qe,[Je])}})}function normalizeDuration(U){if(U==null)return null;if(isObject$1(U))return[NumberOf(U.enter),NumberOf(U.leave)];{const G=NumberOf(U);return[G,G]}}function NumberOf(U){return toNumber(U)}function addTransitionClass(U,G){G.split(/\s+/).forEach(V=>V&&U.classList.add(V)),(U._vtc||(U._vtc=new Set)).add(G)}function removeTransitionClass(U,G){G.split(/\s+/).forEach(re=>re&&U.classList.remove(re));const{_vtc:V}=U;V&&(V.delete(G),V.size||(U._vtc=void 0))}function nextFrame(U){requestAnimationFrame(()=>{requestAnimationFrame(U)})}let endId=0;function whenTransitionEnds(U,G,V,re){const te=U._endId=++endId,Q=()=>{te===U._endId&&re()};if(V)return setTimeout(Q,V);const{type:de,timeout:I,propCount:_e}=getTransitionInfo(U,G);if(!de)return re();const ne=de+"end";let ge=0;const ye=()=>{U.removeEventListener(ne,xe),Q()},xe=we=>{we.target===U&&++ge>=_e&&ye()};setTimeout(()=>{ge<_e&&ye()},I+1),U.addEventListener(ne,xe)}function getTransitionInfo(U,G){const V=window.getComputedStyle(U),re=ke=>(V[ke]||"").split(", "),te=re(TRANSITION+"Delay"),Q=re(TRANSITION+"Duration"),de=getTimeout(te,Q),I=re(ANIMATION+"Delay"),_e=re(ANIMATION+"Duration"),ne=getTimeout(I,_e);let ge=null,ye=0,xe=0;G===TRANSITION?de>0&&(ge=TRANSITION,ye=de,xe=Q.length):G===ANIMATION?ne>0&&(ge=ANIMATION,ye=ne,xe=_e.length):(ye=Math.max(de,ne),ge=ye>0?de>ne?TRANSITION:ANIMATION:null,xe=ge?ge===TRANSITION?Q.length:_e.length:0);const we=ge===TRANSITION&&/\b(transform|all)(,|$)/.test(V[TRANSITION+"Property"]);return{type:ge,timeout:ye,propCount:xe,hasTransform:we}}function getTimeout(U,G){for(;U.length<G.length;)U=U.concat(U);return Math.max(...G.map((V,re)=>toMs(V)+toMs(U[re])))}function toMs(U){return Number(U.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const getModelAssigner=U=>{const G=U.props["onUpdate:modelValue"];return isArray$1(G)?V=>invokeArrayFns(G,V):G};function onCompositionStart(U){U.target.composing=!0}function onCompositionEnd(U){const G=U.target;G.composing&&(G.composing=!1,trigger(G,"input"))}function trigger(U,G){const V=document.createEvent("HTMLEvents");V.initEvent(G,!0,!0),U.dispatchEvent(V)}const vModelText={created(U,{modifiers:{lazy:G,trim:V,number:re}},te){U._assign=getModelAssigner(te);const Q=re||te.props&&te.props.type==="number";addEventListener(U,G?"change":"input",de=>{if(de.target.composing)return;let I=U.value;V?I=I.trim():Q&&(I=toNumber(I)),U._assign(I)}),V&&addEventListener(U,"change",()=>{U.value=U.value.trim()}),G||(addEventListener(U,"compositionstart",onCompositionStart),addEventListener(U,"compositionend",onCompositionEnd),addEventListener(U,"change",onCompositionEnd))},mounted(U,{value:G}){U.value=G==null?"":G},beforeUpdate(U,{value:G,modifiers:{lazy:V,trim:re,number:te}},Q){if(U._assign=getModelAssigner(Q),U.composing||document.activeElement===U&&(V||re&&U.value.trim()===G||(te||U.type==="number")&&toNumber(U.value)===G))return;const de=G==null?"":G;U.value!==de&&(U.value=de)}},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...U)=>{const G=ensureRenderer().createApp(...U),{mount:V}=G;return G.mount=re=>{const te=normalizeContainer(re);if(!te)return;const Q=G._component;!isFunction$2(Q)&&!Q.render&&!Q.template&&(Q.template=te.innerHTML),te.innerHTML="";const de=V(te,!1,te instanceof SVGElement);return te instanceof Element&&(te.removeAttribute("v-cloak"),te.setAttribute("data-v-app","")),de},G};function normalizeContainer(U){return isString$1(U)?document.querySelector(U):U}/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",PolySymbol=U=>hasSymbol?Symbol(U):"_vr_"+U,matchedRouteKey=PolySymbol("rvlm"),viewDepthKey=PolySymbol("rvd"),routerKey=PolySymbol("r"),routeLocationKey=PolySymbol("rl"),routerViewLocationKey=PolySymbol("rvl"),isBrowser$1=typeof window!="undefined";function isESModule(U){return U.__esModule||hasSymbol&&U[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams(U,G){const V={};for(const re in G){const te=G[re];V[re]=Array.isArray(te)?te.map(U):U(te)}return V}const noop$1=()=>{},TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=U=>U.replace(TRAILING_SLASH_RE,"");function parseURL(U,G,V="/"){let re,te={},Q="",de="";const I=G.indexOf("?"),_e=G.indexOf("#",I>-1?I:0);return I>-1&&(re=G.slice(0,I),Q=G.slice(I+1,_e>-1?_e:G.length),te=U(Q)),_e>-1&&(re=re||G.slice(0,_e),de=G.slice(_e,G.length)),re=resolveRelativePath(re!=null?re:G,V),{fullPath:re+(Q&&"?")+Q+de,path:re,query:te,hash:de}}function stringifyURL(U,G){const V=G.query?U(G.query):"";return G.path+(V&&"?")+V+(G.hash||"")}function stripBase(U,G){return!G||!U.toLowerCase().startsWith(G.toLowerCase())?U:U.slice(G.length)||"/"}function isSameRouteLocation(U,G,V){const re=G.matched.length-1,te=V.matched.length-1;return re>-1&&re===te&&isSameRouteRecord(G.matched[re],V.matched[te])&&isSameRouteLocationParams(G.params,V.params)&&U(G.query)===U(V.query)&&G.hash===V.hash}function isSameRouteRecord(U,G){return(U.aliasOf||U)===(G.aliasOf||G)}function isSameRouteLocationParams(U,G){if(Object.keys(U).length!==Object.keys(G).length)return!1;for(const V in U)if(!isSameRouteLocationParamsValue(U[V],G[V]))return!1;return!0}function isSameRouteLocationParamsValue(U,G){return Array.isArray(U)?isEquivalentArray(U,G):Array.isArray(G)?isEquivalentArray(G,U):U===G}function isEquivalentArray(U,G){return Array.isArray(G)?U.length===G.length&&U.every((V,re)=>V===G[re]):U.length===1&&U[0]===G}function resolveRelativePath(U,G){if(U.startsWith("/"))return U;if(!U)return G;const V=G.split("/"),re=U.split("/");let te=V.length-1,Q,de;for(Q=0;Q<re.length;Q++)if(de=re[Q],!(te===1||de==="."))if(de==="..")te--;else break;return V.slice(0,te).join("/")+"/"+re.slice(Q-(Q===re.length?1:0)).join("/")}var NavigationType;(function(U){U.pop="pop",U.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(U){U.back="back",U.forward="forward",U.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(U){if(!U)if(isBrowser$1){const G=document.querySelector("base");U=G&&G.getAttribute("href")||"/",U=U.replace(/^\w+:\/\/[^\/]+/,"")}else U="/";return U[0]!=="/"&&U[0]!=="#"&&(U="/"+U),removeTrailingSlash(U)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(U,G){return U.replace(BEFORE_HASH_RE,"#")+G}function getElementPosition(U,G){const V=document.documentElement.getBoundingClientRect(),re=U.getBoundingClientRect();return{behavior:G.behavior,left:re.left-V.left-(G.left||0),top:re.top-V.top-(G.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(U){let G;if("el"in U){const V=U.el,re=typeof V=="string"&&V.startsWith("#"),te=typeof V=="string"?re?document.getElementById(V.slice(1)):document.querySelector(V):V;if(!te)return;G=getElementPosition(te,U)}else G=U;"scrollBehavior"in document.documentElement.style?window.scrollTo(G):window.scrollTo(G.left!=null?G.left:window.pageXOffset,G.top!=null?G.top:window.pageYOffset)}function getScrollKey(U,G){return(history.state?history.state.position-G:-1)+U}const scrollPositions=new Map;function saveScrollPosition(U,G){scrollPositions.set(U,G)}function getSavedScrollPosition(U){const G=scrollPositions.get(U);return scrollPositions.delete(U),G}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(U,G){const{pathname:V,search:re,hash:te}=G,Q=U.indexOf("#");if(Q>-1){let I=te.includes(U.slice(Q))?U.slice(Q).length:1,_e=te.slice(I);return _e[0]!=="/"&&(_e="/"+_e),stripBase(_e,"")}return stripBase(V,U)+re+te}function useHistoryListeners(U,G,V,re){let te=[],Q=[],de=null;const I=({state:xe})=>{const we=createCurrentLocation(U,location),ke=V.value,Se=G.value;let Oe=0;if(xe){if(V.value=we,G.value=xe,de&&de===ke){de=null;return}Oe=Se?xe.position-Se.position:0}else re(we);te.forEach(Fe=>{Fe(V.value,ke,{delta:Oe,type:NavigationType.pop,direction:Oe?Oe>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function _e(){de=V.value}function ne(xe){te.push(xe);const we=()=>{const ke=te.indexOf(xe);ke>-1&&te.splice(ke,1)};return Q.push(we),we}function ge(){const{history:xe}=window;!xe.state||xe.replaceState(assign$1({},xe.state,{scroll:computeScrollPosition()}),"")}function ye(){for(const xe of Q)xe();Q=[],window.removeEventListener("popstate",I),window.removeEventListener("beforeunload",ge)}return window.addEventListener("popstate",I),window.addEventListener("beforeunload",ge),{pauseListeners:_e,listen:ne,destroy:ye}}function buildState(U,G,V,re=!1,te=!1){return{back:U,current:G,forward:V,replaced:re,position:window.history.length,scroll:te?computeScrollPosition():null}}function useHistoryStateNavigation(U){const{history:G,location:V}=window,re={value:createCurrentLocation(U,V)},te={value:G.state};te.value||Q(re.value,{back:null,current:re.value,forward:null,position:G.length-1,replaced:!0,scroll:null},!0);function Q(_e,ne,ge){const ye=U.indexOf("#"),xe=ye>-1?(V.host&&document.querySelector("base")?U:U.slice(ye))+_e:createBaseLocation()+U+_e;try{G[ge?"replaceState":"pushState"](ne,"",xe),te.value=ne}catch(we){console.error(we),V[ge?"replace":"assign"](xe)}}function de(_e,ne){const ge=assign$1({},G.state,buildState(te.value.back,_e,te.value.forward,!0),ne,{position:te.value.position});Q(_e,ge,!0),re.value=_e}function I(_e,ne){const ge=assign$1({},te.value,G.state,{forward:_e,scroll:computeScrollPosition()});Q(ge.current,ge,!0);const ye=assign$1({},buildState(re.value,_e,null),{position:ge.position+1},ne);Q(_e,ye,!1),re.value=_e}return{location:re,state:te,push:I,replace:de}}function createWebHistory(U){U=normalizeBase(U);const G=useHistoryStateNavigation(U),V=useHistoryListeners(U,G.state,G.location,G.replace);function re(Q,de=!0){de||V.pauseListeners(),history.go(Q)}const te=assign$1({location:"",base:U,go:re,createHref:createHref.bind(null,U)},G,V);return Object.defineProperty(te,"location",{enumerable:!0,get:()=>G.location.value}),Object.defineProperty(te,"state",{enumerable:!0,get:()=>G.state.value}),te}function isRouteLocation(U){return typeof U=="string"||U&&typeof U=="object"}function isRouteName(U){return typeof U=="string"||typeof U=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=PolySymbol("nf");var NavigationFailureType;(function(U){U[U.aborted=4]="aborted",U[U.cancelled=8]="cancelled",U[U.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(U,G){return assign$1(new Error,{type:U,[NavigationFailureSymbol]:!0},G)}function isNavigationFailure(U,G){return U instanceof Error&&NavigationFailureSymbol in U&&(G==null||!!(U.type&G))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(U,G){const V=assign$1({},BASE_PATH_PARSER_OPTIONS,G),re=[];let te=V.start?"^":"";const Q=[];for(const ne of U){const ge=ne.length?[]:[90];V.strict&&!ne.length&&(te+="/");for(let ye=0;ye<ne.length;ye++){const xe=ne[ye];let we=40+(V.sensitive?.25:0);if(xe.type===0)ye||(te+="/"),te+=xe.value.replace(REGEX_CHARS_RE,"\\$&"),we+=40;else if(xe.type===1){const{value:ke,repeatable:Se,optional:Oe,regexp:Fe}=xe;Q.push({name:ke,repeatable:Se,optional:Oe});const ze=Fe||BASE_PARAM_PATTERN;if(ze!==BASE_PARAM_PATTERN){we+=10;try{new RegExp(`(${ze})`)}catch(We){throw new Error(`Invalid custom RegExp for param "${ke}" (${ze}): `+We.message)}}let Le=Se?`((?:${ze})(?:/(?:${ze}))*)`:`(${ze})`;ye||(Le=Oe&&ne.length<2?`(?:/${Le})`:"/"+Le),Oe&&(Le+="?"),te+=Le,we+=20,Oe&&(we+=-8),Se&&(we+=-20),ze===".*"&&(we+=-50)}ge.push(we)}re.push(ge)}if(V.strict&&V.end){const ne=re.length-1;re[ne][re[ne].length-1]+=.7000000000000001}V.strict||(te+="/?"),V.end?te+="$":V.strict&&(te+="(?:/|$)");const de=new RegExp(te,V.sensitive?"":"i");function I(ne){const ge=ne.match(de),ye={};if(!ge)return null;for(let xe=1;xe<ge.length;xe++){const we=ge[xe]||"",ke=Q[xe-1];ye[ke.name]=we&&ke.repeatable?we.split("/"):we}return ye}function _e(ne){let ge="",ye=!1;for(const xe of U){(!ye||!ge.endsWith("/"))&&(ge+="/"),ye=!1;for(const we of xe)if(we.type===0)ge+=we.value;else if(we.type===1){const{value:ke,repeatable:Se,optional:Oe}=we,Fe=ke in ne?ne[ke]:"";if(Array.isArray(Fe)&&!Se)throw new Error(`Provided param "${ke}" is an array but it is not repeatable (* or + modifiers)`);const ze=Array.isArray(Fe)?Fe.join("/"):Fe;if(!ze)if(Oe)xe.length<2&&(ge.endsWith("/")?ge=ge.slice(0,-1):ye=!0);else throw new Error(`Missing required param "${ke}"`);ge+=ze}}return ge}return{re:de,score:re,keys:Q,parse:I,stringify:_e}}function compareScoreArray(U,G){let V=0;for(;V<U.length&&V<G.length;){const re=G[V]-U[V];if(re)return re;V++}return U.length<G.length?U.length===1&&U[0]===40+40?-1:1:U.length>G.length?G.length===1&&G[0]===40+40?1:-1:0}function comparePathParserScore(U,G){let V=0;const re=U.score,te=G.score;for(;V<re.length&&V<te.length;){const Q=compareScoreArray(re[V],te[V]);if(Q)return Q;V++}return te.length-re.length}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(U){if(!U)return[[]];if(U==="/")return[[ROOT_TOKEN]];if(!U.startsWith("/"))throw new Error(`Invalid path "${U}"`);function G(we){throw new Error(`ERR (${V})/"${ne}": ${we}`)}let V=0,re=V;const te=[];let Q;function de(){Q&&te.push(Q),Q=[]}let I=0,_e,ne="",ge="";function ye(){!ne||(V===0?Q.push({type:0,value:ne}):V===1||V===2||V===3?(Q.length>1&&(_e==="*"||_e==="+")&&G(`A repeatable param (${ne}) must be alone in its segment. eg: '/:ids+.`),Q.push({type:1,value:ne,regexp:ge,repeatable:_e==="*"||_e==="+",optional:_e==="*"||_e==="?"})):G("Invalid state to consume buffer"),ne="")}function xe(){ne+=_e}for(;I<U.length;){if(_e=U[I++],_e==="\\"&&V!==2){re=V,V=4;continue}switch(V){case 0:_e==="/"?(ne&&ye(),de()):_e===":"?(ye(),V=1):xe();break;case 4:xe(),V=re;break;case 1:_e==="("?V=2:VALID_PARAM_RE.test(_e)?xe():(ye(),V=0,_e!=="*"&&_e!=="?"&&_e!=="+"&&I--);break;case 2:_e===")"?ge[ge.length-1]=="\\"?ge=ge.slice(0,-1)+_e:V=3:ge+=_e;break;case 3:ye(),V=0,_e!=="*"&&_e!=="?"&&_e!=="+"&&I--,ge="";break;default:G("Unknown state");break}}return V===2&&G(`Unfinished custom RegExp for param "${ne}"`),ye(),de(),te}function createRouteRecordMatcher(U,G,V){const re=tokensToParser(tokenizePath(U.path),V),te=assign$1(re,{record:U,parent:G,children:[],alias:[]});return G&&!te.record.aliasOf==!G.record.aliasOf&&G.children.push(te),te}function createRouterMatcher(U,G){const V=[],re=new Map;G=mergeOptions({strict:!1,end:!0,sensitive:!1},G);function te(ge){return re.get(ge)}function Q(ge,ye,xe){const we=!xe,ke=normalizeRouteRecord(ge);ke.aliasOf=xe&&xe.record;const Se=mergeOptions(G,ge),Oe=[ke];if("alias"in ge){const Le=typeof ge.alias=="string"?[ge.alias]:ge.alias;for(const We of Le)Oe.push(assign$1({},ke,{components:xe?xe.record.components:ke.components,path:We,aliasOf:xe?xe.record:ke}))}let Fe,ze;for(const Le of Oe){const{path:We}=Le;if(ye&&We[0]!=="/"){const qe=ye.record.path,Ne=qe[qe.length-1]==="/"?"":"/";Le.path=ye.record.path+(We&&Ne+We)}if(Fe=createRouteRecordMatcher(Le,ye,Se),xe?xe.alias.push(Fe):(ze=ze||Fe,ze!==Fe&&ze.alias.push(Fe),we&&ge.name&&!isAliasRecord(Fe)&&de(ge.name)),"children"in ke){const qe=ke.children;for(let Ne=0;Ne<qe.length;Ne++)Q(qe[Ne],Fe,xe&&xe.children[Ne])}xe=xe||Fe,_e(Fe)}return ze?()=>{de(ze)}:noop$1}function de(ge){if(isRouteName(ge)){const ye=re.get(ge);ye&&(re.delete(ge),V.splice(V.indexOf(ye),1),ye.children.forEach(de),ye.alias.forEach(de))}else{const ye=V.indexOf(ge);ye>-1&&(V.splice(ye,1),ge.record.name&&re.delete(ge.record.name),ge.children.forEach(de),ge.alias.forEach(de))}}function I(){return V}function _e(ge){let ye=0;for(;ye<V.length&&comparePathParserScore(ge,V[ye])>=0&&(ge.record.path!==V[ye].record.path||!isRecordChildOf(ge,V[ye]));)ye++;V.splice(ye,0,ge),ge.record.name&&!isAliasRecord(ge)&&re.set(ge.record.name,ge)}function ne(ge,ye){let xe,we={},ke,Se;if("name"in ge&&ge.name){if(xe=re.get(ge.name),!xe)throw createRouterError(1,{location:ge});Se=xe.record.name,we=assign$1(paramsFromLocation(ye.params,xe.keys.filter(ze=>!ze.optional).map(ze=>ze.name)),ge.params),ke=xe.stringify(we)}else if("path"in ge)ke=ge.path,xe=V.find(ze=>ze.re.test(ke)),xe&&(we=xe.parse(ke),Se=xe.record.name);else{if(xe=ye.name?re.get(ye.name):V.find(ze=>ze.re.test(ye.path)),!xe)throw createRouterError(1,{location:ge,currentLocation:ye});Se=xe.record.name,we=assign$1({},ye.params,ge.params),ke=xe.stringify(we)}const Oe=[];let Fe=xe;for(;Fe;)Oe.unshift(Fe.record),Fe=Fe.parent;return{name:Se,path:ke,params:we,matched:Oe,meta:mergeMetaFields(Oe)}}return U.forEach(ge=>Q(ge)),{addRoute:Q,resolve:ne,removeRoute:de,getRoutes:I,getRecordMatcher:te}}function paramsFromLocation(U,G){const V={};for(const re of G)re in U&&(V[re]=U[re]);return V}function normalizeRouteRecord(U){return{path:U.path,redirect:U.redirect,name:U.name,meta:U.meta||{},aliasOf:void 0,beforeEnter:U.beforeEnter,props:normalizeRecordProps(U),children:U.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in U?U.components||{}:{default:U.component}}}function normalizeRecordProps(U){const G={},V=U.props||!1;if("component"in U)G.default=V;else for(const re in U.components)G[re]=typeof V=="boolean"?V:V[re];return G}function isAliasRecord(U){for(;U;){if(U.record.aliasOf)return!0;U=U.parent}return!1}function mergeMetaFields(U){return U.reduce((G,V)=>assign$1(G,V.meta),{})}function mergeOptions(U,G){const V={};for(const re in U)V[re]=re in G?G[re]:U[re];return V}function isRecordChildOf(U,G){return G.children.some(V=>V===U||isRecordChildOf(U,V))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(U){return encodeURI(""+U).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(U){return commonEncode(U).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(U){return commonEncode(U).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(U){return encodeQueryValue(U).replace(EQUAL_RE,"%3D")}function encodePath(U){return commonEncode(U).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(U){return U==null?"":encodePath(U).replace(SLASH_RE,"%2F")}function decode(U){try{return decodeURIComponent(""+U)}catch{}return""+U}function parseQuery(U){const G={};if(U===""||U==="?")return G;const re=(U[0]==="?"?U.slice(1):U).split("&");for(let te=0;te<re.length;++te){const Q=re[te].replace(PLUS_RE," "),de=Q.indexOf("="),I=decode(de<0?Q:Q.slice(0,de)),_e=de<0?null:decode(Q.slice(de+1));if(I in G){let ne=G[I];Array.isArray(ne)||(ne=G[I]=[ne]),ne.push(_e)}else G[I]=_e}return G}function stringifyQuery(U){let G="";for(let V in U){const re=U[V];if(V=encodeQueryKey(V),re==null){re!==void 0&&(G+=(G.length?"&":"")+V);continue}(Array.isArray(re)?re.map(Q=>Q&&encodeQueryValue(Q)):[re&&encodeQueryValue(re)]).forEach(Q=>{Q!==void 0&&(G+=(G.length?"&":"")+V,Q!=null&&(G+="="+Q))})}return G}function normalizeQuery(U){const G={};for(const V in U){const re=U[V];re!==void 0&&(G[V]=Array.isArray(re)?re.map(te=>te==null?null:""+te):re==null?re:""+re)}return G}function useCallbacks(){let U=[];function G(re){return U.push(re),()=>{const te=U.indexOf(re);te>-1&&U.splice(te,1)}}function V(){U=[]}return{add:G,list:()=>U,reset:V}}function guardToPromiseFn(U,G,V,re,te){const Q=re&&(re.enterCallbacks[te]=re.enterCallbacks[te]||[]);return()=>new Promise((de,I)=>{const _e=ye=>{ye===!1?I(createRouterError(4,{from:V,to:G})):ye instanceof Error?I(ye):isRouteLocation(ye)?I(createRouterError(2,{from:G,to:ye})):(Q&&re.enterCallbacks[te]===Q&&typeof ye=="function"&&Q.push(ye),de())},ne=U.call(re&&re.instances[te],G,V,_e);let ge=Promise.resolve(ne);U.length<3&&(ge=ge.then(_e)),ge.catch(ye=>I(ye))})}function extractComponentsGuards(U,G,V,re){const te=[];for(const Q of U)for(const de in Q.components){let I=Q.components[de];if(!(G!=="beforeRouteEnter"&&!Q.instances[de]))if(isRouteComponent(I)){const ne=(I.__vccOpts||I)[G];ne&&te.push(guardToPromiseFn(ne,V,re,Q,de))}else{let _e=I();te.push(()=>_e.then(ne=>{if(!ne)return Promise.reject(new Error(`Couldn't resolve component "${de}" at "${Q.path}"`));const ge=isESModule(ne)?ne.default:ne;Q.components[de]=ge;const xe=(ge.__vccOpts||ge)[G];return xe&&guardToPromiseFn(xe,V,re,Q,de)()}))}}return te}function isRouteComponent(U){return typeof U=="object"||"displayName"in U||"props"in U||"__vccOpts"in U}function useLink(U){const G=inject(routerKey),V=inject(routeLocationKey),re=computed(()=>G.resolve(unref(U.to))),te=computed(()=>{const{matched:_e}=re.value,{length:ne}=_e,ge=_e[ne-1],ye=V.matched;if(!ge||!ye.length)return-1;const xe=ye.findIndex(isSameRouteRecord.bind(null,ge));if(xe>-1)return xe;const we=getOriginalPath(_e[ne-2]);return ne>1&&getOriginalPath(ge)===we&&ye[ye.length-1].path!==we?ye.findIndex(isSameRouteRecord.bind(null,_e[ne-2])):xe}),Q=computed(()=>te.value>-1&&includesParams(V.params,re.value.params)),de=computed(()=>te.value>-1&&te.value===V.matched.length-1&&isSameRouteLocationParams(V.params,re.value.params));function I(_e={}){return guardEvent(_e)?G[unref(U.replace)?"replace":"push"](unref(U.to)).catch(noop$1):Promise.resolve()}return{route:re,href:computed(()=>re.value.href),isActive:Q,isExactActive:de,navigate:I}}const RouterLinkImpl=defineComponent({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(U,{slots:G}){const V=reactive(useLink(U)),{options:re}=inject(routerKey),te=computed(()=>({[getLinkClass(U.activeClass,re.linkActiveClass,"router-link-active")]:V.isActive,[getLinkClass(U.exactActiveClass,re.linkExactActiveClass,"router-link-exact-active")]:V.isExactActive}));return()=>{const Q=G.default&&G.default(V);return U.custom?Q:h$3("a",{"aria-current":V.isExactActive?U.ariaCurrentValue:null,href:V.href,onClick:V.navigate,class:te.value},Q)}}}),RouterLink=RouterLinkImpl;function guardEvent(U){if(!(U.metaKey||U.altKey||U.ctrlKey||U.shiftKey)&&!U.defaultPrevented&&!(U.button!==void 0&&U.button!==0)){if(U.currentTarget&&U.currentTarget.getAttribute){const G=U.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(G))return}return U.preventDefault&&U.preventDefault(),!0}}function includesParams(U,G){for(const V in G){const re=G[V],te=U[V];if(typeof re=="string"){if(re!==te)return!1}else if(!Array.isArray(te)||te.length!==re.length||re.some((Q,de)=>Q!==te[de]))return!1}return!0}function getOriginalPath(U){return U?U.aliasOf?U.aliasOf.path:U.path:""}const getLinkClass=(U,G,V)=>U!=null?U:G!=null?G:V,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(U,{attrs:G,slots:V}){const re=inject(routerViewLocationKey),te=computed(()=>U.route||re.value),Q=inject(viewDepthKey,0),de=computed(()=>te.value.matched[Q]);provide(viewDepthKey,Q+1),provide(matchedRouteKey,de),provide(routerViewLocationKey,te);const I=ref();return watch(()=>[I.value,de.value,U.name],([_e,ne,ge],[ye,xe,we])=>{ne&&(ne.instances[ge]=_e,xe&&xe!==ne&&_e&&_e===ye&&(ne.leaveGuards.size||(ne.leaveGuards=xe.leaveGuards),ne.updateGuards.size||(ne.updateGuards=xe.updateGuards))),_e&&ne&&(!xe||!isSameRouteRecord(ne,xe)||!ye)&&(ne.enterCallbacks[ge]||[]).forEach(ke=>ke(_e))},{flush:"post"}),()=>{const _e=te.value,ne=de.value,ge=ne&&ne.components[U.name],ye=U.name;if(!ge)return normalizeSlot(V.default,{Component:ge,route:_e});const xe=ne.props[U.name],we=xe?xe===!0?_e.params:typeof xe=="function"?xe(_e):xe:null,Se=h$3(ge,assign$1({},we,G,{onVnodeUnmounted:Oe=>{Oe.component.isUnmounted&&(ne.instances[ye]=null)},ref:I}));return normalizeSlot(V.default,{Component:Se,route:_e})||Se}}});function normalizeSlot(U,G){if(!U)return null;const V=U(G);return V.length===1?V[0]:V}const RouterView=RouterViewImpl;function createRouter(U){const G=createRouterMatcher(U.routes,U),V=U.parseQuery||parseQuery,re=U.stringifyQuery||stringifyQuery,te=U.history,Q=useCallbacks(),de=useCallbacks(),I=useCallbacks(),_e=shallowRef(START_LOCATION_NORMALIZED);let ne=START_LOCATION_NORMALIZED;isBrowser$1&&U.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const ge=applyToParams.bind(null,Jt=>""+Jt),ye=applyToParams.bind(null,encodeParam),xe=applyToParams.bind(null,decode);function we(Jt,on){let Vt,Rt;return isRouteName(Jt)?(Vt=G.getRecordMatcher(Jt),Rt=on):Rt=Jt,G.addRoute(Rt,Vt)}function ke(Jt){const on=G.getRecordMatcher(Jt);on&&G.removeRoute(on)}function Se(){return G.getRoutes().map(Jt=>Jt.record)}function Oe(Jt){return!!G.getRecordMatcher(Jt)}function Fe(Jt,on){if(on=assign$1({},on||_e.value),typeof Jt=="string"){const In=parseURL(V,Jt,on.path),It=G.resolve({path:In.path},on),$t=te.createHref(In.fullPath);return assign$1(In,It,{params:xe(It.params),hash:decode(In.hash),redirectedFrom:void 0,href:$t})}let Vt;if("path"in Jt)Vt=assign$1({},Jt,{path:parseURL(V,Jt.path,on.path).path});else{const In=assign$1({},Jt.params);for(const It in In)In[It]==null&&delete In[It];Vt=assign$1({},Jt,{params:ye(Jt.params)}),on.params=ye(on.params)}const Rt=G.resolve(Vt,on),Yt=Jt.hash||"";Rt.params=ge(xe(Rt.params));const un=stringifyURL(re,assign$1({},Jt,{hash:encodeHash(Yt),path:Rt.path})),yn=te.createHref(un);return assign$1({fullPath:un,hash:Yt,query:re===stringifyQuery?normalizeQuery(Jt.query):Jt.query||{}},Rt,{redirectedFrom:void 0,href:yn})}function ze(Jt){return typeof Jt=="string"?parseURL(V,Jt,_e.value.path):assign$1({},Jt)}function Le(Jt,on){if(ne!==Jt)return createRouterError(8,{from:on,to:Jt})}function We(Jt){return Ke(Jt)}function qe(Jt){return We(assign$1(ze(Jt),{replace:!0}))}function Ne(Jt){const on=Jt.matched[Jt.matched.length-1];if(on&&on.redirect){const{redirect:Vt}=on;let Rt=typeof Vt=="function"?Vt(Jt):Vt;return typeof Rt=="string"&&(Rt=Rt.includes("?")||Rt.includes("#")?Rt=ze(Rt):{path:Rt},Rt.params={}),assign$1({query:Jt.query,hash:Jt.hash,params:Jt.params},Rt)}}function Ke(Jt,on){const Vt=ne=Fe(Jt),Rt=_e.value,Yt=Jt.state,un=Jt.force,yn=Jt.replace===!0,In=Ne(Vt);if(In)return Ke(assign$1(ze(In),{state:Yt,force:un,replace:yn}),on||Vt);const It=Vt;It.redirectedFrom=on;let $t;return!un&&isSameRouteLocation(re,Rt,Vt)&&($t=createRouterError(16,{to:It,from:Rt}),Nt(Rt,Rt,!0,!1)),($t?Promise.resolve($t):yt(It,Rt)).catch(an=>isNavigationFailure(an)?isNavigationFailure(an,2)?an:ut(an):pt(an,It,Rt)).then(an=>{if(an){if(isNavigationFailure(an,2))return Ke(assign$1(ze(an.to),{state:Yt,force:un,replace:yn}),on||It)}else an=_t(It,Rt,!0,yn,Yt);return ft(It,Rt,an),an})}function ot(Jt,on){const Vt=Le(Jt,on);return Vt?Promise.reject(Vt):Promise.resolve()}function yt(Jt,on){let Vt;const[Rt,Yt,un]=extractChangingRecords(Jt,on);Vt=extractComponentsGuards(Rt.reverse(),"beforeRouteLeave",Jt,on);for(const In of Rt)In.leaveGuards.forEach(It=>{Vt.push(guardToPromiseFn(It,Jt,on))});const yn=ot.bind(null,Jt,on);return Vt.push(yn),runGuardQueue(Vt).then(()=>{Vt=[];for(const In of Q.list())Vt.push(guardToPromiseFn(In,Jt,on));return Vt.push(yn),runGuardQueue(Vt)}).then(()=>{Vt=extractComponentsGuards(Yt,"beforeRouteUpdate",Jt,on);for(const In of Yt)In.updateGuards.forEach(It=>{Vt.push(guardToPromiseFn(It,Jt,on))});return Vt.push(yn),runGuardQueue(Vt)}).then(()=>{Vt=[];for(const In of Jt.matched)if(In.beforeEnter&&!on.matched.includes(In))if(Array.isArray(In.beforeEnter))for(const It of In.beforeEnter)Vt.push(guardToPromiseFn(It,Jt,on));else Vt.push(guardToPromiseFn(In.beforeEnter,Jt,on));return Vt.push(yn),runGuardQueue(Vt)}).then(()=>(Jt.matched.forEach(In=>In.enterCallbacks={}),Vt=extractComponentsGuards(un,"beforeRouteEnter",Jt,on),Vt.push(yn),runGuardQueue(Vt))).then(()=>{Vt=[];for(const In of de.list())Vt.push(guardToPromiseFn(In,Jt,on));return Vt.push(yn),runGuardQueue(Vt)}).catch(In=>isNavigationFailure(In,8)?In:Promise.reject(In))}function ft(Jt,on,Vt){for(const Rt of I.list())Rt(Jt,on,Vt)}function _t(Jt,on,Vt,Rt,Yt){const un=Le(Jt,on);if(un)return un;const yn=on===START_LOCATION_NORMALIZED,In=isBrowser$1?history.state:{};Vt&&(Rt||yn?te.replace(Jt.fullPath,assign$1({scroll:yn&&In&&In.scroll},Yt)):te.push(Jt.fullPath,Yt)),_e.value=Jt,Nt(Jt,on,Vt,yn),ut()}let Je;function Qe(){Je=te.listen((Jt,on,Vt)=>{const Rt=Fe(Jt),Yt=Ne(Rt);if(Yt){Ke(assign$1(Yt,{replace:!0}),Rt).catch(noop$1);return}ne=Rt;const un=_e.value;isBrowser$1&&saveScrollPosition(getScrollKey(un.fullPath,Vt.delta),computeScrollPosition()),yt(Rt,un).catch(yn=>isNavigationFailure(yn,12)?yn:isNavigationFailure(yn,2)?(Ke(yn.to,Rt).then(In=>{isNavigationFailure(In,20)&&!Vt.delta&&Vt.type===NavigationType.pop&&te.go(-1,!1)}).catch(noop$1),Promise.reject()):(Vt.delta&&te.go(-Vt.delta,!1),pt(yn,Rt,un))).then(yn=>{yn=yn||_t(Rt,un,!1),yn&&(Vt.delta?te.go(-Vt.delta,!1):Vt.type===NavigationType.pop&&isNavigationFailure(yn,20)&&te.go(-1,!1)),ft(Rt,un,yn)}).catch(noop$1)})}let tt=useCallbacks(),ht=useCallbacks(),it;function pt(Jt,on,Vt){ut(Jt);const Rt=ht.list();return Rt.length?Rt.forEach(Yt=>Yt(Jt,on,Vt)):console.error(Jt),Promise.reject(Jt)}function vt(){return it&&_e.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Jt,on)=>{tt.add([Jt,on])})}function ut(Jt){return it||(it=!Jt,Qe(),tt.list().forEach(([on,Vt])=>Jt?Vt(Jt):on()),tt.reset()),Jt}function Nt(Jt,on,Vt,Rt){const{scrollBehavior:Yt}=U;if(!isBrowser$1||!Yt)return Promise.resolve();const un=!Vt&&getSavedScrollPosition(getScrollKey(Jt.fullPath,0))||(Rt||!Vt)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Yt(Jt,on,un)).then(yn=>yn&&scrollToPosition(yn)).catch(yn=>pt(yn,Jt,on))}const at=Jt=>te.go(Jt);let Mt;const nn=new Set;return{currentRoute:_e,addRoute:we,removeRoute:ke,hasRoute:Oe,getRoutes:Se,resolve:Fe,options:U,push:We,replace:qe,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:Q.add,beforeResolve:de.add,afterEach:I.add,onError:ht.add,isReady:vt,install(Jt){const on=this;Jt.component("RouterLink",RouterLink),Jt.component("RouterView",RouterView),Jt.config.globalProperties.$router=on,Object.defineProperty(Jt.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(_e)}),isBrowser$1&&!Mt&&_e.value===START_LOCATION_NORMALIZED&&(Mt=!0,We(te.location).catch(Yt=>{}));const Vt={};for(const Yt in START_LOCATION_NORMALIZED)Vt[Yt]=computed(()=>_e.value[Yt]);Jt.provide(routerKey,on),Jt.provide(routeLocationKey,reactive(Vt)),Jt.provide(routerViewLocationKey,_e);const Rt=Jt.unmount;nn.add(Jt),Jt.unmount=function(){nn.delete(Jt),nn.size<1&&(ne=START_LOCATION_NORMALIZED,Je&&Je(),_e.value=START_LOCATION_NORMALIZED,Mt=!1,it=!1),Rt()}}}}function runGuardQueue(U){return U.reduce((G,V)=>G.then(()=>V()),Promise.resolve())}function extractChangingRecords(U,G){const V=[],re=[],te=[],Q=Math.max(G.matched.length,U.matched.length);for(let de=0;de<Q;de++){const I=G.matched[de];I&&(U.matched.find(ne=>isSameRouteRecord(ne,I))?re.push(I):V.push(I));const _e=U.matched[de];_e&&(G.matched.find(ne=>isSameRouteRecord(ne,_e))||te.push(_e))}return[V,re,te]}function useRouter(){return inject(routerKey)}function u$5(U,G,...V){if(U in G){let te=G[U];return typeof te=="function"?te(...V):te}let re=new Error(`Tried to handle "${U}" but there is no handler defined. Only defined handlers are: ${Object.keys(G).map(te=>`"${te}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(re,u$5),re}var m$1=(U=>(U[U.None=0]="None",U[U.RenderStrategy=1]="RenderStrategy",U[U.Static=2]="Static",U))(m$1||{}),h$2=(U=>(U[U.Unmount=0]="Unmount",U[U.Hidden=1]="Hidden",U))(h$2||{});function k(re){var te=re,{visible:U=!0,features:G=0}=te,V=Es(te,["visible","features"]);var Q;if(U||G&2&&V.props.static)return a$4(V);if(G&1){let de=(Q=V.props.unmount)==null||Q?0:1;return u$5(de,{[0](){return null},[1](){return a$4(Yo(Xr({},V),{props:Yo(Xr({},V.props),{hidden:!0,style:{display:"none"}})}))}})}return a$4(V)}function a$4({props:U,attrs:G,slots:V,slot:re,name:te}){var Q;let ne=R$2(U,["unmount","static"]),{as:de}=ne,I=Es(ne,["as"]),_e=(Q=V.default)==null?void 0:Q.call(V,re);if(de==="template"){if(Object.keys(I).length>0||Object.keys(G).length>0){let[ge,...ye]=_e!=null?_e:[];if(!b$3(ge)||ye.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${te} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(I).concat(Object.keys(G)).map(xe=>`  - ${xe}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(xe=>`  - ${xe}`).join(`
`)].join(`
`));return cloneVNode(ge,I)}return Array.isArray(_e)&&_e.length===1?_e[0]:_e}return h$3(de,I,_e)}function O(U){let G=Object.assign({},U);for(let V in G)G[V]===void 0&&delete G[V];return G}function R$2(U,G=[]){let V=Object.assign({},U);for(let re of G)re in V&&delete V[re];return V}function b$3(U){return U==null?!1:typeof U.type=="string"||typeof U.type=="object"||typeof U.type=="function"}let e$3=0;function n$2(){return++e$3}function t$2(){return n$2()}var o$1=(U=>(U.Space=" ",U.Enter="Enter",U.Escape="Escape",U.Backspace="Backspace",U.Delete="Delete",U.ArrowLeft="ArrowLeft",U.ArrowUp="ArrowUp",U.ArrowRight="ArrowRight",U.ArrowDown="ArrowDown",U.Home="Home",U.End="End",U.PageUp="PageUp",U.PageDown="PageDown",U.Tab="Tab",U))(o$1||{});function f$2(U){throw new Error("Unexpected object: "+U)}var a$3=(U=>(U[U.First=0]="First",U[U.Previous=1]="Previous",U[U.Next=2]="Next",U[U.Last=3]="Last",U[U.Specific=4]="Specific",U[U.Nothing=5]="Nothing",U))(a$3||{});function x$4(U,G){let V=G.resolveItems();if(V.length<=0)return null;let re=G.resolveActiveIndex(),te=re!=null?re:-1,Q=(()=>{switch(U.focus){case 0:return V.findIndex(de=>!G.resolveDisabled(de));case 1:{let de=V.slice().reverse().findIndex((I,_e,ne)=>te!==-1&&ne.length-_e-1>=te?!1:!G.resolveDisabled(I));return de===-1?de:V.length-1-de}case 2:return V.findIndex((de,I)=>I<=te?!1:!G.resolveDisabled(de));case 3:{let de=V.slice().reverse().findIndex(I=>!G.resolveDisabled(I));return de===-1?de:V.length-1-de}case 4:return V.findIndex(de=>G.resolveId(de)===U.id);case 5:return null;default:f$2(U)}})();return Q===-1?re:Q}function t$1(U){return U==null||U.value==null?null:"$el"in U.value?U.value.$el:U.value}let n$1=Symbol("Context");var l$3=(U=>(U[U.Open=0]="Open",U[U.Closed=1]="Closed",U))(l$3||{});function f$1(){return p$4()!==null}function p$4(){return inject(n$1,null)}function c$3(U){provide(n$1,U)}function r$4(U,G){if(U)return U;let V=G!=null?G:"button";if(typeof V=="string"&&V.toLowerCase()==="button")return"button"}function b$2(U,G){let V=ref(r$4(U.value.type,U.value.as));return onMounted(()=>{V.value=r$4(U.value.type,U.value.as)}),watchEffect(()=>{var re;V.value||!t$1(G)||t$1(G)instanceof HTMLButtonElement&&!((re=t$1(G))!=null&&re.hasAttribute("type"))&&(V.value="button")}),V}function e$2(U){if(typeof window=="undefined")return null;if(U instanceof Node)return U.ownerDocument;if(U!=null&&U.hasOwnProperty("value")){let G=t$1(U);if(G)return G.ownerDocument}return document}function p$3({container:U,accept:G,walk:V,enabled:re}){watchEffect(()=>{let te=U.value;if(!te||re!==void 0&&!re.value)return;let Q=e$2(U);if(!Q)return;let de=Object.assign(_e=>G(_e),{acceptNode:G}),I=Q.createTreeWalker(te,NodeFilter.SHOW_ELEMENT,de,!1);for(;I.nextNode();)V(I.currentNode)})}let c$2=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(U=>`${U}:not([tabindex='-1'])`).join(",");var p$2=(U=>(U[U.First=1]="First",U[U.Previous=2]="Previous",U[U.Next=4]="Next",U[U.Last=8]="Last",U[U.WrapAround=16]="WrapAround",U[U.NoScroll=32]="NoScroll",U))(p$2||{}),L$2=(U=>(U[U.Error=0]="Error",U[U.Overflow=1]="Overflow",U[U.Success=2]="Success",U[U.Underflow=3]="Underflow",U))(L$2||{}),N$1=(U=>(U[U.Previous=-1]="Previous",U[U.Next=1]="Next",U))(N$1||{});function T$2(U=document.body){return U==null?[]:Array.from(U.querySelectorAll(c$2))}var b$1=(U=>(U[U.Strict=0]="Strict",U[U.Loose=1]="Loose",U))(b$1||{});function S$1(U,G=0){var V;return U===((V=e$2(U))==null?void 0:V.body)?!1:u$5(G,{[0](){return U.matches(c$2)},[1](){let re=U;for(;re!==null;){if(re.matches(c$2))return!0;re=re.parentElement}return!1}})}function F$2(U){U==null||U.focus({preventScroll:!0})}let M=["textarea","input"].join(",");function h$1(U){var G,V;return(V=(G=U==null?void 0:U.matches)==null?void 0:G.call(U,M))!=null?V:!1}function v$2(U,G=V=>V){return U.slice().sort((V,re)=>{let te=G(V),Q=G(re);if(te===null||Q===null)return 0;let de=te.compareDocumentPosition(Q);return de&Node.DOCUMENT_POSITION_FOLLOWING?-1:de&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function H$2(U,G){var V;let re=(V=Array.isArray(U)?U.length>0?U[0].ownerDocument:document:U==null?void 0:U.ownerDocument)!=null?V:document,te=Array.isArray(U)?v$2(U):T$2(U),Q=re.activeElement,de=(()=>{if(G&5)return 1;if(G&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),I=(()=>{if(G&1)return 0;if(G&2)return Math.max(0,te.indexOf(Q))-1;if(G&4)return Math.max(0,te.indexOf(Q))+1;if(G&8)return te.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),_e=G&32?{preventScroll:!0}:{},ne=0,ge=te.length,ye;do{if(ne>=ge||ne+ge<=0)return 0;let xe=I+ne;if(G&16)xe=(xe+ge)%ge;else{if(xe<0)return 3;if(xe>=ge)return 1}ye=te[xe],ye==null||ye.focus(_e),ne+=de}while(ye!==re.activeElement);return ye.hasAttribute("tabindex")||ye.setAttribute("tabindex","0"),G&6&&h$1(ye)&&ye.select(),2}function w$1(U,G,V){typeof window!="undefined"&&watchEffect(re=>{window.addEventListener(U,G,V),re(()=>window.removeEventListener(U,G,V))})}function s$3(U){typeof queueMicrotask=="function"?queueMicrotask(U):Promise.resolve().then(U).catch(G=>setTimeout(()=>{throw G}))}var p$1=(U=>(U[U.None=1]="None",U[U.IgnoreScrollbars=2]="IgnoreScrollbars",U))(p$1||{});function g$4(U,G,V=1){let re=!1;function te(Q){if(re)return;re=!0,s$3(()=>{re=!1});let de=Q.target;if(!de.ownerDocument.documentElement.contains(de))return;let I=function _e(ne){return typeof ne=="function"?_e(ne()):Array.isArray(ne)||ne instanceof Set?ne:[ne]}(U);if((V&2)===2){let _e=20,ne=de.ownerDocument.documentElement;if(Q.clientX>ne.clientWidth-_e||Q.clientX<_e||Q.clientY>ne.clientHeight-_e||Q.clientY<_e)return}for(let _e of I){if(_e===null)continue;let ne=_e instanceof HTMLElement?_e:t$1(_e);if(ne!=null&&ne.contains(de))return}G(Q,de)}w$1("pointerdown",te),w$1("mousedown",te)}let l$2=defineComponent({name:"VisuallyHidden",props:{as:{type:[Object,String],default:"div"}},setup(U,{slots:G,attrs:V}){return()=>k({props:Yo(Xr({},U),{style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",display:"none"}}),slot:{},attrs:V,slots:G,name:"VisuallyHidden"})}});function p(U){var G;let V=(G=U==null?void 0:U.form)!=null?G:U.closest("form");if(V){for(let re of V.elements)if(re.tagName==="INPUT"&&re.type==="submit"||re.tagName==="BUTTON"&&re.type==="submit"||re.nodeName==="INPUT"&&re.type==="image"){re.click();return}}}function r$3(U,G,V,re){typeof window!="undefined"&&watchEffect(te=>{U=U!=null?U:window,U.addEventListener(G,V,re),te(()=>U.removeEventListener(G,V,re))})}var g$3=(U=>(U[U.None=1]="None",U[U.InitialFocus=2]="InitialFocus",U[U.TabLock=4]="TabLock",U[U.FocusLock=8]="FocusLock",U[U.RestoreFocus=16]="RestoreFocus",U[U.All=30]="All",U))(g$3||{});function W$3(U,G=ref(30),V=ref({})){var re,te;let Q=ref(null),de=ref(null),I={value:!1},_e=computed(()=>Boolean(G.value&16)),ne=computed(()=>Boolean(G.value&2)),ge=computed(()=>e$2(U));return onMounted(()=>{watch(_e,(ye,xe)=>{var we;ye!==xe&&(!_e.value||(I.value=!0,Q.value||(Q.value=(we=ge.value)==null?void 0:we.activeElement)))},{immediate:!0}),watch(_e,(ye,xe,we)=>{ye!==xe&&(!_e.value||we(()=>{I.value!==!1&&(I.value=!1,F$2(Q.value),Q.value=null)}))},{immediate:!0}),watch([U,V,V.value.initialFocus,ne],(ye,xe)=>{var we,ke;if(ye.every((ze,Le)=>(xe==null?void 0:xe[Le])===ze)||!ne.value)return;let Se=U.value;if(!Se)return;let Oe=t$1(V.value.initialFocus),Fe=(we=ge.value)==null?void 0:we.activeElement;if(Oe){if(Oe===Fe){de.value=Fe;return}}else if(Se.contains(Fe)){de.value=Fe;return}Oe?F$2(Oe):H$2(Se,p$2.First)===L$2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),de.value=(ke=ge.value)==null?void 0:ke.activeElement},{immediate:!0})}),r$3((re=ge.value)==null?void 0:re.defaultView,"keydown",ye=>{var xe;!(G.value&4)||!U.value||ye.key===o$1.Tab&&(ye.preventDefault(),H$2(U.value,(ye.shiftKey?p$2.Previous:p$2.Next)|p$2.WrapAround)===L$2.Success&&(de.value=(xe=ge.value)==null?void 0:xe.activeElement))}),r$3((te=ge.value)==null?void 0:te.defaultView,"focus",ye=>{var xe;if(!(G.value&8))return;let we=new Set((xe=V.value.containers)==null?void 0:xe.value);if(we.add(U),!we.size)return;let ke=de.value;if(!ke||!I.value)return;let Se=ye.target;Se&&Se instanceof HTMLElement?x$3(we,Se)?(de.value=Se,F$2(Se)):(ye.preventDefault(),ye.stopPropagation(),F$2(ke)):F$2(de.value)},!0),Q}function x$3(U,G){var V;for(let re of U)if((V=re.value)!=null&&V.contains(G))return!0;return!1}let l$1="body > *",i$2=new Set,r$2=new Map;function u$4(U){U.setAttribute("aria-hidden","true"),U.inert=!0}function s$2(U){let G=r$2.get(U);!G||(G["aria-hidden"]===null?U.removeAttribute("aria-hidden"):U.setAttribute("aria-hidden",G["aria-hidden"]),U.inert=G.inert)}function g$2(U,G=ref(!0)){watchEffect(V=>{if(!G.value||!U.value)return;let re=U.value,te=e$2(re);if(te){i$2.add(re);for(let Q of r$2.keys())Q.contains(re)&&(s$2(Q),r$2.delete(Q));te.querySelectorAll(l$1).forEach(Q=>{if(Q instanceof HTMLElement){for(let de of i$2)if(Q.contains(de))return;i$2.size===1&&(r$2.set(Q,{"aria-hidden":Q.getAttribute("aria-hidden"),inert:Q.inert}),u$4(Q))}}),V(()=>{if(i$2.delete(re),i$2.size>0)te.querySelectorAll(l$1).forEach(Q=>{if(Q instanceof HTMLElement&&!r$2.has(Q)){for(let de of i$2)if(Q.contains(de))return;r$2.set(Q,{"aria-hidden":Q.getAttribute("aria-hidden"),inert:Q.inert}),u$4(Q)}});else for(let Q of r$2.keys())s$2(Q),r$2.delete(Q)})}})}let e$1=Symbol("ForcePortalRootContext");function u$3(){return inject(e$1,!1)}let P$2=defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(U,{slots:G,attrs:V}){return provide(e$1,U.force),()=>{let Q=U,{force:re}=Q,te=Es(Q,["force"]);return k({props:te,slot:{},slots:G,attrs:V,name:"ForcePortalRoot"})}}});function v$1(U){let G=e$2(U);if(!G)throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${U}`);let V=G.getElementById("headlessui-portal-root");if(V)return V;let re=G.createElement("div");return re.setAttribute("id","headlessui-portal-root"),G.body.appendChild(re)}let R$1=defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(U,{slots:G,attrs:V}){let re=ref(null),te=computed(()=>e$2(re)),Q=u$3(),de=inject(g$1,null),I=ref(Q===!0||de==null?v$1(re.value):de.resolveTarget());return watchEffect(()=>{Q||de!=null&&(I.value=de.resolveTarget())}),onUnmounted(()=>{var _e,ne;let ge=(_e=te.value)==null?void 0:_e.getElementById("headlessui-portal-root");!ge||I.value===ge&&I.value.children.length<=0&&((ne=I.value.parentElement)==null||ne.removeChild(I.value))}),()=>{if(I.value===null)return null;let _e={ref:re};return h$3(Teleport,{to:I.value},k({props:Xr(Xr({},U),_e),slot:{},attrs:V,slots:G,name:"Portal"}))}}}),g$1=Symbol("PortalGroupContext"),L$1=defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(U,{attrs:G,slots:V}){let re=reactive({resolveTarget(){return U.target}});return provide(g$1,re),()=>{let de=U,{target:te}=de,Q=Es(de,["target"]);return k({props:Q,slot:{},attrs:G,slots:V,name:"PortalGroup"})}}}),i$1=Symbol("StackContext");var c$1=(U=>(U[U.Add=0]="Add",U[U.Remove=1]="Remove",U))(c$1||{});function a$2(){return inject(i$1,()=>{})}function s$1({type:U,element:G,onUpdate:V}){let re=a$2();function te(...Q){V==null||V(...Q),re(...Q)}onMounted(()=>{te(0,U,G),onUnmounted(()=>{te(1,U,G)})}),provide(i$1,te)}let u$2=Symbol("DescriptionContext");function h(){let U=inject(u$2,null);if(U===null)throw new Error("Missing parent");return U}function P$1({slot:U=ref({}),name:G="Description",props:V={}}={}){let re=ref([]);function te(Q){return re.value.push(Q),()=>{let de=re.value.indexOf(Q);de!==-1&&re.value.splice(de,1)}}return provide(u$2,{register:te,slot:U,name:G,props:V}),computed(()=>re.value.length>0?re.value.join(" "):void 0)}let S=defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"}},setup(U,{attrs:G,slots:V}){let re=h(),te=`headlessui-description-${t$2()}`;return onMounted(()=>onUnmounted(re.register(te))),()=>{let{name:Q="Description",slot:de=ref({}),props:I={}}=re,_e=U,ne=Yo(Xr({},Object.entries(I).reduce((ge,[ye,xe])=>Object.assign(ge,{[ye]:unref(xe)}),{})),{id:te});return k({props:Xr(Xr({},_e),ne),slot:de.value,attrs:G,slots:V,name:Q})}}});var fe$2=(U=>(U[U.Open=0]="Open",U[U.Closed=1]="Closed",U))(fe$2||{});let x$2=Symbol("DialogContext");function P(U){let G=inject(x$2,null);if(G===null){let V=new Error(`<${U} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,P),V}return G}let T$1="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Me=defineComponent({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:T$1},initialFocus:{type:Object,default:null}},emits:{close:U=>!0},setup(U,{emit:G,attrs:V,slots:re,expose:te}){var Q;let de=ref(0),I=p$4(),_e=computed(()=>U.open===T$1&&I!==null?u$5(I.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):U.open),ne=ref(new Set),ge=ref(null),ye=computed(()=>e$2(ge));if(te({el:ge,$el:ge}),!(U.open!==T$1||I!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof _e.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${_e.value===T$1?void 0:U.open}`);let xe=computed(()=>_e.value?0:1),we=computed(()=>xe.value===0),ke=computed(()=>de.value>1),Se=inject(x$2,null)!==null,Oe=computed(()=>ke.value?"parent":"leaf"),Fe=W$3(ge,computed(()=>we.value?u$5(Oe.value,{parent:g$3.RestoreFocus,leaf:g$3.All&~g$3.FocusLock}):g$3.None),computed(()=>({initialFocus:ref(U.initialFocus),containers:ne})));g$2(ge,computed(()=>ke.value?we.value:!1)),s$1({type:"Dialog",element:ge,onUpdate:(Ke,ot,yt)=>{if(ot==="Dialog")return u$5(Ke,{[c$1.Add](){ne.value.add(yt),de.value+=1},[c$1.Remove](){ne.value.delete(yt),de.value-=1}})}});let ze=P$1({name:"DialogDescription",slot:computed(()=>({open:_e.value}))}),Le=`headlessui-dialog-${t$2()}`,We=ref(null),qe={titleId:We,panelRef:ref(null),dialogState:xe,setTitleId(Ke){We.value!==Ke&&(We.value=Ke)},close(){G("close",!1)}};provide(x$2,qe),g$4(()=>{var Ke,ot,yt;return[...Array.from((ot=(Ke=ye.value)==null?void 0:Ke.querySelectorAll("body > *"))!=null?ot:[]).filter(ft=>!(!(ft instanceof HTMLElement)||ft.contains(Fe.value)||qe.panelRef.value&&ft.contains(qe.panelRef.value))),(yt=qe.panelRef.value)!=null?yt:ge.value]},(Ke,ot)=>{xe.value===0&&(ke.value||(qe.close(),nextTick(()=>ot==null?void 0:ot.focus())))},p$1.IgnoreScrollbars),r$3((Q=ye.value)==null?void 0:Q.defaultView,"keydown",Ke=>{Ke.key===o$1.Escape&&xe.value===0&&(ke.value||(Ke.preventDefault(),Ke.stopPropagation(),qe.close()))}),watchEffect(Ke=>{var ot;if(xe.value!==0||Se)return;let yt=ye.value;if(!yt)return;let ft=yt==null?void 0:yt.documentElement,_t=(ot=yt.defaultView)!=null?ot:window,Je=ft.style.overflow,Qe=ft.style.paddingRight,tt=_t.innerWidth-ft.clientWidth;ft.style.overflow="hidden",ft.style.paddingRight=`${tt}px`,Ke(()=>{ft.style.overflow=Je,ft.style.paddingRight=Qe})}),watchEffect(Ke=>{if(xe.value!==0)return;let ot=t$1(ge);if(!ot)return;let yt=new IntersectionObserver(ft=>{for(let _t of ft)_t.boundingClientRect.x===0&&_t.boundingClientRect.y===0&&_t.boundingClientRect.width===0&&_t.boundingClientRect.height===0&&qe.close()});yt.observe(ot),Ke(()=>yt.disconnect())});function Ne(Ke){Ke.stopPropagation()}return()=>{let Ke=Yo(Xr({},V),{ref:ge,id:Le,role:"dialog","aria-modal":xe.value===0?!0:void 0,"aria-labelledby":We.value,"aria-describedby":ze.value,onClick:Ne}),Je=U,{open:ot,initialFocus:yt}=Je,ft=Es(Je,["open","initialFocus"]),_t={open:xe.value===0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>h$3(L$1,{target:ge.value},()=>h$3(P$2,{force:!1},()=>k({props:Xr(Xr({},ft),Ke),slot:_t,attrs:V,slots:re,visible:xe.value===0,features:m$1.RenderStrategy|m$1.Static,name:"Dialog"})))))}}});defineComponent({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(U,{attrs:G,slots:V}){let re=P("DialogOverlay"),te=`headlessui-dialog-overlay-${t$2()}`;function Q(de){de.target===de.currentTarget&&(de.preventDefault(),de.stopPropagation(),re.close())}return()=>k({props:Yo(Xr({},U),{id:te,"aria-hidden":!0,onClick:Q}),slot:{open:re.dialogState.value===0},attrs:G,slots:V,name:"DialogOverlay"})}});defineComponent({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(U,{attrs:G,slots:V,expose:re}){let te=P("DialogBackdrop"),Q=`headlessui-dialog-backdrop-${t$2()}`,de=ref(null);return re({el:de,$el:de}),onMounted(()=>{if(te.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let I=U,_e={id:Q,ref:de,"aria-hidden":!0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>k({props:Xr(Xr(Xr({},G),I),_e),slot:{open:te.dialogState.value===0},attrs:G,slots:V,name:"DialogBackdrop"})))}}});let je=defineComponent({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(U,{attrs:G,slots:V}){let re=P("DialogPanel"),te=`headlessui-dialog-panel-${t$2()}`;return()=>{let Q={id:te,ref:re.panelRef};return k({props:Xr(Xr({},U),Q),slot:{open:re.dialogState.value===0},attrs:G,slots:V,name:"DialogPanel"})}}}),Ae=defineComponent({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(U,{attrs:G,slots:V}){let re=P("DialogTitle"),te=`headlessui-dialog-title-${t$2()}`;return onMounted(()=>{re.setTitleId(te),onUnmounted(()=>re.setTitleId(null))}),()=>k({props:Yo(Xr({},U),{id:te}),slot:{open:re.dialogState.value===0},attrs:G,slots:V,name:"DialogTitle"})}});var w=(U=>(U[U.Open=0]="Open",U[U.Closed=1]="Closed",U))(w||{});let x$1=Symbol("DisclosureContext");function C(U){let G=inject(x$1,null);if(G===null){let V=new Error(`<${U} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,C),V}return G}let B=Symbol("DisclosurePanelContext");function H$1(){return inject(B,null)}let A=defineComponent({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(U,{slots:G,attrs:V}){let re=`headlessui-disclosure-button-${t$2()}`,te=`headlessui-disclosure-panel-${t$2()}`,Q=ref(U.defaultOpen?0:1),de=ref(null),I=ref(null),_e={buttonId:re,panelId:te,disclosureState:Q,panel:de,button:I,toggleDisclosure(){Q.value=u$5(Q.value,{[0]:1,[1]:0})},closeDisclosure(){Q.value!==1&&(Q.value=1)},close(ne){_e.closeDisclosure();let ge=(()=>ne?ne instanceof HTMLElement?ne:ne.value instanceof HTMLElement?t$1(ne):t$1(_e.button):t$1(_e.button))();ge==null||ge.focus()}};return provide(x$1,_e),c$3(computed(()=>u$5(Q.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let xe=U,{defaultOpen:ne}=xe,ge=Es(xe,["defaultOpen"]),ye={open:Q.value===0,close:_e.close};return k({props:ge,slot:ye,slots:G,attrs:V,name:"Disclosure"})}}});defineComponent({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(U,{attrs:G,slots:V,expose:re}){let te=C("DisclosureButton"),Q=H$1(),de=Q===null?!1:Q===te.panelId,I=ref(null);re({el:I,$el:I}),de||watchEffect(()=>{te.button.value=I.value});let _e=b$2(computed(()=>({as:U.as,type:G.type})),I);function ne(){var xe;U.disabled||(de?(te.toggleDisclosure(),(xe=t$1(te.button))==null||xe.focus()):te.toggleDisclosure())}function ge(xe){var we;if(!U.disabled)if(de)switch(xe.key){case o$1.Space:case o$1.Enter:xe.preventDefault(),xe.stopPropagation(),te.toggleDisclosure(),(we=t$1(te.button))==null||we.focus();break}else switch(xe.key){case o$1.Space:case o$1.Enter:xe.preventDefault(),xe.stopPropagation(),te.toggleDisclosure();break}}function ye(xe){switch(xe.key){case o$1.Space:xe.preventDefault();break}}return()=>{let xe={open:te.disclosureState.value===0},we=de?{ref:I,type:_e.value,onClick:ne,onKeydown:ge}:{id:te.buttonId,ref:I,type:_e.value,"aria-expanded":U.disabled?void 0:te.disclosureState.value===0,"aria-controls":t$1(te.panel)?te.panelId:void 0,disabled:U.disabled?!0:void 0,onClick:ne,onKeydown:ge,onKeyup:ye};return k({props:Xr(Xr({},U),we),slot:xe,attrs:G,slots:V,name:"DisclosureButton"})}}});defineComponent({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(U,{attrs:G,slots:V,expose:re}){let te=C("DisclosurePanel");re({el:te.panel,$el:te.panel}),provide(B,te.panelId);let Q=p$4(),de=computed(()=>Q!==null?Q.value===l$3.Open:te.disclosureState.value===0);return()=>{let I={open:te.disclosureState.value===0,close:te.close},_e={id:te.panelId,ref:te.panel};return k({props:Xr(Xr({},U),_e),slot:I,attrs:G,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:de.value,name:"DisclosurePanel"})}}});var W$2=(U=>(U[U.Open=0]="Open",U[U.Closed=1]="Closed",U))(W$2||{}),J=(U=>(U[U.Pointer=0]="Pointer",U[U.Other=1]="Other",U))(J||{});function z(U){requestAnimationFrame(()=>requestAnimationFrame(U))}let E=Symbol("MenuContext");function D(U){let G=inject(E,null);if(G===null){let V=new Error(`<${U} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,D),V}return G}let fe$1=defineComponent({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(U,{slots:G,attrs:V}){let re=ref(1),te=ref(null),Q=ref(null),de=ref([]),I=ref(""),_e=ref(null),ne=ref(1);function ge(xe=we=>we){let we=_e.value!==null?de.value[_e.value]:null,ke=v$2(xe(de.value.slice()),Oe=>t$1(Oe.dataRef.domRef)),Se=we?ke.indexOf(we):null;return Se===-1&&(Se=null),{items:ke,activeItemIndex:Se}}let ye={menuState:re,buttonRef:te,itemsRef:Q,items:de,searchQuery:I,activeItemIndex:_e,activationTrigger:ne,closeMenu:()=>{re.value=1,_e.value=null},openMenu:()=>re.value=0,goToItem(xe,we,ke){let Se=ge(),Oe=x$4(xe===a$3.Specific?{focus:a$3.Specific,id:we}:{focus:xe},{resolveItems:()=>Se.items,resolveActiveIndex:()=>Se.activeItemIndex,resolveId:Fe=>Fe.id,resolveDisabled:Fe=>Fe.dataRef.disabled});I.value="",_e.value=Oe,ne.value=ke!=null?ke:1,de.value=Se.items},search(xe){let we=I.value!==""?0:1;I.value+=xe.toLowerCase();let ke=(_e.value!==null?de.value.slice(_e.value+we).concat(de.value.slice(0,_e.value+we)):de.value).find(Oe=>Oe.dataRef.textValue.startsWith(I.value)&&!Oe.dataRef.disabled),Se=ke?de.value.indexOf(ke):-1;Se===-1||Se===_e.value||(_e.value=Se,ne.value=1)},clearSearch(){I.value=""},registerItem(xe,we){let ke=ge(Se=>[...Se,{id:xe,dataRef:we}]);de.value=ke.items,_e.value=ke.activeItemIndex,ne.value=1},unregisterItem(xe){let we=ge(ke=>{let Se=ke.findIndex(Oe=>Oe.id===xe);return Se!==-1&&ke.splice(Se,1),ke});de.value=we.items,_e.value=we.activeItemIndex,ne.value=1}};return g$4([te,Q],(xe,we)=>{var ke;re.value===0&&(ye.closeMenu(),S$1(we,b$1.Loose)||(xe.preventDefault(),(ke=t$1(te))==null||ke.focus()))}),provide(E,ye),c$3(computed(()=>u$5(re.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let xe={open:re.value===0};return k({props:U,slot:xe,slots:G,attrs:V,name:"Menu"})}}}),me=defineComponent({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(U,{attrs:G,slots:V,expose:re}){let te=D("MenuButton"),Q=`headlessui-menu-button-${t$2()}`;re({el:te.buttonRef,$el:te.buttonRef});function de(ge){switch(ge.key){case o$1.Space:case o$1.Enter:case o$1.ArrowDown:ge.preventDefault(),ge.stopPropagation(),te.openMenu(),nextTick(()=>{var ye;(ye=t$1(te.itemsRef))==null||ye.focus({preventScroll:!0}),te.goToItem(a$3.First)});break;case o$1.ArrowUp:ge.preventDefault(),ge.stopPropagation(),te.openMenu(),nextTick(()=>{var ye;(ye=t$1(te.itemsRef))==null||ye.focus({preventScroll:!0}),te.goToItem(a$3.Last)});break}}function I(ge){switch(ge.key){case o$1.Space:ge.preventDefault();break}}function _e(ge){U.disabled||(te.menuState.value===0?(te.closeMenu(),nextTick(()=>{var ye;return(ye=t$1(te.buttonRef))==null?void 0:ye.focus({preventScroll:!0})})):(ge.preventDefault(),ge.stopPropagation(),te.openMenu(),z(()=>{var ye;return(ye=t$1(te.itemsRef))==null?void 0:ye.focus({preventScroll:!0})})))}let ne=b$2(computed(()=>({as:U.as,type:G.type})),te.buttonRef);return()=>{var ge;let ye={open:te.menuState.value===0},xe={ref:te.buttonRef,id:Q,type:ne.value,"aria-haspopup":!0,"aria-controls":(ge=t$1(te.itemsRef))==null?void 0:ge.id,"aria-expanded":U.disabled?void 0:te.menuState.value===0,onKeydown:de,onKeyup:I,onClick:_e};return k({props:Xr(Xr({},U),xe),slot:ye,attrs:G,slots:V,name:"MenuButton"})}}}),pe=defineComponent({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(U,{attrs:G,slots:V,expose:re}){let te=D("MenuItems"),Q=`headlessui-menu-items-${t$2()}`,de=ref(null);re({el:te.itemsRef,$el:te.itemsRef}),p$3({container:computed(()=>t$1(te.itemsRef)),enabled:computed(()=>te.menuState.value===0),accept(ye){return ye.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:ye.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(ye){ye.setAttribute("role","none")}});function I(ye){var xe;switch(de.value&&clearTimeout(de.value),ye.key){case o$1.Space:if(te.searchQuery.value!=="")return ye.preventDefault(),ye.stopPropagation(),te.search(ye.key);case o$1.Enter:if(ye.preventDefault(),ye.stopPropagation(),te.activeItemIndex.value!==null){let we=te.items.value[te.activeItemIndex.value];(xe=t$1(we.dataRef.domRef))==null||xe.click()}te.closeMenu(),nextTick(()=>{var we;return(we=t$1(te.buttonRef))==null?void 0:we.focus({preventScroll:!0})});break;case o$1.ArrowDown:return ye.preventDefault(),ye.stopPropagation(),te.goToItem(a$3.Next);case o$1.ArrowUp:return ye.preventDefault(),ye.stopPropagation(),te.goToItem(a$3.Previous);case o$1.Home:case o$1.PageUp:return ye.preventDefault(),ye.stopPropagation(),te.goToItem(a$3.First);case o$1.End:case o$1.PageDown:return ye.preventDefault(),ye.stopPropagation(),te.goToItem(a$3.Last);case o$1.Escape:ye.preventDefault(),ye.stopPropagation(),te.closeMenu(),nextTick(()=>{var we;return(we=t$1(te.buttonRef))==null?void 0:we.focus({preventScroll:!0})});break;case o$1.Tab:ye.preventDefault(),ye.stopPropagation();break;default:ye.key.length===1&&(te.search(ye.key),de.value=setTimeout(()=>te.clearSearch(),350));break}}function _e(ye){switch(ye.key){case o$1.Space:ye.preventDefault();break}}let ne=p$4(),ge=computed(()=>ne!==null?ne.value===l$3.Open:te.menuState.value===0);return()=>{var ye,xe;let we={open:te.menuState.value===0},ke={"aria-activedescendant":te.activeItemIndex.value===null||(ye=te.items.value[te.activeItemIndex.value])==null?void 0:ye.id,"aria-labelledby":(xe=t$1(te.buttonRef))==null?void 0:xe.id,id:Q,onKeydown:I,onKeyup:_e,role:"menu",tabIndex:0,ref:te.itemsRef};return k({props:Xr(Xr({},U),ke),slot:we,attrs:G,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:ge.value,name:"MenuItems"})}}}),ve=defineComponent({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(U,{slots:G,attrs:V,expose:re}){let te=D("MenuItem"),Q=`headlessui-menu-item-${t$2()}`,de=ref(null);re({el:de,$el:de});let I=computed(()=>te.activeItemIndex.value!==null?te.items.value[te.activeItemIndex.value].id===Q:!1),_e=computed(()=>({disabled:U.disabled,textValue:"",domRef:de}));onMounted(()=>{var we,ke;let Se=(ke=(we=t$1(de))==null?void 0:we.textContent)==null?void 0:ke.toLowerCase().trim();Se!==void 0&&(_e.value.textValue=Se)}),onMounted(()=>te.registerItem(Q,_e)),onUnmounted(()=>te.unregisterItem(Q)),watchEffect(()=>{te.menuState.value===0&&(!I.value||te.activationTrigger.value!==0&&nextTick(()=>{var we,ke;return(ke=(we=t$1(de))==null?void 0:we.scrollIntoView)==null?void 0:ke.call(we,{block:"nearest"})}))});function ne(we){if(U.disabled)return we.preventDefault();te.closeMenu(),nextTick(()=>{var ke;return(ke=t$1(te.buttonRef))==null?void 0:ke.focus({preventScroll:!0})})}function ge(){if(U.disabled)return te.goToItem(a$3.Nothing);te.goToItem(a$3.Specific,Q)}function ye(){U.disabled||I.value||te.goToItem(a$3.Specific,Q,0)}function xe(){U.disabled||!I.value||te.goToItem(a$3.Nothing)}return()=>{let{disabled:we}=U,ke={active:I.value,disabled:we};return k({props:Yo(Xr({},U),{id:Q,ref:de,role:"menuitem",tabIndex:we===!0?void 0:-1,"aria-disabled":we===!0?!0:void 0,onClick:ne,onFocus:ge,onPointermove:ye,onMousemove:ye,onPointerleave:xe,onMouseleave:xe}),slot:ke,attrs:V,slots:G,name:"MenuItem"})}}}),u$1=Symbol("LabelContext");function a$1(){let U=inject(u$1,null);if(U===null){let G=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(G,a$1),G}return U}function K$1({slot:U={},name:G="Label",props:V={}}={}){let re=ref([]);function te(Q){return re.value.push(Q),()=>{let de=re.value.indexOf(Q);de!==-1&&re.value.splice(de,1)}}return provide(u$1,{register:te,slot:U,name:G,props:V}),computed(()=>re.value.length>0?re.value.join(" "):void 0)}let T=defineComponent({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1}},setup(U,{slots:G,attrs:V}){let re=a$1(),te=`headlessui-label-${t$2()}`;return onMounted(()=>onUnmounted(re.register(te))),()=>{let{name:Q="Label",slot:de={},props:I={}}=re,xe=U,{passive:_e}=xe,ne=Es(xe,["passive"]),ge=Yo(Xr({},Object.entries(I).reduce((we,[ke,Se])=>Object.assign(we,{[ke]:unref(Se)}),{})),{id:te}),ye=Xr(Xr({},ne),ge);return _e&&delete ye.onClick,k({props:ye,slot:de,attrs:V,slots:G,name:Q})}}}),b=Symbol("GroupContext"),W$1=defineComponent({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(U,{slots:G,attrs:V}){let re=ref(null),te=K$1({name:"SwitchLabel",props:{onClick(){!re.value||(re.value.click(),re.value.focus({preventScroll:!0}))}}}),Q=P$1({name:"SwitchDescription"});return provide(b,{switchRef:re,labelledby:te,describedby:Q}),()=>k({props:U,slot:{},slots:G,attrs:V,name:"SwitchGroup"})}}),X=defineComponent({name:"Switch",emits:{"update:modelValue":U=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:!1},name:{type:String,optional:!0},value:{type:String,optional:!0}},inheritAttrs:!1,setup(U,{emit:G,attrs:V,slots:re,expose:te}){let Q=inject(b,null),de=`headlessui-switch-${t$2()}`;function I(){G("update:modelValue",!U.modelValue)}let _e=ref(null),ne=Q===null?_e:Q.switchRef,ge=b$2(computed(()=>({as:U.as,type:V.type})),ne);te({el:ne,$el:ne});function ye(ke){ke.preventDefault(),I()}function xe(ke){ke.key===o$1.Space?(ke.preventDefault(),I()):ke.key===o$1.Enter&&p(ke.currentTarget)}function we(ke){ke.preventDefault()}return()=>{let We=U,{name:ke,value:Se,modelValue:Oe}=We,Fe=Es(We,["name","value","modelValue"]),ze={checked:Oe},Le={id:de,ref:ne,role:"switch",type:ge.value,tabIndex:0,"aria-checked":Oe,"aria-labelledby":Q==null?void 0:Q.labelledby.value,"aria-describedby":Q==null?void 0:Q.describedby.value,onClick:ye,onKeyup:xe,onKeypress:we};return h$3(Fragment,[ke!=null&&Oe!=null?h$3(l$2,O({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:Oe,name:ke,value:Se})):null,k({props:Xr(Xr(Xr({},V),Fe),Le),slot:ze,attrs:V,slots:re,name:"Switch"})])}}}),Y=T,Z=S;function l(U){let G={called:!1};return(...V)=>{if(!G.called)return G.called=!0,U(...V)}}function r$1(){let U=[],G=[],V={enqueue(re){G.push(re)},requestAnimationFrame(...re){let te=requestAnimationFrame(...re);V.add(()=>cancelAnimationFrame(te))},nextFrame(...re){V.requestAnimationFrame(()=>{V.requestAnimationFrame(...re)})},setTimeout(...re){let te=setTimeout(...re);V.add(()=>clearTimeout(te))},add(re){U.push(re)},dispose(){for(let re of U.splice(0))re()},async workQueue(){for(let re of G.splice(0))await re()}};return V}function m(U,...G){U&&G.length>0&&U.classList.add(...G)}function d$1(U,...G){U&&G.length>0&&U.classList.remove(...G)}var g=(U=>(U.Finished="finished",U.Cancelled="cancelled",U))(g||{});function F$1(U,G){let V=r$1();if(!U)return V.dispose;let{transitionDuration:re,transitionDelay:te}=getComputedStyle(U),[Q,de]=[re,te].map(I=>{let[_e=0]=I.split(",").filter(Boolean).map(ne=>ne.includes("ms")?parseFloat(ne):parseFloat(ne)*1e3).sort((ne,ge)=>ge-ne);return _e});return Q!==0?V.setTimeout(()=>G("finished"),Q+de):G("finished"),V.add(()=>G("cancelled")),V.dispose}function L(U,G,V,re,te,Q){let de=r$1(),I=Q!==void 0?l(Q):()=>{};return d$1(U,...te),m(U,...G,...V),de.nextFrame(()=>{d$1(U,...V),m(U,...re),de.add(F$1(U,_e=>(d$1(U,...re,...G),m(U,...te),I(_e))))}),de.add(()=>d$1(U,...G,...V,...re,...te)),de.add(()=>I("cancelled")),de.dispose}function d(U=""){return U.split(" ").filter(G=>G.trim().length>1)}let F=Symbol("TransitionContext");var ae=(U=>(U.Visible="visible",U.Hidden="hidden",U))(ae||{});function le(){return inject(F,null)!==null}function ie(){let U=inject(F,null);if(U===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return U}function se(){let U=inject(R,null);if(U===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return U}let R=Symbol("NestingContext");function x(U){return"children"in U?x(U.children):U.value.filter(({state:G})=>G==="visible").length>0}function K(U){let G=ref([]),V=ref(!1);onMounted(()=>V.value=!0),onUnmounted(()=>V.value=!1);function re(Q,de=h$2.Hidden){let I=G.value.findIndex(({id:_e})=>_e===Q);I!==-1&&(u$5(de,{[h$2.Unmount](){G.value.splice(I,1)},[h$2.Hidden](){G.value[I].state="hidden"}}),!x(G)&&V.value&&(U==null||U()))}function te(Q){let de=G.value.find(({id:I})=>I===Q);return de?de.state!=="visible"&&(de.state="visible"):G.value.push({id:Q,state:"visible"}),()=>re(Q,h$2.Unmount)}return{children:G,register:te,unregister:re}}let _$1=m$1.RenderStrategy,oe=defineComponent({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(U,{emit:G,attrs:V,slots:re,expose:te}){if(!le()&&f$1())return()=>h$3(fe,Yo(Xr({},U),{onBeforeEnter:()=>G("beforeEnter"),onAfterEnter:()=>G("afterEnter"),onBeforeLeave:()=>G("beforeLeave"),onAfterLeave:()=>G("afterLeave")}),re);let Q=ref(null),de=ref("visible"),I=computed(()=>U.unmount?h$2.Unmount:h$2.Hidden);te({el:Q,$el:Q});let{show:_e,appear:ne}=ie(),{register:ge,unregister:ye}=se(),xe={value:!0},we=t$2(),ke={value:!1},Se=K(()=>{ke.value||(de.value="hidden",ye(we),G("afterLeave"))});onMounted(()=>{let ot=ge(we);onUnmounted(ot)}),watchEffect(()=>{if(I.value===h$2.Hidden&&!!we){if(_e&&de.value!=="visible"){de.value="visible";return}u$5(de.value,{hidden:()=>ye(we),visible:()=>ge(we)})}});let Oe=d(U.enter),Fe=d(U.enterFrom),ze=d(U.enterTo),Le=d(U.entered),We=d(U.leave),qe=d(U.leaveFrom),Ne=d(U.leaveTo);onMounted(()=>{watchEffect(()=>{if(de.value==="visible"){let ot=t$1(Q);if(ot instanceof Comment&&ot.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Ke(ot){let yt=xe.value&&!ne.value,ft=t$1(Q);!ft||!(ft instanceof HTMLElement)||yt||(ke.value=!0,_e.value&&G("beforeEnter"),_e.value||G("beforeLeave"),ot(_e.value?L(ft,Oe,Fe,ze,Le,_t=>{ke.value=!1,_t===g.Finished&&G("afterEnter")}):L(ft,We,qe,Ne,Le,_t=>{ke.value=!1,_t===g.Finished&&(x(Se)||(de.value="hidden",ye(we),G("afterLeave")))})))}return onMounted(()=>{watch([_e,ne],(ot,yt,ft)=>{Ke(ft),xe.value=!1},{immediate:!0})}),provide(R,Se),c$3(computed(()=>u$5(de.value,{visible:l$3.Open,hidden:l$3.Closed}))),()=>{let vt=U,{appear:ot,show:yt,enter:ft,enterFrom:_t,enterTo:Je,entered:Qe,leave:tt,leaveFrom:ht,leaveTo:it}=vt,pt=Es(vt,["appear","show","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]);return k({props:Yo(Xr({},pt),{ref:Q}),slot:{},slots:re,attrs:V,features:_$1,visible:de.value==="visible",name:"TransitionChild"})}}}),ue=oe,fe=defineComponent({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(U,{emit:G,attrs:V,slots:re}){let te=p$4(),Q=computed(()=>U.show===null&&te!==null?u$5(te.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):U.show);watchEffect(()=>{if(![!0,!1].includes(Q.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let de=ref(Q.value?"visible":"hidden"),I=K(()=>{de.value="hidden"}),_e={value:!0},ne={show:Q,appear:computed(()=>U.appear||!_e.value)};return onMounted(()=>{watchEffect(()=>{_e.value=!1,Q.value?de.value="visible":x(I)||(de.value="hidden")})}),provide(R,I),provide(F,ne),()=>{let ge=R$2(U,["show","appear","unmount"]),ye={unmount:U.unmount};return k({props:Yo(Xr({},ye),{as:"template"}),slot:{},slots:Yo(Xr({},re),{default:()=>[h$3(ue,Xr(Xr(Xr({onBeforeEnter:()=>G("beforeEnter"),onAfterEnter:()=>G("afterEnter"),onBeforeLeave:()=>G("beforeLeave"),onAfterLeave:()=>G("afterLeave")},V),ye),ge),re.default)]}),attrs:{},features:_$1,visible:de.value==="visible",name:"Transition"})}}});function render$g(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$f(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])}function render$e(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$d(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})])}function render$c(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$b(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])}function render$a(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])}function render$9(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})])}function render$8(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])}function render$7(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])}function render$6(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})])}function render$5(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})])}function render$4(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])}function render$3(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$2(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$1(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}try{self["workbox:window:6.5.2"]&&_()}catch{}function n(U,G){return new Promise(function(V){var re=new MessageChannel;re.port1.onmessage=function(te){V(te.data)},U.postMessage(G,[re.port2])})}function t(U,G){for(var V=0;V<G.length;V++){var re=G[V];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(U,re.key,re)}}function r(U,G){(G==null||G>U.length)&&(G=U.length);for(var V=0,re=new Array(G);V<G;V++)re[V]=U[V];return re}function e(U,G){var V;if(typeof Symbol=="undefined"||U[Symbol.iterator]==null){if(Array.isArray(U)||(V=function(te,Q){if(te){if(typeof te=="string")return r(te,Q);var de=Object.prototype.toString.call(te).slice(8,-1);return de==="Object"&&te.constructor&&(de=te.constructor.name),de==="Map"||de==="Set"?Array.from(te):de==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de)?r(te,Q):void 0}}(U))||G&&U&&typeof U.length=="number"){V&&(U=V);var re=0;return function(){return re>=U.length?{done:!0}:{done:!1,value:U[re++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(V=U[Symbol.iterator]()).next.bind(V)}try{self["workbox:core:6.5.2"]&&_()}catch{}var i=function(){var U=this;this.promise=new Promise(function(G,V){U.resolve=G,U.reject=V})};function o(U,G){var V=location.href;return new URL(U,V).href===new URL(G,V).href}var u=function(U,G){this.type=U,Object.assign(this,G)};function a(U,G,V){return V?G?G(U):U:(U&&U.then||(U=Promise.resolve(U)),G?U.then(G):U)}function c(){}var f={type:"SKIP_WAITING"};function s(U,G){if(!G)return U&&U.then?U.then(c):Promise.resolve()}var v=function(U){var G,V;function re(I,_e){var ne,ge;return _e===void 0&&(_e={}),(ne=U.call(this)||this).nn={},ne.tn=0,ne.rn=new i,ne.en=new i,ne.on=new i,ne.un=0,ne.an=new Set,ne.cn=function(){var ye=ne.fn,xe=ye.installing;ne.tn>0||!o(xe.scriptURL,ne.sn.toString())||performance.now()>ne.un+6e4?(ne.vn=xe,ye.removeEventListener("updatefound",ne.cn)):(ne.hn=xe,ne.an.add(xe),ne.rn.resolve(xe)),++ne.tn,xe.addEventListener("statechange",ne.ln)},ne.ln=function(ye){var xe=ne.fn,we=ye.target,ke=we.state,Se=we===ne.vn,Oe={sw:we,isExternal:Se,originalEvent:ye};!Se&&ne.mn&&(Oe.isUpdate=!0),ne.dispatchEvent(new u(ke,Oe)),ke==="installed"?ne.wn=self.setTimeout(function(){ke==="installed"&&xe.waiting===we&&ne.dispatchEvent(new u("waiting",Oe))},200):ke==="activating"&&(clearTimeout(ne.wn),Se||ne.en.resolve(we))},ne.dn=function(ye){var xe=ne.hn,we=xe!==navigator.serviceWorker.controller;ne.dispatchEvent(new u("controlling",{isExternal:we,originalEvent:ye,sw:xe,isUpdate:ne.mn})),we||ne.on.resolve(xe)},ne.gn=(ge=function(ye){var xe=ye.data,we=ye.ports,ke=ye.source;return a(ne.getSW(),function(){ne.an.has(ke)&&ne.dispatchEvent(new u("message",{data:xe,originalEvent:ye,ports:we,sw:ke}))})},function(){for(var ye=[],xe=0;xe<arguments.length;xe++)ye[xe]=arguments[xe];try{return Promise.resolve(ge.apply(this,ye))}catch(we){return Promise.reject(we)}}),ne.sn=I,ne.nn=_e,navigator.serviceWorker.addEventListener("message",ne.gn),ne}V=U,(G=re).prototype=Object.create(V.prototype),G.prototype.constructor=G,G.__proto__=V;var te,Q,de=re.prototype;return de.register=function(I){var _e=(I===void 0?{}:I).immediate,ne=_e!==void 0&&_e;try{var ge=this;return function(ye,xe){var we=ye();return we&&we.then?we.then(xe):xe(we)}(function(){if(!ne&&document.readyState!=="complete")return s(new Promise(function(ye){return window.addEventListener("load",ye)}))},function(){return ge.mn=Boolean(navigator.serviceWorker.controller),ge.yn=ge.pn(),a(ge.bn(),function(ye){ge.fn=ye,ge.yn&&(ge.hn=ge.yn,ge.en.resolve(ge.yn),ge.on.resolve(ge.yn),ge.yn.addEventListener("statechange",ge.ln,{once:!0}));var xe=ge.fn.waiting;return xe&&o(xe.scriptURL,ge.sn.toString())&&(ge.hn=xe,Promise.resolve().then(function(){ge.dispatchEvent(new u("waiting",{sw:xe,wasWaitingBeforeRegister:!0}))}).then(function(){})),ge.hn&&(ge.rn.resolve(ge.hn),ge.an.add(ge.hn)),ge.fn.addEventListener("updatefound",ge.cn),navigator.serviceWorker.addEventListener("controllerchange",ge.dn),ge.fn})})}catch(ye){return Promise.reject(ye)}},de.update=function(){try{return this.fn?s(this.fn.update()):void 0}catch(I){return Promise.reject(I)}},de.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},de.messageSW=function(I){try{return a(this.getSW(),function(_e){return n(_e,I)})}catch(_e){return Promise.reject(_e)}},de.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n(this.fn.waiting,f)},de.pn=function(){var I=navigator.serviceWorker.controller;return I&&o(I.scriptURL,this.sn.toString())?I:void 0},de.bn=function(){try{var I=this;return function(_e,ne){try{var ge=_e()}catch(ye){return ne(ye)}return ge&&ge.then?ge.then(void 0,ne):ge}(function(){return a(navigator.serviceWorker.register(I.sn,I.nn),function(_e){return I.un=performance.now(),_e})},function(_e){throw _e})}catch(_e){return Promise.reject(_e)}},te=re,(Q=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&t(te.prototype,Q),re}(function(){function U(){this.Pn=new Map}var G=U.prototype;return G.addEventListener=function(V,re){this.Sn(V).add(re)},G.removeEventListener=function(V,re){this.Sn(V).delete(re)},G.dispatchEvent=function(V){V.target=this;for(var re,te=e(this.Sn(V.type));!(re=te()).done;)(0,re.value)(V)},G.Sn=function(V){return this.Pn.has(V)||this.Pn.set(V,new Set),this.Pn.get(V)},U}()),isVue2=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=U=>activePinia=U,piniaSymbol=Symbol();function isPlainObject$1(U){return U&&typeof U=="object"&&Object.prototype.toString.call(U)==="[object Object]"&&typeof U.toJSON!="function"}var MutationType;(function(U){U.direct="direct",U.patchObject="patch object",U.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const U=effectScope(!0),G=U.run(()=>ref({}));let V=[],re=[];const te=markRaw({install(Q){setActivePinia(te),te._a=Q,Q.provide(piniaSymbol,te),Q.config.globalProperties.$pinia=te,re.forEach(de=>V.push(de)),re=[]},use(Q){return!this._a&&!isVue2?re.push(Q):V.push(Q),this},_p:V,_a:null,_e:U,_s:new Map,state:G});return te}const noop=()=>{};function addSubscription(U,G,V,re=noop){U.push(G);const te=()=>{const Q=U.indexOf(G);Q>-1&&(U.splice(Q,1),re())};return!V&&getCurrentInstance()&&onUnmounted(te),te}function triggerSubscriptions(U,...G){U.slice().forEach(V=>{V(...G)})}function mergeReactiveObjects(U,G){for(const V in G){if(!G.hasOwnProperty(V))continue;const re=G[V],te=U[V];isPlainObject$1(te)&&isPlainObject$1(re)&&U.hasOwnProperty(V)&&!isRef(re)&&!isReactive(re)?U[V]=mergeReactiveObjects(te,re):U[V]=re}return U}const skipHydrateSymbol=Symbol();function shouldHydrate(U){return!isPlainObject$1(U)||!U.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(U){return!!(isRef(U)&&U.effect)}function createOptionsStore(U,G,V,re){const{state:te,actions:Q,getters:de}=G,I=V.state.value[U];let _e;function ne(){I||(V.state.value[U]=te?te():{});const ge=toRefs(V.state.value[U]);return assign(ge,Q,Object.keys(de||{}).reduce((ye,xe)=>(ye[xe]=markRaw(computed(()=>{setActivePinia(V);const we=V._s.get(U);return de[xe].call(we,we)})),ye),{}))}return _e=createSetupStore(U,ne,G,V),_e.$reset=function(){const ye=te?te():{};this.$patch(xe=>{assign(xe,ye)})},_e}function createSetupStore(U,G,V={},re,te){let Q;const de=V.state,I=assign({actions:{}},V),_e={deep:!0};let ne,ge,ye=markRaw([]),xe=markRaw([]),we;const ke=re.state.value[U];!de&&!ke&&(re.state.value[U]={}),ref({});function Se(Ne){let Ke;ne=ge=!1,typeof Ne=="function"?(Ne(re.state.value[U]),Ke={type:MutationType.patchFunction,storeId:U,events:we}):(mergeReactiveObjects(re.state.value[U],Ne),Ke={type:MutationType.patchObject,payload:Ne,storeId:U,events:we}),nextTick().then(()=>{ne=!0}),ge=!0,triggerSubscriptions(ye,Ke,re.state.value[U])}const Oe=noop;function Fe(){Q.stop(),ye=[],xe=[],re._s.delete(U)}function ze(Ne,Ke){return function(){setActivePinia(re);const ot=Array.from(arguments),yt=[],ft=[];function _t(tt){yt.push(tt)}function Je(tt){ft.push(tt)}triggerSubscriptions(xe,{args:ot,name:Ne,store:We,after:_t,onError:Je});let Qe;try{Qe=Ke.apply(this&&this.$id===U?this:We,ot)}catch(tt){throw triggerSubscriptions(ft,tt),tt}return Qe instanceof Promise?Qe.then(tt=>(triggerSubscriptions(yt,tt),tt)).catch(tt=>(triggerSubscriptions(ft,tt),Promise.reject(tt))):(triggerSubscriptions(yt,Qe),Qe)}}const Le={_p:re,$id:U,$onAction:addSubscription.bind(null,xe),$patch:Se,$reset:Oe,$subscribe(Ne,Ke={}){const ot=addSubscription(ye,Ne,Ke.detached,()=>yt()),yt=Q.run(()=>watch(()=>re.state.value[U],ft=>{(Ke.flush==="sync"?ge:ne)&&Ne({storeId:U,type:MutationType.direct,events:we},ft)},assign({},_e,Ke)));return ot},$dispose:Fe},We=reactive(assign({},Le));re._s.set(U,We);const qe=re._e.run(()=>(Q=effectScope(),Q.run(()=>G())));for(const Ne in qe){const Ke=qe[Ne];if(isRef(Ke)&&!isComputed(Ke)||isReactive(Ke))de||(ke&&shouldHydrate(Ke)&&(isRef(Ke)?Ke.value=ke[Ne]:mergeReactiveObjects(Ke,ke[Ne])),re.state.value[U][Ne]=Ke);else if(typeof Ke=="function"){const ot=ze(Ne,Ke);qe[Ne]=ot,I.actions[Ne]=Ke}}return assign(We,qe),assign(toRaw(We),qe),Object.defineProperty(We,"$state",{get:()=>re.state.value[U],set:Ne=>{Se(Ke=>{assign(Ke,Ne)})}}),re._p.forEach(Ne=>{assign(We,Q.run(()=>Ne({store:We,app:re._a,pinia:re,options:I})))}),ke&&de&&V.hydrate&&V.hydrate(We.$state,ke),ne=!0,ge=!0,We}function defineStore(U,G,V){let re,te;const Q=typeof G=="function";typeof U=="string"?(re=U,te=Q?V:G):(te=U,re=U.id);function de(I,_e){const ne=getCurrentInstance();return I=I||ne&&inject(piniaSymbol),I&&setActivePinia(I),I=activePinia,I._s.has(re)||(Q?createSetupStore(re,G,te,I):createOptionsStore(re,te,I)),I._s.get(re)}return de.$id=re,de}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},mapboxGl={exports:{}};(function(U,G){(function(V,re){U.exports=re()})(commonjsGlobal,function(){var V,re,te;function Q(I,_e){if(!V)V=_e;else if(!re)re=_e;else{var ne="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+V+")(sharedChunk); ("+re+")(sharedChunk); self.onerror = null;",ge={};V(ge),te=_e(ge),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(te.workerUrl=window.URL.createObjectURL(new Blob([ne],{type:"text/javascript"})))}}Q(["exports"],function(I){var _e=typeof self!="undefined"?self:{},ne=ge;function ge(j,y,$,ee){this.cx=3*j,this.bx=3*($-j)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*y,this.by=3*(ee-y)-this.cy,this.ay=1-this.cy-this.by,this.p1x=j,this.p1y=ee,this.p2x=$,this.p2y=ee}ge.prototype.sampleCurveX=function(j){return((this.ax*j+this.bx)*j+this.cx)*j},ge.prototype.sampleCurveY=function(j){return((this.ay*j+this.by)*j+this.cy)*j},ge.prototype.sampleCurveDerivativeX=function(j){return(3*this.ax*j+2*this.bx)*j+this.cx},ge.prototype.solveCurveX=function(j,y){var $,ee,he,Ee,Ce;for(y===void 0&&(y=1e-6),he=j,Ce=0;Ce<8;Ce++){if(Ee=this.sampleCurveX(he)-j,Math.abs(Ee)<y)return he;var Pe=this.sampleCurveDerivativeX(he);if(Math.abs(Pe)<1e-6)break;he-=Ee/Pe}if((he=j)<($=0))return $;if(he>(ee=1))return ee;for(;$<ee;){if(Ee=this.sampleCurveX(he),Math.abs(Ee-j)<y)return he;j>Ee?$=he:ee=he,he=.5*(ee-$)+$}return he},ge.prototype.solve=function(j,y){return this.sampleCurveY(this.solveCurveX(j,y))};var ye=xe;function xe(j,y){this.x=j,this.y=y}xe.prototype={clone:function(){return new xe(this.x,this.y)},add:function(j){return this.clone()._add(j)},sub:function(j){return this.clone()._sub(j)},multByPoint:function(j){return this.clone()._multByPoint(j)},divByPoint:function(j){return this.clone()._divByPoint(j)},mult:function(j){return this.clone()._mult(j)},div:function(j){return this.clone()._div(j)},rotate:function(j){return this.clone()._rotate(j)},rotateAround:function(j,y){return this.clone()._rotateAround(j,y)},matMult:function(j){return this.clone()._matMult(j)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(j){return this.x===j.x&&this.y===j.y},dist:function(j){return Math.sqrt(this.distSqr(j))},distSqr:function(j){var y=j.x-this.x,$=j.y-this.y;return y*y+$*$},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(j){return Math.atan2(this.y-j.y,this.x-j.x)},angleWith:function(j){return this.angleWithSep(j.x,j.y)},angleWithSep:function(j,y){return Math.atan2(this.x*y-this.y*j,this.x*j+this.y*y)},_matMult:function(j){var y=j[2]*this.x+j[3]*this.y;return this.x=j[0]*this.x+j[1]*this.y,this.y=y,this},_add:function(j){return this.x+=j.x,this.y+=j.y,this},_sub:function(j){return this.x-=j.x,this.y-=j.y,this},_mult:function(j){return this.x*=j,this.y*=j,this},_div:function(j){return this.x/=j,this.y/=j,this},_multByPoint:function(j){return this.x*=j.x,this.y*=j.y,this},_divByPoint:function(j){return this.x/=j.x,this.y/=j.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var j=this.y;return this.y=this.x,this.x=-j,this},_rotate:function(j){var y=Math.cos(j),$=Math.sin(j),ee=$*this.x+y*this.y;return this.x=y*this.x-$*this.y,this.y=ee,this},_rotateAround:function(j,y){var $=Math.cos(j),ee=Math.sin(j),he=y.y+ee*(this.x-y.x)+$*(this.y-y.y);return this.x=y.x+$*(this.x-y.x)-ee*(this.y-y.y),this.y=he,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},xe.convert=function(j){return j instanceof xe?j:Array.isArray(j)?new xe(j[0],j[1]):j};const we=Math.PI/180,ke=180/Math.PI;function Se(j){return j*we}function Oe(j){return j*ke}const Fe=[[0,0],[1,0],[1,1],[0,1]];function ze(j){if(j<=0)return 0;if(j>=1)return 1;const y=j*j,$=y*j;return 4*(j<.5?$:3*(j-y)+$-.75)}function Le(j,y,$,ee){const he=new ne(j,y,$,ee);return function(Ee){return he.solve(Ee)}}const We=Le(.25,.1,.25,1);function qe(j,y,$){return Math.min($,Math.max(y,j))}function Ne(j,y,$){return($=qe(($-j)/(y-j),0,1))*$*(3-2*$)}function Ke(j,y,$){const ee=$-y,he=((j-y)%ee+ee)%ee+y;return he===y?$:he}function ot(j,y,$){if(!j.length)return $(null,[]);let ee=j.length;const he=new Array(j.length);let Ee=null;j.forEach((Ce,Pe)=>{y(Ce,($e,De)=>{$e&&(Ee=$e),he[Pe]=De,--ee==0&&$(Ee,he)})})}function yt(j){const y=[];for(const $ in j)y.push(j[$]);return y}function ft(j,...y){for(const $ of y)for(const ee in $)j[ee]=$[ee];return j}let _t=1;function Je(){return _t++}function Qe(){return function j(y){return y?(y^Math.random()*(16>>y/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,j)}()}function tt(j){return j<=1?1:Math.pow(2,Math.ceil(Math.log(j)/Math.LN2))}function ht(j){return!!j&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(j)}function it(j,y){j.forEach($=>{y[$]&&(y[$]=y[$].bind(y))})}function pt(j,y){return j.indexOf(y,j.length-y.length)!==-1}function vt(j,y,$){const ee={};for(const he in j)ee[he]=y.call($||this,j[he],he,j);return ee}function ut(j,y,$){const ee={};for(const he in j)y.call($||this,j[he],he,j)&&(ee[he]=j[he]);return ee}function Nt(j){return Array.isArray(j)?j.map(Nt):typeof j=="object"&&j?vt(j,Nt):j}const at={};function Mt(j){at[j]||(typeof console!="undefined"&&console.warn(j),at[j]=!0)}function nn(j,y,$){return($.y-j.y)*(y.x-j.x)>(y.y-j.y)*($.x-j.x)}function Tn(j){let y=0;for(let $,ee,he=0,Ee=j.length,Ce=Ee-1;he<Ee;Ce=he++)$=j[he],ee=j[Ce],y+=(ee.x-$.x)*($.y+ee.y);return y}function Jt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function on(j){const y={};if(j.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,($,ee,he,Ee)=>{const Ce=he||Ee;return y[ee]=!Ce||Ce.toLowerCase(),""}),y["max-age"]){const $=parseInt(y["max-age"],10);isNaN($)?delete y["max-age"]:y["max-age"]=$}return y}let Vt=null;function Rt(j){if(Vt==null){const y=j.navigator?j.navigator.userAgent:null;Vt=!!j.safari||!(!y||!(/\b(iPad|iPhone|iPod)\b/.test(y)||y.match("Safari")&&!y.match("Chrome")))}return Vt}function Yt(j){try{const y=_e[j];return y.setItem("_mapbox_test_",1),y.removeItem("_mapbox_test_"),!0}catch{return!1}}function un(j,y){return[j[4*y],j[4*y+1],j[4*y+2],j[4*y+3]]}const yn=_e.performance;function In(j){const y=j?j.url.toString():void 0;return yn.getEntriesByName(y)}var It="2.10.0";let $t,an,xn,En;const $n={now:()=>xn!==void 0?xn:_e.performance.now(),setNow(j){xn=j},restoreNow(){xn=void 0},frame(j){const y=_e.requestAnimationFrame(j);return{cancel:()=>_e.cancelAnimationFrame(y)}},getImageData(j,y=0){const{width:$,height:ee}=j;En||(En=_e.document.createElement("canvas"));const he=En.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return($>En.width||ee>En.height)&&(En.width=$,En.height=ee),he.clearRect(-y,-y,$+2*y,ee+2*y),he.drawImage(j,0,0,$,ee),he.getImageData(-y,-y,$+2*y,ee+2*y)},resolveURL:j=>($t||($t=_e.document.createElement("a")),$t.href=j,$t.href),get devicePixelRatio(){return _e.devicePixelRatio},get prefersReducedMotion(){return!!_e.matchMedia&&(an==null&&(an=_e.matchMedia("(prefers-reduced-motion: reduce)")),an.matches)}};let zn;const vn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(zn==null){const j=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{zn={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):j}catch{zn=j}}return zn},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},wn={supported:!1,testSupport:function(j){!tr&&Jn&&(pr?Xn(j):Sn=j)}};let Sn,Jn,tr=!1,pr=!1;function Xn(j){const y=j.createTexture();j.bindTexture(j.TEXTURE_2D,y);try{if(j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,Jn),j.isContextLost())return;wn.supported=!0}catch{}j.deleteTexture(y),tr=!0}_e.document&&(Jn=_e.document.createElement("img"),Jn.onload=function(){Sn&&Xn(Sn),Sn=null,pr=!0},Jn.onerror=function(){tr=!0,Sn=null},Jn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Gn="01",cn="NO_ACCESS_TOKEN";function gn(j){return j.indexOf("mapbox:")===0}function On(j){return vn.API_URL_REGEX.test(j)}const Kn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _r(j){const y=j.match(Kn);if(!y)throw new Error("Unable to parse URL object");return{protocol:y[1],authority:y[2],path:y[3]||"/",params:y[4]?y[4].split("&"):[]}}function kr(j){const y=j.params.length?`?${j.params.join("&")}`:"";return`${j.protocol}://${j.authority}${j.path}${y}`}function Dr(j){if(!j)return null;const y=j.split(".");if(!y||y.length!==3)return null;try{return JSON.parse(decodeURIComponent(_e.atob(y[1]).split("").map($=>"%"+("00"+$.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class xr{constructor(y){this.type=y,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(y){const $=Dr(vn.ACCESS_TOKEN);let ee="";return ee=$&&$.u?_e.btoa(encodeURIComponent($.u).replace(/%([0-9A-F]{2})/g,(he,Ee)=>String.fromCharCode(Number("0x"+Ee)))):vn.ACCESS_TOKEN||"",y?`mapbox.eventData.${y}:${ee}`:`mapbox.eventData:${ee}`}fetchEventData(){const y=Yt("localStorage"),$=this.getStorageKey(),ee=this.getStorageKey("uuid");if(y)try{const he=_e.localStorage.getItem($);he&&(this.eventData=JSON.parse(he));const Ee=_e.localStorage.getItem(ee);Ee&&(this.anonId=Ee)}catch{Mt("Unable to read from LocalStorage")}}saveEventData(){const y=Yt("localStorage"),$=this.getStorageKey(),ee=this.getStorageKey("uuid");if(y)try{_e.localStorage.setItem(ee,this.anonId),Object.keys(this.eventData).length>=1&&_e.localStorage.setItem($,JSON.stringify(this.eventData))}catch{Mt("Unable to write to LocalStorage")}}processRequests(y){}postEvent(y,$,ee,he){if(!vn.EVENTS_URL)return;const Ee=_r(vn.EVENTS_URL);Ee.params.push(`access_token=${he||vn.ACCESS_TOKEN||""}`);const Ce={event:this.type,created:new Date(y).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:It,skuId:Gn,userId:this.anonId},Pe=$?ft(Ce,$):Ce,$e={url:kr(Ee),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Pe])};this.pendingRequest=Nn($e,De=>{this.pendingRequest=null,ee(De),this.saveEventData(),this.processRequests(he)})}queueRequest(y,$){this.queue.push(y),this.processRequests($)}}const Lr=new class extends xr{constructor(j){super("appUserTurnstile"),this._customAccessToken=j}postTurnstileEvent(j,y){vn.EVENTS_URL&&vn.ACCESS_TOKEN&&Array.isArray(j)&&j.some($=>gn($)||On($))&&this.queueRequest(Date.now(),y)}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const y=Dr(vn.ACCESS_TOKEN),$=y?y.u:vn.ACCESS_TOKEN;let ee=$!==this.eventData.tokenU;ht(this.anonId)||(this.anonId=Qe(),ee=!0);const he=this.queue.shift();if(this.eventData.lastSuccess){const Ee=new Date(this.eventData.lastSuccess),Ce=new Date(he),Pe=(he-this.eventData.lastSuccess)/864e5;ee=ee||Pe>=1||Pe<-1||Ee.getDate()!==Ce.getDate()}else ee=!0;ee?this.postEvent(he,{"enabled.telemetry":!1},Ee=>{Ee||(this.eventData.lastSuccess=he,this.eventData.tokenU=$)},j):this.processRequests()}},Br=Lr.postTurnstileEvent.bind(Lr),Vr=new class extends xr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(j,y,$,ee){this.skuToken=y,this.errorCb=ee,vn.EVENTS_URL&&($||vn.ACCESS_TOKEN?this.queueRequest({id:j,timestamp:Date.now()},$):this.errorCb(new Error(cn)))}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:$}=this.queue.shift();y&&this.success[y]||(this.anonId||this.fetchEventData(),ht(this.anonId)||(this.anonId=Qe()),this.postEvent($,{skuToken:this.skuToken},ee=>{ee?this.errorCb(ee):y&&(this.success[y]=!0)},j))}},jr=Vr.postMapLoadEvent.bind(Vr),Oi=new class extends xr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(j,y,$,ee){if(!vn.API_URL||!vn.SESSION_PATH)return;const he=_r(vn.API_URL+vn.SESSION_PATH);he.params.push(`sku=${y||""}`),he.params.push(`access_token=${ee||vn.ACCESS_TOKEN||""}`);const Ee={url:kr(he),headers:{"Content-Type":"text/plain"}};this.pendingRequest=ar(Ee,Ce=>{this.pendingRequest=null,$(Ce),this.saveEventData(),this.processRequests(ee)})}getSessionAPI(j,y,$,ee){this.skuToken=y,this.errorCb=ee,vn.SESSION_PATH&&vn.API_URL&&($||vn.ACCESS_TOKEN?this.queueRequest({id:j,timestamp:Date.now()},$):this.errorCb(new Error(cn)))}processRequests(j){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:$}=this.queue.shift();y&&this.success[y]||this.getSession($,this.skuToken,ee=>{ee?this.errorCb(ee):y&&(this.success[y]=!0)},j)}},Di=Oi.getSessionAPI.bind(Oi),Ai=new Set;let Cr,Fo=500,Ea=50,vi={};function sa(j){const y=mt(j);let $,ee;y&&y.forEach(Ee=>{const Ce=Ee.split("=");Ce[0]==="language"?$=Ce[1]:Ce[0]==="worldview"&&(ee=Ce[1])});let he="mapbox-tiles";return $&&(he+=`-${$}`),ee&&(he+=`-${ee}`),he}function Lt(){try{return _e.caches}catch{}}function ct(j){const y=Lt();y&&!vi[j]&&(vi[j]=y.open(j))}function mt(j){const y=j.indexOf("?");return y>0?j.slice(y+1).split("&"):[]}function Dt(j){const y=j.indexOf("?");if(y<0)return j;const $=mt(j).filter(ee=>{const he=ee.split("=");return he[0]==="language"||he[0]==="worldview"});return $.length?`${j.slice(0,y)}?${$.join("&")}`:j.slice(0,y)}let Ut=1/0;const tn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(tn);class pn extends Error{constructor(y,$,ee){$===401&&On(ee)&&(y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(y),this.status=$,this.url=ee}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const hn=Jt()?()=>self.worker&&self.worker.referrer:()=>(_e.location.protocol==="blob:"?_e.parent:_e).location.href,rn=function(j,y){if(!(/^file:/.test($=j.url)||/^file:/.test(hn())&&!/^\w+:/.test($))){if(_e.fetch&&_e.Request&&_e.AbortController&&_e.Request.prototype.hasOwnProperty("signal"))return function(ee,he){const Ee=new _e.AbortController,Ce=new _e.Request(ee.url,{method:ee.method||"GET",body:ee.body,credentials:ee.credentials,headers:ee.headers,referrer:hn(),signal:Ee.signal});let Pe=!1,$e=!1;const De=(Ve=Ce.url).indexOf("sku=")>0&&On(Ve);var Ve;ee.type==="json"&&Ce.headers.set("Accept","application/json");const Ze=(rt,st,gt)=>{if($e)return;if(rt&&rt.message!=="SecurityError"&&Mt(rt),st&&gt)return Xe(st);const At=Date.now();_e.fetch(Ce).then(Bt=>{if(Bt.ok){const qt=De?Bt.clone():null;return Xe(Bt,qt,At)}return he(new pn(Bt.statusText,Bt.status,ee.url))}).catch(Bt=>{Bt.code!==20&&he(new Error(Bt.message))})},Xe=(rt,st,gt)=>{(ee.type==="arrayBuffer"?rt.arrayBuffer():ee.type==="json"?rt.json():rt.text()).then(At=>{$e||(st&&gt&&function(Bt,qt,Ft){const Ht=sa(Bt.url);if(ct(Ht),!vi[Ht])return;const en={status:qt.status,statusText:qt.statusText,headers:new _e.Headers};qt.headers.forEach((bn,Mn)=>en.headers.set(Mn,bn));const Zt=on(qt.headers.get("Cache-Control")||"");if(Zt["no-store"])return;Zt["max-age"]&&en.headers.set("Expires",new Date(Ft+1e3*Zt["max-age"]).toUTCString());const An=en.headers.get("Expires");An&&(new Date(An).getTime()-Ft<42e4||function(bn,Mn){if(Cr===void 0)try{new Response(new ReadableStream),Cr=!0}catch{Cr=!1}Cr?Mn(bn.body):bn.blob().then(Mn)}(qt,bn=>{const Mn=new _e.Response(bn,en);ct(Ht),vi[Ht]&&vi[Ht].then(Yn=>Yn.put(Dt(Bt.url),Mn)).catch(Yn=>Mt(Yn.message))}))}(Ce,st,gt),Pe=!0,he(null,At,rt.headers.get("Cache-Control"),rt.headers.get("Expires")))}).catch(At=>{$e||he(new Error(At.message))})};return De?function(rt,st){const gt=sa(rt.url);if(ct(gt),!vi[gt])return st(null);const At=Dt(rt.url);vi[gt].then(Bt=>{Bt.match(At).then(qt=>{const Ft=function(Ht){if(!Ht)return!1;const en=new Date(Ht.headers.get("Expires")||0),Zt=on(Ht.headers.get("Cache-Control")||"");return en>Date.now()&&!Zt["no-cache"]}(qt);Bt.delete(At),Ft&&Bt.put(At,qt.clone()),st(null,qt,Ft)}).catch(st)}).catch(st)}(Ce,Ze):Ze(null,null),{cancel:()=>{$e=!0,Pe||Ee.abort()}}}(j,y);if(Jt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",j,y,void 0,!0)}var $;return function(ee,he){const Ee=new _e.XMLHttpRequest;Ee.open(ee.method||"GET",ee.url,!0),ee.type==="arrayBuffer"&&(Ee.responseType="arraybuffer");for(const Ce in ee.headers)Ee.setRequestHeader(Ce,ee.headers[Ce]);return ee.type==="json"&&(Ee.responseType="text",Ee.setRequestHeader("Accept","application/json")),Ee.withCredentials=ee.credentials==="include",Ee.onerror=()=>{he(new Error(Ee.statusText))},Ee.onload=()=>{if((Ee.status>=200&&Ee.status<300||Ee.status===0)&&Ee.response!==null){let Ce=Ee.response;if(ee.type==="json")try{Ce=JSON.parse(Ee.response)}catch(Pe){return he(Pe)}he(null,Ce,Ee.getResponseHeader("Cache-Control"),Ee.getResponseHeader("Expires"))}else he(new pn(Ee.statusText,Ee.status,ee.url))},Ee.send(ee.body),{cancel:()=>Ee.abort()}}(j,y)},fn=function(j,y){return rn(ft(j,{type:"arrayBuffer"}),y)},Nn=function(j,y){return rn(ft(j,{method:"POST"}),y)},ar=function(j,y){return rn(ft(j,{method:"GET"}),y)};function Hn(j){const y=_e.document.createElement("a");return y.href=j,y.protocol===_e.document.location.protocol&&y.host===_e.document.location.host}const br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let wr,mr;wr=[],mr=0;const Er=function(j,y){if(wn.supported&&(j.headers||(j.headers={}),j.headers.accept="image/webp,*/*"),mr>=vn.MAX_PARALLEL_IMAGE_REQUESTS){const Ee={requestParameters:j,callback:y,cancelled:!1,cancel(){this.cancelled=!0}};return wr.push(Ee),Ee}mr++;let $=!1;const ee=()=>{if(!$)for($=!0,mr--;wr.length&&mr<vn.MAX_PARALLEL_IMAGE_REQUESTS;){const Ee=wr.shift(),{requestParameters:Ce,callback:Pe,cancelled:$e}=Ee;$e||(Ee.cancel=Er(Ce,Pe).cancel)}},he=fn(j,(Ee,Ce,Pe,$e)=>{ee(),Ee?y(Ee):Ce&&(_e.createImageBitmap?function(De,Ve){const Ze=new _e.Blob([new Uint8Array(De)],{type:"image/png"});_e.createImageBitmap(Ze).then(Xe=>{Ve(null,Xe)}).catch(Xe=>{Ve(new Error(`Could not load image because of ${Xe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(Ce,(De,Ve)=>y(De,Ve,Pe,$e)):function(De,Ve){const Ze=new _e.Image,Xe=_e.URL;Ze.onload=()=>{Ve(null,Ze),Xe.revokeObjectURL(Ze.src),Ze.onload=null,_e.requestAnimationFrame(()=>{Ze.src=br})},Ze.onerror=()=>Ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const rt=new _e.Blob([new Uint8Array(De)],{type:"image/png"});Ze.src=De.byteLength?Xe.createObjectURL(rt):br}(Ce,(De,Ve)=>y(De,Ve,Pe,$e)))});return{cancel:()=>{he.cancel(),ee()}}};function zr(j,y,$){$[j]&&$[j].indexOf(y)!==-1||($[j]=$[j]||[],$[j].push(y))}function Qr(j,y,$){if($&&$[j]){const ee=$[j].indexOf(y);ee!==-1&&$[j].splice(ee,1)}}class oi{constructor(y,$={}){ft(this,$),this.type=y}}class ti extends oi{constructor(y,$={}){super("error",ft({error:y},$))}}class vr{on(y,$){return this._listeners=this._listeners||{},zr(y,$,this._listeners),this}off(y,$){return Qr(y,$,this._listeners),Qr(y,$,this._oneTimeListeners),this}once(y,$){return $?(this._oneTimeListeners=this._oneTimeListeners||{},zr(y,$,this._oneTimeListeners),this):new Promise(ee=>this.once(y,ee))}fire(y,$){typeof y=="string"&&(y=new oi(y,$||{}));const ee=y.type;if(this.listens(ee)){y.target=this;const he=this._listeners&&this._listeners[ee]?this._listeners[ee].slice():[];for(const Pe of he)Pe.call(this,y);const Ee=this._oneTimeListeners&&this._oneTimeListeners[ee]?this._oneTimeListeners[ee].slice():[];for(const Pe of Ee)Qr(ee,Pe,this._oneTimeListeners),Pe.call(this,y);const Ce=this._eventedParent;Ce&&(ft(y,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Ce.fire(y))}else y instanceof ti&&console.error(y.error);return this}listens(y){return!!(this._listeners&&this._listeners[y]&&this._listeners[y].length>0||this._oneTimeListeners&&this._oneTimeListeners[y]&&this._oneTimeListeners[y].length>0||this._eventedParent&&this._eventedParent.listens(y))}setEventedParent(y,$){return this._eventedParent=y,this._eventedParentData=$,this}}var mn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function po(j,...y){for(const $ of y)for(const ee in $)j[ee]=$[ee];return j}function Ti(j){return j instanceof Number||j instanceof String||j instanceof Boolean?j.valueOf():j}function la(j){if(Array.isArray(j))return j.map(la);if(j instanceof Object&&!(j instanceof Number||j instanceof String||j instanceof Boolean)){const y={};for(const $ in j)y[$]=la(j[$]);return y}return Ti(j)}class Aa extends Error{constructor(y,$){super($),this.message=$,this.key=y}}var Io=Aa;class hl{constructor(y,$=[]){this.parent=y,this.bindings={};for(const[ee,he]of $)this.bindings[ee]=he}concat(y){return new hl(this,y)}get(y){if(this.bindings[y])return this.bindings[y];if(this.parent)return this.parent.get(y);throw new Error(`${y} not found in scope.`)}has(y){return!!this.bindings[y]||!!this.parent&&this.parent.has(y)}}var Ku=hl;const ca={kind:"null"},sr={kind:"number"},Mr={kind:"string"},Fr={kind:"boolean"},Mo={kind:"color"},Oo={kind:"object"},Ir={kind:"value"},As={kind:"collator"},ua={kind:"formatted"},Ts={kind:"resolvedImage"};function fo(j,y){return{kind:"array",itemType:j,N:y}}function xi(j){if(j.kind==="array"){const y=xi(j.itemType);return typeof j.N=="number"?`array<${y}, ${j.N}>`:j.itemType.kind==="value"?"array":`array<${y}>`}return j.kind}const Yc=[ca,sr,Mr,Fr,Mo,ua,Oo,fo(Ir),Ts];function Za(j,y){if(y.kind==="error")return null;if(j.kind==="array"){if(y.kind==="array"&&(y.N===0&&y.itemType.kind==="value"||!Za(j.itemType,y.itemType))&&(typeof j.N!="number"||j.N===y.N))return null}else{if(j.kind===y.kind)return null;if(j.kind==="value"){for(const $ of Yc)if(!Za($,y))return null}}return`Expected ${xi(j)} but found ${xi(y)} instead.`}function dl(j,y){return y.some($=>$.kind===j.kind)}function ha(j,y){return y.some($=>$==="null"?j===null:$==="array"?Array.isArray(j):$==="object"?j&&!Array.isArray(j)&&typeof j=="object":$===typeof j)}function rc(j){var y={exports:{}};return j(y,y.exports),y.exports}var da=rc(function(j,y){var $={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ee(Pe){return(Pe=Math.round(Pe))<0?0:Pe>255?255:Pe}function he(Pe){return ee(Pe[Pe.length-1]==="%"?parseFloat(Pe)/100*255:parseInt(Pe))}function Ee(Pe){return($e=Pe[Pe.length-1]==="%"?parseFloat(Pe)/100:parseFloat(Pe))<0?0:$e>1?1:$e;var $e}function Ce(Pe,$e,De){return De<0?De+=1:De>1&&(De-=1),6*De<1?Pe+($e-Pe)*De*6:2*De<1?$e:3*De<2?Pe+($e-Pe)*(2/3-De)*6:Pe}try{y.parseCSSColor=function(Pe){var $e,De=Pe.replace(/ /g,"").toLowerCase();if(De in $)return $[De].slice();if(De[0]==="#")return De.length===4?($e=parseInt(De.substr(1),16))>=0&&$e<=4095?[(3840&$e)>>4|(3840&$e)>>8,240&$e|(240&$e)>>4,15&$e|(15&$e)<<4,1]:null:De.length===7&&($e=parseInt(De.substr(1),16))>=0&&$e<=16777215?[(16711680&$e)>>16,(65280&$e)>>8,255&$e,1]:null;var Ve=De.indexOf("("),Ze=De.indexOf(")");if(Ve!==-1&&Ze+1===De.length){var Xe=De.substr(0,Ve),rt=De.substr(Ve+1,Ze-(Ve+1)).split(","),st=1;switch(Xe){case"rgba":if(rt.length!==4)return null;st=Ee(rt.pop());case"rgb":return rt.length!==3?null:[he(rt[0]),he(rt[1]),he(rt[2]),st];case"hsla":if(rt.length!==4)return null;st=Ee(rt.pop());case"hsl":if(rt.length!==3)return null;var gt=(parseFloat(rt[0])%360+360)%360/360,At=Ee(rt[1]),Bt=Ee(rt[2]),qt=Bt<=.5?Bt*(At+1):Bt+At-Bt*At,Ft=2*Bt-qt;return[ee(255*Ce(Ft,qt,gt+1/3)),ee(255*Ce(Ft,qt,gt)),ee(255*Ce(Ft,qt,gt-1/3)),st];default:return null}}return null}}catch{}});class Zi{constructor(y,$,ee,he=1){this.r=y,this.g=$,this.b=ee,this.a=he}static parse(y){if(!y)return;if(y instanceof Zi)return y;if(typeof y!="string")return;const $=da.parseCSSColor(y);return $?new Zi($[0]/255*$[3],$[1]/255*$[3],$[2]/255*$[3],$[3]):void 0}toString(){const[y,$,ee,he]=this.toArray();return`rgba(${Math.round(y)},${Math.round($)},${Math.round(ee)},${he})`}toArray(){const{r:y,g:$,b:ee,a:he}=this;return he===0?[0,0,0,0]:[255*y/he,255*$/he,255*ee/he,he]}toArray01(){const{r:y,g:$,b:ee,a:he}=this;return he===0?[0,0,0,0]:[y/he,$/he,ee/he,he]}toArray01PremultipliedAlpha(){const{r:y,g:$,b:ee,a:he}=this;return[y,$,ee,he]}}Zi.black=new Zi(0,0,0,1),Zi.white=new Zi(1,1,1,1),Zi.transparent=new Zi(0,0,0,0),Zi.red=new Zi(1,0,0,1),Zi.blue=new Zi(0,0,1,1);var ri=Zi;class ic{constructor(y,$,ee){this.sensitivity=y?$?"variant":"case":$?"accent":"base",this.locale=ee,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(y,$){return this.collator.compare(y,$)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ks{constructor(y,$,ee,he,Ee){this.text=y.normalize?y.normalize():y,this.image=$,this.scale=ee,this.fontStack=he,this.textColor=Ee}}class oo{constructor(y){this.sections=y}static fromString(y){return new oo([new ks(y,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(y=>y.text.length!==0||y.image&&y.image.name.length!==0)}static factory(y){return y instanceof oo?y:oo.fromString(y)}toString(){return this.sections.length===0?"":this.sections.map(y=>y.text).join("")}serialize(){const y=["format"];for(const $ of this.sections){if($.image){y.push(["image",$.image.name]);continue}y.push($.text);const ee={};$.fontStack&&(ee["text-font"]=["literal",$.fontStack.split(",")]),$.scale&&(ee["font-scale"]=$.scale),$.textColor&&(ee["text-color"]=["rgba"].concat($.textColor.toArray())),y.push(ee)}return y}}class ao{constructor(y){this.name=y.name,this.available=y.available}toString(){return this.name}static fromString(y){return y?new ao({name:y,available:!1}):null}serialize(){return["image",this.name]}}function oc(j,y,$,ee){return typeof j=="number"&&j>=0&&j<=255&&typeof y=="number"&&y>=0&&y<=255&&typeof $=="number"&&$>=0&&$<=255?ee===void 0||typeof ee=="number"&&ee>=0&&ee<=1?null:`Invalid rgba value [${[j,y,$,ee].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ee=="number"?[j,y,$,ee]:[j,y,$]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function pa(j){if(j===null||typeof j=="string"||typeof j=="boolean"||typeof j=="number"||j instanceof ri||j instanceof ic||j instanceof oo||j instanceof ao)return!0;if(Array.isArray(j)){for(const y of j)if(!pa(y))return!1;return!0}if(typeof j=="object"){for(const y in j)if(!pa(j[y]))return!1;return!0}return!1}function Mi(j){if(j===null)return ca;if(typeof j=="string")return Mr;if(typeof j=="boolean")return Fr;if(typeof j=="number")return sr;if(j instanceof ri)return Mo;if(j instanceof ic)return As;if(j instanceof oo)return ua;if(j instanceof ao)return Ts;if(Array.isArray(j)){const y=j.length;let $;for(const ee of j){const he=Mi(ee);if($){if($===he)continue;$=Ir;break}$=he}return fo($||Ir,y)}return Oo}function Cs(j){const y=typeof j;return j===null?"":y==="string"||y==="number"||y==="boolean"?String(j):j instanceof ri||j instanceof oo||j instanceof ao?j.toString():JSON.stringify(j)}class Ss{constructor(y,$){this.type=y,this.value=$}static parse(y,$){if(y.length!==2)return $.error(`'literal' expression requires exactly one argument, but found ${y.length-1} instead.`);if(!pa(y[1]))return $.error("invalid value");const ee=y[1];let he=Mi(ee);const Ee=$.expectedType;return he.kind!=="array"||he.N!==0||!Ee||Ee.kind!=="array"||typeof Ee.N=="number"&&Ee.N!==0||(he=Ee),new Ss(he,ee)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ri?["rgba"].concat(this.value.toArray()):this.value instanceof oo?this.value.serialize():this.value}}var Ps=Ss,ji=class{constructor(j){this.name="ExpressionEvaluationError",this.message=j}toJSON(){return this.message}};const Is={string:Mr,number:sr,boolean:Fr,object:Oo};class Ms{constructor(y,$){this.type=y,this.args=$}static parse(y,$){if(y.length<2)return $.error("Expected at least one argument.");let ee,he=1;const Ee=y[0];if(Ee==="array"){let Pe,$e;if(y.length>2){const De=y[1];if(typeof De!="string"||!(De in Is)||De==="object")return $.error('The item type argument of "array" must be one of string, number, boolean',1);Pe=Is[De],he++}else Pe=Ir;if(y.length>3){if(y[2]!==null&&(typeof y[2]!="number"||y[2]<0||y[2]!==Math.floor(y[2])))return $.error('The length argument to "array" must be a positive integer literal',2);$e=y[2],he++}ee=fo(Pe,$e)}else ee=Is[Ee];const Ce=[];for(;he<y.length;he++){const Pe=$.parse(y[he],he,Ir);if(!Pe)return null;Ce.push(Pe)}return new Ms(ee,Ce)}evaluate(y){for(let $=0;$<this.args.length;$++){const ee=this.args[$].evaluate(y);if(!Za(this.type,Mi(ee)))return ee;if($===this.args.length-1)throw new ji(`Expected value to be of type ${xi(this.type)}, but found ${xi(Mi(ee))} instead.`)}return null}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=this.type,$=[y.kind];if(y.kind==="array"){const ee=y.itemType;if(ee.kind==="string"||ee.kind==="number"||ee.kind==="boolean"){$.push(ee.kind);const he=y.N;(typeof he=="number"||this.args.length>1)&&$.push(he)}}return $.concat(this.args.map(ee=>ee.serialize()))}}var yo=Ms;class Os{constructor(y){this.type=ua,this.sections=y}static parse(y,$){if(y.length<2)return $.error("Expected at least one argument.");const ee=y[1];if(!Array.isArray(ee)&&typeof ee=="object")return $.error("First argument must be an image or text section.");const he=[];let Ee=!1;for(let Ce=1;Ce<=y.length-1;++Ce){const Pe=y[Ce];if(Ee&&typeof Pe=="object"&&!Array.isArray(Pe)){Ee=!1;let $e=null;if(Pe["font-scale"]&&($e=$.parse(Pe["font-scale"],1,sr),!$e))return null;let De=null;if(Pe["text-font"]&&(De=$.parse(Pe["text-font"],1,fo(Mr)),!De))return null;let Ve=null;if(Pe["text-color"]&&(Ve=$.parse(Pe["text-color"],1,Mo),!Ve))return null;const Ze=he[he.length-1];Ze.scale=$e,Ze.font=De,Ze.textColor=Ve}else{const $e=$.parse(y[Ce],1,Ir);if(!$e)return null;const De=$e.type.kind;if(De!=="string"&&De!=="value"&&De!=="null"&&De!=="resolvedImage")return $.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ee=!0,he.push({content:$e,scale:null,font:null,textColor:null})}}return new Os(he)}evaluate(y){return new oo(this.sections.map($=>{const ee=$.content.evaluate(y);return Mi(ee)===Ts?new ks("",ee,null,null,null):new ks(Cs(ee),null,$.scale?$.scale.evaluate(y):null,$.font?$.font.evaluate(y).join(","):null,$.textColor?$.textColor.evaluate(y):null)}))}eachChild(y){for(const $ of this.sections)y($.content),$.scale&&y($.scale),$.font&&y($.font),$.textColor&&y($.textColor)}outputDefined(){return!1}serialize(){const y=["format"];for(const $ of this.sections){y.push($.content.serialize());const ee={};$.scale&&(ee["font-scale"]=$.scale.serialize()),$.font&&(ee["text-font"]=$.font.serialize()),$.textColor&&(ee["text-color"]=$.textColor.serialize()),y.push(ee)}return y}}class pl{constructor(y){this.type=Ts,this.input=y}static parse(y,$){if(y.length!==2)return $.error("Expected two arguments.");const ee=$.parse(y[1],1,Mr);return ee?new pl(ee):$.error("No image name provided.")}evaluate(y){const $=this.input.evaluate(y),ee=ao.fromString($);return ee&&y.availableImages&&(ee.available=y.availableImages.indexOf($)>-1),ee}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Yu={"to-boolean":Fr,"to-color":Mo,"to-number":sr,"to-string":Mr};class ac{constructor(y,$){this.type=y,this.args=$}static parse(y,$){if(y.length<2)return $.error("Expected at least one argument.");const ee=y[0];if((ee==="to-boolean"||ee==="to-string")&&y.length!==2)return $.error("Expected one argument.");const he=Yu[ee],Ee=[];for(let Ce=1;Ce<y.length;Ce++){const Pe=$.parse(y[Ce],Ce,Ir);if(!Pe)return null;Ee.push(Pe)}return new ac(he,Ee)}evaluate(y){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(y));if(this.type.kind==="color"){let $,ee;for(const he of this.args){if($=he.evaluate(y),ee=null,$ instanceof ri)return $;if(typeof $=="string"){const Ee=y.parseColor($);if(Ee)return Ee}else if(Array.isArray($)&&(ee=$.length<3||$.length>4?`Invalid rbga value ${JSON.stringify($)}: expected an array containing either three or four numeric values.`:oc($[0],$[1],$[2],$[3]),!ee))return new ri($[0]/255,$[1]/255,$[2]/255,$[3])}throw new ji(ee||`Could not parse color from value '${typeof $=="string"?$:String(JSON.stringify($))}'`)}if(this.type.kind==="number"){let $=null;for(const ee of this.args){if($=ee.evaluate(y),$===null)return 0;const he=Number($);if(!isNaN(he))return he}throw new ji(`Could not convert ${JSON.stringify($)} to number.`)}return this.type.kind==="formatted"?oo.fromString(Cs(this.args[0].evaluate(y))):this.type.kind==="resolvedImage"?ao.fromString(Cs(this.args[0].evaluate(y))):Cs(this.args[0].evaluate(y))}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Os([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new pl(this.args[0]).serialize();const y=[`to-${this.type.kind}`];return this.eachChild($=>{y.push($.serialize())}),y}}var Ta=ac;const Ju=["Unknown","Point","LineString","Polygon"];var Jc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ju[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const j=this.featureDistanceData.center,y=this.featureDistanceData.scale,{x:$,y:ee}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*($*y-j[0])+this.featureDistanceData.bearing[1]*(ee*y-j[1])}return 0}parseColor(j){let y=this._parseColorCache[j];return y||(y=this._parseColorCache[j]=ri.parse(j)),y}};class ka{constructor(y,$,ee,he){this.name=y,this.type=$,this._evaluate=ee,this.args=he}evaluate(y){return this._evaluate(y,this.args)}eachChild(y){this.args.forEach(y)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(y=>y.serialize()))}static parse(y,$){const ee=y[0],he=ka.definitions[ee];if(!he)return $.error(`Unknown expression "${ee}". If you wanted a literal array, use ["literal", [...]].`,0);const Ee=Array.isArray(he)?he[0]:he.type,Ce=Array.isArray(he)?[[he[1],he[2]]]:he.overloads,Pe=Ce.filter(([De])=>!Array.isArray(De)||De.length===y.length-1);let $e=null;for(const[De,Ve]of Pe){$e=new Sa($.registry,$.path,null,$.scope);const Ze=[];let Xe=!1;for(let rt=1;rt<y.length;rt++){const st=y[rt],gt=Array.isArray(De)?De[rt-1]:De.type,At=$e.parse(st,1+Ze.length,gt);if(!At){Xe=!0;break}Ze.push(At)}if(!Xe)if(Array.isArray(De)&&De.length!==Ze.length)$e.error(`Expected ${De.length} arguments, but found ${Ze.length} instead.`);else{for(let rt=0;rt<Ze.length;rt++){const st=Array.isArray(De)?De[rt]:De.type,gt=Ze[rt];$e.concat(rt+1).checkSubtype(st,gt.type)}if($e.errors.length===0)return new ka(ee,Ee,Ve,Ze)}}if(Pe.length===1)$.errors.push(...$e.errors);else{const De=(Pe.length?Pe:Ce).map(([Ze])=>{return Xe=Ze,Array.isArray(Xe)?`(${Xe.map(xi).join(", ")})`:`(${xi(Xe.type)}...)`;var Xe}).join(" | "),Ve=[];for(let Ze=1;Ze<y.length;Ze++){const Xe=$.parse(y[Ze],1+Ve.length);if(!Xe)return null;Ve.push(xi(Xe.type))}$.error(`Expected arguments of type ${De}, but found (${Ve.join(", ")}) instead.`)}return null}static register(y,$){ka.definitions=$;for(const ee in $)y[ee]=ka}}var so=ka;class fl{constructor(y,$,ee){this.type=As,this.locale=ee,this.caseSensitive=y,this.diacriticSensitive=$}static parse(y,$){if(y.length!==2)return $.error("Expected one argument.");const ee=y[1];if(typeof ee!="object"||Array.isArray(ee))return $.error("Collator options argument must be an object.");const he=$.parse(ee["case-sensitive"]!==void 0&&ee["case-sensitive"],1,Fr);if(!he)return null;const Ee=$.parse(ee["diacritic-sensitive"]!==void 0&&ee["diacritic-sensitive"],1,Fr);if(!Ee)return null;let Ce=null;return ee.locale&&(Ce=$.parse(ee.locale,1,Mr),!Ce)?null:new fl(he,Ee,Ce)}evaluate(y){return new ic(this.caseSensitive.evaluate(y),this.diacriticSensitive.evaluate(y),this.locale?this.locale.evaluate(y):null)}eachChild(y){y(this.caseSensitive),y(this.diacriticSensitive),this.locale&&y(this.locale)}outputDefined(){return!1}serialize(){const y={};return y["case-sensitive"]=this.caseSensitive.serialize(),y["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(y.locale=this.locale.serialize()),["collator",y]}}const Ro=8192;function sc(j,y){j[0]=Math.min(j[0],y[0]),j[1]=Math.min(j[1],y[1]),j[2]=Math.max(j[2],y[0]),j[3]=Math.max(j[3],y[1])}function _l(j,y){return!(j[0]<=y[0]||j[2]>=y[2]||j[1]<=y[1]||j[3]>=y[3])}function Qu(j,y){const $=(180+j[0])/360,ee=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+j[1]*Math.PI/360)))/360,he=Math.pow(2,y.z);return[Math.round($*he*Ro),Math.round(ee*he*Ro)]}function Rs(j,y,$){const ee=j[0]-y[0],he=j[1]-y[1],Ee=j[0]-$[0],Ce=j[1]-$[1];return ee*Ce-Ee*he==0&&ee*Ee<=0&&he*Ce<=0}function ml(j,y){let $=!1;for(let Ce=0,Pe=y.length;Ce<Pe;Ce++){const $e=y[Ce];for(let De=0,Ve=$e.length;De<Ve-1;De++){if(Rs(j,$e[De],$e[De+1]))return!1;(he=$e[De])[1]>(ee=j)[1]!=(Ee=$e[De+1])[1]>ee[1]&&ee[0]<(Ee[0]-he[0])*(ee[1]-he[1])/(Ee[1]-he[1])+he[0]&&($=!$)}}var ee,he,Ee;return $}function $s(j,y){for(let $=0;$<y.length;$++)if(ml(j,y[$]))return!0;return!1}function Qc(j,y,$,ee){const he=ee[0]-$[0],Ee=ee[1]-$[1],Ce=(j[0]-$[0])*Ee-he*(j[1]-$[1]),Pe=(y[0]-$[0])*Ee-he*(y[1]-$[1]);return Ce>0&&Pe<0||Ce<0&&Pe>0}function eh(j,y,$){for(const De of $)for(let Ve=0;Ve<De.length-1;++Ve)if((Pe=[(Ce=De[Ve+1])[0]-(Ee=De[Ve])[0],Ce[1]-Ee[1]])[0]*($e=[(he=y)[0]-(ee=j)[0],he[1]-ee[1]])[1]-Pe[1]*$e[0]!=0&&Qc(ee,he,Ee,Ce)&&Qc(Ee,Ce,ee,he))return!0;var ee,he,Ee,Ce,Pe,$e;return!1}function eu(j,y){for(let $=0;$<j.length;++$)if(!ml(j[$],y))return!1;for(let $=0;$<j.length-1;++$)if(eh(j[$],j[$+1],y))return!1;return!0}function th(j,y){for(let $=0;$<y.length;$++)if(eu(j,y[$]))return!0;return!1}function vo(j,y,$){const ee=[];for(let he=0;he<j.length;he++){const Ee=[];for(let Ce=0;Ce<j[he].length;Ce++){const Pe=Qu(j[he][Ce],$);sc(y,Pe),Ee.push(Pe)}ee.push(Ee)}return ee}function Ca(j,y,$){const ee=[];for(let he=0;he<j.length;he++){const Ee=vo(j[he],y,$);ee.push(Ee)}return ee}function lc(j,y,$,ee){if(j[0]<$[0]||j[0]>$[2]){const he=.5*ee;let Ee=j[0]-$[0]>he?-ee:$[0]-j[0]>he?ee:0;Ee===0&&(Ee=j[0]-$[2]>he?-ee:$[2]-j[0]>he?ee:0),j[0]+=Ee}sc(y,j)}function gl(j,y,$,ee){const he=Math.pow(2,ee.z)*Ro,Ee=[ee.x*Ro,ee.y*Ro],Ce=[];if(!j)return Ce;for(const Pe of j)for(const $e of Pe){const De=[$e.x+Ee[0],$e.y+Ee[1]];lc(De,y,$,he),Ce.push(De)}return Ce}function cc(j,y,$,ee){const he=Math.pow(2,ee.z)*Ro,Ee=[ee.x*Ro,ee.y*Ro],Ce=[];if(!j)return Ce;for(const $e of j){const De=[];for(const Ve of $e){const Ze=[Ve.x+Ee[0],Ve.y+Ee[1]];sc(y,Ze),De.push(Ze)}Ce.push(De)}if(y[2]-y[0]<=he/2){(Pe=y)[0]=Pe[1]=1/0,Pe[2]=Pe[3]=-1/0;for(const $e of Ce)for(const De of $e)lc(De,y,$,he)}var Pe;return Ce}class Xa{constructor(y,$){this.type=Fr,this.geojson=y,this.geometries=$}static parse(y,$){if(y.length!==2)return $.error(`'within' expression requires exactly one argument, but found ${y.length-1} instead.`);if(pa(y[1])){const ee=y[1];if(ee.type==="FeatureCollection")for(let he=0;he<ee.features.length;++he){const Ee=ee.features[he].geometry.type;if(Ee==="Polygon"||Ee==="MultiPolygon")return new Xa(ee,ee.features[he].geometry)}else if(ee.type==="Feature"){const he=ee.geometry.type;if(he==="Polygon"||he==="MultiPolygon")return new Xa(ee,ee.geometry)}else if(ee.type==="Polygon"||ee.type==="MultiPolygon")return new Xa(ee,ee)}return $.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(y){if(y.geometry()!=null&&y.canonicalID()!=null){if(y.geometryType()==="Point")return function($,ee){const he=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],Ce=$.canonicalID();if(!Ce)return!1;if(ee.type==="Polygon"){const Pe=vo(ee.coordinates,Ee,Ce),$e=gl($.geometry(),he,Ee,Ce);if(!_l(he,Ee))return!1;for(const De of $e)if(!ml(De,Pe))return!1}if(ee.type==="MultiPolygon"){const Pe=Ca(ee.coordinates,Ee,Ce),$e=gl($.geometry(),he,Ee,Ce);if(!_l(he,Ee))return!1;for(const De of $e)if(!$s(De,Pe))return!1}return!0}(y,this.geometries);if(y.geometryType()==="LineString")return function($,ee){const he=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],Ce=$.canonicalID();if(!Ce)return!1;if(ee.type==="Polygon"){const Pe=vo(ee.coordinates,Ee,Ce),$e=cc($.geometry(),he,Ee,Ce);if(!_l(he,Ee))return!1;for(const De of $e)if(!eu(De,Pe))return!1}if(ee.type==="MultiPolygon"){const Pe=Ca(ee.coordinates,Ee,Ce),$e=cc($.geometry(),he,Ee,Ce);if(!_l(he,Ee))return!1;for(const De of $e)if(!th(De,Pe))return!1}return!0}(y,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var yl=Xa;function No(j){if(j instanceof so&&(j.name==="get"&&j.args.length===1||j.name==="feature-state"||j.name==="has"&&j.args.length===1||j.name==="properties"||j.name==="geometry-type"||j.name==="id"||/^filter-/.test(j.name))||j instanceof yl)return!1;let y=!0;return j.eachChild($=>{y&&!No($)&&(y=!1)}),y}function fa(j){if(j instanceof so&&j.name==="feature-state")return!1;let y=!0;return j.eachChild($=>{y&&!fa($)&&(y=!1)}),y}function jo(j,y){if(j instanceof so&&y.indexOf(j.name)>=0)return!1;let $=!0;return j.eachChild(ee=>{$&&!jo(ee,y)&&($=!1)}),$}class vl{constructor(y,$){this.type=$.type,this.name=y,this.boundExpression=$}static parse(y,$){if(y.length!==2||typeof y[1]!="string")return $.error("'var' expression requires exactly one string literal argument.");const ee=y[1];return $.scope.has(ee)?new vl(ee,$.scope.get(ee)):$.error(`Unknown variable "${ee}". Make sure "${ee}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(y){return this.boundExpression.evaluate(y)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var zs=vl;class xl{constructor(y,$=[],ee,he=new Ku,Ee=[]){this.registry=y,this.path=$,this.key=$.map(Ce=>`[${Ce}]`).join(""),this.scope=he,this.errors=Ee,this.expectedType=ee}parse(y,$,ee,he,Ee={}){return $?this.concat($,ee,he)._parse(y,Ee):this._parse(y,Ee)}_parse(y,$){function ee(he,Ee,Ce){return Ce==="assert"?new yo(Ee,[he]):Ce==="coerce"?new Ta(Ee,[he]):he}if(y!==null&&typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"||(y=["literal",y]),Array.isArray(y)){if(y.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const he=y[0];if(typeof he!="string")return this.error(`Expression name must be a string, but found ${typeof he} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Ee=this.registry[he];if(Ee){let Ce=Ee.parse(y,this);if(!Ce)return null;if(this.expectedType){const Pe=this.expectedType,$e=Ce.type;if(Pe.kind!=="string"&&Pe.kind!=="number"&&Pe.kind!=="boolean"&&Pe.kind!=="object"&&Pe.kind!=="array"||$e.kind!=="value")if(Pe.kind!=="color"&&Pe.kind!=="formatted"&&Pe.kind!=="resolvedImage"||$e.kind!=="value"&&$e.kind!=="string"){if(this.checkSubtype(Pe,$e))return null}else Ce=ee(Ce,Pe,$.typeAnnotation||"coerce");else Ce=ee(Ce,Pe,$.typeAnnotation||"assert")}if(!(Ce instanceof Ps)&&Ce.type.kind!=="resolvedImage"&&Kr(Ce)){const Pe=new Jc;try{Ce=new Ps(Ce.type,Ce.evaluate(Pe))}catch($e){return this.error($e.message),null}}return Ce}return this.error(`Unknown expression "${he}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(y===void 0?"'undefined' value invalid. Use null instead.":typeof y=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof y} instead.`)}concat(y,$,ee){const he=typeof y=="number"?this.path.concat(y):this.path,Ee=ee?this.scope.concat(ee):this.scope;return new xl(this.registry,he,$||null,Ee,this.errors)}error(y,...$){const ee=`${this.key}${$.map(he=>`[${he}]`).join("")}`;this.errors.push(new Io(ee,y))}checkSubtype(y,$){const ee=Za(y,$);return ee&&this.error(ee),ee}}var Sa=xl;function Kr(j){if(j instanceof zs)return Kr(j.boundExpression);if(j instanceof so&&j.name==="error"||j instanceof fl||j instanceof yl)return!1;const y=j instanceof Ta||j instanceof yo;let $=!0;return j.eachChild(ee=>{$=y?$&&Kr(ee):$&&ee instanceof Ps}),!!$&&No(j)&&jo(j,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function bl(j,y){const $=j.length-1;let ee,he,Ee=0,Ce=$,Pe=0;for(;Ee<=Ce;)if(Pe=Math.floor((Ee+Ce)/2),ee=j[Pe],he=j[Pe+1],ee<=y){if(Pe===$||y<he)return Pe;Ee=Pe+1}else{if(!(ee>y))throw new ji("Input is not a number.");Ce=Pe-1}return 0}class uc{constructor(y,$,ee){this.type=y,this.input=$,this.labels=[],this.outputs=[];for(const[he,Ee]of ee)this.labels.push(he),this.outputs.push(Ee)}static parse(y,$){if(y.length-1<4)return $.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return $.error("Expected an even number of arguments.");const ee=$.parse(y[1],1,sr);if(!ee)return null;const he=[];let Ee=null;$.expectedType&&$.expectedType.kind!=="value"&&(Ee=$.expectedType);for(let Ce=1;Ce<y.length;Ce+=2){const Pe=Ce===1?-1/0:y[Ce],$e=y[Ce+1],De=Ce,Ve=Ce+1;if(typeof Pe!="number")return $.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',De);if(he.length&&he[he.length-1][0]>=Pe)return $.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',De);const Ze=$.parse($e,Ve,Ee);if(!Ze)return null;Ee=Ee||Ze.type,he.push([Pe,Ze])}return new uc(Ee,ee,he)}evaluate(y){const $=this.labels,ee=this.outputs;if($.length===1)return ee[0].evaluate(y);const he=this.input.evaluate(y);if(he<=$[0])return ee[0].evaluate(y);const Ee=$.length;return he>=$[Ee-1]?ee[Ee-1].evaluate(y):ee[bl($,he)].evaluate(y)}eachChild(y){y(this.input);for(const $ of this.outputs)y($)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){const y=["step",this.input.serialize()];for(let $=0;$<this.labels.length;$++)$>0&&y.push(this.labels[$]),y.push(this.outputs[$].serialize());return y}}var hc=uc;function qr(j,y,$){return j*(1-$)+y*$}function Ka(j,y,$){return j.map((ee,he)=>qr(ee,y[he],$))}var Ds=Object.freeze({__proto__:null,number:qr,color:function(j,y,$){return new ri(qr(j.r,y.r,$),qr(j.g,y.g,$),qr(j.b,y.b,$),qr(j.a,y.a,$))},array:Ka});const $o=.95047,dc=1.08883,wl=4/29,_a=6/29,Ya=3*_a*_a,nh=Math.PI/180,Jo=180/Math.PI;function El(j){return j>.008856451679035631?Math.pow(j,1/3):j/Ya+wl}function Ls(j){return j>_a?j*j*j:Ya*(j-wl)}function pc(j){return 255*(j<=.0031308?12.92*j:1.055*Math.pow(j,1/2.4)-.055)}function Al(j){return(j/=255)<=.04045?j/12.92:Math.pow((j+.055)/1.055,2.4)}function tu(j){const y=Al(j.r),$=Al(j.g),ee=Al(j.b),he=El((.4124564*y+.3575761*$+.1804375*ee)/$o),Ee=El((.2126729*y+.7151522*$+.072175*ee)/1);return{l:116*Ee-16,a:500*(he-Ee),b:200*(Ee-El((.0193339*y+.119192*$+.9503041*ee)/dc)),alpha:j.a}}function Tl(j){let y=(j.l+16)/116,$=isNaN(j.a)?y:y+j.a/500,ee=isNaN(j.b)?y:y-j.b/200;return y=1*Ls(y),$=$o*Ls($),ee=dc*Ls(ee),new ri(pc(3.2404542*$-1.5371385*y-.4985314*ee),pc(-.969266*$+1.8760108*y+.041556*ee),pc(.0556434*$-.2040259*y+1.0572252*ee),j.alpha)}function nu(j,y,$){const ee=y-j;return j+$*(ee>180||ee<-180?ee-360*Math.round(ee/360):ee)}const Uo={forward:tu,reverse:Tl,interpolate:function(j,y,$){return{l:qr(j.l,y.l,$),a:qr(j.a,y.a,$),b:qr(j.b,y.b,$),alpha:qr(j.alpha,y.alpha,$)}}},Ja={forward:function(j){const{l:y,a:$,b:ee}=tu(j),he=Math.atan2(ee,$)*Jo;return{h:he<0?he+360:he,c:Math.sqrt($*$+ee*ee),l:y,alpha:j.a}},reverse:function(j){const y=j.h*nh,$=j.c;return Tl({l:j.l,a:Math.cos(y)*$,b:Math.sin(y)*$,alpha:j.alpha})},interpolate:function(j,y,$){return{h:nu(j.h,y.h,$),c:qr(j.c,y.c,$),l:qr(j.l,y.l,$),alpha:qr(j.alpha,y.alpha,$)}}};var ru=Object.freeze({__proto__:null,lab:Uo,hcl:Ja});class Bs{constructor(y,$,ee,he,Ee){this.type=y,this.operator=$,this.interpolation=ee,this.input=he,this.labels=[],this.outputs=[];for(const[Ce,Pe]of Ee)this.labels.push(Ce),this.outputs.push(Pe)}static interpolationFactor(y,$,ee,he){let Ee=0;if(y.name==="exponential")Ee=kl($,y.base,ee,he);else if(y.name==="linear")Ee=kl($,1,ee,he);else if(y.name==="cubic-bezier"){const Ce=y.controlPoints;Ee=new ne(Ce[0],Ce[1],Ce[2],Ce[3]).solve(kl($,1,ee,he))}return Ee}static parse(y,$){let[ee,he,Ee,...Ce]=y;if(!Array.isArray(he)||he.length===0)return $.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){const De=he[1];if(typeof De!="number")return $.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:De}}else{if(he[0]!=="cubic-bezier")return $.error(`Unknown interpolation type ${String(he[0])}`,1,0);{const De=he.slice(1);if(De.length!==4||De.some(Ve=>typeof Ve!="number"||Ve<0||Ve>1))return $.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:De}}}if(y.length-1<4)return $.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return $.error("Expected an even number of arguments.");if(Ee=$.parse(Ee,2,sr),!Ee)return null;const Pe=[];let $e=null;ee==="interpolate-hcl"||ee==="interpolate-lab"?$e=Mo:$.expectedType&&$.expectedType.kind!=="value"&&($e=$.expectedType);for(let De=0;De<Ce.length;De+=2){const Ve=Ce[De],Ze=Ce[De+1],Xe=De+3,rt=De+4;if(typeof Ve!="number")return $.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xe);if(Pe.length&&Pe[Pe.length-1][0]>=Ve)return $.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Xe);const st=$.parse(Ze,rt,$e);if(!st)return null;$e=$e||st.type,Pe.push([Ve,st])}return $e.kind==="number"||$e.kind==="color"||$e.kind==="array"&&$e.itemType.kind==="number"&&typeof $e.N=="number"?new Bs($e,ee,he,Ee,Pe):$.error(`Type ${xi($e)} is not interpolatable.`)}evaluate(y){const $=this.labels,ee=this.outputs;if($.length===1)return ee[0].evaluate(y);const he=this.input.evaluate(y);if(he<=$[0])return ee[0].evaluate(y);const Ee=$.length;if(he>=$[Ee-1])return ee[Ee-1].evaluate(y);const Ce=bl($,he),Pe=Bs.interpolationFactor(this.interpolation,he,$[Ce],$[Ce+1]),$e=ee[Ce].evaluate(y),De=ee[Ce+1].evaluate(y);return this.operator==="interpolate"?Ds[this.type.kind.toLowerCase()]($e,De,Pe):this.operator==="interpolate-hcl"?Ja.reverse(Ja.interpolate(Ja.forward($e),Ja.forward(De),Pe)):Uo.reverse(Uo.interpolate(Uo.forward($e),Uo.forward(De),Pe))}eachChild(y){y(this.input);for(const $ of this.outputs)y($)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){let y;y=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const $=[this.operator,y,this.input.serialize()];for(let ee=0;ee<this.labels.length;ee++)$.push(this.labels[ee],this.outputs[ee].serialize());return $}}function kl(j,y,$,ee){const he=ee-$,Ee=j-$;return he===0?0:y===1?Ee/he:(Math.pow(y,Ee)-1)/(Math.pow(y,he)-1)}var Vo=Bs;class Pa{constructor(y,$){this.type=y,this.args=$}static parse(y,$){if(y.length<2)return $.error("Expectected at least one argument.");let ee=null;const he=$.expectedType;he&&he.kind!=="value"&&(ee=he);const Ee=[];for(const Pe of y.slice(1)){const $e=$.parse(Pe,1+Ee.length,ee,void 0,{typeAnnotation:"omit"});if(!$e)return null;ee=ee||$e.type,Ee.push($e)}const Ce=he&&Ee.some(Pe=>Za(he,Pe.type));return new Pa(Ce?Ir:ee,Ee)}evaluate(y){let $,ee=null,he=0;for(const Ee of this.args){if(he++,ee=Ee.evaluate(y),ee&&ee instanceof ao&&!ee.available&&($||($=ee),ee=null,he===this.args.length))return $;if(ee!==null)break}return ee}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=["coalesce"];return this.eachChild($=>{y.push($.serialize())}),y}}var iu=Pa;class fc{constructor(y,$){this.type=$.type,this.bindings=[].concat(y),this.result=$}evaluate(y){return this.result.evaluate(y)}eachChild(y){for(const $ of this.bindings)y($[1]);y(this.result)}static parse(y,$){if(y.length<4)return $.error(`Expected at least 3 arguments, but found ${y.length-1} instead.`);const ee=[];for(let Ee=1;Ee<y.length-1;Ee+=2){const Ce=y[Ee];if(typeof Ce!="string")return $.error(`Expected string, but found ${typeof Ce} instead.`,Ee);if(/[^a-zA-Z0-9_]/.test(Ce))return $.error("Variable names must contain only alphanumeric characters or '_'.",Ee);const Pe=$.parse(y[Ee+1],Ee+1);if(!Pe)return null;ee.push([Ce,Pe])}const he=$.parse(y[y.length-1],y.length-1,$.expectedType,ee);return he?new fc(ee,he):null}outputDefined(){return this.result.outputDefined()}serialize(){const y=["let"];for(const[$,ee]of this.bindings)y.push($,ee.serialize());return y.push(this.result.serialize()),y}}var ou=fc;class _c{constructor(y,$,ee){this.type=y,this.index=$,this.input=ee}static parse(y,$){if(y.length!==3)return $.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const ee=$.parse(y[1],1,sr),he=$.parse(y[2],2,fo($.expectedType||Ir));return ee&&he?new _c(he.type.itemType,ee,he):null}evaluate(y){const $=this.index.evaluate(y),ee=this.input.evaluate(y);if($<0)throw new ji(`Array index out of bounds: ${$} < 0.`);if($>=ee.length)throw new ji(`Array index out of bounds: ${$} > ${ee.length-1}.`);if($!==Math.floor($))throw new ji(`Array index must be an integer, but found ${$} instead.`);return ee[$]}eachChild(y){y(this.index),y(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var au=_c;class mc{constructor(y,$){this.type=Fr,this.needle=y,this.haystack=$}static parse(y,$){if(y.length!==3)return $.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const ee=$.parse(y[1],1,Ir),he=$.parse(y[2],2,Ir);return ee&&he?dl(ee.type,[Fr,Mr,sr,ca,Ir])?new mc(ee,he):$.error(`Expected first argument to be of type boolean, string, number or null, but found ${xi(ee.type)} instead`):null}evaluate(y){const $=this.needle.evaluate(y),ee=this.haystack.evaluate(y);if(ee==null)return!1;if(!ha($,["boolean","string","number","null"]))throw new ji(`Expected first argument to be of type boolean, string, number or null, but found ${xi(Mi($))} instead.`);if(!ha(ee,["string","array"]))throw new ji(`Expected second argument to be of type array or string, but found ${xi(Mi(ee))} instead.`);return ee.indexOf($)>=0}eachChild(y){y(this.needle),y(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var rh=mc;class Cl{constructor(y,$,ee){this.type=sr,this.needle=y,this.haystack=$,this.fromIndex=ee}static parse(y,$){if(y.length<=2||y.length>=5)return $.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const ee=$.parse(y[1],1,Ir),he=$.parse(y[2],2,Ir);if(!ee||!he)return null;if(!dl(ee.type,[Fr,Mr,sr,ca,Ir]))return $.error(`Expected first argument to be of type boolean, string, number or null, but found ${xi(ee.type)} instead`);if(y.length===4){const Ee=$.parse(y[3],3,sr);return Ee?new Cl(ee,he,Ee):null}return new Cl(ee,he)}evaluate(y){const $=this.needle.evaluate(y),ee=this.haystack.evaluate(y);if(!ha($,["boolean","string","number","null"]))throw new ji(`Expected first argument to be of type boolean, string, number or null, but found ${xi(Mi($))} instead.`);if(!ha(ee,["string","array"]))throw new ji(`Expected second argument to be of type array or string, but found ${xi(Mi(ee))} instead.`);if(this.fromIndex){const he=this.fromIndex.evaluate(y);return ee.indexOf($,he)}return ee.indexOf($)}eachChild(y){y(this.needle),y(this.haystack),this.fromIndex&&y(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const y=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),y]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ih=Cl;class Sl{constructor(y,$,ee,he,Ee,Ce){this.inputType=y,this.type=$,this.input=ee,this.cases=he,this.outputs=Ee,this.otherwise=Ce}static parse(y,$){if(y.length<5)return $.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if(y.length%2!=1)return $.error("Expected an even number of arguments.");let ee,he;$.expectedType&&$.expectedType.kind!=="value"&&(he=$.expectedType);const Ee={},Ce=[];for(let De=2;De<y.length-1;De+=2){let Ve=y[De];const Ze=y[De+1];Array.isArray(Ve)||(Ve=[Ve]);const Xe=$.concat(De);if(Ve.length===0)return Xe.error("Expected at least one branch label.");for(const st of Ve){if(typeof st!="number"&&typeof st!="string")return Xe.error("Branch labels must be numbers or strings.");if(typeof st=="number"&&Math.abs(st)>Number.MAX_SAFE_INTEGER)return Xe.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof st=="number"&&Math.floor(st)!==st)return Xe.error("Numeric branch labels must be integer values.");if(ee){if(Xe.checkSubtype(ee,Mi(st)))return null}else ee=Mi(st);if(Ee[String(st)]!==void 0)return Xe.error("Branch labels must be unique.");Ee[String(st)]=Ce.length}const rt=$.parse(Ze,De,he);if(!rt)return null;he=he||rt.type,Ce.push(rt)}const Pe=$.parse(y[1],1,Ir);if(!Pe)return null;const $e=$.parse(y[y.length-1],y.length-1,he);return $e?Pe.type.kind!=="value"&&$.concat(1).checkSubtype(ee,Pe.type)?null:new Sl(ee,he,Pe,Ee,Ce,$e):null}evaluate(y){const $=this.input.evaluate(y);return(Mi($)===this.inputType&&this.outputs[this.cases[$]]||this.otherwise).evaluate(y)}eachChild(y){y(this.input),this.outputs.forEach(y),y(this.otherwise)}outputDefined(){return this.outputs.every(y=>y.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["match",this.input.serialize()],$=Object.keys(this.cases).sort(),ee=[],he={};for(const Ce of $){const Pe=he[this.cases[Ce]];Pe===void 0?(he[this.cases[Ce]]=ee.length,ee.push([this.cases[Ce],[Ce]])):ee[Pe][1].push(Ce)}const Ee=Ce=>this.inputType.kind==="number"?Number(Ce):Ce;for(const[Ce,Pe]of ee)y.push(Pe.length===1?Ee(Pe[0]):Pe.map(Ee)),y.push(this.outputs[Ce].serialize());return y.push(this.otherwise.serialize()),y}}var su=Sl;class Pl{constructor(y,$,ee){this.type=y,this.branches=$,this.otherwise=ee}static parse(y,$){if(y.length<4)return $.error(`Expected at least 3 arguments, but found only ${y.length-1}.`);if(y.length%2!=0)return $.error("Expected an odd number of arguments.");let ee;$.expectedType&&$.expectedType.kind!=="value"&&(ee=$.expectedType);const he=[];for(let Ce=1;Ce<y.length-1;Ce+=2){const Pe=$.parse(y[Ce],Ce,Fr);if(!Pe)return null;const $e=$.parse(y[Ce+1],Ce+1,ee);if(!$e)return null;he.push([Pe,$e]),ee=ee||$e.type}const Ee=$.parse(y[y.length-1],y.length-1,ee);return Ee?new Pl(ee,he,Ee):null}evaluate(y){for(const[$,ee]of this.branches)if($.evaluate(y))return ee.evaluate(y);return this.otherwise.evaluate(y)}eachChild(y){for(const[$,ee]of this.branches)y($),y(ee);y(this.otherwise)}outputDefined(){return this.branches.every(([y,$])=>$.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["case"];return this.eachChild($=>{y.push($.serialize())}),y}}var oh=Pl;class Fs{constructor(y,$,ee,he){this.type=y,this.input=$,this.beginIndex=ee,this.endIndex=he}static parse(y,$){if(y.length<=2||y.length>=5)return $.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const ee=$.parse(y[1],1,Ir),he=$.parse(y[2],2,sr);if(!ee||!he)return null;if(!dl(ee.type,[fo(Ir),Mr,Ir]))return $.error(`Expected first argument to be of type array or string, but found ${xi(ee.type)} instead`);if(y.length===4){const Ee=$.parse(y[3],3,sr);return Ee?new Fs(ee.type,ee,he,Ee):null}return new Fs(ee.type,ee,he)}evaluate(y){const $=this.input.evaluate(y),ee=this.beginIndex.evaluate(y);if(!ha($,["string","array"]))throw new ji(`Expected first argument to be of type array or string, but found ${xi(Mi($))} instead.`);if(this.endIndex){const he=this.endIndex.evaluate(y);return $.slice(ee,he)}return $.slice(ee)}eachChild(y){y(this.input),y(this.beginIndex),this.endIndex&&y(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const y=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),y]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var lu=Fs;function Qa(j,y){return j==="=="||j==="!="?y.kind==="boolean"||y.kind==="string"||y.kind==="number"||y.kind==="null"||y.kind==="value":y.kind==="string"||y.kind==="number"||y.kind==="value"}function gc(j,y,$,ee){return ee.compare(y,$)===0}function Ia(j,y,$){const ee=j!=="=="&&j!=="!=";return class Q_{constructor(Ee,Ce,Pe){this.type=Fr,this.lhs=Ee,this.rhs=Ce,this.collator=Pe,this.hasUntypedArgument=Ee.type.kind==="value"||Ce.type.kind==="value"}static parse(Ee,Ce){if(Ee.length!==3&&Ee.length!==4)return Ce.error("Expected two or three arguments.");const Pe=Ee[0];let $e=Ce.parse(Ee[1],1,Ir);if(!$e)return null;if(!Qa(Pe,$e.type))return Ce.concat(1).error(`"${Pe}" comparisons are not supported for type '${xi($e.type)}'.`);let De=Ce.parse(Ee[2],2,Ir);if(!De)return null;if(!Qa(Pe,De.type))return Ce.concat(2).error(`"${Pe}" comparisons are not supported for type '${xi(De.type)}'.`);if($e.type.kind!==De.type.kind&&$e.type.kind!=="value"&&De.type.kind!=="value")return Ce.error(`Cannot compare types '${xi($e.type)}' and '${xi(De.type)}'.`);ee&&($e.type.kind==="value"&&De.type.kind!=="value"?$e=new yo(De.type,[$e]):$e.type.kind!=="value"&&De.type.kind==="value"&&(De=new yo($e.type,[De])));let Ve=null;if(Ee.length===4){if($e.type.kind!=="string"&&De.type.kind!=="string"&&$e.type.kind!=="value"&&De.type.kind!=="value")return Ce.error("Cannot use collator to compare non-string types.");if(Ve=Ce.parse(Ee[3],3,As),!Ve)return null}return new Q_($e,De,Ve)}evaluate(Ee){const Ce=this.lhs.evaluate(Ee),Pe=this.rhs.evaluate(Ee);if(ee&&this.hasUntypedArgument){const $e=Mi(Ce),De=Mi(Pe);if($e.kind!==De.kind||$e.kind!=="string"&&$e.kind!=="number")throw new ji(`Expected arguments for "${j}" to be (string, string) or (number, number), but found (${$e.kind}, ${De.kind}) instead.`)}if(this.collator&&!ee&&this.hasUntypedArgument){const $e=Mi(Ce),De=Mi(Pe);if($e.kind!=="string"||De.kind!=="string")return y(Ee,Ce,Pe)}return this.collator?$(Ee,Ce,Pe,this.collator.evaluate(Ee)):y(Ee,Ce,Pe)}eachChild(Ee){Ee(this.lhs),Ee(this.rhs),this.collator&&Ee(this.collator)}outputDefined(){return!0}serialize(){const Ee=[j];return this.eachChild(Ce=>{Ee.push(Ce.serialize())}),Ee}}}const ah=Ia("==",function(j,y,$){return y===$},gc),cu=Ia("!=",function(j,y,$){return y!==$},function(j,y,$,ee){return!gc(0,y,$,ee)}),sh=Ia("<",function(j,y,$){return y<$},function(j,y,$,ee){return ee.compare(y,$)<0}),Il=Ia(">",function(j,y,$){return y>$},function(j,y,$,ee){return ee.compare(y,$)>0}),uu=Ia("<=",function(j,y,$){return y<=$},function(j,y,$,ee){return ee.compare(y,$)<=0}),hu=Ia(">=",function(j,y,$){return y>=$},function(j,y,$,ee){return ee.compare(y,$)>=0});class yc{constructor(y,$,ee,he,Ee,Ce){this.type=Mr,this.number=y,this.locale=$,this.currency=ee,this.unit=he,this.minFractionDigits=Ee,this.maxFractionDigits=Ce}static parse(y,$){if(y.length!==3)return $.error("Expected two arguments.");const ee=$.parse(y[1],1,sr);if(!ee)return null;const he=y[2];if(typeof he!="object"||Array.isArray(he))return $.error("NumberFormat options argument must be an object.");let Ee=null;if(he.locale&&(Ee=$.parse(he.locale,1,Mr),!Ee))return null;let Ce=null;if(he.currency&&(Ce=$.parse(he.currency,1,Mr),!Ce))return null;let Pe=null;if(he.unit&&(Pe=$.parse(he.unit,1,Mr),!Pe))return null;let $e=null;if(he["min-fraction-digits"]&&($e=$.parse(he["min-fraction-digits"],1,sr),!$e))return null;let De=null;return he["max-fraction-digits"]&&(De=$.parse(he["max-fraction-digits"],1,sr),!De)?null:new yc(ee,Ee,Ce,Pe,$e,De)}evaluate(y){return new Intl.NumberFormat(this.locale?this.locale.evaluate(y):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(y):void 0,unit:this.unit?this.unit.evaluate(y):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(y):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(y):void 0}).format(this.number.evaluate(y))}eachChild(y){y(this.number),this.locale&&y(this.locale),this.currency&&y(this.currency),this.unit&&y(this.unit),this.minFractionDigits&&y(this.minFractionDigits),this.maxFractionDigits&&y(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const y={};return this.locale&&(y.locale=this.locale.serialize()),this.currency&&(y.currency=this.currency.serialize()),this.unit&&(y.unit=this.unit.serialize()),this.minFractionDigits&&(y["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(y["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),y]}}class vc{constructor(y){this.type=sr,this.input=y}static parse(y,$){if(y.length!==2)return $.error(`Expected 1 argument, but found ${y.length-1} instead.`);const ee=$.parse(y[1],1);return ee?ee.type.kind!=="array"&&ee.type.kind!=="string"&&ee.type.kind!=="value"?$.error(`Expected argument of type string or array, but found ${xi(ee.type)} instead.`):new vc(ee):null}evaluate(y){const $=this.input.evaluate(y);if(typeof $=="string"||Array.isArray($))return $.length;throw new ji(`Expected value to be of type string or array, but found ${xi(Mi($))} instead.`)}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){const y=["length"];return this.eachChild($=>{y.push($.serialize())}),y}}const du={"==":ah,"!=":cu,">":Il,"<":sh,">=":hu,"<=":uu,array:yo,at:au,boolean:yo,case:oh,coalesce:iu,collator:fl,format:Os,image:pl,in:rh,"index-of":ih,interpolate:Vo,"interpolate-hcl":Vo,"interpolate-lab":Vo,length:vc,let:ou,literal:Ps,match:su,number:yo,"number-format":yc,object:yo,slice:lu,step:hc,string:yo,"to-boolean":Ta,"to-color":Ta,"to-number":Ta,"to-string":Ta,var:zs,within:yl};function Ns(j,[y,$,ee,he]){y=y.evaluate(j),$=$.evaluate(j),ee=ee.evaluate(j);const Ee=he?he.evaluate(j):1,Ce=oc(y,$,ee,Ee);if(Ce)throw new ji(Ce);return new ri(y/255*Ee,$/255*Ee,ee/255*Ee,Ee)}function xc(j,y){return j in y}function Ml(j,y){const $=y[j];return $===void 0?null:$}function Qo(j){return{type:j}}so.register(du,{error:[{kind:"error"},[Mr],(j,[y])=>{throw new ji(y.evaluate(j))}],typeof:[Mr,[Ir],(j,[y])=>xi(Mi(y.evaluate(j)))],"to-rgba":[fo(sr,4),[Mo],(j,[y])=>y.evaluate(j).toArray()],rgb:[Mo,[sr,sr,sr],Ns],rgba:[Mo,[sr,sr,sr,sr],Ns],has:{type:Fr,overloads:[[[Mr],(j,[y])=>xc(y.evaluate(j),j.properties())],[[Mr,Oo],(j,[y,$])=>xc(y.evaluate(j),$.evaluate(j))]]},get:{type:Ir,overloads:[[[Mr],(j,[y])=>Ml(y.evaluate(j),j.properties())],[[Mr,Oo],(j,[y,$])=>Ml(y.evaluate(j),$.evaluate(j))]]},"feature-state":[Ir,[Mr],(j,[y])=>Ml(y.evaluate(j),j.featureState||{})],properties:[Oo,[],j=>j.properties()],"geometry-type":[Mr,[],j=>j.geometryType()],id:[Ir,[],j=>j.id()],zoom:[sr,[],j=>j.globals.zoom],pitch:[sr,[],j=>j.globals.pitch||0],"distance-from-center":[sr,[],j=>j.distanceFromCenter()],"heatmap-density":[sr,[],j=>j.globals.heatmapDensity||0],"line-progress":[sr,[],j=>j.globals.lineProgress||0],"sky-radial-progress":[sr,[],j=>j.globals.skyRadialProgress||0],accumulated:[Ir,[],j=>j.globals.accumulated===void 0?null:j.globals.accumulated],"+":[sr,Qo(sr),(j,y)=>{let $=0;for(const ee of y)$+=ee.evaluate(j);return $}],"*":[sr,Qo(sr),(j,y)=>{let $=1;for(const ee of y)$*=ee.evaluate(j);return $}],"-":{type:sr,overloads:[[[sr,sr],(j,[y,$])=>y.evaluate(j)-$.evaluate(j)],[[sr],(j,[y])=>-y.evaluate(j)]]},"/":[sr,[sr,sr],(j,[y,$])=>y.evaluate(j)/$.evaluate(j)],"%":[sr,[sr,sr],(j,[y,$])=>y.evaluate(j)%$.evaluate(j)],ln2:[sr,[],()=>Math.LN2],pi:[sr,[],()=>Math.PI],e:[sr,[],()=>Math.E],"^":[sr,[sr,sr],(j,[y,$])=>Math.pow(y.evaluate(j),$.evaluate(j))],sqrt:[sr,[sr],(j,[y])=>Math.sqrt(y.evaluate(j))],log10:[sr,[sr],(j,[y])=>Math.log(y.evaluate(j))/Math.LN10],ln:[sr,[sr],(j,[y])=>Math.log(y.evaluate(j))],log2:[sr,[sr],(j,[y])=>Math.log(y.evaluate(j))/Math.LN2],sin:[sr,[sr],(j,[y])=>Math.sin(y.evaluate(j))],cos:[sr,[sr],(j,[y])=>Math.cos(y.evaluate(j))],tan:[sr,[sr],(j,[y])=>Math.tan(y.evaluate(j))],asin:[sr,[sr],(j,[y])=>Math.asin(y.evaluate(j))],acos:[sr,[sr],(j,[y])=>Math.acos(y.evaluate(j))],atan:[sr,[sr],(j,[y])=>Math.atan(y.evaluate(j))],min:[sr,Qo(sr),(j,y)=>Math.min(...y.map($=>$.evaluate(j)))],max:[sr,Qo(sr),(j,y)=>Math.max(...y.map($=>$.evaluate(j)))],abs:[sr,[sr],(j,[y])=>Math.abs(y.evaluate(j))],round:[sr,[sr],(j,[y])=>{const $=y.evaluate(j);return $<0?-Math.round(-$):Math.round($)}],floor:[sr,[sr],(j,[y])=>Math.floor(y.evaluate(j))],ceil:[sr,[sr],(j,[y])=>Math.ceil(y.evaluate(j))],"filter-==":[Fr,[Mr,Ir],(j,[y,$])=>j.properties()[y.value]===$.value],"filter-id-==":[Fr,[Ir],(j,[y])=>j.id()===y.value],"filter-type-==":[Fr,[Mr],(j,[y])=>j.geometryType()===y.value],"filter-<":[Fr,[Mr,Ir],(j,[y,$])=>{const ee=j.properties()[y.value],he=$.value;return typeof ee==typeof he&&ee<he}],"filter-id-<":[Fr,[Ir],(j,[y])=>{const $=j.id(),ee=y.value;return typeof $==typeof ee&&$<ee}],"filter->":[Fr,[Mr,Ir],(j,[y,$])=>{const ee=j.properties()[y.value],he=$.value;return typeof ee==typeof he&&ee>he}],"filter-id->":[Fr,[Ir],(j,[y])=>{const $=j.id(),ee=y.value;return typeof $==typeof ee&&$>ee}],"filter-<=":[Fr,[Mr,Ir],(j,[y,$])=>{const ee=j.properties()[y.value],he=$.value;return typeof ee==typeof he&&ee<=he}],"filter-id-<=":[Fr,[Ir],(j,[y])=>{const $=j.id(),ee=y.value;return typeof $==typeof ee&&$<=ee}],"filter->=":[Fr,[Mr,Ir],(j,[y,$])=>{const ee=j.properties()[y.value],he=$.value;return typeof ee==typeof he&&ee>=he}],"filter-id->=":[Fr,[Ir],(j,[y])=>{const $=j.id(),ee=y.value;return typeof $==typeof ee&&$>=ee}],"filter-has":[Fr,[Ir],(j,[y])=>y.value in j.properties()],"filter-has-id":[Fr,[],j=>j.id()!==null&&j.id()!==void 0],"filter-type-in":[Fr,[fo(Mr)],(j,[y])=>y.value.indexOf(j.geometryType())>=0],"filter-id-in":[Fr,[fo(Ir)],(j,[y])=>y.value.indexOf(j.id())>=0],"filter-in-small":[Fr,[Mr,fo(Ir)],(j,[y,$])=>$.value.indexOf(j.properties()[y.value])>=0],"filter-in-large":[Fr,[Mr,fo(Ir)],(j,[y,$])=>function(ee,he,Ee,Ce){for(;Ee<=Ce;){const Pe=Ee+Ce>>1;if(he[Pe]===ee)return!0;he[Pe]>ee?Ce=Pe-1:Ee=Pe+1}return!1}(j.properties()[y.value],$.value,0,$.value.length-1)],all:{type:Fr,overloads:[[[Fr,Fr],(j,[y,$])=>y.evaluate(j)&&$.evaluate(j)],[Qo(Fr),(j,y)=>{for(const $ of y)if(!$.evaluate(j))return!1;return!0}]]},any:{type:Fr,overloads:[[[Fr,Fr],(j,[y,$])=>y.evaluate(j)||$.evaluate(j)],[Qo(Fr),(j,y)=>{for(const $ of y)if($.evaluate(j))return!0;return!1}]]},"!":[Fr,[Fr],(j,[y])=>!y.evaluate(j)],"is-supported-script":[Fr,[Mr],(j,[y])=>{const $=j.globals&&j.globals.isSupportedScript;return!$||$(y.evaluate(j))}],upcase:[Mr,[Mr],(j,[y])=>y.evaluate(j).toUpperCase()],downcase:[Mr,[Mr],(j,[y])=>y.evaluate(j).toLowerCase()],concat:[Mr,Qo(Ir),(j,y)=>y.map($=>Cs($.evaluate(j))).join("")],"resolved-locale":[Mr,[As],(j,[y])=>y.evaluate(j).resolvedLocale()]});var js=du;function pu(j){return{result:"success",value:j}}function Ma(j){return{result:"error",value:j}}function es(j){return j["property-type"]==="data-driven"||j["property-type"]==="cross-faded-data-driven"}function fu(j){return!!j.expression&&j.expression.parameters.indexOf("zoom")>-1}function bc(j){return!!j.expression&&j.expression.interpolated}function Jr(j){return j instanceof Number?"number":j instanceof String?"string":j instanceof Boolean?"boolean":Array.isArray(j)?"array":j===null?"null":typeof j}function Us(j){return typeof j=="object"&&j!==null&&!Array.isArray(j)}function _u(j){return j}function Vs(j,y){const $=y.type==="color",ee=j.stops&&typeof j.stops[0][0]=="object",he=ee||!(ee||j.property!==void 0),Ee=j.type||(bc(y)?"exponential":"interval");if($&&((j=po({},j)).stops&&(j.stops=j.stops.map(De=>[De[0],ri.parse(De[1])])),j.default=ri.parse(j.default?j.default:y.default)),j.colorSpace&&j.colorSpace!=="rgb"&&!ru[j.colorSpace])throw new Error(`Unknown color space: ${j.colorSpace}`);let Ce,Pe,$e;if(Ee==="exponential")Ce=wc;else if(Ee==="interval")Ce=ma;else if(Ee==="categorical"){Ce=lh,Pe=Object.create(null);for(const De of j.stops)Pe[De[0]]=De[1];$e=typeof j.stops[0][0]}else{if(Ee!=="identity")throw new Error(`Unknown function type "${Ee}"`);Ce=ts}if(ee){const De={},Ve=[];for(let rt=0;rt<j.stops.length;rt++){const st=j.stops[rt],gt=st[0].zoom;De[gt]===void 0&&(De[gt]={zoom:gt,type:j.type,property:j.property,default:j.default,stops:[]},Ve.push(gt)),De[gt].stops.push([st[0].value,st[1]])}const Ze=[];for(const rt of Ve)Ze.push([De[rt].zoom,Vs(De[rt],y)]);const Xe={name:"linear"};return{kind:"composite",interpolationType:Xe,interpolationFactor:Vo.interpolationFactor.bind(void 0,Xe),zoomStops:Ze.map(rt=>rt[0]),evaluate:({zoom:rt},st)=>wc({stops:Ze,base:j.base},y,rt).evaluate(rt,st)}}if(he){const De=Ee==="exponential"?{name:"exponential",base:j.base!==void 0?j.base:1}:null;return{kind:"camera",interpolationType:De,interpolationFactor:Vo.interpolationFactor.bind(void 0,De),zoomStops:j.stops.map(Ve=>Ve[0]),evaluate:({zoom:Ve})=>Ce(j,y,Ve,Pe,$e)}}return{kind:"source",evaluate(De,Ve){const Ze=Ve&&Ve.properties?Ve.properties[j.property]:void 0;return Ze===void 0?Gs(j.default,y.default):Ce(j,y,Ze,Pe,$e)}}}function Gs(j,y,$){return j!==void 0?j:y!==void 0?y:$!==void 0?$:void 0}function lh(j,y,$,ee,he){return Gs(typeof $===he?ee[$]:void 0,j.default,y.default)}function ma(j,y,$){if(Jr($)!=="number")return Gs(j.default,y.default);const ee=j.stops.length;if(ee===1||$<=j.stops[0][0])return j.stops[0][1];if($>=j.stops[ee-1][0])return j.stops[ee-1][1];const he=bl(j.stops.map(Ee=>Ee[0]),$);return j.stops[he][1]}function wc(j,y,$){const ee=j.base!==void 0?j.base:1;if(Jr($)!=="number")return Gs(j.default,y.default);const he=j.stops.length;if(he===1||$<=j.stops[0][0])return j.stops[0][1];if($>=j.stops[he-1][0])return j.stops[he-1][1];const Ee=bl(j.stops.map(Ve=>Ve[0]),$),Ce=function(Ve,Ze,Xe,rt){const st=rt-Xe,gt=Ve-Xe;return st===0?0:Ze===1?gt/st:(Math.pow(Ze,gt)-1)/(Math.pow(Ze,st)-1)}($,ee,j.stops[Ee][0],j.stops[Ee+1][0]),Pe=j.stops[Ee][1],$e=j.stops[Ee+1][1];let De=Ds[y.type]||_u;if(j.colorSpace&&j.colorSpace!=="rgb"){const Ve=ru[j.colorSpace];De=(Ze,Xe)=>Ve.reverse(Ve.interpolate(Ve.forward(Ze),Ve.forward(Xe),Ce))}return typeof Pe.evaluate=="function"?{evaluate(...Ve){const Ze=Pe.evaluate.apply(void 0,Ve),Xe=$e.evaluate.apply(void 0,Ve);if(Ze!==void 0&&Xe!==void 0)return De(Ze,Xe,Ce)}}:De(Pe,$e,Ce)}function ts(j,y,$){return y.type==="color"?$=ri.parse($):y.type==="formatted"?$=oo.fromString($.toString()):y.type==="resolvedImage"?$=ao.fromString($.toString()):Jr($)===y.type||y.type==="enum"&&y.values[$]||($=void 0),Gs($,j.default,y.default)}class Ec{constructor(y,$){this.expression=y,this._warningHistory={},this._evaluator=new Jc,this._defaultValue=$?function(ee){return ee.type==="color"&&(Us(ee.default)||Array.isArray(ee.default))?new ri(0,0,0,0):ee.type==="color"?ri.parse(ee.default)||null:ee.default===void 0?null:ee.default}($):null,this._enumValues=$&&$.type==="enum"?$.values:null}evaluateWithoutErrorHandling(y,$,ee,he,Ee,Ce,Pe,$e){return this._evaluator.globals=y,this._evaluator.feature=$,this._evaluator.featureState=ee,this._evaluator.canonical=he||null,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=Ce,this._evaluator.featureTileCoord=Pe||null,this._evaluator.featureDistanceData=$e||null,this.expression.evaluate(this._evaluator)}evaluate(y,$,ee,he,Ee,Ce,Pe,$e){this._evaluator.globals=y,this._evaluator.feature=$||null,this._evaluator.featureState=ee||null,this._evaluator.canonical=he||null,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=Ce||null,this._evaluator.featureTileCoord=Pe||null,this._evaluator.featureDistanceData=$e||null;try{const De=this.expression.evaluate(this._evaluator);if(De==null||typeof De=="number"&&De!=De)return this._defaultValue;if(this._enumValues&&!(De in this._enumValues))throw new ji(`Expected value to be one of ${Object.keys(this._enumValues).map(Ve=>JSON.stringify(Ve)).join(", ")}, but found ${JSON.stringify(De)} instead.`);return De}catch(De){return this._warningHistory[De.message]||(this._warningHistory[De.message]=!0,typeof console!="undefined"&&console.warn(De.message)),this._defaultValue}}}function Ol(j){return Array.isArray(j)&&j.length>0&&typeof j[0]=="string"&&j[0]in js}function ns(j,y){const $=new Sa(js,[],y?function(he){const Ee={color:Mo,string:Mr,number:sr,enum:Mr,boolean:Fr,formatted:ua,resolvedImage:Ts};return he.type==="array"?fo(Ee[he.value]||Ir,he.length):Ee[he.type]}(y):void 0),ee=$.parse(j,void 0,void 0,void 0,y&&y.type==="string"?{typeAnnotation:"coerce"}:void 0);return ee?pu(new Ec(ee,y)):Ma($.errors)}class Ac{constructor(y,$){this.kind=y,this._styleExpression=$,this.isStateDependent=y!=="constant"&&!fa($.expression)}evaluateWithoutErrorHandling(y,$,ee,he,Ee,Ce){return this._styleExpression.evaluateWithoutErrorHandling(y,$,ee,he,Ee,Ce)}evaluate(y,$,ee,he,Ee,Ce){return this._styleExpression.evaluate(y,$,ee,he,Ee,Ce)}}class Hs{constructor(y,$,ee,he){this.kind=y,this.zoomStops=ee,this._styleExpression=$,this.isStateDependent=y!=="camera"&&!fa($.expression),this.interpolationType=he}evaluateWithoutErrorHandling(y,$,ee,he,Ee,Ce){return this._styleExpression.evaluateWithoutErrorHandling(y,$,ee,he,Ee,Ce)}evaluate(y,$,ee,he,Ee,Ce){return this._styleExpression.evaluate(y,$,ee,he,Ee,Ce)}interpolationFactor(y,$,ee){return this.interpolationType?Vo.interpolationFactor(this.interpolationType,y,$,ee):0}}function Tc(j,y){if((j=ns(j,y)).result==="error")return j;const $=j.value.expression,ee=No($);if(!ee&&!es(y))return Ma([new Io("","data expressions not supported")]);const he=jo($,["zoom","pitch","distance-from-center"]);if(!he&&!fu(y))return Ma([new Io("","zoom expressions not supported")]);const Ee=is($);return Ee||he?Ee instanceof Io?Ma([Ee]):Ee instanceof Vo&&!bc(y)?Ma([new Io("",'"interpolate" expressions cannot be used with this property')]):pu(Ee?new Hs(ee?"camera":"composite",j.value,Ee.labels,Ee instanceof Vo?Ee.interpolation:void 0):new Ac(ee?"constant":"source",j.value)):Ma([new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rs{constructor(y,$){this._parameters=y,this._specification=$,po(this,Vs(this._parameters,this._specification))}static deserialize(y){return new rs(y._parameters,y._specification)}static serialize(y){return{_parameters:y._parameters,_specification:y._specification}}}function is(j){let y=null;if(j instanceof ou)y=is(j.result);else if(j instanceof iu){for(const $ of j.args)if(y=is($),y)break}else(j instanceof hc||j instanceof Vo)&&j.input instanceof so&&j.input.name==="zoom"&&(y=j);return y instanceof Io||j.eachChild($=>{const ee=is($);ee instanceof Io?y=ee:!y&&ee?y=new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):y&&ee&&y!==ee&&(y=new Io("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),y}class lr{constructor(y,$,ee,he){this.message=(y?`${y}: `:"")+ee,he&&(this.identifier=he),$!=null&&$.__line__&&(this.line=$.__line__)}}function lo(j){const y=j.key,$=j.value,ee=j.valueSpec||{},he=j.objectElementValidators||{},Ee=j.style,Ce=j.styleSpec;let Pe=[];const $e=Jr($);if($e!=="object")return[new lr(y,$,`object expected, ${$e} found`)];for(const De in $){const Ve=De.split(".")[0],Ze=ee[Ve]||ee["*"];let Xe;he[Ve]?Xe=he[Ve]:ee[Ve]?Xe=Gi:he["*"]?Xe=he["*"]:ee["*"]&&(Xe=Gi),Xe?Pe=Pe.concat(Xe({key:(y&&`${y}.`)+De,value:$[De],valueSpec:Ze,style:Ee,styleSpec:Ce,object:$,objectKey:De},$)):Pe.push(new lr(y,$[De],`unknown property "${De}"`))}for(const De in ee)he[De]||ee[De].required&&ee[De].default===void 0&&$[De]===void 0&&Pe.push(new lr(y,$,`missing required property "${De}"`));return Pe}function kc(j){const y=j.value,$=j.valueSpec,ee=j.style,he=j.styleSpec,Ee=j.key,Ce=j.arrayElementValidator||Gi;if(Jr(y)!=="array")return[new lr(Ee,y,`array expected, ${Jr(y)} found`)];if($.length&&y.length!==$.length)return[new lr(Ee,y,`array length ${$.length} expected, length ${y.length} found`)];if($["min-length"]&&y.length<$["min-length"])return[new lr(Ee,y,`array length at least ${$["min-length"]} expected, length ${y.length} found`)];let Pe={type:$.value,values:$.values,minimum:$.minimum,maximum:$.maximum,function:void 0};he.$version<7&&(Pe.function=$.function),Jr($.value)==="object"&&(Pe=$.value);let $e=[];for(let De=0;De<y.length;De++)$e=$e.concat(Ce({array:y,arrayIndex:De,value:y[De],valueSpec:Pe,style:ee,styleSpec:he,key:`${Ee}[${De}]`}));return $e}function Cc(j){const y=j.key,$=j.value,ee=j.valueSpec;let he=Jr($);if(he==="number"&&$!=$&&(he="NaN"),he!=="number")return[new lr(y,$,`number expected, ${he} found`)];if("minimum"in ee){let Ee=ee.minimum;if(Jr(ee.minimum)==="array"&&(Ee=ee.minimum[j.arrayIndex]),$<Ee)return[new lr(y,$,`${$} is less than the minimum value ${Ee}`)]}if("maximum"in ee){let Ee=ee.maximum;if(Jr(ee.maximum)==="array"&&(Ee=ee.maximum[j.arrayIndex]),$>Ee)return[new lr(y,$,`${$} is greater than the maximum value ${Ee}`)]}return[]}function qs(j){const y=j.valueSpec,$=Ti(j.value.type);let ee,he,Ee,Ce={};const Pe=$!=="categorical"&&j.value.property===void 0,$e=!Pe,De=Jr(j.value.stops)==="array"&&Jr(j.value.stops[0])==="array"&&Jr(j.value.stops[0][0])==="object",Ve=lo({key:j.key,value:j.value,valueSpec:j.styleSpec.function,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{stops:function(rt){if($==="identity")return[new lr(rt.key,rt.value,'identity function may not have a "stops" property')];let st=[];const gt=rt.value;return st=st.concat(kc({key:rt.key,value:gt,valueSpec:rt.valueSpec,style:rt.style,styleSpec:rt.styleSpec,arrayElementValidator:Ze})),Jr(gt)==="array"&&gt.length===0&&st.push(new lr(rt.key,gt,"array must have at least one stop")),st},default:function(rt){return Gi({key:rt.key,value:rt.value,valueSpec:y,style:rt.style,styleSpec:rt.styleSpec})}}});return $==="identity"&&Pe&&Ve.push(new lr(j.key,j.value,'missing required property "property"')),$==="identity"||j.value.stops||Ve.push(new lr(j.key,j.value,'missing required property "stops"')),$==="exponential"&&j.valueSpec.expression&&!bc(j.valueSpec)&&Ve.push(new lr(j.key,j.value,"exponential functions not supported")),j.styleSpec.$version>=8&&($e&&!es(j.valueSpec)?Ve.push(new lr(j.key,j.value,"property functions not supported")):Pe&&!fu(j.valueSpec)&&Ve.push(new lr(j.key,j.value,"zoom functions not supported"))),$!=="categorical"&&!De||j.value.property!==void 0||Ve.push(new lr(j.key,j.value,'"property" property is required')),Ve;function Ze(rt){let st=[];const gt=rt.value,At=rt.key;if(Jr(gt)!=="array")return[new lr(At,gt,`array expected, ${Jr(gt)} found`)];if(gt.length!==2)return[new lr(At,gt,`array length 2 expected, length ${gt.length} found`)];if(De){if(Jr(gt[0])!=="object")return[new lr(At,gt,`object expected, ${Jr(gt[0])} found`)];if(gt[0].zoom===void 0)return[new lr(At,gt,"object stop key must have zoom")];if(gt[0].value===void 0)return[new lr(At,gt,"object stop key must have value")];const Bt=Ti(gt[0].zoom);if(typeof Bt!="number")return[new lr(At,gt[0].zoom,"stop zoom values must be numbers")];if(Ee&&Ee>Bt)return[new lr(At,gt[0].zoom,"stop zoom values must appear in ascending order")];Bt!==Ee&&(Ee=Bt,he=void 0,Ce={}),st=st.concat(lo({key:`${At}[0]`,value:gt[0],valueSpec:{zoom:{}},style:rt.style,styleSpec:rt.styleSpec,objectElementValidators:{zoom:Cc,value:Xe}}))}else st=st.concat(Xe({key:`${At}[0]`,value:gt[0],valueSpec:{},style:rt.style,styleSpec:rt.styleSpec},gt));return Ol(la(gt[1]))?st.concat([new lr(`${At}[1]`,gt[1],"expressions are not allowed in function stops.")]):st.concat(Gi({key:`${At}[1]`,value:gt[1],valueSpec:y,style:rt.style,styleSpec:rt.styleSpec}))}function Xe(rt,st){const gt=Jr(rt.value),At=Ti(rt.value),Bt=rt.value!==null?rt.value:st;if(ee){if(gt!==ee)return[new lr(rt.key,Bt,`${gt} stop domain type must match previous stop domain type ${ee}`)]}else ee=gt;if(gt!=="number"&&gt!=="string"&&gt!=="boolean"&&typeof At!="number"&&typeof At!="string"&&typeof At!="boolean")return[new lr(rt.key,Bt,"stop domain value must be a number, string, or boolean")];if(gt!=="number"&&$!=="categorical"){let qt=`number expected, ${gt} found`;return es(y)&&$===void 0&&(qt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new lr(rt.key,Bt,qt)]}return $!=="categorical"||gt!=="number"||typeof At=="number"&&isFinite(At)&&Math.floor(At)===At?$!=="categorical"&&gt==="number"&&typeof At=="number"&&typeof he=="number"&&he!==void 0&&At<he?[new lr(rt.key,Bt,"stop domain values must appear in ascending order")]:(he=At,$==="categorical"&&At in Ce?[new lr(rt.key,Bt,"stop domain values must be unique")]:(Ce[At]=!0,[])):[new lr(rt.key,Bt,`integer expected, found ${String(At)}`)]}}function xo(j){const y=(j.expressionContext==="property"?Tc:ns)(la(j.value),j.valueSpec);if(y.result==="error")return y.value.map(ee=>new lr(`${j.key}${ee.key}`,j.value,ee.message));const $=y.value.expression||y.value._styleExpression.expression;if(j.expressionContext==="property"&&j.propertyKey==="text-font"&&!$.outputDefined())return[new lr(j.key,j.value,`Invalid data expression for "${j.propertyKey}". Output values must be contained as literals within the expression.`)];if(j.expressionContext==="property"&&j.propertyType==="layout"&&!fa($))return[new lr(j.key,j.value,'"feature-state" data expressions are not supported with layout properties.')];if(j.expressionContext==="filter")return Sc($,j);if(j.expressionContext&&j.expressionContext.indexOf("cluster")===0){if(!jo($,["zoom","feature-state"]))return[new lr(j.key,j.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(j.expressionContext==="cluster-initial"&&!No($))return[new lr(j.key,j.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Sc(j,y){const $=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(y.valueSpec&&y.valueSpec.expression)for(const he of y.valueSpec.expression.parameters)$.delete(he);if($.size===0)return[];const ee=[];return j instanceof so&&$.has(j.name)?[new lr(y.key,y.value,`["${j.name}"] expression is not supported in a filter for a ${y.object.type} layer with id: ${y.object.id}`)]:(j.eachChild(he=>{ee.push(...Sc(he,y))}),ee)}function Ws(j){const y=j.key,$=j.value,ee=j.valueSpec,he=[];return Array.isArray(ee.values)?ee.values.indexOf(Ti($))===-1&&he.push(new lr(y,$,`expected one of [${ee.values.join(", ")}], ${JSON.stringify($)} found`)):Object.keys(ee.values).indexOf(Ti($))===-1&&he.push(new lr(y,$,`expected one of [${Object.keys(ee.values).join(", ")}], ${JSON.stringify($)} found`)),he}function Zs(j){if(j===!0||j===!1)return!0;if(!Array.isArray(j)||j.length===0)return!1;switch(j[0]){case"has":return j.length>=2&&j[1]!=="$id"&&j[1]!=="$type";case"in":return j.length>=3&&(typeof j[1]!="string"||Array.isArray(j[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return j.length!==3||Array.isArray(j[1])||Array.isArray(j[2]);case"any":case"all":for(const y of j.slice(1))if(!Zs(y)&&typeof y!="boolean")return!1;return!0;default:return!0}}function Xs(j,y="fill"){if(j==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Zs(j)||(j=$l(j));const $=j;let ee=!0;try{ee=function(De){if(!ea(De))return De;let Ve=la(De);return Rl(Ve),Ve=mu(Ve),Ve}($)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify($,null,2)}
        `)}const he=mn[`filter_${y}`],Ee=ns(ee,he);let Ce=null;if(Ee.result==="error")throw new Error(Ee.value.map(De=>`${De.key}: ${De.message}`).join(", "));Ce=(De,Ve,Ze)=>Ee.value.evaluate(De,Ve,{},Ze);let Pe=null,$e=null;if(ee!==$){const De=ns($,he);if(De.result==="error")throw new Error(De.value.map(Ve=>`${Ve.key}: ${Ve.message}`).join(", "));Pe=(Ve,Ze,Xe,rt,st)=>De.value.evaluate(Ve,Ze,{},Xe,void 0,void 0,rt,st),$e=!No(De.value.expression)}return Ce=Ce,{filter:Ce,dynamicFilter:Pe||void 0,needGeometry:os(ee),needFeature:!!$e}}function mu(j){if(!Array.isArray(j))return j;const y=function($){if(ch.has($[0])){for(let ee=1;ee<$.length;ee++)if(ea($[ee]))return!0}return $}(j);return y===!0?y:y.map($=>mu($))}function Rl(j){let y=!1;const $=[];if(j[0]==="case"){for(let ee=1;ee<j.length-1;ee+=2)y=y||ea(j[ee]),$.push(j[ee+1]);$.push(j[j.length-1])}else if(j[0]==="match"){y=y||ea(j[1]);for(let ee=2;ee<j.length-1;ee+=2)$.push(j[ee+1]);$.push(j[j.length-1])}else if(j[0]==="step"){y=y||ea(j[1]);for(let ee=1;ee<j.length-1;ee+=2)$.push(j[ee+1])}y&&(j.length=0,j.push("any",...$));for(let ee=1;ee<j.length;ee++)Rl(j[ee])}function ea(j){if(!Array.isArray(j))return!1;if((y=j[0])==="pitch"||y==="distance-from-center")return!0;var y;for(let $=1;$<j.length;$++)if(ea(j[$]))return!0;return!1}const ch=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function uh(j,y){return j<y?-1:j>y?1:0}function os(j){if(!Array.isArray(j))return!1;if(j[0]==="within")return!0;for(let y=1;y<j.length;y++)if(os(j[y]))return!0;return!1}function $l(j){if(!j)return!0;const y=j[0];return j.length<=1?y!=="any":y==="=="?Pc(j[1],j[2],"=="):y==="!="?Xi(Pc(j[1],j[2],"==")):y==="<"||y===">"||y==="<="||y===">="?Pc(j[1],j[2],y):y==="any"?($=j.slice(1),["any"].concat($.map($l))):y==="all"?["all"].concat(j.slice(1).map($l)):y==="none"?["all"].concat(j.slice(1).map($l).map(Xi)):y==="in"?Ks(j[1],j.slice(2)):y==="!in"?Xi(Ks(j[1],j.slice(2))):y==="has"?Ys(j[1]):y==="!has"?Xi(Ys(j[1])):y!=="within"||j;var $}function Pc(j,y,$){switch(j){case"$type":return[`filter-type-${$}`,y];case"$id":return[`filter-id-${$}`,y];default:return[`filter-${$}`,j,y]}}function Ks(j,y){if(y.length===0)return!1;switch(j){case"$type":return["filter-type-in",["literal",y]];case"$id":return["filter-id-in",["literal",y]];default:return y.length>200&&!y.some($=>typeof $!=typeof y[0])?["filter-in-large",j,["literal",y.sort(uh)]]:["filter-in-small",j,["literal",y]]}}function Ys(j){switch(j){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",j]}}function Xi(j){return["!",j]}function Oa(j){return Zs(la(j.value))?xo(po({},j,{expressionContext:"filter",valueSpec:j.styleSpec[`filter_${j.layerType||"fill"}`]})):gu(j)}function gu(j){const y=j.value,$=j.key;if(Jr(y)!=="array")return[new lr($,y,`array expected, ${Jr(y)} found`)];const ee=j.styleSpec;let he,Ee=[];if(y.length<1)return[new lr($,y,"filter array must have at least 1 element")];switch(Ee=Ee.concat(Ws({key:`${$}[0]`,value:y[0],valueSpec:ee.filter_operator,style:j.style,styleSpec:j.styleSpec})),Ti(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&Ti(y[1])==="$type"&&Ee.push(new lr($,y,`"$type" cannot be use with operator "${y[0]}"`));case"==":case"!=":y.length!==3&&Ee.push(new lr($,y,`filter array for operator "${y[0]}" must have 3 elements`));case"in":case"!in":y.length>=2&&(he=Jr(y[1]),he!=="string"&&Ee.push(new lr(`${$}[1]`,y[1],`string expected, ${he} found`)));for(let Ce=2;Ce<y.length;Ce++)he=Jr(y[Ce]),Ti(y[1])==="$type"?Ee=Ee.concat(Ws({key:`${$}[${Ce}]`,value:y[Ce],valueSpec:ee.geometry_type,style:j.style,styleSpec:j.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&Ee.push(new lr(`${$}[${Ce}]`,y[Ce],`string, number, or boolean expected, ${he} found`));break;case"any":case"all":case"none":for(let Ce=1;Ce<y.length;Ce++)Ee=Ee.concat(gu({key:`${$}[${Ce}]`,value:y[Ce],style:j.style,styleSpec:j.styleSpec}));break;case"has":case"!has":he=Jr(y[1]),y.length!==2?Ee.push(new lr($,y,`filter array for "${y[0]}" operator must have 2 elements`)):he!=="string"&&Ee.push(new lr(`${$}[1]`,y[1],`string expected, ${he} found`));break;case"within":he=Jr(y[1]),y.length!==2?Ee.push(new lr($,y,`filter array for "${y[0]}" operator must have 2 elements`)):he!=="object"&&Ee.push(new lr(`${$}[1]`,y[1],`object expected, ${he} found`))}return Ee}function Js(j,y){const $=j.key,ee=j.style,he=j.styleSpec,Ee=j.value,Ce=j.objectKey,Pe=he[`${y}_${j.layerType}`];if(!Pe)return[];const $e=Ce.match(/^(.*)-transition$/);if(y==="paint"&&$e&&Pe[$e[1]]&&Pe[$e[1]].transition)return Gi({key:$,value:Ee,valueSpec:he.transition,style:ee,styleSpec:he});const De=j.valueSpec||Pe[Ce];if(!De)return[new lr($,Ee,`unknown property "${Ce}"`)];let Ve;if(Jr(Ee)==="string"&&es(De)&&!De.tokens&&(Ve=/^{([^}]+)}$/.exec(Ee)))return[new lr($,Ee,`"${Ce}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ve[1])} }\`.`)];const Ze=[];return j.layerType==="symbol"&&(Ce==="text-field"&&ee&&!ee.glyphs&&Ze.push(new lr($,Ee,'use of "text-field" requires a style "glyphs" property')),Ce==="text-font"&&Us(la(Ee))&&Ti(Ee.type)==="identity"&&Ze.push(new lr($,Ee,'"text-font" does not support identity functions'))),Ze.concat(Gi({key:j.key,value:Ee,valueSpec:De,style:ee,styleSpec:he,expressionContext:"property",propertyType:y,propertyKey:Ce}))}function yu(j){return Js(j,"paint")}function vu(j){return Js(j,"layout")}function zl(j){let y=[];const $=j.value,ee=j.key,he=j.style,Ee=j.styleSpec;$.type||$.ref||y.push(new lr(ee,$,'either "type" or "ref" is required'));let Ce=Ti($.type);const Pe=Ti($.ref);if($.id){const $e=Ti($.id);for(let De=0;De<j.arrayIndex;De++){const Ve=he.layers[De];Ti(Ve.id)===$e&&y.push(new lr(ee,$.id,`duplicate layer id "${$.id}", previously used at line ${Ve.id.__line__}`))}}if("ref"in $){let $e;["type","source","source-layer","filter","layout"].forEach(De=>{De in $&&y.push(new lr(ee,$[De],`"${De}" is prohibited for ref layers`))}),he.layers.forEach(De=>{Ti(De.id)===Pe&&($e=De)}),$e?$e.ref?y.push(new lr(ee,$.ref,"ref cannot reference another ref layer")):Ce=Ti($e.type):typeof Pe=="string"&&y.push(new lr(ee,$.ref,`ref layer "${Pe}" not found`))}else if(Ce!=="background"&&Ce!=="sky")if($.source){const $e=he.sources&&he.sources[$.source],De=$e&&Ti($e.type);$e?De==="vector"&&Ce==="raster"?y.push(new lr(ee,$.source,`layer "${$.id}" requires a raster source`)):De==="raster"&&Ce!=="raster"?y.push(new lr(ee,$.source,`layer "${$.id}" requires a vector source`)):De!=="vector"||$["source-layer"]?De==="raster-dem"&&Ce!=="hillshade"?y.push(new lr(ee,$.source,"raster-dem source can only be used with layer type 'hillshade'.")):Ce!=="line"||!$.paint||!$.paint["line-gradient"]&&!$.paint["line-trim-offset"]||De==="geojson"&&$e.lineMetrics||y.push(new lr(ee,$,`layer "${$.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):y.push(new lr(ee,$,`layer "${$.id}" must specify a "source-layer"`)):y.push(new lr(ee,$.source,`source "${$.source}" not found`))}else y.push(new lr(ee,$,'missing required property "source"'));return y=y.concat(lo({key:ee,value:$,valueSpec:Ee.layer,style:j.style,styleSpec:j.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Gi({key:`${ee}.type`,value:$.type,valueSpec:Ee.layer.type,style:j.style,styleSpec:j.styleSpec,object:$,objectKey:"type"}),filter:$e=>Oa(po({layerType:Ce},$e)),layout:$e=>lo({layer:$,key:$e.key,value:$e.value,valueSpec:{},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":De=>vu(po({layerType:Ce},De))}}),paint:$e=>lo({layer:$,key:$e.key,value:$e.value,valueSpec:{},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":De=>yu(po({layerType:Ce},De))}})}})),y}function as(j){const y=j.value,$=j.key,ee=Jr(y);return ee!=="string"?[new lr($,y,`string expected, ${ee} found`)]:[]}const Dl={promoteId:function({key:j,value:y}){if(Jr(y)==="string")return as({key:j,value:y});{const $=[];for(const ee in y)$.push(...as({key:`${j}.${ee}`,value:y[ee]}));return $}}};function xu(j){const y=j.value,$=j.key,ee=j.styleSpec,he=j.style;if(!y.type)return[new lr($,y,'"type" is required')];const Ee=Ti(y.type);let Ce;switch(Ee){case"vector":case"raster":case"raster-dem":return Ce=lo({key:$,value:y,valueSpec:ee[`source_${Ee.replace("-","_")}`],style:j.style,styleSpec:ee,objectElementValidators:Dl}),Ce;case"geojson":if(Ce=lo({key:$,value:y,valueSpec:ee.source_geojson,style:he,styleSpec:ee,objectElementValidators:Dl}),y.cluster)for(const Pe in y.clusterProperties){const[$e,De]=y.clusterProperties[Pe],Ve=typeof $e=="string"?[$e,["accumulated"],["get",Pe]]:$e;Ce.push(...xo({key:`${$}.${Pe}.map`,value:De,expressionContext:"cluster-map"})),Ce.push(...xo({key:`${$}.${Pe}.reduce`,value:Ve,expressionContext:"cluster-reduce"}))}return Ce;case"video":return lo({key:$,value:y,valueSpec:ee.source_video,style:he,styleSpec:ee});case"image":return lo({key:$,value:y,valueSpec:ee.source_image,style:he,styleSpec:ee});case"canvas":return[new lr($,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ws({key:`${$}.type`,value:y.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:ee})}}function bu(j){const y=j.value,$=j.styleSpec,ee=$.light,he=j.style;let Ee=[];const Ce=Jr(y);if(y===void 0)return Ee;if(Ce!=="object")return Ee=Ee.concat([new lr("light",y,`object expected, ${Ce} found`)]),Ee;for(const Pe in y){const $e=Pe.match(/^(.*)-transition$/);Ee=Ee.concat($e&&ee[$e[1]]&&ee[$e[1]].transition?Gi({key:Pe,value:y[Pe],valueSpec:$.transition,style:he,styleSpec:$}):ee[Pe]?Gi({key:Pe,value:y[Pe],valueSpec:ee[Pe],style:he,styleSpec:$}):[new lr(Pe,y[Pe],`unknown property "${Pe}"`)])}return Ee}function ss(j){const y=j.value,$=j.key,ee=j.style,he=j.styleSpec,Ee=he.terrain;let Ce=[];const Pe=Jr(y);if(y===void 0)return Ce;if(Pe!=="object")return Ce=Ce.concat([new lr("terrain",y,`object expected, ${Pe} found`)]),Ce;for(const $e in y){const De=$e.match(/^(.*)-transition$/);Ce=Ce.concat(De&&Ee[De[1]]&&Ee[De[1]].transition?Gi({key:$e,value:y[$e],valueSpec:he.transition,style:ee,styleSpec:he}):Ee[$e]?Gi({key:$e,value:y[$e],valueSpec:Ee[$e],style:ee,styleSpec:he}):[new lr($e,y[$e],`unknown property "${$e}"`)])}if(y.source){const $e=ee.sources&&ee.sources[y.source],De=$e&&Ti($e.type);$e?De!=="raster-dem"&&Ce.push(new lr($,y.source,`terrain cannot be used with a source of type ${String(De)}, it only be used with a "raster-dem" source type`)):Ce.push(new lr($,y.source,`source "${y.source}" not found`))}else Ce.push(new lr($,y,'terrain is missing required property "source"'));return Ce}function wu(j){const y=j.value,$=j.style,ee=j.styleSpec,he=ee.fog;let Ee=[];const Ce=Jr(y);if(y===void 0)return Ee;if(Ce!=="object")return Ee=Ee.concat([new lr("fog",y,`object expected, ${Ce} found`)]),Ee;for(const Pe in y){const $e=Pe.match(/^(.*)-transition$/);Ee=Ee.concat($e&&he[$e[1]]&&he[$e[1]].transition?Gi({key:Pe,value:y[Pe],valueSpec:ee.transition,style:$,styleSpec:ee}):he[Pe]?Gi({key:Pe,value:y[Pe],valueSpec:he[Pe],style:$,styleSpec:ee}):[new lr(Pe,y[Pe],`unknown property "${Pe}"`)])}return Ee}const ta={"*":()=>[],array:kc,boolean:function(j){const y=j.value,$=j.key,ee=Jr(y);return ee!=="boolean"?[new lr($,y,`boolean expected, ${ee} found`)]:[]},number:Cc,color:function(j){const y=j.key,$=j.value,ee=Jr($);return ee!=="string"?[new lr(y,$,`color expected, ${ee} found`)]:da.parseCSSColor($)===null?[new lr(y,$,`color expected, "${$}" found`)]:[]},enum:Ws,filter:Oa,function:qs,layer:zl,object:lo,source:xu,light:bu,terrain:ss,fog:wu,string:as,formatted:function(j){return as(j).length===0?[]:xo(j)},resolvedImage:function(j){return as(j).length===0?[]:xo(j)},projection:function(j){const y=j.value,$=j.styleSpec,ee=$.projection,he=j.style;let Ee=[];const Ce=Jr(y);if(Ce==="object")for(const Pe in y)Ee=Ee.concat(Gi({key:Pe,value:y[Pe],valueSpec:ee[Pe],style:he,styleSpec:$}));else Ce!=="string"&&(Ee=Ee.concat([new lr("projection",y,`object or string expected, ${Ce} found`)]));return Ee}};function Gi(j){const y=j.value,$=j.valueSpec,ee=j.styleSpec;return $.expression&&Us(Ti(y))?qs(j):$.expression&&Ol(la(y))?xo(j):$.type&&ta[$.type]?ta[$.type](j):lo(po({},j,{valueSpec:$.type?ee[$.type]:$}))}function hh(j){const y=j.value,$=j.key,ee=as(j);return ee.length||(y.indexOf("{fontstack}")===-1&&ee.push(new lr($,y,'"glyphs" url must include a "{fontstack}" token')),y.indexOf("{range}")===-1&&ee.push(new lr($,y,'"glyphs" url must include a "{range}" token'))),ee}function Ll(j,y=mn){return bo(Gi({key:"",value:j,valueSpec:y.$root,styleSpec:y,style:j,objectElementValidators:{glyphs:hh,"*":()=>[]}}))}const Bl=j=>bo(yu(j)),Eu=j=>bo(vu(j));function bo(j){return j.slice().sort((y,$)=>y.line&&$.line?y.line-$.line:0)}function Ic(j,y){let $=!1;if(y&&y.length)for(const ee of y)j.fire(new ti(new Error(ee.message))),$=!0;return $}var Ra=wo;function wo(j,y,$){var ee=this.cells=[];if(j instanceof ArrayBuffer){this.arrayBuffer=j;var he=new Int32Array(this.arrayBuffer);j=he[0],this.d=(y=he[1])+2*($=he[2]);for(var Ee=0;Ee<this.d*this.d;Ee++){var Ce=he[3+Ee],Pe=he[3+Ee+1];ee.push(Ce===Pe?null:he.subarray(Ce,Pe))}var $e=he[3+ee.length+1];this.keys=he.subarray(he[3+ee.length],$e),this.bboxes=he.subarray($e),this.insert=this._insertReadonly}else{this.d=y+2*$;for(var De=0;De<this.d*this.d;De++)ee.push([]);this.keys=[],this.bboxes=[]}this.n=y,this.extent=j,this.padding=$,this.scale=y/j,this.uid=0;var Ve=$/y*j;this.min=-Ve,this.max=j+Ve}wo.prototype.insert=function(j,y,$,ee,he){this._forEachCell(y,$,ee,he,this._insertCell,this.uid++),this.keys.push(j),this.bboxes.push(y),this.bboxes.push($),this.bboxes.push(ee),this.bboxes.push(he)},wo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wo.prototype._insertCell=function(j,y,$,ee,he,Ee){this.cells[he].push(Ee)},wo.prototype.query=function(j,y,$,ee,he){var Ee=this.min,Ce=this.max;if(j<=Ee&&y<=Ee&&Ce<=$&&Ce<=ee&&!he)return Array.prototype.slice.call(this.keys);var Pe=[];return this._forEachCell(j,y,$,ee,this._queryCell,Pe,{},he),Pe},wo.prototype._queryCell=function(j,y,$,ee,he,Ee,Ce,Pe){var $e=this.cells[he];if($e!==null)for(var De=this.keys,Ve=this.bboxes,Ze=0;Ze<$e.length;Ze++){var Xe=$e[Ze];if(Ce[Xe]===void 0){var rt=4*Xe;(Pe?Pe(Ve[rt+0],Ve[rt+1],Ve[rt+2],Ve[rt+3]):j<=Ve[rt+2]&&y<=Ve[rt+3]&&$>=Ve[rt+0]&&ee>=Ve[rt+1])?(Ce[Xe]=!0,Ee.push(De[Xe])):Ce[Xe]=!1}}},wo.prototype._forEachCell=function(j,y,$,ee,he,Ee,Ce,Pe){for(var $e=this._convertToCellCoord(j),De=this._convertToCellCoord(y),Ve=this._convertToCellCoord($),Ze=this._convertToCellCoord(ee),Xe=$e;Xe<=Ve;Xe++)for(var rt=De;rt<=Ze;rt++){var st=this.d*rt+Xe;if((!Pe||Pe(this._convertFromCellCoord(Xe),this._convertFromCellCoord(rt),this._convertFromCellCoord(Xe+1),this._convertFromCellCoord(rt+1)))&&he.call(this,j,y,$,ee,st,Ee,Ce,Pe))return}},wo.prototype._convertFromCellCoord=function(j){return(j-this.padding)/this.scale},wo.prototype._convertToCellCoord=function(j){return Math.max(0,Math.min(this.d-1,Math.floor(j*this.scale)+this.padding))},wo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var j=this.cells,y=3+this.cells.length+1+1,$=0,ee=0;ee<this.cells.length;ee++)$+=this.cells[ee].length;var he=new Int32Array(y+$+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var Ee=y,Ce=0;Ce<j.length;Ce++){var Pe=j[Ce];he[3+Ce]=Ee,he.set(Pe,Ee),Ee+=Pe.length}return he[3+j.length]=Ee,he.set(this.keys,Ee),he[3+j.length+1]=Ee+=this.keys.length,he.set(this.bboxes,Ee),Ee+=this.bboxes.length,he.buffer};const na={};function cr(j,y,$={}){Object.defineProperty(j,"_classRegistryKey",{value:y,writeable:!1}),na[y]={klass:j,omit:$.omit||[]}}cr(Object,"Object"),Ra.serialize=function(j,y){const $=j.toArrayBuffer();return y&&y.push($),{buffer:$}},Ra.deserialize=function(j){return new Ra(j.buffer)},Object.defineProperty(Ra,"name",{value:"Grid"}),cr(Ra,"Grid"),cr(ri,"Color"),cr(Error,"Error"),cr(pn,"AJAXError"),cr(ao,"ResolvedImage"),cr(rs,"StylePropertyFunction"),cr(Ec,"StyleExpression",{omit:["_evaluator"]}),cr(Hs,"ZoomDependentExpression"),cr(Ac,"ZoomConstantExpression"),cr(so,"CompoundExpression",{omit:["_evaluate"]});for(const j in js)na[js[j]._classRegistryKey]||cr(js[j],`Expression${j}`);function ls(j){return j&&typeof ArrayBuffer!="undefined"&&(j instanceof ArrayBuffer||j.constructor&&j.constructor.name==="ArrayBuffer")}function Au(j){return _e.ImageBitmap&&j instanceof _e.ImageBitmap}function cs(j,y){if(j==null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||j instanceof Boolean||j instanceof Number||j instanceof String||j instanceof Date||j instanceof RegExp)return j;if(ls(j)||Au(j))return y&&y.push(j),j;if(ArrayBuffer.isView(j)){const $=j;return y&&y.push($.buffer),$}if(j instanceof _e.ImageData)return y&&y.push(j.data.buffer),j;if(Array.isArray(j)){const $=[];for(const ee of j)$.push(cs(ee,y));return $}if(typeof j=="object"){const $=j.constructor,ee=$._classRegistryKey;if(!ee)throw new Error(`can't serialize object of unregistered class ${ee}`);const he=$.serialize?$.serialize(j,y):{};if(!$.serialize){for(const Ee in j)j.hasOwnProperty(Ee)&&(na[ee].omit.indexOf(Ee)>=0||(he[Ee]=cs(j[Ee],y)));j instanceof Error&&(he.message=j.message)}if(he.$name)throw new Error("$name property is reserved for worker serialization logic.");return ee!=="Object"&&(he.$name=ee),he}throw new Error("can't serialize object of type "+typeof j)}function Qs(j){if(j==null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||j instanceof Boolean||j instanceof Number||j instanceof String||j instanceof Date||j instanceof RegExp||ls(j)||Au(j)||ArrayBuffer.isView(j)||j instanceof _e.ImageData)return j;if(Array.isArray(j))return j.map(Qs);if(typeof j=="object"){const y=j.$name||"Object",{klass:$}=na[y];if(!$)throw new Error(`can't deserialize unregistered class ${y}`);if($.deserialize)return $.deserialize(j);const ee=Object.create($.prototype);for(const he of Object.keys(j))he!=="$name"&&(ee[he]=Qs(j[he]));return ee}throw new Error("can't deserialize object of type "+typeof j)}class Mc{constructor(){this.first=!0}update(y,$){const ee=Math.floor(y);return this.first?(this.first=!1,this.lastIntegerZoom=ee,this.lastIntegerZoomTime=0,this.lastZoom=y,this.lastFloorZoom=ee,!0):(this.lastFloorZoom>ee?(this.lastIntegerZoom=ee+1,this.lastIntegerZoomTime=$):this.lastFloorZoom<ee&&(this.lastIntegerZoom=ee,this.lastIntegerZoomTime=$),y!==this.lastZoom&&(this.lastZoom=y,this.lastFloorZoom=ee,!0))}}const Tu=j=>j>=1536&&j<=1791,ku=j=>j>=1872&&j<=1919,Cu=j=>j>=2208&&j<=2303,Su=j=>j>=11904&&j<=12031,el=j=>j>=12032&&j<=12255,ai=j=>j>=12272&&j<=12287,Fl=j=>j>=12288&&j<=12351,pi=j=>j>=12352&&j<=12447,Hi=j=>j>=12448&&j<=12543,Oc=j=>j>=12544&&j<=12591,Rc=j=>j>=12704&&j<=12735,$c=j=>j>=12736&&j<=12783,_o=j=>j>=12784&&j<=12799,ga=j=>j>=12800&&j<=13055,zc=j=>j>=13056&&j<=13311,ya=j=>j>=13312&&j<=19903,tl=j=>j>=19968&&j<=40959,Nl=j=>j>=40960&&j<=42127,ra=j=>j>=42128&&j<=42191,Dc=j=>j>=44032&&j<=55215,jl=j=>j>=63744&&j<=64255,zo=j=>j>=64336&&j<=65023,Lc=j=>j>=65040&&j<=65055,Ul=j=>j>=65072&&j<=65103,Hr=j=>j>=65104&&j<=65135,Bc=j=>j>=65136&&j<=65279,Vl=j=>j>=65280&&j<=65519;function nl(j){for(const y of j)if(rl(y.charCodeAt(0)))return!0;return!1}function Fc(j){for(const y of j)if(!Nc(y.charCodeAt(0)))return!1;return!0}function Nc(j){return!(Tu(j)||ku(j)||Cu(j)||zo(j)||Bc(j))}function rl(j){return!(j!==746&&j!==747&&(j<4352||!(Rc(j)||Oc(j)||Ul(j)&&!(j>=65097&&j<=65103)||jl(j)||zc(j)||Su(j)||$c(j)||!(!Fl(j)||j>=12296&&j<=12305||j>=12308&&j<=12319||j===12336)||ya(j)||tl(j)||ga(j)||(y=>y>=12592&&y<=12687)(j)||(y=>y>=43360&&y<=43391)(j)||(y=>y>=55216&&y<=55295)(j)||(y=>y>=4352&&y<=4607)(j)||Dc(j)||pi(j)||ai(j)||(y=>y>=12688&&y<=12703)(j)||el(j)||_o(j)||Hi(j)&&j!==12540||!(!Vl(j)||j===65288||j===65289||j===65293||j>=65306&&j<=65310||j===65339||j===65341||j===65343||j>=65371&&j<=65503||j===65507||j>=65512&&j<=65519)||!(!Hr(j)||j>=65112&&j<=65118||j>=65123&&j<=65126)||(y=>y>=5120&&y<=5759)(j)||(y=>y>=6320&&y<=6399)(j)||Lc(j)||(y=>y>=19904&&y<=19967)(j)||Nl(j)||ra(j))))}function us(j){return!(rl(j)||function(y){return!!(($=>$>=128&&$<=255)(y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||($=>$>=8192&&$<=8303)(y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||($=>$>=8448&&$<=8527)(y)||($=>$>=8528&&$<=8591)(y)||($=>$>=8960&&$<=9215)(y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||($=>$>=9216&&$<=9279)(y)&&y!==9251||($=>$>=9280&&$<=9311)(y)||($=>$>=9312&&$<=9471)(y)||($=>$>=9632&&$<=9727)(y)||($=>$>=9728&&$<=9983)(y)&&!(y>=9754&&y<=9759)||($=>$>=11008&&$<=11263)(y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Fl(y)||Hi(y)||($=>$>=57344&&$<=63743)(y)||Ul(y)||Hr(y)||Vl(y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}(j))}function be(j){return j>=1424&&j<=2303||zo(j)||Bc(j)}function q(j,y){return!(!y&&be(j)||j>=2304&&j<=3583||j>=3840&&j<=4255||($=>$>=6016&&$<=6143)(j))}function ce(j){for(const y of j)if(be(y.charCodeAt(0)))return!0;return!1}const Te="deferred",Ie="loading",Re="loaded";let Be=null,Ue="unavailable",He=null;const Ye=function(j){j&&typeof j=="string"&&j.indexOf("NetworkError")>-1&&(Ue="error"),Be&&Be(j)};function et(){dt.fire(new oi("pluginStateChange",{pluginStatus:Ue,pluginURL:He}))}const dt=new vr,xt=function(){return Ue},Pt=function(){if(Ue!==Te||!He)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ue=Ie,et(),He&&fn({url:He},j=>{j?Ye(j):(Ue=Re,et())})},kt={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ue===Re||kt.applyArabicShaping!=null,isLoading:()=>Ue===Ie,setState(j){Ue=j.pluginStatus,He=j.pluginURL},isParsed:()=>kt.applyArabicShaping!=null&&kt.processBidirectionalText!=null&&kt.processStyledBidirectionalText!=null,getPluginURL:()=>He};class Tt{constructor(y,$){this.zoom=y,$?(this.now=$.now,this.fadeDuration=$.fadeDuration,this.zoomHistory=$.zoomHistory,this.transition=$.transition,this.pitch=$.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mc,this.transition={},this.pitch=0)}isSupportedScript(y){return function($,ee){for(const he of $)if(!q(he.charCodeAt(0),ee))return!1;return!0}(y,kt.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const y=this.zoom,$=y-Math.floor(y),ee=this.crossFadingFactor();return y>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:$+(1-$)*ee}:{fromScale:.5,toScale:1,t:1-(1-ee)*$}}}class Ct{constructor(y,$){this.property=y,this.value=$,this.expression=function(ee,he){if(Us(ee))return new rs(ee,he);if(Ol(ee)){const Ee=Tc(ee,he);if(Ee.result==="error")throw new Error(Ee.value.map(Ce=>`${Ce.key}: ${Ce.message}`).join(", "));return Ee.value}{let Ee=ee;return typeof ee=="string"&&he.type==="color"&&(Ee=ri.parse(ee)),{kind:"constant",evaluate:()=>Ee}}}($===void 0?y.specification.default:$,y.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(y,$,ee){return this.property.possiblyEvaluate(this,y,$,ee)}}class Et{constructor(y){this.property=y,this.value=new Ct(y,void 0)}transitioned(y,$){return new Ot(this.property,this.value,$,ft({},y.transition,this.transition),y.now)}untransitioned(){return new Ot(this.property,this.value,null,{},0)}}class zt{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitionablePropertyValues)}getValue(y){return Nt(this._values[y].value.value)}setValue(y,$){this._values.hasOwnProperty(y)||(this._values[y]=new Et(this._values[y].property)),this._values[y].value=new Ct(this._values[y].property,$===null?void 0:Nt($))}getTransition(y){return Nt(this._values[y].transition)}setTransition(y,$){this._values.hasOwnProperty(y)||(this._values[y]=new Et(this._values[y].property)),this._values[y].transition=Nt($)||void 0}serialize(){const y={};for(const $ of Object.keys(this._values)){const ee=this.getValue($);ee!==void 0&&(y[$]=ee);const he=this.getTransition($);he!==void 0&&(y[`${$}-transition`]=he)}return y}transitioned(y,$){const ee=new Qt(this._properties);for(const he of Object.keys(this._values))ee._values[he]=this._values[he].transitioned(y,$._values[he]);return ee}untransitioned(){const y=new Qt(this._properties);for(const $ of Object.keys(this._values))y._values[$]=this._values[$].untransitioned();return y}}class Ot{constructor(y,$,ee,he,Ee){const Ce=he.delay||0,Pe=he.duration||0;Ee=Ee||0,this.property=y,this.value=$,this.begin=Ee+Ce,this.end=this.begin+Pe,y.specification.transition&&(he.delay||he.duration)&&(this.prior=ee)}possiblyEvaluate(y,$,ee){const he=y.now||0,Ee=this.value.possiblyEvaluate(y,$,ee),Ce=this.prior;if(Ce){if(he>this.end)return this.prior=null,Ee;if(this.value.isDataDriven())return this.prior=null,Ee;if(he<this.begin)return Ce.possiblyEvaluate(y,$,ee);{const Pe=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Ce.possiblyEvaluate(y,$,ee),Ee,ze(Pe))}}return Ee}}class Qt{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitioningPropertyValues)}possiblyEvaluate(y,$,ee){const he=new Xt(this._properties);for(const Ee of Object.keys(this._values))he._values[Ee]=this._values[Ee].possiblyEvaluate(y,$,ee);return he}hasTransition(){for(const y of Object.keys(this._values))if(this._values[y].prior)return!0;return!1}}class Kt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPropertyValues)}getValue(y){return Nt(this._values[y].value)}setValue(y,$){this._values[y]=new Ct(this._values[y].property,$===null?void 0:Nt($))}serialize(){const y={};for(const $ of Object.keys(this._values)){const ee=this.getValue($);ee!==void 0&&(y[$]=ee)}return y}possiblyEvaluate(y,$,ee){const he=new Xt(this._properties);for(const Ee of Object.keys(this._values))he._values[Ee]=this._values[Ee].possiblyEvaluate(y,$,ee);return he}}class Gt{constructor(y,$,ee){this.property=y,this.value=$,this.parameters=ee}isConstant(){return this.value.kind==="constant"}constantOr(y){return this.value.kind==="constant"?this.value.value:y}evaluate(y,$,ee,he){return this.property.evaluate(this.value,this.parameters,y,$,ee,he)}}class Xt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPossiblyEvaluatedValues)}get(y){return this._values[y]}}class Wt{constructor(y){this.specification=y}possiblyEvaluate(y,$){return y.expression.evaluate($)}interpolate(y,$,ee){const he=Ds[this.specification.type];return he?he(y,$,ee):y}}class sn{constructor(y,$){this.specification=y,this.overrides=$}possiblyEvaluate(y,$,ee,he){return new Gt(this,y.expression.kind==="constant"||y.expression.kind==="camera"?{kind:"constant",value:y.expression.evaluate($,null,{},ee,he)}:y.expression,$)}interpolate(y,$,ee){if(y.value.kind!=="constant"||$.value.kind!=="constant")return y;if(y.value.value===void 0||$.value.value===void 0)return new Gt(this,{kind:"constant",value:void 0},y.parameters);const he=Ds[this.specification.type];return he?new Gt(this,{kind:"constant",value:he(y.value.value,$.value.value,ee)},y.parameters):y}evaluate(y,$,ee,he,Ee,Ce){return y.kind==="constant"?y.value:y.evaluate($,ee,he,Ee,Ce)}}class _n extends sn{possiblyEvaluate(y,$,ee,he){if(y.value===void 0)return new Gt(this,{kind:"constant",value:void 0},$);if(y.expression.kind==="constant"){const Ee=y.expression.evaluate($,null,{},ee,he),Ce=y.property.specification.type==="resolvedImage"&&typeof Ee!="string"?Ee.name:Ee,Pe=this._calculate(Ce,Ce,Ce,$);return new Gt(this,{kind:"constant",value:Pe},$)}if(y.expression.kind==="camera"){const Ee=this._calculate(y.expression.evaluate({zoom:$.zoom-1}),y.expression.evaluate({zoom:$.zoom}),y.expression.evaluate({zoom:$.zoom+1}),$);return new Gt(this,{kind:"constant",value:Ee},$)}return new Gt(this,y.expression,$)}evaluate(y,$,ee,he,Ee,Ce){if(y.kind==="source"){const Pe=y.evaluate($,ee,he,Ee,Ce);return this._calculate(Pe,Pe,Pe,$)}return y.kind==="composite"?this._calculate(y.evaluate({zoom:Math.floor($.zoom)-1},ee,he),y.evaluate({zoom:Math.floor($.zoom)},ee,he),y.evaluate({zoom:Math.floor($.zoom)+1},ee,he),$):y.value}_calculate(y,$,ee,he){return he.zoom>he.zoomHistory.lastIntegerZoom?{from:y,to:$,other:ee}:{from:ee,to:$,other:y}}interpolate(y){return y}}class qn{constructor(y){this.specification=y}possiblyEvaluate(y,$,ee,he){if(y.value!==void 0){if(y.expression.kind==="constant"){const Ee=y.expression.evaluate($,null,{},ee,he);return this._calculate(Ee,Ee,Ee,$)}return this._calculate(y.expression.evaluate(new Tt(Math.floor($.zoom-1),$)),y.expression.evaluate(new Tt(Math.floor($.zoom),$)),y.expression.evaluate(new Tt(Math.floor($.zoom+1),$)),$)}}_calculate(y,$,ee,he){return he.zoom>he.zoomHistory.lastIntegerZoom?{from:y,to:$}:{from:ee,to:$}}interpolate(y){return y}}class dn{constructor(y){this.specification=y}possiblyEvaluate(y,$,ee,he){return!!y.expression.evaluate($,null,{},ee,he)}interpolate(){return!1}}class Rn{constructor(y){this.properties=y,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const $=new Tt(0,{});for(const ee in y){const he=y[ee];he.specification.overridable&&this.overridableProperties.push(ee);const Ee=this.defaultPropertyValues[ee]=new Ct(he,void 0),Ce=this.defaultTransitionablePropertyValues[ee]=new Et(he);this.defaultTransitioningPropertyValues[ee]=Ce.untransitioned(),this.defaultPossiblyEvaluatedValues[ee]=Ee.possiblyEvaluate($)}}}function Fn(j,y){return 256*(j=qe(Math.floor(j),0,255))+qe(Math.floor(y),0,255)}cr(sn,"DataDrivenProperty"),cr(Wt,"DataConstantProperty"),cr(_n,"CrossFadedDataDrivenProperty"),cr(qn,"CrossFadedProperty"),cr(dn,"ColorRampProperty");const Qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kn{constructor(y,$){this._structArray=y,this._pos1=$*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Wn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(y,$){return y._trim(),$&&(y.isTransferred=!0,$.push(y.arrayBuffer)),{length:y.length,arrayBuffer:y.arrayBuffer}}static deserialize(y){const $=Object.create(this.prototype);return $.arrayBuffer=y.arrayBuffer,$.length=y.length,$.capacity=y.arrayBuffer.byteLength/$.bytesPerElement,$._refreshViews(),$}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(y){this.reserve(y),this.length=y}reserve(y){if(y>this.capacity){this.capacity=Math.max(y,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const $=this.uint8;this._refreshViews(),$&&this.uint8.set($)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Dn(j,y=1){let $=0,ee=0;return{members:j.map(he=>{const Ee=Qn[he.type].BYTES_PER_ELEMENT,Ce=$=ir($,Math.max(y,Ee)),Pe=he.components||1;return ee=Math.max(ee,Ee),$+=Ee*Pe,{name:he.name,type:he.type,components:Pe,offset:Ce}}),size:ir($,Math.max(ee,y)),alignment:y}}function ir(j,y){return Math.ceil(j/y)*y}class er extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,$){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,$)}emplace(y,$,ee){const he=2*y;return this.int16[he+0]=$,this.int16[he+1]=ee,y}}er.prototype.bytesPerElement=4,cr(er,"StructArrayLayout2i4");class dr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,$,ee){const he=this.length;return this.resize(he+1),this.emplace(he,y,$,ee)}emplace(y,$,ee,he){const Ee=3*y;return this.int16[Ee+0]=$,this.int16[Ee+1]=ee,this.int16[Ee+2]=he,y}}dr.prototype.bytesPerElement=6,cr(dr,"StructArrayLayout3i6");class gr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,y,$,ee,he)}emplace(y,$,ee,he,Ee){const Ce=4*y;return this.int16[Ce+0]=$,this.int16[Ce+1]=ee,this.int16[Ce+2]=he,this.int16[Ce+3]=Ee,y}}gr.prototype.bytesPerElement=8,cr(gr,"StructArrayLayout4i8");class Ar extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe){const $e=this.length;return this.resize($e+1),this.emplace($e,y,$,ee,he,Ee,Ce,Pe)}emplace(y,$,ee,he,Ee,Ce,Pe,$e){const De=6*y,Ve=12*y,Ze=3*y;return this.int16[De+0]=$,this.int16[De+1]=ee,this.uint8[Ve+4]=he,this.uint8[Ve+5]=Ee,this.uint8[Ve+6]=Ce,this.uint8[Ve+7]=Pe,this.float32[Ze+2]=$e,y}}Ar.prototype.bytesPerElement=12,cr(Ar,"StructArrayLayout2i4ub1f12");class Ur extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,y,$,ee,he)}emplace(y,$,ee,he,Ee){const Ce=4*y;return this.float32[Ce+0]=$,this.float32[Ce+1]=ee,this.float32[Ce+2]=he,this.float32[Ce+3]=Ee,y}}Ur.prototype.bytesPerElement=16,cr(Ur,"StructArrayLayout4f16");class fr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve){const Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve)}emplace(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze){const Xe=10*y;return this.uint16[Xe+0]=$,this.uint16[Xe+1]=ee,this.uint16[Xe+2]=he,this.uint16[Xe+3]=Ee,this.uint16[Xe+4]=Ce,this.uint16[Xe+5]=Pe,this.uint16[Xe+6]=$e,this.uint16[Xe+7]=De,this.uint16[Xe+8]=Ve,this.uint16[Xe+9]=Ze,y}}fr.prototype.bytesPerElement=20,cr(fr,"StructArrayLayout10ui20");class Sr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe,$e){const De=this.length;return this.resize(De+1),this.emplace(De,y,$,ee,he,Ee,Ce,Pe,$e)}emplace(y,$,ee,he,Ee,Ce,Pe,$e,De){const Ve=8*y;return this.uint16[Ve+0]=$,this.uint16[Ve+1]=ee,this.uint16[Ve+2]=he,this.uint16[Ve+3]=Ee,this.uint16[Ve+4]=Ce,this.uint16[Ve+5]=Pe,this.uint16[Ve+6]=$e,this.uint16[Ve+7]=De,y}}Sr.prototype.bytesPerElement=16,cr(Sr,"StructArrayLayout8ui16");class Wr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,y,$,ee,he,Ee,Ce)}emplace(y,$,ee,he,Ee,Ce,Pe){const $e=6*y;return this.int16[$e+0]=$,this.int16[$e+1]=ee,this.int16[$e+2]=he,this.int16[$e+3]=Ee,this.int16[$e+4]=Ce,this.int16[$e+5]=Pe,y}}Wr.prototype.bytesPerElement=12,cr(Wr,"StructArrayLayout6i12");class li extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe){const rt=this.length;return this.resize(rt+1),this.emplace(rt,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe)}emplace(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt){const st=12*y;return this.int16[st+0]=$,this.int16[st+1]=ee,this.int16[st+2]=he,this.int16[st+3]=Ee,this.uint16[st+4]=Ce,this.uint16[st+5]=Pe,this.uint16[st+6]=$e,this.uint16[st+7]=De,this.int16[st+8]=Ve,this.int16[st+9]=Ze,this.int16[st+10]=Xe,this.int16[st+11]=rt,y}}li.prototype.bytesPerElement=24,cr(li,"StructArrayLayout4i4ui4i24");class bi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,y,$,ee,he,Ee,Ce)}emplace(y,$,ee,he,Ee,Ce,Pe){const $e=10*y,De=5*y;return this.int16[$e+0]=$,this.int16[$e+1]=ee,this.int16[$e+2]=he,this.float32[De+2]=Ee,this.float32[De+3]=Ce,this.float32[De+4]=Pe,y}}bi.prototype.bytesPerElement=20,cr(bi,"StructArrayLayout3i3f20");class ii extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y){const $=this.length;return this.resize($+1),this.emplace($,y)}emplace(y,$){return this.uint32[1*y+0]=$,y}}ii.prototype.bytesPerElement=4,cr(ii,"StructArrayLayout1ul4");class qi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt){const st=this.length;return this.resize(st+1),this.emplace(st,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt)}emplace(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st){const gt=20*y,At=10*y;return this.int16[gt+0]=$,this.int16[gt+1]=ee,this.int16[gt+2]=he,this.int16[gt+3]=Ee,this.int16[gt+4]=Ce,this.float32[At+3]=Pe,this.float32[At+4]=$e,this.float32[At+5]=De,this.float32[At+6]=Ve,this.int16[gt+14]=Ze,this.uint32[At+8]=Xe,this.uint16[gt+18]=rt,this.uint16[gt+19]=st,y}}qi.prototype.bytesPerElement=40,cr(qi,"StructArrayLayout5i4f1i1ul2ui40");class Eo extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe){const $e=this.length;return this.resize($e+1),this.emplace($e,y,$,ee,he,Ee,Ce,Pe)}emplace(y,$,ee,he,Ee,Ce,Pe,$e){const De=8*y;return this.int16[De+0]=$,this.int16[De+1]=ee,this.int16[De+2]=he,this.int16[De+4]=Ee,this.int16[De+5]=Ce,this.int16[De+6]=Pe,this.int16[De+7]=$e,y}}Eo.prototype.bytesPerElement=16,cr(Eo,"StructArrayLayout3i2i2i16");class ia extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,y,$,ee,he,Ee)}emplace(y,$,ee,he,Ee,Ce){const Pe=4*y,$e=8*y;return this.float32[Pe+0]=$,this.float32[Pe+1]=ee,this.float32[Pe+2]=he,this.int16[$e+6]=Ee,this.int16[$e+7]=Ce,y}}ia.prototype.bytesPerElement=16,cr(ia,"StructArrayLayout2f1f2i16");class fi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,y,$,ee,he)}emplace(y,$,ee,he,Ee){const Ce=12*y,Pe=3*y;return this.uint8[Ce+0]=$,this.uint8[Ce+1]=ee,this.float32[Pe+1]=he,this.float32[Pe+2]=Ee,y}}fi.prototype.bytesPerElement=12,cr(fi,"StructArrayLayout2ub2f12");class yi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$,ee){const he=this.length;return this.resize(he+1),this.emplace(he,y,$,ee)}emplace(y,$,ee,he){const Ee=3*y;return this.float32[Ee+0]=$,this.float32[Ee+1]=ee,this.float32[Ee+2]=he,y}}yi.prototype.bytesPerElement=12,cr(yi,"StructArrayLayout3f12");class Rr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$,ee){const he=this.length;return this.resize(he+1),this.emplace(he,y,$,ee)}emplace(y,$,ee,he){const Ee=3*y;return this.uint16[Ee+0]=$,this.uint16[Ee+1]=ee,this.uint16[Ee+2]=he,y}}Rr.prototype.bytesPerElement=6,cr(Rr,"StructArrayLayout3ui6");class Ri extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At,Bt,qt,Ft,Ht,en){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At,Bt,qt,Ft,Ht,en)}emplace(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At,Bt,qt,Ft,Ht,en,Zt){const An=30*y,bn=15*y,Mn=60*y;return this.int16[An+0]=$,this.int16[An+1]=ee,this.int16[An+2]=he,this.float32[bn+2]=Ee,this.float32[bn+3]=Ce,this.uint16[An+8]=Pe,this.uint16[An+9]=$e,this.uint32[bn+5]=De,this.uint32[bn+6]=Ve,this.uint32[bn+7]=Ze,this.uint16[An+16]=Xe,this.uint16[An+17]=rt,this.uint16[An+18]=st,this.float32[bn+10]=gt,this.float32[bn+11]=At,this.uint8[Mn+48]=Bt,this.uint8[Mn+49]=qt,this.uint8[Mn+50]=Ft,this.uint32[bn+13]=Ht,this.int16[An+28]=en,this.uint8[Mn+58]=Zt,y}}Ri.prototype.bytesPerElement=60,cr(Ri,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $i extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At,Bt,qt,Ft,Ht,en,Zt,An,bn,Mn,Yn,Cn,Ln,Un,Bn){const Zn=this.length;return this.resize(Zn+1),this.emplace(Zn,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At,Bt,qt,Ft,Ht,en,Zt,An,bn,Mn,Yn,Cn,Ln,Un,Bn)}emplace(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At,Bt,qt,Ft,Ht,en,Zt,An,bn,Mn,Yn,Cn,Ln,Un,Bn,Zn){const Vn=38*y,or=19*y;return this.int16[Vn+0]=$,this.int16[Vn+1]=ee,this.int16[Vn+2]=he,this.float32[or+2]=Ee,this.float32[or+3]=Ce,this.int16[Vn+8]=Pe,this.int16[Vn+9]=$e,this.int16[Vn+10]=De,this.int16[Vn+11]=Ve,this.int16[Vn+12]=Ze,this.int16[Vn+13]=Xe,this.uint16[Vn+14]=rt,this.uint16[Vn+15]=st,this.uint16[Vn+16]=gt,this.uint16[Vn+17]=At,this.uint16[Vn+18]=Bt,this.uint16[Vn+19]=qt,this.uint16[Vn+20]=Ft,this.uint16[Vn+21]=Ht,this.uint16[Vn+22]=en,this.uint16[Vn+23]=Zt,this.uint16[Vn+24]=An,this.uint16[Vn+25]=bn,this.uint16[Vn+26]=Mn,this.uint16[Vn+27]=Yn,this.uint16[Vn+28]=Cn,this.uint32[or+15]=Ln,this.float32[or+16]=Un,this.float32[or+17]=Bn,this.float32[or+18]=Zn,y}}$i.prototype.bytesPerElement=76,cr($i,"StructArrayLayout3i2f6i15ui1ul3f76");class ci extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y){const $=this.length;return this.resize($+1),this.emplace($,y)}emplace(y,$){return this.float32[1*y+0]=$,y}}ci.prototype.bytesPerElement=4,cr(ci,"StructArrayLayout1f4");class Ki extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$,ee,he,Ee){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,y,$,ee,he,Ee)}emplace(y,$,ee,he,Ee,Ce){const Pe=5*y;return this.float32[Pe+0]=$,this.float32[Pe+1]=ee,this.float32[Pe+2]=he,this.float32[Pe+3]=Ee,this.float32[Pe+4]=Ce,y}}Ki.prototype.bytesPerElement=20,cr(Ki,"StructArrayLayout5f20");class $a extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$,ee,he){const Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,y,$,ee,he)}emplace(y,$,ee,he,Ee){const Ce=6*y;return this.uint32[3*y+0]=$,this.uint16[Ce+2]=ee,this.uint16[Ce+3]=he,this.uint16[Ce+4]=Ee,y}}$a.prototype.bytesPerElement=12,cr($a,"StructArrayLayout1ul3ui12");class eo extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,$){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,$)}emplace(y,$,ee){const he=2*y;return this.uint16[he+0]=$,this.uint16[he+1]=ee,y}}eo.prototype.bytesPerElement=4,cr(eo,"StructArrayLayout2ui4");class mo extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y){const $=this.length;return this.resize($+1),this.emplace($,y)}emplace(y,$){return this.uint16[1*y+0]=$,y}}mo.prototype.bytesPerElement=2,cr(mo,"StructArrayLayout1ui2");class za extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,$){const ee=this.length;return this.resize(ee+1),this.emplace(ee,y,$)}emplace(y,$,ee){const he=2*y;return this.float32[he+0]=$,this.float32[he+1]=ee,y}}za.prototype.bytesPerElement=8,cr(za,"StructArrayLayout2f8");class Da extends kn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Da.prototype.size=12;class to extends Wr{get(y){return new Da(this,y)}}cr(to,"FillExtrusionExtArray");class La extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}La.prototype.size=40;class Go extends qi{get(y){return new La(this,y)}}cr(Go,"CollisionBoxArray");class il extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(y){this._structArray.uint8[this._pos1+49]=y}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(y){this._structArray.uint8[this._pos1+50]=y}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(y){this._structArray.uint32[this._pos4+13]=y}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(y){this._structArray.uint8[this._pos1+58]=y}}il.prototype.size=60;class Zh extends Ri{get(y){return new il(this,y)}}cr(Zh,"PlacedSymbolArray");class Xh extends kn{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(y){this._structArray.uint32[this._pos4+15]=y}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xh.prototype.size=76;class Kh extends $i{get(y){return new Xh(this,y)}}cr(Kh,"SymbolInstanceArray");class dh extends ci{getoffsetX(y){return this.float32[1*y+0]}}cr(dh,"GlyphOffsetArray");class Yh extends dr{getx(y){return this.int16[3*y+0]}gety(y){return this.int16[3*y+1]}gettileUnitDistanceFromAnchor(y){return this.int16[3*y+2]}}cr(Yh,"SymbolLineVertexArray");class ph extends kn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ph.prototype.size=12;class fh extends $a{get(y){return new ph(this,y)}}cr(fh,"FeatureIndexArray");class Gl extends kn{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Gl.prototype.size=4;class Ao extends eo{get(y){return new Gl(this,y)}}cr(Ao,"FillExtrusionCentroidArray");class Jh extends kn{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Jh.prototype.size=12;class Qh extends Wr{get(y){return new Jh(this,y)}}cr(Qh,"CircleGlobeExtArray");const ed=Dn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),td=Dn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Pu=rc(function(j){j.exports=function(y,$){var ee,he,Ee,Ce,Pe,$e,De,Ve;for(he=y.length-(ee=3&y.length),Ee=$,Pe=3432918353,$e=461845907,Ve=0;Ve<he;)De=255&y.charCodeAt(Ve)|(255&y.charCodeAt(++Ve))<<8|(255&y.charCodeAt(++Ve))<<16|(255&y.charCodeAt(++Ve))<<24,++Ve,Ee=27492+(65535&(Ce=5*(65535&(Ee=(Ee^=De=(65535&(De=(De=(65535&De)*Pe+(((De>>>16)*Pe&65535)<<16)&4294967295)<<15|De>>>17))*$e+(((De>>>16)*$e&65535)<<16)&4294967295)<<13|Ee>>>19))+((5*(Ee>>>16)&65535)<<16)&4294967295))+((58964+(Ce>>>16)&65535)<<16);switch(De=0,ee){case 3:De^=(255&y.charCodeAt(Ve+2))<<16;case 2:De^=(255&y.charCodeAt(Ve+1))<<8;case 1:Ee^=De=(65535&(De=(De=(65535&(De^=255&y.charCodeAt(Ve)))*Pe+(((De>>>16)*Pe&65535)<<16)&4294967295)<<15|De>>>17))*$e+(((De>>>16)*$e&65535)<<16)&4294967295}return Ee^=y.length,Ee=2246822507*(65535&(Ee^=Ee>>>16))+((2246822507*(Ee>>>16)&65535)<<16)&4294967295,Ee=3266489909*(65535&(Ee^=Ee>>>13))+((3266489909*(Ee>>>16)&65535)<<16)&4294967295,(Ee^=Ee>>>16)>>>0}}),Xd=rc(function(j){j.exports=function(y,$){for(var ee,he=y.length,Ee=$^he,Ce=0;he>=4;)ee=1540483477*(65535&(ee=255&y.charCodeAt(Ce)|(255&y.charCodeAt(++Ce))<<8|(255&y.charCodeAt(++Ce))<<16|(255&y.charCodeAt(++Ce))<<24))+((1540483477*(ee>>>16)&65535)<<16),Ee=1540483477*(65535&Ee)+((1540483477*(Ee>>>16)&65535)<<16)^(ee=1540483477*(65535&(ee^=ee>>>24))+((1540483477*(ee>>>16)&65535)<<16)),he-=4,++Ce;switch(he){case 3:Ee^=(255&y.charCodeAt(Ce+2))<<16;case 2:Ee^=(255&y.charCodeAt(Ce+1))<<8;case 1:Ee=1540483477*(65535&(Ee^=255&y.charCodeAt(Ce)))+((1540483477*(Ee>>>16)&65535)<<16)}return Ee=1540483477*(65535&(Ee^=Ee>>>13))+((1540483477*(Ee>>>16)&65535)<<16),(Ee^=Ee>>>15)>>>0}}),jc=Pu,nd=Xd;jc.murmur3=Pu,jc.murmur2=nd;class Iu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(y,$,ee,he){this.ids.push(rd(y)),this.positions.push($,ee,he)}getPositions(y){const $=rd(y);let ee=0,he=this.ids.length-1;for(;ee<he;){const Ce=ee+he>>1;this.ids[Ce]>=$?he=Ce:ee=Ce+1}const Ee=[];for(;this.ids[ee]===$;)Ee.push({index:this.positions[3*ee],start:this.positions[3*ee+1],end:this.positions[3*ee+2]}),ee++;return Ee}static serialize(y,$){const ee=new Float64Array(y.ids),he=new Uint32Array(y.positions);return Hl(ee,he,0,ee.length-1),$&&$.push(ee.buffer,he.buffer),{ids:ee,positions:he}}static deserialize(y){const $=new Iu;return $.ids=y.ids,$.positions=y.positions,$.indexed=!0,$}}function rd(j){const y=+j;return!isNaN(y)&&Number.MIN_SAFE_INTEGER<=y&&y<=Number.MAX_SAFE_INTEGER?y:jc(String(j))}function Hl(j,y,$,ee){for(;$<ee;){const he=j[$+ee>>1];let Ee=$-1,Ce=ee+1;for(;;){do Ee++;while(j[Ee]<he);do Ce--;while(j[Ce]>he);if(Ee>=Ce)break;Ba(j,Ee,Ce),Ba(y,3*Ee,3*Ce),Ba(y,3*Ee+1,3*Ce+1),Ba(y,3*Ee+2,3*Ce+2)}Ce-$<ee-Ce?(Hl(j,y,$,Ce),$=Ce+1):(Hl(j,y,Ce+1,ee),ee=Ce)}}function Ba(j,y,$){const ee=j[y];j[y]=j[$],j[$]=ee}cr(Iu,"FeaturePositionMap");class Fa{constructor(y){this.gl=y.gl,this.initialized=!1}fetchUniformLocation(y,$){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(y,$),this.initialized=!0),!!this.location}}class Mu extends Fa{constructor(y){super(y),this.current=0}set(y,$,ee){this.fetchUniformLocation(y,$)&&this.current!==ee&&(this.current=ee,this.gl.uniform1f(this.location,ee))}}class id extends Fa{constructor(y){super(y),this.current=[0,0,0,0]}set(y,$,ee){this.fetchUniformLocation(y,$)&&(ee[0]===this.current[0]&&ee[1]===this.current[1]&&ee[2]===this.current[2]&&ee[3]===this.current[3]||(this.current=ee,this.gl.uniform4f(this.location,ee[0],ee[1],ee[2],ee[3])))}}class od extends Fa{constructor(y){super(y),this.current=ri.transparent}set(y,$,ee){this.fetchUniformLocation(y,$)&&(ee.r===this.current.r&&ee.g===this.current.g&&ee.b===this.current.b&&ee.a===this.current.a||(this.current=ee,this.gl.uniform4f(this.location,ee.r,ee.g,ee.b,ee.a)))}}const ad=new Float32Array(16),Kd=new Float32Array(9),Yd=new Float32Array(4);function Ou(j){return[Fn(255*j.r,255*j.g),Fn(255*j.b,255*j.a)]}class hs{constructor(y,$,ee){this.value=y,this.uniformNames=$.map(he=>`u_${he}`),this.type=ee}setUniform(y,$,ee,he,Ee){$.set(y,Ee,he.constantOr(this.value))}getBinding(y,$){return this.type==="color"?new od(y):new Mu(y)}}class ds{constructor(y,$){this.uniformNames=$.map(ee=>`u_${ee}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(y,$){this.pixelRatioFrom=$.pixelRatio||1,this.pixelRatioTo=y.pixelRatio||1,this.patternFrom=$.tl.concat($.br),this.patternTo=y.tl.concat(y.br)}setUniform(y,$,ee,he,Ee){const Ce=Ee==="u_pattern_to"||Ee==="u_dash_to"?this.patternTo:Ee==="u_pattern_from"||Ee==="u_dash_from"?this.patternFrom:Ee==="u_pixel_ratio_to"?this.pixelRatioTo:Ee==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Ce&&$.set(y,Ee,Ce)}getBinding(y,$){return $==="u_pattern_from"||$==="u_pattern_to"||$==="u_dash_from"||$==="u_dash_to"?new id(y):new Mu(y)}}class Na{constructor(y,$,ee,he){this.expression=y,this.type=ee,this.maxValue=0,this.paintVertexAttributes=$.map(Ee=>({name:`a_${Ee}`,type:"Float32",components:ee==="color"?2:1,offset:0})),this.paintVertexArray=new he}populatePaintArray(y,$,ee,he,Ee,Ce){const Pe=this.paintVertexArray.length,$e=this.expression.evaluate(new Tt(0),$,{},Ee,he,Ce);this.paintVertexArray.resize(y),this._setPaintValue(Pe,y,$e)}updatePaintArray(y,$,ee,he,Ee){const Ce=this.expression.evaluate({zoom:0},ee,he,void 0,Ee);this._setPaintValue(y,$,Ce)}_setPaintValue(y,$,ee){if(this.type==="color"){const he=Ou(ee);for(let Ee=y;Ee<$;Ee++)this.paintVertexArray.emplace(Ee,he[0],he[1])}else{for(let he=y;he<$;he++)this.paintVertexArray.emplace(he,ee);this.maxValue=Math.max(this.maxValue,Math.abs(ee))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oa{constructor(y,$,ee,he,Ee,Ce){this.expression=y,this.uniformNames=$.map(Pe=>`u_${Pe}_t`),this.type=ee,this.useIntegerZoom=he,this.zoom=Ee,this.maxValue=0,this.paintVertexAttributes=$.map(Pe=>({name:`a_${Pe}`,type:"Float32",components:ee==="color"?4:2,offset:0})),this.paintVertexArray=new Ce}populatePaintArray(y,$,ee,he,Ee,Ce){const Pe=this.expression.evaluate(new Tt(this.zoom),$,{},Ee,he,Ce),$e=this.expression.evaluate(new Tt(this.zoom+1),$,{},Ee,he,Ce),De=this.paintVertexArray.length;this.paintVertexArray.resize(y),this._setPaintValue(De,y,Pe,$e)}updatePaintArray(y,$,ee,he,Ee){const Ce=this.expression.evaluate({zoom:this.zoom},ee,he,void 0,Ee),Pe=this.expression.evaluate({zoom:this.zoom+1},ee,he,void 0,Ee);this._setPaintValue(y,$,Ce,Pe)}_setPaintValue(y,$,ee,he){if(this.type==="color"){const Ee=Ou(ee),Ce=Ou(he);for(let Pe=y;Pe<$;Pe++)this.paintVertexArray.emplace(Pe,Ee[0],Ee[1],Ce[0],Ce[1])}else{for(let Ee=y;Ee<$;Ee++)this.paintVertexArray.emplace(Ee,ee,he);this.maxValue=Math.max(this.maxValue,Math.abs(ee),Math.abs(he))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(y,$,ee,he,Ee){const Ce=this.useIntegerZoom?Math.floor(ee.zoom):ee.zoom,Pe=qe(this.expression.interpolationFactor(Ce,this.zoom,this.zoom+1),0,1);$.set(y,Ee,Pe)}getBinding(y,$){return new Mu(y)}}class ps{constructor(y,$,ee,he,Ee,Ce,Pe){this.expression=y,this.type=ee,this.useIntegerZoom=he,this.zoom=Ee,this.layerId=Pe,this.paintVertexAttributes=(ee==="array"?td:ed).members;for(let $e=0;$e<$.length;++$e);this.zoomInPaintVertexArray=new Ce,this.zoomOutPaintVertexArray=new Ce}populatePaintArray(y,$,ee){const he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(y),this.zoomOutPaintVertexArray.resize(y),this._setPaintValues(he,y,$.patterns&&$.patterns[this.layerId],ee)}updatePaintArray(y,$,ee,he,Ee,Ce){this._setPaintValues(y,$,ee.patterns&&ee.patterns[this.layerId],Ce)}_setPaintValues(y,$,ee,he){if(!he||!ee)return;const{min:Ee,mid:Ce,max:Pe}=ee,$e=he[Ee],De=he[Ce],Ve=he[Pe];if($e&&De&&Ve)for(let Ze=y;Ze<$;Ze++)this._setPaintValue(this.zoomInPaintVertexArray,Ze,De,$e),this._setPaintValue(this.zoomOutPaintVertexArray,Ze,De,Ve)}_setPaintValue(y,$,ee,he){y.emplace($,ee.tl[0],ee.tl[1],ee.br[0],ee.br[1],he.tl[0],he.tl[1],he.br[0],he.br[1],ee.pixelRatio,he.pixelRatio)}upload(y){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=y.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=y.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fs{constructor(y,$,ee=()=>!0){this.binders={},this._buffers=[];const he=[];for(const Ee in y.paint._values){if(!ee(Ee))continue;const Ce=y.paint.get(Ee);if(!(Ce instanceof Gt&&es(Ce.property.specification)))continue;const Pe=ld(Ee,y.type),$e=Ce.value,De=Ce.property.specification.type,Ve=Ce.property.useIntegerZoom,Ze=Ce.property.specification["property-type"],Xe=Ze==="cross-faded"||Ze==="cross-faded-data-driven",rt=String(Ee)==="line-dasharray"&&y.layout.get("line-cap").value.kind!=="constant";if($e.kind!=="constant"||rt)if($e.kind==="source"||rt||Xe){const st=cd(Ee,De,"source");this.binders[Ee]=Xe?new ps($e,Pe,De,Ve,$,st,y.id):new Na($e,Pe,De,st),he.push(`/a_${Ee}`)}else{const st=cd(Ee,De,"composite");this.binders[Ee]=new oa($e,Pe,De,Ve,$,st),he.push(`/z_${Ee}`)}else this.binders[Ee]=Xe?new ds($e.value,Pe):new hs($e.value,Pe,De),he.push(`/u_${Ee}`)}this.cacheKey=he.sort().join("")}getMaxValue(y){const $=this.binders[y];return $ instanceof Na||$ instanceof oa?$.maxValue:0}populatePaintArrays(y,$,ee,he,Ee,Ce){for(const Pe in this.binders){const $e=this.binders[Pe];($e instanceof Na||$e instanceof oa||$e instanceof ps)&&$e.populatePaintArray(y,$,ee,he,Ee,Ce)}}setConstantPatternPositions(y,$){for(const ee in this.binders){const he=this.binders[ee];he instanceof ds&&he.setConstantPatternPositions(y,$)}}updatePaintArrays(y,$,ee,he,Ee,Ce){let Pe=!1;for(const $e in y){const De=$.getPositions($e);for(const Ve of De){const Ze=ee.feature(Ve.index);for(const Xe in this.binders){const rt=this.binders[Xe];if((rt instanceof Na||rt instanceof oa||rt instanceof ps)&&rt.expression.isStateDependent===!0){const st=he.paint.get(Xe);rt.expression=st.value,rt.updatePaintArray(Ve.start,Ve.end,Ze,y[$e],Ee,Ce),Pe=!0}}}}return Pe}defines(){const y=[];for(const $ in this.binders){const ee=this.binders[$];(ee instanceof hs||ee instanceof ds)&&y.push(...ee.uniformNames.map(he=>`#define HAS_UNIFORM_${he}`))}return y}getBinderAttributes(){const y=[];for(const $ in this.binders){const ee=this.binders[$];if(ee instanceof Na||ee instanceof oa||ee instanceof ps)for(let he=0;he<ee.paintVertexAttributes.length;he++)y.push(ee.paintVertexAttributes[he].name)}return y}getBinderUniforms(){const y=[];for(const $ in this.binders){const ee=this.binders[$];if(ee instanceof hs||ee instanceof ds||ee instanceof oa)for(const he of ee.uniformNames)y.push(he)}return y}getPaintVertexBuffers(){return this._buffers}getUniforms(y){const $=[];for(const ee in this.binders){const he=this.binders[ee];if(he instanceof hs||he instanceof ds||he instanceof oa)for(const Ee of he.uniformNames)$.push({name:Ee,property:ee,binding:he.getBinding(y,Ee)})}return $}setUniforms(y,$,ee,he,Ee){for(const{name:Ce,property:Pe,binding:$e}of ee)this.binders[Pe].setUniform(y,$e,Ee,he.get(Pe),Ce)}updatePaintBuffers(y){this._buffers=[];for(const $ in this.binders){const ee=this.binders[$];if(y&&ee instanceof ps){const he=y.fromScale===2?ee.zoomInPaintVertexBuffer:ee.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else(ee instanceof Na||ee instanceof oa)&&ee.paintVertexBuffer&&this._buffers.push(ee.paintVertexBuffer)}}upload(y){for(const $ in this.binders){const ee=this.binders[$];(ee instanceof Na||ee instanceof oa||ee instanceof ps)&&ee.upload(y)}this.updatePaintBuffers()}destroy(){for(const y in this.binders){const $=this.binders[y];($ instanceof Na||$ instanceof oa||$ instanceof ps)&&$.destroy()}}}class ol{constructor(y,$,ee=()=>!0){this.programConfigurations={};for(const he of y)this.programConfigurations[he.id]=new fs(he,$,ee);this.needsUpload=!1,this._featureMap=new Iu,this._bufferOffset=0}populatePaintArrays(y,$,ee,he,Ee,Ce,Pe){for(const $e in this.programConfigurations)this.programConfigurations[$e].populatePaintArrays(y,$,he,Ee,Ce,Pe);$.id!==void 0&&this._featureMap.add($.id,ee,this._bufferOffset,y),this._bufferOffset=y,this.needsUpload=!0}updatePaintArrays(y,$,ee,he,Ee){for(const Ce of ee)this.needsUpload=this.programConfigurations[Ce.id].updatePaintArrays(y,this._featureMap,$,Ce,he,Ee)||this.needsUpload}get(y){return this.programConfigurations[y]}upload(y){if(this.needsUpload){for(const $ in this.programConfigurations)this.programConfigurations[$].upload(y);this.needsUpload=!1}}destroy(){for(const y in this.programConfigurations)this.programConfigurations[y].destroy()}}const sd={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function ld(j,y){return sd[j]||[j.replace(`${y}-`,"").replace(/-/g,"_")]}const ql={"line-pattern":{source:fr,composite:fr},"fill-pattern":{source:fr,composite:fr},"fill-extrusion-pattern":{source:fr,composite:fr},"line-dasharray":{source:Sr,composite:Sr}},Ru={color:{source:za,composite:Ur},number:{source:ci,composite:za}};function cd(j,y,$){const ee=ql[j];return ee&&ee[$]||Ru[y][$]}cr(hs,"ConstantBinder"),cr(ds,"CrossFadedConstantBinder"),cr(Na,"SourceExpressionBinder"),cr(ps,"CrossFadedCompositeBinder"),cr(oa,"CompositeExpressionBinder"),cr(fs,"ProgramConfiguration",{omit:["_buffers"]}),cr(ol,"ProgramConfigurationSet");const Wl="-transition";class Ui extends vr{constructor(y,$){if(super(),this.id=y.id,this.type=y.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,y.type!=="custom"&&(this.metadata=(y=y).metadata,this.minzoom=y.minzoom,this.maxzoom=y.maxzoom,y.type!=="background"&&y.type!=="sky"&&(this.source=y.source,this.sourceLayer=y["source-layer"],this.filter=y.filter),$.layout&&(this._unevaluatedLayout=new Kt($.layout)),$.paint)){this._transitionablePaint=new zt($.paint);for(const ee in y.paint)this.setPaintProperty(ee,y.paint[ee],{validate:!1});for(const ee in y.layout)this.setLayoutProperty(ee,y.layout[ee],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xt($.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(y){return y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(y)}setLayoutProperty(y,$,ee={}){$!=null&&this._validate(Eu,`layers.${this.id}.layout.${y}`,y,$,ee)||(y!=="visibility"?this._unevaluatedLayout.setValue(y,$):this.visibility=$)}getPaintProperty(y){return pt(y,Wl)?this._transitionablePaint.getTransition(y.slice(0,-Wl.length)):this._transitionablePaint.getValue(y)}setPaintProperty(y,$,ee={}){if($!=null&&this._validate(Bl,`layers.${this.id}.paint.${y}`,y,$,ee))return!1;if(pt(y,Wl))return this._transitionablePaint.setTransition(y.slice(0,-Wl.length),$||void 0),!1;{const he=this._transitionablePaint._values[y],Ee=he.property.specification["property-type"]==="cross-faded-data-driven",Ce=he.value.isDataDriven(),Pe=he.value;this._transitionablePaint.setValue(y,$),this._handleSpecialPaintPropertyUpdate(y);const $e=this._transitionablePaint._values[y].value;return $e.isDataDriven()||Ce||Ee||this._handleOverridablePaintPropertyUpdate(y,Pe,$e)}}_handleSpecialPaintPropertyUpdate(y){}getProgramIds(){return null}getProgramConfiguration(y){return null}_handleOverridablePaintPropertyUpdate(y,$,ee){return!1}isHidden(y){return!!(this.minzoom&&y<this.minzoom)||!!(this.maxzoom&&y>=this.maxzoom)||this.visibility==="none"}updateTransitions(y){this._transitioningPaint=this._transitionablePaint.transitioned(y,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(y,$){y.getCrossfadeParameters&&(this._crossfadeParameters=y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(y,void 0,$)),this.paint=this._transitioningPaint.possiblyEvaluate(y,void 0,$)}serialize(){const y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(y.layout=y.layout||{},y.layout.visibility=this.visibility),ut(y,($,ee)=>!($===void 0||ee==="layout"&&!Object.keys($).length||ee==="paint"&&!Object.keys($).length))}_validate(y,$,ee,he,Ee={}){return(!Ee||Ee.validate!==!1)&&Ic(this,y.call(Ll,{key:$,layerType:this.type,objectKey:ee,value:he,styleSpec:mn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const y in this.paint._values){const $=this.paint.get(y);if($ instanceof Gt&&es($.property.specification)&&($.value.kind==="source"||$.value.kind==="composite")&&$.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Xs(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Jd=Dn([{name:"a_pos",components:2,type:"Int16"}],4),Qd=Dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Li{constructor(y=[]){this.segments=y}prepareSegment(y,$,ee,he){let Ee=this.segments[this.segments.length-1];return y>Li.MAX_VERTEX_ARRAY_LENGTH&&Mt(`Max vertices per segment is ${Li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${y}`),(!Ee||Ee.vertexLength+y>Li.MAX_VERTEX_ARRAY_LENGTH||Ee.sortKey!==he)&&(Ee={vertexOffset:$.length,primitiveOffset:ee.length,vertexLength:0,primitiveLength:0},he!==void 0&&(Ee.sortKey=he),this.segments.push(Ee)),Ee}get(){return this.segments}destroy(){for(const y of this.segments)for(const $ in y.vaos)y.vaos[$].destroy()}static simpleSegment(y,$,ee,he){return new Li([{vertexOffset:y,primitiveOffset:$,vertexLength:ee,primitiveLength:he,vaos:{},sortKey:0}])}}Li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,cr(Li,"SegmentVector");var Tr=8192;class ja{constructor(y,$){y&&($?this.setSouthWest(y).setNorthEast($):y.length===4?this.setSouthWest([y[0],y[1]]).setNorthEast([y[2],y[3]]):this.setSouthWest(y[0]).setNorthEast(y[1]))}setNorthEast(y){return this._ne=y instanceof ei?new ei(y.lng,y.lat):ei.convert(y),this}setSouthWest(y){return this._sw=y instanceof ei?new ei(y.lng,y.lat):ei.convert(y),this}extend(y){const $=this._sw,ee=this._ne;let he,Ee;if(y instanceof ei)he=y,Ee=y;else{if(!(y instanceof ja))return Array.isArray(y)?y.length===4||y.every(Array.isArray)?this.extend(ja.convert(y)):this.extend(ei.convert(y)):this;if(he=y._sw,Ee=y._ne,!he||!Ee)return this}return $||ee?($.lng=Math.min(he.lng,$.lng),$.lat=Math.min(he.lat,$.lat),ee.lng=Math.max(Ee.lng,ee.lng),ee.lat=Math.max(Ee.lat,ee.lat)):(this._sw=new ei(he.lng,he.lat),this._ne=new ei(Ee.lng,Ee.lat)),this}getCenter(){return new ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ei(this.getWest(),this.getNorth())}getSouthEast(){return new ei(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(y){const{lng:$,lat:ee}=ei.convert(y);let he=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(he=this._sw.lng>=$&&$>=this._ne.lng),this._sw.lat<=ee&&ee<=this._ne.lat&&he}static convert(y){return!y||y instanceof ja?y:new ja(y)}}const _h=63710088e-1;class ei{constructor(y,$){if(isNaN(y)||isNaN($))throw new Error(`Invalid LngLat object: (${y}, ${$})`);if(this.lng=+y,this.lat=+$,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ei(Ke(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(y){const $=Math.PI/180,ee=this.lat*$,he=y.lat*$,Ee=Math.sin(ee)*Math.sin(he)+Math.cos(ee)*Math.cos(he)*Math.cos((y.lng-this.lng)*$);return _h*Math.acos(Math.min(Ee,1))}toBounds(y=0){const $=360*y/40075017,ee=$/Math.cos(Math.PI/180*this.lat);return new ja(new ei(this.lng-ee,this.lat-$),new ei(this.lng+ee,this.lat+$))}static convert(y){if(y instanceof ei)return y;if(Array.isArray(y)&&(y.length===2||y.length===3))return new ei(Number(y[0]),Number(y[1]));if(!Array.isArray(y)&&typeof y=="object"&&y!==null)return new ei(Number("lng"in y?y.lng:y.lon),Number(y.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Uc=2*Math.PI*_h;function mh(j){return Uc*Math.cos(j*Math.PI/180)}function va(j){return(180+j)/360}function Ua(j){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+j*Math.PI/360)))/360}function Do(j,y){return j/mh(y)}function Ho(j){return 360*j-180}function Yi(j){return 360/Math.PI*Math.atan(Math.exp((180-360*j)*Math.PI/180))-90}function ud(j,y){return j*mh(Yi(y))}const xa=85.051129;function hd(j){return 1/Math.cos(j*Math.PI/180)}class Zl{constructor(y,$,ee=0){this.x=+y,this.y=+$,this.z=+ee}static fromLngLat(y,$=0){const ee=ei.convert(y);return new Zl(va(ee.lng),Ua(ee.lat),Do($,ee.lat))}toLngLat(){return new ei(Ho(this.x),Yi(this.y))}toAltitude(){return ud(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Uc*hd(Yi(this.y))}}function $u(j,y,$,ee,he,Ee,Ce,Pe,$e){const De=(y+ee)/2,Ve=($+he)/2,Ze=new ye(De,Ve);Pe(Ze),function(Xe,rt,st,gt,At,Bt){const qt=st-At,Ft=gt-Bt;return Math.abs((gt-rt)*qt-(st-Xe)*Ft)/Math.hypot(qt,Ft)}(Ze.x,Ze.y,Ee.x,Ee.y,Ce.x,Ce.y)>=$e?($u(j,y,$,De,Ve,Ee,Ze,Pe,$e),$u(j,De,Ve,ee,he,Ze,Ce,Pe,$e)):j.push(Ce)}function dd(j,y,$){let ee=j[0],he=ee.x,Ee=ee.y;y(ee);const Ce=[ee];for(let Pe=1;Pe<j.length;Pe++){const $e=j[Pe],{x:De,y:Ve}=$e;y($e),$u(Ce,he,Ee,De,Ve,ee,$e,y,$),he=De,Ee=Ve,ee=$e}return Ce}function gh(j,y,$,ee,he){if(he(y,$)){const Ee=y.add($).mult(.5);ee(Ee),gh(j,y,Ee,ee,he),gh(j,Ee,$,ee,he)}else j.push($)}function pd(j,y,$){let ee=j[0];y(ee);const he=[ee];for(let Ee=1;Ee<j.length;Ee++){const Ce=j[Ee];y(Ce),gh(he,ee,Ce,y,$),ee=Ce}return he}const yh=Math.pow(2,14)-1,lt=-yh-1;function St(j,y){const $=Math.round(j.x*y),ee=Math.round(j.y*y);return j.x=qe($,lt,yh),j.y=qe(ee,lt,yh),($<j.x||$>j.x+1||ee<j.y||ee>j.y+1)&&Mt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),j}function wt(j,y,$){const ee=j.loadGeometry(),he=j.extent,Ee=Tr/he;if(y&&$&&$.projection.isReprojectedInTileSpace){const Ce=1<<y.z,{scale:Pe,x:$e,y:De,projection:Ve}=$,Ze=Xe=>{const rt=Ho((y.x+Xe.x/he)/Ce),st=Yi((y.y+Xe.y/he)/Ce),gt=Ve.project(rt,st);Xe.x=(gt.x*Pe-$e)*he,Xe.y=(gt.y*Pe-De)*he};for(let Xe=0;Xe<ee.length;Xe++)if(j.type!==1)ee[Xe]=dd(ee[Xe],Ze,1);else{const rt=[];for(const st of ee[Xe])st.x<0||st.x>=he||st.y<0||st.y>=he||(Ze(st),rt.push(st));ee[Xe]=rt}}for(const Ce of ee)for(const Pe of Ce)St(Pe,Ee);return ee}function Ge(j,y){return{type:j.type,id:j.id,properties:j.properties,geometry:y?wt(j):[]}}function nt(j,y,$,ee,he){j.emplaceBack(2*y+(ee+1)/2,2*$+(he+1)/2)}function bt(j,y,$){j.emplaceBack(y.x,y.y,y.z,$[0]*16384,$[1]*16384,$[2]*16384)}class jt{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map($=>$.id),this.index=y.index,this.hasPattern=!1,this.projection=y.projection,this.layoutVertexArray=new er,this.indexArray=new Rr,this.segments=new Li,this.programConfigurations=new ol(y.layers,y.zoom),this.stateDependentLayerIds=this.layers.filter($=>$.isStateDependent()).map($=>$.id)}populate(y,$,ee,he){const Ee=this.layers[0],Ce=[];let Pe=null;Ee.type==="circle"&&(Pe=Ee.layout.get("circle-sort-key"));for(const{feature:De,id:Ve,index:Ze,sourceLayerIndex:Xe}of y){const rt=this.layers[0]._featureFilter.needGeometry,st=Ge(De,rt);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),st,ee))continue;const gt=Pe?Pe.evaluate(st,{},ee):void 0,At={id:Ve,properties:De.properties,type:De.type,sourceLayerIndex:Xe,index:Ze,geometry:rt?st.geometry:wt(De,ee,he),patterns:{},sortKey:gt};Ce.push(At)}Pe&&Ce.sort((De,Ve)=>De.sortKey-Ve.sortKey);let $e=null;he.projection.name==="globe"&&(this.globeExtVertexArray=new Qh,$e=he.projection);for(const De of Ce){const{geometry:Ve,index:Ze,sourceLayerIndex:Xe}=De,rt=y[Ze].feature;this.addFeature(De,Ve,Ze,$.availableImages,ee,$e),$.featureIndex.insert(rt,Ve,Ze,Xe,this.index)}}update(y,$,ee,he){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,$,this.stateDependentLayers,ee,he)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Jd.members),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,Qd.members))),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(y,$,ee,he,Ee,Ce){for(const Pe of $)for(const $e of Pe){const De=$e.x,Ve=$e.y;if(De<0||De>=Tr||Ve<0||Ve>=Tr)continue;if(Ce){const rt=Ce.projectTilePoint(De,Ve,Ee),st=Ce.upVector(Ee,De,Ve),gt=this.globeExtVertexArray;bt(gt,rt,st),bt(gt,rt,st),bt(gt,rt,st),bt(gt,rt,st)}const Ze=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,y.sortKey),Xe=Ze.vertexLength;nt(this.layoutVertexArray,De,Ve,-1,-1),nt(this.layoutVertexArray,De,Ve,1,-1),nt(this.layoutVertexArray,De,Ve,1,1),nt(this.layoutVertexArray,De,Ve,-1,1),this.indexArray.emplaceBack(Xe,Xe+1,Xe+2),this.indexArray.emplaceBack(Xe,Xe+2,Xe+3),Ze.vertexLength+=4,Ze.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,{},he,Ee)}}function ln(j,y){for(let $=0;$<j.length;$++)if(si(y,j[$]))return!0;for(let $=0;$<y.length;$++)if(si(j,y[$]))return!0;return!!rr(j,y)}function Pn(j,y,$){return!!si(j,y)||!!Bi(y,j,$)}function jn(j,y){if(j.length===1)return qo(y,j[0]);for(let $=0;$<y.length;$++){const ee=y[$];for(let he=0;he<ee.length;he++)if(si(j,ee[he]))return!0}for(let $=0;$<j.length;$++)if(qo(y,j[$]))return!0;for(let $=0;$<y.length;$++)if(rr(j,y[$]))return!0;return!1}function ur(j,y,$){if(j.length>1){if(rr(j,y))return!0;for(let ee=0;ee<y.length;ee++)if(Bi(y[ee],j,$))return!0}for(let ee=0;ee<j.length;ee++)if(Bi(j[ee],y,$))return!0;return!1}function rr(j,y){if(j.length===0||y.length===0)return!1;for(let $=0;$<j.length-1;$++){const ee=j[$],he=j[$+1];for(let Ee=0;Ee<y.length-1;Ee++)if(Si(ee,he,y[Ee],y[Ee+1]))return!0}return!1}function Si(j,y,$,ee){return nn(j,$,ee)!==nn(y,$,ee)&&nn(j,y,$)!==nn(j,y,ee)}function Bi(j,y,$){const ee=$*$;if(y.length===1)return j.distSqr(y[0])<ee;for(let he=1;he<y.length;he++)if(To(j,y[he-1],y[he])<ee)return!0;return!1}function To(j,y,$){const ee=y.distSqr($);if(ee===0)return j.distSqr(y);const he=((j.x-y.x)*($.x-y.x)+(j.y-y.y)*($.y-y.y))/ee;return j.distSqr(he<0?y:he>1?$:$.sub(y)._mult(he)._add(y))}function qo(j,y){let $,ee,he,Ee=!1;for(let Ce=0;Ce<j.length;Ce++){$=j[Ce];for(let Pe=0,$e=$.length-1;Pe<$.length;$e=Pe++)ee=$[Pe],he=$[$e],ee.y>y.y!=he.y>y.y&&y.x<(he.x-ee.x)*(y.y-ee.y)/(he.y-ee.y)+ee.x&&(Ee=!Ee)}return Ee}function si(j,y){let $=!1;for(let ee=0,he=j.length-1;ee<j.length;he=ee++){const Ee=j[ee],Ce=j[he];Ee.y>y.y!=Ce.y>y.y&&y.x<(Ce.x-Ee.x)*(y.y-Ee.y)/(Ce.y-Ee.y)+Ee.x&&($=!$)}return $}function wi(j,y,$,ee,he){for(const Ce of j)if(y<=Ce.x&&$<=Ce.y&&ee>=Ce.x&&he>=Ce.y)return!0;const Ee=[new ye(y,$),new ye(y,he),new ye(ee,he),new ye(ee,$)];if(j.length>2){for(const Ce of Ee)if(si(j,Ce))return!0}for(let Ce=0;Ce<j.length-1;Ce++)if(Ji(j[Ce],j[Ce+1],Ee))return!0;return!1}function Ji(j,y,$){const ee=$[0],he=$[2];if(j.x<ee.x&&y.x<ee.x||j.x>he.x&&y.x>he.x||j.y<ee.y&&y.y<ee.y||j.y>he.y&&y.y>he.y)return!1;const Ee=nn(j,y,$[0]);return Ee!==nn(j,y,$[1])||Ee!==nn(j,y,$[2])||Ee!==nn(j,y,$[3])}function Vi(j,y,$){const ee=y.paint.get(j).value;return ee.kind==="constant"?ee.value:$.programConfigurations.get(y.id).getMaxValue(j)}function co(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])}function _s(j,y,$,ee,he){if(!y[0]&&!y[1])return j;const Ee=ye.convert(y)._mult(he);$==="viewport"&&Ee._rotate(-ee);const Ce=[];for(let Pe=0;Pe<j.length;Pe++)Ce.push(j[Pe].sub(Ee));return Ce}function fd(j,y,$,ee){const he=ye.convert(j)._mult(ee);return y==="viewport"&&he._rotate(-$),he}cr(jt,"CircleBucket",{omit:["layers"]});const _d=new Rn({"circle-sort-key":new sn(mn.layout_circle["circle-sort-key"])});var em={paint:new Rn({"circle-radius":new sn(mn.paint_circle["circle-radius"]),"circle-color":new sn(mn.paint_circle["circle-color"]),"circle-blur":new sn(mn.paint_circle["circle-blur"]),"circle-opacity":new sn(mn.paint_circle["circle-opacity"]),"circle-translate":new Wt(mn.paint_circle["circle-translate"]),"circle-translate-anchor":new Wt(mn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Wt(mn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Wt(mn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new sn(mn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new sn(mn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new sn(mn.paint_circle["circle-stroke-opacity"])}),layout:_d},md=1e-6,Wo=typeof Float32Array!="undefined"?Float32Array:Array;function Kp(){var j=new Wo(9);return Wo!=Float32Array&&(j[1]=0,j[2]=0,j[3]=0,j[5]=0,j[6]=0,j[7]=0),j[0]=1,j[4]=1,j[8]=1,j}function ms(j){return j[0]=1,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=1,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=1,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j}function ep(j,y){var $=y[0],ee=y[1],he=y[2],Ee=y[3],Ce=y[4],Pe=y[5],$e=y[6],De=y[7],Ve=y[8],Ze=y[9],Xe=y[10],rt=y[11],st=y[12],gt=y[13],At=y[14],Bt=y[15],qt=$*Pe-ee*Ce,Ft=$*$e-he*Ce,Ht=$*De-Ee*Ce,en=ee*$e-he*Pe,Zt=ee*De-Ee*Pe,An=he*De-Ee*$e,bn=Ve*gt-Ze*st,Mn=Ve*At-Xe*st,Yn=Ve*Bt-rt*st,Cn=Ze*At-Xe*gt,Ln=Ze*Bt-rt*gt,Un=Xe*Bt-rt*At,Bn=qt*Un-Ft*Ln+Ht*Cn+en*Yn-Zt*Mn+An*bn;return Bn?(j[0]=(Pe*Un-$e*Ln+De*Cn)*(Bn=1/Bn),j[1]=(he*Ln-ee*Un-Ee*Cn)*Bn,j[2]=(gt*An-At*Zt+Bt*en)*Bn,j[3]=(Xe*Zt-Ze*An-rt*en)*Bn,j[4]=($e*Yn-Ce*Un-De*Mn)*Bn,j[5]=($*Un-he*Yn+Ee*Mn)*Bn,j[6]=(At*Ht-st*An-Bt*Ft)*Bn,j[7]=(Ve*An-Xe*Ht+rt*Ft)*Bn,j[8]=(Ce*Ln-Pe*Yn+De*bn)*Bn,j[9]=(ee*Yn-$*Ln-Ee*bn)*Bn,j[10]=(st*Zt-gt*Ht+Bt*qt)*Bn,j[11]=(Ze*Ht-Ve*Zt-rt*qt)*Bn,j[12]=(Pe*Mn-Ce*Cn-$e*bn)*Bn,j[13]=($*Cn-ee*Mn+he*bn)*Bn,j[14]=(gt*Ft-st*en-At*qt)*Bn,j[15]=(Ve*en-Ze*Ft+Xe*qt)*Bn,j):null}function zu(j,y,$){var ee=y[0],he=y[1],Ee=y[2],Ce=y[3],Pe=y[4],$e=y[5],De=y[6],Ve=y[7],Ze=y[8],Xe=y[9],rt=y[10],st=y[11],gt=y[12],At=y[13],Bt=y[14],qt=y[15],Ft=$[0],Ht=$[1],en=$[2],Zt=$[3];return j[0]=Ft*ee+Ht*Pe+en*Ze+Zt*gt,j[1]=Ft*he+Ht*$e+en*Xe+Zt*At,j[2]=Ft*Ee+Ht*De+en*rt+Zt*Bt,j[3]=Ft*Ce+Ht*Ve+en*st+Zt*qt,j[4]=(Ft=$[4])*ee+(Ht=$[5])*Pe+(en=$[6])*Ze+(Zt=$[7])*gt,j[5]=Ft*he+Ht*$e+en*Xe+Zt*At,j[6]=Ft*Ee+Ht*De+en*rt+Zt*Bt,j[7]=Ft*Ce+Ht*Ve+en*st+Zt*qt,j[8]=(Ft=$[8])*ee+(Ht=$[9])*Pe+(en=$[10])*Ze+(Zt=$[11])*gt,j[9]=Ft*he+Ht*$e+en*Xe+Zt*At,j[10]=Ft*Ee+Ht*De+en*rt+Zt*Bt,j[11]=Ft*Ce+Ht*Ve+en*st+Zt*qt,j[12]=(Ft=$[12])*ee+(Ht=$[13])*Pe+(en=$[14])*Ze+(Zt=$[15])*gt,j[13]=Ft*he+Ht*$e+en*Xe+Zt*At,j[14]=Ft*Ee+Ht*De+en*rt+Zt*Bt,j[15]=Ft*Ce+Ht*Ve+en*st+Zt*qt,j}function vh(j,y,$){var ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt=$[0],At=$[1],Bt=$[2];return y===j?(j[12]=y[0]*gt+y[4]*At+y[8]*Bt+y[12],j[13]=y[1]*gt+y[5]*At+y[9]*Bt+y[13],j[14]=y[2]*gt+y[6]*At+y[10]*Bt+y[14],j[15]=y[3]*gt+y[7]*At+y[11]*Bt+y[15]):(he=y[1],Ee=y[2],Ce=y[3],Pe=y[4],$e=y[5],De=y[6],Ve=y[7],Ze=y[8],Xe=y[9],rt=y[10],st=y[11],j[0]=ee=y[0],j[1]=he,j[2]=Ee,j[3]=Ce,j[4]=Pe,j[5]=$e,j[6]=De,j[7]=Ve,j[8]=Ze,j[9]=Xe,j[10]=rt,j[11]=st,j[12]=ee*gt+Pe*At+Ze*Bt+y[12],j[13]=he*gt+$e*At+Xe*Bt+y[13],j[14]=Ee*gt+De*At+rt*Bt+y[14],j[15]=Ce*gt+Ve*At+st*Bt+y[15]),j}function Vc(j,y,$){var ee=$[0],he=$[1],Ee=$[2];return j[0]=y[0]*ee,j[1]=y[1]*ee,j[2]=y[2]*ee,j[3]=y[3]*ee,j[4]=y[4]*he,j[5]=y[5]*he,j[6]=y[6]*he,j[7]=y[7]*he,j[8]=y[8]*Ee,j[9]=y[9]*Ee,j[10]=y[10]*Ee,j[11]=y[11]*Ee,j[12]=y[12],j[13]=y[13],j[14]=y[14],j[15]=y[15],j}function tp(j,y,$){var ee=Math.sin($),he=Math.cos($),Ee=y[4],Ce=y[5],Pe=y[6],$e=y[7],De=y[8],Ve=y[9],Ze=y[10],Xe=y[11];return y!==j&&(j[0]=y[0],j[1]=y[1],j[2]=y[2],j[3]=y[3],j[12]=y[12],j[13]=y[13],j[14]=y[14],j[15]=y[15]),j[4]=Ee*he+De*ee,j[5]=Ce*he+Ve*ee,j[6]=Pe*he+Ze*ee,j[7]=$e*he+Xe*ee,j[8]=De*he-Ee*ee,j[9]=Ve*he-Ce*ee,j[10]=Ze*he-Pe*ee,j[11]=Xe*he-$e*ee,j}function gd(j,y,$){var ee=Math.sin($),he=Math.cos($),Ee=y[0],Ce=y[1],Pe=y[2],$e=y[3],De=y[8],Ve=y[9],Ze=y[10],Xe=y[11];return y!==j&&(j[4]=y[4],j[5]=y[5],j[6]=y[6],j[7]=y[7],j[12]=y[12],j[13]=y[13],j[14]=y[14],j[15]=y[15]),j[0]=Ee*he-De*ee,j[1]=Ce*he-Ve*ee,j[2]=Pe*he-Ze*ee,j[3]=$e*he-Xe*ee,j[8]=Ee*ee+De*he,j[9]=Ce*ee+Ve*he,j[10]=Pe*ee+Ze*he,j[11]=$e*ee+Xe*he,j}function Yp(j,y){return j[0]=y[0],j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=y[1],j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=y[2],j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j}function Jp(j,y,$){var ee,he,Ee,Ce=$[0],Pe=$[1],$e=$[2],De=Math.hypot(Ce,Pe,$e);return De<md?null:(Ce*=De=1/De,Pe*=De,$e*=De,ee=Math.sin(y),he=Math.cos(y),j[0]=Ce*Ce*(Ee=1-he)+he,j[1]=Pe*Ce*Ee+$e*ee,j[2]=$e*Ce*Ee-Pe*ee,j[3]=0,j[4]=Ce*Pe*Ee-$e*ee,j[5]=Pe*Pe*Ee+he,j[6]=$e*Pe*Ee+Ce*ee,j[7]=0,j[8]=Ce*$e*Ee+Pe*ee,j[9]=Pe*$e*Ee-Ce*ee,j[10]=$e*$e*Ee+he,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j)}Math.hypot||(Math.hypot=function(){for(var j=0,y=arguments.length;y--;)j+=arguments[y]*arguments[y];return Math.sqrt(j)});var tm=zu;function np(){var j=new Wo(3);return Wo!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0),j}function Qp(j){var y=new Wo(3);return y[0]=j[0],y[1]=j[1],y[2]=j[2],y}function xh(j){return Math.hypot(j[0],j[1],j[2])}function Du(j,y,$){var ee=new Wo(3);return ee[0]=j,ee[1]=y,ee[2]=$,ee}function Xl(j,y,$){return j[0]=y[0]+$[0],j[1]=y[1]+$[1],j[2]=y[2]+$[2],j}function rp(j,y,$){return j[0]=y[0]-$[0],j[1]=y[1]-$[1],j[2]=y[2]-$[2],j}function ef(j,y,$){return j[0]=y[0]*$[0],j[1]=y[1]*$[1],j[2]=y[2]*$[2],j}function ip(j,y,$){return j[0]=Math.min(y[0],$[0]),j[1]=Math.min(y[1],$[1]),j[2]=Math.min(y[2],$[2]),j}function op(j,y,$){return j[0]=Math.max(y[0],$[0]),j[1]=Math.max(y[1],$[1]),j[2]=Math.max(y[2],$[2]),j}function Va(j,y,$){return j[0]=y[0]*$,j[1]=y[1]*$,j[2]=y[2]*$,j}function yd(j,y,$,ee){return j[0]=y[0]+$[0]*ee,j[1]=y[1]+$[1]*ee,j[2]=y[2]+$[2]*ee,j}function ko(j,y){var $=y[0],ee=y[1],he=y[2],Ee=$*$+ee*ee+he*he;return Ee>0&&(Ee=1/Math.sqrt(Ee)),j[0]=y[0]*Ee,j[1]=y[1]*Ee,j[2]=y[2]*Ee,j}function ba(j,y){return j[0]*y[0]+j[1]*y[1]+j[2]*y[2]}function ap(j,y,$){var ee=y[0],he=y[1],Ee=y[2],Ce=$[0],Pe=$[1],$e=$[2];return j[0]=he*$e-Ee*Pe,j[1]=Ee*Ce-ee*$e,j[2]=ee*Pe-he*Ce,j}function Wi(j,y,$){var ee=y[0],he=y[1],Ee=y[2],Ce=$[3]*ee+$[7]*he+$[11]*Ee+$[15];return j[0]=($[0]*ee+$[4]*he+$[8]*Ee+$[12])/(Ce=Ce||1),j[1]=($[1]*ee+$[5]*he+$[9]*Ee+$[13])/Ce,j[2]=($[2]*ee+$[6]*he+$[10]*Ee+$[14])/Ce,j}function tf(j,y,$){var ee=$[0],he=$[1],Ee=$[2],Ce=y[0],Pe=y[1],$e=y[2],De=he*$e-Ee*Pe,Ve=Ee*Ce-ee*$e,Ze=ee*Pe-he*Ce,Xe=he*Ze-Ee*Ve,rt=Ee*De-ee*Ze,st=ee*Ve-he*De,gt=2*$[3];return Ve*=gt,Ze*=gt,rt*=2,st*=2,j[0]=Ce+(De*=gt)+(Xe*=2),j[1]=Pe+Ve+rt,j[2]=$e+Ze+st,j}var bh,Ga=rp,nm=ef,rm=xh;function nf(j,y,$){return j[0]=y[0]*$,j[1]=y[1]*$,j[2]=y[2]*$,j[3]=y[3]*$,j}function Gc(j,y,$){var ee=y[0],he=y[1],Ee=y[2],Ce=y[3];return j[0]=$[0]*ee+$[4]*he+$[8]*Ee+$[12]*Ce,j[1]=$[1]*ee+$[5]*he+$[9]*Ee+$[13]*Ce,j[2]=$[2]*ee+$[6]*he+$[10]*Ee+$[14]*Ce,j[3]=$[3]*ee+$[7]*he+$[11]*Ee+$[15]*Ce,j}function rf(){var j=new Wo(4);return Wo!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0),j[3]=1,j}function of(j){return j[0]=0,j[1]=0,j[2]=0,j[3]=1,j}function af(j,y,$){$*=.5;var ee=y[0],he=y[1],Ee=y[2],Ce=y[3],Pe=Math.sin($),$e=Math.cos($);return j[0]=ee*$e+Ce*Pe,j[1]=he*$e+Ee*Pe,j[2]=Ee*$e-he*Pe,j[3]=Ce*$e-ee*Pe,j}function sf(j,y,$){$*=.5;var ee=y[0],he=y[1],Ee=y[2],Ce=y[3],Pe=Math.sin($),$e=Math.cos($);return j[0]=ee*$e-Ee*Pe,j[1]=he*$e+Ce*Pe,j[2]=Ee*$e+ee*Pe,j[3]=Ce*$e-he*Pe,j}np(),bh=new Wo(4),Wo!=Float32Array&&(bh[0]=0,bh[1]=0,bh[2]=0,bh[3]=0),np(),Du(1,0,0),Du(0,1,0),rf(),rf(),Kp();class sp{constructor(y,$){this.pos=y,this.dir=$}intersectsPlane(y,$,ee){const he=ba($,this.dir);if(Math.abs(he)<1e-6)return!1;const Ee=((y[0]-this.pos[0])*$[0]+(y[1]-this.pos[1])*$[1]+(y[2]-this.pos[2])*$[2])/he;return ee[0]=this.pos[0]+this.dir[0]*Ee,ee[1]=this.pos[1]+this.dir[1]*Ee,ee[2]=this.pos[2]+this.dir[2]*Ee,!0}closestPointOnSphere(y,$,ee){if(function(rt,st){var gt=rt[0],At=rt[1],Bt=rt[2],qt=st[0],Ft=st[1],Ht=st[2];return Math.abs(gt-qt)<=md*Math.max(1,Math.abs(gt),Math.abs(qt))&&Math.abs(At-Ft)<=md*Math.max(1,Math.abs(At),Math.abs(Ft))&&Math.abs(Bt-Ht)<=md*Math.max(1,Math.abs(Bt),Math.abs(Ht))}(this.pos,y)||$===0)return ee[0]=ee[1]=ee[2]=0,!1;const[he,Ee,Ce]=this.dir,Pe=this.pos[0]-y[0],$e=this.pos[1]-y[1],De=this.pos[2]-y[2],Ve=he*he+Ee*Ee+Ce*Ce,Ze=2*(Pe*he+$e*Ee+De*Ce),Xe=Ze*Ze-4*Ve*(Pe*Pe+$e*$e+De*De-$*$);if(Xe<0){const rt=Math.max(-Ze/2,0),st=Pe+he*rt,gt=$e+Ee*rt,At=De+Ce*rt,Bt=Math.hypot(st,gt,At);return ee[0]=st*$/Bt,ee[1]=gt*$/Bt,ee[2]=At*$/Bt,!1}{const rt=(-Ze-Math.sqrt(Xe))/(2*Ve);if(rt<0){const st=Math.hypot(Pe,$e,De);return ee[0]=Pe*$/st,ee[1]=$e*$/st,ee[2]=De*$/st,!1}return ee[0]=Pe+he*rt,ee[1]=$e+Ee*rt,ee[2]=De+Ce*rt,!0}}}class lp{constructor(y,$,ee,he,Ee){this.TL=y,this.TR=$,this.BR=ee,this.BL=he,this.horizon=Ee}static fromInvProjectionMatrix(y,$,ee){const he=[-1,1,1],Ee=[1,1,1],Ce=[1,-1,1],Pe=[-1,-1,1],$e=Wi(he,he,y),De=Wi(Ee,Ee,y),Ve=Wi(Ce,Ce,y),Ze=Wi(Pe,Pe,y);return new lp($e,De,Ve,Ze,$/ee)}}class cp{constructor(y,$){this.points=y,this.planes=$}static fromInvProjectionMatrix(y,$,ee,he){const Ee=Math.pow(2,ee),Ce=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($e=>{const De=Gc([],$e,y),Ve=1/De[3]/$*Ee;return function(Ze,Xe,rt){return Ze[0]=Xe[0]*rt[0],Ze[1]=Xe[1]*rt[1],Ze[2]=Xe[2]*rt[2],Ze[3]=Xe[3]*rt[3],Ze}(De,De,[Ve,Ve,he?1/De[3]:Ve,Ve])}),Pe=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map($e=>{const De=ko([],ap([],Ga([],Ce[$e[0]],Ce[$e[1]]),Ga([],Ce[$e[2]],Ce[$e[1]]))),Ve=-ba(De,Ce[$e[1]]);return De.concat(Ve)});return new cp(Ce,Pe)}}class Lo{static fromPoints(y){const $=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],ee=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const he of y)$[0]=Math.min($[0],he[0]),$[1]=Math.min($[1],he[1]),$[2]=Math.min($[2],he[2]),ee[0]=Math.max(ee[0],he[0]),ee[1]=Math.max(ee[1],he[1]),ee[2]=Math.max(ee[2],he[2]);return new Lo($,ee)}constructor(y,$){this.min=y,this.max=$,this.center=Va([],Xl([],this.min,this.max),.5)}quadrant(y){const $=[y%2==0,y<2],ee=Qp(this.min),he=Qp(this.max);for(let Ee=0;Ee<$.length;Ee++)ee[Ee]=$[Ee]?this.min[Ee]:this.center[Ee],he[Ee]=$[Ee]?this.center[Ee]:this.max[Ee];return he[2]=this.max[2],new Lo(ee,he)}distanceX(y){return Math.max(Math.min(this.max[0],y[0]),this.min[0])-y[0]}distanceY(y){return Math.max(Math.min(this.max[1],y[1]),this.min[1])-y[1]}distanceZ(y){return Math.max(Math.min(this.max[2],y[2]),this.min[2])-y[2]}getCorners(){const y=this.min,$=this.max;return[[y[0],y[1],y[2]],[$[0],y[1],y[2]],[$[0],$[1],y[2]],[y[0],$[1],y[2]],[y[0],y[1],$[2]],[$[0],y[1],$[2]],[$[0],$[1],$[2]],[y[0],$[1],$[2]]]}intersects(y){const $=this.getCorners();let ee=!0;for(let he=0;he<y.planes.length;he++){const Ee=y.planes[he];let Ce=0;for(let Pe=0;Pe<$.length;Pe++)Ce+=ba(Ee,$[Pe])+Ee[3]>=0;if(Ce===0)return 0;Ce!==$.length&&(ee=!1)}if(ee)return 2;for(let he=0;he<3;he++){let Ee=Number.MAX_VALUE,Ce=-Number.MAX_VALUE;for(let Pe=0;Pe<y.points.length;Pe++){const $e=y.points[Pe][he]-this.min[he];Ee=Math.min(Ee,$e),Ce=Math.max(Ce,$e)}if(Ce<0||Ee>this.max[he]-this.min[he])return 0}return 1}}function lf(j,y,$,ee,he,Ee,Ce,Pe,$e){if(Ee&&j.queryGeometry.isAboveHorizon)return!1;Ee&&($e*=j.pixelToTileUnitsFactor);const De=j.tileID.canonical,Ve=$.projection.upVectorScale(De,$.center.lat,$.worldSize).metersToTile;for(const Ze of y)for(const Xe of Ze){const rt=Xe.add(Pe),st=he&&$.elevation?$.elevation.exaggeration()*he.getElevationAt(rt.x,rt.y,!0):0,gt=$.projection.projectTilePoint(rt.x,rt.y,De);if(st>0){const Ft=$.projection.upVector(De,rt.x,rt.y);gt.x+=Ft[0]*Ve*st,gt.y+=Ft[1]*Ve*st,gt.z+=Ft[2]*Ve*st}const At=Ee?rt:im(gt.x,gt.y,gt.z,ee),Bt=Ee?j.tilespaceRays.map(Ft=>am(Ft,st)):j.queryGeometry.screenGeometry,qt=Gc([],[gt.x,gt.y,gt.z,1],ee);if(!Ce&&Ee?$e*=qt[3]/$.cameraToCenterDistance:Ce&&!Ee&&($e*=$.cameraToCenterDistance/qt[3]),Ee){const Ft=Yi((Xe.y/Tr+De.y)/(1<<De.z));$e/=$.projection.pixelsPerMeter(Ft,1)/Do(1,Ft)}if(Pn(Bt,At,$e))return!0}return!1}function im(j,y,$,ee){const he=Gc([],[j,y,$,1],ee);return new ye(he[0]/he[3],he[1]/he[3])}const cf=Du(0,0,0),om=Du(0,0,1);function am(j,y){const $=np();return cf[2]=y,j.intersectsPlane(cf,om,$),new ye($[0],$[1])}class uf extends jt{}function hf(j,{width:y,height:$},ee,he){if(he){if(he instanceof Uint8ClampedArray)he=new Uint8Array(he.buffer);else if(he.length!==y*$*ee)throw new RangeError("mismatched image size")}else he=new Uint8Array(y*$*ee);return j.width=y,j.height=$,j.data=he,j}function df(j,y,$){const{width:ee,height:he}=y;ee===j.width&&he===j.height||(up(j,y,{x:0,y:0},{x:0,y:0},{width:Math.min(j.width,ee),height:Math.min(j.height,he)},$),j.width=ee,j.height=he,j.data=y.data)}function up(j,y,$,ee,he,Ee){if(he.width===0||he.height===0)return y;if(he.width>j.width||he.height>j.height||$.x>j.width-he.width||$.y>j.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>y.width||he.height>y.height||ee.x>y.width-he.width||ee.y>y.height-he.height)throw new RangeError("out of range destination coordinates for image copy");const Ce=j.data,Pe=y.data;for(let $e=0;$e<he.height;$e++){const De=(($.y+$e)*j.width+$.x)*Ee,Ve=((ee.y+$e)*y.width+ee.x)*Ee;for(let Ze=0;Ze<he.width*Ee;Ze++)Pe[Ve+Ze]=Ce[De+Ze]}return y}cr(uf,"HeatmapBucket",{omit:["layers"]});class al{constructor(y,$){hf(this,y,1,$)}resize(y){df(this,new al(y),1)}clone(){return new al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,$,ee,he,Ee){up(y,$,ee,he,Ee,1)}}class Zo{constructor(y,$){hf(this,y,4,$)}resize(y){df(this,new Zo(y),4)}replace(y,$){$?this.data.set(y):this.data=y instanceof Uint8ClampedArray?new Uint8Array(y.buffer):y}clone(){return new Zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,$,ee,he,Ee){up(y,$,ee,he,Ee,4)}}cr(al,"AlphaImage"),cr(Zo,"RGBAImage");var sm={paint:new Rn({"heatmap-radius":new sn(mn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new sn(mn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Wt(mn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new dn(mn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Wt(mn.paint_heatmap["heatmap-opacity"])})};function hp(j){const y={},$=j.resolution||256,ee=j.clips?j.clips.length:1,he=j.image||new Zo({width:$,height:ee}),Ee=(Ce,Pe,$e)=>{y[j.evaluationKey]=$e;const De=j.expression.evaluate(y);he.data[Ce+Pe+0]=Math.floor(255*De.r/De.a),he.data[Ce+Pe+1]=Math.floor(255*De.g/De.a),he.data[Ce+Pe+2]=Math.floor(255*De.b/De.a),he.data[Ce+Pe+3]=Math.floor(255*De.a)};if(j.clips)for(let Ce=0,Pe=0;Ce<ee;++Ce,Pe+=4*$)for(let $e=0,De=0;$e<$;$e++,De+=4){const Ve=$e/($-1),{start:Ze,end:Xe}=j.clips[Ce];Ee(Pe,De,Ze*(1-Ve)+Xe*Ve)}else for(let Ce=0,Pe=0;Ce<$;Ce++,Pe+=4)Ee(0,Pe,Ce/($-1));return he}var lm={paint:new Rn({"hillshade-illumination-direction":new Wt(mn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Wt(mn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Wt(mn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Wt(mn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Wt(mn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Wt(mn.paint_hillshade["hillshade-accent-color"])})};const cm=Dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:um}=cm;var vd=xd,hm=xd;function xd(j,y,$){$=$||2;var ee,he,Ee,Ce,Pe,$e,De,Ve=y&&y.length,Ze=Ve?y[0]*$:j.length,Xe=pf(j,0,Ze,$,!0),rt=[];if(!Xe||Xe.next===Xe.prev)return rt;if(Ve&&(Xe=function(gt,At,Bt,qt){var Ft,Ht,en,Zt=[];for(Ft=0,Ht=At.length;Ft<Ht;Ft++)(en=pf(gt,At[Ft]*qt,Ft<Ht-1?At[Ft+1]*qt:gt.length,qt,!1))===en.next&&(en.steiner=!0),Zt.push(vm(en));for(Zt.sort(mm),Ft=0;Ft<Zt.length;Ft++)Bt=gm(Zt[Ft],Bt);return Bt}(j,y,Xe,$)),j.length>80*$){ee=Ee=j[0],he=Ce=j[1];for(var st=$;st<Ze;st+=$)(Pe=j[st])<ee&&(ee=Pe),($e=j[st+1])<he&&(he=$e),Pe>Ee&&(Ee=Pe),$e>Ce&&(Ce=$e);De=(De=Math.max(Ee-ee,Ce-he))!==0?32767/De:0}return wh(Xe,rt,$,ee,he,De,0),rt}function pf(j,y,$,ee,he){var Ee,Ce;if(he===fp(j,y,$,ee)>0)for(Ee=y;Ee<$;Ee+=ee)Ce=mf(Ee,j[Ee],j[Ee+1],Ce);else for(Ee=$-ee;Ee>=y;Ee-=ee)Ce=mf(Ee,j[Ee],j[Ee+1],Ce);return Ce&&bd(Ce,Ce.next)&&(Ah(Ce),Ce=Ce.next),Ce}function Hc(j,y){if(!j)return j;y||(y=j);var $,ee=j;do if($=!1,ee.steiner||!bd(ee,ee.next)&&Ni(ee.prev,ee,ee.next)!==0)ee=ee.next;else{if(Ah(ee),(ee=y=ee.prev)===ee.next)break;$=!0}while($||ee!==y);return y}function wh(j,y,$,ee,he,Ee,Ce){if(j){!Ce&&Ee&&function(Ve,Ze,Xe,rt){var st=Ve;do st.z===0&&(st.z=dp(st.x,st.y,Ze,Xe,rt)),st.prevZ=st.prev,st.nextZ=st.next,st=st.next;while(st!==Ve);st.prevZ.nextZ=null,st.prevZ=null,function(gt){var At,Bt,qt,Ft,Ht,en,Zt,An,bn=1;do{for(Bt=gt,gt=null,Ht=null,en=0;Bt;){for(en++,qt=Bt,Zt=0,At=0;At<bn&&(Zt++,qt=qt.nextZ);At++);for(An=bn;Zt>0||An>0&&qt;)Zt!==0&&(An===0||!qt||Bt.z<=qt.z)?(Ft=Bt,Bt=Bt.nextZ,Zt--):(Ft=qt,qt=qt.nextZ,An--),Ht?Ht.nextZ=Ft:gt=Ft,Ft.prevZ=Ht,Ht=Ft;Bt=qt}Ht.nextZ=null,bn*=2}while(en>1)}(st)}(j,ee,he,Ee);for(var Pe,$e,De=j;j.prev!==j.next;)if(Pe=j.prev,$e=j.next,Ee?pm(j,ee,he,Ee):dm(j))y.push(Pe.i/$|0),y.push(j.i/$|0),y.push($e.i/$|0),Ah(j),j=$e.next,De=$e.next;else if((j=$e)===De){Ce?Ce===1?wh(j=fm(Hc(j),y,$),y,$,ee,he,Ee,2):Ce===2&&_m(j,y,$,ee,he,Ee):wh(Hc(j),y,$,ee,he,Ee,1);break}}}function dm(j){var y=j.prev,$=j,ee=j.next;if(Ni(y,$,ee)>=0)return!1;for(var he=y.x,Ee=$.x,Ce=ee.x,Pe=y.y,$e=$.y,De=ee.y,Ve=he<Ee?he<Ce?he:Ce:Ee<Ce?Ee:Ce,Ze=Pe<$e?Pe<De?Pe:De:$e<De?$e:De,Xe=he>Ee?he>Ce?he:Ce:Ee>Ce?Ee:Ce,rt=Pe>$e?Pe>De?Pe:De:$e>De?$e:De,st=ee.next;st!==y;){if(st.x>=Ve&&st.x<=Xe&&st.y>=Ze&&st.y<=rt&&Lu(he,Pe,Ee,$e,Ce,De,st.x,st.y)&&Ni(st.prev,st,st.next)>=0)return!1;st=st.next}return!0}function pm(j,y,$,ee){var he=j.prev,Ee=j,Ce=j.next;if(Ni(he,Ee,Ce)>=0)return!1;for(var Pe=he.x,$e=Ee.x,De=Ce.x,Ve=he.y,Ze=Ee.y,Xe=Ce.y,rt=Pe<$e?Pe<De?Pe:De:$e<De?$e:De,st=Ve<Ze?Ve<Xe?Ve:Xe:Ze<Xe?Ze:Xe,gt=Pe>$e?Pe>De?Pe:De:$e>De?$e:De,At=Ve>Ze?Ve>Xe?Ve:Xe:Ze>Xe?Ze:Xe,Bt=dp(rt,st,y,$,ee),qt=dp(gt,At,y,$,ee),Ft=j.prevZ,Ht=j.nextZ;Ft&&Ft.z>=Bt&&Ht&&Ht.z<=qt;){if(Ft.x>=rt&&Ft.x<=gt&&Ft.y>=st&&Ft.y<=At&&Ft!==he&&Ft!==Ce&&Lu(Pe,Ve,$e,Ze,De,Xe,Ft.x,Ft.y)&&Ni(Ft.prev,Ft,Ft.next)>=0||(Ft=Ft.prevZ,Ht.x>=rt&&Ht.x<=gt&&Ht.y>=st&&Ht.y<=At&&Ht!==he&&Ht!==Ce&&Lu(Pe,Ve,$e,Ze,De,Xe,Ht.x,Ht.y)&&Ni(Ht.prev,Ht,Ht.next)>=0))return!1;Ht=Ht.nextZ}for(;Ft&&Ft.z>=Bt;){if(Ft.x>=rt&&Ft.x<=gt&&Ft.y>=st&&Ft.y<=At&&Ft!==he&&Ft!==Ce&&Lu(Pe,Ve,$e,Ze,De,Xe,Ft.x,Ft.y)&&Ni(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.prevZ}for(;Ht&&Ht.z<=qt;){if(Ht.x>=rt&&Ht.x<=gt&&Ht.y>=st&&Ht.y<=At&&Ht!==he&&Ht!==Ce&&Lu(Pe,Ve,$e,Ze,De,Xe,Ht.x,Ht.y)&&Ni(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.nextZ}return!0}function fm(j,y,$){var ee=j;do{var he=ee.prev,Ee=ee.next.next;!bd(he,Ee)&&ff(he,ee,ee.next,Ee)&&Eh(he,Ee)&&Eh(Ee,he)&&(y.push(he.i/$|0),y.push(ee.i/$|0),y.push(Ee.i/$|0),Ah(ee),Ah(ee.next),ee=j=Ee),ee=ee.next}while(ee!==j);return Hc(ee)}function _m(j,y,$,ee,he,Ee){var Ce=j;do{for(var Pe=Ce.next.next;Pe!==Ce.prev;){if(Ce.i!==Pe.i&&xm(Ce,Pe)){var $e=_f(Ce,Pe);return Ce=Hc(Ce,Ce.next),$e=Hc($e,$e.next),wh(Ce,y,$,ee,he,Ee,0),void wh($e,y,$,ee,he,Ee,0)}Pe=Pe.next}Ce=Ce.next}while(Ce!==j)}function mm(j,y){return j.x-y.x}function gm(j,y){var $=function(he,Ee){var Ce,Pe=Ee,$e=he.x,De=he.y,Ve=-1/0;do{if(De<=Pe.y&&De>=Pe.next.y&&Pe.next.y!==Pe.y){var Ze=Pe.x+(De-Pe.y)*(Pe.next.x-Pe.x)/(Pe.next.y-Pe.y);if(Ze<=$e&&Ze>Ve&&(Ve=Ze,Ce=Pe.x<Pe.next.x?Pe:Pe.next,Ze===$e))return Ce}Pe=Pe.next}while(Pe!==Ee);if(!Ce)return null;var Xe,rt=Ce,st=Ce.x,gt=Ce.y,At=1/0;Pe=Ce;do $e>=Pe.x&&Pe.x>=st&&$e!==Pe.x&&Lu(De<gt?$e:Ve,De,st,gt,De<gt?Ve:$e,De,Pe.x,Pe.y)&&(Xe=Math.abs(De-Pe.y)/($e-Pe.x),Eh(Pe,he)&&(Xe<At||Xe===At&&(Pe.x>Ce.x||Pe.x===Ce.x&&ym(Ce,Pe)))&&(Ce=Pe,At=Xe)),Pe=Pe.next;while(Pe!==rt);return Ce}(j,y);if(!$)return y;var ee=_f($,j);return Hc(ee,ee.next),Hc($,$.next)}function ym(j,y){return Ni(j.prev,j,y.prev)<0&&Ni(y.next,j,j.next)<0}function dp(j,y,$,ee,he){return(j=1431655765&((j=858993459&((j=252645135&((j=16711935&((j=(j-$)*he|0)|j<<8))|j<<4))|j<<2))|j<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-ee)*he|0)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function vm(j){var y=j,$=j;do(y.x<$.x||y.x===$.x&&y.y<$.y)&&($=y),y=y.next;while(y!==j);return $}function Lu(j,y,$,ee,he,Ee,Ce,Pe){return(he-Ce)*(y-Pe)>=(j-Ce)*(Ee-Pe)&&(j-Ce)*(ee-Pe)>=($-Ce)*(y-Pe)&&($-Ce)*(Ee-Pe)>=(he-Ce)*(ee-Pe)}function xm(j,y){return j.next.i!==y.i&&j.prev.i!==y.i&&!function($,ee){var he=$;do{if(he.i!==$.i&&he.next.i!==$.i&&he.i!==ee.i&&he.next.i!==ee.i&&ff(he,he.next,$,ee))return!0;he=he.next}while(he!==$);return!1}(j,y)&&(Eh(j,y)&&Eh(y,j)&&function($,ee){var he=$,Ee=!1,Ce=($.x+ee.x)/2,Pe=($.y+ee.y)/2;do he.y>Pe!=he.next.y>Pe&&he.next.y!==he.y&&Ce<(he.next.x-he.x)*(Pe-he.y)/(he.next.y-he.y)+he.x&&(Ee=!Ee),he=he.next;while(he!==$);return Ee}(j,y)&&(Ni(j.prev,j,y.prev)||Ni(j,y.prev,y))||bd(j,y)&&Ni(j.prev,j,j.next)>0&&Ni(y.prev,y,y.next)>0)}function Ni(j,y,$){return(y.y-j.y)*($.x-y.x)-(y.x-j.x)*($.y-y.y)}function bd(j,y){return j.x===y.x&&j.y===y.y}function ff(j,y,$,ee){var he=Ed(Ni(j,y,$)),Ee=Ed(Ni(j,y,ee)),Ce=Ed(Ni($,ee,j)),Pe=Ed(Ni($,ee,y));return he!==Ee&&Ce!==Pe||!(he!==0||!wd(j,$,y))||!(Ee!==0||!wd(j,ee,y))||!(Ce!==0||!wd($,j,ee))||!(Pe!==0||!wd($,y,ee))}function wd(j,y,$){return y.x<=Math.max(j.x,$.x)&&y.x>=Math.min(j.x,$.x)&&y.y<=Math.max(j.y,$.y)&&y.y>=Math.min(j.y,$.y)}function Ed(j){return j>0?1:j<0?-1:0}function Eh(j,y){return Ni(j.prev,j,j.next)<0?Ni(j,y,j.next)>=0&&Ni(j,j.prev,y)>=0:Ni(j,y,j.prev)<0||Ni(j,j.next,y)<0}function _f(j,y){var $=new pp(j.i,j.x,j.y),ee=new pp(y.i,y.x,y.y),he=j.next,Ee=y.prev;return j.next=y,y.prev=j,$.next=he,he.prev=$,ee.next=$,$.prev=ee,Ee.next=ee,ee.prev=Ee,ee}function mf(j,y,$,ee){var he=new pp(j,y,$);return ee?(he.next=ee.next,he.prev=ee,ee.next.prev=he,ee.next=he):(he.prev=he,he.next=he),he}function Ah(j){j.next.prev=j.prev,j.prev.next=j.next,j.prevZ&&(j.prevZ.nextZ=j.nextZ),j.nextZ&&(j.nextZ.prevZ=j.prevZ)}function pp(j,y,$){this.i=j,this.x=y,this.y=$,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fp(j,y,$,ee){for(var he=0,Ee=y,Ce=$-ee;Ee<$;Ee+=ee)he+=(j[Ce]-j[Ee])*(j[Ee+1]+j[Ce+1]),Ce=Ee;return he}function bm(j,y,$,ee,he){gf(j,y,$||0,ee||j.length-1,he||wm)}function gf(j,y,$,ee,he){for(;ee>$;){if(ee-$>600){var Ee=ee-$+1,Ce=y-$+1,Pe=Math.log(Ee),$e=.5*Math.exp(2*Pe/3),De=.5*Math.sqrt(Pe*$e*(Ee-$e)/Ee)*(Ce-Ee/2<0?-1:1);gf(j,y,Math.max($,Math.floor(y-Ce*$e/Ee+De)),Math.min(ee,Math.floor(y+(Ee-Ce)*$e/Ee+De)),he)}var Ve=j[y],Ze=$,Xe=ee;for(Th(j,$,y),he(j[ee],Ve)>0&&Th(j,$,ee);Ze<Xe;){for(Th(j,Ze,Xe),Ze++,Xe--;he(j[Ze],Ve)<0;)Ze++;for(;he(j[Xe],Ve)>0;)Xe--}he(j[$],Ve)===0?Th(j,$,Xe):Th(j,++Xe,ee),Xe<=y&&($=Xe+1),y<=Xe&&(ee=Xe-1)}}function Th(j,y,$){var ee=j[y];j[y]=j[$],j[$]=ee}function wm(j,y){return j<y?-1:j>y?1:0}function _p(j,y){const $=j.length;if($<=1)return[j];const ee=[];let he,Ee;for(let Ce=0;Ce<$;Ce++){const Pe=Tn(j[Ce]);Pe!==0&&(j[Ce].area=Math.abs(Pe),Ee===void 0&&(Ee=Pe<0),Ee===Pe<0?(he&&ee.push(he),he=[j[Ce]]):he.push(j[Ce]))}if(he&&ee.push(he),y>1)for(let Ce=0;Ce<ee.length;Ce++)ee[Ce].length<=y||(bm(ee[Ce],y,1,ee[Ce].length-1,Em),ee[Ce]=ee[Ce].slice(0,y));return ee}function Em(j,y){return y.area-j.area}function mp(j,y,$){const ee=$.patternDependencies;let he=!1;for(const Ee of y){const Ce=Ee.paint.get(`${j}-pattern`);Ce.isConstant()||(he=!0);const Pe=Ce.constantOr(null);Pe&&(he=!0,ee[Pe.to]=!0,ee[Pe.from]=!0)}return he}function gp(j,y,$,ee,he){const Ee=he.patternDependencies;for(const Ce of y){const Pe=Ce.paint.get(`${j}-pattern`).value;if(Pe.kind!=="constant"){let $e=Pe.evaluate({zoom:ee-1},$,{},he.availableImages),De=Pe.evaluate({zoom:ee},$,{},he.availableImages),Ve=Pe.evaluate({zoom:ee+1},$,{},he.availableImages);$e=$e&&$e.name?$e.name:$e,De=De&&De.name?De.name:De,Ve=Ve&&Ve.name?Ve.name:Ve,Ee[$e]=!0,Ee[De]=!0,Ee[Ve]=!0,$.patterns[Ce.id]={min:$e,mid:De,max:Ve}}}return $}xd.deviation=function(j,y,$,ee){var he=y&&y.length,Ee=Math.abs(fp(j,0,he?y[0]*$:j.length,$));if(he)for(var Ce=0,Pe=y.length;Ce<Pe;Ce++)Ee-=Math.abs(fp(j,y[Ce]*$,Ce<Pe-1?y[Ce+1]*$:j.length,$));var $e=0;for(Ce=0;Ce<ee.length;Ce+=3){var De=ee[Ce]*$,Ve=ee[Ce+1]*$,Ze=ee[Ce+2]*$;$e+=Math.abs((j[De]-j[Ze])*(j[Ve+1]-j[De+1])-(j[De]-j[Ve])*(j[Ze+1]-j[De+1]))}return Ee===0&&$e===0?0:Math.abs(($e-Ee)/Ee)},xd.flatten=function(j){for(var y=j[0][0].length,$={vertices:[],holes:[],dimensions:y},ee=0,he=0;he<j.length;he++){for(var Ee=0;Ee<j[he].length;Ee++)for(var Ce=0;Ce<y;Ce++)$.vertices.push(j[he][Ee][Ce]);he>0&&$.holes.push(ee+=j[he-1].length)}return $},vd.default=hm;class Ad{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map($=>$.id),this.index=y.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new er,this.indexArray=new Rr,this.indexArray2=new eo,this.programConfigurations=new ol(y.layers,y.zoom),this.segments=new Li,this.segments2=new Li,this.stateDependentLayerIds=this.layers.filter($=>$.isStateDependent()).map($=>$.id),this.projection=y.projection}populate(y,$,ee,he){this.hasPattern=mp("fill",this.layers,$);const Ee=this.layers[0].layout.get("fill-sort-key"),Ce=[];for(const{feature:Pe,id:$e,index:De,sourceLayerIndex:Ve}of y){const Ze=this.layers[0]._featureFilter.needGeometry,Xe=Ge(Pe,Ze);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),Xe,ee))continue;const rt=Ee?Ee.evaluate(Xe,{},ee,$.availableImages):void 0,st={id:$e,properties:Pe.properties,type:Pe.type,sourceLayerIndex:Ve,index:De,geometry:Ze?Xe.geometry:wt(Pe,ee,he),patterns:{},sortKey:rt};Ce.push(st)}Ee&&Ce.sort((Pe,$e)=>Pe.sortKey-$e.sortKey);for(const Pe of Ce){const{geometry:$e,index:De,sourceLayerIndex:Ve}=Pe;if(this.hasPattern){const Ze=gp("fill",this.layers,Pe,this.zoom,$);this.patternFeatures.push(Ze)}else this.addFeature(Pe,$e,De,ee,{},$.availableImages);$.featureIndex.insert(y[De].feature,$e,De,Ve,this.index)}}update(y,$,ee,he){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,$,this.stateDependentLayers,ee,he)}addFeatures(y,$,ee,he,Ee){for(const Ce of this.patternFeatures)this.addFeature(Ce,Ce.geometry,Ce.index,$,ee,he)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,um),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.indexBuffer2=y.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(y,$,ee,he,Ee,Ce=[]){for(const Pe of _p($,500)){let $e=0;for(const st of Pe)$e+=st.length;const De=this.segments.prepareSegment($e,this.layoutVertexArray,this.indexArray),Ve=De.vertexLength,Ze=[],Xe=[];for(const st of Pe){if(st.length===0)continue;st!==Pe[0]&&Xe.push(Ze.length/2);const gt=this.segments2.prepareSegment(st.length,this.layoutVertexArray,this.indexArray2),At=gt.vertexLength;this.layoutVertexArray.emplaceBack(st[0].x,st[0].y),this.indexArray2.emplaceBack(At+st.length-1,At),Ze.push(st[0].x),Ze.push(st[0].y);for(let Bt=1;Bt<st.length;Bt++)this.layoutVertexArray.emplaceBack(st[Bt].x,st[Bt].y),this.indexArray2.emplaceBack(At+Bt-1,At+Bt),Ze.push(st[Bt].x),Ze.push(st[Bt].y);gt.vertexLength+=st.length,gt.primitiveLength+=st.length}const rt=vd(Ze,Xe);for(let st=0;st<rt.length;st+=3)this.indexArray.emplaceBack(Ve+rt[st],Ve+rt[st+1],Ve+rt[st+2]);De.vertexLength+=$e,De.primitiveLength+=rt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,Ee,Ce,he)}}cr(Ad,"FillBucket",{omit:["layers","patternFeatures"]});const Am=new Rn({"fill-sort-key":new sn(mn.layout_fill["fill-sort-key"])});var Tm={paint:new Rn({"fill-antialias":new Wt(mn.paint_fill["fill-antialias"]),"fill-opacity":new sn(mn.paint_fill["fill-opacity"]),"fill-color":new sn(mn.paint_fill["fill-color"]),"fill-outline-color":new sn(mn.paint_fill["fill-outline-color"]),"fill-translate":new Wt(mn.paint_fill["fill-translate"]),"fill-translate-anchor":new Wt(mn.paint_fill["fill-translate-anchor"]),"fill-pattern":new _n(mn.paint_fill["fill-pattern"])}),layout:Am};const km=Dn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Cm=Dn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Sm=Dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Pm}=km;var yf=Bu;function Bu(j,y,$,ee,he){this.properties={},this.extent=$,this.type=0,this._pbf=j,this._geometry=-1,this._keys=ee,this._values=he,j.readFields(Im,this,y)}function Im(j,y,$){j==1?y.id=$.readVarint():j==2?function(ee,he){for(var Ee=ee.readVarint()+ee.pos;ee.pos<Ee;){var Ce=he._keys[ee.readVarint()],Pe=he._values[ee.readVarint()];he.properties[Ce]=Pe}}($,y):j==3?y.type=$.readVarint():j==4&&(y._geometry=$.pos)}function Mm(j){for(var y,$,ee=0,he=0,Ee=j.length,Ce=Ee-1;he<Ee;Ce=he++)ee+=(($=j[Ce]).x-(y=j[he]).x)*(y.y+$.y);return ee}Bu.types=["Unknown","Point","LineString","Polygon"],Bu.prototype.loadGeometry=function(){var j=this._pbf;j.pos=this._geometry;for(var y,$=j.readVarint()+j.pos,ee=1,he=0,Ee=0,Ce=0,Pe=[];j.pos<$;){if(he<=0){var $e=j.readVarint();ee=7&$e,he=$e>>3}if(he--,ee===1||ee===2)Ee+=j.readSVarint(),Ce+=j.readSVarint(),ee===1&&(y&&Pe.push(y),y=[]),y.push(new ye(Ee,Ce));else{if(ee!==7)throw new Error("unknown command "+ee);y&&y.push(y[0].clone())}}return y&&Pe.push(y),Pe},Bu.prototype.bbox=function(){var j=this._pbf;j.pos=this._geometry;for(var y=j.readVarint()+j.pos,$=1,ee=0,he=0,Ee=0,Ce=1/0,Pe=-1/0,$e=1/0,De=-1/0;j.pos<y;){if(ee<=0){var Ve=j.readVarint();$=7&Ve,ee=Ve>>3}if(ee--,$===1||$===2)(he+=j.readSVarint())<Ce&&(Ce=he),he>Pe&&(Pe=he),(Ee+=j.readSVarint())<$e&&($e=Ee),Ee>De&&(De=Ee);else if($!==7)throw new Error("unknown command "+$)}return[Ce,$e,Pe,De]},Bu.prototype.toGeoJSON=function(j,y,$){var ee,he,Ee=this.extent*Math.pow(2,$),Ce=this.extent*j,Pe=this.extent*y,$e=this.loadGeometry(),De=Bu.types[this.type];function Ve(rt){for(var st=0;st<rt.length;st++){var gt=rt[st];rt[st]=[360*(gt.x+Ce)/Ee-180,360/Math.PI*Math.atan(Math.exp((180-360*(gt.y+Pe)/Ee)*Math.PI/180))-90]}}switch(this.type){case 1:var Ze=[];for(ee=0;ee<$e.length;ee++)Ze[ee]=$e[ee][0];Ve($e=Ze);break;case 2:for(ee=0;ee<$e.length;ee++)Ve($e[ee]);break;case 3:for($e=function(rt){var st=rt.length;if(st<=1)return[rt];for(var gt,At,Bt=[],qt=0;qt<st;qt++){var Ft=Mm(rt[qt]);Ft!==0&&(At===void 0&&(At=Ft<0),At===Ft<0?(gt&&Bt.push(gt),gt=[rt[qt]]):gt.push(rt[qt]))}return gt&&Bt.push(gt),Bt}($e),ee=0;ee<$e.length;ee++)for(he=0;he<$e[ee].length;he++)Ve($e[ee][he])}$e.length===1?$e=$e[0]:De="Multi"+De;var Xe={type:"Feature",geometry:{type:De,coordinates:$e},properties:this.properties};return"id"in this&&(Xe.id=this.id),Xe};var vf=xf;function xf(j,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=j,this._keys=[],this._values=[],this._features=[],j.readFields(Om,this,y),this.length=this._features.length}function Om(j,y,$){j===15?y.version=$.readVarint():j===1?y.name=$.readString():j===5?y.extent=$.readVarint():j===2?y._features.push($.pos):j===3?y._keys.push($.readString()):j===4&&y._values.push(function(ee){for(var he=null,Ee=ee.readVarint()+ee.pos;ee.pos<Ee;){var Ce=ee.readVarint()>>3;he=Ce===1?ee.readString():Ce===2?ee.readFloat():Ce===3?ee.readDouble():Ce===4?ee.readVarint64():Ce===5?ee.readVarint():Ce===6?ee.readSVarint():Ce===7?ee.readBoolean():null}return he}($))}function Rm(j,y,$){if(j===3){var ee=new vf($,$.readVarint()+$.pos);ee.length&&(y[ee.name]=ee)}}xf.prototype.feature=function(j){if(j<0||j>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[j];var y=this._pbf.readVarint()+this._pbf.pos;return new yf(this._pbf,y,this.extent,this._keys,this._values)};var qc={VectorTile:function(j,y){this.layers=j.readFields(Rm,{},y)},VectorTileFeature:yf,VectorTileLayer:vf};function Td(j,y,$,ee){const he=[],Ee=ee===0?(Ce,Pe,$e,De,Ve,Ze)=>{Ce.push(new ye(Ze,$e+(Ze-Pe)/(De-Pe)*(Ve-$e)))}:(Ce,Pe,$e,De,Ve,Ze)=>{Ce.push(new ye(Pe+(Ze-$e)/(Ve-$e)*(De-Pe),Ze))};for(const Ce of j){const Pe=[];for(const $e of Ce){if($e.length<=2)continue;const De=[];for(let Xe=0;Xe<$e.length-1;Xe++){const rt=$e[Xe].x,st=$e[Xe].y,gt=$e[Xe+1].x,At=$e[Xe+1].y,Bt=ee===0?rt:st,qt=ee===0?gt:At;Bt<y?qt>y&&Ee(De,rt,st,gt,At,y):Bt>$?qt<$&&Ee(De,rt,st,gt,At,$):De.push($e[Xe]),qt<y&&Bt>=y&&Ee(De,rt,st,gt,At,y),qt>$&&Bt<=$&&Ee(De,rt,st,gt,At,$)}let Ve=$e[$e.length-1];const Ze=ee===0?Ve.x:Ve.y;Ze>=y&&Ze<=$&&De.push(Ve),De.length&&(Ve=De[De.length-1],De[0].x===Ve.x&&De[0].y===Ve.y||De.push(De[0]),Pe.push(De))}Pe.length&&he.push(Pe)}return he}const $m=qc.VectorTileFeature.types,zm=Math.pow(2,13);function kh(j,y,$,ee,he,Ee,Ce,Pe){j.emplaceBack((y<<1)+Ce,($<<1)+Ee,(Math.floor(ee*zm)<<1)+he,Math.round(Pe))}function Ch(j,y,$){j.emplaceBack(y.x,y.y,y.z,$[0]*16384,$[1]*16384,$[2]*16384)}class bf{constructor(){this.acc=new ye(0,0),this.polyCount=[]}startRing(y){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ye(y.x,y.y),this.max=new ye(y.x,y.y))}append(y,$){this.currentPolyCount.edges++,this.acc._add(y);const ee=this.min,he=this.max;y.x<ee.x?ee.x=y.x:y.x>he.x&&(he.x=y.x),y.y<ee.y?ee.y=y.y:y.y>he.y&&(he.y=y.y),((y.x===0||y.x===Tr)&&y.x===$.x)!=((y.y===0||y.y===Tr)&&y.y===$.y)&&this.processBorderOverlap(y,$),$.x<0!=y.x<0&&this.addBorderIntersection(0,qr($.y,y.y,(0-$.x)/(y.x-$.x))),$.x>Tr!=y.x>Tr&&this.addBorderIntersection(1,qr($.y,y.y,(Tr-$.x)/(y.x-$.x))),$.y<0!=y.y<0&&this.addBorderIntersection(2,qr($.x,y.x,(0-$.y)/(y.y-$.y))),$.y>Tr!=y.y>Tr&&this.addBorderIntersection(3,qr($.x,y.x,(Tr-$.y)/(y.y-$.y)))}addBorderIntersection(y,$){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const ee=this.borders[y];$<ee[0]&&(ee[0]=$),$>ee[1]&&(ee[1]=$)}processBorderOverlap(y,$){if(y.x===$.x){if(y.y===$.y)return;const ee=y.x===0?0:1;this.addBorderIntersection(ee,$.y),this.addBorderIntersection(ee,y.y)}else{const ee=y.y===0?2:3;this.addBorderIntersection(ee,$.x),this.addBorderIntersection(ee,y.x)}}centroid(){const y=this.polyCount.reduce(($,ee)=>$+ee.edges,0);return y!==0?this.acc.div(y)._round():new ye(0,0)}span(){return new ye(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((y,$)=>y+ +($[0]!==Number.MAX_VALUE),0)}}class Sh{constructor(y){this.zoom=y.zoom,this.canonical=y.canonical,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map($=>$.id),this.index=y.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=y.projection,this.layoutVertexArray=new gr,this.centroidVertexArray=new Ao,this.indexArray=new Rr,this.programConfigurations=new ol(y.layers,y.zoom),this.segments=new Li,this.stateDependentLayerIds=this.layers.filter($=>$.isStateDependent()).map($=>$.id),this.enableTerrain=y.enableTerrain}populate(y,$,ee,he){this.features=[],this.hasPattern=mp("fill-extrusion",this.layers,$),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(Ee){const Ce=Math.exp(Math.PI*(1-Ee.y/(1<<Ee.z)*2));return 80150034*Ce/(Ce*Ce+1)/Tr/(1<<Ee.z)}(ee),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:Ee,id:Ce,index:Pe,sourceLayerIndex:$e}of y){const De=this.layers[0]._featureFilter.needGeometry,Ve=Ge(Ee,De);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),Ve,ee))continue;const Ze={id:Ce,sourceLayerIndex:$e,index:Pe,geometry:De?Ve.geometry:wt(Ee,ee,he),properties:Ee.properties,type:Ee.type,patterns:{}},Xe=this.layoutVertexArray.length;this.hasPattern?this.features.push(gp("fill-extrusion",this.layers,Ze,this.zoom,$)):this.addFeature(Ze,Ze.geometry,Pe,ee,{},$.availableImages,he),$.featureIndex.insert(Ee,Ze.geometry,Pe,$e,this.index,Xe)}this.sortBorders()}addFeatures(y,$,ee,he,Ee){for(const Ce of this.features){const{geometry:Pe}=Ce;this.addFeature(Ce,Pe,Ce.index,$,ee,he,Ee)}this.sortBorders()}update(y,$,ee,he){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,$,this.stateDependentLayers,ee,he)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Pm),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=y.createVertexBuffer(this.layoutVertexExtArray,Sm.members,!0))),this.programConfigurations.upload(y),this.uploaded=!0}uploadCentroid(y){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=y.createVertexBuffer(this.centroidVertexArray,Cm.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(y,$,ee,he,Ee,Ce,Pe){const $e=[new ye(0,0),new ye(Tr,Tr)],De=Pe.projection,Ve=De.name==="globe",Ze=this.enableTerrain&&!Ve?new bf:null,Xe=$m[y.type]==="Polygon";Ve&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new to);const rt=_p($,500);for(let Bt=rt.length-1;Bt>=0;Bt--){const qt=rt[Bt];(qt.length===0||(st=qt[0]).every(Ft=>Ft.x<=0)||st.every(Ft=>Ft.x>=Tr)||st.every(Ft=>Ft.y<=0)||st.every(Ft=>Ft.y>=Tr))&&rt.splice(Bt,1)}var st;let gt;if(Ve)gt=Sf(rt,$e,he);else{gt=[];for(const Bt of rt)gt.push({polygon:Bt,bounds:$e})}const At=Xe?this.edgeRadius:0;for(const{polygon:Bt,bounds:qt}of gt){let Ft=0,Ht=0;for(const Zt of Bt)Xe&&!Zt[0].equals(Zt[Zt.length-1])&&Zt.push(Zt[0]),Ht+=Xe?Zt.length-1:Zt.length;const en=this.segments.prepareSegment((Xe?5:4)*Ht,this.layoutVertexArray,this.indexArray);if(Xe){const Zt=[],An=[];Ft=en.vertexLength;for(const Mn of Bt){let Yn,Cn;Mn.length&&Mn!==Bt[0]&&An.push(Zt.length/2),Yn=Mn[1].sub(Mn[0])._perp()._unit();for(let Ln=1;Ln<Mn.length;Ln++){const Un=Mn[Ln],Bn=Mn[Ln===Mn.length-1?1:Ln+1];let{x:Zn,y:Vn}=Un;if(At){Cn=Bn.sub(Un)._perp()._unit();const or=Yn.add(Cn)._unit(),Or=At*Math.min(4,1/(Yn.x*or.x+Yn.y*or.y));Zn+=Or*or.x,Vn+=Or*or.y,Yn=Cn}kh(this.layoutVertexArray,Zn,Vn,0,0,1,1,0),en.vertexLength++,Zt.push(Un.x,Un.y),Ve&&Ch(this.layoutVertexExtArray,De.projectTilePoint(Zn,Vn,he),De.upVector(he,Zn,Vn))}}const bn=vd(Zt,An);for(let Mn=0;Mn<bn.length;Mn+=3)this.indexArray.emplaceBack(Ft+bn[Mn],Ft+bn[Mn+2],Ft+bn[Mn+1]),en.primitiveLength++}for(const Zt of Bt){Ze&&Zt.length&&Ze.startRing(Zt[0]);let An,bn,Mn,Yn=Zt.length>4&&Tf(Zt[Zt.length-2],Zt[0],Zt[1]),Cn=At?Dm(Zt[Zt.length-2],Zt[0],Zt[1],At):0;bn=Zt[1].sub(Zt[0])._perp()._unit();for(let Ln=1,Un=0;Ln<Zt.length;Ln++){let Bn=Zt[Ln-1],Zn=Zt[Ln];const Vn=Zt[Ln===Zt.length-1?1:Ln+1];if(Ze&&Xe&&Ze.currentPolyCount.top++,Af(Zn,Bn,qt)){At&&(bn=Vn.sub(Zn)._perp()._unit());continue}Ze&&Ze.append(Zn,Bn);const or=Zn.sub(Bn)._perp(),Or=or.x/(Math.abs(or.x)+Math.abs(or.y)),$r=or.y>0?1:0,yr=Bn.dist(Zn);if(Un+yr>32768&&(Un=0),At){Mn=Vn.sub(Zn)._perp()._unit();let hr=Ef(Bn,Zn,Vn,wf(bn,Mn),At);isNaN(hr)&&(hr=0);const mi=Zn.sub(Bn)._unit();Bn=Bn.add(mi.mult(Cn))._round(),Zn=Zn.add(mi.mult(-hr))._round(),Cn=hr,bn=Mn}const nr=en.vertexLength,Gr=Zt.length>4&&Tf(Bn,Zn,Vn);let Pr=kf(Un,Yn,!0);if(kh(this.layoutVertexArray,Bn.x,Bn.y,Or,$r,0,0,Pr),kh(this.layoutVertexArray,Bn.x,Bn.y,Or,$r,0,1,Pr),Un+=yr,Pr=kf(Un,Gr,!1),Yn=Gr,kh(this.layoutVertexArray,Zn.x,Zn.y,Or,$r,0,0,Pr),kh(this.layoutVertexArray,Zn.x,Zn.y,Or,$r,0,1,Pr),en.vertexLength+=4,this.indexArray.emplaceBack(nr+0,nr+1,nr+2),this.indexArray.emplaceBack(nr+1,nr+3,nr+2),en.primitiveLength+=2,At){const hr=Ft+(Ln===1?Zt.length-2:Ln-2),mi=Ln===1?Ft:hr+1;if(this.indexArray.emplaceBack(nr+1,hr,nr+3),this.indexArray.emplaceBack(hr,mi,nr+3),en.primitiveLength+=2,An===void 0&&(An=nr),!Af(Vn,Zt[Ln],qt)){const hi=Ln===Zt.length-1?An:en.vertexLength;this.indexArray.emplaceBack(nr+2,nr+3,hi),this.indexArray.emplaceBack(nr+3,hi+1,hi),this.indexArray.emplaceBack(nr+3,mi,hi+1),en.primitiveLength+=3}}if(Ve){const hr=this.layoutVertexExtArray,mi=De.projectTilePoint(Bn.x,Bn.y,he),hi=De.projectTilePoint(Zn.x,Zn.y,he),ki=De.upVector(he,Bn.x,Bn.y),Nr=De.upVector(he,Zn.x,Zn.y);Ch(hr,mi,ki),Ch(hr,mi,ki),Ch(hr,hi,Nr),Ch(hr,hi,Nr)}}Xe&&(Ft+=Zt.length-1)}}if(Ze&&Ze.polyCount.length>0){if(Ze.borders){Ze.vertexArrayOffset=this.centroidVertexArray.length;const Bt=Ze.borders,qt=this.featuresOnBorder.push(Ze)-1;for(let Ft=0;Ft<4;Ft++)Bt[Ft][0]!==Number.MAX_VALUE&&this.borders[Ft].push(qt)}this.encodeCentroid(Ze.borders?void 0:Ze.centroid(),Ze)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,Ee,Ce,he)}sortBorders(){for(let y=0;y<4;y++)this.borders[y].sort(($,ee)=>this.featuresOnBorder[$].borders[y][0]-this.featuresOnBorder[ee].borders[y][0])}encodeCentroid(y,$,ee=!0){let he,Ee;if(y)if(y.y!==0){const Pe=$.span()._mult(this.tileToMeter);he=(Math.max(y.x,1)<<3)+Math.min(7,Math.round(Pe.x/10)),Ee=(Math.max(y.y,1)<<3)+Math.min(7,Math.round(Pe.y/10))}else he=Math.ceil(7*(y.x+450)),Ee=0;else he=0,Ee=+ee;let Ce=ee?this.centroidVertexArray.length:$.vertexArrayOffset;for(const Pe of $.polyCount){ee&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Pe.edges+Pe.top);for(let $e=0;$e<Pe.top;$e++)this.centroidVertexArray.emplace(Ce++,he,Ee);for(let $e=0;$e<2*Pe.edges;$e++)this.centroidVertexArray.emplace(Ce++,0,Ee),this.centroidVertexArray.emplace(Ce++,he,Ee)}}}function wf(j,y){const $=j.add(y)._unit();return j.x*$.x+j.y*$.y}function Dm(j,y,$,ee){const he=y.sub(j)._perp()._unit(),Ee=$.sub(y)._perp()._unit();return Ef(j,y,$,wf(he,Ee),ee)}function Ef(j,y,$,ee,he){const Ee=Math.sqrt(1-ee*ee);return Math.min(j.dist(y)/3,y.dist($)/3,he*Ee/ee)}function Af(j,y,$){return j.x<$[0].x&&y.x<$[0].x||j.x>$[1].x&&y.x>$[1].x||j.y<$[0].y&&y.y<$[0].y||j.y>$[1].y&&y.y>$[1].y}function Tf(j,y,$){if(j.x<0||j.x>=Tr||y.x<0||y.x>=Tr||$.x<0||$.x>=Tr)return!1;const ee=$.sub(y),he=ee.perp(),Ee=j.sub(y);return(ee.x*Ee.x+ee.y*Ee.y)/Math.sqrt((ee.x*ee.x+ee.y*ee.y)*(Ee.x*Ee.x+Ee.y*Ee.y))>-.866&&he.x*Ee.x+he.y*Ee.y<0}function kf(j,y,$){const ee=y?2|j:-3&j;return $?1|ee:-2&ee}function Cf(){const j=Math.PI/32,y=Math.tan(j),$=_h;return $*Math.sqrt(1+2*y*y)-$}function Sf(j,y,$){const ee=1<<$.z,he=Ho($.x/ee),Ee=Ho(($.x+1)/ee),Ce=Yi($.y/ee),Pe=Yi(($.y+1)/ee);return function($e,De,Ve,Ze,Xe=0,rt){const st=[];if(!$e.length||!Ve||!Ze)return st;const gt=(Zt,An)=>{for(const bn of Zt)st.push({polygon:bn,bounds:An})},At=Math.ceil(Math.log2(Ve)),Bt=Math.ceil(Math.log2(Ze)),qt=At-Bt,Ft=[];for(let Zt=0;Zt<Math.abs(qt);Zt++)Ft.push(qt>0?0:1);for(let Zt=0;Zt<Math.min(At,Bt);Zt++)Ft.push(0),Ft.push(1);let Ht=$e;if(Ht=Td(Ht,De[0].y-Xe,De[1].y+Xe,1),Ht=Td(Ht,De[0].x-Xe,De[1].x+Xe,0),!Ht.length)return st;const en=[];for(Ft.length?en.push({polygons:Ht,bounds:De,depth:0}):gt(Ht,De);en.length;){const Zt=en.pop(),An=Zt.depth,bn=Ft[An],Mn=Zt.bounds[0],Yn=Zt.bounds[1],Cn=bn===0?Mn.x:Mn.y,Ln=bn===0?Yn.x:Yn.y,Un=rt?rt(bn,Cn,Ln):.5*(Cn+Ln),Bn=Td(Zt.polygons,Cn-Xe,Un+Xe,bn),Zn=Td(Zt.polygons,Un-Xe,Ln+Xe,bn);if(Bn.length){const Vn=[Mn,new ye(bn===0?Un:Yn.x,bn===1?Un:Yn.y)];Ft.length>An+1?en.push({polygons:Bn,bounds:Vn,depth:An+1}):gt(Bn,Vn)}if(Zn.length){const Vn=[new ye(bn===0?Un:Mn.x,bn===1?Un:Mn.y),Yn];Ft.length>An+1?en.push({polygons:Zn,bounds:Vn,depth:An+1}):gt(Zn,Vn)}}return st}(j,y,Math.ceil((Ee-he)/11.25),Math.ceil((Ce-Pe)/11.25),1,($e,De,Ve)=>{if($e===0)return .5*(De+Ve);{const Ze=Yi(($.y+De/Tr)/ee);return(Ua(.5*(Yi(($.y+Ve/Tr)/ee)+Ze))*ee-$.y)*Tr}})}cr(Sh,"FillExtrusionBucket",{omit:["layers","features"]}),cr(bf,"PartMetadata");const Lm=new Rn({"fill-extrusion-edge-radius":new Wt(mn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Bm={paint:new Rn({"fill-extrusion-opacity":new Wt(mn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new sn(mn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Wt(mn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Wt(mn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _n(mn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new sn(mn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new sn(mn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Wt(mn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Wt(mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Wt(mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Lm};function Pf(j,y,$){var ee=2*Math.PI*6378137/256/Math.pow(2,$);return[j*ee-2*Math.PI*6378137/2,y*ee-2*Math.PI*6378137/2]}class kd{constructor(y,$,ee){this.z=y,this.x=$,this.y=ee,this.key=Ph(0,y,y,$,ee)}equals(y){return this.z===y.z&&this.x===y.x&&this.y===y.y}url(y,$){const ee=function(Ee,Ce,Pe){var $e=Pf(256*Ee,256*(Ce=Math.pow(2,Pe)-Ce-1),Pe),De=Pf(256*(Ee+1),256*(Ce+1),Pe);return $e[0]+","+$e[1]+","+De[0]+","+De[1]}(this.x,this.y,this.z),he=function(Ee,Ce,Pe){let $e,De="";for(let Ve=Ee;Ve>0;Ve--)$e=1<<Ve-1,De+=(Ce&$e?1:0)+(Pe&$e?2:0);return De}(this.z,this.x,this.y);return y[(this.x+this.y)%y.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String($==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",ee)}toString(){return`${this.z}/${this.x}/${this.y}`}}class If{constructor(y,$){this.wrap=y,this.canonical=$,this.key=Ph(y,$.z,$.z,$.x,$.y)}}class Co{constructor(y,$,ee,he,Ee){this.overscaledZ=y,this.wrap=$,this.canonical=new kd(ee,+he,+Ee),this.key=$===0&&y===ee?this.canonical.key:Ph($,y,ee,he,Ee)}equals(y){return this.overscaledZ===y.overscaledZ&&this.wrap===y.wrap&&this.canonical.equals(y.canonical)}scaledTo(y){const $=this.canonical.z-y;return y>this.canonical.z?new Co(y,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Co(y,this.wrap,y,this.canonical.x>>$,this.canonical.y>>$)}calculateScaledKey(y,$=!0){if(this.overscaledZ===y&&$)return this.key;if(y>this.canonical.z)return Ph(this.wrap*+$,y,this.canonical.z,this.canonical.x,this.canonical.y);{const ee=this.canonical.z-y;return Ph(this.wrap*+$,y,y,this.canonical.x>>ee,this.canonical.y>>ee)}}isChildOf(y){if(y.wrap!==this.wrap)return!1;const $=this.canonical.z-y.canonical.z;return y.overscaledZ===0||y.overscaledZ<this.overscaledZ&&y.canonical.x===this.canonical.x>>$&&y.canonical.y===this.canonical.y>>$}children(y){if(this.overscaledZ>=y)return[new Co(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const $=this.canonical.z+1,ee=2*this.canonical.x,he=2*this.canonical.y;return[new Co($,this.wrap,$,ee,he),new Co($,this.wrap,$,ee+1,he),new Co($,this.wrap,$,ee,he+1),new Co($,this.wrap,$,ee+1,he+1)]}isLessThan(y){return this.wrap<y.wrap||!(this.wrap>y.wrap)&&(this.overscaledZ<y.overscaledZ||!(this.overscaledZ>y.overscaledZ)&&(this.canonical.x<y.canonical.x||!(this.canonical.x>y.canonical.x)&&this.canonical.y<y.canonical.y))}wrapped(){return new Co(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(y){return new Co(this.overscaledZ,y,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new If(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Ph(j,y,$,ee,he){const Ee=1<<Math.min($,22);let Ce=Ee*(he%Ee)+ee%Ee;return j&&$<22&&(Ce+=Ee*Ee*((j<0?-2*j-1:2*j)%(1<<2*(22-$)))),16*(32*Ce+$)+(y-$)}function Ih(j,y){return j.x*y.x+j.y*y.y}function Mf(j,y){if(j.length===1){let $=0;const ee=y[$++];let he;for(;!he||ee.equals(he);)if(he=y[$++],!he)return 1/0;for(;$<y.length;$++){const Ee=y[$],Ce=j[0],Pe=he.sub(ee),$e=Ee.sub(ee),De=Ce.sub(ee),Ve=Ih(Pe,Pe),Ze=Ih(Pe,$e),Xe=Ih($e,$e),rt=Ih(De,Pe),st=Ih(De,$e),gt=Ve*Xe-Ze*Ze,At=(Xe*rt-Ze*st)/gt,Bt=(Ve*st-Ze*rt)/gt,qt=ee.z*(1-At-Bt)+he.z*At+Ee.z*Bt;if(isFinite(qt))return qt}return 1/0}{let $=1/0;for(const ee of y)$=Math.min($,ee.z);return $}}function Cd(j){const y=new ye(j[0],j[1]);return y.z=j[2],y}function Of(j,y,$,ee,he,Ee,Ce,Pe){const $e=Ce*he.getElevationAt(j,y,!0,!0),De=Ee[0]!==0,Ve=De?Ee[1]===0?Ce*(Ee[0]/7-450):Ce*function(Ze,Xe,rt){const st=Math.floor(Xe[0]/8),gt=Math.floor(Xe[1]/8),At=10*(Xe[0]-8*st),Bt=10*(Xe[1]-8*gt),qt=Ze.getElevationAt(st,gt,!0,!0),Ft=Ze.getMeterToDEM(rt),Ht=Math.floor(.5*(At*Ft-1)),en=Math.floor(.5*(Bt*Ft-1)),Zt=Ze.tileCoordToPixel(st,gt),An=2*Ht+1,bn=2*en+1,Mn=function(Zn,Vn,or,Or,$r){return[Zn.getElevationAtPixel(Vn,or,!0),Zn.getElevationAtPixel(Vn+$r,or,!0),Zn.getElevationAtPixel(Vn,or+$r,!0),Zn.getElevationAtPixel(Vn+Or,or+$r,!0)]}(Ze,Zt.x-Ht,Zt.y-en,An,bn),Yn=Math.abs(Mn[0]-Mn[1]),Cn=Math.abs(Mn[2]-Mn[3]),Ln=Math.abs(Mn[0]-Mn[2])+Math.abs(Mn[1]-Mn[3]),Un=Math.min(.25,.5*Ft*(Yn+Cn)/An),Bn=Math.min(.25,.5*Ft*Ln/bn);return qt+Math.max(Un*At,Bn*Bt)}(he,Ee,Pe):$e;return{base:$e+($===0)?-1:$,top:De?Math.max(Ve+ee,$e+$+2):$e+ee}}cr(kd,"CanonicalTileID"),cr(Co,"OverscaledTileID",{omit:["projMatrix"]});const Fm=Dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Nm}=Fm,jm=Dn([{name:"a_packed",components:4,type:"Float32"}]),{members:Um}=jm,Vm=qc.VectorTileFeature.types,Gm=Math.cos(Math.PI/180*37.5);class Sd{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map($=>$.id),this.index=y.index,this.projection=y.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach($=>{this.gradients[$.id]={}}),this.layoutVertexArray=new Ar,this.layoutVertexArray2=new Ur,this.indexArray=new Rr,this.programConfigurations=new ol(y.layers,y.zoom),this.segments=new Li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter($=>$.isStateDependent()).map($=>$.id)}populate(y,$,ee,he){this.hasPattern=mp("line",this.layers,$);const Ee=this.layers[0].layout.get("line-sort-key"),Ce=[];for(const{feature:Ve,id:Ze,index:Xe,sourceLayerIndex:rt}of y){const st=this.layers[0]._featureFilter.needGeometry,gt=Ge(Ve,st);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),gt,ee))continue;const At=Ee?Ee.evaluate(gt,{},ee):void 0,Bt={id:Ze,properties:Ve.properties,type:Ve.type,sourceLayerIndex:rt,index:Xe,geometry:st?gt.geometry:wt(Ve,ee,he),patterns:{},sortKey:At};Ce.push(Bt)}Ee&&Ce.sort((Ve,Ze)=>Ve.sortKey-Ze.sortKey);const{lineAtlas:Pe,featureIndex:$e}=$,De=this.addConstantDashes(Pe);for(const Ve of Ce){const{geometry:Ze,index:Xe,sourceLayerIndex:rt}=Ve;if(De&&this.addFeatureDashes(Ve,Pe),this.hasPattern){const st=gp("line",this.layers,Ve,this.zoom,$);this.patternFeatures.push(st)}else this.addFeature(Ve,Ze,Xe,ee,Pe.positions,$.availableImages);$e.insert(y[Xe].feature,Ze,Xe,rt,this.index)}}addConstantDashes(y){let $=!1;for(const ee of this.layers){const he=ee.paint.get("line-dasharray").value,Ee=ee.layout.get("line-cap").value;if(he.kind!=="constant"||Ee.kind!=="constant")$=!0;else{const Ce=Ee.value,Pe=he.value;if(!Pe)continue;y.addDash(Pe.from,Ce),y.addDash(Pe.to,Ce),Pe.other&&y.addDash(Pe.other,Ce)}}return $}addFeatureDashes(y,$){const ee=this.zoom;for(const he of this.layers){const Ee=he.paint.get("line-dasharray").value,Ce=he.layout.get("line-cap").value;if(Ee.kind==="constant"&&Ce.kind==="constant")continue;let Pe,$e,De,Ve,Ze,Xe;if(Ee.kind==="constant"){const At=Ee.value;if(!At)continue;Pe=At.other||At.to,$e=At.to,De=At.from}else Pe=Ee.evaluate({zoom:ee-1},y),$e=Ee.evaluate({zoom:ee},y),De=Ee.evaluate({zoom:ee+1},y);Ce.kind==="constant"?Ve=Ze=Xe=Ce.value:(Ve=Ce.evaluate({zoom:ee-1},y),Ze=Ce.evaluate({zoom:ee},y),Xe=Ce.evaluate({zoom:ee+1},y)),$.addDash(Pe,Ve),$.addDash($e,Ze),$.addDash(De,Xe);const rt=$.getKey(Pe,Ve),st=$.getKey($e,Ze),gt=$.getKey(De,Xe);y.patterns[he.id]={min:rt,mid:st,max:gt}}}update(y,$,ee,he){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,$,this.stateDependentLayers,ee,he)}addFeatures(y,$,ee,he,Ee){for(const Ce of this.patternFeatures)this.addFeature(Ce,Ce.geometry,Ce.index,$,ee,he)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=y.createVertexBuffer(this.layoutVertexArray2,Um)),this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Nm),this.indexBuffer=y.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(y){if(y.properties&&y.properties.hasOwnProperty("mapbox_clip_start")&&y.properties.hasOwnProperty("mapbox_clip_end"))return{start:+y.properties.mapbox_clip_start,end:+y.properties.mapbox_clip_end}}addFeature(y,$,ee,he,Ee,Ce){const Pe=this.layers[0].layout,$e=Pe.get("line-join").evaluate(y,{}),De=Pe.get("line-cap").evaluate(y,{}),Ve=Pe.get("line-miter-limit"),Ze=Pe.get("line-round-limit");this.lineClips=this.lineFeatureClips(y);for(const Xe of $)this.addLine(Xe,y,$e,De,Ve,Ze);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,ee,Ee,Ce,he)}addLine(y,$,ee,he,Ee,Ce){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Bt=0;Bt<y.length-1;Bt++)this.totalDistance+=y[Bt].dist(y[Bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Pe=Vm[$.type]==="Polygon";let $e=y.length;for(;$e>=2&&y[$e-1].equals(y[$e-2]);)$e--;let De=0;for(;De<$e-1&&y[De].equals(y[De+1]);)De++;if($e<(Pe?3:2))return;ee==="bevel"&&(Ee=1.05);const Ve=this.overscaling<=16?122880/(512*this.overscaling):0,Ze=this.segments.prepareSegment(10*$e,this.layoutVertexArray,this.indexArray);let Xe,rt,st,gt,At;this.e1=this.e2=-1,Pe&&(Xe=y[$e-2],At=y[De].sub(Xe)._unit()._perp());for(let Bt=De;Bt<$e;Bt++){if(st=Bt===$e-1?Pe?y[De+1]:void 0:y[Bt+1],st&&y[Bt].equals(st))continue;At&&(gt=At),Xe&&(rt=Xe),Xe=y[Bt],At=st?st.sub(Xe)._unit()._perp():gt,gt=gt||At;let qt=gt.add(At);qt.x===0&&qt.y===0||qt._unit();const Ft=gt.x*At.x+gt.y*At.y,Ht=qt.x*At.x+qt.y*At.y,en=Ht!==0?1/Ht:1/0,Zt=2*Math.sqrt(2-2*Ht),An=Ht<Gm&&rt&&st,bn=gt.x*At.y-gt.y*At.x>0;if(An&&Bt>De){const Cn=Xe.dist(rt);if(Cn>2*Ve){const Ln=Xe.sub(Xe.sub(rt)._mult(Ve/Cn)._round());this.updateDistance(rt,Ln),this.addCurrentVertex(Ln,gt,0,0,Ze),rt=Ln}}const Mn=rt&&st;let Yn=Mn?ee:Pe?"butt":he;if(Mn&&Yn==="round"&&(en<Ce?Yn="miter":en<=2&&(Yn="fakeround")),Yn==="miter"&&en>Ee&&(Yn="bevel"),Yn==="bevel"&&(en>2&&(Yn="flipbevel"),en<Ee&&(Yn="miter")),rt&&this.updateDistance(rt,Xe),Yn==="miter")qt._mult(en),this.addCurrentVertex(Xe,qt,0,0,Ze);else if(Yn==="flipbevel"){if(en>100)qt=At.mult(-1);else{const Cn=en*gt.add(At).mag()/gt.sub(At).mag();qt._perp()._mult(Cn*(bn?-1:1))}this.addCurrentVertex(Xe,qt,0,0,Ze),this.addCurrentVertex(Xe,qt.mult(-1),0,0,Ze)}else if(Yn==="bevel"||Yn==="fakeround"){const Cn=-Math.sqrt(en*en-1),Ln=bn?Cn:0,Un=bn?0:Cn;if(rt&&this.addCurrentVertex(Xe,gt,Ln,Un,Ze),Yn==="fakeround"){const Bn=Math.round(180*Zt/Math.PI/20);for(let Zn=1;Zn<Bn;Zn++){let Vn=Zn/Bn;if(Vn!==.5){const Or=Vn-.5;Vn+=Vn*Or*(Vn-1)*((1.0904+Ft*(Ft*(3.55645-1.43519*Ft)-3.2452))*Or*Or+(.848013+Ft*(.215638*Ft-1.06021)))}const or=At.sub(gt)._mult(Vn)._add(gt)._unit()._mult(bn?-1:1);this.addHalfVertex(Xe,or.x,or.y,!1,bn,0,Ze)}}st&&this.addCurrentVertex(Xe,At,-Ln,-Un,Ze)}else if(Yn==="butt")this.addCurrentVertex(Xe,qt,0,0,Ze);else if(Yn==="square"){const Cn=rt?1:-1;rt||this.addCurrentVertex(Xe,qt,Cn,Cn,Ze),this.addCurrentVertex(Xe,qt,0,0,Ze),rt&&this.addCurrentVertex(Xe,qt,Cn,Cn,Ze)}else Yn==="round"&&(rt&&(this.addCurrentVertex(Xe,gt,0,0,Ze),this.addCurrentVertex(Xe,gt,1,1,Ze,!0)),st&&(this.addCurrentVertex(Xe,At,-1,-1,Ze,!0),this.addCurrentVertex(Xe,At,0,0,Ze)));if(An&&Bt<$e-1){const Cn=Xe.dist(st);if(Cn>2*Ve){const Ln=Xe.add(st.sub(Xe)._mult(Ve/Cn)._round());this.updateDistance(Xe,Ln),this.addCurrentVertex(Ln,At,0,0,Ze),Xe=Ln}}}}addCurrentVertex(y,$,ee,he,Ee,Ce=!1){const Pe=$.y*he-$.x,$e=-$.y-$.x*he;this.addHalfVertex(y,$.x+$.y*ee,$.y-$.x*ee,Ce,!1,ee,Ee),this.addHalfVertex(y,Pe,$e,Ce,!0,-he,Ee)}addHalfVertex({x:y,y:$},ee,he,Ee,Ce,Pe,$e){this.layoutVertexArray.emplaceBack((y<<1)+(Ee?1:0),($<<1)+(Ce?1:0),Math.round(63*ee)+128,Math.round(63*he)+128,1+(Pe===0?0:Pe<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const De=$e.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,De),$e.primitiveLength++),Ce?this.e2=De:this.e1=De}updateScaledDistance(){if(this.lineClips){const y=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=y*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(y,$){this.distance+=y.dist($),this.updateScaledDistance()}}cr(Sd,"LineBucket",{omit:["layers","patternFeatures"]});const Hm=new Rn({"line-cap":new sn(mn.layout_line["line-cap"]),"line-join":new sn(mn.layout_line["line-join"]),"line-miter-limit":new Wt(mn.layout_line["line-miter-limit"]),"line-round-limit":new Wt(mn.layout_line["line-round-limit"]),"line-sort-key":new sn(mn.layout_line["line-sort-key"])});var Rf={paint:new Rn({"line-opacity":new sn(mn.paint_line["line-opacity"]),"line-color":new sn(mn.paint_line["line-color"]),"line-translate":new Wt(mn.paint_line["line-translate"]),"line-translate-anchor":new Wt(mn.paint_line["line-translate-anchor"]),"line-width":new sn(mn.paint_line["line-width"]),"line-gap-width":new sn(mn.paint_line["line-gap-width"]),"line-offset":new sn(mn.paint_line["line-offset"]),"line-blur":new sn(mn.paint_line["line-blur"]),"line-dasharray":new _n(mn.paint_line["line-dasharray"]),"line-pattern":new _n(mn.paint_line["line-pattern"]),"line-gradient":new dn(mn.paint_line["line-gradient"]),"line-trim-offset":new Wt(mn.paint_line["line-trim-offset"])}),layout:Hm};const $f=new class extends sn{possiblyEvaluate(j,y){return y=new Tt(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),super.possiblyEvaluate(j,y)}evaluate(j,y,$,ee){return y=ft({},y,{zoom:Math.floor(y.zoom)}),super.evaluate(j,y,$,ee)}}(Rf.paint.properties["line-width"].specification);function zf(j,y){return y>0?y+2*j:j}$f.useIntegerZoom=!0;const qm=Dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wm=Dn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Zm=Dn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Xm=Dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Km=Dn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Df=Dn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ym=Dn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Dn([{name:"triangle",components:3,type:"Uint16"}]),Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Dn([{type:"Float32",name:"offsetX"}]),Dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var uo=24;const gs=128;function yp(j,y){const{expression:$}=y;if($.kind==="constant")return{kind:"constant",layoutSize:$.evaluate(new Tt(j+1))};if($.kind==="source")return{kind:"source"};{const{zoomStops:ee,interpolationType:he}=$;let Ee=0;for(;Ee<ee.length&&ee[Ee]<=j;)Ee++;Ee=Math.max(0,Ee-1);let Ce=Ee;for(;Ce<ee.length&&ee[Ce]<j+1;)Ce++;Ce=Math.min(ee.length-1,Ce);const Pe=ee[Ee],$e=ee[Ce];return $.kind==="composite"?{kind:"composite",minZoom:Pe,maxZoom:$e,interpolationType:he}:{kind:"camera",minZoom:Pe,maxZoom:$e,minSize:$.evaluate(new Tt(Pe)),maxSize:$.evaluate(new Tt($e)),interpolationType:he}}}function Pd(j,{uSize:y,uSizeT:$},{lowerSize:ee,upperSize:he}){return j.kind==="source"?ee/gs:j.kind==="composite"?qr(ee/gs,he/gs,$):y}function Fu(j,y){let $=0,ee=0;if(j.kind==="constant")ee=j.layoutSize;else if(j.kind!=="source"){const{interpolationType:he,minZoom:Ee,maxZoom:Ce}=j,Pe=he?qe(Vo.interpolationFactor(he,y,Ee,Ce),0,1):0;j.kind==="camera"?ee=qr(j.minSize,j.maxSize,Pe):$=Pe}return{uSizeT:$,uSize:ee}}var Jm=Object.freeze({__proto__:null,getSizeData:yp,evaluateSizeForFeature:Pd,evaluateSizeForZoom:Fu,SIZE_PACK_FACTOR:gs});function Qm(j,y,$){return j.sections.forEach(ee=>{ee.text=function(he,Ee,Ce){const Pe=Ee.layout.get("text-transform").evaluate(Ce,{});return Pe==="uppercase"?he=he.toLocaleUpperCase():Pe==="lowercase"&&(he=he.toLocaleLowerCase()),kt.applyArabicShaping&&(he=kt.applyArabicShaping(he)),he}(ee.text,y,$)}),j}const Mh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function eg(j){return j==="\uFE36"||j==="\uFE48"||j==="\uFE38"||j==="\uFE44"||j==="\uFE42"||j==="\uFE3E"||j==="\uFE3C"||j==="\uFE3A"||j==="\uFE18"||j==="\uFE40"||j==="\uFE10"||j==="\uFE13"||j==="\uFE14"||j==="\uFF40"||j==="\uFFE3"||j==="\uFE11"||j==="\uFE12"}function tg(j){return j==="\uFE35"||j==="\uFE47"||j==="\uFE37"||j==="\uFE43"||j==="\uFE41"||j==="\uFE3D"||j==="\uFE3B"||j==="\uFE39"||j==="\uFE17"||j==="\uFE3F"}var Lf=function(j,y,$,ee,he){var Ee,Ce,Pe=8*he-ee-1,$e=(1<<Pe)-1,De=$e>>1,Ve=-7,Ze=$?he-1:0,Xe=$?-1:1,rt=j[y+Ze];for(Ze+=Xe,Ee=rt&(1<<-Ve)-1,rt>>=-Ve,Ve+=Pe;Ve>0;Ee=256*Ee+j[y+Ze],Ze+=Xe,Ve-=8);for(Ce=Ee&(1<<-Ve)-1,Ee>>=-Ve,Ve+=ee;Ve>0;Ce=256*Ce+j[y+Ze],Ze+=Xe,Ve-=8);if(Ee===0)Ee=1-De;else{if(Ee===$e)return Ce?NaN:1/0*(rt?-1:1);Ce+=Math.pow(2,ee),Ee-=De}return(rt?-1:1)*Ce*Math.pow(2,Ee-ee)},Bf=function(j,y,$,ee,he,Ee){var Ce,Pe,$e,De=8*Ee-he-1,Ve=(1<<De)-1,Ze=Ve>>1,Xe=he===23?Math.pow(2,-24)-Math.pow(2,-77):0,rt=ee?0:Ee-1,st=ee?1:-1,gt=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(Pe=isNaN(y)?1:0,Ce=Ve):(Ce=Math.floor(Math.log(y)/Math.LN2),y*($e=Math.pow(2,-Ce))<1&&(Ce--,$e*=2),(y+=Ce+Ze>=1?Xe/$e:Xe*Math.pow(2,1-Ze))*$e>=2&&(Ce++,$e/=2),Ce+Ze>=Ve?(Pe=0,Ce=Ve):Ce+Ze>=1?(Pe=(y*$e-1)*Math.pow(2,he),Ce+=Ze):(Pe=y*Math.pow(2,Ze-1)*Math.pow(2,he),Ce=0));he>=8;j[$+rt]=255&Pe,rt+=st,Pe/=256,he-=8);for(Ce=Ce<<he|Pe,De+=he;De>0;j[$+rt]=255&Ce,rt+=st,Ce/=256,De-=8);j[$+rt-st]|=128*gt},Oh=_i;function _i(j){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(j)?j:new Uint8Array(j||0),this.pos=0,this.type=0,this.length=this.buf.length}_i.Varint=0,_i.Fixed64=1,_i.Bytes=2,_i.Fixed32=5;var vp=4294967296,Ff=1/vp,Nf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function sl(j){return j.type===_i.Bytes?j.readVarint()+j.pos:j.pos+1}function Nu(j,y,$){return $?4294967296*y+(j>>>0):4294967296*(y>>>0)+(j>>>0)}function jf(j,y,$){var ee=y<=16383?1:y<=2097151?2:y<=268435455?3:Math.floor(Math.log(y)/(7*Math.LN2));$.realloc(ee);for(var he=$.pos-1;he>=j;he--)$.buf[he+ee]=$.buf[he]}function ng(j,y){for(var $=0;$<j.length;$++)y.writeVarint(j[$])}function rg(j,y){for(var $=0;$<j.length;$++)y.writeSVarint(j[$])}function ig(j,y){for(var $=0;$<j.length;$++)y.writeFloat(j[$])}function og(j,y){for(var $=0;$<j.length;$++)y.writeDouble(j[$])}function ag(j,y){for(var $=0;$<j.length;$++)y.writeBoolean(j[$])}function sg(j,y){for(var $=0;$<j.length;$++)y.writeFixed32(j[$])}function lg(j,y){for(var $=0;$<j.length;$++)y.writeSFixed32(j[$])}function cg(j,y){for(var $=0;$<j.length;$++)y.writeFixed64(j[$])}function ug(j,y){for(var $=0;$<j.length;$++)y.writeSFixed64(j[$])}function Id(j,y){return(j[y]|j[y+1]<<8|j[y+2]<<16)+16777216*j[y+3]}function ju(j,y,$){j[$]=y,j[$+1]=y>>>8,j[$+2]=y>>>16,j[$+3]=y>>>24}function Uf(j,y){return(j[y]|j[y+1]<<8|j[y+2]<<16)+(j[y+3]<<24)}function hg(j,y,$){y.glyphs=[],j===1&&$.readMessage(dg,y)}function dg(j,y,$){if(j===3){const{id:ee,bitmap:he,width:Ee,height:Ce,left:Pe,top:$e,advance:De}=$.readMessage(pg,{});y.glyphs.push({id:ee,bitmap:new al({width:Ee+6,height:Ce+6},he),metrics:{width:Ee,height:Ce,left:Pe,top:$e,advance:De}})}else j===4?y.ascender=$.readSVarint():j===5&&(y.descender=$.readSVarint())}function pg(j,y,$){j===1?y.id=$.readVarint():j===2?y.bitmap=$.readBytes():j===3?y.width=$.readVarint():j===4?y.height=$.readVarint():j===5?y.left=$.readSVarint():j===6?y.top=$.readSVarint():j===7&&(y.advance=$.readVarint())}function xp(j){let y=0,$=0;for(const Ce of j)y+=Ce.w*Ce.h,$=Math.max($,Ce.w);j.sort((Ce,Pe)=>Pe.h-Ce.h);const ee=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(y/.95)),$),h:1/0}];let he=0,Ee=0;for(const Ce of j)for(let Pe=ee.length-1;Pe>=0;Pe--){const $e=ee[Pe];if(!(Ce.w>$e.w||Ce.h>$e.h)){if(Ce.x=$e.x,Ce.y=$e.y,Ee=Math.max(Ee,Ce.y+Ce.h),he=Math.max(he,Ce.x+Ce.w),Ce.w===$e.w&&Ce.h===$e.h){const De=ee.pop();Pe<ee.length&&(ee[Pe]=De)}else Ce.h===$e.h?($e.x+=Ce.w,$e.w-=Ce.w):Ce.w===$e.w?($e.y+=Ce.h,$e.h-=Ce.h):(ee.push({x:$e.x+Ce.w,y:$e.y,w:$e.w-Ce.w,h:Ce.h}),$e.y+=Ce.h,$e.h-=Ce.h);break}}return{w:he,h:Ee,fill:y/(he*Ee)||0}}_i.prototype={destroy:function(){this.buf=null},readFields:function(j,y,$){for($=$||this.length;this.pos<$;){var ee=this.readVarint(),he=ee>>3,Ee=this.pos;this.type=7&ee,j(he,y,this),this.pos===Ee&&this.skip(ee)}return y},readMessage:function(j,y){return this.readFields(j,y,this.readVarint()+this.pos)},readFixed32:function(){var j=Id(this.buf,this.pos);return this.pos+=4,j},readSFixed32:function(){var j=Uf(this.buf,this.pos);return this.pos+=4,j},readFixed64:function(){var j=Id(this.buf,this.pos)+Id(this.buf,this.pos+4)*vp;return this.pos+=8,j},readSFixed64:function(){var j=Id(this.buf,this.pos)+Uf(this.buf,this.pos+4)*vp;return this.pos+=8,j},readFloat:function(){var j=Lf(this.buf,this.pos,!0,23,4);return this.pos+=4,j},readDouble:function(){var j=Lf(this.buf,this.pos,!0,52,8);return this.pos+=8,j},readVarint:function(j){var y,$,ee=this.buf;return y=127&($=ee[this.pos++]),$<128?y:(y|=(127&($=ee[this.pos++]))<<7,$<128?y:(y|=(127&($=ee[this.pos++]))<<14,$<128?y:(y|=(127&($=ee[this.pos++]))<<21,$<128?y:function(he,Ee,Ce){var Pe,$e,De=Ce.buf;if(Pe=(112&($e=De[Ce.pos++]))>>4,$e<128||(Pe|=(127&($e=De[Ce.pos++]))<<3,$e<128)||(Pe|=(127&($e=De[Ce.pos++]))<<10,$e<128)||(Pe|=(127&($e=De[Ce.pos++]))<<17,$e<128)||(Pe|=(127&($e=De[Ce.pos++]))<<24,$e<128)||(Pe|=(1&($e=De[Ce.pos++]))<<31,$e<128))return Nu(he,Pe,Ee);throw new Error("Expected varint not more than 10 bytes")}(y|=(15&($=ee[this.pos]))<<28,j,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var j=this.readVarint();return j%2==1?(j+1)/-2:j/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var j=this.readVarint()+this.pos,y=this.pos;return this.pos=j,j-y>=12&&Nf?function($,ee,he){return Nf.decode($.subarray(ee,he))}(this.buf,y,j):function($,ee,he){for(var Ee="",Ce=ee;Ce<he;){var Pe,$e,De,Ve=$[Ce],Ze=null,Xe=Ve>239?4:Ve>223?3:Ve>191?2:1;if(Ce+Xe>he)break;Xe===1?Ve<128&&(Ze=Ve):Xe===2?(192&(Pe=$[Ce+1]))==128&&(Ze=(31&Ve)<<6|63&Pe)<=127&&(Ze=null):Xe===3?($e=$[Ce+2],(192&(Pe=$[Ce+1]))==128&&(192&$e)==128&&((Ze=(15&Ve)<<12|(63&Pe)<<6|63&$e)<=2047||Ze>=55296&&Ze<=57343)&&(Ze=null)):Xe===4&&($e=$[Ce+2],De=$[Ce+3],(192&(Pe=$[Ce+1]))==128&&(192&$e)==128&&(192&De)==128&&((Ze=(15&Ve)<<18|(63&Pe)<<12|(63&$e)<<6|63&De)<=65535||Ze>=1114112)&&(Ze=null)),Ze===null?(Ze=65533,Xe=1):Ze>65535&&(Ze-=65536,Ee+=String.fromCharCode(Ze>>>10&1023|55296),Ze=56320|1023&Ze),Ee+=String.fromCharCode(Ze),Ce+=Xe}return Ee}(this.buf,y,j)},readBytes:function(){var j=this.readVarint()+this.pos,y=this.buf.subarray(this.pos,j);return this.pos=j,y},readPackedVarint:function(j,y){if(this.type!==_i.Bytes)return j.push(this.readVarint(y));var $=sl(this);for(j=j||[];this.pos<$;)j.push(this.readVarint(y));return j},readPackedSVarint:function(j){if(this.type!==_i.Bytes)return j.push(this.readSVarint());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readSVarint());return j},readPackedBoolean:function(j){if(this.type!==_i.Bytes)return j.push(this.readBoolean());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readBoolean());return j},readPackedFloat:function(j){if(this.type!==_i.Bytes)return j.push(this.readFloat());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readFloat());return j},readPackedDouble:function(j){if(this.type!==_i.Bytes)return j.push(this.readDouble());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readDouble());return j},readPackedFixed32:function(j){if(this.type!==_i.Bytes)return j.push(this.readFixed32());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readFixed32());return j},readPackedSFixed32:function(j){if(this.type!==_i.Bytes)return j.push(this.readSFixed32());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readSFixed32());return j},readPackedFixed64:function(j){if(this.type!==_i.Bytes)return j.push(this.readFixed64());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readFixed64());return j},readPackedSFixed64:function(j){if(this.type!==_i.Bytes)return j.push(this.readSFixed64());var y=sl(this);for(j=j||[];this.pos<y;)j.push(this.readSFixed64());return j},skip:function(j){var y=7&j;if(y===_i.Varint)for(;this.buf[this.pos++]>127;);else if(y===_i.Bytes)this.pos=this.readVarint()+this.pos;else if(y===_i.Fixed32)this.pos+=4;else{if(y!==_i.Fixed64)throw new Error("Unimplemented type: "+y);this.pos+=8}},writeTag:function(j,y){this.writeVarint(j<<3|y)},realloc:function(j){for(var y=this.length||16;y<this.pos+j;)y*=2;if(y!==this.length){var $=new Uint8Array(y);$.set(this.buf),this.buf=$,this.length=y}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(j){this.realloc(4),ju(this.buf,j,this.pos),this.pos+=4},writeSFixed32:function(j){this.realloc(4),ju(this.buf,j,this.pos),this.pos+=4},writeFixed64:function(j){this.realloc(8),ju(this.buf,-1&j,this.pos),ju(this.buf,Math.floor(j*Ff),this.pos+4),this.pos+=8},writeSFixed64:function(j){this.realloc(8),ju(this.buf,-1&j,this.pos),ju(this.buf,Math.floor(j*Ff),this.pos+4),this.pos+=8},writeVarint:function(j){(j=+j||0)>268435455||j<0?function(y,$){var ee,he;if(y>=0?(ee=y%4294967296|0,he=y/4294967296|0):(he=~(-y/4294967296),4294967295^(ee=~(-y%4294967296))?ee=ee+1|0:(ee=0,he=he+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");$.realloc(10),function(Ee,Ce,Pe){Pe.buf[Pe.pos++]=127&Ee|128,Ee>>>=7,Pe.buf[Pe.pos++]=127&Ee|128,Ee>>>=7,Pe.buf[Pe.pos++]=127&Ee|128,Ee>>>=7,Pe.buf[Pe.pos++]=127&Ee|128,Pe.buf[Pe.pos]=127&(Ee>>>=7)}(ee,0,$),function(Ee,Ce){var Pe=(7&Ee)<<4;Ce.buf[Ce.pos++]|=Pe|((Ee>>>=3)?128:0),Ee&&(Ce.buf[Ce.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ce.buf[Ce.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ce.buf[Ce.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ce.buf[Ce.pos++]=127&Ee|((Ee>>>=7)?128:0),Ee&&(Ce.buf[Ce.pos++]=127&Ee)))))}(he,$)}(j,this):(this.realloc(4),this.buf[this.pos++]=127&j|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=127&(j>>>=7)|(j>127?128:0),j<=127||(this.buf[this.pos++]=j>>>7&127))))},writeSVarint:function(j){this.writeVarint(j<0?2*-j-1:2*j)},writeBoolean:function(j){this.writeVarint(Boolean(j))},writeString:function(j){j=String(j),this.realloc(4*j.length),this.pos++;var y=this.pos;this.pos=function(ee,he,Ee){for(var Ce,Pe,$e=0;$e<he.length;$e++){if((Ce=he.charCodeAt($e))>55295&&Ce<57344){if(!Pe){Ce>56319||$e+1===he.length?(ee[Ee++]=239,ee[Ee++]=191,ee[Ee++]=189):Pe=Ce;continue}if(Ce<56320){ee[Ee++]=239,ee[Ee++]=191,ee[Ee++]=189,Pe=Ce;continue}Ce=Pe-55296<<10|Ce-56320|65536,Pe=null}else Pe&&(ee[Ee++]=239,ee[Ee++]=191,ee[Ee++]=189,Pe=null);Ce<128?ee[Ee++]=Ce:(Ce<2048?ee[Ee++]=Ce>>6|192:(Ce<65536?ee[Ee++]=Ce>>12|224:(ee[Ee++]=Ce>>18|240,ee[Ee++]=Ce>>12&63|128),ee[Ee++]=Ce>>6&63|128),ee[Ee++]=63&Ce|128)}return Ee}(this.buf,j,this.pos);var $=this.pos-y;$>=128&&jf(y,$,this),this.pos=y-1,this.writeVarint($),this.pos+=$},writeFloat:function(j){this.realloc(4),Bf(this.buf,j,this.pos,!0,23,4),this.pos+=4},writeDouble:function(j){this.realloc(8),Bf(this.buf,j,this.pos,!0,52,8),this.pos+=8},writeBytes:function(j){var y=j.length;this.writeVarint(y),this.realloc(y);for(var $=0;$<y;$++)this.buf[this.pos++]=j[$]},writeRawMessage:function(j,y){this.pos++;var $=this.pos;j(y,this);var ee=this.pos-$;ee>=128&&jf($,ee,this),this.pos=$-1,this.writeVarint(ee),this.pos+=ee},writeMessage:function(j,y,$){this.writeTag(j,_i.Bytes),this.writeRawMessage(y,$)},writePackedVarint:function(j,y){y.length&&this.writeMessage(j,ng,y)},writePackedSVarint:function(j,y){y.length&&this.writeMessage(j,rg,y)},writePackedBoolean:function(j,y){y.length&&this.writeMessage(j,ag,y)},writePackedFloat:function(j,y){y.length&&this.writeMessage(j,ig,y)},writePackedDouble:function(j,y){y.length&&this.writeMessage(j,og,y)},writePackedFixed32:function(j,y){y.length&&this.writeMessage(j,sg,y)},writePackedSFixed32:function(j,y){y.length&&this.writeMessage(j,lg,y)},writePackedFixed64:function(j,y){y.length&&this.writeMessage(j,cg,y)},writePackedSFixed64:function(j,y){y.length&&this.writeMessage(j,ug,y)},writeBytesField:function(j,y){this.writeTag(j,_i.Bytes),this.writeBytes(y)},writeFixed32Field:function(j,y){this.writeTag(j,_i.Fixed32),this.writeFixed32(y)},writeSFixed32Field:function(j,y){this.writeTag(j,_i.Fixed32),this.writeSFixed32(y)},writeFixed64Field:function(j,y){this.writeTag(j,_i.Fixed64),this.writeFixed64(y)},writeSFixed64Field:function(j,y){this.writeTag(j,_i.Fixed64),this.writeSFixed64(y)},writeVarintField:function(j,y){this.writeTag(j,_i.Varint),this.writeVarint(y)},writeSVarintField:function(j,y){this.writeTag(j,_i.Varint),this.writeSVarint(y)},writeStringField:function(j,y){this.writeTag(j,_i.Bytes),this.writeString(y)},writeFloatField:function(j,y){this.writeTag(j,_i.Fixed32),this.writeFloat(y)},writeDoubleField:function(j,y){this.writeTag(j,_i.Fixed64),this.writeDouble(y)},writeBooleanField:function(j,y){this.writeVarintField(j,Boolean(y))}};class bp{constructor(y,{pixelRatio:$,version:ee,stretchX:he,stretchY:Ee,content:Ce}){this.paddedRect=y,this.pixelRatio=$,this.stretchX=he,this.stretchY=Ee,this.content=Ce,this.version=ee}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Vf{constructor(y,$){const ee={},he={};this.haveRenderCallbacks=[];const Ee=[];this.addImages(y,ee,Ee),this.addImages($,he,Ee);const{w:Ce,h:Pe}=xp(Ee),$e=new Zo({width:Ce||1,height:Pe||1});for(const De in y){const Ve=y[De],Ze=ee[De].paddedRect;Zo.copy(Ve.data,$e,{x:0,y:0},{x:Ze.x+1,y:Ze.y+1},Ve.data)}for(const De in $){const Ve=$[De],Ze=he[De].paddedRect,Xe=Ze.x+1,rt=Ze.y+1,st=Ve.data.width,gt=Ve.data.height;Zo.copy(Ve.data,$e,{x:0,y:0},{x:Xe,y:rt},Ve.data),Zo.copy(Ve.data,$e,{x:0,y:gt-1},{x:Xe,y:rt-1},{width:st,height:1}),Zo.copy(Ve.data,$e,{x:0,y:0},{x:Xe,y:rt+gt},{width:st,height:1}),Zo.copy(Ve.data,$e,{x:st-1,y:0},{x:Xe-1,y:rt},{width:1,height:gt}),Zo.copy(Ve.data,$e,{x:0,y:0},{x:Xe+st,y:rt},{width:1,height:gt})}this.image=$e,this.iconPositions=ee,this.patternPositions=he}addImages(y,$,ee){for(const he in y){const Ee=y[he],Ce={x:0,y:0,w:Ee.data.width+2,h:Ee.data.height+2};ee.push(Ce),$[he]=new bp(Ce,Ee),Ee.hasRenderCallback&&this.haveRenderCallbacks.push(he)}}patchUpdatedImages(y,$){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(ee=>y.hasImage(ee)),y.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ee in y.updatedImages)this.patchUpdatedImage(this.iconPositions[ee],y.getImage(ee),$),this.patchUpdatedImage(this.patternPositions[ee],y.getImage(ee),$)}patchUpdatedImage(y,$,ee){if(!y||!$||y.version===$.version)return;y.version=$.version;const[he,Ee]=y.tl;ee.update($.data,void 0,{x:he,y:Ee})}}cr(bp,"ImagePosition"),cr(Vf,"ImageAtlas");const aa={horizontal:1,vertical:2,horizontalOnly:3};class Rh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(y,$){const ee=new Rh;return ee.scale=y||1,ee.fontStack=$,ee}static forImage(y){const $=new Rh;return $.imageName=y,$}}class Uu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(y,$){const ee=new Uu;for(let he=0;he<y.sections.length;he++){const Ee=y.sections[he];Ee.image?ee.addImageSection(Ee):ee.addTextSection(Ee,$)}return ee}length(){return this.text.length}getSection(y){return this.sections[this.sectionIndex[y]]}getSections(){return this.sections}getSectionIndex(y){return this.sectionIndex[y]}getCharCode(y){return this.text.charCodeAt(y)}verticalizePunctuation(y){this.text=function($,ee){let he="";for(let Ee=0;Ee<$.length;Ee++){const Ce=$.charCodeAt(Ee+1)||null,Pe=$.charCodeAt(Ee-1)||null;he+=!ee&&(Ce&&us(Ce)&&!Mh[$[Ee+1]]||Pe&&us(Pe)&&!Mh[$[Ee-1]])||!Mh[$[Ee]]?$[Ee]:Mh[$[Ee]]}return he}(this.text,y)}trim(){let y=0;for(let ee=0;ee<this.text.length&&Md[this.text.charCodeAt(ee)];ee++)y++;let $=this.text.length;for(let ee=this.text.length-1;ee>=0&&ee>=y&&Md[this.text.charCodeAt(ee)];ee--)$--;this.text=this.text.substring(y,$),this.sectionIndex=this.sectionIndex.slice(y,$)}substring(y,$){const ee=new Uu;return ee.text=this.text.substring(y,$),ee.sectionIndex=this.sectionIndex.slice(y,$),ee.sections=this.sections,ee}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((y,$)=>Math.max(y,this.sections[$].scale),0)}addTextSection(y,$){this.text+=y.text,this.sections.push(Rh.forText(y.scale,y.fontStack||$));const ee=this.sections.length-1;for(let he=0;he<y.text.length;++he)this.sectionIndex.push(ee)}addImageSection(y){const $=y.image?y.image.name:"";if($.length===0)return void Mt("Can't add FormattedSection with an empty image.");const ee=this.getNextImageSectionCharCode();ee?(this.text+=String.fromCharCode(ee),this.sections.push(Rh.forImage($)),this.sectionIndex.push(this.sections.length-1)):Mt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wp(j,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt){const At=Uu.fromFeature(j,he);let Bt;Ze===aa.vertical&&At.verticalizePunctuation(Xe);const{processBidirectionalText:qt,processStyledBidirectionalText:Ft}=kt;if(qt&&At.sections.length===1){Bt=[];const Zt=qt(At.toString(),Ep(At,De,Ee,y,ee,rt,st));for(const An of Zt){const bn=new Uu;bn.text=An,bn.sections=At.sections;for(let Mn=0;Mn<An.length;Mn++)bn.sectionIndex.push(0);Bt.push(bn)}}else if(Ft){Bt=[];const Zt=Ft(At.text,At.sectionIndex,Ep(At,De,Ee,y,ee,rt,st));for(const An of Zt){const bn=new Uu;bn.text=An[0],bn.sectionIndex=An[1],bn.sections=At.sections,Bt.push(bn)}}else Bt=function(Zt,An){const bn=[],Mn=Zt.text;let Yn=0;for(const Cn of An)bn.push(Zt.substring(Yn,Cn)),Yn=Cn;return Yn<Mn.length&&bn.push(Zt.substring(Yn,Mn.length)),bn}(At,Ep(At,De,Ee,y,ee,rt,st));const Ht=[],en={positionedLines:Ht,text:At.toString(),top:Ve[1],bottom:Ve[1],left:Ve[0],right:Ve[0],writingMode:Ze,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Zt,An,bn,Mn,Yn,Cn,Ln,Un,Bn,Zn,Vn,or){let Or=0,$r=0,yr=0;const nr=Un==="right"?1:Un==="left"?0:.5;let Gr=!1;for(const Nr of Yn){const Yr=Nr.getSections();for(const gi of Yr){if(gi.imageName)continue;const di=An[gi.fontStack];if(di&&(Gr=di.ascender!==void 0&&di.descender!==void 0,!Gr))break}if(!Gr)break}let Pr=0;for(const Nr of Yn){Nr.trim();const Yr=Nr.getMaxScale(),gi=(Yr-1)*uo,di={positionedGlyphs:[],lineOffset:0};Zt.positionedLines[Pr]=di;const ui=di.positionedGlyphs;let Ei=0;if(!Nr.length()){$r+=Cn,++Pr;continue}let Pi=0,no=0;for(let Zr=0;Zr<Nr.length();Zr++){const zi=Nr.getSection(Zr),go=Nr.getSectionIndex(Zr),ni=Nr.getCharCode(Zr);let Ii=zi.scale,So=null,Ci=null,Fi=null,ro=uo,Qi=0;const ho=!(Bn===aa.horizontal||!Vn&&!rl(ni)||Vn&&(Md[ni]||(hr=ni,Tu(hr)||ku(hr)||Cu(hr)||zo(hr)||Bc(hr))));if(zi.imageName){const Po=Mn[zi.imageName];if(!Po)continue;Fi=zi.imageName,Zt.iconsInText=Zt.iconsInText||!0,Ci=Po.paddedRect;const io=Po.displaySize;Ii=Ii*uo/or,So={width:io[0],height:io[1],left:1,top:-3,advance:ho?io[1]:io[0],localGlyph:!1},Qi=Gr?-So.height*Ii:Yr*uo-17-io[1]*Ii,ro=So.advance;const ul=(ho?io[0]:io[1])*Ii-uo*Yr;ul>0&&ul>Ei&&(Ei=ul)}else{const Po=bn[zi.fontStack];if(!Po)continue;Po[ni]&&(Ci=Po[ni]);const io=An[zi.fontStack];if(!io)continue;const ul=io.glyphs[ni];if(!ul)continue;if(So=ul.metrics,ro=ni!==8203?uo:0,Gr){const Xu=io.ascender!==void 0?Math.abs(io.ascender):0,Hh=io.descender!==void 0?Math.abs(io.descender):0,qh=(Xu+Hh)*Ii;Pi<qh&&(Pi=qh,no=(Xu-Hh)/2*Ii),Qi=-Xu*Ii}else Qi=(Yr-Ii)*uo-17}ho?(Zt.verticalizable=!0,ui.push({glyph:ni,imageName:Fi,x:Or,y:$r+Qi,vertical:ho,scale:Ii,localGlyph:So.localGlyph,fontStack:zi.fontStack,sectionIndex:go,metrics:So,rect:Ci}),Or+=ro*Ii+Zn):(ui.push({glyph:ni,imageName:Fi,x:Or,y:$r+Qi,vertical:ho,scale:Ii,localGlyph:So.localGlyph,fontStack:zi.fontStack,sectionIndex:go,metrics:So,rect:Ci}),Or+=So.advance*Ii+Zn)}ui.length!==0&&(yr=Math.max(Or-Zn,yr),Gr?Zf(ui,nr,Ei,no,Cn*Yr/2):Zf(ui,nr,Ei,0,Cn/2)),Or=0;const Bo=Cn*Yr+Ei;di.lineOffset=Math.max(Ei,gi),$r+=Bo,++Pr}var hr;const mi=$r,{horizontalAlign:hi,verticalAlign:ki}=Ap(Ln);(function(Nr,Yr,gi,di,ui,Ei){const Pi=(Yr-gi)*ui,no=-Ei*di;for(const Bo of Nr)for(const Zr of Bo.positionedGlyphs)Zr.x+=Pi,Zr.y+=no})(Zt.positionedLines,nr,hi,ki,yr,mi),Zt.top+=-ki*mi,Zt.bottom=Zt.top+mi,Zt.left+=-hi*yr,Zt.right=Zt.left+yr,Zt.hasBaseline=Gr}(en,y,$,ee,Bt,Ce,Pe,$e,Ze,De,Xe,gt),!function(Zt){for(const An of Zt)if(An.positionedGlyphs.length!==0)return!1;return!0}(Ht)&&en}const Md={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gf(j,y,$,ee,he,Ee){if(y.imageName){const Ce=ee[y.imageName];return Ce?Ce.displaySize[0]*y.scale*uo/Ee+he:0}{const Ce=$[y.fontStack],Pe=Ce&&Ce.glyphs[j];return Pe?Pe.metrics.advance*y.scale+he:0}}function Hf(j,y,$,ee){const he=Math.pow(j-y,2);return ee?j<y?he/2:2*he:he+Math.abs($)*$}function _g(j,y,$){let ee=0;return j===10&&(ee-=1e4),$&&(ee+=150),j!==40&&j!==65288||(ee+=50),y!==41&&y!==65289||(ee+=50),ee}function qf(j,y,$,ee,he,Ee){let Ce=null,Pe=Hf(y,$,he,Ee);for(const $e of ee){const De=Hf(y-$e.x,$,he,Ee)+$e.badness;De<=Pe&&(Ce=$e,Pe=De)}return{index:j,x:y,priorBreak:Ce,badness:Pe}}function Wf(j){return j?Wf(j.priorBreak).concat(j.index):[]}function Ep(j,y,$,ee,he,Ee,Ce){if(Ee!=="point")return[];if(!j)return[];const Pe=[],$e=function(Xe,rt,st,gt,At,Bt){let qt=0;for(let Ft=0;Ft<Xe.length();Ft++){const Ht=Xe.getSection(Ft);qt+=Gf(Xe.getCharCode(Ft),Ht,gt,At,rt,Bt)}return qt/Math.max(1,Math.ceil(qt/st))}(j,y,$,ee,he,Ce),De=j.text.indexOf("\u200B")>=0;let Ve=0;for(let Xe=0;Xe<j.length();Xe++){const rt=j.getSection(Xe),st=j.getCharCode(Xe);if(Md[st]||(Ve+=Gf(st,rt,ee,he,y,Ce)),Xe<j.length()-1){const gt=!((Ze=st)<11904||!(Rc(Ze)||Oc(Ze)||Ul(Ze)||jl(Ze)||zc(Ze)||Su(Ze)||$c(Ze)||Fl(Ze)||ya(Ze)||tl(Ze)||ga(Ze)||Vl(Ze)||pi(Ze)||ai(Ze)||el(Ze)||_o(Ze)||Hi(Ze)||Lc(Ze)||ra(Ze)||Nl(Ze)));(fg[st]||gt||rt.imageName)&&Pe.push(qf(Xe+1,Ve,$e,Pe,_g(st,j.getCharCode(Xe+1),gt&&De),!1))}}var Ze;return Wf(qf(j.length(),Ve,$e,Pe,0,!0))}function Ap(j){let y=.5,$=.5;switch(j){case"right":case"top-right":case"bottom-right":y=1;break;case"left":case"top-left":case"bottom-left":y=0}switch(j){case"bottom":case"bottom-right":case"bottom-left":$=1;break;case"top":case"top-right":case"top-left":$=0}return{horizontalAlign:y,verticalAlign:$}}function Zf(j,y,$,ee,he){if(!(y||$||ee||he))return;const Ee=j.length-1,Ce=j[Ee],Pe=(Ce.x+Ce.metrics.advance*Ce.scale)*y;for(let $e=0;$e<=Ee;$e++)j[$e].x-=Pe,j[$e].y+=$+ee+he}function mg(j,y,$){const{horizontalAlign:ee,verticalAlign:he}=Ap($),Ee=y[0]-j.displaySize[0]*ee,Ce=y[1]-j.displaySize[1]*he;return{image:j,top:Ce,bottom:Ce+j.displaySize[1],left:Ee,right:Ee+j.displaySize[0]}}function Xf(j,y,$,ee,he,Ee){const Ce=j.image;let Pe;if(Ce.content){const At=Ce.content,Bt=Ce.pixelRatio||1;Pe=[At[0]/Bt,At[1]/Bt,Ce.displaySize[0]-At[2]/Bt,Ce.displaySize[1]-At[3]/Bt]}const $e=y.left*Ee,De=y.right*Ee;let Ve,Ze,Xe,rt;$==="width"||$==="both"?(rt=he[0]+$e-ee[3],Ze=he[0]+De+ee[1]):(rt=he[0]+($e+De-Ce.displaySize[0])/2,Ze=rt+Ce.displaySize[0]);const st=y.top*Ee,gt=y.bottom*Ee;return $==="height"||$==="both"?(Ve=he[1]+st-ee[0],Xe=he[1]+gt+ee[2]):(Ve=he[1]+(st+gt-Ce.displaySize[1])/2,Xe=Ve+Ce.displaySize[1]),{image:Ce,top:Ve,right:Ze,bottom:Xe,left:rt,collisionPadding:Pe}}class ll extends ye{constructor(y,$,ee,he,Ee){super(y,$),this.angle=he,this.z=ee,Ee!==void 0&&(this.segment=Ee)}clone(){return new ll(this.x,this.y,this.z,this.angle,this.segment)}}function Kf(j,y,$,ee,he){if(y.segment===void 0)return!0;let Ee=y,Ce=y.segment+1,Pe=0;for(;Pe>-$/2;){if(Ce--,Ce<0)return!1;Pe-=j[Ce].dist(Ee),Ee=j[Ce]}Pe+=j[Ce].dist(j[Ce+1]),Ce++;const $e=[];let De=0;for(;Pe<$/2;){const Ve=j[Ce],Ze=j[Ce+1];if(!Ze)return!1;let Xe=j[Ce-1].angleTo(Ve)-Ve.angleTo(Ze);for(Xe=Math.abs((Xe+3*Math.PI)%(2*Math.PI)-Math.PI),$e.push({distance:Pe,angleDelta:Xe}),De+=Xe;Pe-$e[0].distance>ee;)De-=$e.shift().angleDelta;if(De>he)return!1;Ce++,Pe+=Ve.dist(Ze)}return!0}function Yf(j){let y=0;for(let $=0;$<j.length-1;$++)y+=j[$].dist(j[$+1]);return y}function Jf(j,y,$){return j?.6*y*$:0}function Qf(j,y){return Math.max(j?j.right-j.left:0,y?y.right-y.left:0)}function gg(j,y,$,ee,he,Ee){const Ce=Jf($,he,Ee),Pe=Qf($,ee)*Ee;let $e=0;const De=Yf(j)/2;for(let Ve=0;Ve<j.length-1;Ve++){const Ze=j[Ve],Xe=j[Ve+1],rt=Ze.dist(Xe);if($e+rt>De){const st=(De-$e)/rt,gt=qr(Ze.x,Xe.x,st),At=qr(Ze.y,Xe.y,st),Bt=new ll(gt,At,0,Xe.angleTo(Ze),Ve);return!Ce||Kf(j,Bt,Pe,Ce,y)?Bt:void 0}$e+=rt}}function yg(j,y,$,ee,he,Ee,Ce,Pe,$e){const De=Jf(ee,Ee,Ce),Ve=Qf(ee,he),Ze=Ve*Ce,Xe=j[0].x===0||j[0].x===$e||j[0].y===0||j[0].y===$e;return y-Ze<y/4&&(y=Ze+y/4),e_(j,Xe?y/2*Pe%y:(Ve/2+2*Ee)*Ce*Pe%y,y,De,$,Ze,Xe,!1,$e)}function e_(j,y,$,ee,he,Ee,Ce,Pe,$e){const De=Ee/2,Ve=Yf(j);let Ze=0,Xe=y-$,rt=[];for(let st=0;st<j.length-1;st++){const gt=j[st],At=j[st+1],Bt=gt.dist(At),qt=At.angleTo(gt);for(;Xe+$<Ze+Bt;){Xe+=$;const Ft=(Xe-Ze)/Bt,Ht=qr(gt.x,At.x,Ft),en=qr(gt.y,At.y,Ft);if(Ht>=0&&Ht<$e&&en>=0&&en<$e&&Xe-De>=0&&Xe+De<=Ve){const Zt=new ll(Ht,en,0,qt,st);Zt._round(),ee&&!Kf(j,Zt,Ee,ee,he)||rt.push(Zt)}}Ze+=Bt}return Pe||rt.length||Ce||(rt=e_(j,Ze/2,$,ee,he,Ee,Ce,!0,$e)),rt}function t_(j,y,$,ee,he){const Ee=[];for(let Ce=0;Ce<j.length;Ce++){const Pe=j[Ce];let $e;for(let De=0;De<Pe.length-1;De++){let Ve=Pe[De],Ze=Pe[De+1];Ve.x<y&&Ze.x<y||(Ve.x<y?Ve=new ye(y,Ve.y+(y-Ve.x)/(Ze.x-Ve.x)*(Ze.y-Ve.y))._round():Ze.x<y&&(Ze=new ye(y,Ve.y+(y-Ve.x)/(Ze.x-Ve.x)*(Ze.y-Ve.y))._round()),Ve.y<$&&Ze.y<$||(Ve.y<$?Ve=new ye(Ve.x+($-Ve.y)/(Ze.y-Ve.y)*(Ze.x-Ve.x),$)._round():Ze.y<$&&(Ze=new ye(Ve.x+($-Ve.y)/(Ze.y-Ve.y)*(Ze.x-Ve.x),$)._round()),Ve.x>=ee&&Ze.x>=ee||(Ve.x>=ee?Ve=new ye(ee,Ve.y+(ee-Ve.x)/(Ze.x-Ve.x)*(Ze.y-Ve.y))._round():Ze.x>=ee&&(Ze=new ye(ee,Ve.y+(ee-Ve.x)/(Ze.x-Ve.x)*(Ze.y-Ve.y))._round()),Ve.y>=he&&Ze.y>=he||(Ve.y>=he?Ve=new ye(Ve.x+(he-Ve.y)/(Ze.y-Ve.y)*(Ze.x-Ve.x),he)._round():Ze.y>=he&&(Ze=new ye(Ve.x+(he-Ve.y)/(Ze.y-Ve.y)*(Ze.x-Ve.x),he)._round()),$e&&Ve.equals($e[$e.length-1])||($e=[Ve],Ee.push($e)),$e.push(Ze)))))}}return Ee}cr(ll,"Anchor");const $h=1e20;function n_(j,y,$,ee,he,Ee,Ce,Pe,$e){for(let De=y;De<y+ee;De++)r_(j,$*Ee+De,Ee,he,Ce,Pe,$e);for(let De=$;De<$+he;De++)r_(j,De*Ee+y,1,ee,Ce,Pe,$e)}function r_(j,y,$,ee,he,Ee,Ce){Ee[0]=0,Ce[0]=-$h,Ce[1]=$h,he[0]=j[y];for(let Pe=1,$e=0,De=0;Pe<ee;Pe++){he[Pe]=j[y+Pe*$];const Ve=Pe*Pe;do{const Ze=Ee[$e];De=(he[Pe]-he[Ze]+Ve-Ze*Ze)/(Pe-Ze)/2}while(De<=Ce[$e]&&--$e>-1);$e++,Ee[$e]=Pe,Ce[$e]=De,Ce[$e+1]=$h}for(let Pe=0,$e=0;Pe<ee;Pe++){for(;Ce[$e+1]<Pe;)$e++;const De=Ee[$e],Ve=Pe-De;j[y+Pe*$]=he[De]+Ve*Ve}}const Tp={none:0,ideographs:1,all:2};class Vu{constructor(y,$,ee){this.requestManager=y,this.localGlyphMode=$,this.localFontFamily=ee,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(y){this.url=y}getGlyphs(y,$){const ee=[];for(const he in y)for(const Ee of y[he])ee.push({stack:he,id:Ee});ot(ee,({stack:he,id:Ee},Ce)=>{let Pe=this.entries[he];Pe||(Pe=this.entries[he]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let $e=Pe.glyphs[Ee];if($e!==void 0)return void Ce(null,{stack:he,id:Ee,glyph:$e});if($e=this._tinySDF(Pe,he,Ee),$e)return Pe.glyphs[Ee]=$e,void Ce(null,{stack:he,id:Ee,glyph:$e});const De=Math.floor(Ee/256);if(256*De>65535)return void Ce(new Error("glyphs > 65535 not supported"));if(Pe.ranges[De])return void Ce(null,{stack:he,id:Ee,glyph:$e});let Ve=Pe.requests[De];Ve||(Ve=Pe.requests[De]=[],Vu.loadGlyphRange(he,De,this.url,this.requestManager,(Ze,Xe)=>{if(Xe){Pe.ascender=Xe.ascender,Pe.descender=Xe.descender;for(const rt in Xe.glyphs)this._doesCharSupportLocalGlyph(+rt)||(Pe.glyphs[+rt]=Xe.glyphs[+rt]);Pe.ranges[De]=!0}for(const rt of Ve)rt(Ze,Xe);delete Pe.requests[De]})),Ve.push((Ze,Xe)=>{Ze?Ce(Ze):Xe&&Ce(null,{stack:he,id:Ee,glyph:Xe.glyphs[Ee]||null})})},(he,Ee)=>{if(he)$(he);else if(Ee){const Ce={};for(const{stack:Pe,id:$e,glyph:De}of Ee)Ce[Pe]===void 0&&(Ce[Pe]={}),Ce[Pe].glyphs===void 0&&(Ce[Pe].glyphs={}),Ce[Pe].glyphs[$e]=De&&{id:De.id,bitmap:De.bitmap.clone(),metrics:De.metrics},Ce[Pe].ascender=this.entries[Pe].ascender,Ce[Pe].descender=this.entries[Pe].descender;$(null,Ce)}})}_doesCharSupportLocalGlyph(y){return this.localGlyphMode!==Tp.none&&(this.localGlyphMode===Tp.all?!!this.localFontFamily:!!this.localFontFamily&&(tl(y)||Dc(y)||pi(y)||Hi(y)||Fl(y)))}_tinySDF(y,$,ee){const he=this.localFontFamily;if(!he||!this._doesCharSupportLocalGlyph(ee))return;let Ee=y.tinySDF;if(!Ee){let gt="400";/bold/i.test($)?gt="900":/medium/i.test($)?gt="500":/light/i.test($)&&(gt="200"),Ee=y.tinySDF=new Vu.TinySDF({fontFamily:he,fontWeight:gt,fontSize:48,buffer:6,radius:16}),Ee.fontWeight=gt}if(this.localGlyphs[Ee.fontWeight][ee])return this.localGlyphs[Ee.fontWeight][ee];const Ce=String.fromCharCode(ee),{data:Pe,width:$e,height:De,glyphWidth:Ve,glyphHeight:Ze,glyphLeft:Xe,glyphTop:rt,glyphAdvance:st}=Ee.draw(Ce);return this.localGlyphs[Ee.fontWeight][ee]={id:ee,bitmap:new al({width:$e,height:De},Pe),metrics:{width:Ve/2,height:Ze/2,left:Xe/2,top:rt/2-27,advance:st/2,localGlyph:!0}}}}function i_(j,y,$,ee){const he=[],Ee=j.image,Ce=Ee.pixelRatio,Pe=Ee.paddedRect.w-2,$e=Ee.paddedRect.h-2,De=j.right-j.left,Ve=j.bottom-j.top,Ze=Ee.stretchX||[[0,Pe]],Xe=Ee.stretchY||[[0,$e]],rt=(Cn,Ln)=>Cn+Ln[1]-Ln[0],st=Ze.reduce(rt,0),gt=Xe.reduce(rt,0),At=Pe-st,Bt=$e-gt;let qt=0,Ft=st,Ht=0,en=gt,Zt=0,An=At,bn=0,Mn=Bt;if(Ee.content&&ee){const Cn=Ee.content;qt=Od(Ze,0,Cn[0]),Ht=Od(Xe,0,Cn[1]),Ft=Od(Ze,Cn[0],Cn[2]),en=Od(Xe,Cn[1],Cn[3]),Zt=Cn[0]-qt,bn=Cn[1]-Ht,An=Cn[2]-Cn[0]-Ft,Mn=Cn[3]-Cn[1]-en}const Yn=(Cn,Ln,Un,Bn)=>{const Zn=Rd(Cn.stretch-qt,Ft,De,j.left),Vn=$d(Cn.fixed-Zt,An,Cn.stretch,st),or=Rd(Ln.stretch-Ht,en,Ve,j.top),Or=$d(Ln.fixed-bn,Mn,Ln.stretch,gt),$r=Rd(Un.stretch-qt,Ft,De,j.left),yr=$d(Un.fixed-Zt,An,Un.stretch,st),nr=Rd(Bn.stretch-Ht,en,Ve,j.top),Gr=$d(Bn.fixed-bn,Mn,Bn.stretch,gt),Pr=new ye(Zn,or),hr=new ye($r,or),mi=new ye($r,nr),hi=new ye(Zn,nr),ki=new ye(Vn/Ce,Or/Ce),Nr=new ye(yr/Ce,Gr/Ce),Yr=y*Math.PI/180;if(Yr){const ui=Math.sin(Yr),Ei=Math.cos(Yr),Pi=[Ei,-ui,ui,Ei];Pr._matMult(Pi),hr._matMult(Pi),hi._matMult(Pi),mi._matMult(Pi)}const gi=Cn.stretch+Cn.fixed,di=Ln.stretch+Ln.fixed;return{tl:Pr,tr:hr,bl:hi,br:mi,tex:{x:Ee.paddedRect.x+1+gi,y:Ee.paddedRect.y+1+di,w:Un.stretch+Un.fixed-gi,h:Bn.stretch+Bn.fixed-di},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ki,pixelOffsetBR:Nr,minFontScaleX:An/Ce/De,minFontScaleY:Mn/Ce/Ve,isSDF:$}};if(ee&&(Ee.stretchX||Ee.stretchY)){const Cn=o_(Ze,At,st),Ln=o_(Xe,Bt,gt);for(let Un=0;Un<Cn.length-1;Un++){const Bn=Cn[Un],Zn=Cn[Un+1];for(let Vn=0;Vn<Ln.length-1;Vn++)he.push(Yn(Bn,Ln[Vn],Zn,Ln[Vn+1]))}}else he.push(Yn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Pe+1},{fixed:0,stretch:$e+1}));return he}function Od(j,y,$){let ee=0;for(const he of j)ee+=Math.max(y,Math.min($,he[1]))-Math.max(y,Math.min($,he[0]));return ee}function o_(j,y,$){const ee=[{fixed:-1,stretch:0}];for(const[he,Ee]of j){const Ce=ee[ee.length-1];ee.push({fixed:he-Ce.stretch,stretch:Ce.stretch}),ee.push({fixed:he-Ce.stretch,stretch:Ce.stretch+(Ee-he)})}return ee.push({fixed:y+1,stretch:$}),ee}function Rd(j,y,$,ee){return j/y*$+ee}function $d(j,y,$,ee){return j-y*$/ee}function vg(j,y,$,ee){const he=y+j.positionedLines[ee].lineOffset;return ee===0?$+he/2:$+(he+(y+j.positionedLines[ee-1].lineOffset))/2}Vu.loadGlyphRange=function(j,y,$,ee,he){const Ee=256*y,Ce=Ee+255,Pe=ee.transformRequest(ee.normalizeGlyphsURL($).replace("{fontstack}",j).replace("{range}",`${Ee}-${Ce}`),tn.Glyphs);fn(Pe,($e,De)=>{if($e)he($e);else if(De){const Ve={},Ze=function(Xe){return new Oh(Xe).readFields(hg,{})}(De);for(const Xe of Ze.glyphs)Ve[Xe.id]=Xe;he(null,{glyphs:Ve,ascender:Ze.ascender,descender:Ze.descender})}})},Vu.TinySDF=class{constructor({fontSize:j=24,buffer:y=3,radius:$=8,cutoff:ee=.25,fontFamily:he="sans-serif",fontWeight:Ee="normal",fontStyle:Ce="normal"}={}){this.buffer=y,this.cutoff=ee,this.radius=$;const Pe=this.size=j+4*y,$e=this._createCanvas(Pe),De=this.ctx=$e.getContext("2d",{willReadFrequently:!0});De.font=`${Ce} ${Ee} ${j}px ${he}`,De.textBaseline="alphabetic",De.textAlign="left",De.fillStyle="black",this.gridOuter=new Float64Array(Pe*Pe),this.gridInner=new Float64Array(Pe*Pe),this.f=new Float64Array(Pe),this.z=new Float64Array(Pe+1),this.v=new Uint16Array(Pe)}_createCanvas(j){const y=document.createElement("canvas");return y.width=y.height=j,y}draw(j){const{width:y,actualBoundingBoxAscent:$,actualBoundingBoxDescent:ee,actualBoundingBoxLeft:he,actualBoundingBoxRight:Ee}=this.ctx.measureText(j),Ce=Math.ceil($),Pe=Math.min(this.size-this.buffer,Math.ceil(Ee-he)),$e=Math.min(this.size-this.buffer,Ce+Math.ceil(ee)),De=Pe+2*this.buffer,Ve=$e+2*this.buffer,Ze=Math.max(De*Ve,0),Xe=new Uint8ClampedArray(Ze),rt={data:Xe,width:De,height:Ve,glyphWidth:Pe,glyphHeight:$e,glyphTop:Ce,glyphLeft:0,glyphAdvance:y};if(Pe===0||$e===0)return rt;const{ctx:st,buffer:gt,gridInner:At,gridOuter:Bt}=this;st.clearRect(gt,gt,Pe,$e),st.fillText(j,gt,gt+Ce);const qt=st.getImageData(gt,gt,Pe,$e);Bt.fill($h,0,Ze),At.fill(0,0,Ze);for(let Ft=0;Ft<$e;Ft++)for(let Ht=0;Ht<Pe;Ht++){const en=qt.data[4*(Ft*Pe+Ht)+3]/255;if(en===0)continue;const Zt=(Ft+gt)*De+Ht+gt;if(en===1)Bt[Zt]=0,At[Zt]=$h;else{const An=.5-en;Bt[Zt]=An>0?An*An:0,At[Zt]=An<0?An*An:0}}n_(Bt,0,0,De,Ve,De,this.f,this.v,this.z),n_(At,gt,gt,Pe,$e,De,this.f,this.v,this.z);for(let Ft=0;Ft<Ze;Ft++){const Ht=Math.sqrt(Bt[Ft])-Math.sqrt(At[Ft]);Xe[Ft]=Math.round(255-255*(Ht/this.radius+this.cutoff))}return rt}};class xg{constructor(y=[],$=bg){if(this.data=y,this.length=this.data.length,this.compare=$,this.length>0)for(let ee=(this.length>>1)-1;ee>=0;ee--)this._down(ee)}push(y){this.data.push(y),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const y=this.data[0],$=this.data.pop();return this.length--,this.length>0&&(this.data[0]=$,this._down(0)),y}peek(){return this.data[0]}_up(y){const{data:$,compare:ee}=this,he=$[y];for(;y>0;){const Ee=y-1>>1,Ce=$[Ee];if(ee(he,Ce)>=0)break;$[y]=Ce,y=Ee}$[y]=he}_down(y){const{data:$,compare:ee}=this,he=this.length>>1,Ee=$[y];for(;y<he;){let Ce=1+(y<<1),Pe=$[Ce];const $e=Ce+1;if($e<this.length&&ee($[$e],Pe)<0&&(Ce=$e,Pe=$[$e]),ee(Pe,Ee)>=0)break;$[y]=Pe,y=Ce}$[y]=Ee}}function bg(j,y){return j<y?-1:j>y?1:0}function wg(j,y=1,$=!1){let ee=1/0,he=1/0,Ee=-1/0,Ce=-1/0;const Pe=j[0];for(let rt=0;rt<Pe.length;rt++){const st=Pe[rt];(!rt||st.x<ee)&&(ee=st.x),(!rt||st.y<he)&&(he=st.y),(!rt||st.x>Ee)&&(Ee=st.x),(!rt||st.y>Ce)&&(Ce=st.y)}const $e=Math.min(Ee-ee,Ce-he);let De=$e/2;const Ve=new xg([],Eg);if($e===0)return new ye(ee,he);for(let rt=ee;rt<Ee;rt+=$e)for(let st=he;st<Ce;st+=$e)Ve.push(new Gu(rt+De,st+De,De,j));let Ze=function(rt){let st=0,gt=0,At=0;const Bt=rt[0];for(let qt=0,Ft=Bt.length,Ht=Ft-1;qt<Ft;Ht=qt++){const en=Bt[qt],Zt=Bt[Ht],An=en.x*Zt.y-Zt.x*en.y;gt+=(en.x+Zt.x)*An,At+=(en.y+Zt.y)*An,st+=3*An}return new Gu(gt/st,At/st,0,rt)}(j),Xe=Ve.length;for(;Ve.length;){const rt=Ve.pop();(rt.d>Ze.d||!Ze.d)&&(Ze=rt,$&&console.log("found best %d after %d probes",Math.round(1e4*rt.d)/1e4,Xe)),rt.max-Ze.d<=y||(De=rt.h/2,Ve.push(new Gu(rt.p.x-De,rt.p.y-De,De,j)),Ve.push(new Gu(rt.p.x+De,rt.p.y-De,De,j)),Ve.push(new Gu(rt.p.x-De,rt.p.y+De,De,j)),Ve.push(new Gu(rt.p.x+De,rt.p.y+De,De,j)),Xe+=4)}return $&&(console.log(`num probes: ${Xe}`),console.log(`best distance: ${Ze.d}`)),Ze.p}function Eg(j,y){return y.max-j.max}function Gu(j,y,$,ee){this.p=new ye(j,y),this.h=$,this.d=function(he,Ee){let Ce=!1,Pe=1/0;for(let $e=0;$e<Ee.length;$e++){const De=Ee[$e];for(let Ve=0,Ze=De.length,Xe=Ze-1;Ve<Ze;Xe=Ve++){const rt=De[Ve],st=De[Xe];rt.y>he.y!=st.y>he.y&&he.x<(st.x-rt.x)*(he.y-rt.y)/(st.y-rt.y)+rt.x&&(Ce=!Ce),Pe=Math.min(Pe,To(he,rt,st))}}return(Ce?1:-1)*Math.sqrt(Pe)}(this.p,ee),this.max=this.d+this.h*Math.SQRT2}const kp=Number.POSITIVE_INFINITY,Ag=Math.sqrt(2);function a_(j,y){return y[1]!==kp?function($,ee,he){let Ee=0,Ce=0;switch(ee=Math.abs(ee),he=Math.abs(he),$){case"top-right":case"top-left":case"top":Ce=he-7;break;case"bottom-right":case"bottom-left":case"bottom":Ce=7-he}switch($){case"top-right":case"bottom-right":case"right":Ee=-ee;break;case"top-left":case"bottom-left":case"left":Ee=ee}return[Ee,Ce]}(j,y[0],y[1]):function($,ee){let he=0,Ee=0;ee<0&&(ee=0);const Ce=ee/Ag;switch($){case"top-right":case"top-left":Ee=Ce-7;break;case"bottom-right":case"bottom-left":Ee=7-Ce;break;case"bottom":Ee=7-ee;break;case"top":Ee=ee-7}switch($){case"top-right":case"bottom-right":he=-Ce;break;case"top-left":case"bottom-left":he=Ce;break;case"left":he=ee;break;case"right":he=-ee}return[he,Ee]}(j,y[0])}function Tg(j,y,$,ee,he,Ee,Ce,Pe,$e,De){j.createArrays(),j.tilePixelRatio=Tr/(512*j.overscaling),j.compareText={},j.iconsNeedLinear=!1;const Ve=j.layers[0].layout,Ze=j.layers[0]._unevaluatedLayout._values,Xe={};if(j.textSizeData.kind==="composite"){const{minZoom:gt,maxZoom:At}=j.textSizeData;Xe.compositeTextSizes=[Ze["text-size"].possiblyEvaluate(new Tt(gt),Pe),Ze["text-size"].possiblyEvaluate(new Tt(At),Pe)]}if(j.iconSizeData.kind==="composite"){const{minZoom:gt,maxZoom:At}=j.iconSizeData;Xe.compositeIconSizes=[Ze["icon-size"].possiblyEvaluate(new Tt(gt),Pe),Ze["icon-size"].possiblyEvaluate(new Tt(At),Pe)]}Xe.layoutTextSize=Ze["text-size"].possiblyEvaluate(new Tt($e+1),Pe),Xe.layoutIconSize=Ze["icon-size"].possiblyEvaluate(new Tt($e+1),Pe),Xe.textMaxSize=Ze["text-size"].possiblyEvaluate(new Tt(18),Pe);const rt=Ve.get("text-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",st=Ve.get("text-size");for(const gt of j.features){const At=Ve.get("text-font").evaluate(gt,{},Pe).join(","),Bt=st.evaluate(gt,{},Pe),qt=Xe.layoutTextSize.evaluate(gt,{},Pe),Ft=(Xe.layoutIconSize.evaluate(gt,{},Pe),{horizontal:{},vertical:void 0}),Ht=gt.text;let en,Zt=[0,0];if(Ht){const Mn=Ht.toString(),Yn=Ve.get("text-letter-spacing").evaluate(gt,{},Pe)*uo,Cn=Ve.get("text-line-height").evaluate(gt,{},Pe)*uo,Ln=Fc(Mn)?Yn:0,Un=Ve.get("text-anchor").evaluate(gt,{},Pe),Bn=Ve.get("text-variable-anchor");if(!Bn){const yr=Ve.get("text-radial-offset").evaluate(gt,{},Pe);Zt=yr?a_(Un,[yr*uo,kp]):Ve.get("text-offset").evaluate(gt,{},Pe).map(nr=>nr*uo)}let Zn=rt?"center":Ve.get("text-justify").evaluate(gt,{},Pe);const Vn=Ve.get("symbol-placement"),or=Vn==="point",Or=Vn==="point"?Ve.get("text-max-width").evaluate(gt,{},Pe)*uo:0,$r=yr=>{j.allowVerticalPlacement&&nl(Mn)&&(Ft.vertical=wp(Ht,y,$,he,At,Or,Cn,Un,yr,Ln,Zt,aa.vertical,!0,Vn,qt,Bt))};if(!rt&&Bn){const yr=Zn==="auto"?Bn.map(Gr=>Cp(Gr)):[Zn];let nr=!1;for(let Gr=0;Gr<yr.length;Gr++){const Pr=yr[Gr];if(!Ft.horizontal[Pr])if(nr)Ft.horizontal[Pr]=Ft.horizontal[0];else{const hr=wp(Ht,y,$,he,At,Or,Cn,"center",Pr,Ln,Zt,aa.horizontal,!1,Vn,qt,Bt);hr&&(Ft.horizontal[Pr]=hr,nr=hr.positionedLines.length===1)}}$r("left")}else{if(Zn==="auto"&&(Zn=Cp(Un)),or||Ve.get("text-writing-mode").indexOf("horizontal")>=0||!nl(Mn)){const yr=wp(Ht,y,$,he,At,Or,Cn,Un,Zn,Ln,Zt,aa.horizontal,!1,Vn,qt,Bt);yr&&(Ft.horizontal[Zn]=yr)}$r(Vn==="point"?"left":Zn)}}let An=!1;if(gt.icon&&gt.icon.name){const Mn=ee[gt.icon.name];Mn&&(en=mg(he[gt.icon.name],Ve.get("icon-offset").evaluate(gt,{},Pe),Ve.get("icon-anchor").evaluate(gt,{},Pe)),An=Mn.sdf,j.sdfIcons===void 0?j.sdfIcons=Mn.sdf:j.sdfIcons!==Mn.sdf&&Mt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Mn.pixelRatio!==j.pixelRatio||Ve.get("icon-rotate").constantOr(1)!==0)&&(j.iconsNeedLinear=!0))}const bn=l_(Ft.horizontal)||Ft.vertical;j.iconsInText||(j.iconsInText=!!bn&&bn.iconsInText),(bn||en)&&kg(j,gt,Ft,en,ee,Xe,qt,0,Zt,An,Ce,Pe,De)}Ee&&j.generateCollisionDebugBuffers($e,j.collisionBoxArray)}function Cp(j){switch(j){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kg(j,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe){let rt=Ee.textMaxSize.evaluate(y,{},Ze);rt===void 0&&(rt=Ce);const st=j.layers[0].layout,gt=st.get("icon-offset").evaluate(y,{},Ze),At=l_($.horizontal)||$.vertical,Bt=Xe.name==="globe",qt=Ce/24,Ft=j.tilePixelRatio*rt/24,Ht=(Ln=j.overscaling,j.zoom>18&&Ln>2&&(Ln>>=1),Math.max(Tr/(512*Ln),1)*st.get("symbol-spacing")),en=st.get("text-padding")*j.tilePixelRatio,Zt=st.get("icon-padding")*j.tilePixelRatio,An=Se(st.get("text-max-angle")),bn=st.get("text-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Mn=st.get("icon-rotation-alignment")==="map"&&st.get("symbol-placement")!=="point",Yn=st.get("symbol-placement"),Cn=Ht/2;var Ln;const Un=st.get("icon-text-fit");let Bn;ee&&Un!=="none"&&(j.allowVerticalPlacement&&$.vertical&&(Bn=Xf(ee,$.vertical,Un,st.get("icon-text-fit-padding"),gt,qt)),At&&(ee=Xf(ee,At,Un,st.get("icon-text-fit-padding"),gt,qt)));const Zn=(Vn,or,Or)=>{if(or.x<0||or.x>=Tr||or.y<0||or.y>=Tr)return;let $r=null;if(Bt){const{x:yr,y:nr,z:Gr}=Xe.projectTilePoint(or.x,or.y,Or);$r={anchor:new ll(yr,nr,Gr,0,void 0),up:Xe.upVector(Or,or.x,or.y)}}(function(yr,nr,Gr,Pr,hr,mi,hi,ki,Nr,Yr,gi,di,ui,Ei,Pi,no,Bo,Zr,zi,go,ni,Ii,So,Ci,Fi){const ro=yr.addToLineVertexArray(nr,Pr);let Qi,ho,Po,io,ul,Xu,Hh,qh=0,H_=0,q_=0,W_=0,Gp=-1,Hp=-1;const ws={};let Z_=jc("");const Xc=Gr?Gr.anchor:nr;let qp=0,Wp=0;if(Nr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[qp,Wp]=Nr.layout.get("text-offset").evaluate(ni,{},Fi).map(Xo=>Xo*uo):(qp=Nr.layout.get("text-radial-offset").evaluate(ni,{},Fi)*uo,Wp=kp),yr.allowVerticalPlacement&&hr.vertical){const Xo=hr.vertical;if(Pi)Xu=Sp(Xo),ki&&(Hh=Sp(ki));else{const Ko=Nr.layout.get("text-rotate").evaluate(ni,{},Fi)+90;Po=zd(Yr,Xc,nr,gi,di,ui,Xo,Ei,Ko,no),ki&&(io=zd(Yr,Xc,nr,gi,di,ui,ki,Zr,Ko))}}if(mi){const Xo=Nr.layout.get("icon-rotate").evaluate(ni,{},Fi),Ko=Nr.layout.get("icon-text-fit")!=="none",Wh=i_(mi,Xo,So,Ko),Xp=ki?i_(ki,Xo,So,Ko):void 0;ho=zd(Yr,Xc,nr,gi,di,ui,mi,Zr,Xo),qh=4*Wh.length;const X_=yr.iconSizeData;let Kc=null;X_.kind==="source"?(Kc=[gs*Nr.layout.get("icon-size").evaluate(ni,{},Fi)],Kc[0]>Kl&&Mt(`${yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):X_.kind==="composite"&&(Kc=[gs*Ii.compositeIconSizes[0].evaluate(ni,{},Fi),gs*Ii.compositeIconSizes[1].evaluate(ni,{},Fi)],(Kc[0]>Kl||Kc[1]>Kl)&&Mt(`${yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yr.addSymbols(yr.icon,Wh,Kc,go,zi,ni,!1,Gr,nr,ro.lineStartIndex,ro.lineLength,-1,Ci,Fi),Gp=yr.icon.placedSymbolArray.length-1,Xp&&(H_=4*Xp.length,yr.addSymbols(yr.icon,Xp,Kc,go,zi,ni,aa.vertical,Gr,nr,ro.lineStartIndex,ro.lineLength,-1,Ci,Fi),Hp=yr.icon.placedSymbolArray.length-1)}for(const Xo in hr.horizontal){const Ko=hr.horizontal[Xo];Qi||(Z_=jc(Ko.text),Pi?ul=Sp(Ko):Qi=zd(Yr,Xc,nr,gi,di,ui,Ko,Ei,Nr.layout.get("text-rotate").evaluate(ni,{},Fi),no));const Wh=Ko.positionedLines.length===1;if(q_+=s_(yr,Gr,nr,Ko,hi,Nr,Pi,ni,no,ro,hr.vertical?aa.horizontal:aa.horizontalOnly,Wh?Object.keys(hr.horizontal):[Xo],ws,Gp,Ii,Ci,Fi),Wh)break}hr.vertical&&(W_+=s_(yr,Gr,nr,hr.vertical,hi,Nr,Pi,ni,no,ro,aa.vertical,["vertical"],ws,Hp,Ii,Ci,Fi));let nc=-1;const Zp=(Xo,Ko)=>Xo?Math.max(Xo,Ko):Ko;nc=Zp(ul,nc),nc=Zp(Xu,nc),nc=Zp(Hh,nc);const i0=nc>-1?1:0;yr.glyphOffsetArray.length>=Jl.MAX_GLYPHS&&Mt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ni.sortKey!==void 0&&yr.addToSortKeyRanges(yr.symbolInstances.length,ni.sortKey),yr.symbolInstances.emplaceBack(Xc.x,Xc.y,Xc.z,nr.x,nr.y,ws.right>=0?ws.right:-1,ws.center>=0?ws.center:-1,ws.left>=0?ws.left:-1,ws.vertical>=0?ws.vertical:-1,Gp,Hp,Z_,Qi!==void 0?Qi:yr.collisionBoxArray.length,Qi!==void 0?Qi+1:yr.collisionBoxArray.length,Po!==void 0?Po:yr.collisionBoxArray.length,Po!==void 0?Po+1:yr.collisionBoxArray.length,ho!==void 0?ho:yr.collisionBoxArray.length,ho!==void 0?ho+1:yr.collisionBoxArray.length,io||yr.collisionBoxArray.length,io?io+1:yr.collisionBoxArray.length,gi,q_,W_,qh,H_,i0,0,qp,Wp,nc)})(j,or,$r,Vn,$,ee,he,Bn,j.layers[0],j.collisionBoxArray,y.index,y.sourceLayerIndex,j.index,en,bn,$e,0,Zt,Mn,gt,y,Ee,De,Ve,Ze)};if(Yn==="line")for(const Vn of t_(y.geometry,0,0,Tr,Tr)){const or=yg(Vn,Ht,An,$.vertical||At,ee,24,Ft,j.overscaling,Tr);for(const Or of or){const $r=At;$r&&Cg(j,$r.text,Cn,Or)||Zn(Vn,Or,Ze)}}else if(Yn==="line-center"){for(const Vn of y.geometry)if(Vn.length>1){const or=gg(Vn,An,$.vertical||At,ee,24,Ft);or&&Zn(Vn,or,Ze)}}else if(y.type==="Polygon")for(const Vn of _p(y.geometry,0)){const or=wg(Vn,16);Zn(Vn[0],new ll(or.x,or.y,0,0,void 0),Ze)}else if(y.type==="LineString")for(const Vn of y.geometry)Zn(Vn,new ll(Vn[0].x,Vn[0].y,0,0,void 0),Ze);else if(y.type==="Point")for(const Vn of y.geometry)for(const or of Vn)Zn([or],new ll(or.x,or.y,0,0,void 0),Ze)}const Kl=32640;function s_(j,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st,gt,At){const Bt=function(Ht,en,Zt,An,bn,Mn,Yn,Cn){const Ln=[];if(en.positionedLines.length===0)return Ln;const Un=An.layout.get("text-rotate").evaluate(Mn,{})*Math.PI/180,Bn=function($r){const yr=$r[0],nr=$r[1],Gr=yr*nr;return Gr>0?[yr,-nr]:Gr<0?[-yr,nr]:yr===0?[nr,yr]:[nr,-yr]}(Zt);let Zn=Math.abs(en.top-en.bottom);for(const $r of en.positionedLines)Zn-=$r.lineOffset;const Vn=en.positionedLines.length,or=Zn/Vn;let Or=en.top-Zt[1];for(let $r=0;$r<Vn;++$r){const yr=en.positionedLines[$r];Or=vg(en,or,Or,$r);for(const nr of yr.positionedGlyphs){if(!nr.rect)continue;const Gr=nr.rect||{};let Pr=4,hr=!0,mi=1,hi=0;if(nr.imageName){const Ci=Yn[nr.imageName];if(!Ci)continue;if(Ci.sdf){Mt("SDF images are not supported in formatted text and will be ignored.");continue}hr=!1,mi=Ci.pixelRatio,Pr=1/mi}const ki=(bn||Cn)&&nr.vertical,Nr=nr.metrics.advance*nr.scale/2,Yr=nr.metrics,gi=nr.rect;if(gi===null)continue;Cn&&en.verticalizable&&(hi=nr.imageName?Nr-nr.metrics.width*nr.scale/2:0);const di=bn?[nr.x+Nr,nr.y]:[0,0];let ui=[0,0],Ei=[0,0],Pi=!1;bn||(ki?(Ei=[nr.x+Nr+Bn[0],nr.y+Bn[1]-hi],Pi=!0):ui=[nr.x+Nr+Zt[0],nr.y+Zt[1]-hi]);const no=gi.w*nr.scale/(mi*(nr.localGlyph?2:1)),Bo=gi.h*nr.scale/(mi*(nr.localGlyph?2:1));let Zr,zi,go,ni;if(ki){const Ci=nr.y-Or,Fi=new ye(-Nr,Nr-Ci),ro=-Math.PI/2,Qi=new ye(...Ei);Zr=new ye(-Nr+ui[0],ui[1]),Zr._rotateAround(ro,Fi)._add(Qi),Zr.x+=-Ci+Nr,Zr.y-=(Yr.left-Pr)*nr.scale;const ho=nr.imageName?Yr.advance*nr.scale:uo*nr.scale,Po=String.fromCharCode(nr.glyph);eg(Po)?Zr.x+=(1-Pr)*nr.scale:tg(Po)?Zr.x+=ho-Yr.height*nr.scale+(-Pr-1)*nr.scale:Zr.x+=nr.imageName||Yr.width+2*Pr===gi.w&&Yr.height+2*Pr===gi.h?(ho-Bo)/2:(ho-(Yr.height+2*Pr)*nr.scale)/2,zi=new ye(Zr.x,Zr.y-no),go=new ye(Zr.x+Bo,Zr.y),ni=new ye(Zr.x+Bo,Zr.y-no)}else{const Ci=(Yr.left-Pr)*nr.scale-Nr+ui[0],Fi=(-Yr.top-Pr)*nr.scale+ui[1],ro=Ci+no,Qi=Fi+Bo;Zr=new ye(Ci,Fi),zi=new ye(ro,Fi),go=new ye(Ci,Qi),ni=new ye(ro,Qi)}if(Un){let Ci;Ci=bn?new ye(0,0):Pi?new ye(Bn[0],Bn[1]):new ye(Zt[0],Zt[1]),Zr._rotateAround(Un,Ci),zi._rotateAround(Un,Ci),go._rotateAround(Un,Ci),ni._rotateAround(Un,Ci)}const Ii=new ye(0,0),So=new ye(0,0);Ln.push({tl:Zr,tr:zi,bl:go,br:ni,tex:Gr,writingMode:en.writingMode,glyphOffset:di,sectionIndex:nr.sectionIndex,isSDF:hr,pixelOffsetTL:Ii,pixelOffsetBR:So,minFontScaleX:0,minFontScaleY:0})}}return Ln}(0,ee,$e,Ee,Ce,Pe,he,j.allowVerticalPlacement),qt=j.textSizeData;let Ft=null;qt.kind==="source"?(Ft=[gs*Ee.layout.get("text-size").evaluate(Pe,{},At)],Ft[0]>Kl&&Mt(`${j.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):qt.kind==="composite"&&(Ft=[gs*st.compositeTextSizes[0].evaluate(Pe,{},At),gs*st.compositeTextSizes[1].evaluate(Pe,{},At)],(Ft[0]>Kl||Ft[1]>Kl)&&Mt(`${j.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),j.addSymbols(j.text,Bt,Ft,$e,Ce,Pe,Ve,y,$,De.lineStartIndex,De.lineLength,rt,gt,At);for(const Ht of Ze)Xe[Ht]=j.text.placedSymbolArray.length-1;return 4*Bt.length}function l_(j){for(const y in j)return j[y];return null}function zd(j,y,$,ee,he,Ee,Ce,Pe,$e,De){let Ve=Ce.top,Ze=Ce.bottom,Xe=Ce.left,rt=Ce.right;const st=Ce.collisionPadding;if(st&&(Xe-=st[0],Ve-=st[1],rt+=st[2],Ze+=st[3]),$e){const gt=new ye(Xe,Ve),At=new ye(rt,Ve),Bt=new ye(Xe,Ze),qt=new ye(rt,Ze),Ft=Se($e);let Ht=new ye(0,0);De&&(Ht=new ye(De[0],De[1])),gt._rotateAround(Ft,Ht),At._rotateAround(Ft,Ht),Bt._rotateAround(Ft,Ht),qt._rotateAround(Ft,Ht),Xe=Math.min(gt.x,At.x,Bt.x,qt.x),rt=Math.max(gt.x,At.x,Bt.x,qt.x),Ve=Math.min(gt.y,At.y,Bt.y,qt.y),Ze=Math.max(gt.y,At.y,Bt.y,qt.y)}return j.emplaceBack(y.x,y.y,y.z,$.x,$.y,Xe,Ve,rt,Ze,Pe,ee,he,Ee),j.length-1}function Sp(j){j.collisionPadding&&(j.top-=j.collisionPadding[1],j.bottom+=j.collisionPadding[3]);const y=j.bottom-j.top;return y>0?Math.max(10,y):null}function Cg(j,y,$,ee){const he=j.compareText;if(y in he){const Ee=he[y];for(let Ce=Ee.length-1;Ce>=0;Ce--)if(ee.dist(Ee[Ce])<$)return!0}else he[y]=[];return he[y].push(ee),!1}const Sg=Dn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:c_}=Sg,u_=Dn([{name:"a_pos_3",components:3,type:"Int16"}]);var zh=Dn([{name:"a_pos",type:"Int16",components:2}]);const cl=Tr/Math.PI/2,Pp=2*Do(1,0)*cl*Math.PI,Hu=[64,32,16],Ha=-cl,qa=cl,Pg=[new Lo([Ha,Ha,Ha],[qa,qa,qa]),new Lo([Ha,Ha,Ha],[0,0,qa]),new Lo([0,Ha,Ha],[qa,0,qa]),new Lo([Ha,0,Ha],[0,qa,qa]),new Lo([0,0,Ha],[qa,qa,qa])];function h_(j,y,$,ee=!0){const he=Va([],j._camera.position,j.worldSize),Ee=[y,$,1,1];Gc(Ee,Ee,j.pixelMatrixInverse),nf(Ee,Ee,1/Ee[3]);const Ce=ko([],Ga([],Ee,he)),Pe=j.globeMatrix,$e=[Pe[12],Pe[13],Pe[14]],De=Ga([],$e,he),Ve=xh(De),Ze=ko([],De),Xe=j.worldSize/(2*Math.PI),rt=ba(Ze,Ce),st=Math.asin(Xe/Ve);if(st<Math.acos(rt)){if(!ee)return null;const Yn=[],Cn=[];Va(Yn,Ce,Ve/rt),ko(Cn,Ga(Cn,Yn,De)),ko(Ce,Xl(Ce,De,Va(Ce,Cn,Math.tan(st)*Ve)))}const gt=[];new sp(he,Ce).closestPointOnSphere($e,Xe,gt);const At=ko([],un(Pe,0)),Bt=ko([],un(Pe,1)),qt=ko([],un(Pe,2)),Ft=ba(At,gt),Ht=ba(Bt,gt),en=ba(qt,gt),Zt=Oe(Math.asin(-Ht/Xe));let An=Oe(Math.atan2(Ft,en));An=j.center.lng+function(Yn,Cn){const Ln=(Cn-Yn+180)%360-180;return Ln<-180?Ln+360:Ln}(j.center.lng,An);const bn=va(An),Mn=qe(Ua(Zt),0,1);return new Zl(bn,Mn)}class Ig{constructor(y,$,ee){this.a=Ga([],y,ee),this.b=Ga([],$,ee),this.center=ee;const he=ko([],this.a),Ee=ko([],this.b);this.angle=Math.acos(ba(he,Ee))}}function Ip(j,y){if(j.angle===0)return null;let $;return $=j.a[y]===0?1/j.angle*.5*Math.PI:1/j.angle*Math.atan(j.b[y]/j.a[y]/Math.sin(j.angle)-1/Math.tan(j.angle)),$<0||$>1?null:function(ee,he,Ee,Ce){const Pe=Math.sin(Ee);return ee*(Math.sin((1-Ce)*Ee)/Pe)+he*(Math.sin(Ce*Ee)/Pe)}(j.a[y],j.b[y],j.angle,qe($,0,1))+j.center[y]}function ys(j){if(j.z<=1)return Pg[j.z+2*j.y+j.x];const y=Mp(Dd(j));return Lo.fromPoints(y)}function d_(j,y){const $=Bh(y.zoom);if($===0)return ys(j);const ee=Dd(j),he=Mp(ee),Ee=va(ee.getWest())*y.worldSize,Ce=va(ee.getEast())*y.worldSize,Pe=Ua(ee.getNorth())*y.worldSize,$e=Ua(ee.getSouth())*y.worldSize,De=[Ee,Pe,0],Ve=[Ce,Pe,0],Ze=[Ee,$e,0],Xe=[Ce,$e,0],rt=ep([],y.globeMatrix);return Wi(De,De,rt),Wi(Ve,Ve,rt),Wi(Ze,Ze,rt),Wi(Xe,Xe,rt),he[0]=Ka(he[0],Ze,$),he[1]=Ka(he[1],Xe,$),he[2]=Ka(he[2],Ve,$),he[3]=Ka(he[3],De,$),Lo.fromPoints(he)}function p_(j,y,$,ee,he){for(const Ee of $)Wi(Ee,Ee,ee),Va(Ee,Ee,he),ip(j,j,Ee),op(y,y,Ee)}function Mg(j,y,$){const ee=y/j.worldSize,he=Number.MAX_VALUE,Ee=[-he,-he,-he],Ce=[he,he,he],Pe=j.globeMatrix;if($.z<=1)return p_(Ce,Ee,ys($).getCorners(),Pe,ee),new Lo(Ce,Ee);const $e=Dd($),De=Mp($e);if(p_(Ce,Ee,De,Pe,ee),$e.contains(j.center)){Ee[2]=0;const An=j.point,bn=[An.x*ee,An.y*ee,0];return ip(Ce,Ce,bn),op(Ee,Ee,bn),new Lo(Ce,Ee)}const Ve=[Pe[12]*ee,Pe[13]*ee,Pe[14]*ee],Ze=$e.getCenter(),Xe=qe(j.center.lat,-85.051129,xa),rt=qe(Ze.lat,-85.051129,xa),st=va(j.center.lng),gt=Ua(Xe);let At=st-va(Ze.lng);const Bt=gt-Ua(rt);At>.5?At-=1:At<-.5&&(At+=1);let qt=0;Math.abs(At)>Math.abs(Bt)?qt=At>=0?1:3:(qt=Bt>=0?0:2,yd(Ve,Ve,[Pe[4]*ee,Pe[5]*ee,Pe[6]*ee],-Math.sin(Se(Bt>=0?$e.getSouth():$e.getNorth()))*cl));const Ft=De[qt],Ht=De[(qt+1)%4],en=new Ig(Ft,Ht,Ve),Zt=[Ip(en,0)||Ft[0],Ip(en,1)||Ft[1],Ip(en,2)||Ft[2]];return Ce[2]=Math.min(Ft[2],Ht[2]),ip(Ce,Ce,Zt),op(Ee,Ee,Zt),new Lo(Ce,Ee)}function Dd({x:j,y,z:$}){const ee=1/(1<<$),he=new ei(Ho(j*ee),Yi((y+1)*ee)),Ee=new ei(Ho((j+1)*ee),Yi(y*ee));return new ja(he,Ee)}function Mp(j){const y=Se(j.getNorth()),$=Se(j.getSouth()),ee=Math.cos(y),he=Math.cos($),Ee=Math.sin(y),Ce=Math.sin($),Pe=j.getWest(),$e=j.getEast();return[qu(he,Ce,Pe),qu(he,Ce,$e),qu(ee,Ee,$e),qu(ee,Ee,Pe)]}function qu(j,y,$,ee=cl){return $=Se($),[j*Math.sin($)*ee,-y*ee,j*Math.cos($)*ee]}function Ld(j,y,$){return qu(Math.cos(Se(j)),Math.sin(Se(j)),y,$)}function Dh(j,y,$,ee){const he=1<<$.z,Ee=(j/Tr+$.x)/he;return Ld(Yi((y/Tr+$.y)/he),Ho(Ee),ee)}function Bd({min:j,max:y}){return 16383/Math.max(y[0]-j[0],y[1]-j[1],y[2]-j[2])}const f_=new Float64Array(16);function Lh(j){const y=Bd(j),$=Yp(f_,[y,y,y]);return vh($,$,((ee=[])[0]=-(he=j.min)[0],ee[1]=-he[1],ee[2]=-he[2],ee));var ee,he}function Op(j){const y=(ee=j.min,($=f_)[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=1,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=1,$[11]=0,$[12]=ee[0],$[13]=ee[1],$[14]=ee[2],$[15]=1,$);var $,ee;const he=1/Bd(j);return Vc(y,y,[he,he,he])}function __(j,y,$,ee,he){const Ee=function($e){const De=Tr/(2*Math.PI);return $e/(2*Math.PI)/De}($),Ce=[j,y,-$/(2*Math.PI)],Pe=ms(new Float64Array(16));return vh(Pe,Pe,Ce),Vc(Pe,Pe,[Ee,Ee,Ee]),tp(Pe,Pe,Se(-he)),gd(Pe,Pe,Se(-ee)),Pe}function Bh(j){return Ne(5,6,j)}function m_(j,y){const $=Ld(y.lat,y.lng);return Ee=(ee=rp([],function(rt){const st=Ld(rt._center.lat,rt._center.lng);let gt=ap([],Du(0,1,0),st);const At=Jp([],-rt.angle,st);gt=Wi(gt,gt,At),Jp(At,-rt._pitch,gt);const Bt=ko([],st);return Va(Bt,Bt,rt.cameraToCenterDistance/rt.pixelsPerMeter*Pp),Wi(Bt,Bt,At),Xl([],st,Bt)}(j),$))[0],Ce=ee[1],Pe=ee[2],$e=(he=$)[0],De=he[1],Ve=he[2],Xe=(Ze=Math.sqrt(Ee*Ee+Ce*Ce+Pe*Pe)*Math.sqrt($e*$e+De*De+Ve*Ve))&&ba(ee,he)/Ze,Math.acos(Math.min(Math.max(Xe,-1),1));var ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe}const g_=Se(85),Og=Math.cos(g_),Rg=Math.sin(g_);function y_(j,y){const $=j.fovAboveCenter,ee=j.elevation?j.elevation.getMinElevationBelowMSL()*y:0,he=(j._camera.position[2]*j.worldSize-ee)/Math.cos(j._pitch),Ee=Math.sin($)*he/Math.sin(Math.max(Math.PI/2-j._pitch-$,.01)),Ce=Math.sin(j._pitch)*Ee+he;return Math.min(1.01*Ce,he*(1/j._horizonShift))}function Wc(j,y){if(!y.isReprojectedInTileSpace)return{scale:1<<j.z,x:j.x,y:j.y,x2:j.x+1,y2:j.y+1,projection:y};const $=Math.pow(2,-j.z),ee=j.x*$,he=(j.x+1)*$,Ee=j.y*$,Ce=(j.y+1)*$,Pe=Ho(ee),$e=Ho(he),De=Yi(Ee),Ve=Yi(Ce),Ze=y.project(Pe,De),Xe=y.project($e,De),rt=y.project($e,Ve),st=y.project(Pe,Ve);let gt=Math.min(Ze.x,Xe.x,rt.x,st.x),At=Math.min(Ze.y,Xe.y,rt.y,st.y),Bt=Math.max(Ze.x,Xe.x,rt.x,st.x),qt=Math.max(Ze.y,Xe.y,rt.y,st.y);const Ft=$/16;function Ht(Zt,An,bn,Mn,Yn,Cn){const Ln=(bn+Yn)/2,Un=(Mn+Cn)/2,Bn=y.project(Ho(Ln),Yi(Un)),Zn=Math.max(0,gt-Bn.x,At-Bn.y,Bn.x-Bt,Bn.y-qt);gt=Math.min(gt,Bn.x),Bt=Math.max(Bt,Bn.x),At=Math.min(At,Bn.y),qt=Math.max(qt,Bn.y),Zn>Ft&&(Ht(Zt,Bn,bn,Mn,Ln,Un),Ht(Bn,An,Ln,Un,Yn,Cn))}Ht(Ze,Xe,ee,Ee,he,Ee),Ht(Xe,rt,he,Ee,he,Ce),Ht(rt,st,he,Ce,ee,Ce),Ht(st,Ze,ee,Ce,ee,Ee),gt-=Ft,At-=Ft,Bt+=Ft,qt+=Ft;const en=1/Math.max(Bt-gt,qt-At);return{scale:en,x:gt*en,y:At*en,x2:Bt*en,y2:qt*en,projection:y}}const $g=ms(new Float32Array(16));class Yl{constructor(y){this.spec=y,this.name=y.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(y,$){return{x:0,y:0,z:0}}unproject(y,$){return new ei(0,0)}projectTilePoint(y,$,ee){return{x:y,y:$,z:0}}locationPoint(y,$,ee=!0){return y._coordinatePoint(y.locationCoordinate($),ee)}pixelsPerMeter(y,$){return Do(1,y)*$}pixelSpaceConversion(y,$,ee){return 1}farthestPixelDistance(y){return y_(y,y.pixelsPerMeter)}pointCoordinate(y,$,ee,he){const Ee=y.horizonLineFromTop(!1),Ce=new ye($,Math.max(Ee,ee));return y.rayIntersectionCoordinate(y.pointRayIntersection(Ce,he))}pointCoordinate3D(y,$,ee){const he=new ye($,ee);if(y.elevation)return y.elevation.pointCoordinate(he);{const Ee=this.pointCoordinate(y,he.x,he.y,0);return[Ee.x,Ee.y,Ee.z]}}isPointAboveHorizon(y,$){if(y.elevation)return!this.pointCoordinate3D(y,$.x,$.y);const ee=y.horizonLineFromTop();return $.y<ee}createInversionMatrix(y,$){return $g}createTileMatrix(y,$,ee){let he,Ee,Ce;const Pe=ee.canonical,$e=ms(new Float64Array(16));if(this.isReprojectedInTileSpace){const De=Wc(Pe,this);he=1,Ee=De.x+ee.wrap*De.scale,Ce=De.y,Vc($e,$e,[he/De.scale,he/De.scale,y.pixelsPerMeter/$])}else he=$/y.zoomScale(Pe.z),Ee=(Pe.x+Math.pow(2,Pe.z)*ee.wrap)*he,Ce=Pe.y*he;return vh($e,$e,[Ee,Ce,0]),Vc($e,$e,[he/Tr,he/Tr,1]),$e}upVector(y,$,ee){return[0,0,1]}upVectorScale(y,$,ee){return{metersToTile:1}}}class zg extends Yl{constructor(y){super(y),this.range=[4,7],this.center=y.center||[-96,37.5];const[$,ee]=this.parallels=y.parallels||[29.5,45.5],he=Math.sin(Se($));this.n=(he+Math.sin(Se(ee)))/2,this.c=1+he*(2*this.n-he),this.r0=Math.sqrt(this.c)/this.n}project(y,$){const{n:ee,c:he,r0:Ee}=this,Ce=Se(y-this.center[0]),Pe=Se($),$e=Math.sqrt(he-2*ee*Math.sin(Pe))/ee;return{x:$e*Math.sin(Ce*ee),y:$e*Math.cos(Ce*ee)-Ee,z:0}}unproject(y,$){const{n:ee,c:he,r0:Ee}=this,Ce=Ee+$;let Pe=Math.atan2(y,Math.abs(Ce))*Math.sign(Ce);Ce*ee<0&&(Pe-=Math.PI*Math.sign(y)*Math.sign(Ce));const $e=Se(this.center[0])*ee;Pe=Ke(Pe,-Math.PI-$e,Math.PI-$e);const De=Oe(Pe/ee)+this.center[0],Ve=Math.asin(qe((he-(y*y+Ce*Ce)*ee*ee)/(2*ee),-1,1)),Ze=qe(Oe(Ve),-85.051129,xa);return new ei(De,Ze)}}const Fh=1.340264,Nh=-.081106,jh=893e-6,Uh=.003796,Fd=Math.sqrt(3)/2;class Dg extends Yl{project(y,$){$=$/180*Math.PI,y=y/180*Math.PI;const ee=Math.asin(Fd*Math.sin($)),he=ee*ee,Ee=he*he*he;return{x:.5*(y*Math.cos(ee)/(Fd*(Fh+3*Nh*he+Ee*(7*jh+9*Uh*he)))/Math.PI+.5),y:1-.5*(ee*(Fh+Nh*he+Ee*(jh+Uh*he))/Math.PI+1),z:0}}unproject(y,$){y=(2*y-.5)*Math.PI;let ee=$=(2*(1-$)-1)*Math.PI,he=ee*ee,Ee=he*he*he;for(let Ve,Ze,Xe,rt=0;rt<12&&(Ze=ee*(Fh+Nh*he+Ee*(jh+Uh*he))-$,Xe=Fh+3*Nh*he+Ee*(7*jh+9*Uh*he),Ve=Ze/Xe,ee=qe(ee-Ve,-Math.PI/3,Math.PI/3),he=ee*ee,Ee=he*he*he,!(Math.abs(Ve)<1e-12));++rt);const Ce=Fd*y*(Fh+3*Nh*he+Ee*(7*jh+9*Uh*he))/Math.cos(ee),Pe=Math.asin(Math.sin(ee)/Fd),$e=qe(180*Ce/Math.PI,-180,180),De=qe(180*Pe/Math.PI,-85.051129,xa);return new ei($e,De)}}class Lg extends Yl{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0}project(y,$){return{x:.5+y/360,y:.5-$/360,z:0}}unproject(y,$){const ee=360*(y-.5),he=qe(360*(.5-$),-85.051129,xa);return new ei(ee,he)}}const Wu=Math.PI/2;function Nd(j){return Math.tan((Wu+j)/2)}class Bg extends Yl{constructor(y){super(y),this.center=y.center||[0,30];const[$,ee]=this.parallels=y.parallels||[30,30],he=Se($),Ee=Se(ee),Ce=Math.cos(he);this.n=he===Ee?Math.sin(he):Math.log(Ce/Math.cos(Ee))/Math.log(Nd(Ee)/Nd(he)),this.f=Ce*Math.pow(Nd(he),this.n)/this.n}project(y,$){$=Se($),y=Se(y-this.center[0]);const ee=1e-6,{n:he,f:Ee}=this;Ee>0?$<-Wu+ee&&($=-Wu+ee):$>Wu-ee&&($=Wu-ee);const Ce=Ee/Math.pow(Nd($),he),Pe=Ce*Math.sin(he*y),$e=Ee-Ce*Math.cos(he*y);return{x:.5*(Pe/Math.PI+.5),y:1-.5*($e/Math.PI+.5),z:0}}unproject(y,$){y=(2*y-.5)*Math.PI,$=(2*(1-$)-.5)*Math.PI;const{n:ee,f:he}=this,Ee=he-$,Ce=Math.sign(Ee),Pe=Math.sign(ee)*Math.sqrt(y*y+Ee*Ee);let $e=Math.atan2(y,Math.abs(Ee))*Ce;Ee*ee<0&&($e-=Math.PI*Math.sign(y)*Ce);const De=qe(Oe($e/ee)+this.center[0],-180,180),Ve=qe(Oe(2*Math.atan(Math.pow(he/Pe,1/ee))-Wu),-85.051129,xa);return new ei(De,Ve)}}class v_ extends Yl{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(y,$){return{x:va(y),y:Ua($),z:0}}unproject(y,$){const ee=Ho(y),he=Yi($);return new ei(ee,he)}}const x_=Se(xa);class Fg extends Yl{project(y,$){const ee=($=Se($))*$,he=ee*ee;return{x:.5*((y=Se(y))*(.8707-.131979*ee+he*(he*(.003971*ee-.001529*he)-.013791))/Math.PI+.5),y:1-.5*($*(1.007226+ee*(.015085+he*(.028874*ee-.044475-.005916*he)))/Math.PI+1),z:0}}unproject(y,$){y=(2*y-.5)*Math.PI;let ee=$=(2*(1-$)-1)*Math.PI,he=25,Ee=0,Ce=ee*ee;do{Ce=ee*ee;const De=Ce*Ce;Ee=(ee*(1.007226+Ce*(.015085+De*(.028874*Ce-.044475-.005916*De)))-$)/(1.007226+Ce*(.045255+De*(.259866*Ce-.311325-.005916*11*De))),ee=qe(ee-Ee,-x_,x_)}while(Math.abs(Ee)>1e-6&&--he>0);Ce=ee*ee;const Pe=qe(Oe(y/(.8707+Ce*(Ce*(Ce*Ce*Ce*(.003971-.001529*Ce)-.013791)-.131979))),-180,180),$e=Oe(ee);return new ei(Pe,$e)}}const b_=Se(xa);class Ng extends Yl{project(y,$){$=Se($),y=Se(y);const ee=Math.cos($),he=2/Math.PI,Ee=Math.acos(ee*Math.cos(y/2)),Ce=Math.sin(Ee)/Ee,Pe=.5*(y*he+2*ee*Math.sin(y/2)/Ce)||0,$e=.5*($+Math.sin($)/Ce)||0;return{x:.5*(Pe/Math.PI+.5),y:1-.5*($e/Math.PI+1),z:0}}unproject(y,$){let ee=y=(2*y-.5)*Math.PI,he=$=(2*(1-$)-1)*Math.PI,Ee=25;const Ce=1e-6;let Pe=0,$e=0;do{const De=Math.cos(he),Ve=Math.sin(he),Ze=2*Ve*De,Xe=Ve*Ve,rt=De*De,st=Math.cos(ee/2),gt=Math.sin(ee/2),At=2*st*gt,Bt=gt*gt,qt=1-rt*st*st,Ft=qt?1/qt:0,Ht=qt?Math.acos(De*st)*Math.sqrt(1/qt):0,en=.5*(2*Ht*De*gt+2*ee/Math.PI)-y,Zt=.5*(Ht*Ve+he)-$,An=.5*Ft*(rt*Bt+Ht*De*st*Xe)+1/Math.PI,bn=Ft*(At*Ze/4-Ht*Ve*gt),Mn=.125*Ft*(Ze*gt-Ht*Ve*rt*At),Yn=.5*Ft*(Xe*st+Ht*Bt*De)+.5,Cn=bn*Mn-Yn*An;Pe=(Zt*bn-en*Yn)/Cn,$e=(en*Mn-Zt*An)/Cn,ee=qe(ee-Pe,-Math.PI,Math.PI),he=qe(he-$e,-b_,b_)}while((Math.abs(Pe)>Ce||Math.abs($e)>Ce)&&--Ee>0);return new ei(Oe(ee),Oe(he))}}class w_ extends Yl{constructor(y){super(y),this.center=y.center||[0,0],this.parallels=y.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Se(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(y,$){const{scale:ee,cosPhi:he}=this;return{x:Se(y)*he*ee+.5,y:-Math.sin(Se($))/he*ee+.5,z:0}}unproject(y,$){const{scale:ee,cosPhi:he}=this,Ee=-($-.5)/ee,Ce=qe(Oe((y-.5)/ee)/he,-180,180),Pe=Math.asin(qe(Ee*he,-1,1)),$e=qe(Oe(Pe),-85.051129,xa);return new ei(Ce,$e)}}class jg extends v_{constructor(y){super(y),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(y,$,ee){const he=Dh(y,$,ee);return Wi(he,he,Lh(ys(ee))),{x:he[0],y:he[1],z:he[2]}}locationPoint(y,$){const ee=Ld($.lat,$.lng),he=ko([],ee),Ee=y.elevation?y.elevation.getAtPointOrZero(y.locationCoordinate($),y._centerAltitude):y._centerAltitude;yd(ee,ee,he,Do(1,0)*Tr*Ee);const Ce=ms(new Float64Array(16));return zu(Ce,y.pixelMatrix,y.globeMatrix),Wi(ee,ee,Ce),new ye(ee[0],ee[1])}pixelsPerMeter(y,$){return Do(1,0)*$}pixelSpaceConversion(y,$,ee){const he=qr(Do(1,45)*$,Do(1,y)*$,ee);return this.pixelsPerMeter(y,$)/he}createTileMatrix(y,$,ee){const he=Op(ys(ee.canonical));return zu(new Float64Array(16),y.globeMatrix,he)}createInversionMatrix(y,$){const{center:ee}=y,he=Lh(ys($));return gd(he,he,Se(ee.lng)),tp(he,he,Se(ee.lat)),Vc(he,he,[y._pixelsPerMercatorPixel,y._pixelsPerMercatorPixel,1]),Float32Array.from(he)}pointCoordinate(y,$,ee,he){return h_(y,$,ee,!0)||new Zl(0,0)}pointCoordinate3D(y,$,ee){const he=this.pointCoordinate(y,$,ee,0);return[he.x,he.y,he.z]}isPointAboveHorizon(y,$){return!h_(y,$.x,$.y,!1)}farthestPixelDistance(y){const $=function(he,Ee){const Ce=he.cameraToCenterDistance,Pe=he._centerAltitude*Ee,$e=he._camera,De=he._camera.forward(),Ve=Xl([],Va([],De,-Ce),[0,0,Pe]),Ze=he.worldSize/(2*Math.PI),Xe=[0,0,-Ze],rt=he.width/he.height,st=Math.tan(he.fovAboveCenter),gt=Va([],$e.up(),st),At=Va([],$e.right(),st*rt),Bt=ko([],Xl([],Xl([],De,gt),At)),qt=[];let Ft;if(new sp(Ve,Bt).closestPointOnSphere(Xe,Ze,qt)){const Ht=Xl([],qt,Xe),en=Ga([],Ht,Ve);Ft=Math.cos(he.fovAboveCenter)*xh(en)}else{const Ht=Ga([],Ve,Xe),en=Ga([],Xe,Ve);ko(en,en);const Zt=xh(Ht)-Ze;Ft=Math.sqrt(Zt*(Zt+2*Ze));const An=Math.acos(Ft/(Ze+Zt))-Math.acos(ba(De,en));Ft*=Math.cos(An)}return 1.01*Ft}(y,this.pixelsPerMeter(y.center.lat,y.worldSize)),ee=Bh(y.zoom);if(ee>0){const he=y_(y,Do(1,y.center.lat)*y.worldSize),Ee=y.worldSize/(2*Math.PI),Ce=Math.max(y.width,y.height)/y.worldSize*Math.PI;return qr($,he+Ee*(1-Math.cos(Ce)),Math.pow(ee,10))}return $}upVector(y,$,ee){return Dh($,ee,y,1)}upVectorScale(y){return{metersToTile:Pp*Bd(ys(y))}}}function E_(j){const y=j.parallels,$=!!y&&Math.abs(y[0]+y[1])<.01;switch(j.name){case"mercator":return new v_(j);case"equirectangular":return new Lg(j);case"naturalEarth":return new Fg(j);case"equalEarth":return new Dg(j);case"winkelTripel":return new Ng(j);case"albers":return $?new w_(j):new zg(j);case"lambertConformalConic":return $?new w_(j):new Bg(j);case"globe":return new jg(j)}throw new Error(`Invalid projection name: ${j.name}`)}const Ug=qc.VectorTileFeature.types,Vg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jd(j,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe){const rt=Pe?Math.min(Kl,Math.round(Pe[0])):0,st=Pe?Math.min(Kl,Math.round(Pe[1])):0;j.emplaceBack(y,$,Math.round(32*ee),Math.round(32*he),Ee,Ce,(rt<<1)+($e?1:0),st,16*De,16*Ve,256*Ze,256*Xe)}function Ud(j,y,$,ee,he,Ee,Ce){j.emplaceBack(y,$,ee,he,Ee,Ce)}function Vd(j,y,$,ee,he){j.emplaceBack(y,$,ee,he),j.emplaceBack(y,$,ee,he),j.emplaceBack(y,$,ee,he),j.emplaceBack(y,$,ee,he)}function Gg(j){for(const y of j.sections)if(ce(y.text))return!0;return!1}class Rp{constructor(y){this.layoutVertexArray=new li,this.indexArray=new Rr,this.programConfigurations=y,this.segments=new Li,this.dynamicLayoutVertexArray=new Ur,this.opacityVertexArray=new ii,this.placedSymbolArray=new Zh,this.globeExtVertexArray=new bi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(y,$,ee,he){this.isEmpty()||(ee&&(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,qm.members),this.indexBuffer=y.createIndexBuffer(this.indexArray,$),this.dynamicLayoutVertexBuffer=y.createVertexBuffer(this.dynamicLayoutVertexArray,Zm.members,!0),this.opacityVertexBuffer=y.createVertexBuffer(this.opacityVertexArray,Vg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,Wm.members,!0)),this.opacityVertexBuffer.itemSize=1),(ee||he)&&this.programConfigurations.upload(y))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}cr(Rp,"SymbolBuffers");class $p{constructor(y,$,ee){this.layoutVertexArray=new y,this.layoutAttributes=$,this.indexArray=new ee,this.segments=new Li,this.collisionVertexArray=new fi,this.collisionVertexArrayExt=new yi}upload(y){this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=y.createVertexBuffer(this.collisionVertexArray,Xm.members,!0),this.collisionVertexBufferExt=y.createVertexBuffer(this.collisionVertexArrayExt,Km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}cr($p,"CollisionBuffers");class Jl{constructor(y){this.collisionBoxArray=y.collisionBoxArray,this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(Ce=>Ce.id),this.index=y.index,this.pixelRatio=y.pixelRatio,this.sourceLayerIndex=y.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ms([]),this.placementViewportMatrix=ms([]);const $=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yp(this.zoom,$["text-size"]),this.iconSizeData=yp(this.zoom,$["icon-size"]);const ee=this.layers[0].layout,he=ee.get("symbol-sort-key"),Ee=ee.get("symbol-z-order");this.canOverlap=ee.get("text-allow-overlap")||ee.get("icon-allow-overlap")||ee.get("text-ignore-placement")||ee.get("icon-ignore-placement"),this.sortFeaturesByKey=Ee!=="viewport-y"&&he.constantOr(1)!==void 0,this.sortFeaturesByY=(Ee==="viewport-y"||Ee==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=ee.get("text-writing-mode").map(Ce=>aa[Ce]),this.stateDependentLayerIds=this.layers.filter(Ce=>Ce.isStateDependent()).map(Ce=>Ce.id),this.sourceID=y.sourceID,this.projection=y.projection}createArrays(){this.text=new Rp(new ol(this.layers,this.zoom,y=>/^text/.test(y))),this.icon=new Rp(new ol(this.layers,this.zoom,y=>/^icon/.test(y))),this.glyphOffsetArray=new dh,this.lineVertexArray=new Yh,this.symbolInstances=new Kh}calculateGlyphDependencies(y,$,ee,he,Ee){for(let Ce=0;Ce<y.length;Ce++)if($[y.charCodeAt(Ce)]=!0,he&&Ee){const Pe=Mh[y.charAt(Ce)];Pe&&($[Pe.charCodeAt(0)]=!0)}}populate(y,$,ee,he){const Ee=this.layers[0],Ce=Ee.layout,Pe=this.projection.name==="globe",$e=Ce.get("text-font"),De=Ce.get("text-field"),Ve=Ce.get("icon-image"),Ze=(De.value.kind!=="constant"||De.value.value instanceof oo&&!De.value.value.isEmpty()||De.value.value.toString().length>0)&&($e.value.kind!=="constant"||$e.value.value.length>0),Xe=Ve.value.kind!=="constant"||!!Ve.value.value||Object.keys(Ve.parameters).length>0,rt=Ce.get("symbol-sort-key");if(this.features=[],!Ze&&!Xe)return;const st=$.iconDependencies,gt=$.glyphDependencies,At=$.availableImages,Bt=new Tt(this.zoom);for(const{feature:qt,id:Ft,index:Ht,sourceLayerIndex:en}of y){const Zt=Ee._featureFilter.needGeometry,An=Ge(qt,Zt);if(!Ee._featureFilter.filter(Bt,An,ee))continue;if(Zt||(An.geometry=wt(qt,ee,he)),Pe&&qt.type!==1&&ee.z<=5){const Cn=An.geometry,Ln=.98078528056;for(let Un=0;Un<Cn.length;Un++)Cn[Un]=pd(Cn[Un],Bn=>Bn,(Bn,Zn)=>ba(Dh(Bn.x,Bn.y,ee,1),Dh(Zn.x,Zn.y,ee,1))<Ln)}let bn,Mn;if(Ze){const Cn=Ee.getValueAndResolveTokens("text-field",An,ee,At),Ln=oo.factory(Cn);Gg(Ln)&&(this.hasRTLText=!0),(!this.hasRTLText||xt()==="unavailable"||this.hasRTLText&&kt.isParsed())&&(bn=Qm(Ln,Ee,An))}if(Xe){const Cn=Ee.getValueAndResolveTokens("icon-image",An,ee,At);Mn=Cn instanceof ao?Cn:ao.fromString(Cn)}if(!bn&&!Mn)continue;const Yn=this.sortFeaturesByKey?rt.evaluate(An,{},ee):void 0;if(this.features.push({id:Ft,text:bn,icon:Mn,index:Ht,sourceLayerIndex:en,geometry:An.geometry,properties:qt.properties,type:Ug[qt.type],sortKey:Yn}),Mn&&(st[Mn.name]=!0),bn){const Cn=$e.evaluate(An,{},ee).join(","),Ln=Ce.get("text-rotation-alignment")==="map"&&Ce.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(aa.vertical)>=0;for(const Un of bn.sections)if(Un.image)st[Un.image.name]=!0;else{const Bn=nl(bn.toString()),Zn=Un.fontStack||Cn,Vn=gt[Zn]=gt[Zn]||{};this.calculateGlyphDependencies(Un.text,Vn,Ln,this.allowVerticalPlacement,Bn)}}}Ce.get("symbol-placement")==="line"&&(this.features=function(qt){const Ft={},Ht={},en=[];let Zt=0;function An(Cn){en.push(qt[Cn]),Zt++}function bn(Cn,Ln,Un){const Bn=Ht[Cn];return delete Ht[Cn],Ht[Ln]=Bn,en[Bn].geometry[0].pop(),en[Bn].geometry[0]=en[Bn].geometry[0].concat(Un[0]),Bn}function Mn(Cn,Ln,Un){const Bn=Ft[Ln];return delete Ft[Ln],Ft[Cn]=Bn,en[Bn].geometry[0].shift(),en[Bn].geometry[0]=Un[0].concat(en[Bn].geometry[0]),Bn}function Yn(Cn,Ln,Un){const Bn=Un?Ln[0][Ln[0].length-1]:Ln[0][0];return`${Cn}:${Bn.x}:${Bn.y}`}for(let Cn=0;Cn<qt.length;Cn++){const Ln=qt[Cn],Un=Ln.geometry,Bn=Ln.text?Ln.text.toString():null;if(!Bn){An(Cn);continue}const Zn=Yn(Bn,Un),Vn=Yn(Bn,Un,!0);if(Zn in Ht&&Vn in Ft&&Ht[Zn]!==Ft[Vn]){const or=Mn(Zn,Vn,Un),Or=bn(Zn,Vn,en[or].geometry);delete Ft[Zn],delete Ht[Vn],Ht[Yn(Bn,en[Or].geometry,!0)]=Or,en[or].geometry=null}else Zn in Ht?bn(Zn,Vn,Un):Vn in Ft?Mn(Zn,Vn,Un):(An(Cn),Ft[Zn]=Zt-1,Ht[Vn]=Zt-1)}return en.filter(Cn=>Cn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qt,Ft)=>qt.sortKey-Ft.sortKey)}update(y,$,ee,he){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(y,$,this.layers,ee,he),this.icon.programConfigurations.updatePaintArrays(y,$,this.layers,ee,he))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(y){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(y),this.iconCollisionBox.upload(y)),this.text.upload(y,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(y,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=E_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(y,$){const ee=this.lineVertexArray.length,he=y.segment;if(he!==void 0){let Ee=y.dist($[he+1]),Ce=y.dist($[he]);const Pe={};for(let $e=he+1;$e<$.length;$e++)Pe[$e]={x:$[$e].x,y:$[$e].y,tileUnitDistanceFromAnchor:Ee},$e<$.length-1&&(Ee+=$[$e+1].dist($[$e]));for(let $e=he||0;$e>=0;$e--)Pe[$e]={x:$[$e].x,y:$[$e].y,tileUnitDistanceFromAnchor:Ce},$e>0&&(Ce+=$[$e-1].dist($[$e]));for(let $e=0;$e<$.length;$e++){const De=Pe[$e];this.lineVertexArray.emplaceBack(De.x,De.y,De.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ee,lineLength:this.lineVertexArray.length-ee}}addSymbols(y,$,ee,he,Ee,Ce,Pe,$e,De,Ve,Ze,Xe,rt,st){const gt=y.indexArray,At=y.layoutVertexArray,Bt=y.globeExtVertexArray,qt=y.segments.prepareSegment(4*$.length,At,gt,this.canOverlap?Ce.sortKey:void 0),Ft=this.glyphOffsetArray.length,Ht=qt.vertexLength,en=this.allowVerticalPlacement&&Pe===aa.vertical?Math.PI/2:0,Zt=Ce.text&&Ce.text.sections;for(let bn=0;bn<$.length;bn++){const{tl:Mn,tr:Yn,bl:Cn,br:Ln,tex:Un,pixelOffsetTL:Bn,pixelOffsetBR:Zn,minFontScaleX:Vn,minFontScaleY:or,glyphOffset:Or,isSDF:$r,sectionIndex:yr}=$[bn],nr=qt.vertexLength,Gr=Or[1];if(jd(At,De.x,De.y,Mn.x,Gr+Mn.y,Un.x,Un.y,ee,$r,Bn.x,Bn.y,Vn,or),jd(At,De.x,De.y,Yn.x,Gr+Yn.y,Un.x+Un.w,Un.y,ee,$r,Zn.x,Bn.y,Vn,or),jd(At,De.x,De.y,Cn.x,Gr+Cn.y,Un.x,Un.y+Un.h,ee,$r,Bn.x,Zn.y,Vn,or),jd(At,De.x,De.y,Ln.x,Gr+Ln.y,Un.x+Un.w,Un.y+Un.h,ee,$r,Zn.x,Zn.y,Vn,or),$e){const Pr=$e.anchor,hr=$e.up;Ud(Bt,Pr.x,Pr.y,Pr.z,hr[0],hr[1],hr[2]),Ud(Bt,Pr.x,Pr.y,Pr.z,hr[0],hr[1],hr[2]),Ud(Bt,Pr.x,Pr.y,Pr.z,hr[0],hr[1],hr[2]),Ud(Bt,Pr.x,Pr.y,Pr.z,hr[0],hr[1],hr[2]),Vd(y.dynamicLayoutVertexArray,Pr.x,Pr.y,Pr.z,en)}else Vd(y.dynamicLayoutVertexArray,De.x,De.y,De.z,en);gt.emplaceBack(nr,nr+1,nr+2),gt.emplaceBack(nr+1,nr+2,nr+3),qt.vertexLength+=4,qt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Or[0]),bn!==$.length-1&&yr===$[bn+1].sectionIndex||y.programConfigurations.populatePaintArrays(At.length,Ce,Ce.index,{},rt,st,Zt&&Zt[yr])}const An=$e?$e.anchor:De;y.placedSymbolArray.emplaceBack(An.x,An.y,An.z,De.x,De.y,Ft,this.glyphOffsetArray.length-Ft,Ht,Ve,Ze,De.segment,ee?ee[0]:0,ee?ee[1]:0,he[0],he[1],Pe,0,!1,0,Xe,0)}_commitLayoutVertex(y,$,ee,he,Ee,Ce,Pe){y.emplaceBack($,ee,he,Ee,Ce,Math.round(Pe.x),Math.round(Pe.y))}_addCollisionDebugVertices(y,$,ee,he,Ee,Ce,Pe){const $e=ee.segments.prepareSegment(4,ee.layoutVertexArray,ee.indexArray),De=$e.vertexLength,Ve=Pe.tileAnchorX,Ze=Pe.tileAnchorY;for(let rt=0;rt<4;rt++)ee.collisionVertexArray.emplaceBack(0,0,0,0);ee.collisionVertexArrayExt.emplaceBack($,-y.padding,-y.padding),ee.collisionVertexArrayExt.emplaceBack($,y.padding,-y.padding),ee.collisionVertexArrayExt.emplaceBack($,y.padding,y.padding),ee.collisionVertexArrayExt.emplaceBack($,-y.padding,y.padding),this._commitLayoutVertex(ee.layoutVertexArray,he,Ee,Ce,Ve,Ze,new ye(y.x1,y.y1)),this._commitLayoutVertex(ee.layoutVertexArray,he,Ee,Ce,Ve,Ze,new ye(y.x2,y.y1)),this._commitLayoutVertex(ee.layoutVertexArray,he,Ee,Ce,Ve,Ze,new ye(y.x2,y.y2)),this._commitLayoutVertex(ee.layoutVertexArray,he,Ee,Ce,Ve,Ze,new ye(y.x1,y.y2)),$e.vertexLength+=4;const Xe=ee.indexArray;Xe.emplaceBack(De,De+1),Xe.emplaceBack(De+1,De+2),Xe.emplaceBack(De+2,De+3),Xe.emplaceBack(De+3,De),$e.primitiveLength+=4}_addTextDebugCollisionBoxes(y,$,ee,he,Ee,Ce){for(let Pe=he;Pe<Ee;Pe++){const $e=ee.get(Pe),De=this.getSymbolInstanceTextSize(y,Ce,$,Pe);this._addCollisionDebugVertices($e,De,this.textCollisionBox,$e.projectedAnchorX,$e.projectedAnchorY,$e.projectedAnchorZ,Ce)}}_addIconDebugCollisionBoxes(y,$,ee,he,Ee,Ce){for(let Pe=he;Pe<Ee;Pe++){const $e=ee.get(Pe),De=this.getSymbolInstanceIconSize(y,$,Pe);this._addCollisionDebugVertices($e,De,this.iconCollisionBox,$e.projectedAnchorX,$e.projectedAnchorY,$e.projectedAnchorZ,Ce)}}generateCollisionDebugBuffers(y,$){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $p(Eo,Df.members,eo),this.iconCollisionBox=new $p(Eo,Df.members,eo);const ee=Fu(this.iconSizeData,y),he=Fu(this.textSizeData,y);for(let Ee=0;Ee<this.symbolInstances.length;Ee++){const Ce=this.symbolInstances.get(Ee);this._addTextDebugCollisionBoxes(he,y,$,Ce.textBoxStartIndex,Ce.textBoxEndIndex,Ce),this._addTextDebugCollisionBoxes(he,y,$,Ce.verticalTextBoxStartIndex,Ce.verticalTextBoxEndIndex,Ce),this._addIconDebugCollisionBoxes(ee,y,$,Ce.iconBoxStartIndex,Ce.iconBoxEndIndex,Ce),this._addIconDebugCollisionBoxes(ee,y,$,Ce.verticalIconBoxStartIndex,Ce.verticalIconBoxEndIndex,Ce)}}getSymbolInstanceTextSize(y,$,ee,he){const Ee=this.text.placedSymbolArray.get($.rightJustifiedTextSymbolIndex>=0?$.rightJustifiedTextSymbolIndex:$.centerJustifiedTextSymbolIndex>=0?$.centerJustifiedTextSymbolIndex:$.leftJustifiedTextSymbolIndex>=0?$.leftJustifiedTextSymbolIndex:$.verticalPlacedTextSymbolIndex>=0?$.verticalPlacedTextSymbolIndex:he),Ce=Pd(this.textSizeData,y,Ee)/uo;return this.tilePixelRatio*Ce}getSymbolInstanceIconSize(y,$,ee){const he=this.icon.placedSymbolArray.get(ee),Ee=Pd(this.iconSizeData,y,he);return this.tilePixelRatio*Ee}_commitDebugCollisionVertexUpdate(y,$,ee){y.emplaceBack($,-ee,-ee),y.emplaceBack($,ee,-ee),y.emplaceBack($,ee,ee),y.emplaceBack($,-ee,ee)}_updateTextDebugCollisionBoxes(y,$,ee,he,Ee,Ce){for(let Pe=he;Pe<Ee;Pe++){const $e=ee.get(Pe),De=this.getSymbolInstanceTextSize(y,Ce,$,Pe);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,De,$e.padding)}}_updateIconDebugCollisionBoxes(y,$,ee,he,Ee){for(let Ce=he;Ce<Ee;Ce++){const Pe=ee.get(Ce),$e=this.getSymbolInstanceIconSize(y,$,Ce);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,$e,Pe.padding)}}updateCollisionDebugBuffers(y,$){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const ee=Fu(this.iconSizeData,y),he=Fu(this.textSizeData,y);for(let Ee=0;Ee<this.symbolInstances.length;Ee++){const Ce=this.symbolInstances.get(Ee);this._updateTextDebugCollisionBoxes(he,y,$,Ce.textBoxStartIndex,Ce.textBoxEndIndex,Ce),this._updateTextDebugCollisionBoxes(he,y,$,Ce.verticalTextBoxStartIndex,Ce.verticalTextBoxEndIndex,Ce),this._updateIconDebugCollisionBoxes(ee,y,$,Ce.iconBoxStartIndex,Ce.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(ee,y,$,Ce.verticalIconBoxStartIndex,Ce.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(y,$,ee,he,Ee,Ce,Pe,$e,De){const Ve={};for(let Ze=$;Ze<ee;Ze++){const Xe=y.get(Ze);Ve.textBox={x1:Xe.x1,y1:Xe.y1,x2:Xe.x2,y2:Xe.y2,padding:Xe.padding,projectedAnchorX:Xe.projectedAnchorX,projectedAnchorY:Xe.projectedAnchorY,projectedAnchorZ:Xe.projectedAnchorZ,tileAnchorX:Xe.tileAnchorX,tileAnchorY:Xe.tileAnchorY},Ve.textFeatureIndex=Xe.featureIndex;break}for(let Ze=he;Ze<Ee;Ze++){const Xe=y.get(Ze);Ve.verticalTextBox={x1:Xe.x1,y1:Xe.y1,x2:Xe.x2,y2:Xe.y2,padding:Xe.padding,projectedAnchorX:Xe.projectedAnchorX,projectedAnchorY:Xe.projectedAnchorY,projectedAnchorZ:Xe.projectedAnchorZ,tileAnchorX:Xe.tileAnchorX,tileAnchorY:Xe.tileAnchorY},Ve.verticalTextFeatureIndex=Xe.featureIndex;break}for(let Ze=Ce;Ze<Pe;Ze++){const Xe=y.get(Ze);Ve.iconBox={x1:Xe.x1,y1:Xe.y1,x2:Xe.x2,y2:Xe.y2,padding:Xe.padding,projectedAnchorX:Xe.projectedAnchorX,projectedAnchorY:Xe.projectedAnchorY,projectedAnchorZ:Xe.projectedAnchorZ,tileAnchorX:Xe.tileAnchorX,tileAnchorY:Xe.tileAnchorY},Ve.iconFeatureIndex=Xe.featureIndex;break}for(let Ze=$e;Ze<De;Ze++){const Xe=y.get(Ze);Ve.verticalIconBox={x1:Xe.x1,y1:Xe.y1,x2:Xe.x2,y2:Xe.y2,padding:Xe.padding,projectedAnchorX:Xe.projectedAnchorX,projectedAnchorY:Xe.projectedAnchorY,projectedAnchorZ:Xe.projectedAnchorZ,tileAnchorX:Xe.tileAnchorX,tileAnchorY:Xe.tileAnchorY},Ve.verticalIconFeatureIndex=Xe.featureIndex;break}return Ve}deserializeCollisionBoxes(y){this.collisionArrays=[];for(let $=0;$<this.symbolInstances.length;$++){const ee=this.symbolInstances.get($);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(y,ee.textBoxStartIndex,ee.textBoxEndIndex,ee.verticalTextBoxStartIndex,ee.verticalTextBoxEndIndex,ee.iconBoxStartIndex,ee.iconBoxEndIndex,ee.verticalIconBoxStartIndex,ee.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(y,$){const ee=y.placedSymbolArray.get($),he=ee.vertexStartIndex+4*ee.numGlyphs;for(let Ee=ee.vertexStartIndex;Ee<he;Ee+=4)y.indexArray.emplaceBack(Ee,Ee+1,Ee+2),y.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3)}getSortedSymbolIndexes(y){if(this.sortedAngle===y&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const $=Math.sin(y),ee=Math.cos(y),he=[],Ee=[],Ce=[];for(let Pe=0;Pe<this.symbolInstances.length;++Pe){Ce.push(Pe);const $e=this.symbolInstances.get(Pe);he.push(0|Math.round($*$e.tileAnchorX+ee*$e.tileAnchorY)),Ee.push($e.featureIndex)}return Ce.sort((Pe,$e)=>he[Pe]-he[$e]||Ee[$e]-Ee[Pe]),Ce}addToSortKeyRanges(y,$){const ee=this.sortKeyRanges[this.sortKeyRanges.length-1];ee&&ee.sortKey===$?ee.symbolInstanceEnd=y+1:this.sortKeyRanges.push({sortKey:$,symbolInstanceStart:y,symbolInstanceEnd:y+1})}sortFeatures(y){if(this.sortFeaturesByY&&this.sortedAngle!==y&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(y),this.sortedAngle=y,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const $ of this.symbolInstanceIndexes){const ee=this.symbolInstances.get($);this.featureSortOrder.push(ee.featureIndex),[ee.rightJustifiedTextSymbolIndex,ee.centerJustifiedTextSymbolIndex,ee.leftJustifiedTextSymbolIndex].forEach((he,Ee,Ce)=>{he>=0&&Ce.indexOf(he)===Ee&&this.addIndicesForPlacedSymbol(this.text,he)}),ee.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ee.verticalPlacedTextSymbolIndex),ee.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ee.placedIconSymbolIndex),ee.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ee.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}cr(Jl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Jl.MAX_GLYPHS=65535,Jl.addDynamicAttributes=Vd;const Hg=new Rn({"symbol-placement":new Wt(mn.layout_symbol["symbol-placement"]),"symbol-spacing":new Wt(mn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Wt(mn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new sn(mn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Wt(mn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Wt(mn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Wt(mn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Wt(mn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Wt(mn.layout_symbol["icon-rotation-alignment"]),"icon-size":new sn(mn.layout_symbol["icon-size"]),"icon-text-fit":new Wt(mn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Wt(mn.layout_symbol["icon-text-fit-padding"]),"icon-image":new sn(mn.layout_symbol["icon-image"]),"icon-rotate":new sn(mn.layout_symbol["icon-rotate"]),"icon-padding":new Wt(mn.layout_symbol["icon-padding"]),"icon-keep-upright":new Wt(mn.layout_symbol["icon-keep-upright"]),"icon-offset":new sn(mn.layout_symbol["icon-offset"]),"icon-anchor":new sn(mn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Wt(mn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Wt(mn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Wt(mn.layout_symbol["text-rotation-alignment"]),"text-field":new sn(mn.layout_symbol["text-field"]),"text-font":new sn(mn.layout_symbol["text-font"]),"text-size":new sn(mn.layout_symbol["text-size"]),"text-max-width":new sn(mn.layout_symbol["text-max-width"]),"text-line-height":new sn(mn.layout_symbol["text-line-height"]),"text-letter-spacing":new sn(mn.layout_symbol["text-letter-spacing"]),"text-justify":new sn(mn.layout_symbol["text-justify"]),"text-radial-offset":new sn(mn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Wt(mn.layout_symbol["text-variable-anchor"]),"text-anchor":new sn(mn.layout_symbol["text-anchor"]),"text-max-angle":new Wt(mn.layout_symbol["text-max-angle"]),"text-writing-mode":new Wt(mn.layout_symbol["text-writing-mode"]),"text-rotate":new sn(mn.layout_symbol["text-rotate"]),"text-padding":new Wt(mn.layout_symbol["text-padding"]),"text-keep-upright":new Wt(mn.layout_symbol["text-keep-upright"]),"text-transform":new sn(mn.layout_symbol["text-transform"]),"text-offset":new sn(mn.layout_symbol["text-offset"]),"text-allow-overlap":new Wt(mn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Wt(mn.layout_symbol["text-ignore-placement"]),"text-optional":new Wt(mn.layout_symbol["text-optional"])});var zp={paint:new Rn({"icon-opacity":new sn(mn.paint_symbol["icon-opacity"]),"icon-color":new sn(mn.paint_symbol["icon-color"]),"icon-halo-color":new sn(mn.paint_symbol["icon-halo-color"]),"icon-halo-width":new sn(mn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new sn(mn.paint_symbol["icon-halo-blur"]),"icon-translate":new Wt(mn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Wt(mn.paint_symbol["icon-translate-anchor"]),"text-opacity":new sn(mn.paint_symbol["text-opacity"]),"text-color":new sn(mn.paint_symbol["text-color"],{runtimeType:Mo,getOverride:j=>j.textColor,hasOverride:j=>!!j.textColor}),"text-halo-color":new sn(mn.paint_symbol["text-halo-color"]),"text-halo-width":new sn(mn.paint_symbol["text-halo-width"]),"text-halo-blur":new sn(mn.paint_symbol["text-halo-blur"]),"text-translate":new Wt(mn.paint_symbol["text-translate"]),"text-translate-anchor":new Wt(mn.paint_symbol["text-translate-anchor"])}),layout:Hg};class A_{constructor(y){this.type=y.property.overrides?y.property.overrides.runtimeType:ca,this.defaultValue=y}evaluate(y){if(y.formattedSection){const $=this.defaultValue.property.overrides;if($&&$.hasOverride(y.formattedSection))return $.getOverride(y.formattedSection)}return y.feature&&y.featureState?this.defaultValue.evaluate(y.feature,y.featureState):this.defaultValue.property.specification.default}eachChild(y){this.defaultValue.isConstant()||y(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}cr(A_,"FormatSectionOverride",{omit:["defaultValue"]});class Gd extends Ui{constructor(y){super(y,zp)}recalculate(y,$){super.recalculate(y,$),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const ee=this.layout.get("text-writing-mode");if(ee){const he=[];for(const Ee of ee)he.indexOf(Ee)<0&&he.push(Ee);this.layout._values["text-writing-mode"]=he}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(y,$,ee,he){const Ee=this.layout.get(y).evaluate($,{},ee,he),Ce=this._unevaluatedLayout._values[y];return Ce.isDataDriven()||Ol(Ce.value)||!Ee?Ee:function(Pe,$e){return $e.replace(/{([^{}]+)}/g,(De,Ve)=>Ve in Pe?String(Pe[Ve]):"")}($.properties,Ee)}createBucket(y){return new Jl(y)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const y of zp.paint.overridableProperties){if(!Gd.hasPaintOverride(this.layout,y))continue;const $=this.paint.get(y),ee=new A_($),he=new Ec(ee,$.property.specification);let Ee=null;Ee=$.value.kind==="constant"||$.value.kind==="source"?new Ac("source",he):new Hs("composite",he,$.value.zoomStops,$.value._interpolationType),this.paint._values[y]=new Gt($.property,Ee,$.parameters)}}_handleOverridablePaintPropertyUpdate(y,$,ee){return!(!this.layout||$.isDataDriven()||ee.isDataDriven())&&Gd.hasPaintOverride(this.layout,y)}static hasPaintOverride(y,$){const ee=y.get("text-field"),he=zp.paint.properties[$];let Ee=!1;const Ce=Pe=>{for(const $e of Pe)if(he.overrides&&he.overrides.hasOverride($e))return void(Ee=!0)};if(ee.value.kind==="constant"&&ee.value.value instanceof oo)Ce(ee.value.value.sections);else if(ee.value.kind==="source"){const Pe=De=>{Ee||(De instanceof Ps&&Mi(De.value)===ua?Ce(De.value.sections):De instanceof Os?Ce(De.sections):De.eachChild(Pe))},$e=ee.value;$e._styleExpression&&Pe($e._styleExpression.expression)}return Ee}getProgramConfiguration(y){return new fs(this,y)}}var qg={paint:new Rn({"background-color":new Wt(mn.paint_background["background-color"]),"background-pattern":new qn(mn.paint_background["background-pattern"]),"background-opacity":new Wt(mn.paint_background["background-opacity"])})},Wg={paint:new Rn({"raster-opacity":new Wt(mn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Wt(mn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Wt(mn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Wt(mn.paint_raster["raster-brightness-max"]),"raster-saturation":new Wt(mn.paint_raster["raster-saturation"]),"raster-contrast":new Wt(mn.paint_raster["raster-contrast"]),"raster-resampling":new Wt(mn.paint_raster["raster-resampling"]),"raster-fade-duration":new Wt(mn.paint_raster["raster-fade-duration"])})};class Zg extends Ui{constructor(y){super(y,{}),this.implementation=y}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(y){this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)}onRemove(y){this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)}}var Xg={paint:new Rn({"sky-type":new Wt(mn.paint_sky["sky-type"]),"sky-atmosphere-sun":new Wt(mn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Wt(mn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Wt(mn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Wt(mn.paint_sky["sky-gradient-radius"]),"sky-gradient":new dn(mn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Wt(mn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Wt(mn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Wt(mn.paint_sky["sky-opacity"])})};function Dp(j,y,$){const ee=[0,0,1],he=of([]);return sf(he,he,$?-Se(j)+Math.PI:Se(j)),af(he,he,-Se(y)),tf(ee,ee,he),ko(ee,ee)}const Kg={circle:class extends Ui{constructor(j){super(j,em)}createBucket(j){return new jt(j)}queryRadius(j){const y=j;return Vi("circle-radius",this,y)+Vi("circle-stroke-width",this,y)+co(this.paint.get("circle-translate"))}queryIntersectsFeature(j,y,$,ee,he,Ee,Ce,Pe){const $e=fd(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ee.angle,j.pixelToTileUnitsFactor),De=this.paint.get("circle-radius").evaluate(y,$)+this.paint.get("circle-stroke-width").evaluate(y,$);return lf(j,ee,Ee,Ce,Pe,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",$e,De)}getProgramIds(){return["circle"]}getProgramConfiguration(j){return new fs(this,j)}},heatmap:class extends Ui{createBucket(j){return new uf(j)}constructor(j){super(j,sm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(j){j==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(j){return Vi("heatmap-radius",this,j)}queryIntersectsFeature(j,y,$,ee,he,Ee,Ce,Pe){const $e=this.paint.get("heatmap-radius").evaluate(y,$);return lf(j,ee,Ee,Ce,Pe,!0,!0,new ye(0,0),$e)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(j){return new fs(this,j)}},hillshade:class extends Ui{constructor(j){super(j,lm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ui{constructor(j){super(j,Tm)}getProgramIds(){const j=this.paint.get("fill-pattern"),y=j&&j.constantOr(1),$=[y?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&$.push(y&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),$}getProgramConfiguration(j){return new fs(this,j)}recalculate(j,y){super.recalculate(j,y);const $=this.paint._values["fill-outline-color"];$.value.kind==="constant"&&$.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(j){return new Ad(j)}queryRadius(){return co(this.paint.get("fill-translate"))}queryIntersectsFeature(j,y,$,ee,he,Ee){return!j.queryGeometry.isAboveHorizon&&jn(_s(j.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ee.angle,j.pixelToTileUnitsFactor),ee)}isTileClipped(){return!0}},"fill-extrusion":class extends Ui{constructor(j){super(j,Bm)}createBucket(j){return new Sh(j)}queryRadius(){return co(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(j){return new fs(this,j)}queryIntersectsFeature(j,y,$,ee,he,Ee,Ce,Pe,$e){const De=fd(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ee.angle,j.pixelToTileUnitsFactor),Ve=this.paint.get("fill-extrusion-height").evaluate(y,$),Ze=this.paint.get("fill-extrusion-base").evaluate(y,$),Xe=[0,0],rt=Pe&&Ee.elevation,st=Ee.elevation?Ee.elevation.exaggeration():1,gt=j.tile.getBucket(this);if(rt&&gt instanceof Sh){const qt=gt.centroidVertexArray,Ft=$e+1;if(Ft<qt.length){const Ht=qt.get(Ft);Xe[0]=Ht.a_centroid_pos0,Xe[1]=Ht.a_centroid_pos1}}if(Xe[0]===0&&Xe[1]===1)return!1;Ee.projection.name==="globe"&&(ee=Sf([ee],[new ye(0,0),new ye(Tr,Tr)],j.tileID.canonical).map(qt=>qt.polygon).flat());const At=function(qt,Ft,Ht,en,Zt,An,bn,Mn,Yn,Cn,Ln){return qt.projection.name==="globe"?function(Un,Bn,Zn,Vn,or,Or,$r,yr,nr,Gr,Pr){const hr=[],mi=[],hi=Un.projection.upVectorScale(Pr,Un.center.lat,Un.worldSize).metersToTile,ki=[0,0,0,1],Nr=[0,0,0,1],Yr=(di,ui,Ei,Pi)=>{di[0]=ui,di[1]=Ei,di[2]=Pi,di[3]=1},gi=Cf();Zn>0&&(Zn+=gi),Vn+=gi;for(const di of Bn){const ui=[],Ei=[];for(const Pi of di){const no=Pi.x+or.x,Bo=Pi.y+or.y,Zr=Un.projection.projectTilePoint(no,Bo,Pr),zi=Un.projection.upVector(Pr,Pi.x,Pi.y);let go=Zn,ni=Vn;if($r){const Ii=Of(no,Bo,Zn,Vn,$r,yr,nr,Gr);go+=Ii.base,ni+=Ii.top}Zn!==0?Yr(ki,Zr.x+zi[0]*hi*go,Zr.y+zi[1]*hi*go,Zr.z+zi[2]*hi*go):Yr(ki,Zr.x,Zr.y,Zr.z),Yr(Nr,Zr.x+zi[0]*hi*ni,Zr.y+zi[1]*hi*ni,Zr.z+zi[2]*hi*ni),Wi(ki,ki,Or),Wi(Nr,Nr,Or),ui.push(Cd(ki)),Ei.push(Cd(Nr))}hr.push(ui),mi.push(Ei)}return[hr,mi]}(qt,Ft,Ht,en,Zt,An,bn,Mn,Yn,Cn,Ln):bn?function(Un,Bn,Zn,Vn,or,Or,$r,yr,nr){const Gr=[],Pr=[],hr=[0,0,0,1];for(const mi of Un){const hi=[],ki=[];for(const Nr of mi){const Yr=Nr.x+Vn.x,gi=Nr.y+Vn.y,di=Of(Yr,gi,Bn,Zn,Or,$r,yr,nr);hr[0]=Yr,hr[1]=gi,hr[2]=di.base,hr[3]=1,Gc(hr,hr,or),hr[3]=Math.max(hr[3],1e-5);const ui=Cd([hr[0]/hr[3],hr[1]/hr[3],hr[2]/hr[3]]);hr[0]=Yr,hr[1]=gi,hr[2]=di.top,hr[3]=1,Gc(hr,hr,or),hr[3]=Math.max(hr[3],1e-5);const Ei=Cd([hr[0]/hr[3],hr[1]/hr[3],hr[2]/hr[3]]);hi.push(ui),ki.push(Ei)}Gr.push(hi),Pr.push(ki)}return[Gr,Pr]}(Ft,Ht,en,Zt,An,bn,Mn,Yn,Cn):function(Un,Bn,Zn,Vn,or){const Or=[],$r=[],yr=or[8]*Bn,nr=or[9]*Bn,Gr=or[10]*Bn,Pr=or[11]*Bn,hr=or[8]*Zn,mi=or[9]*Zn,hi=or[10]*Zn,ki=or[11]*Zn;for(const Nr of Un){const Yr=[],gi=[];for(const di of Nr){const ui=di.x+Vn.x,Ei=di.y+Vn.y,Pi=or[0]*ui+or[4]*Ei+or[12],no=or[1]*ui+or[5]*Ei+or[13],Bo=or[2]*ui+or[6]*Ei+or[14],Zr=or[3]*ui+or[7]*Ei+or[15],zi=Pi+yr,go=no+nr,ni=Bo+Gr,Ii=Math.max(Zr+Pr,1e-5),So=Pi+hr,Ci=no+mi,Fi=Bo+hi,ro=Math.max(Zr+ki,1e-5),Qi=new ye(zi/Ii,go/Ii);Qi.z=ni/Ii,Yr.push(Qi);const ho=new ye(So/ro,Ci/ro);ho.z=Fi/ro,gi.push(ho)}Or.push(Yr),$r.push(gi)}return[Or,$r]}(Ft,Ht,en,Zt,An)}(Ee,ee,Ze,Ve,De,Ce,rt?Pe:null,Xe,st,Ee.center.lat,j.tileID.canonical),Bt=j.queryGeometry;return function(qt,Ft,Ht){let en=1/0;jn(Ht,Ft)&&(en=Mf(Ht,Ft[0]));for(let Zt=0;Zt<Ft.length;Zt++){const An=Ft[Zt],bn=qt[Zt];for(let Mn=0;Mn<An.length-1;Mn++){const Yn=An[Mn],Cn=[Yn,An[Mn+1],bn[Mn+1],bn[Mn],Yn];ln(Ht,Cn)&&(en=Math.min(en,Mf(Ht,Cn)))}}return en!==1/0&&en}(At[0],At[1],Bt.isPointQuery()?Bt.screenBounds:Bt.screenGeometry)}},line:class extends Ui{constructor(j){super(j,Rf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(j){if(j==="line-gradient"){const y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=y._styleExpression&&y._styleExpression.expression instanceof hc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(j,y){super.recalculate(j,y),this.paint._values["line-floorwidth"]=$f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,j)}createBucket(j){return new Sd(j)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(j){return new fs(this,j)}queryRadius(j){const y=j,$=zf(Vi("line-width",this,y),Vi("line-gap-width",this,y)),ee=Vi("line-offset",this,y);return $/2+Math.abs(ee)+co(this.paint.get("line-translate"))}queryIntersectsFeature(j,y,$,ee,he,Ee){if(j.queryGeometry.isAboveHorizon)return!1;const Ce=_s(j.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ee.angle,j.pixelToTileUnitsFactor),Pe=j.pixelToTileUnitsFactor/2*zf(this.paint.get("line-width").evaluate(y,$),this.paint.get("line-gap-width").evaluate(y,$)),$e=this.paint.get("line-offset").evaluate(y,$);return $e&&(ee=function(De,Ve){const Ze=[],Xe=new ye(0,0);for(let rt=0;rt<De.length;rt++){const st=De[rt],gt=[];for(let At=0;At<st.length;At++){const Bt=st[At-1],qt=st[At],Ft=st[At+1],Ht=At===0?Xe:qt.sub(Bt)._unit()._perp(),en=At===st.length-1?Xe:Ft.sub(qt)._unit()._perp(),Zt=Ht._add(en)._unit();Zt._mult(1/(Zt.x*en.x+Zt.y*en.y)),gt.push(Zt._mult(Ve)._add(qt))}Ze.push(gt)}return Ze}(ee,$e*j.pixelToTileUnitsFactor)),function(De,Ve,Ze){for(let Xe=0;Xe<Ve.length;Xe++){const rt=Ve[Xe];if(De.length>=3){for(let st=0;st<rt.length;st++)if(si(De,rt[st]))return!0}if(ur(De,rt,Ze))return!0}return!1}(Ce,ee,Pe)}isTileClipped(){return!0}},symbol:Gd,background:class extends Ui{constructor(j){super(j,qg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ui{constructor(j){super(j,Wg)}getProgramIds(){return["raster"]}},sky:class extends Ui{constructor(j){super(j,Xg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(j){j==="sky-gradient"?this._updateColorRamp():j!=="sky-atmosphere-sun"&&j!=="sky-atmosphere-halo-color"&&j!=="sky-atmosphere-color"&&j!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=hp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(j){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const y=j.style.light.properties.get("position");return this._lightPosition.azimuthal!==y.azimuthal||this._lightPosition.polar!==y.polar}return!1}getCenter(j,y){if(this.paint.get("sky-type")==="atmosphere"){const ee=this.paint.get("sky-atmosphere-sun"),he=!ee,Ee=j.style.light,Ce=Ee.properties.get("position");return he&&Ee.properties.get("anchor")==="viewport"&&Mt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),he?Dp(Ce.azimuthal,90-Ce.polar,y):Dp(ee[0],90-ee[1],y)}const $=this.paint.get("sky-gradient-center");return Dp($[0],90-$[1],y)}is3D(){return!1}isSky(){return!0}markSkyboxValid(j){this._skyboxInvalidated=!1,this._lightPosition=j.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const j=this.paint.get("sky-type");return j==="atmosphere"?["skyboxCapture","skybox"]:j==="gradient"?["skyboxGradient"]:null}}};class Vh{constructor(y,$,ee,he){this.context=y,this.format=ee,this.texture=y.gl.createTexture(),this.update($,he)}update(y,$,ee){const{width:he,height:Ee}=y,{context:Ce}=this,{gl:Pe}=Ce,{HTMLImageElement:$e,HTMLCanvasElement:De,HTMLVideoElement:Ve,ImageData:Ze,ImageBitmap:Xe}=_e;if(Pe.bindTexture(Pe.TEXTURE_2D,this.texture),Ce.pixelStoreUnpackFlipY.set(!1),Ce.pixelStoreUnpack.set(1),Ce.pixelStoreUnpackPremultiplyAlpha.set(this.format===Pe.RGBA&&(!$||$.premultiply!==!1)),ee||this.size&&this.size[0]===he&&this.size[1]===Ee){const{x:rt,y:st}=ee||{x:0,y:0};y instanceof $e||y instanceof De||y instanceof Ve||y instanceof Ze||Xe&&y instanceof Xe?Pe.texSubImage2D(Pe.TEXTURE_2D,0,rt,st,Pe.RGBA,Pe.UNSIGNED_BYTE,y):Pe.texSubImage2D(Pe.TEXTURE_2D,0,rt,st,he,Ee,Pe.RGBA,Pe.UNSIGNED_BYTE,y.data)}else this.size=[he,Ee],y instanceof $e||y instanceof De||y instanceof Ve||y instanceof Ze||Xe&&y instanceof Xe?Pe.texImage2D(Pe.TEXTURE_2D,0,this.format,this.format,Pe.UNSIGNED_BYTE,y):Pe.texImage2D(Pe.TEXTURE_2D,0,this.format,he,Ee,0,this.format,Pe.UNSIGNED_BYTE,y.data);this.useMipmap=Boolean($&&$.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&Pe.generateMipmap(Pe.TEXTURE_2D)}bind(y,$){const{context:ee}=this,{gl:he}=ee;he.bindTexture(he.TEXTURE_2D,this.texture),y!==this.filter&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MAG_FILTER,y),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_MIN_FILTER,this.useMipmap?y===he.NEAREST?he.NEAREST_MIPMAP_NEAREST:he.LINEAR_MIPMAP_NEAREST:y),this.filter=y),$!==this.wrap&&(he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_S,$),he.texParameteri(he.TEXTURE_2D,he.TEXTURE_WRAP_T,$),this.wrap=$)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:y}=this.context;y.deleteTexture(this.texture),this.texture=null}}class Lp{constructor(y,$){this.width=y,this.height=$,this.nextRow=0,this.image=new al({width:y,height:$}),this.positions={},this.uploaded=!1}getDash(y,$){const ee=this.getKey(y,$);return this.positions[ee]}trim(){const y=this.width,$=this.height=tt(this.nextRow);this.image.resize({width:y,height:$})}getKey(y,$){return y.join(",")+$}getDashRanges(y,$,ee){const he=[];let Ee=y.length%2==1?-y[y.length-1]*ee:0,Ce=y[0]*ee,Pe=!0;he.push({left:Ee,right:Ce,isDash:Pe,zeroLength:y[0]===0});let $e=y[0];for(let De=1;De<y.length;De++){Pe=!Pe;const Ve=y[De];Ee=$e*ee,$e+=Ve,Ce=$e*ee,he.push({left:Ee,right:Ce,isDash:Pe,zeroLength:Ve===0})}return he}addRoundDash(y,$,ee){const he=$/2;for(let Ee=-ee;Ee<=ee;Ee++){const Ce=this.width*(this.nextRow+ee+Ee);let Pe=0,$e=y[Pe];for(let De=0;De<this.width;De++){De/$e.right>1&&($e=y[++Pe]);const Ve=Math.abs(De-$e.left),Ze=Math.abs(De-$e.right),Xe=Math.min(Ve,Ze);let rt;const st=Ee/ee*(he+1);if($e.isDash){const gt=he-Math.abs(st);rt=Math.sqrt(Xe*Xe+gt*gt)}else rt=he-Math.sqrt(Xe*Xe+st*st);this.image.data[Ce+De]=Math.max(0,Math.min(255,rt+128))}}}addRegularDash(y,$){for(let $e=y.length-1;$e>=0;--$e){const De=y[$e],Ve=y[$e+1];De.zeroLength?y.splice($e,1):Ve&&Ve.isDash===De.isDash&&(Ve.left=De.left,y.splice($e,1))}const ee=y[0],he=y[y.length-1];ee.isDash===he.isDash&&(ee.left=he.left-this.width,he.right=ee.right+this.width);const Ee=this.width*this.nextRow;let Ce=0,Pe=y[Ce];for(let $e=0;$e<this.width;$e++){$e/Pe.right>1&&(Pe=y[++Ce]);const De=Math.abs($e-Pe.left),Ve=Math.abs($e-Pe.right),Ze=Math.min(De,Ve);this.image.data[Ee+$e]=Math.max(0,Math.min(255,(Pe.isDash?Ze:-Ze)+$+128))}}addDash(y,$){const ee=this.getKey(y,$);if(this.positions[ee])return this.positions[ee];const he=$==="round",Ee=he?7:0,Ce=2*Ee+1;if(this.nextRow+Ce>this.height)return Mt("LineAtlas out of space"),null;y.length===0&&y.push(1);let Pe=0;for(let Ve=0;Ve<y.length;Ve++)y[Ve]<0&&(Mt("Negative value is found in line dasharray, replacing values with 0"),y[Ve]=0),Pe+=y[Ve];if(Pe!==0){const Ve=this.width/Pe,Ze=this.getDashRanges(y,this.width,Ve);he?this.addRoundDash(Ze,Ve,Ee):this.addRegularDash(Ze,$==="square"?.5*Ve:0)}const $e=this.nextRow+Ee;this.nextRow+=Ce;const De={tl:[$e,Ee],br:[Pe,0]};return this.positions[ee]=De,De}}cr(Lp,"LineAtlas");class Yg{constructor(y){this._callback=y,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Jg{constructor(){this.tasks={},this.taskQueue=[],it(["process"],this),this.invoker=new Yg(this.process),this.nextId=0}add(y,$){const ee=this.nextId++,he=function({type:Ee,isSymbolTile:Ce,zoom:Pe}){return Pe=Pe||0,Ee==="message"?0:Ee!=="maybePrepare"||Ce?Ee!=="parseTile"||Ce?Ee==="parseTile"&&Ce?300-Pe:Ee==="maybePrepare"&&Ce?400-Pe:500:200-Pe:100-Pe}($);if(he===0){Jt();try{y()}finally{}return{cancel:()=>{}}}return this.tasks[ee]={fn:y,metadata:$,priority:he,id:ee},this.taskQueue.push(ee),this.invoker.trigger(),{cancel:()=>{delete this.tasks[ee]}}}process(){Jt();try{if(this.taskQueue=this.taskQueue.filter(ee=>!!this.tasks[ee]),!this.taskQueue.length)return;const y=this.pick();if(y===null)return;const $=this.tasks[y];if(delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),!$)return;$.fn()}finally{}}pick(){let y=null,$=1/0;for(let he=0;he<this.taskQueue.length;he++){const Ee=this.tasks[this.taskQueue[he]];Ee.priority<$&&($=Ee.priority,y=he)}if(y===null)return null;const ee=this.taskQueue[y];return this.taskQueue.splice(y,1),ee}remove(){this.invoker.remove()}}class T_{constructor(y){this._stringToNumber={},this._numberToString=[];for(let $=0;$<y.length;$++){const ee=y[$];this._stringToNumber[ee]=$,this._numberToString[$]=ee}}encode(y){return this._stringToNumber[y]}decode(y){return this._numberToString[y]}}const Qg=["tile","layer","source","sourceLayer","state"];class k_{constructor(y,$,ee,he,Ee){this.type="Feature",this._vectorTileFeature=y,this._z=$,this._x=ee,this._y=he,this.properties=y.properties,this.id=Ee}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(y){this._geometry=y}toJSON(){const y={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(y.id=this.id);for(const $ of Qg)this[$]!==void 0&&(y[$]=this[$]);return y}}const wa=32,vs=33,Ql=new Uint16Array(8184);for(let j=0;j<2046;j++){let y=j+2,$=0,ee=0,he=0,Ee=0,Ce=0,Pe=0;for(1&y?he=Ee=Ce=wa:$=ee=Pe=wa;(y>>=1)>1;){const De=$+he>>1,Ve=ee+Ee>>1;1&y?(he=$,Ee=ee,$=Ce,ee=Pe):($=he,ee=Ee,he=Ce,Ee=Pe),Ce=De,Pe=Ve}const $e=4*j;Ql[$e+0]=$,Ql[$e+1]=ee,Ql[$e+2]=he,Ql[$e+3]=Ee}const xs=new Uint16Array(2178),ec=new Uint8Array(1089),Hd=new Uint16Array(1089);function C_(j){return j===0?-.03125:j===32?.03125:0}var S_=Dn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const P_={type:2,extent:Tr,loadGeometry:()=>[[new ye(0,0),new ye(8193,0),new ye(8193,8193),new ye(0,8193),new ye(0,0)]]};class Bp{constructor(y,$,ee,he,Ee){this.tileID=y,this.uid=Je(),this.uses=0,this.tileSize=$,this.tileZoom=ee,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=Ee,this.expiredRequestCount=0,this.state="loading",he&&he.transform&&(this.projection=he.transform.projection)}registerFadeDuration(y){const $=y+this.timeAdded;$<$n.now()||this.fadeEndTime&&$<this.fadeEndTime||(this.fadeEndTime=$)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Wc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(y,$,ee){if(this.unloadVectorData(),this.state="loaded",y){y.featureIndex&&(this.latestFeatureIndex=y.featureIndex,y.rawTileData?(this.latestRawTileData=y.rawTileData,this.latestFeatureIndex.rawTileData=y.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=y.collisionBoxArray,this.buckets=function(he,Ee){const Ce={};if(!Ee)return Ce;for(const Pe of he){const $e=Pe.layerIds.map(De=>Ee.getLayer(De)).filter(Boolean);if($e.length!==0){Pe.layers=$e,Pe.stateDependentLayerIds&&(Pe.stateDependentLayers=Pe.stateDependentLayerIds.map(De=>$e.filter(Ve=>Ve.id===De)[0]));for(const De of $e)Ce[De.id]=Pe}}return Ce}(y.buckets,$.style),this.hasSymbolBuckets=!1;for(const he in this.buckets){const Ee=this.buckets[he];if(Ee instanceof Jl){if(this.hasSymbolBuckets=!0,!ee)break;Ee.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const he in this.buckets){const Ee=this.buckets[he];if(Ee instanceof Jl&&Ee.hasRTLText){this.hasRTLText=!0,kt.isLoading()||kt.isLoaded()||xt()!=="deferred"||Pt();break}}this.queryPadding=0;for(const he in this.buckets){const Ee=this.buckets[he];this.queryPadding=Math.max(this.queryPadding,$.style.getLayer(he).queryRadius(Ee))}y.imageAtlas&&(this.imageAtlas=y.imageAtlas),y.glyphAtlasImage&&(this.glyphAtlasImage=y.glyphAtlasImage),y.lineAtlas&&(this.lineAtlas=y.lineAtlas)}else this.collisionBoxArray=new Go}unloadVectorData(){if(this.hasData()){for(const y in this.buckets)this.buckets[y].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(y){return this.buckets[y.id]}upload(y){for(const ee in this.buckets){const he=this.buckets[ee];he.uploadPending()&&he.upload(y)}const $=y.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Vh(y,this.imageAtlas.image,$.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Vh(y,this.glyphAtlasImage,$.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Vh(y,this.lineAtlas.image,$.ALPHA),this.lineAtlas.uploaded=!0)}prepare(y){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(y,this.imageAtlasTexture)}queryRenderedFeatures(y,$,ee,he,Ee,Ce,Pe,$e){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:he,pixelPosMatrix:Pe,transform:Ce,params:Ee,tileTransform:this.tileTransform},y,$,ee):{}}querySourceFeatures(y,$){const ee=this.latestFeatureIndex;if(!ee||!ee.rawTileData)return;const he=ee.loadVTLayers(),Ee=$?$.sourceLayer:"",Ce=he._geojsonTileLayer||he[Ee];if(!Ce)return;const Pe=Xs($&&$.filter),{z:$e,x:De,y:Ve}=this.tileID.canonical,Ze={z:$e,x:De,y:Ve};for(let Xe=0;Xe<Ce.length;Xe++){const rt=Ce.feature(Xe);if(Pe.needGeometry){const At=Ge(rt,!0);if(!Pe.filter(new Tt(this.tileID.overscaledZ),At,this.tileID.canonical))continue}else if(!Pe.filter(new Tt(this.tileID.overscaledZ),rt))continue;const st=ee.getId(rt,Ee),gt=new k_(rt,$e,De,Ve,st);gt.tile=Ze,y.push(gt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(y){const $=this.expirationTime;if(y.cacheControl){const ee=on(y.cacheControl);ee["max-age"]&&(this.expirationTime=Date.now()+1e3*ee["max-age"])}else y.expires&&(this.expirationTime=new Date(y.expires).getTime());if(this.expirationTime){const ee=Date.now();let he=!1;if(this.expirationTime>ee)he=!1;else if($)if(this.expirationTime<$)he=!0;else{const Ee=this.expirationTime-$;Ee?this.expirationTime=ee+Math.max(Ee,3e4):he=!0}else he=!0;he?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(y,$){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(y).length===0||!$)return;const ee=this.latestFeatureIndex.loadVTLayers(),he=$.style.listImages();for(const Ee in this.buckets){if(!$.style.hasLayer(Ee))continue;const Ce=this.buckets[Ee],Pe=Ce.layers[0].sourceLayer||"_geojsonTileLayer",$e=ee[Pe],De=y[Pe];if(!$e||!De||Object.keys(De).length===0)continue;if(Ce.update(De,$e,he,this.imageAtlas&&this.imageAtlas.patternPositions||{}),Ce instanceof Sd||Ce instanceof Ad){const Ze=$.style._getSourceCache(Ce.layers[0].source);$._terrain&&$._terrain.enabled&&Ze&&Ce.programConfigurations.needsUpload&&$._terrain._clearRenderCacheForTile(Ze.id,this.tileID)}const Ve=$&&$.style&&$.style.getLayer(Ee);Ve&&(this.queryPadding=Math.max(this.queryPadding,Ve.queryRadius(Ce)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$n.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(y){this.symbolFadeHoldUntil=$n.now()+y}setTexture(y,$){const ee=$.context,he=ee.gl;this.texture=$.getTileTexture(y.width),this.texture?this.texture.update(y,{useMipmap:!0}):(this.texture=new Vh(ee,y,he.RGBA,{useMipmap:!0}),this.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE),ee.extTextureFilterAnisotropic&&he.texParameterf(he.TEXTURE_2D,ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ee.extTextureFilterAnisotropicMax))}setDependencies(y,$){const ee={};for(const he of $)ee[he]=!0;this.dependencies[y]=ee}hasDependency(y,$){for(const ee of y){const he=this.dependencies[ee];if(he){for(const Ee of $)if(he[Ee])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(y,$){if(!$||$.name==="mercator"||this._tileDebugBuffer)return;const ee=wt(P_,this.tileID.canonical,this.tileTransform)[0],he=new er,Ee=new mo;for(let Ce=0;Ce<ee.length;Ce++){const{x:Pe,y:$e}=ee[Ce];he.emplaceBack(Pe,$e),Ee.emplaceBack(Ce)}Ee.emplaceBack(0),this._tileDebugIndexBuffer=y.createIndexBuffer(Ee),this._tileDebugBuffer=y.createVertexBuffer(he,zh.members),this._tileDebugSegments=Li.simpleSegment(0,0,he.length,Ee.length)}_makeTileBoundsBuffers(y,$){if(this._tileBoundsBuffer||!$||$.name==="mercator")return;const ee=wt(P_,this.tileID.canonical,this.tileTransform)[0];let he,Ee;if(this.isRaster){const Ce=function(Pe,$e){const De=Wc(Pe,$e),Ve=Math.pow(2,Pe.z);for(let At=0;At<vs;At++)for(let Bt=0;Bt<vs;Bt++){const qt=Ho((Pe.x+(Bt+C_(Bt))/wa)/Ve),Ft=Yi((Pe.y+(At+C_(At))/wa)/Ve),Ht=$e.project(qt,Ft),en=At*vs+Bt;xs[2*en+0]=Math.round((Ht.x*De.scale-De.x)*Tr),xs[2*en+1]=Math.round((Ht.y*De.scale-De.y)*Tr)}ec.fill(0),Hd.fill(0);for(let At=2045;At>=0;At--){const Bt=4*At,qt=Ql[Bt+0],Ft=Ql[Bt+1],Ht=Ql[Bt+2],en=Ql[Bt+3],Zt=qt+Ht>>1,An=Ft+en>>1,bn=Zt+An-Ft,Mn=An+qt-Zt,Yn=Ft*vs+qt,Cn=en*vs+Ht,Ln=An*vs+Zt,Un=Math.hypot((xs[2*Yn+0]+xs[2*Cn+0])/2-xs[2*Ln+0],(xs[2*Yn+1]+xs[2*Cn+1])/2-xs[2*Ln+1])>=16;if(ec[Ln]=ec[Ln]||(Un?1:0),At<1022){const Bn=(Ft+Mn>>1)*vs+(qt+bn>>1),Zn=(en+Mn>>1)*vs+(Ht+bn>>1);ec[Ln]=ec[Ln]||ec[Bn]||ec[Zn]}}const Ze=new gr,Xe=new Rr;let rt=0;function st(At,Bt){const qt=Bt*vs+At;return Hd[qt]===0&&(Ze.emplaceBack(xs[2*qt+0],xs[2*qt+1],At*Tr/wa,Bt*Tr/wa),Hd[qt]=++rt),Hd[qt]-1}function gt(At,Bt,qt,Ft,Ht,en){const Zt=At+qt>>1,An=Bt+Ft>>1;if(Math.abs(At-Ht)+Math.abs(Bt-en)>1&&ec[An*vs+Zt])gt(Ht,en,At,Bt,Zt,An),gt(qt,Ft,Ht,en,Zt,An);else{const bn=st(At,Bt),Mn=st(qt,Ft),Yn=st(Ht,en);Xe.emplaceBack(bn,Mn,Yn)}}return gt(0,0,wa,wa,wa,0),gt(wa,wa,0,0,0,wa),{vertices:Ze,indices:Xe}}(this.tileID.canonical,$);he=Ce.vertices,Ee=Ce.indices}else{he=new gr,Ee=new Rr;for(const{x:Pe,y:$e}of ee)he.emplaceBack(Pe,$e,0,0);const Ce=vd(he.int16,void 0,4);for(let Pe=0;Pe<Ce.length;Pe+=3)Ee.emplaceBack(Ce[Pe],Ce[Pe+1],Ce[Pe+2])}this._tileBoundsBuffer=y.createVertexBuffer(he,S_.members),this._tileBoundsIndexBuffer=y.createIndexBuffer(Ee),this._tileBoundsSegments=Li.simpleSegment(0,0,he.length,Ee.length)}_makeGlobeTileDebugBuffers(y,$){const ee=$.projection;if(!ee||ee.name!=="globe"||$.freezeTileCoverage)return;const he=this.tileID.canonical,Ee=Lh(d_(he,$)),Ce=Bh($.zoom);let Pe;Ce>0&&(Pe=ep(new Float64Array(16),$.globeMatrix));const $e=(he.x+.5)/(1<<he.z)-va($.center.lng);let De=0;$e>.5?De=-1:$e<-.5&&(De=1),this._makeGlobeTileDebugBorderBuffer(y,he,$,Ee,Pe,Ce,De),this._makeGlobeTileDebugTextBuffer(y,he,$,Ee,Pe,Ce,De)}_globePoint(y,$,ee,he,Ee,Ce,Pe,$e){let De=Dh(y,$,ee);if(Ce){const Ve=1<<ee.z,Ze=[((y/Tr+ee.x)/Ve+$e)*he,($/Tr+ee.y)/Ve*he,0];Wi(Ze,Ze,Ce),De=Ka(De,Ze,Pe)}return Wi(De,De,Ee)}_makeGlobeTileDebugBorderBuffer(y,$,ee,he,Ee,Ce,Pe){const $e=new er,De=new mo,Ve=new dr,Ze=(rt,st,gt,At,Bt)=>{const qt=(gt-rt)/(Bt-1),Ft=(At-st)/(Bt-1),Ht=$e.length;for(let en=0;en<Bt;en++){const Zt=rt+en*qt,An=st+en*Ft;$e.emplaceBack(Zt,An);const bn=this._globePoint(Zt,An,$,ee.worldSize,he,Ee,Ce,Pe);Ve.emplaceBack(bn[0],bn[1],bn[2]),De.emplaceBack(Ht+en)}},Xe=Tr;Ze(0,0,Xe,0,16),Ze(Xe,0,Xe,Xe,16),Ze(Xe,Xe,0,Xe,16),Ze(0,Xe,0,0,16),this._tileDebugIndexBuffer=y.createIndexBuffer(De),this._tileDebugBuffer=y.createVertexBuffer($e,zh.members),this._globeTileDebugBorderBuffer=y.createVertexBuffer(Ve,u_.members),this._tileDebugSegments=Li.simpleSegment(0,0,$e.length,De.length)}_makeGlobeTileDebugTextBuffer(y,$,ee,he,Ee,Ce,Pe){const $e=new er,De=new Rr,Ve=new dr,Ze=25;De.reserve(32),$e.reserve(Ze),Ve.reserve(Ze);const Xe=(rt,st)=>Ze*rt+st;for(let rt=0;rt<Ze;rt++){const st=2048*rt;for(let gt=0;gt<Ze;gt++){const At=2048*gt;$e.emplaceBack(At,st);const Bt=this._globePoint(At,st,$,ee.worldSize,he,Ee,Ce,Pe);Ve.emplaceBack(Bt[0],Bt[1],Bt[2])}}for(let rt=0;rt<4;rt++)for(let st=0;st<4;st++){const gt=Xe(rt,st),At=Xe(rt,st+1),Bt=Xe(rt+1,st),qt=Xe(rt+1,st+1);De.emplaceBack(gt,At,Bt),De.emplaceBack(Bt,At,qt)}this._tileDebugTextIndexBuffer=y.createIndexBuffer(De),this._tileDebugTextBuffer=y.createVertexBuffer($e,zh.members),this._globeTileDebugTextBuffer=y.createVertexBuffer(Ve,u_.members),this._tileDebugTextSegments=Li.simpleSegment(0,0,Ze,32)}}class e0{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(y,$,ee){const he=String($);if(this.stateChanges[y]=this.stateChanges[y]||{},this.stateChanges[y][he]=this.stateChanges[y][he]||{},ft(this.stateChanges[y][he],ee),this.deletedStates[y]===null){this.deletedStates[y]={};for(const Ee in this.state[y])Ee!==he&&(this.deletedStates[y][Ee]=null)}else if(this.deletedStates[y]&&this.deletedStates[y][he]===null){this.deletedStates[y][he]={};for(const Ee in this.state[y][he])ee[Ee]||(this.deletedStates[y][he][Ee]=null)}else for(const Ee in ee)this.deletedStates[y]&&this.deletedStates[y][he]&&this.deletedStates[y][he][Ee]===null&&delete this.deletedStates[y][he][Ee]}removeFeatureState(y,$,ee){if(this.deletedStates[y]===null)return;const he=String($);if(this.deletedStates[y]=this.deletedStates[y]||{},ee&&$!==void 0)this.deletedStates[y][he]!==null&&(this.deletedStates[y][he]=this.deletedStates[y][he]||{},this.deletedStates[y][he][ee]=null);else if($!==void 0)if(this.stateChanges[y]&&this.stateChanges[y][he])for(ee in this.deletedStates[y][he]={},this.stateChanges[y][he])this.deletedStates[y][he][ee]=null;else this.deletedStates[y][he]=null;else this.deletedStates[y]=null}getState(y,$){const ee=String($),he=ft({},(this.state[y]||{})[ee],(this.stateChanges[y]||{})[ee]);if(this.deletedStates[y]===null)return{};if(this.deletedStates[y]){const Ee=this.deletedStates[y][$];if(Ee===null)return{};for(const Ce in Ee)delete he[Ce]}return he}initializeTileState(y,$){y.setFeatureState(this.state,$)}coalesceChanges(y,$){const ee={};for(const he in this.stateChanges){this.state[he]=this.state[he]||{};const Ee={};for(const Ce in this.stateChanges[he])this.state[he][Ce]||(this.state[he][Ce]={}),ft(this.state[he][Ce],this.stateChanges[he][Ce]),Ee[Ce]=this.state[he][Ce];ee[he]=Ee}for(const he in this.deletedStates){this.state[he]=this.state[he]||{};const Ee={};if(this.deletedStates[he]===null)for(const Ce in this.state[he])Ee[Ce]={},this.state[he][Ce]={};else for(const Ce in this.deletedStates[he]){if(this.deletedStates[he][Ce]===null)this.state[he][Ce]={};else for(const Pe of Object.keys(this.deletedStates[he][Ce]))delete this.state[he][Ce][Pe];Ee[Ce]=this.state[he][Ce]}ee[he]=ee[he]||{},ft(ee[he],Ee)}if(this.stateChanges={},this.deletedStates={},Object.keys(ee).length!==0)for(const he in y)y[he].setFeatureState(ee,$)}}class I_{constructor(y){this.size=y,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(y,$){const ee=this.toIdx(y,$);return{min:this.minimums[ee],max:this.maximums[ee]}}isLeaf(y,$){return this.leaves[this.toIdx(y,$)]}toIdx(y,$){return $*this.size+y}}function M_(j,y,$,ee){let he=0,Ee=Number.MAX_VALUE;for(let Ce=0;Ce<3;Ce++)if(Math.abs(ee[Ce])<1e-15){if($[Ce]<j[Ce]||$[Ce]>y[Ce])return null}else{const Pe=1/ee[Ce];let $e=(j[Ce]-$[Ce])*Pe,De=(y[Ce]-$[Ce])*Pe;if($e>De){const Ve=$e;$e=De,De=Ve}if($e>he&&(he=$e),De<Ee&&(Ee=De),he>Ee)return null}return he}function O_(j,y,$,ee,he,Ee,Ce,Pe,$e,De,Ve){const Ze=ee-j,Xe=he-y,rt=Ee-$,st=Ce-j,gt=Pe-y,At=$e-$,Bt=Ve[1]*At-Ve[2]*gt,qt=Ve[2]*st-Ve[0]*At,Ft=Ve[0]*gt-Ve[1]*st,Ht=Ze*Bt+Xe*qt+rt*Ft;if(Math.abs(Ht)<1e-15)return null;const en=1/Ht,Zt=De[0]-j,An=De[1]-y,bn=De[2]-$,Mn=(Zt*Bt+An*qt+bn*Ft)*en;if(Mn<0||Mn>1)return null;const Yn=An*rt-bn*Xe,Cn=bn*Ze-Zt*rt,Ln=Zt*Xe-An*Ze,Un=(Ve[0]*Yn+Ve[1]*Cn+Ve[2]*Ln)*en;return Un<0||Mn+Un>1?null:(st*Yn+gt*Cn+At*Ln)*en}function R_(j,y,$){return(j-y)/($-y)}function $_(j,y,$,ee,he,Ee,Ce,Pe,$e){const De=1<<$,Ve=Ee-ee,Ze=Ce-he,Xe=(j+1)/De*Ve+ee,rt=(y+0)/De*Ze+he,st=(y+1)/De*Ze+he;Pe[0]=(j+0)/De*Ve+ee,Pe[1]=rt,$e[0]=Xe,$e[1]=st}class z_{constructor(y){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=y,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const $=function(Ee){const Ce=Math.ceil(Math.log2(Ee.dim/8)),Pe=[];let $e=Math.ceil(Math.pow(2,Ce));const De=1/$e,Ve=(rt,st,gt,At,Bt)=>{const qt=At?1:0,Ft=(rt+1)*gt-qt,Ht=st*gt,en=(st+1)*gt-qt;Bt[0]=rt*gt,Bt[1]=Ht,Bt[2]=Ft,Bt[3]=en};let Ze=new I_($e);const Xe=[];for(let rt=0;rt<$e*$e;rt++){Ve(rt%$e,Math.floor(rt/$e),De,!1,Xe);const st=tc(Xe[0],Xe[1],Ee),gt=tc(Xe[2],Xe[1],Ee),At=tc(Xe[2],Xe[3],Ee),Bt=tc(Xe[0],Xe[3],Ee);Ze.minimums.push(Math.min(st,gt,At,Bt)),Ze.maximums.push(Math.max(st,gt,At,Bt)),Ze.leaves.push(1)}for(Pe.push(Ze),$e/=2;$e>=1;$e/=2){const rt=Pe[Pe.length-1];Ze=new I_($e);for(let st=0;st<$e*$e;st++){Ve(st%$e,Math.floor(st/$e),2,!0,Xe);const gt=rt.getElevation(Xe[0],Xe[1]),At=rt.getElevation(Xe[2],Xe[1]),Bt=rt.getElevation(Xe[2],Xe[3]),qt=rt.getElevation(Xe[0],Xe[3]),Ft=rt.isLeaf(Xe[0],Xe[1]),Ht=rt.isLeaf(Xe[2],Xe[1]),en=rt.isLeaf(Xe[2],Xe[3]),Zt=rt.isLeaf(Xe[0],Xe[3]),An=Math.min(gt.min,At.min,Bt.min,qt.min),bn=Math.max(gt.max,At.max,Bt.max,qt.max),Mn=Ft&&Ht&&en&&Zt;Ze.maximums.push(bn),Ze.minimums.push(An),Ze.leaves.push(bn-An<=5&&Mn?1:0)}Pe.push(Ze)}return Pe}(this.dem),ee=$.length-1,he=$[ee];this._addNode(he.minimums[0],he.maximums[0],he.leaves[0]),this._construct($,0,0,ee,0)}raycastRoot(y,$,ee,he,Ee,Ce,Pe=1){return M_([y,$,-100],[ee,he,this.maximums[0]*Pe],Ee,Ce)}raycast(y,$,ee,he,Ee,Ce,Pe=1){if(!this.nodeCount)return null;const $e=this.raycastRoot(y,$,ee,he,Ee,Ce,Pe);if($e==null)return null;const De=[],Ve=[],Ze=[],Xe=[],rt=[{idx:0,t:$e,nodex:0,nodey:0,depth:0}];for(;rt.length>0;){const{idx:st,t:gt,nodex:At,nodey:Bt,depth:qt}=rt.pop();if(this.leaves[st]){$_(At,Bt,qt,y,$,ee,he,Ze,Xe);const Ht=1<<qt,en=(At+0)/Ht,Zt=(At+1)/Ht,An=(Bt+0)/Ht,bn=(Bt+1)/Ht,Mn=tc(en,An,this.dem)*Pe,Yn=tc(Zt,An,this.dem)*Pe,Cn=tc(Zt,bn,this.dem)*Pe,Ln=tc(en,bn,this.dem)*Pe,Un=O_(Ze[0],Ze[1],Mn,Xe[0],Ze[1],Yn,Xe[0],Xe[1],Cn,Ee,Ce),Bn=O_(Xe[0],Xe[1],Cn,Ze[0],Xe[1],Ln,Ze[0],Ze[1],Mn,Ee,Ce),Zn=Math.min(Un!==null?Un:Number.MAX_VALUE,Bn!==null?Bn:Number.MAX_VALUE);if(Zn!==Number.MAX_VALUE)return Zn;{const Vn=yd([],Ee,Ce,gt);if(D_(Mn,Yn,Ln,Cn,R_(Vn[0],Ze[0],Xe[0]),R_(Vn[1],Ze[1],Xe[1]))>=Vn[2])return gt}continue}let Ft=0;for(let Ht=0;Ht<this._siblingOffset.length;Ht++){$_((At<<1)+this._siblingOffset[Ht][0],(Bt<<1)+this._siblingOffset[Ht][1],qt+1,y,$,ee,he,Ze,Xe),Ze[2]=-100,Xe[2]=this.maximums[this.childOffsets[st]+Ht]*Pe;const en=M_(Ze,Xe,Ee,Ce);if(en!=null){const Zt=en;De[Ht]=Zt;let An=!1;for(let bn=0;bn<Ft&&!An;bn++)Zt>=De[Ve[bn]]&&(Ve.splice(bn,0,Ht),An=!0);An||(Ve[Ft]=Ht),Ft++}}for(let Ht=0;Ht<Ft;Ht++){const en=Ve[Ht];rt.push({idx:this.childOffsets[st]+en,t:De[en],nodex:(At<<1)+this._siblingOffset[en][0],nodey:(Bt<<1)+this._siblingOffset[en][1],depth:qt+1})}}return null}_addNode(y,$,ee){return this.minimums.push(y),this.maximums.push($),this.leaves.push(ee),this.childOffsets.push(0),this.nodeCount++}_construct(y,$,ee,he,Ee){if(y[he].isLeaf($,ee)===1)return;this.childOffsets[Ee]||(this.childOffsets[Ee]=this.nodeCount);const Ce=he-1,Pe=y[Ce];let $e=0,De=0;for(let Ve=0;Ve<this._siblingOffset.length;Ve++){const Ze=2*$+this._siblingOffset[Ve][0],Xe=2*ee+this._siblingOffset[Ve][1],rt=Pe.getElevation(Ze,Xe),st=Pe.isLeaf(Ze,Xe),gt=this._addNode(rt.min,rt.max,st);st&&($e|=1<<Ve),De||(De=gt)}for(let Ve=0;Ve<this._siblingOffset.length;Ve++)$e&1<<Ve||this._construct(y,2*$+this._siblingOffset[Ve][0],2*ee+this._siblingOffset[Ve][1],Ce,De+Ve)}}function D_(j,y,$,ee,he,Ee){return qr(qr(j,$,Ee),qr(y,ee,Ee),he)}function tc(j,y,$){const ee=$.dim,he=qe(j*ee-.5,0,ee-1),Ee=qe(y*ee-.5,0,ee-1),Ce=Math.floor(he),Pe=Math.floor(Ee),$e=Math.min(Ce+1,ee-1),De=Math.min(Pe+1,ee-1);return D_($.get(Ce,Pe),$.get($e,Pe),$.get(Ce,De),$.get($e,De),he-Ce,Ee-Pe)}const L_={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class qd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(y,$,ee,he=!1,Ee=!1){if(this.uid=y,$.height!==$.width)throw new RangeError("DEM tiles must be square");if(ee&&ee!=="mapbox"&&ee!=="terrarium")return Mt(`"${ee}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=$.height;const Ce=this.dim=$.height-2,Pe=new Uint32Array($.data.buffer);if(this.pixels=new Uint8Array($.data.buffer),this.encoding=ee||"mapbox",this.borderReady=he,!he){for(let $e=0;$e<Ce;$e++)Pe[this._idx(-1,$e)]=Pe[this._idx(0,$e)],Pe[this._idx(Ce,$e)]=Pe[this._idx(Ce-1,$e)],Pe[this._idx($e,-1)]=Pe[this._idx($e,0)],Pe[this._idx($e,Ce)]=Pe[this._idx($e,Ce-1)];Pe[this._idx(-1,-1)]=Pe[this._idx(0,0)],Pe[this._idx(Ce,-1)]=Pe[this._idx(Ce-1,0)],Pe[this._idx(-1,Ce)]=Pe[this._idx(0,Ce-1)],Pe[this._idx(Ce,Ce)]=Pe[this._idx(Ce-1,Ce-1)],Ee&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new z_(this)}get(y,$,ee=!1){ee&&(y=qe(y,-1,this.dim),$=qe($,-1,this.dim));const he=4*this._idx(y,$);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[he],this.pixels[he+1],this.pixels[he+2])}static getUnpackVector(y){return L_[y]}get unpackVector(){return L_[this.encoding]}_idx(y,$){if(y<-1||y>=this.dim+1||$<-1||$>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return($+1)*this.stride+(y+1)}_unpackMapbox(y,$,ee){return(256*y*256+256*$+ee)/10-1e4}_unpackTerrarium(y,$,ee){return 256*y+$+ee/256-32768}static pack(y,$){const ee=[0,0,0,0],he=qd.getUnpackVector($);let Ee=Math.floor((y+he[3])/he[2]);return ee[2]=Ee%256,Ee=Math.floor(Ee/256),ee[1]=Ee%256,Ee=Math.floor(Ee/256),ee[0]=Ee,ee}getPixels(){return new Zo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(y,$,ee){if(this.dim!==y.dim)throw new Error("dem dimension mismatch");let he=$*this.dim,Ee=$*this.dim+this.dim,Ce=ee*this.dim,Pe=ee*this.dim+this.dim;switch($){case-1:he=Ee-1;break;case 1:Ee=he+1}switch(ee){case-1:Ce=Pe-1;break;case 1:Pe=Ce+1}const $e=-$*this.dim,De=-ee*this.dim;for(let Ve=Ce;Ve<Pe;Ve++)for(let Ze=he;Ze<Ee;Ze++){const Xe=4*this._idx(Ze,Ve),rt=4*this._idx(Ze+$e,Ve+De);this.pixels[Xe+0]=y.pixels[rt+0],this.pixels[Xe+1]=y.pixels[rt+1],this.pixels[Xe+2]=y.pixels[rt+2],this.pixels[Xe+3]=y.pixels[rt+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}cr(qd,"DEMData"),cr(z_,"DemMinMaxQuadTree",{omit:["dem"]});class t0{constructor(y,$){this.max=y,this.onRemove=$,this.reset()}reset(){for(const y in this.data)for(const $ of this.data[y])$.timeout&&clearTimeout($.timeout),this.onRemove($.value);return this.data={},this.order=[],this}add(y,$,ee){const he=y.wrapped().key;this.data[he]===void 0&&(this.data[he]=[]);const Ee={value:$,timeout:void 0};if(ee!==void 0&&(Ee.timeout=setTimeout(()=>{this.remove(y,Ee)},ee)),this.data[he].push(Ee),this.order.push(he),this.order.length>this.max){const Ce=this._getAndRemoveByKey(this.order[0]);Ce&&this.onRemove(Ce)}return this}has(y){return y.wrapped().key in this.data}getAndRemove(y){return this.has(y)?this._getAndRemoveByKey(y.wrapped().key):null}_getAndRemoveByKey(y){const $=this.data[y].shift();return $.timeout&&clearTimeout($.timeout),this.data[y].length===0&&delete this.data[y],this.order.splice(this.order.indexOf(y),1),$.value}getByKey(y){const $=this.data[y];return $?$[0].value:null}get(y){return this.has(y)?this.data[y.wrapped().key][0].value:null}remove(y,$){if(!this.has(y))return this;const ee=y.wrapped().key,he=$===void 0?0:this.data[ee].indexOf($),Ee=this.data[ee][he];return this.data[ee].splice(he,1),Ee.timeout&&clearTimeout(Ee.timeout),this.data[ee].length===0&&delete this.data[ee],this.onRemove(Ee.value),this.order.splice(this.order.indexOf(ee),1),this}setMaxSize(y){for(this.max=y;this.order.length>this.max;){const $=this._getAndRemoveByKey(this.order[0]);$&&this.onRemove($)}return this}filter(y){const $=[];for(const ee in this.data)for(const he of this.data[ee])y(he.value)||$.push(he);for(const ee of $)this.remove(ee.value.tileID,ee)}}class Zu{constructor(y,$,ee){this.func=y,this.mask=$,this.range=ee}}Zu.ReadOnly=!1,Zu.ReadWrite=!0,Zu.disabled=new Zu(519,Zu.ReadOnly,[0,1]);const Fp=7680;class Np{constructor(y,$,ee,he,Ee,Ce){this.test=y,this.ref=$,this.mask=ee,this.fail=he,this.depthFail=Ee,this.pass=Ce}}Np.disabled=new Np({func:519,mask:0},0,0,Fp,Fp,Fp);class bs{constructor(y,$,ee){this.blendFunction=y,this.blendColor=$,this.mask=ee}}bs.Replace=[1,0],bs.disabled=new bs(bs.Replace,ri.transparent,[!1,!1,!1,!1]),bs.unblended=new bs(bs.Replace,ri.transparent,[!0,!0,!0,!0]),bs.alphaBlended=new bs([1,771],ri.transparent,[!0,!0,!0,!0]);const jp=1029,Up=2305;class Wa{constructor(y,$,ee){this.enable=y,this.mode=$,this.frontFace=ee}}Wa.disabled=new Wa(!1,jp,Up),Wa.backCCW=new Wa(!0,jp,Up),Wa.backCW=new Wa(!0,jp,2304),Wa.frontCW=new Wa(!0,1028,2304),Wa.frontCCW=new Wa(!0,1028,Up);class Zc extends vr{constructor(y,$,ee){super(),this.id=y,this._onlySymbols=ee,$.on("data",he=>{he.dataType==="source"&&he.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&he.dataType==="source"&&he.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),$.on("error",()=>{this._sourceErrored=!0}),this._source=$,this._tiles={},this._cache=new t0(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=$.minTileCacheSize,this._maxTileCacheSize=$.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new e0,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(y){this.map=y,this._minTileCacheSize=this._minTileCacheSize===void 0&&y?y._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&y?y._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const y in this._tiles){const $=this._tiles[y];if($.state!=="loaded"&&$.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const y=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,y&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(y,$){return y.isSymbolTile=this._onlySymbols,this._source.loadTile(y,$)}_unloadTile(y){if(this._source.unloadTile)return this._source.unloadTile(y,()=>{})}_abortTile(y){if(this._source.abortTile)return this._source.abortTile(y,()=>{})}serialize(){return this._source.serialize()}prepare(y){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const $ in this._tiles){const ee=this._tiles[$];this._source.prepareTile(ee)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,ee.tileID),ee.upload(y),ee.prepare(this.map.style.imageManager)}else for(const $ in this._tiles){const ee=this._tiles[$];ee.upload(y),ee.prepare(this.map.style.imageManager)}}getIds(){return yt(this._tiles).map(y=>y.tileID).sort(B_).map(y=>y.key)}getRenderableIds(y){const $=[];for(const ee in this._tiles)this._isIdRenderable(+ee,y)&&$.push(this._tiles[ee]);return y?$.sort((ee,he)=>{const Ee=ee.tileID,Ce=he.tileID,Pe=new ye(Ee.canonical.x,Ee.canonical.y)._rotate(this.transform.angle),$e=new ye(Ce.canonical.x,Ce.canonical.y)._rotate(this.transform.angle);return Ee.overscaledZ-Ce.overscaledZ||$e.y-Pe.y||$e.x-Pe.x}).map(ee=>ee.tileID.key):$.map(ee=>ee.tileID).sort(B_).map(ee=>ee.key)}hasRenderableParent(y){const $=this.findLoadedParent(y,0);return!!$&&this._isIdRenderable($.tileID.key)}_isIdRenderable(y,$){return this._tiles[y]&&this._tiles[y].hasData()&&!this._coveredTiles[y]&&($||!this._tiles[y].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const y in this._tiles)this._tiles[y].state!=="errored"&&this._reloadTile(+y,"reloading")}}_reloadTile(y,$){const ee=this._tiles[y];ee&&(ee.state!=="loading"&&(ee.state=$),this._loadTile(ee,this._tileLoaded.bind(this,ee,y,$)))}_tileLoaded(y,$,ee,he){if(he)if(y.state="errored",he.status!==404)this._source.fire(new ti(he,{tile:y}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const Ee=this.map.painter.terrain;this.update(this.transform,Ee.getScaledDemTileSize(),!0),Ee.resetTileLookupCache(this.id)}else this.update(this.transform);else y.timeAdded=$n.now(),ee==="expired"&&(y.refreshedUponExpiration=!0),this._setTileReloadTimer($,y),this._source.type==="raster-dem"&&y.dem&&this._backfillDEM(y),this._state.initializeTileState(y,this.map?this.map.painter:null),this._source.fire(new oi("data",{dataType:"source",tile:y,coord:y.tileID,sourceCacheId:this.id}))}_backfillDEM(y){const $=this.getRenderableIds();for(let he=0;he<$.length;he++){const Ee=$[he];if(y.neighboringTiles&&y.neighboringTiles[Ee]){const Ce=this.getTileByID(Ee);ee(y,Ce),ee(Ce,y)}}function ee(he,Ee){if(!he.dem||he.dem.borderReady)return;he.needsHillshadePrepare=!0,he.needsDEMTextureUpload=!0;let Ce=Ee.tileID.canonical.x-he.tileID.canonical.x;const Pe=Ee.tileID.canonical.y-he.tileID.canonical.y,$e=Math.pow(2,he.tileID.canonical.z),De=Ee.tileID.key;Ce===0&&Pe===0||Math.abs(Pe)>1||(Math.abs(Ce)>1&&(Math.abs(Ce+$e)===1?Ce+=$e:Math.abs(Ce-$e)===1&&(Ce-=$e)),Ee.dem&&he.dem&&(he.dem.backfillBorder(Ee.dem,Ce,Pe),he.neighboringTiles&&he.neighboringTiles[De]&&(he.neighboringTiles[De].backfilled=!0)))}}getTile(y){return this.getTileByID(y.key)}getTileByID(y){return this._tiles[y]}_retainLoadedChildren(y,$,ee,he){for(const Ee in this._tiles){let Ce=this._tiles[Ee];if(he[Ee]||!Ce.hasData()||Ce.tileID.overscaledZ<=$||Ce.tileID.overscaledZ>ee)continue;let Pe=Ce.tileID;for(;Ce&&Ce.tileID.overscaledZ>$+1;){const De=Ce.tileID.scaledTo(Ce.tileID.overscaledZ-1);Ce=this._tiles[De.key],Ce&&Ce.hasData()&&(Pe=De)}let $e=Pe;for(;$e.overscaledZ>$;)if($e=$e.scaledTo($e.overscaledZ-1),y[$e.key]){he[Pe.key]=Pe;break}}}findLoadedParent(y,$){if(y.key in this._loadedParentTiles){const ee=this._loadedParentTiles[y.key];return ee&&ee.tileID.overscaledZ>=$?ee:null}for(let ee=y.overscaledZ-1;ee>=$;ee--){const he=y.scaledTo(ee),Ee=this._getLoadedTile(he);if(Ee)return Ee}}_getLoadedTile(y){const $=this._tiles[y.key];return $&&$.hasData()?$:this._cache.getByKey(this._source.reparseOverscaled?y.wrapped().key:y.canonical.key)}updateCacheSize(y,$){$=$||this._source.tileSize;const ee=Math.ceil(y.width/$)+1,he=Math.ceil(y.height/$)+1,Ee=Math.floor(ee*he*5),Ce=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,Ee):Ee,Pe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Ce):Ce;this._cache.setMaxSize(Pe)}handleWrapJump(y){const $=Math.round((y-(this._prevLng===void 0?y:this._prevLng))/360);if(this._prevLng=y,$){const ee={};for(const he in this._tiles){const Ee=this._tiles[he];Ee.tileID=Ee.tileID.unwrapTo(Ee.tileID.wrap+$),ee[Ee.tileID.key]=Ee}this._tiles=ee;for(const he in this._timers)clearTimeout(this._timers[he]),delete this._timers[he];for(const he in this._tiles)this._setTileReloadTimer(+he,this._tiles[he])}}update(y,$,ee){if(this.transform=y,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!ee)return;let he;this.updateCacheSize(y,$),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?he=y.getVisibleUnwrappedCoordinates(this._source.tileID).map(Pe=>new Co(Pe.canonical.z,Pe.wrap,Pe.canonical.z,Pe.canonical.x,Pe.canonical.y)):(he=y.coveringTiles({tileSize:$||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!ee,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(he=he.filter(Pe=>this._source.hasTile(Pe)))):he=[];const Ee=this._updateRetainedTiles(he);if(F_(this._source.type)&&he.length!==0){const Pe={},$e={},De=Object.keys(Ee);for(const Ze of De){const Xe=Ee[Ze],rt=this._tiles[Ze];if(!rt||rt.fadeEndTime&&rt.fadeEndTime<=$n.now())continue;const st=this.findLoadedParent(Xe,Math.max(Xe.overscaledZ-Zc.maxOverzooming,this._source.minzoom));st&&(this._addTile(st.tileID),Pe[st.tileID.key]=st.tileID),$e[Ze]=Xe}const Ve=he[he.length-1].overscaledZ;for(const Ze in this._tiles){const Xe=this._tiles[Ze];if(Ee[Ze]||!Xe.hasData())continue;let rt=Xe.tileID;for(;rt.overscaledZ>Ve;){rt=rt.scaledTo(rt.overscaledZ-1);const st=this._tiles[rt.key];if(st&&st.hasData()&&$e[rt.key]){Ee[Ze]=Xe.tileID;break}}}for(const Ze in Pe)Ee[Ze]||(this._coveredTiles[Ze]=!0,Ee[Ze]=Pe[Ze])}for(const Pe in Ee)this._tiles[Pe].clearFadeHold();const Ce=function(Pe,$e){const De=[];for(const Ve in Pe)Ve in $e||De.push(Ve);return De}(this._tiles,Ee);for(const Pe of Ce){const $e=this._tiles[Pe];$e.hasSymbolBuckets&&!$e.holdingForFade()?$e.setHoldDuration(this.map._fadeDuration):$e.hasSymbolBuckets&&!$e.symbolFadeFinished()||this._removeTile(+Pe)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const y in this._tiles)this._tiles[y].holdingForFade()&&this._removeTile(+y)}_updateRetainedTiles(y){const $={};if(y.length===0)return $;const ee={},he=y.reduce((De,Ve)=>Math.min(De,Ve.overscaledZ),1/0),Ee=y[0].overscaledZ,Ce=Math.max(Ee-Zc.maxOverzooming,this._source.minzoom),Pe=Math.max(Ee+Zc.maxUnderzooming,this._source.minzoom),$e={};for(const De of y){const Ve=this._addTile(De);$[De.key]=De,Ve.hasData()||he<this._source.maxzoom&&($e[De.key]=De)}this._retainLoadedChildren($e,he,Pe,$);for(const De of y){let Ve=this._tiles[De.key];if(Ve.hasData())continue;if(De.canonical.z>=this._source.maxzoom){const Xe=De.children(this._source.maxzoom)[0],rt=this.getTile(Xe);if(rt&&rt.hasData()){$[Xe.key]=Xe;continue}}else{const Xe=De.children(this._source.maxzoom);if($[Xe[0].key]&&$[Xe[1].key]&&$[Xe[2].key]&&$[Xe[3].key])continue}let Ze=Ve.wasRequested();for(let Xe=De.overscaledZ-1;Xe>=Ce;--Xe){const rt=De.scaledTo(Xe);if(ee[rt.key]||(ee[rt.key]=!0,Ve=this.getTile(rt),!Ve&&Ze&&(Ve=this._addTile(rt)),Ve&&($[rt.key]=rt,Ze=Ve.wasRequested(),Ve.hasData())))break}}return $}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const y in this._tiles){const $=[];let ee,he=this._tiles[y].tileID;for(;he.overscaledZ>0;){if(he.key in this._loadedParentTiles){ee=this._loadedParentTiles[he.key];break}$.push(he.key);const Ee=he.scaledTo(he.overscaledZ-1);if(ee=this._getLoadedTile(Ee),ee)break;he=Ee}for(const Ee of $)this._loadedParentTiles[Ee]=ee}}_addTile(y){let $=this._tiles[y.key];if($)return this._source.prepareTile&&this._source.prepareTile($),$;$=this._cache.getAndRemove(y),$&&(this._setTileReloadTimer(y.key,$),$.tileID=y,this._state.initializeTileState($,this.map?this.map.painter:null),this._cacheTimers[y.key]&&(clearTimeout(this._cacheTimers[y.key]),delete this._cacheTimers[y.key],this._setTileReloadTimer(y.key,$)));const ee=Boolean($);if(!ee){const he=this.map?this.map.painter:null;$=new Bp(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,he,this._isRaster),this._source.prepareTile&&this._source.prepareTile($)||this._loadTile($,this._tileLoaded.bind(this,$,y.key,$.state))}return $?($.uses++,this._tiles[y.key]=$,ee||this._source.fire(new oi("dataloading",{tile:$,coord:$.tileID,dataType:"source"})),$):null}_setTileReloadTimer(y,$){y in this._timers&&(clearTimeout(this._timers[y]),delete this._timers[y]);const ee=$.getExpiryTimeout();ee&&(this._timers[y]=setTimeout(()=>{this._reloadTile(y,"expired"),delete this._timers[y]},ee))}_removeTile(y){const $=this._tiles[y];$&&($.uses--,delete this._tiles[y],this._timers[y]&&(clearTimeout(this._timers[y]),delete this._timers[y]),$.uses>0||($.hasData()&&$.state!=="reloading"?this._cache.add($.tileID,$,$.getExpiryTimeout()):($.aborted=!0,this._abortTile($),this._unloadTile($))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const y in this._tiles)this._removeTile(+y);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(y,$,ee){const he=[],Ee=this.transform;if(!Ee)return he;const Ce=Ee.projection.name==="globe",Pe=va(Ee.center.lng);for(const $e in this._tiles){const De=this._tiles[$e];if(ee&&De.clearQueryDebugViz(),De.holdingForFade())continue;let Ve;if(Ce){const Ze=De.tileID.canonical;if(Ze.z===0){const Xe=[Math.abs(qe(Pe,...Gh(Ze,-1))-Pe),Math.abs(qe(Pe,...Gh(Ze,1))-Pe)];Ve=[0,2*Xe.indexOf(Math.min(...Xe))-1]}else{const Xe=[Math.abs(qe(Pe,...Gh(Ze,-1))-Pe),Math.abs(qe(Pe,...Gh(Ze,0))-Pe),Math.abs(qe(Pe,...Gh(Ze,1))-Pe)];Ve=[Xe.indexOf(Math.min(...Xe))-1]}}else Ve=[0];for(const Ze of Ve){const Xe=y.containsTile(De,Ee,$,Ze);Xe&&he.push(Xe)}}return he}getVisibleCoordinates(y){const $=this.getRenderableIds(y).map(ee=>this._tiles[ee].tileID);for(const ee of $)ee.projMatrix=this.transform.calculateProjMatrix(ee.toUnwrapped());return $}hasTransition(){if(this._source.hasTransition())return!0;if(F_(this._source.type))for(const y in this._tiles){const $=this._tiles[y];if($.fadeEndTime!==void 0&&$.fadeEndTime>=$n.now())return!0}return!1}setFeatureState(y,$,ee){this._state.updateState(y=y||"_geojsonTileLayer",$,ee)}removeFeatureState(y,$,ee){this._state.removeFeatureState(y=y||"_geojsonTileLayer",$,ee)}getFeatureState(y,$){return this._state.getState(y=y||"_geojsonTileLayer",$)}setDependencies(y,$,ee){const he=this._tiles[y];he&&he.setDependencies($,ee)}reloadTilesForDependencies(y,$){for(const ee in this._tiles)this._tiles[ee].hasDependency(y,$)&&this._reloadTile(+ee,"reloading");this._cache.filter(ee=>!ee.hasDependency(y,$))}_preloadTiles(y,$){const ee=new Map,he=Array.isArray(y)?y:[y],Ee=this.map.painter.terrain,Ce=this.usedForTerrain&&Ee?Ee.getScaledDemTileSize():this._source.tileSize;for(const Pe of he){const $e=Pe.coveringTiles({tileSize:Ce,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const De of $e)ee.set(De.key,De);this.usedForTerrain&&Pe.updateElevation(!1)}ot(Array.from(ee.values()),(Pe,$e)=>{const De=new Bp(Pe,this._source.tileSize*Pe.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(De,Ve=>{this._source.type==="raster-dem"&&De.dem&&this._backfillDEM(De),$e(Ve,De)})},$)}}function B_(j,y){const $=Math.abs(2*j.wrap)-+(j.wrap<0),ee=Math.abs(2*y.wrap)-+(y.wrap<0);return j.overscaledZ-y.overscaledZ||ee-$||y.canonical.y-j.canonical.y||y.canonical.x-j.canonical.x}function F_(j){return j==="raster"||j==="image"||j==="video"}function Gh(j,y){const $=1<<j.z;return[j.x/$+y,(j.x+1)/$+y]}Zc.maxOverzooming=10,Zc.maxUnderzooming=3;class Wd{constructor(y,$,ee){this._demTile=y,this._dem=this._demTile.dem,this._scale=$,this._offset=ee}static create(y,$,ee){const he=ee||y.findDEMTileFor($);if(!he||!he.dem)return;const Ee=he.dem,Ce=he.tileID,Pe=1<<$.canonical.z-Ce.canonical.z;return new Wd(he,he.tileSize/Tr/Pe,[($.canonical.x/Pe-Ce.canonical.x)*Ee.dim,($.canonical.y/Pe-Ce.canonical.y)*Ee.dim])}tileCoordToPixel(y,$){const ee=$*this._scale+this._offset[1],he=Math.floor(y*this._scale+this._offset[0]),Ee=Math.floor(ee);return new ye(he,Ee)}getElevationAt(y,$,ee,he){const Ee=y*this._scale+this._offset[0],Ce=$*this._scale+this._offset[1],Pe=Math.floor(Ee),$e=Math.floor(Ce),De=this._dem;return he=!!he,ee?qr(qr(De.get(Pe,$e,he),De.get(Pe,$e+1,he),Ce-$e),qr(De.get(Pe+1,$e,he),De.get(Pe+1,$e+1,he),Ce-$e),Ee-Pe):De.get(Pe,$e,he)}getElevationAtPixel(y,$,ee){return this._dem.get(y,$,!!ee)}getMeterToDEM(y){return(1<<this._demTile.tileID.canonical.z)*Do(1,y)*this._dem.stride}}class N_{constructor(y,$){this.tileID=y,this.x=y.canonical.x,this.y=y.canonical.y,this.z=y.canonical.z,this.grid=new Ra(Tr,16,0),this.featureIndexArray=new fh,this.promoteId=$}insert(y,$,ee,he,Ee,Ce=0){const Pe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ee,he,Ee,Ce);const $e=this.grid;for(let De=0;De<$.length;De++){const Ve=$[De],Ze=[1/0,1/0,-1/0,-1/0];for(let Xe=0;Xe<Ve.length;Xe++){const rt=Ve[Xe];Ze[0]=Math.min(Ze[0],rt.x),Ze[1]=Math.min(Ze[1],rt.y),Ze[2]=Math.max(Ze[2],rt.x),Ze[3]=Math.max(Ze[3],rt.y)}Ze[0]<Tr&&Ze[1]<Tr&&Ze[2]>=0&&Ze[3]>=0&&$e.insert(Pe,Ze[0],Ze[1],Ze[2],Ze[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new qc.VectorTile(new Oh(this.rawTileData)).layers,this.sourceLayerCoder=new T_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const y in this.vtLayers)this.vtFeatures[y]=[]}return this.vtLayers}query(y,$,ee,he){this.loadVTLayers();const Ee=y.params||{},Ce=Xs(Ee.filter),Pe=y.tileResult,$e=y.transform,De=Pe.bufferedTilespaceBounds,Ve=this.grid.query(De.min.x,De.min.y,De.max.x,De.max.y,(st,gt,At,Bt)=>wi(Pe.bufferedTilespaceGeometry,st,gt,At,Bt));Ve.sort(n0);let Ze=null;$e.elevation&&Ve.length>0&&(Ze=Wd.create($e.elevation,this.tileID));const Xe={};let rt;for(let st=0;st<Ve.length;st++){const gt=Ve[st];if(gt===rt)continue;rt=gt;const At=this.featureIndexArray.get(gt);let Bt=null;this.loadMatchingFeature(Xe,At,Ce,Ee.layers,Ee.availableImages,$,ee,he,(qt,Ft,Ht,en=0)=>(Bt||(Bt=wt(qt,this.tileID.canonical,y.tileTransform)),Ft.queryIntersectsFeature(Pe,qt,Ht,Bt,this.z,y.transform,y.pixelPosMatrix,Ze,en)))}return Xe}loadMatchingFeature(y,$,ee,he,Ee,Ce,Pe,$e,De){const{featureIndex:Ve,bucketIndex:Ze,sourceLayerIndex:Xe,layoutVertexArrayOffset:rt}=$,st=this.bucketLayerIDs[Ze];if(he&&!function(qt,Ft){for(let Ht=0;Ht<qt.length;Ht++)if(Ft.indexOf(qt[Ht])>=0)return!0;return!1}(he,st))return;const gt=this.sourceLayerCoder.decode(Xe),At=this.vtLayers[gt].feature(Ve);if(ee.needGeometry){const qt=Ge(At,!0);if(!ee.filter(new Tt(this.tileID.overscaledZ),qt,this.tileID.canonical))return}else if(!ee.filter(new Tt(this.tileID.overscaledZ),At))return;const Bt=this.getId(At,gt);for(let qt=0;qt<st.length;qt++){const Ft=st[qt];if(he&&he.indexOf(Ft)<0)continue;const Ht=Ce[Ft];if(!Ht)continue;let en={};Bt!==void 0&&$e&&(en=$e.getState(Ht.sourceLayer||"_geojsonTileLayer",Bt));const Zt=ft({},Pe[Ft]);Zt.paint=j_(Zt.paint,Ht.paint,At,en,Ee),Zt.layout=j_(Zt.layout,Ht.layout,At,en,Ee);const An=!De||De(At,Ht,en,rt);if(!An)continue;const bn=new k_(At,this.z,this.x,this.y,Bt);bn.layer=Zt;let Mn=y[Ft];Mn===void 0&&(Mn=y[Ft]=[]),Mn.push({featureIndex:Ve,feature:bn,intersectionZ:An})}}lookupSymbolFeatures(y,$,ee,he,Ee,Ce,Pe,$e){const De={};this.loadVTLayers();const Ve=Xs(Ee);for(const Ze of y)this.loadMatchingFeature(De,{bucketIndex:ee,sourceLayerIndex:he,featureIndex:Ze,layoutVertexArrayOffset:0},Ve,Ce,Pe,$e,$);return De}loadFeature(y){const{featureIndex:$,sourceLayerIndex:ee}=y;this.loadVTLayers();const he=this.sourceLayerCoder.decode(ee),Ee=this.vtFeatures[he];if(Ee[$])return Ee[$];const Ce=this.vtLayers[he].feature($);return Ee[$]=Ce,Ce}hasLayer(y){for(const $ of this.bucketLayerIDs)for(const ee of $)if(y===ee)return!0;return!1}getId(y,$){let ee=y.id;return this.promoteId&&(ee=y.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[$]],typeof ee=="boolean"&&(ee=Number(ee))),ee}}function j_(j,y,$,ee,he){return vt(j,(Ee,Ce)=>{const Pe=y instanceof Xt?y.get(Ce):null;return Pe&&Pe.evaluate?Pe.evaluate($,ee,he):Pe})}function n0(j,y){return y-j}cr(N_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class U_{constructor(y){const $={},ee=[];for(const Pe in y){const $e=y[Pe],De=$[Pe]={};for(const Ve in $e.glyphs){const Ze=$e.glyphs[+Ve];if(!Ze||Ze.bitmap.width===0||Ze.bitmap.height===0)continue;const Xe=Ze.metrics.localGlyph?2:1,rt={x:0,y:0,w:Ze.bitmap.width+2*Xe,h:Ze.bitmap.height+2*Xe};ee.push(rt),De[Ve]=rt}}const{w:he,h:Ee}=xp(ee),Ce=new al({width:he||1,height:Ee||1});for(const Pe in y){const $e=y[Pe];for(const De in $e.glyphs){const Ve=$e.glyphs[+De];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const Ze=$[Pe][De],Xe=Ve.metrics.localGlyph?2:1;al.copy(Ve.bitmap,Ce,{x:0,y:0},{x:Ze.x+Xe,y:Ze.y+Xe},Ve.bitmap)}}this.image=Ce,this.positions=$}}cr(U_,"GlyphAtlas");class r0{constructor(y){this.tileID=new Co(y.tileID.overscaledZ,y.tileID.wrap,y.tileID.canonical.z,y.tileID.canonical.x,y.tileID.canonical.y),this.tileZoom=y.tileZoom,this.uid=y.uid,this.zoom=y.zoom,this.canonical=y.tileID.canonical,this.pixelRatio=y.pixelRatio,this.tileSize=y.tileSize,this.source=y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=y.showCollisionBoxes,this.collectResourceTiming=!!y.collectResourceTiming,this.returnDependencies=!!y.returnDependencies,this.promoteId=y.promoteId,this.enableTerrain=!!y.enableTerrain,this.isSymbolTile=y.isSymbolTile,this.tileTransform=Wc(y.tileID.canonical,y.projection),this.projection=y.projection}parse(y,$,ee,he,Ee){this.status="parsing",this.data=y,this.collisionBoxArray=new Go;const Ce=new T_(Object.keys(y.layers).sort()),Pe=new N_(this.tileID,this.promoteId);Pe.bucketLayerIDs=[];const $e={},De=new Lp(256,256),Ve={featureIndex:Pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:De,availableImages:ee},Ze=$.familiesBySource[this.source];for(const en in Ze){const Zt=y.layers[en];if(!Zt)continue;let An=!1,bn=!1;for(const Cn of Ze[en])Cn[0].type==="symbol"?An=!0:bn=!0;if(this.isSymbolTile===!0&&!An||this.isSymbolTile===!1&&!bn)continue;Zt.version===1&&Mt(`Vector tile source "${this.source}" layer "${en}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mn=Ce.encode(en),Yn=[];for(let Cn=0;Cn<Zt.length;Cn++){const Ln=Zt.feature(Cn),Un=Pe.getId(Ln,en);Yn.push({feature:Ln,id:Un,index:Cn,sourceLayerIndex:Mn})}for(const Cn of Ze[en]){const Ln=Cn[0];this.isSymbolTile!==void 0&&Ln.type==="symbol"!==this.isSymbolTile||Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(Vp(Cn,this.zoom,ee),($e[Ln.id]=Ln.createBucket({index:Pe.bucketLayerIDs.length,layers:Cn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:ee})).populate(Yn,Ve,this.tileID.canonical,this.tileTransform),Pe.bucketLayerIDs.push(Cn.map(Un=>Un.id)))}}let Xe,rt,st,gt;De.trim();const At={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Bt=vt(Ve.glyphDependencies,en=>Object.keys(en).map(Number));Object.keys(Bt).length?he.send("getGlyphs",{uid:this.uid,stacks:Bt},(en,Zt)=>{Xe||(Xe=en,rt=Zt,Ht.call(this))},void 0,!1,At):rt={};const qt=Object.keys(Ve.iconDependencies);qt.length?he.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"icons"},(en,Zt)=>{Xe||(Xe=en,st=Zt,Ht.call(this))},void 0,!1,At):st={};const Ft=Object.keys(Ve.patternDependencies);function Ht(){if(Xe)return Ee(Xe);if(rt&&st&&gt){const en=new U_(rt),Zt=new Vf(st,gt);for(const An in $e){const bn=$e[An];bn instanceof Jl?(Vp(bn.layers,this.zoom,ee),Tg(bn,rt,en.positions,st,Zt.iconPositions,this.showCollisionBoxes,ee,this.tileID.canonical,this.tileZoom,this.projection)):bn.hasPattern&&(bn instanceof Sd||bn instanceof Ad||bn instanceof Sh)&&(Vp(bn.layers,this.zoom,ee),bn.addFeatures(Ve,this.tileID.canonical,Zt.patternPositions,ee,this.tileTransform))}this.status="done",Ee(null,{buckets:yt($e).filter(An=>!An.isEmpty()),featureIndex:Pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:en.image,lineAtlas:De,imageAtlas:Zt,glyphMap:this.returnDependencies?rt:null,iconMap:this.returnDependencies?st:null,glyphPositions:this.returnDependencies?en.positions:null})}}Ft.length?he.send("getImages",{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"},(en,Zt)=>{Xe||(Xe=en,gt=Zt,Ht.call(this))},void 0,!1,At):gt={},Ht.call(this)}}function Vp(j,y,$){const ee=new Tt(y);for(const he of j)he.recalculate(ee,$)}class V_{constructor(y){this.entries={},this.scheduler=y}request(y,$,ee,he){const Ee=this.entries[y]=this.entries[y]||{callbacks:[]};if(Ee.result){const[Ce,Pe]=Ee.result;return this.scheduler?this.scheduler.add(()=>{he(Ce,Pe)},$):he(Ce,Pe),()=>{}}return Ee.callbacks.push(he),Ee.cancel||(Ee.cancel=ee((Ce,Pe)=>{Ee.result=[Ce,Pe];for(const $e of Ee.callbacks)this.scheduler?this.scheduler.add(()=>{$e(Ce,Pe)},$):$e(Ce,Pe);setTimeout(()=>delete this.entries[y],3e3)})),()=>{Ee.result||(Ee.callbacks=Ee.callbacks.filter(Ce=>Ce!==he),Ee.callbacks.length||(Ee.cancel(),delete this.entries[y]))}}}function G_(j,y,$){const ee=JSON.stringify(j.request);return j.data&&(this.deduped.entries[ee]={result:[null,j.data]}),this.deduped.request(ee,{type:"parseTile",isSymbolTile:j.isSymbolTile,zoom:j.tileZoom},he=>{const Ee=fn(j.request,(Ce,Pe,$e,De)=>{Ce?he(Ce):Pe&&he(null,{vectorTile:$?void 0:new qc.VectorTile(new Oh(Pe)),rawData:Pe,cacheControl:$e,expires:De})});return()=>{Ee.cancel(),he()}},y)}I.ARRAY_TYPE=Wo,I.AUTH_ERR_MSG=cn,I.Aabb=Lo,I.Actor=class{constructor(j,y,$){this.target=j,this.parent=y,this.mapId=$,this.callbacks={},this.cancelCallbacks={},it(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Jt()?j:_e,this.scheduler=new Jg}send(j,y,$,ee,he=!1,Ee){const Ce=Math.round(1e18*Math.random()).toString(36).substring(0,10);$&&($.metadata=Ee,this.callbacks[Ce]=$);const Pe=Rt(this.globalScope)?void 0:[];return this.target.postMessage({id:Ce,type:j,hasCallback:!!$,targetMapId:ee,mustQueue:he,sourceMapId:this.mapId,data:cs(y,Pe)},Pe),{cancel:()=>{$&&delete this.callbacks[Ce],this.target.postMessage({id:Ce,type:"<cancel>",targetMapId:ee,sourceMapId:this.mapId})}}}receive(j){const y=j.data,$=y.id;if($&&(!y.targetMapId||this.mapId===y.targetMapId))if(y.type==="<cancel>"){const ee=this.cancelCallbacks[$];delete this.cancelCallbacks[$],ee&&ee.cancel()}else if(y.mustQueue||Jt()){const ee=this.callbacks[$];this.cancelCallbacks[$]=this.scheduler.add(()=>this.processTask($,y),ee&&ee.metadata||{type:"message"})}else this.processTask($,y)}processTask(j,y){if(y.type==="<response>"){const $=this.callbacks[j];delete this.callbacks[j],$&&(y.error?$(Qs(y.error)):$(null,Qs(y.data)))}else{const $=Rt(this.globalScope)?void 0:[],ee=y.hasCallback?(Ee,Ce)=>{delete this.cancelCallbacks[j],this.target.postMessage({id:j,type:"<response>",sourceMapId:this.mapId,error:Ee?cs(Ee):null,data:cs(Ce,$)},$)}:Ee=>{},he=Qs(y.data);if(this.parent[y.type])this.parent[y.type](y.sourceMapId,he,ee);else if(this.parent.getWorkerSource){const Ee=y.type.split(".");this.parent.getWorkerSource(y.sourceMapId,Ee[0],he.source)[Ee[1]](he,ee)}else ee(new Error(`Could not find function ${y.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},I.CanonicalTileID=kd,I.Color=ri,I.ColorMode=bs,I.CullFaceMode=Wa,I.DEMData=qd,I.DataConstantProperty=Wt,I.DedupedRequest=V_,I.DepthMode=Zu,I.EXTENT=Tr,I.Elevation=class{isDataAvailableAtPoint(j){const y=this._source();if(!y||j.y<0||j.y>1)return!1;const $=y.getSource().maxzoom,ee=1<<$,he=Math.floor(j.x),Ee=Math.floor((j.x-he)*ee),Ce=Math.floor(j.y*ee),Pe=this.findDEMTileFor(new Co($,he,$,Ee,Ce));return!(!Pe||!Pe.dem)}getAtPointOrZero(j,y=0){return this.getAtPoint(j,y)||0}getAtPoint(j,y,$=!0){y==null&&(y=null);const ee=this._source();if(!ee||j.y<0||j.y>1)return y;const he=ee.getSource().maxzoom,Ee=1<<he,Ce=Math.floor(j.x),Pe=j.x-Ce,$e=new Co(he,Ce,he,Math.floor(Pe*Ee),Math.floor(j.y*Ee)),De=this.findDEMTileFor($e);if(!De||!De.dem)return y;const Ve=De.dem,Ze=1<<De.tileID.canonical.z,Xe=(Pe*Ze-De.tileID.canonical.x)*Ve.dim,rt=(j.y*Ze-De.tileID.canonical.y)*Ve.dim,st=Math.floor(Xe),gt=Math.floor(rt);return($?this.exaggeration():1)*qr(qr(Ve.get(st,gt),Ve.get(st,gt+1),rt-gt),qr(Ve.get(st+1,gt),Ve.get(st+1,gt+1),rt-gt),Xe-st)}getAtTileOffset(j,y,$){const ee=1<<j.canonical.z;return this.getAtPointOrZero(new Zl(j.wrap+(j.canonical.x+y/Tr)/ee,(j.canonical.y+$/Tr)/ee))}getAtTileOffsetFunc(j,y,$,ee){return he=>{const Ee=this.getAtTileOffset(j,he.x,he.y),Ce=ee.upVector(j.canonical,he.x,he.y);return Va(Ce,Ce,Ee*ee.upVectorScale(j.canonical,y,$).metersToTile),Ce}}getForTilePoints(j,y,$,ee){const he=Wd.create(this,j,ee);return!!he&&(y.forEach(Ee=>{Ee[2]=this.exaggeration()*he.getElevationAt(Ee[0],Ee[1],$)}),!0)}getMinMaxForTile(j){const y=this.findDEMTileFor(j);if(!y||!y.dem)return null;const $=y.dem.tree,ee=y.tileID,he=1<<j.canonical.z-ee.canonical.z;let Ee=j.canonical.x/he-ee.canonical.x,Ce=j.canonical.y/he-ee.canonical.y,Pe=0;for(let $e=0;$e<j.canonical.z-ee.canonical.z&&!$.leaves[Pe];$e++){Ee*=2,Ce*=2;const De=2*Math.floor(Ce)+Math.floor(Ee);Pe=$.childOffsets[Pe]+De,Ee%=1,Ce%=1}return{min:this.exaggeration()*$.minimums[Pe],max:this.exaggeration()*$.maximums[Pe]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(j,y,$){throw new Error("Pure virtual method called.")}pointCoordinate(j){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(j){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},I.ErrorEvent=ti,I.EvaluationParameters=Tt,I.Event=oi,I.Evented=vr,I.FillExtrusionBucket=Sh,I.Frustum=cp,I.FrustumCorners=lp,I.GLOBE_METERS_TO_ECEF=Pp,I.GLOBE_RADIUS=cl,I.GLOBE_SCALE_MATCH_LATITUDE=45,I.GLOBE_ZOOM_THRESHOLD_MAX=6,I.GLOBE_ZOOM_THRESHOLD_MIN=5,I.GlobeSharedBuffers=class{constructor(j){this._createGrid(j),this._createPoles(j)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const j of this._poleSegments)j.destroy();for(const j of this._gridSegments)j.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const j of this._wireframeSegments)j.destroy()}}_createGrid(j){const y=new er,$=new Rr,ee=65;for(let he=0;he<ee;he++)for(let Ee=0;Ee<ee;Ee++)y.emplaceBack(Ee,he);this._gridSegments=[];for(let he=0,Ee=0;he<Hu.length;he++){const Ce=Hu[he];for(let $e=0;$e<Ce;$e++)for(let De=0;De<64;De++){const Ve=$e*ee+De;$.emplaceBack(Ve+1,Ve,Ve+ee),$.emplaceBack(Ve+ee,Ve+ee+1,Ve+1)}const Pe=64*Ce*2;this._gridSegments.push(Li.simpleSegment(0,Ee,(Ce+1)*ee,Pe)),Ee+=Pe}this._gridBuffer=j.createVertexBuffer(y,zh.members),this._gridIndexBuffer=j.createIndexBuffer($,!0)}_createPoles(j){const y=new Rr;for(let he=0;he<=64;he++)y.emplaceBack(0,he+1,he+2);this._poleIndexBuffer=j.createIndexBuffer(y,!0);const $=new Ki,ee=new Ki;this._poleSegments=[];for(let he=0,Ee=0;he<5;he++){const Ce=360/(1<<he);$.emplaceBack(0,-cl,0,.5,0),ee.emplaceBack(0,-cl,0,.5,1);for(let Pe=0;Pe<=64;Pe++){const $e=Pe/64,De=qr(0,Ce,$e),[Ve,Ze,Xe]=qu(Og,Rg,De,cl);$.emplaceBack(Ve,Ze,Xe,$e,0),ee.emplaceBack(Ve,Ze,Xe,$e,1)}this._poleSegments.push(Li.simpleSegment(Ee,0,66,64)),Ee+=66}this._poleNorthVertexBuffer=j.createVertexBuffer($,c_,!1),this._poleSouthVertexBuffer=j.createVertexBuffer(ee,c_,!1)}getGridBuffers(j){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[j]]}getPoleBuffers(j){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[j]]}getWirefameBuffers(j,y){if(!this._wireframeSegments){const $=new eo,ee=64,he=ee+1;this._wireframeSegments=[];for(let Ee=0,Ce=0;Ee<Hu.length;Ee++){const Pe=Hu[Ee];for(let De=0;De<Pe;De++)for(let Ve=0;Ve<ee;Ve++){const Ze=De*he+Ve;$.emplaceBack(Ze,Ze+1),$.emplaceBack(Ze,Ze+he),$.emplaceBack(Ze,Ze+he+1)}const $e=Pe*ee*3;this._wireframeSegments.push(Li.simpleSegment(0,Ce,(Pe+1)*he,$e)),Ce+=$e}this._wireframeIndexBuffer=j.createIndexBuffer($)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[y]]}},I.GlyphManager=Vu,I.ImagePosition=bp,I.LineAtlas=Lp,I.LngLat=ei,I.LngLatBounds=ja,I.LocalGlyphMode=Tp,I.MAX_MERCATOR_LATITUDE=xa,I.MercatorCoordinate=Zl,I.ONE_EM=uo,I.OverscaledTileID=Co,I.Properties=Rn,I.RGBAImage=Zo,I.Ray=sp,I.RequestManager=class{constructor(j,y,$){this._transformRequestFn=j,this._customAccessToken=y,this._silenceAuthErrors=!!$,this._createSkuToken()}_createSkuToken(){const j=function(){let y="";for(let $=0;$<10;$++)y+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Gn,y].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=j.token,this._skuTokenExpiresAt=j.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(j,y){return this._transformRequestFn&&this._transformRequestFn(j,y)||{url:j}}normalizeStyleURL(j,y){if(!gn(j))return j;const $=_r(j);return $.path=`/styles/v1${$.path}`,this._makeAPIURL($,this._customAccessToken||y)}normalizeGlyphsURL(j,y){if(!gn(j))return j;const $=_r(j);return $.path=`/fonts/v1${$.path}`,this._makeAPIURL($,this._customAccessToken||y)}normalizeSourceURL(j,y,$,ee){if(!gn(j))return j;const he=_r(j);return he.path=`/v4/${he.authority}.json`,he.params.push("secure"),$&&he.params.push(`language=${$}`),ee&&he.params.push(`worldview=${ee}`),this._makeAPIURL(he,this._customAccessToken||y)}normalizeSpriteURL(j,y,$,ee){const he=_r(j);return gn(j)?(he.path=`/styles/v1${he.path}/sprite${y}${$}`,this._makeAPIURL(he,this._customAccessToken||ee)):(he.path+=`${y}${$}`,kr(he))}normalizeTileURL(j,y,$){if(this._isSkuTokenExpired()&&this._createSkuToken(),j&&!gn(j))return j;const ee=_r(j);ee.path=ee.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${y||$&&ee.authority!=="raster"&&$===512?"@2x":""}${wn.supported?".webp":"$1"}`),ee.authority==="raster"?ee.path=`/${vn.RASTER_URL_PREFIX}${ee.path}`:(ee.path=ee.path.replace(/^.+\/v4\//,"/"),ee.path=`/${vn.TILE_URL_VERSION}${ee.path}`);const he=this._customAccessToken||function(Ee){for(const Ce of Ee){const Pe=Ce.match(/^access_token=(.*)$/);if(Pe)return Pe[1]}return null}(ee.params)||vn.ACCESS_TOKEN;return vn.REQUIRE_ACCESS_TOKEN&&he&&this._skuToken&&ee.params.push(`sku=${this._skuToken}`),this._makeAPIURL(ee,he)}canonicalizeTileURL(j,y){const $=_r(j);if(!$.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!$.path.match(/\.[\w]+$/))return j;let ee="mapbox://";$.path.match(/^\/raster\/v1\//)?ee+=`raster/${$.path.replace(`/${vn.RASTER_URL_PREFIX}/`,"")}`:ee+=`tiles/${$.path.replace(`/${vn.TILE_URL_VERSION}/`,"")}`;let he=$.params;return y&&(he=he.filter(Ee=>!Ee.match(/^access_token=/))),he.length&&(ee+=`?${he.join("&")}`),ee}canonicalizeTileset(j,y){const $=!!y&&gn(y),ee=[];for(const he of j.tiles||[])On(he)?ee.push(this.canonicalizeTileURL(he,$)):ee.push(he);return ee}_makeAPIURL(j,y){const $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ee=_r(vn.API_URL);if(j.protocol=ee.protocol,j.authority=ee.authority,j.protocol==="http"){const he=j.params.indexOf("secure");he>=0&&j.params.splice(he,1)}if(ee.path!=="/"&&(j.path=`${ee.path}${j.path}`),!vn.REQUIRE_ACCESS_TOKEN)return kr(j);if(y=y||vn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!y)throw new Error(`An API access token is required to use Mapbox GL. ${$}`);if(y[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${$}`)}return j.params=j.params.filter(he=>he.indexOf("access_token")===-1),j.params.push(`access_token=${y||""}`),kr(j)}},I.ResourceType=tn,I.SegmentVector=Li,I.SourceCache=Zc,I.StencilMode=Np,I.StructArrayLayout1ui2=mo,I.StructArrayLayout2f1f2i16=ia,I.StructArrayLayout2i4=er,I.StructArrayLayout2ui4=eo,I.StructArrayLayout3f12=yi,I.StructArrayLayout3ui6=Rr,I.StructArrayLayout4i8=gr,I.StructArrayLayout5f20=Ki,I.Texture=Vh,I.Tile=Bp,I.Transitionable=zt,I.Uniform1f=Mu,I.Uniform1i=class extends Fa{constructor(j){super(j),this.current=0}set(j,y,$){this.fetchUniformLocation(j,y)&&this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))}},I.Uniform2f=class extends Fa{constructor(j){super(j),this.current=[0,0]}set(j,y,$){this.fetchUniformLocation(j,y)&&($[0]===this.current[0]&&$[1]===this.current[1]||(this.current=$,this.gl.uniform2f(this.location,$[0],$[1])))}},I.Uniform3f=class extends Fa{constructor(j){super(j),this.current=[0,0,0]}set(j,y,$){this.fetchUniformLocation(j,y)&&($[0]===this.current[0]&&$[1]===this.current[1]&&$[2]===this.current[2]||(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2])))}},I.Uniform4f=id,I.UniformColor=od,I.UniformMatrix2f=class extends Fa{constructor(j){super(j),this.current=Yd}set(j,y,$){if(this.fetchUniformLocation(j,y)){for(let ee=0;ee<4;ee++)if($[ee]!==this.current[ee]){this.current=$,this.gl.uniformMatrix2fv(this.location,!1,$);break}}}},I.UniformMatrix3f=class extends Fa{constructor(j){super(j),this.current=Kd}set(j,y,$){if(this.fetchUniformLocation(j,y)){for(let ee=0;ee<9;ee++)if($[ee]!==this.current[ee]){this.current=$,this.gl.uniformMatrix3fv(this.location,!1,$);break}}}},I.UniformMatrix4f=class extends Fa{constructor(j){super(j),this.current=ad}set(j,y,$){if(this.fetchUniformLocation(j,y)){if($[12]!==this.current[12]||$[0]!==this.current[0])return this.current=$,void this.gl.uniformMatrix4fv(this.location,!1,$);for(let ee=1;ee<16;ee++)if($[ee]!==this.current[ee]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}}}},I.UnwrappedTileID=If,I.ValidationError=lr,I.VectorTileWorkerSource=class extends vr{constructor(j,y,$,ee,he){super(),this.actor=j,this.layerIndex=y,this.availableImages=$,this.loadVectorData=he||G_,this.loading={},this.loaded={},this.deduped=new V_(j.scheduler),this.isSpriteLoaded=ee,this.scheduler=j.scheduler}loadTile(j,y){const $=j.uid,ee=j&&j.request,he=ee&&ee.collectResourceTiming,Ee=this.loading[$]=new r0(j);Ee.abort=this.loadVectorData(j,(Ce,Pe)=>{const $e=!this.loading[$];if(delete this.loading[$],$e||Ce||!Pe)return Ee.status="done",$e||(this.loaded[$]=Ee),y(Ce);const De=Pe.rawData,Ve={};Pe.expires&&(Ve.expires=Pe.expires),Pe.cacheControl&&(Ve.cacheControl=Pe.cacheControl),Ee.vectorTile=Pe.vectorTile||new qc.VectorTile(new Oh(De));const Ze=()=>{Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor,(Xe,rt)=>{if(Xe||!rt)return y(Xe);const st={};if(he){const gt=In(ee);gt.length>0&&(st.resourceTiming=JSON.parse(JSON.stringify(gt)))}y(null,ft({rawTileData:De.slice(0)},rt,Ve,st))})};this.isSpriteLoaded?Ze():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ze,{type:"parseTile",isSymbolTile:j.isSymbolTile,zoom:j.tileZoom}):Ze()}),this.loaded=this.loaded||{},this.loaded[$]=Ee})}reloadTile(j,y){const $=this.loaded,ee=j.uid,he=this;if($&&$[ee]){const Ee=$[ee];Ee.showCollisionBoxes=j.showCollisionBoxes,Ee.enableTerrain=!!j.enableTerrain,Ee.projection=j.projection,Ee.tileTransform=Wc(j.tileID.canonical,j.projection);const Ce=(Pe,$e)=>{const De=Ee.reloadCallback;De&&(delete Ee.reloadCallback,Ee.parse(Ee.vectorTile,he.layerIndex,this.availableImages,he.actor,De)),y(Pe,$e)};Ee.status==="parsing"?Ee.reloadCallback=Ce:Ee.status==="done"&&(Ee.vectorTile?Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor,Ce):Ce())}}abortTile(j,y){const $=j.uid,ee=this.loading[$];ee&&(ee.abort&&ee.abort(),delete this.loading[$]),y()}removeTile(j,y){const $=this.loaded,ee=j.uid;$&&$[ee]&&delete $[ee],y()}},I.WritingMode=aa,I.ZoomHistory=Mc,I.add=Xl,I.addDynamicAttributes=Vd,I.adjoint=function(j,y){var $=y[0],ee=y[1],he=y[2],Ee=y[3],Ce=y[4],Pe=y[5],$e=y[6],De=y[7],Ve=y[8];return j[0]=Ce*Ve-Pe*De,j[1]=he*De-ee*Ve,j[2]=ee*Pe-he*Ce,j[3]=Pe*$e-Ee*Ve,j[4]=$*Ve-he*$e,j[5]=he*Ee-$*Pe,j[6]=Ee*De-Ce*$e,j[7]=ee*$e-$*De,j[8]=$*Ce-ee*Ee,j},I.asyncAll=ot,I.bezier=Le,I.bindAll=it,I.boundsAttributes=S_,I.bufferConvexPolygon=function(j,y){const $=[];for(let ee=0;ee<j.length;ee++){const he=Ke(ee-1,-1,j.length-1),Ee=Ke(ee+1,-1,j.length-1),Ce=j[ee],Pe=j[Ee],$e=j[he].sub(Ce).unit(),De=Pe.sub(Ce).unit(),Ve=De.angleWithSep($e.x,$e.y),Ze=$e.add(De).unit().mult(-1*y/Math.sin(Ve/2));$.push(Ce.add(Ze))}return $},I.cacheEntryPossiblyAdded=function(j){Ut++,Ut>Ea&&(j.getActor().send("enforceCacheSizeLimit",Fo),Ut=0)},I.calculateGlobeLabelMatrix=function(j,y){const{x:$,y:ee}=j.point,he=__($,ee,j.worldSize/j._pixelsPerMercatorPixel,0,0);return zu(he,he,Op(ys(y)))},I.calculateGlobeMatrix=function(j){const{x:y,y:$}=j.point,{lng:ee,lat:he}=j._center;return __(y,$,j.worldSize,ee,he)},I.calculateGlobeMercatorMatrix=function(j){const y=j.pixelsPerMeter,$=y/Do(1,j.center.lat),ee=ms(new Float64Array(16));return vh(ee,ee,[j.point.x,j.point.y,0]),Vc(ee,ee,[$,$,y]),Float32Array.from(ee)},I.circumferenceAtLatitude=mh,I.clamp=qe,I.clearTileCache=function(j){const y=Lt(),$=[];for(const ee in vi)y&&$.push(y.delete(ee)),delete vi[ee];j&&Promise.all($).catch(j).then(()=>j())},I.clipLine=t_,I.clone=function(j){var y=new Wo(16);return y[0]=j[0],y[1]=j[1],y[2]=j[2],y[3]=j[3],y[4]=j[4],y[5]=j[5],y[6]=j[6],y[7]=j[7],y[8]=j[8],y[9]=j[9],y[10]=j[10],y[11]=j[11],y[12]=j[12],y[13]=j[13],y[14]=j[14],y[15]=j[15],y},I.clone$1=Nt,I.collisionCircleLayout=Ym,I.config=vn,I.conjugate=function(j,y){return j[0]=-y[0],j[1]=-y[1],j[2]=-y[2],j[3]=y[3],j},I.create=function(){var j=new Wo(16);return Wo!=Float32Array&&(j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[11]=0,j[12]=0,j[13]=0,j[14]=0),j[0]=1,j[5]=1,j[10]=1,j[15]=1,j},I.create$1=Kp,I.createExpression=ns,I.createLayout=Dn,I.createStyleLayer=function(j){return j.type==="custom"?new Zg(j):new Kg[j.type](j)},I.cross=ap,I.degToRad=Se,I.distance=function(j,y){return Math.hypot(y[0]-j[0],y[1]-j[1],y[2]-j[2])},I.div=function(j,y,$){return j[0]=y[0]/$[0],j[1]=y[1]/$[1],j[2]=y[2]/$[2],j},I.dot=ba,I.ease=We,I.easeCubicInOut=ze,I.emitValidationErrors=Ic,I.endsWith=pt,I.enforceCacheSizeLimit=function(j){for(const y in vi)ct(y),vi[y].then($=>{$.keys().then(ee=>{for(let he=0;he<ee.length-j;he++)$.delete(ee[he])})})},I.evaluateSizeForFeature=Pd,I.evaluateSizeForZoom=Fu,I.evaluateVariableOffset=a_,I.evented=dt,I.exactEquals=function(j,y){return j[0]===y[0]&&j[1]===y[1]&&j[2]===y[2]&&j[3]===y[3]},I.exactEquals$1=function(j,y){return j[0]===y[0]&&j[1]===y[1]&&j[2]===y[2]},I.exported=$n,I.exported$1=wn,I.extend=ft,I.extend$1=po,I.fillExtrusionHeightLift=Cf,I.filterObject=ut,I.fromMat4=function(j,y){return j[0]=y[0],j[1]=y[1],j[2]=y[2],j[3]=y[4],j[4]=y[5],j[5]=y[6],j[6]=y[8],j[7]=y[9],j[8]=y[10],j},I.fromQuat=function(j,y){var $=y[0],ee=y[1],he=y[2],Ee=y[3],Ce=$+$,Pe=ee+ee,$e=he+he,De=$*Ce,Ve=ee*Ce,Ze=ee*Pe,Xe=he*Ce,rt=he*Pe,st=he*$e,gt=Ee*Ce,At=Ee*Pe,Bt=Ee*$e;return j[0]=1-Ze-st,j[1]=Ve+Bt,j[2]=Xe-At,j[3]=0,j[4]=Ve-Bt,j[5]=1-De-st,j[6]=rt+gt,j[7]=0,j[8]=Xe+At,j[9]=rt-gt,j[10]=1-De-Ze,j[11]=0,j[12]=0,j[13]=0,j[14]=0,j[15]=1,j},I.fromRotation=function(j,y){var $=Math.sin(y),ee=Math.cos(y);return j[0]=ee,j[1]=$,j[2]=0,j[3]=-$,j[4]=ee,j[5]=0,j[6]=0,j[7]=0,j[8]=1,j},I.fromScaling=Yp,I.furthestTileCorner=function(j){const y=Math.round((j+45+360)%360/90)%4;return Fe[y]},I.getAABBPointSquareDist=function(j,y,$){let ee=0;for(let he=0;he<2;++he){const Ee=$?$[he]:0;j[he]>Ee&&(ee+=(j[he]-Ee)*(j[he]-Ee)),y[he]<Ee&&(ee+=(Ee-y[he])*(Ee-y[he]))}return ee},I.getAnchorAlignment=Ap,I.getAnchorJustification=Cp,I.getBounds=function(j){let y=1/0,$=1/0,ee=-1/0,he=-1/0;for(const Ee of j)y=Math.min(y,Ee.x),$=Math.min($,Ee.y),ee=Math.max(ee,Ee.x),he=Math.max(he,Ee.y);return{min:new ye(y,$),max:new ye(ee,he)}},I.getColumn=un,I.getGridMatrix=function(j,y,$){const ee=y.getNorth(),he=y.getSouth(),Ee=y.getWest(),Ce=.015625;return[0,(y.getEast()-Ee)*Ce,1<<j.z,(he-ee)/Hu[$],0,j.y,ee,Ee,Ce]},I.getImage=Er,I.getJSON=function(j,y){return rn(ft(j,{type:"json"}),y)},I.getLatitudinalLod=function(j){const y=80.051129;j=qe(j,-80.051129,y)/y*90;const $=Math.pow(Math.abs(Math.sin(Se(j))),3);return Math.round($*(Hu.length-1))},I.getMapSessionAPI=Di,I.getPerformanceMeasurement=In,I.getProjection=E_,I.getRTLTextPluginStatus=xt,I.getReferrer=hn,I.getTilePoint=function(j,{x:y,y:$},ee=0){return new ye(((y-ee)*j.scale-j.x)*Tr,($*j.scale-j.y)*Tr)},I.getTileVec3=function(j,y,$=0){return Du(((y.x-$)*j.scale-j.x)*Tr,(y.y*j.scale-j.y)*Tr,ud(y.z,y.y))},I.getVideo=function(j,y){const $=_e.document.createElement("video");$.muted=!0,$.onloadstart=function(){y(null,$)};for(let ee=0;ee<j.length;ee++){const he=_e.document.createElement("source");Hn(j[ee])||($.crossOrigin="Anonymous"),he.src=j[ee],$.appendChild(he)}return{cancel:()=>{}}},I.globeCenterToScreenPoint=function(j){const y=[0,0,0],$=ms(new Float64Array(16));return zu($,j.pixelMatrix,j.globeMatrix),Wi(y,y,$),new ye(y[0],y[1])},I.globeDenormalizeECEF=Op,I.globeECEFOrigin=function(j,y){const $=[0,0,0];return Wi($,$,Lh(ys(y.canonical))),Wi($,$,j),$},I.globeNormalizeECEF=Lh,I.globePixelsToTileUnits=function(j,y){return Tr/(512*Math.pow(2,j))*Bd(ys(y))},I.globePoleMatrixForTile=function(j,y,$){const ee=ms(new Float64Array(16)),he=(y/(1<<j)-.5)*Math.PI*2;return gd(ee,$.globeMatrix,he),Float32Array.from(ee)},I.globeTileBounds=ys,I.globeTiltAtLngLat=m_,I.globeToMercatorTransition=Bh,I.globeUseCustomAntiAliasing=function(j,y,$){const ee=Bh($.zoom),he=j.style.map._antialias,Ee=!!y.extStandardDerivatives,Ce=y.extStandardDerivativesForceOff||j.terrain&&j.terrain.exaggeration()>0;return ee===0&&!he&&!Ce&&Ee},I.identity=ms,I.identity$1=of,I.invert=ep,I.isFullscreen=function(){return!!_e.document.fullscreenElement||!!_e.document.webkitFullscreenElement},I.isLngLatBehindGlobe=function(j,y){return m_(j,y)>Math.PI/2*1.01},I.isMapAuthenticated=function(j){return Ai.has(j)},I.isMapboxURL=gn,I.isSafariWithAntialiasingBug=function(j){const y=j.navigator?j.navigator.userAgent:null;return!!Rt(j)&&y&&(y.match("Version/15.4")||y.match("Version/15.5")||y.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},I.latFromMercatorY=Yi,I.len=rm,I.length=xh,I.length$1=function(j){return Math.hypot(j[0],j[1],j[2],j[3])},I.loadVectorTile=G_,I.makeRequest=rn,I.mapValue=function(j,y,$,ee,he){return qe((j-y)/($-y)*(he-ee)+ee,ee,he)},I.mercatorScale=hd,I.mercatorXfromLng=va,I.mercatorYfromLat=Ua,I.mercatorZfromAltitude=Do,I.mul=tm,I.mul$1=nm,I.multiply=zu,I.multiply$1=function(j,y,$){var ee=y[0],he=y[1],Ee=y[2],Ce=y[3],Pe=y[4],$e=y[5],De=y[6],Ve=y[7],Ze=y[8],Xe=$[0],rt=$[1],st=$[2],gt=$[3],At=$[4],Bt=$[5],qt=$[6],Ft=$[7],Ht=$[8];return j[0]=Xe*ee+rt*Ce+st*De,j[1]=Xe*he+rt*Pe+st*Ve,j[2]=Xe*Ee+rt*$e+st*Ze,j[3]=gt*ee+At*Ce+Bt*De,j[4]=gt*he+At*Pe+Bt*Ve,j[5]=gt*Ee+At*$e+Bt*Ze,j[6]=qt*ee+Ft*Ce+Ht*De,j[7]=qt*he+Ft*Pe+Ht*Ve,j[8]=qt*Ee+Ft*$e+Ht*Ze,j},I.multiply$2=ef,I.nextPowerOfTwo=tt,I.normalize=ko,I.normalize$1=function(j,y){var $=y[0],ee=y[1],he=y[2],Ee=y[3],Ce=$*$+ee*ee+he*he+Ee*Ee;return Ce>0&&(Ce=1/Math.sqrt(Ce)),j[0]=$*Ce,j[1]=ee*Ce,j[2]=he*Ce,j[3]=Ee*Ce,j},I.number=qr,I.ortho=function(j,y,$,ee,he,Ee,Ce){var Pe=1/(y-$),$e=1/(ee-he),De=1/(Ee-Ce);return j[0]=-2*Pe,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=-2*$e,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=2*De,j[11]=0,j[12]=(y+$)*Pe,j[13]=(he+ee)*$e,j[14]=(Ce+Ee)*De,j[15]=1,j},I.pbf=Oh,I.perspective=function(j,y,$,ee,he){var Ee,Ce=1/Math.tan(y/2);return j[0]=Ce/$,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=Ce,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[11]=-1,j[12]=0,j[13]=0,j[15]=0,he!=null&&he!==1/0?(j[10]=(he+ee)*(Ee=1/(ee-he)),j[14]=2*he*ee*Ee):(j[10]=-1,j[14]=-2*ee),j},I.pick=function(j,y){const $={};for(let ee=0;ee<y.length;ee++){const he=y[ee];he in j&&($[he]=j[he])}return $},I.plugin=kt,I.pointGeometry=ye,I.polygonContainsPoint=si,I.polygonIntersectsBox=wi,I.polygonIntersectsPolygon=ln,I.polygonizeBounds=function(j,y,$=0,ee=!0){const he=new ye($,$),Ee=j.sub(he),Ce=y.add(he),Pe=[Ee,new ye(Ce.x,Ee.y),Ce,new ye(Ee.x,Ce.y)];return ee&&Pe.push(Ee.clone()),Pe},I.posAttributes=zh,I.postMapLoadEvent=jr,I.postTurnstileEvent=Br,I.potpack=xp,I.prevPowerOfTwo=function(j){return j<=1?1:Math.pow(2,Math.floor(Math.log(j)/Math.LN2))},I.radToDeg=Oe,I.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],I.registerForPluginStateChange=function(j){return j({pluginStatus:Ue,pluginURL:He}),dt.on("pluginStateChange",j),j},I.removeAuthState=function(j){Ai.delete(j)},I.renderColorRamp=hp,I.resample=dd,I.rotateX=tp,I.rotateX$1=af,I.rotateY=gd,I.rotateY$1=sf,I.rotateZ=function(j,y,$){var ee=Math.sin($),he=Math.cos($),Ee=y[0],Ce=y[1],Pe=y[2],$e=y[3],De=y[4],Ve=y[5],Ze=y[6],Xe=y[7];return y!==j&&(j[8]=y[8],j[9]=y[9],j[10]=y[10],j[11]=y[11],j[12]=y[12],j[13]=y[13],j[14]=y[14],j[15]=y[15]),j[0]=Ee*he+De*ee,j[1]=Ce*he+Ve*ee,j[2]=Pe*he+Ze*ee,j[3]=$e*he+Xe*ee,j[4]=De*he-Ee*ee,j[5]=Ve*he-Ce*ee,j[6]=Ze*he-Pe*ee,j[7]=Xe*he-$e*ee,j},I.rotateZ$1=function(j,y,$){$*=.5;var ee=y[0],he=y[1],Ee=y[2],Ce=y[3],Pe=Math.sin($),$e=Math.cos($);return j[0]=ee*$e+he*Pe,j[1]=he*$e-ee*Pe,j[2]=Ee*$e+Ce*Pe,j[3]=Ce*$e-Ee*Pe,j},I.scale=Vc,I.scale$1=nf,I.scale$2=Va,I.scaleAndAdd=yd,I.setCacheLimits=function(j,y){Fo=j,Ea=y},I.setColumn=function(j,y,$){j[4*y+0]=$[0],j[4*y+1]=$[1],j[4*y+2]=$[2],j[4*y+3]=$[3]},I.setRTLTextPlugin=function(j,y,$=!1){if(Ue===Te||Ue===Ie||Ue===Re)throw new Error("setRTLTextPlugin cannot be called multiple times.");He=$n.resolveURL(j),Ue=Te,Be=y,et(),$||Pt()},I.smoothstep=Ne,I.spec=mn,I.storeAuthState=function(j,y){y?Ai.add(j):Ai.delete(j)},I.sub=Ga,I.subtract=rp,I.symbolSize=Jm,I.tileAABB=function(j,y,$,ee,he,Ee,Ce,Pe,$e){if($e.name==="globe")return Mg(j,y,new kd($,ee,he));const De=Wc({z:$,x:ee,y:he},$e);return new Lo([(Ee+De.x/De.scale)*y,y*(De.y/De.scale),Ce],[(Ee+De.x2/De.scale)*y,y*(De.y2/De.scale),Pe])},I.tileCornersToBounds=Dd,I.tileTransform=Wc,I.transformMat3=function(j,y,$){var ee=y[0],he=y[1],Ee=y[2];return j[0]=ee*$[0]+he*$[3]+Ee*$[6],j[1]=ee*$[1]+he*$[4]+Ee*$[7],j[2]=ee*$[2]+he*$[5]+Ee*$[8],j},I.transformMat4=Wi,I.transformMat4$1=Gc,I.transformQuat=tf,I.transitionTileAABBinECEF=d_,I.translate=vh,I.transpose=function(j,y){if(j===y){var $=y[1],ee=y[2],he=y[5];j[1]=y[3],j[2]=y[6],j[3]=$,j[5]=y[7],j[6]=ee,j[7]=he}else j[0]=y[0],j[1]=y[3],j[2]=y[6],j[3]=y[1],j[4]=y[4],j[5]=y[7],j[6]=y[2],j[7]=y[5],j[8]=y[8];return j},I.triggerPluginCompletionEvent=Ye,I.uniqueId=Je,I.updateGlobeVertexNormal=function(j,y,$,ee,he){const Ee=5*y+2;j.float32[Ee+0]=$,j.float32[Ee+1]=ee,j.float32[Ee+2]=he},I.validateCustomStyleLayer=function(j){const y=[],$=j.id;return $===void 0&&y.push({message:`layers.${$}: missing required property "id"`}),j.render===void 0&&y.push({message:`layers.${$}: missing required method "render"`}),j.renderingMode&&j.renderingMode!=="2d"&&j.renderingMode!=="3d"&&y.push({message:`layers.${$}: property "renderingMode" must be either "2d" or "3d"`}),y},I.validateFilter=j=>bo(Oa(j)),I.validateFog=j=>bo(wu(j)),I.validateLayer=j=>bo(zl(j)),I.validateLight=j=>bo(bu(j)),I.validateSource=j=>bo(xu(j)),I.validateStyle=Ll,I.validateTerrain=j=>bo(ss(j)),I.values=yt,I.vectorTile=qc,I.version=It,I.warnOnce=Mt,I.window=_e,I.wrap=Ke}),Q(["./shared"],function(I){function _e(Lt){if(typeof Lt=="number"||typeof Lt=="boolean"||typeof Lt=="string"||Lt==null)return JSON.stringify(Lt);if(Array.isArray(Lt)){let mt="[";for(const Dt of Lt)mt+=`${_e(Dt)},`;return`${mt}]`}let ct="{";for(const mt of Object.keys(Lt).sort())ct+=`${mt}:${_e(Lt[mt])},`;return`${ct}}`}function ne(Lt){let ct="";for(const mt of I.refProperties)ct+=`/${_e(Lt[mt])}`;return ct}class ge{constructor(ct){this.keyCache={},ct&&this.replace(ct)}replace(ct){this._layerConfigs={},this._layers={},this.update(ct,[])}update(ct,mt){for(const Ut of ct)this._layerConfigs[Ut.id]=Ut,(this._layers[Ut.id]=I.createStyleLayer(Ut)).compileFilter(),this.keyCache[Ut.id]&&delete this.keyCache[Ut.id];for(const Ut of mt)delete this.keyCache[Ut],delete this._layerConfigs[Ut],delete this._layers[Ut];this.familiesBySource={};const Dt=function(Ut,tn){const pn={};for(let rn=0;rn<Ut.length;rn++){const fn=tn&&tn[Ut[rn].id]||ne(Ut[rn]);tn&&(tn[Ut[rn].id]=fn);let Nn=pn[fn];Nn||(Nn=pn[fn]=[]),Nn.push(Ut[rn])}const hn=[];for(const rn in pn)hn.push(pn[rn]);return hn}(I.values(this._layerConfigs),this.keyCache);for(const Ut of Dt){const tn=Ut.map(ar=>this._layers[ar.id]),pn=tn[0];if(pn.visibility==="none")continue;const hn=pn.source||"";let rn=this.familiesBySource[hn];rn||(rn=this.familiesBySource[hn]={});const fn=pn.sourceLayer||"_geojsonTileLayer";let Nn=rn[fn];Nn||(Nn=rn[fn]=[]),Nn.push(tn)}}}class ye{loadTile(ct,mt){const{uid:Dt,encoding:Ut,rawImageData:tn,padding:pn,buildQuadTree:hn}=ct,rn=I.window.ImageBitmap&&tn instanceof I.window.ImageBitmap?this.getImageData(tn,pn):tn;mt(null,new I.DEMData(Dt,rn,Ut,pn<1,hn))}getImageData(ct,mt){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ct.width,ct.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ct.width,this.offscreenCanvas.height=ct.height,this.offscreenCanvasContext.drawImage(ct,0,0,ct.width,ct.height);const Dt=this.offscreenCanvasContext.getImageData(-mt,-mt,ct.width+2*mt,ct.height+2*mt);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Dt}}var xe=function Lt(ct,mt){var Dt,Ut=ct&&ct.type;if(Ut==="FeatureCollection")for(Dt=0;Dt<ct.features.length;Dt++)Lt(ct.features[Dt],mt);else if(Ut==="GeometryCollection")for(Dt=0;Dt<ct.geometries.length;Dt++)Lt(ct.geometries[Dt],mt);else if(Ut==="Feature")Lt(ct.geometry,mt);else if(Ut==="Polygon")we(ct.coordinates,mt);else if(Ut==="MultiPolygon")for(Dt=0;Dt<ct.coordinates.length;Dt++)we(ct.coordinates[Dt],mt);return ct};function we(Lt,ct){if(Lt.length!==0){ke(Lt[0],ct);for(var mt=1;mt<Lt.length;mt++)ke(Lt[mt],!ct)}}function ke(Lt,ct){for(var mt=0,Dt=0,Ut=0,tn=Lt.length,pn=tn-1;Ut<tn;pn=Ut++){var hn=(Lt[Ut][0]-Lt[pn][0])*(Lt[pn][1]+Lt[Ut][1]),rn=mt+hn;Dt+=Math.abs(mt)>=Math.abs(hn)?mt-rn+hn:hn-rn+mt,mt=rn}mt+Dt>=0!=!!ct&&Lt.reverse()}const Se=I.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Oe{constructor(ct){this._feature=ct,this.extent=I.EXTENT,this.type=ct.type,this.properties=ct.tags,"id"in ct&&!isNaN(ct.id)&&(this.id=parseInt(ct.id,10))}loadGeometry(){if(this._feature.type===1){const ct=[];for(const mt of this._feature.geometry)ct.push([new I.pointGeometry(mt[0],mt[1])]);return ct}{const ct=[];for(const mt of this._feature.geometry){const Dt=[];for(const Ut of mt)Dt.push(new I.pointGeometry(Ut[0],Ut[1]));ct.push(Dt)}return ct}}toGeoJSON(ct,mt,Dt){return Se.call(this,ct,mt,Dt)}}class Fe{constructor(ct){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=I.EXTENT,this.length=ct.length,this._features=ct}feature(ct){return new Oe(this._features[ct])}}var ze=I.vectorTile.VectorTileFeature,Le=We;function We(Lt,ct){this.options=ct||{},this.features=Lt,this.length=Lt.length}function qe(Lt,ct){this.id=typeof Lt.id=="number"?Lt.id:void 0,this.type=Lt.type,this.rawGeometry=Lt.type===1?[Lt.geometry]:Lt.geometry,this.properties=Lt.tags,this.extent=ct||4096}We.prototype.feature=function(Lt){return new qe(this.features[Lt],this.options.extent)},qe.prototype.loadGeometry=function(){var Lt=this.rawGeometry;this.geometry=[];for(var ct=0;ct<Lt.length;ct++){for(var mt=Lt[ct],Dt=[],Ut=0;Ut<mt.length;Ut++)Dt.push(new I.pointGeometry(mt[Ut][0],mt[Ut][1]));this.geometry.push(Dt)}return this.geometry},qe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Lt=this.geometry,ct=1/0,mt=-1/0,Dt=1/0,Ut=-1/0,tn=0;tn<Lt.length;tn++)for(var pn=Lt[tn],hn=0;hn<pn.length;hn++){var rn=pn[hn];ct=Math.min(ct,rn.x),mt=Math.max(mt,rn.x),Dt=Math.min(Dt,rn.y),Ut=Math.max(Ut,rn.y)}return[ct,Dt,mt,Ut]},qe.prototype.toGeoJSON=ze.prototype.toGeoJSON;var Ne=ot,Ke=Le;function ot(Lt){var ct=new I.pbf;return function(mt,Dt){for(var Ut in mt.layers)Dt.writeMessage(3,yt,mt.layers[Ut])}(Lt,ct),ct.finish()}function yt(Lt,ct){var mt;ct.writeVarintField(15,Lt.version||1),ct.writeStringField(1,Lt.name||""),ct.writeVarintField(5,Lt.extent||4096);var Dt={keys:[],values:[],keycache:{},valuecache:{}};for(mt=0;mt<Lt.length;mt++)Dt.feature=Lt.feature(mt),ct.writeMessage(2,ft,Dt);var Ut=Dt.keys;for(mt=0;mt<Ut.length;mt++)ct.writeStringField(3,Ut[mt]);var tn=Dt.values;for(mt=0;mt<tn.length;mt++)ct.writeMessage(4,ht,tn[mt])}function ft(Lt,ct){var mt=Lt.feature;mt.id!==void 0&&ct.writeVarintField(1,mt.id),ct.writeMessage(2,_t,Lt),ct.writeVarintField(3,mt.type),ct.writeMessage(4,tt,mt)}function _t(Lt,ct){var mt=Lt.feature,Dt=Lt.keys,Ut=Lt.values,tn=Lt.keycache,pn=Lt.valuecache;for(var hn in mt.properties){var rn=mt.properties[hn],fn=tn[hn];if(rn!==null){fn===void 0&&(Dt.push(hn),tn[hn]=fn=Dt.length-1),ct.writeVarint(fn);var Nn=typeof rn;Nn!=="string"&&Nn!=="boolean"&&Nn!=="number"&&(rn=JSON.stringify(rn));var ar=Nn+":"+rn,Hn=pn[ar];Hn===void 0&&(Ut.push(rn),pn[ar]=Hn=Ut.length-1),ct.writeVarint(Hn)}}}function Je(Lt,ct){return(ct<<3)+(7&Lt)}function Qe(Lt){return Lt<<1^Lt>>31}function tt(Lt,ct){for(var mt=Lt.loadGeometry(),Dt=Lt.type,Ut=0,tn=0,pn=mt.length,hn=0;hn<pn;hn++){var rn=mt[hn],fn=1;Dt===1&&(fn=rn.length),ct.writeVarint(Je(1,fn));for(var Nn=Dt===3?rn.length-1:rn.length,ar=0;ar<Nn;ar++){ar===1&&Dt!==1&&ct.writeVarint(Je(2,Nn-1));var Hn=rn[ar].x-Ut,br=rn[ar].y-tn;ct.writeVarint(Qe(Hn)),ct.writeVarint(Qe(br)),Ut+=Hn,tn+=br}Dt===3&&ct.writeVarint(Je(7,1))}}function ht(Lt,ct){var mt=typeof Lt;mt==="string"?ct.writeStringField(1,Lt):mt==="boolean"?ct.writeBooleanField(7,Lt):mt==="number"&&(Lt%1!=0?ct.writeDoubleField(3,Lt):Lt<0?ct.writeSVarintField(6,Lt):ct.writeVarintField(5,Lt))}function it(Lt,ct,mt,Dt,Ut,tn){if(Ut-Dt<=mt)return;const pn=Dt+Ut>>1;pt(Lt,ct,pn,Dt,Ut,tn%2),it(Lt,ct,mt,Dt,pn-1,tn+1),it(Lt,ct,mt,pn+1,Ut,tn+1)}function pt(Lt,ct,mt,Dt,Ut,tn){for(;Ut>Dt;){if(Ut-Dt>600){const fn=Ut-Dt+1,Nn=mt-Dt+1,ar=Math.log(fn),Hn=.5*Math.exp(2*ar/3),br=.5*Math.sqrt(ar*Hn*(fn-Hn)/fn)*(Nn-fn/2<0?-1:1);pt(Lt,ct,mt,Math.max(Dt,Math.floor(mt-Nn*Hn/fn+br)),Math.min(Ut,Math.floor(mt+(fn-Nn)*Hn/fn+br)),tn)}const pn=ct[2*mt+tn];let hn=Dt,rn=Ut;for(vt(Lt,ct,Dt,mt),ct[2*Ut+tn]>pn&&vt(Lt,ct,Dt,Ut);hn<rn;){for(vt(Lt,ct,hn,rn),hn++,rn--;ct[2*hn+tn]<pn;)hn++;for(;ct[2*rn+tn]>pn;)rn--}ct[2*Dt+tn]===pn?vt(Lt,ct,Dt,rn):(rn++,vt(Lt,ct,rn,Ut)),rn<=mt&&(Dt=rn+1),mt<=rn&&(Ut=rn-1)}}function vt(Lt,ct,mt,Dt){ut(Lt,mt,Dt),ut(ct,2*mt,2*Dt),ut(ct,2*mt+1,2*Dt+1)}function ut(Lt,ct,mt){const Dt=Lt[ct];Lt[ct]=Lt[mt],Lt[mt]=Dt}function Nt(Lt,ct,mt,Dt){const Ut=Lt-mt,tn=ct-Dt;return Ut*Ut+tn*tn}Ne.fromVectorTileJs=ot,Ne.fromGeojsonVt=function(Lt,ct){ct=ct||{};var mt={};for(var Dt in Lt)mt[Dt]=new Le(Lt[Dt].features,ct),mt[Dt].name=Dt,mt[Dt].version=ct.version,mt[Dt].extent=ct.extent;return ot({layers:mt})},Ne.GeoJSONWrapper=Ke;const at=Lt=>Lt[0],Mt=Lt=>Lt[1];class nn{constructor(ct,mt=at,Dt=Mt,Ut=64,tn=Float64Array){this.nodeSize=Ut,this.points=ct;const pn=ct.length<65536?Uint16Array:Uint32Array,hn=this.ids=new pn(ct.length),rn=this.coords=new tn(2*ct.length);for(let fn=0;fn<ct.length;fn++)hn[fn]=fn,rn[2*fn]=mt(ct[fn]),rn[2*fn+1]=Dt(ct[fn]);it(hn,rn,Ut,0,hn.length-1,0)}range(ct,mt,Dt,Ut){return function(tn,pn,hn,rn,fn,Nn,ar){const Hn=[0,tn.length-1,0],br=[];let wr,mr;for(;Hn.length;){const Er=Hn.pop(),zr=Hn.pop(),Qr=Hn.pop();if(zr-Qr<=ar){for(let vr=Qr;vr<=zr;vr++)wr=pn[2*vr],mr=pn[2*vr+1],wr>=hn&&wr<=fn&&mr>=rn&&mr<=Nn&&br.push(tn[vr]);continue}const oi=Math.floor((Qr+zr)/2);wr=pn[2*oi],mr=pn[2*oi+1],wr>=hn&&wr<=fn&&mr>=rn&&mr<=Nn&&br.push(tn[oi]);const ti=(Er+1)%2;(Er===0?hn<=wr:rn<=mr)&&(Hn.push(Qr),Hn.push(oi-1),Hn.push(ti)),(Er===0?fn>=wr:Nn>=mr)&&(Hn.push(oi+1),Hn.push(zr),Hn.push(ti))}return br}(this.ids,this.coords,ct,mt,Dt,Ut,this.nodeSize)}within(ct,mt,Dt){return function(Ut,tn,pn,hn,rn,fn){const Nn=[0,Ut.length-1,0],ar=[],Hn=rn*rn;for(;Nn.length;){const br=Nn.pop(),wr=Nn.pop(),mr=Nn.pop();if(wr-mr<=fn){for(let ti=mr;ti<=wr;ti++)Nt(tn[2*ti],tn[2*ti+1],pn,hn)<=Hn&&ar.push(Ut[ti]);continue}const Er=Math.floor((mr+wr)/2),zr=tn[2*Er],Qr=tn[2*Er+1];Nt(zr,Qr,pn,hn)<=Hn&&ar.push(Ut[Er]);const oi=(br+1)%2;(br===0?pn-rn<=zr:hn-rn<=Qr)&&(Nn.push(mr),Nn.push(Er-1),Nn.push(oi)),(br===0?pn+rn>=zr:hn+rn>=Qr)&&(Nn.push(Er+1),Nn.push(wr),Nn.push(oi))}return ar}(this.ids,this.coords,ct,mt,Dt,this.nodeSize)}}const Tn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Lt=>Lt},Jt=Math.fround||(on=new Float32Array(1),Lt=>(on[0]=+Lt,on[0]));var on;class Vt{constructor(ct){this.options=an(Object.create(Tn),ct),this.trees=new Array(this.options.maxZoom+1)}load(ct){const{log:mt,minZoom:Dt,maxZoom:Ut,nodeSize:tn}=this.options;mt&&console.time("total time");const pn=`prepare ${ct.length} points`;mt&&console.time(pn),this.points=ct;let hn=[];for(let rn=0;rn<ct.length;rn++)ct[rn].geometry&&hn.push(Yt(ct[rn],rn));this.trees[Ut+1]=new nn(hn,xn,En,tn,Float32Array),mt&&console.timeEnd(pn);for(let rn=Ut;rn>=Dt;rn--){const fn=+Date.now();hn=this._cluster(hn,rn),this.trees[rn]=new nn(hn,xn,En,tn,Float32Array),mt&&console.log("z%d: %d clusters in %dms",rn,hn.length,+Date.now()-fn)}return mt&&console.timeEnd("total time"),this}getClusters(ct,mt){let Dt=((ct[0]+180)%360+360)%360-180;const Ut=Math.max(-90,Math.min(90,ct[1]));let tn=ct[2]===180?180:((ct[2]+180)%360+360)%360-180;const pn=Math.max(-90,Math.min(90,ct[3]));if(ct[2]-ct[0]>=360)Dt=-180,tn=180;else if(Dt>tn){const Nn=this.getClusters([Dt,Ut,180,pn],mt),ar=this.getClusters([-180,Ut,tn,pn],mt);return Nn.concat(ar)}const hn=this.trees[this._limitZoom(mt)],rn=hn.range(In(Dt),It(pn),In(tn),It(Ut)),fn=[];for(const Nn of rn){const ar=hn.points[Nn];fn.push(ar.numPoints?un(ar):this.points[ar.index])}return fn}getChildren(ct){const mt=this._getOriginId(ct),Dt=this._getOriginZoom(ct),Ut="No cluster with the specified id.",tn=this.trees[Dt];if(!tn)throw new Error(Ut);const pn=tn.points[mt];if(!pn)throw new Error(Ut);const hn=this.options.radius/(this.options.extent*Math.pow(2,Dt-1)),rn=tn.within(pn.x,pn.y,hn),fn=[];for(const Nn of rn){const ar=tn.points[Nn];ar.parentId===ct&&fn.push(ar.numPoints?un(ar):this.points[ar.index])}if(fn.length===0)throw new Error(Ut);return fn}getLeaves(ct,mt,Dt){const Ut=[];return this._appendLeaves(Ut,ct,mt=mt||10,Dt=Dt||0,0),Ut}getTile(ct,mt,Dt){const Ut=this.trees[this._limitZoom(ct)],tn=Math.pow(2,ct),{extent:pn,radius:hn}=this.options,rn=hn/pn,fn=(Dt-rn)/tn,Nn=(Dt+1+rn)/tn,ar={features:[]};return this._addTileFeatures(Ut.range((mt-rn)/tn,fn,(mt+1+rn)/tn,Nn),Ut.points,mt,Dt,tn,ar),mt===0&&this._addTileFeatures(Ut.range(1-rn/tn,fn,1,Nn),Ut.points,tn,Dt,tn,ar),mt===tn-1&&this._addTileFeatures(Ut.range(0,fn,rn/tn,Nn),Ut.points,-1,Dt,tn,ar),ar.features.length?ar:null}getClusterExpansionZoom(ct){let mt=this._getOriginZoom(ct)-1;for(;mt<=this.options.maxZoom;){const Dt=this.getChildren(ct);if(mt++,Dt.length!==1)break;ct=Dt[0].properties.cluster_id}return mt}_appendLeaves(ct,mt,Dt,Ut,tn){const pn=this.getChildren(mt);for(const hn of pn){const rn=hn.properties;if(rn&&rn.cluster?tn+rn.point_count<=Ut?tn+=rn.point_count:tn=this._appendLeaves(ct,rn.cluster_id,Dt,Ut,tn):tn<Ut?tn++:ct.push(hn),ct.length===Dt)break}return tn}_addTileFeatures(ct,mt,Dt,Ut,tn,pn){for(const hn of ct){const rn=mt[hn],fn=rn.numPoints;let Nn,ar,Hn;if(fn)Nn=yn(rn),ar=rn.x,Hn=rn.y;else{const mr=this.points[rn.index];Nn=mr.properties,ar=In(mr.geometry.coordinates[0]),Hn=It(mr.geometry.coordinates[1])}const br={type:1,geometry:[[Math.round(this.options.extent*(ar*tn-Dt)),Math.round(this.options.extent*(Hn*tn-Ut))]],tags:Nn};let wr;fn?wr=rn.id:this.options.generateId?wr=rn.index:this.points[rn.index].id&&(wr=this.points[rn.index].id),wr!==void 0&&(br.id=wr),pn.features.push(br)}}_limitZoom(ct){return Math.max(this.options.minZoom,Math.min(+ct,this.options.maxZoom+1))}_cluster(ct,mt){const Dt=[],{radius:Ut,extent:tn,reduce:pn,minPoints:hn}=this.options,rn=Ut/(tn*Math.pow(2,mt));for(let fn=0;fn<ct.length;fn++){const Nn=ct[fn];if(Nn.zoom<=mt)continue;Nn.zoom=mt;const ar=this.trees[mt+1],Hn=ar.within(Nn.x,Nn.y,rn),br=Nn.numPoints||1;let wr=br;for(const mr of Hn){const Er=ar.points[mr];Er.zoom>mt&&(wr+=Er.numPoints||1)}if(wr>br&&wr>=hn){let mr=Nn.x*br,Er=Nn.y*br,zr=pn&&br>1?this._map(Nn,!0):null;const Qr=(fn<<5)+(mt+1)+this.points.length;for(const oi of Hn){const ti=ar.points[oi];if(ti.zoom<=mt)continue;ti.zoom=mt;const vr=ti.numPoints||1;mr+=ti.x*vr,Er+=ti.y*vr,ti.parentId=Qr,pn&&(zr||(zr=this._map(Nn,!0)),pn(zr,this._map(ti)))}Nn.parentId=Qr,Dt.push(Rt(mr/wr,Er/wr,Qr,wr,zr))}else if(Dt.push(Nn),wr>1)for(const mr of Hn){const Er=ar.points[mr];Er.zoom<=mt||(Er.zoom=mt,Dt.push(Er))}}return Dt}_getOriginId(ct){return ct-this.points.length>>5}_getOriginZoom(ct){return(ct-this.points.length)%32}_map(ct,mt){if(ct.numPoints)return mt?an({},ct.properties):ct.properties;const Dt=this.points[ct.index].properties,Ut=this.options.map(Dt);return mt&&Ut===Dt?an({},Ut):Ut}}function Rt(Lt,ct,mt,Dt,Ut){return{x:Jt(Lt),y:Jt(ct),zoom:1/0,id:mt,parentId:-1,numPoints:Dt,properties:Ut}}function Yt(Lt,ct){const[mt,Dt]=Lt.geometry.coordinates;return{x:Jt(In(mt)),y:Jt(It(Dt)),zoom:1/0,index:ct,parentId:-1}}function un(Lt){return{type:"Feature",id:Lt.id,properties:yn(Lt),geometry:{type:"Point",coordinates:[(ct=Lt.x,360*(ct-.5)),$t(Lt.y)]}};var ct}function yn(Lt){const ct=Lt.numPoints,mt=ct>=1e4?`${Math.round(ct/1e3)}k`:ct>=1e3?Math.round(ct/100)/10+"k":ct;return an(an({},Lt.properties),{cluster:!0,cluster_id:Lt.id,point_count:ct,point_count_abbreviated:mt})}function In(Lt){return Lt/360+.5}function It(Lt){const ct=Math.sin(Lt*Math.PI/180),mt=.5-.25*Math.log((1+ct)/(1-ct))/Math.PI;return mt<0?0:mt>1?1:mt}function $t(Lt){const ct=(180-360*Lt)*Math.PI/180;return 360*Math.atan(Math.exp(ct))/Math.PI-90}function an(Lt,ct){for(const mt in ct)Lt[mt]=ct[mt];return Lt}function xn(Lt){return Lt.x}function En(Lt){return Lt.y}function $n(Lt,ct,mt,Dt){for(var Ut,tn=Dt,pn=mt-ct>>1,hn=mt-ct,rn=Lt[ct],fn=Lt[ct+1],Nn=Lt[mt],ar=Lt[mt+1],Hn=ct+3;Hn<mt;Hn+=3){var br=zn(Lt[Hn],Lt[Hn+1],rn,fn,Nn,ar);if(br>tn)Ut=Hn,tn=br;else if(br===tn){var wr=Math.abs(Hn-pn);wr<hn&&(Ut=Hn,hn=wr)}}tn>Dt&&(Ut-ct>3&&$n(Lt,ct,Ut,Dt),Lt[Ut+2]=tn,mt-Ut>3&&$n(Lt,Ut,mt,Dt))}function zn(Lt,ct,mt,Dt,Ut,tn){var pn=Ut-mt,hn=tn-Dt;if(pn!==0||hn!==0){var rn=((Lt-mt)*pn+(ct-Dt)*hn)/(pn*pn+hn*hn);rn>1?(mt=Ut,Dt=tn):rn>0&&(mt+=pn*rn,Dt+=hn*rn)}return(pn=Lt-mt)*pn+(hn=ct-Dt)*hn}function vn(Lt,ct,mt,Dt){var Ut={id:Lt===void 0?null:Lt,type:ct,geometry:mt,tags:Dt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(tn){var pn=tn.geometry,hn=tn.type;if(hn==="Point"||hn==="MultiPoint"||hn==="LineString")wn(tn,pn);else if(hn==="Polygon"||hn==="MultiLineString")for(var rn=0;rn<pn.length;rn++)wn(tn,pn[rn]);else if(hn==="MultiPolygon")for(rn=0;rn<pn.length;rn++)for(var fn=0;fn<pn[rn].length;fn++)wn(tn,pn[rn][fn])}(Ut),Ut}function wn(Lt,ct){for(var mt=0;mt<ct.length;mt+=3)Lt.minX=Math.min(Lt.minX,ct[mt]),Lt.minY=Math.min(Lt.minY,ct[mt+1]),Lt.maxX=Math.max(Lt.maxX,ct[mt]),Lt.maxY=Math.max(Lt.maxY,ct[mt+1])}function Sn(Lt,ct,mt,Dt){if(ct.geometry){var Ut=ct.geometry.coordinates,tn=ct.geometry.type,pn=Math.pow(mt.tolerance/((1<<mt.maxZoom)*mt.extent),2),hn=[],rn=ct.id;if(mt.promoteId?rn=ct.properties[mt.promoteId]:mt.generateId&&(rn=Dt||0),tn==="Point")Jn(Ut,hn);else if(tn==="MultiPoint")for(var fn=0;fn<Ut.length;fn++)Jn(Ut[fn],hn);else if(tn==="LineString")tr(Ut,hn,pn,!1);else if(tn==="MultiLineString"){if(mt.lineMetrics){for(fn=0;fn<Ut.length;fn++)tr(Ut[fn],hn=[],pn,!1),Lt.push(vn(rn,"LineString",hn,ct.properties));return}pr(Ut,hn,pn,!1)}else if(tn==="Polygon")pr(Ut,hn,pn,!0);else{if(tn!=="MultiPolygon"){if(tn==="GeometryCollection"){for(fn=0;fn<ct.geometry.geometries.length;fn++)Sn(Lt,{id:rn,geometry:ct.geometry.geometries[fn],properties:ct.properties},mt,Dt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(fn=0;fn<Ut.length;fn++){var Nn=[];pr(Ut[fn],Nn,pn,!0),hn.push(Nn)}}Lt.push(vn(rn,tn,hn,ct.properties))}}function Jn(Lt,ct){ct.push(Xn(Lt[0])),ct.push(Gn(Lt[1])),ct.push(0)}function tr(Lt,ct,mt,Dt){for(var Ut,tn,pn=0,hn=0;hn<Lt.length;hn++){var rn=Xn(Lt[hn][0]),fn=Gn(Lt[hn][1]);ct.push(rn),ct.push(fn),ct.push(0),hn>0&&(pn+=Dt?(Ut*fn-rn*tn)/2:Math.sqrt(Math.pow(rn-Ut,2)+Math.pow(fn-tn,2))),Ut=rn,tn=fn}var Nn=ct.length-3;ct[2]=1,$n(ct,0,Nn,mt),ct[Nn+2]=1,ct.size=Math.abs(pn),ct.start=0,ct.end=ct.size}function pr(Lt,ct,mt,Dt){for(var Ut=0;Ut<Lt.length;Ut++){var tn=[];tr(Lt[Ut],tn,mt,Dt),ct.push(tn)}}function Xn(Lt){return Lt/360+.5}function Gn(Lt){var ct=Math.sin(Lt*Math.PI/180),mt=.5-.25*Math.log((1+ct)/(1-ct))/Math.PI;return mt<0?0:mt>1?1:mt}function cn(Lt,ct,mt,Dt,Ut,tn,pn,hn){if(Dt/=ct,tn>=(mt/=ct)&&pn<Dt)return Lt;if(pn<mt||tn>=Dt)return null;for(var rn=[],fn=0;fn<Lt.length;fn++){var Nn=Lt[fn],ar=Nn.geometry,Hn=Nn.type,br=Ut===0?Nn.minX:Nn.minY,wr=Ut===0?Nn.maxX:Nn.maxY;if(br>=mt&&wr<Dt)rn.push(Nn);else if(!(wr<mt||br>=Dt)){var mr=[];if(Hn==="Point"||Hn==="MultiPoint")gn(ar,mr,mt,Dt,Ut);else if(Hn==="LineString")On(ar,mr,mt,Dt,Ut,!1,hn.lineMetrics);else if(Hn==="MultiLineString")_r(ar,mr,mt,Dt,Ut,!1);else if(Hn==="Polygon")_r(ar,mr,mt,Dt,Ut,!0);else if(Hn==="MultiPolygon")for(var Er=0;Er<ar.length;Er++){var zr=[];_r(ar[Er],zr,mt,Dt,Ut,!0),zr.length&&mr.push(zr)}if(mr.length){if(hn.lineMetrics&&Hn==="LineString"){for(Er=0;Er<mr.length;Er++)rn.push(vn(Nn.id,Hn,mr[Er],Nn.tags));continue}Hn!=="LineString"&&Hn!=="MultiLineString"||(mr.length===1?(Hn="LineString",mr=mr[0]):Hn="MultiLineString"),Hn!=="Point"&&Hn!=="MultiPoint"||(Hn=mr.length===3?"Point":"MultiPoint"),rn.push(vn(Nn.id,Hn,mr,Nn.tags))}}}return rn.length?rn:null}function gn(Lt,ct,mt,Dt,Ut){for(var tn=0;tn<Lt.length;tn+=3){var pn=Lt[tn+Ut];pn>=mt&&pn<=Dt&&(ct.push(Lt[tn]),ct.push(Lt[tn+1]),ct.push(Lt[tn+2]))}}function On(Lt,ct,mt,Dt,Ut,tn,pn){for(var hn,rn,fn=Kn(Lt),Nn=Ut===0?Dr:xr,ar=Lt.start,Hn=0;Hn<Lt.length-3;Hn+=3){var br=Lt[Hn],wr=Lt[Hn+1],mr=Lt[Hn+2],Er=Lt[Hn+3],zr=Lt[Hn+4],Qr=Ut===0?br:wr,oi=Ut===0?Er:zr,ti=!1;pn&&(hn=Math.sqrt(Math.pow(br-Er,2)+Math.pow(wr-zr,2))),Qr<mt?oi>mt&&(rn=Nn(fn,br,wr,Er,zr,mt),pn&&(fn.start=ar+hn*rn)):Qr>Dt?oi<Dt&&(rn=Nn(fn,br,wr,Er,zr,Dt),pn&&(fn.start=ar+hn*rn)):kr(fn,br,wr,mr),oi<mt&&Qr>=mt&&(rn=Nn(fn,br,wr,Er,zr,mt),ti=!0),oi>Dt&&Qr<=Dt&&(rn=Nn(fn,br,wr,Er,zr,Dt),ti=!0),!tn&&ti&&(pn&&(fn.end=ar+hn*rn),ct.push(fn),fn=Kn(Lt)),pn&&(ar+=hn)}var vr=Lt.length-3;br=Lt[vr],wr=Lt[vr+1],mr=Lt[vr+2],(Qr=Ut===0?br:wr)>=mt&&Qr<=Dt&&kr(fn,br,wr,mr),vr=fn.length-3,tn&&vr>=3&&(fn[vr]!==fn[0]||fn[vr+1]!==fn[1])&&kr(fn,fn[0],fn[1],fn[2]),fn.length&&ct.push(fn)}function Kn(Lt){var ct=[];return ct.size=Lt.size,ct.start=Lt.start,ct.end=Lt.end,ct}function _r(Lt,ct,mt,Dt,Ut,tn){for(var pn=0;pn<Lt.length;pn++)On(Lt[pn],ct,mt,Dt,Ut,tn,!1)}function kr(Lt,ct,mt,Dt){Lt.push(ct),Lt.push(mt),Lt.push(Dt)}function Dr(Lt,ct,mt,Dt,Ut,tn){var pn=(tn-ct)/(Dt-ct);return Lt.push(tn),Lt.push(mt+(Ut-mt)*pn),Lt.push(1),pn}function xr(Lt,ct,mt,Dt,Ut,tn){var pn=(tn-mt)/(Ut-mt);return Lt.push(ct+(Dt-ct)*pn),Lt.push(tn),Lt.push(1),pn}function Lr(Lt,ct){for(var mt=[],Dt=0;Dt<Lt.length;Dt++){var Ut,tn=Lt[Dt],pn=tn.type;if(pn==="Point"||pn==="MultiPoint"||pn==="LineString")Ut=Br(tn.geometry,ct);else if(pn==="MultiLineString"||pn==="Polygon"){Ut=[];for(var hn=0;hn<tn.geometry.length;hn++)Ut.push(Br(tn.geometry[hn],ct))}else if(pn==="MultiPolygon")for(Ut=[],hn=0;hn<tn.geometry.length;hn++){for(var rn=[],fn=0;fn<tn.geometry[hn].length;fn++)rn.push(Br(tn.geometry[hn][fn],ct));Ut.push(rn)}mt.push(vn(tn.id,pn,Ut,tn.tags))}return mt}function Br(Lt,ct){var mt=[];mt.size=Lt.size,Lt.start!==void 0&&(mt.start=Lt.start,mt.end=Lt.end);for(var Dt=0;Dt<Lt.length;Dt+=3)mt.push(Lt[Dt]+ct,Lt[Dt+1],Lt[Dt+2]);return mt}function Vr(Lt,ct){if(Lt.transformed)return Lt;var mt,Dt,Ut,tn=1<<Lt.z,pn=Lt.x,hn=Lt.y;for(mt=0;mt<Lt.features.length;mt++){var rn=Lt.features[mt],fn=rn.geometry,Nn=rn.type;if(rn.geometry=[],Nn===1)for(Dt=0;Dt<fn.length;Dt+=2)rn.geometry.push(jr(fn[Dt],fn[Dt+1],ct,tn,pn,hn));else for(Dt=0;Dt<fn.length;Dt++){var ar=[];for(Ut=0;Ut<fn[Dt].length;Ut+=2)ar.push(jr(fn[Dt][Ut],fn[Dt][Ut+1],ct,tn,pn,hn));rn.geometry.push(ar)}}return Lt.transformed=!0,Lt}function jr(Lt,ct,mt,Dt,Ut,tn){return[Math.round(mt*(Lt*Dt-Ut)),Math.round(mt*(ct*Dt-tn))]}function Oi(Lt,ct,mt,Dt,Ut){for(var tn=ct===Ut.maxZoom?0:Ut.tolerance/((1<<ct)*Ut.extent),pn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:mt,y:Dt,z:ct,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},hn=0;hn<Lt.length;hn++){pn.numFeatures++,Di(pn,Lt[hn],tn,Ut);var rn=Lt[hn].minX,fn=Lt[hn].minY,Nn=Lt[hn].maxX,ar=Lt[hn].maxY;rn<pn.minX&&(pn.minX=rn),fn<pn.minY&&(pn.minY=fn),Nn>pn.maxX&&(pn.maxX=Nn),ar>pn.maxY&&(pn.maxY=ar)}return pn}function Di(Lt,ct,mt,Dt){var Ut=ct.geometry,tn=ct.type,pn=[];if(tn==="Point"||tn==="MultiPoint")for(var hn=0;hn<Ut.length;hn+=3)pn.push(Ut[hn]),pn.push(Ut[hn+1]),Lt.numPoints++,Lt.numSimplified++;else if(tn==="LineString")Ai(pn,Ut,Lt,mt,!1,!1);else if(tn==="MultiLineString"||tn==="Polygon")for(hn=0;hn<Ut.length;hn++)Ai(pn,Ut[hn],Lt,mt,tn==="Polygon",hn===0);else if(tn==="MultiPolygon")for(var rn=0;rn<Ut.length;rn++){var fn=Ut[rn];for(hn=0;hn<fn.length;hn++)Ai(pn,fn[hn],Lt,mt,!0,hn===0)}if(pn.length){var Nn=ct.tags||null;if(tn==="LineString"&&Dt.lineMetrics){for(var ar in Nn={},ct.tags)Nn[ar]=ct.tags[ar];Nn.mapbox_clip_start=Ut.start/Ut.size,Nn.mapbox_clip_end=Ut.end/Ut.size}var Hn={geometry:pn,type:tn==="Polygon"||tn==="MultiPolygon"?3:tn==="LineString"||tn==="MultiLineString"?2:1,tags:Nn};ct.id!==null&&(Hn.id=ct.id),Lt.features.push(Hn)}}function Ai(Lt,ct,mt,Dt,Ut,tn){var pn=Dt*Dt;if(Dt>0&&ct.size<(Ut?pn:Dt))mt.numPoints+=ct.length/3;else{for(var hn=[],rn=0;rn<ct.length;rn+=3)(Dt===0||ct[rn+2]>pn)&&(mt.numSimplified++,hn.push(ct[rn]),hn.push(ct[rn+1])),mt.numPoints++;Ut&&function(fn,Nn){for(var ar=0,Hn=0,br=fn.length,wr=br-2;Hn<br;wr=Hn,Hn+=2)ar+=(fn[Hn]-fn[wr])*(fn[Hn+1]+fn[wr+1]);if(ar>0===Nn)for(Hn=0,br=fn.length;Hn<br/2;Hn+=2){var mr=fn[Hn],Er=fn[Hn+1];fn[Hn]=fn[br-2-Hn],fn[Hn+1]=fn[br-1-Hn],fn[br-2-Hn]=mr,fn[br-1-Hn]=Er}}(hn,tn),Lt.push(hn)}}function Cr(Lt,ct){var mt=(ct=this.options=function(Ut,tn){for(var pn in tn)Ut[pn]=tn[pn];return Ut}(Object.create(this.options),ct)).debug;if(mt&&console.time("preprocess data"),ct.maxZoom<0||ct.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ct.promoteId&&ct.generateId)throw new Error("promoteId and generateId cannot be used together.");var Dt=function(Ut,tn){var pn=[];if(Ut.type==="FeatureCollection")for(var hn=0;hn<Ut.features.length;hn++)Sn(pn,Ut.features[hn],tn,hn);else Sn(pn,Ut.type==="Feature"?Ut:{geometry:Ut},tn);return pn}(Lt,ct);this.tiles={},this.tileCoords=[],mt&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ct.indexMaxZoom,ct.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Dt=function(Ut,tn){var pn=tn.buffer/tn.extent,hn=Ut,rn=cn(Ut,1,-1-pn,pn,0,-1,2,tn),fn=cn(Ut,1,1-pn,2+pn,0,-1,2,tn);return(rn||fn)&&(hn=cn(Ut,1,-pn,1+pn,0,-1,2,tn)||[],rn&&(hn=Lr(rn,1).concat(hn)),fn&&(hn=hn.concat(Lr(fn,-1)))),hn}(Dt,ct)).length&&this.splitTile(Dt,0,0,0),mt&&(Dt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fo(Lt,ct,mt){return 32*((1<<Lt)*mt+ct)+Lt}function Ea(Lt,ct){const mt=Lt.tileID.canonical;if(!this._geoJSONIndex)return ct(null,null);const Dt=this._geoJSONIndex.getTile(mt.z,mt.x,mt.y);if(!Dt)return ct(null,null);const Ut=new Fe(Dt.features);let tn=Ne(Ut);tn.byteOffset===0&&tn.byteLength===tn.buffer.byteLength||(tn=new Uint8Array(tn)),ct(null,{vectorTile:Ut,rawData:tn.buffer})}Cr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Cr.prototype.splitTile=function(Lt,ct,mt,Dt,Ut,tn,pn){for(var hn=[Lt,ct,mt,Dt],rn=this.options,fn=rn.debug;hn.length;){Dt=hn.pop(),mt=hn.pop(),ct=hn.pop(),Lt=hn.pop();var Nn=1<<ct,ar=Fo(ct,mt,Dt),Hn=this.tiles[ar];if(!Hn&&(fn>1&&console.time("creation"),Hn=this.tiles[ar]=Oi(Lt,ct,mt,Dt,rn),this.tileCoords.push({z:ct,x:mt,y:Dt}),fn)){fn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ct,mt,Dt,Hn.numFeatures,Hn.numPoints,Hn.numSimplified),console.timeEnd("creation"));var br="z"+ct;this.stats[br]=(this.stats[br]||0)+1,this.total++}if(Hn.source=Lt,Ut){if(ct===rn.maxZoom||ct===Ut)continue;var wr=1<<Ut-ct;if(mt!==Math.floor(tn/wr)||Dt!==Math.floor(pn/wr))continue}else if(ct===rn.indexMaxZoom||Hn.numPoints<=rn.indexMaxPoints)continue;if(Hn.source=null,Lt.length!==0){fn>1&&console.time("clipping");var mr,Er,zr,Qr,oi,ti,vr=.5*rn.buffer/rn.extent,mn=.5-vr,po=.5+vr,Ti=1+vr;mr=Er=zr=Qr=null,oi=cn(Lt,Nn,mt-vr,mt+po,0,Hn.minX,Hn.maxX,rn),ti=cn(Lt,Nn,mt+mn,mt+Ti,0,Hn.minX,Hn.maxX,rn),Lt=null,oi&&(mr=cn(oi,Nn,Dt-vr,Dt+po,1,Hn.minY,Hn.maxY,rn),Er=cn(oi,Nn,Dt+mn,Dt+Ti,1,Hn.minY,Hn.maxY,rn),oi=null),ti&&(zr=cn(ti,Nn,Dt-vr,Dt+po,1,Hn.minY,Hn.maxY,rn),Qr=cn(ti,Nn,Dt+mn,Dt+Ti,1,Hn.minY,Hn.maxY,rn),ti=null),fn>1&&console.timeEnd("clipping"),hn.push(mr||[],ct+1,2*mt,2*Dt),hn.push(Er||[],ct+1,2*mt,2*Dt+1),hn.push(zr||[],ct+1,2*mt+1,2*Dt),hn.push(Qr||[],ct+1,2*mt+1,2*Dt+1)}}},Cr.prototype.getTile=function(Lt,ct,mt){var Dt=this.options,Ut=Dt.extent,tn=Dt.debug;if(Lt<0||Lt>24)return null;var pn=1<<Lt,hn=Fo(Lt,ct=(ct%pn+pn)%pn,mt);if(this.tiles[hn])return Vr(this.tiles[hn],Ut);tn>1&&console.log("drilling down to z%d-%d-%d",Lt,ct,mt);for(var rn,fn=Lt,Nn=ct,ar=mt;!rn&&fn>0;)fn--,Nn=Math.floor(Nn/2),ar=Math.floor(ar/2),rn=this.tiles[Fo(fn,Nn,ar)];return rn&&rn.source?(tn>1&&console.log("found parent tile z%d-%d-%d",fn,Nn,ar),tn>1&&console.time("drilling down"),this.splitTile(rn.source,fn,Nn,ar,Lt,ct,mt),tn>1&&console.timeEnd("drilling down"),this.tiles[hn]?Vr(this.tiles[hn],Ut):null):null};class vi extends I.VectorTileWorkerSource{constructor(ct,mt,Dt,Ut,tn){super(ct,mt,Dt,Ut,Ea),tn&&(this.loadGeoJSON=tn)}loadData(ct,mt){const Dt=ct&&ct.request,Ut=Dt&&Dt.collectResourceTiming;this.loadGeoJSON(ct,(tn,pn)=>{if(tn||!pn)return mt(tn);if(typeof pn!="object")return mt(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`));{xe(pn,!0);try{if(ct.filter){const rn=I.createExpression(ct.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(rn.result==="error")throw new Error(rn.value.map(Nn=>`${Nn.key}: ${Nn.message}`).join(", "));const fn=pn.features.filter(Nn=>rn.value.evaluate({zoom:0},Nn));pn={type:"FeatureCollection",features:fn}}this._geoJSONIndex=ct.cluster?new Vt(function({superclusterOptions:rn,clusterProperties:fn}){if(!fn||!rn)return rn;const Nn={},ar={},Hn={accumulated:null,zoom:0},br={properties:null},wr=Object.keys(fn);for(const mr of wr){const[Er,zr]=fn[mr],Qr=I.createExpression(zr),oi=I.createExpression(typeof Er=="string"?[Er,["accumulated"],["get",mr]]:Er);Nn[mr]=Qr.value,ar[mr]=oi.value}return rn.map=mr=>{br.properties=mr;const Er={};for(const zr of wr)Er[zr]=Nn[zr].evaluate(Hn,br);return Er},rn.reduce=(mr,Er)=>{br.properties=Er;for(const zr of wr)Hn.accumulated=mr[zr],mr[zr]=ar[zr].evaluate(Hn,br)},rn}(ct)).load(pn.features):function(rn,fn){return new Cr(rn,fn)}(pn,ct.geojsonVtOptions)}catch(rn){return mt(rn)}this.loaded={};const hn={};if(Ut){const rn=I.getPerformanceMeasurement(Dt);rn&&(hn.resourceTiming={},hn.resourceTiming[ct.source]=JSON.parse(JSON.stringify(rn)))}mt(null,hn)}})}reloadTile(ct,mt){const Dt=this.loaded;return Dt&&Dt[ct.uid]?super.reloadTile(ct,mt):this.loadTile(ct,mt)}loadGeoJSON(ct,mt){if(ct.request)I.getJSON(ct.request,mt);else{if(typeof ct.data!="string")return mt(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`));try{return mt(null,JSON.parse(ct.data))}catch{return mt(new Error(`Input data given to '${ct.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(ct,mt){try{mt(null,this._geoJSONIndex.getClusterExpansionZoom(ct.clusterId))}catch(Dt){mt(Dt)}}getClusterChildren(ct,mt){try{mt(null,this._geoJSONIndex.getChildren(ct.clusterId))}catch(Dt){mt(Dt)}}getClusterLeaves(ct,mt){try{mt(null,this._geoJSONIndex.getLeaves(ct.clusterId,ct.limit,ct.offset))}catch(Dt){mt(Dt)}}}class sa{constructor(ct){this.self=ct,this.actor=new I.Actor(ct,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=I.getProjection({name:"mercator"}),this.workerSourceTypes={vector:I.VectorTileWorkerSource,geojson:vi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(mt,Dt)=>{if(this.workerSourceTypes[mt])throw new Error(`Worker source with name "${mt}" already registered.`);this.workerSourceTypes[mt]=Dt},this.self.registerRTLTextPlugin=mt=>{if(I.plugin.isParsed())throw new Error("RTL text plugin already registered.");I.plugin.applyArabicShaping=mt.applyArabicShaping,I.plugin.processBidirectionalText=mt.processBidirectionalText,I.plugin.processStyledBidirectionalText=mt.processStyledBidirectionalText}}clearCaches(ct,mt,Dt){delete this.layerIndexes[ct],delete this.availableImages[ct],delete this.workerSources[ct],delete this.demWorkerSources[ct],Dt()}checkIfReady(ct,mt,Dt){Dt()}setReferrer(ct,mt){this.referrer=mt}spriteLoaded(ct,mt){this.isSpriteLoaded[ct]=mt;for(const Dt in this.workerSources[ct]){const Ut=this.workerSources[ct][Dt];for(const tn in Ut)Ut[tn]instanceof I.VectorTileWorkerSource&&(Ut[tn].isSpriteLoaded=mt,Ut[tn].fire(new I.Event("isSpriteLoaded")))}}setImages(ct,mt,Dt){this.availableImages[ct]=mt;for(const Ut in this.workerSources[ct]){const tn=this.workerSources[ct][Ut];for(const pn in tn)tn[pn].availableImages=mt}Dt()}enableTerrain(ct,mt,Dt){this.terrain=mt,Dt()}setProjection(ct,mt){this.projections[ct]=I.getProjection(mt)}setLayers(ct,mt,Dt){this.getLayerIndex(ct).replace(mt),Dt()}updateLayers(ct,mt,Dt){this.getLayerIndex(ct).update(mt.layers,mt.removedIds),Dt()}loadTile(ct,mt,Dt){const Ut=this.enableTerrain?I.extend({enableTerrain:this.terrain},mt):mt;Ut.projection=this.projections[ct]||this.defaultProjection,this.getWorkerSource(ct,mt.type,mt.source).loadTile(Ut,Dt)}loadDEMTile(ct,mt,Dt){const Ut=this.enableTerrain?I.extend({buildQuadTree:this.terrain},mt):mt;this.getDEMWorkerSource(ct,mt.source).loadTile(Ut,Dt)}reloadTile(ct,mt,Dt){const Ut=this.enableTerrain?I.extend({enableTerrain:this.terrain},mt):mt;Ut.projection=this.projections[ct]||this.defaultProjection,this.getWorkerSource(ct,mt.type,mt.source).reloadTile(Ut,Dt)}abortTile(ct,mt,Dt){this.getWorkerSource(ct,mt.type,mt.source).abortTile(mt,Dt)}removeTile(ct,mt,Dt){this.getWorkerSource(ct,mt.type,mt.source).removeTile(mt,Dt)}removeSource(ct,mt,Dt){if(!this.workerSources[ct]||!this.workerSources[ct][mt.type]||!this.workerSources[ct][mt.type][mt.source])return;const Ut=this.workerSources[ct][mt.type][mt.source];delete this.workerSources[ct][mt.type][mt.source],Ut.removeSource!==void 0?Ut.removeSource(mt,Dt):Dt()}loadWorkerSource(ct,mt,Dt){try{this.self.importScripts(mt.url),Dt()}catch(Ut){Dt(Ut.toString())}}syncRTLPluginState(ct,mt,Dt){try{I.plugin.setState(mt);const Ut=I.plugin.getPluginURL();if(I.plugin.isLoaded()&&!I.plugin.isParsed()&&Ut!=null){this.self.importScripts(Ut);const tn=I.plugin.isParsed();Dt(tn?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ut}`),tn)}}catch(Ut){Dt(Ut.toString())}}getAvailableImages(ct){let mt=this.availableImages[ct];return mt||(mt=[]),mt}getLayerIndex(ct){let mt=this.layerIndexes[ct];return mt||(mt=this.layerIndexes[ct]=new ge),mt}getWorkerSource(ct,mt,Dt){return this.workerSources[ct]||(this.workerSources[ct]={}),this.workerSources[ct][mt]||(this.workerSources[ct][mt]={}),this.workerSources[ct][mt][Dt]||(this.workerSources[ct][mt][Dt]=new this.workerSourceTypes[mt]({send:(Ut,tn,pn,hn,rn,fn)=>{this.actor.send(Ut,tn,pn,ct,rn,fn)},scheduler:this.actor.scheduler},this.getLayerIndex(ct),this.getAvailableImages(ct),this.isSpriteLoaded[ct])),this.workerSources[ct][mt][Dt]}getDEMWorkerSource(ct,mt){return this.demWorkerSources[ct]||(this.demWorkerSources[ct]={}),this.demWorkerSources[ct][mt]||(this.demWorkerSources[ct][mt]=new ye),this.demWorkerSources[ct][mt]}enforceCacheSizeLimit(ct,mt){I.enforceCacheSizeLimit(mt)}getWorkerPerformanceMetrics(ct,mt,Dt){Dt(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new sa(self)),sa}),Q(["./shared"],function(I){function _e(be,q){if(Array.isArray(be)){if(!Array.isArray(q)||be.length!==q.length)return!1;for(let ce=0;ce<be.length;ce++)if(!_e(be[ce],q[ce]))return!1;return!0}if(typeof be=="object"&&be!==null&&q!==null){if(typeof q!="object"||Object.keys(be).length!==Object.keys(q).length)return!1;for(const ce in be)if(!_e(be[ce],q[ce]))return!1;return!0}return be===q}var ne=ge;function ge(be){return!function(q){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Te,Ie,Re=new Blob([""],{type:"text/javascript"}),Be=URL.createObjectURL(Re);try{Ie=new Worker(Be),Te=!0}catch{Te=!1}return Ie&&Ie.terminate(),URL.revokeObjectURL(Be),Te}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Te=document.createElement("canvas");Te.width=Te.height=1;var Ie=Te.getContext("2d");if(!Ie)return!1;var Re=Ie.getImageData(0,0,1,1);return Re&&Re.width===Te.width}()?(ye[ce=q&&q.failIfMajorPerformanceCaveat]===void 0&&(ye[ce]=function(Te){var Ie,Re=function(Be){var Ue=document.createElement("canvas"),He=Object.create(ge.webGLContextAttributes);return He.failIfMajorPerformanceCaveat=Be,Ue.getContext("webgl",He)||Ue.getContext("experimental-webgl",He)}(Te);if(!Re)return!1;try{Ie=Re.createShader(Re.VERTEX_SHADER)}catch{return!1}return!(!Ie||Re.isContextLost())&&(Re.shaderSource(Ie,"void main() {}"),Re.compileShader(Ie),Re.getShaderParameter(Ie,Re.COMPILE_STATUS)===!0)}(ce)),ye[ce]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ce}(be)}var ye={};function xe(be,q,ce){const Te=I.window.document.createElement(be);return q!==void 0&&(Te.className=q),ce&&ce.appendChild(Te),Te}function we(be,q,ce){const Te=I.window.document.createElementNS("http://www.w3.org/2000/svg",be);for(const Ie of Object.keys(q))Te.setAttributeNS(null,Ie,q[Ie]);return ce&&ce.appendChild(Te),Te}ge.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ke=I.window.document&&I.window.document.documentElement.style,Se=ke&&ke.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Oe;function Fe(){ke&&Se&&(Oe=ke[Se],ke[Se]="none")}function ze(){ke&&Se&&(ke[Se]=Oe)}function Le(be){be.preventDefault(),be.stopPropagation(),I.window.removeEventListener("click",Le,!0)}function We(){I.window.addEventListener("click",Le,!0),I.window.setTimeout(()=>{I.window.removeEventListener("click",Le,!0)},0)}function qe(be,q){const ce=be.getBoundingClientRect();return ot(be,ce,q)}function Ne(be,q){const ce=be.getBoundingClientRect(),Te=[];for(let Ie=0;Ie<q.length;Ie++)Te.push(ot(be,ce,q[Ie]));return Te}function Ke(be){return I.window.InstallTrigger!==void 0&&be.button===2&&be.ctrlKey&&I.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:be.button}function ot(be,q,ce){const Te=be.offsetWidth===q.width?1:be.offsetWidth/q.width;return new I.pointGeometry((ce.clientX-q.left)*Te,(ce.clientY-q.top)*Te)}function yt(be,q){var ce=q[0],Te=q[1],Ie=q[2],Re=q[3],Be=ce*Re-Ie*Te;return Be?(be[0]=Re*(Be=1/Be),be[1]=-Te*Be,be[2]=-Ie*Be,be[3]=ce*Be,be):null}function ft(be){const{userImage:q}=be;return!!(q&&q.render&&q.render())&&(be.data.replace(new Uint8Array(q.data.buffer)),!0)}class _t extends I.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new I.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(q){if(this.loaded!==q&&(this.loaded=q,q)){for(const{ids:ce,callback:Te}of this.requestors)this._notify(ce,Te);this.requestors=[]}}hasImage(q){return!!this.getImage(q)}getImage(q){return this.images[q]}addImage(q,ce){this._validate(q,ce)&&(this.images[q]=ce)}_validate(q,ce){let Te=!0;return this._validateStretch(ce.stretchX,ce.data&&ce.data.width)||(this.fire(new I.ErrorEvent(new Error(`Image "${q}" has invalid "stretchX" value`))),Te=!1),this._validateStretch(ce.stretchY,ce.data&&ce.data.height)||(this.fire(new I.ErrorEvent(new Error(`Image "${q}" has invalid "stretchY" value`))),Te=!1),this._validateContent(ce.content,ce)||(this.fire(new I.ErrorEvent(new Error(`Image "${q}" has invalid "content" value`))),Te=!1),Te}_validateStretch(q,ce){if(!q)return!0;let Te=0;for(const Ie of q){if(Ie[0]<Te||Ie[1]<Ie[0]||ce<Ie[1])return!1;Te=Ie[1]}return!0}_validateContent(q,ce){return!(q&&(q.length!==4||q[0]<0||ce.data.width<q[0]||q[1]<0||ce.data.height<q[1]||q[2]<0||ce.data.width<q[2]||q[3]<0||ce.data.height<q[3]||q[2]<q[0]||q[3]<q[1]))}updateImage(q,ce){ce.version=this.images[q].version+1,this.images[q]=ce,this.updatedImages[q]=!0}removeImage(q){const ce=this.images[q];delete this.images[q],delete this.patterns[q],ce.userImage&&ce.userImage.onRemove&&ce.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(q,ce){let Te=!0;if(!this.isLoaded())for(const Ie of q)this.images[Ie]||(Te=!1);this.isLoaded()||Te?this._notify(q,ce):this.requestors.push({ids:q,callback:ce})}_notify(q,ce){const Te={};for(const Ie of q){this.images[Ie]||this.fire(new I.Event("styleimagemissing",{id:Ie}));const Re=this.images[Ie];Re?Te[Ie]={data:Re.data.clone(),pixelRatio:Re.pixelRatio,sdf:Re.sdf,version:Re.version,stretchX:Re.stretchX,stretchY:Re.stretchY,content:Re.content,hasRenderCallback:Boolean(Re.userImage&&Re.userImage.render)}:I.warnOnce(`Image "${Ie}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}ce(null,Te)}getPixelSize(){const{width:q,height:ce}=this.atlasImage;return{width:q,height:ce}}getPattern(q){const ce=this.patterns[q],Te=this.getImage(q);if(!Te)return null;if(ce&&ce.position.version===Te.version)return ce.position;if(ce)ce.position.version=Te.version;else{const Ie={w:Te.data.width+2,h:Te.data.height+2,x:0,y:0},Re=new I.ImagePosition(Ie,Te);this.patterns[q]={bin:Ie,position:Re}}return this._updatePatternAtlas(),this.patterns[q].position}bind(q){const ce=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new I.Texture(q,this.atlasImage,ce.RGBA),this.atlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}_updatePatternAtlas(){const q=[];for(const Re in this.patterns)q.push(this.patterns[Re].bin);const{w:ce,h:Te}=I.potpack(q),Ie=this.atlasImage;Ie.resize({width:ce||1,height:Te||1});for(const Re in this.patterns){const{bin:Be}=this.patterns[Re],Ue=Be.x+1,He=Be.y+1,Ye=this.images[Re].data,et=Ye.width,dt=Ye.height;I.RGBAImage.copy(Ye,Ie,{x:0,y:0},{x:Ue,y:He},{width:et,height:dt}),I.RGBAImage.copy(Ye,Ie,{x:0,y:dt-1},{x:Ue,y:He-1},{width:et,height:1}),I.RGBAImage.copy(Ye,Ie,{x:0,y:0},{x:Ue,y:He+dt},{width:et,height:1}),I.RGBAImage.copy(Ye,Ie,{x:et-1,y:0},{x:Ue-1,y:He},{width:1,height:dt}),I.RGBAImage.copy(Ye,Ie,{x:0,y:0},{x:Ue+et,y:He},{width:1,height:dt})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(q){for(const ce of q){if(this.callbackDispatchedThisFrame[ce])continue;this.callbackDispatchedThisFrame[ce]=!0;const Te=this.images[ce];ft(Te)&&this.updateImage(ce,Te)}}}const Je=new I.Properties({anchor:new I.DataConstantProperty(I.spec.light.anchor),position:new class{constructor(){this.specification=I.spec.light.position}possiblyEvaluate(be,q){return function([ce,Te,Ie]){const Re=I.degToRad(Te+90),Be=I.degToRad(Ie);return{x:ce*Math.cos(Re)*Math.sin(Be),y:ce*Math.sin(Re)*Math.sin(Be),z:ce*Math.cos(Be),azimuthal:Te,polar:Ie}}(be.expression.evaluate(q))}interpolate(be,q,ce){return{x:I.number(be.x,q.x,ce),y:I.number(be.y,q.y,ce),z:I.number(be.z,q.z,ce),azimuthal:I.number(be.azimuthal,q.azimuthal,ce),polar:I.number(be.polar,q.polar,ce)}}},color:new I.DataConstantProperty(I.spec.light.color),intensity:new I.DataConstantProperty(I.spec.light.intensity)}),Qe="-transition";class tt extends I.Evented{constructor(q){super(),this._transitionable=new I.Transitionable(Je),this.setLight(q),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(q,ce={}){if(!this._validate(I.validateLight,q,ce))for(const Te in q){const Ie=q[Te];I.endsWith(Te,Qe)?this._transitionable.setTransition(Te.slice(0,-Qe.length),Ie):this._transitionable.setValue(Te,Ie)}}updateTransitions(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(q){this.properties=this._transitioning.possiblyEvaluate(q)}_validate(q,ce,Te){return(!Te||Te.validate!==!1)&&I.emitValidationErrors(this,q.call(I.validateStyle,I.extend({value:ce,style:{glyphs:!0,sprite:!0},styleSpec:I.spec})))}}const ht=new I.Properties({source:new I.DataConstantProperty(I.spec.terrain.source),exaggeration:new I.DataConstantProperty(I.spec.terrain.exaggeration)}),it="-transition";class pt extends I.Evented{constructor(q,ce){super(),this._transitionable=new I.Transitionable(ht),this.set(q),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=ce}get(){return this._transitionable.serialize()}set(q){for(const ce in q){const Te=q[ce];I.endsWith(ce,it)?this._transitionable.setTransition(ce.slice(0,-it.length),Te):this._transitionable.setValue(ce,Te)}}updateTransitions(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(q){this.properties=this._transitioning.possiblyEvaluate(q)}}function vt(be,q,ce,Te){const Ie=I.smoothstep(45,65,ce),[Re,Be]=ut(be,Te),Ue=I.length(q);let He=1-Math.min(1,Math.exp((Ue-Re)/(Be-Re)*-6));return He*=He*He,He=Math.min(1,1.00747*He),He*Ie*be.alpha}function ut(be,q){const ce=.5/Math.tan(.5*q);return[be.range[0]+ce,be.range[1]+ce]}const Nt=new I.Properties({range:new I.DataConstantProperty(I.spec.fog.range),color:new I.DataConstantProperty(I.spec.fog.color),"high-color":new I.DataConstantProperty(I.spec.fog["high-color"]),"space-color":new I.DataConstantProperty(I.spec.fog["space-color"]),"horizon-blend":new I.DataConstantProperty(I.spec.fog["horizon-blend"]),"star-intensity":new I.DataConstantProperty(I.spec.fog["star-intensity"])}),at="-transition";class Mt extends I.Evented{constructor(q,ce){super(),this._transitionable=new I.Transitionable(Nt),this.set(q),this._transitioning=this._transitionable.untransitioned(),this._transform=ce}get state(){const q=this._transform,ce=q.projection.name==="globe",Te=I.globeToMercatorTransition(q.zoom),Ie=this.properties.get("range"),Re=[.5,3];return{range:ce?[I.number(Re[0],Ie[0],Te),I.number(Re[1],Ie[1],Te)]:Ie,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(q,ce={}){if(!this._validate(I.validateFog,q,ce)){for(const Te of Object.keys(I.spec.fog))q&&q[Te]===void 0&&(q[Te]=I.spec.fog[Te].default);for(const Te in q){const Ie=q[Te];I.endsWith(Te,at)?this._transitionable.setTransition(Te.slice(0,-at.length),Ie):this._transitionable.setValue(Te,Ie)}}}getOpacity(q){if(!this._transform.projection.supportsFog)return 0;const ce=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:I.smoothstep(45,65,q))*ce.a}getOpacityAtLatLng(q,ce){return this._transform.projection.supportsFog?function(Te,Ie,Re){const Be=I.MercatorCoordinate.fromLngLat(Ie),Ue=Re.elevation?Re.elevation.getAtPointOrZero(Be):0,He=[Be.x,Be.y,Ue];return I.transformMat4(He,He,Re.mercatorFogMatrix),vt(Te,He,Re.pitch,Re._fov)}(this.state,q,ce):0}getFovAdjustedRange(q){return this._transform.projection.supportsFog?ut(this.state,q):[0,1]}updateTransitions(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(q){this.properties=this._transitioning.possiblyEvaluate(q)}_validate(q,ce,Te){return(!Te||Te.validate!==!1)&&I.emitValidationErrors(this,q.call(I.validateStyle,I.extend({value:ce,style:{glyphs:!0,sprite:!0},styleSpec:I.spec})))}}class nn{constructor(q,ce){this.workerPool=q,this.actors=[],this.currentActor=0,this.id=I.uniqueId();const Te=this.workerPool.acquire(this.id);for(let Ie=0;Ie<Te.length;Ie++){const Re=new nn.Actor(Te[Ie],ce,this.id);Re.name=`Worker ${Ie}`,this.actors.push(Re)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(q,ce,Te){I.asyncAll(this.actors,(Ie,Re)=>{Ie.send(q,ce,Re)},Te=Te||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(q=>{q.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Tn(be,q,ce){return q*(I.EXTENT/(be.tileSize*Math.pow(2,ce-be.tileID.overscaledZ)))}nn.Actor=I.Actor;class Jt{constructor(q,ce,Te,Ie){this.screenBounds=q,this.cameraPoint=ce,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=Te,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Ie)}static createFromScreenPoints(q,ce){let Te,Ie;if(q instanceof I.pointGeometry||typeof q[0]=="number"){const Re=I.pointGeometry.convert(q);Te=[I.pointGeometry.convert(q)],Ie=ce.isPointAboveHorizon(Re)}else{const Re=I.pointGeometry.convert(q[0]),Be=I.pointGeometry.convert(q[1]);Te=[Re,Be],Ie=I.polygonizeBounds(Re,Be).every(Ue=>ce.isPointAboveHorizon(Ue))}return new Jt(Te,ce.getCameraPoint(),Ie,ce)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(q){return I.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],q)}bufferedCameraGeometry(q){const ce=this.screenBounds[0],Te=this.screenBounds.length===1?this.screenBounds[0].add(new I.pointGeometry(1,1)):this.screenBounds[1],Ie=I.polygonizeBounds(ce,Te,0,!1);return this.cameraPoint.y>Te.y&&(this.cameraPoint.x>ce.x&&this.cameraPoint.x<Te.x?Ie.splice(3,0,this.cameraPoint):this.cameraPoint.x>=Te.x?Ie[2]=this.cameraPoint:this.cameraPoint.x<=ce.x&&(Ie[3]=this.cameraPoint)),I.bufferConvexPolygon(Ie,q)}bufferedCameraGeometryGlobe(q){const ce=this.screenBounds[0],Te=this.screenBounds.length===1?this.screenBounds[0].add(new I.pointGeometry(1,1)):this.screenBounds[1],Ie=I.polygonizeBounds(ce,Te,q),Re=this.cameraPoint.clone();switch(3*((Re.y>ce.y)+(Re.y>Te.y))+((Re.x>ce.x)+(Re.x>Te.x))){case 0:Ie[0]=Re,Ie[4]=Re.clone();break;case 1:Ie.splice(1,0,Re);break;case 2:Ie[1]=Re;break;case 3:Ie.splice(4,0,Re);break;case 5:Ie.splice(2,0,Re);break;case 6:Ie[3]=Re;break;case 7:Ie.splice(3,0,Re);break;case 8:Ie[2]=Re}return Ie}containsTile(q,ce,Te,Ie=0){const Re=q.queryPadding/ce._pixelsPerMercatorPixel+1,Be=Te?this._bufferedCameraMercator(Re,ce):this._bufferedScreenMercator(Re,ce);let Ue=q.tileID.wrap+(Be.unwrapped?Ie:0);const He=Be.polygon.map(Ct=>I.getTilePoint(q.tileTransform,Ct,Ue));if(!I.polygonIntersectsBox(He,0,0,I.EXTENT,I.EXTENT))return;Ue=q.tileID.wrap+(this.screenGeometryMercator.unwrapped?Ie:0);const Ye=this.screenGeometryMercator.polygon.map(Ct=>I.getTileVec3(q.tileTransform,Ct,Ue)),et=Ye.map(Ct=>new I.pointGeometry(Ct[0],Ct[1])),dt=ce.getFreeCameraOptions().position||new I.MercatorCoordinate(0,0,0),xt=I.getTileVec3(q.tileTransform,dt,Ue),Pt=Ye.map(Ct=>{const Et=I.sub(Ct,Ct,xt);return I.normalize(Et,Et),new I.Ray(xt,Et)}),kt=Tn(q,1,ce.zoom)*ce._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:et,tilespaceRays:Pt,bufferedTilespaceGeometry:He,bufferedTilespaceBounds:(Tt=I.getBounds(He),Tt.min.x=I.clamp(Tt.min.x,0,I.EXTENT),Tt.min.y=I.clamp(Tt.min.y,0,I.EXTENT),Tt.max.x=I.clamp(Tt.max.x,0,I.EXTENT),Tt.max.y=I.clamp(Tt.max.y,0,I.EXTENT),Tt),tile:q,tileID:q.tileID,pixelToTileUnitsFactor:kt};var Tt}_bufferedScreenMercator(q,ce){const Te=Rt(q);if(this._screenRaycastCache[Te])return this._screenRaycastCache[Te];{let Ie;return Ie=ce.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(q),ce):{polygon:this.bufferedScreenGeometry(q).map(Re=>ce.pointCoordinate3D(Re)),unwrapped:!0},this._screenRaycastCache[Te]=Ie,Ie}}_bufferedCameraMercator(q,ce){const Te=Rt(q);if(this._cameraRaycastCache[Te])return this._cameraRaycastCache[Te];{let Ie;return Ie=ce.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(q),ce):{polygon:this.bufferedCameraGeometry(q).map(Re=>ce.pointCoordinate3D(Re)),unwrapped:!0},this._cameraRaycastCache[Te]=Ie,Ie}}_projectAndResample(q,ce){const Te=function(Re,Be){const Ue=I.multiply([],Be.pixelMatrix,Be.globeMatrix),He=[0,-I.GLOBE_RADIUS,0,1],Ye=[0,I.GLOBE_RADIUS,0,1],et=[0,0,0,1];I.transformMat4$1(He,He,Ue),I.transformMat4$1(Ye,Ye,Ue),I.transformMat4$1(et,et,Ue);const dt=new I.pointGeometry(He[0]/He[3],He[1]/He[3]),xt=new I.pointGeometry(Ye[0]/Ye[3],Ye[1]/Ye[3]),Pt=I.polygonContainsPoint(Re,dt)&&He[3]<et[3],kt=I.polygonContainsPoint(Re,xt)&&Ye[3]<et[3];if(!Pt&&!kt)return null;const Tt=function(Xt,Wt,sn){for(let _n=1;_n<Xt.length;_n++){const qn=Vt(Wt.pointCoordinate3D(Xt[_n-1]).x),dn=Vt(Wt.pointCoordinate3D(Xt[_n]).x);if(sn<0){if(qn<dn)return{idx:_n,t:-qn/(dn-1-qn)}}else if(dn<qn)return{idx:_n,t:(1-qn)/(dn+1-qn)}}return null}(Re,Be,Pt?-1:1);if(!Tt)return null;const{idx:Ct,t:Et}=Tt;let zt=Ct>1?on(Re.slice(0,Ct),Be):[],Ot=Ct<Re.length?on(Re.slice(Ct),Be):[];zt=zt.map(Xt=>new I.pointGeometry(Vt(Xt.x),Xt.y)),Ot=Ot.map(Xt=>new I.pointGeometry(Vt(Xt.x),Xt.y));const Qt=[...zt];Qt.length===0&&Qt.push(Ot[Ot.length-1]);const Kt=I.number(Qt[Qt.length-1].y,(Ot.length===0?zt[0]:Ot[0]).y,Et);let Gt;return Gt=Pt?[new I.pointGeometry(0,Kt),new I.pointGeometry(0,0),new I.pointGeometry(1,0),new I.pointGeometry(1,Kt)]:[new I.pointGeometry(1,Kt),new I.pointGeometry(1,1),new I.pointGeometry(0,1),new I.pointGeometry(0,Kt)],Qt.push(...Gt),Ot.length===0?Qt.push(zt[0]):Qt.push(...Ot),{polygon:Qt.map(Xt=>new I.MercatorCoordinate(Xt.x,Xt.y)),unwrapped:!1}}(q,ce);if(Te)return Te;const Ie=function(Re,Be){let Ue=!1,He=-1/0,Ye=0;for(let dt=0;dt<Re.length-1;dt++)Re[dt].x>He&&(He=Re[dt].x,Ye=dt);for(let dt=0;dt<Re.length-1;dt++){const xt=(Ye+dt)%(Re.length-1),Pt=Re[xt],kt=Re[xt+1];Math.abs(Pt.x-kt.x)>.5&&(Pt.x<kt.x?(Pt.x+=1,xt===0&&(Re[Re.length-1].x+=1)):(kt.x+=1,xt+1===Re.length-1&&(Re[0].x+=1)),Ue=!0)}const et=I.mercatorXfromLng(Be.center.lng);return Ue&&et<Math.abs(et-1)&&Re.forEach(dt=>{dt.x-=1}),{polygon:Re,unwrapped:Ue}}(on(q,ce).map(Re=>new I.pointGeometry(Vt(Re.x),Re.y)),ce);return{polygon:Ie.polygon.map(Re=>new I.MercatorCoordinate(Re.x,Re.y)),unwrapped:Ie.unwrapped}}}function on(be,q){return I.resample(be,ce=>{const Te=q.pointCoordinate3D(ce);ce.x=Te.x,ce.y=Te.y},1/256)}function Vt(be){return be<0?1+be%1:be%1}function Rt(be){return 100*be|0}function Yt(be,q,ce,Te,Ie){const Re=function(Be,Ue){if(Be)return Ie(Be);if(Ue){const He=I.pick(I.extend(Ue,be),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ue.vector_layers&&(He.vectorLayers=Ue.vector_layers,He.vectorLayerIds=He.vectorLayers.map(Ye=>Ye.id)),Ue.language_options&&(He.languageOptions=Ue.language_options),Ue.language&&Ue.language[Ue.id]&&(He.language=Ue.language[Ue.id]),Ue.worldview_options&&(He.worldviewOptions=Ue.worldview_options),Ue.worldview?He.worldview=Ue.worldview[Ue.id]:Ue.worldview_default&&(He.worldview=Ue.worldview_default),He.tiles=q.canonicalizeTileset(He,be.url),Ie(null,He)}};return be.url?I.getJSON(q.transformRequest(q.normalizeSourceURL(be.url,null,ce,Te),I.ResourceType.Source),Re):I.exported.frame(()=>Re(null,be))}class un{constructor(q,ce,Te){this.bounds=I.LngLatBounds.convert(this.validateBounds(q)),this.minzoom=ce||0,this.maxzoom=Te||24}validateBounds(q){return Array.isArray(q)&&q.length===4?[Math.max(-180,q[0]),Math.max(-90,q[1]),Math.min(180,q[2]),Math.min(90,q[3])]:[-180,-90,180,90]}contains(q){const ce=Math.pow(2,q.z),Te=Math.floor(I.mercatorXfromLng(this.bounds.getWest())*ce),Ie=Math.floor(I.mercatorYfromLat(this.bounds.getNorth())*ce),Re=Math.ceil(I.mercatorXfromLng(this.bounds.getEast())*ce),Be=Math.ceil(I.mercatorYfromLat(this.bounds.getSouth())*ce);return q.x>=Te&&q.x<Re&&q.y>=Ie&&q.y<Be}}class yn{constructor(q,ce,Te){this.context=q;const Ie=q.gl;this.buffer=Ie.createBuffer(),this.dynamicDraw=Boolean(Te),this.context.unbindVAO(),q.bindElementBuffer.set(this.buffer),Ie.bufferData(Ie.ELEMENT_ARRAY_BUFFER,ce.arrayBuffer,this.dynamicDraw?Ie.DYNAMIC_DRAW:Ie.STATIC_DRAW),this.dynamicDraw||ce.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(q){const ce=this.context.gl;this.context.unbindVAO(),this.bind(),ce.bufferSubData(ce.ELEMENT_ARRAY_BUFFER,0,q.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const In={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class It{constructor(q,ce,Te,Ie){this.length=ce.length,this.attributes=Te,this.itemSize=ce.bytesPerElement,this.dynamicDraw=Ie,this.context=q;const Re=q.gl;this.buffer=Re.createBuffer(),q.bindVertexBuffer.set(this.buffer),Re.bufferData(Re.ARRAY_BUFFER,ce.arrayBuffer,this.dynamicDraw?Re.DYNAMIC_DRAW:Re.STATIC_DRAW),this.dynamicDraw||ce.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(q){const ce=this.context.gl;this.bind(),ce.bufferSubData(ce.ARRAY_BUFFER,0,q.arrayBuffer)}enableAttributes(q,ce){for(let Te=0;Te<this.attributes.length;Te++){const Ie=ce.attributes[this.attributes[Te].name];Ie!==void 0&&q.enableVertexAttribArray(Ie)}}setVertexAttribPointers(q,ce,Te){for(let Ie=0;Ie<this.attributes.length;Ie++){const Re=this.attributes[Ie],Be=ce.attributes[Re.name];Be!==void 0&&q.vertexAttribPointer(Be,Re.components,q[In[Re.type]],!1,this.itemSize,Re.offset+this.itemSize*(Te||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class $t{constructor(q){this.gl=q.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(q){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class an extends $t{getDefault(){return I.Color.transparent}set(q){const ce=this.current;(q.r!==ce.r||q.g!==ce.g||q.b!==ce.b||q.a!==ce.a||this.dirty)&&(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)}}class xn extends $t{getDefault(){return 1}set(q){(q!==this.current||this.dirty)&&(this.gl.clearDepth(q),this.current=q,this.dirty=!1)}}class En extends $t{getDefault(){return 0}set(q){(q!==this.current||this.dirty)&&(this.gl.clearStencil(q),this.current=q,this.dirty=!1)}}class $n extends $t{getDefault(){return[!0,!0,!0,!0]}set(q){const ce=this.current;(q[0]!==ce[0]||q[1]!==ce[1]||q[2]!==ce[2]||q[3]!==ce[3]||this.dirty)&&(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)}}class zn extends $t{getDefault(){return!0}set(q){(q!==this.current||this.dirty)&&(this.gl.depthMask(q),this.current=q,this.dirty=!1)}}class vn extends $t{getDefault(){return 255}set(q){(q!==this.current||this.dirty)&&(this.gl.stencilMask(q),this.current=q,this.dirty=!1)}}class wn extends $t{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(q){const ce=this.current;(q.func!==ce.func||q.ref!==ce.ref||q.mask!==ce.mask||this.dirty)&&(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)}}class Sn extends $t{getDefault(){const q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]}set(q){const ce=this.current;(q[0]!==ce[0]||q[1]!==ce[1]||q[2]!==ce[2]||this.dirty)&&(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)}}class Jn extends $t{getDefault(){return!1}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;q?ce.enable(ce.STENCIL_TEST):ce.disable(ce.STENCIL_TEST),this.current=q,this.dirty=!1}}class tr extends $t{getDefault(){return[0,1]}set(q){const ce=this.current;(q[0]!==ce[0]||q[1]!==ce[1]||this.dirty)&&(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)}}class pr extends $t{getDefault(){return!1}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;q?ce.enable(ce.DEPTH_TEST):ce.disable(ce.DEPTH_TEST),this.current=q,this.dirty=!1}}class Xn extends $t{getDefault(){return this.gl.LESS}set(q){(q!==this.current||this.dirty)&&(this.gl.depthFunc(q),this.current=q,this.dirty=!1)}}class Gn extends $t{getDefault(){return!1}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;q?ce.enable(ce.BLEND):ce.disable(ce.BLEND),this.current=q,this.dirty=!1}}class cn extends $t{getDefault(){const q=this.gl;return[q.ONE,q.ZERO]}set(q){const ce=this.current;(q[0]!==ce[0]||q[1]!==ce[1]||this.dirty)&&(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)}}class gn extends $t{getDefault(){return I.Color.transparent}set(q){const ce=this.current;(q.r!==ce.r||q.g!==ce.g||q.b!==ce.b||q.a!==ce.a||this.dirty)&&(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)}}class On extends $t{getDefault(){return this.gl.FUNC_ADD}set(q){(q!==this.current||this.dirty)&&(this.gl.blendEquation(q),this.current=q,this.dirty=!1)}}class Kn extends $t{getDefault(){return!1}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;q?ce.enable(ce.CULL_FACE):ce.disable(ce.CULL_FACE),this.current=q,this.dirty=!1}}class _r extends $t{getDefault(){return this.gl.BACK}set(q){(q!==this.current||this.dirty)&&(this.gl.cullFace(q),this.current=q,this.dirty=!1)}}class kr extends $t{getDefault(){return this.gl.CCW}set(q){(q!==this.current||this.dirty)&&(this.gl.frontFace(q),this.current=q,this.dirty=!1)}}class Dr extends $t{getDefault(){return null}set(q){(q!==this.current||this.dirty)&&(this.gl.useProgram(q),this.current=q,this.dirty=!1)}}class xr extends $t{getDefault(){return this.gl.TEXTURE0}set(q){(q!==this.current||this.dirty)&&(this.gl.activeTexture(q),this.current=q,this.dirty=!1)}}class Lr extends $t{getDefault(){const q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]}set(q){const ce=this.current;(q[0]!==ce[0]||q[1]!==ce[1]||q[2]!==ce[2]||q[3]!==ce[3]||this.dirty)&&(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)}}class Br extends $t{getDefault(){return null}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.bindFramebuffer(ce.FRAMEBUFFER,q),this.current=q,this.dirty=!1}}class Vr extends $t{getDefault(){return null}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.bindRenderbuffer(ce.RENDERBUFFER,q),this.current=q,this.dirty=!1}}class jr extends $t{getDefault(){return null}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.bindTexture(ce.TEXTURE_2D,q),this.current=q,this.dirty=!1}}class Oi extends $t{getDefault(){return null}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.bindBuffer(ce.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}}class Di extends $t{getDefault(){return null}set(q){const ce=this.gl;ce.bindBuffer(ce.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1}}class Ai extends $t{constructor(q){super(q),this.vao=q.extVertexArrayObject}getDefault(){return null}set(q){this.vao&&(q!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)}}class Cr extends $t{getDefault(){return 4}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.pixelStorei(ce.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}}class Fo extends $t{getDefault(){return!1}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}}class Ea extends $t{getDefault(){return!1}set(q){if(q===this.current&&!this.dirty)return;const ce=this.gl;ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}}class vi extends $t{constructor(q,ce){super(q),this.context=q,this.parent=ce}getDefault(){return null}}class sa extends vi{setDirty(){this.dirty=!0}set(q){if(q===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const ce=this.gl;ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}}class Lt extends vi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(q){if(q===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const ce=this.gl;ce.framebufferRenderbuffer(ce.FRAMEBUFFER,this.attachment(),ce.RENDERBUFFER,q),this.current=q,this.dirty=!1}}class ct extends Lt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class mt{constructor(q,ce,Te,Ie){this.context=q,this.width=ce,this.height=Te;const Re=this.framebuffer=q.gl.createFramebuffer();this.colorAttachment=new sa(q,Re),Ie&&(this.depthAttachment=new Lt(q,Re))}destroy(){const q=this.context.gl,ce=this.colorAttachment.get();if(ce&&q.deleteTexture(ce),this.depthAttachment){const Te=this.depthAttachment.get();Te&&q.deleteRenderbuffer(Te)}q.deleteFramebuffer(this.framebuffer)}}class Dt{constructor(q){this.gl=q,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new an(this),this.clearDepth=new xn(this),this.clearStencil=new En(this),this.colorMask=new $n(this),this.depthMask=new zn(this),this.stencilMask=new vn(this),this.stencilFunc=new wn(this),this.stencilOp=new Sn(this),this.stencilTest=new Jn(this),this.depthRange=new tr(this),this.depthTest=new pr(this),this.depthFunc=new Xn(this),this.blend=new Gn(this),this.blendFunc=new cn(this),this.blendColor=new gn(this),this.blendEquation=new On(this),this.cullFace=new Kn(this),this.cullFaceSide=new _r(this),this.frontFace=new kr(this),this.program=new Dr(this),this.activeTexture=new xr(this),this.viewport=new Lr(this),this.bindFramebuffer=new Br(this),this.bindRenderbuffer=new Vr(this),this.bindTexture=new jr(this),this.bindVertexBuffer=new Oi(this),this.bindElementBuffer=new Di(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ai(this),this.pixelStoreUnpack=new Cr(this),this.pixelStoreUnpackPremultiplyAlpha=new Fo(this),this.pixelStoreUnpackFlipY=new Ea(this),this.extTextureFilterAnisotropic=q.getExtension("EXT_texture_filter_anisotropic")||q.getExtension("MOZ_EXT_texture_filter_anisotropic")||q.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=q.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=q.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(q.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=q.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=q.getExtension("OES_standard_derivatives"),this.extTimerQuery=q.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=q.getParameter(q.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(q,ce){return new yn(this,q,ce)}createVertexBuffer(q,ce,Te){return new It(this,q,ce,Te)}createRenderbuffer(q,ce,Te){const Ie=this.gl,Re=Ie.createRenderbuffer();return this.bindRenderbuffer.set(Re),Ie.renderbufferStorage(Ie.RENDERBUFFER,q,ce,Te),this.bindRenderbuffer.set(null),Re}createFramebuffer(q,ce,Te){return new mt(this,q,ce,Te)}clear({color:q,depth:ce,stencil:Te}){const Ie=this.gl;let Re=0;q&&(Re|=Ie.COLOR_BUFFER_BIT,this.clearColor.set(q),this.colorMask.set([!0,!0,!0,!0])),ce!==void 0&&(Re|=Ie.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(ce),this.depthMask.set(!0)),Te!==void 0&&(Re|=Ie.STENCIL_BUFFER_BIT,this.clearStencil.set(Te),this.stencilMask.set(255)),Ie.clear(Re)}setCullFace(q){q.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(q.mode),this.frontFace.set(q.frontFace))}setDepthMode(q){q.func!==this.gl.ALWAYS||q.mask?(this.depthTest.set(!0),this.depthFunc.set(q.func),this.depthMask.set(q.mask),this.depthRange.set(q.range)):this.depthTest.set(!1)}setStencilMode(q){q.test.func!==this.gl.ALWAYS||q.mask?(this.stencilTest.set(!0),this.stencilMask.set(q.mask),this.stencilOp.set([q.fail,q.depthFail,q.pass]),this.stencilFunc.set({func:q.test.func,ref:q.ref,mask:q.test.mask})):this.stencilTest.set(!1)}setColorMode(q){_e(q.blendFunction,I.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(q.blendFunction),this.blendColor.set(q.blendColor)),this.colorMask.set(q.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ut extends I.Evented{constructor(q,ce,Te,Ie){super(),this.id=q,this.dispatcher=Te,this.setEventedParent(Ie),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=I.extend({type:"raster"},ce),I.extend(this,I.pick(ce,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new I.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Yt(this._options,this.map._requestManager,null,null,(q,ce)=>{this._tileJSONRequest=null,this._loaded=!0,q?this.fire(new I.ErrorEvent(q)):ce&&(I.extend(this,ce),ce.bounds&&(this.tileBounds=new un(ce.bounds,this.minzoom,this.maxzoom)),I.postTurnstileEvent(ce.tiles),this.fire(new I.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new I.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(q){this.map=q,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return I.extend({},this._options)}hasTile(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)}loadTile(q,ce){const Te=I.exported.devicePixelRatio>=2,Ie=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),Te,this.tileSize);q.request=I.getImage(this.map._requestManager.transformRequest(Ie,I.ResourceType.Tile),(Re,Be,Ue,He)=>(delete q.request,q.aborted?(q.state="unloaded",ce(null)):Re?(q.state="errored",ce(Re)):Be?(this.map._refreshExpiredTiles&&q.setExpiryData({cacheControl:Ue,expires:He}),q.setTexture(Be,this.map.painter),q.state="loaded",I.cacheEntryPossiblyAdded(this.dispatcher),void ce(null)):ce(null)))}static loadTileData(q,ce,Te){q.setTexture(ce,Te)}static unloadTileData(q,ce){q.texture&&ce.saveTileTexture(q.texture)}abortTile(q,ce){q.request&&(q.request.cancel(),delete q.request),ce()}unloadTile(q,ce){q.texture&&this.map.painter.saveTileTexture(q.texture),ce()}hasTransition(){return!1}}let tn;function pn(be,q,ce,Te,Ie,Re,Be,Ue){const He=[be,ce,Ie,q,Te,Re,1,1,1],Ye=[Be,Ue,1],et=I.adjoint([],He),[dt,xt,Pt]=I.transformMat3(Ye,Ye,I.transpose(et,et));return I.multiply$1(He,[dt,0,0,0,xt,0,0,0,Pt],He)}class hn extends I.Evented{constructor(q,ce,Te,Ie){super(),this.id=q,this.dispatcher=Te,this.coordinates=ce.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ie),this.options=ce}load(q,ce){this._loaded=ce||!1,this.fire(new I.Event("dataloading",{dataType:"source"})),this.url=this.options.url,I.getImage(this.map._requestManager.transformRequest(this.url,I.ResourceType.Image),(Te,Ie)=>{if(this._loaded=!0,Te)this.fire(new I.ErrorEvent(Te));else if(Ie){const{HTMLImageElement:Re}=I.window;this.image=Ie instanceof Re?I.exported.getImageData(Ie):Ie,this.width=this.image.width,this.height=this.image.height,q&&(this.coordinates=q),this._finishLoading()}})}loaded(){return this._loaded}updateImage(q){return this.image&&q.url?(this.options.url=q.url,this.load(q.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new I.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(q){this.map=q,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(q){this.coordinates=q,this._boundsArray=void 0;const ce=q.map(I.MercatorCoordinate.fromLngLat);return this.tileID=function(Te){let Ie=1/0,Re=1/0,Be=-1/0,Ue=-1/0;for(const dt of Te)Ie=Math.min(Ie,dt.x),Re=Math.min(Re,dt.y),Be=Math.max(Be,dt.x),Ue=Math.max(Ue,dt.y);const He=Math.max(Be-Ie,Ue-Re),Ye=Math.max(0,Math.floor(-Math.log(He)/Math.LN2)),et=Math.pow(2,Ye);return new I.CanonicalTileID(Ye,Math.floor((Ie+Be)/2*et),Math.floor((Re+Ue)/2*et))}(ce),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new I.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(q){for(const He in this.tiles){const Ye=this.tiles[He];Ye.state!=="loaded"&&(Ye.state="loaded",Ye.texture=this.texture)}if(this._boundsArray)return;const ce=I.tileTransform(this.tileID,this.map.transform.projection),[Te,Ie,Re,Be]=this.coordinates.map(He=>{const Ye=ce.projection.project(He[0],He[1]);return I.getTilePoint(ce,Ye)._round()});this.perspectiveTransform=function(He,Ye,et,dt,xt,Pt,kt,Tt,Ct,Et){const zt=pn(0,0,He,0,0,Ye,He,Ye),Ot=pn(et,dt,xt,Pt,kt,Tt,Ct,Et);return I.multiply$1(Ot,I.adjoint(zt,zt),Ot),[Ot[6]/Ot[8]*He/I.EXTENT,Ot[7]/Ot[8]*Ye/I.EXTENT]}(this.width,this.height,Te.x,Te.y,Ie.x,Ie.y,Be.x,Be.y,Re.x,Re.y);const Ue=this._boundsArray=new I.StructArrayLayout4i8;Ue.emplaceBack(Te.x,Te.y,0,0),Ue.emplaceBack(Ie.x,Ie.y,I.EXTENT,0),Ue.emplaceBack(Be.x,Be.y,0,I.EXTENT),Ue.emplaceBack(Re.x,Re.y,I.EXTENT,I.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=q.createVertexBuffer(Ue,I.boundsAttributes.members),this.boundsSegments=I.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const q=this.map.painter.context,ce=q.gl;this.texture?this.texture.update(this.image):(this.texture=new I.Texture(q,this.image,ce.RGBA),this.texture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)),this._prepareData(q)}loadTile(q,ce){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},ce(null)):(q.state="errored",ce(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const rn={vector:class extends I.Evented{constructor(be,q,ce,Te){if(super(),this.id=be,this.dispatcher=ce,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,I.extend(this,I.pick(q,["url","scheme","tileSize","promoteId"])),this._options=I.extend({type:"vector"},q),this._collectResourceTiming=q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Te),this._tileWorkers={},this._deduped=new I.DedupedRequest}load(be){this._loaded=!1,this.fire(new I.Event("dataloading",{dataType:"source"}));const q=this.language||this.map._language,ce=this.worldview||this.map._worldview;this._tileJSONRequest=Yt(this._options,this.map._requestManager,q,ce,(Te,Ie)=>{this._tileJSONRequest=null,this._loaded=!0,Te?(q&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${q}`),ce&&ce.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${ce}`),this.fire(new I.ErrorEvent(Te))):Ie&&(I.extend(this,Ie),Ie.bounds&&(this.tileBounds=new un(Ie.bounds,this.minzoom,this.maxzoom)),I.postTurnstileEvent(Ie.tiles,this.map._requestManager._customAccessToken),this.fire(new I.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new I.Event("data",{dataType:"source",sourceDataType:"content"}))),be&&be(Te)})}loaded(){return this._loaded}hasTile(be){return!this.tileBounds||this.tileBounds.contains(be.canonical)}onAdd(be){this.map=be,this.load()}setSourceProperty(be){this._tileJSONRequest&&this._tileJSONRequest.cancel(),be(),this.load(()=>{const q=this.map.style._getSourceCaches(this.id);for(const ce of q)ce.clearTiles()})}setTiles(be){return this.setSourceProperty(()=>{this._options.tiles=be}),this}setUrl(be){return this.setSourceProperty(()=>{this.url=be,this._options.url=be}),this}_setLanguage(be){return be===this.language||this.setSourceProperty(()=>{this.language=be}),this}_setWorldview(be){return be===this.worldview?this:this.worldviewOptions&&be&&!this.worldviewOptions[be]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${be}".`),this):(this.setSourceProperty(()=>{this.worldview=be}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return I.extend({},this._options)}loadTile(be,q){const ce=this.map._requestManager.normalizeTileURL(be.tileID.canonical.url(this.tiles,this.scheme)),Te={request:this.map._requestManager.transformRequest(ce,I.ResourceType.Tile),data:void 0,uid:be.uid,tileID:be.tileID,tileZoom:be.tileZoom,zoom:be.tileID.overscaledZ,tileSize:this.tileSize*be.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:I.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:be.isSymbolTile};if(Te.request.collectResourceTiming=this._collectResourceTiming,be.actor&&be.state!=="expired")be.state==="loading"?be.reloadCallback=q:be.request=be.actor.send("reloadTile",Te,Ie.bind(this));else if(be.actor=this._tileWorkers[ce]=this._tileWorkers[ce]||this.dispatcher.getActor(),this.dispatcher.ready)be.request=be.actor.send("loadTile",Te,Ie.bind(this),void 0,!0);else{const Re=I.loadVectorTile.call({deduped:this._deduped},Te,(Be,Ue)=>{Be||!Ue?Ie.call(this,Be):(Te.data={cacheControl:Ue.cacheControl,expires:Ue.expires,rawData:Ue.rawData.slice(0)},be.actor&&be.actor.send("loadTile",Te,Ie.bind(this),void 0,!0))},!0);be.request={cancel:Re}}function Ie(Re,Be){return delete be.request,be.aborted?q(null):Re&&Re.status!==404?q(Re):(Be&&Be.resourceTiming&&(be.resourceTiming=Be.resourceTiming),this.map._refreshExpiredTiles&&Be&&be.setExpiryData(Be),be.loadVectorData(Be,this.map.painter),I.cacheEntryPossiblyAdded(this.dispatcher),q(null),void(be.reloadCallback&&(this.loadTile(be,be.reloadCallback),be.reloadCallback=null)))}}abortTile(be){be.request&&(be.request.cancel(),delete be.request),be.actor&&be.actor.send("abortTile",{uid:be.uid,type:this.type,source:this.id})}unloadTile(be){be.unloadVectorData(),be.actor&&be.actor.send("removeTile",{uid:be.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:Ut,"raster-dem":class extends Ut{constructor(be,q,ce,Te){super(be,q,ce,Te),this.type="raster-dem",this.maxzoom=22,this._options=I.extend({type:"raster-dem"},q),this.encoding=q.encoding||"mapbox"}loadTile(be,q){const ce=this.map._requestManager.normalizeTileURL(be.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function Te(Ie,Re){Ie&&(be.state="errored",q(Ie)),Re&&(be.dem=Re,be.dem.onDeserialize(),be.needsHillshadePrepare=!0,be.needsDEMTextureUpload=!0,be.state="loaded",q(null))}be.request=I.getImage(this.map._requestManager.transformRequest(ce,I.ResourceType.Tile),function(Ie,Re,Be,Ue){if(delete be.request,be.aborted)be.state="unloaded",q(null);else if(Ie)be.state="errored",q(Ie);else if(Re){this.map._refreshExpiredTiles&&be.setExpiryData({cacheControl:Be,expires:Ue});const He=I.window.ImageBitmap&&Re instanceof I.window.ImageBitmap&&(tn==null&&(tn=I.window.OffscreenCanvas&&new I.window.OffscreenCanvas(1,1).getContext("2d")&&typeof I.window.createImageBitmap=="function"),tn),Ye=1-(Re.width-I.prevPowerOfTwo(Re.width))/2;Ye<1||be.neighboringTiles||(be.neighboringTiles=this._getNeighboringTiles(be.tileID));const et=He?Re:I.exported.getImageData(Re,Ye),dt={uid:be.uid,coord:be.tileID,source:this.id,rawImageData:et,encoding:this.encoding,padding:Ye};be.actor&&be.state!=="expired"||(be.actor=this.dispatcher.getActor(),be.actor.send("loadDEMTile",dt,Te.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(be){const q=be.canonical,ce=Math.pow(2,q.z),Te=(q.x-1+ce)%ce,Ie=q.x===0?be.wrap-1:be.wrap,Re=(q.x+1+ce)%ce,Be=q.x+1===ce?be.wrap+1:be.wrap,Ue={};return Ue[new I.OverscaledTileID(be.overscaledZ,Ie,q.z,Te,q.y).key]={backfilled:!1},Ue[new I.OverscaledTileID(be.overscaledZ,Be,q.z,Re,q.y).key]={backfilled:!1},q.y>0&&(Ue[new I.OverscaledTileID(be.overscaledZ,Ie,q.z,Te,q.y-1).key]={backfilled:!1},Ue[new I.OverscaledTileID(be.overscaledZ,be.wrap,q.z,q.x,q.y-1).key]={backfilled:!1},Ue[new I.OverscaledTileID(be.overscaledZ,Be,q.z,Re,q.y-1).key]={backfilled:!1}),q.y+1<ce&&(Ue[new I.OverscaledTileID(be.overscaledZ,Ie,q.z,Te,q.y+1).key]={backfilled:!1},Ue[new I.OverscaledTileID(be.overscaledZ,be.wrap,q.z,q.x,q.y+1).key]={backfilled:!1},Ue[new I.OverscaledTileID(be.overscaledZ,Be,q.z,Re,q.y+1).key]={backfilled:!1}),Ue}unloadTile(be){be.demTexture&&this.map.painter.saveTileTexture(be.demTexture),be.fbo&&(be.fbo.destroy(),delete be.fbo),be.dem&&delete be.dem,delete be.neighboringTiles,be.state="unloaded"}},geojson:class extends I.Evented{constructor(be,q,ce,Te){super(),this.id=be,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=ce.getActor(),this.setEventedParent(Te),this._data=q.data,this._options=I.extend({},q),this._collectResourceTiming=q.collectResourceTiming,q.maxzoom!==void 0&&(this.maxzoom=q.maxzoom),q.type&&(this.type=q.type),q.attribution&&(this.attribution=q.attribution),this.promoteId=q.promoteId;const Ie=I.EXTENT/this.tileSize;this.workerOptions=I.extend({source:this.id,cluster:q.cluster||!1,geojsonVtOptions:{buffer:(q.buffer!==void 0?q.buffer:128)*Ie,tolerance:(q.tolerance!==void 0?q.tolerance:.375)*Ie,extent:I.EXTENT,maxZoom:this.maxzoom,lineMetrics:q.lineMetrics||!1,generateId:q.generateId||!1},superclusterOptions:{maxZoom:q.clusterMaxZoom!==void 0?q.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,q.clusterMinPoints||2),extent:I.EXTENT,radius:(q.clusterRadius!==void 0?q.clusterRadius:50)*Ie,log:!1,generateId:q.generateId||!1},clusterProperties:q.clusterProperties,filter:q.filter},q.workerOptions)}onAdd(be){this.map=be,this.setData(this._data)}setData(be){return this._data=be,this._updateWorkerData(),this}getClusterExpansionZoom(be,q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:be,source:this.id},q),this}getClusterChildren(be,q){return this.actor.send("geojson.getClusterChildren",{clusterId:be,source:this.id},q),this}getClusterLeaves(be,q,ce,Te){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:be,limit:q,offset:ce},Te),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new I.Event("dataloading",{dataType:"source"})),this._loaded=!1;const be=I.extend({},this.workerOptions),q=this._data;typeof q=="string"?(be.request=this.map._requestManager.transformRequest(I.exported.resolveURL(q),I.ResourceType.Source),be.request.collectResourceTiming=this._collectResourceTiming):be.data=JSON.stringify(q),this._pendingLoad=this.actor.send(`${this.type}.loadData`,be,(ce,Te)=>{if(this._loaded=!0,this._pendingLoad=null,ce)this.fire(new I.ErrorEvent(ce));else{const Ie={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&Te&&Te.resourceTiming&&Te.resourceTiming[this.id]&&(Ie.resourceTiming=Te.resourceTiming[this.id]),this.fire(new I.Event("data",Ie)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(be,q){const ce=be.actor?"reloadTile":"loadTile";be.actor=this.actor,be.request=this.actor.send(ce,{type:this.type,uid:be.uid,tileID:be.tileID,tileZoom:be.tileZoom,zoom:be.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:I.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(Te,Ie)=>(delete be.request,be.unloadVectorData(),be.aborted?q(null):Te?q(Te):(be.loadVectorData(Ie,this.map.painter,ce==="reloadTile"),q(null))),void 0,ce==="loadTile")}abortTile(be){be.request&&(be.request.cancel(),delete be.request),be.aborted=!0}unloadTile(be){be.unloadVectorData(),this.actor.send("removeTile",{uid:be.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return I.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends hn{constructor(be,q,ce,Te){super(be,q,ce,Te),this.roundZoom=!0,this.type="video",this.options=q}load(){this._loaded=!1;const be=this.options;this.urls=[];for(const q of be.urls)this.urls.push(this.map._requestManager.transformRequest(q,I.ResourceType.Source).url);I.getVideo(this.urls,(q,ce)=>{this._loaded=!0,q?this.fire(new I.ErrorEvent(q)):ce&&(this.video=ce,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(be){if(this.video){const q=this.video.seekable;be<q.start(0)||be>q.end(0)?this.fire(new I.ErrorEvent(new I.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${q.start(0)} and ${q.end(0)}-second mark.`))):this.video.currentTime=be}}getVideo(){return this.video}onAdd(be){this.map||(this.map=be,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const be=this.map.painter.context,q=be.gl;this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new I.Texture(be,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(be)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:hn,canvas:class extends hn{constructor(be,q,ce,Te){super(be,q,ce,Te),q.coordinates?Array.isArray(q.coordinates)&&q.coordinates.length===4&&!q.coordinates.some(Ie=>!Array.isArray(Ie)||Ie.length!==2||Ie.some(Re=>typeof Re!="number"))||this.fire(new I.ErrorEvent(new I.ValidationError(`sources.${be}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new I.ErrorEvent(new I.ValidationError(`sources.${be}`,null,'missing required property "coordinates"'))),q.animate&&typeof q.animate!="boolean"&&this.fire(new I.ErrorEvent(new I.ValidationError(`sources.${be}`,null,'optional "animate" property must be a boolean value'))),q.canvas?typeof q.canvas=="string"||q.canvas instanceof I.window.HTMLCanvasElement||this.fire(new I.ErrorEvent(new I.ValidationError(`sources.${be}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new I.ErrorEvent(new I.ValidationError(`sources.${be}`,null,'missing required property "canvas"'))),this.options=q,this.animate=q.animate===void 0||q.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof I.window.HTMLCanvasElement?this.options.canvas:I.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new I.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(be){this.map=be,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let be=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,be=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,be=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const q=this.map.painter.context;this.texture?(be||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new I.Texture(q,this.canvas,q.gl.RGBA,{premultiply:!0}),this._prepareData(q)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const be of[this.canvas.width,this.canvas.height])if(isNaN(be)||be<=0)return!0;return!1}},custom:class extends I.Evented{constructor(be,q,ce,Te){super(),this.id=be,this.type="custom",this._dataType="raster",this._dispatcher=ce,this._implementation=q,this.setEventedParent(Te),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new I.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new I.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new un(this._implementation.bounds,this.minzoom,this.maxzoom)),q.update=this._update.bind(this),q.coveringTiles=this._coveringTiles.bind(this),I.extend(this,I.pick(q,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return I.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new I.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new I.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(be){this._map=be,this._loaded=!1,this.fire(new I.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(be),this.load()}onRemove(be){this._implementation.onRemove&&this._implementation.onRemove(be)}hasTile(be){if(this._implementation.hasTile){const{x:q,y:ce,z:Te}=be.canonical;return this._implementation.hasTile({x:q,y:ce,z:Te})}return!this.tileBounds||this.tileBounds.contains(be.canonical)}loadTile(be,q){const{x:ce,y:Te,z:Ie}=be.tileID.canonical,Re=new I.window.AbortController,Be=this._implementation.loadTile({x:ce,y:Te,z:Ie},{signal:Re.signal});if(!Be)return this.loadTileData(be,{width:this.tileSize,height:this.tileSize,data:null}),be.state="loaded",q(null);Be.cancel=()=>Re.abort(),be.request=Be.then(function(Ue){return delete be.request,be.aborted?(be.state="unloaded",q(null)):Ue?function(He){return He instanceof I.window.ImageData||He instanceof I.window.ImageBitmap||He instanceof I.window.HTMLCanvasElement}(Ue)?(this.loadTileData(be,Ue),be.state="loaded",void q(null)):(be.state="errored",q(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(be,{width:this.tileSize,height:this.tileSize,data:null}),be.state="loaded",q(null))}.bind(this)).catch(Ue=>{Ue.code!==20&&(be.state="errored",q(Ue))})}loadTileData(be,q){Ut.loadTileData(be,q,this._map.painter)}unloadTileData(be){Ut.unloadTileData(be,this._map.painter)}prepareTile(be){if(!this._implementation.prepareTile)return null;const{x:q,y:ce,z:Te}=be.tileID.canonical,Ie=this._implementation.prepareTile({x:q,y:ce,z:Te});return Ie?(this.loadTileData(be,Ie),be.state="loaded",Ie):null}unloadTile(be,q){if(this.unloadTileData(be),this._implementation.unloadTile){const{x:ce,y:Te,z:Ie}=be.tileID.canonical;this._implementation.unloadTile({x:ce,y:Te,z:Ie})}q()}abortTile(be,q){be.request&&be.request.cancel&&(be.request.cancel(),delete be.request),q()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(be=>({x:be.canonical.x,y:be.canonical.y,z:be.canonical.z}))}_update(){this.fire(new I.Event("data",{dataType:"source",sourceDataType:"content"}))}}},fn=function(be,q,ce,Te){const Ie=new rn[q.type](be,q,ce,Te);if(Ie.id!==be)throw new Error(`Expected Source id to be ${be} instead of ${Ie.id}`);return I.bindAll(["load","abort","unload","serialize","prepare"],Ie),Ie};function Nn(be,q){const ce=I.identity([]);return I.scale(ce,ce,[.5*be.width,.5*-be.height,1]),I.translate(ce,ce,[1,-1,0]),I.multiply(ce,ce,be.calculateProjMatrix(q.toUnwrapped())),Float32Array.from(ce)}function ar(be,q,ce,Te,Ie,Re,Be,Ue=!1){const He=be.tilesIn(Te,Be,Ue);He.sort(br);const Ye=[];for(const dt of He)Ye.push({wrappedTileID:dt.tile.tileID.wrapped().key,queryResults:dt.tile.queryRenderedFeatures(q,ce,be._state,dt,Ie,Re,Nn(be.transform,dt.tile.tileID),Ue)});const et=function(dt){const xt={},Pt={};for(const kt of dt){const Tt=kt.queryResults,Ct=kt.wrappedTileID,Et=Pt[Ct]=Pt[Ct]||{};for(const zt in Tt){const Ot=Tt[zt],Qt=Et[zt]=Et[zt]||{},Kt=xt[zt]=xt[zt]||[];for(const Gt of Ot)Qt[Gt.featureIndex]||(Qt[Gt.featureIndex]=!0,Kt.push(Gt))}}return xt}(Ye);for(const dt in et)et[dt].forEach(xt=>{const Pt=xt.feature,kt=Pt.layer;kt&&kt.type!=="background"&&kt.type!=="sky"&&(Pt.source=kt.source,kt["source-layer"]&&(Pt.sourceLayer=kt["source-layer"]),Pt.state=Pt.id!==void 0?be.getFeatureState(kt["source-layer"],Pt.id):{})});return et}function Hn(be,q){const ce=be.getRenderableIds().map(Re=>be.getTileByID(Re)),Te=[],Ie={};for(let Re=0;Re<ce.length;Re++){const Be=ce[Re],Ue=Be.tileID.canonical.key;Ie[Ue]||(Ie[Ue]=!0,Be.querySourceFeatures(Te,q))}return Te}function br(be,q){const ce=be.tileID,Te=q.tileID;return ce.overscaledZ-Te.overscaledZ||ce.canonical.y-Te.canonical.y||ce.wrap-Te.wrap||ce.canonical.x-Te.canonical.x}function wr(){return us.workerClass!=null?new us.workerClass:new I.window.Worker(us.workerUrl)}const mr="mapboxgl_preloaded_worker_pool";class Er{constructor(){this.active={}}acquire(q){if(!this.workers)for(this.workers=[];this.workers.length<Er.workerCount;)this.workers.push(new wr);return this.active[q]=!0,this.workers.slice()}release(q){delete this.active[q],this.numActive()===0&&(this.workers.forEach(ce=>{ce.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mr]}numActive(){return Object.keys(this.active).length}}let zr;function Qr(){return zr||(zr=new Er),zr}function oi(be,q){const ce={};for(const Te in be)Te!=="ref"&&(ce[Te]=be[Te]);return I.refProperties.forEach(Te=>{Te in q&&(ce[Te]=q[Te])}),ce}function ti(be){be=be.slice();const q=Object.create(null);for(let ce=0;ce<be.length;ce++)q[be[ce].id]=be[ce];for(let ce=0;ce<be.length;ce++)"ref"in be[ce]&&(be[ce]=oi(be[ce],q[be[ce].ref]));return be}Er.workerCount=2;const vr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function mn(be,q,ce){ce.push({command:vr.addSource,args:[be,q[be]]})}function po(be,q,ce){q.push({command:vr.removeSource,args:[be]}),ce[be]=!0}function Ti(be,q,ce,Te){po(be,ce,Te),mn(be,q,ce)}function la(be,q,ce){let Te;for(Te in be[ce])if(be[ce].hasOwnProperty(Te)&&Te!=="data"&&!_e(be[ce][Te],q[ce][Te]))return!1;for(Te in q[ce])if(q[ce].hasOwnProperty(Te)&&Te!=="data"&&!_e(be[ce][Te],q[ce][Te]))return!1;return!0}function Aa(be,q,ce,Te,Ie,Re){let Be;for(Be in q=q||{},be=be||{})be.hasOwnProperty(Be)&&(_e(be[Be],q[Be])||ce.push({command:Re,args:[Te,Be,q[Be],Ie]}));for(Be in q)q.hasOwnProperty(Be)&&!be.hasOwnProperty(Be)&&(_e(be[Be],q[Be])||ce.push({command:Re,args:[Te,Be,q[Be],Ie]}))}function Io(be){return be.id}function hl(be,q){return be[q.id]=q,be}class Ku{constructor(q,ce){this.reset(q,ce)}reset(q,ce){this.points=q||[],this._distances=[0];for(let Te=1;Te<this.points.length;Te++)this._distances[Te]=this._distances[Te-1]+this.points[Te].dist(this.points[Te-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ce||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(q){if(this.points.length===1)return this.points[0];q=I.clamp(q,0,1);let ce=1,Te=this._distances[ce];const Ie=q*this.paddedLength+this.padding;for(;Te<Ie&&ce<this._distances.length;)Te=this._distances[++ce];const Re=ce-1,Be=this._distances[Re],Ue=Te-Be,He=Ue>0?(Ie-Be)/Ue:0;return this.points[Re].mult(1-He).add(this.points[ce].mult(He))}}class ca{constructor(q,ce,Te){const Ie=this.boxCells=[],Re=this.circleCells=[];this.xCellCount=Math.ceil(q/Te),this.yCellCount=Math.ceil(ce/Te);for(let Be=0;Be<this.xCellCount*this.yCellCount;Be++)Ie.push([]),Re.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=q,this.height=ce,this.xScale=this.xCellCount/q,this.yScale=this.yCellCount/ce,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(q,ce,Te,Ie,Re){this._forEachCell(ce,Te,Ie,Re,this._insertBoxCell,this.boxUid++),this.boxKeys.push(q),this.bboxes.push(ce),this.bboxes.push(Te),this.bboxes.push(Ie),this.bboxes.push(Re)}insertCircle(q,ce,Te,Ie){this._forEachCell(ce-Ie,Te-Ie,ce+Ie,Te+Ie,this._insertCircleCell,this.circleUid++),this.circleKeys.push(q),this.circles.push(ce),this.circles.push(Te),this.circles.push(Ie)}_insertBoxCell(q,ce,Te,Ie,Re,Be){this.boxCells[Re].push(Be)}_insertCircleCell(q,ce,Te,Ie,Re,Be){this.circleCells[Re].push(Be)}_query(q,ce,Te,Ie,Re,Be){if(Te<0||q>this.width||Ie<0||ce>this.height)return!Re&&[];const Ue=[];if(q<=0&&ce<=0&&this.width<=Te&&this.height<=Ie){if(Re)return!0;for(let He=0;He<this.boxKeys.length;He++)Ue.push({key:this.boxKeys[He],x1:this.bboxes[4*He],y1:this.bboxes[4*He+1],x2:this.bboxes[4*He+2],y2:this.bboxes[4*He+3]});for(let He=0;He<this.circleKeys.length;He++){const Ye=this.circles[3*He],et=this.circles[3*He+1],dt=this.circles[3*He+2];Ue.push({key:this.circleKeys[He],x1:Ye-dt,y1:et-dt,x2:Ye+dt,y2:et+dt})}return Be?Ue.filter(Be):Ue}return this._forEachCell(q,ce,Te,Ie,this._queryCell,Ue,{hitTest:Re,seenUids:{box:{},circle:{}}},Be),Re?Ue.length>0:Ue}_queryCircle(q,ce,Te,Ie,Re){const Be=q-Te,Ue=q+Te,He=ce-Te,Ye=ce+Te;if(Ue<0||Be>this.width||Ye<0||He>this.height)return!Ie&&[];const et=[];return this._forEachCell(Be,He,Ue,Ye,this._queryCellCircle,et,{hitTest:Ie,circle:{x:q,y:ce,radius:Te},seenUids:{box:{},circle:{}}},Re),Ie?et.length>0:et}query(q,ce,Te,Ie,Re){return this._query(q,ce,Te,Ie,!1,Re)}hitTest(q,ce,Te,Ie,Re){return this._query(q,ce,Te,Ie,!0,Re)}hitTestCircle(q,ce,Te,Ie){return this._queryCircle(q,ce,Te,!0,Ie)}_queryCell(q,ce,Te,Ie,Re,Be,Ue,He){const Ye=Ue.seenUids,et=this.boxCells[Re];if(et!==null){const xt=this.bboxes;for(const Pt of et)if(!Ye.box[Pt]){Ye.box[Pt]=!0;const kt=4*Pt;if(q<=xt[kt+2]&&ce<=xt[kt+3]&&Te>=xt[kt+0]&&Ie>=xt[kt+1]&&(!He||He(this.boxKeys[Pt]))){if(Ue.hitTest)return Be.push(!0),!0;Be.push({key:this.boxKeys[Pt],x1:xt[kt],y1:xt[kt+1],x2:xt[kt+2],y2:xt[kt+3]})}}}const dt=this.circleCells[Re];if(dt!==null){const xt=this.circles;for(const Pt of dt)if(!Ye.circle[Pt]){Ye.circle[Pt]=!0;const kt=3*Pt;if(this._circleAndRectCollide(xt[kt],xt[kt+1],xt[kt+2],q,ce,Te,Ie)&&(!He||He(this.circleKeys[Pt]))){if(Ue.hitTest)return Be.push(!0),!0;{const Tt=xt[kt],Ct=xt[kt+1],Et=xt[kt+2];Be.push({key:this.circleKeys[Pt],x1:Tt-Et,y1:Ct-Et,x2:Tt+Et,y2:Ct+Et})}}}}}_queryCellCircle(q,ce,Te,Ie,Re,Be,Ue,He){const Ye=Ue.circle,et=Ue.seenUids,dt=this.boxCells[Re];if(dt!==null){const Pt=this.bboxes;for(const kt of dt)if(!et.box[kt]){et.box[kt]=!0;const Tt=4*kt;if(this._circleAndRectCollide(Ye.x,Ye.y,Ye.radius,Pt[Tt+0],Pt[Tt+1],Pt[Tt+2],Pt[Tt+3])&&(!He||He(this.boxKeys[kt])))return Be.push(!0),!0}}const xt=this.circleCells[Re];if(xt!==null){const Pt=this.circles;for(const kt of xt)if(!et.circle[kt]){et.circle[kt]=!0;const Tt=3*kt;if(this._circlesCollide(Pt[Tt],Pt[Tt+1],Pt[Tt+2],Ye.x,Ye.y,Ye.radius)&&(!He||He(this.circleKeys[kt])))return Be.push(!0),!0}}}_forEachCell(q,ce,Te,Ie,Re,Be,Ue,He){const Ye=this._convertToXCellCoord(q),et=this._convertToYCellCoord(ce),dt=this._convertToXCellCoord(Te),xt=this._convertToYCellCoord(Ie);for(let Pt=Ye;Pt<=dt;Pt++)for(let kt=et;kt<=xt;kt++)if(Re.call(this,q,ce,Te,Ie,this.xCellCount*kt+Pt,Be,Ue,He))return}_convertToXCellCoord(q){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(q*this.xScale)))}_convertToYCellCoord(q){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(q*this.yScale)))}_circlesCollide(q,ce,Te,Ie,Re,Be){const Ue=Ie-q,He=Re-ce,Ye=Te+Be;return Ye*Ye>Ue*Ue+He*He}_circleAndRectCollide(q,ce,Te,Ie,Re,Be,Ue){const He=(Be-Ie)/2,Ye=Math.abs(q-(Ie+He));if(Ye>He+Te)return!1;const et=(Ue-Re)/2,dt=Math.abs(ce-(Re+et));if(dt>et+Te)return!1;if(Ye<=He||dt<=et)return!0;const xt=Ye-He,Pt=dt-et;return xt*xt+Pt*Pt<=Te*Te}}const sr=Math.tan(85*Math.PI/180);function Mr(be,q,ce,Te,Ie,Re,Be){const Ue=I.create();if(ce)if(Re.name==="globe"){const He=I.calculateGlobeLabelMatrix(Ie,q);I.multiply(Ue,Ue,He)}else{const He=yt([],Be);Ue[0]=He[0],Ue[1]=He[1],Ue[4]=He[2],Ue[5]=He[3],Te||I.rotateZ(Ue,Ue,Ie.angle)}else I.multiply(Ue,Ie.labelPlaneMatrix,be);return Ue}function Fr(be,q,ce,Te,Ie,Re,Be){const Ue=Mr(be,q,ce,Te,Ie,Re,Be);return Re.name==="globe"&&ce||(Ue[2]=Ue[6]=Ue[10]=Ue[14]=0),Ue}function Mo(be,q,ce,Te,Ie,Re,Be){if(ce){if(Re.name==="globe"){const Ue=Mr(be,q,ce,Te,Ie,Re,Be);return I.invert(Ue,Ue),I.multiply(Ue,be,Ue),Ue}{const Ue=I.clone(be),He=I.identity([]);return He[0]=Be[0],He[1]=Be[1],He[4]=Be[2],He[5]=Be[3],I.multiply(Ue,Ue,He),Te||I.rotateZ(Ue,Ue,-Ie.angle),Ue}}return Ie.glCoordMatrix}function Oo(be,q,ce=0){const Te=[be.x,be.y,ce,1];ce?I.transformMat4$1(Te,Te,q):Zi(Te,Te,q);const Ie=Te[3];return{point:[Te[0]/Ie,Te[1]/Ie,Te[2]/Ie],signedDistanceFromCamera:Ie}}function Ir(be,q){const ce=[be[0],be[1],be[2],1];I.transformMat4$1(ce,ce,q);const Te=ce[3];return{point:[ce[0]/Te,ce[1]/Te,ce[2]/Te],signedDistanceFromCamera:Te}}function As(be,q){return Math.min(.5+be/q*.5,1.5)}function ua(be,q){const ce=be[0]/be[3],Te=be[1]/be[3];return ce>=-q[0]&&ce<=q[0]&&Te>=-q[1]&&Te<=q[1]}function Ts(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye){const et=ce.transform,dt=Te?be.textSizeData:be.iconSizeData,xt=I.evaluateSizeForZoom(dt,ce.transform.zoom),Pt=et.projection.name==="globe",kt=[256/ce.width*2+1,256/ce.height*2+1],Tt=Te?be.text.dynamicLayoutVertexArray:be.icon.dynamicLayoutVertexArray;Tt.clear();let Ct=null;Pt&&(Ct=Te?be.text.globeExtVertexArray:be.icon.globeExtVertexArray);const Et=be.lineVertexArray,zt=Te?be.text.placedSymbolArray:be.icon.placedSymbolArray,Ot=ce.transform.width/ce.transform.height;let Qt=!1;for(let Kt=0;Kt<zt.length;Kt++){const Gt=zt.get(Kt);if(Gt.writingMode!==I.WritingMode.vertical||Qt||Kt!==0&&zt.get(Kt-1).writingMode===I.WritingMode.horizontal||(Qt=!0),(Gt.hidden||Gt.writingMode===I.WritingMode.vertical)&&!Qt){da(Gt.numGlyphs,Tt);continue}Qt=!1;const Xt=new I.pointGeometry(Gt.tileAnchorX,Gt.tileAnchorY),Wt=He?He(Xt):[0,0,0],sn=et.projection.projectTilePoint(Xt.x,Xt.y,Ye.canonical),_n=[sn.x+Wt[0],sn.y+Wt[1],sn.z+Wt[2]],qn=[..._n,1];if(I.transformMat4$1(qn,qn,q),!ua(qn,kt)){da(Gt.numGlyphs,Tt);continue}const dn=As(ce.transform.cameraToCenterDistance,qn[3]),Rn=I.evaluateSizeForFeature(dt,xt,Gt),Fn=Be?Rn/dn:Rn*dn,Qn=Oo(new I.pointGeometry(_n[0],_n[1]),Ie,_n[2]);if(Qn.signedDistanceFromCamera<=0){da(Gt.numGlyphs,Tt);continue}let kn={};const Wn=Be?null:He,Dn=Yc(Gt,Fn,!1,Ue,q,Ie,Re,be.glyphOffsetArray,Et,Tt,Ct,Qn.point,Xt,kn,Ot,Wn,et.projection,Ye,Be);Qt=Dn.useVertical,Wn&&Dn.needsFlipping&&(kn={}),(Dn.notEnoughRoom||Qt||Dn.needsFlipping&&Yc(Gt,Fn,!0,Ue,q,Ie,Re,be.glyphOffsetArray,Et,Tt,Ct,Qn.point,Xt,kn,Ot,Wn,et.projection,Ye,Be).notEnoughRoom)&&da(Gt.numGlyphs,Tt)}Te?(be.text.dynamicLayoutVertexBuffer.updateData(Tt),Ct&&be.text.globeExtVertexBuffer.updateData(Ct)):(be.icon.dynamicLayoutVertexBuffer.updateData(Tt),Ct&&be.icon.globeExtVertexBuffer.updateData(Ct))}function fo(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt){const Ct=Ue.glyphStartIndex+Ue.numGlyphs,Et=Ue.lineStartIndex,zt=Ue.lineStartIndex+Ue.lineLength,Ot=q.getoffsetX(Ue.glyphStartIndex),Qt=q.getoffsetX(Ct-1),Kt=ha(be*Ot,ce,Te,Ie,Re,Be,Ue.segment,Et,zt,He,Ye,et,dt,xt,!0,Pt,kt,Tt);if(!Kt)return null;const Gt=ha(be*Qt,ce,Te,Ie,Re,Be,Ue.segment,Et,zt,He,Ye,et,dt,xt,!0,Pt,kt,Tt);return Gt?{first:Kt,last:Gt}:null}function xi(be,q,ce,Te){return be.writingMode===I.WritingMode.horizontal&&Math.abs(ce.y-q.y)>Math.abs(ce.x-q.x)*Te?{useVertical:!0}:be.writingMode===I.WritingMode.vertical?q.y<ce.y?{needsFlipping:!0}:null:be.flipState!==0&&function(Ie,Re,Be){const Ue=(Re.x-Ie.x)*Be;return Ue===0||Math.abs((Re.y-Ie.y)/Ue)>sr}(q,ce,Te)?be.flipState===1?{needsFlipping:!0}:null:q.x>ce.x?{needsFlipping:!0}:null}function Yc(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt,Ct,Et,zt){const Ot=q/24,Qt=be.lineOffsetX*Ot,Kt=be.lineOffsetY*Ot;let Gt;if(be.numGlyphs>1){const Xt=be.glyphStartIndex+be.numGlyphs,Wt=be.lineStartIndex,sn=be.lineStartIndex+be.lineLength,_n=fo(Ot,Ue,Qt,Kt,ce,dt,xt,be,He,Re,Pt,Tt,!1,Ct,Et,zt);if(!_n)return{notEnoughRoom:!0};const qn=Ir(_n.first.point,Be).point,dn=Ir(_n.last.point,Be).point,Rn=new I.pointGeometry(qn[0],qn[1]),Fn=new I.pointGeometry(dn[0],dn[1]);if(Te&&!ce){const Qn=xi(be,Rn,Fn,kt);if(be.flipState=Qn&&Qn.needsFlipping?1:2,Qn)return Qn}Gt=[_n.first];for(let Qn=be.glyphStartIndex+1;Qn<Xt-1;Qn++)Gt.push(ha(Ot*Ue.getoffsetX(Qn),Qt,Kt,ce,dt,xt,be.segment,Wt,sn,He,Re,Pt,Tt,!1,!1,Ct,Et,zt));Gt.push(_n.last)}else{if(Te&&!ce){const Wt=Oo(xt,Ie).point,sn=be.lineStartIndex+be.segment+1,_n=new I.pointGeometry(He.getx(sn),He.gety(sn)),qn=Oo(_n,Ie),dn=qn.signedDistanceFromCamera>0?qn.point:dl(xt,_n,Wt,1,Ie,void 0,Ct,Et.canonical),Rn=xi(be,new I.pointGeometry(Wt[0],Wt[1]),new I.pointGeometry(dn[0],dn[1]),kt);if(be.flipState=Rn&&Rn.needsFlipping?1:2,Rn)return Rn}const Xt=ha(Ot*Ue.getoffsetX(be.glyphStartIndex),Qt,Kt,ce,dt,xt,be.segment,be.lineStartIndex,be.lineStartIndex+be.lineLength,He,Re,Pt,Tt,!1,!1,Ct,Et,zt);if(!Xt)return{notEnoughRoom:!0};Gt=[Xt]}if(et)for(const Xt of Gt)I.updateGlobeVertexNormal(et,Ye.length+0,Xt.up[0],Xt.up[1],Xt.up[2]),I.updateGlobeVertexNormal(et,Ye.length+1,Xt.up[0],Xt.up[1],Xt.up[2]),I.updateGlobeVertexNormal(et,Ye.length+2,Xt.up[0],Xt.up[1],Xt.up[2]),I.updateGlobeVertexNormal(et,Ye.length+3,Xt.up[0],Xt.up[1],Xt.up[2]),I.addDynamicAttributes(Ye,Xt.point[0],Xt.point[1],Xt.point[2],Xt.angle);else for(const Xt of Gt)I.addDynamicAttributes(Ye,Xt.point[0],Xt.point[1],Xt.point[2],Xt.angle);return{}}function Za(be,q,ce,Te,Ie){const Re=Te.projectTilePoint(be.x,be.y,q);if(!Ie)return Oo(Re,ce,Re.z);const Be=Ie(be);return Oo(new I.pointGeometry(Re.x+Be[0],Re.y+Be[1]),ce,Re.z+Be[2])}function dl(be,q,ce,Te,Ie,Re,Be,Ue){const He=Za(be.add(be.sub(q)._unit()),Ue,Ie,Be,Re).point,Ye=I.sub([],ce,He);return I.scaleAndAdd([],ce,Ye,Te/I.length(Ye))}function ha(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt,Ct,Et){const zt=Te?be-q:be+q;let Ot=zt>0?1:-1,Qt=0;Te&&(Ot*=-1,Qt=Math.PI),Ot<0&&(Qt+=Math.PI);let Kt=Ot>0?Ue+Be:Ue+Be+1,Gt=Ie,Xt=Ie,Wt=0,sn=0;const _n=Math.abs(zt),qn=[],dn=[];let Rn=Re;const Fn=()=>{const fr=Kt-Ot;return Wt===0?Re:new I.pointGeometry(Ye.getx(fr),Ye.gety(fr))},Qn=()=>dl(Fn(),Rn,Xt,_n-Wt+1,et,xt,Tt,Ct.canonical);for(;Wt+sn<=_n;){if(Kt+=Ot,Kt<Ue||Kt>=He)return null;if(Xt=Gt,qn.push(Gt),Pt&&dn.push(Rn||Fn()),Gt=dt[Kt],Gt===void 0){Rn=new I.pointGeometry(Ye.getx(Kt),Ye.gety(Kt));const fr=Za(Rn,Ct.canonical,et,Tt,xt);Gt=fr.signedDistanceFromCamera>0?dt[Kt]=fr.point:Qn()}else Rn=null;Wt+=sn,sn=I.distance(Xt,Gt)}Rn=Rn||new I.pointGeometry(Ye.getx(Kt),Ye.gety(Kt));const kn=Fn();kt&&xt&&(dt[Kt]=Gt=dt[Kt]===void 0?Gt:Qn(),sn=I.distance(Xt,Gt));const Wn=(_n-Wt)/sn,Dn=Rn.sub(kn).mult(Wn)._add(kn),ir=I.sub([],Gt,Xt),er=I.scaleAndAdd([],Xt,ir,Wn);let dr=[0,0,1],gr=ir[0],Ar=ir[1];if(Et&&(dr=Tt.upVector(Ct.canonical,Dn.x,Dn.y),dr[0]!==0||dr[1]!==0||dr[2]!==1)){const fr=[1,0,0],Sr=[0,1,0];fr[0]=dr[2],fr[1]=0,fr[2]=-dr[0],I.cross(Sr,dr,fr),I.normalize(fr,fr),I.normalize(Sr,Sr),gr=I.dot(ir,fr),Ar=I.dot(ir,Sr)}if(ce){const fr=I.cross([],dr,ir);I.normalize(fr,fr),I.scaleAndAdd(er,er,fr,ce*Ot)}const Ur=Qt+Math.atan2(Ar,gr);return qn.push(er),Pt&&dn.push(Dn),{point:er,angle:Ur,path:qn,tilePath:dn,up:dr}}const rc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function da(be,q){for(let ce=0;ce<be;ce++){const Te=q.length;q.resize(Te+4),q.float32.set(rc,4*Te)}}function Zi(be,q,ce){const Te=q[0],Ie=q[1];return be[0]=ce[0]*Te+ce[4]*Ie+ce[12],be[1]=ce[1]*Te+ce[5]*Ie+ce[13],be[3]=ce[3]*Te+ce[7]*Ie+ce[15],be}const ri=100;class ic{constructor(q,ce,Te=new ca(q.width+200,q.height+200,25),Ie=new ca(q.width+200,q.height+200,25)){this.transform=q,this.grid=Te,this.ignoredGrid=Ie,this.pitchfactor=Math.cos(q._pitch)*q.cameraToCenterDistance,this.screenRightBoundary=q.width+ri,this.screenBottomBoundary=q.height+ri,this.gridRightBoundary=q.width+200,this.gridBottomBoundary=q.height+200,this.fogState=ce}placeCollisionBox(q,ce,Te,Ie,Re,Be,Ue,He){let Ye=Te.projectedAnchorX,et=Te.projectedAnchorY,dt=Te.projectedAnchorZ;const xt=Te.elevation,Pt=Te.tileID;if(xt&&Pt){const Kt=q.getProjection().upVector(Pt.canonical,Te.tileAnchorX,Te.tileAnchorY),Gt=q.getProjection().upVectorScale(Pt.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Ye+=Kt[0]*xt*Gt,et+=Kt[1]*xt*Gt,dt+=Kt[2]*xt*Gt}const kt=this.projectAndGetPerspectiveRatio(Ue,[Ye,et,dt],Te.tileID,q.projection.name==="globe"||!!xt||this.transform.pitch>0,q.getProjection()),Tt=Be*kt.perspectiveRatio,Ct=(Te.x1*ce+Ie.x-Te.padding)*Tt+kt.point.x,Et=(Te.y1*ce+Ie.y-Te.padding)*Tt+kt.point.y,zt=(Te.x2*ce+Ie.x+Te.padding)*Tt+kt.point.x,Ot=(Te.y2*ce+Ie.y+Te.padding)*Tt+kt.point.y,Qt=kt.perspectiveRatio<=.55||kt.occluded;return!this.isInsideGrid(Ct,Et,zt,Ot)||!Re&&this.grid.hitTest(Ct,Et,zt,Ot,He)||Qt?{box:[],offscreen:!1,occluded:kt.occluded}:{box:[Ct,Et,zt,Ot],offscreen:this.isOffscreen(Ct,Et,zt,Ot),occluded:!1}}placeCollisionCircles(q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt){const Ct=[],Et=this.transform.elevation,zt=Et?Et.getAtTileOffsetFunc(Tt,this.transform.center.lat,this.transform.worldSize,q.getProjection()):kn=>[0,0,0],Ot=new I.pointGeometry(Te.tileAnchorX,Te.tileAnchorY),Qt=q.getProjection().projectTilePoint(Te.tileAnchorX,Te.tileAnchorY,Tt.canonical),Kt=zt(Ot),Gt=[Qt.x+Kt[0],Qt.y+Kt[1],Qt.z+Kt[2]],Xt=q.projection.name==="globe",Wt=this.projectAndGetPerspectiveRatio(Ue,[Gt[0],Gt[1],Gt[2]],Tt,Xt||!!Et||this.transform.pitch>0,q.getProjection()),{perspectiveRatio:sn}=Wt,_n=(dt?Be/sn:Be*sn)/I.ONE_EM,qn=Oo(new I.pointGeometry(Gt[0],Gt[1]),He,Gt[2]).point,dn=Wt.signedDistanceFromCamera>0?fo(_n,Re,Te.lineOffsetX*_n,Te.lineOffsetY*_n,!1,qn,Ot,Te,Ie,He,{},Et&&!dt?zt:null,dt&&!!Et,q.getProjection(),Tt,dt):null;let Rn=!1,Fn=!1,Qn=!0;if(dn&&!Wt.occluded){const kn=.5*Pt*sn+kt,Wn=new I.pointGeometry(-100,-100),Dn=new I.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ir=new Ku,er=dn.first,dr=dn.last;let gr=[];for(let fr=er.path.length-1;fr>=1;fr--)gr.push(er.path[fr]);for(let fr=1;fr<dr.path.length;fr++)gr.push(dr.path[fr]);const Ar=2.5*kn;if(Ye){const fr=gr.map(Et&&!Xt?(Sr,Wr)=>{const li=zt(Wr<er.path.length-1?er.tilePath[er.path.length-1-Wr]:dr.tilePath[Wr-er.path.length+2]);return Sr[2]=li[2],Ir(Sr,Ye)}:Sr=>Ir(Sr,Ye));gr=fr.some(Sr=>Sr.signedDistanceFromCamera<=0)?[]:fr.map(Sr=>Sr.point)}let Ur=[];if(gr.length>0){const fr=gr.map(ii=>new I.pointGeometry(ii[0],ii[1]));let Sr=1/0,Wr=-1/0,li=1/0,bi=-1/0;for(let ii=0;ii<fr.length;ii++)Sr=Math.min(Sr,fr[ii].x),li=Math.min(li,fr[ii].y),Wr=Math.max(Wr,fr[ii].x),bi=Math.max(bi,fr[ii].y);Ur=Sr>=Wn.x&&Wr<=Dn.x&&li>=Wn.y&&bi<=Dn.y?[fr]:Wr<Wn.x||Sr>Dn.x||bi<Wn.y||li>Dn.y?[]:I.clipLine([fr],Wn.x,Wn.y,Dn.x,Dn.y)}for(const fr of Ur){ir.reset(fr,.25*kn);let Sr=0;Sr=ir.length<=.5*kn?1:Math.ceil(ir.paddedLength/Ar)+1;for(let Wr=0;Wr<Sr;Wr++){const li=Wr/Math.max(Sr-1,1),bi=ir.lerp(li),ii=bi.x+ri,qi=bi.y+ri;Ct.push(ii,qi,kn,0);const Eo=ii-kn,ia=qi-kn,fi=ii+kn,yi=qi+kn;if(Qn=Qn&&this.isOffscreen(Eo,ia,fi,yi),Fn=Fn||this.isInsideGrid(Eo,ia,fi,yi),!ce&&this.grid.hitTestCircle(ii,qi,kn,xt)&&(Rn=!0,!et))return{circles:[],offscreen:!1,collisionDetected:Rn,occluded:!1}}}}return{circles:!et&&Rn||!Fn?[]:Ct,offscreen:Qn,collisionDetected:Rn,occluded:Wt.occluded}}queryRenderedSymbols(q){if(q.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const ce=[];let Te=1/0,Ie=1/0,Re=-1/0,Be=-1/0;for(const et of q){const dt=new I.pointGeometry(et.x+ri,et.y+ri);Te=Math.min(Te,dt.x),Ie=Math.min(Ie,dt.y),Re=Math.max(Re,dt.x),Be=Math.max(Be,dt.y),ce.push(dt)}const Ue=this.grid.query(Te,Ie,Re,Be).concat(this.ignoredGrid.query(Te,Ie,Re,Be)),He={},Ye={};for(const et of Ue){const dt=et.key;if(He[dt.bucketInstanceId]===void 0&&(He[dt.bucketInstanceId]={}),He[dt.bucketInstanceId][dt.featureIndex])continue;const xt=[new I.pointGeometry(et.x1,et.y1),new I.pointGeometry(et.x2,et.y1),new I.pointGeometry(et.x2,et.y2),new I.pointGeometry(et.x1,et.y2)];I.polygonIntersectsPolygon(ce,xt)&&(He[dt.bucketInstanceId][dt.featureIndex]=!0,Ye[dt.bucketInstanceId]===void 0&&(Ye[dt.bucketInstanceId]=[]),Ye[dt.bucketInstanceId].push(dt.featureIndex))}return Ye}insertCollisionBox(q,ce,Te,Ie,Re){(ce?this.ignoredGrid:this.grid).insert({bucketInstanceId:Te,featureIndex:Ie,collisionGroupID:Re},q[0],q[1],q[2],q[3])}insertCollisionCircles(q,ce,Te,Ie,Re){const Be=ce?this.ignoredGrid:this.grid,Ue={bucketInstanceId:Te,featureIndex:Ie,collisionGroupID:Re};for(let He=0;He<q.length;He+=4)Be.insertCircle(Ue,q[He],q[He+1],q[He+2])}projectAndGetPerspectiveRatio(q,ce,Te,Ie,Re){const Be=[ce[0],ce[1],ce[2],1];let Ue=!1;if(ce[2]||this.transform.pitch>0){I.transformMat4$1(Be,Be,q);const He=Re.name==="globe";this.fogState&&Te&&!He&&(Ue=function(Ye,et,dt,xt,Pt,kt){const Tt=kt.calculateFogTileMatrix(Pt),Ct=[et,dt,xt];return I.transformMat4(Ct,Ct,Tt),vt(Ye,Ct,kt.pitch,kt._fov)}(this.fogState,ce[0],ce[1],ce[2],Te.toUnwrapped(),this.transform)>.9)}else Zi(Be,Be,q);return{point:new I.pointGeometry((Be[0]/Be[3]+1)/2*this.transform.width+ri,(-Be[1]/Be[3]+1)/2*this.transform.height+ri),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Re)/Be[3]*.5,1.5),signedDistanceFromCamera:Be[3],occluded:Ie&&Be[2]>Be[3]||Ue}}isOffscreen(q,ce,Te,Ie){return Te<ri||q>=this.screenRightBoundary||Ie<ri||ce>this.screenBottomBoundary}isInsideGrid(q,ce,Te,Ie){return Te>=0&&q<this.gridRightBoundary&&Ie>=0&&ce<this.gridBottomBoundary}getViewportMatrix(){const q=I.identity([]);return I.translate(q,q,[-100,-100,0]),q}}function ks(be,q,ce){const Te=q.createTileMatrix(be,be.worldSize,ce.toUnwrapped());return I.multiply(new Float32Array(16),be.projMatrix,Te)}function oo(be,q,ce){if(q.projection.name===ce.projection.name)return be.projMatrix;const Te=ce.clone();return Te.setProjection(q.projection),ks(Te,q.getProjection(),be)}function ao(be,q,ce){return q.name===ce.projection.name?be.projMatrix:ks(ce,q,be)}class oc{constructor(q,ce,Te,Ie){this.opacity=q?Math.max(0,Math.min(1,q.opacity+(q.placed?ce:-ce))):Ie&&Te?1:0,this.placed=Te}isHidden(){return this.opacity===0&&!this.placed}}class pa{constructor(q,ce,Te,Ie,Re,Be=!1){this.text=new oc(q?q.text:null,ce,Te,Re),this.icon=new oc(q?q.icon:null,ce,Ie,Re),this.clipped=Be}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Mi{constructor(q,ce,Te,Ie=!1){this.text=q,this.icon=ce,this.skipFade=Te,this.clipped=Ie}}class Cs{constructor(){this.invProjMatrix=I.create(),this.viewportMatrix=I.create(),this.circles=[]}}class Ss{constructor(q,ce,Te,Ie,Re){this.bucketInstanceId=q,this.featureIndex=ce,this.sourceLayerIndex=Te,this.bucketIndex=Ie,this.tileID=Re}}class Ps{constructor(q){this.crossSourceCollisions=q,this.maxGroupID=0,this.collisionGroups={}}get(q){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[q]){const ce=++this.maxGroupID;this.collisionGroups[q]={ID:ce,predicate:Te=>Te.collisionGroupID===ce}}return this.collisionGroups[q]}}function ji(be,q,ce,Te,Ie){const{horizontalAlign:Re,verticalAlign:Be}=I.getAnchorAlignment(be),Ue=-(Re-.5)*q,He=-(Be-.5)*ce,Ye=I.evaluateVariableOffset(be,Te);return new I.pointGeometry(Ue+Ye[0]*Ie,He+Ye[1]*Ie)}function Is(be,q,ce,Te,Ie){const Re=new I.pointGeometry(be,q);return ce&&Re._rotate(Te?Ie:-Ie),Re}class Ms{constructor(q,ce,Te,Ie,Re){this.transform=q.clone(),this.projection=q.projection.name,this.collisionIndex=new ic(this.transform,Re),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ce,this.retainedQueryData={},this.collisionGroups=new Ps(Te),this.collisionCircleArrays={},this.prevPlacement=Ie,Ie&&(Ie.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(q,ce,Te,Ie){const Re=Te.getBucket(ce),Be=Te.latestFeatureIndex;if(!Re||!Be||ce.id!==Re.layerIds[0])return;const Ue=Re.layers[0].layout,He=Te.collisionBoxArray,Ye=Math.pow(2,this.transform.zoom-Te.tileID.overscaledZ),et=Te.tileSize/I.EXTENT,dt=Te.tileID.toUnwrapped();this.transform.setProjection(Re.projection);const xt=(Pt=Te.tileID,kt=Re.getProjection(),Tt=this.transform,kt.name===this.projection?Tt.calculateProjMatrix(Pt.toUnwrapped()):ks(Tt,kt,Pt));var Pt,kt,Tt;const Ct=Ue.get("text-pitch-alignment")==="map",Et=Ue.get("text-rotation-alignment")==="map";ce.compileFilter();const zt=ce.dynamicFilter(),Ot=ce.dynamicFilterNeedsFeature(),Qt=this.transform.calculatePixelsToTileUnitsMatrix(Te),Kt=Fr(xt,Te.tileID.canonical,Ct,Et,this.transform,Re.getProjection(),Qt);let Gt=null;if(Ct){const sn=Mo(xt,Te.tileID.canonical,Ct,Et,this.transform,Re.getProjection(),Qt);Gt=I.multiply([],this.transform.labelPlaneMatrix,sn)}let Xt=null;zt&&Te.latestFeatureIndex&&(Xt={unwrappedTileID:dt,dynamicFilter:zt,dynamicFilterNeedsFeature:Ot,featureIndex:Te.latestFeatureIndex}),this.retainedQueryData[Re.bucketInstanceId]=new Ss(Re.bucketInstanceId,Be,Re.sourceLayerIndex,Re.index,Te.tileID);const Wt={bucket:Re,layout:Ue,posMatrix:xt,textLabelPlaneMatrix:Kt,labelToScreenMatrix:Gt,clippingData:Xt,scale:Ye,textPixelRatio:et,holdingForFade:Te.holdingForFade(),collisionBoxArray:He,partiallyEvaluatedTextSize:I.evaluateSizeForZoom(Re.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:I.evaluateSizeForZoom(Re.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Re.sourceID)};if(Ie)for(const sn of Re.sortKeyRanges){const{sortKey:_n,symbolInstanceStart:qn,symbolInstanceEnd:dn}=sn;q.push({sortKey:_n,symbolInstanceStart:qn,symbolInstanceEnd:dn,parameters:Wt})}else q.push({symbolInstanceStart:0,symbolInstanceEnd:Re.symbolInstances.length,parameters:Wt})}attemptAnchorPlacement(q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt,Ct,Et,zt){const Ot=[xt.textOffset0,xt.textOffset1],Qt=ji(q,Te,Ie,Ot,Re),Kt=this.collisionIndex.placeCollisionBox(kt,Re,ce,Is(Qt.x,Qt.y,Be,Ue,this.transform.angle),dt,He,Ye,et.predicate);if((!Ct||this.collisionIndex.placeCollisionBox(kt,kt.getSymbolInstanceIconSize(zt,this.transform.zoom,Pt),Ct,Is(Qt.x,Qt.y,Be,Ue,this.transform.angle),dt,He,Ye,et.predicate).box.length!==0)&&Kt.box.length>0){let Gt;return this.prevPlacement&&this.prevPlacement.variableOffsets[xt.crossTileID]&&this.prevPlacement.placements[xt.crossTileID]&&this.prevPlacement.placements[xt.crossTileID].text&&(Gt=this.prevPlacement.variableOffsets[xt.crossTileID].anchor),this.variableOffsets[xt.crossTileID]={textOffset:Ot,width:Te,height:Ie,anchor:q,textScale:Re,prevAnchor:Gt},this.markUsedJustification(kt,q,xt,Tt),kt.allowVerticalPlacement&&(this.markUsedOrientation(kt,Tt,xt),this.placedOrientations[xt.crossTileID]=Tt),{shift:Qt,placedGlyphBoxes:Kt}}}placeLayerBucketPart(q,ce,Te,Ie){const{bucket:Re,layout:Be,posMatrix:Ue,textLabelPlaneMatrix:He,labelToScreenMatrix:Ye,clippingData:et,textPixelRatio:dt,holdingForFade:xt,collisionBoxArray:Pt,partiallyEvaluatedTextSize:kt,partiallyEvaluatedIconSize:Tt,collisionGroup:Ct}=q.parameters,Et=Be.get("text-optional"),zt=Be.get("icon-optional"),Ot=Be.get("text-allow-overlap"),Qt=Be.get("icon-allow-overlap"),Kt=Be.get("text-rotation-alignment")==="map",Gt=Be.get("text-pitch-alignment")==="map",Xt=Be.get("icon-text-fit")!=="none",Wt=Be.get("symbol-z-order")==="viewport-y";this.transform.setProjection(Re.projection);let sn=Ot&&(Qt||!Re.hasIconData()||zt),_n=Qt&&(Ot||!Re.hasTextData()||Et);!Re.collisionArrays&&Pt&&Re.deserializeCollisionBoxes(Pt),Te&&Ie&&Re.updateCollisionDebugBuffers(this.transform.zoom,Pt);const qn=(dn,Rn,Fn)=>{if(et){const fi={zoom:this.transform.zoom,pitch:this.transform.pitch};let yi=null;if(et.dynamicFilterNeedsFeature){const Rr=this.retainedQueryData[Re.bucketInstanceId];yi=et.featureIndex.loadFeature({featureIndex:dn.featureIndex,bucketIndex:Rr.bucketIndex,sourceLayerIndex:Rr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,et.dynamicFilter)(fi,yi,this.retainedQueryData[Re.bucketInstanceId].tileID.canonical,new I.pointGeometry(dn.tileAnchorX,dn.tileAnchorY),this.transform.calculateDistanceTileData(et.unwrappedTileID)))return this.placements[dn.crossTileID]=new Mi(!1,!1,!1,!0),void(ce[dn.crossTileID]=!0)}if(ce[dn.crossTileID])return;if(xt)return void(this.placements[dn.crossTileID]=new Mi(!1,!1,!1));let Qn=!1,kn=!1,Wn=!0,Dn=!1,ir=!1,er=null,dr={box:null,offscreen:null,occluded:null},gr={box:null,offscreen:null,occluded:null},Ar=null,Ur=null,fr=null,Sr=0,Wr=0,li=0;Fn.textFeatureIndex?Sr=Fn.textFeatureIndex:dn.useRuntimeCollisionCircles&&(Sr=dn.featureIndex),Fn.verticalTextFeatureIndex&&(Wr=Fn.verticalTextFeatureIndex);const bi=fi=>{fi.tileID=this.retainedQueryData[Re.bucketInstanceId].tileID,(this.transform.elevation||fi.elevation)&&(fi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[Re.bucketInstanceId].tileID,fi.tileAnchorX,fi.tileAnchorY):0)},ii=Fn.textBox;if(ii){bi(ii);const fi=Rr=>{let Ri=I.WritingMode.horizontal;if(Re.allowVerticalPlacement&&!Rr&&this.prevPlacement){const $i=this.prevPlacement.placedOrientations[dn.crossTileID];$i&&(this.placedOrientations[dn.crossTileID]=$i,Ri=$i,this.markUsedOrientation(Re,Ri,dn))}return Ri},yi=(Rr,Ri)=>{if(Re.allowVerticalPlacement&&dn.numVerticalGlyphVertices>0&&Fn.verticalTextBox){for(const $i of Re.writingModes)if($i===I.WritingMode.vertical?(dr=Ri(),gr=dr):dr=Rr(),dr&&dr.box&&dr.box.length)break}else dr=Rr()};if(Be.get("text-variable-anchor")){let Rr=Be.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[dn.crossTileID]){const ci=this.prevPlacement.variableOffsets[dn.crossTileID];Rr.indexOf(ci.anchor)>0&&(Rr=Rr.filter(Ki=>Ki!==ci.anchor),Rr.unshift(ci.anchor))}const Ri=(ci,Ki,$a)=>{const eo=Re.getSymbolInstanceTextSize(kt,dn,this.transform.zoom,Rn),mo=(ci.x2-ci.x1)*eo+2*ci.padding,za=(ci.y2-ci.y1)*eo+2*ci.padding,Da=Xt&&!Qt?Ki:null;Da&&bi(Da);let to={box:[],offscreen:!1,occluded:!1};const La=Ot?2*Rr.length:Rr.length;for(let Go=0;Go<La;++Go){const il=this.attemptAnchorPlacement(Rr[Go%Rr.length],ci,mo,za,eo,Kt,Gt,dt,Ue,Ct,Go>=Rr.length,dn,Rn,Re,$a,Da,kt,Tt);if(il&&(to=il.placedGlyphBoxes,to&&to.box&&to.box.length)){Qn=!0,er=il.shift;break}}return to};yi(()=>Ri(ii,Fn.iconBox,I.WritingMode.horizontal),()=>{const ci=Fn.verticalTextBox;return ci&&bi(ci),Re.allowVerticalPlacement&&!(dr&&dr.box&&dr.box.length)&&dn.numVerticalGlyphVertices>0&&ci?Ri(ci,Fn.verticalIconBox,I.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),dr&&(Qn=dr.box,Wn=dr.offscreen,Dn=dr.occluded);const $i=fi(dr&&dr.box);if(!Qn&&this.prevPlacement){const ci=this.prevPlacement.variableOffsets[dn.crossTileID];ci&&(this.variableOffsets[dn.crossTileID]=ci,this.markUsedJustification(Re,ci.anchor,dn,$i))}}else{const Rr=(Ri,$i)=>{const ci=Re.getSymbolInstanceTextSize(kt,dn,this.transform.zoom,Rn),Ki=this.collisionIndex.placeCollisionBox(Re,ci,Ri,new I.pointGeometry(0,0),Ot,dt,Ue,Ct.predicate);return Ki&&Ki.box&&Ki.box.length&&(this.markUsedOrientation(Re,$i,dn),this.placedOrientations[dn.crossTileID]=$i),Ki};yi(()=>Rr(ii,I.WritingMode.horizontal),()=>{const Ri=Fn.verticalTextBox;return Re.allowVerticalPlacement&&dn.numVerticalGlyphVertices>0&&Ri?(bi(Ri),Rr(Ri,I.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),fi(dr&&dr.box&&dr.box.length)}}if(Ar=dr,Qn=Ar&&Ar.box&&Ar.box.length>0,Wn=Ar&&Ar.offscreen,Dn=Ar&&Ar.occluded,dn.useRuntimeCollisionCircles){const fi=Re.text.placedSymbolArray.get(dn.centerJustifiedTextSymbolIndex>=0?dn.centerJustifiedTextSymbolIndex:dn.verticalPlacedTextSymbolIndex),yi=I.evaluateSizeForFeature(Re.textSizeData,kt,fi),Rr=Be.get("text-padding");Ur=this.collisionIndex.placeCollisionCircles(Re,Ot,fi,Re.lineVertexArray,Re.glyphOffsetArray,yi,Ue,He,Ye,Te,Gt,Ct.predicate,dn.collisionCircleDiameter*yi/I.ONE_EM,Rr,this.retainedQueryData[Re.bucketInstanceId].tileID),Qn=Ot||Ur.circles.length>0&&!Ur.collisionDetected,Wn=Wn&&Ur.offscreen,Dn=Ur.occluded}if(Fn.iconFeatureIndex&&(li=Fn.iconFeatureIndex),Fn.iconBox){const fi=yi=>{bi(yi);const Rr=Xt&&er?Is(er.x,er.y,Kt,Gt,this.transform.angle):new I.pointGeometry(0,0),Ri=Re.getSymbolInstanceIconSize(Tt,this.transform.zoom,Rn);return this.collisionIndex.placeCollisionBox(Re,Ri,yi,Rr,Qt,dt,Ue,Ct.predicate)};gr&&gr.box&&gr.box.length&&Fn.verticalIconBox?(fr=fi(Fn.verticalIconBox),kn=fr.box.length>0):(fr=fi(Fn.iconBox),kn=fr.box.length>0),Wn=Wn&&fr.offscreen,ir=fr.occluded}const qi=Et||dn.numHorizontalGlyphVertices===0&&dn.numVerticalGlyphVertices===0,Eo=zt||dn.numIconVertices===0;if(qi||Eo?Eo?qi||(kn=kn&&Qn):Qn=kn&&Qn:kn=Qn=kn&&Qn,Qn&&Ar&&Ar.box&&this.collisionIndex.insertCollisionBox(Ar.box,Be.get("text-ignore-placement"),Re.bucketInstanceId,gr&&gr.box&&Wr?Wr:Sr,Ct.ID),kn&&fr&&this.collisionIndex.insertCollisionBox(fr.box,Be.get("icon-ignore-placement"),Re.bucketInstanceId,li,Ct.ID),Ur&&(Qn&&this.collisionIndex.insertCollisionCircles(Ur.circles,Be.get("text-ignore-placement"),Re.bucketInstanceId,Sr,Ct.ID),Te)){const fi=Re.bucketInstanceId;let yi=this.collisionCircleArrays[fi];yi===void 0&&(yi=this.collisionCircleArrays[fi]=new Cs);for(let Rr=0;Rr<Ur.circles.length;Rr+=4)yi.circles.push(Ur.circles[Rr+0]),yi.circles.push(Ur.circles[Rr+1]),yi.circles.push(Ur.circles[Rr+2]),yi.circles.push(Ur.collisionDetected?1:0)}const ia=Re.projection.name!=="globe";sn=sn&&(ia||!Dn),_n=_n&&(ia||!ir),this.placements[dn.crossTileID]=new Mi(Qn||sn,kn||_n,Wn||Re.justReloaded),ce[dn.crossTileID]=!0};if(Wt){const dn=Re.getSortedSymbolIndexes(this.transform.angle);for(let Rn=dn.length-1;Rn>=0;--Rn){const Fn=dn[Rn];qn(Re.symbolInstances.get(Fn),Fn,Re.collisionArrays[Fn])}}else for(let dn=q.symbolInstanceStart;dn<q.symbolInstanceEnd;dn++)qn(Re.symbolInstances.get(dn),dn,Re.collisionArrays[dn]);if(Te&&Re.bucketInstanceId in this.collisionCircleArrays){const dn=this.collisionCircleArrays[Re.bucketInstanceId];I.invert(dn.invProjMatrix,Ue),dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Re.justReloaded=!1}markUsedJustification(q,ce,Te,Ie){let Re;Re=Ie===I.WritingMode.vertical?Te.verticalPlacedTextSymbolIndex:{left:Te.leftJustifiedTextSymbolIndex,center:Te.centerJustifiedTextSymbolIndex,right:Te.rightJustifiedTextSymbolIndex}[I.getAnchorJustification(ce)];const Be=[Te.leftJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.rightJustifiedTextSymbolIndex,Te.verticalPlacedTextSymbolIndex];for(const Ue of Be)Ue>=0&&(q.text.placedSymbolArray.get(Ue).crossTileID=Re>=0&&Ue!==Re?0:Te.crossTileID)}markUsedOrientation(q,ce,Te){const Ie=ce===I.WritingMode.horizontal||ce===I.WritingMode.horizontalOnly?ce:0,Re=ce===I.WritingMode.vertical?ce:0,Be=[Te.leftJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.rightJustifiedTextSymbolIndex];for(const Ue of Be)q.text.placedSymbolArray.get(Ue).placedOrientation=Ie;Te.verticalPlacedTextSymbolIndex&&(q.text.placedSymbolArray.get(Te.verticalPlacedTextSymbolIndex).placedOrientation=Re)}commit(q){this.commitTime=q,this.zoomAtLastRecencyCheck=this.transform.zoom;const ce=this.prevPlacement;let Te=!1;this.prevZoomAdjustment=ce?ce.zoomAdjustment(this.transform.zoom):0;const Ie=ce?ce.symbolFadeChange(q):1,Re=ce?ce.opacities:{},Be=ce?ce.variableOffsets:{},Ue=ce?ce.placedOrientations:{};for(const He in this.placements){const Ye=this.placements[He],et=Re[He];et?(this.opacities[He]=new pa(et,Ie,Ye.text,Ye.icon,null,Ye.clipped),Te=Te||Ye.text!==et.text.placed||Ye.icon!==et.icon.placed):(this.opacities[He]=new pa(null,Ie,Ye.text,Ye.icon,Ye.skipFade,Ye.clipped),Te=Te||Ye.text||Ye.icon)}for(const He in Re){const Ye=Re[He];if(!this.opacities[He]){const et=new pa(Ye,Ie,!1,!1);et.isHidden()||(this.opacities[He]=et,Te=Te||Ye.text.placed||Ye.icon.placed)}}for(const He in Be)this.variableOffsets[He]||!this.opacities[He]||this.opacities[He].isHidden()||(this.variableOffsets[He]=Be[He]);for(const He in Ue)this.placedOrientations[He]||!this.opacities[He]||this.opacities[He].isHidden()||(this.placedOrientations[He]=Ue[He]);Te?this.lastPlacementChangeTime=q:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ce?ce.lastPlacementChangeTime:q)}updateLayerOpacities(q,ce){const Te={};for(const Ie of ce){const Re=Ie.getBucket(q);Re&&Ie.latestFeatureIndex&&q.id===Re.layerIds[0]&&this.updateBucketOpacities(Re,Te,Ie.collisionBoxArray)}}updateBucketOpacities(q,ce,Te){q.hasTextData()&&q.text.opacityVertexArray.clear(),q.hasIconData()&&q.icon.opacityVertexArray.clear(),q.hasIconCollisionBoxData()&&q.iconCollisionBox.collisionVertexArray.clear(),q.hasTextCollisionBoxData()&&q.textCollisionBox.collisionVertexArray.clear();const Ie=q.layers[0].layout,Re=!!q.layers[0].dynamicFilter(),Be=new pa(null,0,!1,!1,!0),Ue=Ie.get("text-allow-overlap"),He=Ie.get("icon-allow-overlap"),Ye=Ie.get("text-variable-anchor"),et=Ie.get("text-rotation-alignment")==="map",dt=Ie.get("text-pitch-alignment")==="map",xt=Ie.get("icon-text-fit")!=="none",Pt=new pa(null,0,Ue&&(He||!q.hasIconData()||Ie.get("icon-optional")),He&&(Ue||!q.hasTextData()||Ie.get("text-optional")),!0);!q.collisionArrays&&Te&&(q.hasIconCollisionBoxData()||q.hasTextCollisionBoxData())&&q.deserializeCollisionBoxes(Te);const kt=(Ct,Et,zt)=>{for(let Ot=0;Ot<Et/4;Ot++)Ct.opacityVertexArray.emplaceBack(zt)};let Tt=0;for(let Ct=0;Ct<q.symbolInstances.length;Ct++){const Et=q.symbolInstances.get(Ct),{numHorizontalGlyphVertices:zt,numVerticalGlyphVertices:Ot,crossTileID:Qt}=Et;let Kt=this.opacities[Qt];ce[Qt]?Kt=Be:Kt||(Kt=Pt,this.opacities[Qt]=Kt),ce[Qt]=!0;const Gt=zt>0||Ot>0,Xt=Et.numIconVertices>0,Wt=this.placedOrientations[Et.crossTileID],sn=Wt===I.WritingMode.vertical,_n=Wt===I.WritingMode.horizontal||Wt===I.WritingMode.horizontalOnly;if(!Gt&&!Xt||Kt.isHidden()||Tt++,Gt){const qn=ka(Kt.text);kt(q.text,zt,sn?so:qn),kt(q.text,Ot,_n?so:qn);const dn=Kt.text.isHidden();[Et.rightJustifiedTextSymbolIndex,Et.centerJustifiedTextSymbolIndex,Et.leftJustifiedTextSymbolIndex].forEach(Qn=>{Qn>=0&&(q.text.placedSymbolArray.get(Qn).hidden=dn||sn?1:0)}),Et.verticalPlacedTextSymbolIndex>=0&&(q.text.placedSymbolArray.get(Et.verticalPlacedTextSymbolIndex).hidden=dn||_n?1:0);const Rn=this.variableOffsets[Et.crossTileID];Rn&&this.markUsedJustification(q,Rn.anchor,Et,Wt);const Fn=this.placedOrientations[Et.crossTileID];Fn&&(this.markUsedJustification(q,"left",Et,Fn),this.markUsedOrientation(q,Fn,Et))}if(Xt){const qn=ka(Kt.icon);Et.placedIconSymbolIndex>=0&&(kt(q.icon,Et.numIconVertices,sn?so:qn),q.icon.placedSymbolArray.get(Et.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),Et.verticalPlacedIconSymbolIndex>=0&&(kt(q.icon,Et.numVerticalIconVertices,_n?so:qn),q.icon.placedSymbolArray.get(Et.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}if(q.hasIconCollisionBoxData()||q.hasTextCollisionBoxData()){const qn=q.collisionArrays[Ct];if(qn){let dn=new I.pointGeometry(0,0),Rn=!0;if(qn.textBox||qn.verticalTextBox){if(Ye){const Qn=this.variableOffsets[Qt];Qn?(dn=ji(Qn.anchor,Qn.width,Qn.height,Qn.textOffset,Qn.textScale),et&&dn._rotate(dt?this.transform.angle:-this.transform.angle)):Rn=!1}Re&&(Rn=!Kt.clipped),qn.textBox&&yo(q.textCollisionBox.collisionVertexArray,Kt.text.placed,!Rn||sn,dn.x,dn.y),qn.verticalTextBox&&yo(q.textCollisionBox.collisionVertexArray,Kt.text.placed,!Rn||_n,dn.x,dn.y)}const Fn=Rn&&Boolean(!_n&&qn.verticalIconBox);qn.iconBox&&yo(q.iconCollisionBox.collisionVertexArray,Kt.icon.placed,Fn,xt?dn.x:0,xt?dn.y:0),qn.verticalIconBox&&yo(q.iconCollisionBox.collisionVertexArray,Kt.icon.placed,!Fn,xt?dn.x:0,xt?dn.y:0)}}}if(q.fullyClipped=Tt===0,q.sortFeatures(this.transform.angle),this.retainedQueryData[q.bucketInstanceId]&&(this.retainedQueryData[q.bucketInstanceId].featureSortOrder=q.featureSortOrder),q.hasTextData()&&q.text.opacityVertexBuffer&&q.text.opacityVertexBuffer.updateData(q.text.opacityVertexArray),q.hasIconData()&&q.icon.opacityVertexBuffer&&q.icon.opacityVertexBuffer.updateData(q.icon.opacityVertexArray),q.hasIconCollisionBoxData()&&q.iconCollisionBox.collisionVertexBuffer&&q.iconCollisionBox.collisionVertexBuffer.updateData(q.iconCollisionBox.collisionVertexArray),q.hasTextCollisionBoxData()&&q.textCollisionBox.collisionVertexBuffer&&q.textCollisionBox.collisionVertexBuffer.updateData(q.textCollisionBox.collisionVertexArray),q.bucketInstanceId in this.collisionCircleArrays){const Ct=this.collisionCircleArrays[q.bucketInstanceId];q.placementInvProjMatrix=Ct.invProjMatrix,q.placementViewportMatrix=Ct.viewportMatrix,q.collisionCircleArray=Ct.circles,delete this.collisionCircleArrays[q.bucketInstanceId]}}symbolFadeChange(q){return this.fadeDuration===0?1:(q-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(q){return Math.max(0,(this.transform.zoom-q)/1.5)}hasTransitions(q){return this.stale||q-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(q,ce){const Te=this.zoomAtLastRecencyCheck===ce?1-this.zoomAdjustment(ce):1;return this.zoomAtLastRecencyCheck=ce,this.commitTime+this.fadeDuration*Te>q}setStale(){this.stale=!0}}function yo(be,q,ce,Te,Ie){be.emplaceBack(q?1:0,ce?1:0,Te||0,Ie||0),be.emplaceBack(q?1:0,ce?1:0,Te||0,Ie||0),be.emplaceBack(q?1:0,ce?1:0,Te||0,Ie||0),be.emplaceBack(q?1:0,ce?1:0,Te||0,Ie||0)}const Os=Math.pow(2,25),pl=Math.pow(2,24),Yu=Math.pow(2,17),ac=Math.pow(2,16),Ta=Math.pow(2,9),Ju=Math.pow(2,8),Jc=Math.pow(2,1);function ka(be){if(be.opacity===0&&!be.placed)return 0;if(be.opacity===1&&be.placed)return 4294967295;const q=be.placed?1:0,ce=Math.floor(127*be.opacity);return ce*Os+q*pl+ce*Yu+q*ac+ce*Ta+q*Ju+ce*Jc+q}const so=0;class fl{constructor(q){this._sortAcrossTiles=q.layout.get("symbol-z-order")!=="viewport-y"&&q.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(q,ce,Te,Ie,Re){const Be=this._bucketParts;for(;this._currentTileIndex<q.length;)if(ce.getBucketParts(Be,Ie,q[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Re())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Be.sort((Ue,He)=>Ue.sortKey-He.sortKey));this._currentPartIndex<Be.length;){const Ue=Be[this._currentPartIndex];if(ce.placeLayerBucketPart(Ue,this._seenCrossTileIDs,Te,Ue.symbolInstanceStart===0),this._currentPartIndex++,Re())return!0}return!1}}class Ro{constructor(q,ce,Te,Ie,Re,Be,Ue,He){this.placement=new Ms(q,Re,Be,Ue,He),this._currentPlacementIndex=ce.length-1,this._forceFullPlacement=Te,this._showCollisionBoxes=Ie,this._done=!1}isDone(){return this._done}continuePlacement(q,ce,Te){const Ie=I.exported.now(),Re=()=>{const Be=I.exported.now()-Ie;return!this._forceFullPlacement&&Be>2};for(;this._currentPlacementIndex>=0;){const Be=ce[q[this._currentPlacementIndex]],Ue=this.placement.collisionIndex.transform.zoom;if(Be.type==="symbol"&&(!Be.minzoom||Be.minzoom<=Ue)&&(!Be.maxzoom||Be.maxzoom>Ue)){if(this._inProgressLayer||(this._inProgressLayer=new fl(Be)),this._inProgressLayer.continuePlacement(Te[Be.source],this.placement,this._showCollisionBoxes,Be,Re))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(q){return this.placement.commit(q),this.placement}}const sc=512/I.EXTENT/2;class _l{constructor(q,ce,Te){this.tileID=q,this.indexedSymbolInstances={},this.bucketInstanceId=Te;for(let Ie=0;Ie<ce.length;Ie++){const Re=ce.get(Ie),Be=Re.key;this.indexedSymbolInstances[Be]||(this.indexedSymbolInstances[Be]=[]),this.indexedSymbolInstances[Be].push({crossTileID:Re.crossTileID,coord:this.getScaledCoordinates(Re,q)})}}getScaledCoordinates(q,ce){const Te=sc/Math.pow(2,ce.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ce.canonical.x*I.EXTENT+q.tileAnchorX)*Te),y:Math.floor((ce.canonical.y*I.EXTENT+q.tileAnchorY)*Te)}}findMatches(q,ce,Te){const Ie=this.tileID.canonical.z<ce.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ce.canonical.z);for(let Re=0;Re<q.length;Re++){const Be=q.get(Re);if(Be.crossTileID)continue;const Ue=this.indexedSymbolInstances[Be.key];if(!Ue)continue;const He=this.getScaledCoordinates(Be,ce);for(const Ye of Ue)if(Math.abs(Ye.coord.x-He.x)<=Ie&&Math.abs(Ye.coord.y-He.y)<=Ie&&!Te[Ye.crossTileID]){Te[Ye.crossTileID]=!0,Be.crossTileID=Ye.crossTileID;break}}}}class Qu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(q){const ce=Math.round((q-this.lng)/360);if(ce!==0)for(const Te in this.indexes){const Ie=this.indexes[Te],Re={};for(const Be in Ie){const Ue=Ie[Be];Ue.tileID=Ue.tileID.unwrapTo(Ue.tileID.wrap+ce),Re[Ue.tileID.key]=Ue}this.indexes[Te]=Re}this.lng=q}addBucket(q,ce,Te){if(this.indexes[q.overscaledZ]&&this.indexes[q.overscaledZ][q.key]){if(this.indexes[q.overscaledZ][q.key].bucketInstanceId===ce.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(q.overscaledZ,this.indexes[q.overscaledZ][q.key])}for(let Re=0;Re<ce.symbolInstances.length;Re++)ce.symbolInstances.get(Re).crossTileID=0;this.usedCrossTileIDs[q.overscaledZ]||(this.usedCrossTileIDs[q.overscaledZ]={});const Ie=this.usedCrossTileIDs[q.overscaledZ];for(const Re in this.indexes){const Be=this.indexes[Re];if(Number(Re)>q.overscaledZ)for(const Ue in Be){const He=Be[Ue];He.tileID.isChildOf(q)&&He.findMatches(ce.symbolInstances,q,Ie)}else{const Ue=Be[q.scaledTo(Number(Re)).key];Ue&&Ue.findMatches(ce.symbolInstances,q,Ie)}}for(let Re=0;Re<ce.symbolInstances.length;Re++){const Be=ce.symbolInstances.get(Re);Be.crossTileID||(Be.crossTileID=Te.generate(),Ie[Be.crossTileID]=!0)}return this.indexes[q.overscaledZ]===void 0&&(this.indexes[q.overscaledZ]={}),this.indexes[q.overscaledZ][q.key]=new _l(q,ce.symbolInstances,ce.bucketInstanceId),!0}removeBucketCrossTileIDs(q,ce){for(const Te in ce.indexedSymbolInstances)for(const Ie of ce.indexedSymbolInstances[Te])delete this.usedCrossTileIDs[q][Ie.crossTileID]}removeStaleBuckets(q){let ce=!1;for(const Te in this.indexes){const Ie=this.indexes[Te];for(const Re in Ie)q[Ie[Re].bucketInstanceId]||(this.removeBucketCrossTileIDs(Te,Ie[Re]),delete Ie[Re],ce=!0)}return ce}}class ml{constructor(){this.layerIndexes={},this.crossTileIDs=new Qu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(q,ce,Te,Ie){let Re=this.layerIndexes[q.id];Re===void 0&&(Re=this.layerIndexes[q.id]=new Rs);let Be=!1;const Ue={};Ie.name!=="globe"&&Re.handleWrapJump(Te);for(const He of ce){const Ye=He.getBucket(q);Ye&&q.id===Ye.layerIds[0]&&(Ye.bucketInstanceId||(Ye.bucketInstanceId=++this.maxBucketInstanceId),Re.addBucket(He.tileID,Ye,this.crossTileIDs)&&(Be=!0),Ue[Ye.bucketInstanceId]=!0)}return Re.removeStaleBuckets(Ue)&&(Be=!0),Be}pruneUnusedLayers(q){const ce={};q.forEach(Te=>{ce[Te]=!0});for(const Te in this.layerIndexes)ce[Te]||delete this.layerIndexes[Te]}}const $s=(be,q)=>I.emitValidationErrors(be,q&&q.filter(ce=>ce.identifier!=="source.canvas")),Qc=I.pick(vr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),eh=I.pick(vr,["setCenter","setZoom","setBearing","setPitch"]),eu={version:8,layers:[],sources:{}},th={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class vo extends I.Evented{constructor(q,ce={}){super(),this.map=q,this.dispatcher=new nn(Qr(),this),this.imageManager=new _t,this.imageManager.setEventedParent(this),this.glyphManager=new I.GlyphManager(q._requestManager,ce.localFontFamily?I.LocalGlyphMode.all:ce.localIdeographFontFamily?I.LocalGlyphMode.ideographs:I.LocalGlyphMode.none,ce.localFontFamily||ce.localIdeographFontFamily),this.lineAtlas=new I.LineAtlas(256,512),this.crossTileSymbolIndex=new ml,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new I.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",I.getReferrer());const Te=this;this._rtlTextPluginCallback=vo.registerForPluginStateChange(Ie=>{Te.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Ie.pluginStatus,pluginURL:Ie.pluginURL},(Re,Be)=>{if(I.triggerPluginCompletionEvent(Re),Be&&Be.every(Ue=>Ue))for(const Ue in Te._sourceCaches){const He=Te._sourceCaches[Ue],Ye=He.getSource().type;Ye!=="vector"&&Ye!=="geojson"||He.reload()}})}),this.on("data",Ie=>{if(Ie.dataType!=="source"||Ie.sourceDataType!=="metadata")return;const Re=this.getSource(Ie.sourceId);if(Re&&Re.vectorLayerIds)for(const Be in this._layers){const Ue=this._layers[Be];Ue.source===Re.id&&this._validateLayer(Ue)}})}loadURL(q,ce={}){this.fire(new I.Event("dataloading",{dataType:"style"}));const Te=typeof ce.validate=="boolean"?ce.validate:!I.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,ce.accessToken);const Ie=this.map._requestManager.transformRequest(q,I.ResourceType.Style);this._request=I.getJSON(Ie,(Re,Be)=>{this._request=null,Re?this.fire(new I.ErrorEvent(Re)):Be&&this._load(Be,Te)})}loadJSON(q,ce={}){this.fire(new I.Event("dataloading",{dataType:"style"})),this._request=I.exported.frame(()=>{this._request=null,this._load(q,ce.validate!==!1)})}loadEmpty(){this.fire(new I.Event("dataloading",{dataType:"style"})),this._load(eu,!1)}_updateLayerCount(q,ce){const Te=ce?1:-1;q.is3D()&&(this._num3DLayers+=Te),q.type==="circle"&&(this._numCircleLayers+=Te),q.type==="symbol"&&(this._numSymbolLayers+=Te)}_load(q,ce){if(ce&&$s(this,I.validateStyle(q)))return;this._loaded=!0,this.stylesheet=I.clone$1(q),this._updateMapProjection();for(const Ie in q.sources)this.addSource(Ie,q.sources[Ie],{validate:!1});this._changed=!1,q.sprite?this._loadSprite(q.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(q.glyphs);const Te=ti(this.stylesheet.layers);this._order=Te.map(Ie=>Ie.id),this._layers={},this._serializedLayers={};for(let Ie of Te)Ie=I.createStyleLayer(Ie),Ie.setEventedParent(this,{layer:{id:Ie.id}}),this._layers[Ie.id]=Ie,this._serializedLayers[Ie.id]=Ie.serialize(),this._updateLayerCount(Ie,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new tt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new I.Event("data",{dataType:"style"})),this.fire(new I.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(q){q?this.stylesheet.projection=q:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(q){this._spriteRequest=function(ce,Te,Ie){let Re,Be,Ue;const He=I.exported.devicePixelRatio>1?"@2x":"";let Ye=I.getJSON(Te.transformRequest(Te.normalizeSpriteURL(ce,He,".json"),I.ResourceType.SpriteJSON),(xt,Pt)=>{Ye=null,Ue||(Ue=xt,Re=Pt,dt())}),et=I.getImage(Te.transformRequest(Te.normalizeSpriteURL(ce,He,".png"),I.ResourceType.SpriteImage),(xt,Pt)=>{et=null,Ue||(Ue=xt,Be=Pt,dt())});function dt(){if(Ue)Ie(Ue);else if(Re&&Be){const xt=I.exported.getImageData(Be),Pt={};for(const kt in Re){const{width:Tt,height:Ct,x:Et,y:zt,sdf:Ot,pixelRatio:Qt,stretchX:Kt,stretchY:Gt,content:Xt}=Re[kt],Wt=new I.RGBAImage({width:Tt,height:Ct});I.RGBAImage.copy(xt,Wt,{x:Et,y:zt},{x:0,y:0},{width:Tt,height:Ct}),Pt[kt]={data:Wt,pixelRatio:Qt,sdf:Ot,stretchX:Kt,stretchY:Gt,content:Xt}}Ie(null,Pt)}}return{cancel(){Ye&&(Ye.cancel(),Ye=null),et&&(et.cancel(),et=null)}}}(q,this.map._requestManager,(ce,Te)=>{if(this._spriteRequest=null,ce)this.fire(new I.ErrorEvent(ce));else if(Te)for(const Ie in Te)this.imageManager.addImage(Ie,Te[Ie]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new I.Event("data",{dataType:"style"}))})}_validateLayer(q){const ce=this.getSource(q.source);if(!ce)return;const Te=q.sourceLayer;Te&&(ce.type==="geojson"||ce.vectorLayerIds&&ce.vectorLayerIds.indexOf(Te)===-1)&&this.fire(new I.ErrorEvent(new Error(`Source layer "${Te}" does not exist on source "${ce.id}" as specified by style layer "${q.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const q in this._sourceCaches)if(!this._sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(q){const ce=[];for(const Te of q){const Ie=this._layers[Te];Ie.type!=="custom"&&ce.push(Ie.serialize())}return ce}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const q in this._sourceCaches)if(this._sourceCaches[q].hasTransition())return!0;for(const q in this._layers)if(this._layers[q].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(q){return!!this.terrain&&th[q.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(q){if(!this._loaded)return;const ce=this._changed;if(this._changed){const Ie=Object.keys(this._updatedLayers),Re=Object.keys(this._removedLayers);(Ie.length||Re.length)&&this._updateWorkerLayers(Ie,Re);for(const Be in this._updatedSources){const Ue=this._updatedSources[Be];Ue==="reload"?this._reloadSource(Be):Ue==="clear"&&this._clearSource(Be)}this._updateTilesForChangedImages();for(const Be in this._updatedPaintProps)this._layers[Be].updateTransitions(q);this.light.updateTransitions(q),this.fog&&this.fog.updateTransitions(q),this._resetUpdates()}const Te={};for(const Ie in this._sourceCaches){const Re=this._sourceCaches[Ie];Te[Ie]=Re.used,Re.used=!1}for(const Ie of this._order){const Re=this._layers[Ie];if(Re.recalculate(q,this._availableImages),!Re.isHidden(q.zoom)){const Ue=this._getLayerSourceCache(Re);Ue&&(Ue.used=!0)}const Be=this.map.painter;if(Be){const Ue=Re.getProgramIds();if(!Ue)continue;const He=Re.getProgramConfiguration(q.zoom);for(const Ye of Ue)Be.useProgram(Ye,He)}}for(const Ie in Te){const Re=this._sourceCaches[Ie];Te[Ie]!==Re.used&&Re.getSource().fire(new I.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Re.getSource().id}))}this.light.recalculate(q),this.terrain&&this.terrain.recalculate(q),this.fog&&this.fog.recalculate(q),this.z=q.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),ce&&this.fire(new I.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const q=Object.keys(this._changedImages);if(q.length){for(const ce in this._sourceCaches)this._sourceCaches[ce].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}}_updateWorkerLayers(q,ce){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:ce})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(q){if(this._checkLoaded(),$s(this,I.validateStyle(q)))return!1;(q=I.clone$1(q)).layers=ti(q.layers);const ce=function(Ie,Re){if(!Ie)return[{command:vr.setStyle,args:[Re]}];let Be=[];try{if(!_e(Ie.version,Re.version))return[{command:vr.setStyle,args:[Re]}];_e(Ie.center,Re.center)||Be.push({command:vr.setCenter,args:[Re.center]}),_e(Ie.zoom,Re.zoom)||Be.push({command:vr.setZoom,args:[Re.zoom]}),_e(Ie.bearing,Re.bearing)||Be.push({command:vr.setBearing,args:[Re.bearing]}),_e(Ie.pitch,Re.pitch)||Be.push({command:vr.setPitch,args:[Re.pitch]}),_e(Ie.sprite,Re.sprite)||Be.push({command:vr.setSprite,args:[Re.sprite]}),_e(Ie.glyphs,Re.glyphs)||Be.push({command:vr.setGlyphs,args:[Re.glyphs]}),_e(Ie.transition,Re.transition)||Be.push({command:vr.setTransition,args:[Re.transition]}),_e(Ie.light,Re.light)||Be.push({command:vr.setLight,args:[Re.light]}),_e(Ie.fog,Re.fog)||Be.push({command:vr.setFog,args:[Re.fog]}),_e(Ie.projection,Re.projection)||Be.push({command:vr.setProjection,args:[Re.projection]});const Ue={},He=[];(function(dt,xt,Pt,kt){let Tt;for(Tt in xt=xt||{},dt=dt||{})dt.hasOwnProperty(Tt)&&(xt.hasOwnProperty(Tt)||po(Tt,Pt,kt));for(Tt in xt)xt.hasOwnProperty(Tt)&&(dt.hasOwnProperty(Tt)?_e(dt[Tt],xt[Tt])||(dt[Tt].type==="geojson"&&xt[Tt].type==="geojson"&&la(dt,xt,Tt)?Pt.push({command:vr.setGeoJSONSourceData,args:[Tt,xt[Tt].data]}):Ti(Tt,xt,Pt,kt)):mn(Tt,xt,Pt))})(Ie.sources,Re.sources,He,Ue);const Ye=[];Ie.layers&&Ie.layers.forEach(dt=>{dt.source&&Ue[dt.source]?Be.push({command:vr.removeLayer,args:[dt.id]}):Ye.push(dt)});let et=Ie.terrain;et&&Ue[et.source]&&(Be.push({command:vr.setTerrain,args:[void 0]}),et=void 0),Be=Be.concat(He),_e(et,Re.terrain)||Be.push({command:vr.setTerrain,args:[Re.terrain]}),function(dt,xt,Pt){xt=xt||[];const kt=(dt=dt||[]).map(Io),Tt=xt.map(Io),Ct=dt.reduce(hl,{}),Et=xt.reduce(hl,{}),zt=kt.slice(),Ot=Object.create(null);let Qt,Kt,Gt,Xt,Wt,sn,_n;for(Qt=0,Kt=0;Qt<kt.length;Qt++)Gt=kt[Qt],Et.hasOwnProperty(Gt)?Kt++:(Pt.push({command:vr.removeLayer,args:[Gt]}),zt.splice(zt.indexOf(Gt,Kt),1));for(Qt=0,Kt=0;Qt<Tt.length;Qt++)Gt=Tt[Tt.length-1-Qt],zt[zt.length-1-Qt]!==Gt&&(Ct.hasOwnProperty(Gt)?(Pt.push({command:vr.removeLayer,args:[Gt]}),zt.splice(zt.lastIndexOf(Gt,zt.length-Kt),1)):Kt++,sn=zt[zt.length-Qt],Pt.push({command:vr.addLayer,args:[Et[Gt],sn]}),zt.splice(zt.length-Qt,0,Gt),Ot[Gt]=!0);for(Qt=0;Qt<Tt.length;Qt++)if(Gt=Tt[Qt],Xt=Ct[Gt],Wt=Et[Gt],!Ot[Gt]&&!_e(Xt,Wt))if(_e(Xt.source,Wt.source)&&_e(Xt["source-layer"],Wt["source-layer"])&&_e(Xt.type,Wt.type)){for(_n in Aa(Xt.layout,Wt.layout,Pt,Gt,null,vr.setLayoutProperty),Aa(Xt.paint,Wt.paint,Pt,Gt,null,vr.setPaintProperty),_e(Xt.filter,Wt.filter)||Pt.push({command:vr.setFilter,args:[Gt,Wt.filter]}),_e(Xt.minzoom,Wt.minzoom)&&_e(Xt.maxzoom,Wt.maxzoom)||Pt.push({command:vr.setLayerZoomRange,args:[Gt,Wt.minzoom,Wt.maxzoom]}),Xt)Xt.hasOwnProperty(_n)&&_n!=="layout"&&_n!=="paint"&&_n!=="filter"&&_n!=="metadata"&&_n!=="minzoom"&&_n!=="maxzoom"&&(_n.indexOf("paint.")===0?Aa(Xt[_n],Wt[_n],Pt,Gt,_n.slice(6),vr.setPaintProperty):_e(Xt[_n],Wt[_n])||Pt.push({command:vr.setLayerProperty,args:[Gt,_n,Wt[_n]]}));for(_n in Wt)Wt.hasOwnProperty(_n)&&!Xt.hasOwnProperty(_n)&&_n!=="layout"&&_n!=="paint"&&_n!=="filter"&&_n!=="metadata"&&_n!=="minzoom"&&_n!=="maxzoom"&&(_n.indexOf("paint.")===0?Aa(Xt[_n],Wt[_n],Pt,Gt,_n.slice(6),vr.setPaintProperty):_e(Xt[_n],Wt[_n])||Pt.push({command:vr.setLayerProperty,args:[Gt,_n,Wt[_n]]}))}else Pt.push({command:vr.removeLayer,args:[Gt]}),sn=zt[zt.lastIndexOf(Gt)+1],Pt.push({command:vr.addLayer,args:[Wt,sn]})}(Ye,Re.layers,Be)}catch(Ue){console.warn("Unable to compute style diff:",Ue),Be=[{command:vr.setStyle,args:[Re]}]}return Be}(this.serialize(),q).filter(Ie=>!(Ie.command in eh));if(ce.length===0)return!1;const Te=ce.filter(Ie=>!(Ie.command in Qc));if(Te.length>0)throw new Error(`Unimplemented: ${Te.map(Ie=>Ie.command).join(", ")}.`);return ce.forEach(Ie=>{Ie.command!=="setTransition"&&Ie.command!=="setProjection"&&this[Ie.command].apply(this,Ie.args)}),this.stylesheet=q,this._updateMapProjection(),!0}addImage(q,ce){return this.getImage(q)?this.fire(new I.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(q,ce),this._afterImageUpdated(q),this)}updateImage(q,ce){this.imageManager.updateImage(q,ce)}getImage(q){return this.imageManager.getImage(q)}removeImage(q){return this.getImage(q)?(this.imageManager.removeImage(q),this._afterImageUpdated(q),this):this.fire(new I.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(q){this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new I.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(q,ce,Te={}){if(this._checkLoaded(),this.getSource(q)!==void 0)throw new Error("There is already a source with this ID");if(!ce.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(ce).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(ce.type)>=0&&this._validate(I.validateSource,`sources.${q}`,ce,null,Te))return;this.map&&this.map._collectResourceTiming&&(ce.collectResourceTiming=!0);const Ie=fn(q,ce,this.dispatcher,this);Ie.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(q),source:Ie.serialize(),sourceId:q}));const Re=Be=>{const Ue=(Be?"symbol:":"other:")+q,He=this._sourceCaches[Ue]=new I.SourceCache(Ue,Ie,Be);(Be?this._symbolSourceCaches:this._otherSourceCaches)[q]=He,He.style=this,He.onAdd(this.map)};Re(!1),ce.type!=="vector"&&ce.type!=="geojson"||Re(!0),Ie.onAdd&&Ie.onAdd(this.map),this._changed=!0}removeSource(q){this._checkLoaded();const ce=this.getSource(q);if(!ce)throw new Error("There is no source with this ID");for(const Ie in this._layers)if(this._layers[Ie].source===q)return this.fire(new I.ErrorEvent(new Error(`Source "${q}" cannot be removed while layer "${Ie}" is using it.`)));if(this.terrain&&this.terrain.get().source===q)return this.fire(new I.ErrorEvent(new Error(`Source "${q}" cannot be removed while terrain is using it.`)));const Te=this._getSourceCaches(q);for(const Ie of Te)delete this._sourceCaches[Ie.id],delete this._updatedSources[Ie.id],Ie.fire(new I.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Ie.getSource().id})),Ie.setEventedParent(null),Ie.clearTiles();return delete this._otherSourceCaches[q],delete this._symbolSourceCaches[q],ce.setEventedParent(null),ce.onRemove&&ce.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(q,ce){this._checkLoaded(),this.getSource(q).setData(ce),this._changed=!0}getSource(q){const ce=this._getSourceCache(q);return ce&&ce.getSource()}addLayer(q,ce,Te={}){this._checkLoaded();const Ie=q.id;if(this.getLayer(Ie))return void this.fire(new I.ErrorEvent(new Error(`Layer with id "${Ie}" already exists on this map`)));let Re;if(q.type==="custom"){if($s(this,I.validateCustomStyleLayer(q)))return;Re=I.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Ie,q.source),q=I.clone$1(q),q=I.extend(q,{source:Ie})),this._validate(I.validateLayer,`layers.${Ie}`,q,{arrayIndex:-1},Te))return;Re=I.createStyleLayer(q),this._validateLayer(Re),Re.setEventedParent(this,{layer:{id:Ie}}),this._serializedLayers[Re.id]=Re.serialize(),this._updateLayerCount(Re,!0)}const Be=ce?this._order.indexOf(ce):this._order.length;if(ce&&Be===-1)return void this.fire(new I.ErrorEvent(new Error(`Layer with id "${ce}" does not exist on this map.`)));this._order.splice(Be,0,Ie),this._layerOrderChanged=!0,this._layers[Ie]=Re;const Ue=this._getLayerSourceCache(Re);if(this._removedLayers[Ie]&&Re.source&&Ue&&Re.type!=="custom"){const He=this._removedLayers[Ie];delete this._removedLayers[Ie],He.type!==Re.type?this._updatedSources[Re.source]="clear":(this._updatedSources[Re.source]="reload",Ue.pause())}this._updateLayer(Re),Re.onAdd&&Re.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(q,ce){if(this._checkLoaded(),this._changed=!0,!this._layers[q])return void this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be moved.`)));if(q===ce)return;const Te=this._order.indexOf(q);this._order.splice(Te,1);const Ie=ce?this._order.indexOf(ce):this._order.length;ce&&Ie===-1?this.fire(new I.ErrorEvent(new Error(`Layer with id "${ce}" does not exist on this map.`))):(this._order.splice(Ie,0,q),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(q){this._checkLoaded();const ce=this._layers[q];if(!ce)return void this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be removed.`)));ce.setEventedParent(null),this._updateLayerCount(ce,!1);const Te=this._order.indexOf(q);this._order.splice(Te,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=ce,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],ce.onRemove&&ce.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(q){return this._layers[q]}hasLayer(q){return q in this._layers}hasLayerType(q){for(const ce in this._layers)if(this._layers[ce].type===q)return!0;return!1}setLayerZoomRange(q,ce,Te){this._checkLoaded();const Ie=this.getLayer(q);Ie?Ie.minzoom===ce&&Ie.maxzoom===Te||(ce!=null&&(Ie.minzoom=ce),Te!=null&&(Ie.maxzoom=Te),this._updateLayer(Ie)):this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(q,ce,Te={}){this._checkLoaded();const Ie=this.getLayer(q);if(Ie){if(!_e(Ie.filter,ce))return ce==null?(Ie.filter=void 0,void this._updateLayer(Ie)):void(this._validate(I.validateFilter,`layers.${Ie.id}.filter`,ce,{layerType:Ie.type},Te)||(Ie.filter=I.clone$1(ce),this._updateLayer(Ie)))}else this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be filtered.`)))}getFilter(q){const ce=this.getLayer(q);return ce&&I.clone$1(ce.filter)}setLayoutProperty(q,ce,Te,Ie={}){this._checkLoaded();const Re=this.getLayer(q);Re?_e(Re.getLayoutProperty(ce),Te)||(Re.setLayoutProperty(ce,Te,Ie),this._updateLayer(Re)):this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(q,ce){const Te=this.getLayer(q);if(Te)return Te.getLayoutProperty(ce);this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style.`)))}setPaintProperty(q,ce,Te,Ie={}){this._checkLoaded();const Re=this.getLayer(q);Re?_e(Re.getPaintProperty(ce),Te)||(Re.setPaintProperty(ce,Te,Ie)&&this._updateLayer(Re),this._changed=!0,this._updatedPaintProps[q]=!0):this.fire(new I.ErrorEvent(new Error(`The layer '${q}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(q,ce){const Te=this.getLayer(q);return Te&&Te.getPaintProperty(ce)}setFeatureState(q,ce){this._checkLoaded();const Te=q.source,Ie=q.sourceLayer,Re=this.getSource(Te);if(!Re)return void this.fire(new I.ErrorEvent(new Error(`The source '${Te}' does not exist in the map's style.`)));const Be=Re.type;if(Be==="geojson"&&Ie)return void this.fire(new I.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Be==="vector"&&!Ie)return void this.fire(new I.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));q.id===void 0&&this.fire(new I.ErrorEvent(new Error("The feature id parameter must be provided.")));const Ue=this._getSourceCaches(Te);for(const He of Ue)He.setFeatureState(Ie,q.id,ce)}removeFeatureState(q,ce){this._checkLoaded();const Te=q.source,Ie=this.getSource(Te);if(!Ie)return void this.fire(new I.ErrorEvent(new Error(`The source '${Te}' does not exist in the map's style.`)));const Re=Ie.type,Be=Re==="vector"?q.sourceLayer:void 0;if(Re==="vector"&&!Be)return void this.fire(new I.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(ce&&typeof q.id!="string"&&typeof q.id!="number")return void this.fire(new I.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const Ue=this._getSourceCaches(Te);for(const He of Ue)He.removeFeatureState(Be,q.id,ce)}getFeatureState(q){this._checkLoaded();const ce=q.source,Te=q.sourceLayer,Ie=this.getSource(ce);if(Ie){if(Ie.type!=="vector"||Te)return q.id===void 0&&this.fire(new I.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(ce)[0].getFeatureState(Te,q.id);this.fire(new I.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new I.ErrorEvent(new Error(`The source '${ce}' does not exist in the map's style.`)))}getTransition(){return I.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const q={};for(const ce in this._sourceCaches){const Te=this._sourceCaches[ce].getSource();q[Te.id]||(q[Te.id]=Te.serialize())}return I.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:q,layers:this._serializeLayers(this._order)},ce=>ce!==void 0)}_updateLayer(q){this._updatedLayers[q.id]=!0;const ce=this._getLayerSourceCache(q);q.source&&!this._updatedSources[q.source]&&ce&&ce.getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",ce.pause()),this._changed=!0,q.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(q){const ce=Be=>this._layers[Be].type==="fill-extrusion",Te={},Ie=[];for(let Be=this._order.length-1;Be>=0;Be--){const Ue=this._order[Be];if(ce(Ue)){Te[Ue]=Be;for(const He of q){const Ye=He[Ue];if(Ye)for(const et of Ye)Ie.push(et)}}}Ie.sort((Be,Ue)=>Ue.intersectionZ-Be.intersectionZ);const Re=[];for(let Be=this._order.length-1;Be>=0;Be--){const Ue=this._order[Be];if(ce(Ue))for(let He=Ie.length-1;He>=0;He--){const Ye=Ie[He].feature;if(Te[Ye.layer.id]<Be)break;Re.push(Ye),Ie.pop()}else for(const He of q){const Ye=He[Ue];if(Ye)for(const et of Ye)Re.push(et.feature)}}return Re}queryRenderedFeatures(q,ce,Te){ce&&ce.filter&&this._validate(I.validateFilter,"queryRenderedFeatures.filter",ce.filter,null,ce);const Ie={};if(ce&&ce.layers){if(!Array.isArray(ce.layers))return this.fire(new I.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const He of ce.layers){const Ye=this._layers[He];if(!Ye)return this.fire(new I.ErrorEvent(new Error(`The layer '${He}' does not exist in the map's style and cannot be queried for features.`))),[];Ie[Ye.source]=!0}}const Re=[];ce.availableImages=this._availableImages;const Be=ce&&ce.layers?ce.layers.some(He=>{const Ye=this.getLayer(He);return Ye&&Ye.is3D()}):this.has3DLayers(),Ue=Jt.createFromScreenPoints(q,Te);for(const He in this._sourceCaches){const Ye=this._sourceCaches[He].getSource().id;ce.layers&&!Ie[Ye]||Re.push(ar(this._sourceCaches[He],this._layers,this._serializedLayers,Ue,ce,Te,Be,!!this.map._showQueryGeometry))}return this.placement&&Re.push(function(He,Ye,et,dt,xt,Pt,kt){const Tt={},Ct=Pt.queryRenderedSymbols(dt),Et=[];for(const zt of Object.keys(Ct).map(Number))Et.push(kt[zt]);Et.sort(br);for(const zt of Et){const Ot=zt.featureIndex.lookupSymbolFeatures(Ct[zt.bucketInstanceId],Ye,zt.bucketIndex,zt.sourceLayerIndex,xt.filter,xt.layers,xt.availableImages,He);for(const Qt in Ot){const Kt=Tt[Qt]=Tt[Qt]||[],Gt=Ot[Qt];Gt.sort((Xt,Wt)=>{const sn=zt.featureSortOrder;if(sn){const _n=sn.indexOf(Xt.featureIndex);return sn.indexOf(Wt.featureIndex)-_n}return Wt.featureIndex-Xt.featureIndex});for(const Xt of Gt)Kt.push(Xt)}}for(const zt in Tt)Tt[zt].forEach(Ot=>{const Qt=Ot.feature,Kt=et(He[zt]).getFeatureState(Qt.layer["source-layer"],Qt.id);Qt.source=Qt.layer.source,Qt.layer["source-layer"]&&(Qt.sourceLayer=Qt.layer["source-layer"]),Qt.state=Kt});return Tt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),Ue.screenGeometry,ce,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Re)}querySourceFeatures(q,ce){ce&&ce.filter&&this._validate(I.validateFilter,"querySourceFeatures.filter",ce.filter,null,ce);const Te=this._getSourceCaches(q);let Ie=[];for(const Re of Te)Ie=Ie.concat(Hn(Re,ce));return Ie}addSourceType(q,ce,Te){return vo.getSourceType(q)?Te(new Error(`A source type called "${q}" already exists.`)):(vo.setSourceType(q,ce),ce.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:q,url:ce.workerSourceURL},Te):Te(null,null))}getLight(){return this.light.getLight()}setLight(q,ce={}){this._checkLoaded();const Te=this.light.getLight();let Ie=!1;for(const Be in q)if(!_e(q[Be],Te[Be])){Ie=!0;break}if(!Ie)return;const Re=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(q,ce),this.light.updateTransitions(Re)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(q,ce=1){if(this._checkLoaded(),!q)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(ce===1){if(typeof q.source=="object"){const Te="terrain-dem-src";this.addSource(Te,q.source),q=I.clone$1(q),q=I.extend(q,{source:Te})}if(this._validate(I.validateTerrain,"terrain",q))return}if(!this.terrain||this.terrain&&ce!==this.terrain.drapeRenderMode)this._createTerrain(q,ce);else{const Te=this.terrain,Ie=Te.get();for(const Re of Object.keys(I.spec.terrain))!q.hasOwnProperty(Re)&&I.spec.terrain[Re].default&&(q[Re]=I.spec.terrain[Re].default);for(const Re in q)if(!_e(q[Re],Ie[Re])){Te.set(q),this.stylesheet.terrain=q;const Be=this._setTransitionParameters({duration:0});Te.updateTransitions(Be);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(q){const ce=this.fog=new Mt(q,this.map.transform);this.stylesheet.fog=q;const Te=this._setTransitionParameters({duration:0});ce.updateTransitions(Te)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const q of this.map._markers)q._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(q){if(this._checkLoaded(),!q)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const ce=this.fog,Te=ce.get();Object.keys(q).length===0&&ce.set(q);for(const Ie in q)if(!_e(q[Ie],Te[Ie])){ce.set(q),this.stylesheet.fog=q;const Re=this._setTransitionParameters({duration:0});ce.updateTransitions(Re);break}}else this._createFog(q);this._markersNeedUpdate=!0}_setTransitionParameters(q){return{now:I.exported.now(),transition:I.extend(q,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const q=this._order.filter(Te=>this.isLayerDraped(this._layers[Te])),ce=this._order.filter(Te=>!this.isLayerDraped(this._layers[Te]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...q),this._drapedFirstOrder.push(...ce)}_createTerrain(q,ce){const Te=this.terrain=new pt(q,ce);this.stylesheet.terrain=q,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const Ie=this._setTransitionParameters({duration:0});Te.updateTransitions(Ie)}_force3DLayerUpdate(){for(const q in this._layers){const ce=this._layers[q];ce.type==="fill-extrusion"&&this._updateLayer(ce)}}_forceSymbolLayerUpdate(){for(const q in this._layers){const ce=this._layers[q];ce.type==="symbol"&&this._updateLayer(ce)}}_validate(q,ce,Te,Ie,Re={}){return(!Re||Re.validate!==!1)&&$s(this,q.call(I.validateStyle,I.extend({key:ce,style:this.serialize(),value:Te,styleSpec:I.spec},Ie)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),I.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const q in this._layers)this._layers[q].setEventedParent(null);for(const q in this._sourceCaches)this._sourceCaches[q].clearTiles(),this._sourceCaches[q].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(q){const ce=this._getSourceCaches(q);for(const Te of ce)Te.clearTiles()}_reloadSource(q){const ce=this._getSourceCaches(q);for(const Te of ce)Te.resume(),Te.reload()}_updateSources(q){for(const ce in this._sourceCaches)this._sourceCaches[ce].update(q)}_generateCollisionBoxes(){for(const q in this._sourceCaches){const ce=this._sourceCaches[q];ce.resume(),ce.reload()}}_updatePlacement(q,ce,Te,Ie,Re=!1){let Be=!1,Ue=!1;const He={};for(const Ye of this._order){const et=this._layers[Ye];if(et.type!=="symbol")continue;if(!He[et.source]){const xt=this._getLayerSourceCache(et);if(!xt)continue;He[et.source]=xt.getRenderableIds(!0).map(Pt=>xt.getTileByID(Pt)).sort((Pt,kt)=>kt.tileID.overscaledZ-Pt.tileID.overscaledZ||(Pt.tileID.isLessThan(kt.tileID)?-1:1))}const dt=this.crossTileSymbolIndex.addLayer(et,He[et.source],q.center.lng,q.projection);Be=Be||dt}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Re=Re||this._layerOrderChanged||Te===0,this._layerOrderChanged&&this.fire(new I.Event("neworder")),(Re||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(I.exported.now(),q.zoom))&&(this.pauseablePlacement=new Ro(q,this._order,Re,ce,Te,Ie,this.placement,this.fog&&q.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,He),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(I.exported.now()),Ue=!0),Be&&this.pauseablePlacement.placement.setStale()),Ue||Be)for(const Ye of this._order){const et=this._layers[Ye];et.type==="symbol"&&this.placement.updateLayerOpacities(et,He[et.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(I.exported.now())}_releaseSymbolFadeTiles(){for(const q in this._sourceCaches)this._sourceCaches[q].releaseSymbolFadeTiles()}getImages(q,ce,Te){this.imageManager.getImages(ce.icons,Te),this._updateTilesForChangedImages();const Ie=Re=>{Re&&Re.setDependencies(ce.tileID.key,ce.type,ce.icons)};Ie(this._otherSourceCaches[ce.source]),Ie(this._symbolSourceCaches[ce.source])}getGlyphs(q,ce,Te){this.glyphManager.getGlyphs(ce.stacks,Te)}getResource(q,ce,Te){return I.makeRequest(ce,Te)}_getSourceCache(q){return this._otherSourceCaches[q]}_getLayerSourceCache(q){return q.type==="symbol"?this._symbolSourceCaches[q.source]:this._otherSourceCaches[q.source]}_getSourceCaches(q){const ce=[];return this._otherSourceCaches[q]&&ce.push(this._otherSourceCaches[q]),this._symbolSourceCaches[q]&&ce.push(this._symbolSourceCaches[q]),ce}_isSourceCacheLoaded(q){const ce=this._getSourceCaches(q);return ce.length===0?(this.fire(new I.ErrorEvent(new Error(`There is no source with ID '${q}'`))),!1):ce.every(Te=>Te.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}vo.getSourceType=function(be){return rn[be]},vo.setSourceType=function(be,q){rn[be]=q},vo.registerForPluginStateChange=I.registerForPluginStateChange;var Ca=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,lc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",gl=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,cc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Xa=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let yl={},No={};const fa=[];Sa(Ca,fa),Sa(gl,fa),Sa(cc,fa),Sa(Xa,fa),yl=Kr("",gl),No=Kr(Xa,cc);const jo=Kr(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),vl=Ca,zs=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var xl={background:Kr(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Kr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Kr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Kr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Kr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Kr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Kr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Kr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Kr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Kr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Kr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Kr(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Kr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Kr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Kr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Kr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Kr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Kr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Kr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Kr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Kr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Kr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc),skyboxGradient:Kr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc),skyboxCapture:Kr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Kr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Kr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Sa(be,q){const ce=be.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let Te of ce)if(Te=Te.trim(),Te[0]==="#"&&Te.includes("if")&&!Te.includes("endif")){Te=Te.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Ie=Te.split(" ");for(const Re of Ie)q.includes(Re)||q.push(Re)}}function Kr(be,q){const ce=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Te=q.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),Ie={},Re=[...fa];return Sa(be,Re),Sa(q,Re),{fragmentSource:be=be.replace(ce,(Be,Ue,He,Ye,et)=>(Ie[et]=!0,Ue==="define"?`
#ifndef HAS_UNIFORM_u_${et}
varying ${He} ${Ye} ${et};
#else
uniform ${He} ${Ye} u_${et};
#endif
`:`
#ifdef HAS_UNIFORM_u_${et}
    ${He} ${Ye} ${et} = u_${et};
#endif
`)),vertexSource:q=q.replace(ce,(Be,Ue,He,Ye,et)=>{const dt=Ye==="float"?"vec2":"vec4",xt=et.match(/color/)?"color":dt;return Ie[et]?Ue==="define"?`
#ifndef HAS_UNIFORM_u_${et}
uniform lowp float u_${et}_t;
attribute ${He} ${dt} a_${et};
varying ${He} ${Ye} ${et};
#else
uniform ${He} ${Ye} u_${et};
#endif
`:xt==="vec4"?`
#ifndef HAS_UNIFORM_u_${et}
    ${et} = a_${et};
#else
    ${He} ${Ye} ${et} = u_${et};
#endif
`:`
#ifndef HAS_UNIFORM_u_${et}
    ${et} = unpack_mix_${xt}(a_${et}, u_${et}_t);
#else
    ${He} ${Ye} ${et} = u_${et};
#endif
`:Ue==="define"?`
#ifndef HAS_UNIFORM_u_${et}
uniform lowp float u_${et}_t;
attribute ${He} ${dt} a_${et};
#else
uniform ${He} ${Ye} u_${et};
#endif
`:xt==="vec4"?`
#ifndef HAS_UNIFORM_u_${et}
    ${He} ${Ye} ${et} = a_${et};
#else
    ${He} ${Ye} ${et} = u_${et};
#endif
`:`
#ifndef HAS_UNIFORM_u_${et}
    ${He} ${Ye} ${et} = unpack_mix_${xt}(a_${et}, u_${et}_t);
#else
    ${He} ${Ye} ${et} = u_${et};
#endif
`}),staticAttributes:Te,usedDefines:Re}}class bl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(q,ce,Te,Ie,Re,Be,Ue){this.context=q;let He=this.boundPaintVertexBuffers.length!==Ie.length;for(let et=0;!He&&et<Ie.length;et++)this.boundPaintVertexBuffers[et]!==Ie[et]&&(He=!0);let Ye=this.boundDynamicVertexBuffers.length!==Ue.length;for(let et=0;!Ye&&et<Ue.length;et++)this.boundDynamicVertexBuffers[et]!==Ue[et]&&(Ye=!0);if(!q.extVertexArrayObject||!this.vao||this.boundProgram!==ce||this.boundLayoutVertexBuffer!==Te||He||Ye||this.boundIndexBuffer!==Re||this.boundVertexOffset!==Be)this.freshBind(ce,Te,Ie,Re,Be,Ue);else{q.bindVertexArrayOES.set(this.vao);for(const et of Ue)et&&et.bind();Re&&Re.dynamicDraw&&Re.bind()}}freshBind(q,ce,Te,Ie,Re,Be){let Ue;const He=q.numAttributes,Ye=this.context,et=Ye.gl;if(Ye.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ye.extVertexArrayObject.createVertexArrayOES(),Ye.bindVertexArrayOES.set(this.vao),Ue=0,this.boundProgram=q,this.boundLayoutVertexBuffer=ce,this.boundPaintVertexBuffers=Te,this.boundIndexBuffer=Ie,this.boundVertexOffset=Re,this.boundDynamicVertexBuffers=Be;else{Ue=Ye.currentNumAttributes||0;for(let dt=He;dt<Ue;dt++)et.disableVertexAttribArray(dt)}ce.enableAttributes(et,q),ce.bind(),ce.setVertexAttribPointers(et,q,Re);for(const dt of Te)dt.enableAttributes(et,q),dt.bind(),dt.setVertexAttribPointers(et,q,Re);for(const dt of Be)dt&&(dt.enableAttributes(et,q),dt.bind(),dt.setVertexAttribPointers(et,q,Re));Ie&&Ie.bind(),Ye.currentNumAttributes=He}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function uc(be,q){const ce=Math.pow(2,q.canonical.z),Te=q.canonical.y;return[new I.MercatorCoordinate(0,Te/ce).toLngLat().lat,new I.MercatorCoordinate(0,(Te+1)/ce).toLngLat().lat]}function hc(be,q,ce,Te,Ie,Re,Be){const Ue=be.context,He=Ue.gl,Ye=ce.fbo;if(!Ye)return;be.prepareDrawTile();const et=be.useProgram("hillshade");Ue.activeTexture.set(He.TEXTURE0),He.bindTexture(He.TEXTURE_2D,Ye.colorAttachment.get());const dt=((Tt,Ct,Et,zt)=>{const Ot=Et.paint.get("hillshade-shadow-color"),Qt=Et.paint.get("hillshade-highlight-color"),Kt=Et.paint.get("hillshade-accent-color");let Gt=Et.paint.get("hillshade-illumination-direction")*(Math.PI/180);Et.paint.get("hillshade-illumination-anchor")==="viewport"&&(Gt-=Tt.transform.angle);const Xt=!Tt.options.moving;return{u_matrix:zt||Tt.transform.calculateProjMatrix(Ct.tileID.toUnwrapped(),Xt),u_image:0,u_latrange:uc(0,Ct.tileID),u_light:[Et.paint.get("hillshade-exaggeration"),Gt],u_shadow:Ot,u_highlight:Qt,u_accent:Kt}})(be,ce,Te,be.terrain?q.projMatrix:null);be.prepareDrawProgram(Ue,et,q.toUnwrapped());const{tileBoundsBuffer:xt,tileBoundsIndexBuffer:Pt,tileBoundsSegments:kt}=be.getTileBoundsBuffers(ce);et.draw(Ue,He.TRIANGLES,Ie,Re,Be,I.CullFaceMode.disabled,dt,Te.id,xt,Pt,kt)}function qr(be,q,ce){if(!q.needsDEMTextureUpload)return;const Te=be.context,Ie=Te.gl;Te.pixelStoreUnpackPremultiplyAlpha.set(!1),q.demTexture=q.demTexture||be.getTileTexture(ce.stride);const Re=ce.getPixels();q.demTexture?q.demTexture.update(Re,{premultiply:!1}):q.demTexture=new I.Texture(Te,Re,Ie.RGBA,{premultiply:!1}),q.needsDEMTextureUpload=!1}function Ka(be,q,ce,Te,Ie,Re){const Be=be.context,Ue=Be.gl;if(!q.dem)return;const He=q.dem;if(Be.activeTexture.set(Ue.TEXTURE1),qr(be,q,He),!q.demTexture)return;q.demTexture.bind(Ue.NEAREST,Ue.CLAMP_TO_EDGE);const Ye=He.dim;Be.activeTexture.set(Ue.TEXTURE0);let et=q.fbo;if(!et){const kt=new I.Texture(Be,{width:Ye,height:Ye,data:null},Ue.RGBA);kt.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),et=q.fbo=Be.createFramebuffer(Ye,Ye,!0),et.colorAttachment.set(kt.texture)}Be.bindFramebuffer.set(et.framebuffer),Be.viewport.set([0,0,Ye,Ye]);const{tileBoundsBuffer:dt,tileBoundsIndexBuffer:xt,tileBoundsSegments:Pt}=be.getMercatorTileBoundsBuffers();be.useProgram("hillshadePrepare").draw(Be,Ue.TRIANGLES,Te,Ie,Re,I.CullFaceMode.disabled,((kt,Tt)=>{const Ct=Tt.stride,Et=I.create();return I.ortho(Et,0,I.EXTENT,-I.EXTENT,0,0,1),I.translate(Et,Et,[0,-I.EXTENT,0]),{u_matrix:Et,u_image:1,u_dimension:[Ct,Ct],u_zoom:kt.overscaledZ,u_unpack:Tt.unpackVector}})(q.tileID,He),ce.id,dt,xt,Pt),q.needsHillshadePrepare=!1}const Ds=be=>({u_matrix:new I.UniformMatrix4f(be),u_image0:new I.Uniform1i(be),u_skirt_height:new I.Uniform1f(be)}),$o=(be,q)=>({u_matrix:be,u_image0:0,u_skirt_height:q}),dc=(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt)=>({u_proj_matrix:Float32Array.from(be),u_globe_matrix:q,u_normalize_matrix:Float32Array.from(Te),u_merc_matrix:ce,u_zoom_transition:Ie,u_merc_center:Re,u_image0:0,u_frustum_tl:Be,u_frustum_tr:Ue,u_frustum_br:He,u_frustum_bl:Ye,u_globe_pos:et,u_globe_radius:dt,u_viewport:xt,u_grid_matrix:Pt?Float32Array.from(Pt):new Float32Array(9)});function wl(be,q){return be!=null&&q!=null&&!(!be.hasData()||!q.hasData())&&be.demTexture!=null&&q.demTexture!=null&&be.tileID.key!==q.tileID.key}const _a=new class{constructor(){this.operations={}}newMorphing(be,q,ce,Te,Ie){if(be in this.operations){const Re=this.operations[be];Re.to.tileID.key!==ce.tileID.key&&(Re.queued=ce)}else this.operations[be]={startTime:Te,phase:0,duration:Ie,from:q,to:ce,queued:null}}getMorphValuesForProxy(be){if(!(be in this.operations))return null;const q=this.operations[be];return{from:q.from,to:q.to,phase:q.phase}}update(be){for(const q in this.operations){const ce=this.operations[q];for(ce.phase=(be-ce.startTime)/ce.duration;ce.phase>=1||!this._validOp(ce);)if(!this._nextOp(ce,be)){delete this.operations[q];break}}}_nextOp(be,q){return!!be.queued&&(be.from=be.to,be.to=be.queued,be.queued=null,be.phase=0,be.startTime=q,!0)}_validOp(be){return be.from.hasData()&&be.to.hasData()}},Ya={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function nh(be,q){const ce=1<<be.z;return!q&&(be.x===0||be.x===ce-1)||be.y===0||be.y===ce-1}const Jo=be=>({u_matrix:be});function El(be,q,ce,Te,Ie){if(Ie>0){const Re=I.exported.now(),Be=(Re-be.timeAdded)/Ie,Ue=q?(Re-q.timeAdded)/Ie:-1,He=ce.getSource(),Ye=Te.coveringZoomLevel({tileSize:He.tileSize,roundZoom:He.roundZoom}),et=!q||Math.abs(q.tileID.overscaledZ-Ye)>Math.abs(be.tileID.overscaledZ-Ye),dt=et&&be.refreshedUponExpiration?1:I.clamp(et?Be:1-Ue,0,1);return be.refreshedUponExpiration&&Be>=1&&(be.refreshedUponExpiration=!1),q?{opacity:1,mix:1-dt}:{opacity:dt,mix:0}}return{opacity:1,mix:0}}class Ls extends I.SourceCache{constructor(q){const ce={type:"raster-dem",maxzoom:q.transform.maxZoom},Te=new nn(Qr(),null),Ie=fn("mock-dem",ce,Te,q.style);super("mock-dem",Ie,!1),Ie.setEventedParent(this),this._sourceLoaded=!0}_loadTile(q,ce){q.state="loaded",ce(null)}}class pc extends I.SourceCache{constructor(q){const ce=fn("proxy",{type:"geojson",maxzoom:q.transform.maxZoom},new nn(Qr(),null),q.style);super("proxy",ce,!1),ce.setEventedParent(this),this.map=this.getSource().map=q,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(q,ce,Te){if(q.freezeTileCoverage)return;this.transform=q;const Ie=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Re,Be)=>{if(Re[Be.key]="",!this._tiles[Be.key]){const Ue=new I.Tile(Be,this._source.tileSize*Be.overscaleFactor(),q.tileZoom);Ue.state="loaded",this._tiles[Be.key]=Ue}return Re},{});for(const Re in this._tiles)Re in Ie||(this.freeFBO(Re),this._tiles[Re].unloadVectorData(),delete this._tiles[Re])}freeFBO(q){const ce=this.proxyCachedFBO[q];if(ce!==void 0){const Te=Object.values(ce);this.renderCachePool.push(...Te),delete this.proxyCachedFBO[q]}}deallocRenderCache(){this.renderCache.forEach(q=>q.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Al extends I.OverscaledTileID{constructor(q,ce,Te){super(q.overscaledZ,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y),this.proxyTileKey=ce,this.projMatrix=Te}}class tu extends I.Elevation{constructor(q,ce){super(),this.painter=q,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[Te,Ie,Re]=function(He){const Ye=new I.StructArrayLayout4i8,et=new I.StructArrayLayout3ui6,dt=131;Ye.reserve(17161),et.reserve(33800);const xt=I.EXTENT/128,Pt=I.EXTENT+xt/2,kt=Pt+xt;for(let Ct=-xt;Ct<kt;Ct+=xt)for(let Et=-xt;Et<kt;Et+=xt){const zt=Et<0||Et>Pt||Ct<0||Ct>Pt?24575:0,Ot=I.clamp(Math.round(Et),0,I.EXTENT),Qt=I.clamp(Math.round(Ct),0,I.EXTENT);Ye.emplaceBack(Ot+zt,Qt,Ot,Qt)}const Tt=(Ct,Et)=>{const zt=Et*dt+Ct;et.emplaceBack(zt+1,zt,zt+dt),et.emplaceBack(zt+dt,zt+dt+1,zt+1)};for(let Ct=1;Ct<129;Ct++)for(let Et=1;Et<129;Et++)Tt(Et,Ct);return[0,129].forEach(Ct=>{for(let Et=0;Et<130;Et++)Tt(Et,Ct),Tt(Ct,Et)}),[Ye,et,32768]}(),Be=q.context;this.gridBuffer=Be.createVertexBuffer(Te,I.boundsAttributes.members),this.gridIndexBuffer=Be.createIndexBuffer(Ie),this.gridSegments=I.SegmentVector.simpleSegment(0,0,Te.length,Ie.length),this.gridNoSkirtSegments=I.SegmentVector.simpleSegment(0,0,Te.length,Re),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new pc(ce.map),this.orthoMatrix=I.create(),I.ortho(this.orthoMatrix,0,I.EXTENT,0,I.EXTENT,0,1);const Ue=Be.gl;this._overlapStencilMode=new I.StencilMode({func:Ue.GEQUAL,mask:255},0,255,Ue.KEEP,Ue.KEEP,Ue.REPLACE),this._previousZoom=q.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=ce,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ls(ce.map)}set style(q){q.on("data",this._onStyleDataEvent.bind(this)),q.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=q,this._checkRenderCacheEfficiency()}update(q,ce,Te){if(q&&q.terrain){this._style!==q&&(this.style=q),this.enabled=!0;const Ie=q.terrain.properties;this.sourceCache=q.terrain.drapeRenderMode===0?this._mockSourceCache:q._getSourceCache(Ie.get("source")),this._exaggeration=Ie.get("exaggeration");const Re=()=>{this.sourceCache.used&&I.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Be=this.getScaledDemTileSize();this.sourceCache.update(ce,Be,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Re(),this._initializing=!0),Re(),ce.updateElevation(!Te),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(ce),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(q){this._findCoveringTileCache[q]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const q=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||q.efficiency!==100&&I.warnOnce(`Terrain render cache efficiency is not optimal (${q.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${q.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(q){q.coord&&q.dataType==="source"?this._clearRenderCacheForTile(q.sourceCacheId,q.coord):q.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const q in this._style._sourceCaches)this._style._sourceCaches[q].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(q=>q.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const q=2*this.proxySourceCache.getSource().tileSize;return[q,q]}set useVertexMorphing(q){this._useVertexMorphing=q}updateTileBinding(q){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const ce=this.proxySourceCache,Te=this.painter.transform;this._initializing&&(this._initializing=Te._centerAltitude===0&&this.getAtPointOrZero(I.MercatorCoordinate.fromLngLat(Te.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const Ie=this.proxyCoords=ce.getIds().map(He=>{const Ye=ce.getTileByID(He).tileID;return Ye.projMatrix=Te.calculateProjMatrix(Ye.toUnwrapped()),Ye});(function(He,Ye){const et=Ye.transform.pointCoordinate(Ye.transform.getCameraPoint()),dt=new I.pointGeometry(et.x,et.y);He.sort((xt,Pt)=>{if(Pt.overscaledZ-xt.overscaledZ)return Pt.overscaledZ-xt.overscaledZ;const kt=new I.pointGeometry(xt.canonical.x+(1<<xt.canonical.z)*xt.wrap,xt.canonical.y),Tt=new I.pointGeometry(Pt.canonical.x+(1<<Pt.canonical.z)*Pt.wrap,Pt.canonical.y),Ct=dt.mult(1<<xt.canonical.z);return Ct.x-=.5,Ct.y-=.5,Ct.distSqr(kt)-Ct.distSqr(Tt)})})(Ie,this.painter),this._previousZoom=Te.zoom;const Re=this.proxyToSource||{};this.proxyToSource={},Ie.forEach(He=>{this.proxyToSource[He.key]={}}),this.terrainTileForTile={};const Be=this._style._sourceCaches;for(const He in Be){const Ye=Be[He];if(!Ye.used||(Ye!==this.sourceCache&&this.resetTileLookupCache(Ye.id),this._setupProxiedCoordsForOrtho(Ye,q[He],Re),Ye.usedForTerrain))continue;const et=q[He];Ye.getSource().reparseOverscaled&&this._assignTerrainTiles(et)}this.proxiedCoords[ce.id]=Ie.map(He=>new Al(He,He.key,this.orthoMatrix)),this._assignTerrainTiles(Ie),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Re),this.renderingToTexture=!1,this._updateTimestamp=I.exported.now();const Ue={};this._visibleDemTiles=[];for(const He of this.proxyCoords){const Ye=this.terrainTileForTile[He.key];if(!Ye)continue;const et=Ye.tileID.key;et in Ue||(this._visibleDemTiles.push(Ye),Ue[et]=et)}}_assignTerrainTiles(q){this._initializing||q.forEach(ce=>{if(this.terrainTileForTile[ce.key])return;const Te=this._findTileCoveringTileID(ce,this.sourceCache);Te&&(this.terrainTileForTile[ce.key]=Te)})}_prepareDEMTextures(){const q=this.painter.context,ce=q.gl;for(const Te in this.terrainTileForTile){const Ie=this.terrainTileForTile[Te],Re=Ie.dem;!Re||Ie.demTexture&&!Ie.needsDEMTextureUpload||(q.activeTexture.set(ce.TEXTURE1),qr(this.painter,Ie,Re))}}_prepareDemTileUniforms(q,ce,Te,Ie){if(!ce||ce.demTexture==null)return!1;const Re=q.tileID.canonical,Be=Math.pow(2,ce.tileID.canonical.z-Re.z),Ue=Ie||"";return Te[`u_dem_tl${Ue}`]=[Re.x*Be%1,Re.y*Be%1],Te[`u_dem_scale${Ue}`]=Be,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const q=this.painter.context,ce=q.gl;if(!this._emptyDepthBufferTexture){const Te=new I.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new I.Texture(q,Te,ce.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let q=0;const ce=this._visibleDemTiles.reduce((Te,Ie)=>{if(!Ie.dem)return Te;const Re=Ie.dem.tree.minimums[0];return Re>0&&q++,Te+Re},0);return q?ce/q:0}_updateEmptyDEMTexture(){const q=this.painter.context,ce=q.gl;q.activeTexture.set(ce.TEXTURE2);const Te=this._getLoadedAreaMinimum(),Ie=new I.RGBAImage({width:1,height:1},new Uint8Array(I.DEMData.pack(Te,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let Re=this._emptyDEMTexture;return Re?Re.update(Ie,{premultiply:!1}):Re=this._emptyDEMTexture=new I.Texture(q,Ie,ce.RGBA,{premultiply:!1}),Re}setupElevationDraw(q,ce,Te){const Ie=this.painter.context,Re=Ie.gl,Be=(Ue=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:I.DEMData.getUnpackVector(Ue),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var Ue;Be.u_dem_size=this.sourceCache.getSource().tileSize,Be.u_exaggeration=this.exaggeration();const He=this.painter.transform,Ye=He.projection,et=q.tileID.canonical;Be.u_tile_tl_up=Ye.upVector(et,0,0),Be.u_tile_tr_up=Ye.upVector(et,I.EXTENT,0),Be.u_tile_br_up=Ye.upVector(et,I.EXTENT,I.EXTENT),Be.u_tile_bl_up=Ye.upVector(et,0,I.EXTENT),Be.u_tile_up_scale=Te&&Te.useDenormalizedUpVectorScale?I.GLOBE_METERS_TO_ECEF:Ye.upVectorScale(et,He.center.lat,He.worldSize).metersToTile;let dt=null,xt=null,Pt=1;if(Te&&Te.morphing&&this._useVertexMorphing){const kt=Te.morphing.srcDemTile,Tt=Te.morphing.dstDemTile;Pt=Te.morphing.phase,kt&&Tt&&(this._prepareDemTileUniforms(q,kt,Be,"_prev")&&(xt=kt),this._prepareDemTileUniforms(q,Tt,Be)&&(dt=Tt))}if(xt&&dt?(Ie.activeTexture.set(Re.TEXTURE2),dt.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE,Re.NEAREST),Ie.activeTexture.set(Re.TEXTURE4),xt.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE,Re.NEAREST),Be.u_dem_lerp=Pt):(dt=this.terrainTileForTile[q.tileID.key],Ie.activeTexture.set(Re.TEXTURE2),(this._prepareDemTileUniforms(q,dt,Be)?dt.demTexture:this.emptyDEMTexture).bind(Re.NEAREST,Re.CLAMP_TO_EDGE)),Ie.activeTexture.set(Re.TEXTURE3),Te&&Te.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),this._depthFBO&&(Be.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE),Be.u_depth_size_inv=[1,1]),Te&&Te.useMeterToDem&&dt){const kt=(1<<dt.tileID.canonical.z)*I.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Be.u_meter_to_dem=kt}Te&&Te.labelPlaneMatrixInv&&(Be.u_label_plane_matrix_inv=Te.labelPlaneMatrixInv),ce.setTerrainUniformValues(Ie,Be)}renderToBackBuffer(q){const ce=this.painter,Te=this.painter.context;q.length!==0&&(Te.bindFramebuffer.set(null),Te.viewport.set([0,0,ce.width,ce.height]),ce.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Ie,Re,Be,Ue,He){if(Ie.transform.projection.name==="globe")(function(Ye,et,dt,xt,Pt){const kt=Ye.context,Tt=kt.gl;let Ct,Et;const zt=Ye.options.showTerrainWireframe?2:0,Ot=Ye.transform,Qt=I.globeUseCustomAntiAliasing(Ye,kt,Ot),Kt=(Qn,kn)=>{if(Et===Qn)return;const Wn=[Ya[Qn],"PROJECTION_GLOBE_VIEW"];Qt&&Wn.push("CUSTOM_ANTIALIASING"),kn&&Wn.push(Ya[zt]),Ct=Ye.useProgram("globeRaster",null,Wn),Et=Qn},Gt=Ye.colorModeForRenderPass(),Xt=new I.DepthMode(Tt.LEQUAL,I.DepthMode.ReadWrite,Ye.depthRangeFor3D);_a.update(Pt);const Wt=I.calculateGlobeMercatorMatrix(Ot),sn=[I.mercatorXfromLng(Ot.center.lng),I.mercatorYfromLat(Ot.center.lat)],_n=zt?[!1,!0]:[!1],qn=Ye.globeSharedBuffers,dn=[Ot.width*I.exported.devicePixelRatio,Ot.height*I.exported.devicePixelRatio],Rn=Float32Array.from(Ot.globeMatrix),Fn={useDenormalizedUpVectorScale:!0};if(_n.forEach(Qn=>{Et=-1;const kn=Qn?Tt.LINES:Tt.TRIANGLES;for(const Wn of xt){const Dn=dt.getTile(Wn),ir=I.StencilMode.disabled,er=et.prevTerrainTileForTile[Wn.key],dr=et.terrainTileForTile[Wn.key];wl(er,dr)&&_a.newMorphing(Wn.key,er,dr,Pt,250),kt.activeTexture.set(Tt.TEXTURE0),Dn.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);const gr=_a.getMorphValuesForProxy(Wn.key),Ar=gr?1:0;gr&&I.extend$1(Fn,{morphing:{srcDemTile:gr.from,dstDemTile:gr.to,phase:I.easeCubicInOut(gr.phase)}});const Ur=I.tileCornersToBounds(Wn.canonical),fr=I.getLatitudinalLod(Ur.getCenter().lat),Sr=I.getGridMatrix(Wn.canonical,Ur,fr),Wr=I.globeNormalizeECEF(I.globeTileBounds(Wn.canonical)),li=dc(Ot.projMatrix,Rn,Wt,Wr,I.globeToMercatorTransition(Ot.zoom),sn,Ot.frustumCorners.TL,Ot.frustumCorners.TR,Ot.frustumCorners.BR,Ot.frustumCorners.BL,Ot.globeCenterInViewSpace,Ot.globeRadius,dn,Sr);if(Kt(Ar,Qn),et.setupElevationDraw(Dn,Ct,Fn),Ye.prepareDrawProgram(kt,Ct,Wn.toUnwrapped()),qn){const[bi,ii,qi]=Qn?qn.getWirefameBuffers(Ye.context,fr):qn.getGridBuffers(fr);Ct.draw(kt,kn,Xt,ir,Gt,I.CullFaceMode.backCCW,li,"globe_raster",bi,ii,qi)}}}),qn){const Qn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Qt&&Qn.push("CUSTOM_ANTIALIASING"),Ct=Ye.useProgram("globeRaster",null,Qn);for(const kn of xt){const{x:Wn,y:Dn,z:ir}=kn.canonical,er=Dn===0,dr=Dn===(1<<ir)-1,[gr,Ar,Ur,fr]=qn.getPoleBuffers(ir);if(fr&&(er||dr)){const Sr=dt.getTile(kn);kt.activeTexture.set(Tt.TEXTURE0),Sr.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);let Wr=I.globePoleMatrixForTile(ir,Wn,Ot);const li=I.globeNormalizeECEF(I.globeTileBounds(kn.canonical)),bi=(ii,qi)=>ii.draw(kt,Tt.TRIANGLES,Xt,I.StencilMode.disabled,Gt,I.CullFaceMode.disabled,dc(Ot.projMatrix,Wr,Wr,li,0,sn,Ot.frustumCorners.TL,Ot.frustumCorners.TR,Ot.frustumCorners.BR,Ot.frustumCorners.BL,Ot.globeCenterInViewSpace,Ot.globeRadius,dn),"globe_pole_raster",qi,Ur,fr);et.setupElevationDraw(Sr,Ct,Fn),Ye.prepareDrawProgram(kt,Ct,kn.toUnwrapped()),er&&bi(Ct,gr),dr&&(Wr=I.scale(I.create(),Wr,[1,-1,1]),bi(Ct,Ar))}}}})(Ie,Re,Be,Ue,He);else{const Ye=Ie.context,et=Ye.gl;let dt,xt;const Pt=Ie.options.showTerrainWireframe?2:0,kt=(Ot,Qt)=>{if(xt===Ot)return;const Kt=[Ya[Ot]];Qt&&Kt.push(Ya[Pt]),dt=Ie.useProgram("terrainRaster",null,Kt),xt=Ot},Tt=Ie.colorModeForRenderPass(),Ct=new I.DepthMode(et.LEQUAL,I.DepthMode.ReadWrite,Ie.depthRangeFor3D);_a.update(He);const Et=Ie.transform,zt=6*Math.pow(1.5,22-Et.zoom)*Re.exaggeration();(Pt?[!1,!0]:[!1]).forEach(Ot=>{xt=-1;const Qt=Ot?et.LINES:et.TRIANGLES,[Kt,Gt]=Ot?Re.getWirefameBuffer():[Re.gridIndexBuffer,Re.gridSegments];for(const Xt of Ue){const Wt=Be.getTile(Xt),sn=I.StencilMode.disabled,_n=Re.prevTerrainTileForTile[Xt.key],qn=Re.terrainTileForTile[Xt.key];wl(_n,qn)&&_a.newMorphing(Xt.key,_n,qn,He,250),Ye.activeTexture.set(et.TEXTURE0),Wt.texture.bind(et.LINEAR,et.CLAMP_TO_EDGE,et.LINEAR_MIPMAP_NEAREST);const dn=_a.getMorphValuesForProxy(Xt.key),Rn=dn?1:0;let Fn;dn&&(Fn={morphing:{srcDemTile:dn.from,dstDemTile:dn.to,phase:I.easeCubicInOut(dn.phase)}});const Qn=$o(Xt.projMatrix,nh(Xt.canonical,Et.renderWorldCopies)?zt/10:zt);kt(Rn,Ot),Re.setupElevationDraw(Wt,dt,Fn),Ie.prepareDrawProgram(Ye,dt,Xt.toUnwrapped()),dt.draw(Ye,Qt,Ct,sn,Tt,I.CullFaceMode.backCCW,Qn,"terrain_raster",Re.gridBuffer,Kt,Gt)}})}}(ce,this,this.proxySourceCache,q,this._updateTimestamp),this.renderingToTexture=!0,ce.gpuTimingDeferredRenderEnd(),q.splice(0,q.length))}renderBatch(q){if(this._drapedRenderBatches.length===0)return q+1;this.renderingToTexture=!0;const ce=this.painter,Te=this.painter.context,Ie=this.proxySourceCache,Re=this.proxiedCoords[Ie.id],Be=this._drapedRenderBatches.shift(),Ue=[],He=ce.style.order;let Ye=0;for(const et of Re){const dt=Ie.getTileByID(et.proxyTileKey),xt=Ie.proxyCachedFBO[et.key]?Ie.proxyCachedFBO[et.key][q]:void 0,Pt=xt!==void 0?Ie.renderCache[xt]:this.pool[Ye++],kt=xt!==void 0;if(dt.texture=Pt.tex,kt&&!Pt.dirty){Ue.push(dt.tileID);continue}let Tt;Te.bindFramebuffer.set(Pt.fb.framebuffer),this.renderedToTile=!1,Pt.dirty&&(Te.clear({color:I.Color.transparent,stencil:0}),Pt.dirty=!1);for(let Ct=Be.start;Ct<=Be.end;++Ct){const Et=ce.style._layers[He[Ct]];if(Et.isHidden(ce.transform.zoom))continue;const zt=ce.style._getLayerSourceCache(Et),Ot=zt?this.proxyToSource[et.key][zt.id]:[et];if(!Ot)continue;const Qt=Ot;Te.viewport.set([0,0,Pt.fb.width,Pt.fb.height]),Tt!==(zt?zt.id:null)&&(this._setupStencil(Pt,Ot,Et,zt),Tt=zt?zt.id:null),ce.renderLayer(ce,zt,Et,Qt)}this.renderedToTile?(Pt.dirty=!0,Ue.push(dt.tileID)):kt||--Ye,Ye===5&&(Ye=0,this.renderToBackBuffer(Ue))}return this.renderToBackBuffer(Ue),this.renderingToTexture=!1,Te.bindFramebuffer.set(null),Te.viewport.set([0,0,ce.width,ce.height]),Be.end+1}postRender(){}renderCacheEfficiency(q){const ce=q.order.length;if(ce===0)return{efficiency:100};let Te,Ie=0,Re=0,Be=!1;for(let Ue=0;Ue<ce;++Ue){const He=q._layers[q.order[Ue]];this._style.isLayerDraped(He)?(Be&&++Ie,++Re):Be||(Be=!0,Te=He.id)}return Re===0?{efficiency:100}:{efficiency:100*(1-Ie/Re),firstUndrapedLayer:Te}}getMinElevationBelowMSL(){let q=0;return this._visibleDemTiles.filter(ce=>ce.dem).forEach(ce=>{q=Math.min(q,ce.dem.tree.minimums[0])}),q===0?q:(q-30)*this._exaggeration}raycast(q,ce,Te){if(!this._visibleDemTiles)return null;const Ie=this._visibleDemTiles.filter(Re=>Re.dem).map(Re=>{const Be=Re.tileID,Ue=1<<Be.overscaledZ,{x:He,y:Ye}=Be.canonical,et=He/Ue,dt=(He+1)/Ue,xt=Ye/Ue,Pt=(Ye+1)/Ue;return{minx:et,miny:xt,maxx:dt,maxy:Pt,t:Re.dem.tree.raycastRoot(et,xt,dt,Pt,q,ce,Te),tile:Re}});Ie.sort((Re,Be)=>(Re.t!==null?Re.t:Number.MAX_VALUE)-(Be.t!==null?Be.t:Number.MAX_VALUE));for(const Re of Ie){if(Re.t==null)return null;const Be=Re.tile.dem.tree.raycast(Re.minx,Re.miny,Re.maxx,Re.maxy,q,ce,Te);if(Be!=null)return Be}return null}_createFBO(){const q=this.painter.context,ce=q.gl,Te=this.drapeBufferSize;q.activeTexture.set(ce.TEXTURE0);const Ie=new I.Texture(q,{width:Te[0],height:Te[1],data:null},ce.RGBA);Ie.bind(ce.LINEAR,ce.CLAMP_TO_EDGE);const Re=q.createFramebuffer(Te[0],Te[1],!1);return Re.colorAttachment.set(Ie.texture),Re.depthAttachment=new ct(q,Re.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=q.createRenderbuffer(q.gl.DEPTH_STENCIL,Te[0],Te[1]),this._stencilRef=0,Re.depthAttachment.set(this._sharedDepthStencil),q.clear({stencil:0})):Re.depthAttachment.set(this._sharedDepthStencil),q.extTextureFilterAnisotropic&&!q.extTextureFilterAnisotropicForceOff&&ce.texParameterf(ce.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax),{fb:Re,tex:Ie,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const q in this._style._sourceCaches)if(this._style._sourceCaches[q].hasTransition())return!0;return this._style.order.some(q=>{const ce=this._style._layers[q],Te=ce.isHidden(this.painter.transform.zoom),Ie=ce.getCrossfadeParameters(),Re=!!Ie&&Ie.t!==1,Be=ce.hasTransition();return ce.type!=="custom"&&!Te&&(Re||Be)})}_clearRasterFadeFromRenderCache(){let q=!1;for(const ce in this._style._sourceCaches)if(this._style._sourceCaches[ce]._source instanceof Ut){q=!0;break}if(q)for(let ce=0;ce<this._style.order.length;++ce){const Te=this._style._layers[this._style.order[ce]],Ie=Te.isHidden(this.painter.transform.zoom),Re=this._style._getLayerSourceCache(Te);if(Te.type!=="raster"||Ie||!Re)continue;const Be=Te.paint.get("raster-fade-duration");for(const Ue of this.proxyCoords){const He=this.proxyToSource[Ue.key][Re.id];if(He)for(const Ye of He){const et=El(Re.getTile(Ye),Re.findLoadedParent(Ye,0),Re,this.painter.transform,Be);(et.opacity!==1||et.mix!==0)&&this._clearRenderCacheForTile(Re.id,Ye)}}}}_setupDrapedRenderBatches(){const q=this._style.order,ce=q.length;if(ce===0)return;const Te=[];let Ie,Re=0,Be=this._style._layers[q[Re]];for(;!this._style.isLayerDraped(Be)&&Be.isHidden(this.painter.transform.zoom)&&++Re<ce;)Be=this._style._layers[q[Re]];for(;Re<ce;++Re){const Ue=this._style._layers[q[Re]];Ue.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(Ue)?Ie===void 0&&(Ie=Re):Ie!==void 0&&(Te.push({start:Ie,end:Re-1}),Ie=void 0))}Ie!==void 0&&Te.push({start:Ie,end:Re-1}),this._drapedRenderBatches=Te}_setupRenderCache(q){const ce=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,ce.renderCache.length>ce.renderCachePool.length){const Be=Object.values(ce.proxyCachedFBO);ce.proxyCachedFBO={};for(let Ue=0;Ue<Be.length;++Ue){const He=Object.values(Be[Ue]);ce.renderCachePool.push(...He)}}return}this._clearRasterFadeFromRenderCache();const Te=this.proxyCoords,Ie=this._tilesDirty;for(let Be=Te.length-1;Be>=0;Be--){const Ue=Te[Be];if(ce.getTileByID(Ue.key),ce.proxyCachedFBO[Ue.key]!==void 0){const He=q[Ue.key],Ye=this.proxyToSource[Ue.key];let et=0;for(const dt in Ye){const xt=Ye[dt],Pt=He[dt];if(!Pt||Pt.length!==xt.length||xt.some((kt,Tt)=>kt!==Pt[Tt]||Ie[dt]&&Ie[dt].hasOwnProperty(kt.key))){et=-1;break}++et}for(const dt in ce.proxyCachedFBO[Ue.key])ce.renderCache[ce.proxyCachedFBO[Ue.key][dt]].dirty=et<0||et!==Object.values(He).length}}const Re=[...this._drapedRenderBatches];Re.sort((Be,Ue)=>Ue.end-Ue.start-(Be.end-Be.start));for(const Be of Re)for(const Ue of Te){if(ce.proxyCachedFBO[Ue.key])continue;let He=ce.renderCachePool.pop();He===void 0&&ce.renderCache.length<50&&(He=ce.renderCache.length,ce.renderCache.push(this._createFBO())),He!==void 0&&(ce.proxyCachedFBO[Ue.key]={},ce.proxyCachedFBO[Ue.key][Be.start]=He,ce.renderCache[He].dirty=!0)}this._tilesDirty={}}_setupStencil(q,ce,Te,Ie){if(!Ie||!this._sourceTilesOverlap[Ie.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Re=this.painter.context,Be=Re.gl;if(ce.length<=1)return void(this._overlapStencilType=!1);let Ue;if(Te.isTileClipped())Ue=ce.length,this._overlapStencilMode.test={func:Be.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(ce[0].overscaledZ>ce[ce.length-1].overscaledZ))return void(this._overlapStencilType=!1);Ue=1,this._overlapStencilMode.test={func:Be.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+Ue>255&&(Re.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=Ue,this._overlapStencilMode.ref=this._stencilRef,Te.isTileClipped()&&this._renderTileClippingMasks(ce,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(q){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[q.key]),this._overlapStencilMode):I.StencilMode.disabled}_renderTileClippingMasks(q,ce){const Te=this.painter,Ie=this.painter.context,Re=Ie.gl;Te._tileClippingMaskIDs={},Ie.setColorMode(I.ColorMode.disabled),Ie.setDepthMode(I.DepthMode.disabled);const Be=Te.useProgram("clippingMask");for(const Ue of q){const He=Te._tileClippingMaskIDs[Ue.key]=--ce;Be.draw(Ie,Re.TRIANGLES,I.DepthMode.disabled,new I.StencilMode({func:Re.ALWAYS,mask:0},He,255,Re.KEEP,Re.KEEP,Re.REPLACE),I.ColorMode.disabled,I.CullFaceMode.disabled,Jo(Ue.projMatrix),"$clipping",Te.tileExtentBuffer,Te.quadTriangleIndexBuffer,Te.tileExtentSegments)}}pointCoordinate(q){const ce=this.painter.transform;if(q.x<0||q.x>ce.width||q.y<0||q.y>ce.height)return null;const Te=[q.x,q.y,1,1];I.transformMat4$1(Te,Te,ce.pixelMatrixInverse),I.scale$1(Te,Te,1/Te[3]),Te[0]/=ce.worldSize,Te[1]/=ce.worldSize;const Ie=ce._camera.position,Re=I.mercatorZfromAltitude(1,ce.center.lat),Be=[Ie[0],Ie[1],Ie[2]/Re,0],Ue=I.subtract([],Te.slice(0,3),Be);I.normalize(Ue,Ue);const He=this.raycast(Be,Ue,this._exaggeration);return He!==null&&He?(I.scaleAndAdd(Be,Be,Ue,He),Be[3]=Be[2],Be[2]*=Re,Be):null}drawDepth(){const q=this.painter,ce=q.context,Te=this.proxySourceCache,Ie=Math.ceil(q.width),Re=Math.ceil(q.height);if(!this._depthFBO||this._depthFBO.width===Ie&&this._depthFBO.height===Re||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Be=ce.gl,Ue=ce.createFramebuffer(Ie,Re,!0);ce.activeTexture.set(Be.TEXTURE0);const He=new I.Texture(ce,{width:Ie,height:Re,data:null},Be.RGBA);He.bind(Be.NEAREST,Be.CLAMP_TO_EDGE),Ue.colorAttachment.set(He.texture);const Ye=ce.createRenderbuffer(ce.gl.DEPTH_COMPONENT16,Ie,Re);Ue.depthAttachment.set(Ye),this._depthFBO=Ue,this._depthTexture=He}ce.bindFramebuffer.set(this._depthFBO.framebuffer),ce.viewport.set([0,0,Ie,Re]),function(Be,Ue,He,Ye){if(Be.transform.projection.name==="globe")return;const et=Be.context,dt=et.gl;et.clear({depth:1});const xt=Be.useProgram("terrainDepth"),Pt=new I.DepthMode(dt.LESS,I.DepthMode.ReadWrite,Be.depthRangeFor3D);for(const kt of Ye){const Tt=He.getTile(kt),Ct=$o(kt.projMatrix,0);Ue.setupElevationDraw(Tt,xt),xt.draw(et,dt.TRIANGLES,Pt,I.StencilMode.disabled,I.ColorMode.unblended,I.CullFaceMode.backCCW,Ct,"terrain_depth",Ue.gridBuffer,Ue.gridIndexBuffer,Ue.gridNoSkirtSegments)}}(q,this,Te,this.proxyCoords)}_setupProxiedCoordsForOrtho(q,ce,Te){if(q.getSource()instanceof hn)return this._setupProxiedCoordsForImageSource(q,ce,Te);this._findCoveringTileCache[q.id]=this._findCoveringTileCache[q.id]||{};const Ie=this.proxiedCoords[q.id]=[],Re=this.proxyCoords;for(let Ue=0;Ue<Re.length;Ue++){const He=Re[Ue],Ye=this._findTileCoveringTileID(He,q);if(Ye){const et=this._createProxiedId(He,Ye,Te[He.key]&&Te[He.key][q.id]);Ie.push(et),this.proxyToSource[He.key][q.id]=[et]}}let Be=!1;for(let Ue=0;Ue<ce.length;Ue++){const He=q.getTile(ce[Ue]);if(!He||!He.hasData())continue;const Ye=this._findTileCoveringTileID(He.tileID,this.proxySourceCache);if(Ye&&Ye.tileID.canonical.z!==He.tileID.canonical.z){const et=this.proxyToSource[Ye.tileID.key][q.id],dt=this._createProxiedId(Ye.tileID,He,Te[Ye.tileID.key]&&Te[Ye.tileID.key][q.id]);et?et.splice(et.length-1,0,dt):this.proxyToSource[Ye.tileID.key][q.id]=[dt],Ie.push(dt),Be=!0}}this._sourceTilesOverlap[q.id]=Be}_setupProxiedCoordsForImageSource(q,ce,Te){if(!q.getSource().loaded())return;const Ie=this.proxiedCoords[q.id]=[],Re=this.proxyCoords,Be=q.getSource(),Ue=new I.pointGeometry(Be.tileID.x,Be.tileID.y)._div(1<<Be.tileID.z),He=Be.coordinates.map(I.MercatorCoordinate.fromLngLat).reduce((et,dt)=>(et.min.x=Math.min(et.min.x,dt.x-Ue.x),et.min.y=Math.min(et.min.y,dt.y-Ue.y),et.max.x=Math.max(et.max.x,dt.x-Ue.x),et.max.y=Math.max(et.max.y,dt.y-Ue.y),et),{min:new I.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new I.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Ye=(et,dt)=>{const xt=et.wrap+et.canonical.x/(1<<et.canonical.z),Pt=et.canonical.y/(1<<et.canonical.z),kt=I.EXTENT/(1<<et.canonical.z),Tt=dt.wrap+dt.canonical.x/(1<<dt.canonical.z),Ct=dt.canonical.y/(1<<dt.canonical.z);return xt+kt<Tt+He.min.x||xt>Tt+He.max.x||Pt+kt<Ct+He.min.y||Pt>Ct+He.max.y};for(let et=0;et<Re.length;et++){const dt=Re[et];for(let xt=0;xt<ce.length;xt++){const Pt=q.getTile(ce[xt]);if(!Pt||!Pt.hasData()||Ye(dt,Pt.tileID))continue;const kt=this._createProxiedId(dt,Pt,Te[dt.key]&&Te[dt.key][q.id]),Tt=this.proxyToSource[dt.key][q.id];Tt?Tt.push(kt):this.proxyToSource[dt.key][q.id]=[kt],Ie.push(kt)}}}_createProxiedId(q,ce,Te){let Ie=this.orthoMatrix;if(Te){const Re=Te.find(Be=>Be.key===ce.tileID.key);if(Re)return Re}if(ce.tileID.key!==q.key){const Re=q.canonical.z-ce.tileID.canonical.z;let Be,Ue,He;Ie=I.create();const Ye=ce.tileID.wrap-q.wrap<<q.overscaledZ;Re>0?(Be=I.EXTENT>>Re,Ue=Be*((ce.tileID.canonical.x<<Re)-q.canonical.x+Ye),He=Be*((ce.tileID.canonical.y<<Re)-q.canonical.y)):(Be=I.EXTENT<<-Re,Ue=I.EXTENT*(ce.tileID.canonical.x-(q.canonical.x+Ye<<-Re)),He=I.EXTENT*(ce.tileID.canonical.y-(q.canonical.y<<-Re))),I.ortho(Ie,0,Be,0,Be,0,1),I.translate(Ie,Ie,[Ue,He,0])}return new Al(ce.tileID,q.key,Ie)}_findTileCoveringTileID(q,ce){let Te=ce.getTile(q);if(Te&&Te.hasData())return Te;const Ie=this._findCoveringTileCache[ce.id],Re=Ie[q.key];if(Te=Re?ce.getTileByID(Re):null,Te&&Te.hasData()||Re===null)return Te;let Be=Te?Te.tileID:q,Ue=Be.overscaledZ;const He=ce.getSource().minzoom,Ye=[];if(!Re){const dt=ce.getSource().maxzoom;if(q.canonical.z>=dt){const xt=q.canonical.z-dt;ce.getSource().reparseOverscaled?(Ue=Math.max(q.canonical.z+2,ce.transform.tileZoom),Be=new I.OverscaledTileID(Ue,q.wrap,dt,q.canonical.x>>xt,q.canonical.y>>xt)):xt!==0&&(Ue=dt,Be=new I.OverscaledTileID(Ue,q.wrap,dt,q.canonical.x>>xt,q.canonical.y>>xt))}Be.key!==q.key&&(Ye.push(Be.key),Te=ce.getTile(Be))}const et=dt=>{Ye.forEach(xt=>{Ie[xt]=dt}),Ye.length=0};for(Ue-=1;Ue>=He&&(!Te||!Te.hasData());Ue--){Te&&et(Te.tileID.key);const dt=Be.calculateScaledKey(Ue);if(Te=ce.getTileByID(dt),Te&&Te.hasData())break;const xt=Ie[dt];if(xt===null)break;xt===void 0?Ye.push(dt):Te=ce.getTileByID(xt)}return et(Te?Te.tileID.key:null),Te&&Te.hasData()?Te:null}findDEMTileFor(q){return this.enabled?this._findTileCoveringTileID(q,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(q,ce){let Te=this._tilesDirty[q];Te||(Te=this._tilesDirty[q]={}),Te[ce.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const q=function(ce){let Te=0;const Ie=new I.StructArrayLayout2ui4,Re=131;for(let Be=1;Be<129;Be++){for(let Ue=1;Ue<129;Ue++)Te=Be*Re+Ue,Ie.emplaceBack(Te,Te+1),Ie.emplaceBack(Te,Te+Re),Ie.emplaceBack(Te+1,Te+Re),Be===128&&Ie.emplaceBack(Te+Re,Te+Re+1);Ie.emplaceBack(Te+1,Te+1+Re)}return Ie}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(q),this.wireframeSegments=I.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,q.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Tl{static cacheKey(q,ce,Te,Ie){let Re=`${ce}${Ie?Ie.cacheKey:""}`;for(const Be of Te)q.usedDefines.includes(Be)&&(Re+=`/${Be}`);return Re}constructor(q,ce,Te,Ie,Re,Be){const Ue=q.gl;this.program=Ue.createProgram();const He=function(Ct){const Et=[];for(let zt=0;zt<Ct.length;zt++){if(Ct[zt]===null)continue;const Ot=Ct[zt].split(" ");Et.push(Ot.pop())}return Et}(Te.staticAttributes),Ye=Ie?Ie.getBinderAttributes():[],et=He.concat(Ye);let dt=Ie?Ie.defines():[];dt=dt.concat(Be.map(Ct=>`#define ${Ct}`));const xt=dt.concat(q.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(zs):zs,zs,vl,jo.fragmentSource,No.fragmentSource,Te.fragmentSource).join(`
`),Pt=dt.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,vl,jo.vertexSource,No.vertexSource,yl.vertexSource,Te.vertexSource).join(`
`),kt=Ue.createShader(Ue.FRAGMENT_SHADER);if(Ue.isContextLost())return void(this.failedToCreate=!0);Ue.shaderSource(kt,xt),Ue.compileShader(kt),Ue.attachShader(this.program,kt);const Tt=Ue.createShader(Ue.VERTEX_SHADER);if(Ue.isContextLost())this.failedToCreate=!0;else{Ue.shaderSource(Tt,Pt),Ue.compileShader(Tt),Ue.attachShader(this.program,Tt),this.attributes={},this.numAttributes=et.length;for(let Ct=0;Ct<this.numAttributes;Ct++)et[Ct]&&(Ue.bindAttribLocation(this.program,Ct,et[Ct]),this.attributes[et[Ct]]=Ct);Ue.linkProgram(this.program),Ue.deleteShader(Tt),Ue.deleteShader(kt),this.fixedUniforms=Re(q),this.binderUniforms=Ie?Ie.getUniforms(q):[],Be.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(Ct=>({u_dem:new I.Uniform1i(Ct),u_dem_prev:new I.Uniform1i(Ct),u_dem_unpack:new I.Uniform4f(Ct),u_dem_tl:new I.Uniform2f(Ct),u_dem_scale:new I.Uniform1f(Ct),u_dem_tl_prev:new I.Uniform2f(Ct),u_dem_scale_prev:new I.Uniform1f(Ct),u_dem_size:new I.Uniform1f(Ct),u_dem_lerp:new I.Uniform1f(Ct),u_exaggeration:new I.Uniform1f(Ct),u_depth:new I.Uniform1i(Ct),u_depth_size_inv:new I.Uniform2f(Ct),u_meter_to_dem:new I.Uniform1f(Ct),u_label_plane_matrix_inv:new I.UniformMatrix4f(Ct),u_tile_tl_up:new I.Uniform3f(Ct),u_tile_tr_up:new I.Uniform3f(Ct),u_tile_br_up:new I.Uniform3f(Ct),u_tile_bl_up:new I.Uniform3f(Ct),u_tile_up_scale:new I.Uniform1f(Ct)}))(q)),Be.indexOf("FOG")!==-1&&(this.fogUniforms=(Ct=>({u_fog_matrix:new I.UniformMatrix4f(Ct),u_fog_range:new I.Uniform2f(Ct),u_fog_color:new I.Uniform4f(Ct),u_fog_horizon_blend:new I.Uniform1f(Ct),u_fog_temporal_offset:new I.Uniform1f(Ct),u_frustum_tl:new I.Uniform3f(Ct),u_frustum_tr:new I.Uniform3f(Ct),u_frustum_br:new I.Uniform3f(Ct),u_frustum_bl:new I.Uniform3f(Ct),u_globe_pos:new I.Uniform3f(Ct),u_globe_radius:new I.Uniform1f(Ct),u_globe_transition:new I.Uniform1f(Ct),u_is_globe:new I.Uniform1i(Ct),u_viewport:new I.Uniform2f(Ct)}))(q))}}setTerrainUniformValues(q,ce){if(!this.terrainUniforms)return;const Te=this.terrainUniforms;if(!this.failedToCreate){q.program.set(this.program);for(const Ie in ce)Te[Ie].set(this.program,Ie,ce[Ie])}}setFogUniformValues(q,ce){if(!this.fogUniforms)return;const Te=this.fogUniforms;if(!this.failedToCreate){q.program.set(this.program);for(const Ie in ce)Te[Ie].set(this.program,Ie,ce[Ie])}}draw(q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt){const Ct=q.gl;if(this.failedToCreate)return;q.program.set(this.program),q.setDepthMode(Te),q.setStencilMode(Ie),q.setColorMode(Re),q.setCullFace(Be);for(const zt of Object.keys(this.fixedUniforms))this.fixedUniforms[zt].set(this.program,zt,Ue[zt]);kt&&kt.setUniforms(this.program,q,this.binderUniforms,xt,{zoom:Pt});const Et={[Ct.LINES]:2,[Ct.TRIANGLES]:3,[Ct.LINE_STRIP]:1}[ce];for(const zt of dt.get()){const Ot=zt.vaos||(zt.vaos={});(Ot[He]||(Ot[He]=new bl)).bind(q,this,Ye,kt?kt.getPaintVertexBuffers():[],et,zt.vertexOffset,Tt||[]),Ct.drawElements(ce,zt.primitiveLength*Et,Ct.UNSIGNED_SHORT,zt.primitiveOffset*Et*2)}}}function nu(be,q,ce){const Te=1/Tn(ce,1,q.transform.tileZoom),Ie=Math.pow(2,ce.tileID.overscaledZ),Re=ce.tileSize*Math.pow(2,q.transform.tileZoom)/Ie,Be=Re*(ce.tileID.canonical.x+ce.tileID.wrap*Ie),Ue=Re*ce.tileID.canonical.y;return{u_image:0,u_texsize:ce.imageAtlasTexture.size,u_scale:[Te,be.fromScale,be.toScale],u_fade:be.t,u_pixel_coord_upper:[Be>>16,Ue>>16],u_pixel_coord_lower:[65535&Be,65535&Ue]}}const Uo=I.create(),Ja=(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et)=>{const dt=q.style.light,xt=dt.properties.get("position"),Pt=[xt.x,xt.y,xt.z],kt=I.create$1();dt.properties.get("anchor")==="viewport"&&(I.fromRotation(kt,-q.transform.angle),I.transformMat3(Pt,Pt,kt));const Tt=dt.properties.get("color"),Ct=q.transform,Et={u_matrix:be,u_lightpos:Pt,u_lightintensity:dt.properties.get("intensity"),u_lightcolor:[Tt.r,Tt.g,Tt.b],u_vertical_gradient:+ce,u_opacity:Te,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Uo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Ie,u_edge_radius:Re};return Ct.projection.name==="globe"&&(Et.u_tile_id=[Be.canonical.x,Be.canonical.y,1<<Be.canonical.z],Et.u_zoom_transition=He,Et.u_inv_rot_matrix=et,Et.u_merc_center=Ye,Et.u_up_dir=Ct.projection.upVector(new I.CanonicalTileID(0,0,0),Ye[0]*I.EXTENT,Ye[1]*I.EXTENT),Et.u_height_lift=Ue),Et},ru=(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt)=>{const Pt=Ja(be,q,ce,Te,Ie,Re,Be,Ye,et,dt,xt),kt={u_height_factor:-Math.pow(2,Be.overscaledZ)/He.tileSize/8};return I.extend(Pt,nu(Ue,q,He),kt)},Bs=be=>({u_matrix:be}),kl=(be,q,ce,Te)=>I.extend(Bs(be),nu(ce,q,Te)),Vo=(be,q)=>({u_matrix:be,u_world:q}),Pa=(be,q,ce,Te,Ie)=>I.extend(kl(be,q,ce,Te),{u_world:Ie}),iu=I.create(),fc=(be,q,ce,Te,Ie,Re)=>{const Be=be.transform,Ue=Be.projection.name==="globe";let He;if(Re.paint.get("circle-pitch-alignment")==="map")if(Ue){const et=I.globePixelsToTileUnits(Be.zoom,q.canonical)*Be._pixelsPerMercatorPixel;He=Float32Array.from([et,0,0,et])}else He=Be.calculatePixelsToTileUnitsMatrix(ce);else He=new Float32Array([Be.pixelsToGLUnits[0],0,0,Be.pixelsToGLUnits[1]]);const Ye={u_camera_to_center_distance:Be.cameraToCenterDistance,u_matrix:be.translatePosMatrix(q.projMatrix,ce,Re.paint.get("circle-translate"),Re.paint.get("circle-translate-anchor")),u_device_pixel_ratio:I.exported.devicePixelRatio,u_extrude_scale:He,u_inv_rot_matrix:iu,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Ue){Ye.u_inv_rot_matrix=Te,Ye.u_merc_center=Ie,Ye.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],Ye.u_zoom_transition=I.globeToMercatorTransition(Be.zoom);const et=Ie[0]*I.EXTENT,dt=Ie[1]*I.EXTENT;Ye.u_up_dir=Be.projection.upVector(new I.CanonicalTileID(0,0,0),et,dt)}return Ye},ou=be=>{const q=[];return be.paint.get("circle-pitch-alignment")==="map"&&q.push("PITCH_WITH_MAP"),be.paint.get("circle-pitch-scale")==="map"&&q.push("SCALE_WITH_MAP"),q},_c=(be,q,ce,Te)=>{const Ie=I.EXTENT/ce.tileSize;return{u_matrix:be,u_camera_to_center_distance:q.getCameraToCenterDistance(Te),u_extrude_scale:[q.pixelsToGLUnits[0]/Ie,q.pixelsToGLUnits[1]/Ie]}},au=(be,q,ce=1)=>({u_matrix:be,u_color:q,u_overlay:0,u_overlay_scale:ce}),mc=I.create(),rh=(be,q,ce,Te,Ie,Re,Be)=>{const Ue=be.transform,He=Ue.projection.name==="globe",Ye=He?I.globePixelsToTileUnits(Ue.zoom,q.canonical)*Ue._pixelsPerMercatorPixel:Tn(ce,1,Re),et={u_matrix:q.projMatrix,u_extrude_scale:Ye,u_intensity:Be,u_inv_rot_matrix:mc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(He){et.u_inv_rot_matrix=Te,et.u_merc_center=Ie,et.u_tile_id=[q.canonical.x,q.canonical.y,1<<q.canonical.z],et.u_zoom_transition=I.globeToMercatorTransition(Ue.zoom);const dt=Ie[0]*I.EXTENT,xt=Ie[1]*I.EXTENT;et.u_up_dir=Ue.projection.upVector(new I.CanonicalTileID(0,0,0),dt,xt)}return et},Cl=(be,q,ce,Te,Ie,Re,Be,Ue)=>{const He=be.transform,Ye=He.calculatePixelsToTileUnitsMatrix(q),et={u_matrix:su(be,q,ce,Ie),u_pixels_to_tile_units:Ye,u_device_pixel_ratio:Be,u_units_to_pixels:[1/He.pixelsToGLUnits[0],1/He.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Re,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:Ue};if(Pl(ce)){const dt=Sl(q,be.transform);et.u_texsize=q.lineAtlasTexture.size,et.u_scale=[dt,Te.fromScale,Te.toScale],et.u_mix=Te.t}return et},ih=(be,q,ce,Te,Ie,Re)=>{const Be=be.transform,Ue=Sl(q,Be);return{u_matrix:su(be,q,ce,Ie),u_texsize:q.imageAtlasTexture.size,u_pixels_to_tile_units:Be.calculatePixelsToTileUnitsMatrix(q),u_device_pixel_ratio:Re,u_image:0,u_scale:[Ue,Te.fromScale,Te.toScale],u_fade:Te.t,u_units_to_pixels:[1/Be.pixelsToGLUnits[0],1/Be.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Sl(be,q){return 1/Tn(be,1,q.tileZoom)}function su(be,q,ce,Te){return be.translatePosMatrix(Te||q.tileID.projMatrix,q,ce.paint.get("line-translate"),ce.paint.get("line-translate-anchor"))}function Pl(be){const q=be.paint.get("line-dasharray").value;return q.value||q.kind!=="constant"}const oh=(be,q,ce,Te,Ie,Re)=>{return{u_matrix:be,u_tl_parent:q,u_scale_parent:ce,u_fade_t:Te.mix,u_opacity:Te.opacity*Ie.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Ie.paint.get("raster-brightness-min"),u_brightness_high:Ie.paint.get("raster-brightness-max"),u_saturation_factor:(Ue=Ie.paint.get("raster-saturation"),Ue>0?1-1/(1.001-Ue):-Ue),u_contrast_factor:(Be=Ie.paint.get("raster-contrast"),Be>0?1/(1-Be):1+Be),u_spin_weights:Fs(Ie.paint.get("raster-hue-rotate")),u_perspective_transform:Re};var Be,Ue};function Fs(be){be*=Math.PI/180;const q=Math.sin(be),ce=Math.cos(be);return[(2*ce+1)/3,(-Math.sqrt(3)*q-ce+1)/3,(Math.sqrt(3)*q-ce+1)/3]}const lu=I.create(),Qa=(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt)=>{const Ct=Ie.transform,Et={u_is_size_zoom_constant:+(be==="constant"||be==="source"),u_is_size_feature_constant:+(be==="constant"||be==="camera"),u_size_t:q?q.uSizeT:0,u_size:q?q.uSize:0,u_camera_to_center_distance:Ct.cameraToCenterDistance,u_rotate_symbol:+ce,u_aspect_ratio:Ct.width/Ct.height,u_fade_change:Ie.options.fadeDuration?Ie.symbolFadeChange:1,u_matrix:Re,u_label_plane_matrix:Be,u_coord_matrix:Ue,u_is_text:+He,u_pitch_with_map:+Te,u_texsize:Ye,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:lu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:lu,u_up_vector:[0,-1,0]};return Tt.name==="globe"&&(Et.u_tile_id=[et.canonical.x,et.canonical.y,1<<et.canonical.z],Et.u_zoom_transition=dt,Et.u_inv_rot_matrix=Pt,Et.u_merc_center=xt,Et.u_camera_forward=Ct._camera.forward(),Et.u_ecef_origin=I.globeECEFOrigin(Ct.globeMatrix,et.toUnwrapped()),Et.u_tile_matrix=Float32Array.from(Ct.globeMatrix),Et.u_up_vector=kt),Et},gc=(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt,Ct)=>I.extend(Qa(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,dt,xt,Pt,kt,Tt,Ct),{u_gamma_scale:Te?Ie.transform.cameraToCenterDistance*Math.cos(Ie.terrain?0:Ie.transform._pitch):1,u_device_pixel_ratio:I.exported.devicePixelRatio,u_is_halo:+et}),Ia=(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt,xt,Pt,kt,Tt)=>I.extend(gc(be,q,ce,Te,Ie,Re,Be,Ue,!0,He,!0,et,dt,xt,Pt,kt,Tt),{u_texsize_icon:Ye,u_texture_icon:1}),ah=(be,q,ce)=>({u_matrix:be,u_opacity:q,u_color:ce}),cu=(be,q,ce,Te,Ie,Re)=>I.extend(function(Be,Ue,He,Ye){const et=He.imageManager.getPattern(Be.from.toString()),dt=He.imageManager.getPattern(Be.to.toString()),{width:xt,height:Pt}=He.imageManager.getPixelSize(),kt=Math.pow(2,Ye.tileID.overscaledZ),Tt=Ye.tileSize*Math.pow(2,He.transform.tileZoom)/kt,Ct=Tt*(Ye.tileID.canonical.x+Ye.tileID.wrap*kt),Et=Tt*Ye.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:et.tl,u_pattern_br_a:et.br,u_pattern_tl_b:dt.tl,u_pattern_br_b:dt.br,u_texsize:[xt,Pt],u_mix:Ue.t,u_pattern_size_a:et.displaySize,u_pattern_size_b:dt.displaySize,u_scale_a:Ue.fromScale,u_scale_b:Ue.toScale,u_tile_units_to_pixels:1/Tn(Ye,1,He.transform.tileZoom),u_pixel_coord_upper:[Ct>>16,Et>>16],u_pixel_coord_lower:[65535&Ct,65535&Et]}}(Te,Re,ce,Ie),{u_matrix:be,u_opacity:q}),sh={fillExtrusion:be=>({u_matrix:new I.UniformMatrix4f(be),u_lightpos:new I.Uniform3f(be),u_lightintensity:new I.Uniform1f(be),u_lightcolor:new I.Uniform3f(be),u_vertical_gradient:new I.Uniform1f(be),u_opacity:new I.Uniform1f(be),u_edge_radius:new I.Uniform1f(be),u_ao:new I.Uniform2f(be),u_tile_id:new I.Uniform3f(be),u_zoom_transition:new I.Uniform1f(be),u_inv_rot_matrix:new I.UniformMatrix4f(be),u_merc_center:new I.Uniform2f(be),u_up_dir:new I.Uniform3f(be),u_height_lift:new I.Uniform1f(be)}),fillExtrusionPattern:be=>({u_matrix:new I.UniformMatrix4f(be),u_lightpos:new I.Uniform3f(be),u_lightintensity:new I.Uniform1f(be),u_lightcolor:new I.Uniform3f(be),u_vertical_gradient:new I.Uniform1f(be),u_height_factor:new I.Uniform1f(be),u_edge_radius:new I.Uniform1f(be),u_ao:new I.Uniform2f(be),u_tile_id:new I.Uniform3f(be),u_zoom_transition:new I.Uniform1f(be),u_inv_rot_matrix:new I.UniformMatrix4f(be),u_merc_center:new I.Uniform2f(be),u_up_dir:new I.Uniform3f(be),u_height_lift:new I.Uniform1f(be),u_image:new I.Uniform1i(be),u_texsize:new I.Uniform2f(be),u_pixel_coord_upper:new I.Uniform2f(be),u_pixel_coord_lower:new I.Uniform2f(be),u_scale:new I.Uniform3f(be),u_fade:new I.Uniform1f(be),u_opacity:new I.Uniform1f(be)}),fill:be=>({u_matrix:new I.UniformMatrix4f(be)}),fillPattern:be=>({u_matrix:new I.UniformMatrix4f(be),u_image:new I.Uniform1i(be),u_texsize:new I.Uniform2f(be),u_pixel_coord_upper:new I.Uniform2f(be),u_pixel_coord_lower:new I.Uniform2f(be),u_scale:new I.Uniform3f(be),u_fade:new I.Uniform1f(be)}),fillOutline:be=>({u_matrix:new I.UniformMatrix4f(be),u_world:new I.Uniform2f(be)}),fillOutlinePattern:be=>({u_matrix:new I.UniformMatrix4f(be),u_world:new I.Uniform2f(be),u_image:new I.Uniform1i(be),u_texsize:new I.Uniform2f(be),u_pixel_coord_upper:new I.Uniform2f(be),u_pixel_coord_lower:new I.Uniform2f(be),u_scale:new I.Uniform3f(be),u_fade:new I.Uniform1f(be)}),circle:be=>({u_camera_to_center_distance:new I.Uniform1f(be),u_extrude_scale:new I.UniformMatrix2f(be),u_device_pixel_ratio:new I.Uniform1f(be),u_matrix:new I.UniformMatrix4f(be),u_inv_rot_matrix:new I.UniformMatrix4f(be),u_merc_center:new I.Uniform2f(be),u_tile_id:new I.Uniform3f(be),u_zoom_transition:new I.Uniform1f(be),u_up_dir:new I.Uniform3f(be)}),collisionBox:be=>({u_matrix:new I.UniformMatrix4f(be),u_camera_to_center_distance:new I.Uniform1f(be),u_extrude_scale:new I.Uniform2f(be)}),collisionCircle:be=>({u_matrix:new I.UniformMatrix4f(be),u_inv_matrix:new I.UniformMatrix4f(be),u_camera_to_center_distance:new I.Uniform1f(be),u_viewport_size:new I.Uniform2f(be)}),debug:be=>({u_color:new I.UniformColor(be),u_matrix:new I.UniformMatrix4f(be),u_overlay:new I.Uniform1i(be),u_overlay_scale:new I.Uniform1f(be)}),clippingMask:be=>({u_matrix:new I.UniformMatrix4f(be)}),heatmap:be=>({u_extrude_scale:new I.Uniform1f(be),u_intensity:new I.Uniform1f(be),u_matrix:new I.UniformMatrix4f(be),u_inv_rot_matrix:new I.UniformMatrix4f(be),u_merc_center:new I.Uniform2f(be),u_tile_id:new I.Uniform3f(be),u_zoom_transition:new I.Uniform1f(be),u_up_dir:new I.Uniform3f(be)}),heatmapTexture:be=>({u_image:new I.Uniform1i(be),u_color_ramp:new I.Uniform1i(be),u_opacity:new I.Uniform1f(be)}),hillshade:be=>({u_matrix:new I.UniformMatrix4f(be),u_image:new I.Uniform1i(be),u_latrange:new I.Uniform2f(be),u_light:new I.Uniform2f(be),u_shadow:new I.UniformColor(be),u_highlight:new I.UniformColor(be),u_accent:new I.UniformColor(be)}),hillshadePrepare:be=>({u_matrix:new I.UniformMatrix4f(be),u_image:new I.Uniform1i(be),u_dimension:new I.Uniform2f(be),u_zoom:new I.Uniform1f(be),u_unpack:new I.Uniform4f(be)}),line:be=>({u_matrix:new I.UniformMatrix4f(be),u_pixels_to_tile_units:new I.UniformMatrix2f(be),u_device_pixel_ratio:new I.Uniform1f(be),u_units_to_pixels:new I.Uniform2f(be),u_dash_image:new I.Uniform1i(be),u_gradient_image:new I.Uniform1i(be),u_image_height:new I.Uniform1f(be),u_texsize:new I.Uniform2f(be),u_scale:new I.Uniform3f(be),u_mix:new I.Uniform1f(be),u_alpha_discard_threshold:new I.Uniform1f(be),u_trim_offset:new I.Uniform2f(be)}),linePattern:be=>({u_matrix:new I.UniformMatrix4f(be),u_texsize:new I.Uniform2f(be),u_pixels_to_tile_units:new I.UniformMatrix2f(be),u_device_pixel_ratio:new I.Uniform1f(be),u_image:new I.Uniform1i(be),u_units_to_pixels:new I.Uniform2f(be),u_scale:new I.Uniform3f(be),u_fade:new I.Uniform1f(be),u_alpha_discard_threshold:new I.Uniform1f(be)}),raster:be=>({u_matrix:new I.UniformMatrix4f(be),u_tl_parent:new I.Uniform2f(be),u_scale_parent:new I.Uniform1f(be),u_fade_t:new I.Uniform1f(be),u_opacity:new I.Uniform1f(be),u_image0:new I.Uniform1i(be),u_image1:new I.Uniform1i(be),u_brightness_low:new I.Uniform1f(be),u_brightness_high:new I.Uniform1f(be),u_saturation_factor:new I.Uniform1f(be),u_contrast_factor:new I.Uniform1f(be),u_spin_weights:new I.Uniform3f(be),u_perspective_transform:new I.Uniform2f(be)}),symbolIcon:be=>({u_is_size_zoom_constant:new I.Uniform1i(be),u_is_size_feature_constant:new I.Uniform1i(be),u_size_t:new I.Uniform1f(be),u_size:new I.Uniform1f(be),u_camera_to_center_distance:new I.Uniform1f(be),u_rotate_symbol:new I.Uniform1i(be),u_aspect_ratio:new I.Uniform1f(be),u_fade_change:new I.Uniform1f(be),u_matrix:new I.UniformMatrix4f(be),u_label_plane_matrix:new I.UniformMatrix4f(be),u_coord_matrix:new I.UniformMatrix4f(be),u_is_text:new I.Uniform1i(be),u_pitch_with_map:new I.Uniform1i(be),u_texsize:new I.Uniform2f(be),u_tile_id:new I.Uniform3f(be),u_zoom_transition:new I.Uniform1f(be),u_inv_rot_matrix:new I.UniformMatrix4f(be),u_merc_center:new I.Uniform2f(be),u_camera_forward:new I.Uniform3f(be),u_tile_matrix:new I.UniformMatrix4f(be),u_up_vector:new I.Uniform3f(be),u_ecef_origin:new I.Uniform3f(be),u_texture:new I.Uniform1i(be)}),symbolSDF:be=>({u_is_size_zoom_constant:new I.Uniform1i(be),u_is_size_feature_constant:new I.Uniform1i(be),u_size_t:new I.Uniform1f(be),u_size:new I.Uniform1f(be),u_camera_to_center_distance:new I.Uniform1f(be),u_rotate_symbol:new I.Uniform1i(be),u_aspect_ratio:new I.Uniform1f(be),u_fade_change:new I.Uniform1f(be),u_matrix:new I.UniformMatrix4f(be),u_label_plane_matrix:new I.UniformMatrix4f(be),u_coord_matrix:new I.UniformMatrix4f(be),u_is_text:new I.Uniform1i(be),u_pitch_with_map:new I.Uniform1i(be),u_texsize:new I.Uniform2f(be),u_texture:new I.Uniform1i(be),u_gamma_scale:new I.Uniform1f(be),u_device_pixel_ratio:new I.Uniform1f(be),u_tile_id:new I.Uniform3f(be),u_zoom_transition:new I.Uniform1f(be),u_inv_rot_matrix:new I.UniformMatrix4f(be),u_merc_center:new I.Uniform2f(be),u_camera_forward:new I.Uniform3f(be),u_tile_matrix:new I.UniformMatrix4f(be),u_up_vector:new I.Uniform3f(be),u_ecef_origin:new I.Uniform3f(be),u_is_halo:new I.Uniform1i(be)}),symbolTextAndIcon:be=>({u_is_size_zoom_constant:new I.Uniform1i(be),u_is_size_feature_constant:new I.Uniform1i(be),u_size_t:new I.Uniform1f(be),u_size:new I.Uniform1f(be),u_camera_to_center_distance:new I.Uniform1f(be),u_rotate_symbol:new I.Uniform1i(be),u_aspect_ratio:new I.Uniform1f(be),u_fade_change:new I.Uniform1f(be),u_matrix:new I.UniformMatrix4f(be),u_label_plane_matrix:new I.UniformMatrix4f(be),u_coord_matrix:new I.UniformMatrix4f(be),u_is_text:new I.Uniform1i(be),u_pitch_with_map:new I.Uniform1i(be),u_texsize:new I.Uniform2f(be),u_texsize_icon:new I.Uniform2f(be),u_texture:new I.Uniform1i(be),u_texture_icon:new I.Uniform1i(be),u_gamma_scale:new I.Uniform1f(be),u_device_pixel_ratio:new I.Uniform1f(be),u_is_halo:new I.Uniform1i(be)}),background:be=>({u_matrix:new I.UniformMatrix4f(be),u_opacity:new I.Uniform1f(be),u_color:new I.UniformColor(be)}),backgroundPattern:be=>({u_matrix:new I.UniformMatrix4f(be),u_opacity:new I.Uniform1f(be),u_image:new I.Uniform1i(be),u_pattern_tl_a:new I.Uniform2f(be),u_pattern_br_a:new I.Uniform2f(be),u_pattern_tl_b:new I.Uniform2f(be),u_pattern_br_b:new I.Uniform2f(be),u_texsize:new I.Uniform2f(be),u_mix:new I.Uniform1f(be),u_pattern_size_a:new I.Uniform2f(be),u_pattern_size_b:new I.Uniform2f(be),u_scale_a:new I.Uniform1f(be),u_scale_b:new I.Uniform1f(be),u_pixel_coord_upper:new I.Uniform2f(be),u_pixel_coord_lower:new I.Uniform2f(be),u_tile_units_to_pixels:new I.Uniform1f(be)}),terrainRaster:Ds,terrainDepth:Ds,skybox:be=>({u_matrix:new I.UniformMatrix4f(be),u_sun_direction:new I.Uniform3f(be),u_cubemap:new I.Uniform1i(be),u_opacity:new I.Uniform1f(be),u_temporal_offset:new I.Uniform1f(be)}),skyboxGradient:be=>({u_matrix:new I.UniformMatrix4f(be),u_color_ramp:new I.Uniform1i(be),u_center_direction:new I.Uniform3f(be),u_radius:new I.Uniform1f(be),u_opacity:new I.Uniform1f(be),u_temporal_offset:new I.Uniform1f(be)}),skyboxCapture:be=>({u_matrix_3f:new I.UniformMatrix3f(be),u_sun_direction:new I.Uniform3f(be),u_sun_intensity:new I.Uniform1f(be),u_color_tint_r:new I.Uniform4f(be),u_color_tint_m:new I.Uniform4f(be),u_luminance:new I.Uniform1f(be)}),globeRaster:be=>({u_proj_matrix:new I.UniformMatrix4f(be),u_globe_matrix:new I.UniformMatrix4f(be),u_normalize_matrix:new I.UniformMatrix4f(be),u_merc_matrix:new I.UniformMatrix4f(be),u_zoom_transition:new I.Uniform1f(be),u_merc_center:new I.Uniform2f(be),u_image0:new I.Uniform1i(be),u_grid_matrix:new I.UniformMatrix3f(be),u_frustum_tl:new I.Uniform3f(be),u_frustum_tr:new I.Uniform3f(be),u_frustum_br:new I.Uniform3f(be),u_frustum_bl:new I.Uniform3f(be),u_globe_pos:new I.Uniform3f(be),u_globe_radius:new I.Uniform1f(be),u_viewport:new I.Uniform2f(be)}),globeAtmosphere:be=>({u_frustum_tl:new I.Uniform3f(be),u_frustum_tr:new I.Uniform3f(be),u_frustum_br:new I.Uniform3f(be),u_frustum_bl:new I.Uniform3f(be),u_horizon:new I.Uniform1f(be),u_transition:new I.Uniform1f(be),u_fadeout_range:new I.Uniform1f(be),u_color:new I.Uniform4f(be),u_high_color:new I.Uniform4f(be),u_space_color:new I.Uniform4f(be),u_star_intensity:new I.Uniform1f(be),u_star_density:new I.Uniform1f(be),u_star_size:new I.Uniform1f(be),u_temporal_offset:new I.Uniform1f(be),u_horizon_angle:new I.Uniform1f(be),u_rotation_matrix:new I.UniformMatrix4f(be)})};let Il;function uu(be,q,ce,Te,Ie,Re,Be){const Ue=be.context,He=Ue.gl,Ye=be.transform,et=be.useProgram("collisionBox"),dt=[];let xt=0,Pt=0;for(let Qt=0;Qt<Te.length;Qt++){const Kt=Te[Qt],Gt=q.getTile(Kt),Xt=Gt.getBucket(ce);if(!Xt)continue;const Wt=oo(Kt,Xt,Ye);let sn=Wt;Ie[0]===0&&Ie[1]===0||(sn=be.translatePosMatrix(Wt,Gt,Ie,Re));const _n=Be?Xt.textCollisionBox:Xt.iconCollisionBox,qn=Xt.collisionCircleArray;if(qn.length>0){const dn=I.create(),Rn=sn;I.mul(dn,Xt.placementInvProjMatrix,Ye.glCoordMatrix),I.mul(dn,dn,Xt.placementViewportMatrix),dt.push({circleArray:qn,circleOffset:Pt,transform:Rn,invTransform:dn,projection:Xt.getProjection()}),xt+=qn.length/4,Pt=xt}_n&&(be.terrain&&be.terrain.setupElevationDraw(Gt,et),et.draw(Ue,He.LINES,I.DepthMode.disabled,I.StencilMode.disabled,be.colorModeForRenderPass(),I.CullFaceMode.disabled,_c(sn,Ye,Gt,Xt.getProjection()),ce.id,_n.layoutVertexBuffer,_n.indexBuffer,_n.segments,null,Ye.zoom,null,[_n.collisionVertexBuffer,_n.collisionVertexBufferExt]))}if(!Be||!dt.length)return;const kt=be.useProgram("collisionCircle"),Tt=new I.StructArrayLayout2f1f2i16;Tt.resize(4*xt),Tt._trim();let Ct=0;for(const Qt of dt)for(let Kt=0;Kt<Qt.circleArray.length/4;Kt++){const Gt=4*Kt,Xt=Qt.circleArray[Gt+0],Wt=Qt.circleArray[Gt+1],sn=Qt.circleArray[Gt+2],_n=Qt.circleArray[Gt+3];Tt.emplace(Ct++,Xt,Wt,sn,_n,0),Tt.emplace(Ct++,Xt,Wt,sn,_n,1),Tt.emplace(Ct++,Xt,Wt,sn,_n,2),Tt.emplace(Ct++,Xt,Wt,sn,_n,3)}(!Il||Il.length<2*xt)&&(Il=function(Qt){const Kt=2*Qt,Gt=new I.StructArrayLayout3ui6;Gt.resize(Kt),Gt._trim();for(let Xt=0;Xt<Kt;Xt++){const Wt=6*Xt;Gt.uint16[Wt+0]=4*Xt+0,Gt.uint16[Wt+1]=4*Xt+1,Gt.uint16[Wt+2]=4*Xt+2,Gt.uint16[Wt+3]=4*Xt+2,Gt.uint16[Wt+4]=4*Xt+3,Gt.uint16[Wt+5]=4*Xt+0}return Gt}(xt));const Et=Ue.createIndexBuffer(Il,!0),zt=Ue.createVertexBuffer(Tt,I.collisionCircleLayout.members,!0);for(const Qt of dt){const Kt={u_matrix:Qt.transform,u_inv_matrix:Qt.invTransform,u_camera_to_center_distance:(Ot=Ye).getCameraToCenterDistance(Qt.projection),u_viewport_size:[Ot.width,Ot.height]};kt.draw(Ue,He.TRIANGLES,I.DepthMode.disabled,I.StencilMode.disabled,be.colorModeForRenderPass(),I.CullFaceMode.disabled,Kt,ce.id,zt,Et,I.SegmentVector.simpleSegment(0,2*Qt.circleOffset,Qt.circleArray.length,Qt.circleArray.length/2),null,Ye.zoom)}var Ot;zt.destroy(),Et.destroy()}const hu=I.create();function yc(be,q,ce,Te,Ie,Re){const{horizontalAlign:Be,verticalAlign:Ue}=I.getAnchorAlignment(be),He=-(Be-.5)*q,Ye=-(Ue-.5)*ce,et=I.evaluateVariableOffset(be,Te);return new I.pointGeometry((He/Ie+et[0])*Re,(Ye/Ie+et[1])*Re)}function vc(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et){const dt=be.text.placedSymbolArray,xt=be.text.dynamicLayoutVertexArray,Pt=be.icon.dynamicLayoutVertexArray,kt={},Tt=ao(Ue,be.getProjection(),Re),Ct=Re.elevation,Et=be.getProjection().upVectorScale(Ue.canonical,Re.center.lat,Re.worldSize);xt.clear();for(let zt=0;zt<dt.length;zt++){const Ot=dt.get(zt),Qt=be.allowVerticalPlacement&&!Ot.placedOrientation,Kt=Ot.hidden||!Ot.crossTileID||Qt?null:Te[Ot.crossTileID];if(Kt){const Gt=new I.pointGeometry(Ot.tileAnchorX,Ot.tileAnchorY),Xt=be.getProjection().upVector(Ue.canonical,Gt.x,Gt.y),Wt=Ct?Ct.getAtTileOffset(Ue,Gt.x,Gt.y):0,sn=Ir([Ot.projectedAnchorX+Wt*Xt[0]*Et.metersToTile,Ot.projectedAnchorY+Wt*Xt[1]*Et.metersToTile,Ot.projectedAnchorZ+Wt*Xt[2]*Et.metersToTile],ce?Tt:Be),_n=As(Re.getCameraToCenterDistance(be.getProjection()),sn.signedDistanceFromCamera);let qn=Ie.evaluateSizeForFeature(be.textSizeData,Ye,Ot)*_n/I.ONE_EM;ce&&(qn*=be.tilePixelRatio/He);const{width:dn,height:Rn,anchor:Fn,textOffset:Qn,textScale:kn}=Kt,Wn=yc(Fn,dn,Rn,Qn,kn,qn);let Dn;if(ce){const er=Gt.add(Wn),{x:dr,y:gr,z:Ar}=be.getProjection().projectTilePoint(er.x,er.y,Ue.canonical);Dn=Ir([dr+Wt*Xt[0]*Et.metersToTile,gr+Wt*Xt[1]*Et.metersToTile,Ar+Wt*Xt[2]*Et.metersToTile],Be).point}else{const er=q?Wn.rotate(-Re.angle):Wn;Dn=[sn.point[0]+er.x,sn.point[1]+er.y,0]}const ir=be.allowVerticalPlacement&&Ot.placedOrientation===I.WritingMode.vertical?Math.PI/2:0;for(let er=0;er<Ot.numGlyphs;er++)I.addDynamicAttributes(xt,Dn[0],Dn[1],Dn[2],ir);et&&Ot.associatedIconIndex>=0&&(kt[Ot.associatedIconIndex]={shiftedAnchor:Dn,angle:ir})}else da(Ot.numGlyphs,xt)}if(et){Pt.clear();const zt=be.icon.placedSymbolArray;for(let Ot=0;Ot<zt.length;Ot++){const Qt=zt.get(Ot);if(Qt.hidden)da(Qt.numGlyphs,Pt);else{const Kt=kt[Ot];if(Kt)for(let Gt=0;Gt<Qt.numGlyphs;Gt++)I.addDynamicAttributes(Pt,Kt.shiftedAnchor[0],Kt.shiftedAnchor[1],Kt.shiftedAnchor[2],Kt.angle);else da(Qt.numGlyphs,Pt)}}be.icon.dynamicLayoutVertexBuffer.updateData(Pt)}be.text.dynamicLayoutVertexBuffer.updateData(xt)}function du(be,q,ce){return ce.iconsInText&&q?"symbolTextAndIcon":be?"symbolSDF":"symbolIcon"}function Ns(be,q,ce,Te,Ie,Re,Be,Ue,He,Ye,et,dt){const xt=be.context,Pt=xt.gl,kt=be.transform,Tt=Ue==="map",Ct=He==="map",Et=Tt&&ce.layout.get("symbol-placement")!=="point",zt=Tt&&!Ct&&!Et,Ot=ce.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Qt=!1;const Kt=be.depthModeForSublayer(0,I.DepthMode.ReadOnly),Gt=[I.mercatorXfromLng(kt.center.lng),I.mercatorYfromLat(kt.center.lat)],Xt=ce.layout.get("text-variable-anchor"),Wt=kt.projection.name==="globe",sn=[],_n=[0,-1,0];let qn=_n;!Wt&&!kt.mercatorFromTransition||Tt||(qn=function(dn){const Rn=dn._camera.getWorldToCamera(dn.worldSize,1),Fn=I.multiply([],Rn,dn.globeMatrix);I.invert(Fn,Fn);const Qn=[0,0,0],kn=[0,1,0,0];return I.transformMat4$1(kn,kn,Fn),Qn[0]=kn[0],Qn[1]=kn[1],Qn[2]=kn[2],I.normalize(Qn,Qn),Qn}(kt));for(const dn of Te){const Rn=q.getTile(dn),Fn=Rn.getBucket(ce);if(!Fn||Fn.projection.name==="mercator"&&Wt)continue;const Qn=Ie?Fn.text:Fn.icon;if(!Qn||Fn.fullyClipped||!Qn.segments.get().length)continue;const kn=Qn.programConfigurations.get(ce.id),Wn=Ie||Fn.sdfIcons,Dn=Ie?Fn.textSizeData:Fn.iconSizeData,ir=Ct||kt.pitch!==0,er=I.evaluateSizeForZoom(Dn,kt.zoom);let dr,gr,Ar,Ur,fr=[0,0],Sr=null;if(Ie){if(gr=Rn.glyphAtlasTexture,Ar=Pt.LINEAR,dr=Rn.glyphAtlasTexture.size,Fn.iconsInText){fr=Rn.imageAtlasTexture.size,Sr=Rn.imageAtlasTexture;const to=Dn.kind==="composite"||Dn.kind==="camera";Ur=ir||be.options.rotating||be.options.zooming||to?Pt.LINEAR:Pt.NEAREST}}else{const to=ce.layout.get("icon-size").constantOr(0)!==1||Fn.iconsNeedLinear;gr=Rn.imageAtlasTexture,Ar=Wn||be.options.rotating||be.options.zooming||to||ir?Pt.LINEAR:Pt.NEAREST,dr=Rn.imageAtlasTexture.size}const Wr=Fn.projection.name==="globe",li=Wr?qn:_n,bi=Wr?I.globeToMercatorTransition(kt.zoom):0,ii=ao(dn,Fn.getProjection(),kt),qi=kt.calculatePixelsToTileUnitsMatrix(Rn),Eo=Mr(ii,Rn.tileID.canonical,Ct,Tt,kt,Fn.getProjection(),qi),ia=be.terrain&&Ct&&Et?I.invert(I.create(),Eo):hu,fi=Mo(ii,Rn.tileID.canonical,Ct,Tt,kt,Fn.getProjection(),qi),yi=Xt&&Fn.hasTextData(),Rr=ce.layout.get("icon-text-fit")!=="none"&&yi&&Fn.hasIconData();if(Et){const to=kt.elevation,La=to?to.getAtTileOffsetFunc(dn,kt.center.lat,kt.worldSize,Fn.getProjection()):il=>[0,0,0],Go=Fr(ii,Rn.tileID.canonical,Ct,Tt,kt,Fn.getProjection(),qi);Ts(Fn,ii,be,Ie,Go,fi,Ct,Ye,La,dn)}const Ri=Et||Ie&&Xt||Rr,$i=be.translatePosMatrix(ii,Rn,Re,Be),ci=Ri?hu:Eo,Ki=be.translatePosMatrix(fi,Rn,Re,Be,!0),$a=Fn.getProjection().createInversionMatrix(kt,dn.canonical),eo=[];be.terrain&&Ct&&eo.push("PITCH_WITH_MAP_TERRAIN"),Wr&&eo.push("PROJECTION_GLOBE_VIEW"),Ri&&eo.push("PROJECTED_POS_ON_VIEWPORT");const mo=Wn&&ce.paint.get(Ie?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let za;za=Wn?Fn.iconsInText?Ia(Dn.kind,er,zt,Ct,be,$i,ci,Ki,dr,fr,dn,bi,Gt,$a,li,Fn.getProjection()):gc(Dn.kind,er,zt,Ct,be,$i,ci,Ki,Ie,dr,!0,dn,bi,Gt,$a,li,Fn.getProjection()):Qa(Dn.kind,er,zt,Ct,be,$i,ci,Ki,Ie,dr,dn,bi,Gt,$a,li,Fn.getProjection());const Da={program:be.useProgram(du(Wn,Ie,Fn),kn,eo),buffers:Qn,uniformValues:za,atlasTexture:gr,atlasTextureIcon:Sr,atlasInterpolation:Ar,atlasInterpolationIcon:Ur,isSDF:Wn,hasHalo:mo,tile:Rn,labelPlaneMatrixInv:ia};if(Ot&&Fn.canOverlap){Qt=!0;const to=Qn.segments.get();for(const La of to)sn.push({segments:new I.SegmentVector([La]),sortKey:La.sortKey,state:Da})}else sn.push({segments:Qn.segments,sortKey:0,state:Da})}Qt&&sn.sort((dn,Rn)=>dn.sortKey-Rn.sortKey);for(const dn of sn){const Rn=dn.state;if(be.terrain&&be.terrain.setupElevationDraw(Rn.tile,Rn.program,{useDepthForOcclusion:!Wt,labelPlaneMatrixInv:Rn.labelPlaneMatrixInv}),xt.activeTexture.set(Pt.TEXTURE0),Rn.atlasTexture.bind(Rn.atlasInterpolation,Pt.CLAMP_TO_EDGE),Rn.atlasTextureIcon&&(xt.activeTexture.set(Pt.TEXTURE1),Rn.atlasTextureIcon&&Rn.atlasTextureIcon.bind(Rn.atlasInterpolationIcon,Pt.CLAMP_TO_EDGE)),Rn.isSDF){const Fn=Rn.uniformValues;Rn.hasHalo&&(Fn.u_is_halo=1,xc(Rn.buffers,dn.segments,ce,be,Rn.program,Kt,et,dt,Fn)),Fn.u_is_halo=0}xc(Rn.buffers,dn.segments,ce,be,Rn.program,Kt,et,dt,Rn.uniformValues)}}function xc(be,q,ce,Te,Ie,Re,Be,Ue,He){const Ye=Te.context,et=[be.dynamicLayoutVertexBuffer,be.opacityVertexBuffer,be.globeExtVertexBuffer];Ie.draw(Ye,Ye.gl.TRIANGLES,Re,Be,Ue,I.CullFaceMode.disabled,He,ce.id,be.layoutVertexBuffer,be.indexBuffer,q,ce.paint,Te.transform.zoom,be.programConfigurations.get(ce.id),et)}function Ml(be,q,ce,Te,Ie,Re,Be){const Ue=be.context.gl,He=ce.paint.get("fill-pattern"),Ye=He&&He.constantOr(1),et=ce.getCrossfadeParameters();let dt,xt,Pt,kt,Tt;Be?(xt=Ye&&!ce.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dt=Ue.LINES):(xt=Ye?"fillPattern":"fill",dt=Ue.TRIANGLES);for(const Ct of Te){const Et=q.getTile(Ct);if(Ye&&!Et.patternsLoaded())continue;const zt=Et.getBucket(ce);if(!zt)continue;be.prepareDrawTile();const Ot=zt.programConfigurations.get(ce.id),Qt=be.useProgram(xt,Ot);Ye&&(be.context.activeTexture.set(Ue.TEXTURE0),Et.imageAtlasTexture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),Ot.updatePaintBuffers(et));const Kt=He.constantOr(null);if(Kt&&Et.imageAtlas){const Xt=Et.imageAtlas,Wt=Xt.patternPositions[Kt.to.toString()],sn=Xt.patternPositions[Kt.from.toString()];Wt&&sn&&Ot.setConstantPatternPositions(Wt,sn)}const Gt=be.translatePosMatrix(Ct.projMatrix,Et,ce.paint.get("fill-translate"),ce.paint.get("fill-translate-anchor"));if(Be){kt=zt.indexBuffer2,Tt=zt.segments2;const Xt=be.terrain&&be.terrain.renderingToTexture?be.terrain.drapeBufferSize:[Ue.drawingBufferWidth,Ue.drawingBufferHeight];Pt=xt==="fillOutlinePattern"&&Ye?Pa(Gt,be,et,Et,Xt):Vo(Gt,Xt)}else kt=zt.indexBuffer,Tt=zt.segments,Pt=Ye?kl(Gt,be,et,Et):Bs(Gt);be.prepareDrawProgram(be.context,Qt,Ct.toUnwrapped()),Qt.draw(be.context,dt,Ie,be.stencilModeForClipping(Ct),Re,I.CullFaceMode.disabled,Pt,ce.id,zt.layoutVertexBuffer,kt,Tt,ce.paint,be.transform.zoom,Ot)}}function Qo(be,q,ce,Te,Ie,Re,Be){const Ue=be.context,He=Ue.gl,Ye=be.transform,et=ce.paint.get("fill-extrusion-pattern"),dt=et.constantOr(1),xt=ce.getCrossfadeParameters(),Pt=ce.paint.get("fill-extrusion-opacity"),kt=[ce.paint.get("fill-extrusion-ambient-occlusion-intensity"),ce.paint.get("fill-extrusion-ambient-occlusion-radius")],Tt=ce.layout.get("fill-extrusion-edge-radius"),Ct=Ye.projection.name==="globe"?I.fillExtrusionHeightLift():0,Et=Ye.projection.name==="globe",zt=Et?I.globeToMercatorTransition(Ye.zoom):0,Ot=[I.mercatorXfromLng(Ye.center.lng),I.mercatorYfromLat(Ye.center.lat)],Qt=[];Et&&(Qt.push("PROJECTION_GLOBE_VIEW"),be.style.terrainSetForDrapingOnly()&&Qt.push("TERRAIN")),kt[0]>0&&Qt.push("FAUX_AO");for(const Kt of Te){const Gt=q.getTile(Kt),Xt=Gt.getBucket(ce);if(!Xt||Xt.projection.name!==Ye.projection.name)continue;const Wt=Xt.programConfigurations.get(ce.id),sn=be.useProgram(dt?"fillExtrusionPattern":"fillExtrusion",Wt,Qt);if(be.terrain){const kn=be.terrain;if(be.style.terrainSetForDrapingOnly())kn.setupElevationDraw(Gt,sn,{useMeterToDem:!0});else{if(!Xt.enableTerrain)continue;if(kn.setupElevationDraw(Gt,sn,{useMeterToDem:!0}),js(Ue,q,Kt,Xt,ce,kn),!Xt.centroidVertexBuffer){const Wn=sn.attributes.a_centroid_pos;Wn!==void 0&&He.vertexAttrib2f(Wn,0,0)}}}dt&&(be.context.activeTexture.set(He.TEXTURE0),Gt.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),Wt.updatePaintBuffers(xt));const _n=et.constantOr(null);if(_n&&Gt.imageAtlas){const kn=Gt.imageAtlas,Wn=kn.patternPositions[_n.to.toString()],Dn=kn.patternPositions[_n.from.toString()];Wn&&Dn&&Wt.setConstantPatternPositions(Wn,Dn)}const qn=be.translatePosMatrix(Kt.projMatrix,Gt,ce.paint.get("fill-extrusion-translate"),ce.paint.get("fill-extrusion-translate-anchor")),dn=Ye.projection.createInversionMatrix(Ye,Kt.canonical),Rn=ce.paint.get("fill-extrusion-vertical-gradient"),Fn=dt?ru(qn,be,Rn,Pt,kt,Tt,Kt,xt,Gt,Ct,zt,Ot,dn):Ja(qn,be,Rn,Pt,kt,Tt,Kt,Ct,zt,Ot,dn);be.prepareDrawProgram(Ue,sn,Kt.toUnwrapped());const Qn=[];be.terrain&&Qn.push(Xt.centroidVertexBuffer),Et&&Qn.push(Xt.layoutVertexExtBuffer),sn.draw(Ue,Ue.gl.TRIANGLES,Ie,Re,Be,I.CullFaceMode.backCCW,Fn,ce.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,ce.paint,be.transform.zoom,Wt,Qn)}}function js(be,q,ce,Te,Ie,Re){const Be=[Et=>{let zt=Et.canonical.x-1,Ot=Et.wrap;return zt<0&&(zt=(1<<Et.canonical.z)-1,Ot--),new I.OverscaledTileID(Et.overscaledZ,Ot,Et.canonical.z,zt,Et.canonical.y)},Et=>{let zt=Et.canonical.x+1,Ot=Et.wrap;return zt===1<<Et.canonical.z&&(zt=0,Ot++),new I.OverscaledTileID(Et.overscaledZ,Ot,Et.canonical.z,zt,Et.canonical.y)},Et=>new I.OverscaledTileID(Et.overscaledZ,Et.wrap,Et.canonical.z,Et.canonical.x,(Et.canonical.y===0?1<<Et.canonical.z:Et.canonical.y)-1),Et=>new I.OverscaledTileID(Et.overscaledZ,Et.wrap,Et.canonical.z,Et.canonical.x,Et.canonical.y===(1<<Et.canonical.z)-1?0:Et.canonical.y+1)],Ue=Et=>{const zt=q.getSource().minzoom,Ot=Kt=>{const Gt=q.getTileByID(Kt);if(Gt&&Gt.hasData())return Gt.getBucket(Ie)},Qt=[0,-1,1];for(const Kt of Qt){if(Et.overscaledZ+Kt<zt)continue;const Gt=Ot(Et.calculateScaledKey(Et.overscaledZ+Kt));if(Gt)return Gt}},He=[0,0,0],Ye=(Et,zt)=>(He[0]=Math.min(Et.min.y,zt.min.y),He[1]=Math.max(Et.max.y,zt.max.y),He[2]=I.EXTENT-zt.min.x>Et.max.x?zt.min.x-I.EXTENT:Et.max.x,He),et=(Et,zt)=>(He[0]=Math.min(Et.min.x,zt.min.x),He[1]=Math.max(Et.max.x,zt.max.x),He[2]=I.EXTENT-zt.min.y>Et.max.y?zt.min.y-I.EXTENT:Et.max.y,He),dt=[(Et,zt)=>Ye(Et,zt),(Et,zt)=>Ye(zt,Et),(Et,zt)=>et(Et,zt),(Et,zt)=>et(zt,Et)],xt=new I.pointGeometry(0,0);let Pt,kt,Tt;const Ct=(Et,zt,Ot,Qt,Kt)=>{const Gt=[[Qt?Ot:Et,Qt?Et:Ot,0],[Qt?Ot:zt,Qt?zt:Ot,0]],Xt=Kt<0?I.EXTENT+Kt:Kt,Wt=[Qt?Xt:(Et+zt)/2,Qt?(Et+zt)/2:Xt,0];return Ot===0&&Kt<0||Ot!==0&&Kt>0?Re.getForTilePoints(Tt,[Wt],!0,kt):Gt.push(Wt),Re.getForTilePoints(ce,Gt,!0,Pt),Math.max(Gt[0][2],Gt[1][2],Wt[2])/Re.exaggeration()};for(let Et=0;Et<4;Et++){const zt=(Et<2?1:5)-Et,Ot=Te.borders[Et];if(Ot.length===0)continue;const Qt=Tt=Be[Et](ce),Kt=Ue(Qt);if(!(Kt&&Kt instanceof I.FillExtrusionBucket&&Kt.enableTerrain)||Te.borderDoneWithNeighborZ[Et]===Kt.canonical.z&&Kt.borderDoneWithNeighborZ[zt]===Te.canonical.z||(kt=Re.findDEMTileFor(Qt),!kt||!kt.dem))continue;if(!Pt){const sn=Re.findDEMTileFor(ce);if(!sn||!sn.dem)return;Pt=sn}const Gt=Kt.borders[zt];let Xt=0;const Wt=Kt.borderDoneWithNeighborZ[zt]!==Te.canonical.z;if(Te.canonical.z===Kt.canonical.z){for(let sn=0;sn<Ot.length;sn++){const _n=Te.featuresOnBorder[Ot[sn]],qn=_n.borders[Et];let dn;for(;Xt<Gt.length&&(dn=Kt.featuresOnBorder[Gt[Xt]],!(dn.borders[zt][1]>qn[0]+3));)Wt&&Kt.encodeCentroid(void 0,dn,!1),Xt++;if(dn&&Xt<Gt.length){const Rn=Xt;let Fn=0;for(;!(dn.borders[zt][0]>qn[1]-3)&&(Fn++,++Xt!==Gt.length);)dn=Kt.featuresOnBorder[Gt[Xt]];if(dn=Kt.featuresOnBorder[Gt[Rn]],_n.intersectsCount()>1||dn.intersectsCount()>1||Fn!==1){Fn!==1&&(Xt=Rn),Te.encodeCentroid(void 0,_n,!1),Wt&&Kt.encodeCentroid(void 0,dn,!1);continue}const Qn=dt[Et](_n,dn),kn=Et%2?I.EXTENT-1:0;xt.x=Ct(Qn[0],Math.min(I.EXTENT-1,Qn[1]),kn,Et<2,Qn[2]),xt.y=0,Te.encodeCentroid(xt,_n,!1),Wt&&Kt.encodeCentroid(xt,dn,!1)}else Te.encodeCentroid(void 0,_n,!1)}Te.borderDoneWithNeighborZ[Et]=Kt.canonical.z,Te.needsCentroidUpdate=!0,Wt&&(Kt.borderDoneWithNeighborZ[zt]=Te.canonical.z,Kt.needsCentroidUpdate=!0)}else{for(const sn of Ot)Te.encodeCentroid(void 0,Te.featuresOnBorder[sn],!1);if(Wt){for(const sn of Gt)Kt.encodeCentroid(void 0,Kt.featuresOnBorder[sn],!1);Kt.borderDoneWithNeighborZ[zt]=Te.canonical.z,Kt.needsCentroidUpdate=!0}Te.borderDoneWithNeighborZ[Et]=Kt.canonical.z,Te.needsCentroidUpdate=!0}}(Te.needsCentroidUpdate||!Te.centroidVertexBuffer&&Te.centroidVertexArray.length!==0)&&Te.uploadCentroid(be)}const pu=new I.Color(1,0,0,1),Ma=new I.Color(0,1,0,1),es=new I.Color(0,0,1,1),fu=new I.Color(1,0,1,1),bc=new I.Color(0,1,1,1);function Jr(be,q,ce){const Te=be.context,Ie=be.transform,Re=Te.gl,Be=Ie.projection.name==="globe",Ue=Be?["PROJECTION_GLOBE_VIEW"]:null;let He=ce.projMatrix;if(Be&&I.globeToMercatorTransition(Ie.zoom)>0){const _n=I.transitionTileAABBinECEF(ce.canonical,Ie),qn=I.globeDenormalizeECEF(_n);He=I.multiply(new Float32Array(16),Ie.globeMatrix,qn),I.multiply(He,Ie.projMatrix,He)}const Ye=be.useProgram("debug",null,Ue),et=q.getTileByID(ce.key);be.terrain&&be.terrain.setupElevationDraw(et,Ye);const dt=I.DepthMode.disabled,xt=I.StencilMode.disabled,Pt=be.colorModeForRenderPass(),kt="$debug";Te.activeTexture.set(Re.TEXTURE0),be.emptyTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Be?et._makeGlobeTileDebugBuffers(be.context,Ie):et._makeDebugTileBoundsBuffers(be.context,Ie.projection);const Tt=et._tileDebugBuffer||be.debugBuffer,Ct=et._tileDebugIndexBuffer||be.debugIndexBuffer,Et=et._tileDebugSegments||be.debugSegments;Ye.draw(Te,Re.LINE_STRIP,dt,xt,Pt,I.CullFaceMode.disabled,au(He,I.Color.red),kt,Tt,Ct,Et,null,null,null,[et._globeTileDebugBorderBuffer]);const zt=et.latestRawTileData,Ot=Math.floor((zt&&zt.byteLength||0)/1024),Qt=q.getTile(ce).tileSize,Kt=512/Math.min(Qt,512)*(ce.overscaledZ/Ie.zoom)*.5;let Gt=ce.canonical.toString();ce.overscaledZ!==ce.canonical.z&&(Gt+=` => ${ce.overscaledZ}`),Gt+=` ${Ot}kb`,function(_n,qn){_n.initDebugOverlayCanvas();const dn=_n.debugOverlayCanvas,Rn=_n.context.gl,Fn=_n.debugOverlayCanvas.getContext("2d");Fn.clearRect(0,0,dn.width,dn.height),Fn.shadowColor="white",Fn.shadowBlur=2,Fn.lineWidth=1.5,Fn.strokeStyle="white",Fn.textBaseline="top",Fn.font="bold 36px Open Sans, sans-serif",Fn.fillText(qn,5,5),Fn.strokeText(qn,5,5),_n.debugOverlayTexture.update(dn),_n.debugOverlayTexture.bind(Rn.LINEAR,Rn.CLAMP_TO_EDGE)}(be,Gt);const Xt=et._tileDebugTextBuffer||be.debugBuffer,Wt=et._tileDebugTextIndexBuffer||be.quadTriangleIndexBuffer,sn=et._tileDebugTextSegments||be.debugSegments;Ye.draw(Te,Re.TRIANGLES,dt,xt,I.ColorMode.alphaBlended,I.CullFaceMode.disabled,au(He,I.Color.transparent,Kt),kt,Xt,Wt,sn,null,null,null,[et._globeTileDebugTextBuffer])}function Us(be,q,ce,Te){Vs(be,0,q+ce/2,be.transform.width,ce,Te)}function _u(be,q,ce,Te){Vs(be,q-ce/2,0,ce,be.transform.height,Te)}function Vs(be,q,ce,Te,Ie,Re){const Be=be.context,Ue=Be.gl;Ue.enable(Ue.SCISSOR_TEST),Ue.scissor(q*I.exported.devicePixelRatio,ce*I.exported.devicePixelRatio,Te*I.exported.devicePixelRatio,Ie*I.exported.devicePixelRatio),Be.clear({color:Re}),Ue.disable(Ue.SCISSOR_TEST)}const Gs=I.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:lh}=Gs;function ma(be,q,ce,Te){be.emplaceBack(q,ce,Te)}class wc{constructor(q){this.vertexArray=new I.StructArrayLayout3f12,this.indices=new I.StructArrayLayout3ui6,ma(this.vertexArray,-1,-1,1),ma(this.vertexArray,1,-1,1),ma(this.vertexArray,-1,1,1),ma(this.vertexArray,1,1,1),ma(this.vertexArray,-1,-1,-1),ma(this.vertexArray,1,-1,-1),ma(this.vertexArray,-1,1,-1),ma(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=q.createVertexBuffer(this.vertexArray,lh),this.indexBuffer=q.createIndexBuffer(this.indices),this.segment=I.SegmentVector.simpleSegment(0,0,36,12)}}function ts(be,q,ce,Te,Ie,Re){const Be=be.gl,Ue=q.paint.get("sky-atmosphere-color"),He=q.paint.get("sky-atmosphere-halo-color"),Ye=q.paint.get("sky-atmosphere-sun-intensity"),et=((dt,xt,Pt,kt,Tt)=>({u_matrix_3f:dt,u_sun_direction:xt,u_sun_intensity:Pt,u_color_tint_r:[kt.r,kt.g,kt.b,kt.a],u_color_tint_m:[Tt.r,Tt.g,Tt.b,Tt.a],u_luminance:5e-5}))(I.fromMat4(I.create$1(),Te),Ie,Ye,Ue,He);Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_CUBE_MAP_POSITIVE_X+Re,q.skyboxTexture,0),ce.draw(be,Be.TRIANGLES,I.DepthMode.disabled,I.StencilMode.disabled,I.ColorMode.unblended,I.CullFaceMode.frontCW,et,"skyboxCapture",q.skyboxGeometry.vertexBuffer,q.skyboxGeometry.indexBuffer,q.skyboxGeometry.segment)}const Ec=I.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ol{constructor(q){const ce=new I.StructArrayLayout5f20;ce.emplaceBack(-1,1,1,0,0),ce.emplaceBack(1,1,1,1,0),ce.emplaceBack(1,-1,1,1,1),ce.emplaceBack(-1,-1,1,0,1);const Te=new I.StructArrayLayout3ui6;Te.emplaceBack(0,1,2),Te.emplaceBack(2,3,0),this.vertexBuffer=q.createVertexBuffer(ce,Ec.members),this.indexBuffer=q.createIndexBuffer(Te),this.segments=I.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ns={symbol:function(be,q,ce,Te,Ie){if(be.renderPass!=="translucent")return;const Re=I.StencilMode.disabled,Be=be.colorModeForRenderPass();ce.layout.get("text-variable-anchor")&&function(Ue,He,Ye,et,dt,xt,Pt){const kt=He.transform,Tt=dt==="map",Ct=xt==="map";for(const Et of Ue){const zt=et.getTile(Et),Ot=zt.getBucket(Ye);if(!Ot||!Ot.text||!Ot.text.segments.get().length)continue;const Qt=I.evaluateSizeForZoom(Ot.textSizeData,kt.zoom),Kt=ao(Et,Ot.getProjection(),kt),Gt=kt.calculatePixelsToTileUnitsMatrix(zt),Xt=Mr(Kt,zt.tileID.canonical,Ct,Tt,kt,Ot.getProjection(),Gt),Wt=Ye.layout.get("icon-text-fit")!=="none"&&Ot.hasIconData();if(Qt){const sn=Math.pow(2,kt.zoom-zt.tileID.overscaledZ);vc(Ot,Tt,Ct,Pt,I.symbolSize,kt,Xt,Et,sn,Qt,Wt)}}}(Te,be,ce,q,ce.layout.get("text-rotation-alignment"),ce.layout.get("text-pitch-alignment"),Ie),ce.paint.get("icon-opacity").constantOr(1)!==0&&Ns(be,q,ce,Te,!1,ce.paint.get("icon-translate"),ce.paint.get("icon-translate-anchor"),ce.layout.get("icon-rotation-alignment"),ce.layout.get("icon-pitch-alignment"),ce.layout.get("icon-keep-upright"),Re,Be),ce.paint.get("text-opacity").constantOr(1)!==0&&Ns(be,q,ce,Te,!0,ce.paint.get("text-translate"),ce.paint.get("text-translate-anchor"),ce.layout.get("text-rotation-alignment"),ce.layout.get("text-pitch-alignment"),ce.layout.get("text-keep-upright"),Re,Be),q.map.showCollisionBoxes&&(uu(be,q,ce,Te,ce.paint.get("text-translate"),ce.paint.get("text-translate-anchor"),!0),uu(be,q,ce,Te,ce.paint.get("icon-translate"),ce.paint.get("icon-translate-anchor"),!1))},circle:function(be,q,ce,Te){if(be.renderPass!=="translucent")return;const Ie=ce.paint.get("circle-opacity"),Re=ce.paint.get("circle-stroke-width"),Be=ce.paint.get("circle-stroke-opacity"),Ue=ce.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Ie.constantOr(1)===0&&(Re.constantOr(1)===0||Be.constantOr(1)===0))return;const He=be.context,Ye=He.gl,et=be.transform,dt=be.depthModeForSublayer(0,I.DepthMode.ReadOnly),xt=I.StencilMode.disabled,Pt=be.colorModeForRenderPass(),kt=et.projection.name==="globe",Tt=[I.mercatorXfromLng(et.center.lng),I.mercatorYfromLat(et.center.lat)],Ct=[];for(let zt=0;zt<Te.length;zt++){const Ot=Te[zt],Qt=q.getTile(Ot),Kt=Qt.getBucket(ce);if(!Kt||Kt.projection.name!==et.projection.name)continue;const Gt=Kt.programConfigurations.get(ce.id),Xt=ou(ce);kt&&Xt.push("PROJECTION_GLOBE_VIEW");const Wt=be.useProgram("circle",Gt,Xt),sn=Kt.layoutVertexBuffer,_n=Kt.globeExtVertexBuffer,qn=Kt.indexBuffer,dn=et.projection.createInversionMatrix(et,Ot.canonical),Rn={programConfiguration:Gt,program:Wt,layoutVertexBuffer:sn,globeExtVertexBuffer:_n,indexBuffer:qn,uniformValues:fc(be,Ot,Qt,dn,Tt,ce),tile:Qt};if(Ue){const Fn=Kt.segments.get();for(const Qn of Fn)Ct.push({segments:new I.SegmentVector([Qn]),sortKey:Qn.sortKey,state:Rn})}else Ct.push({segments:Kt.segments,sortKey:0,state:Rn})}Ue&&Ct.sort((zt,Ot)=>zt.sortKey-Ot.sortKey);const Et={useDepthForOcclusion:!kt};for(const zt of Ct){const{programConfiguration:Ot,program:Qt,layoutVertexBuffer:Kt,globeExtVertexBuffer:Gt,indexBuffer:Xt,uniformValues:Wt,tile:sn}=zt.state,_n=zt.segments;be.terrain&&be.terrain.setupElevationDraw(sn,Qt,Et),be.prepareDrawProgram(He,Qt,sn.tileID.toUnwrapped()),Qt.draw(He,Ye.TRIANGLES,dt,xt,Pt,I.CullFaceMode.disabled,Wt,ce.id,Kt,Xt,_n,ce.paint,et.zoom,Ot,[Gt])}},heatmap:function(be,q,ce,Te){if(ce.paint.get("heatmap-opacity")!==0)if(be.renderPass==="offscreen"){const Ie=be.context,Re=Ie.gl,Be=I.StencilMode.disabled,Ue=new I.ColorMode([Re.ONE,Re.ONE],I.Color.transparent,[!0,!0,!0,!0]);(function(Pt,kt,Tt,Ct){const Et=Pt.gl,zt=kt.width*Ct,Ot=kt.height*Ct;Pt.activeTexture.set(Et.TEXTURE1),Pt.viewport.set([0,0,zt,Ot]);let Qt=Tt.heatmapFbo;if(!Qt||Qt&&(Qt.width!==zt||Qt.height!==Ot)){Qt&&Qt.destroy();const Kt=Et.createTexture();Et.bindTexture(Et.TEXTURE_2D,Kt),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_S,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_T,Et.CLAMP_TO_EDGE),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MIN_FILTER,Et.LINEAR),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MAG_FILTER,Et.LINEAR),Qt=Tt.heatmapFbo=Pt.createFramebuffer(zt,Ot,!1),function(Gt,Xt,Wt,sn,_n,qn){const dn=Gt.gl;dn.texImage2D(dn.TEXTURE_2D,0,dn.RGBA,_n,qn,0,dn.RGBA,Gt.extRenderToTextureHalfFloat?Gt.extTextureHalfFloat.HALF_FLOAT_OES:dn.UNSIGNED_BYTE,null),sn.colorAttachment.set(Wt)}(Pt,0,Kt,Qt,zt,Ot)}else Et.bindTexture(Et.TEXTURE_2D,Qt.colorAttachment.get()),Pt.bindFramebuffer.set(Qt.framebuffer)})(Ie,be,ce,be.transform.projection.name==="globe"?.5:.25),Ie.clear({color:I.Color.transparent});const He=be.transform,Ye=He.projection.name==="globe",et=Ye?["PROJECTION_GLOBE_VIEW"]:null,dt=Ye?I.CullFaceMode.frontCCW:I.CullFaceMode.disabled,xt=[I.mercatorXfromLng(He.center.lng),I.mercatorYfromLat(He.center.lat)];for(let Pt=0;Pt<Te.length;Pt++){const kt=Te[Pt];if(q.hasRenderableParent(kt))continue;const Tt=q.getTile(kt),Ct=Tt.getBucket(ce);if(!Ct||Ct.projection.name!==He.projection.name)continue;const Et=Ct.programConfigurations.get(ce.id),zt=be.useProgram("heatmap",Et,et),{zoom:Ot}=be.transform;be.terrain&&be.terrain.setupElevationDraw(Tt,zt),be.prepareDrawProgram(Ie,zt,kt.toUnwrapped());const Qt=He.projection.createInversionMatrix(He,kt.canonical);zt.draw(Ie,Re.TRIANGLES,I.DepthMode.disabled,Be,Ue,dt,rh(be,kt,Tt,Qt,xt,Ot,ce.paint.get("heatmap-intensity")),ce.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,ce.paint,be.transform.zoom,Et,Ye?[Ct.globeExtVertexBuffer]:null)}Ie.viewport.set([0,0,be.width,be.height])}else be.renderPass==="translucent"&&(be.context.setColorMode(be.colorModeForRenderPass()),function(Ie,Re){const Be=Ie.context,Ue=Be.gl,He=Re.heatmapFbo;if(!He)return;Be.activeTexture.set(Ue.TEXTURE0),Ue.bindTexture(Ue.TEXTURE_2D,He.colorAttachment.get()),Be.activeTexture.set(Ue.TEXTURE1);let Ye=Re.colorRampTexture;Ye||(Ye=Re.colorRampTexture=new I.Texture(Be,Re.colorRamp,Ue.RGBA)),Ye.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE),Ie.useProgram("heatmapTexture").draw(Be,Ue.TRIANGLES,I.DepthMode.disabled,I.StencilMode.disabled,Ie.colorModeForRenderPass(),I.CullFaceMode.disabled,((et,dt,xt,Pt)=>({u_image:0,u_color_ramp:1,u_opacity:dt.paint.get("heatmap-opacity")}))(0,Re),Re.id,Ie.viewportBuffer,Ie.quadTriangleIndexBuffer,Ie.viewportSegments,Re.paint,Ie.transform.zoom)}(be,ce))},line:function(be,q,ce,Te){if(be.renderPass!=="translucent")return;const Ie=ce.paint.get("line-opacity"),Re=ce.paint.get("line-width");if(Ie.constantOr(1)===0||Re.constantOr(1)===0)return;const Be=be.depthModeForSublayer(0,I.DepthMode.ReadOnly),Ue=be.colorModeForRenderPass(),He=be.terrain&&be.terrain.renderingToTexture?1:I.exported.devicePixelRatio,Ye=ce.paint.get("line-dasharray"),et=Ye.constantOr(1),dt=ce.layout.get("line-cap"),xt=ce.paint.get("line-pattern"),Pt=xt.constantOr(1),kt=ce.paint.get("line-gradient"),Tt=ce.getCrossfadeParameters(),Ct=Pt?"linePattern":"line",Et=be.context,zt=Et.gl,Ot=(Kt=>{const Gt=[];Pl(Kt)&&Gt.push("RENDER_LINE_DASH"),Kt.paint.get("line-gradient")&&Gt.push("RENDER_LINE_GRADIENT");const Xt=Kt.paint.get("line-trim-offset");Xt[0]===0&&Xt[1]===0||Gt.push("RENDER_LINE_TRIM_OFFSET");const Wt=Kt.paint.get("line-pattern").constantOr(1),sn=Kt.paint.get("line-opacity").constantOr(1)!==1;return!Wt&&sn&&Gt.push("RENDER_LINE_ALPHA_DISCARD"),Gt})(ce);let Qt=Ot.includes("RENDER_LINE_ALPHA_DISCARD");be.terrain&&be.terrain.clipOrMaskOverlapStencilType()&&(Qt=!1);for(const Kt of Te){const Gt=q.getTile(Kt);if(Pt&&!Gt.patternsLoaded())continue;const Xt=Gt.getBucket(ce);if(!Xt)continue;be.prepareDrawTile();const Wt=Xt.programConfigurations.get(ce.id),sn=be.useProgram(Ct,Wt,Ot),_n=xt.constantOr(null);if(_n&&Gt.imageAtlas){const Dn=Gt.imageAtlas,ir=Dn.patternPositions[_n.to.toString()],er=Dn.patternPositions[_n.from.toString()];ir&&er&&Wt.setConstantPatternPositions(ir,er)}const qn=Ye.constantOr(null),dn=dt.constantOr(null);if(!Pt&&qn&&dn&&Gt.lineAtlas){const Dn=Gt.lineAtlas,ir=Dn.getDash(qn.to,dn),er=Dn.getDash(qn.from,dn);ir&&er&&Wt.setConstantPatternPositions(ir,er)}let[Rn,Fn]=ce.paint.get("line-trim-offset");(dn==="round"||dn==="square")&&Rn!==Fn&&(Rn===0&&(Rn-=1),Fn===1&&(Fn+=1));const Qn=be.terrain?Kt.projMatrix:null,kn=Pt?ih(be,Gt,ce,Tt,Qn,He):Cl(be,Gt,ce,Tt,Qn,Xt.lineClipsArray.length,He,[Rn,Fn]);if(kt){const Dn=Xt.gradients[ce.id];let ir=Dn.texture;if(ce.gradientVersion!==Dn.version){let er=256;if(ce.stepInterpolant){const dr=q.getSource().maxzoom,gr=Kt.canonical.z===dr?Math.ceil(1<<be.transform.maxZoom-Kt.canonical.z):1;er=I.clamp(I.nextPowerOfTwo(Xt.maxLineLength/I.EXTENT*1024*gr),256,Et.maxTextureSize)}Dn.gradient=I.renderColorRamp({expression:ce.gradientExpression(),evaluationKey:"lineProgress",resolution:er,image:Dn.gradient||void 0,clips:Xt.lineClipsArray}),Dn.texture?Dn.texture.update(Dn.gradient):Dn.texture=new I.Texture(Et,Dn.gradient,zt.RGBA),Dn.version=ce.gradientVersion,ir=Dn.texture}Et.activeTexture.set(zt.TEXTURE1),ir.bind(ce.stepInterpolant?zt.NEAREST:zt.LINEAR,zt.CLAMP_TO_EDGE)}et&&(Et.activeTexture.set(zt.TEXTURE0),Gt.lineAtlasTexture.bind(zt.LINEAR,zt.REPEAT),Wt.updatePaintBuffers(Tt)),Pt&&(Et.activeTexture.set(zt.TEXTURE0),Gt.imageAtlasTexture.bind(zt.LINEAR,zt.CLAMP_TO_EDGE),Wt.updatePaintBuffers(Tt)),be.prepareDrawProgram(Et,sn,Kt.toUnwrapped());const Wn=Dn=>{sn.draw(Et,zt.TRIANGLES,Be,Dn,Ue,I.CullFaceMode.disabled,kn,ce.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,ce.paint,be.transform.zoom,Wt,[Xt.layoutVertexBuffer2])};if(Qt){const Dn=be.stencilModeForClipping(Kt).ref;Dn===0&&be.terrain&&Et.clear({stencil:0});const ir={func:zt.EQUAL,mask:255};kn.u_alpha_discard_threshold=.8,Wn(new I.StencilMode(ir,Dn,255,zt.KEEP,zt.KEEP,zt.INVERT)),kn.u_alpha_discard_threshold=0,Wn(new I.StencilMode(ir,Dn,255,zt.KEEP,zt.KEEP,zt.KEEP))}else Wn(be.stencilModeForClipping(Kt))}Qt&&(be.resetStencilClippingMasks(),be.terrain&&Et.clear({stencil:0}))},fill:function(be,q,ce,Te){const Ie=ce.paint.get("fill-color"),Re=ce.paint.get("fill-opacity");if(Re.constantOr(1)===0)return;const Be=be.colorModeForRenderPass(),Ue=ce.paint.get("fill-pattern"),He=be.opaquePassEnabledForLayer()&&!Ue.constantOr(1)&&Ie.constantOr(I.Color.transparent).a===1&&Re.constantOr(0)===1?"opaque":"translucent";if(be.renderPass===He){const Ye=be.depthModeForSublayer(1,be.renderPass==="opaque"?I.DepthMode.ReadWrite:I.DepthMode.ReadOnly);Ml(be,q,ce,Te,Ye,Be,!1)}if(be.renderPass==="translucent"&&ce.paint.get("fill-antialias")){const Ye=be.depthModeForSublayer(ce.getPaintProperty("fill-outline-color")?2:0,I.DepthMode.ReadOnly);Ml(be,q,ce,Te,Ye,Be,!0)}},"fill-extrusion":function(be,q,ce,Te){const Ie=ce.paint.get("fill-extrusion-opacity");if(Ie!==0&&be.renderPass==="translucent"){const Re=new I.DepthMode(be.context.gl.LEQUAL,I.DepthMode.ReadWrite,be.depthRangeFor3D);if(Ie!==1||ce.paint.get("fill-extrusion-pattern").constantOr(1))Qo(be,q,ce,Te,Re,I.StencilMode.disabled,I.ColorMode.disabled),Qo(be,q,ce,Te,Re,be.stencilModeFor3D(),be.colorModeForRenderPass()),be.resetStencilClippingMasks();else{const Be=be.colorModeForRenderPass();Qo(be,q,ce,Te,Re,I.StencilMode.disabled,Be)}}},hillshade:function(be,q,ce,Te){if(be.renderPass!=="offscreen"&&be.renderPass!=="translucent")return;const Ie=be.context,Re=be.depthModeForSublayer(0,I.DepthMode.ReadOnly),Be=be.colorModeForRenderPass(),Ue=be.terrain&&be.terrain.renderingToTexture,[He,Ye]=be.renderPass!=="translucent"||Ue?[{},Te]:be.stencilConfigForOverlap(Te);for(const et of Ye){const dt=q.getTile(et);if(dt.needsHillshadePrepare&&be.renderPass==="offscreen")Ka(be,dt,ce,Re,I.StencilMode.disabled,Be);else if(be.renderPass==="translucent"){const xt=Ue&&be.terrain?be.terrain.stencilModeForRTTOverlap(et):He[et.overscaledZ];hc(be,et,dt,ce,Re,xt,Be)}}Ie.viewport.set([0,0,be.width,be.height]),be.resetStencilClippingMasks()},raster:function(be,q,ce,Te,Ie,Re){if(be.renderPass!=="translucent"||ce.paint.get("raster-opacity")===0||!Te.length)return;const Be=be.context,Ue=Be.gl,He=q.getSource(),Ye=be.useProgram("raster"),et=be.colorModeForRenderPass(),dt=be.terrain&&be.terrain.renderingToTexture,[xt,Pt]=He instanceof hn||dt?[{},Te]:be.stencilConfigForOverlap(Te),kt=Pt[Pt.length-1].overscaledZ,Tt=!be.options.moving;for(const Ct of Pt){const Et=dt?I.DepthMode.disabled:be.depthModeForSublayer(Ct.overscaledZ-kt,ce.paint.get("raster-opacity")===1?I.DepthMode.ReadWrite:I.DepthMode.ReadOnly,Ue.LESS),zt=Ct.toUnwrapped(),Ot=q.getTile(Ct);if(dt&&(!Ot||!Ot.hasData()))continue;const Qt=dt?Ct.projMatrix:be.transform.calculateProjMatrix(zt,Tt),Kt=be.terrain&&dt?be.terrain.stencilModeForRTTOverlap(Ct):xt[Ct.overscaledZ],Gt=Re?0:ce.paint.get("raster-fade-duration");Ot.registerFadeDuration(Gt);const Xt=q.findLoadedParent(Ct,0),Wt=El(Ot,Xt,q,be.transform,Gt);let sn,_n;be.terrain&&be.terrain.prepareDrawTile();const qn=ce.paint.get("raster-resampling")==="nearest"?Ue.NEAREST:Ue.LINEAR;Be.activeTexture.set(Ue.TEXTURE0),Ot.texture.bind(qn,Ue.CLAMP_TO_EDGE),Be.activeTexture.set(Ue.TEXTURE1),Xt?(Xt.texture.bind(qn,Ue.CLAMP_TO_EDGE),sn=Math.pow(2,Xt.tileID.overscaledZ-Ot.tileID.overscaledZ),_n=[Ot.tileID.canonical.x*sn%1,Ot.tileID.canonical.y*sn%1]):Ot.texture.bind(qn,Ue.CLAMP_TO_EDGE);const dn=oh(Qt,_n||[0,0],sn||1,Wt,ce,He instanceof hn?He.perspectiveTransform:[0,0]);if(be.prepareDrawProgram(Be,Ye,zt),He instanceof hn)He.boundsBuffer&&He.boundsSegments&&Ye.draw(Be,Ue.TRIANGLES,Et,I.StencilMode.disabled,et,I.CullFaceMode.disabled,dn,ce.id,He.boundsBuffer,be.quadTriangleIndexBuffer,He.boundsSegments);else{const{tileBoundsBuffer:Rn,tileBoundsIndexBuffer:Fn,tileBoundsSegments:Qn}=be.getTileBoundsBuffers(Ot);Ye.draw(Be,Ue.TRIANGLES,Et,Kt,et,I.CullFaceMode.disabled,dn,ce.id,Rn,Fn,Qn)}}be.resetStencilClippingMasks()},background:function(be,q,ce,Te){const Ie=ce.paint.get("background-color"),Re=ce.paint.get("background-opacity");if(Re===0)return;const Be=be.context,Ue=Be.gl,He=be.transform,Ye=He.tileSize,et=ce.paint.get("background-pattern");if(be.isPatternMissing(et))return;const dt=!et&&Ie.a===1&&Re===1&&be.opaquePassEnabledForLayer()?"opaque":"translucent";if(be.renderPass!==dt)return;const xt=I.StencilMode.disabled,Pt=be.depthModeForSublayer(0,dt==="opaque"?I.DepthMode.ReadWrite:I.DepthMode.ReadOnly),kt=be.colorModeForRenderPass(),Tt=be.useProgram(et?"backgroundPattern":"background");let Ct,Et=Te;Et||(Ct=be.getBackgroundTiles(),Et=Object.values(Ct).map(Ot=>Ot.tileID)),et&&(Be.activeTexture.set(Ue.TEXTURE0),be.imageManager.bind(be.context));const zt=ce.getCrossfadeParameters();for(const Ot of Et){const Qt=Ot.toUnwrapped(),Kt=Te?Ot.projMatrix:be.transform.calculateProjMatrix(Qt);be.prepareDrawTile();const Gt=q?q.getTile(Ot):Ct?Ct[Ot.key]:new I.Tile(Ot,Ye,He.zoom,be),Xt=et?cu(Kt,Re,be,et,{tileID:Ot,tileSize:Ye},zt):ah(Kt,Re,Ie);be.prepareDrawProgram(Be,Tt,Qt);const{tileBoundsBuffer:Wt,tileBoundsIndexBuffer:sn,tileBoundsSegments:_n}=be.getTileBoundsBuffers(Gt);Tt.draw(Be,Ue.TRIANGLES,Pt,xt,kt,I.CullFaceMode.disabled,Xt,ce.id,Wt,sn,_n)}},sky:function(be,q,ce){const Te=be.transform,Ie=Te.projection.name==="mercator"||Te.projection.name==="globe"?1:I.smoothstep(7,8,Te.zoom),Re=ce.paint.get("sky-opacity")*Ie;if(Re===0)return;const Be=be.context,Ue=ce.paint.get("sky-type"),He=new I.DepthMode(Be.gl.LEQUAL,I.DepthMode.ReadOnly,[0,1]),Ye=be.frameCounter/1e3%1;Ue==="atmosphere"?be.renderPass==="offscreen"?ce.needsSkyboxCapture(be)&&(function(et,dt,xt,Pt){const kt=et.context,Tt=kt.gl;let Ct=dt.skyboxFbo;if(!Ct){Ct=dt.skyboxFbo=kt.createFramebuffer(32,32,!1),dt.skyboxGeometry=new wc(kt),dt.skyboxTexture=kt.gl.createTexture(),Tt.bindTexture(Tt.TEXTURE_CUBE_MAP,dt.skyboxTexture),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_WRAP_S,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_WRAP_T,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_MIN_FILTER,Tt.LINEAR),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_MAG_FILTER,Tt.LINEAR);for(let Qt=0;Qt<6;++Qt)Tt.texImage2D(Tt.TEXTURE_CUBE_MAP_POSITIVE_X+Qt,0,Tt.RGBA,32,32,0,Tt.RGBA,Tt.UNSIGNED_BYTE,null)}kt.bindFramebuffer.set(Ct.framebuffer),kt.viewport.set([0,0,32,32]);const Et=dt.getCenter(et,!0),zt=et.useProgram("skyboxCapture"),Ot=new Float64Array(16);I.identity(Ot),I.rotateY(Ot,Ot,.5*-Math.PI),ts(kt,dt,zt,Ot,Et,0),I.identity(Ot),I.rotateY(Ot,Ot,.5*Math.PI),ts(kt,dt,zt,Ot,Et,1),I.identity(Ot),I.rotateX(Ot,Ot,.5*-Math.PI),ts(kt,dt,zt,Ot,Et,2),I.identity(Ot),I.rotateX(Ot,Ot,.5*Math.PI),ts(kt,dt,zt,Ot,Et,3),I.identity(Ot),ts(kt,dt,zt,Ot,Et,4),I.identity(Ot),I.rotateY(Ot,Ot,Math.PI),ts(kt,dt,zt,Ot,Et,5),kt.viewport.set([0,0,et.width,et.height])}(be,ce),ce.markSkyboxValid(be)):be.renderPass==="sky"&&function(et,dt,xt,Pt,kt){const Tt=et.context,Ct=Tt.gl,Et=et.transform,zt=et.useProgram("skybox");Tt.activeTexture.set(Ct.TEXTURE0),Ct.bindTexture(Ct.TEXTURE_CUBE_MAP,dt.skyboxTexture);const Ot=((Qt,Kt,Gt,Xt,Wt)=>({u_matrix:Qt,u_sun_direction:Kt,u_cubemap:0,u_opacity:Xt,u_temporal_offset:Wt}))(Et.skyboxMatrix,dt.getCenter(et,!1),0,Pt,kt);et.prepareDrawProgram(Tt,zt),zt.draw(Tt,Ct.TRIANGLES,xt,I.StencilMode.disabled,et.colorModeForRenderPass(),I.CullFaceMode.backCW,Ot,"skybox",dt.skyboxGeometry.vertexBuffer,dt.skyboxGeometry.indexBuffer,dt.skyboxGeometry.segment)}(be,ce,He,Re,Ye):Ue==="gradient"&&be.renderPass==="sky"&&function(et,dt,xt,Pt,kt){const Tt=et.context,Ct=Tt.gl,Et=et.transform,zt=et.useProgram("skyboxGradient");dt.skyboxGeometry||(dt.skyboxGeometry=new wc(Tt)),Tt.activeTexture.set(Ct.TEXTURE0);let Ot=dt.colorRampTexture;Ot||(Ot=dt.colorRampTexture=new I.Texture(Tt,dt.colorRamp,Ct.RGBA)),Ot.bind(Ct.LINEAR,Ct.CLAMP_TO_EDGE);const Qt=((Kt,Gt,Xt,Wt,sn)=>({u_matrix:Kt,u_color_ramp:0,u_center_direction:Gt,u_radius:I.degToRad(Xt),u_opacity:Wt,u_temporal_offset:sn}))(Et.skyboxMatrix,dt.getCenter(et,!1),dt.paint.get("sky-gradient-radius"),Pt,kt);et.prepareDrawProgram(Tt,zt),zt.draw(Tt,Ct.TRIANGLES,xt,I.StencilMode.disabled,et.colorModeForRenderPass(),I.CullFaceMode.backCW,Qt,"skyboxGradient",dt.skyboxGeometry.vertexBuffer,dt.skyboxGeometry.indexBuffer,dt.skyboxGeometry.segment)}(be,ce,He,Re,Ye)},debug:function(be,q,ce){for(let Te=0;Te<ce.length;Te++)Jr(be,q,ce[Te])},custom:function(be,q,ce){const Te=be.context,Ie=ce.implementation;if(be.transform.projection.unsupportedLayers&&be.transform.projection.unsupportedLayers.includes("custom"))I.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(be.renderPass==="offscreen"){const Re=Ie.prerender;Re&&(be.setCustomLayerDefaults(),Te.setColorMode(be.colorModeForRenderPass()),Re.call(Ie,Te.gl,be.transform.customLayerMatrix()),Te.setDirty(),be.setBaseState())}else if(be.renderPass==="translucent"){be.setCustomLayerDefaults(),Te.setColorMode(be.colorModeForRenderPass()),Te.setStencilMode(I.StencilMode.disabled);const Re=Ie.renderingMode==="3d"?new I.DepthMode(be.context.gl.LEQUAL,I.DepthMode.ReadWrite,be.depthRangeFor3D):be.depthModeForSublayer(0,I.DepthMode.ReadOnly);Te.setDepthMode(Re),Ie.render(Te.gl,be.transform.customLayerMatrix()),Te.setDirty(),be.setBaseState(),Te.bindFramebuffer.set(null)}}};class Ac{constructor(q,ce){this.context=new Dt(q),this.transform=ce,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=I.SourceCache.maxUnderzooming+I.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ml,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(q,ce){const Te=!!q&&!!q.terrain&&this.transform.projection.supportsTerrain;if(!(Te||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new tu(this,q));const Ie=this._terrain;this.transform.elevation=Te?Ie:null,Ie.update(q,this.transform,ce)}_updateFog(q){const ce=q.fog;if(!ce||this.transform.projection.name==="globe"||ce.getOpacity(this.transform.pitch)<1||ce.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[Te,Ie]=ce.getFovAdjustedRange(this.transform._fov);if(Te>Ie)return void(this.transform.fogCullDistSq=null);const Re=Te+.78*(Ie-Te);this.transform.fogCullDistSq=Re*Re}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(q,ce){if(this.width=q*I.exported.devicePixelRatio,this.height=ce*I.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const Te of this.style.order)this.style._layers[Te].resize()}setup(){const q=this.context,ce=new I.StructArrayLayout2i4;ce.emplaceBack(0,0),ce.emplaceBack(I.EXTENT,0),ce.emplaceBack(0,I.EXTENT),ce.emplaceBack(I.EXTENT,I.EXTENT),this.tileExtentBuffer=q.createVertexBuffer(ce,I.posAttributes.members),this.tileExtentSegments=I.SegmentVector.simpleSegment(0,0,4,2);const Te=new I.StructArrayLayout2i4;Te.emplaceBack(0,0),Te.emplaceBack(I.EXTENT,0),Te.emplaceBack(0,I.EXTENT),Te.emplaceBack(I.EXTENT,I.EXTENT),this.debugBuffer=q.createVertexBuffer(Te,I.posAttributes.members),this.debugSegments=I.SegmentVector.simpleSegment(0,0,4,5);const Ie=new I.StructArrayLayout2i4;Ie.emplaceBack(-1,-1),Ie.emplaceBack(1,-1),Ie.emplaceBack(-1,1),Ie.emplaceBack(1,1),this.viewportBuffer=q.createVertexBuffer(Ie,I.posAttributes.members),this.viewportSegments=I.SegmentVector.simpleSegment(0,0,4,2);const Re=new I.StructArrayLayout4i8;Re.emplaceBack(0,0,0,0),Re.emplaceBack(I.EXTENT,0,I.EXTENT,0),Re.emplaceBack(0,I.EXTENT,0,I.EXTENT),Re.emplaceBack(I.EXTENT,I.EXTENT,I.EXTENT,I.EXTENT),this.mercatorBoundsBuffer=q.createVertexBuffer(Re,I.boundsAttributes.members),this.mercatorBoundsSegments=I.SegmentVector.simpleSegment(0,0,4,2);const Be=new I.StructArrayLayout3ui6;Be.emplaceBack(0,1,2),Be.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=q.createIndexBuffer(Be);const Ue=new I.StructArrayLayout1ui2;for(const Ye of[0,1,3,2,0])Ue.emplaceBack(Ye);this.debugIndexBuffer=q.createIndexBuffer(Ue),this.emptyTexture=new I.Texture(q,new I.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),q.gl.RGBA),this.identityMat=I.create();const He=this.context.gl;this.stencilClearMode=new I.StencilMode({func:He.ALWAYS,mask:0},0,255,He.ZERO,He.ZERO,He.ZERO),this.loadTimeStamps.push(I.window.performance.now()),this.atmosphereBuffer=new Ol(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(q){return q._makeTileBoundsBuffers(this.context,this.transform.projection),q._tileBoundsBuffer?{tileBoundsBuffer:q._tileBoundsBuffer,tileBoundsIndexBuffer:q._tileBoundsIndexBuffer,tileBoundsSegments:q._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const q=this.context,ce=q.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(q,ce.TRIANGLES,I.DepthMode.disabled,this.stencilClearMode,I.ColorMode.disabled,I.CullFaceMode.disabled,Jo(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(q,ce,Te){if(!ce||this.currentStencilSource===ce.id||!q.isTileClipped()||!Te||Te.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let Ue=!1;for(const He of Te)if(this._tileClippingMaskIDs[He.key]===void 0){Ue=!0;break}if(!Ue)return}this.currentStencilSource=ce.id;const Ie=this.context,Re=Ie.gl;this.nextStencilID+Te.length>256&&this.clearStencil(),Ie.setColorMode(I.ColorMode.disabled),Ie.setDepthMode(I.DepthMode.disabled);const Be=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Ue of Te){const He=ce.getTile(Ue),Ye=this._tileClippingMaskIDs[Ue.key]=this.nextStencilID++,{tileBoundsBuffer:et,tileBoundsIndexBuffer:dt,tileBoundsSegments:xt}=this.getTileBoundsBuffers(He);Be.draw(Ie,Re.TRIANGLES,I.DepthMode.disabled,new I.StencilMode({func:Re.ALWAYS,mask:0},Ye,255,Re.KEEP,Re.KEEP,Re.REPLACE),I.ColorMode.disabled,I.CullFaceMode.disabled,Jo(Ue.projMatrix),"$clipping",et,dt,xt)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const q=this.nextStencilID++,ce=this.context.gl;return new I.StencilMode({func:ce.NOTEQUAL,mask:255},q,255,ce.KEEP,ce.KEEP,ce.REPLACE)}stencilModeForClipping(q){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(q);const ce=this.context.gl;return new I.StencilMode({func:ce.EQUAL,mask:255},this._tileClippingMaskIDs[q.key],0,ce.KEEP,ce.KEEP,ce.REPLACE)}stencilConfigForOverlap(q){const ce=this.context.gl,Te=q.sort((Be,Ue)=>Ue.overscaledZ-Be.overscaledZ),Ie=Te[Te.length-1].overscaledZ,Re=Te[0].overscaledZ-Ie+1;if(Re>1){this.currentStencilSource=void 0,this.nextStencilID+Re>256&&this.clearStencil();const Be={};for(let Ue=0;Ue<Re;Ue++)Be[Ue+Ie]=new I.StencilMode({func:ce.GEQUAL,mask:255},Ue+this.nextStencilID,255,ce.KEEP,ce.KEEP,ce.REPLACE);return this.nextStencilID+=Re,[Be,Te]}return[{[Ie]:I.StencilMode.disabled},Te]}colorModeForRenderPass(){const q=this.context.gl;return this._showOverdrawInspector?new I.ColorMode([q.CONSTANT_COLOR,q.ONE],new I.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?I.ColorMode.unblended:I.ColorMode.alphaBlended}depthModeForSublayer(q,ce,Te){if(!this.opaquePassEnabledForLayer())return I.DepthMode.disabled;const Ie=1-((1+this.currentLayer)*this.numSublayers+q)*this.depthEpsilon;return new I.DepthMode(Te||this.context.gl.LEQUAL,ce,[Ie,Ie])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(q,ce){this.style=q,this.options=ce,this.lineAtlas=q.lineAtlas,this.imageManager=q.imageManager,this.glyphManager=q.glyphManager,this.symbolFadeChange=q.placement.symbolFadeChange(I.exported.now()),this.imageManager.beginFrame();const Te=this.style.order,Ie=this.style._sourceCaches;for(const He in Ie){const Ye=Ie[He];Ye.used&&Ye.prepare(this.context)}const Re={},Be={},Ue={};for(const He in Ie){const Ye=Ie[He];Re[He]=Ye.getVisibleCoordinates(),Be[He]=Re[He].slice().reverse(),Ue[He]=Ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let He=0;He<Te.length;He++)if(this.style._layers[Te[He]].is3D()){this.opaquePassCutoff=He;break}if(this.terrain&&(this.terrain.updateTileBinding(Ue),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new I.GlobeSharedBuffers(this.context)),I.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const He of Te){const Ye=this.style._layers[He],et=q._getLayerSourceCache(Ye);if(!Ye.hasOffscreenPass()||Ye.isHidden(this.transform.zoom))continue;const dt=et?Be[et.id]:void 0;(Ye.type==="custom"||Ye.isSky()||dt&&dt.length)&&this.renderLayer(this,et,Ye,dt)}if(this.depthRangeFor3D=[0,1-(q.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:ce.showOverdrawInspector?I.Color.black:I.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ce.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=Te.length-1;this.currentLayer>=0;this.currentLayer--){const He=this.style._layers[Te[this.currentLayer]],Ye=q._getLayerSourceCache(He);if(He.isSky())continue;const et=Ye?Be[Ye.id]:void 0;this._renderTileClippingMasks(He,Ye,et),this.renderLayer(this,Ye,He,et)}if(this.style.fog&&this.transform.projection.supportsFog&&function(He,Ye){const et=He.context,dt=et.gl,xt=He.transform,Pt=new I.DepthMode(dt.LEQUAL,I.DepthMode.ReadOnly,[0,1]),kt=He.useProgram("globeAtmosphere",null,xt.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Tt=I.globeToMercatorTransition(xt.zoom),Ct=Ye.properties.get("color").toArray01(),Et=Ye.properties.get("high-color").toArray01(),zt=Ye.properties.get("space-color").toArray01PremultipliedAlpha(),Ot=I.identity$1([]);I.rotateY$1(Ot,Ot,-I.degToRad(xt._center.lng)),I.rotateX$1(Ot,Ot,I.degToRad(xt._center.lat)),I.rotateZ$1(Ot,Ot,xt.angle),I.rotateX$1(Ot,Ot,-xt._pitch);const Qt=I.fromQuat(new Float32Array(16),Ot),Kt=I.mapValue(Ye.properties.get("star-intensity"),0,1,0,.25),Gt=5e-4,Xt=I.mapValue(Ye.properties.get("horizon-blend"),0,1,Gt,.25),Wt=I.globeUseCustomAntiAliasing(He,et,xt)&&Xt===Gt?xt.worldSize/(2*Math.PI*1.025)-1:xt.globeRadius,sn=He.frameCounter/1e3%1,_n=I.length(xt.globeCenterInViewSpace),qn=Math.sqrt(Math.pow(_n,2)-Math.pow(Wt,2)),dn=Math.acos(qn/_n),Rn=((Qn,kn,Wn,Dn,ir,er,dr,gr,Ar,Ur,fr,Sr,Wr,li)=>({u_frustum_tl:Qn,u_frustum_tr:kn,u_frustum_br:Wn,u_frustum_bl:Dn,u_horizon:ir,u_transition:er,u_fadeout_range:dr,u_color:gr,u_high_color:Ar,u_space_color:Ur,u_star_intensity:fr,u_star_size:5*I.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Sr,u_horizon_angle:Wr,u_rotation_matrix:li}))(xt.frustumCorners.TL,xt.frustumCorners.TR,xt.frustumCorners.BR,xt.frustumCorners.BL,xt.frustumCorners.horizon,Tt,Xt,Ct,Et,zt,Kt,sn,dn,Qt);He.prepareDrawProgram(et,kt);const Fn=He.atmosphereBuffer;Fn&&kt.draw(et,dt.TRIANGLES,Pt,I.StencilMode.disabled,I.ColorMode.alphaBlended,I.CullFaceMode.backCW,Rn,"skybox",Fn.vertexBuffer,Fn.indexBuffer,Fn.segments)}(this,this.style.fog),this.renderPass="sky",(I.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<Te.length;this.currentLayer++){const He=this.style._layers[Te[this.currentLayer]],Ye=q._getLayerSourceCache(He);He.isSky()&&this.renderLayer(this,Ye,He,Ye?Be[Ye.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<Te.length;){const He=this.style._layers[Te[this.currentLayer]],Ye=q._getLayerSourceCache(He);if(He.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(He)){if(He.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const et=Ye?(He.type==="symbol"?Ue:Be)[Ye.id]:void 0;this._renderTileClippingMasks(He,Ye,Ye?Re[Ye.id]:void 0),this.renderLayer(this,Ye,He,et),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let He=null;I.values(this.style._layers).forEach(Ye=>{const et=q._getLayerSourceCache(Ye);et&&!Ye.isHidden(this.transform.zoom)&&(!He||He.getSource().maxzoom<et.getSource().maxzoom)&&(He=et)}),He&&this.options.showTileBoundaries&&ns.debug(this,He,He.getVisibleCoordinates())}this.options.showPadding&&function(He){const Ye=He.transform.padding;Us(He,He.transform.height-(Ye.top||0),3,pu),Us(He,Ye.bottom||0,3,Ma),_u(He,Ye.left||0,3,es),_u(He,He.transform.width-(Ye.right||0),3,fu);const et=He.transform.centerPoint;(function(dt,xt,Pt,kt){Vs(dt,xt-1,Pt-10,2,20,kt),Vs(dt,xt-10,Pt-1,20,2,kt)})(He,et.x,He.transform.height-et.y,bc)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(I.window.performance.now()),this.saveCanvasCopy())}}renderLayer(q,ce,Te,Ie){Te.isHidden(this.transform.zoom)||(Te.type==="background"||Te.type==="sky"||Te.type==="custom"||Ie&&Ie.length)&&(this.id=Te.id,this.gpuTimingStart(Te),q.transform.projection.unsupportedLayers&&q.transform.projection.unsupportedLayers.includes(Te.type)||ns[Te.type](q,ce,Te,Ie,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(q){if(!this.options.gpuTiming)return;const ce=this.context.extTimerQuery;let Te=this.gpuTimers[q.id];Te||(Te=this.gpuTimers[q.id]={calls:0,cpuTime:0,query:ce.createQueryEXT()}),Te.calls++,ce.beginQueryEXT(ce.TIME_ELAPSED_EXT,Te.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const q=this.context.extTimerQuery,ce=q.createQueryEXT();this.deferredRenderGpuTimeQueries.push(ce),q.beginQueryEXT(q.TIME_ELAPSED_EXT,ce)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const q=this.context.extTimerQuery;q.endQueryEXT(q.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const q=this.context.extTimerQuery;q.endQueryEXT(q.TIME_ELAPSED_EXT)}collectGpuTimers(){const q=this.gpuTimers;return this.gpuTimers={},q}collectDeferredRenderGpuQueries(){const q=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],q}queryGpuTimers(q){const ce={};for(const Te in q){const Ie=q[Te],Re=this.context.extTimerQuery,Be=Re.getQueryObjectEXT(Ie.query,Re.QUERY_RESULT_EXT)/1e6;Re.deleteQueryEXT(Ie.query),ce[Te]=Be}return ce}queryGpuTimeDeferredRender(q){if(!this.options.gpuTimingDeferredRender)return 0;const ce=this.context.extTimerQuery;let Te=0;for(const Ie of q)Te+=ce.getQueryObjectEXT(Ie,ce.QUERY_RESULT_EXT)/1e6,ce.deleteQueryEXT(Ie);return Te}translatePosMatrix(q,ce,Te,Ie,Re){if(!Te[0]&&!Te[1])return q;const Be=Re?Ie==="map"?this.transform.angle:0:Ie==="viewport"?-this.transform.angle:0;if(Be){const Ye=Math.sin(Be),et=Math.cos(Be);Te=[Te[0]*et-Te[1]*Ye,Te[0]*Ye+Te[1]*et]}const Ue=[Re?Te[0]:Tn(ce,Te[0],this.transform.zoom),Re?Te[1]:Tn(ce,Te[1],this.transform.zoom),0],He=new Float32Array(16);return I.translate(He,q,Ue),He}saveTileTexture(q){const ce=this._tileTextures[q.size[0]];ce?ce.push(q):this._tileTextures[q.size[0]]=[q]}getTileTexture(q){const ce=this._tileTextures[q];return ce&&ce.length>0?ce.pop():null}isPatternMissing(q){if(!q)return!1;if(!q.from||!q.to)return!0;const ce=this.imageManager.getPattern(q.from.toString()),Te=this.imageManager.getPattern(q.to.toString());return!ce||!Te}currentGlobalDefines(){const q=this.terrain&&this.terrain.renderingToTexture,ce=this.style&&this.style.fog,Te=[];return this.terrain&&!this.terrain.renderingToTexture&&Te.push("TERRAIN"),ce&&!q&&ce.getOpacity(this.transform.pitch)!==0&&Te.push("FOG"),q&&Te.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&Te.push("OVERDRAW_INSPECTOR"),Te}useProgram(q,ce,Te){this.cache=this.cache||{};const Ie=Te||[],Re=this.currentGlobalDefines().concat(Ie),Be=Tl.cacheKey(xl[q],q,Re,ce);return this.cache[Be]||(this.cache[Be]=new Tl(this.context,q,xl[q],ce,sh[q],Re)),this.cache[Be]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const q=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(q.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=I.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new I.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(q,ce,Te){if(this.terrain&&this.terrain.renderingToTexture)return;const Ie=this.style.fog;if(Ie){const Re=Ie.getOpacity(this.transform.pitch),Be=((Ue,He,Ye,et,dt,xt,Pt,kt,Tt,Ct,Et)=>{const zt=Ue.transform,Ot=He.properties.get("color").toArray01();Ot[3]=et;const Qt=Ue.frameCounter/1e3%1;return{u_fog_matrix:Ye?zt.calculateFogTileMatrix(Ye):Ue.identityMat,u_fog_range:He.getFovAdjustedRange(zt._fov),u_fog_color:Ot,u_fog_horizon_blend:He.properties.get("horizon-blend"),u_fog_temporal_offset:Qt,u_frustum_tl:dt,u_frustum_tr:xt,u_frustum_br:Pt,u_frustum_bl:kt,u_globe_pos:Tt,u_globe_radius:Ct,u_viewport:Et,u_globe_transition:I.globeToMercatorTransition(zt.zoom),u_is_globe:+(zt.projection.name==="globe")}})(this,Ie,Te,Re,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*I.exported.devicePixelRatio,this.transform.height*I.exported.devicePixelRatio]);ce.setFogUniformValues(q,Be)}}setTileLoadedFlag(q){this.tileLoaded=q}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const q=this.context.gl,ce=q.createTexture();return q.bindTexture(q.TEXTURE_2D,ce),q.copyTexImage2D(q.TEXTURE_2D,0,q.RGBA,0,0,q.drawingBufferWidth,q.drawingBufferHeight,0),ce}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const q=this.style&&this.style.fog;return!!q&&q.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const q=this._backgroundTiles,ce=this._backgroundTiles={},Te=this.transform.coveringTiles({tileSize:512});for(const Ie of Te)ce[Ie.key]=q[Ie.key]||new I.Tile(Ie,512,this.transform.tileZoom,this);return ce}clearBackgroundTiles(){this._backgroundTiles={}}}class Hs{constructor(q=0,ce=0,Te=0,Ie=0){if(isNaN(q)||q<0||isNaN(ce)||ce<0||isNaN(Te)||Te<0||isNaN(Ie)||Ie<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=q,this.bottom=ce,this.left=Te,this.right=Ie}interpolate(q,ce,Te){return ce.top!=null&&q.top!=null&&(this.top=I.number(q.top,ce.top,Te)),ce.bottom!=null&&q.bottom!=null&&(this.bottom=I.number(q.bottom,ce.bottom,Te)),ce.left!=null&&q.left!=null&&(this.left=I.number(q.left,ce.left,Te)),ce.right!=null&&q.right!=null&&(this.right=I.number(q.right,ce.right,Te)),this}getCenter(q,ce){const Te=I.clamp((this.left+q-this.right)/2,0,q),Ie=I.clamp((this.top+ce-this.bottom)/2,0,ce);return new I.pointGeometry(Te,Ie)}equals(q){return this.top===q.top&&this.bottom===q.bottom&&this.left===q.left&&this.right===q.right}clone(){return new Hs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Tc(be,q){const ce=I.getColumn(be,3);I.fromQuat(be,q),I.setColumn(be,3,ce)}function rs(be,q){const ce=I.identity$1([]);return I.rotateZ$1(ce,ce,-q),I.rotateX$1(ce,ce,-be),ce}function is(be,q){const ce=[be[0],be[1],0],Te=[q[0],q[1],0];if(I.length(ce)>=1e-15){const Be=I.normalize([],ce);I.scale$2(Te,Be,I.dot(Te,Be)),q[0]=Te[0],q[1]=Te[1]}const Ie=I.cross([],q,be);if(I.len(Ie)<1e-15)return null;const Re=Math.atan2(-Ie[1],Ie[0]);return rs(Math.atan2(Math.sqrt(be[0]*be[0]+be[1]*be[1]),-be[2]),Re)}class lr{constructor(q,ce){this.position=q,this.orientation=ce}get position(){return this._position}set position(q){if(q){const ce=q instanceof I.MercatorCoordinate?q:new I.MercatorCoordinate(q[0],q[1],q[2]);this._renderWorldCopies&&(ce.x=I.wrap(ce.x,0,1)),this._position=ce}else this._position=null}lookAtPoint(q,ce){if(this.orientation=null,!this.position)return;const Te=this._elevation?this._elevation.getAtPointOrZero(I.MercatorCoordinate.fromLngLat(q)):0,Ie=this.position,Re=I.MercatorCoordinate.fromLngLat(q,Te),Be=[Re.x-Ie.x,Re.y-Ie.y,Re.z-Ie.z];ce||(ce=[0,0,1]),ce[2]=Math.abs(ce[2]),this.orientation=is(Be,ce)}setPitchBearing(q,ce){this.orientation=rs(I.degToRad(q),I.degToRad(-ce))}}class lo{constructor(q,ce){this._transform=I.identity([]),this.orientation=ce,this.position=q}get mercatorPosition(){const q=this.position;return new I.MercatorCoordinate(q[0],q[1],q[2])}get position(){const q=I.getColumn(this._transform,3);return[q[0],q[1],q[2]]}set position(q){var ce;q&&I.setColumn(this._transform,3,[(ce=q)[0],ce[1],ce[2],1])}get orientation(){return this._orientation}set orientation(q){this._orientation=q||I.identity$1([]),q&&Tc(this._transform,this._orientation)}getPitchBearing(){const q=this.forward(),ce=this.right();return{bearing:Math.atan2(-ce[1],ce[0]),pitch:Math.atan2(Math.sqrt(q[0]*q[0]+q[1]*q[1]),-q[2])}}setPitchBearing(q,ce){this._orientation=rs(q,ce),Tc(this._transform,this._orientation)}forward(){const q=I.getColumn(this._transform,2);return[-q[0],-q[1],-q[2]]}up(){const q=I.getColumn(this._transform,1);return[-q[0],-q[1],-q[2]]}right(){const q=I.getColumn(this._transform,0);return[q[0],q[1],q[2]]}getCameraToWorld(q,ce){const Te=new Float64Array(16);return I.invert(Te,this.getWorldToCamera(q,ce)),Te}getWorldToCameraPosition(q,ce,Te){const Ie=this.position;I.scale$2(Ie,Ie,-q);const Re=new Float64Array(16);return I.fromScaling(Re,[Te,Te,Te]),I.translate(Re,Re,Ie),Re[10]*=ce,Re}getWorldToCamera(q,ce){const Te=new Float64Array(16),Ie=new Float64Array(4),Re=this.position;return I.conjugate(Ie,this._orientation),I.scale$2(Re,Re,-q),I.fromQuat(Te,Ie),I.translate(Te,Te,Re),Te[1]*=-1,Te[5]*=-1,Te[9]*=-1,Te[13]*=-1,Te[8]*=ce,Te[9]*=ce,Te[10]*=ce,Te[11]*=ce,Te}getCameraToClipPerspective(q,ce,Te,Ie){const Re=new Float64Array(16);return I.perspective(Re,q,ce,Te,Ie),Re}getDistanceToElevation(q){const ce=q===0?0:I.mercatorZfromAltitude(q,this.position[1]),Te=this.forward();return(ce-this.position[2])/Te[2]}clone(){return new lo([...this.position],[...this.orientation])}}function kc(be,q){const ce=qs(be.projection,be.zoom,be.width,be.height),Te=function(Re,Be,Ue,He,Ye){const et=new I.LngLat(Ue.lng-180*xo,Ue.lat),dt=new I.LngLat(Ue.lng+180*xo,Ue.lat),xt=Re.project(et.lng,et.lat),Pt=Re.project(dt.lng,dt.lat),kt=-Math.atan2(Pt.y-xt.y,Pt.x-xt.x),Tt=I.MercatorCoordinate.fromLngLat(Ue);Tt.y=I.clamp(Tt.y,-.999975,.999975);const Ct=Tt.toLngLat(),Et=Re.project(Ct.lng,Ct.lat),zt=I.MercatorCoordinate.fromLngLat(Ct);zt.x+=xo;const Ot=zt.toLngLat(),Qt=Re.project(Ot.lng,Ot.lat),Kt=Ws(Qt.x-Et.x,Qt.y-Et.y,kt),Gt=I.MercatorCoordinate.fromLngLat(Ct);Gt.y+=xo;const Xt=Gt.toLngLat(),Wt=Re.project(Xt.lng,Xt.lat),sn=Ws(Wt.x-Et.x,Wt.y-Et.y,kt),_n=Math.abs(Kt.x)/Math.abs(sn.y),qn=I.identity([]);I.rotateZ(qn,qn,-kt*(1-(Ye?0:He)));const dn=I.identity([]);return I.scale(dn,dn,[1,1-(1-_n)*He,1]),dn[4]=-sn.x/sn.y*He,I.rotateZ(dn,dn,kt),I.multiply(dn,qn,dn),dn}(be.projection,0,be.center,ce,q),Ie=Cc(be);return I.scale(Te,Te,[Ie,Ie,1]),Te}function Cc(be){const q=be.projection,ce=qs(be.projection,be.zoom,be.width,be.height),Te=Sc(q,be.center),Ie=Sc(q,I.LngLat.convert(q.center));return Math.pow(2,Te*ce+(1-ce)*Ie)}function qs(be,q,ce,Te,Ie=1/0){const Re=be.range;if(!Re)return 0;const Be=Math.min(Ie,Math.max(ce,Te)),Ue=Math.log(Be/1024)/Math.LN2;return I.smoothstep(Re[0]+Ue,Re[1]+Ue,q)}const xo=1/4e4;function Sc(be,q){const ce=I.clamp(q.lat,-I.MAX_MERCATOR_LATITUDE,I.MAX_MERCATOR_LATITUDE),Te=new I.LngLat(q.lng-180*xo,ce),Ie=new I.LngLat(q.lng+180*xo,ce),Re=be.project(Te.lng,ce),Be=be.project(Ie.lng,ce),Ue=I.MercatorCoordinate.fromLngLat(Te),He=I.MercatorCoordinate.fromLngLat(Ie),Ye=Be.x-Re.x,et=Be.y-Re.y,dt=He.x-Ue.x,xt=He.y-Ue.y,Pt=Math.sqrt((dt*dt+xt*xt)/(Ye*Ye+et*et));return Math.log(Pt)/Math.LN2}function Ws(be,q,ce){const Te=Math.cos(ce),Ie=Math.sin(ce);return{x:be*Te-q*Ie,y:be*Ie+q*Te}}class Zs{constructor(q,ce,Te,Ie,Re,Be,Ue){this.tileSize=512,this._renderWorldCopies=Re===void 0||Re,this._minZoom=q||0,this._maxZoom=ce||22,this._minPitch=Te==null?0:Te,this._maxPitch=Ie==null?60:Ie,this.setProjection(Be),this.setMaxBounds(Ue),this.width=0,this.height=0,this._center=new I.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Hs,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new lo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const q=new Zs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return q._elevation=this._elevation,q._centerAltitude=this._centerAltitude,q._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,q.tileSize=this.tileSize,q.width=this.width,q.height=this.height,q.cameraElevationReference=this.cameraElevationReference,q._center=this._center,q._setZoom(this.zoom),q._seaLevelZoom=this._seaLevelZoom,q.angle=this.angle,q._fov=this._fov,q._pitch=this._pitch,q._nearZ=this._nearZ,q._farZ=this._farZ,q._averageElevation=this._averageElevation,q._unmodified=this._unmodified,q._edgeInsets=this._edgeInsets.clone(),q._camera=this._camera.clone(),q._calcMatrices(),q.freezeTileCoverage=this.freezeTileCoverage,q.frustumCorners=this.frustumCorners,q}get elevation(){return this._elevation}set elevation(q){this._elevation!==q&&(this._elevation=q,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(q){const ce=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||ce)&&this._updateCameraOnTerrain(),(q||ce)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return I.pick(this.projection,["name","center","parallels"])}setProjection(q){this.projectionOptions=q||{name:"mercator"};const ce=this.projection?this.getProjection():void 0;this.projection=I.getProjection(this.projectionOptions);const Te=!_e(ce,this.getProjection());return Te&&this._calcMatrices(),this.mercatorFromTransition=!1,Te}setMercatorFromTransition(){const q=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=I.getProjection({name:"mercator"});const ce=q!==this.projection.name;return ce&&this._calcMatrices(),ce}get minZoom(){return this._minZoom}set minZoom(q){this._minZoom!==q&&(this._minZoom=q,this.zoom=Math.max(this.zoom,q))}get maxZoom(){return this._maxZoom}set maxZoom(q){this._maxZoom!==q&&(this._maxZoom=q,this.zoom=Math.min(this.zoom,q))}get minPitch(){return this._minPitch}set minPitch(q){this._minPitch!==q&&(this._minPitch=q,this.pitch=Math.max(this.pitch,q))}get maxPitch(){return this._maxPitch}set maxPitch(q){this._maxPitch!==q&&(this._maxPitch=q,this.pitch=Math.min(this.pitch,q))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(q){q===void 0?q=!0:q===null&&(q=!1),this._renderWorldCopies=q}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const q=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(q))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return I.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new I.pointGeometry(this.width,this.height)}get bearing(){return I.wrap(this.rotation,-180,180)}set bearing(q){this.rotation=q}get rotation(){return-this.angle/Math.PI*180}set rotation(q){const ce=-q*Math.PI/180;var Te;this.angle!==ce&&(this._unmodified=!1,this.angle=ce,this._calcMatrices(),this.rotationMatrix=(Te=new I.ARRAY_TYPE(4),I.ARRAY_TYPE!=Float32Array&&(Te[1]=0,Te[2]=0),Te[0]=1,Te[3]=1,Te),function(Ie,Re,Be){var Ue=Re[0],He=Re[1],Ye=Re[2],et=Re[3],dt=Math.sin(Be),xt=Math.cos(Be);Ie[0]=Ue*xt+Ye*dt,Ie[1]=He*xt+et*dt,Ie[2]=Ue*-dt+Ye*xt,Ie[3]=He*-dt+et*xt}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(q){const ce=I.clamp(q,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ce&&(this._unmodified=!1,this._pitch=ce,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(q){q=Math.max(.01,Math.min(60,q)),this._fov!==q&&(this._unmodified=!1,this._fov=q/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(q){this._averageElevation=q,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(q){const ce=Math.min(Math.max(q,this.minZoom),this.maxZoom);this._zoom!==ce&&(this._unmodified=!1,this._setZoom(ce),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(q){this._zoom=q,this.scale=this.zoomScale(q),this.tileZoom=Math.floor(q),this.zoomFraction=q-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const q=this._elevation;this._centerAltitude=q.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=q.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const q=this._elevation,ce=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],Te=this.horizonLineFromTop();let Ie=0,Re=0;for(let Be=0;Be<ce.length;Be++){const Ue=new I.pointGeometry(ce[Be][0]*this.width,Te+ce[Be][1]*(this.height-Te)),He=q.pointCoordinate(Ue);if(!He)continue;const Ye=1/Math.hypot(He[0]-this._camera.position[0],He[1]-this._camera.position[1]);Ie+=He[3]*Ye,Re+=Ye}return Re===0?NaN:Ie/Re}get center(){return this._center}set center(q){q.lat===this._center.lat&&q.lng===this._center.lng||(this._unmodified=!1,this._center=q,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const q=this._seaLevelZoom,ce=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),Te=this.pixelsPerMeter/this.worldSize*ce,Ie=this._mercatorZfromZoom(q),Re=this._mercatorZfromZoom(this._maxZoom),Be=Math.max(Ie-Te,Re);this._setZoom(this._zoomFromMercatorZ(Be))}get padding(){return this._edgeInsets.toJSON()}set padding(q){this._edgeInsets.equals(q)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,q,1),this._calcMatrices())}computeZoomRelativeTo(q){const ce=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,q.toAltitude()));let Te;Te=q.z<this._camera.position[2]?[ce.x,ce.y,ce.z]:[q.x,q.y,q.z];const Ie=I.length(I.sub([],this._camera.position,Te));return I.clamp(this._zoomFromMercatorZ(Ie),this._minZoom,this._maxZoom)}setFreeCameraOptions(q){if(!this.height||!q.position&&!q.orientation)return;this._updateCameraState();let ce=!1;if(q.orientation&&!I.exactEquals(q.orientation,this._camera.orientation)&&(ce=this._setCameraOrientation(q.orientation)),q.position){const Te=[q.position.x,q.position.y,q.position.z];I.exactEquals$1(Te,this._camera.position)||(this._setCameraPosition(Te),ce=!0)}ce&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const q=this._camera.position,ce=new lr;return ce.position=new I.MercatorCoordinate(q[0],q[1],q[2]),ce.orientation=this._camera.orientation,ce._elevation=this.elevation,ce._renderWorldCopies=this.renderWorldCopies,ce}_setCameraOrientation(q){if(!I.length$1(q))return!1;I.normalize$1(q,q);const ce=I.transformQuat([],[0,0,-1],q),Te=I.transformQuat([],[0,-1,0],q);if(Te[2]<0)return!1;const Ie=is(ce,Te);return!!Ie&&(this._camera.orientation=Ie,!0)}_setCameraPosition(q){const ce=this.zoomScale(this.minZoom)*this.tileSize,Te=this.zoomScale(this.maxZoom)*this.tileSize,Ie=this.cameraToCenterDistance;q[2]=I.clamp(q[2],Ie/Te,Ie/ce),this._camera.position=q}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(q){return this._edgeInsets.equals(q)}interpolatePadding(q,ce,Te){this._unmodified=!1,this._edgeInsets.interpolate(q,ce,Te),this._constrain(),this._calcMatrices()}coveringZoomLevel(q){const ce=(q.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/q.tileSize));return Math.max(0,ce)}getVisibleUnwrappedCoordinates(q){const ce=[new I.UnwrappedTileID(0,q)];if(this.renderWorldCopies){const Te=this.pointCoordinate(new I.pointGeometry(0,0)),Ie=this.pointCoordinate(new I.pointGeometry(this.width,0)),Re=this.pointCoordinate(new I.pointGeometry(this.width,this.height)),Be=this.pointCoordinate(new I.pointGeometry(0,this.height)),Ue=Math.floor(Math.min(Te.x,Ie.x,Re.x,Be.x)),He=Math.floor(Math.max(Te.x,Ie.x,Re.x,Be.x)),Ye=1;for(let et=Ue-Ye;et<=He+Ye;et++)et!==0&&ce.push(new I.UnwrappedTileID(et,q))}return ce}coveringTiles(q){let ce=this.coveringZoomLevel(q);const Te=ce,Ie=this.elevation&&!q.isTerrainDEM,Re=this.projection.name==="mercator";if(q.minzoom!==void 0&&ce<q.minzoom)return[];q.maxzoom!==void 0&&ce>q.maxzoom&&(ce=q.maxzoom);const Be=this.locationCoordinate(this.center),Ue=this.center.lat,He=1<<ce,Ye=[He*Be.x,He*Be.y,0],et=this.projection.name==="globe",dt=!et,xt=I.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ce,dt),Pt=et?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),kt=He*I.mercatorZfromAltitude(1,this.center.lat),Tt=this._camera.position[2]/I.mercatorZfromAltitude(1,this.center.lat),Ct=[He*Pt.x,He*Pt.y,Tt*(dt?1:kt)],Et=this.cameraToCenterDistance/q.tileSize*(q.roundZoom?1:.502),zt=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?ce:0,Ot=q.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Qt=q.isTerrainDEM?-Ot:this._elevation?this._elevation.getMinElevationBelowMSL():0,Kt=this.projection.isReprojectedInTileSpace?Cc(this):1,Gt=kn=>{const Dn=new I.MercatorCoordinate(kn.x+25e-6,kn.y,kn.z),ir=new I.MercatorCoordinate(kn.x,kn.y+25e-6,kn.z),er=kn.toLngLat(),dr=Dn.toLngLat(),gr=ir.toLngLat(),Ar=this.locationCoordinate(er),Ur=this.locationCoordinate(dr),fr=this.locationCoordinate(gr),Sr=Math.hypot(Ur.x-Ar.x,Ur.y-Ar.y),Wr=Math.hypot(fr.x-Ar.x,fr.y-Ar.y);return Math.sqrt(Sr*Wr)*Kt/25e-6},Xt=kn=>{const Wn=Ot,Dn=Qt;return{aabb:I.tileAABB(this,He,0,0,0,kn,Dn,Wn,this.projection),zoom:0,x:0,y:0,minZ:Dn,maxZ:Wn,wrap:kn,fullyVisible:!1}},Wt=[];let sn=[];const _n=ce,qn=q.reparseOverscaled?Te:ce,dn=kn=>kn*kn,Rn=dn((Tt-this._centerAltitude)*kt),Fn=kn=>{if(!this._elevation||!kn.tileID||!Re)return;const Wn=this._elevation.getMinMaxForTile(kn.tileID),Dn=kn.aabb;Wn?(Dn.min[2]=Wn.min,Dn.max[2]=Wn.max,Dn.center[2]=(Dn.min[2]+Dn.max[2])/2):(kn.shouldSplit=Qn(kn),kn.shouldSplit||(Dn.min[2]=Dn.max[2]=Dn.center[2]=this._centerAltitude))},Qn=kn=>{if(kn.zoom<zt)return!0;if(kn.zoom===_n)return!1;if(kn.shouldSplit!=null)return kn.shouldSplit;const Wn=kn.aabb.distanceX(Ct),Dn=kn.aabb.distanceY(Ct);let ir=Rn,er=1;if(et){ir=dn(kn.aabb.distanceZ(Ct));const gr=Math.pow(2,kn.zoom),Ar=I.latFromMercatorY((kn.y+1)/gr),Ur=I.latFromMercatorY(kn.y/gr),fr=Math.min(Math.max(Ue,Ar),Ur),Sr=I.circumferenceAtLatitude(fr)/I.circumferenceAtLatitude(Ue);if(er=fr===Ue?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Sr/this._mercatorScaleRatio),this.zoom<=I.GLOBE_ZOOM_THRESHOLD_MIN&&kn.zoom===_n-1&&Sr>=.9)return!0}else if(Ie&&(ir=dn(kn.aabb.distanceZ(Ct)*kt)),this.projection.isReprojectedInTileSpace&&Te<=5){const gr=Math.pow(2,kn.zoom),Ar=Gt(new I.MercatorCoordinate((kn.x+.5)/gr,(kn.y+.5)/gr));er=Ar>.85?1:Ar}const dr=Wn*Wn+Dn*Dn+ir;return dr<dn((1<<_n-kn.zoom)*Et*er*((gr,Ar)=>{if(Ar*dn(.707)<gr)return 1;const Ur=Math.sqrt(Ar/gr);return Ur/(1.4144271570014144+(Math.pow(1.1,Ur-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ir,Rn),dr))};if(this.renderWorldCopies)for(let kn=1;kn<=3;kn++)Wt.push(Xt(-kn)),Wt.push(Xt(kn));for(Wt.push(Xt(0));Wt.length>0;){const kn=Wt.pop(),Wn=kn.x,Dn=kn.y;let ir=kn.fullyVisible;if(!ir){const er=kn.aabb.intersects(xt);if(er===0)continue;ir=er===2}if(kn.zoom!==_n&&Qn(kn))for(let er=0;er<4;er++){const dr=(Wn<<1)+er%2,gr=(Dn<<1)+(er>>1),Ar={aabb:Re?kn.aabb.quadrant(er):I.tileAABB(this,He,kn.zoom+1,dr,gr,kn.wrap,kn.minZ,kn.maxZ,this.projection),zoom:kn.zoom+1,x:dr,y:gr,wrap:kn.wrap,fullyVisible:ir,tileID:void 0,shouldSplit:void 0,minZ:kn.minZ,maxZ:kn.maxZ};Ie&&!et&&(Ar.tileID=new I.OverscaledTileID(kn.zoom+1===_n?qn:kn.zoom+1,kn.wrap,kn.zoom+1,dr,gr),Fn(Ar)),Wt.push(Ar)}else{const er=kn.zoom===_n?qn:kn.zoom;if(q.minzoom&&q.minzoom>er)continue;const dr=Ye[0]-(.5+Wn+(kn.wrap<<kn.zoom))*(1<<ce-kn.zoom),gr=Ye[1]-.5-Dn,Ar=kn.tileID?kn.tileID:new I.OverscaledTileID(er,kn.wrap,kn.zoom,Wn,Dn);sn.push({tileID:Ar,distanceSq:dr*dr+gr*gr})}}if(this.fogCullDistSq){const kn=this.fogCullDistSq,Wn=this.horizonLineFromTop();sn=sn.filter(Dn=>{const ir=[0,0,0,1],er=[I.EXTENT,I.EXTENT,0,1],dr=this.calculateFogTileMatrix(Dn.tileID.toUnwrapped());I.transformMat4$1(ir,ir,dr),I.transformMat4$1(er,er,dr);const gr=I.getAABBPointSquareDist(ir,er);if(gr===0)return!0;let Ar=!1;const Ur=this._elevation;if(Ur&&gr>kn&&Wn!==0){const fr=this.calculateProjMatrix(Dn.tileID.toUnwrapped());let Sr;q.isTerrainDEM||(Sr=Ur.getMinMaxForTile(Dn.tileID)),Sr||(Sr={min:Qt,max:Ot});const Wr=I.furthestTileCorner(this.rotation),li=[Wr[0]*I.EXTENT,Wr[1]*I.EXTENT,Sr.max];I.transformMat4(li,li,fr),Ar=(1-li[1])*this.height*.5<Wn}return gr<kn||Ar})}return sn.sort((kn,Wn)=>kn.distanceSq-Wn.distanceSq).map(kn=>kn.tileID)}resize(q,ce){this.width=q,this.height=ce,this.pixelsToGLUnits=[2/q,-2/ce],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(q){return Math.pow(2,q)}scaleZoom(q){return Math.log(q)/Math.LN2}project(q){const ce=I.clamp(q.lat,-I.MAX_MERCATOR_LATITUDE,I.MAX_MERCATOR_LATITUDE),Te=this.projection.project(q.lng,ce);return new I.pointGeometry(Te.x*this.worldSize,Te.y*this.worldSize)}unproject(q){return this.projection.unproject(q.x/this.worldSize,q.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(q,ce){let Te,Ie;const Re=this.centerPoint;if(this.projection.name==="globe"){const Ue=this.worldSize;Te=(ce.x-Re.x)/Ue,Ie=(ce.y-Re.y)/Ue}else{const Ue=this.pointCoordinate(ce),He=this.pointCoordinate(Re);Te=Ue.x-He.x,Ie=Ue.y-He.y}const Be=this.locationCoordinate(q);this.setLocation(new I.MercatorCoordinate(Be.x-Te,Be.y-Ie))}setLocation(q){this.center=this.coordinateLocation(q),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(q){return this.projection.locationPoint(this,q)}locationPoint3D(q){return this.projection.locationPoint(this,q,!0)}pointLocation(q){return this.coordinateLocation(this.pointCoordinate(q))}pointLocation3D(q){return this.coordinateLocation(this.pointCoordinate3D(q))}locationCoordinate(q,ce){const Te=ce?I.mercatorZfromAltitude(ce,q.lat):void 0,Ie=this.projection.project(q.lng,q.lat);return new I.MercatorCoordinate(Ie.x,Ie.y,Te)}coordinateLocation(q){return this.projection.unproject(q.x,q.y)}pointRayIntersection(q,ce){const Te=ce!=null?ce:this._centerAltitude,Ie=[q.x,q.y,0,1],Re=[q.x,q.y,1,1];I.transformMat4$1(Ie,Ie,this.pixelMatrixInverse),I.transformMat4$1(Re,Re,this.pixelMatrixInverse);const Be=Re[3];I.scale$1(Ie,Ie,1/Ie[3]),I.scale$1(Re,Re,1/Be);const Ue=Ie[2],He=Re[2];return{p0:Ie,p1:Re,t:Ue===He?0:(Te-Ue)/(He-Ue)}}screenPointToMercatorRay(q){const ce=[q.x,q.y,0,1],Te=[q.x,q.y,1,1];return I.transformMat4$1(ce,ce,this.pixelMatrixInverse),I.transformMat4$1(Te,Te,this.pixelMatrixInverse),I.scale$1(ce,ce,1/ce[3]),I.scale$1(Te,Te,1/Te[3]),ce[2]=I.mercatorZfromAltitude(ce[2],this._center.lat)*this.worldSize,Te[2]=I.mercatorZfromAltitude(Te[2],this._center.lat)*this.worldSize,I.scale$1(ce,ce,1/this.worldSize),I.scale$1(Te,Te,1/this.worldSize),new I.Ray([ce[0],ce[1],ce[2]],I.normalize([],I.sub([],Te,ce)))}rayIntersectionCoordinate(q){const{p0:ce,p1:Te,t:Ie}=q,Re=I.mercatorZfromAltitude(ce[2],this._center.lat),Be=I.mercatorZfromAltitude(Te[2],this._center.lat);return new I.MercatorCoordinate(I.number(ce[0],Te[0],Ie)/this.worldSize,I.number(ce[1],Te[1],Ie)/this.worldSize,I.number(Re,Be,Ie))}pointCoordinate(q,ce=this._centerAltitude){return this.projection.pointCoordinate(this,q.x,q.y,ce)}pointCoordinate3D(q){if(!this.elevation)return this.pointCoordinate(q);let ce=this.projection.pointCoordinate3D(this,q.x,q.y);if(ce)return new I.MercatorCoordinate(ce[0],ce[1],ce[2]);let Te=0,Ie=this.horizonLineFromTop();if(q.y>Ie)return this.pointCoordinate(q);const Re=.02*Ie,Be=q.clone();for(let Ue=0;Ue<10&&Ie-Te>Re;Ue++){Be.y=I.number(Te,Ie,.66);const He=this.projection.pointCoordinate3D(this,Be.x,Be.y);He?(Ie=Be.y,ce=He):Te=Be.y}return ce?new I.MercatorCoordinate(ce[0],ce[1],ce[2]):this.pointCoordinate(q)}isPointAboveHorizon(q){return this.projection.isPointAboveHorizon(this,q)}_coordinatePoint(q,ce){const Te=ce&&this.elevation?this.elevation.getAtPointOrZero(q,this._centerAltitude):this._centerAltitude,Ie=[q.x*this.worldSize,q.y*this.worldSize,Te+q.toAltitude(),1];return I.transformMat4$1(Ie,Ie,this.pixelMatrix),Ie[3]>0?new I.pointGeometry(Ie[0]/Ie[3],Ie[1]/Ie[3]):new I.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(q,ce){const Te=new I.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),Ie=new I.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),Re=new I.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),Be=new I.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let Ue=this.pointCoordinate(Te,q),He=this.pointCoordinate(Ie,q);const Ye=this.pointCoordinate(Re,ce),et=this.pointCoordinate(Be,ce),dt=(xt,Pt)=>(Pt.y-xt.y)/(Pt.x-xt.x);return Ue.y>1&&He.y>=0?Ue=new I.MercatorCoordinate((1-et.y)/dt(et,Ue)+et.x,1):Ue.y<0&&He.y<=1&&(Ue=new I.MercatorCoordinate(-et.y/dt(et,Ue)+et.x,0)),He.y>1&&Ue.y>=0?He=new I.MercatorCoordinate((1-Ye.y)/dt(Ye,He)+Ye.x,1):He.y<0&&Ue.y<=1&&(He=new I.MercatorCoordinate(-Ye.y/dt(Ye,He)+Ye.x,0)),new I.LngLatBounds().extend(this.coordinateLocation(Ue)).extend(this.coordinateLocation(He)).extend(this.coordinateLocation(et)).extend(this.coordinateLocation(Ye))}_getBounds3D(){const q=this.elevation;if(!q.visibleDemTiles.length)return this._getBounds(0,0);const ce=q.visibleDemTiles.reduce((Te,Ie)=>{if(Ie.dem){const Re=Ie.dem.tree;Te.min=Math.min(Te.min,Re.minimums[0]),Te.max=Math.max(Te.max,Re.maximums[0])}return Te},{min:Number.MAX_VALUE,max:0});return this._getBounds(ce.min*q.exaggeration(),ce.max*q.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(q=!0){const ce=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,Te=this.height/2-ce*(1-this._horizonShift);return q?Math.max(0,Te):Te}getMaxBounds(){return this.maxBounds}setMaxBounds(q){this.maxBounds=q,this.minLat=-I.MAX_MERCATOR_LATITUDE,this.maxLat=I.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,q&&(this.minLat=q.getSouth(),this.maxLat=q.getNorth(),this.minLng=q.getWest(),this.maxLng=q.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=I.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=I.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=I.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=I.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(q,ce){return this.projection.createTileMatrix(this,ce,q)}calculateDistanceTileData(q){const ce=q.key,Te=this._distanceTileDataCache;if(Te[ce])return Te[ce];const Ie=q.canonical,Re=1/this.height,Be=this.cameraWorldSize/this.zoomScale(Ie.z),Ue=(Ie.x+Math.pow(2,Ie.z)*q.wrap)*Be,He=Ie.y*Be,Ye=this.point,et=this.angle,dt=Math.sin(-et),xt=-Math.cos(-et);return Te[ce]={bearing:[dt,xt],center:[(Ye.x-Ue)*Re,(Ye.y-He)*Re],scale:Be/I.EXTENT*Re},Te[ce]}calculateFogTileMatrix(q){const ce=q.key,Te=this._fogTileMatrixCache;if(Te[ce])return Te[ce];const Ie=this.projection.createTileMatrix(this,this.cameraWorldSize,q);return I.multiply(Ie,this.worldToFogMatrix,Ie),Te[ce]=new Float32Array(Ie),Te[ce]}calculateProjMatrix(q,ce=!1){const Te=q.key,Ie=ce?this._alignedProjMatrixCache:this._projMatrixCache;if(Ie[Te])return Ie[Te];const Re=this.calculatePosMatrix(q,this.worldSize);return I.multiply(Re,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:ce?this.alignedProjMatrix:this.projMatrix,Re),Ie[Te]=new Float32Array(Re),Ie[Te]}calculatePixelsToTileUnitsMatrix(q){const ce=q.tileID.key,Te=this._pixelsToTileUnitsCache;if(Te[ce])return Te[ce];const Ie=function(Re,Be){const{scale:Ue}=Re.tileTransform,He=Ue*I.EXTENT/(Re.tileSize*Math.pow(2,Be.zoom-Re.tileID.overscaledZ+Re.tileID.canonical.z));return Ye=new Float32Array(4),xt=(et=Be.inverseAdjustmentMatrix)[1],Pt=et[2],kt=et[3],Ct=(dt=[He,He])[1],Ye[0]=et[0]*(Tt=dt[0]),Ye[1]=xt*Tt,Ye[2]=Pt*Ct,Ye[3]=kt*Ct,Ye;var Ye,et,dt,xt,Pt,kt,Tt,Ct}(q,this);return Te[ce]=Ie,Te[ce]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const q=this._elevation;this._updateCameraState();const ce=I.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,Te=this._computeCameraPosition(ce),Ie=this._camera.forward(),Re=I.mercatorZfromAltitude(1,this._center.lat);Te[2]/=Re,Ie[2]/=Re,I.normalize(Ie,Ie);const Be=q.raycast(Te,Ie,q.exaggeration());if(Be){const Ue=I.scaleAndAdd([],Te,Ie,Be),He=new I.MercatorCoordinate(Ue[0],Ue[1],I.mercatorZfromAltitude(Ue[2],I.latFromMercatorY(Ue[1]))),Ye=(He.z+I.length([He.x-Te[0],He.y-Te[1],He.z-Te[2]*Re]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Ye),this._centerAltitude=He.toAltitude(),this._center=this.coordinateLocation(He),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const q=this._elevation;this._updateCameraState();const ce=I.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,Te=this._computeCameraPosition(ce),Ie=q.getAtPointOrZero(new I.MercatorCoordinate(...Te)),Re=this._minimumHeightOverTerrain()*Math.cos(I.degToRad(this._maxPitch)),Be=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*Ie;if(Be<Re){const Ue=this.locationCoordinate(this._center,this._centerAltitude),He=[Ue.x-Te[0],Ue.y-Te[1],Ue.z-Te[2]],Ye=I.length(He);He[2]-=(Re-Be)/this._pixelsPerMercatorPixel;const et=I.length(He);if(et===0)return;I.scale$2(He,He,Ye/et*this._pixelsPerMercatorPixel),this._camera.position=[Ue.x-He[0],Ue.y-He[1],Ue.z*this._pixelsPerMercatorPixel-He[2]],this._camera.orientation=is(He,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const q=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||q){const xt=this.center;return xt.lat=I.clamp(xt.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!q)&&(xt.lng=I.clamp(xt.lng,this.minLng,this.maxLng)),this.center=xt,void(this._constraining=!1)}const ce=this._unmodified,{x:Te,y:Ie}=this.point;let Re=0,Be=Te,Ue=Ie;const He=this.width/2,Ye=this.height/2,et=this.worldMinY*this.scale,dt=this.worldMaxY*this.scale;if(Ie-Ye<et&&(Ue=et+Ye),Ie+Ye>dt&&(Ue=dt-Ye),dt-et<this.height&&(Re=Math.max(Re,this.height/(dt-et)),Ue=(dt+et)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const xt=this.worldMinX*this.scale,Pt=this.worldMaxX*this.scale,kt=this.worldSize/2-(xt+Pt)/2;Be=(Te+kt+this.worldSize)%this.worldSize-kt,Be-He<xt&&(Be=xt+He),Be+He>Pt&&(Be=Pt-He),Pt-xt<this.width&&(Re=Math.max(Re,this.width/(Pt-xt)),Be=(Pt+xt)/2)}Be===Te&&Ue===Ie||(this.center=this.unproject(new I.pointGeometry(Be,Ue))),Re&&(this.zoom+=this.scaleZoom(Re)),this._constrainCameraAltitude(),this._unmodified=ce,this._constraining=!1}_minZoomForBounds(){let q=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(q=Math.max(q,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),q}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const q=this.centerOffset,ce=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=I.mercatorZfromAltitude(1,this.center.lat)/I.mercatorZfromAltitude(1,I.GLOBE_SCALE_MATCH_LATITUDE));const Te=qs(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,Te),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Ie=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?ce:1),Re=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Re[8]=2*-q.x/this.width,Re[9]=2*q.y/this.height;let Be=I.mul([],Re,Ie);if(this.projection.isReprojectedInTileSpace){const Kt=this.locationCoordinate(this.center),Gt=I.identity([]);I.translate(Gt,Gt,[Kt.x*this.worldSize,Kt.y*this.worldSize,0]),I.multiply(Gt,Gt,kc(this)),I.translate(Gt,Gt,[-Kt.x*this.worldSize,-Kt.y*this.worldSize,0]),I.multiply(Be,Be,Gt),this.inverseAdjustmentMatrix=function(Xt){const Wt=kc(Xt,!0);return yt([],[Wt[0],Wt[1],Wt[4],Wt[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=I.scale([],Be,[this.worldSize,this.worldSize,this.worldSize/ce,1]),this.projMatrix=Be,this.invProjMatrix=I.invert(new Float64Array(16),this.projMatrix);const Ue=I.invert([],Re);this.frustumCorners=I.FrustumCorners.fromInvProjectionMatrix(Ue,this.horizonLineFromTop(),this.height);const He=new Float32Array(16);I.identity(He),I.scale(He,He,[1,-1,1]),I.rotateX(He,He,this._pitch),I.rotateZ(He,He,this.angle);const Ye=I.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),et=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ye[8]=2*-q.x/this.width,Ye[9]=2*(q.y+et)/this.height,this.skyboxMatrix=I.multiply(He,Ye,He);const dt=this.point,xt=dt.x,Pt=dt.y,kt=this.width%2/2,Tt=this.height%2/2,Ct=Math.cos(this.angle),Et=Math.sin(this.angle),zt=xt-Math.round(xt)+Ct*kt+Et*Tt,Ot=Pt-Math.round(Pt)+Ct*Tt+Et*kt,Qt=new Float64Array(Be);if(I.translate(Qt,Qt,[zt>.5?zt-1:zt,Ot>.5?Ot-1:Ot,0]),this.alignedProjMatrix=Qt,Be=I.create(),I.scale(Be,Be,[this.width/2,-this.height/2,1]),I.translate(Be,Be,[1,-1,0]),this.labelPlaneMatrix=Be,Be=I.create(),I.scale(Be,Be,[1,-1,1]),I.translate(Be,Be,[-1,-1,0]),I.scale(Be,Be,[2/this.width,2/this.height,1]),this.glCoordMatrix=Be,this.pixelMatrix=I.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Be=I.invert(new Float64Array(16),this.pixelMatrix),!Be)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Be,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=I.calculateGlobeMatrix(this);const Kt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=I.transformMat4(Kt,Kt,Ie),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Be;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const q=this.cameraWorldSize,ce=this.cameraPixelsPerMeter,Te=this._camera.position,Ie=1/this.height/this._pixelsPerMercatorPixel,Re=[q,q,ce];I.scale$2(Re,Re,Ie),I.scale$2(Te,Te,-1),I.multiply$2(Te,Te,Re);const Be=I.create();I.translate(Be,Be,Te),I.scale(Be,Be,Re),this.mercatorFogMatrix=Be,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(q,ce,Ie)}_computeCameraPosition(q){const ce=(q=q||this.pixelsPerMeter)/this.pixelsPerMeter,Te=this._camera.forward(),Ie=this.point,Re=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*ce-q/this.worldSize*this._centerAltitude;return[Ie.x/this.worldSize-Te[0]*Re,Ie.y/this.worldSize-Te[1]*Re,q/this.worldSize*this._centerAltitude-Te[2]*Re]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(q){const ce=this._maxCameraBoundsDistance()*Math.cos(this._pitch),Te=q[2];let Ie=1;Te>0&&(Ie=Math.min((ce-this._camera.position[2])/Te,1)),this._camera.position=I.scaleAndAdd([],this._camera.position,q,Ie),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const q=this._camera.position,ce=this._camera.forward(),{pitch:Te,bearing:Ie}=this._camera.getPitchBearing(),Re=I.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Be=this._mercatorZfromZoom(this._maxZoom)*Math.cos(I.degToRad(this._maxPitch)),Ue=Math.max((q[2]-Re)/Math.cos(Te),Be),He=this._zoomFromMercatorZ(Ue);I.scaleAndAdd(q,q,ce,Ue),this._pitch=I.clamp(Te,I.degToRad(this.minPitch),I.degToRad(this.maxPitch)),this.angle=I.wrap(Ie,-Math.PI,Math.PI),this._setZoom(I.clamp(He,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new I.MercatorCoordinate(q[0],q[1],q[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(q){return Math.pow(2,q)*this.tileSize}_mercatorZfromZoom(q){return this.cameraToCenterDistance/this._worldSizeFromZoom(q)}_minimumHeightOverTerrain(){const q=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(q)}_zoomFromMercatorZ(q){return this.scaleZoom(this.cameraToCenterDistance/(q*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(I.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(q,ce){const Te=Math.min(q.x,ce.x),Ie=Math.max(q.x,ce.x),Re=Math.min(q.y,ce.y),Be=Math.max(q.y,ce.y);if(Re<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const Ue=[new I.pointGeometry(Te,Re),new I.pointGeometry(Ie,Be),new I.pointGeometry(Te,Be),new I.pointGeometry(Ie,Re)],He=this.renderWorldCopies?-3:0,Ye=this.renderWorldCopies?4:1;for(const et of Ue){const dt=this.pointRayIntersection(et);if(dt.t<0)return!0;const xt=this.rayIntersectionCoordinate(dt);if(xt.x<He||xt.y<0||xt.x>Ye||xt.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+I.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new I.pointGeometry(0,0),new I.pointGeometry(this.width,this.height))}zoomDeltaToMovement(q,ce){const Te=I.length(I.sub([],this._camera.position,q)),Ie=this._zoomFromMercatorZ(Te)+ce;return Te-this._mercatorZfromZoom(Ie)}getCameraPoint(){if(this.projection.name==="globe"){const q=function(ce,Te){const Ie=[ce[0],ce[1],ce[2],1];I.transformMat4$1(Ie,Ie,Te);const Re=Math.max(Ie[3],1e-6);return[Ie[0]/Re,Ie[1]/Re,Ie[2]/Re,Re]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new I.pointGeometry(q[0],q[1])}{const q=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new I.pointGeometry(0,q))}}getCameraToCenterDistance(q){const ce=qs(q,this.zoom,this.width,this.height,1024),Te=q.pixelSpaceConversion(this.center.lat,this.worldSize,ce);return .5/Math.tan(.5*this._fov)*this.height*Te}}function Xs(be,q){let ce=!1,Te=null;const Ie=()=>{Te=null,ce&&(be(),Te=setTimeout(Ie,q),ce=!1)};return()=>(ce=!0,Te||Ie(),Te)}class mu{constructor(q){this._hashName=q&&encodeURIComponent(q),I.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Xs(this._updateHashUnthrottled.bind(this),300)}addTo(q){return this._map=q,I.window.addEventListener("hashchange",this._onHashChange,!1),q.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),I.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const q=this._map;if(!q)return"";const ce=Rl(q);if(this._hashName){const Te=this._hashName;let Ie=!1;const Re=I.window.location.hash.slice(1).split("&").map(Be=>{const Ue=Be.split("=")[0];return Ue===Te?(Ie=!0,`${Ue}=${ce}`):Be}).filter(Be=>Be);return Ie||Re.push(`${Te}=${ce}`),`#${Re.join("&")}`}return`#${ce}`}_getCurrentHash(){const q=I.window.location.hash.replace("#","");if(this._hashName){let ce;return q.split("&").map(Te=>Te.split("=")).forEach(Te=>{Te[0]===this._hashName&&(ce=Te)}),(ce&&ce[1]||"").split("/")}return q.split("/")}_onHashChange(){const q=this._map;if(!q)return!1;const ce=this._getCurrentHash();if(ce.length>=3&&!ce.some(Te=>isNaN(Te))){const Te=q.dragRotate.isEnabled()&&q.touchZoomRotate.isEnabled()?+(ce[3]||0):q.getBearing();return q.jumpTo({center:[+ce[2],+ce[1]],zoom:+ce[0],bearing:Te,pitch:+(ce[4]||0)}),!0}return!1}_updateHashUnthrottled(){const q=I.window.location.href.replace(/(#.+)?$/,this.getHashString());I.window.history.replaceState(I.window.history.state,null,q)}}function Rl(be,q){const ce=be.getCenter(),Te=Math.round(100*be.getZoom())/100,Ie=Math.ceil((Te*Math.LN2+Math.log(512/360/.5))/Math.LN10),Re=Math.pow(10,Ie),Be=Math.round(ce.lng*Re)/Re,Ue=Math.round(ce.lat*Re)/Re,He=be.getBearing(),Ye=be.getPitch();let et=q?`/${Be}/${Ue}/${Te}`:`${Te}/${Ue}/${Be}`;return(He||Ye)&&(et+="/"+Math.round(10*He)/10),Ye&&(et+=`/${Math.round(Ye)}`),et}const ea={linearity:.3,easing:I.bezier(0,0,.3,1)},ch=I.extend({deceleration:2500,maxSpeed:1400},ea),uh=I.extend({deceleration:20,maxSpeed:1400},ea),os=I.extend({deceleration:1e3,maxSpeed:360},ea),$l=I.extend({deceleration:1e3,maxSpeed:90},ea);class Pc{constructor(q){this._map=q,this.clear()}clear(){this._inertiaBuffer=[]}record(q){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:I.exported.now(),settings:q})}_drainInertiaBuffer(){const q=this._inertiaBuffer,ce=I.exported.now();for(;q.length>0&&ce-q[0].time>160;)q.shift()}_onMoveEnd(q){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const ce={zoom:0,bearing:0,pitch:0,pan:new I.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:Re}of this._inertiaBuffer)ce.zoom+=Re.zoomDelta||0,ce.bearing+=Re.bearingDelta||0,ce.pitch+=Re.pitchDelta||0,Re.panDelta&&ce.pan._add(Re.panDelta),Re.around&&(ce.around=Re.around),Re.pinchAround&&(ce.pinchAround=Re.pinchAround);const Te=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ie={};if(ce.pan.mag()){const Re=Ys(ce.pan.mag(),Te,I.extend({},ch,q||{}));Ie.offset=ce.pan.mult(Re.amount/ce.pan.mag()),Ie.center=this._map.transform.center,Ks(Ie,Re)}if(ce.zoom){const Re=Ys(ce.zoom,Te,uh);Ie.zoom=this._map.transform.zoom+Re.amount,Ks(Ie,Re)}if(ce.bearing){const Re=Ys(ce.bearing,Te,os);Ie.bearing=this._map.transform.bearing+I.clamp(Re.amount,-179,179),Ks(Ie,Re)}if(ce.pitch){const Re=Ys(ce.pitch,Te,$l);Ie.pitch=this._map.transform.pitch+Re.amount,Ks(Ie,Re)}if(Ie.zoom||Ie.bearing){const Re=ce.pinchAround===void 0?ce.around:ce.pinchAround;Ie.around=Re?this._map.unproject(Re):this._map.getCenter()}return this.clear(),Ie.noMoveStart=!0,Ie}}function Ks(be,q){(!be.duration||be.duration<q.duration)&&(be.duration=q.duration,be.easing=q.easing)}function Ys(be,q,ce){const{maxSpeed:Te,linearity:Ie,deceleration:Re}=ce,Be=I.clamp(be*Ie/(q/1e3),-Te,Te),Ue=Math.abs(Be)/(Re*Ie);return{easing:ce.easing,duration:1e3*Ue,amount:Be*(Ue/2)}}class Xi extends I.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(q,ce,Te,Ie={}){const Re=qe(ce.getCanvasContainer(),Te),Be=ce.unproject(Re);super(q,I.extend({point:Re,lngLat:Be,originalEvent:Te},Ie)),this._defaultPrevented=!1,this.target=ce}}class Oa extends I.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(q,ce,Te){const Ie=q==="touchend"?Te.changedTouches:Te.touches,Re=Ne(ce.getCanvasContainer(),Ie),Be=Re.map(He=>ce.unproject(He)),Ue=Re.reduce((He,Ye,et,dt)=>He.add(Ye.div(dt.length)),new I.pointGeometry(0,0));super(q,{points:Re,point:Ue,lngLats:Be,lngLat:ce.unproject(Ue),originalEvent:Te}),this._defaultPrevented=!1}}class gu extends I.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(q,ce,Te){super(q,{originalEvent:Te}),this._defaultPrevented=!1}}class Js{constructor(q,ce){this._map=q,this._clickTolerance=ce.clickTolerance}reset(){this._mousedownPos=void 0}wheel(q){return this._firePreventable(new gu(q.type,this._map,q))}mousedown(q,ce){return this._mousedownPos=ce,this._firePreventable(new Xi(q.type,this._map,q))}mouseup(q){this._map.fire(new Xi(q.type,this._map,q))}preclick(q){const ce=I.extend({},q);ce.type="preclick",this._map.fire(new Xi(ce.type,this._map,ce))}click(q,ce){this._mousedownPos&&this._mousedownPos.dist(ce)>=this._clickTolerance||(this.preclick(q),this._map.fire(new Xi(q.type,this._map,q)))}dblclick(q){return this._firePreventable(new Xi(q.type,this._map,q))}mouseover(q){this._map.fire(new Xi(q.type,this._map,q))}mouseout(q){this._map.fire(new Xi(q.type,this._map,q))}touchstart(q){return this._firePreventable(new Oa(q.type,this._map,q))}touchmove(q){this._map.fire(new Oa(q.type,this._map,q))}touchend(q){this._map.fire(new Oa(q.type,this._map,q))}touchcancel(q){this._map.fire(new Oa(q.type,this._map,q))}_firePreventable(q){if(this._map.fire(q),q.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yu{constructor(q){this._map=q}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(q){this._map.fire(new Xi(q.type,this._map,q))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(q){this._delayContextMenu?this._contextMenuEvent=q:this._map.fire(new Xi(q.type,this._map,q)),this._map.listens("contextmenu")&&q.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vu{constructor(q,ce){this._map=q,this._el=q.getCanvasContainer(),this._container=q.getContainer(),this._clickTolerance=ce.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(q,ce){this.isEnabled()&&q.shiftKey&&q.button===0&&(Fe(),this._startPos=this._lastPos=ce,this._active=!0)}mousemoveWindow(q,ce){if(!this._active)return;const Te=ce;if(this._lastPos.equals(Te)||!this._box&&Te.dist(this._startPos)<this._clickTolerance)return;const Ie=this._startPos;this._lastPos=Te,this._box||(this._box=xe("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",q));const Re=Math.min(Ie.x,Te.x),Be=Math.max(Ie.x,Te.x),Ue=Math.min(Ie.y,Te.y),He=Math.max(Ie.y,Te.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Re}px,${Ue}px)`,this._box.style.width=Be-Re+"px",this._box.style.height=He-Ue+"px")})}mouseupWindow(q,ce){if(!this._active||q.button!==0)return;const Te=this._startPos,Ie=ce;if(this.reset(),We(),Te.x!==Ie.x||Te.y!==Ie.y)return this._map.fire(new I.Event("boxzoomend",{originalEvent:q})),{cameraAnimation:Re=>Re.fitScreenCoordinates(Te,Ie,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",q)}keydown(q){this._active&&q.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",q))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ze(),delete this._startPos,delete this._lastPos}_fireEvent(q,ce){return this._map.fire(new I.Event(q,{originalEvent:ce}))}}function zl(be,q){const ce={};for(let Te=0;Te<be.length;Te++)ce[be[Te].identifier]=q[Te];return ce}class as{constructor(q){this.reset(),this.numTouches=q.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(q,ce,Te){(this.centroid||Te.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=q.timeStamp),Te.length===this.numTouches&&(this.centroid=function(Ie){const Re=new I.pointGeometry(0,0);for(const Be of Ie)Re._add(Be);return Re.div(Ie.length)}(ce),this.touches=zl(Te,ce)))}touchmove(q,ce,Te){if(this.aborted||!this.centroid)return;const Ie=zl(Te,ce);for(const Re in this.touches){const Be=this.touches[Re],Ue=Ie[Re];(!Ue||Ue.dist(Be)>30)&&(this.aborted=!0)}}touchend(q,ce,Te){if((!this.centroid||q.timeStamp-this.startTime>500)&&(this.aborted=!0),Te.length===0){const Ie=!this.aborted&&this.centroid;if(this.reset(),Ie)return Ie}}}class Dl{constructor(q){this.singleTap=new as(q),this.numTaps=q.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(q,ce,Te){this.singleTap.touchstart(q,ce,Te)}touchmove(q,ce,Te){this.singleTap.touchmove(q,ce,Te)}touchend(q,ce,Te){const Ie=this.singleTap.touchend(q,ce,Te);if(Ie){const Re=q.timeStamp-this.lastTime<500,Be=!this.lastTap||this.lastTap.dist(Ie)<30;if(Re&&Be||this.reset(),this.count++,this.lastTime=q.timeStamp,this.lastTap=Ie,this.count===this.numTaps)return this.reset(),Ie}}}class xu{constructor(){this._zoomIn=new Dl({numTouches:1,numTaps:2}),this._zoomOut=new Dl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(q,ce,Te){this._zoomIn.touchstart(q,ce,Te),this._zoomOut.touchstart(q,ce,Te)}touchmove(q,ce,Te){this._zoomIn.touchmove(q,ce,Te),this._zoomOut.touchmove(q,ce,Te)}touchend(q,ce,Te){const Ie=this._zoomIn.touchend(q,ce,Te),Re=this._zoomOut.touchend(q,ce,Te);return Ie?(this._active=!0,q.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Be=>Be.easeTo({duration:300,zoom:Be.getZoom()+1,around:Be.unproject(Ie)},{originalEvent:q})}):Re?(this._active=!0,q.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Be=>Be.easeTo({duration:300,zoom:Be.getZoom()-1,around:Be.unproject(Re)},{originalEvent:q})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const bu={0:1,2:2};class ss{constructor(q){this.reset(),this._clickTolerance=q.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(q,ce){return!1}_move(q,ce){return{}}mousedown(q,ce){if(this._lastPoint)return;const Te=Ke(q);this._correctButton(q,Te)&&(this._lastPoint=ce,this._eventButton=Te)}mousemoveWindow(q,ce){const Te=this._lastPoint;if(Te){if(q.preventDefault(),this._eventButton!=null&&function(Ie,Re){const Be=bu[Re];return Ie.buttons===void 0||(Ie.buttons&Be)!==Be}(q,this._eventButton))this.reset();else if(this._moved||!(ce.dist(Te)<this._clickTolerance))return this._moved=!0,this._lastPoint=ce,this._move(Te,ce)}}mouseupWindow(q){this._lastPoint&&Ke(q)===this._eventButton&&(this._moved&&We(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wu extends ss{mousedown(q,ce){super.mousedown(q,ce),this._lastPoint&&(this._active=!0)}_correctButton(q,ce){return ce===0&&!q.ctrlKey}_move(q,ce){return{around:ce,panDelta:ce.sub(q)}}}class ta extends ss{_correctButton(q,ce){return ce===0&&q.ctrlKey||ce===2}_move(q,ce){const Te=.8*(ce.x-q.x);if(Te)return this._active=!0,{bearingDelta:Te}}contextmenu(q){q.preventDefault()}}class Gi extends ss{_correctButton(q,ce){return ce===0&&q.ctrlKey||ce===2}_move(q,ce){const Te=-.5*(ce.y-q.y);if(Te)return this._active=!0,{pitchDelta:Te}}contextmenu(q){q.preventDefault()}}class hh{constructor(q,ce){this._map=q,this._el=q.getCanvasContainer(),this._minTouches=1,this._clickTolerance=ce.clickTolerance||1,this.reset(),I.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new I.pointGeometry(0,0)}touchstart(q,ce,Te){return this._calculateTransform(q,ce,Te)}touchmove(q,ce,Te){if(this._active&&!(Te.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(Te.length===1&&!I.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return q.cancelable&&q.preventDefault(),this._calculateTransform(q,ce,Te)}}touchend(q,ce,Te){this._calculateTransform(q,ce,Te),this._active&&Te.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(q,ce,Te){Te.length>0&&(this._active=!0);const Ie=zl(Te,ce),Re=new I.pointGeometry(0,0),Be=new I.pointGeometry(0,0);let Ue=0;for(const Ye in Ie){const et=Ie[Ye],dt=this._touches[Ye];dt&&(Re._add(et),Be._add(et.sub(dt)),Ue++,Ie[Ye]=et)}if(this._touches=Ie,Ue<this._minTouches||!Be.mag())return;const He=Be.div(Ue);return this._sum._add(He),this._sum.mag()<this._clickTolerance?void 0:{around:Re.div(Ue),panDelta:He}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=xe("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ll{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(q){}_move(q,ce,Te){return{}}touchstart(q,ce,Te){this._firstTwoTouches||Te.length<2||(this._firstTwoTouches=[Te[0].identifier,Te[1].identifier],this._start([ce[0],ce[1]]))}touchmove(q,ce,Te){const Ie=this._firstTwoTouches;if(!Ie)return;q.preventDefault();const[Re,Be]=Ie,Ue=Bl(Te,ce,Re),He=Bl(Te,ce,Be);if(!Ue||!He)return;const Ye=this._aroundCenter?null:Ue.add(He).div(2);return this._move([Ue,He],Ye,q)}touchend(q,ce,Te){if(!this._firstTwoTouches)return;const[Ie,Re]=this._firstTwoTouches,Be=Bl(Te,ce,Ie),Ue=Bl(Te,ce,Re);Be&&Ue||(this._active&&We(),this.reset())}touchcancel(){this.reset()}enable(q){this._enabled=!0,this._aroundCenter=!!q&&q.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bl(be,q,ce){for(let Te=0;Te<be.length;Te++)if(be[Te].identifier===ce)return q[Te]}function Eu(be,q){return Math.log(be/q)/Math.LN2}class bo extends Ll{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(q){this._startDistance=this._distance=q[0].dist(q[1])}_move(q,ce){const Te=this._distance;if(this._distance=q[0].dist(q[1]),this._active||!(Math.abs(Eu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eu(this._distance,Te),pinchAround:ce}}}function Ic(be,q){return 180*be.angleWith(q)/Math.PI}class Ra extends Ll{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])}_move(q,ce){const Te=this._vector;if(this._vector=q[0].sub(q[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ic(this._vector,Te),pinchAround:ce}}_isBelowThreshold(q){this._minDiameter=Math.min(this._minDiameter,q.mag());const ce=25/(Math.PI*this._minDiameter)*360,Te=Ic(q,this._startVector);return Math.abs(Te)<ce}}function wo(be){return Math.abs(be.y)>Math.abs(be.x)}class na extends Ll{constructor(q){super(),this._map=q}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(q){this._lastPoints=q,wo(q[0].sub(q[1]))&&(this._valid=!1)}_move(q,ce,Te){const Ie=this._lastPoints;if(!Ie)return;const Re=q[0].sub(Ie[0]),Be=q[1].sub(Ie[1]);return this._map._cooperativeGestures&&Te.touches.length<3||(this._valid=this.gestureBeginsVertically(Re,Be,Te.timeStamp),!this._valid)?void 0:(this._lastPoints=q,this._active=!0,{pitchDelta:(Re.y+Be.y)/2*-.5})}gestureBeginsVertically(q,ce,Te){if(this._valid!==void 0)return this._valid;const Ie=q.mag()>=2,Re=ce.mag()>=2;if(!Ie&&!Re)return;if(!Ie||!Re)return this._firstMove==null&&(this._firstMove=Te),Te-this._firstMove<100&&void 0;const Be=q.y>0==ce.y>0;return wo(q)&&wo(ce)&&Be}}const cr={panStep:100,bearingStep:15,pitchStep:10};class ls{constructor(){const q=cr;this._panStep=q.panStep,this._bearingStep=q.bearingStep,this._pitchStep=q.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(q){if(q.altKey||q.ctrlKey||q.metaKey)return;let ce=0,Te=0,Ie=0,Re=0,Be=0;switch(q.keyCode){case 61:case 107:case 171:case 187:ce=1;break;case 189:case 109:case 173:ce=-1;break;case 37:q.shiftKey?Te=-1:(q.preventDefault(),Re=-1);break;case 39:q.shiftKey?Te=1:(q.preventDefault(),Re=1);break;case 38:q.shiftKey?Ie=1:(q.preventDefault(),Be=-1);break;case 40:q.shiftKey?Ie=-1:(q.preventDefault(),Be=1);break;default:return}return this._rotationDisabled&&(Te=0,Ie=0),{cameraAnimation:Ue=>{const He=Ue.getZoom();Ue.easeTo({duration:300,easeId:"keyboardHandler",easing:Au,zoom:ce?Math.round(He)+ce*(q.shiftKey?2:1):He,bearing:Ue.getBearing()+Te*this._bearingStep,pitch:Ue.getPitch()+Ie*this._pitchStep,offset:[-Re*this._panStep,-Be*this._panStep],center:Ue.getCenter()},{originalEvent:q})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Au(be){return be*(2-be)}const cs=4.000244140625;class Qs{constructor(q,ce){this._map=q,this._el=q.getCanvasContainer(),this._handler=ce,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,I.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(q){this._defaultZoomRate=q}setWheelZoomRate(q){this._wheelZoomRate=q}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(q){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!q&&q.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(q){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(q.ctrlKey||q.metaKey||this.isZooming()||I.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let ce=q.deltaMode===I.window.WheelEvent.DOM_DELTA_LINE?40*q.deltaY:q.deltaY;const Te=I.exported.now(),Ie=Te-(this._lastWheelEventTime||0);this._lastWheelEventTime=Te,ce!==0&&ce%cs==0?this._type="wheel":ce!==0&&Math.abs(ce)<4?this._type="trackpad":Ie>400?(this._type=null,this._lastValue=ce,this._timeout=setTimeout(this._onTimeout,40,q)):this._type||(this._type=Math.abs(Ie*ce)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ce+=this._lastValue)),q.shiftKey&&ce&&(ce/=4),this._type&&(this._lastWheelEvent=q,this._delta-=ce,this._active||this._start(q)),q.preventDefault()}_onTimeout(q){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(q)}_start(q){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const ce=qe(this._el,q);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:ce,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const q=this._map.transform,ce=()=>q._terrainEnabled()&&this._aroundCoord?q.computeZoomRelativeTo(this._aroundCoord):q.zoom;if(this._delta!==0){const He=this._type==="wheel"&&Math.abs(this._delta)>cs?this._wheelZoomRate:this._defaultZoomRate;let Ye=2/(1+Math.exp(-Math.abs(this._delta*He)));this._delta<0&&Ye!==0&&(Ye=1/Ye);const et=ce(),dt=Math.pow(2,et),xt=typeof this._targetZoom=="number"?q.zoomScale(this._targetZoom):dt;this._targetZoom=Math.min(q.maxZoom,Math.max(q.minZoom,q.scaleZoom(xt*Ye))),this._type==="wheel"&&(this._startZoom=et,this._easing=this._smoothOutEasing(200)),this._delta=0}const Te=typeof this._targetZoom=="number"?this._targetZoom:ce(),Ie=this._startZoom,Re=this._easing;let Be,Ue=!1;if(this._type==="wheel"&&Ie&&Re){const He=Math.min((I.exported.now()-this._lastWheelEventTime)/200,1),Ye=Re(He);Be=I.number(Ie,Te,Ye),He<1?this._frameId||(this._frameId=!0):Ue=!0}else Be=Te,Ue=!0;return this._active=!0,Ue&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ue,zoomDelta:Be-ce(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(q){let ce=I.ease;if(this._prevEase){const Te=this._prevEase,Ie=(I.exported.now()-Te.start)/Te.duration,Re=Te.easing(Ie+.01)-Te.easing(Ie),Be=.27/Math.sqrt(Re*Re+1e-4)*.01,Ue=Math.sqrt(.0729-Be*Be);ce=I.bezier(Be,Ue,.25,1)}return this._prevEase={start:I.exported.now(),duration:q,easing:ce},ce}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=xe("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(I.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Mc{constructor(q,ce){this._clickZoom=q,this._tapZoom=ce}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Tu{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(q,ce){return q.preventDefault(),{cameraAnimation:Te=>{Te.easeTo({duration:300,zoom:Te.getZoom()+(q.shiftKey?-1:1),around:Te.unproject(ce)},{originalEvent:q})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ku{constructor(){this._tap=new Dl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(q,ce,Te){this._swipePoint||(this._tapTime&&q.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?Te.length>0&&(this._swipePoint=ce[0],this._swipeTouch=Te[0].identifier):this._tap.touchstart(q,ce,Te))}touchmove(q,ce,Te){if(this._tapTime){if(this._swipePoint){if(Te[0].identifier!==this._swipeTouch)return;const Ie=ce[0],Re=Ie.y-this._swipePoint.y;return this._swipePoint=Ie,q.preventDefault(),this._active=!0,{zoomDelta:Re/128}}}else this._tap.touchmove(q,ce,Te)}touchend(q,ce,Te){this._tapTime?this._swipePoint&&Te.length===0&&this.reset():this._tap.touchend(q,ce,Te)&&(this._tapTime=q.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cu{constructor(q,ce,Te){this._el=q,this._mousePan=ce,this._touchPan=Te}enable(q){this._inertiaOptions=q||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Su{constructor(q,ce,Te){this._pitchWithRotate=q.pitchWithRotate,this._mouseRotate=ce,this._mousePitch=Te}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class el{constructor(q,ce,Te,Ie){this._el=q,this._touchZoom=ce,this._touchRotate=Te,this._tapDragZoom=Ie,this._rotationDisabled=!1,this._enabled=!0}enable(q){this._touchZoom.enable(q),this._rotationDisabled||this._touchRotate.enable(q),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ai=be=>be.zoom||be.drag||be.pitch||be.rotate;class Fl extends I.Event{}class pi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(q,ce){const Te=I.sub([],ce,q);this.radius=I.length(Te[2]<0?I.div([],Te,this.constants):[Te[0],Te[1],0])}projectRay(q){I.div(q,q,this.constants),I.normalize(q,q),I.mul$1(q,q,this.constants);const ce=I.scale$2([],q,this.radius);if(ce[2]>0){const Te=I.scale$2([],[0,0,1],I.dot(ce,[0,0,1])),Ie=I.scale$2([],I.normalize([],[ce[0],ce[1],0]),this.radius),Re=I.add([],ce,I.scale$2([],I.sub([],I.add([],Ie,Te),ce),2));ce[0]=Re[0],ce[1]=Re[1]}return ce}}function Hi(be){return be.panDelta&&be.panDelta.mag()||be.zoomDelta||be.bearingDelta||be.pitchDelta}class Oc{constructor(q,ce){this._map=q,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pc(q),this._bearingSnap=ce.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new pi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(ce),I.bindAll(["handleEvent","handleWindowEvent"],this);const Te=this._el;this._listeners=[[Te,"touchstart",{passive:!0}],[Te,"touchmove",{passive:!1}],[Te,"touchend",void 0],[Te,"touchcancel",void 0],[Te,"mousedown",void 0],[Te,"mousemove",void 0],[Te,"mouseup",void 0],[I.window.document,"mousemove",{capture:!0}],[I.window.document,"mouseup",void 0],[Te,"mouseover",void 0],[Te,"mouseout",void 0],[Te,"dblclick",void 0],[Te,"click",void 0],[Te,"keydown",{capture:!1}],[Te,"keyup",void 0],[Te,"wheel",{passive:!1}],[Te,"contextmenu",void 0],[I.window,"blur",void 0]];for(const[Ie,Re,Be]of this._listeners)Ie.addEventListener(Re,Ie===I.window.document?this.handleWindowEvent:this.handleEvent,Be)}destroy(){for(const[q,ce,Te]of this._listeners)q.removeEventListener(ce,q===I.window.document?this.handleWindowEvent:this.handleEvent,Te)}_addDefaultHandlers(q){const ce=this._map,Te=ce.getCanvasContainer();this._add("mapEvent",new Js(ce,q));const Ie=ce.boxZoom=new vu(ce,q);this._add("boxZoom",Ie);const Re=new xu,Be=new Tu;ce.doubleClickZoom=new Mc(Be,Re),this._add("tapZoom",Re),this._add("clickZoom",Be);const Ue=new ku;this._add("tapDragZoom",Ue);const He=ce.touchPitch=new na(ce);this._add("touchPitch",He);const Ye=new ta(q),et=new Gi(q);ce.dragRotate=new Su(q,Ye,et),this._add("mouseRotate",Ye,["mousePitch"]),this._add("mousePitch",et,["mouseRotate"]);const dt=new wu(q),xt=new hh(ce,q);ce.dragPan=new Cu(Te,dt,xt),this._add("mousePan",dt),this._add("touchPan",xt,["touchZoom","touchRotate"]);const Pt=new Ra,kt=new bo;ce.touchZoomRotate=new el(Te,kt,Pt,Ue),this._add("touchRotate",Pt,["touchPan","touchZoom"]),this._add("touchZoom",kt,["touchPan","touchRotate"]),this._add("blockableMapEvent",new yu(ce));const Tt=ce.scrollZoom=new Qs(ce,this);this._add("scrollZoom",Tt,["mousePan"]);const Ct=ce.keyboard=new ls;this._add("keyboard",Ct);for(const Et of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])q.interactive&&q[Et]&&ce[Et].enable(q[Et])}_add(q,ce,Te){this._handlers.push({handlerName:q,handler:ce,allowed:Te}),this._handlersById[q]=ce}stop(q){if(!this._updatingCamera){for(const{handler:ce}of this._handlers)ce.reset();this._inertia.clear(),this._fireEvents({},{},q),this._changes=[]}}isActive(){for(const{handler:q}of this._handlers)if(q.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ai(this._eventsInProgress)||this.isZooming()}_blockedByActive(q,ce,Te){for(const Ie in q)if(Ie!==Te&&(!ce||ce.indexOf(Ie)<0))return!0;return!1}handleWindowEvent(q){this.handleEvent(q,`${q.type}Window`)}_getMapTouches(q){const ce=[];for(const Te of q)this._el.contains(Te.target)&&ce.push(Te);return ce}handleEvent(q,ce){this._updatingCamera=!0;const Te=q.type==="renderFrame",Ie=Te?void 0:q,Re={needsRenderFrame:!1},Be={},Ue={},He=q.touches?this._getMapTouches(q.touches):void 0,Ye=He?Ne(this._el,He):Te?void 0:qe(this._el,q);for(const{handlerName:xt,handler:Pt,allowed:kt}of this._handlers){if(!Pt.isEnabled())continue;let Tt;this._blockedByActive(Ue,kt,xt)?Pt.reset():Pt[ce||q.type]&&(Tt=Pt[ce||q.type](q,Ye,He),this.mergeHandlerResult(Re,Be,Tt,xt,Ie),Tt&&Tt.needsRenderFrame&&this._triggerRenderFrame()),(Tt||Pt.isActive())&&(Ue[xt]=Pt)}const et={};for(const xt in this._previousActiveHandlers)Ue[xt]||(et[xt]=Ie);this._previousActiveHandlers=Ue,(Object.keys(et).length||Hi(Re))&&(this._changes.push([Re,Be,et]),this._triggerRenderFrame()),(Object.keys(Ue).length||Hi(Re))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:dt}=Re;dt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],dt(this._map))}mergeHandlerResult(q,ce,Te,Ie,Re){if(!Te)return;I.extend(q,Te);const Be={handlerName:Ie,originalEvent:Te.originalEvent||Re};Te.zoomDelta!==void 0&&(ce.zoom=Be),Te.panDelta!==void 0&&(ce.drag=Be),Te.pitchDelta!==void 0&&(ce.pitch=Be),Te.bearingDelta!==void 0&&(ce.rotate=Be)}_applyChanges(){const q={},ce={},Te={};for(const[Ie,Re,Be]of this._changes)Ie.panDelta&&(q.panDelta=(q.panDelta||new I.pointGeometry(0,0))._add(Ie.panDelta)),Ie.zoomDelta&&(q.zoomDelta=(q.zoomDelta||0)+Ie.zoomDelta),Ie.bearingDelta&&(q.bearingDelta=(q.bearingDelta||0)+Ie.bearingDelta),Ie.pitchDelta&&(q.pitchDelta=(q.pitchDelta||0)+Ie.pitchDelta),Ie.around!==void 0&&(q.around=Ie.around),Ie.aroundCoord!==void 0&&(q.aroundCoord=Ie.aroundCoord),Ie.pinchAround!==void 0&&(q.pinchAround=Ie.pinchAround),Ie.noInertia&&(q.noInertia=Ie.noInertia),I.extend(ce,Re),I.extend(Te,Be);this._updateMapTransform(q,ce,Te),this._changes=[]}_updateMapTransform(q,ce,Te){const Ie=this._map,Re=Ie.transform,Be=zt=>[zt.x,zt.y,zt.z];if((zt=>{const Ot=this._eventsInProgress.drag;return Ot&&!this._handlersById[Ot.handlerName].isActive()})()&&!Hi(q)){const zt=Re.zoom;Re.cameraElevationReference="sea",Re.recenterOnTerrain(),Re.cameraElevationReference="ground",zt!==Re.zoom&&this._map._update(!0)}if(!Hi(q))return void this._fireEvents(ce,Te,!0);let{panDelta:Ue,zoomDelta:He,bearingDelta:Ye,pitchDelta:et,around:dt,aroundCoord:xt,pinchAround:Pt}=q;Pt!==void 0&&(dt=Pt),(zt=>ce.drag&&!this._eventsInProgress.drag)()&&dt&&(this._dragOrigin=Be(Re.pointCoordinate3D(dt)),this._trackingEllipsoid.setup(Re._camera.position,this._dragOrigin)),Re.cameraElevationReference="sea",Ie._stop(!0),dt=dt||Ie.transform.centerPoint,Ye&&(Re.bearing+=Ye),et&&(Re.pitch+=et),Re._updateCameraState();const kt=[0,0,0];if(Ue)if(Re.projection.name==="mercator"){const zt=this._trackingEllipsoid.projectRay(Re.screenPointToMercatorRay(dt).dir),Ot=this._trackingEllipsoid.projectRay(Re.screenPointToMercatorRay(dt.sub(Ue)).dir);kt[0]=Ot[0]-zt[0],kt[1]=Ot[1]-zt[1]}else{const zt=Re.pointCoordinate(dt);if(Re.projection.name==="globe"){Ue=Ue.rotate(-Re.angle);const Ot=Re._pixelsPerMercatorPixel/Re.worldSize;kt[0]=-Ue.x*I.mercatorScale(I.latFromMercatorY(zt.y))*Ot,kt[1]=-Ue.y*I.mercatorScale(Re.center.lat)*Ot}else{const Ot=Re.pointCoordinate(dt.sub(Ue));zt&&Ot&&(kt[0]=Ot.x-zt.x,kt[1]=Ot.y-zt.y)}}const Tt=Re.zoom,Ct=[0,0,0];if(He){const zt=Be(xt||Re.pointCoordinate3D(dt)),Ot={dir:I.normalize([],I.sub([],zt,Re._camera.position))};if(Ot.dir[2]<0){const Qt=Re.zoomDeltaToMovement(zt,He);I.scale$2(Ct,Ot.dir,Qt)}}const Et=I.add(kt,kt,Ct);Re._translateCameraConstrained(Et),He&&Math.abs(Re.zoom-Tt)>1e-4&&Re.recenterOnTerrain(),Re.cameraElevationReference="ground",this._map._update(),q.noInertia||this._inertia.record(q),this._fireEvents(ce,Te,!0)}_fireEvents(q,ce,Te){const Ie=ai(this._eventsInProgress),Re=ai(q),Be={};for(const et in q){const{originalEvent:dt}=q[et];this._eventsInProgress[et]||(Be[`${et}start`]=dt),this._eventsInProgress[et]=q[et]}!Ie&&Re&&this._fireEvent("movestart",Re.originalEvent);for(const et in Be)this._fireEvent(et,Be[et]);Re&&this._fireEvent("move",Re.originalEvent);for(const et in q){const{originalEvent:dt}=q[et];this._fireEvent(et,dt)}const Ue={};let He;for(const et in this._eventsInProgress){const{handlerName:dt,originalEvent:xt}=this._eventsInProgress[et];this._handlersById[dt].isActive()||(delete this._eventsInProgress[et],He=ce[dt]||xt,Ue[`${et}end`]=He)}for(const et in Ue)this._fireEvent(et,Ue[et]);const Ye=ai(this._eventsInProgress);if(Te&&(Ie||Re)&&!Ye){this._updatingCamera=!0;const et=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),dt=xt=>xt!==0&&-this._bearingSnap<xt&&xt<this._bearingSnap;et?(dt(et.bearing||this._map.getBearing())&&(et.bearing=0),this._map.easeTo(et,{originalEvent:He})):(this._map.fire(new I.Event("moveend",{originalEvent:He})),dt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(q,ce){this._map.fire(new I.Event(q,ce?{originalEvent:ce}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(q=>{this._frameId=void 0,this.handleEvent(new Fl("renderFrame",{timeStamp:q})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Rc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $c extends I.Evented{constructor(q,ce){super(),this._moving=!1,this._zooming=!1,this.transform=q,this._bearingSnap=ce.bearingSnap,I.bindAll(["_renderFrameCallback"],this)}getCenter(){return new I.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(q,ce){return this.jumpTo({center:q},ce)}panBy(q,ce,Te){return q=I.pointGeometry.convert(q).mult(-1),this.panTo(this.transform.center,I.extend({offset:q},ce),Te)}panTo(q,ce,Te){return this.easeTo(I.extend({center:q},ce),Te)}getZoom(){return this.transform.zoom}setZoom(q,ce){return this.jumpTo({zoom:q},ce),this}zoomTo(q,ce,Te){return this.easeTo(I.extend({zoom:q},ce),Te)}zoomIn(q,ce){return this.zoomTo(this.getZoom()+1,q,ce),this}zoomOut(q,ce){return this.zoomTo(this.getZoom()-1,q,ce),this}getBearing(){return this.transform.bearing}setBearing(q,ce){return this.jumpTo({bearing:q},ce),this}getPadding(){return this.transform.padding}setPadding(q,ce){return this.jumpTo({padding:q},ce),this}rotateTo(q,ce,Te){return this.easeTo(I.extend({bearing:q},ce),Te)}resetNorth(q,ce){return this.rotateTo(0,I.extend({duration:1e3},q),ce),this}resetNorthPitch(q,ce){return this.easeTo(I.extend({bearing:0,pitch:0,duration:1e3},q),ce),this}snapToNorth(q,ce){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,ce):this}getPitch(){return this.transform.pitch}setPitch(q,ce){return this.jumpTo({pitch:q},ce),this}cameraForBounds(q,ce){this.transform.projection.name==="globe"&&I.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),q=I.LngLatBounds.convert(q);const Te=ce&&ce.bearing||0;return this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),Te,ce)}_extendCameraOptions(q){const ce={top:0,bottom:0,right:0,left:0};if(typeof(q=I.extend({padding:ce,offset:[0,0],maxZoom:this.transform.maxZoom},q)).padding=="number"){const Te=q.padding;q.padding={top:Te,bottom:Te,right:Te,left:Te}}return q.padding=I.extend(ce,q.padding),q}_cameraForBoxAndBearing(q,ce,Te,Ie){const Re=this._extendCameraOptions(Ie),Be=this.transform,Ue=Be.padding,He=Be.project(I.LngLat.convert(q)),Ye=Be.project(I.LngLat.convert(ce)),et=new I.pointGeometry(He.x,Ye.y),dt=new I.pointGeometry(Ye.x,He.y),xt=-I.degToRad(Te),Pt=He.rotate(xt),kt=Ye.rotate(xt),Tt=et.rotate(xt),Ct=dt.rotate(xt),Et=new I.pointGeometry(Math.max(Pt.x,kt.x,Tt.x,Ct.x),Math.max(Pt.y,kt.y,Tt.y,Ct.y)),zt=new I.pointGeometry(Math.min(Pt.x,kt.x,Tt.x,Ct.x),Math.min(Pt.y,kt.y,Tt.y,Ct.y)),Ot=Et.sub(zt),Qt=(Be.width-((Ue.left||0)+(Ue.right||0)+Re.padding.left+Re.padding.right))/Ot.x,Kt=(Be.height-((Ue.top||0)+(Ue.bottom||0)+Re.padding.top+Re.padding.bottom))/Ot.y;if(Kt<0||Qt<0)return void I.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Gt=Math.min(Be.scaleZoom(Be.scale*Math.min(Qt,Kt)),Re.maxZoom),Xt=typeof Re.offset.x=="number"&&typeof Re.offset.y=="number"?new I.pointGeometry(Re.offset.x,Re.offset.y):I.pointGeometry.convert(Re.offset),Wt=new I.pointGeometry((Re.padding.left-Re.padding.right)/2,(Re.padding.top-Re.padding.bottom)/2).rotate(Te*Math.PI/180),sn=Xt.add(Wt).mult(Be.scale/Be.zoomScale(Gt));return{center:Be.unproject(He.add(Ye).div(2).sub(sn)),zoom:Gt,bearing:Te}}_cameraForBox(q,ce,Te,Ie,Re){const Be=this._extendCameraOptions(Re);Te=Te||0,Ie=Ie||0,q=I.LngLat.convert(q),ce=I.LngLat.convert(ce);const Ue=this.transform.clone();Ue.padding=Be.padding;const He=this.getFreeCameraOptions(),Ye=new I.LngLat(.5*(q.lng+ce.lng),.5*(q.lat+ce.lat)),et=.5*(Te+Ie);if(Ue._camera.position[2]<I.mercatorZfromAltitude(et,Ye.lat))return void I.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");He.lookAtPoint(Ye),Ue.setFreeCameraOptions(He);const dt=I.MercatorCoordinate.fromLngLat(q),xt=I.MercatorCoordinate.fromLngLat(ce),Pt=Ue.pointRayIntersection(Ue.centerPoint,et),kt=[(Tt=Ue.rayIntersectionCoordinate(Pt)).x,Tt.y,Tt.z];var Tt;const Ct=Ue.screenPointToMercatorRay(Ue.centerPoint),Et=Ue.projection.name!=="globe";let zt,Ot=0;do{const Qt=Math.floor(Ue.zoom),Kt=1<<Qt,Gt=Math.min(Kt*dt.x,Kt*xt.x),Xt=Math.min(Kt*dt.y,Kt*xt.y),Wt=Math.max(Kt*dt.x,Kt*xt.x),sn=Math.max(Kt*dt.y,Kt*xt.y),_n=new I.Aabb([Gt,Xt,Te],[Wt,sn,Ie]),qn=I.Frustum.fromInvProjectionMatrix(Ue.invProjMatrix,Ue.worldSize,Qt,Et);if(_n.intersects(qn)!==2){zt&&(Ue._camera.position=I.scaleAndAdd([],Ue._camera.position,Ct.dir,-zt),Ue._updateStateFromCamera());break}const dn=I.sub([],Ue._camera.position,kt);zt=.5*I.length(dn),Ue._camera.position=I.scaleAndAdd([],Ue._camera.position,Ct.dir,zt);try{Ue._updateStateFromCamera()}catch{return void I.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Ot<10);return{center:Ue.center,zoom:Ue.zoom,bearing:Ue.bearing,pitch:Ue.pitch}}fitBounds(q,ce,Te){return this.transform.projection.name==="globe"&&I.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(q,ce),ce,Te)}_raycastElevationBox(q,ce){const Te=this.transform.elevation;if(!Te)return;const Ie=new I.pointGeometry(q.x,ce.y),Re=new I.pointGeometry(ce.x,q.y),Be=Te.pointCoordinate(q);if(!Be)return;const Ue=Te.pointCoordinate(ce);if(!Ue)return;const He=Te.pointCoordinate(Ie);if(!He)return;const Ye=Te.pointCoordinate(Re);if(!Ye)return;const et=new I.MercatorCoordinate(Be[0],Be[1]).toLngLat(),dt=new I.MercatorCoordinate(Ue[0],Ue[1]).toLngLat(),xt=new I.MercatorCoordinate(He[0],He[1]).toLngLat(),Pt=new I.MercatorCoordinate(Ye[0],Ye[1]).toLngLat(),kt=Math.min(et.lng,Math.min(dt.lng,Math.min(xt.lng,Pt.lng))),Tt=Math.min(et.lat,Math.min(dt.lat,Math.min(xt.lat,Pt.lat))),Ct=Math.max(et.lng,Math.max(dt.lng,Math.max(xt.lng,Pt.lng))),Et=Math.max(et.lat,Math.max(dt.lat,Math.max(xt.lat,Pt.lat))),zt=Math.min(Be[3],Math.min(Ue[3],Math.min(He[3],Ye[3]))),Ot=Math.max(Be[3],Math.max(Ue[3],Math.max(He[3],Ye[3])));return{minLngLat:new I.LngLat(kt,Tt),maxLngLat:new I.LngLat(Ct,Et),minAltitude:zt,maxAltitude:Ot}}fitScreenCoordinates(q,ce,Te,Ie,Re){let Be,Ue,He,Ye;this.transform.projection.name==="globe"&&I.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const et=I.pointGeometry.convert(q),dt=I.pointGeometry.convert(ce),xt=this._raycastElevationBox(et,dt);if(xt)Be=xt.minLngLat,Ue=xt.maxLngLat,He=xt.minAltitude,Ye=xt.maxAltitude;else{if(this.transform.anyCornerOffEdge(et,dt))return this;Be=this.transform.pointLocation(et),Ue=this.transform.pointLocation(dt)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(I.pointGeometry.convert(q)),this.transform.pointLocation(I.pointGeometry.convert(ce)),Te,Ie):this._cameraForBox(Be,Ue,He,Ye,Ie),Ie,Re)}_fitInternal(q,ce,Te){return q?(delete(ce=I.extend(q,ce)).padding,ce.linear?this.easeTo(ce,Te):this.flyTo(ce,Te)):this}jumpTo(q,ce){this.stop();const Te=q.preloadOnly?this.transform.clone():this.transform;let Ie=!1,Re=!1,Be=!1;return"zoom"in q&&Te.zoom!==+q.zoom&&(Ie=!0,Te.zoom=+q.zoom),q.center!==void 0&&(Te.center=I.LngLat.convert(q.center)),"bearing"in q&&Te.bearing!==+q.bearing&&(Re=!0,Te.bearing=+q.bearing),"pitch"in q&&Te.pitch!==+q.pitch&&(Be=!0,Te.pitch=+q.pitch),q.padding==null||Te.isPaddingEqual(q.padding)||(Te.padding=q.padding),q.preloadOnly?(this._preloadTiles(Te),this):(this.fire(new I.Event("movestart",ce)).fire(new I.Event("move",ce)),Ie&&this.fire(new I.Event("zoomstart",ce)).fire(new I.Event("zoom",ce)).fire(new I.Event("zoomend",ce)),Re&&this.fire(new I.Event("rotatestart",ce)).fire(new I.Event("rotate",ce)).fire(new I.Event("rotateend",ce)),Be&&this.fire(new I.Event("pitchstart",ce)).fire(new I.Event("pitch",ce)).fire(new I.Event("pitchend",ce)),this.fire(new I.Event("moveend",ce)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||I.warnOnce(Rc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(q,ce){const Te=this.transform;if(!Te.projection.supportsFreeCamera)return I.warnOnce(Rc),this;this.stop();const Ie=Te.zoom,Re=Te.pitch,Be=Te.bearing;Te.setFreeCameraOptions(q);const Ue=Ie!==Te.zoom,He=Re!==Te.pitch,Ye=Be!==Te.bearing;return this.fire(new I.Event("movestart",ce)).fire(new I.Event("move",ce)),Ue&&this.fire(new I.Event("zoomstart",ce)).fire(new I.Event("zoom",ce)).fire(new I.Event("zoomend",ce)),Ye&&this.fire(new I.Event("rotatestart",ce)).fire(new I.Event("rotate",ce)).fire(new I.Event("rotateend",ce)),He&&this.fire(new I.Event("pitchstart",ce)).fire(new I.Event("pitch",ce)).fire(new I.Event("pitchend",ce)),this.fire(new I.Event("moveend",ce)),this}easeTo(q,ce){this._stop(!1,q.easeId),((q=I.extend({offset:[0,0],duration:500,easing:I.ease},q)).animate===!1||!q.essential&&I.exported.prefersReducedMotion)&&(q.duration=0);const Te=this.transform,Ie=this.getZoom(),Re=this.getBearing(),Be=this.getPitch(),Ue=this.getPadding(),He="zoom"in q?+q.zoom:Ie,Ye="bearing"in q?this._normalizeBearing(q.bearing,Re):Re,et="pitch"in q?+q.pitch:Be,dt="padding"in q?q.padding:Te.padding,xt=I.pointGeometry.convert(q.offset);let Pt,kt,Tt;if(Te.projection.name==="globe"){const sn=I.MercatorCoordinate.fromLngLat(Te.center),_n=xt.rotate(-Te.angle);sn.x+=_n.x/Te.worldSize,sn.y+=_n.y/Te.worldSize;const qn=sn.toLngLat(),dn=I.LngLat.convert(q.center||qn);this._normalizeCenter(dn),Pt=Te.centerPoint.add(_n),kt=new I.pointGeometry(sn.x,sn.y).mult(Te.worldSize),Tt=new I.pointGeometry(I.mercatorXfromLng(dn.lng),I.mercatorYfromLat(dn.lat)).mult(Te.worldSize).sub(kt)}else{Pt=Te.centerPoint.add(xt);const sn=Te.pointLocation(Pt),_n=I.LngLat.convert(q.center||sn);this._normalizeCenter(_n),kt=Te.project(sn),Tt=Te.project(_n).sub(kt)}const Ct=Te.zoomScale(He-Ie);let Et,zt;q.around&&(Et=I.LngLat.convert(q.around),zt=Te.locationPoint(Et));const Ot=this._zooming||He!==Ie,Qt=this._rotating||Re!==Ye,Kt=this._pitching||et!==Be,Gt=!Te.isPaddingEqual(dt),Xt=sn=>_n=>{if(Ot&&(sn.zoom=I.number(Ie,He,_n)),Qt&&(sn.bearing=I.number(Re,Ye,_n)),Kt&&(sn.pitch=I.number(Be,et,_n)),Gt&&(sn.interpolatePadding(Ue,dt,_n),Pt=sn.centerPoint.add(xt)),Et)sn.setLocationAtPoint(Et,zt);else{const qn=sn.zoomScale(sn.zoom-Ie),dn=He>Ie?Math.min(2,Ct):Math.max(.5,Ct),Rn=Math.pow(dn,1-_n),Fn=sn.unproject(kt.add(Tt.mult(_n*Rn)).mult(qn));sn.setLocationAtPoint(sn.renderWorldCopies?Fn.wrap():Fn,Pt)}return q.preloadOnly||this._fireMoveEvents(ce),sn};if(q.preloadOnly){const sn=this._emulate(Xt,q.duration,Te);return this._preloadTiles(sn),this}const Wt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ot,this._rotating=Qt,this._pitching=Kt,this._padding=Gt,this._easeId=q.easeId,this._prepareEase(ce,q.noMoveStart,Wt),this._ease(Xt(Te),sn=>{Te.recenterOnTerrain(),this._afterEase(ce,sn)},q),this}_prepareEase(q,ce,Te={}){this._moving=!0,this.transform.cameraElevationReference="sea",ce||Te.moving||this.fire(new I.Event("movestart",q)),this._zooming&&!Te.zooming&&this.fire(new I.Event("zoomstart",q)),this._rotating&&!Te.rotating&&this.fire(new I.Event("rotatestart",q)),this._pitching&&!Te.pitching&&this.fire(new I.Event("pitchstart",q))}_fireMoveEvents(q){this.fire(new I.Event("move",q)),this._zooming&&this.fire(new I.Event("zoom",q)),this._rotating&&this.fire(new I.Event("rotate",q)),this._pitching&&this.fire(new I.Event("pitch",q))}_afterEase(q,ce){if(this._easeId&&ce&&this._easeId===ce)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const Te=this._zooming,Ie=this._rotating,Re=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Te&&this.fire(new I.Event("zoomend",q)),Ie&&this.fire(new I.Event("rotateend",q)),Re&&this.fire(new I.Event("pitchend",q)),this.fire(new I.Event("moveend",q))}flyTo(q,ce){if(!q.essential&&I.exported.prefersReducedMotion){const ir=I.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ir,ce)}this.stop(),q=I.extend({offset:[0,0],speed:1.2,curve:1.42,easing:I.ease},q);const Te=this.transform,Ie=this.getZoom(),Re=this.getBearing(),Be=this.getPitch(),Ue=this.getPadding(),He="zoom"in q?I.clamp(+q.zoom,Te.minZoom,Te.maxZoom):Ie,Ye="bearing"in q?this._normalizeBearing(q.bearing,Re):Re,et="pitch"in q?+q.pitch:Be,dt="padding"in q?q.padding:Te.padding,xt=Te.zoomScale(He-Ie),Pt=I.pointGeometry.convert(q.offset);let kt=Te.centerPoint.add(Pt);const Tt=Te.pointLocation(kt),Ct=I.LngLat.convert(q.center||Tt);this._normalizeCenter(Ct);const Et=Te.project(Tt),zt=Te.project(Ct).sub(Et);let Ot=q.curve;const Qt=Math.max(Te.width,Te.height),Kt=Qt/xt,Gt=zt.mag();if("minZoom"in q){const ir=I.clamp(Math.min(q.minZoom,Ie,He),Te.minZoom,Te.maxZoom),er=Qt/Te.zoomScale(ir-Ie);Ot=Math.sqrt(er/Gt*2)}const Xt=Ot*Ot;function Wt(ir){const er=(Kt*Kt-Qt*Qt+(ir?-1:1)*Xt*Xt*Gt*Gt)/(2*(ir?Kt:Qt)*Xt*Gt);return Math.log(Math.sqrt(er*er+1)-er)}function sn(ir){return(Math.exp(ir)-Math.exp(-ir))/2}function _n(ir){return(Math.exp(ir)+Math.exp(-ir))/2}const qn=Wt(0);let dn=function(ir){return _n(qn)/_n(qn+Ot*ir)},Rn=function(ir){return Qt*((_n(qn)*(sn(er=qn+Ot*ir)/_n(er))-sn(qn))/Xt)/Gt;var er},Fn=(Wt(1)-qn)/Ot;if(Math.abs(Gt)<1e-6||!isFinite(Fn)){if(Math.abs(Qt-Kt)<1e-6)return this.easeTo(q,ce);const ir=Kt<Qt?-1:1;Fn=Math.abs(Math.log(Kt/Qt))/Ot,Rn=function(){return 0},dn=function(er){return Math.exp(ir*Ot*er)}}q.duration="duration"in q?+q.duration:1e3*Fn/("screenSpeed"in q?+q.screenSpeed/Ot:+q.speed),q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0);const Qn=Re!==Ye,kn=et!==Be,Wn=!Te.isPaddingEqual(dt),Dn=ir=>er=>{const dr=er*Fn,gr=1/dn(dr);ir.zoom=er===1?He:Ie+ir.scaleZoom(gr),Qn&&(ir.bearing=I.number(Re,Ye,er)),kn&&(ir.pitch=I.number(Be,et,er)),Wn&&(ir.interpolatePadding(Ue,dt,er),kt=ir.centerPoint.add(Pt));const Ar=er===1?Ct:ir.unproject(Et.add(zt.mult(Rn(dr))).mult(gr));return ir.setLocationAtPoint(ir.renderWorldCopies?Ar.wrap():Ar,kt),ir._updateCameraOnTerrain(),q.preloadOnly||this._fireMoveEvents(ce),ir};if(q.preloadOnly){const ir=this._emulate(Dn,q.duration,Te);return this._preloadTiles(ir),this}return this._zooming=!0,this._rotating=Qn,this._pitching=kn,this._padding=Wn,this._prepareEase(ce,!1),this._ease(Dn(Te),()=>this._afterEase(ce),q),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(q,ce){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const Te=this._onEaseEnd;this._onEaseEnd=void 0,Te.call(this,ce)}if(!q){const Te=this.handlers;Te&&Te.stop(!1)}return this}_ease(q,ce,Te){Te.animate===!1||Te.duration===0?(q(1),ce()):(this._easeStart=I.exported.now(),this._easeOptions=Te,this._onEaseFrame=q,this._onEaseEnd=ce,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const q=Math.min((I.exported.now()-this._easeStart)/this._easeOptions.duration,1),ce=this._onEaseFrame;ce&&ce(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(q,ce){q=I.wrap(q,-180,180);const Te=Math.abs(q-ce);return Math.abs(q-360-ce)<Te&&(q-=360),Math.abs(q+360-ce)<Te&&(q+=360),q}_normalizeCenter(q){const ce=this.transform;if(!ce.renderWorldCopies||ce.maxBounds)return;const Te=q.lng-ce.center.lng;q.lng+=Te>180?-360:Te<-180?360:0}_emulate(q,ce,Te){const Ie=Math.ceil(15*ce/1e3),Re=[],Be=q(Te.clone());for(let Ue=0;Ue<=Ie;Ue++){const He=Be(Ue/Ie);Re.push(He.clone())}return Re}}class _o{constructor(q={}){this.options=q,I.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(q){const ce=this.options&&this.options.compact;return this._map=q,this._container=xe("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=xe("button","mapboxgl-ctrl-attrib-button",this._container),xe("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=xe("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),ce&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ce===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(q,ce){const Te=this._map._getUIString(`AttributionControl.${ce}`);q.setAttribute("aria-label",Te),q.removeAttribute("title"),q.firstElementChild&&q.firstElementChild.setAttribute("title",Te)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let q=this._editLink;q||(q=this._editLink=this._container.querySelector(".mapbox-improve-map"));const ce=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||I.config.ACCESS_TOKEN}];if(q){const Te=ce.reduce((Ie,Re,Be)=>(Re.value&&(Ie+=`${Re.key}=${Re.value}${Be<ce.length-1?"&":""}`),Ie),"?");q.href=`${I.config.FEEDBACK_URL}/${Te}#${Rl(this._map,!0)}`,q.rel="noopener nofollow",this._setElementTitle(q,"MapFeedback")}}_updateData(q){!q||q.sourceDataType!=="metadata"&&q.sourceDataType!=="visibility"&&q.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let q=[];if(this._map.style.stylesheet){const Ie=this._map.style.stylesheet;this.styleOwner=Ie.owner,this.styleId=Ie.id}const ce=this._map.style._sourceCaches;for(const Ie in ce){const Re=ce[Ie];if(Re.used){const Be=Re.getSource();Be.attribution&&q.indexOf(Be.attribution)<0&&q.push(Be.attribution)}}q.sort((Ie,Re)=>Ie.length-Re.length),q=q.filter((Ie,Re)=>{for(let Be=Re+1;Be<q.length;Be++)if(q[Be].indexOf(Ie)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?q=[...this.options.customAttribution,...q]:q.unshift(this.options.customAttribution));const Te=q.join(" | ");Te!==this._attribHTML&&(this._attribHTML=Te,q.length?(this._innerContainer.innerHTML=Te,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ga{constructor(){I.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(q){this._map=q,this._container=xe("div","mapboxgl-ctrl");const ce=xe("a","mapboxgl-ctrl-logo");return ce.target="_blank",ce.rel="noopener nofollow",ce.href="https://www.mapbox.com/",ce.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ce.setAttribute("rel","noopener nofollow"),this._container.appendChild(ce),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(q){q&&q.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const q=this._map.style._sourceCaches;if(Object.entries(q).length===0)return!0;for(const ce in q){const Te=q[ce].getSource();if(Te.hasOwnProperty("mapbox_logo")&&!Te.mapbox_logo)return!1}return!0}_updateCompact(){const q=this._container.children;if(q.length){const ce=q[0];this._map.getCanvasContainer().offsetWidth<250?ce.classList.add("mapboxgl-compact"):ce.classList.remove("mapboxgl-compact")}}}class zc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(q){const ce=++this._id;return this._queue.push({callback:q,id:ce,cancelled:!1}),ce}remove(q){const ce=this._currentlyRunning,Te=ce?this._queue.concat(ce):this._queue;for(const Ie of Te)if(Ie.id===q)return void(Ie.cancelled=!0)}run(q=0){const ce=this._currentlyRunning=this._queue;this._queue=[];for(const Te of ce)if(!Te.cancelled&&(Te.callback(q),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ya(be,q,ce){if(be=new I.LngLat(be.lng,be.lat),q){const Te=new I.LngLat(be.lng-360,be.lat),Ie=new I.LngLat(be.lng+360,be.lat),Re=360*Math.ceil(Math.abs(be.lng-ce.center.lng)/360),Be=ce.locationPoint(be).distSqr(q),Ue=q.x<0||q.y<0||q.x>ce.width||q.y>ce.height;ce.locationPoint(Te).distSqr(q)<Be&&(Ue||Math.abs(Te.lng-ce.center.lng)<Re)?be=Te:ce.locationPoint(Ie).distSqr(q)<Be&&(Ue||Math.abs(Ie.lng-ce.center.lng)<Re)&&(be=Ie)}for(;Math.abs(be.lng-ce.center.lng)>180;){const Te=ce.locationPoint(be);if(Te.x>=0&&Te.y>=0&&Te.x<=ce.width&&Te.y<=ce.height)break;be.lng>ce.center.lng?be.lng-=360:be.lng+=360}return be}const tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Nl extends I.Evented{constructor(q,ce){if(super(),(q instanceof I.window.HTMLElement||ce)&&(q=I.extend({element:q},ce)),I.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=q&&q.anchor||"center",this._color=q&&q.color||"#3FB1CE",this._scale=q&&q.scale||1,this._draggable=q&&q.draggable||!1,this._clickTolerance=q&&q.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=q&&q.rotation||0,this._rotationAlignment=q&&q.rotationAlignment||"auto",this._pitchAlignment=q&&q.pitchAlignment&&q.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),q&&q.element)this._element=q.element,this._offset=I.pointGeometry.convert(q&&q.offset||[0,0]);else{this._defaultMarker=!0,this._element=xe("div");const Ie=41,Re=27,Be=we("svg",{display:"block",height:Ie*this._scale+"px",width:Re*this._scale+"px",viewBox:`0 0 ${Re} ${Ie}`},this._element),Ue=we("radialGradient",{id:"shadowGradient"},we("defs",{},Be));we("stop",{offset:"10%","stop-opacity":.4},Ue),we("stop",{offset:"100%","stop-opacity":.05},Ue),we("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Be),we("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Be),we("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Be),we("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Be),this._offset=I.pointGeometry.convert(q&&q.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Ie=>{Ie.preventDefault()}),this._element.addEventListener("mousedown",Ie=>{Ie.preventDefault()});const Te=this._element.classList;for(const Ie in tl)Te.remove(`mapboxgl-marker-anchor-${Ie}`);Te.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(q){return q===this._map||(this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._updateMoving),q.on("moveend",this._update),q.on("remove",this._clearFadeTimer),q._addMarker(this),this.setDraggable(this._draggable),this._update(),q.on("click",this._onMapClick)),this}remove(){const q=this._map;return q&&(q.off("click",this._onMapClick),q.off("move",this._updateMoving),q.off("moveend",this._update),q.off("mousedown",this._addDragHandler),q.off("touchstart",this._addDragHandler),q.off("mouseup",this._onUp),q.off("touchend",this._onUp),q.off("mousemove",this._onMove),q.off("touchmove",this._onMove),q.off("remove",this._clearFadeTimer),q._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(q){return this._lngLat=I.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){const Ie=Math.sqrt(Math.pow(13.5,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Ie,-1*(38.1-13.5+Ie)],"bottom-right":[-Ie,-1*(38.1-13.5+Ie)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=q,q._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(q){const ce=q.code,Te=q.charCode||q.keyCode;ce!=="Space"&&ce!=="Enter"&&Te!==32&&Te!==13||this.togglePopup()}_onMapClick(q){const ce=q.originalEvent.target,Te=this._element;this._popup&&(ce===Te||Te.contains(ce))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const q=this._popup;return q?(q.isOpen()?(q.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(q.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const q=this._map;if(!q)return!1;const ce=q.unproject(this._pos),Te=q.getFreeCameraOptions();if(!Te.position)return!1;const Ie=Te.position.toLngLat();return Ie.distanceTo(ce)<.9*Ie.distanceTo(this._lngLat)}_evaluateOpacity(){const q=this._map;if(!q)return;const ce=this._pos;if(!ce||ce.x<0||ce.x>q.transform.width||ce.y<0||ce.y>q.transform.height)return void this._clearFadeTimer();const Te=q.unproject(ce);let Ie;q._showingGlobe()&&I.isLngLatBehindGlobe(q.transform,this._lngLat)?Ie=0:(Ie=1-q._queryFogOpacity(Te),q.transform._terrainEnabled()&&q.getTerrain()&&this._behindTerrain()&&(Ie*=.2)),this._element.style.opacity=`${Ie}`,this._element.style.pointerEvents=Ie>0?"auto":"none",this._popup&&this._popup._setOpacity(Ie),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const q=this._pos;if(!q||!this._map)return;const ce=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${q.x}px,${q.y}px)
            ${tl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${ce.x}px,${ce.y}px)
        `}_calculateXYTransform(){const q=this._pos,ce=this._map,Te=this.getPitchAlignment();if(!ce||!q||Te!=="map")return"";if(!ce._showingGlobe()){const He=ce.getPitch();return He?`rotateX(${He}deg)`:""}const Ie=I.radToDeg(I.globeTiltAtLngLat(ce.transform,this._lngLat)),Re=q.sub(I.globeCenterToScreenPoint(ce.transform)),Be=Math.abs(Re.x)+Math.abs(Re.y);if(Be===0)return"";const Ue=Ie/Be;return`rotateX(${-Re.y*Ue}deg) rotateY(${Re.x*Ue}deg)`}_calculateZTransform(){const q=this._pos,ce=this._map;if(!ce||!q)return"";let Te=0;const Ie=this.getRotationAlignment();if(Ie==="map")if(ce._showingGlobe()){const Re=ce.project(new I.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Be=ce.project(new I.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(Re);Te=I.radToDeg(Math.atan2(Be.y,Be.x))-90}else Te=-ce.getBearing();else if(Ie==="horizon"){const Re=I.smoothstep(4,6,ce.getZoom()),Be=I.globeCenterToScreenPoint(ce.transform);Be.y+=Re*ce.transform.height;const Ue=q.sub(Be),He=I.radToDeg(Math.atan2(Ue.y,Ue.x));Te=(He>90?He-270:He+90)*(1-Re)}return Te+=this._rotation,Te?`rotateZ(${Te}deg)`:""}_update(q){I.window.cancelAnimationFrame(this._updateFrameId);const ce=this._map;ce&&(ce.transform.renderWorldCopies&&(this._lngLat=ya(this._lngLat,this._pos,ce.transform)),this._pos=ce.project(this._lngLat),q===!0?this._updateFrameId=I.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),ce._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(ce._showingGlobe()||ce.getTerrain()||ce.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(q){return this._offset=I.pointGeometry.convert(q),this._update(),this}_onMove(q){const ce=this._map;if(ce){if(!this._isDragging){const Te=this._clickTolerance||ce._clickTolerance;this._isDragging=q.point.dist(this._pointerdownPos)>=Te}this._isDragging&&(this._pos=q.point.sub(this._positionDelta),this._lngLat=ce.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new I.Event("dragstart"))),this.fire(new I.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const q=this._map;q&&(q.off("mousemove",this._onMove),q.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new I.Event("dragend")),this._state="inactive"}_addDragHandler(q){const ce=this._map;ce&&this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos),this._pointerdownPos=q.point,this._state="pending",ce.on("mousemove",this._onMove),ce.on("touchmove",this._onMove),ce.once("mouseup",this._onUp),ce.once("touchend",this._onUp))}setDraggable(q){this._draggable=!!q;const ce=this._map;return ce&&(q?(ce.on("mousedown",this._addDragHandler),ce.on("touchstart",this._addDragHandler)):(ce.off("mousedown",this._addDragHandler),ce.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(q){return this._rotation=q||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(q){return this._rotationAlignment=q||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(q){return this._pitchAlignment=q||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class ra{constructor(q){this.jumpTo(q)}getValue(q){if(q<=this._startTime)return this._start;if(q>=this._endTime)return this._end;const ce=I.easeCubicInOut((q-this._startTime)/(this._endTime-this._startTime));return this._start*(1-ce)+this._end*ce}isEasing(q){return q>=this._startTime&&q<=this._endTime}jumpTo(q){this._startTime=-1/0,this._endTime=-1/0,this._start=q,this._end=q}easeTo(q,ce,Te){this._start=this.getValue(ce),this._end=q,this._startTime=ce,this._endTime=ce+Te}}const Dc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},jl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function zo(be){be.parentNode&&be.parentNode.removeChild(be)}const Lc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ul{constructor(q,ce,Te=!1){this._clickTolerance=10,this.element=ce,this.mouseRotate=new ta({clickTolerance:q.dragRotate._mouseRotate._clickTolerance}),this.map=q,Te&&(this.mousePitch=new Gi({clickTolerance:q.dragRotate._mousePitch._clickTolerance})),I.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ce.addEventListener("mousedown",this.mousedown),ce.addEventListener("touchstart",this.touchstart,{passive:!1}),ce.addEventListener("touchmove",this.touchmove),ce.addEventListener("touchend",this.touchend),ce.addEventListener("touchcancel",this.reset)}down(q,ce){this.mouseRotate.mousedown(q,ce),this.mousePitch&&this.mousePitch.mousedown(q,ce),Fe()}move(q,ce){const Te=this.map,Ie=this.mouseRotate.mousemoveWindow(q,ce),Re=Ie&&Ie.bearingDelta;if(Re&&Te.setBearing(Te.getBearing()+Re),this.mousePitch){const Be=this.mousePitch.mousemoveWindow(q,ce),Ue=Be&&Be.pitchDelta;Ue&&Te.setPitch(Te.getPitch()+Ue)}}off(){const q=this.element;q.removeEventListener("mousedown",this.mousedown),q.removeEventListener("touchstart",this.touchstart,{passive:!1}),q.removeEventListener("touchmove",this.touchmove),q.removeEventListener("touchend",this.touchend),q.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ze(),I.window.removeEventListener("mousemove",this.mousemove),I.window.removeEventListener("mouseup",this.mouseup)}mousedown(q){this.down(I.extend({},q,{ctrlKey:!0,preventDefault:()=>q.preventDefault()}),qe(this.element,q)),I.window.addEventListener("mousemove",this.mousemove),I.window.addEventListener("mouseup",this.mouseup)}mousemove(q){this.move(q,qe(this.element,q))}mouseup(q){this.mouseRotate.mouseupWindow(q),this.mousePitch&&this.mousePitch.mouseupWindow(q),this.offTemp()}touchstart(q){q.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ne(this.element,q.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>q.preventDefault()},this._startPos))}touchmove(q){q.targetTouches.length!==1?this.reset():(this._lastPos=Ne(this.element,q.targetTouches)[0],this.move({preventDefault:()=>q.preventDefault()},this._lastPos))}touchend(q){q.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Hr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Bc={maxWidth:100,unit:"metric"};function Vl(be,q,ce){const Te=nl(q),Ie=Te/q,Re={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[ce];this._map._requestDomTask(()=>{this._container.style.width=be*Ie+"px",this._container.innerHTML=`${Te}&nbsp;${Re}`})}function nl(be){const q=Math.pow(10,`${Math.floor(be)}`.length-1);let ce=be/q;return ce=ce>=10?10:ce>=5?5:ce>=3?3:ce>=2?2:ce>=1?1:function(Te){const Ie=Math.pow(10,Math.ceil(-Math.log(Te)/Math.LN10));return Math.round(Te*Ie)/Ie}(ce),q*ce}const Fc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rl(be=new I.pointGeometry(0,0),q="bottom"){if(typeof be=="number"){const ce=Math.round(Math.sqrt(.5*Math.pow(be,2)));switch(q){case"top":return new I.pointGeometry(0,be);case"top-left":return new I.pointGeometry(ce,ce);case"top-right":return new I.pointGeometry(-ce,ce);case"bottom":return new I.pointGeometry(0,-be);case"bottom-left":return new I.pointGeometry(ce,-ce);case"bottom-right":return new I.pointGeometry(-ce,-ce);case"left":return new I.pointGeometry(be,0);case"right":return new I.pointGeometry(-be,0)}return new I.pointGeometry(0,0)}return be instanceof I.pointGeometry||Array.isArray(be)?I.pointGeometry.convert(be):I.pointGeometry.convert(be[q]||[0,0])}const us={version:I.version,supported:ne,setRTLTextPlugin:I.setRTLTextPlugin,getRTLTextPluginStatus:I.getRTLTextPluginStatus,Map:class extends $c{constructor(be){if((be=I.extend({},jl,be)).minZoom!=null&&be.maxZoom!=null&&be.minZoom>be.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(be.minPitch!=null&&be.maxPitch!=null&&be.minPitch>be.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(be.minPitch!=null&&be.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(be.maxPitch!=null&&be.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(be.antialias&&I.isSafariWithAntialiasingBug(I.window)&&(be.antialias=!1,I.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zs(be.minZoom,be.maxZoom,be.minPitch,be.maxPitch,be.renderWorldCopies),be),this._interactive=be.interactive,this._minTileCacheSize=be.minTileCacheSize,this._maxTileCacheSize=be.maxTileCacheSize,this._failIfMajorPerformanceCaveat=be.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=be.preserveDrawingBuffer,this._antialias=be.antialias,this._trackResize=be.trackResize,this._bearingSnap=be.bearingSnap,this._refreshExpiredTiles=be.refreshExpiredTiles,this._fadeDuration=be.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=be.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=be.collectResourceTiming,this._optimizeForTerrain=be.optimizeForTerrain,this._language=be.language==="auto"?I.window.navigator.language:be.language,this._worldview=be.worldview,this._renderTaskQueue=new zc,this._domRenderTaskQueue=new zc,this._controls=[],this._markers=[],this._mapId=I.uniqueId(),this._locale=I.extend({},Dc,be.locale),this._clickTolerance=be.clickTolerance,this._cooperativeGestures=be.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ra(0),this._useExplicitProjection=!1,this._requestManager=new I.RequestManager(be.transformRequest,be.accessToken,be.testMode),this._silenceAuthErrors=!!be.testMode,typeof be.container=="string"){if(this._container=I.window.document.getElementById(be.container),!this._container)throw new Error(`Container '${be.container}' not found.`)}else{if(!(be.container instanceof I.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=be.container}if(this._container.childNodes.length>0&&I.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),be.maxBounds&&this.setMaxBounds(be.maxBounds),I.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),I.window!==void 0&&(I.window.addEventListener("online",this._onWindowOnline,!1),I.window.addEventListener("resize",this._onWindowResize,!1),I.window.addEventListener("orientationchange",this._onWindowResize,!1),I.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Oc(this,be),this._localFontFamily=be.localFontFamily,this._localIdeographFontFamily=be.localIdeographFontFamily,be.style&&this.setStyle(be.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),be.projection&&this.setProjection(be.projection),this._hash=be.hash&&new mu(typeof be.hash=="string"&&be.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:be.center,zoom:be.zoom,bearing:be.bearing,pitch:be.pitch}),be.bounds&&(this.resize(),this.fitBounds(be.bounds,I.extend({},be.fitBoundsOptions,{duration:0})))),this.resize(),be.attributionControl&&this.addControl(new _o({customAttribution:be.customAttribution})),this._logoControl=new ga,this.addControl(this._logoControl,be.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",q=>{this._update(q.dataType==="style"),this.fire(new I.Event(`${q.dataType}data`,q))}),this.on("dataloading",q=>{this.fire(new I.Event(`${q.dataType}dataloading`,q))})}_getMapId(){return this._mapId}addControl(be,q){if(q===void 0&&(q=be.getDefaultPosition?be.getDefaultPosition():"top-right"),!be||!be.onAdd)return this.fire(new I.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const ce=be.onAdd(this);this._controls.push(be);const Te=this._controlPositions[q];return q.indexOf("bottom")!==-1?Te.insertBefore(ce,Te.firstChild):Te.appendChild(ce),this}removeControl(be){if(!be||!be.onRemove)return this.fire(new I.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const q=this._controls.indexOf(be);return q>-1&&this._controls.splice(q,1),be.onRemove(this),this}hasControl(be){return this._controls.indexOf(be)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(be){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const q=!this._moving;return q&&this.fire(new I.Event("movestart",be)).fire(new I.Event("move",be)),this.fire(new I.Event("resize",be)),q&&this.fire(new I.Event("moveend",be)),this}getBounds(){return this.transform.projection.name==="globe"&&I.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(be){return this.transform.setMaxBounds(I.LngLatBounds.convert(be)),this._update()}setMinZoom(be){if((be=be==null?-2:be)>=-2&&be<=this.transform.maxZoom)return this.transform.minZoom=be,this._update(),this.getZoom()<be?this.setZoom(be):this.fire(new I.Event("zoomstart")).fire(new I.Event("zoom")).fire(new I.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(be){if((be=be==null?22:be)>=this.transform.minZoom)return this.transform.maxZoom=be,this._update(),this.getZoom()>be?this.setZoom(be):this.fire(new I.Event("zoomstart")).fire(new I.Event("zoom")).fire(new I.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(be){if((be=be==null?0:be)<0)throw new Error("minPitch must be greater than or equal to 0");if(be>=0&&be<=this.transform.maxPitch)return this.transform.minPitch=be,this._update(),this.getPitch()<be?this.setPitch(be):this.fire(new I.Event("pitchstart")).fire(new I.Event("pitch")).fire(new I.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(be){if((be=be==null?85:be)>85)throw new Error("maxPitch must be less than or equal to 85");if(be>=this.transform.minPitch)return this.transform.maxPitch=be,this._update(),this.getPitch()>be?this.setPitch(be):this.fire(new I.Event("pitchstart")).fire(new I.Event("pitch")).fire(new I.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(be){return this.transform.renderWorldCopies=be,this._update()}getLanguage(){return this._language}setLanguage(be){if(this._language=be==="auto"?I.window.navigator.language:be,this.style)for(const q in this.style._sourceCaches){const ce=this.style._sourceCaches[q]._source;ce._setLanguage&&ce._setLanguage(this._language)}for(const q of this._controls)q._setLanguage&&q._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(be){if(this._worldview=be,this.style)for(const q in this.style._sourceCaches){const ce=this.style._sourceCaches[q]._source;ce._setWorldview&&ce._setWorldview(be)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(be){return this._lazyInitEmptyStyle(),be?typeof be=="string"&&(be={name:be}):be=null,this._useExplicitProjection=!!be,this._prioritizeAndUpdateProjection(be,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const be=this.transform,q=be.projection.name;let ce;q==="globe"&&be.zoom>=I.GLOBE_ZOOM_THRESHOLD_MAX?(be.setMercatorFromTransition(),ce=!0):q==="mercator"&&be.zoom<I.GLOBE_ZOOM_THRESHOLD_MAX&&(be.setProjection({name:"globe"}),ce=!0),ce&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(be,q){return this._updateProjection(be||q||{name:"mercator"})}_updateProjection(be){let q;if(q=be.name==="globe"&&this.transform.zoom>=I.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(be),this.style.applyProjectionUpdate(),q){this.painter.clearBackgroundTiles();for(const ce in this.style._sourceCaches)this.style._sourceCaches[ce].clearTiles();this._update(!0)}return this}project(be){return this.transform.locationPoint3D(I.LngLat.convert(be))}unproject(be){return this.transform.pointLocation3D(I.pointGeometry.convert(be))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(be,q,ce){if(be==="mouseenter"||be==="mouseover"){let Te=!1;const Ie=Be=>{const Ue=q.filter(Ye=>this.getLayer(Ye)),He=Ue.length?this.queryRenderedFeatures(Be.point,{layers:Ue}):[];He.length?Te||(Te=!0,ce.call(this,new Xi(be,this,Be.originalEvent,{features:He}))):Te=!1},Re=()=>{Te=!1};return{layers:new Set(q),listener:ce,delegates:{mousemove:Ie,mouseout:Re}}}if(be==="mouseleave"||be==="mouseout"){let Te=!1;const Ie=Be=>{const Ue=q.filter(He=>this.getLayer(He));(Ue.length?this.queryRenderedFeatures(Be.point,{layers:Ue}):[]).length?Te=!0:Te&&(Te=!1,ce.call(this,new Xi(be,this,Be.originalEvent)))},Re=Be=>{Te&&(Te=!1,ce.call(this,new Xi(be,this,Be.originalEvent)))};return{layers:new Set(q),listener:ce,delegates:{mousemove:Ie,mouseout:Re}}}{const Te=Ie=>{const Re=q.filter(Ue=>this.getLayer(Ue)),Be=Re.length?this.queryRenderedFeatures(Ie.point,{layers:Re}):[];Be.length&&(Ie.features=Be,ce.call(this,Ie),delete Ie.features)};return{layers:new Set(q),listener:ce,delegates:{[be]:Te}}}}on(be,q,ce){if(ce===void 0)return super.on(be,q);Array.isArray(q)||(q=[q]);const Te=this._createDelegatedListener(be,q,ce);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[be]=this._delegatedListeners[be]||[],this._delegatedListeners[be].push(Te);for(const Ie in Te.delegates)this.on(Ie,Te.delegates[Ie]);return this}once(be,q,ce){if(ce===void 0)return super.once(be,q);Array.isArray(q)||(q=[q]);const Te=this._createDelegatedListener(be,q,ce);for(const Ie in Te.delegates)this.once(Ie,Te.delegates[Ie]);return this}off(be,q,ce){if(ce===void 0)return super.off(be,q);q=new Set(Array.isArray(q)?q:[q]);const Te=(Re,Be)=>{if(Re.size!==Be.size)return!1;for(const Ue of Re)if(!Be.has(Ue))return!1;return!0},Ie=this._delegatedListeners?this._delegatedListeners[be]:void 0;return Ie&&(Re=>{for(let Be=0;Be<Re.length;Be++){const Ue=Re[Be];if(Ue.listener===ce&&Te(Ue.layers,q)){for(const He in Ue.delegates)this.off(He,Ue.delegates[He]);return Re.splice(Be,1),this}}})(Ie),this}queryRenderedFeatures(be,q){return this.style?(q!==void 0||be===void 0||be instanceof I.pointGeometry||Array.isArray(be)||(q=be,be=void 0),this.style.queryRenderedFeatures(be=be||[[0,0],[this.transform.width,this.transform.height]],q=q||{},this.transform)):[]}querySourceFeatures(be,q){return this.style.querySourceFeatures(be,q)}queryTerrainElevation(be,q){const ce=this.transform.elevation;return ce?(q=I.extend({},{exaggerated:!0},q),ce.getAtPoint(I.MercatorCoordinate.fromLngLat(be),null,q.exaggerated)):null}setStyle(be,q){return(q=I.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},q)).diff!==!1&&q.localIdeographFontFamily===this._localIdeographFontFamily&&q.localFontFamily===this._localFontFamily&&this.style&&be?(this._diffStyle(be,q),this):(this._localIdeographFontFamily=q.localIdeographFontFamily,this._localFontFamily=q.localFontFamily,this._updateStyle(be,q))}_getUIString(be){const q=this._locale[be];if(q==null)throw new Error(`Missing UI string '${be}'`);return q}_updateStyle(be,q){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),be&&(this.style=new vo(this,q||{}),this.style.setEventedParent(this,{style:this.style}),typeof be=="string"?this.style.loadURL(be):this.style.loadJSON(be)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new vo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(be,q){if(typeof be=="string"){const ce=this._requestManager.normalizeStyleURL(be),Te=this._requestManager.transformRequest(ce,I.ResourceType.Style);I.getJSON(Te,(Ie,Re)=>{Ie?this.fire(new I.ErrorEvent(Ie)):Re&&this._updateDiff(Re,q)})}else typeof be=="object"&&this._updateDiff(be,q)}_updateDiff(be,q){try{this.style.setState(be)&&this._update(!0)}catch(ce){I.warnOnce(`Unable to perform style diff: ${ce.message||ce.error||ce}.  Rebuilding the style from scratch.`),this._updateStyle(be,q)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(I.warnOnce("There is no style added to the map."),!1)}addSource(be,q){return this._lazyInitEmptyStyle(),this.style.addSource(be,q),this._update(!0)}isSourceLoaded(be){return!!this.style&&this.style._isSourceCacheLoaded(be)}areTilesLoaded(){const be=this.style&&this.style._sourceCaches;for(const q in be){const ce=be[q]._tiles;for(const Te in ce){const Ie=ce[Te];if(Ie.state!=="loaded"&&Ie.state!=="errored")return!1}}return!0}addSourceType(be,q,ce){this._lazyInitEmptyStyle(),this.style.addSourceType(be,q,ce)}removeSource(be){return this.style.removeSource(be),this._updateTerrain(),this._update(!0)}getSource(be){return this.style.getSource(be)}addImage(be,q,{pixelRatio:ce=1,sdf:Te=!1,stretchX:Ie,stretchY:Re,content:Be}={}){if(this._lazyInitEmptyStyle(),q instanceof I.window.HTMLImageElement||I.window.ImageBitmap&&q instanceof I.window.ImageBitmap){const{width:Ue,height:He,data:Ye}=I.exported.getImageData(q);this.style.addImage(be,{data:new I.RGBAImage({width:Ue,height:He},Ye),pixelRatio:ce,stretchX:Ie,stretchY:Re,content:Be,sdf:Te,version:0})}else if(q.width===void 0||q.height===void 0)this.fire(new I.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Ue,height:He}=q,Ye=q;this.style.addImage(be,{data:new I.RGBAImage({width:Ue,height:He},new Uint8Array(Ye.data)),pixelRatio:ce,stretchX:Ie,stretchY:Re,content:Be,sdf:Te,version:0,userImage:Ye}),Ye.onAdd&&Ye.onAdd(this,be)}}updateImage(be,q){const ce=this.style.getImage(be);if(!ce)return void this.fire(new I.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const Te=q instanceof I.window.HTMLImageElement||I.window.ImageBitmap&&q instanceof I.window.ImageBitmap?I.exported.getImageData(q):q,{width:Ie,height:Re}=Te;Ie!==void 0&&Re!==void 0?Ie===ce.data.width&&Re===ce.data.height?(ce.data.replace(Te.data,!(q instanceof I.window.HTMLImageElement||I.window.ImageBitmap&&q instanceof I.window.ImageBitmap)),this.style.updateImage(be,ce)):this.fire(new I.ErrorEvent(new Error(`The width and height of the updated image (${Ie}, ${Re})
                must be that same as the previous version of the image
                (${ce.data.width}, ${ce.data.height})`))):this.fire(new I.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(be){return be?!!this.style.getImage(be):(this.fire(new I.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(be){this.style.removeImage(be)}loadImage(be,q){I.getImage(this._requestManager.transformRequest(be,I.ResourceType.Image),(ce,Te)=>{q(ce,Te instanceof I.window.HTMLImageElement?I.exported.getImageData(Te):Te)})}listImages(){return this.style.listImages()}addLayer(be,q){return this._lazyInitEmptyStyle(),this.style.addLayer(be,q),this._update(!0)}moveLayer(be,q){return this.style.moveLayer(be,q),this._update(!0)}removeLayer(be){return this.style.removeLayer(be),this._update(!0)}getLayer(be){return this.style.getLayer(be)}setLayerZoomRange(be,q,ce){return this.style.setLayerZoomRange(be,q,ce),this._update(!0)}setFilter(be,q,ce={}){return this.style.setFilter(be,q,ce),this._update(!0)}getFilter(be){return this.style.getFilter(be)}setPaintProperty(be,q,ce,Te={}){return this.style.setPaintProperty(be,q,ce,Te),this._update(!0)}getPaintProperty(be,q){return this.style.getPaintProperty(be,q)}setLayoutProperty(be,q,ce,Te={}){return this.style.setLayoutProperty(be,q,ce,Te),this._update(!0)}getLayoutProperty(be,q){return this.style.getLayoutProperty(be,q)}setLight(be,q={}){return this._lazyInitEmptyStyle(),this.style.setLight(be,q),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(be){return this._lazyInitEmptyStyle(),!be&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(be),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(be){return this._lazyInitEmptyStyle(),this.style.setFog(be),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(be){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(I.LngLat.convert(be),this.transform):0}setFeatureState(be,q){return this.style.setFeatureState(be,q),this._update()}removeFeatureState(be,q){return this.style.removeFeatureState(be,q),this._update()}getFeatureState(be){return this.style.getFeatureState(be)}_updateContainerDimensions(){if(!this._container)return;const be=this._container.getBoundingClientRect().width||400,q=this._container.getBoundingClientRect().height||300;let ce,Te,Ie,Re=this._container;for(;Re&&(!Te||!Ie);){const Be=I.window.getComputedStyle(Re).transform;Be&&Be!=="none"&&(ce=Be.match(/matrix.*\((.+)\)/)[1].split(", "),ce[0]&&ce[0]!=="0"&&ce[0]!=="1"&&(Te=ce[0]),ce[3]&&ce[3]!=="0"&&ce[3]!=="1"&&(Ie=ce[3])),Re=Re.parentElement}this._containerWidth=Te?Math.abs(be/Te):be,this._containerHeight=Ie?Math.abs(q/Ie):q}_detectMissingCSS(){I.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&I.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const be=this._container;be.classList.add("mapboxgl-map"),(this._missingCSSCanary=xe("div","mapboxgl-canary",be)).style.visibility="hidden",this._detectMissingCSS();const q=this._canvasContainer=xe("div","mapboxgl-canvas-container",be);this._interactive&&q.classList.add("mapboxgl-interactive"),this._canvas=xe("canvas","mapboxgl-canvas",q),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const ce=this._controlContainer=xe("div","mapboxgl-control-container",be),Te=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Ie=>{Te[Ie]=xe("div",`mapboxgl-ctrl-${Ie}`,ce)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(be,q){const ce=I.exported.devicePixelRatio||1;this._canvas.width=ce*Math.ceil(be),this._canvas.height=ce*Math.ceil(q),this._canvas.style.width=`${be}px`,this._canvas.style.height=`${q}px`}_addMarker(be){this._markers.push(be)}_removeMarker(be){const q=this._markers.indexOf(be);q!==-1&&this._markers.splice(q,1)}_setupPainter(){const be=I.extend({},ne.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),q=this._canvas.getContext("webgl",be)||this._canvas.getContext("experimental-webgl",be);q?(I.storeAuthState(q,!0),this.painter=new Ac(q,this.transform),this.on("data",ce=>{ce.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),I.exported$1.testSupport(q)):this.fire(new I.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(be){be.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new I.Event("webglcontextlost",{originalEvent:be}))}_contextRestored(be){this._setupPainter(),this.resize(),this._update(),this.fire(new I.Event("webglcontextrestored",{originalEvent:be}))}_onMapScroll(be){if(be.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(be){return this.style?(this._styleDirty=this._styleDirty||be,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(be){return this._update(),this._renderTaskQueue.add(be)}_cancelRenderFrame(be){this._renderTaskQueue.remove(be)}_requestDomTask(be){!this.loaded()||this.loaded()&&!this.isMoving()?be():this._domRenderTaskQueue.add(be)}_render(be){let q;const ce=this.painter.context.extTimerQuery,Te=I.exported.now();if(this.listens("gpu-timing-frame")&&(q=ce.createQueryEXT(),ce.beginQueryEXT(ce.TIME_ELAPSED_EXT,q)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(be),this._domRenderTaskQueue.run(be),this._removed)return;this._updateProjectionTransition();let Ie=!1;const Re=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const He=this.transform.zoom,Ye=this.transform.pitch,et=I.exported.now();this.style.zoomHistory.update(He,et);const dt=new I.EvaluationParameters(He,{now:et,fadeDuration:Re,pitch:Ye,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),xt=dt.crossFadingFactor();xt===1&&xt===this._crossFadingFactor||(Ie=!0,this._crossFadingFactor=xt),this.style.update(dt)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Be=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Be=this._updateAverageElevation(Te),this.style._updateSources(this.transform),this._forceMarkerUpdate()):Be=this._updateAverageElevation(Te),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Re,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Re,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new I.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new I.Event("load"))),this.style&&(this.style.hasTransitions()||Ie)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),q){const He=I.exported.now()-Te;ce.endQueryEXT(ce.TIME_ELAPSED_EXT,q),setTimeout(()=>{const Ye=ce.getQueryObjectEXT(q,ce.QUERY_RESULT_EXT)/1e6;ce.deleteQueryEXT(q),this.fire(new I.Event("gpu-timing-frame",{cpuTime:He,gpuTime:Ye})),I.window.performance.mark("frame-gpu",{startTime:Te,detail:{gpuTime:Ye}})},50)}if(this.listens("gpu-timing-layer")){const He=this.painter.collectGpuTimers();setTimeout(()=>{const Ye=this.painter.queryGpuTimers(He);this.fire(new I.Event("gpu-timing-layer",{layerTimes:Ye}))},50)}if(this.listens("gpu-timing-deferred-render")){const He=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Ye=this.painter.queryGpuTimeDeferredRender(He);this.fire(new I.Event("gpu-timing-deferred-render",{gpuTime:Ye}))},50)}const Ue=this._sourcesDirty||this._styleDirty||this._placementDirty||Be;if(Ue||this._repaint)this.triggerRepaint();else{const He=!this.isMoving()&&this.loaded();if(He&&(Be=this._updateAverageElevation(Te,!0)),Be)this.triggerRepaint();else if(this._triggerFrame(!1),He&&(this.fire(new I.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Ye=this._calculateSpeedIndex();this.fire(new I.Event("speedindexcompleted",{speedIndex:Ye})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Ue||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const be of this._markers)be._update()}_updateAverageElevation(be,q=!1){const ce=Te=>(this.transform.averageElevation=Te,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&ce(0);if((q||be-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(be)){const Te=this.transform.averageElevation;let Ie=this.transform.sampleAverageElevation(),Re=!1;this.transform.elevation&&(Re=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Ie)?Ie=0:this._averageElevationLastSampledAt=be;const Be=Math.abs(Te-Ie);if(Be>1){if(this._isInitialLoad||Re)return this._averageElevation.jumpTo(Ie),ce(Ie);this._averageElevation.easeTo(Ie,be,300)}else if(Be>1e-4)return this._averageElevation.jumpTo(Ie),ce(Ie)}return!!this._averageElevation.isEasing(be)&&ce(this._averageElevation.getValue(be))}_authenticate(){I.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,be=>{if(be&&(be.message===I.AUTH_ERR_MSG||be.status===401)){const q=this.painter.context.gl;I.storeAuthState(q,!1),this._logoControl instanceof ga&&this._logoControl._updateLogo(),q&&q.clear(q.DEPTH_BUFFER_BIT|q.COLOR_BUFFER_BIT|q.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new I.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),I.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const be=this.painter.canvasCopy(),q=this.painter.getCanvasCopiesAndTimestamps();q.timeStamps.push(performance.now());const ce=this.painter.context.gl,Te=ce.createFramebuffer();function Ie(Re){ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Re,0);const Be=new Uint8Array(ce.drawingBufferWidth*ce.drawingBufferHeight*4);return ce.readPixels(0,0,ce.drawingBufferWidth,ce.drawingBufferHeight,ce.RGBA,ce.UNSIGNED_BYTE,Be),Be}return ce.bindFramebuffer(ce.FRAMEBUFFER,Te),this._canvasPixelComparison(Ie(be),q.canvasCopies.map(Ie),q.timeStamps)}_canvasPixelComparison(be,q,ce){let Te=ce[1]-ce[0];const Ie=be.length/4;for(let Re=0;Re<q.length;Re++){const Be=q[Re];let Ue=0;for(let He=0;He<Be.length;He+=4)Be[He]===be[He]&&Be[He+1]===be[He+1]&&Be[He+2]===be[He+2]&&Be[He+3]===be[He+3]&&(Ue+=1);Te+=(ce[Re+2]-ce[Re+1])*(1-Ue/Ie)}return Te}remove(){this._hash&&this._hash.remove();for(const q of this._controls)q.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),I.window!==void 0&&(I.window.removeEventListener("resize",this._onWindowResize,!1),I.window.removeEventListener("orientationchange",this._onWindowResize,!1),I.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),I.window.removeEventListener("online",this._onWindowOnline,!1));const be=this.painter.context.gl.getExtension("WEBGL_lose_context");be&&be.loseContext(),zo(this._canvasContainer),zo(this._controlContainer),zo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),I.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new I.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(be){this._renderNextFrame=this._renderNextFrame||be,this.style&&!this._frame&&(this._frame=I.exported.frame(q=>{const ce=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,ce&&this._render(q)}))}_preloadTiles(be){const q=this.style?Object.values(this.style._sourceCaches):[];return I.asyncAll(q,(ce,Te)=>ce._preloadTiles(be,Te),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(be){this._trackResize&&this.resize({originalEvent:be})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(be){this._showTileBoundaries!==be&&(this._showTileBoundaries=be,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(be){this._showTerrainWireframe!==be&&(this._showTerrainWireframe=be,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(be){this._speedIndexTiming!==be&&(this._speedIndexTiming=be,this._update())}get showPadding(){return!!this._showPadding}set showPadding(be){this._showPadding!==be&&(this._showPadding=be,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(be){this._showCollisionBoxes!==be&&(this._showCollisionBoxes=be,be?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(be){this._showOverdrawInspector!==be&&(this._showOverdrawInspector=be,this._update())}get repaint(){return!!this._repaint}set repaint(be){this._repaint!==be&&(this._repaint=be,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(be){this._vertices=be,this._update()}_setCacheLimits(be,q){I.setCacheLimits(be,q)}get version(){return I.version}},NavigationControl:class{constructor(be){this.options=I.extend({},Lc,be),this._container=xe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",q=>q.preventDefault()),this.options.showZoom&&(I.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",q=>{this._map&&this._map.zoomIn({},{originalEvent:q})}),xe("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",q=>{this._map&&this._map.zoomOut({},{originalEvent:q})}),xe("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(I.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",q=>{const ce=this._map;ce&&(this.options.visualizePitch?ce.resetNorthPitch({},{originalEvent:q}):ce.resetNorth({},{originalEvent:q}))}),this._compassIcon=xe("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const be=this._map;if(!be)return;const q=be.getZoom(),ce=q===be.getMaxZoom(),Te=q===be.getMinZoom();this._zoomInButton.disabled=ce,this._zoomOutButton.disabled=Te,this._zoomInButton.setAttribute("aria-disabled",ce.toString()),this._zoomOutButton.setAttribute("aria-disabled",Te.toString())}_rotateCompassArrow(){const be=this._map;if(!be)return;const q=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(be.transform.pitch*(Math.PI/180)),.5)}) rotateX(${be.transform.pitch}deg) rotateZ(${be.transform.angle*(180/Math.PI)}deg)`:`rotate(${be.transform.angle*(180/Math.PI)}deg)`;be._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=q)})}onAdd(be){return this._map=be,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),be.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&be.on("pitch",this._rotateCompassArrow),be.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ul(be,this._compass,this.options.visualizePitch)),this._container}onRemove(){const be=this._map;be&&(this._container.remove(),this.options.showZoom&&be.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&be.off("pitch",this._rotateCompassArrow),be.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(be,q){const ce=xe("button",be,this._container);return ce.type="button",ce.addEventListener("click",q),ce}_setButtonTitle(be,q){if(!this._map)return;const ce=this._map._getUIString(`NavigationControl.${q}`);be.setAttribute("aria-label",ce),be.firstElementChild&&be.firstElementChild.setAttribute("title",ce)}},GeolocateControl:class extends I.Evented{constructor(be){super(),this.options=I.extend({geolocation:I.window.navigator.geolocation},Hr,be),I.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Xs(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(be){return this._map=be,this._container=xe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(be){this._supportsGeolocation!==void 0?be(this._supportsGeolocation):I.window.navigator.permissions!==void 0?I.window.navigator.permissions.query({name:"geolocation"}).then(q=>{this._supportsGeolocation=q.state!=="denied",be(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,be(this._supportsGeolocation))}_isOutOfMapMaxBounds(be){const q=this._map.getMaxBounds(),ce=be.coords;return!!q&&(ce.longitude<q.getWest()||ce.longitude>q.getEast()||ce.latitude<q.getSouth()||ce.latitude>q.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(be){if(this._map){if(this._isOutOfMapMaxBounds(be))return this._setErrorState(),this.fire(new I.Event("outofmaxbounds",be)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=be,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(be),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(be),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new I.Event("geolocate",be)),this._finish()}}_updateCamera(be){const q=new I.LngLat(be.coords.longitude,be.coords.latitude),ce=be.coords.accuracy,Te=this._map.getBearing(),Ie=I.extend({bearing:Te},this.options.fitBoundsOptions);this._map.fitBounds(q.toBounds(ce),Ie,{geolocateSource:!0})}_updateMarker(be){if(be){const q=new I.LngLat(be.coords.longitude,be.coords.latitude);this._accuracyCircleMarker.setLngLat(q).addTo(this._map),this._userLocationDotMarker.setLngLat(q).addTo(this._map),this._accuracy=be.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const be=this._map.transform,q=I.mercatorZfromAltitude(1,be._center.lat)*be.worldSize,ce=Math.ceil(2*this._accuracy*q);this._circleElement.style.width=`${ce}px`,this._circleElement.style.height=`${ce}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(be){if(this._map){if(this.options.trackUserLocation)if(be.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",q),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",q),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(be.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new I.Event("error",be)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(be){if(this._container.addEventListener("contextmenu",q=>q.preventDefault()),this._geolocateButton=xe("button","mapboxgl-ctrl-geolocate",this._container),xe("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",be===!1){I.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",q),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",q)}else{const q=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",q),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",q)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=xe("div","mapboxgl-user-location"),this._dotElement.appendChild(xe("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(xe("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Nl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=xe("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",q=>{q.geolocateSource||this._watchState!=="ACTIVE_LOCK"||q.originalEvent&&q.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new I.Event("trackuserlocationend")))})}_onDeviceOrientation(be){this._userLocationDotMarker&&(be.webkitCompassHeading?this._heading=be.webkitCompassHeading:be.absolute===!0&&(this._heading=-1*be.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return I.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new I.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new I.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new I.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let be;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(be={maximumAge:6e5,timeout:0},this._noTimeout=!0):(be=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,be),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const be=()=>{I.window.addEventListener("ondeviceorientationabsolute"in I.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};I.window.DeviceMotionEvent!==void 0&&typeof I.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(q=>{q==="granted"&&be()}).catch(console.error):be()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),I.window.removeEventListener("deviceorientation",this._onDeviceOrientation),I.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:_o,ScaleControl:class{constructor(be){this.options=I.extend({},Bc,be),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Vl.bind(this)),I.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const be=this.options.maxWidth||100,q=this._map,ce=q._containerHeight/2,Te=q._containerWidth/2-be/2,Ie=q.unproject([Te,ce]),Re=q.unproject([Te+be,ce]),Be=Ie.distanceTo(Re);if(this.options.unit==="imperial"){const Ue=3.2808*Be;Ue>5280?this._setScale(be,Ue/5280,"mile"):this._setScale(be,Ue,"foot")}else this.options.unit==="nautical"?this._setScale(be,Be/1852,"nautical-mile"):Be>=1e3?this._setScale(be,Be/1e3,"kilometer"):this._setScale(be,Be,"meter")}_setScale(be,q,ce){const Te=nl(q),Ie=Te/q;this._map._requestDomTask(()=>{this._container.style.width=be*Ie+"px",this._container.innerHTML=ce!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:ce}).format(Te):`${Te}&nbsp;nm`})}onAdd(be){return this._map=be,this._language=be.getLanguage(),this._container=xe("div","mapboxgl-ctrl mapboxgl-ctrl-scale",be.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(be){this._language=be,this._update()}setUnit(be){this.options.unit=be,this._update()}},FullscreenControl:class{constructor(be){this._fullscreen=!1,be&&be.container&&(be.container instanceof I.window.HTMLElement?this._container=be.container:I.warnOnce("Full screen control 'container' must be a DOM element.")),I.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in I.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in I.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(be){return this._map=be,this._container||(this._container=this._map.getContainer()),this._controlContainer=xe("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",I.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,I.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!I.window.document.fullscreenEnabled&&!I.window.document.webkitFullscreenEnabled)}_setupUI(){const be=this._fullscreenButton=xe("button","mapboxgl-ctrl-fullscreen",this._controlContainer);xe("span","mapboxgl-ctrl-icon",be).setAttribute("aria-hidden","true"),be.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),I.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const be=this._getTitle();this._fullscreenButton.setAttribute("aria-label",be),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",be)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(I.window.document.fullscreenElement||I.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?I.window.document.exitFullscreen?I.window.document.exitFullscreen():I.window.document.webkitCancelFullScreen&&I.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends I.Evented{constructor(be){super(),this.options=I.extend(Object.create(Fc),be),I.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(be&&be.className?be.className.trim().split(/\s+/):[])}addTo(be){return this._map&&this.remove(),this._map=be,this.options.closeOnClick&&be.on("preclick",this._onClose),this.options.closeOnMove&&be.on("move",this._onClose),be.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(be.on("mousemove",this._onMouseEvent),be.on("mouseup",this._onMouseEvent),be._canvasContainer.classList.add("mapboxgl-track-pointer")):be.on("move",this._update),this.fire(new I.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const be=this._map;return be&&(be.off("move",this._update),be.off("move",this._onClose),be.off("preclick",this._onClose),be.off("click",this._onClose),be.off("remove",this.remove),be.off("mousemove",this._onMouseEvent),be.off("mouseup",this._onMouseEvent),be.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new I.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(be){this._lngLat=I.LngLat.convert(be),this._pos=null,this._trackPointer=!1,this._update();const q=this._map;return q&&(q.on("move",this._update),q.off("mousemove",this._onMouseEvent),q._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const be=this._map;return be&&(be.off("move",this._update),be.on("mousemove",this._onMouseEvent),be.on("drag",this._onMouseEvent),be._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(be){return this.setDOMContent(I.window.document.createTextNode(be))}setHTML(be){const q=I.window.document.createDocumentFragment(),ce=I.window.document.createElement("body");let Te;for(ce.innerHTML=be;Te=ce.firstChild,Te;)q.appendChild(Te);return this.setDOMContent(q)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(be){return this.options.maxWidth=be,this._update(),this}setDOMContent(be){let q=this._content;if(q)for(;q.hasChildNodes();)q.firstChild&&q.removeChild(q.firstChild);else q=this._content=xe("div","mapboxgl-popup-content",this._container||void 0);if(q.appendChild(be),this.options.closeButton){const ce=this._closeButton=xe("button","mapboxgl-popup-close-button",q);ce.type="button",ce.setAttribute("aria-label","Close popup"),ce.setAttribute("aria-hidden","true"),ce.innerHTML="&#215;",ce.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(be){return this._classList.add(be),this._updateClassList(),this}removeClassName(be){return this._classList.delete(be),this._updateClassList(),this}setOffset(be){return this.options.offset=be,this._update(),this}toggleClassName(be){let q;return this._classList.delete(be)?q=!1:(this._classList.add(be),q=!0),this._updateClassList(),q}_onMouseEvent(be){this._update(be.point)}_getAnchor(be){if(this.options.anchor)return this.options.anchor;const q=this._map,ce=this._container,Te=this._pos;if(!q||!ce||!Te)return"bottom";const Ie=ce.offsetWidth,Re=ce.offsetHeight,Be=Te.x<Ie/2,Ue=Te.x>q.transform.width-Ie/2;if(Te.y+be<Re)return Be?"top-left":Ue?"top-right":"top";if(Te.y>q.transform.height-Re){if(Be)return"bottom-left";if(Ue)return"bottom-right"}return Be?"left":Ue?"right":"bottom"}_updateClassList(){const be=this._container;if(!be)return;const q=[...this._classList];q.push("mapboxgl-popup"),this._anchor&&q.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&q.push("mapboxgl-popup-track-pointer"),be.className=q.join(" ")}_update(be){const q=this._map,ce=this._content;if(!q||!this._lngLat&&!this._trackPointer||!ce)return;let Te=this._container;if(Te||(Te=this._container=xe("div","mapboxgl-popup",q.getContainer()),this._tip=xe("div","mapboxgl-popup-tip",Te),Te.appendChild(ce)),this.options.maxWidth&&Te.style.maxWidth!==this.options.maxWidth&&(Te.style.maxWidth=this.options.maxWidth),q.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ya(this._lngLat,this._pos,q.transform)),!this._trackPointer||be){const Ie=this._pos=this._trackPointer&&be?be:q.project(this._lngLat),Re=rl(this.options.offset),Be=this._anchor=this._getAnchor(Re.y),Ue=rl(this.options.offset,Be),He=Ie.add(Ue).round();q._requestDomTask(()=>{this._container&&Be&&(this._container.style.transform=`${tl[Be]} translate(${He.x}px,${He.y}px)`)})}if(!this._marker&&q._showingGlobe()){const Ie=I.isLngLatBehindGlobe(q.transform,this._lngLat)?0:1;this._setOpacity(Ie)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const be=this._container.querySelector(Nc);be&&be.focus()}_onClose(){this.remove()}_setOpacity(be){this._container&&(this._container.style.opacity=`${be}`),this._content&&(this._content.style.pointerEvents=be?"auto":"none")}},Marker:Nl,Style:vo,LngLat:I.LngLat,LngLatBounds:I.LngLatBounds,Point:I.pointGeometry,MercatorCoordinate:I.MercatorCoordinate,FreeCameraOptions:lr,Evented:I.Evented,config:I.config,prewarm:function(){Qr().acquire(mr)},clearPrewarmedResources:function(){const be=zr;be&&(be.isPreloaded()&&be.numActive()===1?(be.release(mr),zr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return I.config.ACCESS_TOKEN},set accessToken(be){I.config.ACCESS_TOKEN=be},get baseApiUrl(){return I.config.API_URL},set baseApiUrl(be){I.config.API_URL=be},get workerCount(){return Er.workerCount},set workerCount(be){Er.workerCount=be},get maxParallelImageRequests(){return I.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(be){I.config.MAX_PARALLEL_IMAGE_REQUESTS=be},clearStorage(be){I.clearTileCache(be)},workerUrl:"",workerClass:null,setNow:I.exported.setNow,restoreNow:I.exported.restoreNow};return us});var de=te;return de})})(mapboxGl);var mapbox=mapboxGl.exports;function render(U,G){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[createVNode("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})])}var axios$2={exports:{}},bind$2=function(G,V){return function(){for(var te=new Array(arguments.length),Q=0;Q<te.length;Q++)te[Q]=arguments[Q];return G.apply(V,te)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(U){return Array.isArray(U)}function isUndefined(U){return typeof U=="undefined"}function isBuffer(U){return U!==null&&!isUndefined(U)&&U.constructor!==null&&!isUndefined(U.constructor)&&typeof U.constructor.isBuffer=="function"&&U.constructor.isBuffer(U)}function isArrayBuffer(U){return toString.call(U)==="[object ArrayBuffer]"}function isFormData(U){return toString.call(U)==="[object FormData]"}function isArrayBufferView(U){var G;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?G=ArrayBuffer.isView(U):G=U&&U.buffer&&isArrayBuffer(U.buffer),G}function isString(U){return typeof U=="string"}function isNumber(U){return typeof U=="number"}function isObject(U){return U!==null&&typeof U=="object"}function isPlainObject(U){if(toString.call(U)!=="[object Object]")return!1;var G=Object.getPrototypeOf(U);return G===null||G===Object.prototype}function isDate(U){return toString.call(U)==="[object Date]"}function isFile(U){return toString.call(U)==="[object File]"}function isBlob(U){return toString.call(U)==="[object Blob]"}function isFunction$1(U){return toString.call(U)==="[object Function]"}function isStream(U){return isObject(U)&&isFunction$1(U.pipe)}function isURLSearchParams(U){return toString.call(U)==="[object URLSearchParams]"}function trim(U){return U.trim?U.trim():U.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(U,G){if(!(U===null||typeof U=="undefined"))if(typeof U!="object"&&(U=[U]),isArray(U))for(var V=0,re=U.length;V<re;V++)G.call(null,U[V],V,U);else for(var te in U)Object.prototype.hasOwnProperty.call(U,te)&&G.call(null,U[te],te,U)}function merge(){var U={};function G(te,Q){isPlainObject(U[Q])&&isPlainObject(te)?U[Q]=merge(U[Q],te):isPlainObject(te)?U[Q]=merge({},te):isArray(te)?U[Q]=te.slice():U[Q]=te}for(var V=0,re=arguments.length;V<re;V++)forEach(arguments[V],G);return U}function extend(U,G,V){return forEach(G,function(te,Q){V&&typeof te=="function"?U[Q]=bind$1(te,V):U[Q]=te}),U}function stripBOM(U){return U.charCodeAt(0)===65279&&(U=U.slice(1)),U}var utils$e={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction:isFunction$1,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$d=utils$e;function encode(U){return encodeURIComponent(U).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(G,V,re){if(!V)return G;var te;if(re)te=re(V);else if(utils$d.isURLSearchParams(V))te=V.toString();else{var Q=[];utils$d.forEach(V,function(_e,ne){_e===null||typeof _e=="undefined"||(utils$d.isArray(_e)?ne=ne+"[]":_e=[_e],utils$d.forEach(_e,function(ye){utils$d.isDate(ye)?ye=ye.toISOString():utils$d.isObject(ye)&&(ye=JSON.stringify(ye)),Q.push(encode(ne)+"="+encode(ye))}))}),te=Q.join("&")}if(te){var de=G.indexOf("#");de!==-1&&(G=G.slice(0,de)),G+=(G.indexOf("?")===-1?"?":"&")+te}return G},utils$c=utils$e;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(G,V,re){return this.handlers.push({fulfilled:G,rejected:V,synchronous:re?re.synchronous:!1,runWhen:re?re.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(G){this.handlers[G]&&(this.handlers[G]=null)};InterceptorManager$1.prototype.forEach=function(G){utils$c.forEach(this.handlers,function(re){re!==null&&G(re)})};var InterceptorManager_1=InterceptorManager$1,utils$b=utils$e,normalizeHeaderName$1=function(G,V){utils$b.forEach(G,function(te,Q){Q!==V&&Q.toUpperCase()===V.toUpperCase()&&(G[V]=te,delete G[Q])})},enhanceError$2=function(G,V,re,te,Q){return G.config=V,re&&(G.code=re),G.request=te,G.response=Q,G.isAxiosError=!0,G.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},G},transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},enhanceError$1=enhanceError$2,createError$2=function(G,V,re,te,Q){var de=new Error(G);return enhanceError$1(de,V,re,te,Q)},createError$1=createError$2,settle$1=function(G,V,re){var te=re.config.validateStatus;!re.status||!te||te(re.status)?G(re):V(createError$1("Request failed with status code "+re.status,re.config,null,re.request,re))},utils$a=utils$e,cookies$1=utils$a.isStandardBrowserEnv()?function(){return{write:function(V,re,te,Q,de,I){var _e=[];_e.push(V+"="+encodeURIComponent(re)),utils$a.isNumber(te)&&_e.push("expires="+new Date(te).toGMTString()),utils$a.isString(Q)&&_e.push("path="+Q),utils$a.isString(de)&&_e.push("domain="+de),I===!0&&_e.push("secure"),document.cookie=_e.join("; ")},read:function(V){var re=document.cookie.match(new RegExp("(^|;\\s*)("+V+")=([^;]*)"));return re?decodeURIComponent(re[3]):null},remove:function(V){this.write(V,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(G){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(G)},combineURLs$1=function(G,V){return V?G.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):G},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(G,V){return G&&!isAbsoluteURL(V)?combineURLs(G,V):V},utils$9=utils$e,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(G){var V={},re,te,Q;return G&&utils$9.forEach(G.split(`
`),function(I){if(Q=I.indexOf(":"),re=utils$9.trim(I.substr(0,Q)).toLowerCase(),te=utils$9.trim(I.substr(Q+1)),re){if(V[re]&&ignoreDuplicateOf.indexOf(re)>=0)return;re==="set-cookie"?V[re]=(V[re]?V[re]:[]).concat([te]):V[re]=V[re]?V[re]+", "+te:te}}),V},utils$8=utils$e,isURLSameOrigin$1=utils$8.isStandardBrowserEnv()?function(){var G=/(msie|trident)/i.test(navigator.userAgent),V=document.createElement("a"),re;function te(Q){var de=Q;return G&&(V.setAttribute("href",de),de=V.href),V.setAttribute("href",de),{href:V.href,protocol:V.protocol?V.protocol.replace(/:$/,""):"",host:V.host,search:V.search?V.search.replace(/^\?/,""):"",hash:V.hash?V.hash.replace(/^#/,""):"",hostname:V.hostname,port:V.port,pathname:V.pathname.charAt(0)==="/"?V.pathname:"/"+V.pathname}}return re=te(window.location.href),function(de){var I=utils$8.isString(de)?te(de):de;return I.protocol===re.protocol&&I.host===re.host}}():function(){return function(){return!0}}();function Cancel$3(U){this.message=U}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$7=utils$e,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,transitionalDefaults$1=transitional,Cancel$2=Cancel_1,xhr=function(G){return new Promise(function(re,te){var Q=G.data,de=G.headers,I=G.responseType,_e;function ne(){G.cancelToken&&G.cancelToken.unsubscribe(_e),G.signal&&G.signal.removeEventListener("abort",_e)}utils$7.isFormData(Q)&&delete de["Content-Type"];var ge=new XMLHttpRequest;if(G.auth){var ye=G.auth.username||"",xe=G.auth.password?unescape(encodeURIComponent(G.auth.password)):"";de.Authorization="Basic "+btoa(ye+":"+xe)}var we=buildFullPath(G.baseURL,G.url);ge.open(G.method.toUpperCase(),buildURL$1(we,G.params,G.paramsSerializer),!0),ge.timeout=G.timeout;function ke(){if(!!ge){var Oe="getAllResponseHeaders"in ge?parseHeaders(ge.getAllResponseHeaders()):null,Fe=!I||I==="text"||I==="json"?ge.responseText:ge.response,ze={data:Fe,status:ge.status,statusText:ge.statusText,headers:Oe,config:G,request:ge};settle(function(We){re(We),ne()},function(We){te(We),ne()},ze),ge=null}}if("onloadend"in ge?ge.onloadend=ke:ge.onreadystatechange=function(){!ge||ge.readyState!==4||ge.status===0&&!(ge.responseURL&&ge.responseURL.indexOf("file:")===0)||setTimeout(ke)},ge.onabort=function(){!ge||(te(createError("Request aborted",G,"ECONNABORTED",ge)),ge=null)},ge.onerror=function(){te(createError("Network Error",G,null,ge)),ge=null},ge.ontimeout=function(){var Fe=G.timeout?"timeout of "+G.timeout+"ms exceeded":"timeout exceeded",ze=G.transitional||transitionalDefaults$1;G.timeoutErrorMessage&&(Fe=G.timeoutErrorMessage),te(createError(Fe,G,ze.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ge)),ge=null},utils$7.isStandardBrowserEnv()){var Se=(G.withCredentials||isURLSameOrigin(we))&&G.xsrfCookieName?cookies.read(G.xsrfCookieName):void 0;Se&&(de[G.xsrfHeaderName]=Se)}"setRequestHeader"in ge&&utils$7.forEach(de,function(Fe,ze){typeof Q=="undefined"&&ze.toLowerCase()==="content-type"?delete de[ze]:ge.setRequestHeader(ze,Fe)}),utils$7.isUndefined(G.withCredentials)||(ge.withCredentials=!!G.withCredentials),I&&I!=="json"&&(ge.responseType=G.responseType),typeof G.onDownloadProgress=="function"&&ge.addEventListener("progress",G.onDownloadProgress),typeof G.onUploadProgress=="function"&&ge.upload&&ge.upload.addEventListener("progress",G.onUploadProgress),(G.cancelToken||G.signal)&&(_e=function(Oe){!ge||(te(!Oe||Oe&&Oe.type?new Cancel$2("canceled"):Oe),ge.abort(),ge=null)},G.cancelToken&&G.cancelToken.subscribe(_e),G.signal&&(G.signal.aborted?_e():G.signal.addEventListener("abort",_e))),Q||(Q=null),ge.send(Q)})},utils$6=utils$e,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,transitionalDefaults=transitional,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(U,G){!utils$6.isUndefined(U)&&utils$6.isUndefined(U["Content-Type"])&&(U["Content-Type"]=G)}function getDefaultAdapter(){var U;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(U=xhr),U}function stringifySafely(U,G,V){if(utils$6.isString(U))try{return(G||JSON.parse)(U),utils$6.trim(U)}catch(re){if(re.name!=="SyntaxError")throw re}return(V||JSON.stringify)(U)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(G,V){return normalizeHeaderName(V,"Accept"),normalizeHeaderName(V,"Content-Type"),utils$6.isFormData(G)||utils$6.isArrayBuffer(G)||utils$6.isBuffer(G)||utils$6.isStream(G)||utils$6.isFile(G)||utils$6.isBlob(G)?G:utils$6.isArrayBufferView(G)?G.buffer:utils$6.isURLSearchParams(G)?(setContentTypeIfUnset(V,"application/x-www-form-urlencoded;charset=utf-8"),G.toString()):utils$6.isObject(G)||V&&V["Content-Type"]==="application/json"?(setContentTypeIfUnset(V,"application/json"),stringifySafely(G)):G}],transformResponse:[function(G){var V=this.transitional||defaults$3.transitional,re=V&&V.silentJSONParsing,te=V&&V.forcedJSONParsing,Q=!re&&this.responseType==="json";if(Q||te&&utils$6.isString(G)&&G.length)try{return JSON.parse(G)}catch(de){if(Q)throw de.name==="SyntaxError"?enhanceError(de,this,"E_JSON_PARSE"):de}return G}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(G){return G>=200&&G<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],function(G){defaults$3.headers[G]={}});utils$6.forEach(["post","put","patch"],function(G){defaults$3.headers[G]=utils$6.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$5=utils$e,defaults$2=defaults_1,transformData$1=function(G,V,re){var te=this||defaults$2;return utils$5.forEach(re,function(de){G=de.call(te,G,V)}),G},isCancel$1=function(G){return!!(G&&G.__CANCEL__)},utils$4=utils$e,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(U){if(U.cancelToken&&U.cancelToken.throwIfRequested(),U.signal&&U.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(G){throwIfCancellationRequested(G),G.headers=G.headers||{},G.data=transformData.call(G,G.data,G.headers,G.transformRequest),G.headers=utils$4.merge(G.headers.common||{},G.headers[G.method]||{},G.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],function(te){delete G.headers[te]});var V=G.adapter||defaults$1.adapter;return V(G).then(function(te){return throwIfCancellationRequested(G),te.data=transformData.call(G,te.data,te.headers,G.transformResponse),te},function(te){return isCancel(te)||(throwIfCancellationRequested(G),te&&te.response&&(te.response.data=transformData.call(G,te.response.data,te.response.headers,G.transformResponse))),Promise.reject(te)})},utils$3=utils$e,mergeConfig$2=function(G,V){V=V||{};var re={};function te(ge,ye){return utils$3.isPlainObject(ge)&&utils$3.isPlainObject(ye)?utils$3.merge(ge,ye):utils$3.isPlainObject(ye)?utils$3.merge({},ye):utils$3.isArray(ye)?ye.slice():ye}function Q(ge){if(utils$3.isUndefined(V[ge])){if(!utils$3.isUndefined(G[ge]))return te(void 0,G[ge])}else return te(G[ge],V[ge])}function de(ge){if(!utils$3.isUndefined(V[ge]))return te(void 0,V[ge])}function I(ge){if(utils$3.isUndefined(V[ge])){if(!utils$3.isUndefined(G[ge]))return te(void 0,G[ge])}else return te(void 0,V[ge])}function _e(ge){if(ge in V)return te(G[ge],V[ge]);if(ge in G)return te(void 0,G[ge])}var ne={url:de,method:de,data:de,baseURL:I,transformRequest:I,transformResponse:I,paramsSerializer:I,timeout:I,timeoutMessage:I,withCredentials:I,adapter:I,responseType:I,xsrfCookieName:I,xsrfHeaderName:I,onUploadProgress:I,onDownloadProgress:I,decompress:I,maxContentLength:I,maxBodyLength:I,transport:I,httpAgent:I,httpsAgent:I,cancelToken:I,socketPath:I,responseEncoding:I,validateStatus:_e};return utils$3.forEach(Object.keys(G).concat(Object.keys(V)),function(ye){var xe=ne[ye]||Q,we=xe(ye);utils$3.isUndefined(we)&&xe!==_e||(re[ye]=we)}),re},data={version:"0.26.1"},VERSION=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(U,G){validators$1[U]=function(re){return typeof re===U||"a"+(G<1?"n ":" ")+U}});var deprecatedWarnings={};validators$1.transitional=function(G,V,re){function te(Q,de){return"[Axios v"+VERSION+"] Transitional option '"+Q+"'"+de+(re?". "+re:"")}return function(Q,de,I){if(G===!1)throw new Error(te(de," has been removed"+(V?" in "+V:"")));return V&&!deprecatedWarnings[de]&&(deprecatedWarnings[de]=!0,console.warn(te(de," has been deprecated since v"+V+" and will be removed in the near future"))),G?G(Q,de,I):!0}};function assertOptions(U,G,V){if(typeof U!="object")throw new TypeError("options must be an object");for(var re=Object.keys(U),te=re.length;te-- >0;){var Q=re[te],de=G[Q];if(de){var I=U[Q],_e=I===void 0||de(I,Q,U);if(_e!==!0)throw new TypeError("option "+Q+" must be "+_e);continue}if(V!==!0)throw Error("Unknown option "+Q)}}var validator$1={assertOptions,validators:validators$1},utils$2=utils$e,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(U){this.defaults=U,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(G,V){typeof G=="string"?(V=V||{},V.url=G):V=G||{},V=mergeConfig$1(this.defaults,V),V.method?V.method=V.method.toLowerCase():this.defaults.method?V.method=this.defaults.method.toLowerCase():V.method="get";var re=V.transitional;re!==void 0&&validator.assertOptions(re,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var te=[],Q=!0;this.interceptors.request.forEach(function(we){typeof we.runWhen=="function"&&we.runWhen(V)===!1||(Q=Q&&we.synchronous,te.unshift(we.fulfilled,we.rejected))});var de=[];this.interceptors.response.forEach(function(we){de.push(we.fulfilled,we.rejected)});var I;if(!Q){var _e=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(_e,te),_e=_e.concat(de),I=Promise.resolve(V);_e.length;)I=I.then(_e.shift(),_e.shift());return I}for(var ne=V;te.length;){var ge=te.shift(),ye=te.shift();try{ne=ge(ne)}catch(xe){ye(xe);break}}try{I=dispatchRequest(ne)}catch(xe){return Promise.reject(xe)}for(;de.length;)I=I.then(de.shift(),de.shift());return I};Axios$1.prototype.getUri=function(G){return G=mergeConfig$1(this.defaults,G),buildURL(G.url,G.params,G.paramsSerializer).replace(/^\?/,"")};utils$2.forEach(["delete","get","head","options"],function(G){Axios$1.prototype[G]=function(V,re){return this.request(mergeConfig$1(re||{},{method:G,url:V,data:(re||{}).data}))}});utils$2.forEach(["post","put","patch"],function(G){Axios$1.prototype[G]=function(V,re,te){return this.request(mergeConfig$1(te||{},{method:G,url:V,data:re}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(U){if(typeof U!="function")throw new TypeError("executor must be a function.");var G;this.promise=new Promise(function(te){G=te});var V=this;this.promise.then(function(re){if(!!V._listeners){var te,Q=V._listeners.length;for(te=0;te<Q;te++)V._listeners[te](re);V._listeners=null}}),this.promise.then=function(re){var te,Q=new Promise(function(de){V.subscribe(de),te=de}).then(re);return Q.cancel=function(){V.unsubscribe(te)},Q},U(function(te){V.reason||(V.reason=new Cancel(te),G(V.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function(G){if(this.reason){G(this.reason);return}this._listeners?this._listeners.push(G):this._listeners=[G]};CancelToken.prototype.unsubscribe=function(G){if(!!this._listeners){var V=this._listeners.indexOf(G);V!==-1&&this._listeners.splice(V,1)}};CancelToken.source=function(){var G,V=new CancelToken(function(te){G=te});return{token:V,cancel:G}};var CancelToken_1=CancelToken,spread=function(G){return function(re){return G.apply(null,re)}},utils$1=utils$e,isAxiosError=function(G){return utils$1.isObject(G)&&G.isAxiosError===!0},utils=utils$e,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(U){var G=new Axios(U),V=bind(Axios.prototype.request,G);return utils.extend(V,Axios.prototype,G),utils.extend(V,G),V.create=function(te){return createInstance(mergeConfig(U,te))},V}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.VERSION=data.version;axios$1.all=function(G){return Promise.all(G)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports;function unwrapObj(U){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(U).reduce((V,re)=>(G.includes(re)||(V[re]=unref(U[re])),V),{})}function isFunction(U){return typeof U=="function"}function isProxy(U){return isReactive(U)||isReadonly(U)}function callRule(U,G,V,re){return U.call(re,unref(G),unref(V),re)}function normalizeValidatorResponse(U){return U.$valid!==void 0?!U.$valid:!U}function createAsyncResult(U,G,V,re,te,Q,de){let{$lazy:I,$rewardEarly:_e}=te,ne=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],ge=arguments.length>8?arguments[8]:void 0,ye=arguments.length>9?arguments[9]:void 0,xe=arguments.length>10?arguments[10]:void 0;const we=ref(!!re.value),ke=ref(0);V.value=!1;const Se=watch([G,re].concat(ne,xe),()=>{if(I&&!re.value||_e&&!ye.value&&!V.value)return;let Oe;try{Oe=callRule(U,G,ge,de)}catch(Fe){Oe=Promise.reject(Fe)}ke.value++,V.value=!!ke.value,we.value=!1,Promise.resolve(Oe).then(Fe=>{ke.value--,V.value=!!ke.value,Q.value=Fe,we.value=normalizeValidatorResponse(Fe)}).catch(Fe=>{ke.value--,V.value=!!ke.value,Q.value=Fe,we.value=!0})},{immediate:!0,deep:typeof G=="object"});return{$invalid:we,$unwatch:Se}}function createSyncResult(U,G,V,re,te,Q,de,I){let{$lazy:_e,$rewardEarly:ne}=re;const ge=()=>({}),ye=computed(()=>{if(_e&&!V.value||ne&&!I.value)return!1;let xe=!0;try{const we=callRule(U,G,de,Q);te.value=we,xe=normalizeValidatorResponse(we)}catch(we){te.value=we}return xe});return{$unwatch:ge,$invalid:ye}}function createValidatorResult(U,G,V,re,te,Q,de,I,_e,ne,ge){const ye=ref(!1),xe=U.$params||{},we=ref(null);let ke,Se;U.$async?{$invalid:ke,$unwatch:Se}=createAsyncResult(U.$validator,G,ye,V,re,we,te,U.$watchTargets,_e,ne,ge):{$invalid:ke,$unwatch:Se}=createSyncResult(U.$validator,G,V,re,we,te,_e,ne);const Oe=U.$message;return{$message:isFunction(Oe)?computed(()=>Oe(unwrapObj({$pending:ye,$invalid:ke,$params:unwrapObj(xe),$model:G,$response:we,$validator:Q,$propertyPath:I,$property:de}))):Oe||"",$params:xe,$pending:ye,$invalid:ke,$response:we,$unwatch:Se}}function sortValidations(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const G=unref(U),V=Object.keys(G),re={},te={},Q={};return V.forEach(de=>{const I=G[de];switch(!0){case isFunction(I.$validator):re[de]=I;break;case isFunction(I):re[de]={$validator:I};break;case de.startsWith("$"):Q[de]=I;break;default:te[de]=I}}),{rules:re,nestedValidators:te,config:Q}}function _empty(){}const ROOT_PATH="__root";function _call(U,G,V){if(V)return G?G(U()):U();try{var re=Promise.resolve(U());return G?re.then(G):re}catch(te){return Promise.reject(te)}}function _callIgnored(U,G){return _call(U,_empty,G)}function _invoke(U,G){var V=U();return V&&V.then?V.then(G):G(V)}function _async(U){return function(){for(var G=[],V=0;V<arguments.length;V++)G[V]=arguments[V];try{return Promise.resolve(U.apply(this,G))}catch(re){return Promise.reject(re)}}}function createValidationResults(U,G,V,re,te,Q,de,I,_e){const ne=Object.keys(U),ge=re.get(te,U),ye=ref(!1),xe=ref(!1),we=ref(0);if(ge){if(!ge.$partial)return ge;ge.$unwatch(),ye.value=ge.$dirty.value}const ke={$dirty:ye,$path:te,$touch:()=>{ye.value||(ye.value=!0)},$reset:()=>{ye.value&&(ye.value=!1)},$commit:()=>{}};return ne.length?(ne.forEach(Se=>{ke[Se]=createValidatorResult(U[Se],G,ke.$dirty,Q,de,Se,V,te,_e,xe,we)}),ke.$externalResults=computed(()=>I.value?[].concat(I.value).map((Se,Oe)=>({$propertyPath:te,$property:V,$validator:"$externalResults",$uid:`${te}-externalResult-${Oe}`,$message:Se,$params:{},$response:null,$pending:!1})):[]),ke.$invalid=computed(()=>{const Se=ne.some(Oe=>unref(ke[Oe].$invalid));return xe.value=Se,!!ke.$externalResults.value.length||Se}),ke.$pending=computed(()=>ne.some(Se=>unref(ke[Se].$pending))),ke.$error=computed(()=>ke.$dirty.value?ke.$pending.value||ke.$invalid.value:!1),ke.$silentErrors=computed(()=>ne.filter(Se=>unref(ke[Se].$invalid)).map(Se=>{const Oe=ke[Se];return reactive({$propertyPath:te,$property:V,$validator:Se,$uid:`${te}-${Se}`,$message:Oe.$message,$params:Oe.$params,$response:Oe.$response,$pending:Oe.$pending})}).concat(ke.$externalResults.value)),ke.$errors=computed(()=>ke.$dirty.value?ke.$silentErrors.value:[]),ke.$unwatch=()=>ne.forEach(Se=>{ke[Se].$unwatch()}),ke.$commit=()=>{xe.value=!0,we.value=Date.now()},re.set(te,U,ke),ke):(ge&&re.set(te,U,ke),ke)}function collectNestedValidationResults(U,G,V,re,te,Q,de){const I=Object.keys(U);return I.length?I.reduce((_e,ne)=>(_e[ne]=setValidations({validations:U[ne],state:G,key:ne,parentKey:V,resultsCache:re,globalConfig:te,instance:Q,externalResults:de}),_e),{}):{}}function createMetaFields(U,G,V){const re=computed(()=>[G,V].filter(ke=>ke).reduce((ke,Se)=>ke.concat(Object.values(unref(Se))),[])),te=computed({get(){return U.$dirty.value||(re.value.length?re.value.every(ke=>ke.$dirty):!1)},set(ke){U.$dirty.value=ke}}),Q=computed(()=>{const ke=unref(U.$silentErrors)||[],Se=re.value.filter(Oe=>(unref(Oe).$silentErrors||[]).length).reduce((Oe,Fe)=>Oe.concat(...Fe.$silentErrors),[]);return ke.concat(Se)}),de=computed(()=>{const ke=unref(U.$errors)||[],Se=re.value.filter(Oe=>(unref(Oe).$errors||[]).length).reduce((Oe,Fe)=>Oe.concat(...Fe.$errors),[]);return ke.concat(Se)}),I=computed(()=>re.value.some(ke=>ke.$invalid)||unref(U.$invalid)||!1),_e=computed(()=>re.value.some(ke=>unref(ke.$pending))||unref(U.$pending)||!1),ne=computed(()=>re.value.some(ke=>ke.$dirty)||re.value.some(ke=>ke.$anyDirty)||te.value),ge=computed(()=>te.value?_e.value||I.value:!1),ye=()=>{U.$touch(),re.value.forEach(ke=>{ke.$touch()})},xe=()=>{U.$commit(),re.value.forEach(ke=>{ke.$commit()})},we=()=>{U.$reset(),re.value.forEach(ke=>{ke.$reset()})};return re.value.length&&re.value.every(ke=>ke.$dirty)&&ye(),{$dirty:te,$errors:de,$invalid:I,$anyDirty:ne,$error:ge,$pending:_e,$touch:ye,$reset:we,$silentErrors:Q,$commit:xe}}function setValidations(U){const G=_async(function(){return _t(),_invoke(function(){if(Se.$rewardEarly)return tt(),_callIgnored(nextTick)},function(){return _call(nextTick,function(){return new Promise(vt=>{if(!ft.value)return vt(!Ke.value);const ut=watch(ft,()=>{vt(!Ke.value),ut()})})})})});let{validations:V,state:re,key:te,parentKey:Q,childResults:de,resultsCache:I,globalConfig:_e={},instance:ne,externalResults:ge}=U;const ye=Q?`${Q}.${te}`:te,{rules:xe,nestedValidators:we,config:ke}=sortValidations(V),Se=Object.assign({},_e,ke),Oe=te?computed(()=>{const vt=unref(re);return vt?unref(vt[te]):void 0}):re,Fe=Object.assign({},unref(ge)||{}),ze=computed(()=>{const vt=unref(ge);return te?vt?unref(vt[te]):void 0:vt}),Le=createValidationResults(xe,Oe,te,I,ye,Se,ne,ze,re),We=collectNestedValidationResults(we,Oe,ye,I,Se,ne,ze),{$dirty:qe,$errors:Ne,$invalid:Ke,$anyDirty:ot,$error:yt,$pending:ft,$touch:_t,$reset:Je,$silentErrors:Qe,$commit:tt}=createMetaFields(Le,We,de),ht=te?computed({get:()=>unref(Oe),set:vt=>{qe.value=!0;const ut=unref(re),Nt=unref(ge);Nt&&(Nt[te]=Fe[te]),isRef(ut[te])?ut[te].value=vt:ut[te]=vt}}):null;te&&Se.$autoDirty&&watch(Oe,()=>{qe.value||_t();const vt=unref(ge);vt&&(vt[te]=Fe[te])},{flush:"sync"});function it(vt){return(de.value||{})[vt]}function pt(){isRef(ge)?ge.value=Fe:Object.keys(Fe).length===0?Object.keys(ge).forEach(vt=>{delete ge[vt]}):Object.assign(ge,Fe)}return reactive(Object.assign({},Le,{$model:ht,$dirty:qe,$error:yt,$errors:Ne,$invalid:Ke,$anyDirty:ot,$pending:ft,$touch:_t,$reset:Je,$path:ye||ROOT_PATH,$silentErrors:Qe,$validate:G,$commit:tt},de&&{$getResultsForChild:it,$clearExternalResults:pt},We))}class ResultsStorage{constructor(){this.storage=new Map}set(G,V,re){this.storage.set(G,{rules:V,result:re})}checkRulesValidity(G,V,re){const te=Object.keys(re),Q=Object.keys(V);return Q.length!==te.length||!Q.every(I=>te.includes(I))?!1:Q.every(I=>V[I].$params?Object.keys(V[I].$params).every(_e=>unref(re[I].$params[_e])===unref(V[I].$params[_e])):!0)}get(G,V){const re=this.storage.get(G);if(!re)return;const{rules:te,result:Q}=re,de=this.checkRulesValidity(G,V,te),I=Q.$unwatch?Q.$unwatch:()=>({});return de?Q:{$dirty:Q.$dirty,$partial:!0,$unwatch:I}}}const CollectFlag={COLLECT_ALL:!0,COLLECT_NONE:!1},VuelidateInjectChildResults=Symbol("vuelidate#injectChildResults"),VuelidateRemoveChildResults=Symbol("vuelidate#removeChildResults");function nestedValidations(U){let{$scope:G,instance:V}=U;const re={},te=ref([]),Q=computed(()=>te.value.reduce((ge,ye)=>(ge[ye]=unref(re[ye]),ge),{}));function de(ge,ye){let{$registerAs:xe,$scope:we,$stopPropagation:ke}=ye;ke||G===CollectFlag.COLLECT_NONE||we===CollectFlag.COLLECT_NONE||G!==CollectFlag.COLLECT_ALL&&G!==we||(re[xe]=ge,te.value.push(xe))}V.__vuelidateInjectInstances=[].concat(V.__vuelidateInjectInstances||[],de);function I(ge){te.value=te.value.filter(ye=>ye!==ge),delete re[ge]}V.__vuelidateRemoveInstances=[].concat(V.__vuelidateRemoveInstances||[],I);const _e=inject(VuelidateInjectChildResults,[]);provide(VuelidateInjectChildResults,V.__vuelidateInjectInstances);const ne=inject(VuelidateRemoveChildResults,[]);return provide(VuelidateRemoveChildResults,V.__vuelidateRemoveInstances),{childResults:Q,sendValidationResultsToParent:_e,removeValidationResultsFromParent:ne}}function ComputedProxyFactory(U){return new Proxy(U,{get(G,V){return typeof G[V]=="object"?ComputedProxyFactory(G[V]):computed(()=>G[V])}})}function useVuelidate(U,G){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(V=U,U=void 0,G=void 0);let{$registerAs:re,$scope:te=CollectFlag.COLLECT_ALL,$stopPropagation:Q,$externalResults:de,currentVueInstance:I}=V;const _e=I||getCurrentInstance(),ne=_e?_e.type:{};!re&&_e&&(re=`_vuelidate_${_e.uid||_e._uid}`);const ge=ref({}),ye=new ResultsStorage,{childResults:xe,sendValidationResultsToParent:we,removeValidationResultsFromParent:ke}=_e?nestedValidations({$scope:te,instance:_e}):{childResults:ref({})};if(!U&&ne.validations){const Se=ne.validations;G=ref({}),onBeforeMount(()=>{G.value=_e.proxy,watch(()=>isFunction(Se)?Se.call(G.value,new ComputedProxyFactory(G.value)):Se,Oe=>{ge.value=setValidations({validations:Oe,state:G,childResults:xe,resultsCache:ye,globalConfig:V,instance:_e.proxy,externalResults:de||_e.proxy.vuelidateExternalResults})},{immediate:!0})}),V=ne.validationsConfig||V}else{const Se=isRef(U)||isProxy(U)?U:reactive(U||{});watch(Se,Oe=>{ge.value=setValidations({validations:Oe,state:G,childResults:xe,resultsCache:ye,globalConfig:V,instance:_e?_e.proxy:{},externalResults:de})},{immediate:!0})}return _e&&(we.forEach(Se=>Se(ge,{$registerAs:re,$scope:te,$stopPropagation:Q})),onBeforeUnmount(()=>ke.forEach(Se=>Se(re)))),computed(()=>Object.assign({},unref(ge.value),xe.value))}const req=U=>{if(U=unref(U),Array.isArray(U))return!!U.length;if(U==null)return!1;if(U===!1)return!0;if(U instanceof Date)return!isNaN(U.getTime());if(typeof U=="object"){for(let G in U)return!0;return!1}return!!String(U).length},len=U=>(U=unref(U),Array.isArray(U)?U.length:typeof U=="object"?Object.keys(U).length:String(U).length);function regex(){for(var U=arguments.length,G=new Array(U),V=0;V<U;V++)G[V]=arguments[V];return re=>(re=unref(re),!req(re)||G.every(te=>te.test(re)))}regex(/^[a-zA-Z]*$/);regex(/^[a-zA-Z0-9]*$/);var numeric$1=regex(/^\d*(\.\d+)?$/),numeric={$validator:numeric$1,$message:"Value must be numeric",$params:{type:"numeric"}};const emailRegex=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var email$1=regex(emailRegex),email={$validator:email$1,$message:"Value is not a valid email address",$params:{type:"email"}};function minLength$1(U){return G=>!req(G)||len(G)>=unref(U)}function minLength(U){return{$validator:minLength$1(U),$message:G=>{let{$params:V}=G;return`This field should be at least ${V.min} long`},$params:{min:U,type:"minLength"}}}function required$1(U){return typeof U=="string"&&(U=U.trim()),req(U)}var required={$validator:required$1,$message:"Value is required",$params:{type:"required"}};function sameAs$1(U){return G=>unref(G)===unref(U)}function sameAs(U){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"other";return{$validator:sameAs$1(U),$message:V=>`The value must be equal to the ${G} value`,$params:{equalTo:U,otherName:G,type:"sameAs"}}}const urlRegex=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;regex(urlRegex);regex(/(^[0-9]*$)|(^-[0-9]+$)/);regex(/^[-]?\d*(\.\d+)?$/);function _mergeNamespaces(U,G){return G.forEach(function(V){Object.keys(V).forEach(function(re){if(re!=="default"&&!(re in U)){var te=Object.getOwnPropertyDescriptor(V,re);Object.defineProperty(U,re,te.get?te:{enumerable:!0,get:function(){return V[re]}})}})}),Object.freeze(U)}function ownKeys(U,G){var V=Object.keys(U);if(Object.getOwnPropertySymbols){var re=Object.getOwnPropertySymbols(U);G&&(re=re.filter(function(te){return Object.getOwnPropertyDescriptor(U,te).enumerable})),V.push.apply(V,re)}return V}function _objectSpread2(U){for(var G=1;G<arguments.length;G++){var V=arguments[G]!=null?arguments[G]:{};G%2?ownKeys(Object(V),!0).forEach(function(re){_defineProperty(U,re,V[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(V)):ownKeys(Object(V)).forEach(function(re){Object.defineProperty(U,re,Object.getOwnPropertyDescriptor(V,re))})}return U}function _defineProperty(U,G,V){return G in U?Object.defineProperty(U,G,{value:V,enumerable:!0,configurable:!0,writable:!0}):U[G]=V,U}function _slicedToArray(U,G){return _arrayWithHoles(U)||_iterableToArrayLimit(U,G)||_unsupportedIterableToArray(U,G)||_nonIterableRest()}function _arrayWithHoles(U){if(Array.isArray(U))return U}function _iterableToArrayLimit(U,G){var V=U==null?null:typeof Symbol!="undefined"&&U[Symbol.iterator]||U["@@iterator"];if(V!=null){var re,te,Q=[],de=!0,I=!1;try{for(V=V.call(U);!(de=(re=V.next()).done)&&(Q.push(re.value),!G||Q.length!==G);de=!0);}catch(_e){I=!0,te=_e}finally{try{de||V.return==null||V.return()}finally{if(I)throw te}}return Q}}function _unsupportedIterableToArray(U,G){if(U){if(typeof U=="string")return _arrayLikeToArray(U,G);var V=Object.prototype.toString.call(U).slice(8,-1);return V==="Object"&&U.constructor&&(V=U.constructor.name),V==="Map"||V==="Set"?Array.from(U):V==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V)?_arrayLikeToArray(U,G):void 0}}function _arrayLikeToArray(U,G){(G==null||G>U.length)&&(G=U.length);for(var V=0,re=new Array(G);V<G;V++)re[V]=U[V];return re}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function createCommonjsModule(U){var G={exports:{}};return U(G,G.exports),G.exports}var UZIP_1=createCommonjsModule(function(U){var G,V,re={};U.exports=re,re.parse=function(te,Q){for(var de=re.bin.readUshort,I=re.bin.readUint,_e=0,ne={},ge=new Uint8Array(te),ye=ge.length-4;I(ge,ye)!=101010256;)ye--;_e=ye,_e+=4;var xe=de(ge,_e+=4);de(ge,_e+=2);var we=I(ge,_e+=2),ke=I(ge,_e+=4);_e+=4,_e=ke;for(var Se=0;Se<xe;Se++){I(ge,_e),_e+=4,_e+=4,_e+=4,I(ge,_e+=4),we=I(ge,_e+=4);var Oe=I(ge,_e+=4),Fe=de(ge,_e+=4),ze=de(ge,_e+2),Le=de(ge,_e+4);_e+=6;var We=I(ge,_e+=8);_e+=4,_e+=Fe+ze+Le,re._readLocal(ge,We,ne,we,Oe,Q)}return ne},re._readLocal=function(te,Q,de,I,_e,ne){var ge=re.bin.readUshort,ye=re.bin.readUint;ye(te,Q),ge(te,Q+=4),ge(te,Q+=2);var xe=ge(te,Q+=2);ye(te,Q+=2),ye(te,Q+=4),Q+=4;var we=ge(te,Q+=8),ke=ge(te,Q+=2);Q+=2;var Se=re.bin.readUTF8(te,Q,we);if(Q+=we,Q+=ke,ne)de[Se]={size:_e,csize:I};else{var Oe=new Uint8Array(te.buffer,Q);if(xe==0)de[Se]=new Uint8Array(Oe.buffer.slice(Q,Q+I));else{if(xe!=8)throw"unknown compression method: "+xe;var Fe=new Uint8Array(_e);re.inflateRaw(Oe,Fe),de[Se]=Fe}}},re.inflateRaw=function(te,Q){return re.F.inflate(te,Q)},re.inflate=function(te,Q){return te[0],te[1],re.inflateRaw(new Uint8Array(te.buffer,te.byteOffset+2,te.length-6),Q)},re.deflate=function(te,Q){Q==null&&(Q={level:6});var de=0,I=new Uint8Array(50+Math.floor(1.1*te.length));I[de]=120,I[de+1]=156,de+=2,de=re.F.deflateRaw(te,I,de,Q.level);var _e=re.adler(te,0,te.length);return I[de+0]=_e>>>24&255,I[de+1]=_e>>>16&255,I[de+2]=_e>>>8&255,I[de+3]=_e>>>0&255,new Uint8Array(I.buffer,0,de+4)},re.deflateRaw=function(te,Q){Q==null&&(Q={level:6});var de=new Uint8Array(50+Math.floor(1.1*te.length)),I=re.F.deflateRaw(te,de,I,Q.level);return new Uint8Array(de.buffer,0,I)},re.encode=function(te,Q){Q==null&&(Q=!1);var de=0,I=re.bin.writeUint,_e=re.bin.writeUshort,ne={};for(var ge in te){var ye=!re._noNeed(ge)&&!Q,xe=te[ge],we=re.crc.crc(xe,0,xe.length);ne[ge]={cpr:ye,usize:xe.length,crc:we,file:ye?re.deflateRaw(xe):xe}}for(var ge in ne)de+=ne[ge].file.length+30+46+2*re.bin.sizeUTF8(ge);de+=22;var ke=new Uint8Array(de),Se=0,Oe=[];for(var ge in ne){var Fe=ne[ge];Oe.push(Se),Se=re._writeHeader(ke,Se,ge,Fe,0)}var ze=0,Le=Se;for(var ge in ne)Fe=ne[ge],Oe.push(Se),Se=re._writeHeader(ke,Se,ge,Fe,1,Oe[ze++]);var We=Se-Le;return I(ke,Se,101010256),Se+=4,_e(ke,Se+=4,ze),_e(ke,Se+=2,ze),I(ke,Se+=2,We),I(ke,Se+=4,Le),Se+=4,Se+=2,ke.buffer},re._noNeed=function(te){var Q=te.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(Q)!=-1},re._writeHeader=function(te,Q,de,I,_e,ne){var ge=re.bin.writeUint,ye=re.bin.writeUshort,xe=I.file;return ge(te,Q,_e==0?67324752:33639248),Q+=4,_e==1&&(Q+=2),ye(te,Q,20),ye(te,Q+=2,0),ye(te,Q+=2,I.cpr?8:0),ge(te,Q+=2,0),ge(te,Q+=4,I.crc),ge(te,Q+=4,xe.length),ge(te,Q+=4,I.usize),ye(te,Q+=4,re.bin.sizeUTF8(de)),ye(te,Q+=2,0),Q+=2,_e==1&&(Q+=2,Q+=2,ge(te,Q+=6,ne),Q+=4),Q+=re.bin.writeUTF8(te,Q,de),_e==0&&(te.set(xe,Q),Q+=xe.length),Q},re.crc={table:function(){for(var te=new Uint32Array(256),Q=0;Q<256;Q++){for(var de=Q,I=0;I<8;I++)1&de?de=3988292384^de>>>1:de>>>=1;te[Q]=de}return te}(),update:function(te,Q,de,I){for(var _e=0;_e<I;_e++)te=re.crc.table[255&(te^Q[de+_e])]^te>>>8;return te},crc:function(te,Q,de){return 4294967295^re.crc.update(4294967295,te,Q,de)}},re.adler=function(te,Q,de){for(var I=1,_e=0,ne=Q,ge=Q+de;ne<ge;){for(var ye=Math.min(ne+5552,ge);ne<ye;)_e+=I+=te[ne++];I%=65521,_e%=65521}return _e<<16|I},re.bin={readUshort:function(te,Q){return te[Q]|te[Q+1]<<8},writeUshort:function(te,Q,de){te[Q]=255&de,te[Q+1]=de>>8&255},readUint:function(te,Q){return 16777216*te[Q+3]+(te[Q+2]<<16|te[Q+1]<<8|te[Q])},writeUint:function(te,Q,de){te[Q]=255&de,te[Q+1]=de>>8&255,te[Q+2]=de>>16&255,te[Q+3]=de>>24&255},readASCII:function(te,Q,de){for(var I="",_e=0;_e<de;_e++)I+=String.fromCharCode(te[Q+_e]);return I},writeASCII:function(te,Q,de){for(var I=0;I<de.length;I++)te[Q+I]=de.charCodeAt(I)},pad:function(te){return te.length<2?"0"+te:te},readUTF8:function(te,Q,de){for(var I,_e="",ne=0;ne<de;ne++)_e+="%"+re.bin.pad(te[Q+ne].toString(16));try{I=decodeURIComponent(_e)}catch{return re.bin.readASCII(te,Q,de)}return I},writeUTF8:function(te,Q,de){for(var I=de.length,_e=0,ne=0;ne<I;ne++){var ge=de.charCodeAt(ne);if((4294967168&ge)==0)te[Q+_e]=ge,_e++;else if((4294965248&ge)==0)te[Q+_e]=192|ge>>6,te[Q+_e+1]=128|ge>>0&63,_e+=2;else if((4294901760&ge)==0)te[Q+_e]=224|ge>>12,te[Q+_e+1]=128|ge>>6&63,te[Q+_e+2]=128|ge>>0&63,_e+=3;else{if((4292870144&ge)!=0)throw"e";te[Q+_e]=240|ge>>18,te[Q+_e+1]=128|ge>>12&63,te[Q+_e+2]=128|ge>>6&63,te[Q+_e+3]=128|ge>>0&63,_e+=4}}return _e},sizeUTF8:function(te){for(var Q=te.length,de=0,I=0;I<Q;I++){var _e=te.charCodeAt(I);if((4294967168&_e)==0)de++;else if((4294965248&_e)==0)de+=2;else if((4294901760&_e)==0)de+=3;else{if((4292870144&_e)!=0)throw"e";de+=4}}return de}},re.F={},re.F.deflateRaw=function(te,Q,de,I){var _e=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][I],ne=re.F.U,ge=re.F._goodIndex;re.F._hash;var ye=re.F._putsE,xe=0,we=de<<3,ke=0,Se=te.length;if(I==0){for(;xe<Se;)ye(Q,we,xe+(_t=Math.min(65535,Se-xe))==Se?1:0),we=re.F._copyExact(te,xe,_t,Q,we+8),xe+=_t;return we>>>3}var Oe=ne.lits,Fe=ne.strt,ze=ne.prev,Le=0,We=0,qe=0,Ne=0,Ke=0,ot=0;for(Se>2&&(Fe[ot=re.F._hash(te,0)]=0),xe=0;xe<Se;xe++){if(Ke=ot,xe+1<Se-2){ot=re.F._hash(te,xe+1);var yt=xe+1&32767;ze[yt]=Fe[ot],Fe[ot]=yt}if(ke<=xe){(Le>14e3||We>26697)&&Se-xe>100&&(ke<xe&&(Oe[Le]=xe-ke,Le+=2,ke=xe),we=re.F._writeBlock(xe==Se-1||ke==Se?1:0,Oe,Le,Ne,te,qe,xe-qe,Q,we),Le=We=Ne=0,qe=xe);var ft=0;xe<Se-2&&(ft=re.F._bestMatch(te,xe,ze,Ke,Math.min(_e[2],Se-xe),_e[3]));var _t=ft>>>16,Je=65535&ft;if(ft!=0){Je=65535&ft;var Qe=ge(_t=ft>>>16,ne.of0);ne.lhst[257+Qe]++;var tt=ge(Je,ne.df0);ne.dhst[tt]++,Ne+=ne.exb[Qe]+ne.dxb[tt],Oe[Le]=_t<<23|xe-ke,Oe[Le+1]=Je<<16|Qe<<8|tt,Le+=2,ke=xe+_t}else ne.lhst[te[xe]]++;We++}}for(qe==xe&&te.length!=0||(ke<xe&&(Oe[Le]=xe-ke,Le+=2,ke=xe),we=re.F._writeBlock(1,Oe,Le,Ne,te,qe,xe-qe,Q,we),Le=0,We=0,Le=We=Ne=0,qe=xe);(7&we)!=0;)we++;return we>>>3},re.F._bestMatch=function(te,Q,de,I,_e,ne){var ge=32767&Q,ye=de[ge],xe=ge-ye+32768&32767;if(ye==ge||I!=re.F._hash(te,Q-xe))return 0;for(var we=0,ke=0,Se=Math.min(32767,Q);xe<=Se&&--ne!=0&&ye!=ge;){if(we==0||te[Q+we]==te[Q+we-xe]){var Oe=re.F._howLong(te,Q,xe);if(Oe>we){if(ke=xe,(we=Oe)>=_e)break;xe+2<Oe&&(Oe=xe+2);for(var Fe=0,ze=0;ze<Oe-2;ze++){var Le=Q-xe+ze+32768&32767,We=Le-de[Le]+32768&32767;We>Fe&&(Fe=We,ye=Le)}}}xe+=(ge=ye)-(ye=de[ge])+32768&32767}return we<<16|ke},re.F._howLong=function(te,Q,de){if(te[Q]!=te[Q-de]||te[Q+1]!=te[Q+1-de]||te[Q+2]!=te[Q+2-de])return 0;var I=Q,_e=Math.min(te.length,Q+258);for(Q+=3;Q<_e&&te[Q]==te[Q-de];)Q++;return Q-I},re.F._hash=function(te,Q){return(te[Q]<<8|te[Q+1])+(te[Q+2]<<4)&65535},re.saved=0,re.F._writeBlock=function(te,Q,de,I,_e,ne,ge,ye,xe){var we,ke,Se,Oe,Fe,ze,Le,We,qe,Ne=re.F.U,Ke=re.F._putsF,ot=re.F._putsE;Ne.lhst[256]++,ke=(we=re.F.getTrees())[0],Se=we[1],Oe=we[2],Fe=we[3],ze=we[4],Le=we[5],We=we[6],qe=we[7];var yt=32+((xe+3&7)==0?0:8-(xe+3&7))+(ge<<3),ft=I+re.F.contSize(Ne.fltree,Ne.lhst)+re.F.contSize(Ne.fdtree,Ne.dhst),_t=I+re.F.contSize(Ne.ltree,Ne.lhst)+re.F.contSize(Ne.dtree,Ne.dhst);_t+=14+3*Le+re.F.contSize(Ne.itree,Ne.ihst)+(2*Ne.ihst[16]+3*Ne.ihst[17]+7*Ne.ihst[18]);for(var Je=0;Je<286;Je++)Ne.lhst[Je]=0;for(Je=0;Je<30;Je++)Ne.dhst[Je]=0;for(Je=0;Je<19;Je++)Ne.ihst[Je]=0;var Qe=yt<ft&&yt<_t?0:ft<_t?1:2;if(Ke(ye,xe,te),Ke(ye,xe+1,Qe),xe+=3,Qe==0){for(;(7&xe)!=0;)xe++;xe=re.F._copyExact(_e,ne,ge,ye,xe)}else{var tt,ht;if(Qe==1&&(tt=Ne.fltree,ht=Ne.fdtree),Qe==2){re.F.makeCodes(Ne.ltree,ke),re.F.revCodes(Ne.ltree,ke),re.F.makeCodes(Ne.dtree,Se),re.F.revCodes(Ne.dtree,Se),re.F.makeCodes(Ne.itree,Oe),re.F.revCodes(Ne.itree,Oe),tt=Ne.ltree,ht=Ne.dtree,ot(ye,xe,Fe-257),ot(ye,xe+=5,ze-1),ot(ye,xe+=5,Le-4),xe+=4;for(var it=0;it<Le;it++)ot(ye,xe+3*it,Ne.itree[1+(Ne.ordr[it]<<1)]);xe+=3*Le,xe=re.F._codeTiny(We,Ne.itree,ye,xe),xe=re.F._codeTiny(qe,Ne.itree,ye,xe)}for(var pt=ne,vt=0;vt<de;vt+=2){for(var ut=Q[vt],Nt=ut>>>23,at=pt+(8388607&ut);pt<at;)xe=re.F._writeLit(_e[pt++],tt,ye,xe);if(Nt!=0){var Mt=Q[vt+1],nn=Mt>>16,Tn=Mt>>8&255,Jt=255&Mt;ot(ye,xe=re.F._writeLit(257+Tn,tt,ye,xe),Nt-Ne.of0[Tn]),xe+=Ne.exb[Tn],Ke(ye,xe=re.F._writeLit(Jt,ht,ye,xe),nn-Ne.df0[Jt]),xe+=Ne.dxb[Jt],pt+=Nt}}xe=re.F._writeLit(256,tt,ye,xe)}return xe},re.F._copyExact=function(te,Q,de,I,_e){var ne=_e>>>3;return I[ne]=de,I[ne+1]=de>>>8,I[ne+2]=255-I[ne],I[ne+3]=255-I[ne+1],ne+=4,I.set(new Uint8Array(te.buffer,Q,de),ne),_e+(de+4<<3)},re.F.getTrees=function(){for(var te=re.F.U,Q=re.F._hufTree(te.lhst,te.ltree,15),de=re.F._hufTree(te.dhst,te.dtree,15),I=[],_e=re.F._lenCodes(te.ltree,I),ne=[],ge=re.F._lenCodes(te.dtree,ne),ye=0;ye<I.length;ye+=2)te.ihst[I[ye]]++;for(ye=0;ye<ne.length;ye+=2)te.ihst[ne[ye]]++;for(var xe=re.F._hufTree(te.ihst,te.itree,7),we=19;we>4&&te.itree[1+(te.ordr[we-1]<<1)]==0;)we--;return[Q,de,xe,_e,ge,we,I,ne]},re.F.getSecond=function(te){for(var Q=[],de=0;de<te.length;de+=2)Q.push(te[de+1]);return Q},re.F.nonZero=function(te){for(var Q="",de=0;de<te.length;de+=2)te[de+1]!=0&&(Q+=(de>>1)+",");return Q},re.F.contSize=function(te,Q){for(var de=0,I=0;I<Q.length;I++)de+=Q[I]*te[1+(I<<1)];return de},re.F._codeTiny=function(te,Q,de,I){for(var _e=0;_e<te.length;_e+=2){var ne=te[_e],ge=te[_e+1];I=re.F._writeLit(ne,Q,de,I);var ye=ne==16?2:ne==17?3:7;ne>15&&(re.F._putsE(de,I,ge,ye),I+=ye)}return I},re.F._lenCodes=function(te,Q){for(var de=te.length;de!=2&&te[de-1]==0;)de-=2;for(var I=0;I<de;I+=2){var _e=te[I+1],ne=I+3<de?te[I+3]:-1,ge=I+5<de?te[I+5]:-1,ye=I==0?-1:te[I-1];if(_e==0&&ne==_e&&ge==_e){for(var xe=I+5;xe+2<de&&te[xe+2]==_e;)xe+=2;(we=Math.min(xe+1-I>>>1,138))<11?Q.push(17,we-3):Q.push(18,we-11),I+=2*we-2}else if(_e==ye&&ne==_e&&ge==_e){for(xe=I+5;xe+2<de&&te[xe+2]==_e;)xe+=2;var we=Math.min(xe+1-I>>>1,6);Q.push(16,we-3),I+=2*we-2}else Q.push(_e,0)}return de>>>1},re.F._hufTree=function(te,Q,de){var I=[],_e=te.length,ne=Q.length,ge=0;for(ge=0;ge<ne;ge+=2)Q[ge]=0,Q[ge+1]=0;for(ge=0;ge<_e;ge++)te[ge]!=0&&I.push({lit:ge,f:te[ge]});var ye=I.length,xe=I.slice(0);if(ye==0)return 0;if(ye==1){var we=I[0].lit;return xe=we==0?1:0,Q[1+(we<<1)]=1,Q[1+(xe<<1)]=1,1}I.sort(function(We,qe){return We.f-qe.f});var ke=I[0],Se=I[1],Oe=0,Fe=1,ze=2;for(I[0]={lit:-1,f:ke.f+Se.f,l:ke,r:Se,d:0};Fe!=ye-1;)ke=Oe!=Fe&&(ze==ye||I[Oe].f<I[ze].f)?I[Oe++]:I[ze++],Se=Oe!=Fe&&(ze==ye||I[Oe].f<I[ze].f)?I[Oe++]:I[ze++],I[Fe++]={lit:-1,f:ke.f+Se.f,l:ke,r:Se};var Le=re.F.setDepth(I[Fe-1],0);for(Le>de&&(re.F.restrictDepth(xe,de,Le),Le=de),ge=0;ge<ye;ge++)Q[1+(xe[ge].lit<<1)]=xe[ge].d;return Le},re.F.setDepth=function(te,Q){return te.lit!=-1?(te.d=Q,Q):Math.max(re.F.setDepth(te.l,Q+1),re.F.setDepth(te.r,Q+1))},re.F.restrictDepth=function(te,Q,de){var I=0,_e=1<<de-Q,ne=0;for(te.sort(function(ye,xe){return xe.d==ye.d?ye.f-xe.f:xe.d-ye.d}),I=0;I<te.length&&te[I].d>Q;I++){var ge=te[I].d;te[I].d=Q,ne+=_e-(1<<de-ge)}for(ne>>>=de-Q;ne>0;)(ge=te[I].d)<Q?(te[I].d++,ne-=1<<Q-ge-1):I++;for(;I>=0;I--)te[I].d==Q&&ne<0&&(te[I].d--,ne++);ne!=0&&console.log("debt left")},re.F._goodIndex=function(te,Q){var de=0;return Q[16|de]<=te&&(de|=16),Q[8|de]<=te&&(de|=8),Q[4|de]<=te&&(de|=4),Q[2|de]<=te&&(de|=2),Q[1|de]<=te&&(de|=1),de},re.F._writeLit=function(te,Q,de,I){return re.F._putsF(de,I,Q[te<<1]),I+Q[1+(te<<1)]},re.F.inflate=function(te,Q){var de=Uint8Array;if(te[0]==3&&te[1]==0)return Q||new de(0);var I=re.F,_e=I._bitsF,ne=I._bitsE,ge=I._decodeTiny,ye=I.makeCodes,xe=I.codes2map,we=I._get17,ke=I.U,Se=Q==null;Se&&(Q=new de(te.length>>>2<<3));for(var Oe,Fe,ze=0,Le=0,We=0,qe=0,Ne=0,Ke=0,ot=0,yt=0,ft=0;ze==0;)if(ze=_e(te,ft,1),Le=_e(te,ft+1,2),ft+=3,Le!=0){if(Se&&(Q=re.F._check(Q,yt+(1<<17))),Le==1&&(Oe=ke.flmap,Fe=ke.fdmap,Ke=511,ot=31),Le==2){We=ne(te,ft,5)+257,qe=ne(te,ft+5,5)+1,Ne=ne(te,ft+10,4)+4,ft+=14;for(var _t=0;_t<38;_t+=2)ke.itree[_t]=0,ke.itree[_t+1]=0;var Je=1;for(_t=0;_t<Ne;_t++){var Qe=ne(te,ft+3*_t,3);ke.itree[1+(ke.ordr[_t]<<1)]=Qe,Qe>Je&&(Je=Qe)}ft+=3*Ne,ye(ke.itree,Je),xe(ke.itree,Je,ke.imap),Oe=ke.lmap,Fe=ke.dmap,ft=ge(ke.imap,(1<<Je)-1,We+qe,te,ft,ke.ttree);var tt=I._copyOut(ke.ttree,0,We,ke.ltree);Ke=(1<<tt)-1;var ht=I._copyOut(ke.ttree,We,qe,ke.dtree);ot=(1<<ht)-1,ye(ke.ltree,tt),xe(ke.ltree,tt,Oe),ye(ke.dtree,ht),xe(ke.dtree,ht,Fe)}for(;;){var it=Oe[we(te,ft)&Ke];ft+=15&it;var pt=it>>>4;if(pt>>>8==0)Q[yt++]=pt;else{if(pt==256)break;var vt=yt+pt-254;if(pt>264){var ut=ke.ldef[pt-257];vt=yt+(ut>>>3)+ne(te,ft,7&ut),ft+=7&ut}var Nt=Fe[we(te,ft)&ot];ft+=15&Nt;var at=Nt>>>4,Mt=ke.ddef[at],nn=(Mt>>>4)+_e(te,ft,15&Mt);for(ft+=15&Mt,Se&&(Q=re.F._check(Q,yt+(1<<17)));yt<vt;)Q[yt]=Q[yt++-nn],Q[yt]=Q[yt++-nn],Q[yt]=Q[yt++-nn],Q[yt]=Q[yt++-nn];yt=vt}}}else{(7&ft)!=0&&(ft+=8-(7&ft));var Tn=4+(ft>>>3),Jt=te[Tn-4]|te[Tn-3]<<8;Se&&(Q=re.F._check(Q,yt+Jt)),Q.set(new de(te.buffer,te.byteOffset+Tn,Jt),yt),ft=Tn+Jt<<3,yt+=Jt}return Q.length==yt?Q:Q.slice(0,yt)},re.F._check=function(te,Q){var de=te.length;if(Q<=de)return te;var I=new Uint8Array(Math.max(de<<1,Q));return I.set(te,0),I},re.F._decodeTiny=function(te,Q,de,I,_e,ne){for(var ge=re.F._bitsE,ye=re.F._get17,xe=0;xe<de;){var we=te[ye(I,_e)&Q];_e+=15&we;var ke=we>>>4;if(ke<=15)ne[xe]=ke,xe++;else{var Se=0,Oe=0;ke==16?(Oe=3+ge(I,_e,2),_e+=2,Se=ne[xe-1]):ke==17?(Oe=3+ge(I,_e,3),_e+=3):ke==18&&(Oe=11+ge(I,_e,7),_e+=7);for(var Fe=xe+Oe;xe<Fe;)ne[xe]=Se,xe++}}return _e},re.F._copyOut=function(te,Q,de,I){for(var _e=0,ne=0,ge=I.length>>>1;ne<de;){var ye=te[ne+Q];I[ne<<1]=0,I[1+(ne<<1)]=ye,ye>_e&&(_e=ye),ne++}for(;ne<ge;)I[ne<<1]=0,I[1+(ne<<1)]=0,ne++;return _e},re.F.makeCodes=function(te,Q){for(var de,I,_e,ne,ge=re.F.U,ye=te.length,xe=ge.bl_count,we=0;we<=Q;we++)xe[we]=0;for(we=1;we<ye;we+=2)xe[te[we]]++;var ke=ge.next_code;for(de=0,xe[0]=0,I=1;I<=Q;I++)de=de+xe[I-1]<<1,ke[I]=de;for(_e=0;_e<ye;_e+=2)(ne=te[_e+1])!=0&&(te[_e]=ke[ne],ke[ne]++)},re.F.codes2map=function(te,Q,de){for(var I=te.length,_e=re.F.U.rev15,ne=0;ne<I;ne+=2)if(te[ne+1]!=0)for(var ge=ne>>1,ye=te[ne+1],xe=ge<<4|ye,we=Q-ye,ke=te[ne]<<we,Se=ke+(1<<we);ke!=Se;)de[_e[ke]>>>15-Q]=xe,ke++},re.F.revCodes=function(te,Q){for(var de=re.F.U.rev15,I=15-Q,_e=0;_e<te.length;_e+=2){var ne=te[_e]<<Q-te[_e+1];te[_e]=de[ne]>>>I}},re.F._putsE=function(te,Q,de){de<<=7&Q;var I=Q>>>3;te[I]|=de,te[I+1]|=de>>>8},re.F._putsF=function(te,Q,de){de<<=7&Q;var I=Q>>>3;te[I]|=de,te[I+1]|=de>>>8,te[I+2]|=de>>>16},re.F._bitsE=function(te,Q,de){return(te[Q>>>3]|te[1+(Q>>>3)]<<8)>>>(7&Q)&(1<<de)-1},re.F._bitsF=function(te,Q,de){return(te[Q>>>3]|te[1+(Q>>>3)]<<8|te[2+(Q>>>3)]<<16)>>>(7&Q)&(1<<de)-1},re.F._get17=function(te,Q){return(te[Q>>>3]|te[1+(Q>>>3)]<<8|te[2+(Q>>>3)]<<16)>>>(7&Q)},re.F._get25=function(te,Q){return(te[Q>>>3]|te[1+(Q>>>3)]<<8|te[2+(Q>>>3)]<<16|te[3+(Q>>>3)]<<24)>>>(7&Q)},re.F.U=(G=Uint16Array,V=Uint32Array,{next_code:new G(16),bl_count:new G(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new G(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new V(32),flmap:new G(512),fltree:[],fdmap:new G(32),fdtree:[],lmap:new G(32768),ltree:[],ttree:[],dmap:new G(32768),dtree:[],imap:new G(512),itree:[],rev15:new G(32768),lhst:new V(286),dhst:new V(30),ihst:new V(19),lits:new V(15e3),strt:new G(65536),prev:new G(32768)}),function(){for(var te=re.F.U,Q=0;Q<32768;Q++){var de=Q;de=(4278255360&(de=(4042322160&(de=(3435973836&(de=(2863311530&de)>>>1|(1431655765&de)<<1))>>>2|(858993459&de)<<2))>>>4|(252645135&de)<<4))>>>8|(16711935&de)<<8,te.rev15[Q]=(de>>>16|de<<16)>>>17}function I(_e,ne,ge){for(;ne--!=0;)_e.push(0,ge)}for(Q=0;Q<32;Q++)te.ldef[Q]=te.of0[Q]<<3|te.exb[Q],te.ddef[Q]=te.df0[Q]<<4|te.dxb[Q];I(te.fltree,144,8),I(te.fltree,112,9),I(te.fltree,24,7),I(te.fltree,8,8),re.F.makeCodes(te.fltree,9),re.F.codes2map(te.fltree,9,te.flmap),re.F.revCodes(te.fltree,9),I(te.fdtree,32,5),re.F.makeCodes(te.fdtree,5),re.F.codes2map(te.fdtree,5,te.fdmap),re.F.revCodes(te.fdtree,5),I(te.itree,19,0),I(te.ltree,286,0),I(te.dtree,30,0),I(te.ttree,320,0)}()}),UZIP=Object.freeze(_mergeNamespaces({__proto__:null,default:UZIP_1},[UZIP_1])),UPNG={},N,W,H;UPNG.toRGBA8=function(U){var G=U.width,V=U.height;if(U.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(U.data,G,V,U).buffer];var re=[];U.frames[0].data==null&&(U.frames[0].data=U.data);for(var te=G*V*4,Q=new Uint8Array(te),de=new Uint8Array(te),I=new Uint8Array(te),_e=0;_e<U.frames.length;_e++){var ne=U.frames[_e],ge=ne.rect.x,ye=ne.rect.y,xe=ne.rect.width,we=ne.rect.height,ke=UPNG.toRGBA8.decodeImage(ne.data,xe,we,U);if(_e!=0)for(var Se=0;Se<te;Se++)I[Se]=Q[Se];if(ne.blend==0?UPNG._copyTile(ke,xe,we,Q,G,V,ge,ye,0):ne.blend==1&&UPNG._copyTile(ke,xe,we,Q,G,V,ge,ye,1),re.push(Q.buffer.slice(0)),ne.dispose!=0){if(ne.dispose==1)UPNG._copyTile(de,xe,we,Q,G,V,ge,ye,0);else if(ne.dispose==2)for(Se=0;Se<te;Se++)Q[Se]=I[Se]}}return re},UPNG.toRGBA8.decodeImage=function(U,G,V,re){var te=G*V,Q=UPNG.decode._getBPP(re),de=Math.ceil(G*Q/8),I=new Uint8Array(4*te),_e=new Uint32Array(I.buffer),ne=re.ctype,ge=re.depth,ye=UPNG._bin.readUshort;if(ne==6){var xe=te<<2;if(ge==8)for(var we=0;we<xe;we+=4)I[we]=U[we],I[we+1]=U[we+1],I[we+2]=U[we+2],I[we+3]=U[we+3];if(ge==16)for(we=0;we<xe;we++)I[we]=U[we<<1]}else if(ne==2){var ke=re.tabs.tRNS;if(ke==null){if(ge==8)for(we=0;we<te;we++){var Se=3*we;_e[we]=255<<24|U[Se+2]<<16|U[Se+1]<<8|U[Se]}if(ge==16)for(we=0;we<te;we++)Se=6*we,_e[we]=255<<24|U[Se+4]<<16|U[Se+2]<<8|U[Se]}else{var Oe=ke[0],Fe=ke[1],ze=ke[2];if(ge==8)for(we=0;we<te;we++){var Le=we<<2;Se=3*we,_e[we]=255<<24|U[Se+2]<<16|U[Se+1]<<8|U[Se],U[Se]==Oe&&U[Se+1]==Fe&&U[Se+2]==ze&&(I[Le+3]=0)}if(ge==16)for(we=0;we<te;we++)Le=we<<2,Se=6*we,_e[we]=255<<24|U[Se+4]<<16|U[Se+2]<<8|U[Se],ye(U,Se)==Oe&&ye(U,Se+2)==Fe&&ye(U,Se+4)==ze&&(I[Le+3]=0)}}else if(ne==3){var We=re.tabs.PLTE,qe=re.tabs.tRNS,Ne=qe?qe.length:0;if(ge==1)for(var Ke=0;Ke<V;Ke++){var ot=Ke*de,yt=Ke*G;for(we=0;we<G;we++){Le=yt+we<<2;var ft=3*(_t=U[ot+(we>>3)]>>7-((7&we)<<0)&1);I[Le]=We[ft],I[Le+1]=We[ft+1],I[Le+2]=We[ft+2],I[Le+3]=_t<Ne?qe[_t]:255}}if(ge==2)for(Ke=0;Ke<V;Ke++)for(ot=Ke*de,yt=Ke*G,we=0;we<G;we++)Le=yt+we<<2,ft=3*(_t=U[ot+(we>>2)]>>6-((3&we)<<1)&3),I[Le]=We[ft],I[Le+1]=We[ft+1],I[Le+2]=We[ft+2],I[Le+3]=_t<Ne?qe[_t]:255;if(ge==4)for(Ke=0;Ke<V;Ke++)for(ot=Ke*de,yt=Ke*G,we=0;we<G;we++)Le=yt+we<<2,ft=3*(_t=U[ot+(we>>1)]>>4-((1&we)<<2)&15),I[Le]=We[ft],I[Le+1]=We[ft+1],I[Le+2]=We[ft+2],I[Le+3]=_t<Ne?qe[_t]:255;if(ge==8)for(we=0;we<te;we++){var _t;Le=we<<2,ft=3*(_t=U[we]),I[Le]=We[ft],I[Le+1]=We[ft+1],I[Le+2]=We[ft+2],I[Le+3]=_t<Ne?qe[_t]:255}}else if(ne==4){if(ge==8)for(we=0;we<te;we++){Le=we<<2;var Je=U[Qe=we<<1];I[Le]=Je,I[Le+1]=Je,I[Le+2]=Je,I[Le+3]=U[Qe+1]}if(ge==16)for(we=0;we<te;we++){var Qe;Le=we<<2,Je=U[Qe=we<<2],I[Le]=Je,I[Le+1]=Je,I[Le+2]=Je,I[Le+3]=U[Qe+2]}}else if(ne==0)for(Oe=re.tabs.tRNS?re.tabs.tRNS:-1,Ke=0;Ke<V;Ke++){var tt=Ke*de,ht=Ke*G;if(ge==1)for(var it=0;it<G;it++){var pt=(Je=255*(U[tt+(it>>>3)]>>>7-(7&it)&1))==255*Oe?0:255;_e[ht+it]=pt<<24|Je<<16|Je<<8|Je}else if(ge==2)for(it=0;it<G;it++)pt=(Je=85*(U[tt+(it>>>2)]>>>6-((3&it)<<1)&3))==85*Oe?0:255,_e[ht+it]=pt<<24|Je<<16|Je<<8|Je;else if(ge==4)for(it=0;it<G;it++)pt=(Je=17*(U[tt+(it>>>1)]>>>4-((1&it)<<2)&15))==17*Oe?0:255,_e[ht+it]=pt<<24|Je<<16|Je<<8|Je;else if(ge==8)for(it=0;it<G;it++)pt=(Je=U[tt+it])==Oe?0:255,_e[ht+it]=pt<<24|Je<<16|Je<<8|Je;else if(ge==16)for(it=0;it<G;it++)Je=U[tt+(it<<1)],pt=ye(U,tt+(it<<we))==Oe?0:255,_e[ht+it]=pt<<24|Je<<16|Je<<8|Je}return I},UPNG.decode=function(U){for(var G,V=new Uint8Array(U),re=8,te=UPNG._bin,Q=te.readUshort,de=te.readUint,I={tabs:{},frames:[]},_e=new Uint8Array(V.length),ne=0,ge=0,ye=[137,80,78,71,13,10,26,10],xe=0;xe<8;xe++)if(V[xe]!=ye[xe])throw"The input is not a PNG file!";for(;re<V.length;){var we=te.readUint(V,re);re+=4;var ke=te.readASCII(V,re,4);if(re+=4,ke=="IHDR")UPNG.decode._IHDR(V,re,I);else if(ke=="CgBI")I.tabs[ke]=V.slice(re,re+4);else if(ke=="IDAT"){for(xe=0;xe<we;xe++)_e[ne+xe]=V[re+xe];ne+=we}else if(ke=="acTL")I.tabs[ke]={num_frames:de(V,re),num_plays:de(V,re+4)},G=new Uint8Array(V.length);else if(ke=="fcTL"){var Se;ge!=0&&((Se=I.frames[I.frames.length-1]).data=UPNG.decode._decompress(I,G.slice(0,ge),Se.rect.width,Se.rect.height),ge=0);var Oe={x:de(V,re+12),y:de(V,re+16),width:de(V,re+4),height:de(V,re+8)},Fe=Q(V,re+22);Fe=Q(V,re+20)/(Fe==0?100:Fe);var ze={rect:Oe,delay:Math.round(1e3*Fe),dispose:V[re+24],blend:V[re+25]};I.frames.push(ze)}else if(ke=="fdAT"){for(xe=0;xe<we-4;xe++)G[ge+xe]=V[re+xe+4];ge+=we-4}else if(ke=="pHYs")I.tabs[ke]=[te.readUint(V,re),te.readUint(V,re+4),V[re+8]];else if(ke=="cHRM")for(I.tabs[ke]=[],xe=0;xe<8;xe++)I.tabs[ke].push(te.readUint(V,re+4*xe));else if(ke=="tEXt"||ke=="zTXt"){I.tabs[ke]==null&&(I.tabs[ke]={});var Le=te.nextZero(V,re),We=te.readASCII(V,re,Le-re),qe=re+we-Le-1;if(ke=="tEXt")ot=te.readASCII(V,Le+1,qe);else{var Ne=UPNG.decode._inflate(V.slice(Le+2,Le+2+qe));ot=te.readUTF8(Ne,0,Ne.length)}I.tabs[ke][We]=ot}else if(ke=="iTXt"){I.tabs[ke]==null&&(I.tabs[ke]={}),Le=0;var Ke=re;Le=te.nextZero(V,Ke),We=te.readASCII(V,Ke,Le-Ke);var ot,yt=V[Ke=Le+1];V[Ke+1],Ke+=2,Le=te.nextZero(V,Ke),te.readASCII(V,Ke,Le-Ke),Ke=Le+1,Le=te.nextZero(V,Ke),te.readUTF8(V,Ke,Le-Ke),qe=we-((Ke=Le+1)-re),yt==0?ot=te.readUTF8(V,Ke,qe):(Ne=UPNG.decode._inflate(V.slice(Ke,Ke+qe)),ot=te.readUTF8(Ne,0,Ne.length)),I.tabs[ke][We]=ot}else if(ke=="PLTE")I.tabs[ke]=te.readBytes(V,re,we);else if(ke=="hIST"){var ft=I.tabs.PLTE.length/3;for(I.tabs[ke]=[],xe=0;xe<ft;xe++)I.tabs[ke].push(Q(V,re+2*xe))}else if(ke=="tRNS")I.ctype==3?I.tabs[ke]=te.readBytes(V,re,we):I.ctype==0?I.tabs[ke]=Q(V,re):I.ctype==2&&(I.tabs[ke]=[Q(V,re),Q(V,re+2),Q(V,re+4)]);else if(ke=="gAMA")I.tabs[ke]=te.readUint(V,re)/1e5;else if(ke=="sRGB")I.tabs[ke]=V[re];else if(ke=="bKGD")I.ctype==0||I.ctype==4?I.tabs[ke]=[Q(V,re)]:I.ctype==2||I.ctype==6?I.tabs[ke]=[Q(V,re),Q(V,re+2),Q(V,re+4)]:I.ctype==3&&(I.tabs[ke]=V[re]);else if(ke=="IEND")break;re+=we,te.readUint(V,re),re+=4}return ge!=0&&((Se=I.frames[I.frames.length-1]).data=UPNG.decode._decompress(I,G.slice(0,ge),Se.rect.width,Se.rect.height),ge=0),I.data=UPNG.decode._decompress(I,_e,I.width,I.height),delete I.compress,delete I.interlace,delete I.filter,I},UPNG.decode._decompress=function(U,G,V,re){var te=UPNG.decode._getBPP(U),Q=Math.ceil(V*te/8),de=new Uint8Array((Q+1+U.interlace)*re);return G=U.tabs.CgBI?UPNG.inflateRaw(G,de):UPNG.decode._inflate(G,de),U.interlace==0?G=UPNG.decode._filterZero(G,U,0,V,re):U.interlace==1&&(G=UPNG.decode._readInterlace(G,U)),G},UPNG.decode._inflate=function(U,G){return UPNG.inflateRaw(new Uint8Array(U.buffer,2,U.length-6),G)},UPNG.inflateRaw=(H={},H.H={},H.H.N=function(U,G){var V,re,te=Uint8Array,Q=0,de=0,I=0,_e=0,ne=0,ge=0,ye=0,xe=0,we=0;if(U[0]==3&&U[1]==0)return G||new te(0);var ke=H.H,Se=ke.b,Oe=ke.e,Fe=ke.R,ze=ke.n,Le=ke.A,We=ke.Z,qe=ke.m,Ne=G==null;for(Ne&&(G=new te(U.length>>>2<<5));Q==0;)if(Q=Se(U,we,1),de=Se(U,we+1,2),we+=3,de!=0){if(Ne&&(G=H.H.W(G,xe+(1<<17))),de==1&&(V=qe.J,re=qe.h,ge=511,ye=31),de==2){I=Oe(U,we,5)+257,_e=Oe(U,we+5,5)+1,ne=Oe(U,we+10,4)+4,we+=14;for(var Ke=1,ot=0;ot<38;ot+=2)qe.Q[ot]=0,qe.Q[ot+1]=0;for(ot=0;ot<ne;ot++){var yt=Oe(U,we+3*ot,3);qe.Q[1+(qe.X[ot]<<1)]=yt,yt>Ke&&(Ke=yt)}we+=3*ne,ze(qe.Q,Ke),Le(qe.Q,Ke,qe.u),V=qe.w,re=qe.d,we=Fe(qe.u,(1<<Ke)-1,I+_e,U,we,qe.v);var ft=ke.V(qe.v,0,I,qe.C);ge=(1<<ft)-1;var _t=ke.V(qe.v,I,_e,qe.D);ye=(1<<_t)-1,ze(qe.C,ft),Le(qe.C,ft,V),ze(qe.D,_t),Le(qe.D,_t,re)}for(;;){var Je=V[We(U,we)&ge];we+=15&Je;var Qe=Je>>>4;if(Qe>>>8==0)G[xe++]=Qe;else{if(Qe==256)break;var tt=xe+Qe-254;if(Qe>264){var ht=qe.q[Qe-257];tt=xe+(ht>>>3)+Oe(U,we,7&ht),we+=7&ht}var it=re[We(U,we)&ye];we+=15&it;var pt=it>>>4,vt=qe.c[pt],ut=(vt>>>4)+Se(U,we,15&vt);for(we+=15&vt;xe<tt;)G[xe]=G[xe++-ut],G[xe]=G[xe++-ut],G[xe]=G[xe++-ut],G[xe]=G[xe++-ut];xe=tt}}}else{(7&we)!=0&&(we+=8-(7&we));var Nt=4+(we>>>3),at=U[Nt-4]|U[Nt-3]<<8;Ne&&(G=H.H.W(G,xe+at)),G.set(new te(U.buffer,U.byteOffset+Nt,at),xe),we=Nt+at<<3,xe+=at}return G.length==xe?G:G.slice(0,xe)},H.H.W=function(U,G){var V=U.length;if(G<=V)return U;var re=new Uint8Array(V<<1);return re.set(U,0),re},H.H.R=function(U,G,V,re,te,Q){for(var de=H.H.e,I=H.H.Z,_e=0;_e<V;){var ne=U[I(re,te)&G];te+=15&ne;var ge=ne>>>4;if(ge<=15)Q[_e]=ge,_e++;else{var ye=0,xe=0;ge==16?(xe=3+de(re,te,2),te+=2,ye=Q[_e-1]):ge==17?(xe=3+de(re,te,3),te+=3):ge==18&&(xe=11+de(re,te,7),te+=7);for(var we=_e+xe;_e<we;)Q[_e]=ye,_e++}}return te},H.H.V=function(U,G,V,re){for(var te=0,Q=0,de=re.length>>>1;Q<V;){var I=U[Q+G];re[Q<<1]=0,re[1+(Q<<1)]=I,I>te&&(te=I),Q++}for(;Q<de;)re[Q<<1]=0,re[1+(Q<<1)]=0,Q++;return te},H.H.n=function(U,G){for(var V,re,te,Q,de=H.H.m,I=U.length,_e=de.j,ne=0;ne<=G;ne++)_e[ne]=0;for(ne=1;ne<I;ne+=2)_e[U[ne]]++;var ge=de.K;for(V=0,_e[0]=0,re=1;re<=G;re++)V=V+_e[re-1]<<1,ge[re]=V;for(te=0;te<I;te+=2)(Q=U[te+1])!=0&&(U[te]=ge[Q],ge[Q]++)},H.H.A=function(U,G,V){for(var re=U.length,te=H.H.m.r,Q=0;Q<re;Q+=2)if(U[Q+1]!=0)for(var de=Q>>1,I=U[Q+1],_e=de<<4|I,ne=G-I,ge=U[Q]<<ne,ye=ge+(1<<ne);ge!=ye;)V[te[ge]>>>15-G]=_e,ge++},H.H.l=function(U,G){for(var V=H.H.m.r,re=15-G,te=0;te<U.length;te+=2){var Q=U[te]<<G-U[te+1];U[te]=V[Q]>>>re}},H.H.M=function(U,G,V){V<<=7&G;var re=G>>>3;U[re]|=V,U[re+1]|=V>>>8},H.H.I=function(U,G,V){V<<=7&G;var re=G>>>3;U[re]|=V,U[re+1]|=V>>>8,U[re+2]|=V>>>16},H.H.e=function(U,G,V){return(U[G>>>3]|U[1+(G>>>3)]<<8)>>>(7&G)&(1<<V)-1},H.H.b=function(U,G,V){return(U[G>>>3]|U[1+(G>>>3)]<<8|U[2+(G>>>3)]<<16)>>>(7&G)&(1<<V)-1},H.H.Z=function(U,G){return(U[G>>>3]|U[1+(G>>>3)]<<8|U[2+(G>>>3)]<<16)>>>(7&G)},H.H.i=function(U,G){return(U[G>>>3]|U[1+(G>>>3)]<<8|U[2+(G>>>3)]<<16|U[3+(G>>>3)]<<24)>>>(7&G)},H.H.m=(N=Uint16Array,W=Uint32Array,{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(32768),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(65536),g:new N(32768)}),function(){for(var U=H.H.m,G=0;G<32768;G++){var V=G;V=(4278255360&(V=(4042322160&(V=(3435973836&(V=(2863311530&V)>>>1|(1431655765&V)<<1))>>>2|(858993459&V)<<2))>>>4|(252645135&V)<<4))>>>8|(16711935&V)<<8,U.r[G]=(V>>>16|V<<16)>>>17}function re(te,Q,de){for(;Q--!=0;)te.push(0,de)}for(G=0;G<32;G++)U.q[G]=U.S[G]<<3|U.T[G],U.c[G]=U.p[G]<<4|U.z[G];re(U._,144,8),re(U._,112,9),re(U._,24,7),re(U._,8,8),H.H.n(U._,9),H.H.A(U._,9,U.J),H.H.l(U._,9),re(U.$,32,5),H.H.n(U.$,5),H.H.A(U.$,5,U.h),H.H.l(U.$,5),re(U.Q,19,0),re(U.C,286,0),re(U.D,30,0),re(U.v,320,0)}(),H.H.N),UPNG.decode._readInterlace=function(U,G){for(var V=G.width,re=G.height,te=UPNG.decode._getBPP(G),Q=te>>3,de=Math.ceil(V*te/8),I=new Uint8Array(re*de),_e=0,ne=[0,0,4,0,2,0,1],ge=[0,4,0,2,0,1,0],ye=[8,8,8,4,4,2,2],xe=[8,8,4,4,2,2,1],we=0;we<7;){for(var ke=ye[we],Se=xe[we],Oe=0,Fe=0,ze=ne[we];ze<re;)ze+=ke,Fe++;for(var Le=ge[we];Le<V;)Le+=Se,Oe++;var We=Math.ceil(Oe*te/8);UPNG.decode._filterZero(U,G,_e,Oe,Fe);for(var qe=0,Ne=ne[we];Ne<re;){for(var Ke=ge[we],ot=_e+qe*We<<3;Ke<V;){var yt;if(te==1&&(yt=(yt=U[ot>>3])>>7-(7&ot)&1,I[Ne*de+(Ke>>3)]|=yt<<7-((7&Ke)<<0)),te==2&&(yt=(yt=U[ot>>3])>>6-(7&ot)&3,I[Ne*de+(Ke>>2)]|=yt<<6-((3&Ke)<<1)),te==4&&(yt=(yt=U[ot>>3])>>4-(7&ot)&15,I[Ne*de+(Ke>>1)]|=yt<<4-((1&Ke)<<2)),te>=8)for(var ft=Ne*de+Ke*Q,_t=0;_t<Q;_t++)I[ft+_t]=U[(ot>>3)+_t];ot+=te,Ke+=Se}qe++,Ne+=ke}Oe*Fe!=0&&(_e+=Fe*(1+We)),we+=1}return I},UPNG.decode._getBPP=function(U){return[1,null,3,1,2,null,4][U.ctype]*U.depth},UPNG.decode._filterZero=function(U,G,V,re,te){var Q=UPNG.decode._getBPP(G),de=Math.ceil(re*Q/8),I=UPNG.decode._paeth;Q=Math.ceil(Q/8);var _e=0,ne=1,ge=U[V],ye=0;if(ge>1&&(U[V]=[0,0,1][ge-2]),ge==3)for(ye=Q;ye<de;ye++)U[ye+1]=U[ye+1]+(U[ye+1-Q]>>>1)&255;for(var xe=0;xe<te;xe++)if(ye=0,(ge=U[(ne=(_e=V+xe*de)+xe+1)-1])==0)for(;ye<de;ye++)U[_e+ye]=U[ne+ye];else if(ge==1){for(;ye<Q;ye++)U[_e+ye]=U[ne+ye];for(;ye<de;ye++)U[_e+ye]=U[ne+ye]+U[_e+ye-Q]}else if(ge==2)for(;ye<de;ye++)U[_e+ye]=U[ne+ye]+U[_e+ye-de];else if(ge==3){for(;ye<Q;ye++)U[_e+ye]=U[ne+ye]+(U[_e+ye-de]>>>1);for(;ye<de;ye++)U[_e+ye]=U[ne+ye]+(U[_e+ye-de]+U[_e+ye-Q]>>>1)}else{for(;ye<Q;ye++)U[_e+ye]=U[ne+ye]+I(0,U[_e+ye-de],0);for(;ye<de;ye++)U[_e+ye]=U[ne+ye]+I(U[_e+ye-Q],U[_e+ye-de],U[_e+ye-Q-de])}return U},UPNG.decode._paeth=function(U,G,V){var re=U+G-V,te=re-U,Q=re-G,de=re-V;return te*te<=Q*Q&&te*te<=de*de?U:Q*Q<=de*de?G:V},UPNG.decode._IHDR=function(U,G,V){var re=UPNG._bin;V.width=re.readUint(U,G),G+=4,V.height=re.readUint(U,G),G+=4,V.depth=U[G],G++,V.ctype=U[G],G++,V.compress=U[G],G++,V.filter=U[G],G++,V.interlace=U[G],G++},UPNG._bin={nextZero:function(G,V){for(;G[V]!=0;)V++;return V},readUshort:function(G,V){return G[V]<<8|G[V+1]},writeUshort:function(G,V,re){G[V]=re>>8&255,G[V+1]=255&re},readUint:function(G,V){return 16777216*G[V]+(G[V+1]<<16|G[V+2]<<8|G[V+3])},writeUint:function(G,V,re){G[V]=re>>24&255,G[V+1]=re>>16&255,G[V+2]=re>>8&255,G[V+3]=255&re},readASCII:function(G,V,re){for(var te="",Q=0;Q<re;Q++)te+=String.fromCharCode(G[V+Q]);return te},writeASCII:function(G,V,re){for(var te=0;te<re.length;te++)G[V+te]=re.charCodeAt(te)},readBytes:function(G,V,re){for(var te=[],Q=0;Q<re;Q++)te.push(G[V+Q]);return te},pad:function(G){return G.length<2?"0".concat(G):G},readUTF8:function(G,V,re){for(var te,Q="",de=0;de<re;de++)Q+="%".concat(UPNG._bin.pad(G[V+de].toString(16)));try{te=decodeURIComponent(Q)}catch{return UPNG._bin.readASCII(G,V,re)}return te}},UPNG._copyTile=function(U,G,V,re,te,Q,de,I,_e){for(var ne=Math.min(G,te),ge=Math.min(V,Q),ye=0,xe=0,we=0;we<ge;we++)for(var ke=0;ke<ne;ke++)if(de>=0&&I>=0?(ye=we*G+ke<<2,xe=(I+we)*te+de+ke<<2):(ye=(-I+we)*G-de+ke<<2,xe=we*te+ke<<2),_e==0)re[xe]=U[ye],re[xe+1]=U[ye+1],re[xe+2]=U[ye+2],re[xe+3]=U[ye+3];else if(_e==1){var Se=U[ye+3]*.00392156862745098,Oe=U[ye]*Se,Fe=U[ye+1]*Se,ze=U[ye+2]*Se,Le=re[xe+3]*(1/255),We=re[xe]*Le,qe=re[xe+1]*Le,Ne=re[xe+2]*Le,Ke=1-Se,ot=Se+Le*Ke,yt=ot==0?0:1/ot;re[xe+3]=255*ot,re[xe+0]=(Oe+We*Ke)*yt,re[xe+1]=(Fe+qe*Ke)*yt,re[xe+2]=(ze+Ne*Ke)*yt}else if(_e==2)Se=U[ye+3],Oe=U[ye],Fe=U[ye+1],ze=U[ye+2],Le=re[xe+3],We=re[xe],qe=re[xe+1],Ne=re[xe+2],Se==Le&&Oe==We&&Fe==qe&&ze==Ne?(re[xe]=0,re[xe+1]=0,re[xe+2]=0,re[xe+3]=0):(re[xe]=Oe,re[xe+1]=Fe,re[xe+2]=ze,re[xe+3]=Se);else if(_e==3){if(Se=U[ye+3],Oe=U[ye],Fe=U[ye+1],ze=U[ye+2],Le=re[xe+3],We=re[xe],qe=re[xe+1],Ne=re[xe+2],Se==Le&&Oe==We&&Fe==qe&&ze==Ne)continue;if(Se<220&&Le>20)return!1}return!0},UPNG.encode=function(U,G,V,re,te,Q,de){re==null&&(re=0),de==null&&(de=!1);var I=UPNG.encode.compress(U,G,V,re,[!1,!1,!1,0,de]);return UPNG.encode.compressPNG(I,-1),UPNG.encode._main(I,G,V,te,Q)},UPNG.encodeLL=function(U,G,V,re,te,Q,de,I){for(var _e={ctype:0+(re==1?0:2)+(te==0?0:4),depth:Q,frames:[]},ne=(re+te)*Q,ge=ne*G,ye=0;ye<U.length;ye++)_e.frames.push({rect:{x:0,y:0,width:G,height:V},img:new Uint8Array(U[ye]),blend:0,dispose:1,bpp:Math.ceil(ne/8),bpl:Math.ceil(ge/8)});return UPNG.encode.compressPNG(_e,0,!0),UPNG.encode._main(_e,G,V,de,I)},UPNG.encode._main=function(U,G,V,re,te){te==null&&(te={});var Q=UPNG.crc.crc,de=UPNG._bin.writeUint,I=UPNG._bin.writeUshort,_e=UPNG._bin.writeASCII,ne=8,ge=U.frames.length>1,ye=!1,xe=33+(ge?20:0);if(te.sRGB!=null&&(xe+=13),te.pHYs!=null&&(xe+=21),U.ctype==3){for(var we=U.plte.length,ke=0;ke<we;ke++)U.plte[ke]>>>24!=255&&(ye=!0);xe+=8+3*we+4+(ye?8+1*we+4:0)}for(var Se=0;Se<U.frames.length;Se++)ge&&(xe+=38),xe+=(ot=U.frames[Se]).cimg.length+12,Se!=0&&(xe+=4);xe+=12;var Oe=new Uint8Array(xe),Fe=[137,80,78,71,13,10,26,10];for(ke=0;ke<8;ke++)Oe[ke]=Fe[ke];if(de(Oe,ne,13),_e(Oe,ne+=4,"IHDR"),de(Oe,ne+=4,G),de(Oe,ne+=4,V),Oe[ne+=4]=U.depth,Oe[++ne]=U.ctype,Oe[++ne]=0,Oe[++ne]=0,Oe[++ne]=0,de(Oe,++ne,Q(Oe,ne-17,17)),ne+=4,te.sRGB!=null&&(de(Oe,ne,1),_e(Oe,ne+=4,"sRGB"),Oe[ne+=4]=te.sRGB,de(Oe,++ne,Q(Oe,ne-5,5)),ne+=4),te.pHYs!=null&&(de(Oe,ne,9),_e(Oe,ne+=4,"pHYs"),de(Oe,ne+=4,te.pHYs[0]),de(Oe,ne+=4,te.pHYs[1]),Oe[ne+=4]=te.pHYs[2],de(Oe,++ne,Q(Oe,ne-13,13)),ne+=4),ge&&(de(Oe,ne,8),_e(Oe,ne+=4,"acTL"),de(Oe,ne+=4,U.frames.length),de(Oe,ne+=4,te.loop!=null?te.loop:0),de(Oe,ne+=4,Q(Oe,ne-12,12)),ne+=4),U.ctype==3){for(de(Oe,ne,3*(we=U.plte.length)),_e(Oe,ne+=4,"PLTE"),ne+=4,ke=0;ke<we;ke++){var ze=3*ke,Le=U.plte[ke],We=255&Le,qe=Le>>>8&255,Ne=Le>>>16&255;Oe[ne+ze+0]=We,Oe[ne+ze+1]=qe,Oe[ne+ze+2]=Ne}if(de(Oe,ne+=3*we,Q(Oe,ne-3*we-4,3*we+4)),ne+=4,ye){for(de(Oe,ne,we),_e(Oe,ne+=4,"tRNS"),ne+=4,ke=0;ke<we;ke++)Oe[ne+ke]=U.plte[ke]>>>24&255;de(Oe,ne+=we,Q(Oe,ne-we-4,we+4)),ne+=4}}var Ke=0;for(Se=0;Se<U.frames.length;Se++){var ot=U.frames[Se];ge&&(de(Oe,ne,26),_e(Oe,ne+=4,"fcTL"),de(Oe,ne+=4,Ke++),de(Oe,ne+=4,ot.rect.width),de(Oe,ne+=4,ot.rect.height),de(Oe,ne+=4,ot.rect.x),de(Oe,ne+=4,ot.rect.y),I(Oe,ne+=4,re[Se]),I(Oe,ne+=2,1e3),Oe[ne+=2]=ot.dispose,Oe[++ne]=ot.blend,de(Oe,++ne,Q(Oe,ne-30,30)),ne+=4);var yt=ot.cimg;de(Oe,ne,(we=yt.length)+(Se==0?0:4));var ft=ne+=4;_e(Oe,ne,Se==0?"IDAT":"fdAT"),ne+=4,Se!=0&&(de(Oe,ne,Ke++),ne+=4),Oe.set(yt,ne),de(Oe,ne+=we,Q(Oe,ft,ne-ft)),ne+=4}return de(Oe,ne,0),_e(Oe,ne+=4,"IEND"),de(Oe,ne+=4,Q(Oe,ne-4,4)),ne+=4,Oe.buffer},UPNG.encode.compressPNG=function(U,G,V){for(var re=0;re<U.frames.length;re++){var te=U.frames[re];te.rect.width;var Q=te.rect.height,de=new Uint8Array(Q*te.bpl+Q);te.cimg=UPNG.encode._filterZero(te.img,Q,te.bpp,te.bpl,de,G,V)}},UPNG.encode.compress=function(U,G,V,re,te){for(var Q=te[0],de=te[1],I=te[2],_e=te[3],ne=te[4],ge=6,ye=8,xe=255,we=0;we<U.length;we++)for(var ke=new Uint8Array(U[we]),Se=ke.length,Oe=0;Oe<Se;Oe+=4)xe&=ke[Oe+3];var Fe=xe!=255,ze=UPNG.encode.framize(U,G,V,Q,de,I),Le={},We=[],qe=[];if(re!=0){var Ne=[];for(Oe=0;Oe<ze.length;Oe++)Ne.push(ze[Oe].img.buffer);var Ke=UPNG.encode.concatRGBA(Ne),ot=UPNG.quantize(Ke,re),yt=0,ft=new Uint8Array(ot.abuf);for(Oe=0;Oe<ze.length;Oe++){var _t=(Yt=ze[Oe].img).length;for(qe.push(new Uint8Array(ot.inds.buffer,yt>>2,_t>>2)),we=0;we<_t;we+=4)Yt[we]=ft[yt+we],Yt[we+1]=ft[yt+we+1],Yt[we+2]=ft[yt+we+2],Yt[we+3]=ft[yt+we+3];yt+=_t}for(Oe=0;Oe<ot.plte.length;Oe++)We.push(ot.plte[Oe].est.rgba)}else for(we=0;we<ze.length;we++){var Je=ze[we],Qe=new Uint32Array(Je.img.buffer),tt=Je.rect.width,ht=(Se=Qe.length,new Uint8Array(Se));for(qe.push(ht),Oe=0;Oe<Se;Oe++){var it=Qe[Oe];if(Oe!=0&&it==Qe[Oe-1])ht[Oe]=ht[Oe-1];else if(Oe>tt&&it==Qe[Oe-tt])ht[Oe]=ht[Oe-tt];else{var pt=Le[it];if(pt==null&&(Le[it]=pt=We.length,We.push(it),We.length>=300))break;ht[Oe]=pt}}}var vt=We.length;for(vt<=256&&ne==0&&(ye=vt<=2?1:vt<=4?2:vt<=16?4:8,ye=Math.max(ye,_e)),we=0;we<ze.length;we++){(Je=ze[we]).rect.x,Je.rect.y,tt=Je.rect.width;var ut=Je.rect.height,Nt=Je.img;new Uint32Array(Nt.buffer);var at=4*tt,Mt=4;if(vt<=256&&ne==0){at=Math.ceil(ye*tt/8);for(var nn=new Uint8Array(at*ut),Tn=qe[we],Jt=0;Jt<ut;Jt++){Oe=Jt*at;var on=Jt*tt;if(ye==8)for(var Vt=0;Vt<tt;Vt++)nn[Oe+Vt]=Tn[on+Vt];else if(ye==4)for(Vt=0;Vt<tt;Vt++)nn[Oe+(Vt>>1)]|=Tn[on+Vt]<<4-4*(1&Vt);else if(ye==2)for(Vt=0;Vt<tt;Vt++)nn[Oe+(Vt>>2)]|=Tn[on+Vt]<<6-2*(3&Vt);else if(ye==1)for(Vt=0;Vt<tt;Vt++)nn[Oe+(Vt>>3)]|=Tn[on+Vt]<<7-1*(7&Vt)}Nt=nn,ge=3,Mt=1}else if(Fe==0&&ze.length==1){nn=new Uint8Array(tt*ut*3);var Rt=tt*ut;for(Oe=0;Oe<Rt;Oe++){var Yt,un=4*Oe;nn[Yt=3*Oe]=Nt[un],nn[Yt+1]=Nt[un+1],nn[Yt+2]=Nt[un+2]}Nt=nn,ge=2,Mt=3,at=3*tt}Je.img=Nt,Je.bpl=at,Je.bpp=Mt}return{ctype:ge,depth:ye,plte:We,frames:ze}},UPNG.encode.framize=function(U,G,V,re,te,Q){for(var de=[],I=0;I<U.length;I++){var _e,ne=new Uint8Array(U[I]),ge=new Uint32Array(ne.buffer),ye=0,xe=0,we=G,ke=V,Se=re?1:0;if(I!=0){for(var Oe=Q||re||I==1||de[I-2].dispose!=0?1:2,Fe=0,ze=1e9,Le=0;Le<Oe;Le++){for(var We=new Uint8Array(U[I-1-Le]),qe=new Uint32Array(U[I-1-Le]),Ne=G,Ke=V,ot=-1,yt=-1,ft=0;ft<V;ft++)for(var _t=0;_t<G;_t++)ge[vt=ft*G+_t]!=qe[vt]&&(_t<Ne&&(Ne=_t),_t>ot&&(ot=_t),ft<Ke&&(Ke=ft),ft>yt&&(yt=ft));ot==-1&&(Ne=Ke=ot=yt=0),te&&((1&Ne)==1&&Ne--,(1&Ke)==1&&Ke--);var Je=(ot-Ne+1)*(yt-Ke+1);Je<ze&&(ze=Je,Fe=Le,ye=Ne,xe=Ke,we=ot-Ne+1,ke=yt-Ke+1)}We=new Uint8Array(U[I-1-Fe]),Fe==1&&(de[I-1].dispose=2),_e=new Uint8Array(we*ke*4),UPNG._copyTile(We,G,V,_e,we,ke,-ye,-xe,0),(Se=UPNG._copyTile(ne,G,V,_e,we,ke,-ye,-xe,3)?1:0)==1?UPNG.encode._prepareDiff(ne,G,V,_e,{x:ye,y:xe,width:we,height:ke}):UPNG._copyTile(ne,G,V,_e,we,ke,-ye,-xe,0)}else _e=ne.slice(0);de.push({rect:{x:ye,y:xe,width:we,height:ke},img:_e,blend:Se,dispose:0})}if(re){for(I=0;I<de.length;I++)if((ut=de[I]).blend!=1){var Qe=ut.rect,tt=de[I-1].rect,ht=Math.min(Qe.x,tt.x),it=Math.min(Qe.y,tt.y),pt={x:ht,y:it,width:Math.max(Qe.x+Qe.width,tt.x+tt.width)-ht,height:Math.max(Qe.y+Qe.height,tt.y+tt.height)-it};de[I-1].dispose=1,I-1!=0&&UPNG.encode._updateFrame(U,G,V,de,I-1,pt,te),UPNG.encode._updateFrame(U,G,V,de,I,pt,te)}}if(U.length!=1)for(var vt=0;vt<de.length;vt++){var ut;(ut=de[vt]).rect.width*ut.rect.height}return de},UPNG.encode._updateFrame=function(U,G,V,re,te,Q,de){for(var I=Uint8Array,_e=Uint32Array,ne=new I(U[te-1]),ge=new _e(U[te-1]),ye=te+1<U.length?new I(U[te+1]):null,xe=new I(U[te]),we=new _e(xe.buffer),ke=G,Se=V,Oe=-1,Fe=-1,ze=0;ze<Q.height;ze++)for(var Le=0;Le<Q.width;Le++){var We=Q.x+Le,qe=Q.y+ze,Ne=qe*G+We,Ke=we[Ne];Ke==0||re[te-1].dispose==0&&ge[Ne]==Ke&&(ye==null||ye[4*Ne+3]!=0)||(We<ke&&(ke=We),We>Oe&&(Oe=We),qe<Se&&(Se=qe),qe>Fe&&(Fe=qe))}Oe==-1&&(ke=Se=Oe=Fe=0),de&&((1&ke)==1&&ke--,(1&Se)==1&&Se--),Q={x:ke,y:Se,width:Oe-ke+1,height:Fe-Se+1};var ot=re[te];ot.rect=Q,ot.blend=1,ot.img=new Uint8Array(Q.width*Q.height*4),re[te-1].dispose==0?(UPNG._copyTile(ne,G,V,ot.img,Q.width,Q.height,-Q.x,-Q.y,0),UPNG.encode._prepareDiff(xe,G,V,ot.img,Q)):UPNG._copyTile(xe,G,V,ot.img,Q.width,Q.height,-Q.x,-Q.y,0)},UPNG.encode._prepareDiff=function(U,G,V,re,te){UPNG._copyTile(U,G,V,re,te.width,te.height,-te.x,-te.y,2)},UPNG.encode._filterZero=function(U,G,V,re,te,Q,de){var I,_e=[],ne=[0,1,2,3,4];Q!=-1?ne=[Q]:(G*re>5e5||V==1)&&(ne=[0]),de&&(I={level:0});for(var ge,ye=UZIP,xe=0;xe<ne.length;xe++){for(var we=0;we<G;we++)UPNG.encode._filterLine(te,U,we,re,V,ne[xe]);_e.push(ye.deflate(te,I))}var ke=1e9;for(xe=0;xe<_e.length;xe++)_e[xe].length<ke&&(ge=xe,ke=_e[xe].length);return _e[ge]},UPNG.encode._filterLine=function(U,G,V,re,te,Q){var de=V*re,I=de+V,_e=UPNG.decode._paeth;if(U[I]=Q,I++,Q==0)if(re<500)for(var ne=0;ne<re;ne++)U[I+ne]=G[de+ne];else U.set(new Uint8Array(G.buffer,de,re),I);else if(Q==1){for(ne=0;ne<te;ne++)U[I+ne]=G[de+ne];for(ne=te;ne<re;ne++)U[I+ne]=G[de+ne]-G[de+ne-te]+256&255}else if(V==0){for(ne=0;ne<te;ne++)U[I+ne]=G[de+ne];if(Q==2)for(ne=te;ne<re;ne++)U[I+ne]=G[de+ne];if(Q==3)for(ne=te;ne<re;ne++)U[I+ne]=G[de+ne]-(G[de+ne-te]>>1)+256&255;if(Q==4)for(ne=te;ne<re;ne++)U[I+ne]=G[de+ne]-_e(G[de+ne-te],0,0)+256&255}else{if(Q==2)for(ne=0;ne<re;ne++)U[I+ne]=G[de+ne]+256-G[de+ne-re]&255;if(Q==3){for(ne=0;ne<te;ne++)U[I+ne]=G[de+ne]+256-(G[de+ne-re]>>1)&255;for(ne=te;ne<re;ne++)U[I+ne]=G[de+ne]+256-(G[de+ne-re]+G[de+ne-te]>>1)&255}if(Q==4){for(ne=0;ne<te;ne++)U[I+ne]=G[de+ne]+256-_e(0,G[de+ne-re],0)&255;for(ne=te;ne<re;ne++)U[I+ne]=G[de+ne]+256-_e(G[de+ne-te],G[de+ne-re],G[de+ne-te-re])&255}}},UPNG.crc={table:function(){for(var U=new Uint32Array(256),G=0;G<256;G++){for(var V=G,re=0;re<8;re++)1&V?V=3988292384^V>>>1:V>>>=1;U[G]=V}return U}(),update:function(G,V,re,te){for(var Q=0;Q<te;Q++)G=UPNG.crc.table[255&(G^V[re+Q])]^G>>>8;return G},crc:function(G,V,re){return 4294967295^UPNG.crc.update(4294967295,G,V,re)}},UPNG.quantize=function(U,G){var V,re=new Uint8Array(U),te=re.slice(0),Q=new Uint32Array(te.buffer),de=UPNG.quantize.getKDtree(te,G),I=de[0],_e=de[1],ne=UPNG.quantize.planeDst,ge=re,ye=Q,xe=ge.length,we=new Uint8Array(re.length>>2);if(re.length<2e7)for(var ke=0;ke<xe;ke+=4){var Se=ge[ke]*.00392156862745098,Oe=ge[ke+1]*(1/255),Fe=ge[ke+2]*(1/255),ze=ge[ke+3]*(1/255);V=UPNG.quantize.getNearest(I,Se,Oe,Fe,ze),we[ke>>2]=V.ind,ye[ke>>2]=V.est.rgba}else for(ke=0;ke<xe;ke+=4){for(Se=ge[ke]*(1/255),Oe=ge[ke+1]*(1/255),Fe=ge[ke+2]*(1/255),ze=ge[ke+3]*(1/255),V=I;V.left;)V=ne(V.est,Se,Oe,Fe,ze)<=0?V.left:V.right;we[ke>>2]=V.ind,ye[ke>>2]=V.est.rgba}return{abuf:te.buffer,inds:we,plte:_e}},UPNG.quantize.getKDtree=function(U,G,V){V==null&&(V=1e-4);var re=new Uint32Array(U.buffer),te={i0:0,i1:U.length,bst:null,est:null,tdst:0,left:null,right:null};te.bst=UPNG.quantize.stats(U,te.i0,te.i1),te.est=UPNG.quantize.estats(te.bst);for(var Q=[te];Q.length<G;){for(var de=0,I=0,_e=0;_e<Q.length;_e++)Q[_e].est.L>de&&(de=Q[_e].est.L,I=_e);if(de<V)break;var ne=Q[I],ge=UPNG.quantize.splitPixels(U,re,ne.i0,ne.i1,ne.est.e,ne.est.eMq255);if(ne.i0>=ge||ne.i1<=ge)ne.est.L=0;else{var ye={i0:ne.i0,i1:ge,bst:null,est:null,tdst:0,left:null,right:null};ye.bst=UPNG.quantize.stats(U,ye.i0,ye.i1),ye.est=UPNG.quantize.estats(ye.bst);var xe={i0:ge,i1:ne.i1,bst:null,est:null,tdst:0,left:null,right:null};for(xe.bst={R:[],m:[],N:ne.bst.N-ye.bst.N},_e=0;_e<16;_e++)xe.bst.R[_e]=ne.bst.R[_e]-ye.bst.R[_e];for(_e=0;_e<4;_e++)xe.bst.m[_e]=ne.bst.m[_e]-ye.bst.m[_e];xe.est=UPNG.quantize.estats(xe.bst),ne.left=ye,ne.right=xe,Q[I]=ye,Q.push(xe)}}for(Q.sort(function(we,ke){return ke.bst.N-we.bst.N}),_e=0;_e<Q.length;_e++)Q[_e].ind=_e;return[te,Q]},UPNG.quantize.getNearest=function(U,G,V,re,te){if(U.left==null)return U.tdst=UPNG.quantize.dist(U.est.q,G,V,re,te),U;var Q=UPNG.quantize.planeDst(U.est,G,V,re,te),de=U.left,I=U.right;Q>0&&(de=U.right,I=U.left);var _e=UPNG.quantize.getNearest(de,G,V,re,te);if(_e.tdst<=Q*Q)return _e;var ne=UPNG.quantize.getNearest(I,G,V,re,te);return ne.tdst<_e.tdst?ne:_e},UPNG.quantize.planeDst=function(U,G,V,re,te){var Q=U.e;return Q[0]*G+Q[1]*V+Q[2]*re+Q[3]*te-U.eMq},UPNG.quantize.dist=function(U,G,V,re,te){var Q=G-U[0],de=V-U[1],I=re-U[2],_e=te-U[3];return Q*Q+de*de+I*I+_e*_e},UPNG.quantize.splitPixels=function(U,G,V,re,te,Q){var de=UPNG.quantize.vecDot;for(re-=4;V<re;){for(;de(U,V,te)<=Q;)V+=4;for(;de(U,re,te)>Q;)re-=4;if(V>=re)break;var I=G[V>>2];G[V>>2]=G[re>>2],G[re>>2]=I,V+=4,re-=4}for(;de(U,V,te)>Q;)V-=4;return V+4},UPNG.quantize.vecDot=function(U,G,V){return U[G]*V[0]+U[G+1]*V[1]+U[G+2]*V[2]+U[G+3]*V[3]},UPNG.quantize.stats=function(U,G,V){for(var re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],te=[0,0,0,0],Q=V-G>>2,de=G;de<V;de+=4){var I=U[de]*.00392156862745098,_e=U[de+1]*(1/255),ne=U[de+2]*(1/255),ge=U[de+3]*(1/255);te[0]+=I,te[1]+=_e,te[2]+=ne,te[3]+=ge,re[0]+=I*I,re[1]+=I*_e,re[2]+=I*ne,re[3]+=I*ge,re[5]+=_e*_e,re[6]+=_e*ne,re[7]+=_e*ge,re[10]+=ne*ne,re[11]+=ne*ge,re[15]+=ge*ge}return re[4]=re[1],re[8]=re[2],re[9]=re[6],re[12]=re[3],re[13]=re[7],re[14]=re[11],{R:re,m:te,N:Q}},UPNG.quantize.estats=function(U){var G=U.R,V=U.m,re=U.N,te=V[0],Q=V[1],de=V[2],I=V[3],_e=re==0?0:1/re,ne=[G[0]-te*te*_e,G[1]-te*Q*_e,G[2]-te*de*_e,G[3]-te*I*_e,G[4]-Q*te*_e,G[5]-Q*Q*_e,G[6]-Q*de*_e,G[7]-Q*I*_e,G[8]-de*te*_e,G[9]-de*Q*_e,G[10]-de*de*_e,G[11]-de*I*_e,G[12]-I*te*_e,G[13]-I*Q*_e,G[14]-I*de*_e,G[15]-I*I*_e],ge=ne,ye=UPNG.M4,xe=[Math.random(),Math.random(),Math.random(),Math.random()],we=0,ke=0;if(re!=0)for(var Se=0;Se<16&&(xe=ye.multVec(ge,xe),ke=Math.sqrt(ye.dot(xe,xe)),xe=ye.sml(1/ke,xe),!(Se!=0&&Math.abs(ke-we)<1e-9));Se++)we=ke;var Oe=[te*_e,Q*_e,de*_e,I*_e];return{Cov:ne,q:Oe,e:xe,L:we,eMq255:ye.dot(ye.sml(255,Oe),xe),eMq:ye.dot(xe,Oe),rgba:(Math.round(255*Oe[3])<<24|Math.round(255*Oe[2])<<16|Math.round(255*Oe[1])<<8|Math.round(255*Oe[0])<<0)>>>0}},UPNG.M4={multVec:function(G,V){return[G[0]*V[0]+G[1]*V[1]+G[2]*V[2]+G[3]*V[3],G[4]*V[0]+G[5]*V[1]+G[6]*V[2]+G[7]*V[3],G[8]*V[0]+G[9]*V[1]+G[10]*V[2]+G[11]*V[3],G[12]*V[0]+G[13]*V[1]+G[14]*V[2]+G[15]*V[3]]},dot:function(G,V){return G[0]*V[0]+G[1]*V[1]+G[2]*V[2]+G[3]*V[3]},sml:function(G,V){return[G*V[0],G*V[1],G*V[2],G*V[3]]}},UPNG.encode.concatRGBA=function(U){for(var G=0,V=0;V<U.length;V++)G+=U[V].byteLength;var re=new Uint8Array(G),te=0;for(V=0;V<U.length;V++){for(var Q=new Uint8Array(U[V]),de=Q.length,I=0;I<de;I+=4){var _e=Q[I],ne=Q[I+1],ge=Q[I+2],ye=Q[I+3];ye==0&&(_e=ne=ge=0),re[te+I]=_e,re[te+I+1]=ne,re[te+I+2]=ge,re[te+I+3]=ye}te+=de}return re.buffer};var BROWSER_NAME={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",MOBILE_SAFARI:"MOBILE_SAFARI",ETC:"ETC"},_BROWSER_NAME$CHROME$,MAX_CANVAS_SIZE=(_BROWSER_NAME$CHROME$={},_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.CHROME,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.FIREFOX,11180),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.DESKTOP_SAFARI,16384),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.IE,8192),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.MOBILE_SAFARI,4096),_defineProperty(_BROWSER_NAME$CHROME$,BROWSER_NAME.ETC,8192),_BROWSER_NAME$CHROME$),isBrowser=typeof window!="undefined",moduleMapper=isBrowser&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),CustomFile=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"File")||window.File!==void 0&&File),CustomFileReader=isBrowser&&(moduleMapper&&moduleMapper.getOriginalSymbol(window,"FileReader")||window.FileReader!==void 0&&FileReader);function getFilefromDataUrl(U,G){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Date.now();return new Promise(function(re){for(var te=U.split(","),Q=te[0].match(/:(.*?);/)[1],de=globalThis.atob(te[1]),I=de.length,_e=new Uint8Array(I);I--;)_e[I]=de.charCodeAt(I);var ne=new Blob([_e],{type:Q});ne.name=G,ne.lastModified=V,re(ne)})}function getDataUrlFromFile(U){return new Promise(function(G,V){var re=new CustomFileReader;re.onload=function(){return G(re.result)},re.onerror=function(te){return V(te)},re.readAsDataURL(U)})}function loadImage(U){return new Promise(function(G,V){var re=new Image;re.onload=function(){return G(re)},re.onerror=function(te){return V(te)},re.src=U})}function getBrowserName(){if(getBrowserName.cachedResult!==void 0)return getBrowserName.cachedResult;var U=BROWSER_NAME.ETC,G=navigator.userAgent;return/Chrom(e|ium)/i.test(G)?U=BROWSER_NAME.CHROME:/iP(ad|od|hone)/i.test(G)&&/WebKit/i.test(G)&&!/(CriOS|FxiOS|OPiOS|mercury)/i.test(G)?U=BROWSER_NAME.MOBILE_SAFARI:/Safari/i.test(G)?U=BROWSER_NAME.DESKTOP_SAFARI:/Firefox/i.test(G)?U=BROWSER_NAME.FIREFOX:(/MSIE/i.test(G)||!!document.documentMode)&&(U=BROWSER_NAME.IE),getBrowserName.cachedResult=U,getBrowserName.cachedResult}function approximateBelowMaximumCanvasSizeOfBrowser(U,G){for(var V=getBrowserName(),re=MAX_CANVAS_SIZE[V],te=U,Q=G,de=te*Q,I=te>Q?Q/te:te/Q;de>re*re;){var _e=(re+te)/2,ne=(re+Q)/2;_e<ne?(Q=ne,te=ne*I):(Q=_e*I,te=_e),de=te*Q}return{width:te,height:Q}}function getNewCanvasAndCtx(U,G){var V,re;try{if((re=(V=new OffscreenCanvas(U,G)).getContext("2d"))===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{re=(V=document.createElement("canvas")).getContext("2d")}return V.width=U,V.height=G,[V,re]}function drawImageInCanvas(U){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,V=approximateBelowMaximumCanvasSizeOfBrowser(U.width,U.height),re=V.width,te=V.height,Q=getNewCanvasAndCtx(re,te),de=_slicedToArray(Q,2),I=de[0],_e=de[1];return G&&/jpe?g/.test(G)&&(_e.fillStyle="white",_e.fillRect(0,0,I.width,I.height)),_e.drawImage(U,0,0,I.width,I.height),I}function isIOS(){return isIOS.cachedResult!==void 0||(isIOS.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document!="undefined"&&"ontouchend"in document),isIOS.cachedResult}function drawFileInCanvas(U){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(V,re){var te,Q,de=function(){try{return Q=drawImageInCanvas(te,G.fileType||U.type),V([te,Q])}catch(ne){return re(ne)}},I=function(ne){try{var ge=function(xe){try{throw xe}catch(we){return re(we)}};try{return getDataUrlFromFile(U).then(function(ye){try{return loadImage(ye).then(function(xe){try{return te=xe,function(){try{return de()}catch(ke){return re(ke)}}()}catch(we){return ge(we)}},ge)}catch(xe){return ge(xe)}},ge)}catch(ye){ge(ye)}}catch(ye){return re(ye)}};try{if(isIOS()||[BROWSER_NAME.DESKTOP_SAFARI,BROWSER_NAME.MOBILE_SAFARI].includes(getBrowserName()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(U).then(function(_e){try{return te=_e,de()}catch{return I()}},I)}catch{I()}})}function canvasToFile(U,G,V,re){var te=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1;return new Promise(function(Q,de){var I,_e,ne;if(G==="image/png")return _e=U.getContext("2d").getImageData(0,0,U.width,U.height).data,ne=UPNG.encode([_e],U.width,U.height,256*te),(I=new Blob([ne],{type:G})).name=V,I.lastModified=re,ge.call(this);{let ye=function(){return ge.call(this)};return typeof OffscreenCanvas=="function"&&U instanceof OffscreenCanvas?U.convertToBlob({type:G,quality:te}).then(function(xe){try{return(I=xe).name=V,I.lastModified=re,ye.call(this)}catch(we){return de(we)}}.bind(this),de):getFilefromDataUrl(U.toDataURL(G,te),V,re).then(function(xe){try{return I=xe,ye.call(this)}catch(we){return de(we)}}.bind(this),de)}function ge(){return Q(I)}})}function cleanupCanvasMemory(U){U.width=0,U.height=0}function isAutoOrientationInBrowser(){return new Promise(function(U,G){var V,re,te,Q;return isAutoOrientationInBrowser.cachedResult!==void 0?U(isAutoOrientationInBrowser.cachedResult):getFilefromDataUrl("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(de){try{return drawFileInCanvas(V=de).then(function(I){try{return canvasToFile(re=I[1],V.type,V.name,V.lastModified).then(function(_e){try{return te=_e,cleanupCanvasMemory(re),drawFileInCanvas(te).then(function(ne){try{return Q=ne[0],isAutoOrientationInBrowser.cachedResult=Q.width===1&&Q.height===2,U(isAutoOrientationInBrowser.cachedResult)}catch(ge){return G(ge)}},G)}catch(ne){return G(ne)}},G)}catch(_e){return G(_e)}},G)}catch(I){return G(I)}},G)})}function getExifOrientation(U){return new Promise(function(G,V){var re=new CustomFileReader;re.onload=function(te){var Q=new DataView(te.target.result);if(Q.getUint16(0,!1)!=65496)return G(-2);for(var de=Q.byteLength,I=2;I<de;){if(Q.getUint16(I+2,!1)<=8)return G(-1);var _e=Q.getUint16(I,!1);if(I+=2,_e==65505){if(Q.getUint32(I+=2,!1)!=1165519206)return G(-1);var ne=Q.getUint16(I+=6,!1)==18761;I+=Q.getUint32(I+4,ne);var ge=Q.getUint16(I,ne);I+=2;for(var ye=0;ye<ge;ye++)if(Q.getUint16(I+12*ye,ne)==274)return G(Q.getUint16(I+12*ye+8,ne))}else{if((65280&_e)!=65280)break;I+=Q.getUint16(I,!1)}}return G(-1)},re.onerror=function(te){return V(te)},re.readAsArrayBuffer(U)})}function handleMaxWidthOrHeight(U,G){var V,re=U.width,te=U.height,Q=G.maxWidthOrHeight,de=U;if(isFinite(Q)&&(re>Q||te>Q)){var I=_slicedToArray(getNewCanvasAndCtx(re,te),2);de=I[0],V=I[1],re>te?(de.width=Q,de.height=te/re*Q):(de.width=re/te*Q,de.height=Q),V.drawImage(U,0,0,de.width,de.height),cleanupCanvasMemory(U)}return de}function followExifOrientation(U,G){var V=U.width,re=U.height,te=_slicedToArray(getNewCanvasAndCtx(V,re),2),Q=te[0],de=te[1];switch(G>4&&G<9?(Q.width=re,Q.height=V):(Q.width=V,Q.height=re),G){case 2:de.transform(-1,0,0,1,V,0);break;case 3:de.transform(-1,0,0,-1,V,re);break;case 4:de.transform(1,0,0,-1,0,re);break;case 5:de.transform(0,1,1,0,0,0);break;case 6:de.transform(0,1,-1,0,re,0);break;case 7:de.transform(0,-1,-1,0,re,V);break;case 8:de.transform(0,-1,1,0,0,V)}return de.drawImage(U,0,0,V,re),cleanupCanvasMemory(U),Q}function compress(U,G){var V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return new Promise(function(re,te){var Q,de,I,_e,ne,ge,ye,xe,we,ke,Se,Oe,Fe,ze,Le,We,qe,Ne,Ke;function ot(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5;if(G.signal&&G.signal.aborted)throw G.signal.reason;Q+=ft,G.onProgress(Math.min(Q,100))}function yt(ft){if(G.signal&&G.signal.aborted)throw G.signal.reason;Q=Math.min(Math.max(ft,Q),100),G.onProgress(Q)}return Q=V,de=G.maxIteration||10,I=1024*G.maxSizeMB*1024,ot(),drawFileInCanvas(U,G).then(function(ft){try{var _t=_slicedToArray(ft,2);return _e=_t[1],ot(),ne=handleMaxWidthOrHeight(_e,G),ot(),new Promise(function(Je,Qe){var tt;if(!(tt=G.exifOrientation))return getExifOrientation(U).then(function(it){try{return tt=it,ht.call(this)}catch(pt){return Qe(pt)}}.bind(this),Qe);function ht(){return Je(tt)}return ht.call(this)}).then(function(Je){try{return ge=Je,ot(),isAutoOrientationInBrowser().then(function(Qe){try{return ye=Qe?ne:followExifOrientation(ne,ge),ot(),xe=G.initialQuality||1,we=G.fileType||U.type,canvasToFile(ye,we,U.name,U.lastModified,xe).then(function(tt){try{{let it=function(){if(de--&&(Le>I||Le>Fe)){var vt,ut,Nt=_slicedToArray(getNewCanvasAndCtx(vt=Ke?.95*Ne.width:Ne.width,ut=Ke?.95*Ne.height:Ne.height),2);return qe=Nt[0],Nt[1].drawImage(Ne,0,0,vt,ut),xe*=.95,canvasToFile(qe,we,U.name,U.lastModified,xe).then(function(at){try{return We=at,cleanupCanvasMemory(Ne),Ne=qe,Le=We.size,yt(Math.min(99,Math.floor((ze-Le)/(ze-I)*100))),it}catch(Mt){return te(Mt)}},te)}return[1]},pt=function(){return cleanupCanvasMemory(Ne),cleanupCanvasMemory(qe),cleanupCanvasMemory(ne),cleanupCanvasMemory(ye),cleanupCanvasMemory(_e),yt(100),re(We)};if(ke=tt,ot(),Se=ke.size>I,Oe=ke.size>U.size,!Se&&!Oe)return yt(100),re(ke);var ht;return Fe=U.size,ze=ke.size,Le=ze,Ne=ye,Ke=!G.alwaysKeepResolution&&Se,(ht=function(vt){for(;vt;){if(vt.then)return void vt.then(ht,te);try{if(vt.pop){if(vt.length)return vt.pop()?pt.call(this):vt;vt=it}else vt=vt.call(this)}catch(ut){return te(ut)}}}.bind(this))(it)}}catch(it){return te(it)}}.bind(this),te)}catch(tt){return te(tt)}}.bind(this),te)}catch(Qe){return te(Qe)}}.bind(this),te)}catch(Je){return te(Je)}}.bind(this),te)})}var cnt=0,imageCompressionLibUrl,worker;function createWorker(U){var G=[];return typeof U=="function"?G.push("(".concat(U,")()")):G.push(U),new Worker(URL.createObjectURL(new Blob(G)))}function createSourceObject(U){return URL.createObjectURL(new Blob([U],{type:"application/javascript"}))}function stringify(U){return JSON.stringify(U,function(G,V){return typeof V=="function"?"BIC_FN:::(function () { return ".concat(V.toString()," })()"):V})}function parse(o){if(typeof o=="string")return o;var result={};return Object.entries(o).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];if(typeof value=="string"&&value.startsWith("BIC_FN:::"))try{result[key]=eval(value.replace(/^BIC_FN:::/,""))}catch(U){throw U}else result[key]=parse(value)}),result}function generateLib(){return createSourceObject(`
    // reconstruct library
    function imageCompression (){return (`.concat(imageCompression,`).apply(null, arguments)}

    imageCompression.getDataUrlFromFile = `).concat(imageCompression.getDataUrlFromFile,`
    imageCompression.getFilefromDataUrl = `).concat(imageCompression.getFilefromDataUrl,`
    imageCompression.loadImage = `).concat(imageCompression.loadImage,`
    imageCompression.drawImageInCanvas = `).concat(imageCompression.drawImageInCanvas,`
    imageCompression.drawFileInCanvas = `).concat(imageCompression.drawFileInCanvas,`
    imageCompression.canvasToFile = `).concat(imageCompression.canvasToFile,`
    imageCompression.getExifOrientation = `).concat(imageCompression.getExifOrientation,`
    imageCompression.handleMaxWidthOrHeight = `).concat(imageCompression.handleMaxWidthOrHeight,`
    imageCompression.followExifOrientation = `).concat(imageCompression.followExifOrientation,`
    imageCompression.cleanupCanvasMemory = `).concat(imageCompression.cleanupCanvasMemory,`
    imageCompression.isAutoOrientationInBrowser = `).concat(imageCompression.isAutoOrientationInBrowser,`
    imageCompression.approximateBelowMaximumCanvasSizeOfBrowser = `).concat(imageCompression.approximateBelowMaximumCanvasSizeOfBrowser,`
    imageCompression.getBrowserName = `).concat(imageCompression.getBrowserName,`

    // functions / objects
    getDataUrlFromFile = imageCompression.getDataUrlFromFile
    getFilefromDataUrl = imageCompression.getFilefromDataUrl
    loadImage = imageCompression.loadImage
    drawImageInCanvas = imageCompression.drawImageInCanvas
    drawFileInCanvas = imageCompression.drawFileInCanvas
    canvasToFile = imageCompression.canvasToFile
    getExifOrientation = imageCompression.getExifOrientation
    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight
    followExifOrientation = imageCompression.followExifOrientation
    cleanupCanvasMemory = imageCompression.cleanupCanvasMemory
    isAutoOrientationInBrowser = imageCompression.isAutoOrientationInBrowser
    approximateBelowMaximumCanvasSizeOfBrowser = imageCompression.approximateBelowMaximumCanvasSizeOfBrowser
    getBrowserName = imageCompression.getBrowserName
    isIOS = `).concat(isIOS,`
    
    getNewCanvasAndCtx = `).concat(getNewCanvasAndCtx,`
    CustomFileReader = FileReader
    CustomFile = File
    MAX_CANVAS_SIZE = `).concat(JSON.stringify(MAX_CANVAS_SIZE),`
    BROWSER_NAME = `).concat(JSON.stringify(BROWSER_NAME),`
    function compress (){return (`).concat(compress,`).apply(null, arguments)}

    // core-js
    function _slicedToArray(arr, n) { return arr }
    function _typeof(a) { return typeof a }
    function _objectSpread2(target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i] != null ? arguments[i] : {};
  
        Object.assign(target, source)
      }
  
      return target;
    }

    // Libraries
    const parse = `).concat(parse,`
    const UPNG = {}
    UPNG.toRGBA8 = `).concat(UPNG.toRGBA8,`
    UPNG.toRGBA8.decodeImage = `).concat(UPNG.toRGBA8.decodeImage,`
    UPNG.decode = `).concat(UPNG.decode,`
    UPNG.decode._decompress = `).concat(UPNG.decode._decompress,`
    UPNG.decode._inflate = `).concat(UPNG.decode._inflate,`
    UPNG.decode._readInterlace = `).concat(UPNG.decode._readInterlace,`
    UPNG.decode._getBPP = `).concat(UPNG.decode._getBPP,` 
    UPNG.decode._filterZero = `).concat(UPNG.decode._filterZero,`
    UPNG.decode._paeth = `).concat(UPNG.decode._paeth,`
    UPNG.decode._IHDR = `).concat(UPNG.decode._IHDR,`
    UPNG._bin = parse(`).concat(stringify(UPNG._bin),`)
    UPNG._copyTile = `).concat(UPNG._copyTile,`
    UPNG.encode = `).concat(UPNG.encode,`
    UPNG.encodeLL = `).concat(UPNG.encodeLL,` 
    UPNG.encode._main = `).concat(UPNG.encode._main,`
    UPNG.encode.compressPNG = `).concat(UPNG.encode.compressPNG,` 
    UPNG.encode.compress = `).concat(UPNG.encode.compress,`
    UPNG.encode.framize = `).concat(UPNG.encode.framize,` 
    UPNG.encode._updateFrame = `).concat(UPNG.encode._updateFrame,` 
    UPNG.encode._prepareDiff = `).concat(UPNG.encode._prepareDiff,` 
    UPNG.encode._filterZero = `).concat(UPNG.encode._filterZero,` 
    UPNG.encode._filterLine = `).concat(UPNG.encode._filterLine,`
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.crc = parse(`).concat(stringify(UPNG.crc),`)
    UPNG.crc.table = ( function() {
    var tab = new Uint32Array(256);
    for (var n=0; n<256; n++) {
      var c = n;
      for (var k=0; k<8; k++) {
        if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
        else        c = c >>> 1;
      }
      tab[n] = c;  }
    return tab;  })()
    UPNG.quantize = `).concat(UPNG.quantize,` 
    UPNG.quantize.getKDtree = `).concat(UPNG.quantize.getKDtree,` 
    UPNG.quantize.getNearest = `).concat(UPNG.quantize.getNearest,` 
    UPNG.quantize.planeDst = `).concat(UPNG.quantize.planeDst,` 
    UPNG.quantize.dist = `).concat(UPNG.quantize.dist,`     
    UPNG.quantize.splitPixels = `).concat(UPNG.quantize.splitPixels,` 
    UPNG.quantize.vecDot = `).concat(UPNG.quantize.vecDot,` 
    UPNG.quantize.stats = `).concat(UPNG.quantize.stats,` 
    UPNG.quantize.estats = `).concat(UPNG.quantize.estats,`
    UPNG.M4 = parse(`).concat(stringify(UPNG.M4),`)
    UPNG.encode.concatRGBA = `).concat(UPNG.encode.concatRGBA,`
    UPNG.inflateRaw=function(){
    var H={};H.H={};H.H.N=function(N,W){var R=Uint8Array,i=0,m=0,J=0,h=0,Q=0,X=0,u=0,w=0,d=0,v,C;
      if(N[0]==3&&N[1]==0)return W?W:new R(0);var V=H.H,n=V.b,A=V.e,l=V.R,M=V.n,I=V.A,e=V.Z,b=V.m,Z=W==null;
      if(Z)W=new R(N.length>>>2<<5);while(i==0){i=n(N,d,1);m=n(N,d+1,2);d+=3;if(m==0){if((d&7)!=0)d+=8-(d&7);
        var D=(d>>>3)+4,q=N[D-4]|N[D-3]<<8;if(Z)W=H.H.W(W,w+q);W.set(new R(N.buffer,N.byteOffset+D,q),w);d=D+q<<3;
        w+=q;continue}if(Z)W=H.H.W(W,w+(1<<17));if(m==1){v=b.J;C=b.h;X=(1<<9)-1;u=(1<<5)-1}if(m==2){J=A(N,d,5)+257;
        h=A(N,d+5,5)+1;Q=A(N,d+10,4)+4;d+=14;var E=d,j=1;for(var c=0;c<38;c+=2){b.Q[c]=0;b.Q[c+1]=0}for(var c=0;
                                                                                                        c<Q;c++){var K=A(N,d+c*3,3);b.Q[(b.X[c]<<1)+1]=K;if(K>j)j=K}d+=3*Q;M(b.Q,j);I(b.Q,j,b.u);v=b.w;C=b.d;
        d=l(b.u,(1<<j)-1,J+h,N,d,b.v);var r=V.V(b.v,0,J,b.C);X=(1<<r)-1;var S=V.V(b.v,J,h,b.D);u=(1<<S)-1;M(b.C,r);
        I(b.C,r,v);M(b.D,S);I(b.D,S,C)}while(!0){var T=v[e(N,d)&X];d+=T&15;var p=T>>>4;if(p>>>8==0){W[w++]=p}else if(p==256){break}else{var z=w+p-254;
        if(p>264){var _=b.q[p-257];z=w+(_>>>3)+A(N,d,_&7);d+=_&7}var $=C[e(N,d)&u];d+=$&15;var s=$>>>4,Y=b.c[s],a=(Y>>>4)+n(N,d,Y&15);
        d+=Y&15;while(w<z){W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a];W[w]=W[w++-a]}w=z}}}return W.length==w?W:W.slice(0,w)};
      H.H.W=function(N,W){var R=N.length;if(W<=R)return N;var V=new Uint8Array(R<<1);V.set(N,0);return V};
      H.H.R=function(N,W,R,V,n,A){var l=H.H.e,M=H.H.Z,I=0;while(I<R){var e=N[M(V,n)&W];n+=e&15;var b=e>>>4;
        if(b<=15){A[I]=b;I++}else{var Z=0,m=0;if(b==16){m=3+l(V,n,2);n+=2;Z=A[I-1]}else if(b==17){m=3+l(V,n,3);
          n+=3}else if(b==18){m=11+l(V,n,7);n+=7}var J=I+m;while(I<J){A[I]=Z;I++}}}return n};H.H.V=function(N,W,R,V){var n=0,A=0,l=V.length>>>1;
        while(A<R){var M=N[A+W];V[A<<1]=0;V[(A<<1)+1]=M;if(M>n)n=M;A++}while(A<l){V[A<<1]=0;V[(A<<1)+1]=0;A++}return n};
      H.H.n=function(N,W){var R=H.H.m,V=N.length,n,A,l,M,I,e=R.j;for(var M=0;M<=W;M++)e[M]=0;for(M=1;M<V;M+=2)e[N[M]]++;
        var b=R.K;n=0;e[0]=0;for(A=1;A<=W;A++){n=n+e[A-1]<<1;b[A]=n}for(l=0;l<V;l+=2){I=N[l+1];if(I!=0){N[l]=b[I];
          b[I]++}}};H.H.A=function(N,W,R){var V=N.length,n=H.H.m,A=n.r;for(var l=0;l<V;l+=2)if(N[l+1]!=0){var M=l>>1,I=N[l+1],e=M<<4|I,b=W-I,Z=N[l]<<b,m=Z+(1<<b);
        while(Z!=m){var J=A[Z]>>>15-W;R[J]=e;Z++}}};H.H.l=function(N,W){var R=H.H.m.r,V=15-W;for(var n=0;n<N.length;
                                                                                                 n+=2){var A=N[n]<<W-N[n+1];N[n]=R[A]>>>V}};H.H.M=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8};
      H.H.I=function(N,W,R){R=R<<(W&7);var V=W>>>3;N[V]|=R;N[V+1]|=R>>>8;N[V+2]|=R>>>16};H.H.e=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8)>>>(W&7)&(1<<R)-1};
      H.H.b=function(N,W,R){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)&(1<<R)-1};H.H.Z=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16)>>>(W&7)};
      H.H.i=function(N,W){return(N[W>>>3]|N[(W>>>3)+1]<<8|N[(W>>>3)+2]<<16|N[(W>>>3)+3]<<24)>>>(W&7)};H.H.m=function(){var N=Uint16Array,W=Uint32Array;
        return{K:new N(16),j:new N(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new N(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new W(32),J:new N(512),_:[],h:new N(32),$:[],w:new N(32768),C:[],v:[],d:new N(32768),D:[],u:new N(512),Q:[],r:new N(1<<15),s:new W(286),Y:new W(30),a:new W(19),t:new W(15e3),k:new N(1<<16),g:new N(1<<15)}}();
      (function(){var N=H.H.m,W=1<<15;for(var R=0;R<W;R++){var V=R;V=(V&2863311530)>>>1|(V&1431655765)<<1;
        V=(V&3435973836)>>>2|(V&858993459)<<2;V=(V&4042322160)>>>4|(V&252645135)<<4;V=(V&4278255360)>>>8|(V&16711935)<<8;
        N.r[R]=(V>>>16|V<<16)>>>17}function n(A,l,M){while(l--!=0)A.push(0,M)}for(var R=0;R<32;R++){N.q[R]=N.S[R]<<3|N.T[R];
        N.c[R]=N.p[R]<<4|N.z[R]}n(N._,144,8);n(N._,255-143,9);n(N._,279-255,7);n(N._,287-279,8);H.H.n(N._,9);
        H.H.A(N._,9,N.J);H.H.l(N._,9);n(N.$,32,5);H.H.n(N.$,5);H.H.A(N.$,5,N.h);H.H.l(N.$,5);n(N.Q,19,0);n(N.C,286,0);
        n(N.D,30,0);n(N.v,320,0)}());return H.H.N}()
    
    const UZIP = {}
    UZIP["parse"] = `).concat(UZIP_1.parse,`
    UZIP._readLocal = `).concat(UZIP_1._readLocal,`
    UZIP.inflateRaw = `).concat(UZIP_1.inflateRaw,`
    UZIP.inflate = `).concat(UZIP_1.inflate,`
    UZIP.deflate = `).concat(UZIP_1.deflate,`
    UZIP.deflateRaw = `).concat(UZIP_1.deflateRaw,`
    UZIP.encode = `).concat(UZIP_1.encode,`
    UZIP._noNeed = `).concat(UZIP_1._noNeed,`
    UZIP._writeHeader = `).concat(UZIP_1._writeHeader,`
    UZIP.crc = parse(`).concat(stringify(UZIP_1.crc),`)
    UZIP.crc.table = ( function() {
      var tab = new Uint32Array(256);
      for (var n=0; n<256; n++) {
        var c = n;
        for (var k=0; k<8; k++) {
          if (c & 1)  c = 0xedb88320 ^ (c >>> 1);
          else        c = c >>> 1;
        }
        tab[n] = c;  }
      return tab;  })()
    
    UZIP.adler = `).concat(UZIP_1.adler,`
    UZIP.bin = parse(`).concat(stringify(UZIP_1.bin),`)
    UZIP.F = {}
    UZIP.F.deflateRaw = `).concat(UZIP_1.F.deflateRaw,`
    UZIP.F._bestMatch = `).concat(UZIP_1.F._bestMatch,`
    UZIP.F._howLong = `).concat(UZIP_1.F._howLong,`
    UZIP.F._hash = `).concat(UZIP_1.F._hash,`
    UZIP.saved = `).concat(UZIP_1.saved,`
    UZIP.F._writeBlock = `).concat(UZIP_1.F._writeBlock,`
    UZIP.F._copyExact = `).concat(UZIP_1.F._copyExact,`
    UZIP.F.getTrees = `).concat(UZIP_1.F.getTrees,`
    UZIP.F.getSecond = `).concat(UZIP_1.F.getSecond,`
    UZIP.F.nonZero = `).concat(UZIP_1.F.nonZero,`
    UZIP.F.contSize = `).concat(UZIP_1.F.contSize,`
    UZIP.F._codeTiny = `).concat(UZIP_1.F._codeTiny,` 
    UZIP.F._lenCodes = `).concat(UZIP_1.F._lenCodes,` 
    UZIP.F._hufTree = `).concat(UZIP_1.F._hufTree,` 
    UZIP.F.setDepth = `).concat(UZIP_1.F.setDepth,` 
    UZIP.F.restrictDepth = `).concat(UZIP_1.F.restrictDepth,`
    UZIP.F._goodIndex = `).concat(UZIP_1.F._goodIndex,` 
    UZIP.F._writeLit = `).concat(UZIP_1.F._writeLit,` 
    UZIP.F.inflate = `).concat(UZIP_1.F.inflate,` 
    UZIP.F._check = `).concat(UZIP_1.F._check,` 
    UZIP.F._decodeTiny = `).concat(UZIP_1.F._decodeTiny,` 
    UZIP.F._copyOut = `).concat(UZIP_1.F._copyOut,` 
    UZIP.F.makeCodes = `).concat(UZIP_1.F.makeCodes,` 
    UZIP.F.codes2map = `).concat(UZIP_1.F.codes2map,` 
    UZIP.F.revCodes = `).concat(UZIP_1.F.revCodes,` 

    // used only in deflate
    UZIP.F._putsE = `).concat(UZIP_1.F._putsE,`
    UZIP.F._putsF = `).concat(UZIP_1.F._putsF,`
  
    UZIP.F._bitsE = `).concat(UZIP_1.F._bitsE,`
    UZIP.F._bitsF = `).concat(UZIP_1.F._bitsF,`

    UZIP.F._get17 = `).concat(UZIP_1.F._get17,`
    UZIP.F._get25 = `).concat(UZIP_1.F._get25,`
    UZIP.F.U = function(){
      var u16=Uint16Array, u32=Uint32Array;
      return {
        next_code : new u16(16),
        bl_count  : new u16(16),
        ordr : [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],
        of0  : [3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],
        exb  : [0,0,0,0,0,0,0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4,  4,  5,  5,  5,  5,  0,  0,  0,  0],
        ldef : new u16(32),
        df0  : [1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577, 65535, 65535],
        dxb  : [0,0,0,0,1,1,2, 2, 3, 3, 4, 4, 5, 5,  6,  6,  7,  7,  8,  8,   9,   9,  10,  10,  11,  11,  12,   12,   13,   13,     0,     0],
        ddef : new u32(32),
        flmap: new u16(  512),  fltree: [],
        fdmap: new u16(   32),  fdtree: [],
        lmap : new u16(32768),  ltree : [],  ttree:[],
        dmap : new u16(32768),  dtree : [],
        imap : new u16(  512),  itree : [],
        //rev9 : new u16(  512)
        rev15: new u16(1<<15),
        lhst : new u32(286), dhst : new u32( 30), ihst : new u32(19),
        lits : new u32(15000),
        strt : new u16(1<<16),
        prev : new u16(1<<15)
      };
    } ();

    (function(){
      var U = UZIP.F.U;
      var len = 1<<15;
      for(var i=0; i<len; i++) {
        var x = i;
        x = (((x & 0xaaaaaaaa) >>> 1) | ((x & 0x55555555) << 1));
        x = (((x & 0xcccccccc) >>> 2) | ((x & 0x33333333) << 2));
        x = (((x & 0xf0f0f0f0) >>> 4) | ((x & 0x0f0f0f0f) << 4));
        x = (((x & 0xff00ff00) >>> 8) | ((x & 0x00ff00ff) << 8));
        U.rev15[i] = (((x >>> 16) | (x << 16)))>>>17;
      }
  
      function pushV(tgt, n, sv) {  while(n--!=0) tgt.push(0,sv);  }
  
      for(var i=0; i<32; i++) {  U.ldef[i]=(U.of0[i]<<3)|U.exb[i];  U.ddef[i]=(U.df0[i]<<4)|U.dxb[i];  }
  
      pushV(U.fltree, 144, 8);  pushV(U.fltree, 255-143, 9);  pushV(U.fltree, 279-255, 7);  pushV(U.fltree,287-279,8);
      /*
        var i = 0;
        for(; i<=143; i++) U.fltree.push(0,8);
        for(; i<=255; i++) U.fltree.push(0,9);
        for(; i<=279; i++) U.fltree.push(0,7);
        for(; i<=287; i++) U.fltree.push(0,8);
        */
      UZIP.F.makeCodes(U.fltree, 9);
      UZIP.F.codes2map(U.fltree, 9, U.flmap);
      UZIP.F.revCodes (U.fltree, 9)
  
      pushV(U.fdtree,32,5);
      //for(i=0;i<32; i++) U.fdtree.push(0,5);
      UZIP.F.makeCodes(U.fdtree, 5);
      UZIP.F.codes2map(U.fdtree, 5, U.fdmap);
      UZIP.F.revCodes (U.fdtree, 5)
  
      pushV(U.itree,19,0);  pushV(U.ltree,286,0);  pushV(U.dtree,30,0);  pushV(U.ttree,320,0);
      /*
        for(var i=0; i< 19; i++) U.itree.push(0,0);
        for(var i=0; i<286; i++) U.ltree.push(0,0);
        for(var i=0; i< 30; i++) U.dtree.push(0,0);
        for(var i=0; i<320; i++) U.ttree.push(0,0);
        */
    })()
    `))}function generateWorkerScript(){return createWorker(`
    let scriptImported = false
    self.addEventListener('message', async (e) => {
      const { file, id, imageCompressionLibUrl, options } = e.data
      options.onProgress = (progress) => self.postMessage({ progress, id })
      try {
        if (!scriptImported) {
          // console.log('[worker] importScripts', imageCompressionLibUrl)
          self.importScripts(imageCompressionLibUrl)
          scriptImported = true
        }
        // console.log('[worker] self', self)
        const compressedFile = await imageCompression(file, options)
        self.postMessage({ file: compressedFile, id })
      } catch (e) {
        // console.error('[worker] error', e)
        self.postMessage({ error: e.message + '\\n' + e.stack, id })
      }
    })
  `)}function compressOnWebWorker(U,G){return new Promise(function(V,re){var te=cnt+=1;imageCompressionLibUrl||(imageCompressionLibUrl=generateLib()),worker||(worker=generateWorkerScript()),worker.addEventListener("message",function Q(de){if(de.data.id===te){if(G.signal&&G.signal.aborted)return;if(de.data.progress!==void 0)return void G.onProgress(de.data.progress);worker.removeEventListener("message",Q),de.data.error&&re(new Error(de.data.error)),V(de.data.file)}}),worker.addEventListener("error",re),G.signal&&G.signal.addEventListener("abort",function(){worker.terminate(),re(G.signal.reason)}),worker.postMessage({file:U,id:te,imageCompressionLibUrl,options:_objectSpread2(_objectSpread2({},G),{},{onProgress:void 0,signal:void 0})})})}function imageCompression(U,G){return new Promise(function(V,re){var te,Q,de,I,_e,ne;if(te=_objectSpread2({},G),de=0,I=te.onProgress,te.maxSizeMB=te.maxSizeMB||Number.POSITIVE_INFINITY,_e=typeof te.useWebWorker!="boolean"||te.useWebWorker,delete te.useWebWorker,te.onProgress=function(we){de=we,typeof I=="function"&&I(de)},!(U instanceof Blob||U instanceof CustomFile))return re(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(U.type))return re(new Error("The file given is not an image"));if(ne=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope,!_e||typeof Worker!="function"||ne)return compress(U,te).then(function(we){try{return Q=we,xe.call(this)}catch(ke){return re(ke)}}.bind(this),re);var ge=function(){try{return xe.call(this)}catch(we){return re(we)}}.bind(this),ye=function(ke){try{return compress(U,te).then(function(Se){try{return Q=Se,ge()}catch(Oe){return re(Oe)}},re)}catch(Se){return re(Se)}};try{return compressOnWebWorker(U,te).then(function(we){try{return Q=we,ge()}catch{return ye()}},ye)}catch{ye()}function xe(){try{Q.name=U.name,Q.lastModified=U.lastModified}catch{}return V(Q)}})}imageCompression.getDataUrlFromFile=getDataUrlFromFile,imageCompression.getFilefromDataUrl=getFilefromDataUrl,imageCompression.loadImage=loadImage,imageCompression.drawImageInCanvas=drawImageInCanvas,imageCompression.drawFileInCanvas=drawFileInCanvas,imageCompression.canvasToFile=canvasToFile,imageCompression.getExifOrientation=getExifOrientation,imageCompression.handleMaxWidthOrHeight=handleMaxWidthOrHeight,imageCompression.followExifOrientation=followExifOrientation,imageCompression.cleanupCanvasMemory=cleanupCanvasMemory,imageCompression.isAutoOrientationInBrowser=isAutoOrientationInBrowser,imageCompression.approximateBelowMaximumCanvasSizeOfBrowser=approximateBelowMaximumCanvasSizeOfBrowser,imageCompression.getBrowserName=getBrowserName,imageCompression.version="2.0.0";var eruda={exports:{}};/*! eruda v2.6.1 https://eruda.liriliri.io/ */(function(module,exports){(function(U,G){module.exports=G()})(self,function(){return function(){var __webpack_modules__={3816:function(U,G,V){(G=V(3645)(!1)).push([U.id,"._container ._console-container{$pt:40px;$pb:24px}._console-container{$w:100%;$h:100%}._console-container._js-input-hidden{$pb:0}._console-container ._control{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$cu:default;$fs:0;$p:10px 10px 10px 35px;$b:var(--darker-background);$c:var(--primary);$lh:20px;$bb:1px solid var(--border)}._console-container ._control ._icon-clear,._console-container ._control ._icon-copy,._console-container ._control ._icon-search{$d:inline-block;$p:10px;$fs:16px;$po:absolute;$t:0;$cu:pointer;$tr:color .3s}._console-container ._control ._icon-clear:active,._console-container ._control ._icon-copy:active,._console-container ._control ._icon-search:active{$c:var(--accent)}._console-container ._control ._icon-clear{padding-right:0;$l:0}._console-container ._control ._icon-copy{right:0}._console-container ._control ._icon-search{right:23px}._console-container ._control ._filter{$cu:pointer;$fs:12px;$h:20px;$d:inline-block;$m:0 2px;$p:0 4px;$lh:20px;$tr:background-color .3s,color .3s}._console-container ._control ._filter._active{$b:var(--highlight);$c:var(--select-foreground)}._console-container ._control ._search-keyword{$ws:nowrap;$po:absolute;$lh:20px;max-width:80px;$o:hidden;right:63px;$fs:14px;text-overflow:ellipsis}._console-container ._js-input{$pe:none;$po:absolute;$z:100;$l:0;bottom:0;$w:100%;$bt:1px solid var(--border);$h:24px}._console-container ._js-input ._icon-arrow-right{$lh:23px;$c:var(--accent);$po:absolute;$l:10px;$t:0;$z:10}._console-container ._js-input._active{$h:100%;$pt:40px;$pb:40px;$bt:none}._console-container ._js-input._active ._icon-arrow-right{$d:none}._console-container ._js-input._active textarea{$pl:10px}._console-container ._js-input ._buttons{$d:none;$po:absolute;$l:0;bottom:0;$w:100%;$h:40px;$c:var(--primary);$b:var(--darker-background);$fs:12px;$bt:1px solid var(--border)}._console-container ._js-input ._buttons ._button{$pe:all;$cu:pointer;$w:50%;$d:inline-block;$ta:center;$br:1px solid var(--border);$h:40px;$lh:40px;$tr:background .3s,color .3s}._console-container ._js-input ._buttons ._button:last-child{$br:none}._console-container ._js-input ._buttons ._button:active{$c:var(--select-foreground);$b:var(--highlight)}._console-container ._js-input textarea{$pe:all;$p:3px 10px;$pl:25px;$ou:0;$bo:none;$fs:14px;$w:100%;$h:100%;-webkit-user-select:text;$us:text;resize:none;$c:var(--primary);$b:var(--background)}",""]),U.exports=G},9217:function(U,G,V){(G=V(3645)(!1)).push([U.id,"._dev-tools{$po:absolute;$w:100%;$h:100%;$l:0;bottom:0;$b:var(--background);$z:500;$d:none;$pt:40px!important;opacity:0;$tr:opacity .3s,height .3s}._dev-tools ._tools{$o:auto;$wos:touch;$h:100%;$w:100%;$po:relative}._dev-tools ._tools ._tool{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$o:hidden;$d:none}",""]),U.exports=G},3409:function(U,G,V){(G=V(3645)(!1)).push([U.id,"._container ._nav-bar-container{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$z:100}._container ._nav-bar-container ._nav-bar{$ox:auto;$wos:touch;$bt:1px solid var(--border);$bb:1px solid var(--border);$w:100%;$h:100%;$b:var(--darker-background);$fs:0;$ws:nowrap}._container ._nav-bar-container ._nav-bar-item{$cu:pointer;$d:inline-block;$h:38px;$lh:38px;$p:0 10px;$c:var(--foreground);$fs:12px;$ta:center;$tt:capitalize;$tr:all .3s}._container ._nav-bar-container ._nav-bar-item:active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._nav-bar-item._active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._bottom-bar{$tr:left .3s,width .3s;$h:1px;$b:var(--accent);$po:absolute;bottom:0;$l:0}",""]),U.exports=G},269:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_elements{$pb:40px;$fs:14px}#_elements ._show-area{$oy:auto;$wos:touch;$h:100%}#_elements ._parents{$ox:auto;$wos:touch;$b:var(--darker-background);$c:var(--primary);$p:0 10px;$h:40px;$lh:40px;$ws:nowrap;$bb:1px solid var(--border);$cu:pointer;$fs:14px}#_elements ._parents li{$d:inline-block}#_elements ._parents li ._parent{$d:inline-block}#_elements ._parents li:last-child{margin-right:0}#_elements ._parents ._icon-arrow-right{$fs:12px;$po:relative;$t:1px}#_elements ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border);$cu:pointer;$tr:background .3s,color .3s}#_elements ._breadcrumb:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._breadcrumb:active span{$c:var(--select-foreground)}#_elements ._section{$bb:1px solid var(--border);$c:var(--foreground);$mb:10px}#_elements ._section h2{$c:var(--primary);$b:var(--darker-background);$bt:1px solid var(--border);$p:10px;$fs:14px;$tr:background .3s}#_elements ._section h2 ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_elements ._section h2 ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_elements ._section h2 ._btn:active{$c:var(--accent)}#_elements ._section h2._active-effect{$cu:pointer}#_elements ._section h2._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children{$b:var(--darker-background);$c:var(--foreground);$mb:10px!important;$bb:1px solid var(--border)}#_elements ._children li{$ox:auto;$wos:touch;$cu:default;$p:10px;$bt:1px solid var(--border);$ws:nowrap;$tr:background .3s,color .3s}#_elements ._children li span{$tr:color .3s}#_elements ._children li._active-effect{$cu:pointer}#_elements ._children li._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children li._active-effect:active span{$c:var(--select-foreground)}#_elements ._attributes{$fs:12px}#_elements ._attributes a{$c:var(--link-color)}#_elements ._attributes ._table-wrapper{$ox:auto;$wos:touch}#_elements ._attributes table td{$p:5px 10px}#_elements ._text-content{$b:#fff}#_elements ._text-content ._content{$ox:auto;$wos:touch;$p:10px}#_elements ._style-color{$po:relative;$t:1px;$w:10px;$h:10px;$bra:50%;margin-right:2px;$bo:1px solid var(--border);$d:inline-block}#_elements ._box-model{$ox:auto;$wos:touch;$c:#222;$fs:12px;$p:10px;$ta:center;$ws:nowrap;$bb:1px solid var(--color)}#_elements ._box-model ._label{$po:absolute;$ml:3px;$p:0 2px}#_elements ._box-model ._bottom,#_elements ._box-model ._left,#_elements ._box-model ._right,#_elements ._box-model ._top{$d:inline-block}#_elements ._box-model ._left,#_elements ._box-model ._right{vertical-align:middle}#_elements ._box-model ._border,#_elements ._box-model ._content,#_elements ._box-model ._margin,#_elements ._box-model ._padding,#_elements ._box-model ._position{$po:relative;$b:#fff;$d:inline-block;$ta:center;vertical-align:middle;$p:3px;$m:3px}#_elements ._box-model ._position{$bo:1px grey dotted}#_elements ._box-model ._margin{$bo:1px dashed;$b:rgba(246,178,107,.66)}#_elements ._box-model ._border{$bo:1px #000 solid;$b:rgba(255,229,153,.66)}#_elements ._box-model ._padding{$bo:1px grey dashed;$b:rgba(147,196,125,.55)}#_elements ._box-model ._content{$bo:1px grey solid;min-width:100px;$b:rgba(111,168,220,.66)}#_elements ._computed-style{$fs:12px}#_elements ._computed-style a{$c:var(--link-color)}#_elements ._computed-style ._table-wrapper{$oy:auto;$wos:touch;max-height:200px;$bt:1px solid var(--border)}#_elements ._computed-style table td{$p:5px 10px}#_elements ._computed-style table td._key{$ws:nowrap;$c:var(--var-color)}#_elements ._styles{$fs:12px}#_elements ._styles ._style-wrapper{$p:10px}#_elements ._styles ._style-wrapper ._style-rules{$bo:1px solid var(--border);$p:10px;$mb:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{$pl:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{$c:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{$c:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{$mb:0}#_elements ._listeners{$fs:12px}#_elements ._listeners ._listener-wrapper{$p:10px}#_elements ._listeners ._listener-wrapper ._listener{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{$p:10px;$b:var(--darker-background);$c:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{$ox:auto;$wos:touch;$p:10px;$bt:none}#_elements ._bottom-bar{$h:40px;$b:var(--darker-background);$po:absolute;$l:0;bottom:0;$w:100%;$fs:0;$bt:1px solid var(--border)}#_elements ._bottom-bar ._btn{$cu:pointer;$ta:center;$c:var(--primary);$fs:14px;$lh:40px;$w:25%;$d:inline-block;$tr:background .3s,color .3s}#_elements ._bottom-bar ._btn:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._bottom-bar ._btn._active{$c:var(--accent)}",""]),U.exports=G},7693:function(U,G,V){(G=V(3645)(!1)).push([U.id,"._container ._entry-btn{$w:40px;$h:40px;$d:flex;$b:#000;opacity:.3;$bra:10px;$po:relative;$z:1000;$tr:opacity .3s;$c:#fff;$fs:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),U.exports=G},9577:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_info{$oy:auto;$wos:touch}#_info li{$m:10px;$bo:1px solid var(--border)}#_info li ._content,#_info li ._title{$p:10px}#_info li ._title{$pb:0;$fs:16px;$c:var(--accent)}#_info li ._content{$m:0;-webkit-user-select:text;$us:text;$c:var(--foreground);word-break:break-all}#_info li ._content table{$w:100%;$bc:collapse}#_info li ._content table td,#_info li ._content table th{$bo:1px solid var(--border);$p:10px}#_info li ._content *{-webkit-user-select:text;$us:text}#_info li ._content a{$c:var(--link-color)}#_info li ._device-key,#_info li ._system-key{$w:100px}",""]),U.exports=G},3985:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_network{$pt:36px}#_network ._title{$po:absolute;$w:100%;$h:36px;$l:0;$t:0;$b:var(--darker-background);$p:10px;$c:var(--primary);$h:36px;$bb:1px solid var(--border)}#_network ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_network ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_network ._title ._btn:active{$c:var(--accent)}#_network ._requests{$oy:auto;$wos:touch;$h:100%;$bb:1px solid var(--border);$mb:10px}#_network ._requests li{$d:flex;$w:100%;$cu:pointer;$bb:1px solid var(--border);$h:41px;$c:var(--foreground);$ws:nowrap}#_network ._requests li._error span{$c:var(--console-error-foreground)}#_network ._requests li span{$d:block;$lh:40px;$h:40px;$p:0 5px;$fs:12px;vertical-align:top;text-overflow:ellipsis;$o:hidden}#_network ._requests li ._name{$fl:1;$pl:10px}#_network ._requests li ._status{$w:40px}#_network ._requests li ._method,#_network ._requests li ._type{$w:50px}#_network ._requests li ._size{$w:70px}#_network ._requests li ._time{$w:60px;padding-right:10px}#_network ._requests li:nth-child(even){$b:var(--contrast)}#_network ._detail{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$z:10;$d:none;$pb:40px;$b:var(--background)}#_network ._detail ._http{$oy:auto;$wos:touch;$h:100%}#_network ._detail ._http ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_network ._detail ._http ._section{$bt:1px solid var(--border);$bb:1px solid var(--border);$mb:10px}#_network ._detail ._http ._section h2{$b:var(--darker-background);$c:var(--primary);$p:10px;$fs:14px}#_network ._detail ._http ._section table{$c:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;$us:text}#_network ._detail ._http ._section table td{$fs:12px;$p:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{$ws:nowrap;$fw:700;$c:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;$us:text;$ox:auto;$wos:touch;$p:10px;$fs:12px;$mb:10px;$ws:pre-wrap;$bt:1px solid var(--border);$c:var(--foreground);$bb:1px solid var(--border)}#_network ._detail ._back{$po:absolute;$l:0;bottom:0;$c:var(--foreground);$w:100%;$bt:1px solid var(--border);$b:var(--darker-background);$d:block;$h:40px;$lh:40px;text-decoration:none;$ta:center;$mt:10px;$tr:background .3s;$cu:pointer}#_network ._detail ._back:active{$c:var(--select-foreground)}",""]),U.exports=G},8070:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_resources{$oy:auto;$wos:touch;$p:10px;$fs:14px}#_resources ._section{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_resources ._section ._content{$oy:auto;$wos:touch;max-height:400px}#_resources ._section._warn{$bo:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}#_resources ._section._danger{$bo:1px solid var(--console-error-border)}#_resources ._section._danger ._title{$b:var(--console-error-background);$c:var(--console-error-foreground)}#_resources ._title{$p:10px;$c:var(--primary);$b:var(--darker-background)}#_resources ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_resources ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_resources ._title ._btn:active{$c:var(--accent)}#_resources ._link-list{$fs:12px;$c:var(--foreground)}#_resources ._link-list li{$p:10px;word-break:break-all}#_resources ._link-list li a{$c:var(--link-color)!important}#_resources ._image-list{$c:var(--foreground);$fs:12px;$d:flex;flex-wrap:wrap;$p:10px!important}#_resources ._image-list:after{$co:'';$d:block;$cl:both}#_resources ._image-list li{flex-grow:1;$cu:pointer;$oy:hidden}#_resources ._image-list li._image{$h:100px;$fs:0}#_resources ._image-list li img{$h:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}#_resources table{$c:var(--foreground);$bc:collapse;$w:100%;$fs:12px}#_resources table tr:nth-child(even){$b:var(--contrast)}#_resources table td{$p:10px;word-break:break-all}#_resources table td._key{$ox:auto;$wos:touch;$ws:nowrap;max-width:120px}#_resources table td._control{$p:0;$fs:0;$w:40px}#_resources table td._control ._icon-delete{$cu:pointer;$c:var(--primary);$fs:14px;$d:inline-block;$w:40px;$h:40px;$ta:center;$lh:40px;$tr:color .3s}#_resources table td._control ._icon-delete:active{$c:var(--accent)}",""]),U.exports=G},6836:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_settings{$oy:auto;$wos:touch}#_settings ._separator{$h:10px}#_settings ._text{$p:10px;$c:var(--accent);$fs:12px}#_settings ._color,#_settings ._range,#_settings ._select{$cu:pointer}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head,#_settings ._switch{$p:10px;$b:var(--darker-background);$fs:14px;$bb:1px solid var(--border);$bt:1px solid var(--border);$c:var(--primary);$mt:-1px}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head{$tr:background .3s,color .3s}#_settings ._color ._head span,#_settings ._range ._head span,#_settings ._select ._head span{$f:right}#_settings ._color ._head:active,#_settings ._range ._head:active,#_settings ._select ._head:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ._head span{$d:inline-block;$bo:1px solid var(--border);$w:15px;$h:15px}#_settings ._select ul{$d:none;$bb:1px solid var(--border);$c:var(--foreground)}#_settings ._select ul._open{$d:block}#_settings ._select ul li{$p:10px;$tr:background .3s,color .3s}#_settings ._select ul li:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ul{$d:none;$p:10px;$fs:0;$bb:1px solid var(--border)}#_settings ._color ul._open{$d:block}#_settings ._color ul li{$d:inline-block;$w:20px;$bo:1px solid var(--border);$h:20px;margin-right:10px}#_settings ._range ._input-container{$d:none;$p:10px;$bb:1px solid var(--border);$po:relative}#_settings ._range ._input-container._open{$d:block}#_settings ._range ._input-container ._range-track{$h:4px;$w:100%;$p:0 10px;$po:absolute;$l:0;$t:16px}#_settings ._range ._input-container ._range-track ._range-track-bar{$b:var(--darker-background);$bra:2px;$o:hidden;$w:100%;$h:4px}#_settings ._range ._input-container ._range-track ._range-track-bar ._range-track-progress{$h:100%;$b:var(--accent);$w:50%}#_settings ._range ._input-container input{-webkit-appearance:none;$b:0 0;$h:4px;$w:100%;$po:relative;$t:-3px;$m:0 auto;$ou:0;$bra:2px}#_settings ._range ._input-container input::-webkit-slider-thumb{-webkit-appearance:none;$po:relative;$t:0;$z:1;$w:16px;$bo:none;$h:16px;$bra:10px;$bo:1px solid var(--border);$b:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}#_settings ._switch ._checkbox{$f:right;$po:relative;vertical-align:top;$w:46px;$h:20px;$p:3px;$bra:18px;$bo:1px solid var(--border);$cu:pointer;$bi:linear-gradient(to bottom,var(--dark),var(--light) 25px)}#_settings ._switch ._checkbox ._input{$po:absolute;$t:0;$l:0;opacity:0}#_settings ._switch ._checkbox ._label{$pe:none;$po:relative;$d:block;$h:12px;$fs:10px;$tt:uppercase;$b:var(--darker-background);$bra:inherit;$bs:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);$tr:.15s ease-out;transition-property:opacity background}#_settings ._switch ._checkbox ._label:after,#_settings ._switch ._checkbox ._label:before{$po:absolute;$t:50%;$mt:-.5em;$lh:1;$tr:inherit}#_settings ._switch ._checkbox ._input:checked~._label{$b:var(--accent);$bs:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}#_settings ._switch ._checkbox ._input:checked~._label:before{opacity:0}#_settings ._switch ._checkbox ._input:checked~._label:after{opacity:1}#_settings ._switch ._checkbox ._handle{$po:absolute;$pe:none;$t:0;$l:0;$w:18px;$h:18px;$bra:10px;$bs:1px 1px 5px rgba(0,0,0,.2);$bi:linear-gradient(to bottom,var(--light) 40%,var(--dark));$tr:left .15s ease-out}#_settings ._switch ._checkbox ._handle:before{$co:'';$po:absolute;$t:50%;$l:50%;$m:-6px 0 0 -6px;$w:12px;$h:12px;$bra:6px;$bs:inset 0 1px rgba(0,0,0,.02);$bi:linear-gradient(to bottom,var(--dark),var(--light))}#_settings ._switch ._checkbox ._input:checked~._handle{$l:30px;$bs:-1px 1px 5px rgba(0,0,0,.2)}",""]),U.exports=G},8277:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_snippets{$oy:auto;$wos:touch;$p:10px}#_snippets ._section{$mb:10px;$bo:1px solid var(--border);$o:hidden;$cu:pointer}#_snippets ._section:active ._name{$b:var(--highlight);$c:var(--select-foreground)}#_snippets ._section ._name{$p:10px;$c:var(--primary);$b:var(--darker-background);$tr:background .3s}#_snippets ._section ._name ._btn{$ml:10px;$f:right;$ta:center;$w:18px;$h:18px;$lh:18px;$fs:12px}#_snippets ._section ._description{$c:var(--foreground);$p:10px;$tr:background .3s}",""]),U.exports=G},6068:function(U,G,V){(G=V(3645)(!1)).push([U.id,"._search-highlight-block{$d:inline}._search-highlight-block ._keyword{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}",""]),U.exports=G},4214:function(U,G,V){(G=V(3645)(!1)).push([U.id,"#_sources{$oy:auto;$wos:touch;$c:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{$ox:auto;$wos:touch;$w:100%;$mh:100%}#_sources ._raw{-webkit-user-select:text;$us:text;$p:10px}#_sources ._code{$fs:12px}#_sources ._code ._content *{-webkit-user-select:text;$us:text}#_sources pre._code{$p:10px}#_sources table._code{$bc:collapse}#_sources table._code ._gutter{$b:var(--background);$c:var(--primary)}#_sources table._code ._line-num{$br:1px solid var(--border);$p:0 3px 0 5px;$ta:right}#_sources table._code ._code-line{$p:0 4px;$ws:pre}#_sources ._image ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_sources ._image ._img-container{$ta:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{$ta:center;$m:20px 0;$c:var(--foreground)}#_sources ._json{$p:0 10px}#_sources ._json *{-webkit-user-select:text;$us:text}#_sources iframe{$w:100%;$h:100%}",""]),U.exports=G},3146:function(U,G,V){(G=V(3645)(!1)).push([U.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{$m:0;$p:0;$bo:0;$fs:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{$d:block}._container body{$lh:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{$co:'';$co:none}._container table{$bc:collapse;border-spacing:0}",""]),U.exports=G},6802:function(U,G,V){(G=V(3645)(!1)).push([U.id,'.luna-console{$b:var(--background)}.luna-console-header{$c:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);$c:var(--foreground)}.luna-console-log-item a{$c:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$c:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$c:#e8a400}.luna-console-log-item .luna-console-count{$c:var(--select-foreground);$b:var(--highlight)}.luna-console-log-item.luna-console-warn{$c:var(--console-warn-foreground);$b:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{$b:var(--console-error-background);$c:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{$b:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{$c:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{$c:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{$c:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{$c:var(--comment-color)}.luna-console-preview .luna-console-key{$c:var(--var-color)}.luna-console-preview .luna-console-number{$c:var(--number-color)}.luna-console-preview .luna-console-null{$c:var(--operator-color)}.luna-console-preview .luna-console-string{$c:var(--string-color)}.luna-console-preview .luna-console-boolean{$c:var(--keyword-color)}.luna-console-preview .luna-console-special{$c:var(--operator-color)}.luna-console-preview .luna-console-keyword{$c:var(--keyword-color)}.luna-console-preview .luna-console-operator{$c:var(--operator-color)}.luna-console-preview .luna-console-comment{$c:var(--comment-color)}.luna-object-viewer{$c:var(--primary);$fs:12px!important}.luna-object-viewer-null{$c:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:var(--string-color)}.luna-object-viewer-number{$c:var(--number-color)}.luna-object-viewer-boolean{$c:var(--keyword-color)}.luna-object-viewer-special{$c:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;$btc:var(--foreground)}.luna-object-viewer-collapsed:before{$btc:transparent;$blc:var(--foreground)}.luna-notification{$pe:none!important;$p:10px;$z:1000}.luna-notification-item{$z:500;$c:var(--foreground);$b:var(--background);$bs:none;$p:5px 10px;$bo:1px solid var(--border)}.luna-notification-upper{$mb:10px}.luna-notification-lower{$mt:10px}.luna-data-grid{$c:var(--foreground);$b:var(--background);border-color:var(--border)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{$b:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:hover{$b:var(--darker-background)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){$b:var(--contrast)}.luna-dom-viewer{$c:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{$c:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{$c:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{$c:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-selection{$b:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{$c:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:var(--comment-color)}.luna-dom-viewer-children{$m:0;$pl:15px!important}._container{$pe:none;$po:fixed;$l:0;$t:0;$w:100%;$h:100%;$z:1000000;$c:var(--foreground);$ff:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;$fs:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{$bsi:border-box;$pe:all;-webkit-user-select:none;$us:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;$p:0;$m:0}._container h1,._container h2,._container h3,._container h4{$m:0}._hidden{$d:none}._icon-disabled{opacity:.5}._tag-name-color{$c:var(--tag-name-color)}._function-color{$c:var(--function-color)}._attribute-name-color{$c:var(--attribute-name-color)}._operator-color{$c:var(--operator-color)}._string-color{$c:var(--string-color)}',""]),U.exports=G},276:function(U,G,V){(G=V(3645)(!1)).push([U.id,"@font-face{$ff:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{$d:inline-block;$ff:luna-console-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{$co:'\\f101'}.luna-console-icon-input:before{$co:'\\f102'}.luna-console-icon-output:before{$co:'\\f103'}.luna-console-icon-warn:before{$co:'\\f104'}.luna-console-icon-caret-down:before{$co:'\\f105'}.luna-console-icon-caret-right:before{$co:'\\f106'}.luna-console{$b:#fff;$oy:auto;$wos:touch;$h:100%;$po:relative;$wc:scroll-position;$cu:default;$fs:12px;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{$d:none}.luna-console-fake-logs{$po:absolute;$l:0;$t:0;$pe:none;$v:hidden;$w:100%}.luna-console-logs{$pt:1px;$po:absolute;$w:100%}.luna-console-log-container{$bsi:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{$ws:nowrap;$d:flex;$fs:11px;$c:#545454;$bt:1px solid transparent;$bb:1px solid #ccc}.luna-console-header .luna-console-time-from-container{$ox:auto;$wos:touch;$p:3px 10px}.luna-console-nesting-level{$w:14px;$fsh:0;$mt:-1px;$mb:-1px;$po:relative;$br:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{$co:''}.luna-console-nesting-level::before{$bb:1px solid #ccc;$po:absolute;$t:0;$l:0;$ml:100%;$w:5px;$h:100%;$bsi:border-box}.luna-console-log-item{$po:relative;$d:flex;$bt:1px solid transparent;$bb:1px solid #ccc;$mt:-1px;$c:#333}.luna-console-log-item:after{$co:'';$d:block;$cl:both}.luna-console-log-item .luna-console-code{$d:inline;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:#881280}.luna-console-log-item .luna-console-code .luna-console-number{$c:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{$c:grey}.luna-console-log-item .luna-console-code .luna-console-comment{$c:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{$c:#1a1aa6}.luna-console-log-item a{$c:#15c!important}.luna-console-log-item .luna-console-icon-container{$m:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$lh:20px;$fs:12px;$c:#333;$po:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{$t:0;$l:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$t:0;$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$t:0;$c:#e8a400}.luna-console-log-item .luna-console-count{$b:#8097bd;$c:#fff;$p:2px 4px;$bra:10px;$fs:12px;$f:left;$m:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{$fl:1;$o:hidden}.luna-console-log-item .luna-console-log-content{$p:3px 0;$m:0 10px;$ox:auto;$wos:touch;$ws:pre-wrap;-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{$ws:initial}.luna-console-log-item.luna-console-error{$z:50;$b:#fff0f0;$c:red;$bt:1px solid #ffd6d6;$bb:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{$pl:1.2em;$ws:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{$b:red}.luna-console-log-item.luna-console-debug{$z:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{$z:40;$c:#5c5c00;$b:#fffbe5;$bt:1px solid #fff5c2;$bb:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{$b:#e8a400}.luna-console-log-item.luna-console-info{$z:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{$fw:700}.luna-console-preview{$d:inline-block}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{$c:#881391}.luna-console-preview .luna-console-number{$c:#1c00cf}.luna-console-preview .luna-console-null{$c:#5e5e5e}.luna-console-preview .luna-console-string{$c:#c41a16}.luna-console-preview .luna-console-boolean{$c:#0d22aa}.luna-console-preview .luna-console-special{$c:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{$c:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{$c:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{$c:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{$c:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{$b:#290000;$c:#ff8080;$btc:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{$b:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{$c:#ffcb6b;$b:#332a00;$btc:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{$b:#42597f;$c:#949494}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{$c:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{$c:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{$c:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{$c:#7f7f7f}",""]),U.exports=G},2456:function(U,G,V){(G=V(3645)(!1)).push([U.id,".luna-data-grid{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$po:relative;$fs:12px;$bo:1px solid #ccc;$o:hidden}.luna-data-grid.luna-data-grid-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{$d:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{$v:hidden}.luna-data-grid *{$bsi:border-box}.luna-data-grid.luna-data-grid-theme-dark{$c:#a5a5a5;$b:#242424;border-color:#3d3d3d}.luna-data-grid table{$w:100%;$h:100%;$bc:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{$p:1px 4px;border-left:1px solid #ccc;$ws:nowrap;text-overflow:ellipsis;$o:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{$fw:400;$bb:1px solid #ccc;$ta:left;$b:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:hover{$b:#e6e6e6}.luna-data-grid td{$h:20px;$cu:default;-webkit-user-select:text;$us:text}.luna-data-grid-data-container,.luna-data-grid-header-container{$o:hidden}.luna-data-grid-header-container{$h:21px}.luna-data-grid-data-container{$oy:auto}.luna-data-grid-data-container tr:nth-child(even){$b:#f2f7fd}.luna-data-grid-filler-row td{$h:auto}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{$b:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{$b:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){$b:#0b2544}",""]),U.exports=G},5141:function(U,G,V){(G=V(3645)(!1)).push([U.id,"@font-face{$ff:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{$d:inline-block;$ff:luna-dom-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{$co:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{$co:'\\f102'}.luna-dom-viewer{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$oy:auto;$wos:touch;$b:0 0;$ox:hidden;word-wrap:break-word;$p:0 0 0 12px;$fs:12px;$h:100%;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$cu:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{$d:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{$v:hidden}.luna-dom-viewer *{$bsi:border-box}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{$c:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;$ml:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{$po:absolute!important;$fs:12px!important}.luna-dom-viewer-tree-item{$lh:16px;$mh:16px;$po:relative;$z:10}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{$d:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{$d:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{$d:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{$d:none}.luna-dom-viewer-html-tag{$c:#881280}.luna-dom-viewer-tag-name{$c:#881280}.luna-dom-viewer-attribute-name{$c:#994500}.luna-dom-viewer-attribute-value{$c:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{$c:#236e25}.luna-dom-viewer-selection{$po:absolute;$d:none;$l:-10000px;right:-10000px;$t:0;bottom:0;$z:-1;$b:#f2f7fd}.luna-dom-viewer-children{$m:0;$ox:visible;$oy:visible;$pl:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{$c:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{$c:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{$c:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{$c:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{$c:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-selection{$b:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#f29766}",""]),U.exports=G},5674:function(U,G,V){(G=V(3645)(!1)).push([U.id,".luna-notification{$po:fixed;$t:0;$l:0;$w:100%;$h:100%;$p:20px;$bsi:border-box;$pe:none;$d:flex;flex-direction:column;$fs:14px;$ff:Arial,Helvetica,sans-serif}.luna-notification-item{$d:flex;$bs:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);$p:10px 16px;$c:#333;$b:#fff}.luna-notification-lower{$mt:16px}.luna-notification-upper{$mb:16px}.luna-notification-theme-dark .luna-notification-item{$bs:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);$c:#a5a5a5;$b:#242424}",""]),U.exports=G},8418:function(U,G,V){(G=V(3645)(!1)).push([U.id,"@font-face{$ff:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{$d:inline-block;$ff:luna-object-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{$co:'\\f101'}.luna-object-viewer-icon-caret-right:before{$co:'\\f102'}.luna-object-viewer{$ox:auto;$wos:touch;$oy:hidden;$cu:default;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$fs:12px;$lh:1.2;$mh:100%;$c:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;$p:0!important;$pl:12px!important;$m:0!important}.luna-object-viewer li{$po:relative;$ws:nowrap;$lh:16px;$mh:16px}.luna-object-viewer>li>.luna-object-viewer-key{$d:none}.luna-object-viewer span{$po:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{$c:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{$d:inline}.luna-object-viewer-null{$c:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:#c41a16}.luna-object-viewer-number{$c:#1c00cf}.luna-object-viewer-boolean{$c:#0d22aa}.luna-object-viewer-special{$c:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{$po:absolute!important;$l:-12px;$c:#727272;$fs:12px}.luna-object-viewer-icon-caret-right{$t:1px}.luna-object-viewer-icon-caret-down{$t:2px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{$d:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{$d:inline}.luna-object-viewer-hidden~ul{$d:none}.luna-object-viewer-theme-dark{$c:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{$c:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{$c:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{$c:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{$c:#5db0d7}",""]),U.exports=G},8998:function(U,G,V){(G=V(3645)(!1)).push([U.id,"@font-face{$ff:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA48AAsAAAAAGjgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAQEAAAG4LO8vdU9TLzIAAAIMAAAAPwAAAFZWm1KOY21hcAAAAkwAAAFLAAADpkj8yKVnbHlmAAADmAAAB88AAA7wW62fimhlYWQAAAtoAAAAMQAAADZ26MSyaGhlYQAAC5wAAAAdAAAAJAgEBC1obXR4AAALvAAAAB0AAACoVAv//GxvY2EAAAvcAAAANwAAAFZo5GTkbWF4cAAADBQAAAAfAAAAIAE7AQ1uYW1lAAAMNAAAASkAAAIWm5e+CnBvc3QAAA1gAAAA2gAAAT5KT479eJxNjzFTwkAQhb+DJARBRhlMgokoISahs7KwsHKsKC1oqRxnGCpLf4+/wB/ouwWFu9m7vX1v973DAWc88Ezn5XX1xmi7+dxxTcB+efw0d9uP9w3x30tYYHeMc2v6ZKzY8cU3Py5xrXukQ8RM54BUO2Oq6Sm33DFX3Un9WM8puDF2RMKInr1TnY3YF4SWFdYXcKVIhFZ0pZ9QSiNiSa28YiE34WF2ylCcVp2+b6LItHPhQzGf5Hmt2sCm+emnDrtyeKwvzGklnVjZvbT27hrNCs2/5/ZMoZai14vFLgybHRycK3IxW/vphEtj+M5SmuN/fmk/7Rsytf5SDmqaXw7eF6sAAAB4nGNgZGJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD8KsYC4MSxAg4A0CDMAALA5CMsAeJy100lOAlEQxvF/QwuCE2JAZhlFEj0UwTFxipKgd/FArlx7jXcC/KpfLdxiYpEfla5+dBf9qoEtIC/nkkLyRYLFp6pJVs9TzuopHzqu6GPrL5hzxzNL3kN1vfbKgnteWIUkq/yOJPtlhQ5jzrK7tagzZKRKlz4DTmgz0dkGpxwzpUeTmdYm5HTHVJ0WKLJNSf3sssc+BxxS5YiaLl9gs2htuN5C/Y463f7gBNqTcUNtTnvQnJ394Vr/Ebv2lXz70Sm2J5H927mry8IN5dKN5Mp15Np15cb15dYN5M7piWjno7Y8uIk8urE8uYY8O+vzxR3Lq5vK0ukxs3JNeXMzeXfahZBENrkhF2E5H9nkhjSyaQ9bkb0FoRBhuRhheTvCcinCcjmytyPsRLYDwWlCCU6zSnCaWoLT/BIqkSaZcBhppgnViNoPob5MjAB4nO1XXWwU1xW+597Zmf2ZndnZnZ3ZH7zL7jKz3vV6/70LdrCxMMZgg8H8NRgwxBQIoNLSJHXUVuIxiQhS3L6l6UvdqoIqiQQVLWpQRdWmVbFUNbSqVCkPfUjTPlSqKiE1zY577uyCm1R5zwP+Offce84959xzv3vuXAIEfxhlvyAKIVY274NW3dAlHxi6SN/Tg84M/Fixk4pzFb6qJEcVuIX9ZD7oXHVeDeaTxJ1PH7IV4iHEB20f5Ok5542dcN05vBM6cHLSOerMT3b1mEW/xf2ALoGYzYPdbDUydYNZgTUSSHFiqJSoBv2SyjsBwNFotOfjG8xan2sPac1W3QSDfh01/SnDSPlRGyevW+EcYa7f99n7xE+ipOiu0c7bQ802iBE01WrUTcM0ICuJkqhztt5utVtNrkSDR3ZPDQzU4PbMX2rO1J7jh6eniiXnl9+8eG7r2NjWcxc/esT8sVScmj48P+tM1WBsfi/crg0MTO2Gy59Qchl3KW5Mb7O3iUmquCJNF7MVkDixm2OQ76UFdBVM3IZcprfcNLQ5MSgx+gIH3hFVcdzjuTsXMBTA5cJbXX4N+XU5/HmNKEZg7q7HM44D7xwI9BkGfEXqcSqsS3u5+jI7TxKYqTJG1g0kigEOQBbDGgEtE9V5+nPrIje+iJbRYDwchH8Gw+HgHU5ed/aEE+E7fEyORGRHDYZH4Sab5jLeQSHcfJ33HolR9ffOHriJYXTx8i77Oe4hAYQlQtJEfAH71ZJz07m1BDMugT1Lzi22EwnMfELA87y2RogAAsHVbEcrogpivoz5HYMKlKFlYC55TnHTVWoakoJ7gFtQAUs3U8CRMAocCnxK1pXCw1BmJNYXDFNBfz47p9GNBe1ZKrAXjS2iED0f+JrpFwwlrl+gAu04/flrxxZ+t3DsWr7/f1h4C2309F7IzGnFNNXOU49nyYykEvoF75LZp3D7F6go7Dj36dku+xhDt9ltEnMx9FlY+Uxw/VtEtERVFy0pfxctItxd57tyF1nf9yJc+CHj3SjCReS6H6ytd9Sewuc2ri62/8AOkzBJkxpG5u7o423me8yyZWiOQj0FugIsq9ConoKGMUqbZQr/efbk8WuWde34yfceMeeHF4eHF5/nZCRe3aTnRnIJbPRNVXaoUFg+sbDcXyz2Ly+cWC4UOh/0NJHA06gS3zSSBWwbOOMx3sfZFaLyOmrnsiKeLaNRb0OryYqdB4GAZpqaX6Ylg5ZhRjS1zj7NlGA6vJk8nn+D3eA1DsGdWy9oDXeBOYXm3NLX5PXNrXpSRmODT33n0HOnT24ZHt5y8vRzp75wcMm8ZMy/uP3INFY+LGLTR8ZHtpR+BC+wwa3jI5tPLX64eGrzSLGwPD92aqhU3LX7zd27iqVEbBBV1uO4x+6Rfqy1CmTLdKjxqbrqxmZmNJPnmuoiG922cmvlysTFyuDe2TuzewcrnDm+Y9vW6ivOTy53hRP3tk1MXFk5evyR3FVMJiqvwNRlV3Rr5XPgX3T9/51dJSHSRzLEIgUyyG+dMm2OUu5OoQgtQGTVR6FZBo8V9TD8x8KagbYp0TfqRydte/Lo6W5Tr81Vq3PPcNK5AAecN4ET9trHl+ifqj+s/tqenF/sai7OT9pwo6eLZBgmqPMvugPohxOd1dr3aut3z8/wPoxglSdWLovHEg8ez1Af5IYyWgMkU8pLDA5dP3uWniknIl420Tl8n55dXd1x/+WXbpyhZ84mIik1eH21cwi0l+/vWF2lOTQrEbK2JngEIK+RG+QBeUg+Ih2+IdAagyHMfBnPu813oN1yG5FjNNsTqKAAFgaswzjoylSIGmbvN4qFxB3ioziQ6tZtro0kDY2WC2uz3u1hZxSLvOuq3eJDBrYYRc899Nqu1Ox5lfCaa9tuPHxumeYxE64z1wLnqJl3p+QxDs613aBs96bIcwuoxR2hcbOdx9l5yWTvKiktHAtIRrivHN/ok0PUJw1tlxOCGovuMxIqS0qp4bTiF5gEzJOpqCUj6fMbIUGQtIg3KEgCgNcjS/6oEkrIkqmlBuMbvbLCZGnD8Ka439TTkYIuKh5vSI4VmknNJ4JI0VLVrwdMpkUkOR4qhSKMSYKz7fTcbGmQsXp9/4GFxbl9g2VKq9XZuQX5rx5/cENl14QS9vqiVrZeGQfJK7djWqxYiWk4ZmcbhlcOyb/R+wVfUPYKqurTgoLIDOaRCnUzIujlfLxiMc/O6HdLB2emvkjTdK9f88fyraTml2Q5njXSlsekyZgQ8G6U5UAwI/mZLx4UI6rfCIS9tY2BkFcxEs3+EFCPLyD6/UYqbHlFr+D1iLIUsp9Kdy1lYilLNAQlEbIjqoeCXwxuiEZMnmXBCER81bTIqAQeX2hDy44lQpGk2VKdp1mjdvDQmRP79pTKjNZr+w88s7B/tlz9qa3H5cjYTjUS60spbLi5WSxqCVkLxAvVeJiP0S0p0ecVRzCh3lBY1ZjkCQbkgGhKctCuxvSiXt4Uq+WZuKK/VPjb9OwlSD85E0/OxJMz8X9ngq118LucCRTfcwmCN4eFHywiPuvwayuDtyI+O7ovC/xmNPmzA1+kIvuHc0xvtXSkvtYAqw60fJ3fpoop/GskLatlWd9mJTuZtD9+kB+37XF6NJpKRZ0fcPrQGrLtIQtd/xdNFnxoAHicY2BkYGAA4uO3TujH89t8ZeBmAQlEcT7e1wCj///9/5+FlYUJKMHBACIZAHZ2DWYAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABVoAW+QEOwAAAHicY2BgYGAhiP//J6wGiFmhmOH/XwYqAwDQmQRZAAAAeJxjYAACBQYThiCGAoZdjGyMPox5jHeYNJhKmI4wPWHWYM5gXsH8g0WNdQO7FXsFsRAA+8AThAB4nGNgZGBg0GJkZGBnAAEmIOYCQgaG/2A+AwANjAFKAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicbYzZboMwFEQ5CUsK3fc93ZdUPOSTLHMJkRyMjCXC35eG187DmdFIM8EkGJUG/2vBhCkhETEJM/ZIydjngEOOOOaEU84454JLrrjmhlvuuOeBR+Y88cwLr7zxzgeffPHNgp8gVc7ZLjdS+myMbr2qfKqVE58XtquzMe7qSBtRbqbtpnHStqG2TR8XYsRLJMPaxbJtVF3MRsuXU+klbIzqEyflMKmiAeKTHfNl3A53uhrMiPaht9bEf8iXYadcjcJh6cgxCCWeNSsqNAU1GxpaerZB8AvjDkPxAAA=') format('woff')}[class*=' _icon-'],[class^='_icon-']{$d:inline-block;$ff:eruda-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{$co:'\\f101'}._icon-arrow-right:before{$co:'\\f102'}._icon-caret-down:before{$co:'\\f103'}._icon-caret-right:before{$co:'\\f104'}._icon-clear:before{$co:'\\f105'}._icon-compress:before{$co:'\\f106'}._icon-copy:before{$co:'\\f107'}._icon-delete:before{$co:'\\f108'}._icon-error:before{$co:'\\f109'}._icon-expand:before{$co:'\\f10a'}._icon-eye:before{$co:'\\f10b'}._icon-play:before{$co:'\\f10c'}._icon-refresh:before{$co:'\\f10d'}._icon-reset:before{$co:'\\f10e'}._icon-search:before{$co:'\\f10f'}._icon-select:before{$co:'\\f110'}._icon-tool:before{$co:'\\f111'}._icon-warn:before{$co:'\\f112'}",""]),U.exports=G},4432:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"console-container",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"control",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-clear clear-console",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span> <span "+((ne=ye(de,"class").call(ge,"filter active",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-filter="all">All</span> <span '+((ne=ye(de,"class").call(ge,"filter",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-filter="error">Error</span> <span '+((ne=ye(de,"class").call(ge,"filter",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-filter="warn">Warning</span> <span '+((ne=ye(de,"class").call(ge,"filter",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-filter="info">Info</span> <span '+((ne=ye(de,"class").call(ge,"search-keyword",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span> <span "+((ne=ye(de,"class").call(ge,"icon-search search",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span> <span "+((ne=ye(de,"class").call(ge,"icon-copy icon-disabled copy",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"logs-container",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"logs-space",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"fake-logs",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></div><div "+((ne=ye(de,"class").call(ge,"logs",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></div></div></div><div "+((ne=ye(de,"class").call(ge,"js-input",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"buttons",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"button cancel",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Cancel</div><div "+((ne=ye(de,"class").call(ge,"button execute",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Execute</div></div><span "+((ne=ye(de,"class").call(ge,"icon-arrow-right",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span> <textarea></textarea></div></div>"},useData:!0})},8269:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"dev-tools",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"nav-bar-container",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"nav-bar",{name:"class",hash:{},data:_e}))!=null?ne:"")+'></div><div class="eruda-bottom-bar"></div></div><div '+((ne=ye(de,"class").call(ge,"tools",{name:"class",hash:{},data:_e}))!=null?ne:"")+'></div><div class="eruda-notification"></div></div>'},useData:!0})},2407:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"bottom-bar",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"btn select",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon icon-select",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn highlight",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon icon-eye",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn reset",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon icon-reset",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div></div>"},useData:!0})},6560:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <ul "+((ne=ye(de,"class").call(ge,"parents",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"parents"):Q,{name:"each",hash:{},fn:te.program(2,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </ul> "},2:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <li><div "+((ne=xe(de,"class").call(ge,"parent",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-idx="'+te.escapeExpression(ye(Q!=null?xe(Q,"idx"):Q,Q))+'">'+((ne=ye(Q!=null?xe(Q,"text"):Q,Q))!=null?ne:"")+"</div><span "+((ne=xe(de,"class").call(ge,"icon-arrow-right",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></li> "},4:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <ul "+((ne=ye(de,"class").call(ge,"children",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"children"):Q,{name:"each",hash:{},fn:te.program(5,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </ul> "},5:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return' <li class="eruda-child '+((ne=xe(de,"if").call(ge,Q!=null?xe(Q,"isCmt"):Q,{name:"if",hash:{},fn:te.program(6,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "+((ne=xe(de,"if").call(ge,Q!=null?xe(Q,"isEl"):Q,{name:"if",hash:{},fn:te.program(8,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+'" data-idx="'+te.escapeExpression(ye(Q!=null?xe(Q,"idx"):Q,Q))+'">'+((ne=ye(Q!=null?xe(Q,"text"):Q,Q))!=null?ne:"")+"</li> "},6:function(te,Q,de,I,_e){return"eruda-green"},8:function(te,Q,de,I,_e){return"eruda-active-effect"},10:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"attributes"):Q,{name:"each",hash:{},fn:te.program(11,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},11:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return' <tr><td class="eruda-attribute-name-color">'+te.escapeExpression(ge(Q!=null?ye(Q,"name"):Q,Q))+'</td><td class="eruda-string-color">'+((ne=ge(Q!=null?ye(Q,"value"):Q,Q))!=null?ne:"")+"</td></tr> "},13:function(te,Q,de,I,_e){return" <tr><td>Empty</td></tr> "},15:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"styles section",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2>Styles</h2><div "+((ne=ye(de,"class").call(ge,"style-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"styles"):Q,{name:"each",hash:{},fn:te.program(16,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </div></div> "},16:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"style-rules",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div>"+te.escapeExpression(te.lambda(Q!=null?ye(Q,"selectorText"):Q,Q))+" {</div> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"style"):Q,{name:"each",hash:{},fn:te.program(17,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" <div>}</div></div> "},17:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(Q!=null?Q:te.nullContext||{},"rule",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span>"+te.escapeExpression(ge(_e&&ye(_e,"key"),Q))+"</span>: "+((ne=ge(Q,Q))!=null?ne:"")+";</div> "},19:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <div "+((ne=we(de,"class").call(ge,"computed-style section",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2>Computed Style "+((ne=we(de,"if").call(ge,Q!=null?we(Q,"rmDefComputedStyle"):Q,{name:"if",hash:{},fn:te.program(20,_e,0),inverse:te.program(22,_e,0),data:_e}))!=null?ne:"")+" <div "+((ne=we(de,"class").call(ge,"btn computed-style-search",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=we(de,"class").call(ge,"icon-search",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div> "+((ne=we(de,"if").call(ge,Q!=null?we(Q,"computedStyleSearchKeyword"):Q,{name:"if",hash:{},fn:te.program(24,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </h2><div "+((ne=we(de,"class").call(ge,"box-model",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=we(de,"if").call(ge,(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"position"):ne,{name:"if",hash:{},fn:te.program(26,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+"<div "+((ne=we(de,"class").call(ge,"margin",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(ge,"label",{name:"class",hash:{},data:_e}))!=null?ne:"")+">margin</div><div "+((ne=we(de,"class").call(ge,"top",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"margin"):ne)!=null?we(ne,"top"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"left",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"margin"):ne)!=null?we(ne,"left"):ne,Q))+"</div><div "+((ne=we(de,"class").call(ge,"border",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(ge,"label",{name:"class",hash:{},data:_e}))!=null?ne:"")+">border</div><div "+((ne=we(de,"class").call(ge,"top",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"border"):ne)!=null?we(ne,"top"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"left",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"border"):ne)!=null?we(ne,"left"):ne,Q))+"</div><div "+((ne=we(de,"class").call(ge,"padding",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(ge,"label",{name:"class",hash:{},data:_e}))!=null?ne:"")+">padding</div><div "+((ne=we(de,"class").call(ge,"top",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"padding"):ne)!=null?we(ne,"top"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"left",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"padding"):ne)!=null?we(ne,"left"):ne,Q))+"</div><div "+((ne=we(de,"class").call(ge,"content",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span>"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"content"):ne)!=null?we(ne,"width"):ne,Q))+"</span>&nbsp;\xD7&nbsp;<span>"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"content"):ne)!=null?we(ne,"height"):ne,Q))+"</span></div><div "+((ne=we(de,"class").call(ge,"right",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"padding"):ne)!=null?we(ne,"right"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"bottom",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"padding"):ne)!=null?we(ne,"bottom"):ne,Q))+"</div></div><div "+((ne=we(de,"class").call(ge,"right",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"border"):ne)!=null?we(ne,"right"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"bottom",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"border"):ne)!=null?we(ne,"bottom"):ne,Q))+"</div></div><div "+((ne=we(de,"class").call(ge,"right",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"margin"):ne)!=null?we(ne,"right"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"bottom",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"margin"):ne)!=null?we(ne,"bottom"):ne,Q))+"</div></div>"+((ne=we(de,"if").call(ge,(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"position"):ne,{name:"if",hash:{},fn:te.program(28,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </div><div "+((ne=we(de,"class").call(ge,"table-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><table><tbody> "+((ne=we(de,"each").call(ge,Q!=null?we(Q,"computedStyle"):Q,{name:"each",hash:{},fn:te.program(30,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </tbody></table></div></div> "},20:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"btn toggle-all-computed-style",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-compress",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div> "},22:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"btn toggle-all-computed-style",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-expand",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div> "},24:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" <div "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+te.escapeExpression(te.lambda(Q!=null?ge(Q,"computedStyleSearchKeyword"):Q,Q))+" </div> "},26:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return"<div "+((ne=we(de,"class").call(ge,"position",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(ge,"label",{name:"class",hash:{},data:_e}))!=null?ne:"")+">position</div><div "+((ne=we(de,"class").call(ge,"top",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"position"):ne)!=null?we(ne,"top"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"left",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"position"):ne)!=null?we(ne,"left"):ne,Q))+"</div>"},28:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return"<div "+((ne=we(de,"class").call(ge,"right",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"position"):ne)!=null?we(ne,"right"):ne,Q))+"</div><br><div "+((ne=we(de,"class").call(ge,"bottom",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye((ne=(ne=Q!=null?we(Q,"boxModel"):Q)!=null?we(ne,"position"):ne)!=null?we(ne,"bottom"):ne,Q))+"</div></div>"},30:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <tr><td "+((ne=ye(de,"class").call(Q!=null?Q:te.nullContext||{},"key",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(ge(_e&&ye(_e,"key"),Q))+"</td><td>"+((ne=ge(Q,Q))!=null?ne:"")+"</td></tr> "},32:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"listeners section",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2>Event Listeners</h2><div "+((ne=ye(de,"class").call(ge,"listener-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"listeners"):Q,{name:"each",hash:{},fn:te.program(33,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </div></div> "},33:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"listener",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"listener-type",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(_e&&ye(_e,"key"),Q))+"</div><ul "+((ne=ye(de,"class").call(ge,"listener-content",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q,{name:"each",hash:{},fn:te.program(34,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </ul></div> "},34:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" <li "+((ne=ge(de,"if").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"useCapture"):Q,{name:"if",hash:{},fn:te.program(35,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"listenerStr"):Q,Q))+"</li> "},35:function(te,Q,de,I,_e){var ne;return(ne=(te.lookupProperty||function(ge,ye){if(Object.prototype.hasOwnProperty.call(ge,ye))return ge[ye]})(de,"class").call(Q!=null?Q:te.nullContext||{},"capture",{name:"class",hash:{},data:_e}))!=null?ne:""},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"parents"):Q,{name:"if",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" <div "+((ne=ye(de,"class").call(ge,"breadcrumb",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=te.lambda(Q!=null?ye(Q,"name"):Q,Q))!=null?ne:"")+" </div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"children"):Q,{name:"if",hash:{},fn:te.program(4,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" <div "+((ne=ye(de,"class").call(ge,"attributes section",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2>Attributes</h2><div "+((ne=ye(de,"class").call(ge,"table-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><table><tbody> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"attributes"):Q,{name:"if",hash:{},fn:te.program(10,_e,0),inverse:te.program(13,_e,0),data:_e}))!=null?ne:"")+" </tbody></table></div></div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"styles"):Q,{name:"if",hash:{},fn:te.program(15,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"computedStyle"):Q,{name:"if",hash:{},fn:te.program(19,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"listeners"):Q,{name:"if",hash:{},fn:te.program(32,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")},useData:!0})},7640:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"entry-btn",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-tool",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div>"},useData:!0})},2861:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <li><h2 "+((ne=xe(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(ye(Q!=null?xe(Q,"name"):Q,Q))+"</h2><div "+((ne=xe(de,"class").call(ge,"content",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+((ne=ye(Q!=null?xe(Q,"val"):Q,Q))!=null?ne:"")+"</div></li> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return"<ul> "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"infos"):Q,{name:"each",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </ul>"},useData:!0})},4854:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Request<div "+((ne=ye(de,"class").call(ge,"btn clear-request",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-clear",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div></div><ul "+((ne=ye(de,"class").call(ge,"requests",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></ul><div "+((ne=ye(de,"class").call(ge,"detail",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></div>"},useData:!0})},1083:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" <pre "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"data",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"data"):Q,Q))+"</pre> "},3:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"reqHeaders"):Q,{name:"each",hash:{},fn:te.program(4,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},4:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <tr><td "+((ne=xe(de,"class").call(Q!=null?Q:te.nullContext||{},"key",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+ye(ge(_e&&xe(_e,"key"),Q))+"</td><td>"+ye(ge(Q,Q))+"</td></tr> "},6:function(te,Q,de,I,_e){return" <tr><td>Empty</td></tr> "},8:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"resHeaders"):Q,{name:"each",hash:{},fn:te.program(4,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},10:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" <pre "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"response",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"resTxt"):Q,Q))+"</pre> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"http",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"breadcrumb",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ye(Q,"url"):Q,Q))+"</div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"data"):Q,{name:"if",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" <div "+((ne=ye(de,"class").call(ge,"section",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2>Request Headers</h2><table "+((ne=ye(de,"class").call(ge,"headers",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><tbody> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"reqHeaders"):Q,{name:"if",hash:{},fn:te.program(3,_e,0),inverse:te.program(6,_e,0),data:_e}))!=null?ne:"")+" </tbody></table><h2>Response Headers</h2><table "+((ne=ye(de,"class").call(ge,"headers",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><tbody> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"resHeaders"):Q,{name:"if",hash:{},fn:te.program(8,_e,0),inverse:te.program(6,_e,0),data:_e}))!=null?ne:"")+" </tbody></table></div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"resTxt"):Q,{name:"if",hash:{},fn:te.program(10,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </div><div "+((ne=ye(de,"class").call(ge,"back",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Back to the List</div>"},useData:!0})},726:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"requests"):Q,{name:"each",hash:{},fn:te.program(2,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},2:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return' <li class="eruda-request '+((ne=we(de,"if").call(ge,Q!=null?we(Q,"hasErr"):Q,{name:"if",hash:{},fn:te.program(3,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+'" data-id="'+xe(ye(_e&&we(_e,"key"),Q))+'"><span '+((ne=we(de,"class").call(ge,"name",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"name"):Q,Q))+"</span><span "+((ne=we(de,"class").call(ge,"status",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"status"):Q,Q))+"</span><span "+((ne=we(de,"class").call(ge,"method",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"method"):Q,Q))+"</span><span "+((ne=we(de,"class").call(ge,"type",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"subType"):Q,Q))+"</span><span "+((ne=we(de,"class").call(ge,"size",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"size"):Q,Q))+"</span><span "+((ne=we(de,"class").call(ge,"time",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"displayTime"):Q,Q))+"</span></li> "},3:function(te,Q,de,I,_e){return"eruda-error"},5:function(te,Q,de,I,_e){var ne;return" <li><span "+((ne=(te.lookupProperty||function(ge,ye){if(Object.prototype.hasOwnProperty.call(ge,ye))return ge[ye]})(de,"class").call(Q!=null?Q:te.nullContext||{},"name",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Empty</span></li> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return(ne=ge(de,"if").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"requests"):Q,{name:"if",hash:{},fn:te.program(1,_e,0),inverse:te.program(5,_e,0),data:_e}))!=null?ne:""},useData:!0})},2875:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return"<div "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"localStoreSearchKeyword"):Q,Q))+"</div>"},3:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"localStoreData"):Q,{name:"each",hash:{},fn:te.program(4,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},4:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <tr><td "+((ne=we(de,"class").call(ge,"key",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"key"):Q,Q))+"</td><td "+((ne=we(de,"class").call(ge,"storage-val",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-key="'+xe(ye(Q!=null?we(Q,"key"):Q,Q))+'" data-type="local">'+xe(ye(Q!=null?we(Q,"val"):Q,Q))+"</td><td "+((ne=we(de,"class").call(ge,"control",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=we(de,"class").call(ge,"icon-delete delete-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-key="'+xe(ye(Q!=null?we(Q,"key"):Q,Q))+'" data-type="local"></span></td></tr> '},6:function(te,Q,de,I,_e){return" <tr><td>Empty</td></tr> "},8:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return"<div "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"sessionStoreSearchKeyword"):Q,Q))+"</div>"},10:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"sessionStoreData"):Q,{name:"each",hash:{},fn:te.program(11,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},11:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <tr><td "+((ne=we(de,"class").call(ge,"key",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"key"):Q,Q))+"</td><td "+((ne=we(de,"class").call(ge,"storage-val",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-key="'+xe(ye(Q!=null?we(Q,"key"):Q,Q))+'" data-type="session">'+xe(ye(Q!=null?we(Q,"val"):Q,Q))+"</td><td "+((ne=we(de,"class").call(ge,"control",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=we(de,"class").call(ge,"icon-delete delete-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-key="'+xe(ye(Q!=null?we(Q,"key"):Q,Q))+'" data-type="session"></span></td></tr> '},13:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return"<div "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"cookieSearchKeyword"):Q,Q))+"</div>"},15:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"cookieData"):Q,{name:"each",hash:{},fn:te.program(16,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},16:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <tr><td "+((ne=we(de,"class").call(ge,"key",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"key"):Q,Q))+"</td><td>"+xe(ye(Q!=null?we(Q,"val"):Q,Q))+"</td><td "+((ne=we(de,"class").call(ge,"control",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=we(de,"class").call(ge,"icon-delete delete-cookie",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-key="'+xe(ye(Q!=null?we(Q,"key"):Q,Q))+'"></span></td></tr> '},18:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"scriptData"):Q,{name:"each",hash:{},fn:te.program(19,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},19:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return' <li><a href="'+ye(ge(Q,Q))+'" target="_blank" '+((ne=xe(de,"class").call(Q!=null?Q:te.nullContext||{},"js-link",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+ye(ge(Q,Q))+"</a></li> "},21:function(te,Q,de,I,_e){return" <li>Empty</li> "},23:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"stylesheetData"):Q,{name:"each",hash:{},fn:te.program(24,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},24:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return' <li><a href="'+ye(ge(Q,Q))+'" target="_blank" '+((ne=xe(de,"class").call(Q!=null?Q:te.nullContext||{},"css-link",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+ye(ge(Q,Q))+"</a></li> "},26:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"iframeData"):Q,{name:"each",hash:{},fn:te.program(27,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},27:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=te.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return' <li><a href="'+ye(ge(Q,Q))+'" target="_blank" '+((ne=xe(de,"class").call(Q!=null?Q:te.nullContext||{},"iframe-link",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+ye(ge(Q,Q))+"</a></li> "},29:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" "+((ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"imageData"):Q,{name:"each",hash:{},fn:te.program(30,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" "},30:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <li "+((ne=ye(de,"class").call(ge,"image",{name:"class",hash:{},data:_e}))!=null?ne:"")+'><img src="'+te.escapeExpression(te.lambda(Q,Q))+'" data-exclude="true" '+((ne=ye(de,"class").call(ge,"img-link",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></li> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"section local-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Local Storage<div "+((ne=ye(de,"class").call(ge,"btn refresh-local-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn clear-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-type="local"><span '+((ne=ye(de,"class").call(ge,"icon-clear",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn search",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-type="local"><span '+((ne=ye(de,"class").call(ge,"icon-search",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"localStoreSearchKeyword"):Q,{name:"if",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </h2><div "+((ne=ye(de,"class").call(ge,"content",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><table><tbody> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"localStoreData"):Q,{name:"if",hash:{},fn:te.program(3,_e,0),inverse:te.program(6,_e,0),data:_e}))!=null?ne:"")+" </tbody></table></div></div><div "+((ne=ye(de,"class").call(ge,"section session-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Session Storage<div "+((ne=ye(de,"class").call(ge,"btn refresh-session-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn clear-storage",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-type="session"><span '+((ne=ye(de,"class").call(ge,"icon-clear",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn search",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-type="session"><span '+((ne=ye(de,"class").call(ge,"icon-search",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"sessionStoreSearchKeyword"):Q,{name:"if",hash:{},fn:te.program(8,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </h2><div "+((ne=ye(de,"class").call(ge,"content",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><table><tbody> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"sessionStoreData"):Q,{name:"if",hash:{},fn:te.program(10,_e,0),inverse:te.program(6,_e,0),data:_e}))!=null?ne:"")+" </tbody></table></div></div><div "+((ne=ye(de,"class").call(ge,ye(de,"concat").call(ge,"section cookie ",Q!=null?ye(Q,"cookieState"):Q,{name:"concat",hash:{},data:_e}),{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Cookie<div "+((ne=ye(de,"class").call(ge,"btn refresh-cookie",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn clear-cookie",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-clear",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div><div "+((ne=ye(de,"class").call(ge,"btn search",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-type="cookie"><span '+((ne=ye(de,"class").call(ge,"icon-search",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"cookieSearchKeyword"):Q,{name:"if",hash:{},fn:te.program(13,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </h2><div "+((ne=ye(de,"class").call(ge,"content",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><table><tbody> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"cookieData"):Q,{name:"if",hash:{},fn:te.program(15,_e,0),inverse:te.program(6,_e,0),data:_e}))!=null?ne:"")+" </tbody></table></div></div><div "+((ne=ye(de,"class").call(ge,ye(de,"concat").call(ge,"section script ",Q!=null?ye(Q,"scriptState"):Q,{name:"concat",hash:{},data:_e}),{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Script<div "+((ne=ye(de,"class").call(ge,"btn refresh-script",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div></h2><ul "+((ne=ye(de,"class").call(ge,"link-list",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"scriptData"):Q,{name:"if",hash:{},fn:te.program(18,_e,0),inverse:te.program(21,_e,0),data:_e}))!=null?ne:"")+" </ul></div><div "+((ne=ye(de,"class").call(ge,ye(de,"concat").call(ge,"section stylesheet ",Q!=null?ye(Q,"stylesheetState"):Q,{name:"concat",hash:{},data:_e}),{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Stylesheet<div "+((ne=ye(de,"class").call(ge,"btn refresh-stylesheet",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div></h2><ul "+((ne=ye(de,"class").call(ge,"link-list",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"stylesheetData"):Q,{name:"if",hash:{},fn:te.program(23,_e,0),inverse:te.program(21,_e,0),data:_e}))!=null?ne:"")+" </ul></div><div "+((ne=ye(de,"class").call(ge,"section iframe",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,"title",{name:"class",hash:{},data:_e}))!=null?ne:"")+">Iframe<div "+((ne=ye(de,"class").call(ge,"btn refresh-iframe",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div></h2><ul "+((ne=ye(de,"class").call(ge,"link-list",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"iframeData"):Q,{name:"if",hash:{},fn:te.program(26,_e,0),inverse:te.program(21,_e,0),data:_e}))!=null?ne:"")+" </ul></div><div "+((ne=ye(de,"class").call(ge,"section image",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><h2 "+((ne=ye(de,"class").call(ge,ye(de,"concat").call(ge,"title ",Q!=null?ye(Q,"imageState"):Q,{name:"concat",hash:{},data:_e}),{name:"class",hash:{},data:_e}))!=null?ne:"")+">Image<div "+((ne=ye(de,"class").call(ge,"btn refresh-image",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><span "+((ne=ye(de,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></div></h2><ul "+((ne=ye(de,"class").call(ge,"image-list",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"if").call(ge,Q!=null?ye(Q,"imageData"):Q,{name:"if",hash:{},fn:te.program(29,_e,0),inverse:te.program(21,_e,0),data:_e}))!=null?ne:"")+" </ul></div>"},useData:!0})},6652:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){return' <li style="background: '+te.escapeExpression(te.lambda(Q,Q))+'"></li> '},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=Q!=null?Q:te.nullContext||{},we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return'<div id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'" '+((ne=we(de,"class").call(xe,"color",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(xe,"head",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+ye(ge(Q!=null?we(Q,"desc"):Q,Q))+" <span "+((ne=we(de,"class").call(xe,"val",{name:"class",hash:{},data:_e}))!=null?ne:"")+' style="background-color: '+ye(ge(Q!=null?we(Q,"val"):Q,Q))+'"></span></div><ul data-id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'"> '+((ne=we(de,"each").call(xe,Q!=null?we(Q,"colors"):Q,{name:"each",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </ul></div>"},useData:!0})},480:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=Q!=null?Q:te.nullContext||{},we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return'<div id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'" '+((ne=we(de,"class").call(xe,"range",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(xe,"head",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+ye(ge(Q!=null?we(Q,"desc"):Q,Q))+" <span "+((ne=we(de,"class").call(xe,"val",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+ye(ge(Q!=null?we(Q,"val"):Q,Q))+"</span></div><div "+((ne=we(de,"class").call(xe,"input-container",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'"><div '+((ne=we(de,"class").call(xe,"range-track",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(xe,"range-track-bar",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(xe,"range-track-progress",{name:"class",hash:{},data:_e}))!=null?ne:"")+' style="width: '+ye(ge(Q!=null?we(Q,"progress"):Q,Q))+'%"></div></div></div><input type="range" min="'+ye(ge(Q!=null?we(Q,"min"):Q,Q))+'" max="'+ye(ge(Q!=null?we(Q,"max"):Q,Q))+'" step="'+ye(ge(Q!=null?we(Q,"step"):Q,Q))+'" value="'+ye(ge(Q!=null?we(Q,"val"):Q,Q))+'"></div></div>'},useData:!0})},1868:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){return" <li>"+te.escapeExpression(te.lambda(Q,Q))+"</li> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=Q!=null?Q:te.nullContext||{},we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return'<div id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'" '+((ne=we(de,"class").call(xe,"select",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(xe,"head",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+ye(ge(Q!=null?we(Q,"desc"):Q,Q))+" <span "+((ne=we(de,"class").call(xe,"val",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+ye(ge(Q!=null?we(Q,"val"):Q,Q))+'</span></div><ul data-id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'"> '+((ne=we(de,"each").call(xe,Q!=null?we(Q,"selections"):Q,{name:"each",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </ul></div>"},useData:!0})},7006:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){return' checked="checked" '},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lambda,ye=te.escapeExpression,xe=Q!=null?Q:te.nullContext||{},we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return'<div id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'" '+((ne=we(de,"class").call(xe,"switch",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+ye(ge(Q!=null?we(Q,"desc"):Q,Q))+" <label "+((ne=we(de,"class").call(xe,"checkbox",{name:"class",hash:{},data:_e}))!=null?ne:"")+'><input type="checkbox" '+((ne=we(de,"class").call(xe,"input",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-id="'+ye(ge(Q!=null?we(Q,"id"):Q,Q))+'" '+((ne=we(de,"if").call(xe,Q!=null?we(Q,"val"):Q,{name:"if",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+"> <span "+((ne=we(de,"class").call(xe,"label",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span> <span "+((ne=we(de,"class").call(xe,"handle",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></span></label></div>"},useData:!0})},1122:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne=te.lambda,ge=te.escapeExpression,ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return' <div class="eruda-section eruda-run" data-idx="'+ge(ne(_e&&ye(_e,"index"),Q))+'"><h2 class="eruda-name">'+ge(ne(Q!=null?ye(Q,"name"):Q,Q))+' <div class="eruda-btn"><span class="eruda-icon-play"></span></div></h2><div class="eruda-description"> '+ge(ne(Q!=null?ye(Q,"desc"):Q,Q))+" </div></div> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return(ne=ge(de,"each").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"snippets"):Q,{name:"each",hash:{},fn:te.program(1,_e,0),inverse:te.noop,data:_e}))!=null?ne:""},useData:!0})},431:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({1:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"code-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><table "+((ne=ye(de,"class").call(ge,"code",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><tbody><tr><td "+((ne=ye(de,"class").call(ge,"gutter",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"code"):Q,{name:"each",hash:{},fn:te.program(2,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </td><td "+((ne=ye(de,"class").call(ge,"content",{name:"class",hash:{},data:_e}))!=null?ne:"")+"> "+((ne=ye(de,"each").call(ge,Q!=null?ye(Q,"code"):Q,{name:"each",hash:{},fn:te.program(4,_e,0),inverse:te.noop,data:_e}))!=null?ne:"")+" </td></tr></tbody></table></div> "},2:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" <div "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"line-num",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ge(Q,"idx"):Q,Q))+"</div> "},4:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return" <pre "+((ne=ge(de,"class").call(Q!=null?Q:te.nullContext||{},"code-line",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+((ne=te.lambda(Q!=null?ge(Q,"val"):Q,Q))!=null?ne:"")+"</pre> "},6:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return" <div "+((ne=ye(de,"class").call(ge,"code-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><pre "+((ne=ye(de,"class").call(ge,"code",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+((ne=te.lambda(Q!=null?ye(Q,"code"):Q,Q))!=null?ne:"")+"</pre></div> "},compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return(ne=ge(de,"if").call(Q!=null?Q:te.nullContext||{},Q!=null?ge(Q,"showLineNum"):Q,{name:"if",hash:{},fn:te.program(1,_e,0),inverse:te.program(6,_e,0),data:_e}))!=null?ne:""},useData:!0})},6680:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=te.lookupProperty||function(ye,xe){if(Object.prototype.hasOwnProperty.call(ye,xe))return ye[xe]};return'<iframe src="'+((ne=te.lambda(Q!=null?ge(Q,"src"):Q,Q))!=null?ne:"")+'"></iframe>'},useData:!0})},2229:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lambda,xe=te.escapeExpression,we=te.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return"<div "+((ne=we(de,"class").call(ge,"image",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=we(de,"class").call(ge,"breadcrumb",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"src"):Q,Q))+"</div><div "+((ne=we(de,"class").call(ge,"img-container",{name:"class",hash:{},data:_e}))!=null?ne:"")+' data-exclude="true"><img src="'+xe(ye(Q!=null?we(Q,"src"):Q,Q))+'"></div><div '+((ne=we(de,"class").call(ge,"img-info",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+xe(ye(Q!=null?we(Q,"width"):Q,Q))+" \xD7 "+xe(ye(Q!=null?we(Q,"height"):Q,Q))+"</div></div>"},useData:!0})},2944:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne;return"<ul "+((ne=(te.lookupProperty||function(ge,ye){if(Object.prototype.hasOwnProperty.call(ge,ye))return ge[ye]})(de,"class").call(Q!=null?Q:te.nullContext||{},"json",{name:"class",hash:{},data:_e}))!=null?ne:"")+"></ul>"},useData:!0})},8191:function(U,G,V){var re=V(9871);U.exports=(re.default||re).template({compiler:[8,">= 4.3.0"],main:function(te,Q,de,I,_e){var ne,ge=Q!=null?Q:te.nullContext||{},ye=te.lookupProperty||function(xe,we){if(Object.prototype.hasOwnProperty.call(xe,we))return xe[we]};return"<div "+((ne=ye(de,"class").call(ge,"raw-wrapper",{name:"class",hash:{},data:_e}))!=null?ne:"")+"><div "+((ne=ye(de,"class").call(ge,"raw",{name:"class",hash:{},data:_e}))!=null?ne:"")+">"+te.escapeExpression(te.lambda(Q!=null?ye(Q,"val"):Q,Q))+"</div></div>"},useData:!0})},9669:function(U,G,V){U.exports=V(1609)},5448:function(U,G,V){var re=V(4867),te=V(6026),Q=V(4372),de=V(5327),I=V(4097),_e=V(4109),ne=V(7985),ge=V(7874),ye=V(2648),xe=V(644),we=V(205);U.exports=function(ke){return new Promise(function(Se,Oe){var Fe,ze=ke.data,Le=ke.headers,We=ke.responseType;function qe(){ke.cancelToken&&ke.cancelToken.unsubscribe(Fe),ke.signal&&ke.signal.removeEventListener("abort",Fe)}re.isFormData(ze)&&re.isStandardBrowserEnv()&&delete Le["Content-Type"];var Ne=new XMLHttpRequest;if(ke.auth){var Ke=ke.auth.username||"",ot=ke.auth.password?unescape(encodeURIComponent(ke.auth.password)):"";Le.Authorization="Basic "+btoa(Ke+":"+ot)}var yt=I(ke.baseURL,ke.url);function ft(){if(Ne){var Qe="getAllResponseHeaders"in Ne?_e(Ne.getAllResponseHeaders()):null,tt={data:We&&We!=="text"&&We!=="json"?Ne.response:Ne.responseText,status:Ne.status,statusText:Ne.statusText,headers:Qe,config:ke,request:Ne};te(function(ht){Se(ht),qe()},function(ht){Oe(ht),qe()},tt),Ne=null}}if(Ne.open(ke.method.toUpperCase(),de(yt,ke.params,ke.paramsSerializer),!0),Ne.timeout=ke.timeout,"onloadend"in Ne?Ne.onloadend=ft:Ne.onreadystatechange=function(){Ne&&Ne.readyState===4&&(Ne.status!==0||Ne.responseURL&&Ne.responseURL.indexOf("file:")===0)&&setTimeout(ft)},Ne.onabort=function(){Ne&&(Oe(new ye("Request aborted",ye.ECONNABORTED,ke,Ne)),Ne=null)},Ne.onerror=function(){Oe(new ye("Network Error",ye.ERR_NETWORK,ke,Ne,Ne)),Ne=null},Ne.ontimeout=function(){var Qe=ke.timeout?"timeout of "+ke.timeout+"ms exceeded":"timeout exceeded",tt=ke.transitional||ge;ke.timeoutErrorMessage&&(Qe=ke.timeoutErrorMessage),Oe(new ye(Qe,tt.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,ke,Ne)),Ne=null},re.isStandardBrowserEnv()){var _t=(ke.withCredentials||ne(yt))&&ke.xsrfCookieName?Q.read(ke.xsrfCookieName):void 0;_t&&(Le[ke.xsrfHeaderName]=_t)}"setRequestHeader"in Ne&&re.forEach(Le,function(Qe,tt){ze===void 0&&tt.toLowerCase()==="content-type"?delete Le[tt]:Ne.setRequestHeader(tt,Qe)}),re.isUndefined(ke.withCredentials)||(Ne.withCredentials=!!ke.withCredentials),We&&We!=="json"&&(Ne.responseType=ke.responseType),typeof ke.onDownloadProgress=="function"&&Ne.addEventListener("progress",ke.onDownloadProgress),typeof ke.onUploadProgress=="function"&&Ne.upload&&Ne.upload.addEventListener("progress",ke.onUploadProgress),(ke.cancelToken||ke.signal)&&(Fe=function(Qe){Ne&&(Oe(!Qe||Qe&&Qe.type?new xe:Qe),Ne.abort(),Ne=null)},ke.cancelToken&&ke.cancelToken.subscribe(Fe),ke.signal&&(ke.signal.aborted?Fe():ke.signal.addEventListener("abort",Fe))),ze||(ze=null);var Je=we(yt);Je&&["http","https","file"].indexOf(Je)===-1?Oe(new ye("Unsupported protocol "+Je+":",ye.ERR_BAD_REQUEST,ke)):Ne.send(ze)})}},1609:function(U,G,V){var re=V(4867),te=V(1849),Q=V(321),de=V(7185),I=function _e(ne){var ge=new Q(ne),ye=te(Q.prototype.request,ge);return re.extend(ye,Q.prototype,ge),re.extend(ye,ge),ye.create=function(xe){return _e(de(ne,xe))},ye}(V(5546));I.Axios=Q,I.CanceledError=V(644),I.CancelToken=V(4972),I.isCancel=V(6502),I.VERSION=V(7288).version,I.toFormData=V(7675),I.AxiosError=V(2648),I.Cancel=I.CanceledError,I.all=function(_e){return Promise.all(_e)},I.spread=V(8713),I.isAxiosError=V(6268),U.exports=I,U.exports.default=I},4972:function(U,G,V){var re=V(644);function te(Q){if(typeof Q!="function")throw new TypeError("executor must be a function.");var de;this.promise=new Promise(function(_e){de=_e});var I=this;this.promise.then(function(_e){if(I._listeners){var ne,ge=I._listeners.length;for(ne=0;ne<ge;ne++)I._listeners[ne](_e);I._listeners=null}}),this.promise.then=function(_e){var ne,ge=new Promise(function(ye){I.subscribe(ye),ne=ye}).then(_e);return ge.cancel=function(){I.unsubscribe(ne)},ge},Q(function(_e){I.reason||(I.reason=new re(_e),de(I.reason))})}te.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},te.prototype.subscribe=function(Q){this.reason?Q(this.reason):this._listeners?this._listeners.push(Q):this._listeners=[Q]},te.prototype.unsubscribe=function(Q){if(this._listeners){var de=this._listeners.indexOf(Q);de!==-1&&this._listeners.splice(de,1)}},te.source=function(){var Q;return{token:new te(function(de){Q=de}),cancel:Q}},U.exports=te},644:function(U,G,V){var re=V(2648);function te(Q){re.call(this,Q==null?"canceled":Q,re.ERR_CANCELED),this.name="CanceledError"}V(4867).inherits(te,re,{__CANCEL__:!0}),U.exports=te},6502:function(U){U.exports=function(G){return!(!G||!G.__CANCEL__)}},321:function(U,G,V){var re=V(4867),te=V(5327),Q=V(782),de=V(3572),I=V(7185),_e=V(4097),ne=V(4875),ge=ne.validators;function ye(xe){this.defaults=xe,this.interceptors={request:new Q,response:new Q}}ye.prototype.request=function(xe,we){typeof xe=="string"?(we=we||{}).url=xe:we=xe||{},(we=I(this.defaults,we)).method?we.method=we.method.toLowerCase():this.defaults.method?we.method=this.defaults.method.toLowerCase():we.method="get";var ke=we.transitional;ke!==void 0&&ne.assertOptions(ke,{silentJSONParsing:ge.transitional(ge.boolean),forcedJSONParsing:ge.transitional(ge.boolean),clarifyTimeoutError:ge.transitional(ge.boolean)},!1);var Se=[],Oe=!0;this.interceptors.request.forEach(function(Ke){typeof Ke.runWhen=="function"&&Ke.runWhen(we)===!1||(Oe=Oe&&Ke.synchronous,Se.unshift(Ke.fulfilled,Ke.rejected))});var Fe,ze=[];if(this.interceptors.response.forEach(function(Ke){ze.push(Ke.fulfilled,Ke.rejected)}),!Oe){var Le=[de,void 0];for(Array.prototype.unshift.apply(Le,Se),Le=Le.concat(ze),Fe=Promise.resolve(we);Le.length;)Fe=Fe.then(Le.shift(),Le.shift());return Fe}for(var We=we;Se.length;){var qe=Se.shift(),Ne=Se.shift();try{We=qe(We)}catch(Ke){Ne(Ke);break}}try{Fe=de(We)}catch(Ke){return Promise.reject(Ke)}for(;ze.length;)Fe=Fe.then(ze.shift(),ze.shift());return Fe},ye.prototype.getUri=function(xe){xe=I(this.defaults,xe);var we=_e(xe.baseURL,xe.url);return te(we,xe.params,xe.paramsSerializer)},re.forEach(["delete","get","head","options"],function(xe){ye.prototype[xe]=function(we,ke){return this.request(I(ke||{},{method:xe,url:we,data:(ke||{}).data}))}}),re.forEach(["post","put","patch"],function(xe){function we(ke){return function(Se,Oe,Fe){return this.request(I(Fe||{},{method:xe,headers:ke?{"Content-Type":"multipart/form-data"}:{},url:Se,data:Oe}))}}ye.prototype[xe]=we(),ye.prototype[xe+"Form"]=we(!0)}),U.exports=ye},2648:function(U,G,V){var re=V(4867);function te(I,_e,ne,ge,ye){Error.call(this),this.message=I,this.name="AxiosError",_e&&(this.code=_e),ne&&(this.config=ne),ge&&(this.request=ge),ye&&(this.response=ye)}re.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Q=te.prototype,de={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(I){de[I]={value:I}}),Object.defineProperties(te,de),Object.defineProperty(Q,"isAxiosError",{value:!0}),te.from=function(I,_e,ne,ge,ye,xe){var we=Object.create(Q);return re.toFlatObject(I,we,function(ke){return ke!==Error.prototype}),te.call(we,I.message,_e,ne,ge,ye),we.name=I.name,xe&&Object.assign(we,xe),we},U.exports=te},782:function(U,G,V){var re=V(4867);function te(){this.handlers=[]}te.prototype.use=function(Q,de,I){return this.handlers.push({fulfilled:Q,rejected:de,synchronous:!!I&&I.synchronous,runWhen:I?I.runWhen:null}),this.handlers.length-1},te.prototype.eject=function(Q){this.handlers[Q]&&(this.handlers[Q]=null)},te.prototype.forEach=function(Q){re.forEach(this.handlers,function(de){de!==null&&Q(de)})},U.exports=te},4097:function(U,G,V){var re=V(1793),te=V(7303);U.exports=function(Q,de){return Q&&!re(de)?te(Q,de):de}},3572:function(U,G,V){var re=V(4867),te=V(8527),Q=V(6502),de=V(5546),I=V(644);function _e(ne){if(ne.cancelToken&&ne.cancelToken.throwIfRequested(),ne.signal&&ne.signal.aborted)throw new I}U.exports=function(ne){return _e(ne),ne.headers=ne.headers||{},ne.data=te.call(ne,ne.data,ne.headers,ne.transformRequest),ne.headers=re.merge(ne.headers.common||{},ne.headers[ne.method]||{},ne.headers),re.forEach(["delete","get","head","post","put","patch","common"],function(ge){delete ne.headers[ge]}),(ne.adapter||de.adapter)(ne).then(function(ge){return _e(ne),ge.data=te.call(ne,ge.data,ge.headers,ne.transformResponse),ge},function(ge){return Q(ge)||(_e(ne),ge&&ge.response&&(ge.response.data=te.call(ne,ge.response.data,ge.response.headers,ne.transformResponse))),Promise.reject(ge)})}},7185:function(U,G,V){var re=V(4867);U.exports=function(te,Q){Q=Q||{};var de={};function I(we,ke){return re.isPlainObject(we)&&re.isPlainObject(ke)?re.merge(we,ke):re.isPlainObject(ke)?re.merge({},ke):re.isArray(ke)?ke.slice():ke}function _e(we){return re.isUndefined(Q[we])?re.isUndefined(te[we])?void 0:I(void 0,te[we]):I(te[we],Q[we])}function ne(we){if(!re.isUndefined(Q[we]))return I(void 0,Q[we])}function ge(we){return re.isUndefined(Q[we])?re.isUndefined(te[we])?void 0:I(void 0,te[we]):I(void 0,Q[we])}function ye(we){return we in Q?I(te[we],Q[we]):we in te?I(void 0,te[we]):void 0}var xe={url:ne,method:ne,data:ne,baseURL:ge,transformRequest:ge,transformResponse:ge,paramsSerializer:ge,timeout:ge,timeoutMessage:ge,withCredentials:ge,adapter:ge,responseType:ge,xsrfCookieName:ge,xsrfHeaderName:ge,onUploadProgress:ge,onDownloadProgress:ge,decompress:ge,maxContentLength:ge,maxBodyLength:ge,beforeRedirect:ge,transport:ge,httpAgent:ge,httpsAgent:ge,cancelToken:ge,socketPath:ge,responseEncoding:ge,validateStatus:ye};return re.forEach(Object.keys(te).concat(Object.keys(Q)),function(we){var ke=xe[we]||_e,Se=ke(we);re.isUndefined(Se)&&ke!==ye||(de[we]=Se)}),de}},6026:function(U,G,V){var re=V(2648);U.exports=function(te,Q,de){var I=de.config.validateStatus;de.status&&I&&!I(de.status)?Q(new re("Request failed with status code "+de.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(de.status/100)-4],de.config,de.request,de)):te(de)}},8527:function(U,G,V){var re=V(4867),te=V(5546);U.exports=function(Q,de,I){var _e=this||te;return re.forEach(I,function(ne){Q=ne.call(_e,Q,de)}),Q}},5546:function(U,G,V){var re=V(4867),te=V(6016),Q=V(2648),de=V(7874),I=V(7675),_e={"Content-Type":"application/x-www-form-urlencoded"};function ne(xe,we){!re.isUndefined(xe)&&re.isUndefined(xe["Content-Type"])&&(xe["Content-Type"]=we)}var ge,ye={transitional:de,adapter:((typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(ge=V(5448)),ge),transformRequest:[function(xe,we){if(te(we,"Accept"),te(we,"Content-Type"),re.isFormData(xe)||re.isArrayBuffer(xe)||re.isBuffer(xe)||re.isStream(xe)||re.isFile(xe)||re.isBlob(xe))return xe;if(re.isArrayBufferView(xe))return xe.buffer;if(re.isURLSearchParams(xe))return ne(we,"application/x-www-form-urlencoded;charset=utf-8"),xe.toString();var ke,Se=re.isObject(xe),Oe=we&&we["Content-Type"];if((ke=re.isFileList(xe))||Se&&Oe==="multipart/form-data"){var Fe=this.env&&this.env.FormData;return I(ke?{"files[]":xe}:xe,Fe&&new Fe)}return Se||Oe==="application/json"?(ne(we,"application/json"),function(ze,Le,We){if(re.isString(ze))try{return(Le||JSON.parse)(ze),re.trim(ze)}catch(qe){if(qe.name!=="SyntaxError")throw qe}return(We||JSON.stringify)(ze)}(xe)):xe}],transformResponse:[function(xe){var we=this.transitional||ye.transitional,ke=we&&we.silentJSONParsing,Se=we&&we.forcedJSONParsing,Oe=!ke&&this.responseType==="json";if(Oe||Se&&re.isString(xe)&&xe.length)try{return JSON.parse(xe)}catch(Fe){if(Oe)throw Fe.name==="SyntaxError"?Q.from(Fe,Q.ERR_BAD_RESPONSE,this,null,this.response):Fe}return xe}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V(1623)},validateStatus:function(xe){return xe>=200&&xe<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};re.forEach(["delete","get","head"],function(xe){ye.headers[xe]={}}),re.forEach(["post","put","patch"],function(xe){ye.headers[xe]=re.merge(_e)}),U.exports=ye},7874:function(U){U.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:function(U){U.exports={version:"0.27.2"}},1849:function(U){U.exports=function(G,V){return function(){for(var re=new Array(arguments.length),te=0;te<re.length;te++)re[te]=arguments[te];return G.apply(V,re)}}},5327:function(U,G,V){var re=V(4867);function te(Q){return encodeURIComponent(Q).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}U.exports=function(Q,de,I){if(!de)return Q;var _e;if(I)_e=I(de);else if(re.isURLSearchParams(de))_e=de.toString();else{var ne=[];re.forEach(de,function(ye,xe){ye!=null&&(re.isArray(ye)?xe+="[]":ye=[ye],re.forEach(ye,function(we){re.isDate(we)?we=we.toISOString():re.isObject(we)&&(we=JSON.stringify(we)),ne.push(te(xe)+"="+te(we))}))}),_e=ne.join("&")}if(_e){var ge=Q.indexOf("#");ge!==-1&&(Q=Q.slice(0,ge)),Q+=(Q.indexOf("?")===-1?"?":"&")+_e}return Q}},7303:function(U){U.exports=function(G,V){return V?G.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):G}},4372:function(U,G,V){var re=V(4867);U.exports=re.isStandardBrowserEnv()?{write:function(te,Q,de,I,_e,ne){var ge=[];ge.push(te+"="+encodeURIComponent(Q)),re.isNumber(de)&&ge.push("expires="+new Date(de).toGMTString()),re.isString(I)&&ge.push("path="+I),re.isString(_e)&&ge.push("domain="+_e),ne===!0&&ge.push("secure"),document.cookie=ge.join("; ")},read:function(te){var Q=document.cookie.match(new RegExp("(^|;\\s*)("+te+")=([^;]*)"));return Q?decodeURIComponent(Q[3]):null},remove:function(te){this.write(te,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(U){U.exports=function(G){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(G)}},6268:function(U,G,V){var re=V(4867);U.exports=function(te){return re.isObject(te)&&te.isAxiosError===!0}},7985:function(U,G,V){var re=V(4867);U.exports=re.isStandardBrowserEnv()?function(){var te,Q=/(msie|trident)/i.test(navigator.userAgent),de=document.createElement("a");function I(_e){var ne=_e;return Q&&(de.setAttribute("href",ne),ne=de.href),de.setAttribute("href",ne),{href:de.href,protocol:de.protocol?de.protocol.replace(/:$/,""):"",host:de.host,search:de.search?de.search.replace(/^\?/,""):"",hash:de.hash?de.hash.replace(/^#/,""):"",hostname:de.hostname,port:de.port,pathname:de.pathname.charAt(0)==="/"?de.pathname:"/"+de.pathname}}return te=I(window.location.href),function(_e){var ne=re.isString(_e)?I(_e):_e;return ne.protocol===te.protocol&&ne.host===te.host}}():function(){return!0}},6016:function(U,G,V){var re=V(4867);U.exports=function(te,Q){re.forEach(te,function(de,I){I!==Q&&I.toUpperCase()===Q.toUpperCase()&&(te[Q]=de,delete te[I])})}},1623:function(U){U.exports=null},4109:function(U,G,V){var re=V(4867),te=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];U.exports=function(Q){var de,I,_e,ne={};return Q&&re.forEach(Q.split(`
`),function(ge){if(_e=ge.indexOf(":"),de=re.trim(ge.substr(0,_e)).toLowerCase(),I=re.trim(ge.substr(_e+1)),de){if(ne[de]&&te.indexOf(de)>=0)return;ne[de]=de==="set-cookie"?(ne[de]?ne[de]:[]).concat([I]):ne[de]?ne[de]+", "+I:I}}),ne}},205:function(U){U.exports=function(G){var V=/^([-+\w]{1,25})(:?\/\/|:)/.exec(G);return V&&V[1]||""}},8713:function(U){U.exports=function(G){return function(V){return G.apply(null,V)}}},7675:function(U,G,V){var re=V(4867);U.exports=function(te,Q){Q=Q||new FormData;var de=[];function I(_e){return _e===null?"":re.isDate(_e)?_e.toISOString():re.isArrayBuffer(_e)||re.isTypedArray(_e)?typeof Blob=="function"?new Blob([_e]):Buffer.from(_e):_e}return function _e(ne,ge){if(re.isPlainObject(ne)||re.isArray(ne)){if(de.indexOf(ne)!==-1)throw Error("Circular reference detected in "+ge);de.push(ne),re.forEach(ne,function(ye,xe){if(!re.isUndefined(ye)){var we,ke=ge?ge+"."+xe:xe;if(ye&&!ge&&typeof ye=="object"){if(re.endsWith(xe,"{}"))ye=JSON.stringify(ye);else if(re.endsWith(xe,"[]")&&(we=re.toArray(ye)))return void we.forEach(function(Se){!re.isUndefined(Se)&&Q.append(ke,I(Se))})}_e(ye,ke)}}),de.pop()}else Q.append(ge,I(ne))}(te),Q}},4875:function(U,G,V){var re=V(7288).version,te=V(2648),Q={};["object","boolean","number","function","string","symbol"].forEach(function(I,_e){Q[I]=function(ne){return typeof ne===I||"a"+(_e<1?"n ":" ")+I}});var de={};Q.transitional=function(I,_e,ne){function ge(ye,xe){return"[Axios v"+re+"] Transitional option '"+ye+"'"+xe+(ne?". "+ne:"")}return function(ye,xe,we){if(I===!1)throw new te(ge(xe," has been removed"+(_e?" in "+_e:"")),te.ERR_DEPRECATED);return _e&&!de[xe]&&(de[xe]=!0,console.warn(ge(xe," has been deprecated since v"+_e+" and will be removed in the near future"))),!I||I(ye,xe,we)}},U.exports={assertOptions:function(I,_e,ne){if(typeof I!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);for(var ge=Object.keys(I),ye=ge.length;ye-- >0;){var xe=ge[ye],we=_e[xe];if(we){var ke=I[xe],Se=ke===void 0||we(ke,xe,I);if(Se!==!0)throw new te("option "+xe+" must be "+Se,te.ERR_BAD_OPTION_VALUE)}else if(ne!==!0)throw new te("Unknown option "+xe,te.ERR_BAD_OPTION)}},validators:Q}},4867:function(U,G,V){var re,te=V(1849),Q=Object.prototype.toString,de=(re=Object.create(null),function(Ne){var Ke=Q.call(Ne);return re[Ke]||(re[Ke]=Ke.slice(8,-1).toLowerCase())});function I(Ne){return Ne=Ne.toLowerCase(),function(Ke){return de(Ke)===Ne}}function _e(Ne){return Array.isArray(Ne)}function ne(Ne){return Ne===void 0}var ge=I("ArrayBuffer");function ye(Ne){return Ne!==null&&typeof Ne=="object"}function xe(Ne){if(de(Ne)!=="object")return!1;var Ke=Object.getPrototypeOf(Ne);return Ke===null||Ke===Object.prototype}var we=I("Date"),ke=I("File"),Se=I("Blob"),Oe=I("FileList");function Fe(Ne){return Q.call(Ne)==="[object Function]"}var ze=I("URLSearchParams");function Le(Ne,Ke){if(Ne!=null)if(typeof Ne!="object"&&(Ne=[Ne]),_e(Ne))for(var ot=0,yt=Ne.length;ot<yt;ot++)Ke.call(null,Ne[ot],ot,Ne);else for(var ft in Ne)Object.prototype.hasOwnProperty.call(Ne,ft)&&Ke.call(null,Ne[ft],ft,Ne)}var We,qe=(We=typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array),function(Ne){return We&&Ne instanceof We});U.exports={isArray:_e,isArrayBuffer:ge,isBuffer:function(Ne){return Ne!==null&&!ne(Ne)&&Ne.constructor!==null&&!ne(Ne.constructor)&&typeof Ne.constructor.isBuffer=="function"&&Ne.constructor.isBuffer(Ne)},isFormData:function(Ne){var Ke="[object FormData]";return Ne&&(typeof FormData=="function"&&Ne instanceof FormData||Q.call(Ne)===Ke||Fe(Ne.toString)&&Ne.toString()===Ke)},isArrayBufferView:function(Ne){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(Ne):Ne&&Ne.buffer&&ge(Ne.buffer)},isString:function(Ne){return typeof Ne=="string"},isNumber:function(Ne){return typeof Ne=="number"},isObject:ye,isPlainObject:xe,isUndefined:ne,isDate:we,isFile:ke,isBlob:Se,isFunction:Fe,isStream:function(Ne){return ye(Ne)&&Fe(Ne.pipe)},isURLSearchParams:ze,isStandardBrowserEnv:function(){return(typeof navigator=="undefined"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window!="undefined"&&typeof document!="undefined"},forEach:Le,merge:function Ne(){var Ke={};function ot(_t,Je){xe(Ke[Je])&&xe(_t)?Ke[Je]=Ne(Ke[Je],_t):xe(_t)?Ke[Je]=Ne({},_t):_e(_t)?Ke[Je]=_t.slice():Ke[Je]=_t}for(var yt=0,ft=arguments.length;yt<ft;yt++)Le(arguments[yt],ot);return Ke},extend:function(Ne,Ke,ot){return Le(Ke,function(yt,ft){Ne[ft]=ot&&typeof yt=="function"?te(yt,ot):yt}),Ne},trim:function(Ne){return Ne.trim?Ne.trim():Ne.replace(/^\s+|\s+$/g,"")},stripBOM:function(Ne){return Ne.charCodeAt(0)===65279&&(Ne=Ne.slice(1)),Ne},inherits:function(Ne,Ke,ot,yt){Ne.prototype=Object.create(Ke.prototype,yt),Ne.prototype.constructor=Ne,ot&&Object.assign(Ne.prototype,ot)},toFlatObject:function(Ne,Ke,ot){var yt,ft,_t,Je={};Ke=Ke||{};do{for(ft=(yt=Object.getOwnPropertyNames(Ne)).length;ft-- >0;)Je[_t=yt[ft]]||(Ke[_t]=Ne[_t],Je[_t]=!0);Ne=Object.getPrototypeOf(Ne)}while(Ne&&(!ot||ot(Ne,Ke))&&Ne!==Object.prototype);return Ke},kindOf:de,kindOfTest:I,endsWith:function(Ne,Ke,ot){Ne=String(Ne),(ot===void 0||ot>Ne.length)&&(ot=Ne.length),ot-=Ke.length;var yt=Ne.indexOf(Ke,ot);return yt!==-1&&yt===ot},toArray:function(Ne){if(!Ne)return null;var Ke=Ne.length;if(ne(Ke))return null;for(var ot=new Array(Ke);Ke-- >0;)ot[Ke]=Ne[Ke];return ot},isTypedArray:qe,isFileList:Oe}},2895:function(U,G,V){V.d(G,{default:function(){return yh}});var re={};function te(lt,St){if(!(lt instanceof St))throw new TypeError("Cannot call a class as a function")}function Q(lt,St){for(var wt=0;wt<St.length;wt++){var Ge=St[wt];Ge.enumerable=Ge.enumerable||!1,Ge.configurable=!0,"value"in Ge&&(Ge.writable=!0),Object.defineProperty(lt,Ge.key,Ge)}}function de(lt,St,wt){return St&&Q(lt.prototype,St),wt&&Q(lt,wt),Object.defineProperty(lt,"prototype",{writable:!1}),lt}function I(lt,St){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(wt,Ge){return wt.__proto__=Ge,wt},I(lt,St)}function _e(lt,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");lt.prototype=Object.create(St&&St.prototype,{constructor:{value:lt,writable:!0,configurable:!0}}),Object.defineProperty(lt,"prototype",{writable:!1}),St&&I(lt,St)}function ne(lt){return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St},ne(lt)}function ge(lt){if(lt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return lt}function ye(lt,St){if(St&&(ne(St)==="object"||typeof St=="function"))return St;if(St!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(lt)}function xe(lt){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(St){return St.__proto__||Object.getPrototypeOf(St)},xe(lt)}V.r(re),V.d(re,{$:function(){return Oe()},$attr:function(){return ze()},$class:function(){return We()},$css:function(){return Ne()},$data:function(){return ot()},$event:function(){return ft()},$insert:function(){return Je()},$offset:function(){return tt()},$property:function(){return it()},$remove:function(){return vt()},$safeEls:function(){return Nt()},$show:function(){return Mt()},Class:function(){return Tn()},Emitter:function(){return on()},Enum:function(){return Rt()},LocalStore:function(){return un()},Logger:function(){return In()},MediaQuery:function(){return $t()},MutationObserver:function(){return xn()},Select:function(){return $n()},SingleEmitter:function(){return vn()},Stack:function(){return Sn()},Store:function(){return tr()},Url:function(){return Xn()},ajax:function(){return cn()},allKeys:function(){return On()},before:function(){return _r()},camelCase:function(){return Dr()},castPath:function(){return Lr()},clamp:function(){return Vr()},clone:function(){return Oi()},cloneDeep:function(){return Ai()},concat:function(){return Fo()},contain:function(){return vi()},copy:function(){return Lt()},create:function(){return mt()},createAssigner:function(){return Ut()},dateFormat:function(){return pn()},debounce:function(){return rn()},defaults:function(){return Nn()},defineProp:function(){return Hn()},delegate:function(){return wr()},detectBrowser:function(){return Er()},detectOs:function(){return Qr()},difference:function(){return ti()},each:function(){return mn()},endWith:function(){return Ti()},escape:function(){return Aa()},escapeJsStr:function(){return hl()},escapeRegExp:function(){return ca()},extend:function(){return Mr()},extendOwn:function(){return Mo()},extractUrls:function(){return Ir()},filter:function(){return ua()},flatten:function(){return fo()},freeze:function(){return Yc()},getProto:function(){return dl()},has:function(){return rc()},highlight:function(){return Zi()},identity:function(){return ic()},idxOf:function(){return oo()},inherits:function(){return oc()},isArgs:function(){return Mi()},isArr:function(){return Ss()},isArrLike:function(){return ji()},isBool:function(){return Ms()},isBrowser:function(){return Os()},isBuffer:function(){return Yu()},isDarkMode:function(){return Ta()},isDate:function(){return Jc()},isEl:function(){return so()},isEmpty:function(){return Ro()},isErr:function(){return _l()},isFn:function(){return Rs()},isHidden:function(){return $s()},isMatch:function(){return eh()},isMiniProgram:function(){return th()},isMobile:function(){return Ca()},isNaN:function(){return gl()},isNil:function(){return Xa()},isNull:function(){return No()},isNum:function(){return jo()},isObj:function(){return zs()},isPrimitive:function(){return Sa()},isPromise:function(){return bl()},isRegExp:function(){return hc()},isSorted:function(){return Ka()},isStr:function(){return $o()},isUndef:function(){return wl()},kebabCase:function(){return Ya()},keys:function(){return Jo()},last:function(){return Ls()},linkify:function(){return Al()},loadJs:function(){return Tl()},lowerCase:function(){return Uo()},lpad:function(){return ru()},ltrim:function(){return kl()},map:function(){return Pa()},mapObj:function(){return fc()},matcher:function(){return _c()},memStorage:function(){return mc()},memoize:function(){return Cl()},mergeArr:function(){return Sl()},meta:function(){return Pl()},ms:function(){return Fs()},nextTick:function(){return Qa()},noop:function(){return Ia()},now:function(){return cu()},objToStr:function(){return Il()},once:function(){return hu()},optimizeCb:function(){return vc()},orientation:function(){return Ns()},partial:function(){return Ml()},perfNow:function(){return js()},pick:function(){return Ma()},prefix:function(){return fu()},property:function(){return Jr()},query:function(){return _u()},raf:function(){return Gs()},repeat:function(){return ma()},restArgs:function(){return ts()},reverse:function(){return Ol()},root:function(){return Ac()},rtrim:function(){return Tc()},safeCb:function(){return is()},safeGet:function(){return lo()},safeSet:function(){return Cc()},sameOrigin:function(){return xo()},slice:function(){return Ws()},some:function(){return Xs()},sortKeys:function(){return Rl()},splitCase:function(){return ch()},startWith:function(){return os()},stringify:function(){return Pc()},stringifyAll:function(){return Ys()},throttle:function(){return Oa()},toArr:function(){return Js()},toInt:function(){return vu()},toNum:function(){return as()},toSrc:function(){return xu()},toStr:function(){return ss()},trim:function(){return ta()},type:function(){return hh()},types:function(){return Bl()},uncaught:function(){return bo()},uniqId:function(){return Ra()},unique:function(){return na()},upperFirst:function(){return ls()},values:function(){return cs()},viewportScale:function(){return Mc()},wrap:function(){return ku()},xpath:function(){return Su()}});var we=V(8384),ke=V.n(we),Se=V(1512),Oe=V.n(Se),Fe=V(4991),ze=V.n(Fe),Le=V(7781),We=V.n(Le),qe=V(975),Ne=V.n(qe),Ke=V(8381),ot=V.n(Ke),yt=V(5543),ft=V.n(yt),_t=V(8908),Je=V.n(_t),Qe=V(6906),tt=V.n(Qe),ht=V(4209),it=V.n(ht),pt=V(6757),vt=V.n(pt),ut=V(2341),Nt=V.n(ut),at=V(7665),Mt=V.n(at),nn=V(7496),Tn=V.n(nn),Jt=V(1443),on=V.n(Jt),Vt=V(9640),Rt=V.n(Vt),Yt=V(125),un=V.n(Yt),yn=V(4989),In=V.n(yn),It=V(2765),$t=V.n(It),an=V(2289),xn=V.n(an),En=V(3244),$n=V.n(En),zn=V(8985),vn=V.n(zn),wn=V(9001),Sn=V.n(wn),Jn=V(5128),tr=V.n(Jn),pr=V(6334),Xn=V.n(pr),Gn=V(8991),cn=V.n(Gn),gn=V(1116),On=V.n(gn),Kn=V(5637),_r=V.n(Kn),kr=V(7494),Dr=V.n(kr),xr=V(1694),Lr=V.n(xr),Br=V(9882),Vr=V.n(Br),jr=V(4675),Oi=V.n(jr),Di=V(550),Ai=V.n(Di),Cr=V(8099),Fo=V.n(Cr),Ea=V(6341),vi=V.n(Ea),sa=V(2327),Lt=V.n(sa),ct=V(1662),mt=V.n(ct),Dt=V(4427),Ut=V.n(Dt),tn=V(4407),pn=V.n(tn),hn=V(6049),rn=V.n(hn),fn=V(4193),Nn=V.n(fn),ar=V(9803),Hn=V.n(ar),br=V(2443),wr=V.n(br),mr=V(4541),Er=V.n(mr),zr=V(6954),Qr=V.n(zr),oi=V(801),ti=V.n(oi),vr=V(3783),mn=V.n(vr),po=V(4858),Ti=V.n(po),la=V(8901),Aa=V.n(la),Io=V(4187),hl=V.n(Io),Ku=V(2337),ca=V.n(Ku),sr=V(6329),Mr=V.n(sr),Fr=V(3021),Mo=V.n(Fr),Oo=V(2581),Ir=V.n(Oo),As=V(5972),ua=V.n(As),Ts=V(288),fo=V.n(Ts),xi=V(4454),Yc=V.n(xi),Za=V(415),dl=V.n(Za),ha=V(6257),rc=V.n(ha),da=V(3651),Zi=V.n(da),ri=V(6362),ic=V.n(ri),ks=V(496),oo=V.n(ks),ao=V(5022),oc=V.n(ao),pa=V(7403),Mi=V.n(pa),Cs=V(6472),Ss=V.n(Cs),Ps=V(1369),ji=V.n(Ps),Is=V(4696),Ms=V.n(Is),yo=V(2727),Os=V.n(yo),pl=V(2349),Yu=V.n(pl),ac=V(2520),Ta=V.n(ac),Ju=V(2106),Jc=V.n(Ju),ka=V(9833),so=V.n(ka),fl=V(8887),Ro=V.n(fl),sc=V(2749),_l=V.n(sc),Qu=V(4777),Rs=V.n(Qu),ml=V(9585),$s=V.n(ml),Qc=V(7949),eh=V.n(Qc),eu=V(9537),th=V.n(eu),vo=V(9956),Ca=V.n(vo),lc=V(9433),gl=V.n(lc),cc=V(2763),Xa=V.n(cc),yl=V(6156),No=V.n(yl),fa=V(3990),jo=V.n(fa),vl=V(5166),zs=V.n(vl),xl=V(6997),Sa=V.n(xl),Kr=V(4321),bl=V.n(Kr),uc=V(1754),hc=V.n(uc),qr=V(3843),Ka=V.n(qr),Ds=V(6768),$o=V.n(Ds),dc=V(1286),wl=V.n(dc),_a=V(7622),Ya=V.n(_a),nh=V(2533),Jo=V.n(nh),El=V(9702),Ls=V.n(El),pc=V(3988),Al=V.n(pc),tu=V(9622),Tl=V.n(tu),nu=V(3063),Uo=V.n(nu),Ja=V(5351),ru=V.n(Ja),Bs=V(7767),kl=V.n(Bs),Vo=V(2461),Pa=V.n(Vo),iu=V(8820),fc=V.n(iu),ou=V(4491),_c=V.n(ou),au=V(5026),mc=V.n(au),rh=V(1475),Cl=V.n(rh),ih=V(9971),Sl=V.n(ih),su=V(8573),Pl=V.n(su),oh=V(4677),Fs=V.n(oh),lu=V(6837),Qa=V.n(lu),gc=V(1214),Ia=V.n(gc),ah=V(8847),cu=V.n(ah),sh=V(106),Il=V.n(sh),uu=V(8763),hu=V.n(uu),yc=V(3955),vc=V.n(yc),du=V(442),Ns=V.n(du),xc=V(4198),Ml=V.n(xc),Qo=V(1194),js=V.n(Qo),pu=V(3487),Ma=V.n(pu),es=V(747),fu=V.n(es),bc=V(2994),Jr=V.n(bc),Us=V(1745),_u=V.n(Us),Vs=V(1571),Gs=V.n(Vs),lh=V(4552),ma=V.n(lh),wc=V(1137),ts=V.n(wc),Ec=V(1527),Ol=V.n(Ec),ns=V(5610),Ac=V.n(ns),Hs=V(3597),Tc=V.n(Hs),rs=V(2838),is=V.n(rs),lr=V(7653),lo=V.n(lr),kc=V(8079),Cc=V.n(kc),qs=V(4224),xo=V.n(qs),Sc=V(9677),Ws=V.n(Sc),Zs=V(6053),Xs=V.n(Zs),mu=V(3629),Rl=V.n(mu),ea=V(8935),ch=V.n(ea),uh=V(6930),os=V.n(uh),$l=V(4400),Pc=V.n($l),Ks=V(9963),Ys=V.n(Ks),Xi=V(2439),Oa=V.n(Xi),gu=V(1352),Js=V.n(gu),yu=V(9296),vu=V.n(yu),zl=V(3875),as=V.n(zl),Dl=V(300),xu=V.n(Dl),bu=V(3367),ss=V.n(bu),wu=V(4331),ta=V.n(wu),Gi=V(3085),hh=V.n(Gi),Ll=V(9016),Bl=V.n(Ll),Eu=V(5484),bo=V.n(Eu),Ic=V(5229),Ra=V.n(Ic),wo=V(42),na=V.n(wo),cr=V(3023),ls=V.n(cr),Au=V(2578),cs=V.n(Au),Qs=V(3514),Mc=V.n(Qs),Tu=V(5491),ku=V.n(Tu),Cu=V(8933),Su=V.n(Cu),el=new(on());el.ADD="ADD",el.SHOW="SHOW",el.SCALE="SCALE";var ai=el;function Fl(lt,St){for(;!Object.prototype.hasOwnProperty.call(lt,St)&&(lt=xe(lt))!==null;);return lt}function pi(){return pi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(lt,St,wt){var Ge=Fl(lt,St);if(Ge){var nt=Object.getOwnPropertyDescriptor(Ge,St);return nt.get?nt.get.call(arguments.length<3?lt:wt):nt.value}},pi.apply(this,arguments)}var Hi=Tn()({init:function(lt){this._$el=lt},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),Oc=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Rc=Oc.length;function $c(lt){for(var St={},wt=0;wt<Rc;wt++)St[Oc[wt]]=lt[wt];return St}function _o(lt){return Ss()(lt)&&(lt=$c(lt)),lt.darkerBackground||(lt.darkerBackground=lt.contrast),Mr()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},lt)}function ga(lt){return Ss()(lt)&&(lt=$c(lt)),lt.darkerBackground||(lt.darkerBackground=lt.contrast),Mr()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},lt)}var zc=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],ya={Light:ga({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:_o({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":_o(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":_o(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":ga(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":_o(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":_o(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":_o(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:_o(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":_o(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":_o(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":ga(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":_o(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":ga(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:ga(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":_o(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":ga(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},tl=V(2234),Nl=V.n(tl),ra=[],Dc=1,jl=ya.Light,zo=function lt(St,wt){St=ss()(St);for(var Ge=0,nt=ra.length;Ge<nt;Ge++)if(ra[Ge].css===St)return;wt=wt||lt.container||document.head;var bt=document.createElement("style");bt.type="text/css",wt.appendChild(bt);var jt={css:St,el:bt,container:wt};return Ul(jt),ra.push(jt),jt};function Lc(){mn()(ra,function(lt){return Ul(lt)})}function Ul(lt){var St=lt.css,wt=lt.el;St=(St=St.replace(/(\d+)px/g,function(nt,bt){return+bt*Dc+"px"})).replace(/_/g,"eruda-"),mn()(Nl(),function(nt,bt){St=St.replace(new RegExp(ca()("$".concat(nt,":")),"g"),bt+":")});var Ge=Jo()(ya.Light);mn()(Ge,function(nt){St=St.replace(new RegExp("var\\(--".concat(Ya()(nt),"\\)"),"g"),jl[nt])}),wt.innerText=St}zo.setScale=function(lt){Dc=lt,Lc()},zo.setTheme=function(lt){jl=$o()(lt)?ya[lt]||ya.Light:Nn()(lt,ya.Light),Lc()},zo.getCurTheme=function(){return jl},zo.getThemes=function(){return ya},zo.clear=function(){mn()(ra,function(lt){var St=lt.container,wt=lt.el;return St.removeChild(wt)}),ra=[]},zo.remove=function(lt){ra=ua()(ra,function(St){return St!==lt}),lt.container.removeChild(lt.el)};var Hr=zo;function Bc(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var Vl,nl,Fc,Nc,rl,us,be=function(lt){_e(wt,lt);var St=Bc(wt);function wt(){var Ge;return te(this,wt),(Ge=St.call(this))._style=Hr(V(6836)),Ge.name="settings",Ge._switchTpl=V(7006),Ge._selectTpl=V(1868),Ge._rangeTpl=V(480),Ge._colorTpl=V(6652),Ge._settings=[],Ge}return de(wt,[{key:"init",value:function(Ge){pi(xe(wt.prototype),"init",this).call(this,Ge),this._bindEvent()}},{key:"remove",value:function(Ge,nt){var bt=this;return $o()(Ge)?this._$el.find(".eruda-text").each(function(){var jt=Oe()(this);jt.text()===Ge&&jt.remove()}):this._settings=ua()(this._settings,function(jt){return jt.config!==Ge||jt.key!==nt||(bt._$el.find("#"+jt.id).remove(),!1)}),this._cleanSeparator(),this}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._$el.html("")}},{key:"switch",value:function(Ge,nt,bt){var jt=this._genId("settings");return this._settings.push({config:Ge,key:nt,id:jt}),this._$el.append(this._switchTpl({desc:bt,key:nt,id:jt,val:Ge.get(nt)})),this}},{key:"color",value:function(Ge,nt,bt){var jt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["#2196f3","#707d8b","#f44336","#009688","#ffc107"],ln=this._genId("settings");return this._settings.push({config:Ge,key:nt,id:ln}),this._$el.append(this._colorTpl({desc:bt,colors:jt,id:ln,val:Ge.get(nt)})),this}},{key:"select",value:function(Ge,nt,bt,jt){var ln=this._genId("settings");return this._settings.push({config:Ge,key:nt,id:ln}),this._$el.append(this._selectTpl({desc:bt,selections:jt,id:ln,val:Ge.get(nt)})),this}},{key:"range",value:function(Ge,nt,bt,jt){var ln=jt.min,Pn=ln===void 0?0:ln,jn=jt.max,ur=jn===void 0?1:jn,rr=jt.step,Si=rr===void 0?.1:rr,Bi=this._genId("settings");this._settings.push({config:Ge,key:nt,min:Pn,max:ur,step:Si,id:Bi});var To=Ge.get(nt);return this._$el.append(this._rangeTpl({desc:bt,min:Pn,max:ur,step:Si,val:To,progress:q(To,Pn,ur),id:Bi})),this}},{key:"separator",value:function(){return this._$el.append('<div class="eruda-separator"></div>'),this}},{key:"text",value:function(Ge){return this._$el.append('<div class="eruda-text">'.concat(Ge,"</div>")),this}},{key:"_cleanSeparator",value:function(){var Ge=Oi()(this._$el.get(0).children);function nt(ln){return ln.getAttribute("class")==="eruda-separator"}for(var bt=0,jt=Ge.length;bt<jt-1;bt++)nt(Ge[bt])&&nt(Ge[bt+1])&&Oe()(Ge[bt]).remove()}},{key:"_genId",value:function(){return Ra()("eruda-settings")}},{key:"_closeAll",value:function(){this._$el.find(".eruda-open").rmClass("eruda-open")}},{key:"_getSetting",value:function(Ge){var nt;return mn()(this._settings,function(bt){bt.id===Ge&&(nt=bt)}),nt}},{key:"_bindEvent",value:function(){var Ge=this;this._$el.on("click",".eruda-checkbox",function(){var nt=Oe()(this).find("input"),bt=nt.data("id"),jt=nt.get(0).checked,ln=Ge._getSetting(bt);ln.config.set(ln.key,jt)}).on("click",".eruda-select .eruda-head",function(){var nt=Oe()(this).parent().find("ul"),bt=nt.hasClass("eruda-open");Ge._closeAll(),bt?nt.rmClass("eruda-open"):nt.addClass("eruda-open")}).on("click",".eruda-select li",function(){var nt=Oe()(this),bt=nt.parent(),jt=nt.text(),ln=bt.data("id"),Pn=Ge._getSetting(ln);bt.rmClass("eruda-open"),bt.parent().find(".eruda-head span").text(jt),Pn.config.set(Pn.key,jt)}).on("click",".eruda-range .eruda-head",function(){var nt=Oe()(this).parent().find(".eruda-input-container"),bt=nt.hasClass("eruda-open");Ge._closeAll(),bt?nt.rmClass("eruda-open"):nt.addClass("eruda-open")}).on("change",".eruda-range input",function(){var nt=Oe()(this),bt=nt.parent().data("id"),jt=+nt.val(),ln=Ge._getSetting(bt);ln.config.set(ln.key,jt)}).on("input",".eruda-range input",function(){var nt=Oe()(this),bt=nt.parent(),jt=bt.data("id"),ln=+nt.val(),Pn=Ge._getSetting(jt),jn=Pn.min,ur=Pn.max;bt.parent().find(".eruda-head span").text(ln),bt.find(".eruda-range-track-progress").css("width",q(ln,jn,ur)+"%")}).on("click",".eruda-color .eruda-head",function(){var nt=Oe()(this).parent().find("ul"),bt=nt.hasClass("eruda-open");Ge._closeAll(),bt?nt.rmClass("eruda-open"):nt.addClass("eruda-open")}).on("click",".eruda-color li",function(){var nt=Oe()(this),bt=nt.parent(),jt=nt.css("background-color"),ln=bt.data("id"),Pn=Ge._getSetting(ln);bt.rmClass("eruda-open"),bt.parent().find(".eruda-head span").css("background-color",jt),Pn.config.set(Pn.key,jt)})}}],[{key:"createCfg",value:function(Ge,nt){return new(un())("eruda-"+Ge,nt)}}]),wt}(Hi),q=function(lt,St,wt){return((lt-St)/(wt-St)*100).toFixed(2)},ce=(typeof window=="undefined"?"undefined":ne(window))==="object"&&(typeof document=="undefined"?"undefined":ne(document))==="object"&&document.nodeType===9,Te=function(lt){return lt=function(St){var wt=ne(St);return!!St&&(wt==="function"||wt==="object")},lt}({}),Ie=function(lt){return lt==null?"":lt.toString()},Re=(Vl=Object.prototype.hasOwnProperty,function(lt,St){return Vl.call(lt,St)}),Be=Object.keys?Object.keys:function(lt){var St=[];for(var wt in lt)Re(lt,wt)&&St.push(wt);return St},Ue=function(lt){lt=function(wt){if(!Te(wt))return{};if(St)return St(wt);function Ge(){}return Ge.prototype=wt,new Ge};var St=Object.create;return lt}({}),He=function(lt){return lt=function(St,wt){St.prototype=Ue(wt.prototype)},lt}({}),Ye=function(lt){return lt===void 0},et=function(lt){return lt=function(St,wt,Ge){if(Ye(wt))return St;switch(Ge==null?3:Ge){case 1:return function(nt){return St.call(wt,nt)};case 3:return function(nt,bt,jt){return St.call(wt,nt,bt,jt)};case 4:return function(nt,bt,jt,ln){return St.call(wt,nt,bt,jt,ln)}}return function(){return St.apply(wt,arguments)}},lt}({}),dt=function(lt){var St=lt?lt.length:0;if(St)return lt[St-1]},xt=function(lt){return lt},Pt=(nl=Object.prototype.toString,function(lt){return nl.call(lt)}),kt=function(lt){return Pt(lt)==="[object Arguments]"},Tt=Array.isArray?Array.isArray:function(lt){return Pt(lt)==="[object Array]"},Ct=function(lt){lt=function(Ge,nt){if(Tt(Ge))return Ge;if(nt&&Re(nt,Ge))return[Ge];var bt=[];return Ge.replace(St,function(jt,ln,Pn,jn){bt.push(Pn?jn.replace(wt,"$1"):ln||jt)}),bt};var St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,wt=/\\(\\)?/g;return lt}({}),Et=function(lt,St){var wt;for(wt=(St=Ct(St,lt)).shift();!Ye(wt);){if((lt=lt[wt])==null)return;wt=St.shift()}return lt},zt=function(lt){var St=Pt(lt);return St==="[object Function]"||St==="[object GeneratorFunction]"||St==="[object AsyncFunction]"},Ot=(Fc=Object.getPrototypeOf,Nc={}.constructor,function(lt){if(Te(lt)){if(Fc)return Fc(lt);var St=lt.__proto__;return St||St===null?St:zt(lt.constructor)?lt.constructor.prototype:lt instanceof Nc?Nc.prototype:void 0}}),Qt=typeof wx!="undefined"&&zt(wx.openLocation),Kt=function(lt){return Pt(lt)==="[object Number]"},Gt=(rl=Math.pow(2,53)-1,function(lt){if(!lt)return!1;var St=lt.length;return Kt(St)&&St>=0&&St<=rl&&!zt(lt)}),Xt=function(lt,St,wt){var Ge,nt;if(St=et(St,wt),Gt(lt))for(Ge=0,nt=lt.length;Ge<nt;Ge++)St(lt[Ge],Ge,lt);else{var bt=Be(lt);for(Ge=0,nt=bt.length;Ge<nt;Ge++)St(lt[bt[Ge]],bt[Ge],lt)}return lt},Wt=function(lt){return lt=function(St,wt){return function(Ge){return Xt(arguments,function(nt,bt){if(bt!==0){var jt=St(nt);Xt(jt,function(ln){wt&&!Ye(Ge[ln])||(Ge[ln]=nt[ln])})}}),Ge}},lt}({}),sn=Wt(Be),_n=function(lt){return Pt(lt)==="[object String]"},qn=function(lt){return lt==null||(Gt(lt)&&(Tt(lt)||_n(lt)||kt(lt))?lt.length===0:Be(lt).length===0)},dn=function(lt,St){var wt=Be(St),Ge=wt.length;if(lt==null)return!Ge;lt=Object(lt);for(var nt=0;nt<Ge;nt++){var bt=wt[nt];if(St[bt]!==lt[bt]||!(bt in lt))return!1}return!0},Rn=(us=/^\s+/,function(lt,St){if(St==null)return lt.trimLeft?lt.trimLeft():lt.replace(us,"");for(var wt,Ge,nt=0,bt=lt.length,jt=St.length,ln=!0;ln&&nt<bt;)for(ln=!1,wt=-1,Ge=lt.charAt(nt);++wt<jt;)if(Ge===St[wt]){ln=!0,nt++;break}return nt>=bt?"":lt.substr(nt,bt)}),Fn=function(lt){return lt=sn({},lt),function(St){return dn(St,lt)}},Qn=function(lt){lt={getItem:function(jt){return(wt[jt]?St[jt]:this[jt])||null},setItem:function(jt,ln){wt[jt]?St[jt]=ln:this[jt]=ln},removeItem:function(jt){wt[jt]?delete St[jt]:delete this[jt]},key:function(jt){var ln=Ge();return jt>=0&&jt<ln.length?ln[jt]:null},clear:function(){for(var jt,ln=nt(),Pn=0;jt=ln[Pn];Pn++)delete this[jt];ln=bt();for(var jn,ur=0;jn=ln[ur];ur++)delete St[jn]}},Object.defineProperty(lt,"length",{enumerable:!1,configurable:!0,get:function(){return Ge().length}});var St={},wt={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Ge(){return nt().concat(bt())}function nt(){return Be(lt).filter(function(jt){return!wt[jt]})}function bt(){return Be(St)}return lt}({}),kn=function(lt){return Tt(lt)?function(wt){return Et(wt,lt)}:(St=lt,function(wt){return wt==null?void 0:wt[St]});var St},Wn=function(lt,St,wt){return lt==null?xt:zt(lt)?et(lt,St,wt):Te(lt)&&!Tt(lt)?Fn(lt):kn(lt)},Dn=function(lt,St,wt){var Ge=[];return St=Wn(St,wt),Xt(lt,function(nt,bt,jt){St(nt,bt,jt)&&Ge.push(nt)}),Ge},ir=function(lt){function St(wt,Ge){return wt===Ge}return function(wt,Ge){return Ge=Ge||St,Dn(wt,function(nt,bt,jt){for(var ln=jt.length;++bt<ln;)if(Ge(nt,jt[bt]))return!1;return!0})}}(),er=function(lt){var St=Object.getOwnPropertyNames,wt=Object.getOwnPropertySymbols;return lt=function(Ge){var nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},bt=nt.prototype,jt=bt===void 0||bt,ln=nt.unenumerable,Pn=ln!==void 0&&ln,jn=nt.symbol,ur=jn!==void 0&&jn,rr=[];if((Pn||ur)&&St){var Si=Be;Pn&&St&&(Si=St);do rr=rr.concat(Si(Ge)),ur&&wt&&(rr=rr.concat(wt(Ge)));while(jt&&(Ge=Ot(Ge))&&Ge!==Object.prototype);rr=ir(rr)}else if(jt)for(var Bi in Ge)rr.push(Bi);else rr=Be(Ge);return rr},lt}({}),dr=Wt(er),gr=function(lt,St,wt){St=Wn(St,wt);for(var Ge=!Gt(lt)&&Be(lt),nt=(Ge||lt).length,bt=Array(nt),jt=0;jt<nt;jt++){var ln=Ge?Ge[jt]:jt;bt[jt]=St(lt[ln],ln,lt)}return bt},Ar=function(lt){return lt?Tt(lt)?lt:Gt(lt)&&!_n(lt)?gr(lt):[lt]:[]},Ur=function(lt){var St=(lt=function(wt,Ge){return St.extend(wt,Ge)}).Base=function wt(Ge,nt,bt){bt=bt||{};var jt=nt.className||Et(nt,"initialize.name")||"";delete nt.className;var ln=function(){var Pn=Ar(arguments);return this.initialize&&this.initialize.apply(this,Pn)||this};if(!Qt)try{ln=new Function("toArr","return function "+jt+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(Ar)}catch{}return He(ln,Ge),ln.prototype.constructor=ln,ln.extend=function(Pn,jn){return wt(ln,Pn,jn)},ln.inherits=function(Pn){He(ln,Pn)},ln.methods=function(Pn){return dr(ln.prototype,Pn),ln},ln.statics=function(Pn){return dr(ln,Pn),ln},ln.methods(nt).statics(bt),ln}(Object,{className:"Base",callSuper:function(wt,Ge,nt){return wt.prototype[Ge].apply(this,nt)},toString:function(){return this.constructor.name}});return lt}({}),fr=function(lt){if(Kt(lt))return lt;if(Te(lt)){var St=zt(lt.valueOf)?lt.valueOf():lt;lt=Te(St)?St+"":St}return _n(lt)?+lt:lt===0?lt:+lt},Sr=function(lt){return fr(lt.replace("px",""))},Wr=function(lt,St){if(St==null){if(lt.trimRight)return lt.trimRight();St=` \r
	\f\v`}for(var wt,Ge,nt=lt.length-1,bt=St.length,jt=!0;jt&&nt>=0;)for(jt=!1,wt=-1,Ge=lt.charAt(nt);++wt<bt;)if(Ge===St[wt]){jt=!0,nt--;break}return nt>=0?lt.substring(0,nt+1):""},li=function(lt,St){return St==null&&lt.trim?lt.trim():Rn(Wr(lt,St),St)},bi=function(lt){lt={parse:function(wt){var Ge={};return wt=li(wt).replace(St,""),Xt(wt.split("&"),function(nt){var bt=nt.split("="),jt=bt.shift(),ln=bt.length>0?bt.join("="):null;jt=decodeURIComponent(jt),ln=decodeURIComponent(ln),Ye(Ge[jt])?Ge[jt]=ln:Tt(Ge[jt])?Ge[jt].push(ln):Ge[jt]=[Ge[jt],ln]}),Ge},stringify:function(wt,Ge){return Dn(gr(wt,function(nt,bt){return Te(nt)&&qn(nt)?"":Tt(nt)?lt.stringify(nt,bt):encodeURIComponent(Ge||bt)+"="+encodeURIComponent(nt)}),function(nt){return nt.length>0}).join("&")}};var St=/^(\?|#|&)/g;return lt}({}),ii=function(lt){lt=Ur({className:"Url",initialize:function(nt){!nt&&ce&&(nt=window.location.href),dr(this,lt.parse(nt||""))},setQuery:function(nt,bt){var jt=this.query;return Te(nt)?Xt(nt,function(ln,Pn){jt[Pn]=Ie(ln)}):jt[nt]=Ie(bt),this},rmQuery:function(nt){var bt=this.query;return Tt(nt)||(nt=Ar(nt)),Xt(nt,function(jt){delete bt[jt]}),this},toString:function(){return lt.stringify(this)}},{parse:function(nt){var bt={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},jt=li(nt),ln=!1,Pn=jt.match(St);if(Pn&&(Pn=Pn[0],bt.protocol=Pn.toLowerCase(),jt=jt.substr(Pn.length)),Pn&&(ln=jt.substr(0,2)==="//")&&(jt=jt.slice(2),bt.slashes=!0),ln){for(var jn=jt,ur=-1,rr=0,Si=Ge.length;rr<Si;rr++){var Bi=jt.indexOf(Ge[rr]);Bi!==-1&&(ur===-1||Bi<ur)&&(ur=Bi)}ur>-1&&(jn=jt.slice(0,ur),jt=jt.slice(ur));var To=jn.lastIndexOf("@");To!==-1&&(bt.auth=decodeURIComponent(jn.slice(0,To)),jn=jn.slice(To+1)),bt.hostname=jn;var qo=jn.match(wt);qo&&((qo=qo[0])!==":"&&(bt.port=qo.substr(1)),bt.hostname=jn.substr(0,jn.length-qo.length))}var si=jt.indexOf("#");si!==-1&&(bt.hash=jt.substr(si),jt=jt.slice(0,si));var wi=jt.indexOf("?");return wi!==-1&&(bt.query=bi.parse(jt.substr(wi+1)),jt=jt.slice(0,wi)),bt.pathname=jt||"/",bt},stringify:function(nt){var bt=nt.protocol+(nt.slashes?"//":"")+(nt.auth?encodeURIComponent(nt.auth)+"@":"")+nt.hostname+(nt.port?":"+nt.port:"")+nt.pathname;return qn(nt.query)||(bt+="?"+bi.stringify(nt.query)),nt.hash&&(bt+=nt.hash),bt}});var St=/^([a-z0-9.+-]+:)/i,wt=/:[0-9]*$/,Ge=["/","?","#"];return lt}({}),qi=function(lt){var St=dt(lt.split("/"));return St.indexOf("?")>-1&&(St=li(St.split("?")[0])),St===""&&(St=(lt=new ii(lt)).hostname),St},Eo=function(lt){return lt=function(St,wt){var Ge;switch(Ye(wt)&&(wt=!0),St){case"local":Ge=window.localStorage;break;case"session":Ge=window.sessionStorage}try{var nt="test-localStorage-"+Date.now();Ge.setItem(nt,nt);var bt=Ge.getItem(nt);if(Ge.removeItem(nt),bt!==nt)throw new Error}catch{return wt?Qn:void 0}return Ge},lt}({});function ia(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var fi=function(lt){_e(wt,lt);var St=ia(wt);function wt(Ge){var nt;return te(this,wt),(nt=St.call(this))._style=Hr(V(7693)),nt._$container=Ge,nt._appendTpl(),nt._makeDraggable(),nt._bindEvent(),nt._registerListener(),nt}return de(wt,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(Ge){this._isOutOfRange(Ge)&&(Ge=this._getDefPos()),this._$el.css({left:Ge.x,top:Ge.y}),this.config.set("pos",Ge)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){Hr.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(Ge){Ge=Ge||this.config.get("pos");var nt=this._getDefPos();return Ge.x>nt.x+10||Ge.x<0||Ge.y<0||Ge.y>nt.y+10}},{key:"_registerListener",value:function(){var Ge=this;this._scaleListener=function(){return Qa()(function(){Ge._isOutOfRange()&&Ge._resetPos()})},ai.on(ai.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){ai.off(ai.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ge=this._$container;Ge.append(V(7640)()),this._$el=Ge.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(Ge){var nt=this.config,bt=nt.get("pos"),jt=this._getDefPos();nt.get("rememberPos")&&!Ge||(bt=jt),this.setPos(bt)}},{key:"_bindEvent",value:function(){var Ge=this,nt=this._draggabilly,bt=this._$el;nt.on("staticClick",function(){return Ge.emit("click")}).on("dragStart",function(){return bt.addClass("eruda-active")}),nt.on("dragEnd",function(){var jt=Ge.config;jt.get("rememberPos")&&jt.set("pos",{x:Sr(Ge._$el.css("left")),y:Sr(Ge._$el.css("top"))}),bt.rmClass("eruda-active")}),Ns().on("change",function(){return Ge._resetPos(!0)}),window.addEventListener("resize",function(){return Ge._resetPos()})}},{key:"_makeDraggable",value:function(){this._draggabilly=new(ke())(this._$el.get(0),{containment:!0})}},{key:"initCfg",value:function(Ge){var nt=this.config=be.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});Ge.separator().switch(nt,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var Ge=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-Ge,y:window.innerHeight-Ge}}}]),wt}(on());function yi(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var Rr,Ri=function(lt){_e(wt,lt);var St=yi(wt);function wt(Ge){var nt;return te(this,wt),(nt=St.call(this))._style=Hr(V(3409)),nt._$el=Ge.find(".eruda-nav-bar"),nt._$bottomBar=Ge.find(".eruda-bottom-bar"),nt._len=0,nt._bindEvent(),nt}return de(wt,[{key:"add",value:function(Ge){var nt=this._$el;this._len++;var bt=nt.find(".eruda-nav-bar-item").last(),jt='<div class="eruda-nav-bar-item">'.concat(Ge,"</div>");bt.length>0&&bt.text()==="settings"?bt.before(jt):nt.append(jt),this.resetBottomBar()}},{key:"remove",value:function(Ge){this._len--,this._$el.find(".eruda-nav-bar-item").each(function(){var nt=Oe()(this);nt.text().toLowerCase()===Ge.toLowerCase()&&nt.remove()}),this.resetBottomBar()}},{key:"activateTool",value:function(Ge){var nt=this;this._$el.find(".eruda-nav-bar-item").each(function(){var bt=Oe()(this);bt.text()===Ge?(bt.addClass("eruda-active"),nt.resetBottomBar(),nt._scrollItemToView()):bt.rmClass("eruda-active")})}},{key:"destroy",value:function(){Hr.remove(this._style),this._$el.remove()}},{key:"_scrollItemToView",value:function(){var Ge,nt=this._$el,bt=nt.find(".eruda-active").get(0),jt=nt.get(0),ln=bt.offsetLeft,Pn=bt.offsetWidth,jn=jt.offsetWidth,ur=jt.scrollLeft;ln<ur?Ge=ln:ln+Pn>jn+ur&&(Ge=ln+Pn-jn),jo()(Ge)&&(jt.scrollLeft=Ge)}},{key:"resetBottomBar",value:function(){var Ge=this._$bottomBar,nt=this._$el,bt=nt.find(".eruda-active").get(0);bt&&Ge.css({width:bt.offsetWidth,left:bt.offsetLeft-nt.get(0).scrollLeft})}},{key:"_bindEvent",value:function(){var Ge=this,nt=this;this._$el.on("click",".eruda-nav-bar-item",function(){nt.emit("showTool",Oe()(this).text())}).on("scroll",function(){return Ge.resetBottomBar()})}}]),wt}(on()),$i=Rr=new(In())("[Eruda]","warn");Rr.formatter=function(lt,St){return St.unshift(this.name),St};var ci=V(6093),Ki=V.n(ci);function $a(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var eo=function(lt){_e(wt,lt);var St=$a(wt);function wt(Ge){var nt,bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},jt=bt.defaults,ln=jt===void 0?{}:jt;return te(this,wt),(nt=St.call(this))._defCfg=Mr()({transparency:1,displaySize:80,theme:Ta()()?"Dark":"Light"},ln),nt._style=Hr(V(9217)),nt.$container=Ge,nt._isShow=!1,nt._opacity=1,nt._tools={},nt._isResizing=!1,nt._resizeTimer=null,nt._resizeStartY=0,nt._resizeStartSize=0,nt._appendTpl(),nt._initNavBar(),nt._initNotification(),nt._bindEvent(),nt}return de(wt,[{key:"show",value:function(){var Ge=this;return this._isShow=!0,this._$el.show(),this._navBar.resetBottomBar(),setTimeout(function(){Ge._$el.css("opacity",Ge._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var Ge=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return Ge._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(Ge){if(!(Ge instanceof Hi)){var nt=new Hi,bt=nt.init,jt=nt.show,ln=nt.hide,Pn=nt.destroy;Nn()(Ge,{init:bt,show:jt,hide:ln,destroy:Pn})}var jn=Ge.name;return jn?(jn=jn.toLowerCase(),this._tools[jn]?$i.warn("Tool ".concat(jn," already exists")):(this._$tools.prepend('<div id="eruda-'.concat(jn,'" class="eruda-').concat(jn,' eruda-tool"></div>')),Ge.init(this._$tools.find(".eruda-".concat(jn,".eruda-tool")),this),Ge.active=!1,this._tools[jn]=Ge,this._navBar.add(jn),this)):$i.error("You must specify a name for a tool")}},{key:"remove",value:function(Ge){var nt=this._tools;if(!nt[Ge])return $i.warn("Tool ".concat(Ge," doesn't exist"));this._navBar.remove(Ge);var bt=nt[Ge];if(delete nt[Ge],bt.active){var jt=Jo()(nt);jt.length>0&&this.showTool(nt[Ls()(jt)].name)}return bt.destroy(),this}},{key:"removeAll",value:function(){var Ge=this;return mn()(this._tools,function(nt){return Ge.remove(nt.name)}),this}},{key:"get",value:function(Ge){var nt=this._tools[Ge];if(nt)return nt}},{key:"showTool",value:function(Ge){if(this._curTool===Ge)return this;this._curTool=Ge;var nt=this._tools,bt=nt[Ge];if(bt){var jt={};return mn()(nt,function(ln){ln.active&&(jt=ln,ln.active=!1,ln.hide())}),bt.active=!0,bt.show(),this._navBar.activateTool(Ge),this.emit("showTool",Ge,jt),this}}},{key:"initCfg",value:function(Ge){var nt=this,bt=this.config=be.createCfg("dev-tools",this._defCfg);this._setTransparency(bt.get("transparency")),this._setDisplaySize(bt.get("displaySize")),this._setTheme(bt.get("theme")),bt.on("change",function(jt,ln){switch(jt){case"transparency":return nt._setTransparency(ln);case"displaySize":return nt._setDisplaySize(ln);case"theme":return nt._setTheme(ln)}}),Ge.separator().select(bt,"theme","Theme",Jo()(Hr.getThemes())).range(bt,"transparency","Transparency",{min:.2,max:1,step:.01}).range(bt,"displaySize","Display Size",{min:40,max:100,step:1}).separator()}},{key:"notify",value:function(Ge,nt){this._notification.notify(Ge,nt)}},{key:"destroy",value:function(){Hr.remove(this._style),this.removeAll(),this._navBar.destroy(),this._$el.remove()}},{key:"_setTheme",value:function(Ge){var nt=this.$container;(function(bt){return vi()(zc,bt)})(Ge)?nt.addClass("eruda-dark"):nt.rmClass("eruda-dark"),Hr.setTheme(Ge)}},{key:"_setTransparency",value:function(Ge){jo()(Ge)&&(this._opacity=Ge,this._isShow&&this._$el.css({opacity:Ge}))}},{key:"_setDisplaySize",value:function(Ge){jo()(Ge)&&this._$el.css({height:Ge+"%"})}},{key:"_appendTpl",value:function(){var Ge=this.$container;Ge.append(V(8269)()),this._$el=Ge.find(".eruda-dev-tools"),this._$tools=this._$el.find(".eruda-tools")}},{key:"_initNavBar",value:function(){var Ge=this;this._navBar=new Ri(this._$el.find(".eruda-nav-bar-container")),this._navBar.on("showTool",function(nt){return Ge.showTool(nt)})}},{key:"_initNotification",value:function(){this._notification=new(Ki())(this._$el.find(".eruda-notification").get(0),{position:{x:"center",y:"top"}})}},{key:"_bindEvent",value:function(){var Ge=this,nt=this._$el.find(".eruda-nav-bar"),bt=function(rr){rr=rr.origEvent,Ge._resizeTimer=setTimeout(function(){rr.preventDefault(),rr.stopPropagation(),Ge._isResizing=!0,Ge._resizeStartSize=Ge.config.get("displaySize"),Ge._resizeStartY=jn(rr),nt.css("filter","brightness(1.2)")},1e3)},jt=Oa()(function(rr){return Ge.config.set("displaySize",rr)},50),ln=function(rr){if(!Ge._isResizing)return clearTimeout(Ge._resizeTimer);rr.preventDefault(),rr.stopPropagation(),rr=rr.origEvent;var Si=Math.round((Ge._resizeStartY-jn(rr))/window.innerHeight*100),Bi=Ge._resizeStartSize+Si;Bi<40?Bi=40:Bi>100&&(Bi=100),jt(Bi)},Pn=function(){clearTimeout(Ge._resizeTimer),Ge._isResizing=!1,nt.css("filter","brightness(1)")},jn=function(rr){return rr.clientY?rr.clientY:rr.touches?rr.touches[0].clientY:0};nt.on("contextmenu",function(rr){return rr.preventDefault()});var ur=Oe()(document.documentElement);Ca()()?(nt.on("touchstart",bt).on("touchmove",ln),ur.on("touchend",Pn)):(nt.on("mousedown",bt),ur.on("mousemove",ln),ur.on("mouseup",Pn))}}]),wt}(on());function mo(lt,St,wt){return St in lt?Object.defineProperty(lt,St,{value:wt,enumerable:!0,configurable:!0,writable:!0}):lt[St]=wt,lt}var za=V(7132),Da=V.n(za);function to(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}bo().start();var La=function(lt){_e(wt,lt);var St=to(wt);function wt(){var Ge,nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},bt=nt.name,jt=bt===void 0?"console":bt;return te(this,wt),mo(ge(Ge=St.call(this)),"_handleShow",function(){$s()(Ge._$el.get(0))||Ge._logger.renderViewport()}),mo(ge(Ge),"_handleErr",function(ln){Ge._logger.error(ln)}),on().mixin(ge(Ge)),Ge.name=jt,Ge._scale=1,Ge._selectedLog=null,Ge._registerListener(),Ge}return de(wt,[{key:"init",value:function(Ge,nt){pi(xe(wt.prototype),"init",this).call(this,Ge),this._container=nt,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){pi(xe(wt.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var Ge=this,nt=this._origConsole={},bt=window.console;return Go.forEach(function(jt){var ln=nt[jt]=Ia();bt[jt]&&(ln=nt[jt]=bt[jt].bind(bt)),bt[jt]=function(){Ge[jt].apply(Ge,arguments),ln.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(Ge,nt){this._logger.setGlobal(Ge,nt)}},{key:"restoreConsole",value:function(){var Ge=this;return this._origConsole?(Go.forEach(function(nt){return window.console[nt]=Ge._origConsole[nt]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return bo().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return bo().rmListener(this._handleErr),this}},{key:"destroy",value:function(){this._logger.destroy(),pi(xe(wt.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&Hr.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._unregisterListener(),this._rmCfg()}},{key:"_enableJsExecution",value:function(Ge){var nt=this._$el,bt=nt.find(".eruda-console-container"),jt=nt.find(".eruda-js-input");Ge?(jt.show(),bt.rmClass("eruda-js-input-hidden")):(jt.hide(),bt.addClass("eruda-js-input-hidden"))}},{key:"_registerListener",value:function(){var Ge=this;this._scaleListener=function(nt){return Ge._scale=nt},ai.on(ai.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){ai.off(ai.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ge=this._$el;this._style=Hr(V(3816)),Ge.append(V(4432)());var nt=Ge.find(".eruda-js-input"),bt=nt.find("textarea"),jt=nt.find(".eruda-buttons");Object.assign(this,{_$control:Ge.find(".eruda-control"),_$logs:Ge.find(".eruda-logs-container"),_$inputContainer:nt,_$input:bt,_$inputBtns:jt,_$searchKeyword:Ge.find(".eruda-search-keyword")})}},{key:"_initLogger",value:function(){var Ge=this.config,nt=Ge.get("maxLogNum");nt=nt==="infinite"?0:+nt;var bt=this._$control.find(".eruda-filter"),jt=new(Da())(this._$logs.get(0),{asyncRender:Ge.get("asyncRender"),maxNum:nt,showHeader:Ge.get("displayExtraInfo"),unenumerable:Ge.get("displayUnenumerable"),accessGetter:Ge.get("displayGetterVal"),lazyEvaluation:Ge.get("lazyEvaluation")});jt.on("optionChange",function(ln,Pn){ln==="filter"&&bt.each(function(){var jn=Oe()(this),ur=jn.data("filter")===Pn;jn[ur?"addClass":"rmClass"]("eruda-active")})}),Ge.get("overrideConsole")&&this.overrideConsole(),this._logger=jt}},{key:"_exposeLogger",value:function(){var Ge=this,nt=this._logger;["filter","html"].concat(Go).forEach(function(bt){return Ge[bt]=function(){for(var jt=arguments.length,ln=new Array(jt),Pn=0;Pn<jt;Pn++)ln[Pn]=arguments[Pn];return nt[bt].apply(nt,ln),Ge.emit.apply(Ge,[bt].concat(ln)),Ge}})}},{key:"_bindEvent",value:function(){var Ge=this,nt=this._container,bt=this._$input,jt=this._$inputBtns,ln=this._$control,Pn=this._$searchKeyword,jn=this._logger,ur=this.config;ln.on("click",".eruda-clear-console",function(){return jn.clear(!0)}).on("click",".eruda-filter",function(){Pn.text(""),jn.setOption("filter",Oe()(this).data("filter"))}).on("click",".eruda-search",function(){var rr=prompt("Filter");No()(rr)||(Pn.text(rr),ta()(rr)!==""?jn.setOption("filter",new RegExp(ca()(Uo()(rr)))):jn.setOption("filter","all"))}).on("click",".eruda-copy",function(){Ge._selectedLog&&(Ge._selectedLog.copy(),nt.notify("Copied"))}),jt.on("click",".eruda-cancel",function(){return Ge._hideInput()}).on("click",".eruda-execute",function(){var rr=bt.val().trim();rr!==""&&(jn.evaluate(rr),bt.val("").get(0).blur(),Ge._hideInput())}),bt.on("focusin",function(){return Ge._showInput()}),jn.on("insert",function(rr){rr.type==="error"&&ur.get("displayIfErr")&&nt.showTool("console").show()}),jn.on("select",function(rr){Ge._selectedLog=rr,ln.find(".eruda-icon-copy").rmClass("eruda-icon-disabled")}),jn.on("deselect",function(){Ge._selectedLog=null,ln.find(".eruda-icon-copy").addClass("eruda-icon-disabled")}),nt.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass("eruda-active"),this._$inputBtns.hide()}},{key:"_showInput",value:function(){this._$inputContainer.addClass("eruda-active"),this._$inputBtns.show()}},{key:"_rmCfg",value:function(){var Ge=this.config,nt=this._container.get("settings");nt&&nt.remove(Ge,"asyncRender").remove(Ge,"jsExecution").remove(Ge,"catchGlobalErr").remove(Ge,"overrideConsole").remove(Ge,"displayExtraInfo").remove(Ge,"displayUnenumerable").remove(Ge,"displayGetterVal").remove(Ge,"lazyEvaluation").remove(Ge,"displayIfErr").remove(Ge,"maxLogNum").remove(ls()(this.name))}},{key:"_initCfg",value:function(){var Ge=this,nt=this._container,bt=this.config=be.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(bt.get("jsExecution")),bt.get("catchGlobalErr")&&this.catchGlobalErr(),bt.on("change",function(ln,Pn){var jn=Ge._logger;switch(ln){case"asyncRender":return jn.setOption("asyncRender",Pn);case"jsExecution":return Ge._enableJsExecution(Pn);case"catchGlobalErr":return Pn?Ge.catchGlobalErr():Ge.ignoreGlobalErr();case"overrideConsole":return Pn?Ge.overrideConsole():Ge.restoreConsole();case"maxLogNum":return jn.setOption("maxNum",Pn==="infinite"?0:+Pn);case"displayExtraInfo":return jn.setOption("showHeader",Pn);case"displayUnenumerable":return jn.setOption("unenumerable",Pn);case"displayGetterVal":return jn.setOption("accessGetter",Pn);case"lazyEvaluation":return jn.setOption("lazyEvaluation",Pn)}});var jt=nt.get("settings");jt&&jt.text(ls()(this.name)).switch(bt,"asyncRender","Asynchronous Rendering").switch(bt,"jsExecution","Enable JavaScript Execution").switch(bt,"catchGlobalErr","Catch Global Errors").switch(bt,"overrideConsole","Override Console").switch(bt,"displayIfErr","Auto Display If Error Occurs").switch(bt,"displayExtraInfo","Display Extra Information").switch(bt,"displayUnenumerable","Display Unenumerable Properties").switch(bt,"displayGetterVal","Access Getter Value").switch(bt,"lazyEvaluation","Lazy Evaluation").select(bt,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),wt}(Hi),Go=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],il=V(9143),Zh=V.n(il),Xh=V(2139),Kh=V(8689),dh=V(7935),Yh=V(9119);function ph(lt,St){var wt=Object.keys(lt);if(Object.getOwnPropertySymbols){var Ge=Object.getOwnPropertySymbols(lt);St&&(Ge=Ge.filter(function(nt){return Object.getOwnPropertyDescriptor(lt,nt).enumerable})),wt.push.apply(wt,Ge)}return wt}function fh(lt){for(var St=1;St<arguments.length;St++){var wt=arguments[St]!=null?arguments[St]:{};St%2?ph(Object(wt),!0).forEach(function(Ge){mo(lt,Ge,wt[Ge])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(wt)):ph(Object(wt)).forEach(function(Ge){Object.defineProperty(lt,Ge,Object.getOwnPropertyDescriptor(wt,Ge))})}return lt}var Gl=new(Zh());Gl.register("Network",Xh),Gl.register("Overlay",Kh),Gl.register("DOM",fh(fh({},dh),{},{getNodeId:dh.getDOMNodeId})),Gl.register("Storage",Yh);var Ao=Gl;function Jh(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var Qh=function(lt){_e(wt,lt);var St=Jh(wt);function wt(){var Ge;return te(this,wt),mo(ge(Ge=St.call(this)),"_reqWillBeSent",function(nt){Ge._requests[nt.requestId]={name:qi(nt.request.url),url:nt.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:nt.request.postData,method:nt.request.method,startTime:1e3*nt.timestamp,time:0,resTxt:"",done:!1,reqHeaders:nt.request.headers||{},resHeaders:{}}}),mo(ge(Ge),"_resReceivedExtraInfo",function(nt){var bt=Ge._requests[nt.requestId];bt&&(bt.resHeaders=nt.headers,Ge._updateType(bt),Ge._render())}),mo(ge(Ge),"_resReceived",function(nt){var bt=Ge._requests[nt.requestId];if(bt){var jt=nt.response,ln=jt.status,Pn=jt.headers;bt.status=ln,(ln<200||ln>=300)&&(bt.hasErr=!0),Pn&&(bt.resHeaders=Pn,Ge._updateType(bt)),Ge._render()}}),mo(ge(Ge),"_loadingFinished",function(nt){var bt=Ge._requests[nt.requestId];if(bt){var jt=1e3*nt.timestamp;bt.time=jt-bt.startTime,bt.displayTime=Fs()(bt.time),bt.size=nt.encodedDataLength,bt.done=!0,bt.resTxt=Ao.domain("Network").getResponseBody({requestId:nt.requestId}).body,Ge._render()}}),Ge._style=Hr(V(3985)),Ge.name="network",Ge._requests={},Ge._tpl=V(4854),Ge._detailTpl=V(1083),Ge._requestsTpl=V(726),Ge._detailData={},Ge}return de(wt,[{key:"init",value:function(Ge,nt){pi(xe(wt.prototype),"init",this).call(this,Ge),this._container=nt,this._bindEvent(),this._appendTpl()}},{key:"show",value:function(){pi(xe(wt.prototype),"show",this).call(this),this._render()}},{key:"clear",value:function(){this._requests={},this._render()}},{key:"requests",value:function(){var Ge=[];return mn()(this._requests,function(nt){Ge.push(nt)}),Ge}},{key:"_updateType",value:function(Ge){var nt=function(ln){if(!ln)return"unknown";var Pn=ln.split(";")[0].split("/");return{type:Pn[0],subType:Ls()(Pn)}}(Ge.resHeaders["content-type"]||""),bt=nt.type,jt=nt.subType;Ge.type=bt,Ge.subType=jt}},{key:"_bindEvent",value:function(){var Ge=this,nt=this._$el,bt=this._container,jt=this;function ln(jn,ur){var rr=bt.get("sources");rr&&(rr.set(jn,ur),bt.showTool("sources"))}nt.on("click",".eruda-request",function(){var jn=Oe()(this).data("id"),ur=jt._requests[jn];ur.done&&jt._showDetail(ur)}).on("click",".eruda-clear-request",function(){return Ge.clear()}).on("click",".eruda-back",function(){return Ge._hideDetail()}).on("click",".eruda-http .eruda-response",function(){var jn=Ge._detailData,ur=jn.resTxt;switch(jn.subType){case"css":return ln("css",ur);case"html":return ln("html",ur);case"javascript":return ln("js",ur);case"json":return ln("object",ur)}if(jn.type==="image")return ln("img",jn.url)}),Ao.domain("Network").enable();var Pn=Ao.domain("Network");Pn.on("requestWillBeSent",this._reqWillBeSent),Pn.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Pn.on("responseReceived",this._resReceived),Pn.on("loadingFinished",this._loadingFinished)}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),Hr.remove(this._style);var Ge=Ao.domain("Network");Ge.off("requestWillBeSent",this._reqWillBeSent),Ge.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),Ge.off("responseReceived",this._resReceived),Ge.off("loadingFinished",this._loadingFinished)}},{key:"_showDetail",value:function(Ge){Ge.resTxt&&ta()(Ge.resTxt)===""&&delete Ge.resTxt,Ro()(Ge.resHeaders)&&delete Ge.resHeaders,Ro()(Ge.reqHeaders)&&delete Ge.reqHeaders,this._$detail.html(this._detailTpl(Ge)).show(),this._detailData=Ge}},{key:"_hideDetail",value:function(){this._$detail.hide()}},{key:"_appendTpl",value:function(){var Ge=this._$el;Ge.html(this._tpl()),this._$detail=Ge.find(".eruda-detail"),this._$requests=Ge.find(".eruda-requests")}},{key:"_render",value:function(){if(this.active){var Ge={};Ro()(this._requests)||(Ge.requests=this._requests),this._renderHtml(this._requestsTpl(Ge))}}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$requests.html(Ge))}}]),wt}(Hi);function ed(lt){for(var St={},wt=0,Ge=lt.length;wt<Ge;wt++){var nt=lt[wt];lt[nt]!=="initial"&&(St[nt]=lt[nt])}return function(bt){return Rl()(bt,{comparator:function(jt,ln){for(var Pn=jt.length,jn=ln.length,ur=Pn>jn?jn:Pn,rr=0;rr<ur;rr++){var Si=jc(jt.charCodeAt(rr),ln.charCodeAt(rr));if(Si!==0)return Si}return Pn>jn?1:Pn<jn?-1:0}})}(St)}var td=Element.prototype,Pu=function(){return!1};td.webkitMatchesSelector?Pu=function(lt,St){return lt.webkitMatchesSelector(St)}:td.mozMatchesSelector&&(Pu=function(lt,St){return lt.mozMatchesSelector(St)});var Xd=function(){function lt(St){te(this,lt),this._el=St}return de(lt,[{key:"getComputedStyle",value:function(){return ed(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var St=this,wt=[];return mn()(document.styleSheets,function(Ge){try{if(!Ge.cssRules)return}catch{return}mn()(Ge.cssRules,function(nt){var bt=!1;try{bt=St._elMatchesSel(nt.selectorText)}catch{}bt&&wt.push({selectorText:nt.selectorText,style:ed(nt.style)})})}),wt}},{key:"_elMatchesSel",value:function(St){return Pu(this._el,St)}}]),lt}();function jc(lt,St){return(lt=nd(lt))>(St=nd(St))?1:lt<St?-1:0}function nd(lt){return lt===45?123:lt}var Iu=function(){function lt(){te(this,lt),this._isShow=!1,Ao.domain("Overlay").enable()}return de(lt,[{key:"setEl",value:function(St){this._target=St}},{key:"show",value:function(){this._isShow=!0;var St=Ao.domain("DOM").getNodeId({node:this._target}).nodeId;Ao.domain("Overlay").highlightNode({nodeId:St,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){Ao.domain("Overlay").disable()}},{key:"hide",value:function(){this._isShow=!1,Ao.domain("Overlay").hideHighlight()}}]),lt}(),rd=V(4204),Hl=V.n(rd);function Ba(lt){var St=lt.parentNode;if(!St)return!1;for(;St;)if((St=St.parentNode)&&St.id==="eruda")return!0;return!1}function Fa(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var Mu=function(lt){_e(wt,lt);var St=Fa(wt);function wt(){var Ge;te(this,wt);var nt=ge(Ge=St.call(this));return Ge._startListener=function(bt){if(!Ba(bt.target))return nt._timer=setTimeout(function(){nt.emit("select",bt.target)},200),!1},Ge._moveListener=function(){clearTimeout(nt._timer)},Ge._clickListener=function(bt){Ba(bt.target)||(bt.preventDefault(),bt.stopImmediatePropagation())},Ge}return de(wt,[{key:"enable",value:function(){function Ge(nt,bt){document.body.addEventListener(nt,bt,!0)}return this.disable(),Ca()()?(Ge("touchstart",this._startListener),Ge("touchmove",this._moveListener)):(Ge("mousedown",this._startListener),Ge("mousemove",this._moveListener)),Ge("click",this._clickListener),this}},{key:"disable",value:function(){function Ge(nt,bt){document.body.removeEventListener(nt,bt,!0)}return Ca()()?(Ge("touchstart",this._startListener),Ge("touchmove",this._moveListener)):(Ge("mousedown",this._startListener),Ge("mousemove",this._moveListener)),Ge("click",this._clickListener),this}}]),wt}(on());function id(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var od=function(lt){_e(wt,lt);var St=id(wt);function wt(){var Ge;return te(this,wt),(Ge=St.call(this))._style=Hr(V(269)),Ge.name="elements",Ge._tpl=V(6560),Ge._rmDefComputedStyle=!0,Ge._highlightElement=!1,Ge._selectElement=!1,Ge._observeElement=!0,Ge._computedStyleSearchKeyword="",Ge._history=[],on().mixin(ge(Ge)),Ge}return de(wt,[{key:"init",value:function(Ge,nt){var bt=this;pi(xe(wt.prototype),"init",this).call(this,Ge),this._container=nt,Ge.html('<div class="eruda-show-area"></div>'),this._$showArea=Ge.find(".eruda-show-area"),Ge.append(V(2407)()),this._htmlEl=document.documentElement,this._highlight=new Iu(this._container.$container),this._select=new Mu,this._bindEvent(),this._initObserver(),this._initCfg(),Qa()(function(){return bt._updateHistory()})}},{key:"show",value:function(){pi(xe(wt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this._curEl||this._setEl(this._htmlEl),this._render()}},{key:"hide",value:function(){return this._disableObserver(),pi(xe(wt.prototype),"hide",this).call(this)}},{key:"set",value:function(Ge){if(Ge!==this._curEl)return this._setEl(Ge),this.scrollToTop(),this._render(),this._updateHistory(),this.emit("change",Ge),this}},{key:"overrideEventTarget",value:function(){var Ge=sd(),nt=this._origAddEvent=Ge.addEventListener,bt=this._origRmEvent=Ge.removeEventListener;Ge.addEventListener=function(jt,ln,Pn){fs(this,jt,ln,Pn),nt.apply(this,arguments)},Ge.removeEventListener=function(jt,ln,Pn){ol(this,jt,ln,Pn),bt.apply(this,arguments)}}},{key:"scrollToTop",value:function(){this._$showArea.get(0).scrollTop=0}},{key:"restoreEventTarget",value:function(){var Ge=sd();this._origAddEvent&&(Ge.addEventListener=this._origAddEvent),this._origRmEvent&&(Ge.removeEventListener=this._origRmEvent)}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),Hr.remove(this._style),this._select.disable(),this._highlight.destroy(),this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"_back",value:function(){if(this._curEl!==this._htmlEl){for(var Ge=this._curParentQueue,nt=Ge.shift();!hs(nt);)nt=Ge.shift();this.set(nt)}}},{key:"_bindEvent",value:function(){var Ge=this,nt=this,bt=this._container,jt=this._select;this._$el.on("click",".eruda-child",function(){var ln=Oe()(this).data("idx"),Pn=nt._curEl,jn=Pn.childNodes[ln];if(jn&&jn.nodeType===3){var ur;switch(Pn.tagName){case"SCRIPT":ur="js";break;case"STYLE":ur="css";break;default:return}var rr=bt.get("sources");rr&&(rr.set(ur,jn.nodeValue),bt.showTool("sources"))}else hs(jn)?nt.set(jn):nt._render()}).on("click",".eruda-listener-content",function(){var ln=Oe()(this).text(),Pn=bt.get("sources");Pn&&(Pn.set("js",ln),bt.showTool("sources"))}).on("click",".eruda-breadcrumb",function(){var ln=bt.get("sources");ln&&(ln.set("object",Ge._curEl),bt.showTool("sources"))}).on("click",".eruda-parent",function(){for(var ln=Oe()(this).data("idx"),Pn=nt._curEl.parentNode;ln--&&Pn.parentNode;)Pn=Pn.parentNode;hs(Pn)?nt.set(Pn):nt._render()}).on("click",".eruda-toggle-all-computed-style",function(){return Ge._toggleAllComputedStyle()}).on("click",".eruda-computed-style-search",function(){var ln=prompt("Filter");No()(ln)||(ln=ta()(ln),Ge._computedStyleSearchKeyword=ln,Ge._render())}),this._$el.find(".eruda-bottom-bar").on("click",".eruda-refresh",function(){Ge._render(),bt.notify("Refreshed")}).on("click",".eruda-highlight",function(){return Ge._toggleHighlight()}).on("click",".eruda-select",function(){return Ge._toggleSelect()}).on("click",".eruda-reset",function(){return Ge.set(Ge._htmlEl)}),jt.on("select",function(ln){return Ge.set(ln)})}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_enableObserver",value:function(){this._observer.observe(this._htmlEl,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_toggleHighlight",value:function(){this._selectElement||(this._$el.find(".eruda-highlight").toggleClass("eruda-active"),this._highlightElement=!this._highlightElement,this._render())}},{key:"_toggleSelect",value:function(){var Ge=this._select;this._$el.find(".eruda-select").toggleClass("eruda-active"),this._selectElement||this._highlightElement||this._toggleHighlight(),this._selectElement=!this._selectElement,this._selectElement?(Ge.enable(),this._container.hide()):Ge.disable()}},{key:"_setEl",value:function(Ge){this._curEl=Ge,this._curCssStore=new Xd(Ge),this._highlight.setEl(Ge),this._rmDefComputedStyle=!0;for(var nt=[],bt=Ge.parentNode;bt;)nt.push(bt),bt=bt.parentNode;this._curParentQueue=nt}},{key:"_getData",value:function(){var Ge={},nt=this._curEl,bt=this._curCssStore,jt=nt.className,ln=nt.id,Pn=nt.attributes,jn=nt.tagName;Ge.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Ge.parents=function(si){for(var wi=[],Ji=0,Vi=si.parentNode;Vi&&Vi.nodeType===1;)wi.push({text:ds(Vi,{noAttr:!0}),idx:Ji++}),Vi=Vi.parentNode;return wi.reverse()}(nt),Ge.children=function(si){for(var wi=[],Ji=0,Vi=si.length;Ji<Vi;Ji++){var co=si[Ji],_s=co.nodeType;if(_s!==3&&_s!==8){var fd=!$o()(co.className);_s===1&&co.id!=="eruda"&&(fd||co.className.indexOf("eruda")<0)&&wi.push({text:ds(co),isEl:!0,idx:Ji})}else{var _d=co.nodeValue.trim();_d!==""&&wi.push({text:_d,isCmt:_s===8,idx:Ji})}}return wi}(nt.childNodes),Ge.attributes=Na(Pn),Ge.name=ds({tagName:jn,id:ln,className:jt,attributes:Pn});var ur=nt.erudaEvents;if(ur&&Jo()(ur).length!==0&&(Ge.listeners=ur),ps(jn))return Ge;var rr=bt.getComputedStyle();function Si(si){var wi=["top","left","right","bottom"];return si!=="position"&&(wi=Pa()(wi,function(Ji){return"".concat(si,"-").concat(Ji)})),si==="border"&&(wi=Pa()(wi,function(Ji){return"".concat(Ji,"-width")})),{top:ql(rr[wi[0]],si),left:ql(rr[wi[1]],si),right:ql(rr[wi[2]],si),bottom:ql(rr[wi[3]],si)}}var Bi={margin:Si("margin"),border:Si("border"),padding:Si("padding"),content:{width:ql(rr.width),height:ql(rr.height)}};rr.position!=="static"&&(Bi.position=Si("position")),Ge.boxModel=Bi;var To=bt.getMatchedCSSRules();To.unshift(function(si){for(var wi={selectorText:"element.style",style:{}},Ji=0,Vi=si.length;Ji<Vi;Ji++){var co=si[Ji];wi.style[co]=si[co]}return wi}(nt.style)),To.forEach(function(si){return ad(si.style)}),Ge.styles=To,this._rmDefComputedStyle&&(rr=function(si,wi){var Ji={},Vi=["display","width","height"];return mn()(wi,function(co){Vi=Vi.concat(Jo()(co.style))}),Vi=na()(Vi),mn()(si,function(co,_s){vi()(Vi,_s)&&(Ji[_s]=co)}),Ji}(rr,To)),Ge.rmDefComputedStyle=this._rmDefComputedStyle;var qo=Uo()(Ge.computedStyleSearchKeyword);return qo&&(rr=Ma()(rr,function(si,wi){return vi()(wi,qo)||vi()(si,qo)})),ad(rr),Ge.computedStyle=rr,Ge}},{key:"_render",value:function(){if(!hs(this._curEl))return this._back();this._highlight[this._highlightElement?"show":"hide"](),this._renderHtml(this._tpl(this._getData()))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$showArea.html(Ge))}},{key:"_updateHistory",value:function(){var Ge=this._container.get("console");if(Ge){var nt=this._history;nt.unshift(this._curEl),nt.length>5&&nt.pop();for(var bt=0;bt<5;bt++)Ge.setGlobal("$".concat(bt),nt[bt])}}},{key:"_initObserver",value:function(){var Ge=this;this._observer=new(xn())(function(nt){mn()(nt,function(bt){return Ge._handleMutation(bt)})})}},{key:"_handleMutation",value:function(Ge){var nt,bt;if(!Ba(Ge.target)){if(Ge.type==="attributes"){if(Ge.target!==this._curEl)return;this._render()}else if(Ge.type==="childList"){if(Ge.target===this._curEl)return this._render();var jt=Ge.addedNodes;for(nt=0,bt=jt.length;nt<bt;nt++)if(jt[nt].parentNode===this._curEl)return this._render();var ln=Ge.removedNodes;for(nt=0,bt=ln.length;nt<bt;nt++)if(ln[nt]===this._curEl)return this.set(this._htmlEl)}}}},{key:"_rmCfg",value:function(){var Ge=this.config,nt=this._container.get("settings");nt&&nt.remove(Ge,"overrideEventTarget").remove(Ge,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var Ge=this,nt=this.config=be.createCfg("elements",{overrideEventTarget:!0,observeElement:!0});nt.get("overrideEventTarget")&&this.overrideEventTarget(),nt.get("observeElement")&&(this._observeElement=!1),nt.on("change",function(jt,ln){switch(jt){case"overrideEventTarget":return ln?Ge.overrideEventTarget():Ge.restoreEventTarget();case"observeElement":return Ge._observeElement=ln,ln?Ge._enableObserver():Ge._disableObserver()}});var bt=this._container.get("settings");bt&&(bt.text("Elements").switch(nt,"overrideEventTarget","Catch Event Listeners"),this._observer&&bt.switch(nt,"observeElement","Auto Refresh"),bt.separator())}}]),wt}(Hi);function ad(lt){mn()(lt,function(St,wt){return lt[wt]=Ou(St)})}var Kd=/rgba?\((.*?)\)/g,Yd=/url\("?(.*?)"?\)/g;function Ou(lt){return(lt=ss()(lt)).replace(Kd,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Yd,function(St,wt){return'url("'.concat(ld(wt),'")')})}var hs=function(lt){return so()(lt)&&lt.parentNode};function ds(lt){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},wt=St.noAttr,Ge=wt!==void 0&&wt,nt=lt.id,bt=lt.className,jt=lt.attributes,ln='<span class="eruda-tag-name-color">'.concat(lt.tagName.toLowerCase(),"</span>");if(nt!==""&&(ln+='<span class="eruda-function-color">#'.concat(nt,"</span>")),$o()(bt)){var Pn="";mn()(bt.split(/\s+/g),function(jn){jn.trim()!==""&&(Pn+=".".concat(jn))}),ln+='<span class="eruda-attribute-name-color">'.concat(Pn,"</span>")}return Ge||mn()(jt,function(jn){var ur=jn.name;ur!=="id"&&ur!=="class"&&ur!=="style"&&(ln+=' <span class="eruda-attribute-name-color">'.concat(ur,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(jn.value,'</span><span class="eruda-operator-color">"</span>'))}),ln}var Na=function(lt){return Pa()(lt,function(St){var wt=St.value,Ge=St.name;return wt=Aa()(wt),(Ge==="src"||Ge==="href")&&!os()(wt,"data")&&(wt=ld(wt)),Ge==="style"&&(wt=Ou(wt)),{name:Ge,value:wt}})},oa=["script","style","meta","title","link","head"],ps=function(lt){return oa.indexOf(lt.toLowerCase())>-1};function fs(lt,St,wt){var Ge=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(so()(lt)&&Rs()(wt)&&Ms()(Ge)){var nt=lt.erudaEvents=lt.erudaEvents||{};nt[St]=nt[St]||[],nt[St].push({listener:wt,listenerStr:wt.toString(),useCapture:Ge})}}function ol(lt,St,wt){var Ge=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(so()(lt)&&Rs()(wt)&&Ms()(Ge)){var nt=lt.erudaEvents;if(nt&&nt[St]){for(var bt=nt[St],jt=0,ln=bt.length;jt<ln;jt++)if(bt[jt].listener===wt){bt.splice(jt,1);break}bt.length===0&&delete nt[St],Jo()(nt).length===0&&delete lt.erudaEvents}}}var sd=function(){return lo()(window,"EventTarget.prototype")||window.Node.prototype},ld=function(lt){return'<a href="'.concat(lt,'" target="_blank">').concat(lt,"</a>")};function ql(lt,St){if(jo()(lt))return lt;if(!$o()(lt))return"\u2012";var wt=Sr(lt);return gl()(wt)?lt:St==="position"?wt:wt===0?"\u2012":wt}var Ru=null,cd=[{name:"Border All",fn:function(){if(Ru)return Hr.remove(Ru),void(Ru=null);Ru=Hr("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var lt=new(Xn());lt.setQuery("timestamp",cu()()),window.location.replace(lt.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){var lt=prompt("Enter the text")||"";ta()(lt)!==""&&function(St){var wt=document.body,Ge=new RegExp(St,"ig");Wl(wt,function(nt){var bt=Oe()(nt);if(bt.hasClass("eruda-search-highlight-block"))return document.createTextNode(bt.text())}),Wl(wt,function(nt){if(nt.nodeType===3){var bt=nt.nodeValue;if((bt=bt.replace(Ge,function(ln){return'<span class="eruda-keyword">'.concat(ln,"</span>")}))!==nt.nodeValue){var jt=Oe()(document.createElement("div"));return jt.html(bt),jt.addClass("eruda-search-highlight-block"),jt.get(0)}}})}(lt)},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var lt=document.body;lt.contentEditable=lt.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var lt=document.body,St=document.documentElement,wt=Oe()(lt);if(wt.data("scaled"))window.scrollTo(0,+wt.data("scaled")),wt.rmAttr("data-scaled"),wt.css("transform","none");else{var Ge=Math.max(lt.scrollHeight,lt.offsetHeight,St.clientHeight,St.scrollHeight,St.offsetHeight),nt=Math.max(document.documentElement.clientHeight,window.innerHeight||0),bt=nt/Ge;wt.css("transform","scale(".concat(bt,")")),wt.data("scaled",window.scrollY),window.scrollTo(0,Ge/2-nt/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Fps Plugin",fn:function(){Ui("fps")},desc:"Display page fps"},{name:"Load Features Plugin",fn:function(){Ui("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){Ui("timing")},desc:"Show performance and resource timing"},{name:"Load Memory Plugin",fn:function(){Ui("memory")},desc:"Display memory"},{name:"Load Code Plugin",fn:function(){Ui("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){Ui("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){Ui("geolocation")},desc:"Test geolocation"},{name:"Load Dom Plugin",fn:function(){Ui("dom")},desc:"Navigate dom tree"},{name:"Load Orientation Plugin",fn:function(){Ui("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){Ui("touches")},desc:"Visualize screen touches"},{name:"Restore Settings",fn:function(){var lt=Eo("local"),St=JSON.parse(JSON.stringify(lt));mn()(St,function(wt,Ge){$o()(wt)&&os()(Ge,"eruda")&&lt.removeItem(Ge)}),window.location.reload()},desc:"Restore defaults and reload"}];function Wl(lt,St){var wt=lt.childNodes;if(!Ba(lt)){for(var Ge=0,nt=wt.length;Ge<nt;Ge++){var bt=Wl(wt[Ge],St);bt&&lt.replaceChild(bt,wt[Ge])}return St(lt)}}function Ui(lt){var St="eruda"+ls()(lt);if(!window[St]){var wt=location.protocol;os()(wt,"http")||(wt="http:"),Tl()("".concat(wt,"//cdn.jsdelivr.net/npm/eruda-").concat(lt,"@").concat(Jd[lt]),function(Ge){if(!Ge||!window[St])return $i.error("Fail to load plugin "+lt);ai.emit(ai.ADD,window[St]),ai.emit(ai.SHOW,lt)})}}Hr(V(6068),document.head);var Jd={fps:"2.0.0",features:"2.0.0",timing:"2.0.1",memory:"2.0.0",code:"2.0.0",benchmark:"2.0.0",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"};function Qd(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var Li=function(lt){_e(wt,lt);var St=Qd(wt);function wt(){var Ge;return te(this,wt),(Ge=St.call(this))._style=Hr(V(8277)),Ge.name="snippets",Ge._snippets=[],Ge._tpl=V(1122),Ge}return de(wt,[{key:"init",value:function(Ge){pi(xe(wt.prototype),"init",this).call(this,Ge),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"add",value:function(Ge,nt,bt){return this._snippets.push({name:Ge,fn:nt,desc:bt}),this._render(),this}},{key:"remove",value:function(Ge){for(var nt=this._snippets,bt=0,jt=nt.length;bt<jt;bt++)nt[bt].name===Ge&&nt.splice(bt,1);return this._render(),this}},{key:"run",value:function(Ge){for(var nt=this._snippets,bt=0,jt=nt.length;bt<jt;bt++)nt[bt].name===Ge&&this._run(bt);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var Ge=this;this._$el.on("click",".eruda-run",function(){var nt=Oe()(this).data("idx");Ge._run(nt)})}},{key:"_run",value:function(Ge){this._snippets[Ge].fn.call(null)}},{key:"_addDefSnippets",value:function(){var Ge=this;mn()(cd,function(nt){Ge.add(nt.name,nt.fn,nt.desc)})}},{key:"_render",value:function(){this._renderHtml(this._tpl({snippets:this._snippets}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}}]),wt}(Hi);function Tr(lt,St){var wt=typeof Symbol!="undefined"&&lt[Symbol.iterator]||lt["@@iterator"];if(!wt){if(Array.isArray(lt)||(wt=function(Pn,jn){if(!!Pn){if(typeof Pn=="string")return ja(Pn,jn);var ur=Object.prototype.toString.call(Pn).slice(8,-1);if(ur==="Object"&&Pn.constructor&&(ur=Pn.constructor.name),ur==="Map"||ur==="Set")return Array.from(Pn);if(ur==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ur))return ja(Pn,jn)}}(lt))||St&&lt&&typeof lt.length=="number"){wt&&(lt=wt);var Ge=0,nt=function(){};return{s:nt,n:function(){return Ge>=lt.length?{done:!0}:{done:!1,value:lt[Ge++]}},e:function(Pn){throw Pn},f:nt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bt,jt=!0,ln=!1;return{s:function(){wt=wt.call(lt)},n:function(){var Pn=wt.next();return jt=Pn.done,Pn},e:function(Pn){ln=!0,bt=Pn},f:function(){try{jt||wt.return==null||wt.return()}finally{if(ln)throw bt}}}}function ja(lt,St){(St==null||St>lt.length)&&(St=lt.length);for(var wt=0,Ge=new Array(St);wt<St;wt++)Ge[wt]=lt[wt];return Ge}function _h(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var ei=function(lt){_e(wt,lt);var St=_h(wt);function wt(){var Ge;return te(this,wt),(Ge=St.call(this))._style=Hr(V(8070)),Ge.name="resources",Ge._localStoreData=[],Ge._localStoreSearchKeyword="",Ge._hideErudaSetting=!1,Ge._sessionStoreData=[],Ge._sessionStoreSearchKeyword="",Ge._cookieData=[],Ge._cookieSearchKeyword="",Ge._scriptData=[],Ge._stylesheetData=[],Ge._iframeData=[],Ge._imageData=[],Ge._observeElement=!0,Ge._tpl=V(2875),Ge}return de(wt,[{key:"init",value:function(Ge,nt){pi(xe(wt.prototype),"init",this).call(this,Ge),this._container=nt,this.refresh(),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()._render()}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),this._disableObserver(),Hr.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var Ge=[];return Oe()("script").each(function(){var nt=this.src;nt!==""&&Ge.push(nt)}),Ge=na()(Ge),this._scriptData=Ge,this}},{key:"refreshStylesheet",value:function(){var Ge=[];return Oe()("link").each(function(){this.rel==="stylesheet"&&Ge.push(this.href)}),Ge=na()(Ge),this._stylesheetData=Ge,this}},{key:"refreshIframe",value:function(){var Ge=[];return Oe()("iframe").each(function(){var nt=Oe()(this).attr("src");nt&&Ge.push(nt)}),Ge=na()(Ge),this._iframeData=Ge,this}},{key:"refreshLocalStorage",value:function(){return this._refreshStorage("local"),this}},{key:"refreshSessionStorage",value:function(){return this._refreshStorage("session"),this}},{key:"_refreshStorage",value:function(Ge){var nt=this,bt=Eo(Ge,!1);if(bt){var jt=[];bt=JSON.parse(JSON.stringify(bt)),mn()(bt,function(ln,Pn){$o()(ln)&&(nt._hideErudaSetting&&(os()(Pn,"eruda")||Pn==="active-eruda")||jt.push({key:Pn,val:mh(ln,200)}))}),this["_"+Ge+"StoreData"]=jt}}},{key:"refreshCookie",value:function(){var Ge=Ao.domain("Network").getCookies().cookies,nt=Pa()(Ge,function(bt){return{key:bt.name,val:bt.value}});return this._cookieData=nt,this}},{key:"refreshImage",value:function(){var Ge=[],nt=this._performance=window.webkitPerformance||window.performance;return nt&&nt.getEntries?this._performance.getEntries().forEach(function(bt){(bt.initiatorType==="img"||Ua(bt.name))&&Ge.push(bt.name)}):Oe()("img").each(function(){var bt=Oe()(this),jt=bt.attr("src");bt.data("exclude")!=="true"&&Ge.push(jt)}),(Ge=na()(Ge)).sort(),this._imageData=Ge,this}},{key:"show",value:function(){return pi(xe(wt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),pi(xe(wt.prototype),"hide",this).call(this)}},{key:"_bindEvent",value:function(){var Ge=this,nt=this,bt=this._$el,jt=this._container;function ln(jn,ur){var rr=jt.get("sources");if(rr)return rr.set(jn,ur),jt.showTool("sources"),!0}function Pn(jn){return function(ur){if(jt.get("sources")){ur.preventDefault();var rr=Oe()(this).attr("href");jn!=="iframe"&&xo()(location.href,rr)?cn()({url:rr,success:function(Si){ln(jn,Si)},dataType:"raw"}):ln("iframe",rr)}}}bt.on("click",".eruda-refresh-local-storage",function(){jt.notify("Refreshed"),Ge.refreshLocalStorage()._render()}).on("click",".eruda-refresh-session-storage",function(){jt.notify("Refreshed"),Ge.refreshSessionStorage()._render()}).on("click",".eruda-refresh-cookie",function(){jt.notify("Refreshed"),Ge.refreshCookie()._render()}).on("click",".eruda-refresh-script",function(){jt.notify("Refreshed"),Ge.refreshScript()._render()}).on("click",".eruda-refresh-stylesheet",function(){jt.notify("Refreshed"),Ge.refreshStylesheet()._render()}).on("click",".eruda-refresh-iframe",function(){jt.notify("Refreshed"),Ge.refreshIframe()._render()}).on("click",".eruda-refresh-image",function(){jt.notify("Refreshed"),Ge.refreshImage()._render()}).on("click",".eruda-search",function(){var jn=Oe()(this).data("type"),ur=prompt("Filter");if(!No()(ur)){switch(ur=ta()(ur),jn){case"local":nt._localStoreSearchKeyword=ur;break;case"session":nt._sessionStoreSearchKeyword=ur;break;case"cookie":nt._cookieSearchKeyword=ur}nt._render()}}).on("click",".eruda-delete-storage",function(){var jn=Oe()(this),ur=jn.data("key");jn.data("type")==="local"?(localStorage.removeItem(ur),nt.refreshLocalStorage()._render()):(sessionStorage.removeItem(ur),nt.refreshSessionStorage()._render())}).on("click",".eruda-delete-cookie",function(){var jn=Oe()(this).data("key");Ao.domain("Network").deleteCookies({name:jn}),nt.refreshCookie()._render()}).on("click",".eruda-clear-storage",function(){Oe()(this).data("type")==="local"?(mn()(nt._localStoreData,function(jn){return localStorage.removeItem(jn.key)}),nt.refreshLocalStorage()._render()):(mn()(nt._sessionStoreData,function(jn){return sessionStorage.removeItem(jn.key)}),nt.refreshSessionStorage()._render())}).on("click",".eruda-clear-cookie",function(){Ao.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),Ge.refreshCookie()._render()}).on("click",".eruda-storage-val",function(){var jn=Oe()(this),ur=jn.data("key"),rr=jn.data("type")==="local"?localStorage.getItem(ur):sessionStorage.getItem(ur);try{ln("object",JSON.parse(rr))}catch{ln("raw",rr)}}).on("click",".eruda-img-link",function(){ln("img",Oe()(this).attr("src"))}).on("click",".eruda-css-link",Pn("css")).on("click",".eruda-js-link",Pn("js")).on("click",".eruda-iframe-link",Pn("iframe")),Ns().on("change",function(){return Ge._render()})}},{key:"_rmCfg",value:function(){var Ge=this.config,nt=this._container.get("settings");nt&&nt.remove(Ge,"hideErudaSetting").remove(Ge,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var Ge=this,nt=this.config=be.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});nt.get("hideErudaSetting")&&(this._hideErudaSetting=!0),nt.get("observeElement")||(this._observeElement=!1),nt.on("change",function(bt,jt){switch(bt){case"hideErudaSetting":return void(Ge._hideErudaSetting=jt);case"observeElement":return Ge._observeElement=jt,jt?Ge._enableObserver():Ge._disableObserver()}}),this._container.get("settings").text("Resources").switch(nt,"hideErudaSetting","Hide Eruda Setting").switch(nt,"observeElement","Auto Refresh Elements").separator()}},{key:"_render",value:function(){var Ge=this._cookieData,nt=this._scriptData,bt=this._stylesheetData,jt=this._imageData,ln=this._localStoreSearchKeyword,Pn=this._sessionStoreSearchKeyword,jn=this._cookieSearchKeyword;function ur(rr,Si){return(Si=Uo()(Si))?ua()(rr,function(Bi){var To=Bi.key,qo=Bi.val;return vi()(Uo()(To),Si)||vi()(Uo()(qo),Si)}):rr}this._renderHtml(this._tpl({localStoreData:ur(this._localStoreData,ln),localStoreSearchKeyword:ln,sessionStoreData:ur(this._sessionStoreData,Pn),sessionStoreSearchKeyword:Pn,cookieData:ur(Ge,jn),cookieSearchKeyword:jn,cookieState:Uc("cookie",Ge.length),scriptData:nt,scriptState:Uc("script",nt.length),stylesheetData:bt,stylesheetState:Uc("stylesheet",bt.length),iframeData:this._iframeData,imageData:jt,imageState:Uc("image",jt.length)}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}},{key:"_initObserver",value:function(){var Ge=this;this._observer=new(xn())(function(nt){var bt=!1;mn()(nt,function(jt){Ge._handleMutation(jt)&&(bt=!0)}),bt&&Ge._render()})}},{key:"_handleMutation",value:function(Ge){var nt=this;if(!Ba(Ge.target)){var bt=function(jn){var ur=function(rr){return rr.tagName?rr.tagName.toLowerCase():""}(jn);switch(ur){case"script":return nt.refreshScript(),!0;case"img":return nt.refreshImage(),!0;case"link":return nt.refreshStylesheet(),!0}return!1};if(Ge.type==="attributes"){if(bt(Ge.target))return!0}else if(Ge.type==="childList"){if(bt(Ge.target))return!0;var jt,ln=Js()(Ge.addedNodes),Pn=Tr(ln=Fo()(ln,Js()(Ge.removedNodes)));try{for(Pn.s();!(jt=Pn.n()).done;)if(bt(jt.value))return!0}catch(jn){Pn.e(jn)}finally{Pn.f()}}return!1}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),wt}(Hi);function Uc(lt,St){if(St===0)return"";var wt=0,Ge=0;switch(lt){case"cookie":wt=30,Ge=60;break;case"script":wt=5,Ge=10;break;case"stylesheet":wt=4,Ge=8;break;case"image":wt=50,Ge=100}return St>=Ge?"danger":St>=wt?"warn":"ok"}var mh=function(lt,St){return lt.length<St?lt:lt.slice(0,St)+"..."},va=/\.(jpeg|jpg|gif|png)$/,Ua=function(lt){return va.test(lt)},Do=Er()(),Ho=[{name:"Location",val:function(){return Aa()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(Qr()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(Do.name+" "+Do.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://github.com/liriliri/eruda" target="_blank">Eruda v2.6.1</a>'}];function Yi(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var ud=function(lt){_e(wt,lt);var St=Yi(wt);function wt(){var Ge;return te(this,wt),(Ge=St.call(this))._style=Hr(V(9577)),Ge.name="info",Ge._tpl=V(2861),Ge._infos=[],Ge}return de(wt,[{key:"init",value:function(Ge){pi(xe(wt.prototype),"init",this).call(this,Ge),this._addDefInfo()}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),Hr.remove(this._style)}},{key:"add",value:function(Ge,nt){var bt=this._infos,jt=!1;return mn()(bt,function(ln){Ge===ln.name&&(ln.val=nt,jt=!0)}),jt||bt.push({name:Ge,val:nt}),this._render(),this}},{key:"get",value:function(Ge){var nt,bt=this._infos;return wl()(Ge)?Ai()(bt):(mn()(bt,function(jt){Ge===jt.name&&(nt=jt.val)}),nt)}},{key:"remove",value:function(Ge){for(var nt=this._infos,bt=nt.length-1;bt>=0;bt--)nt[bt].name===Ge&&nt.splice(bt,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var Ge=this;mn()(Ho,function(nt){return Ge.add(nt.name,nt.val)})}},{key:"_render",value:function(){var Ge=[];mn()(this._infos,function(nt){var bt=nt.name,jt=nt.val;Rs()(jt)&&(jt=jt()),Ge.push({name:bt,val:jt})}),this._renderHtml(this._tpl({infos:Ge}))}},{key:"_renderHtml",value:function(Ge){Ge!==this._lastHtml&&(this._lastHtml=Ge,this._$el.html(Ge))}}]),wt}(Hi),xa=V(4030),hd=V.n(xa);function Zl(lt){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var wt,Ge=xe(lt);if(St){var nt=xe(this).constructor;wt=Reflect.construct(Ge,arguments,nt)}else wt=Ge.apply(this,arguments);return ye(this,wt)}}var $u,dd=function(lt){_e(wt,lt);var St=Zl(wt);function wt(){var Ge;return te(this,wt),(Ge=St.call(this))._style=Hr(V(4214)),Ge.name="sources",Ge._showLineNum=!0,Ge._formatCode=!0,Ge._indentSize=4,Ge._loadTpl(),Ge}return de(wt,[{key:"init",value:function(Ge,nt){pi(xe(wt.prototype),"init",this).call(this,Ge),this._container=nt,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){pi(xe(wt.prototype),"destroy",this).call(this),Hr.remove(this._style),this._rmCfg()}},{key:"set",value:function(Ge,nt){if(Ge==="img"){this._isFetchingData=!0;var bt=new Image,jt=this;return bt.onload=function(){jt._isFetchingData=!1,jt._data={type:"img",val:{width:this.width,height:this.height,src:nt}},jt._render()},bt.onerror=function(){jt._isFetchingData=!1},void(bt.src=nt)}return this._data={type:Ge,val:nt},this._render(),this}},{key:"show",value:function(){return pi(xe(wt.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var Ge=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,cn()({url:location.href,success:function(nt){return Ge._html=nt},error:function(){return Ge._html="Sorry, unable to fetch source code:("},complete:function(){Ge._isGettingHtml=!1,Ge._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var Ge=this;this._container.on("showTool",function(nt,bt){nt!==Ge.name&&bt.name===Ge.name&&delete Ge._data})}},{key:"_loadTpl",value:function(){this._codeTpl=V(431),this._imgTpl=V(2229),this._objTpl=V(2944),this._rawTpl=V(8191),this._iframeTpl=V(6680)}},{key:"_rmCfg",value:function(){var Ge=this.config,nt=this._container.get("settings");nt&&nt.remove(Ge,"showLineNum").remove(Ge,"formatCode").remove(Ge,"indentSize").remove("Sources")}},{key:"_initCfg",value:function(){var Ge=this,nt=this.config=be.createCfg("sources",{showLineNum:!0,formatCode:!0,indentSize:4});nt.get("showLineNum")||(this._showLineNum=!1),nt.get("formatCode")||(this._formatCode=!1),this._indentSize=nt.get("indentSize"),nt.on("change",function(bt,jt){switch(bt){case"showLineNum":return void(Ge._showLineNum=jt);case"formatCode":return void(Ge._formatCode=jt);case"indentSize":return void(Ge._indentSize=+jt)}}),this._container.get("settings").text("Sources").switch(nt,"showLineNum","Show Line Numbers").switch(nt,"formatCode","Beautify Code").select(nt,"indentSize","Indent Size",["2","4"]).separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){this._renderHtml(this._imgTpl(this._data.val))}},{key:"_renderCode",value:function(){var Ge=this._data,nt=this._indentSize,bt=Ge.val,jt=Ge.val.length;if(jt<gh&&this._formatCode){switch(Ge.type){case"html":bt=Hl().html(bt,{unformatted:[],indent_size:nt});break;case"css":bt=Hl().css(bt,{indent_size:nt});break;case"js":bt=Hl()(bt,{indent_size:nt})}var ln=Hr.getCurTheme();bt=Zi()(bt,Ge.type,{keyword:"color:".concat(ln.keywordColor),number:"color:".concat(ln.numberColor),operator:"color:".concat(ln.operatorColor),comment:"color:".concat(ln.commentColor),string:"color:".concat(ln.stringColor)})}else bt=Aa()(bt);jt<pd&&this._showLineNum&&(bt=bt.split(`
`).map(function(Pn,jn){return ta()(Pn)===""&&(Pn="&nbsp;"),{idx:jn+1,val:Pn}})),this._renderHtml(this._codeTpl({code:bt,showLineNum:jt<pd&&this._showLineNum}))}},{key:"_renderObj",value:function(){this._renderHtml(this._objTpl(),!1);var Ge=this._data.val;try{$o()(Ge)&&(Ge=JSON.parse(Ge))}catch{}new(hd())(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(Ge)}},{key:"_renderRaw",value:function(){this._renderHtml(this._rawTpl({val:this._data.val}))}},{key:"_renderIframe",value:function(){this._renderHtml(this._iframeTpl({src:this._data.val}))}},{key:"_renderHtml",value:function(Ge){var nt=this,bt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];bt&&Ge===this._lastHtml||(this._lastHtml=Ge,this._$el.html(Ge),setTimeout(function(){return nt._$el.get(0).scrollTop=0},0))}}]),wt}(Hi),gh=1e5,pd=4e5,yh={init:function(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=lt.container,wt=lt.tool,Ge=lt.autoScale,nt=Ge===void 0||Ge,bt=lt.useShadowDom,jt=bt===void 0||bt,ln=lt.defaults,Pn=ln===void 0?{}:ln;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(St,jt),this._initStyle(),this._initDevTools(Pn),this._initEntryBtn(),this._initSettings(),this._initTools(wt),this._registerListener(),nt&&this._autoScale())},_isInit:!1,version:"2.6.1",util:re,chobitsu:Ao,Tool:Hi,Console:La,Elements:od,Network:Qh,Sources:dd,Resources:ei,Info:ud,Snippets:Li,Settings:be,get:function(lt){if(this._checkInit()){if(lt==="entryBtn")return this._entryBtn;var St=this._devTools;return lt?St.get(lt):St}},add:function(lt){if(this._checkInit())return Rs()(lt)&&(lt=lt(this)),this._devTools.add(lt),this},remove:function(lt){return this._devTools.remove(lt),this},show:function(lt){if(this._checkInit()){var St=this._devTools;return lt?St.showTool(lt):St.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),this._$el.remove(),Hr.clear(),this._isInit=!1},scale:function(lt){return jo()(lt)?(this._scale=lt,ai.emit(ai.SCALE,lt),this):this._scale},position:function(lt){var St=this._entryBtn;return zs()(lt)?(St.setPos(lt),this):St.getPos()},_autoScale:function(){Ca()()&&this.scale(1/Mc()())},_registerListener:function(){var lt=this;this._addListener=function(){return lt.add.apply(lt,arguments)},this._showListener=function(){return lt.show.apply(lt,arguments)},ai.on(ai.ADD,this._addListener),ai.on(ai.SHOW,this._showListener),ai.on(ai.SCALE,Hr.setScale)},_unregisterListener:function(){ai.off(ai.ADD,this._addListener),ai.off(ai.SHOW,this._showListener),ai.off(ai.SCALE,Hr.setScale)},_checkInit:function(){return this._isInit||$i.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(lt,St){var wt;lt||(lt=document.createElement("div"),document.documentElement.appendChild(lt),lt.style.all="initial"),St&&(lt.attachShadow?wt=lt.attachShadow({mode:"open"}):lt.createShadowRoot&&(wt=lt.createShadowRoot()),wt&&(Hr.container=document.head,Hr(V(8998)+V(276)+V(8418)+V(5141)),lt=document.createElement("div"),wt.appendChild(lt),this._shadowRoot=wt)),Object.assign(lt,{id:"eruda",className:"eruda-container",contentEditable:!1}),Er()().name==="ios"&&lt.setAttribute("ontouchstart",""),this._$el=Oe()(lt)},_initDevTools:function(lt){this._devTools=new eo(this._$el,{defaults:lt})},_initStyle:function(){var lt="eruda-style-container",St=this._$el;this._shadowRoot?(Hr.container=this._shadowRoot,Hr(":host { all: initial }")):(St.append('<div class="'.concat(lt,'"></div>')),Hr.container=St.find(".".concat(lt)).get(0)),Hr(V(3146)+V(8418)+V(276)+V(5674)+V(2456)+V(5141)+V(6802)+V(8998))},_initEntryBtn:function(){var lt=this;this._entryBtn=new fi(this._$el),this._entryBtn.on("click",function(){return lt._devTools.toggle()})},_initSettings:function(){var lt=this._devTools,St=new be;lt.add(St),this._entryBtn.initCfg(St),lt.initCfg(St)},_initTools:function(){var lt=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];St=Js()(St);var wt=this._devTools;St.forEach(function(Ge){var nt=lt[ls()(Ge)];try{nt&&wt.add(new nt)}catch(bt){Qa()(function(){$i.error("Something wrong when initializing tool ".concat(Ge,":"),bt.message)})}}),wt.showTool(St[0]||"settings")}};$u=re,Object.assign($u,{beautify:Hl(),evalCss:Hr,isErudaEl:Ba})},2234:function(U){U.exports={background:"b","background-image":"bi",border:"bo","border-bottom":"bb","border-collapse":"bc","border-left-color":"blc","border-right":"br","border-radius":"bra","border-top":"bt","border-top-color":"btc","box-shadow":"bs","box-sizing":"bsi",clear:"cl",color:"c",content:"co",cursor:"cu",display:"d",flex:"fl","flex-shrink":"fsh",float:"f","font-family":"ff","font-size":"fs","font-weight":"fw",height:"h",left:"l","line-height":"lh",margin:"m","margin-bottom":"mb","margin-left":"ml","margin-top":"mt","min-height":"mh",outline:"ou",overflow:"o","overflow-x":"ox","overflow-y":"oy",padding:"p","padding-bottom":"pb","padding-left":"pl","padding-top":"pt","pointer-events":"pe",position:"po","text-align":"ta","text-transform":"tt",top:"t",transition:"tr","user-select":"us","vertical-aligin":"va",visibility:"v",width:"w","will-change":"wc","white-space":"ws","-webkit-overflow-scrolling":"wos","z-index":"z"}},9871:function(U,G,V){var re=V(6834);re.registerHelper("repeat",function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Q=arguments.length>1?arguments[1]:void 0;if(te<1)return Q.inverse(this);var de=1,I=0,_e=te*de+I,ne=I,ge="";do{var ye={index:ne,count:te,start:I,step:de,first:ne===I,last:ne>=_e-de},xe=[ne,ye];ge+=Q.fn(this,{data:ye,blockParams:xe}),ne+=ye.step}while(ne<_e);return ge}),re.registerHelper("class",function(te){var Q=te.split(/\s+/);return Q=Q.map(function(de){return"eruda-".concat(de)}),'class="'.concat(Q.join(" "),'"')}),re.registerHelper("concat",function(){for(var te="",Q=0,de=arguments.length;Q<de;Q++){var I=arguments[Q];typeof I=="string"&&(te+=I)}return te}),U.exports=re},9143:function(U,G,V){var re=this&&this.__awaiter||function(we,ke,Se,Oe){return new(Se||(Se=Promise))(function(Fe,ze){function Le(Ne){try{qe(Oe.next(Ne))}catch(Ke){ze(Ke)}}function We(Ne){try{qe(Oe.throw(Ne))}catch(Ke){ze(Ke)}}function qe(Ne){var Ke;Ne.done?Fe(Ne.value):(Ke=Ne.value,Ke instanceof Se?Ke:new Se(function(ot){ot(Ke)})).then(Le,We)}qe((Oe=Oe.apply(we,ke||[])).next())})},te=this&&this.__generator||function(we,ke){var Se,Oe,Fe,ze,Le={label:0,sent:function(){if(1&Fe[0])throw Fe[1];return Fe[1]},trys:[],ops:[]};return ze={next:We(0),throw:We(1),return:We(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function We(qe){return function(Ne){return function(Ke){if(Se)throw new TypeError("Generator is already executing.");for(;Le;)try{if(Se=1,Oe&&(Fe=2&Ke[0]?Oe.return:Ke[0]?Oe.throw||((Fe=Oe.return)&&Fe.call(Oe),0):Oe.next)&&!(Fe=Fe.call(Oe,Ke[1])).done)return Fe;switch(Oe=0,Fe&&(Ke=[2&Ke[0],Fe.value]),Ke[0]){case 0:case 1:Fe=Ke;break;case 4:return Le.label++,{value:Ke[1],done:!1};case 5:Le.label++,Oe=Ke[1],Ke=[0];continue;case 7:Ke=Le.ops.pop(),Le.trys.pop();continue;default:if(Fe=Le.trys,!((Fe=Fe.length>0&&Fe[Fe.length-1])||Ke[0]!==6&&Ke[0]!==2)){Le=0;continue}if(Ke[0]===3&&(!Fe||Ke[1]>Fe[0]&&Ke[1]<Fe[3])){Le.label=Ke[1];break}if(Ke[0]===6&&Le.label<Fe[1]){Le.label=Fe[1],Fe=Ke;break}if(Fe&&Le.label<Fe[2]){Le.label=Fe[2],Le.ops.push(Ke);break}Fe[2]&&Le.ops.pop(),Le.trys.pop();continue}Ke=ke.call(we,Le)}catch(ot){Ke=[6,ot],Oe=0}finally{Se=Fe=0}if(5&Ke[0])throw Ke[1];return{value:Ke[0]?Ke[1]:void 0,done:!0}}([qe,Ne])}}},Q=this&&this.__importDefault||function(we){return we&&we.__esModule?we:{default:we}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(3276)),I=Q(V(1214)),_e=Q(V(5936)),ne=Q(V(3783)),ge=Q(V(1443)),ye=V(316),xe=function(){function we(){var ke=this;this.resolves=new Map,this.domains=new Map,this.onMessage=I.default,de.default.on("message",function(Se){var Oe=JSON.parse(Se),Fe=ke.resolves.get(Oe.id);if(Fe&&Fe(Oe.result),!Oe.id){var ze=Oe.method.split("."),Le=ze[0],We=ze[1],qe=ke.domains.get(Le);qe&&qe.emit(We,Oe.params)}ke.onMessage(Se)})}return we.prototype.domain=function(ke){return this.domains.get(ke)},we.prototype.setOnMessage=function(ke){this.onMessage=ke},we.prototype.sendMessage=function(ke,Se){var Oe=this;Se===void 0&&(Se={});var Fe=_e.default();return this.sendRawMessage(JSON.stringify({id:Fe,method:ke,params:Se})),new Promise(function(ze){Oe.resolves.set(Fe,ze)})},we.prototype.sendRawMessage=function(ke){return re(this,void 0,void 0,function(){var Se,Oe,Fe,ze,Le,We,qe;return te(this,function(Ne){switch(Ne.label){case 0:Se=JSON.parse(ke),Oe=Se.method,Fe=Se.params,ze=Se.id,Le={id:ze},Ne.label=1;case 1:return Ne.trys.push([1,3,,4]),We=Le,[4,this.callMethod(Oe,Fe)];case 2:return We.result=Ne.sent(),[3,4];case 3:return(qe=Ne.sent())instanceof ye.ErrorWithCode?Le.error={message:qe.message,code:qe.code}:qe instanceof Error&&(Le.error={message:qe.message}),[3,4];case 4:return de.default.emit("message",JSON.stringify(Le)),[2]}})})},we.prototype.register=function(ke,Se){var Oe=this.domains,Fe=Oe.get(ke);Fe||(Fe={},ge.default.mixin(Fe)),ne.default(Se,function(ze,Le){Fe[Le]=ze}),Oe.set(ke,Fe)},we.prototype.callMethod=function(ke,Se){return re(this,void 0,void 0,function(){var Oe,Fe,ze,Le;return te(this,function(We){if(Oe=ke.split("."),Fe=Oe[0],ze=Oe[1],(Le=this.domain(Fe))&&Le[ze])return[2,Le[ze](Se)||{}];throw Error(ke+" unimplemented")})})},we}();G.default=xe},7935:function(U,G,V){var re=this&&this.__createBinding||(Object.create?function(tt,ht,it,pt){pt===void 0&&(pt=it),Object.defineProperty(tt,pt,{enumerable:!0,get:function(){return ht[it]}})}:function(tt,ht,it,pt){pt===void 0&&(pt=it),tt[pt]=ht[it]}),te=this&&this.__setModuleDefault||(Object.create?function(tt,ht){Object.defineProperty(tt,"default",{enumerable:!0,value:ht})}:function(tt,ht){tt.default=ht}),Q=this&&this.__importStar||function(tt){if(tt&&tt.__esModule)return tt;var ht={};if(tt!=null)for(var it in tt)it!=="default"&&Object.hasOwnProperty.call(tt,it)&&re(ht,tt,it);return te(ht,tt),ht},de=this&&this.__importDefault||function(tt){return tt&&tt.__esModule?tt:{default:tt}};Object.defineProperty(G,"__esModule",{value:!0}),G.getDOMNodeId=G.setOuterHTML=G.setNodeValue=G.setInspectedNode=G.setAttributeValue=G.setAttributesAsText=G.resolveNode=G.requestNode=G.requestChildNodes=G.removeNode=G.pushNodesByBackendIdsToFrontend=G.discardSearchResults=G.pushNodesToFrontend=G.getSearchResults=G.performSearch=G.moveTo=G.getOuterHTML=G.getDocument=G.enable=G.copyTo=G.collectClassNamesFromSubtree=void 0;var I=de(V(3276)),_e=Q(V(2049)),ne=V(2049),ge=Q(V(7923)),ye=de(V(6126)),xe=de(V(1512)),we=de(V(6156)),ke=de(V(8887)),Se=de(V(7483)),Oe=de(V(2461)),Fe=de(V(42)),ze=de(V(6341)),Le=de(V(3063)),We=de(V(3783)),qe=de(V(1352)),Ne=de(V(8933)),Ke=de(V(8099)),ot=V(5286),yt=V(316);G.collectClassNamesFromSubtree=function(tt){var ht=ne.getNode(tt.nodeId),it=[];return Qe(ht,function(pt){if(pt.nodeType===1){var vt=pt.getAttribute("class");if(vt)for(var ut=0,Nt=vt.split(/\s+/);ut<Nt.length;ut++){var at=Nt[ut];it.push(at)}}}),{classNames:Fe.default(it)}},G.copyTo=function(tt){var ht=tt.nodeId,it=tt.targetNodeId,pt=ne.getNode(ht),vt=ne.getNode(it),ut=pt.cloneNode(!0);vt.appendChild(ut)},G.enable=function(){ye.default.observe(),_e.clear()},G.getDocument=function(){return{root:_e.wrap(document,{depth:2})}},G.getOuterHTML=function(tt){return{outerHTML:ne.getNode(tt.nodeId).outerHTML}},G.moveTo=function(tt){var ht=tt.nodeId,it=tt.targetNodeId,pt=ne.getNode(ht);ne.getNode(it).appendChild(pt)};var ft=new Map;function _t(tt){for(var ht=[tt],it=tt.parentNode;it&&(ht.push(it),!(vt=ne.getNodeId(it)));)it=it.parentNode;for(;ht.length;){var pt=ht.pop(),vt=ne.getNodeId(pt);I.default.trigger("DOM.setChildNodes",{parentId:vt,nodes:_e.getChildNodes(pt,1)})}return ne.getNodeId(tt)}G.performSearch=function(tt){var ht=Le.default(tt.query),it=[];try{it=Ke.default(it,qe.default(document.querySelectorAll(ht)))}catch{}try{it=Ke.default(it,Ne.default(ht))}catch{}Qe(document,function(vt){var ut=vt.nodeType;if(ut===1){var Nt=vt.localName;if(ze.default("<"+Nt+" ",ht)||ze.default("</"+Nt+">",ht))return void it.push(vt);var at=[];We.default(vt.attributes,function(Tn){var Jt=Tn.name,on=Tn.value;return at.push(Jt,on)});for(var Mt=0,nn=at.length;Mt<nn;Mt++)if(ze.default(Le.default(at[Mt]),ht)){it.push(vt);break}}else ut===3&&ze.default(Le.default(vt.nodeValue),ht)&&it.push(vt)});var pt=yt.createId();return ft.set(pt,it),{searchId:pt,resultCount:it.length}},G.getSearchResults=function(tt){var ht=tt.searchId,it=tt.fromIndex,pt=tt.toIndex,vt=ft.get(ht).slice(it,pt);return{nodeIds:Oe.default(vt,function(ut){var Nt=ne.getNodeId(ut);return Nt||_t(ut)})}},G.pushNodesToFrontend=_t,G.discardSearchResults=function(tt){ft.delete(tt.searchId)},G.pushNodesByBackendIdsToFrontend=function(tt){return{nodeIds:tt.backendNodeIds}},G.removeNode=function(tt){var ht=ne.getNode(tt.nodeId);xe.default(ht).remove()},G.requestChildNodes=function(tt){var ht=tt.nodeId,it=tt.depth,pt=it===void 0?1:it,vt=ne.getNode(ht);I.default.trigger("DOM.setChildNodes",{parentId:ht,nodes:_e.getChildNodes(vt,pt)})},G.requestNode=function(tt){var ht=ge.getObj(tt.objectId);return{nodeId:ne.getNodeId(ht)}},G.resolveNode=function(tt){var ht=ne.getNode(tt.nodeId);return{object:ge.wrap(ht)}},G.setAttributesAsText=function(tt){var ht,it=tt.name,pt=tt.text,vt=tt.nodeId,ut=ne.getNode(vt);it&&ut.removeAttribute(it),xe.default(ut).attr((ht="<div "+(ht=pt)+"></div>",Se.default.parse(ht)[0].attrs))},G.setAttributeValue=function(tt){var ht=tt.nodeId,it=tt.name,pt=tt.value;ne.getNode(ht).setAttribute(it,pt)};var Je=[];function Qe(tt,ht){for(var it=_e.filterNodes(tt.childNodes),pt=0,vt=it.length;pt<vt;pt++){var ut=it[pt];ht(ut),Qe(ut,ht)}}G.setInspectedNode=function(tt){var ht=ne.getNode(tt.nodeId);Je.unshift(ht),Je.length>5&&Je.pop();for(var it=0;it<5;it++)ot.setGlobal("$"+it,Je[it])},G.setNodeValue=function(tt){var ht=tt.nodeId,it=tt.value;ne.getNode(ht).nodeValue=it},G.setOuterHTML=function(tt){var ht=tt.nodeId,it=tt.outerHTML;ne.getNode(ht).outerHTML=it},G.getDOMNodeId=function(tt){var ht=tt.node;return{nodeId:_e.getOrCreateNodeId(ht)}},ye.default.on("attributes",function(tt,ht){var it=ne.getNodeId(tt);if(it){var pt=tt.getAttribute(ht);we.default(pt)?I.default.trigger("DOM.attributeRemoved",{nodeId:it,name:ht}):I.default.trigger("DOM.attributeModified",{nodeId:it,name:ht,value:pt})}}),ye.default.on("childList",function(tt,ht,it){var pt=ne.getNodeId(tt);if(pt){if(ht=_e.filterNodes(ht),it=_e.filterNodes(it),!ke.default(ht)){Tn();for(var vt=0,ut=ht.length;vt<ut;vt++){var Nt=ht[vt],at=_e.getPreviousNode(Nt),Mt=at?ne.getNodeId(at):0,nn={node:_e.wrap(Nt,{depth:0}),parentNodeId:pt,previousNodeId:Mt};I.default.trigger("DOM.childNodeInserted",nn)}}if(!ke.default(it))for(vt=0,ut=it.length;vt<ut;vt++){if(Nt=it[vt],!ne.getNodeId(Nt)){Tn();break}I.default.trigger("DOM.childNodeRemoved",{nodeId:ne.getNodeId(Nt),parentNodeId:pt})}}function Tn(){I.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:_e.wrap(tt,{depth:0}).childNodeCount,nodeId:pt})}}),ye.default.on("characterData",function(tt){var ht=ne.getNodeId(tt);ht&&I.default.trigger("DOM.characterDataModified",{characterData:tt.nodeValue,nodeId:ht})})},2139:function(U,G,V){var re=this&&this.__spreadArrays||function(){for(var Oe=0,Fe=0,ze=arguments.length;Fe<ze;Fe++)Oe+=arguments[Fe].length;var Le=Array(Oe),We=0;for(Fe=0;Fe<ze;Fe++)for(var qe=arguments[Fe],Ne=0,Ke=qe.length;Ne<Ke;Ne++,We++)Le[We]=qe[Ne];return Le},te=this&&this.__importDefault||function(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}};Object.defineProperty(G,"__esModule",{value:!0}),G.getResponseBody=G.enable=G.getCookies=G.deleteCookies=void 0;var Q=te(V(4331)),de=te(V(3783)),I=te(V(1420)),_e=te(V(5031)),ne=te(V(8763)),ge=te(V(8740)),ye=te(V(6341)),xe=V(2636),we=te(V(3276));G.deleteCookies=function(Oe){_e.default(Oe.name)},G.getCookies=function(){var Oe=[],Fe=document.cookie;return Q.default(Fe)!==""&&de.default(Fe.split(";"),function(ze){ze=ze.split("=");var Le=Q.default(ze.shift());ze=I.default(ze.join("=")),Oe.push({name:Le,value:ze})}),{cookies:Oe}};var ke=new Map;function Se(Oe){return!ye.default(Oe,"__chobitsu-hide__=true")}G.enable=ne.default(function(){var Oe=window.XMLHttpRequest.prototype,Fe=Oe.send,ze=Oe.open,Le=Oe.setRequestHeader;Oe.open=function(Ne,Ke){if(!Se(Ke))return ze.apply(this,arguments);var ot=this,yt=ot.chobitsuRequest=new xe.XhrRequest(ot,Ne,Ke);yt.on("send",function(ft,_t){var Je={method:_t.method,url:_t.url,headers:_t.reqHeaders};_t.data&&(Je.postData=_t.data),we.default.trigger("Network.requestWillBeSent",{requestId:ft,type:"XHR",request:Je,timestamp:_t.time/1e3})}),yt.on("headersReceived",function(ft,_t){we.default.trigger("Network.responseReceivedExtraInfo",{requestId:ft,blockedCookies:[],headers:_t.resHeaders})}),yt.on("done",function(ft,_t){we.default.trigger("Network.responseReceived",{requestId:ft,type:"XHR",response:{status:_t.status},timestamp:_t.time/1e3}),ke.set(ft,_t.resTxt),we.default.trigger("Network.loadingFinished",{requestId:ft,encodedDataLength:_t.size,timestamp:_t.time/1e3})}),ot.addEventListener("readystatechange",function(){switch(ot.readyState){case 2:return yt.handleHeadersReceived();case 4:return yt.handleDone()}}),ze.apply(this,arguments)},Oe.send=function(Ne){var Ke=this.chobitsuRequest;Ke&&Ke.handleSend(Ne),Fe.apply(this,arguments)},Oe.setRequestHeader=function(Ne,Ke){var ot=this.chobitsuRequest;ot&&ot.handleReqHeadersSet(Ne,Ke),Le.apply(this,arguments)};var We=!1;if(window.fetch&&(We=ge.default(window.fetch)),!We&&navigator.serviceWorker&&(We=!0),We){var qe=window.fetch;window.fetch=function(){for(var Ne=[],Ke=0;Ke<arguments.length;Ke++)Ne[Ke]=arguments[Ke];var ot=new(xe.FetchRequest.bind.apply(xe.FetchRequest,re([void 0],Ne)));ot.on("send",function(ft,_t){var Je={method:_t.method,url:_t.url,headers:_t.reqHeaders};_t.data&&(Je.postData=_t.data),we.default.trigger("Network.requestWillBeSent",{requestId:ft,type:"Fetch",request:Je,timestamp:_t.time/1e3})}),ot.on("done",function(ft,_t){we.default.trigger("Network.responseReceived",{requestId:ft,type:"Fetch",response:{status:_t.status,headers:_t.resHeaders},timestamp:_t.time/1e3}),ke.set(ft,_t.resTxt),we.default.trigger("Network.loadingFinished",{requestId:ft,encodedDataLength:_t.size,timestamp:_t.time/1e3})});var yt=qe.apply(void 0,Ne);return ot.send(yt),yt}}}),G.getResponseBody=function(Oe){return{base64Encoded:!1,body:ke.get(Oe.requestId)}}},8689:function(U,G,V){var re=this&&this.__createBinding||(Object.create?function(ut,Nt,at,Mt){Mt===void 0&&(Mt=at),Object.defineProperty(ut,Mt,{enumerable:!0,get:function(){return Nt[at]}})}:function(ut,Nt,at,Mt){Mt===void 0&&(Mt=at),ut[Mt]=Nt[at]}),te=this&&this.__setModuleDefault||(Object.create?function(ut,Nt){Object.defineProperty(ut,"default",{enumerable:!0,value:Nt})}:function(ut,Nt){ut.default=Nt}),Q=this&&this.__importStar||function(ut){if(ut&&ut.__esModule)return ut;var Nt={};if(ut!=null)for(var at in ut)at!=="default"&&Object.hasOwnProperty.call(ut,at)&&re(Nt,ut,at);return te(Nt,ut),Nt},de=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(G,"__esModule",{value:!0}),G.setInspectMode=G.setShowViewportSizeOnResize=G.hideHighlight=G.highlightNode=G.disable=G.enable=void 0;var I,_e,ne=V(2049),ge=V(7935),ye=de(V(1512)),xe=de(V(8613)),we=de(V(9956)),ke=de(V(642)),Se=de(V(4193)),Oe=de(V(3276)),Fe=de(V(7715)),ze=Q(V(7923)),Le=!1,We=!1;function qe(ut){var Nt,at=ut.nodeId,Mt=ut.highlightConfig,nn=ut.objectId;at&&(Nt=ne.getNode(at)),nn&&(Nt=ze.getObj(nn)),Nt.nodeType!==1&&Nt.nodeType!==3||(Se.default(Mt,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),I.highlight(Nt,Mt))}function Ne(){I.hide()}G.enable=function(){if(!We){Le||(ke.default(V(9410)),Le=!0);var ut=xe.default("div",{class:"__chobitsu-hide__"});_e=ye.default(ut),document.documentElement.appendChild(ut),I=new Fe.default(ut),window.addEventListener("resize",it),We=!0}},G.disable=function(){I.destroy(),_e.remove(),window.removeEventListener("resize",it),We=!1},G.highlightNode=qe,G.hideHighlight=Ne;var Ke=!1;G.setShowViewportSizeOnResize=function(ut){Ke=ut.show};var ot={},yt="none";function ft(ut){if(we.default()){var Nt=ut.touches[0]||ut.changedTouches[0];return document.elementFromPoint(Nt.pageX,Nt.pageY)}return document.elementFromPoint(ut.clientX,ut.clientY)}G.setInspectMode=function(ut){ot=ut.highlightConfig,yt=ut.mode};var _t=-1;function Je(ut){if(yt!=="none"){var Nt=ft(ut);if(Nt&&ne.isValidNode(Nt)){var at=ne.getNodeId(Nt);at||(at=ge.pushNodesToFrontend(Nt)),qe({nodeId:at,highlightConfig:ot}),at!==_t&&(Oe.default.trigger("Overlay.nodeHighlightRequested",{nodeId:at}),_t=at)}}}function Qe(ut){if(yt!=="none"){ut.preventDefault(),ut.stopImmediatePropagation();var Nt=ft(ut);Oe.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:ne.getNodeId(Nt)}),_t=-1,Ne()}}function tt(ut,Nt){document.documentElement.addEventListener(ut,Nt,!0)}we.default()?(tt("touchstart",Je),tt("touchmove",Je),tt("touchend",Qe)):(tt("mousemove",Je),tt("mouseout",function(){yt!=="none"&&Ne()}),tt("click",Qe));var ht=xe.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function it(){Ke&&(vt.text(window.innerWidth+"px \xD7 "+window.innerHeight+"px"),pt?clearTimeout(pt):document.documentElement.appendChild(ht),pt=setTimeout(function(){vt.remove(),pt=null},1e3))}var pt,vt=ye.default(ht)},9119:function(U,G,V){var re=this&&this.__importDefault||function(ge){return ge&&ge.__esModule?ge:{default:ge}};Object.defineProperty(G,"__esModule",{value:!0}),G.getTrustTokens=G.clearDataForOrigin=G.getUsageAndQuota=void 0;var te=re(V(3783)),Q=re(V(5031)),de=re(V(615)),I=V(2139),_e=de.default("local"),ne=de.default("session");G.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},G.clearDataForOrigin=function(ge){var ye=ge.storageTypes.split(",");te.default(ye,function(xe){if(xe==="cookies"){var we=I.getCookies().cookies;te.default(we,function(ke){var Se=ke.name;return Q.default(Se)})}else xe==="local_storage"&&(_e.clear(),ne.clear())})},G.getTrustTokens=function(){return{tokens:[]}}},3276:function(U,G,V){var re,te=this&&this.__extends||(re=function(I,_e){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ge){ne.__proto__=ge}||function(ne,ge){for(var ye in ge)ge.hasOwnProperty(ye)&&(ne[ye]=ge[ye])},re(I,_e)},function(I,_e){function ne(){this.constructor=I}re(I,_e),I.prototype=_e===null?Object.create(_e):(ne.prototype=_e.prototype,new ne)}),Q=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(G,"__esModule",{value:!0});var de=function(I){function _e(){return I!==null&&I.apply(this,arguments)||this}return te(_e,I),_e.prototype.trigger=function(ne,ge){this.emit("message",JSON.stringify({method:ne,params:ge}))},_e}(Q(V(1443)).default);G.default=new de},5286:function(U,G,V){var re=this&&this.__importDefault||function(ye){return ye&&ye.__esModule?ye:{default:ye}};Object.defineProperty(G,"__esModule",{value:!0}),G.setGlobal=void 0;var te=re(V(6768)),Q=re(V(2327)),de=re(V(1352)),I=re(V(2533)),_e=re(V(8933)),ne=re(V(3783)),ge={copy:function(ye){te.default(ye)||(ye=JSON.stringify(ye,null,2)),Q.default(ye)},$:function(ye){return document.querySelector(ye)},$$:function(ye){return de.default(document.querySelectorAll(ye))},$x:function(ye){return _e.default(ye)},keys:I.default};G.setGlobal=function(ye,xe){ge[ye]=xe},G.default=function(ye){var xe;ne.default(ge,function(we,ke){window[ke]||(window[ke]=we)});try{xe=eval.call(window,"("+ye+")")}catch{xe=eval.call(window,ye)}return ne.default(ge,function(we,ke){window[ke]&&window[ke]===we&&delete window[ke]}),xe}},6126:function(U,G,V){var re,te=this&&this.__extends||(re=function(ne,ge){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,xe){ye.__proto__=xe}||function(ye,xe){for(var we in xe)xe.hasOwnProperty(we)&&(ye[we]=xe[we])},re(ne,ge)},function(ne,ge){function ye(){this.constructor=ne}re(ne,ge),ne.prototype=ge===null?Object.create(ge):(ye.prototype=ge.prototype,new ye)}),Q=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(3783)),_e=function(ne){function ge(){var ye=ne.call(this)||this;return ye.observer=new MutationObserver(function(xe){I.default(xe,function(we){return ye.handleMutation(we)})}),ye}return te(ge,ne),ge.prototype.observe=function(){var ye=this.observer;ye.disconnect(),ye.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},ge.prototype.handleMutation=function(ye){ye.type==="attributes"?this.emit("attributes",ye.target,ye.attributeName):ye.type==="childList"?this.emit("childList",ye.target,ye.addedNodes,ye.removedNodes):ye.type==="characterData"&&this.emit("characterData",ye.target)},ge}(de.default);G.default=new _e},2049:function(U,G,V){var re=this&&this.__importDefault||function(Le){return Le&&Le.__esModule?Le:{default:Le}};Object.defineProperty(G,"__esModule",{value:!0}),G.getNode=G.isValidNode=G.filterNodes=G.getPreviousNode=G.getChildNodes=G.wrap=G.getNodeId=G.clear=G.getOrCreateNodeId=void 0;var te=re(V(2461)),Q=re(V(5972)),de=re(V(3783)),I=re(V(4331)),_e=re(V(6341)),ne=re(V(6329)),ge=V(316),ye=new Map,xe=new Map,we=1;function ke(Le){var We=xe.get(Le);return We||(We=we++,xe.set(Le,We),ye.set(We,Le),We)}function Se(Le,We){var qe=(We===void 0?{}:We).depth,Ne=qe===void 0?1:qe,Ke=ke(Le),ot={nodeName:Le.nodeName,nodeType:Le.nodeType,localName:Le.localName||"",nodeValue:Le.nodeValue||"",nodeId:Ke,backendNodeId:Ke};if(Le.parentNode&&(ot.parentId=ke(Le.parentNode)),Le.nodeType===10)return ne.default(ot,{publicId:"",systemId:""});if(Le.attributes){var yt=[];de.default(Le.attributes,function(Je){var Qe=Je.name,tt=Je.value;return yt.push(Qe,tt)}),ot.attributes=yt}var ft=Fe(Le.childNodes);ot.childNodeCount=ft.length;var _t=ot.childNodeCount===1&&ft[0].nodeType===3;return(Ne>0||_t)&&(ot.children=Oe(Le,Ne)),ot}function Oe(Le,We){var qe=Fe(Le.childNodes);return te.default(qe,function(Ne){return Se(Ne,{depth:We-1})})}function Fe(Le){return Q.default(Le,function(We){return ze(We)})}function ze(Le){if(Le.nodeType===1){var We=Le.getAttribute("class")||"";if(_e.default(We,"__chobitsu-hide__")||_e.default(We,"html2canvas-container"))return!1}var qe=!(Le.nodeType===3&&I.default(Le.nodeValue||"")==="");return qe&&Le.parentNode?ze(Le.parentNode):qe}G.getOrCreateNodeId=ke,G.clear=function(){ye.clear(),xe.clear()},G.getNodeId=function(Le){return xe.get(Le)},G.wrap=Se,G.getChildNodes=Oe,G.getPreviousNode=function(Le){var We=Le.previousSibling;if(We){for(;!ze(We)&&We.previousSibling;)We=We.previousSibling;return We&&ze(We)?We:void 0}},G.filterNodes=Fe,G.isValidNode=ze,G.getNode=function(Le){var We=ye.get(Le);if(!We||We.nodeType===10)throw ge.createErr(-32e3,"Could not find node with given id");return We}},7923:function(U,G,V){var re=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(G,"__esModule",{value:!0}),G.getProperties=G.releaseObj=G.getObj=G.wrap=G.clear=void 0;var te=re(V(3367)),Q=re(V(6156)),de=re(V(6472)),I=re(V(4777)),_e=re(V(9833)),ne=re(V(2749)),ge=re(V(3708)),ye=re(V(7470)),xe=re(V(1754)),we=re(V(3085)),ke=re(V(2533)),Se=re(V(300)),Oe=re(V(1116)),Fe=re(V(8740)),ze=re(V(415)),Le=re(V(9804)),We=re(V(6257)),qe=new Map,Ne=new Map,Ke=new Map,ot=new Map,yt=1;function ft(ut,Nt){var at=Ne.get(ut);return at||(at=JSON.stringify({injectedScriptId:0,id:yt++}),Ne.set(ut,at),qe.set(at,ut),Ke.set(at,Nt),at)}function _t(ut,Nt){var at=Nt===void 0?{}:Nt,Mt=at.generatePreview,nn=Mt!==void 0&&Mt,Tn=at.self,Jt=Tn===void 0?ut:Tn,on=it(ut),Vt=on.type,Rt=on.subtype;return Vt==="undefined"?on:Vt==="string"||Vt==="boolean"||Rt==="null"?(on.value=ut,on):(on.description=ht(ut,Jt),Vt==="number"?(on.value=ut,on):Vt==="symbol"?(on.objectId=ft(ut,Jt),on):(on.className=Vt==="function"?"Function":Rt==="array"?"Array":Rt==="map"?"Map":Rt==="set"?"Set":Rt==="regexp"?"RegExp":Rt==="error"?ut.name:we.default(ut,!1),nn&&(on.preview=Qe(ut,Jt)),on.objectId=ft(ut,Jt),on))}function Je(ut){return qe.get(ut)}G.clear=function(){qe.clear(),Ne.clear(),Ke.clear()},G.wrap=_t,G.getObj=Je,G.releaseObj=function(ut){var Nt=Je(ut);Ne.delete(Nt),Ke.delete(ut),qe.delete(ut)},G.getProperties=function(ut){for(var Nt=ut.accessorPropertiesOnly,at=ut.objectId,Mt=ut.ownProperties,nn=ut.generatePreview,Tn=[],Jt={prototype:!Mt,unenumerable:!0,symbol:!Nt},on=qe.get(at),Vt=Ke.get(at),Rt=Oe.default(on,Jt),Yt=ze.default(on),un=0,yn=Rt.length;un<yn;un++){var In=Rt[un],It=void 0;try{It=Vt[In]}catch{}var $t={name:te.default(In),isOwn:We.default(Vt,In)},an=Object.getOwnPropertyDescriptor(on,In);if(!an&&Yt&&(an=Object.getOwnPropertyDescriptor(Yt,In)),an){if(Nt&&!an.get&&!an.set)continue;$t.configurable=an.configurable,$t.enumerable=an.enumerable,$t.writable=an.writable,an.get&&($t.get=_t(an.get)),an.set&&($t.set=_t(an.set))}Yt&&We.default(Yt,In)&&$t.enumerable&&($t.isOwn=!0);var xn=!0;!$t.isOwn&&$t.get&&(xn=!1),xn&&(Le.default(In)?($t.symbol=_t(In),$t.value={type:"undefined"}):$t.value=_t(It,{generatePreview:nn})),Nt&&I.default(It)&&Fe.default(It)||Tn.push($t)}if(!Yt||Mt||vt(on)||Tn.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:We.default(on,"__proto__"),value:_t(Yt,{self:Vt}),writable:!1}),Nt)return{result:Tn};var En=[];if(Yt&&!vt(on)&&En.push({name:"[[Prototype]]",value:_t(Yt,{self:Vt})}),ge.default(on)||ye.default(on)){var $n=function(zn){for(var vn=ot.get(zn),wn=vn?Je(vn):[],Sn=zn.entries(),Jn=Sn.next().value;Jn;)ge.default(zn)?wn.push(new pt(Jn[1],Jn[0])):wn.push(new pt(Jn[1])),Jn=Sn.next().value;return wn}(on);En.push({name:"[[Entries]]",value:_t($n)})}return{internalProperties:En,result:Tn}};function Qe(ut,Nt){Nt===void 0&&(Nt=ut);var at=it(ut);at.description=ht(ut,Nt);var Mt=!1,nn=[],Tn=ke.default(ut),Jt=Tn.length;Jt>5&&(Jt=5,Mt=!0);for(var on=0;on<Jt;on++){var Vt=Tn[on];nn.push(tt(Vt,Nt[Vt]))}if(at.properties=nn,ge.default(ut)){for(var Rt=[],Yt=(on=0,ut.keys()),un=Yt.next().value;un;){if(on>5){Mt=!0;break}Rt.push({key:Qe(un),value:Qe(ut.get(un))}),on++,un=Yt.next().value}at.entries=Rt}else if(ye.default(ut)){var yn=[],In=(on=0,ut.keys());for(un=In.next().value;un;){if(on>5){Mt=!0;break}yn.push({value:Qe(un)}),on++,un=In.next().value}at.entries=yn}return at.overflow=Mt,at}function tt(ut,Nt){var at=it(Nt);at.name=ut;var Mt,nn=at.subtype;return Mt=at.type==="object"?nn==="null"?"null":nn==="array"?"Array("+Nt.length+")":nn==="map"?"Map("+Nt.size+")":nn==="set"?"Set("+Nt.size+")":we.default(Nt,!1):te.default(Nt),at.value=Mt,at}function ht(ut,Nt){Nt===void 0&&(Nt=ut);var at=it(ut),Mt=at.type,nn=at.subtype;return Mt==="string"?ut:Mt==="number"||Mt==="symbol"?te.default(ut):Mt==="function"?Se.default(ut):nn==="array"?"Array("+ut.length+")":nn==="map"?"Map("+Nt.size+")":nn==="set"?"Set("+Nt.size+")":nn==="regexp"?te.default(ut):nn==="error"?ut.stack:nn==="internal#entry"?ut.name?'{"'+te.default(ut.name)+'" => "'+te.default(ut.value)+'"}':'"'+te.default(ut.value)+'"':we.default(ut,!1)}function it(ut){var Nt=typeof ut,at="object";if(ut instanceof pt)at="internal#entry";else if(Q.default(ut))at="null";else if(de.default(ut))at="array";else if(xe.default(ut))at="regexp";else if(ne.default(ut))at="error";else if(ge.default(ut))at="map";else if(ye.default(ut))at="set";else try{_e.default(ut)&&(at="node")}catch{}return{type:Nt,subtype:at}}var pt=function(ut,Nt){Nt&&(this.name=Nt),this.value=ut};function vt(ut){return ut instanceof pt||!!(ut[0]&&ut[0]instanceof pt)}},2636:function(U,G,V){var re,te=this&&this.__extends||(re=function(Qe,tt){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,it){ht.__proto__=it}||function(ht,it){for(var pt in it)it.hasOwnProperty(pt)&&(ht[pt]=it[pt])},re(Qe,tt)},function(Qe,tt){function ht(){this.constructor=Qe}re(Qe,tt),Qe.prototype=tt===null?Object.create(tt):(ht.prototype=tt.prototype,new ht)}),Q=this&&this.__importDefault||function(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}};Object.defineProperty(G,"__esModule",{value:!0}),G.fullUrl=G.FetchRequest=G.XhrRequest=void 0;var de=Q(V(1443)),I=Q(V(6768)),_e=Q(V(9702)),ne=Q(V(6334)),ge=Q(V(8887)),ye=Q(V(4331)),xe=Q(V(8847)),we=Q(V(3783)),ke=Q(V(6930)),Se=Q(V(3875)),Oe=V(316),Fe=function(Qe){function tt(ht,it,pt){var vt=Qe.call(this)||this;return vt.xhr=ht,vt.reqHeaders={},vt.method=it,vt.url=ot(pt),vt.id=Oe.createId(),vt}return te(tt,Qe),tt.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},tt.prototype.handleSend=function(ht){I.default(ht)||(ht=""),ht={name:yt(this.url),url:this.url,data:ht,time:xe.default(),reqHeaders:this.reqHeaders,method:this.method},ge.default(this.reqHeaders)||(ht.reqHeaders=this.reqHeaders),this.emit("send",this.id,ht)},tt.prototype.handleReqHeadersSet=function(ht,it){ht&&it&&(this.reqHeaders[ht]=it)},tt.prototype.handleHeadersReceived=function(){var ht=this.xhr,it=ft(ht.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:it.type,subType:it.subType,size:Ne(ht,!0,this.url),time:xe.default(),resHeaders:qe(ht)})},tt.prototype.handleDone=function(){var ht,it,pt,vt=this,ut=this.xhr,Nt=ut.responseType,at="",Mt=function(){vt.emit("done",vt.id,{status:ut.status,size:Ne(ut,!1,vt.url),time:xe.default(),resTxt:at})},nn=ft(ut.getResponseHeader("Content-Type")||"");Nt!=="blob"||nn.type!=="text"&&nn.subType!=="javascript"&&nn.subType!=="json"?(Nt!==""&&Nt!=="text"||(at=ut.responseText),Nt==="json"&&(at=JSON.stringify(ut.response)),Mt()):(ht=ut.response,it=function(Tn,Jt){Jt&&(at=Jt),Mt()},(pt=new FileReader).onload=function(){it(null,pt.result)},pt.onerror=function(Tn){it(Tn)},pt.readAsText(ht))},tt}(de.default);G.XhrRequest=Fe;var ze=function(Qe){function tt(ht,it){it===void 0&&(it={});var pt=Qe.call(this)||this;return ht instanceof window.Request&&(ht=ht.url),pt.url=ot(ht),pt.id=Oe.createId(),pt.options=it,pt.reqHeaders=it.headers||{},pt.method=it.method||"GET",pt}return te(tt,Qe),tt.prototype.send=function(ht){var it=this,pt=this.options,vt=I.default(pt.body)?pt.body:"";this.emit("send",this.id,{name:yt(this.url),url:this.url,data:vt,reqHeaders:this.reqHeaders,time:xe.default(),method:this.method}),ht.then(function(ut){var Nt=ft((ut=ut.clone()).headers.get("Content-Type"));return ut.text().then(function(at){var Mt={type:Nt.type,subType:Nt.subType,time:xe.default(),size:Le(ut,at),resTxt:at,resHeaders:We(ut),status:ut.status};ge.default(it.reqHeaders)||(Mt.reqHeaders=it.reqHeaders),it.emit("done",it.id,Mt)}),ut})},tt}(de.default);function Le(Qe,tt){var ht=Qe.headers.get("Content-length");return ht?Se.default(ht):Je(tt)}function We(Qe){var tt={};return Qe.headers.forEach(function(ht,it){return tt[it]=ht}),tt}function qe(Qe){var tt=Qe.getAllResponseHeaders().split(`
`),ht={};return we.default(tt,function(it){if((it=ye.default(it))!==""){var pt=it.split(":",2),vt=pt[0],ut=pt[1];ht[vt]=ye.default(ut)}}),ht}function Ne(Qe,tt,ht){var it=0;function pt(){if(!tt){var vt=Qe.responseType,ut="";vt!==""&&vt!=="text"||(ut=Qe.responseText),ut&&(it=Je(ut))}}if(function(vt){return!ke.default(vt,_t)}(ht))pt();else try{it=Se.default(Qe.getResponseHeader("Content-Length"))}catch{pt()}return it===0&&pt(),it}G.FetchRequest=ze;var Ke=document.createElement("a");function ot(Qe){return Ke.href=Qe,Ke.protocol+"//"+Ke.host+Ke.pathname+Ke.search+Ke.hash}function yt(Qe){var tt=_e.default(Qe.split("/"));return tt.indexOf("?")>-1&&(tt=ye.default(tt.split("?")[0])),tt===""&&(tt=new ne.default(Qe).hostname),tt}function ft(Qe){if(!Qe)return{type:"unknown",subType:"unknown"};var tt=Qe.split(";")[0].split("/");return{type:tt[0],subType:_e.default(tt)}}G.fullUrl=ot;var _t=window.location.origin;function Je(Qe){var tt=encodeURIComponent(Qe).match(/%[89ABab]/g);return Qe.length+(tt?tt.length:0)}},316:function(U,G,V){var re,te=this&&this.__extends||(re=function(ze,Le){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(We,qe){We.__proto__=qe}||function(We,qe){for(var Ne in qe)qe.hasOwnProperty(Ne)&&(We[Ne]=qe[Ne])},re(ze,Le)},function(ze,Le){function We(){this.constructor=ze}re(ze,Le),ze.prototype=Le===null?Object.create(Le):(We.prototype=Le.prototype,new We)}),Q=this&&this.__awaiter||function(ze,Le,We,qe){return new(We||(We=Promise))(function(Ne,Ke){function ot(_t){try{ft(qe.next(_t))}catch(Je){Ke(Je)}}function yt(_t){try{ft(qe.throw(_t))}catch(Je){Ke(Je)}}function ft(_t){var Je;_t.done?Ne(_t.value):(Je=_t.value,Je instanceof We?Je:new We(function(Qe){Qe(Je)})).then(ot,yt)}ft((qe=qe.apply(ze,Le||[])).next())})},de=this&&this.__generator||function(ze,Le){var We,qe,Ne,Ke,ot={label:0,sent:function(){if(1&Ne[0])throw Ne[1];return Ne[1]},trys:[],ops:[]};return Ke={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(Ke[Symbol.iterator]=function(){return this}),Ke;function yt(ft){return function(_t){return function(Je){if(We)throw new TypeError("Generator is already executing.");for(;ot;)try{if(We=1,qe&&(Ne=2&Je[0]?qe.return:Je[0]?qe.throw||((Ne=qe.return)&&Ne.call(qe),0):qe.next)&&!(Ne=Ne.call(qe,Je[1])).done)return Ne;switch(qe=0,Ne&&(Je=[2&Je[0],Ne.value]),Je[0]){case 0:case 1:Ne=Je;break;case 4:return ot.label++,{value:Je[1],done:!1};case 5:ot.label++,qe=Je[1],Je=[0];continue;case 7:Je=ot.ops.pop(),ot.trys.pop();continue;default:if(Ne=ot.trys,!((Ne=Ne.length>0&&Ne[Ne.length-1])||Je[0]!==6&&Je[0]!==2)){ot=0;continue}if(Je[0]===3&&(!Ne||Je[1]>Ne[0]&&Je[1]<Ne[3])){ot.label=Je[1];break}if(Je[0]===6&&ot.label<Ne[1]){ot.label=Ne[1],Ne=Je;break}if(Ne&&ot.label<Ne[2]){ot.label=Ne[2],ot.ops.push(Je);break}Ne[2]&&ot.ops.pop(),ot.trys.pop();continue}Je=Le.call(ze,ot)}catch(Qe){Je=[6,Qe],qe=0}finally{We=Ne=0}if(5&Je[0])throw Je[1];return{value:Je[0]?Je[1]:void 0,done:!0}}([ft,_t])}}},I=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.getBase64Content=G.getTextContent=G.getOrigin=G.getUrl=G.createErr=G.ErrorWithCode=G.getAbsoluteUrl=G.createId=void 0;var _e=I(V(5229)),ne=I(V(1216)),ge=I(V(6930)),ye=I(V(6334)),xe=I(V(1792)),we=I(V(9669)),ke=ne.default(1e3,9999)+".";G.createId=function(){return _e.default(ke)},G.getAbsoluteUrl=function(ze){var Le=document.createElement("a");return Le.href=ze,Le.href};var Se=function(ze){function Le(We,qe){var Ne=this.constructor,Ke=ze.call(this,qe)||this;return Ke.code=We,Object.setPrototypeOf(Ke,Ne.prototype),Ke}return te(Le,ze),Le}(Error);function Oe(ze,Le,We){return We===void 0&&(We=""),Q(this,void 0,void 0,function(){var qe;return de(this,function(Ne){switch(Ne.label){case 0:return Ne.trys.push([0,2,,8]),(qe=new ye.default(ze)).setQuery("__chobitsu-hide__","true"),[4,we.default.get(qe.toString(),{responseType:Le})];case 1:return[2,Ne.sent().data];case 2:if(Ne.sent(),!We)return[3,7];Ne.label=3;case 3:return Ne.trys.push([3,6,,7]),[4,we.default.get(Fe(We,ze),{responseType:Le})];case 4:return[4,Ne.sent().data];case 5:return[2,Ne.sent()];case 6:return Ne.sent(),[3,7];case 7:return[3,8];case 8:return[2,Le==="arraybuffer"?new ArrayBuffer(0):""]}})})}function Fe(ze,Le){var We=new ye.default(ze);return We.setQuery("url",Le),We.setQuery("__chobitsu-hide__","true"),We.toString()}G.ErrorWithCode=Se,G.createErr=function(ze,Le){return new Se(ze,Le)},G.getUrl=function(){var ze=location.href;return ge.default(ze,"about:")?parent.location.href:ze},G.getOrigin=function(){var ze=location.origin;return ze==="null"?parent.location.origin:ze},G.getTextContent=function(ze,Le){return Le===void 0&&(Le=""),Q(this,void 0,void 0,function(){return de(this,function(We){switch(We.label){case 0:return[4,Oe(ze,"text",Le)];case 1:return[2,We.sent()]}})})},G.getBase64Content=function(ze,Le){return Le===void 0&&(Le=""),Q(this,void 0,void 0,function(){var We;return de(this,function(qe){switch(qe.label){case 0:return We=xe.default,[4,Oe(ze,"arraybuffer",Le)];case 1:return[2,We.apply(void 0,[qe.sent(),"base64"])]}})})}},9410:function(U,G,V){(G=V(3645)(!1)).push([U.id,`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}`,""]),U.exports=G},3645:function(U){U.exports=function(G){var V=[];return V.toString=function(){return this.map(function(re){var te=function(Q,de){var I=Q[1]||"",_e=Q[3];if(!_e)return I;if(de&&typeof btoa=="function"){var ne=(ye=_e,xe=btoa(unescape(encodeURIComponent(JSON.stringify(ye)))),we="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(xe),"/*# ".concat(we," */")),ge=_e.sources.map(function(ke){return"/*# sourceURL=".concat(_e.sourceRoot||"").concat(ke," */")});return[I].concat(ge).concat([ne]).join(`
`)}var ye,xe,we;return[I].join(`
`)}(re,G);return re[2]?"@media ".concat(re[2]," {").concat(te,"}"):te}).join("")},V.i=function(re,te,Q){typeof re=="string"&&(re=[[null,re,""]]);var de={};if(Q)for(var I=0;I<this.length;I++){var _e=this[I][0];_e!=null&&(de[_e]=!0)}for(var ne=0;ne<re.length;ne++){var ge=[].concat(re[ne]);Q&&de[ge[0]]||(te&&(ge[2]?ge[2]="".concat(te," and ").concat(ge[2]):ge[2]=te),V.push(ge))}},V}},8384:function(U,G,V){var re,te;/*!
 * Draggabilly v2.4.1
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */(function(Q,de){re=[V(6131),V(4842)],te=function(I,_e){return function(ne,ge,ye){function xe(Le,We){for(var qe in We)Le[qe]=We[qe];return Le}function we(){}var ke=ne.jQuery;function Se(Le,We){this.element=typeof Le=="string"?document.querySelector(Le):Le,ke&&(this.$element=ke(this.element)),this.options=xe({},this.constructor.defaults),this.option(We),this._create()}var Oe=Se.prototype=Object.create(ye.prototype);Se.defaults={},Oe.option=function(Le){xe(this.options,Le)};var Fe={relative:!0,absolute:!0,fixed:!0};function ze(Le,We,qe){return qe=qe||"round",We?Math[qe](Le/We)*We:Le}return Oe._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=xe({},this.position);var Le=getComputedStyle(this.element);Fe[Le.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},Oe.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},Oe.dispatchEvent=function(Le,We,qe){var Ne=[We].concat(qe);this.emitEvent(Le,Ne),this.dispatchJQueryEvent(Le,We,qe)},Oe.dispatchJQueryEvent=function(Le,We,qe){var Ne=ne.jQuery;if(Ne&&this.$element){var Ke=Ne.Event(We);Ke.type=Le,this.$element.trigger(Ke,qe)}},Oe._getPosition=function(){var Le=getComputedStyle(this.element),We=this._getPositionCoord(Le.left,"width"),qe=this._getPositionCoord(Le.top,"height");this.position.x=isNaN(We)?0:We,this.position.y=isNaN(qe)?0:qe,this._addTransformPosition(Le)},Oe._getPositionCoord=function(Le,We){if(Le.indexOf("%")!=-1){var qe=ge(this.element.parentNode);return qe?parseFloat(Le)/100*qe[We]:0}return parseInt(Le,10)},Oe._addTransformPosition=function(Le){var We=Le.transform;if(We.indexOf("matrix")===0){var qe=We.split(","),Ne=We.indexOf("matrix3d")===0?12:4,Ke=parseInt(qe[Ne],10),ot=parseInt(qe[Ne+1],10);this.position.x+=Ke,this.position.y+=ot}},Oe.onPointerDown=function(Le,We){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",Le,[We])},Oe.pointerDown=function(Le,We){this.okayPointerDown(Le)&&this.isEnabled?(this.pointerDownPointer={pageX:We.pageX,pageY:We.pageY},Le.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Le),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",Le,[We])):this._pointerReset()},Oe.dragStart=function(Le,We){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",Le,[We]),this.animate())},Oe.measureContainment=function(){var Le=this.getContainer();if(Le){var We=ge(this.element),qe=ge(Le),Ne=this.element.getBoundingClientRect(),Ke=Le.getBoundingClientRect(),ot=qe.borderLeftWidth+qe.borderRightWidth,yt=qe.borderTopWidth+qe.borderBottomWidth,ft=this.relativeStartPosition={x:Ne.left-(Ke.left+qe.borderLeftWidth),y:Ne.top-(Ke.top+qe.borderTopWidth)};this.containSize={width:qe.width-ot-ft.x-We.width,height:qe.height-yt-ft.y-We.height}}},Oe.getContainer=function(){var Le=this.options.containment;if(Le)return Le instanceof HTMLElement?Le:typeof Le=="string"?document.querySelector(Le):this.element.parentNode},Oe.onPointerMove=function(Le,We,qe){this.dispatchJQueryEvent("pointerMove",Le,[We,qe])},Oe.dragMove=function(Le,We,qe){if(this.isEnabled){var Ne=qe.x,Ke=qe.y,ot=this.options.grid,yt=ot&&ot[0],ft=ot&&ot[1];Ne=ze(Ne,yt),Ke=ze(Ke,ft),Ne=this.containDrag("x",Ne,yt),Ke=this.containDrag("y",Ke,ft),Ne=this.options.axis=="y"?0:Ne,Ke=this.options.axis=="x"?0:Ke,this.position.x=this.startPosition.x+Ne,this.position.y=this.startPosition.y+Ke,this.dragPoint.x=Ne,this.dragPoint.y=Ke,this.dispatchEvent("dragMove",Le,[We,qe])}},Oe.containDrag=function(Le,We,qe){if(!this.options.containment)return We;var Ne=Le=="x"?"width":"height",Ke=ze(-this.relativeStartPosition[Le],qe,"ceil"),ot=this.containSize[Ne];return ot=ze(ot,qe,"floor"),Math.max(Ke,Math.min(ot,We))},Oe.onPointerUp=function(Le,We){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",Le,[We])},Oe.dragEnd=function(Le,We){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",Le,[We]))},Oe.animate=function(){if(this.isDragging){this.positionDrag();var Le=this;requestAnimationFrame(function(){Le.animate()})}},Oe.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},Oe.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},Oe.staticClick=function(Le,We){this.dispatchEvent("staticClick",Le,[We])},Oe.setPosition=function(Le,We){this.position.x=Le,this.position.y=We,this.setLeftTop()},Oe.enable=function(){this.isEnabled=!0},Oe.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},Oe.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},Oe._init=we,ke&&ke.bridget&&ke.bridget("draggabilly",Se),Se}(Q,I,_e)}.apply(G,re),te===void 0||(U.exports=te)})(window)},7158:function(U,G,V){var re,te;(te=typeof(re=function(){function Q(){}var de=Q.prototype;return de.on=function(I,_e){if(I&&_e){var ne=this._events=this._events||{},ge=ne[I]=ne[I]||[];return ge.indexOf(_e)==-1&&ge.push(_e),this}},de.once=function(I,_e){if(I&&_e){this.on(I,_e);var ne=this._onceEvents=this._onceEvents||{};return(ne[I]=ne[I]||{})[_e]=!0,this}},de.off=function(I,_e){var ne=this._events&&this._events[I];if(ne&&ne.length){var ge=ne.indexOf(_e);return ge!=-1&&ne.splice(ge,1),this}},de.emitEvent=function(I,_e){var ne=this._events&&this._events[I];if(ne&&ne.length){ne=ne.slice(0),_e=_e||[];for(var ge=this._onceEvents&&this._onceEvents[I],ye=0;ye<ne.length;ye++){var xe=ne[ye];ge&&ge[xe]&&(this.off(I,xe),delete ge[xe]),xe.apply(this,_e)}return this}},de.allOff=function(){delete this._events,delete this._onceEvents},Q})=="function"?re.call(G,V,G,U):re)===void 0||(U.exports=te)},6131:function(U,G,V){var re,te;/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(te=typeof(re=function(){function Q(Oe){var Fe=parseFloat(Oe);return Oe.indexOf("%")==-1&&!isNaN(Fe)&&Fe}function de(){}var I=typeof console=="undefined"?de:function(Oe){console.error(Oe)},_e=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],ne=_e.length;function ge(){for(var Oe={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},Fe=0;Fe<ne;Fe++)Oe[_e[Fe]]=0;return Oe}function ye(Oe){var Fe=getComputedStyle(Oe);return Fe||I("Style returned "+Fe+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),Fe}var xe,we=!1;function ke(){if(!we){we=!0;var Oe=document.createElement("div");Oe.style.width="200px",Oe.style.padding="1px 2px 3px 4px",Oe.style.borderStyle="solid",Oe.style.borderWidth="1px 2px 3px 4px",Oe.style.boxSizing="border-box";var Fe=document.body||document.documentElement;Fe.appendChild(Oe);var ze=ye(Oe);xe=Math.round(Q(ze.width))==200,Se.isBoxSizeOuter=xe,Fe.removeChild(Oe)}}function Se(Oe){if(ke(),typeof Oe=="string"&&(Oe=document.querySelector(Oe)),Oe&&typeof Oe=="object"&&Oe.nodeType){var Fe=ye(Oe);if(Fe.display=="none")return ge();var ze={};ze.width=Oe.offsetWidth,ze.height=Oe.offsetHeight;for(var Le=ze.isBorderBox=Fe.boxSizing=="border-box",We=0;We<ne;We++){var qe=_e[We],Ne=Fe[qe],Ke=parseFloat(Ne);ze[qe]=isNaN(Ke)?0:Ke}var ot=ze.paddingLeft+ze.paddingRight,yt=ze.paddingTop+ze.paddingBottom,ft=ze.marginLeft+ze.marginRight,_t=ze.marginTop+ze.marginBottom,Je=ze.borderLeftWidth+ze.borderRightWidth,Qe=ze.borderTopWidth+ze.borderBottomWidth,tt=Le&&xe,ht=Q(Fe.width);ht!==!1&&(ze.width=ht+(tt?0:ot+Je));var it=Q(Fe.height);return it!==!1&&(ze.height=it+(tt?0:yt+Qe)),ze.innerWidth=ze.width-(ot+Je),ze.innerHeight=ze.height-(yt+Qe),ze.outerWidth=ze.width+ft,ze.outerHeight=ze.height+_t,ze}}return Se})=="function"?re.call(G,V,G,U):re)===void 0||(U.exports=te)},6834:function(U,G,V){function re(we){return we&&we.__esModule?we:{default:we}}function te(we){if(we&&we.__esModule)return we;var ke={};if(we!=null)for(var Se in we)Object.prototype.hasOwnProperty.call(we,Se)&&(ke[Se]=we[Se]);return ke.default=we,ke}G.__esModule=!0;var Q=te(V(2067)),de=re(V(5558)),I=re(V(8728)),_e=te(V(2392)),ne=te(V(1628)),ge=re(V(3982));function ye(){var we=new Q.HandlebarsEnvironment;return _e.extend(we,Q),we.SafeString=de.default,we.Exception=I.default,we.Utils=_e,we.escapeExpression=_e.escapeExpression,we.VM=ne,we.template=function(ke){return ne.template(ke,we)},we}var xe=ye();xe.create=ye,ge.default(xe),xe.default=xe,G.default=xe,U.exports=G.default},2067:function(U,G,V){function re(we){return we&&we.__esModule?we:{default:we}}G.__esModule=!0,G.HandlebarsEnvironment=ye;var te=V(2392),Q=re(V(8728)),de=V(2638),I=V(881),_e=re(V(8037)),ne=V(6293);G.VERSION="4.7.7",G.COMPILER_REVISION=8,G.LAST_COMPATIBLE_COMPILER_REVISION=7,G.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var ge="[object Object]";function ye(we,ke,Se){this.helpers=we||{},this.partials=ke||{},this.decorators=Se||{},de.registerDefaultHelpers(this),I.registerDefaultDecorators(this)}ye.prototype={constructor:ye,logger:_e.default,log:_e.default.log,registerHelper:function(we,ke){if(te.toString.call(we)===ge){if(ke)throw new Q.default("Arg not supported with multiple helpers");te.extend(this.helpers,we)}else this.helpers[we]=ke},unregisterHelper:function(we){delete this.helpers[we]},registerPartial:function(we,ke){if(te.toString.call(we)===ge)te.extend(this.partials,we);else{if(ke===void 0)throw new Q.default('Attempting to register a partial called "'+we+'" as undefined');this.partials[we]=ke}},unregisterPartial:function(we){delete this.partials[we]},registerDecorator:function(we,ke){if(te.toString.call(we)===ge){if(ke)throw new Q.default("Arg not supported with multiple decorators");te.extend(this.decorators,we)}else this.decorators[we]=ke},unregisterDecorator:function(we){delete this.decorators[we]},resetLoggedPropertyAccesses:function(){ne.resetLoggedProperties()}};var xe=_e.default.log;G.log=xe,G.createFrame=te.createFrame,G.logger=_e.default},881:function(U,G,V){G.__esModule=!0,G.registerDefaultDecorators=function(de){Q.default(de)};var re,te=V(5670),Q=(re=te)&&re.__esModule?re:{default:re}},5670:function(U,G,V){G.__esModule=!0;var re=V(2392);G.default=function(te){te.registerDecorator("inline",function(Q,de,I,_e){var ne=Q;return de.partials||(de.partials={},ne=function(ge,ye){var xe=I.partials;I.partials=re.extend({},xe,de.partials);var we=Q(ge,ye);return I.partials=xe,we}),de.partials[_e.args[0]]=_e.fn,ne})},U.exports=G.default},8728:function(U,G){G.__esModule=!0;var V=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function re(te,Q){var de=Q&&Q.loc,I=void 0,_e=void 0,ne=void 0,ge=void 0;de&&(I=de.start.line,_e=de.end.line,ne=de.start.column,ge=de.end.column,te+=" - "+I+":"+ne);for(var ye=Error.prototype.constructor.call(this,te),xe=0;xe<V.length;xe++)this[V[xe]]=ye[V[xe]];Error.captureStackTrace&&Error.captureStackTrace(this,re);try{de&&(this.lineNumber=I,this.endLineNumber=_e,Object.defineProperty?(Object.defineProperty(this,"column",{value:ne,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:ge,enumerable:!0})):(this.column=ne,this.endColumn=ge))}catch{}}re.prototype=new Error,G.default=re,U.exports=G.default},2638:function(U,G,V){function re(ye){return ye&&ye.__esModule?ye:{default:ye}}G.__esModule=!0,G.registerDefaultHelpers=function(ye){te.default(ye),Q.default(ye),de.default(ye),I.default(ye),_e.default(ye),ne.default(ye),ge.default(ye)},G.moveHelperToHooks=function(ye,xe,we){ye.helpers[xe]&&(ye.hooks[xe]=ye.helpers[xe],we||delete ye.helpers[xe])};var te=re(V(7342)),Q=re(V(6822)),de=re(V(4905)),I=re(V(7405)),_e=re(V(5702)),ne=re(V(7593)),ge=re(V(3978))},7342:function(U,G,V){G.__esModule=!0;var re=V(2392);G.default=function(te){te.registerHelper("blockHelperMissing",function(Q,de){var I=de.inverse,_e=de.fn;if(Q===!0)return _e(this);if(Q===!1||Q==null)return I(this);if(re.isArray(Q))return Q.length>0?(de.ids&&(de.ids=[de.name]),te.helpers.each(Q,de)):I(this);if(de.data&&de.ids){var ne=re.createFrame(de.data);ne.contextPath=re.appendContextPath(de.data.contextPath,de.name),de={data:ne}}return _e(Q,de)})},U.exports=G.default},6822:function(U,G,V){G.__esModule=!0;var re,te=V(2392),Q=V(8728),de=(re=Q)&&re.__esModule?re:{default:re};G.default=function(I){I.registerHelper("each",function(_e,ne){if(!ne)throw new de.default("Must pass iterator to #each");var ge,ye=ne.fn,xe=ne.inverse,we=0,ke="",Se=void 0,Oe=void 0;function Fe(Ne,Ke,ot){Se&&(Se.key=Ne,Se.index=Ke,Se.first=Ke===0,Se.last=!!ot,Oe&&(Se.contextPath=Oe+Ne)),ke+=ye(_e[Ne],{data:Se,blockParams:te.blockParams([_e[Ne],Ne],[Oe+Ne,null])})}if(ne.data&&ne.ids&&(Oe=te.appendContextPath(ne.data.contextPath,ne.ids[0])+"."),te.isFunction(_e)&&(_e=_e.call(this)),ne.data&&(Se=te.createFrame(ne.data)),_e&&typeof _e=="object")if(te.isArray(_e))for(var ze=_e.length;we<ze;we++)we in _e&&Fe(we,we,we===_e.length-1);else if(V.g.Symbol&&_e[V.g.Symbol.iterator]){for(var Le=[],We=_e[V.g.Symbol.iterator](),qe=We.next();!qe.done;qe=We.next())Le.push(qe.value);for(ze=(_e=Le).length;we<ze;we++)Fe(we,we,we===_e.length-1)}else ge=void 0,Object.keys(_e).forEach(function(Ne){ge!==void 0&&Fe(ge,we-1),ge=Ne,we++}),ge!==void 0&&Fe(ge,we-1,!0);return we===0&&(ke=xe(this)),ke})},U.exports=G.default},4905:function(U,G,V){G.__esModule=!0;var re,te=V(8728),Q=(re=te)&&re.__esModule?re:{default:re};G.default=function(de){de.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new Q.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},U.exports=G.default},7405:function(U,G,V){G.__esModule=!0;var re,te=V(2392),Q=V(8728),de=(re=Q)&&re.__esModule?re:{default:re};G.default=function(I){I.registerHelper("if",function(_e,ne){if(arguments.length!=2)throw new de.default("#if requires exactly one argument");return te.isFunction(_e)&&(_e=_e.call(this)),!ne.hash.includeZero&&!_e||te.isEmpty(_e)?ne.inverse(this):ne.fn(this)}),I.registerHelper("unless",function(_e,ne){if(arguments.length!=2)throw new de.default("#unless requires exactly one argument");return I.helpers.if.call(this,_e,{fn:ne.inverse,inverse:ne.fn,hash:ne.hash})})},U.exports=G.default},5702:function(U,G){G.__esModule=!0,G.default=function(V){V.registerHelper("log",function(){for(var re=[void 0],te=arguments[arguments.length-1],Q=0;Q<arguments.length-1;Q++)re.push(arguments[Q]);var de=1;te.hash.level!=null?de=te.hash.level:te.data&&te.data.level!=null&&(de=te.data.level),re[0]=de,V.log.apply(V,re)})},U.exports=G.default},7593:function(U,G){G.__esModule=!0,G.default=function(V){V.registerHelper("lookup",function(re,te,Q){return re&&Q.lookupProperty(re,te)})},U.exports=G.default},3978:function(U,G,V){G.__esModule=!0;var re,te=V(2392),Q=V(8728),de=(re=Q)&&re.__esModule?re:{default:re};G.default=function(I){I.registerHelper("with",function(_e,ne){if(arguments.length!=2)throw new de.default("#with requires exactly one argument");te.isFunction(_e)&&(_e=_e.call(this));var ge=ne.fn;if(te.isEmpty(_e))return ne.inverse(this);var ye=ne.data;return ne.data&&ne.ids&&((ye=te.createFrame(ne.data)).contextPath=te.appendContextPath(ne.data.contextPath,ne.ids[0])),ge(_e,{data:ye,blockParams:te.blockParams([_e],[ye&&ye.contextPath])})})},U.exports=G.default},8572:function(U,G,V){G.__esModule=!0,G.createNewLookupObject=function(){for(var te=arguments.length,Q=Array(te),de=0;de<te;de++)Q[de]=arguments[de];return re.extend.apply(void 0,[Object.create(null)].concat(Q))};var re=V(2392)},6293:function(U,G,V){G.__esModule=!0,G.createProtoAccessControl=function(I){var _e=Object.create(null);_e.constructor=!1,_e.__defineGetter__=!1,_e.__defineSetter__=!1,_e.__lookupGetter__=!1;var ne=Object.create(null);return ne.__proto__=!1,{properties:{whitelist:re.createNewLookupObject(ne,I.allowedProtoProperties),defaultValue:I.allowProtoPropertiesByDefault},methods:{whitelist:re.createNewLookupObject(_e,I.allowedProtoMethods),defaultValue:I.allowProtoMethodsByDefault}}},G.resultIsAllowed=function(I,_e,ne){return de(typeof I=="function"?_e.methods:_e.properties,ne)},G.resetLoggedProperties=function(){Object.keys(Q).forEach(function(I){delete Q[I]})};var re=V(8572),te=function(I){if(I&&I.__esModule)return I;var _e={};if(I!=null)for(var ne in I)Object.prototype.hasOwnProperty.call(I,ne)&&(_e[ne]=I[ne]);return _e.default=I,_e}(V(8037)),Q=Object.create(null);function de(I,_e){return I.whitelist[_e]!==void 0?I.whitelist[_e]===!0:I.defaultValue!==void 0?I.defaultValue:(function(ne){Q[ne]!==!0&&(Q[ne]=!0,te.log("error",'Handlebars: Access has been denied to resolve the property "'+ne+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}(_e),!1)}},5005:function(U,G){G.__esModule=!0,G.wrapHelper=function(V,re){return typeof V!="function"?V:function(){return arguments[arguments.length-1]=re(arguments[arguments.length-1]),V.apply(this,arguments)}}},8037:function(U,G,V){G.__esModule=!0;var re=V(2392),te={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(Q){if(typeof Q=="string"){var de=re.indexOf(te.methodMap,Q.toLowerCase());Q=de>=0?de:parseInt(Q,10)}return Q},log:function(Q){if(Q=te.lookupLevel(Q),typeof console!="undefined"&&te.lookupLevel(te.level)<=Q){var de=te.methodMap[Q];console[de]||(de="log");for(var I=arguments.length,_e=Array(I>1?I-1:0),ne=1;ne<I;ne++)_e[ne-1]=arguments[ne];console[de].apply(console,_e)}}};G.default=te,U.exports=G.default},3982:function(U,G,V){G.__esModule=!0,G.default=function(re){var te=V.g!==void 0?V.g:window,Q=te.Handlebars;re.noConflict=function(){return te.Handlebars===re&&(te.Handlebars=Q),re}},U.exports=G.default},1628:function(U,G,V){G.__esModule=!0,G.checkRevision=function(Se){var Oe=Se&&Se[0]||1,Fe=I.COMPILER_REVISION;if(!(Oe>=I.LAST_COMPATIBLE_COMPILER_REVISION&&Oe<=I.COMPILER_REVISION)){if(Oe<I.LAST_COMPATIBLE_COMPILER_REVISION){var ze=I.REVISION_CHANGES[Fe],Le=I.REVISION_CHANGES[Oe];throw new de.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+ze+") or downgrade your runtime to an older version ("+Le+").")}throw new de.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+Se[1]+").")}},G.template=function(Se,Oe){if(!Oe)throw new de.default("No environment passed to template");if(!Se||!Se.main)throw new de.default("Unknown template object: "+typeof Se);Se.main.decorator=Se.main_d,Oe.VM.checkRevision(Se.compiler);var Fe=Se.compiler&&Se.compiler[0]===7,ze={strict:function(We,qe,Ne){if(!We||!(qe in We))throw new de.default('"'+qe+'" not defined in '+We,{loc:Ne});return ze.lookupProperty(We,qe)},lookupProperty:function(We,qe){var Ne=We[qe];return Ne==null||Object.prototype.hasOwnProperty.call(We,qe)||ge.resultIsAllowed(Ne,ze.protoAccessControl,qe)?Ne:void 0},lookup:function(We,qe){for(var Ne=We.length,Ke=0;Ke<Ne;Ke++)if((We[Ke]&&ze.lookupProperty(We[Ke],qe))!=null)return We[Ke][qe]},lambda:function(We,qe){return typeof We=="function"?We.call(qe):We},escapeExpression:te.escapeExpression,invokePartial:function(We,qe,Ne){Ne.hash&&(qe=te.extend({},qe,Ne.hash),Ne.ids&&(Ne.ids[0]=!0)),We=Oe.VM.resolvePartial.call(this,We,qe,Ne);var Ke=te.extend({},Ne,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),ot=Oe.VM.invokePartial.call(this,We,qe,Ke);if(ot==null&&Oe.compile&&(Ne.partials[Ne.name]=Oe.compile(We,Se.compilerOptions,Oe),ot=Ne.partials[Ne.name](qe,Ke)),ot!=null){if(Ne.indent){for(var yt=ot.split(`
`),ft=0,_t=yt.length;ft<_t&&(yt[ft]||ft+1!==_t);ft++)yt[ft]=Ne.indent+yt[ft];ot=yt.join(`
`)}return ot}throw new de.default("The partial "+Ne.name+" could not be compiled when running in runtime-only mode")},fn:function(We){var qe=Se[We];return qe.decorator=Se[We+"_d"],qe},programs:[],program:function(We,qe,Ne,Ke,ot){var yt=this.programs[We],ft=this.fn(We);return qe||ot||Ke||Ne?yt=ye(this,We,ft,qe,Ne,Ke,ot):yt||(yt=this.programs[We]=ye(this,We,ft)),yt},data:function(We,qe){for(;We&&qe--;)We=We._parent;return We},mergeIfNeeded:function(We,qe){var Ne=We||qe;return We&&qe&&We!==qe&&(Ne=te.extend({},qe,We)),Ne},nullContext:Object.seal({}),noop:Oe.VM.noop,compilerInfo:Se.compiler};function Le(We){var qe=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],Ne=qe.data;Le._setup(qe),!qe.partial&&Se.useData&&(Ne=we(We,Ne));var Ke=void 0,ot=Se.useBlockParams?[]:void 0;function yt(ft){return""+Se.main(ze,ft,ze.helpers,ze.partials,Ne,ot,Ke)}return Se.useDepths&&(Ke=qe.depths?We!=qe.depths[0]?[We].concat(qe.depths):qe.depths:[We]),(yt=ke(Se.main,yt,ze,qe.depths||[],Ne,ot))(We,qe)}return Le.isTop=!0,Le._setup=function(We){if(We.partial)ze.protoAccessControl=We.protoAccessControl,ze.helpers=We.helpers,ze.partials=We.partials,ze.decorators=We.decorators,ze.hooks=We.hooks;else{var qe=te.extend({},Oe.helpers,We.helpers);(function(Ke,ot){Object.keys(Ke).forEach(function(yt){var ft=Ke[yt];Ke[yt]=function(_t,Je){var Qe=Je.lookupProperty;return ne.wrapHelper(_t,function(tt){return te.extend({lookupProperty:Qe},tt)})}(ft,ot)})})(qe,ze),ze.helpers=qe,Se.usePartial&&(ze.partials=ze.mergeIfNeeded(We.partials,Oe.partials)),(Se.usePartial||Se.useDecorators)&&(ze.decorators=te.extend({},Oe.decorators,We.decorators)),ze.hooks={},ze.protoAccessControl=ge.createProtoAccessControl(We);var Ne=We.allowCallsToHelperMissing||Fe;_e.moveHelperToHooks(ze,"helperMissing",Ne),_e.moveHelperToHooks(ze,"blockHelperMissing",Ne)}},Le._child=function(We,qe,Ne,Ke){if(Se.useBlockParams&&!Ne)throw new de.default("must pass block params");if(Se.useDepths&&!Ke)throw new de.default("must pass parent depths");return ye(ze,We,Se[We],qe,0,Ne,Ke)},Le},G.wrapProgram=ye,G.resolvePartial=function(Se,Oe,Fe){return Se?Se.call||Fe.name||(Fe.name=Se,Se=Fe.partials[Se]):Se=Fe.name==="@partial-block"?Fe.data["partial-block"]:Fe.partials[Fe.name],Se},G.invokePartial=function(Se,Oe,Fe){var ze=Fe.data&&Fe.data["partial-block"];Fe.partial=!0,Fe.ids&&(Fe.data.contextPath=Fe.ids[0]||Fe.data.contextPath);var Le=void 0;if(Fe.fn&&Fe.fn!==xe&&function(){Fe.data=I.createFrame(Fe.data);var We=Fe.fn;Le=Fe.data["partial-block"]=function(qe){var Ne=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return Ne.data=I.createFrame(Ne.data),Ne.data["partial-block"]=ze,We(qe,Ne)},We.partials&&(Fe.partials=te.extend({},Fe.partials,We.partials))}(),Se===void 0&&Le&&(Se=Le),Se===void 0)throw new de.default("The partial "+Fe.name+" could not be found");if(Se instanceof Function)return Se(Oe,Fe)},G.noop=xe;var re,te=function(Se){if(Se&&Se.__esModule)return Se;var Oe={};if(Se!=null)for(var Fe in Se)Object.prototype.hasOwnProperty.call(Se,Fe)&&(Oe[Fe]=Se[Fe]);return Oe.default=Se,Oe}(V(2392)),Q=V(8728),de=(re=Q)&&re.__esModule?re:{default:re},I=V(2067),_e=V(2638),ne=V(5005),ge=V(6293);function ye(Se,Oe,Fe,ze,Le,We,qe){function Ne(Ke){var ot=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],yt=qe;return!qe||Ke==qe[0]||Ke===Se.nullContext&&qe[0]===null||(yt=[Ke].concat(qe)),Fe(Se,Ke,Se.helpers,Se.partials,ot.data||ze,We&&[ot.blockParams].concat(We),yt)}return(Ne=ke(Fe,Ne,Se,qe,ze,We)).program=Oe,Ne.depth=qe?qe.length:0,Ne.blockParams=Le||0,Ne}function xe(){return""}function we(Se,Oe){return Oe&&"root"in Oe||((Oe=Oe?I.createFrame(Oe):{}).root=Se),Oe}function ke(Se,Oe,Fe,ze,Le,We){if(Se.decorator){var qe={};Oe=Se.decorator(Oe,qe,Fe,ze&&ze[0],Le,We,ze),te.extend(Oe,qe)}return Oe}},5558:function(U,G){function V(re){this.string=re}G.__esModule=!0,V.prototype.toString=V.prototype.toHTML=function(){return""+this.string},G.default=V,U.exports=G.default},2392:function(U,G){G.__esModule=!0,G.extend=de,G.indexOf=function(ge,ye){for(var xe=0,we=ge.length;xe<we;xe++)if(ge[xe]===ye)return xe;return-1},G.escapeExpression=function(ge){if(typeof ge!="string"){if(ge&&ge.toHTML)return ge.toHTML();if(ge==null)return"";if(!ge)return ge+"";ge=""+ge}return te.test(ge)?ge.replace(re,Q):ge},G.isEmpty=function(ge){return!ge&&ge!==0||!(!ne(ge)||ge.length!==0)},G.createFrame=function(ge){var ye=de({},ge);return ye._parent=ge,ye},G.blockParams=function(ge,ye){return ge.path=ye,ge},G.appendContextPath=function(ge,ye){return(ge?ge+".":"")+ye};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},re=/[&<>"'`=]/g,te=/[&<>"'`=]/;function Q(ge){return V[ge]}function de(ge){for(var ye=1;ye<arguments.length;ye++)for(var xe in arguments[ye])Object.prototype.hasOwnProperty.call(arguments[ye],xe)&&(ge[xe]=arguments[ye][xe]);return ge}var I=Object.prototype.toString;G.toString=I;var _e=function(ge){return typeof ge=="function"};_e(/x/)&&(G.isFunction=_e=function(ge){return typeof ge=="function"&&I.call(ge)==="[object Function]"}),G.isFunction=_e;var ne=Array.isArray||function(ge){return!(!ge||typeof ge!="object")&&I.call(ge)==="[object Array]"};G.isArray=ne},4204:function(U,G,V){var re,te;re=[V(7937),V(5040),V(3566)],(te=function(Q,de,I){return function(_e,ne,ge){var ye=function(xe,we){return _e.js_beautify(xe,we)};return ye.js=_e.js_beautify,ye.css=ne.css_beautify,ye.html=ge.html_beautify,ye.js_beautify=_e.js_beautify,ye.css_beautify=ne.css_beautify,ye.html_beautify=ge.html_beautify,ye}(Q,de,I)}.apply(G,re))===void 0||(U.exports=te)},5040:function(U,G){var V;(function(){var re;(function(){var Q=[,,function(_e){function ne(xe){this.__parent=xe,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ge(xe,we){this.__cache=[""],this.__indent_size=xe.indent_size,this.__indent_string=xe.indent_char,xe.indent_with_tabs||(this.__indent_string=new Array(xe.indent_size+1).join(xe.indent_char)),we=we||"",xe.indent_level>0&&(we=new Array(xe.indent_level+1).join(this.__indent_string)),this.__base_string=we,this.__base_string_length=we.length}function ye(xe,we){this.__indent_cache=new ge(xe,we),this.raw=!1,this._end_with_newline=xe.end_with_newline,this.indent_size=xe.indent_size,this.wrap_line_length=xe.wrap_line_length,this.indent_empty_lines=xe.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ne(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ne.prototype.clone_empty=function(){var xe=new ne(this.__parent);return xe.set_indent(this.__indent_count,this.__alignment_count),xe},ne.prototype.item=function(xe){return xe<0?this.__items[this.__items.length+xe]:this.__items[xe]},ne.prototype.has_match=function(xe){for(var we=this.__items.length-1;we>=0;we--)if(this.__items[we].match(xe))return!0;return!1},ne.prototype.set_indent=function(xe,we){this.is_empty()&&(this.__indent_count=xe||0,this.__alignment_count=we||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},ne.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},ne.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},ne.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var xe=this.__parent.current_line;return xe.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),xe.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),xe.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,xe.__items[0]===" "&&(xe.__items.splice(0,1),xe.__character_count-=1),!0}return!1},ne.prototype.is_empty=function(){return this.__items.length===0},ne.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},ne.prototype.push=function(xe){this.__items.push(xe);var we=xe.lastIndexOf(`
`);we!==-1?this.__character_count=xe.length-we:this.__character_count+=xe.length},ne.prototype.pop=function(){var xe=null;return this.is_empty()||(xe=this.__items.pop(),this.__character_count-=xe.length),xe},ne.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},ne.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},ne.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},ne.prototype.toString=function(){var xe="";return this.is_empty()?this.__parent.indent_empty_lines&&(xe=this.__parent.get_indent_string(this.__indent_count)):(xe=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),xe+=this.__items.join("")),xe},ge.prototype.get_indent_size=function(xe,we){var ke=this.__base_string_length;return we=we||0,xe<0&&(ke=0),ke+=xe*this.__indent_size,ke+=we},ge.prototype.get_indent_string=function(xe,we){var ke=this.__base_string;return we=we||0,xe<0&&(xe=0,ke=""),we+=xe*this.__indent_size,this.__ensure_cache(we),ke+=this.__cache[we]},ge.prototype.__ensure_cache=function(xe){for(;xe>=this.__cache.length;)this.__add_column()},ge.prototype.__add_column=function(){var xe=this.__cache.length,we=0,ke="";this.__indent_size&&xe>=this.__indent_size&&(xe-=(we=Math.floor(xe/this.__indent_size))*this.__indent_size,ke=new Array(we+1).join(this.__indent_string)),xe&&(ke+=new Array(xe+1).join(" ")),this.__cache.push(ke)},ye.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},ye.prototype.get_line_number=function(){return this.__lines.length},ye.prototype.get_indent_string=function(xe,we){return this.__indent_cache.get_indent_string(xe,we)},ye.prototype.get_indent_size=function(xe,we){return this.__indent_cache.get_indent_size(xe,we)},ye.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},ye.prototype.add_new_line=function(xe){return!(this.is_empty()||!xe&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},ye.prototype.get_code=function(xe){this.trim(!0);var we=this.current_line.pop();we&&(we[we.length-1]===`
`&&(we=we.replace(/\n+$/g,"")),this.current_line.push(we)),this._end_with_newline&&this.__add_outputline();var ke=this.__lines.join(`
`);return xe!==`
`&&(ke=ke.replace(/[\n]/g,xe)),ke},ye.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},ye.prototype.set_indent=function(xe,we){return xe=xe||0,we=we||0,this.next_line.set_indent(xe,we),this.__lines.length>1?(this.current_line.set_indent(xe,we),!0):(this.current_line.set_indent(),!1)},ye.prototype.add_raw_token=function(xe){for(var we=0;we<xe.newlines;we++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(xe.whitespace_before),this.current_line.push(xe.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},ye.prototype.add_token=function(xe){this.__add_space_before_token(),this.current_line.push(xe),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},ye.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},ye.prototype.remove_indent=function(xe){for(var we=this.__lines.length;xe<we;)this.__lines[xe]._remove_indent(),xe++;this.current_line._remove_wrap_indent()},ye.prototype.trim=function(xe){for(xe=xe!==void 0&&xe,this.current_line.trim();xe&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},ye.prototype.just_added_newline=function(){return this.current_line.is_empty()},ye.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},ye.prototype.ensure_empty_line_above=function(xe,we){for(var ke=this.__lines.length-2;ke>=0;){var Se=this.__lines[ke];if(Se.is_empty())break;if(Se.item(0).indexOf(xe)!==0&&Se.item(-1)!==we){this.__lines.splice(ke+1,0,new ne(this)),this.previous_line=this.__lines[this.__lines.length-2];break}ke--}},_e.exports.Output=ye},,,,function(_e){function ne(xe,we){this.raw_options=ge(xe,we),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ge(xe,we){var ke,Se={};for(ke in xe=ye(xe))ke!==we&&(Se[ke]=xe[ke]);if(we&&xe[we])for(ke in xe[we])Se[ke]=xe[we][ke];return Se}function ye(xe){var we,ke={};for(we in xe)ke[we.replace(/-/g,"_")]=xe[we];return ke}ne.prototype._get_array=function(xe,we){var ke=this.raw_options[xe],Se=we||[];return typeof ke=="object"?ke!==null&&typeof ke.concat=="function"&&(Se=ke.concat()):typeof ke=="string"&&(Se=ke.split(/[^a-zA-Z0-9_\/\-]+/)),Se},ne.prototype._get_boolean=function(xe,we){var ke=this.raw_options[xe];return ke===void 0?!!we:!!ke},ne.prototype._get_characters=function(xe,we){var ke=this.raw_options[xe],Se=we||"";return typeof ke=="string"&&(Se=ke.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Se},ne.prototype._get_number=function(xe,we){var ke=this.raw_options[xe];we=parseInt(we,10),isNaN(we)&&(we=0);var Se=parseInt(ke,10);return isNaN(Se)&&(Se=we),Se},ne.prototype._get_selection=function(xe,we,ke){var Se=this._get_selection_list(xe,we,ke);if(Se.length!==1)throw new Error("Invalid Option Value: The option '"+xe+`' can only be one of the following values:
`+we+`
You passed in: '`+this.raw_options[xe]+"'");return Se[0]},ne.prototype._get_selection_list=function(xe,we,ke){if(!we||we.length===0)throw new Error("Selection list cannot be empty.");if(ke=ke||[we[0]],!this._is_valid_selection(ke,we))throw new Error("Invalid Default Value!");var Se=this._get_array(xe,ke);if(!this._is_valid_selection(Se,we))throw new Error("Invalid Option Value: The option '"+xe+`' can contain only the following values:
`+we+`
You passed in: '`+this.raw_options[xe]+"'");return Se},ne.prototype._is_valid_selection=function(xe,we){return xe.length&&we.length&&!xe.some(function(ke){return we.indexOf(ke)===-1})},_e.exports.Options=ne,_e.exports.normalizeOpts=ye,_e.exports.mergeOpts=ge},,function(_e){var ne=RegExp.prototype.hasOwnProperty("sticky");function ge(ye){this.__input=ye||"",this.__input_length=this.__input.length,this.__position=0}ge.prototype.restart=function(){this.__position=0},ge.prototype.back=function(){this.__position>0&&(this.__position-=1)},ge.prototype.hasNext=function(){return this.__position<this.__input_length},ge.prototype.next=function(){var ye=null;return this.hasNext()&&(ye=this.__input.charAt(this.__position),this.__position+=1),ye},ge.prototype.peek=function(ye){var xe=null;return ye=ye||0,(ye+=this.__position)>=0&&ye<this.__input_length&&(xe=this.__input.charAt(ye)),xe},ge.prototype.__match=function(ye,xe){ye.lastIndex=xe;var we=ye.exec(this.__input);return!we||ne&&ye.sticky||we.index!==xe&&(we=null),we},ge.prototype.test=function(ye,xe){return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__input_length&&!!this.__match(ye,xe)},ge.prototype.testChar=function(ye,xe){var we=this.peek(xe);return ye.lastIndex=0,we!==null&&ye.test(we)},ge.prototype.match=function(ye){var xe=this.__match(ye,this.__position);return xe?this.__position+=xe[0].length:xe=null,xe},ge.prototype.read=function(ye,xe,we){var ke,Se="";return ye&&(ke=this.match(ye))&&(Se+=ke[0]),!xe||!ke&&ye||(Se+=this.readUntil(xe,we)),Se},ge.prototype.readUntil=function(ye,xe){var we,ke=this.__position;ye.lastIndex=this.__position;var Se=ye.exec(this.__input);return Se?(ke=Se.index,xe&&(ke+=Se[0].length)):ke=this.__input_length,we=this.__input.substring(this.__position,ke),this.__position=ke,we},ge.prototype.readUntilAfter=function(ye){return this.readUntil(ye,!0)},ge.prototype.get_regexp=function(ye,xe){var we=null,ke="g";return xe&&ne&&(ke="y"),typeof ye=="string"&&ye!==""?we=new RegExp(ye,ke):ye&&(we=new RegExp(ye.source,ke)),we},ge.prototype.get_literal_regexp=function(ye){return RegExp(ye.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ge.prototype.peekUntilAfter=function(ye){var xe=this.__position,we=this.readUntilAfter(ye);return this.__position=xe,we},ge.prototype.lookBack=function(ye){var xe=this.__position-1;return xe>=ye.length&&this.__input.substring(xe-ye.length,xe).toLowerCase()===ye},_e.exports.InputScanner=ge},,,,,function(_e){function ne(ge,ye){ge=typeof ge=="string"?ge:ge.source,ye=typeof ye=="string"?ye:ye.source,this.__directives_block_pattern=new RegExp(ge+/ beautify( \w+[:]\w+)+ /.source+ye,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ge+/\sbeautify\signore:end\s/.source+ye,"g")}ne.prototype.get_directives=function(ge){if(!ge.match(this.__directives_block_pattern))return null;var ye={};this.__directive_pattern.lastIndex=0;for(var xe=this.__directive_pattern.exec(ge);xe;)ye[xe[1]]=xe[2],xe=this.__directive_pattern.exec(ge);return ye},ne.prototype.readIgnored=function(ge){return ge.readUntilAfter(this.__directives_end_ignore_pattern)},_e.exports.Directives=ne},,function(_e,ne,ge){var ye=ge(16).Beautifier,xe=ge(17).Options;_e.exports=function(we,ke){return new ye(we,ke).beautify()},_e.exports.defaultOptions=function(){return new xe}},function(_e,ne,ge){var ye=ge(17).Options,xe=ge(2).Output,we=ge(8).InputScanner,ke=new(ge(13)).Directives(/\/\*/,/\*\//),Se=/\r\n|[\r\n]/,Oe=/\r\n|[\r\n]/g,Fe=/\s/,ze=/(?:\s|\n)+/g,Le=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,We=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function qe(Ne,Ke){this._source_text=Ne||"",this._options=new ye(Ke),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}qe.prototype.eatString=function(Ne){var Ke="";for(this._ch=this._input.next();this._ch;){if(Ke+=this._ch,this._ch==="\\")Ke+=this._input.next();else if(Ne.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return Ke},qe.prototype.eatWhitespace=function(Ne){for(var Ke=Fe.test(this._input.peek()),ot=0;Fe.test(this._input.peek());)this._ch=this._input.next(),Ne&&this._ch===`
`&&(ot===0||ot<this._options.max_preserve_newlines)&&(ot++,this._output.add_new_line(!0));return Ke},qe.prototype.foundNestedPseudoClass=function(){for(var Ne=0,Ke=1,ot=this._input.peek(Ke);ot;){if(ot==="{")return!0;if(ot==="(")Ne+=1;else if(ot===")"){if(Ne===0)return!1;Ne-=1}else if(ot===";"||ot==="}")return!1;Ke++,ot=this._input.peek(Ke)}return!1},qe.prototype.print_string=function(Ne){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(Ne)},qe.prototype.preserveSingleSpace=function(Ne){Ne&&(this._output.space_before_token=!0)},qe.prototype.indent=function(){this._indentLevel++},qe.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},qe.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var Ne=this._source_text,Ke=this._options.eol;Ke==="auto"&&(Ke=`
`,Ne&&Se.test(Ne||"")&&(Ke=Ne.match(Se)[0]));var ot=(Ne=Ne.replace(Oe,`
`)).match(/^[\t ]*/)[0];this._output=new xe(this._options,ot),this._input=new we(Ne),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var yt,ft,_t=0,Je=!1,Qe=!1,tt=!1,ht=!1,it=!1,pt=!1,vt=this._ch,ut=!1;yt=this._input.read(ze)!=="",ft=vt,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),vt=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var Nt=this._input.read(Le),at=ke.get_directives(Nt);at&&at.ignore==="start"&&(Nt+=ke.readIgnored(this._input)),this.print_string(Nt),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(We)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(yt),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var Mt=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);Mt.match(/[ :]$/)&&(Mt=this.eatString(": ").replace(/\s$/,""),this.print_string(Mt),this._output.space_before_token=!0),(Mt=Mt.replace(/\s$/,""))==="extend"?ht=!0:Mt==="import"&&(it=!0),Mt in this.NESTED_AT_RULE?(this._nestedLevel+=1,Mt in this.CONDITIONAL_GROUP_RULE&&(tt=!0)):Je||_t!==0||Mt.indexOf(":")===-1||(Qe=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(yt),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")Qe&&(Qe=!1,this.outdent()),tt?(tt=!1,Je=this._indentLevel>=this._nestedLevel):Je=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&Je&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(ft==="("?this._output.space_before_token=!1:ft!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),ft==="{"&&this._output.trim(!0),it=!1,ht=!1,Qe&&(this.outdent(),Qe=!1),this.print_string(this._ch),Je=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var nn=0;nn<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;nn++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[nn])){ut=!0;break}!Je&&!tt||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||ht||_t!==0?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),Qe||(Qe=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if(this._ch==='"'||this._ch==="'"){var Tn=ft==='"'||ft==="'";this.preserveSingleSpace(Tn||yt),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")ut=!1,_t===0?(Qe&&(this.outdent(),Qe=!1),ht=!1,it=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),_t++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),_t&&(_t--,this.outdent()));else{var Jt=!1;this._input.lookBack("with")&&(Jt=!0),this.preserveSingleSpace(yt||Jt),this.print_string(this._ch),Qe&&ft==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),pt=!0):(this.eatWhitespace(),_t++,this.indent())}else if(this._ch===")")_t&&(_t--,this.outdent()),pt&&this._input.peek()===";"&&this._options.selector_separator_newline&&(pt=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||Qe&&!pt||_t!==0||it||ht?this._output.space_before_token=!0:this._output.add_new_line();else if(this._ch!==">"&&this._ch!=="+"&&this._ch!=="~"||Qe||_t!==0)if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(yt),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),Fe.test(this._ch)&&(this._ch="");else if(this._ch!=="!"||this._input.lookBack("\\")){var on=ft==='"'||ft==="'";this.preserveSingleSpace(on||yt),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&ut&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Fe.test(this._ch)&&(this._ch=""));return this._output.get_code(Ke)},_e.exports.Beautifier=qe},function(_e,ne,ge){var ye=ge(6).Options;function xe(we){ye.call(this,we,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var ke=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||ke;var Se=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var Oe=0;Oe<Se.length;Oe++)Se[Oe]!=="expand"?this.brace_style="collapse":this.brace_style=Se[Oe]}xe.prototype=new ye,_e.exports.Options=xe}],de={},I=function _e(ne){var ge=de[ne];if(ge!==void 0)return ge.exports;var ye=de[ne]={exports:{}};return Q[ne](ye,ye.exports,_e),ye.exports}(15);re=I})();var te=re;(V=function(){return{css_beautify:te}}.apply(G,[]))===void 0||(U.exports=V)})()},3566:function(U,G,V){var re,te;(function(){var Q;(function(){var I=[,,function(ge){function ye(ke){this.__parent=ke,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function xe(ke,Se){this.__cache=[""],this.__indent_size=ke.indent_size,this.__indent_string=ke.indent_char,ke.indent_with_tabs||(this.__indent_string=new Array(ke.indent_size+1).join(ke.indent_char)),Se=Se||"",ke.indent_level>0&&(Se=new Array(ke.indent_level+1).join(this.__indent_string)),this.__base_string=Se,this.__base_string_length=Se.length}function we(ke,Se){this.__indent_cache=new xe(ke,Se),this.raw=!1,this._end_with_newline=ke.end_with_newline,this.indent_size=ke.indent_size,this.wrap_line_length=ke.wrap_line_length,this.indent_empty_lines=ke.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ye(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ye.prototype.clone_empty=function(){var ke=new ye(this.__parent);return ke.set_indent(this.__indent_count,this.__alignment_count),ke},ye.prototype.item=function(ke){return ke<0?this.__items[this.__items.length+ke]:this.__items[ke]},ye.prototype.has_match=function(ke){for(var Se=this.__items.length-1;Se>=0;Se--)if(this.__items[Se].match(ke))return!0;return!1},ye.prototype.set_indent=function(ke,Se){this.is_empty()&&(this.__indent_count=ke||0,this.__alignment_count=Se||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},ye.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},ye.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},ye.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var ke=this.__parent.current_line;return ke.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),ke.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),ke.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,ke.__items[0]===" "&&(ke.__items.splice(0,1),ke.__character_count-=1),!0}return!1},ye.prototype.is_empty=function(){return this.__items.length===0},ye.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},ye.prototype.push=function(ke){this.__items.push(ke);var Se=ke.lastIndexOf(`
`);Se!==-1?this.__character_count=ke.length-Se:this.__character_count+=ke.length},ye.prototype.pop=function(){var ke=null;return this.is_empty()||(ke=this.__items.pop(),this.__character_count-=ke.length),ke},ye.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},ye.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},ye.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},ye.prototype.toString=function(){var ke="";return this.is_empty()?this.__parent.indent_empty_lines&&(ke=this.__parent.get_indent_string(this.__indent_count)):(ke=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),ke+=this.__items.join("")),ke},xe.prototype.get_indent_size=function(ke,Se){var Oe=this.__base_string_length;return Se=Se||0,ke<0&&(Oe=0),Oe+=ke*this.__indent_size,Oe+=Se},xe.prototype.get_indent_string=function(ke,Se){var Oe=this.__base_string;return Se=Se||0,ke<0&&(ke=0,Oe=""),Se+=ke*this.__indent_size,this.__ensure_cache(Se),Oe+=this.__cache[Se]},xe.prototype.__ensure_cache=function(ke){for(;ke>=this.__cache.length;)this.__add_column()},xe.prototype.__add_column=function(){var ke=this.__cache.length,Se=0,Oe="";this.__indent_size&&ke>=this.__indent_size&&(ke-=(Se=Math.floor(ke/this.__indent_size))*this.__indent_size,Oe=new Array(Se+1).join(this.__indent_string)),ke&&(Oe+=new Array(ke+1).join(" ")),this.__cache.push(Oe)},we.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},we.prototype.get_line_number=function(){return this.__lines.length},we.prototype.get_indent_string=function(ke,Se){return this.__indent_cache.get_indent_string(ke,Se)},we.prototype.get_indent_size=function(ke,Se){return this.__indent_cache.get_indent_size(ke,Se)},we.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},we.prototype.add_new_line=function(ke){return!(this.is_empty()||!ke&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},we.prototype.get_code=function(ke){this.trim(!0);var Se=this.current_line.pop();Se&&(Se[Se.length-1]===`
`&&(Se=Se.replace(/\n+$/g,"")),this.current_line.push(Se)),this._end_with_newline&&this.__add_outputline();var Oe=this.__lines.join(`
`);return ke!==`
`&&(Oe=Oe.replace(/[\n]/g,ke)),Oe},we.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},we.prototype.set_indent=function(ke,Se){return ke=ke||0,Se=Se||0,this.next_line.set_indent(ke,Se),this.__lines.length>1?(this.current_line.set_indent(ke,Se),!0):(this.current_line.set_indent(),!1)},we.prototype.add_raw_token=function(ke){for(var Se=0;Se<ke.newlines;Se++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(ke.whitespace_before),this.current_line.push(ke.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},we.prototype.add_token=function(ke){this.__add_space_before_token(),this.current_line.push(ke),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},we.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},we.prototype.remove_indent=function(ke){for(var Se=this.__lines.length;ke<Se;)this.__lines[ke]._remove_indent(),ke++;this.current_line._remove_wrap_indent()},we.prototype.trim=function(ke){for(ke=ke!==void 0&&ke,this.current_line.trim();ke&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},we.prototype.just_added_newline=function(){return this.current_line.is_empty()},we.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},we.prototype.ensure_empty_line_above=function(ke,Se){for(var Oe=this.__lines.length-2;Oe>=0;){var Fe=this.__lines[Oe];if(Fe.is_empty())break;if(Fe.item(0).indexOf(ke)!==0&&Fe.item(-1)!==Se){this.__lines.splice(Oe+1,0,new ye(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Oe--}},ge.exports.Output=we},function(ge){ge.exports.Token=function(ye,xe,we,ke){this.type=ye,this.text=xe,this.comments_before=null,this.newlines=we||0,this.whitespace_before=ke||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(ge){function ye(ke,Se){this.raw_options=xe(ke,Se),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function xe(ke,Se){var Oe,Fe={};for(Oe in ke=we(ke))Oe!==Se&&(Fe[Oe]=ke[Oe]);if(Se&&ke[Se])for(Oe in ke[Se])Fe[Oe]=ke[Se][Oe];return Fe}function we(ke){var Se,Oe={};for(Se in ke)Oe[Se.replace(/-/g,"_")]=ke[Se];return Oe}ye.prototype._get_array=function(ke,Se){var Oe=this.raw_options[ke],Fe=Se||[];return typeof Oe=="object"?Oe!==null&&typeof Oe.concat=="function"&&(Fe=Oe.concat()):typeof Oe=="string"&&(Fe=Oe.split(/[^a-zA-Z0-9_\/\-]+/)),Fe},ye.prototype._get_boolean=function(ke,Se){var Oe=this.raw_options[ke];return Oe===void 0?!!Se:!!Oe},ye.prototype._get_characters=function(ke,Se){var Oe=this.raw_options[ke],Fe=Se||"";return typeof Oe=="string"&&(Fe=Oe.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Fe},ye.prototype._get_number=function(ke,Se){var Oe=this.raw_options[ke];Se=parseInt(Se,10),isNaN(Se)&&(Se=0);var Fe=parseInt(Oe,10);return isNaN(Fe)&&(Fe=Se),Fe},ye.prototype._get_selection=function(ke,Se,Oe){var Fe=this._get_selection_list(ke,Se,Oe);if(Fe.length!==1)throw new Error("Invalid Option Value: The option '"+ke+`' can only be one of the following values:
`+Se+`
You passed in: '`+this.raw_options[ke]+"'");return Fe[0]},ye.prototype._get_selection_list=function(ke,Se,Oe){if(!Se||Se.length===0)throw new Error("Selection list cannot be empty.");if(Oe=Oe||[Se[0]],!this._is_valid_selection(Oe,Se))throw new Error("Invalid Default Value!");var Fe=this._get_array(ke,Oe);if(!this._is_valid_selection(Fe,Se))throw new Error("Invalid Option Value: The option '"+ke+`' can contain only the following values:
`+Se+`
You passed in: '`+this.raw_options[ke]+"'");return Fe},ye.prototype._is_valid_selection=function(ke,Se){return ke.length&&Se.length&&!ke.some(function(Oe){return Se.indexOf(Oe)===-1})},ge.exports.Options=ye,ge.exports.normalizeOpts=we,ge.exports.mergeOpts=xe},,function(ge){var ye=RegExp.prototype.hasOwnProperty("sticky");function xe(we){this.__input=we||"",this.__input_length=this.__input.length,this.__position=0}xe.prototype.restart=function(){this.__position=0},xe.prototype.back=function(){this.__position>0&&(this.__position-=1)},xe.prototype.hasNext=function(){return this.__position<this.__input_length},xe.prototype.next=function(){var we=null;return this.hasNext()&&(we=this.__input.charAt(this.__position),this.__position+=1),we},xe.prototype.peek=function(we){var ke=null;return we=we||0,(we+=this.__position)>=0&&we<this.__input_length&&(ke=this.__input.charAt(we)),ke},xe.prototype.__match=function(we,ke){we.lastIndex=ke;var Se=we.exec(this.__input);return!Se||ye&&we.sticky||Se.index!==ke&&(Se=null),Se},xe.prototype.test=function(we,ke){return ke=ke||0,(ke+=this.__position)>=0&&ke<this.__input_length&&!!this.__match(we,ke)},xe.prototype.testChar=function(we,ke){var Se=this.peek(ke);return we.lastIndex=0,Se!==null&&we.test(Se)},xe.prototype.match=function(we){var ke=this.__match(we,this.__position);return ke?this.__position+=ke[0].length:ke=null,ke},xe.prototype.read=function(we,ke,Se){var Oe,Fe="";return we&&(Oe=this.match(we))&&(Fe+=Oe[0]),!ke||!Oe&&we||(Fe+=this.readUntil(ke,Se)),Fe},xe.prototype.readUntil=function(we,ke){var Se,Oe=this.__position;we.lastIndex=this.__position;var Fe=we.exec(this.__input);return Fe?(Oe=Fe.index,ke&&(Oe+=Fe[0].length)):Oe=this.__input_length,Se=this.__input.substring(this.__position,Oe),this.__position=Oe,Se},xe.prototype.readUntilAfter=function(we){return this.readUntil(we,!0)},xe.prototype.get_regexp=function(we,ke){var Se=null,Oe="g";return ke&&ye&&(Oe="y"),typeof we=="string"&&we!==""?Se=new RegExp(we,Oe):we&&(Se=new RegExp(we.source,Oe)),Se},xe.prototype.get_literal_regexp=function(we){return RegExp(we.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},xe.prototype.peekUntilAfter=function(we){var ke=this.__position,Se=this.readUntilAfter(we);return this.__position=ke,Se},xe.prototype.lookBack=function(we){var ke=this.__position-1;return ke>=we.length&&this.__input.substring(ke-we.length,ke).toLowerCase()===we},ge.exports.InputScanner=xe},function(ge,ye,xe){var we=xe(8).InputScanner,ke=xe(3).Token,Se=xe(10).TokenStream,Oe=xe(11).WhitespacePattern,Fe={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},ze=function(Le,We){this._input=new we(Le),this._options=We||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new Oe(this._input)};ze.prototype.tokenize=function(){var Le;this._input.restart(),this.__tokens=new Se,this._reset();for(var We=new ke(Fe.START,""),qe=null,Ne=[],Ke=new Se;We.type!==Fe.EOF;){for(Le=this._get_next_token(We,qe);this._is_comment(Le);)Ke.add(Le),Le=this._get_next_token(We,qe);Ke.isEmpty()||(Le.comments_before=Ke,Ke=new Se),Le.parent=qe,this._is_opening(Le)?(Ne.push(qe),qe=Le):qe&&this._is_closing(Le,qe)&&(Le.opened=qe,qe.closed=Le,qe=Ne.pop(),Le.parent=qe),Le.previous=We,We.next=Le,this.__tokens.add(Le),We=Le}return this.__tokens},ze.prototype._is_first_token=function(){return this.__tokens.isEmpty()},ze.prototype._reset=function(){},ze.prototype._get_next_token=function(Le,We){this._readWhitespace();var qe=this._input.read(/.+/g);return qe?this._create_token(Fe.RAW,qe):this._create_token(Fe.EOF,"")},ze.prototype._is_comment=function(Le){return!1},ze.prototype._is_opening=function(Le){return!1},ze.prototype._is_closing=function(Le,We){return!1},ze.prototype._create_token=function(Le,We){return new ke(Le,We,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},ze.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},ge.exports.Tokenizer=ze,ge.exports.TOKEN=Fe},function(ge){function ye(xe){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=xe}ye.prototype.restart=function(){this.__position=0},ye.prototype.isEmpty=function(){return this.__tokens_length===0},ye.prototype.hasNext=function(){return this.__position<this.__tokens_length},ye.prototype.next=function(){var xe=null;return this.hasNext()&&(xe=this.__tokens[this.__position],this.__position+=1),xe},ye.prototype.peek=function(xe){var we=null;return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__tokens_length&&(we=this.__tokens[xe]),we},ye.prototype.add=function(xe){this.__parent_token&&(xe.parent=this.__parent_token),this.__tokens.push(xe),this.__tokens_length+=1},ge.exports.TokenStream=ye},function(ge,ye,xe){var we=xe(12).Pattern;function ke(Se,Oe){we.call(this,Se,Oe),Oe?this._line_regexp=this._input.get_regexp(Oe._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}ke.prototype=new we,ke.prototype.__set_whitespace_patterns=function(Se,Oe){Se+="\\t ",Oe+="\\n\\r",this._match_pattern=this._input.get_regexp("["+Se+Oe+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+Oe+"]")},ke.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var Se=this._input.read(this._match_pattern);if(Se===" ")this.whitespace_before_token=" ";else if(Se){var Oe=this.__split(this._newline_regexp,Se);this.newline_count=Oe.length-1,this.whitespace_before_token=Oe[this.newline_count]}return Se},ke.prototype.matching=function(Se,Oe){var Fe=this._create();return Fe.__set_whitespace_patterns(Se,Oe),Fe._update(),Fe},ke.prototype._create=function(){return new ke(this._input,this)},ke.prototype.__split=function(Se,Oe){Se.lastIndex=0;for(var Fe=0,ze=[],Le=Se.exec(Oe);Le;)ze.push(Oe.substring(Fe,Le.index)),Fe=Le.index+Le[0].length,Le=Se.exec(Oe);return Fe<Oe.length?ze.push(Oe.substring(Fe,Oe.length)):ze.push(""),ze},ge.exports.WhitespacePattern=ke},function(ge){function ye(xe,we){this._input=xe,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,we&&(this._starting_pattern=this._input.get_regexp(we._starting_pattern,!0),this._match_pattern=this._input.get_regexp(we._match_pattern,!0),this._until_pattern=this._input.get_regexp(we._until_pattern),this._until_after=we._until_after)}ye.prototype.read=function(){var xe=this._input.read(this._starting_pattern);return this._starting_pattern&&!xe||(xe+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),xe},ye.prototype.read_match=function(){return this._input.match(this._match_pattern)},ye.prototype.until_after=function(xe){var we=this._create();return we._until_after=!0,we._until_pattern=this._input.get_regexp(xe),we._update(),we},ye.prototype.until=function(xe){var we=this._create();return we._until_after=!1,we._until_pattern=this._input.get_regexp(xe),we._update(),we},ye.prototype.starting_with=function(xe){var we=this._create();return we._starting_pattern=this._input.get_regexp(xe,!0),we._update(),we},ye.prototype.matching=function(xe){var we=this._create();return we._match_pattern=this._input.get_regexp(xe,!0),we._update(),we},ye.prototype._create=function(){return new ye(this._input,this)},ye.prototype._update=function(){},ge.exports.Pattern=ye},function(ge){function ye(xe,we){xe=typeof xe=="string"?xe:xe.source,we=typeof we=="string"?we:we.source,this.__directives_block_pattern=new RegExp(xe+/ beautify( \w+[:]\w+)+ /.source+we,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(xe+/\sbeautify\signore:end\s/.source+we,"g")}ye.prototype.get_directives=function(xe){if(!xe.match(this.__directives_block_pattern))return null;var we={};this.__directive_pattern.lastIndex=0;for(var ke=this.__directive_pattern.exec(xe);ke;)we[ke[1]]=ke[2],ke=this.__directive_pattern.exec(xe);return we},ye.prototype.readIgnored=function(xe){return xe.readUntilAfter(this.__directives_end_ignore_pattern)},ge.exports.Directives=ye},function(ge,ye,xe){var we=xe(12).Pattern,ke={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Se(Oe,Fe){we.call(this,Oe,Fe),this.__template_pattern=null,this._disabled=Object.assign({},ke),this._excluded=Object.assign({},ke),Fe&&(this.__template_pattern=this._input.get_regexp(Fe.__template_pattern),this._excluded=Object.assign(this._excluded,Fe._excluded),this._disabled=Object.assign(this._disabled,Fe._disabled));var ze=new we(Oe);this.__patterns={handlebars_comment:ze.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:ze.starting_with(/{{{/).until_after(/}}}/),handlebars:ze.starting_with(/{{/).until_after(/}}/),php:ze.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:ze.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:ze.starting_with(/{%/).until_after(/%}/),django_value:ze.starting_with(/{{/).until_after(/}}/),django_comment:ze.starting_with(/{#/).until_after(/#}/),smarty:ze.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:ze.starting_with(/{\*/).until_after(/\*}/),smarty_literal:ze.starting_with(/{literal}/).until_after(/{\/literal}/)}}Se.prototype=new we,Se.prototype._create=function(){return new Se(this._input,this)},Se.prototype._update=function(){this.__set_templated_pattern()},Se.prototype.disable=function(Oe){var Fe=this._create();return Fe._disabled[Oe]=!0,Fe._update(),Fe},Se.prototype.read_options=function(Oe){var Fe=this._create();for(var ze in ke)Fe._disabled[ze]=Oe.templating.indexOf(ze)===-1;return Fe._update(),Fe},Se.prototype.exclude=function(Oe){var Fe=this._create();return Fe._excluded[Oe]=!0,Fe._update(),Fe},Se.prototype.read=function(){var Oe="";Oe=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Fe=this._read_template();Fe;)this._match_pattern?Fe+=this._input.read(this._match_pattern):Fe+=this._input.readUntil(this.__template_pattern),Oe+=Fe,Fe=this._read_template();return this._until_after&&(Oe+=this._input.readUntilAfter(this._until_pattern)),Oe},Se.prototype.__set_templated_pattern=function(){var Oe=[];this._disabled.php||Oe.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||Oe.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||Oe.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(Oe.push(this.__patterns.django._starting_pattern.source),Oe.push(this.__patterns.django_value._starting_pattern.source),Oe.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||Oe.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&Oe.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+Oe.join("|")+")")},Se.prototype._read_template=function(){var Oe="",Fe=this._input.peek();if(Fe==="<"){var ze=this._input.peek(1);this._disabled.php||this._excluded.php||ze!=="?"||(Oe=Oe||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||ze!=="%"||(Oe=Oe||this.__patterns.erb.read())}else Fe==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(Oe=(Oe=(Oe=Oe||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(Oe=Oe||this.__patterns.django_value.read()),this._excluded.django||(Oe=(Oe=Oe||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(Oe=(Oe=(Oe=Oe||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return Oe},ge.exports.TemplatablePattern=Se},,,,function(ge,ye,xe){var we=xe(19).Beautifier,ke=xe(20).Options;ge.exports=function(Se,Oe,Fe,ze){return new we(Se,Oe,Fe,ze).beautify()},ge.exports.defaultOptions=function(){return new ke}},function(ge,ye,xe){var we=xe(20).Options,ke=xe(2).Output,Se=xe(21).Tokenizer,Oe=xe(21).TOKEN,Fe=/\r\n|[\r\n]/,ze=/\r\n|[\r\n]/g,Le=function(Je,Qe){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=Je.max_preserve_newlines,this.preserve_newlines=Je.preserve_newlines,this._output=new ke(Je,Qe)};Le.prototype.current_line_has_match=function(Je){return this._output.current_line.has_match(Je)},Le.prototype.set_space_before_token=function(Je,Qe){this._output.space_before_token=Je,this._output.non_breaking_space=Qe},Le.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},Le.prototype.add_raw_token=function(Je){this._output.add_raw_token(Je)},Le.prototype.print_preserved_newlines=function(Je){var Qe=0;Je.type!==Oe.TEXT&&Je.previous.type!==Oe.TEXT&&(Qe=Je.newlines?1:0),this.preserve_newlines&&(Qe=Je.newlines<this.max_preserve_newlines+1?Je.newlines:this.max_preserve_newlines+1);for(var tt=0;tt<Qe;tt++)this.print_newline(tt>0);return Qe!==0},Le.prototype.traverse_whitespace=function(Je){return!(!Je.whitespace_before&&!Je.newlines)&&(this.print_preserved_newlines(Je)||(this._output.space_before_token=!0),!0)},Le.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},Le.prototype.print_newline=function(Je){this._output.add_new_line(Je)},Le.prototype.print_token=function(Je){Je.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(Je.text))},Le.prototype.indent=function(){this.indent_level++},Le.prototype.get_full_indent=function(Je){return(Je=this.indent_level+(Je||0))<1?"":this._output.get_indent_string(Je)};var We=function(Je,Qe){var tt=null,ht=null;return Qe.closed?(Je==="script"?tt="text/javascript":Je==="style"&&(tt="text/css"),tt=function(it){for(var pt=null,vt=it.next;vt.type!==Oe.EOF&&it.closed!==vt;){if(vt.type===Oe.ATTRIBUTE&&vt.text==="type"){vt.next&&vt.next.type===Oe.EQUALS&&vt.next.next&&vt.next.next.type===Oe.VALUE&&(pt=vt.next.next.text);break}vt=vt.next}return pt}(Qe)||tt,tt.search("text/css")>-1?ht="css":tt.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?ht="javascript":tt.search(/(text|application|dojo)\/(x-)?(html)/)>-1?ht="html":tt.search(/test\/null/)>-1&&(ht="null"),ht):null};function qe(Je,Qe){return Qe.indexOf(Je)!==-1}function Ne(Je,Qe,tt){this.parent=Je||null,this.tag=Qe?Qe.tag_name:"",this.indent_level=tt||0,this.parser_token=Qe||null}function Ke(Je){this._printer=Je,this._current_frame=null}function ot(Je,Qe,tt,ht){this._source_text=Je||"",Qe=Qe||{},this._js_beautify=tt,this._css_beautify=ht,this._tag_stack=null;var it=new we(Qe,"html");this._options=it,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Ke.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},Ke.prototype.record_tag=function(Je){var Qe=new Ne(this._current_frame,Je,this._printer.indent_level);this._current_frame=Qe},Ke.prototype._try_pop_frame=function(Je){var Qe=null;return Je&&(Qe=Je.parser_token,this._printer.indent_level=Je.indent_level,this._current_frame=Je.parent),Qe},Ke.prototype._get_frame=function(Je,Qe){for(var tt=this._current_frame;tt&&Je.indexOf(tt.tag)===-1;){if(Qe&&Qe.indexOf(tt.tag)!==-1){tt=null;break}tt=tt.parent}return tt},Ke.prototype.try_pop=function(Je,Qe){var tt=this._get_frame([Je],Qe);return this._try_pop_frame(tt)},Ke.prototype.indent_to_tag=function(Je){var Qe=this._get_frame(Je);Qe&&(this._printer.indent_level=Qe.indent_level)},ot.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var Je=this._source_text,Qe=this._options.eol;this._options.eol==="auto"&&(Qe=`
`,Je&&Fe.test(Je)&&(Qe=Je.match(Fe)[0]));var tt=(Je=Je.replace(ze,`
`)).match(/^[\t ]*/)[0],ht={text:"",type:""},it=new yt,pt=new Le(this._options,tt),vt=new Se(Je,this._options).tokenize();this._tag_stack=new Ke(pt);for(var ut=null,Nt=vt.next();Nt.type!==Oe.EOF;)Nt.type===Oe.TAG_OPEN||Nt.type===Oe.COMMENT?it=ut=this._handle_tag_open(pt,Nt,it,ht):Nt.type===Oe.ATTRIBUTE||Nt.type===Oe.EQUALS||Nt.type===Oe.VALUE||Nt.type===Oe.TEXT&&!it.tag_complete?ut=this._handle_inside_tag(pt,Nt,it,vt):Nt.type===Oe.TAG_CLOSE?ut=this._handle_tag_close(pt,Nt,it):Nt.type===Oe.TEXT?ut=this._handle_text(pt,Nt,it):pt.add_raw_token(Nt),ht=ut,Nt=vt.next();return pt._output.get_code(Qe)},ot.prototype._handle_tag_close=function(Je,Qe,tt){var ht={text:Qe.text,type:Qe.type};return Je.alignment_size=0,tt.tag_complete=!0,Je.set_space_before_token(Qe.newlines||Qe.whitespace_before!=="",!0),tt.is_unformatted?Je.add_raw_token(Qe):(tt.tag_start_char==="<"&&(Je.set_space_before_token(Qe.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&tt.has_wrapped_attrs&&Je.print_newline(!1)),Je.print_token(Qe)),!tt.indent_content||tt.is_unformatted||tt.is_content_unformatted||(Je.indent(),tt.indent_content=!1),tt.is_inline_element||tt.is_unformatted||tt.is_content_unformatted||Je.set_wrap_point(),ht},ot.prototype._handle_inside_tag=function(Je,Qe,tt,ht){var it=tt.has_wrapped_attrs,pt={text:Qe.text,type:Qe.type};if(Je.set_space_before_token(Qe.newlines||Qe.whitespace_before!=="",!0),tt.is_unformatted)Je.add_raw_token(Qe);else if(tt.tag_start_char==="{"&&Qe.type===Oe.TEXT)Je.print_preserved_newlines(Qe)?(Qe.newlines=0,Je.add_raw_token(Qe)):Je.print_token(Qe);else{if(Qe.type===Oe.ATTRIBUTE?(Je.set_space_before_token(!0),tt.attr_count+=1):(Qe.type===Oe.EQUALS||Qe.type===Oe.VALUE&&Qe.previous.type===Oe.EQUALS)&&Je.set_space_before_token(!1),Qe.type===Oe.ATTRIBUTE&&tt.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(Je.traverse_whitespace(Qe),it=it||Qe.newlines!==0),this._is_wrap_attributes_force)){var vt=tt.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&tt.attr_count===1){var ut,Nt=!0,at=0;do{if((ut=ht.peek(at)).type===Oe.ATTRIBUTE){Nt=!1;break}at+=1}while(at<4&&ut.type!==Oe.EOF&&ut.type!==Oe.TAG_CLOSE);vt=!Nt}vt&&(Je.print_newline(!1),it=!0)}Je.print_token(Qe),it=it||Je.previous_token_wrapped(),tt.has_wrapped_attrs=it}return pt},ot.prototype._handle_text=function(Je,Qe,tt){var ht={text:Qe.text,type:"TK_CONTENT"};return tt.custom_beautifier_name?this._print_custom_beatifier_text(Je,Qe,tt):tt.is_unformatted||tt.is_content_unformatted?Je.add_raw_token(Qe):(Je.traverse_whitespace(Qe),Je.print_token(Qe)),ht},ot.prototype._print_custom_beatifier_text=function(Je,Qe,tt){var ht=this;if(Qe.text!==""){var it,pt=Qe.text,vt=1,ut="",Nt="";tt.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?it=this._js_beautify:tt.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?it=this._css_beautify:tt.custom_beautifier_name==="html"&&(it=function(Jt,on){return new ot(Jt,on,ht._js_beautify,ht._css_beautify).beautify()}),this._options.indent_scripts==="keep"?vt=0:this._options.indent_scripts==="separate"&&(vt=-Je.indent_level);var at=Je.get_full_indent(vt);if(pt=pt.replace(/\n[ \t]*$/,""),tt.custom_beautifier_name!=="html"&&pt[0]==="<"&&pt.match(/^(<!--|<!\[CDATA\[)/)){var Mt=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(pt);if(!Mt)return void Je.add_raw_token(Qe);ut=at+Mt[1]+`
`,pt=Mt[4],Mt[5]&&(Nt=at+Mt[5]),pt=pt.replace(/\n[ \t]*$/,""),(Mt[2]||Mt[3].indexOf(`
`)!==-1)&&(Mt=Mt[3].match(/[ \t]+$/))&&(Qe.whitespace_before=Mt[0])}if(pt)if(it){var nn=function(){this.eol=`
`};nn.prototype=this._options.raw_options,pt=it(at+pt,new nn)}else{var Tn=Qe.whitespace_before;Tn&&(pt=pt.replace(new RegExp(`
(`+Tn+")?","g"),`
`)),pt=at+pt.replace(/\n/g,`
`+at)}ut&&(pt=pt?ut+pt+`
`+Nt:ut+Nt),Je.print_newline(!1),pt&&(Qe.text=pt,Qe.whitespace_before="",Qe.newlines=0,Je.add_raw_token(Qe),Je.print_newline(!0))}},ot.prototype._handle_tag_open=function(Je,Qe,tt,ht){var it=this._get_tag_open_token(Qe);return!tt.is_unformatted&&!tt.is_content_unformatted||tt.is_empty_element||Qe.type!==Oe.TAG_OPEN||Qe.text.indexOf("</")!==0?(Je.traverse_whitespace(Qe),this._set_tag_position(Je,Qe,it,tt,ht),it.is_inline_element||Je.set_wrap_point(),Je.print_token(Qe)):(Je.add_raw_token(Qe),it.start_tag_token=this._tag_stack.try_pop(it.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(it.alignment_size=Qe.text.length+1),it.tag_complete||it.is_unformatted||(Je.alignment_size=it.alignment_size),it};var yt=function(Je,Qe){if(this.parent=Je||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",Qe){var tt;this.tag_start_char=Qe.text[0],this.text=Qe.text,this.tag_start_char==="<"?(tt=Qe.text.match(/^<([^\s>]*)/),this.tag_check=tt?tt[1]:""):(tt=Qe.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=tt?tt[1]:"",(Qe.text.startsWith("{{#>")||Qe.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&Qe.next!==null?this.tag_check=Qe.next.text.split(" ")[0]:this.tag_check=Qe.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),Qe.type===Oe.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||Qe.closed&&Qe.closed.text==="/>";var ht=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(ht=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(ht)))}else this.tag_complete=!0};ot.prototype._get_tag_open_token=function(Je){var Qe=new yt(this._tag_stack.get_parser_token(),Je);return Qe.alignment_size=this._options.wrap_attributes_indent_size,Qe.is_end_tag=Qe.is_end_tag||qe(Qe.tag_check,this._options.void_elements),Qe.is_empty_element=Qe.tag_complete||Qe.is_start_tag&&Qe.is_end_tag,Qe.is_unformatted=!Qe.tag_complete&&qe(Qe.tag_check,this._options.unformatted),Qe.is_content_unformatted=!Qe.is_empty_element&&qe(Qe.tag_check,this._options.content_unformatted),Qe.is_inline_element=qe(Qe.tag_name,this._options.inline)||Qe.tag_name.includes("-")||Qe.tag_start_char==="{",Qe},ot.prototype._set_tag_position=function(Je,Qe,tt,ht,it){if(tt.is_empty_element||(tt.is_end_tag?tt.start_tag_token=this._tag_stack.try_pop(tt.tag_name):(this._do_optional_end_element(tt)&&(tt.is_inline_element||Je.print_newline(!1)),this._tag_stack.record_tag(tt),tt.tag_name!=="script"&&tt.tag_name!=="style"||tt.is_unformatted||tt.is_content_unformatted||(tt.custom_beautifier_name=We(tt.tag_check,Qe)))),qe(tt.tag_check,this._options.extra_liners)&&(Je.print_newline(!1),Je._output.just_added_blankline()||Je.print_newline(!0)),tt.is_empty_element)tt.tag_start_char==="{"&&tt.tag_check==="else"&&(this._tag_stack.indent_to_tag(["if","unless","each"]),tt.indent_content=!0,Je.current_line_has_match(/{{#if/)||Je.print_newline(!1)),tt.tag_name==="!--"&&it.type===Oe.TAG_CLOSE&&ht.is_end_tag&&tt.text.indexOf(`
`)===-1||(tt.is_inline_element||tt.is_unformatted||Je.print_newline(!1),this._calcluate_parent_multiline(Je,tt));else if(tt.is_end_tag){var pt=!1;pt=(pt=tt.start_tag_token&&tt.start_tag_token.multiline_content)||!tt.is_inline_element&&!(ht.is_inline_element||ht.is_unformatted)&&!(it.type===Oe.TAG_CLOSE&&tt.start_tag_token===ht)&&it.type!=="TK_CONTENT",(tt.is_content_unformatted||tt.is_unformatted)&&(pt=!1),pt&&Je.print_newline(!1)}else tt.indent_content=!tt.custom_beautifier_name,tt.tag_start_char==="<"&&(tt.tag_name==="html"?tt.indent_content=this._options.indent_inner_html:tt.tag_name==="head"?tt.indent_content=this._options.indent_head_inner_html:tt.tag_name==="body"&&(tt.indent_content=this._options.indent_body_inner_html)),tt.is_inline_element||tt.is_unformatted||it.type==="TK_CONTENT"&&!tt.is_content_unformatted||Je.print_newline(!1),this._calcluate_parent_multiline(Je,tt)},ot.prototype._calcluate_parent_multiline=function(Je,Qe){!Qe.parent||!Je._output.just_added_newline()||(Qe.is_inline_element||Qe.is_unformatted)&&Qe.parent.is_inline_element||(Qe.parent.multiline_content=!0)};var ft=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],_t=["a","audio","del","ins","map","noscript","video"];ot.prototype._do_optional_end_element=function(Je){var Qe=null;if(!Je.is_empty_element&&Je.is_start_tag&&Je.parent){if(Je.tag_name==="body")Qe=Qe||this._tag_stack.try_pop("head");else if(Je.tag_name==="li")Qe=Qe||this._tag_stack.try_pop("li",["ol","ul"]);else if(Je.tag_name==="dd"||Je.tag_name==="dt")Qe=(Qe=Qe||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if(Je.parent.tag_name==="p"&&ft.indexOf(Je.tag_name)!==-1){var tt=Je.parent.parent;tt&&_t.indexOf(tt.tag_name)!==-1||(Qe=Qe||this._tag_stack.try_pop("p"))}else Je.tag_name==="rp"||Je.tag_name==="rt"?Qe=(Qe=Qe||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):Je.tag_name==="optgroup"?Qe=Qe||this._tag_stack.try_pop("optgroup",["select"]):Je.tag_name==="option"?Qe=Qe||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):Je.tag_name==="colgroup"?Qe=Qe||this._tag_stack.try_pop("caption",["table"]):Je.tag_name==="thead"?Qe=(Qe=Qe||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):Je.tag_name==="tbody"||Je.tag_name==="tfoot"?Qe=(Qe=(Qe=(Qe=Qe||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):Je.tag_name==="tr"?Qe=(Qe=(Qe=Qe||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):Je.tag_name!=="th"&&Je.tag_name!=="td"||(Qe=(Qe=Qe||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return Je.parent=this._tag_stack.get_parser_token(),Qe}},ge.exports.Beautifier=ot},function(ge,ye,xe){var we=xe(6).Options;function ke(Se){we.call(this,Se,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}ke.prototype=new we,ge.exports.Options=ke},function(ge,ye,xe){var we=xe(9).Tokenizer,ke=xe(9).TOKEN,Se=xe(13).Directives,Oe=xe(14).TemplatablePattern,Fe=xe(12).Pattern,ze={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:ke.START,RAW:ke.RAW,EOF:ke.EOF},Le=new Se(/<\!--/,/-->/),We=function(qe,Ne){we.call(this,qe,Ne),this._current_tag_name="";var Ke=new Oe(this._input).read_options(this._options),ot=new Fe(this._input);if(this.__patterns={word:Ke.until(/[\n\r\t <]/),single_quote:Ke.until_after(/'/),double_quote:Ke.until_after(/"/),attribute:Ke.until(/[\n\r\t =>]|\/>/),element_name:Ke.until(/[\n\r\t >\/]/),handlebars_comment:ot.starting_with(/{{!--/).until_after(/--}}/),handlebars:ot.starting_with(/{{/).until_after(/}}/),handlebars_open:ot.until(/[\n\r\t }]/),handlebars_raw_close:ot.until(/}}/),comment:ot.starting_with(/<!--/).until_after(/-->/),cdata:ot.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:ot.starting_with(/<!\[/).until_after(/]>/),processing:ot.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var yt=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=ot.matching(yt).until_after(yt)}};(We.prototype=new we)._is_comment=function(qe){return!1},We.prototype._is_opening=function(qe){return qe.type===ze.TAG_OPEN},We.prototype._is_closing=function(qe,Ne){return qe.type===ze.TAG_CLOSE&&Ne&&((qe.text===">"||qe.text==="/>")&&Ne.text[0]==="<"||qe.text==="}}"&&Ne.text[0]==="{"&&Ne.text[1]==="{")},We.prototype._reset=function(){this._current_tag_name=""},We.prototype._get_next_token=function(qe,Ne){var Ke=null;this._readWhitespace();var ot=this._input.peek();return ot===null?this._create_token(ze.EOF,""):Ke=(Ke=(Ke=(Ke=(Ke=(Ke=(Ke=(Ke=(Ke=Ke||this._read_open_handlebars(ot,Ne))||this._read_attribute(ot,qe,Ne))||this._read_close(ot,Ne))||this._read_raw_content(ot,qe,Ne))||this._read_content_word(ot))||this._read_comment_or_cdata(ot))||this._read_processing(ot))||this._read_open(ot,Ne))||this._create_token(ze.UNKNOWN,this._input.next())},We.prototype._read_comment_or_cdata=function(qe){var Ne=null,Ke=null,ot=null;return qe==="<"&&(this._input.peek(1)==="!"&&((Ke=this.__patterns.comment.read())?(ot=Le.get_directives(Ke))&&ot.ignore==="start"&&(Ke+=Le.readIgnored(this._input)):Ke=this.__patterns.cdata.read()),Ke&&((Ne=this._create_token(ze.COMMENT,Ke)).directives=ot)),Ne},We.prototype._read_processing=function(qe){var Ne=null,Ke=null;if(qe==="<"){var ot=this._input.peek(1);ot!=="!"&&ot!=="?"||(Ke=(Ke=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),Ke&&((Ne=this._create_token(ze.COMMENT,Ke)).directives=null)}return Ne},We.prototype._read_open=function(qe,Ne){var Ke=null,ot=null;return Ne||qe==="<"&&(Ke=this._input.next(),this._input.peek()==="/"&&(Ke+=this._input.next()),Ke+=this.__patterns.element_name.read(),ot=this._create_token(ze.TAG_OPEN,Ke)),ot},We.prototype._read_open_handlebars=function(qe,Ne){var Ke=null,ot=null;return Ne||this._options.indent_handlebars&&qe==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(Ke=(Ke=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),ot=this._create_token(ze.COMMENT,Ke)):(Ke=this.__patterns.handlebars_open.read(),ot=this._create_token(ze.TAG_OPEN,Ke))),ot},We.prototype._read_close=function(qe,Ne){var Ke=null,ot=null;return Ne&&(Ne.text[0]==="<"&&(qe===">"||qe==="/"&&this._input.peek(1)===">")?(Ke=this._input.next(),qe==="/"&&(Ke+=this._input.next()),ot=this._create_token(ze.TAG_CLOSE,Ke)):Ne.text[0]==="{"&&qe==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),ot=this._create_token(ze.TAG_CLOSE,"}}"))),ot},We.prototype._read_attribute=function(qe,Ne,Ke){var ot=null,yt="";if(Ke&&Ke.text[0]==="<")if(qe==="=")ot=this._create_token(ze.EQUALS,this._input.next());else if(qe==='"'||qe==="'"){var ft=this._input.next();ft+=qe==='"'?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),ot=this._create_token(ze.VALUE,ft)}else(yt=this.__patterns.attribute.read())&&(ot=Ne.type===ze.EQUALS?this._create_token(ze.VALUE,yt):this._create_token(ze.ATTRIBUTE,yt));return ot},We.prototype._is_content_unformatted=function(qe){return this._options.void_elements.indexOf(qe)===-1&&(this._options.content_unformatted.indexOf(qe)!==-1||this._options.unformatted.indexOf(qe)!==-1)},We.prototype._read_raw_content=function(qe,Ne,Ke){var ot="";if(Ke&&Ke.text[0]==="{")ot=this.__patterns.handlebars_raw_close.read();else if(Ne.type===ze.TAG_CLOSE&&Ne.opened.text[0]==="<"&&Ne.text[0]!=="/"){var yt=Ne.opened.text.substr(1).toLowerCase();if(yt==="script"||yt==="style"){var ft=this._read_comment_or_cdata(qe);if(ft)return ft.type=ze.TEXT,ft;ot=this._input.readUntil(new RegExp("</"+yt+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(yt)&&(ot=this._input.readUntil(new RegExp("</"+yt+"[\\n\\r\\t ]*?>","ig")))}return ot?this._create_token(ze.TEXT,ot):null},We.prototype._read_content_word=function(qe){var Ne="";if(this._options.unformatted_content_delimiter&&qe===this._options.unformatted_content_delimiter[0]&&(Ne=this.__patterns.unformatted_content_delimiter.read()),Ne||(Ne=this.__patterns.word.read()),Ne)return this._create_token(ze.TEXT,Ne)},ge.exports.Tokenizer=We,ge.exports.TOKEN=ze}],_e={},ne=function ge(ye){var xe=_e[ye];if(xe!==void 0)return xe.exports;var we=_e[ye]={exports:{}};return I[ye](we,we.exports,ge),we.exports}(18);Q=ne})();var de=Q;re=[V,V(7937),V(5040)],te=function(I){var _e=V(7937),ne=V(5040);return{html_beautify:function(ge,ye){return de(ge,ye,_e.js_beautify,ne.css_beautify)}}}.apply(G,re),te===void 0||(U.exports=te)})()},7937:function(U,G){var V;(function(){var re;(function(){var Q=[function(_e,ne,ge){var ye=ge(1).Beautifier,xe=ge(5).Options;_e.exports=function(we,ke){return new ye(we,ke).beautify()},_e.exports.defaultOptions=function(){return new xe}},function(_e,ne,ge){var ye=ge(2).Output,xe=ge(3).Token,we=ge(4),ke=ge(5).Options,Se=ge(7).Tokenizer,Oe=ge(7).line_starters,Fe=ge(7).positionable_operators,ze=ge(7).TOKEN;function Le(at,Mt){return Mt.indexOf(at)!==-1}function We(at,Mt){return at&&at.type===ze.RESERVED&&at.text===Mt}function qe(at,Mt){return at&&at.type===ze.RESERVED&&Le(at.text,Mt)}var Ne=["case","return","do","if","throw","else","await","break","continue","async"],Ke=function(at){for(var Mt={},nn=0;nn<at.length;nn++)Mt[at[nn].replace(/-/g,"_")]=at[nn];return Mt}(["before-newline","after-newline","preserve-newline"]),ot=[Ke.before_newline,Ke.preserve_newline],yt="BlockStatement",ft="Statement",_t="ObjectLiteral",Je="ArrayLiteral",Qe="ForInitializer",tt="Conditional",ht="Expression";function it(at,Mt){Mt.multiline_frame||Mt.mode===Qe||Mt.mode===tt||at.remove_indent(Mt.start_line_index)}function pt(at){return at===Je}function vt(at){return Le(at,[ht,Qe,tt])}function ut(at,Mt){Mt=Mt||{},this._source_text=at||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new ke(Mt)}ut.prototype.create_flags=function(at,Mt){var nn=0;return at&&(nn=at.indentation_level,!this._output.just_added_newline()&&at.line_indent_level>nn&&(nn=at.line_indent_level)),{mode:Mt,parent:at,last_token:at?at.last_token:new xe(ze.START_BLOCK,""),last_word:at?at.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:nn,alignment:0,line_indent_level:at?at.line_indent_level:nn,start_line_index:this._output.get_line_number(),ternary_depth:0}},ut.prototype._reset=function(at){var Mt=at.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new ye(this._options,Mt),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(yt);var nn=new Se(at,this._options);return this._tokens=nn.tokenize(),at},ut.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var at=this._reset(this._source_text),Mt=this._options.eol;this._options.eol==="auto"&&(Mt=`
`,at&&we.lineBreak.test(at||"")&&(Mt=at.match(we.lineBreak)[0]));for(var nn=this._tokens.next();nn;)this.handle_token(nn),this._last_last_text=this._flags.last_token.text,this._flags.last_token=nn,nn=this._tokens.next();return this._output.get_code(Mt)},ut.prototype.handle_token=function(at,Mt){at.type===ze.START_EXPR?this.handle_start_expr(at):at.type===ze.END_EXPR?this.handle_end_expr(at):at.type===ze.START_BLOCK?this.handle_start_block(at):at.type===ze.END_BLOCK?this.handle_end_block(at):at.type===ze.WORD||at.type===ze.RESERVED?this.handle_word(at):at.type===ze.SEMICOLON?this.handle_semicolon(at):at.type===ze.STRING?this.handle_string(at):at.type===ze.EQUALS?this.handle_equals(at):at.type===ze.OPERATOR?this.handle_operator(at):at.type===ze.COMMA?this.handle_comma(at):at.type===ze.BLOCK_COMMENT?this.handle_block_comment(at,Mt):at.type===ze.COMMENT?this.handle_comment(at,Mt):at.type===ze.DOT?this.handle_dot(at):at.type===ze.EOF?this.handle_eof(at):(at.type,ze.UNKNOWN,this.handle_unknown(at,Mt))},ut.prototype.handle_whitespace_and_comments=function(at,Mt){var nn=at.newlines,Tn=this._options.keep_array_indentation&&pt(this._flags.mode);if(at.comments_before)for(var Jt=at.comments_before.next();Jt;)this.handle_whitespace_and_comments(Jt,Mt),this.handle_token(Jt,Mt),Jt=at.comments_before.next();if(Tn)for(var on=0;on<nn;on+=1)this.print_newline(on>0,Mt);else if(this._options.max_preserve_newlines&&nn>this._options.max_preserve_newlines&&(nn=this._options.max_preserve_newlines),this._options.preserve_newlines&&nn>1){this.print_newline(!1,Mt);for(var Vt=1;Vt<nn;Vt+=1)this.print_newline(!0,Mt)}};var Nt=["async","break","continue","return","throw","yield"];ut.prototype.allow_wrap_or_preserved_newline=function(at,Mt){if(Mt=Mt!==void 0&&Mt,!this._output.just_added_newline()){var nn=this._options.preserve_newlines&&at.newlines||Mt;if(Le(this._flags.last_token.text,Fe)||Le(at.text,Fe)){var Tn=Le(this._flags.last_token.text,Fe)&&Le(this._options.operator_position,ot)||Le(at.text,Fe);nn=nn&&Tn}if(nn)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(qe(this._flags.last_token,Nt))return;this._output.set_wrap_point()}}},ut.prototype.print_newline=function(at,Mt){if(!Mt&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==ze.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var nn=this._tokens.peek();!(this._flags.mode!==ft||this._flags.if_block&&We(nn,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(at)&&(this._flags.multiline_frame=!0)},ut.prototype.print_token_line_indentation=function(at){this._output.just_added_newline()&&(this._options.keep_array_indentation&&at.newlines&&(at.text==="["||pt(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(at.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},ut.prototype.print_token=function(at){if(this._output.raw)this._output.add_raw_token(at);else{if(this._options.comma_first&&at.previous&&at.previous.type===ze.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var Mt=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(Mt),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(at),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(at),this._output.non_breaking_space=!0,this._output.add_token(at.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},ut.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ut.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ut.prototype.set_mode=function(at){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,at),this._flags=this.create_flags(this._previous_flags,at),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ut.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===ft&&it(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ut.prototype.start_of_object_property=function(){return this._flags.parent.mode===_t&&this._flags.mode===ft&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||qe(this._flags.last_token,["get","set"]))},ut.prototype.start_of_statement=function(at){var Mt=!1;return!!(Mt=(Mt=(Mt=(Mt=(Mt=(Mt=(Mt=Mt||qe(this._flags.last_token,["var","let","const"])&&at.type===ze.WORD)||We(this._flags.last_token,"do"))||!(this._flags.parent.mode===_t&&this._flags.mode===ft)&&qe(this._flags.last_token,Nt)&&!at.newlines)||We(this._flags.last_token,"else")&&!(We(at,"if")&&!at.comments_before))||this._flags.last_token.type===ze.END_EXPR&&(this._previous_flags.mode===Qe||this._previous_flags.mode===tt))||this._flags.last_token.type===ze.WORD&&this._flags.mode===yt&&!this._flags.in_case&&!(at.text==="--"||at.text==="++")&&this._last_last_text!=="function"&&at.type!==ze.WORD&&at.type!==ze.RESERVED)||this._flags.mode===_t&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||qe(this._flags.last_token,["get","set"])))&&(this.set_mode(ft),this.indent(),this.handle_whitespace_and_comments(at,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at,qe(at,["do","for","if","while"])),!0)},ut.prototype.handle_start_expr=function(at){this.start_of_statement(at)||this.handle_whitespace_and_comments(at);var Mt=ht;if(at.text==="["){if(this._flags.last_token.type===ze.WORD||this._flags.last_token.text===")")return qe(this._flags.last_token,Oe)&&(this._output.space_before_token=!0),this.print_token(at),this.set_mode(Mt),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));Mt=Je,pt(this._flags.mode)&&(this._flags.last_token.text!=="["&&(this._flags.last_token.text!==","||this._last_last_text!=="]"&&this._last_last_text!=="}")||this._options.keep_array_indentation||this.print_newline()),Le(this._flags.last_token.type,[ze.START_EXPR,ze.END_EXPR,ze.WORD,ze.OPERATOR,ze.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===ze.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,Mt=Qe):Le(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,Mt=tt):Le(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&at.whitespace_before===""?this._output.space_before_token=!1:(Le(this._flags.last_token.text,Oe)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===ze.EQUALS||this._flags.last_token.type===ze.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at);else if(this._flags.last_token.type===ze.WORD){this._output.space_before_token=!1;var nn=this._tokens.peek(-3);if(this._options.space_after_named_function&&nn){var Tn=this._tokens.peek(-4);qe(nn,["async","function"])||nn.text==="*"&&qe(Tn,["async","function"])?this._output.space_before_token=!0:this._flags.mode===_t?nn.text!=="{"&&nn.text!==","&&(nn.text!=="*"||Tn.text!=="{"&&Tn.text!==",")||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(at);(this._flags.last_token.type===ze.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(Le(this._last_last_text,["function","yield"])||this._flags.mode===_t&&Le(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===ze.START_BLOCK?this.print_newline():this._flags.last_token.type!==ze.END_EXPR&&this._flags.last_token.type!==ze.START_EXPR&&this._flags.last_token.type!==ze.END_BLOCK&&this._flags.last_token.text!=="."&&this._flags.last_token.type!==ze.COMMA||this.allow_wrap_or_preserved_newline(at,at.newlines),this.print_token(at),this.set_mode(Mt),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},ut.prototype.handle_end_expr=function(at){for(;this._flags.mode===ft;)this.restore_mode();this.handle_whitespace_and_comments(at),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(at,at.text==="]"&&pt(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==ze.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(at),this.restore_mode(),it(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===tt&&(this._previous_flags.mode=ht,this._flags.do_block=!1,this._flags.do_while=!1)},ut.prototype.handle_start_block=function(at){this.handle_whitespace_and_comments(at);var Mt=this._tokens.peek(),nn=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===ze.END_EXPR?(this.set_mode(yt),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(yt):nn&&(Le(nn.text,[":",","])&&Le(Mt.type,[ze.STRING,ze.WORD,ze.RESERVED])||Le(Mt.text,["get","set","..."])&&Le(nn.type,[ze.WORD,ze.RESERVED]))?Le(this._last_last_text,["class","interface"])&&!Le(nn.text,[":",","])?this.set_mode(yt):this.set_mode(_t):this._flags.last_token.type===ze.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(yt):Le(this._flags.last_token.type,[ze.EQUALS,ze.START_EXPR,ze.COMMA,ze.OPERATOR])||qe(this._flags.last_token,["return","throw","import","default"])?this.set_mode(_t):this.set_mode(yt),this._flags.last_token&&qe(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var Tn=!Mt.comments_before&&Mt.text==="}",Jt=Tn&&this._flags.last_word==="function"&&this._flags.last_token.type===ze.END_EXPR;if(this._options.brace_preserve_inline){var on=0,Vt=null;this._flags.inline_frame=!0;do if(on+=1,(Vt=this._tokens.peek(on-1)).newlines){this._flags.inline_frame=!1;break}while(Vt.type!==ze.EOF&&(Vt.type!==ze.END_BLOCK||Vt.opened!==at))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&at.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==ze.OPERATOR&&(Jt||this._flags.last_token.type===ze.EQUALS||qe(this._flags.last_token,Ne)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(!pt(this._previous_flags.mode)||this._flags.last_token.type!==ze.START_EXPR&&this._flags.last_token.type!==ze.COMMA||((this._flags.last_token.type===ze.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===ze.COMMA||this._flags.last_token.type===ze.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(at),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==ze.OPERATOR&&this._flags.last_token.type!==ze.START_EXPR&&(this._flags.last_token.type!==ze.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(at),this.indent(),Tn||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},ut.prototype.handle_end_block=function(at){for(this.handle_whitespace_and_comments(at);this._flags.mode===ft;)this.restore_mode();var Mt=this._flags.last_token.type===ze.START_BLOCK;this._flags.inline_frame&&!Mt?this._output.space_before_token=!0:this._options.brace_style==="expand"?Mt||this.print_newline():Mt||(pt(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(at)},ut.prototype.handle_word=function(at){if(at.type===ze.RESERVED&&(Le(at.text,["set","get"])&&this._flags.mode!==_t||at.text==="import"&&Le(this._tokens.peek().text,["(","."])||Le(at.text,["as","from"])&&!this._flags.import_block||this._flags.mode===_t&&this._tokens.peek().text===":")&&(at.type=ze.WORD),this.start_of_statement(at)?qe(this._flags.last_token,["var","let","const"])&&at.type===ze.WORD&&(this._flags.declaration_statement=!0):!at.newlines||vt(this._flags.mode)||this._flags.last_token.type===ze.OPERATOR&&this._flags.last_token.text!=="--"&&this._flags.last_token.text!=="++"||this._flags.last_token.type===ze.EQUALS||!this._options.preserve_newlines&&qe(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(at):(this.handle_whitespace_and_comments(at),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(We(at,"while"))return this._output.space_before_token=!0,this.print_token(at),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&We(at,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===ft;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&qe(at,["case","default"]))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(at),void(this._flags.in_case=!0);if(this._flags.last_token.type!==ze.COMMA&&this._flags.last_token.type!==ze.START_EXPR&&this._flags.last_token.type!==ze.EQUALS&&this._flags.last_token.type!==ze.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at),We(at,"function"))return(Le(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!Le(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==ze.OPERATOR)&&(this._output.just_added_blankline()||at.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===ze.RESERVED||this._flags.last_token.type===ze.WORD?qe(this._flags.last_token,["get","set","new","export"])||qe(this._flags.last_token,Nt)||We(this._flags.last_token,"default")&&this._last_last_text==="export"||this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===ze.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:(this._flags.multiline_frame||!vt(this._flags.mode)&&!pt(this._flags.mode))&&this.print_newline(),this.print_token(at),void(this._flags.last_word=at.text);var Mt="NONE";this._flags.last_token.type===ze.END_BLOCK?this._previous_flags.inline_frame?Mt="SPACE":qe(at,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&at.newlines?Mt="NEWLINE":(Mt="SPACE",this._output.space_before_token=!0):Mt="NEWLINE":this._flags.last_token.type===ze.SEMICOLON&&this._flags.mode===yt?Mt="NEWLINE":this._flags.last_token.type===ze.SEMICOLON&&vt(this._flags.mode)?Mt="SPACE":this._flags.last_token.type===ze.STRING?Mt="NEWLINE":this._flags.last_token.type===ze.RESERVED||this._flags.last_token.type===ze.WORD||this._flags.last_token.text==="*"&&(Le(this._last_last_text,["function","yield"])||this._flags.mode===_t&&Le(this._last_last_text,["{",","]))?Mt="SPACE":this._flags.last_token.type===ze.START_BLOCK?Mt=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===ze.END_EXPR&&(this._output.space_before_token=!0,Mt="NEWLINE"),qe(at,Oe)&&this._flags.last_token.text!==")"&&(Mt=this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?"SPACE":"NEWLINE"),qe(at,["else","catch","finally"])?(this._flags.last_token.type!==ze.END_BLOCK||this._previous_flags.mode!==yt||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&at.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),this._output.current_line.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0):Mt==="NEWLINE"?qe(this._flags.last_token,Ne)||this._flags.last_token.text==="declare"&&qe(at,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==ze.END_EXPR?this._flags.last_token.type===ze.START_EXPR&&qe(at,["var","let","const"])||this._flags.last_token.text===":"||(We(at,"if")&&We(at.previous,"else")?this._output.space_before_token=!0:this.print_newline()):qe(at,Oe)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&pt(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():Mt==="SPACE"&&(this._output.space_before_token=!0),!at.previous||at.previous.type!==ze.WORD&&at.previous.type!==ze.RESERVED||(this._output.space_before_token=!0),this.print_token(at),this._flags.last_word=at.text,at.type===ze.RESERVED&&(at.text==="do"?this._flags.do_block=!0:at.text==="if"?this._flags.if_block=!0:at.text==="import"?this._flags.import_block=!0:this._flags.import_block&&We(at,"from")&&(this._flags.import_block=!1))},ut.prototype.handle_semicolon=function(at){this.start_of_statement(at)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(at);for(var Mt=this._tokens.peek();!(this._flags.mode!==ft||this._flags.if_block&&We(Mt,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(at)},ut.prototype.handle_string=function(at){(!at.text.startsWith("`")||at.newlines!==0||at.whitespace_before!==""||at.previous.text!==")"&&this._flags.last_token.type!==ze.WORD)&&(this.start_of_statement(at)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(at),this._flags.last_token.type===ze.RESERVED||this._flags.last_token.type===ze.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===ze.COMMA||this._flags.last_token.type===ze.START_EXPR||this._flags.last_token.type===ze.EQUALS||this._flags.last_token.type===ze.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at):!at.text.startsWith("`")||this._flags.last_token.type!==ze.END_EXPR||at.previous.text!=="]"&&at.previous.text!==")"||at.newlines!==0?this.print_newline():this._output.space_before_token=!0)),this.print_token(at)},ut.prototype.handle_equals=function(at){this.start_of_statement(at)||this.handle_whitespace_and_comments(at),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(at),this._output.space_before_token=!0},ut.prototype.handle_comma=function(at){this.handle_whitespace_and_comments(at,!0),this.print_token(at),this._output.space_before_token=!0,this._flags.declaration_statement?(vt(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(at)):this._flags.mode===_t||this._flags.mode===ft&&this._flags.parent.mode===_t?(this._flags.mode===ft&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(at)},ut.prototype.handle_operator=function(at){var Mt=at.text==="*"&&(qe(this._flags.last_token,["function","yield"])||Le(this._flags.last_token.type,[ze.START_BLOCK,ze.COMMA,ze.END_BLOCK,ze.SEMICOLON])),nn=Le(at.text,["-","+"])&&(Le(this._flags.last_token.type,[ze.START_BLOCK,ze.START_EXPR,ze.EQUALS,ze.OPERATOR])||Le(this._flags.last_token.text,Oe)||this._flags.last_token.text===",");if(!this.start_of_statement(at)){var Tn=!Mt;this.handle_whitespace_and_comments(at,Tn)}if(at.text!=="*"||this._flags.last_token.type!==ze.DOT)if(at.text!=="::"){if(this._flags.last_token.type===ze.OPERATOR&&Le(this._options.operator_position,ot)&&this.allow_wrap_or_preserved_newline(at),at.text===":"&&this._flags.in_case)return this.print_token(at),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==ze.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var Jt=!0,on=!0,Vt=!1;if(at.text===":"?this._flags.ternary_depth===0?Jt=!1:(this._flags.ternary_depth-=1,Vt=!0):at.text==="?"&&(this._flags.ternary_depth+=1),!nn&&!Mt&&this._options.preserve_newlines&&Le(at.text,Fe)){var Rt=at.text===":",Yt=Rt&&Vt,un=Rt&&!Vt;switch(this._options.operator_position){case Ke.before_newline:return this._output.space_before_token=!un,this.print_token(at),Rt&&!Yt||this.allow_wrap_or_preserved_newline(at),void(this._output.space_before_token=!0);case Ke.after_newline:return this._output.space_before_token=!0,!Rt||Yt?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(at):this._output.space_before_token=!1,this.print_token(at),void(this._output.space_before_token=!0);case Ke.preserve_newline:return un||this.allow_wrap_or_preserved_newline(at),Jt=!(this._output.just_added_newline()||un),this._output.space_before_token=Jt,this.print_token(at),void(this._output.space_before_token=!0)}}if(Mt){this.allow_wrap_or_preserved_newline(at),Jt=!1;var yn=this._tokens.peek();on=yn&&Le(yn.type,[ze.WORD,ze.RESERVED])}else if(at.text==="...")this.allow_wrap_or_preserved_newline(at),Jt=this._flags.last_token.type===ze.START_BLOCK,on=!1;else if(Le(at.text,["--","++","!","~"])||nn){if(this._flags.last_token.type!==ze.COMMA&&this._flags.last_token.type!==ze.START_EXPR||this.allow_wrap_or_preserved_newline(at),Jt=!1,on=!1,at.newlines&&(at.text==="--"||at.text==="++"||at.text==="~")){var In=qe(this._flags.last_token,Ne)&&at.newlines;In&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(In,!0)}this._flags.last_token.text===";"&&vt(this._flags.mode)&&(Jt=!0),this._flags.last_token.type===ze.RESERVED?Jt=!0:this._flags.last_token.type===ze.END_EXPR?Jt=!(this._flags.last_token.text==="]"&&(at.text==="--"||at.text==="++")):this._flags.last_token.type===ze.OPERATOR&&(Jt=Le(at.text,["--","-","++","+"])&&Le(this._flags.last_token.text,["--","-","++","+"]),Le(at.text,["+","-"])&&Le(this._flags.last_token.text,["--","++"])&&(on=!0)),(this._flags.mode!==yt||this._flags.inline_frame)&&this._flags.mode!==ft||this._flags.last_token.text!=="{"&&this._flags.last_token.text!==";"||this.print_newline()}this._output.space_before_token=this._output.space_before_token||Jt,this.print_token(at),this._output.space_before_token=on}else this.print_token(at);else this.print_token(at)},ut.prototype.handle_block_comment=function(at,Mt){return this._output.raw?(this._output.add_raw_token(at),void(at.directives&&at.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw))):at.directives?(this.print_newline(!1,Mt),this.print_token(at),at.directives.preserve==="start"&&(this._output.raw=!0),void this.print_newline(!1,!0)):we.newline.test(at.text)||at.newlines?void this.print_block_commment(at,Mt):(this._output.space_before_token=!0,this.print_token(at),void(this._output.space_before_token=!0))},ut.prototype.print_block_commment=function(at,Mt){var nn,Tn=function(Yt){for(var un=[],yn=(Yt=Yt.replace(we.allLineBreaks,`
`)).indexOf(`
`);yn!==-1;)un.push(Yt.substring(0,yn)),yn=(Yt=Yt.substring(yn+1)).indexOf(`
`);return Yt.length&&un.push(Yt),un}(at.text),Jt=!1,on=!1,Vt=at.whitespace_before,Rt=Vt.length;if(this.print_newline(!1,Mt),this.print_token_line_indentation(at),this._output.add_token(Tn[0]),this.print_newline(!1,Mt),Tn.length>1){for(Jt=function(Yt,un){for(var yn=0;yn<Yt.length;yn++)if(Yt[yn].trim().charAt(0)!==un)return!1;return!0}(Tn=Tn.slice(1),"*"),on=function(Yt,un){for(var yn,In=0,It=Yt.length;In<It;In++)if((yn=Yt[In])&&yn.indexOf(un)!==0)return!1;return!0}(Tn,Vt),Jt&&(this._flags.alignment=1),nn=0;nn<Tn.length;nn++)Jt?(this.print_token_line_indentation(at),this._output.add_token(Tn[nn].replace(/^\s+/g,""))):on&&Tn[nn]?(this.print_token_line_indentation(at),this._output.add_token(Tn[nn].substring(Rt))):(this._output.current_line.set_indent(-1),this._output.add_token(Tn[nn])),this.print_newline(!1,Mt);this._flags.alignment=0}},ut.prototype.handle_comment=function(at,Mt){at.newlines?this.print_newline(!1,Mt):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(at),this.print_newline(!1,Mt)},ut.prototype.handle_dot=function(at){this.start_of_statement(at)||this.handle_whitespace_and_comments(at,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),qe(this._flags.last_token,Ne)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(at,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(at)},ut.prototype.handle_unknown=function(at,Mt){this.print_token(at),at.text[at.text.length-1]===`
`&&this.print_newline(!1,Mt)},ut.prototype.handle_eof=function(at){for(;this._flags.mode===ft;)this.restore_mode();this.handle_whitespace_and_comments(at)},_e.exports.Beautifier=ut},function(_e){function ne(xe){this.__parent=xe,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ge(xe,we){this.__cache=[""],this.__indent_size=xe.indent_size,this.__indent_string=xe.indent_char,xe.indent_with_tabs||(this.__indent_string=new Array(xe.indent_size+1).join(xe.indent_char)),we=we||"",xe.indent_level>0&&(we=new Array(xe.indent_level+1).join(this.__indent_string)),this.__base_string=we,this.__base_string_length=we.length}function ye(xe,we){this.__indent_cache=new ge(xe,we),this.raw=!1,this._end_with_newline=xe.end_with_newline,this.indent_size=xe.indent_size,this.wrap_line_length=xe.wrap_line_length,this.indent_empty_lines=xe.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ne(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ne.prototype.clone_empty=function(){var xe=new ne(this.__parent);return xe.set_indent(this.__indent_count,this.__alignment_count),xe},ne.prototype.item=function(xe){return xe<0?this.__items[this.__items.length+xe]:this.__items[xe]},ne.prototype.has_match=function(xe){for(var we=this.__items.length-1;we>=0;we--)if(this.__items[we].match(xe))return!0;return!1},ne.prototype.set_indent=function(xe,we){this.is_empty()&&(this.__indent_count=xe||0,this.__alignment_count=we||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},ne.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},ne.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},ne.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var xe=this.__parent.current_line;return xe.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),xe.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),xe.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,xe.__items[0]===" "&&(xe.__items.splice(0,1),xe.__character_count-=1),!0}return!1},ne.prototype.is_empty=function(){return this.__items.length===0},ne.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},ne.prototype.push=function(xe){this.__items.push(xe);var we=xe.lastIndexOf(`
`);we!==-1?this.__character_count=xe.length-we:this.__character_count+=xe.length},ne.prototype.pop=function(){var xe=null;return this.is_empty()||(xe=this.__items.pop(),this.__character_count-=xe.length),xe},ne.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},ne.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},ne.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},ne.prototype.toString=function(){var xe="";return this.is_empty()?this.__parent.indent_empty_lines&&(xe=this.__parent.get_indent_string(this.__indent_count)):(xe=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),xe+=this.__items.join("")),xe},ge.prototype.get_indent_size=function(xe,we){var ke=this.__base_string_length;return we=we||0,xe<0&&(ke=0),ke+=xe*this.__indent_size,ke+=we},ge.prototype.get_indent_string=function(xe,we){var ke=this.__base_string;return we=we||0,xe<0&&(xe=0,ke=""),we+=xe*this.__indent_size,this.__ensure_cache(we),ke+=this.__cache[we]},ge.prototype.__ensure_cache=function(xe){for(;xe>=this.__cache.length;)this.__add_column()},ge.prototype.__add_column=function(){var xe=this.__cache.length,we=0,ke="";this.__indent_size&&xe>=this.__indent_size&&(xe-=(we=Math.floor(xe/this.__indent_size))*this.__indent_size,ke=new Array(we+1).join(this.__indent_string)),xe&&(ke+=new Array(xe+1).join(" ")),this.__cache.push(ke)},ye.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},ye.prototype.get_line_number=function(){return this.__lines.length},ye.prototype.get_indent_string=function(xe,we){return this.__indent_cache.get_indent_string(xe,we)},ye.prototype.get_indent_size=function(xe,we){return this.__indent_cache.get_indent_size(xe,we)},ye.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},ye.prototype.add_new_line=function(xe){return!(this.is_empty()||!xe&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},ye.prototype.get_code=function(xe){this.trim(!0);var we=this.current_line.pop();we&&(we[we.length-1]===`
`&&(we=we.replace(/\n+$/g,"")),this.current_line.push(we)),this._end_with_newline&&this.__add_outputline();var ke=this.__lines.join(`
`);return xe!==`
`&&(ke=ke.replace(/[\n]/g,xe)),ke},ye.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},ye.prototype.set_indent=function(xe,we){return xe=xe||0,we=we||0,this.next_line.set_indent(xe,we),this.__lines.length>1?(this.current_line.set_indent(xe,we),!0):(this.current_line.set_indent(),!1)},ye.prototype.add_raw_token=function(xe){for(var we=0;we<xe.newlines;we++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(xe.whitespace_before),this.current_line.push(xe.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},ye.prototype.add_token=function(xe){this.__add_space_before_token(),this.current_line.push(xe),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},ye.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},ye.prototype.remove_indent=function(xe){for(var we=this.__lines.length;xe<we;)this.__lines[xe]._remove_indent(),xe++;this.current_line._remove_wrap_indent()},ye.prototype.trim=function(xe){for(xe=xe!==void 0&&xe,this.current_line.trim();xe&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},ye.prototype.just_added_newline=function(){return this.current_line.is_empty()},ye.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},ye.prototype.ensure_empty_line_above=function(xe,we){for(var ke=this.__lines.length-2;ke>=0;){var Se=this.__lines[ke];if(Se.is_empty())break;if(Se.item(0).indexOf(xe)!==0&&Se.item(-1)!==we){this.__lines.splice(ke+1,0,new ne(this)),this.previous_line=this.__lines[this.__lines.length-2];break}ke--}},_e.exports.Output=ye},function(_e){_e.exports.Token=function(ne,ge,ye,xe){this.type=ne,this.text=ge,this.comments_before=null,this.newlines=ye||0,this.whitespace_before=xe||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(_e,ne){var ge="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",ye="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",xe="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",we="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+ye+"])";ne.identifier=new RegExp(we+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),ne.identifierStart=new RegExp(we),ne.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+ge+ye+xe+"])+"),ne.newline=/[\n\r\u2028\u2029]/,ne.lineBreak=new RegExp(`\r
|`+ne.newline.source),ne.allLineBreaks=new RegExp(ne.lineBreak.source,"g")},function(_e,ne,ge){var ye=ge(6).Options,xe=["before-newline","after-newline","preserve-newline"];function we(ke){ye.call(this,ke,"js");var Se=this.raw_options.brace_style||null;Se==="expand-strict"?this.raw_options.brace_style="expand":Se==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var Oe=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var Fe=0;Fe<Oe.length;Fe++)Oe[Fe]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=Oe[Fe];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",xe),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}we.prototype=new ye,_e.exports.Options=we},function(_e){function ne(xe,we){this.raw_options=ge(xe,we),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ge(xe,we){var ke,Se={};for(ke in xe=ye(xe))ke!==we&&(Se[ke]=xe[ke]);if(we&&xe[we])for(ke in xe[we])Se[ke]=xe[we][ke];return Se}function ye(xe){var we,ke={};for(we in xe)ke[we.replace(/-/g,"_")]=xe[we];return ke}ne.prototype._get_array=function(xe,we){var ke=this.raw_options[xe],Se=we||[];return typeof ke=="object"?ke!==null&&typeof ke.concat=="function"&&(Se=ke.concat()):typeof ke=="string"&&(Se=ke.split(/[^a-zA-Z0-9_\/\-]+/)),Se},ne.prototype._get_boolean=function(xe,we){var ke=this.raw_options[xe];return ke===void 0?!!we:!!ke},ne.prototype._get_characters=function(xe,we){var ke=this.raw_options[xe],Se=we||"";return typeof ke=="string"&&(Se=ke.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Se},ne.prototype._get_number=function(xe,we){var ke=this.raw_options[xe];we=parseInt(we,10),isNaN(we)&&(we=0);var Se=parseInt(ke,10);return isNaN(Se)&&(Se=we),Se},ne.prototype._get_selection=function(xe,we,ke){var Se=this._get_selection_list(xe,we,ke);if(Se.length!==1)throw new Error("Invalid Option Value: The option '"+xe+`' can only be one of the following values:
`+we+`
You passed in: '`+this.raw_options[xe]+"'");return Se[0]},ne.prototype._get_selection_list=function(xe,we,ke){if(!we||we.length===0)throw new Error("Selection list cannot be empty.");if(ke=ke||[we[0]],!this._is_valid_selection(ke,we))throw new Error("Invalid Default Value!");var Se=this._get_array(xe,ke);if(!this._is_valid_selection(Se,we))throw new Error("Invalid Option Value: The option '"+xe+`' can contain only the following values:
`+we+`
You passed in: '`+this.raw_options[xe]+"'");return Se},ne.prototype._is_valid_selection=function(xe,we){return xe.length&&we.length&&!xe.some(function(ke){return we.indexOf(ke)===-1})},_e.exports.Options=ne,_e.exports.normalizeOpts=ye,_e.exports.mergeOpts=ge},function(_e,ne,ge){var ye=ge(8).InputScanner,xe=ge(9).Tokenizer,we=ge(9).TOKEN,ke=ge(13).Directives,Se=ge(4),Oe=ge(12).Pattern,Fe=ge(14).TemplatablePattern;function ze(it,pt){return pt.indexOf(it)!==-1}var Le={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:we.START,RAW:we.RAW,EOF:we.EOF},We=new ke(/\/\*/,/\*\//),qe=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,Ne=/[0-9]/,Ke=/[^\d\.]/,ot=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),yt=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";yt=(yt="\\?\\.(?!\\d) "+(yt=yt.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var ft,_t=new RegExp(yt),Je="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),Qe=Je.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),tt=new RegExp("^(?:"+Qe.join("|")+")$"),ht=function(it,pt){xe.call(this,it,pt),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var vt=new Oe(this._input),ut=new Fe(this._input).read_options(this._options);this.__patterns={template:ut,identifier:ut.starting_with(Se.identifier).matching(Se.identifierMatch),number:vt.matching(qe),punct:vt.matching(_t),comment:vt.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:vt.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:vt.matching(/<!--/),html_comment_end:vt.matching(/-->/),include:vt.starting_with(/#include/).until_after(Se.lineBreak),shebang:vt.starting_with(/#!/).until_after(Se.lineBreak),xml:vt.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:ut.until(/['\\\n\r\u2028\u2029]/),double_quote:ut.until(/["\\\n\r\u2028\u2029]/),template_text:ut.until(/[`\\$]/),template_expression:ut.until(/[`}\\]/)}};(ht.prototype=new xe)._is_comment=function(it){return it.type===Le.COMMENT||it.type===Le.BLOCK_COMMENT||it.type===Le.UNKNOWN},ht.prototype._is_opening=function(it){return it.type===Le.START_BLOCK||it.type===Le.START_EXPR},ht.prototype._is_closing=function(it,pt){return(it.type===Le.END_BLOCK||it.type===Le.END_EXPR)&&pt&&(it.text==="]"&&pt.text==="["||it.text===")"&&pt.text==="("||it.text==="}"&&pt.text==="{")},ht.prototype._reset=function(){ft=!1},ht.prototype._get_next_token=function(it,pt){var vt=null;this._readWhitespace();var ut=this._input.peek();return ut===null?this._create_token(Le.EOF,""):vt=(vt=(vt=(vt=(vt=(vt=(vt=(vt=(vt=vt||this._read_non_javascript(ut))||this._read_string(ut))||this._read_word(it))||this._read_singles(ut))||this._read_comment(ut))||this._read_regexp(ut,it))||this._read_xml(ut,it))||this._read_punctuation())||this._create_token(Le.UNKNOWN,this._input.next())},ht.prototype._read_word=function(it){var pt;return(pt=this.__patterns.identifier.read())!==""?(pt=pt.replace(Se.allLineBreaks,`
`),it.type!==Le.DOT&&(it.type!==Le.RESERVED||it.text!=="set"&&it.text!=="get")&&tt.test(pt)?pt!=="in"&&pt!=="of"||it.type!==Le.WORD&&it.type!==Le.STRING?this._create_token(Le.RESERVED,pt):this._create_token(Le.OPERATOR,pt):this._create_token(Le.WORD,pt)):(pt=this.__patterns.number.read())!==""?this._create_token(Le.WORD,pt):void 0},ht.prototype._read_singles=function(it){var pt=null;return it==="("||it==="["?pt=this._create_token(Le.START_EXPR,it):it===")"||it==="]"?pt=this._create_token(Le.END_EXPR,it):it==="{"?pt=this._create_token(Le.START_BLOCK,it):it==="}"?pt=this._create_token(Le.END_BLOCK,it):it===";"?pt=this._create_token(Le.SEMICOLON,it):it==="."&&Ke.test(this._input.peek(1))?pt=this._create_token(Le.DOT,it):it===","&&(pt=this._create_token(Le.COMMA,it)),pt&&this._input.next(),pt},ht.prototype._read_punctuation=function(){var it=this.__patterns.punct.read();if(it!=="")return it==="="?this._create_token(Le.EQUALS,it):it==="?."?this._create_token(Le.DOT,it):this._create_token(Le.OPERATOR,it)},ht.prototype._read_non_javascript=function(it){var pt="";if(it==="#"){if(this._is_first_token()&&(pt=this.__patterns.shebang.read()))return this._create_token(Le.UNKNOWN,pt.trim()+`
`);if(pt=this.__patterns.include.read())return this._create_token(Le.UNKNOWN,pt.trim()+`
`);it=this._input.next();var vt="#";if(this._input.hasNext()&&this._input.testChar(Ne)){do vt+=it=this._input.next();while(this._input.hasNext()&&it!=="#"&&it!=="=");return it==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(vt+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(vt+="{}",this._input.next(),this._input.next())),this._create_token(Le.WORD,vt)}this._input.back()}else if(it==="<"&&this._is_first_token()){if(pt=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(Se.newline);)pt+=this._input.next();return ft=!0,this._create_token(Le.COMMENT,pt)}}else if(ft&&it==="-"&&(pt=this.__patterns.html_comment_end.read()))return ft=!1,this._create_token(Le.COMMENT,pt);return null},ht.prototype._read_comment=function(it){var pt=null;if(it==="/"){var vt="";if(this._input.peek(1)==="*"){vt=this.__patterns.block_comment.read();var ut=We.get_directives(vt);ut&&ut.ignore==="start"&&(vt+=We.readIgnored(this._input)),vt=vt.replace(Se.allLineBreaks,`
`),(pt=this._create_token(Le.BLOCK_COMMENT,vt)).directives=ut}else this._input.peek(1)==="/"&&(vt=this.__patterns.comment.read(),pt=this._create_token(Le.COMMENT,vt))}return pt},ht.prototype._read_string=function(it){if(it==="`"||it==="'"||it==='"'){var pt=this._input.next();return this.has_char_escapes=!1,pt+=it==="`"?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(it),this.has_char_escapes&&this._options.unescape_strings&&(pt=function(vt){for(var ut="",Nt=0,at=new ye(vt),Mt=null;at.hasNext();)if((Mt=at.match(/([\s]|[^\\]|\\\\)+/g))&&(ut+=Mt[0]),at.peek()==="\\"){if(at.next(),at.peek()==="x")Mt=at.match(/x([0-9A-Fa-f]{2})/g);else{if(at.peek()!=="u"){ut+="\\",at.hasNext()&&(ut+=at.next());continue}Mt=at.match(/u([0-9A-Fa-f]{4})/g)}if(!Mt||(Nt=parseInt(Mt[1],16))>126&&Nt<=255&&Mt[0].indexOf("x")===0)return vt;if(Nt>=0&&Nt<32){ut+="\\"+Mt[0];continue}ut+=Nt===34||Nt===39||Nt===92?"\\"+String.fromCharCode(Nt):String.fromCharCode(Nt)}return ut}(pt)),this._input.peek()===it&&(pt+=this._input.next()),pt=pt.replace(Se.allLineBreaks,`
`),this._create_token(Le.STRING,pt)}return null},ht.prototype._allow_regexp_or_xml=function(it){return it.type===Le.RESERVED&&ze(it.text,["return","case","throw","else","do","typeof","yield"])||it.type===Le.END_EXPR&&it.text===")"&&it.opened.previous.type===Le.RESERVED&&ze(it.opened.previous.text,["if","while","for"])||ze(it.type,[Le.COMMENT,Le.START_EXPR,Le.START_BLOCK,Le.START,Le.END_BLOCK,Le.OPERATOR,Le.EQUALS,Le.EOF,Le.SEMICOLON,Le.COMMA])},ht.prototype._read_regexp=function(it,pt){if(it==="/"&&this._allow_regexp_or_xml(pt)){for(var vt=this._input.next(),ut=!1,Nt=!1;this._input.hasNext()&&(ut||Nt||this._input.peek()!==it)&&!this._input.testChar(Se.newline);)vt+=this._input.peek(),ut?ut=!1:(ut=this._input.peek()==="\\",this._input.peek()==="["?Nt=!0:this._input.peek()==="]"&&(Nt=!1)),this._input.next();return this._input.peek()===it&&(vt+=this._input.next(),vt+=this._input.read(Se.identifier)),this._create_token(Le.STRING,vt)}return null},ht.prototype._read_xml=function(it,pt){if(this._options.e4x&&it==="<"&&this._allow_regexp_or_xml(pt)){var vt="",ut=this.__patterns.xml.read_match();if(ut){for(var Nt=ut[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),at=Nt.indexOf("{")===0,Mt=0;ut;){var nn=!!ut[1],Tn=ut[2];if(!(!!ut[ut.length-1]||Tn.slice(0,8)==="![CDATA[")&&(Tn===Nt||at&&Tn.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(nn?--Mt:++Mt),vt+=ut[0],Mt<=0)break;ut=this.__patterns.xml.read_match()}return ut||(vt+=this._input.match(/[\s\S]*/g)[0]),vt=vt.replace(Se.allLineBreaks,`
`),this._create_token(Le.STRING,vt)}}return null},ht.prototype._read_string_recursive=function(it,pt,vt){var ut,Nt;it==="'"?Nt=this.__patterns.single_quote:it==='"'?Nt=this.__patterns.double_quote:it==="`"?Nt=this.__patterns.template_text:it==="}"&&(Nt=this.__patterns.template_expression);for(var at=Nt.read(),Mt="";this._input.hasNext();){if((Mt=this._input.next())===it||!pt&&Se.newline.test(Mt)){this._input.back();break}Mt==="\\"&&this._input.hasNext()?((ut=this._input.peek())==="x"||ut==="u"?this.has_char_escapes=!0:ut==="\r"&&this._input.peek(1)===`
`&&this._input.next(),Mt+=this._input.next()):vt&&(vt==="${"&&Mt==="$"&&this._input.peek()==="{"&&(Mt+=this._input.next()),vt===Mt&&(Mt+=it==="`"?this._read_string_recursive("}",pt,"`"):this._read_string_recursive("`",pt,"${"),this._input.hasNext()&&(Mt+=this._input.next()))),at+=Mt+=Nt.read()}return at},_e.exports.Tokenizer=ht,_e.exports.TOKEN=Le,_e.exports.positionable_operators=ot.slice(),_e.exports.line_starters=Je.slice()},function(_e){var ne=RegExp.prototype.hasOwnProperty("sticky");function ge(ye){this.__input=ye||"",this.__input_length=this.__input.length,this.__position=0}ge.prototype.restart=function(){this.__position=0},ge.prototype.back=function(){this.__position>0&&(this.__position-=1)},ge.prototype.hasNext=function(){return this.__position<this.__input_length},ge.prototype.next=function(){var ye=null;return this.hasNext()&&(ye=this.__input.charAt(this.__position),this.__position+=1),ye},ge.prototype.peek=function(ye){var xe=null;return ye=ye||0,(ye+=this.__position)>=0&&ye<this.__input_length&&(xe=this.__input.charAt(ye)),xe},ge.prototype.__match=function(ye,xe){ye.lastIndex=xe;var we=ye.exec(this.__input);return!we||ne&&ye.sticky||we.index!==xe&&(we=null),we},ge.prototype.test=function(ye,xe){return xe=xe||0,(xe+=this.__position)>=0&&xe<this.__input_length&&!!this.__match(ye,xe)},ge.prototype.testChar=function(ye,xe){var we=this.peek(xe);return ye.lastIndex=0,we!==null&&ye.test(we)},ge.prototype.match=function(ye){var xe=this.__match(ye,this.__position);return xe?this.__position+=xe[0].length:xe=null,xe},ge.prototype.read=function(ye,xe,we){var ke,Se="";return ye&&(ke=this.match(ye))&&(Se+=ke[0]),!xe||!ke&&ye||(Se+=this.readUntil(xe,we)),Se},ge.prototype.readUntil=function(ye,xe){var we,ke=this.__position;ye.lastIndex=this.__position;var Se=ye.exec(this.__input);return Se?(ke=Se.index,xe&&(ke+=Se[0].length)):ke=this.__input_length,we=this.__input.substring(this.__position,ke),this.__position=ke,we},ge.prototype.readUntilAfter=function(ye){return this.readUntil(ye,!0)},ge.prototype.get_regexp=function(ye,xe){var we=null,ke="g";return xe&&ne&&(ke="y"),typeof ye=="string"&&ye!==""?we=new RegExp(ye,ke):ye&&(we=new RegExp(ye.source,ke)),we},ge.prototype.get_literal_regexp=function(ye){return RegExp(ye.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ge.prototype.peekUntilAfter=function(ye){var xe=this.__position,we=this.readUntilAfter(ye);return this.__position=xe,we},ge.prototype.lookBack=function(ye){var xe=this.__position-1;return xe>=ye.length&&this.__input.substring(xe-ye.length,xe).toLowerCase()===ye},_e.exports.InputScanner=ge},function(_e,ne,ge){var ye=ge(8).InputScanner,xe=ge(3).Token,we=ge(10).TokenStream,ke=ge(11).WhitespacePattern,Se={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},Oe=function(Fe,ze){this._input=new ye(Fe),this._options=ze||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new ke(this._input)};Oe.prototype.tokenize=function(){var Fe;this._input.restart(),this.__tokens=new we,this._reset();for(var ze=new xe(Se.START,""),Le=null,We=[],qe=new we;ze.type!==Se.EOF;){for(Fe=this._get_next_token(ze,Le);this._is_comment(Fe);)qe.add(Fe),Fe=this._get_next_token(ze,Le);qe.isEmpty()||(Fe.comments_before=qe,qe=new we),Fe.parent=Le,this._is_opening(Fe)?(We.push(Le),Le=Fe):Le&&this._is_closing(Fe,Le)&&(Fe.opened=Le,Le.closed=Fe,Le=We.pop(),Fe.parent=Le),Fe.previous=ze,ze.next=Fe,this.__tokens.add(Fe),ze=Fe}return this.__tokens},Oe.prototype._is_first_token=function(){return this.__tokens.isEmpty()},Oe.prototype._reset=function(){},Oe.prototype._get_next_token=function(Fe,ze){this._readWhitespace();var Le=this._input.read(/.+/g);return Le?this._create_token(Se.RAW,Le):this._create_token(Se.EOF,"")},Oe.prototype._is_comment=function(Fe){return!1},Oe.prototype._is_opening=function(Fe){return!1},Oe.prototype._is_closing=function(Fe,ze){return!1},Oe.prototype._create_token=function(Fe,ze){return new xe(Fe,ze,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},Oe.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},_e.exports.Tokenizer=Oe,_e.exports.TOKEN=Se},function(_e){function ne(ge){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=ge}ne.prototype.restart=function(){this.__position=0},ne.prototype.isEmpty=function(){return this.__tokens_length===0},ne.prototype.hasNext=function(){return this.__position<this.__tokens_length},ne.prototype.next=function(){var ge=null;return this.hasNext()&&(ge=this.__tokens[this.__position],this.__position+=1),ge},ne.prototype.peek=function(ge){var ye=null;return ge=ge||0,(ge+=this.__position)>=0&&ge<this.__tokens_length&&(ye=this.__tokens[ge]),ye},ne.prototype.add=function(ge){this.__parent_token&&(ge.parent=this.__parent_token),this.__tokens.push(ge),this.__tokens_length+=1},_e.exports.TokenStream=ne},function(_e,ne,ge){var ye=ge(12).Pattern;function xe(we,ke){ye.call(this,we,ke),ke?this._line_regexp=this._input.get_regexp(ke._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}xe.prototype=new ye,xe.prototype.__set_whitespace_patterns=function(we,ke){we+="\\t ",ke+="\\n\\r",this._match_pattern=this._input.get_regexp("["+we+ke+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+ke+"]")},xe.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var we=this._input.read(this._match_pattern);if(we===" ")this.whitespace_before_token=" ";else if(we){var ke=this.__split(this._newline_regexp,we);this.newline_count=ke.length-1,this.whitespace_before_token=ke[this.newline_count]}return we},xe.prototype.matching=function(we,ke){var Se=this._create();return Se.__set_whitespace_patterns(we,ke),Se._update(),Se},xe.prototype._create=function(){return new xe(this._input,this)},xe.prototype.__split=function(we,ke){we.lastIndex=0;for(var Se=0,Oe=[],Fe=we.exec(ke);Fe;)Oe.push(ke.substring(Se,Fe.index)),Se=Fe.index+Fe[0].length,Fe=we.exec(ke);return Se<ke.length?Oe.push(ke.substring(Se,ke.length)):Oe.push(""),Oe},_e.exports.WhitespacePattern=xe},function(_e){function ne(ge,ye){this._input=ge,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,ye&&(this._starting_pattern=this._input.get_regexp(ye._starting_pattern,!0),this._match_pattern=this._input.get_regexp(ye._match_pattern,!0),this._until_pattern=this._input.get_regexp(ye._until_pattern),this._until_after=ye._until_after)}ne.prototype.read=function(){var ge=this._input.read(this._starting_pattern);return this._starting_pattern&&!ge||(ge+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),ge},ne.prototype.read_match=function(){return this._input.match(this._match_pattern)},ne.prototype.until_after=function(ge){var ye=this._create();return ye._until_after=!0,ye._until_pattern=this._input.get_regexp(ge),ye._update(),ye},ne.prototype.until=function(ge){var ye=this._create();return ye._until_after=!1,ye._until_pattern=this._input.get_regexp(ge),ye._update(),ye},ne.prototype.starting_with=function(ge){var ye=this._create();return ye._starting_pattern=this._input.get_regexp(ge,!0),ye._update(),ye},ne.prototype.matching=function(ge){var ye=this._create();return ye._match_pattern=this._input.get_regexp(ge,!0),ye._update(),ye},ne.prototype._create=function(){return new ne(this._input,this)},ne.prototype._update=function(){},_e.exports.Pattern=ne},function(_e){function ne(ge,ye){ge=typeof ge=="string"?ge:ge.source,ye=typeof ye=="string"?ye:ye.source,this.__directives_block_pattern=new RegExp(ge+/ beautify( \w+[:]\w+)+ /.source+ye,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ge+/\sbeautify\signore:end\s/.source+ye,"g")}ne.prototype.get_directives=function(ge){if(!ge.match(this.__directives_block_pattern))return null;var ye={};this.__directive_pattern.lastIndex=0;for(var xe=this.__directive_pattern.exec(ge);xe;)ye[xe[1]]=xe[2],xe=this.__directive_pattern.exec(ge);return ye},ne.prototype.readIgnored=function(ge){return ge.readUntilAfter(this.__directives_end_ignore_pattern)},_e.exports.Directives=ne},function(_e,ne,ge){var ye=ge(12).Pattern,xe={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function we(ke,Se){ye.call(this,ke,Se),this.__template_pattern=null,this._disabled=Object.assign({},xe),this._excluded=Object.assign({},xe),Se&&(this.__template_pattern=this._input.get_regexp(Se.__template_pattern),this._excluded=Object.assign(this._excluded,Se._excluded),this._disabled=Object.assign(this._disabled,Se._disabled));var Oe=new ye(ke);this.__patterns={handlebars_comment:Oe.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:Oe.starting_with(/{{{/).until_after(/}}}/),handlebars:Oe.starting_with(/{{/).until_after(/}}/),php:Oe.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:Oe.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:Oe.starting_with(/{%/).until_after(/%}/),django_value:Oe.starting_with(/{{/).until_after(/}}/),django_comment:Oe.starting_with(/{#/).until_after(/#}/),smarty:Oe.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:Oe.starting_with(/{\*/).until_after(/\*}/),smarty_literal:Oe.starting_with(/{literal}/).until_after(/{\/literal}/)}}we.prototype=new ye,we.prototype._create=function(){return new we(this._input,this)},we.prototype._update=function(){this.__set_templated_pattern()},we.prototype.disable=function(ke){var Se=this._create();return Se._disabled[ke]=!0,Se._update(),Se},we.prototype.read_options=function(ke){var Se=this._create();for(var Oe in xe)Se._disabled[Oe]=ke.templating.indexOf(Oe)===-1;return Se._update(),Se},we.prototype.exclude=function(ke){var Se=this._create();return Se._excluded[ke]=!0,Se._update(),Se},we.prototype.read=function(){var ke="";ke=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Se=this._read_template();Se;)this._match_pattern?Se+=this._input.read(this._match_pattern):Se+=this._input.readUntil(this.__template_pattern),ke+=Se,Se=this._read_template();return this._until_after&&(ke+=this._input.readUntilAfter(this._until_pattern)),ke},we.prototype.__set_templated_pattern=function(){var ke=[];this._disabled.php||ke.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||ke.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||ke.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(ke.push(this.__patterns.django._starting_pattern.source),ke.push(this.__patterns.django_value._starting_pattern.source),ke.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||ke.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&ke.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+ke.join("|")+")")},we.prototype._read_template=function(){var ke="",Se=this._input.peek();if(Se==="<"){var Oe=this._input.peek(1);this._disabled.php||this._excluded.php||Oe!=="?"||(ke=ke||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||Oe!=="%"||(ke=ke||this.__patterns.erb.read())}else Se==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(ke=(ke=(ke=ke||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(ke=ke||this.__patterns.django_value.read()),this._excluded.django||(ke=(ke=ke||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(ke=(ke=(ke=ke||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return ke},_e.exports.TemplatablePattern=we}],de={},I=function _e(ne){var ge=de[ne];if(ge!==void 0)return ge.exports;var ye=de[ne]={exports:{}};return Q[ne](ye,ye.exports,_e),ye.exports}(0);re=I})();var te=re;(V=function(){return{js_beautify:te}}.apply(G,[]))===void 0||(U.exports=V)})()},1512:function(U,G,V){var re=V(3244),te=V(6906),Q=V(7665),de=V(975),I=V(4991),_e=V(4209),ne=V(9702),ge=V(6757),ye=V(8381),xe=V(5543),we=V(7781),ke=V(8908),Se=V(1286),Oe=V(6768);G=function(ze){return new re(ze)},re.methods({offset:function(){return te(this)},hide:function(){return this.css("display","none")},show:function(){return Q(this),this},first:function(){return G(this[0])},last:function(){return G(ne(this))},get:function(ze){return this[ze]},eq:function(ze){return G(this[ze])},on:function(ze,Le,We){return xe.on(this,ze,Le,We),this},off:function(ze,Le,We){return xe.off(this,ze,Le,We),this},html:function(ze){var Le=_e.html(this,ze);return Se(ze)?Le:this},text:function(ze){var Le=_e.text(this,ze);return Se(ze)?Le:this},val:function(ze){var Le=_e.val(this,ze);return Se(ze)?Le:this},css:function(ze,Le){var We=de(this,ze,Le);return Fe(ze,Le)?We:this},attr:function(ze,Le){var We=I(this,ze,Le);return Fe(ze,Le)?We:this},data:function(ze,Le){var We=ye(this,ze,Le);return Fe(ze,Le)?We:this},rmAttr:function(ze){return I.remove(this,ze),this},remove:function(){return ge(this),this},addClass:function(ze){return we.add(this,ze),this},rmClass:function(ze){return we.remove(this,ze),this},toggleClass:function(ze){return we.toggle(this,ze),this},hasClass:function(ze){return we.has(this,ze)},parent:function(){return G(this[0].parentNode)},append:function(ze){return ke.append(this,ze),this},prepend:function(ze){return ke.prepend(this,ze),this},before:function(ze){return ke.before(this,ze),this},after:function(ze){return ke.after(this,ze),this}});var Fe=function(ze,Le){return Se(Le)&&Oe(ze)};U.exports=G},4991:function(U,G,V){var re=V(1352),te=V(5166),Q=V(6768),de=V(3783),I=V(1286),_e=V(2341);(G=function(ne,ge,ye){if(ne=_e(ne),I(ye)&&Q(ge))return function(we,ke){return we.getAttribute(ke)}(ne[0],ge);var xe=ge;te(xe)||((xe={})[ge]=ye),function(we,ke){de(we,function(Se){de(ke,function(Oe,Fe){Se.setAttribute(Fe,Oe)})})}(ne,xe)}).remove=function(ne,ge){ne=_e(ne),ge=re(ge),de(ne,function(ye){de(ge,function(xe){ye.removeAttribute(xe)})})},U.exports=G},7781:function(U,G,V){var re=V(1352),te=V(6053),Q=V(2341),de=V(6768),I=V(3783);function _e(ne){return de(ne)?ne.split(/\s+/):re(ne)}G={add:function(ne,ge){ne=Q(ne);var ye=_e(ge);I(ne,function(xe){var we=[];I(ye,function(ke){G.has(xe,ke)||we.push(ke)}),we.length!==0&&(xe.className+=(xe.className?" ":"")+we.join(" "))})},has:function(ne,ge){ne=Q(ne);var ye=new RegExp("(^|\\s)"+ge+"(\\s|$)");return te(ne,function(xe){return ye.test(xe.className)})},toggle:function(ne,ge){ne=Q(ne),I(ne,function(ye){if(!G.has(ye,ge))return G.add(ye,ge);G.remove(ye,ge)})},remove:function(ne,ge){ne=Q(ne);var ye=_e(ge);I(ne,function(xe){I(ye,function(we){xe.classList.remove(we)})})}},U.exports=G},975:function(U,G,V){var re=V(6768),te=V(5166),Q=V(7622),de=V(1286),I=V(6341),_e=V(3990),ne=V(2341),ge=V(747),ye=V(3783);G=function(we,ke,Se){if(we=ne(we),de(Se)&&re(ke))return function(Fe,ze){return Fe.style[ge(ze)]||getComputedStyle(Fe,"").getPropertyValue(ze)}(we[0],ke);var Oe=ke;te(Oe)||((Oe={})[ke]=Se),function(Fe,ze){ye(Fe,function(Le){var We=";";ye(ze,function(qe,Ne){Ne=ge.dash(Ne),We+=Ne+":"+function(Ke,ot){return _e(ot)&&!I(xe,Q(Ke))?ot+"px":ot}(Ne,qe)+";"}),Le.style.cssText+=We})}(we,Oe)};var xe=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];U.exports=G},8381:function(U,G,V){var re=V(4991),te=V(6768),Q=V(5166),de=V(3783);V(2341),G=function(I,_e,ne){var ge=_e;return te(_e)&&(ge="data-"+_e),Q(_e)&&(ge={},de(_e,function(ye,xe){ge["data-"+xe]=ye})),re(I,ge,ne)},U.exports=G},5543:function(U,G,V){var re=V(2443),te=V(1286),Q=V(2341),de=V(3783);function I(_e){return function(ne,ge,ye,xe){ne=Q(ne),te(xe)&&(xe=ye,ye=void 0),de(ne,function(we){re[_e](we,ge,ye,xe)})}}G={on:I("add"),off:I("remove")},U.exports=G},8908:function(U,G,V){var re=V(3783),te=V(2341),Q=V(6768);function de(I){return function(_e,ne){_e=te(_e),re(_e,function(ge){if(Q(ne))ge.insertAdjacentHTML(I,ne);else{var ye=ge.parentNode;switch(I){case"beforebegin":ye&&ye.insertBefore(ne,ge);break;case"afterend":ye&&ye.insertBefore(ne,ge.nextSibling);break;case"beforeend":ge.appendChild(ne);break;case"afterbegin":ge.prepend(ne)}}})}}G={before:de("beforebegin"),after:de("afterend"),append:de("beforeend"),prepend:de("afterbegin")},U.exports=G},6906:function(U,G,V){var re=V(2341);G=function(te){var Q=(te=re(te))[0].getBoundingClientRect();return{left:Q.left+window.pageXOffset,top:Q.top+window.pageYOffset,width:Math.round(Q.width),height:Math.round(Q.height)}},U.exports=G},4209:function(U,G,V){var re=V(1286),te=V(3783),Q=V(2341);function de(I){return function(_e,ne){var ge=(_e=Q(_e))[0];if(re(ne))return ge?ge[I]:"";ge&&te(_e,function(ye){ye[I]=ne})}}G={html:de("innerHTML"),text:de("textContent"),val:de("value")},U.exports=G},6757:function(U,G,V){var re=V(3783),te=V(2341);G=function(Q){Q=te(Q),re(Q,function(de){var I=de.parentNode;I&&I.removeChild(de)})},U.exports=G},2341:function(U,G,V){var re=V(6768),te=V(1352),Q=V(3244);G=function(de){return te(re(de)?new Q(de):de)},U.exports=G},7665:function(U,G,V){var re=V(3783),te=V(2341);G=function(de){de=te(de),re(de,function(I){(function(_e){return getComputedStyle(_e,"").getPropertyValue("display")=="none"})(I)&&(I.style.display=function(_e){var ne,ge;return Q[_e]||(ne=document.createElement(_e),document.documentElement.appendChild(ne),ge=getComputedStyle(ne,"").getPropertyValue("display"),ne.parentNode.removeChild(ne),ge=="none"&&(ge="block"),Q[_e]=ge),Q[_e]}(I.nodeName))})};var Q={};U.exports=G},7496:function(U,G,V){var re=V(6329),te=V(1352),Q=V(5022),de=V(7653),I=V(9537),_e=(G=function(ne,ge){return _e.extend(ne,ge)}).Base=function ne(ge,ye,xe){xe=xe||{};var we=ye.className||de(ye,"initialize.name")||"";delete ye.className;var ke=function(){var Se=te(arguments);return this.initialize&&this.initialize.apply(this,Se)||this};if(!I)try{ke=new Function("toArr","return function "+we+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(te)}catch{}return Q(ke,ge),ke.prototype.constructor=ke,ke.extend=function(Se,Oe){return ne(ke,Se,Oe)},ke.inherits=function(Se){Q(ke,Se)},ke.methods=function(Se){return re(ke.prototype,Se),ke},ke.statics=function(Se){return re(ke,Se),ke},ke.methods(ye).statics(xe),ke}(Object,{className:"Base",callSuper:function(ne,ge,ye){return ne.prototype[ge].apply(this,ye)},toString:function(){return this.constructor.name}});U.exports=G},3009:function(U,G,V){var re=V(7496),te=V(6768),Q=V(9882),de=V(3279),I=V(5925),_e=V(5044);G=re({initialize:function(ke){te(ke)&&(ke=G.parse(ke)),this.model=ke.model,this.val=ke.val},toRgb:function(){var ke=this.val;this.model==="hsl"&&(ke=I(ke));var Se="rgba";return ke[3]===1&&(Se="rgb",ke=ke.slice(0,3)),Se+"("+ke.join(", ")+")"},toHex:function(){var ke=this.val;this.model==="hsl"&&(ke=I(ke));var Se=_e.encode(ke.slice(0,3));return Se[0]===Se[1]&&Se[2]===Se[3]&&Se[4]===Se[5]&&(Se=Se[0]+Se[2]+Se[5]),"#"+Se},toHsl:function(){var ke=this.val;this.model==="rgb"&&(ke=de(ke));var Se="hsla";return ke[3]===1&&(Se="hsl",ke=ke.slice(0,3)),ke[1]=ke[1]+"%",ke[2]=ke[2]+"%",Se+"("+ke.join(", ")+")"}},{parse:function(ke){var Se,Oe,Fe=[0,0,0,1],ze="rgb";if(Oe=ke.match(ne))for(Oe=Oe[1],Se=0;Se<3;Se++)Fe[Se]=parseInt(Oe[Se]+Oe[Se],16);else if(Oe=ke.match(ge))for(Oe=Oe[1],Se=0;Se<3;Se++){var Le=2*Se;Fe[Se]=parseInt(Oe.slice(Le,Le+2),16)}else if(Oe=ke.match(ye)){for(Se=0;Se<3;Se++)Fe[Se]=parseInt(Oe[Se+1],0);Oe[4]&&(Fe[3]=parseFloat(Oe[4]))}else if(Oe=ke.match(xe)){for(Se=0;Se<3;Se++)Fe[Se]=Math.round(2.55*parseFloat(Oe[Se+1]));Oe[4]&&(Fe[3]=parseFloat(Oe[4]))}else(Oe=ke.match(we))&&(ze="hsl",Fe=[(parseFloat(Oe[1])%360+360)%360,Q(parseFloat(Oe[2]),0,100),Q(parseFloat(Oe[3]),0,100),Q(parseFloat(Oe[4]),0,1)]);return{val:Fe,model:ze}}});var ne=/^#([a-fA-F0-9]{3})$/,ge=/^#([a-fA-F0-9]{6})$/,ye=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,xe=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,we=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;U.exports=G},1443:function(U,G,V){var re=V(7496),te=V(6257),Q=V(3783),de=V(9677),I=V(8763),_e=V(4675);G=re({initialize:function(){this._events=this._events||{}},on:function(ne,ge){return this._events[ne]=this._events[ne]||[],this._events[ne].push(ge),this},off:function(ne,ge){var ye=this._events;if(te(ye,ne)){var xe=ye[ne].indexOf(ge);return xe>-1&&ye[ne].splice(xe,1),this}},once:function(ne,ge){return this.on(ne,I(ge)),this},emit:function(ne){var ge=this;if(te(this._events,ne)){var ye=de(arguments,1),xe=_e(this._events[ne]);return Q(xe,function(we){return we.apply(ge,ye)},this),this}},removeAllListeners:function(ne){return ne?delete this._events[ne]:this._events={},this}},{mixin:function(ne){Q(["on","off","once","emit","removeAllListeners"],function(ge){ne[ge]=G.prototype[ge]}),ne._events=ne._events||{}}}),U.exports=G},9640:function(U,G,V){var re=V(7496),te=V(4454),Q=V(6472),de=V(3783),I=V(2533);G=re({initialize:function(_e){Q(_e)?(this.size=_e.length,de(_e,function(ne,ge){this[ne]=ge},this)):(this.size=I(_e).length,de(_e,function(ne,ge){this[ge]=ne},this)),te(this)}}),U.exports=G},125:function(U,G,V){var re=V(5128),te=V(615),Q=V(8887),de=V(4400),I=V(4193),_e=V(5166),ne=te("local");G=re.extend({initialize:function(ge,ye){this._name=ge,ye=ye||{};var xe=ne.getItem(ge);try{xe=JSON.parse(xe)}catch{xe={}}_e(xe)||(xe={}),ye=I(xe,ye),this.callSuper(re,"initialize",[ye])},save:function(ge){if(Q(ge))return ne.removeItem(this._name);ne.setItem(this._name,de(ge))}}),U.exports=G},4989:function(U,G,V){var re=V(1443),te=V(9640),Q=V(1352),de=V(1286),I=V(4675),_e=V(6768),ne=V(3990);G=re.extend({initialize:function(ge,ye){this.name=ge,this.setLevel(de(ye)?G.level.DEBUG:ye),this.callSuper(re,"initialize",arguments)},setLevel:function(ge){return _e(ge)?((ge=G.level[ge.toUpperCase()])&&(this._level=ge),this):(ne(ge)&&(this._level=ge),this)},getLevel:function(){return this._level},formatter:function(ge,ye){return ye},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(ge,ye){return(ye=Q(ye)).length===0?this:(this.emit("all",ge,I(ye)),G.level[ge.toUpperCase()]<this._level||(this.emit(ge,I(ye)),(ge==="debug"?console.log:console[ge]).apply(console,this.formatter(ge,ye))),this)}},{level:new te({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),U.exports=G},2765:function(U,G,V){var re=V(1443);G=re.extend({className:"MediaQuery",initialize:function(te){var Q=this;this.callSuper(re,"initialize"),this._mql=window.matchMedia(te),this._mql.addListener(function(){Q.emit(Q.isMatch()?"match":"unmatch")})},isMatch:function(){return this._mql.matches}}),U.exports=G},2289:function(U,G,V){var re=V(7496);(G=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(G=re({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),U.exports=G},242:function(U,G,V){var re=V(8985),te=V(8613),Q=V(5543),de=V(975),I=V(6341),_e=V(6329),ne=V(5610);G=ne.ResizeObserver?re.extend({initialize:function(ge){var ye=this;if(ge._resizeSensor)return ge._resizeSensor;this.callSuper(re,"initialize");var xe=new ne.ResizeObserver(function(){return ye.emit()});xe.observe(ge),ge._resizeSensor=this,this._resizeObserver=xe,this._el=ge},destroy:function(){var ge=this._el;ge._resizeSensor&&(this.rmAllListeners(),delete ge._resizeSensor,this._resizeObserver.unobserve(ge))}}):re.extend({initialize:function(ge){if(ge._resizeSensor)return ge._resizeSensor;this.callSuper(re,"initialize"),this._el=ge,ge._resizeSensor=this,I(["absolute","relative","fixed","sticky"],de(ge,"position"))||de(ge,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var ge=this._el;ge._resizeSensor&&(this.rmAllListeners(),delete ge._resizeSensor,ge.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var ge=this._el,ye={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},xe={position:"absolute",left:"0px",top:"0px",transition:"0s"},we=te("div",{style:xe}),ke=te("div.resize-sensor-expand",{style:ye},we),Se=te("div.resize-sensor-shrink",{style:ye},te("div",{style:_e({width:"200%",height:"200%"},xe)})),Oe=te("div.resize-sensor",{dir:"ltr",style:ye},ke,Se);this._expandEl=ke,this._expandChildEl=we,this._shrinkEl=Se,this._resizeSensorEl=Oe,ge.appendChild(Oe),this._resetExpandShrink()},_bindEvent:function(){var ge=this;Q.on(this._expandEl,"scroll",function(){return ge._onScroll()}),Q.on(this._shrinkEl,"scroll",function(){return ge._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var ge=this._el,ye=ge.offsetWidth,xe=ge.offsetHeight;de(this._expandChildEl,{width:ye+10,height:xe+10}),_e(this._expandEl,{scrollLeft:ye+10,scrollTop:xe+10}),_e(this._shrinkEl,{scrollLeft:ye+10,scrollTop:xe+10})}}),U.exports=G},3244:function(U,G,V){var re=V(7496),te=V(6768),Q=V(3783),de=V(9971),I=new(G=re({className:"Select",initialize:function(_e){return this.length=0,_e?te(_e)?I.find(_e):void(_e.nodeType&&(this[0]=_e,this.length=1)):this},find:function(_e){var ne=new G;return this.each(function(){de(ne,this.querySelectorAll(_e))}),ne},each:function(_e){return Q(this,function(ne,ge){_e.call(ne,ge,ne)}),this}}))(document);U.exports=G},8985:function(U,G,V){var re=V(7496),te=V(4675),Q=V(3783),de=V(1352);G=re({initialize:function(){this._listeners=[]},addListener:function(I){this._listeners.push(I)},rmListener:function(I){var _e=this._listeners.indexOf(I);_e>-1&&this._listeners.splice(_e,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var I=this,_e=de(arguments),ne=te(this._listeners);Q(ne,function(ge){return ge.apply(I,_e)},this)}},{mixin:function(I){Q(["addListener","rmListener","emit","rmAllListeners"],function(_e){I[_e]=G.prototype[_e]}),I._listeners=I._listeners||[]}}),U.exports=G},9001:function(U,G,V){var re=V(7496),te=V(1527);G=re({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(Q){return this._items.push(Q),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(Q,de){de=arguments.length>1?de:this;for(var I=this._items,_e=this.size-1,ne=0;_e>=0;_e--,ne++)Q.call(de,I[_e],ne,this)},toArr:function(){return te(this._items)}}),U.exports=G},5128:function(U,G,V){var re=V(1443),te=V(6768),Q=V(5166),de=V(3783),I=V(1352);G=re.extend({initialize:function(_e){this.callSuper(re,"initialize",arguments),this._data=_e||{},this.save(this._data)},set:function(_e,ne){var ge;te(_e)?(ge={})[_e]=ne:Q(_e)&&(ge=_e);var ye=this;de(ge,function(xe,we){var ke=ye._data[we];ye._data[we]=xe,ye.emit("change",we,xe,ke)}),this.save(this._data)},get:function(_e){var ne=this._data;if(te(_e))return ne[_e];var ge={};return de(_e,function(ye){ge[ye]=ne[ye]}),ge},remove:function(_e){_e=I(_e);var ne=this._data;de(_e,function(ge){delete ne[ge]}),this.save(ne)},clear:function(){this._data={},this.save(this._data)},each:function(_e){de(this._data,_e)},save:function(_e){this._data=_e}}),U.exports=G},6334:function(U,G,V){var re=V(7496),te=V(6329),Q=V(4331),de=V(1745),I=V(8887),_e=V(3783),ne=V(6472),ge=V(1352),ye=V(2727),xe=V(5166),we=V(3367);G=re({className:"Url",initialize:function(Fe){!Fe&&ye&&(Fe=window.location.href),te(this,G.parse(Fe||""))},setQuery:function(Fe,ze){var Le=this.query;return xe(Fe)?_e(Fe,function(We,qe){Le[qe]=we(We)}):Le[Fe]=we(ze),this},rmQuery:function(Fe){var ze=this.query;return ne(Fe)||(Fe=ge(Fe)),_e(Fe,function(Le){delete ze[Le]}),this},toString:function(){return G.stringify(this)}},{parse:function(Fe){var ze={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},Le=Q(Fe),We=!1,qe=Le.match(ke);if(qe&&(qe=qe[0],ze.protocol=qe.toLowerCase(),Le=Le.substr(qe.length)),qe&&(We=Le.substr(0,2)==="//")&&(Le=Le.slice(2),ze.slashes=!0),We){for(var Ne=Le,Ke=-1,ot=0,yt=Oe.length;ot<yt;ot++){var ft=Le.indexOf(Oe[ot]);ft!==-1&&(Ke===-1||ft<Ke)&&(Ke=ft)}Ke>-1&&(Ne=Le.slice(0,Ke),Le=Le.slice(Ke));var _t=Ne.lastIndexOf("@");_t!==-1&&(ze.auth=decodeURIComponent(Ne.slice(0,_t)),Ne=Ne.slice(_t+1)),ze.hostname=Ne;var Je=Ne.match(Se);Je&&((Je=Je[0])!==":"&&(ze.port=Je.substr(1)),ze.hostname=Ne.substr(0,Ne.length-Je.length))}var Qe=Le.indexOf("#");Qe!==-1&&(ze.hash=Le.substr(Qe),Le=Le.slice(0,Qe));var tt=Le.indexOf("?");return tt!==-1&&(ze.query=de.parse(Le.substr(tt+1)),Le=Le.slice(0,tt)),ze.pathname=Le||"/",ze},stringify:function(Fe){var ze=Fe.protocol+(Fe.slashes?"//":"")+(Fe.auth?encodeURIComponent(Fe.auth)+"@":"")+Fe.hostname+(Fe.port?":"+Fe.port:"")+Fe.pathname;return I(Fe.query)||(ze+="?"+de.stringify(Fe.query)),Fe.hash&&(ze+=Fe.hash),ze}});var ke=/^([a-z0-9.+-]+:)/i,Se=/:[0-9]*$/,Oe=["/","?","#"];U.exports=G},8991:function(U,G,V){var re=V(4777),te=V(1214),Q=V(4193),de=V(5166),I=V(1745);function _e(ne,ge,ye,xe){return re(ge)&&(xe=ye,ye=ge,ge={}),{url:ne,data:ge,success:ye,dataType:xe}}(G=function(ne){Q(ne,G.setting);var ge,ye=ne.type,xe=ne.url,we=ne.data,ke=ne.dataType,Se=ne.success,Oe=ne.error,Fe=ne.timeout,ze=ne.complete,Le=ne.xhr();return Le.onreadystatechange=function(){if(Le.readyState===4){var We;clearTimeout(ge);var qe=Le.status;if(qe>=200&&qe<300||qe===304){We=Le.responseText,ke==="xml"&&(We=Le.responseXML);try{ke==="json"&&(We=JSON.parse(We))}catch{}Se(We,Le)}else Oe(Le);ze(Le)}},ye==="GET"?(we=I.stringify(we))&&(xe+=xe.indexOf("?")>-1?"&"+we:"?"+we):ne.contentType==="application/x-www-form-urlencoded"?de(we)&&(we=I.stringify(we)):ne.contentType==="application/json"&&de(we)&&(we=JSON.stringify(we)),Le.open(ye,xe,!0),Le.setRequestHeader("Content-Type",ne.contentType),Fe>0&&(ge=setTimeout(function(){Le.onreadystatechange=te,Le.abort(),Oe(Le,"timeout"),ze(Le)},Fe)),Le.send(ye==="GET"?null:we),Le}).setting={type:"GET",success:te,error:te,complete:te,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},G.get=function(){return G(_e.apply(null,arguments))},G.post=function(){var ne=_e.apply(null,arguments);return ne.type="POST",G(ne)},U.exports=G},1116:function(U,G,V){var re=V(2533),te=V(415),Q=V(42),de=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols;G=function(_e){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ne.prototype,ye=ge===void 0||ge,xe=ne.unenumerable,we=xe!==void 0&&xe,ke=ne.symbol,Se=ke!==void 0&&ke,Oe=[];if((we||Se)&&de){var Fe=re;we&&de&&(Fe=de);do Oe=Oe.concat(Fe(_e)),Se&&I&&(Oe=Oe.concat(I(_e)));while(ye&&(_e=te(_e))&&_e!==Object.prototype);Oe=Q(Oe)}else if(ye)for(var ze in _e)Oe.push(ze);else Oe=re(_e);return Oe},U.exports=G},7913:function(U,G,V){var re=V(3783),te=V(1286),Q=V(4777);G=function(de,I){te(I)&&(I=!0);var _e=Q(I),ne={};return re(de,function(ge){ne[ge]=_e?I(ge):I}),ne},U.exports=G},3901:function(U,G){G={encode:function(de){var I,_e,ne=[],ge=de.length,ye=ge%3;ge-=ye;for(var xe=0;xe<ge;xe+=3)ne.push((I=(de[xe]<<16)+(de[xe+1]<<8)+de[xe+2],re[I>>18&63]+re[I>>12&63]+re[I>>6&63]+re[63&I]));return ge=de.length,ye===1?(_e=de[ge-1],ne.push(re[_e>>2]),ne.push(re[_e<<4&63]),ne.push("==")):ye===2&&(_e=(de[ge-2]<<8)+de[ge-1],ne.push(re[_e>>10]),ne.push(re[_e>>4&63]),ne.push(re[_e<<2&63]),ne.push("=")),ne.join("")},decode:function(de){var I=de.length,_e=0;de[I-2]==="="?_e=2:de[I-1]==="="&&(_e=1);var ne,ge,ye,xe,we,ke,Se,Oe=new Array(3*I/4-_e);for(I=_e>0?I-4:I,ne=0,ge=0;ne<I;ne+=4){var Fe=(ye=de[ne],xe=de[ne+1],we=de[ne+2],ke=de[ne+3],V[ye.charCodeAt(0)]<<18|V[xe.charCodeAt(0)]<<12|V[we.charCodeAt(0)]<<6|V[ke.charCodeAt(0)]);Oe[ge++]=Fe>>16&255,Oe[ge++]=Fe>>8&255,Oe[ge++]=255&Fe}return _e===2?(Se=V[de.charCodeAt(ne)]<<2|V[de.charCodeAt(ne+1)]>>4,Oe[ge++]=255&Se):_e===1&&(Se=V[de.charCodeAt(ne)]<<10|V[de.charCodeAt(ne+1)]<<4|V[de.charCodeAt(ne+2)]>>2,Oe[ge++]=Se>>8&255,Oe[ge++]=255&Se),Oe}};for(var V=[],re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",te=0,Q=re.length;te<Q;te++)V[re.charCodeAt(te)]=te;U.exports=G},5637:function(U,G){G=function(V,re){var te;return function(){return--V>0&&(te=re.apply(this,arguments)),V<=1&&(re=null),te}},U.exports=G},7494:function(U,G,V){var re=V(8935);function te(Q,de){this[de]=Q.replace(/\w/,function(I){return I.toUpperCase()})}G=function(Q){var de=re(Q),I=de[0];return de.shift(),de.forEach(te,de),I+=de.join("")},U.exports=G},1694:function(U,G,V){var re=V(6257),te=V(6472);G=function(I,_e){if(te(I))return I;if(_e&&re(_e,I))return[I];var ne=[];return I.replace(Q,function(ge,ye,xe,we){ne.push(xe?we.replace(de,"$1"):ye||ge)}),ne};var Q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,de=/\\(\\)?/g;U.exports=G},996:function(U,G){G=function(V,re){var te=[];re=re||1;for(var Q=0,de=Math.ceil(V.length/re);Q<de;Q++){var I=Q*re,_e=I+re;te.push(V.slice(I,_e))}return te},U.exports=G},9882:function(U,G,V){var re=V(1286);G=function(te,Q,de){return re(de)&&(de=Q,Q=void 0),!re(Q)&&te<Q?Q:te>de?de:te},U.exports=G},4675:function(U,G,V){var re=V(5166),te=V(6472),Q=V(6329);G=function(de){return re(de)?te(de)?de.slice():Q({},de):de},U.exports=G},550:function(U,G,V){var re=V(5166),te=V(4777),Q=V(6472),de=V(8820);G=function(I){return Q(I)?I.map(function(_e){return G(_e)}):re(I)&&!te(I)?de(I,function(_e){return G(_e)}):I},U.exports=G},8099:function(U,G,V){var re=V(1352);G=function(){for(var te=re(arguments),Q=[],de=0,I=te.length;de<I;de++)Q=Q.concat(re(te[de]));return Q},U.exports=G},6341:function(U,G,V){var re=V(496),te=V(6768),Q=V(1369),de=V(2578);G=function(I,_e){return te(I)?I.indexOf(_e)>-1:(Q(I)||(I=de(I)),re(I,_e)>=0)},U.exports=G},1792:function(U,G,V){var re=V(6768),te=V(3901),Q=V(385),de=V(6472),I=V(2349),_e=V(3085),ne=V(3063);(G=function(ge,ye){var xe;if(ye=ne(ye),re(ge))xe=new Uint8Array(te.decode(ge));else if(Q(ge))ge=ge.slice(0),xe=new Uint8Array(ge);else if(de(ge))xe=new Uint8Array(ge);else if(_e(ge)==="uint8array")xe=ge.slice(0);else if(I(ge)){xe=new Uint8Array(ge.length);for(var we=0;we<ge.length;we++)xe[we]=ge[we]}if(xe)switch(ye){case"base64":xe=te.encode(xe);break;case"arraybuffer":xe=xe.buffer;break;case"array":xe=[].slice.call(xe);break;case"buffer":xe=Buffer.from(xe);break;case"blob":xe=new Blob([xe.buffer])}return xe}).blobToArrBuffer=function(ge){return new Promise(function(ye,xe){var we=new FileReader;we.onload=function(ke){ye(ke.target.result)},we.onerror=function(ke){xe(ke)},we.readAsArrayBuffer(ge)})},U.exports=G},6299:function(U,G,V){var re=V(4193),te=V(3990),Q=V(1286),de=V(1420),I={path:"/"};function _e(ne,ge,ye){if(!Q(ge)){if(ye=re(ye=ye||{},I),te(ye.expires)){var xe=new Date;xe.setMilliseconds(xe.getMilliseconds()+864e5*ye.expires),ye.expires=xe}return ge=encodeURIComponent(ge),ne=encodeURIComponent(ne),document.cookie=[ne,"=",ge,ye.expires&&"; expires="+ye.expires.toUTCString(),ye.path&&"; path="+ye.path,ye.domain&&"; domain="+ye.domain,ye.secure?"; secure":""].join(""),G}for(var we=document.cookie?document.cookie.split("; "):[],ke=ne?void 0:{},Se=0,Oe=we.length;Se<Oe;Se++){var Fe=we[Se],ze=Fe.split("="),Le=de(ze.shift());if(Fe=ze.join("="),Fe=de(Fe),ne===Le){ke=Fe;break}ne||(ke[Le]=Fe)}return ke}G={get:_e,set:_e,remove:function(ne,ge){return(ge=ge||{}).expires=-1,_e(ne,"",ge)}},U.exports=G},2327:function(U,G,V){var re=V(6329),te=V(1214);G=function(Q,de){de=de||te;var I=document.createElement("textarea"),_e=document.body;re(I.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),I.value=Q,_e.appendChild(I),I.setAttribute("readonly",""),I.select(),I.setSelectionRange(0,Q.length);try{document.execCommand("copy"),de()}catch(ne){de(ne)}finally{_e.removeChild(I)}},U.exports=G},1662:function(U,G,V){var re=V(5166);G=function(Q){if(!re(Q))return{};if(te)return te(Q);function de(){}return de.prototype=Q,new de};var te=Object.create;U.exports=G},4427:function(U,G,V){var re=V(1286),te=V(3783);G=function(Q,de){return function(I){return te(arguments,function(_e,ne){if(ne!==0){var ge=Q(_e);te(ge,function(ye){de&&!re(I[ye])||(I[ye]=_e[ye])})}}),I}},U.exports=G},4407:function(U,G,V){var re=V(6768),te=V(2106),Q=V(3367),de=V(5351);G=function(xe,we,ke,Se){arguments.length===1&&re(xe)&&!ge.test(xe)&&(we=xe,xe=void 0),xe=xe||new Date,te(xe)||(xe=new Date(xe));var Oe=(we=Q(G.masks[we]||we||G.masks.default)).slice(0,4);Oe!=="UTC:"&&Oe!=="GMT:"||(we=we.slice(4),ke=!0,Oe==="GMT:"&&(Se=!0));var Fe=ke?"getUTC":"get",ze=xe[Fe+"Date"](),Le=xe[Fe+"Day"](),We=xe[Fe+"Month"](),qe=xe[Fe+"FullYear"](),Ne=xe[Fe+"Hours"](),Ke=xe[Fe+"Minutes"](),ot=xe[Fe+"Seconds"](),yt=xe[Fe+"Milliseconds"](),ft=ke?0:xe.getTimezoneOffset(),_t={d:ze,dd:I(ze),ddd:G.i18n.dayNames[Le],dddd:G.i18n.dayNames[Le+7],m:We+1,mm:I(We+1),mmm:G.i18n.monthNames[We],mmmm:G.i18n.monthNames[We+12],yy:Q(qe).slice(2),yyyy:qe,h:Ne%12||12,hh:I(Ne%12||12),H:Ne,HH:I(Ne),M:Ke,MM:I(Ke),s:ot,ss:I(ot),l:I(yt,3),L:I(Math.round(yt/10)),t:Ne<12?"a":"p",tt:Ne<12?"am":"pm",T:Ne<12?"A":"P",TT:Ne<12?"AM":"PM",Z:Se?"GMT":ke?"UTC":(Q(xe).match(ne)||[""]).pop().replace(ye,""),o:(ft>0?"-":"+")+I(100*Math.floor(Math.abs(ft)/60)+Math.abs(ft)%60,4),S:["th","st","nd","rd"][ze%10>3?0:(ze%100-ze%10!=10)*ze%10]};return we.replace(_e,function(Je){return Je in _t?_t[Je]:Je.slice(1,Je.length-1)})};var I=function(xe){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return de(Q(xe),we,"0")},_e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,ne=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ge=/\d/,ye=/[^-+\dA-Z]/g;G.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},G.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},U.exports=G},6049:function(U,G){G=function(V,re,te){var Q;return function(){var de=this,I=arguments,_e=function(){Q=null,V.apply(de,I)};te||clearTimeout(Q),te&&Q||(Q=setTimeout(_e,re))}},U.exports=G},1420:function(U,G,V){var re=V(3783),te=V(8166),Q=V(2461),de=V(5742);function I(ne){return+("0x"+ne)}G=function(ne){try{return decodeURIComponent(ne)}catch{var ge=ne.match(_e);return ge&&re(ge,function(xe){ne=ne.replace(xe,function(we){we=we.split("%").slice(1);var ke=Q(we,I);return we=te.encode(ke),we=de.decode(we,!0)}(xe))}),ne}};var _e=/(%[a-f0-9]{2})+/gi;U.exports=G},4193:function(U,G,V){G=V(4427)(V(1116),!0),U.exports=G},9803:function(U,G,V){var re=V(1694),te=V(6768),Q=V(5166),de=V(3783);function I(_e,ne,ge){for(var ye=re(ne,_e),xe=ye.pop();ne=ye.shift();)_e[ne]||(_e[ne]={}),_e=_e[ne];Object.defineProperty(_e,xe,ge)}G=function(_e,ne,ge){return te(ne)?I(_e,ne,ge):Q(ne)&&de(ne,function(ye,xe){I(_e,xe,ye)}),_e},U.exports=G},2443:function(U,G,V){var re=V(7496),te=V(6341);function Q(){return!0}function de(){return!1}function I(ne){var ge,ye=this.events[ne.type],xe=_e.call(this,ne,ye);ne=new G.Event(ne);for(var we,ke,Se=0;(ke=xe[Se++])&&!ne.isPropagationStopped();)for(ne.curTarget=ke.el,we=0;(ge=ke.handlers[we++])&&!ne.isImmediatePropagationStopped();)ge.handler.apply(ke.el,[ne])===!1&&(ne.preventDefault(),ne.stopPropagation())}function _e(ne,ge){var ye,xe,we,ke,Se=ne.target,Oe=[],Fe=ge.delegateCount;if(Se.nodeType)for(;Se!==this;Se=Se.parentNode||this){for(xe=[],ke=0;ke<Fe;ke++)xe[ye=(we=ge[ke]).selector+" "]===void 0&&(xe[ye]=te(this.querySelectorAll(ye),Se)),xe[ye]&&xe.push(we);xe.length&&Oe.push({el:Se,handlers:xe})}return Fe<ge.length&&Oe.push({el:this,handlers:ge.slice(Fe)}),Oe}G={add:function(ne,ge,ye,xe){var we,ke={selector:ye,handler:xe};ne.events||(ne.events={}),(we=ne.events[ge])||((we=ne.events[ge]=[]).delegateCount=0,ne.addEventListener(ge,function(){I.apply(ne,arguments)},!1)),ye?we.splice(we.delegateCount++,0,ke):we.push(ke)},remove:function(ne,ge,ye,xe){var we=ne.events;if(we&&we[ge])for(var ke,Se=we[ge],Oe=Se.length;Oe--;)ke=Se[Oe],ye&&ke.selector!=ye||ke.handler!=xe||(Se.splice(Oe,1),ke.selector&&Se.delegateCount--)},Event:re({className:"Event",initialize:function(ne){this.origEvent=ne},isDefaultPrevented:de,isPropagationStopped:de,isImmediatePropagationStopped:de,preventDefault:function(){var ne=this.origEvent;this.isDefaultPrevented=Q,ne&&ne.preventDefault&&ne.preventDefault()},stopPropagation:function(){var ne=this.origEvent;this.isPropagationStopped=Q,ne&&ne.stopPropagation&&ne.stopPropagation()},stopImmediatePropagation:function(){var ne=this.origEvent;this.isImmediatePropagationStopped=Q,ne&&ne.stopImmediatePropagation&&ne.stopImmediatePropagation(),this.stopPropagation()}})},U.exports=G},4541:function(U,G,V){var re=V(2727),te=V(9296),Q=V(2533);G=function(ge){var ye=ne(ge=(ge=ge||(re?navigator.userAgent:"")).toLowerCase(),"msie ");if(ye)return{version:ye,name:"ie"};if(I.test(ge))return{version:11,name:"ie"};for(var xe=0,we=_e.length;xe<we;xe++){var ke=_e[xe],Se=ge.match(de[ke]);if(Se!=null){var Oe=te(Se[1].split(".")[0]);return ke==="opera"&&(Oe=ne(ge,"version/")||Oe),{name:ke,version:Oe}}}return{name:"unknown",version:-1}};var de={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},I=/trident\/7\./,_e=Q(de);function ne(ge,ye){var xe=ge.indexOf(ye);if(xe>-1)return te(ge.substring(xe+ye.length,ge.indexOf(".",xe)))}U.exports=G},6954:function(U,G,V){var re=V(2727);G=function(te){if(te=(te=te||(re?navigator.userAgent:"")).toLowerCase(),Q("windows phone"))return"windows phone";if(Q("win"))return"windows";if(Q("android"))return"android";if(Q("ipad")||Q("iphone")||Q("ipod"))return"ios";if(Q("mac"))return"os x";if(Q("linux"))return"linux";function Q(de){return te.indexOf(de)>-1}return"unknown"},U.exports=G},801:function(U,G,V){var re=V(1137),te=V(288),Q=V(5972),de=V(6341);G=re(function(I,_e){return _e=te(_e),Q(I,function(ne){return!de(_e,ne)})}),U.exports=G},3783:function(U,G,V){var re=V(1369),te=V(2533),Q=V(3955);G=function(de,I,_e){var ne,ge;if(I=Q(I,_e),re(de))for(ne=0,ge=de.length;ne<ge;ne++)I(de[ne],ne,de);else{var ye=te(de);for(ne=0,ge=ye.length;ne<ge;ne++)I(de[ye[ne]],ye[ne],de)}return de},U.exports=G},4858:function(U,G){G=function(V,re){var te=V.length-re.length;return te>=0&&V.indexOf(re,te)===te},U.exports=G},8901:function(U,G,V){var re=V(2533),te=(G=function(ne){return de.test(ne)?ne.replace(I,_e):ne}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Q="(?:"+re(te).join("|")+")",de=new RegExp(Q),I=new RegExp(Q,"g"),_e=function(ne){return te[ne]};U.exports=G},4187:function(U,G,V){var re=V(3367);G=function(Q){return re(Q).replace(te,function(de){switch(de){case'"':case"'":case"\\":return"\\"+de;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var te=/["'\\\n\r\u2028\u2029]/g;U.exports=G},2337:function(U,G){G=function(V){return V.replace(/\W/g,"\\$&")},U.exports=G},642:function(U,G){G=function(V){var re=document.createElement("style");return re.textContent=V,re.type="text/css",document.head.appendChild(re),re},U.exports=G},6329:function(U,G,V){G=V(4427)(V(1116)),U.exports=G},3021:function(U,G,V){var re=V(2533);G=V(4427)(re),U.exports=G},2581:function(U,G,V){var re=V(42),te=V(4331),Q=V(2461),de=V(1352);G=function(_e){var ne=de(_e.match(I));return re(Q(ne,function(ge){return te(ge)}))};var I=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;U.exports=G},5972:function(U,G,V){var re=V(2838),te=V(3783);G=function(Q,de,I){var _e=[];return de=re(de,I),te(Q,function(ne,ge,ye){de(ne,ge,ye)&&_e.push(ne)}),_e},U.exports=G},2244:function(U,G,V){var re=V(2267),te=V(4072),Q=V(1369),de=V(1286);G=function(I,_e,ne){var ge=(Q(I)?te:re)(I,_e,ne);if(!de(ge)&&ge!==-1)return I[ge]},U.exports=G},4072:function(U,G,V){var re=V(2838);G=function(te,Q,de,I){I=I||1,Q=re(Q,de);for(var _e=te.length,ne=I>0?0:_e-1;ne>=0&&ne<_e;){if(Q(te[ne],ne,te))return ne;ne+=I}return-1},U.exports=G},2267:function(U,G,V){var re=V(2838),te=V(2533);G=function(Q,de,I){de=re(de,I);for(var _e,ne=te(Q),ge=0,ye=ne.length;ge<ye;ge++)if(de(Q[_e=ne[ge]],_e,Q))return _e},U.exports=G},288:function(U,G,V){var re=V(6472);function te(Q,de){for(var I,_e=Q.length,ne=-1;_e--;)I=Q[++ne],re(I)?te(I,de):de.push(I);return de}G=function(Q){return te(Q,[])},U.exports=G},4454:function(U,G,V){var re=V(2533);G=function(te){return Object.freeze?Object.freeze(te):(re(te).forEach(function(Q){Object.getOwnPropertyDescriptor(te,Q).configurable&&Object.defineProperty(te,Q,{writable:!1,configurable:!1})}),te)},U.exports=G},415:function(U,G,V){var re=V(5166),te=V(4777),Q=Object.getPrototypeOf,de={}.constructor;G=function(I){if(re(I)){if(Q)return Q(I);var _e=I.__proto__;return _e||_e===null?_e:te(I.constructor)?I.constructor.prototype:I instanceof de?de.prototype:void 0}},U.exports=G},8613:function(U,G,V){var re=V(9833),te=V(6768),Q=V(6930),de=V(7781),I=V(975),_e=V(3783),ne=V(4777);function ge(ye){for(var xe="div",we="",ke=[],Se=[],Oe="",Fe=0,ze=ye.length;Fe<ze;Fe++){var Le=ye[Fe];Le==="#"||Le==="."?(Se.push(Oe),Oe=Le):Oe+=Le}Se.push(Oe);for(var We=0,qe=Se.length;We<qe;We++)(Oe=Se[We])&&(Q(Oe,"#")?we=Oe.slice(1):Q(Oe,".")?ke.push(Oe.slice(1)):xe=Oe);return{tagName:xe,id:we,classes:ke}}G=function(ye,xe){for(var we=arguments.length,ke=new Array(we>2?we-2:0),Se=2;Se<we;Se++)ke[Se-2]=arguments[Se];(re(xe)||te(xe))&&(ke.unshift(xe),xe=null),xe||(xe={});var Oe=ge(ye),Fe=Oe.tagName,ze=Oe.id,Le=Oe.classes,We=document.createElement(Fe);return ze&&We.setAttribute("id",ze),de.add(We,Le),_e(ke,function(qe){te(qe)?We.appendChild(document.createTextNode(qe)):re(qe)&&We.appendChild(qe)}),_e(xe,function(qe,Ne){te(qe)?We.setAttribute(Ne,qe):ne(qe)&&Q(Ne,"on")?We.addEventListener(Ne.slice(2),qe,!1):Ne==="style"&&I(We,qe)}),We},U.exports=G},6257:function(U,G){var V=Object.prototype.hasOwnProperty;G=function(re,te){return V.call(re,te)},U.exports=G},5044:function(U,G,V){var re=V(7348);G={encode:function(te){for(var Q=[],de=0,I=te.length;de<I;de++){var _e=te[de];Q.push((_e>>>4).toString(16)),Q.push((15&_e).toString(16))}return Q.join("")},decode:function(te){var Q=[],de=te.length;re(de)&&de--;for(var I=0;I<de;I+=2)Q.push(parseInt(te.substr(I,2),16));return Q}},U.exports=G},3651:function(U,G,V){var re=V(3783),te=V(4193);G=function(I){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};te(ne,Q),I=I.replace(/</g,"&lt;").replace(/>/g,"&gt;"),_e=de[_e];var ge=0,ye=[];re(_e,function(we){we.language&&(I=I.replace(we.re,function(ke,Se){return Se?(ye[ge++]=G(Se,we.language,ne),ke.replace(Se,"___subtmpl"+(ge-1)+"___")):ke}))}),re(_e,function(we,ke){de[we.language]||(I=I.replace(we.re,"___"+ke+"___$1___end"+ke+"___"))});var xe=[];return I=I.replace(/___(?!subtmpl)\w+?___/g,function(we){var ke=we.substr(3,3)==="end",Se=(ke?we.substr(6):we.substr(3)).replace(/_/g,""),Oe=xe.length>0?xe[xe.length-1]:null;return!ke&&(Oe==null||Se==Oe||Oe!=null&&_e[Oe]&&_e[Oe].embed!=null&&_e[Oe].embed.indexOf(Se)>-1)?(xe.push(Se),we):ke&&Se==Oe?(xe.pop(),we):""}),re(_e,function(we,ke){var Se=ne[we.style]?' style="'.concat(ne[we.style],'"'):"";I=I.replace(new RegExp("___end"+ke+"___","g"),"</span>").replace(new RegExp("___"+ke+"___","g"),'<span class="'.concat(we.style,'"').concat(Se,">"))}),re(_e,function(we){we.language&&(I=I.replace(/___subtmpl\d+___/g,function(ke){var Se=parseInt(ke.replace(/___subtmpl(\d+)___/,"$1"),10);return ye[Se]}))}),I};var Q={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},de={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};de.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:de.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},de.css={comment:de.js.comment,string:de.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},U.exports=G},5925:function(U,G){G=function(re){var te,Q,de,I=re[0]/360,_e=re[1]/100,ne=re[2]/100,ge=[];if(re[3]&&(ge[3]=re[3]),_e===0)return de=V(255*ne),ge[0]=ge[1]=ge[2]=de,ge;for(var ye=2*ne-(te=ne<.5?ne*(1+_e):ne+_e-ne*_e),xe=0;xe<3;xe++)(Q=I+.3333333333333333*-(xe-1))<0&&Q++,Q>1&&Q--,de=6*Q<1?ye+6*(te-ye)*Q:2*Q<1?te:3*Q<2?ye+(te-ye)*(.6666666666666666-Q)*6:ye,ge[xe]=V(255*de);return ge};var V=Math.round;U.exports=G},7483:function(U,G,V){var re=V(8702),te=V(9001),Q=V(6472),de=V(3783),I=V(6768),_e=V(8820),ne=function(ye){return ye.replace(/&quot;/g,'"')},ge=function(ye){return ye.replace(/"/g,"&quot;")};G={parse:function(ye){var xe=[],we=new te;return re(ye,{start:function(ke,Se){Se=_e(Se,function(Oe){return ne(Oe)}),we.push({tag:ke,attrs:Se})},end:function(){var ke=we.pop();if(we.size){var Se=we.peek();Q(Se.content)||(Se.content=[]),Se.content.push(ke)}else xe.push(ke)},comment:function(ke){var Se="<!--".concat(ke,"-->"),Oe=we.peek();Oe?(Oe.content||(Oe.content=[]),Oe.content.push(Se)):xe.push(Se)},text:function(ke){var Se=we.peek();Se?(Se.content||(Se.content=[]),Se.content.push(ke)):xe.push(ke)}}),xe},stringify:function ye(xe){var we="";return Q(xe)?de(xe,function(ke){return we+=ye(ke)}):I(xe)?we=xe:(we+="<".concat(xe.tag),de(xe.attrs,function(ke,Se){return we+=" ".concat(Se,'="').concat(ge(ke),'"')}),we+=">",xe.content&&(we+=ye(xe.content)),we+="</".concat(xe.tag,">")),we}},U.exports=G},6362:function(U,G){G=function(V){return V},U.exports=G},496:function(U,G){G=function(V,re,te){return Array.prototype.indexOf.call(V,re,te)},U.exports=G},5022:function(U,G,V){var re=V(1662);G=function(te,Q){te.prototype=re(Q.prototype)},U.exports=G},7403:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object Arguments]"},U.exports=G},6472:function(U,G,V){var re=V(106);G=Array.isArray?Array.isArray:function(te){return re(te)==="[object Array]"},U.exports=G},385:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object ArrayBuffer]"},U.exports=G},1369:function(U,G,V){var re=V(3990),te=V(4777),Q=Math.pow(2,53)-1;G=function(de){if(!de)return!1;var I=de.length;return re(I)&&I>=0&&I<=Q&&!te(de)},U.exports=G},4696:function(U,G){G=function(V){return V===!0||V===!1},U.exports=G},2727:function(U,G){G=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,U.exports=G},2349:function(U,G,V){var re=V(4777);G=function(te){return te!=null&&(!!te._isBuffer||te.constructor&&re(te.constructor.isBuffer)&&te.constructor.isBuffer(te))},U.exports=G},2520:function(U,G,V){var re=new(V(2765))("(prefers-color-scheme: dark)");G=function(){return re.isMatch()},U.exports=G},2106:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object Date]"},U.exports=G},9833:function(U,G){G=function(V){return!(!V||V.nodeType!==1)},U.exports=G},8887:function(U,G,V){var re=V(1369),te=V(6472),Q=V(6768),de=V(7403),I=V(2533);G=function(_e){return _e==null||(re(_e)&&(te(_e)||Q(_e)||de(_e))?_e.length===0:I(_e).length===0)},U.exports=G},2749:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object Error]"},U.exports=G},4777:function(U,G,V){var re=V(106);G=function(te){var Q=re(te);return Q==="[object Function]"||Q==="[object GeneratorFunction]"||Q==="[object AsyncFunction]"},U.exports=G},9585:function(U,G,V){var re=V(5610),te=re.getComputedStyle,Q=re.document;function de(I,_e){return I.right<_e.left||I.left>_e.right||I.bottom<_e.top||I.top>_e.bottom}G=function(I){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=_e.display,ge=ne===void 0||ne,ye=_e.visibility,xe=ye!==void 0&&ye,we=_e.opacity,ke=we!==void 0&&we,Se=_e.size,Oe=Se!==void 0&&Se,Fe=_e.viewport,ze=Fe!==void 0&&Fe,Le=_e.overflow,We=Le!==void 0&&Le;if(ge)return I.offsetParent===null;var qe=te(I);if(xe&&qe.visibility==="hidden")return!0;if(ke){if(qe.opacity==="0")return!0;for(var Ne=I;Ne=Ne.parentElement;){var Ke=te(Ne);if(Ke.opacity==="0")return!0}}var ot=I.getBoundingClientRect();if(Oe&&(ot.width===0||ot.height===0))return!0;if(ze){var yt={top:0,left:0,right:Q.documentElement.clientWidth,bottom:Q.documentElement.clientHeight};return de(ot,yt)}if(We)for(var ft=I;ft=ft.parentElement;){var _t=te(ft),Je=_t.overflow;if(Je==="scroll"||Je==="hidden"){var Qe=ft.getBoundingClientRect();if(de(ot,Qe))return!0}}return!1},U.exports=G},2246:function(U,G,V){var re=V(3990);G=function(te){return re(te)&&te%1==0},U.exports=G},3708:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object Map]"},U.exports=G},7949:function(U,G,V){var re=V(2533);G=function(te,Q){var de=re(Q),I=de.length;if(te==null)return!I;te=Object(te);for(var _e=0;_e<I;_e++){var ne=de[_e];if(Q[ne]!==te[ne]||!(ne in te))return!1}return!0},U.exports=G},9537:function(U,G,V){var re=V(4777);G=typeof wx!="undefined"&&re(wx.openLocation),U.exports=G},9956:function(U,G,V){var re=V(2727),te=V(1475),Q=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,de=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;G=te(function(I){return I=I||(re?navigator.userAgent:""),Q.test(I)||de.test(I.substr(0,4))}),U.exports=G},9433:function(U,G,V){var re=V(3990);G=function(te){return re(te)&&te!==+te},U.exports=G},8740:function(U,G,V){var re=V(5166),te=V(4777),Q=V(300);G=function(ne){return!!re(ne)&&(te(ne)?I.test(Q(ne)):_e.test(Q(ne)))};var de=Object.prototype.hasOwnProperty,I=new RegExp("^"+Q(de).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_e=/^\[object .+?Constructor\]$/;U.exports=G},2763:function(U,G){G=function(V){return V==null},U.exports=G},1965:function(U,G,V){var re=V(106);G=typeof process!="undefined"&&re(process)==="[object process]",U.exports=G},6156:function(U,G){G=function(V){return V===null},U.exports=G},3990:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object Number]"},U.exports=G},5166:function(U,G){G=function(V){var re=typeof V;return!!V&&(re==="function"||re==="object")},U.exports=G},7348:function(U,G,V){var re=V(2246);G=function(te){return!!re(te)&&te%2!=0},U.exports=G},6997:function(U,G){G=function(V){var re=typeof V;return V==null||re!=="function"&&re!=="object"},U.exports=G},4321:function(U,G,V){var re=V(5166),te=V(4777);G=function(Q){return re(Q)&&te(Q.then)&&te(Q.catch)},U.exports=G},1754:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object RegExp]"},U.exports=G},7470:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object Set]"},U.exports=G},3843:function(U,G){G=function(V){for(var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:G.defComparator,te=0,Q=V.length;te<Q-1;te++)if(re(V[te],V[te+1])>0)return!1;return!0},G.defComparator=function(V,re){return V<re?-1:V>re?1:0},U.exports=G},6768:function(U,G,V){var re=V(106);G=function(te){return re(te)==="[object String]"},U.exports=G},9804:function(U,G){G=function(V){return typeof V=="symbol"},U.exports=G},1286:function(U,G){G=function(V){return V===void 0},U.exports=G},7622:function(U,G,V){var re=V(8935);G=function(te){return re(te).join("-")},U.exports=G},2533:function(U,G,V){var re=V(6257);G=Object.keys?Object.keys:function(te){var Q=[];for(var de in te)re(te,de)&&Q.push(de);return Q},U.exports=G},9702:function(U,G){G=function(V){var re=V?V.length:0;if(re)return V[re-1]},U.exports=G},3988:function(U,G,V){var re=V(2581),te=V(3783),Q=V(2337);function de(I){return'<a href="'+I+'">'+I+"</a>"}G=function(I,_e){_e=_e||de;var ne=re(I);return te(ne,function(ge){I=I.replace(new RegExp(Q(ge),"g"),_e)}),I},U.exports=G},9622:function(U,G){G=function(V,re){var te=document.createElement("script");te.src=V,te.onload=function(){var Q=te.readyState&&te.readyState!="complete"&&te.readyState!="loaded";re&&re(!Q)},te.onerror=function(){re(!1)},document.body.appendChild(te)},U.exports=G},3063:function(U,G,V){var re=V(3367);G=function(te){return re(te).toLocaleLowerCase()},U.exports=G},5351:function(U,G,V){var re=V(4552),te=V(3367);G=function(Q,de,I){var _e=(Q=te(Q)).length;return I=I||" ",_e<de&&(Q=(re(I,de-_e)+Q).slice(-de)),Q},U.exports=G},7767:function(U,G){var V=/^\s+/;G=function(re,te){if(te==null)return re.trimLeft?re.trimLeft():re.replace(V,"");for(var Q,de,I=0,_e=re.length,ne=te.length,ge=!0;ge&&I<_e;)for(ge=!1,Q=-1,de=re.charAt(I);++Q<ne;)if(de===te[Q]){ge=!0,I++;break}return I>=_e?"":re.substr(I,_e)},U.exports=G},2461:function(U,G,V){var re=V(2838),te=V(2533),Q=V(1369);G=function(de,I,_e){I=re(I,_e);for(var ne=!Q(de)&&te(de),ge=(ne||de).length,ye=Array(ge),xe=0;xe<ge;xe++){var we=ne?ne[xe]:xe;ye[xe]=I(de[we],we,de)}return ye},U.exports=G},8820:function(U,G,V){var re=V(2838),te=V(2533);G=function(Q,de,I){de=re(de,I);for(var _e=te(Q),ne=_e.length,ge={},ye=0;ye<ne;ye++){var xe=_e[ye];ge[xe]=de(Q[xe],xe,Q)}return ge},U.exports=G},4491:function(U,G,V){var re=V(3021),te=V(7949);G=function(Q){return Q=re({},Q),function(de){return te(de,Q)}},U.exports=G},5026:function(U,G,V){var re=V(2533);G={getItem:function(ne){return(Q[ne]?te[ne]:this[ne])||null},setItem:function(ne,ge){Q[ne]?te[ne]=ge:this[ne]=ge},removeItem:function(ne){Q[ne]?delete te[ne]:delete this[ne]},key:function(ne){var ge=de();return ne>=0&&ne<ge.length?ge[ne]:null},clear:function(){for(var ne,ge=I(),ye=0;ne=ge[ye];ye++)delete this[ne];ge=_e();for(var xe,we=0;xe=ge[we];we++)delete te[xe]}},Object.defineProperty(G,"length",{enumerable:!1,configurable:!0,get:function(){return de().length}});var te={},Q={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function de(){return I().concat(_e())}function I(){return re(G).filter(function(ne){return!Q[ne]})}function _e(){return re(te)}U.exports=G},1475:function(U,G,V){var re=V(6257);G=function(te,Q){var de=function(I){var _e=de.cache,ne=""+(Q?Q.apply(this,arguments):I);return re(_e,ne)||(_e[ne]=te.apply(this,arguments)),_e[ne]};return de.cache={},de},U.exports=G},9971:function(U,G,V){G=V(1137)(function(re,te){for(var Q=re.length,de=0,I=te.length;de<I;de++)for(var _e=te[de],ne=0,ge=_e.length;ne<ge;ne++)re[Q++]=_e[ne];return re.length=Q,re}),U.exports=G},8573:function(U,G,V){var re=V(3783),te=V(6768),Q=V(1286),de=V(6341),I=V(6472),_e=V(5166),ne=V(1352);(G=function(we,ke){if(Q(we))return Se={},ye(function(Fe,ze){Se[Fe]=ze}),Se;var Se;if(te(we)&&Q(ke)||I(we))return function(Fe){if(!te(Fe)){var ze={};return ye(function(We,qe){de(Fe,We)&&(ze[We]=qe)}),ze}var Le=xe(Fe);if(Le)return Le.getAttribute("content")}(we);var Oe=we;_e(Oe)||((Oe={})[we]=ke),function(Fe){re(Fe,function(ze,Le){var We=xe(Le);if(We)return We.setAttribute("content",ze);(We=ge.createElement("meta")).setAttribute("name",Le),We.setAttribute("content",ze),ge.head.appendChild(We)})}(Oe)}).remove=function(we){we=ne(we),re(we,function(ke){var Se=xe(ke);Se&&ge.head.removeChild(Se)})};var ge=document;function ye(we){var ke=ge.querySelectorAll("meta");re(ke,function(Se){var Oe=Se.getAttribute("name"),Fe=Se.getAttribute("content");Oe&&Fe&&we(Oe,Fe)})}function xe(we){return ge.querySelector('meta[name="'+we+'"]')}U.exports=G},6435:function(U,G){G=function(){for(var V=arguments,re=V[0],te=1,Q=V.length;te<Q;te++)V[te]<re&&(re=V[te]);return re},U.exports=G},4677:function(U,G,V){var re=V(3875),te=V(6768);G=function(_e){if(te(_e)){var ne=_e.match(I);return ne?re(ne[1])*Q[ne[2]||"ms"]:0}for(var ge=_e,ye="ms",xe=0,we=de.length;xe<we;xe++)if(ge>=Q[de[xe]]){ye=de[xe];break}return+(ge/Q[ye]).toFixed(2)+ye};var Q={ms:1,s:1e3};Q.m=60*Q.s,Q.h=60*Q.m,Q.d=24*Q.h,Q.y=365.25*Q.d;var de=["y","d","h","m","s"],I=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;U.exports=G},6339:function(U,G,V){var re=V(6930),te=V(5610),Q=V(3367);function de(I,_e){if(I=Q(I),_e=Q(_e),re(I,"_")&&!re(_e,"_"))return 1;if(re(_e,"_")&&!re(I,"_"))return-1;for(var ne,ge,ye,xe,we=/^\d+|^\D+/;;){if(!I)return _e?-1:0;if(!_e)return 1;if(ne=I.match(we)[0],ge=_e.match(we)[0],ye=!te.isNaN(ne),xe=!te.isNaN(ge),ye&&!xe)return-1;if(xe&&!ye)return 1;if(ye&&xe){var ke=ne-ge;if(ke)return ke;if(ne.length!==ge.length)return+ne||+ge?ge.length-ne.length:ne.length-ge.length}else if(ne!==ge)return ne<ge?-1:1;I=I.substring(ne.length),_e=_e.substring(ge.length)}}G=function(I){return I.sort(de)},U.exports=G},6837:function(U,G){function V(re){if(typeof re!="function")throw new TypeError(re+" is not a function");return re}G=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(re){setImmediate(V(re))}:function(re){setTimeout(V(re),0)},U.exports=G},1214:function(U,G){G=function(){},U.exports=G},8847:function(U,G){G=Date.now?Date.now:function(){return new Date().getTime()},U.exports=G},106:function(U,G){var V=Object.prototype.toString;G=function(re){return V.call(re)},U.exports=G},8763:function(U,G,V){G=V(4198)(V(5637),2),U.exports=G},3955:function(U,G,V){var re=V(1286);G=function(te,Q,de){if(re(Q))return te;switch(de==null?3:de){case 1:return function(I){return te.call(Q,I)};case 3:return function(I,_e,ne){return te.call(Q,I,_e,ne)};case 4:return function(I,_e,ne,ge){return te.call(Q,I,_e,ne,ge)}}return function(){return te.apply(Q,arguments)}},U.exports=G},442:function(U,G,V){var re=V(1443),te=V(7653),Q=window.screen;G={get:function(){if(Q){var de=te(Q,"orientation.type");if(de)return de.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},re.mixin(G),window.addEventListener("orientationchange",function(){setTimeout(function(){G.emit("change",G.get())},200)},!1),U.exports=G},8702:function(U,G,V){var re=V(9702),te=V(7913),Q=V(6930),de=V(3063);G=function(xe,we){for(var ke,Se=[],Oe=xe;xe;){if(ke=!0,re(Se)&&ye[re(Se)]){var Fe=new RegExp("</".concat(re(Se),"[^>]*>")).exec(xe);if(Fe){var ze=xe.substring(0,Fe.index);xe=xe.substring(Fe.index+Fe[0].length),ze&&we.text&&we.text(ze)}ft("",re(Se))}else{if(Q(xe,"<!--")){var Le=xe.indexOf("-->");Le>=0&&(we.comment&&we.comment(xe.substring(4,Le)),xe=xe.substring(Le+3),ke=!1)}else if(Q(xe,"<!")){var We=xe.match(I);We&&(we.text&&we.text(xe.substring(0,We[0].length)),xe=xe.substring(We[0].length),ke=!1)}else if(Q(xe,"</")){var qe=xe.match(_e);qe&&(xe=xe.substring(qe[0].length),qe[0].replace(_e,ft),ke=!1)}else if(Q(xe,"<")){var Ne=xe.match(ne);Ne&&(xe=xe.substring(Ne[0].length),Ne[0].replace(ne,yt),ke=!1)}if(ke){var Ke=xe.indexOf("<"),ot=Ke<0?xe:xe.substring(0,Ke);xe=Ke<0?"":xe.substring(Ke),we.text&&we.text(ot)}}if(Oe===xe)throw Error("Parse Error: "+xe);Oe=xe}function yt(_t,Je,Qe,tt){if(Je=de(Je),(tt=!!tt)||Se.push(Je),we.start){var ht={};Qe.replace(ge,function(it,pt,vt,ut,Nt){ht[pt]=vt||ut||Nt||""}),we.start(Je,ht,tt)}}function ft(_t,Je){var Qe;if(Je=de(Je))for(Qe=Se.length-1;Qe>=0&&Se[Qe]!==Je;Qe--);else Qe=0;if(Qe>=0){for(var tt=Se.length-1;tt>=Qe;tt--)we.end&&we.end(Se[tt]);Se.length=Qe}}ft()};var I=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,_e=/^<\/([-A-Za-z0-9_]+)[^>]*>/,ne=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,ge=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,ye=te("script,style".split(","));U.exports=G},4198:function(U,G,V){var re=V(1137),te=V(1352);G=re(function(Q,de){return function(){var I=[];return I=(I=I.concat(de)).concat(te(arguments)),Q.apply(this,I)}}),U.exports=G},1194:function(U,G,V){var re,te=V(8847),Q=V(5610),de=Q.performance,I=Q.process;if(de&&de.now)G=function(){return de.now()};else if(I&&I.hrtime){var _e=function(){var ne=I.hrtime();return 1e9*ne[0]+ne[1]};re=_e()-1e9*I.uptime(),G=function(){return(_e()-re)/1e6}}else re=te(),G=function(){return te()-re};U.exports=G},3487:function(U,G,V){var re=V(6768),te=V(6472),Q=V(6341),de=V(3783);G=function(I,_e,ne){if(re(_e)&&(_e=[_e]),te(_e)){var ge=_e;_e=function(we,ke){return Q(ge,ke)}}var ye={},xe=function(we,ke){_e(we,ke)&&(ye[ke]=we)};return ne&&(xe=function(we,ke){_e(we,ke)||(ye[ke]=we)}),de(I,xe),ye},U.exports=G},747:function(U,G,V){var re=V(1475),te=V(7494),Q=V(3023),de=V(6257),I=V(7622);(G=re(function(ye){if(ye=ye.replace(ne,""),ye=te(ye),de(ge,ye))return ye;for(var xe=_e.length;xe--;){var we=_e[xe]+Q(ye);if(de(ge,we))return we}return ye})).dash=re(function(ye){var xe=G(ye);return(ne.test(xe)?"-":"")+I(xe)});var _e=["O","ms","Moz","Webkit"],ne=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,ge=document.createElement("p").style;U.exports=G},2994:function(U,G,V){var re=V(6472),te=V(7653);G=function(Q){return re(Q)?function(I){return te(I,Q)}:(de=Q,function(I){return I==null?void 0:I[de]});var de},U.exports=G},1745:function(U,G,V){var re=V(4331),te=V(3783),Q=V(1286),de=V(6472),I=V(2461),_e=V(8887),ne=V(5972),ge=V(5166);G={parse:function(xe){var we={};return xe=re(xe).replace(ye,""),te(xe.split("&"),function(ke){var Se=ke.split("="),Oe=Se.shift(),Fe=Se.length>0?Se.join("="):null;Oe=decodeURIComponent(Oe),Fe=decodeURIComponent(Fe),Q(we[Oe])?we[Oe]=Fe:de(we[Oe])?we[Oe].push(Fe):we[Oe]=[we[Oe],Fe]}),we},stringify:function(xe,we){return ne(I(xe,function(ke,Se){return ge(ke)&&_e(ke)?"":de(ke)?G.stringify(ke,Se):encodeURIComponent(we||Se)+"="+encodeURIComponent(ke)}),function(ke){return ke.length>0}).join("&")}};var ye=/^(\?|#|&)/g;U.exports=G},1571:function(U,G,V){var re,te,Q=V(8847),de=V(2727),I=0;if(de){re=window.requestAnimationFrame,te=window.cancelAnimationFrame;for(var _e=["ms","moz","webkit","o"],ne=0,ge=_e.length;ne<ge&&!re;ne++)re=window[_e[ne]+"RequestAnimationFrame"],te=window[_e[ne]+"CancelAnimationFrame"]||window[_e[ne]+"CancelRequestAnimationFrame"];re&&(re=re.bind(window),te=te.bind(window))}te=te||function(ye){clearTimeout(ye)},(re=re||function(ye){var xe=Q(),we=Math.max(0,16-(xe-I)),ke=setTimeout(function(){ye(xe+we)},we);return I=xe+we,ke}).cancel=te,G=re,U.exports=G},1216:function(U,G){G=function(V,re,te){re==null&&(re=V,V=0);var Q=Math.random();return te||V%1||re%1?Math.min(V+Q*(re-V+parseFloat("1e-"+((Q+"").length-1))),re):V+Math.floor(Q*(re-V+1))},U.exports=G},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(U){for(var G=new Uint8Array(U),V=0;V<U;V++)G[V]=random(0,255);return G},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(U){var G=new Uint8Array(U);return crypto.getRandomValues(G),G})):isNode&&(crypto=eval("require")("crypto"),exports=function(U){return crypto.randomBytes(U)}),module.exports=exports},5852:function(U,G,V){var re=V(2838);G=function(te,Q,de){var I=[];Q=re(Q,de);for(var _e=-1,ne=te.length;++_e<ne;){var ge=te[_e];Q(ge,_e,te)&&(I.push(ge),te.splice(_e,1))}return I},U.exports=G},4552:function(U,G){G=function(V,re){var te="";if(re<1)return"";for(;re>0;)1&re&&(te+=V),re>>=1,V+=V;return te},U.exports=G},1137:function(U,G){G=function(V,re){return re=re==null?V.length-1:+re,function(){var te,Q=Math.max(arguments.length-re,0),de=new Array(Q);for(te=0;te<Q;te++)de[te]=arguments[te+re];switch(re){case 0:return V.call(this,de);case 1:return V.call(this,arguments[0],de);case 2:return V.call(this,arguments[0],arguments[1],de)}var I=new Array(re+1);for(te=0;te<re;te++)I[te]=arguments[te];return I[re]=de,V.apply(this,I)}},U.exports=G},1527:function(U,G){G=function(V){var re=V.length,te=Array(re);re--;for(var Q=0;Q<=re;Q++)te[re-Q]=V[Q];return te},U.exports=G},3279:function(U,G){G=function(Q){var de,I,_e=Q[0]/255,ne=Q[1]/255,ge=Q[2]/255,ye=V(_e,ne,ge),xe=re(_e,ne,ge),we=xe-ye;(de=V(60*(de=xe===ye?0:_e===xe?(ne-ge)/we:ne===xe?2+(ge-_e)/we:4+(_e-ne)/we),360))<0&&(de+=360);var ke=(ye+xe)/2;I=xe===ye?0:ke<=.5?we/(xe+ye):we/(2-xe-ye);var Se=[te(de),te(100*I),te(100*ke)];return Q[3]&&(Se[3]=Q[3]),Se};var V=Math.min,re=Math.max,te=Math.round;U.exports=G},5031:function(U,G,V){var re=V(6299);G=function(te){var Q,de=window.location,I=de.hostname,_e=de.pathname,ne=I.split("."),ge=_e.split("/"),ye="",xe=ge.length;if(!Fe())for(var we=ne.length-1;we>=0;we--){var ke=ne[we];if(ke!==""){if(Fe({domain:ye=ye===""?ke:ke+"."+ye,path:Q="/"})||Fe({domain:ye}))return;for(var Se=0;Se<xe;Se++){var Oe=ge[Se];if(Oe!==""&&(Fe({domain:ye,path:Q+=Oe})||Fe({path:Q})||Fe({domain:ye,path:Q+="/"})||Fe({path:Q})))return}}}function Fe(ze){return ze=ze||{},re.remove(te,ze),!re.get(te)}},U.exports=G},5610:function(U,G,V){G=V(2727)?window:V.g,U.exports=G},3597:function(U,G){G=function(V,re){if(re==null){if(V.trimRight)return V.trimRight();re=` \r
	\f\v`}for(var te,Q,de=V.length-1,I=re.length,_e=!0;_e&&de>=0;)for(_e=!1,te=-1,Q=V.charAt(de);++te<I;)if(Q===re[te]){_e=!0,de--;break}return de>=0?V.substring(0,de+1):""},U.exports=G},2838:function(U,G,V){var re=V(4777),te=V(5166),Q=V(6472),de=V(3955),I=V(4491),_e=V(6362),ne=V(2994);G=function(ge,ye,xe){return ge==null?_e:re(ge)?de(ge,ye,xe):te(ge)&&!Q(ge)?I(ge):ne(ge)},U.exports=G},7653:function(U,G,V){var re=V(1286),te=V(1694);G=function(Q,de){var I;for(I=(de=te(de,Q)).shift();!re(I);){if((Q=Q[I])==null)return;I=de.shift()}return Q},U.exports=G},8079:function(U,G,V){var re=V(1694),te=V(1286),Q=V(3367),de=V(9804),I=V(6768);G=function(_e,ne,ge){var ye,xe=(ne=re(ne,_e)).pop();for(ye=ne.shift();!te(ye);){if(I(ye)||de(ye)||(ye=Q(ye)),ye==="__proto__"||ye==="constructor"||ye==="prototype")return;_e[ye]||(_e[ye]={}),_e=_e[ye],ye=ne.shift()}_e[xe]=ge},U.exports=G},615:function(U,G,V){var re=V(5026);G=function(te){var Q;switch(te=te||"local"){case"local":Q=window.localStorage;break;case"session":Q=window.sessionStorage}try{var de="test-localStorage-"+Date.now();Q.setItem(de,de);var I=Q.getItem(de);if(Q.removeItem(de),I!==de)throw new Error}catch{return re}return Q},U.exports=G},4224:function(U,G,V){var re=V(6334);G=function(te,Q){return te=new re(te),Q=new re(Q),te.port=0|te.port||(te.protocol==="https"?443:80),Q.port=0|Q.port||(Q.protocol==="https"?443:80),te.protocol===Q.protocol&&te.hostname===Q.hostname&&te.port===Q.port},U.exports=G},9677:function(U,G){G=function(V,re,te){var Q=V.length;re=re==null?0:re<0?Math.max(Q+re,0):Math.min(re,Q),te=te==null?Q:te<0?Math.max(Q+te,0):Math.min(te,Q);for(var de=[];re<te;)de.push(V[re++]);return de},U.exports=G},6053:function(U,G,V){var re=V(2838),te=V(1369),Q=V(2533);G=function(de,I,_e){I=re(I,_e);for(var ne=!te(de)&&Q(de),ge=(ne||de).length,ye=0;ye<ge;ye++){var xe=ne?ne[ye]:ye;if(I(de[xe],xe,de))return!0}return!1},U.exports=G},3629:function(U,G,V){var re=V(3843),te=V(4193),Q=V(2533),de=V(6472),I=V(5166);G=function(ne){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(ge,_e);var ye=ge.deep,xe=ge.comparator,we=[],ke=[];function Se(Oe){var Fe,ze=we.indexOf(Oe);if(ze>-1)return ke[ze];if(de(Oe)){Fe=[],we.push(Oe),ke.push(Fe);for(var Le=0,We=Oe.length;Le<We;Le++){var qe=Oe[Le];ye&&I(qe)?Fe[Le]=Se(qe):Fe[Le]=qe}}else{Fe={},we.push(Oe),ke.push(Fe);for(var Ne=Q(Oe).sort(xe),Ke=0,ot=Ne.length;Ke<ot;Ke++){var yt=Ne[Ke],ft=Oe[yt];ye&&I(ft)?Fe[yt]=Se(ft):Fe[yt]=ft}}return Fe}return Se(ne)};var _e={deep:!1,comparator:re.defComparator};U.exports=G},8935:function(U,G){var V=/([A-Z])/g,re=/[_.\- ]+/g,te=/(^-)|(-$)/g;G=function(Q){return(Q=Q.replace(V,"-$1").toLowerCase().replace(re,"-").replace(te,"")).split("-")},U.exports=G},6930:function(U,G){G=function(V,re){return V.indexOf(re)===0},U.exports=G},4400:function(U,G,V){var re=V(3085),te=V(3023),Q=V(3367),de=V(1286),I=V(4777),_e=V(1754);G=function(ne,ge){return JSON.stringify(ne,(ye=[],xe=[],function(we,ke){if(ye.length>0){var Se=ye.indexOf(this);Se>-1?(ye.splice(Se+1),xe.splice(Se,1/0,we)):(ye.push(this),xe.push(we));var Oe=ye.indexOf(ke);Oe>-1&&(ke=ye[0]===ke?"[Circular ~]":"[Circular ~."+xe.slice(0,Oe).join(".")+"]")}else ye.push(ke);return _e(ke)||I(ke)?ke="["+te(re(ke))+" "+Q(ke)+"]":de(ke)&&(ke=null),ke}),ge);var ye,xe},U.exports=G},9963:function(U,G,V){var re=V(4187),te=V(3085),Q=V(3367),de=V(4858),I=V(300),_e=V(2533),ne=V(3783),ge=V(7496),ye=V(415),xe=V(801),we=V(6329),ke=V(4321),Se=V(5972),Oe=V(8847),Fe=V(1116),ze=V(6341),Le=V(5166),We=V(9537),qe=V(1662),Ne=V(6930),Ke=V(8079),ot=V(9803),yt=V(3487),ft=V(1369);function _t(vt,ut,Nt,at){var Mt=[];return ne(ut,function(nn){var Tn,Jt=Object.getOwnPropertyDescriptor(Nt,nn),on=Jt&&Jt.get,Vt=Jt&&Jt.set;if(!at.accessGetter&&on)Tn="(...)";else try{if(Tn=Nt[nn],ze(at.ignore,Tn))return;ke(Tn)&&Tn.catch(function(){})}catch(Rt){Tn=Rt.message}Mt.push("".concat(Je(nn),":").concat(G(Tn,at))),on&&Mt.push("".concat(Je("get "+Q(nn)),":").concat(G(Jt.get,at))),Vt&&Mt.push("".concat(Je("set "+Q(nn)),":").concat(G(Jt.set,at)))}),'"'.concat(vt,'":{')+Mt.join(",")+"}"}function Je(vt){return'"'.concat(tt(vt),'"')}function Qe(vt){return'"'.concat(tt(Q(vt)),'"')}function tt(vt){return re(vt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}G=function(vt){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Nt=ut.self,at=ut.startTime,Mt=at===void 0?Oe():at,nn=ut.timeout,Tn=nn===void 0?0:nn,Jt=ut.depth,on=Jt===void 0?0:Jt,Vt=ut.curDepth,Rt=Vt===void 0?1:Vt,Yt=ut.visitor,un=Yt===void 0?new ht:Yt,yn=ut.unenumerable,In=yn!==void 0&&yn,It=ut.symbol,$t=It!==void 0&&It,an=ut.accessGetter,xn=an!==void 0&&an,En=ut.ignore,$n=En===void 0?[]:En,zn="",vn={visitor:un,unenumerable:In,symbol:$t,accessGetter:xn,depth:on,curDepth:Rt+1,timeout:Tn,startTime:Mt,ignore:$n},wn=te(vt,!1);if(wn==="String")zn=Qe(vt);else if(wn==="Number")zn=Q(vt),de(zn,"Infinity")&&(zn='{"value":"'.concat(zn,'","type":"Number"}'));else if(wn==="NaN")zn='{"value":"NaN","type":"Number"}';else if(wn==="Boolean")zn=vt?"true":"false";else if(wn==="Null")zn="null";else if(wn==="Undefined")zn='{"type":"Undefined"}';else if(wn==="Symbol"){var Sn="Symbol";try{Sn=Q(vt)}catch{}zn='{"value":'.concat(Qe(Sn),',"type":"Symbol"}')}else{if(Tn&&Oe()-Mt>Tn)return Qe("Timeout");if(on&&Rt>on)return Qe("{...}");zn="{";var Jn,tr=[],pr=un.get(vt);if(pr?(Jn=pr.id,tr.push('"reference":'.concat(Jn))):(Jn=un.set(vt),tr.push('"id":'.concat(Jn))),tr.push('"type":"'.concat(wn,'"')),de(wn,"Function")?tr.push('"value":'.concat(Qe(I(vt)))):wn==="RegExp"&&tr.push('"value":'.concat(Qe(vt))),!pr){var Xn=_e(vt);if(Xn.length&&tr.push(_t("enumerable",Xn,Nt||vt,vn)),In){var Gn=xe(Fe(vt,{prototype:!1,unenumerable:!0}),Xn);Gn.length&&tr.push(_t("unenumerable",Gn,Nt||vt,vn))}if($t){var cn=Se(Fe(vt,{prototype:!1,symbol:!0}),function(Kn){return typeof Kn=="symbol"});cn.length&&tr.push(_t("symbol",cn,Nt||vt,vn))}var gn=ye(vt);if(gn&&!ze($n,gn)){var On='"proto":'.concat(G(gn,we(vn,{self:Nt||vt})));tr.push(On)}}zn+=tr.join(",")+"}"}return zn};var ht=ge({initialize:function(){this.id=1,this.visited=[]},set:function(vt){var ut=this.visited,Nt=this.id,at={id:Nt,val:vt};return ut.push(at),this.id++,Nt},get:function(vt){for(var ut=this.visited,Nt=0,at=ut.length;Nt<at;Nt++){var Mt=ut[Nt];if(vt===Mt.val)return Mt}return!1}});function it(vt,ut){var Nt=ut.map;if(!Le(vt))return vt;var at=vt.id,Mt=vt.type,nn=vt.value,Tn=vt.proto,Jt=vt.reference,on=vt.enumerable,Vt=vt.unenumerable;if(Jt)return vt;if(Mt==="Number")return nn==="Infinity"?Number.POSITIVE_INFINITY:nn==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(Mt!=="Undefined"){var Rt,Yt,un;if(Mt==="Function")(Rt=function(){}).toString=function(){return nn},Tn&&Object.setPrototypeOf(Rt,it(Tn,ut));else if(Mt==="RegExp")un=(Yt=nn).lastIndexOf("/"),Rt=new RegExp(Yt.slice(1,un),Yt.slice(un+1));else{var yn;Mt!=="Object"?(yn=We?function(){}:new Function(Mt,""),Tn&&(yn.prototype=it(Tn,ut)),Rt=new yn):Rt=qe(Tn?it(Tn,ut):null)}var In,It={};return on&&(ft(on)&&(In=on.length,delete on.length),on=yt(on,function(an,xn){return!$t(on,an,xn)}),ne(on,function(an,xn){(It[xn]||{}).get||(Rt[xn]=it(an,ut))}),In&&(Rt.length=In)),Vt&&(Vt=yt(Vt,function(an,xn){return!$t(Vt,an,xn)}),ne(Vt,function(an,xn){var En=It[xn]||{};if(!En.get)if(an=it(an,ut),Le(an)&&an.reference){var $n=an.reference;an=function(){return Nt[$n]},En.get=an}else En.value=an;En.enumerable=!1,It[xn]=En})),ot(Rt,It),Nt[at]=Rt,Rt}function $t(an,xn,En){En=Q(En);var $n=!1;return ne(["get","set"],function(zn){if(Ne(En,zn+" ")){var vn=En.replace(zn+" ","");an[vn]&&((xn=it(xn,ut))==="Timeout"&&(xn=pt),Ke(It,[vn,zn],xn),$n=!0)}}),$n}}function pt(){return"Timeout"}G.parse=function(vt){var ut={},Nt=it(JSON.parse(vt),{map:ut});return function(at){ne(at,function(Mt){for(var nn=_e(Mt),Tn=0,Jt=nn.length;Tn<Jt;Tn++){var on=nn[Tn];if(Le(Mt[on])){var Vt=Mt[on].reference;Vt&&at[Vt]&&(Mt[on]=at[Vt])}}var Rt=ye(Mt);Rt&&Rt.reference&&at[Rt.reference]&&Object.setPrototypeOf(Mt,at[Rt.reference])})}(ut),Nt},U.exports=G},1907:function(U,G,V){var re=V(6768),te=V(1352),Q=V(6435),de=V(2461),I=V(4331);G=function(ne){re(ne)&&(ne=te(ne));for(var ge="",ye=arguments.length,xe=new Array(ye>1?ye-1:0),we=1;we<ye;we++)xe[we-1]=arguments[we];for(var ke=0,Se=ne.length;ke<Se;ke++)ge+=ne[ke],xe[ke]&&(ge+=xe[ke]);for(var Oe=ge.split(`
`),Fe=[],ze=0,Le=Oe.length;ze<Le;ze++){var We=Oe[ze],qe=We.match(_e);qe&&Fe.push(qe[1].length)}var Ne=Fe.length>0?Q.apply(null,Fe):0;return I(de(Oe,function(Ke){return Ke[0]===" "?Ke.slice(Ne):Ke}).join(`
`))};var _e=/^(\s+)\S+/;U.exports=G},2439:function(U,G,V){var re=V(6049);G=function(te,Q){return re(te,Q,!0)},U.exports=G},1352:function(U,G,V){var re=V(1369),te=V(2461),Q=V(6472),de=V(6768);G=function(I){return I?Q(I)?I:re(I)&&!de(I)?te(I):[I]:[]},U.exports=G},4891:function(U,G){var V=document;if(G=function(te){var Q=V.createElement("body");return Q.innerHTML=te,Q.childNodes[0]},V.createRange&&V.body){var re=V.createRange();re.selectNode(V.body),re.createContextualFragment&&(G=function(te){return re.createContextualFragment(te).childNodes[0]})}U.exports=G},9296:function(U,G,V){var re=V(3875);G=function(te){return te?(te=re(te))-te%1:te===0?te:0},U.exports=G},3875:function(U,G,V){var re=V(3990),te=V(5166),Q=V(4777),de=V(6768);G=function(I){if(re(I))return I;if(te(I)){var _e=Q(I.valueOf)?I.valueOf():I;I=te(_e)?_e+"":_e}return de(I)?+I:I===0?I:+I},U.exports=G},300:function(U,G,V){var re=V(2763);G=function(Q){if(re(Q))return"";try{return te.call(Q)}catch{}try{return Q+""}catch{}return""};var te=Function.prototype.toString;U.exports=G},3367:function(U,G){G=function(V){return V==null?"":V.toString()},U.exports=G},4331:function(U,G,V){var re=V(7767),te=V(3597);G=function(Q,de){return de==null&&Q.trim?Q.trim():re(te(Q,de),de)},U.exports=G},7756:function(U,G,V){var re=V(4193),te=V(1286);G=function(de,I){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};re(_e,Q);var ne=_e.ellipsis,ge=_e.separator,ye=de.length;if(I>ye)return de;var xe=I-ne.length;if(xe<1)return ne;var we=de.slice(0,xe);if(te(ge))return we+ne;if(de.indexOf(ge,xe)!==xe){var ke=we.lastIndexOf(ge);ke>-1&&(we=we.slice(0,ke))}return we+ne};var Q={ellipsis:"..."};U.exports=G},3085:function(U,G,V){var re=V(106),te=V(9433),Q=V(3063),de=V(2349);G=function(_e){var ne,ge=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return _e===null&&(ne="Null"),_e===void 0&&(ne="Undefined"),te(_e)&&(ne="NaN"),de(_e)&&(ne="Buffer"),ne||(ne=re(_e).match(I))&&(ne=ne[1]),ne?ge?Q(ne):ne:""};var I=/^\[object\s+(.*?)]$/;U.exports=G},9016:function(U,G){G={},U.exports=G},8166:function(U,G,V){var re=V(996),te=V(2461);G={encode:function(Q){return Q.length<32768?String.fromCodePoint.apply(String,Q):te(re(Q,32767),function(de){return String.fromCodePoint.apply(String,de)}).join("")},decode:function(Q){for(var de=[],I=0,_e=Q.length;I<_e;){var ne=Q.charCodeAt(I++);if(ne>=55296&&ne<=56319&&I<_e){var ge=Q.charCodeAt(I++);(64512&ge)==56320?de.push(((1023&ne)<<10)+(1023&ge)+65536):(de.push(ne),I--)}else de.push(ne)}return de}},U.exports=G},5484:function(U,G,V){var re=V(2727),te=V(8985),Q=!1;function de(I){Q&&G.emit(I)}G={start:function(){Q=!0},stop:function(){Q=!1}},te.mixin(G),re?(window.addEventListener("error",function(I){de(I.error)}),window.addEventListener("unhandledrejection",function(I){de(I.reason)})):(process.on("uncaughtException",de),process.on("unhandledRejection",de)),U.exports=G},5229:function(U,G){var V=0;G=function(re){var te=++V+"";return re?re+te:te},U.exports=G},42:function(U,G,V){var re=V(5972);function te(Q,de){return Q===de}G=function(Q,de){return de=de||te,re(Q,function(I,_e,ne){for(var ge=ne.length;++_e<ge;)if(de(I,ne[_e]))return!1;return!0})},U.exports=G},4502:function(U,G,V){var re=V(3367);G=function(te){return re(te).toLocaleUpperCase()},U.exports=G},3023:function(U,G){G=function(V){return V.length<1?V:V[0].toUpperCase()+V.slice(1)},U.exports=G},5742:function(U,G,V){var re=V(8166);G={encode:function(Oe){for(var Fe=re.decode(Oe),ze="",Le=0,We=Fe.length;Le<We;Le++)ze+=we(Fe[Le]);return ze},decode:function(Oe,Fe){te=re.decode(Oe),Q=0,de=te.length,I=0,_e=0,ne=0,ge=128,ye=191;for(var ze,Le=[];(ze=ke(Fe))!==!1;)Le.push(ze);return re.encode(Le)}};var te,Q,de,I,_e,ne,ge,ye,xe=String.fromCharCode;function we(Oe){if((4294967168&Oe)==0)return xe(Oe);var Fe,ze,Le="";for((4294965248&Oe)==0?(Fe=1,ze=192):(4294901760&Oe)==0?(Fe=2,ze=224):(4292870144&Oe)==0&&(Fe=3,ze=240),Le+=xe((Oe>>6*Fe)+ze);Fe>0;)Le+=xe(128|63&Oe>>6*(Fe-1)),Fe--;return Le}function ke(Oe){for(;;){if(Q>=de&&ne){if(Oe)return Se();throw new Error("Invalid byte index")}if(Q===de)return!1;var Fe=te[Q];if(Q++,ne){if(Fe<ge||Fe>ye){if(Oe)return Q--,Se();throw new Error("Invalid continuation byte")}if(ge=128,ye=191,I=I<<6|63&Fe,++_e===ne){var ze=I;return I=0,ne=0,_e=0,ze}}else{if((128&Fe)==0)return Fe;if((224&Fe)==192)ne=1,I=31&Fe;else if((240&Fe)==224)Fe===224&&(ge=160),Fe===237&&(ye=159),ne=2,I=15&Fe;else{if((248&Fe)!=240){if(Oe)return Se();throw new Error("Invalid UTF-8 detected")}Fe===240&&(ge=144),Fe===244&&(ye=143),ne=3,I=7&Fe}}}}function Se(){var Oe=Q-_e-1;return Q=Oe+1,I=0,ne=0,_e=0,ge=128,ye=191,te[Oe]}U.exports=G},5936:function(U,G,V){var re=V(3366);G=function(){var de=re(16);return de[6]=15&de[6]|64,de[8]=63&de[8]|128,te[de[0]]+te[de[1]]+te[de[2]]+te[de[3]]+"-"+te[de[4]]+te[de[5]]+"-"+te[de[6]]+te[de[7]]+"-"+te[de[8]]+te[de[9]]+"-"+te[de[10]]+te[de[11]]+te[de[12]]+te[de[13]]+te[de[14]]+te[de[15]]};for(var te=[],Q=0;Q<256;Q++)te[Q]=(Q+256).toString(16).substr(1);U.exports=G},2578:function(U,G,V){var re=V(3783);G=function(te){var Q=[];return re(te,function(de){Q.push(de)}),Q},U.exports=G},3514:function(U,G,V){var re=V(8573),te=V(9882),Q=V(4331),de=V(3783),I=V(2461),_e=V(9433);G=function(){var ne=re("viewport");if(!ne)return 1;ne=I(ne.split(","),function(ke){return Q(ke)});var ge=.25,ye=5,xe=1;de(ne,function(ke){var Se=(ke=ke.split("="))[0];ke=ke[1],Se==="initial-scale"&&(xe=+ke),Se==="maximum-scale"&&(ye=+ke),Se==="minimum-scale"&&(ge=+ke)});var we=te(xe,ge,ye);return _e(we)?1:we},U.exports=G},5491:function(U,G,V){var re=V(4198);G=function(te,Q){return re(Q,te)},U.exports=G},8933:function(U,G){G=function(V){for(var re=[],te=document.evaluate(V,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),Q=0;Q<te.snapshotLength;Q++)re.push(te.snapshotItem(Q));return re},U.exports=G},4095:function(U,G,V){var re,te=this&&this.__extends||(re=function(Xn,Gn){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cn,gn){cn.__proto__=gn}||function(cn,gn){for(var On in gn)Object.prototype.hasOwnProperty.call(gn,On)&&(cn[On]=gn[On])},re(Xn,Gn)},function(Xn,Gn){if(typeof Gn!="function"&&Gn!==null)throw new TypeError("Class extends value "+String(Gn)+" is not a constructor or null");function cn(){this.constructor=Xn}re(Xn,Gn),Xn.prototype=Gn===null?Object.create(Gn):(cn.prototype=Gn.prototype,new cn)}),Q=this&&this.__makeTemplateObject||function(Xn,Gn){return Object.defineProperty?Object.defineProperty(Xn,"raw",{value:Gn}):Xn.raw=Gn,Xn},de=this&&this.__createBinding||(Object.create?function(Xn,Gn,cn,gn){gn===void 0&&(gn=cn);var On=Object.getOwnPropertyDescriptor(Gn,cn);On&&!("get"in On?!Gn.__esModule:On.writable||On.configurable)||(On={enumerable:!0,get:function(){return Gn[cn]}}),Object.defineProperty(Xn,gn,On)}:function(Xn,Gn,cn,gn){gn===void 0&&(gn=cn),Xn[gn]=Gn[cn]}),I=this&&this.__setModuleDefault||(Object.create?function(Xn,Gn){Object.defineProperty(Xn,"default",{enumerable:!0,value:Gn})}:function(Xn,Gn){Xn.default=Gn}),_e=this&&this.__importStar||function(Xn){if(Xn&&Xn.__esModule)return Xn;var Gn={};if(Xn!=null)for(var cn in Xn)cn!=="default"&&Object.prototype.hasOwnProperty.call(Xn,cn)&&de(Gn,Xn,cn);return I(Gn,Xn),Gn},ne=this&&this.__read||function(Xn,Gn){var cn=typeof Symbol=="function"&&Xn[Symbol.iterator];if(!cn)return Xn;var gn,On,Kn=cn.call(Xn),_r=[];try{for(;(Gn===void 0||Gn-- >0)&&!(gn=Kn.next()).done;)_r.push(gn.value)}catch(kr){On={error:kr}}finally{try{gn&&!gn.done&&(cn=Kn.return)&&cn.call(Kn)}finally{if(On)throw On.error}}return _r},ge=this&&this.__importDefault||function(Xn){return Xn&&Xn.__esModule?Xn:{default:Xn}};Object.defineProperty(G,"__esModule",{value:!0});var ye,xe=ge(V(2925)),we=_e(V(4030)),ke=ge(V(3467)),Se=ge(V(8719)),Oe=ge(V(242)),Fe=ge(V(5166)),ze=ge(V(6768)),Le=ge(V(2749)),We=ge(V(6997)),qe=ge(V(4193)),Ne=ge(V(9833)),Ke=ge(V(3367)),ot=ge(V(3875)),yt=ge(V(9296)),ft=ge(V(8099)),_t=ge(V(8901)),Je=ge(V(6156)),Qe=ge(V(1286)),tt=ge(V(4777)),ht=ge(V(1352)),it=ge(V(6472)),pt=ge(V(42)),vt=ge(V(6341)),ut=ge(V(8887)),Nt=ge(V(4675)),at=ge(V(3783)),Mt=ge(V(2461)),nn=ge(V(4331)),Tn=ge(V(3063)),Jt=ge(V(9585)),on=ge(V(2533)),Vt=ge(V(1512)),Rt=ge(V(8613)),Yt=ge(V(1443)),un=ge(V(6049)),yn=ge(V(4400)),In=ge(V(2327)),It=ge(V(9963)),$t=ge(V(6837)),an=ge(V(3988)),xn=ge(V(3651)),En=ge(V(6053)),$n=V(1893),zn=ge(V(1907)),vn=ge(V(4891)),wn=ge(V(5229)),Sn=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,Jn={comment:"",string:"",number:"",keyword:"",operator:""},tr=function(Xn){function Gn(cn,gn){var On=gn.type,Kn=On===void 0?"log":On,_r=gn.args,kr=_r===void 0?[]:_r,Dr=gn.id,xr=gn.group,Lr=gn.targetGroup,Br=gn.header,Vr=gn.ignoreFilter,jr=Vr!==void 0&&Vr,Oi=gn.accessGetter,Di=gn.unenumerable,Ai=gn.lazyEvaluation,Cr=Xn.call(this)||this;return Cr.container=(0,Rt.default)("div"),Cr.count=1,Cr.width=0,Cr.height=0,Cr.isHidden=!1,Cr.columns=[],Cr.elements={},Cr.objects={},Cr.console=cn,Cr.type=Kn,Cr.group=xr,Cr.targetGroup=Lr,Cr.args=kr,Cr.id=Dr,Cr.header=Br,Cr.ignoreFilter=jr,Cr.collapsed=!1,Cr.container.log=Cr,Cr.height=0,Cr.width=0,Cr.$container=(0,Vt.default)(Cr.container),Cr.accessGetter=Oi,Cr.unenumerable=Di,Cr.lazyEvaluation=Ai,Cr.resizeSensor=new Oe.default(Cr.container),Cr.onResize=(0,un.default)(function(){(0,Jt.default)(Cr.container)?Cr.isHidden=!0:(Cr.isHidden||Cr.updateSize(!1),Cr.isHidden=!1)},16),Cr.formatMsg(),Cr.group&&Cr.checkGroup(),Cr.bindEvent(),Cr}return te(Gn,Xn),Gn.prototype.checkGroup=function(){for(var cn=this.group,gn=!1;cn;){if(cn.collapsed){gn=!0;break}cn=cn.parent}return gn!==this.collapsed&&(this.collapsed=gn,!0)},Gn.prototype.updateIcon=function(cn){var gn=this.console.c;return this.$container.find(gn(".icon")).rmAttr("class").addClass([gn("icon"),gn("icon-".concat(cn))]),this},Gn.prototype.addCount=function(){this.count++;var cn=this.$container,gn=this.count,On=this.console.c,Kn=cn.find(On(".count-container")),_r=cn.find(On(".icon-container")),kr=Kn.find(On(".count"));return gn===2&&Kn.rmClass(On("hidden")),kr.text((0,Ke.default)(gn)),_r.addClass(On("hidden")),this},Gn.prototype.groupEnd=function(){var cn=this.$container,gn=this.console.c;return cn.find(".".concat(gn("nesting-level"),":not(.").concat(gn("group-closed"),")")).last().addClass(gn("group-closed")),this},Gn.prototype.updateTime=function(cn){var gn=this.$container.find(this.console.c(".time-container"));return this.header&&(gn.find("span").eq(0).text(cn),this.header.time=cn),this},Gn.prototype.isAttached=function(){return!!this.container.parentNode},Gn.prototype.isSimple=function(){return!(0,En.default)(this.args,function(cn){return(0,Fe.default)(cn)})},Gn.prototype.updateSize=function(cn){cn===void 0&&(cn=!0);var gn=this.container.getBoundingClientRect(),On=gn.width,Kn=gn.height-1;this.height!==Kn&&(this.height=Kn,cn||this.emit("updateHeight")),this.width!==On&&(this.width=On)},Gn.prototype.html=function(){return this.container.outerHTML},Gn.prototype.text=function(){return this.content.textContent||""},Gn.prototype.select=function(){this.$container.addClass(this.console.c("selected"))},Gn.prototype.deselect=function(){this.$container.rmClass(this.console.c("selected"))},Gn.prototype.copy=function(){var cn=this.args,gn="";(0,at.default)(cn,function(On,Kn){Kn!==0&&(gn+=" "),(0,Fe.default)(On)?gn+=(0,yn.default)(On):gn+=(0,Ke.default)(On)}),(0,In.default)(gn)},Gn.prototype.bindEvent=function(){var cn=this,gn=this.console.c,On=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",gn(".dom-viewer"),function(Kn){return Kn.stopPropagation()}).on("click",gn(".preview"),function(Kn){Kn.stopPropagation(),On.renderObjectViewer(this)}).on("click",function(){return cn.click()})},Gn.prototype.renderEl=function(){var cn=this.elements,gn=this.console.c,On=this;this.$container.find(gn(".dom-viewer")).each(function(){var Kn=(0,Vt.default)(this).data("id");new Se.default(this,{node:cn[Kn],theme:On.console.getOption("theme")})})},Gn.prototype.renderObjectViewer=function(cn){var gn=this,On=gn.console,Kn=gn.unenumerable,_r=gn.accessGetter,kr=gn.lazyEvaluation,Dr=On.c,xr=(0,Vt.default)(cn),Lr=xr.data("id");if(Lr){var Br=this.objects[Lr],Vr=xr.find(Dr(".json"));if(Vr.hasClass(Dr("hidden"))){if(Vr.data("init")!=="true"){if(kr){var jr=new we.default(Vr.get(0),{unenumerable:Kn,accessGetter:_r});jr.setOption("theme",On.getOption("theme")),jr.set(Br)}else{var Oi=new we.Static(Vr.get(0));Oi.setOption("theme",On.getOption("theme")),Oi.set(Br)}Vr.data("init","true")}Vr.rmClass(Dr("hidden"))}else Vr.addClass(Dr("hidden"))}},Gn.prototype.renderTable=function(cn){var gn=this,On="__LunaConsoleValue",Kn=this,_r=Kn.columns,kr=Kn.$container,Dr=Kn.console,xr=Dr.c,Lr=kr.find(xr(".data-grid")),Br=cn[0],Vr=new ke.default(Lr.get(0),{columns:(0,ft.default)([{id:"(index)",title:"(index)",sortable:!0}],(0,Mt.default)(_r,function(jr){return{id:jr,title:jr,sortable:!0}})),theme:Dr.getOption("theme")});(0,at.default)(Br,function(jr,Oi){var Di={"(index)":(0,Ke.default)(Oi)};_r.forEach(function(Ai){(0,Fe.default)(jr)?Di[Ai]=Ai===On?"":gn.formatTableVal(jr[Ai]):(0,We.default)(jr)&&(Di[Ai]=Ai===On?gn.formatTableVal(jr):"")}),Vr.append(Di)})},Gn.prototype.extractObj=function(cn,gn,On){gn===void 0&&(gn={});var Kn=this.accessGetter,_r=this.unenumerable;(0,qe.default)(gn,{accessGetter:Kn,unenumerable:_r,symbol:_r,timeout:1e3}),function(kr,Dr,xr){var Lr=(0,It.default)(kr,Dr);(0,$t.default)(function(){return xr(Lr)})}(cn,gn,function(kr){return On(JSON.parse(kr))})},Gn.prototype.click=function(){var cn=this,gn=cn.type,On=cn.$container,Kn=cn.console,_r=Kn.c;switch(gn){case"log":case"warn":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Kn.toggleGroup(this);break;case"error":On.find(_r(".stack")).toggleClass(_r("hidden"))}},Gn.prototype.formatMsg=function(){var cn=this.args,gn=this,On=gn.type,Kn=gn.id,_r=gn.header,kr=gn.group,Dr=this.console.c;cn=(0,Nt.default)(cn);var xr,Lr,Br="";switch(On!=="group"&&On!=="groupCollapsed"||cn.length===0&&(cn=["console.group"]),On){case"log":case"debug":Br=this.formatCommon(cn);break;case"dir":Br=this.formatDir(cn);break;case"warn":xr="warn",Br=this.formatCommon(cn);break;case"error":(0,ze.default)(cn[0])&&cn.length!==1&&(cn=this.substituteStr(cn)),Lr=cn[0],xr="error",Lr=(0,Le.default)(Lr)?Lr:new Error(this.formatCommon(cn)),Br=this.formatErr(Lr);break;case"table":Br=this.formatTable(cn);break;case"html":Br=cn[0];break;case"input":Br=this.formatJs(cn[0]),xr="input";break;case"output":Br=this.formatCommon(cn),xr="output";break;case"groupCollapsed":Br=this.formatCommon(cn),xr="caret-right";break;case"group":Br=this.formatCommon(cn),xr="caret-down"}(0,vt.default)(["log","debug","warn"],On)&&this.isSimple()&&(Br=(0,an.default)(Br,function(Vr){return'<a href="'.concat(Vr,'" target="_blank">').concat(Vr,"</a>")})),Br=this.render({msg:Br,type:On,icon:xr,id:Kn,header:_r,group:kr}),this.$container.addClass("".concat(Dr("log-container"))).html(Br),On==="table"&&((0,ut.default)(this.columns)||this.renderTable(cn)),(0,ut.default)(this.elements)||this.renderEl(),this.$content=this.$container.find(Dr(".log-content")),this.content=this.$content.get(0)},Gn.prototype.render=function(cn){var gn=this.console.c,On="",Kn="";if(cn.group)for(var _r=cn.group.indentLevel,kr=0;kr<_r;kr++)Kn+='<div class="'.concat(gn("nesting-level"),'"></div>');cn.header&&(On+=(0,zn.default)(ye||(ye=Q([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`],[`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),gn("header"),Kn,gn("time-from-container"),cn.header.time,cn.header.from));var Dr="";return cn.icon&&(Dr='<div class="'.concat(gn("icon-container"),'"><span class="').concat(gn("icon icon-"+cn.icon),'"></span></div>')),On+=`
    <div class="`.concat(gn(cn.type+" log-item"),`">
      `).concat(Kn,`
      `).concat(Dr,`
      <div class="`).concat(gn("count-container hidden"),`">
        <div class="`).concat(gn("count"),`"></div>
      </div>    
      <div class="`).concat(gn("log-content-wrapper"),`">
        <div class="`).concat(gn("log-content"),'">').concat(cn.msg,`</div>
      </div>
    </div>`)},Gn.prototype.formatTable=function(cn){var gn=cn[0],On=cn[1],Kn=[];return(0,ze.default)(On)&&(On=(0,ht.default)(On)),(0,it.default)(On)||(On=null),(0,Fe.default)(gn)?((0,at.default)(gn,function(_r){(0,We.default)(_r)?Kn.push("__LunaConsoleValue"):(0,Fe.default)(_r)&&(Kn=Kn.concat((0,on.default)(_r)))}),(Kn=(0,pt.default)(Kn)).sort(),On&&(Kn=Kn.filter(function(_r){return(0,vt.default)(On,_r)})),Kn.length>20&&(Kn=Kn.slice(0,20)),(0,ut.default)(Kn)?this.formatCommon(cn):(this.columns=Kn,this.console.c('<div class="data-grid"></div>')+this.formatPreview(gn))):this.formatCommon(cn)},Gn.prototype.formatErr=function(cn){var gn=cn.stack?cn.stack.split(`
`):[],On="".concat(cn.message||gn[0],"<br/>");return gn=gn.map(function(Kn){return(0,_t.default)(Kn)}),On+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(gn.slice(1).join("<br/>"),"</div>").replace(Sn,function(Kn){return'<a href="'.concat(Kn,'" target="_blank">').concat(Kn,"</a>")})},Gn.prototype.formatCommon=function(cn,gn){var On=(gn===void 0?{}:gn).htmlForEl,Kn=On===void 0||On,_r=(0,ze.default)(cn[0])&&cn.length!==1;_r&&(cn=this.substituteStr(cn));for(var kr=0,Dr=cn.length;kr<Dr;kr++){var xr=cn[kr];(0,Ne.default)(xr)&&Kn?cn[kr]=this.formatEl(xr):(0,tt.default)(xr)?cn[kr]=this.formatFn(xr):(0,Fe.default)(xr)?cn[kr]=this.formatPreview(xr):(0,Qe.default)(xr)?cn[kr]="undefined":(0,Je.default)(xr)?cn[kr]="null":(xr=(0,Ke.default)(xr),kr===0&&_r||(xr=(0,_t.default)(xr)),cn[kr]=xr)}return cn.join(" ")},Gn.prototype.formatDir=function(cn){return this.formatCommon(cn,{htmlForEl:!1})},Gn.prototype.formatTableVal=function(cn){var gn=this.console.c;return(0,Fe.default)(cn)?"{\u2026}":(0,We.default)(cn)?(0,vn.default)('<div class="'.concat(gn("preview"),'">').concat((0,xe.default)(cn),"</div>")):(0,Ke.default)(cn)},Gn.prototype.formatPreview=function(cn){var gn=this,On=this.console.c,Kn=(0,wn.default)();this.lazyEvaluation?this.objects[Kn]=cn:this.extractObj(cn,{},function(kr){gn.objects[Kn]=kr});var _r=(0,$n.getObjType)(cn);return _r==="Array"&&cn.length>1&&(_r="(".concat(cn.length,")")),'<div class="'.concat(On("preview"),'" data-id="').concat(Kn,'">')+'<span class="'.concat(On("descriptor"),'">').concat(_r,"</span> ")+'<span class="'.concat(On("object-preview"),'">').concat((0,xe.default)(cn,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+'<div class="'.concat(On("json hidden"),'"></div></div>')},Gn.prototype.substituteStr=function(cn){var gn=(0,_t.default)(cn[0]),On=!1,Kn="";cn.shift();for(var _r=0,kr=gn.length;_r<kr;_r++){var Dr=gn[_r];if(Dr==="%"&&cn.length!==0){_r++;var xr=cn.shift();switch(gn[_r]){case"i":case"d":Kn+=(0,yt.default)(xr);break;case"f":Kn+=(0,ot.default)(xr);break;case"s":Kn+=(0,Ke.default)(xr);break;case"O":(0,Fe.default)(xr)&&(Kn+=this.formatPreview(xr));break;case"o":(0,Ne.default)(xr)?Kn+=this.formatEl(xr):(0,Fe.default)(xr)&&(Kn+=this.formatPreview(xr));break;case"c":if(gn.length<=_r+1)break;On&&(Kn+="</span>"),On=!0,Kn+='<span style="'.concat(pr(xr),'">');break;default:_r--,cn.unshift(xr),Kn+=Dr}}else Kn+=Dr}return On&&(Kn+="</span>"),cn.unshift(Kn),cn},Gn.prototype.formatJs=function(cn){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c((0,xn.default)(cn,"js",Jn)),"</pre>")},Gn.prototype.formatFn=function(cn){return'<pre style="display:inline">'.concat(this.formatJs(cn.toString()),"</pre>")},Gn.prototype.formatEl=function(cn){var gn=(0,wn.default)();return this.elements[gn]=cn,this.console.c('<div class="dom-viewer" data-id="'.concat(gn,'"></div>'))},Gn}(Yt.default);function pr(Xn){var Gn=(Xn=(0,Tn.default)(Xn)).split(";"),cn={};(0,at.default)(Gn,function(On){if((0,vt.default)(On,":")){var Kn=ne(On.split(":"),2),_r=Kn[0],kr=Kn[1];cn[(0,nn.default)(_r)]=(0,nn.default)(kr)}}),cn.display="inline-block",cn["max-width"]="100%",delete cn.width,delete cn.height;var gn="";return(0,at.default)(cn,function(On,Kn){gn+="".concat(Kn,":").concat(On,";")}),gn}G.default=tr},2925:function(U,G,V){var re=this&&this.__importDefault||function(Fe){return Fe&&Fe.__esModule?Fe:{default:Fe}};Object.defineProperty(G,"__esModule",{value:!0});var te=re(V(8901)),Q=re(V(3367)),de=re(V(6341)),I=re(V(6930)),_e=re(V(4187)),ne=re(V(3783)),ge=re(V(4858)),ye=re(V(8887)),xe=V(1893),we=(0,V(2375).classPrefix)("console");G.default=function Fe(ze,Le){var We,qe=Le===void 0?{}:Le,Ne=qe.topObj,Ke=qe.level,ot=Ke===void 0?0:Ke,yt=qe.getterVal,ft=yt!==void 0&&yt,_t=qe.unenumerable,Je=_t===void 0||_t,Qe="",tt="",ht=[],it=[],pt="";Ne=Ne||ze;var vt={getterVal:ft,unenumerable:Je,level:ot+1},ut=ot===0,Nt='<span class="'.concat(we("key"),'">'),at='<span class="'.concat(we("number"),'">'),Mt='<span class="'.concat(we("null"),'">'),nn='<span class="'.concat(we("string"),'">'),Tn='<span class="'.concat(we("boolean"),'">'),Jt='<span class="'.concat(we("special"),'">'),on=function(wn){return(0,te.default)(wn).replace(/\\n/g,"\u21B5").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Vt="</span>";function Rt(wn){return wn=(0,Q.default)(wn),(0,de.default)(ke,wn)||(0,I.default)(wn,"Array[")?Jt+on(wn)+Vt:nn+on('"'.concat(wn,'"'))+Vt}function Yt(wn){if(We>5)pt=", \u2026";else{var Sn=function(tr){return Nt+on(tr)+Vt}(Oe(wn));if(!ft){var Jn=Object.getOwnPropertyDescriptor(ze,wn);if(Jn&&Jn.get)return ht.push("".concat(Sn,": ").concat(Rt("(...)"))),void We++}ht.push("".concat(Sn,": ").concat(Fe(Ne[wn],vt))),We++}}try{tt={}.toString.call(ze)}catch{tt="[object Object]"}var un,yn=tt=="[object Array]",In=tt=="[object Object]",It=tt=="[object Number]",$t=tt=="[object RegExp]",an=tt=="[object Symbol]",xn=tt=="[object Function]",En=tt=="[object Boolean]";if(tt=="[object String]")Qe=Rt(Oe(ze));else if($t)un=Oe(ze.toString()),Qe=nn+un+Vt;else if(xn)Qe=Rt("\u0192");else if(yn)if(ut){Qe="[";var $n=ze.length,zn="";$n>100&&($n=100,zn=", \u2026");for(var vn=0;vn<$n;vn++)ht.push("".concat(Fe(ze[vn],vt)));Qe+=ht.join(", ")+zn+"]"}else Qe="Array(".concat(ze.length,")");else if(In)Se(ze)&&(ze=Object.getPrototypeOf(ze)),it=Je?Object.getOwnPropertyNames(ze):Object.keys(ze),ut?(We=1,Qe="{",(0,ne.default)(it,Yt),Qe+=ht.join(", ")+pt+"}"):(Qe=(0,xe.getObjType)(ze))==="Object"&&(Qe="{\u2026}");else if(It)Qe=ze+"",Qe=(0,ge.default)(Qe,"Infinity")||Qe==="NaN"?'"'.concat(Qe,'"'):at+Qe+Vt;else if(En)Qe=Tn+(ze?"true":"false")+Vt;else if(ze===null)Qe=function(wn){return Mt+wn+Vt}("null");else if(an)Qe=Rt("Symbol");else if(ze===void 0)Qe=Rt("undefined");else try{Se(ze)&&(ze=Object.getPrototypeOf(ze)),ut?(We=1,Qe="{",it=Je?Object.getOwnPropertyNames(ze):Object.keys(ze),(0,ne.default)(it,Yt),Qe+=ht.join(", ")+pt+"}"):(Qe=(0,xe.getObjType)(ze))==="Object"&&(Qe="{\u2026}")}catch{Qe=Rt(ze)}return Qe};var ke=["(...)","undefined","Symbol","Object","\u0192"];function Se(Fe){var ze=(0,ye.default)(Object.getOwnPropertyNames(Fe)),Le=Object.getPrototypeOf(Fe);return ze&&Le&&Le!==Object.prototype}function Oe(Fe){return(0,_e.default)(Fe).replace(/\\'/g,"'").replace(/\t/g,"\\t")}},7132:function(U,G,V){var re,te=this&&this.__extends||(re=function(on,Vt){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Rt,Yt){Rt.__proto__=Yt}||function(Rt,Yt){for(var un in Yt)Object.prototype.hasOwnProperty.call(Yt,un)&&(Rt[un]=Yt[un])},re(on,Vt)},function(on,Vt){if(typeof Vt!="function"&&Vt!==null)throw new TypeError("Class extends value "+String(Vt)+" is not a constructor or null");function Rt(){this.constructor=on}re(on,Vt),on.prototype=Vt===null?Object.create(Vt):(Rt.prototype=Vt.prototype,new Rt)}),Q=this&&this.__makeTemplateObject||function(on,Vt){return Object.defineProperty?Object.defineProperty(on,"raw",{value:Vt}):on.raw=Vt,on},de=this&&this.__read||function(on,Vt){var Rt=typeof Symbol=="function"&&on[Symbol.iterator];if(!Rt)return on;var Yt,un,yn=Rt.call(on),In=[];try{for(;(Vt===void 0||Vt-- >0)&&!(Yt=yn.next()).done;)In.push(Yt.value)}catch(It){un={error:It}}finally{try{Yt&&!Yt.done&&(Rt=yn.return)&&Rt.call(yn)}finally{if(un)throw un.error}}return In},I=this&&this.__importDefault||function(on){return on&&on.__esModule?on:{default:on}};Object.defineProperty(G,"__esModule",{value:!0});var _e=I(V(4095)),ne=I(V(1286)),ge=I(V(1194)),ye=I(V(8847)),xe=I(V(6768)),we=I(V(6329)),ke=I(V(5229)),Se=I(V(1754)),Oe=I(V(4777)),Fe=I(V(9001)),ze=I(V(8887)),Le=I(V(6341)),We=I(V(2327)),qe=I(V(3783)),Ne=I(V(1352)),Ke=I(V(2533)),ot=I(V(9702)),yt=I(V(2439)),ft=I(V(8933)),_t=I(V(3063)),Je=I(V(4407)),Qe=I(V(9585)),tt=I(V(1907)),ht=I(V(242)),it=I(V(6156)),pt=I(V(1018)),vt=V(1571),ut=navigator.userAgent,Nt=ut.indexOf("Android")>-1||ut.indexOf("Adr")>-1,at=0,Mt=function(on){function Vt(Rt,Yt){Yt===void 0&&(Yt={});var un=on.call(this,Rt,{compName:"console"},Yt)||this;return un.spaceHeight=0,un.topSpaceHeight=0,un.bottomSpaceHeight=0,un.lastScrollTop=0,un.lastTimestamp=0,un.speedToleranceFactor=100,un.maxSpeedTolerance=2e3,un.minSpeedTolerance=100,un.logs=[],un.displayLogs=[],un.timer={},un.counter={},un.asyncList=[],un.asyncTimer=null,un.isAtBottom=!0,un.groupStack=new Fe.default,un.selectedLog=null,un.onScroll=function(){var yn=un.container,In=yn.scrollHeight,It=yn.offsetHeight,$t=yn.scrollTop;if(!($t<=0||It+$t>In)){var an=!1;(In===It||$t===In-It)&&(an=!0),un.isAtBottom=an;var xn=un.lastScrollTop,En=un.lastTimestamp,$n=(0,ye.default)(),zn=$n-En,vn=$t-xn,wn=Math.abs(vn/zn)*un.speedToleranceFactor;zn>1e3&&(wn=1e3),wn>un.maxSpeedTolerance&&(wn=un.maxSpeedTolerance),wn<un.minSpeedTolerance&&(wn=un.minSpeedTolerance),un.lastScrollTop=$t,un.lastTimestamp=$n;var Sn=0,Jn=0;xn<$t?(Sn=un.minSpeedTolerance,Jn=wn):(Sn=wn,Jn=un.minSpeedTolerance),un.topSpaceHeight<$t-Sn&&un.topSpaceHeight+un.el.offsetHeight>$t+It+Jn||un.renderViewport({topTolerance:2*Sn,bottomTolerance:2*Jn})}},un.initTpl(),un.initOptions(Yt,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"all",accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),un.$el=un.find(".logs"),un.el=un.$el.get(0),un.$fakeEl=un.find(".fake-logs"),un.fakeEl=un.$fakeEl.get(0),un.$space=un.find(".logs-space"),un.space=un.$space.get(0),Nt&&(un.speedToleranceFactor=800,un.maxSpeedTolerance=3e3,un.minSpeedTolerance=800),un.resizeSensor=new ht.default(Rt),un.renderViewport=(0,yt.default)(function(yn){un._renderViewport(yn)},16),un.global={copy:function(yn){(0,xe.default)(yn)||(yn=JSON.stringify(yn,null,2)),(0,We.default)(yn)},$:function(yn){return document.querySelector(yn)},$$:function(yn){return(0,Ne.default)(document.querySelectorAll(yn))},$x:function(yn){return(0,ft.default)(yn)},clear:function(){un.clear()},dir:function(yn){un.dir(yn)},table:function(yn,In){un.table(yn,In)},keys:Ke.default},un.bindEvent(),un}return te(Vt,on),Vt.prototype.setGlobal=function(Rt,Yt){this.global[Rt]=Yt},Vt.prototype.destroy=function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),on.prototype.destroy.call(this)},Vt.prototype.count=function(Rt){Rt===void 0&&(Rt="default");var Yt=this.counter;(0,ne.default)(Yt[Rt])?Yt[Rt]=1:Yt[Rt]++,this.info("".concat(Rt,": ").concat(Yt[Rt]))},Vt.prototype.countReset=function(Rt){Rt===void 0&&(Rt="default"),this.counter[Rt]=0},Vt.prototype.assert=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];if(!(0,ze.default)(Rt)){var un=Rt.shift();un||(Rt.length===0&&Rt.unshift("console.assert"),Rt.unshift("Assertion failed: "),this.insert("error",Rt))}},Vt.prototype.log=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];(0,ze.default)(Rt)||this.insert("log",Rt)},Vt.prototype.debug=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];(0,ze.default)(Rt)||this.insert("debug",Rt)},Vt.prototype.dir=function(Rt){(0,ne.default)(Rt)||this.insert("dir",[Rt])},Vt.prototype.table=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];(0,ze.default)(Rt)||this.insert("table",Rt)},Vt.prototype.time=function(Rt){if(Rt===void 0&&(Rt="default"),this.timer[Rt])return this.insert("warn",["Timer '".concat(Rt,"' already exists")]);this.timer[Rt]=(0,ge.default)()},Vt.prototype.timeLog=function(Rt){Rt===void 0&&(Rt="default");var Yt=this.timer[Rt];if(!Yt)return this.insert("warn",["Timer '".concat(Rt,"' does not exist")]);this.info("".concat(Rt,": ").concat((0,ge.default)()-Yt,"ms"))},Vt.prototype.timeEnd=function(Rt){Rt===void 0&&(Rt="default"),this.timeLog(Rt),delete this.timer[Rt]},Vt.prototype.clear=function(Rt){Rt===void 0&&(Rt=!1),this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new Fe.default,this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),Rt?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])},Vt.prototype.info=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];(0,ze.default)(Rt)||this.insert("log",Rt)},Vt.prototype.error=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];(0,ze.default)(Rt)||this.insert("error",Rt)},Vt.prototype.warn=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];(0,ze.default)(Rt)||this.insert("warn",Rt)},Vt.prototype.group=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];this.insert({type:"group",args:Rt,ignoreFilter:!0})},Vt.prototype.groupCollapsed=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];this.insert({type:"groupCollapsed",args:Rt,ignoreFilter:!0})},Vt.prototype.groupEnd=function(){this.insert("groupEnd")},Vt.prototype.evaluate=function(Rt){this.insert({type:"input",args:[Rt],ignoreFilter:!0});try{this.output(this.evalJs(Rt))}catch(Yt){this.insert({type:"error",ignoreFilter:!0,args:[Yt]})}},Vt.prototype.html=function(){for(var Rt=[],Yt=0;Yt<arguments.length;Yt++)Rt[Yt]=arguments[Yt];this.insert("html",Rt)},Vt.prototype.toggleGroup=function(Rt){Rt.targetGroup.collapsed?this.openGroup(Rt):this.collapseGroup(Rt)},Vt.prototype.output=function(Rt){this.insert({type:"output",args:[Rt],ignoreFilter:!0})},Vt.prototype.render=function(){var Rt=this.logs,Yt=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var un=0,yn=Rt.length;un<yn;un++)this.attachLog(Rt[un]);Yt&&((0,Le.default)(this.displayLogs,Yt)||this.selectLog(null))},Vt.prototype.insert=function(Rt,Yt){var un,yn=this.options,In=yn.showHeader,It=yn.asyncRender;if(In&&(un={time:Tn(),from:Jt()}),It)return this.insertAsync(Rt,Yt,un);this.insertSync(Rt,Yt,un)},Vt.prototype.insertAsync=function(Rt,Yt,un){this.asyncList.push([Rt,Yt,un]),this.handleAsyncList()},Vt.prototype.insertSync=function(Rt,Yt,un){var yn,In=this,It=this.logs,$t=this.groupStack,an=this.options,xn=an.maxNum,En=an.accessGetter,$n=an.unenumerable,zn=an.lazyEvaluation;if((yn=(0,xe.default)(Rt)?{type:Rt,args:Yt,header:un}:Rt).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if($t.size>0&&(yn.group=$t.peek()),(0,we.default)(yn,{id:++at,accessGetter:En,unenumerable:$n,lazyEvaluation:zn}),yn.type==="group"||yn.type==="groupCollapsed"){var vn={id:(0,ke.default)("group"),collapsed:!1,parent:$t.peek(),indentLevel:$t.size+1};yn.type==="groupCollapsed"&&(vn.collapsed=!0),yn.targetGroup=vn,$t.push(vn)}var wn=new _e.default(this,yn);wn.on("updateHeight",function(){In.isAtBottom=!1,In.renderViewport()});var Sn=this.lastLog;if(Sn&&!(0,Le.default)(["html","group","groupCollapsed"],wn.type)&&Sn.type===wn.type&&wn.isSimple()&&Sn.text()===wn.text()?(Sn.addCount(),wn.header&&Sn.updateTime(wn.header.time),wn=Sn,this.detachLog(Sn)):(It.push(wn),this.lastLog=wn),xn!==0&&It.length>xn){var Jn=It[0];this.detachLog(Jn),It.shift()}this.attachLog(wn),this.emit("insert",wn)},Vt.prototype.updateTopSpace=function(Rt){this.topSpaceHeight=Rt,this.el.style.top=Rt+"px"},Vt.prototype.updateBottomSpace=function(Rt){this.bottomSpaceHeight=Rt},Vt.prototype.updateSpace=function(Rt){this.spaceHeight!==Rt&&(this.spaceHeight=Rt,this.space.style.height=Rt+"px")},Vt.prototype.detachLog=function(Rt){var Yt=this.displayLogs,un=Yt.indexOf(Rt);un>-1&&(Yt.splice(un,1),this.renderViewport())},Vt.prototype.attachLog=function(Rt){if(this.filterLog(Rt)&&!Rt.collapsed){var Yt=this.displayLogs;if(Yt.length===0)return Yt.push(Rt),void this.renderViewport();var un=(0,ot.default)(Yt);if(Rt.id>un.id)return Yt.push(Rt),void this.renderViewport();for(var yn,In=0,It=Yt.length-1,$t=0;In<=It;){if((yn=Yt[$t=In+Math.floor((It-In)/2)]).id===Rt.id)return;yn.id<Rt.id?In=$t+1:It=$t-1}yn.id<Rt.id?Yt.splice($t+1,0,Rt):Yt.splice($t,0,Rt),this.renderViewport()}},Vt.prototype.handleAsyncList=function(Rt){var Yt=this;Rt===void 0&&(Rt=20);var un=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){Yt.asyncTimer=null;var yn,In,It=!1,$t=un.length;$t<1e3?(In=200,yn=400):$t<5e3?(In=500,yn=800):$t<1e4?(In=800,yn=1e3):$t<25e3?(In=1e3,yn=1200):$t<5e4?(In=1500,yn=1500):(In=2e3,yn=2500),In>$t&&(In=$t,It=!0);for(var an=0;an<In;an++){var xn=de(un.shift(),3),En=xn[0],$n=xn[1],zn=xn[2];Yt.insertSync(En,$n,zn)}It||vt(function(){return Yt.handleAsyncList(yn)})},Rt))},Vt.prototype.injectGlobal=function(){(0,qe.default)(this.global,function(Rt,Yt){window[Yt]||(window[Yt]=Rt)})},Vt.prototype.clearGlobal=function(){(0,qe.default)(this.global,function(Rt,Yt){window[Yt]&&window[Yt]===Rt&&delete window[Yt]})},Vt.prototype.evalJs=function(Rt){var Yt;this.injectGlobal();try{Yt=eval.call(window,"(".concat(Rt,")"))}catch{Yt=eval.call(window,Rt)}return this.setGlobal("$_",Yt),this.clearGlobal(),Yt},Vt.prototype.filterLog=function(Rt){var Yt=this.options.filter;return Yt==="all"||!!Rt.ignoreFilter||((0,Oe.default)(Yt)?Yt(Rt):(0,Se.default)(Yt)?Yt.test((0,_t.default)(Rt.text())):Rt.type===Yt)},Vt.prototype.collapseGroup=function(Rt){Rt.targetGroup.collapsed=!0,Rt.updateIcon("caret-right"),this.updateGroup(Rt)},Vt.prototype.openGroup=function(Rt){Rt.targetGroup.collapsed=!1,Rt.updateIcon("caret-down"),this.updateGroup(Rt)},Vt.prototype.updateGroup=function(Rt){for(var Yt=Rt.targetGroup,un=this.logs,yn=un.length,In=un.indexOf(Rt)+1;In<yn;){var It=un[In];if(!It.checkGroup()&&It.group===Yt)break;It.collapsed?this.detachLog(It):this.attachLog(It),In++}},Vt.prototype.selectLog=function(Rt){var Yt;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),(0,it.default)(Rt)?this.emit("deselect"):(this.selectedLog=Rt,(Yt=this.selectedLog)===null||Yt===void 0||Yt.select(),this.emit("select",Rt))},Vt.prototype.bindEvent=function(){var Rt=this,Yt=this.$el,un=this.c;this.resizeSensor.addListener(this.renderViewport);var yn=this;Yt.on("click",un(".log-container"),function(){yn.selectLog(this.log)}),this.on("optionChange",function(In,It){var $t=Rt.logs;switch(In){case"maxNum":It>0&&$t.length>It&&(Rt.logs=$t.slice($t.length-It),Rt.render());break;case"filter":Rt.render()}}),this.$container.on("scroll",this.onScroll)},Vt.prototype._renderViewport=function(Rt){var Yt=Rt===void 0?{}:Rt,un=Yt.topTolerance,yn=un===void 0?500:un,In=Yt.bottomTolerance,It=In===void 0?500:In,$t=this.el,an=this.container;if(!(0,Qe.default)(an)){for(var xn=an,En=xn.scrollTop,$n=xn.offsetHeight,zn=an.getBoundingClientRect().width,vn=En-yn,wn=En+$n+It,Sn=this.displayLogs,Jn=0,tr=0,pr=0,Xn=Sn.length,Gn=this.fakeEl,cn=document.createDocumentFragment(),gn=[],On=0;On<Xn;On++){var Kn=(Dr=Sn[On]).width;(Lr=Dr.height)!==0&&Kn===zn||(cn.appendChild(Dr.container),gn.push(Dr))}if(gn.length>0){Gn.appendChild(cn),On=0;for(var _r=gn.length;On<_r;On++)gn[On].updateSize();Gn.innerHTML=""}var kr=document.createDocumentFragment();for(On=0;On<Xn;On++){var Dr,xr=(Dr=Sn[On]).container,Lr=Dr.height;pr>wn?tr+=Lr:pr+Lr>vn?kr.appendChild(xr):pr<vn&&(Jn+=Lr),pr+=Lr}for(this.updateSpace(pr),this.updateTopSpace(Jn),this.updateBottomSpace(tr);$t.firstChild;)$t.lastChild&&$t.removeChild($t.lastChild);$t.appendChild(kr);var Br=an.scrollHeight;this.isAtBottom&&En<=Br-$n&&(an.scrollTop=1e7)}},Vt.prototype.initTpl=function(){this.$container.html(this.c((0,tt.default)(nn||(nn=Q([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `],[`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))},Vt}(pt.default);G.default=Mt,U.exports=Mt,U.exports.default=Mt;var nn,Tn=function(){return(0,Je.default)("HH:MM:ss ")};function Jt(){for(var on=new Error,Vt="",Rt=on.stack?on.stack.split(`
`):"",Yt=0,un=Rt.length;Yt<un;Yt++)if((Vt=Rt[Yt]).indexOf("winConsole")>-1&&Yt<un-1){Vt=Rt[Yt+1];break}return Vt}},1893:function(U,G,V){var re=this&&this.__importDefault||function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(G,"__esModule",{value:!0}),G.getObjType=void 0;var te=re(V(3023));G.getObjType=function(Q){return Q.constructor&&Q.constructor.name?Q.constructor.name:(0,te.default)({}.toString.call(Q).replace(/(\[object )|]/g,""))}},1018:function(U,G,V){var re,te=this&&this.__extends||(re=function(ke,Se){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,Fe){Oe.__proto__=Fe}||function(Oe,Fe){for(var ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&(Oe[ze]=Fe[ze])},re(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=ke}re(ke,Se),ke.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)}),Q=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(1512)),_e=V(2375),ne=Q(V(3783)),ge=Q(V(6329)),ye=Q(V(4193)),xe=Q(V(5852)),we=function(ke){function Se(Oe,Fe,ze){var Le=Fe.compName,We=(ze===void 0?{}:ze).theme,qe=We===void 0?"light":We,Ne=ke.call(this)||this;return Ne.subComponents=[],Ne.compName=Le,Ne.c=(0,_e.classPrefix)(Le),Ne.options={},Ne.container=Oe,Ne.$container=(0,I.default)(Oe),Ne.$container.addClass(["luna-".concat(Le),Ne.c("platform-".concat((0,_e.getPlatform)()))]),Ne.on("optionChange",function(Ke,ot,yt){var ft=Ne.c;Ke==="theme"&&(Ne.$container.rmClass(ft("theme-".concat(yt))).addClass(ft("theme-".concat(ot))),(0,ne.default)(Ne.subComponents,function(_t){return _t.setOption("theme",ot)}))}),Ne.setOption("theme",qe),Ne}return te(Se,ke),Se.prototype.destroy=function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat((0,_e.getPlatform)()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Se.prototype.setOption=function(Oe,Fe){var ze=this,Le=this.options,We={};typeof Oe=="string"?We[Oe]=Fe:We=Oe,(0,ne.default)(We,function(qe,Ne){var Ke=Le[Ne];Le[Ne]=qe,ze.emit("optionChange",Ne,qe,Ke)})},Se.prototype.getOption=function(Oe){return this.options[Oe]},Se.prototype.addSubComponent=function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)},Se.prototype.removeSubComponent=function(Oe){(0,xe.default)(this.subComponents,function(Fe){return Fe===Oe})},Se.prototype.destroySubComponents=function(){(0,ne.default)(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]},Se.prototype.initOptions=function(Oe,Fe){Fe===void 0&&(Fe={}),(0,ye.default)(Oe,Fe),(0,ge.default)(this.options,Oe)},Se.prototype.find=function(Oe){return this.$container.find(this.c(Oe))},Se}(de.default);G.default=we},2375:function(U,G,V){var re=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.resetCanvasSize=G.getPlatform=G.pxToNum=G.executeAfterTransition=G.hasVerticalScrollbar=G.measuredScrollbarWidth=G.eventPage=G.eventClient=G.drag=G.classPrefix=void 0;var te=re(V(2461)),Q=re(V(4331)),de=re(V(5610)),I=re(V(7483)),_e=re(V(3990)),ne=re(V(6341)),ge=re(V(3875)),ye=re(V(6954)),xe=re(V(9585));function we(ze,Le){for(var We=0,qe=ze.length;We<qe;We++){var Ne=ze[We];Le(Ne),Ne.content&&we(Ne.content,Le)}}G.classPrefix=function(ze){var Le="luna-".concat(ze,"-");function We(qe){return(0,te.default)((0,Q.default)(qe).split(/\s+/),function(Ne){return(0,ne.default)(Ne,Le)?Ne:Ne.replace(/[\w-]+/,function(Ke){return"".concat(Le).concat(Ke)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var Ne=I.default.parse(qe);return we(Ne,function(Ke){Ke.attrs&&Ke.attrs.class&&(Ke.attrs.class=We(Ke.attrs.class))}),I.default.stringify(Ne)}catch{return We(qe)}return We(qe)}};var ke,Se="ontouchstart"in de.default,Oe={start:"touchstart",move:"touchmove",end:"touchend"},Fe={start:"mousedown",move:"mousemove",end:"mouseup"};G.drag=function(ze){return Se?Oe[ze]:Fe[ze]},G.eventClient=function(ze,Le){var We=ze==="x"?"clientX":"clientY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.eventPage=function(ze,Le){var We=ze==="x"?"pageX":"pageY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.measuredScrollbarWidth=function(){if((0,_e.default)(ke))return ke;if(!document)return 16;var ze=document.createElement("div"),Le=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Le.setAttribute("style","height: 200px"),ze.appendChild(Le),document.body.appendChild(ze),ke=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),ke},G.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},G.executeAfterTransition=function(ze,Le){if((0,xe.default)(ze))return Le();var We=function(qe){qe.target===ze&&(ze.removeEventListener("transitionend",We),Le())};ze.addEventListener("transitionend",We)},G.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},G.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},G.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},3467:function(U,G,V){var re,te=this&&this.__extends||(re=function(ot,yt){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ft,_t){ft.__proto__=_t}||function(ft,_t){for(var Je in _t)Object.prototype.hasOwnProperty.call(_t,Je)&&(ft[Je]=_t[Je])},re(ot,yt)},function(ot,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Class extends value "+String(yt)+" is not a constructor or null");function ft(){this.constructor=ot}re(ot,yt),ot.prototype=yt===null?Object.create(yt):(ft.prototype=yt.prototype,new ft)}),Q=this&&this.__makeTemplateObject||function(ot,yt){return Object.defineProperty?Object.defineProperty(ot,"raw",{value:yt}):ot.raw=yt,ot},de=this&&this.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(G,"__esModule",{value:!0});var I=de(V(1512)),_e=de(V(1907)),ne=de(V(6959)),ge=de(V(3783)),ye=de(V(8901)),xe=de(V(8613)),we=de(V(3367)),ke=de(V(9833)),Se=de(V(1286)),Oe=de(V(242)),Fe=de(V(2439)),ze=de(V(4193)),Le=de(V(6930)),We=function(ot){function yt(ft,_t){var Je=ot.call(this,ft,{compName:"data-grid"},_t)||this;Je.nodes=[],Je.columnWidthsInitialized=!1,Je.columnMap={},Je.isAscending=!0,Je.resizeSensor=new Oe.default(ft),Je.onResize=(0,Fe.default)(function(){Je.updateHeight(),Je.updateWeights()},16),_t.height&&(_t.maxHeight=_t.height,_t.minHeight=_t.height),Je.initOptions(_t,{minHeight:41,maxHeight:1/0});var Qe=Je.options,tt=Qe.columns,ht=Qe.minHeight,it=Qe.maxHeight;return(0,ge.default)(tt,function(pt){(0,ze.default)(pt,{sortable:!1}),Je.columnMap[pt.id]=pt}),it<ht&&Je.setOption("maxHeight",ht),Je.initTpl(),Je.$headerRow=Je.find(".header").find("tr"),Je.$fillerRow=Je.find(".filler-row"),Je.fillerRow=Je.$fillerRow.get(0),Je.$tableBody=Je.find(".data").find("tbody"),Je.tableBody=Je.$tableBody.get(0),Je.$colgroup=Je.$container.find("colgroup"),Je.$dataContainer=Je.find(".data-container"),Je.renderHeader(),Je.updateWeights(),Je.updateHeight(),Je.bindEvent(),Je}return te(yt,ot),yt.prototype.destroy=function(){ot.prototype.destroy.call(this),this.resizeSensor.destroy()},yt.prototype.append=function(ft){var _t=new Ne(this,ft);return this.nodes.push(_t),this.sortId?this.sortNodes(this.sortId,this.isAscending):(this.tableBody.insertBefore(_t.container,this.fillerRow),this.updateHeight()),_t},yt.prototype.clear=function(){(0,ge.default)(this.nodes,function(ft){return ft.detach()}),this.nodes=[],this.updateHeight()},yt.prototype.updateHeight=function(){var ft=this.$fillerRow,_t=this.options,Je=_t.maxHeight,Qe=_t.minHeight;this.$dataContainer.css({height:"auto"}),(Qe-=21)<0&&(Qe=0),Je-=21;var tt=20*this.nodes.length;tt>Qe?ft.hide():ft.show(),tt<Qe?tt=Qe:tt>=Je&&(tt=Je),this.$dataContainer.css({height:tt})},yt.prototype.bindEvent=function(){var ft=this,_t=this.c,Je=this.$headerRow;this.resizeSensor.addListener(this.onResize);var Qe=this;Je.on("click",_t(".sortable"),function(tt){tt.stopPropagation();var ht=(0,I.default)(this),it=ht.data("id"),pt=ht.data("order")!=="descending";ht.data("order",pt?"descending":"ascending"),Qe.sortNodes(it,pt),Je.find("th").each(function(){var vt=(0,I.default)(this);vt.data("id")!==it&&vt.rmAttr("data-order")})}),this.on("optionChange",function(tt){switch(tt){case"minHeight":case"maxHeight":ft.updateHeight()}})},yt.prototype.sortNodes=function(ft,_t){var Je=this.columnMap[ft].comparator||Ke;this.nodes.sort(function(Qe,tt){var ht=Qe.data[ft],it=tt.data[ft];return(0,ke.default)(ht)&&(ht=ht.innerText),(0,ke.default)(it)&&(it=it.innerText),_t?Je(ht,it):Je(it,ht)}),this.renderData(),this.sortId=ft,this.isAscending=_t},yt.prototype.updateWeights=function(){var ft=this.container,_t=this.$headerRow,Je=this.options.columns,Qe=ft.offsetWidth;if(!this.columnWidthsInitialized&&Qe){for(var tt=0,ht=Je.length;tt<ht;tt++){var it=Je[tt];if(!it.weight){var pt=_t.find("th").get(tt).offsetWidth;it.weight=100*pt/Qe}}this.columnWidthsInitialized=!0}this.applyColumnWeights()},yt.prototype.applyColumnWeights=function(){var ft=this.container,_t=this.$colgroup,Je=this.options.columns,Qe=ft.offsetWidth;if(!(Qe<=0)){for(var tt=0,ht=Je.length,it=0;it<ht;it++)tt+=Je[it].weight;var pt="",vt=0,ut=0;for(it=0;it<ht;it++){var Nt=(vt+=Je[it].weight)*Qe/tt|0,at=Math.max(Nt-ut,14);ut=Nt,pt+='<col style="width:'.concat(at,'px"></col>')}_t.html(pt)}},yt.prototype.renderData=function(){var ft=this,_t=ft.tableBody,Je=ft.nodes,Qe=ft.fillerRow;(0,ge.default)(Je,function(tt){return tt.detach()}),(0,ge.default)(Je,function(tt){_t.insertBefore(tt.container,Qe)}),this.updateHeight()},yt.prototype.renderHeader=function(){var ft=this.c,_t="",Je="";(0,ge.default)(this.options.columns,function(Qe){var tt=(0,ye.default)(Qe.title);Qe.sortable?_t+=ft('<th class="sortable" data-id="'.concat(Qe.id,'">').concat(tt,"</th>")):_t+="<th>".concat(tt,"</th>"),Je+="<td></td>"}),this.$headerRow.html(_t),this.$fillerRow.html(Je)},yt.prototype.initTpl=function(){this.$container.html(this.c((0,_e.default)(qe||(qe=Q([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `],[`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))},yt}(ne.default);G.default=We;var qe,Ne=function(){function ot(yt,ft){this.container=(0,xe.default)("tr"),this.$container=(0,I.default)(this.container),this.dataGrid=yt,this.data=ft,this.render()}return ot.prototype.detach=function(){this.$container.remove()},ot.prototype.render=function(){var yt=this,ft=yt.data,_t=yt.$container,Je=yt.container,Qe=this.dataGrid.getOption("columns");_t.html(""),(0,ge.default)(Qe,function(tt){var ht=(0,xe.default)("td"),it=ft[tt.id];(0,Se.default)(it)||((0,ke.default)(it)?ht.appendChild(it):ht.innerText=(0,we.default)(it)),Je.appendChild(ht)})},ot}();function Ke(ot,yt){if(ot=(0,we.default)(ot),yt=(0,we.default)(yt),(0,Le.default)(ot,"_")&&!(0,Le.default)(yt,"_"))return 1;if((0,Le.default)(yt,"_")&&!(0,Le.default)(ot,"_"))return-1;for(var ft,_t,Je,Qe,tt=/^\d+|^\D+/;;){if(!ot)return yt?-1:0;if(!yt)return 1;if(ft=ot.match(tt)[0],_t=yt.match(tt)[0],Je=!isNaN(ft),Qe=!isNaN(_t),Je&&!Qe)return-1;if(Qe&&!Je)return 1;if(Je&&Qe){var ht=ft-_t;if(ht)return ht;if(ft.length!==_t.length)return+ft||+_t?_t.length-ft.length:ft.length-_t.length}else if(ft!==_t)return ft<_t?-1:1;ot=ot.substring(ft.length),yt=yt.substring(_t.length)}}U.exports=We,U.exports.default=We},6959:function(U,G,V){var re,te=this&&this.__extends||(re=function(ke,Se){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,Fe){Oe.__proto__=Fe}||function(Oe,Fe){for(var ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&(Oe[ze]=Fe[ze])},re(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=ke}re(ke,Se),ke.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)}),Q=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(1512)),_e=V(3692),ne=Q(V(3783)),ge=Q(V(6329)),ye=Q(V(4193)),xe=Q(V(5852)),we=function(ke){function Se(Oe,Fe,ze){var Le=Fe.compName,We=(ze===void 0?{}:ze).theme,qe=We===void 0?"light":We,Ne=ke.call(this)||this;return Ne.subComponents=[],Ne.compName=Le,Ne.c=(0,_e.classPrefix)(Le),Ne.options={},Ne.container=Oe,Ne.$container=(0,I.default)(Oe),Ne.$container.addClass(["luna-".concat(Le),Ne.c("platform-".concat((0,_e.getPlatform)()))]),Ne.on("optionChange",function(Ke,ot,yt){var ft=Ne.c;Ke==="theme"&&(Ne.$container.rmClass(ft("theme-".concat(yt))).addClass(ft("theme-".concat(ot))),(0,ne.default)(Ne.subComponents,function(_t){return _t.setOption("theme",ot)}))}),Ne.setOption("theme",qe),Ne}return te(Se,ke),Se.prototype.destroy=function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat((0,_e.getPlatform)()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Se.prototype.setOption=function(Oe,Fe){var ze=this,Le=this.options,We={};typeof Oe=="string"?We[Oe]=Fe:We=Oe,(0,ne.default)(We,function(qe,Ne){var Ke=Le[Ne];Le[Ne]=qe,ze.emit("optionChange",Ne,qe,Ke)})},Se.prototype.getOption=function(Oe){return this.options[Oe]},Se.prototype.addSubComponent=function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)},Se.prototype.removeSubComponent=function(Oe){(0,xe.default)(this.subComponents,function(Fe){return Fe===Oe})},Se.prototype.destroySubComponents=function(){(0,ne.default)(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]},Se.prototype.initOptions=function(Oe,Fe){Fe===void 0&&(Fe={}),(0,ye.default)(Oe,Fe),(0,ge.default)(this.options,Oe)},Se.prototype.find=function(Oe){return this.$container.find(this.c(Oe))},Se}(de.default);G.default=we},3692:function(U,G,V){var re=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.resetCanvasSize=G.getPlatform=G.pxToNum=G.executeAfterTransition=G.hasVerticalScrollbar=G.measuredScrollbarWidth=G.eventPage=G.eventClient=G.drag=G.classPrefix=void 0;var te=re(V(2461)),Q=re(V(4331)),de=re(V(5610)),I=re(V(7483)),_e=re(V(3990)),ne=re(V(6341)),ge=re(V(3875)),ye=re(V(6954)),xe=re(V(9585));function we(ze,Le){for(var We=0,qe=ze.length;We<qe;We++){var Ne=ze[We];Le(Ne),Ne.content&&we(Ne.content,Le)}}G.classPrefix=function(ze){var Le="luna-".concat(ze,"-");function We(qe){return(0,te.default)((0,Q.default)(qe).split(/\s+/),function(Ne){return(0,ne.default)(Ne,Le)?Ne:Ne.replace(/[\w-]+/,function(Ke){return"".concat(Le).concat(Ke)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var Ne=I.default.parse(qe);return we(Ne,function(Ke){Ke.attrs&&Ke.attrs.class&&(Ke.attrs.class=We(Ke.attrs.class))}),I.default.stringify(Ne)}catch{return We(qe)}return We(qe)}};var ke,Se="ontouchstart"in de.default,Oe={start:"touchstart",move:"touchmove",end:"touchend"},Fe={start:"mousedown",move:"mousemove",end:"mouseup"};G.drag=function(ze){return Se?Oe[ze]:Fe[ze]},G.eventClient=function(ze,Le){var We=ze==="x"?"clientX":"clientY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.eventPage=function(ze,Le){var We=ze==="x"?"pageX":"pageY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.measuredScrollbarWidth=function(){if((0,_e.default)(ke))return ke;if(!document)return 16;var ze=document.createElement("div"),Le=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Le.setAttribute("style","height: 200px"),ze.appendChild(Le),document.body.appendChild(ze),ke=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),ke},G.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},G.executeAfterTransition=function(ze,Le){if((0,xe.default)(ze))return Le();var We=function(qe){qe.target===ze&&(ze.removeEventListener("transitionend",We),Le())};ze.addEventListener("transitionend",We)},G.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},G.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},G.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},3577:function(U,G){Object.defineProperty(G,"__esModule",{value:!0}),G.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(U,G,V){var re,te=this&&this.__extends||(re=function(Qe,tt){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,it){ht.__proto__=it}||function(ht,it){for(var pt in it)Object.prototype.hasOwnProperty.call(it,pt)&&(ht[pt]=it[pt])},re(Qe,tt)},function(Qe,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Class extends value "+String(tt)+" is not a constructor or null");function ht(){this.constructor=Qe}re(Qe,tt),Qe.prototype=tt===null?Object.create(tt):(ht.prototype=tt.prototype,new ht)}),Q=this&&this.__assign||function(){return Q=Object.assign||function(Qe){for(var tt,ht=1,it=arguments.length;ht<it;ht++)for(var pt in tt=arguments[ht])Object.prototype.hasOwnProperty.call(tt,pt)&&(Qe[pt]=tt[pt]);return Qe},Q.apply(this,arguments)},de=this&&this.__values||function(Qe){var tt=typeof Symbol=="function"&&Symbol.iterator,ht=tt&&Qe[tt],it=0;if(ht)return ht.call(Qe);if(Qe&&typeof Qe.length=="number")return{next:function(){return Qe&&it>=Qe.length&&(Qe=void 0),{value:Qe&&Qe[it++],done:!Qe}}};throw new TypeError(tt?"Object is not iterable.":"Symbol.iterator is not defined.")},I=this&&this.__importDefault||function(Qe){return Qe&&Qe.__esModule?Qe:{default:Qe}};Object.defineProperty(G,"__esModule",{value:!0});var _e=I(V(1160)),ne=V(7669),ge=V(2062),ye=I(V(242)),xe=I(V(2439)),we=I(V(3063)),ke=I(V(3783)),Se=I(V(3009)),Oe=I(V(5044)),Fe=I(V(4502)),ze=I(V(6329)),Le=I(V(7494)),We=I(V(6341)),qe=I(V(3875)),Ne=I(V(3577)),Ke=I(V(6768)),ot=function(Qe){function tt(ht,it){it===void 0&&(it={});var pt=Qe.call(this,ht,{compName:"dom-highlighter"},it)||this;return pt.overlay=new ne.HighlightOverlay(window),pt.reset=function(){var vt=document.documentElement.clientWidth,ut=document.documentElement.clientHeight;pt.overlay.reset({viewportSize:{width:vt,height:ut},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},pt.initOptions(it,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),pt.overlay.setContainer(ht),pt.overlay.setPlatform("mac"),pt.redraw=(0,xe.default)(function(){pt.reset(),pt.draw()},16),pt.redraw(),pt.bindEvent(),pt}return te(tt,Qe),tt.prototype.highlight=function(ht,it){it&&(0,ze.default)(this.options,it),this.target=ht,ht instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new ye.default(ht),this.resizeSensor.addListener(this.redraw)),this.redraw()},tt.prototype.hide=function(){this.target=null,this.redraw()},tt.prototype.intercept=function(ht){this.interceptor=ht},tt.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),Qe.prototype.destroy.call(this)},tt.prototype.draw=function(){var ht=this.target;ht&&(ht instanceof Text?this.drawText(ht):this.drawElement(ht))},tt.prototype.drawText=function(ht){var it=this.options,pt=document.createRange();pt.selectNode(ht);var vt=pt.getBoundingClientRect(),ut=vt.left,Nt=vt.top,at=vt.width,Mt=vt.height;pt.detach();var nn={paths:[{path:this.rectToPath({left:ut,top:Nt,width:at,height:Mt}),fillColor:_t(it.contentColor),name:"content"}],showExtensionLines:it.showExtensionLines,showRulers:it.showRulers};it.showInfo&&(nn.elementInfo={tagName:"#text",nodeWidth:at,nodeHeight:Mt}),this.overlay.drawHighlight(nn)},tt.prototype.drawElement=function(ht){var it={paths:this.getPaths(ht),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(it.elementInfo=this.getElementInfo(ht)),this.interceptor){var pt=this.interceptor(it);pt&&(it=pt)}this.overlay.drawHighlight(it)},tt.prototype.getPaths=function(ht){var it=this.options,pt=window.getComputedStyle(ht),vt=ht.getBoundingClientRect(),ut=vt.left,Nt=vt.top,at=vt.width,Mt=vt.height,nn=function(xn){return(0,ge.pxToNum)(pt.getPropertyValue(xn))},Tn=nn("margin-left"),Jt=nn("margin-right"),on=nn("margin-top"),Vt=nn("margin-bottom"),Rt=nn("border-left-width"),Yt=nn("border-right-width"),un=nn("border-top-width"),yn=nn("border-bottom-width"),In=nn("padding-left"),It=nn("padding-right"),$t=nn("padding-top"),an=nn("padding-bottom");return[{path:this.rectToPath({left:ut+Rt+In,top:Nt+un+$t,width:at-Rt-In-Yt-It,height:Mt-un-$t-yn-an}),fillColor:_t(it.contentColor),name:"content"},{path:this.rectToPath({left:ut+Rt,top:Nt+un,width:at-Rt-Yt,height:Mt-un-yn}),fillColor:_t(it.paddingColor),name:"padding"},{path:this.rectToPath({left:ut,top:Nt,width:at,height:Mt}),fillColor:_t(it.borderColor),name:"border"},{path:this.rectToPath({left:ut-Tn,top:Nt-on,width:at+Tn+Jt,height:Mt+on+Vt}),fillColor:_t(it.marginColor),name:"margin"}]},tt.prototype.getElementInfo=function(ht){var it=ht.getBoundingClientRect(),pt=it.width,vt=it.height,ut=ht.getAttribute("class")||"";ut=ut.split(/\s+/).map(function(at){return"."+at}).join("");var Nt={tagName:(0,we.default)(ht.tagName),className:ut,idValue:ht.id,nodeWidth:pt,nodeHeight:vt};return this.options.showStyles&&(Nt.style=this.getStyles(ht)),this.options.showAccessibilityInfo&&(0,ze.default)(Nt,this.getAccessibilityInfo(ht)),Nt},tt.prototype.getStyles=function(ht){for(var it=window.getComputedStyle(ht),pt=!1,vt=ht.childNodes,ut=0,Nt=vt.length;ut<Nt;ut++)vt[ut].nodeType===3&&(pt=!0);var at=[];return pt&&at.push("color","font-family","font-size","line-height"),at.push("padding","margin","background-color"),Je(it,at)},tt.prototype.getAccessibilityInfo=function(ht){var it=window.getComputedStyle(ht);return Q({showAccessibilityInfo:!0,contrast:Q({contrastAlgorithm:"aa",textOpacity:.1},Je(it,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(ht)},this.getAccessibleNameAndRole(ht))},tt.prototype.isFocusable=function(ht){var it=(0,we.default)(ht.tagName);if((0,We.default)(["a","button","input","textarea","select","details"],it))return!0;var pt=ht.getAttribute("tabindex");return!!(pt&&(0,qe.default)(pt)>-1)},tt.prototype.getAccessibleNameAndRole=function(ht){var it=ht.getAttribute("labelledby")||ht.getAttribute("aria-label"),pt=ht.getAttribute("role"),vt=(0,we.default)(ht.tagName);return Ne.default.forEach(function(ut){var Nt,at;if(!pt){var Mt=ut[0],nn=ut[2];if(Mt===vt){if(nn)try{for(var Tn=de(nn),Jt=Tn.next();!Jt.done;Jt=Tn.next()){var on=Jt.value;if(ht.getAttribute(on[0])!==on[1])return}}catch(Vt){Nt={error:Vt}}finally{try{Jt&&!Jt.done&&(at=Tn.return)&&at.call(Tn)}finally{if(Nt)throw Nt.error}}pt=ut[1]}}}),{accessibleName:it||ht.getAttribute("title")||"",accessibleRole:pt||"generic"}},tt.prototype.bindEvent=function(){var ht=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return ht.redraw()})},tt.prototype.rectToPath=function(ht){var it=ht.left,pt=ht.top,vt=ht.width,ut=ht.height,Nt=[];return Nt.push("M",it,pt),Nt.push("L",it+vt,pt),Nt.push("L",it+vt,pt+ut),Nt.push("L",it,pt+ut),Nt.push("Z"),Nt},tt}(_e.default);G.default=ot,U.exports=ot,U.exports.default=ot;var yt=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,ft=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function _t(Qe){return(0,Ke.default)(Qe)?Qe:Qe.a?"rgba(".concat(Qe.r,", ").concat(Qe.g,", ").concat(Qe.b,", ").concat(Qe.a,")"):"rgb(".concat(Qe.r,", ").concat(Qe.g,", ").concat(Qe.b,")")}function Je(Qe,tt,ht){ht===void 0&&(ht=!1);var it={};return(0,ke.default)(tt,function(pt){var vt,ut=Qe[pt==="text-opacity"?"color":pt];ut&&(vt=ut,(yt.test(vt)||ft.test(vt))&&(ut=function(Nt){var at=Se.default.parse(Nt),Mt=at.val[3]||1;return at.val=at.val.slice(0,3),at.val.push(Math.round(255*Mt)),"#"+(0,Fe.default)(Oe.default.encode(at.val))}(ut),pt==="text-opacity"&&(ut=ut.slice(7),ut=Oe.default.decode(ut)[0]/255)),ht&&(pt=(0,Le.default)(pt)),it[pt]=ut)}),it}},9706:function(U,G){var V=this&&this.__read||function(Se,Oe){var Fe=typeof Symbol=="function"&&Se[Symbol.iterator];if(!Fe)return Se;var ze,Le,We=Fe.call(Se),qe=[];try{for(;(Oe===void 0||Oe-- >0)&&!(ze=We.next()).done;)qe.push(ze.value)}catch(Ne){Le={error:Ne}}finally{try{ze&&!ze.done&&(Fe=We.return)&&Fe.call(We)}finally{if(Le)throw Le.error}}return qe},re=this&&this.__values||function(Se){var Oe=typeof Symbol=="function"&&Symbol.iterator,Fe=Oe&&Se[Oe],ze=0;if(Fe)return Fe.call(Se);if(Se&&typeof Se.length=="number")return{next:function(){return Se&&ze>=Se.length&&(Se=void 0),{value:Se&&Se[ze++],done:!Se}}};throw new TypeError(Oe?"Object is not iterable.":"Symbol.iterator is not defined.")};function te(Se,Oe){var Fe=Se[3];return[(1-Fe)*Oe[0]+Fe*Se[0],(1-Fe)*Oe[1]+Fe*Se[1],(1-Fe)*Oe[2]+Fe*Se[2],Fe+Oe[3]*(1-Fe)]}function Q(Se){var Oe=V(Se,3),Fe=Oe[0],ze=Oe[1],Le=Oe[2];return .2126*(Fe<=.03928?Fe/12.92:Math.pow((Fe+.055)/1.055,2.4))+.7152*(ze<=.03928?ze/12.92:Math.pow((ze+.055)/1.055,2.4))+.0722*(Le<=.03928?Le/12.92:Math.pow((Le+.055)/1.055,2.4))}Object.defineProperty(G,"__esModule",{value:!0}),G.getContrastThreshold=G.isLargeFont=G.getAPCAThreshold=G.desiredLuminanceAPCA=G.contrastRatioByLuminanceAPCA=G.contrastRatioAPCA=G.luminanceAPCA=G.contrastRatio=G.luminance=G.rgbaToHsla=G.blendColors=void 0,G.blendColors=te,G.rgbaToHsla=function(Se){var Oe=V(Se,4),Fe=Oe[0],ze=Oe[1],Le=Oe[2],We=Oe[3],qe=Math.max(Fe,ze,Le),Ne=Math.min(Fe,ze,Le),Ke=qe-Ne,ot=qe+Ne,yt=.5*ot;return[Ne===qe?0:Fe===qe?(.16666666666666666*(ze-Le)/Ke+1)%1:ze===qe?.16666666666666666*(Le-Fe)/Ke+.3333333333333333:.16666666666666666*(Fe-ze)/Ke+.6666666666666666,yt===0||yt===1?0:yt<=.5?Ke/ot:Ke/(2-ot),yt,We]},G.luminance=Q,G.contrastRatio=function(Se,Oe){var Fe=Q(te(Se,Oe)),ze=Q(Oe);return(Math.max(Fe,ze)+.05)/(Math.min(Fe,ze)+.05)};var de=12.82051282051282,I=.06;function _e(Se){var Oe=V(Se,3),Fe=Oe[0],ze=Oe[1],Le=Oe[2];return .2126729*Math.pow(Fe,2.4)+.7151522*Math.pow(ze,2.4)+.072175*Math.pow(Le,2.4)}function ne(Se){return Se>.03?Se:Se+Math.pow(.03-Se,1.45)}function ge(Se,Oe){if(Se=ne(Se),Oe=ne(Oe),Math.abs(Se-Oe)<5e-4)return 0;var Fe=0;return 100*(Fe=Oe>=Se?(Fe=1.25*(Math.pow(Oe,.55)-Math.pow(Se,.58)))<.001?0:Fe<.078?Fe-Fe*de*I:Fe-I:(Fe=1.25*(Math.pow(Oe,.62)-Math.pow(Se,.57)))>-.001?0:Fe>-.078?Fe-Fe*de*I:Fe+I)}G.luminanceAPCA=_e,G.contrastRatioAPCA=function(Se,Oe){return ge(_e(Se),_e(Oe))},G.contrastRatioByLuminanceAPCA=ge,G.desiredLuminanceAPCA=function(Se,Oe,Fe){function ze(){return Fe?Math.pow(Math.abs(Math.pow(Se,.62)-(-Oe-I)/1.25),1.7543859649122808):Math.pow(Math.abs(Math.pow(Se,.55)-(Oe+I)/1.25),1.7241379310344829)}Se=ne(Se),Oe/=100;var Le=ze();return(Le<0||Le>1)&&(Fe=!Fe,Le=ze()),Le};var ye=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function xe(Se,Oe){var Fe=72*parseFloat(Se.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(Oe)!==-1?Fe>=14:Fe>=18}ye.reverse(),G.getAPCAThreshold=function(Se,Oe){var Fe,ze,Le,We,qe=parseFloat(Se.replace("px","")),Ne=parseFloat(Oe);try{for(var Ke=re(ye),ot=Ke.next();!ot.done;ot=Ke.next()){var yt=V(ot.value),ft=yt[0],_t=yt.slice(1);if(qe>=ft)try{for(var Je=(Le=void 0,re([900,800,700,600,500,400,300,200,100].entries())),Qe=Je.next();!Qe.done;Qe=Je.next()){var tt=V(Qe.value,2),ht=tt[0];if(Ne>=tt[1]){var it=_t[_t.length-1-ht];return it===-1?null:it}}}catch(pt){Le={error:pt}}finally{try{Qe&&!Qe.done&&(We=Je.return)&&We.call(Je)}finally{if(Le)throw Le.error}}}}catch(pt){Fe={error:pt}}finally{try{ot&&!ot.done&&(ze=Ke.return)&&ze.call(Ke)}finally{if(Fe)throw Fe.error}}return null},G.isLargeFont=xe;var we={aa:3,aaa:4.5},ke={aa:4.5,aaa:7};G.getContrastThreshold=function(Se,Oe){return xe(Se,Oe)?we:ke}},9434:function(U,G){var V=this&&this.__values||function(ne){var ge=typeof Symbol=="function"&&Symbol.iterator,ye=ge&&ne[ge],xe=0;if(ye)return ye.call(ne);if(ne&&typeof ne.length=="number")return{next:function(){return ne&&xe>=ne.length&&(ne=void 0),{value:ne&&ne[xe++],done:!ne}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")},re=this&&this.__read||function(ne,ge){var ye=typeof Symbol=="function"&&ne[Symbol.iterator];if(!ye)return ne;var xe,we,ke=ye.call(ne),Se=[];try{for(;(ge===void 0||ge-- >0)&&!(xe=ke.next()).done;)Se.push(xe.value)}catch(Oe){we={error:Oe}}finally{try{xe&&!xe.done&&(ye=ke.return)&&ye.call(ke)}finally{if(we)throw we.error}}return Se},te=this&&this.__spreadArray||function(ne,ge,ye){if(ye||arguments.length===2)for(var xe,we=0,ke=ge.length;we<ke;we++)!xe&&we in ge||(xe||(xe=Array.prototype.slice.call(ge,0,we)),xe[we]=ge[we]);return ne.concat(xe||Array.prototype.slice.call(ge))};Object.defineProperty(G,"__esModule",{value:!0}),G.adoptStyleSheet=G.constrainNumber=G.ellipsify=G.createElement=G.createTextChild=G.createChild=G.log=G.Overlay=void 0;var Q=function(){function ne(ge,ye){ye===void 0&&(ye=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=ge,this._document=ge.document,Array.isArray(ye)||(ye=[ye]),this.style=ye}return ne.prototype.setCanvas=function(ge){this.canvas=ge,this._context=ge.getContext("2d")},ne.prototype.install=function(){var ge,ye;try{for(var xe=V(this.style),we=xe.next();!we.done;we=xe.next())_e(we.value)}catch(ke){ge={error:ke}}finally{try{we&&!we.done&&(ye=xe.return)&&ye.call(xe)}finally{if(ge)throw ge.error}}this._installed=!0},ne.prototype.uninstall=function(){var ge,ye,xe=function(Se){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(Oe){return Oe!==Se})};try{for(var we=V(this.style),ke=we.next();!ke.done;ke=we.next())xe(ke.value)}catch(Se){ge={error:Se}}finally{try{ke&&!ke.done&&(ye=we.return)&&ye.call(we)}finally{if(ge)throw ge.error}}this._installed=!1},ne.prototype.reset=function(ge){ge&&(this.viewportSize=ge.viewportSize,this.visualViewportSize=ge.visualViewportSize,this.deviceScaleFactor=ge.deviceScaleFactor,this.pageScaleFactor=ge.pageScaleFactor,this.pageZoomFactor=ge.pageZoomFactor,this.emulationScaleFactor=ge.emulationScaleFactor,this.scrollX=Math.round(ge.scrollX),this.scrollY=Math.round(ge.scrollY)),this.resetCanvas()},ne.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},ne.prototype.setPlatform=function(ge){this.platform=ge,this._installed||this.install()},ne.prototype.dispatch=function(ge){this[ge.shift()].apply(this,ge)},ne.prototype.eventHasCtrlOrMeta=function(ge){return this.platform==="mac"?ge.metaKey&&!ge.ctrlKey:ge.ctrlKey&&!ge.metaKey},Object.defineProperty(ne.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(ne.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),ne}();function de(ne,ge,ye){var xe=I(ge,ye);return xe.addEventListener("click",function(we){we.stopPropagation()},!1),ne.appendChild(xe),xe}function I(ne,ge){var ye=document.createElement(ne);if(ge){var xe=ge.split(/\s+/);xe=xe.map(function(we){return"luna-dom-highlighter-"+we}),ye.className=xe.join(" ")}return ye}function _e(ne){document.adoptedStyleSheets=te(te([],re(document.adoptedStyleSheets),!1),[ne],!1)}G.Overlay=Q,G.log=function(ne){var ge=document.getElementById("log");ge||((ge=de(document.body,"div")).id="log"),de(ge,"div").textContent=ne},G.createChild=de,G.createTextChild=function(ne,ge){var ye=document.createTextNode(ge);return ne.appendChild(ye),ye},G.createElement=I,G.ellipsify=function(ne,ge){return ne.length<=ge?String(ne):ne.substr(0,ge-1)+"\u2026"},G.constrainNumber=function(ne,ge,ye){return ne<ge?ne=ge:ne>ye&&(ne=ye),ne},G.adoptStyleSheet=_e},1521:function(U,G,V){var re=this&&this.__values||function(we){var ke=typeof Symbol=="function"&&Symbol.iterator,Se=ke&&we[ke],Oe=0;if(Se)return Se.call(we);if(we&&typeof we.length=="number")return{next:function(){return we&&Oe>=we.length&&(we=void 0),{value:we&&we[Oe++],done:!we}}};throw new TypeError(ke?"Object is not iterable.":"Symbol.iterator is not defined.")},te=this&&this.__read||function(we,ke){var Se=typeof Symbol=="function"&&we[Symbol.iterator];if(!Se)return we;var Oe,Fe,ze=Se.call(we),Le=[];try{for(;(ke===void 0||ke-- >0)&&!(Oe=ze.next()).done;)Le.push(Oe.value)}catch(We){Fe={error:We}}finally{try{Oe&&!Oe.done&&(Se=ze.return)&&Se.call(ze)}finally{if(Fe)throw Fe.error}}return Le},Q=this&&this.__spreadArray||function(we,ke,Se){if(Se||arguments.length===2)for(var Oe,Fe=0,ze=ke.length;Fe<ze;Fe++)!Oe&&Fe in ke||(Oe||(Oe=Array.prototype.slice.call(ke,0,Fe)),Oe[Fe]=ke[Fe]);return we.concat(Oe||Array.prototype.slice.call(ke))};Object.defineProperty(G,"__esModule",{value:!0}),G.drawPath=G.formatColor=G.formatRgba=G.parseHexa=G.createPathForQuad=G.hatchFillPath=G.applyMatrixToPoint=G.emptyBounds=G.buildPath=G.fillPathWithBoxStyle=G.drawPathWithLineStyle=void 0;var de=V(9706);function I(we,ke,Se){var Oe=0;function Fe(We){for(var qe=[],Ne=0;Ne<We;++Ne){var Ke=Math.round(we[Oe++]*Se);ke.maxX=Math.max(ke.maxX,Ke),ke.minX=Math.min(ke.minX,Ke);var ot=Math.round(we[Oe++]*Se);ke.maxY=Math.max(ke.maxY,ot),ke.minY=Math.min(ke.minY,ot),ke.leftmostXForY[ot]=Math.min(ke.leftmostXForY[ot]||Number.MAX_VALUE,Ke),ke.rightmostXForY[ot]=Math.max(ke.rightmostXForY[ot]||Number.MIN_VALUE,Ke),ke.topmostYForX[Ke]=Math.min(ke.topmostYForX[Ke]||Number.MAX_VALUE,ot),ke.bottommostYForX[Ke]=Math.max(ke.bottommostYForX[Ke]||Number.MIN_VALUE,ot),ke.allPoints.push({x:Ke,y:ot}),qe.push(Ke,ot)}return qe}for(var ze=we.length,Le=new Path2D;Oe<ze;)switch(we[Oe++]){case"M":Le.moveTo.apply(Le,Fe(1));break;case"L":Le.lineTo.apply(Le,Fe(1));break;case"C":Le.bezierCurveTo.apply(Le,Fe(3));break;case"Q":Le.quadraticCurveTo.apply(Le,Fe(2));break;case"Z":Le.closePath()}return Le}G.drawPathWithLineStyle=function(we,ke,Se,Oe){Oe===void 0&&(Oe=1),Se&&Se.color&&(we.save(),we.translate(.5,.5),we.lineWidth=Oe,Se.pattern==="dashed"&&we.setLineDash([3,3]),Se.pattern==="dotted"&&we.setLineDash([2,2]),we.strokeStyle=Se.color,we.stroke(ke),we.restore())},G.fillPathWithBoxStyle=function(we,ke,Se,Oe,Fe){Fe&&(we.save(),Fe.fillColor&&(we.fillStyle=Fe.fillColor,we.fill(ke)),Fe.hatchColor&&ge(we,ke,Se,10,Fe.hatchColor,Oe,!1),we.restore())},G.buildPath=I,G.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},G.applyMatrixToPoint=function(we,ke){var Se=new DOMPoint(we.x,we.y);return{x:(Se=Se.matrixTransform(ke)).x,y:Se.y}};var _e,ne="";function ge(we,ke,Se,Oe,Fe,ze,Le){if((we.canvas.width<Se.maxX-Se.minX||we.canvas.height<Se.maxY-Se.minY)&&(Se={minX:0,maxX:we.canvas.width,minY:0,maxY:we.canvas.height,allPoints:[]}),!_e||Fe!==ne){ne=Fe;var We=document.createElement("canvas");We.width=Oe,We.height=8;var qe=We.getContext("2d");qe.clearRect(0,0,We.width,We.height),qe.rect(0,0,1,5),qe.fillStyle=Fe,qe.fill(),_e=we.createPattern(We,"repeat")}we.save();var Ne=new DOMMatrix;_e.setTransform(Ne.scale(Le?-1:1,1).rotate(0,0,-45+ze)),we.fillStyle=_e,we.fill(ke),we.restore()}function ye(we){return(we.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(ke){return parseInt(ke,16)/255})}function xe(we,ke){if(ke==="rgb"){var Se=te(we,4),Oe=Se[0],Fe=Se[1],ze=Se[2],Le=Se[3];return"rgb(".concat((255*Oe).toFixed()," ").concat((255*Fe).toFixed()," ").concat((255*ze).toFixed()).concat(Le===1?"":" / "+Math.round(100*Le)/100,")")}if(ke==="hsl"){var We=te((0,de.rgbaToHsla)(we),4),qe=We[0],Ne=We[1],Ke=We[2];return Le=We[3],"hsl(".concat(Math.round(360*qe),"deg ").concat(Math.round(100*Ne)," ").concat(Math.round(100*Ke)).concat(Le===1?"":" / "+Math.round(100*Le)/100,")")}throw new Error("NOT_REACHED")}G.hatchFillPath=ge,G.createPathForQuad=function(we,ke,Se,Oe){var Fe,ze,Le=["M",we.p1.x,we.p1.y,"L",we.p2.x,we.p2.y,"L",we.p3.x,we.p3.y,"L",we.p4.x,we.p4.y];try{for(var We=re(ke),qe=We.next();!qe.done;qe=We.next()){var Ne=qe.value;Le=Q(Q([],te(Le),!1),["L",Ne.p4.x,Ne.p4.y,"L",Ne.p3.x,Ne.p3.y,"L",Ne.p2.x,Ne.p2.y,"L",Ne.p1.x,Ne.p1.y,"L",Ne.p4.x,Ne.p4.y,"L",we.p4.x,we.p4.y],!1)}}catch(Ke){Fe={error:Ke}}finally{try{qe&&!qe.done&&(ze=We.return)&&ze.call(We)}finally{if(Fe)throw Fe.error}}return Le.push("Z"),I(Le,Se,Oe)},G.parseHexa=ye,G.formatRgba=xe,G.formatColor=function(we,ke){return ke==="rgb"||ke==="hsl"?xe(ye(we),ke):we.endsWith("FF")?we.substr(0,7):we},G.drawPath=function(we,ke,Se,Oe,Fe,ze,Le){we.save();var We=I(ke,ze,Le);return Se&&(we.fillStyle=Se,we.fill(We)),Oe&&(Fe==="dashed"&&we.setLineDash([3,3]),Fe==="dotted"&&we.setLineDash([2,2]),we.lineWidth=2,we.strokeStyle=Oe,we.stroke(We)),we.restore(),We}},7669:function(U,G,V){var re,te=this&&this.__extends||(re=function(we,ke){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Oe){Se.__proto__=Oe}||function(Se,Oe){for(var Fe in Oe)Object.prototype.hasOwnProperty.call(Oe,Fe)&&(Se[Fe]=Oe[Fe])},re(we,ke)},function(we,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Class extends value "+String(ke)+" is not a constructor or null");function Se(){this.constructor=we}re(we,ke),we.prototype=ke===null?Object.create(ke):(Se.prototype=ke.prototype,new Se)});Object.defineProperty(G,"__esModule",{value:!0}),G.HighlightOverlay=void 0;var Q=V(9706),de=V(9434),I=V(1521),_e=function(we){function ke(){var Se=we!==null&&we.apply(this,arguments)||this;return Se.gridLabelState={gridLayerCounter:0},Se}return te(ke,we),ke.prototype.setContainer=function(Se){this._container=Se},ke.prototype.setPlatform=function(Se){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+Se),we.prototype.setPlatform.call(this,Se)},Object.defineProperty(ke.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),ke.prototype.reset=function(Se){we.prototype.reset.call(this,Se),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},ke.prototype.install=function(){var Se=this.document.createElement("canvas");Se.classList.add("luna-dom-highlighter-fill"),this.container.append(Se);var Oe=this.document.createElement("div");this.container.append(Oe),this.tooltip=Oe,this.setCanvas(Se),we.prototype.install.call(this)},ke.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",we.prototype.uninstall.call(this)},ke.prototype.drawHighlight=function(Se){this.context.save();for(var Oe=(0,I.emptyBounds)(),Fe=Se.paths.slice();Fe.length;){var ze=Fe.pop();ze&&(this.context.save(),(0,I.drawPath)(this.context,ze.path,ze.fillColor,ze.outlineColor,void 0,Oe,this.emulationScaleFactor),Fe.length&&(this.context.globalCompositeOperation="destination-out",(0,I.drawPath)(this.context,Fe[Fe.length-1].path,"red",void 0,void 0,Oe,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var Le=Boolean(Se.paths.length&&Se.showRulers&&Oe.minX<20&&Oe.maxX+20<this.canvasWidth),We=Boolean(Se.paths.length&&Se.showRulers&&Oe.minY<20&&Oe.maxY+20<this.canvasHeight);return Se.showRulers&&this.drawAxis(this.context,Le,We),Se.paths.length&&(Se.showExtensionLines&&function(qe,Ne,Ke,ot,yt,ft,_t,Je){qe.save();var Qe=_t,tt=Je;if(qe.strokeStyle=yt||xe,qe.lineWidth=1,qe.translate(.5,.5),ft&&qe.setLineDash([3,3]),Ke)for(var ht in Ne.rightmostXForY)qe.beginPath(),qe.moveTo(Qe,Number(ht)),qe.lineTo(Ne.rightmostXForY[ht],Number(ht)),qe.stroke();else for(var ht in Ne.leftmostXForY)qe.beginPath(),qe.moveTo(0,Number(ht)),qe.lineTo(Ne.leftmostXForY[ht],Number(ht)),qe.stroke();if(ot)for(var it in Ne.bottommostYForX)qe.beginPath(),qe.moveTo(Number(it),tt),qe.lineTo(Number(it),Ne.topmostYForX[it]),qe.stroke();else for(var it in Ne.topmostYForX)qe.beginPath(),qe.moveTo(Number(it),0),qe.lineTo(Number(it),Ne.topmostYForX[it]),qe.stroke();qe.restore()}(this.context,Oe,Le,We,void 0,!1,this.canvasWidth,this.canvasHeight),Se.elementInfo&&function(qe,Ne,Ke,ot,yt,ft){qe.innerHTML="";var _t=(0,de.createChild)(qe,"div"),Je=(0,de.createChild)(_t,"div","tooltip-content"),Qe=function(yn,In){var It=(0,de.createElement)("div","element-info"),$t=(0,de.createChild)(It,"div","element-info-header"),an=function(Vr){return Vr.layoutObjectName&&Vr.layoutObjectName.endsWith("Grid")?"grid":Vr.layoutObjectName&&Vr.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(yn);an&&(0,de.createChild)($t,"div","element-layout-type ".concat(an));var xn=(0,de.createChild)($t,"div","element-description");(0,de.createChild)(xn,"span","material-tag-name").textContent=yn.tagName;var En=(0,de.createChild)(xn,"span","material-node-id"),$n=80;En.textContent=yn.idValue?"#"+(0,de.ellipsify)(yn.idValue,$n):"",En.classList.toggle("hidden",!yn.idValue);var zn=(0,de.createChild)(xn,"span","material-class-name");En.textContent.length<$n&&(zn.textContent=(0,de.ellipsify)(yn.className||"",$n-En.textContent.length)),zn.classList.toggle("hidden",!yn.className);var vn=(0,de.createChild)($t,"div","dimensions");(0,de.createChild)(vn,"span","material-node-width").textContent=String(Math.round(100*yn.nodeWidth)/100),(0,de.createTextChild)(vn,"\xD7"),(0,de.createChild)(vn,"span","material-node-height").textContent=String(Math.round(100*yn.nodeHeight)/100);var wn,Sn=yn.style||{};yn.isLockedAncestor&&xr("Showing content-visibility ancestor",""),yn.isLocked&&xr("Descendants are skipped due to content-visibility","");var Jn=Sn.color;Jn&&Jn!=="#00000000"&&Lr("Color",Jn,In);var tr=Sn["font-family"],pr=Sn["font-size"];tr&&pr!=="0px"&&xr("Font","".concat(pr," ").concat(tr));var Xn=Sn["background-color"];Xn&&Xn!=="#00000000"&&Lr("Background",Xn,In);var Gn=Sn.margin;Gn&&Gn!=="0px"&&xr("Margin",Gn);var cn=Sn.padding;cn&&cn!=="0px"&&xr("Padding",cn);var gn=yn.contrast?yn.contrast.backgroundColor:null,On=Jn&&Jn!=="#00000000"&&gn&&gn!=="#00000000";yn.showAccessibilityInfo&&(_r("Accessibility"),On&&Sn.color&&yn.contrast&&Br(Sn.color,yn.contrast),xr("Name",yn.accessibleName),xr("Role",yn.accessibleRole),Dr("Keyboard-focusable",yn.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function Kn(){wn||(wn=(0,de.createChild)(It,"div","element-info-body"))}function _r(Vr){Kn();var jr=(0,de.createChild)(wn,"div","element-info-row element-info-section");(0,de.createChild)(jr,"div","section-name").textContent=Vr,(0,de.createChild)((0,de.createChild)(jr,"div","separator-container"),"div","separator")}function kr(Vr,jr,Oi){Kn();var Di=(0,de.createChild)(wn,"div","element-info-row");return jr&&Di.classList.add(jr),(0,de.createChild)(Di,"div","element-info-name").textContent=Vr,(0,de.createChild)(Di,"div","element-info-gap"),(0,de.createChild)(Di,"div",Oi||"")}function Dr(Vr,jr){(0,de.createChild)(kr(Vr,"","element-info-value-icon"),"div",jr)}function xr(Vr,jr){(0,de.createTextChild)(kr(Vr,"","element-info-value-text"),jr)}function Lr(Vr,jr,Oi){var Di=kr(Vr,"","element-info-value-color"),Ai=(0,de.createChild)(Di,"div","color-swatch");(0,de.createChild)(Ai,"div","color-swatch-inner").style.backgroundColor=jr,(0,de.createTextChild)(Di,(0,I.formatColor)(jr,Oi))}function Br(Vr,jr){var Oi=(0,I.parseHexa)(Vr),Di=(0,I.parseHexa)(jr.backgroundColor);Oi[3]*=jr.textOpacity;var Ai=kr("Contrast","","element-info-value-contrast"),Cr=(0,de.createChild)(Ai,"div","contrast-text");Cr.style.color=(0,I.formatRgba)(Oi,"rgb"),Cr.style.backgroundColor=jr.backgroundColor,Cr.textContent="Aa";var Fo=(0,de.createChild)(Ai,"span");if(jr.contrastAlgorithm==="apca"){var Ea=(0,Q.contrastRatioAPCA)(Oi,Di),vi=(0,Q.getAPCAThreshold)(jr.fontSize,jr.fontWeight);Fo.textContent=String(Math.floor(100*Ea)/100)+"%",(0,de.createChild)(Ai,"div",vi===null||Math.abs(Ea)<vi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(jr.contrastAlgorithm==="aa"||jr.contrastAlgorithm==="aaa"){var sa=(0,Q.contrastRatio)(Oi,Di);vi=(0,Q.getContrastThreshold)(jr.fontSize,jr.fontWeight)[jr.contrastAlgorithm],Fo.textContent=String(Math.floor(100*sa)/100),(0,de.createChild)(Ai,"div",sa<vi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return It}(Ne,Ke);Je.appendChild(Qe);var tt,ht=Je.offsetWidth,it=Je.offsetHeight,pt=8,vt=2,ut=2*pt,Nt=pt+2,at=vt+Nt,Mt=yt-vt-Nt-ut;if(ot.maxX-ot.minX<ut+2*Nt)tt=.5*(ot.minX+ot.maxX)-pt;else{var nn=ot.minX+Nt,Tn=ot.maxX-Nt-ut;tt=nn>at&&nn<Mt?nn:(0,de.constrainNumber)(at,nn,Tn)}var Jt=tt<at||tt>Mt,on=tt-Nt;on=(0,de.constrainNumber)(on,vt,yt-ht-vt);var Vt=ot.minY-pt-it,Rt=!0;Vt<0?(Vt=Math.min(ft-it,ot.maxY+pt),Rt=!1):ot.minY>ft&&(Vt=ft-pt-it);var Yt=on>=ot.minX&&on+ht<=ot.maxX&&Vt>=ot.minY&&Vt+it<=ot.maxY;if(on<ot.maxX&&on+ht>ot.minX&&Vt<ot.maxY&&Vt+it>ot.minY&&!Yt)return void(Je.style.display="none");if(Je.style.top=Vt+"px",Je.style.left=on+"px",!Jt){var un=(0,de.createChild)(Je,"div","tooltip-arrow");un.style.clipPath=Rt?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",un.style.top=(Rt?it-1:-pt)+"px",un.style.left=tt-on+"px"}}(this.tooltip,Se.elementInfo,Se.colorFormat,Oe,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:Oe}},ke.prototype.drawAxis=function(Se,Oe,Fe){Se.save();var ze=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,Le=this.scrollX*this.pageScaleFactor,We=this.scrollY*this.pageScaleFactor;function qe(ht){return Math.round(ht*ze)}function Ne(ht){return Math.round(ht/ze)}var Ke=this.canvasWidth/ze,ot=this.canvasHeight/ze,yt=50;Se.save(),Se.fillStyle=ye,Fe?Se.fillRect(0,qe(ot)-15,qe(Ke),qe(ot)):Se.fillRect(0,0,qe(Ke),15),Se.globalCompositeOperation="destination-out",Se.fillStyle="red",Oe?Se.fillRect(qe(Ke)-15,0,qe(Ke),qe(ot)):Se.fillRect(0,0,15,qe(ot)),Se.restore(),Se.fillStyle=ye,Oe?Se.fillRect(qe(Ke)-15,0,qe(Ke),qe(ot)):Se.fillRect(0,0,15,qe(ot)),Se.lineWidth=1,Se.strokeStyle=ge,Se.fillStyle=ge,Se.save(),Se.translate(-Le,.5-We);for(var ft=ot+Ne(We),_t=100;_t<ft;_t+=100)Se.save(),Se.translate(Le,qe(_t)),Se.rotate(-Math.PI/2),Se.fillText(String(_t),2,Oe?qe(Ke)-7:13),Se.restore();Se.translate(.5,-.5);for(var Je=Ke+Ne(Le),Qe=100;Qe<Je;Qe+=100)Se.save(),Se.fillText(String(Qe),qe(Qe)+2,Fe?We+qe(ot)-7:We+13),Se.restore();for(Se.restore(),Se.save(),Oe&&(Se.translate(qe(Ke),0),Se.scale(-1,1)),Se.translate(-Le,.5-We),ft=ot+Ne(We),_t=yt;_t<ft;_t+=yt){Se.beginPath(),Se.moveTo(Le,qe(_t));var tt=_t%100?5:8;Se.lineTo(Le+tt,qe(_t)),Se.stroke()}for(Se.strokeStyle=ne,_t=5;_t<ft;_t+=5)_t%yt&&(Se.beginPath(),Se.moveTo(Le,qe(_t)),Se.lineTo(Le+5,qe(_t)),Se.stroke());for(Se.restore(),Se.save(),Fe&&(Se.translate(0,qe(ot)),Se.scale(1,-1)),Se.translate(.5-Le,-We),Je=Ke+Ne(Le),Qe=yt;Qe<Je;Qe+=yt)Se.beginPath(),Se.moveTo(qe(Qe),We),tt=Qe%100?5:8,Se.lineTo(qe(Qe),We+tt),Se.stroke();for(Se.strokeStyle=ne,Qe=5;Qe<Je;Qe+=5)Qe%yt&&(Se.beginPath(),Se.moveTo(qe(Qe),We),Se.lineTo(qe(Qe),We+5),Se.stroke());Se.restore(),Se.restore()},ke}(de.Overlay);G.HighlightOverlay=_e;var ne="rgba(0,0,0,0.2)",ge="rgba(0,0,0,0.7)",ye="rgba(255, 255, 255, 0.8)",xe="rgba(128, 128, 128, 0.3)"},1160:function(U,G,V){var re,te=this&&this.__extends||(re=function(ke,Se){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,Fe){Oe.__proto__=Fe}||function(Oe,Fe){for(var ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&(Oe[ze]=Fe[ze])},re(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=ke}re(ke,Se),ke.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)}),Q=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(1512)),_e=V(2062),ne=Q(V(3783)),ge=Q(V(6329)),ye=Q(V(4193)),xe=Q(V(5852)),we=function(ke){function Se(Oe,Fe,ze){var Le=Fe.compName,We=(ze===void 0?{}:ze).theme,qe=We===void 0?"light":We,Ne=ke.call(this)||this;return Ne.subComponents=[],Ne.compName=Le,Ne.c=(0,_e.classPrefix)(Le),Ne.options={},Ne.container=Oe,Ne.$container=(0,I.default)(Oe),Ne.$container.addClass(["luna-".concat(Le),Ne.c("platform-".concat((0,_e.getPlatform)()))]),Ne.on("optionChange",function(Ke,ot,yt){var ft=Ne.c;Ke==="theme"&&(Ne.$container.rmClass(ft("theme-".concat(yt))).addClass(ft("theme-".concat(ot))),(0,ne.default)(Ne.subComponents,function(_t){return _t.setOption("theme",ot)}))}),Ne.setOption("theme",qe),Ne}return te(Se,ke),Se.prototype.destroy=function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat((0,_e.getPlatform)()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Se.prototype.setOption=function(Oe,Fe){var ze=this,Le=this.options,We={};typeof Oe=="string"?We[Oe]=Fe:We=Oe,(0,ne.default)(We,function(qe,Ne){var Ke=Le[Ne];Le[Ne]=qe,ze.emit("optionChange",Ne,qe,Ke)})},Se.prototype.getOption=function(Oe){return this.options[Oe]},Se.prototype.addSubComponent=function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)},Se.prototype.removeSubComponent=function(Oe){(0,xe.default)(this.subComponents,function(Fe){return Fe===Oe})},Se.prototype.destroySubComponents=function(){(0,ne.default)(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]},Se.prototype.initOptions=function(Oe,Fe){Fe===void 0&&(Fe={}),(0,ye.default)(Oe,Fe),(0,ge.default)(this.options,Oe)},Se.prototype.find=function(Oe){return this.$container.find(this.c(Oe))},Se}(de.default);G.default=we},2062:function(U,G,V){var re=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.resetCanvasSize=G.getPlatform=G.pxToNum=G.executeAfterTransition=G.hasVerticalScrollbar=G.measuredScrollbarWidth=G.eventPage=G.eventClient=G.drag=G.classPrefix=void 0;var te=re(V(2461)),Q=re(V(4331)),de=re(V(5610)),I=re(V(7483)),_e=re(V(3990)),ne=re(V(6341)),ge=re(V(3875)),ye=re(V(6954)),xe=re(V(9585));function we(ze,Le){for(var We=0,qe=ze.length;We<qe;We++){var Ne=ze[We];Le(Ne),Ne.content&&we(Ne.content,Le)}}G.classPrefix=function(ze){var Le="luna-".concat(ze,"-");function We(qe){return(0,te.default)((0,Q.default)(qe).split(/\s+/),function(Ne){return(0,ne.default)(Ne,Le)?Ne:Ne.replace(/[\w-]+/,function(Ke){return"".concat(Le).concat(Ke)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var Ne=I.default.parse(qe);return we(Ne,function(Ke){Ke.attrs&&Ke.attrs.class&&(Ke.attrs.class=We(Ke.attrs.class))}),I.default.stringify(Ne)}catch{return We(qe)}return We(qe)}};var ke,Se="ontouchstart"in de.default,Oe={start:"touchstart",move:"touchmove",end:"touchend"},Fe={start:"mousedown",move:"mousemove",end:"mouseup"};G.drag=function(ze){return Se?Oe[ze]:Fe[ze]},G.eventClient=function(ze,Le){var We=ze==="x"?"clientX":"clientY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.eventPage=function(ze,Le){var We=ze==="x"?"pageX":"pageY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.measuredScrollbarWidth=function(){if((0,_e.default)(ke))return ke;if(!document)return 16;var ze=document.createElement("div"),Le=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Le.setAttribute("style","height: 200px"),ze.appendChild(Le),document.body.appendChild(ze),ke=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),ke},G.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},G.executeAfterTransition=function(ze,Le){if((0,xe.default)(ze))return Le();var We=function(qe){qe.target===ze&&(ze.removeEventListener("transitionend",We),Le())};ze.addEventListener("transitionend",We)},G.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},G.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},G.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},8719:function(U,G,V){var re,te=this&&this.__extends||(re=function(_t,Je){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Qe,tt){Qe.__proto__=tt}||function(Qe,tt){for(var ht in tt)Object.prototype.hasOwnProperty.call(tt,ht)&&(Qe[ht]=tt[ht])},re(_t,Je)},function(_t,Je){if(typeof Je!="function"&&Je!==null)throw new TypeError("Class extends value "+String(Je)+" is not a constructor or null");function Qe(){this.constructor=_t}re(_t,Je),_t.prototype=Je===null?Object.create(Je):(Qe.prototype=Je.prototype,new Qe)}),Q=this&&this.__makeTemplateObject||function(_t,Je){return Object.defineProperty?Object.defineProperty(_t,"raw",{value:Je}):_t.raw=Je,_t},de=this&&this.__assign||function(){return de=Object.assign||function(_t){for(var Je,Qe=1,tt=arguments.length;Qe<tt;Qe++)for(var ht in Je=arguments[Qe])Object.prototype.hasOwnProperty.call(Je,ht)&&(_t[ht]=Je[ht]);return _t},de.apply(this,arguments)},I=this&&this.__importDefault||function(_t){return _t&&_t.__esModule?_t:{default:_t}};Object.defineProperty(G,"__esModule",{value:!0});var _e,ne=I(V(6370)),ge=I(V(3783)),ye=I(V(1512)),xe=I(V(8613)),we=I(V(2461)),ke=I(V(5972)),Se=I(V(1907)),Oe=I(V(1352)),Fe=I(V(2289)),ze=I(V(6341)),Le=I(V(3651)),We=I(V(7756)),qe=I(V(8901)),Ne=I(V(4331)),Ke={comment:"",string:"",number:"",keyword:"",operator:""},ot=function(_t){function Je(Qe,tt){tt===void 0&&(tt={});var ht=_t.call(this,Qe,{compName:"dom-viewer"},tt)||this;return ht.isExpanded=!1,ht.isChildNodesRendered=!1,ht.select=function(){var it=ht.c;(0,ye.default)(ht.options.rootContainer).find(it(".selected")).rmClass(it("selected")),ht.$tag.addClass(it("selected"))},ht.toggle=function(){ht.isExpanded?ht.collapse():ht.expand()},ht.initOptions(tt,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:Qe,ignore:function(){return!1}}),ht.initTpl(),ht.bindEvent(),ht.options.isEndTag||ht.initObserver(),ht}return te(Je,_t),Je.prototype.expand=function(){if(this.isExpandable()){this.isExpanded=!0;var Qe=this.$tag,tt=this.c,ht=this.options.node;Qe.html(this.renderHtmlTag(de(de({},yt(ht)),{hasTail:!1,hasToggleButton:!0}))),Qe.addClass(tt("expanded")),this.$children.rmClass(tt("hidden")),this.renderChildNodes(ht)}},Je.prototype.collapse=function(){if(this.isExpandable()){this.isExpanded=!1;var Qe=this.$tag,tt=this.c,ht=this.options.node;this.$children.addClass(tt("hidden")),this.$tag.html(this.renderHtmlTag(de(de({},yt(ht)),{hasTail:!0,hasToggleButton:!0}))),Qe.rmClass(tt("expanded"))}},Je.prototype.destroy=function(){this.observer&&this.observer.disconnect(),_t.prototype.destroy.call(this)},Je.prototype.initObserver=function(){var Qe=this;this.observer=new Fe.default(function(tt){(0,ge.default)(tt,function(ht){return Qe.handleMutation(ht)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})},Je.prototype.handleMutation=function(Qe){var tt=this.$tag,ht=this.c,it=this.options.node;(0,ze.default)(["attributes","childList"],Qe.type)?(Qe.type==="childList"&&(this.isChildNodesRendered=!1),this.isExpandable()?this.isExpanded?this.expand():this.collapse():(this.$children.addClass(ht("hidden")),tt.html(this.renderHtmlTag(de(de({},yt(it)),{hasTail:!1}))))):Qe.type==="characterData"&&(it.nodeType===Node.TEXT_NODE?tt.html(this.renderTextNode(it)):it.nodeType===Node.COMMENT_NODE&&tt.html(this.renderHtmlComment(it.nodeValue)))},Je.prototype.bindEvent=function(){var Qe=this,tt=this.c,ht=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&ht.on("click",tt(".toggle"),function(it){it.stopPropagation(),Qe.toggle()}),ht.on("click",this.select)},Je.prototype.isExpandable=function(){var Qe=this.options.node;return Qe.nodeType===Node.ELEMENT_NODE&&this.getChildNodes(Qe).length>0},Je.prototype.getChildNodes=function(Qe){var tt=this.options,ht=tt.rootContainer,it=tt.ignore,pt=(0,Oe.default)(Qe.childNodes);return pt=(0,ke.default)(pt,function(vt){if(vt.nodeType===Node.TEXT_NODE||vt.nodeType===Node.COMMENT_NODE){var ut=vt.nodeValue;if((0,Ne.default)(ut)==="")return!1}return vt!==ht&&!it(vt)})},Je.prototype.initTpl=function(){var Qe=this.container,tt=this.c,ht=this.options,it=ht.node,pt=ht.isEndTag,vt=(0,ye.default)((0,xe.default)("li"));if(vt.addClass(tt("tree-item")),this.$tag=vt,pt)vt.html(tt('<span class="html-tag" style="margin-left: -12px;">&lt;<span class="tag-name">/'.concat(it.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(it.nodeType===Node.ELEMENT_NODE){var ut=this.isExpandable(),Nt=de(de({},yt(it)),{hasTail:ut,hasToggleButton:ut});vt.html(this.renderHtmlTag(Nt))}else if(it.nodeType===Node.TEXT_NODE)vt.html(this.renderTextNode(it));else{if(it.nodeType!==Node.COMMENT_NODE)return;var at=it.nodeValue;if(at.trim()==="")return;vt.html(this.renderHtmlComment(at))}if(Qe.appendChild(vt.get(0)),it.nodeType===it.ELEMENT_NODE){var Mt=(0,ye.default)((0,xe.default)("ul"));Mt.addClass([tt("children"),tt("hidden")]),Qe.appendChild(Mt.get(0)),this.$children=Mt}},Je.prototype.renderChildNodes=function(Qe){var tt=this;if(!this.isChildNodesRendered){this.isChildNodesRendered=!0,this.destroySubComponents();var ht=this.options,it=ht.rootContainer,pt=ht.ignore,vt=this.$children.get(0),ut=this.getChildNodes(Qe);(0,ge.default)(ut,function(Nt){tt.addSubComponent(new Je(vt,{node:Nt,parent:tt,rootContainer:it,ignore:pt}))}),Qe&&this.addSubComponent(new Je(vt,{node:Qe,parent:this,isEndTag:!0,rootContainer:it,ignore:pt}))}},Je.prototype.renderHtmlTag=function(Qe){var tt=(0,we.default)(Qe.attributes,function(pt){var vt=pt.name,ut=pt.value,Nt=pt.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat((0,qe.default)(vt),"</span>").concat(ut?'="<span class="attribute-value'.concat(Nt?" attribute-underline":"",'">').concat((0,qe.default)(ut),'</span>"'):"","</span>")}),ht="";Qe.hasTail?ht="".concat(Qe.hasTail?"\u2026":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(Qe.tagName,"</span>&gt;</span>"):this.isExpandable()||(ht='<span class="html-tag">&lt;<span class="tag-name">/'.concat(Qe.tagName,"</span>&gt;</span>"));var it="";return Qe.hasToggleButton&&(it='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c((0,Se.default)(_e||(_e=Q([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`],[`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),it,Qe.tagName,tt,ht))},Je.prototype.renderTextNode=function(Qe){var tt=this.c,ht=Qe.nodeValue,it=Qe.parentElement,pt='<span class="text-node">',vt='</span><span class="selection"></span>';if(it&&ht.length<1e4){if(it.tagName==="STYLE")return tt("".concat(pt).concat((0,Le.default)(ht,"css",Ke)).concat(vt));if(it.tagName==="SCRIPT")return tt("".concat(pt).concat((0,Le.default)(ht,"js",Ke)).concat(vt))}return tt('"'.concat(pt).concat((0,qe.default)((0,We.default)(ht,1e4,{separator:" ",ellipsis:"\u2026"}))).concat(vt,'"'))},Je.prototype.renderHtmlComment=function(Qe){return this.c('<span class="html-comment">&lt;!-- '.concat((0,qe.default)(Qe),' --&gt;</span><span class="selection"></span>'))},Je}(ne.default);function yt(_t){var Je={tagName:"",attributes:[]};Je.tagName=_t.tagName.toLocaleLowerCase();var Qe=[];return(0,ge.default)(_t.attributes,function(tt){var ht=tt.name,it=tt.value;Qe.push({name:ht,value:it,isLink:ft(_t,ht)})}),Je.attributes=Qe,Je}function ft(_t,Je){var Qe=_t.tagName;return(Qe==="SCRIPT"||Qe==="IMAGE"||Qe==="VIDEO"||Qe==="AUDIO")&&Je==="src"||Qe==="LINK"&&Je==="href"}G.default=ot,U.exports=ot,U.exports.default=ot},6370:function(U,G,V){var re,te=this&&this.__extends||(re=function(ke,Se){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,Fe){Oe.__proto__=Fe}||function(Oe,Fe){for(var ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&(Oe[ze]=Fe[ze])},re(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=ke}re(ke,Se),ke.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)}),Q=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(1512)),_e=V(8759),ne=Q(V(3783)),ge=Q(V(6329)),ye=Q(V(4193)),xe=Q(V(5852)),we=function(ke){function Se(Oe,Fe,ze){var Le=Fe.compName,We=(ze===void 0?{}:ze).theme,qe=We===void 0?"light":We,Ne=ke.call(this)||this;return Ne.subComponents=[],Ne.compName=Le,Ne.c=(0,_e.classPrefix)(Le),Ne.options={},Ne.container=Oe,Ne.$container=(0,I.default)(Oe),Ne.$container.addClass(["luna-".concat(Le),Ne.c("platform-".concat((0,_e.getPlatform)()))]),Ne.on("optionChange",function(Ke,ot,yt){var ft=Ne.c;Ke==="theme"&&(Ne.$container.rmClass(ft("theme-".concat(yt))).addClass(ft("theme-".concat(ot))),(0,ne.default)(Ne.subComponents,function(_t){return _t.setOption("theme",ot)}))}),Ne.setOption("theme",qe),Ne}return te(Se,ke),Se.prototype.destroy=function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat((0,_e.getPlatform)()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Se.prototype.setOption=function(Oe,Fe){var ze=this,Le=this.options,We={};typeof Oe=="string"?We[Oe]=Fe:We=Oe,(0,ne.default)(We,function(qe,Ne){var Ke=Le[Ne];Le[Ne]=qe,ze.emit("optionChange",Ne,qe,Ke)})},Se.prototype.getOption=function(Oe){return this.options[Oe]},Se.prototype.addSubComponent=function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)},Se.prototype.removeSubComponent=function(Oe){(0,xe.default)(this.subComponents,function(Fe){return Fe===Oe})},Se.prototype.destroySubComponents=function(){(0,ne.default)(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]},Se.prototype.initOptions=function(Oe,Fe){Fe===void 0&&(Fe={}),(0,ye.default)(Oe,Fe),(0,ge.default)(this.options,Oe)},Se.prototype.find=function(Oe){return this.$container.find(this.c(Oe))},Se}(de.default);G.default=we},8759:function(U,G,V){var re=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.resetCanvasSize=G.getPlatform=G.pxToNum=G.executeAfterTransition=G.hasVerticalScrollbar=G.measuredScrollbarWidth=G.eventPage=G.eventClient=G.drag=G.classPrefix=void 0;var te=re(V(2461)),Q=re(V(4331)),de=re(V(5610)),I=re(V(7483)),_e=re(V(3990)),ne=re(V(6341)),ge=re(V(3875)),ye=re(V(6954)),xe=re(V(9585));function we(ze,Le){for(var We=0,qe=ze.length;We<qe;We++){var Ne=ze[We];Le(Ne),Ne.content&&we(Ne.content,Le)}}G.classPrefix=function(ze){var Le="luna-".concat(ze,"-");function We(qe){return(0,te.default)((0,Q.default)(qe).split(/\s+/),function(Ne){return(0,ne.default)(Ne,Le)?Ne:Ne.replace(/[\w-]+/,function(Ke){return"".concat(Le).concat(Ke)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var Ne=I.default.parse(qe);return we(Ne,function(Ke){Ke.attrs&&Ke.attrs.class&&(Ke.attrs.class=We(Ke.attrs.class))}),I.default.stringify(Ne)}catch{return We(qe)}return We(qe)}};var ke,Se="ontouchstart"in de.default,Oe={start:"touchstart",move:"touchmove",end:"touchend"},Fe={start:"mousedown",move:"mousemove",end:"mouseup"};G.drag=function(ze){return Se?Oe[ze]:Fe[ze]},G.eventClient=function(ze,Le){var We=ze==="x"?"clientX":"clientY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.eventPage=function(ze,Le){var We=ze==="x"?"pageX":"pageY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.measuredScrollbarWidth=function(){if((0,_e.default)(ke))return ke;if(!document)return 16;var ze=document.createElement("div"),Le=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Le.setAttribute("style","height: 200px"),ze.appendChild(Le),document.body.appendChild(ze),ke=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),ke},G.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},G.executeAfterTransition=function(ze,Le){if((0,xe.default)(ze))return Le();var We=function(qe){qe.target===ze&&(ze.removeEventListener("transitionend",We),Le())};ze.addEventListener("transitionend",We)},G.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},G.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},G.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},6093:function(U,G,V){var re,te=this&&this.__extends||(re=function(xe,we){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,Se){ke.__proto__=Se}||function(ke,Se){for(var Oe in Se)Object.prototype.hasOwnProperty.call(Se,Oe)&&(ke[Oe]=Se[Oe])},re(xe,we)},function(xe,we){if(typeof we!="function"&&we!==null)throw new TypeError("Class extends value "+String(we)+" is not a constructor or null");function ke(){this.constructor=xe}re(xe,we),xe.prototype=we===null?Object.create(we):(ke.prototype=we.prototype,new ke)}),Q=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1512)),I=Q(V(5229)),_e=Q(V(2244)),ne=Q(V(8613)),ge=function(xe){function we(ke,Se){Se===void 0&&(Se={});var Oe=xe.call(this,ke,{compName:"notification"},Se)||this;return Oe.notifications=[],Oe.initOptions(Se,{position:{x:"right",y:"bottom"},duration:2e3}),Oe.initTpl(),Oe}return te(we,xe),we.prototype.notify=function(ke,Se){var Oe=this;Se===void 0&&(Se={duration:this.options.duration});var Fe=new ye(this,ke);this.notifications.push(Fe),this.add(Fe),setTimeout(function(){return Oe.remove(Fe.id)},Se.duration)},we.prototype.dismissAll=function(){for(var ke=this.notifications,Se=ke[0];Se;)this.remove(Se.id),Se=ke[0]},we.prototype.add=function(ke){this.container.appendChild(ke.container)},we.prototype.remove=function(ke){var Se=this.notifications,Oe=(0,_e.default)(Se,function(ze){return ze.id===ke});if(Oe){Oe.destroy();var Fe=Se.indexOf(Oe);Se.splice(Fe,1)}},we.prototype.initTpl=function(){var ke=this.$container,Se=this.options.position,Oe=Se.x,Fe=Se.y,ze="flex-end",Le="flex-end";switch(Oe){case"center":Le="center";break;case"left":Le="flex-start"}Fe==="top"&&(ze="flex-start"),ke.attr("style","justify-content: ".concat(ze,"; align-items: ").concat(Le))},we}(Q(V(5404)).default);G.default=ge;var ye=function(){function xe(we,ke){this.container=(0,ne.default)("div"),this.$container=(0,de.default)(this.container),this.notification=we,this.content=ke,this.id=(0,I.default)("luna-notification-"),this.$container.attr({id:this.id,class:we.c("item ".concat(we.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return xe.prototype.destroy=function(){this.$container.remove()},xe.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},xe}();U.exports=ge,U.exports.default=ge},5404:function(U,G,V){var re,te=this&&this.__extends||(re=function(ke,Se){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,Fe){Oe.__proto__=Fe}||function(Oe,Fe){for(var ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&(Oe[ze]=Fe[ze])},re(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=ke}re(ke,Se),ke.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)}),Q=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(1512)),_e=V(164),ne=Q(V(3783)),ge=Q(V(6329)),ye=Q(V(4193)),xe=Q(V(5852)),we=function(ke){function Se(Oe,Fe,ze){var Le=Fe.compName,We=(ze===void 0?{}:ze).theme,qe=We===void 0?"light":We,Ne=ke.call(this)||this;return Ne.subComponents=[],Ne.compName=Le,Ne.c=(0,_e.classPrefix)(Le),Ne.options={},Ne.container=Oe,Ne.$container=(0,I.default)(Oe),Ne.$container.addClass(["luna-".concat(Le),Ne.c("platform-".concat((0,_e.getPlatform)()))]),Ne.on("optionChange",function(Ke,ot,yt){var ft=Ne.c;Ke==="theme"&&(Ne.$container.rmClass(ft("theme-".concat(yt))).addClass(ft("theme-".concat(ot))),(0,ne.default)(Ne.subComponents,function(_t){return _t.setOption("theme",ot)}))}),Ne.setOption("theme",qe),Ne}return te(Se,ke),Se.prototype.destroy=function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat((0,_e.getPlatform)()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Se.prototype.setOption=function(Oe,Fe){var ze=this,Le=this.options,We={};typeof Oe=="string"?We[Oe]=Fe:We=Oe,(0,ne.default)(We,function(qe,Ne){var Ke=Le[Ne];Le[Ne]=qe,ze.emit("optionChange",Ne,qe,Ke)})},Se.prototype.getOption=function(Oe){return this.options[Oe]},Se.prototype.addSubComponent=function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)},Se.prototype.removeSubComponent=function(Oe){(0,xe.default)(this.subComponents,function(Fe){return Fe===Oe})},Se.prototype.destroySubComponents=function(){(0,ne.default)(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]},Se.prototype.initOptions=function(Oe,Fe){Fe===void 0&&(Fe={}),(0,ye.default)(Oe,Fe),(0,ge.default)(this.options,Oe)},Se.prototype.find=function(Oe){return this.$container.find(this.c(Oe))},Se}(de.default);G.default=we},164:function(U,G,V){var re=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.resetCanvasSize=G.getPlatform=G.pxToNum=G.executeAfterTransition=G.hasVerticalScrollbar=G.measuredScrollbarWidth=G.eventClient=G.drag=G.classPrefix=void 0;var te=re(V(2461)),Q=re(V(4331)),de=re(V(5610)),I=re(V(7483)),_e=re(V(3990)),ne=re(V(6341)),ge=re(V(3875)),ye=re(V(6954)),xe=re(V(9585));function we(ze,Le){for(var We=0,qe=ze.length;We<qe;We++){var Ne=ze[We];Le(Ne),Ne.content&&we(Ne.content,Le)}}G.classPrefix=function(ze){var Le="luna-".concat(ze,"-");function We(qe){return(0,te.default)((0,Q.default)(qe).split(/\s+/),function(Ne){return(0,ne.default)(Ne,Le)?Ne:Ne.replace(/[\w-]+/,function(Ke){return"".concat(Le).concat(Ke)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var Ne=I.default.parse(qe);return we(Ne,function(Ke){Ke.attrs&&Ke.attrs.class&&(Ke.attrs.class=We(Ke.attrs.class))}),I.default.stringify(Ne)}catch{return We(qe)}return We(qe)}};var ke,Se="ontouchstart"in de.default,Oe={start:"touchstart",move:"touchmove",end:"touchend"},Fe={start:"mousedown",move:"mousemove",end:"mouseup"};G.drag=function(ze){return Se?Oe[ze]:Fe[ze]},G.eventClient=function(ze,Le){var We=ze==="x"?"clientX":"clientY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.measuredScrollbarWidth=function(){if((0,_e.default)(ke))return ke;if(!document)return 16;var ze=document.createElement("div"),Le=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Le.setAttribute("style","height: 200px"),ze.appendChild(Le),document.body.appendChild(ze),ke=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),ke},G.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},G.executeAfterTransition=function(ze,Le){if((0,xe.default)(ze))return Le();var We=function(qe){qe.target===ze&&(ze.removeEventListener("transitionend",We),Le())};ze.addEventListener("transitionend",We)},G.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},G.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},G.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},1717:function(U,G,V){var re,te=this&&this.__extends||(re=function(yt,ft){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_t,Je){_t.__proto__=Je}||function(_t,Je){for(var Qe in Je)Object.prototype.hasOwnProperty.call(Je,Qe)&&(_t[Qe]=Je[Qe])},re(yt,ft)},function(yt,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Class extends value "+String(ft)+" is not a constructor or null");function _t(){this.constructor=yt}re(yt,ft),yt.prototype=ft===null?Object.create(ft):(_t.prototype=ft.prototype,new _t)}),Q=this&&this.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(G,"__esModule",{value:!0}),G.getObjAbstract=void 0;var de=Q(V(1512)),I=Q(V(6930)),_e=Q(V(5166)),ne=Q(V(5229)),ge=Q(V(3023)),ye=Q(V(3875)),xe=Q(V(996)),we=Q(V(3783)),ke=Q(V(9433)),Se=Q(V(3990)),Oe=Q(V(4696)),Fe=Q(V(6768)),ze=Q(V(2533)),Le=Q(V(3063)),We=Q(V(6339)),qe=V(8629),Ne=function(yt){function ft(_t){var Je=yt.call(this,_t,{compName:"object-viewer"})||this;return Je.onItemClick=function(Qe){var tt=Je,ht=tt.map,it=tt.c,pt=(0,de.default)(Qe.curTarget),vt=pt.data("object-id"),ut=pt.find("span").eq(0);if(!pt.data("first-level")&&(vt&&(pt.find("ul").html(Je.objToHtml(ht[vt],!1)),pt.rmAttr("data-object-id")),Qe.stopImmediatePropagation(),ut.hasClass(it("expanded")))){var Nt=pt.find("ul").eq(0);ut.hasClass(it("collapsed"))?(ut.rmClass(it("collapsed")),Nt.show()):(ut.addClass(it("collapsed")),Nt.hide()),Je.emit("change")}},Je.bindEvent(),Je}return te(ft,yt),ft.prototype.set=function(_t){(0,Fe.default)(_t)&&(_t=JSON.parse(_t)),this.data={id:(0,ne.default)("json"),enumerable:{0:_t}},this.map={},Ke(this.map,this.data),this.render()},ft.prototype.destroy=function(){yt.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},ft.prototype.objToHtml=function(_t,Je){var Qe=this,tt="";return(0,we.default)(["enumerable","unenumerable","symbol"],function(ht){if(_t[ht]){var it=(0,ze.default)(_t[ht]);(0,We.default)(it);for(var pt=0,vt=it.length;pt<vt;pt++){var ut=it[pt];tt+=Qe.createEl(ut,_t[ht][ut],ht,Je)}}}),_t.proto&&(tt===""?tt=this.objToHtml(_t.proto):tt+=this.createEl("__proto__",_t.proto,"proto")),tt},ft.prototype.createEl=function(_t,Je,Qe,tt){tt===void 0&&(tt=!1);var ht=this.c,it=typeof Je;if(Je===null)return"<li>".concat(Mt(_t),'<span class="').concat(ht("null"),'">null</span></li>');if((0,Se.default)(Je)||(0,Oe.default)(Je))return"<li>".concat(Mt(_t),'<span class="').concat(ht(it),'">').concat((0,qe.encode)(Je),"</span></li>");if(Je.type==="RegExp"&&(it="regexp"),Je.type==="Number"&&(it="number"),Je.type==="Number"||Je.type==="RegExp")return"<li>".concat(Mt(_t),'<span class="').concat(ht(it),'">').concat((0,qe.encode)(Je.value),"</span></li>");if(Je.type==="Undefined"||Je.type==="Symbol")return"<li>".concat(Mt(_t),'<span class="').concat(ht("special"),'">').concat((0,Le.default)(Je.type),"</span></li>");if(Je==="(...)")return"<li>".concat(Mt(_t),'<span class="').concat(ht("special"),'">').concat(Je,"</span></li>");if((0,_e.default)(Je)){var pt=Je.id,vt=Je.reference,ut=ot(Je)||(0,ge.default)(it),Nt=tt?"":'<span class="'.concat(ht("expanded collapsed"),'"><span class="').concat(ht("icon icon-caret-right"),'"></span><span class="').concat(ht("icon icon-caret-down"),'"></span></span>'),at="<li ".concat(tt?'data-first-level="true"':""," ").concat('data-object-id="'+(vt||pt)+'"',">").concat(Nt).concat(Mt(_t),'<span class="').concat(ht("open"),'">').concat(tt?"":ut,'</span><ul class="').concat(ht(it),'" ').concat(tt?"":'style="display:none"',">");return tt&&(at+=this.objToHtml(this.map[pt])),at+'</ul><span class="'.concat(ht("close"),'"></span></li>')}function Mt(nn){if(tt||(0,_e.default)(Je)&&Je.jsonSplitArr)return"";var Tn=ht("key");return Qe!=="unenumerable"&&Qe!=="proto"&&Qe!=="symbol"||(Tn=ht("key-lighter")),'<span class="'.concat(Tn,'">').concat((0,qe.encode)(nn),"</span>: ")}return"<li>".concat(Mt(_t),'<span class="').concat(ht(typeof Je),'">"').concat((0,qe.encode)(Je),'"</span></li>')},ft.prototype.render=function(){var _t=this.map[this.data.id];this.$container.html(this.objToHtml(_t,!0))},ft.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},ft}(Q(V(5198)).default);function Ke(yt,ft){var _t=ft.id;if(_t||_t===0){if(ft.type&&(0,I.default)(ft.type,"Array")&&ft.enumerable){var Je=function(pt,vt,ut){var Nt=[],at={};return(0,we.default)(pt.enumerable,function(Mt,nn){var Tn=(0,ye.default)(nn);(0,ke.default)(Tn)?at[nn]=Mt:Nt[Tn]=Mt}),Nt.enumerable=at,Nt.type=ut,Nt.id=vt,pt.unenumerable&&(Nt.unenumerable=pt.unenumerable),pt.symbol&&(Nt.symbol=pt.symbol),pt.proto&&(Nt.proto=pt.proto),Nt}(ft,_t,ft.type);Je.length>100&&(ft=function(pt){var vt=0,ut={};(0,we.default)((0,xe.default)(pt,100),function(at){var Mt={},nn=vt;Mt.type="["+nn,Mt.enumerable={},(0,we.default)(at,function(Jt){Mt.enumerable[vt]=Jt,vt+=1});var Tn=vt-1;Mt.type+=(Tn-nn>0?" \u2026 "+Tn:"")+"]",Mt.id=(0,ne.default)("json"),Mt.jsonSplitArr=!0,ut[vt]=Mt});var Nt={};return Nt.enumerable=ut,Nt.id=pt.id,Nt.type=pt.type,pt.unenumerable&&(Nt.unenumerable=pt.unenumerable),pt.symbol&&(Nt.symbol=pt.symbol),pt.proto&&(Nt.proto=pt.proto),Nt}(Je))}yt[_t]=ft;var Qe=[];(0,we.default)(["enumerable","unenumerable","symbol"],function(pt){if(ft[pt])for(var vt in ft[pt])Qe.push(ft[pt][vt])}),ft.proto&&Qe.push(ft.proto);for(var tt=0,ht=Qe.length;tt<ht;tt++){var it=Qe[tt];(0,_e.default)(it)&&Ke(yt,it)}}}function ot(yt){var ft=yt.type,_t=yt.value;if(ft)return ft==="Function"?(0,qe.getFnAbstract)(_t):ft==="Array"&&yt.unenumerable?"Array(".concat(yt.unenumerable.length,")"):yt.type}G.default=Ne,G.getObjAbstract=ot},3465:function(U,G,V){var re=this&&this.__importDefault||function(de){return de&&de.__esModule?de:{default:de}};Object.defineProperty(G,"__esModule",{value:!0});var te=re(V(6329)),Q=function(){function de(){this.id=0,this.visited=[]}return de.prototype.set=function(I,_e){var ne=this.visited,ge=this.id,ye={id:ge,val:I};return(0,te.default)(ye,_e),ne.push(ye),this.id++,ge},de.prototype.get=function(I){for(var _e=this.visited,ne=0,ge=_e.length;ne<ge;ne++){var ye=_e[ne];if(I===ye.val)return ye}return!1},de}();G.default=Q},4030:function(U,G,V){var re,te=this&&this.__extends||(re=function(ht,it){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,vt){pt.__proto__=vt}||function(pt,vt){for(var ut in vt)Object.prototype.hasOwnProperty.call(vt,ut)&&(pt[ut]=vt[ut])},re(ht,it)},function(ht,it){if(typeof it!="function"&&it!==null)throw new TypeError("Class extends value "+String(it)+" is not a constructor or null");function pt(){this.constructor=ht}re(ht,it),ht.prototype=it===null?Object.create(it):(pt.prototype=it.prototype,new pt)}),Q=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(G,"__esModule",{value:!0}),G.Static=void 0;var de=Q(V(415)),I=Q(V(3990)),_e=Q(V(4696)),ne=Q(V(3063)),ge=Q(V(5166)),ye=Q(V(6472)),xe=Q(V(3023)),we=Q(V(2533)),ke=Q(V(3783)),Se=Q(V(300)),Oe=Q(V(4321)),Fe=Q(V(3085)),ze=Q(V(1512)),Le=Q(V(801)),We=Q(V(1116)),qe=Q(V(5972)),Ne=Q(V(996)),Ke=Q(V(3367)),ot=Q(V(1214)),yt=Q(V(6329)),ft=Q(V(6339)),_t=Q(V(3465)),Je=V(8629),Qe=Q(V(1717));G.Static=Qe.default;var tt=function(ht){function it(pt,vt){vt===void 0&&(vt={});var ut=ht.call(this,pt,{compName:"object-viewer"})||this;return ut.onItemClick=function(Nt){var at=ut,Mt=at.map,nn=at.c,Tn=(0,ze.default)(Nt.curTarget),Jt=Tn.data("object-id"),on=Tn.find("span").eq(0);if(!Tn.data("first-level")&&(Jt&&(Tn.find("ul").html(ut.objToHtml(Mt[Jt],!1)),Tn.rmAttr("data-object-id")),Nt.stopImmediatePropagation(),on.hasClass(nn("expanded")))){var Vt=Tn.find("ul").eq(0);on.hasClass(nn("collapsed"))?(on.rmClass(nn("collapsed")),Vt.show()):(on.addClass(nn("collapsed")),Vt.hide()),ut.emit("change")}},ut.initOptions(vt,{unenumerable:!1,accessGetter:!1}),ut.bindEvent(),ut}return te(it,ht),it.prototype.set=function(pt){this.data=[pt],this.visitor=new _t.default,this.map={},this.render()},it.prototype.destroy=function(){ht.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},it.prototype.objToHtml=function(pt,vt){var ut=this,Nt=this.visitor,at=pt,Mt=!1,nn=Nt.get(pt);nn&&nn.self&&(at=nn.self);var Tn="",Jt=["enumerable"],on=(0,we.default)(pt),Vt=[],Rt=[],Yt=[],un={};if(this.options.unenumerable&&!vt&&(Jt.push("unenumerable"),Jt.push("symbol"),Vt=(0,Le.default)((0,We.default)(pt,{prototype:!1,unenumerable:!0}),on),Rt=(0,qe.default)((0,We.default)(pt,{prototype:!1,symbol:!0}),function(an){return typeof an=="symbol"})),(0,ye.default)(pt)&&pt.length>100){Jt.unshift("virtual"),Mt=!0;var yn=0,In={};(0,ke.default)((0,Ne.default)(pt,100),function(an){var xn=Object.create(null),En=yn,$n="["+En;(0,ke.default)(an,function(vn){xn[yn]=vn,In[yn]=!0,yn++});var zn=yn-1;un[$n+=(zn-En>0?" \u2026 "+zn:"")+"]"]=xn}),Yt=(0,we.default)(un),on=(0,qe.default)(on,function(an){return!In[an]})}(0,ke.default)(Jt,function(an){var xn=[];xn=an==="symbol"?Rt:an==="unenumerable"?Vt:an==="virtual"?Yt:on,Mt||(0,ft.default)(xn);for(var En=0,$n=xn.length;En<$n;En++){var zn=(0,Ke.default)(xn[En]),vn="",wn=Object.getOwnPropertyDescriptor(pt,zn),Sn=wn&&wn.get,Jn=wn&&wn.set;if(Sn&&!ut.options.accessGetter)vn="(...)";else try{vn=an==="virtual"?un[zn]:at[zn],(0,Oe.default)(vn)&&vn.catch(ot.default)}catch(tr){vn=tr instanceof Error?tr.message:(0,Ke.default)(tr)}Tn+=ut.createEl(zn,pt,vn,an,vt),Sn&&(Tn+=ut.createEl("get ".concat(zn),pt,wn.get,an,vt)),Jn&&(Tn+=ut.createEl("set ".concat(zn),pt,wn.set,an,vt))}});var It=(0,de.default)(pt);if(!vt&&It)if(Tn===""){var $t=Nt.set(It,{self:pt});this.map[$t]=It,Tn=this.objToHtml(It)}else Tn+=this.createEl("__proto__",at||pt,It,"proto");return Tn},it.prototype.createEl=function(pt,vt,ut,Nt,at){at===void 0&&(at=!1);var Mt=this.visitor,nn=this.c,Tn=typeof ut,Jt=(0,Fe.default)(ut,!1);if(Nt==="virtual"&&(Jt=pt),ut===null)return"<li>".concat(In(pt),'<span class="').concat(nn("null"),'">null</span></li>');if((0,I.default)(ut)||(0,_e.default)(ut))return"<li>".concat(In(pt),'<span class="').concat(nn(Tn),'">').concat((0,Je.encode)(ut),"</span></li>");if(Jt==="RegExp"&&(Tn="regexp"),Jt==="Number"&&(Tn="number"),Jt==="Number"||Jt==="RegExp")return"<li>".concat(In(pt),'<span class="').concat(nn(Tn),'">').concat((0,Je.encode)(ut.value),"</span></li>");if(Jt==="Undefined"||Jt==="Symbol")return"<li>".concat(In(pt),'<span class="').concat(nn("special"),'">').concat((0,ne.default)(Jt),"</span></li>");if(ut==="(...)")return"<li>".concat(In(pt),'<span class="').concat(nn("special"),'">').concat(ut,"</span></li>");if((0,ge.default)(ut)){var on=Mt.get(ut),Vt=void 0;if(on)Vt=on.id;else{var Rt={};Nt==="proto"&&(Rt.self=vt),Vt=Mt.set(ut,Rt),this.map[Vt]=ut}var Yt=function(It,$t){if(!!$t)return $t==="Function"?(0,Je.getFnAbstract)((0,Se.default)(It)):$t==="Array"?"Array(".concat(It.length,")"):$t}(ut,Jt)||(0,xe.default)(Tn),un=at?"":'<span class="'.concat(nn("expanded collapsed"),'"><span class="').concat(nn("icon icon-caret-right"),'"></span><span class="').concat(nn("icon icon-caret-down"),'"></span></span>'),yn="<li ".concat(at?'data-first-level="true"':""," ").concat('data-object-id="'+Vt+'"',">").concat(un).concat(In(pt),'<span class="').concat(nn("open"),'">').concat(at?"":Yt,'</span><ul class="').concat(nn(Tn),'" ').concat(at?"":'style="display:none"',">");return at&&(yn+=this.objToHtml(ut)),yn+'</ul><span class="'.concat(nn("close"),'"></span></li>')}function In(It){if(at||(0,ge.default)(ut)&&Nt==="virtual")return"";var $t=nn("key");return Nt!=="unenumerable"&&Nt!=="proto"&&Nt!=="symbol"||($t=nn("key-lighter")),'<span class="'.concat($t,'">').concat((0,Je.encode)(It),"</span>: ")}return"<li>".concat(In(pt),'<span class="').concat(nn(typeof ut),'">"').concat((0,Je.encode)(ut),'"</span></li>')},it.prototype.render=function(){this.$container.html(this.objToHtml(this.data,!0))},it.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},it}(Q(V(5198)).default);G.default=tt,U.exports=(0,yt.default)(tt,G),U.exports.default=tt},8629:function(U,G,V){var re=this&&this.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(G,"__esModule",{value:!0}),G.getFnAbstract=G.encode=void 0;var te=re(V(3367)),Q=re(V(4331)),de=re(V(8901));G.encode=function(_e){return(0,de.default)((0,te.default)(_e)).replace(/\n/g,"\u21B5").replace(/\f|\r|\t/g,"")},G.getFnAbstract=function(_e){return _e.length>500&&(_e=_e.slice(0,500)+"..."),"\u0192 "+(0,Q.default)(function(ne){var ge=ne.match(I);return ge?ge[0]:ne}(_e).replace("function",""))};var I=/function(.*?)\((.*?)\)/},5198:function(U,G,V){var re,te=this&&this.__extends||(re=function(ke,Se){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Oe,Fe){Oe.__proto__=Fe}||function(Oe,Fe){for(var ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&(Oe[ze]=Fe[ze])},re(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Oe(){this.constructor=ke}re(ke,Se),ke.prototype=Se===null?Object.create(Se):(Oe.prototype=Se.prototype,new Oe)}),Q=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(G,"__esModule",{value:!0});var de=Q(V(1443)),I=Q(V(1512)),_e=V(2702),ne=Q(V(3783)),ge=Q(V(6329)),ye=Q(V(4193)),xe=Q(V(5852)),we=function(ke){function Se(Oe,Fe,ze){var Le=Fe.compName,We=(ze===void 0?{}:ze).theme,qe=We===void 0?"light":We,Ne=ke.call(this)||this;return Ne.subComponents=[],Ne.compName=Le,Ne.c=(0,_e.classPrefix)(Le),Ne.options={},Ne.container=Oe,Ne.$container=(0,I.default)(Oe),Ne.$container.addClass(["luna-".concat(Le),Ne.c("platform-".concat((0,_e.getPlatform)()))]),Ne.on("optionChange",function(Ke,ot,yt){var ft=Ne.c;Ke==="theme"&&(Ne.$container.rmClass(ft("theme-".concat(yt))).addClass(ft("theme-".concat(ot))),(0,ne.default)(Ne.subComponents,function(_t){return _t.setOption("theme",ot)}))}),Ne.setOption("theme",qe),Ne}return te(Se,ke),Se.prototype.destroy=function(){this.destroySubComponents();var Oe=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Oe("platform-".concat((0,_e.getPlatform)()))).rmClass(Oe("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Se.prototype.setOption=function(Oe,Fe){var ze=this,Le=this.options,We={};typeof Oe=="string"?We[Oe]=Fe:We=Oe,(0,ne.default)(We,function(qe,Ne){var Ke=Le[Ne];Le[Ne]=qe,ze.emit("optionChange",Ne,qe,Ke)})},Se.prototype.getOption=function(Oe){return this.options[Oe]},Se.prototype.addSubComponent=function(Oe){Oe.setOption("theme",this.options.theme),this.subComponents.push(Oe)},Se.prototype.removeSubComponent=function(Oe){(0,xe.default)(this.subComponents,function(Fe){return Fe===Oe})},Se.prototype.destroySubComponents=function(){(0,ne.default)(this.subComponents,function(Oe){return Oe.destroy()}),this.subComponents=[]},Se.prototype.initOptions=function(Oe,Fe){Fe===void 0&&(Fe={}),(0,ye.default)(Oe,Fe),(0,ge.default)(this.options,Oe)},Se.prototype.find=function(Oe){return this.$container.find(this.c(Oe))},Se}(de.default);G.default=we},2702:function(U,G,V){var re=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(G,"__esModule",{value:!0}),G.resetCanvasSize=G.getPlatform=G.pxToNum=G.executeAfterTransition=G.hasVerticalScrollbar=G.measuredScrollbarWidth=G.eventClient=G.drag=G.classPrefix=void 0;var te=re(V(2461)),Q=re(V(4331)),de=re(V(5610)),I=re(V(7483)),_e=re(V(3990)),ne=re(V(6341)),ge=re(V(3875)),ye=re(V(6954)),xe=re(V(9585));function we(ze,Le){for(var We=0,qe=ze.length;We<qe;We++){var Ne=ze[We];Le(Ne),Ne.content&&we(Ne.content,Le)}}G.classPrefix=function(ze){var Le="luna-".concat(ze,"-");function We(qe){return(0,te.default)((0,Q.default)(qe).split(/\s+/),function(Ne){return(0,ne.default)(Ne,Le)?Ne:Ne.replace(/[\w-]+/,function(Ke){return"".concat(Le).concat(Ke)})}).join(" ")}return function(qe){if(/<[^>]*>/g.test(qe))try{var Ne=I.default.parse(qe);return we(Ne,function(Ke){Ke.attrs&&Ke.attrs.class&&(Ke.attrs.class=We(Ke.attrs.class))}),I.default.stringify(Ne)}catch{return We(qe)}return We(qe)}};var ke,Se="ontouchstart"in de.default,Oe={start:"touchstart",move:"touchmove",end:"touchend"},Fe={start:"mousedown",move:"mousemove",end:"mouseup"};G.drag=function(ze){return Se?Oe[ze]:Fe[ze]},G.eventClient=function(ze,Le){var We=ze==="x"?"clientX":"clientY";return Le[We]?Le[We]:Le.changedTouches?Le.changedTouches[0][We]:0},G.measuredScrollbarWidth=function(){if((0,_e.default)(ke))return ke;if(!document)return 16;var ze=document.createElement("div"),Le=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Le.setAttribute("style","height: 200px"),ze.appendChild(Le),document.body.appendChild(ze),ke=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),ke},G.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},G.executeAfterTransition=function(ze,Le){if((0,xe.default)(ze))return Le();var We=function(qe){qe.target===ze&&(ze.removeEventListener("transitionend",We),Le())};ze.addEventListener("transitionend",We)},G.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},G.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},G.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},4842:function(U,G,V){var re,te;/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */(function(Q,de){re=[V(4704)],te=function(I){return function(_e,ne){function ge(){}var ye=ge.prototype=Object.create(ne.prototype);ye.bindHandles=function(){this._bindHandles(!0)},ye.unbindHandles=function(){this._bindHandles(!1)},ye._bindHandles=function(ke){for(var Se=(ke=ke===void 0||ke)?"addEventListener":"removeEventListener",Oe=ke?this._touchActionValue:"",Fe=0;Fe<this.handles.length;Fe++){var ze=this.handles[Fe];this._bindStartEvent(ze,ke),ze[Se]("click",this),_e.PointerEvent&&(ze.style.touchAction=Oe)}},ye._touchActionValue="none",ye.pointerDown=function(ke,Se){this.okayPointerDown(ke)&&(this.pointerDownPointer={pageX:Se.pageX,pageY:Se.pageY},ke.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(ke),this.emitEvent("pointerDown",[ke,Se]))};var xe={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},we={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return ye.okayPointerDown=function(ke){var Se=xe[ke.target.nodeName],Oe=we[ke.target.type],Fe=!Se||Oe;return Fe||this._pointerReset(),Fe},ye.pointerDownBlur=function(){var ke=document.activeElement;ke&&ke.blur&&ke!=document.body&&ke.blur()},ye.pointerMove=function(ke,Se){var Oe=this._dragPointerMove(ke,Se);this.emitEvent("pointerMove",[ke,Se,Oe]),this._dragMove(ke,Se,Oe)},ye._dragPointerMove=function(ke,Se){var Oe={x:Se.pageX-this.pointerDownPointer.pageX,y:Se.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(Oe)&&this._dragStart(ke,Se),Oe},ye.hasDragStarted=function(ke){return Math.abs(ke.x)>3||Math.abs(ke.y)>3},ye.pointerUp=function(ke,Se){this.emitEvent("pointerUp",[ke,Se]),this._dragPointerUp(ke,Se)},ye._dragPointerUp=function(ke,Se){this.isDragging?this._dragEnd(ke,Se):this._staticClick(ke,Se)},ye._dragStart=function(ke,Se){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(ke,Se)},ye.dragStart=function(ke,Se){this.emitEvent("dragStart",[ke,Se])},ye._dragMove=function(ke,Se,Oe){this.isDragging&&this.dragMove(ke,Se,Oe)},ye.dragMove=function(ke,Se,Oe){ke.preventDefault(),this.emitEvent("dragMove",[ke,Se,Oe])},ye._dragEnd=function(ke,Se){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(ke,Se)},ye.dragEnd=function(ke,Se){this.emitEvent("dragEnd",[ke,Se])},ye.onclick=function(ke){this.isPreventingClicks&&ke.preventDefault()},ye._staticClick=function(ke,Se){this.isIgnoringMouseUp&&ke.type=="mouseup"||(this.staticClick(ke,Se),ke.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},ye.staticClick=function(ke,Se){this.emitEvent("staticClick",[ke,Se])},ge.getPointerPoint=ne.getPointerPoint,ge}(Q,I)}.apply(G,re),te===void 0||(U.exports=te)})(window)},4704:function(U,G,V){var re,te;/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */(function(Q,de){re=[V(7158)],te=function(I){return function(_e,ne){function ge(){}function ye(){}var xe=ye.prototype=Object.create(ne.prototype);xe.bindStartEvent=function(ke){this._bindStartEvent(ke,!0)},xe.unbindStartEvent=function(ke){this._bindStartEvent(ke,!1)},xe._bindStartEvent=function(ke,Se){var Oe=(Se=Se===void 0||Se)?"addEventListener":"removeEventListener",Fe="mousedown";"ontouchstart"in _e?Fe="touchstart":_e.PointerEvent&&(Fe="pointerdown"),ke[Oe](Fe,this)},xe.handleEvent=function(ke){var Se="on"+ke.type;this[Se]&&this[Se](ke)},xe.getTouch=function(ke){for(var Se=0;Se<ke.length;Se++){var Oe=ke[Se];if(Oe.identifier==this.pointerIdentifier)return Oe}},xe.onmousedown=function(ke){var Se=ke.button;Se&&Se!==0&&Se!==1||this._pointerDown(ke,ke)},xe.ontouchstart=function(ke){this._pointerDown(ke,ke.changedTouches[0])},xe.onpointerdown=function(ke){this._pointerDown(ke,ke)},xe._pointerDown=function(ke,Se){ke.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=Se.pointerId!==void 0?Se.pointerId:Se.identifier,this.pointerDown(ke,Se))},xe.pointerDown=function(ke,Se){this._bindPostStartEvents(ke),this.emitEvent("pointerDown",[ke,Se])};var we={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return xe._bindPostStartEvents=function(ke){if(ke){var Se=we[ke.type];Se.forEach(function(Oe){_e.addEventListener(Oe,this)},this),this._boundPointerEvents=Se}},xe._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(ke){_e.removeEventListener(ke,this)},this),delete this._boundPointerEvents)},xe.onmousemove=function(ke){this._pointerMove(ke,ke)},xe.onpointermove=function(ke){ke.pointerId==this.pointerIdentifier&&this._pointerMove(ke,ke)},xe.ontouchmove=function(ke){var Se=this.getTouch(ke.changedTouches);Se&&this._pointerMove(ke,Se)},xe._pointerMove=function(ke,Se){this.pointerMove(ke,Se)},xe.pointerMove=function(ke,Se){this.emitEvent("pointerMove",[ke,Se])},xe.onmouseup=function(ke){this._pointerUp(ke,ke)},xe.onpointerup=function(ke){ke.pointerId==this.pointerIdentifier&&this._pointerUp(ke,ke)},xe.ontouchend=function(ke){var Se=this.getTouch(ke.changedTouches);Se&&this._pointerUp(ke,Se)},xe._pointerUp=function(ke,Se){this._pointerDone(),this.pointerUp(ke,Se)},xe.pointerUp=function(ke,Se){this.emitEvent("pointerUp",[ke,Se])},xe._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},xe._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},xe.pointerDone=ge,xe.onpointercancel=function(ke){ke.pointerId==this.pointerIdentifier&&this._pointerCancel(ke,ke)},xe.ontouchcancel=function(ke){var Se=this.getTouch(ke.changedTouches);Se&&this._pointerCancel(ke,Se)},xe._pointerCancel=function(ke,Se){this._pointerDone(),this.pointerCancel(ke,Se)},xe.pointerCancel=function(ke,Se){this.emitEvent("pointerCancel",[ke,Se])},ye.getPointerPoint=function(ke){return{x:ke.pageX,y:ke.pageY}},ye}(Q,I)}.apply(G,re),te===void 0||(U.exports=te)})(window)},8138:function(U,G,V){U.exports=V(2895).default}},__webpack_module_cache__={};function __webpack_require__(U){var G=__webpack_module_cache__[U];if(G!==void 0)return G.exports;var V=__webpack_module_cache__[U]={id:U,exports:{}};return __webpack_modules__[U].call(V.exports,V,V.exports,__webpack_require__),V.exports}__webpack_require__.n=function(U){var G=U&&U.__esModule?function(){return U.default}:function(){return U};return __webpack_require__.d(G,{a:G}),G},__webpack_require__.d=function(U,G){for(var V in G)__webpack_require__.o(G,V)&&!__webpack_require__.o(U,V)&&Object.defineProperty(U,V,{enumerable:!0,get:G[V]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(U,G){return Object.prototype.hasOwnProperty.call(U,G)},__webpack_require__.r=function(U){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(U,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(U,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(8138);return __webpack_exports__}()})})(eruda);export{Y as $,Ae as A,A as B,mapbox as C,render$e as D,toDisplayString as E,Fragment as F,render$1 as G,renderList as H,withDirectives as I,vModelText as J,resolveDynamicComponent as K,render$g as L,Me as M,render$8 as N,render$a as O,normalizeStyle as P,render$b as Q,RouterView as R,render$6 as S,Transition as T,render$f as U,reactive as V,computed as W,useVuelidate as X,render$7 as Y,render$2 as Z,render as _,openBlock as a,X as a0,W$1 as a1,required as a2,email as a3,axios as a4,numeric as a5,minLength as a6,sameAs as a7,imageCompression as a8,createStaticVNode as a9,Z as aa,render$c as ab,render$3 as ac,render$9 as ad,render$4 as ae,withAsyncContext as af,Suspense as ag,createRouter as ah,createWebHistory as ai,createApp as aj,createPinia as ak,createVNode as b,createElementBlock as c,defineStore as d,unref as e,oe as f,createBaseVNode as g,render$d as h,fe as i,je as j,isRef as k,render$5 as l,createTextVNode as m,n,onMounted as o,createBlock as p,me as q,ref as r,createCommentVNode as s,pe as t,useRouter as u,v,withCtx as w,ve as x,normalizeClass as y,fe$1 as z};
