var oy=Object.defineProperty,ay=Object.defineProperties;var sy=Object.getOwnPropertyDescriptors;var Zd=Object.getOwnPropertySymbols;var Y_=Object.prototype.hasOwnProperty,J_=Object.prototype.propertyIsEnumerable;var K_=(G,q,V)=>q in G?oy(G,q,{enumerable:!0,configurable:!0,writable:!0,value:V}):G[q]=V,Xr=(G,q)=>{for(var V in q||(q={}))Y_.call(q,V)&&K_(G,V,q[V]);if(Zd)for(var V of Zd(q))J_.call(q,V)&&K_(G,V,q[V]);return G},Yo=(G,q)=>ay(G,sy(q));var Es=(G,q)=>{var V={};for(var he in G)Y_.call(G,he)&&q.indexOf(he)<0&&(V[he]=G[he]);if(G!=null&&Zd)for(var he of Zd(G))q.indexOf(he)<0&&J_.call(G,he)&&(V[he]=G[he]);return V};function makeMap(G,q){const V=Object.create(null),he=G.split(",");for(let ce=0;ce<he.length;ce++)V[he[ce]]=!0;return q?ce=>!!V[ce.toLowerCase()]:ce=>!!V[ce]}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(G){return!!G||G===""}function normalizeStyle(G){if(isArray$1(G)){const q={};for(let V=0;V<G.length;V++){const he=G[V],ce=isString$1(he)?parseStringStyle(he):normalizeStyle(he);if(ce)for(const te in ce)q[te]=ce[te]}return q}else{if(isString$1(G))return G;if(isObject$1(G))return G}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:(.+)/;function parseStringStyle(G){const q={};return G.split(listDelimiterRE).forEach(V=>{if(V){const he=V.split(propertyDelimiterRE);he.length>1&&(q[he[0].trim()]=he[1].trim())}}),q}function normalizeClass(G){let q="";if(isString$1(G))q=G;else if(isArray$1(G))for(let V=0;V<G.length;V++){const he=normalizeClass(G[V]);he&&(q+=he+" ")}else if(isObject$1(G))for(const V in G)G[V]&&(q+=V+" ");return q.trim()}const toDisplayString=G=>isString$1(G)?G:G==null?"":isArray$1(G)||isObject$1(G)&&(G.toString===objectToString||!isFunction$2(G.toString))?JSON.stringify(G,replacer,2):String(G),replacer=(G,q)=>q&&q.__v_isRef?replacer(G,q.value):isMap(q)?{[`Map(${q.size})`]:[...q.entries()].reduce((V,[he,ce])=>(V[`${he} =>`]=ce,V),{})}:isSet(q)?{[`Set(${q.size})`]:[...q.values()]}:isObject$1(q)&&!isArray$1(q)&&!isPlainObject$2(q)?String(q):q,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=G=>onRE.test(G),isModelListener=G=>G.startsWith("onUpdate:"),extend$1=Object.assign,remove=(G,q)=>{const V=G.indexOf(q);V>-1&&G.splice(V,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(G,q)=>hasOwnProperty.call(G,q),isArray$1=Array.isArray,isMap=G=>toTypeString(G)==="[object Map]",isSet=G=>toTypeString(G)==="[object Set]",isFunction$2=G=>typeof G=="function",isString$1=G=>typeof G=="string",isSymbol=G=>typeof G=="symbol",isObject$1=G=>G!==null&&typeof G=="object",isPromise=G=>isObject$1(G)&&isFunction$2(G.then)&&isFunction$2(G.catch),objectToString=Object.prototype.toString,toTypeString=G=>objectToString.call(G),toRawType=G=>toTypeString(G).slice(8,-1),isPlainObject$2=G=>toTypeString(G)==="[object Object]",isIntegerKey=G=>isString$1(G)&&G!=="NaN"&&G[0]!=="-"&&""+parseInt(G,10)===G,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=G=>{const q=Object.create(null);return V=>q[V]||(q[V]=G(V))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(G=>G.replace(camelizeRE,(q,V)=>V?V.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(G=>G.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(G=>G.charAt(0).toUpperCase()+G.slice(1)),toHandlerKey=cacheStringFunction(G=>G?`on${capitalize(G)}`:""),hasChanged=(G,q)=>!Object.is(G,q),invokeArrayFns=(G,q)=>{for(let V=0;V<G.length;V++)G[V](q)},def=(G,q,V)=>{Object.defineProperty(G,q,{configurable:!0,enumerable:!1,value:V})},toNumber=G=>{const q=parseFloat(G);return isNaN(q)?G:q};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let activeEffectScope;class EffectScope{constructor(q=!1){this.active=!0,this.effects=[],this.cleanups=[],!q&&activeEffectScope&&(this.parent=activeEffectScope,this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(q){if(this.active)try{return activeEffectScope=this,q()}finally{activeEffectScope=this.parent}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(q){if(this.active){let V,he;for(V=0,he=this.effects.length;V<he;V++)this.effects[V].stop();for(V=0,he=this.cleanups.length;V<he;V++)this.cleanups[V]();if(this.scopes)for(V=0,he=this.scopes.length;V<he;V++)this.scopes[V].stop(!0);if(this.parent&&!q){const ce=this.parent.scopes.pop();ce&&ce!==this&&(this.parent.scopes[this.index]=ce,ce.index=this.index)}this.active=!1}}}function effectScope(G){return new EffectScope(G)}function recordEffectScope(G,q=activeEffectScope){q&&q.active&&q.effects.push(G)}const createDep=G=>{const q=new Set(G);return q.w=0,q.n=0,q},wasTracked=G=>(G.w&trackOpBit)>0,newTracked=G=>(G.n&trackOpBit)>0,initDepMarkers=({deps:G})=>{if(G.length)for(let q=0;q<G.length;q++)G[q].w|=trackOpBit},finalizeDepMarkers=G=>{const{deps:q}=G;if(q.length){let V=0;for(let he=0;he<q.length;he++){const ce=q[he];wasTracked(ce)&&!newTracked(ce)?ce.delete(G):q[V++]=ce,ce.w&=~trackOpBit,ce.n&=~trackOpBit}q.length=V}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(q,V=null,he){this.fn=q,this.scheduler=V,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,he)}run(){if(!this.active)return this.fn();let q=activeEffect,V=shouldTrack;for(;q;){if(q===this)return;q=q.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=V,this.parent=void 0}}stop(){this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(G){const{deps:q}=G;if(q.length){for(let V=0;V<q.length;V++)q[V].delete(G);q.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const G=trackStack.pop();shouldTrack=G===void 0?!0:G}function track(G,q,V){if(shouldTrack&&activeEffect){let he=targetMap.get(G);he||targetMap.set(G,he=new Map);let ce=he.get(V);ce||he.set(V,ce=createDep()),trackEffects(ce)}}function trackEffects(G,q){let V=!1;effectTrackDepth<=maxMarkerBits?newTracked(G)||(G.n|=trackOpBit,V=!wasTracked(G)):V=!G.has(activeEffect),V&&(G.add(activeEffect),activeEffect.deps.push(G))}function trigger$1(G,q,V,he,ce,te){const Ee=targetMap.get(G);if(!Ee)return;let j=[];if(q==="clear")j=[...Ee.values()];else if(V==="length"&&isArray$1(G))Ee.forEach((xe,re)=>{(re==="length"||re>=he)&&j.push(xe)});else switch(V!==void 0&&j.push(Ee.get(V)),q){case"add":isArray$1(G)?isIntegerKey(V)&&j.push(Ee.get("length")):(j.push(Ee.get(ITERATE_KEY)),isMap(G)&&j.push(Ee.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(G)||(j.push(Ee.get(ITERATE_KEY)),isMap(G)&&j.push(Ee.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(G)&&j.push(Ee.get(ITERATE_KEY));break}if(j.length===1)j[0]&&triggerEffects(j[0]);else{const xe=[];for(const re of j)re&&xe.push(...re);triggerEffects(createDep(xe))}}function triggerEffects(G,q){for(const V of isArray$1(G)?G:[...G])(V!==activeEffect||V.allowRecurse)&&(V.scheduler?V.scheduler():V.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).map(G=>Symbol[G]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const G={};return["includes","indexOf","lastIndexOf"].forEach(q=>{G[q]=function(...V){const he=toRaw(this);for(let te=0,Ee=this.length;te<Ee;te++)track(he,"get",te+"");const ce=he[q](...V);return ce===-1||ce===!1?he[q](...V.map(toRaw)):ce}}),["push","pop","shift","unshift","splice"].forEach(q=>{G[q]=function(...V){pauseTracking();const he=toRaw(this)[q].apply(this,V);return resetTracking(),he}}),G}function createGetter(G=!1,q=!1){return function(he,ce,te){if(ce==="__v_isReactive")return!G;if(ce==="__v_isReadonly")return G;if(ce==="__v_isShallow")return q;if(ce==="__v_raw"&&te===(G?q?shallowReadonlyMap:readonlyMap:q?shallowReactiveMap:reactiveMap).get(he))return he;const Ee=isArray$1(he);if(!G&&Ee&&hasOwn(arrayInstrumentations,ce))return Reflect.get(arrayInstrumentations,ce,te);const j=Reflect.get(he,ce,te);return(isSymbol(ce)?builtInSymbols.has(ce):isNonTrackableKeys(ce))||(G||track(he,"get",ce),q)?j:isRef(j)?!Ee||!isIntegerKey(ce)?j.value:j:isObject$1(j)?G?readonly(j):reactive(j):j}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(G=!1){return function(V,he,ce,te){let Ee=V[he];if(isReadonly(Ee)&&isRef(Ee)&&!isRef(ce))return!1;if(!G&&!isReadonly(ce)&&(isShallow(ce)||(ce=toRaw(ce),Ee=toRaw(Ee)),!isArray$1(V)&&isRef(Ee)&&!isRef(ce)))return Ee.value=ce,!0;const j=isArray$1(V)&&isIntegerKey(he)?Number(he)<V.length:hasOwn(V,he),xe=Reflect.set(V,he,ce,te);return V===toRaw(te)&&(j?hasChanged(ce,Ee)&&trigger$1(V,"set",he,ce):trigger$1(V,"add",he,ce)),xe}}function deleteProperty(G,q){const V=hasOwn(G,q);G[q];const he=Reflect.deleteProperty(G,q);return he&&V&&trigger$1(G,"delete",q,void 0),he}function has(G,q){const V=Reflect.has(G,q);return(!isSymbol(q)||!builtInSymbols.has(q))&&track(G,"has",q),V}function ownKeys(G){return track(G,"iterate",isArray$1(G)?"length":ITERATE_KEY),Reflect.ownKeys(G)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(G,q){return!0},deleteProperty(G,q){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=G=>G,getProto=G=>Reflect.getPrototypeOf(G);function get$1(G,q,V=!1,he=!1){G=G.__v_raw;const ce=toRaw(G),te=toRaw(q);q!==te&&!V&&track(ce,"get",q),!V&&track(ce,"get",te);const{has:Ee}=getProto(ce),j=he?toShallow:V?toReadonly:toReactive;if(Ee.call(ce,q))return j(G.get(q));if(Ee.call(ce,te))return j(G.get(te));G!==ce&&G.get(q)}function has$1(G,q=!1){const V=this.__v_raw,he=toRaw(V),ce=toRaw(G);return G!==ce&&!q&&track(he,"has",G),!q&&track(he,"has",ce),G===ce?V.has(G):V.has(G)||V.has(ce)}function size(G,q=!1){return G=G.__v_raw,!q&&track(toRaw(G),"iterate",ITERATE_KEY),Reflect.get(G,"size",G)}function add(G){G=toRaw(G);const q=toRaw(this);return getProto(q).has.call(q,G)||(q.add(G),trigger$1(q,"add",G,G)),this}function set$1(G,q){q=toRaw(q);const V=toRaw(this),{has:he,get:ce}=getProto(V);let te=he.call(V,G);te||(G=toRaw(G),te=he.call(V,G));const Ee=ce.call(V,G);return V.set(G,q),te?hasChanged(q,Ee)&&trigger$1(V,"set",G,q):trigger$1(V,"add",G,q),this}function deleteEntry(G){const q=toRaw(this),{has:V,get:he}=getProto(q);let ce=V.call(q,G);ce||(G=toRaw(G),ce=V.call(q,G)),he&&he.call(q,G);const te=q.delete(G);return ce&&trigger$1(q,"delete",G,void 0),te}function clear(){const G=toRaw(this),q=G.size!==0,V=G.clear();return q&&trigger$1(G,"clear",void 0,void 0),V}function createForEach(G,q){return function(he,ce){const te=this,Ee=te.__v_raw,j=toRaw(Ee),xe=q?toShallow:G?toReadonly:toReactive;return!G&&track(j,"iterate",ITERATE_KEY),Ee.forEach((re,ge)=>he.call(ce,xe(re),xe(ge),te))}}function createIterableMethod(G,q,V){return function(...he){const ce=this.__v_raw,te=toRaw(ce),Ee=isMap(te),j=G==="entries"||G===Symbol.iterator&&Ee,xe=G==="keys"&&Ee,re=ce[G](...he),ge=V?toShallow:q?toReadonly:toReactive;return!q&&track(te,"iterate",xe?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:ye,done:we}=re.next();return we?{value:ye,done:we}:{value:j?[ge(ye[0]),ge(ye[1])]:ge(ye),done:we}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(G){return function(...q){return G==="delete"?!1:this}}function createInstrumentations(){const G={get(te){return get$1(this,te)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},q={get(te){return get$1(this,te,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},V={get(te){return get$1(this,te,!0)},get size(){return size(this,!0)},has(te){return has$1.call(this,te,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},he={get(te){return get$1(this,te,!0,!0)},get size(){return size(this,!0)},has(te){return has$1.call(this,te,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(te=>{G[te]=createIterableMethod(te,!1,!1),V[te]=createIterableMethod(te,!0,!1),q[te]=createIterableMethod(te,!1,!0),he[te]=createIterableMethod(te,!0,!0)}),[G,V,q,he]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(G,q){const V=q?G?shallowReadonlyInstrumentations:shallowInstrumentations:G?readonlyInstrumentations:mutableInstrumentations;return(he,ce,te)=>ce==="__v_isReactive"?!G:ce==="__v_isReadonly"?G:ce==="__v_raw"?he:Reflect.get(hasOwn(V,ce)&&ce in he?V:he,ce,te)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(G){switch(G){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(G){return G.__v_skip||!Object.isExtensible(G)?0:targetTypeMap(toRawType(G))}function reactive(G){return isReadonly(G)?G:createReactiveObject(G,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(G){return createReactiveObject(G,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(G){return createReactiveObject(G,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(G,q,V,he,ce){if(!isObject$1(G)||G.__v_raw&&!(q&&G.__v_isReactive))return G;const te=ce.get(G);if(te)return te;const Ee=getTargetType(G);if(Ee===0)return G;const j=new Proxy(G,Ee===2?he:V);return ce.set(G,j),j}function isReactive(G){return isReadonly(G)?isReactive(G.__v_raw):!!(G&&G.__v_isReactive)}function isReadonly(G){return!!(G&&G.__v_isReadonly)}function isShallow(G){return!!(G&&G.__v_isShallow)}function isProxy$1(G){return isReactive(G)||isReadonly(G)}function toRaw(G){const q=G&&G.__v_raw;return q?toRaw(q):G}function markRaw(G){return def(G,"__v_skip",!0),G}const toReactive=G=>isObject$1(G)?reactive(G):G,toReadonly=G=>isObject$1(G)?readonly(G):G;function trackRefValue(G){shouldTrack&&activeEffect&&(G=toRaw(G),trackEffects(G.dep||(G.dep=createDep())))}function triggerRefValue(G,q){G=toRaw(G),G.dep&&triggerEffects(G.dep)}function isRef(G){return!!(G&&G.__v_isRef===!0)}function ref(G){return createRef(G,!1)}function shallowRef(G){return createRef(G,!0)}function createRef(G,q){return isRef(G)?G:new RefImpl(G,q)}class RefImpl{constructor(q,V){this.__v_isShallow=V,this.dep=void 0,this.__v_isRef=!0,this._rawValue=V?q:toRaw(q),this._value=V?q:toReactive(q)}get value(){return trackRefValue(this),this._value}set value(q){q=this.__v_isShallow?q:toRaw(q),hasChanged(q,this._rawValue)&&(this._rawValue=q,this._value=this.__v_isShallow?q:toReactive(q),triggerRefValue(this))}}function unref(G){return isRef(G)?G.value:G}const shallowUnwrapHandlers={get:(G,q,V)=>unref(Reflect.get(G,q,V)),set:(G,q,V,he)=>{const ce=G[q];return isRef(ce)&&!isRef(V)?(ce.value=V,!0):Reflect.set(G,q,V,he)}};function proxyRefs(G){return isReactive(G)?G:new Proxy(G,shallowUnwrapHandlers)}function toRefs(G){const q=isArray$1(G)?new Array(G.length):{};for(const V in G)q[V]=toRef(G,V);return q}class ObjectRefImpl{constructor(q,V,he){this._object=q,this._key=V,this._defaultValue=he,this.__v_isRef=!0}get value(){const q=this._object[this._key];return q===void 0?this._defaultValue:q}set value(q){this._object[this._key]=q}}function toRef(G,q,V){const he=G[q];return isRef(he)?he:new ObjectRefImpl(G,q,V)}class ComputedRefImpl{constructor(q,V,he,ce){this._setter=V,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ReactiveEffect(q,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!ce,this.__v_isReadonly=he}get value(){const q=toRaw(this);return trackRefValue(q),(q._dirty||!q._cacheable)&&(q._dirty=!1,q._value=q.effect.run()),q._value}set value(q){this._setter(q)}}function computed$1(G,q,V=!1){let he,ce;const te=isFunction$2(G);return te?(he=G,ce=NOOP):(he=G.get,ce=G.set),new ComputedRefImpl(he,ce,te||!ce,V)}Promise.resolve();function callWithErrorHandling(G,q,V,he){let ce;try{ce=he?G(...he):G()}catch(te){handleError(te,q,V)}return ce}function callWithAsyncErrorHandling(G,q,V,he){if(isFunction$2(G)){const te=callWithErrorHandling(G,q,V,he);return te&&isPromise(te)&&te.catch(Ee=>{handleError(Ee,q,V)}),te}const ce=[];for(let te=0;te<G.length;te++)ce.push(callWithAsyncErrorHandling(G[te],q,V,he));return ce}function handleError(G,q,V,he=!0){const ce=q?q.vnode:null;if(q){let te=q.parent;const Ee=q.proxy,j=V;for(;te;){const re=te.ec;if(re){for(let ge=0;ge<re.length;ge++)if(re[ge](G,Ee,j)===!1)return}te=te.parent}const xe=q.appContext.config.errorHandler;if(xe){callWithErrorHandling(xe,null,10,[G,Ee,j]);return}}logError(G,V,ce,he)}function logError(G,q,V,he=!0){console.error(G)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPreFlushCbs=[];let activePreFlushCbs=null,preFlushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null,currentPreFlushParentJob=null;function nextTick(G){const q=currentFlushPromise||resolvedPromise;return G?q.then(this?G.bind(this):G):q}function findInsertionIndex(G){let q=flushIndex+1,V=queue.length;for(;q<V;){const he=q+V>>>1;getId(queue[he])<G?q=he+1:V=he}return q}function queueJob(G){(!queue.length||!queue.includes(G,isFlushing&&G.allowRecurse?flushIndex+1:flushIndex))&&G!==currentPreFlushParentJob&&(G.id==null?queue.push(G):queue.splice(findInsertionIndex(G.id),0,G),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(G){const q=queue.indexOf(G);q>flushIndex&&queue.splice(q,1)}function queueCb(G,q,V,he){isArray$1(G)?V.push(...G):(!q||!q.includes(G,G.allowRecurse?he+1:he))&&V.push(G),queueFlush()}function queuePreFlushCb(G){queueCb(G,activePreFlushCbs,pendingPreFlushCbs,preFlushIndex)}function queuePostFlushCb(G){queueCb(G,activePostFlushCbs,pendingPostFlushCbs,postFlushIndex)}function flushPreFlushCbs(G,q=null){if(pendingPreFlushCbs.length){for(currentPreFlushParentJob=q,activePreFlushCbs=[...new Set(pendingPreFlushCbs)],pendingPreFlushCbs.length=0,preFlushIndex=0;preFlushIndex<activePreFlushCbs.length;preFlushIndex++)activePreFlushCbs[preFlushIndex]();activePreFlushCbs=null,preFlushIndex=0,currentPreFlushParentJob=null,flushPreFlushCbs(G,q)}}function flushPostFlushCbs(G){if(pendingPostFlushCbs.length){const q=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...q);return}for(activePostFlushCbs=q,activePostFlushCbs.sort((V,he)=>getId(V)-getId(he)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=G=>G.id==null?1/0:G.id;function flushJobs(G){isFlushPending=!1,isFlushing=!0,flushPreFlushCbs(G),queue.sort((V,he)=>getId(V)-getId(he));const q=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const V=queue[flushIndex];V&&V.active!==!1&&callWithErrorHandling(V,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPreFlushCbs.length||pendingPostFlushCbs.length)&&flushJobs(G)}}function emit$1(G,q,...V){const he=G.vnode.props||EMPTY_OBJ;let ce=V;const te=q.startsWith("update:"),Ee=te&&q.slice(7);if(Ee&&Ee in he){const ge=`${Ee==="modelValue"?"model":Ee}Modifiers`,{number:ye,trim:we}=he[ge]||EMPTY_OBJ;we?ce=V.map(ke=>ke.trim()):ye&&(ce=V.map(toNumber))}let j,xe=he[j=toHandlerKey(q)]||he[j=toHandlerKey(camelize(q))];!xe&&te&&(xe=he[j=toHandlerKey(hyphenate(q))]),xe&&callWithAsyncErrorHandling(xe,G,6,ce);const re=he[j+"Once"];if(re){if(!G.emitted)G.emitted={};else if(G.emitted[j])return;G.emitted[j]=!0,callWithAsyncErrorHandling(re,G,6,ce)}}function normalizeEmitsOptions(G,q,V=!1){const he=q.emitsCache,ce=he.get(G);if(ce!==void 0)return ce;const te=G.emits;let Ee={},j=!1;if(!isFunction$2(G)){const xe=re=>{const ge=normalizeEmitsOptions(re,q,!0);ge&&(j=!0,extend$1(Ee,ge))};!V&&q.mixins.length&&q.mixins.forEach(xe),G.extends&&xe(G.extends),G.mixins&&G.mixins.forEach(xe)}return!te&&!j?(he.set(G,null),null):(isArray$1(te)?te.forEach(xe=>Ee[xe]=null):extend$1(Ee,te),he.set(G,Ee),Ee)}function isEmitListener(G,q){return!G||!isOn(q)?!1:(q=q.slice(2).replace(/Once$/,""),hasOwn(G,q[0].toLowerCase()+q.slice(1))||hasOwn(G,hyphenate(q))||hasOwn(G,q))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(G){const q=currentRenderingInstance;return currentRenderingInstance=G,currentScopeId=G&&G.type.__scopeId||null,q}function withCtx(G,q=currentRenderingInstance,V){if(!q||G._n)return G;const he=(...ce)=>{he._d&&setBlockTracking(-1);const te=setCurrentRenderingInstance(q),Ee=G(...ce);return setCurrentRenderingInstance(te),he._d&&setBlockTracking(1),Ee};return he._n=!0,he._c=!0,he._d=!0,he}function markAttrsAccessed(){}function renderComponentRoot(G){const{type:q,vnode:V,proxy:he,withProxy:ce,props:te,propsOptions:[Ee],slots:j,attrs:xe,emit:re,render:ge,renderCache:ye,data:we,setupState:ke,ctx:Se,inheritAttrs:Pe}=G;let Re,Ne;const ze=setCurrentRenderingInstance(G);try{if(V.shapeFlag&4){const Ze=ce||he;Re=normalizeVNode(ge.call(Ze,Ze,ye,te,ke,we,Se)),Ne=xe}else{const Ze=q;Re=normalizeVNode(Ze.length>1?Ze(te,{attrs:xe,slots:j,emit:re}):Ze(te,null)),Ne=q.props?xe:getFunctionalFallthrough(xe)}}catch(Ze){blockStack.length=0,handleError(Ze,G,1),Re=createVNode(Comment$1)}let Be=Re;if(Ne&&Pe!==!1){const Ze=Object.keys(Ne),{shapeFlag:Xe}=Be;Ze.length&&Xe&7&&(Ee&&Ze.some(isModelListener)&&(Ne=filterModelListeners(Ne,Ee)),Be=cloneVNode(Be,Ne))}return V.dirs&&(Be.dirs=Be.dirs?Be.dirs.concat(V.dirs):V.dirs),V.transition&&(Be.transition=V.transition),Re=Be,setCurrentRenderingInstance(ze),Re}function filterSingleRoot(G){let q;for(let V=0;V<G.length;V++){const he=G[V];if(isVNode(he)){if(he.type!==Comment$1||he.children==="v-if"){if(q)return;q=he}}else return}return q}const getFunctionalFallthrough=G=>{let q;for(const V in G)(V==="class"||V==="style"||isOn(V))&&((q||(q={}))[V]=G[V]);return q},filterModelListeners=(G,q)=>{const V={};for(const he in G)(!isModelListener(he)||!(he.slice(9)in q))&&(V[he]=G[he]);return V};function shouldUpdateComponent(G,q,V){const{props:he,children:ce,component:te}=G,{props:Ee,children:j,patchFlag:xe}=q,re=te.emitsOptions;if(q.dirs||q.transition)return!0;if(V&&xe>=0){if(xe&1024)return!0;if(xe&16)return he?hasPropsChanged(he,Ee,re):!!Ee;if(xe&8){const ge=q.dynamicProps;for(let ye=0;ye<ge.length;ye++){const we=ge[ye];if(Ee[we]!==he[we]&&!isEmitListener(re,we))return!0}}}else return(ce||j)&&(!j||!j.$stable)?!0:he===Ee?!1:he?Ee?hasPropsChanged(he,Ee,re):!0:!!Ee;return!1}function hasPropsChanged(G,q,V){const he=Object.keys(q);if(he.length!==Object.keys(G).length)return!0;for(let ce=0;ce<he.length;ce++){const te=he[ce];if(q[te]!==G[te]&&!isEmitListener(V,te))return!0}return!1}function updateHOCHostEl({vnode:G,parent:q},V){for(;q&&q.subTree===G;)(G=q.vnode).el=V,q=q.parent}const isSuspense=G=>G.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(G,q,V,he,ce,te,Ee,j,xe,re){G==null?mountSuspense(q,V,he,ce,te,Ee,j,xe,re):patchSuspense(G,q,V,he,ce,Ee,j,xe,re)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(G,q){const V=G.props&&G.props[q];isFunction$2(V)&&V()}function mountSuspense(G,q,V,he,ce,te,Ee,j,xe){const{p:re,o:{createElement:ge}}=xe,ye=ge("div"),we=G.suspense=createSuspenseBoundary(G,ce,he,q,ye,V,te,Ee,j,xe);re(null,we.pendingBranch=G.ssContent,ye,null,he,we,te,Ee),we.deps>0?(triggerEvent(G,"onPending"),triggerEvent(G,"onFallback"),re(null,G.ssFallback,q,V,he,null,te,Ee),setActiveBranch(we,G.ssFallback)):we.resolve()}function patchSuspense(G,q,V,he,ce,te,Ee,j,{p:xe,um:re,o:{createElement:ge}}){const ye=q.suspense=G.suspense;ye.vnode=q,q.el=G.el;const we=q.ssContent,ke=q.ssFallback,{activeBranch:Se,pendingBranch:Pe,isInFallback:Re,isHydrating:Ne}=ye;if(Pe)ye.pendingBranch=we,isSameVNodeType(we,Pe)?(xe(Pe,we,ye.hiddenContainer,null,ce,ye,te,Ee,j),ye.deps<=0?ye.resolve():Re&&(xe(Se,ke,V,he,ce,null,te,Ee,j),setActiveBranch(ye,ke))):(ye.pendingId++,Ne?(ye.isHydrating=!1,ye.activeBranch=Pe):re(Pe,ce,ye),ye.deps=0,ye.effects.length=0,ye.hiddenContainer=ge("div"),Re?(xe(null,we,ye.hiddenContainer,null,ce,ye,te,Ee,j),ye.deps<=0?ye.resolve():(xe(Se,ke,V,he,ce,null,te,Ee,j),setActiveBranch(ye,ke))):Se&&isSameVNodeType(we,Se)?(xe(Se,we,V,he,ce,ye,te,Ee,j),ye.resolve(!0)):(xe(null,we,ye.hiddenContainer,null,ce,ye,te,Ee,j),ye.deps<=0&&ye.resolve()));else if(Se&&isSameVNodeType(we,Se))xe(Se,we,V,he,ce,ye,te,Ee,j),setActiveBranch(ye,we);else if(triggerEvent(q,"onPending"),ye.pendingBranch=we,ye.pendingId++,xe(null,we,ye.hiddenContainer,null,ce,ye,te,Ee,j),ye.deps<=0)ye.resolve();else{const{timeout:ze,pendingId:Be}=ye;ze>0?setTimeout(()=>{ye.pendingId===Be&&ye.fallback(ke)},ze):ze===0&&ye.fallback(ke)}}function createSuspenseBoundary(G,q,V,he,ce,te,Ee,j,xe,re,ge=!1){const{p:ye,m:we,um:ke,n:Se,o:{parentNode:Pe,remove:Re}}=re,Ne=toNumber(G.props&&G.props.timeout),ze={vnode:G,parent:q,parentComponent:V,isSVG:Ee,container:he,hiddenContainer:ce,anchor:te,deps:0,pendingId:0,timeout:typeof Ne=="number"?Ne:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:ge,isUnmounted:!1,effects:[],resolve(Be=!1){const{vnode:Ze,activeBranch:Xe,pendingBranch:qe,pendingId:Je,effects:dt,parentComponent:Ct,container:bt}=ze;if(ze.isHydrating)ze.isHydrating=!1;else if(!Be){const tt=Xe&&qe.transition&&qe.transition.mode==="out-in";tt&&(Xe.transition.afterLeave=()=>{Je===ze.pendingId&&we(qe,bt,rt,0)});let{anchor:rt}=ze;Xe&&(rt=Se(Xe),ke(Xe,Ct,ze,!0)),tt||we(qe,bt,rt,0)}setActiveBranch(ze,qe),ze.pendingBranch=null,ze.isInFallback=!1;let xt=ze.parent,nt=!1;for(;xt;){if(xt.pendingBranch){xt.effects.push(...dt),nt=!0;break}xt=xt.parent}nt||queuePostFlushCb(dt),ze.effects=[],triggerEvent(Ze,"onResolve")},fallback(Be){if(!ze.pendingBranch)return;const{vnode:Ze,activeBranch:Xe,parentComponent:qe,container:Je,isSVG:dt}=ze;triggerEvent(Ze,"onFallback");const Ct=Se(Xe),bt=()=>{!ze.isInFallback||(ye(null,Be,Je,Ct,qe,null,dt,j,xe),setActiveBranch(ze,Be))},xt=Be.transition&&Be.transition.mode==="out-in";xt&&(Xe.transition.afterLeave=bt),ze.isInFallback=!0,ke(Xe,qe,null,!0),xt||bt()},move(Be,Ze,Xe){ze.activeBranch&&we(ze.activeBranch,Be,Ze,Xe),ze.container=Be},next(){return ze.activeBranch&&Se(ze.activeBranch)},registerDep(Be,Ze){const Xe=!!ze.pendingBranch;Xe&&ze.deps++;const qe=Be.vnode.el;Be.asyncDep.catch(Je=>{handleError(Je,Be,0)}).then(Je=>{if(Be.isUnmounted||ze.isUnmounted||ze.pendingId!==Be.suspenseId)return;Be.asyncResolved=!0;const{vnode:dt}=Be;handleSetupResult(Be,Je,!1),qe&&(dt.el=qe);const Ct=!qe&&Be.subTree.el;Ze(Be,dt,Pe(qe||Be.subTree.el),qe?null:Se(Be.subTree),ze,Ee,xe),Ct&&Re(Ct),updateHOCHostEl(Be,dt.el),Xe&&--ze.deps===0&&ze.resolve()})},unmount(Be,Ze){ze.isUnmounted=!0,ze.activeBranch&&ke(ze.activeBranch,V,Be,Ze),ze.pendingBranch&&ke(ze.pendingBranch,V,Be,Ze)}};return ze}function hydrateSuspense(G,q,V,he,ce,te,Ee,j,xe){const re=q.suspense=createSuspenseBoundary(q,he,V,G.parentNode,document.createElement("div"),null,ce,te,Ee,j,!0),ge=xe(G,re.pendingBranch=q.ssContent,V,re,te,Ee);return re.deps===0&&re.resolve(),ge}function normalizeSuspenseChildren(G){const{shapeFlag:q,children:V}=G,he=q&32;G.ssContent=normalizeSuspenseSlot(he?V.default:V),G.ssFallback=he?normalizeSuspenseSlot(V.fallback):createVNode(Comment$1)}function normalizeSuspenseSlot(G){let q;if(isFunction$2(G)){const V=isBlockTreeEnabled&&G._c;V&&(G._d=!1,openBlock()),G=G(),V&&(G._d=!0,q=currentBlock,closeBlock())}return isArray$1(G)&&(G=filterSingleRoot(G)),G=normalizeVNode(G),q&&!G.dynamicChildren&&(G.dynamicChildren=q.filter(V=>V!==G)),G}function queueEffectWithSuspense(G,q){q&&q.pendingBranch?isArray$1(G)?q.effects.push(...G):q.effects.push(G):queuePostFlushCb(G)}function setActiveBranch(G,q){G.activeBranch=q;const{vnode:V,parentComponent:he}=G,ce=V.el=q.el;he&&he.subTree===V&&(he.vnode.el=ce,updateHOCHostEl(he,ce))}function provide(G,q){if(currentInstance){let V=currentInstance.provides;const he=currentInstance.parent&&currentInstance.parent.provides;he===V&&(V=currentInstance.provides=Object.create(he)),V[G]=q}}function inject(G,q,V=!1){const he=currentInstance||currentRenderingInstance;if(he){const ce=he.parent==null?he.vnode.appContext&&he.vnode.appContext.provides:he.parent.provides;if(ce&&G in ce)return ce[G];if(arguments.length>1)return V&&isFunction$2(q)?q.call(he.proxy):q}}function watchEffect(G,q){return doWatch(G,null,q)}const INITIAL_WATCHER_VALUE={};function watch(G,q,V){return doWatch(G,q,V)}function doWatch(G,q,{immediate:V,deep:he,flush:ce,onTrack:te,onTrigger:Ee}=EMPTY_OBJ){const j=currentInstance;let xe,re=!1,ge=!1;if(isRef(G)?(xe=()=>G.value,re=isShallow(G)):isReactive(G)?(xe=()=>G,he=!0):isArray$1(G)?(ge=!0,re=G.some(isReactive),xe=()=>G.map(Ne=>{if(isRef(Ne))return Ne.value;if(isReactive(Ne))return traverse(Ne);if(isFunction$2(Ne))return callWithErrorHandling(Ne,j,2)})):isFunction$2(G)?q?xe=()=>callWithErrorHandling(G,j,2):xe=()=>{if(!(j&&j.isUnmounted))return ye&&ye(),callWithAsyncErrorHandling(G,j,3,[we])}:xe=NOOP,q&&he){const Ne=xe;xe=()=>traverse(Ne())}let ye,we=Ne=>{ye=Re.onStop=()=>{callWithErrorHandling(Ne,j,4)}};if(isInSSRComponentSetup)return we=NOOP,q?V&&callWithAsyncErrorHandling(q,j,3,[xe(),ge?[]:void 0,we]):xe(),NOOP;let ke=ge?[]:INITIAL_WATCHER_VALUE;const Se=()=>{if(!!Re.active)if(q){const Ne=Re.run();(he||re||(ge?Ne.some((ze,Be)=>hasChanged(ze,ke[Be])):hasChanged(Ne,ke)))&&(ye&&ye(),callWithAsyncErrorHandling(q,j,3,[Ne,ke===INITIAL_WATCHER_VALUE?void 0:ke,we]),ke=Ne)}else Re.run()};Se.allowRecurse=!!q;let Pe;ce==="sync"?Pe=Se:ce==="post"?Pe=()=>queuePostRenderEffect(Se,j&&j.suspense):Pe=()=>{!j||j.isMounted?queuePreFlushCb(Se):Se()};const Re=new ReactiveEffect(xe,Pe);return q?V?Se():ke=Re.run():ce==="post"?queuePostRenderEffect(Re.run.bind(Re),j&&j.suspense):Re.run(),()=>{Re.stop(),j&&j.scope&&remove(j.scope.effects,Re)}}function instanceWatch(G,q,V){const he=this.proxy,ce=isString$1(G)?G.includes(".")?createPathGetter(he,G):()=>he[G]:G.bind(he,he);let te;isFunction$2(q)?te=q:(te=q.handler,V=q);const Ee=currentInstance;setCurrentInstance(this);const j=doWatch(ce,te.bind(he),V);return Ee?setCurrentInstance(Ee):unsetCurrentInstance(),j}function createPathGetter(G,q){const V=q.split(".");return()=>{let he=G;for(let ce=0;ce<V.length&&he;ce++)he=he[V[ce]];return he}}function traverse(G,q){if(!isObject$1(G)||G.__v_skip||(q=q||new Set,q.has(G)))return G;if(q.add(G),isRef(G))traverse(G.value,q);else if(isArray$1(G))for(let V=0;V<G.length;V++)traverse(G[V],q);else if(isSet(G)||isMap(G))G.forEach(V=>{traverse(V,q)});else if(isPlainObject$2(G))for(const V in G)traverse(G[V],q);return G}function useTransitionState(){const G={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{G.isMounted=!0}),onBeforeUnmount(()=>{G.isUnmounting=!0}),G}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(G,{slots:q}){const V=getCurrentInstance(),he=useTransitionState();let ce;return()=>{const te=q.default&&getTransitionRawChildren(q.default(),!0);if(!te||!te.length)return;const Ee=toRaw(G),{mode:j}=Ee,xe=te[0];if(he.isLeaving)return emptyPlaceholder(xe);const re=getKeepAliveChild(xe);if(!re)return emptyPlaceholder(xe);const ge=resolveTransitionHooks(re,Ee,he,V);setTransitionHooks(re,ge);const ye=V.subTree,we=ye&&getKeepAliveChild(ye);let ke=!1;const{getTransitionKey:Se}=re.type;if(Se){const Pe=Se();ce===void 0?ce=Pe:Pe!==ce&&(ce=Pe,ke=!0)}if(we&&we.type!==Comment$1&&(!isSameVNodeType(re,we)||ke)){const Pe=resolveTransitionHooks(we,Ee,he,V);if(setTransitionHooks(we,Pe),j==="out-in")return he.isLeaving=!0,Pe.afterLeave=()=>{he.isLeaving=!1,V.update()},emptyPlaceholder(xe);j==="in-out"&&re.type!==Comment$1&&(Pe.delayLeave=(Re,Ne,ze)=>{const Be=getLeavingNodesForType(he,we);Be[String(we.key)]=we,Re._leaveCb=()=>{Ne(),Re._leaveCb=void 0,delete ge.delayedLeave},ge.delayedLeave=ze})}return xe}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(G,q){const{leavingVNodes:V}=G;let he=V.get(q.type);return he||(he=Object.create(null),V.set(q.type,he)),he}function resolveTransitionHooks(G,q,V,he){const{appear:ce,mode:te,persisted:Ee=!1,onBeforeEnter:j,onEnter:xe,onAfterEnter:re,onEnterCancelled:ge,onBeforeLeave:ye,onLeave:we,onAfterLeave:ke,onLeaveCancelled:Se,onBeforeAppear:Pe,onAppear:Re,onAfterAppear:Ne,onAppearCancelled:ze}=q,Be=String(G.key),Ze=getLeavingNodesForType(V,G),Xe=(Je,dt)=>{Je&&callWithAsyncErrorHandling(Je,he,9,dt)},qe={mode:te,persisted:Ee,beforeEnter(Je){let dt=j;if(!V.isMounted)if(ce)dt=Pe||j;else return;Je._leaveCb&&Je._leaveCb(!0);const Ct=Ze[Be];Ct&&isSameVNodeType(G,Ct)&&Ct.el._leaveCb&&Ct.el._leaveCb(),Xe(dt,[Je])},enter(Je){let dt=xe,Ct=re,bt=ge;if(!V.isMounted)if(ce)dt=Re||xe,Ct=Ne||re,bt=ze||ge;else return;let xt=!1;const nt=Je._enterCb=tt=>{xt||(xt=!0,tt?Xe(bt,[Je]):Xe(Ct,[Je]),qe.delayedLeave&&qe.delayedLeave(),Je._enterCb=void 0)};dt?(dt(Je,nt),dt.length<=1&&nt()):nt()},leave(Je,dt){const Ct=String(G.key);if(Je._enterCb&&Je._enterCb(!0),V.isUnmounting)return dt();Xe(ye,[Je]);let bt=!1;const xt=Je._leaveCb=nt=>{bt||(bt=!0,dt(),nt?Xe(Se,[Je]):Xe(ke,[Je]),Je._leaveCb=void 0,Ze[Ct]===G&&delete Ze[Ct])};Ze[Ct]=G,we?(we(Je,xt),we.length<=1&&xt()):xt()},clone(Je){return resolveTransitionHooks(Je,q,V,he)}};return qe}function emptyPlaceholder(G){if(isKeepAlive(G))return G=cloneVNode(G),G.children=null,G}function getKeepAliveChild(G){return isKeepAlive(G)?G.children?G.children[0]:void 0:G}function setTransitionHooks(G,q){G.shapeFlag&6&&G.component?setTransitionHooks(G.component.subTree,q):G.shapeFlag&128?(G.ssContent.transition=q.clone(G.ssContent),G.ssFallback.transition=q.clone(G.ssFallback)):G.transition=q}function getTransitionRawChildren(G,q=!1){let V=[],he=0;for(let ce=0;ce<G.length;ce++){const te=G[ce];te.type===Fragment?(te.patchFlag&128&&he++,V=V.concat(getTransitionRawChildren(te.children,q))):(q||te.type!==Comment$1)&&V.push(te)}if(he>1)for(let ce=0;ce<V.length;ce++)V[ce].patchFlag=-2;return V}function defineComponent(G){return isFunction$2(G)?{setup:G,name:G.name}:G}const isAsyncWrapper=G=>!!G.type.__asyncLoader,isKeepAlive=G=>G.type.__isKeepAlive;function onActivated(G,q){registerKeepAliveHook(G,"a",q)}function onDeactivated(G,q){registerKeepAliveHook(G,"da",q)}function registerKeepAliveHook(G,q,V=currentInstance){const he=G.__wdc||(G.__wdc=()=>{let ce=V;for(;ce;){if(ce.isDeactivated)return;ce=ce.parent}return G()});if(injectHook(q,he,V),V){let ce=V.parent;for(;ce&&ce.parent;)isKeepAlive(ce.parent.vnode)&&injectToKeepAliveRoot(he,q,V,ce),ce=ce.parent}}function injectToKeepAliveRoot(G,q,V,he){const ce=injectHook(q,G,he,!0);onUnmounted(()=>{remove(he[q],ce)},V)}function injectHook(G,q,V=currentInstance,he=!1){if(V){const ce=V[G]||(V[G]=[]),te=q.__weh||(q.__weh=(...Ee)=>{if(V.isUnmounted)return;pauseTracking(),setCurrentInstance(V);const j=callWithAsyncErrorHandling(q,V,G,Ee);return unsetCurrentInstance(),resetTracking(),j});return he?ce.unshift(te):ce.push(te),te}}const createHook=G=>(q,V=currentInstance)=>(!isInSSRComponentSetup||G==="sp")&&injectHook(G,q,V),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(G,q=currentInstance){injectHook("ec",G,q)}let shouldCacheAccess=!0;function applyOptions(G){const q=resolveMergedOptions(G),V=G.proxy,he=G.ctx;shouldCacheAccess=!1,q.beforeCreate&&callHook$1(q.beforeCreate,G,"bc");const{data:ce,computed:te,methods:Ee,watch:j,provide:xe,inject:re,created:ge,beforeMount:ye,mounted:we,beforeUpdate:ke,updated:Se,activated:Pe,deactivated:Re,beforeDestroy:Ne,beforeUnmount:ze,destroyed:Be,unmounted:Ze,render:Xe,renderTracked:qe,renderTriggered:Je,errorCaptured:dt,serverPrefetch:Ct,expose:bt,inheritAttrs:xt,components:nt,directives:tt,filters:rt}=q;if(re&&resolveInjections(re,he,null,G.appContext.config.unwrapInjectedRef),Ee)for(const pt in Ee){const vt=Ee[pt];isFunction$2(vt)&&(he[pt]=vt.bind(V))}if(ce){const pt=ce.call(V,V);isObject$1(pt)&&(G.data=reactive(pt))}if(shouldCacheAccess=!0,te)for(const pt in te){const vt=te[pt],ut=isFunction$2(vt)?vt.bind(V,V):isFunction$2(vt.get)?vt.get.bind(V,V):NOOP,Ut=!isFunction$2(vt)&&isFunction$2(vt.set)?vt.set.bind(V):NOOP,at=computed({get:ut,set:Ut});Object.defineProperty(he,pt,{enumerable:!0,configurable:!0,get:()=>at.value,set:zt=>at.value=zt})}if(j)for(const pt in j)createWatcher(j[pt],he,V,pt);if(xe){const pt=isFunction$2(xe)?xe.call(V):xe;Reflect.ownKeys(pt).forEach(vt=>{provide(vt,pt[vt])})}ge&&callHook$1(ge,G,"c");function st(pt,vt){isArray$1(vt)?vt.forEach(ut=>pt(ut.bind(V))):vt&&pt(vt.bind(V))}if(st(onBeforeMount,ye),st(onMounted,we),st(onBeforeUpdate,ke),st(onUpdated,Se),st(onActivated,Pe),st(onDeactivated,Re),st(onErrorCaptured,dt),st(onRenderTracked,qe),st(onRenderTriggered,Je),st(onBeforeUnmount,ze),st(onUnmounted,Ze),st(onServerPrefetch,Ct),isArray$1(bt))if(bt.length){const pt=G.exposed||(G.exposed={});bt.forEach(vt=>{Object.defineProperty(pt,vt,{get:()=>V[vt],set:ut=>V[vt]=ut})})}else G.exposed||(G.exposed={});Xe&&G.render===NOOP&&(G.render=Xe),xt!=null&&(G.inheritAttrs=xt),nt&&(G.components=nt),tt&&(G.directives=tt)}function resolveInjections(G,q,V=NOOP,he=!1){isArray$1(G)&&(G=normalizeInject(G));for(const ce in G){const te=G[ce];let Ee;isObject$1(te)?"default"in te?Ee=inject(te.from||ce,te.default,!0):Ee=inject(te.from||ce):Ee=inject(te),isRef(Ee)&&he?Object.defineProperty(q,ce,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:j=>Ee.value=j}):q[ce]=Ee}}function callHook$1(G,q,V){callWithAsyncErrorHandling(isArray$1(G)?G.map(he=>he.bind(q.proxy)):G.bind(q.proxy),q,V)}function createWatcher(G,q,V,he){const ce=he.includes(".")?createPathGetter(V,he):()=>V[he];if(isString$1(G)){const te=q[G];isFunction$2(te)&&watch(ce,te)}else if(isFunction$2(G))watch(ce,G.bind(V));else if(isObject$1(G))if(isArray$1(G))G.forEach(te=>createWatcher(te,q,V,he));else{const te=isFunction$2(G.handler)?G.handler.bind(V):q[G.handler];isFunction$2(te)&&watch(ce,te,G)}}function resolveMergedOptions(G){const q=G.type,{mixins:V,extends:he}=q,{mixins:ce,optionsCache:te,config:{optionMergeStrategies:Ee}}=G.appContext,j=te.get(q);let xe;return j?xe=j:!ce.length&&!V&&!he?xe=q:(xe={},ce.length&&ce.forEach(re=>mergeOptions$1(xe,re,Ee,!0)),mergeOptions$1(xe,q,Ee)),te.set(q,xe),xe}function mergeOptions$1(G,q,V,he=!1){const{mixins:ce,extends:te}=q;te&&mergeOptions$1(G,te,V,!0),ce&&ce.forEach(Ee=>mergeOptions$1(G,Ee,V,!0));for(const Ee in q)if(!(he&&Ee==="expose")){const j=internalOptionMergeStrats[Ee]||V&&V[Ee];G[Ee]=j?j(G[Ee],q[Ee]):q[Ee]}return G}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(G,q){return q?G?function(){return extend$1(isFunction$2(G)?G.call(this,this):G,isFunction$2(q)?q.call(this,this):q)}:q:G}function mergeInject(G,q){return mergeObjectOptions(normalizeInject(G),normalizeInject(q))}function normalizeInject(G){if(isArray$1(G)){const q={};for(let V=0;V<G.length;V++)q[G[V]]=G[V];return q}return G}function mergeAsArray(G,q){return G?[...new Set([].concat(G,q))]:q}function mergeObjectOptions(G,q){return G?extend$1(extend$1(Object.create(null),G),q):q}function mergeWatchOptions(G,q){if(!G)return q;if(!q)return G;const V=extend$1(Object.create(null),G);for(const he in q)V[he]=mergeAsArray(G[he],q[he]);return V}function initProps(G,q,V,he=!1){const ce={},te={};def(te,InternalObjectKey,1),G.propsDefaults=Object.create(null),setFullProps(G,q,ce,te);for(const Ee in G.propsOptions[0])Ee in ce||(ce[Ee]=void 0);V?G.props=he?ce:shallowReactive(ce):G.type.props?G.props=ce:G.props=te,G.attrs=te}function updateProps(G,q,V,he){const{props:ce,attrs:te,vnode:{patchFlag:Ee}}=G,j=toRaw(ce),[xe]=G.propsOptions;let re=!1;if((he||Ee>0)&&!(Ee&16)){if(Ee&8){const ge=G.vnode.dynamicProps;for(let ye=0;ye<ge.length;ye++){let we=ge[ye];const ke=q[we];if(xe)if(hasOwn(te,we))ke!==te[we]&&(te[we]=ke,re=!0);else{const Se=camelize(we);ce[Se]=resolvePropValue(xe,j,Se,ke,G,!1)}else ke!==te[we]&&(te[we]=ke,re=!0)}}}else{setFullProps(G,q,ce,te)&&(re=!0);let ge;for(const ye in j)(!q||!hasOwn(q,ye)&&((ge=hyphenate(ye))===ye||!hasOwn(q,ge)))&&(xe?V&&(V[ye]!==void 0||V[ge]!==void 0)&&(ce[ye]=resolvePropValue(xe,j,ye,void 0,G,!0)):delete ce[ye]);if(te!==j)for(const ye in te)(!q||!hasOwn(q,ye)&&!0)&&(delete te[ye],re=!0)}re&&trigger$1(G,"set","$attrs")}function setFullProps(G,q,V,he){const[ce,te]=G.propsOptions;let Ee=!1,j;if(q)for(let xe in q){if(isReservedProp(xe))continue;const re=q[xe];let ge;ce&&hasOwn(ce,ge=camelize(xe))?!te||!te.includes(ge)?V[ge]=re:(j||(j={}))[ge]=re:isEmitListener(G.emitsOptions,xe)||(!(xe in he)||re!==he[xe])&&(he[xe]=re,Ee=!0)}if(te){const xe=toRaw(V),re=j||EMPTY_OBJ;for(let ge=0;ge<te.length;ge++){const ye=te[ge];V[ye]=resolvePropValue(ce,xe,ye,re[ye],G,!hasOwn(re,ye))}}return Ee}function resolvePropValue(G,q,V,he,ce,te){const Ee=G[V];if(Ee!=null){const j=hasOwn(Ee,"default");if(j&&he===void 0){const xe=Ee.default;if(Ee.type!==Function&&isFunction$2(xe)){const{propsDefaults:re}=ce;V in re?he=re[V]:(setCurrentInstance(ce),he=re[V]=xe.call(null,q),unsetCurrentInstance())}else he=xe}Ee[0]&&(te&&!j?he=!1:Ee[1]&&(he===""||he===hyphenate(V))&&(he=!0))}return he}function normalizePropsOptions(G,q,V=!1){const he=q.propsCache,ce=he.get(G);if(ce)return ce;const te=G.props,Ee={},j=[];let xe=!1;if(!isFunction$2(G)){const ge=ye=>{xe=!0;const[we,ke]=normalizePropsOptions(ye,q,!0);extend$1(Ee,we),ke&&j.push(...ke)};!V&&q.mixins.length&&q.mixins.forEach(ge),G.extends&&ge(G.extends),G.mixins&&G.mixins.forEach(ge)}if(!te&&!xe)return he.set(G,EMPTY_ARR),EMPTY_ARR;if(isArray$1(te))for(let ge=0;ge<te.length;ge++){const ye=camelize(te[ge]);validatePropName(ye)&&(Ee[ye]=EMPTY_OBJ)}else if(te)for(const ge in te){const ye=camelize(ge);if(validatePropName(ye)){const we=te[ge],ke=Ee[ye]=isArray$1(we)||isFunction$2(we)?{type:we}:we;if(ke){const Se=getTypeIndex(Boolean,ke.type),Pe=getTypeIndex(String,ke.type);ke[0]=Se>-1,ke[1]=Pe<0||Se<Pe,(Se>-1||hasOwn(ke,"default"))&&j.push(ye)}}}const re=[Ee,j];return he.set(G,re),re}function validatePropName(G){return G[0]!=="$"}function getType(G){const q=G&&G.toString().match(/^\s*function (\w+)/);return q?q[1]:G===null?"null":""}function isSameType(G,q){return getType(G)===getType(q)}function getTypeIndex(G,q){return isArray$1(q)?q.findIndex(V=>isSameType(V,G)):isFunction$2(q)&&isSameType(q,G)?0:-1}const isInternalKey=G=>G[0]==="_"||G==="$stable",normalizeSlotValue=G=>isArray$1(G)?G.map(normalizeVNode):[normalizeVNode(G)],normalizeSlot$1=(G,q,V)=>{const he=withCtx((...ce)=>normalizeSlotValue(q(...ce)),V);return he._c=!1,he},normalizeObjectSlots=(G,q,V)=>{const he=G._ctx;for(const ce in G){if(isInternalKey(ce))continue;const te=G[ce];if(isFunction$2(te))q[ce]=normalizeSlot$1(ce,te,he);else if(te!=null){const Ee=normalizeSlotValue(te);q[ce]=()=>Ee}}},normalizeVNodeSlots=(G,q)=>{const V=normalizeSlotValue(q);G.slots.default=()=>V},initSlots=(G,q)=>{if(G.vnode.shapeFlag&32){const V=q._;V?(G.slots=toRaw(q),def(q,"_",V)):normalizeObjectSlots(q,G.slots={})}else G.slots={},q&&normalizeVNodeSlots(G,q);def(G.slots,InternalObjectKey,1)},updateSlots=(G,q,V)=>{const{vnode:he,slots:ce}=G;let te=!0,Ee=EMPTY_OBJ;if(he.shapeFlag&32){const j=q._;j?V&&j===1?te=!1:(extend$1(ce,q),!V&&j===1&&delete ce._):(te=!q.$stable,normalizeObjectSlots(q,ce)),Ee=q}else q&&(normalizeVNodeSlots(G,q),Ee={default:1});if(te)for(const j in ce)!isInternalKey(j)&&!(j in Ee)&&delete ce[j]};function withDirectives(G,q){const V=currentRenderingInstance;if(V===null)return G;const he=V.proxy,ce=G.dirs||(G.dirs=[]);for(let te=0;te<q.length;te++){let[Ee,j,xe,re=EMPTY_OBJ]=q[te];isFunction$2(Ee)&&(Ee={mounted:Ee,updated:Ee}),Ee.deep&&traverse(j),ce.push({dir:Ee,instance:he,value:j,oldValue:void 0,arg:xe,modifiers:re})}return G}function invokeDirectiveHook(G,q,V,he){const ce=G.dirs,te=q&&q.dirs;for(let Ee=0;Ee<ce.length;Ee++){const j=ce[Ee];te&&(j.oldValue=te[Ee].value);let xe=j.dir[he];xe&&(pauseTracking(),callWithAsyncErrorHandling(xe,V,8,[G.el,j,G,q]),resetTracking())}}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(G,q){return function(he,ce=null){ce!=null&&!isObject$1(ce)&&(ce=null);const te=createAppContext(),Ee=new Set;let j=!1;const xe=te.app={_uid:uid++,_component:he,_props:ce,_container:null,_context:te,_instance:null,version,get config(){return te.config},set config(re){},use(re,...ge){return Ee.has(re)||(re&&isFunction$2(re.install)?(Ee.add(re),re.install(xe,...ge)):isFunction$2(re)&&(Ee.add(re),re(xe,...ge))),xe},mixin(re){return te.mixins.includes(re)||te.mixins.push(re),xe},component(re,ge){return ge?(te.components[re]=ge,xe):te.components[re]},directive(re,ge){return ge?(te.directives[re]=ge,xe):te.directives[re]},mount(re,ge,ye){if(!j){const we=createVNode(he,ce);return we.appContext=te,ge&&q?q(we,re):G(we,re,ye),j=!0,xe._container=re,re.__vue_app__=xe,getExposeProxy(we.component)||we.component.proxy}},unmount(){j&&(G(null,xe._container),delete xe._container.__vue_app__)},provide(re,ge){return te.provides[re]=ge,xe}};return xe}}function setRef(G,q,V,he,ce=!1){if(isArray$1(G)){G.forEach((we,ke)=>setRef(we,q&&(isArray$1(q)?q[ke]:q),V,he,ce));return}if(isAsyncWrapper(he)&&!ce)return;const te=he.shapeFlag&4?getExposeProxy(he.component)||he.component.proxy:he.el,Ee=ce?null:te,{i:j,r:xe}=G,re=q&&q.r,ge=j.refs===EMPTY_OBJ?j.refs={}:j.refs,ye=j.setupState;if(re!=null&&re!==xe&&(isString$1(re)?(ge[re]=null,hasOwn(ye,re)&&(ye[re]=null)):isRef(re)&&(re.value=null)),isFunction$2(xe))callWithErrorHandling(xe,j,12,[Ee,ge]);else{const we=isString$1(xe),ke=isRef(xe);if(we||ke){const Se=()=>{if(G.f){const Pe=we?ge[xe]:xe.value;ce?isArray$1(Pe)&&remove(Pe,te):isArray$1(Pe)?Pe.includes(te)||Pe.push(te):we?ge[xe]=[te]:(xe.value=[te],G.k&&(ge[G.k]=xe.value))}else we?(ge[xe]=Ee,hasOwn(ye,xe)&&(ye[xe]=Ee)):isRef(xe)&&(xe.value=Ee,G.k&&(ge[G.k]=Ee))};Ee?(Se.id=-1,queuePostRenderEffect(Se,V)):Se()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(G){return baseCreateRenderer(G)}function baseCreateRenderer(G,q){const V=getGlobalThis();V.__VUE__=!0;const{insert:he,remove:ce,patchProp:te,createElement:Ee,createText:j,createComment:xe,setText:re,setElementText:ge,parentNode:ye,nextSibling:we,setScopeId:ke=NOOP,cloneNode:Se,insertStaticContent:Pe}=G,Re=(It,Rt,nn,xn=null,En=null,$n=null,zn=!1,vn=null,wn=!!Rt.dynamicChildren)=>{if(It===Rt)return;It&&!isSameVNodeType(It,Rt)&&(xn=Ot(It),sn(It,En,$n,!0),It=null),Rt.patchFlag===-2&&(wn=!1,Rt.dynamicChildren=null);const{type:Sn,ref:Jn,shapeFlag:tr}=Rt;switch(Sn){case Text$1:Ne(It,Rt,nn,xn);break;case Comment$1:ze(It,Rt,nn,xn);break;case Static:It==null&&Be(Rt,nn,xn,zn);break;case Fragment:tt(It,Rt,nn,xn,En,$n,zn,vn,wn);break;default:tr&1?qe(It,Rt,nn,xn,En,$n,zn,vn,wn):tr&6?rt(It,Rt,nn,xn,En,$n,zn,vn,wn):(tr&64||tr&128)&&Sn.process(It,Rt,nn,xn,En,$n,zn,vn,wn,un)}Jn!=null&&En&&setRef(Jn,It&&It.ref,$n,Rt||It,!Rt)},Ne=(It,Rt,nn,xn)=>{if(It==null)he(Rt.el=j(Rt.children),nn,xn);else{const En=Rt.el=It.el;Rt.children!==It.children&&re(En,Rt.children)}},ze=(It,Rt,nn,xn)=>{It==null?he(Rt.el=xe(Rt.children||""),nn,xn):Rt.el=It.el},Be=(It,Rt,nn,xn)=>{[It.el,It.anchor]=Pe(It.children,Rt,nn,xn,It.el,It.anchor)},Ze=({el:It,anchor:Rt},nn,xn)=>{let En;for(;It&&It!==Rt;)En=we(It),he(It,nn,xn),It=En;he(Rt,nn,xn)},Xe=({el:It,anchor:Rt})=>{let nn;for(;It&&It!==Rt;)nn=we(It),ce(It),It=nn;ce(Rt)},qe=(It,Rt,nn,xn,En,$n,zn,vn,wn)=>{zn=zn||Rt.type==="svg",It==null?Je(Rt,nn,xn,En,$n,zn,vn,wn):bt(It,Rt,En,$n,zn,vn,wn)},Je=(It,Rt,nn,xn,En,$n,zn,vn)=>{let wn,Sn;const{type:Jn,props:tr,shapeFlag:pr,transition:Xn,patchFlag:Gn,dirs:cn}=It;if(It.el&&Se!==void 0&&Gn===-1)wn=It.el=Se(It.el);else{if(wn=It.el=Ee(It.type,$n,tr&&tr.is,tr),pr&8?ge(wn,It.children):pr&16&&Ct(It.children,wn,null,xn,En,$n&&Jn!=="foreignObject",zn,vn),cn&&invokeDirectiveHook(It,null,xn,"created"),tr){for(const On in tr)On!=="value"&&!isReservedProp(On)&&te(wn,On,null,tr[On],$n,It.children,xn,En,Zt);"value"in tr&&te(wn,"value",null,tr.value),(Sn=tr.onVnodeBeforeMount)&&invokeVNodeHook(Sn,xn,It)}dt(wn,It,It.scopeId,zn,xn)}cn&&invokeDirectiveHook(It,null,xn,"beforeMount");const gn=(!En||En&&!En.pendingBranch)&&Xn&&!Xn.persisted;gn&&Xn.beforeEnter(wn),he(wn,Rt,nn),((Sn=tr&&tr.onVnodeMounted)||gn||cn)&&queuePostRenderEffect(()=>{Sn&&invokeVNodeHook(Sn,xn,It),gn&&Xn.enter(wn),cn&&invokeDirectiveHook(It,null,xn,"mounted")},En)},dt=(It,Rt,nn,xn,En)=>{if(nn&&ke(It,nn),xn)for(let $n=0;$n<xn.length;$n++)ke(It,xn[$n]);if(En){let $n=En.subTree;if(Rt===$n){const zn=En.vnode;dt(It,zn,zn.scopeId,zn.slotScopeIds,En.parent)}}},Ct=(It,Rt,nn,xn,En,$n,zn,vn,wn=0)=>{for(let Sn=wn;Sn<It.length;Sn++){const Jn=It[Sn]=vn?cloneIfMounted(It[Sn]):normalizeVNode(It[Sn]);Re(null,Jn,Rt,nn,xn,En,$n,zn,vn)}},bt=(It,Rt,nn,xn,En,$n,zn)=>{const vn=Rt.el=It.el;let{patchFlag:wn,dynamicChildren:Sn,dirs:Jn}=Rt;wn|=It.patchFlag&16;const tr=It.props||EMPTY_OBJ,pr=Rt.props||EMPTY_OBJ;let Xn;nn&&toggleRecurse(nn,!1),(Xn=pr.onVnodeBeforeUpdate)&&invokeVNodeHook(Xn,nn,Rt,It),Jn&&invokeDirectiveHook(Rt,It,nn,"beforeUpdate"),nn&&toggleRecurse(nn,!0);const Gn=En&&Rt.type!=="foreignObject";if(Sn?xt(It.dynamicChildren,Sn,vn,nn,xn,Gn,$n):zn||ut(It,Rt,vn,null,nn,xn,Gn,$n,!1),wn>0){if(wn&16)nt(vn,Rt,tr,pr,nn,xn,En);else if(wn&2&&tr.class!==pr.class&&te(vn,"class",null,pr.class,En),wn&4&&te(vn,"style",tr.style,pr.style,En),wn&8){const cn=Rt.dynamicProps;for(let gn=0;gn<cn.length;gn++){const On=cn[gn],Kn=tr[On],_r=pr[On];(_r!==Kn||On==="value")&&te(vn,On,Kn,_r,En,It.children,nn,xn,Zt)}}wn&1&&It.children!==Rt.children&&ge(vn,Rt.children)}else!zn&&Sn==null&&nt(vn,Rt,tr,pr,nn,xn,En);((Xn=pr.onVnodeUpdated)||Jn)&&queuePostRenderEffect(()=>{Xn&&invokeVNodeHook(Xn,nn,Rt,It),Jn&&invokeDirectiveHook(Rt,It,nn,"updated")},xn)},xt=(It,Rt,nn,xn,En,$n,zn)=>{for(let vn=0;vn<Rt.length;vn++){const wn=It[vn],Sn=Rt[vn],Jn=wn.el&&(wn.type===Fragment||!isSameVNodeType(wn,Sn)||wn.shapeFlag&70)?ye(wn.el):nn;Re(wn,Sn,Jn,null,xn,En,$n,zn,!0)}},nt=(It,Rt,nn,xn,En,$n,zn)=>{if(nn!==xn){for(const vn in xn){if(isReservedProp(vn))continue;const wn=xn[vn],Sn=nn[vn];wn!==Sn&&vn!=="value"&&te(It,vn,Sn,wn,zn,Rt.children,En,$n,Zt)}if(nn!==EMPTY_OBJ)for(const vn in nn)!isReservedProp(vn)&&!(vn in xn)&&te(It,vn,nn[vn],null,zn,Rt.children,En,$n,Zt);"value"in xn&&te(It,"value",nn.value,xn.value)}},tt=(It,Rt,nn,xn,En,$n,zn,vn,wn)=>{const Sn=Rt.el=It?It.el:j(""),Jn=Rt.anchor=It?It.anchor:j("");let{patchFlag:tr,dynamicChildren:pr,slotScopeIds:Xn}=Rt;Xn&&(vn=vn?vn.concat(Xn):Xn),It==null?(he(Sn,nn,xn),he(Jn,nn,xn),Ct(Rt.children,nn,Jn,En,$n,zn,vn,wn)):tr>0&&tr&64&&pr&&It.dynamicChildren?(xt(It.dynamicChildren,pr,nn,En,$n,zn,vn),(Rt.key!=null||En&&Rt===En.subTree)&&traverseStaticChildren(It,Rt,!0)):ut(It,Rt,nn,Jn,En,$n,zn,vn,wn)},rt=(It,Rt,nn,xn,En,$n,zn,vn,wn)=>{Rt.slotScopeIds=vn,It==null?Rt.shapeFlag&512?En.ctx.activate(Rt,nn,xn,zn,wn):ht(Rt,nn,xn,En,$n,zn,wn):st(It,Rt,wn)},ht=(It,Rt,nn,xn,En,$n,zn)=>{const vn=It.component=createComponentInstance(It,xn,En);if(isKeepAlive(It)&&(vn.ctx.renderer=un),setupComponent(vn),vn.asyncDep){if(En&&En.registerDep(vn,pt),!It.el){const wn=vn.subTree=createVNode(Comment$1);ze(null,wn,Rt,nn)}return}pt(vn,It,Rt,nn,En,$n,zn)},st=(It,Rt,nn)=>{const xn=Rt.component=It.component;if(shouldUpdateComponent(It,Rt,nn))if(xn.asyncDep&&!xn.asyncResolved){vt(xn,Rt,nn);return}else xn.next=Rt,invalidateJob(xn.update),xn.update();else Rt.component=It.component,Rt.el=It.el,xn.vnode=Rt},pt=(It,Rt,nn,xn,En,$n,zn)=>{const vn=()=>{if(It.isMounted){let{next:Jn,bu:tr,u:pr,parent:Xn,vnode:Gn}=It,cn=Jn,gn;toggleRecurse(It,!1),Jn?(Jn.el=Gn.el,vt(It,Jn,zn)):Jn=Gn,tr&&invokeArrayFns(tr),(gn=Jn.props&&Jn.props.onVnodeBeforeUpdate)&&invokeVNodeHook(gn,Xn,Jn,Gn),toggleRecurse(It,!0);const On=renderComponentRoot(It),Kn=It.subTree;It.subTree=On,Re(Kn,On,ye(Kn.el),Ot(Kn),It,En,$n),Jn.el=On.el,cn===null&&updateHOCHostEl(It,On.el),pr&&queuePostRenderEffect(pr,En),(gn=Jn.props&&Jn.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(gn,Xn,Jn,Gn),En)}else{let Jn;const{el:tr,props:pr}=Rt,{bm:Xn,m:Gn,parent:cn}=It,gn=isAsyncWrapper(Rt);if(toggleRecurse(It,!1),Xn&&invokeArrayFns(Xn),!gn&&(Jn=pr&&pr.onVnodeBeforeMount)&&invokeVNodeHook(Jn,cn,Rt),toggleRecurse(It,!0),tr&&In){const On=()=>{It.subTree=renderComponentRoot(It),In(tr,It.subTree,It,En,null)};gn?Rt.type.__asyncLoader().then(()=>!It.isUnmounted&&On()):On()}else{const On=It.subTree=renderComponentRoot(It);Re(null,On,nn,xn,It,En,$n),Rt.el=On.el}if(Gn&&queuePostRenderEffect(Gn,En),!gn&&(Jn=pr&&pr.onVnodeMounted)){const On=Rt;queuePostRenderEffect(()=>invokeVNodeHook(Jn,cn,On),En)}Rt.shapeFlag&256&&It.a&&queuePostRenderEffect(It.a,En),It.isMounted=!0,Rt=nn=xn=null}},wn=It.effect=new ReactiveEffect(vn,()=>queueJob(It.update),It.scope),Sn=It.update=wn.run.bind(wn);Sn.id=It.uid,toggleRecurse(It,!0),Sn()},vt=(It,Rt,nn)=>{Rt.component=It;const xn=It.vnode.props;It.vnode=Rt,It.next=null,updateProps(It,Rt.props,xn,nn),updateSlots(It,Rt.children,nn),pauseTracking(),flushPreFlushCbs(void 0,It.update),resetTracking()},ut=(It,Rt,nn,xn,En,$n,zn,vn,wn=!1)=>{const Sn=It&&It.children,Jn=It?It.shapeFlag:0,tr=Rt.children,{patchFlag:pr,shapeFlag:Xn}=Rt;if(pr>0){if(pr&128){at(Sn,tr,nn,xn,En,$n,zn,vn,wn);return}else if(pr&256){Ut(Sn,tr,nn,xn,En,$n,zn,vn,wn);return}}Xn&8?(Jn&16&&Zt(Sn,En,$n),tr!==Sn&&ge(nn,tr)):Jn&16?Xn&16?at(Sn,tr,nn,xn,En,$n,zn,vn,wn):Zt(Sn,En,$n,!0):(Jn&8&&ge(nn,""),Xn&16&&Ct(tr,nn,xn,En,$n,zn,vn,wn))},Ut=(It,Rt,nn,xn,En,$n,zn,vn,wn)=>{It=It||EMPTY_ARR,Rt=Rt||EMPTY_ARR;const Sn=It.length,Jn=Rt.length,tr=Math.min(Sn,Jn);let pr;for(pr=0;pr<tr;pr++){const Xn=Rt[pr]=wn?cloneIfMounted(Rt[pr]):normalizeVNode(Rt[pr]);Re(It[pr],Xn,nn,null,En,$n,zn,vn,wn)}Sn>Jn?Zt(It,En,$n,!0,!1,tr):Ct(Rt,nn,xn,En,$n,zn,vn,wn,tr)},at=(It,Rt,nn,xn,En,$n,zn,vn,wn)=>{let Sn=0;const Jn=Rt.length;let tr=It.length-1,pr=Jn-1;for(;Sn<=tr&&Sn<=pr;){const Xn=It[Sn],Gn=Rt[Sn]=wn?cloneIfMounted(Rt[Sn]):normalizeVNode(Rt[Sn]);if(isSameVNodeType(Xn,Gn))Re(Xn,Gn,nn,null,En,$n,zn,vn,wn);else break;Sn++}for(;Sn<=tr&&Sn<=pr;){const Xn=It[tr],Gn=Rt[pr]=wn?cloneIfMounted(Rt[pr]):normalizeVNode(Rt[pr]);if(isSameVNodeType(Xn,Gn))Re(Xn,Gn,nn,null,En,$n,zn,vn,wn);else break;tr--,pr--}if(Sn>tr){if(Sn<=pr){const Xn=pr+1,Gn=Xn<Jn?Rt[Xn].el:xn;for(;Sn<=pr;)Re(null,Rt[Sn]=wn?cloneIfMounted(Rt[Sn]):normalizeVNode(Rt[Sn]),nn,Gn,En,$n,zn,vn,wn),Sn++}}else if(Sn>pr)for(;Sn<=tr;)sn(It[Sn],En,$n,!0),Sn++;else{const Xn=Sn,Gn=Sn,cn=new Map;for(Sn=Gn;Sn<=pr;Sn++){const Lr=Rt[Sn]=wn?cloneIfMounted(Rt[Sn]):normalizeVNode(Rt[Sn]);Lr.key!=null&&cn.set(Lr.key,Sn)}let gn,On=0;const Kn=pr-Gn+1;let _r=!1,kr=0;const Dr=new Array(Kn);for(Sn=0;Sn<Kn;Sn++)Dr[Sn]=0;for(Sn=Xn;Sn<=tr;Sn++){const Lr=It[Sn];if(On>=Kn){sn(Lr,En,$n,!0);continue}let Br;if(Lr.key!=null)Br=cn.get(Lr.key);else for(gn=Gn;gn<=pr;gn++)if(Dr[gn-Gn]===0&&isSameVNodeType(Lr,Rt[gn])){Br=gn;break}Br===void 0?sn(Lr,En,$n,!0):(Dr[Br-Gn]=Sn+1,Br>=kr?kr=Br:_r=!0,Re(Lr,Rt[Br],nn,null,En,$n,zn,vn,wn),On++)}const xr=_r?getSequence(Dr):EMPTY_ARR;for(gn=xr.length-1,Sn=Kn-1;Sn>=0;Sn--){const Lr=Gn+Sn,Br=Rt[Lr],Vr=Lr+1<Jn?Rt[Lr+1].el:xn;Dr[Sn]===0?Re(null,Br,nn,Vr,En,$n,zn,vn,wn):_r&&(gn<0||Sn!==xr[gn]?zt(Br,nn,Vr,2):gn--)}}},zt=(It,Rt,nn,xn,En=null)=>{const{el:$n,type:zn,transition:vn,children:wn,shapeFlag:Sn}=It;if(Sn&6){zt(It.component.subTree,Rt,nn,xn);return}if(Sn&128){It.suspense.move(Rt,nn,xn);return}if(Sn&64){zn.move(It,Rt,nn,un);return}if(zn===Fragment){he($n,Rt,nn);for(let tr=0;tr<wn.length;tr++)zt(wn[tr],Rt,nn,xn);he(It.anchor,Rt,nn);return}if(zn===Static){Ze(It,Rt,nn);return}if(xn!==2&&Sn&1&&vn)if(xn===0)vn.beforeEnter($n),he($n,Rt,nn),queuePostRenderEffect(()=>vn.enter($n),En);else{const{leave:tr,delayLeave:pr,afterLeave:Xn}=vn,Gn=()=>he($n,Rt,nn),cn=()=>{tr($n,()=>{Gn(),Xn&&Xn()})};pr?pr($n,Gn,cn):cn()}else he($n,Rt,nn)},sn=(It,Rt,nn,xn=!1,En=!1)=>{const{type:$n,props:zn,ref:vn,children:wn,dynamicChildren:Sn,shapeFlag:Jn,patchFlag:tr,dirs:pr}=It;if(vn!=null&&setRef(vn,null,nn,It,!0),Jn&256){Rt.ctx.deactivate(It);return}const Xn=Jn&1&&pr,Gn=!isAsyncWrapper(It);let cn;if(Gn&&(cn=zn&&zn.onVnodeBeforeUnmount)&&invokeVNodeHook(cn,Rt,It),Jn&6)on(It.component,nn,xn);else{if(Jn&128){It.suspense.unmount(nn,xn);return}Xn&&invokeDirectiveHook(It,null,Rt,"beforeUnmount"),Jn&64?It.type.remove(It,Rt,nn,En,un,xn):Sn&&($n!==Fragment||tr>0&&tr&64)?Zt(Sn,Rt,nn,!1,!0):($n===Fragment&&tr&384||!En&&Jn&16)&&Zt(wn,Rt,nn),xn&&Mn(It)}(Gn&&(cn=zn&&zn.onVnodeUnmounted)||Xn)&&queuePostRenderEffect(()=>{cn&&invokeVNodeHook(cn,Rt,It),Xn&&invokeDirectiveHook(It,null,Rt,"unmounted")},nn)},Mn=It=>{const{type:Rt,el:nn,anchor:xn,transition:En}=It;if(Rt===Fragment){rn(nn,xn);return}if(Rt===Static){Xe(It);return}const $n=()=>{ce(nn),En&&!En.persisted&&En.afterLeave&&En.afterLeave()};if(It.shapeFlag&1&&En&&!En.persisted){const{leave:zn,delayLeave:vn}=En,wn=()=>zn(nn,$n);vn?vn(It.el,$n,wn):wn()}else $n()},rn=(It,Rt)=>{let nn;for(;It!==Rt;)nn=we(It),ce(It),It=nn;ce(Rt)},on=(It,Rt,nn)=>{const{bum:xn,scope:En,update:$n,subTree:zn,um:vn}=It;xn&&invokeArrayFns(xn),En.stop(),$n&&($n.active=!1,sn(zn,It,Rt,nn)),vn&&queuePostRenderEffect(vn,Rt),queuePostRenderEffect(()=>{It.isUnmounted=!0},Rt),Rt&&Rt.pendingBranch&&!Rt.isUnmounted&&It.asyncDep&&!It.asyncResolved&&It.suspenseId===Rt.pendingId&&(Rt.deps--,Rt.deps===0&&Rt.resolve())},Zt=(It,Rt,nn,xn=!1,En=!1,$n=0)=>{for(let zn=$n;zn<It.length;zn++)sn(It[zn],Rt,nn,xn,En)},Ot=It=>It.shapeFlag&6?Ot(It.component.subTree):It.shapeFlag&128?It.suspense.next():we(It.anchor||It.el),Qt=(It,Rt,nn)=>{It==null?Rt._vnode&&sn(Rt._vnode,null,null,!0):Re(Rt._vnode||null,It,Rt,null,null,null,nn),flushPostFlushCbs(),Rt._vnode=It},un={p:Re,um:sn,m:zt,r:Mn,mt:ht,mc:Ct,pc:ut,pbc:xt,n:Ot,o:G};let yn,In;return q&&([yn,In]=q(un)),{render:Qt,hydrate:yn,createApp:createAppAPI(Qt,yn)}}function toggleRecurse({effect:G,update:q},V){G.allowRecurse=q.allowRecurse=V}function traverseStaticChildren(G,q,V=!1){const he=G.children,ce=q.children;if(isArray$1(he)&&isArray$1(ce))for(let te=0;te<he.length;te++){const Ee=he[te];let j=ce[te];j.shapeFlag&1&&!j.dynamicChildren&&((j.patchFlag<=0||j.patchFlag===32)&&(j=ce[te]=cloneIfMounted(ce[te]),j.el=Ee.el),V||traverseStaticChildren(Ee,j))}}function getSequence(G){const q=G.slice(),V=[0];let he,ce,te,Ee,j;const xe=G.length;for(he=0;he<xe;he++){const re=G[he];if(re!==0){if(ce=V[V.length-1],G[ce]<re){q[he]=ce,V.push(he);continue}for(te=0,Ee=V.length-1;te<Ee;)j=te+Ee>>1,G[V[j]]<re?te=j+1:Ee=j;re<G[V[te]]&&(te>0&&(q[he]=V[te-1]),V[te]=he)}}for(te=V.length,Ee=V[te-1];te-- >0;)V[te]=Ee,Ee=q[Ee];return V}const isTeleport=G=>G.__isTeleport,isTeleportDisabled=G=>G&&(G.disabled||G.disabled===""),isTargetSVG=G=>typeof SVGElement!="undefined"&&G instanceof SVGElement,resolveTarget=(G,q)=>{const V=G&&G.to;return isString$1(V)?q?q(V):null:V},TeleportImpl={__isTeleport:!0,process(G,q,V,he,ce,te,Ee,j,xe,re){const{mc:ge,pc:ye,pbc:we,o:{insert:ke,querySelector:Se,createText:Pe,createComment:Re}}=re,Ne=isTeleportDisabled(q.props);let{shapeFlag:ze,children:Be,dynamicChildren:Ze}=q;if(G==null){const Xe=q.el=Pe(""),qe=q.anchor=Pe("");ke(Xe,V,he),ke(qe,V,he);const Je=q.target=resolveTarget(q.props,Se),dt=q.targetAnchor=Pe("");Je&&(ke(dt,Je),Ee=Ee||isTargetSVG(Je));const Ct=(bt,xt)=>{ze&16&&ge(Be,bt,xt,ce,te,Ee,j,xe)};Ne?Ct(V,qe):Je&&Ct(Je,dt)}else{q.el=G.el;const Xe=q.anchor=G.anchor,qe=q.target=G.target,Je=q.targetAnchor=G.targetAnchor,dt=isTeleportDisabled(G.props),Ct=dt?V:qe,bt=dt?Xe:Je;if(Ee=Ee||isTargetSVG(qe),Ze?(we(G.dynamicChildren,Ze,Ct,ce,te,Ee,j),traverseStaticChildren(G,q,!0)):xe||ye(G,q,Ct,bt,ce,te,Ee,j,!1),Ne)dt||moveTeleport(q,V,Xe,re,1);else if((q.props&&q.props.to)!==(G.props&&G.props.to)){const xt=q.target=resolveTarget(q.props,Se);xt&&moveTeleport(q,xt,null,re,0)}else dt&&moveTeleport(q,qe,Je,re,1)}},remove(G,q,V,he,{um:ce,o:{remove:te}},Ee){const{shapeFlag:j,children:xe,anchor:re,targetAnchor:ge,target:ye,props:we}=G;if(ye&&te(ge),(Ee||!isTeleportDisabled(we))&&(te(re),j&16))for(let ke=0;ke<xe.length;ke++){const Se=xe[ke];ce(Se,q,V,!0,!!Se.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(G,q,V,{o:{insert:he},m:ce},te=2){te===0&&he(G.targetAnchor,q,V);const{el:Ee,anchor:j,shapeFlag:xe,children:re,props:ge}=G,ye=te===2;if(ye&&he(Ee,q,V),(!ye||isTeleportDisabled(ge))&&xe&16)for(let we=0;we<re.length;we++)ce(re[we],q,V,2);ye&&he(j,q,V)}function hydrateTeleport(G,q,V,he,ce,te,{o:{nextSibling:Ee,parentNode:j,querySelector:xe}},re){const ge=q.target=resolveTarget(q.props,xe);if(ge){const ye=ge._lpa||ge.firstChild;q.shapeFlag&16&&(isTeleportDisabled(q.props)?(q.anchor=re(Ee(G),q,j(G),V,he,ce,te),q.targetAnchor=ye):(q.anchor=Ee(G),q.targetAnchor=re(ye,q,ge,V,he,ce,te)),ge._lpa=q.targetAnchor&&Ee(q.targetAnchor))}return q.anchor&&Ee(q.anchor)}const Teleport=TeleportImpl,COMPONENTS="components",NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(G){return isString$1(G)?resolveAsset(COMPONENTS,G,!1)||G:G||NULL_DYNAMIC_COMPONENT}function resolveAsset(G,q,V=!0,he=!1){const ce=currentRenderingInstance||currentInstance;if(ce){const te=ce.type;if(G===COMPONENTS){const j=getComponentName(te);if(j&&(j===q||j===camelize(q)||j===capitalize(camelize(q))))return te}const Ee=resolve(ce[G]||te[G],q)||resolve(ce.appContext[G],q);return!Ee&&he?te:Ee}}function resolve(G,q){return G&&(G[q]||G[camelize(q)]||G[capitalize(camelize(q))])}const Fragment=Symbol(void 0),Text$1=Symbol(void 0),Comment$1=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(G=!1){blockStack.push(currentBlock=G?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(G){isBlockTreeEnabled+=G}function setupBlock(G){return G.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(G),G}function createElementBlock(G,q,V,he,ce,te){return setupBlock(createBaseVNode(G,q,V,he,ce,te,!0))}function createBlock(G,q,V,he,ce){return setupBlock(createVNode(G,q,V,he,ce,!0))}function isVNode(G){return G?G.__v_isVNode===!0:!1}function isSameVNodeType(G,q){return G.type===q.type&&G.key===q.key}const InternalObjectKey="__vInternal",normalizeKey=({key:G})=>G!=null?G:null,normalizeRef=({ref:G,ref_key:q,ref_for:V})=>G!=null?isString$1(G)||isRef(G)||isFunction$2(G)?{i:currentRenderingInstance,r:G,k:q,f:!!V}:G:null;function createBaseVNode(G,q=null,V=null,he=0,ce=null,te=G===Fragment?0:1,Ee=!1,j=!1){const xe={__v_isVNode:!0,__v_skip:!0,type:G,props:q,key:q&&normalizeKey(q),ref:q&&normalizeRef(q),scopeId:currentScopeId,slotScopeIds:null,children:V,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:te,patchFlag:he,dynamicProps:ce,dynamicChildren:null,appContext:null};return j?(normalizeChildren(xe,V),te&128&&G.normalize(xe)):V&&(xe.shapeFlag|=isString$1(V)?8:16),isBlockTreeEnabled>0&&!Ee&&currentBlock&&(xe.patchFlag>0||te&6)&&xe.patchFlag!==32&&currentBlock.push(xe),xe}const createVNode=_createVNode;function _createVNode(G,q=null,V=null,he=0,ce=null,te=!1){if((!G||G===NULL_DYNAMIC_COMPONENT)&&(G=Comment$1),isVNode(G)){const j=cloneVNode(G,q,!0);return V&&normalizeChildren(j,V),j}if(isClassComponent(G)&&(G=G.__vccOpts),q){q=guardReactiveProps(q);let{class:j,style:xe}=q;j&&!isString$1(j)&&(q.class=normalizeClass(j)),isObject$1(xe)&&(isProxy$1(xe)&&!isArray$1(xe)&&(xe=extend$1({},xe)),q.style=normalizeStyle(xe))}const Ee=isString$1(G)?1:isSuspense(G)?128:isTeleport(G)?64:isObject$1(G)?4:isFunction$2(G)?2:0;return createBaseVNode(G,q,V,he,ce,Ee,te,!0)}function guardReactiveProps(G){return G?isProxy$1(G)||InternalObjectKey in G?extend$1({},G):G:null}function cloneVNode(G,q,V=!1){const{props:he,ref:ce,patchFlag:te,children:Ee}=G,j=q?mergeProps(he||{},q):he;return{__v_isVNode:!0,__v_skip:!0,type:G.type,props:j,key:j&&normalizeKey(j),ref:q&&q.ref?V&&ce?isArray$1(ce)?ce.concat(normalizeRef(q)):[ce,normalizeRef(q)]:normalizeRef(q):ce,scopeId:G.scopeId,slotScopeIds:G.slotScopeIds,children:Ee,target:G.target,targetAnchor:G.targetAnchor,staticCount:G.staticCount,shapeFlag:G.shapeFlag,patchFlag:q&&G.type!==Fragment?te===-1?16:te|16:te,dynamicProps:G.dynamicProps,dynamicChildren:G.dynamicChildren,appContext:G.appContext,dirs:G.dirs,transition:G.transition,component:G.component,suspense:G.suspense,ssContent:G.ssContent&&cloneVNode(G.ssContent),ssFallback:G.ssFallback&&cloneVNode(G.ssFallback),el:G.el,anchor:G.anchor}}function createTextVNode(G=" ",q=0){return createVNode(Text$1,null,G,q)}function createStaticVNode(G,q){const V=createVNode(Static,null,G);return V.staticCount=q,V}function createCommentVNode(G="",q=!1){return q?(openBlock(),createBlock(Comment$1,null,G)):createVNode(Comment$1,null,G)}function normalizeVNode(G){return G==null||typeof G=="boolean"?createVNode(Comment$1):isArray$1(G)?createVNode(Fragment,null,G.slice()):typeof G=="object"?cloneIfMounted(G):createVNode(Text$1,null,String(G))}function cloneIfMounted(G){return G.el===null||G.memo?G:cloneVNode(G)}function normalizeChildren(G,q){let V=0;const{shapeFlag:he}=G;if(q==null)q=null;else if(isArray$1(q))V=16;else if(typeof q=="object")if(he&65){const ce=q.default;ce&&(ce._c&&(ce._d=!1),normalizeChildren(G,ce()),ce._c&&(ce._d=!0));return}else{V=32;const ce=q._;!ce&&!(InternalObjectKey in q)?q._ctx=currentRenderingInstance:ce===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?q._=1:(q._=2,G.patchFlag|=1024))}else isFunction$2(q)?(q={default:q,_ctx:currentRenderingInstance},V=32):(q=String(q),he&64?(V=16,q=[createTextVNode(q)]):V=8);G.children=q,G.shapeFlag|=V}function mergeProps(...G){const q={};for(let V=0;V<G.length;V++){const he=G[V];for(const ce in he)if(ce==="class")q.class!==he.class&&(q.class=normalizeClass([q.class,he.class]));else if(ce==="style")q.style=normalizeStyle([q.style,he.style]);else if(isOn(ce)){const te=q[ce],Ee=he[ce];Ee&&te!==Ee&&!(isArray$1(te)&&te.includes(Ee))&&(q[ce]=te?[].concat(te,Ee):Ee)}else ce!==""&&(q[ce]=he[ce])}return q}function invokeVNodeHook(G,q,V,he=null){callWithAsyncErrorHandling(G,q,7,[V,he])}function renderList(G,q,V,he){let ce;const te=V&&V[he];if(isArray$1(G)||isString$1(G)){ce=new Array(G.length);for(let Ee=0,j=G.length;Ee<j;Ee++)ce[Ee]=q(G[Ee],Ee,void 0,te&&te[Ee])}else if(typeof G=="number"){ce=new Array(G);for(let Ee=0;Ee<G;Ee++)ce[Ee]=q(Ee+1,Ee,void 0,te&&te[Ee])}else if(isObject$1(G))if(G[Symbol.iterator])ce=Array.from(G,(Ee,j)=>q(Ee,j,void 0,te&&te[j]));else{const Ee=Object.keys(G);ce=new Array(Ee.length);for(let j=0,xe=Ee.length;j<xe;j++){const re=Ee[j];ce[j]=q(G[re],re,j,te&&te[j])}}else ce=[];return V&&(V[he]=ce),ce}const getPublicInstance=G=>G?isStatefulComponent(G)?getExposeProxy(G)||G.proxy:getPublicInstance(G.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:G=>G,$el:G=>G.vnode.el,$data:G=>G.data,$props:G=>G.props,$attrs:G=>G.attrs,$slots:G=>G.slots,$refs:G=>G.refs,$parent:G=>getPublicInstance(G.parent),$root:G=>getPublicInstance(G.root),$emit:G=>G.emit,$options:G=>resolveMergedOptions(G),$forceUpdate:G=>()=>queueJob(G.update),$nextTick:G=>nextTick.bind(G.proxy),$watch:G=>instanceWatch.bind(G)}),PublicInstanceProxyHandlers={get({_:G},q){const{ctx:V,setupState:he,data:ce,props:te,accessCache:Ee,type:j,appContext:xe}=G;let re;if(q[0]!=="$"){const ke=Ee[q];if(ke!==void 0)switch(ke){case 1:return he[q];case 2:return ce[q];case 4:return V[q];case 3:return te[q]}else{if(he!==EMPTY_OBJ&&hasOwn(he,q))return Ee[q]=1,he[q];if(ce!==EMPTY_OBJ&&hasOwn(ce,q))return Ee[q]=2,ce[q];if((re=G.propsOptions[0])&&hasOwn(re,q))return Ee[q]=3,te[q];if(V!==EMPTY_OBJ&&hasOwn(V,q))return Ee[q]=4,V[q];shouldCacheAccess&&(Ee[q]=0)}}const ge=publicPropertiesMap[q];let ye,we;if(ge)return q==="$attrs"&&track(G,"get",q),ge(G);if((ye=j.__cssModules)&&(ye=ye[q]))return ye;if(V!==EMPTY_OBJ&&hasOwn(V,q))return Ee[q]=4,V[q];if(we=xe.config.globalProperties,hasOwn(we,q))return we[q]},set({_:G},q,V){const{data:he,setupState:ce,ctx:te}=G;return ce!==EMPTY_OBJ&&hasOwn(ce,q)?(ce[q]=V,!0):he!==EMPTY_OBJ&&hasOwn(he,q)?(he[q]=V,!0):hasOwn(G.props,q)||q[0]==="$"&&q.slice(1)in G?!1:(te[q]=V,!0)},has({_:{data:G,setupState:q,accessCache:V,ctx:he,appContext:ce,propsOptions:te}},Ee){let j;return!!V[Ee]||G!==EMPTY_OBJ&&hasOwn(G,Ee)||q!==EMPTY_OBJ&&hasOwn(q,Ee)||(j=te[0])&&hasOwn(j,Ee)||hasOwn(he,Ee)||hasOwn(publicPropertiesMap,Ee)||hasOwn(ce.config.globalProperties,Ee)},defineProperty(G,q,V){return V.get!=null?this.set(G,q,V.get(),null):V.value!=null&&this.set(G,q,V.value,null),Reflect.defineProperty(G,q,V)}},emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(G,q,V){const he=G.type,ce=(q?q.appContext:G.appContext)||emptyAppContext,te={uid:uid$1++,vnode:G,type:he,parent:q,appContext:ce,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:q?q.provides:Object.create(ce.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(he,ce),emitsOptions:normalizeEmitsOptions(he,ce),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:he.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:V,suspenseId:V?V.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return te.ctx={_:te},te.root=q?q.root:te,te.emit=emit$1.bind(null,te),G.ce&&G.ce(te),te}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=G=>{currentInstance=G,G.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(G){return G.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(G,q=!1){isInSSRComponentSetup=q;const{props:V,children:he}=G.vnode,ce=isStatefulComponent(G);initProps(G,V,ce,q),initSlots(G,he);const te=ce?setupStatefulComponent(G,q):void 0;return isInSSRComponentSetup=!1,te}function setupStatefulComponent(G,q){const V=G.type;G.accessCache=Object.create(null),G.proxy=markRaw(new Proxy(G.ctx,PublicInstanceProxyHandlers));const{setup:he}=V;if(he){const ce=G.setupContext=he.length>1?createSetupContext(G):null;setCurrentInstance(G),pauseTracking();const te=callWithErrorHandling(he,G,0,[G.props,ce]);if(resetTracking(),unsetCurrentInstance(),isPromise(te)){if(te.then(unsetCurrentInstance,unsetCurrentInstance),q)return te.then(Ee=>{handleSetupResult(G,Ee,q)}).catch(Ee=>{handleError(Ee,G,0)});G.asyncDep=te}else handleSetupResult(G,te,q)}else finishComponentSetup(G,q)}function handleSetupResult(G,q,V){isFunction$2(q)?G.type.__ssrInlineRender?G.ssrRender=q:G.render=q:isObject$1(q)&&(G.setupState=proxyRefs(q)),finishComponentSetup(G,V)}let compile;function finishComponentSetup(G,q,V){const he=G.type;if(!G.render){if(!q&&compile&&!he.render){const ce=he.template;if(ce){const{isCustomElement:te,compilerOptions:Ee}=G.appContext.config,{delimiters:j,compilerOptions:xe}=he,re=extend$1(extend$1({isCustomElement:te,delimiters:j},Ee),xe);he.render=compile(ce,re)}}G.render=he.render||NOOP}setCurrentInstance(G),pauseTracking(),applyOptions(G),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(G){return new Proxy(G.attrs,{get(q,V){return track(G,"get","$attrs"),q[V]}})}function createSetupContext(G){const q=he=>{G.exposed=he||{}};let V;return{get attrs(){return V||(V=createAttrsProxy(G))},slots:G.slots,emit:G.emit,expose:q}}function getExposeProxy(G){if(G.exposed)return G.exposeProxy||(G.exposeProxy=new Proxy(proxyRefs(markRaw(G.exposed)),{get(q,V){if(V in q)return q[V];if(V in publicPropertiesMap)return publicPropertiesMap[V](G)}}))}function getComponentName(G){return isFunction$2(G)&&G.displayName||G.name}function isClassComponent(G){return isFunction$2(G)&&"__vccOpts"in G}const computed=(G,q)=>computed$1(G,q,isInSSRComponentSetup);function withAsyncContext(G){const q=getCurrentInstance();let V=G();return unsetCurrentInstance(),isPromise(V)&&(V=V.catch(he=>{throw setCurrentInstance(q),he})),[V,()=>setCurrentInstance(q)]}function h$3(G,q,V){const he=arguments.length;return he===2?isObject$1(q)&&!isArray$1(q)?isVNode(q)?createVNode(G,null,[q]):createVNode(G,q):createVNode(G,null,q):(he>3?V=Array.prototype.slice.call(arguments,2):he===3&&isVNode(V)&&(V=[V]),createVNode(G,q,V))}const version="3.2.31",svgNS="http://www.w3.org/2000/svg",doc=typeof document!="undefined"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(G,q,V)=>{q.insertBefore(G,V||null)},remove:G=>{const q=G.parentNode;q&&q.removeChild(G)},createElement:(G,q,V,he)=>{const ce=q?doc.createElementNS(svgNS,G):doc.createElement(G,V?{is:V}:void 0);return G==="select"&&he&&he.multiple!=null&&ce.setAttribute("multiple",he.multiple),ce},createText:G=>doc.createTextNode(G),createComment:G=>doc.createComment(G),setText:(G,q)=>{G.nodeValue=q},setElementText:(G,q)=>{G.textContent=q},parentNode:G=>G.parentNode,nextSibling:G=>G.nextSibling,querySelector:G=>doc.querySelector(G),setScopeId(G,q){G.setAttribute(q,"")},cloneNode(G){const q=G.cloneNode(!0);return"_value"in G&&(q._value=G._value),q},insertStaticContent(G,q,V,he,ce,te){const Ee=V?V.previousSibling:q.lastChild;if(ce&&(ce===te||ce.nextSibling))for(;q.insertBefore(ce.cloneNode(!0),V),!(ce===te||!(ce=ce.nextSibling)););else{templateContainer.innerHTML=he?`<svg>${G}</svg>`:G;const j=templateContainer.content;if(he){const xe=j.firstChild;for(;xe.firstChild;)j.appendChild(xe.firstChild);j.removeChild(xe)}q.insertBefore(j,V)}return[Ee?Ee.nextSibling:q.firstChild,V?V.previousSibling:q.lastChild]}};function patchClass(G,q,V){const he=G._vtc;he&&(q=(q?[q,...he]:[...he]).join(" ")),q==null?G.removeAttribute("class"):V?G.setAttribute("class",q):G.className=q}function patchStyle(G,q,V){const he=G.style,ce=isString$1(V);if(V&&!ce){for(const te in V)setStyle(he,te,V[te]);if(q&&!isString$1(q))for(const te in q)V[te]==null&&setStyle(he,te,"")}else{const te=he.display;ce?q!==V&&(he.cssText=V):q&&G.removeAttribute("style"),"_vod"in G&&(he.display=te)}}const importantRE=/\s*!important$/;function setStyle(G,q,V){if(isArray$1(V))V.forEach(he=>setStyle(G,q,he));else if(q.startsWith("--"))G.setProperty(q,V);else{const he=autoPrefix(G,q);importantRE.test(V)?G.setProperty(hyphenate(he),V.replace(importantRE,""),"important"):G[he]=V}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(G,q){const V=prefixCache[q];if(V)return V;let he=camelize(q);if(he!=="filter"&&he in G)return prefixCache[q]=he;he=capitalize(he);for(let ce=0;ce<prefixes.length;ce++){const te=prefixes[ce]+he;if(te in G)return prefixCache[q]=te}return q}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(G,q,V,he,ce){if(he&&q.startsWith("xlink:"))V==null?G.removeAttributeNS(xlinkNS,q.slice(6,q.length)):G.setAttributeNS(xlinkNS,q,V);else{const te=isSpecialBooleanAttr(q);V==null||te&&!includeBooleanAttr(V)?G.removeAttribute(q):G.setAttribute(q,te?"":V)}}function patchDOMProp(G,q,V,he,ce,te,Ee){if(q==="innerHTML"||q==="textContent"){he&&Ee(he,ce,te),G[q]=V==null?"":V;return}if(q==="value"&&G.tagName!=="PROGRESS"&&!G.tagName.includes("-")){G._value=V;const j=V==null?"":V;(G.value!==j||G.tagName==="OPTION")&&(G.value=j),V==null&&G.removeAttribute(q);return}if(V===""||V==null){const j=typeof G[q];if(j==="boolean"){G[q]=includeBooleanAttr(V);return}else if(V==null&&j==="string"){G[q]="",G.removeAttribute(q);return}else if(j==="number"){try{G[q]=0}catch{}G.removeAttribute(q);return}}try{G[q]=V}catch{}}let _getNow=Date.now,skipTimestampCheck=!1;if(typeof window!="undefined"){_getNow()>document.createEvent("Event").timeStamp&&(_getNow=()=>performance.now());const G=navigator.userAgent.match(/firefox\/(\d+)/i);skipTimestampCheck=!!(G&&Number(G[1])<=53)}let cachedNow=0;const p$5=Promise.resolve(),reset=()=>{cachedNow=0},getNow=()=>cachedNow||(p$5.then(reset),cachedNow=_getNow());function addEventListener(G,q,V,he){G.addEventListener(q,V,he)}function removeEventListener(G,q,V,he){G.removeEventListener(q,V,he)}function patchEvent(G,q,V,he,ce=null){const te=G._vei||(G._vei={}),Ee=te[q];if(he&&Ee)Ee.value=he;else{const[j,xe]=parseName(q);if(he){const re=te[q]=createInvoker(he,ce);addEventListener(G,j,re,xe)}else Ee&&(removeEventListener(G,j,Ee,xe),te[q]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(G){let q;if(optionsModifierRE.test(G)){q={};let V;for(;V=G.match(optionsModifierRE);)G=G.slice(0,G.length-V[0].length),q[V[0].toLowerCase()]=!0}return[hyphenate(G.slice(2)),q]}function createInvoker(G,q){const V=he=>{const ce=he.timeStamp||_getNow();(skipTimestampCheck||ce>=V.attached-1)&&callWithAsyncErrorHandling(patchStopImmediatePropagation(he,V.value),q,5,[he])};return V.value=G,V.attached=getNow(),V}function patchStopImmediatePropagation(G,q){if(isArray$1(q)){const V=G.stopImmediatePropagation;return G.stopImmediatePropagation=()=>{V.call(G),G._stopped=!0},q.map(he=>ce=>!ce._stopped&&he&&he(ce))}else return q}const nativeOnRE=/^on[a-z]/,patchProp=(G,q,V,he,ce=!1,te,Ee,j,xe)=>{q==="class"?patchClass(G,he,ce):q==="style"?patchStyle(G,V,he):isOn(q)?isModelListener(q)||patchEvent(G,q,V,he,Ee):(q[0]==="."?(q=q.slice(1),!0):q[0]==="^"?(q=q.slice(1),!1):shouldSetAsProp(G,q,he,ce))?patchDOMProp(G,q,he,te,Ee,j,xe):(q==="true-value"?G._trueValue=he:q==="false-value"&&(G._falseValue=he),patchAttr(G,q,he,ce))};function shouldSetAsProp(G,q,V,he){return he?!!(q==="innerHTML"||q==="textContent"||q in G&&nativeOnRE.test(q)&&isFunction$2(V)):q==="spellcheck"||q==="draggable"||q==="form"||q==="list"&&G.tagName==="INPUT"||q==="type"&&G.tagName==="TEXTAREA"||nativeOnRE.test(q)&&isString$1(V)?!1:q in G}const TRANSITION="transition",ANIMATION="animation",Transition=(G,{slots:q})=>h$3(BaseTransition,resolveTransitionProps(G),q);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$1({},BaseTransition.props,DOMTransitionPropsValidators);const callHook=(G,q=[])=>{isArray$1(G)?G.forEach(V=>V(...q)):G&&G(...q)},hasExplicitCallback=G=>G?isArray$1(G)?G.some(q=>q.length>1):G.length>1:!1;function resolveTransitionProps(G){const q={};for(const nt in G)nt in DOMTransitionPropsValidators||(q[nt]=G[nt]);if(G.css===!1)return q;const{name:V="v",type:he,duration:ce,enterFromClass:te=`${V}-enter-from`,enterActiveClass:Ee=`${V}-enter-active`,enterToClass:j=`${V}-enter-to`,appearFromClass:xe=te,appearActiveClass:re=Ee,appearToClass:ge=j,leaveFromClass:ye=`${V}-leave-from`,leaveActiveClass:we=`${V}-leave-active`,leaveToClass:ke=`${V}-leave-to`}=G,Se=normalizeDuration(ce),Pe=Se&&Se[0],Re=Se&&Se[1],{onBeforeEnter:Ne,onEnter:ze,onEnterCancelled:Be,onLeave:Ze,onLeaveCancelled:Xe,onBeforeAppear:qe=Ne,onAppear:Je=ze,onAppearCancelled:dt=Be}=q,Ct=(nt,tt,rt)=>{removeTransitionClass(nt,tt?ge:j),removeTransitionClass(nt,tt?re:Ee),rt&&rt()},bt=(nt,tt)=>{removeTransitionClass(nt,ke),removeTransitionClass(nt,we),tt&&tt()},xt=nt=>(tt,rt)=>{const ht=nt?Je:ze,st=()=>Ct(tt,nt,rt);callHook(ht,[tt,st]),nextFrame(()=>{removeTransitionClass(tt,nt?xe:te),addTransitionClass(tt,nt?ge:j),hasExplicitCallback(ht)||whenTransitionEnds(tt,he,Pe,st)})};return extend$1(q,{onBeforeEnter(nt){callHook(Ne,[nt]),addTransitionClass(nt,te),addTransitionClass(nt,Ee)},onBeforeAppear(nt){callHook(qe,[nt]),addTransitionClass(nt,xe),addTransitionClass(nt,re)},onEnter:xt(!1),onAppear:xt(!0),onLeave(nt,tt){const rt=()=>bt(nt,tt);addTransitionClass(nt,ye),forceReflow(),addTransitionClass(nt,we),nextFrame(()=>{removeTransitionClass(nt,ye),addTransitionClass(nt,ke),hasExplicitCallback(Ze)||whenTransitionEnds(nt,he,Re,rt)}),callHook(Ze,[nt,rt])},onEnterCancelled(nt){Ct(nt,!1),callHook(Be,[nt])},onAppearCancelled(nt){Ct(nt,!0),callHook(dt,[nt])},onLeaveCancelled(nt){bt(nt),callHook(Xe,[nt])}})}function normalizeDuration(G){if(G==null)return null;if(isObject$1(G))return[NumberOf(G.enter),NumberOf(G.leave)];{const q=NumberOf(G);return[q,q]}}function NumberOf(G){return toNumber(G)}function addTransitionClass(G,q){q.split(/\s+/).forEach(V=>V&&G.classList.add(V)),(G._vtc||(G._vtc=new Set)).add(q)}function removeTransitionClass(G,q){q.split(/\s+/).forEach(he=>he&&G.classList.remove(he));const{_vtc:V}=G;V&&(V.delete(q),V.size||(G._vtc=void 0))}function nextFrame(G){requestAnimationFrame(()=>{requestAnimationFrame(G)})}let endId=0;function whenTransitionEnds(G,q,V,he){const ce=G._endId=++endId,te=()=>{ce===G._endId&&he()};if(V)return setTimeout(te,V);const{type:Ee,timeout:j,propCount:xe}=getTransitionInfo(G,q);if(!Ee)return he();const re=Ee+"end";let ge=0;const ye=()=>{G.removeEventListener(re,we),te()},we=ke=>{ke.target===G&&++ge>=xe&&ye()};setTimeout(()=>{ge<xe&&ye()},j+1),G.addEventListener(re,we)}function getTransitionInfo(G,q){const V=window.getComputedStyle(G),he=Se=>(V[Se]||"").split(", "),ce=he(TRANSITION+"Delay"),te=he(TRANSITION+"Duration"),Ee=getTimeout(ce,te),j=he(ANIMATION+"Delay"),xe=he(ANIMATION+"Duration"),re=getTimeout(j,xe);let ge=null,ye=0,we=0;q===TRANSITION?Ee>0&&(ge=TRANSITION,ye=Ee,we=te.length):q===ANIMATION?re>0&&(ge=ANIMATION,ye=re,we=xe.length):(ye=Math.max(Ee,re),ge=ye>0?Ee>re?TRANSITION:ANIMATION:null,we=ge?ge===TRANSITION?te.length:xe.length:0);const ke=ge===TRANSITION&&/\b(transform|all)(,|$)/.test(V[TRANSITION+"Property"]);return{type:ge,timeout:ye,propCount:we,hasTransform:ke}}function getTimeout(G,q){for(;G.length<q.length;)G=G.concat(G);return Math.max(...q.map((V,he)=>toMs(V)+toMs(G[he])))}function toMs(G){return Number(G.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const getModelAssigner=G=>{const q=G.props["onUpdate:modelValue"];return isArray$1(q)?V=>invokeArrayFns(q,V):q};function onCompositionStart(G){G.target.composing=!0}function onCompositionEnd(G){const q=G.target;q.composing&&(q.composing=!1,trigger(q,"input"))}function trigger(G,q){const V=document.createEvent("HTMLEvents");V.initEvent(q,!0,!0),G.dispatchEvent(V)}const vModelText={created(G,{modifiers:{lazy:q,trim:V,number:he}},ce){G._assign=getModelAssigner(ce);const te=he||ce.props&&ce.props.type==="number";addEventListener(G,q?"change":"input",Ee=>{if(Ee.target.composing)return;let j=G.value;V?j=j.trim():te&&(j=toNumber(j)),G._assign(j)}),V&&addEventListener(G,"change",()=>{G.value=G.value.trim()}),q||(addEventListener(G,"compositionstart",onCompositionStart),addEventListener(G,"compositionend",onCompositionEnd),addEventListener(G,"change",onCompositionEnd))},mounted(G,{value:q}){G.value=q==null?"":q},beforeUpdate(G,{value:q,modifiers:{lazy:V,trim:he,number:ce}},te){if(G._assign=getModelAssigner(te),G.composing||document.activeElement===G&&(V||he&&G.value.trim()===q||(ce||G.type==="number")&&toNumber(G.value)===q))return;const Ee=q==null?"":q;G.value!==Ee&&(G.value=Ee)}},rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...G)=>{const q=ensureRenderer().createApp(...G),{mount:V}=q;return q.mount=he=>{const ce=normalizeContainer(he);if(!ce)return;const te=q._component;!isFunction$2(te)&&!te.render&&!te.template&&(te.template=ce.innerHTML),ce.innerHTML="";const Ee=V(ce,!1,ce instanceof SVGElement);return ce instanceof Element&&(ce.removeAttribute("v-cloak"),ce.setAttribute("data-v-app","")),Ee},q};function normalizeContainer(G){return isString$1(G)?document.querySelector(G):G}/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",PolySymbol=G=>hasSymbol?Symbol(G):"_vr_"+G,matchedRouteKey=PolySymbol("rvlm"),viewDepthKey=PolySymbol("rvd"),routerKey=PolySymbol("r"),routeLocationKey=PolySymbol("rl"),routerViewLocationKey=PolySymbol("rvl"),isBrowser=typeof window!="undefined";function isESModule(G){return G.__esModule||hasSymbol&&G[Symbol.toStringTag]==="Module"}const assign$1=Object.assign;function applyToParams(G,q){const V={};for(const he in q){const ce=q[he];V[he]=Array.isArray(ce)?ce.map(G):G(ce)}return V}const noop$1=()=>{},TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=G=>G.replace(TRAILING_SLASH_RE,"");function parseURL(G,q,V="/"){let he,ce={},te="",Ee="";const j=q.indexOf("?"),xe=q.indexOf("#",j>-1?j:0);return j>-1&&(he=q.slice(0,j),te=q.slice(j+1,xe>-1?xe:q.length),ce=G(te)),xe>-1&&(he=he||q.slice(0,xe),Ee=q.slice(xe,q.length)),he=resolveRelativePath(he!=null?he:q,V),{fullPath:he+(te&&"?")+te+Ee,path:he,query:ce,hash:Ee}}function stringifyURL(G,q){const V=q.query?G(q.query):"";return q.path+(V&&"?")+V+(q.hash||"")}function stripBase(G,q){return!q||!G.toLowerCase().startsWith(q.toLowerCase())?G:G.slice(q.length)||"/"}function isSameRouteLocation(G,q,V){const he=q.matched.length-1,ce=V.matched.length-1;return he>-1&&he===ce&&isSameRouteRecord(q.matched[he],V.matched[ce])&&isSameRouteLocationParams(q.params,V.params)&&G(q.query)===G(V.query)&&q.hash===V.hash}function isSameRouteRecord(G,q){return(G.aliasOf||G)===(q.aliasOf||q)}function isSameRouteLocationParams(G,q){if(Object.keys(G).length!==Object.keys(q).length)return!1;for(const V in G)if(!isSameRouteLocationParamsValue(G[V],q[V]))return!1;return!0}function isSameRouteLocationParamsValue(G,q){return Array.isArray(G)?isEquivalentArray(G,q):Array.isArray(q)?isEquivalentArray(q,G):G===q}function isEquivalentArray(G,q){return Array.isArray(q)?G.length===q.length&&G.every((V,he)=>V===q[he]):G.length===1&&G[0]===q}function resolveRelativePath(G,q){if(G.startsWith("/"))return G;if(!G)return q;const V=q.split("/"),he=G.split("/");let ce=V.length-1,te,Ee;for(te=0;te<he.length;te++)if(Ee=he[te],!(ce===1||Ee==="."))if(Ee==="..")ce--;else break;return V.slice(0,ce).join("/")+"/"+he.slice(te-(te===he.length?1:0)).join("/")}var NavigationType;(function(G){G.pop="pop",G.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(G){G.back="back",G.forward="forward",G.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(G){if(!G)if(isBrowser){const q=document.querySelector("base");G=q&&q.getAttribute("href")||"/",G=G.replace(/^\w+:\/\/[^\/]+/,"")}else G="/";return G[0]!=="/"&&G[0]!=="#"&&(G="/"+G),removeTrailingSlash(G)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(G,q){return G.replace(BEFORE_HASH_RE,"#")+q}function getElementPosition(G,q){const V=document.documentElement.getBoundingClientRect(),he=G.getBoundingClientRect();return{behavior:q.behavior,left:he.left-V.left-(q.left||0),top:he.top-V.top-(q.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(G){let q;if("el"in G){const V=G.el,he=typeof V=="string"&&V.startsWith("#"),ce=typeof V=="string"?he?document.getElementById(V.slice(1)):document.querySelector(V):V;if(!ce)return;q=getElementPosition(ce,G)}else q=G;"scrollBehavior"in document.documentElement.style?window.scrollTo(q):window.scrollTo(q.left!=null?q.left:window.pageXOffset,q.top!=null?q.top:window.pageYOffset)}function getScrollKey(G,q){return(history.state?history.state.position-q:-1)+G}const scrollPositions=new Map;function saveScrollPosition(G,q){scrollPositions.set(G,q)}function getSavedScrollPosition(G){const q=scrollPositions.get(G);return scrollPositions.delete(G),q}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(G,q){const{pathname:V,search:he,hash:ce}=q,te=G.indexOf("#");if(te>-1){let j=ce.includes(G.slice(te))?G.slice(te).length:1,xe=ce.slice(j);return xe[0]!=="/"&&(xe="/"+xe),stripBase(xe,"")}return stripBase(V,G)+he+ce}function useHistoryListeners(G,q,V,he){let ce=[],te=[],Ee=null;const j=({state:we})=>{const ke=createCurrentLocation(G,location),Se=V.value,Pe=q.value;let Re=0;if(we){if(V.value=ke,q.value=we,Ee&&Ee===Se){Ee=null;return}Re=Pe?we.position-Pe.position:0}else he(ke);ce.forEach(Ne=>{Ne(V.value,Se,{delta:Re,type:NavigationType.pop,direction:Re?Re>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function xe(){Ee=V.value}function re(we){ce.push(we);const ke=()=>{const Se=ce.indexOf(we);Se>-1&&ce.splice(Se,1)};return te.push(ke),ke}function ge(){const{history:we}=window;!we.state||we.replaceState(assign$1({},we.state,{scroll:computeScrollPosition()}),"")}function ye(){for(const we of te)we();te=[],window.removeEventListener("popstate",j),window.removeEventListener("beforeunload",ge)}return window.addEventListener("popstate",j),window.addEventListener("beforeunload",ge),{pauseListeners:xe,listen:re,destroy:ye}}function buildState(G,q,V,he=!1,ce=!1){return{back:G,current:q,forward:V,replaced:he,position:window.history.length,scroll:ce?computeScrollPosition():null}}function useHistoryStateNavigation(G){const{history:q,location:V}=window,he={value:createCurrentLocation(G,V)},ce={value:q.state};ce.value||te(he.value,{back:null,current:he.value,forward:null,position:q.length-1,replaced:!0,scroll:null},!0);function te(xe,re,ge){const ye=G.indexOf("#"),we=ye>-1?(V.host&&document.querySelector("base")?G:G.slice(ye))+xe:createBaseLocation()+G+xe;try{q[ge?"replaceState":"pushState"](re,"",we),ce.value=re}catch(ke){console.error(ke),V[ge?"replace":"assign"](we)}}function Ee(xe,re){const ge=assign$1({},q.state,buildState(ce.value.back,xe,ce.value.forward,!0),re,{position:ce.value.position});te(xe,ge,!0),he.value=xe}function j(xe,re){const ge=assign$1({},ce.value,q.state,{forward:xe,scroll:computeScrollPosition()});te(ge.current,ge,!0);const ye=assign$1({},buildState(he.value,xe,null),{position:ge.position+1},re);te(xe,ye,!1),he.value=xe}return{location:he,state:ce,push:j,replace:Ee}}function createWebHistory(G){G=normalizeBase(G);const q=useHistoryStateNavigation(G),V=useHistoryListeners(G,q.state,q.location,q.replace);function he(te,Ee=!0){Ee||V.pauseListeners(),history.go(te)}const ce=assign$1({location:"",base:G,go:he,createHref:createHref.bind(null,G)},q,V);return Object.defineProperty(ce,"location",{enumerable:!0,get:()=>q.location.value}),Object.defineProperty(ce,"state",{enumerable:!0,get:()=>q.state.value}),ce}function isRouteLocation(G){return typeof G=="string"||G&&typeof G=="object"}function isRouteName(G){return typeof G=="string"||typeof G=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=PolySymbol("nf");var NavigationFailureType;(function(G){G[G.aborted=4]="aborted",G[G.cancelled=8]="cancelled",G[G.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(G,q){return assign$1(new Error,{type:G,[NavigationFailureSymbol]:!0},q)}function isNavigationFailure(G,q){return G instanceof Error&&NavigationFailureSymbol in G&&(q==null||!!(G.type&q))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(G,q){const V=assign$1({},BASE_PATH_PARSER_OPTIONS,q),he=[];let ce=V.start?"^":"";const te=[];for(const re of G){const ge=re.length?[]:[90];V.strict&&!re.length&&(ce+="/");for(let ye=0;ye<re.length;ye++){const we=re[ye];let ke=40+(V.sensitive?.25:0);if(we.type===0)ye||(ce+="/"),ce+=we.value.replace(REGEX_CHARS_RE,"\\$&"),ke+=40;else if(we.type===1){const{value:Se,repeatable:Pe,optional:Re,regexp:Ne}=we;te.push({name:Se,repeatable:Pe,optional:Re});const ze=Ne||BASE_PARAM_PATTERN;if(ze!==BASE_PARAM_PATTERN){ke+=10;try{new RegExp(`(${ze})`)}catch(Ze){throw new Error(`Invalid custom RegExp for param "${Se}" (${ze}): `+Ze.message)}}let Be=Pe?`((?:${ze})(?:/(?:${ze}))*)`:`(${ze})`;ye||(Be=Re&&re.length<2?`(?:/${Be})`:"/"+Be),Re&&(Be+="?"),ce+=Be,ke+=20,Re&&(ke+=-8),Pe&&(ke+=-20),ze===".*"&&(ke+=-50)}ge.push(ke)}he.push(ge)}if(V.strict&&V.end){const re=he.length-1;he[re][he[re].length-1]+=.7000000000000001}V.strict||(ce+="/?"),V.end?ce+="$":V.strict&&(ce+="(?:/|$)");const Ee=new RegExp(ce,V.sensitive?"":"i");function j(re){const ge=re.match(Ee),ye={};if(!ge)return null;for(let we=1;we<ge.length;we++){const ke=ge[we]||"",Se=te[we-1];ye[Se.name]=ke&&Se.repeatable?ke.split("/"):ke}return ye}function xe(re){let ge="",ye=!1;for(const we of G){(!ye||!ge.endsWith("/"))&&(ge+="/"),ye=!1;for(const ke of we)if(ke.type===0)ge+=ke.value;else if(ke.type===1){const{value:Se,repeatable:Pe,optional:Re}=ke,Ne=Se in re?re[Se]:"";if(Array.isArray(Ne)&&!Pe)throw new Error(`Provided param "${Se}" is an array but it is not repeatable (* or + modifiers)`);const ze=Array.isArray(Ne)?Ne.join("/"):Ne;if(!ze)if(Re)we.length<2&&(ge.endsWith("/")?ge=ge.slice(0,-1):ye=!0);else throw new Error(`Missing required param "${Se}"`);ge+=ze}}return ge}return{re:Ee,score:he,keys:te,parse:j,stringify:xe}}function compareScoreArray(G,q){let V=0;for(;V<G.length&&V<q.length;){const he=q[V]-G[V];if(he)return he;V++}return G.length<q.length?G.length===1&&G[0]===40+40?-1:1:G.length>q.length?q.length===1&&q[0]===40+40?1:-1:0}function comparePathParserScore(G,q){let V=0;const he=G.score,ce=q.score;for(;V<he.length&&V<ce.length;){const te=compareScoreArray(he[V],ce[V]);if(te)return te;V++}return ce.length-he.length}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(G){if(!G)return[[]];if(G==="/")return[[ROOT_TOKEN]];if(!G.startsWith("/"))throw new Error(`Invalid path "${G}"`);function q(ke){throw new Error(`ERR (${V})/"${re}": ${ke}`)}let V=0,he=V;const ce=[];let te;function Ee(){te&&ce.push(te),te=[]}let j=0,xe,re="",ge="";function ye(){!re||(V===0?te.push({type:0,value:re}):V===1||V===2||V===3?(te.length>1&&(xe==="*"||xe==="+")&&q(`A repeatable param (${re}) must be alone in its segment. eg: '/:ids+.`),te.push({type:1,value:re,regexp:ge,repeatable:xe==="*"||xe==="+",optional:xe==="*"||xe==="?"})):q("Invalid state to consume buffer"),re="")}function we(){re+=xe}for(;j<G.length;){if(xe=G[j++],xe==="\\"&&V!==2){he=V,V=4;continue}switch(V){case 0:xe==="/"?(re&&ye(),Ee()):xe===":"?(ye(),V=1):we();break;case 4:we(),V=he;break;case 1:xe==="("?V=2:VALID_PARAM_RE.test(xe)?we():(ye(),V=0,xe!=="*"&&xe!=="?"&&xe!=="+"&&j--);break;case 2:xe===")"?ge[ge.length-1]=="\\"?ge=ge.slice(0,-1)+xe:V=3:ge+=xe;break;case 3:ye(),V=0,xe!=="*"&&xe!=="?"&&xe!=="+"&&j--,ge="";break;default:q("Unknown state");break}}return V===2&&q(`Unfinished custom RegExp for param "${re}"`),ye(),Ee(),ce}function createRouteRecordMatcher(G,q,V){const he=tokensToParser(tokenizePath(G.path),V),ce=assign$1(he,{record:G,parent:q,children:[],alias:[]});return q&&!ce.record.aliasOf==!q.record.aliasOf&&q.children.push(ce),ce}function createRouterMatcher(G,q){const V=[],he=new Map;q=mergeOptions({strict:!1,end:!0,sensitive:!1},q);function ce(ge){return he.get(ge)}function te(ge,ye,we){const ke=!we,Se=normalizeRouteRecord(ge);Se.aliasOf=we&&we.record;const Pe=mergeOptions(q,ge),Re=[Se];if("alias"in ge){const Be=typeof ge.alias=="string"?[ge.alias]:ge.alias;for(const Ze of Be)Re.push(assign$1({},Se,{components:we?we.record.components:Se.components,path:Ze,aliasOf:we?we.record:Se}))}let Ne,ze;for(const Be of Re){const{path:Ze}=Be;if(ye&&Ze[0]!=="/"){const Xe=ye.record.path,qe=Xe[Xe.length-1]==="/"?"":"/";Be.path=ye.record.path+(Ze&&qe+Ze)}if(Ne=createRouteRecordMatcher(Be,ye,Pe),we?we.alias.push(Ne):(ze=ze||Ne,ze!==Ne&&ze.alias.push(Ne),ke&&ge.name&&!isAliasRecord(Ne)&&Ee(ge.name)),"children"in Se){const Xe=Se.children;for(let qe=0;qe<Xe.length;qe++)te(Xe[qe],Ne,we&&we.children[qe])}we=we||Ne,xe(Ne)}return ze?()=>{Ee(ze)}:noop$1}function Ee(ge){if(isRouteName(ge)){const ye=he.get(ge);ye&&(he.delete(ge),V.splice(V.indexOf(ye),1),ye.children.forEach(Ee),ye.alias.forEach(Ee))}else{const ye=V.indexOf(ge);ye>-1&&(V.splice(ye,1),ge.record.name&&he.delete(ge.record.name),ge.children.forEach(Ee),ge.alias.forEach(Ee))}}function j(){return V}function xe(ge){let ye=0;for(;ye<V.length&&comparePathParserScore(ge,V[ye])>=0&&(ge.record.path!==V[ye].record.path||!isRecordChildOf(ge,V[ye]));)ye++;V.splice(ye,0,ge),ge.record.name&&!isAliasRecord(ge)&&he.set(ge.record.name,ge)}function re(ge,ye){let we,ke={},Se,Pe;if("name"in ge&&ge.name){if(we=he.get(ge.name),!we)throw createRouterError(1,{location:ge});Pe=we.record.name,ke=assign$1(paramsFromLocation(ye.params,we.keys.filter(ze=>!ze.optional).map(ze=>ze.name)),ge.params),Se=we.stringify(ke)}else if("path"in ge)Se=ge.path,we=V.find(ze=>ze.re.test(Se)),we&&(ke=we.parse(Se),Pe=we.record.name);else{if(we=ye.name?he.get(ye.name):V.find(ze=>ze.re.test(ye.path)),!we)throw createRouterError(1,{location:ge,currentLocation:ye});Pe=we.record.name,ke=assign$1({},ye.params,ge.params),Se=we.stringify(ke)}const Re=[];let Ne=we;for(;Ne;)Re.unshift(Ne.record),Ne=Ne.parent;return{name:Pe,path:Se,params:ke,matched:Re,meta:mergeMetaFields(Re)}}return G.forEach(ge=>te(ge)),{addRoute:te,resolve:re,removeRoute:Ee,getRoutes:j,getRecordMatcher:ce}}function paramsFromLocation(G,q){const V={};for(const he of q)he in G&&(V[he]=G[he]);return V}function normalizeRouteRecord(G){return{path:G.path,redirect:G.redirect,name:G.name,meta:G.meta||{},aliasOf:void 0,beforeEnter:G.beforeEnter,props:normalizeRecordProps(G),children:G.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in G?G.components||{}:{default:G.component}}}function normalizeRecordProps(G){const q={},V=G.props||!1;if("component"in G)q.default=V;else for(const he in G.components)q[he]=typeof V=="boolean"?V:V[he];return q}function isAliasRecord(G){for(;G;){if(G.record.aliasOf)return!0;G=G.parent}return!1}function mergeMetaFields(G){return G.reduce((q,V)=>assign$1(q,V.meta),{})}function mergeOptions(G,q){const V={};for(const he in G)V[he]=he in q?q[he]:G[he];return V}function isRecordChildOf(G,q){return q.children.some(V=>V===G||isRecordChildOf(G,V))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(G){return encodeURI(""+G).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(G){return commonEncode(G).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(G){return commonEncode(G).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(G){return encodeQueryValue(G).replace(EQUAL_RE,"%3D")}function encodePath(G){return commonEncode(G).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(G){return G==null?"":encodePath(G).replace(SLASH_RE,"%2F")}function decode(G){try{return decodeURIComponent(""+G)}catch{}return""+G}function parseQuery(G){const q={};if(G===""||G==="?")return q;const he=(G[0]==="?"?G.slice(1):G).split("&");for(let ce=0;ce<he.length;++ce){const te=he[ce].replace(PLUS_RE," "),Ee=te.indexOf("="),j=decode(Ee<0?te:te.slice(0,Ee)),xe=Ee<0?null:decode(te.slice(Ee+1));if(j in q){let re=q[j];Array.isArray(re)||(re=q[j]=[re]),re.push(xe)}else q[j]=xe}return q}function stringifyQuery(G){let q="";for(let V in G){const he=G[V];if(V=encodeQueryKey(V),he==null){he!==void 0&&(q+=(q.length?"&":"")+V);continue}(Array.isArray(he)?he.map(te=>te&&encodeQueryValue(te)):[he&&encodeQueryValue(he)]).forEach(te=>{te!==void 0&&(q+=(q.length?"&":"")+V,te!=null&&(q+="="+te))})}return q}function normalizeQuery(G){const q={};for(const V in G){const he=G[V];he!==void 0&&(q[V]=Array.isArray(he)?he.map(ce=>ce==null?null:""+ce):he==null?he:""+he)}return q}function useCallbacks(){let G=[];function q(he){return G.push(he),()=>{const ce=G.indexOf(he);ce>-1&&G.splice(ce,1)}}function V(){G=[]}return{add:q,list:()=>G,reset:V}}function guardToPromiseFn(G,q,V,he,ce){const te=he&&(he.enterCallbacks[ce]=he.enterCallbacks[ce]||[]);return()=>new Promise((Ee,j)=>{const xe=ye=>{ye===!1?j(createRouterError(4,{from:V,to:q})):ye instanceof Error?j(ye):isRouteLocation(ye)?j(createRouterError(2,{from:q,to:ye})):(te&&he.enterCallbacks[ce]===te&&typeof ye=="function"&&te.push(ye),Ee())},re=G.call(he&&he.instances[ce],q,V,xe);let ge=Promise.resolve(re);G.length<3&&(ge=ge.then(xe)),ge.catch(ye=>j(ye))})}function extractComponentsGuards(G,q,V,he){const ce=[];for(const te of G)for(const Ee in te.components){let j=te.components[Ee];if(!(q!=="beforeRouteEnter"&&!te.instances[Ee]))if(isRouteComponent(j)){const re=(j.__vccOpts||j)[q];re&&ce.push(guardToPromiseFn(re,V,he,te,Ee))}else{let xe=j();ce.push(()=>xe.then(re=>{if(!re)return Promise.reject(new Error(`Couldn't resolve component "${Ee}" at "${te.path}"`));const ge=isESModule(re)?re.default:re;te.components[Ee]=ge;const we=(ge.__vccOpts||ge)[q];return we&&guardToPromiseFn(we,V,he,te,Ee)()}))}}return ce}function isRouteComponent(G){return typeof G=="object"||"displayName"in G||"props"in G||"__vccOpts"in G}function useLink(G){const q=inject(routerKey),V=inject(routeLocationKey),he=computed(()=>q.resolve(unref(G.to))),ce=computed(()=>{const{matched:xe}=he.value,{length:re}=xe,ge=xe[re-1],ye=V.matched;if(!ge||!ye.length)return-1;const we=ye.findIndex(isSameRouteRecord.bind(null,ge));if(we>-1)return we;const ke=getOriginalPath(xe[re-2]);return re>1&&getOriginalPath(ge)===ke&&ye[ye.length-1].path!==ke?ye.findIndex(isSameRouteRecord.bind(null,xe[re-2])):we}),te=computed(()=>ce.value>-1&&includesParams(V.params,he.value.params)),Ee=computed(()=>ce.value>-1&&ce.value===V.matched.length-1&&isSameRouteLocationParams(V.params,he.value.params));function j(xe={}){return guardEvent(xe)?q[unref(G.replace)?"replace":"push"](unref(G.to)).catch(noop$1):Promise.resolve()}return{route:he,href:computed(()=>he.value.href),isActive:te,isExactActive:Ee,navigate:j}}const RouterLinkImpl=defineComponent({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(G,{slots:q}){const V=reactive(useLink(G)),{options:he}=inject(routerKey),ce=computed(()=>({[getLinkClass(G.activeClass,he.linkActiveClass,"router-link-active")]:V.isActive,[getLinkClass(G.exactActiveClass,he.linkExactActiveClass,"router-link-exact-active")]:V.isExactActive}));return()=>{const te=q.default&&q.default(V);return G.custom?te:h$3("a",{"aria-current":V.isExactActive?G.ariaCurrentValue:null,href:V.href,onClick:V.navigate,class:ce.value},te)}}}),RouterLink=RouterLinkImpl;function guardEvent(G){if(!(G.metaKey||G.altKey||G.ctrlKey||G.shiftKey)&&!G.defaultPrevented&&!(G.button!==void 0&&G.button!==0)){if(G.currentTarget&&G.currentTarget.getAttribute){const q=G.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(q))return}return G.preventDefault&&G.preventDefault(),!0}}function includesParams(G,q){for(const V in q){const he=q[V],ce=G[V];if(typeof he=="string"){if(he!==ce)return!1}else if(!Array.isArray(ce)||ce.length!==he.length||he.some((te,Ee)=>te!==ce[Ee]))return!1}return!0}function getOriginalPath(G){return G?G.aliasOf?G.aliasOf.path:G.path:""}const getLinkClass=(G,q,V)=>G!=null?G:q!=null?q:V,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(G,{attrs:q,slots:V}){const he=inject(routerViewLocationKey),ce=computed(()=>G.route||he.value),te=inject(viewDepthKey,0),Ee=computed(()=>ce.value.matched[te]);provide(viewDepthKey,te+1),provide(matchedRouteKey,Ee),provide(routerViewLocationKey,ce);const j=ref();return watch(()=>[j.value,Ee.value,G.name],([xe,re,ge],[ye,we,ke])=>{re&&(re.instances[ge]=xe,we&&we!==re&&xe&&xe===ye&&(re.leaveGuards.size||(re.leaveGuards=we.leaveGuards),re.updateGuards.size||(re.updateGuards=we.updateGuards))),xe&&re&&(!we||!isSameRouteRecord(re,we)||!ye)&&(re.enterCallbacks[ge]||[]).forEach(Se=>Se(xe))},{flush:"post"}),()=>{const xe=ce.value,re=Ee.value,ge=re&&re.components[G.name],ye=G.name;if(!ge)return normalizeSlot(V.default,{Component:ge,route:xe});const we=re.props[G.name],ke=we?we===!0?xe.params:typeof we=="function"?we(xe):we:null,Pe=h$3(ge,assign$1({},ke,q,{onVnodeUnmounted:Re=>{Re.component.isUnmounted&&(re.instances[ye]=null)},ref:j}));return normalizeSlot(V.default,{Component:Pe,route:xe})||Pe}}});function normalizeSlot(G,q){if(!G)return null;const V=G(q);return V.length===1?V[0]:V}const RouterView=RouterViewImpl;function createRouter(G){const q=createRouterMatcher(G.routes,G),V=G.parseQuery||parseQuery,he=G.stringifyQuery||stringifyQuery,ce=G.history,te=useCallbacks(),Ee=useCallbacks(),j=useCallbacks(),xe=shallowRef(START_LOCATION_NORMALIZED);let re=START_LOCATION_NORMALIZED;isBrowser&&G.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const ge=applyToParams.bind(null,rn=>""+rn),ye=applyToParams.bind(null,encodeParam),we=applyToParams.bind(null,decode);function ke(rn,on){let Zt,Ot;return isRouteName(rn)?(Zt=q.getRecordMatcher(rn),Ot=on):Ot=rn,q.addRoute(Ot,Zt)}function Se(rn){const on=q.getRecordMatcher(rn);on&&q.removeRoute(on)}function Pe(){return q.getRoutes().map(rn=>rn.record)}function Re(rn){return!!q.getRecordMatcher(rn)}function Ne(rn,on){if(on=assign$1({},on||xe.value),typeof rn=="string"){const In=parseURL(V,rn,on.path),It=q.resolve({path:In.path},on),Rt=ce.createHref(In.fullPath);return assign$1(In,It,{params:we(It.params),hash:decode(In.hash),redirectedFrom:void 0,href:Rt})}let Zt;if("path"in rn)Zt=assign$1({},rn,{path:parseURL(V,rn.path,on.path).path});else{const In=assign$1({},rn.params);for(const It in In)In[It]==null&&delete In[It];Zt=assign$1({},rn,{params:ye(rn.params)}),on.params=ye(on.params)}const Ot=q.resolve(Zt,on),Qt=rn.hash||"";Ot.params=ge(we(Ot.params));const un=stringifyURL(he,assign$1({},rn,{hash:encodeHash(Qt),path:Ot.path})),yn=ce.createHref(un);return assign$1({fullPath:un,hash:Qt,query:he===stringifyQuery?normalizeQuery(rn.query):rn.query||{}},Ot,{redirectedFrom:void 0,href:yn})}function ze(rn){return typeof rn=="string"?parseURL(V,rn,xe.value.path):assign$1({},rn)}function Be(rn,on){if(re!==rn)return createRouterError(8,{from:on,to:rn})}function Ze(rn){return Je(rn)}function Xe(rn){return Ze(assign$1(ze(rn),{replace:!0}))}function qe(rn){const on=rn.matched[rn.matched.length-1];if(on&&on.redirect){const{redirect:Zt}=on;let Ot=typeof Zt=="function"?Zt(rn):Zt;return typeof Ot=="string"&&(Ot=Ot.includes("?")||Ot.includes("#")?Ot=ze(Ot):{path:Ot},Ot.params={}),assign$1({query:rn.query,hash:rn.hash,params:rn.params},Ot)}}function Je(rn,on){const Zt=re=Ne(rn),Ot=xe.value,Qt=rn.state,un=rn.force,yn=rn.replace===!0,In=qe(Zt);if(In)return Je(assign$1(ze(In),{state:Qt,force:un,replace:yn}),on||Zt);const It=Zt;It.redirectedFrom=on;let Rt;return!un&&isSameRouteLocation(he,Ot,Zt)&&(Rt=createRouterError(16,{to:It,from:Ot}),Ut(Ot,Ot,!0,!1)),(Rt?Promise.resolve(Rt):Ct(It,Ot)).catch(nn=>isNavigationFailure(nn)?isNavigationFailure(nn,2)?nn:ut(nn):pt(nn,It,Ot)).then(nn=>{if(nn){if(isNavigationFailure(nn,2))return Je(assign$1(ze(nn.to),{state:Qt,force:un,replace:yn}),on||It)}else nn=xt(It,Ot,!0,yn,Qt);return bt(It,Ot,nn),nn})}function dt(rn,on){const Zt=Be(rn,on);return Zt?Promise.reject(Zt):Promise.resolve()}function Ct(rn,on){let Zt;const[Ot,Qt,un]=extractChangingRecords(rn,on);Zt=extractComponentsGuards(Ot.reverse(),"beforeRouteLeave",rn,on);for(const In of Ot)In.leaveGuards.forEach(It=>{Zt.push(guardToPromiseFn(It,rn,on))});const yn=dt.bind(null,rn,on);return Zt.push(yn),runGuardQueue(Zt).then(()=>{Zt=[];for(const In of te.list())Zt.push(guardToPromiseFn(In,rn,on));return Zt.push(yn),runGuardQueue(Zt)}).then(()=>{Zt=extractComponentsGuards(Qt,"beforeRouteUpdate",rn,on);for(const In of Qt)In.updateGuards.forEach(It=>{Zt.push(guardToPromiseFn(It,rn,on))});return Zt.push(yn),runGuardQueue(Zt)}).then(()=>{Zt=[];for(const In of rn.matched)if(In.beforeEnter&&!on.matched.includes(In))if(Array.isArray(In.beforeEnter))for(const It of In.beforeEnter)Zt.push(guardToPromiseFn(It,rn,on));else Zt.push(guardToPromiseFn(In.beforeEnter,rn,on));return Zt.push(yn),runGuardQueue(Zt)}).then(()=>(rn.matched.forEach(In=>In.enterCallbacks={}),Zt=extractComponentsGuards(un,"beforeRouteEnter",rn,on),Zt.push(yn),runGuardQueue(Zt))).then(()=>{Zt=[];for(const In of Ee.list())Zt.push(guardToPromiseFn(In,rn,on));return Zt.push(yn),runGuardQueue(Zt)}).catch(In=>isNavigationFailure(In,8)?In:Promise.reject(In))}function bt(rn,on,Zt){for(const Ot of j.list())Ot(rn,on,Zt)}function xt(rn,on,Zt,Ot,Qt){const un=Be(rn,on);if(un)return un;const yn=on===START_LOCATION_NORMALIZED,In=isBrowser?history.state:{};Zt&&(Ot||yn?ce.replace(rn.fullPath,assign$1({scroll:yn&&In&&In.scroll},Qt)):ce.push(rn.fullPath,Qt)),xe.value=rn,Ut(rn,on,Zt,yn),ut()}let nt;function tt(){nt=ce.listen((rn,on,Zt)=>{const Ot=Ne(rn),Qt=qe(Ot);if(Qt){Je(assign$1(Qt,{replace:!0}),Ot).catch(noop$1);return}re=Ot;const un=xe.value;isBrowser&&saveScrollPosition(getScrollKey(un.fullPath,Zt.delta),computeScrollPosition()),Ct(Ot,un).catch(yn=>isNavigationFailure(yn,12)?yn:isNavigationFailure(yn,2)?(Je(yn.to,Ot).then(In=>{isNavigationFailure(In,20)&&!Zt.delta&&Zt.type===NavigationType.pop&&ce.go(-1,!1)}).catch(noop$1),Promise.reject()):(Zt.delta&&ce.go(-Zt.delta,!1),pt(yn,Ot,un))).then(yn=>{yn=yn||xt(Ot,un,!1),yn&&(Zt.delta?ce.go(-Zt.delta,!1):Zt.type===NavigationType.pop&&isNavigationFailure(yn,20)&&ce.go(-1,!1)),bt(Ot,un,yn)}).catch(noop$1)})}let rt=useCallbacks(),ht=useCallbacks(),st;function pt(rn,on,Zt){ut(rn);const Ot=ht.list();return Ot.length?Ot.forEach(Qt=>Qt(rn,on,Zt)):console.error(rn),Promise.reject(rn)}function vt(){return st&&xe.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((rn,on)=>{rt.add([rn,on])})}function ut(rn){return st||(st=!rn,tt(),rt.list().forEach(([on,Zt])=>rn?Zt(rn):on()),rt.reset()),rn}function Ut(rn,on,Zt,Ot){const{scrollBehavior:Qt}=G;if(!isBrowser||!Qt)return Promise.resolve();const un=!Zt&&getSavedScrollPosition(getScrollKey(rn.fullPath,0))||(Ot||!Zt)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Qt(rn,on,un)).then(yn=>yn&&scrollToPosition(yn)).catch(yn=>pt(yn,rn,on))}const at=rn=>ce.go(rn);let zt;const sn=new Set;return{currentRoute:xe,addRoute:ke,removeRoute:Se,hasRoute:Re,getRoutes:Pe,resolve:Ne,options:G,push:Ze,replace:Xe,go:at,back:()=>at(-1),forward:()=>at(1),beforeEach:te.add,beforeResolve:Ee.add,afterEach:j.add,onError:ht.add,isReady:vt,install(rn){const on=this;rn.component("RouterLink",RouterLink),rn.component("RouterView",RouterView),rn.config.globalProperties.$router=on,Object.defineProperty(rn.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(xe)}),isBrowser&&!zt&&xe.value===START_LOCATION_NORMALIZED&&(zt=!0,Ze(ce.location).catch(Qt=>{}));const Zt={};for(const Qt in START_LOCATION_NORMALIZED)Zt[Qt]=computed(()=>xe.value[Qt]);rn.provide(routerKey,on),rn.provide(routeLocationKey,reactive(Zt)),rn.provide(routerViewLocationKey,xe);const Ot=rn.unmount;sn.add(rn),rn.unmount=function(){sn.delete(rn),sn.size<1&&(re=START_LOCATION_NORMALIZED,nt&&nt(),xe.value=START_LOCATION_NORMALIZED,zt=!1,st=!1),Ot()}}}}function runGuardQueue(G){return G.reduce((q,V)=>q.then(()=>V()),Promise.resolve())}function extractChangingRecords(G,q){const V=[],he=[],ce=[],te=Math.max(q.matched.length,G.matched.length);for(let Ee=0;Ee<te;Ee++){const j=q.matched[Ee];j&&(G.matched.find(re=>isSameRouteRecord(re,j))?he.push(j):V.push(j));const xe=G.matched[Ee];xe&&(q.matched.find(re=>isSameRouteRecord(re,xe))||ce.push(xe))}return[V,he,ce]}function useRouter(){return inject(routerKey)}function u$5(G,q,...V){if(G in q){let ce=q[G];return typeof ce=="function"?ce(...V):ce}let he=new Error(`Tried to handle "${G}" but there is no handler defined. Only defined handlers are: ${Object.keys(q).map(ce=>`"${ce}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(he,u$5),he}var m$1=(G=>(G[G.None=0]="None",G[G.RenderStrategy=1]="RenderStrategy",G[G.Static=2]="Static",G))(m$1||{}),h$2=(G=>(G[G.Unmount=0]="Unmount",G[G.Hidden=1]="Hidden",G))(h$2||{});function k(he){var ce=he,{visible:G=!0,features:q=0}=ce,V=Es(ce,["visible","features"]);var te;if(G||q&2&&V.props.static)return a$4(V);if(q&1){let Ee=(te=V.props.unmount)==null||te?0:1;return u$5(Ee,{[0](){return null},[1](){return a$4(Yo(Xr({},V),{props:Yo(Xr({},V.props),{hidden:!0,style:{display:"none"}})}))}})}return a$4(V)}function a$4({props:G,attrs:q,slots:V,slot:he,name:ce}){var te;let re=R$2(G,["unmount","static"]),{as:Ee}=re,j=Es(re,["as"]),xe=(te=V.default)==null?void 0:te.call(V,he);if(Ee==="template"){if(Object.keys(j).length>0||Object.keys(q).length>0){let[ge,...ye]=xe!=null?xe:[];if(!b$3(ge)||ye.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${ce} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(j).concat(Object.keys(q)).map(we=>`  - ${we}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(we=>`  - ${we}`).join(`
`)].join(`
`));return cloneVNode(ge,j)}return Array.isArray(xe)&&xe.length===1?xe[0]:xe}return h$3(Ee,j,xe)}function O(G){let q=Object.assign({},G);for(let V in q)q[V]===void 0&&delete q[V];return q}function R$2(G,q=[]){let V=Object.assign({},G);for(let he of q)he in V&&delete V[he];return V}function b$3(G){return G==null?!1:typeof G.type=="string"||typeof G.type=="object"||typeof G.type=="function"}let e$3=0;function n$2(){return++e$3}function t$2(){return n$2()}var o$1=(G=>(G.Space=" ",G.Enter="Enter",G.Escape="Escape",G.Backspace="Backspace",G.Delete="Delete",G.ArrowLeft="ArrowLeft",G.ArrowUp="ArrowUp",G.ArrowRight="ArrowRight",G.ArrowDown="ArrowDown",G.Home="Home",G.End="End",G.PageUp="PageUp",G.PageDown="PageDown",G.Tab="Tab",G))(o$1||{});function f$2(G){throw new Error("Unexpected object: "+G)}var a$3=(G=>(G[G.First=0]="First",G[G.Previous=1]="Previous",G[G.Next=2]="Next",G[G.Last=3]="Last",G[G.Specific=4]="Specific",G[G.Nothing=5]="Nothing",G))(a$3||{});function x$4(G,q){let V=q.resolveItems();if(V.length<=0)return null;let he=q.resolveActiveIndex(),ce=he!=null?he:-1,te=(()=>{switch(G.focus){case 0:return V.findIndex(Ee=>!q.resolveDisabled(Ee));case 1:{let Ee=V.slice().reverse().findIndex((j,xe,re)=>ce!==-1&&re.length-xe-1>=ce?!1:!q.resolveDisabled(j));return Ee===-1?Ee:V.length-1-Ee}case 2:return V.findIndex((Ee,j)=>j<=ce?!1:!q.resolveDisabled(Ee));case 3:{let Ee=V.slice().reverse().findIndex(j=>!q.resolveDisabled(j));return Ee===-1?Ee:V.length-1-Ee}case 4:return V.findIndex(Ee=>q.resolveId(Ee)===G.id);case 5:return null;default:f$2(G)}})();return te===-1?he:te}function t$1(G){return G==null||G.value==null?null:"$el"in G.value?G.value.$el:G.value}let n$1=Symbol("Context");var l$3=(G=>(G[G.Open=0]="Open",G[G.Closed=1]="Closed",G))(l$3||{});function f$1(){return p$4()!==null}function p$4(){return inject(n$1,null)}function c$3(G){provide(n$1,G)}function r$4(G,q){if(G)return G;let V=q!=null?q:"button";if(typeof V=="string"&&V.toLowerCase()==="button")return"button"}function b$2(G,q){let V=ref(r$4(G.value.type,G.value.as));return onMounted(()=>{V.value=r$4(G.value.type,G.value.as)}),watchEffect(()=>{var he;V.value||!t$1(q)||t$1(q)instanceof HTMLButtonElement&&!((he=t$1(q))!=null&&he.hasAttribute("type"))&&(V.value="button")}),V}function e$2(G){if(typeof window=="undefined")return null;if(G instanceof Node)return G.ownerDocument;if(G!=null&&G.hasOwnProperty("value")){let q=t$1(G);if(q)return q.ownerDocument}return document}function p$3({container:G,accept:q,walk:V,enabled:he}){watchEffect(()=>{let ce=G.value;if(!ce||he!==void 0&&!he.value)return;let te=e$2(G);if(!te)return;let Ee=Object.assign(xe=>q(xe),{acceptNode:q}),j=te.createTreeWalker(ce,NodeFilter.SHOW_ELEMENT,Ee,!1);for(;j.nextNode();)V(j.currentNode)})}let c$2=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(G=>`${G}:not([tabindex='-1'])`).join(",");var p$2=(G=>(G[G.First=1]="First",G[G.Previous=2]="Previous",G[G.Next=4]="Next",G[G.Last=8]="Last",G[G.WrapAround=16]="WrapAround",G[G.NoScroll=32]="NoScroll",G))(p$2||{}),L$2=(G=>(G[G.Error=0]="Error",G[G.Overflow=1]="Overflow",G[G.Success=2]="Success",G[G.Underflow=3]="Underflow",G))(L$2||{}),N=(G=>(G[G.Previous=-1]="Previous",G[G.Next=1]="Next",G))(N||{});function T$2(G=document.body){return G==null?[]:Array.from(G.querySelectorAll(c$2))}var b$1=(G=>(G[G.Strict=0]="Strict",G[G.Loose=1]="Loose",G))(b$1||{});function S$1(G,q=0){var V;return G===((V=e$2(G))==null?void 0:V.body)?!1:u$5(q,{[0](){return G.matches(c$2)},[1](){let he=G;for(;he!==null;){if(he.matches(c$2))return!0;he=he.parentElement}return!1}})}function F$2(G){G==null||G.focus({preventScroll:!0})}let M=["textarea","input"].join(",");function h$1(G){var q,V;return(V=(q=G==null?void 0:G.matches)==null?void 0:q.call(G,M))!=null?V:!1}function v$2(G,q=V=>V){return G.slice().sort((V,he)=>{let ce=q(V),te=q(he);if(ce===null||te===null)return 0;let Ee=ce.compareDocumentPosition(te);return Ee&Node.DOCUMENT_POSITION_FOLLOWING?-1:Ee&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function H$1(G,q){var V;let he=(V=Array.isArray(G)?G.length>0?G[0].ownerDocument:document:G==null?void 0:G.ownerDocument)!=null?V:document,ce=Array.isArray(G)?v$2(G):T$2(G),te=he.activeElement,Ee=(()=>{if(q&5)return 1;if(q&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),j=(()=>{if(q&1)return 0;if(q&2)return Math.max(0,ce.indexOf(te))-1;if(q&4)return Math.max(0,ce.indexOf(te))+1;if(q&8)return ce.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),xe=q&32?{preventScroll:!0}:{},re=0,ge=ce.length,ye;do{if(re>=ge||re+ge<=0)return 0;let we=j+re;if(q&16)we=(we+ge)%ge;else{if(we<0)return 3;if(we>=ge)return 1}ye=ce[we],ye==null||ye.focus(xe),re+=Ee}while(ye!==he.activeElement);return ye.hasAttribute("tabindex")||ye.setAttribute("tabindex","0"),q&6&&h$1(ye)&&ye.select(),2}function w$1(G,q,V){typeof window!="undefined"&&watchEffect(he=>{window.addEventListener(G,q,V),he(()=>window.removeEventListener(G,q,V))})}function s$3(G){typeof queueMicrotask=="function"?queueMicrotask(G):Promise.resolve().then(G).catch(q=>setTimeout(()=>{throw q}))}var p$1=(G=>(G[G.None=1]="None",G[G.IgnoreScrollbars=2]="IgnoreScrollbars",G))(p$1||{});function g$4(G,q,V=1){let he=!1;function ce(te){if(he)return;he=!0,s$3(()=>{he=!1});let Ee=te.target;if(!Ee.ownerDocument.documentElement.contains(Ee))return;let j=function xe(re){return typeof re=="function"?xe(re()):Array.isArray(re)||re instanceof Set?re:[re]}(G);if((V&2)===2){let xe=20,re=Ee.ownerDocument.documentElement;if(te.clientX>re.clientWidth-xe||te.clientX<xe||te.clientY>re.clientHeight-xe||te.clientY<xe)return}for(let xe of j){if(xe===null)continue;let re=xe instanceof HTMLElement?xe:t$1(xe);if(re!=null&&re.contains(Ee))return}q(te,Ee)}w$1("pointerdown",ce),w$1("mousedown",ce)}let l$2=defineComponent({name:"VisuallyHidden",props:{as:{type:[Object,String],default:"div"}},setup(G,{slots:q,attrs:V}){return()=>k({props:Yo(Xr({},G),{style:{position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",display:"none"}}),slot:{},attrs:V,slots:q,name:"VisuallyHidden"})}});function p(G){var q;let V=(q=G==null?void 0:G.form)!=null?q:G.closest("form");if(V){for(let he of V.elements)if(he.tagName==="INPUT"&&he.type==="submit"||he.tagName==="BUTTON"&&he.type==="submit"||he.nodeName==="INPUT"&&he.type==="image"){he.click();return}}}function r$3(G,q,V,he){typeof window!="undefined"&&watchEffect(ce=>{G=G!=null?G:window,G.addEventListener(q,V,he),ce(()=>G.removeEventListener(q,V,he))})}var g$3=(G=>(G[G.None=1]="None",G[G.InitialFocus=2]="InitialFocus",G[G.TabLock=4]="TabLock",G[G.FocusLock=8]="FocusLock",G[G.RestoreFocus=16]="RestoreFocus",G[G.All=30]="All",G))(g$3||{});function W$2(G,q=ref(30),V=ref({})){var he,ce;let te=ref(null),Ee=ref(null),j={value:!1},xe=computed(()=>Boolean(q.value&16)),re=computed(()=>Boolean(q.value&2)),ge=computed(()=>e$2(G));return onMounted(()=>{watch(xe,(ye,we)=>{var ke;ye!==we&&(!xe.value||(j.value=!0,te.value||(te.value=(ke=ge.value)==null?void 0:ke.activeElement)))},{immediate:!0}),watch(xe,(ye,we,ke)=>{ye!==we&&(!xe.value||ke(()=>{j.value!==!1&&(j.value=!1,F$2(te.value),te.value=null)}))},{immediate:!0}),watch([G,V,V.value.initialFocus,re],(ye,we)=>{var ke,Se;if(ye.every((ze,Be)=>(we==null?void 0:we[Be])===ze)||!re.value)return;let Pe=G.value;if(!Pe)return;let Re=t$1(V.value.initialFocus),Ne=(ke=ge.value)==null?void 0:ke.activeElement;if(Re){if(Re===Ne){Ee.value=Ne;return}}else if(Pe.contains(Ne)){Ee.value=Ne;return}Re?F$2(Re):H$1(Pe,p$2.First)===L$2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),Ee.value=(Se=ge.value)==null?void 0:Se.activeElement},{immediate:!0})}),r$3((he=ge.value)==null?void 0:he.defaultView,"keydown",ye=>{var we;!(q.value&4)||!G.value||ye.key===o$1.Tab&&(ye.preventDefault(),H$1(G.value,(ye.shiftKey?p$2.Previous:p$2.Next)|p$2.WrapAround)===L$2.Success&&(Ee.value=(we=ge.value)==null?void 0:we.activeElement))}),r$3((ce=ge.value)==null?void 0:ce.defaultView,"focus",ye=>{var we;if(!(q.value&8))return;let ke=new Set((we=V.value.containers)==null?void 0:we.value);if(ke.add(G),!ke.size)return;let Se=Ee.value;if(!Se||!j.value)return;let Pe=ye.target;Pe&&Pe instanceof HTMLElement?x$3(ke,Pe)?(Ee.value=Pe,F$2(Pe)):(ye.preventDefault(),ye.stopPropagation(),F$2(Se)):F$2(Ee.value)},!0),te}function x$3(G,q){var V;for(let he of G)if((V=he.value)!=null&&V.contains(q))return!0;return!1}let l$1="body > *",i$2=new Set,r$2=new Map;function u$4(G){G.setAttribute("aria-hidden","true"),G.inert=!0}function s$2(G){let q=r$2.get(G);!q||(q["aria-hidden"]===null?G.removeAttribute("aria-hidden"):G.setAttribute("aria-hidden",q["aria-hidden"]),G.inert=q.inert)}function g$2(G,q=ref(!0)){watchEffect(V=>{if(!q.value||!G.value)return;let he=G.value,ce=e$2(he);if(ce){i$2.add(he);for(let te of r$2.keys())te.contains(he)&&(s$2(te),r$2.delete(te));ce.querySelectorAll(l$1).forEach(te=>{if(te instanceof HTMLElement){for(let Ee of i$2)if(te.contains(Ee))return;i$2.size===1&&(r$2.set(te,{"aria-hidden":te.getAttribute("aria-hidden"),inert:te.inert}),u$4(te))}}),V(()=>{if(i$2.delete(he),i$2.size>0)ce.querySelectorAll(l$1).forEach(te=>{if(te instanceof HTMLElement&&!r$2.has(te)){for(let Ee of i$2)if(te.contains(Ee))return;r$2.set(te,{"aria-hidden":te.getAttribute("aria-hidden"),inert:te.inert}),u$4(te)}});else for(let te of r$2.keys())s$2(te),r$2.delete(te)})}})}let e$1=Symbol("ForcePortalRootContext");function u$3(){return inject(e$1,!1)}let P$2=defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(G,{slots:q,attrs:V}){return provide(e$1,G.force),()=>{let te=G,{force:he}=te,ce=Es(te,["force"]);return k({props:ce,slot:{},slots:q,attrs:V,name:"ForcePortalRoot"})}}});function v$1(G){let q=e$2(G);if(!q)throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${G}`);let V=q.getElementById("headlessui-portal-root");if(V)return V;let he=q.createElement("div");return he.setAttribute("id","headlessui-portal-root"),q.body.appendChild(he)}let R$1=defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(G,{slots:q,attrs:V}){let he=ref(null),ce=computed(()=>e$2(he)),te=u$3(),Ee=inject(g$1,null),j=ref(te===!0||Ee==null?v$1(he.value):Ee.resolveTarget());return watchEffect(()=>{te||Ee!=null&&(j.value=Ee.resolveTarget())}),onUnmounted(()=>{var xe,re;let ge=(xe=ce.value)==null?void 0:xe.getElementById("headlessui-portal-root");!ge||j.value===ge&&j.value.children.length<=0&&((re=j.value.parentElement)==null||re.removeChild(j.value))}),()=>{if(j.value===null)return null;let xe={ref:he};return h$3(Teleport,{to:j.value},k({props:Xr(Xr({},G),xe),slot:{},attrs:V,slots:q,name:"Portal"}))}}}),g$1=Symbol("PortalGroupContext"),L$1=defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(G,{attrs:q,slots:V}){let he=reactive({resolveTarget(){return G.target}});return provide(g$1,he),()=>{let Ee=G,{target:ce}=Ee,te=Es(Ee,["target"]);return k({props:te,slot:{},attrs:q,slots:V,name:"PortalGroup"})}}}),i$1=Symbol("StackContext");var c$1=(G=>(G[G.Add=0]="Add",G[G.Remove=1]="Remove",G))(c$1||{});function a$2(){return inject(i$1,()=>{})}function s$1({type:G,element:q,onUpdate:V}){let he=a$2();function ce(...te){V==null||V(...te),he(...te)}onMounted(()=>{ce(0,G,q),onUnmounted(()=>{ce(1,G,q)})}),provide(i$1,ce)}let u$2=Symbol("DescriptionContext");function h(){let G=inject(u$2,null);if(G===null)throw new Error("Missing parent");return G}function P$1({slot:G=ref({}),name:q="Description",props:V={}}={}){let he=ref([]);function ce(te){return he.value.push(te),()=>{let Ee=he.value.indexOf(te);Ee!==-1&&he.value.splice(Ee,1)}}return provide(u$2,{register:ce,slot:G,name:q,props:V}),computed(()=>he.value.length>0?he.value.join(" "):void 0)}let S=defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"}},setup(G,{attrs:q,slots:V}){let he=h(),ce=`headlessui-description-${t$2()}`;return onMounted(()=>onUnmounted(he.register(ce))),()=>{let{name:te="Description",slot:Ee=ref({}),props:j={}}=he,xe=G,re=Yo(Xr({},Object.entries(j).reduce((ge,[ye,we])=>Object.assign(ge,{[ye]:unref(we)}),{})),{id:ce});return k({props:Xr(Xr({},xe),re),slot:Ee.value,attrs:q,slots:V,name:te})}}});var fe$2=(G=>(G[G.Open=0]="Open",G[G.Closed=1]="Closed",G))(fe$2||{});let x$2=Symbol("DialogContext");function P(G){let q=inject(x$2,null);if(q===null){let V=new Error(`<${G} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,P),V}return q}let T$1="DC8F892D-2EBD-447C-A4C8-A03058436FF4",Me=defineComponent({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:T$1},initialFocus:{type:Object,default:null}},emits:{close:G=>!0},setup(G,{emit:q,attrs:V,slots:he,expose:ce}){var te;let Ee=ref(0),j=p$4(),xe=computed(()=>G.open===T$1&&j!==null?u$5(j.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):G.open),re=ref(new Set),ge=ref(null),ye=computed(()=>e$2(ge));if(ce({el:ge,$el:ge}),!(G.open!==T$1||j!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof xe.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${xe.value===T$1?void 0:G.open}`);let we=computed(()=>xe.value?0:1),ke=computed(()=>we.value===0),Se=computed(()=>Ee.value>1),Pe=inject(x$2,null)!==null,Re=computed(()=>Se.value?"parent":"leaf"),Ne=W$2(ge,computed(()=>ke.value?u$5(Re.value,{parent:g$3.RestoreFocus,leaf:g$3.All&~g$3.FocusLock}):g$3.None),computed(()=>({initialFocus:ref(G.initialFocus),containers:re})));g$2(ge,computed(()=>Se.value?ke.value:!1)),s$1({type:"Dialog",element:ge,onUpdate:(Je,dt,Ct)=>{if(dt==="Dialog")return u$5(Je,{[c$1.Add](){re.value.add(Ct),Ee.value+=1},[c$1.Remove](){re.value.delete(Ct),Ee.value-=1}})}});let ze=P$1({name:"DialogDescription",slot:computed(()=>({open:xe.value}))}),Be=`headlessui-dialog-${t$2()}`,Ze=ref(null),Xe={titleId:Ze,panelRef:ref(null),dialogState:we,setTitleId(Je){Ze.value!==Je&&(Ze.value=Je)},close(){q("close",!1)}};provide(x$2,Xe),g$4(()=>{var Je,dt,Ct;return[...Array.from((dt=(Je=ye.value)==null?void 0:Je.querySelectorAll("body > *"))!=null?dt:[]).filter(bt=>!(!(bt instanceof HTMLElement)||bt.contains(Ne.value)||Xe.panelRef.value&&bt.contains(Xe.panelRef.value))),(Ct=Xe.panelRef.value)!=null?Ct:ge.value]},(Je,dt)=>{we.value===0&&(Se.value||(Xe.close(),nextTick(()=>dt==null?void 0:dt.focus())))},p$1.IgnoreScrollbars),r$3((te=ye.value)==null?void 0:te.defaultView,"keydown",Je=>{Je.key===o$1.Escape&&we.value===0&&(Se.value||(Je.preventDefault(),Je.stopPropagation(),Xe.close()))}),watchEffect(Je=>{var dt;if(we.value!==0||Pe)return;let Ct=ye.value;if(!Ct)return;let bt=Ct==null?void 0:Ct.documentElement,xt=(dt=Ct.defaultView)!=null?dt:window,nt=bt.style.overflow,tt=bt.style.paddingRight,rt=xt.innerWidth-bt.clientWidth;bt.style.overflow="hidden",bt.style.paddingRight=`${rt}px`,Je(()=>{bt.style.overflow=nt,bt.style.paddingRight=tt})}),watchEffect(Je=>{if(we.value!==0)return;let dt=t$1(ge);if(!dt)return;let Ct=new IntersectionObserver(bt=>{for(let xt of bt)xt.boundingClientRect.x===0&&xt.boundingClientRect.y===0&&xt.boundingClientRect.width===0&&xt.boundingClientRect.height===0&&Xe.close()});Ct.observe(dt),Je(()=>Ct.disconnect())});function qe(Je){Je.stopPropagation()}return()=>{let Je=Yo(Xr({},V),{ref:ge,id:Be,role:"dialog","aria-modal":we.value===0?!0:void 0,"aria-labelledby":Ze.value,"aria-describedby":ze.value,onClick:qe}),nt=G,{open:dt,initialFocus:Ct}=nt,bt=Es(nt,["open","initialFocus"]),xt={open:we.value===0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>h$3(L$1,{target:ge.value},()=>h$3(P$2,{force:!1},()=>k({props:Xr(Xr({},bt),Je),slot:xt,attrs:V,slots:he,visible:we.value===0,features:m$1.RenderStrategy|m$1.Static,name:"Dialog"})))))}}});defineComponent({name:"DialogOverlay",props:{as:{type:[Object,String],default:"div"}},setup(G,{attrs:q,slots:V}){let he=P("DialogOverlay"),ce=`headlessui-dialog-overlay-${t$2()}`;function te(Ee){Ee.target===Ee.currentTarget&&(Ee.preventDefault(),Ee.stopPropagation(),he.close())}return()=>k({props:Yo(Xr({},G),{id:ce,"aria-hidden":!0,onClick:te}),slot:{open:he.dialogState.value===0},attrs:q,slots:V,name:"DialogOverlay"})}});defineComponent({name:"DialogBackdrop",props:{as:{type:[Object,String],default:"div"}},inheritAttrs:!1,setup(G,{attrs:q,slots:V,expose:he}){let ce=P("DialogBackdrop"),te=`headlessui-dialog-backdrop-${t$2()}`,Ee=ref(null);return he({el:Ee,$el:Ee}),onMounted(()=>{if(ce.panelRef.value===null)throw new Error("A <DialogBackdrop /> component is being used, but a <DialogPanel /> component is missing.")}),()=>{let j=G,xe={id:te,ref:Ee,"aria-hidden":!0};return h$3(P$2,{force:!0},()=>h$3(R$1,()=>k({props:Xr(Xr(Xr({},q),j),xe),slot:{open:ce.dialogState.value===0},attrs:q,slots:V,name:"DialogBackdrop"})))}}});let je=defineComponent({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"}},setup(G,{attrs:q,slots:V}){let he=P("DialogPanel"),ce=`headlessui-dialog-panel-${t$2()}`;return()=>{let te={id:ce,ref:he.panelRef};return k({props:Xr(Xr({},G),te),slot:{open:he.dialogState.value===0},attrs:q,slots:V,name:"DialogPanel"})}}}),Ae=defineComponent({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"}},setup(G,{attrs:q,slots:V}){let he=P("DialogTitle"),ce=`headlessui-dialog-title-${t$2()}`;return onMounted(()=>{he.setTitleId(ce),onUnmounted(()=>he.setTitleId(null))}),()=>k({props:Yo(Xr({},G),{id:ce}),slot:{open:he.dialogState.value===0},attrs:q,slots:V,name:"DialogTitle"})}});var w=(G=>(G[G.Open=0]="Open",G[G.Closed=1]="Closed",G))(w||{});let x$1=Symbol("DisclosureContext");function C(G){let q=inject(x$1,null);if(q===null){let V=new Error(`<${G} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,C),V}return q}let B=Symbol("DisclosurePanelContext");function H(){return inject(B,null)}let A=defineComponent({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(G,{slots:q,attrs:V}){let he=`headlessui-disclosure-button-${t$2()}`,ce=`headlessui-disclosure-panel-${t$2()}`,te=ref(G.defaultOpen?0:1),Ee=ref(null),j=ref(null),xe={buttonId:he,panelId:ce,disclosureState:te,panel:Ee,button:j,toggleDisclosure(){te.value=u$5(te.value,{[0]:1,[1]:0})},closeDisclosure(){te.value!==1&&(te.value=1)},close(re){xe.closeDisclosure();let ge=(()=>re?re instanceof HTMLElement?re:re.value instanceof HTMLElement?t$1(re):t$1(xe.button):t$1(xe.button))();ge==null||ge.focus()}};return provide(x$1,xe),c$3(computed(()=>u$5(te.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let we=G,{defaultOpen:re}=we,ge=Es(we,["defaultOpen"]),ye={open:te.value===0,close:xe.close};return k({props:ge,slot:ye,slots:q,attrs:V,name:"Disclosure"})}}});defineComponent({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1}},setup(G,{attrs:q,slots:V,expose:he}){let ce=C("DisclosureButton"),te=H(),Ee=te===null?!1:te===ce.panelId,j=ref(null);he({el:j,$el:j}),Ee||watchEffect(()=>{ce.button.value=j.value});let xe=b$2(computed(()=>({as:G.as,type:q.type})),j);function re(){var we;G.disabled||(Ee?(ce.toggleDisclosure(),(we=t$1(ce.button))==null||we.focus()):ce.toggleDisclosure())}function ge(we){var ke;if(!G.disabled)if(Ee)switch(we.key){case o$1.Space:case o$1.Enter:we.preventDefault(),we.stopPropagation(),ce.toggleDisclosure(),(ke=t$1(ce.button))==null||ke.focus();break}else switch(we.key){case o$1.Space:case o$1.Enter:we.preventDefault(),we.stopPropagation(),ce.toggleDisclosure();break}}function ye(we){switch(we.key){case o$1.Space:we.preventDefault();break}}return()=>{let we={open:ce.disclosureState.value===0},ke=Ee?{ref:j,type:xe.value,onClick:re,onKeydown:ge}:{id:ce.buttonId,ref:j,type:xe.value,"aria-expanded":G.disabled?void 0:ce.disclosureState.value===0,"aria-controls":t$1(ce.panel)?ce.panelId:void 0,disabled:G.disabled?!0:void 0,onClick:re,onKeydown:ge,onKeyup:ye};return k({props:Xr(Xr({},G),ke),slot:we,attrs:q,slots:V,name:"DisclosureButton"})}}});defineComponent({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(G,{attrs:q,slots:V,expose:he}){let ce=C("DisclosurePanel");he({el:ce.panel,$el:ce.panel}),provide(B,ce.panelId);let te=p$4(),Ee=computed(()=>te!==null?te.value===l$3.Open:ce.disclosureState.value===0);return()=>{let j={open:ce.disclosureState.value===0,close:ce.close},xe={id:ce.panelId,ref:ce.panel};return k({props:Xr(Xr({},G),xe),slot:j,attrs:q,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:Ee.value,name:"DisclosurePanel"})}}});var W$1=(G=>(G[G.Open=0]="Open",G[G.Closed=1]="Closed",G))(W$1||{}),J=(G=>(G[G.Pointer=0]="Pointer",G[G.Other=1]="Other",G))(J||{});function z(G){requestAnimationFrame(()=>requestAnimationFrame(G))}let E=Symbol("MenuContext");function D(G){let q=inject(E,null);if(q===null){let V=new Error(`<${G} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(V,D),V}return q}let fe$1=defineComponent({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(G,{slots:q,attrs:V}){let he=ref(1),ce=ref(null),te=ref(null),Ee=ref([]),j=ref(""),xe=ref(null),re=ref(1);function ge(we=ke=>ke){let ke=xe.value!==null?Ee.value[xe.value]:null,Se=v$2(we(Ee.value.slice()),Re=>t$1(Re.dataRef.domRef)),Pe=ke?Se.indexOf(ke):null;return Pe===-1&&(Pe=null),{items:Se,activeItemIndex:Pe}}let ye={menuState:he,buttonRef:ce,itemsRef:te,items:Ee,searchQuery:j,activeItemIndex:xe,activationTrigger:re,closeMenu:()=>{he.value=1,xe.value=null},openMenu:()=>he.value=0,goToItem(we,ke,Se){let Pe=ge(),Re=x$4(we===a$3.Specific?{focus:a$3.Specific,id:ke}:{focus:we},{resolveItems:()=>Pe.items,resolveActiveIndex:()=>Pe.activeItemIndex,resolveId:Ne=>Ne.id,resolveDisabled:Ne=>Ne.dataRef.disabled});j.value="",xe.value=Re,re.value=Se!=null?Se:1,Ee.value=Pe.items},search(we){let ke=j.value!==""?0:1;j.value+=we.toLowerCase();let Se=(xe.value!==null?Ee.value.slice(xe.value+ke).concat(Ee.value.slice(0,xe.value+ke)):Ee.value).find(Re=>Re.dataRef.textValue.startsWith(j.value)&&!Re.dataRef.disabled),Pe=Se?Ee.value.indexOf(Se):-1;Pe===-1||Pe===xe.value||(xe.value=Pe,re.value=1)},clearSearch(){j.value=""},registerItem(we,ke){let Se=ge(Pe=>[...Pe,{id:we,dataRef:ke}]);Ee.value=Se.items,xe.value=Se.activeItemIndex,re.value=1},unregisterItem(we){let ke=ge(Se=>{let Pe=Se.findIndex(Re=>Re.id===we);return Pe!==-1&&Se.splice(Pe,1),Se});Ee.value=ke.items,xe.value=ke.activeItemIndex,re.value=1}};return g$4([ce,te],(we,ke)=>{var Se;he.value===0&&(ye.closeMenu(),S$1(ke,b$1.Loose)||(we.preventDefault(),(Se=t$1(ce))==null||Se.focus()))}),provide(E,ye),c$3(computed(()=>u$5(he.value,{[0]:l$3.Open,[1]:l$3.Closed}))),()=>{let we={open:he.value===0};return k({props:G,slot:we,slots:q,attrs:V,name:"Menu"})}}}),me=defineComponent({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"}},setup(G,{attrs:q,slots:V,expose:he}){let ce=D("MenuButton"),te=`headlessui-menu-button-${t$2()}`;he({el:ce.buttonRef,$el:ce.buttonRef});function Ee(ge){switch(ge.key){case o$1.Space:case o$1.Enter:case o$1.ArrowDown:ge.preventDefault(),ge.stopPropagation(),ce.openMenu(),nextTick(()=>{var ye;(ye=t$1(ce.itemsRef))==null||ye.focus({preventScroll:!0}),ce.goToItem(a$3.First)});break;case o$1.ArrowUp:ge.preventDefault(),ge.stopPropagation(),ce.openMenu(),nextTick(()=>{var ye;(ye=t$1(ce.itemsRef))==null||ye.focus({preventScroll:!0}),ce.goToItem(a$3.Last)});break}}function j(ge){switch(ge.key){case o$1.Space:ge.preventDefault();break}}function xe(ge){G.disabled||(ce.menuState.value===0?(ce.closeMenu(),nextTick(()=>{var ye;return(ye=t$1(ce.buttonRef))==null?void 0:ye.focus({preventScroll:!0})})):(ge.preventDefault(),ge.stopPropagation(),ce.openMenu(),z(()=>{var ye;return(ye=t$1(ce.itemsRef))==null?void 0:ye.focus({preventScroll:!0})})))}let re=b$2(computed(()=>({as:G.as,type:q.type})),ce.buttonRef);return()=>{var ge;let ye={open:ce.menuState.value===0},we={ref:ce.buttonRef,id:te,type:re.value,"aria-haspopup":!0,"aria-controls":(ge=t$1(ce.itemsRef))==null?void 0:ge.id,"aria-expanded":G.disabled?void 0:ce.menuState.value===0,onKeydown:Ee,onKeyup:j,onClick:xe};return k({props:Xr(Xr({},G),we),slot:ye,attrs:q,slots:V,name:"MenuButton"})}}}),pe=defineComponent({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(G,{attrs:q,slots:V,expose:he}){let ce=D("MenuItems"),te=`headlessui-menu-items-${t$2()}`,Ee=ref(null);he({el:ce.itemsRef,$el:ce.itemsRef}),p$3({container:computed(()=>t$1(ce.itemsRef)),enabled:computed(()=>ce.menuState.value===0),accept(ye){return ye.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:ye.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(ye){ye.setAttribute("role","none")}});function j(ye){var we;switch(Ee.value&&clearTimeout(Ee.value),ye.key){case o$1.Space:if(ce.searchQuery.value!=="")return ye.preventDefault(),ye.stopPropagation(),ce.search(ye.key);case o$1.Enter:if(ye.preventDefault(),ye.stopPropagation(),ce.activeItemIndex.value!==null){let ke=ce.items.value[ce.activeItemIndex.value];(we=t$1(ke.dataRef.domRef))==null||we.click()}ce.closeMenu(),nextTick(()=>{var ke;return(ke=t$1(ce.buttonRef))==null?void 0:ke.focus({preventScroll:!0})});break;case o$1.ArrowDown:return ye.preventDefault(),ye.stopPropagation(),ce.goToItem(a$3.Next);case o$1.ArrowUp:return ye.preventDefault(),ye.stopPropagation(),ce.goToItem(a$3.Previous);case o$1.Home:case o$1.PageUp:return ye.preventDefault(),ye.stopPropagation(),ce.goToItem(a$3.First);case o$1.End:case o$1.PageDown:return ye.preventDefault(),ye.stopPropagation(),ce.goToItem(a$3.Last);case o$1.Escape:ye.preventDefault(),ye.stopPropagation(),ce.closeMenu(),nextTick(()=>{var ke;return(ke=t$1(ce.buttonRef))==null?void 0:ke.focus({preventScroll:!0})});break;case o$1.Tab:ye.preventDefault(),ye.stopPropagation();break;default:ye.key.length===1&&(ce.search(ye.key),Ee.value=setTimeout(()=>ce.clearSearch(),350));break}}function xe(ye){switch(ye.key){case o$1.Space:ye.preventDefault();break}}let re=p$4(),ge=computed(()=>re!==null?re.value===l$3.Open:ce.menuState.value===0);return()=>{var ye,we;let ke={open:ce.menuState.value===0},Se={"aria-activedescendant":ce.activeItemIndex.value===null||(ye=ce.items.value[ce.activeItemIndex.value])==null?void 0:ye.id,"aria-labelledby":(we=t$1(ce.buttonRef))==null?void 0:we.id,id:te,onKeydown:j,onKeyup:xe,role:"menu",tabIndex:0,ref:ce.itemsRef};return k({props:Xr(Xr({},G),Se),slot:ke,attrs:q,slots:V,features:m$1.RenderStrategy|m$1.Static,visible:ge.value,name:"MenuItems"})}}}),ve=defineComponent({name:"MenuItem",props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1}},setup(G,{slots:q,attrs:V,expose:he}){let ce=D("MenuItem"),te=`headlessui-menu-item-${t$2()}`,Ee=ref(null);he({el:Ee,$el:Ee});let j=computed(()=>ce.activeItemIndex.value!==null?ce.items.value[ce.activeItemIndex.value].id===te:!1),xe=computed(()=>({disabled:G.disabled,textValue:"",domRef:Ee}));onMounted(()=>{var ke,Se;let Pe=(Se=(ke=t$1(Ee))==null?void 0:ke.textContent)==null?void 0:Se.toLowerCase().trim();Pe!==void 0&&(xe.value.textValue=Pe)}),onMounted(()=>ce.registerItem(te,xe)),onUnmounted(()=>ce.unregisterItem(te)),watchEffect(()=>{ce.menuState.value===0&&(!j.value||ce.activationTrigger.value!==0&&nextTick(()=>{var ke,Se;return(Se=(ke=t$1(Ee))==null?void 0:ke.scrollIntoView)==null?void 0:Se.call(ke,{block:"nearest"})}))});function re(ke){if(G.disabled)return ke.preventDefault();ce.closeMenu(),nextTick(()=>{var Se;return(Se=t$1(ce.buttonRef))==null?void 0:Se.focus({preventScroll:!0})})}function ge(){if(G.disabled)return ce.goToItem(a$3.Nothing);ce.goToItem(a$3.Specific,te)}function ye(){G.disabled||j.value||ce.goToItem(a$3.Specific,te,0)}function we(){G.disabled||!j.value||ce.goToItem(a$3.Nothing)}return()=>{let{disabled:ke}=G,Se={active:j.value,disabled:ke};return k({props:Yo(Xr({},G),{id:te,ref:Ee,role:"menuitem",tabIndex:ke===!0?void 0:-1,"aria-disabled":ke===!0?!0:void 0,onClick:re,onFocus:ge,onPointermove:ye,onMousemove:ye,onPointerleave:we,onMouseleave:we}),slot:Se,attrs:V,slots:q,name:"MenuItem"})}}}),u$1=Symbol("LabelContext");function a$1(){let G=inject(u$1,null);if(G===null){let q=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(q,a$1),q}return G}function K$1({slot:G={},name:q="Label",props:V={}}={}){let he=ref([]);function ce(te){return he.value.push(te),()=>{let Ee=he.value.indexOf(te);Ee!==-1&&he.value.splice(Ee,1)}}return provide(u$1,{register:ce,slot:G,name:q,props:V}),computed(()=>he.value.length>0?he.value.join(" "):void 0)}let T=defineComponent({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1}},setup(G,{slots:q,attrs:V}){let he=a$1(),ce=`headlessui-label-${t$2()}`;return onMounted(()=>onUnmounted(he.register(ce))),()=>{let{name:te="Label",slot:Ee={},props:j={}}=he,we=G,{passive:xe}=we,re=Es(we,["passive"]),ge=Yo(Xr({},Object.entries(j).reduce((ke,[Se,Pe])=>Object.assign(ke,{[Se]:unref(Pe)}),{})),{id:ce}),ye=Xr(Xr({},re),ge);return xe&&delete ye.onClick,k({props:ye,slot:Ee,attrs:V,slots:q,name:te})}}}),b=Symbol("GroupContext"),W=defineComponent({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(G,{slots:q,attrs:V}){let he=ref(null),ce=K$1({name:"SwitchLabel",props:{onClick(){!he.value||(he.value.click(),he.value.focus({preventScroll:!0}))}}}),te=P$1({name:"SwitchDescription"});return provide(b,{switchRef:he,labelledby:ce,describedby:te}),()=>k({props:G,slot:{},slots:q,attrs:V,name:"SwitchGroup"})}}),X=defineComponent({name:"Switch",emits:{"update:modelValue":G=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:!1},name:{type:String,optional:!0},value:{type:String,optional:!0}},inheritAttrs:!1,setup(G,{emit:q,attrs:V,slots:he,expose:ce}){let te=inject(b,null),Ee=`headlessui-switch-${t$2()}`;function j(){q("update:modelValue",!G.modelValue)}let xe=ref(null),re=te===null?xe:te.switchRef,ge=b$2(computed(()=>({as:G.as,type:V.type})),re);ce({el:re,$el:re});function ye(Se){Se.preventDefault(),j()}function we(Se){Se.key===o$1.Space?(Se.preventDefault(),j()):Se.key===o$1.Enter&&p(Se.currentTarget)}function ke(Se){Se.preventDefault()}return()=>{let Ze=G,{name:Se,value:Pe,modelValue:Re}=Ze,Ne=Es(Ze,["name","value","modelValue"]),ze={checked:Re},Be={id:Ee,ref:re,role:"switch",type:ge.value,tabIndex:0,"aria-checked":Re,"aria-labelledby":te==null?void 0:te.labelledby.value,"aria-describedby":te==null?void 0:te.describedby.value,onClick:ye,onKeyup:we,onKeypress:ke};return h$3(Fragment,[Se!=null&&Re!=null?h$3(l$2,O({as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:Re,name:Se,value:Pe})):null,k({props:Xr(Xr(Xr({},V),Ne),Be),slot:ze,attrs:V,slots:he,name:"Switch"})])}}}),Y=T,Z=S;function l(G){let q={called:!1};return(...V)=>{if(!q.called)return q.called=!0,G(...V)}}function r$1(){let G=[],q=[],V={enqueue(he){q.push(he)},requestAnimationFrame(...he){let ce=requestAnimationFrame(...he);V.add(()=>cancelAnimationFrame(ce))},nextFrame(...he){V.requestAnimationFrame(()=>{V.requestAnimationFrame(...he)})},setTimeout(...he){let ce=setTimeout(...he);V.add(()=>clearTimeout(ce))},add(he){G.push(he)},dispose(){for(let he of G.splice(0))he()},async workQueue(){for(let he of q.splice(0))await he()}};return V}function m(G,...q){G&&q.length>0&&G.classList.add(...q)}function d$1(G,...q){G&&q.length>0&&G.classList.remove(...q)}var g=(G=>(G.Finished="finished",G.Cancelled="cancelled",G))(g||{});function F$1(G,q){let V=r$1();if(!G)return V.dispose;let{transitionDuration:he,transitionDelay:ce}=getComputedStyle(G),[te,Ee]=[he,ce].map(j=>{let[xe=0]=j.split(",").filter(Boolean).map(re=>re.includes("ms")?parseFloat(re):parseFloat(re)*1e3).sort((re,ge)=>ge-re);return xe});return te!==0?V.setTimeout(()=>q("finished"),te+Ee):q("finished"),V.add(()=>q("cancelled")),V.dispose}function L(G,q,V,he,ce,te){let Ee=r$1(),j=te!==void 0?l(te):()=>{};return d$1(G,...ce),m(G,...q,...V),Ee.nextFrame(()=>{d$1(G,...V),m(G,...he),Ee.add(F$1(G,xe=>(d$1(G,...he,...q),m(G,...ce),j(xe))))}),Ee.add(()=>d$1(G,...q,...V,...he,...ce)),Ee.add(()=>j("cancelled")),Ee.dispose}function d(G=""){return G.split(" ").filter(q=>q.trim().length>1)}let F=Symbol("TransitionContext");var ae=(G=>(G.Visible="visible",G.Hidden="hidden",G))(ae||{});function le(){return inject(F,null)!==null}function ie(){let G=inject(F,null);if(G===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return G}function se(){let G=inject(R,null);if(G===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return G}let R=Symbol("NestingContext");function x(G){return"children"in G?x(G.children):G.value.filter(({state:q})=>q==="visible").length>0}function K(G){let q=ref([]),V=ref(!1);onMounted(()=>V.value=!0),onUnmounted(()=>V.value=!1);function he(te,Ee=h$2.Hidden){let j=q.value.findIndex(({id:xe})=>xe===te);j!==-1&&(u$5(Ee,{[h$2.Unmount](){q.value.splice(j,1)},[h$2.Hidden](){q.value[j].state="hidden"}}),!x(q)&&V.value&&(G==null||G()))}function ce(te){let Ee=q.value.find(({id:j})=>j===te);return Ee?Ee.state!=="visible"&&(Ee.state="visible"):q.value.push({id:te,state:"visible"}),()=>he(te,h$2.Unmount)}return{children:q,register:ce,unregister:he}}let _$1=m$1.RenderStrategy,oe=defineComponent({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(G,{emit:q,attrs:V,slots:he,expose:ce}){if(!le()&&f$1())return()=>h$3(fe,Yo(Xr({},G),{onBeforeEnter:()=>q("beforeEnter"),onAfterEnter:()=>q("afterEnter"),onBeforeLeave:()=>q("beforeLeave"),onAfterLeave:()=>q("afterLeave")}),he);let te=ref(null),Ee=ref("visible"),j=computed(()=>G.unmount?h$2.Unmount:h$2.Hidden);ce({el:te,$el:te});let{show:xe,appear:re}=ie(),{register:ge,unregister:ye}=se(),we={value:!0},ke=t$2(),Se={value:!1},Pe=K(()=>{Se.value||(Ee.value="hidden",ye(ke),q("afterLeave"))});onMounted(()=>{let dt=ge(ke);onUnmounted(dt)}),watchEffect(()=>{if(j.value===h$2.Hidden&&!!ke){if(xe&&Ee.value!=="visible"){Ee.value="visible";return}u$5(Ee.value,{hidden:()=>ye(ke),visible:()=>ge(ke)})}});let Re=d(G.enter),Ne=d(G.enterFrom),ze=d(G.enterTo),Be=d(G.entered),Ze=d(G.leave),Xe=d(G.leaveFrom),qe=d(G.leaveTo);onMounted(()=>{watchEffect(()=>{if(Ee.value==="visible"){let dt=t$1(te);if(dt instanceof Comment&&dt.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function Je(dt){let Ct=we.value&&!re.value,bt=t$1(te);!bt||!(bt instanceof HTMLElement)||Ct||(Se.value=!0,xe.value&&q("beforeEnter"),xe.value||q("beforeLeave"),dt(xe.value?L(bt,Re,Ne,ze,Be,xt=>{Se.value=!1,xt===g.Finished&&q("afterEnter")}):L(bt,Ze,Xe,qe,Be,xt=>{Se.value=!1,xt===g.Finished&&(x(Pe)||(Ee.value="hidden",ye(ke),q("afterLeave")))})))}return onMounted(()=>{watch([xe,re],(dt,Ct,bt)=>{Je(bt),we.value=!1},{immediate:!0})}),provide(R,Pe),c$3(computed(()=>u$5(Ee.value,{visible:l$3.Open,hidden:l$3.Closed}))),()=>{let vt=G,{appear:dt,show:Ct,enter:bt,enterFrom:xt,enterTo:nt,entered:tt,leave:rt,leaveFrom:ht,leaveTo:st}=vt,pt=Es(vt,["appear","show","enter","enterFrom","enterTo","entered","leave","leaveFrom","leaveTo"]);return k({props:Yo(Xr({},pt),{ref:te}),slot:{},slots:he,attrs:V,features:_$1,visible:Ee.value==="visible",name:"TransitionChild"})}}}),ue=oe,fe=defineComponent({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(G,{emit:q,attrs:V,slots:he}){let ce=p$4(),te=computed(()=>G.show===null&&ce!==null?u$5(ce.value,{[l$3.Open]:!0,[l$3.Closed]:!1}):G.show);watchEffect(()=>{if(![!0,!1].includes(te.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let Ee=ref(te.value?"visible":"hidden"),j=K(()=>{Ee.value="hidden"}),xe={value:!0},re={show:te,appear:computed(()=>G.appear||!xe.value)};return onMounted(()=>{watchEffect(()=>{xe.value=!1,te.value?Ee.value="visible":x(j)||(Ee.value="hidden")})}),provide(R,j),provide(F,re),()=>{let ge=R$2(G,["show","appear","unmount"]),ye={unmount:G.unmount};return k({props:Yo(Xr({},ye),{as:"template"}),slot:{},slots:Yo(Xr({},he),{default:()=>[h$3(ue,Xr(Xr(Xr({onBeforeEnter:()=>q("beforeEnter"),onAfterEnter:()=>q("afterEnter"),onBeforeLeave:()=>q("beforeLeave"),onAfterLeave:()=>q("afterLeave")},V),ye),ge),he.default)]}),attrs:{},features:_$1,visible:Ee.value==="visible",name:"Transition"})}}});function render$g(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$f(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])}function render$e(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$d(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})])}function render$c(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$b(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])}function render$a(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])}function render$9(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})])}function render$8(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})])}function render$7(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])}function render$6(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})])}function render$5(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})])}function render$4(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])}function render$3(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$2(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}function render$1(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[createVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})])}try{self["workbox:window:6.5.2"]&&_()}catch{}function n(G,q){return new Promise(function(V){var he=new MessageChannel;he.port1.onmessage=function(ce){V(ce.data)},G.postMessage(q,[he.port2])})}function t(G,q){for(var V=0;V<q.length;V++){var he=q[V];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(G,he.key,he)}}function r(G,q){(q==null||q>G.length)&&(q=G.length);for(var V=0,he=new Array(q);V<q;V++)he[V]=G[V];return he}function e(G,q){var V;if(typeof Symbol=="undefined"||G[Symbol.iterator]==null){if(Array.isArray(G)||(V=function(ce,te){if(ce){if(typeof ce=="string")return r(ce,te);var Ee=Object.prototype.toString.call(ce).slice(8,-1);return Ee==="Object"&&ce.constructor&&(Ee=ce.constructor.name),Ee==="Map"||Ee==="Set"?Array.from(ce):Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee)?r(ce,te):void 0}}(G))||q&&G&&typeof G.length=="number"){V&&(G=V);var he=0;return function(){return he>=G.length?{done:!0}:{done:!1,value:G[he++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(V=G[Symbol.iterator]()).next.bind(V)}try{self["workbox:core:6.5.2"]&&_()}catch{}var i=function(){var G=this;this.promise=new Promise(function(q,V){G.resolve=q,G.reject=V})};function o(G,q){var V=location.href;return new URL(G,V).href===new URL(q,V).href}var u=function(G,q){this.type=G,Object.assign(this,q)};function a(G,q,V){return V?q?q(G):G:(G&&G.then||(G=Promise.resolve(G)),q?G.then(q):G)}function c(){}var f={type:"SKIP_WAITING"};function s(G,q){if(!q)return G&&G.then?G.then(c):Promise.resolve()}var v=function(G){var q,V;function he(j,xe){var re,ge;return xe===void 0&&(xe={}),(re=G.call(this)||this).nn={},re.tn=0,re.rn=new i,re.en=new i,re.on=new i,re.un=0,re.an=new Set,re.cn=function(){var ye=re.fn,we=ye.installing;re.tn>0||!o(we.scriptURL,re.sn.toString())||performance.now()>re.un+6e4?(re.vn=we,ye.removeEventListener("updatefound",re.cn)):(re.hn=we,re.an.add(we),re.rn.resolve(we)),++re.tn,we.addEventListener("statechange",re.ln)},re.ln=function(ye){var we=re.fn,ke=ye.target,Se=ke.state,Pe=ke===re.vn,Re={sw:ke,isExternal:Pe,originalEvent:ye};!Pe&&re.mn&&(Re.isUpdate=!0),re.dispatchEvent(new u(Se,Re)),Se==="installed"?re.wn=self.setTimeout(function(){Se==="installed"&&we.waiting===ke&&re.dispatchEvent(new u("waiting",Re))},200):Se==="activating"&&(clearTimeout(re.wn),Pe||re.en.resolve(ke))},re.dn=function(ye){var we=re.hn,ke=we!==navigator.serviceWorker.controller;re.dispatchEvent(new u("controlling",{isExternal:ke,originalEvent:ye,sw:we,isUpdate:re.mn})),ke||re.on.resolve(we)},re.gn=(ge=function(ye){var we=ye.data,ke=ye.ports,Se=ye.source;return a(re.getSW(),function(){re.an.has(Se)&&re.dispatchEvent(new u("message",{data:we,originalEvent:ye,ports:ke,sw:Se}))})},function(){for(var ye=[],we=0;we<arguments.length;we++)ye[we]=arguments[we];try{return Promise.resolve(ge.apply(this,ye))}catch(ke){return Promise.reject(ke)}}),re.sn=j,re.nn=xe,navigator.serviceWorker.addEventListener("message",re.gn),re}V=G,(q=he).prototype=Object.create(V.prototype),q.prototype.constructor=q,q.__proto__=V;var ce,te,Ee=he.prototype;return Ee.register=function(j){var xe=(j===void 0?{}:j).immediate,re=xe!==void 0&&xe;try{var ge=this;return function(ye,we){var ke=ye();return ke&&ke.then?ke.then(we):we(ke)}(function(){if(!re&&document.readyState!=="complete")return s(new Promise(function(ye){return window.addEventListener("load",ye)}))},function(){return ge.mn=Boolean(navigator.serviceWorker.controller),ge.yn=ge.pn(),a(ge.bn(),function(ye){ge.fn=ye,ge.yn&&(ge.hn=ge.yn,ge.en.resolve(ge.yn),ge.on.resolve(ge.yn),ge.yn.addEventListener("statechange",ge.ln,{once:!0}));var we=ge.fn.waiting;return we&&o(we.scriptURL,ge.sn.toString())&&(ge.hn=we,Promise.resolve().then(function(){ge.dispatchEvent(new u("waiting",{sw:we,wasWaitingBeforeRegister:!0}))}).then(function(){})),ge.hn&&(ge.rn.resolve(ge.hn),ge.an.add(ge.hn)),ge.fn.addEventListener("updatefound",ge.cn),navigator.serviceWorker.addEventListener("controllerchange",ge.dn),ge.fn})})}catch(ye){return Promise.reject(ye)}},Ee.update=function(){try{return this.fn?s(this.fn.update()):void 0}catch(j){return Promise.reject(j)}},Ee.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},Ee.messageSW=function(j){try{return a(this.getSW(),function(xe){return n(xe,j)})}catch(xe){return Promise.reject(xe)}},Ee.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n(this.fn.waiting,f)},Ee.pn=function(){var j=navigator.serviceWorker.controller;return j&&o(j.scriptURL,this.sn.toString())?j:void 0},Ee.bn=function(){try{var j=this;return function(xe,re){try{var ge=xe()}catch(ye){return re(ye)}return ge&&ge.then?ge.then(void 0,re):ge}(function(){return a(navigator.serviceWorker.register(j.sn,j.nn),function(xe){return j.un=performance.now(),xe})},function(xe){throw xe})}catch(xe){return Promise.reject(xe)}},ce=he,(te=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&t(ce.prototype,te),he}(function(){function G(){this.Pn=new Map}var q=G.prototype;return q.addEventListener=function(V,he){this.Sn(V).add(he)},q.removeEventListener=function(V,he){this.Sn(V).delete(he)},q.dispatchEvent=function(V){V.target=this;for(var he,ce=e(this.Sn(V.type));!(he=ce()).done;)(0,he.value)(V)},q.Sn=function(V){return this.Pn.has(V)||this.Pn.set(V,new Set),this.Pn.get(V)},G}()),isVue2=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=G=>activePinia=G,piniaSymbol=Symbol();function isPlainObject$1(G){return G&&typeof G=="object"&&Object.prototype.toString.call(G)==="[object Object]"&&typeof G.toJSON!="function"}var MutationType;(function(G){G.direct="direct",G.patchObject="patch object",G.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const G=effectScope(!0),q=G.run(()=>ref({}));let V=[],he=[];const ce=markRaw({install(te){setActivePinia(ce),ce._a=te,te.provide(piniaSymbol,ce),te.config.globalProperties.$pinia=ce,he.forEach(Ee=>V.push(Ee)),he=[]},use(te){return!this._a&&!isVue2?he.push(te):V.push(te),this},_p:V,_a:null,_e:G,_s:new Map,state:q});return ce}const noop=()=>{};function addSubscription(G,q,V,he=noop){G.push(q);const ce=()=>{const te=G.indexOf(q);te>-1&&(G.splice(te,1),he())};return!V&&getCurrentInstance()&&onUnmounted(ce),ce}function triggerSubscriptions(G,...q){G.slice().forEach(V=>{V(...q)})}function mergeReactiveObjects(G,q){for(const V in q){if(!q.hasOwnProperty(V))continue;const he=q[V],ce=G[V];isPlainObject$1(ce)&&isPlainObject$1(he)&&G.hasOwnProperty(V)&&!isRef(he)&&!isReactive(he)?G[V]=mergeReactiveObjects(ce,he):G[V]=he}return G}const skipHydrateSymbol=Symbol();function shouldHydrate(G){return!isPlainObject$1(G)||!G.hasOwnProperty(skipHydrateSymbol)}const{assign}=Object;function isComputed(G){return!!(isRef(G)&&G.effect)}function createOptionsStore(G,q,V,he){const{state:ce,actions:te,getters:Ee}=q,j=V.state.value[G];let xe;function re(){j||(V.state.value[G]=ce?ce():{});const ge=toRefs(V.state.value[G]);return assign(ge,te,Object.keys(Ee||{}).reduce((ye,we)=>(ye[we]=markRaw(computed(()=>{setActivePinia(V);const ke=V._s.get(G);return Ee[we].call(ke,ke)})),ye),{}))}return xe=createSetupStore(G,re,q,V),xe.$reset=function(){const ye=ce?ce():{};this.$patch(we=>{assign(we,ye)})},xe}function createSetupStore(G,q,V={},he,ce){let te;const Ee=V.state,j=assign({actions:{}},V),xe={deep:!0};let re,ge,ye=markRaw([]),we=markRaw([]),ke;const Se=he.state.value[G];!Ee&&!Se&&(he.state.value[G]={}),ref({});function Pe(qe){let Je;re=ge=!1,typeof qe=="function"?(qe(he.state.value[G]),Je={type:MutationType.patchFunction,storeId:G,events:ke}):(mergeReactiveObjects(he.state.value[G],qe),Je={type:MutationType.patchObject,payload:qe,storeId:G,events:ke}),nextTick().then(()=>{re=!0}),ge=!0,triggerSubscriptions(ye,Je,he.state.value[G])}const Re=noop;function Ne(){te.stop(),ye=[],we=[],he._s.delete(G)}function ze(qe,Je){return function(){setActivePinia(he);const dt=Array.from(arguments),Ct=[],bt=[];function xt(rt){Ct.push(rt)}function nt(rt){bt.push(rt)}triggerSubscriptions(we,{args:dt,name:qe,store:Ze,after:xt,onError:nt});let tt;try{tt=Je.apply(this&&this.$id===G?this:Ze,dt)}catch(rt){throw triggerSubscriptions(bt,rt),rt}return tt instanceof Promise?tt.then(rt=>(triggerSubscriptions(Ct,rt),rt)).catch(rt=>(triggerSubscriptions(bt,rt),Promise.reject(rt))):(triggerSubscriptions(Ct,tt),tt)}}const Be={_p:he,$id:G,$onAction:addSubscription.bind(null,we),$patch:Pe,$reset:Re,$subscribe(qe,Je={}){const dt=addSubscription(ye,qe,Je.detached,()=>Ct()),Ct=te.run(()=>watch(()=>he.state.value[G],bt=>{(Je.flush==="sync"?ge:re)&&qe({storeId:G,type:MutationType.direct,events:ke},bt)},assign({},xe,Je)));return dt},$dispose:Ne},Ze=reactive(assign({},Be));he._s.set(G,Ze);const Xe=he._e.run(()=>(te=effectScope(),te.run(()=>q())));for(const qe in Xe){const Je=Xe[qe];if(isRef(Je)&&!isComputed(Je)||isReactive(Je))Ee||(Se&&shouldHydrate(Je)&&(isRef(Je)?Je.value=Se[qe]:mergeReactiveObjects(Je,Se[qe])),he.state.value[G][qe]=Je);else if(typeof Je=="function"){const dt=ze(qe,Je);Xe[qe]=dt,j.actions[qe]=Je}}return assign(Ze,Xe),assign(toRaw(Ze),Xe),Object.defineProperty(Ze,"$state",{get:()=>he.state.value[G],set:qe=>{Pe(Je=>{assign(Je,qe)})}}),he._p.forEach(qe=>{assign(Ze,te.run(()=>qe({store:Ze,app:he._a,pinia:he,options:j})))}),Se&&Ee&&V.hydrate&&V.hydrate(Ze.$state,Se),re=!0,ge=!0,Ze}function defineStore(G,q,V){let he,ce;const te=typeof q=="function";typeof G=="string"?(he=G,ce=te?V:q):(ce=G,he=G.id);function Ee(j,xe){const re=getCurrentInstance();return j=j||re&&inject(piniaSymbol),j&&setActivePinia(j),j=activePinia,j._s.has(he)||(te?createSetupStore(he,q,ce,j):createOptionsStore(he,ce,j)),j._s.get(he)}return Ee.$id=he,Ee}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(G){return G&&G.__esModule&&Object.prototype.hasOwnProperty.call(G,"default")?G.default:G}var mapboxGl={exports:{}};(function(G,q){(function(V,he){G.exports=he()})(commonjsGlobal,function(){var V,he,ce;function te(j,xe){if(!V)V=xe;else if(!he)he=xe;else{var re="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+V+")(sharedChunk); ("+he+")(sharedChunk); self.onerror = null;",ge={};V(ge),ce=xe(ge),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(ce.workerUrl=window.URL.createObjectURL(new Blob([re],{type:"text/javascript"})))}}te(["exports"],function(j){var xe=typeof self!="undefined"?self:{},re=ge;function ge($,y,I,Q){this.cx=3*$,this.bx=3*(I-$)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*y,this.by=3*(Q-y)-this.cy,this.ay=1-this.cy-this.by,this.p1x=$,this.p1y=Q,this.p2x=I,this.p2y=Q}ge.prototype.sampleCurveX=function($){return((this.ax*$+this.bx)*$+this.cx)*$},ge.prototype.sampleCurveY=function($){return((this.ay*$+this.by)*$+this.cy)*$},ge.prototype.sampleCurveDerivativeX=function($){return(3*this.ax*$+2*this.bx)*$+this.cx},ge.prototype.solveCurveX=function($,y){var I,Q,ne,_e,Te;for(y===void 0&&(y=1e-6),ne=$,Te=0;Te<8;Te++){if(_e=this.sampleCurveX(ne)-$,Math.abs(_e)<y)return ne;var Ce=this.sampleCurveDerivativeX(ne);if(Math.abs(Ce)<1e-6)break;ne-=_e/Ce}if((ne=$)<(I=0))return I;if(ne>(Q=1))return Q;for(;I<Q;){if(_e=this.sampleCurveX(ne),Math.abs(_e-$)<y)return ne;$>_e?I=ne:Q=ne,ne=.5*(Q-I)+I}return ne},ge.prototype.solve=function($,y){return this.sampleCurveY(this.solveCurveX($,y))};var ye=we;function we($,y){this.x=$,this.y=y}we.prototype={clone:function(){return new we(this.x,this.y)},add:function($){return this.clone()._add($)},sub:function($){return this.clone()._sub($)},multByPoint:function($){return this.clone()._multByPoint($)},divByPoint:function($){return this.clone()._divByPoint($)},mult:function($){return this.clone()._mult($)},div:function($){return this.clone()._div($)},rotate:function($){return this.clone()._rotate($)},rotateAround:function($,y){return this.clone()._rotateAround($,y)},matMult:function($){return this.clone()._matMult($)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function($){return this.x===$.x&&this.y===$.y},dist:function($){return Math.sqrt(this.distSqr($))},distSqr:function($){var y=$.x-this.x,I=$.y-this.y;return y*y+I*I},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function($){return Math.atan2(this.y-$.y,this.x-$.x)},angleWith:function($){return this.angleWithSep($.x,$.y)},angleWithSep:function($,y){return Math.atan2(this.x*y-this.y*$,this.x*$+this.y*y)},_matMult:function($){var y=$[2]*this.x+$[3]*this.y;return this.x=$[0]*this.x+$[1]*this.y,this.y=y,this},_add:function($){return this.x+=$.x,this.y+=$.y,this},_sub:function($){return this.x-=$.x,this.y-=$.y,this},_mult:function($){return this.x*=$,this.y*=$,this},_div:function($){return this.x/=$,this.y/=$,this},_multByPoint:function($){return this.x*=$.x,this.y*=$.y,this},_divByPoint:function($){return this.x/=$.x,this.y/=$.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var $=this.y;return this.y=this.x,this.x=-$,this},_rotate:function($){var y=Math.cos($),I=Math.sin($),Q=I*this.x+y*this.y;return this.x=y*this.x-I*this.y,this.y=Q,this},_rotateAround:function($,y){var I=Math.cos($),Q=Math.sin($),ne=y.y+Q*(this.x-y.x)+I*(this.y-y.y);return this.x=y.x+I*(this.x-y.x)-Q*(this.y-y.y),this.y=ne,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},we.convert=function($){return $ instanceof we?$:Array.isArray($)?new we($[0],$[1]):$};const ke=Math.PI/180,Se=180/Math.PI;function Pe($){return $*ke}function Re($){return $*Se}const Ne=[[0,0],[1,0],[1,1],[0,1]];function ze($){if($<=0)return 0;if($>=1)return 1;const y=$*$,I=y*$;return 4*($<.5?I:3*($-y)+I-.75)}function Be($,y,I,Q){const ne=new re($,y,I,Q);return function(_e){return ne.solve(_e)}}const Ze=Be(.25,.1,.25,1);function Xe($,y,I){return Math.min(I,Math.max(y,$))}function qe($,y,I){return(I=Xe((I-$)/(y-$),0,1))*I*(3-2*I)}function Je($,y,I){const Q=I-y,ne=(($-y)%Q+Q)%Q+y;return ne===y?I:ne}function dt($,y,I){if(!$.length)return I(null,[]);let Q=$.length;const ne=new Array($.length);let _e=null;$.forEach((Te,Ce)=>{y(Te,($e,De)=>{$e&&(_e=$e),ne[Ce]=De,--Q==0&&I(_e,ne)})})}function Ct($){const y=[];for(const I in $)y.push($[I]);return y}function bt($,...y){for(const I of y)for(const Q in I)$[Q]=I[Q];return $}let xt=1;function nt(){return xt++}function tt(){return function $(y){return y?(y^Math.random()*(16>>y/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,$)}()}function rt($){return $<=1?1:Math.pow(2,Math.ceil(Math.log($)/Math.LN2))}function ht($){return!!$&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test($)}function st($,y){$.forEach(I=>{y[I]&&(y[I]=y[I].bind(y))})}function pt($,y){return $.indexOf(y,$.length-y.length)!==-1}function vt($,y,I){const Q={};for(const ne in $)Q[ne]=y.call(I||this,$[ne],ne,$);return Q}function ut($,y,I){const Q={};for(const ne in $)y.call(I||this,$[ne],ne,$)&&(Q[ne]=$[ne]);return Q}function Ut($){return Array.isArray($)?$.map(Ut):typeof $=="object"&&$?vt($,Ut):$}const at={};function zt($){at[$]||(typeof console!="undefined"&&console.warn($),at[$]=!0)}function sn($,y,I){return(I.y-$.y)*(y.x-$.x)>(y.y-$.y)*(I.x-$.x)}function Mn($){let y=0;for(let I,Q,ne=0,_e=$.length,Te=_e-1;ne<_e;Te=ne++)I=$[ne],Q=$[Te],y+=(Q.x-I.x)*(I.y+Q.y);return y}function rn(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function on($){const y={};if($.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(I,Q,ne,_e)=>{const Te=ne||_e;return y[Q]=!Te||Te.toLowerCase(),""}),y["max-age"]){const I=parseInt(y["max-age"],10);isNaN(I)?delete y["max-age"]:y["max-age"]=I}return y}let Zt=null;function Ot($){if(Zt==null){const y=$.navigator?$.navigator.userAgent:null;Zt=!!$.safari||!(!y||!(/\b(iPad|iPhone|iPod)\b/.test(y)||y.match("Safari")&&!y.match("Chrome")))}return Zt}function Qt($){try{const y=xe[$];return y.setItem("_mapbox_test_",1),y.removeItem("_mapbox_test_"),!0}catch{return!1}}function un($,y){return[$[4*y],$[4*y+1],$[4*y+2],$[4*y+3]]}const yn=xe.performance;function In($){const y=$?$.url.toString():void 0;return yn.getEntriesByName(y)}var It="2.10.0";let Rt,nn,xn,En;const $n={now:()=>xn!==void 0?xn:xe.performance.now(),setNow($){xn=$},restoreNow(){xn=void 0},frame($){const y=xe.requestAnimationFrame($);return{cancel:()=>xe.cancelAnimationFrame(y)}},getImageData($,y=0){const{width:I,height:Q}=$;En||(En=xe.document.createElement("canvas"));const ne=En.getContext("2d");if(!ne)throw new Error("failed to create canvas 2d context");return(I>En.width||Q>En.height)&&(En.width=I,En.height=Q),ne.clearRect(-y,-y,I+2*y,Q+2*y),ne.drawImage($,0,0,I,Q),ne.getImageData(-y,-y,I+2*y,Q+2*y)},resolveURL:$=>(Rt||(Rt=xe.document.createElement("a")),Rt.href=$,Rt.href),get devicePixelRatio(){return xe.devicePixelRatio},get prefersReducedMotion(){return!!xe.matchMedia&&(nn==null&&(nn=xe.matchMedia("(prefers-reduced-motion: reduce)")),nn.matches)}};let zn;const vn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(zn==null){const $=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{zn={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):$}catch{zn=$}}return zn},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},wn={supported:!1,testSupport:function($){!tr&&Jn&&(pr?Xn($):Sn=$)}};let Sn,Jn,tr=!1,pr=!1;function Xn($){const y=$.createTexture();$.bindTexture($.TEXTURE_2D,y);try{if($.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,Jn),$.isContextLost())return;wn.supported=!0}catch{}$.deleteTexture(y),tr=!0}xe.document&&(Jn=xe.document.createElement("img"),Jn.onload=function(){Sn&&Xn(Sn),Sn=null,pr=!0},Jn.onerror=function(){tr=!0,Sn=null},Jn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Gn="01",cn="NO_ACCESS_TOKEN";function gn($){return $.indexOf("mapbox:")===0}function On($){return vn.API_URL_REGEX.test($)}const Kn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function _r($){const y=$.match(Kn);if(!y)throw new Error("Unable to parse URL object");return{protocol:y[1],authority:y[2],path:y[3]||"/",params:y[4]?y[4].split("&"):[]}}function kr($){const y=$.params.length?`?${$.params.join("&")}`:"";return`${$.protocol}://${$.authority}${$.path}${y}`}function Dr($){if(!$)return null;const y=$.split(".");if(!y||y.length!==3)return null;try{return JSON.parse(decodeURIComponent(xe.atob(y[1]).split("").map(I=>"%"+("00"+I.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class xr{constructor(y){this.type=y,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(y){const I=Dr(vn.ACCESS_TOKEN);let Q="";return Q=I&&I.u?xe.btoa(encodeURIComponent(I.u).replace(/%([0-9A-F]{2})/g,(ne,_e)=>String.fromCharCode(Number("0x"+_e)))):vn.ACCESS_TOKEN||"",y?`mapbox.eventData.${y}:${Q}`:`mapbox.eventData:${Q}`}fetchEventData(){const y=Qt("localStorage"),I=this.getStorageKey(),Q=this.getStorageKey("uuid");if(y)try{const ne=xe.localStorage.getItem(I);ne&&(this.eventData=JSON.parse(ne));const _e=xe.localStorage.getItem(Q);_e&&(this.anonId=_e)}catch{zt("Unable to read from LocalStorage")}}saveEventData(){const y=Qt("localStorage"),I=this.getStorageKey(),Q=this.getStorageKey("uuid");if(y)try{xe.localStorage.setItem(Q,this.anonId),Object.keys(this.eventData).length>=1&&xe.localStorage.setItem(I,JSON.stringify(this.eventData))}catch{zt("Unable to write to LocalStorage")}}processRequests(y){}postEvent(y,I,Q,ne){if(!vn.EVENTS_URL)return;const _e=_r(vn.EVENTS_URL);_e.params.push(`access_token=${ne||vn.ACCESS_TOKEN||""}`);const Te={event:this.type,created:new Date(y).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:It,skuId:Gn,userId:this.anonId},Ce=I?bt(Te,I):Te,$e={url:kr(_e),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ce])};this.pendingRequest=Nn($e,De=>{this.pendingRequest=null,Q(De),this.saveEventData(),this.processRequests(ne)})}queueRequest(y,I){this.queue.push(y),this.processRequests(I)}}const Lr=new class extends xr{constructor($){super("appUserTurnstile"),this._customAccessToken=$}postTurnstileEvent($,y){vn.EVENTS_URL&&vn.ACCESS_TOKEN&&Array.isArray($)&&$.some(I=>gn(I)||On(I))&&this.queueRequest(Date.now(),y)}processRequests($){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const y=Dr(vn.ACCESS_TOKEN),I=y?y.u:vn.ACCESS_TOKEN;let Q=I!==this.eventData.tokenU;ht(this.anonId)||(this.anonId=tt(),Q=!0);const ne=this.queue.shift();if(this.eventData.lastSuccess){const _e=new Date(this.eventData.lastSuccess),Te=new Date(ne),Ce=(ne-this.eventData.lastSuccess)/864e5;Q=Q||Ce>=1||Ce<-1||_e.getDate()!==Te.getDate()}else Q=!0;Q?this.postEvent(ne,{"enabled.telemetry":!1},_e=>{_e||(this.eventData.lastSuccess=ne,this.eventData.tokenU=I)},$):this.processRequests()}},Br=Lr.postTurnstileEvent.bind(Lr),Vr=new class extends xr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent($,y,I,Q){this.skuToken=y,this.errorCb=Q,vn.EVENTS_URL&&(I||vn.ACCESS_TOKEN?this.queueRequest({id:$,timestamp:Date.now()},I):this.errorCb(new Error(cn)))}processRequests($){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:I}=this.queue.shift();y&&this.success[y]||(this.anonId||this.fetchEventData(),ht(this.anonId)||(this.anonId=tt()),this.postEvent(I,{skuToken:this.skuToken},Q=>{Q?this.errorCb(Q):y&&(this.success[y]=!0)},$))}},jr=Vr.postMapLoadEvent.bind(Vr),Oi=new class extends xr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession($,y,I,Q){if(!vn.API_URL||!vn.SESSION_PATH)return;const ne=_r(vn.API_URL+vn.SESSION_PATH);ne.params.push(`sku=${y||""}`),ne.params.push(`access_token=${Q||vn.ACCESS_TOKEN||""}`);const _e={url:kr(ne),headers:{"Content-Type":"text/plain"}};this.pendingRequest=ar(_e,Te=>{this.pendingRequest=null,I(Te),this.saveEventData(),this.processRequests(Q)})}getSessionAPI($,y,I,Q){this.skuToken=y,this.errorCb=Q,vn.SESSION_PATH&&vn.API_URL&&(I||vn.ACCESS_TOKEN?this.queueRequest({id:$,timestamp:Date.now()},I):this.errorCb(new Error(cn)))}processRequests($){if(this.pendingRequest||this.queue.length===0)return;const{id:y,timestamp:I}=this.queue.shift();y&&this.success[y]||this.getSession(I,this.skuToken,Q=>{Q?this.errorCb(Q):y&&(this.success[y]=!0)},$)}},Di=Oi.getSessionAPI.bind(Oi),Ti=new Set;let Sr,Fo=500,Ea=50,vi={};function sa($){const y=ft($);let I,Q;y&&y.forEach(_e=>{const Te=_e.split("=");Te[0]==="language"?I=Te[1]:Te[0]==="worldview"&&(Q=Te[1])});let ne="mapbox-tiles";return I&&(ne+=`-${I}`),Q&&(ne+=`-${Q}`),ne}function Lt(){try{return xe.caches}catch{}}function lt($){const y=Lt();y&&!vi[$]&&(vi[$]=y.open($))}function ft($){const y=$.indexOf("?");return y>0?$.slice(y+1).split("&"):[]}function Dt($){const y=$.indexOf("?");if(y<0)return $;const I=ft($).filter(Q=>{const ne=Q.split("=");return ne[0]==="language"||ne[0]==="worldview"});return I.length?`${$.slice(0,y)}?${I.join("&")}`:$.slice(0,y)}let jt=1/0;const en={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(en);class pn extends Error{constructor(y,I,Q){I===401&&On(Q)&&(y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(y),this.status=I,this.url=Q}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const hn=rn()?()=>self.worker&&self.worker.referrer:()=>(xe.location.protocol==="blob:"?xe.parent:xe).location.href,tn=function($,y){if(!(/^file:/.test(I=$.url)||/^file:/.test(hn())&&!/^\w+:/.test(I))){if(xe.fetch&&xe.Request&&xe.AbortController&&xe.Request.prototype.hasOwnProperty("signal"))return function(Q,ne){const _e=new xe.AbortController,Te=new xe.Request(Q.url,{method:Q.method||"GET",body:Q.body,credentials:Q.credentials,headers:Q.headers,referrer:hn(),signal:_e.signal});let Ce=!1,$e=!1;const De=(Ue=Te.url).indexOf("sku=")>0&&On(Ue);var Ue;Q.type==="json"&&Te.headers.set("Accept","application/json");const He=(et,it,_t)=>{if($e)return;if(et&&et.message!=="SecurityError"&&zt(et),it&&_t)return We(it);const Et=Date.now();xe.fetch(Te).then(Bt=>{if(Bt.ok){const qt=De?Bt.clone():null;return We(Bt,qt,Et)}return ne(new pn(Bt.statusText,Bt.status,Q.url))}).catch(Bt=>{Bt.code!==20&&ne(new Error(Bt.message))})},We=(et,it,_t)=>{(Q.type==="arrayBuffer"?et.arrayBuffer():Q.type==="json"?et.json():et.text()).then(Et=>{$e||(it&&_t&&function(Bt,qt,Ft){const Gt=sa(Bt.url);if(lt(Gt),!vi[Gt])return;const Jt={status:qt.status,statusText:qt.statusText,headers:new xe.Headers};qt.headers.forEach((bn,Pn)=>Jt.headers.set(Pn,bn));const Wt=on(qt.headers.get("Cache-Control")||"");if(Wt["no-store"])return;Wt["max-age"]&&Jt.headers.set("Expires",new Date(Ft+1e3*Wt["max-age"]).toUTCString());const Tn=Jt.headers.get("Expires");Tn&&(new Date(Tn).getTime()-Ft<42e4||function(bn,Pn){if(Sr===void 0)try{new Response(new ReadableStream),Sr=!0}catch{Sr=!1}Sr?Pn(bn.body):bn.blob().then(Pn)}(qt,bn=>{const Pn=new xe.Response(bn,Jt);lt(Gt),vi[Gt]&&vi[Gt].then(Yn=>Yn.put(Dt(Bt.url),Pn)).catch(Yn=>zt(Yn.message))}))}(Te,it,_t),Ce=!0,ne(null,Et,et.headers.get("Cache-Control"),et.headers.get("Expires")))}).catch(Et=>{$e||ne(new Error(Et.message))})};return De?function(et,it){const _t=sa(et.url);if(lt(_t),!vi[_t])return it(null);const Et=Dt(et.url);vi[_t].then(Bt=>{Bt.match(Et).then(qt=>{const Ft=function(Gt){if(!Gt)return!1;const Jt=new Date(Gt.headers.get("Expires")||0),Wt=on(Gt.headers.get("Cache-Control")||"");return Jt>Date.now()&&!Wt["no-cache"]}(qt);Bt.delete(Et),Ft&&Bt.put(Et,qt.clone()),it(null,qt,Ft)}).catch(it)}).catch(it)}(Te,He):He(null,null),{cancel:()=>{$e=!0,Ce||_e.abort()}}}($,y);if(rn()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",$,y,void 0,!0)}var I;return function(Q,ne){const _e=new xe.XMLHttpRequest;_e.open(Q.method||"GET",Q.url,!0),Q.type==="arrayBuffer"&&(_e.responseType="arraybuffer");for(const Te in Q.headers)_e.setRequestHeader(Te,Q.headers[Te]);return Q.type==="json"&&(_e.responseType="text",_e.setRequestHeader("Accept","application/json")),_e.withCredentials=Q.credentials==="include",_e.onerror=()=>{ne(new Error(_e.statusText))},_e.onload=()=>{if((_e.status>=200&&_e.status<300||_e.status===0)&&_e.response!==null){let Te=_e.response;if(Q.type==="json")try{Te=JSON.parse(_e.response)}catch(Ce){return ne(Ce)}ne(null,Te,_e.getResponseHeader("Cache-Control"),_e.getResponseHeader("Expires"))}else ne(new pn(_e.statusText,_e.status,Q.url))},_e.send(Q.body),{cancel:()=>_e.abort()}}($,y)},fn=function($,y){return tn(bt($,{type:"arrayBuffer"}),y)},Nn=function($,y){return tn(bt($,{method:"POST"}),y)},ar=function($,y){return tn(bt($,{method:"GET"}),y)};function qn($){const y=xe.document.createElement("a");return y.href=$,y.protocol===xe.document.location.protocol&&y.host===xe.document.location.host}const br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let wr,mr;wr=[],mr=0;const Er=function($,y){if(wn.supported&&($.headers||($.headers={}),$.headers.accept="image/webp,*/*"),mr>=vn.MAX_PARALLEL_IMAGE_REQUESTS){const _e={requestParameters:$,callback:y,cancelled:!1,cancel(){this.cancelled=!0}};return wr.push(_e),_e}mr++;let I=!1;const Q=()=>{if(!I)for(I=!0,mr--;wr.length&&mr<vn.MAX_PARALLEL_IMAGE_REQUESTS;){const _e=wr.shift(),{requestParameters:Te,callback:Ce,cancelled:$e}=_e;$e||(_e.cancel=Er(Te,Ce).cancel)}},ne=fn($,(_e,Te,Ce,$e)=>{Q(),_e?y(_e):Te&&(xe.createImageBitmap?function(De,Ue){const He=new xe.Blob([new Uint8Array(De)],{type:"image/png"});xe.createImageBitmap(He).then(We=>{Ue(null,We)}).catch(We=>{Ue(new Error(`Could not load image because of ${We.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(Te,(De,Ue)=>y(De,Ue,Ce,$e)):function(De,Ue){const He=new xe.Image,We=xe.URL;He.onload=()=>{Ue(null,He),We.revokeObjectURL(He.src),He.onload=null,xe.requestAnimationFrame(()=>{He.src=br})},He.onerror=()=>Ue(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const et=new xe.Blob([new Uint8Array(De)],{type:"image/png"});He.src=De.byteLength?We.createObjectURL(et):br}(Te,(De,Ue)=>y(De,Ue,Ce,$e)))});return{cancel:()=>{ne.cancel(),Q()}}};function zr($,y,I){I[$]&&I[$].indexOf(y)!==-1||(I[$]=I[$]||[],I[$].push(y))}function Qr($,y,I){if(I&&I[$]){const Q=I[$].indexOf(y);Q!==-1&&I[$].splice(Q,1)}}class oi{constructor(y,I={}){bt(this,I),this.type=y}}class ti extends oi{constructor(y,I={}){super("error",bt({error:y},I))}}class vr{on(y,I){return this._listeners=this._listeners||{},zr(y,I,this._listeners),this}off(y,I){return Qr(y,I,this._listeners),Qr(y,I,this._oneTimeListeners),this}once(y,I){return I?(this._oneTimeListeners=this._oneTimeListeners||{},zr(y,I,this._oneTimeListeners),this):new Promise(Q=>this.once(y,Q))}fire(y,I){typeof y=="string"&&(y=new oi(y,I||{}));const Q=y.type;if(this.listens(Q)){y.target=this;const ne=this._listeners&&this._listeners[Q]?this._listeners[Q].slice():[];for(const Ce of ne)Ce.call(this,y);const _e=this._oneTimeListeners&&this._oneTimeListeners[Q]?this._oneTimeListeners[Q].slice():[];for(const Ce of _e)Qr(Q,Ce,this._oneTimeListeners),Ce.call(this,y);const Te=this._eventedParent;Te&&(bt(y,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Te.fire(y))}else y instanceof ti&&console.error(y.error);return this}listens(y){return!!(this._listeners&&this._listeners[y]&&this._listeners[y].length>0||this._oneTimeListeners&&this._oneTimeListeners[y]&&this._oneTimeListeners[y].length>0||this._eventedParent&&this._eventedParent.listens(y))}setEventedParent(y,I){return this._eventedParent=y,this._eventedParentData=I,this}}var mn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function po($,...y){for(const I of y)for(const Q in I)$[Q]=I[Q];return $}function Ai($){return $ instanceof Number||$ instanceof String||$ instanceof Boolean?$.valueOf():$}function la($){if(Array.isArray($))return $.map(la);if($ instanceof Object&&!($ instanceof Number||$ instanceof String||$ instanceof Boolean)){const y={};for(const I in $)y[I]=la($[I]);return y}return Ai($)}class Ta extends Error{constructor(y,I){super(I),this.message=I,this.key=y}}var Io=Ta;class hl{constructor(y,I=[]){this.parent=y,this.bindings={};for(const[Q,ne]of I)this.bindings[Q]=ne}concat(y){return new hl(this,y)}get(y){if(this.bindings[y])return this.bindings[y];if(this.parent)return this.parent.get(y);throw new Error(`${y} not found in scope.`)}has(y){return!!this.bindings[y]||!!this.parent&&this.parent.has(y)}}var Ku=hl;const ca={kind:"null"},sr={kind:"number"},Pr={kind:"string"},Fr={kind:"boolean"},Po={kind:"color"},Oo={kind:"object"},Ir={kind:"value"},Ts={kind:"collator"},ua={kind:"formatted"},As={kind:"resolvedImage"};function fo($,y){return{kind:"array",itemType:$,N:y}}function xi($){if($.kind==="array"){const y=xi($.itemType);return typeof $.N=="number"?`array<${y}, ${$.N}>`:$.itemType.kind==="value"?"array":`array<${y}>`}return $.kind}const Yc=[ca,sr,Pr,Fr,Po,ua,Oo,fo(Ir),As];function Za($,y){if(y.kind==="error")return null;if($.kind==="array"){if(y.kind==="array"&&(y.N===0&&y.itemType.kind==="value"||!Za($.itemType,y.itemType))&&(typeof $.N!="number"||$.N===y.N))return null}else{if($.kind===y.kind)return null;if($.kind==="value"){for(const I of Yc)if(!Za(I,y))return null}}return`Expected ${xi($)} but found ${xi(y)} instead.`}function dl($,y){return y.some(I=>I.kind===$.kind)}function ha($,y){return y.some(I=>I==="null"?$===null:I==="array"?Array.isArray($):I==="object"?$&&!Array.isArray($)&&typeof $=="object":I===typeof $)}function rc($){var y={exports:{}};return $(y,y.exports),y.exports}var da=rc(function($,y){var I={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Q(Ce){return(Ce=Math.round(Ce))<0?0:Ce>255?255:Ce}function ne(Ce){return Q(Ce[Ce.length-1]==="%"?parseFloat(Ce)/100*255:parseInt(Ce))}function _e(Ce){return($e=Ce[Ce.length-1]==="%"?parseFloat(Ce)/100:parseFloat(Ce))<0?0:$e>1?1:$e;var $e}function Te(Ce,$e,De){return De<0?De+=1:De>1&&(De-=1),6*De<1?Ce+($e-Ce)*De*6:2*De<1?$e:3*De<2?Ce+($e-Ce)*(2/3-De)*6:Ce}try{y.parseCSSColor=function(Ce){var $e,De=Ce.replace(/ /g,"").toLowerCase();if(De in I)return I[De].slice();if(De[0]==="#")return De.length===4?($e=parseInt(De.substr(1),16))>=0&&$e<=4095?[(3840&$e)>>4|(3840&$e)>>8,240&$e|(240&$e)>>4,15&$e|(15&$e)<<4,1]:null:De.length===7&&($e=parseInt(De.substr(1),16))>=0&&$e<=16777215?[(16711680&$e)>>16,(65280&$e)>>8,255&$e,1]:null;var Ue=De.indexOf("("),He=De.indexOf(")");if(Ue!==-1&&He+1===De.length){var We=De.substr(0,Ue),et=De.substr(Ue+1,He-(Ue+1)).split(","),it=1;switch(We){case"rgba":if(et.length!==4)return null;it=_e(et.pop());case"rgb":return et.length!==3?null:[ne(et[0]),ne(et[1]),ne(et[2]),it];case"hsla":if(et.length!==4)return null;it=_e(et.pop());case"hsl":if(et.length!==3)return null;var _t=(parseFloat(et[0])%360+360)%360/360,Et=_e(et[1]),Bt=_e(et[2]),qt=Bt<=.5?Bt*(Et+1):Bt+Et-Bt*Et,Ft=2*Bt-qt;return[Q(255*Te(Ft,qt,_t+1/3)),Q(255*Te(Ft,qt,_t)),Q(255*Te(Ft,qt,_t-1/3)),it];default:return null}}return null}}catch{}});class Zi{constructor(y,I,Q,ne=1){this.r=y,this.g=I,this.b=Q,this.a=ne}static parse(y){if(!y)return;if(y instanceof Zi)return y;if(typeof y!="string")return;const I=da.parseCSSColor(y);return I?new Zi(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3]):void 0}toString(){const[y,I,Q,ne]=this.toArray();return`rgba(${Math.round(y)},${Math.round(I)},${Math.round(Q)},${ne})`}toArray(){const{r:y,g:I,b:Q,a:ne}=this;return ne===0?[0,0,0,0]:[255*y/ne,255*I/ne,255*Q/ne,ne]}toArray01(){const{r:y,g:I,b:Q,a:ne}=this;return ne===0?[0,0,0,0]:[y/ne,I/ne,Q/ne,ne]}toArray01PremultipliedAlpha(){const{r:y,g:I,b:Q,a:ne}=this;return[y,I,Q,ne]}}Zi.black=new Zi(0,0,0,1),Zi.white=new Zi(1,1,1,1),Zi.transparent=new Zi(0,0,0,0),Zi.red=new Zi(1,0,0,1),Zi.blue=new Zi(0,0,1,1);var ri=Zi;class ic{constructor(y,I,Q){this.sensitivity=y?I?"variant":"case":I?"accent":"base",this.locale=Q,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(y,I){return this.collator.compare(y,I)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ks{constructor(y,I,Q,ne,_e){this.text=y.normalize?y.normalize():y,this.image=I,this.scale=Q,this.fontStack=ne,this.textColor=_e}}class oo{constructor(y){this.sections=y}static fromString(y){return new oo([new ks(y,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(y=>y.text.length!==0||y.image&&y.image.name.length!==0)}static factory(y){return y instanceof oo?y:oo.fromString(y)}toString(){return this.sections.length===0?"":this.sections.map(y=>y.text).join("")}serialize(){const y=["format"];for(const I of this.sections){if(I.image){y.push(["image",I.image.name]);continue}y.push(I.text);const Q={};I.fontStack&&(Q["text-font"]=["literal",I.fontStack.split(",")]),I.scale&&(Q["font-scale"]=I.scale),I.textColor&&(Q["text-color"]=["rgba"].concat(I.textColor.toArray())),y.push(Q)}return y}}class ao{constructor(y){this.name=y.name,this.available=y.available}toString(){return this.name}static fromString(y){return y?new ao({name:y,available:!1}):null}serialize(){return["image",this.name]}}function oc($,y,I,Q){return typeof $=="number"&&$>=0&&$<=255&&typeof y=="number"&&y>=0&&y<=255&&typeof I=="number"&&I>=0&&I<=255?Q===void 0||typeof Q=="number"&&Q>=0&&Q<=1?null:`Invalid rgba value [${[$,y,I,Q].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof Q=="number"?[$,y,I,Q]:[$,y,I]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function pa($){if($===null||typeof $=="string"||typeof $=="boolean"||typeof $=="number"||$ instanceof ri||$ instanceof ic||$ instanceof oo||$ instanceof ao)return!0;if(Array.isArray($)){for(const y of $)if(!pa(y))return!1;return!0}if(typeof $=="object"){for(const y in $)if(!pa($[y]))return!1;return!0}return!1}function Pi($){if($===null)return ca;if(typeof $=="string")return Pr;if(typeof $=="boolean")return Fr;if(typeof $=="number")return sr;if($ instanceof ri)return Po;if($ instanceof ic)return Ts;if($ instanceof oo)return ua;if($ instanceof ao)return As;if(Array.isArray($)){const y=$.length;let I;for(const Q of $){const ne=Pi(Q);if(I){if(I===ne)continue;I=Ir;break}I=ne}return fo(I||Ir,y)}return Oo}function Ss($){const y=typeof $;return $===null?"":y==="string"||y==="number"||y==="boolean"?String($):$ instanceof ri||$ instanceof oo||$ instanceof ao?$.toString():JSON.stringify($)}class Cs{constructor(y,I){this.type=y,this.value=I}static parse(y,I){if(y.length!==2)return I.error(`'literal' expression requires exactly one argument, but found ${y.length-1} instead.`);if(!pa(y[1]))return I.error("invalid value");const Q=y[1];let ne=Pi(Q);const _e=I.expectedType;return ne.kind!=="array"||ne.N!==0||!_e||_e.kind!=="array"||typeof _e.N=="number"&&_e.N!==0||(ne=_e),new Cs(ne,Q)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ri?["rgba"].concat(this.value.toArray()):this.value instanceof oo?this.value.serialize():this.value}}var Ms=Cs,ji=class{constructor($){this.name="ExpressionEvaluationError",this.message=$}toJSON(){return this.message}};const Is={string:Pr,number:sr,boolean:Fr,object:Oo};class Ps{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");let Q,ne=1;const _e=y[0];if(_e==="array"){let Ce,$e;if(y.length>2){const De=y[1];if(typeof De!="string"||!(De in Is)||De==="object")return I.error('The item type argument of "array" must be one of string, number, boolean',1);Ce=Is[De],ne++}else Ce=Ir;if(y.length>3){if(y[2]!==null&&(typeof y[2]!="number"||y[2]<0||y[2]!==Math.floor(y[2])))return I.error('The length argument to "array" must be a positive integer literal',2);$e=y[2],ne++}Q=fo(Ce,$e)}else Q=Is[_e];const Te=[];for(;ne<y.length;ne++){const Ce=I.parse(y[ne],ne,Ir);if(!Ce)return null;Te.push(Ce)}return new Ps(Q,Te)}evaluate(y){for(let I=0;I<this.args.length;I++){const Q=this.args[I].evaluate(y);if(!Za(this.type,Pi(Q)))return Q;if(I===this.args.length-1)throw new ji(`Expected value to be of type ${xi(this.type)}, but found ${xi(Pi(Q))} instead.`)}return null}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=this.type,I=[y.kind];if(y.kind==="array"){const Q=y.itemType;if(Q.kind==="string"||Q.kind==="number"||Q.kind==="boolean"){I.push(Q.kind);const ne=y.N;(typeof ne=="number"||this.args.length>1)&&I.push(ne)}}return I.concat(this.args.map(Q=>Q.serialize()))}}var yo=Ps;class Os{constructor(y){this.type=ua,this.sections=y}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");const Q=y[1];if(!Array.isArray(Q)&&typeof Q=="object")return I.error("First argument must be an image or text section.");const ne=[];let _e=!1;for(let Te=1;Te<=y.length-1;++Te){const Ce=y[Te];if(_e&&typeof Ce=="object"&&!Array.isArray(Ce)){_e=!1;let $e=null;if(Ce["font-scale"]&&($e=I.parse(Ce["font-scale"],1,sr),!$e))return null;let De=null;if(Ce["text-font"]&&(De=I.parse(Ce["text-font"],1,fo(Pr)),!De))return null;let Ue=null;if(Ce["text-color"]&&(Ue=I.parse(Ce["text-color"],1,Po),!Ue))return null;const He=ne[ne.length-1];He.scale=$e,He.font=De,He.textColor=Ue}else{const $e=I.parse(y[Te],1,Ir);if(!$e)return null;const De=$e.type.kind;if(De!=="string"&&De!=="value"&&De!=="null"&&De!=="resolvedImage")return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_e=!0,ne.push({content:$e,scale:null,font:null,textColor:null})}}return new Os(ne)}evaluate(y){return new oo(this.sections.map(I=>{const Q=I.content.evaluate(y);return Pi(Q)===As?new ks("",Q,null,null,null):new ks(Ss(Q),null,I.scale?I.scale.evaluate(y):null,I.font?I.font.evaluate(y).join(","):null,I.textColor?I.textColor.evaluate(y):null)}))}eachChild(y){for(const I of this.sections)y(I.content),I.scale&&y(I.scale),I.font&&y(I.font),I.textColor&&y(I.textColor)}outputDefined(){return!1}serialize(){const y=["format"];for(const I of this.sections){y.push(I.content.serialize());const Q={};I.scale&&(Q["font-scale"]=I.scale.serialize()),I.font&&(Q["text-font"]=I.font.serialize()),I.textColor&&(Q["text-color"]=I.textColor.serialize()),y.push(Q)}return y}}class pl{constructor(y){this.type=As,this.input=y}static parse(y,I){if(y.length!==2)return I.error("Expected two arguments.");const Q=I.parse(y[1],1,Pr);return Q?new pl(Q):I.error("No image name provided.")}evaluate(y){const I=this.input.evaluate(y),Q=ao.fromString(I);return Q&&y.availableImages&&(Q.available=y.availableImages.indexOf(I)>-1),Q}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Yu={"to-boolean":Fr,"to-color":Po,"to-number":sr,"to-string":Pr};class ac{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expected at least one argument.");const Q=y[0];if((Q==="to-boolean"||Q==="to-string")&&y.length!==2)return I.error("Expected one argument.");const ne=Yu[Q],_e=[];for(let Te=1;Te<y.length;Te++){const Ce=I.parse(y[Te],Te,Ir);if(!Ce)return null;_e.push(Ce)}return new ac(ne,_e)}evaluate(y){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(y));if(this.type.kind==="color"){let I,Q;for(const ne of this.args){if(I=ne.evaluate(y),Q=null,I instanceof ri)return I;if(typeof I=="string"){const _e=y.parseColor(I);if(_e)return _e}else if(Array.isArray(I)&&(Q=I.length<3||I.length>4?`Invalid rbga value ${JSON.stringify(I)}: expected an array containing either three or four numeric values.`:oc(I[0],I[1],I[2],I[3]),!Q))return new ri(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new ji(Q||`Could not parse color from value '${typeof I=="string"?I:String(JSON.stringify(I))}'`)}if(this.type.kind==="number"){let I=null;for(const Q of this.args){if(I=Q.evaluate(y),I===null)return 0;const ne=Number(I);if(!isNaN(ne))return ne}throw new ji(`Could not convert ${JSON.stringify(I)} to number.`)}return this.type.kind==="formatted"?oo.fromString(Ss(this.args[0].evaluate(y))):this.type.kind==="resolvedImage"?ao.fromString(Ss(this.args[0].evaluate(y))):Ss(this.args[0].evaluate(y))}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Os([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new pl(this.args[0]).serialize();const y=[`to-${this.type.kind}`];return this.eachChild(I=>{y.push(I.serialize())}),y}}var Aa=ac;const Ju=["Unknown","Point","LineString","Polygon"];var Jc=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ju[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const $=this.featureDistanceData.center,y=this.featureDistanceData.scale,{x:I,y:Q}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(I*y-$[0])+this.featureDistanceData.bearing[1]*(Q*y-$[1])}return 0}parseColor($){let y=this._parseColorCache[$];return y||(y=this._parseColorCache[$]=ri.parse($)),y}};class ka{constructor(y,I,Q,ne){this.name=y,this.type=I,this._evaluate=Q,this.args=ne}evaluate(y){return this._evaluate(y,this.args)}eachChild(y){this.args.forEach(y)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(y=>y.serialize()))}static parse(y,I){const Q=y[0],ne=ka.definitions[Q];if(!ne)return I.error(`Unknown expression "${Q}". If you wanted a literal array, use ["literal", [...]].`,0);const _e=Array.isArray(ne)?ne[0]:ne.type,Te=Array.isArray(ne)?[[ne[1],ne[2]]]:ne.overloads,Ce=Te.filter(([De])=>!Array.isArray(De)||De.length===y.length-1);let $e=null;for(const[De,Ue]of Ce){$e=new Ca(I.registry,I.path,null,I.scope);const He=[];let We=!1;for(let et=1;et<y.length;et++){const it=y[et],_t=Array.isArray(De)?De[et-1]:De.type,Et=$e.parse(it,1+He.length,_t);if(!Et){We=!0;break}He.push(Et)}if(!We)if(Array.isArray(De)&&De.length!==He.length)$e.error(`Expected ${De.length} arguments, but found ${He.length} instead.`);else{for(let et=0;et<He.length;et++){const it=Array.isArray(De)?De[et]:De.type,_t=He[et];$e.concat(et+1).checkSubtype(it,_t.type)}if($e.errors.length===0)return new ka(Q,_e,Ue,He)}}if(Ce.length===1)I.errors.push(...$e.errors);else{const De=(Ce.length?Ce:Te).map(([He])=>{return We=He,Array.isArray(We)?`(${We.map(xi).join(", ")})`:`(${xi(We.type)}...)`;var We}).join(" | "),Ue=[];for(let He=1;He<y.length;He++){const We=I.parse(y[He],1+Ue.length);if(!We)return null;Ue.push(xi(We.type))}I.error(`Expected arguments of type ${De}, but found (${Ue.join(", ")}) instead.`)}return null}static register(y,I){ka.definitions=I;for(const Q in I)y[Q]=ka}}var so=ka;class fl{constructor(y,I,Q){this.type=Ts,this.locale=Q,this.caseSensitive=y,this.diacriticSensitive=I}static parse(y,I){if(y.length!==2)return I.error("Expected one argument.");const Q=y[1];if(typeof Q!="object"||Array.isArray(Q))return I.error("Collator options argument must be an object.");const ne=I.parse(Q["case-sensitive"]!==void 0&&Q["case-sensitive"],1,Fr);if(!ne)return null;const _e=I.parse(Q["diacritic-sensitive"]!==void 0&&Q["diacritic-sensitive"],1,Fr);if(!_e)return null;let Te=null;return Q.locale&&(Te=I.parse(Q.locale,1,Pr),!Te)?null:new fl(ne,_e,Te)}evaluate(y){return new ic(this.caseSensitive.evaluate(y),this.diacriticSensitive.evaluate(y),this.locale?this.locale.evaluate(y):null)}eachChild(y){y(this.caseSensitive),y(this.diacriticSensitive),this.locale&&y(this.locale)}outputDefined(){return!1}serialize(){const y={};return y["case-sensitive"]=this.caseSensitive.serialize(),y["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(y.locale=this.locale.serialize()),["collator",y]}}const Ro=8192;function sc($,y){$[0]=Math.min($[0],y[0]),$[1]=Math.min($[1],y[1]),$[2]=Math.max($[2],y[0]),$[3]=Math.max($[3],y[1])}function _l($,y){return!($[0]<=y[0]||$[2]>=y[2]||$[1]<=y[1]||$[3]>=y[3])}function Qu($,y){const I=(180+$[0])/360,Q=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+$[1]*Math.PI/360)))/360,ne=Math.pow(2,y.z);return[Math.round(I*ne*Ro),Math.round(Q*ne*Ro)]}function Rs($,y,I){const Q=$[0]-y[0],ne=$[1]-y[1],_e=$[0]-I[0],Te=$[1]-I[1];return Q*Te-_e*ne==0&&Q*_e<=0&&ne*Te<=0}function ml($,y){let I=!1;for(let Te=0,Ce=y.length;Te<Ce;Te++){const $e=y[Te];for(let De=0,Ue=$e.length;De<Ue-1;De++){if(Rs($,$e[De],$e[De+1]))return!1;(ne=$e[De])[1]>(Q=$)[1]!=(_e=$e[De+1])[1]>Q[1]&&Q[0]<(_e[0]-ne[0])*(Q[1]-ne[1])/(_e[1]-ne[1])+ne[0]&&(I=!I)}}var Q,ne,_e;return I}function $s($,y){for(let I=0;I<y.length;I++)if(ml($,y[I]))return!0;return!1}function Qc($,y,I,Q){const ne=Q[0]-I[0],_e=Q[1]-I[1],Te=($[0]-I[0])*_e-ne*($[1]-I[1]),Ce=(y[0]-I[0])*_e-ne*(y[1]-I[1]);return Te>0&&Ce<0||Te<0&&Ce>0}function eh($,y,I){for(const De of I)for(let Ue=0;Ue<De.length-1;++Ue)if((Ce=[(Te=De[Ue+1])[0]-(_e=De[Ue])[0],Te[1]-_e[1]])[0]*($e=[(ne=y)[0]-(Q=$)[0],ne[1]-Q[1]])[1]-Ce[1]*$e[0]!=0&&Qc(Q,ne,_e,Te)&&Qc(_e,Te,Q,ne))return!0;var Q,ne,_e,Te,Ce,$e;return!1}function eu($,y){for(let I=0;I<$.length;++I)if(!ml($[I],y))return!1;for(let I=0;I<$.length-1;++I)if(eh($[I],$[I+1],y))return!1;return!0}function th($,y){for(let I=0;I<y.length;I++)if(eu($,y[I]))return!0;return!1}function vo($,y,I){const Q=[];for(let ne=0;ne<$.length;ne++){const _e=[];for(let Te=0;Te<$[ne].length;Te++){const Ce=Qu($[ne][Te],I);sc(y,Ce),_e.push(Ce)}Q.push(_e)}return Q}function Sa($,y,I){const Q=[];for(let ne=0;ne<$.length;ne++){const _e=vo($[ne],y,I);Q.push(_e)}return Q}function lc($,y,I,Q){if($[0]<I[0]||$[0]>I[2]){const ne=.5*Q;let _e=$[0]-I[0]>ne?-Q:I[0]-$[0]>ne?Q:0;_e===0&&(_e=$[0]-I[2]>ne?-Q:I[2]-$[0]>ne?Q:0),$[0]+=_e}sc(y,$)}function gl($,y,I,Q){const ne=Math.pow(2,Q.z)*Ro,_e=[Q.x*Ro,Q.y*Ro],Te=[];if(!$)return Te;for(const Ce of $)for(const $e of Ce){const De=[$e.x+_e[0],$e.y+_e[1]];lc(De,y,I,ne),Te.push(De)}return Te}function cc($,y,I,Q){const ne=Math.pow(2,Q.z)*Ro,_e=[Q.x*Ro,Q.y*Ro],Te=[];if(!$)return Te;for(const $e of $){const De=[];for(const Ue of $e){const He=[Ue.x+_e[0],Ue.y+_e[1]];sc(y,He),De.push(He)}Te.push(De)}if(y[2]-y[0]<=ne/2){(Ce=y)[0]=Ce[1]=1/0,Ce[2]=Ce[3]=-1/0;for(const $e of Te)for(const De of $e)lc(De,y,I,ne)}var Ce;return Te}class Xa{constructor(y,I){this.type=Fr,this.geojson=y,this.geometries=I}static parse(y,I){if(y.length!==2)return I.error(`'within' expression requires exactly one argument, but found ${y.length-1} instead.`);if(pa(y[1])){const Q=y[1];if(Q.type==="FeatureCollection")for(let ne=0;ne<Q.features.length;++ne){const _e=Q.features[ne].geometry.type;if(_e==="Polygon"||_e==="MultiPolygon")return new Xa(Q,Q.features[ne].geometry)}else if(Q.type==="Feature"){const ne=Q.geometry.type;if(ne==="Polygon"||ne==="MultiPolygon")return new Xa(Q,Q.geometry)}else if(Q.type==="Polygon"||Q.type==="MultiPolygon")return new Xa(Q,Q)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(y){if(y.geometry()!=null&&y.canonicalID()!=null){if(y.geometryType()==="Point")return function(I,Q){const ne=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Te=I.canonicalID();if(!Te)return!1;if(Q.type==="Polygon"){const Ce=vo(Q.coordinates,_e,Te),$e=gl(I.geometry(),ne,_e,Te);if(!_l(ne,_e))return!1;for(const De of $e)if(!ml(De,Ce))return!1}if(Q.type==="MultiPolygon"){const Ce=Sa(Q.coordinates,_e,Te),$e=gl(I.geometry(),ne,_e,Te);if(!_l(ne,_e))return!1;for(const De of $e)if(!$s(De,Ce))return!1}return!0}(y,this.geometries);if(y.geometryType()==="LineString")return function(I,Q){const ne=[1/0,1/0,-1/0,-1/0],_e=[1/0,1/0,-1/0,-1/0],Te=I.canonicalID();if(!Te)return!1;if(Q.type==="Polygon"){const Ce=vo(Q.coordinates,_e,Te),$e=cc(I.geometry(),ne,_e,Te);if(!_l(ne,_e))return!1;for(const De of $e)if(!eu(De,Ce))return!1}if(Q.type==="MultiPolygon"){const Ce=Sa(Q.coordinates,_e,Te),$e=cc(I.geometry(),ne,_e,Te);if(!_l(ne,_e))return!1;for(const De of $e)if(!th(De,Ce))return!1}return!0}(y,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var yl=Xa;function No($){if($ instanceof so&&($.name==="get"&&$.args.length===1||$.name==="feature-state"||$.name==="has"&&$.args.length===1||$.name==="properties"||$.name==="geometry-type"||$.name==="id"||/^filter-/.test($.name))||$ instanceof yl)return!1;let y=!0;return $.eachChild(I=>{y&&!No(I)&&(y=!1)}),y}function fa($){if($ instanceof so&&$.name==="feature-state")return!1;let y=!0;return $.eachChild(I=>{y&&!fa(I)&&(y=!1)}),y}function jo($,y){if($ instanceof so&&y.indexOf($.name)>=0)return!1;let I=!0;return $.eachChild(Q=>{I&&!jo(Q,y)&&(I=!1)}),I}class vl{constructor(y,I){this.type=I.type,this.name=y,this.boundExpression=I}static parse(y,I){if(y.length!==2||typeof y[1]!="string")return I.error("'var' expression requires exactly one string literal argument.");const Q=y[1];return I.scope.has(Q)?new vl(Q,I.scope.get(Q)):I.error(`Unknown variable "${Q}". Make sure "${Q}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(y){return this.boundExpression.evaluate(y)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var zs=vl;class xl{constructor(y,I=[],Q,ne=new Ku,_e=[]){this.registry=y,this.path=I,this.key=I.map(Te=>`[${Te}]`).join(""),this.scope=ne,this.errors=_e,this.expectedType=Q}parse(y,I,Q,ne,_e={}){return I?this.concat(I,Q,ne)._parse(y,_e):this._parse(y,_e)}_parse(y,I){function Q(ne,_e,Te){return Te==="assert"?new yo(_e,[ne]):Te==="coerce"?new Aa(_e,[ne]):ne}if(y!==null&&typeof y!="string"&&typeof y!="boolean"&&typeof y!="number"||(y=["literal",y]),Array.isArray(y)){if(y.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ne=y[0];if(typeof ne!="string")return this.error(`Expression name must be a string, but found ${typeof ne} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _e=this.registry[ne];if(_e){let Te=_e.parse(y,this);if(!Te)return null;if(this.expectedType){const Ce=this.expectedType,$e=Te.type;if(Ce.kind!=="string"&&Ce.kind!=="number"&&Ce.kind!=="boolean"&&Ce.kind!=="object"&&Ce.kind!=="array"||$e.kind!=="value")if(Ce.kind!=="color"&&Ce.kind!=="formatted"&&Ce.kind!=="resolvedImage"||$e.kind!=="value"&&$e.kind!=="string"){if(this.checkSubtype(Ce,$e))return null}else Te=Q(Te,Ce,I.typeAnnotation||"coerce");else Te=Q(Te,Ce,I.typeAnnotation||"assert")}if(!(Te instanceof Ms)&&Te.type.kind!=="resolvedImage"&&Kr(Te)){const Ce=new Jc;try{Te=new Ms(Te.type,Te.evaluate(Ce))}catch($e){return this.error($e.message),null}}return Te}return this.error(`Unknown expression "${ne}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(y===void 0?"'undefined' value invalid. Use null instead.":typeof y=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof y} instead.`)}concat(y,I,Q){const ne=typeof y=="number"?this.path.concat(y):this.path,_e=Q?this.scope.concat(Q):this.scope;return new xl(this.registry,ne,I||null,_e,this.errors)}error(y,...I){const Q=`${this.key}${I.map(ne=>`[${ne}]`).join("")}`;this.errors.push(new Io(Q,y))}checkSubtype(y,I){const Q=Za(y,I);return Q&&this.error(Q),Q}}var Ca=xl;function Kr($){if($ instanceof zs)return Kr($.boundExpression);if($ instanceof so&&$.name==="error"||$ instanceof fl||$ instanceof yl)return!1;const y=$ instanceof Aa||$ instanceof yo;let I=!0;return $.eachChild(Q=>{I=y?I&&Kr(Q):I&&Q instanceof Ms}),!!I&&No($)&&jo($,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function bl($,y){const I=$.length-1;let Q,ne,_e=0,Te=I,Ce=0;for(;_e<=Te;)if(Ce=Math.floor((_e+Te)/2),Q=$[Ce],ne=$[Ce+1],Q<=y){if(Ce===I||y<ne)return Ce;_e=Ce+1}else{if(!(Q>y))throw new ji("Input is not a number.");Te=Ce-1}return 0}class uc{constructor(y,I,Q){this.type=y,this.input=I,this.labels=[],this.outputs=[];for(const[ne,_e]of Q)this.labels.push(ne),this.outputs.push(_e)}static parse(y,I){if(y.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return I.error("Expected an even number of arguments.");const Q=I.parse(y[1],1,sr);if(!Q)return null;const ne=[];let _e=null;I.expectedType&&I.expectedType.kind!=="value"&&(_e=I.expectedType);for(let Te=1;Te<y.length;Te+=2){const Ce=Te===1?-1/0:y[Te],$e=y[Te+1],De=Te,Ue=Te+1;if(typeof Ce!="number")return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',De);if(ne.length&&ne[ne.length-1][0]>=Ce)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',De);const He=I.parse($e,Ue,_e);if(!He)return null;_e=_e||He.type,ne.push([Ce,He])}return new uc(_e,Q,ne)}evaluate(y){const I=this.labels,Q=this.outputs;if(I.length===1)return Q[0].evaluate(y);const ne=this.input.evaluate(y);if(ne<=I[0])return Q[0].evaluate(y);const _e=I.length;return ne>=I[_e-1]?Q[_e-1].evaluate(y):Q[bl(I,ne)].evaluate(y)}eachChild(y){y(this.input);for(const I of this.outputs)y(I)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){const y=["step",this.input.serialize()];for(let I=0;I<this.labels.length;I++)I>0&&y.push(this.labels[I]),y.push(this.outputs[I].serialize());return y}}var hc=uc;function Hr($,y,I){return $*(1-I)+y*I}function Ka($,y,I){return $.map((Q,ne)=>Hr(Q,y[ne],I))}var Ds=Object.freeze({__proto__:null,number:Hr,color:function($,y,I){return new ri(Hr($.r,y.r,I),Hr($.g,y.g,I),Hr($.b,y.b,I),Hr($.a,y.a,I))},array:Ka});const $o=.95047,dc=1.08883,wl=4/29,_a=6/29,Ya=3*_a*_a,nh=Math.PI/180,Jo=180/Math.PI;function El($){return $>.008856451679035631?Math.pow($,1/3):$/Ya+wl}function Ls($){return $>_a?$*$*$:Ya*($-wl)}function pc($){return 255*($<=.0031308?12.92*$:1.055*Math.pow($,1/2.4)-.055)}function Tl($){return($/=255)<=.04045?$/12.92:Math.pow(($+.055)/1.055,2.4)}function tu($){const y=Tl($.r),I=Tl($.g),Q=Tl($.b),ne=El((.4124564*y+.3575761*I+.1804375*Q)/$o),_e=El((.2126729*y+.7151522*I+.072175*Q)/1);return{l:116*_e-16,a:500*(ne-_e),b:200*(_e-El((.0193339*y+.119192*I+.9503041*Q)/dc)),alpha:$.a}}function Al($){let y=($.l+16)/116,I=isNaN($.a)?y:y+$.a/500,Q=isNaN($.b)?y:y-$.b/200;return y=1*Ls(y),I=$o*Ls(I),Q=dc*Ls(Q),new ri(pc(3.2404542*I-1.5371385*y-.4985314*Q),pc(-.969266*I+1.8760108*y+.041556*Q),pc(.0556434*I-.2040259*y+1.0572252*Q),$.alpha)}function nu($,y,I){const Q=y-$;return $+I*(Q>180||Q<-180?Q-360*Math.round(Q/360):Q)}const Uo={forward:tu,reverse:Al,interpolate:function($,y,I){return{l:Hr($.l,y.l,I),a:Hr($.a,y.a,I),b:Hr($.b,y.b,I),alpha:Hr($.alpha,y.alpha,I)}}},Ja={forward:function($){const{l:y,a:I,b:Q}=tu($),ne=Math.atan2(Q,I)*Jo;return{h:ne<0?ne+360:ne,c:Math.sqrt(I*I+Q*Q),l:y,alpha:$.a}},reverse:function($){const y=$.h*nh,I=$.c;return Al({l:$.l,a:Math.cos(y)*I,b:Math.sin(y)*I,alpha:$.alpha})},interpolate:function($,y,I){return{h:nu($.h,y.h,I),c:Hr($.c,y.c,I),l:Hr($.l,y.l,I),alpha:Hr($.alpha,y.alpha,I)}}};var ru=Object.freeze({__proto__:null,lab:Uo,hcl:Ja});class Bs{constructor(y,I,Q,ne,_e){this.type=y,this.operator=I,this.interpolation=Q,this.input=ne,this.labels=[],this.outputs=[];for(const[Te,Ce]of _e)this.labels.push(Te),this.outputs.push(Ce)}static interpolationFactor(y,I,Q,ne){let _e=0;if(y.name==="exponential")_e=kl(I,y.base,Q,ne);else if(y.name==="linear")_e=kl(I,1,Q,ne);else if(y.name==="cubic-bezier"){const Te=y.controlPoints;_e=new re(Te[0],Te[1],Te[2],Te[3]).solve(kl(I,1,Q,ne))}return _e}static parse(y,I){let[Q,ne,_e,...Te]=y;if(!Array.isArray(ne)||ne.length===0)return I.error("Expected an interpolation type expression.",1);if(ne[0]==="linear")ne={name:"linear"};else if(ne[0]==="exponential"){const De=ne[1];if(typeof De!="number")return I.error("Exponential interpolation requires a numeric base.",1,1);ne={name:"exponential",base:De}}else{if(ne[0]!=="cubic-bezier")return I.error(`Unknown interpolation type ${String(ne[0])}`,1,0);{const De=ne.slice(1);if(De.length!==4||De.some(Ue=>typeof Ue!="number"||Ue<0||Ue>1))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ne={name:"cubic-bezier",controlPoints:De}}}if(y.length-1<4)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if((y.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(_e=I.parse(_e,2,sr),!_e)return null;const Ce=[];let $e=null;Q==="interpolate-hcl"||Q==="interpolate-lab"?$e=Po:I.expectedType&&I.expectedType.kind!=="value"&&($e=I.expectedType);for(let De=0;De<Te.length;De+=2){const Ue=Te[De],He=Te[De+1],We=De+3,et=De+4;if(typeof Ue!="number")return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',We);if(Ce.length&&Ce[Ce.length-1][0]>=Ue)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',We);const it=I.parse(He,et,$e);if(!it)return null;$e=$e||it.type,Ce.push([Ue,it])}return $e.kind==="number"||$e.kind==="color"||$e.kind==="array"&&$e.itemType.kind==="number"&&typeof $e.N=="number"?new Bs($e,Q,ne,_e,Ce):I.error(`Type ${xi($e)} is not interpolatable.`)}evaluate(y){const I=this.labels,Q=this.outputs;if(I.length===1)return Q[0].evaluate(y);const ne=this.input.evaluate(y);if(ne<=I[0])return Q[0].evaluate(y);const _e=I.length;if(ne>=I[_e-1])return Q[_e-1].evaluate(y);const Te=bl(I,ne),Ce=Bs.interpolationFactor(this.interpolation,ne,I[Te],I[Te+1]),$e=Q[Te].evaluate(y),De=Q[Te+1].evaluate(y);return this.operator==="interpolate"?Ds[this.type.kind.toLowerCase()]($e,De,Ce):this.operator==="interpolate-hcl"?Ja.reverse(Ja.interpolate(Ja.forward($e),Ja.forward(De),Ce)):Uo.reverse(Uo.interpolate(Uo.forward($e),Uo.forward(De),Ce))}eachChild(y){y(this.input);for(const I of this.outputs)y(I)}outputDefined(){return this.outputs.every(y=>y.outputDefined())}serialize(){let y;y=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const I=[this.operator,y,this.input.serialize()];for(let Q=0;Q<this.labels.length;Q++)I.push(this.labels[Q],this.outputs[Q].serialize());return I}}function kl($,y,I,Q){const ne=Q-I,_e=$-I;return ne===0?0:y===1?_e/ne:(Math.pow(y,_e)-1)/(Math.pow(y,ne)-1)}var Vo=Bs;class Ma{constructor(y,I){this.type=y,this.args=I}static parse(y,I){if(y.length<2)return I.error("Expectected at least one argument.");let Q=null;const ne=I.expectedType;ne&&ne.kind!=="value"&&(Q=ne);const _e=[];for(const Ce of y.slice(1)){const $e=I.parse(Ce,1+_e.length,Q,void 0,{typeAnnotation:"omit"});if(!$e)return null;Q=Q||$e.type,_e.push($e)}const Te=ne&&_e.some(Ce=>Za(ne,Ce.type));return new Ma(Te?Ir:Q,_e)}evaluate(y){let I,Q=null,ne=0;for(const _e of this.args){if(ne++,Q=_e.evaluate(y),Q&&Q instanceof ao&&!Q.available&&(I||(I=Q),Q=null,ne===this.args.length))return I;if(Q!==null)break}return Q}eachChild(y){this.args.forEach(y)}outputDefined(){return this.args.every(y=>y.outputDefined())}serialize(){const y=["coalesce"];return this.eachChild(I=>{y.push(I.serialize())}),y}}var iu=Ma;class fc{constructor(y,I){this.type=I.type,this.bindings=[].concat(y),this.result=I}evaluate(y){return this.result.evaluate(y)}eachChild(y){for(const I of this.bindings)y(I[1]);y(this.result)}static parse(y,I){if(y.length<4)return I.error(`Expected at least 3 arguments, but found ${y.length-1} instead.`);const Q=[];for(let _e=1;_e<y.length-1;_e+=2){const Te=y[_e];if(typeof Te!="string")return I.error(`Expected string, but found ${typeof Te} instead.`,_e);if(/[^a-zA-Z0-9_]/.test(Te))return I.error("Variable names must contain only alphanumeric characters or '_'.",_e);const Ce=I.parse(y[_e+1],_e+1);if(!Ce)return null;Q.push([Te,Ce])}const ne=I.parse(y[y.length-1],y.length-1,I.expectedType,Q);return ne?new fc(Q,ne):null}outputDefined(){return this.result.outputDefined()}serialize(){const y=["let"];for(const[I,Q]of this.bindings)y.push(I,Q.serialize());return y.push(this.result.serialize()),y}}var ou=fc;class _c{constructor(y,I,Q){this.type=y,this.index=I,this.input=Q}static parse(y,I){if(y.length!==3)return I.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const Q=I.parse(y[1],1,sr),ne=I.parse(y[2],2,fo(I.expectedType||Ir));return Q&&ne?new _c(ne.type.itemType,Q,ne):null}evaluate(y){const I=this.index.evaluate(y),Q=this.input.evaluate(y);if(I<0)throw new ji(`Array index out of bounds: ${I} < 0.`);if(I>=Q.length)throw new ji(`Array index out of bounds: ${I} > ${Q.length-1}.`);if(I!==Math.floor(I))throw new ji(`Array index must be an integer, but found ${I} instead.`);return Q[I]}eachChild(y){y(this.index),y(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var au=_c;class mc{constructor(y,I){this.type=Fr,this.needle=y,this.haystack=I}static parse(y,I){if(y.length!==3)return I.error(`Expected 2 arguments, but found ${y.length-1} instead.`);const Q=I.parse(y[1],1,Ir),ne=I.parse(y[2],2,Ir);return Q&&ne?dl(Q.type,[Fr,Pr,sr,ca,Ir])?new mc(Q,ne):I.error(`Expected first argument to be of type boolean, string, number or null, but found ${xi(Q.type)} instead`):null}evaluate(y){const I=this.needle.evaluate(y),Q=this.haystack.evaluate(y);if(Q==null)return!1;if(!ha(I,["boolean","string","number","null"]))throw new ji(`Expected first argument to be of type boolean, string, number or null, but found ${xi(Pi(I))} instead.`);if(!ha(Q,["string","array"]))throw new ji(`Expected second argument to be of type array or string, but found ${xi(Pi(Q))} instead.`);return Q.indexOf(I)>=0}eachChild(y){y(this.needle),y(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var rh=mc;class Sl{constructor(y,I,Q){this.type=sr,this.needle=y,this.haystack=I,this.fromIndex=Q}static parse(y,I){if(y.length<=2||y.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const Q=I.parse(y[1],1,Ir),ne=I.parse(y[2],2,Ir);if(!Q||!ne)return null;if(!dl(Q.type,[Fr,Pr,sr,ca,Ir]))return I.error(`Expected first argument to be of type boolean, string, number or null, but found ${xi(Q.type)} instead`);if(y.length===4){const _e=I.parse(y[3],3,sr);return _e?new Sl(Q,ne,_e):null}return new Sl(Q,ne)}evaluate(y){const I=this.needle.evaluate(y),Q=this.haystack.evaluate(y);if(!ha(I,["boolean","string","number","null"]))throw new ji(`Expected first argument to be of type boolean, string, number or null, but found ${xi(Pi(I))} instead.`);if(!ha(Q,["string","array"]))throw new ji(`Expected second argument to be of type array or string, but found ${xi(Pi(Q))} instead.`);if(this.fromIndex){const ne=this.fromIndex.evaluate(y);return Q.indexOf(I,ne)}return Q.indexOf(I)}eachChild(y){y(this.needle),y(this.haystack),this.fromIndex&&y(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const y=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),y]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var ih=Sl;class Cl{constructor(y,I,Q,ne,_e,Te){this.inputType=y,this.type=I,this.input=Q,this.cases=ne,this.outputs=_e,this.otherwise=Te}static parse(y,I){if(y.length<5)return I.error(`Expected at least 4 arguments, but found only ${y.length-1}.`);if(y.length%2!=1)return I.error("Expected an even number of arguments.");let Q,ne;I.expectedType&&I.expectedType.kind!=="value"&&(ne=I.expectedType);const _e={},Te=[];for(let De=2;De<y.length-1;De+=2){let Ue=y[De];const He=y[De+1];Array.isArray(Ue)||(Ue=[Ue]);const We=I.concat(De);if(Ue.length===0)return We.error("Expected at least one branch label.");for(const it of Ue){if(typeof it!="number"&&typeof it!="string")return We.error("Branch labels must be numbers or strings.");if(typeof it=="number"&&Math.abs(it)>Number.MAX_SAFE_INTEGER)return We.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof it=="number"&&Math.floor(it)!==it)return We.error("Numeric branch labels must be integer values.");if(Q){if(We.checkSubtype(Q,Pi(it)))return null}else Q=Pi(it);if(_e[String(it)]!==void 0)return We.error("Branch labels must be unique.");_e[String(it)]=Te.length}const et=I.parse(He,De,ne);if(!et)return null;ne=ne||et.type,Te.push(et)}const Ce=I.parse(y[1],1,Ir);if(!Ce)return null;const $e=I.parse(y[y.length-1],y.length-1,ne);return $e?Ce.type.kind!=="value"&&I.concat(1).checkSubtype(Q,Ce.type)?null:new Cl(Q,ne,Ce,_e,Te,$e):null}evaluate(y){const I=this.input.evaluate(y);return(Pi(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(y)}eachChild(y){y(this.input),this.outputs.forEach(y),y(this.otherwise)}outputDefined(){return this.outputs.every(y=>y.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["match",this.input.serialize()],I=Object.keys(this.cases).sort(),Q=[],ne={};for(const Te of I){const Ce=ne[this.cases[Te]];Ce===void 0?(ne[this.cases[Te]]=Q.length,Q.push([this.cases[Te],[Te]])):Q[Ce][1].push(Te)}const _e=Te=>this.inputType.kind==="number"?Number(Te):Te;for(const[Te,Ce]of Q)y.push(Ce.length===1?_e(Ce[0]):Ce.map(_e)),y.push(this.outputs[Te].serialize());return y.push(this.otherwise.serialize()),y}}var su=Cl;class Ml{constructor(y,I,Q){this.type=y,this.branches=I,this.otherwise=Q}static parse(y,I){if(y.length<4)return I.error(`Expected at least 3 arguments, but found only ${y.length-1}.`);if(y.length%2!=0)return I.error("Expected an odd number of arguments.");let Q;I.expectedType&&I.expectedType.kind!=="value"&&(Q=I.expectedType);const ne=[];for(let Te=1;Te<y.length-1;Te+=2){const Ce=I.parse(y[Te],Te,Fr);if(!Ce)return null;const $e=I.parse(y[Te+1],Te+1,Q);if(!$e)return null;ne.push([Ce,$e]),Q=Q||$e.type}const _e=I.parse(y[y.length-1],y.length-1,Q);return _e?new Ml(Q,ne,_e):null}evaluate(y){for(const[I,Q]of this.branches)if(I.evaluate(y))return Q.evaluate(y);return this.otherwise.evaluate(y)}eachChild(y){for(const[I,Q]of this.branches)y(I),y(Q);y(this.otherwise)}outputDefined(){return this.branches.every(([y,I])=>I.outputDefined())&&this.otherwise.outputDefined()}serialize(){const y=["case"];return this.eachChild(I=>{y.push(I.serialize())}),y}}var oh=Ml;class Fs{constructor(y,I,Q,ne){this.type=y,this.input=I,this.beginIndex=Q,this.endIndex=ne}static parse(y,I){if(y.length<=2||y.length>=5)return I.error(`Expected 3 or 4 arguments, but found ${y.length-1} instead.`);const Q=I.parse(y[1],1,Ir),ne=I.parse(y[2],2,sr);if(!Q||!ne)return null;if(!dl(Q.type,[fo(Ir),Pr,Ir]))return I.error(`Expected first argument to be of type array or string, but found ${xi(Q.type)} instead`);if(y.length===4){const _e=I.parse(y[3],3,sr);return _e?new Fs(Q.type,Q,ne,_e):null}return new Fs(Q.type,Q,ne)}evaluate(y){const I=this.input.evaluate(y),Q=this.beginIndex.evaluate(y);if(!ha(I,["string","array"]))throw new ji(`Expected first argument to be of type array or string, but found ${xi(Pi(I))} instead.`);if(this.endIndex){const ne=this.endIndex.evaluate(y);return I.slice(Q,ne)}return I.slice(Q)}eachChild(y){y(this.input),y(this.beginIndex),this.endIndex&&y(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const y=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),y]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var lu=Fs;function Qa($,y){return $==="=="||$==="!="?y.kind==="boolean"||y.kind==="string"||y.kind==="number"||y.kind==="null"||y.kind==="value":y.kind==="string"||y.kind==="number"||y.kind==="value"}function gc($,y,I,Q){return Q.compare(y,I)===0}function Ia($,y,I){const Q=$!=="=="&&$!=="!=";return class Q_{constructor(_e,Te,Ce){this.type=Fr,this.lhs=_e,this.rhs=Te,this.collator=Ce,this.hasUntypedArgument=_e.type.kind==="value"||Te.type.kind==="value"}static parse(_e,Te){if(_e.length!==3&&_e.length!==4)return Te.error("Expected two or three arguments.");const Ce=_e[0];let $e=Te.parse(_e[1],1,Ir);if(!$e)return null;if(!Qa(Ce,$e.type))return Te.concat(1).error(`"${Ce}" comparisons are not supported for type '${xi($e.type)}'.`);let De=Te.parse(_e[2],2,Ir);if(!De)return null;if(!Qa(Ce,De.type))return Te.concat(2).error(`"${Ce}" comparisons are not supported for type '${xi(De.type)}'.`);if($e.type.kind!==De.type.kind&&$e.type.kind!=="value"&&De.type.kind!=="value")return Te.error(`Cannot compare types '${xi($e.type)}' and '${xi(De.type)}'.`);Q&&($e.type.kind==="value"&&De.type.kind!=="value"?$e=new yo(De.type,[$e]):$e.type.kind!=="value"&&De.type.kind==="value"&&(De=new yo($e.type,[De])));let Ue=null;if(_e.length===4){if($e.type.kind!=="string"&&De.type.kind!=="string"&&$e.type.kind!=="value"&&De.type.kind!=="value")return Te.error("Cannot use collator to compare non-string types.");if(Ue=Te.parse(_e[3],3,Ts),!Ue)return null}return new Q_($e,De,Ue)}evaluate(_e){const Te=this.lhs.evaluate(_e),Ce=this.rhs.evaluate(_e);if(Q&&this.hasUntypedArgument){const $e=Pi(Te),De=Pi(Ce);if($e.kind!==De.kind||$e.kind!=="string"&&$e.kind!=="number")throw new ji(`Expected arguments for "${$}" to be (string, string) or (number, number), but found (${$e.kind}, ${De.kind}) instead.`)}if(this.collator&&!Q&&this.hasUntypedArgument){const $e=Pi(Te),De=Pi(Ce);if($e.kind!=="string"||De.kind!=="string")return y(_e,Te,Ce)}return this.collator?I(_e,Te,Ce,this.collator.evaluate(_e)):y(_e,Te,Ce)}eachChild(_e){_e(this.lhs),_e(this.rhs),this.collator&&_e(this.collator)}outputDefined(){return!0}serialize(){const _e=[$];return this.eachChild(Te=>{_e.push(Te.serialize())}),_e}}}const ah=Ia("==",function($,y,I){return y===I},gc),cu=Ia("!=",function($,y,I){return y!==I},function($,y,I,Q){return!gc(0,y,I,Q)}),sh=Ia("<",function($,y,I){return y<I},function($,y,I,Q){return Q.compare(y,I)<0}),Il=Ia(">",function($,y,I){return y>I},function($,y,I,Q){return Q.compare(y,I)>0}),uu=Ia("<=",function($,y,I){return y<=I},function($,y,I,Q){return Q.compare(y,I)<=0}),hu=Ia(">=",function($,y,I){return y>=I},function($,y,I,Q){return Q.compare(y,I)>=0});class yc{constructor(y,I,Q,ne,_e,Te){this.type=Pr,this.number=y,this.locale=I,this.currency=Q,this.unit=ne,this.minFractionDigits=_e,this.maxFractionDigits=Te}static parse(y,I){if(y.length!==3)return I.error("Expected two arguments.");const Q=I.parse(y[1],1,sr);if(!Q)return null;const ne=y[2];if(typeof ne!="object"||Array.isArray(ne))return I.error("NumberFormat options argument must be an object.");let _e=null;if(ne.locale&&(_e=I.parse(ne.locale,1,Pr),!_e))return null;let Te=null;if(ne.currency&&(Te=I.parse(ne.currency,1,Pr),!Te))return null;let Ce=null;if(ne.unit&&(Ce=I.parse(ne.unit,1,Pr),!Ce))return null;let $e=null;if(ne["min-fraction-digits"]&&($e=I.parse(ne["min-fraction-digits"],1,sr),!$e))return null;let De=null;return ne["max-fraction-digits"]&&(De=I.parse(ne["max-fraction-digits"],1,sr),!De)?null:new yc(Q,_e,Te,Ce,$e,De)}evaluate(y){return new Intl.NumberFormat(this.locale?this.locale.evaluate(y):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(y):void 0,unit:this.unit?this.unit.evaluate(y):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(y):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(y):void 0}).format(this.number.evaluate(y))}eachChild(y){y(this.number),this.locale&&y(this.locale),this.currency&&y(this.currency),this.unit&&y(this.unit),this.minFractionDigits&&y(this.minFractionDigits),this.maxFractionDigits&&y(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const y={};return this.locale&&(y.locale=this.locale.serialize()),this.currency&&(y.currency=this.currency.serialize()),this.unit&&(y.unit=this.unit.serialize()),this.minFractionDigits&&(y["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(y["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),y]}}class vc{constructor(y){this.type=sr,this.input=y}static parse(y,I){if(y.length!==2)return I.error(`Expected 1 argument, but found ${y.length-1} instead.`);const Q=I.parse(y[1],1);return Q?Q.type.kind!=="array"&&Q.type.kind!=="string"&&Q.type.kind!=="value"?I.error(`Expected argument of type string or array, but found ${xi(Q.type)} instead.`):new vc(Q):null}evaluate(y){const I=this.input.evaluate(y);if(typeof I=="string"||Array.isArray(I))return I.length;throw new ji(`Expected value to be of type string or array, but found ${xi(Pi(I))} instead.`)}eachChild(y){y(this.input)}outputDefined(){return!1}serialize(){const y=["length"];return this.eachChild(I=>{y.push(I.serialize())}),y}}const du={"==":ah,"!=":cu,">":Il,"<":sh,">=":hu,"<=":uu,array:yo,at:au,boolean:yo,case:oh,coalesce:iu,collator:fl,format:Os,image:pl,in:rh,"index-of":ih,interpolate:Vo,"interpolate-hcl":Vo,"interpolate-lab":Vo,length:vc,let:ou,literal:Ms,match:su,number:yo,"number-format":yc,object:yo,slice:lu,step:hc,string:yo,"to-boolean":Aa,"to-color":Aa,"to-number":Aa,"to-string":Aa,var:zs,within:yl};function Ns($,[y,I,Q,ne]){y=y.evaluate($),I=I.evaluate($),Q=Q.evaluate($);const _e=ne?ne.evaluate($):1,Te=oc(y,I,Q,_e);if(Te)throw new ji(Te);return new ri(y/255*_e,I/255*_e,Q/255*_e,_e)}function xc($,y){return $ in y}function Pl($,y){const I=y[$];return I===void 0?null:I}function Qo($){return{type:$}}so.register(du,{error:[{kind:"error"},[Pr],($,[y])=>{throw new ji(y.evaluate($))}],typeof:[Pr,[Ir],($,[y])=>xi(Pi(y.evaluate($)))],"to-rgba":[fo(sr,4),[Po],($,[y])=>y.evaluate($).toArray()],rgb:[Po,[sr,sr,sr],Ns],rgba:[Po,[sr,sr,sr,sr],Ns],has:{type:Fr,overloads:[[[Pr],($,[y])=>xc(y.evaluate($),$.properties())],[[Pr,Oo],($,[y,I])=>xc(y.evaluate($),I.evaluate($))]]},get:{type:Ir,overloads:[[[Pr],($,[y])=>Pl(y.evaluate($),$.properties())],[[Pr,Oo],($,[y,I])=>Pl(y.evaluate($),I.evaluate($))]]},"feature-state":[Ir,[Pr],($,[y])=>Pl(y.evaluate($),$.featureState||{})],properties:[Oo,[],$=>$.properties()],"geometry-type":[Pr,[],$=>$.geometryType()],id:[Ir,[],$=>$.id()],zoom:[sr,[],$=>$.globals.zoom],pitch:[sr,[],$=>$.globals.pitch||0],"distance-from-center":[sr,[],$=>$.distanceFromCenter()],"heatmap-density":[sr,[],$=>$.globals.heatmapDensity||0],"line-progress":[sr,[],$=>$.globals.lineProgress||0],"sky-radial-progress":[sr,[],$=>$.globals.skyRadialProgress||0],accumulated:[Ir,[],$=>$.globals.accumulated===void 0?null:$.globals.accumulated],"+":[sr,Qo(sr),($,y)=>{let I=0;for(const Q of y)I+=Q.evaluate($);return I}],"*":[sr,Qo(sr),($,y)=>{let I=1;for(const Q of y)I*=Q.evaluate($);return I}],"-":{type:sr,overloads:[[[sr,sr],($,[y,I])=>y.evaluate($)-I.evaluate($)],[[sr],($,[y])=>-y.evaluate($)]]},"/":[sr,[sr,sr],($,[y,I])=>y.evaluate($)/I.evaluate($)],"%":[sr,[sr,sr],($,[y,I])=>y.evaluate($)%I.evaluate($)],ln2:[sr,[],()=>Math.LN2],pi:[sr,[],()=>Math.PI],e:[sr,[],()=>Math.E],"^":[sr,[sr,sr],($,[y,I])=>Math.pow(y.evaluate($),I.evaluate($))],sqrt:[sr,[sr],($,[y])=>Math.sqrt(y.evaluate($))],log10:[sr,[sr],($,[y])=>Math.log(y.evaluate($))/Math.LN10],ln:[sr,[sr],($,[y])=>Math.log(y.evaluate($))],log2:[sr,[sr],($,[y])=>Math.log(y.evaluate($))/Math.LN2],sin:[sr,[sr],($,[y])=>Math.sin(y.evaluate($))],cos:[sr,[sr],($,[y])=>Math.cos(y.evaluate($))],tan:[sr,[sr],($,[y])=>Math.tan(y.evaluate($))],asin:[sr,[sr],($,[y])=>Math.asin(y.evaluate($))],acos:[sr,[sr],($,[y])=>Math.acos(y.evaluate($))],atan:[sr,[sr],($,[y])=>Math.atan(y.evaluate($))],min:[sr,Qo(sr),($,y)=>Math.min(...y.map(I=>I.evaluate($)))],max:[sr,Qo(sr),($,y)=>Math.max(...y.map(I=>I.evaluate($)))],abs:[sr,[sr],($,[y])=>Math.abs(y.evaluate($))],round:[sr,[sr],($,[y])=>{const I=y.evaluate($);return I<0?-Math.round(-I):Math.round(I)}],floor:[sr,[sr],($,[y])=>Math.floor(y.evaluate($))],ceil:[sr,[sr],($,[y])=>Math.ceil(y.evaluate($))],"filter-==":[Fr,[Pr,Ir],($,[y,I])=>$.properties()[y.value]===I.value],"filter-id-==":[Fr,[Ir],($,[y])=>$.id()===y.value],"filter-type-==":[Fr,[Pr],($,[y])=>$.geometryType()===y.value],"filter-<":[Fr,[Pr,Ir],($,[y,I])=>{const Q=$.properties()[y.value],ne=I.value;return typeof Q==typeof ne&&Q<ne}],"filter-id-<":[Fr,[Ir],($,[y])=>{const I=$.id(),Q=y.value;return typeof I==typeof Q&&I<Q}],"filter->":[Fr,[Pr,Ir],($,[y,I])=>{const Q=$.properties()[y.value],ne=I.value;return typeof Q==typeof ne&&Q>ne}],"filter-id->":[Fr,[Ir],($,[y])=>{const I=$.id(),Q=y.value;return typeof I==typeof Q&&I>Q}],"filter-<=":[Fr,[Pr,Ir],($,[y,I])=>{const Q=$.properties()[y.value],ne=I.value;return typeof Q==typeof ne&&Q<=ne}],"filter-id-<=":[Fr,[Ir],($,[y])=>{const I=$.id(),Q=y.value;return typeof I==typeof Q&&I<=Q}],"filter->=":[Fr,[Pr,Ir],($,[y,I])=>{const Q=$.properties()[y.value],ne=I.value;return typeof Q==typeof ne&&Q>=ne}],"filter-id->=":[Fr,[Ir],($,[y])=>{const I=$.id(),Q=y.value;return typeof I==typeof Q&&I>=Q}],"filter-has":[Fr,[Ir],($,[y])=>y.value in $.properties()],"filter-has-id":[Fr,[],$=>$.id()!==null&&$.id()!==void 0],"filter-type-in":[Fr,[fo(Pr)],($,[y])=>y.value.indexOf($.geometryType())>=0],"filter-id-in":[Fr,[fo(Ir)],($,[y])=>y.value.indexOf($.id())>=0],"filter-in-small":[Fr,[Pr,fo(Ir)],($,[y,I])=>I.value.indexOf($.properties()[y.value])>=0],"filter-in-large":[Fr,[Pr,fo(Ir)],($,[y,I])=>function(Q,ne,_e,Te){for(;_e<=Te;){const Ce=_e+Te>>1;if(ne[Ce]===Q)return!0;ne[Ce]>Q?Te=Ce-1:_e=Ce+1}return!1}($.properties()[y.value],I.value,0,I.value.length-1)],all:{type:Fr,overloads:[[[Fr,Fr],($,[y,I])=>y.evaluate($)&&I.evaluate($)],[Qo(Fr),($,y)=>{for(const I of y)if(!I.evaluate($))return!1;return!0}]]},any:{type:Fr,overloads:[[[Fr,Fr],($,[y,I])=>y.evaluate($)||I.evaluate($)],[Qo(Fr),($,y)=>{for(const I of y)if(I.evaluate($))return!0;return!1}]]},"!":[Fr,[Fr],($,[y])=>!y.evaluate($)],"is-supported-script":[Fr,[Pr],($,[y])=>{const I=$.globals&&$.globals.isSupportedScript;return!I||I(y.evaluate($))}],upcase:[Pr,[Pr],($,[y])=>y.evaluate($).toUpperCase()],downcase:[Pr,[Pr],($,[y])=>y.evaluate($).toLowerCase()],concat:[Pr,Qo(Ir),($,y)=>y.map(I=>Ss(I.evaluate($))).join("")],"resolved-locale":[Pr,[Ts],($,[y])=>y.evaluate($).resolvedLocale()]});var js=du;function pu($){return{result:"success",value:$}}function Pa($){return{result:"error",value:$}}function es($){return $["property-type"]==="data-driven"||$["property-type"]==="cross-faded-data-driven"}function fu($){return!!$.expression&&$.expression.parameters.indexOf("zoom")>-1}function bc($){return!!$.expression&&$.expression.interpolated}function Jr($){return $ instanceof Number?"number":$ instanceof String?"string":$ instanceof Boolean?"boolean":Array.isArray($)?"array":$===null?"null":typeof $}function Us($){return typeof $=="object"&&$!==null&&!Array.isArray($)}function _u($){return $}function Vs($,y){const I=y.type==="color",Q=$.stops&&typeof $.stops[0][0]=="object",ne=Q||!(Q||$.property!==void 0),_e=$.type||(bc(y)?"exponential":"interval");if(I&&(($=po({},$)).stops&&($.stops=$.stops.map(De=>[De[0],ri.parse(De[1])])),$.default=ri.parse($.default?$.default:y.default)),$.colorSpace&&$.colorSpace!=="rgb"&&!ru[$.colorSpace])throw new Error(`Unknown color space: ${$.colorSpace}`);let Te,Ce,$e;if(_e==="exponential")Te=wc;else if(_e==="interval")Te=ma;else if(_e==="categorical"){Te=lh,Ce=Object.create(null);for(const De of $.stops)Ce[De[0]]=De[1];$e=typeof $.stops[0][0]}else{if(_e!=="identity")throw new Error(`Unknown function type "${_e}"`);Te=ts}if(Q){const De={},Ue=[];for(let et=0;et<$.stops.length;et++){const it=$.stops[et],_t=it[0].zoom;De[_t]===void 0&&(De[_t]={zoom:_t,type:$.type,property:$.property,default:$.default,stops:[]},Ue.push(_t)),De[_t].stops.push([it[0].value,it[1]])}const He=[];for(const et of Ue)He.push([De[et].zoom,Vs(De[et],y)]);const We={name:"linear"};return{kind:"composite",interpolationType:We,interpolationFactor:Vo.interpolationFactor.bind(void 0,We),zoomStops:He.map(et=>et[0]),evaluate:({zoom:et},it)=>wc({stops:He,base:$.base},y,et).evaluate(et,it)}}if(ne){const De=_e==="exponential"?{name:"exponential",base:$.base!==void 0?$.base:1}:null;return{kind:"camera",interpolationType:De,interpolationFactor:Vo.interpolationFactor.bind(void 0,De),zoomStops:$.stops.map(Ue=>Ue[0]),evaluate:({zoom:Ue})=>Te($,y,Ue,Ce,$e)}}return{kind:"source",evaluate(De,Ue){const He=Ue&&Ue.properties?Ue.properties[$.property]:void 0;return He===void 0?Gs($.default,y.default):Te($,y,He,Ce,$e)}}}function Gs($,y,I){return $!==void 0?$:y!==void 0?y:I!==void 0?I:void 0}function lh($,y,I,Q,ne){return Gs(typeof I===ne?Q[I]:void 0,$.default,y.default)}function ma($,y,I){if(Jr(I)!=="number")return Gs($.default,y.default);const Q=$.stops.length;if(Q===1||I<=$.stops[0][0])return $.stops[0][1];if(I>=$.stops[Q-1][0])return $.stops[Q-1][1];const ne=bl($.stops.map(_e=>_e[0]),I);return $.stops[ne][1]}function wc($,y,I){const Q=$.base!==void 0?$.base:1;if(Jr(I)!=="number")return Gs($.default,y.default);const ne=$.stops.length;if(ne===1||I<=$.stops[0][0])return $.stops[0][1];if(I>=$.stops[ne-1][0])return $.stops[ne-1][1];const _e=bl($.stops.map(Ue=>Ue[0]),I),Te=function(Ue,He,We,et){const it=et-We,_t=Ue-We;return it===0?0:He===1?_t/it:(Math.pow(He,_t)-1)/(Math.pow(He,it)-1)}(I,Q,$.stops[_e][0],$.stops[_e+1][0]),Ce=$.stops[_e][1],$e=$.stops[_e+1][1];let De=Ds[y.type]||_u;if($.colorSpace&&$.colorSpace!=="rgb"){const Ue=ru[$.colorSpace];De=(He,We)=>Ue.reverse(Ue.interpolate(Ue.forward(He),Ue.forward(We),Te))}return typeof Ce.evaluate=="function"?{evaluate(...Ue){const He=Ce.evaluate.apply(void 0,Ue),We=$e.evaluate.apply(void 0,Ue);if(He!==void 0&&We!==void 0)return De(He,We,Te)}}:De(Ce,$e,Te)}function ts($,y,I){return y.type==="color"?I=ri.parse(I):y.type==="formatted"?I=oo.fromString(I.toString()):y.type==="resolvedImage"?I=ao.fromString(I.toString()):Jr(I)===y.type||y.type==="enum"&&y.values[I]||(I=void 0),Gs(I,$.default,y.default)}class Ec{constructor(y,I){this.expression=y,this._warningHistory={},this._evaluator=new Jc,this._defaultValue=I?function(Q){return Q.type==="color"&&(Us(Q.default)||Array.isArray(Q.default))?new ri(0,0,0,0):Q.type==="color"?ri.parse(Q.default)||null:Q.default===void 0?null:Q.default}(I):null,this._enumValues=I&&I.type==="enum"?I.values:null}evaluateWithoutErrorHandling(y,I,Q,ne,_e,Te,Ce,$e){return this._evaluator.globals=y,this._evaluator.feature=I,this._evaluator.featureState=Q,this._evaluator.canonical=ne||null,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Te,this._evaluator.featureTileCoord=Ce||null,this._evaluator.featureDistanceData=$e||null,this.expression.evaluate(this._evaluator)}evaluate(y,I,Q,ne,_e,Te,Ce,$e){this._evaluator.globals=y,this._evaluator.feature=I||null,this._evaluator.featureState=Q||null,this._evaluator.canonical=ne||null,this._evaluator.availableImages=_e||null,this._evaluator.formattedSection=Te||null,this._evaluator.featureTileCoord=Ce||null,this._evaluator.featureDistanceData=$e||null;try{const De=this.expression.evaluate(this._evaluator);if(De==null||typeof De=="number"&&De!=De)return this._defaultValue;if(this._enumValues&&!(De in this._enumValues))throw new ji(`Expected value to be one of ${Object.keys(this._enumValues).map(Ue=>JSON.stringify(Ue)).join(", ")}, but found ${JSON.stringify(De)} instead.`);return De}catch(De){return this._warningHistory[De.message]||(this._warningHistory[De.message]=!0,typeof console!="undefined"&&console.warn(De.message)),this._defaultValue}}}function Ol($){return Array.isArray($)&&$.length>0&&typeof $[0]=="string"&&$[0]in js}function ns($,y){const I=new Ca(js,[],y?function(ne){const _e={color:Po,string:Pr,number:sr,enum:Pr,boolean:Fr,formatted:ua,resolvedImage:As};return ne.type==="array"?fo(_e[ne.value]||Ir,ne.length):_e[ne.type]}(y):void 0),Q=I.parse($,void 0,void 0,void 0,y&&y.type==="string"?{typeAnnotation:"coerce"}:void 0);return Q?pu(new Ec(Q,y)):Pa(I.errors)}class Tc{constructor(y,I){this.kind=y,this._styleExpression=I,this.isStateDependent=y!=="constant"&&!fa(I.expression)}evaluateWithoutErrorHandling(y,I,Q,ne,_e,Te){return this._styleExpression.evaluateWithoutErrorHandling(y,I,Q,ne,_e,Te)}evaluate(y,I,Q,ne,_e,Te){return this._styleExpression.evaluate(y,I,Q,ne,_e,Te)}}class qs{constructor(y,I,Q,ne){this.kind=y,this.zoomStops=Q,this._styleExpression=I,this.isStateDependent=y!=="camera"&&!fa(I.expression),this.interpolationType=ne}evaluateWithoutErrorHandling(y,I,Q,ne,_e,Te){return this._styleExpression.evaluateWithoutErrorHandling(y,I,Q,ne,_e,Te)}evaluate(y,I,Q,ne,_e,Te){return this._styleExpression.evaluate(y,I,Q,ne,_e,Te)}interpolationFactor(y,I,Q){return this.interpolationType?Vo.interpolationFactor(this.interpolationType,y,I,Q):0}}function Ac($,y){if(($=ns($,y)).result==="error")return $;const I=$.value.expression,Q=No(I);if(!Q&&!es(y))return Pa([new Io("","data expressions not supported")]);const ne=jo(I,["zoom","pitch","distance-from-center"]);if(!ne&&!fu(y))return Pa([new Io("","zoom expressions not supported")]);const _e=is(I);return _e||ne?_e instanceof Io?Pa([_e]):_e instanceof Vo&&!bc(y)?Pa([new Io("",'"interpolate" expressions cannot be used with this property')]):pu(_e?new qs(Q?"camera":"composite",$.value,_e.labels,_e instanceof Vo?_e.interpolation:void 0):new Tc(Q?"constant":"source",$.value)):Pa([new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class rs{constructor(y,I){this._parameters=y,this._specification=I,po(this,Vs(this._parameters,this._specification))}static deserialize(y){return new rs(y._parameters,y._specification)}static serialize(y){return{_parameters:y._parameters,_specification:y._specification}}}function is($){let y=null;if($ instanceof ou)y=is($.result);else if($ instanceof iu){for(const I of $.args)if(y=is(I),y)break}else($ instanceof hc||$ instanceof Vo)&&$.input instanceof so&&$.input.name==="zoom"&&(y=$);return y instanceof Io||$.eachChild(I=>{const Q=is(I);Q instanceof Io?y=Q:!y&&Q?y=new Io("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):y&&Q&&y!==Q&&(y=new Io("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),y}class lr{constructor(y,I,Q,ne){this.message=(y?`${y}: `:"")+Q,ne&&(this.identifier=ne),I!=null&&I.__line__&&(this.line=I.__line__)}}function lo($){const y=$.key,I=$.value,Q=$.valueSpec||{},ne=$.objectElementValidators||{},_e=$.style,Te=$.styleSpec;let Ce=[];const $e=Jr(I);if($e!=="object")return[new lr(y,I,`object expected, ${$e} found`)];for(const De in I){const Ue=De.split(".")[0],He=Q[Ue]||Q["*"];let We;ne[Ue]?We=ne[Ue]:Q[Ue]?We=Gi:ne["*"]?We=ne["*"]:Q["*"]&&(We=Gi),We?Ce=Ce.concat(We({key:(y&&`${y}.`)+De,value:I[De],valueSpec:He,style:_e,styleSpec:Te,object:I,objectKey:De},I)):Ce.push(new lr(y,I[De],`unknown property "${De}"`))}for(const De in Q)ne[De]||Q[De].required&&Q[De].default===void 0&&I[De]===void 0&&Ce.push(new lr(y,I,`missing required property "${De}"`));return Ce}function kc($){const y=$.value,I=$.valueSpec,Q=$.style,ne=$.styleSpec,_e=$.key,Te=$.arrayElementValidator||Gi;if(Jr(y)!=="array")return[new lr(_e,y,`array expected, ${Jr(y)} found`)];if(I.length&&y.length!==I.length)return[new lr(_e,y,`array length ${I.length} expected, length ${y.length} found`)];if(I["min-length"]&&y.length<I["min-length"])return[new lr(_e,y,`array length at least ${I["min-length"]} expected, length ${y.length} found`)];let Ce={type:I.value,values:I.values,minimum:I.minimum,maximum:I.maximum,function:void 0};ne.$version<7&&(Ce.function=I.function),Jr(I.value)==="object"&&(Ce=I.value);let $e=[];for(let De=0;De<y.length;De++)$e=$e.concat(Te({array:y,arrayIndex:De,value:y[De],valueSpec:Ce,style:Q,styleSpec:ne,key:`${_e}[${De}]`}));return $e}function Sc($){const y=$.key,I=$.value,Q=$.valueSpec;let ne=Jr(I);if(ne==="number"&&I!=I&&(ne="NaN"),ne!=="number")return[new lr(y,I,`number expected, ${ne} found`)];if("minimum"in Q){let _e=Q.minimum;if(Jr(Q.minimum)==="array"&&(_e=Q.minimum[$.arrayIndex]),I<_e)return[new lr(y,I,`${I} is less than the minimum value ${_e}`)]}if("maximum"in Q){let _e=Q.maximum;if(Jr(Q.maximum)==="array"&&(_e=Q.maximum[$.arrayIndex]),I>_e)return[new lr(y,I,`${I} is greater than the maximum value ${_e}`)]}return[]}function Hs($){const y=$.valueSpec,I=Ai($.value.type);let Q,ne,_e,Te={};const Ce=I!=="categorical"&&$.value.property===void 0,$e=!Ce,De=Jr($.value.stops)==="array"&&Jr($.value.stops[0])==="array"&&Jr($.value.stops[0][0])==="object",Ue=lo({key:$.key,value:$.value,valueSpec:$.styleSpec.function,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{stops:function(et){if(I==="identity")return[new lr(et.key,et.value,'identity function may not have a "stops" property')];let it=[];const _t=et.value;return it=it.concat(kc({key:et.key,value:_t,valueSpec:et.valueSpec,style:et.style,styleSpec:et.styleSpec,arrayElementValidator:He})),Jr(_t)==="array"&&_t.length===0&&it.push(new lr(et.key,_t,"array must have at least one stop")),it},default:function(et){return Gi({key:et.key,value:et.value,valueSpec:y,style:et.style,styleSpec:et.styleSpec})}}});return I==="identity"&&Ce&&Ue.push(new lr($.key,$.value,'missing required property "property"')),I==="identity"||$.value.stops||Ue.push(new lr($.key,$.value,'missing required property "stops"')),I==="exponential"&&$.valueSpec.expression&&!bc($.valueSpec)&&Ue.push(new lr($.key,$.value,"exponential functions not supported")),$.styleSpec.$version>=8&&($e&&!es($.valueSpec)?Ue.push(new lr($.key,$.value,"property functions not supported")):Ce&&!fu($.valueSpec)&&Ue.push(new lr($.key,$.value,"zoom functions not supported"))),I!=="categorical"&&!De||$.value.property!==void 0||Ue.push(new lr($.key,$.value,'"property" property is required')),Ue;function He(et){let it=[];const _t=et.value,Et=et.key;if(Jr(_t)!=="array")return[new lr(Et,_t,`array expected, ${Jr(_t)} found`)];if(_t.length!==2)return[new lr(Et,_t,`array length 2 expected, length ${_t.length} found`)];if(De){if(Jr(_t[0])!=="object")return[new lr(Et,_t,`object expected, ${Jr(_t[0])} found`)];if(_t[0].zoom===void 0)return[new lr(Et,_t,"object stop key must have zoom")];if(_t[0].value===void 0)return[new lr(Et,_t,"object stop key must have value")];const Bt=Ai(_t[0].zoom);if(typeof Bt!="number")return[new lr(Et,_t[0].zoom,"stop zoom values must be numbers")];if(_e&&_e>Bt)return[new lr(Et,_t[0].zoom,"stop zoom values must appear in ascending order")];Bt!==_e&&(_e=Bt,ne=void 0,Te={}),it=it.concat(lo({key:`${Et}[0]`,value:_t[0],valueSpec:{zoom:{}},style:et.style,styleSpec:et.styleSpec,objectElementValidators:{zoom:Sc,value:We}}))}else it=it.concat(We({key:`${Et}[0]`,value:_t[0],valueSpec:{},style:et.style,styleSpec:et.styleSpec},_t));return Ol(la(_t[1]))?it.concat([new lr(`${Et}[1]`,_t[1],"expressions are not allowed in function stops.")]):it.concat(Gi({key:`${Et}[1]`,value:_t[1],valueSpec:y,style:et.style,styleSpec:et.styleSpec}))}function We(et,it){const _t=Jr(et.value),Et=Ai(et.value),Bt=et.value!==null?et.value:it;if(Q){if(_t!==Q)return[new lr(et.key,Bt,`${_t} stop domain type must match previous stop domain type ${Q}`)]}else Q=_t;if(_t!=="number"&&_t!=="string"&&_t!=="boolean"&&typeof Et!="number"&&typeof Et!="string"&&typeof Et!="boolean")return[new lr(et.key,Bt,"stop domain value must be a number, string, or boolean")];if(_t!=="number"&&I!=="categorical"){let qt=`number expected, ${_t} found`;return es(y)&&I===void 0&&(qt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new lr(et.key,Bt,qt)]}return I!=="categorical"||_t!=="number"||typeof Et=="number"&&isFinite(Et)&&Math.floor(Et)===Et?I!=="categorical"&&_t==="number"&&typeof Et=="number"&&typeof ne=="number"&&ne!==void 0&&Et<ne?[new lr(et.key,Bt,"stop domain values must appear in ascending order")]:(ne=Et,I==="categorical"&&Et in Te?[new lr(et.key,Bt,"stop domain values must be unique")]:(Te[Et]=!0,[])):[new lr(et.key,Bt,`integer expected, found ${String(Et)}`)]}}function xo($){const y=($.expressionContext==="property"?Ac:ns)(la($.value),$.valueSpec);if(y.result==="error")return y.value.map(Q=>new lr(`${$.key}${Q.key}`,$.value,Q.message));const I=y.value.expression||y.value._styleExpression.expression;if($.expressionContext==="property"&&$.propertyKey==="text-font"&&!I.outputDefined())return[new lr($.key,$.value,`Invalid data expression for "${$.propertyKey}". Output values must be contained as literals within the expression.`)];if($.expressionContext==="property"&&$.propertyType==="layout"&&!fa(I))return[new lr($.key,$.value,'"feature-state" data expressions are not supported with layout properties.')];if($.expressionContext==="filter")return Cc(I,$);if($.expressionContext&&$.expressionContext.indexOf("cluster")===0){if(!jo(I,["zoom","feature-state"]))return[new lr($.key,$.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if($.expressionContext==="cluster-initial"&&!No(I))return[new lr($.key,$.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cc($,y){const I=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(y.valueSpec&&y.valueSpec.expression)for(const ne of y.valueSpec.expression.parameters)I.delete(ne);if(I.size===0)return[];const Q=[];return $ instanceof so&&I.has($.name)?[new lr(y.key,y.value,`["${$.name}"] expression is not supported in a filter for a ${y.object.type} layer with id: ${y.object.id}`)]:($.eachChild(ne=>{Q.push(...Cc(ne,y))}),Q)}function Ws($){const y=$.key,I=$.value,Q=$.valueSpec,ne=[];return Array.isArray(Q.values)?Q.values.indexOf(Ai(I))===-1&&ne.push(new lr(y,I,`expected one of [${Q.values.join(", ")}], ${JSON.stringify(I)} found`)):Object.keys(Q.values).indexOf(Ai(I))===-1&&ne.push(new lr(y,I,`expected one of [${Object.keys(Q.values).join(", ")}], ${JSON.stringify(I)} found`)),ne}function Zs($){if($===!0||$===!1)return!0;if(!Array.isArray($)||$.length===0)return!1;switch($[0]){case"has":return $.length>=2&&$[1]!=="$id"&&$[1]!=="$type";case"in":return $.length>=3&&(typeof $[1]!="string"||Array.isArray($[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return $.length!==3||Array.isArray($[1])||Array.isArray($[2]);case"any":case"all":for(const y of $.slice(1))if(!Zs(y)&&typeof y!="boolean")return!1;return!0;default:return!0}}function Xs($,y="fill"){if($==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Zs($)||($=$l($));const I=$;let Q=!0;try{Q=function(De){if(!ea(De))return De;let Ue=la(De);return Rl(Ue),Ue=mu(Ue),Ue}(I)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(I,null,2)}
        `)}const ne=mn[`filter_${y}`],_e=ns(Q,ne);let Te=null;if(_e.result==="error")throw new Error(_e.value.map(De=>`${De.key}: ${De.message}`).join(", "));Te=(De,Ue,He)=>_e.value.evaluate(De,Ue,{},He);let Ce=null,$e=null;if(Q!==I){const De=ns(I,ne);if(De.result==="error")throw new Error(De.value.map(Ue=>`${Ue.key}: ${Ue.message}`).join(", "));Ce=(Ue,He,We,et,it)=>De.value.evaluate(Ue,He,{},We,void 0,void 0,et,it),$e=!No(De.value.expression)}return Te=Te,{filter:Te,dynamicFilter:Ce||void 0,needGeometry:os(Q),needFeature:!!$e}}function mu($){if(!Array.isArray($))return $;const y=function(I){if(ch.has(I[0])){for(let Q=1;Q<I.length;Q++)if(ea(I[Q]))return!0}return I}($);return y===!0?y:y.map(I=>mu(I))}function Rl($){let y=!1;const I=[];if($[0]==="case"){for(let Q=1;Q<$.length-1;Q+=2)y=y||ea($[Q]),I.push($[Q+1]);I.push($[$.length-1])}else if($[0]==="match"){y=y||ea($[1]);for(let Q=2;Q<$.length-1;Q+=2)I.push($[Q+1]);I.push($[$.length-1])}else if($[0]==="step"){y=y||ea($[1]);for(let Q=1;Q<$.length-1;Q+=2)I.push($[Q+1])}y&&($.length=0,$.push("any",...I));for(let Q=1;Q<$.length;Q++)Rl($[Q])}function ea($){if(!Array.isArray($))return!1;if((y=$[0])==="pitch"||y==="distance-from-center")return!0;var y;for(let I=1;I<$.length;I++)if(ea($[I]))return!0;return!1}const ch=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function uh($,y){return $<y?-1:$>y?1:0}function os($){if(!Array.isArray($))return!1;if($[0]==="within")return!0;for(let y=1;y<$.length;y++)if(os($[y]))return!0;return!1}function $l($){if(!$)return!0;const y=$[0];return $.length<=1?y!=="any":y==="=="?Mc($[1],$[2],"=="):y==="!="?Xi(Mc($[1],$[2],"==")):y==="<"||y===">"||y==="<="||y===">="?Mc($[1],$[2],y):y==="any"?(I=$.slice(1),["any"].concat(I.map($l))):y==="all"?["all"].concat($.slice(1).map($l)):y==="none"?["all"].concat($.slice(1).map($l).map(Xi)):y==="in"?Ks($[1],$.slice(2)):y==="!in"?Xi(Ks($[1],$.slice(2))):y==="has"?Ys($[1]):y==="!has"?Xi(Ys($[1])):y!=="within"||$;var I}function Mc($,y,I){switch($){case"$type":return[`filter-type-${I}`,y];case"$id":return[`filter-id-${I}`,y];default:return[`filter-${I}`,$,y]}}function Ks($,y){if(y.length===0)return!1;switch($){case"$type":return["filter-type-in",["literal",y]];case"$id":return["filter-id-in",["literal",y]];default:return y.length>200&&!y.some(I=>typeof I!=typeof y[0])?["filter-in-large",$,["literal",y.sort(uh)]]:["filter-in-small",$,["literal",y]]}}function Ys($){switch($){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",$]}}function Xi($){return["!",$]}function Oa($){return Zs(la($.value))?xo(po({},$,{expressionContext:"filter",valueSpec:$.styleSpec[`filter_${$.layerType||"fill"}`]})):gu($)}function gu($){const y=$.value,I=$.key;if(Jr(y)!=="array")return[new lr(I,y,`array expected, ${Jr(y)} found`)];const Q=$.styleSpec;let ne,_e=[];if(y.length<1)return[new lr(I,y,"filter array must have at least 1 element")];switch(_e=_e.concat(Ws({key:`${I}[0]`,value:y[0],valueSpec:Q.filter_operator,style:$.style,styleSpec:$.styleSpec})),Ai(y[0])){case"<":case"<=":case">":case">=":y.length>=2&&Ai(y[1])==="$type"&&_e.push(new lr(I,y,`"$type" cannot be use with operator "${y[0]}"`));case"==":case"!=":y.length!==3&&_e.push(new lr(I,y,`filter array for operator "${y[0]}" must have 3 elements`));case"in":case"!in":y.length>=2&&(ne=Jr(y[1]),ne!=="string"&&_e.push(new lr(`${I}[1]`,y[1],`string expected, ${ne} found`)));for(let Te=2;Te<y.length;Te++)ne=Jr(y[Te]),Ai(y[1])==="$type"?_e=_e.concat(Ws({key:`${I}[${Te}]`,value:y[Te],valueSpec:Q.geometry_type,style:$.style,styleSpec:$.styleSpec})):ne!=="string"&&ne!=="number"&&ne!=="boolean"&&_e.push(new lr(`${I}[${Te}]`,y[Te],`string, number, or boolean expected, ${ne} found`));break;case"any":case"all":case"none":for(let Te=1;Te<y.length;Te++)_e=_e.concat(gu({key:`${I}[${Te}]`,value:y[Te],style:$.style,styleSpec:$.styleSpec}));break;case"has":case"!has":ne=Jr(y[1]),y.length!==2?_e.push(new lr(I,y,`filter array for "${y[0]}" operator must have 2 elements`)):ne!=="string"&&_e.push(new lr(`${I}[1]`,y[1],`string expected, ${ne} found`));break;case"within":ne=Jr(y[1]),y.length!==2?_e.push(new lr(I,y,`filter array for "${y[0]}" operator must have 2 elements`)):ne!=="object"&&_e.push(new lr(`${I}[1]`,y[1],`object expected, ${ne} found`))}return _e}function Js($,y){const I=$.key,Q=$.style,ne=$.styleSpec,_e=$.value,Te=$.objectKey,Ce=ne[`${y}_${$.layerType}`];if(!Ce)return[];const $e=Te.match(/^(.*)-transition$/);if(y==="paint"&&$e&&Ce[$e[1]]&&Ce[$e[1]].transition)return Gi({key:I,value:_e,valueSpec:ne.transition,style:Q,styleSpec:ne});const De=$.valueSpec||Ce[Te];if(!De)return[new lr(I,_e,`unknown property "${Te}"`)];let Ue;if(Jr(_e)==="string"&&es(De)&&!De.tokens&&(Ue=/^{([^}]+)}$/.exec(_e)))return[new lr(I,_e,`"${Te}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Ue[1])} }\`.`)];const He=[];return $.layerType==="symbol"&&(Te==="text-field"&&Q&&!Q.glyphs&&He.push(new lr(I,_e,'use of "text-field" requires a style "glyphs" property')),Te==="text-font"&&Us(la(_e))&&Ai(_e.type)==="identity"&&He.push(new lr(I,_e,'"text-font" does not support identity functions'))),He.concat(Gi({key:$.key,value:_e,valueSpec:De,style:Q,styleSpec:ne,expressionContext:"property",propertyType:y,propertyKey:Te}))}function yu($){return Js($,"paint")}function vu($){return Js($,"layout")}function zl($){let y=[];const I=$.value,Q=$.key,ne=$.style,_e=$.styleSpec;I.type||I.ref||y.push(new lr(Q,I,'either "type" or "ref" is required'));let Te=Ai(I.type);const Ce=Ai(I.ref);if(I.id){const $e=Ai(I.id);for(let De=0;De<$.arrayIndex;De++){const Ue=ne.layers[De];Ai(Ue.id)===$e&&y.push(new lr(Q,I.id,`duplicate layer id "${I.id}", previously used at line ${Ue.id.__line__}`))}}if("ref"in I){let $e;["type","source","source-layer","filter","layout"].forEach(De=>{De in I&&y.push(new lr(Q,I[De],`"${De}" is prohibited for ref layers`))}),ne.layers.forEach(De=>{Ai(De.id)===Ce&&($e=De)}),$e?$e.ref?y.push(new lr(Q,I.ref,"ref cannot reference another ref layer")):Te=Ai($e.type):typeof Ce=="string"&&y.push(new lr(Q,I.ref,`ref layer "${Ce}" not found`))}else if(Te!=="background"&&Te!=="sky")if(I.source){const $e=ne.sources&&ne.sources[I.source],De=$e&&Ai($e.type);$e?De==="vector"&&Te==="raster"?y.push(new lr(Q,I.source,`layer "${I.id}" requires a raster source`)):De==="raster"&&Te!=="raster"?y.push(new lr(Q,I.source,`layer "${I.id}" requires a vector source`)):De!=="vector"||I["source-layer"]?De==="raster-dem"&&Te!=="hillshade"?y.push(new lr(Q,I.source,"raster-dem source can only be used with layer type 'hillshade'.")):Te!=="line"||!I.paint||!I.paint["line-gradient"]&&!I.paint["line-trim-offset"]||De==="geojson"&&$e.lineMetrics||y.push(new lr(Q,I,`layer "${I.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):y.push(new lr(Q,I,`layer "${I.id}" must specify a "source-layer"`)):y.push(new lr(Q,I.source,`source "${I.source}" not found`))}else y.push(new lr(Q,I,'missing required property "source"'));return y=y.concat(lo({key:Q,value:I,valueSpec:_e.layer,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Gi({key:`${Q}.type`,value:I.type,valueSpec:_e.layer.type,style:$.style,styleSpec:$.styleSpec,object:I,objectKey:"type"}),filter:$e=>Oa(po({layerType:Te},$e)),layout:$e=>lo({layer:I,key:$e.key,value:$e.value,valueSpec:{},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":De=>vu(po({layerType:Te},De))}}),paint:$e=>lo({layer:I,key:$e.key,value:$e.value,valueSpec:{},style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":De=>yu(po({layerType:Te},De))}})}})),y}function as($){const y=$.value,I=$.key,Q=Jr(y);return Q!=="string"?[new lr(I,y,`string expected, ${Q} found`)]:[]}const Dl={promoteId:function({key:$,value:y}){if(Jr(y)==="string")return as({key:$,value:y});{const I=[];for(const Q in y)I.push(...as({key:`${$}.${Q}`,value:y[Q]}));return I}}};function xu($){const y=$.value,I=$.key,Q=$.styleSpec,ne=$.style;if(!y.type)return[new lr(I,y,'"type" is required')];const _e=Ai(y.type);let Te;switch(_e){case"vector":case"raster":case"raster-dem":return Te=lo({key:I,value:y,valueSpec:Q[`source_${_e.replace("-","_")}`],style:$.style,styleSpec:Q,objectElementValidators:Dl}),Te;case"geojson":if(Te=lo({key:I,value:y,valueSpec:Q.source_geojson,style:ne,styleSpec:Q,objectElementValidators:Dl}),y.cluster)for(const Ce in y.clusterProperties){const[$e,De]=y.clusterProperties[Ce],Ue=typeof $e=="string"?[$e,["accumulated"],["get",Ce]]:$e;Te.push(...xo({key:`${I}.${Ce}.map`,value:De,expressionContext:"cluster-map"})),Te.push(...xo({key:`${I}.${Ce}.reduce`,value:Ue,expressionContext:"cluster-reduce"}))}return Te;case"video":return lo({key:I,value:y,valueSpec:Q.source_video,style:ne,styleSpec:Q});case"image":return lo({key:I,value:y,valueSpec:Q.source_image,style:ne,styleSpec:Q});case"canvas":return[new lr(I,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ws({key:`${I}.type`,value:y.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ne,styleSpec:Q})}}function bu($){const y=$.value,I=$.styleSpec,Q=I.light,ne=$.style;let _e=[];const Te=Jr(y);if(y===void 0)return _e;if(Te!=="object")return _e=_e.concat([new lr("light",y,`object expected, ${Te} found`)]),_e;for(const Ce in y){const $e=Ce.match(/^(.*)-transition$/);_e=_e.concat($e&&Q[$e[1]]&&Q[$e[1]].transition?Gi({key:Ce,value:y[Ce],valueSpec:I.transition,style:ne,styleSpec:I}):Q[Ce]?Gi({key:Ce,value:y[Ce],valueSpec:Q[Ce],style:ne,styleSpec:I}):[new lr(Ce,y[Ce],`unknown property "${Ce}"`)])}return _e}function ss($){const y=$.value,I=$.key,Q=$.style,ne=$.styleSpec,_e=ne.terrain;let Te=[];const Ce=Jr(y);if(y===void 0)return Te;if(Ce!=="object")return Te=Te.concat([new lr("terrain",y,`object expected, ${Ce} found`)]),Te;for(const $e in y){const De=$e.match(/^(.*)-transition$/);Te=Te.concat(De&&_e[De[1]]&&_e[De[1]].transition?Gi({key:$e,value:y[$e],valueSpec:ne.transition,style:Q,styleSpec:ne}):_e[$e]?Gi({key:$e,value:y[$e],valueSpec:_e[$e],style:Q,styleSpec:ne}):[new lr($e,y[$e],`unknown property "${$e}"`)])}if(y.source){const $e=Q.sources&&Q.sources[y.source],De=$e&&Ai($e.type);$e?De!=="raster-dem"&&Te.push(new lr(I,y.source,`terrain cannot be used with a source of type ${String(De)}, it only be used with a "raster-dem" source type`)):Te.push(new lr(I,y.source,`source "${y.source}" not found`))}else Te.push(new lr(I,y,'terrain is missing required property "source"'));return Te}function wu($){const y=$.value,I=$.style,Q=$.styleSpec,ne=Q.fog;let _e=[];const Te=Jr(y);if(y===void 0)return _e;if(Te!=="object")return _e=_e.concat([new lr("fog",y,`object expected, ${Te} found`)]),_e;for(const Ce in y){const $e=Ce.match(/^(.*)-transition$/);_e=_e.concat($e&&ne[$e[1]]&&ne[$e[1]].transition?Gi({key:Ce,value:y[Ce],valueSpec:Q.transition,style:I,styleSpec:Q}):ne[Ce]?Gi({key:Ce,value:y[Ce],valueSpec:ne[Ce],style:I,styleSpec:Q}):[new lr(Ce,y[Ce],`unknown property "${Ce}"`)])}return _e}const ta={"*":()=>[],array:kc,boolean:function($){const y=$.value,I=$.key,Q=Jr(y);return Q!=="boolean"?[new lr(I,y,`boolean expected, ${Q} found`)]:[]},number:Sc,color:function($){const y=$.key,I=$.value,Q=Jr(I);return Q!=="string"?[new lr(y,I,`color expected, ${Q} found`)]:da.parseCSSColor(I)===null?[new lr(y,I,`color expected, "${I}" found`)]:[]},enum:Ws,filter:Oa,function:Hs,layer:zl,object:lo,source:xu,light:bu,terrain:ss,fog:wu,string:as,formatted:function($){return as($).length===0?[]:xo($)},resolvedImage:function($){return as($).length===0?[]:xo($)},projection:function($){const y=$.value,I=$.styleSpec,Q=I.projection,ne=$.style;let _e=[];const Te=Jr(y);if(Te==="object")for(const Ce in y)_e=_e.concat(Gi({key:Ce,value:y[Ce],valueSpec:Q[Ce],style:ne,styleSpec:I}));else Te!=="string"&&(_e=_e.concat([new lr("projection",y,`object or string expected, ${Te} found`)]));return _e}};function Gi($){const y=$.value,I=$.valueSpec,Q=$.styleSpec;return I.expression&&Us(Ai(y))?Hs($):I.expression&&Ol(la(y))?xo($):I.type&&ta[I.type]?ta[I.type]($):lo(po({},$,{valueSpec:I.type?Q[I.type]:I}))}function hh($){const y=$.value,I=$.key,Q=as($);return Q.length||(y.indexOf("{fontstack}")===-1&&Q.push(new lr(I,y,'"glyphs" url must include a "{fontstack}" token')),y.indexOf("{range}")===-1&&Q.push(new lr(I,y,'"glyphs" url must include a "{range}" token'))),Q}function Ll($,y=mn){return bo(Gi({key:"",value:$,valueSpec:y.$root,styleSpec:y,style:$,objectElementValidators:{glyphs:hh,"*":()=>[]}}))}const Bl=$=>bo(yu($)),Eu=$=>bo(vu($));function bo($){return $.slice().sort((y,I)=>y.line&&I.line?y.line-I.line:0)}function Ic($,y){let I=!1;if(y&&y.length)for(const Q of y)$.fire(new ti(new Error(Q.message))),I=!0;return I}var Ra=wo;function wo($,y,I){var Q=this.cells=[];if($ instanceof ArrayBuffer){this.arrayBuffer=$;var ne=new Int32Array(this.arrayBuffer);$=ne[0],this.d=(y=ne[1])+2*(I=ne[2]);for(var _e=0;_e<this.d*this.d;_e++){var Te=ne[3+_e],Ce=ne[3+_e+1];Q.push(Te===Ce?null:ne.subarray(Te,Ce))}var $e=ne[3+Q.length+1];this.keys=ne.subarray(ne[3+Q.length],$e),this.bboxes=ne.subarray($e),this.insert=this._insertReadonly}else{this.d=y+2*I;for(var De=0;De<this.d*this.d;De++)Q.push([]);this.keys=[],this.bboxes=[]}this.n=y,this.extent=$,this.padding=I,this.scale=y/$,this.uid=0;var Ue=I/y*$;this.min=-Ue,this.max=$+Ue}wo.prototype.insert=function($,y,I,Q,ne){this._forEachCell(y,I,Q,ne,this._insertCell,this.uid++),this.keys.push($),this.bboxes.push(y),this.bboxes.push(I),this.bboxes.push(Q),this.bboxes.push(ne)},wo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},wo.prototype._insertCell=function($,y,I,Q,ne,_e){this.cells[ne].push(_e)},wo.prototype.query=function($,y,I,Q,ne){var _e=this.min,Te=this.max;if($<=_e&&y<=_e&&Te<=I&&Te<=Q&&!ne)return Array.prototype.slice.call(this.keys);var Ce=[];return this._forEachCell($,y,I,Q,this._queryCell,Ce,{},ne),Ce},wo.prototype._queryCell=function($,y,I,Q,ne,_e,Te,Ce){var $e=this.cells[ne];if($e!==null)for(var De=this.keys,Ue=this.bboxes,He=0;He<$e.length;He++){var We=$e[He];if(Te[We]===void 0){var et=4*We;(Ce?Ce(Ue[et+0],Ue[et+1],Ue[et+2],Ue[et+3]):$<=Ue[et+2]&&y<=Ue[et+3]&&I>=Ue[et+0]&&Q>=Ue[et+1])?(Te[We]=!0,_e.push(De[We])):Te[We]=!1}}},wo.prototype._forEachCell=function($,y,I,Q,ne,_e,Te,Ce){for(var $e=this._convertToCellCoord($),De=this._convertToCellCoord(y),Ue=this._convertToCellCoord(I),He=this._convertToCellCoord(Q),We=$e;We<=Ue;We++)for(var et=De;et<=He;et++){var it=this.d*et+We;if((!Ce||Ce(this._convertFromCellCoord(We),this._convertFromCellCoord(et),this._convertFromCellCoord(We+1),this._convertFromCellCoord(et+1)))&&ne.call(this,$,y,I,Q,it,_e,Te,Ce))return}},wo.prototype._convertFromCellCoord=function($){return($-this.padding)/this.scale},wo.prototype._convertToCellCoord=function($){return Math.max(0,Math.min(this.d-1,Math.floor($*this.scale)+this.padding))},wo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var $=this.cells,y=3+this.cells.length+1+1,I=0,Q=0;Q<this.cells.length;Q++)I+=this.cells[Q].length;var ne=new Int32Array(y+I+this.keys.length+this.bboxes.length);ne[0]=this.extent,ne[1]=this.n,ne[2]=this.padding;for(var _e=y,Te=0;Te<$.length;Te++){var Ce=$[Te];ne[3+Te]=_e,ne.set(Ce,_e),_e+=Ce.length}return ne[3+$.length]=_e,ne.set(this.keys,_e),ne[3+$.length+1]=_e+=this.keys.length,ne.set(this.bboxes,_e),_e+=this.bboxes.length,ne.buffer};const na={};function cr($,y,I={}){Object.defineProperty($,"_classRegistryKey",{value:y,writeable:!1}),na[y]={klass:$,omit:I.omit||[]}}cr(Object,"Object"),Ra.serialize=function($,y){const I=$.toArrayBuffer();return y&&y.push(I),{buffer:I}},Ra.deserialize=function($){return new Ra($.buffer)},Object.defineProperty(Ra,"name",{value:"Grid"}),cr(Ra,"Grid"),cr(ri,"Color"),cr(Error,"Error"),cr(pn,"AJAXError"),cr(ao,"ResolvedImage"),cr(rs,"StylePropertyFunction"),cr(Ec,"StyleExpression",{omit:["_evaluator"]}),cr(qs,"ZoomDependentExpression"),cr(Tc,"ZoomConstantExpression"),cr(so,"CompoundExpression",{omit:["_evaluate"]});for(const $ in js)na[js[$]._classRegistryKey]||cr(js[$],`Expression${$}`);function ls($){return $&&typeof ArrayBuffer!="undefined"&&($ instanceof ArrayBuffer||$.constructor&&$.constructor.name==="ArrayBuffer")}function Tu($){return xe.ImageBitmap&&$ instanceof xe.ImageBitmap}function cs($,y){if($==null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||$ instanceof Boolean||$ instanceof Number||$ instanceof String||$ instanceof Date||$ instanceof RegExp)return $;if(ls($)||Tu($))return y&&y.push($),$;if(ArrayBuffer.isView($)){const I=$;return y&&y.push(I.buffer),I}if($ instanceof xe.ImageData)return y&&y.push($.data.buffer),$;if(Array.isArray($)){const I=[];for(const Q of $)I.push(cs(Q,y));return I}if(typeof $=="object"){const I=$.constructor,Q=I._classRegistryKey;if(!Q)throw new Error(`can't serialize object of unregistered class ${Q}`);const ne=I.serialize?I.serialize($,y):{};if(!I.serialize){for(const _e in $)$.hasOwnProperty(_e)&&(na[Q].omit.indexOf(_e)>=0||(ne[_e]=cs($[_e],y)));$ instanceof Error&&(ne.message=$.message)}if(ne.$name)throw new Error("$name property is reserved for worker serialization logic.");return Q!=="Object"&&(ne.$name=Q),ne}throw new Error("can't serialize object of type "+typeof $)}function Qs($){if($==null||typeof $=="boolean"||typeof $=="number"||typeof $=="string"||$ instanceof Boolean||$ instanceof Number||$ instanceof String||$ instanceof Date||$ instanceof RegExp||ls($)||Tu($)||ArrayBuffer.isView($)||$ instanceof xe.ImageData)return $;if(Array.isArray($))return $.map(Qs);if(typeof $=="object"){const y=$.$name||"Object",{klass:I}=na[y];if(!I)throw new Error(`can't deserialize unregistered class ${y}`);if(I.deserialize)return I.deserialize($);const Q=Object.create(I.prototype);for(const ne of Object.keys($))ne!=="$name"&&(Q[ne]=Qs($[ne]));return Q}throw new Error("can't deserialize object of type "+typeof $)}class Pc{constructor(){this.first=!0}update(y,I){const Q=Math.floor(y);return this.first?(this.first=!1,this.lastIntegerZoom=Q,this.lastIntegerZoomTime=0,this.lastZoom=y,this.lastFloorZoom=Q,!0):(this.lastFloorZoom>Q?(this.lastIntegerZoom=Q+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<Q&&(this.lastIntegerZoom=Q,this.lastIntegerZoomTime=I),y!==this.lastZoom&&(this.lastZoom=y,this.lastFloorZoom=Q,!0))}}const Au=$=>$>=1536&&$<=1791,ku=$=>$>=1872&&$<=1919,Su=$=>$>=2208&&$<=2303,Cu=$=>$>=11904&&$<=12031,el=$=>$>=12032&&$<=12255,ai=$=>$>=12272&&$<=12287,Fl=$=>$>=12288&&$<=12351,pi=$=>$>=12352&&$<=12447,qi=$=>$>=12448&&$<=12543,Oc=$=>$>=12544&&$<=12591,Rc=$=>$>=12704&&$<=12735,$c=$=>$>=12736&&$<=12783,_o=$=>$>=12784&&$<=12799,ga=$=>$>=12800&&$<=13055,zc=$=>$>=13056&&$<=13311,ya=$=>$>=13312&&$<=19903,tl=$=>$>=19968&&$<=40959,Nl=$=>$>=40960&&$<=42127,ra=$=>$>=42128&&$<=42191,Dc=$=>$>=44032&&$<=55215,jl=$=>$>=63744&&$<=64255,zo=$=>$>=64336&&$<=65023,Lc=$=>$>=65040&&$<=65055,Ul=$=>$>=65072&&$<=65103,qr=$=>$>=65104&&$<=65135,Bc=$=>$>=65136&&$<=65279,Vl=$=>$>=65280&&$<=65519;function nl($){for(const y of $)if(rl(y.charCodeAt(0)))return!0;return!1}function Fc($){for(const y of $)if(!Nc(y.charCodeAt(0)))return!1;return!0}function Nc($){return!(Au($)||ku($)||Su($)||zo($)||Bc($))}function rl($){return!($!==746&&$!==747&&($<4352||!(Rc($)||Oc($)||Ul($)&&!($>=65097&&$<=65103)||jl($)||zc($)||Cu($)||$c($)||!(!Fl($)||$>=12296&&$<=12305||$>=12308&&$<=12319||$===12336)||ya($)||tl($)||ga($)||(y=>y>=12592&&y<=12687)($)||(y=>y>=43360&&y<=43391)($)||(y=>y>=55216&&y<=55295)($)||(y=>y>=4352&&y<=4607)($)||Dc($)||pi($)||ai($)||(y=>y>=12688&&y<=12703)($)||el($)||_o($)||qi($)&&$!==12540||!(!Vl($)||$===65288||$===65289||$===65293||$>=65306&&$<=65310||$===65339||$===65341||$===65343||$>=65371&&$<=65503||$===65507||$>=65512&&$<=65519)||!(!qr($)||$>=65112&&$<=65118||$>=65123&&$<=65126)||(y=>y>=5120&&y<=5759)($)||(y=>y>=6320&&y<=6399)($)||Lc($)||(y=>y>=19904&&y<=19967)($)||Nl($)||ra($))))}function us($){return!(rl($)||function(y){return!!((I=>I>=128&&I<=255)(y)&&(y===167||y===169||y===174||y===177||y===188||y===189||y===190||y===215||y===247)||(I=>I>=8192&&I<=8303)(y)&&(y===8214||y===8224||y===8225||y===8240||y===8241||y===8251||y===8252||y===8258||y===8263||y===8264||y===8265||y===8273)||(I=>I>=8448&&I<=8527)(y)||(I=>I>=8528&&I<=8591)(y)||(I=>I>=8960&&I<=9215)(y)&&(y>=8960&&y<=8967||y>=8972&&y<=8991||y>=8996&&y<=9e3||y===9003||y>=9085&&y<=9114||y>=9150&&y<=9165||y===9167||y>=9169&&y<=9179||y>=9186&&y<=9215)||(I=>I>=9216&&I<=9279)(y)&&y!==9251||(I=>I>=9280&&I<=9311)(y)||(I=>I>=9312&&I<=9471)(y)||(I=>I>=9632&&I<=9727)(y)||(I=>I>=9728&&I<=9983)(y)&&!(y>=9754&&y<=9759)||(I=>I>=11008&&I<=11263)(y)&&(y>=11026&&y<=11055||y>=11088&&y<=11097||y>=11192&&y<=11243)||Fl(y)||qi(y)||(I=>I>=57344&&I<=63743)(y)||Ul(y)||qr(y)||Vl(y)||y===8734||y===8756||y===8757||y>=9984&&y<=10087||y>=10102&&y<=10131||y===65532||y===65533)}($))}function de($){return $>=1424&&$<=2303||zo($)||Bc($)}function U($,y){return!(!y&&de($)||$>=2304&&$<=3583||$>=3840&&$<=4255||(I=>I>=6016&&I<=6143)($))}function ee($){for(const y of $)if(de(y.charCodeAt(0)))return!0;return!1}const be="deferred",Ie="loading",Oe="loaded";let Le=null,Fe="unavailable",Ge=null;const Ke=function($){$&&typeof $=="string"&&$.indexOf("NetworkError")>-1&&(Fe="error"),Le&&Le($)};function Ye(){ct.fire(new oi("pluginStateChange",{pluginStatus:Fe,pluginURL:Ge}))}const ct=new vr,mt=function(){return Fe},Mt=function(){if(Fe!==be||!Ge)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fe=Ie,Ye(),Ge&&fn({url:Ge},$=>{$?Ke($):(Fe=Oe,Ye())})},At={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Fe===Oe||At.applyArabicShaping!=null,isLoading:()=>Fe===Ie,setState($){Fe=$.pluginStatus,Ge=$.pluginURL},isParsed:()=>At.applyArabicShaping!=null&&At.processBidirectionalText!=null&&At.processStyledBidirectionalText!=null,getPluginURL:()=>Ge};class Tt{constructor(y,I){this.zoom=y,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition,this.pitch=I.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pc,this.transition={},this.pitch=0)}isSupportedScript(y){return function(I,Q){for(const ne of I)if(!U(ne.charCodeAt(0),Q))return!1;return!0}(y,At.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const y=this.zoom,I=y-Math.floor(y),Q=this.crossFadingFactor();return y>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*Q}:{fromScale:.5,toScale:1,t:1-(1-Q)*I}}}class kt{constructor(y,I){this.property=y,this.value=I,this.expression=function(Q,ne){if(Us(Q))return new rs(Q,ne);if(Ol(Q)){const _e=Ac(Q,ne);if(_e.result==="error")throw new Error(_e.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));return _e.value}{let _e=Q;return typeof Q=="string"&&ne.type==="color"&&(_e=ri.parse(Q)),{kind:"constant",evaluate:()=>_e}}}(I===void 0?y.specification.default:I,y.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(y,I,Q){return this.property.possiblyEvaluate(this,y,I,Q)}}class wt{constructor(y){this.property=y,this.value=new kt(y,void 0)}transitioned(y,I){return new Pt(this.property,this.value,I,bt({},y.transition,this.transition),y.now)}untransitioned(){return new Pt(this.property,this.value,null,{},0)}}class $t{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitionablePropertyValues)}getValue(y){return Ut(this._values[y].value.value)}setValue(y,I){this._values.hasOwnProperty(y)||(this._values[y]=new wt(this._values[y].property)),this._values[y].value=new kt(this._values[y].property,I===null?void 0:Ut(I))}getTransition(y){return Ut(this._values[y].transition)}setTransition(y,I){this._values.hasOwnProperty(y)||(this._values[y]=new wt(this._values[y].property)),this._values[y].transition=Ut(I)||void 0}serialize(){const y={};for(const I of Object.keys(this._values)){const Q=this.getValue(I);Q!==void 0&&(y[I]=Q);const ne=this.getTransition(I);ne!==void 0&&(y[`${I}-transition`]=ne)}return y}transitioned(y,I){const Q=new Yt(this._properties);for(const ne of Object.keys(this._values))Q._values[ne]=this._values[ne].transitioned(y,I._values[ne]);return Q}untransitioned(){const y=new Yt(this._properties);for(const I of Object.keys(this._values))y._values[I]=this._values[I].untransitioned();return y}}class Pt{constructor(y,I,Q,ne,_e){const Te=ne.delay||0,Ce=ne.duration||0;_e=_e||0,this.property=y,this.value=I,this.begin=_e+Te,this.end=this.begin+Ce,y.specification.transition&&(ne.delay||ne.duration)&&(this.prior=Q)}possiblyEvaluate(y,I,Q){const ne=y.now||0,_e=this.value.possiblyEvaluate(y,I,Q),Te=this.prior;if(Te){if(ne>this.end)return this.prior=null,_e;if(this.value.isDataDriven())return this.prior=null,_e;if(ne<this.begin)return Te.possiblyEvaluate(y,I,Q);{const Ce=(ne-this.begin)/(this.end-this.begin);return this.property.interpolate(Te.possiblyEvaluate(y,I,Q),_e,ze(Ce))}}return _e}}class Yt{constructor(y){this._properties=y,this._values=Object.create(y.defaultTransitioningPropertyValues)}possiblyEvaluate(y,I,Q){const ne=new Xt(this._properties);for(const _e of Object.keys(this._values))ne._values[_e]=this._values[_e].possiblyEvaluate(y,I,Q);return ne}hasTransition(){for(const y of Object.keys(this._values))if(this._values[y].prior)return!0;return!1}}class Kt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPropertyValues)}getValue(y){return Ut(this._values[y].value)}setValue(y,I){this._values[y]=new kt(this._values[y].property,I===null?void 0:Ut(I))}serialize(){const y={};for(const I of Object.keys(this._values)){const Q=this.getValue(I);Q!==void 0&&(y[I]=Q)}return y}possiblyEvaluate(y,I,Q){const ne=new Xt(this._properties);for(const _e of Object.keys(this._values))ne._values[_e]=this._values[_e].possiblyEvaluate(y,I,Q);return ne}}class Vt{constructor(y,I,Q){this.property=y,this.value=I,this.parameters=Q}isConstant(){return this.value.kind==="constant"}constantOr(y){return this.value.kind==="constant"?this.value.value:y}evaluate(y,I,Q,ne){return this.property.evaluate(this.value,this.parameters,y,I,Q,ne)}}class Xt{constructor(y){this._properties=y,this._values=Object.create(y.defaultPossiblyEvaluatedValues)}get(y){return this._values[y]}}class Ht{constructor(y){this.specification=y}possiblyEvaluate(y,I){return y.expression.evaluate(I)}interpolate(y,I,Q){const ne=Ds[this.specification.type];return ne?ne(y,I,Q):y}}class an{constructor(y,I){this.specification=y,this.overrides=I}possiblyEvaluate(y,I,Q,ne){return new Vt(this,y.expression.kind==="constant"||y.expression.kind==="camera"?{kind:"constant",value:y.expression.evaluate(I,null,{},Q,ne)}:y.expression,I)}interpolate(y,I,Q){if(y.value.kind!=="constant"||I.value.kind!=="constant")return y;if(y.value.value===void 0||I.value.value===void 0)return new Vt(this,{kind:"constant",value:void 0},y.parameters);const ne=Ds[this.specification.type];return ne?new Vt(this,{kind:"constant",value:ne(y.value.value,I.value.value,Q)},y.parameters):y}evaluate(y,I,Q,ne,_e,Te){return y.kind==="constant"?y.value:y.evaluate(I,Q,ne,_e,Te)}}class _n extends an{possiblyEvaluate(y,I,Q,ne){if(y.value===void 0)return new Vt(this,{kind:"constant",value:void 0},I);if(y.expression.kind==="constant"){const _e=y.expression.evaluate(I,null,{},Q,ne),Te=y.property.specification.type==="resolvedImage"&&typeof _e!="string"?_e.name:_e,Ce=this._calculate(Te,Te,Te,I);return new Vt(this,{kind:"constant",value:Ce},I)}if(y.expression.kind==="camera"){const _e=this._calculate(y.expression.evaluate({zoom:I.zoom-1}),y.expression.evaluate({zoom:I.zoom}),y.expression.evaluate({zoom:I.zoom+1}),I);return new Vt(this,{kind:"constant",value:_e},I)}return new Vt(this,y.expression,I)}evaluate(y,I,Q,ne,_e,Te){if(y.kind==="source"){const Ce=y.evaluate(I,Q,ne,_e,Te);return this._calculate(Ce,Ce,Ce,I)}return y.kind==="composite"?this._calculate(y.evaluate({zoom:Math.floor(I.zoom)-1},Q,ne),y.evaluate({zoom:Math.floor(I.zoom)},Q,ne),y.evaluate({zoom:Math.floor(I.zoom)+1},Q,ne),I):y.value}_calculate(y,I,Q,ne){return ne.zoom>ne.zoomHistory.lastIntegerZoom?{from:y,to:I,other:Q}:{from:Q,to:I,other:y}}interpolate(y){return y}}class Hn{constructor(y){this.specification=y}possiblyEvaluate(y,I,Q,ne){if(y.value!==void 0){if(y.expression.kind==="constant"){const _e=y.expression.evaluate(I,null,{},Q,ne);return this._calculate(_e,_e,_e,I)}return this._calculate(y.expression.evaluate(new Tt(Math.floor(I.zoom-1),I)),y.expression.evaluate(new Tt(Math.floor(I.zoom),I)),y.expression.evaluate(new Tt(Math.floor(I.zoom+1),I)),I)}}_calculate(y,I,Q,ne){return ne.zoom>ne.zoomHistory.lastIntegerZoom?{from:y,to:I}:{from:Q,to:I}}interpolate(y){return y}}class dn{constructor(y){this.specification=y}possiblyEvaluate(y,I,Q,ne){return!!y.expression.evaluate(I,null,{},Q,ne)}interpolate(){return!1}}class Rn{constructor(y){this.properties=y,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const I=new Tt(0,{});for(const Q in y){const ne=y[Q];ne.specification.overridable&&this.overridableProperties.push(Q);const _e=this.defaultPropertyValues[Q]=new kt(ne,void 0),Te=this.defaultTransitionablePropertyValues[Q]=new wt(ne);this.defaultTransitioningPropertyValues[Q]=Te.untransitioned(),this.defaultPossiblyEvaluatedValues[Q]=_e.possiblyEvaluate(I)}}}function Fn($,y){return 256*($=Xe(Math.floor($),0,255))+Xe(Math.floor(y),0,255)}cr(an,"DataDrivenProperty"),cr(Ht,"DataConstantProperty"),cr(_n,"CrossFadedDataDrivenProperty"),cr(Hn,"CrossFadedProperty"),cr(dn,"ColorRampProperty");const Qn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class An{constructor(y,I){this._structArray=y,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Wn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(y,I){return y._trim(),I&&(y.isTransferred=!0,I.push(y.arrayBuffer)),{length:y.length,arrayBuffer:y.arrayBuffer}}static deserialize(y){const I=Object.create(this.prototype);return I.arrayBuffer=y.arrayBuffer,I.length=y.length,I.capacity=y.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(y){this.reserve(y),this.length=y}reserve(y){if(y>this.capacity){this.capacity=Math.max(y,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Dn($,y=1){let I=0,Q=0;return{members:$.map(ne=>{const _e=Qn[ne.type].BYTES_PER_ELEMENT,Te=I=ir(I,Math.max(y,_e)),Ce=ne.components||1;return Q=Math.max(Q,_e),I+=_e*Ce,{name:ne.name,type:ne.type,components:Ce,offset:Te}}),size:ir(I,Math.max(Q,y)),alignment:y}}function ir($,y){return Math.ceil($/y)*y}class er extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I){const Q=this.length;return this.resize(Q+1),this.emplace(Q,y,I)}emplace(y,I,Q){const ne=2*y;return this.int16[ne+0]=I,this.int16[ne+1]=Q,y}}er.prototype.bytesPerElement=4,cr(er,"StructArrayLayout2i4");class dr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,Q){const ne=this.length;return this.resize(ne+1),this.emplace(ne,y,I,Q)}emplace(y,I,Q,ne){const _e=3*y;return this.int16[_e+0]=I,this.int16[_e+1]=Q,this.int16[_e+2]=ne,y}}dr.prototype.bytesPerElement=6,cr(dr,"StructArrayLayout3i6");class gr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne){const _e=this.length;return this.resize(_e+1),this.emplace(_e,y,I,Q,ne)}emplace(y,I,Q,ne,_e){const Te=4*y;return this.int16[Te+0]=I,this.int16[Te+1]=Q,this.int16[Te+2]=ne,this.int16[Te+3]=_e,y}}gr.prototype.bytesPerElement=8,cr(gr,"StructArrayLayout4i8");class Tr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce){const $e=this.length;return this.resize($e+1),this.emplace($e,y,I,Q,ne,_e,Te,Ce)}emplace(y,I,Q,ne,_e,Te,Ce,$e){const De=6*y,Ue=12*y,He=3*y;return this.int16[De+0]=I,this.int16[De+1]=Q,this.uint8[Ue+4]=ne,this.uint8[Ue+5]=_e,this.uint8[Ue+6]=Te,this.uint8[Ue+7]=Ce,this.float32[He+2]=$e,y}}Tr.prototype.bytesPerElement=12,cr(Tr,"StructArrayLayout2i4ub1f12");class Ur extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne){const _e=this.length;return this.resize(_e+1),this.emplace(_e,y,I,Q,ne)}emplace(y,I,Q,ne,_e){const Te=4*y;return this.float32[Te+0]=I,this.float32[Te+1]=Q,this.float32[Te+2]=ne,this.float32[Te+3]=_e,y}}Ur.prototype.bytesPerElement=16,cr(Ur,"StructArrayLayout4f16");class fr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce,$e,De,Ue){const He=this.length;return this.resize(He+1),this.emplace(He,y,I,Q,ne,_e,Te,Ce,$e,De,Ue)}emplace(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He){const We=10*y;return this.uint16[We+0]=I,this.uint16[We+1]=Q,this.uint16[We+2]=ne,this.uint16[We+3]=_e,this.uint16[We+4]=Te,this.uint16[We+5]=Ce,this.uint16[We+6]=$e,this.uint16[We+7]=De,this.uint16[We+8]=Ue,this.uint16[We+9]=He,y}}fr.prototype.bytesPerElement=20,cr(fr,"StructArrayLayout10ui20");class Cr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce,$e){const De=this.length;return this.resize(De+1),this.emplace(De,y,I,Q,ne,_e,Te,Ce,$e)}emplace(y,I,Q,ne,_e,Te,Ce,$e,De){const Ue=8*y;return this.uint16[Ue+0]=I,this.uint16[Ue+1]=Q,this.uint16[Ue+2]=ne,this.uint16[Ue+3]=_e,this.uint16[Ue+4]=Te,this.uint16[Ue+5]=Ce,this.uint16[Ue+6]=$e,this.uint16[Ue+7]=De,y}}Cr.prototype.bytesPerElement=16,cr(Cr,"StructArrayLayout8ui16");class Wr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,y,I,Q,ne,_e,Te)}emplace(y,I,Q,ne,_e,Te,Ce){const $e=6*y;return this.int16[$e+0]=I,this.int16[$e+1]=Q,this.int16[$e+2]=ne,this.int16[$e+3]=_e,this.int16[$e+4]=Te,this.int16[$e+5]=Ce,y}}Wr.prototype.bytesPerElement=12,cr(Wr,"StructArrayLayout6i12");class li extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We){const et=this.length;return this.resize(et+1),this.emplace(et,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We)}emplace(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et){const it=12*y;return this.int16[it+0]=I,this.int16[it+1]=Q,this.int16[it+2]=ne,this.int16[it+3]=_e,this.uint16[it+4]=Te,this.uint16[it+5]=Ce,this.uint16[it+6]=$e,this.uint16[it+7]=De,this.int16[it+8]=Ue,this.int16[it+9]=He,this.int16[it+10]=We,this.int16[it+11]=et,y}}li.prototype.bytesPerElement=24,cr(li,"StructArrayLayout4i4ui4i24");class bi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,y,I,Q,ne,_e,Te)}emplace(y,I,Q,ne,_e,Te,Ce){const $e=10*y,De=5*y;return this.int16[$e+0]=I,this.int16[$e+1]=Q,this.int16[$e+2]=ne,this.float32[De+2]=_e,this.float32[De+3]=Te,this.float32[De+4]=Ce,y}}bi.prototype.bytesPerElement=20,cr(bi,"StructArrayLayout3i3f20");class ii extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.uint32[1*y+0]=I,y}}ii.prototype.bytesPerElement=4,cr(ii,"StructArrayLayout1ul4");class Hi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et){const it=this.length;return this.resize(it+1),this.emplace(it,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et)}emplace(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it){const _t=20*y,Et=10*y;return this.int16[_t+0]=I,this.int16[_t+1]=Q,this.int16[_t+2]=ne,this.int16[_t+3]=_e,this.int16[_t+4]=Te,this.float32[Et+3]=Ce,this.float32[Et+4]=$e,this.float32[Et+5]=De,this.float32[Et+6]=Ue,this.int16[_t+14]=He,this.uint32[Et+8]=We,this.uint16[_t+18]=et,this.uint16[_t+19]=it,y}}Hi.prototype.bytesPerElement=40,cr(Hi,"StructArrayLayout5i4f1i1ul2ui40");class Eo extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce){const $e=this.length;return this.resize($e+1),this.emplace($e,y,I,Q,ne,_e,Te,Ce)}emplace(y,I,Q,ne,_e,Te,Ce,$e){const De=8*y;return this.int16[De+0]=I,this.int16[De+1]=Q,this.int16[De+2]=ne,this.int16[De+4]=_e,this.int16[De+5]=Te,this.int16[De+6]=Ce,this.int16[De+7]=$e,y}}Eo.prototype.bytesPerElement=16,cr(Eo,"StructArrayLayout3i2i2i16");class ia extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e){const Te=this.length;return this.resize(Te+1),this.emplace(Te,y,I,Q,ne,_e)}emplace(y,I,Q,ne,_e,Te){const Ce=4*y,$e=8*y;return this.float32[Ce+0]=I,this.float32[Ce+1]=Q,this.float32[Ce+2]=ne,this.int16[$e+6]=_e,this.int16[$e+7]=Te,y}}ia.prototype.bytesPerElement=16,cr(ia,"StructArrayLayout2f1f2i16");class fi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne){const _e=this.length;return this.resize(_e+1),this.emplace(_e,y,I,Q,ne)}emplace(y,I,Q,ne,_e){const Te=12*y,Ce=3*y;return this.uint8[Te+0]=I,this.uint8[Te+1]=Q,this.float32[Ce+1]=ne,this.float32[Ce+2]=_e,y}}fi.prototype.bytesPerElement=12,cr(fi,"StructArrayLayout2ub2f12");class yi extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,Q){const ne=this.length;return this.resize(ne+1),this.emplace(ne,y,I,Q)}emplace(y,I,Q,ne){const _e=3*y;return this.float32[_e+0]=I,this.float32[_e+1]=Q,this.float32[_e+2]=ne,y}}yi.prototype.bytesPerElement=12,cr(yi,"StructArrayLayout3f12");class Rr extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,Q){const ne=this.length;return this.resize(ne+1),this.emplace(ne,y,I,Q)}emplace(y,I,Q,ne){const _e=3*y;return this.uint16[_e+0]=I,this.uint16[_e+1]=Q,this.uint16[_e+2]=ne,y}}Rr.prototype.bytesPerElement=6,cr(Rr,"StructArrayLayout3ui6");class Ri extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et,Bt,qt,Ft,Gt,Jt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et,Bt,qt,Ft,Gt,Jt)}emplace(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et,Bt,qt,Ft,Gt,Jt,Wt){const Tn=30*y,bn=15*y,Pn=60*y;return this.int16[Tn+0]=I,this.int16[Tn+1]=Q,this.int16[Tn+2]=ne,this.float32[bn+2]=_e,this.float32[bn+3]=Te,this.uint16[Tn+8]=Ce,this.uint16[Tn+9]=$e,this.uint32[bn+5]=De,this.uint32[bn+6]=Ue,this.uint32[bn+7]=He,this.uint16[Tn+16]=We,this.uint16[Tn+17]=et,this.uint16[Tn+18]=it,this.float32[bn+10]=_t,this.float32[bn+11]=Et,this.uint8[Pn+48]=Bt,this.uint8[Pn+49]=qt,this.uint8[Pn+50]=Ft,this.uint32[bn+13]=Gt,this.int16[Tn+28]=Jt,this.uint8[Pn+58]=Wt,y}}Ri.prototype.bytesPerElement=60,cr(Ri,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class $i extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et,Bt,qt,Ft,Gt,Jt,Wt,Tn,bn,Pn,Yn,kn,Ln,Un,Bn){const Zn=this.length;return this.resize(Zn+1),this.emplace(Zn,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et,Bt,qt,Ft,Gt,Jt,Wt,Tn,bn,Pn,Yn,kn,Ln,Un,Bn)}emplace(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et,Bt,qt,Ft,Gt,Jt,Wt,Tn,bn,Pn,Yn,kn,Ln,Un,Bn,Zn){const Vn=38*y,or=19*y;return this.int16[Vn+0]=I,this.int16[Vn+1]=Q,this.int16[Vn+2]=ne,this.float32[or+2]=_e,this.float32[or+3]=Te,this.int16[Vn+8]=Ce,this.int16[Vn+9]=$e,this.int16[Vn+10]=De,this.int16[Vn+11]=Ue,this.int16[Vn+12]=He,this.int16[Vn+13]=We,this.uint16[Vn+14]=et,this.uint16[Vn+15]=it,this.uint16[Vn+16]=_t,this.uint16[Vn+17]=Et,this.uint16[Vn+18]=Bt,this.uint16[Vn+19]=qt,this.uint16[Vn+20]=Ft,this.uint16[Vn+21]=Gt,this.uint16[Vn+22]=Jt,this.uint16[Vn+23]=Wt,this.uint16[Vn+24]=Tn,this.uint16[Vn+25]=bn,this.uint16[Vn+26]=Pn,this.uint16[Vn+27]=Yn,this.uint16[Vn+28]=kn,this.uint32[or+15]=Ln,this.float32[or+16]=Un,this.float32[or+17]=Bn,this.float32[or+18]=Zn,y}}$i.prototype.bytesPerElement=76,cr($i,"StructArrayLayout3i2f6i15ui1ul3f76");class ci extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.float32[1*y+0]=I,y}}ci.prototype.bytesPerElement=4,cr(ci,"StructArrayLayout1f4");class Ki extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne,_e){const Te=this.length;return this.resize(Te+1),this.emplace(Te,y,I,Q,ne,_e)}emplace(y,I,Q,ne,_e,Te){const Ce=5*y;return this.float32[Ce+0]=I,this.float32[Ce+1]=Q,this.float32[Ce+2]=ne,this.float32[Ce+3]=_e,this.float32[Ce+4]=Te,y}}Ki.prototype.bytesPerElement=20,cr(Ki,"StructArrayLayout5f20");class $a extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I,Q,ne){const _e=this.length;return this.resize(_e+1),this.emplace(_e,y,I,Q,ne)}emplace(y,I,Q,ne,_e){const Te=6*y;return this.uint32[3*y+0]=I,this.uint16[Te+2]=Q,this.uint16[Te+3]=ne,this.uint16[Te+4]=_e,y}}$a.prototype.bytesPerElement=12,cr($a,"StructArrayLayout1ul3ui12");class eo extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y,I){const Q=this.length;return this.resize(Q+1),this.emplace(Q,y,I)}emplace(y,I,Q){const ne=2*y;return this.uint16[ne+0]=I,this.uint16[ne+1]=Q,y}}eo.prototype.bytesPerElement=4,cr(eo,"StructArrayLayout2ui4");class mo extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(y){const I=this.length;return this.resize(I+1),this.emplace(I,y)}emplace(y,I){return this.uint16[1*y+0]=I,y}}mo.prototype.bytesPerElement=2,cr(mo,"StructArrayLayout1ui2");class za extends Wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(y,I){const Q=this.length;return this.resize(Q+1),this.emplace(Q,y,I)}emplace(y,I,Q){const ne=2*y;return this.float32[ne+0]=I,this.float32[ne+1]=Q,y}}za.prototype.bytesPerElement=8,cr(za,"StructArrayLayout2f8");class Da extends An{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Da.prototype.size=12;class to extends Wr{get(y){return new Da(this,y)}}cr(to,"FillExtrusionExtArray");class La extends An{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}La.prototype.size=40;class Go extends Hi{get(y){return new La(this,y)}}cr(Go,"CollisionBoxArray");class il extends An{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(y){this._structArray.uint8[this._pos1+49]=y}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(y){this._structArray.uint8[this._pos1+50]=y}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(y){this._structArray.uint32[this._pos4+13]=y}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(y){this._structArray.uint8[this._pos1+58]=y}}il.prototype.size=60;class Zh extends Ri{get(y){return new il(this,y)}}cr(Zh,"PlacedSymbolArray");class Xh extends An{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(y){this._structArray.uint32[this._pos4+15]=y}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Xh.prototype.size=76;class Kh extends $i{get(y){return new Xh(this,y)}}cr(Kh,"SymbolInstanceArray");class dh extends ci{getoffsetX(y){return this.float32[1*y+0]}}cr(dh,"GlyphOffsetArray");class Yh extends dr{getx(y){return this.int16[3*y+0]}gety(y){return this.int16[3*y+1]}gettileUnitDistanceFromAnchor(y){return this.int16[3*y+2]}}cr(Yh,"SymbolLineVertexArray");class ph extends An{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ph.prototype.size=12;class fh extends $a{get(y){return new ph(this,y)}}cr(fh,"FeatureIndexArray");class Gl extends An{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}Gl.prototype.size=4;class To extends eo{get(y){return new Gl(this,y)}}cr(To,"FillExtrusionCentroidArray");class Jh extends An{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Jh.prototype.size=12;class Qh extends Wr{get(y){return new Jh(this,y)}}cr(Qh,"CircleGlobeExtArray");const ed=Dn([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),td=Dn([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var Mu=rc(function($){$.exports=function(y,I){var Q,ne,_e,Te,Ce,$e,De,Ue;for(ne=y.length-(Q=3&y.length),_e=I,Ce=3432918353,$e=461845907,Ue=0;Ue<ne;)De=255&y.charCodeAt(Ue)|(255&y.charCodeAt(++Ue))<<8|(255&y.charCodeAt(++Ue))<<16|(255&y.charCodeAt(++Ue))<<24,++Ue,_e=27492+(65535&(Te=5*(65535&(_e=(_e^=De=(65535&(De=(De=(65535&De)*Ce+(((De>>>16)*Ce&65535)<<16)&4294967295)<<15|De>>>17))*$e+(((De>>>16)*$e&65535)<<16)&4294967295)<<13|_e>>>19))+((5*(_e>>>16)&65535)<<16)&4294967295))+((58964+(Te>>>16)&65535)<<16);switch(De=0,Q){case 3:De^=(255&y.charCodeAt(Ue+2))<<16;case 2:De^=(255&y.charCodeAt(Ue+1))<<8;case 1:_e^=De=(65535&(De=(De=(65535&(De^=255&y.charCodeAt(Ue)))*Ce+(((De>>>16)*Ce&65535)<<16)&4294967295)<<15|De>>>17))*$e+(((De>>>16)*$e&65535)<<16)&4294967295}return _e^=y.length,_e=2246822507*(65535&(_e^=_e>>>16))+((2246822507*(_e>>>16)&65535)<<16)&4294967295,_e=3266489909*(65535&(_e^=_e>>>13))+((3266489909*(_e>>>16)&65535)<<16)&4294967295,(_e^=_e>>>16)>>>0}}),Xd=rc(function($){$.exports=function(y,I){for(var Q,ne=y.length,_e=I^ne,Te=0;ne>=4;)Q=1540483477*(65535&(Q=255&y.charCodeAt(Te)|(255&y.charCodeAt(++Te))<<8|(255&y.charCodeAt(++Te))<<16|(255&y.charCodeAt(++Te))<<24))+((1540483477*(Q>>>16)&65535)<<16),_e=1540483477*(65535&_e)+((1540483477*(_e>>>16)&65535)<<16)^(Q=1540483477*(65535&(Q^=Q>>>24))+((1540483477*(Q>>>16)&65535)<<16)),ne-=4,++Te;switch(ne){case 3:_e^=(255&y.charCodeAt(Te+2))<<16;case 2:_e^=(255&y.charCodeAt(Te+1))<<8;case 1:_e=1540483477*(65535&(_e^=255&y.charCodeAt(Te)))+((1540483477*(_e>>>16)&65535)<<16)}return _e=1540483477*(65535&(_e^=_e>>>13))+((1540483477*(_e>>>16)&65535)<<16),(_e^=_e>>>15)>>>0}}),jc=Mu,nd=Xd;jc.murmur3=Mu,jc.murmur2=nd;class Iu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(y,I,Q,ne){this.ids.push(rd(y)),this.positions.push(I,Q,ne)}getPositions(y){const I=rd(y);let Q=0,ne=this.ids.length-1;for(;Q<ne;){const Te=Q+ne>>1;this.ids[Te]>=I?ne=Te:Q=Te+1}const _e=[];for(;this.ids[Q]===I;)_e.push({index:this.positions[3*Q],start:this.positions[3*Q+1],end:this.positions[3*Q+2]}),Q++;return _e}static serialize(y,I){const Q=new Float64Array(y.ids),ne=new Uint32Array(y.positions);return ql(Q,ne,0,Q.length-1),I&&I.push(Q.buffer,ne.buffer),{ids:Q,positions:ne}}static deserialize(y){const I=new Iu;return I.ids=y.ids,I.positions=y.positions,I.indexed=!0,I}}function rd($){const y=+$;return!isNaN(y)&&Number.MIN_SAFE_INTEGER<=y&&y<=Number.MAX_SAFE_INTEGER?y:jc(String($))}function ql($,y,I,Q){for(;I<Q;){const ne=$[I+Q>>1];let _e=I-1,Te=Q+1;for(;;){do _e++;while($[_e]<ne);do Te--;while($[Te]>ne);if(_e>=Te)break;Ba($,_e,Te),Ba(y,3*_e,3*Te),Ba(y,3*_e+1,3*Te+1),Ba(y,3*_e+2,3*Te+2)}Te-I<Q-Te?(ql($,y,I,Te),I=Te+1):(ql($,y,Te+1,Q),Q=Te)}}function Ba($,y,I){const Q=$[y];$[y]=$[I],$[I]=Q}cr(Iu,"FeaturePositionMap");class Fa{constructor(y){this.gl=y.gl,this.initialized=!1}fetchUniformLocation(y,I){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(y,I),this.initialized=!0),!!this.location}}class Pu extends Fa{constructor(y){super(y),this.current=0}set(y,I,Q){this.fetchUniformLocation(y,I)&&this.current!==Q&&(this.current=Q,this.gl.uniform1f(this.location,Q))}}class id extends Fa{constructor(y){super(y),this.current=[0,0,0,0]}set(y,I,Q){this.fetchUniformLocation(y,I)&&(Q[0]===this.current[0]&&Q[1]===this.current[1]&&Q[2]===this.current[2]&&Q[3]===this.current[3]||(this.current=Q,this.gl.uniform4f(this.location,Q[0],Q[1],Q[2],Q[3])))}}class od extends Fa{constructor(y){super(y),this.current=ri.transparent}set(y,I,Q){this.fetchUniformLocation(y,I)&&(Q.r===this.current.r&&Q.g===this.current.g&&Q.b===this.current.b&&Q.a===this.current.a||(this.current=Q,this.gl.uniform4f(this.location,Q.r,Q.g,Q.b,Q.a)))}}const ad=new Float32Array(16),Kd=new Float32Array(9),Yd=new Float32Array(4);function Ou($){return[Fn(255*$.r,255*$.g),Fn(255*$.b,255*$.a)]}class hs{constructor(y,I,Q){this.value=y,this.uniformNames=I.map(ne=>`u_${ne}`),this.type=Q}setUniform(y,I,Q,ne,_e){I.set(y,_e,ne.constantOr(this.value))}getBinding(y,I){return this.type==="color"?new od(y):new Pu(y)}}class ds{constructor(y,I){this.uniformNames=I.map(Q=>`u_${Q}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(y,I){this.pixelRatioFrom=I.pixelRatio||1,this.pixelRatioTo=y.pixelRatio||1,this.patternFrom=I.tl.concat(I.br),this.patternTo=y.tl.concat(y.br)}setUniform(y,I,Q,ne,_e){const Te=_e==="u_pattern_to"||_e==="u_dash_to"?this.patternTo:_e==="u_pattern_from"||_e==="u_dash_from"?this.patternFrom:_e==="u_pixel_ratio_to"?this.pixelRatioTo:_e==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Te&&I.set(y,_e,Te)}getBinding(y,I){return I==="u_pattern_from"||I==="u_pattern_to"||I==="u_dash_from"||I==="u_dash_to"?new id(y):new Pu(y)}}class Na{constructor(y,I,Q,ne){this.expression=y,this.type=Q,this.maxValue=0,this.paintVertexAttributes=I.map(_e=>({name:`a_${_e}`,type:"Float32",components:Q==="color"?2:1,offset:0})),this.paintVertexArray=new ne}populatePaintArray(y,I,Q,ne,_e,Te){const Ce=this.paintVertexArray.length,$e=this.expression.evaluate(new Tt(0),I,{},_e,ne,Te);this.paintVertexArray.resize(y),this._setPaintValue(Ce,y,$e)}updatePaintArray(y,I,Q,ne,_e){const Te=this.expression.evaluate({zoom:0},Q,ne,void 0,_e);this._setPaintValue(y,I,Te)}_setPaintValue(y,I,Q){if(this.type==="color"){const ne=Ou(Q);for(let _e=y;_e<I;_e++)this.paintVertexArray.emplace(_e,ne[0],ne[1])}else{for(let ne=y;ne<I;ne++)this.paintVertexArray.emplace(ne,Q);this.maxValue=Math.max(this.maxValue,Math.abs(Q))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oa{constructor(y,I,Q,ne,_e,Te){this.expression=y,this.uniformNames=I.map(Ce=>`u_${Ce}_t`),this.type=Q,this.useIntegerZoom=ne,this.zoom=_e,this.maxValue=0,this.paintVertexAttributes=I.map(Ce=>({name:`a_${Ce}`,type:"Float32",components:Q==="color"?4:2,offset:0})),this.paintVertexArray=new Te}populatePaintArray(y,I,Q,ne,_e,Te){const Ce=this.expression.evaluate(new Tt(this.zoom),I,{},_e,ne,Te),$e=this.expression.evaluate(new Tt(this.zoom+1),I,{},_e,ne,Te),De=this.paintVertexArray.length;this.paintVertexArray.resize(y),this._setPaintValue(De,y,Ce,$e)}updatePaintArray(y,I,Q,ne,_e){const Te=this.expression.evaluate({zoom:this.zoom},Q,ne,void 0,_e),Ce=this.expression.evaluate({zoom:this.zoom+1},Q,ne,void 0,_e);this._setPaintValue(y,I,Te,Ce)}_setPaintValue(y,I,Q,ne){if(this.type==="color"){const _e=Ou(Q),Te=Ou(ne);for(let Ce=y;Ce<I;Ce++)this.paintVertexArray.emplace(Ce,_e[0],_e[1],Te[0],Te[1])}else{for(let _e=y;_e<I;_e++)this.paintVertexArray.emplace(_e,Q,ne);this.maxValue=Math.max(this.maxValue,Math.abs(Q),Math.abs(ne))}}upload(y){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=y.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(y,I,Q,ne,_e){const Te=this.useIntegerZoom?Math.floor(Q.zoom):Q.zoom,Ce=Xe(this.expression.interpolationFactor(Te,this.zoom,this.zoom+1),0,1);I.set(y,_e,Ce)}getBinding(y,I){return new Pu(y)}}class ps{constructor(y,I,Q,ne,_e,Te,Ce){this.expression=y,this.type=Q,this.useIntegerZoom=ne,this.zoom=_e,this.layerId=Ce,this.paintVertexAttributes=(Q==="array"?td:ed).members;for(let $e=0;$e<I.length;++$e);this.zoomInPaintVertexArray=new Te,this.zoomOutPaintVertexArray=new Te}populatePaintArray(y,I,Q){const ne=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(y),this.zoomOutPaintVertexArray.resize(y),this._setPaintValues(ne,y,I.patterns&&I.patterns[this.layerId],Q)}updatePaintArray(y,I,Q,ne,_e,Te){this._setPaintValues(y,I,Q.patterns&&Q.patterns[this.layerId],Te)}_setPaintValues(y,I,Q,ne){if(!ne||!Q)return;const{min:_e,mid:Te,max:Ce}=Q,$e=ne[_e],De=ne[Te],Ue=ne[Ce];if($e&&De&&Ue)for(let He=y;He<I;He++)this._setPaintValue(this.zoomInPaintVertexArray,He,De,$e),this._setPaintValue(this.zoomOutPaintVertexArray,He,De,Ue)}_setPaintValue(y,I,Q,ne){y.emplace(I,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],Q.pixelRatio,ne.pixelRatio)}upload(y){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=y.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=y.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class fs{constructor(y,I,Q=()=>!0){this.binders={},this._buffers=[];const ne=[];for(const _e in y.paint._values){if(!Q(_e))continue;const Te=y.paint.get(_e);if(!(Te instanceof Vt&&es(Te.property.specification)))continue;const Ce=ld(_e,y.type),$e=Te.value,De=Te.property.specification.type,Ue=Te.property.useIntegerZoom,He=Te.property.specification["property-type"],We=He==="cross-faded"||He==="cross-faded-data-driven",et=String(_e)==="line-dasharray"&&y.layout.get("line-cap").value.kind!=="constant";if($e.kind!=="constant"||et)if($e.kind==="source"||et||We){const it=cd(_e,De,"source");this.binders[_e]=We?new ps($e,Ce,De,Ue,I,it,y.id):new Na($e,Ce,De,it),ne.push(`/a_${_e}`)}else{const it=cd(_e,De,"composite");this.binders[_e]=new oa($e,Ce,De,Ue,I,it),ne.push(`/z_${_e}`)}else this.binders[_e]=We?new ds($e.value,Ce):new hs($e.value,Ce,De),ne.push(`/u_${_e}`)}this.cacheKey=ne.sort().join("")}getMaxValue(y){const I=this.binders[y];return I instanceof Na||I instanceof oa?I.maxValue:0}populatePaintArrays(y,I,Q,ne,_e,Te){for(const Ce in this.binders){const $e=this.binders[Ce];($e instanceof Na||$e instanceof oa||$e instanceof ps)&&$e.populatePaintArray(y,I,Q,ne,_e,Te)}}setConstantPatternPositions(y,I){for(const Q in this.binders){const ne=this.binders[Q];ne instanceof ds&&ne.setConstantPatternPositions(y,I)}}updatePaintArrays(y,I,Q,ne,_e,Te){let Ce=!1;for(const $e in y){const De=I.getPositions($e);for(const Ue of De){const He=Q.feature(Ue.index);for(const We in this.binders){const et=this.binders[We];if((et instanceof Na||et instanceof oa||et instanceof ps)&&et.expression.isStateDependent===!0){const it=ne.paint.get(We);et.expression=it.value,et.updatePaintArray(Ue.start,Ue.end,He,y[$e],_e,Te),Ce=!0}}}}return Ce}defines(){const y=[];for(const I in this.binders){const Q=this.binders[I];(Q instanceof hs||Q instanceof ds)&&y.push(...Q.uniformNames.map(ne=>`#define HAS_UNIFORM_${ne}`))}return y}getBinderAttributes(){const y=[];for(const I in this.binders){const Q=this.binders[I];if(Q instanceof Na||Q instanceof oa||Q instanceof ps)for(let ne=0;ne<Q.paintVertexAttributes.length;ne++)y.push(Q.paintVertexAttributes[ne].name)}return y}getBinderUniforms(){const y=[];for(const I in this.binders){const Q=this.binders[I];if(Q instanceof hs||Q instanceof ds||Q instanceof oa)for(const ne of Q.uniformNames)y.push(ne)}return y}getPaintVertexBuffers(){return this._buffers}getUniforms(y){const I=[];for(const Q in this.binders){const ne=this.binders[Q];if(ne instanceof hs||ne instanceof ds||ne instanceof oa)for(const _e of ne.uniformNames)I.push({name:_e,property:Q,binding:ne.getBinding(y,_e)})}return I}setUniforms(y,I,Q,ne,_e){for(const{name:Te,property:Ce,binding:$e}of Q)this.binders[Ce].setUniform(y,$e,_e,ne.get(Ce),Te)}updatePaintBuffers(y){this._buffers=[];for(const I in this.binders){const Q=this.binders[I];if(y&&Q instanceof ps){const ne=y.fromScale===2?Q.zoomInPaintVertexBuffer:Q.zoomOutPaintVertexBuffer;ne&&this._buffers.push(ne)}else(Q instanceof Na||Q instanceof oa)&&Q.paintVertexBuffer&&this._buffers.push(Q.paintVertexBuffer)}}upload(y){for(const I in this.binders){const Q=this.binders[I];(Q instanceof Na||Q instanceof oa||Q instanceof ps)&&Q.upload(y)}this.updatePaintBuffers()}destroy(){for(const y in this.binders){const I=this.binders[y];(I instanceof Na||I instanceof oa||I instanceof ps)&&I.destroy()}}}class ol{constructor(y,I,Q=()=>!0){this.programConfigurations={};for(const ne of y)this.programConfigurations[ne.id]=new fs(ne,I,Q);this.needsUpload=!1,this._featureMap=new Iu,this._bufferOffset=0}populatePaintArrays(y,I,Q,ne,_e,Te,Ce){for(const $e in this.programConfigurations)this.programConfigurations[$e].populatePaintArrays(y,I,ne,_e,Te,Ce);I.id!==void 0&&this._featureMap.add(I.id,Q,this._bufferOffset,y),this._bufferOffset=y,this.needsUpload=!0}updatePaintArrays(y,I,Q,ne,_e){for(const Te of Q)this.needsUpload=this.programConfigurations[Te.id].updatePaintArrays(y,this._featureMap,I,Te,ne,_e)||this.needsUpload}get(y){return this.programConfigurations[y]}upload(y){if(this.needsUpload){for(const I in this.programConfigurations)this.programConfigurations[I].upload(y);this.needsUpload=!1}}destroy(){for(const y in this.programConfigurations)this.programConfigurations[y].destroy()}}const sd={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function ld($,y){return sd[$]||[$.replace(`${y}-`,"").replace(/-/g,"_")]}const Hl={"line-pattern":{source:fr,composite:fr},"fill-pattern":{source:fr,composite:fr},"fill-extrusion-pattern":{source:fr,composite:fr},"line-dasharray":{source:Cr,composite:Cr}},Ru={color:{source:za,composite:Ur},number:{source:ci,composite:za}};function cd($,y,I){const Q=Hl[$];return Q&&Q[I]||Ru[y][I]}cr(hs,"ConstantBinder"),cr(ds,"CrossFadedConstantBinder"),cr(Na,"SourceExpressionBinder"),cr(ps,"CrossFadedCompositeBinder"),cr(oa,"CompositeExpressionBinder"),cr(fs,"ProgramConfiguration",{omit:["_buffers"]}),cr(ol,"ProgramConfigurationSet");const Wl="-transition";class Ui extends vr{constructor(y,I){if(super(),this.id=y.id,this.type=y.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,y.type!=="custom"&&(this.metadata=(y=y).metadata,this.minzoom=y.minzoom,this.maxzoom=y.maxzoom,y.type!=="background"&&y.type!=="sky"&&(this.source=y.source,this.sourceLayer=y["source-layer"],this.filter=y.filter),I.layout&&(this._unevaluatedLayout=new Kt(I.layout)),I.paint)){this._transitionablePaint=new $t(I.paint);for(const Q in y.paint)this.setPaintProperty(Q,y.paint[Q],{validate:!1});for(const Q in y.layout)this.setLayoutProperty(Q,y.layout[Q],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xt(I.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(y){return y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(y)}setLayoutProperty(y,I,Q={}){I!=null&&this._validate(Eu,`layers.${this.id}.layout.${y}`,y,I,Q)||(y!=="visibility"?this._unevaluatedLayout.setValue(y,I):this.visibility=I)}getPaintProperty(y){return pt(y,Wl)?this._transitionablePaint.getTransition(y.slice(0,-Wl.length)):this._transitionablePaint.getValue(y)}setPaintProperty(y,I,Q={}){if(I!=null&&this._validate(Bl,`layers.${this.id}.paint.${y}`,y,I,Q))return!1;if(pt(y,Wl))return this._transitionablePaint.setTransition(y.slice(0,-Wl.length),I||void 0),!1;{const ne=this._transitionablePaint._values[y],_e=ne.property.specification["property-type"]==="cross-faded-data-driven",Te=ne.value.isDataDriven(),Ce=ne.value;this._transitionablePaint.setValue(y,I),this._handleSpecialPaintPropertyUpdate(y);const $e=this._transitionablePaint._values[y].value;return $e.isDataDriven()||Te||_e||this._handleOverridablePaintPropertyUpdate(y,Ce,$e)}}_handleSpecialPaintPropertyUpdate(y){}getProgramIds(){return null}getProgramConfiguration(y){return null}_handleOverridablePaintPropertyUpdate(y,I,Q){return!1}isHidden(y){return!!(this.minzoom&&y<this.minzoom)||!!(this.maxzoom&&y>=this.maxzoom)||this.visibility==="none"}updateTransitions(y){this._transitioningPaint=this._transitionablePaint.transitioned(y,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(y,I){y.getCrossfadeParameters&&(this._crossfadeParameters=y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(y,void 0,I)),this.paint=this._transitioningPaint.possiblyEvaluate(y,void 0,I)}serialize(){const y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(y.layout=y.layout||{},y.layout.visibility=this.visibility),ut(y,(I,Q)=>!(I===void 0||Q==="layout"&&!Object.keys(I).length||Q==="paint"&&!Object.keys(I).length))}_validate(y,I,Q,ne,_e={}){return(!_e||_e.validate!==!1)&&Ic(this,y.call(Ll,{key:I,layerType:this.type,objectKey:Q,value:ne,styleSpec:mn,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const y in this.paint._values){const I=this.paint.get(y);if(I instanceof Vt&&es(I.property.specification)&&(I.value.kind==="source"||I.value.kind==="composite")&&I.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Xs(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const Jd=Dn([{name:"a_pos",components:2,type:"Int16"}],4),Qd=Dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Li{constructor(y=[]){this.segments=y}prepareSegment(y,I,Q,ne){let _e=this.segments[this.segments.length-1];return y>Li.MAX_VERTEX_ARRAY_LENGTH&&zt(`Max vertices per segment is ${Li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${y}`),(!_e||_e.vertexLength+y>Li.MAX_VERTEX_ARRAY_LENGTH||_e.sortKey!==ne)&&(_e={vertexOffset:I.length,primitiveOffset:Q.length,vertexLength:0,primitiveLength:0},ne!==void 0&&(_e.sortKey=ne),this.segments.push(_e)),_e}get(){return this.segments}destroy(){for(const y of this.segments)for(const I in y.vaos)y.vaos[I].destroy()}static simpleSegment(y,I,Q,ne){return new Li([{vertexOffset:y,primitiveOffset:I,vertexLength:Q,primitiveLength:ne,vaos:{},sortKey:0}])}}Li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,cr(Li,"SegmentVector");var Ar=8192;class ja{constructor(y,I){y&&(I?this.setSouthWest(y).setNorthEast(I):y.length===4?this.setSouthWest([y[0],y[1]]).setNorthEast([y[2],y[3]]):this.setSouthWest(y[0]).setNorthEast(y[1]))}setNorthEast(y){return this._ne=y instanceof ei?new ei(y.lng,y.lat):ei.convert(y),this}setSouthWest(y){return this._sw=y instanceof ei?new ei(y.lng,y.lat):ei.convert(y),this}extend(y){const I=this._sw,Q=this._ne;let ne,_e;if(y instanceof ei)ne=y,_e=y;else{if(!(y instanceof ja))return Array.isArray(y)?y.length===4||y.every(Array.isArray)?this.extend(ja.convert(y)):this.extend(ei.convert(y)):this;if(ne=y._sw,_e=y._ne,!ne||!_e)return this}return I||Q?(I.lng=Math.min(ne.lng,I.lng),I.lat=Math.min(ne.lat,I.lat),Q.lng=Math.max(_e.lng,Q.lng),Q.lat=Math.max(_e.lat,Q.lat)):(this._sw=new ei(ne.lng,ne.lat),this._ne=new ei(_e.lng,_e.lat)),this}getCenter(){return new ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ei(this.getWest(),this.getNorth())}getSouthEast(){return new ei(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(y){const{lng:I,lat:Q}=ei.convert(y);let ne=this._sw.lng<=I&&I<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ne=this._sw.lng>=I&&I>=this._ne.lng),this._sw.lat<=Q&&Q<=this._ne.lat&&ne}static convert(y){return!y||y instanceof ja?y:new ja(y)}}const _h=63710088e-1;class ei{constructor(y,I){if(isNaN(y)||isNaN(I))throw new Error(`Invalid LngLat object: (${y}, ${I})`);if(this.lng=+y,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ei(Je(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(y){const I=Math.PI/180,Q=this.lat*I,ne=y.lat*I,_e=Math.sin(Q)*Math.sin(ne)+Math.cos(Q)*Math.cos(ne)*Math.cos((y.lng-this.lng)*I);return _h*Math.acos(Math.min(_e,1))}toBounds(y=0){const I=360*y/40075017,Q=I/Math.cos(Math.PI/180*this.lat);return new ja(new ei(this.lng-Q,this.lat-I),new ei(this.lng+Q,this.lat+I))}static convert(y){if(y instanceof ei)return y;if(Array.isArray(y)&&(y.length===2||y.length===3))return new ei(Number(y[0]),Number(y[1]));if(!Array.isArray(y)&&typeof y=="object"&&y!==null)return new ei(Number("lng"in y?y.lng:y.lon),Number(y.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Uc=2*Math.PI*_h;function mh($){return Uc*Math.cos($*Math.PI/180)}function va($){return(180+$)/360}function Ua($){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+$*Math.PI/360)))/360}function Do($,y){return $/mh(y)}function qo($){return 360*$-180}function Yi($){return 360/Math.PI*Math.atan(Math.exp((180-360*$)*Math.PI/180))-90}function ud($,y){return $*mh(Yi(y))}const xa=85.051129;function hd($){return 1/Math.cos($*Math.PI/180)}class Zl{constructor(y,I,Q=0){this.x=+y,this.y=+I,this.z=+Q}static fromLngLat(y,I=0){const Q=ei.convert(y);return new Zl(va(Q.lng),Ua(Q.lat),Do(I,Q.lat))}toLngLat(){return new ei(qo(this.x),Yi(this.y))}toAltitude(){return ud(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Uc*hd(Yi(this.y))}}function $u($,y,I,Q,ne,_e,Te,Ce,$e){const De=(y+Q)/2,Ue=(I+ne)/2,He=new ye(De,Ue);Ce(He),function(We,et,it,_t,Et,Bt){const qt=it-Et,Ft=_t-Bt;return Math.abs((_t-et)*qt-(it-We)*Ft)/Math.hypot(qt,Ft)}(He.x,He.y,_e.x,_e.y,Te.x,Te.y)>=$e?($u($,y,I,De,Ue,_e,He,Ce,$e),$u($,De,Ue,Q,ne,He,Te,Ce,$e)):$.push(Te)}function dd($,y,I){let Q=$[0],ne=Q.x,_e=Q.y;y(Q);const Te=[Q];for(let Ce=1;Ce<$.length;Ce++){const $e=$[Ce],{x:De,y:Ue}=$e;y($e),$u(Te,ne,_e,De,Ue,Q,$e,y,I),ne=De,_e=Ue,Q=$e}return Te}function gh($,y,I,Q,ne){if(ne(y,I)){const _e=y.add(I).mult(.5);Q(_e),gh($,y,_e,Q,ne),gh($,_e,I,Q,ne)}else $.push(I)}function pd($,y,I){let Q=$[0];y(Q);const ne=[Q];for(let _e=1;_e<$.length;_e++){const Te=$[_e];y(Te),gh(ne,Q,Te,y,I),Q=Te}return ne}const yh=Math.pow(2,14)-1,ot=-yh-1;function St($,y){const I=Math.round($.x*y),Q=Math.round($.y*y);return $.x=Xe(I,ot,yh),$.y=Xe(Q,ot,yh),(I<$.x||I>$.x+1||Q<$.y||Q>$.y+1)&&zt("Geometry exceeds allowed extent, reduce your vector tile buffer size"),$}function yt($,y,I){const Q=$.loadGeometry(),ne=$.extent,_e=Ar/ne;if(y&&I&&I.projection.isReprojectedInTileSpace){const Te=1<<y.z,{scale:Ce,x:$e,y:De,projection:Ue}=I,He=We=>{const et=qo((y.x+We.x/ne)/Te),it=Yi((y.y+We.y/ne)/Te),_t=Ue.project(et,it);We.x=(_t.x*Ce-$e)*ne,We.y=(_t.y*Ce-De)*ne};for(let We=0;We<Q.length;We++)if($.type!==1)Q[We]=dd(Q[We],He,1);else{const et=[];for(const it of Q[We])it.x<0||it.x>=ne||it.y<0||it.y>=ne||(He(it),et.push(it));Q[We]=et}}for(const Te of Q)for(const Ce of Te)St(Ce,_e);return Q}function Ve($,y){return{type:$.type,id:$.id,properties:$.properties,geometry:y?yt($):[]}}function Qe($,y,I,Q,ne){$.emplaceBack(2*y+(Q+1)/2,2*I+(ne+1)/2)}function gt($,y,I){$.emplaceBack(y.x,y.y,y.z,I[0]*16384,I[1]*16384,I[2]*16384)}class Nt{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.projection=y.projection,this.layoutVertexArray=new er,this.indexArray=new Rr,this.segments=new Li,this.programConfigurations=new ol(y.layers,y.zoom),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(y,I,Q,ne){const _e=this.layers[0],Te=[];let Ce=null;_e.type==="circle"&&(Ce=_e.layout.get("circle-sort-key"));for(const{feature:De,id:Ue,index:He,sourceLayerIndex:We}of y){const et=this.layers[0]._featureFilter.needGeometry,it=Ve(De,et);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),it,Q))continue;const _t=Ce?Ce.evaluate(it,{},Q):void 0,Et={id:Ue,properties:De.properties,type:De.type,sourceLayerIndex:We,index:He,geometry:et?it.geometry:yt(De,Q,ne),patterns:{},sortKey:_t};Te.push(Et)}Ce&&Te.sort((De,Ue)=>De.sortKey-Ue.sortKey);let $e=null;ne.projection.name==="globe"&&(this.globeExtVertexArray=new Qh,$e=ne.projection);for(const De of Te){const{geometry:Ue,index:He,sourceLayerIndex:We}=De,et=y[He].feature;this.addFeature(De,Ue,He,I.availableImages,Q,$e),I.featureIndex.insert(et,Ue,He,We,this.index)}}update(y,I,Q,ne){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,Q,ne)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Jd.members),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,Qd.members))),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(y,I,Q,ne,_e,Te){for(const Ce of I)for(const $e of Ce){const De=$e.x,Ue=$e.y;if(De<0||De>=Ar||Ue<0||Ue>=Ar)continue;if(Te){const et=Te.projectTilePoint(De,Ue,_e),it=Te.upVector(_e,De,Ue),_t=this.globeExtVertexArray;gt(_t,et,it),gt(_t,et,it),gt(_t,et,it),gt(_t,et,it)}const He=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,y.sortKey),We=He.vertexLength;Qe(this.layoutVertexArray,De,Ue,-1,-1),Qe(this.layoutVertexArray,De,Ue,1,-1),Qe(this.layoutVertexArray,De,Ue,1,1),Qe(this.layoutVertexArray,De,Ue,-1,1),this.indexArray.emplaceBack(We,We+1,We+2),this.indexArray.emplaceBack(We,We+2,We+3),He.vertexLength+=4,He.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,Q,{},ne,_e)}}function ln($,y){for(let I=0;I<$.length;I++)if(si(y,$[I]))return!0;for(let I=0;I<y.length;I++)if(si($,y[I]))return!0;return!!rr($,y)}function Cn($,y,I){return!!si($,y)||!!Bi(y,$,I)}function jn($,y){if($.length===1)return Ho(y,$[0]);for(let I=0;I<y.length;I++){const Q=y[I];for(let ne=0;ne<Q.length;ne++)if(si($,Q[ne]))return!0}for(let I=0;I<$.length;I++)if(Ho(y,$[I]))return!0;for(let I=0;I<y.length;I++)if(rr($,y[I]))return!0;return!1}function ur($,y,I){if($.length>1){if(rr($,y))return!0;for(let Q=0;Q<y.length;Q++)if(Bi(y[Q],$,I))return!0}for(let Q=0;Q<$.length;Q++)if(Bi($[Q],y,I))return!0;return!1}function rr($,y){if($.length===0||y.length===0)return!1;for(let I=0;I<$.length-1;I++){const Q=$[I],ne=$[I+1];for(let _e=0;_e<y.length-1;_e++)if(Ci(Q,ne,y[_e],y[_e+1]))return!0}return!1}function Ci($,y,I,Q){return sn($,I,Q)!==sn(y,I,Q)&&sn($,y,I)!==sn($,y,Q)}function Bi($,y,I){const Q=I*I;if(y.length===1)return $.distSqr(y[0])<Q;for(let ne=1;ne<y.length;ne++)if(Ao($,y[ne-1],y[ne])<Q)return!0;return!1}function Ao($,y,I){const Q=y.distSqr(I);if(Q===0)return $.distSqr(y);const ne=(($.x-y.x)*(I.x-y.x)+($.y-y.y)*(I.y-y.y))/Q;return $.distSqr(ne<0?y:ne>1?I:I.sub(y)._mult(ne)._add(y))}function Ho($,y){let I,Q,ne,_e=!1;for(let Te=0;Te<$.length;Te++){I=$[Te];for(let Ce=0,$e=I.length-1;Ce<I.length;$e=Ce++)Q=I[Ce],ne=I[$e],Q.y>y.y!=ne.y>y.y&&y.x<(ne.x-Q.x)*(y.y-Q.y)/(ne.y-Q.y)+Q.x&&(_e=!_e)}return _e}function si($,y){let I=!1;for(let Q=0,ne=$.length-1;Q<$.length;ne=Q++){const _e=$[Q],Te=$[ne];_e.y>y.y!=Te.y>y.y&&y.x<(Te.x-_e.x)*(y.y-_e.y)/(Te.y-_e.y)+_e.x&&(I=!I)}return I}function wi($,y,I,Q,ne){for(const Te of $)if(y<=Te.x&&I<=Te.y&&Q>=Te.x&&ne>=Te.y)return!0;const _e=[new ye(y,I),new ye(y,ne),new ye(Q,ne),new ye(Q,I)];if($.length>2){for(const Te of _e)if(si($,Te))return!0}for(let Te=0;Te<$.length-1;Te++)if(Ji($[Te],$[Te+1],_e))return!0;return!1}function Ji($,y,I){const Q=I[0],ne=I[2];if($.x<Q.x&&y.x<Q.x||$.x>ne.x&&y.x>ne.x||$.y<Q.y&&y.y<Q.y||$.y>ne.y&&y.y>ne.y)return!1;const _e=sn($,y,I[0]);return _e!==sn($,y,I[1])||_e!==sn($,y,I[2])||_e!==sn($,y,I[3])}function Vi($,y,I){const Q=y.paint.get($).value;return Q.kind==="constant"?Q.value:I.programConfigurations.get(y.id).getMaxValue($)}function co($){return Math.sqrt($[0]*$[0]+$[1]*$[1])}function _s($,y,I,Q,ne){if(!y[0]&&!y[1])return $;const _e=ye.convert(y)._mult(ne);I==="viewport"&&_e._rotate(-Q);const Te=[];for(let Ce=0;Ce<$.length;Ce++)Te.push($[Ce].sub(_e));return Te}function fd($,y,I,Q){const ne=ye.convert($)._mult(Q);return y==="viewport"&&ne._rotate(-I),ne}cr(Nt,"CircleBucket",{omit:["layers"]});const _d=new Rn({"circle-sort-key":new an(mn.layout_circle["circle-sort-key"])});var em={paint:new Rn({"circle-radius":new an(mn.paint_circle["circle-radius"]),"circle-color":new an(mn.paint_circle["circle-color"]),"circle-blur":new an(mn.paint_circle["circle-blur"]),"circle-opacity":new an(mn.paint_circle["circle-opacity"]),"circle-translate":new Ht(mn.paint_circle["circle-translate"]),"circle-translate-anchor":new Ht(mn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ht(mn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ht(mn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new an(mn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new an(mn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new an(mn.paint_circle["circle-stroke-opacity"])}),layout:_d},md=1e-6,Wo=typeof Float32Array!="undefined"?Float32Array:Array;function Kp(){var $=new Wo(9);return Wo!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[5]=0,$[6]=0,$[7]=0),$[0]=1,$[4]=1,$[8]=1,$}function ms($){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=1,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=1,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$}function ep($,y){var I=y[0],Q=y[1],ne=y[2],_e=y[3],Te=y[4],Ce=y[5],$e=y[6],De=y[7],Ue=y[8],He=y[9],We=y[10],et=y[11],it=y[12],_t=y[13],Et=y[14],Bt=y[15],qt=I*Ce-Q*Te,Ft=I*$e-ne*Te,Gt=I*De-_e*Te,Jt=Q*$e-ne*Ce,Wt=Q*De-_e*Ce,Tn=ne*De-_e*$e,bn=Ue*_t-He*it,Pn=Ue*Et-We*it,Yn=Ue*Bt-et*it,kn=He*Et-We*_t,Ln=He*Bt-et*_t,Un=We*Bt-et*Et,Bn=qt*Un-Ft*Ln+Gt*kn+Jt*Yn-Wt*Pn+Tn*bn;return Bn?($[0]=(Ce*Un-$e*Ln+De*kn)*(Bn=1/Bn),$[1]=(ne*Ln-Q*Un-_e*kn)*Bn,$[2]=(_t*Tn-Et*Wt+Bt*Jt)*Bn,$[3]=(We*Wt-He*Tn-et*Jt)*Bn,$[4]=($e*Yn-Te*Un-De*Pn)*Bn,$[5]=(I*Un-ne*Yn+_e*Pn)*Bn,$[6]=(Et*Gt-it*Tn-Bt*Ft)*Bn,$[7]=(Ue*Tn-We*Gt+et*Ft)*Bn,$[8]=(Te*Ln-Ce*Yn+De*bn)*Bn,$[9]=(Q*Yn-I*Ln-_e*bn)*Bn,$[10]=(it*Wt-_t*Gt+Bt*qt)*Bn,$[11]=(He*Gt-Ue*Wt-et*qt)*Bn,$[12]=(Ce*Pn-Te*kn-$e*bn)*Bn,$[13]=(I*kn-Q*Pn+ne*bn)*Bn,$[14]=(_t*Ft-it*Jt-Et*qt)*Bn,$[15]=(Ue*Jt-He*Ft+We*qt)*Bn,$):null}function zu($,y,I){var Q=y[0],ne=y[1],_e=y[2],Te=y[3],Ce=y[4],$e=y[5],De=y[6],Ue=y[7],He=y[8],We=y[9],et=y[10],it=y[11],_t=y[12],Et=y[13],Bt=y[14],qt=y[15],Ft=I[0],Gt=I[1],Jt=I[2],Wt=I[3];return $[0]=Ft*Q+Gt*Ce+Jt*He+Wt*_t,$[1]=Ft*ne+Gt*$e+Jt*We+Wt*Et,$[2]=Ft*_e+Gt*De+Jt*et+Wt*Bt,$[3]=Ft*Te+Gt*Ue+Jt*it+Wt*qt,$[4]=(Ft=I[4])*Q+(Gt=I[5])*Ce+(Jt=I[6])*He+(Wt=I[7])*_t,$[5]=Ft*ne+Gt*$e+Jt*We+Wt*Et,$[6]=Ft*_e+Gt*De+Jt*et+Wt*Bt,$[7]=Ft*Te+Gt*Ue+Jt*it+Wt*qt,$[8]=(Ft=I[8])*Q+(Gt=I[9])*Ce+(Jt=I[10])*He+(Wt=I[11])*_t,$[9]=Ft*ne+Gt*$e+Jt*We+Wt*Et,$[10]=Ft*_e+Gt*De+Jt*et+Wt*Bt,$[11]=Ft*Te+Gt*Ue+Jt*it+Wt*qt,$[12]=(Ft=I[12])*Q+(Gt=I[13])*Ce+(Jt=I[14])*He+(Wt=I[15])*_t,$[13]=Ft*ne+Gt*$e+Jt*We+Wt*Et,$[14]=Ft*_e+Gt*De+Jt*et+Wt*Bt,$[15]=Ft*Te+Gt*Ue+Jt*it+Wt*qt,$}function vh($,y,I){var Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t=I[0],Et=I[1],Bt=I[2];return y===$?($[12]=y[0]*_t+y[4]*Et+y[8]*Bt+y[12],$[13]=y[1]*_t+y[5]*Et+y[9]*Bt+y[13],$[14]=y[2]*_t+y[6]*Et+y[10]*Bt+y[14],$[15]=y[3]*_t+y[7]*Et+y[11]*Bt+y[15]):(ne=y[1],_e=y[2],Te=y[3],Ce=y[4],$e=y[5],De=y[6],Ue=y[7],He=y[8],We=y[9],et=y[10],it=y[11],$[0]=Q=y[0],$[1]=ne,$[2]=_e,$[3]=Te,$[4]=Ce,$[5]=$e,$[6]=De,$[7]=Ue,$[8]=He,$[9]=We,$[10]=et,$[11]=it,$[12]=Q*_t+Ce*Et+He*Bt+y[12],$[13]=ne*_t+$e*Et+We*Bt+y[13],$[14]=_e*_t+De*Et+et*Bt+y[14],$[15]=Te*_t+Ue*Et+it*Bt+y[15]),$}function Vc($,y,I){var Q=I[0],ne=I[1],_e=I[2];return $[0]=y[0]*Q,$[1]=y[1]*Q,$[2]=y[2]*Q,$[3]=y[3]*Q,$[4]=y[4]*ne,$[5]=y[5]*ne,$[6]=y[6]*ne,$[7]=y[7]*ne,$[8]=y[8]*_e,$[9]=y[9]*_e,$[10]=y[10]*_e,$[11]=y[11]*_e,$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15],$}function tp($,y,I){var Q=Math.sin(I),ne=Math.cos(I),_e=y[4],Te=y[5],Ce=y[6],$e=y[7],De=y[8],Ue=y[9],He=y[10],We=y[11];return y!==$&&($[0]=y[0],$[1]=y[1],$[2]=y[2],$[3]=y[3],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[4]=_e*ne+De*Q,$[5]=Te*ne+Ue*Q,$[6]=Ce*ne+He*Q,$[7]=$e*ne+We*Q,$[8]=De*ne-_e*Q,$[9]=Ue*ne-Te*Q,$[10]=He*ne-Ce*Q,$[11]=We*ne-$e*Q,$}function gd($,y,I){var Q=Math.sin(I),ne=Math.cos(I),_e=y[0],Te=y[1],Ce=y[2],$e=y[3],De=y[8],Ue=y[9],He=y[10],We=y[11];return y!==$&&($[4]=y[4],$[5]=y[5],$[6]=y[6],$[7]=y[7],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[0]=_e*ne-De*Q,$[1]=Te*ne-Ue*Q,$[2]=Ce*ne-He*Q,$[3]=$e*ne-We*Q,$[8]=_e*Q+De*ne,$[9]=Te*Q+Ue*ne,$[10]=Ce*Q+He*ne,$[11]=$e*Q+We*ne,$}function Yp($,y){return $[0]=y[0],$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=y[1],$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=y[2],$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$}function Jp($,y,I){var Q,ne,_e,Te=I[0],Ce=I[1],$e=I[2],De=Math.hypot(Te,Ce,$e);return De<md?null:(Te*=De=1/De,Ce*=De,$e*=De,Q=Math.sin(y),ne=Math.cos(y),$[0]=Te*Te*(_e=1-ne)+ne,$[1]=Ce*Te*_e+$e*Q,$[2]=$e*Te*_e-Ce*Q,$[3]=0,$[4]=Te*Ce*_e-$e*Q,$[5]=Ce*Ce*_e+ne,$[6]=$e*Ce*_e+Te*Q,$[7]=0,$[8]=Te*$e*_e+Ce*Q,$[9]=Ce*$e*_e-Te*Q,$[10]=$e*$e*_e+ne,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$)}Math.hypot||(Math.hypot=function(){for(var $=0,y=arguments.length;y--;)$+=arguments[y]*arguments[y];return Math.sqrt($)});var tm=zu;function np(){var $=new Wo(3);return Wo!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$}function Qp($){var y=new Wo(3);return y[0]=$[0],y[1]=$[1],y[2]=$[2],y}function xh($){return Math.hypot($[0],$[1],$[2])}function Du($,y,I){var Q=new Wo(3);return Q[0]=$,Q[1]=y,Q[2]=I,Q}function Xl($,y,I){return $[0]=y[0]+I[0],$[1]=y[1]+I[1],$[2]=y[2]+I[2],$}function rp($,y,I){return $[0]=y[0]-I[0],$[1]=y[1]-I[1],$[2]=y[2]-I[2],$}function ef($,y,I){return $[0]=y[0]*I[0],$[1]=y[1]*I[1],$[2]=y[2]*I[2],$}function ip($,y,I){return $[0]=Math.min(y[0],I[0]),$[1]=Math.min(y[1],I[1]),$[2]=Math.min(y[2],I[2]),$}function op($,y,I){return $[0]=Math.max(y[0],I[0]),$[1]=Math.max(y[1],I[1]),$[2]=Math.max(y[2],I[2]),$}function Va($,y,I){return $[0]=y[0]*I,$[1]=y[1]*I,$[2]=y[2]*I,$}function yd($,y,I,Q){return $[0]=y[0]+I[0]*Q,$[1]=y[1]+I[1]*Q,$[2]=y[2]+I[2]*Q,$}function ko($,y){var I=y[0],Q=y[1],ne=y[2],_e=I*I+Q*Q+ne*ne;return _e>0&&(_e=1/Math.sqrt(_e)),$[0]=y[0]*_e,$[1]=y[1]*_e,$[2]=y[2]*_e,$}function ba($,y){return $[0]*y[0]+$[1]*y[1]+$[2]*y[2]}function ap($,y,I){var Q=y[0],ne=y[1],_e=y[2],Te=I[0],Ce=I[1],$e=I[2];return $[0]=ne*$e-_e*Ce,$[1]=_e*Te-Q*$e,$[2]=Q*Ce-ne*Te,$}function Wi($,y,I){var Q=y[0],ne=y[1],_e=y[2],Te=I[3]*Q+I[7]*ne+I[11]*_e+I[15];return $[0]=(I[0]*Q+I[4]*ne+I[8]*_e+I[12])/(Te=Te||1),$[1]=(I[1]*Q+I[5]*ne+I[9]*_e+I[13])/Te,$[2]=(I[2]*Q+I[6]*ne+I[10]*_e+I[14])/Te,$}function tf($,y,I){var Q=I[0],ne=I[1],_e=I[2],Te=y[0],Ce=y[1],$e=y[2],De=ne*$e-_e*Ce,Ue=_e*Te-Q*$e,He=Q*Ce-ne*Te,We=ne*He-_e*Ue,et=_e*De-Q*He,it=Q*Ue-ne*De,_t=2*I[3];return Ue*=_t,He*=_t,et*=2,it*=2,$[0]=Te+(De*=_t)+(We*=2),$[1]=Ce+Ue+et,$[2]=$e+He+it,$}var bh,Ga=rp,nm=ef,rm=xh;function nf($,y,I){return $[0]=y[0]*I,$[1]=y[1]*I,$[2]=y[2]*I,$[3]=y[3]*I,$}function Gc($,y,I){var Q=y[0],ne=y[1],_e=y[2],Te=y[3];return $[0]=I[0]*Q+I[4]*ne+I[8]*_e+I[12]*Te,$[1]=I[1]*Q+I[5]*ne+I[9]*_e+I[13]*Te,$[2]=I[2]*Q+I[6]*ne+I[10]*_e+I[14]*Te,$[3]=I[3]*Q+I[7]*ne+I[11]*_e+I[15]*Te,$}function rf(){var $=new Wo(4);return Wo!=Float32Array&&($[0]=0,$[1]=0,$[2]=0),$[3]=1,$}function of($){return $[0]=0,$[1]=0,$[2]=0,$[3]=1,$}function af($,y,I){I*=.5;var Q=y[0],ne=y[1],_e=y[2],Te=y[3],Ce=Math.sin(I),$e=Math.cos(I);return $[0]=Q*$e+Te*Ce,$[1]=ne*$e+_e*Ce,$[2]=_e*$e-ne*Ce,$[3]=Te*$e-Q*Ce,$}function sf($,y,I){I*=.5;var Q=y[0],ne=y[1],_e=y[2],Te=y[3],Ce=Math.sin(I),$e=Math.cos(I);return $[0]=Q*$e-_e*Ce,$[1]=ne*$e+Te*Ce,$[2]=_e*$e+Q*Ce,$[3]=Te*$e-ne*Ce,$}np(),bh=new Wo(4),Wo!=Float32Array&&(bh[0]=0,bh[1]=0,bh[2]=0,bh[3]=0),np(),Du(1,0,0),Du(0,1,0),rf(),rf(),Kp();class sp{constructor(y,I){this.pos=y,this.dir=I}intersectsPlane(y,I,Q){const ne=ba(I,this.dir);if(Math.abs(ne)<1e-6)return!1;const _e=((y[0]-this.pos[0])*I[0]+(y[1]-this.pos[1])*I[1]+(y[2]-this.pos[2])*I[2])/ne;return Q[0]=this.pos[0]+this.dir[0]*_e,Q[1]=this.pos[1]+this.dir[1]*_e,Q[2]=this.pos[2]+this.dir[2]*_e,!0}closestPointOnSphere(y,I,Q){if(function(et,it){var _t=et[0],Et=et[1],Bt=et[2],qt=it[0],Ft=it[1],Gt=it[2];return Math.abs(_t-qt)<=md*Math.max(1,Math.abs(_t),Math.abs(qt))&&Math.abs(Et-Ft)<=md*Math.max(1,Math.abs(Et),Math.abs(Ft))&&Math.abs(Bt-Gt)<=md*Math.max(1,Math.abs(Bt),Math.abs(Gt))}(this.pos,y)||I===0)return Q[0]=Q[1]=Q[2]=0,!1;const[ne,_e,Te]=this.dir,Ce=this.pos[0]-y[0],$e=this.pos[1]-y[1],De=this.pos[2]-y[2],Ue=ne*ne+_e*_e+Te*Te,He=2*(Ce*ne+$e*_e+De*Te),We=He*He-4*Ue*(Ce*Ce+$e*$e+De*De-I*I);if(We<0){const et=Math.max(-He/2,0),it=Ce+ne*et,_t=$e+_e*et,Et=De+Te*et,Bt=Math.hypot(it,_t,Et);return Q[0]=it*I/Bt,Q[1]=_t*I/Bt,Q[2]=Et*I/Bt,!1}{const et=(-He-Math.sqrt(We))/(2*Ue);if(et<0){const it=Math.hypot(Ce,$e,De);return Q[0]=Ce*I/it,Q[1]=$e*I/it,Q[2]=De*I/it,!1}return Q[0]=Ce+ne*et,Q[1]=$e+_e*et,Q[2]=De+Te*et,!0}}}class lp{constructor(y,I,Q,ne,_e){this.TL=y,this.TR=I,this.BR=Q,this.BL=ne,this.horizon=_e}static fromInvProjectionMatrix(y,I,Q){const ne=[-1,1,1],_e=[1,1,1],Te=[1,-1,1],Ce=[-1,-1,1],$e=Wi(ne,ne,y),De=Wi(_e,_e,y),Ue=Wi(Te,Te,y),He=Wi(Ce,Ce,y);return new lp($e,De,Ue,He,I/Q)}}class cp{constructor(y,I){this.points=y,this.planes=I}static fromInvProjectionMatrix(y,I,Q,ne){const _e=Math.pow(2,Q),Te=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($e=>{const De=Gc([],$e,y),Ue=1/De[3]/I*_e;return function(He,We,et){return He[0]=We[0]*et[0],He[1]=We[1]*et[1],He[2]=We[2]*et[2],He[3]=We[3]*et[3],He}(De,De,[Ue,Ue,ne?1/De[3]:Ue,Ue])}),Ce=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map($e=>{const De=ko([],ap([],Ga([],Te[$e[0]],Te[$e[1]]),Ga([],Te[$e[2]],Te[$e[1]]))),Ue=-ba(De,Te[$e[1]]);return De.concat(Ue)});return new cp(Te,Ce)}}class Lo{static fromPoints(y){const I=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],Q=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const ne of y)I[0]=Math.min(I[0],ne[0]),I[1]=Math.min(I[1],ne[1]),I[2]=Math.min(I[2],ne[2]),Q[0]=Math.max(Q[0],ne[0]),Q[1]=Math.max(Q[1],ne[1]),Q[2]=Math.max(Q[2],ne[2]);return new Lo(I,Q)}constructor(y,I){this.min=y,this.max=I,this.center=Va([],Xl([],this.min,this.max),.5)}quadrant(y){const I=[y%2==0,y<2],Q=Qp(this.min),ne=Qp(this.max);for(let _e=0;_e<I.length;_e++)Q[_e]=I[_e]?this.min[_e]:this.center[_e],ne[_e]=I[_e]?this.center[_e]:this.max[_e];return ne[2]=this.max[2],new Lo(Q,ne)}distanceX(y){return Math.max(Math.min(this.max[0],y[0]),this.min[0])-y[0]}distanceY(y){return Math.max(Math.min(this.max[1],y[1]),this.min[1])-y[1]}distanceZ(y){return Math.max(Math.min(this.max[2],y[2]),this.min[2])-y[2]}getCorners(){const y=this.min,I=this.max;return[[y[0],y[1],y[2]],[I[0],y[1],y[2]],[I[0],I[1],y[2]],[y[0],I[1],y[2]],[y[0],y[1],I[2]],[I[0],y[1],I[2]],[I[0],I[1],I[2]],[y[0],I[1],I[2]]]}intersects(y){const I=this.getCorners();let Q=!0;for(let ne=0;ne<y.planes.length;ne++){const _e=y.planes[ne];let Te=0;for(let Ce=0;Ce<I.length;Ce++)Te+=ba(_e,I[Ce])+_e[3]>=0;if(Te===0)return 0;Te!==I.length&&(Q=!1)}if(Q)return 2;for(let ne=0;ne<3;ne++){let _e=Number.MAX_VALUE,Te=-Number.MAX_VALUE;for(let Ce=0;Ce<y.points.length;Ce++){const $e=y.points[Ce][ne]-this.min[ne];_e=Math.min(_e,$e),Te=Math.max(Te,$e)}if(Te<0||_e>this.max[ne]-this.min[ne])return 0}return 1}}function lf($,y,I,Q,ne,_e,Te,Ce,$e){if(_e&&$.queryGeometry.isAboveHorizon)return!1;_e&&($e*=$.pixelToTileUnitsFactor);const De=$.tileID.canonical,Ue=I.projection.upVectorScale(De,I.center.lat,I.worldSize).metersToTile;for(const He of y)for(const We of He){const et=We.add(Ce),it=ne&&I.elevation?I.elevation.exaggeration()*ne.getElevationAt(et.x,et.y,!0):0,_t=I.projection.projectTilePoint(et.x,et.y,De);if(it>0){const Ft=I.projection.upVector(De,et.x,et.y);_t.x+=Ft[0]*Ue*it,_t.y+=Ft[1]*Ue*it,_t.z+=Ft[2]*Ue*it}const Et=_e?et:im(_t.x,_t.y,_t.z,Q),Bt=_e?$.tilespaceRays.map(Ft=>am(Ft,it)):$.queryGeometry.screenGeometry,qt=Gc([],[_t.x,_t.y,_t.z,1],Q);if(!Te&&_e?$e*=qt[3]/I.cameraToCenterDistance:Te&&!_e&&($e*=I.cameraToCenterDistance/qt[3]),_e){const Ft=Yi((We.y/Ar+De.y)/(1<<De.z));$e/=I.projection.pixelsPerMeter(Ft,1)/Do(1,Ft)}if(Cn(Bt,Et,$e))return!0}return!1}function im($,y,I,Q){const ne=Gc([],[$,y,I,1],Q);return new ye(ne[0]/ne[3],ne[1]/ne[3])}const cf=Du(0,0,0),om=Du(0,0,1);function am($,y){const I=np();return cf[2]=y,$.intersectsPlane(cf,om,I),new ye(I[0],I[1])}class uf extends Nt{}function hf($,{width:y,height:I},Q,ne){if(ne){if(ne instanceof Uint8ClampedArray)ne=new Uint8Array(ne.buffer);else if(ne.length!==y*I*Q)throw new RangeError("mismatched image size")}else ne=new Uint8Array(y*I*Q);return $.width=y,$.height=I,$.data=ne,$}function df($,y,I){const{width:Q,height:ne}=y;Q===$.width&&ne===$.height||(up($,y,{x:0,y:0},{x:0,y:0},{width:Math.min($.width,Q),height:Math.min($.height,ne)},I),$.width=Q,$.height=ne,$.data=y.data)}function up($,y,I,Q,ne,_e){if(ne.width===0||ne.height===0)return y;if(ne.width>$.width||ne.height>$.height||I.x>$.width-ne.width||I.y>$.height-ne.height)throw new RangeError("out of range source coordinates for image copy");if(ne.width>y.width||ne.height>y.height||Q.x>y.width-ne.width||Q.y>y.height-ne.height)throw new RangeError("out of range destination coordinates for image copy");const Te=$.data,Ce=y.data;for(let $e=0;$e<ne.height;$e++){const De=((I.y+$e)*$.width+I.x)*_e,Ue=((Q.y+$e)*y.width+Q.x)*_e;for(let He=0;He<ne.width*_e;He++)Ce[Ue+He]=Te[De+He]}return y}cr(uf,"HeatmapBucket",{omit:["layers"]});class al{constructor(y,I){hf(this,y,1,I)}resize(y){df(this,new al(y),1)}clone(){return new al({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,I,Q,ne,_e){up(y,I,Q,ne,_e,1)}}class Zo{constructor(y,I){hf(this,y,4,I)}resize(y){df(this,new Zo(y),4)}replace(y,I){I?this.data.set(y):this.data=y instanceof Uint8ClampedArray?new Uint8Array(y.buffer):y}clone(){return new Zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(y,I,Q,ne,_e){up(y,I,Q,ne,_e,4)}}cr(al,"AlphaImage"),cr(Zo,"RGBAImage");var sm={paint:new Rn({"heatmap-radius":new an(mn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new an(mn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ht(mn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new dn(mn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ht(mn.paint_heatmap["heatmap-opacity"])})};function hp($){const y={},I=$.resolution||256,Q=$.clips?$.clips.length:1,ne=$.image||new Zo({width:I,height:Q}),_e=(Te,Ce,$e)=>{y[$.evaluationKey]=$e;const De=$.expression.evaluate(y);ne.data[Te+Ce+0]=Math.floor(255*De.r/De.a),ne.data[Te+Ce+1]=Math.floor(255*De.g/De.a),ne.data[Te+Ce+2]=Math.floor(255*De.b/De.a),ne.data[Te+Ce+3]=Math.floor(255*De.a)};if($.clips)for(let Te=0,Ce=0;Te<Q;++Te,Ce+=4*I)for(let $e=0,De=0;$e<I;$e++,De+=4){const Ue=$e/(I-1),{start:He,end:We}=$.clips[Te];_e(Ce,De,He*(1-Ue)+We*Ue)}else for(let Te=0,Ce=0;Te<I;Te++,Ce+=4)_e(0,Ce,Te/(I-1));return ne}var lm={paint:new Rn({"hillshade-illumination-direction":new Ht(mn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ht(mn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ht(mn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ht(mn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ht(mn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ht(mn.paint_hillshade["hillshade-accent-color"])})};const cm=Dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:um}=cm;var vd=xd,hm=xd;function xd($,y,I){I=I||2;var Q,ne,_e,Te,Ce,$e,De,Ue=y&&y.length,He=Ue?y[0]*I:$.length,We=pf($,0,He,I,!0),et=[];if(!We||We.next===We.prev)return et;if(Ue&&(We=function(_t,Et,Bt,qt){var Ft,Gt,Jt,Wt=[];for(Ft=0,Gt=Et.length;Ft<Gt;Ft++)(Jt=pf(_t,Et[Ft]*qt,Ft<Gt-1?Et[Ft+1]*qt:_t.length,qt,!1))===Jt.next&&(Jt.steiner=!0),Wt.push(vm(Jt));for(Wt.sort(mm),Ft=0;Ft<Wt.length;Ft++)Bt=gm(Wt[Ft],Bt);return Bt}($,y,We,I)),$.length>80*I){Q=_e=$[0],ne=Te=$[1];for(var it=I;it<He;it+=I)(Ce=$[it])<Q&&(Q=Ce),($e=$[it+1])<ne&&(ne=$e),Ce>_e&&(_e=Ce),$e>Te&&(Te=$e);De=(De=Math.max(_e-Q,Te-ne))!==0?32767/De:0}return wh(We,et,I,Q,ne,De,0),et}function pf($,y,I,Q,ne){var _e,Te;if(ne===fp($,y,I,Q)>0)for(_e=y;_e<I;_e+=Q)Te=mf(_e,$[_e],$[_e+1],Te);else for(_e=I-Q;_e>=y;_e-=Q)Te=mf(_e,$[_e],$[_e+1],Te);return Te&&bd(Te,Te.next)&&(Th(Te),Te=Te.next),Te}function qc($,y){if(!$)return $;y||(y=$);var I,Q=$;do if(I=!1,Q.steiner||!bd(Q,Q.next)&&Ni(Q.prev,Q,Q.next)!==0)Q=Q.next;else{if(Th(Q),(Q=y=Q.prev)===Q.next)break;I=!0}while(I||Q!==y);return y}function wh($,y,I,Q,ne,_e,Te){if($){!Te&&_e&&function(Ue,He,We,et){var it=Ue;do it.z===0&&(it.z=dp(it.x,it.y,He,We,et)),it.prevZ=it.prev,it.nextZ=it.next,it=it.next;while(it!==Ue);it.prevZ.nextZ=null,it.prevZ=null,function(_t){var Et,Bt,qt,Ft,Gt,Jt,Wt,Tn,bn=1;do{for(Bt=_t,_t=null,Gt=null,Jt=0;Bt;){for(Jt++,qt=Bt,Wt=0,Et=0;Et<bn&&(Wt++,qt=qt.nextZ);Et++);for(Tn=bn;Wt>0||Tn>0&&qt;)Wt!==0&&(Tn===0||!qt||Bt.z<=qt.z)?(Ft=Bt,Bt=Bt.nextZ,Wt--):(Ft=qt,qt=qt.nextZ,Tn--),Gt?Gt.nextZ=Ft:_t=Ft,Ft.prevZ=Gt,Gt=Ft;Bt=qt}Gt.nextZ=null,bn*=2}while(Jt>1)}(it)}($,Q,ne,_e);for(var Ce,$e,De=$;$.prev!==$.next;)if(Ce=$.prev,$e=$.next,_e?pm($,Q,ne,_e):dm($))y.push(Ce.i/I|0),y.push($.i/I|0),y.push($e.i/I|0),Th($),$=$e.next,De=$e.next;else if(($=$e)===De){Te?Te===1?wh($=fm(qc($),y,I),y,I,Q,ne,_e,2):Te===2&&_m($,y,I,Q,ne,_e):wh(qc($),y,I,Q,ne,_e,1);break}}}function dm($){var y=$.prev,I=$,Q=$.next;if(Ni(y,I,Q)>=0)return!1;for(var ne=y.x,_e=I.x,Te=Q.x,Ce=y.y,$e=I.y,De=Q.y,Ue=ne<_e?ne<Te?ne:Te:_e<Te?_e:Te,He=Ce<$e?Ce<De?Ce:De:$e<De?$e:De,We=ne>_e?ne>Te?ne:Te:_e>Te?_e:Te,et=Ce>$e?Ce>De?Ce:De:$e>De?$e:De,it=Q.next;it!==y;){if(it.x>=Ue&&it.x<=We&&it.y>=He&&it.y<=et&&Lu(ne,Ce,_e,$e,Te,De,it.x,it.y)&&Ni(it.prev,it,it.next)>=0)return!1;it=it.next}return!0}function pm($,y,I,Q){var ne=$.prev,_e=$,Te=$.next;if(Ni(ne,_e,Te)>=0)return!1;for(var Ce=ne.x,$e=_e.x,De=Te.x,Ue=ne.y,He=_e.y,We=Te.y,et=Ce<$e?Ce<De?Ce:De:$e<De?$e:De,it=Ue<He?Ue<We?Ue:We:He<We?He:We,_t=Ce>$e?Ce>De?Ce:De:$e>De?$e:De,Et=Ue>He?Ue>We?Ue:We:He>We?He:We,Bt=dp(et,it,y,I,Q),qt=dp(_t,Et,y,I,Q),Ft=$.prevZ,Gt=$.nextZ;Ft&&Ft.z>=Bt&&Gt&&Gt.z<=qt;){if(Ft.x>=et&&Ft.x<=_t&&Ft.y>=it&&Ft.y<=Et&&Ft!==ne&&Ft!==Te&&Lu(Ce,Ue,$e,He,De,We,Ft.x,Ft.y)&&Ni(Ft.prev,Ft,Ft.next)>=0||(Ft=Ft.prevZ,Gt.x>=et&&Gt.x<=_t&&Gt.y>=it&&Gt.y<=Et&&Gt!==ne&&Gt!==Te&&Lu(Ce,Ue,$e,He,De,We,Gt.x,Gt.y)&&Ni(Gt.prev,Gt,Gt.next)>=0))return!1;Gt=Gt.nextZ}for(;Ft&&Ft.z>=Bt;){if(Ft.x>=et&&Ft.x<=_t&&Ft.y>=it&&Ft.y<=Et&&Ft!==ne&&Ft!==Te&&Lu(Ce,Ue,$e,He,De,We,Ft.x,Ft.y)&&Ni(Ft.prev,Ft,Ft.next)>=0)return!1;Ft=Ft.prevZ}for(;Gt&&Gt.z<=qt;){if(Gt.x>=et&&Gt.x<=_t&&Gt.y>=it&&Gt.y<=Et&&Gt!==ne&&Gt!==Te&&Lu(Ce,Ue,$e,He,De,We,Gt.x,Gt.y)&&Ni(Gt.prev,Gt,Gt.next)>=0)return!1;Gt=Gt.nextZ}return!0}function fm($,y,I){var Q=$;do{var ne=Q.prev,_e=Q.next.next;!bd(ne,_e)&&ff(ne,Q,Q.next,_e)&&Eh(ne,_e)&&Eh(_e,ne)&&(y.push(ne.i/I|0),y.push(Q.i/I|0),y.push(_e.i/I|0),Th(Q),Th(Q.next),Q=$=_e),Q=Q.next}while(Q!==$);return qc(Q)}function _m($,y,I,Q,ne,_e){var Te=$;do{for(var Ce=Te.next.next;Ce!==Te.prev;){if(Te.i!==Ce.i&&xm(Te,Ce)){var $e=_f(Te,Ce);return Te=qc(Te,Te.next),$e=qc($e,$e.next),wh(Te,y,I,Q,ne,_e,0),void wh($e,y,I,Q,ne,_e,0)}Ce=Ce.next}Te=Te.next}while(Te!==$)}function mm($,y){return $.x-y.x}function gm($,y){var I=function(ne,_e){var Te,Ce=_e,$e=ne.x,De=ne.y,Ue=-1/0;do{if(De<=Ce.y&&De>=Ce.next.y&&Ce.next.y!==Ce.y){var He=Ce.x+(De-Ce.y)*(Ce.next.x-Ce.x)/(Ce.next.y-Ce.y);if(He<=$e&&He>Ue&&(Ue=He,Te=Ce.x<Ce.next.x?Ce:Ce.next,He===$e))return Te}Ce=Ce.next}while(Ce!==_e);if(!Te)return null;var We,et=Te,it=Te.x,_t=Te.y,Et=1/0;Ce=Te;do $e>=Ce.x&&Ce.x>=it&&$e!==Ce.x&&Lu(De<_t?$e:Ue,De,it,_t,De<_t?Ue:$e,De,Ce.x,Ce.y)&&(We=Math.abs(De-Ce.y)/($e-Ce.x),Eh(Ce,ne)&&(We<Et||We===Et&&(Ce.x>Te.x||Ce.x===Te.x&&ym(Te,Ce)))&&(Te=Ce,Et=We)),Ce=Ce.next;while(Ce!==et);return Te}($,y);if(!I)return y;var Q=_f(I,$);return qc(Q,Q.next),qc(I,I.next)}function ym($,y){return Ni($.prev,$,y.prev)<0&&Ni(y.next,$,$.next)<0}function dp($,y,I,Q,ne){return($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=($-I)*ne|0)|$<<8))|$<<4))|$<<2))|$<<1))|(y=1431655765&((y=858993459&((y=252645135&((y=16711935&((y=(y-Q)*ne|0)|y<<8))|y<<4))|y<<2))|y<<1))<<1}function vm($){var y=$,I=$;do(y.x<I.x||y.x===I.x&&y.y<I.y)&&(I=y),y=y.next;while(y!==$);return I}function Lu($,y,I,Q,ne,_e,Te,Ce){return(ne-Te)*(y-Ce)>=($-Te)*(_e-Ce)&&($-Te)*(Q-Ce)>=(I-Te)*(y-Ce)&&(I-Te)*(_e-Ce)>=(ne-Te)*(Q-Ce)}function xm($,y){return $.next.i!==y.i&&$.prev.i!==y.i&&!function(I,Q){var ne=I;do{if(ne.i!==I.i&&ne.next.i!==I.i&&ne.i!==Q.i&&ne.next.i!==Q.i&&ff(ne,ne.next,I,Q))return!0;ne=ne.next}while(ne!==I);return!1}($,y)&&(Eh($,y)&&Eh(y,$)&&function(I,Q){var ne=I,_e=!1,Te=(I.x+Q.x)/2,Ce=(I.y+Q.y)/2;do ne.y>Ce!=ne.next.y>Ce&&ne.next.y!==ne.y&&Te<(ne.next.x-ne.x)*(Ce-ne.y)/(ne.next.y-ne.y)+ne.x&&(_e=!_e),ne=ne.next;while(ne!==I);return _e}($,y)&&(Ni($.prev,$,y.prev)||Ni($,y.prev,y))||bd($,y)&&Ni($.prev,$,$.next)>0&&Ni(y.prev,y,y.next)>0)}function Ni($,y,I){return(y.y-$.y)*(I.x-y.x)-(y.x-$.x)*(I.y-y.y)}function bd($,y){return $.x===y.x&&$.y===y.y}function ff($,y,I,Q){var ne=Ed(Ni($,y,I)),_e=Ed(Ni($,y,Q)),Te=Ed(Ni(I,Q,$)),Ce=Ed(Ni(I,Q,y));return ne!==_e&&Te!==Ce||!(ne!==0||!wd($,I,y))||!(_e!==0||!wd($,Q,y))||!(Te!==0||!wd(I,$,Q))||!(Ce!==0||!wd(I,y,Q))}function wd($,y,I){return y.x<=Math.max($.x,I.x)&&y.x>=Math.min($.x,I.x)&&y.y<=Math.max($.y,I.y)&&y.y>=Math.min($.y,I.y)}function Ed($){return $>0?1:$<0?-1:0}function Eh($,y){return Ni($.prev,$,$.next)<0?Ni($,y,$.next)>=0&&Ni($,$.prev,y)>=0:Ni($,y,$.prev)<0||Ni($,$.next,y)<0}function _f($,y){var I=new pp($.i,$.x,$.y),Q=new pp(y.i,y.x,y.y),ne=$.next,_e=y.prev;return $.next=y,y.prev=$,I.next=ne,ne.prev=I,Q.next=I,I.prev=Q,_e.next=Q,Q.prev=_e,Q}function mf($,y,I,Q){var ne=new pp($,y,I);return Q?(ne.next=Q.next,ne.prev=Q,Q.next.prev=ne,Q.next=ne):(ne.prev=ne,ne.next=ne),ne}function Th($){$.next.prev=$.prev,$.prev.next=$.next,$.prevZ&&($.prevZ.nextZ=$.nextZ),$.nextZ&&($.nextZ.prevZ=$.prevZ)}function pp($,y,I){this.i=$,this.x=y,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fp($,y,I,Q){for(var ne=0,_e=y,Te=I-Q;_e<I;_e+=Q)ne+=($[Te]-$[_e])*($[_e+1]+$[Te+1]),Te=_e;return ne}function bm($,y,I,Q,ne){gf($,y,I||0,Q||$.length-1,ne||wm)}function gf($,y,I,Q,ne){for(;Q>I;){if(Q-I>600){var _e=Q-I+1,Te=y-I+1,Ce=Math.log(_e),$e=.5*Math.exp(2*Ce/3),De=.5*Math.sqrt(Ce*$e*(_e-$e)/_e)*(Te-_e/2<0?-1:1);gf($,y,Math.max(I,Math.floor(y-Te*$e/_e+De)),Math.min(Q,Math.floor(y+(_e-Te)*$e/_e+De)),ne)}var Ue=$[y],He=I,We=Q;for(Ah($,I,y),ne($[Q],Ue)>0&&Ah($,I,Q);He<We;){for(Ah($,He,We),He++,We--;ne($[He],Ue)<0;)He++;for(;ne($[We],Ue)>0;)We--}ne($[I],Ue)===0?Ah($,I,We):Ah($,++We,Q),We<=y&&(I=We+1),y<=We&&(Q=We-1)}}function Ah($,y,I){var Q=$[y];$[y]=$[I],$[I]=Q}function wm($,y){return $<y?-1:$>y?1:0}function _p($,y){const I=$.length;if(I<=1)return[$];const Q=[];let ne,_e;for(let Te=0;Te<I;Te++){const Ce=Mn($[Te]);Ce!==0&&($[Te].area=Math.abs(Ce),_e===void 0&&(_e=Ce<0),_e===Ce<0?(ne&&Q.push(ne),ne=[$[Te]]):ne.push($[Te]))}if(ne&&Q.push(ne),y>1)for(let Te=0;Te<Q.length;Te++)Q[Te].length<=y||(bm(Q[Te],y,1,Q[Te].length-1,Em),Q[Te]=Q[Te].slice(0,y));return Q}function Em($,y){return y.area-$.area}function mp($,y,I){const Q=I.patternDependencies;let ne=!1;for(const _e of y){const Te=_e.paint.get(`${$}-pattern`);Te.isConstant()||(ne=!0);const Ce=Te.constantOr(null);Ce&&(ne=!0,Q[Ce.to]=!0,Q[Ce.from]=!0)}return ne}function gp($,y,I,Q,ne){const _e=ne.patternDependencies;for(const Te of y){const Ce=Te.paint.get(`${$}-pattern`).value;if(Ce.kind!=="constant"){let $e=Ce.evaluate({zoom:Q-1},I,{},ne.availableImages),De=Ce.evaluate({zoom:Q},I,{},ne.availableImages),Ue=Ce.evaluate({zoom:Q+1},I,{},ne.availableImages);$e=$e&&$e.name?$e.name:$e,De=De&&De.name?De.name:De,Ue=Ue&&Ue.name?Ue.name:Ue,_e[$e]=!0,_e[De]=!0,_e[Ue]=!0,I.patterns[Te.id]={min:$e,mid:De,max:Ue}}}return I}xd.deviation=function($,y,I,Q){var ne=y&&y.length,_e=Math.abs(fp($,0,ne?y[0]*I:$.length,I));if(ne)for(var Te=0,Ce=y.length;Te<Ce;Te++)_e-=Math.abs(fp($,y[Te]*I,Te<Ce-1?y[Te+1]*I:$.length,I));var $e=0;for(Te=0;Te<Q.length;Te+=3){var De=Q[Te]*I,Ue=Q[Te+1]*I,He=Q[Te+2]*I;$e+=Math.abs(($[De]-$[He])*($[Ue+1]-$[De+1])-($[De]-$[Ue])*($[He+1]-$[De+1]))}return _e===0&&$e===0?0:Math.abs(($e-_e)/_e)},xd.flatten=function($){for(var y=$[0][0].length,I={vertices:[],holes:[],dimensions:y},Q=0,ne=0;ne<$.length;ne++){for(var _e=0;_e<$[ne].length;_e++)for(var Te=0;Te<y;Te++)I.vertices.push($[ne][_e][Te]);ne>0&&I.holes.push(Q+=$[ne-1].length)}return I},vd.default=hm;class Td{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new er,this.indexArray=new Rr,this.indexArray2=new eo,this.programConfigurations=new ol(y.layers,y.zoom),this.segments=new Li,this.segments2=new Li,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.projection=y.projection}populate(y,I,Q,ne){this.hasPattern=mp("fill",this.layers,I);const _e=this.layers[0].layout.get("fill-sort-key"),Te=[];for(const{feature:Ce,id:$e,index:De,sourceLayerIndex:Ue}of y){const He=this.layers[0]._featureFilter.needGeometry,We=Ve(Ce,He);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),We,Q))continue;const et=_e?_e.evaluate(We,{},Q,I.availableImages):void 0,it={id:$e,properties:Ce.properties,type:Ce.type,sourceLayerIndex:Ue,index:De,geometry:He?We.geometry:yt(Ce,Q,ne),patterns:{},sortKey:et};Te.push(it)}_e&&Te.sort((Ce,$e)=>Ce.sortKey-$e.sortKey);for(const Ce of Te){const{geometry:$e,index:De,sourceLayerIndex:Ue}=Ce;if(this.hasPattern){const He=gp("fill",this.layers,Ce,this.zoom,I);this.patternFeatures.push(He)}else this.addFeature(Ce,$e,De,Q,{},I.availableImages);I.featureIndex.insert(y[De].feature,$e,De,Ue,this.index)}}update(y,I,Q,ne){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,Q,ne)}addFeatures(y,I,Q,ne,_e){for(const Te of this.patternFeatures)this.addFeature(Te,Te.geometry,Te.index,I,Q,ne)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,um),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.indexBuffer2=y.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(y,I,Q,ne,_e,Te=[]){for(const Ce of _p(I,500)){let $e=0;for(const it of Ce)$e+=it.length;const De=this.segments.prepareSegment($e,this.layoutVertexArray,this.indexArray),Ue=De.vertexLength,He=[],We=[];for(const it of Ce){if(it.length===0)continue;it!==Ce[0]&&We.push(He.length/2);const _t=this.segments2.prepareSegment(it.length,this.layoutVertexArray,this.indexArray2),Et=_t.vertexLength;this.layoutVertexArray.emplaceBack(it[0].x,it[0].y),this.indexArray2.emplaceBack(Et+it.length-1,Et),He.push(it[0].x),He.push(it[0].y);for(let Bt=1;Bt<it.length;Bt++)this.layoutVertexArray.emplaceBack(it[Bt].x,it[Bt].y),this.indexArray2.emplaceBack(Et+Bt-1,Et+Bt),He.push(it[Bt].x),He.push(it[Bt].y);_t.vertexLength+=it.length,_t.primitiveLength+=it.length}const et=vd(He,We);for(let it=0;it<et.length;it+=3)this.indexArray.emplaceBack(Ue+et[it],Ue+et[it+1],Ue+et[it+2]);De.vertexLength+=$e,De.primitiveLength+=et.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,Q,_e,Te,ne)}}cr(Td,"FillBucket",{omit:["layers","patternFeatures"]});const Tm=new Rn({"fill-sort-key":new an(mn.layout_fill["fill-sort-key"])});var Am={paint:new Rn({"fill-antialias":new Ht(mn.paint_fill["fill-antialias"]),"fill-opacity":new an(mn.paint_fill["fill-opacity"]),"fill-color":new an(mn.paint_fill["fill-color"]),"fill-outline-color":new an(mn.paint_fill["fill-outline-color"]),"fill-translate":new Ht(mn.paint_fill["fill-translate"]),"fill-translate-anchor":new Ht(mn.paint_fill["fill-translate-anchor"]),"fill-pattern":new _n(mn.paint_fill["fill-pattern"])}),layout:Tm};const km=Dn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Sm=Dn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Cm=Dn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Mm}=km;var yf=Bu;function Bu($,y,I,Q,ne){this.properties={},this.extent=I,this.type=0,this._pbf=$,this._geometry=-1,this._keys=Q,this._values=ne,$.readFields(Im,this,y)}function Im($,y,I){$==1?y.id=I.readVarint():$==2?function(Q,ne){for(var _e=Q.readVarint()+Q.pos;Q.pos<_e;){var Te=ne._keys[Q.readVarint()],Ce=ne._values[Q.readVarint()];ne.properties[Te]=Ce}}(I,y):$==3?y.type=I.readVarint():$==4&&(y._geometry=I.pos)}function Pm($){for(var y,I,Q=0,ne=0,_e=$.length,Te=_e-1;ne<_e;Te=ne++)Q+=((I=$[Te]).x-(y=$[ne]).x)*(y.y+I.y);return Q}Bu.types=["Unknown","Point","LineString","Polygon"],Bu.prototype.loadGeometry=function(){var $=this._pbf;$.pos=this._geometry;for(var y,I=$.readVarint()+$.pos,Q=1,ne=0,_e=0,Te=0,Ce=[];$.pos<I;){if(ne<=0){var $e=$.readVarint();Q=7&$e,ne=$e>>3}if(ne--,Q===1||Q===2)_e+=$.readSVarint(),Te+=$.readSVarint(),Q===1&&(y&&Ce.push(y),y=[]),y.push(new ye(_e,Te));else{if(Q!==7)throw new Error("unknown command "+Q);y&&y.push(y[0].clone())}}return y&&Ce.push(y),Ce},Bu.prototype.bbox=function(){var $=this._pbf;$.pos=this._geometry;for(var y=$.readVarint()+$.pos,I=1,Q=0,ne=0,_e=0,Te=1/0,Ce=-1/0,$e=1/0,De=-1/0;$.pos<y;){if(Q<=0){var Ue=$.readVarint();I=7&Ue,Q=Ue>>3}if(Q--,I===1||I===2)(ne+=$.readSVarint())<Te&&(Te=ne),ne>Ce&&(Ce=ne),(_e+=$.readSVarint())<$e&&($e=_e),_e>De&&(De=_e);else if(I!==7)throw new Error("unknown command "+I)}return[Te,$e,Ce,De]},Bu.prototype.toGeoJSON=function($,y,I){var Q,ne,_e=this.extent*Math.pow(2,I),Te=this.extent*$,Ce=this.extent*y,$e=this.loadGeometry(),De=Bu.types[this.type];function Ue(et){for(var it=0;it<et.length;it++){var _t=et[it];et[it]=[360*(_t.x+Te)/_e-180,360/Math.PI*Math.atan(Math.exp((180-360*(_t.y+Ce)/_e)*Math.PI/180))-90]}}switch(this.type){case 1:var He=[];for(Q=0;Q<$e.length;Q++)He[Q]=$e[Q][0];Ue($e=He);break;case 2:for(Q=0;Q<$e.length;Q++)Ue($e[Q]);break;case 3:for($e=function(et){var it=et.length;if(it<=1)return[et];for(var _t,Et,Bt=[],qt=0;qt<it;qt++){var Ft=Pm(et[qt]);Ft!==0&&(Et===void 0&&(Et=Ft<0),Et===Ft<0?(_t&&Bt.push(_t),_t=[et[qt]]):_t.push(et[qt]))}return _t&&Bt.push(_t),Bt}($e),Q=0;Q<$e.length;Q++)for(ne=0;ne<$e[Q].length;ne++)Ue($e[Q][ne])}$e.length===1?$e=$e[0]:De="Multi"+De;var We={type:"Feature",geometry:{type:De,coordinates:$e},properties:this.properties};return"id"in this&&(We.id=this.id),We};var vf=xf;function xf($,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=$,this._keys=[],this._values=[],this._features=[],$.readFields(Om,this,y),this.length=this._features.length}function Om($,y,I){$===15?y.version=I.readVarint():$===1?y.name=I.readString():$===5?y.extent=I.readVarint():$===2?y._features.push(I.pos):$===3?y._keys.push(I.readString()):$===4&&y._values.push(function(Q){for(var ne=null,_e=Q.readVarint()+Q.pos;Q.pos<_e;){var Te=Q.readVarint()>>3;ne=Te===1?Q.readString():Te===2?Q.readFloat():Te===3?Q.readDouble():Te===4?Q.readVarint64():Te===5?Q.readVarint():Te===6?Q.readSVarint():Te===7?Q.readBoolean():null}return ne}(I))}function Rm($,y,I){if($===3){var Q=new vf(I,I.readVarint()+I.pos);Q.length&&(y[Q.name]=Q)}}xf.prototype.feature=function($){if($<0||$>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[$];var y=this._pbf.readVarint()+this._pbf.pos;return new yf(this._pbf,y,this.extent,this._keys,this._values)};var Hc={VectorTile:function($,y){this.layers=$.readFields(Rm,{},y)},VectorTileFeature:yf,VectorTileLayer:vf};function Ad($,y,I,Q){const ne=[],_e=Q===0?(Te,Ce,$e,De,Ue,He)=>{Te.push(new ye(He,$e+(He-Ce)/(De-Ce)*(Ue-$e)))}:(Te,Ce,$e,De,Ue,He)=>{Te.push(new ye(Ce+(He-$e)/(Ue-$e)*(De-Ce),He))};for(const Te of $){const Ce=[];for(const $e of Te){if($e.length<=2)continue;const De=[];for(let We=0;We<$e.length-1;We++){const et=$e[We].x,it=$e[We].y,_t=$e[We+1].x,Et=$e[We+1].y,Bt=Q===0?et:it,qt=Q===0?_t:Et;Bt<y?qt>y&&_e(De,et,it,_t,Et,y):Bt>I?qt<I&&_e(De,et,it,_t,Et,I):De.push($e[We]),qt<y&&Bt>=y&&_e(De,et,it,_t,Et,y),qt>I&&Bt<=I&&_e(De,et,it,_t,Et,I)}let Ue=$e[$e.length-1];const He=Q===0?Ue.x:Ue.y;He>=y&&He<=I&&De.push(Ue),De.length&&(Ue=De[De.length-1],De[0].x===Ue.x&&De[0].y===Ue.y||De.push(De[0]),Ce.push(De))}Ce.length&&ne.push(Ce)}return ne}const $m=Hc.VectorTileFeature.types,zm=Math.pow(2,13);function kh($,y,I,Q,ne,_e,Te,Ce){$.emplaceBack((y<<1)+Te,(I<<1)+_e,(Math.floor(Q*zm)<<1)+ne,Math.round(Ce))}function Sh($,y,I){$.emplaceBack(y.x,y.y,y.z,I[0]*16384,I[1]*16384,I[2]*16384)}class bf{constructor(){this.acc=new ye(0,0),this.polyCount=[]}startRing(y){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new ye(y.x,y.y),this.max=new ye(y.x,y.y))}append(y,I){this.currentPolyCount.edges++,this.acc._add(y);const Q=this.min,ne=this.max;y.x<Q.x?Q.x=y.x:y.x>ne.x&&(ne.x=y.x),y.y<Q.y?Q.y=y.y:y.y>ne.y&&(ne.y=y.y),((y.x===0||y.x===Ar)&&y.x===I.x)!=((y.y===0||y.y===Ar)&&y.y===I.y)&&this.processBorderOverlap(y,I),I.x<0!=y.x<0&&this.addBorderIntersection(0,Hr(I.y,y.y,(0-I.x)/(y.x-I.x))),I.x>Ar!=y.x>Ar&&this.addBorderIntersection(1,Hr(I.y,y.y,(Ar-I.x)/(y.x-I.x))),I.y<0!=y.y<0&&this.addBorderIntersection(2,Hr(I.x,y.x,(0-I.y)/(y.y-I.y))),I.y>Ar!=y.y>Ar&&this.addBorderIntersection(3,Hr(I.x,y.x,(Ar-I.y)/(y.y-I.y)))}addBorderIntersection(y,I){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const Q=this.borders[y];I<Q[0]&&(Q[0]=I),I>Q[1]&&(Q[1]=I)}processBorderOverlap(y,I){if(y.x===I.x){if(y.y===I.y)return;const Q=y.x===0?0:1;this.addBorderIntersection(Q,I.y),this.addBorderIntersection(Q,y.y)}else{const Q=y.y===0?2:3;this.addBorderIntersection(Q,I.x),this.addBorderIntersection(Q,y.x)}}centroid(){const y=this.polyCount.reduce((I,Q)=>I+Q.edges,0);return y!==0?this.acc.div(y)._round():new ye(0,0)}span(){return new ye(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((y,I)=>y+ +(I[0]!==Number.MAX_VALUE),0)}}class Ch{constructor(y){this.zoom=y.zoom,this.canonical=y.canonical,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=y.projection,this.layoutVertexArray=new gr,this.centroidVertexArray=new To,this.indexArray=new Rr,this.programConfigurations=new ol(y.layers,y.zoom),this.segments=new Li,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.enableTerrain=y.enableTerrain}populate(y,I,Q,ne){this.features=[],this.hasPattern=mp("fill-extrusion",this.layers,I),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(_e){const Te=Math.exp(Math.PI*(1-_e.y/(1<<_e.z)*2));return 80150034*Te/(Te*Te+1)/Ar/(1<<_e.z)}(Q),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:_e,id:Te,index:Ce,sourceLayerIndex:$e}of y){const De=this.layers[0]._featureFilter.needGeometry,Ue=Ve(_e,De);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),Ue,Q))continue;const He={id:Te,sourceLayerIndex:$e,index:Ce,geometry:De?Ue.geometry:yt(_e,Q,ne),properties:_e.properties,type:_e.type,patterns:{}},We=this.layoutVertexArray.length;this.hasPattern?this.features.push(gp("fill-extrusion",this.layers,He,this.zoom,I)):this.addFeature(He,He.geometry,Ce,Q,{},I.availableImages,ne),I.featureIndex.insert(_e,He.geometry,Ce,$e,this.index,We)}this.sortBorders()}addFeatures(y,I,Q,ne,_e){for(const Te of this.features){const{geometry:Ce}=Te;this.addFeature(Te,Ce,Te.index,I,Q,ne,_e)}this.sortBorders()}update(y,I,Q,ne){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,Q,ne)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Mm),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=y.createVertexBuffer(this.layoutVertexExtArray,Cm.members,!0))),this.programConfigurations.upload(y),this.uploaded=!0}uploadCentroid(y){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=y.createVertexBuffer(this.centroidVertexArray,Sm.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(y,I,Q,ne,_e,Te,Ce){const $e=[new ye(0,0),new ye(Ar,Ar)],De=Ce.projection,Ue=De.name==="globe",He=this.enableTerrain&&!Ue?new bf:null,We=$m[y.type]==="Polygon";Ue&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new to);const et=_p(I,500);for(let Bt=et.length-1;Bt>=0;Bt--){const qt=et[Bt];(qt.length===0||(it=qt[0]).every(Ft=>Ft.x<=0)||it.every(Ft=>Ft.x>=Ar)||it.every(Ft=>Ft.y<=0)||it.every(Ft=>Ft.y>=Ar))&&et.splice(Bt,1)}var it;let _t;if(Ue)_t=Cf(et,$e,ne);else{_t=[];for(const Bt of et)_t.push({polygon:Bt,bounds:$e})}const Et=We?this.edgeRadius:0;for(const{polygon:Bt,bounds:qt}of _t){let Ft=0,Gt=0;for(const Wt of Bt)We&&!Wt[0].equals(Wt[Wt.length-1])&&Wt.push(Wt[0]),Gt+=We?Wt.length-1:Wt.length;const Jt=this.segments.prepareSegment((We?5:4)*Gt,this.layoutVertexArray,this.indexArray);if(We){const Wt=[],Tn=[];Ft=Jt.vertexLength;for(const Pn of Bt){let Yn,kn;Pn.length&&Pn!==Bt[0]&&Tn.push(Wt.length/2),Yn=Pn[1].sub(Pn[0])._perp()._unit();for(let Ln=1;Ln<Pn.length;Ln++){const Un=Pn[Ln],Bn=Pn[Ln===Pn.length-1?1:Ln+1];let{x:Zn,y:Vn}=Un;if(Et){kn=Bn.sub(Un)._perp()._unit();const or=Yn.add(kn)._unit(),Or=Et*Math.min(4,1/(Yn.x*or.x+Yn.y*or.y));Zn+=Or*or.x,Vn+=Or*or.y,Yn=kn}kh(this.layoutVertexArray,Zn,Vn,0,0,1,1,0),Jt.vertexLength++,Wt.push(Un.x,Un.y),Ue&&Sh(this.layoutVertexExtArray,De.projectTilePoint(Zn,Vn,ne),De.upVector(ne,Zn,Vn))}}const bn=vd(Wt,Tn);for(let Pn=0;Pn<bn.length;Pn+=3)this.indexArray.emplaceBack(Ft+bn[Pn],Ft+bn[Pn+2],Ft+bn[Pn+1]),Jt.primitiveLength++}for(const Wt of Bt){He&&Wt.length&&He.startRing(Wt[0]);let Tn,bn,Pn,Yn=Wt.length>4&&Af(Wt[Wt.length-2],Wt[0],Wt[1]),kn=Et?Dm(Wt[Wt.length-2],Wt[0],Wt[1],Et):0;bn=Wt[1].sub(Wt[0])._perp()._unit();for(let Ln=1,Un=0;Ln<Wt.length;Ln++){let Bn=Wt[Ln-1],Zn=Wt[Ln];const Vn=Wt[Ln===Wt.length-1?1:Ln+1];if(He&&We&&He.currentPolyCount.top++,Tf(Zn,Bn,qt)){Et&&(bn=Vn.sub(Zn)._perp()._unit());continue}He&&He.append(Zn,Bn);const or=Zn.sub(Bn)._perp(),Or=or.x/(Math.abs(or.x)+Math.abs(or.y)),$r=or.y>0?1:0,yr=Bn.dist(Zn);if(Un+yr>32768&&(Un=0),Et){Pn=Vn.sub(Zn)._perp()._unit();let hr=Ef(Bn,Zn,Vn,wf(bn,Pn),Et);isNaN(hr)&&(hr=0);const mi=Zn.sub(Bn)._unit();Bn=Bn.add(mi.mult(kn))._round(),Zn=Zn.add(mi.mult(-hr))._round(),kn=hr,bn=Pn}const nr=Jt.vertexLength,Gr=Wt.length>4&&Af(Bn,Zn,Vn);let Mr=kf(Un,Yn,!0);if(kh(this.layoutVertexArray,Bn.x,Bn.y,Or,$r,0,0,Mr),kh(this.layoutVertexArray,Bn.x,Bn.y,Or,$r,0,1,Mr),Un+=yr,Mr=kf(Un,Gr,!1),Yn=Gr,kh(this.layoutVertexArray,Zn.x,Zn.y,Or,$r,0,0,Mr),kh(this.layoutVertexArray,Zn.x,Zn.y,Or,$r,0,1,Mr),Jt.vertexLength+=4,this.indexArray.emplaceBack(nr+0,nr+1,nr+2),this.indexArray.emplaceBack(nr+1,nr+3,nr+2),Jt.primitiveLength+=2,Et){const hr=Ft+(Ln===1?Wt.length-2:Ln-2),mi=Ln===1?Ft:hr+1;if(this.indexArray.emplaceBack(nr+1,hr,nr+3),this.indexArray.emplaceBack(hr,mi,nr+3),Jt.primitiveLength+=2,Tn===void 0&&(Tn=nr),!Tf(Vn,Wt[Ln],qt)){const hi=Ln===Wt.length-1?Tn:Jt.vertexLength;this.indexArray.emplaceBack(nr+2,nr+3,hi),this.indexArray.emplaceBack(nr+3,hi+1,hi),this.indexArray.emplaceBack(nr+3,mi,hi+1),Jt.primitiveLength+=3}}if(Ue){const hr=this.layoutVertexExtArray,mi=De.projectTilePoint(Bn.x,Bn.y,ne),hi=De.projectTilePoint(Zn.x,Zn.y,ne),ki=De.upVector(ne,Bn.x,Bn.y),Nr=De.upVector(ne,Zn.x,Zn.y);Sh(hr,mi,ki),Sh(hr,mi,ki),Sh(hr,hi,Nr),Sh(hr,hi,Nr)}}We&&(Ft+=Wt.length-1)}}if(He&&He.polyCount.length>0){if(He.borders){He.vertexArrayOffset=this.centroidVertexArray.length;const Bt=He.borders,qt=this.featuresOnBorder.push(He)-1;for(let Ft=0;Ft<4;Ft++)Bt[Ft][0]!==Number.MAX_VALUE&&this.borders[Ft].push(qt)}this.encodeCentroid(He.borders?void 0:He.centroid(),He)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,Q,_e,Te,ne)}sortBorders(){for(let y=0;y<4;y++)this.borders[y].sort((I,Q)=>this.featuresOnBorder[I].borders[y][0]-this.featuresOnBorder[Q].borders[y][0])}encodeCentroid(y,I,Q=!0){let ne,_e;if(y)if(y.y!==0){const Ce=I.span()._mult(this.tileToMeter);ne=(Math.max(y.x,1)<<3)+Math.min(7,Math.round(Ce.x/10)),_e=(Math.max(y.y,1)<<3)+Math.min(7,Math.round(Ce.y/10))}else ne=Math.ceil(7*(y.x+450)),_e=0;else ne=0,_e=+Q;let Te=Q?this.centroidVertexArray.length:I.vertexArrayOffset;for(const Ce of I.polyCount){Q&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*Ce.edges+Ce.top);for(let $e=0;$e<Ce.top;$e++)this.centroidVertexArray.emplace(Te++,ne,_e);for(let $e=0;$e<2*Ce.edges;$e++)this.centroidVertexArray.emplace(Te++,0,_e),this.centroidVertexArray.emplace(Te++,ne,_e)}}}function wf($,y){const I=$.add(y)._unit();return $.x*I.x+$.y*I.y}function Dm($,y,I,Q){const ne=y.sub($)._perp()._unit(),_e=I.sub(y)._perp()._unit();return Ef($,y,I,wf(ne,_e),Q)}function Ef($,y,I,Q,ne){const _e=Math.sqrt(1-Q*Q);return Math.min($.dist(y)/3,y.dist(I)/3,ne*_e/Q)}function Tf($,y,I){return $.x<I[0].x&&y.x<I[0].x||$.x>I[1].x&&y.x>I[1].x||$.y<I[0].y&&y.y<I[0].y||$.y>I[1].y&&y.y>I[1].y}function Af($,y,I){if($.x<0||$.x>=Ar||y.x<0||y.x>=Ar||I.x<0||I.x>=Ar)return!1;const Q=I.sub(y),ne=Q.perp(),_e=$.sub(y);return(Q.x*_e.x+Q.y*_e.y)/Math.sqrt((Q.x*Q.x+Q.y*Q.y)*(_e.x*_e.x+_e.y*_e.y))>-.866&&ne.x*_e.x+ne.y*_e.y<0}function kf($,y,I){const Q=y?2|$:-3&$;return I?1|Q:-2&Q}function Sf(){const $=Math.PI/32,y=Math.tan($),I=_h;return I*Math.sqrt(1+2*y*y)-I}function Cf($,y,I){const Q=1<<I.z,ne=qo(I.x/Q),_e=qo((I.x+1)/Q),Te=Yi(I.y/Q),Ce=Yi((I.y+1)/Q);return function($e,De,Ue,He,We=0,et){const it=[];if(!$e.length||!Ue||!He)return it;const _t=(Wt,Tn)=>{for(const bn of Wt)it.push({polygon:bn,bounds:Tn})},Et=Math.ceil(Math.log2(Ue)),Bt=Math.ceil(Math.log2(He)),qt=Et-Bt,Ft=[];for(let Wt=0;Wt<Math.abs(qt);Wt++)Ft.push(qt>0?0:1);for(let Wt=0;Wt<Math.min(Et,Bt);Wt++)Ft.push(0),Ft.push(1);let Gt=$e;if(Gt=Ad(Gt,De[0].y-We,De[1].y+We,1),Gt=Ad(Gt,De[0].x-We,De[1].x+We,0),!Gt.length)return it;const Jt=[];for(Ft.length?Jt.push({polygons:Gt,bounds:De,depth:0}):_t(Gt,De);Jt.length;){const Wt=Jt.pop(),Tn=Wt.depth,bn=Ft[Tn],Pn=Wt.bounds[0],Yn=Wt.bounds[1],kn=bn===0?Pn.x:Pn.y,Ln=bn===0?Yn.x:Yn.y,Un=et?et(bn,kn,Ln):.5*(kn+Ln),Bn=Ad(Wt.polygons,kn-We,Un+We,bn),Zn=Ad(Wt.polygons,Un-We,Ln+We,bn);if(Bn.length){const Vn=[Pn,new ye(bn===0?Un:Yn.x,bn===1?Un:Yn.y)];Ft.length>Tn+1?Jt.push({polygons:Bn,bounds:Vn,depth:Tn+1}):_t(Bn,Vn)}if(Zn.length){const Vn=[new ye(bn===0?Un:Pn.x,bn===1?Un:Pn.y),Yn];Ft.length>Tn+1?Jt.push({polygons:Zn,bounds:Vn,depth:Tn+1}):_t(Zn,Vn)}}return it}($,y,Math.ceil((_e-ne)/11.25),Math.ceil((Te-Ce)/11.25),1,($e,De,Ue)=>{if($e===0)return .5*(De+Ue);{const He=Yi((I.y+De/Ar)/Q);return(Ua(.5*(Yi((I.y+Ue/Ar)/Q)+He))*Q-I.y)*Ar}})}cr(Ch,"FillExtrusionBucket",{omit:["layers","features"]}),cr(bf,"PartMetadata");const Lm=new Rn({"fill-extrusion-edge-radius":new Ht(mn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Bm={paint:new Rn({"fill-extrusion-opacity":new Ht(mn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new an(mn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ht(mn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ht(mn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _n(mn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new an(mn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new an(mn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ht(mn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ht(mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ht(mn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Lm};function Mf($,y,I){var Q=2*Math.PI*6378137/256/Math.pow(2,I);return[$*Q-2*Math.PI*6378137/2,y*Q-2*Math.PI*6378137/2]}class kd{constructor(y,I,Q){this.z=y,this.x=I,this.y=Q,this.key=Mh(0,y,y,I,Q)}equals(y){return this.z===y.z&&this.x===y.x&&this.y===y.y}url(y,I){const Q=function(_e,Te,Ce){var $e=Mf(256*_e,256*(Te=Math.pow(2,Ce)-Te-1),Ce),De=Mf(256*(_e+1),256*(Te+1),Ce);return $e[0]+","+$e[1]+","+De[0]+","+De[1]}(this.x,this.y,this.z),ne=function(_e,Te,Ce){let $e,De="";for(let Ue=_e;Ue>0;Ue--)$e=1<<Ue-1,De+=(Te&$e?1:0)+(Ce&$e?2:0);return De}(this.z,this.x,this.y);return y[(this.x+this.y)%y.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(I==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ne).replace("{bbox-epsg-3857}",Q)}toString(){return`${this.z}/${this.x}/${this.y}`}}class If{constructor(y,I){this.wrap=y,this.canonical=I,this.key=Mh(y,I.z,I.z,I.x,I.y)}}class So{constructor(y,I,Q,ne,_e){this.overscaledZ=y,this.wrap=I,this.canonical=new kd(Q,+ne,+_e),this.key=I===0&&y===Q?this.canonical.key:Mh(I,y,Q,ne,_e)}equals(y){return this.overscaledZ===y.overscaledZ&&this.wrap===y.wrap&&this.canonical.equals(y.canonical)}scaledTo(y){const I=this.canonical.z-y;return y>this.canonical.z?new So(y,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new So(y,this.wrap,y,this.canonical.x>>I,this.canonical.y>>I)}calculateScaledKey(y,I=!0){if(this.overscaledZ===y&&I)return this.key;if(y>this.canonical.z)return Mh(this.wrap*+I,y,this.canonical.z,this.canonical.x,this.canonical.y);{const Q=this.canonical.z-y;return Mh(this.wrap*+I,y,y,this.canonical.x>>Q,this.canonical.y>>Q)}}isChildOf(y){if(y.wrap!==this.wrap)return!1;const I=this.canonical.z-y.canonical.z;return y.overscaledZ===0||y.overscaledZ<this.overscaledZ&&y.canonical.x===this.canonical.x>>I&&y.canonical.y===this.canonical.y>>I}children(y){if(this.overscaledZ>=y)return[new So(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const I=this.canonical.z+1,Q=2*this.canonical.x,ne=2*this.canonical.y;return[new So(I,this.wrap,I,Q,ne),new So(I,this.wrap,I,Q+1,ne),new So(I,this.wrap,I,Q,ne+1),new So(I,this.wrap,I,Q+1,ne+1)]}isLessThan(y){return this.wrap<y.wrap||!(this.wrap>y.wrap)&&(this.overscaledZ<y.overscaledZ||!(this.overscaledZ>y.overscaledZ)&&(this.canonical.x<y.canonical.x||!(this.canonical.x>y.canonical.x)&&this.canonical.y<y.canonical.y))}wrapped(){return new So(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(y){return new So(this.overscaledZ,y,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new If(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Mh($,y,I,Q,ne){const _e=1<<Math.min(I,22);let Te=_e*(ne%_e)+Q%_e;return $&&I<22&&(Te+=_e*_e*(($<0?-2*$-1:2*$)%(1<<2*(22-I)))),16*(32*Te+I)+(y-I)}function Ih($,y){return $.x*y.x+$.y*y.y}function Pf($,y){if($.length===1){let I=0;const Q=y[I++];let ne;for(;!ne||Q.equals(ne);)if(ne=y[I++],!ne)return 1/0;for(;I<y.length;I++){const _e=y[I],Te=$[0],Ce=ne.sub(Q),$e=_e.sub(Q),De=Te.sub(Q),Ue=Ih(Ce,Ce),He=Ih(Ce,$e),We=Ih($e,$e),et=Ih(De,Ce),it=Ih(De,$e),_t=Ue*We-He*He,Et=(We*et-He*it)/_t,Bt=(Ue*it-He*et)/_t,qt=Q.z*(1-Et-Bt)+ne.z*Et+_e.z*Bt;if(isFinite(qt))return qt}return 1/0}{let I=1/0;for(const Q of y)I=Math.min(I,Q.z);return I}}function Sd($){const y=new ye($[0],$[1]);return y.z=$[2],y}function Of($,y,I,Q,ne,_e,Te,Ce){const $e=Te*ne.getElevationAt($,y,!0,!0),De=_e[0]!==0,Ue=De?_e[1]===0?Te*(_e[0]/7-450):Te*function(He,We,et){const it=Math.floor(We[0]/8),_t=Math.floor(We[1]/8),Et=10*(We[0]-8*it),Bt=10*(We[1]-8*_t),qt=He.getElevationAt(it,_t,!0,!0),Ft=He.getMeterToDEM(et),Gt=Math.floor(.5*(Et*Ft-1)),Jt=Math.floor(.5*(Bt*Ft-1)),Wt=He.tileCoordToPixel(it,_t),Tn=2*Gt+1,bn=2*Jt+1,Pn=function(Zn,Vn,or,Or,$r){return[Zn.getElevationAtPixel(Vn,or,!0),Zn.getElevationAtPixel(Vn+$r,or,!0),Zn.getElevationAtPixel(Vn,or+$r,!0),Zn.getElevationAtPixel(Vn+Or,or+$r,!0)]}(He,Wt.x-Gt,Wt.y-Jt,Tn,bn),Yn=Math.abs(Pn[0]-Pn[1]),kn=Math.abs(Pn[2]-Pn[3]),Ln=Math.abs(Pn[0]-Pn[2])+Math.abs(Pn[1]-Pn[3]),Un=Math.min(.25,.5*Ft*(Yn+kn)/Tn),Bn=Math.min(.25,.5*Ft*Ln/bn);return qt+Math.max(Un*Et,Bn*Bt)}(ne,_e,Ce):$e;return{base:$e+(I===0)?-1:I,top:De?Math.max(Ue+Q,$e+I+2):$e+Q}}cr(kd,"CanonicalTileID"),cr(So,"OverscaledTileID",{omit:["projMatrix"]});const Fm=Dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Nm}=Fm,jm=Dn([{name:"a_packed",components:4,type:"Float32"}]),{members:Um}=jm,Vm=Hc.VectorTileFeature.types,Gm=Math.cos(Math.PI/180*37.5);class Cd{constructor(y){this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(I=>I.id),this.index=y.index,this.projection=y.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(I=>{this.gradients[I.id]={}}),this.layoutVertexArray=new Tr,this.layoutVertexArray2=new Ur,this.indexArray=new Rr,this.programConfigurations=new ol(y.layers,y.zoom),this.segments=new Li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id)}populate(y,I,Q,ne){this.hasPattern=mp("line",this.layers,I);const _e=this.layers[0].layout.get("line-sort-key"),Te=[];for(const{feature:Ue,id:He,index:We,sourceLayerIndex:et}of y){const it=this.layers[0]._featureFilter.needGeometry,_t=Ve(Ue,it);if(!this.layers[0]._featureFilter.filter(new Tt(this.zoom),_t,Q))continue;const Et=_e?_e.evaluate(_t,{},Q):void 0,Bt={id:He,properties:Ue.properties,type:Ue.type,sourceLayerIndex:et,index:We,geometry:it?_t.geometry:yt(Ue,Q,ne),patterns:{},sortKey:Et};Te.push(Bt)}_e&&Te.sort((Ue,He)=>Ue.sortKey-He.sortKey);const{lineAtlas:Ce,featureIndex:$e}=I,De=this.addConstantDashes(Ce);for(const Ue of Te){const{geometry:He,index:We,sourceLayerIndex:et}=Ue;if(De&&this.addFeatureDashes(Ue,Ce),this.hasPattern){const it=gp("line",this.layers,Ue,this.zoom,I);this.patternFeatures.push(it)}else this.addFeature(Ue,He,We,Q,Ce.positions,I.availableImages);$e.insert(y[We].feature,He,We,et,this.index)}}addConstantDashes(y){let I=!1;for(const Q of this.layers){const ne=Q.paint.get("line-dasharray").value,_e=Q.layout.get("line-cap").value;if(ne.kind!=="constant"||_e.kind!=="constant")I=!0;else{const Te=_e.value,Ce=ne.value;if(!Ce)continue;y.addDash(Ce.from,Te),y.addDash(Ce.to,Te),Ce.other&&y.addDash(Ce.other,Te)}}return I}addFeatureDashes(y,I){const Q=this.zoom;for(const ne of this.layers){const _e=ne.paint.get("line-dasharray").value,Te=ne.layout.get("line-cap").value;if(_e.kind==="constant"&&Te.kind==="constant")continue;let Ce,$e,De,Ue,He,We;if(_e.kind==="constant"){const Et=_e.value;if(!Et)continue;Ce=Et.other||Et.to,$e=Et.to,De=Et.from}else Ce=_e.evaluate({zoom:Q-1},y),$e=_e.evaluate({zoom:Q},y),De=_e.evaluate({zoom:Q+1},y);Te.kind==="constant"?Ue=He=We=Te.value:(Ue=Te.evaluate({zoom:Q-1},y),He=Te.evaluate({zoom:Q},y),We=Te.evaluate({zoom:Q+1},y)),I.addDash(Ce,Ue),I.addDash($e,He),I.addDash(De,We);const et=I.getKey(Ce,Ue),it=I.getKey($e,He),_t=I.getKey(De,We);y.patterns[ne.id]={min:et,mid:it,max:_t}}}update(y,I,Q,ne){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(y,I,this.stateDependentLayers,Q,ne)}addFeatures(y,I,Q,ne,_e){for(const Te of this.patternFeatures)this.addFeature(Te,Te.geometry,Te.index,I,Q,ne)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(y){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=y.createVertexBuffer(this.layoutVertexArray2,Um)),this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Nm),this.indexBuffer=y.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(y),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(y){if(y.properties&&y.properties.hasOwnProperty("mapbox_clip_start")&&y.properties.hasOwnProperty("mapbox_clip_end"))return{start:+y.properties.mapbox_clip_start,end:+y.properties.mapbox_clip_end}}addFeature(y,I,Q,ne,_e,Te){const Ce=this.layers[0].layout,$e=Ce.get("line-join").evaluate(y,{}),De=Ce.get("line-cap").evaluate(y,{}),Ue=Ce.get("line-miter-limit"),He=Ce.get("line-round-limit");this.lineClips=this.lineFeatureClips(y);for(const We of I)this.addLine(We,y,$e,De,Ue,He);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,y,Q,_e,Te,ne)}addLine(y,I,Q,ne,_e,Te){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Bt=0;Bt<y.length-1;Bt++)this.totalDistance+=y[Bt].dist(y[Bt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Ce=Vm[I.type]==="Polygon";let $e=y.length;for(;$e>=2&&y[$e-1].equals(y[$e-2]);)$e--;let De=0;for(;De<$e-1&&y[De].equals(y[De+1]);)De++;if($e<(Ce?3:2))return;Q==="bevel"&&(_e=1.05);const Ue=this.overscaling<=16?122880/(512*this.overscaling):0,He=this.segments.prepareSegment(10*$e,this.layoutVertexArray,this.indexArray);let We,et,it,_t,Et;this.e1=this.e2=-1,Ce&&(We=y[$e-2],Et=y[De].sub(We)._unit()._perp());for(let Bt=De;Bt<$e;Bt++){if(it=Bt===$e-1?Ce?y[De+1]:void 0:y[Bt+1],it&&y[Bt].equals(it))continue;Et&&(_t=Et),We&&(et=We),We=y[Bt],Et=it?it.sub(We)._unit()._perp():_t,_t=_t||Et;let qt=_t.add(Et);qt.x===0&&qt.y===0||qt._unit();const Ft=_t.x*Et.x+_t.y*Et.y,Gt=qt.x*Et.x+qt.y*Et.y,Jt=Gt!==0?1/Gt:1/0,Wt=2*Math.sqrt(2-2*Gt),Tn=Gt<Gm&&et&&it,bn=_t.x*Et.y-_t.y*Et.x>0;if(Tn&&Bt>De){const kn=We.dist(et);if(kn>2*Ue){const Ln=We.sub(We.sub(et)._mult(Ue/kn)._round());this.updateDistance(et,Ln),this.addCurrentVertex(Ln,_t,0,0,He),et=Ln}}const Pn=et&&it;let Yn=Pn?Q:Ce?"butt":ne;if(Pn&&Yn==="round"&&(Jt<Te?Yn="miter":Jt<=2&&(Yn="fakeround")),Yn==="miter"&&Jt>_e&&(Yn="bevel"),Yn==="bevel"&&(Jt>2&&(Yn="flipbevel"),Jt<_e&&(Yn="miter")),et&&this.updateDistance(et,We),Yn==="miter")qt._mult(Jt),this.addCurrentVertex(We,qt,0,0,He);else if(Yn==="flipbevel"){if(Jt>100)qt=Et.mult(-1);else{const kn=Jt*_t.add(Et).mag()/_t.sub(Et).mag();qt._perp()._mult(kn*(bn?-1:1))}this.addCurrentVertex(We,qt,0,0,He),this.addCurrentVertex(We,qt.mult(-1),0,0,He)}else if(Yn==="bevel"||Yn==="fakeround"){const kn=-Math.sqrt(Jt*Jt-1),Ln=bn?kn:0,Un=bn?0:kn;if(et&&this.addCurrentVertex(We,_t,Ln,Un,He),Yn==="fakeround"){const Bn=Math.round(180*Wt/Math.PI/20);for(let Zn=1;Zn<Bn;Zn++){let Vn=Zn/Bn;if(Vn!==.5){const Or=Vn-.5;Vn+=Vn*Or*(Vn-1)*((1.0904+Ft*(Ft*(3.55645-1.43519*Ft)-3.2452))*Or*Or+(.848013+Ft*(.215638*Ft-1.06021)))}const or=Et.sub(_t)._mult(Vn)._add(_t)._unit()._mult(bn?-1:1);this.addHalfVertex(We,or.x,or.y,!1,bn,0,He)}}it&&this.addCurrentVertex(We,Et,-Ln,-Un,He)}else if(Yn==="butt")this.addCurrentVertex(We,qt,0,0,He);else if(Yn==="square"){const kn=et?1:-1;et||this.addCurrentVertex(We,qt,kn,kn,He),this.addCurrentVertex(We,qt,0,0,He),et&&this.addCurrentVertex(We,qt,kn,kn,He)}else Yn==="round"&&(et&&(this.addCurrentVertex(We,_t,0,0,He),this.addCurrentVertex(We,_t,1,1,He,!0)),it&&(this.addCurrentVertex(We,Et,-1,-1,He,!0),this.addCurrentVertex(We,Et,0,0,He)));if(Tn&&Bt<$e-1){const kn=We.dist(it);if(kn>2*Ue){const Ln=We.add(it.sub(We)._mult(Ue/kn)._round());this.updateDistance(We,Ln),this.addCurrentVertex(Ln,Et,0,0,He),We=Ln}}}}addCurrentVertex(y,I,Q,ne,_e,Te=!1){const Ce=I.y*ne-I.x,$e=-I.y-I.x*ne;this.addHalfVertex(y,I.x+I.y*Q,I.y-I.x*Q,Te,!1,Q,_e),this.addHalfVertex(y,Ce,$e,Te,!0,-ne,_e)}addHalfVertex({x:y,y:I},Q,ne,_e,Te,Ce,$e){this.layoutVertexArray.emplaceBack((y<<1)+(_e?1:0),(I<<1)+(Te?1:0),Math.round(63*Q)+128,Math.round(63*ne)+128,1+(Ce===0?0:Ce<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const De=$e.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,De),$e.primitiveLength++),Te?this.e2=De:this.e1=De}updateScaledDistance(){if(this.lineClips){const y=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=y*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(y,I){this.distance+=y.dist(I),this.updateScaledDistance()}}cr(Cd,"LineBucket",{omit:["layers","patternFeatures"]});const qm=new Rn({"line-cap":new an(mn.layout_line["line-cap"]),"line-join":new an(mn.layout_line["line-join"]),"line-miter-limit":new Ht(mn.layout_line["line-miter-limit"]),"line-round-limit":new Ht(mn.layout_line["line-round-limit"]),"line-sort-key":new an(mn.layout_line["line-sort-key"])});var Rf={paint:new Rn({"line-opacity":new an(mn.paint_line["line-opacity"]),"line-color":new an(mn.paint_line["line-color"]),"line-translate":new Ht(mn.paint_line["line-translate"]),"line-translate-anchor":new Ht(mn.paint_line["line-translate-anchor"]),"line-width":new an(mn.paint_line["line-width"]),"line-gap-width":new an(mn.paint_line["line-gap-width"]),"line-offset":new an(mn.paint_line["line-offset"]),"line-blur":new an(mn.paint_line["line-blur"]),"line-dasharray":new _n(mn.paint_line["line-dasharray"]),"line-pattern":new _n(mn.paint_line["line-pattern"]),"line-gradient":new dn(mn.paint_line["line-gradient"]),"line-trim-offset":new Ht(mn.paint_line["line-trim-offset"])}),layout:qm};const $f=new class extends an{possiblyEvaluate($,y){return y=new Tt(Math.floor(y.zoom),{now:y.now,fadeDuration:y.fadeDuration,zoomHistory:y.zoomHistory,transition:y.transition}),super.possiblyEvaluate($,y)}evaluate($,y,I,Q){return y=bt({},y,{zoom:Math.floor(y.zoom)}),super.evaluate($,y,I,Q)}}(Rf.paint.properties["line-width"].specification);function zf($,y){return y>0?y+2*$:$}$f.useIntegerZoom=!0;const Hm=Dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Wm=Dn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Zm=Dn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Xm=Dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Km=Dn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Df=Dn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ym=Dn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Dn([{name:"triangle",components:3,type:"Uint16"}]),Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Dn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Dn([{type:"Float32",name:"offsetX"}]),Dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var uo=24;const gs=128;function yp($,y){const{expression:I}=y;if(I.kind==="constant")return{kind:"constant",layoutSize:I.evaluate(new Tt($+1))};if(I.kind==="source")return{kind:"source"};{const{zoomStops:Q,interpolationType:ne}=I;let _e=0;for(;_e<Q.length&&Q[_e]<=$;)_e++;_e=Math.max(0,_e-1);let Te=_e;for(;Te<Q.length&&Q[Te]<$+1;)Te++;Te=Math.min(Q.length-1,Te);const Ce=Q[_e],$e=Q[Te];return I.kind==="composite"?{kind:"composite",minZoom:Ce,maxZoom:$e,interpolationType:ne}:{kind:"camera",minZoom:Ce,maxZoom:$e,minSize:I.evaluate(new Tt(Ce)),maxSize:I.evaluate(new Tt($e)),interpolationType:ne}}}function Md($,{uSize:y,uSizeT:I},{lowerSize:Q,upperSize:ne}){return $.kind==="source"?Q/gs:$.kind==="composite"?Hr(Q/gs,ne/gs,I):y}function Fu($,y){let I=0,Q=0;if($.kind==="constant")Q=$.layoutSize;else if($.kind!=="source"){const{interpolationType:ne,minZoom:_e,maxZoom:Te}=$,Ce=ne?Xe(Vo.interpolationFactor(ne,y,_e,Te),0,1):0;$.kind==="camera"?Q=Hr($.minSize,$.maxSize,Ce):I=Ce}return{uSizeT:I,uSize:Q}}var Jm=Object.freeze({__proto__:null,getSizeData:yp,evaluateSizeForFeature:Md,evaluateSizeForZoom:Fu,SIZE_PACK_FACTOR:gs});function Qm($,y,I){return $.sections.forEach(Q=>{Q.text=function(ne,_e,Te){const Ce=_e.layout.get("text-transform").evaluate(Te,{});return Ce==="uppercase"?ne=ne.toLocaleUpperCase():Ce==="lowercase"&&(ne=ne.toLocaleLowerCase()),At.applyArabicShaping&&(ne=At.applyArabicShaping(ne)),ne}(Q.text,y,I)}),$}const Ph={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function eg($){return $==="\uFE36"||$==="\uFE48"||$==="\uFE38"||$==="\uFE44"||$==="\uFE42"||$==="\uFE3E"||$==="\uFE3C"||$==="\uFE3A"||$==="\uFE18"||$==="\uFE40"||$==="\uFE10"||$==="\uFE13"||$==="\uFE14"||$==="\uFF40"||$==="\uFFE3"||$==="\uFE11"||$==="\uFE12"}function tg($){return $==="\uFE35"||$==="\uFE47"||$==="\uFE37"||$==="\uFE43"||$==="\uFE41"||$==="\uFE3D"||$==="\uFE3B"||$==="\uFE39"||$==="\uFE17"||$==="\uFE3F"}var Lf=function($,y,I,Q,ne){var _e,Te,Ce=8*ne-Q-1,$e=(1<<Ce)-1,De=$e>>1,Ue=-7,He=I?ne-1:0,We=I?-1:1,et=$[y+He];for(He+=We,_e=et&(1<<-Ue)-1,et>>=-Ue,Ue+=Ce;Ue>0;_e=256*_e+$[y+He],He+=We,Ue-=8);for(Te=_e&(1<<-Ue)-1,_e>>=-Ue,Ue+=Q;Ue>0;Te=256*Te+$[y+He],He+=We,Ue-=8);if(_e===0)_e=1-De;else{if(_e===$e)return Te?NaN:1/0*(et?-1:1);Te+=Math.pow(2,Q),_e-=De}return(et?-1:1)*Te*Math.pow(2,_e-Q)},Bf=function($,y,I,Q,ne,_e){var Te,Ce,$e,De=8*_e-ne-1,Ue=(1<<De)-1,He=Ue>>1,We=ne===23?Math.pow(2,-24)-Math.pow(2,-77):0,et=Q?0:_e-1,it=Q?1:-1,_t=y<0||y===0&&1/y<0?1:0;for(y=Math.abs(y),isNaN(y)||y===1/0?(Ce=isNaN(y)?1:0,Te=Ue):(Te=Math.floor(Math.log(y)/Math.LN2),y*($e=Math.pow(2,-Te))<1&&(Te--,$e*=2),(y+=Te+He>=1?We/$e:We*Math.pow(2,1-He))*$e>=2&&(Te++,$e/=2),Te+He>=Ue?(Ce=0,Te=Ue):Te+He>=1?(Ce=(y*$e-1)*Math.pow(2,ne),Te+=He):(Ce=y*Math.pow(2,He-1)*Math.pow(2,ne),Te=0));ne>=8;$[I+et]=255&Ce,et+=it,Ce/=256,ne-=8);for(Te=Te<<ne|Ce,De+=ne;De>0;$[I+et]=255&Te,et+=it,Te/=256,De-=8);$[I+et-it]|=128*_t},Oh=_i;function _i($){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView($)?$:new Uint8Array($||0),this.pos=0,this.type=0,this.length=this.buf.length}_i.Varint=0,_i.Fixed64=1,_i.Bytes=2,_i.Fixed32=5;var vp=4294967296,Ff=1/vp,Nf=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function sl($){return $.type===_i.Bytes?$.readVarint()+$.pos:$.pos+1}function Nu($,y,I){return I?4294967296*y+($>>>0):4294967296*(y>>>0)+($>>>0)}function jf($,y,I){var Q=y<=16383?1:y<=2097151?2:y<=268435455?3:Math.floor(Math.log(y)/(7*Math.LN2));I.realloc(Q);for(var ne=I.pos-1;ne>=$;ne--)I.buf[ne+Q]=I.buf[ne]}function ng($,y){for(var I=0;I<$.length;I++)y.writeVarint($[I])}function rg($,y){for(var I=0;I<$.length;I++)y.writeSVarint($[I])}function ig($,y){for(var I=0;I<$.length;I++)y.writeFloat($[I])}function og($,y){for(var I=0;I<$.length;I++)y.writeDouble($[I])}function ag($,y){for(var I=0;I<$.length;I++)y.writeBoolean($[I])}function sg($,y){for(var I=0;I<$.length;I++)y.writeFixed32($[I])}function lg($,y){for(var I=0;I<$.length;I++)y.writeSFixed32($[I])}function cg($,y){for(var I=0;I<$.length;I++)y.writeFixed64($[I])}function ug($,y){for(var I=0;I<$.length;I++)y.writeSFixed64($[I])}function Id($,y){return($[y]|$[y+1]<<8|$[y+2]<<16)+16777216*$[y+3]}function ju($,y,I){$[I]=y,$[I+1]=y>>>8,$[I+2]=y>>>16,$[I+3]=y>>>24}function Uf($,y){return($[y]|$[y+1]<<8|$[y+2]<<16)+($[y+3]<<24)}function hg($,y,I){y.glyphs=[],$===1&&I.readMessage(dg,y)}function dg($,y,I){if($===3){const{id:Q,bitmap:ne,width:_e,height:Te,left:Ce,top:$e,advance:De}=I.readMessage(pg,{});y.glyphs.push({id:Q,bitmap:new al({width:_e+6,height:Te+6},ne),metrics:{width:_e,height:Te,left:Ce,top:$e,advance:De}})}else $===4?y.ascender=I.readSVarint():$===5&&(y.descender=I.readSVarint())}function pg($,y,I){$===1?y.id=I.readVarint():$===2?y.bitmap=I.readBytes():$===3?y.width=I.readVarint():$===4?y.height=I.readVarint():$===5?y.left=I.readSVarint():$===6?y.top=I.readSVarint():$===7&&(y.advance=I.readVarint())}function xp($){let y=0,I=0;for(const Te of $)y+=Te.w*Te.h,I=Math.max(I,Te.w);$.sort((Te,Ce)=>Ce.h-Te.h);const Q=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(y/.95)),I),h:1/0}];let ne=0,_e=0;for(const Te of $)for(let Ce=Q.length-1;Ce>=0;Ce--){const $e=Q[Ce];if(!(Te.w>$e.w||Te.h>$e.h)){if(Te.x=$e.x,Te.y=$e.y,_e=Math.max(_e,Te.y+Te.h),ne=Math.max(ne,Te.x+Te.w),Te.w===$e.w&&Te.h===$e.h){const De=Q.pop();Ce<Q.length&&(Q[Ce]=De)}else Te.h===$e.h?($e.x+=Te.w,$e.w-=Te.w):Te.w===$e.w?($e.y+=Te.h,$e.h-=Te.h):(Q.push({x:$e.x+Te.w,y:$e.y,w:$e.w-Te.w,h:Te.h}),$e.y+=Te.h,$e.h-=Te.h);break}}return{w:ne,h:_e,fill:y/(ne*_e)||0}}_i.prototype={destroy:function(){this.buf=null},readFields:function($,y,I){for(I=I||this.length;this.pos<I;){var Q=this.readVarint(),ne=Q>>3,_e=this.pos;this.type=7&Q,$(ne,y,this),this.pos===_e&&this.skip(Q)}return y},readMessage:function($,y){return this.readFields($,y,this.readVarint()+this.pos)},readFixed32:function(){var $=Id(this.buf,this.pos);return this.pos+=4,$},readSFixed32:function(){var $=Uf(this.buf,this.pos);return this.pos+=4,$},readFixed64:function(){var $=Id(this.buf,this.pos)+Id(this.buf,this.pos+4)*vp;return this.pos+=8,$},readSFixed64:function(){var $=Id(this.buf,this.pos)+Uf(this.buf,this.pos+4)*vp;return this.pos+=8,$},readFloat:function(){var $=Lf(this.buf,this.pos,!0,23,4);return this.pos+=4,$},readDouble:function(){var $=Lf(this.buf,this.pos,!0,52,8);return this.pos+=8,$},readVarint:function($){var y,I,Q=this.buf;return y=127&(I=Q[this.pos++]),I<128?y:(y|=(127&(I=Q[this.pos++]))<<7,I<128?y:(y|=(127&(I=Q[this.pos++]))<<14,I<128?y:(y|=(127&(I=Q[this.pos++]))<<21,I<128?y:function(ne,_e,Te){var Ce,$e,De=Te.buf;if(Ce=(112&($e=De[Te.pos++]))>>4,$e<128||(Ce|=(127&($e=De[Te.pos++]))<<3,$e<128)||(Ce|=(127&($e=De[Te.pos++]))<<10,$e<128)||(Ce|=(127&($e=De[Te.pos++]))<<17,$e<128)||(Ce|=(127&($e=De[Te.pos++]))<<24,$e<128)||(Ce|=(1&($e=De[Te.pos++]))<<31,$e<128))return Nu(ne,Ce,_e);throw new Error("Expected varint not more than 10 bytes")}(y|=(15&(I=Q[this.pos]))<<28,$,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var $=this.readVarint();return $%2==1?($+1)/-2:$/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var $=this.readVarint()+this.pos,y=this.pos;return this.pos=$,$-y>=12&&Nf?function(I,Q,ne){return Nf.decode(I.subarray(Q,ne))}(this.buf,y,$):function(I,Q,ne){for(var _e="",Te=Q;Te<ne;){var Ce,$e,De,Ue=I[Te],He=null,We=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Te+We>ne)break;We===1?Ue<128&&(He=Ue):We===2?(192&(Ce=I[Te+1]))==128&&(He=(31&Ue)<<6|63&Ce)<=127&&(He=null):We===3?($e=I[Te+2],(192&(Ce=I[Te+1]))==128&&(192&$e)==128&&((He=(15&Ue)<<12|(63&Ce)<<6|63&$e)<=2047||He>=55296&&He<=57343)&&(He=null)):We===4&&($e=I[Te+2],De=I[Te+3],(192&(Ce=I[Te+1]))==128&&(192&$e)==128&&(192&De)==128&&((He=(15&Ue)<<18|(63&Ce)<<12|(63&$e)<<6|63&De)<=65535||He>=1114112)&&(He=null)),He===null?(He=65533,We=1):He>65535&&(He-=65536,_e+=String.fromCharCode(He>>>10&1023|55296),He=56320|1023&He),_e+=String.fromCharCode(He),Te+=We}return _e}(this.buf,y,$)},readBytes:function(){var $=this.readVarint()+this.pos,y=this.buf.subarray(this.pos,$);return this.pos=$,y},readPackedVarint:function($,y){if(this.type!==_i.Bytes)return $.push(this.readVarint(y));var I=sl(this);for($=$||[];this.pos<I;)$.push(this.readVarint(y));return $},readPackedSVarint:function($){if(this.type!==_i.Bytes)return $.push(this.readSVarint());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readSVarint());return $},readPackedBoolean:function($){if(this.type!==_i.Bytes)return $.push(this.readBoolean());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readBoolean());return $},readPackedFloat:function($){if(this.type!==_i.Bytes)return $.push(this.readFloat());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readFloat());return $},readPackedDouble:function($){if(this.type!==_i.Bytes)return $.push(this.readDouble());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readDouble());return $},readPackedFixed32:function($){if(this.type!==_i.Bytes)return $.push(this.readFixed32());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readFixed32());return $},readPackedSFixed32:function($){if(this.type!==_i.Bytes)return $.push(this.readSFixed32());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readSFixed32());return $},readPackedFixed64:function($){if(this.type!==_i.Bytes)return $.push(this.readFixed64());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readFixed64());return $},readPackedSFixed64:function($){if(this.type!==_i.Bytes)return $.push(this.readSFixed64());var y=sl(this);for($=$||[];this.pos<y;)$.push(this.readSFixed64());return $},skip:function($){var y=7&$;if(y===_i.Varint)for(;this.buf[this.pos++]>127;);else if(y===_i.Bytes)this.pos=this.readVarint()+this.pos;else if(y===_i.Fixed32)this.pos+=4;else{if(y!==_i.Fixed64)throw new Error("Unimplemented type: "+y);this.pos+=8}},writeTag:function($,y){this.writeVarint($<<3|y)},realloc:function($){for(var y=this.length||16;y<this.pos+$;)y*=2;if(y!==this.length){var I=new Uint8Array(y);I.set(this.buf),this.buf=I,this.length=y}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function($){this.realloc(4),ju(this.buf,$,this.pos),this.pos+=4},writeSFixed32:function($){this.realloc(4),ju(this.buf,$,this.pos),this.pos+=4},writeFixed64:function($){this.realloc(8),ju(this.buf,-1&$,this.pos),ju(this.buf,Math.floor($*Ff),this.pos+4),this.pos+=8},writeSFixed64:function($){this.realloc(8),ju(this.buf,-1&$,this.pos),ju(this.buf,Math.floor($*Ff),this.pos+4),this.pos+=8},writeVarint:function($){($=+$||0)>268435455||$<0?function(y,I){var Q,ne;if(y>=0?(Q=y%4294967296|0,ne=y/4294967296|0):(ne=~(-y/4294967296),4294967295^(Q=~(-y%4294967296))?Q=Q+1|0:(Q=0,ne=ne+1|0)),y>=18446744073709552e3||y<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");I.realloc(10),function(_e,Te,Ce){Ce.buf[Ce.pos++]=127&_e|128,_e>>>=7,Ce.buf[Ce.pos++]=127&_e|128,_e>>>=7,Ce.buf[Ce.pos++]=127&_e|128,_e>>>=7,Ce.buf[Ce.pos++]=127&_e|128,Ce.buf[Ce.pos]=127&(_e>>>=7)}(Q,0,I),function(_e,Te){var Ce=(7&_e)<<4;Te.buf[Te.pos++]|=Ce|((_e>>>=3)?128:0),_e&&(Te.buf[Te.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Te.buf[Te.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Te.buf[Te.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Te.buf[Te.pos++]=127&_e|((_e>>>=7)?128:0),_e&&(Te.buf[Te.pos++]=127&_e)))))}(ne,I)}($,this):(this.realloc(4),this.buf[this.pos++]=127&$|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=127&($>>>=7)|($>127?128:0),$<=127||(this.buf[this.pos++]=$>>>7&127))))},writeSVarint:function($){this.writeVarint($<0?2*-$-1:2*$)},writeBoolean:function($){this.writeVarint(Boolean($))},writeString:function($){$=String($),this.realloc(4*$.length),this.pos++;var y=this.pos;this.pos=function(Q,ne,_e){for(var Te,Ce,$e=0;$e<ne.length;$e++){if((Te=ne.charCodeAt($e))>55295&&Te<57344){if(!Ce){Te>56319||$e+1===ne.length?(Q[_e++]=239,Q[_e++]=191,Q[_e++]=189):Ce=Te;continue}if(Te<56320){Q[_e++]=239,Q[_e++]=191,Q[_e++]=189,Ce=Te;continue}Te=Ce-55296<<10|Te-56320|65536,Ce=null}else Ce&&(Q[_e++]=239,Q[_e++]=191,Q[_e++]=189,Ce=null);Te<128?Q[_e++]=Te:(Te<2048?Q[_e++]=Te>>6|192:(Te<65536?Q[_e++]=Te>>12|224:(Q[_e++]=Te>>18|240,Q[_e++]=Te>>12&63|128),Q[_e++]=Te>>6&63|128),Q[_e++]=63&Te|128)}return _e}(this.buf,$,this.pos);var I=this.pos-y;I>=128&&jf(y,I,this),this.pos=y-1,this.writeVarint(I),this.pos+=I},writeFloat:function($){this.realloc(4),Bf(this.buf,$,this.pos,!0,23,4),this.pos+=4},writeDouble:function($){this.realloc(8),Bf(this.buf,$,this.pos,!0,52,8),this.pos+=8},writeBytes:function($){var y=$.length;this.writeVarint(y),this.realloc(y);for(var I=0;I<y;I++)this.buf[this.pos++]=$[I]},writeRawMessage:function($,y){this.pos++;var I=this.pos;$(y,this);var Q=this.pos-I;Q>=128&&jf(I,Q,this),this.pos=I-1,this.writeVarint(Q),this.pos+=Q},writeMessage:function($,y,I){this.writeTag($,_i.Bytes),this.writeRawMessage(y,I)},writePackedVarint:function($,y){y.length&&this.writeMessage($,ng,y)},writePackedSVarint:function($,y){y.length&&this.writeMessage($,rg,y)},writePackedBoolean:function($,y){y.length&&this.writeMessage($,ag,y)},writePackedFloat:function($,y){y.length&&this.writeMessage($,ig,y)},writePackedDouble:function($,y){y.length&&this.writeMessage($,og,y)},writePackedFixed32:function($,y){y.length&&this.writeMessage($,sg,y)},writePackedSFixed32:function($,y){y.length&&this.writeMessage($,lg,y)},writePackedFixed64:function($,y){y.length&&this.writeMessage($,cg,y)},writePackedSFixed64:function($,y){y.length&&this.writeMessage($,ug,y)},writeBytesField:function($,y){this.writeTag($,_i.Bytes),this.writeBytes(y)},writeFixed32Field:function($,y){this.writeTag($,_i.Fixed32),this.writeFixed32(y)},writeSFixed32Field:function($,y){this.writeTag($,_i.Fixed32),this.writeSFixed32(y)},writeFixed64Field:function($,y){this.writeTag($,_i.Fixed64),this.writeFixed64(y)},writeSFixed64Field:function($,y){this.writeTag($,_i.Fixed64),this.writeSFixed64(y)},writeVarintField:function($,y){this.writeTag($,_i.Varint),this.writeVarint(y)},writeSVarintField:function($,y){this.writeTag($,_i.Varint),this.writeSVarint(y)},writeStringField:function($,y){this.writeTag($,_i.Bytes),this.writeString(y)},writeFloatField:function($,y){this.writeTag($,_i.Fixed32),this.writeFloat(y)},writeDoubleField:function($,y){this.writeTag($,_i.Fixed64),this.writeDouble(y)},writeBooleanField:function($,y){this.writeVarintField($,Boolean(y))}};class bp{constructor(y,{pixelRatio:I,version:Q,stretchX:ne,stretchY:_e,content:Te}){this.paddedRect=y,this.pixelRatio=I,this.stretchX=ne,this.stretchY=_e,this.content=Te,this.version=Q}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Vf{constructor(y,I){const Q={},ne={};this.haveRenderCallbacks=[];const _e=[];this.addImages(y,Q,_e),this.addImages(I,ne,_e);const{w:Te,h:Ce}=xp(_e),$e=new Zo({width:Te||1,height:Ce||1});for(const De in y){const Ue=y[De],He=Q[De].paddedRect;Zo.copy(Ue.data,$e,{x:0,y:0},{x:He.x+1,y:He.y+1},Ue.data)}for(const De in I){const Ue=I[De],He=ne[De].paddedRect,We=He.x+1,et=He.y+1,it=Ue.data.width,_t=Ue.data.height;Zo.copy(Ue.data,$e,{x:0,y:0},{x:We,y:et},Ue.data),Zo.copy(Ue.data,$e,{x:0,y:_t-1},{x:We,y:et-1},{width:it,height:1}),Zo.copy(Ue.data,$e,{x:0,y:0},{x:We,y:et+_t},{width:it,height:1}),Zo.copy(Ue.data,$e,{x:it-1,y:0},{x:We-1,y:et},{width:1,height:_t}),Zo.copy(Ue.data,$e,{x:0,y:0},{x:We+it,y:et},{width:1,height:_t})}this.image=$e,this.iconPositions=Q,this.patternPositions=ne}addImages(y,I,Q){for(const ne in y){const _e=y[ne],Te={x:0,y:0,w:_e.data.width+2,h:_e.data.height+2};Q.push(Te),I[ne]=new bp(Te,_e),_e.hasRenderCallback&&this.haveRenderCallbacks.push(ne)}}patchUpdatedImages(y,I){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(Q=>y.hasImage(Q)),y.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const Q in y.updatedImages)this.patchUpdatedImage(this.iconPositions[Q],y.getImage(Q),I),this.patchUpdatedImage(this.patternPositions[Q],y.getImage(Q),I)}patchUpdatedImage(y,I,Q){if(!y||!I||y.version===I.version)return;y.version=I.version;const[ne,_e]=y.tl;Q.update(I.data,void 0,{x:ne,y:_e})}}cr(bp,"ImagePosition"),cr(Vf,"ImageAtlas");const aa={horizontal:1,vertical:2,horizontalOnly:3};class Rh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(y,I){const Q=new Rh;return Q.scale=y||1,Q.fontStack=I,Q}static forImage(y){const I=new Rh;return I.imageName=y,I}}class Uu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(y,I){const Q=new Uu;for(let ne=0;ne<y.sections.length;ne++){const _e=y.sections[ne];_e.image?Q.addImageSection(_e):Q.addTextSection(_e,I)}return Q}length(){return this.text.length}getSection(y){return this.sections[this.sectionIndex[y]]}getSections(){return this.sections}getSectionIndex(y){return this.sectionIndex[y]}getCharCode(y){return this.text.charCodeAt(y)}verticalizePunctuation(y){this.text=function(I,Q){let ne="";for(let _e=0;_e<I.length;_e++){const Te=I.charCodeAt(_e+1)||null,Ce=I.charCodeAt(_e-1)||null;ne+=!Q&&(Te&&us(Te)&&!Ph[I[_e+1]]||Ce&&us(Ce)&&!Ph[I[_e-1]])||!Ph[I[_e]]?I[_e]:Ph[I[_e]]}return ne}(this.text,y)}trim(){let y=0;for(let Q=0;Q<this.text.length&&Pd[this.text.charCodeAt(Q)];Q++)y++;let I=this.text.length;for(let Q=this.text.length-1;Q>=0&&Q>=y&&Pd[this.text.charCodeAt(Q)];Q--)I--;this.text=this.text.substring(y,I),this.sectionIndex=this.sectionIndex.slice(y,I)}substring(y,I){const Q=new Uu;return Q.text=this.text.substring(y,I),Q.sectionIndex=this.sectionIndex.slice(y,I),Q.sections=this.sections,Q}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((y,I)=>Math.max(y,this.sections[I].scale),0)}addTextSection(y,I){this.text+=y.text,this.sections.push(Rh.forText(y.scale,y.fontStack||I));const Q=this.sections.length-1;for(let ne=0;ne<y.text.length;++ne)this.sectionIndex.push(Q)}addImageSection(y){const I=y.image?y.image.name:"";if(I.length===0)return void zt("Can't add FormattedSection with an empty image.");const Q=this.getNextImageSectionCharCode();Q?(this.text+=String.fromCharCode(Q),this.sections.push(Rh.forImage(I)),this.sectionIndex.push(this.sections.length-1)):zt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wp($,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t){const Et=Uu.fromFeature($,ne);let Bt;He===aa.vertical&&Et.verticalizePunctuation(We);const{processBidirectionalText:qt,processStyledBidirectionalText:Ft}=At;if(qt&&Et.sections.length===1){Bt=[];const Wt=qt(Et.toString(),Ep(Et,De,_e,y,Q,et,it));for(const Tn of Wt){const bn=new Uu;bn.text=Tn,bn.sections=Et.sections;for(let Pn=0;Pn<Tn.length;Pn++)bn.sectionIndex.push(0);Bt.push(bn)}}else if(Ft){Bt=[];const Wt=Ft(Et.text,Et.sectionIndex,Ep(Et,De,_e,y,Q,et,it));for(const Tn of Wt){const bn=new Uu;bn.text=Tn[0],bn.sectionIndex=Tn[1],bn.sections=Et.sections,Bt.push(bn)}}else Bt=function(Wt,Tn){const bn=[],Pn=Wt.text;let Yn=0;for(const kn of Tn)bn.push(Wt.substring(Yn,kn)),Yn=kn;return Yn<Pn.length&&bn.push(Wt.substring(Yn,Pn.length)),bn}(Et,Ep(Et,De,_e,y,Q,et,it));const Gt=[],Jt={positionedLines:Gt,text:Et.toString(),top:Ue[1],bottom:Ue[1],left:Ue[0],right:Ue[0],writingMode:He,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Wt,Tn,bn,Pn,Yn,kn,Ln,Un,Bn,Zn,Vn,or){let Or=0,$r=0,yr=0;const nr=Un==="right"?1:Un==="left"?0:.5;let Gr=!1;for(const Nr of Yn){const Yr=Nr.getSections();for(const gi of Yr){if(gi.imageName)continue;const di=Tn[gi.fontStack];if(di&&(Gr=di.ascender!==void 0&&di.descender!==void 0,!Gr))break}if(!Gr)break}let Mr=0;for(const Nr of Yn){Nr.trim();const Yr=Nr.getMaxScale(),gi=(Yr-1)*uo,di={positionedGlyphs:[],lineOffset:0};Wt.positionedLines[Mr]=di;const ui=di.positionedGlyphs;let Ei=0;if(!Nr.length()){$r+=kn,++Mr;continue}let Mi=0,no=0;for(let Zr=0;Zr<Nr.length();Zr++){const zi=Nr.getSection(Zr),go=Nr.getSectionIndex(Zr),ni=Nr.getCharCode(Zr);let Ii=zi.scale,Co=null,Si=null,Fi=null,ro=uo,Qi=0;const ho=!(Bn===aa.horizontal||!Vn&&!rl(ni)||Vn&&(Pd[ni]||(hr=ni,Au(hr)||ku(hr)||Su(hr)||zo(hr)||Bc(hr))));if(zi.imageName){const Mo=Pn[zi.imageName];if(!Mo)continue;Fi=zi.imageName,Wt.iconsInText=Wt.iconsInText||!0,Si=Mo.paddedRect;const io=Mo.displaySize;Ii=Ii*uo/or,Co={width:io[0],height:io[1],left:1,top:-3,advance:ho?io[1]:io[0],localGlyph:!1},Qi=Gr?-Co.height*Ii:Yr*uo-17-io[1]*Ii,ro=Co.advance;const ul=(ho?io[0]:io[1])*Ii-uo*Yr;ul>0&&ul>Ei&&(Ei=ul)}else{const Mo=bn[zi.fontStack];if(!Mo)continue;Mo[ni]&&(Si=Mo[ni]);const io=Tn[zi.fontStack];if(!io)continue;const ul=io.glyphs[ni];if(!ul)continue;if(Co=ul.metrics,ro=ni!==8203?uo:0,Gr){const Xu=io.ascender!==void 0?Math.abs(io.ascender):0,qh=io.descender!==void 0?Math.abs(io.descender):0,Hh=(Xu+qh)*Ii;Mi<Hh&&(Mi=Hh,no=(Xu-qh)/2*Ii),Qi=-Xu*Ii}else Qi=(Yr-Ii)*uo-17}ho?(Wt.verticalizable=!0,ui.push({glyph:ni,imageName:Fi,x:Or,y:$r+Qi,vertical:ho,scale:Ii,localGlyph:Co.localGlyph,fontStack:zi.fontStack,sectionIndex:go,metrics:Co,rect:Si}),Or+=ro*Ii+Zn):(ui.push({glyph:ni,imageName:Fi,x:Or,y:$r+Qi,vertical:ho,scale:Ii,localGlyph:Co.localGlyph,fontStack:zi.fontStack,sectionIndex:go,metrics:Co,rect:Si}),Or+=Co.advance*Ii+Zn)}ui.length!==0&&(yr=Math.max(Or-Zn,yr),Gr?Zf(ui,nr,Ei,no,kn*Yr/2):Zf(ui,nr,Ei,0,kn/2)),Or=0;const Bo=kn*Yr+Ei;di.lineOffset=Math.max(Ei,gi),$r+=Bo,++Mr}var hr;const mi=$r,{horizontalAlign:hi,verticalAlign:ki}=Tp(Ln);(function(Nr,Yr,gi,di,ui,Ei){const Mi=(Yr-gi)*ui,no=-Ei*di;for(const Bo of Nr)for(const Zr of Bo.positionedGlyphs)Zr.x+=Mi,Zr.y+=no})(Wt.positionedLines,nr,hi,ki,yr,mi),Wt.top+=-ki*mi,Wt.bottom=Wt.top+mi,Wt.left+=-hi*yr,Wt.right=Wt.left+yr,Wt.hasBaseline=Gr}(Jt,y,I,Q,Bt,Te,Ce,$e,He,De,We,_t),!function(Wt){for(const Tn of Wt)if(Tn.positionedGlyphs.length!==0)return!1;return!0}(Gt)&&Jt}const Pd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fg={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gf($,y,I,Q,ne,_e){if(y.imageName){const Te=Q[y.imageName];return Te?Te.displaySize[0]*y.scale*uo/_e+ne:0}{const Te=I[y.fontStack],Ce=Te&&Te.glyphs[$];return Ce?Ce.metrics.advance*y.scale+ne:0}}function qf($,y,I,Q){const ne=Math.pow($-y,2);return Q?$<y?ne/2:2*ne:ne+Math.abs(I)*I}function _g($,y,I){let Q=0;return $===10&&(Q-=1e4),I&&(Q+=150),$!==40&&$!==65288||(Q+=50),y!==41&&y!==65289||(Q+=50),Q}function Hf($,y,I,Q,ne,_e){let Te=null,Ce=qf(y,I,ne,_e);for(const $e of Q){const De=qf(y-$e.x,I,ne,_e)+$e.badness;De<=Ce&&(Te=$e,Ce=De)}return{index:$,x:y,priorBreak:Te,badness:Ce}}function Wf($){return $?Wf($.priorBreak).concat($.index):[]}function Ep($,y,I,Q,ne,_e,Te){if(_e!=="point")return[];if(!$)return[];const Ce=[],$e=function(We,et,it,_t,Et,Bt){let qt=0;for(let Ft=0;Ft<We.length();Ft++){const Gt=We.getSection(Ft);qt+=Gf(We.getCharCode(Ft),Gt,_t,Et,et,Bt)}return qt/Math.max(1,Math.ceil(qt/it))}($,y,I,Q,ne,Te),De=$.text.indexOf("\u200B")>=0;let Ue=0;for(let We=0;We<$.length();We++){const et=$.getSection(We),it=$.getCharCode(We);if(Pd[it]||(Ue+=Gf(it,et,Q,ne,y,Te)),We<$.length()-1){const _t=!((He=it)<11904||!(Rc(He)||Oc(He)||Ul(He)||jl(He)||zc(He)||Cu(He)||$c(He)||Fl(He)||ya(He)||tl(He)||ga(He)||Vl(He)||pi(He)||ai(He)||el(He)||_o(He)||qi(He)||Lc(He)||ra(He)||Nl(He)));(fg[it]||_t||et.imageName)&&Ce.push(Hf(We+1,Ue,$e,Ce,_g(it,$.getCharCode(We+1),_t&&De),!1))}}var He;return Wf(Hf($.length(),Ue,$e,Ce,0,!0))}function Tp($){let y=.5,I=.5;switch($){case"right":case"top-right":case"bottom-right":y=1;break;case"left":case"top-left":case"bottom-left":y=0}switch($){case"bottom":case"bottom-right":case"bottom-left":I=1;break;case"top":case"top-right":case"top-left":I=0}return{horizontalAlign:y,verticalAlign:I}}function Zf($,y,I,Q,ne){if(!(y||I||Q||ne))return;const _e=$.length-1,Te=$[_e],Ce=(Te.x+Te.metrics.advance*Te.scale)*y;for(let $e=0;$e<=_e;$e++)$[$e].x-=Ce,$[$e].y+=I+Q+ne}function mg($,y,I){const{horizontalAlign:Q,verticalAlign:ne}=Tp(I),_e=y[0]-$.displaySize[0]*Q,Te=y[1]-$.displaySize[1]*ne;return{image:$,top:Te,bottom:Te+$.displaySize[1],left:_e,right:_e+$.displaySize[0]}}function Xf($,y,I,Q,ne,_e){const Te=$.image;let Ce;if(Te.content){const Et=Te.content,Bt=Te.pixelRatio||1;Ce=[Et[0]/Bt,Et[1]/Bt,Te.displaySize[0]-Et[2]/Bt,Te.displaySize[1]-Et[3]/Bt]}const $e=y.left*_e,De=y.right*_e;let Ue,He,We,et;I==="width"||I==="both"?(et=ne[0]+$e-Q[3],He=ne[0]+De+Q[1]):(et=ne[0]+($e+De-Te.displaySize[0])/2,He=et+Te.displaySize[0]);const it=y.top*_e,_t=y.bottom*_e;return I==="height"||I==="both"?(Ue=ne[1]+it-Q[0],We=ne[1]+_t+Q[2]):(Ue=ne[1]+(it+_t-Te.displaySize[1])/2,We=Ue+Te.displaySize[1]),{image:Te,top:Ue,right:He,bottom:We,left:et,collisionPadding:Ce}}class ll extends ye{constructor(y,I,Q,ne,_e){super(y,I),this.angle=ne,this.z=Q,_e!==void 0&&(this.segment=_e)}clone(){return new ll(this.x,this.y,this.z,this.angle,this.segment)}}function Kf($,y,I,Q,ne){if(y.segment===void 0)return!0;let _e=y,Te=y.segment+1,Ce=0;for(;Ce>-I/2;){if(Te--,Te<0)return!1;Ce-=$[Te].dist(_e),_e=$[Te]}Ce+=$[Te].dist($[Te+1]),Te++;const $e=[];let De=0;for(;Ce<I/2;){const Ue=$[Te],He=$[Te+1];if(!He)return!1;let We=$[Te-1].angleTo(Ue)-Ue.angleTo(He);for(We=Math.abs((We+3*Math.PI)%(2*Math.PI)-Math.PI),$e.push({distance:Ce,angleDelta:We}),De+=We;Ce-$e[0].distance>Q;)De-=$e.shift().angleDelta;if(De>ne)return!1;Te++,Ce+=Ue.dist(He)}return!0}function Yf($){let y=0;for(let I=0;I<$.length-1;I++)y+=$[I].dist($[I+1]);return y}function Jf($,y,I){return $?.6*y*I:0}function Qf($,y){return Math.max($?$.right-$.left:0,y?y.right-y.left:0)}function gg($,y,I,Q,ne,_e){const Te=Jf(I,ne,_e),Ce=Qf(I,Q)*_e;let $e=0;const De=Yf($)/2;for(let Ue=0;Ue<$.length-1;Ue++){const He=$[Ue],We=$[Ue+1],et=He.dist(We);if($e+et>De){const it=(De-$e)/et,_t=Hr(He.x,We.x,it),Et=Hr(He.y,We.y,it),Bt=new ll(_t,Et,0,We.angleTo(He),Ue);return!Te||Kf($,Bt,Ce,Te,y)?Bt:void 0}$e+=et}}function yg($,y,I,Q,ne,_e,Te,Ce,$e){const De=Jf(Q,_e,Te),Ue=Qf(Q,ne),He=Ue*Te,We=$[0].x===0||$[0].x===$e||$[0].y===0||$[0].y===$e;return y-He<y/4&&(y=He+y/4),e_($,We?y/2*Ce%y:(Ue/2+2*_e)*Te*Ce%y,y,De,I,He,We,!1,$e)}function e_($,y,I,Q,ne,_e,Te,Ce,$e){const De=_e/2,Ue=Yf($);let He=0,We=y-I,et=[];for(let it=0;it<$.length-1;it++){const _t=$[it],Et=$[it+1],Bt=_t.dist(Et),qt=Et.angleTo(_t);for(;We+I<He+Bt;){We+=I;const Ft=(We-He)/Bt,Gt=Hr(_t.x,Et.x,Ft),Jt=Hr(_t.y,Et.y,Ft);if(Gt>=0&&Gt<$e&&Jt>=0&&Jt<$e&&We-De>=0&&We+De<=Ue){const Wt=new ll(Gt,Jt,0,qt,it);Wt._round(),Q&&!Kf($,Wt,_e,Q,ne)||et.push(Wt)}}He+=Bt}return Ce||et.length||Te||(et=e_($,He/2,I,Q,ne,_e,Te,!0,$e)),et}function t_($,y,I,Q,ne){const _e=[];for(let Te=0;Te<$.length;Te++){const Ce=$[Te];let $e;for(let De=0;De<Ce.length-1;De++){let Ue=Ce[De],He=Ce[De+1];Ue.x<y&&He.x<y||(Ue.x<y?Ue=new ye(y,Ue.y+(y-Ue.x)/(He.x-Ue.x)*(He.y-Ue.y))._round():He.x<y&&(He=new ye(y,Ue.y+(y-Ue.x)/(He.x-Ue.x)*(He.y-Ue.y))._round()),Ue.y<I&&He.y<I||(Ue.y<I?Ue=new ye(Ue.x+(I-Ue.y)/(He.y-Ue.y)*(He.x-Ue.x),I)._round():He.y<I&&(He=new ye(Ue.x+(I-Ue.y)/(He.y-Ue.y)*(He.x-Ue.x),I)._round()),Ue.x>=Q&&He.x>=Q||(Ue.x>=Q?Ue=new ye(Q,Ue.y+(Q-Ue.x)/(He.x-Ue.x)*(He.y-Ue.y))._round():He.x>=Q&&(He=new ye(Q,Ue.y+(Q-Ue.x)/(He.x-Ue.x)*(He.y-Ue.y))._round()),Ue.y>=ne&&He.y>=ne||(Ue.y>=ne?Ue=new ye(Ue.x+(ne-Ue.y)/(He.y-Ue.y)*(He.x-Ue.x),ne)._round():He.y>=ne&&(He=new ye(Ue.x+(ne-Ue.y)/(He.y-Ue.y)*(He.x-Ue.x),ne)._round()),$e&&Ue.equals($e[$e.length-1])||($e=[Ue],_e.push($e)),$e.push(He)))))}}return _e}cr(ll,"Anchor");const $h=1e20;function n_($,y,I,Q,ne,_e,Te,Ce,$e){for(let De=y;De<y+Q;De++)r_($,I*_e+De,_e,ne,Te,Ce,$e);for(let De=I;De<I+ne;De++)r_($,De*_e+y,1,Q,Te,Ce,$e)}function r_($,y,I,Q,ne,_e,Te){_e[0]=0,Te[0]=-$h,Te[1]=$h,ne[0]=$[y];for(let Ce=1,$e=0,De=0;Ce<Q;Ce++){ne[Ce]=$[y+Ce*I];const Ue=Ce*Ce;do{const He=_e[$e];De=(ne[Ce]-ne[He]+Ue-He*He)/(Ce-He)/2}while(De<=Te[$e]&&--$e>-1);$e++,_e[$e]=Ce,Te[$e]=De,Te[$e+1]=$h}for(let Ce=0,$e=0;Ce<Q;Ce++){for(;Te[$e+1]<Ce;)$e++;const De=_e[$e],Ue=Ce-De;$[y+Ce*I]=ne[De]+Ue*Ue}}const Ap={none:0,ideographs:1,all:2};class Vu{constructor(y,I,Q){this.requestManager=y,this.localGlyphMode=I,this.localFontFamily=Q,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(y){this.url=y}getGlyphs(y,I){const Q=[];for(const ne in y)for(const _e of y[ne])Q.push({stack:ne,id:_e});dt(Q,({stack:ne,id:_e},Te)=>{let Ce=this.entries[ne];Ce||(Ce=this.entries[ne]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let $e=Ce.glyphs[_e];if($e!==void 0)return void Te(null,{stack:ne,id:_e,glyph:$e});if($e=this._tinySDF(Ce,ne,_e),$e)return Ce.glyphs[_e]=$e,void Te(null,{stack:ne,id:_e,glyph:$e});const De=Math.floor(_e/256);if(256*De>65535)return void Te(new Error("glyphs > 65535 not supported"));if(Ce.ranges[De])return void Te(null,{stack:ne,id:_e,glyph:$e});let Ue=Ce.requests[De];Ue||(Ue=Ce.requests[De]=[],Vu.loadGlyphRange(ne,De,this.url,this.requestManager,(He,We)=>{if(We){Ce.ascender=We.ascender,Ce.descender=We.descender;for(const et in We.glyphs)this._doesCharSupportLocalGlyph(+et)||(Ce.glyphs[+et]=We.glyphs[+et]);Ce.ranges[De]=!0}for(const et of Ue)et(He,We);delete Ce.requests[De]})),Ue.push((He,We)=>{He?Te(He):We&&Te(null,{stack:ne,id:_e,glyph:We.glyphs[_e]||null})})},(ne,_e)=>{if(ne)I(ne);else if(_e){const Te={};for(const{stack:Ce,id:$e,glyph:De}of _e)Te[Ce]===void 0&&(Te[Ce]={}),Te[Ce].glyphs===void 0&&(Te[Ce].glyphs={}),Te[Ce].glyphs[$e]=De&&{id:De.id,bitmap:De.bitmap.clone(),metrics:De.metrics},Te[Ce].ascender=this.entries[Ce].ascender,Te[Ce].descender=this.entries[Ce].descender;I(null,Te)}})}_doesCharSupportLocalGlyph(y){return this.localGlyphMode!==Ap.none&&(this.localGlyphMode===Ap.all?!!this.localFontFamily:!!this.localFontFamily&&(tl(y)||Dc(y)||pi(y)||qi(y)||Fl(y)))}_tinySDF(y,I,Q){const ne=this.localFontFamily;if(!ne||!this._doesCharSupportLocalGlyph(Q))return;let _e=y.tinySDF;if(!_e){let _t="400";/bold/i.test(I)?_t="900":/medium/i.test(I)?_t="500":/light/i.test(I)&&(_t="200"),_e=y.tinySDF=new Vu.TinySDF({fontFamily:ne,fontWeight:_t,fontSize:48,buffer:6,radius:16}),_e.fontWeight=_t}if(this.localGlyphs[_e.fontWeight][Q])return this.localGlyphs[_e.fontWeight][Q];const Te=String.fromCharCode(Q),{data:Ce,width:$e,height:De,glyphWidth:Ue,glyphHeight:He,glyphLeft:We,glyphTop:et,glyphAdvance:it}=_e.draw(Te);return this.localGlyphs[_e.fontWeight][Q]={id:Q,bitmap:new al({width:$e,height:De},Ce),metrics:{width:Ue/2,height:He/2,left:We/2,top:et/2-27,advance:it/2,localGlyph:!0}}}}function i_($,y,I,Q){const ne=[],_e=$.image,Te=_e.pixelRatio,Ce=_e.paddedRect.w-2,$e=_e.paddedRect.h-2,De=$.right-$.left,Ue=$.bottom-$.top,He=_e.stretchX||[[0,Ce]],We=_e.stretchY||[[0,$e]],et=(kn,Ln)=>kn+Ln[1]-Ln[0],it=He.reduce(et,0),_t=We.reduce(et,0),Et=Ce-it,Bt=$e-_t;let qt=0,Ft=it,Gt=0,Jt=_t,Wt=0,Tn=Et,bn=0,Pn=Bt;if(_e.content&&Q){const kn=_e.content;qt=Od(He,0,kn[0]),Gt=Od(We,0,kn[1]),Ft=Od(He,kn[0],kn[2]),Jt=Od(We,kn[1],kn[3]),Wt=kn[0]-qt,bn=kn[1]-Gt,Tn=kn[2]-kn[0]-Ft,Pn=kn[3]-kn[1]-Jt}const Yn=(kn,Ln,Un,Bn)=>{const Zn=Rd(kn.stretch-qt,Ft,De,$.left),Vn=$d(kn.fixed-Wt,Tn,kn.stretch,it),or=Rd(Ln.stretch-Gt,Jt,Ue,$.top),Or=$d(Ln.fixed-bn,Pn,Ln.stretch,_t),$r=Rd(Un.stretch-qt,Ft,De,$.left),yr=$d(Un.fixed-Wt,Tn,Un.stretch,it),nr=Rd(Bn.stretch-Gt,Jt,Ue,$.top),Gr=$d(Bn.fixed-bn,Pn,Bn.stretch,_t),Mr=new ye(Zn,or),hr=new ye($r,or),mi=new ye($r,nr),hi=new ye(Zn,nr),ki=new ye(Vn/Te,Or/Te),Nr=new ye(yr/Te,Gr/Te),Yr=y*Math.PI/180;if(Yr){const ui=Math.sin(Yr),Ei=Math.cos(Yr),Mi=[Ei,-ui,ui,Ei];Mr._matMult(Mi),hr._matMult(Mi),hi._matMult(Mi),mi._matMult(Mi)}const gi=kn.stretch+kn.fixed,di=Ln.stretch+Ln.fixed;return{tl:Mr,tr:hr,bl:hi,br:mi,tex:{x:_e.paddedRect.x+1+gi,y:_e.paddedRect.y+1+di,w:Un.stretch+Un.fixed-gi,h:Bn.stretch+Bn.fixed-di},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ki,pixelOffsetBR:Nr,minFontScaleX:Tn/Te/De,minFontScaleY:Pn/Te/Ue,isSDF:I}};if(Q&&(_e.stretchX||_e.stretchY)){const kn=o_(He,Et,it),Ln=o_(We,Bt,_t);for(let Un=0;Un<kn.length-1;Un++){const Bn=kn[Un],Zn=kn[Un+1];for(let Vn=0;Vn<Ln.length-1;Vn++)ne.push(Yn(Bn,Ln[Vn],Zn,Ln[Vn+1]))}}else ne.push(Yn({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ce+1},{fixed:0,stretch:$e+1}));return ne}function Od($,y,I){let Q=0;for(const ne of $)Q+=Math.max(y,Math.min(I,ne[1]))-Math.max(y,Math.min(I,ne[0]));return Q}function o_($,y,I){const Q=[{fixed:-1,stretch:0}];for(const[ne,_e]of $){const Te=Q[Q.length-1];Q.push({fixed:ne-Te.stretch,stretch:Te.stretch}),Q.push({fixed:ne-Te.stretch,stretch:Te.stretch+(_e-ne)})}return Q.push({fixed:y+1,stretch:I}),Q}function Rd($,y,I,Q){return $/y*I+Q}function $d($,y,I,Q){return $-y*I/Q}function vg($,y,I,Q){const ne=y+$.positionedLines[Q].lineOffset;return Q===0?I+ne/2:I+(ne+(y+$.positionedLines[Q-1].lineOffset))/2}Vu.loadGlyphRange=function($,y,I,Q,ne){const _e=256*y,Te=_e+255,Ce=Q.transformRequest(Q.normalizeGlyphsURL(I).replace("{fontstack}",$).replace("{range}",`${_e}-${Te}`),en.Glyphs);fn(Ce,($e,De)=>{if($e)ne($e);else if(De){const Ue={},He=function(We){return new Oh(We).readFields(hg,{})}(De);for(const We of He.glyphs)Ue[We.id]=We;ne(null,{glyphs:Ue,ascender:He.ascender,descender:He.descender})}})},Vu.TinySDF=class{constructor({fontSize:$=24,buffer:y=3,radius:I=8,cutoff:Q=.25,fontFamily:ne="sans-serif",fontWeight:_e="normal",fontStyle:Te="normal"}={}){this.buffer=y,this.cutoff=Q,this.radius=I;const Ce=this.size=$+4*y,$e=this._createCanvas(Ce),De=this.ctx=$e.getContext("2d",{willReadFrequently:!0});De.font=`${Te} ${_e} ${$}px ${ne}`,De.textBaseline="alphabetic",De.textAlign="left",De.fillStyle="black",this.gridOuter=new Float64Array(Ce*Ce),this.gridInner=new Float64Array(Ce*Ce),this.f=new Float64Array(Ce),this.z=new Float64Array(Ce+1),this.v=new Uint16Array(Ce)}_createCanvas($){const y=document.createElement("canvas");return y.width=y.height=$,y}draw($){const{width:y,actualBoundingBoxAscent:I,actualBoundingBoxDescent:Q,actualBoundingBoxLeft:ne,actualBoundingBoxRight:_e}=this.ctx.measureText($),Te=Math.ceil(I),Ce=Math.min(this.size-this.buffer,Math.ceil(_e-ne)),$e=Math.min(this.size-this.buffer,Te+Math.ceil(Q)),De=Ce+2*this.buffer,Ue=$e+2*this.buffer,He=Math.max(De*Ue,0),We=new Uint8ClampedArray(He),et={data:We,width:De,height:Ue,glyphWidth:Ce,glyphHeight:$e,glyphTop:Te,glyphLeft:0,glyphAdvance:y};if(Ce===0||$e===0)return et;const{ctx:it,buffer:_t,gridInner:Et,gridOuter:Bt}=this;it.clearRect(_t,_t,Ce,$e),it.fillText($,_t,_t+Te);const qt=it.getImageData(_t,_t,Ce,$e);Bt.fill($h,0,He),Et.fill(0,0,He);for(let Ft=0;Ft<$e;Ft++)for(let Gt=0;Gt<Ce;Gt++){const Jt=qt.data[4*(Ft*Ce+Gt)+3]/255;if(Jt===0)continue;const Wt=(Ft+_t)*De+Gt+_t;if(Jt===1)Bt[Wt]=0,Et[Wt]=$h;else{const Tn=.5-Jt;Bt[Wt]=Tn>0?Tn*Tn:0,Et[Wt]=Tn<0?Tn*Tn:0}}n_(Bt,0,0,De,Ue,De,this.f,this.v,this.z),n_(Et,_t,_t,Ce,$e,De,this.f,this.v,this.z);for(let Ft=0;Ft<He;Ft++){const Gt=Math.sqrt(Bt[Ft])-Math.sqrt(Et[Ft]);We[Ft]=Math.round(255-255*(Gt/this.radius+this.cutoff))}return et}};class xg{constructor(y=[],I=bg){if(this.data=y,this.length=this.data.length,this.compare=I,this.length>0)for(let Q=(this.length>>1)-1;Q>=0;Q--)this._down(Q)}push(y){this.data.push(y),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const y=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),y}peek(){return this.data[0]}_up(y){const{data:I,compare:Q}=this,ne=I[y];for(;y>0;){const _e=y-1>>1,Te=I[_e];if(Q(ne,Te)>=0)break;I[y]=Te,y=_e}I[y]=ne}_down(y){const{data:I,compare:Q}=this,ne=this.length>>1,_e=I[y];for(;y<ne;){let Te=1+(y<<1),Ce=I[Te];const $e=Te+1;if($e<this.length&&Q(I[$e],Ce)<0&&(Te=$e,Ce=I[$e]),Q(Ce,_e)>=0)break;I[y]=Ce,y=Te}I[y]=_e}}function bg($,y){return $<y?-1:$>y?1:0}function wg($,y=1,I=!1){let Q=1/0,ne=1/0,_e=-1/0,Te=-1/0;const Ce=$[0];for(let et=0;et<Ce.length;et++){const it=Ce[et];(!et||it.x<Q)&&(Q=it.x),(!et||it.y<ne)&&(ne=it.y),(!et||it.x>_e)&&(_e=it.x),(!et||it.y>Te)&&(Te=it.y)}const $e=Math.min(_e-Q,Te-ne);let De=$e/2;const Ue=new xg([],Eg);if($e===0)return new ye(Q,ne);for(let et=Q;et<_e;et+=$e)for(let it=ne;it<Te;it+=$e)Ue.push(new Gu(et+De,it+De,De,$));let He=function(et){let it=0,_t=0,Et=0;const Bt=et[0];for(let qt=0,Ft=Bt.length,Gt=Ft-1;qt<Ft;Gt=qt++){const Jt=Bt[qt],Wt=Bt[Gt],Tn=Jt.x*Wt.y-Wt.x*Jt.y;_t+=(Jt.x+Wt.x)*Tn,Et+=(Jt.y+Wt.y)*Tn,it+=3*Tn}return new Gu(_t/it,Et/it,0,et)}($),We=Ue.length;for(;Ue.length;){const et=Ue.pop();(et.d>He.d||!He.d)&&(He=et,I&&console.log("found best %d after %d probes",Math.round(1e4*et.d)/1e4,We)),et.max-He.d<=y||(De=et.h/2,Ue.push(new Gu(et.p.x-De,et.p.y-De,De,$)),Ue.push(new Gu(et.p.x+De,et.p.y-De,De,$)),Ue.push(new Gu(et.p.x-De,et.p.y+De,De,$)),Ue.push(new Gu(et.p.x+De,et.p.y+De,De,$)),We+=4)}return I&&(console.log(`num probes: ${We}`),console.log(`best distance: ${He.d}`)),He.p}function Eg($,y){return y.max-$.max}function Gu($,y,I,Q){this.p=new ye($,y),this.h=I,this.d=function(ne,_e){let Te=!1,Ce=1/0;for(let $e=0;$e<_e.length;$e++){const De=_e[$e];for(let Ue=0,He=De.length,We=He-1;Ue<He;We=Ue++){const et=De[Ue],it=De[We];et.y>ne.y!=it.y>ne.y&&ne.x<(it.x-et.x)*(ne.y-et.y)/(it.y-et.y)+et.x&&(Te=!Te),Ce=Math.min(Ce,Ao(ne,et,it))}}return(Te?1:-1)*Math.sqrt(Ce)}(this.p,Q),this.max=this.d+this.h*Math.SQRT2}const kp=Number.POSITIVE_INFINITY,Tg=Math.sqrt(2);function a_($,y){return y[1]!==kp?function(I,Q,ne){let _e=0,Te=0;switch(Q=Math.abs(Q),ne=Math.abs(ne),I){case"top-right":case"top-left":case"top":Te=ne-7;break;case"bottom-right":case"bottom-left":case"bottom":Te=7-ne}switch(I){case"top-right":case"bottom-right":case"right":_e=-Q;break;case"top-left":case"bottom-left":case"left":_e=Q}return[_e,Te]}($,y[0],y[1]):function(I,Q){let ne=0,_e=0;Q<0&&(Q=0);const Te=Q/Tg;switch(I){case"top-right":case"top-left":_e=Te-7;break;case"bottom-right":case"bottom-left":_e=7-Te;break;case"bottom":_e=7-Q;break;case"top":_e=Q-7}switch(I){case"top-right":case"bottom-right":ne=-Te;break;case"top-left":case"bottom-left":ne=Te;break;case"left":ne=Q;break;case"right":ne=-Q}return[ne,_e]}($,y[0])}function Ag($,y,I,Q,ne,_e,Te,Ce,$e,De){$.createArrays(),$.tilePixelRatio=Ar/(512*$.overscaling),$.compareText={},$.iconsNeedLinear=!1;const Ue=$.layers[0].layout,He=$.layers[0]._unevaluatedLayout._values,We={};if($.textSizeData.kind==="composite"){const{minZoom:_t,maxZoom:Et}=$.textSizeData;We.compositeTextSizes=[He["text-size"].possiblyEvaluate(new Tt(_t),Ce),He["text-size"].possiblyEvaluate(new Tt(Et),Ce)]}if($.iconSizeData.kind==="composite"){const{minZoom:_t,maxZoom:Et}=$.iconSizeData;We.compositeIconSizes=[He["icon-size"].possiblyEvaluate(new Tt(_t),Ce),He["icon-size"].possiblyEvaluate(new Tt(Et),Ce)]}We.layoutTextSize=He["text-size"].possiblyEvaluate(new Tt($e+1),Ce),We.layoutIconSize=He["icon-size"].possiblyEvaluate(new Tt($e+1),Ce),We.textMaxSize=He["text-size"].possiblyEvaluate(new Tt(18),Ce);const et=Ue.get("text-rotation-alignment")==="map"&&Ue.get("symbol-placement")!=="point",it=Ue.get("text-size");for(const _t of $.features){const Et=Ue.get("text-font").evaluate(_t,{},Ce).join(","),Bt=it.evaluate(_t,{},Ce),qt=We.layoutTextSize.evaluate(_t,{},Ce),Ft=(We.layoutIconSize.evaluate(_t,{},Ce),{horizontal:{},vertical:void 0}),Gt=_t.text;let Jt,Wt=[0,0];if(Gt){const Pn=Gt.toString(),Yn=Ue.get("text-letter-spacing").evaluate(_t,{},Ce)*uo,kn=Ue.get("text-line-height").evaluate(_t,{},Ce)*uo,Ln=Fc(Pn)?Yn:0,Un=Ue.get("text-anchor").evaluate(_t,{},Ce),Bn=Ue.get("text-variable-anchor");if(!Bn){const yr=Ue.get("text-radial-offset").evaluate(_t,{},Ce);Wt=yr?a_(Un,[yr*uo,kp]):Ue.get("text-offset").evaluate(_t,{},Ce).map(nr=>nr*uo)}let Zn=et?"center":Ue.get("text-justify").evaluate(_t,{},Ce);const Vn=Ue.get("symbol-placement"),or=Vn==="point",Or=Vn==="point"?Ue.get("text-max-width").evaluate(_t,{},Ce)*uo:0,$r=yr=>{$.allowVerticalPlacement&&nl(Pn)&&(Ft.vertical=wp(Gt,y,I,ne,Et,Or,kn,Un,yr,Ln,Wt,aa.vertical,!0,Vn,qt,Bt))};if(!et&&Bn){const yr=Zn==="auto"?Bn.map(Gr=>Sp(Gr)):[Zn];let nr=!1;for(let Gr=0;Gr<yr.length;Gr++){const Mr=yr[Gr];if(!Ft.horizontal[Mr])if(nr)Ft.horizontal[Mr]=Ft.horizontal[0];else{const hr=wp(Gt,y,I,ne,Et,Or,kn,"center",Mr,Ln,Wt,aa.horizontal,!1,Vn,qt,Bt);hr&&(Ft.horizontal[Mr]=hr,nr=hr.positionedLines.length===1)}}$r("left")}else{if(Zn==="auto"&&(Zn=Sp(Un)),or||Ue.get("text-writing-mode").indexOf("horizontal")>=0||!nl(Pn)){const yr=wp(Gt,y,I,ne,Et,Or,kn,Un,Zn,Ln,Wt,aa.horizontal,!1,Vn,qt,Bt);yr&&(Ft.horizontal[Zn]=yr)}$r(Vn==="point"?"left":Zn)}}let Tn=!1;if(_t.icon&&_t.icon.name){const Pn=Q[_t.icon.name];Pn&&(Jt=mg(ne[_t.icon.name],Ue.get("icon-offset").evaluate(_t,{},Ce),Ue.get("icon-anchor").evaluate(_t,{},Ce)),Tn=Pn.sdf,$.sdfIcons===void 0?$.sdfIcons=Pn.sdf:$.sdfIcons!==Pn.sdf&&zt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pn.pixelRatio!==$.pixelRatio||Ue.get("icon-rotate").constantOr(1)!==0)&&($.iconsNeedLinear=!0))}const bn=l_(Ft.horizontal)||Ft.vertical;$.iconsInText||($.iconsInText=!!bn&&bn.iconsInText),(bn||Jt)&&kg($,_t,Ft,Jt,Q,We,qt,0,Wt,Tn,Te,Ce,De)}_e&&$.generateCollisionDebugBuffers($e,$.collisionBoxArray)}function Sp($){switch($){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kg($,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We){let et=_e.textMaxSize.evaluate(y,{},He);et===void 0&&(et=Te);const it=$.layers[0].layout,_t=it.get("icon-offset").evaluate(y,{},He),Et=l_(I.horizontal)||I.vertical,Bt=We.name==="globe",qt=Te/24,Ft=$.tilePixelRatio*et/24,Gt=(Ln=$.overscaling,$.zoom>18&&Ln>2&&(Ln>>=1),Math.max(Ar/(512*Ln),1)*it.get("symbol-spacing")),Jt=it.get("text-padding")*$.tilePixelRatio,Wt=it.get("icon-padding")*$.tilePixelRatio,Tn=Pe(it.get("text-max-angle")),bn=it.get("text-rotation-alignment")==="map"&&it.get("symbol-placement")!=="point",Pn=it.get("icon-rotation-alignment")==="map"&&it.get("symbol-placement")!=="point",Yn=it.get("symbol-placement"),kn=Gt/2;var Ln;const Un=it.get("icon-text-fit");let Bn;Q&&Un!=="none"&&($.allowVerticalPlacement&&I.vertical&&(Bn=Xf(Q,I.vertical,Un,it.get("icon-text-fit-padding"),_t,qt)),Et&&(Q=Xf(Q,Et,Un,it.get("icon-text-fit-padding"),_t,qt)));const Zn=(Vn,or,Or)=>{if(or.x<0||or.x>=Ar||or.y<0||or.y>=Ar)return;let $r=null;if(Bt){const{x:yr,y:nr,z:Gr}=We.projectTilePoint(or.x,or.y,Or);$r={anchor:new ll(yr,nr,Gr,0,void 0),up:We.upVector(Or,or.x,or.y)}}(function(yr,nr,Gr,Mr,hr,mi,hi,ki,Nr,Yr,gi,di,ui,Ei,Mi,no,Bo,Zr,zi,go,ni,Ii,Co,Si,Fi){const ro=yr.addToLineVertexArray(nr,Mr);let Qi,ho,Mo,io,ul,Xu,qh,Hh=0,q_=0,H_=0,W_=0,Gp=-1,qp=-1;const ws={};let Z_=jc("");const Xc=Gr?Gr.anchor:nr;let Hp=0,Wp=0;if(Nr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Hp,Wp]=Nr.layout.get("text-offset").evaluate(ni,{},Fi).map(Xo=>Xo*uo):(Hp=Nr.layout.get("text-radial-offset").evaluate(ni,{},Fi)*uo,Wp=kp),yr.allowVerticalPlacement&&hr.vertical){const Xo=hr.vertical;if(Mi)Xu=Cp(Xo),ki&&(qh=Cp(ki));else{const Ko=Nr.layout.get("text-rotate").evaluate(ni,{},Fi)+90;Mo=zd(Yr,Xc,nr,gi,di,ui,Xo,Ei,Ko,no),ki&&(io=zd(Yr,Xc,nr,gi,di,ui,ki,Zr,Ko))}}if(mi){const Xo=Nr.layout.get("icon-rotate").evaluate(ni,{},Fi),Ko=Nr.layout.get("icon-text-fit")!=="none",Wh=i_(mi,Xo,Co,Ko),Xp=ki?i_(ki,Xo,Co,Ko):void 0;ho=zd(Yr,Xc,nr,gi,di,ui,mi,Zr,Xo),Hh=4*Wh.length;const X_=yr.iconSizeData;let Kc=null;X_.kind==="source"?(Kc=[gs*Nr.layout.get("icon-size").evaluate(ni,{},Fi)],Kc[0]>Kl&&zt(`${yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):X_.kind==="composite"&&(Kc=[gs*Ii.compositeIconSizes[0].evaluate(ni,{},Fi),gs*Ii.compositeIconSizes[1].evaluate(ni,{},Fi)],(Kc[0]>Kl||Kc[1]>Kl)&&zt(`${yr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),yr.addSymbols(yr.icon,Wh,Kc,go,zi,ni,!1,Gr,nr,ro.lineStartIndex,ro.lineLength,-1,Si,Fi),Gp=yr.icon.placedSymbolArray.length-1,Xp&&(q_=4*Xp.length,yr.addSymbols(yr.icon,Xp,Kc,go,zi,ni,aa.vertical,Gr,nr,ro.lineStartIndex,ro.lineLength,-1,Si,Fi),qp=yr.icon.placedSymbolArray.length-1)}for(const Xo in hr.horizontal){const Ko=hr.horizontal[Xo];Qi||(Z_=jc(Ko.text),Mi?ul=Cp(Ko):Qi=zd(Yr,Xc,nr,gi,di,ui,Ko,Ei,Nr.layout.get("text-rotate").evaluate(ni,{},Fi),no));const Wh=Ko.positionedLines.length===1;if(H_+=s_(yr,Gr,nr,Ko,hi,Nr,Mi,ni,no,ro,hr.vertical?aa.horizontal:aa.horizontalOnly,Wh?Object.keys(hr.horizontal):[Xo],ws,Gp,Ii,Si,Fi),Wh)break}hr.vertical&&(W_+=s_(yr,Gr,nr,hr.vertical,hi,Nr,Mi,ni,no,ro,aa.vertical,["vertical"],ws,qp,Ii,Si,Fi));let nc=-1;const Zp=(Xo,Ko)=>Xo?Math.max(Xo,Ko):Ko;nc=Zp(ul,nc),nc=Zp(Xu,nc),nc=Zp(qh,nc);const iy=nc>-1?1:0;yr.glyphOffsetArray.length>=Jl.MAX_GLYPHS&&zt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ni.sortKey!==void 0&&yr.addToSortKeyRanges(yr.symbolInstances.length,ni.sortKey),yr.symbolInstances.emplaceBack(Xc.x,Xc.y,Xc.z,nr.x,nr.y,ws.right>=0?ws.right:-1,ws.center>=0?ws.center:-1,ws.left>=0?ws.left:-1,ws.vertical>=0?ws.vertical:-1,Gp,qp,Z_,Qi!==void 0?Qi:yr.collisionBoxArray.length,Qi!==void 0?Qi+1:yr.collisionBoxArray.length,Mo!==void 0?Mo:yr.collisionBoxArray.length,Mo!==void 0?Mo+1:yr.collisionBoxArray.length,ho!==void 0?ho:yr.collisionBoxArray.length,ho!==void 0?ho+1:yr.collisionBoxArray.length,io||yr.collisionBoxArray.length,io?io+1:yr.collisionBoxArray.length,gi,H_,W_,Hh,q_,iy,0,Hp,Wp,nc)})($,or,$r,Vn,I,Q,ne,Bn,$.layers[0],$.collisionBoxArray,y.index,y.sourceLayerIndex,$.index,Jt,bn,$e,0,Wt,Pn,_t,y,_e,De,Ue,He)};if(Yn==="line")for(const Vn of t_(y.geometry,0,0,Ar,Ar)){const or=yg(Vn,Gt,Tn,I.vertical||Et,Q,24,Ft,$.overscaling,Ar);for(const Or of or){const $r=Et;$r&&Sg($,$r.text,kn,Or)||Zn(Vn,Or,He)}}else if(Yn==="line-center"){for(const Vn of y.geometry)if(Vn.length>1){const or=gg(Vn,Tn,I.vertical||Et,Q,24,Ft);or&&Zn(Vn,or,He)}}else if(y.type==="Polygon")for(const Vn of _p(y.geometry,0)){const or=wg(Vn,16);Zn(Vn[0],new ll(or.x,or.y,0,0,void 0),He)}else if(y.type==="LineString")for(const Vn of y.geometry)Zn(Vn,new ll(Vn[0].x,Vn[0].y,0,0,void 0),He);else if(y.type==="Point")for(const Vn of y.geometry)for(const or of Vn)Zn([or],new ll(or.x,or.y,0,0,void 0),He)}const Kl=32640;function s_($,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it,_t,Et){const Bt=function(Gt,Jt,Wt,Tn,bn,Pn,Yn,kn){const Ln=[];if(Jt.positionedLines.length===0)return Ln;const Un=Tn.layout.get("text-rotate").evaluate(Pn,{})*Math.PI/180,Bn=function($r){const yr=$r[0],nr=$r[1],Gr=yr*nr;return Gr>0?[yr,-nr]:Gr<0?[-yr,nr]:yr===0?[nr,yr]:[nr,-yr]}(Wt);let Zn=Math.abs(Jt.top-Jt.bottom);for(const $r of Jt.positionedLines)Zn-=$r.lineOffset;const Vn=Jt.positionedLines.length,or=Zn/Vn;let Or=Jt.top-Wt[1];for(let $r=0;$r<Vn;++$r){const yr=Jt.positionedLines[$r];Or=vg(Jt,or,Or,$r);for(const nr of yr.positionedGlyphs){if(!nr.rect)continue;const Gr=nr.rect||{};let Mr=4,hr=!0,mi=1,hi=0;if(nr.imageName){const Si=Yn[nr.imageName];if(!Si)continue;if(Si.sdf){zt("SDF images are not supported in formatted text and will be ignored.");continue}hr=!1,mi=Si.pixelRatio,Mr=1/mi}const ki=(bn||kn)&&nr.vertical,Nr=nr.metrics.advance*nr.scale/2,Yr=nr.metrics,gi=nr.rect;if(gi===null)continue;kn&&Jt.verticalizable&&(hi=nr.imageName?Nr-nr.metrics.width*nr.scale/2:0);const di=bn?[nr.x+Nr,nr.y]:[0,0];let ui=[0,0],Ei=[0,0],Mi=!1;bn||(ki?(Ei=[nr.x+Nr+Bn[0],nr.y+Bn[1]-hi],Mi=!0):ui=[nr.x+Nr+Wt[0],nr.y+Wt[1]-hi]);const no=gi.w*nr.scale/(mi*(nr.localGlyph?2:1)),Bo=gi.h*nr.scale/(mi*(nr.localGlyph?2:1));let Zr,zi,go,ni;if(ki){const Si=nr.y-Or,Fi=new ye(-Nr,Nr-Si),ro=-Math.PI/2,Qi=new ye(...Ei);Zr=new ye(-Nr+ui[0],ui[1]),Zr._rotateAround(ro,Fi)._add(Qi),Zr.x+=-Si+Nr,Zr.y-=(Yr.left-Mr)*nr.scale;const ho=nr.imageName?Yr.advance*nr.scale:uo*nr.scale,Mo=String.fromCharCode(nr.glyph);eg(Mo)?Zr.x+=(1-Mr)*nr.scale:tg(Mo)?Zr.x+=ho-Yr.height*nr.scale+(-Mr-1)*nr.scale:Zr.x+=nr.imageName||Yr.width+2*Mr===gi.w&&Yr.height+2*Mr===gi.h?(ho-Bo)/2:(ho-(Yr.height+2*Mr)*nr.scale)/2,zi=new ye(Zr.x,Zr.y-no),go=new ye(Zr.x+Bo,Zr.y),ni=new ye(Zr.x+Bo,Zr.y-no)}else{const Si=(Yr.left-Mr)*nr.scale-Nr+ui[0],Fi=(-Yr.top-Mr)*nr.scale+ui[1],ro=Si+no,Qi=Fi+Bo;Zr=new ye(Si,Fi),zi=new ye(ro,Fi),go=new ye(Si,Qi),ni=new ye(ro,Qi)}if(Un){let Si;Si=bn?new ye(0,0):Mi?new ye(Bn[0],Bn[1]):new ye(Wt[0],Wt[1]),Zr._rotateAround(Un,Si),zi._rotateAround(Un,Si),go._rotateAround(Un,Si),ni._rotateAround(Un,Si)}const Ii=new ye(0,0),Co=new ye(0,0);Ln.push({tl:Zr,tr:zi,bl:go,br:ni,tex:Gr,writingMode:Jt.writingMode,glyphOffset:di,sectionIndex:nr.sectionIndex,isSDF:hr,pixelOffsetTL:Ii,pixelOffsetBR:Co,minFontScaleX:0,minFontScaleY:0})}}return Ln}(0,Q,$e,_e,Te,Ce,ne,$.allowVerticalPlacement),qt=$.textSizeData;let Ft=null;qt.kind==="source"?(Ft=[gs*_e.layout.get("text-size").evaluate(Ce,{},Et)],Ft[0]>Kl&&zt(`${$.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):qt.kind==="composite"&&(Ft=[gs*it.compositeTextSizes[0].evaluate(Ce,{},Et),gs*it.compositeTextSizes[1].evaluate(Ce,{},Et)],(Ft[0]>Kl||Ft[1]>Kl)&&zt(`${$.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),$.addSymbols($.text,Bt,Ft,$e,Te,Ce,Ue,y,I,De.lineStartIndex,De.lineLength,et,_t,Et);for(const Gt of He)We[Gt]=$.text.placedSymbolArray.length-1;return 4*Bt.length}function l_($){for(const y in $)return $[y];return null}function zd($,y,I,Q,ne,_e,Te,Ce,$e,De){let Ue=Te.top,He=Te.bottom,We=Te.left,et=Te.right;const it=Te.collisionPadding;if(it&&(We-=it[0],Ue-=it[1],et+=it[2],He+=it[3]),$e){const _t=new ye(We,Ue),Et=new ye(et,Ue),Bt=new ye(We,He),qt=new ye(et,He),Ft=Pe($e);let Gt=new ye(0,0);De&&(Gt=new ye(De[0],De[1])),_t._rotateAround(Ft,Gt),Et._rotateAround(Ft,Gt),Bt._rotateAround(Ft,Gt),qt._rotateAround(Ft,Gt),We=Math.min(_t.x,Et.x,Bt.x,qt.x),et=Math.max(_t.x,Et.x,Bt.x,qt.x),Ue=Math.min(_t.y,Et.y,Bt.y,qt.y),He=Math.max(_t.y,Et.y,Bt.y,qt.y)}return $.emplaceBack(y.x,y.y,y.z,I.x,I.y,We,Ue,et,He,Ce,Q,ne,_e),$.length-1}function Cp($){$.collisionPadding&&($.top-=$.collisionPadding[1],$.bottom+=$.collisionPadding[3]);const y=$.bottom-$.top;return y>0?Math.max(10,y):null}function Sg($,y,I,Q){const ne=$.compareText;if(y in ne){const _e=ne[y];for(let Te=_e.length-1;Te>=0;Te--)if(Q.dist(_e[Te])<I)return!0}else ne[y]=[];return ne[y].push(Q),!1}const Cg=Dn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:c_}=Cg,u_=Dn([{name:"a_pos_3",components:3,type:"Int16"}]);var zh=Dn([{name:"a_pos",type:"Int16",components:2}]);const cl=Ar/Math.PI/2,Mp=2*Do(1,0)*cl*Math.PI,qu=[64,32,16],qa=-cl,Ha=cl,Mg=[new Lo([qa,qa,qa],[Ha,Ha,Ha]),new Lo([qa,qa,qa],[0,0,Ha]),new Lo([0,qa,qa],[Ha,0,Ha]),new Lo([qa,0,qa],[0,Ha,Ha]),new Lo([0,0,qa],[Ha,Ha,Ha])];function h_($,y,I,Q=!0){const ne=Va([],$._camera.position,$.worldSize),_e=[y,I,1,1];Gc(_e,_e,$.pixelMatrixInverse),nf(_e,_e,1/_e[3]);const Te=ko([],Ga([],_e,ne)),Ce=$.globeMatrix,$e=[Ce[12],Ce[13],Ce[14]],De=Ga([],$e,ne),Ue=xh(De),He=ko([],De),We=$.worldSize/(2*Math.PI),et=ba(He,Te),it=Math.asin(We/Ue);if(it<Math.acos(et)){if(!Q)return null;const Yn=[],kn=[];Va(Yn,Te,Ue/et),ko(kn,Ga(kn,Yn,De)),ko(Te,Xl(Te,De,Va(Te,kn,Math.tan(it)*Ue)))}const _t=[];new sp(ne,Te).closestPointOnSphere($e,We,_t);const Et=ko([],un(Ce,0)),Bt=ko([],un(Ce,1)),qt=ko([],un(Ce,2)),Ft=ba(Et,_t),Gt=ba(Bt,_t),Jt=ba(qt,_t),Wt=Re(Math.asin(-Gt/We));let Tn=Re(Math.atan2(Ft,Jt));Tn=$.center.lng+function(Yn,kn){const Ln=(kn-Yn+180)%360-180;return Ln<-180?Ln+360:Ln}($.center.lng,Tn);const bn=va(Tn),Pn=Xe(Ua(Wt),0,1);return new Zl(bn,Pn)}class Ig{constructor(y,I,Q){this.a=Ga([],y,Q),this.b=Ga([],I,Q),this.center=Q;const ne=ko([],this.a),_e=ko([],this.b);this.angle=Math.acos(ba(ne,_e))}}function Ip($,y){if($.angle===0)return null;let I;return I=$.a[y]===0?1/$.angle*.5*Math.PI:1/$.angle*Math.atan($.b[y]/$.a[y]/Math.sin($.angle)-1/Math.tan($.angle)),I<0||I>1?null:function(Q,ne,_e,Te){const Ce=Math.sin(_e);return Q*(Math.sin((1-Te)*_e)/Ce)+ne*(Math.sin(Te*_e)/Ce)}($.a[y],$.b[y],$.angle,Xe(I,0,1))+$.center[y]}function ys($){if($.z<=1)return Mg[$.z+2*$.y+$.x];const y=Pp(Dd($));return Lo.fromPoints(y)}function d_($,y){const I=Bh(y.zoom);if(I===0)return ys($);const Q=Dd($),ne=Pp(Q),_e=va(Q.getWest())*y.worldSize,Te=va(Q.getEast())*y.worldSize,Ce=Ua(Q.getNorth())*y.worldSize,$e=Ua(Q.getSouth())*y.worldSize,De=[_e,Ce,0],Ue=[Te,Ce,0],He=[_e,$e,0],We=[Te,$e,0],et=ep([],y.globeMatrix);return Wi(De,De,et),Wi(Ue,Ue,et),Wi(He,He,et),Wi(We,We,et),ne[0]=Ka(ne[0],He,I),ne[1]=Ka(ne[1],We,I),ne[2]=Ka(ne[2],Ue,I),ne[3]=Ka(ne[3],De,I),Lo.fromPoints(ne)}function p_($,y,I,Q,ne){for(const _e of I)Wi(_e,_e,Q),Va(_e,_e,ne),ip($,$,_e),op(y,y,_e)}function Pg($,y,I){const Q=y/$.worldSize,ne=Number.MAX_VALUE,_e=[-ne,-ne,-ne],Te=[ne,ne,ne],Ce=$.globeMatrix;if(I.z<=1)return p_(Te,_e,ys(I).getCorners(),Ce,Q),new Lo(Te,_e);const $e=Dd(I),De=Pp($e);if(p_(Te,_e,De,Ce,Q),$e.contains($.center)){_e[2]=0;const Tn=$.point,bn=[Tn.x*Q,Tn.y*Q,0];return ip(Te,Te,bn),op(_e,_e,bn),new Lo(Te,_e)}const Ue=[Ce[12]*Q,Ce[13]*Q,Ce[14]*Q],He=$e.getCenter(),We=Xe($.center.lat,-85.051129,xa),et=Xe(He.lat,-85.051129,xa),it=va($.center.lng),_t=Ua(We);let Et=it-va(He.lng);const Bt=_t-Ua(et);Et>.5?Et-=1:Et<-.5&&(Et+=1);let qt=0;Math.abs(Et)>Math.abs(Bt)?qt=Et>=0?1:3:(qt=Bt>=0?0:2,yd(Ue,Ue,[Ce[4]*Q,Ce[5]*Q,Ce[6]*Q],-Math.sin(Pe(Bt>=0?$e.getSouth():$e.getNorth()))*cl));const Ft=De[qt],Gt=De[(qt+1)%4],Jt=new Ig(Ft,Gt,Ue),Wt=[Ip(Jt,0)||Ft[0],Ip(Jt,1)||Ft[1],Ip(Jt,2)||Ft[2]];return Te[2]=Math.min(Ft[2],Gt[2]),ip(Te,Te,Wt),op(_e,_e,Wt),new Lo(Te,_e)}function Dd({x:$,y,z:I}){const Q=1/(1<<I),ne=new ei(qo($*Q),Yi((y+1)*Q)),_e=new ei(qo(($+1)*Q),Yi(y*Q));return new ja(ne,_e)}function Pp($){const y=Pe($.getNorth()),I=Pe($.getSouth()),Q=Math.cos(y),ne=Math.cos(I),_e=Math.sin(y),Te=Math.sin(I),Ce=$.getWest(),$e=$.getEast();return[Hu(ne,Te,Ce),Hu(ne,Te,$e),Hu(Q,_e,$e),Hu(Q,_e,Ce)]}function Hu($,y,I,Q=cl){return I=Pe(I),[$*Math.sin(I)*Q,-y*Q,$*Math.cos(I)*Q]}function Ld($,y,I){return Hu(Math.cos(Pe($)),Math.sin(Pe($)),y,I)}function Dh($,y,I,Q){const ne=1<<I.z,_e=($/Ar+I.x)/ne;return Ld(Yi((y/Ar+I.y)/ne),qo(_e),Q)}function Bd({min:$,max:y}){return 16383/Math.max(y[0]-$[0],y[1]-$[1],y[2]-$[2])}const f_=new Float64Array(16);function Lh($){const y=Bd($),I=Yp(f_,[y,y,y]);return vh(I,I,((Q=[])[0]=-(ne=$.min)[0],Q[1]=-ne[1],Q[2]=-ne[2],Q));var Q,ne}function Op($){const y=(Q=$.min,(I=f_)[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=Q[0],I[13]=Q[1],I[14]=Q[2],I[15]=1,I);var I,Q;const ne=1/Bd($);return Vc(y,y,[ne,ne,ne])}function __($,y,I,Q,ne){const _e=function($e){const De=Ar/(2*Math.PI);return $e/(2*Math.PI)/De}(I),Te=[$,y,-I/(2*Math.PI)],Ce=ms(new Float64Array(16));return vh(Ce,Ce,Te),Vc(Ce,Ce,[_e,_e,_e]),tp(Ce,Ce,Pe(-ne)),gd(Ce,Ce,Pe(-Q)),Ce}function Bh($){return qe(5,6,$)}function m_($,y){const I=Ld(y.lat,y.lng);return _e=(Q=rp([],function(et){const it=Ld(et._center.lat,et._center.lng);let _t=ap([],Du(0,1,0),it);const Et=Jp([],-et.angle,it);_t=Wi(_t,_t,Et),Jp(Et,-et._pitch,_t);const Bt=ko([],it);return Va(Bt,Bt,et.cameraToCenterDistance/et.pixelsPerMeter*Mp),Wi(Bt,Bt,Et),Xl([],it,Bt)}($),I))[0],Te=Q[1],Ce=Q[2],$e=(ne=I)[0],De=ne[1],Ue=ne[2],We=(He=Math.sqrt(_e*_e+Te*Te+Ce*Ce)*Math.sqrt($e*$e+De*De+Ue*Ue))&&ba(Q,ne)/He,Math.acos(Math.min(Math.max(We,-1),1));var Q,ne,_e,Te,Ce,$e,De,Ue,He,We}const g_=Pe(85),Og=Math.cos(g_),Rg=Math.sin(g_);function y_($,y){const I=$.fovAboveCenter,Q=$.elevation?$.elevation.getMinElevationBelowMSL()*y:0,ne=($._camera.position[2]*$.worldSize-Q)/Math.cos($._pitch),_e=Math.sin(I)*ne/Math.sin(Math.max(Math.PI/2-$._pitch-I,.01)),Te=Math.sin($._pitch)*_e+ne;return Math.min(1.01*Te,ne*(1/$._horizonShift))}function Wc($,y){if(!y.isReprojectedInTileSpace)return{scale:1<<$.z,x:$.x,y:$.y,x2:$.x+1,y2:$.y+1,projection:y};const I=Math.pow(2,-$.z),Q=$.x*I,ne=($.x+1)*I,_e=$.y*I,Te=($.y+1)*I,Ce=qo(Q),$e=qo(ne),De=Yi(_e),Ue=Yi(Te),He=y.project(Ce,De),We=y.project($e,De),et=y.project($e,Ue),it=y.project(Ce,Ue);let _t=Math.min(He.x,We.x,et.x,it.x),Et=Math.min(He.y,We.y,et.y,it.y),Bt=Math.max(He.x,We.x,et.x,it.x),qt=Math.max(He.y,We.y,et.y,it.y);const Ft=I/16;function Gt(Wt,Tn,bn,Pn,Yn,kn){const Ln=(bn+Yn)/2,Un=(Pn+kn)/2,Bn=y.project(qo(Ln),Yi(Un)),Zn=Math.max(0,_t-Bn.x,Et-Bn.y,Bn.x-Bt,Bn.y-qt);_t=Math.min(_t,Bn.x),Bt=Math.max(Bt,Bn.x),Et=Math.min(Et,Bn.y),qt=Math.max(qt,Bn.y),Zn>Ft&&(Gt(Wt,Bn,bn,Pn,Ln,Un),Gt(Bn,Tn,Ln,Un,Yn,kn))}Gt(He,We,Q,_e,ne,_e),Gt(We,et,ne,_e,ne,Te),Gt(et,it,ne,Te,Q,Te),Gt(it,He,Q,Te,Q,_e),_t-=Ft,Et-=Ft,Bt+=Ft,qt+=Ft;const Jt=1/Math.max(Bt-_t,qt-Et);return{scale:Jt,x:_t*Jt,y:Et*Jt,x2:Bt*Jt,y2:qt*Jt,projection:y}}const $g=ms(new Float32Array(16));class Yl{constructor(y){this.spec=y,this.name=y.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(y,I){return{x:0,y:0,z:0}}unproject(y,I){return new ei(0,0)}projectTilePoint(y,I,Q){return{x:y,y:I,z:0}}locationPoint(y,I,Q=!0){return y._coordinatePoint(y.locationCoordinate(I),Q)}pixelsPerMeter(y,I){return Do(1,y)*I}pixelSpaceConversion(y,I,Q){return 1}farthestPixelDistance(y){return y_(y,y.pixelsPerMeter)}pointCoordinate(y,I,Q,ne){const _e=y.horizonLineFromTop(!1),Te=new ye(I,Math.max(_e,Q));return y.rayIntersectionCoordinate(y.pointRayIntersection(Te,ne))}pointCoordinate3D(y,I,Q){const ne=new ye(I,Q);if(y.elevation)return y.elevation.pointCoordinate(ne);{const _e=this.pointCoordinate(y,ne.x,ne.y,0);return[_e.x,_e.y,_e.z]}}isPointAboveHorizon(y,I){if(y.elevation)return!this.pointCoordinate3D(y,I.x,I.y);const Q=y.horizonLineFromTop();return I.y<Q}createInversionMatrix(y,I){return $g}createTileMatrix(y,I,Q){let ne,_e,Te;const Ce=Q.canonical,$e=ms(new Float64Array(16));if(this.isReprojectedInTileSpace){const De=Wc(Ce,this);ne=1,_e=De.x+Q.wrap*De.scale,Te=De.y,Vc($e,$e,[ne/De.scale,ne/De.scale,y.pixelsPerMeter/I])}else ne=I/y.zoomScale(Ce.z),_e=(Ce.x+Math.pow(2,Ce.z)*Q.wrap)*ne,Te=Ce.y*ne;return vh($e,$e,[_e,Te,0]),Vc($e,$e,[ne/Ar,ne/Ar,1]),$e}upVector(y,I,Q){return[0,0,1]}upVectorScale(y,I,Q){return{metersToTile:1}}}class zg extends Yl{constructor(y){super(y),this.range=[4,7],this.center=y.center||[-96,37.5];const[I,Q]=this.parallels=y.parallels||[29.5,45.5],ne=Math.sin(Pe(I));this.n=(ne+Math.sin(Pe(Q)))/2,this.c=1+ne*(2*this.n-ne),this.r0=Math.sqrt(this.c)/this.n}project(y,I){const{n:Q,c:ne,r0:_e}=this,Te=Pe(y-this.center[0]),Ce=Pe(I),$e=Math.sqrt(ne-2*Q*Math.sin(Ce))/Q;return{x:$e*Math.sin(Te*Q),y:$e*Math.cos(Te*Q)-_e,z:0}}unproject(y,I){const{n:Q,c:ne,r0:_e}=this,Te=_e+I;let Ce=Math.atan2(y,Math.abs(Te))*Math.sign(Te);Te*Q<0&&(Ce-=Math.PI*Math.sign(y)*Math.sign(Te));const $e=Pe(this.center[0])*Q;Ce=Je(Ce,-Math.PI-$e,Math.PI-$e);const De=Re(Ce/Q)+this.center[0],Ue=Math.asin(Xe((ne-(y*y+Te*Te)*Q*Q)/(2*Q),-1,1)),He=Xe(Re(Ue),-85.051129,xa);return new ei(De,He)}}const Fh=1.340264,Nh=-.081106,jh=893e-6,Uh=.003796,Fd=Math.sqrt(3)/2;class Dg extends Yl{project(y,I){I=I/180*Math.PI,y=y/180*Math.PI;const Q=Math.asin(Fd*Math.sin(I)),ne=Q*Q,_e=ne*ne*ne;return{x:.5*(y*Math.cos(Q)/(Fd*(Fh+3*Nh*ne+_e*(7*jh+9*Uh*ne)))/Math.PI+.5),y:1-.5*(Q*(Fh+Nh*ne+_e*(jh+Uh*ne))/Math.PI+1),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI;let Q=I=(2*(1-I)-1)*Math.PI,ne=Q*Q,_e=ne*ne*ne;for(let Ue,He,We,et=0;et<12&&(He=Q*(Fh+Nh*ne+_e*(jh+Uh*ne))-I,We=Fh+3*Nh*ne+_e*(7*jh+9*Uh*ne),Ue=He/We,Q=Xe(Q-Ue,-Math.PI/3,Math.PI/3),ne=Q*Q,_e=ne*ne*ne,!(Math.abs(Ue)<1e-12));++et);const Te=Fd*y*(Fh+3*Nh*ne+_e*(7*jh+9*Uh*ne))/Math.cos(Q),Ce=Math.asin(Math.sin(Q)/Fd),$e=Xe(180*Te/Math.PI,-180,180),De=Xe(180*Ce/Math.PI,-85.051129,xa);return new ei($e,De)}}class Lg extends Yl{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0}project(y,I){return{x:.5+y/360,y:.5-I/360,z:0}}unproject(y,I){const Q=360*(y-.5),ne=Xe(360*(.5-I),-85.051129,xa);return new ei(Q,ne)}}const Wu=Math.PI/2;function Nd($){return Math.tan((Wu+$)/2)}class Bg extends Yl{constructor(y){super(y),this.center=y.center||[0,30];const[I,Q]=this.parallels=y.parallels||[30,30],ne=Pe(I),_e=Pe(Q),Te=Math.cos(ne);this.n=ne===_e?Math.sin(ne):Math.log(Te/Math.cos(_e))/Math.log(Nd(_e)/Nd(ne)),this.f=Te*Math.pow(Nd(ne),this.n)/this.n}project(y,I){I=Pe(I),y=Pe(y-this.center[0]);const Q=1e-6,{n:ne,f:_e}=this;_e>0?I<-Wu+Q&&(I=-Wu+Q):I>Wu-Q&&(I=Wu-Q);const Te=_e/Math.pow(Nd(I),ne),Ce=Te*Math.sin(ne*y),$e=_e-Te*Math.cos(ne*y);return{x:.5*(Ce/Math.PI+.5),y:1-.5*($e/Math.PI+.5),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI,I=(2*(1-I)-.5)*Math.PI;const{n:Q,f:ne}=this,_e=ne-I,Te=Math.sign(_e),Ce=Math.sign(Q)*Math.sqrt(y*y+_e*_e);let $e=Math.atan2(y,Math.abs(_e))*Te;_e*Q<0&&($e-=Math.PI*Math.sign(y)*Te);const De=Xe(Re($e/Q)+this.center[0],-180,180),Ue=Xe(Re(2*Math.atan(Math.pow(ne/Ce,1/Q))-Wu),-85.051129,xa);return new ei(De,Ue)}}class v_ extends Yl{constructor(y){super(y),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(y,I){return{x:va(y),y:Ua(I),z:0}}unproject(y,I){const Q=qo(y),ne=Yi(I);return new ei(Q,ne)}}const x_=Pe(xa);class Fg extends Yl{project(y,I){const Q=(I=Pe(I))*I,ne=Q*Q;return{x:.5*((y=Pe(y))*(.8707-.131979*Q+ne*(ne*(.003971*Q-.001529*ne)-.013791))/Math.PI+.5),y:1-.5*(I*(1.007226+Q*(.015085+ne*(.028874*Q-.044475-.005916*ne)))/Math.PI+1),z:0}}unproject(y,I){y=(2*y-.5)*Math.PI;let Q=I=(2*(1-I)-1)*Math.PI,ne=25,_e=0,Te=Q*Q;do{Te=Q*Q;const De=Te*Te;_e=(Q*(1.007226+Te*(.015085+De*(.028874*Te-.044475-.005916*De)))-I)/(1.007226+Te*(.045255+De*(.259866*Te-.311325-.005916*11*De))),Q=Xe(Q-_e,-x_,x_)}while(Math.abs(_e)>1e-6&&--ne>0);Te=Q*Q;const Ce=Xe(Re(y/(.8707+Te*(Te*(Te*Te*Te*(.003971-.001529*Te)-.013791)-.131979))),-180,180),$e=Re(Q);return new ei(Ce,$e)}}const b_=Pe(xa);class Ng extends Yl{project(y,I){I=Pe(I),y=Pe(y);const Q=Math.cos(I),ne=2/Math.PI,_e=Math.acos(Q*Math.cos(y/2)),Te=Math.sin(_e)/_e,Ce=.5*(y*ne+2*Q*Math.sin(y/2)/Te)||0,$e=.5*(I+Math.sin(I)/Te)||0;return{x:.5*(Ce/Math.PI+.5),y:1-.5*($e/Math.PI+1),z:0}}unproject(y,I){let Q=y=(2*y-.5)*Math.PI,ne=I=(2*(1-I)-1)*Math.PI,_e=25;const Te=1e-6;let Ce=0,$e=0;do{const De=Math.cos(ne),Ue=Math.sin(ne),He=2*Ue*De,We=Ue*Ue,et=De*De,it=Math.cos(Q/2),_t=Math.sin(Q/2),Et=2*it*_t,Bt=_t*_t,qt=1-et*it*it,Ft=qt?1/qt:0,Gt=qt?Math.acos(De*it)*Math.sqrt(1/qt):0,Jt=.5*(2*Gt*De*_t+2*Q/Math.PI)-y,Wt=.5*(Gt*Ue+ne)-I,Tn=.5*Ft*(et*Bt+Gt*De*it*We)+1/Math.PI,bn=Ft*(Et*He/4-Gt*Ue*_t),Pn=.125*Ft*(He*_t-Gt*Ue*et*Et),Yn=.5*Ft*(We*it+Gt*Bt*De)+.5,kn=bn*Pn-Yn*Tn;Ce=(Wt*bn-Jt*Yn)/kn,$e=(Jt*Pn-Wt*Tn)/kn,Q=Xe(Q-Ce,-Math.PI,Math.PI),ne=Xe(ne-$e,-b_,b_)}while((Math.abs(Ce)>Te||Math.abs($e)>Te)&&--_e>0);return new ei(Re(Q),Re(ne))}}class w_ extends Yl{constructor(y){super(y),this.center=y.center||[0,0],this.parallels=y.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Pe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(y,I){const{scale:Q,cosPhi:ne}=this;return{x:Pe(y)*ne*Q+.5,y:-Math.sin(Pe(I))/ne*Q+.5,z:0}}unproject(y,I){const{scale:Q,cosPhi:ne}=this,_e=-(I-.5)/Q,Te=Xe(Re((y-.5)/Q)/ne,-180,180),Ce=Math.asin(Xe(_e*ne,-1,1)),$e=Xe(Re(Ce),-85.051129,xa);return new ei(Te,$e)}}class jg extends v_{constructor(y){super(y),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(y,I,Q){const ne=Dh(y,I,Q);return Wi(ne,ne,Lh(ys(Q))),{x:ne[0],y:ne[1],z:ne[2]}}locationPoint(y,I){const Q=Ld(I.lat,I.lng),ne=ko([],Q),_e=y.elevation?y.elevation.getAtPointOrZero(y.locationCoordinate(I),y._centerAltitude):y._centerAltitude;yd(Q,Q,ne,Do(1,0)*Ar*_e);const Te=ms(new Float64Array(16));return zu(Te,y.pixelMatrix,y.globeMatrix),Wi(Q,Q,Te),new ye(Q[0],Q[1])}pixelsPerMeter(y,I){return Do(1,0)*I}pixelSpaceConversion(y,I,Q){const ne=Hr(Do(1,45)*I,Do(1,y)*I,Q);return this.pixelsPerMeter(y,I)/ne}createTileMatrix(y,I,Q){const ne=Op(ys(Q.canonical));return zu(new Float64Array(16),y.globeMatrix,ne)}createInversionMatrix(y,I){const{center:Q}=y,ne=Lh(ys(I));return gd(ne,ne,Pe(Q.lng)),tp(ne,ne,Pe(Q.lat)),Vc(ne,ne,[y._pixelsPerMercatorPixel,y._pixelsPerMercatorPixel,1]),Float32Array.from(ne)}pointCoordinate(y,I,Q,ne){return h_(y,I,Q,!0)||new Zl(0,0)}pointCoordinate3D(y,I,Q){const ne=this.pointCoordinate(y,I,Q,0);return[ne.x,ne.y,ne.z]}isPointAboveHorizon(y,I){return!h_(y,I.x,I.y,!1)}farthestPixelDistance(y){const I=function(ne,_e){const Te=ne.cameraToCenterDistance,Ce=ne._centerAltitude*_e,$e=ne._camera,De=ne._camera.forward(),Ue=Xl([],Va([],De,-Te),[0,0,Ce]),He=ne.worldSize/(2*Math.PI),We=[0,0,-He],et=ne.width/ne.height,it=Math.tan(ne.fovAboveCenter),_t=Va([],$e.up(),it),Et=Va([],$e.right(),it*et),Bt=ko([],Xl([],Xl([],De,_t),Et)),qt=[];let Ft;if(new sp(Ue,Bt).closestPointOnSphere(We,He,qt)){const Gt=Xl([],qt,We),Jt=Ga([],Gt,Ue);Ft=Math.cos(ne.fovAboveCenter)*xh(Jt)}else{const Gt=Ga([],Ue,We),Jt=Ga([],We,Ue);ko(Jt,Jt);const Wt=xh(Gt)-He;Ft=Math.sqrt(Wt*(Wt+2*He));const Tn=Math.acos(Ft/(He+Wt))-Math.acos(ba(De,Jt));Ft*=Math.cos(Tn)}return 1.01*Ft}(y,this.pixelsPerMeter(y.center.lat,y.worldSize)),Q=Bh(y.zoom);if(Q>0){const ne=y_(y,Do(1,y.center.lat)*y.worldSize),_e=y.worldSize/(2*Math.PI),Te=Math.max(y.width,y.height)/y.worldSize*Math.PI;return Hr(I,ne+_e*(1-Math.cos(Te)),Math.pow(Q,10))}return I}upVector(y,I,Q){return Dh(I,Q,y,1)}upVectorScale(y){return{metersToTile:Mp*Bd(ys(y))}}}function E_($){const y=$.parallels,I=!!y&&Math.abs(y[0]+y[1])<.01;switch($.name){case"mercator":return new v_($);case"equirectangular":return new Lg($);case"naturalEarth":return new Fg($);case"equalEarth":return new Dg($);case"winkelTripel":return new Ng($);case"albers":return I?new w_($):new zg($);case"lambertConformalConic":return I?new w_($):new Bg($);case"globe":return new jg($)}throw new Error(`Invalid projection name: ${$.name}`)}const Ug=Hc.VectorTileFeature.types,Vg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jd($,y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We){const et=Ce?Math.min(Kl,Math.round(Ce[0])):0,it=Ce?Math.min(Kl,Math.round(Ce[1])):0;$.emplaceBack(y,I,Math.round(32*Q),Math.round(32*ne),_e,Te,(et<<1)+($e?1:0),it,16*De,16*Ue,256*He,256*We)}function Ud($,y,I,Q,ne,_e,Te){$.emplaceBack(y,I,Q,ne,_e,Te)}function Vd($,y,I,Q,ne){$.emplaceBack(y,I,Q,ne),$.emplaceBack(y,I,Q,ne),$.emplaceBack(y,I,Q,ne),$.emplaceBack(y,I,Q,ne)}function Gg($){for(const y of $.sections)if(ee(y.text))return!0;return!1}class Rp{constructor(y){this.layoutVertexArray=new li,this.indexArray=new Rr,this.programConfigurations=y,this.segments=new Li,this.dynamicLayoutVertexArray=new Ur,this.opacityVertexArray=new ii,this.placedSymbolArray=new Zh,this.globeExtVertexArray=new bi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(y,I,Q,ne){this.isEmpty()||(Q&&(this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,Hm.members),this.indexBuffer=y.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=y.createVertexBuffer(this.dynamicLayoutVertexArray,Zm.members,!0),this.opacityVertexBuffer=y.createVertexBuffer(this.opacityVertexArray,Vg,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=y.createVertexBuffer(this.globeExtVertexArray,Wm.members,!0)),this.opacityVertexBuffer.itemSize=1),(Q||ne)&&this.programConfigurations.upload(y))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}cr(Rp,"SymbolBuffers");class $p{constructor(y,I,Q){this.layoutVertexArray=new y,this.layoutAttributes=I,this.indexArray=new Q,this.segments=new Li,this.collisionVertexArray=new fi,this.collisionVertexArrayExt=new yi}upload(y){this.layoutVertexBuffer=y.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=y.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=y.createVertexBuffer(this.collisionVertexArray,Xm.members,!0),this.collisionVertexBufferExt=y.createVertexBuffer(this.collisionVertexArrayExt,Km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}cr($p,"CollisionBuffers");class Jl{constructor(y){this.collisionBoxArray=y.collisionBoxArray,this.zoom=y.zoom,this.overscaling=y.overscaling,this.layers=y.layers,this.layerIds=this.layers.map(Te=>Te.id),this.index=y.index,this.pixelRatio=y.pixelRatio,this.sourceLayerIndex=y.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ms([]),this.placementViewportMatrix=ms([]);const I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yp(this.zoom,I["text-size"]),this.iconSizeData=yp(this.zoom,I["icon-size"]);const Q=this.layers[0].layout,ne=Q.get("symbol-sort-key"),_e=Q.get("symbol-z-order");this.canOverlap=Q.get("text-allow-overlap")||Q.get("icon-allow-overlap")||Q.get("text-ignore-placement")||Q.get("icon-ignore-placement"),this.sortFeaturesByKey=_e!=="viewport-y"&&ne.constantOr(1)!==void 0,this.sortFeaturesByY=(_e==="viewport-y"||_e==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=Q.get("text-writing-mode").map(Te=>aa[Te]),this.stateDependentLayerIds=this.layers.filter(Te=>Te.isStateDependent()).map(Te=>Te.id),this.sourceID=y.sourceID,this.projection=y.projection}createArrays(){this.text=new Rp(new ol(this.layers,this.zoom,y=>/^text/.test(y))),this.icon=new Rp(new ol(this.layers,this.zoom,y=>/^icon/.test(y))),this.glyphOffsetArray=new dh,this.lineVertexArray=new Yh,this.symbolInstances=new Kh}calculateGlyphDependencies(y,I,Q,ne,_e){for(let Te=0;Te<y.length;Te++)if(I[y.charCodeAt(Te)]=!0,ne&&_e){const Ce=Ph[y.charAt(Te)];Ce&&(I[Ce.charCodeAt(0)]=!0)}}populate(y,I,Q,ne){const _e=this.layers[0],Te=_e.layout,Ce=this.projection.name==="globe",$e=Te.get("text-font"),De=Te.get("text-field"),Ue=Te.get("icon-image"),He=(De.value.kind!=="constant"||De.value.value instanceof oo&&!De.value.value.isEmpty()||De.value.value.toString().length>0)&&($e.value.kind!=="constant"||$e.value.value.length>0),We=Ue.value.kind!=="constant"||!!Ue.value.value||Object.keys(Ue.parameters).length>0,et=Te.get("symbol-sort-key");if(this.features=[],!He&&!We)return;const it=I.iconDependencies,_t=I.glyphDependencies,Et=I.availableImages,Bt=new Tt(this.zoom);for(const{feature:qt,id:Ft,index:Gt,sourceLayerIndex:Jt}of y){const Wt=_e._featureFilter.needGeometry,Tn=Ve(qt,Wt);if(!_e._featureFilter.filter(Bt,Tn,Q))continue;if(Wt||(Tn.geometry=yt(qt,Q,ne)),Ce&&qt.type!==1&&Q.z<=5){const kn=Tn.geometry,Ln=.98078528056;for(let Un=0;Un<kn.length;Un++)kn[Un]=pd(kn[Un],Bn=>Bn,(Bn,Zn)=>ba(Dh(Bn.x,Bn.y,Q,1),Dh(Zn.x,Zn.y,Q,1))<Ln)}let bn,Pn;if(He){const kn=_e.getValueAndResolveTokens("text-field",Tn,Q,Et),Ln=oo.factory(kn);Gg(Ln)&&(this.hasRTLText=!0),(!this.hasRTLText||mt()==="unavailable"||this.hasRTLText&&At.isParsed())&&(bn=Qm(Ln,_e,Tn))}if(We){const kn=_e.getValueAndResolveTokens("icon-image",Tn,Q,Et);Pn=kn instanceof ao?kn:ao.fromString(kn)}if(!bn&&!Pn)continue;const Yn=this.sortFeaturesByKey?et.evaluate(Tn,{},Q):void 0;if(this.features.push({id:Ft,text:bn,icon:Pn,index:Gt,sourceLayerIndex:Jt,geometry:Tn.geometry,properties:qt.properties,type:Ug[qt.type],sortKey:Yn}),Pn&&(it[Pn.name]=!0),bn){const kn=$e.evaluate(Tn,{},Q).join(","),Ln=Te.get("text-rotation-alignment")==="map"&&Te.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(aa.vertical)>=0;for(const Un of bn.sections)if(Un.image)it[Un.image.name]=!0;else{const Bn=nl(bn.toString()),Zn=Un.fontStack||kn,Vn=_t[Zn]=_t[Zn]||{};this.calculateGlyphDependencies(Un.text,Vn,Ln,this.allowVerticalPlacement,Bn)}}}Te.get("symbol-placement")==="line"&&(this.features=function(qt){const Ft={},Gt={},Jt=[];let Wt=0;function Tn(kn){Jt.push(qt[kn]),Wt++}function bn(kn,Ln,Un){const Bn=Gt[kn];return delete Gt[kn],Gt[Ln]=Bn,Jt[Bn].geometry[0].pop(),Jt[Bn].geometry[0]=Jt[Bn].geometry[0].concat(Un[0]),Bn}function Pn(kn,Ln,Un){const Bn=Ft[Ln];return delete Ft[Ln],Ft[kn]=Bn,Jt[Bn].geometry[0].shift(),Jt[Bn].geometry[0]=Un[0].concat(Jt[Bn].geometry[0]),Bn}function Yn(kn,Ln,Un){const Bn=Un?Ln[0][Ln[0].length-1]:Ln[0][0];return`${kn}:${Bn.x}:${Bn.y}`}for(let kn=0;kn<qt.length;kn++){const Ln=qt[kn],Un=Ln.geometry,Bn=Ln.text?Ln.text.toString():null;if(!Bn){Tn(kn);continue}const Zn=Yn(Bn,Un),Vn=Yn(Bn,Un,!0);if(Zn in Gt&&Vn in Ft&&Gt[Zn]!==Ft[Vn]){const or=Pn(Zn,Vn,Un),Or=bn(Zn,Vn,Jt[or].geometry);delete Ft[Zn],delete Gt[Vn],Gt[Yn(Bn,Jt[Or].geometry,!0)]=Or,Jt[or].geometry=null}else Zn in Gt?bn(Zn,Vn,Un):Vn in Ft?Pn(Zn,Vn,Un):(Tn(kn),Ft[Zn]=Wt-1,Gt[Vn]=Wt-1)}return Jt.filter(kn=>kn.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((qt,Ft)=>qt.sortKey-Ft.sortKey)}update(y,I,Q,ne){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(y,I,this.layers,Q,ne),this.icon.programConfigurations.updatePaintArrays(y,I,this.layers,Q,ne))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(y){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(y),this.iconCollisionBox.upload(y)),this.text.upload(y,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(y,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=E_(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(y,I){const Q=this.lineVertexArray.length,ne=y.segment;if(ne!==void 0){let _e=y.dist(I[ne+1]),Te=y.dist(I[ne]);const Ce={};for(let $e=ne+1;$e<I.length;$e++)Ce[$e]={x:I[$e].x,y:I[$e].y,tileUnitDistanceFromAnchor:_e},$e<I.length-1&&(_e+=I[$e+1].dist(I[$e]));for(let $e=ne||0;$e>=0;$e--)Ce[$e]={x:I[$e].x,y:I[$e].y,tileUnitDistanceFromAnchor:Te},$e>0&&(Te+=I[$e-1].dist(I[$e]));for(let $e=0;$e<I.length;$e++){const De=Ce[$e];this.lineVertexArray.emplaceBack(De.x,De.y,De.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Q,lineLength:this.lineVertexArray.length-Q}}addSymbols(y,I,Q,ne,_e,Te,Ce,$e,De,Ue,He,We,et,it){const _t=y.indexArray,Et=y.layoutVertexArray,Bt=y.globeExtVertexArray,qt=y.segments.prepareSegment(4*I.length,Et,_t,this.canOverlap?Te.sortKey:void 0),Ft=this.glyphOffsetArray.length,Gt=qt.vertexLength,Jt=this.allowVerticalPlacement&&Ce===aa.vertical?Math.PI/2:0,Wt=Te.text&&Te.text.sections;for(let bn=0;bn<I.length;bn++){const{tl:Pn,tr:Yn,bl:kn,br:Ln,tex:Un,pixelOffsetTL:Bn,pixelOffsetBR:Zn,minFontScaleX:Vn,minFontScaleY:or,glyphOffset:Or,isSDF:$r,sectionIndex:yr}=I[bn],nr=qt.vertexLength,Gr=Or[1];if(jd(Et,De.x,De.y,Pn.x,Gr+Pn.y,Un.x,Un.y,Q,$r,Bn.x,Bn.y,Vn,or),jd(Et,De.x,De.y,Yn.x,Gr+Yn.y,Un.x+Un.w,Un.y,Q,$r,Zn.x,Bn.y,Vn,or),jd(Et,De.x,De.y,kn.x,Gr+kn.y,Un.x,Un.y+Un.h,Q,$r,Bn.x,Zn.y,Vn,or),jd(Et,De.x,De.y,Ln.x,Gr+Ln.y,Un.x+Un.w,Un.y+Un.h,Q,$r,Zn.x,Zn.y,Vn,or),$e){const Mr=$e.anchor,hr=$e.up;Ud(Bt,Mr.x,Mr.y,Mr.z,hr[0],hr[1],hr[2]),Ud(Bt,Mr.x,Mr.y,Mr.z,hr[0],hr[1],hr[2]),Ud(Bt,Mr.x,Mr.y,Mr.z,hr[0],hr[1],hr[2]),Ud(Bt,Mr.x,Mr.y,Mr.z,hr[0],hr[1],hr[2]),Vd(y.dynamicLayoutVertexArray,Mr.x,Mr.y,Mr.z,Jt)}else Vd(y.dynamicLayoutVertexArray,De.x,De.y,De.z,Jt);_t.emplaceBack(nr,nr+1,nr+2),_t.emplaceBack(nr+1,nr+2,nr+3),qt.vertexLength+=4,qt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Or[0]),bn!==I.length-1&&yr===I[bn+1].sectionIndex||y.programConfigurations.populatePaintArrays(Et.length,Te,Te.index,{},et,it,Wt&&Wt[yr])}const Tn=$e?$e.anchor:De;y.placedSymbolArray.emplaceBack(Tn.x,Tn.y,Tn.z,De.x,De.y,Ft,this.glyphOffsetArray.length-Ft,Gt,Ue,He,De.segment,Q?Q[0]:0,Q?Q[1]:0,ne[0],ne[1],Ce,0,!1,0,We,0)}_commitLayoutVertex(y,I,Q,ne,_e,Te,Ce){y.emplaceBack(I,Q,ne,_e,Te,Math.round(Ce.x),Math.round(Ce.y))}_addCollisionDebugVertices(y,I,Q,ne,_e,Te,Ce){const $e=Q.segments.prepareSegment(4,Q.layoutVertexArray,Q.indexArray),De=$e.vertexLength,Ue=Ce.tileAnchorX,He=Ce.tileAnchorY;for(let et=0;et<4;et++)Q.collisionVertexArray.emplaceBack(0,0,0,0);Q.collisionVertexArrayExt.emplaceBack(I,-y.padding,-y.padding),Q.collisionVertexArrayExt.emplaceBack(I,y.padding,-y.padding),Q.collisionVertexArrayExt.emplaceBack(I,y.padding,y.padding),Q.collisionVertexArrayExt.emplaceBack(I,-y.padding,y.padding),this._commitLayoutVertex(Q.layoutVertexArray,ne,_e,Te,Ue,He,new ye(y.x1,y.y1)),this._commitLayoutVertex(Q.layoutVertexArray,ne,_e,Te,Ue,He,new ye(y.x2,y.y1)),this._commitLayoutVertex(Q.layoutVertexArray,ne,_e,Te,Ue,He,new ye(y.x2,y.y2)),this._commitLayoutVertex(Q.layoutVertexArray,ne,_e,Te,Ue,He,new ye(y.x1,y.y2)),$e.vertexLength+=4;const We=Q.indexArray;We.emplaceBack(De,De+1),We.emplaceBack(De+1,De+2),We.emplaceBack(De+2,De+3),We.emplaceBack(De+3,De),$e.primitiveLength+=4}_addTextDebugCollisionBoxes(y,I,Q,ne,_e,Te){for(let Ce=ne;Ce<_e;Ce++){const $e=Q.get(Ce),De=this.getSymbolInstanceTextSize(y,Te,I,Ce);this._addCollisionDebugVertices($e,De,this.textCollisionBox,$e.projectedAnchorX,$e.projectedAnchorY,$e.projectedAnchorZ,Te)}}_addIconDebugCollisionBoxes(y,I,Q,ne,_e,Te){for(let Ce=ne;Ce<_e;Ce++){const $e=Q.get(Ce),De=this.getSymbolInstanceIconSize(y,I,Ce);this._addCollisionDebugVertices($e,De,this.iconCollisionBox,$e.projectedAnchorX,$e.projectedAnchorY,$e.projectedAnchorZ,Te)}}generateCollisionDebugBuffers(y,I){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $p(Eo,Df.members,eo),this.iconCollisionBox=new $p(Eo,Df.members,eo);const Q=Fu(this.iconSizeData,y),ne=Fu(this.textSizeData,y);for(let _e=0;_e<this.symbolInstances.length;_e++){const Te=this.symbolInstances.get(_e);this._addTextDebugCollisionBoxes(ne,y,I,Te.textBoxStartIndex,Te.textBoxEndIndex,Te),this._addTextDebugCollisionBoxes(ne,y,I,Te.verticalTextBoxStartIndex,Te.verticalTextBoxEndIndex,Te),this._addIconDebugCollisionBoxes(Q,y,I,Te.iconBoxStartIndex,Te.iconBoxEndIndex,Te),this._addIconDebugCollisionBoxes(Q,y,I,Te.verticalIconBoxStartIndex,Te.verticalIconBoxEndIndex,Te)}}getSymbolInstanceTextSize(y,I,Q,ne){const _e=this.text.placedSymbolArray.get(I.rightJustifiedTextSymbolIndex>=0?I.rightJustifiedTextSymbolIndex:I.centerJustifiedTextSymbolIndex>=0?I.centerJustifiedTextSymbolIndex:I.leftJustifiedTextSymbolIndex>=0?I.leftJustifiedTextSymbolIndex:I.verticalPlacedTextSymbolIndex>=0?I.verticalPlacedTextSymbolIndex:ne),Te=Md(this.textSizeData,y,_e)/uo;return this.tilePixelRatio*Te}getSymbolInstanceIconSize(y,I,Q){const ne=this.icon.placedSymbolArray.get(Q),_e=Md(this.iconSizeData,y,ne);return this.tilePixelRatio*_e}_commitDebugCollisionVertexUpdate(y,I,Q){y.emplaceBack(I,-Q,-Q),y.emplaceBack(I,Q,-Q),y.emplaceBack(I,Q,Q),y.emplaceBack(I,-Q,Q)}_updateTextDebugCollisionBoxes(y,I,Q,ne,_e,Te){for(let Ce=ne;Ce<_e;Ce++){const $e=Q.get(Ce),De=this.getSymbolInstanceTextSize(y,Te,I,Ce);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,De,$e.padding)}}_updateIconDebugCollisionBoxes(y,I,Q,ne,_e){for(let Te=ne;Te<_e;Te++){const Ce=Q.get(Te),$e=this.getSymbolInstanceIconSize(y,I,Te);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,$e,Ce.padding)}}updateCollisionDebugBuffers(y,I){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const Q=Fu(this.iconSizeData,y),ne=Fu(this.textSizeData,y);for(let _e=0;_e<this.symbolInstances.length;_e++){const Te=this.symbolInstances.get(_e);this._updateTextDebugCollisionBoxes(ne,y,I,Te.textBoxStartIndex,Te.textBoxEndIndex,Te),this._updateTextDebugCollisionBoxes(ne,y,I,Te.verticalTextBoxStartIndex,Te.verticalTextBoxEndIndex,Te),this._updateIconDebugCollisionBoxes(Q,y,I,Te.iconBoxStartIndex,Te.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(Q,y,I,Te.verticalIconBoxStartIndex,Te.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(y,I,Q,ne,_e,Te,Ce,$e,De){const Ue={};for(let He=I;He<Q;He++){const We=y.get(He);Ue.textBox={x1:We.x1,y1:We.y1,x2:We.x2,y2:We.y2,padding:We.padding,projectedAnchorX:We.projectedAnchorX,projectedAnchorY:We.projectedAnchorY,projectedAnchorZ:We.projectedAnchorZ,tileAnchorX:We.tileAnchorX,tileAnchorY:We.tileAnchorY},Ue.textFeatureIndex=We.featureIndex;break}for(let He=ne;He<_e;He++){const We=y.get(He);Ue.verticalTextBox={x1:We.x1,y1:We.y1,x2:We.x2,y2:We.y2,padding:We.padding,projectedAnchorX:We.projectedAnchorX,projectedAnchorY:We.projectedAnchorY,projectedAnchorZ:We.projectedAnchorZ,tileAnchorX:We.tileAnchorX,tileAnchorY:We.tileAnchorY},Ue.verticalTextFeatureIndex=We.featureIndex;break}for(let He=Te;He<Ce;He++){const We=y.get(He);Ue.iconBox={x1:We.x1,y1:We.y1,x2:We.x2,y2:We.y2,padding:We.padding,projectedAnchorX:We.projectedAnchorX,projectedAnchorY:We.projectedAnchorY,projectedAnchorZ:We.projectedAnchorZ,tileAnchorX:We.tileAnchorX,tileAnchorY:We.tileAnchorY},Ue.iconFeatureIndex=We.featureIndex;break}for(let He=$e;He<De;He++){const We=y.get(He);Ue.verticalIconBox={x1:We.x1,y1:We.y1,x2:We.x2,y2:We.y2,padding:We.padding,projectedAnchorX:We.projectedAnchorX,projectedAnchorY:We.projectedAnchorY,projectedAnchorZ:We.projectedAnchorZ,tileAnchorX:We.tileAnchorX,tileAnchorY:We.tileAnchorY},Ue.verticalIconFeatureIndex=We.featureIndex;break}return Ue}deserializeCollisionBoxes(y){this.collisionArrays=[];for(let I=0;I<this.symbolInstances.length;I++){const Q=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(y,Q.textBoxStartIndex,Q.textBoxEndIndex,Q.verticalTextBoxStartIndex,Q.verticalTextBoxEndIndex,Q.iconBoxStartIndex,Q.iconBoxEndIndex,Q.verticalIconBoxStartIndex,Q.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(y,I){const Q=y.placedSymbolArray.get(I),ne=Q.vertexStartIndex+4*Q.numGlyphs;for(let _e=Q.vertexStartIndex;_e<ne;_e+=4)y.indexArray.emplaceBack(_e,_e+1,_e+2),y.indexArray.emplaceBack(_e+1,_e+2,_e+3)}getSortedSymbolIndexes(y){if(this.sortedAngle===y&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const I=Math.sin(y),Q=Math.cos(y),ne=[],_e=[],Te=[];for(let Ce=0;Ce<this.symbolInstances.length;++Ce){Te.push(Ce);const $e=this.symbolInstances.get(Ce);ne.push(0|Math.round(I*$e.tileAnchorX+Q*$e.tileAnchorY)),_e.push($e.featureIndex)}return Te.sort((Ce,$e)=>ne[Ce]-ne[$e]||_e[$e]-_e[Ce]),Te}addToSortKeyRanges(y,I){const Q=this.sortKeyRanges[this.sortKeyRanges.length-1];Q&&Q.sortKey===I?Q.symbolInstanceEnd=y+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:y,symbolInstanceEnd:y+1})}sortFeatures(y){if(this.sortFeaturesByY&&this.sortedAngle!==y&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(y),this.sortedAngle=y,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const I of this.symbolInstanceIndexes){const Q=this.symbolInstances.get(I);this.featureSortOrder.push(Q.featureIndex),[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach((ne,_e,Te)=>{ne>=0&&Te.indexOf(ne)===_e&&this.addIndicesForPlacedSymbol(this.text,ne)}),Q.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Q.verticalPlacedTextSymbolIndex),Q.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Q.placedIconSymbolIndex),Q.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Q.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}cr(Jl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Jl.MAX_GLYPHS=65535,Jl.addDynamicAttributes=Vd;const qg=new Rn({"symbol-placement":new Ht(mn.layout_symbol["symbol-placement"]),"symbol-spacing":new Ht(mn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ht(mn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new an(mn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ht(mn.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ht(mn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ht(mn.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ht(mn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ht(mn.layout_symbol["icon-rotation-alignment"]),"icon-size":new an(mn.layout_symbol["icon-size"]),"icon-text-fit":new Ht(mn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ht(mn.layout_symbol["icon-text-fit-padding"]),"icon-image":new an(mn.layout_symbol["icon-image"]),"icon-rotate":new an(mn.layout_symbol["icon-rotate"]),"icon-padding":new Ht(mn.layout_symbol["icon-padding"]),"icon-keep-upright":new Ht(mn.layout_symbol["icon-keep-upright"]),"icon-offset":new an(mn.layout_symbol["icon-offset"]),"icon-anchor":new an(mn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ht(mn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ht(mn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ht(mn.layout_symbol["text-rotation-alignment"]),"text-field":new an(mn.layout_symbol["text-field"]),"text-font":new an(mn.layout_symbol["text-font"]),"text-size":new an(mn.layout_symbol["text-size"]),"text-max-width":new an(mn.layout_symbol["text-max-width"]),"text-line-height":new an(mn.layout_symbol["text-line-height"]),"text-letter-spacing":new an(mn.layout_symbol["text-letter-spacing"]),"text-justify":new an(mn.layout_symbol["text-justify"]),"text-radial-offset":new an(mn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ht(mn.layout_symbol["text-variable-anchor"]),"text-anchor":new an(mn.layout_symbol["text-anchor"]),"text-max-angle":new Ht(mn.layout_symbol["text-max-angle"]),"text-writing-mode":new Ht(mn.layout_symbol["text-writing-mode"]),"text-rotate":new an(mn.layout_symbol["text-rotate"]),"text-padding":new Ht(mn.layout_symbol["text-padding"]),"text-keep-upright":new Ht(mn.layout_symbol["text-keep-upright"]),"text-transform":new an(mn.layout_symbol["text-transform"]),"text-offset":new an(mn.layout_symbol["text-offset"]),"text-allow-overlap":new Ht(mn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ht(mn.layout_symbol["text-ignore-placement"]),"text-optional":new Ht(mn.layout_symbol["text-optional"])});var zp={paint:new Rn({"icon-opacity":new an(mn.paint_symbol["icon-opacity"]),"icon-color":new an(mn.paint_symbol["icon-color"]),"icon-halo-color":new an(mn.paint_symbol["icon-halo-color"]),"icon-halo-width":new an(mn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new an(mn.paint_symbol["icon-halo-blur"]),"icon-translate":new Ht(mn.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ht(mn.paint_symbol["icon-translate-anchor"]),"text-opacity":new an(mn.paint_symbol["text-opacity"]),"text-color":new an(mn.paint_symbol["text-color"],{runtimeType:Po,getOverride:$=>$.textColor,hasOverride:$=>!!$.textColor}),"text-halo-color":new an(mn.paint_symbol["text-halo-color"]),"text-halo-width":new an(mn.paint_symbol["text-halo-width"]),"text-halo-blur":new an(mn.paint_symbol["text-halo-blur"]),"text-translate":new Ht(mn.paint_symbol["text-translate"]),"text-translate-anchor":new Ht(mn.paint_symbol["text-translate-anchor"])}),layout:qg};class T_{constructor(y){this.type=y.property.overrides?y.property.overrides.runtimeType:ca,this.defaultValue=y}evaluate(y){if(y.formattedSection){const I=this.defaultValue.property.overrides;if(I&&I.hasOverride(y.formattedSection))return I.getOverride(y.formattedSection)}return y.feature&&y.featureState?this.defaultValue.evaluate(y.feature,y.featureState):this.defaultValue.property.specification.default}eachChild(y){this.defaultValue.isConstant()||y(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}cr(T_,"FormatSectionOverride",{omit:["defaultValue"]});class Gd extends Ui{constructor(y){super(y,zp)}recalculate(y,I){super.recalculate(y,I),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const Q=this.layout.get("text-writing-mode");if(Q){const ne=[];for(const _e of Q)ne.indexOf(_e)<0&&ne.push(_e);this.layout._values["text-writing-mode"]=ne}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(y,I,Q,ne){const _e=this.layout.get(y).evaluate(I,{},Q,ne),Te=this._unevaluatedLayout._values[y];return Te.isDataDriven()||Ol(Te.value)||!_e?_e:function(Ce,$e){return $e.replace(/{([^{}]+)}/g,(De,Ue)=>Ue in Ce?String(Ce[Ue]):"")}(I.properties,_e)}createBucket(y){return new Jl(y)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const y of zp.paint.overridableProperties){if(!Gd.hasPaintOverride(this.layout,y))continue;const I=this.paint.get(y),Q=new T_(I),ne=new Ec(Q,I.property.specification);let _e=null;_e=I.value.kind==="constant"||I.value.kind==="source"?new Tc("source",ne):new qs("composite",ne,I.value.zoomStops,I.value._interpolationType),this.paint._values[y]=new Vt(I.property,_e,I.parameters)}}_handleOverridablePaintPropertyUpdate(y,I,Q){return!(!this.layout||I.isDataDriven()||Q.isDataDriven())&&Gd.hasPaintOverride(this.layout,y)}static hasPaintOverride(y,I){const Q=y.get("text-field"),ne=zp.paint.properties[I];let _e=!1;const Te=Ce=>{for(const $e of Ce)if(ne.overrides&&ne.overrides.hasOverride($e))return void(_e=!0)};if(Q.value.kind==="constant"&&Q.value.value instanceof oo)Te(Q.value.value.sections);else if(Q.value.kind==="source"){const Ce=De=>{_e||(De instanceof Ms&&Pi(De.value)===ua?Te(De.value.sections):De instanceof Os?Te(De.sections):De.eachChild(Ce))},$e=Q.value;$e._styleExpression&&Ce($e._styleExpression.expression)}return _e}getProgramConfiguration(y){return new fs(this,y)}}var Hg={paint:new Rn({"background-color":new Ht(mn.paint_background["background-color"]),"background-pattern":new Hn(mn.paint_background["background-pattern"]),"background-opacity":new Ht(mn.paint_background["background-opacity"])})},Wg={paint:new Rn({"raster-opacity":new Ht(mn.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ht(mn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ht(mn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ht(mn.paint_raster["raster-brightness-max"]),"raster-saturation":new Ht(mn.paint_raster["raster-saturation"]),"raster-contrast":new Ht(mn.paint_raster["raster-contrast"]),"raster-resampling":new Ht(mn.paint_raster["raster-resampling"]),"raster-fade-duration":new Ht(mn.paint_raster["raster-fade-duration"])})};class Zg extends Ui{constructor(y){super(y,{}),this.implementation=y}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(y){this.implementation.onAdd&&this.implementation.onAdd(y,y.painter.context.gl)}onRemove(y){this.implementation.onRemove&&this.implementation.onRemove(y,y.painter.context.gl)}}var Xg={paint:new Rn({"sky-type":new Ht(mn.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ht(mn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ht(mn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ht(mn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ht(mn.paint_sky["sky-gradient-radius"]),"sky-gradient":new dn(mn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ht(mn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ht(mn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ht(mn.paint_sky["sky-opacity"])})};function Dp($,y,I){const Q=[0,0,1],ne=of([]);return sf(ne,ne,I?-Pe($)+Math.PI:Pe($)),af(ne,ne,-Pe(y)),tf(Q,Q,ne),ko(Q,Q)}const Kg={circle:class extends Ui{constructor($){super($,em)}createBucket($){return new Nt($)}queryRadius($){const y=$;return Vi("circle-radius",this,y)+Vi("circle-stroke-width",this,y)+co(this.paint.get("circle-translate"))}queryIntersectsFeature($,y,I,Q,ne,_e,Te,Ce){const $e=fd(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_e.angle,$.pixelToTileUnitsFactor),De=this.paint.get("circle-radius").evaluate(y,I)+this.paint.get("circle-stroke-width").evaluate(y,I);return lf($,Q,_e,Te,Ce,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",$e,De)}getProgramIds(){return["circle"]}getProgramConfiguration($){return new fs(this,$)}},heatmap:class extends Ui{createBucket($){return new uf($)}constructor($){super($,sm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate($){$==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius($){return Vi("heatmap-radius",this,$)}queryIntersectsFeature($,y,I,Q,ne,_e,Te,Ce){const $e=this.paint.get("heatmap-radius").evaluate(y,I);return lf($,Q,_e,Te,Ce,!0,!0,new ye(0,0),$e)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration($){return new fs(this,$)}},hillshade:class extends Ui{constructor($){super($,lm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Ui{constructor($){super($,Am)}getProgramIds(){const $=this.paint.get("fill-pattern"),y=$&&$.constantOr(1),I=[y?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&I.push(y&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),I}getProgramConfiguration($){return new fs(this,$)}recalculate($,y){super.recalculate($,y);const I=this.paint._values["fill-outline-color"];I.value.kind==="constant"&&I.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket($){return new Td($)}queryRadius(){return co(this.paint.get("fill-translate"))}queryIntersectsFeature($,y,I,Q,ne,_e){return!$.queryGeometry.isAboveHorizon&&jn(_s($.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_e.angle,$.pixelToTileUnitsFactor),Q)}isTileClipped(){return!0}},"fill-extrusion":class extends Ui{constructor($){super($,Bm)}createBucket($){return new Ch($)}queryRadius(){return co(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration($){return new fs(this,$)}queryIntersectsFeature($,y,I,Q,ne,_e,Te,Ce,$e){const De=fd(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_e.angle,$.pixelToTileUnitsFactor),Ue=this.paint.get("fill-extrusion-height").evaluate(y,I),He=this.paint.get("fill-extrusion-base").evaluate(y,I),We=[0,0],et=Ce&&_e.elevation,it=_e.elevation?_e.elevation.exaggeration():1,_t=$.tile.getBucket(this);if(et&&_t instanceof Ch){const qt=_t.centroidVertexArray,Ft=$e+1;if(Ft<qt.length){const Gt=qt.get(Ft);We[0]=Gt.a_centroid_pos0,We[1]=Gt.a_centroid_pos1}}if(We[0]===0&&We[1]===1)return!1;_e.projection.name==="globe"&&(Q=Cf([Q],[new ye(0,0),new ye(Ar,Ar)],$.tileID.canonical).map(qt=>qt.polygon).flat());const Et=function(qt,Ft,Gt,Jt,Wt,Tn,bn,Pn,Yn,kn,Ln){return qt.projection.name==="globe"?function(Un,Bn,Zn,Vn,or,Or,$r,yr,nr,Gr,Mr){const hr=[],mi=[],hi=Un.projection.upVectorScale(Mr,Un.center.lat,Un.worldSize).metersToTile,ki=[0,0,0,1],Nr=[0,0,0,1],Yr=(di,ui,Ei,Mi)=>{di[0]=ui,di[1]=Ei,di[2]=Mi,di[3]=1},gi=Sf();Zn>0&&(Zn+=gi),Vn+=gi;for(const di of Bn){const ui=[],Ei=[];for(const Mi of di){const no=Mi.x+or.x,Bo=Mi.y+or.y,Zr=Un.projection.projectTilePoint(no,Bo,Mr),zi=Un.projection.upVector(Mr,Mi.x,Mi.y);let go=Zn,ni=Vn;if($r){const Ii=Of(no,Bo,Zn,Vn,$r,yr,nr,Gr);go+=Ii.base,ni+=Ii.top}Zn!==0?Yr(ki,Zr.x+zi[0]*hi*go,Zr.y+zi[1]*hi*go,Zr.z+zi[2]*hi*go):Yr(ki,Zr.x,Zr.y,Zr.z),Yr(Nr,Zr.x+zi[0]*hi*ni,Zr.y+zi[1]*hi*ni,Zr.z+zi[2]*hi*ni),Wi(ki,ki,Or),Wi(Nr,Nr,Or),ui.push(Sd(ki)),Ei.push(Sd(Nr))}hr.push(ui),mi.push(Ei)}return[hr,mi]}(qt,Ft,Gt,Jt,Wt,Tn,bn,Pn,Yn,kn,Ln):bn?function(Un,Bn,Zn,Vn,or,Or,$r,yr,nr){const Gr=[],Mr=[],hr=[0,0,0,1];for(const mi of Un){const hi=[],ki=[];for(const Nr of mi){const Yr=Nr.x+Vn.x,gi=Nr.y+Vn.y,di=Of(Yr,gi,Bn,Zn,Or,$r,yr,nr);hr[0]=Yr,hr[1]=gi,hr[2]=di.base,hr[3]=1,Gc(hr,hr,or),hr[3]=Math.max(hr[3],1e-5);const ui=Sd([hr[0]/hr[3],hr[1]/hr[3],hr[2]/hr[3]]);hr[0]=Yr,hr[1]=gi,hr[2]=di.top,hr[3]=1,Gc(hr,hr,or),hr[3]=Math.max(hr[3],1e-5);const Ei=Sd([hr[0]/hr[3],hr[1]/hr[3],hr[2]/hr[3]]);hi.push(ui),ki.push(Ei)}Gr.push(hi),Mr.push(ki)}return[Gr,Mr]}(Ft,Gt,Jt,Wt,Tn,bn,Pn,Yn,kn):function(Un,Bn,Zn,Vn,or){const Or=[],$r=[],yr=or[8]*Bn,nr=or[9]*Bn,Gr=or[10]*Bn,Mr=or[11]*Bn,hr=or[8]*Zn,mi=or[9]*Zn,hi=or[10]*Zn,ki=or[11]*Zn;for(const Nr of Un){const Yr=[],gi=[];for(const di of Nr){const ui=di.x+Vn.x,Ei=di.y+Vn.y,Mi=or[0]*ui+or[4]*Ei+or[12],no=or[1]*ui+or[5]*Ei+or[13],Bo=or[2]*ui+or[6]*Ei+or[14],Zr=or[3]*ui+or[7]*Ei+or[15],zi=Mi+yr,go=no+nr,ni=Bo+Gr,Ii=Math.max(Zr+Mr,1e-5),Co=Mi+hr,Si=no+mi,Fi=Bo+hi,ro=Math.max(Zr+ki,1e-5),Qi=new ye(zi/Ii,go/Ii);Qi.z=ni/Ii,Yr.push(Qi);const ho=new ye(Co/ro,Si/ro);ho.z=Fi/ro,gi.push(ho)}Or.push(Yr),$r.push(gi)}return[Or,$r]}(Ft,Gt,Jt,Wt,Tn)}(_e,Q,He,Ue,De,Te,et?Ce:null,We,it,_e.center.lat,$.tileID.canonical),Bt=$.queryGeometry;return function(qt,Ft,Gt){let Jt=1/0;jn(Gt,Ft)&&(Jt=Pf(Gt,Ft[0]));for(let Wt=0;Wt<Ft.length;Wt++){const Tn=Ft[Wt],bn=qt[Wt];for(let Pn=0;Pn<Tn.length-1;Pn++){const Yn=Tn[Pn],kn=[Yn,Tn[Pn+1],bn[Pn+1],bn[Pn],Yn];ln(Gt,kn)&&(Jt=Math.min(Jt,Pf(Gt,kn)))}}return Jt!==1/0&&Jt}(Et[0],Et[1],Bt.isPointQuery()?Bt.screenBounds:Bt.screenGeometry)}},line:class extends Ui{constructor($){super($,Rf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate($){if($==="line-gradient"){const y=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=y._styleExpression&&y._styleExpression.expression instanceof hc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate($,y){super.recalculate($,y),this.paint._values["line-floorwidth"]=$f.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)}createBucket($){return new Cd($)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration($){return new fs(this,$)}queryRadius($){const y=$,I=zf(Vi("line-width",this,y),Vi("line-gap-width",this,y)),Q=Vi("line-offset",this,y);return I/2+Math.abs(Q)+co(this.paint.get("line-translate"))}queryIntersectsFeature($,y,I,Q,ne,_e){if($.queryGeometry.isAboveHorizon)return!1;const Te=_s($.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_e.angle,$.pixelToTileUnitsFactor),Ce=$.pixelToTileUnitsFactor/2*zf(this.paint.get("line-width").evaluate(y,I),this.paint.get("line-gap-width").evaluate(y,I)),$e=this.paint.get("line-offset").evaluate(y,I);return $e&&(Q=function(De,Ue){const He=[],We=new ye(0,0);for(let et=0;et<De.length;et++){const it=De[et],_t=[];for(let Et=0;Et<it.length;Et++){const Bt=it[Et-1],qt=it[Et],Ft=it[Et+1],Gt=Et===0?We:qt.sub(Bt)._unit()._perp(),Jt=Et===it.length-1?We:Ft.sub(qt)._unit()._perp(),Wt=Gt._add(Jt)._unit();Wt._mult(1/(Wt.x*Jt.x+Wt.y*Jt.y)),_t.push(Wt._mult(Ue)._add(qt))}He.push(_t)}return He}(Q,$e*$.pixelToTileUnitsFactor)),function(De,Ue,He){for(let We=0;We<Ue.length;We++){const et=Ue[We];if(De.length>=3){for(let it=0;it<et.length;it++)if(si(De,et[it]))return!0}if(ur(De,et,He))return!0}return!1}(Te,Q,Ce)}isTileClipped(){return!0}},symbol:Gd,background:class extends Ui{constructor($){super($,Hg)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ui{constructor($){super($,Wg)}getProgramIds(){return["raster"]}},sky:class extends Ui{constructor($){super($,Xg),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate($){$==="sky-gradient"?this._updateColorRamp():$!=="sky-atmosphere-sun"&&$!=="sky-atmosphere-halo-color"&&$!=="sky-atmosphere-color"&&$!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=hp({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture($){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const y=$.style.light.properties.get("position");return this._lightPosition.azimuthal!==y.azimuthal||this._lightPosition.polar!==y.polar}return!1}getCenter($,y){if(this.paint.get("sky-type")==="atmosphere"){const Q=this.paint.get("sky-atmosphere-sun"),ne=!Q,_e=$.style.light,Te=_e.properties.get("position");return ne&&_e.properties.get("anchor")==="viewport"&&zt("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),ne?Dp(Te.azimuthal,90-Te.polar,y):Dp(Q[0],90-Q[1],y)}const I=this.paint.get("sky-gradient-center");return Dp(I[0],90-I[1],y)}is3D(){return!1}isSky(){return!0}markSkyboxValid($){this._skyboxInvalidated=!1,this._lightPosition=$.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const $=this.paint.get("sky-type");return $==="atmosphere"?["skyboxCapture","skybox"]:$==="gradient"?["skyboxGradient"]:null}}};class Vh{constructor(y,I,Q,ne){this.context=y,this.format=Q,this.texture=y.gl.createTexture(),this.update(I,ne)}update(y,I,Q){const{width:ne,height:_e}=y,{context:Te}=this,{gl:Ce}=Te,{HTMLImageElement:$e,HTMLCanvasElement:De,HTMLVideoElement:Ue,ImageData:He,ImageBitmap:We}=xe;if(Ce.bindTexture(Ce.TEXTURE_2D,this.texture),Te.pixelStoreUnpackFlipY.set(!1),Te.pixelStoreUnpack.set(1),Te.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ce.RGBA&&(!I||I.premultiply!==!1)),Q||this.size&&this.size[0]===ne&&this.size[1]===_e){const{x:et,y:it}=Q||{x:0,y:0};y instanceof $e||y instanceof De||y instanceof Ue||y instanceof He||We&&y instanceof We?Ce.texSubImage2D(Ce.TEXTURE_2D,0,et,it,Ce.RGBA,Ce.UNSIGNED_BYTE,y):Ce.texSubImage2D(Ce.TEXTURE_2D,0,et,it,ne,_e,Ce.RGBA,Ce.UNSIGNED_BYTE,y.data)}else this.size=[ne,_e],y instanceof $e||y instanceof De||y instanceof Ue||y instanceof He||We&&y instanceof We?Ce.texImage2D(Ce.TEXTURE_2D,0,this.format,this.format,Ce.UNSIGNED_BYTE,y):Ce.texImage2D(Ce.TEXTURE_2D,0,this.format,ne,_e,0,this.format,Ce.UNSIGNED_BYTE,y.data);this.useMipmap=Boolean(I&&I.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&Ce.generateMipmap(Ce.TEXTURE_2D)}bind(y,I){const{context:Q}=this,{gl:ne}=Q;ne.bindTexture(ne.TEXTURE_2D,this.texture),y!==this.filter&&(ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MAG_FILTER,y),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_MIN_FILTER,this.useMipmap?y===ne.NEAREST?ne.NEAREST_MIPMAP_NEAREST:ne.LINEAR_MIPMAP_NEAREST:y),this.filter=y),I!==this.wrap&&(ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_S,I),ne.texParameteri(ne.TEXTURE_2D,ne.TEXTURE_WRAP_T,I),this.wrap=I)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:y}=this.context;y.deleteTexture(this.texture),this.texture=null}}class Lp{constructor(y,I){this.width=y,this.height=I,this.nextRow=0,this.image=new al({width:y,height:I}),this.positions={},this.uploaded=!1}getDash(y,I){const Q=this.getKey(y,I);return this.positions[Q]}trim(){const y=this.width,I=this.height=rt(this.nextRow);this.image.resize({width:y,height:I})}getKey(y,I){return y.join(",")+I}getDashRanges(y,I,Q){const ne=[];let _e=y.length%2==1?-y[y.length-1]*Q:0,Te=y[0]*Q,Ce=!0;ne.push({left:_e,right:Te,isDash:Ce,zeroLength:y[0]===0});let $e=y[0];for(let De=1;De<y.length;De++){Ce=!Ce;const Ue=y[De];_e=$e*Q,$e+=Ue,Te=$e*Q,ne.push({left:_e,right:Te,isDash:Ce,zeroLength:Ue===0})}return ne}addRoundDash(y,I,Q){const ne=I/2;for(let _e=-Q;_e<=Q;_e++){const Te=this.width*(this.nextRow+Q+_e);let Ce=0,$e=y[Ce];for(let De=0;De<this.width;De++){De/$e.right>1&&($e=y[++Ce]);const Ue=Math.abs(De-$e.left),He=Math.abs(De-$e.right),We=Math.min(Ue,He);let et;const it=_e/Q*(ne+1);if($e.isDash){const _t=ne-Math.abs(it);et=Math.sqrt(We*We+_t*_t)}else et=ne-Math.sqrt(We*We+it*it);this.image.data[Te+De]=Math.max(0,Math.min(255,et+128))}}}addRegularDash(y,I){for(let $e=y.length-1;$e>=0;--$e){const De=y[$e],Ue=y[$e+1];De.zeroLength?y.splice($e,1):Ue&&Ue.isDash===De.isDash&&(Ue.left=De.left,y.splice($e,1))}const Q=y[0],ne=y[y.length-1];Q.isDash===ne.isDash&&(Q.left=ne.left-this.width,ne.right=Q.right+this.width);const _e=this.width*this.nextRow;let Te=0,Ce=y[Te];for(let $e=0;$e<this.width;$e++){$e/Ce.right>1&&(Ce=y[++Te]);const De=Math.abs($e-Ce.left),Ue=Math.abs($e-Ce.right),He=Math.min(De,Ue);this.image.data[_e+$e]=Math.max(0,Math.min(255,(Ce.isDash?He:-He)+I+128))}}addDash(y,I){const Q=this.getKey(y,I);if(this.positions[Q])return this.positions[Q];const ne=I==="round",_e=ne?7:0,Te=2*_e+1;if(this.nextRow+Te>this.height)return zt("LineAtlas out of space"),null;y.length===0&&y.push(1);let Ce=0;for(let Ue=0;Ue<y.length;Ue++)y[Ue]<0&&(zt("Negative value is found in line dasharray, replacing values with 0"),y[Ue]=0),Ce+=y[Ue];if(Ce!==0){const Ue=this.width/Ce,He=this.getDashRanges(y,this.width,Ue);ne?this.addRoundDash(He,Ue,_e):this.addRegularDash(He,I==="square"?.5*Ue:0)}const $e=this.nextRow+_e;this.nextRow+=Te;const De={tl:[$e,_e],br:[Ce,0]};return this.positions[Q]=De,De}}cr(Lp,"LineAtlas");class Yg{constructor(y){this._callback=y,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Jg{constructor(){this.tasks={},this.taskQueue=[],st(["process"],this),this.invoker=new Yg(this.process),this.nextId=0}add(y,I){const Q=this.nextId++,ne=function({type:_e,isSymbolTile:Te,zoom:Ce}){return Ce=Ce||0,_e==="message"?0:_e!=="maybePrepare"||Te?_e!=="parseTile"||Te?_e==="parseTile"&&Te?300-Ce:_e==="maybePrepare"&&Te?400-Ce:500:200-Ce:100-Ce}(I);if(ne===0){rn();try{y()}finally{}return{cancel:()=>{}}}return this.tasks[Q]={fn:y,metadata:I,priority:ne,id:Q},this.taskQueue.push(Q),this.invoker.trigger(),{cancel:()=>{delete this.tasks[Q]}}}process(){rn();try{if(this.taskQueue=this.taskQueue.filter(Q=>!!this.tasks[Q]),!this.taskQueue.length)return;const y=this.pick();if(y===null)return;const I=this.tasks[y];if(delete this.tasks[y],this.taskQueue.length&&this.invoker.trigger(),!I)return;I.fn()}finally{}}pick(){let y=null,I=1/0;for(let ne=0;ne<this.taskQueue.length;ne++){const _e=this.tasks[this.taskQueue[ne]];_e.priority<I&&(I=_e.priority,y=ne)}if(y===null)return null;const Q=this.taskQueue[y];return this.taskQueue.splice(y,1),Q}remove(){this.invoker.remove()}}class A_{constructor(y){this._stringToNumber={},this._numberToString=[];for(let I=0;I<y.length;I++){const Q=y[I];this._stringToNumber[Q]=I,this._numberToString[I]=Q}}encode(y){return this._stringToNumber[y]}decode(y){return this._numberToString[y]}}const Qg=["tile","layer","source","sourceLayer","state"];class k_{constructor(y,I,Q,ne,_e){this.type="Feature",this._vectorTileFeature=y,this._z=I,this._x=Q,this._y=ne,this.properties=y.properties,this.id=_e}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(y){this._geometry=y}toJSON(){const y={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(y.id=this.id);for(const I of Qg)this[I]!==void 0&&(y[I]=this[I]);return y}}const wa=32,vs=33,Ql=new Uint16Array(8184);for(let $=0;$<2046;$++){let y=$+2,I=0,Q=0,ne=0,_e=0,Te=0,Ce=0;for(1&y?ne=_e=Te=wa:I=Q=Ce=wa;(y>>=1)>1;){const De=I+ne>>1,Ue=Q+_e>>1;1&y?(ne=I,_e=Q,I=Te,Q=Ce):(I=ne,Q=_e,ne=Te,_e=Ce),Te=De,Ce=Ue}const $e=4*$;Ql[$e+0]=I,Ql[$e+1]=Q,Ql[$e+2]=ne,Ql[$e+3]=_e}const xs=new Uint16Array(2178),ec=new Uint8Array(1089),qd=new Uint16Array(1089);function S_($){return $===0?-.03125:$===32?.03125:0}var C_=Dn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const M_={type:2,extent:Ar,loadGeometry:()=>[[new ye(0,0),new ye(8193,0),new ye(8193,8193),new ye(0,8193),new ye(0,0)]]};class Bp{constructor(y,I,Q,ne,_e){this.tileID=y,this.uid=nt(),this.uses=0,this.tileSize=I,this.tileZoom=Q,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=_e,this.expiredRequestCount=0,this.state="loading",ne&&ne.transform&&(this.projection=ne.transform.projection)}registerFadeDuration(y){const I=y+this.timeAdded;I<$n.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Wc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(y,I,Q){if(this.unloadVectorData(),this.state="loaded",y){y.featureIndex&&(this.latestFeatureIndex=y.featureIndex,y.rawTileData?(this.latestRawTileData=y.rawTileData,this.latestFeatureIndex.rawTileData=y.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=y.collisionBoxArray,this.buckets=function(ne,_e){const Te={};if(!_e)return Te;for(const Ce of ne){const $e=Ce.layerIds.map(De=>_e.getLayer(De)).filter(Boolean);if($e.length!==0){Ce.layers=$e,Ce.stateDependentLayerIds&&(Ce.stateDependentLayers=Ce.stateDependentLayerIds.map(De=>$e.filter(Ue=>Ue.id===De)[0]));for(const De of $e)Te[De.id]=Ce}}return Te}(y.buckets,I.style),this.hasSymbolBuckets=!1;for(const ne in this.buckets){const _e=this.buckets[ne];if(_e instanceof Jl){if(this.hasSymbolBuckets=!0,!Q)break;_e.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const ne in this.buckets){const _e=this.buckets[ne];if(_e instanceof Jl&&_e.hasRTLText){this.hasRTLText=!0,At.isLoading()||At.isLoaded()||mt()!=="deferred"||Mt();break}}this.queryPadding=0;for(const ne in this.buckets){const _e=this.buckets[ne];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(ne).queryRadius(_e))}y.imageAtlas&&(this.imageAtlas=y.imageAtlas),y.glyphAtlasImage&&(this.glyphAtlasImage=y.glyphAtlasImage),y.lineAtlas&&(this.lineAtlas=y.lineAtlas)}else this.collisionBoxArray=new Go}unloadVectorData(){if(this.hasData()){for(const y in this.buckets)this.buckets[y].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(y){return this.buckets[y.id]}upload(y){for(const Q in this.buckets){const ne=this.buckets[Q];ne.uploadPending()&&ne.upload(y)}const I=y.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Vh(y,this.imageAtlas.image,I.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Vh(y,this.glyphAtlasImage,I.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Vh(y,this.lineAtlas.image,I.ALPHA),this.lineAtlas.uploaded=!0)}prepare(y){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(y,this.imageAtlasTexture)}queryRenderedFeatures(y,I,Q,ne,_e,Te,Ce,$e){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:ne,pixelPosMatrix:Ce,transform:Te,params:_e,tileTransform:this.tileTransform},y,I,Q):{}}querySourceFeatures(y,I){const Q=this.latestFeatureIndex;if(!Q||!Q.rawTileData)return;const ne=Q.loadVTLayers(),_e=I?I.sourceLayer:"",Te=ne._geojsonTileLayer||ne[_e];if(!Te)return;const Ce=Xs(I&&I.filter),{z:$e,x:De,y:Ue}=this.tileID.canonical,He={z:$e,x:De,y:Ue};for(let We=0;We<Te.length;We++){const et=Te.feature(We);if(Ce.needGeometry){const Et=Ve(et,!0);if(!Ce.filter(new Tt(this.tileID.overscaledZ),Et,this.tileID.canonical))continue}else if(!Ce.filter(new Tt(this.tileID.overscaledZ),et))continue;const it=Q.getId(et,_e),_t=new k_(et,$e,De,Ue,it);_t.tile=He,y.push(_t)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(y){const I=this.expirationTime;if(y.cacheControl){const Q=on(y.cacheControl);Q["max-age"]&&(this.expirationTime=Date.now()+1e3*Q["max-age"])}else y.expires&&(this.expirationTime=new Date(y.expires).getTime());if(this.expirationTime){const Q=Date.now();let ne=!1;if(this.expirationTime>Q)ne=!1;else if(I)if(this.expirationTime<I)ne=!0;else{const _e=this.expirationTime-I;_e?this.expirationTime=Q+Math.max(_e,3e4):ne=!0}else ne=!0;ne?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(y,I){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(y).length===0||!I)return;const Q=this.latestFeatureIndex.loadVTLayers(),ne=I.style.listImages();for(const _e in this.buckets){if(!I.style.hasLayer(_e))continue;const Te=this.buckets[_e],Ce=Te.layers[0].sourceLayer||"_geojsonTileLayer",$e=Q[Ce],De=y[Ce];if(!$e||!De||Object.keys(De).length===0)continue;if(Te.update(De,$e,ne,this.imageAtlas&&this.imageAtlas.patternPositions||{}),Te instanceof Cd||Te instanceof Td){const He=I.style._getSourceCache(Te.layers[0].source);I._terrain&&I._terrain.enabled&&He&&Te.programConfigurations.needsUpload&&I._terrain._clearRenderCacheForTile(He.id,this.tileID)}const Ue=I&&I.style&&I.style.getLayer(_e);Ue&&(this.queryPadding=Math.max(this.queryPadding,Ue.queryRadius(Te)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$n.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(y){this.symbolFadeHoldUntil=$n.now()+y}setTexture(y,I){const Q=I.context,ne=Q.gl;this.texture=I.getTileTexture(y.width),this.texture?this.texture.update(y,{useMipmap:!0}):(this.texture=new Vh(Q,y,ne.RGBA,{useMipmap:!0}),this.texture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),Q.extTextureFilterAnisotropic&&ne.texParameterf(ne.TEXTURE_2D,Q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Q.extTextureFilterAnisotropicMax))}setDependencies(y,I){const Q={};for(const ne of I)Q[ne]=!0;this.dependencies[y]=Q}hasDependency(y,I){for(const Q of y){const ne=this.dependencies[Q];if(ne){for(const _e of I)if(ne[_e])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(y,I){if(!I||I.name==="mercator"||this._tileDebugBuffer)return;const Q=yt(M_,this.tileID.canonical,this.tileTransform)[0],ne=new er,_e=new mo;for(let Te=0;Te<Q.length;Te++){const{x:Ce,y:$e}=Q[Te];ne.emplaceBack(Ce,$e),_e.emplaceBack(Te)}_e.emplaceBack(0),this._tileDebugIndexBuffer=y.createIndexBuffer(_e),this._tileDebugBuffer=y.createVertexBuffer(ne,zh.members),this._tileDebugSegments=Li.simpleSegment(0,0,ne.length,_e.length)}_makeTileBoundsBuffers(y,I){if(this._tileBoundsBuffer||!I||I.name==="mercator")return;const Q=yt(M_,this.tileID.canonical,this.tileTransform)[0];let ne,_e;if(this.isRaster){const Te=function(Ce,$e){const De=Wc(Ce,$e),Ue=Math.pow(2,Ce.z);for(let Et=0;Et<vs;Et++)for(let Bt=0;Bt<vs;Bt++){const qt=qo((Ce.x+(Bt+S_(Bt))/wa)/Ue),Ft=Yi((Ce.y+(Et+S_(Et))/wa)/Ue),Gt=$e.project(qt,Ft),Jt=Et*vs+Bt;xs[2*Jt+0]=Math.round((Gt.x*De.scale-De.x)*Ar),xs[2*Jt+1]=Math.round((Gt.y*De.scale-De.y)*Ar)}ec.fill(0),qd.fill(0);for(let Et=2045;Et>=0;Et--){const Bt=4*Et,qt=Ql[Bt+0],Ft=Ql[Bt+1],Gt=Ql[Bt+2],Jt=Ql[Bt+3],Wt=qt+Gt>>1,Tn=Ft+Jt>>1,bn=Wt+Tn-Ft,Pn=Tn+qt-Wt,Yn=Ft*vs+qt,kn=Jt*vs+Gt,Ln=Tn*vs+Wt,Un=Math.hypot((xs[2*Yn+0]+xs[2*kn+0])/2-xs[2*Ln+0],(xs[2*Yn+1]+xs[2*kn+1])/2-xs[2*Ln+1])>=16;if(ec[Ln]=ec[Ln]||(Un?1:0),Et<1022){const Bn=(Ft+Pn>>1)*vs+(qt+bn>>1),Zn=(Jt+Pn>>1)*vs+(Gt+bn>>1);ec[Ln]=ec[Ln]||ec[Bn]||ec[Zn]}}const He=new gr,We=new Rr;let et=0;function it(Et,Bt){const qt=Bt*vs+Et;return qd[qt]===0&&(He.emplaceBack(xs[2*qt+0],xs[2*qt+1],Et*Ar/wa,Bt*Ar/wa),qd[qt]=++et),qd[qt]-1}function _t(Et,Bt,qt,Ft,Gt,Jt){const Wt=Et+qt>>1,Tn=Bt+Ft>>1;if(Math.abs(Et-Gt)+Math.abs(Bt-Jt)>1&&ec[Tn*vs+Wt])_t(Gt,Jt,Et,Bt,Wt,Tn),_t(qt,Ft,Gt,Jt,Wt,Tn);else{const bn=it(Et,Bt),Pn=it(qt,Ft),Yn=it(Gt,Jt);We.emplaceBack(bn,Pn,Yn)}}return _t(0,0,wa,wa,wa,0),_t(wa,wa,0,0,0,wa),{vertices:He,indices:We}}(this.tileID.canonical,I);ne=Te.vertices,_e=Te.indices}else{ne=new gr,_e=new Rr;for(const{x:Ce,y:$e}of Q)ne.emplaceBack(Ce,$e,0,0);const Te=vd(ne.int16,void 0,4);for(let Ce=0;Ce<Te.length;Ce+=3)_e.emplaceBack(Te[Ce],Te[Ce+1],Te[Ce+2])}this._tileBoundsBuffer=y.createVertexBuffer(ne,C_.members),this._tileBoundsIndexBuffer=y.createIndexBuffer(_e),this._tileBoundsSegments=Li.simpleSegment(0,0,ne.length,_e.length)}_makeGlobeTileDebugBuffers(y,I){const Q=I.projection;if(!Q||Q.name!=="globe"||I.freezeTileCoverage)return;const ne=this.tileID.canonical,_e=Lh(d_(ne,I)),Te=Bh(I.zoom);let Ce;Te>0&&(Ce=ep(new Float64Array(16),I.globeMatrix));const $e=(ne.x+.5)/(1<<ne.z)-va(I.center.lng);let De=0;$e>.5?De=-1:$e<-.5&&(De=1),this._makeGlobeTileDebugBorderBuffer(y,ne,I,_e,Ce,Te,De),this._makeGlobeTileDebugTextBuffer(y,ne,I,_e,Ce,Te,De)}_globePoint(y,I,Q,ne,_e,Te,Ce,$e){let De=Dh(y,I,Q);if(Te){const Ue=1<<Q.z,He=[((y/Ar+Q.x)/Ue+$e)*ne,(I/Ar+Q.y)/Ue*ne,0];Wi(He,He,Te),De=Ka(De,He,Ce)}return Wi(De,De,_e)}_makeGlobeTileDebugBorderBuffer(y,I,Q,ne,_e,Te,Ce){const $e=new er,De=new mo,Ue=new dr,He=(et,it,_t,Et,Bt)=>{const qt=(_t-et)/(Bt-1),Ft=(Et-it)/(Bt-1),Gt=$e.length;for(let Jt=0;Jt<Bt;Jt++){const Wt=et+Jt*qt,Tn=it+Jt*Ft;$e.emplaceBack(Wt,Tn);const bn=this._globePoint(Wt,Tn,I,Q.worldSize,ne,_e,Te,Ce);Ue.emplaceBack(bn[0],bn[1],bn[2]),De.emplaceBack(Gt+Jt)}},We=Ar;He(0,0,We,0,16),He(We,0,We,We,16),He(We,We,0,We,16),He(0,We,0,0,16),this._tileDebugIndexBuffer=y.createIndexBuffer(De),this._tileDebugBuffer=y.createVertexBuffer($e,zh.members),this._globeTileDebugBorderBuffer=y.createVertexBuffer(Ue,u_.members),this._tileDebugSegments=Li.simpleSegment(0,0,$e.length,De.length)}_makeGlobeTileDebugTextBuffer(y,I,Q,ne,_e,Te,Ce){const $e=new er,De=new Rr,Ue=new dr,He=25;De.reserve(32),$e.reserve(He),Ue.reserve(He);const We=(et,it)=>He*et+it;for(let et=0;et<He;et++){const it=2048*et;for(let _t=0;_t<He;_t++){const Et=2048*_t;$e.emplaceBack(Et,it);const Bt=this._globePoint(Et,it,I,Q.worldSize,ne,_e,Te,Ce);Ue.emplaceBack(Bt[0],Bt[1],Bt[2])}}for(let et=0;et<4;et++)for(let it=0;it<4;it++){const _t=We(et,it),Et=We(et,it+1),Bt=We(et+1,it),qt=We(et+1,it+1);De.emplaceBack(_t,Et,Bt),De.emplaceBack(Bt,Et,qt)}this._tileDebugTextIndexBuffer=y.createIndexBuffer(De),this._tileDebugTextBuffer=y.createVertexBuffer($e,zh.members),this._globeTileDebugTextBuffer=y.createVertexBuffer(Ue,u_.members),this._tileDebugTextSegments=Li.simpleSegment(0,0,He,32)}}class ey{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(y,I,Q){const ne=String(I);if(this.stateChanges[y]=this.stateChanges[y]||{},this.stateChanges[y][ne]=this.stateChanges[y][ne]||{},bt(this.stateChanges[y][ne],Q),this.deletedStates[y]===null){this.deletedStates[y]={};for(const _e in this.state[y])_e!==ne&&(this.deletedStates[y][_e]=null)}else if(this.deletedStates[y]&&this.deletedStates[y][ne]===null){this.deletedStates[y][ne]={};for(const _e in this.state[y][ne])Q[_e]||(this.deletedStates[y][ne][_e]=null)}else for(const _e in Q)this.deletedStates[y]&&this.deletedStates[y][ne]&&this.deletedStates[y][ne][_e]===null&&delete this.deletedStates[y][ne][_e]}removeFeatureState(y,I,Q){if(this.deletedStates[y]===null)return;const ne=String(I);if(this.deletedStates[y]=this.deletedStates[y]||{},Q&&I!==void 0)this.deletedStates[y][ne]!==null&&(this.deletedStates[y][ne]=this.deletedStates[y][ne]||{},this.deletedStates[y][ne][Q]=null);else if(I!==void 0)if(this.stateChanges[y]&&this.stateChanges[y][ne])for(Q in this.deletedStates[y][ne]={},this.stateChanges[y][ne])this.deletedStates[y][ne][Q]=null;else this.deletedStates[y][ne]=null;else this.deletedStates[y]=null}getState(y,I){const Q=String(I),ne=bt({},(this.state[y]||{})[Q],(this.stateChanges[y]||{})[Q]);if(this.deletedStates[y]===null)return{};if(this.deletedStates[y]){const _e=this.deletedStates[y][I];if(_e===null)return{};for(const Te in _e)delete ne[Te]}return ne}initializeTileState(y,I){y.setFeatureState(this.state,I)}coalesceChanges(y,I){const Q={};for(const ne in this.stateChanges){this.state[ne]=this.state[ne]||{};const _e={};for(const Te in this.stateChanges[ne])this.state[ne][Te]||(this.state[ne][Te]={}),bt(this.state[ne][Te],this.stateChanges[ne][Te]),_e[Te]=this.state[ne][Te];Q[ne]=_e}for(const ne in this.deletedStates){this.state[ne]=this.state[ne]||{};const _e={};if(this.deletedStates[ne]===null)for(const Te in this.state[ne])_e[Te]={},this.state[ne][Te]={};else for(const Te in this.deletedStates[ne]){if(this.deletedStates[ne][Te]===null)this.state[ne][Te]={};else for(const Ce of Object.keys(this.deletedStates[ne][Te]))delete this.state[ne][Te][Ce];_e[Te]=this.state[ne][Te]}Q[ne]=Q[ne]||{},bt(Q[ne],_e)}if(this.stateChanges={},this.deletedStates={},Object.keys(Q).length!==0)for(const ne in y)y[ne].setFeatureState(Q,I)}}class I_{constructor(y){this.size=y,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(y,I){const Q=this.toIdx(y,I);return{min:this.minimums[Q],max:this.maximums[Q]}}isLeaf(y,I){return this.leaves[this.toIdx(y,I)]}toIdx(y,I){return I*this.size+y}}function P_($,y,I,Q){let ne=0,_e=Number.MAX_VALUE;for(let Te=0;Te<3;Te++)if(Math.abs(Q[Te])<1e-15){if(I[Te]<$[Te]||I[Te]>y[Te])return null}else{const Ce=1/Q[Te];let $e=($[Te]-I[Te])*Ce,De=(y[Te]-I[Te])*Ce;if($e>De){const Ue=$e;$e=De,De=Ue}if($e>ne&&(ne=$e),De<_e&&(_e=De),ne>_e)return null}return ne}function O_($,y,I,Q,ne,_e,Te,Ce,$e,De,Ue){const He=Q-$,We=ne-y,et=_e-I,it=Te-$,_t=Ce-y,Et=$e-I,Bt=Ue[1]*Et-Ue[2]*_t,qt=Ue[2]*it-Ue[0]*Et,Ft=Ue[0]*_t-Ue[1]*it,Gt=He*Bt+We*qt+et*Ft;if(Math.abs(Gt)<1e-15)return null;const Jt=1/Gt,Wt=De[0]-$,Tn=De[1]-y,bn=De[2]-I,Pn=(Wt*Bt+Tn*qt+bn*Ft)*Jt;if(Pn<0||Pn>1)return null;const Yn=Tn*et-bn*We,kn=bn*He-Wt*et,Ln=Wt*We-Tn*He,Un=(Ue[0]*Yn+Ue[1]*kn+Ue[2]*Ln)*Jt;return Un<0||Pn+Un>1?null:(it*Yn+_t*kn+Et*Ln)*Jt}function R_($,y,I){return($-y)/(I-y)}function $_($,y,I,Q,ne,_e,Te,Ce,$e){const De=1<<I,Ue=_e-Q,He=Te-ne,We=($+1)/De*Ue+Q,et=(y+0)/De*He+ne,it=(y+1)/De*He+ne;Ce[0]=($+0)/De*Ue+Q,Ce[1]=et,$e[0]=We,$e[1]=it}class z_{constructor(y){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=y,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const I=function(_e){const Te=Math.ceil(Math.log2(_e.dim/8)),Ce=[];let $e=Math.ceil(Math.pow(2,Te));const De=1/$e,Ue=(et,it,_t,Et,Bt)=>{const qt=Et?1:0,Ft=(et+1)*_t-qt,Gt=it*_t,Jt=(it+1)*_t-qt;Bt[0]=et*_t,Bt[1]=Gt,Bt[2]=Ft,Bt[3]=Jt};let He=new I_($e);const We=[];for(let et=0;et<$e*$e;et++){Ue(et%$e,Math.floor(et/$e),De,!1,We);const it=tc(We[0],We[1],_e),_t=tc(We[2],We[1],_e),Et=tc(We[2],We[3],_e),Bt=tc(We[0],We[3],_e);He.minimums.push(Math.min(it,_t,Et,Bt)),He.maximums.push(Math.max(it,_t,Et,Bt)),He.leaves.push(1)}for(Ce.push(He),$e/=2;$e>=1;$e/=2){const et=Ce[Ce.length-1];He=new I_($e);for(let it=0;it<$e*$e;it++){Ue(it%$e,Math.floor(it/$e),2,!0,We);const _t=et.getElevation(We[0],We[1]),Et=et.getElevation(We[2],We[1]),Bt=et.getElevation(We[2],We[3]),qt=et.getElevation(We[0],We[3]),Ft=et.isLeaf(We[0],We[1]),Gt=et.isLeaf(We[2],We[1]),Jt=et.isLeaf(We[2],We[3]),Wt=et.isLeaf(We[0],We[3]),Tn=Math.min(_t.min,Et.min,Bt.min,qt.min),bn=Math.max(_t.max,Et.max,Bt.max,qt.max),Pn=Ft&&Gt&&Jt&&Wt;He.maximums.push(bn),He.minimums.push(Tn),He.leaves.push(bn-Tn<=5&&Pn?1:0)}Ce.push(He)}return Ce}(this.dem),Q=I.length-1,ne=I[Q];this._addNode(ne.minimums[0],ne.maximums[0],ne.leaves[0]),this._construct(I,0,0,Q,0)}raycastRoot(y,I,Q,ne,_e,Te,Ce=1){return P_([y,I,-100],[Q,ne,this.maximums[0]*Ce],_e,Te)}raycast(y,I,Q,ne,_e,Te,Ce=1){if(!this.nodeCount)return null;const $e=this.raycastRoot(y,I,Q,ne,_e,Te,Ce);if($e==null)return null;const De=[],Ue=[],He=[],We=[],et=[{idx:0,t:$e,nodex:0,nodey:0,depth:0}];for(;et.length>0;){const{idx:it,t:_t,nodex:Et,nodey:Bt,depth:qt}=et.pop();if(this.leaves[it]){$_(Et,Bt,qt,y,I,Q,ne,He,We);const Gt=1<<qt,Jt=(Et+0)/Gt,Wt=(Et+1)/Gt,Tn=(Bt+0)/Gt,bn=(Bt+1)/Gt,Pn=tc(Jt,Tn,this.dem)*Ce,Yn=tc(Wt,Tn,this.dem)*Ce,kn=tc(Wt,bn,this.dem)*Ce,Ln=tc(Jt,bn,this.dem)*Ce,Un=O_(He[0],He[1],Pn,We[0],He[1],Yn,We[0],We[1],kn,_e,Te),Bn=O_(We[0],We[1],kn,He[0],We[1],Ln,He[0],He[1],Pn,_e,Te),Zn=Math.min(Un!==null?Un:Number.MAX_VALUE,Bn!==null?Bn:Number.MAX_VALUE);if(Zn!==Number.MAX_VALUE)return Zn;{const Vn=yd([],_e,Te,_t);if(D_(Pn,Yn,Ln,kn,R_(Vn[0],He[0],We[0]),R_(Vn[1],He[1],We[1]))>=Vn[2])return _t}continue}let Ft=0;for(let Gt=0;Gt<this._siblingOffset.length;Gt++){$_((Et<<1)+this._siblingOffset[Gt][0],(Bt<<1)+this._siblingOffset[Gt][1],qt+1,y,I,Q,ne,He,We),He[2]=-100,We[2]=this.maximums[this.childOffsets[it]+Gt]*Ce;const Jt=P_(He,We,_e,Te);if(Jt!=null){const Wt=Jt;De[Gt]=Wt;let Tn=!1;for(let bn=0;bn<Ft&&!Tn;bn++)Wt>=De[Ue[bn]]&&(Ue.splice(bn,0,Gt),Tn=!0);Tn||(Ue[Ft]=Gt),Ft++}}for(let Gt=0;Gt<Ft;Gt++){const Jt=Ue[Gt];et.push({idx:this.childOffsets[it]+Jt,t:De[Jt],nodex:(Et<<1)+this._siblingOffset[Jt][0],nodey:(Bt<<1)+this._siblingOffset[Jt][1],depth:qt+1})}}return null}_addNode(y,I,Q){return this.minimums.push(y),this.maximums.push(I),this.leaves.push(Q),this.childOffsets.push(0),this.nodeCount++}_construct(y,I,Q,ne,_e){if(y[ne].isLeaf(I,Q)===1)return;this.childOffsets[_e]||(this.childOffsets[_e]=this.nodeCount);const Te=ne-1,Ce=y[Te];let $e=0,De=0;for(let Ue=0;Ue<this._siblingOffset.length;Ue++){const He=2*I+this._siblingOffset[Ue][0],We=2*Q+this._siblingOffset[Ue][1],et=Ce.getElevation(He,We),it=Ce.isLeaf(He,We),_t=this._addNode(et.min,et.max,it);it&&($e|=1<<Ue),De||(De=_t)}for(let Ue=0;Ue<this._siblingOffset.length;Ue++)$e&1<<Ue||this._construct(y,2*I+this._siblingOffset[Ue][0],2*Q+this._siblingOffset[Ue][1],Te,De+Ue)}}function D_($,y,I,Q,ne,_e){return Hr(Hr($,I,_e),Hr(y,Q,_e),ne)}function tc($,y,I){const Q=I.dim,ne=Xe($*Q-.5,0,Q-1),_e=Xe(y*Q-.5,0,Q-1),Te=Math.floor(ne),Ce=Math.floor(_e),$e=Math.min(Te+1,Q-1),De=Math.min(Ce+1,Q-1);return D_(I.get(Te,Ce),I.get($e,Ce),I.get(Te,De),I.get($e,De),ne-Te,_e-Ce)}const L_={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Hd{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(y,I,Q,ne=!1,_e=!1){if(this.uid=y,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(Q&&Q!=="mapbox"&&Q!=="terrarium")return zt(`"${Q}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=I.height;const Te=this.dim=I.height-2,Ce=new Uint32Array(I.data.buffer);if(this.pixels=new Uint8Array(I.data.buffer),this.encoding=Q||"mapbox",this.borderReady=ne,!ne){for(let $e=0;$e<Te;$e++)Ce[this._idx(-1,$e)]=Ce[this._idx(0,$e)],Ce[this._idx(Te,$e)]=Ce[this._idx(Te-1,$e)],Ce[this._idx($e,-1)]=Ce[this._idx($e,0)],Ce[this._idx($e,Te)]=Ce[this._idx($e,Te-1)];Ce[this._idx(-1,-1)]=Ce[this._idx(0,0)],Ce[this._idx(Te,-1)]=Ce[this._idx(Te-1,0)],Ce[this._idx(-1,Te)]=Ce[this._idx(0,Te-1)],Ce[this._idx(Te,Te)]=Ce[this._idx(Te-1,Te-1)],_e&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new z_(this)}get(y,I,Q=!1){Q&&(y=Xe(y,-1,this.dim),I=Xe(I,-1,this.dim));const ne=4*this._idx(y,I);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[ne],this.pixels[ne+1],this.pixels[ne+2])}static getUnpackVector(y){return L_[y]}get unpackVector(){return L_[this.encoding]}_idx(y,I){if(y<-1||y>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(y+1)}_unpackMapbox(y,I,Q){return(256*y*256+256*I+Q)/10-1e4}_unpackTerrarium(y,I,Q){return 256*y+I+Q/256-32768}static pack(y,I){const Q=[0,0,0,0],ne=Hd.getUnpackVector(I);let _e=Math.floor((y+ne[3])/ne[2]);return Q[2]=_e%256,_e=Math.floor(_e/256),Q[1]=_e%256,_e=Math.floor(_e/256),Q[0]=_e,Q}getPixels(){return new Zo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(y,I,Q){if(this.dim!==y.dim)throw new Error("dem dimension mismatch");let ne=I*this.dim,_e=I*this.dim+this.dim,Te=Q*this.dim,Ce=Q*this.dim+this.dim;switch(I){case-1:ne=_e-1;break;case 1:_e=ne+1}switch(Q){case-1:Te=Ce-1;break;case 1:Ce=Te+1}const $e=-I*this.dim,De=-Q*this.dim;for(let Ue=Te;Ue<Ce;Ue++)for(let He=ne;He<_e;He++){const We=4*this._idx(He,Ue),et=4*this._idx(He+$e,Ue+De);this.pixels[We+0]=y.pixels[et+0],this.pixels[We+1]=y.pixels[et+1],this.pixels[We+2]=y.pixels[et+2],this.pixels[We+3]=y.pixels[et+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}cr(Hd,"DEMData"),cr(z_,"DemMinMaxQuadTree",{omit:["dem"]});class ty{constructor(y,I){this.max=y,this.onRemove=I,this.reset()}reset(){for(const y in this.data)for(const I of this.data[y])I.timeout&&clearTimeout(I.timeout),this.onRemove(I.value);return this.data={},this.order=[],this}add(y,I,Q){const ne=y.wrapped().key;this.data[ne]===void 0&&(this.data[ne]=[]);const _e={value:I,timeout:void 0};if(Q!==void 0&&(_e.timeout=setTimeout(()=>{this.remove(y,_e)},Q)),this.data[ne].push(_e),this.order.push(ne),this.order.length>this.max){const Te=this._getAndRemoveByKey(this.order[0]);Te&&this.onRemove(Te)}return this}has(y){return y.wrapped().key in this.data}getAndRemove(y){return this.has(y)?this._getAndRemoveByKey(y.wrapped().key):null}_getAndRemoveByKey(y){const I=this.data[y].shift();return I.timeout&&clearTimeout(I.timeout),this.data[y].length===0&&delete this.data[y],this.order.splice(this.order.indexOf(y),1),I.value}getByKey(y){const I=this.data[y];return I?I[0].value:null}get(y){return this.has(y)?this.data[y.wrapped().key][0].value:null}remove(y,I){if(!this.has(y))return this;const Q=y.wrapped().key,ne=I===void 0?0:this.data[Q].indexOf(I),_e=this.data[Q][ne];return this.data[Q].splice(ne,1),_e.timeout&&clearTimeout(_e.timeout),this.data[Q].length===0&&delete this.data[Q],this.onRemove(_e.value),this.order.splice(this.order.indexOf(Q),1),this}setMaxSize(y){for(this.max=y;this.order.length>this.max;){const I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}filter(y){const I=[];for(const Q in this.data)for(const ne of this.data[Q])y(ne.value)||I.push(ne);for(const Q of I)this.remove(Q.value.tileID,Q)}}class Zu{constructor(y,I,Q){this.func=y,this.mask=I,this.range=Q}}Zu.ReadOnly=!1,Zu.ReadWrite=!0,Zu.disabled=new Zu(519,Zu.ReadOnly,[0,1]);const Fp=7680;class Np{constructor(y,I,Q,ne,_e,Te){this.test=y,this.ref=I,this.mask=Q,this.fail=ne,this.depthFail=_e,this.pass=Te}}Np.disabled=new Np({func:519,mask:0},0,0,Fp,Fp,Fp);class bs{constructor(y,I,Q){this.blendFunction=y,this.blendColor=I,this.mask=Q}}bs.Replace=[1,0],bs.disabled=new bs(bs.Replace,ri.transparent,[!1,!1,!1,!1]),bs.unblended=new bs(bs.Replace,ri.transparent,[!0,!0,!0,!0]),bs.alphaBlended=new bs([1,771],ri.transparent,[!0,!0,!0,!0]);const jp=1029,Up=2305;class Wa{constructor(y,I,Q){this.enable=y,this.mode=I,this.frontFace=Q}}Wa.disabled=new Wa(!1,jp,Up),Wa.backCCW=new Wa(!0,jp,Up),Wa.backCW=new Wa(!0,jp,2304),Wa.frontCW=new Wa(!0,1028,2304),Wa.frontCCW=new Wa(!0,1028,Up);class Zc extends vr{constructor(y,I,Q){super(),this.id=y,this._onlySymbols=Q,I.on("data",ne=>{ne.dataType==="source"&&ne.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&ne.dataType==="source"&&ne.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),I.on("error",()=>{this._sourceErrored=!0}),this._source=I,this._tiles={},this._cache=new ty(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=I.minTileCacheSize,this._maxTileCacheSize=I.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new ey,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(y){this.map=y,this._minTileCacheSize=this._minTileCacheSize===void 0&&y?y._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&y?y._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const y in this._tiles){const I=this._tiles[y];if(I.state!=="loaded"&&I.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const y=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,y&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(y,I){return y.isSymbolTile=this._onlySymbols,this._source.loadTile(y,I)}_unloadTile(y){if(this._source.unloadTile)return this._source.unloadTile(y,()=>{})}_abortTile(y){if(this._source.abortTile)return this._source.abortTile(y,()=>{})}serialize(){return this._source.serialize()}prepare(y){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const I in this._tiles){const Q=this._tiles[I];this._source.prepareTile(Q)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,Q.tileID),Q.upload(y),Q.prepare(this.map.style.imageManager)}else for(const I in this._tiles){const Q=this._tiles[I];Q.upload(y),Q.prepare(this.map.style.imageManager)}}getIds(){return Ct(this._tiles).map(y=>y.tileID).sort(B_).map(y=>y.key)}getRenderableIds(y){const I=[];for(const Q in this._tiles)this._isIdRenderable(+Q,y)&&I.push(this._tiles[Q]);return y?I.sort((Q,ne)=>{const _e=Q.tileID,Te=ne.tileID,Ce=new ye(_e.canonical.x,_e.canonical.y)._rotate(this.transform.angle),$e=new ye(Te.canonical.x,Te.canonical.y)._rotate(this.transform.angle);return _e.overscaledZ-Te.overscaledZ||$e.y-Ce.y||$e.x-Ce.x}).map(Q=>Q.tileID.key):I.map(Q=>Q.tileID).sort(B_).map(Q=>Q.key)}hasRenderableParent(y){const I=this.findLoadedParent(y,0);return!!I&&this._isIdRenderable(I.tileID.key)}_isIdRenderable(y,I){return this._tiles[y]&&this._tiles[y].hasData()&&!this._coveredTiles[y]&&(I||!this._tiles[y].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const y in this._tiles)this._tiles[y].state!=="errored"&&this._reloadTile(+y,"reloading")}}_reloadTile(y,I){const Q=this._tiles[y];Q&&(Q.state!=="loading"&&(Q.state=I),this._loadTile(Q,this._tileLoaded.bind(this,Q,y,I)))}_tileLoaded(y,I,Q,ne){if(ne)if(y.state="errored",ne.status!==404)this._source.fire(new ti(ne,{tile:y}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const _e=this.map.painter.terrain;this.update(this.transform,_e.getScaledDemTileSize(),!0),_e.resetTileLookupCache(this.id)}else this.update(this.transform);else y.timeAdded=$n.now(),Q==="expired"&&(y.refreshedUponExpiration=!0),this._setTileReloadTimer(I,y),this._source.type==="raster-dem"&&y.dem&&this._backfillDEM(y),this._state.initializeTileState(y,this.map?this.map.painter:null),this._source.fire(new oi("data",{dataType:"source",tile:y,coord:y.tileID,sourceCacheId:this.id}))}_backfillDEM(y){const I=this.getRenderableIds();for(let ne=0;ne<I.length;ne++){const _e=I[ne];if(y.neighboringTiles&&y.neighboringTiles[_e]){const Te=this.getTileByID(_e);Q(y,Te),Q(Te,y)}}function Q(ne,_e){if(!ne.dem||ne.dem.borderReady)return;ne.needsHillshadePrepare=!0,ne.needsDEMTextureUpload=!0;let Te=_e.tileID.canonical.x-ne.tileID.canonical.x;const Ce=_e.tileID.canonical.y-ne.tileID.canonical.y,$e=Math.pow(2,ne.tileID.canonical.z),De=_e.tileID.key;Te===0&&Ce===0||Math.abs(Ce)>1||(Math.abs(Te)>1&&(Math.abs(Te+$e)===1?Te+=$e:Math.abs(Te-$e)===1&&(Te-=$e)),_e.dem&&ne.dem&&(ne.dem.backfillBorder(_e.dem,Te,Ce),ne.neighboringTiles&&ne.neighboringTiles[De]&&(ne.neighboringTiles[De].backfilled=!0)))}}getTile(y){return this.getTileByID(y.key)}getTileByID(y){return this._tiles[y]}_retainLoadedChildren(y,I,Q,ne){for(const _e in this._tiles){let Te=this._tiles[_e];if(ne[_e]||!Te.hasData()||Te.tileID.overscaledZ<=I||Te.tileID.overscaledZ>Q)continue;let Ce=Te.tileID;for(;Te&&Te.tileID.overscaledZ>I+1;){const De=Te.tileID.scaledTo(Te.tileID.overscaledZ-1);Te=this._tiles[De.key],Te&&Te.hasData()&&(Ce=De)}let $e=Ce;for(;$e.overscaledZ>I;)if($e=$e.scaledTo($e.overscaledZ-1),y[$e.key]){ne[Ce.key]=Ce;break}}}findLoadedParent(y,I){if(y.key in this._loadedParentTiles){const Q=this._loadedParentTiles[y.key];return Q&&Q.tileID.overscaledZ>=I?Q:null}for(let Q=y.overscaledZ-1;Q>=I;Q--){const ne=y.scaledTo(Q),_e=this._getLoadedTile(ne);if(_e)return _e}}_getLoadedTile(y){const I=this._tiles[y.key];return I&&I.hasData()?I:this._cache.getByKey(this._source.reparseOverscaled?y.wrapped().key:y.canonical.key)}updateCacheSize(y,I){I=I||this._source.tileSize;const Q=Math.ceil(y.width/I)+1,ne=Math.ceil(y.height/I)+1,_e=Math.floor(Q*ne*5),Te=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,_e):_e,Ce=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Te):Te;this._cache.setMaxSize(Ce)}handleWrapJump(y){const I=Math.round((y-(this._prevLng===void 0?y:this._prevLng))/360);if(this._prevLng=y,I){const Q={};for(const ne in this._tiles){const _e=this._tiles[ne];_e.tileID=_e.tileID.unwrapTo(_e.tileID.wrap+I),Q[_e.tileID.key]=_e}this._tiles=Q;for(const ne in this._timers)clearTimeout(this._timers[ne]),delete this._timers[ne];for(const ne in this._tiles)this._setTileReloadTimer(+ne,this._tiles[ne])}}update(y,I,Q){if(this.transform=y,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!Q)return;let ne;this.updateCacheSize(y,I),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?ne=y.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ce=>new So(Ce.canonical.z,Ce.wrap,Ce.canonical.z,Ce.canonical.x,Ce.canonical.y)):(ne=y.coveringTiles({tileSize:I||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!Q,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(ne=ne.filter(Ce=>this._source.hasTile(Ce)))):ne=[];const _e=this._updateRetainedTiles(ne);if(F_(this._source.type)&&ne.length!==0){const Ce={},$e={},De=Object.keys(_e);for(const He of De){const We=_e[He],et=this._tiles[He];if(!et||et.fadeEndTime&&et.fadeEndTime<=$n.now())continue;const it=this.findLoadedParent(We,Math.max(We.overscaledZ-Zc.maxOverzooming,this._source.minzoom));it&&(this._addTile(it.tileID),Ce[it.tileID.key]=it.tileID),$e[He]=We}const Ue=ne[ne.length-1].overscaledZ;for(const He in this._tiles){const We=this._tiles[He];if(_e[He]||!We.hasData())continue;let et=We.tileID;for(;et.overscaledZ>Ue;){et=et.scaledTo(et.overscaledZ-1);const it=this._tiles[et.key];if(it&&it.hasData()&&$e[et.key]){_e[He]=We.tileID;break}}}for(const He in Ce)_e[He]||(this._coveredTiles[He]=!0,_e[He]=Ce[He])}for(const Ce in _e)this._tiles[Ce].clearFadeHold();const Te=function(Ce,$e){const De=[];for(const Ue in Ce)Ue in $e||De.push(Ue);return De}(this._tiles,_e);for(const Ce of Te){const $e=this._tiles[Ce];$e.hasSymbolBuckets&&!$e.holdingForFade()?$e.setHoldDuration(this.map._fadeDuration):$e.hasSymbolBuckets&&!$e.symbolFadeFinished()||this._removeTile(+Ce)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const y in this._tiles)this._tiles[y].holdingForFade()&&this._removeTile(+y)}_updateRetainedTiles(y){const I={};if(y.length===0)return I;const Q={},ne=y.reduce((De,Ue)=>Math.min(De,Ue.overscaledZ),1/0),_e=y[0].overscaledZ,Te=Math.max(_e-Zc.maxOverzooming,this._source.minzoom),Ce=Math.max(_e+Zc.maxUnderzooming,this._source.minzoom),$e={};for(const De of y){const Ue=this._addTile(De);I[De.key]=De,Ue.hasData()||ne<this._source.maxzoom&&($e[De.key]=De)}this._retainLoadedChildren($e,ne,Ce,I);for(const De of y){let Ue=this._tiles[De.key];if(Ue.hasData())continue;if(De.canonical.z>=this._source.maxzoom){const We=De.children(this._source.maxzoom)[0],et=this.getTile(We);if(et&&et.hasData()){I[We.key]=We;continue}}else{const We=De.children(this._source.maxzoom);if(I[We[0].key]&&I[We[1].key]&&I[We[2].key]&&I[We[3].key])continue}let He=Ue.wasRequested();for(let We=De.overscaledZ-1;We>=Te;--We){const et=De.scaledTo(We);if(Q[et.key]||(Q[et.key]=!0,Ue=this.getTile(et),!Ue&&He&&(Ue=this._addTile(et)),Ue&&(I[et.key]=et,He=Ue.wasRequested(),Ue.hasData())))break}}return I}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const y in this._tiles){const I=[];let Q,ne=this._tiles[y].tileID;for(;ne.overscaledZ>0;){if(ne.key in this._loadedParentTiles){Q=this._loadedParentTiles[ne.key];break}I.push(ne.key);const _e=ne.scaledTo(ne.overscaledZ-1);if(Q=this._getLoadedTile(_e),Q)break;ne=_e}for(const _e of I)this._loadedParentTiles[_e]=Q}}_addTile(y){let I=this._tiles[y.key];if(I)return this._source.prepareTile&&this._source.prepareTile(I),I;I=this._cache.getAndRemove(y),I&&(this._setTileReloadTimer(y.key,I),I.tileID=y,this._state.initializeTileState(I,this.map?this.map.painter:null),this._cacheTimers[y.key]&&(clearTimeout(this._cacheTimers[y.key]),delete this._cacheTimers[y.key],this._setTileReloadTimer(y.key,I)));const Q=Boolean(I);if(!Q){const ne=this.map?this.map.painter:null;I=new Bp(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,ne,this._isRaster),this._source.prepareTile&&this._source.prepareTile(I)||this._loadTile(I,this._tileLoaded.bind(this,I,y.key,I.state))}return I?(I.uses++,this._tiles[y.key]=I,Q||this._source.fire(new oi("dataloading",{tile:I,coord:I.tileID,dataType:"source"})),I):null}_setTileReloadTimer(y,I){y in this._timers&&(clearTimeout(this._timers[y]),delete this._timers[y]);const Q=I.getExpiryTimeout();Q&&(this._timers[y]=setTimeout(()=>{this._reloadTile(y,"expired"),delete this._timers[y]},Q))}_removeTile(y){const I=this._tiles[y];I&&(I.uses--,delete this._tiles[y],this._timers[y]&&(clearTimeout(this._timers[y]),delete this._timers[y]),I.uses>0||(I.hasData()&&I.state!=="reloading"?this._cache.add(I.tileID,I,I.getExpiryTimeout()):(I.aborted=!0,this._abortTile(I),this._unloadTile(I))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const y in this._tiles)this._removeTile(+y);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(y,I,Q){const ne=[],_e=this.transform;if(!_e)return ne;const Te=_e.projection.name==="globe",Ce=va(_e.center.lng);for(const $e in this._tiles){const De=this._tiles[$e];if(Q&&De.clearQueryDebugViz(),De.holdingForFade())continue;let Ue;if(Te){const He=De.tileID.canonical;if(He.z===0){const We=[Math.abs(Xe(Ce,...Gh(He,-1))-Ce),Math.abs(Xe(Ce,...Gh(He,1))-Ce)];Ue=[0,2*We.indexOf(Math.min(...We))-1]}else{const We=[Math.abs(Xe(Ce,...Gh(He,-1))-Ce),Math.abs(Xe(Ce,...Gh(He,0))-Ce),Math.abs(Xe(Ce,...Gh(He,1))-Ce)];Ue=[We.indexOf(Math.min(...We))-1]}}else Ue=[0];for(const He of Ue){const We=y.containsTile(De,_e,I,He);We&&ne.push(We)}}return ne}getVisibleCoordinates(y){const I=this.getRenderableIds(y).map(Q=>this._tiles[Q].tileID);for(const Q of I)Q.projMatrix=this.transform.calculateProjMatrix(Q.toUnwrapped());return I}hasTransition(){if(this._source.hasTransition())return!0;if(F_(this._source.type))for(const y in this._tiles){const I=this._tiles[y];if(I.fadeEndTime!==void 0&&I.fadeEndTime>=$n.now())return!0}return!1}setFeatureState(y,I,Q){this._state.updateState(y=y||"_geojsonTileLayer",I,Q)}removeFeatureState(y,I,Q){this._state.removeFeatureState(y=y||"_geojsonTileLayer",I,Q)}getFeatureState(y,I){return this._state.getState(y=y||"_geojsonTileLayer",I)}setDependencies(y,I,Q){const ne=this._tiles[y];ne&&ne.setDependencies(I,Q)}reloadTilesForDependencies(y,I){for(const Q in this._tiles)this._tiles[Q].hasDependency(y,I)&&this._reloadTile(+Q,"reloading");this._cache.filter(Q=>!Q.hasDependency(y,I))}_preloadTiles(y,I){const Q=new Map,ne=Array.isArray(y)?y:[y],_e=this.map.painter.terrain,Te=this.usedForTerrain&&_e?_e.getScaledDemTileSize():this._source.tileSize;for(const Ce of ne){const $e=Ce.coveringTiles({tileSize:Te,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const De of $e)Q.set(De.key,De);this.usedForTerrain&&Ce.updateElevation(!1)}dt(Array.from(Q.values()),(Ce,$e)=>{const De=new Bp(Ce,this._source.tileSize*Ce.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(De,Ue=>{this._source.type==="raster-dem"&&De.dem&&this._backfillDEM(De),$e(Ue,De)})},I)}}function B_($,y){const I=Math.abs(2*$.wrap)-+($.wrap<0),Q=Math.abs(2*y.wrap)-+(y.wrap<0);return $.overscaledZ-y.overscaledZ||Q-I||y.canonical.y-$.canonical.y||y.canonical.x-$.canonical.x}function F_($){return $==="raster"||$==="image"||$==="video"}function Gh($,y){const I=1<<$.z;return[$.x/I+y,($.x+1)/I+y]}Zc.maxOverzooming=10,Zc.maxUnderzooming=3;class Wd{constructor(y,I,Q){this._demTile=y,this._dem=this._demTile.dem,this._scale=I,this._offset=Q}static create(y,I,Q){const ne=Q||y.findDEMTileFor(I);if(!ne||!ne.dem)return;const _e=ne.dem,Te=ne.tileID,Ce=1<<I.canonical.z-Te.canonical.z;return new Wd(ne,ne.tileSize/Ar/Ce,[(I.canonical.x/Ce-Te.canonical.x)*_e.dim,(I.canonical.y/Ce-Te.canonical.y)*_e.dim])}tileCoordToPixel(y,I){const Q=I*this._scale+this._offset[1],ne=Math.floor(y*this._scale+this._offset[0]),_e=Math.floor(Q);return new ye(ne,_e)}getElevationAt(y,I,Q,ne){const _e=y*this._scale+this._offset[0],Te=I*this._scale+this._offset[1],Ce=Math.floor(_e),$e=Math.floor(Te),De=this._dem;return ne=!!ne,Q?Hr(Hr(De.get(Ce,$e,ne),De.get(Ce,$e+1,ne),Te-$e),Hr(De.get(Ce+1,$e,ne),De.get(Ce+1,$e+1,ne),Te-$e),_e-Ce):De.get(Ce,$e,ne)}getElevationAtPixel(y,I,Q){return this._dem.get(y,I,!!Q)}getMeterToDEM(y){return(1<<this._demTile.tileID.canonical.z)*Do(1,y)*this._dem.stride}}class N_{constructor(y,I){this.tileID=y,this.x=y.canonical.x,this.y=y.canonical.y,this.z=y.canonical.z,this.grid=new Ra(Ar,16,0),this.featureIndexArray=new fh,this.promoteId=I}insert(y,I,Q,ne,_e,Te=0){const Ce=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Q,ne,_e,Te);const $e=this.grid;for(let De=0;De<I.length;De++){const Ue=I[De],He=[1/0,1/0,-1/0,-1/0];for(let We=0;We<Ue.length;We++){const et=Ue[We];He[0]=Math.min(He[0],et.x),He[1]=Math.min(He[1],et.y),He[2]=Math.max(He[2],et.x),He[3]=Math.max(He[3],et.y)}He[0]<Ar&&He[1]<Ar&&He[2]>=0&&He[3]>=0&&$e.insert(Ce,He[0],He[1],He[2],He[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Hc.VectorTile(new Oh(this.rawTileData)).layers,this.sourceLayerCoder=new A_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const y in this.vtLayers)this.vtFeatures[y]=[]}return this.vtLayers}query(y,I,Q,ne){this.loadVTLayers();const _e=y.params||{},Te=Xs(_e.filter),Ce=y.tileResult,$e=y.transform,De=Ce.bufferedTilespaceBounds,Ue=this.grid.query(De.min.x,De.min.y,De.max.x,De.max.y,(it,_t,Et,Bt)=>wi(Ce.bufferedTilespaceGeometry,it,_t,Et,Bt));Ue.sort(ny);let He=null;$e.elevation&&Ue.length>0&&(He=Wd.create($e.elevation,this.tileID));const We={};let et;for(let it=0;it<Ue.length;it++){const _t=Ue[it];if(_t===et)continue;et=_t;const Et=this.featureIndexArray.get(_t);let Bt=null;this.loadMatchingFeature(We,Et,Te,_e.layers,_e.availableImages,I,Q,ne,(qt,Ft,Gt,Jt=0)=>(Bt||(Bt=yt(qt,this.tileID.canonical,y.tileTransform)),Ft.queryIntersectsFeature(Ce,qt,Gt,Bt,this.z,y.transform,y.pixelPosMatrix,He,Jt)))}return We}loadMatchingFeature(y,I,Q,ne,_e,Te,Ce,$e,De){const{featureIndex:Ue,bucketIndex:He,sourceLayerIndex:We,layoutVertexArrayOffset:et}=I,it=this.bucketLayerIDs[He];if(ne&&!function(qt,Ft){for(let Gt=0;Gt<qt.length;Gt++)if(Ft.indexOf(qt[Gt])>=0)return!0;return!1}(ne,it))return;const _t=this.sourceLayerCoder.decode(We),Et=this.vtLayers[_t].feature(Ue);if(Q.needGeometry){const qt=Ve(Et,!0);if(!Q.filter(new Tt(this.tileID.overscaledZ),qt,this.tileID.canonical))return}else if(!Q.filter(new Tt(this.tileID.overscaledZ),Et))return;const Bt=this.getId(Et,_t);for(let qt=0;qt<it.length;qt++){const Ft=it[qt];if(ne&&ne.indexOf(Ft)<0)continue;const Gt=Te[Ft];if(!Gt)continue;let Jt={};Bt!==void 0&&$e&&(Jt=$e.getState(Gt.sourceLayer||"_geojsonTileLayer",Bt));const Wt=bt({},Ce[Ft]);Wt.paint=j_(Wt.paint,Gt.paint,Et,Jt,_e),Wt.layout=j_(Wt.layout,Gt.layout,Et,Jt,_e);const Tn=!De||De(Et,Gt,Jt,et);if(!Tn)continue;const bn=new k_(Et,this.z,this.x,this.y,Bt);bn.layer=Wt;let Pn=y[Ft];Pn===void 0&&(Pn=y[Ft]=[]),Pn.push({featureIndex:Ue,feature:bn,intersectionZ:Tn})}}lookupSymbolFeatures(y,I,Q,ne,_e,Te,Ce,$e){const De={};this.loadVTLayers();const Ue=Xs(_e);for(const He of y)this.loadMatchingFeature(De,{bucketIndex:Q,sourceLayerIndex:ne,featureIndex:He,layoutVertexArrayOffset:0},Ue,Te,Ce,$e,I);return De}loadFeature(y){const{featureIndex:I,sourceLayerIndex:Q}=y;this.loadVTLayers();const ne=this.sourceLayerCoder.decode(Q),_e=this.vtFeatures[ne];if(_e[I])return _e[I];const Te=this.vtLayers[ne].feature(I);return _e[I]=Te,Te}hasLayer(y){for(const I of this.bucketLayerIDs)for(const Q of I)if(y===Q)return!0;return!1}getId(y,I){let Q=y.id;return this.promoteId&&(Q=y.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[I]],typeof Q=="boolean"&&(Q=Number(Q))),Q}}function j_($,y,I,Q,ne){return vt($,(_e,Te)=>{const Ce=y instanceof Xt?y.get(Te):null;return Ce&&Ce.evaluate?Ce.evaluate(I,Q,ne):Ce})}function ny($,y){return y-$}cr(N_,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class U_{constructor(y){const I={},Q=[];for(const Ce in y){const $e=y[Ce],De=I[Ce]={};for(const Ue in $e.glyphs){const He=$e.glyphs[+Ue];if(!He||He.bitmap.width===0||He.bitmap.height===0)continue;const We=He.metrics.localGlyph?2:1,et={x:0,y:0,w:He.bitmap.width+2*We,h:He.bitmap.height+2*We};Q.push(et),De[Ue]=et}}const{w:ne,h:_e}=xp(Q),Te=new al({width:ne||1,height:_e||1});for(const Ce in y){const $e=y[Ce];for(const De in $e.glyphs){const Ue=$e.glyphs[+De];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const He=I[Ce][De],We=Ue.metrics.localGlyph?2:1;al.copy(Ue.bitmap,Te,{x:0,y:0},{x:He.x+We,y:He.y+We},Ue.bitmap)}}this.image=Te,this.positions=I}}cr(U_,"GlyphAtlas");class ry{constructor(y){this.tileID=new So(y.tileID.overscaledZ,y.tileID.wrap,y.tileID.canonical.z,y.tileID.canonical.x,y.tileID.canonical.y),this.tileZoom=y.tileZoom,this.uid=y.uid,this.zoom=y.zoom,this.canonical=y.tileID.canonical,this.pixelRatio=y.pixelRatio,this.tileSize=y.tileSize,this.source=y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=y.showCollisionBoxes,this.collectResourceTiming=!!y.collectResourceTiming,this.returnDependencies=!!y.returnDependencies,this.promoteId=y.promoteId,this.enableTerrain=!!y.enableTerrain,this.isSymbolTile=y.isSymbolTile,this.tileTransform=Wc(y.tileID.canonical,y.projection),this.projection=y.projection}parse(y,I,Q,ne,_e){this.status="parsing",this.data=y,this.collisionBoxArray=new Go;const Te=new A_(Object.keys(y.layers).sort()),Ce=new N_(this.tileID,this.promoteId);Ce.bucketLayerIDs=[];const $e={},De=new Lp(256,256),Ue={featureIndex:Ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:De,availableImages:Q},He=I.familiesBySource[this.source];for(const Jt in He){const Wt=y.layers[Jt];if(!Wt)continue;let Tn=!1,bn=!1;for(const kn of He[Jt])kn[0].type==="symbol"?Tn=!0:bn=!0;if(this.isSymbolTile===!0&&!Tn||this.isSymbolTile===!1&&!bn)continue;Wt.version===1&&zt(`Vector tile source "${this.source}" layer "${Jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pn=Te.encode(Jt),Yn=[];for(let kn=0;kn<Wt.length;kn++){const Ln=Wt.feature(kn),Un=Ce.getId(Ln,Jt);Yn.push({feature:Ln,id:Un,index:kn,sourceLayerIndex:Pn})}for(const kn of He[Jt]){const Ln=kn[0];this.isSymbolTile!==void 0&&Ln.type==="symbol"!==this.isSymbolTile||Ln.minzoom&&this.zoom<Math.floor(Ln.minzoom)||Ln.maxzoom&&this.zoom>=Ln.maxzoom||Ln.visibility!=="none"&&(Vp(kn,this.zoom,Q),($e[Ln.id]=Ln.createBucket({index:Ce.bucketLayerIDs.length,layers:kn,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pn,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:Q})).populate(Yn,Ue,this.tileID.canonical,this.tileTransform),Ce.bucketLayerIDs.push(kn.map(Un=>Un.id)))}}let We,et,it,_t;De.trim();const Et={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Bt=vt(Ue.glyphDependencies,Jt=>Object.keys(Jt).map(Number));Object.keys(Bt).length?ne.send("getGlyphs",{uid:this.uid,stacks:Bt},(Jt,Wt)=>{We||(We=Jt,et=Wt,Gt.call(this))},void 0,!1,Et):et={};const qt=Object.keys(Ue.iconDependencies);qt.length?ne.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"icons"},(Jt,Wt)=>{We||(We=Jt,it=Wt,Gt.call(this))},void 0,!1,Et):it={};const Ft=Object.keys(Ue.patternDependencies);function Gt(){if(We)return _e(We);if(et&&it&&_t){const Jt=new U_(et),Wt=new Vf(it,_t);for(const Tn in $e){const bn=$e[Tn];bn instanceof Jl?(Vp(bn.layers,this.zoom,Q),Ag(bn,et,Jt.positions,it,Wt.iconPositions,this.showCollisionBoxes,Q,this.tileID.canonical,this.tileZoom,this.projection)):bn.hasPattern&&(bn instanceof Cd||bn instanceof Td||bn instanceof Ch)&&(Vp(bn.layers,this.zoom,Q),bn.addFeatures(Ue,this.tileID.canonical,Wt.patternPositions,Q,this.tileTransform))}this.status="done",_e(null,{buckets:Ct($e).filter(Tn=>!Tn.isEmpty()),featureIndex:Ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jt.image,lineAtlas:De,imageAtlas:Wt,glyphMap:this.returnDependencies?et:null,iconMap:this.returnDependencies?it:null,glyphPositions:this.returnDependencies?Jt.positions:null})}}Ft.length?ne.send("getImages",{icons:Ft,source:this.source,tileID:this.tileID,type:"patterns"},(Jt,Wt)=>{We||(We=Jt,_t=Wt,Gt.call(this))},void 0,!1,Et):_t={},Gt.call(this)}}function Vp($,y,I){const Q=new Tt(y);for(const ne of $)ne.recalculate(Q,I)}class V_{constructor(y){this.entries={},this.scheduler=y}request(y,I,Q,ne){const _e=this.entries[y]=this.entries[y]||{callbacks:[]};if(_e.result){const[Te,Ce]=_e.result;return this.scheduler?this.scheduler.add(()=>{ne(Te,Ce)},I):ne(Te,Ce),()=>{}}return _e.callbacks.push(ne),_e.cancel||(_e.cancel=Q((Te,Ce)=>{_e.result=[Te,Ce];for(const $e of _e.callbacks)this.scheduler?this.scheduler.add(()=>{$e(Te,Ce)},I):$e(Te,Ce);setTimeout(()=>delete this.entries[y],3e3)})),()=>{_e.result||(_e.callbacks=_e.callbacks.filter(Te=>Te!==ne),_e.callbacks.length||(_e.cancel(),delete this.entries[y]))}}}function G_($,y,I){const Q=JSON.stringify($.request);return $.data&&(this.deduped.entries[Q]={result:[null,$.data]}),this.deduped.request(Q,{type:"parseTile",isSymbolTile:$.isSymbolTile,zoom:$.tileZoom},ne=>{const _e=fn($.request,(Te,Ce,$e,De)=>{Te?ne(Te):Ce&&ne(null,{vectorTile:I?void 0:new Hc.VectorTile(new Oh(Ce)),rawData:Ce,cacheControl:$e,expires:De})});return()=>{_e.cancel(),ne()}},y)}j.ARRAY_TYPE=Wo,j.AUTH_ERR_MSG=cn,j.Aabb=Lo,j.Actor=class{constructor($,y,I){this.target=$,this.parent=y,this.mapId=I,this.callbacks={},this.cancelCallbacks={},st(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=rn()?$:xe,this.scheduler=new Jg}send($,y,I,Q,ne=!1,_e){const Te=Math.round(1e18*Math.random()).toString(36).substring(0,10);I&&(I.metadata=_e,this.callbacks[Te]=I);const Ce=Ot(this.globalScope)?void 0:[];return this.target.postMessage({id:Te,type:$,hasCallback:!!I,targetMapId:Q,mustQueue:ne,sourceMapId:this.mapId,data:cs(y,Ce)},Ce),{cancel:()=>{I&&delete this.callbacks[Te],this.target.postMessage({id:Te,type:"<cancel>",targetMapId:Q,sourceMapId:this.mapId})}}}receive($){const y=$.data,I=y.id;if(I&&(!y.targetMapId||this.mapId===y.targetMapId))if(y.type==="<cancel>"){const Q=this.cancelCallbacks[I];delete this.cancelCallbacks[I],Q&&Q.cancel()}else if(y.mustQueue||rn()){const Q=this.callbacks[I];this.cancelCallbacks[I]=this.scheduler.add(()=>this.processTask(I,y),Q&&Q.metadata||{type:"message"})}else this.processTask(I,y)}processTask($,y){if(y.type==="<response>"){const I=this.callbacks[$];delete this.callbacks[$],I&&(y.error?I(Qs(y.error)):I(null,Qs(y.data)))}else{const I=Ot(this.globalScope)?void 0:[],Q=y.hasCallback?(_e,Te)=>{delete this.cancelCallbacks[$],this.target.postMessage({id:$,type:"<response>",sourceMapId:this.mapId,error:_e?cs(_e):null,data:cs(Te,I)},I)}:_e=>{},ne=Qs(y.data);if(this.parent[y.type])this.parent[y.type](y.sourceMapId,ne,Q);else if(this.parent.getWorkerSource){const _e=y.type.split(".");this.parent.getWorkerSource(y.sourceMapId,_e[0],ne.source)[_e[1]](ne,Q)}else Q(new Error(`Could not find function ${y.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},j.CanonicalTileID=kd,j.Color=ri,j.ColorMode=bs,j.CullFaceMode=Wa,j.DEMData=Hd,j.DataConstantProperty=Ht,j.DedupedRequest=V_,j.DepthMode=Zu,j.EXTENT=Ar,j.Elevation=class{isDataAvailableAtPoint($){const y=this._source();if(!y||$.y<0||$.y>1)return!1;const I=y.getSource().maxzoom,Q=1<<I,ne=Math.floor($.x),_e=Math.floor(($.x-ne)*Q),Te=Math.floor($.y*Q),Ce=this.findDEMTileFor(new So(I,ne,I,_e,Te));return!(!Ce||!Ce.dem)}getAtPointOrZero($,y=0){return this.getAtPoint($,y)||0}getAtPoint($,y,I=!0){y==null&&(y=null);const Q=this._source();if(!Q||$.y<0||$.y>1)return y;const ne=Q.getSource().maxzoom,_e=1<<ne,Te=Math.floor($.x),Ce=$.x-Te,$e=new So(ne,Te,ne,Math.floor(Ce*_e),Math.floor($.y*_e)),De=this.findDEMTileFor($e);if(!De||!De.dem)return y;const Ue=De.dem,He=1<<De.tileID.canonical.z,We=(Ce*He-De.tileID.canonical.x)*Ue.dim,et=($.y*He-De.tileID.canonical.y)*Ue.dim,it=Math.floor(We),_t=Math.floor(et);return(I?this.exaggeration():1)*Hr(Hr(Ue.get(it,_t),Ue.get(it,_t+1),et-_t),Hr(Ue.get(it+1,_t),Ue.get(it+1,_t+1),et-_t),We-it)}getAtTileOffset($,y,I){const Q=1<<$.canonical.z;return this.getAtPointOrZero(new Zl($.wrap+($.canonical.x+y/Ar)/Q,($.canonical.y+I/Ar)/Q))}getAtTileOffsetFunc($,y,I,Q){return ne=>{const _e=this.getAtTileOffset($,ne.x,ne.y),Te=Q.upVector($.canonical,ne.x,ne.y);return Va(Te,Te,_e*Q.upVectorScale($.canonical,y,I).metersToTile),Te}}getForTilePoints($,y,I,Q){const ne=Wd.create(this,$,Q);return!!ne&&(y.forEach(_e=>{_e[2]=this.exaggeration()*ne.getElevationAt(_e[0],_e[1],I)}),!0)}getMinMaxForTile($){const y=this.findDEMTileFor($);if(!y||!y.dem)return null;const I=y.dem.tree,Q=y.tileID,ne=1<<$.canonical.z-Q.canonical.z;let _e=$.canonical.x/ne-Q.canonical.x,Te=$.canonical.y/ne-Q.canonical.y,Ce=0;for(let $e=0;$e<$.canonical.z-Q.canonical.z&&!I.leaves[Ce];$e++){_e*=2,Te*=2;const De=2*Math.floor(Te)+Math.floor(_e);Ce=I.childOffsets[Ce]+De,_e%=1,Te%=1}return{min:this.exaggeration()*I.minimums[Ce],max:this.exaggeration()*I.maximums[Ce]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast($,y,I){throw new Error("Pure virtual method called.")}pointCoordinate($){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor($){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},j.ErrorEvent=ti,j.EvaluationParameters=Tt,j.Event=oi,j.Evented=vr,j.FillExtrusionBucket=Ch,j.Frustum=cp,j.FrustumCorners=lp,j.GLOBE_METERS_TO_ECEF=Mp,j.GLOBE_RADIUS=cl,j.GLOBE_SCALE_MATCH_LATITUDE=45,j.GLOBE_ZOOM_THRESHOLD_MAX=6,j.GLOBE_ZOOM_THRESHOLD_MIN=5,j.GlobeSharedBuffers=class{constructor($){this._createGrid($),this._createPoles($)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const $ of this._poleSegments)$.destroy();for(const $ of this._gridSegments)$.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const $ of this._wireframeSegments)$.destroy()}}_createGrid($){const y=new er,I=new Rr,Q=65;for(let ne=0;ne<Q;ne++)for(let _e=0;_e<Q;_e++)y.emplaceBack(_e,ne);this._gridSegments=[];for(let ne=0,_e=0;ne<qu.length;ne++){const Te=qu[ne];for(let $e=0;$e<Te;$e++)for(let De=0;De<64;De++){const Ue=$e*Q+De;I.emplaceBack(Ue+1,Ue,Ue+Q),I.emplaceBack(Ue+Q,Ue+Q+1,Ue+1)}const Ce=64*Te*2;this._gridSegments.push(Li.simpleSegment(0,_e,(Te+1)*Q,Ce)),_e+=Ce}this._gridBuffer=$.createVertexBuffer(y,zh.members),this._gridIndexBuffer=$.createIndexBuffer(I,!0)}_createPoles($){const y=new Rr;for(let ne=0;ne<=64;ne++)y.emplaceBack(0,ne+1,ne+2);this._poleIndexBuffer=$.createIndexBuffer(y,!0);const I=new Ki,Q=new Ki;this._poleSegments=[];for(let ne=0,_e=0;ne<5;ne++){const Te=360/(1<<ne);I.emplaceBack(0,-cl,0,.5,0),Q.emplaceBack(0,-cl,0,.5,1);for(let Ce=0;Ce<=64;Ce++){const $e=Ce/64,De=Hr(0,Te,$e),[Ue,He,We]=Hu(Og,Rg,De,cl);I.emplaceBack(Ue,He,We,$e,0),Q.emplaceBack(Ue,He,We,$e,1)}this._poleSegments.push(Li.simpleSegment(_e,0,66,64)),_e+=66}this._poleNorthVertexBuffer=$.createVertexBuffer(I,c_,!1),this._poleSouthVertexBuffer=$.createVertexBuffer(Q,c_,!1)}getGridBuffers($){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[$]]}getPoleBuffers($){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[$]]}getWirefameBuffers($,y){if(!this._wireframeSegments){const I=new eo,Q=64,ne=Q+1;this._wireframeSegments=[];for(let _e=0,Te=0;_e<qu.length;_e++){const Ce=qu[_e];for(let De=0;De<Ce;De++)for(let Ue=0;Ue<Q;Ue++){const He=De*ne+Ue;I.emplaceBack(He,He+1),I.emplaceBack(He,He+ne),I.emplaceBack(He,He+ne+1)}const $e=Ce*Q*3;this._wireframeSegments.push(Li.simpleSegment(0,Te,(Ce+1)*ne,$e)),Te+=$e}this._wireframeIndexBuffer=$.createIndexBuffer(I)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[y]]}},j.GlyphManager=Vu,j.ImagePosition=bp,j.LineAtlas=Lp,j.LngLat=ei,j.LngLatBounds=ja,j.LocalGlyphMode=Ap,j.MAX_MERCATOR_LATITUDE=xa,j.MercatorCoordinate=Zl,j.ONE_EM=uo,j.OverscaledTileID=So,j.Properties=Rn,j.RGBAImage=Zo,j.Ray=sp,j.RequestManager=class{constructor($,y,I){this._transformRequestFn=$,this._customAccessToken=y,this._silenceAuthErrors=!!I,this._createSkuToken()}_createSkuToken(){const $=function(){let y="";for(let I=0;I<10;I++)y+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Gn,y].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=$.token,this._skuTokenExpiresAt=$.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest($,y){return this._transformRequestFn&&this._transformRequestFn($,y)||{url:$}}normalizeStyleURL($,y){if(!gn($))return $;const I=_r($);return I.path=`/styles/v1${I.path}`,this._makeAPIURL(I,this._customAccessToken||y)}normalizeGlyphsURL($,y){if(!gn($))return $;const I=_r($);return I.path=`/fonts/v1${I.path}`,this._makeAPIURL(I,this._customAccessToken||y)}normalizeSourceURL($,y,I,Q){if(!gn($))return $;const ne=_r($);return ne.path=`/v4/${ne.authority}.json`,ne.params.push("secure"),I&&ne.params.push(`language=${I}`),Q&&ne.params.push(`worldview=${Q}`),this._makeAPIURL(ne,this._customAccessToken||y)}normalizeSpriteURL($,y,I,Q){const ne=_r($);return gn($)?(ne.path=`/styles/v1${ne.path}/sprite${y}${I}`,this._makeAPIURL(ne,this._customAccessToken||Q)):(ne.path+=`${y}${I}`,kr(ne))}normalizeTileURL($,y,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),$&&!gn($))return $;const Q=_r($);Q.path=Q.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${y||I&&Q.authority!=="raster"&&I===512?"@2x":""}${wn.supported?".webp":"$1"}`),Q.authority==="raster"?Q.path=`/${vn.RASTER_URL_PREFIX}${Q.path}`:(Q.path=Q.path.replace(/^.+\/v4\//,"/"),Q.path=`/${vn.TILE_URL_VERSION}${Q.path}`);const ne=this._customAccessToken||function(_e){for(const Te of _e){const Ce=Te.match(/^access_token=(.*)$/);if(Ce)return Ce[1]}return null}(Q.params)||vn.ACCESS_TOKEN;return vn.REQUIRE_ACCESS_TOKEN&&ne&&this._skuToken&&Q.params.push(`sku=${this._skuToken}`),this._makeAPIURL(Q,ne)}canonicalizeTileURL($,y){const I=_r($);if(!I.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!I.path.match(/\.[\w]+$/))return $;let Q="mapbox://";I.path.match(/^\/raster\/v1\//)?Q+=`raster/${I.path.replace(`/${vn.RASTER_URL_PREFIX}/`,"")}`:Q+=`tiles/${I.path.replace(`/${vn.TILE_URL_VERSION}/`,"")}`;let ne=I.params;return y&&(ne=ne.filter(_e=>!_e.match(/^access_token=/))),ne.length&&(Q+=`?${ne.join("&")}`),Q}canonicalizeTileset($,y){const I=!!y&&gn(y),Q=[];for(const ne of $.tiles||[])On(ne)?Q.push(this.canonicalizeTileURL(ne,I)):Q.push(ne);return Q}_makeAPIURL($,y){const I="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",Q=_r(vn.API_URL);if($.protocol=Q.protocol,$.authority=Q.authority,$.protocol==="http"){const ne=$.params.indexOf("secure");ne>=0&&$.params.splice(ne,1)}if(Q.path!=="/"&&($.path=`${Q.path}${$.path}`),!vn.REQUIRE_ACCESS_TOKEN)return kr($);if(y=y||vn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!y)throw new Error(`An API access token is required to use Mapbox GL. ${I}`);if(y[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${I}`)}return $.params=$.params.filter(ne=>ne.indexOf("access_token")===-1),$.params.push(`access_token=${y||""}`),kr($)}},j.ResourceType=en,j.SegmentVector=Li,j.SourceCache=Zc,j.StencilMode=Np,j.StructArrayLayout1ui2=mo,j.StructArrayLayout2f1f2i16=ia,j.StructArrayLayout2i4=er,j.StructArrayLayout2ui4=eo,j.StructArrayLayout3f12=yi,j.StructArrayLayout3ui6=Rr,j.StructArrayLayout4i8=gr,j.StructArrayLayout5f20=Ki,j.Texture=Vh,j.Tile=Bp,j.Transitionable=$t,j.Uniform1f=Pu,j.Uniform1i=class extends Fa{constructor($){super($),this.current=0}set($,y,I){this.fetchUniformLocation($,y)&&this.current!==I&&(this.current=I,this.gl.uniform1i(this.location,I))}},j.Uniform2f=class extends Fa{constructor($){super($),this.current=[0,0]}set($,y,I){this.fetchUniformLocation($,y)&&(I[0]===this.current[0]&&I[1]===this.current[1]||(this.current=I,this.gl.uniform2f(this.location,I[0],I[1])))}},j.Uniform3f=class extends Fa{constructor($){super($),this.current=[0,0,0]}set($,y,I){this.fetchUniformLocation($,y)&&(I[0]===this.current[0]&&I[1]===this.current[1]&&I[2]===this.current[2]||(this.current=I,this.gl.uniform3f(this.location,I[0],I[1],I[2])))}},j.Uniform4f=id,j.UniformColor=od,j.UniformMatrix2f=class extends Fa{constructor($){super($),this.current=Yd}set($,y,I){if(this.fetchUniformLocation($,y)){for(let Q=0;Q<4;Q++)if(I[Q]!==this.current[Q]){this.current=I,this.gl.uniformMatrix2fv(this.location,!1,I);break}}}},j.UniformMatrix3f=class extends Fa{constructor($){super($),this.current=Kd}set($,y,I){if(this.fetchUniformLocation($,y)){for(let Q=0;Q<9;Q++)if(I[Q]!==this.current[Q]){this.current=I,this.gl.uniformMatrix3fv(this.location,!1,I);break}}}},j.UniformMatrix4f=class extends Fa{constructor($){super($),this.current=ad}set($,y,I){if(this.fetchUniformLocation($,y)){if(I[12]!==this.current[12]||I[0]!==this.current[0])return this.current=I,void this.gl.uniformMatrix4fv(this.location,!1,I);for(let Q=1;Q<16;Q++)if(I[Q]!==this.current[Q]){this.current=I,this.gl.uniformMatrix4fv(this.location,!1,I);break}}}},j.UnwrappedTileID=If,j.ValidationError=lr,j.VectorTileWorkerSource=class extends vr{constructor($,y,I,Q,ne){super(),this.actor=$,this.layerIndex=y,this.availableImages=I,this.loadVectorData=ne||G_,this.loading={},this.loaded={},this.deduped=new V_($.scheduler),this.isSpriteLoaded=Q,this.scheduler=$.scheduler}loadTile($,y){const I=$.uid,Q=$&&$.request,ne=Q&&Q.collectResourceTiming,_e=this.loading[I]=new ry($);_e.abort=this.loadVectorData($,(Te,Ce)=>{const $e=!this.loading[I];if(delete this.loading[I],$e||Te||!Ce)return _e.status="done",$e||(this.loaded[I]=_e),y(Te);const De=Ce.rawData,Ue={};Ce.expires&&(Ue.expires=Ce.expires),Ce.cacheControl&&(Ue.cacheControl=Ce.cacheControl),_e.vectorTile=Ce.vectorTile||new Hc.VectorTile(new Oh(De));const He=()=>{_e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,(We,et)=>{if(We||!et)return y(We);const it={};if(ne){const _t=In(Q);_t.length>0&&(it.resourceTiming=JSON.parse(JSON.stringify(_t)))}y(null,bt({rawTileData:De.slice(0)},et,Ue,it))})};this.isSpriteLoaded?He():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(He,{type:"parseTile",isSymbolTile:$.isSymbolTile,zoom:$.tileZoom}):He()}),this.loaded=this.loaded||{},this.loaded[I]=_e})}reloadTile($,y){const I=this.loaded,Q=$.uid,ne=this;if(I&&I[Q]){const _e=I[Q];_e.showCollisionBoxes=$.showCollisionBoxes,_e.enableTerrain=!!$.enableTerrain,_e.projection=$.projection,_e.tileTransform=Wc($.tileID.canonical,$.projection);const Te=(Ce,$e)=>{const De=_e.reloadCallback;De&&(delete _e.reloadCallback,_e.parse(_e.vectorTile,ne.layerIndex,this.availableImages,ne.actor,De)),y(Ce,$e)};_e.status==="parsing"?_e.reloadCallback=Te:_e.status==="done"&&(_e.vectorTile?_e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,Te):Te())}}abortTile($,y){const I=$.uid,Q=this.loading[I];Q&&(Q.abort&&Q.abort(),delete this.loading[I]),y()}removeTile($,y){const I=this.loaded,Q=$.uid;I&&I[Q]&&delete I[Q],y()}},j.WritingMode=aa,j.ZoomHistory=Pc,j.add=Xl,j.addDynamicAttributes=Vd,j.adjoint=function($,y){var I=y[0],Q=y[1],ne=y[2],_e=y[3],Te=y[4],Ce=y[5],$e=y[6],De=y[7],Ue=y[8];return $[0]=Te*Ue-Ce*De,$[1]=ne*De-Q*Ue,$[2]=Q*Ce-ne*Te,$[3]=Ce*$e-_e*Ue,$[4]=I*Ue-ne*$e,$[5]=ne*_e-I*Ce,$[6]=_e*De-Te*$e,$[7]=Q*$e-I*De,$[8]=I*Te-Q*_e,$},j.asyncAll=dt,j.bezier=Be,j.bindAll=st,j.boundsAttributes=C_,j.bufferConvexPolygon=function($,y){const I=[];for(let Q=0;Q<$.length;Q++){const ne=Je(Q-1,-1,$.length-1),_e=Je(Q+1,-1,$.length-1),Te=$[Q],Ce=$[_e],$e=$[ne].sub(Te).unit(),De=Ce.sub(Te).unit(),Ue=De.angleWithSep($e.x,$e.y),He=$e.add(De).unit().mult(-1*y/Math.sin(Ue/2));I.push(Te.add(He))}return I},j.cacheEntryPossiblyAdded=function($){jt++,jt>Ea&&($.getActor().send("enforceCacheSizeLimit",Fo),jt=0)},j.calculateGlobeLabelMatrix=function($,y){const{x:I,y:Q}=$.point,ne=__(I,Q,$.worldSize/$._pixelsPerMercatorPixel,0,0);return zu(ne,ne,Op(ys(y)))},j.calculateGlobeMatrix=function($){const{x:y,y:I}=$.point,{lng:Q,lat:ne}=$._center;return __(y,I,$.worldSize,Q,ne)},j.calculateGlobeMercatorMatrix=function($){const y=$.pixelsPerMeter,I=y/Do(1,$.center.lat),Q=ms(new Float64Array(16));return vh(Q,Q,[$.point.x,$.point.y,0]),Vc(Q,Q,[I,I,y]),Float32Array.from(Q)},j.circumferenceAtLatitude=mh,j.clamp=Xe,j.clearTileCache=function($){const y=Lt(),I=[];for(const Q in vi)y&&I.push(y.delete(Q)),delete vi[Q];$&&Promise.all(I).catch($).then(()=>$())},j.clipLine=t_,j.clone=function($){var y=new Wo(16);return y[0]=$[0],y[1]=$[1],y[2]=$[2],y[3]=$[3],y[4]=$[4],y[5]=$[5],y[6]=$[6],y[7]=$[7],y[8]=$[8],y[9]=$[9],y[10]=$[10],y[11]=$[11],y[12]=$[12],y[13]=$[13],y[14]=$[14],y[15]=$[15],y},j.clone$1=Ut,j.collisionCircleLayout=Ym,j.config=vn,j.conjugate=function($,y){return $[0]=-y[0],$[1]=-y[1],$[2]=-y[2],$[3]=y[3],$},j.create=function(){var $=new Wo(16);return Wo!=Float32Array&&($[1]=0,$[2]=0,$[3]=0,$[4]=0,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[11]=0,$[12]=0,$[13]=0,$[14]=0),$[0]=1,$[5]=1,$[10]=1,$[15]=1,$},j.create$1=Kp,j.createExpression=ns,j.createLayout=Dn,j.createStyleLayer=function($){return $.type==="custom"?new Zg($):new Kg[$.type]($)},j.cross=ap,j.degToRad=Pe,j.distance=function($,y){return Math.hypot(y[0]-$[0],y[1]-$[1],y[2]-$[2])},j.div=function($,y,I){return $[0]=y[0]/I[0],$[1]=y[1]/I[1],$[2]=y[2]/I[2],$},j.dot=ba,j.ease=Ze,j.easeCubicInOut=ze,j.emitValidationErrors=Ic,j.endsWith=pt,j.enforceCacheSizeLimit=function($){for(const y in vi)lt(y),vi[y].then(I=>{I.keys().then(Q=>{for(let ne=0;ne<Q.length-$;ne++)I.delete(Q[ne])})})},j.evaluateSizeForFeature=Md,j.evaluateSizeForZoom=Fu,j.evaluateVariableOffset=a_,j.evented=ct,j.exactEquals=function($,y){return $[0]===y[0]&&$[1]===y[1]&&$[2]===y[2]&&$[3]===y[3]},j.exactEquals$1=function($,y){return $[0]===y[0]&&$[1]===y[1]&&$[2]===y[2]},j.exported=$n,j.exported$1=wn,j.extend=bt,j.extend$1=po,j.fillExtrusionHeightLift=Sf,j.filterObject=ut,j.fromMat4=function($,y){return $[0]=y[0],$[1]=y[1],$[2]=y[2],$[3]=y[4],$[4]=y[5],$[5]=y[6],$[6]=y[8],$[7]=y[9],$[8]=y[10],$},j.fromQuat=function($,y){var I=y[0],Q=y[1],ne=y[2],_e=y[3],Te=I+I,Ce=Q+Q,$e=ne+ne,De=I*Te,Ue=Q*Te,He=Q*Ce,We=ne*Te,et=ne*Ce,it=ne*$e,_t=_e*Te,Et=_e*Ce,Bt=_e*$e;return $[0]=1-He-it,$[1]=Ue+Bt,$[2]=We-Et,$[3]=0,$[4]=Ue-Bt,$[5]=1-De-it,$[6]=et+_t,$[7]=0,$[8]=We+Et,$[9]=et-_t,$[10]=1-De-He,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$},j.fromRotation=function($,y){var I=Math.sin(y),Q=Math.cos(y);return $[0]=Q,$[1]=I,$[2]=0,$[3]=-I,$[4]=Q,$[5]=0,$[6]=0,$[7]=0,$[8]=1,$},j.fromScaling=Yp,j.furthestTileCorner=function($){const y=Math.round(($+45+360)%360/90)%4;return Ne[y]},j.getAABBPointSquareDist=function($,y,I){let Q=0;for(let ne=0;ne<2;++ne){const _e=I?I[ne]:0;$[ne]>_e&&(Q+=($[ne]-_e)*($[ne]-_e)),y[ne]<_e&&(Q+=(_e-y[ne])*(_e-y[ne]))}return Q},j.getAnchorAlignment=Tp,j.getAnchorJustification=Sp,j.getBounds=function($){let y=1/0,I=1/0,Q=-1/0,ne=-1/0;for(const _e of $)y=Math.min(y,_e.x),I=Math.min(I,_e.y),Q=Math.max(Q,_e.x),ne=Math.max(ne,_e.y);return{min:new ye(y,I),max:new ye(Q,ne)}},j.getColumn=un,j.getGridMatrix=function($,y,I){const Q=y.getNorth(),ne=y.getSouth(),_e=y.getWest(),Te=.015625;return[0,(y.getEast()-_e)*Te,1<<$.z,(ne-Q)/qu[I],0,$.y,Q,_e,Te]},j.getImage=Er,j.getJSON=function($,y){return tn(bt($,{type:"json"}),y)},j.getLatitudinalLod=function($){const y=80.051129;$=Xe($,-80.051129,y)/y*90;const I=Math.pow(Math.abs(Math.sin(Pe($))),3);return Math.round(I*(qu.length-1))},j.getMapSessionAPI=Di,j.getPerformanceMeasurement=In,j.getProjection=E_,j.getRTLTextPluginStatus=mt,j.getReferrer=hn,j.getTilePoint=function($,{x:y,y:I},Q=0){return new ye(((y-Q)*$.scale-$.x)*Ar,(I*$.scale-$.y)*Ar)},j.getTileVec3=function($,y,I=0){return Du(((y.x-I)*$.scale-$.x)*Ar,(y.y*$.scale-$.y)*Ar,ud(y.z,y.y))},j.getVideo=function($,y){const I=xe.document.createElement("video");I.muted=!0,I.onloadstart=function(){y(null,I)};for(let Q=0;Q<$.length;Q++){const ne=xe.document.createElement("source");qn($[Q])||(I.crossOrigin="Anonymous"),ne.src=$[Q],I.appendChild(ne)}return{cancel:()=>{}}},j.globeCenterToScreenPoint=function($){const y=[0,0,0],I=ms(new Float64Array(16));return zu(I,$.pixelMatrix,$.globeMatrix),Wi(y,y,I),new ye(y[0],y[1])},j.globeDenormalizeECEF=Op,j.globeECEFOrigin=function($,y){const I=[0,0,0];return Wi(I,I,Lh(ys(y.canonical))),Wi(I,I,$),I},j.globeNormalizeECEF=Lh,j.globePixelsToTileUnits=function($,y){return Ar/(512*Math.pow(2,$))*Bd(ys(y))},j.globePoleMatrixForTile=function($,y,I){const Q=ms(new Float64Array(16)),ne=(y/(1<<$)-.5)*Math.PI*2;return gd(Q,I.globeMatrix,ne),Float32Array.from(Q)},j.globeTileBounds=ys,j.globeTiltAtLngLat=m_,j.globeToMercatorTransition=Bh,j.globeUseCustomAntiAliasing=function($,y,I){const Q=Bh(I.zoom),ne=$.style.map._antialias,_e=!!y.extStandardDerivatives,Te=y.extStandardDerivativesForceOff||$.terrain&&$.terrain.exaggeration()>0;return Q===0&&!ne&&!Te&&_e},j.identity=ms,j.identity$1=of,j.invert=ep,j.isFullscreen=function(){return!!xe.document.fullscreenElement||!!xe.document.webkitFullscreenElement},j.isLngLatBehindGlobe=function($,y){return m_($,y)>Math.PI/2*1.01},j.isMapAuthenticated=function($){return Ti.has($)},j.isMapboxURL=gn,j.isSafariWithAntialiasingBug=function($){const y=$.navigator?$.navigator.userAgent:null;return!!Ot($)&&y&&(y.match("Version/15.4")||y.match("Version/15.5")||y.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},j.latFromMercatorY=Yi,j.len=rm,j.length=xh,j.length$1=function($){return Math.hypot($[0],$[1],$[2],$[3])},j.loadVectorTile=G_,j.makeRequest=tn,j.mapValue=function($,y,I,Q,ne){return Xe(($-y)/(I-y)*(ne-Q)+Q,Q,ne)},j.mercatorScale=hd,j.mercatorXfromLng=va,j.mercatorYfromLat=Ua,j.mercatorZfromAltitude=Do,j.mul=tm,j.mul$1=nm,j.multiply=zu,j.multiply$1=function($,y,I){var Q=y[0],ne=y[1],_e=y[2],Te=y[3],Ce=y[4],$e=y[5],De=y[6],Ue=y[7],He=y[8],We=I[0],et=I[1],it=I[2],_t=I[3],Et=I[4],Bt=I[5],qt=I[6],Ft=I[7],Gt=I[8];return $[0]=We*Q+et*Te+it*De,$[1]=We*ne+et*Ce+it*Ue,$[2]=We*_e+et*$e+it*He,$[3]=_t*Q+Et*Te+Bt*De,$[4]=_t*ne+Et*Ce+Bt*Ue,$[5]=_t*_e+Et*$e+Bt*He,$[6]=qt*Q+Ft*Te+Gt*De,$[7]=qt*ne+Ft*Ce+Gt*Ue,$[8]=qt*_e+Ft*$e+Gt*He,$},j.multiply$2=ef,j.nextPowerOfTwo=rt,j.normalize=ko,j.normalize$1=function($,y){var I=y[0],Q=y[1],ne=y[2],_e=y[3],Te=I*I+Q*Q+ne*ne+_e*_e;return Te>0&&(Te=1/Math.sqrt(Te)),$[0]=I*Te,$[1]=Q*Te,$[2]=ne*Te,$[3]=_e*Te,$},j.number=Hr,j.ortho=function($,y,I,Q,ne,_e,Te){var Ce=1/(y-I),$e=1/(Q-ne),De=1/(_e-Te);return $[0]=-2*Ce,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=-2*$e,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=2*De,$[11]=0,$[12]=(y+I)*Ce,$[13]=(ne+Q)*$e,$[14]=(Te+_e)*De,$[15]=1,$},j.pbf=Oh,j.perspective=function($,y,I,Q,ne){var _e,Te=1/Math.tan(y/2);return $[0]=Te/I,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=Te,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[11]=-1,$[12]=0,$[13]=0,$[15]=0,ne!=null&&ne!==1/0?($[10]=(ne+Q)*(_e=1/(Q-ne)),$[14]=2*ne*Q*_e):($[10]=-1,$[14]=-2*Q),$},j.pick=function($,y){const I={};for(let Q=0;Q<y.length;Q++){const ne=y[Q];ne in $&&(I[ne]=$[ne])}return I},j.plugin=At,j.pointGeometry=ye,j.polygonContainsPoint=si,j.polygonIntersectsBox=wi,j.polygonIntersectsPolygon=ln,j.polygonizeBounds=function($,y,I=0,Q=!0){const ne=new ye(I,I),_e=$.sub(ne),Te=y.add(ne),Ce=[_e,new ye(Te.x,_e.y),Te,new ye(_e.x,Te.y)];return Q&&Ce.push(_e.clone()),Ce},j.posAttributes=zh,j.postMapLoadEvent=jr,j.postTurnstileEvent=Br,j.potpack=xp,j.prevPowerOfTwo=function($){return $<=1?1:Math.pow(2,Math.floor(Math.log($)/Math.LN2))},j.radToDeg=Re,j.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],j.registerForPluginStateChange=function($){return $({pluginStatus:Fe,pluginURL:Ge}),ct.on("pluginStateChange",$),$},j.removeAuthState=function($){Ti.delete($)},j.renderColorRamp=hp,j.resample=dd,j.rotateX=tp,j.rotateX$1=af,j.rotateY=gd,j.rotateY$1=sf,j.rotateZ=function($,y,I){var Q=Math.sin(I),ne=Math.cos(I),_e=y[0],Te=y[1],Ce=y[2],$e=y[3],De=y[4],Ue=y[5],He=y[6],We=y[7];return y!==$&&($[8]=y[8],$[9]=y[9],$[10]=y[10],$[11]=y[11],$[12]=y[12],$[13]=y[13],$[14]=y[14],$[15]=y[15]),$[0]=_e*ne+De*Q,$[1]=Te*ne+Ue*Q,$[2]=Ce*ne+He*Q,$[3]=$e*ne+We*Q,$[4]=De*ne-_e*Q,$[5]=Ue*ne-Te*Q,$[6]=He*ne-Ce*Q,$[7]=We*ne-$e*Q,$},j.rotateZ$1=function($,y,I){I*=.5;var Q=y[0],ne=y[1],_e=y[2],Te=y[3],Ce=Math.sin(I),$e=Math.cos(I);return $[0]=Q*$e+ne*Ce,$[1]=ne*$e-Q*Ce,$[2]=_e*$e+Te*Ce,$[3]=Te*$e-_e*Ce,$},j.scale=Vc,j.scale$1=nf,j.scale$2=Va,j.scaleAndAdd=yd,j.setCacheLimits=function($,y){Fo=$,Ea=y},j.setColumn=function($,y,I){$[4*y+0]=I[0],$[4*y+1]=I[1],$[4*y+2]=I[2],$[4*y+3]=I[3]},j.setRTLTextPlugin=function($,y,I=!1){if(Fe===be||Fe===Ie||Fe===Oe)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ge=$n.resolveURL($),Fe=be,Le=y,Ye(),I||Mt()},j.smoothstep=qe,j.spec=mn,j.storeAuthState=function($,y){y?Ti.add($):Ti.delete($)},j.sub=Ga,j.subtract=rp,j.symbolSize=Jm,j.tileAABB=function($,y,I,Q,ne,_e,Te,Ce,$e){if($e.name==="globe")return Pg($,y,new kd(I,Q,ne));const De=Wc({z:I,x:Q,y:ne},$e);return new Lo([(_e+De.x/De.scale)*y,y*(De.y/De.scale),Te],[(_e+De.x2/De.scale)*y,y*(De.y2/De.scale),Ce])},j.tileCornersToBounds=Dd,j.tileTransform=Wc,j.transformMat3=function($,y,I){var Q=y[0],ne=y[1],_e=y[2];return $[0]=Q*I[0]+ne*I[3]+_e*I[6],$[1]=Q*I[1]+ne*I[4]+_e*I[7],$[2]=Q*I[2]+ne*I[5]+_e*I[8],$},j.transformMat4=Wi,j.transformMat4$1=Gc,j.transformQuat=tf,j.transitionTileAABBinECEF=d_,j.translate=vh,j.transpose=function($,y){if($===y){var I=y[1],Q=y[2],ne=y[5];$[1]=y[3],$[2]=y[6],$[3]=I,$[5]=y[7],$[6]=Q,$[7]=ne}else $[0]=y[0],$[1]=y[3],$[2]=y[6],$[3]=y[1],$[4]=y[4],$[5]=y[7],$[6]=y[2],$[7]=y[5],$[8]=y[8];return $},j.triggerPluginCompletionEvent=Ke,j.uniqueId=nt,j.updateGlobeVertexNormal=function($,y,I,Q,ne){const _e=5*y+2;$.float32[_e+0]=I,$.float32[_e+1]=Q,$.float32[_e+2]=ne},j.validateCustomStyleLayer=function($){const y=[],I=$.id;return I===void 0&&y.push({message:`layers.${I}: missing required property "id"`}),$.render===void 0&&y.push({message:`layers.${I}: missing required method "render"`}),$.renderingMode&&$.renderingMode!=="2d"&&$.renderingMode!=="3d"&&y.push({message:`layers.${I}: property "renderingMode" must be either "2d" or "3d"`}),y},j.validateFilter=$=>bo(Oa($)),j.validateFog=$=>bo(wu($)),j.validateLayer=$=>bo(zl($)),j.validateLight=$=>bo(bu($)),j.validateSource=$=>bo(xu($)),j.validateStyle=Ll,j.validateTerrain=$=>bo(ss($)),j.values=Ct,j.vectorTile=Hc,j.version=It,j.warnOnce=zt,j.window=xe,j.wrap=Je}),te(["./shared"],function(j){function xe(Lt){if(typeof Lt=="number"||typeof Lt=="boolean"||typeof Lt=="string"||Lt==null)return JSON.stringify(Lt);if(Array.isArray(Lt)){let ft="[";for(const Dt of Lt)ft+=`${xe(Dt)},`;return`${ft}]`}let lt="{";for(const ft of Object.keys(Lt).sort())lt+=`${ft}:${xe(Lt[ft])},`;return`${lt}}`}function re(Lt){let lt="";for(const ft of j.refProperties)lt+=`/${xe(Lt[ft])}`;return lt}class ge{constructor(lt){this.keyCache={},lt&&this.replace(lt)}replace(lt){this._layerConfigs={},this._layers={},this.update(lt,[])}update(lt,ft){for(const jt of lt)this._layerConfigs[jt.id]=jt,(this._layers[jt.id]=j.createStyleLayer(jt)).compileFilter(),this.keyCache[jt.id]&&delete this.keyCache[jt.id];for(const jt of ft)delete this.keyCache[jt],delete this._layerConfigs[jt],delete this._layers[jt];this.familiesBySource={};const Dt=function(jt,en){const pn={};for(let tn=0;tn<jt.length;tn++){const fn=en&&en[jt[tn].id]||re(jt[tn]);en&&(en[jt[tn].id]=fn);let Nn=pn[fn];Nn||(Nn=pn[fn]=[]),Nn.push(jt[tn])}const hn=[];for(const tn in pn)hn.push(pn[tn]);return hn}(j.values(this._layerConfigs),this.keyCache);for(const jt of Dt){const en=jt.map(ar=>this._layers[ar.id]),pn=en[0];if(pn.visibility==="none")continue;const hn=pn.source||"";let tn=this.familiesBySource[hn];tn||(tn=this.familiesBySource[hn]={});const fn=pn.sourceLayer||"_geojsonTileLayer";let Nn=tn[fn];Nn||(Nn=tn[fn]=[]),Nn.push(en)}}}class ye{loadTile(lt,ft){const{uid:Dt,encoding:jt,rawImageData:en,padding:pn,buildQuadTree:hn}=lt,tn=j.window.ImageBitmap&&en instanceof j.window.ImageBitmap?this.getImageData(en,pn):en;ft(null,new j.DEMData(Dt,tn,jt,pn<1,hn))}getImageData(lt,ft){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(lt.width,lt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=lt.width,this.offscreenCanvas.height=lt.height,this.offscreenCanvasContext.drawImage(lt,0,0,lt.width,lt.height);const Dt=this.offscreenCanvasContext.getImageData(-ft,-ft,lt.width+2*ft,lt.height+2*ft);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Dt}}var we=function Lt(lt,ft){var Dt,jt=lt&&lt.type;if(jt==="FeatureCollection")for(Dt=0;Dt<lt.features.length;Dt++)Lt(lt.features[Dt],ft);else if(jt==="GeometryCollection")for(Dt=0;Dt<lt.geometries.length;Dt++)Lt(lt.geometries[Dt],ft);else if(jt==="Feature")Lt(lt.geometry,ft);else if(jt==="Polygon")ke(lt.coordinates,ft);else if(jt==="MultiPolygon")for(Dt=0;Dt<lt.coordinates.length;Dt++)ke(lt.coordinates[Dt],ft);return lt};function ke(Lt,lt){if(Lt.length!==0){Se(Lt[0],lt);for(var ft=1;ft<Lt.length;ft++)Se(Lt[ft],!lt)}}function Se(Lt,lt){for(var ft=0,Dt=0,jt=0,en=Lt.length,pn=en-1;jt<en;pn=jt++){var hn=(Lt[jt][0]-Lt[pn][0])*(Lt[pn][1]+Lt[jt][1]),tn=ft+hn;Dt+=Math.abs(ft)>=Math.abs(hn)?ft-tn+hn:hn-tn+ft,ft=tn}ft+Dt>=0!=!!lt&&Lt.reverse()}const Pe=j.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Re{constructor(lt){this._feature=lt,this.extent=j.EXTENT,this.type=lt.type,this.properties=lt.tags,"id"in lt&&!isNaN(lt.id)&&(this.id=parseInt(lt.id,10))}loadGeometry(){if(this._feature.type===1){const lt=[];for(const ft of this._feature.geometry)lt.push([new j.pointGeometry(ft[0],ft[1])]);return lt}{const lt=[];for(const ft of this._feature.geometry){const Dt=[];for(const jt of ft)Dt.push(new j.pointGeometry(jt[0],jt[1]));lt.push(Dt)}return lt}}toGeoJSON(lt,ft,Dt){return Pe.call(this,lt,ft,Dt)}}class Ne{constructor(lt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=j.EXTENT,this.length=lt.length,this._features=lt}feature(lt){return new Re(this._features[lt])}}var ze=j.vectorTile.VectorTileFeature,Be=Ze;function Ze(Lt,lt){this.options=lt||{},this.features=Lt,this.length=Lt.length}function Xe(Lt,lt){this.id=typeof Lt.id=="number"?Lt.id:void 0,this.type=Lt.type,this.rawGeometry=Lt.type===1?[Lt.geometry]:Lt.geometry,this.properties=Lt.tags,this.extent=lt||4096}Ze.prototype.feature=function(Lt){return new Xe(this.features[Lt],this.options.extent)},Xe.prototype.loadGeometry=function(){var Lt=this.rawGeometry;this.geometry=[];for(var lt=0;lt<Lt.length;lt++){for(var ft=Lt[lt],Dt=[],jt=0;jt<ft.length;jt++)Dt.push(new j.pointGeometry(ft[jt][0],ft[jt][1]));this.geometry.push(Dt)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Lt=this.geometry,lt=1/0,ft=-1/0,Dt=1/0,jt=-1/0,en=0;en<Lt.length;en++)for(var pn=Lt[en],hn=0;hn<pn.length;hn++){var tn=pn[hn];lt=Math.min(lt,tn.x),ft=Math.max(ft,tn.x),Dt=Math.min(Dt,tn.y),jt=Math.max(jt,tn.y)}return[lt,Dt,ft,jt]},Xe.prototype.toGeoJSON=ze.prototype.toGeoJSON;var qe=dt,Je=Be;function dt(Lt){var lt=new j.pbf;return function(ft,Dt){for(var jt in ft.layers)Dt.writeMessage(3,Ct,ft.layers[jt])}(Lt,lt),lt.finish()}function Ct(Lt,lt){var ft;lt.writeVarintField(15,Lt.version||1),lt.writeStringField(1,Lt.name||""),lt.writeVarintField(5,Lt.extent||4096);var Dt={keys:[],values:[],keycache:{},valuecache:{}};for(ft=0;ft<Lt.length;ft++)Dt.feature=Lt.feature(ft),lt.writeMessage(2,bt,Dt);var jt=Dt.keys;for(ft=0;ft<jt.length;ft++)lt.writeStringField(3,jt[ft]);var en=Dt.values;for(ft=0;ft<en.length;ft++)lt.writeMessage(4,ht,en[ft])}function bt(Lt,lt){var ft=Lt.feature;ft.id!==void 0&&lt.writeVarintField(1,ft.id),lt.writeMessage(2,xt,Lt),lt.writeVarintField(3,ft.type),lt.writeMessage(4,rt,ft)}function xt(Lt,lt){var ft=Lt.feature,Dt=Lt.keys,jt=Lt.values,en=Lt.keycache,pn=Lt.valuecache;for(var hn in ft.properties){var tn=ft.properties[hn],fn=en[hn];if(tn!==null){fn===void 0&&(Dt.push(hn),en[hn]=fn=Dt.length-1),lt.writeVarint(fn);var Nn=typeof tn;Nn!=="string"&&Nn!=="boolean"&&Nn!=="number"&&(tn=JSON.stringify(tn));var ar=Nn+":"+tn,qn=pn[ar];qn===void 0&&(jt.push(tn),pn[ar]=qn=jt.length-1),lt.writeVarint(qn)}}}function nt(Lt,lt){return(lt<<3)+(7&Lt)}function tt(Lt){return Lt<<1^Lt>>31}function rt(Lt,lt){for(var ft=Lt.loadGeometry(),Dt=Lt.type,jt=0,en=0,pn=ft.length,hn=0;hn<pn;hn++){var tn=ft[hn],fn=1;Dt===1&&(fn=tn.length),lt.writeVarint(nt(1,fn));for(var Nn=Dt===3?tn.length-1:tn.length,ar=0;ar<Nn;ar++){ar===1&&Dt!==1&&lt.writeVarint(nt(2,Nn-1));var qn=tn[ar].x-jt,br=tn[ar].y-en;lt.writeVarint(tt(qn)),lt.writeVarint(tt(br)),jt+=qn,en+=br}Dt===3&&lt.writeVarint(nt(7,1))}}function ht(Lt,lt){var ft=typeof Lt;ft==="string"?lt.writeStringField(1,Lt):ft==="boolean"?lt.writeBooleanField(7,Lt):ft==="number"&&(Lt%1!=0?lt.writeDoubleField(3,Lt):Lt<0?lt.writeSVarintField(6,Lt):lt.writeVarintField(5,Lt))}function st(Lt,lt,ft,Dt,jt,en){if(jt-Dt<=ft)return;const pn=Dt+jt>>1;pt(Lt,lt,pn,Dt,jt,en%2),st(Lt,lt,ft,Dt,pn-1,en+1),st(Lt,lt,ft,pn+1,jt,en+1)}function pt(Lt,lt,ft,Dt,jt,en){for(;jt>Dt;){if(jt-Dt>600){const fn=jt-Dt+1,Nn=ft-Dt+1,ar=Math.log(fn),qn=.5*Math.exp(2*ar/3),br=.5*Math.sqrt(ar*qn*(fn-qn)/fn)*(Nn-fn/2<0?-1:1);pt(Lt,lt,ft,Math.max(Dt,Math.floor(ft-Nn*qn/fn+br)),Math.min(jt,Math.floor(ft+(fn-Nn)*qn/fn+br)),en)}const pn=lt[2*ft+en];let hn=Dt,tn=jt;for(vt(Lt,lt,Dt,ft),lt[2*jt+en]>pn&&vt(Lt,lt,Dt,jt);hn<tn;){for(vt(Lt,lt,hn,tn),hn++,tn--;lt[2*hn+en]<pn;)hn++;for(;lt[2*tn+en]>pn;)tn--}lt[2*Dt+en]===pn?vt(Lt,lt,Dt,tn):(tn++,vt(Lt,lt,tn,jt)),tn<=ft&&(Dt=tn+1),ft<=tn&&(jt=tn-1)}}function vt(Lt,lt,ft,Dt){ut(Lt,ft,Dt),ut(lt,2*ft,2*Dt),ut(lt,2*ft+1,2*Dt+1)}function ut(Lt,lt,ft){const Dt=Lt[lt];Lt[lt]=Lt[ft],Lt[ft]=Dt}function Ut(Lt,lt,ft,Dt){const jt=Lt-ft,en=lt-Dt;return jt*jt+en*en}qe.fromVectorTileJs=dt,qe.fromGeojsonVt=function(Lt,lt){lt=lt||{};var ft={};for(var Dt in Lt)ft[Dt]=new Be(Lt[Dt].features,lt),ft[Dt].name=Dt,ft[Dt].version=lt.version,ft[Dt].extent=lt.extent;return dt({layers:ft})},qe.GeoJSONWrapper=Je;const at=Lt=>Lt[0],zt=Lt=>Lt[1];class sn{constructor(lt,ft=at,Dt=zt,jt=64,en=Float64Array){this.nodeSize=jt,this.points=lt;const pn=lt.length<65536?Uint16Array:Uint32Array,hn=this.ids=new pn(lt.length),tn=this.coords=new en(2*lt.length);for(let fn=0;fn<lt.length;fn++)hn[fn]=fn,tn[2*fn]=ft(lt[fn]),tn[2*fn+1]=Dt(lt[fn]);st(hn,tn,jt,0,hn.length-1,0)}range(lt,ft,Dt,jt){return function(en,pn,hn,tn,fn,Nn,ar){const qn=[0,en.length-1,0],br=[];let wr,mr;for(;qn.length;){const Er=qn.pop(),zr=qn.pop(),Qr=qn.pop();if(zr-Qr<=ar){for(let vr=Qr;vr<=zr;vr++)wr=pn[2*vr],mr=pn[2*vr+1],wr>=hn&&wr<=fn&&mr>=tn&&mr<=Nn&&br.push(en[vr]);continue}const oi=Math.floor((Qr+zr)/2);wr=pn[2*oi],mr=pn[2*oi+1],wr>=hn&&wr<=fn&&mr>=tn&&mr<=Nn&&br.push(en[oi]);const ti=(Er+1)%2;(Er===0?hn<=wr:tn<=mr)&&(qn.push(Qr),qn.push(oi-1),qn.push(ti)),(Er===0?fn>=wr:Nn>=mr)&&(qn.push(oi+1),qn.push(zr),qn.push(ti))}return br}(this.ids,this.coords,lt,ft,Dt,jt,this.nodeSize)}within(lt,ft,Dt){return function(jt,en,pn,hn,tn,fn){const Nn=[0,jt.length-1,0],ar=[],qn=tn*tn;for(;Nn.length;){const br=Nn.pop(),wr=Nn.pop(),mr=Nn.pop();if(wr-mr<=fn){for(let ti=mr;ti<=wr;ti++)Ut(en[2*ti],en[2*ti+1],pn,hn)<=qn&&ar.push(jt[ti]);continue}const Er=Math.floor((mr+wr)/2),zr=en[2*Er],Qr=en[2*Er+1];Ut(zr,Qr,pn,hn)<=qn&&ar.push(jt[Er]);const oi=(br+1)%2;(br===0?pn-tn<=zr:hn-tn<=Qr)&&(Nn.push(mr),Nn.push(Er-1),Nn.push(oi)),(br===0?pn+tn>=zr:hn+tn>=Qr)&&(Nn.push(Er+1),Nn.push(wr),Nn.push(oi))}return ar}(this.ids,this.coords,lt,ft,Dt,this.nodeSize)}}const Mn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Lt=>Lt},rn=Math.fround||(on=new Float32Array(1),Lt=>(on[0]=+Lt,on[0]));var on;class Zt{constructor(lt){this.options=nn(Object.create(Mn),lt),this.trees=new Array(this.options.maxZoom+1)}load(lt){const{log:ft,minZoom:Dt,maxZoom:jt,nodeSize:en}=this.options;ft&&console.time("total time");const pn=`prepare ${lt.length} points`;ft&&console.time(pn),this.points=lt;let hn=[];for(let tn=0;tn<lt.length;tn++)lt[tn].geometry&&hn.push(Qt(lt[tn],tn));this.trees[jt+1]=new sn(hn,xn,En,en,Float32Array),ft&&console.timeEnd(pn);for(let tn=jt;tn>=Dt;tn--){const fn=+Date.now();hn=this._cluster(hn,tn),this.trees[tn]=new sn(hn,xn,En,en,Float32Array),ft&&console.log("z%d: %d clusters in %dms",tn,hn.length,+Date.now()-fn)}return ft&&console.timeEnd("total time"),this}getClusters(lt,ft){let Dt=((lt[0]+180)%360+360)%360-180;const jt=Math.max(-90,Math.min(90,lt[1]));let en=lt[2]===180?180:((lt[2]+180)%360+360)%360-180;const pn=Math.max(-90,Math.min(90,lt[3]));if(lt[2]-lt[0]>=360)Dt=-180,en=180;else if(Dt>en){const Nn=this.getClusters([Dt,jt,180,pn],ft),ar=this.getClusters([-180,jt,en,pn],ft);return Nn.concat(ar)}const hn=this.trees[this._limitZoom(ft)],tn=hn.range(In(Dt),It(pn),In(en),It(jt)),fn=[];for(const Nn of tn){const ar=hn.points[Nn];fn.push(ar.numPoints?un(ar):this.points[ar.index])}return fn}getChildren(lt){const ft=this._getOriginId(lt),Dt=this._getOriginZoom(lt),jt="No cluster with the specified id.",en=this.trees[Dt];if(!en)throw new Error(jt);const pn=en.points[ft];if(!pn)throw new Error(jt);const hn=this.options.radius/(this.options.extent*Math.pow(2,Dt-1)),tn=en.within(pn.x,pn.y,hn),fn=[];for(const Nn of tn){const ar=en.points[Nn];ar.parentId===lt&&fn.push(ar.numPoints?un(ar):this.points[ar.index])}if(fn.length===0)throw new Error(jt);return fn}getLeaves(lt,ft,Dt){const jt=[];return this._appendLeaves(jt,lt,ft=ft||10,Dt=Dt||0,0),jt}getTile(lt,ft,Dt){const jt=this.trees[this._limitZoom(lt)],en=Math.pow(2,lt),{extent:pn,radius:hn}=this.options,tn=hn/pn,fn=(Dt-tn)/en,Nn=(Dt+1+tn)/en,ar={features:[]};return this._addTileFeatures(jt.range((ft-tn)/en,fn,(ft+1+tn)/en,Nn),jt.points,ft,Dt,en,ar),ft===0&&this._addTileFeatures(jt.range(1-tn/en,fn,1,Nn),jt.points,en,Dt,en,ar),ft===en-1&&this._addTileFeatures(jt.range(0,fn,tn/en,Nn),jt.points,-1,Dt,en,ar),ar.features.length?ar:null}getClusterExpansionZoom(lt){let ft=this._getOriginZoom(lt)-1;for(;ft<=this.options.maxZoom;){const Dt=this.getChildren(lt);if(ft++,Dt.length!==1)break;lt=Dt[0].properties.cluster_id}return ft}_appendLeaves(lt,ft,Dt,jt,en){const pn=this.getChildren(ft);for(const hn of pn){const tn=hn.properties;if(tn&&tn.cluster?en+tn.point_count<=jt?en+=tn.point_count:en=this._appendLeaves(lt,tn.cluster_id,Dt,jt,en):en<jt?en++:lt.push(hn),lt.length===Dt)break}return en}_addTileFeatures(lt,ft,Dt,jt,en,pn){for(const hn of lt){const tn=ft[hn],fn=tn.numPoints;let Nn,ar,qn;if(fn)Nn=yn(tn),ar=tn.x,qn=tn.y;else{const mr=this.points[tn.index];Nn=mr.properties,ar=In(mr.geometry.coordinates[0]),qn=It(mr.geometry.coordinates[1])}const br={type:1,geometry:[[Math.round(this.options.extent*(ar*en-Dt)),Math.round(this.options.extent*(qn*en-jt))]],tags:Nn};let wr;fn?wr=tn.id:this.options.generateId?wr=tn.index:this.points[tn.index].id&&(wr=this.points[tn.index].id),wr!==void 0&&(br.id=wr),pn.features.push(br)}}_limitZoom(lt){return Math.max(this.options.minZoom,Math.min(+lt,this.options.maxZoom+1))}_cluster(lt,ft){const Dt=[],{radius:jt,extent:en,reduce:pn,minPoints:hn}=this.options,tn=jt/(en*Math.pow(2,ft));for(let fn=0;fn<lt.length;fn++){const Nn=lt[fn];if(Nn.zoom<=ft)continue;Nn.zoom=ft;const ar=this.trees[ft+1],qn=ar.within(Nn.x,Nn.y,tn),br=Nn.numPoints||1;let wr=br;for(const mr of qn){const Er=ar.points[mr];Er.zoom>ft&&(wr+=Er.numPoints||1)}if(wr>br&&wr>=hn){let mr=Nn.x*br,Er=Nn.y*br,zr=pn&&br>1?this._map(Nn,!0):null;const Qr=(fn<<5)+(ft+1)+this.points.length;for(const oi of qn){const ti=ar.points[oi];if(ti.zoom<=ft)continue;ti.zoom=ft;const vr=ti.numPoints||1;mr+=ti.x*vr,Er+=ti.y*vr,ti.parentId=Qr,pn&&(zr||(zr=this._map(Nn,!0)),pn(zr,this._map(ti)))}Nn.parentId=Qr,Dt.push(Ot(mr/wr,Er/wr,Qr,wr,zr))}else if(Dt.push(Nn),wr>1)for(const mr of qn){const Er=ar.points[mr];Er.zoom<=ft||(Er.zoom=ft,Dt.push(Er))}}return Dt}_getOriginId(lt){return lt-this.points.length>>5}_getOriginZoom(lt){return(lt-this.points.length)%32}_map(lt,ft){if(lt.numPoints)return ft?nn({},lt.properties):lt.properties;const Dt=this.points[lt.index].properties,jt=this.options.map(Dt);return ft&&jt===Dt?nn({},jt):jt}}function Ot(Lt,lt,ft,Dt,jt){return{x:rn(Lt),y:rn(lt),zoom:1/0,id:ft,parentId:-1,numPoints:Dt,properties:jt}}function Qt(Lt,lt){const[ft,Dt]=Lt.geometry.coordinates;return{x:rn(In(ft)),y:rn(It(Dt)),zoom:1/0,index:lt,parentId:-1}}function un(Lt){return{type:"Feature",id:Lt.id,properties:yn(Lt),geometry:{type:"Point",coordinates:[(lt=Lt.x,360*(lt-.5)),Rt(Lt.y)]}};var lt}function yn(Lt){const lt=Lt.numPoints,ft=lt>=1e4?`${Math.round(lt/1e3)}k`:lt>=1e3?Math.round(lt/100)/10+"k":lt;return nn(nn({},Lt.properties),{cluster:!0,cluster_id:Lt.id,point_count:lt,point_count_abbreviated:ft})}function In(Lt){return Lt/360+.5}function It(Lt){const lt=Math.sin(Lt*Math.PI/180),ft=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return ft<0?0:ft>1?1:ft}function Rt(Lt){const lt=(180-360*Lt)*Math.PI/180;return 360*Math.atan(Math.exp(lt))/Math.PI-90}function nn(Lt,lt){for(const ft in lt)Lt[ft]=lt[ft];return Lt}function xn(Lt){return Lt.x}function En(Lt){return Lt.y}function $n(Lt,lt,ft,Dt){for(var jt,en=Dt,pn=ft-lt>>1,hn=ft-lt,tn=Lt[lt],fn=Lt[lt+1],Nn=Lt[ft],ar=Lt[ft+1],qn=lt+3;qn<ft;qn+=3){var br=zn(Lt[qn],Lt[qn+1],tn,fn,Nn,ar);if(br>en)jt=qn,en=br;else if(br===en){var wr=Math.abs(qn-pn);wr<hn&&(jt=qn,hn=wr)}}en>Dt&&(jt-lt>3&&$n(Lt,lt,jt,Dt),Lt[jt+2]=en,ft-jt>3&&$n(Lt,jt,ft,Dt))}function zn(Lt,lt,ft,Dt,jt,en){var pn=jt-ft,hn=en-Dt;if(pn!==0||hn!==0){var tn=((Lt-ft)*pn+(lt-Dt)*hn)/(pn*pn+hn*hn);tn>1?(ft=jt,Dt=en):tn>0&&(ft+=pn*tn,Dt+=hn*tn)}return(pn=Lt-ft)*pn+(hn=lt-Dt)*hn}function vn(Lt,lt,ft,Dt){var jt={id:Lt===void 0?null:Lt,type:lt,geometry:ft,tags:Dt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(en){var pn=en.geometry,hn=en.type;if(hn==="Point"||hn==="MultiPoint"||hn==="LineString")wn(en,pn);else if(hn==="Polygon"||hn==="MultiLineString")for(var tn=0;tn<pn.length;tn++)wn(en,pn[tn]);else if(hn==="MultiPolygon")for(tn=0;tn<pn.length;tn++)for(var fn=0;fn<pn[tn].length;fn++)wn(en,pn[tn][fn])}(jt),jt}function wn(Lt,lt){for(var ft=0;ft<lt.length;ft+=3)Lt.minX=Math.min(Lt.minX,lt[ft]),Lt.minY=Math.min(Lt.minY,lt[ft+1]),Lt.maxX=Math.max(Lt.maxX,lt[ft]),Lt.maxY=Math.max(Lt.maxY,lt[ft+1])}function Sn(Lt,lt,ft,Dt){if(lt.geometry){var jt=lt.geometry.coordinates,en=lt.geometry.type,pn=Math.pow(ft.tolerance/((1<<ft.maxZoom)*ft.extent),2),hn=[],tn=lt.id;if(ft.promoteId?tn=lt.properties[ft.promoteId]:ft.generateId&&(tn=Dt||0),en==="Point")Jn(jt,hn);else if(en==="MultiPoint")for(var fn=0;fn<jt.length;fn++)Jn(jt[fn],hn);else if(en==="LineString")tr(jt,hn,pn,!1);else if(en==="MultiLineString"){if(ft.lineMetrics){for(fn=0;fn<jt.length;fn++)tr(jt[fn],hn=[],pn,!1),Lt.push(vn(tn,"LineString",hn,lt.properties));return}pr(jt,hn,pn,!1)}else if(en==="Polygon")pr(jt,hn,pn,!0);else{if(en!=="MultiPolygon"){if(en==="GeometryCollection"){for(fn=0;fn<lt.geometry.geometries.length;fn++)Sn(Lt,{id:tn,geometry:lt.geometry.geometries[fn],properties:lt.properties},ft,Dt);return}throw new Error("Input data is not a valid GeoJSON object.")}for(fn=0;fn<jt.length;fn++){var Nn=[];pr(jt[fn],Nn,pn,!0),hn.push(Nn)}}Lt.push(vn(tn,en,hn,lt.properties))}}function Jn(Lt,lt){lt.push(Xn(Lt[0])),lt.push(Gn(Lt[1])),lt.push(0)}function tr(Lt,lt,ft,Dt){for(var jt,en,pn=0,hn=0;hn<Lt.length;hn++){var tn=Xn(Lt[hn][0]),fn=Gn(Lt[hn][1]);lt.push(tn),lt.push(fn),lt.push(0),hn>0&&(pn+=Dt?(jt*fn-tn*en)/2:Math.sqrt(Math.pow(tn-jt,2)+Math.pow(fn-en,2))),jt=tn,en=fn}var Nn=lt.length-3;lt[2]=1,$n(lt,0,Nn,ft),lt[Nn+2]=1,lt.size=Math.abs(pn),lt.start=0,lt.end=lt.size}function pr(Lt,lt,ft,Dt){for(var jt=0;jt<Lt.length;jt++){var en=[];tr(Lt[jt],en,ft,Dt),lt.push(en)}}function Xn(Lt){return Lt/360+.5}function Gn(Lt){var lt=Math.sin(Lt*Math.PI/180),ft=.5-.25*Math.log((1+lt)/(1-lt))/Math.PI;return ft<0?0:ft>1?1:ft}function cn(Lt,lt,ft,Dt,jt,en,pn,hn){if(Dt/=lt,en>=(ft/=lt)&&pn<Dt)return Lt;if(pn<ft||en>=Dt)return null;for(var tn=[],fn=0;fn<Lt.length;fn++){var Nn=Lt[fn],ar=Nn.geometry,qn=Nn.type,br=jt===0?Nn.minX:Nn.minY,wr=jt===0?Nn.maxX:Nn.maxY;if(br>=ft&&wr<Dt)tn.push(Nn);else if(!(wr<ft||br>=Dt)){var mr=[];if(qn==="Point"||qn==="MultiPoint")gn(ar,mr,ft,Dt,jt);else if(qn==="LineString")On(ar,mr,ft,Dt,jt,!1,hn.lineMetrics);else if(qn==="MultiLineString")_r(ar,mr,ft,Dt,jt,!1);else if(qn==="Polygon")_r(ar,mr,ft,Dt,jt,!0);else if(qn==="MultiPolygon")for(var Er=0;Er<ar.length;Er++){var zr=[];_r(ar[Er],zr,ft,Dt,jt,!0),zr.length&&mr.push(zr)}if(mr.length){if(hn.lineMetrics&&qn==="LineString"){for(Er=0;Er<mr.length;Er++)tn.push(vn(Nn.id,qn,mr[Er],Nn.tags));continue}qn!=="LineString"&&qn!=="MultiLineString"||(mr.length===1?(qn="LineString",mr=mr[0]):qn="MultiLineString"),qn!=="Point"&&qn!=="MultiPoint"||(qn=mr.length===3?"Point":"MultiPoint"),tn.push(vn(Nn.id,qn,mr,Nn.tags))}}}return tn.length?tn:null}function gn(Lt,lt,ft,Dt,jt){for(var en=0;en<Lt.length;en+=3){var pn=Lt[en+jt];pn>=ft&&pn<=Dt&&(lt.push(Lt[en]),lt.push(Lt[en+1]),lt.push(Lt[en+2]))}}function On(Lt,lt,ft,Dt,jt,en,pn){for(var hn,tn,fn=Kn(Lt),Nn=jt===0?Dr:xr,ar=Lt.start,qn=0;qn<Lt.length-3;qn+=3){var br=Lt[qn],wr=Lt[qn+1],mr=Lt[qn+2],Er=Lt[qn+3],zr=Lt[qn+4],Qr=jt===0?br:wr,oi=jt===0?Er:zr,ti=!1;pn&&(hn=Math.sqrt(Math.pow(br-Er,2)+Math.pow(wr-zr,2))),Qr<ft?oi>ft&&(tn=Nn(fn,br,wr,Er,zr,ft),pn&&(fn.start=ar+hn*tn)):Qr>Dt?oi<Dt&&(tn=Nn(fn,br,wr,Er,zr,Dt),pn&&(fn.start=ar+hn*tn)):kr(fn,br,wr,mr),oi<ft&&Qr>=ft&&(tn=Nn(fn,br,wr,Er,zr,ft),ti=!0),oi>Dt&&Qr<=Dt&&(tn=Nn(fn,br,wr,Er,zr,Dt),ti=!0),!en&&ti&&(pn&&(fn.end=ar+hn*tn),lt.push(fn),fn=Kn(Lt)),pn&&(ar+=hn)}var vr=Lt.length-3;br=Lt[vr],wr=Lt[vr+1],mr=Lt[vr+2],(Qr=jt===0?br:wr)>=ft&&Qr<=Dt&&kr(fn,br,wr,mr),vr=fn.length-3,en&&vr>=3&&(fn[vr]!==fn[0]||fn[vr+1]!==fn[1])&&kr(fn,fn[0],fn[1],fn[2]),fn.length&&lt.push(fn)}function Kn(Lt){var lt=[];return lt.size=Lt.size,lt.start=Lt.start,lt.end=Lt.end,lt}function _r(Lt,lt,ft,Dt,jt,en){for(var pn=0;pn<Lt.length;pn++)On(Lt[pn],lt,ft,Dt,jt,en,!1)}function kr(Lt,lt,ft,Dt){Lt.push(lt),Lt.push(ft),Lt.push(Dt)}function Dr(Lt,lt,ft,Dt,jt,en){var pn=(en-lt)/(Dt-lt);return Lt.push(en),Lt.push(ft+(jt-ft)*pn),Lt.push(1),pn}function xr(Lt,lt,ft,Dt,jt,en){var pn=(en-ft)/(jt-ft);return Lt.push(lt+(Dt-lt)*pn),Lt.push(en),Lt.push(1),pn}function Lr(Lt,lt){for(var ft=[],Dt=0;Dt<Lt.length;Dt++){var jt,en=Lt[Dt],pn=en.type;if(pn==="Point"||pn==="MultiPoint"||pn==="LineString")jt=Br(en.geometry,lt);else if(pn==="MultiLineString"||pn==="Polygon"){jt=[];for(var hn=0;hn<en.geometry.length;hn++)jt.push(Br(en.geometry[hn],lt))}else if(pn==="MultiPolygon")for(jt=[],hn=0;hn<en.geometry.length;hn++){for(var tn=[],fn=0;fn<en.geometry[hn].length;fn++)tn.push(Br(en.geometry[hn][fn],lt));jt.push(tn)}ft.push(vn(en.id,pn,jt,en.tags))}return ft}function Br(Lt,lt){var ft=[];ft.size=Lt.size,Lt.start!==void 0&&(ft.start=Lt.start,ft.end=Lt.end);for(var Dt=0;Dt<Lt.length;Dt+=3)ft.push(Lt[Dt]+lt,Lt[Dt+1],Lt[Dt+2]);return ft}function Vr(Lt,lt){if(Lt.transformed)return Lt;var ft,Dt,jt,en=1<<Lt.z,pn=Lt.x,hn=Lt.y;for(ft=0;ft<Lt.features.length;ft++){var tn=Lt.features[ft],fn=tn.geometry,Nn=tn.type;if(tn.geometry=[],Nn===1)for(Dt=0;Dt<fn.length;Dt+=2)tn.geometry.push(jr(fn[Dt],fn[Dt+1],lt,en,pn,hn));else for(Dt=0;Dt<fn.length;Dt++){var ar=[];for(jt=0;jt<fn[Dt].length;jt+=2)ar.push(jr(fn[Dt][jt],fn[Dt][jt+1],lt,en,pn,hn));tn.geometry.push(ar)}}return Lt.transformed=!0,Lt}function jr(Lt,lt,ft,Dt,jt,en){return[Math.round(ft*(Lt*Dt-jt)),Math.round(ft*(lt*Dt-en))]}function Oi(Lt,lt,ft,Dt,jt){for(var en=lt===jt.maxZoom?0:jt.tolerance/((1<<lt)*jt.extent),pn={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ft,y:Dt,z:lt,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},hn=0;hn<Lt.length;hn++){pn.numFeatures++,Di(pn,Lt[hn],en,jt);var tn=Lt[hn].minX,fn=Lt[hn].minY,Nn=Lt[hn].maxX,ar=Lt[hn].maxY;tn<pn.minX&&(pn.minX=tn),fn<pn.minY&&(pn.minY=fn),Nn>pn.maxX&&(pn.maxX=Nn),ar>pn.maxY&&(pn.maxY=ar)}return pn}function Di(Lt,lt,ft,Dt){var jt=lt.geometry,en=lt.type,pn=[];if(en==="Point"||en==="MultiPoint")for(var hn=0;hn<jt.length;hn+=3)pn.push(jt[hn]),pn.push(jt[hn+1]),Lt.numPoints++,Lt.numSimplified++;else if(en==="LineString")Ti(pn,jt,Lt,ft,!1,!1);else if(en==="MultiLineString"||en==="Polygon")for(hn=0;hn<jt.length;hn++)Ti(pn,jt[hn],Lt,ft,en==="Polygon",hn===0);else if(en==="MultiPolygon")for(var tn=0;tn<jt.length;tn++){var fn=jt[tn];for(hn=0;hn<fn.length;hn++)Ti(pn,fn[hn],Lt,ft,!0,hn===0)}if(pn.length){var Nn=lt.tags||null;if(en==="LineString"&&Dt.lineMetrics){for(var ar in Nn={},lt.tags)Nn[ar]=lt.tags[ar];Nn.mapbox_clip_start=jt.start/jt.size,Nn.mapbox_clip_end=jt.end/jt.size}var qn={geometry:pn,type:en==="Polygon"||en==="MultiPolygon"?3:en==="LineString"||en==="MultiLineString"?2:1,tags:Nn};lt.id!==null&&(qn.id=lt.id),Lt.features.push(qn)}}function Ti(Lt,lt,ft,Dt,jt,en){var pn=Dt*Dt;if(Dt>0&&lt.size<(jt?pn:Dt))ft.numPoints+=lt.length/3;else{for(var hn=[],tn=0;tn<lt.length;tn+=3)(Dt===0||lt[tn+2]>pn)&&(ft.numSimplified++,hn.push(lt[tn]),hn.push(lt[tn+1])),ft.numPoints++;jt&&function(fn,Nn){for(var ar=0,qn=0,br=fn.length,wr=br-2;qn<br;wr=qn,qn+=2)ar+=(fn[qn]-fn[wr])*(fn[qn+1]+fn[wr+1]);if(ar>0===Nn)for(qn=0,br=fn.length;qn<br/2;qn+=2){var mr=fn[qn],Er=fn[qn+1];fn[qn]=fn[br-2-qn],fn[qn+1]=fn[br-1-qn],fn[br-2-qn]=mr,fn[br-1-qn]=Er}}(hn,en),Lt.push(hn)}}function Sr(Lt,lt){var ft=(lt=this.options=function(jt,en){for(var pn in en)jt[pn]=en[pn];return jt}(Object.create(this.options),lt)).debug;if(ft&&console.time("preprocess data"),lt.maxZoom<0||lt.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(lt.promoteId&&lt.generateId)throw new Error("promoteId and generateId cannot be used together.");var Dt=function(jt,en){var pn=[];if(jt.type==="FeatureCollection")for(var hn=0;hn<jt.features.length;hn++)Sn(pn,jt.features[hn],en,hn);else Sn(pn,jt.type==="Feature"?jt:{geometry:jt},en);return pn}(Lt,lt);this.tiles={},this.tileCoords=[],ft&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",lt.indexMaxZoom,lt.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Dt=function(jt,en){var pn=en.buffer/en.extent,hn=jt,tn=cn(jt,1,-1-pn,pn,0,-1,2,en),fn=cn(jt,1,1-pn,2+pn,0,-1,2,en);return(tn||fn)&&(hn=cn(jt,1,-pn,1+pn,0,-1,2,en)||[],tn&&(hn=Lr(tn,1).concat(hn)),fn&&(hn=hn.concat(Lr(fn,-1)))),hn}(Dt,lt)).length&&this.splitTile(Dt,0,0,0),ft&&(Dt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fo(Lt,lt,ft){return 32*((1<<Lt)*ft+lt)+Lt}function Ea(Lt,lt){const ft=Lt.tileID.canonical;if(!this._geoJSONIndex)return lt(null,null);const Dt=this._geoJSONIndex.getTile(ft.z,ft.x,ft.y);if(!Dt)return lt(null,null);const jt=new Ne(Dt.features);let en=qe(jt);en.byteOffset===0&&en.byteLength===en.buffer.byteLength||(en=new Uint8Array(en)),lt(null,{vectorTile:jt,rawData:en.buffer})}Sr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Sr.prototype.splitTile=function(Lt,lt,ft,Dt,jt,en,pn){for(var hn=[Lt,lt,ft,Dt],tn=this.options,fn=tn.debug;hn.length;){Dt=hn.pop(),ft=hn.pop(),lt=hn.pop(),Lt=hn.pop();var Nn=1<<lt,ar=Fo(lt,ft,Dt),qn=this.tiles[ar];if(!qn&&(fn>1&&console.time("creation"),qn=this.tiles[ar]=Oi(Lt,lt,ft,Dt,tn),this.tileCoords.push({z:lt,x:ft,y:Dt}),fn)){fn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",lt,ft,Dt,qn.numFeatures,qn.numPoints,qn.numSimplified),console.timeEnd("creation"));var br="z"+lt;this.stats[br]=(this.stats[br]||0)+1,this.total++}if(qn.source=Lt,jt){if(lt===tn.maxZoom||lt===jt)continue;var wr=1<<jt-lt;if(ft!==Math.floor(en/wr)||Dt!==Math.floor(pn/wr))continue}else if(lt===tn.indexMaxZoom||qn.numPoints<=tn.indexMaxPoints)continue;if(qn.source=null,Lt.length!==0){fn>1&&console.time("clipping");var mr,Er,zr,Qr,oi,ti,vr=.5*tn.buffer/tn.extent,mn=.5-vr,po=.5+vr,Ai=1+vr;mr=Er=zr=Qr=null,oi=cn(Lt,Nn,ft-vr,ft+po,0,qn.minX,qn.maxX,tn),ti=cn(Lt,Nn,ft+mn,ft+Ai,0,qn.minX,qn.maxX,tn),Lt=null,oi&&(mr=cn(oi,Nn,Dt-vr,Dt+po,1,qn.minY,qn.maxY,tn),Er=cn(oi,Nn,Dt+mn,Dt+Ai,1,qn.minY,qn.maxY,tn),oi=null),ti&&(zr=cn(ti,Nn,Dt-vr,Dt+po,1,qn.minY,qn.maxY,tn),Qr=cn(ti,Nn,Dt+mn,Dt+Ai,1,qn.minY,qn.maxY,tn),ti=null),fn>1&&console.timeEnd("clipping"),hn.push(mr||[],lt+1,2*ft,2*Dt),hn.push(Er||[],lt+1,2*ft,2*Dt+1),hn.push(zr||[],lt+1,2*ft+1,2*Dt),hn.push(Qr||[],lt+1,2*ft+1,2*Dt+1)}}},Sr.prototype.getTile=function(Lt,lt,ft){var Dt=this.options,jt=Dt.extent,en=Dt.debug;if(Lt<0||Lt>24)return null;var pn=1<<Lt,hn=Fo(Lt,lt=(lt%pn+pn)%pn,ft);if(this.tiles[hn])return Vr(this.tiles[hn],jt);en>1&&console.log("drilling down to z%d-%d-%d",Lt,lt,ft);for(var tn,fn=Lt,Nn=lt,ar=ft;!tn&&fn>0;)fn--,Nn=Math.floor(Nn/2),ar=Math.floor(ar/2),tn=this.tiles[Fo(fn,Nn,ar)];return tn&&tn.source?(en>1&&console.log("found parent tile z%d-%d-%d",fn,Nn,ar),en>1&&console.time("drilling down"),this.splitTile(tn.source,fn,Nn,ar,Lt,lt,ft),en>1&&console.timeEnd("drilling down"),this.tiles[hn]?Vr(this.tiles[hn],jt):null):null};class vi extends j.VectorTileWorkerSource{constructor(lt,ft,Dt,jt,en){super(lt,ft,Dt,jt,Ea),en&&(this.loadGeoJSON=en)}loadData(lt,ft){const Dt=lt&&lt.request,jt=Dt&&Dt.collectResourceTiming;this.loadGeoJSON(lt,(en,pn)=>{if(en||!pn)return ft(en);if(typeof pn!="object")return ft(new Error(`Input data given to '${lt.source}' is not a valid GeoJSON object.`));{we(pn,!0);try{if(lt.filter){const tn=j.createExpression(lt.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(tn.result==="error")throw new Error(tn.value.map(Nn=>`${Nn.key}: ${Nn.message}`).join(", "));const fn=pn.features.filter(Nn=>tn.value.evaluate({zoom:0},Nn));pn={type:"FeatureCollection",features:fn}}this._geoJSONIndex=lt.cluster?new Zt(function({superclusterOptions:tn,clusterProperties:fn}){if(!fn||!tn)return tn;const Nn={},ar={},qn={accumulated:null,zoom:0},br={properties:null},wr=Object.keys(fn);for(const mr of wr){const[Er,zr]=fn[mr],Qr=j.createExpression(zr),oi=j.createExpression(typeof Er=="string"?[Er,["accumulated"],["get",mr]]:Er);Nn[mr]=Qr.value,ar[mr]=oi.value}return tn.map=mr=>{br.properties=mr;const Er={};for(const zr of wr)Er[zr]=Nn[zr].evaluate(qn,br);return Er},tn.reduce=(mr,Er)=>{br.properties=Er;for(const zr of wr)qn.accumulated=mr[zr],mr[zr]=ar[zr].evaluate(qn,br)},tn}(lt)).load(pn.features):function(tn,fn){return new Sr(tn,fn)}(pn,lt.geojsonVtOptions)}catch(tn){return ft(tn)}this.loaded={};const hn={};if(jt){const tn=j.getPerformanceMeasurement(Dt);tn&&(hn.resourceTiming={},hn.resourceTiming[lt.source]=JSON.parse(JSON.stringify(tn)))}ft(null,hn)}})}reloadTile(lt,ft){const Dt=this.loaded;return Dt&&Dt[lt.uid]?super.reloadTile(lt,ft):this.loadTile(lt,ft)}loadGeoJSON(lt,ft){if(lt.request)j.getJSON(lt.request,ft);else{if(typeof lt.data!="string")return ft(new Error(`Input data given to '${lt.source}' is not a valid GeoJSON object.`));try{return ft(null,JSON.parse(lt.data))}catch{return ft(new Error(`Input data given to '${lt.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(lt,ft){try{ft(null,this._geoJSONIndex.getClusterExpansionZoom(lt.clusterId))}catch(Dt){ft(Dt)}}getClusterChildren(lt,ft){try{ft(null,this._geoJSONIndex.getChildren(lt.clusterId))}catch(Dt){ft(Dt)}}getClusterLeaves(lt,ft){try{ft(null,this._geoJSONIndex.getLeaves(lt.clusterId,lt.limit,lt.offset))}catch(Dt){ft(Dt)}}}class sa{constructor(lt){this.self=lt,this.actor=new j.Actor(lt,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=j.getProjection({name:"mercator"}),this.workerSourceTypes={vector:j.VectorTileWorkerSource,geojson:vi},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ft,Dt)=>{if(this.workerSourceTypes[ft])throw new Error(`Worker source with name "${ft}" already registered.`);this.workerSourceTypes[ft]=Dt},this.self.registerRTLTextPlugin=ft=>{if(j.plugin.isParsed())throw new Error("RTL text plugin already registered.");j.plugin.applyArabicShaping=ft.applyArabicShaping,j.plugin.processBidirectionalText=ft.processBidirectionalText,j.plugin.processStyledBidirectionalText=ft.processStyledBidirectionalText}}clearCaches(lt,ft,Dt){delete this.layerIndexes[lt],delete this.availableImages[lt],delete this.workerSources[lt],delete this.demWorkerSources[lt],Dt()}checkIfReady(lt,ft,Dt){Dt()}setReferrer(lt,ft){this.referrer=ft}spriteLoaded(lt,ft){this.isSpriteLoaded[lt]=ft;for(const Dt in this.workerSources[lt]){const jt=this.workerSources[lt][Dt];for(const en in jt)jt[en]instanceof j.VectorTileWorkerSource&&(jt[en].isSpriteLoaded=ft,jt[en].fire(new j.Event("isSpriteLoaded")))}}setImages(lt,ft,Dt){this.availableImages[lt]=ft;for(const jt in this.workerSources[lt]){const en=this.workerSources[lt][jt];for(const pn in en)en[pn].availableImages=ft}Dt()}enableTerrain(lt,ft,Dt){this.terrain=ft,Dt()}setProjection(lt,ft){this.projections[lt]=j.getProjection(ft)}setLayers(lt,ft,Dt){this.getLayerIndex(lt).replace(ft),Dt()}updateLayers(lt,ft,Dt){this.getLayerIndex(lt).update(ft.layers,ft.removedIds),Dt()}loadTile(lt,ft,Dt){const jt=this.enableTerrain?j.extend({enableTerrain:this.terrain},ft):ft;jt.projection=this.projections[lt]||this.defaultProjection,this.getWorkerSource(lt,ft.type,ft.source).loadTile(jt,Dt)}loadDEMTile(lt,ft,Dt){const jt=this.enableTerrain?j.extend({buildQuadTree:this.terrain},ft):ft;this.getDEMWorkerSource(lt,ft.source).loadTile(jt,Dt)}reloadTile(lt,ft,Dt){const jt=this.enableTerrain?j.extend({enableTerrain:this.terrain},ft):ft;jt.projection=this.projections[lt]||this.defaultProjection,this.getWorkerSource(lt,ft.type,ft.source).reloadTile(jt,Dt)}abortTile(lt,ft,Dt){this.getWorkerSource(lt,ft.type,ft.source).abortTile(ft,Dt)}removeTile(lt,ft,Dt){this.getWorkerSource(lt,ft.type,ft.source).removeTile(ft,Dt)}removeSource(lt,ft,Dt){if(!this.workerSources[lt]||!this.workerSources[lt][ft.type]||!this.workerSources[lt][ft.type][ft.source])return;const jt=this.workerSources[lt][ft.type][ft.source];delete this.workerSources[lt][ft.type][ft.source],jt.removeSource!==void 0?jt.removeSource(ft,Dt):Dt()}loadWorkerSource(lt,ft,Dt){try{this.self.importScripts(ft.url),Dt()}catch(jt){Dt(jt.toString())}}syncRTLPluginState(lt,ft,Dt){try{j.plugin.setState(ft);const jt=j.plugin.getPluginURL();if(j.plugin.isLoaded()&&!j.plugin.isParsed()&&jt!=null){this.self.importScripts(jt);const en=j.plugin.isParsed();Dt(en?void 0:new Error(`RTL Text Plugin failed to import scripts from ${jt}`),en)}}catch(jt){Dt(jt.toString())}}getAvailableImages(lt){let ft=this.availableImages[lt];return ft||(ft=[]),ft}getLayerIndex(lt){let ft=this.layerIndexes[lt];return ft||(ft=this.layerIndexes[lt]=new ge),ft}getWorkerSource(lt,ft,Dt){return this.workerSources[lt]||(this.workerSources[lt]={}),this.workerSources[lt][ft]||(this.workerSources[lt][ft]={}),this.workerSources[lt][ft][Dt]||(this.workerSources[lt][ft][Dt]=new this.workerSourceTypes[ft]({send:(jt,en,pn,hn,tn,fn)=>{this.actor.send(jt,en,pn,lt,tn,fn)},scheduler:this.actor.scheduler},this.getLayerIndex(lt),this.getAvailableImages(lt),this.isSpriteLoaded[lt])),this.workerSources[lt][ft][Dt]}getDEMWorkerSource(lt,ft){return this.demWorkerSources[lt]||(this.demWorkerSources[lt]={}),this.demWorkerSources[lt][ft]||(this.demWorkerSources[lt][ft]=new ye),this.demWorkerSources[lt][ft]}enforceCacheSizeLimit(lt,ft){j.enforceCacheSizeLimit(ft)}getWorkerPerformanceMetrics(lt,ft,Dt){Dt(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new sa(self)),sa}),te(["./shared"],function(j){function xe(de,U){if(Array.isArray(de)){if(!Array.isArray(U)||de.length!==U.length)return!1;for(let ee=0;ee<de.length;ee++)if(!xe(de[ee],U[ee]))return!1;return!0}if(typeof de=="object"&&de!==null&&U!==null){if(typeof U!="object"||Object.keys(de).length!==Object.keys(U).length)return!1;for(const ee in de)if(!xe(de[ee],U[ee]))return!1;return!0}return de===U}var re=ge;function ge(de){return!function(U){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var be,Ie,Oe=new Blob([""],{type:"text/javascript"}),Le=URL.createObjectURL(Oe);try{Ie=new Worker(Le),be=!0}catch{be=!1}return Ie&&Ie.terminate(),URL.revokeObjectURL(Le),be}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var be=document.createElement("canvas");be.width=be.height=1;var Ie=be.getContext("2d");if(!Ie)return!1;var Oe=Ie.getImageData(0,0,1,1);return Oe&&Oe.width===be.width}()?(ye[ee=U&&U.failIfMajorPerformanceCaveat]===void 0&&(ye[ee]=function(be){var Ie,Oe=function(Le){var Fe=document.createElement("canvas"),Ge=Object.create(ge.webGLContextAttributes);return Ge.failIfMajorPerformanceCaveat=Le,Fe.getContext("webgl",Ge)||Fe.getContext("experimental-webgl",Ge)}(be);if(!Oe)return!1;try{Ie=Oe.createShader(Oe.VERTEX_SHADER)}catch{return!1}return!(!Ie||Oe.isContextLost())&&(Oe.shaderSource(Ie,"void main() {}"),Oe.compileShader(Ie),Oe.getShaderParameter(Ie,Oe.COMPILE_STATUS)===!0)}(ee)),ye[ee]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ee}(de)}var ye={};function we(de,U,ee){const be=j.window.document.createElement(de);return U!==void 0&&(be.className=U),ee&&ee.appendChild(be),be}function ke(de,U,ee){const be=j.window.document.createElementNS("http://www.w3.org/2000/svg",de);for(const Ie of Object.keys(U))be.setAttributeNS(null,Ie,U[Ie]);return ee&&ee.appendChild(be),be}ge.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Se=j.window.document&&j.window.document.documentElement.style,Pe=Se&&Se.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Re;function Ne(){Se&&Pe&&(Re=Se[Pe],Se[Pe]="none")}function ze(){Se&&Pe&&(Se[Pe]=Re)}function Be(de){de.preventDefault(),de.stopPropagation(),j.window.removeEventListener("click",Be,!0)}function Ze(){j.window.addEventListener("click",Be,!0),j.window.setTimeout(()=>{j.window.removeEventListener("click",Be,!0)},0)}function Xe(de,U){const ee=de.getBoundingClientRect();return dt(de,ee,U)}function qe(de,U){const ee=de.getBoundingClientRect(),be=[];for(let Ie=0;Ie<U.length;Ie++)be.push(dt(de,ee,U[Ie]));return be}function Je(de){return j.window.InstallTrigger!==void 0&&de.button===2&&de.ctrlKey&&j.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:de.button}function dt(de,U,ee){const be=de.offsetWidth===U.width?1:de.offsetWidth/U.width;return new j.pointGeometry((ee.clientX-U.left)*be,(ee.clientY-U.top)*be)}function Ct(de,U){var ee=U[0],be=U[1],Ie=U[2],Oe=U[3],Le=ee*Oe-Ie*be;return Le?(de[0]=Oe*(Le=1/Le),de[1]=-be*Le,de[2]=-Ie*Le,de[3]=ee*Le,de):null}function bt(de){const{userImage:U}=de;return!!(U&&U.render&&U.render())&&(de.data.replace(new Uint8Array(U.data.buffer)),!0)}class xt extends j.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new j.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(U){if(this.loaded!==U&&(this.loaded=U,U)){for(const{ids:ee,callback:be}of this.requestors)this._notify(ee,be);this.requestors=[]}}hasImage(U){return!!this.getImage(U)}getImage(U){return this.images[U]}addImage(U,ee){this._validate(U,ee)&&(this.images[U]=ee)}_validate(U,ee){let be=!0;return this._validateStretch(ee.stretchX,ee.data&&ee.data.width)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "stretchX" value`))),be=!1),this._validateStretch(ee.stretchY,ee.data&&ee.data.height)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "stretchY" value`))),be=!1),this._validateContent(ee.content,ee)||(this.fire(new j.ErrorEvent(new Error(`Image "${U}" has invalid "content" value`))),be=!1),be}_validateStretch(U,ee){if(!U)return!0;let be=0;for(const Ie of U){if(Ie[0]<be||Ie[1]<Ie[0]||ee<Ie[1])return!1;be=Ie[1]}return!0}_validateContent(U,ee){return!(U&&(U.length!==4||U[0]<0||ee.data.width<U[0]||U[1]<0||ee.data.height<U[1]||U[2]<0||ee.data.width<U[2]||U[3]<0||ee.data.height<U[3]||U[2]<U[0]||U[3]<U[1]))}updateImage(U,ee){ee.version=this.images[U].version+1,this.images[U]=ee,this.updatedImages[U]=!0}removeImage(U){const ee=this.images[U];delete this.images[U],delete this.patterns[U],ee.userImage&&ee.userImage.onRemove&&ee.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(U,ee){let be=!0;if(!this.isLoaded())for(const Ie of U)this.images[Ie]||(be=!1);this.isLoaded()||be?this._notify(U,ee):this.requestors.push({ids:U,callback:ee})}_notify(U,ee){const be={};for(const Ie of U){this.images[Ie]||this.fire(new j.Event("styleimagemissing",{id:Ie}));const Oe=this.images[Ie];Oe?be[Ie]={data:Oe.data.clone(),pixelRatio:Oe.pixelRatio,sdf:Oe.sdf,version:Oe.version,stretchX:Oe.stretchX,stretchY:Oe.stretchY,content:Oe.content,hasRenderCallback:Boolean(Oe.userImage&&Oe.userImage.render)}:j.warnOnce(`Image "${Ie}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}ee(null,be)}getPixelSize(){const{width:U,height:ee}=this.atlasImage;return{width:U,height:ee}}getPattern(U){const ee=this.patterns[U],be=this.getImage(U);if(!be)return null;if(ee&&ee.position.version===be.version)return ee.position;if(ee)ee.position.version=be.version;else{const Ie={w:be.data.width+2,h:be.data.height+2,x:0,y:0},Oe=new j.ImagePosition(Ie,be);this.patterns[U]={bin:Ie,position:Oe}}return this._updatePatternAtlas(),this.patterns[U].position}bind(U){const ee=U.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new j.Texture(U,this.atlasImage,ee.RGBA),this.atlasTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE)}_updatePatternAtlas(){const U=[];for(const Oe in this.patterns)U.push(this.patterns[Oe].bin);const{w:ee,h:be}=j.potpack(U),Ie=this.atlasImage;Ie.resize({width:ee||1,height:be||1});for(const Oe in this.patterns){const{bin:Le}=this.patterns[Oe],Fe=Le.x+1,Ge=Le.y+1,Ke=this.images[Oe].data,Ye=Ke.width,ct=Ke.height;j.RGBAImage.copy(Ke,Ie,{x:0,y:0},{x:Fe,y:Ge},{width:Ye,height:ct}),j.RGBAImage.copy(Ke,Ie,{x:0,y:ct-1},{x:Fe,y:Ge-1},{width:Ye,height:1}),j.RGBAImage.copy(Ke,Ie,{x:0,y:0},{x:Fe,y:Ge+ct},{width:Ye,height:1}),j.RGBAImage.copy(Ke,Ie,{x:Ye-1,y:0},{x:Fe-1,y:Ge},{width:1,height:ct}),j.RGBAImage.copy(Ke,Ie,{x:0,y:0},{x:Fe+Ye,y:Ge},{width:1,height:ct})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(U){for(const ee of U){if(this.callbackDispatchedThisFrame[ee])continue;this.callbackDispatchedThisFrame[ee]=!0;const be=this.images[ee];bt(be)&&this.updateImage(ee,be)}}}const nt=new j.Properties({anchor:new j.DataConstantProperty(j.spec.light.anchor),position:new class{constructor(){this.specification=j.spec.light.position}possiblyEvaluate(de,U){return function([ee,be,Ie]){const Oe=j.degToRad(be+90),Le=j.degToRad(Ie);return{x:ee*Math.cos(Oe)*Math.sin(Le),y:ee*Math.sin(Oe)*Math.sin(Le),z:ee*Math.cos(Le),azimuthal:be,polar:Ie}}(de.expression.evaluate(U))}interpolate(de,U,ee){return{x:j.number(de.x,U.x,ee),y:j.number(de.y,U.y,ee),z:j.number(de.z,U.z,ee),azimuthal:j.number(de.azimuthal,U.azimuthal,ee),polar:j.number(de.polar,U.polar,ee)}}},color:new j.DataConstantProperty(j.spec.light.color),intensity:new j.DataConstantProperty(j.spec.light.intensity)}),tt="-transition";class rt extends j.Evented{constructor(U){super(),this._transitionable=new j.Transitionable(nt),this.setLight(U),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(U,ee={}){if(!this._validate(j.validateLight,U,ee))for(const be in U){const Ie=U[be];j.endsWith(be,tt)?this._transitionable.setTransition(be.slice(0,-tt.length),Ie):this._transitionable.setValue(be,Ie)}}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}_validate(U,ee,be){return(!be||be.validate!==!1)&&j.emitValidationErrors(this,U.call(j.validateStyle,j.extend({value:ee,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}const ht=new j.Properties({source:new j.DataConstantProperty(j.spec.terrain.source),exaggeration:new j.DataConstantProperty(j.spec.terrain.exaggeration)}),st="-transition";class pt extends j.Evented{constructor(U,ee){super(),this._transitionable=new j.Transitionable(ht),this.set(U),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=ee}get(){return this._transitionable.serialize()}set(U){for(const ee in U){const be=U[ee];j.endsWith(ee,st)?this._transitionable.setTransition(ee.slice(0,-st.length),be):this._transitionable.setValue(ee,be)}}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}}function vt(de,U,ee,be){const Ie=j.smoothstep(45,65,ee),[Oe,Le]=ut(de,be),Fe=j.length(U);let Ge=1-Math.min(1,Math.exp((Fe-Oe)/(Le-Oe)*-6));return Ge*=Ge*Ge,Ge=Math.min(1,1.00747*Ge),Ge*Ie*de.alpha}function ut(de,U){const ee=.5/Math.tan(.5*U);return[de.range[0]+ee,de.range[1]+ee]}const Ut=new j.Properties({range:new j.DataConstantProperty(j.spec.fog.range),color:new j.DataConstantProperty(j.spec.fog.color),"high-color":new j.DataConstantProperty(j.spec.fog["high-color"]),"space-color":new j.DataConstantProperty(j.spec.fog["space-color"]),"horizon-blend":new j.DataConstantProperty(j.spec.fog["horizon-blend"]),"star-intensity":new j.DataConstantProperty(j.spec.fog["star-intensity"])}),at="-transition";class zt extends j.Evented{constructor(U,ee){super(),this._transitionable=new j.Transitionable(Ut),this.set(U),this._transitioning=this._transitionable.untransitioned(),this._transform=ee}get state(){const U=this._transform,ee=U.projection.name==="globe",be=j.globeToMercatorTransition(U.zoom),Ie=this.properties.get("range"),Oe=[.5,3];return{range:ee?[j.number(Oe[0],Ie[0],be),j.number(Oe[1],Ie[1],be)]:Ie,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(U,ee={}){if(!this._validate(j.validateFog,U,ee)){for(const be of Object.keys(j.spec.fog))U&&U[be]===void 0&&(U[be]=j.spec.fog[be].default);for(const be in U){const Ie=U[be];j.endsWith(be,at)?this._transitionable.setTransition(be.slice(0,-at.length),Ie):this._transitionable.setValue(be,Ie)}}}getOpacity(U){if(!this._transform.projection.supportsFog)return 0;const ee=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:j.smoothstep(45,65,U))*ee.a}getOpacityAtLatLng(U,ee){return this._transform.projection.supportsFog?function(be,Ie,Oe){const Le=j.MercatorCoordinate.fromLngLat(Ie),Fe=Oe.elevation?Oe.elevation.getAtPointOrZero(Le):0,Ge=[Le.x,Le.y,Fe];return j.transformMat4(Ge,Ge,Oe.mercatorFogMatrix),vt(be,Ge,Oe.pitch,Oe._fov)}(this.state,U,ee):0}getFovAdjustedRange(U){return this._transform.projection.supportsFog?ut(this.state,U):[0,1]}updateTransitions(U){this._transitioning=this._transitionable.transitioned(U,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(U){this.properties=this._transitioning.possiblyEvaluate(U)}_validate(U,ee,be){return(!be||be.validate!==!1)&&j.emitValidationErrors(this,U.call(j.validateStyle,j.extend({value:ee,style:{glyphs:!0,sprite:!0},styleSpec:j.spec})))}}class sn{constructor(U,ee){this.workerPool=U,this.actors=[],this.currentActor=0,this.id=j.uniqueId();const be=this.workerPool.acquire(this.id);for(let Ie=0;Ie<be.length;Ie++){const Oe=new sn.Actor(be[Ie],ee,this.id);Oe.name=`Worker ${Ie}`,this.actors.push(Oe)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(U,ee,be){j.asyncAll(this.actors,(Ie,Oe)=>{Ie.send(U,ee,Oe)},be=be||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(U=>{U.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Mn(de,U,ee){return U*(j.EXTENT/(de.tileSize*Math.pow(2,ee-de.tileID.overscaledZ)))}sn.Actor=j.Actor;class rn{constructor(U,ee,be,Ie){this.screenBounds=U,this.cameraPoint=ee,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=be,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Ie)}static createFromScreenPoints(U,ee){let be,Ie;if(U instanceof j.pointGeometry||typeof U[0]=="number"){const Oe=j.pointGeometry.convert(U);be=[j.pointGeometry.convert(U)],Ie=ee.isPointAboveHorizon(Oe)}else{const Oe=j.pointGeometry.convert(U[0]),Le=j.pointGeometry.convert(U[1]);be=[Oe,Le],Ie=j.polygonizeBounds(Oe,Le).every(Fe=>ee.isPointAboveHorizon(Fe))}return new rn(be,ee.getCameraPoint(),Ie,ee)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(U){return j.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],U)}bufferedCameraGeometry(U){const ee=this.screenBounds[0],be=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],Ie=j.polygonizeBounds(ee,be,0,!1);return this.cameraPoint.y>be.y&&(this.cameraPoint.x>ee.x&&this.cameraPoint.x<be.x?Ie.splice(3,0,this.cameraPoint):this.cameraPoint.x>=be.x?Ie[2]=this.cameraPoint:this.cameraPoint.x<=ee.x&&(Ie[3]=this.cameraPoint)),j.bufferConvexPolygon(Ie,U)}bufferedCameraGeometryGlobe(U){const ee=this.screenBounds[0],be=this.screenBounds.length===1?this.screenBounds[0].add(new j.pointGeometry(1,1)):this.screenBounds[1],Ie=j.polygonizeBounds(ee,be,U),Oe=this.cameraPoint.clone();switch(3*((Oe.y>ee.y)+(Oe.y>be.y))+((Oe.x>ee.x)+(Oe.x>be.x))){case 0:Ie[0]=Oe,Ie[4]=Oe.clone();break;case 1:Ie.splice(1,0,Oe);break;case 2:Ie[1]=Oe;break;case 3:Ie.splice(4,0,Oe);break;case 5:Ie.splice(2,0,Oe);break;case 6:Ie[3]=Oe;break;case 7:Ie.splice(3,0,Oe);break;case 8:Ie[2]=Oe}return Ie}containsTile(U,ee,be,Ie=0){const Oe=U.queryPadding/ee._pixelsPerMercatorPixel+1,Le=be?this._bufferedCameraMercator(Oe,ee):this._bufferedScreenMercator(Oe,ee);let Fe=U.tileID.wrap+(Le.unwrapped?Ie:0);const Ge=Le.polygon.map(kt=>j.getTilePoint(U.tileTransform,kt,Fe));if(!j.polygonIntersectsBox(Ge,0,0,j.EXTENT,j.EXTENT))return;Fe=U.tileID.wrap+(this.screenGeometryMercator.unwrapped?Ie:0);const Ke=this.screenGeometryMercator.polygon.map(kt=>j.getTileVec3(U.tileTransform,kt,Fe)),Ye=Ke.map(kt=>new j.pointGeometry(kt[0],kt[1])),ct=ee.getFreeCameraOptions().position||new j.MercatorCoordinate(0,0,0),mt=j.getTileVec3(U.tileTransform,ct,Fe),Mt=Ke.map(kt=>{const wt=j.sub(kt,kt,mt);return j.normalize(wt,wt),new j.Ray(mt,wt)}),At=Mn(U,1,ee.zoom)*ee._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Ye,tilespaceRays:Mt,bufferedTilespaceGeometry:Ge,bufferedTilespaceBounds:(Tt=j.getBounds(Ge),Tt.min.x=j.clamp(Tt.min.x,0,j.EXTENT),Tt.min.y=j.clamp(Tt.min.y,0,j.EXTENT),Tt.max.x=j.clamp(Tt.max.x,0,j.EXTENT),Tt.max.y=j.clamp(Tt.max.y,0,j.EXTENT),Tt),tile:U,tileID:U.tileID,pixelToTileUnitsFactor:At};var Tt}_bufferedScreenMercator(U,ee){const be=Ot(U);if(this._screenRaycastCache[be])return this._screenRaycastCache[be];{let Ie;return Ie=ee.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(U),ee):{polygon:this.bufferedScreenGeometry(U).map(Oe=>ee.pointCoordinate3D(Oe)),unwrapped:!0},this._screenRaycastCache[be]=Ie,Ie}}_bufferedCameraMercator(U,ee){const be=Ot(U);if(this._cameraRaycastCache[be])return this._cameraRaycastCache[be];{let Ie;return Ie=ee.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(U),ee):{polygon:this.bufferedCameraGeometry(U).map(Oe=>ee.pointCoordinate3D(Oe)),unwrapped:!0},this._cameraRaycastCache[be]=Ie,Ie}}_projectAndResample(U,ee){const be=function(Oe,Le){const Fe=j.multiply([],Le.pixelMatrix,Le.globeMatrix),Ge=[0,-j.GLOBE_RADIUS,0,1],Ke=[0,j.GLOBE_RADIUS,0,1],Ye=[0,0,0,1];j.transformMat4$1(Ge,Ge,Fe),j.transformMat4$1(Ke,Ke,Fe),j.transformMat4$1(Ye,Ye,Fe);const ct=new j.pointGeometry(Ge[0]/Ge[3],Ge[1]/Ge[3]),mt=new j.pointGeometry(Ke[0]/Ke[3],Ke[1]/Ke[3]),Mt=j.polygonContainsPoint(Oe,ct)&&Ge[3]<Ye[3],At=j.polygonContainsPoint(Oe,mt)&&Ke[3]<Ye[3];if(!Mt&&!At)return null;const Tt=function(Xt,Ht,an){for(let _n=1;_n<Xt.length;_n++){const Hn=Zt(Ht.pointCoordinate3D(Xt[_n-1]).x),dn=Zt(Ht.pointCoordinate3D(Xt[_n]).x);if(an<0){if(Hn<dn)return{idx:_n,t:-Hn/(dn-1-Hn)}}else if(dn<Hn)return{idx:_n,t:(1-Hn)/(dn+1-Hn)}}return null}(Oe,Le,Mt?-1:1);if(!Tt)return null;const{idx:kt,t:wt}=Tt;let $t=kt>1?on(Oe.slice(0,kt),Le):[],Pt=kt<Oe.length?on(Oe.slice(kt),Le):[];$t=$t.map(Xt=>new j.pointGeometry(Zt(Xt.x),Xt.y)),Pt=Pt.map(Xt=>new j.pointGeometry(Zt(Xt.x),Xt.y));const Yt=[...$t];Yt.length===0&&Yt.push(Pt[Pt.length-1]);const Kt=j.number(Yt[Yt.length-1].y,(Pt.length===0?$t[0]:Pt[0]).y,wt);let Vt;return Vt=Mt?[new j.pointGeometry(0,Kt),new j.pointGeometry(0,0),new j.pointGeometry(1,0),new j.pointGeometry(1,Kt)]:[new j.pointGeometry(1,Kt),new j.pointGeometry(1,1),new j.pointGeometry(0,1),new j.pointGeometry(0,Kt)],Yt.push(...Vt),Pt.length===0?Yt.push($t[0]):Yt.push(...Pt),{polygon:Yt.map(Xt=>new j.MercatorCoordinate(Xt.x,Xt.y)),unwrapped:!1}}(U,ee);if(be)return be;const Ie=function(Oe,Le){let Fe=!1,Ge=-1/0,Ke=0;for(let ct=0;ct<Oe.length-1;ct++)Oe[ct].x>Ge&&(Ge=Oe[ct].x,Ke=ct);for(let ct=0;ct<Oe.length-1;ct++){const mt=(Ke+ct)%(Oe.length-1),Mt=Oe[mt],At=Oe[mt+1];Math.abs(Mt.x-At.x)>.5&&(Mt.x<At.x?(Mt.x+=1,mt===0&&(Oe[Oe.length-1].x+=1)):(At.x+=1,mt+1===Oe.length-1&&(Oe[0].x+=1)),Fe=!0)}const Ye=j.mercatorXfromLng(Le.center.lng);return Fe&&Ye<Math.abs(Ye-1)&&Oe.forEach(ct=>{ct.x-=1}),{polygon:Oe,unwrapped:Fe}}(on(U,ee).map(Oe=>new j.pointGeometry(Zt(Oe.x),Oe.y)),ee);return{polygon:Ie.polygon.map(Oe=>new j.MercatorCoordinate(Oe.x,Oe.y)),unwrapped:Ie.unwrapped}}}function on(de,U){return j.resample(de,ee=>{const be=U.pointCoordinate3D(ee);ee.x=be.x,ee.y=be.y},1/256)}function Zt(de){return de<0?1+de%1:de%1}function Ot(de){return 100*de|0}function Qt(de,U,ee,be,Ie){const Oe=function(Le,Fe){if(Le)return Ie(Le);if(Fe){const Ge=j.pick(j.extend(Fe,de),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Fe.vector_layers&&(Ge.vectorLayers=Fe.vector_layers,Ge.vectorLayerIds=Ge.vectorLayers.map(Ke=>Ke.id)),Fe.language_options&&(Ge.languageOptions=Fe.language_options),Fe.language&&Fe.language[Fe.id]&&(Ge.language=Fe.language[Fe.id]),Fe.worldview_options&&(Ge.worldviewOptions=Fe.worldview_options),Fe.worldview?Ge.worldview=Fe.worldview[Fe.id]:Fe.worldview_default&&(Ge.worldview=Fe.worldview_default),Ge.tiles=U.canonicalizeTileset(Ge,de.url),Ie(null,Ge)}};return de.url?j.getJSON(U.transformRequest(U.normalizeSourceURL(de.url,null,ee,be),j.ResourceType.Source),Oe):j.exported.frame(()=>Oe(null,de))}class un{constructor(U,ee,be){this.bounds=j.LngLatBounds.convert(this.validateBounds(U)),this.minzoom=ee||0,this.maxzoom=be||24}validateBounds(U){return Array.isArray(U)&&U.length===4?[Math.max(-180,U[0]),Math.max(-90,U[1]),Math.min(180,U[2]),Math.min(90,U[3])]:[-180,-90,180,90]}contains(U){const ee=Math.pow(2,U.z),be=Math.floor(j.mercatorXfromLng(this.bounds.getWest())*ee),Ie=Math.floor(j.mercatorYfromLat(this.bounds.getNorth())*ee),Oe=Math.ceil(j.mercatorXfromLng(this.bounds.getEast())*ee),Le=Math.ceil(j.mercatorYfromLat(this.bounds.getSouth())*ee);return U.x>=be&&U.x<Oe&&U.y>=Ie&&U.y<Le}}class yn{constructor(U,ee,be){this.context=U;const Ie=U.gl;this.buffer=Ie.createBuffer(),this.dynamicDraw=Boolean(be),this.context.unbindVAO(),U.bindElementBuffer.set(this.buffer),Ie.bufferData(Ie.ELEMENT_ARRAY_BUFFER,ee.arrayBuffer,this.dynamicDraw?Ie.DYNAMIC_DRAW:Ie.STATIC_DRAW),this.dynamicDraw||ee.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(U){const ee=this.context.gl;this.context.unbindVAO(),this.bind(),ee.bufferSubData(ee.ELEMENT_ARRAY_BUFFER,0,U.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const In={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class It{constructor(U,ee,be,Ie){this.length=ee.length,this.attributes=be,this.itemSize=ee.bytesPerElement,this.dynamicDraw=Ie,this.context=U;const Oe=U.gl;this.buffer=Oe.createBuffer(),U.bindVertexBuffer.set(this.buffer),Oe.bufferData(Oe.ARRAY_BUFFER,ee.arrayBuffer,this.dynamicDraw?Oe.DYNAMIC_DRAW:Oe.STATIC_DRAW),this.dynamicDraw||ee.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(U){const ee=this.context.gl;this.bind(),ee.bufferSubData(ee.ARRAY_BUFFER,0,U.arrayBuffer)}enableAttributes(U,ee){for(let be=0;be<this.attributes.length;be++){const Ie=ee.attributes[this.attributes[be].name];Ie!==void 0&&U.enableVertexAttribArray(Ie)}}setVertexAttribPointers(U,ee,be){for(let Ie=0;Ie<this.attributes.length;Ie++){const Oe=this.attributes[Ie],Le=ee.attributes[Oe.name];Le!==void 0&&U.vertexAttribPointer(Le,Oe.components,U[In[Oe.type]],!1,this.itemSize,Oe.offset+this.itemSize*(be||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Rt{constructor(U){this.gl=U.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(U){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class nn extends Rt{getDefault(){return j.Color.transparent}set(U){const ee=this.current;(U.r!==ee.r||U.g!==ee.g||U.b!==ee.b||U.a!==ee.a||this.dirty)&&(this.gl.clearColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)}}class xn extends Rt{getDefault(){return 1}set(U){(U!==this.current||this.dirty)&&(this.gl.clearDepth(U),this.current=U,this.dirty=!1)}}class En extends Rt{getDefault(){return 0}set(U){(U!==this.current||this.dirty)&&(this.gl.clearStencil(U),this.current=U,this.dirty=!1)}}class $n extends Rt{getDefault(){return[!0,!0,!0,!0]}set(U){const ee=this.current;(U[0]!==ee[0]||U[1]!==ee[1]||U[2]!==ee[2]||U[3]!==ee[3]||this.dirty)&&(this.gl.colorMask(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)}}class zn extends Rt{getDefault(){return!0}set(U){(U!==this.current||this.dirty)&&(this.gl.depthMask(U),this.current=U,this.dirty=!1)}}class vn extends Rt{getDefault(){return 255}set(U){(U!==this.current||this.dirty)&&(this.gl.stencilMask(U),this.current=U,this.dirty=!1)}}class wn extends Rt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(U){const ee=this.current;(U.func!==ee.func||U.ref!==ee.ref||U.mask!==ee.mask||this.dirty)&&(this.gl.stencilFunc(U.func,U.ref,U.mask),this.current=U,this.dirty=!1)}}class Sn extends Rt{getDefault(){const U=this.gl;return[U.KEEP,U.KEEP,U.KEEP]}set(U){const ee=this.current;(U[0]!==ee[0]||U[1]!==ee[1]||U[2]!==ee[2]||this.dirty)&&(this.gl.stencilOp(U[0],U[1],U[2]),this.current=U,this.dirty=!1)}}class Jn extends Rt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;U?ee.enable(ee.STENCIL_TEST):ee.disable(ee.STENCIL_TEST),this.current=U,this.dirty=!1}}class tr extends Rt{getDefault(){return[0,1]}set(U){const ee=this.current;(U[0]!==ee[0]||U[1]!==ee[1]||this.dirty)&&(this.gl.depthRange(U[0],U[1]),this.current=U,this.dirty=!1)}}class pr extends Rt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;U?ee.enable(ee.DEPTH_TEST):ee.disable(ee.DEPTH_TEST),this.current=U,this.dirty=!1}}class Xn extends Rt{getDefault(){return this.gl.LESS}set(U){(U!==this.current||this.dirty)&&(this.gl.depthFunc(U),this.current=U,this.dirty=!1)}}class Gn extends Rt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;U?ee.enable(ee.BLEND):ee.disable(ee.BLEND),this.current=U,this.dirty=!1}}class cn extends Rt{getDefault(){const U=this.gl;return[U.ONE,U.ZERO]}set(U){const ee=this.current;(U[0]!==ee[0]||U[1]!==ee[1]||this.dirty)&&(this.gl.blendFunc(U[0],U[1]),this.current=U,this.dirty=!1)}}class gn extends Rt{getDefault(){return j.Color.transparent}set(U){const ee=this.current;(U.r!==ee.r||U.g!==ee.g||U.b!==ee.b||U.a!==ee.a||this.dirty)&&(this.gl.blendColor(U.r,U.g,U.b,U.a),this.current=U,this.dirty=!1)}}class On extends Rt{getDefault(){return this.gl.FUNC_ADD}set(U){(U!==this.current||this.dirty)&&(this.gl.blendEquation(U),this.current=U,this.dirty=!1)}}class Kn extends Rt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;U?ee.enable(ee.CULL_FACE):ee.disable(ee.CULL_FACE),this.current=U,this.dirty=!1}}class _r extends Rt{getDefault(){return this.gl.BACK}set(U){(U!==this.current||this.dirty)&&(this.gl.cullFace(U),this.current=U,this.dirty=!1)}}class kr extends Rt{getDefault(){return this.gl.CCW}set(U){(U!==this.current||this.dirty)&&(this.gl.frontFace(U),this.current=U,this.dirty=!1)}}class Dr extends Rt{getDefault(){return null}set(U){(U!==this.current||this.dirty)&&(this.gl.useProgram(U),this.current=U,this.dirty=!1)}}class xr extends Rt{getDefault(){return this.gl.TEXTURE0}set(U){(U!==this.current||this.dirty)&&(this.gl.activeTexture(U),this.current=U,this.dirty=!1)}}class Lr extends Rt{getDefault(){const U=this.gl;return[0,0,U.drawingBufferWidth,U.drawingBufferHeight]}set(U){const ee=this.current;(U[0]!==ee[0]||U[1]!==ee[1]||U[2]!==ee[2]||U[3]!==ee[3]||this.dirty)&&(this.gl.viewport(U[0],U[1],U[2],U[3]),this.current=U,this.dirty=!1)}}class Br extends Rt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.bindFramebuffer(ee.FRAMEBUFFER,U),this.current=U,this.dirty=!1}}class Vr extends Rt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.bindRenderbuffer(ee.RENDERBUFFER,U),this.current=U,this.dirty=!1}}class jr extends Rt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.bindTexture(ee.TEXTURE_2D,U),this.current=U,this.dirty=!1}}class Oi extends Rt{getDefault(){return null}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.bindBuffer(ee.ARRAY_BUFFER,U),this.current=U,this.dirty=!1}}class Di extends Rt{getDefault(){return null}set(U){const ee=this.gl;ee.bindBuffer(ee.ELEMENT_ARRAY_BUFFER,U),this.current=U,this.dirty=!1}}class Ti extends Rt{constructor(U){super(U),this.vao=U.extVertexArrayObject}getDefault(){return null}set(U){this.vao&&(U!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(U),this.current=U,this.dirty=!1)}}class Sr extends Rt{getDefault(){return 4}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.pixelStorei(ee.UNPACK_ALIGNMENT,U),this.current=U,this.dirty=!1}}class Fo extends Rt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U),this.current=U,this.dirty=!1}}class Ea extends Rt{getDefault(){return!1}set(U){if(U===this.current&&!this.dirty)return;const ee=this.gl;ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,U),this.current=U,this.dirty=!1}}class vi extends Rt{constructor(U,ee){super(U),this.context=U,this.parent=ee}getDefault(){return null}}class sa extends vi{setDirty(){this.dirty=!0}set(U){if(U===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const ee=this.gl;ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,U,0),this.current=U,this.dirty=!1}}class Lt extends vi{attachment(){return this.gl.DEPTH_ATTACHMENT}set(U){if(U===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const ee=this.gl;ee.framebufferRenderbuffer(ee.FRAMEBUFFER,this.attachment(),ee.RENDERBUFFER,U),this.current=U,this.dirty=!1}}class lt extends Lt{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ft{constructor(U,ee,be,Ie){this.context=U,this.width=ee,this.height=be;const Oe=this.framebuffer=U.gl.createFramebuffer();this.colorAttachment=new sa(U,Oe),Ie&&(this.depthAttachment=new Lt(U,Oe))}destroy(){const U=this.context.gl,ee=this.colorAttachment.get();if(ee&&U.deleteTexture(ee),this.depthAttachment){const be=this.depthAttachment.get();be&&U.deleteRenderbuffer(be)}U.deleteFramebuffer(this.framebuffer)}}class Dt{constructor(U){this.gl=U,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new nn(this),this.clearDepth=new xn(this),this.clearStencil=new En(this),this.colorMask=new $n(this),this.depthMask=new zn(this),this.stencilMask=new vn(this),this.stencilFunc=new wn(this),this.stencilOp=new Sn(this),this.stencilTest=new Jn(this),this.depthRange=new tr(this),this.depthTest=new pr(this),this.depthFunc=new Xn(this),this.blend=new Gn(this),this.blendFunc=new cn(this),this.blendColor=new gn(this),this.blendEquation=new On(this),this.cullFace=new Kn(this),this.cullFaceSide=new _r(this),this.frontFace=new kr(this),this.program=new Dr(this),this.activeTexture=new xr(this),this.viewport=new Lr(this),this.bindFramebuffer=new Br(this),this.bindRenderbuffer=new Vr(this),this.bindTexture=new jr(this),this.bindVertexBuffer=new Oi(this),this.bindElementBuffer=new Di(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ti(this),this.pixelStoreUnpack=new Sr(this),this.pixelStoreUnpackPremultiplyAlpha=new Fo(this),this.pixelStoreUnpackFlipY=new Ea(this),this.extTextureFilterAnisotropic=U.getExtension("EXT_texture_filter_anisotropic")||U.getExtension("MOZ_EXT_texture_filter_anisotropic")||U.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=U.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=U.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(U.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=U.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=U.getExtension("OES_standard_derivatives"),this.extTimerQuery=U.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=U.getParameter(U.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(U,ee){return new yn(this,U,ee)}createVertexBuffer(U,ee,be){return new It(this,U,ee,be)}createRenderbuffer(U,ee,be){const Ie=this.gl,Oe=Ie.createRenderbuffer();return this.bindRenderbuffer.set(Oe),Ie.renderbufferStorage(Ie.RENDERBUFFER,U,ee,be),this.bindRenderbuffer.set(null),Oe}createFramebuffer(U,ee,be){return new ft(this,U,ee,be)}clear({color:U,depth:ee,stencil:be}){const Ie=this.gl;let Oe=0;U&&(Oe|=Ie.COLOR_BUFFER_BIT,this.clearColor.set(U),this.colorMask.set([!0,!0,!0,!0])),ee!==void 0&&(Oe|=Ie.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(ee),this.depthMask.set(!0)),be!==void 0&&(Oe|=Ie.STENCIL_BUFFER_BIT,this.clearStencil.set(be),this.stencilMask.set(255)),Ie.clear(Oe)}setCullFace(U){U.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(U.mode),this.frontFace.set(U.frontFace))}setDepthMode(U){U.func!==this.gl.ALWAYS||U.mask?(this.depthTest.set(!0),this.depthFunc.set(U.func),this.depthMask.set(U.mask),this.depthRange.set(U.range)):this.depthTest.set(!1)}setStencilMode(U){U.test.func!==this.gl.ALWAYS||U.mask?(this.stencilTest.set(!0),this.stencilMask.set(U.mask),this.stencilOp.set([U.fail,U.depthFail,U.pass]),this.stencilFunc.set({func:U.test.func,ref:U.ref,mask:U.test.mask})):this.stencilTest.set(!1)}setColorMode(U){xe(U.blendFunction,j.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(U.blendFunction),this.blendColor.set(U.blendColor)),this.colorMask.set(U.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class jt extends j.Evented{constructor(U,ee,be,Ie){super(),this.id=U,this.dispatcher=be,this.setEventedParent(Ie),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=j.extend({type:"raster"},ee),j.extend(this,j.pick(ee,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Qt(this._options,this.map._requestManager,null,null,(U,ee)=>{this._tileJSONRequest=null,this._loaded=!0,U?this.fire(new j.ErrorEvent(U)):ee&&(j.extend(this,ee),ee.bounds&&(this.tileBounds=new un(ee.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(ee.tiles),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(U){this.map=U,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}hasTile(U){return!this.tileBounds||this.tileBounds.contains(U.canonical)}loadTile(U,ee){const be=j.exported.devicePixelRatio>=2,Ie=this.map._requestManager.normalizeTileURL(U.tileID.canonical.url(this.tiles,this.scheme),be,this.tileSize);U.request=j.getImage(this.map._requestManager.transformRequest(Ie,j.ResourceType.Tile),(Oe,Le,Fe,Ge)=>(delete U.request,U.aborted?(U.state="unloaded",ee(null)):Oe?(U.state="errored",ee(Oe)):Le?(this.map._refreshExpiredTiles&&U.setExpiryData({cacheControl:Fe,expires:Ge}),U.setTexture(Le,this.map.painter),U.state="loaded",j.cacheEntryPossiblyAdded(this.dispatcher),void ee(null)):ee(null)))}static loadTileData(U,ee,be){U.setTexture(ee,be)}static unloadTileData(U,ee){U.texture&&ee.saveTileTexture(U.texture)}abortTile(U,ee){U.request&&(U.request.cancel(),delete U.request),ee()}unloadTile(U,ee){U.texture&&this.map.painter.saveTileTexture(U.texture),ee()}hasTransition(){return!1}}let en;function pn(de,U,ee,be,Ie,Oe,Le,Fe){const Ge=[de,ee,Ie,U,be,Oe,1,1,1],Ke=[Le,Fe,1],Ye=j.adjoint([],Ge),[ct,mt,Mt]=j.transformMat3(Ke,Ke,j.transpose(Ye,Ye));return j.multiply$1(Ge,[ct,0,0,0,mt,0,0,0,Mt],Ge)}class hn extends j.Evented{constructor(U,ee,be,Ie){super(),this.id=U,this.dispatcher=be,this.coordinates=ee.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ie),this.options=ee}load(U,ee){this._loaded=ee||!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this.url=this.options.url,j.getImage(this.map._requestManager.transformRequest(this.url,j.ResourceType.Image),(be,Ie)=>{if(this._loaded=!0,be)this.fire(new j.ErrorEvent(be));else if(Ie){const{HTMLImageElement:Oe}=j.window;this.image=Ie instanceof Oe?j.exported.getImageData(Ie):Ie,this.width=this.image.width,this.height=this.image.height,U&&(this.coordinates=U),this._finishLoading()}})}loaded(){return this._loaded}updateImage(U){return this.image&&U.url?(this.options.url=U.url,this.load(U.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(U){this.map=U,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(U){this.coordinates=U,this._boundsArray=void 0;const ee=U.map(j.MercatorCoordinate.fromLngLat);return this.tileID=function(be){let Ie=1/0,Oe=1/0,Le=-1/0,Fe=-1/0;for(const ct of be)Ie=Math.min(Ie,ct.x),Oe=Math.min(Oe,ct.y),Le=Math.max(Le,ct.x),Fe=Math.max(Fe,ct.y);const Ge=Math.max(Le-Ie,Fe-Oe),Ke=Math.max(0,Math.floor(-Math.log(Ge)/Math.LN2)),Ye=Math.pow(2,Ke);return new j.CanonicalTileID(Ke,Math.floor((Ie+Le)/2*Ye),Math.floor((Oe+Fe)/2*Ye))}(ee),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(U){for(const Ge in this.tiles){const Ke=this.tiles[Ge];Ke.state!=="loaded"&&(Ke.state="loaded",Ke.texture=this.texture)}if(this._boundsArray)return;const ee=j.tileTransform(this.tileID,this.map.transform.projection),[be,Ie,Oe,Le]=this.coordinates.map(Ge=>{const Ke=ee.projection.project(Ge[0],Ge[1]);return j.getTilePoint(ee,Ke)._round()});this.perspectiveTransform=function(Ge,Ke,Ye,ct,mt,Mt,At,Tt,kt,wt){const $t=pn(0,0,Ge,0,0,Ke,Ge,Ke),Pt=pn(Ye,ct,mt,Mt,At,Tt,kt,wt);return j.multiply$1(Pt,j.adjoint($t,$t),Pt),[Pt[6]/Pt[8]*Ge/j.EXTENT,Pt[7]/Pt[8]*Ke/j.EXTENT]}(this.width,this.height,be.x,be.y,Ie.x,Ie.y,Le.x,Le.y,Oe.x,Oe.y);const Fe=this._boundsArray=new j.StructArrayLayout4i8;Fe.emplaceBack(be.x,be.y,0,0),Fe.emplaceBack(Ie.x,Ie.y,j.EXTENT,0),Fe.emplaceBack(Le.x,Le.y,0,j.EXTENT),Fe.emplaceBack(Oe.x,Oe.y,j.EXTENT,j.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=U.createVertexBuffer(Fe,j.boundsAttributes.members),this.boundsSegments=j.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const U=this.map.painter.context,ee=U.gl;this.texture?this.texture.update(this.image):(this.texture=new j.Texture(U,this.image,ee.RGBA),this.texture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE)),this._prepareData(U)}loadTile(U,ee){this.tileID&&this.tileID.equals(U.tileID.canonical)?(this.tiles[String(U.tileID.wrap)]=U,U.buckets={},ee(null)):(U.state="errored",ee(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const tn={vector:class extends j.Evented{constructor(de,U,ee,be){if(super(),this.id=de,this.dispatcher=ee,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,j.extend(this,j.pick(U,["url","scheme","tileSize","promoteId"])),this._options=j.extend({type:"vector"},U),this._collectResourceTiming=U.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(be),this._tileWorkers={},this._deduped=new j.DedupedRequest}load(de){this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"}));const U=this.language||this.map._language,ee=this.worldview||this.map._worldview;this._tileJSONRequest=Qt(this._options,this.map._requestManager,U,ee,(be,Ie)=>{this._tileJSONRequest=null,this._loaded=!0,be?(U&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${U}`),ee&&ee.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${ee}`),this.fire(new j.ErrorEvent(be))):Ie&&(j.extend(this,Ie),Ie.bounds&&(this.tileBounds=new un(Ie.bounds,this.minzoom,this.maxzoom)),j.postTurnstileEvent(Ie.tiles,this.map._requestManager._customAccessToken),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))),de&&de(be)})}loaded(){return this._loaded}hasTile(de){return!this.tileBounds||this.tileBounds.contains(de.canonical)}onAdd(de){this.map=de,this.load()}setSourceProperty(de){this._tileJSONRequest&&this._tileJSONRequest.cancel(),de(),this.load(()=>{const U=this.map.style._getSourceCaches(this.id);for(const ee of U)ee.clearTiles()})}setTiles(de){return this.setSourceProperty(()=>{this._options.tiles=de}),this}setUrl(de){return this.setSourceProperty(()=>{this.url=de,this._options.url=de}),this}_setLanguage(de){return de===this.language||this.setSourceProperty(()=>{this.language=de}),this}_setWorldview(de){return de===this.worldview?this:this.worldviewOptions&&de&&!this.worldviewOptions[de]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${de}".`),this):(this.setSourceProperty(()=>{this.worldview=de}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return j.extend({},this._options)}loadTile(de,U){const ee=this.map._requestManager.normalizeTileURL(de.tileID.canonical.url(this.tiles,this.scheme)),be={request:this.map._requestManager.transformRequest(ee,j.ResourceType.Tile),data:void 0,uid:de.uid,tileID:de.tileID,tileZoom:de.tileZoom,zoom:de.tileID.overscaledZ,tileSize:this.tileSize*de.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:de.isSymbolTile};if(be.request.collectResourceTiming=this._collectResourceTiming,de.actor&&de.state!=="expired")de.state==="loading"?de.reloadCallback=U:de.request=de.actor.send("reloadTile",be,Ie.bind(this));else if(de.actor=this._tileWorkers[ee]=this._tileWorkers[ee]||this.dispatcher.getActor(),this.dispatcher.ready)de.request=de.actor.send("loadTile",be,Ie.bind(this),void 0,!0);else{const Oe=j.loadVectorTile.call({deduped:this._deduped},be,(Le,Fe)=>{Le||!Fe?Ie.call(this,Le):(be.data={cacheControl:Fe.cacheControl,expires:Fe.expires,rawData:Fe.rawData.slice(0)},de.actor&&de.actor.send("loadTile",be,Ie.bind(this),void 0,!0))},!0);de.request={cancel:Oe}}function Ie(Oe,Le){return delete de.request,de.aborted?U(null):Oe&&Oe.status!==404?U(Oe):(Le&&Le.resourceTiming&&(de.resourceTiming=Le.resourceTiming),this.map._refreshExpiredTiles&&Le&&de.setExpiryData(Le),de.loadVectorData(Le,this.map.painter),j.cacheEntryPossiblyAdded(this.dispatcher),U(null),void(de.reloadCallback&&(this.loadTile(de,de.reloadCallback),de.reloadCallback=null)))}}abortTile(de){de.request&&(de.request.cancel(),delete de.request),de.actor&&de.actor.send("abortTile",{uid:de.uid,type:this.type,source:this.id})}unloadTile(de){de.unloadVectorData(),de.actor&&de.actor.send("removeTile",{uid:de.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:jt,"raster-dem":class extends jt{constructor(de,U,ee,be){super(de,U,ee,be),this.type="raster-dem",this.maxzoom=22,this._options=j.extend({type:"raster-dem"},U),this.encoding=U.encoding||"mapbox"}loadTile(de,U){const ee=this.map._requestManager.normalizeTileURL(de.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function be(Ie,Oe){Ie&&(de.state="errored",U(Ie)),Oe&&(de.dem=Oe,de.dem.onDeserialize(),de.needsHillshadePrepare=!0,de.needsDEMTextureUpload=!0,de.state="loaded",U(null))}de.request=j.getImage(this.map._requestManager.transformRequest(ee,j.ResourceType.Tile),function(Ie,Oe,Le,Fe){if(delete de.request,de.aborted)de.state="unloaded",U(null);else if(Ie)de.state="errored",U(Ie);else if(Oe){this.map._refreshExpiredTiles&&de.setExpiryData({cacheControl:Le,expires:Fe});const Ge=j.window.ImageBitmap&&Oe instanceof j.window.ImageBitmap&&(en==null&&(en=j.window.OffscreenCanvas&&new j.window.OffscreenCanvas(1,1).getContext("2d")&&typeof j.window.createImageBitmap=="function"),en),Ke=1-(Oe.width-j.prevPowerOfTwo(Oe.width))/2;Ke<1||de.neighboringTiles||(de.neighboringTiles=this._getNeighboringTiles(de.tileID));const Ye=Ge?Oe:j.exported.getImageData(Oe,Ke),ct={uid:de.uid,coord:de.tileID,source:this.id,rawImageData:Ye,encoding:this.encoding,padding:Ke};de.actor&&de.state!=="expired"||(de.actor=this.dispatcher.getActor(),de.actor.send("loadDEMTile",ct,be.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(de){const U=de.canonical,ee=Math.pow(2,U.z),be=(U.x-1+ee)%ee,Ie=U.x===0?de.wrap-1:de.wrap,Oe=(U.x+1+ee)%ee,Le=U.x+1===ee?de.wrap+1:de.wrap,Fe={};return Fe[new j.OverscaledTileID(de.overscaledZ,Ie,U.z,be,U.y).key]={backfilled:!1},Fe[new j.OverscaledTileID(de.overscaledZ,Le,U.z,Oe,U.y).key]={backfilled:!1},U.y>0&&(Fe[new j.OverscaledTileID(de.overscaledZ,Ie,U.z,be,U.y-1).key]={backfilled:!1},Fe[new j.OverscaledTileID(de.overscaledZ,de.wrap,U.z,U.x,U.y-1).key]={backfilled:!1},Fe[new j.OverscaledTileID(de.overscaledZ,Le,U.z,Oe,U.y-1).key]={backfilled:!1}),U.y+1<ee&&(Fe[new j.OverscaledTileID(de.overscaledZ,Ie,U.z,be,U.y+1).key]={backfilled:!1},Fe[new j.OverscaledTileID(de.overscaledZ,de.wrap,U.z,U.x,U.y+1).key]={backfilled:!1},Fe[new j.OverscaledTileID(de.overscaledZ,Le,U.z,Oe,U.y+1).key]={backfilled:!1}),Fe}unloadTile(de){de.demTexture&&this.map.painter.saveTileTexture(de.demTexture),de.fbo&&(de.fbo.destroy(),delete de.fbo),de.dem&&delete de.dem,delete de.neighboringTiles,de.state="unloaded"}},geojson:class extends j.Evented{constructor(de,U,ee,be){super(),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=ee.getActor(),this.setEventedParent(be),this._data=U.data,this._options=j.extend({},U),this._collectResourceTiming=U.collectResourceTiming,U.maxzoom!==void 0&&(this.maxzoom=U.maxzoom),U.type&&(this.type=U.type),U.attribution&&(this.attribution=U.attribution),this.promoteId=U.promoteId;const Ie=j.EXTENT/this.tileSize;this.workerOptions=j.extend({source:this.id,cluster:U.cluster||!1,geojsonVtOptions:{buffer:(U.buffer!==void 0?U.buffer:128)*Ie,tolerance:(U.tolerance!==void 0?U.tolerance:.375)*Ie,extent:j.EXTENT,maxZoom:this.maxzoom,lineMetrics:U.lineMetrics||!1,generateId:U.generateId||!1},superclusterOptions:{maxZoom:U.clusterMaxZoom!==void 0?U.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,U.clusterMinPoints||2),extent:j.EXTENT,radius:(U.clusterRadius!==void 0?U.clusterRadius:50)*Ie,log:!1,generateId:U.generateId||!1},clusterProperties:U.clusterProperties,filter:U.filter},U.workerOptions)}onAdd(de){this.map=de,this.setData(this._data)}setData(de){return this._data=de,this._updateWorkerData(),this}getClusterExpansionZoom(de,U){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:de,source:this.id},U),this}getClusterChildren(de,U){return this.actor.send("geojson.getClusterChildren",{clusterId:de,source:this.id},U),this}getClusterLeaves(de,U,ee,be){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:de,limit:U,offset:ee},be),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new j.Event("dataloading",{dataType:"source"})),this._loaded=!1;const de=j.extend({},this.workerOptions),U=this._data;typeof U=="string"?(de.request=this.map._requestManager.transformRequest(j.exported.resolveURL(U),j.ResourceType.Source),de.request.collectResourceTiming=this._collectResourceTiming):de.data=JSON.stringify(U),this._pendingLoad=this.actor.send(`${this.type}.loadData`,de,(ee,be)=>{if(this._loaded=!0,this._pendingLoad=null,ee)this.fire(new j.ErrorEvent(ee));else{const Ie={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&be&&be.resourceTiming&&be.resourceTiming[this.id]&&(Ie.resourceTiming=be.resourceTiming[this.id]),this.fire(new j.Event("data",Ie)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(de,U){const ee=de.actor?"reloadTile":"loadTile";de.actor=this.actor,de.request=this.actor.send(ee,{type:this.type,uid:de.uid,tileID:de.tileID,tileZoom:de.tileZoom,zoom:de.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:j.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(be,Ie)=>(delete de.request,de.unloadVectorData(),de.aborted?U(null):be?U(be):(de.loadVectorData(Ie,this.map.painter,ee==="reloadTile"),U(null))),void 0,ee==="loadTile")}abortTile(de){de.request&&(de.request.cancel(),delete de.request),de.aborted=!0}unloadTile(de){de.unloadVectorData(),this.actor.send("removeTile",{uid:de.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return j.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends hn{constructor(de,U,ee,be){super(de,U,ee,be),this.roundZoom=!0,this.type="video",this.options=U}load(){this._loaded=!1;const de=this.options;this.urls=[];for(const U of de.urls)this.urls.push(this.map._requestManager.transformRequest(U,j.ResourceType.Source).url);j.getVideo(this.urls,(U,ee)=>{this._loaded=!0,U?this.fire(new j.ErrorEvent(U)):ee&&(this.video=ee,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(de){if(this.video){const U=this.video.seekable;de<U.start(0)||de>U.end(0)?this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${U.start(0)} and ${U.end(0)}-second mark.`))):this.video.currentTime=de}}getVideo(){return this.video}onAdd(de){this.map||(this.map=de,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const de=this.map.painter.context,U=de.gl;this.texture?this.video.paused||(this.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE),U.texSubImage2D(U.TEXTURE_2D,0,0,0,U.RGBA,U.UNSIGNED_BYTE,this.video)):(this.texture=new j.Texture(de,this.video,U.RGBA),this.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(de)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:hn,canvas:class extends hn{constructor(de,U,ee,be){super(de,U,ee,be),U.coordinates?Array.isArray(U.coordinates)&&U.coordinates.length===4&&!U.coordinates.some(Ie=>!Array.isArray(Ie)||Ie.length!==2||Ie.some(Oe=>typeof Oe!="number"))||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'missing required property "coordinates"'))),U.animate&&typeof U.animate!="boolean"&&this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'optional "animate" property must be a boolean value'))),U.canvas?typeof U.canvas=="string"||U.canvas instanceof j.window.HTMLCanvasElement||this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new j.ErrorEvent(new j.ValidationError(`sources.${de}`,null,'missing required property "canvas"'))),this.options=U,this.animate=U.animate===void 0||U.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof j.window.HTMLCanvasElement?this.options.canvas:j.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new j.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(de){this.map=de,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let de=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,de=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,de=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const U=this.map.painter.context;this.texture?(de||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new j.Texture(U,this.canvas,U.gl.RGBA,{premultiply:!0}),this._prepareData(U)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const de of[this.canvas.width,this.canvas.height])if(isNaN(de)||de<=0)return!0;return!1}},custom:class extends j.Evented{constructor(de,U,ee,be){super(),this.id=de,this.type="custom",this._dataType="raster",this._dispatcher=ee,this._implementation=U,this.setEventedParent(be),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new j.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new j.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new un(this._implementation.bounds,this.minzoom,this.maxzoom)),U.update=this._update.bind(this),U.coveringTiles=this._coveringTiles.bind(this),j.extend(this,j.pick(U,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return j.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new j.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(de){this._map=de,this._loaded=!1,this.fire(new j.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(de),this.load()}onRemove(de){this._implementation.onRemove&&this._implementation.onRemove(de)}hasTile(de){if(this._implementation.hasTile){const{x:U,y:ee,z:be}=de.canonical;return this._implementation.hasTile({x:U,y:ee,z:be})}return!this.tileBounds||this.tileBounds.contains(de.canonical)}loadTile(de,U){const{x:ee,y:be,z:Ie}=de.tileID.canonical,Oe=new j.window.AbortController,Le=this._implementation.loadTile({x:ee,y:be,z:Ie},{signal:Oe.signal});if(!Le)return this.loadTileData(de,{width:this.tileSize,height:this.tileSize,data:null}),de.state="loaded",U(null);Le.cancel=()=>Oe.abort(),de.request=Le.then(function(Fe){return delete de.request,de.aborted?(de.state="unloaded",U(null)):Fe?function(Ge){return Ge instanceof j.window.ImageData||Ge instanceof j.window.ImageBitmap||Ge instanceof j.window.HTMLCanvasElement}(Fe)?(this.loadTileData(de,Fe),de.state="loaded",void U(null)):(de.state="errored",U(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(de,{width:this.tileSize,height:this.tileSize,data:null}),de.state="loaded",U(null))}.bind(this)).catch(Fe=>{Fe.code!==20&&(de.state="errored",U(Fe))})}loadTileData(de,U){jt.loadTileData(de,U,this._map.painter)}unloadTileData(de){jt.unloadTileData(de,this._map.painter)}prepareTile(de){if(!this._implementation.prepareTile)return null;const{x:U,y:ee,z:be}=de.tileID.canonical,Ie=this._implementation.prepareTile({x:U,y:ee,z:be});return Ie?(this.loadTileData(de,Ie),de.state="loaded",Ie):null}unloadTile(de,U){if(this.unloadTileData(de),this._implementation.unloadTile){const{x:ee,y:be,z:Ie}=de.tileID.canonical;this._implementation.unloadTile({x:ee,y:be,z:Ie})}U()}abortTile(de,U){de.request&&de.request.cancel&&(de.request.cancel(),delete de.request),U()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(de=>({x:de.canonical.x,y:de.canonical.y,z:de.canonical.z}))}_update(){this.fire(new j.Event("data",{dataType:"source",sourceDataType:"content"}))}}},fn=function(de,U,ee,be){const Ie=new tn[U.type](de,U,ee,be);if(Ie.id!==de)throw new Error(`Expected Source id to be ${de} instead of ${Ie.id}`);return j.bindAll(["load","abort","unload","serialize","prepare"],Ie),Ie};function Nn(de,U){const ee=j.identity([]);return j.scale(ee,ee,[.5*de.width,.5*-de.height,1]),j.translate(ee,ee,[1,-1,0]),j.multiply(ee,ee,de.calculateProjMatrix(U.toUnwrapped())),Float32Array.from(ee)}function ar(de,U,ee,be,Ie,Oe,Le,Fe=!1){const Ge=de.tilesIn(be,Le,Fe);Ge.sort(br);const Ke=[];for(const ct of Ge)Ke.push({wrappedTileID:ct.tile.tileID.wrapped().key,queryResults:ct.tile.queryRenderedFeatures(U,ee,de._state,ct,Ie,Oe,Nn(de.transform,ct.tile.tileID),Fe)});const Ye=function(ct){const mt={},Mt={};for(const At of ct){const Tt=At.queryResults,kt=At.wrappedTileID,wt=Mt[kt]=Mt[kt]||{};for(const $t in Tt){const Pt=Tt[$t],Yt=wt[$t]=wt[$t]||{},Kt=mt[$t]=mt[$t]||[];for(const Vt of Pt)Yt[Vt.featureIndex]||(Yt[Vt.featureIndex]=!0,Kt.push(Vt))}}return mt}(Ke);for(const ct in Ye)Ye[ct].forEach(mt=>{const Mt=mt.feature,At=Mt.layer;At&&At.type!=="background"&&At.type!=="sky"&&(Mt.source=At.source,At["source-layer"]&&(Mt.sourceLayer=At["source-layer"]),Mt.state=Mt.id!==void 0?de.getFeatureState(At["source-layer"],Mt.id):{})});return Ye}function qn(de,U){const ee=de.getRenderableIds().map(Oe=>de.getTileByID(Oe)),be=[],Ie={};for(let Oe=0;Oe<ee.length;Oe++){const Le=ee[Oe],Fe=Le.tileID.canonical.key;Ie[Fe]||(Ie[Fe]=!0,Le.querySourceFeatures(be,U))}return be}function br(de,U){const ee=de.tileID,be=U.tileID;return ee.overscaledZ-be.overscaledZ||ee.canonical.y-be.canonical.y||ee.wrap-be.wrap||ee.canonical.x-be.canonical.x}function wr(){return us.workerClass!=null?new us.workerClass:new j.window.Worker(us.workerUrl)}const mr="mapboxgl_preloaded_worker_pool";class Er{constructor(){this.active={}}acquire(U){if(!this.workers)for(this.workers=[];this.workers.length<Er.workerCount;)this.workers.push(new wr);return this.active[U]=!0,this.workers.slice()}release(U){delete this.active[U],this.numActive()===0&&(this.workers.forEach(ee=>{ee.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mr]}numActive(){return Object.keys(this.active).length}}let zr;function Qr(){return zr||(zr=new Er),zr}function oi(de,U){const ee={};for(const be in de)be!=="ref"&&(ee[be]=de[be]);return j.refProperties.forEach(be=>{be in U&&(ee[be]=U[be])}),ee}function ti(de){de=de.slice();const U=Object.create(null);for(let ee=0;ee<de.length;ee++)U[de[ee].id]=de[ee];for(let ee=0;ee<de.length;ee++)"ref"in de[ee]&&(de[ee]=oi(de[ee],U[de[ee].ref]));return de}Er.workerCount=2;const vr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function mn(de,U,ee){ee.push({command:vr.addSource,args:[de,U[de]]})}function po(de,U,ee){U.push({command:vr.removeSource,args:[de]}),ee[de]=!0}function Ai(de,U,ee,be){po(de,ee,be),mn(de,U,ee)}function la(de,U,ee){let be;for(be in de[ee])if(de[ee].hasOwnProperty(be)&&be!=="data"&&!xe(de[ee][be],U[ee][be]))return!1;for(be in U[ee])if(U[ee].hasOwnProperty(be)&&be!=="data"&&!xe(de[ee][be],U[ee][be]))return!1;return!0}function Ta(de,U,ee,be,Ie,Oe){let Le;for(Le in U=U||{},de=de||{})de.hasOwnProperty(Le)&&(xe(de[Le],U[Le])||ee.push({command:Oe,args:[be,Le,U[Le],Ie]}));for(Le in U)U.hasOwnProperty(Le)&&!de.hasOwnProperty(Le)&&(xe(de[Le],U[Le])||ee.push({command:Oe,args:[be,Le,U[Le],Ie]}))}function Io(de){return de.id}function hl(de,U){return de[U.id]=U,de}class Ku{constructor(U,ee){this.reset(U,ee)}reset(U,ee){this.points=U||[],this._distances=[0];for(let be=1;be<this.points.length;be++)this._distances[be]=this._distances[be-1]+this.points[be].dist(this.points[be-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ee||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(U){if(this.points.length===1)return this.points[0];U=j.clamp(U,0,1);let ee=1,be=this._distances[ee];const Ie=U*this.paddedLength+this.padding;for(;be<Ie&&ee<this._distances.length;)be=this._distances[++ee];const Oe=ee-1,Le=this._distances[Oe],Fe=be-Le,Ge=Fe>0?(Ie-Le)/Fe:0;return this.points[Oe].mult(1-Ge).add(this.points[ee].mult(Ge))}}class ca{constructor(U,ee,be){const Ie=this.boxCells=[],Oe=this.circleCells=[];this.xCellCount=Math.ceil(U/be),this.yCellCount=Math.ceil(ee/be);for(let Le=0;Le<this.xCellCount*this.yCellCount;Le++)Ie.push([]),Oe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=U,this.height=ee,this.xScale=this.xCellCount/U,this.yScale=this.yCellCount/ee,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(U,ee,be,Ie,Oe){this._forEachCell(ee,be,Ie,Oe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(U),this.bboxes.push(ee),this.bboxes.push(be),this.bboxes.push(Ie),this.bboxes.push(Oe)}insertCircle(U,ee,be,Ie){this._forEachCell(ee-Ie,be-Ie,ee+Ie,be+Ie,this._insertCircleCell,this.circleUid++),this.circleKeys.push(U),this.circles.push(ee),this.circles.push(be),this.circles.push(Ie)}_insertBoxCell(U,ee,be,Ie,Oe,Le){this.boxCells[Oe].push(Le)}_insertCircleCell(U,ee,be,Ie,Oe,Le){this.circleCells[Oe].push(Le)}_query(U,ee,be,Ie,Oe,Le){if(be<0||U>this.width||Ie<0||ee>this.height)return!Oe&&[];const Fe=[];if(U<=0&&ee<=0&&this.width<=be&&this.height<=Ie){if(Oe)return!0;for(let Ge=0;Ge<this.boxKeys.length;Ge++)Fe.push({key:this.boxKeys[Ge],x1:this.bboxes[4*Ge],y1:this.bboxes[4*Ge+1],x2:this.bboxes[4*Ge+2],y2:this.bboxes[4*Ge+3]});for(let Ge=0;Ge<this.circleKeys.length;Ge++){const Ke=this.circles[3*Ge],Ye=this.circles[3*Ge+1],ct=this.circles[3*Ge+2];Fe.push({key:this.circleKeys[Ge],x1:Ke-ct,y1:Ye-ct,x2:Ke+ct,y2:Ye+ct})}return Le?Fe.filter(Le):Fe}return this._forEachCell(U,ee,be,Ie,this._queryCell,Fe,{hitTest:Oe,seenUids:{box:{},circle:{}}},Le),Oe?Fe.length>0:Fe}_queryCircle(U,ee,be,Ie,Oe){const Le=U-be,Fe=U+be,Ge=ee-be,Ke=ee+be;if(Fe<0||Le>this.width||Ke<0||Ge>this.height)return!Ie&&[];const Ye=[];return this._forEachCell(Le,Ge,Fe,Ke,this._queryCellCircle,Ye,{hitTest:Ie,circle:{x:U,y:ee,radius:be},seenUids:{box:{},circle:{}}},Oe),Ie?Ye.length>0:Ye}query(U,ee,be,Ie,Oe){return this._query(U,ee,be,Ie,!1,Oe)}hitTest(U,ee,be,Ie,Oe){return this._query(U,ee,be,Ie,!0,Oe)}hitTestCircle(U,ee,be,Ie){return this._queryCircle(U,ee,be,!0,Ie)}_queryCell(U,ee,be,Ie,Oe,Le,Fe,Ge){const Ke=Fe.seenUids,Ye=this.boxCells[Oe];if(Ye!==null){const mt=this.bboxes;for(const Mt of Ye)if(!Ke.box[Mt]){Ke.box[Mt]=!0;const At=4*Mt;if(U<=mt[At+2]&&ee<=mt[At+3]&&be>=mt[At+0]&&Ie>=mt[At+1]&&(!Ge||Ge(this.boxKeys[Mt]))){if(Fe.hitTest)return Le.push(!0),!0;Le.push({key:this.boxKeys[Mt],x1:mt[At],y1:mt[At+1],x2:mt[At+2],y2:mt[At+3]})}}}const ct=this.circleCells[Oe];if(ct!==null){const mt=this.circles;for(const Mt of ct)if(!Ke.circle[Mt]){Ke.circle[Mt]=!0;const At=3*Mt;if(this._circleAndRectCollide(mt[At],mt[At+1],mt[At+2],U,ee,be,Ie)&&(!Ge||Ge(this.circleKeys[Mt]))){if(Fe.hitTest)return Le.push(!0),!0;{const Tt=mt[At],kt=mt[At+1],wt=mt[At+2];Le.push({key:this.circleKeys[Mt],x1:Tt-wt,y1:kt-wt,x2:Tt+wt,y2:kt+wt})}}}}}_queryCellCircle(U,ee,be,Ie,Oe,Le,Fe,Ge){const Ke=Fe.circle,Ye=Fe.seenUids,ct=this.boxCells[Oe];if(ct!==null){const Mt=this.bboxes;for(const At of ct)if(!Ye.box[At]){Ye.box[At]=!0;const Tt=4*At;if(this._circleAndRectCollide(Ke.x,Ke.y,Ke.radius,Mt[Tt+0],Mt[Tt+1],Mt[Tt+2],Mt[Tt+3])&&(!Ge||Ge(this.boxKeys[At])))return Le.push(!0),!0}}const mt=this.circleCells[Oe];if(mt!==null){const Mt=this.circles;for(const At of mt)if(!Ye.circle[At]){Ye.circle[At]=!0;const Tt=3*At;if(this._circlesCollide(Mt[Tt],Mt[Tt+1],Mt[Tt+2],Ke.x,Ke.y,Ke.radius)&&(!Ge||Ge(this.circleKeys[At])))return Le.push(!0),!0}}}_forEachCell(U,ee,be,Ie,Oe,Le,Fe,Ge){const Ke=this._convertToXCellCoord(U),Ye=this._convertToYCellCoord(ee),ct=this._convertToXCellCoord(be),mt=this._convertToYCellCoord(Ie);for(let Mt=Ke;Mt<=ct;Mt++)for(let At=Ye;At<=mt;At++)if(Oe.call(this,U,ee,be,Ie,this.xCellCount*At+Mt,Le,Fe,Ge))return}_convertToXCellCoord(U){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(U*this.xScale)))}_convertToYCellCoord(U){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(U*this.yScale)))}_circlesCollide(U,ee,be,Ie,Oe,Le){const Fe=Ie-U,Ge=Oe-ee,Ke=be+Le;return Ke*Ke>Fe*Fe+Ge*Ge}_circleAndRectCollide(U,ee,be,Ie,Oe,Le,Fe){const Ge=(Le-Ie)/2,Ke=Math.abs(U-(Ie+Ge));if(Ke>Ge+be)return!1;const Ye=(Fe-Oe)/2,ct=Math.abs(ee-(Oe+Ye));if(ct>Ye+be)return!1;if(Ke<=Ge||ct<=Ye)return!0;const mt=Ke-Ge,Mt=ct-Ye;return mt*mt+Mt*Mt<=be*be}}const sr=Math.tan(85*Math.PI/180);function Pr(de,U,ee,be,Ie,Oe,Le){const Fe=j.create();if(ee)if(Oe.name==="globe"){const Ge=j.calculateGlobeLabelMatrix(Ie,U);j.multiply(Fe,Fe,Ge)}else{const Ge=Ct([],Le);Fe[0]=Ge[0],Fe[1]=Ge[1],Fe[4]=Ge[2],Fe[5]=Ge[3],be||j.rotateZ(Fe,Fe,Ie.angle)}else j.multiply(Fe,Ie.labelPlaneMatrix,de);return Fe}function Fr(de,U,ee,be,Ie,Oe,Le){const Fe=Pr(de,U,ee,be,Ie,Oe,Le);return Oe.name==="globe"&&ee||(Fe[2]=Fe[6]=Fe[10]=Fe[14]=0),Fe}function Po(de,U,ee,be,Ie,Oe,Le){if(ee){if(Oe.name==="globe"){const Fe=Pr(de,U,ee,be,Ie,Oe,Le);return j.invert(Fe,Fe),j.multiply(Fe,de,Fe),Fe}{const Fe=j.clone(de),Ge=j.identity([]);return Ge[0]=Le[0],Ge[1]=Le[1],Ge[4]=Le[2],Ge[5]=Le[3],j.multiply(Fe,Fe,Ge),be||j.rotateZ(Fe,Fe,-Ie.angle),Fe}}return Ie.glCoordMatrix}function Oo(de,U,ee=0){const be=[de.x,de.y,ee,1];ee?j.transformMat4$1(be,be,U):Zi(be,be,U);const Ie=be[3];return{point:[be[0]/Ie,be[1]/Ie,be[2]/Ie],signedDistanceFromCamera:Ie}}function Ir(de,U){const ee=[de[0],de[1],de[2],1];j.transformMat4$1(ee,ee,U);const be=ee[3];return{point:[ee[0]/be,ee[1]/be,ee[2]/be],signedDistanceFromCamera:be}}function Ts(de,U){return Math.min(.5+de/U*.5,1.5)}function ua(de,U){const ee=de[0]/de[3],be=de[1]/de[3];return ee>=-U[0]&&ee<=U[0]&&be>=-U[1]&&be<=U[1]}function As(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke){const Ye=ee.transform,ct=be?de.textSizeData:de.iconSizeData,mt=j.evaluateSizeForZoom(ct,ee.transform.zoom),Mt=Ye.projection.name==="globe",At=[256/ee.width*2+1,256/ee.height*2+1],Tt=be?de.text.dynamicLayoutVertexArray:de.icon.dynamicLayoutVertexArray;Tt.clear();let kt=null;Mt&&(kt=be?de.text.globeExtVertexArray:de.icon.globeExtVertexArray);const wt=de.lineVertexArray,$t=be?de.text.placedSymbolArray:de.icon.placedSymbolArray,Pt=ee.transform.width/ee.transform.height;let Yt=!1;for(let Kt=0;Kt<$t.length;Kt++){const Vt=$t.get(Kt);if(Vt.writingMode!==j.WritingMode.vertical||Yt||Kt!==0&&$t.get(Kt-1).writingMode===j.WritingMode.horizontal||(Yt=!0),(Vt.hidden||Vt.writingMode===j.WritingMode.vertical)&&!Yt){da(Vt.numGlyphs,Tt);continue}Yt=!1;const Xt=new j.pointGeometry(Vt.tileAnchorX,Vt.tileAnchorY),Ht=Ge?Ge(Xt):[0,0,0],an=Ye.projection.projectTilePoint(Xt.x,Xt.y,Ke.canonical),_n=[an.x+Ht[0],an.y+Ht[1],an.z+Ht[2]],Hn=[..._n,1];if(j.transformMat4$1(Hn,Hn,U),!ua(Hn,At)){da(Vt.numGlyphs,Tt);continue}const dn=Ts(ee.transform.cameraToCenterDistance,Hn[3]),Rn=j.evaluateSizeForFeature(ct,mt,Vt),Fn=Le?Rn/dn:Rn*dn,Qn=Oo(new j.pointGeometry(_n[0],_n[1]),Ie,_n[2]);if(Qn.signedDistanceFromCamera<=0){da(Vt.numGlyphs,Tt);continue}let An={};const Wn=Le?null:Ge,Dn=Yc(Vt,Fn,!1,Fe,U,Ie,Oe,de.glyphOffsetArray,wt,Tt,kt,Qn.point,Xt,An,Pt,Wn,Ye.projection,Ke,Le);Yt=Dn.useVertical,Wn&&Dn.needsFlipping&&(An={}),(Dn.notEnoughRoom||Yt||Dn.needsFlipping&&Yc(Vt,Fn,!0,Fe,U,Ie,Oe,de.glyphOffsetArray,wt,Tt,kt,Qn.point,Xt,An,Pt,Wn,Ye.projection,Ke,Le).notEnoughRoom)&&da(Vt.numGlyphs,Tt)}be?(de.text.dynamicLayoutVertexBuffer.updateData(Tt),kt&&de.text.globeExtVertexBuffer.updateData(kt)):(de.icon.dynamicLayoutVertexBuffer.updateData(Tt),kt&&de.icon.globeExtVertexBuffer.updateData(kt))}function fo(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt){const kt=Fe.glyphStartIndex+Fe.numGlyphs,wt=Fe.lineStartIndex,$t=Fe.lineStartIndex+Fe.lineLength,Pt=U.getoffsetX(Fe.glyphStartIndex),Yt=U.getoffsetX(kt-1),Kt=ha(de*Pt,ee,be,Ie,Oe,Le,Fe.segment,wt,$t,Ge,Ke,Ye,ct,mt,!0,Mt,At,Tt);if(!Kt)return null;const Vt=ha(de*Yt,ee,be,Ie,Oe,Le,Fe.segment,wt,$t,Ge,Ke,Ye,ct,mt,!0,Mt,At,Tt);return Vt?{first:Kt,last:Vt}:null}function xi(de,U,ee,be){return de.writingMode===j.WritingMode.horizontal&&Math.abs(ee.y-U.y)>Math.abs(ee.x-U.x)*be?{useVertical:!0}:de.writingMode===j.WritingMode.vertical?U.y<ee.y?{needsFlipping:!0}:null:de.flipState!==0&&function(Ie,Oe,Le){const Fe=(Oe.x-Ie.x)*Le;return Fe===0||Math.abs((Oe.y-Ie.y)/Fe)>sr}(U,ee,be)?de.flipState===1?{needsFlipping:!0}:null:U.x>ee.x?{needsFlipping:!0}:null}function Yc(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt,kt,wt,$t){const Pt=U/24,Yt=de.lineOffsetX*Pt,Kt=de.lineOffsetY*Pt;let Vt;if(de.numGlyphs>1){const Xt=de.glyphStartIndex+de.numGlyphs,Ht=de.lineStartIndex,an=de.lineStartIndex+de.lineLength,_n=fo(Pt,Fe,Yt,Kt,ee,ct,mt,de,Ge,Oe,Mt,Tt,!1,kt,wt,$t);if(!_n)return{notEnoughRoom:!0};const Hn=Ir(_n.first.point,Le).point,dn=Ir(_n.last.point,Le).point,Rn=new j.pointGeometry(Hn[0],Hn[1]),Fn=new j.pointGeometry(dn[0],dn[1]);if(be&&!ee){const Qn=xi(de,Rn,Fn,At);if(de.flipState=Qn&&Qn.needsFlipping?1:2,Qn)return Qn}Vt=[_n.first];for(let Qn=de.glyphStartIndex+1;Qn<Xt-1;Qn++)Vt.push(ha(Pt*Fe.getoffsetX(Qn),Yt,Kt,ee,ct,mt,de.segment,Ht,an,Ge,Oe,Mt,Tt,!1,!1,kt,wt,$t));Vt.push(_n.last)}else{if(be&&!ee){const Ht=Oo(mt,Ie).point,an=de.lineStartIndex+de.segment+1,_n=new j.pointGeometry(Ge.getx(an),Ge.gety(an)),Hn=Oo(_n,Ie),dn=Hn.signedDistanceFromCamera>0?Hn.point:dl(mt,_n,Ht,1,Ie,void 0,kt,wt.canonical),Rn=xi(de,new j.pointGeometry(Ht[0],Ht[1]),new j.pointGeometry(dn[0],dn[1]),At);if(de.flipState=Rn&&Rn.needsFlipping?1:2,Rn)return Rn}const Xt=ha(Pt*Fe.getoffsetX(de.glyphStartIndex),Yt,Kt,ee,ct,mt,de.segment,de.lineStartIndex,de.lineStartIndex+de.lineLength,Ge,Oe,Mt,Tt,!1,!1,kt,wt,$t);if(!Xt)return{notEnoughRoom:!0};Vt=[Xt]}if(Ye)for(const Xt of Vt)j.updateGlobeVertexNormal(Ye,Ke.length+0,Xt.up[0],Xt.up[1],Xt.up[2]),j.updateGlobeVertexNormal(Ye,Ke.length+1,Xt.up[0],Xt.up[1],Xt.up[2]),j.updateGlobeVertexNormal(Ye,Ke.length+2,Xt.up[0],Xt.up[1],Xt.up[2]),j.updateGlobeVertexNormal(Ye,Ke.length+3,Xt.up[0],Xt.up[1],Xt.up[2]),j.addDynamicAttributes(Ke,Xt.point[0],Xt.point[1],Xt.point[2],Xt.angle);else for(const Xt of Vt)j.addDynamicAttributes(Ke,Xt.point[0],Xt.point[1],Xt.point[2],Xt.angle);return{}}function Za(de,U,ee,be,Ie){const Oe=be.projectTilePoint(de.x,de.y,U);if(!Ie)return Oo(Oe,ee,Oe.z);const Le=Ie(de);return Oo(new j.pointGeometry(Oe.x+Le[0],Oe.y+Le[1]),ee,Oe.z+Le[2])}function dl(de,U,ee,be,Ie,Oe,Le,Fe){const Ge=Za(de.add(de.sub(U)._unit()),Fe,Ie,Le,Oe).point,Ke=j.sub([],ee,Ge);return j.scaleAndAdd([],ee,Ke,be/j.length(Ke))}function ha(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt,kt,wt){const $t=be?de-U:de+U;let Pt=$t>0?1:-1,Yt=0;be&&(Pt*=-1,Yt=Math.PI),Pt<0&&(Yt+=Math.PI);let Kt=Pt>0?Fe+Le:Fe+Le+1,Vt=Ie,Xt=Ie,Ht=0,an=0;const _n=Math.abs($t),Hn=[],dn=[];let Rn=Oe;const Fn=()=>{const fr=Kt-Pt;return Ht===0?Oe:new j.pointGeometry(Ke.getx(fr),Ke.gety(fr))},Qn=()=>dl(Fn(),Rn,Xt,_n-Ht+1,Ye,mt,Tt,kt.canonical);for(;Ht+an<=_n;){if(Kt+=Pt,Kt<Fe||Kt>=Ge)return null;if(Xt=Vt,Hn.push(Vt),Mt&&dn.push(Rn||Fn()),Vt=ct[Kt],Vt===void 0){Rn=new j.pointGeometry(Ke.getx(Kt),Ke.gety(Kt));const fr=Za(Rn,kt.canonical,Ye,Tt,mt);Vt=fr.signedDistanceFromCamera>0?ct[Kt]=fr.point:Qn()}else Rn=null;Ht+=an,an=j.distance(Xt,Vt)}Rn=Rn||new j.pointGeometry(Ke.getx(Kt),Ke.gety(Kt));const An=Fn();At&&mt&&(ct[Kt]=Vt=ct[Kt]===void 0?Vt:Qn(),an=j.distance(Xt,Vt));const Wn=(_n-Ht)/an,Dn=Rn.sub(An).mult(Wn)._add(An),ir=j.sub([],Vt,Xt),er=j.scaleAndAdd([],Xt,ir,Wn);let dr=[0,0,1],gr=ir[0],Tr=ir[1];if(wt&&(dr=Tt.upVector(kt.canonical,Dn.x,Dn.y),dr[0]!==0||dr[1]!==0||dr[2]!==1)){const fr=[1,0,0],Cr=[0,1,0];fr[0]=dr[2],fr[1]=0,fr[2]=-dr[0],j.cross(Cr,dr,fr),j.normalize(fr,fr),j.normalize(Cr,Cr),gr=j.dot(ir,fr),Tr=j.dot(ir,Cr)}if(ee){const fr=j.cross([],dr,ir);j.normalize(fr,fr),j.scaleAndAdd(er,er,fr,ee*Pt)}const Ur=Yt+Math.atan2(Tr,gr);return Hn.push(er),Mt&&dn.push(Dn),{point:er,angle:Ur,path:Hn,tilePath:dn,up:dr}}const rc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function da(de,U){for(let ee=0;ee<de;ee++){const be=U.length;U.resize(be+4),U.float32.set(rc,4*be)}}function Zi(de,U,ee){const be=U[0],Ie=U[1];return de[0]=ee[0]*be+ee[4]*Ie+ee[12],de[1]=ee[1]*be+ee[5]*Ie+ee[13],de[3]=ee[3]*be+ee[7]*Ie+ee[15],de}const ri=100;class ic{constructor(U,ee,be=new ca(U.width+200,U.height+200,25),Ie=new ca(U.width+200,U.height+200,25)){this.transform=U,this.grid=be,this.ignoredGrid=Ie,this.pitchfactor=Math.cos(U._pitch)*U.cameraToCenterDistance,this.screenRightBoundary=U.width+ri,this.screenBottomBoundary=U.height+ri,this.gridRightBoundary=U.width+200,this.gridBottomBoundary=U.height+200,this.fogState=ee}placeCollisionBox(U,ee,be,Ie,Oe,Le,Fe,Ge){let Ke=be.projectedAnchorX,Ye=be.projectedAnchorY,ct=be.projectedAnchorZ;const mt=be.elevation,Mt=be.tileID;if(mt&&Mt){const Kt=U.getProjection().upVector(Mt.canonical,be.tileAnchorX,be.tileAnchorY),Vt=U.getProjection().upVectorScale(Mt.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Ke+=Kt[0]*mt*Vt,Ye+=Kt[1]*mt*Vt,ct+=Kt[2]*mt*Vt}const At=this.projectAndGetPerspectiveRatio(Fe,[Ke,Ye,ct],be.tileID,U.projection.name==="globe"||!!mt||this.transform.pitch>0,U.getProjection()),Tt=Le*At.perspectiveRatio,kt=(be.x1*ee+Ie.x-be.padding)*Tt+At.point.x,wt=(be.y1*ee+Ie.y-be.padding)*Tt+At.point.y,$t=(be.x2*ee+Ie.x+be.padding)*Tt+At.point.x,Pt=(be.y2*ee+Ie.y+be.padding)*Tt+At.point.y,Yt=At.perspectiveRatio<=.55||At.occluded;return!this.isInsideGrid(kt,wt,$t,Pt)||!Oe&&this.grid.hitTest(kt,wt,$t,Pt,Ge)||Yt?{box:[],offscreen:!1,occluded:At.occluded}:{box:[kt,wt,$t,Pt],offscreen:this.isOffscreen(kt,wt,$t,Pt),occluded:!1}}placeCollisionCircles(U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt){const kt=[],wt=this.transform.elevation,$t=wt?wt.getAtTileOffsetFunc(Tt,this.transform.center.lat,this.transform.worldSize,U.getProjection()):An=>[0,0,0],Pt=new j.pointGeometry(be.tileAnchorX,be.tileAnchorY),Yt=U.getProjection().projectTilePoint(be.tileAnchorX,be.tileAnchorY,Tt.canonical),Kt=$t(Pt),Vt=[Yt.x+Kt[0],Yt.y+Kt[1],Yt.z+Kt[2]],Xt=U.projection.name==="globe",Ht=this.projectAndGetPerspectiveRatio(Fe,[Vt[0],Vt[1],Vt[2]],Tt,Xt||!!wt||this.transform.pitch>0,U.getProjection()),{perspectiveRatio:an}=Ht,_n=(ct?Le/an:Le*an)/j.ONE_EM,Hn=Oo(new j.pointGeometry(Vt[0],Vt[1]),Ge,Vt[2]).point,dn=Ht.signedDistanceFromCamera>0?fo(_n,Oe,be.lineOffsetX*_n,be.lineOffsetY*_n,!1,Hn,Pt,be,Ie,Ge,{},wt&&!ct?$t:null,ct&&!!wt,U.getProjection(),Tt,ct):null;let Rn=!1,Fn=!1,Qn=!0;if(dn&&!Ht.occluded){const An=.5*Mt*an+At,Wn=new j.pointGeometry(-100,-100),Dn=new j.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ir=new Ku,er=dn.first,dr=dn.last;let gr=[];for(let fr=er.path.length-1;fr>=1;fr--)gr.push(er.path[fr]);for(let fr=1;fr<dr.path.length;fr++)gr.push(dr.path[fr]);const Tr=2.5*An;if(Ke){const fr=gr.map(wt&&!Xt?(Cr,Wr)=>{const li=$t(Wr<er.path.length-1?er.tilePath[er.path.length-1-Wr]:dr.tilePath[Wr-er.path.length+2]);return Cr[2]=li[2],Ir(Cr,Ke)}:Cr=>Ir(Cr,Ke));gr=fr.some(Cr=>Cr.signedDistanceFromCamera<=0)?[]:fr.map(Cr=>Cr.point)}let Ur=[];if(gr.length>0){const fr=gr.map(ii=>new j.pointGeometry(ii[0],ii[1]));let Cr=1/0,Wr=-1/0,li=1/0,bi=-1/0;for(let ii=0;ii<fr.length;ii++)Cr=Math.min(Cr,fr[ii].x),li=Math.min(li,fr[ii].y),Wr=Math.max(Wr,fr[ii].x),bi=Math.max(bi,fr[ii].y);Ur=Cr>=Wn.x&&Wr<=Dn.x&&li>=Wn.y&&bi<=Dn.y?[fr]:Wr<Wn.x||Cr>Dn.x||bi<Wn.y||li>Dn.y?[]:j.clipLine([fr],Wn.x,Wn.y,Dn.x,Dn.y)}for(const fr of Ur){ir.reset(fr,.25*An);let Cr=0;Cr=ir.length<=.5*An?1:Math.ceil(ir.paddedLength/Tr)+1;for(let Wr=0;Wr<Cr;Wr++){const li=Wr/Math.max(Cr-1,1),bi=ir.lerp(li),ii=bi.x+ri,Hi=bi.y+ri;kt.push(ii,Hi,An,0);const Eo=ii-An,ia=Hi-An,fi=ii+An,yi=Hi+An;if(Qn=Qn&&this.isOffscreen(Eo,ia,fi,yi),Fn=Fn||this.isInsideGrid(Eo,ia,fi,yi),!ee&&this.grid.hitTestCircle(ii,Hi,An,mt)&&(Rn=!0,!Ye))return{circles:[],offscreen:!1,collisionDetected:Rn,occluded:!1}}}}return{circles:!Ye&&Rn||!Fn?[]:kt,offscreen:Qn,collisionDetected:Rn,occluded:Ht.occluded}}queryRenderedSymbols(U){if(U.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const ee=[];let be=1/0,Ie=1/0,Oe=-1/0,Le=-1/0;for(const Ye of U){const ct=new j.pointGeometry(Ye.x+ri,Ye.y+ri);be=Math.min(be,ct.x),Ie=Math.min(Ie,ct.y),Oe=Math.max(Oe,ct.x),Le=Math.max(Le,ct.y),ee.push(ct)}const Fe=this.grid.query(be,Ie,Oe,Le).concat(this.ignoredGrid.query(be,Ie,Oe,Le)),Ge={},Ke={};for(const Ye of Fe){const ct=Ye.key;if(Ge[ct.bucketInstanceId]===void 0&&(Ge[ct.bucketInstanceId]={}),Ge[ct.bucketInstanceId][ct.featureIndex])continue;const mt=[new j.pointGeometry(Ye.x1,Ye.y1),new j.pointGeometry(Ye.x2,Ye.y1),new j.pointGeometry(Ye.x2,Ye.y2),new j.pointGeometry(Ye.x1,Ye.y2)];j.polygonIntersectsPolygon(ee,mt)&&(Ge[ct.bucketInstanceId][ct.featureIndex]=!0,Ke[ct.bucketInstanceId]===void 0&&(Ke[ct.bucketInstanceId]=[]),Ke[ct.bucketInstanceId].push(ct.featureIndex))}return Ke}insertCollisionBox(U,ee,be,Ie,Oe){(ee?this.ignoredGrid:this.grid).insert({bucketInstanceId:be,featureIndex:Ie,collisionGroupID:Oe},U[0],U[1],U[2],U[3])}insertCollisionCircles(U,ee,be,Ie,Oe){const Le=ee?this.ignoredGrid:this.grid,Fe={bucketInstanceId:be,featureIndex:Ie,collisionGroupID:Oe};for(let Ge=0;Ge<U.length;Ge+=4)Le.insertCircle(Fe,U[Ge],U[Ge+1],U[Ge+2])}projectAndGetPerspectiveRatio(U,ee,be,Ie,Oe){const Le=[ee[0],ee[1],ee[2],1];let Fe=!1;if(ee[2]||this.transform.pitch>0){j.transformMat4$1(Le,Le,U);const Ge=Oe.name==="globe";this.fogState&&be&&!Ge&&(Fe=function(Ke,Ye,ct,mt,Mt,At){const Tt=At.calculateFogTileMatrix(Mt),kt=[Ye,ct,mt];return j.transformMat4(kt,kt,Tt),vt(Ke,kt,At.pitch,At._fov)}(this.fogState,ee[0],ee[1],ee[2],be.toUnwrapped(),this.transform)>.9)}else Zi(Le,Le,U);return{point:new j.pointGeometry((Le[0]/Le[3]+1)/2*this.transform.width+ri,(-Le[1]/Le[3]+1)/2*this.transform.height+ri),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Oe)/Le[3]*.5,1.5),signedDistanceFromCamera:Le[3],occluded:Ie&&Le[2]>Le[3]||Fe}}isOffscreen(U,ee,be,Ie){return be<ri||U>=this.screenRightBoundary||Ie<ri||ee>this.screenBottomBoundary}isInsideGrid(U,ee,be,Ie){return be>=0&&U<this.gridRightBoundary&&Ie>=0&&ee<this.gridBottomBoundary}getViewportMatrix(){const U=j.identity([]);return j.translate(U,U,[-100,-100,0]),U}}function ks(de,U,ee){const be=U.createTileMatrix(de,de.worldSize,ee.toUnwrapped());return j.multiply(new Float32Array(16),de.projMatrix,be)}function oo(de,U,ee){if(U.projection.name===ee.projection.name)return de.projMatrix;const be=ee.clone();return be.setProjection(U.projection),ks(be,U.getProjection(),de)}function ao(de,U,ee){return U.name===ee.projection.name?de.projMatrix:ks(ee,U,de)}class oc{constructor(U,ee,be,Ie){this.opacity=U?Math.max(0,Math.min(1,U.opacity+(U.placed?ee:-ee))):Ie&&be?1:0,this.placed=be}isHidden(){return this.opacity===0&&!this.placed}}class pa{constructor(U,ee,be,Ie,Oe,Le=!1){this.text=new oc(U?U.text:null,ee,be,Oe),this.icon=new oc(U?U.icon:null,ee,Ie,Oe),this.clipped=Le}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pi{constructor(U,ee,be,Ie=!1){this.text=U,this.icon=ee,this.skipFade=be,this.clipped=Ie}}class Ss{constructor(){this.invProjMatrix=j.create(),this.viewportMatrix=j.create(),this.circles=[]}}class Cs{constructor(U,ee,be,Ie,Oe){this.bucketInstanceId=U,this.featureIndex=ee,this.sourceLayerIndex=be,this.bucketIndex=Ie,this.tileID=Oe}}class Ms{constructor(U){this.crossSourceCollisions=U,this.maxGroupID=0,this.collisionGroups={}}get(U){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[U]){const ee=++this.maxGroupID;this.collisionGroups[U]={ID:ee,predicate:be=>be.collisionGroupID===ee}}return this.collisionGroups[U]}}function ji(de,U,ee,be,Ie){const{horizontalAlign:Oe,verticalAlign:Le}=j.getAnchorAlignment(de),Fe=-(Oe-.5)*U,Ge=-(Le-.5)*ee,Ke=j.evaluateVariableOffset(de,be);return new j.pointGeometry(Fe+Ke[0]*Ie,Ge+Ke[1]*Ie)}function Is(de,U,ee,be,Ie){const Oe=new j.pointGeometry(de,U);return ee&&Oe._rotate(be?Ie:-Ie),Oe}class Ps{constructor(U,ee,be,Ie,Oe){this.transform=U.clone(),this.projection=U.projection.name,this.collisionIndex=new ic(this.transform,Oe),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ee,this.retainedQueryData={},this.collisionGroups=new Ms(be),this.collisionCircleArrays={},this.prevPlacement=Ie,Ie&&(Ie.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(U,ee,be,Ie){const Oe=be.getBucket(ee),Le=be.latestFeatureIndex;if(!Oe||!Le||ee.id!==Oe.layerIds[0])return;const Fe=Oe.layers[0].layout,Ge=be.collisionBoxArray,Ke=Math.pow(2,this.transform.zoom-be.tileID.overscaledZ),Ye=be.tileSize/j.EXTENT,ct=be.tileID.toUnwrapped();this.transform.setProjection(Oe.projection);const mt=(Mt=be.tileID,At=Oe.getProjection(),Tt=this.transform,At.name===this.projection?Tt.calculateProjMatrix(Mt.toUnwrapped()):ks(Tt,At,Mt));var Mt,At,Tt;const kt=Fe.get("text-pitch-alignment")==="map",wt=Fe.get("text-rotation-alignment")==="map";ee.compileFilter();const $t=ee.dynamicFilter(),Pt=ee.dynamicFilterNeedsFeature(),Yt=this.transform.calculatePixelsToTileUnitsMatrix(be),Kt=Fr(mt,be.tileID.canonical,kt,wt,this.transform,Oe.getProjection(),Yt);let Vt=null;if(kt){const an=Po(mt,be.tileID.canonical,kt,wt,this.transform,Oe.getProjection(),Yt);Vt=j.multiply([],this.transform.labelPlaneMatrix,an)}let Xt=null;$t&&be.latestFeatureIndex&&(Xt={unwrappedTileID:ct,dynamicFilter:$t,dynamicFilterNeedsFeature:Pt,featureIndex:be.latestFeatureIndex}),this.retainedQueryData[Oe.bucketInstanceId]=new Cs(Oe.bucketInstanceId,Le,Oe.sourceLayerIndex,Oe.index,be.tileID);const Ht={bucket:Oe,layout:Fe,posMatrix:mt,textLabelPlaneMatrix:Kt,labelToScreenMatrix:Vt,clippingData:Xt,scale:Ke,textPixelRatio:Ye,holdingForFade:be.holdingForFade(),collisionBoxArray:Ge,partiallyEvaluatedTextSize:j.evaluateSizeForZoom(Oe.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:j.evaluateSizeForZoom(Oe.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Oe.sourceID)};if(Ie)for(const an of Oe.sortKeyRanges){const{sortKey:_n,symbolInstanceStart:Hn,symbolInstanceEnd:dn}=an;U.push({sortKey:_n,symbolInstanceStart:Hn,symbolInstanceEnd:dn,parameters:Ht})}else U.push({symbolInstanceStart:0,symbolInstanceEnd:Oe.symbolInstances.length,parameters:Ht})}attemptAnchorPlacement(U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt,kt,wt,$t){const Pt=[mt.textOffset0,mt.textOffset1],Yt=ji(U,be,Ie,Pt,Oe),Kt=this.collisionIndex.placeCollisionBox(At,Oe,ee,Is(Yt.x,Yt.y,Le,Fe,this.transform.angle),ct,Ge,Ke,Ye.predicate);if((!kt||this.collisionIndex.placeCollisionBox(At,At.getSymbolInstanceIconSize($t,this.transform.zoom,Mt),kt,Is(Yt.x,Yt.y,Le,Fe,this.transform.angle),ct,Ge,Ke,Ye.predicate).box.length!==0)&&Kt.box.length>0){let Vt;return this.prevPlacement&&this.prevPlacement.variableOffsets[mt.crossTileID]&&this.prevPlacement.placements[mt.crossTileID]&&this.prevPlacement.placements[mt.crossTileID].text&&(Vt=this.prevPlacement.variableOffsets[mt.crossTileID].anchor),this.variableOffsets[mt.crossTileID]={textOffset:Pt,width:be,height:Ie,anchor:U,textScale:Oe,prevAnchor:Vt},this.markUsedJustification(At,U,mt,Tt),At.allowVerticalPlacement&&(this.markUsedOrientation(At,Tt,mt),this.placedOrientations[mt.crossTileID]=Tt),{shift:Yt,placedGlyphBoxes:Kt}}}placeLayerBucketPart(U,ee,be,Ie){const{bucket:Oe,layout:Le,posMatrix:Fe,textLabelPlaneMatrix:Ge,labelToScreenMatrix:Ke,clippingData:Ye,textPixelRatio:ct,holdingForFade:mt,collisionBoxArray:Mt,partiallyEvaluatedTextSize:At,partiallyEvaluatedIconSize:Tt,collisionGroup:kt}=U.parameters,wt=Le.get("text-optional"),$t=Le.get("icon-optional"),Pt=Le.get("text-allow-overlap"),Yt=Le.get("icon-allow-overlap"),Kt=Le.get("text-rotation-alignment")==="map",Vt=Le.get("text-pitch-alignment")==="map",Xt=Le.get("icon-text-fit")!=="none",Ht=Le.get("symbol-z-order")==="viewport-y";this.transform.setProjection(Oe.projection);let an=Pt&&(Yt||!Oe.hasIconData()||$t),_n=Yt&&(Pt||!Oe.hasTextData()||wt);!Oe.collisionArrays&&Mt&&Oe.deserializeCollisionBoxes(Mt),be&&Ie&&Oe.updateCollisionDebugBuffers(this.transform.zoom,Mt);const Hn=(dn,Rn,Fn)=>{if(Ye){const fi={zoom:this.transform.zoom,pitch:this.transform.pitch};let yi=null;if(Ye.dynamicFilterNeedsFeature){const Rr=this.retainedQueryData[Oe.bucketInstanceId];yi=Ye.featureIndex.loadFeature({featureIndex:dn.featureIndex,bucketIndex:Rr.bucketIndex,sourceLayerIndex:Rr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Ye.dynamicFilter)(fi,yi,this.retainedQueryData[Oe.bucketInstanceId].tileID.canonical,new j.pointGeometry(dn.tileAnchorX,dn.tileAnchorY),this.transform.calculateDistanceTileData(Ye.unwrappedTileID)))return this.placements[dn.crossTileID]=new Pi(!1,!1,!1,!0),void(ee[dn.crossTileID]=!0)}if(ee[dn.crossTileID])return;if(mt)return void(this.placements[dn.crossTileID]=new Pi(!1,!1,!1));let Qn=!1,An=!1,Wn=!0,Dn=!1,ir=!1,er=null,dr={box:null,offscreen:null,occluded:null},gr={box:null,offscreen:null,occluded:null},Tr=null,Ur=null,fr=null,Cr=0,Wr=0,li=0;Fn.textFeatureIndex?Cr=Fn.textFeatureIndex:dn.useRuntimeCollisionCircles&&(Cr=dn.featureIndex),Fn.verticalTextFeatureIndex&&(Wr=Fn.verticalTextFeatureIndex);const bi=fi=>{fi.tileID=this.retainedQueryData[Oe.bucketInstanceId].tileID,(this.transform.elevation||fi.elevation)&&(fi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[Oe.bucketInstanceId].tileID,fi.tileAnchorX,fi.tileAnchorY):0)},ii=Fn.textBox;if(ii){bi(ii);const fi=Rr=>{let Ri=j.WritingMode.horizontal;if(Oe.allowVerticalPlacement&&!Rr&&this.prevPlacement){const $i=this.prevPlacement.placedOrientations[dn.crossTileID];$i&&(this.placedOrientations[dn.crossTileID]=$i,Ri=$i,this.markUsedOrientation(Oe,Ri,dn))}return Ri},yi=(Rr,Ri)=>{if(Oe.allowVerticalPlacement&&dn.numVerticalGlyphVertices>0&&Fn.verticalTextBox){for(const $i of Oe.writingModes)if($i===j.WritingMode.vertical?(dr=Ri(),gr=dr):dr=Rr(),dr&&dr.box&&dr.box.length)break}else dr=Rr()};if(Le.get("text-variable-anchor")){let Rr=Le.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[dn.crossTileID]){const ci=this.prevPlacement.variableOffsets[dn.crossTileID];Rr.indexOf(ci.anchor)>0&&(Rr=Rr.filter(Ki=>Ki!==ci.anchor),Rr.unshift(ci.anchor))}const Ri=(ci,Ki,$a)=>{const eo=Oe.getSymbolInstanceTextSize(At,dn,this.transform.zoom,Rn),mo=(ci.x2-ci.x1)*eo+2*ci.padding,za=(ci.y2-ci.y1)*eo+2*ci.padding,Da=Xt&&!Yt?Ki:null;Da&&bi(Da);let to={box:[],offscreen:!1,occluded:!1};const La=Pt?2*Rr.length:Rr.length;for(let Go=0;Go<La;++Go){const il=this.attemptAnchorPlacement(Rr[Go%Rr.length],ci,mo,za,eo,Kt,Vt,ct,Fe,kt,Go>=Rr.length,dn,Rn,Oe,$a,Da,At,Tt);if(il&&(to=il.placedGlyphBoxes,to&&to.box&&to.box.length)){Qn=!0,er=il.shift;break}}return to};yi(()=>Ri(ii,Fn.iconBox,j.WritingMode.horizontal),()=>{const ci=Fn.verticalTextBox;return ci&&bi(ci),Oe.allowVerticalPlacement&&!(dr&&dr.box&&dr.box.length)&&dn.numVerticalGlyphVertices>0&&ci?Ri(ci,Fn.verticalIconBox,j.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),dr&&(Qn=dr.box,Wn=dr.offscreen,Dn=dr.occluded);const $i=fi(dr&&dr.box);if(!Qn&&this.prevPlacement){const ci=this.prevPlacement.variableOffsets[dn.crossTileID];ci&&(this.variableOffsets[dn.crossTileID]=ci,this.markUsedJustification(Oe,ci.anchor,dn,$i))}}else{const Rr=(Ri,$i)=>{const ci=Oe.getSymbolInstanceTextSize(At,dn,this.transform.zoom,Rn),Ki=this.collisionIndex.placeCollisionBox(Oe,ci,Ri,new j.pointGeometry(0,0),Pt,ct,Fe,kt.predicate);return Ki&&Ki.box&&Ki.box.length&&(this.markUsedOrientation(Oe,$i,dn),this.placedOrientations[dn.crossTileID]=$i),Ki};yi(()=>Rr(ii,j.WritingMode.horizontal),()=>{const Ri=Fn.verticalTextBox;return Oe.allowVerticalPlacement&&dn.numVerticalGlyphVertices>0&&Ri?(bi(Ri),Rr(Ri,j.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),fi(dr&&dr.box&&dr.box.length)}}if(Tr=dr,Qn=Tr&&Tr.box&&Tr.box.length>0,Wn=Tr&&Tr.offscreen,Dn=Tr&&Tr.occluded,dn.useRuntimeCollisionCircles){const fi=Oe.text.placedSymbolArray.get(dn.centerJustifiedTextSymbolIndex>=0?dn.centerJustifiedTextSymbolIndex:dn.verticalPlacedTextSymbolIndex),yi=j.evaluateSizeForFeature(Oe.textSizeData,At,fi),Rr=Le.get("text-padding");Ur=this.collisionIndex.placeCollisionCircles(Oe,Pt,fi,Oe.lineVertexArray,Oe.glyphOffsetArray,yi,Fe,Ge,Ke,be,Vt,kt.predicate,dn.collisionCircleDiameter*yi/j.ONE_EM,Rr,this.retainedQueryData[Oe.bucketInstanceId].tileID),Qn=Pt||Ur.circles.length>0&&!Ur.collisionDetected,Wn=Wn&&Ur.offscreen,Dn=Ur.occluded}if(Fn.iconFeatureIndex&&(li=Fn.iconFeatureIndex),Fn.iconBox){const fi=yi=>{bi(yi);const Rr=Xt&&er?Is(er.x,er.y,Kt,Vt,this.transform.angle):new j.pointGeometry(0,0),Ri=Oe.getSymbolInstanceIconSize(Tt,this.transform.zoom,Rn);return this.collisionIndex.placeCollisionBox(Oe,Ri,yi,Rr,Yt,ct,Fe,kt.predicate)};gr&&gr.box&&gr.box.length&&Fn.verticalIconBox?(fr=fi(Fn.verticalIconBox),An=fr.box.length>0):(fr=fi(Fn.iconBox),An=fr.box.length>0),Wn=Wn&&fr.offscreen,ir=fr.occluded}const Hi=wt||dn.numHorizontalGlyphVertices===0&&dn.numVerticalGlyphVertices===0,Eo=$t||dn.numIconVertices===0;if(Hi||Eo?Eo?Hi||(An=An&&Qn):Qn=An&&Qn:An=Qn=An&&Qn,Qn&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,Le.get("text-ignore-placement"),Oe.bucketInstanceId,gr&&gr.box&&Wr?Wr:Cr,kt.ID),An&&fr&&this.collisionIndex.insertCollisionBox(fr.box,Le.get("icon-ignore-placement"),Oe.bucketInstanceId,li,kt.ID),Ur&&(Qn&&this.collisionIndex.insertCollisionCircles(Ur.circles,Le.get("text-ignore-placement"),Oe.bucketInstanceId,Cr,kt.ID),be)){const fi=Oe.bucketInstanceId;let yi=this.collisionCircleArrays[fi];yi===void 0&&(yi=this.collisionCircleArrays[fi]=new Ss);for(let Rr=0;Rr<Ur.circles.length;Rr+=4)yi.circles.push(Ur.circles[Rr+0]),yi.circles.push(Ur.circles[Rr+1]),yi.circles.push(Ur.circles[Rr+2]),yi.circles.push(Ur.collisionDetected?1:0)}const ia=Oe.projection.name!=="globe";an=an&&(ia||!Dn),_n=_n&&(ia||!ir),this.placements[dn.crossTileID]=new Pi(Qn||an,An||_n,Wn||Oe.justReloaded),ee[dn.crossTileID]=!0};if(Ht){const dn=Oe.getSortedSymbolIndexes(this.transform.angle);for(let Rn=dn.length-1;Rn>=0;--Rn){const Fn=dn[Rn];Hn(Oe.symbolInstances.get(Fn),Fn,Oe.collisionArrays[Fn])}}else for(let dn=U.symbolInstanceStart;dn<U.symbolInstanceEnd;dn++)Hn(Oe.symbolInstances.get(dn),dn,Oe.collisionArrays[dn]);if(be&&Oe.bucketInstanceId in this.collisionCircleArrays){const dn=this.collisionCircleArrays[Oe.bucketInstanceId];j.invert(dn.invProjMatrix,Fe),dn.viewportMatrix=this.collisionIndex.getViewportMatrix()}Oe.justReloaded=!1}markUsedJustification(U,ee,be,Ie){let Oe;Oe=Ie===j.WritingMode.vertical?be.verticalPlacedTextSymbolIndex:{left:be.leftJustifiedTextSymbolIndex,center:be.centerJustifiedTextSymbolIndex,right:be.rightJustifiedTextSymbolIndex}[j.getAnchorJustification(ee)];const Le=[be.leftJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.rightJustifiedTextSymbolIndex,be.verticalPlacedTextSymbolIndex];for(const Fe of Le)Fe>=0&&(U.text.placedSymbolArray.get(Fe).crossTileID=Oe>=0&&Fe!==Oe?0:be.crossTileID)}markUsedOrientation(U,ee,be){const Ie=ee===j.WritingMode.horizontal||ee===j.WritingMode.horizontalOnly?ee:0,Oe=ee===j.WritingMode.vertical?ee:0,Le=[be.leftJustifiedTextSymbolIndex,be.centerJustifiedTextSymbolIndex,be.rightJustifiedTextSymbolIndex];for(const Fe of Le)U.text.placedSymbolArray.get(Fe).placedOrientation=Ie;be.verticalPlacedTextSymbolIndex&&(U.text.placedSymbolArray.get(be.verticalPlacedTextSymbolIndex).placedOrientation=Oe)}commit(U){this.commitTime=U,this.zoomAtLastRecencyCheck=this.transform.zoom;const ee=this.prevPlacement;let be=!1;this.prevZoomAdjustment=ee?ee.zoomAdjustment(this.transform.zoom):0;const Ie=ee?ee.symbolFadeChange(U):1,Oe=ee?ee.opacities:{},Le=ee?ee.variableOffsets:{},Fe=ee?ee.placedOrientations:{};for(const Ge in this.placements){const Ke=this.placements[Ge],Ye=Oe[Ge];Ye?(this.opacities[Ge]=new pa(Ye,Ie,Ke.text,Ke.icon,null,Ke.clipped),be=be||Ke.text!==Ye.text.placed||Ke.icon!==Ye.icon.placed):(this.opacities[Ge]=new pa(null,Ie,Ke.text,Ke.icon,Ke.skipFade,Ke.clipped),be=be||Ke.text||Ke.icon)}for(const Ge in Oe){const Ke=Oe[Ge];if(!this.opacities[Ge]){const Ye=new pa(Ke,Ie,!1,!1);Ye.isHidden()||(this.opacities[Ge]=Ye,be=be||Ke.text.placed||Ke.icon.placed)}}for(const Ge in Le)this.variableOffsets[Ge]||!this.opacities[Ge]||this.opacities[Ge].isHidden()||(this.variableOffsets[Ge]=Le[Ge]);for(const Ge in Fe)this.placedOrientations[Ge]||!this.opacities[Ge]||this.opacities[Ge].isHidden()||(this.placedOrientations[Ge]=Fe[Ge]);be?this.lastPlacementChangeTime=U:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ee?ee.lastPlacementChangeTime:U)}updateLayerOpacities(U,ee){const be={};for(const Ie of ee){const Oe=Ie.getBucket(U);Oe&&Ie.latestFeatureIndex&&U.id===Oe.layerIds[0]&&this.updateBucketOpacities(Oe,be,Ie.collisionBoxArray)}}updateBucketOpacities(U,ee,be){U.hasTextData()&&U.text.opacityVertexArray.clear(),U.hasIconData()&&U.icon.opacityVertexArray.clear(),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexArray.clear(),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexArray.clear();const Ie=U.layers[0].layout,Oe=!!U.layers[0].dynamicFilter(),Le=new pa(null,0,!1,!1,!0),Fe=Ie.get("text-allow-overlap"),Ge=Ie.get("icon-allow-overlap"),Ke=Ie.get("text-variable-anchor"),Ye=Ie.get("text-rotation-alignment")==="map",ct=Ie.get("text-pitch-alignment")==="map",mt=Ie.get("icon-text-fit")!=="none",Mt=new pa(null,0,Fe&&(Ge||!U.hasIconData()||Ie.get("icon-optional")),Ge&&(Fe||!U.hasTextData()||Ie.get("text-optional")),!0);!U.collisionArrays&&be&&(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())&&U.deserializeCollisionBoxes(be);const At=(kt,wt,$t)=>{for(let Pt=0;Pt<wt/4;Pt++)kt.opacityVertexArray.emplaceBack($t)};let Tt=0;for(let kt=0;kt<U.symbolInstances.length;kt++){const wt=U.symbolInstances.get(kt),{numHorizontalGlyphVertices:$t,numVerticalGlyphVertices:Pt,crossTileID:Yt}=wt;let Kt=this.opacities[Yt];ee[Yt]?Kt=Le:Kt||(Kt=Mt,this.opacities[Yt]=Kt),ee[Yt]=!0;const Vt=$t>0||Pt>0,Xt=wt.numIconVertices>0,Ht=this.placedOrientations[wt.crossTileID],an=Ht===j.WritingMode.vertical,_n=Ht===j.WritingMode.horizontal||Ht===j.WritingMode.horizontalOnly;if(!Vt&&!Xt||Kt.isHidden()||Tt++,Vt){const Hn=ka(Kt.text);At(U.text,$t,an?so:Hn),At(U.text,Pt,_n?so:Hn);const dn=Kt.text.isHidden();[wt.rightJustifiedTextSymbolIndex,wt.centerJustifiedTextSymbolIndex,wt.leftJustifiedTextSymbolIndex].forEach(Qn=>{Qn>=0&&(U.text.placedSymbolArray.get(Qn).hidden=dn||an?1:0)}),wt.verticalPlacedTextSymbolIndex>=0&&(U.text.placedSymbolArray.get(wt.verticalPlacedTextSymbolIndex).hidden=dn||_n?1:0);const Rn=this.variableOffsets[wt.crossTileID];Rn&&this.markUsedJustification(U,Rn.anchor,wt,Ht);const Fn=this.placedOrientations[wt.crossTileID];Fn&&(this.markUsedJustification(U,"left",wt,Fn),this.markUsedOrientation(U,Fn,wt))}if(Xt){const Hn=ka(Kt.icon);wt.placedIconSymbolIndex>=0&&(At(U.icon,wt.numIconVertices,an?so:Hn),U.icon.placedSymbolArray.get(wt.placedIconSymbolIndex).hidden=Kt.icon.isHidden()),wt.verticalPlacedIconSymbolIndex>=0&&(At(U.icon,wt.numVerticalIconVertices,_n?so:Hn),U.icon.placedSymbolArray.get(wt.verticalPlacedIconSymbolIndex).hidden=Kt.icon.isHidden())}if(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData()){const Hn=U.collisionArrays[kt];if(Hn){let dn=new j.pointGeometry(0,0),Rn=!0;if(Hn.textBox||Hn.verticalTextBox){if(Ke){const Qn=this.variableOffsets[Yt];Qn?(dn=ji(Qn.anchor,Qn.width,Qn.height,Qn.textOffset,Qn.textScale),Ye&&dn._rotate(ct?this.transform.angle:-this.transform.angle)):Rn=!1}Oe&&(Rn=!Kt.clipped),Hn.textBox&&yo(U.textCollisionBox.collisionVertexArray,Kt.text.placed,!Rn||an,dn.x,dn.y),Hn.verticalTextBox&&yo(U.textCollisionBox.collisionVertexArray,Kt.text.placed,!Rn||_n,dn.x,dn.y)}const Fn=Rn&&Boolean(!_n&&Hn.verticalIconBox);Hn.iconBox&&yo(U.iconCollisionBox.collisionVertexArray,Kt.icon.placed,Fn,mt?dn.x:0,mt?dn.y:0),Hn.verticalIconBox&&yo(U.iconCollisionBox.collisionVertexArray,Kt.icon.placed,!Fn,mt?dn.x:0,mt?dn.y:0)}}}if(U.fullyClipped=Tt===0,U.sortFeatures(this.transform.angle),this.retainedQueryData[U.bucketInstanceId]&&(this.retainedQueryData[U.bucketInstanceId].featureSortOrder=U.featureSortOrder),U.hasTextData()&&U.text.opacityVertexBuffer&&U.text.opacityVertexBuffer.updateData(U.text.opacityVertexArray),U.hasIconData()&&U.icon.opacityVertexBuffer&&U.icon.opacityVertexBuffer.updateData(U.icon.opacityVertexArray),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexBuffer&&U.iconCollisionBox.collisionVertexBuffer.updateData(U.iconCollisionBox.collisionVertexArray),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexBuffer&&U.textCollisionBox.collisionVertexBuffer.updateData(U.textCollisionBox.collisionVertexArray),U.bucketInstanceId in this.collisionCircleArrays){const kt=this.collisionCircleArrays[U.bucketInstanceId];U.placementInvProjMatrix=kt.invProjMatrix,U.placementViewportMatrix=kt.viewportMatrix,U.collisionCircleArray=kt.circles,delete this.collisionCircleArrays[U.bucketInstanceId]}}symbolFadeChange(U){return this.fadeDuration===0?1:(U-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(U){return Math.max(0,(this.transform.zoom-U)/1.5)}hasTransitions(U){return this.stale||U-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(U,ee){const be=this.zoomAtLastRecencyCheck===ee?1-this.zoomAdjustment(ee):1;return this.zoomAtLastRecencyCheck=ee,this.commitTime+this.fadeDuration*be>U}setStale(){this.stale=!0}}function yo(de,U,ee,be,Ie){de.emplaceBack(U?1:0,ee?1:0,be||0,Ie||0),de.emplaceBack(U?1:0,ee?1:0,be||0,Ie||0),de.emplaceBack(U?1:0,ee?1:0,be||0,Ie||0),de.emplaceBack(U?1:0,ee?1:0,be||0,Ie||0)}const Os=Math.pow(2,25),pl=Math.pow(2,24),Yu=Math.pow(2,17),ac=Math.pow(2,16),Aa=Math.pow(2,9),Ju=Math.pow(2,8),Jc=Math.pow(2,1);function ka(de){if(de.opacity===0&&!de.placed)return 0;if(de.opacity===1&&de.placed)return 4294967295;const U=de.placed?1:0,ee=Math.floor(127*de.opacity);return ee*Os+U*pl+ee*Yu+U*ac+ee*Aa+U*Ju+ee*Jc+U}const so=0;class fl{constructor(U){this._sortAcrossTiles=U.layout.get("symbol-z-order")!=="viewport-y"&&U.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(U,ee,be,Ie,Oe){const Le=this._bucketParts;for(;this._currentTileIndex<U.length;)if(ee.getBucketParts(Le,Ie,U[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Oe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Le.sort((Fe,Ge)=>Fe.sortKey-Ge.sortKey));this._currentPartIndex<Le.length;){const Fe=Le[this._currentPartIndex];if(ee.placeLayerBucketPart(Fe,this._seenCrossTileIDs,be,Fe.symbolInstanceStart===0),this._currentPartIndex++,Oe())return!0}return!1}}class Ro{constructor(U,ee,be,Ie,Oe,Le,Fe,Ge){this.placement=new Ps(U,Oe,Le,Fe,Ge),this._currentPlacementIndex=ee.length-1,this._forceFullPlacement=be,this._showCollisionBoxes=Ie,this._done=!1}isDone(){return this._done}continuePlacement(U,ee,be){const Ie=j.exported.now(),Oe=()=>{const Le=j.exported.now()-Ie;return!this._forceFullPlacement&&Le>2};for(;this._currentPlacementIndex>=0;){const Le=ee[U[this._currentPlacementIndex]],Fe=this.placement.collisionIndex.transform.zoom;if(Le.type==="symbol"&&(!Le.minzoom||Le.minzoom<=Fe)&&(!Le.maxzoom||Le.maxzoom>Fe)){if(this._inProgressLayer||(this._inProgressLayer=new fl(Le)),this._inProgressLayer.continuePlacement(be[Le.source],this.placement,this._showCollisionBoxes,Le,Oe))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(U){return this.placement.commit(U),this.placement}}const sc=512/j.EXTENT/2;class _l{constructor(U,ee,be){this.tileID=U,this.indexedSymbolInstances={},this.bucketInstanceId=be;for(let Ie=0;Ie<ee.length;Ie++){const Oe=ee.get(Ie),Le=Oe.key;this.indexedSymbolInstances[Le]||(this.indexedSymbolInstances[Le]=[]),this.indexedSymbolInstances[Le].push({crossTileID:Oe.crossTileID,coord:this.getScaledCoordinates(Oe,U)})}}getScaledCoordinates(U,ee){const be=sc/Math.pow(2,ee.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ee.canonical.x*j.EXTENT+U.tileAnchorX)*be),y:Math.floor((ee.canonical.y*j.EXTENT+U.tileAnchorY)*be)}}findMatches(U,ee,be){const Ie=this.tileID.canonical.z<ee.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ee.canonical.z);for(let Oe=0;Oe<U.length;Oe++){const Le=U.get(Oe);if(Le.crossTileID)continue;const Fe=this.indexedSymbolInstances[Le.key];if(!Fe)continue;const Ge=this.getScaledCoordinates(Le,ee);for(const Ke of Fe)if(Math.abs(Ke.coord.x-Ge.x)<=Ie&&Math.abs(Ke.coord.y-Ge.y)<=Ie&&!be[Ke.crossTileID]){be[Ke.crossTileID]=!0,Le.crossTileID=Ke.crossTileID;break}}}}class Qu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Rs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(U){const ee=Math.round((U-this.lng)/360);if(ee!==0)for(const be in this.indexes){const Ie=this.indexes[be],Oe={};for(const Le in Ie){const Fe=Ie[Le];Fe.tileID=Fe.tileID.unwrapTo(Fe.tileID.wrap+ee),Oe[Fe.tileID.key]=Fe}this.indexes[be]=Oe}this.lng=U}addBucket(U,ee,be){if(this.indexes[U.overscaledZ]&&this.indexes[U.overscaledZ][U.key]){if(this.indexes[U.overscaledZ][U.key].bucketInstanceId===ee.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(U.overscaledZ,this.indexes[U.overscaledZ][U.key])}for(let Oe=0;Oe<ee.symbolInstances.length;Oe++)ee.symbolInstances.get(Oe).crossTileID=0;this.usedCrossTileIDs[U.overscaledZ]||(this.usedCrossTileIDs[U.overscaledZ]={});const Ie=this.usedCrossTileIDs[U.overscaledZ];for(const Oe in this.indexes){const Le=this.indexes[Oe];if(Number(Oe)>U.overscaledZ)for(const Fe in Le){const Ge=Le[Fe];Ge.tileID.isChildOf(U)&&Ge.findMatches(ee.symbolInstances,U,Ie)}else{const Fe=Le[U.scaledTo(Number(Oe)).key];Fe&&Fe.findMatches(ee.symbolInstances,U,Ie)}}for(let Oe=0;Oe<ee.symbolInstances.length;Oe++){const Le=ee.symbolInstances.get(Oe);Le.crossTileID||(Le.crossTileID=be.generate(),Ie[Le.crossTileID]=!0)}return this.indexes[U.overscaledZ]===void 0&&(this.indexes[U.overscaledZ]={}),this.indexes[U.overscaledZ][U.key]=new _l(U,ee.symbolInstances,ee.bucketInstanceId),!0}removeBucketCrossTileIDs(U,ee){for(const be in ee.indexedSymbolInstances)for(const Ie of ee.indexedSymbolInstances[be])delete this.usedCrossTileIDs[U][Ie.crossTileID]}removeStaleBuckets(U){let ee=!1;for(const be in this.indexes){const Ie=this.indexes[be];for(const Oe in Ie)U[Ie[Oe].bucketInstanceId]||(this.removeBucketCrossTileIDs(be,Ie[Oe]),delete Ie[Oe],ee=!0)}return ee}}class ml{constructor(){this.layerIndexes={},this.crossTileIDs=new Qu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(U,ee,be,Ie){let Oe=this.layerIndexes[U.id];Oe===void 0&&(Oe=this.layerIndexes[U.id]=new Rs);let Le=!1;const Fe={};Ie.name!=="globe"&&Oe.handleWrapJump(be);for(const Ge of ee){const Ke=Ge.getBucket(U);Ke&&U.id===Ke.layerIds[0]&&(Ke.bucketInstanceId||(Ke.bucketInstanceId=++this.maxBucketInstanceId),Oe.addBucket(Ge.tileID,Ke,this.crossTileIDs)&&(Le=!0),Fe[Ke.bucketInstanceId]=!0)}return Oe.removeStaleBuckets(Fe)&&(Le=!0),Le}pruneUnusedLayers(U){const ee={};U.forEach(be=>{ee[be]=!0});for(const be in this.layerIndexes)ee[be]||delete this.layerIndexes[be]}}const $s=(de,U)=>j.emitValidationErrors(de,U&&U.filter(ee=>ee.identifier!=="source.canvas")),Qc=j.pick(vr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),eh=j.pick(vr,["setCenter","setZoom","setBearing","setPitch"]),eu={version:8,layers:[],sources:{}},th={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class vo extends j.Evented{constructor(U,ee={}){super(),this.map=U,this.dispatcher=new sn(Qr(),this),this.imageManager=new xt,this.imageManager.setEventedParent(this),this.glyphManager=new j.GlyphManager(U._requestManager,ee.localFontFamily?j.LocalGlyphMode.all:ee.localIdeographFontFamily?j.LocalGlyphMode.ideographs:j.LocalGlyphMode.none,ee.localFontFamily||ee.localIdeographFontFamily),this.lineAtlas=new j.LineAtlas(256,512),this.crossTileSymbolIndex=new ml,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new j.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",j.getReferrer());const be=this;this._rtlTextPluginCallback=vo.registerForPluginStateChange(Ie=>{be.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Ie.pluginStatus,pluginURL:Ie.pluginURL},(Oe,Le)=>{if(j.triggerPluginCompletionEvent(Oe),Le&&Le.every(Fe=>Fe))for(const Fe in be._sourceCaches){const Ge=be._sourceCaches[Fe],Ke=Ge.getSource().type;Ke!=="vector"&&Ke!=="geojson"||Ge.reload()}})}),this.on("data",Ie=>{if(Ie.dataType!=="source"||Ie.sourceDataType!=="metadata")return;const Oe=this.getSource(Ie.sourceId);if(Oe&&Oe.vectorLayerIds)for(const Le in this._layers){const Fe=this._layers[Le];Fe.source===Oe.id&&this._validateLayer(Fe)}})}loadURL(U,ee={}){this.fire(new j.Event("dataloading",{dataType:"style"}));const be=typeof ee.validate=="boolean"?ee.validate:!j.isMapboxURL(U);U=this.map._requestManager.normalizeStyleURL(U,ee.accessToken);const Ie=this.map._requestManager.transformRequest(U,j.ResourceType.Style);this._request=j.getJSON(Ie,(Oe,Le)=>{this._request=null,Oe?this.fire(new j.ErrorEvent(Oe)):Le&&this._load(Le,be)})}loadJSON(U,ee={}){this.fire(new j.Event("dataloading",{dataType:"style"})),this._request=j.exported.frame(()=>{this._request=null,this._load(U,ee.validate!==!1)})}loadEmpty(){this.fire(new j.Event("dataloading",{dataType:"style"})),this._load(eu,!1)}_updateLayerCount(U,ee){const be=ee?1:-1;U.is3D()&&(this._num3DLayers+=be),U.type==="circle"&&(this._numCircleLayers+=be),U.type==="symbol"&&(this._numSymbolLayers+=be)}_load(U,ee){if(ee&&$s(this,j.validateStyle(U)))return;this._loaded=!0,this.stylesheet=j.clone$1(U),this._updateMapProjection();for(const Ie in U.sources)this.addSource(Ie,U.sources[Ie],{validate:!1});this._changed=!1,U.sprite?this._loadSprite(U.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(U.glyphs);const be=ti(this.stylesheet.layers);this._order=be.map(Ie=>Ie.id),this._layers={},this._serializedLayers={};for(let Ie of be)Ie=j.createStyleLayer(Ie),Ie.setEventedParent(this,{layer:{id:Ie.id}}),this._layers[Ie.id]=Ie,this._serializedLayers[Ie.id]=Ie.serialize(),this._updateLayerCount(Ie,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new rt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new j.Event("data",{dataType:"style"})),this.fire(new j.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(U){U?this.stylesheet.projection=U:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(U){this._spriteRequest=function(ee,be,Ie){let Oe,Le,Fe;const Ge=j.exported.devicePixelRatio>1?"@2x":"";let Ke=j.getJSON(be.transformRequest(be.normalizeSpriteURL(ee,Ge,".json"),j.ResourceType.SpriteJSON),(mt,Mt)=>{Ke=null,Fe||(Fe=mt,Oe=Mt,ct())}),Ye=j.getImage(be.transformRequest(be.normalizeSpriteURL(ee,Ge,".png"),j.ResourceType.SpriteImage),(mt,Mt)=>{Ye=null,Fe||(Fe=mt,Le=Mt,ct())});function ct(){if(Fe)Ie(Fe);else if(Oe&&Le){const mt=j.exported.getImageData(Le),Mt={};for(const At in Oe){const{width:Tt,height:kt,x:wt,y:$t,sdf:Pt,pixelRatio:Yt,stretchX:Kt,stretchY:Vt,content:Xt}=Oe[At],Ht=new j.RGBAImage({width:Tt,height:kt});j.RGBAImage.copy(mt,Ht,{x:wt,y:$t},{x:0,y:0},{width:Tt,height:kt}),Mt[At]={data:Ht,pixelRatio:Yt,sdf:Pt,stretchX:Kt,stretchY:Vt,content:Xt}}Ie(null,Mt)}}return{cancel(){Ke&&(Ke.cancel(),Ke=null),Ye&&(Ye.cancel(),Ye=null)}}}(U,this.map._requestManager,(ee,be)=>{if(this._spriteRequest=null,ee)this.fire(new j.ErrorEvent(ee));else if(be)for(const Ie in be)this.imageManager.addImage(Ie,be[Ie]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new j.Event("data",{dataType:"style"}))})}_validateLayer(U){const ee=this.getSource(U.source);if(!ee)return;const be=U.sourceLayer;be&&(ee.type==="geojson"||ee.vectorLayerIds&&ee.vectorLayerIds.indexOf(be)===-1)&&this.fire(new j.ErrorEvent(new Error(`Source layer "${be}" does not exist on source "${ee.id}" as specified by style layer "${U.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const U in this._sourceCaches)if(!this._sourceCaches[U].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(U){const ee=[];for(const be of U){const Ie=this._layers[be];Ie.type!=="custom"&&ee.push(Ie.serialize())}return ee}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const U in this._sourceCaches)if(this._sourceCaches[U].hasTransition())return!0;for(const U in this._layers)if(this._layers[U].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(U){return!!this.terrain&&th[U.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(U){if(!this._loaded)return;const ee=this._changed;if(this._changed){const Ie=Object.keys(this._updatedLayers),Oe=Object.keys(this._removedLayers);(Ie.length||Oe.length)&&this._updateWorkerLayers(Ie,Oe);for(const Le in this._updatedSources){const Fe=this._updatedSources[Le];Fe==="reload"?this._reloadSource(Le):Fe==="clear"&&this._clearSource(Le)}this._updateTilesForChangedImages();for(const Le in this._updatedPaintProps)this._layers[Le].updateTransitions(U);this.light.updateTransitions(U),this.fog&&this.fog.updateTransitions(U),this._resetUpdates()}const be={};for(const Ie in this._sourceCaches){const Oe=this._sourceCaches[Ie];be[Ie]=Oe.used,Oe.used=!1}for(const Ie of this._order){const Oe=this._layers[Ie];if(Oe.recalculate(U,this._availableImages),!Oe.isHidden(U.zoom)){const Fe=this._getLayerSourceCache(Oe);Fe&&(Fe.used=!0)}const Le=this.map.painter;if(Le){const Fe=Oe.getProgramIds();if(!Fe)continue;const Ge=Oe.getProgramConfiguration(U.zoom);for(const Ke of Fe)Le.useProgram(Ke,Ge)}}for(const Ie in be){const Oe=this._sourceCaches[Ie];be[Ie]!==Oe.used&&Oe.getSource().fire(new j.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Oe.getSource().id}))}this.light.recalculate(U),this.terrain&&this.terrain.recalculate(U),this.fog&&this.fog.recalculate(U),this.z=U.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),ee&&this.fire(new j.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const U=Object.keys(this._changedImages);if(U.length){for(const ee in this._sourceCaches)this._sourceCaches[ee].reloadTilesForDependencies(["icons","patterns"],U);this._changedImages={}}}_updateWorkerLayers(U,ee){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(U),removedIds:ee})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(U){if(this._checkLoaded(),$s(this,j.validateStyle(U)))return!1;(U=j.clone$1(U)).layers=ti(U.layers);const ee=function(Ie,Oe){if(!Ie)return[{command:vr.setStyle,args:[Oe]}];let Le=[];try{if(!xe(Ie.version,Oe.version))return[{command:vr.setStyle,args:[Oe]}];xe(Ie.center,Oe.center)||Le.push({command:vr.setCenter,args:[Oe.center]}),xe(Ie.zoom,Oe.zoom)||Le.push({command:vr.setZoom,args:[Oe.zoom]}),xe(Ie.bearing,Oe.bearing)||Le.push({command:vr.setBearing,args:[Oe.bearing]}),xe(Ie.pitch,Oe.pitch)||Le.push({command:vr.setPitch,args:[Oe.pitch]}),xe(Ie.sprite,Oe.sprite)||Le.push({command:vr.setSprite,args:[Oe.sprite]}),xe(Ie.glyphs,Oe.glyphs)||Le.push({command:vr.setGlyphs,args:[Oe.glyphs]}),xe(Ie.transition,Oe.transition)||Le.push({command:vr.setTransition,args:[Oe.transition]}),xe(Ie.light,Oe.light)||Le.push({command:vr.setLight,args:[Oe.light]}),xe(Ie.fog,Oe.fog)||Le.push({command:vr.setFog,args:[Oe.fog]}),xe(Ie.projection,Oe.projection)||Le.push({command:vr.setProjection,args:[Oe.projection]});const Fe={},Ge=[];(function(ct,mt,Mt,At){let Tt;for(Tt in mt=mt||{},ct=ct||{})ct.hasOwnProperty(Tt)&&(mt.hasOwnProperty(Tt)||po(Tt,Mt,At));for(Tt in mt)mt.hasOwnProperty(Tt)&&(ct.hasOwnProperty(Tt)?xe(ct[Tt],mt[Tt])||(ct[Tt].type==="geojson"&&mt[Tt].type==="geojson"&&la(ct,mt,Tt)?Mt.push({command:vr.setGeoJSONSourceData,args:[Tt,mt[Tt].data]}):Ai(Tt,mt,Mt,At)):mn(Tt,mt,Mt))})(Ie.sources,Oe.sources,Ge,Fe);const Ke=[];Ie.layers&&Ie.layers.forEach(ct=>{ct.source&&Fe[ct.source]?Le.push({command:vr.removeLayer,args:[ct.id]}):Ke.push(ct)});let Ye=Ie.terrain;Ye&&Fe[Ye.source]&&(Le.push({command:vr.setTerrain,args:[void 0]}),Ye=void 0),Le=Le.concat(Ge),xe(Ye,Oe.terrain)||Le.push({command:vr.setTerrain,args:[Oe.terrain]}),function(ct,mt,Mt){mt=mt||[];const At=(ct=ct||[]).map(Io),Tt=mt.map(Io),kt=ct.reduce(hl,{}),wt=mt.reduce(hl,{}),$t=At.slice(),Pt=Object.create(null);let Yt,Kt,Vt,Xt,Ht,an,_n;for(Yt=0,Kt=0;Yt<At.length;Yt++)Vt=At[Yt],wt.hasOwnProperty(Vt)?Kt++:(Mt.push({command:vr.removeLayer,args:[Vt]}),$t.splice($t.indexOf(Vt,Kt),1));for(Yt=0,Kt=0;Yt<Tt.length;Yt++)Vt=Tt[Tt.length-1-Yt],$t[$t.length-1-Yt]!==Vt&&(kt.hasOwnProperty(Vt)?(Mt.push({command:vr.removeLayer,args:[Vt]}),$t.splice($t.lastIndexOf(Vt,$t.length-Kt),1)):Kt++,an=$t[$t.length-Yt],Mt.push({command:vr.addLayer,args:[wt[Vt],an]}),$t.splice($t.length-Yt,0,Vt),Pt[Vt]=!0);for(Yt=0;Yt<Tt.length;Yt++)if(Vt=Tt[Yt],Xt=kt[Vt],Ht=wt[Vt],!Pt[Vt]&&!xe(Xt,Ht))if(xe(Xt.source,Ht.source)&&xe(Xt["source-layer"],Ht["source-layer"])&&xe(Xt.type,Ht.type)){for(_n in Ta(Xt.layout,Ht.layout,Mt,Vt,null,vr.setLayoutProperty),Ta(Xt.paint,Ht.paint,Mt,Vt,null,vr.setPaintProperty),xe(Xt.filter,Ht.filter)||Mt.push({command:vr.setFilter,args:[Vt,Ht.filter]}),xe(Xt.minzoom,Ht.minzoom)&&xe(Xt.maxzoom,Ht.maxzoom)||Mt.push({command:vr.setLayerZoomRange,args:[Vt,Ht.minzoom,Ht.maxzoom]}),Xt)Xt.hasOwnProperty(_n)&&_n!=="layout"&&_n!=="paint"&&_n!=="filter"&&_n!=="metadata"&&_n!=="minzoom"&&_n!=="maxzoom"&&(_n.indexOf("paint.")===0?Ta(Xt[_n],Ht[_n],Mt,Vt,_n.slice(6),vr.setPaintProperty):xe(Xt[_n],Ht[_n])||Mt.push({command:vr.setLayerProperty,args:[Vt,_n,Ht[_n]]}));for(_n in Ht)Ht.hasOwnProperty(_n)&&!Xt.hasOwnProperty(_n)&&_n!=="layout"&&_n!=="paint"&&_n!=="filter"&&_n!=="metadata"&&_n!=="minzoom"&&_n!=="maxzoom"&&(_n.indexOf("paint.")===0?Ta(Xt[_n],Ht[_n],Mt,Vt,_n.slice(6),vr.setPaintProperty):xe(Xt[_n],Ht[_n])||Mt.push({command:vr.setLayerProperty,args:[Vt,_n,Ht[_n]]}))}else Mt.push({command:vr.removeLayer,args:[Vt]}),an=$t[$t.lastIndexOf(Vt)+1],Mt.push({command:vr.addLayer,args:[Ht,an]})}(Ke,Oe.layers,Le)}catch(Fe){console.warn("Unable to compute style diff:",Fe),Le=[{command:vr.setStyle,args:[Oe]}]}return Le}(this.serialize(),U).filter(Ie=>!(Ie.command in eh));if(ee.length===0)return!1;const be=ee.filter(Ie=>!(Ie.command in Qc));if(be.length>0)throw new Error(`Unimplemented: ${be.map(Ie=>Ie.command).join(", ")}.`);return ee.forEach(Ie=>{Ie.command!=="setTransition"&&Ie.command!=="setProjection"&&this[Ie.command].apply(this,Ie.args)}),this.stylesheet=U,this._updateMapProjection(),!0}addImage(U,ee){return this.getImage(U)?this.fire(new j.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(U,ee),this._afterImageUpdated(U),this)}updateImage(U,ee){this.imageManager.updateImage(U,ee)}getImage(U){return this.imageManager.getImage(U)}removeImage(U){return this.getImage(U)?(this.imageManager.removeImage(U),this._afterImageUpdated(U),this):this.fire(new j.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(U){this._availableImages=this.imageManager.listImages(),this._changedImages[U]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new j.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(U,ee,be={}){if(this._checkLoaded(),this.getSource(U)!==void 0)throw new Error("There is already a source with this ID");if(!ee.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(ee).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(ee.type)>=0&&this._validate(j.validateSource,`sources.${U}`,ee,null,be))return;this.map&&this.map._collectResourceTiming&&(ee.collectResourceTiming=!0);const Ie=fn(U,ee,this.dispatcher,this);Ie.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(U),source:Ie.serialize(),sourceId:U}));const Oe=Le=>{const Fe=(Le?"symbol:":"other:")+U,Ge=this._sourceCaches[Fe]=new j.SourceCache(Fe,Ie,Le);(Le?this._symbolSourceCaches:this._otherSourceCaches)[U]=Ge,Ge.style=this,Ge.onAdd(this.map)};Oe(!1),ee.type!=="vector"&&ee.type!=="geojson"||Oe(!0),Ie.onAdd&&Ie.onAdd(this.map),this._changed=!0}removeSource(U){this._checkLoaded();const ee=this.getSource(U);if(!ee)throw new Error("There is no source with this ID");for(const Ie in this._layers)if(this._layers[Ie].source===U)return this.fire(new j.ErrorEvent(new Error(`Source "${U}" cannot be removed while layer "${Ie}" is using it.`)));if(this.terrain&&this.terrain.get().source===U)return this.fire(new j.ErrorEvent(new Error(`Source "${U}" cannot be removed while terrain is using it.`)));const be=this._getSourceCaches(U);for(const Ie of be)delete this._sourceCaches[Ie.id],delete this._updatedSources[Ie.id],Ie.fire(new j.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Ie.getSource().id})),Ie.setEventedParent(null),Ie.clearTiles();return delete this._otherSourceCaches[U],delete this._symbolSourceCaches[U],ee.setEventedParent(null),ee.onRemove&&ee.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(U,ee){this._checkLoaded(),this.getSource(U).setData(ee),this._changed=!0}getSource(U){const ee=this._getSourceCache(U);return ee&&ee.getSource()}addLayer(U,ee,be={}){this._checkLoaded();const Ie=U.id;if(this.getLayer(Ie))return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${Ie}" already exists on this map`)));let Oe;if(U.type==="custom"){if($s(this,j.validateCustomStyleLayer(U)))return;Oe=j.createStyleLayer(U)}else{if(typeof U.source=="object"&&(this.addSource(Ie,U.source),U=j.clone$1(U),U=j.extend(U,{source:Ie})),this._validate(j.validateLayer,`layers.${Ie}`,U,{arrayIndex:-1},be))return;Oe=j.createStyleLayer(U),this._validateLayer(Oe),Oe.setEventedParent(this,{layer:{id:Ie}}),this._serializedLayers[Oe.id]=Oe.serialize(),this._updateLayerCount(Oe,!0)}const Le=ee?this._order.indexOf(ee):this._order.length;if(ee&&Le===-1)return void this.fire(new j.ErrorEvent(new Error(`Layer with id "${ee}" does not exist on this map.`)));this._order.splice(Le,0,Ie),this._layerOrderChanged=!0,this._layers[Ie]=Oe;const Fe=this._getLayerSourceCache(Oe);if(this._removedLayers[Ie]&&Oe.source&&Fe&&Oe.type!=="custom"){const Ge=this._removedLayers[Ie];delete this._removedLayers[Ie],Ge.type!==Oe.type?this._updatedSources[Oe.source]="clear":(this._updatedSources[Oe.source]="reload",Fe.pause())}this._updateLayer(Oe),Oe.onAdd&&Oe.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(U,ee){if(this._checkLoaded(),this._changed=!0,!this._layers[U])return void this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be moved.`)));if(U===ee)return;const be=this._order.indexOf(U);this._order.splice(be,1);const Ie=ee?this._order.indexOf(ee):this._order.length;ee&&Ie===-1?this.fire(new j.ErrorEvent(new Error(`Layer with id "${ee}" does not exist on this map.`))):(this._order.splice(Ie,0,U),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(U){this._checkLoaded();const ee=this._layers[U];if(!ee)return void this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be removed.`)));ee.setEventedParent(null),this._updateLayerCount(ee,!1);const be=this._order.indexOf(U);this._order.splice(be,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[U]=ee,delete this._layers[U],delete this._serializedLayers[U],delete this._updatedLayers[U],delete this._updatedPaintProps[U],ee.onRemove&&ee.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(U){return this._layers[U]}hasLayer(U){return U in this._layers}hasLayerType(U){for(const ee in this._layers)if(this._layers[ee].type===U)return!0;return!1}setLayerZoomRange(U,ee,be){this._checkLoaded();const Ie=this.getLayer(U);Ie?Ie.minzoom===ee&&Ie.maxzoom===be||(ee!=null&&(Ie.minzoom=ee),be!=null&&(Ie.maxzoom=be),this._updateLayer(Ie)):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(U,ee,be={}){this._checkLoaded();const Ie=this.getLayer(U);if(Ie){if(!xe(Ie.filter,ee))return ee==null?(Ie.filter=void 0,void this._updateLayer(Ie)):void(this._validate(j.validateFilter,`layers.${Ie.id}.filter`,ee,{layerType:Ie.type},be)||(Ie.filter=j.clone$1(ee),this._updateLayer(Ie)))}else this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be filtered.`)))}getFilter(U){const ee=this.getLayer(U);return ee&&j.clone$1(ee.filter)}setLayoutProperty(U,ee,be,Ie={}){this._checkLoaded();const Oe=this.getLayer(U);Oe?xe(Oe.getLayoutProperty(ee),be)||(Oe.setLayoutProperty(ee,be,Ie),this._updateLayer(Oe)):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(U,ee){const be=this.getLayer(U);if(be)return be.getLayoutProperty(ee);this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style.`)))}setPaintProperty(U,ee,be,Ie={}){this._checkLoaded();const Oe=this.getLayer(U);Oe?xe(Oe.getPaintProperty(ee),be)||(Oe.setPaintProperty(ee,be,Ie)&&this._updateLayer(Oe),this._changed=!0,this._updatedPaintProps[U]=!0):this.fire(new j.ErrorEvent(new Error(`The layer '${U}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(U,ee){const be=this.getLayer(U);return be&&be.getPaintProperty(ee)}setFeatureState(U,ee){this._checkLoaded();const be=U.source,Ie=U.sourceLayer,Oe=this.getSource(be);if(!Oe)return void this.fire(new j.ErrorEvent(new Error(`The source '${be}' does not exist in the map's style.`)));const Le=Oe.type;if(Le==="geojson"&&Ie)return void this.fire(new j.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Le==="vector"&&!Ie)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));U.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided.")));const Fe=this._getSourceCaches(be);for(const Ge of Fe)Ge.setFeatureState(Ie,U.id,ee)}removeFeatureState(U,ee){this._checkLoaded();const be=U.source,Ie=this.getSource(be);if(!Ie)return void this.fire(new j.ErrorEvent(new Error(`The source '${be}' does not exist in the map's style.`)));const Oe=Ie.type,Le=Oe==="vector"?U.sourceLayer:void 0;if(Oe==="vector"&&!Le)return void this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(ee&&typeof U.id!="string"&&typeof U.id!="number")return void this.fire(new j.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const Fe=this._getSourceCaches(be);for(const Ge of Fe)Ge.removeFeatureState(Le,U.id,ee)}getFeatureState(U){this._checkLoaded();const ee=U.source,be=U.sourceLayer,Ie=this.getSource(ee);if(Ie){if(Ie.type!=="vector"||be)return U.id===void 0&&this.fire(new j.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(ee)[0].getFeatureState(be,U.id);this.fire(new j.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new j.ErrorEvent(new Error(`The source '${ee}' does not exist in the map's style.`)))}getTransition(){return j.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const U={};for(const ee in this._sourceCaches){const be=this._sourceCaches[ee].getSource();U[be.id]||(U[be.id]=be.serialize())}return j.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:U,layers:this._serializeLayers(this._order)},ee=>ee!==void 0)}_updateLayer(U){this._updatedLayers[U.id]=!0;const ee=this._getLayerSourceCache(U);U.source&&!this._updatedSources[U.source]&&ee&&ee.getSource().type!=="raster"&&(this._updatedSources[U.source]="reload",ee.pause()),this._changed=!0,U.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(U){const ee=Le=>this._layers[Le].type==="fill-extrusion",be={},Ie=[];for(let Le=this._order.length-1;Le>=0;Le--){const Fe=this._order[Le];if(ee(Fe)){be[Fe]=Le;for(const Ge of U){const Ke=Ge[Fe];if(Ke)for(const Ye of Ke)Ie.push(Ye)}}}Ie.sort((Le,Fe)=>Fe.intersectionZ-Le.intersectionZ);const Oe=[];for(let Le=this._order.length-1;Le>=0;Le--){const Fe=this._order[Le];if(ee(Fe))for(let Ge=Ie.length-1;Ge>=0;Ge--){const Ke=Ie[Ge].feature;if(be[Ke.layer.id]<Le)break;Oe.push(Ke),Ie.pop()}else for(const Ge of U){const Ke=Ge[Fe];if(Ke)for(const Ye of Ke)Oe.push(Ye.feature)}}return Oe}queryRenderedFeatures(U,ee,be){ee&&ee.filter&&this._validate(j.validateFilter,"queryRenderedFeatures.filter",ee.filter,null,ee);const Ie={};if(ee&&ee.layers){if(!Array.isArray(ee.layers))return this.fire(new j.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const Ge of ee.layers){const Ke=this._layers[Ge];if(!Ke)return this.fire(new j.ErrorEvent(new Error(`The layer '${Ge}' does not exist in the map's style and cannot be queried for features.`))),[];Ie[Ke.source]=!0}}const Oe=[];ee.availableImages=this._availableImages;const Le=ee&&ee.layers?ee.layers.some(Ge=>{const Ke=this.getLayer(Ge);return Ke&&Ke.is3D()}):this.has3DLayers(),Fe=rn.createFromScreenPoints(U,be);for(const Ge in this._sourceCaches){const Ke=this._sourceCaches[Ge].getSource().id;ee.layers&&!Ie[Ke]||Oe.push(ar(this._sourceCaches[Ge],this._layers,this._serializedLayers,Fe,ee,be,Le,!!this.map._showQueryGeometry))}return this.placement&&Oe.push(function(Ge,Ke,Ye,ct,mt,Mt,At){const Tt={},kt=Mt.queryRenderedSymbols(ct),wt=[];for(const $t of Object.keys(kt).map(Number))wt.push(At[$t]);wt.sort(br);for(const $t of wt){const Pt=$t.featureIndex.lookupSymbolFeatures(kt[$t.bucketInstanceId],Ke,$t.bucketIndex,$t.sourceLayerIndex,mt.filter,mt.layers,mt.availableImages,Ge);for(const Yt in Pt){const Kt=Tt[Yt]=Tt[Yt]||[],Vt=Pt[Yt];Vt.sort((Xt,Ht)=>{const an=$t.featureSortOrder;if(an){const _n=an.indexOf(Xt.featureIndex);return an.indexOf(Ht.featureIndex)-_n}return Ht.featureIndex-Xt.featureIndex});for(const Xt of Vt)Kt.push(Xt)}}for(const $t in Tt)Tt[$t].forEach(Pt=>{const Yt=Pt.feature,Kt=Ye(Ge[$t]).getFeatureState(Yt.layer["source-layer"],Yt.id);Yt.source=Yt.layer.source,Yt.layer["source-layer"]&&(Yt.sourceLayer=Yt.layer["source-layer"]),Yt.state=Kt});return Tt}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),Fe.screenGeometry,ee,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Oe)}querySourceFeatures(U,ee){ee&&ee.filter&&this._validate(j.validateFilter,"querySourceFeatures.filter",ee.filter,null,ee);const be=this._getSourceCaches(U);let Ie=[];for(const Oe of be)Ie=Ie.concat(qn(Oe,ee));return Ie}addSourceType(U,ee,be){return vo.getSourceType(U)?be(new Error(`A source type called "${U}" already exists.`)):(vo.setSourceType(U,ee),ee.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:U,url:ee.workerSourceURL},be):be(null,null))}getLight(){return this.light.getLight()}setLight(U,ee={}){this._checkLoaded();const be=this.light.getLight();let Ie=!1;for(const Le in U)if(!xe(U[Le],be[Le])){Ie=!0;break}if(!Ie)return;const Oe=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(U,ee),this.light.updateTransitions(Oe)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(U,ee=1){if(this._checkLoaded(),!U)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(ee===1){if(typeof U.source=="object"){const be="terrain-dem-src";this.addSource(be,U.source),U=j.clone$1(U),U=j.extend(U,{source:be})}if(this._validate(j.validateTerrain,"terrain",U))return}if(!this.terrain||this.terrain&&ee!==this.terrain.drapeRenderMode)this._createTerrain(U,ee);else{const be=this.terrain,Ie=be.get();for(const Oe of Object.keys(j.spec.terrain))!U.hasOwnProperty(Oe)&&j.spec.terrain[Oe].default&&(U[Oe]=j.spec.terrain[Oe].default);for(const Oe in U)if(!xe(U[Oe],Ie[Oe])){be.set(U),this.stylesheet.terrain=U;const Le=this._setTransitionParameters({duration:0});be.updateTransitions(Le);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(U){const ee=this.fog=new zt(U,this.map.transform);this.stylesheet.fog=U;const be=this._setTransitionParameters({duration:0});ee.updateTransitions(be)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const U of this.map._markers)U._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(U){if(this._checkLoaded(),!U)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const ee=this.fog,be=ee.get();Object.keys(U).length===0&&ee.set(U);for(const Ie in U)if(!xe(U[Ie],be[Ie])){ee.set(U),this.stylesheet.fog=U;const Oe=this._setTransitionParameters({duration:0});ee.updateTransitions(Oe);break}}else this._createFog(U);this._markersNeedUpdate=!0}_setTransitionParameters(U){return{now:j.exported.now(),transition:j.extend(U,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const U=this._order.filter(be=>this.isLayerDraped(this._layers[be])),ee=this._order.filter(be=>!this.isLayerDraped(this._layers[be]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...U),this._drapedFirstOrder.push(...ee)}_createTerrain(U,ee){const be=this.terrain=new pt(U,ee);this.stylesheet.terrain=U,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const Ie=this._setTransitionParameters({duration:0});be.updateTransitions(Ie)}_force3DLayerUpdate(){for(const U in this._layers){const ee=this._layers[U];ee.type==="fill-extrusion"&&this._updateLayer(ee)}}_forceSymbolLayerUpdate(){for(const U in this._layers){const ee=this._layers[U];ee.type==="symbol"&&this._updateLayer(ee)}}_validate(U,ee,be,Ie,Oe={}){return(!Oe||Oe.validate!==!1)&&$s(this,U.call(j.validateStyle,j.extend({key:ee,style:this.serialize(),value:be,styleSpec:j.spec},Ie)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),j.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const U in this._layers)this._layers[U].setEventedParent(null);for(const U in this._sourceCaches)this._sourceCaches[U].clearTiles(),this._sourceCaches[U].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(U){const ee=this._getSourceCaches(U);for(const be of ee)be.clearTiles()}_reloadSource(U){const ee=this._getSourceCaches(U);for(const be of ee)be.resume(),be.reload()}_updateSources(U){for(const ee in this._sourceCaches)this._sourceCaches[ee].update(U)}_generateCollisionBoxes(){for(const U in this._sourceCaches){const ee=this._sourceCaches[U];ee.resume(),ee.reload()}}_updatePlacement(U,ee,be,Ie,Oe=!1){let Le=!1,Fe=!1;const Ge={};for(const Ke of this._order){const Ye=this._layers[Ke];if(Ye.type!=="symbol")continue;if(!Ge[Ye.source]){const mt=this._getLayerSourceCache(Ye);if(!mt)continue;Ge[Ye.source]=mt.getRenderableIds(!0).map(Mt=>mt.getTileByID(Mt)).sort((Mt,At)=>At.tileID.overscaledZ-Mt.tileID.overscaledZ||(Mt.tileID.isLessThan(At.tileID)?-1:1))}const ct=this.crossTileSymbolIndex.addLayer(Ye,Ge[Ye.source],U.center.lng,U.projection);Le=Le||ct}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Oe=Oe||this._layerOrderChanged||be===0,this._layerOrderChanged&&this.fire(new j.Event("neworder")),(Oe||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.exported.now(),U.zoom))&&(this.pauseablePlacement=new Ro(U,this._order,Oe,ee,be,Ie,this.placement,this.fog&&U.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.exported.now()),Fe=!0),Le&&this.pauseablePlacement.placement.setStale()),Fe||Le)for(const Ke of this._order){const Ye=this._layers[Ke];Ye.type==="symbol"&&this.placement.updateLayerOpacities(Ye,Ge[Ye.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.exported.now())}_releaseSymbolFadeTiles(){for(const U in this._sourceCaches)this._sourceCaches[U].releaseSymbolFadeTiles()}getImages(U,ee,be){this.imageManager.getImages(ee.icons,be),this._updateTilesForChangedImages();const Ie=Oe=>{Oe&&Oe.setDependencies(ee.tileID.key,ee.type,ee.icons)};Ie(this._otherSourceCaches[ee.source]),Ie(this._symbolSourceCaches[ee.source])}getGlyphs(U,ee,be){this.glyphManager.getGlyphs(ee.stacks,be)}getResource(U,ee,be){return j.makeRequest(ee,be)}_getSourceCache(U){return this._otherSourceCaches[U]}_getLayerSourceCache(U){return U.type==="symbol"?this._symbolSourceCaches[U.source]:this._otherSourceCaches[U.source]}_getSourceCaches(U){const ee=[];return this._otherSourceCaches[U]&&ee.push(this._otherSourceCaches[U]),this._symbolSourceCaches[U]&&ee.push(this._symbolSourceCaches[U]),ee}_isSourceCacheLoaded(U){const ee=this._getSourceCaches(U);return ee.length===0?(this.fire(new j.ErrorEvent(new Error(`There is no source with ID '${U}'`))),!1):ee.every(be=>be.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}vo.getSourceType=function(de){return tn[de]},vo.setSourceType=function(de,U){tn[de]=U},vo.registerForPluginStateChange=j.registerForPluginStateChange;var Sa=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,lc="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",gl=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,cc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Xa=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let yl={},No={};const fa=[];Ca(Sa,fa),Ca(gl,fa),Ca(cc,fa),Ca(Xa,fa),yl=Kr("",gl),No=Kr(Xa,cc);const jo=Kr(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),vl=Sa,zs=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var xl={background:Kr(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Kr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Kr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Kr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Kr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Kr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Kr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Kr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Kr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Kr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Kr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Kr(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Kr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Kr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Kr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Kr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Kr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Kr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Kr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Kr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Kr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Kr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Kr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc),skyboxGradient:Kr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lc),skyboxCapture:Kr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Kr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Kr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Ca(de,U){const ee=de.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let be of ee)if(be=be.trim(),be[0]==="#"&&be.includes("if")&&!be.includes("endif")){be=be.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Ie=be.split(" ");for(const Oe of Ie)U.includes(Oe)||U.push(Oe)}}function Kr(de,U){const ee=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,be=U.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),Ie={},Oe=[...fa];return Ca(de,Oe),Ca(U,Oe),{fragmentSource:de=de.replace(ee,(Le,Fe,Ge,Ke,Ye)=>(Ie[Ye]=!0,Fe==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
varying ${Ge} ${Ke} ${Ye};
#else
uniform ${Ge} ${Ke} u_${Ye};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Ye}
    ${Ge} ${Ke} ${Ye} = u_${Ye};
#endif
`)),vertexSource:U=U.replace(ee,(Le,Fe,Ge,Ke,Ye)=>{const ct=Ke==="float"?"vec2":"vec4",mt=Ye.match(/color/)?"color":ct;return Ie[Ye]?Fe==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${Ge} ${ct} a_${Ye};
varying ${Ge} ${Ke} ${Ye};
#else
uniform ${Ge} ${Ke} u_${Ye};
#endif
`:mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = a_${Ye};
#else
    ${Ge} ${Ke} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ye} = unpack_mix_${mt}(a_${Ye}, u_${Ye}_t);
#else
    ${Ge} ${Ke} ${Ye} = u_${Ye};
#endif
`:Fe==="define"?`
#ifndef HAS_UNIFORM_u_${Ye}
uniform lowp float u_${Ye}_t;
attribute ${Ge} ${ct} a_${Ye};
#else
uniform ${Ge} ${Ke} u_${Ye};
#endif
`:mt==="vec4"?`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ge} ${Ke} ${Ye} = a_${Ye};
#else
    ${Ge} ${Ke} ${Ye} = u_${Ye};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Ye}
    ${Ge} ${Ke} ${Ye} = unpack_mix_${mt}(a_${Ye}, u_${Ye}_t);
#else
    ${Ge} ${Ke} ${Ye} = u_${Ye};
#endif
`}),staticAttributes:be,usedDefines:Oe}}class bl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(U,ee,be,Ie,Oe,Le,Fe){this.context=U;let Ge=this.boundPaintVertexBuffers.length!==Ie.length;for(let Ye=0;!Ge&&Ye<Ie.length;Ye++)this.boundPaintVertexBuffers[Ye]!==Ie[Ye]&&(Ge=!0);let Ke=this.boundDynamicVertexBuffers.length!==Fe.length;for(let Ye=0;!Ke&&Ye<Fe.length;Ye++)this.boundDynamicVertexBuffers[Ye]!==Fe[Ye]&&(Ke=!0);if(!U.extVertexArrayObject||!this.vao||this.boundProgram!==ee||this.boundLayoutVertexBuffer!==be||Ge||Ke||this.boundIndexBuffer!==Oe||this.boundVertexOffset!==Le)this.freshBind(ee,be,Ie,Oe,Le,Fe);else{U.bindVertexArrayOES.set(this.vao);for(const Ye of Fe)Ye&&Ye.bind();Oe&&Oe.dynamicDraw&&Oe.bind()}}freshBind(U,ee,be,Ie,Oe,Le){let Fe;const Ge=U.numAttributes,Ke=this.context,Ye=Ke.gl;if(Ke.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ke.extVertexArrayObject.createVertexArrayOES(),Ke.bindVertexArrayOES.set(this.vao),Fe=0,this.boundProgram=U,this.boundLayoutVertexBuffer=ee,this.boundPaintVertexBuffers=be,this.boundIndexBuffer=Ie,this.boundVertexOffset=Oe,this.boundDynamicVertexBuffers=Le;else{Fe=Ke.currentNumAttributes||0;for(let ct=Ge;ct<Fe;ct++)Ye.disableVertexAttribArray(ct)}ee.enableAttributes(Ye,U),ee.bind(),ee.setVertexAttribPointers(Ye,U,Oe);for(const ct of be)ct.enableAttributes(Ye,U),ct.bind(),ct.setVertexAttribPointers(Ye,U,Oe);for(const ct of Le)ct&&(ct.enableAttributes(Ye,U),ct.bind(),ct.setVertexAttribPointers(Ye,U,Oe));Ie&&Ie.bind(),Ke.currentNumAttributes=Ge}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function uc(de,U){const ee=Math.pow(2,U.canonical.z),be=U.canonical.y;return[new j.MercatorCoordinate(0,be/ee).toLngLat().lat,new j.MercatorCoordinate(0,(be+1)/ee).toLngLat().lat]}function hc(de,U,ee,be,Ie,Oe,Le){const Fe=de.context,Ge=Fe.gl,Ke=ee.fbo;if(!Ke)return;de.prepareDrawTile();const Ye=de.useProgram("hillshade");Fe.activeTexture.set(Ge.TEXTURE0),Ge.bindTexture(Ge.TEXTURE_2D,Ke.colorAttachment.get());const ct=((Tt,kt,wt,$t)=>{const Pt=wt.paint.get("hillshade-shadow-color"),Yt=wt.paint.get("hillshade-highlight-color"),Kt=wt.paint.get("hillshade-accent-color");let Vt=wt.paint.get("hillshade-illumination-direction")*(Math.PI/180);wt.paint.get("hillshade-illumination-anchor")==="viewport"&&(Vt-=Tt.transform.angle);const Xt=!Tt.options.moving;return{u_matrix:$t||Tt.transform.calculateProjMatrix(kt.tileID.toUnwrapped(),Xt),u_image:0,u_latrange:uc(0,kt.tileID),u_light:[wt.paint.get("hillshade-exaggeration"),Vt],u_shadow:Pt,u_highlight:Yt,u_accent:Kt}})(de,ee,be,de.terrain?U.projMatrix:null);de.prepareDrawProgram(Fe,Ye,U.toUnwrapped());const{tileBoundsBuffer:mt,tileBoundsIndexBuffer:Mt,tileBoundsSegments:At}=de.getTileBoundsBuffers(ee);Ye.draw(Fe,Ge.TRIANGLES,Ie,Oe,Le,j.CullFaceMode.disabled,ct,be.id,mt,Mt,At)}function Hr(de,U,ee){if(!U.needsDEMTextureUpload)return;const be=de.context,Ie=be.gl;be.pixelStoreUnpackPremultiplyAlpha.set(!1),U.demTexture=U.demTexture||de.getTileTexture(ee.stride);const Oe=ee.getPixels();U.demTexture?U.demTexture.update(Oe,{premultiply:!1}):U.demTexture=new j.Texture(be,Oe,Ie.RGBA,{premultiply:!1}),U.needsDEMTextureUpload=!1}function Ka(de,U,ee,be,Ie,Oe){const Le=de.context,Fe=Le.gl;if(!U.dem)return;const Ge=U.dem;if(Le.activeTexture.set(Fe.TEXTURE1),Hr(de,U,Ge),!U.demTexture)return;U.demTexture.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);const Ke=Ge.dim;Le.activeTexture.set(Fe.TEXTURE0);let Ye=U.fbo;if(!Ye){const At=new j.Texture(Le,{width:Ke,height:Ke,data:null},Fe.RGBA);At.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ye=U.fbo=Le.createFramebuffer(Ke,Ke,!0),Ye.colorAttachment.set(At.texture)}Le.bindFramebuffer.set(Ye.framebuffer),Le.viewport.set([0,0,Ke,Ke]);const{tileBoundsBuffer:ct,tileBoundsIndexBuffer:mt,tileBoundsSegments:Mt}=de.getMercatorTileBoundsBuffers();de.useProgram("hillshadePrepare").draw(Le,Fe.TRIANGLES,be,Ie,Oe,j.CullFaceMode.disabled,((At,Tt)=>{const kt=Tt.stride,wt=j.create();return j.ortho(wt,0,j.EXTENT,-j.EXTENT,0,0,1),j.translate(wt,wt,[0,-j.EXTENT,0]),{u_matrix:wt,u_image:1,u_dimension:[kt,kt],u_zoom:At.overscaledZ,u_unpack:Tt.unpackVector}})(U.tileID,Ge),ee.id,ct,mt,Mt),U.needsHillshadePrepare=!1}const Ds=de=>({u_matrix:new j.UniformMatrix4f(de),u_image0:new j.Uniform1i(de),u_skirt_height:new j.Uniform1f(de)}),$o=(de,U)=>({u_matrix:de,u_image0:0,u_skirt_height:U}),dc=(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt)=>({u_proj_matrix:Float32Array.from(de),u_globe_matrix:U,u_normalize_matrix:Float32Array.from(be),u_merc_matrix:ee,u_zoom_transition:Ie,u_merc_center:Oe,u_image0:0,u_frustum_tl:Le,u_frustum_tr:Fe,u_frustum_br:Ge,u_frustum_bl:Ke,u_globe_pos:Ye,u_globe_radius:ct,u_viewport:mt,u_grid_matrix:Mt?Float32Array.from(Mt):new Float32Array(9)});function wl(de,U){return de!=null&&U!=null&&!(!de.hasData()||!U.hasData())&&de.demTexture!=null&&U.demTexture!=null&&de.tileID.key!==U.tileID.key}const _a=new class{constructor(){this.operations={}}newMorphing(de,U,ee,be,Ie){if(de in this.operations){const Oe=this.operations[de];Oe.to.tileID.key!==ee.tileID.key&&(Oe.queued=ee)}else this.operations[de]={startTime:be,phase:0,duration:Ie,from:U,to:ee,queued:null}}getMorphValuesForProxy(de){if(!(de in this.operations))return null;const U=this.operations[de];return{from:U.from,to:U.to,phase:U.phase}}update(de){for(const U in this.operations){const ee=this.operations[U];for(ee.phase=(de-ee.startTime)/ee.duration;ee.phase>=1||!this._validOp(ee);)if(!this._nextOp(ee,de)){delete this.operations[U];break}}}_nextOp(de,U){return!!de.queued&&(de.from=de.to,de.to=de.queued,de.queued=null,de.phase=0,de.startTime=U,!0)}_validOp(de){return de.from.hasData()&&de.to.hasData()}},Ya={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function nh(de,U){const ee=1<<de.z;return!U&&(de.x===0||de.x===ee-1)||de.y===0||de.y===ee-1}const Jo=de=>({u_matrix:de});function El(de,U,ee,be,Ie){if(Ie>0){const Oe=j.exported.now(),Le=(Oe-de.timeAdded)/Ie,Fe=U?(Oe-U.timeAdded)/Ie:-1,Ge=ee.getSource(),Ke=be.coveringZoomLevel({tileSize:Ge.tileSize,roundZoom:Ge.roundZoom}),Ye=!U||Math.abs(U.tileID.overscaledZ-Ke)>Math.abs(de.tileID.overscaledZ-Ke),ct=Ye&&de.refreshedUponExpiration?1:j.clamp(Ye?Le:1-Fe,0,1);return de.refreshedUponExpiration&&Le>=1&&(de.refreshedUponExpiration=!1),U?{opacity:1,mix:1-ct}:{opacity:ct,mix:0}}return{opacity:1,mix:0}}class Ls extends j.SourceCache{constructor(U){const ee={type:"raster-dem",maxzoom:U.transform.maxZoom},be=new sn(Qr(),null),Ie=fn("mock-dem",ee,be,U.style);super("mock-dem",Ie,!1),Ie.setEventedParent(this),this._sourceLoaded=!0}_loadTile(U,ee){U.state="loaded",ee(null)}}class pc extends j.SourceCache{constructor(U){const ee=fn("proxy",{type:"geojson",maxzoom:U.transform.maxZoom},new sn(Qr(),null),U.style);super("proxy",ee,!1),ee.setEventedParent(this),this.map=this.getSource().map=U,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(U,ee,be){if(U.freezeTileCoverage)return;this.transform=U;const Ie=U.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Oe,Le)=>{if(Oe[Le.key]="",!this._tiles[Le.key]){const Fe=new j.Tile(Le,this._source.tileSize*Le.overscaleFactor(),U.tileZoom);Fe.state="loaded",this._tiles[Le.key]=Fe}return Oe},{});for(const Oe in this._tiles)Oe in Ie||(this.freeFBO(Oe),this._tiles[Oe].unloadVectorData(),delete this._tiles[Oe])}freeFBO(U){const ee=this.proxyCachedFBO[U];if(ee!==void 0){const be=Object.values(ee);this.renderCachePool.push(...be),delete this.proxyCachedFBO[U]}}deallocRenderCache(){this.renderCache.forEach(U=>U.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Tl extends j.OverscaledTileID{constructor(U,ee,be){super(U.overscaledZ,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y),this.proxyTileKey=ee,this.projMatrix=be}}class tu extends j.Elevation{constructor(U,ee){super(),this.painter=U,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[be,Ie,Oe]=function(Ge){const Ke=new j.StructArrayLayout4i8,Ye=new j.StructArrayLayout3ui6,ct=131;Ke.reserve(17161),Ye.reserve(33800);const mt=j.EXTENT/128,Mt=j.EXTENT+mt/2,At=Mt+mt;for(let kt=-mt;kt<At;kt+=mt)for(let wt=-mt;wt<At;wt+=mt){const $t=wt<0||wt>Mt||kt<0||kt>Mt?24575:0,Pt=j.clamp(Math.round(wt),0,j.EXTENT),Yt=j.clamp(Math.round(kt),0,j.EXTENT);Ke.emplaceBack(Pt+$t,Yt,Pt,Yt)}const Tt=(kt,wt)=>{const $t=wt*ct+kt;Ye.emplaceBack($t+1,$t,$t+ct),Ye.emplaceBack($t+ct,$t+ct+1,$t+1)};for(let kt=1;kt<129;kt++)for(let wt=1;wt<129;wt++)Tt(wt,kt);return[0,129].forEach(kt=>{for(let wt=0;wt<130;wt++)Tt(wt,kt),Tt(kt,wt)}),[Ke,Ye,32768]}(),Le=U.context;this.gridBuffer=Le.createVertexBuffer(be,j.boundsAttributes.members),this.gridIndexBuffer=Le.createIndexBuffer(Ie),this.gridSegments=j.SegmentVector.simpleSegment(0,0,be.length,Ie.length),this.gridNoSkirtSegments=j.SegmentVector.simpleSegment(0,0,be.length,Oe),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new pc(ee.map),this.orthoMatrix=j.create(),j.ortho(this.orthoMatrix,0,j.EXTENT,0,j.EXTENT,0,1);const Fe=Le.gl;this._overlapStencilMode=new j.StencilMode({func:Fe.GEQUAL,mask:255},0,255,Fe.KEEP,Fe.KEEP,Fe.REPLACE),this._previousZoom=U.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=ee,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ls(ee.map)}set style(U){U.on("data",this._onStyleDataEvent.bind(this)),U.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=U,this._checkRenderCacheEfficiency()}update(U,ee,be){if(U&&U.terrain){this._style!==U&&(this.style=U),this.enabled=!0;const Ie=U.terrain.properties;this.sourceCache=U.terrain.drapeRenderMode===0?this._mockSourceCache:U._getSourceCache(Ie.get("source")),this._exaggeration=Ie.get("exaggeration");const Oe=()=>{this.sourceCache.used&&j.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Le=this.getScaledDemTileSize();this.sourceCache.update(ee,Le,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Oe(),this._initializing=!0),Oe(),ee.updateElevation(!be),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(ee),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(U){this._findCoveringTileCache[U]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const U=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||U.efficiency!==100&&j.warnOnce(`Terrain render cache efficiency is not optimal (${U.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${U.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(U){U.coord&&U.dataType==="source"?this._clearRenderCacheForTile(U.sourceCacheId,U.coord):U.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const U in this._style._sourceCaches)this._style._sourceCaches[U].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(U=>U.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const U=2*this.proxySourceCache.getSource().tileSize;return[U,U]}set useVertexMorphing(U){this._useVertexMorphing=U}updateTileBinding(U){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const ee=this.proxySourceCache,be=this.painter.transform;this._initializing&&(this._initializing=be._centerAltitude===0&&this.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(be.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const Ie=this.proxyCoords=ee.getIds().map(Ge=>{const Ke=ee.getTileByID(Ge).tileID;return Ke.projMatrix=be.calculateProjMatrix(Ke.toUnwrapped()),Ke});(function(Ge,Ke){const Ye=Ke.transform.pointCoordinate(Ke.transform.getCameraPoint()),ct=new j.pointGeometry(Ye.x,Ye.y);Ge.sort((mt,Mt)=>{if(Mt.overscaledZ-mt.overscaledZ)return Mt.overscaledZ-mt.overscaledZ;const At=new j.pointGeometry(mt.canonical.x+(1<<mt.canonical.z)*mt.wrap,mt.canonical.y),Tt=new j.pointGeometry(Mt.canonical.x+(1<<Mt.canonical.z)*Mt.wrap,Mt.canonical.y),kt=ct.mult(1<<mt.canonical.z);return kt.x-=.5,kt.y-=.5,kt.distSqr(At)-kt.distSqr(Tt)})})(Ie,this.painter),this._previousZoom=be.zoom;const Oe=this.proxyToSource||{};this.proxyToSource={},Ie.forEach(Ge=>{this.proxyToSource[Ge.key]={}}),this.terrainTileForTile={};const Le=this._style._sourceCaches;for(const Ge in Le){const Ke=Le[Ge];if(!Ke.used||(Ke!==this.sourceCache&&this.resetTileLookupCache(Ke.id),this._setupProxiedCoordsForOrtho(Ke,U[Ge],Oe),Ke.usedForTerrain))continue;const Ye=U[Ge];Ke.getSource().reparseOverscaled&&this._assignTerrainTiles(Ye)}this.proxiedCoords[ee.id]=Ie.map(Ge=>new Tl(Ge,Ge.key,this.orthoMatrix)),this._assignTerrainTiles(Ie),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Oe),this.renderingToTexture=!1,this._updateTimestamp=j.exported.now();const Fe={};this._visibleDemTiles=[];for(const Ge of this.proxyCoords){const Ke=this.terrainTileForTile[Ge.key];if(!Ke)continue;const Ye=Ke.tileID.key;Ye in Fe||(this._visibleDemTiles.push(Ke),Fe[Ye]=Ye)}}_assignTerrainTiles(U){this._initializing||U.forEach(ee=>{if(this.terrainTileForTile[ee.key])return;const be=this._findTileCoveringTileID(ee,this.sourceCache);be&&(this.terrainTileForTile[ee.key]=be)})}_prepareDEMTextures(){const U=this.painter.context,ee=U.gl;for(const be in this.terrainTileForTile){const Ie=this.terrainTileForTile[be],Oe=Ie.dem;!Oe||Ie.demTexture&&!Ie.needsDEMTextureUpload||(U.activeTexture.set(ee.TEXTURE1),Hr(this.painter,Ie,Oe))}}_prepareDemTileUniforms(U,ee,be,Ie){if(!ee||ee.demTexture==null)return!1;const Oe=U.tileID.canonical,Le=Math.pow(2,ee.tileID.canonical.z-Oe.z),Fe=Ie||"";return be[`u_dem_tl${Fe}`]=[Oe.x*Le%1,Oe.y*Le%1],be[`u_dem_scale${Fe}`]=Le,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const U=this.painter.context,ee=U.gl;if(!this._emptyDepthBufferTexture){const be=new j.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new j.Texture(U,be,ee.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let U=0;const ee=this._visibleDemTiles.reduce((be,Ie)=>{if(!Ie.dem)return be;const Oe=Ie.dem.tree.minimums[0];return Oe>0&&U++,be+Oe},0);return U?ee/U:0}_updateEmptyDEMTexture(){const U=this.painter.context,ee=U.gl;U.activeTexture.set(ee.TEXTURE2);const be=this._getLoadedAreaMinimum(),Ie=new j.RGBAImage({width:1,height:1},new Uint8Array(j.DEMData.pack(be,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let Oe=this._emptyDEMTexture;return Oe?Oe.update(Ie,{premultiply:!1}):Oe=this._emptyDEMTexture=new j.Texture(U,Ie,ee.RGBA,{premultiply:!1}),Oe}setupElevationDraw(U,ee,be){const Ie=this.painter.context,Oe=Ie.gl,Le=(Fe=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:j.DEMData.getUnpackVector(Fe),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var Fe;Le.u_dem_size=this.sourceCache.getSource().tileSize,Le.u_exaggeration=this.exaggeration();const Ge=this.painter.transform,Ke=Ge.projection,Ye=U.tileID.canonical;Le.u_tile_tl_up=Ke.upVector(Ye,0,0),Le.u_tile_tr_up=Ke.upVector(Ye,j.EXTENT,0),Le.u_tile_br_up=Ke.upVector(Ye,j.EXTENT,j.EXTENT),Le.u_tile_bl_up=Ke.upVector(Ye,0,j.EXTENT),Le.u_tile_up_scale=be&&be.useDenormalizedUpVectorScale?j.GLOBE_METERS_TO_ECEF:Ke.upVectorScale(Ye,Ge.center.lat,Ge.worldSize).metersToTile;let ct=null,mt=null,Mt=1;if(be&&be.morphing&&this._useVertexMorphing){const At=be.morphing.srcDemTile,Tt=be.morphing.dstDemTile;Mt=be.morphing.phase,At&&Tt&&(this._prepareDemTileUniforms(U,At,Le,"_prev")&&(mt=At),this._prepareDemTileUniforms(U,Tt,Le)&&(ct=Tt))}if(mt&&ct?(Ie.activeTexture.set(Oe.TEXTURE2),ct.demTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE,Oe.NEAREST),Ie.activeTexture.set(Oe.TEXTURE4),mt.demTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE,Oe.NEAREST),Le.u_dem_lerp=Mt):(ct=this.terrainTileForTile[U.tileID.key],Ie.activeTexture.set(Oe.TEXTURE2),(this._prepareDemTileUniforms(U,ct,Le)?ct.demTexture:this.emptyDEMTexture).bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE)),Ie.activeTexture.set(Oe.TEXTURE3),be&&be.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE),this._depthFBO&&(Le.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE),Le.u_depth_size_inv=[1,1]),be&&be.useMeterToDem&&ct){const At=(1<<ct.tileID.canonical.z)*j.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Le.u_meter_to_dem=At}be&&be.labelPlaneMatrixInv&&(Le.u_label_plane_matrix_inv=be.labelPlaneMatrixInv),ee.setTerrainUniformValues(Ie,Le)}renderToBackBuffer(U){const ee=this.painter,be=this.painter.context;U.length!==0&&(be.bindFramebuffer.set(null),be.viewport.set([0,0,ee.width,ee.height]),ee.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Ie,Oe,Le,Fe,Ge){if(Ie.transform.projection.name==="globe")(function(Ke,Ye,ct,mt,Mt){const At=Ke.context,Tt=At.gl;let kt,wt;const $t=Ke.options.showTerrainWireframe?2:0,Pt=Ke.transform,Yt=j.globeUseCustomAntiAliasing(Ke,At,Pt),Kt=(Qn,An)=>{if(wt===Qn)return;const Wn=[Ya[Qn],"PROJECTION_GLOBE_VIEW"];Yt&&Wn.push("CUSTOM_ANTIALIASING"),An&&Wn.push(Ya[$t]),kt=Ke.useProgram("globeRaster",null,Wn),wt=Qn},Vt=Ke.colorModeForRenderPass(),Xt=new j.DepthMode(Tt.LEQUAL,j.DepthMode.ReadWrite,Ke.depthRangeFor3D);_a.update(Mt);const Ht=j.calculateGlobeMercatorMatrix(Pt),an=[j.mercatorXfromLng(Pt.center.lng),j.mercatorYfromLat(Pt.center.lat)],_n=$t?[!1,!0]:[!1],Hn=Ke.globeSharedBuffers,dn=[Pt.width*j.exported.devicePixelRatio,Pt.height*j.exported.devicePixelRatio],Rn=Float32Array.from(Pt.globeMatrix),Fn={useDenormalizedUpVectorScale:!0};if(_n.forEach(Qn=>{wt=-1;const An=Qn?Tt.LINES:Tt.TRIANGLES;for(const Wn of mt){const Dn=ct.getTile(Wn),ir=j.StencilMode.disabled,er=Ye.prevTerrainTileForTile[Wn.key],dr=Ye.terrainTileForTile[Wn.key];wl(er,dr)&&_a.newMorphing(Wn.key,er,dr,Mt,250),At.activeTexture.set(Tt.TEXTURE0),Dn.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);const gr=_a.getMorphValuesForProxy(Wn.key),Tr=gr?1:0;gr&&j.extend$1(Fn,{morphing:{srcDemTile:gr.from,dstDemTile:gr.to,phase:j.easeCubicInOut(gr.phase)}});const Ur=j.tileCornersToBounds(Wn.canonical),fr=j.getLatitudinalLod(Ur.getCenter().lat),Cr=j.getGridMatrix(Wn.canonical,Ur,fr),Wr=j.globeNormalizeECEF(j.globeTileBounds(Wn.canonical)),li=dc(Pt.projMatrix,Rn,Ht,Wr,j.globeToMercatorTransition(Pt.zoom),an,Pt.frustumCorners.TL,Pt.frustumCorners.TR,Pt.frustumCorners.BR,Pt.frustumCorners.BL,Pt.globeCenterInViewSpace,Pt.globeRadius,dn,Cr);if(Kt(Tr,Qn),Ye.setupElevationDraw(Dn,kt,Fn),Ke.prepareDrawProgram(At,kt,Wn.toUnwrapped()),Hn){const[bi,ii,Hi]=Qn?Hn.getWirefameBuffers(Ke.context,fr):Hn.getGridBuffers(fr);kt.draw(At,An,Xt,ir,Vt,j.CullFaceMode.backCCW,li,"globe_raster",bi,ii,Hi)}}}),Hn){const Qn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Yt&&Qn.push("CUSTOM_ANTIALIASING"),kt=Ke.useProgram("globeRaster",null,Qn);for(const An of mt){const{x:Wn,y:Dn,z:ir}=An.canonical,er=Dn===0,dr=Dn===(1<<ir)-1,[gr,Tr,Ur,fr]=Hn.getPoleBuffers(ir);if(fr&&(er||dr)){const Cr=ct.getTile(An);At.activeTexture.set(Tt.TEXTURE0),Cr.texture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE);let Wr=j.globePoleMatrixForTile(ir,Wn,Pt);const li=j.globeNormalizeECEF(j.globeTileBounds(An.canonical)),bi=(ii,Hi)=>ii.draw(At,Tt.TRIANGLES,Xt,j.StencilMode.disabled,Vt,j.CullFaceMode.disabled,dc(Pt.projMatrix,Wr,Wr,li,0,an,Pt.frustumCorners.TL,Pt.frustumCorners.TR,Pt.frustumCorners.BR,Pt.frustumCorners.BL,Pt.globeCenterInViewSpace,Pt.globeRadius,dn),"globe_pole_raster",Hi,Ur,fr);Ye.setupElevationDraw(Cr,kt,Fn),Ke.prepareDrawProgram(At,kt,An.toUnwrapped()),er&&bi(kt,gr),dr&&(Wr=j.scale(j.create(),Wr,[1,-1,1]),bi(kt,Tr))}}}})(Ie,Oe,Le,Fe,Ge);else{const Ke=Ie.context,Ye=Ke.gl;let ct,mt;const Mt=Ie.options.showTerrainWireframe?2:0,At=(Pt,Yt)=>{if(mt===Pt)return;const Kt=[Ya[Pt]];Yt&&Kt.push(Ya[Mt]),ct=Ie.useProgram("terrainRaster",null,Kt),mt=Pt},Tt=Ie.colorModeForRenderPass(),kt=new j.DepthMode(Ye.LEQUAL,j.DepthMode.ReadWrite,Ie.depthRangeFor3D);_a.update(Ge);const wt=Ie.transform,$t=6*Math.pow(1.5,22-wt.zoom)*Oe.exaggeration();(Mt?[!1,!0]:[!1]).forEach(Pt=>{mt=-1;const Yt=Pt?Ye.LINES:Ye.TRIANGLES,[Kt,Vt]=Pt?Oe.getWirefameBuffer():[Oe.gridIndexBuffer,Oe.gridSegments];for(const Xt of Fe){const Ht=Le.getTile(Xt),an=j.StencilMode.disabled,_n=Oe.prevTerrainTileForTile[Xt.key],Hn=Oe.terrainTileForTile[Xt.key];wl(_n,Hn)&&_a.newMorphing(Xt.key,_n,Hn,Ge,250),Ke.activeTexture.set(Ye.TEXTURE0),Ht.texture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE,Ye.LINEAR_MIPMAP_NEAREST);const dn=_a.getMorphValuesForProxy(Xt.key),Rn=dn?1:0;let Fn;dn&&(Fn={morphing:{srcDemTile:dn.from,dstDemTile:dn.to,phase:j.easeCubicInOut(dn.phase)}});const Qn=$o(Xt.projMatrix,nh(Xt.canonical,wt.renderWorldCopies)?$t/10:$t);At(Rn,Pt),Oe.setupElevationDraw(Ht,ct,Fn),Ie.prepareDrawProgram(Ke,ct,Xt.toUnwrapped()),ct.draw(Ke,Yt,kt,an,Tt,j.CullFaceMode.backCCW,Qn,"terrain_raster",Oe.gridBuffer,Kt,Vt)}})}}(ee,this,this.proxySourceCache,U,this._updateTimestamp),this.renderingToTexture=!0,ee.gpuTimingDeferredRenderEnd(),U.splice(0,U.length))}renderBatch(U){if(this._drapedRenderBatches.length===0)return U+1;this.renderingToTexture=!0;const ee=this.painter,be=this.painter.context,Ie=this.proxySourceCache,Oe=this.proxiedCoords[Ie.id],Le=this._drapedRenderBatches.shift(),Fe=[],Ge=ee.style.order;let Ke=0;for(const Ye of Oe){const ct=Ie.getTileByID(Ye.proxyTileKey),mt=Ie.proxyCachedFBO[Ye.key]?Ie.proxyCachedFBO[Ye.key][U]:void 0,Mt=mt!==void 0?Ie.renderCache[mt]:this.pool[Ke++],At=mt!==void 0;if(ct.texture=Mt.tex,At&&!Mt.dirty){Fe.push(ct.tileID);continue}let Tt;be.bindFramebuffer.set(Mt.fb.framebuffer),this.renderedToTile=!1,Mt.dirty&&(be.clear({color:j.Color.transparent,stencil:0}),Mt.dirty=!1);for(let kt=Le.start;kt<=Le.end;++kt){const wt=ee.style._layers[Ge[kt]];if(wt.isHidden(ee.transform.zoom))continue;const $t=ee.style._getLayerSourceCache(wt),Pt=$t?this.proxyToSource[Ye.key][$t.id]:[Ye];if(!Pt)continue;const Yt=Pt;be.viewport.set([0,0,Mt.fb.width,Mt.fb.height]),Tt!==($t?$t.id:null)&&(this._setupStencil(Mt,Pt,wt,$t),Tt=$t?$t.id:null),ee.renderLayer(ee,$t,wt,Yt)}this.renderedToTile?(Mt.dirty=!0,Fe.push(ct.tileID)):At||--Ke,Ke===5&&(Ke=0,this.renderToBackBuffer(Fe))}return this.renderToBackBuffer(Fe),this.renderingToTexture=!1,be.bindFramebuffer.set(null),be.viewport.set([0,0,ee.width,ee.height]),Le.end+1}postRender(){}renderCacheEfficiency(U){const ee=U.order.length;if(ee===0)return{efficiency:100};let be,Ie=0,Oe=0,Le=!1;for(let Fe=0;Fe<ee;++Fe){const Ge=U._layers[U.order[Fe]];this._style.isLayerDraped(Ge)?(Le&&++Ie,++Oe):Le||(Le=!0,be=Ge.id)}return Oe===0?{efficiency:100}:{efficiency:100*(1-Ie/Oe),firstUndrapedLayer:be}}getMinElevationBelowMSL(){let U=0;return this._visibleDemTiles.filter(ee=>ee.dem).forEach(ee=>{U=Math.min(U,ee.dem.tree.minimums[0])}),U===0?U:(U-30)*this._exaggeration}raycast(U,ee,be){if(!this._visibleDemTiles)return null;const Ie=this._visibleDemTiles.filter(Oe=>Oe.dem).map(Oe=>{const Le=Oe.tileID,Fe=1<<Le.overscaledZ,{x:Ge,y:Ke}=Le.canonical,Ye=Ge/Fe,ct=(Ge+1)/Fe,mt=Ke/Fe,Mt=(Ke+1)/Fe;return{minx:Ye,miny:mt,maxx:ct,maxy:Mt,t:Oe.dem.tree.raycastRoot(Ye,mt,ct,Mt,U,ee,be),tile:Oe}});Ie.sort((Oe,Le)=>(Oe.t!==null?Oe.t:Number.MAX_VALUE)-(Le.t!==null?Le.t:Number.MAX_VALUE));for(const Oe of Ie){if(Oe.t==null)return null;const Le=Oe.tile.dem.tree.raycast(Oe.minx,Oe.miny,Oe.maxx,Oe.maxy,U,ee,be);if(Le!=null)return Le}return null}_createFBO(){const U=this.painter.context,ee=U.gl,be=this.drapeBufferSize;U.activeTexture.set(ee.TEXTURE0);const Ie=new j.Texture(U,{width:be[0],height:be[1],data:null},ee.RGBA);Ie.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const Oe=U.createFramebuffer(be[0],be[1],!1);return Oe.colorAttachment.set(Ie.texture),Oe.depthAttachment=new lt(U,Oe.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=U.createRenderbuffer(U.gl.DEPTH_STENCIL,be[0],be[1]),this._stencilRef=0,Oe.depthAttachment.set(this._sharedDepthStencil),U.clear({stencil:0})):Oe.depthAttachment.set(this._sharedDepthStencil),U.extTextureFilterAnisotropic&&!U.extTextureFilterAnisotropicForceOff&&ee.texParameterf(ee.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax),{fb:Oe,tex:Ie,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const U in this._style._sourceCaches)if(this._style._sourceCaches[U].hasTransition())return!0;return this._style.order.some(U=>{const ee=this._style._layers[U],be=ee.isHidden(this.painter.transform.zoom),Ie=ee.getCrossfadeParameters(),Oe=!!Ie&&Ie.t!==1,Le=ee.hasTransition();return ee.type!=="custom"&&!be&&(Oe||Le)})}_clearRasterFadeFromRenderCache(){let U=!1;for(const ee in this._style._sourceCaches)if(this._style._sourceCaches[ee]._source instanceof jt){U=!0;break}if(U)for(let ee=0;ee<this._style.order.length;++ee){const be=this._style._layers[this._style.order[ee]],Ie=be.isHidden(this.painter.transform.zoom),Oe=this._style._getLayerSourceCache(be);if(be.type!=="raster"||Ie||!Oe)continue;const Le=be.paint.get("raster-fade-duration");for(const Fe of this.proxyCoords){const Ge=this.proxyToSource[Fe.key][Oe.id];if(Ge)for(const Ke of Ge){const Ye=El(Oe.getTile(Ke),Oe.findLoadedParent(Ke,0),Oe,this.painter.transform,Le);(Ye.opacity!==1||Ye.mix!==0)&&this._clearRenderCacheForTile(Oe.id,Ke)}}}}_setupDrapedRenderBatches(){const U=this._style.order,ee=U.length;if(ee===0)return;const be=[];let Ie,Oe=0,Le=this._style._layers[U[Oe]];for(;!this._style.isLayerDraped(Le)&&Le.isHidden(this.painter.transform.zoom)&&++Oe<ee;)Le=this._style._layers[U[Oe]];for(;Oe<ee;++Oe){const Fe=this._style._layers[U[Oe]];Fe.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(Fe)?Ie===void 0&&(Ie=Oe):Ie!==void 0&&(be.push({start:Ie,end:Oe-1}),Ie=void 0))}Ie!==void 0&&be.push({start:Ie,end:Oe-1}),this._drapedRenderBatches=be}_setupRenderCache(U){const ee=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,ee.renderCache.length>ee.renderCachePool.length){const Le=Object.values(ee.proxyCachedFBO);ee.proxyCachedFBO={};for(let Fe=0;Fe<Le.length;++Fe){const Ge=Object.values(Le[Fe]);ee.renderCachePool.push(...Ge)}}return}this._clearRasterFadeFromRenderCache();const be=this.proxyCoords,Ie=this._tilesDirty;for(let Le=be.length-1;Le>=0;Le--){const Fe=be[Le];if(ee.getTileByID(Fe.key),ee.proxyCachedFBO[Fe.key]!==void 0){const Ge=U[Fe.key],Ke=this.proxyToSource[Fe.key];let Ye=0;for(const ct in Ke){const mt=Ke[ct],Mt=Ge[ct];if(!Mt||Mt.length!==mt.length||mt.some((At,Tt)=>At!==Mt[Tt]||Ie[ct]&&Ie[ct].hasOwnProperty(At.key))){Ye=-1;break}++Ye}for(const ct in ee.proxyCachedFBO[Fe.key])ee.renderCache[ee.proxyCachedFBO[Fe.key][ct]].dirty=Ye<0||Ye!==Object.values(Ge).length}}const Oe=[...this._drapedRenderBatches];Oe.sort((Le,Fe)=>Fe.end-Fe.start-(Le.end-Le.start));for(const Le of Oe)for(const Fe of be){if(ee.proxyCachedFBO[Fe.key])continue;let Ge=ee.renderCachePool.pop();Ge===void 0&&ee.renderCache.length<50&&(Ge=ee.renderCache.length,ee.renderCache.push(this._createFBO())),Ge!==void 0&&(ee.proxyCachedFBO[Fe.key]={},ee.proxyCachedFBO[Fe.key][Le.start]=Ge,ee.renderCache[Ge].dirty=!0)}this._tilesDirty={}}_setupStencil(U,ee,be,Ie){if(!Ie||!this._sourceTilesOverlap[Ie.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Oe=this.painter.context,Le=Oe.gl;if(ee.length<=1)return void(this._overlapStencilType=!1);let Fe;if(be.isTileClipped())Fe=ee.length,this._overlapStencilMode.test={func:Le.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(ee[0].overscaledZ>ee[ee.length-1].overscaledZ))return void(this._overlapStencilType=!1);Fe=1,this._overlapStencilMode.test={func:Le.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+Fe>255&&(Oe.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=Fe,this._overlapStencilMode.ref=this._stencilRef,be.isTileClipped()&&this._renderTileClippingMasks(ee,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(U){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[U.key]),this._overlapStencilMode):j.StencilMode.disabled}_renderTileClippingMasks(U,ee){const be=this.painter,Ie=this.painter.context,Oe=Ie.gl;be._tileClippingMaskIDs={},Ie.setColorMode(j.ColorMode.disabled),Ie.setDepthMode(j.DepthMode.disabled);const Le=be.useProgram("clippingMask");for(const Fe of U){const Ge=be._tileClippingMaskIDs[Fe.key]=--ee;Le.draw(Ie,Oe.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Oe.ALWAYS,mask:0},Ge,255,Oe.KEEP,Oe.KEEP,Oe.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,Jo(Fe.projMatrix),"$clipping",be.tileExtentBuffer,be.quadTriangleIndexBuffer,be.tileExtentSegments)}}pointCoordinate(U){const ee=this.painter.transform;if(U.x<0||U.x>ee.width||U.y<0||U.y>ee.height)return null;const be=[U.x,U.y,1,1];j.transformMat4$1(be,be,ee.pixelMatrixInverse),j.scale$1(be,be,1/be[3]),be[0]/=ee.worldSize,be[1]/=ee.worldSize;const Ie=ee._camera.position,Oe=j.mercatorZfromAltitude(1,ee.center.lat),Le=[Ie[0],Ie[1],Ie[2]/Oe,0],Fe=j.subtract([],be.slice(0,3),Le);j.normalize(Fe,Fe);const Ge=this.raycast(Le,Fe,this._exaggeration);return Ge!==null&&Ge?(j.scaleAndAdd(Le,Le,Fe,Ge),Le[3]=Le[2],Le[2]*=Oe,Le):null}drawDepth(){const U=this.painter,ee=U.context,be=this.proxySourceCache,Ie=Math.ceil(U.width),Oe=Math.ceil(U.height);if(!this._depthFBO||this._depthFBO.width===Ie&&this._depthFBO.height===Oe||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const Le=ee.gl,Fe=ee.createFramebuffer(Ie,Oe,!0);ee.activeTexture.set(Le.TEXTURE0);const Ge=new j.Texture(ee,{width:Ie,height:Oe,data:null},Le.RGBA);Ge.bind(Le.NEAREST,Le.CLAMP_TO_EDGE),Fe.colorAttachment.set(Ge.texture);const Ke=ee.createRenderbuffer(ee.gl.DEPTH_COMPONENT16,Ie,Oe);Fe.depthAttachment.set(Ke),this._depthFBO=Fe,this._depthTexture=Ge}ee.bindFramebuffer.set(this._depthFBO.framebuffer),ee.viewport.set([0,0,Ie,Oe]),function(Le,Fe,Ge,Ke){if(Le.transform.projection.name==="globe")return;const Ye=Le.context,ct=Ye.gl;Ye.clear({depth:1});const mt=Le.useProgram("terrainDepth"),Mt=new j.DepthMode(ct.LESS,j.DepthMode.ReadWrite,Le.depthRangeFor3D);for(const At of Ke){const Tt=Ge.getTile(At),kt=$o(At.projMatrix,0);Fe.setupElevationDraw(Tt,mt),mt.draw(Ye,ct.TRIANGLES,Mt,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.backCCW,kt,"terrain_depth",Fe.gridBuffer,Fe.gridIndexBuffer,Fe.gridNoSkirtSegments)}}(U,this,be,this.proxyCoords)}_setupProxiedCoordsForOrtho(U,ee,be){if(U.getSource()instanceof hn)return this._setupProxiedCoordsForImageSource(U,ee,be);this._findCoveringTileCache[U.id]=this._findCoveringTileCache[U.id]||{};const Ie=this.proxiedCoords[U.id]=[],Oe=this.proxyCoords;for(let Fe=0;Fe<Oe.length;Fe++){const Ge=Oe[Fe],Ke=this._findTileCoveringTileID(Ge,U);if(Ke){const Ye=this._createProxiedId(Ge,Ke,be[Ge.key]&&be[Ge.key][U.id]);Ie.push(Ye),this.proxyToSource[Ge.key][U.id]=[Ye]}}let Le=!1;for(let Fe=0;Fe<ee.length;Fe++){const Ge=U.getTile(ee[Fe]);if(!Ge||!Ge.hasData())continue;const Ke=this._findTileCoveringTileID(Ge.tileID,this.proxySourceCache);if(Ke&&Ke.tileID.canonical.z!==Ge.tileID.canonical.z){const Ye=this.proxyToSource[Ke.tileID.key][U.id],ct=this._createProxiedId(Ke.tileID,Ge,be[Ke.tileID.key]&&be[Ke.tileID.key][U.id]);Ye?Ye.splice(Ye.length-1,0,ct):this.proxyToSource[Ke.tileID.key][U.id]=[ct],Ie.push(ct),Le=!0}}this._sourceTilesOverlap[U.id]=Le}_setupProxiedCoordsForImageSource(U,ee,be){if(!U.getSource().loaded())return;const Ie=this.proxiedCoords[U.id]=[],Oe=this.proxyCoords,Le=U.getSource(),Fe=new j.pointGeometry(Le.tileID.x,Le.tileID.y)._div(1<<Le.tileID.z),Ge=Le.coordinates.map(j.MercatorCoordinate.fromLngLat).reduce((Ye,ct)=>(Ye.min.x=Math.min(Ye.min.x,ct.x-Fe.x),Ye.min.y=Math.min(Ye.min.y,ct.y-Fe.y),Ye.max.x=Math.max(Ye.max.x,ct.x-Fe.x),Ye.max.y=Math.max(Ye.max.y,ct.y-Fe.y),Ye),{min:new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new j.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Ke=(Ye,ct)=>{const mt=Ye.wrap+Ye.canonical.x/(1<<Ye.canonical.z),Mt=Ye.canonical.y/(1<<Ye.canonical.z),At=j.EXTENT/(1<<Ye.canonical.z),Tt=ct.wrap+ct.canonical.x/(1<<ct.canonical.z),kt=ct.canonical.y/(1<<ct.canonical.z);return mt+At<Tt+Ge.min.x||mt>Tt+Ge.max.x||Mt+At<kt+Ge.min.y||Mt>kt+Ge.max.y};for(let Ye=0;Ye<Oe.length;Ye++){const ct=Oe[Ye];for(let mt=0;mt<ee.length;mt++){const Mt=U.getTile(ee[mt]);if(!Mt||!Mt.hasData()||Ke(ct,Mt.tileID))continue;const At=this._createProxiedId(ct,Mt,be[ct.key]&&be[ct.key][U.id]),Tt=this.proxyToSource[ct.key][U.id];Tt?Tt.push(At):this.proxyToSource[ct.key][U.id]=[At],Ie.push(At)}}}_createProxiedId(U,ee,be){let Ie=this.orthoMatrix;if(be){const Oe=be.find(Le=>Le.key===ee.tileID.key);if(Oe)return Oe}if(ee.tileID.key!==U.key){const Oe=U.canonical.z-ee.tileID.canonical.z;let Le,Fe,Ge;Ie=j.create();const Ke=ee.tileID.wrap-U.wrap<<U.overscaledZ;Oe>0?(Le=j.EXTENT>>Oe,Fe=Le*((ee.tileID.canonical.x<<Oe)-U.canonical.x+Ke),Ge=Le*((ee.tileID.canonical.y<<Oe)-U.canonical.y)):(Le=j.EXTENT<<-Oe,Fe=j.EXTENT*(ee.tileID.canonical.x-(U.canonical.x+Ke<<-Oe)),Ge=j.EXTENT*(ee.tileID.canonical.y-(U.canonical.y<<-Oe))),j.ortho(Ie,0,Le,0,Le,0,1),j.translate(Ie,Ie,[Fe,Ge,0])}return new Tl(ee.tileID,U.key,Ie)}_findTileCoveringTileID(U,ee){let be=ee.getTile(U);if(be&&be.hasData())return be;const Ie=this._findCoveringTileCache[ee.id],Oe=Ie[U.key];if(be=Oe?ee.getTileByID(Oe):null,be&&be.hasData()||Oe===null)return be;let Le=be?be.tileID:U,Fe=Le.overscaledZ;const Ge=ee.getSource().minzoom,Ke=[];if(!Oe){const ct=ee.getSource().maxzoom;if(U.canonical.z>=ct){const mt=U.canonical.z-ct;ee.getSource().reparseOverscaled?(Fe=Math.max(U.canonical.z+2,ee.transform.tileZoom),Le=new j.OverscaledTileID(Fe,U.wrap,ct,U.canonical.x>>mt,U.canonical.y>>mt)):mt!==0&&(Fe=ct,Le=new j.OverscaledTileID(Fe,U.wrap,ct,U.canonical.x>>mt,U.canonical.y>>mt))}Le.key!==U.key&&(Ke.push(Le.key),be=ee.getTile(Le))}const Ye=ct=>{Ke.forEach(mt=>{Ie[mt]=ct}),Ke.length=0};for(Fe-=1;Fe>=Ge&&(!be||!be.hasData());Fe--){be&&Ye(be.tileID.key);const ct=Le.calculateScaledKey(Fe);if(be=ee.getTileByID(ct),be&&be.hasData())break;const mt=Ie[ct];if(mt===null)break;mt===void 0?Ke.push(ct):be=ee.getTileByID(mt)}return Ye(be?be.tileID.key:null),be&&be.hasData()?be:null}findDEMTileFor(U){return this.enabled?this._findTileCoveringTileID(U,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(U,ee){let be=this._tilesDirty[U];be||(be=this._tilesDirty[U]={}),be[ee.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const U=function(ee){let be=0;const Ie=new j.StructArrayLayout2ui4,Oe=131;for(let Le=1;Le<129;Le++){for(let Fe=1;Fe<129;Fe++)be=Le*Oe+Fe,Ie.emplaceBack(be,be+1),Ie.emplaceBack(be,be+Oe),Ie.emplaceBack(be+1,be+Oe),Le===128&&Ie.emplaceBack(be+Oe,be+Oe+1);Ie.emplaceBack(be+1,be+1+Oe)}return Ie}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(U),this.wireframeSegments=j.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,U.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Al{static cacheKey(U,ee,be,Ie){let Oe=`${ee}${Ie?Ie.cacheKey:""}`;for(const Le of be)U.usedDefines.includes(Le)&&(Oe+=`/${Le}`);return Oe}constructor(U,ee,be,Ie,Oe,Le){const Fe=U.gl;this.program=Fe.createProgram();const Ge=function(kt){const wt=[];for(let $t=0;$t<kt.length;$t++){if(kt[$t]===null)continue;const Pt=kt[$t].split(" ");wt.push(Pt.pop())}return wt}(be.staticAttributes),Ke=Ie?Ie.getBinderAttributes():[],Ye=Ge.concat(Ke);let ct=Ie?Ie.defines():[];ct=ct.concat(Le.map(kt=>`#define ${kt}`));const mt=ct.concat(U.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(zs):zs,zs,vl,jo.fragmentSource,No.fragmentSource,be.fragmentSource).join(`
`),Mt=ct.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,vl,jo.vertexSource,No.vertexSource,yl.vertexSource,be.vertexSource).join(`
`),At=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost())return void(this.failedToCreate=!0);Fe.shaderSource(At,mt),Fe.compileShader(At),Fe.attachShader(this.program,At);const Tt=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost())this.failedToCreate=!0;else{Fe.shaderSource(Tt,Mt),Fe.compileShader(Tt),Fe.attachShader(this.program,Tt),this.attributes={},this.numAttributes=Ye.length;for(let kt=0;kt<this.numAttributes;kt++)Ye[kt]&&(Fe.bindAttribLocation(this.program,kt,Ye[kt]),this.attributes[Ye[kt]]=kt);Fe.linkProgram(this.program),Fe.deleteShader(Tt),Fe.deleteShader(At),this.fixedUniforms=Oe(U),this.binderUniforms=Ie?Ie.getUniforms(U):[],Le.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(kt=>({u_dem:new j.Uniform1i(kt),u_dem_prev:new j.Uniform1i(kt),u_dem_unpack:new j.Uniform4f(kt),u_dem_tl:new j.Uniform2f(kt),u_dem_scale:new j.Uniform1f(kt),u_dem_tl_prev:new j.Uniform2f(kt),u_dem_scale_prev:new j.Uniform1f(kt),u_dem_size:new j.Uniform1f(kt),u_dem_lerp:new j.Uniform1f(kt),u_exaggeration:new j.Uniform1f(kt),u_depth:new j.Uniform1i(kt),u_depth_size_inv:new j.Uniform2f(kt),u_meter_to_dem:new j.Uniform1f(kt),u_label_plane_matrix_inv:new j.UniformMatrix4f(kt),u_tile_tl_up:new j.Uniform3f(kt),u_tile_tr_up:new j.Uniform3f(kt),u_tile_br_up:new j.Uniform3f(kt),u_tile_bl_up:new j.Uniform3f(kt),u_tile_up_scale:new j.Uniform1f(kt)}))(U)),Le.indexOf("FOG")!==-1&&(this.fogUniforms=(kt=>({u_fog_matrix:new j.UniformMatrix4f(kt),u_fog_range:new j.Uniform2f(kt),u_fog_color:new j.Uniform4f(kt),u_fog_horizon_blend:new j.Uniform1f(kt),u_fog_temporal_offset:new j.Uniform1f(kt),u_frustum_tl:new j.Uniform3f(kt),u_frustum_tr:new j.Uniform3f(kt),u_frustum_br:new j.Uniform3f(kt),u_frustum_bl:new j.Uniform3f(kt),u_globe_pos:new j.Uniform3f(kt),u_globe_radius:new j.Uniform1f(kt),u_globe_transition:new j.Uniform1f(kt),u_is_globe:new j.Uniform1i(kt),u_viewport:new j.Uniform2f(kt)}))(U))}}setTerrainUniformValues(U,ee){if(!this.terrainUniforms)return;const be=this.terrainUniforms;if(!this.failedToCreate){U.program.set(this.program);for(const Ie in ee)be[Ie].set(this.program,Ie,ee[Ie])}}setFogUniformValues(U,ee){if(!this.fogUniforms)return;const be=this.fogUniforms;if(!this.failedToCreate){U.program.set(this.program);for(const Ie in ee)be[Ie].set(this.program,Ie,ee[Ie])}}draw(U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt){const kt=U.gl;if(this.failedToCreate)return;U.program.set(this.program),U.setDepthMode(be),U.setStencilMode(Ie),U.setColorMode(Oe),U.setCullFace(Le);for(const $t of Object.keys(this.fixedUniforms))this.fixedUniforms[$t].set(this.program,$t,Fe[$t]);At&&At.setUniforms(this.program,U,this.binderUniforms,mt,{zoom:Mt});const wt={[kt.LINES]:2,[kt.TRIANGLES]:3,[kt.LINE_STRIP]:1}[ee];for(const $t of ct.get()){const Pt=$t.vaos||($t.vaos={});(Pt[Ge]||(Pt[Ge]=new bl)).bind(U,this,Ke,At?At.getPaintVertexBuffers():[],Ye,$t.vertexOffset,Tt||[]),kt.drawElements(ee,$t.primitiveLength*wt,kt.UNSIGNED_SHORT,$t.primitiveOffset*wt*2)}}}function nu(de,U,ee){const be=1/Mn(ee,1,U.transform.tileZoom),Ie=Math.pow(2,ee.tileID.overscaledZ),Oe=ee.tileSize*Math.pow(2,U.transform.tileZoom)/Ie,Le=Oe*(ee.tileID.canonical.x+ee.tileID.wrap*Ie),Fe=Oe*ee.tileID.canonical.y;return{u_image:0,u_texsize:ee.imageAtlasTexture.size,u_scale:[be,de.fromScale,de.toScale],u_fade:de.t,u_pixel_coord_upper:[Le>>16,Fe>>16],u_pixel_coord_lower:[65535&Le,65535&Fe]}}const Uo=j.create(),Ja=(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye)=>{const ct=U.style.light,mt=ct.properties.get("position"),Mt=[mt.x,mt.y,mt.z],At=j.create$1();ct.properties.get("anchor")==="viewport"&&(j.fromRotation(At,-U.transform.angle),j.transformMat3(Mt,Mt,At));const Tt=ct.properties.get("color"),kt=U.transform,wt={u_matrix:de,u_lightpos:Mt,u_lightintensity:ct.properties.get("intensity"),u_lightcolor:[Tt.r,Tt.g,Tt.b],u_vertical_gradient:+ee,u_opacity:be,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Uo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Ie,u_edge_radius:Oe};return kt.projection.name==="globe"&&(wt.u_tile_id=[Le.canonical.x,Le.canonical.y,1<<Le.canonical.z],wt.u_zoom_transition=Ge,wt.u_inv_rot_matrix=Ye,wt.u_merc_center=Ke,wt.u_up_dir=kt.projection.upVector(new j.CanonicalTileID(0,0,0),Ke[0]*j.EXTENT,Ke[1]*j.EXTENT),wt.u_height_lift=Fe),wt},ru=(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt)=>{const Mt=Ja(de,U,ee,be,Ie,Oe,Le,Ke,Ye,ct,mt),At={u_height_factor:-Math.pow(2,Le.overscaledZ)/Ge.tileSize/8};return j.extend(Mt,nu(Fe,U,Ge),At)},Bs=de=>({u_matrix:de}),kl=(de,U,ee,be)=>j.extend(Bs(de),nu(ee,U,be)),Vo=(de,U)=>({u_matrix:de,u_world:U}),Ma=(de,U,ee,be,Ie)=>j.extend(kl(de,U,ee,be),{u_world:Ie}),iu=j.create(),fc=(de,U,ee,be,Ie,Oe)=>{const Le=de.transform,Fe=Le.projection.name==="globe";let Ge;if(Oe.paint.get("circle-pitch-alignment")==="map")if(Fe){const Ye=j.globePixelsToTileUnits(Le.zoom,U.canonical)*Le._pixelsPerMercatorPixel;Ge=Float32Array.from([Ye,0,0,Ye])}else Ge=Le.calculatePixelsToTileUnitsMatrix(ee);else Ge=new Float32Array([Le.pixelsToGLUnits[0],0,0,Le.pixelsToGLUnits[1]]);const Ke={u_camera_to_center_distance:Le.cameraToCenterDistance,u_matrix:de.translatePosMatrix(U.projMatrix,ee,Oe.paint.get("circle-translate"),Oe.paint.get("circle-translate-anchor")),u_device_pixel_ratio:j.exported.devicePixelRatio,u_extrude_scale:Ge,u_inv_rot_matrix:iu,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Fe){Ke.u_inv_rot_matrix=be,Ke.u_merc_center=Ie,Ke.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Ke.u_zoom_transition=j.globeToMercatorTransition(Le.zoom);const Ye=Ie[0]*j.EXTENT,ct=Ie[1]*j.EXTENT;Ke.u_up_dir=Le.projection.upVector(new j.CanonicalTileID(0,0,0),Ye,ct)}return Ke},ou=de=>{const U=[];return de.paint.get("circle-pitch-alignment")==="map"&&U.push("PITCH_WITH_MAP"),de.paint.get("circle-pitch-scale")==="map"&&U.push("SCALE_WITH_MAP"),U},_c=(de,U,ee,be)=>{const Ie=j.EXTENT/ee.tileSize;return{u_matrix:de,u_camera_to_center_distance:U.getCameraToCenterDistance(be),u_extrude_scale:[U.pixelsToGLUnits[0]/Ie,U.pixelsToGLUnits[1]/Ie]}},au=(de,U,ee=1)=>({u_matrix:de,u_color:U,u_overlay:0,u_overlay_scale:ee}),mc=j.create(),rh=(de,U,ee,be,Ie,Oe,Le)=>{const Fe=de.transform,Ge=Fe.projection.name==="globe",Ke=Ge?j.globePixelsToTileUnits(Fe.zoom,U.canonical)*Fe._pixelsPerMercatorPixel:Mn(ee,1,Oe),Ye={u_matrix:U.projMatrix,u_extrude_scale:Ke,u_intensity:Le,u_inv_rot_matrix:mc,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Ge){Ye.u_inv_rot_matrix=be,Ye.u_merc_center=Ie,Ye.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Ye.u_zoom_transition=j.globeToMercatorTransition(Fe.zoom);const ct=Ie[0]*j.EXTENT,mt=Ie[1]*j.EXTENT;Ye.u_up_dir=Fe.projection.upVector(new j.CanonicalTileID(0,0,0),ct,mt)}return Ye},Sl=(de,U,ee,be,Ie,Oe,Le,Fe)=>{const Ge=de.transform,Ke=Ge.calculatePixelsToTileUnitsMatrix(U),Ye={u_matrix:su(de,U,ee,Ie),u_pixels_to_tile_units:Ke,u_device_pixel_ratio:Le,u_units_to_pixels:[1/Ge.pixelsToGLUnits[0],1/Ge.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:Oe,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:Fe};if(Ml(ee)){const ct=Cl(U,de.transform);Ye.u_texsize=U.lineAtlasTexture.size,Ye.u_scale=[ct,be.fromScale,be.toScale],Ye.u_mix=be.t}return Ye},ih=(de,U,ee,be,Ie,Oe)=>{const Le=de.transform,Fe=Cl(U,Le);return{u_matrix:su(de,U,ee,Ie),u_texsize:U.imageAtlasTexture.size,u_pixels_to_tile_units:Le.calculatePixelsToTileUnitsMatrix(U),u_device_pixel_ratio:Oe,u_image:0,u_scale:[Fe,be.fromScale,be.toScale],u_fade:be.t,u_units_to_pixels:[1/Le.pixelsToGLUnits[0],1/Le.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Cl(de,U){return 1/Mn(de,1,U.tileZoom)}function su(de,U,ee,be){return de.translatePosMatrix(be||U.tileID.projMatrix,U,ee.paint.get("line-translate"),ee.paint.get("line-translate-anchor"))}function Ml(de){const U=de.paint.get("line-dasharray").value;return U.value||U.kind!=="constant"}const oh=(de,U,ee,be,Ie,Oe)=>{return{u_matrix:de,u_tl_parent:U,u_scale_parent:ee,u_fade_t:be.mix,u_opacity:be.opacity*Ie.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Ie.paint.get("raster-brightness-min"),u_brightness_high:Ie.paint.get("raster-brightness-max"),u_saturation_factor:(Fe=Ie.paint.get("raster-saturation"),Fe>0?1-1/(1.001-Fe):-Fe),u_contrast_factor:(Le=Ie.paint.get("raster-contrast"),Le>0?1/(1-Le):1+Le),u_spin_weights:Fs(Ie.paint.get("raster-hue-rotate")),u_perspective_transform:Oe};var Le,Fe};function Fs(de){de*=Math.PI/180;const U=Math.sin(de),ee=Math.cos(de);return[(2*ee+1)/3,(-Math.sqrt(3)*U-ee+1)/3,(Math.sqrt(3)*U-ee+1)/3]}const lu=j.create(),Qa=(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt)=>{const kt=Ie.transform,wt={u_is_size_zoom_constant:+(de==="constant"||de==="source"),u_is_size_feature_constant:+(de==="constant"||de==="camera"),u_size_t:U?U.uSizeT:0,u_size:U?U.uSize:0,u_camera_to_center_distance:kt.cameraToCenterDistance,u_rotate_symbol:+ee,u_aspect_ratio:kt.width/kt.height,u_fade_change:Ie.options.fadeDuration?Ie.symbolFadeChange:1,u_matrix:Oe,u_label_plane_matrix:Le,u_coord_matrix:Fe,u_is_text:+Ge,u_pitch_with_map:+be,u_texsize:Ke,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:lu,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:lu,u_up_vector:[0,-1,0]};return Tt.name==="globe"&&(wt.u_tile_id=[Ye.canonical.x,Ye.canonical.y,1<<Ye.canonical.z],wt.u_zoom_transition=ct,wt.u_inv_rot_matrix=Mt,wt.u_merc_center=mt,wt.u_camera_forward=kt._camera.forward(),wt.u_ecef_origin=j.globeECEFOrigin(kt.globeMatrix,Ye.toUnwrapped()),wt.u_tile_matrix=Float32Array.from(kt.globeMatrix),wt.u_up_vector=At),wt},gc=(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt,kt)=>j.extend(Qa(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,ct,mt,Mt,At,Tt,kt),{u_gamma_scale:be?Ie.transform.cameraToCenterDistance*Math.cos(Ie.terrain?0:Ie.transform._pitch):1,u_device_pixel_ratio:j.exported.devicePixelRatio,u_is_halo:+Ye}),Ia=(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt)=>j.extend(gc(de,U,ee,be,Ie,Oe,Le,Fe,!0,Ge,!0,Ye,ct,mt,Mt,At,Tt),{u_texsize_icon:Ke,u_texture_icon:1}),ah=(de,U,ee)=>({u_matrix:de,u_opacity:U,u_color:ee}),cu=(de,U,ee,be,Ie,Oe)=>j.extend(function(Le,Fe,Ge,Ke){const Ye=Ge.imageManager.getPattern(Le.from.toString()),ct=Ge.imageManager.getPattern(Le.to.toString()),{width:mt,height:Mt}=Ge.imageManager.getPixelSize(),At=Math.pow(2,Ke.tileID.overscaledZ),Tt=Ke.tileSize*Math.pow(2,Ge.transform.tileZoom)/At,kt=Tt*(Ke.tileID.canonical.x+Ke.tileID.wrap*At),wt=Tt*Ke.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Ye.tl,u_pattern_br_a:Ye.br,u_pattern_tl_b:ct.tl,u_pattern_br_b:ct.br,u_texsize:[mt,Mt],u_mix:Fe.t,u_pattern_size_a:Ye.displaySize,u_pattern_size_b:ct.displaySize,u_scale_a:Fe.fromScale,u_scale_b:Fe.toScale,u_tile_units_to_pixels:1/Mn(Ke,1,Ge.transform.tileZoom),u_pixel_coord_upper:[kt>>16,wt>>16],u_pixel_coord_lower:[65535&kt,65535&wt]}}(be,Oe,ee,Ie),{u_matrix:de,u_opacity:U}),sh={fillExtrusion:de=>({u_matrix:new j.UniformMatrix4f(de),u_lightpos:new j.Uniform3f(de),u_lightintensity:new j.Uniform1f(de),u_lightcolor:new j.Uniform3f(de),u_vertical_gradient:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de),u_edge_radius:new j.Uniform1f(de),u_ao:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_up_dir:new j.Uniform3f(de),u_height_lift:new j.Uniform1f(de)}),fillExtrusionPattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_lightpos:new j.Uniform3f(de),u_lightintensity:new j.Uniform1f(de),u_lightcolor:new j.Uniform3f(de),u_vertical_gradient:new j.Uniform1f(de),u_height_factor:new j.Uniform1f(de),u_edge_radius:new j.Uniform1f(de),u_ao:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_up_dir:new j.Uniform3f(de),u_height_lift:new j.Uniform1f(de),u_image:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de)}),fill:de=>({u_matrix:new j.UniformMatrix4f(de)}),fillPattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_image:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de)}),fillOutline:de=>({u_matrix:new j.UniformMatrix4f(de),u_world:new j.Uniform2f(de)}),fillOutlinePattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_world:new j.Uniform2f(de),u_image:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de)}),circle:de=>({u_camera_to_center_distance:new j.Uniform1f(de),u_extrude_scale:new j.UniformMatrix2f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_up_dir:new j.Uniform3f(de)}),collisionBox:de=>({u_matrix:new j.UniformMatrix4f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_extrude_scale:new j.Uniform2f(de)}),collisionCircle:de=>({u_matrix:new j.UniformMatrix4f(de),u_inv_matrix:new j.UniformMatrix4f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_viewport_size:new j.Uniform2f(de)}),debug:de=>({u_color:new j.UniformColor(de),u_matrix:new j.UniformMatrix4f(de),u_overlay:new j.Uniform1i(de),u_overlay_scale:new j.Uniform1f(de)}),clippingMask:de=>({u_matrix:new j.UniformMatrix4f(de)}),heatmap:de=>({u_extrude_scale:new j.Uniform1f(de),u_intensity:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_up_dir:new j.Uniform3f(de)}),heatmapTexture:de=>({u_image:new j.Uniform1i(de),u_color_ramp:new j.Uniform1i(de),u_opacity:new j.Uniform1f(de)}),hillshade:de=>({u_matrix:new j.UniformMatrix4f(de),u_image:new j.Uniform1i(de),u_latrange:new j.Uniform2f(de),u_light:new j.Uniform2f(de),u_shadow:new j.UniformColor(de),u_highlight:new j.UniformColor(de),u_accent:new j.UniformColor(de)}),hillshadePrepare:de=>({u_matrix:new j.UniformMatrix4f(de),u_image:new j.Uniform1i(de),u_dimension:new j.Uniform2f(de),u_zoom:new j.Uniform1f(de),u_unpack:new j.Uniform4f(de)}),line:de=>({u_matrix:new j.UniformMatrix4f(de),u_pixels_to_tile_units:new j.UniformMatrix2f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_units_to_pixels:new j.Uniform2f(de),u_dash_image:new j.Uniform1i(de),u_gradient_image:new j.Uniform1i(de),u_image_height:new j.Uniform1f(de),u_texsize:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_mix:new j.Uniform1f(de),u_alpha_discard_threshold:new j.Uniform1f(de),u_trim_offset:new j.Uniform2f(de)}),linePattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_texsize:new j.Uniform2f(de),u_pixels_to_tile_units:new j.UniformMatrix2f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_image:new j.Uniform1i(de),u_units_to_pixels:new j.Uniform2f(de),u_scale:new j.Uniform3f(de),u_fade:new j.Uniform1f(de),u_alpha_discard_threshold:new j.Uniform1f(de)}),raster:de=>({u_matrix:new j.UniformMatrix4f(de),u_tl_parent:new j.Uniform2f(de),u_scale_parent:new j.Uniform1f(de),u_fade_t:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de),u_image0:new j.Uniform1i(de),u_image1:new j.Uniform1i(de),u_brightness_low:new j.Uniform1f(de),u_brightness_high:new j.Uniform1f(de),u_saturation_factor:new j.Uniform1f(de),u_contrast_factor:new j.Uniform1f(de),u_spin_weights:new j.Uniform3f(de),u_perspective_transform:new j.Uniform2f(de)}),symbolIcon:de=>({u_is_size_zoom_constant:new j.Uniform1i(de),u_is_size_feature_constant:new j.Uniform1i(de),u_size_t:new j.Uniform1f(de),u_size:new j.Uniform1f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_rotate_symbol:new j.Uniform1i(de),u_aspect_ratio:new j.Uniform1f(de),u_fade_change:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_label_plane_matrix:new j.UniformMatrix4f(de),u_coord_matrix:new j.UniformMatrix4f(de),u_is_text:new j.Uniform1i(de),u_pitch_with_map:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_camera_forward:new j.Uniform3f(de),u_tile_matrix:new j.UniformMatrix4f(de),u_up_vector:new j.Uniform3f(de),u_ecef_origin:new j.Uniform3f(de),u_texture:new j.Uniform1i(de)}),symbolSDF:de=>({u_is_size_zoom_constant:new j.Uniform1i(de),u_is_size_feature_constant:new j.Uniform1i(de),u_size_t:new j.Uniform1f(de),u_size:new j.Uniform1f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_rotate_symbol:new j.Uniform1i(de),u_aspect_ratio:new j.Uniform1f(de),u_fade_change:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_label_plane_matrix:new j.UniformMatrix4f(de),u_coord_matrix:new j.UniformMatrix4f(de),u_is_text:new j.Uniform1i(de),u_pitch_with_map:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_texture:new j.Uniform1i(de),u_gamma_scale:new j.Uniform1f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_tile_id:new j.Uniform3f(de),u_zoom_transition:new j.Uniform1f(de),u_inv_rot_matrix:new j.UniformMatrix4f(de),u_merc_center:new j.Uniform2f(de),u_camera_forward:new j.Uniform3f(de),u_tile_matrix:new j.UniformMatrix4f(de),u_up_vector:new j.Uniform3f(de),u_ecef_origin:new j.Uniform3f(de),u_is_halo:new j.Uniform1i(de)}),symbolTextAndIcon:de=>({u_is_size_zoom_constant:new j.Uniform1i(de),u_is_size_feature_constant:new j.Uniform1i(de),u_size_t:new j.Uniform1f(de),u_size:new j.Uniform1f(de),u_camera_to_center_distance:new j.Uniform1f(de),u_rotate_symbol:new j.Uniform1i(de),u_aspect_ratio:new j.Uniform1f(de),u_fade_change:new j.Uniform1f(de),u_matrix:new j.UniformMatrix4f(de),u_label_plane_matrix:new j.UniformMatrix4f(de),u_coord_matrix:new j.UniformMatrix4f(de),u_is_text:new j.Uniform1i(de),u_pitch_with_map:new j.Uniform1i(de),u_texsize:new j.Uniform2f(de),u_texsize_icon:new j.Uniform2f(de),u_texture:new j.Uniform1i(de),u_texture_icon:new j.Uniform1i(de),u_gamma_scale:new j.Uniform1f(de),u_device_pixel_ratio:new j.Uniform1f(de),u_is_halo:new j.Uniform1i(de)}),background:de=>({u_matrix:new j.UniformMatrix4f(de),u_opacity:new j.Uniform1f(de),u_color:new j.UniformColor(de)}),backgroundPattern:de=>({u_matrix:new j.UniformMatrix4f(de),u_opacity:new j.Uniform1f(de),u_image:new j.Uniform1i(de),u_pattern_tl_a:new j.Uniform2f(de),u_pattern_br_a:new j.Uniform2f(de),u_pattern_tl_b:new j.Uniform2f(de),u_pattern_br_b:new j.Uniform2f(de),u_texsize:new j.Uniform2f(de),u_mix:new j.Uniform1f(de),u_pattern_size_a:new j.Uniform2f(de),u_pattern_size_b:new j.Uniform2f(de),u_scale_a:new j.Uniform1f(de),u_scale_b:new j.Uniform1f(de),u_pixel_coord_upper:new j.Uniform2f(de),u_pixel_coord_lower:new j.Uniform2f(de),u_tile_units_to_pixels:new j.Uniform1f(de)}),terrainRaster:Ds,terrainDepth:Ds,skybox:de=>({u_matrix:new j.UniformMatrix4f(de),u_sun_direction:new j.Uniform3f(de),u_cubemap:new j.Uniform1i(de),u_opacity:new j.Uniform1f(de),u_temporal_offset:new j.Uniform1f(de)}),skyboxGradient:de=>({u_matrix:new j.UniformMatrix4f(de),u_color_ramp:new j.Uniform1i(de),u_center_direction:new j.Uniform3f(de),u_radius:new j.Uniform1f(de),u_opacity:new j.Uniform1f(de),u_temporal_offset:new j.Uniform1f(de)}),skyboxCapture:de=>({u_matrix_3f:new j.UniformMatrix3f(de),u_sun_direction:new j.Uniform3f(de),u_sun_intensity:new j.Uniform1f(de),u_color_tint_r:new j.Uniform4f(de),u_color_tint_m:new j.Uniform4f(de),u_luminance:new j.Uniform1f(de)}),globeRaster:de=>({u_proj_matrix:new j.UniformMatrix4f(de),u_globe_matrix:new j.UniformMatrix4f(de),u_normalize_matrix:new j.UniformMatrix4f(de),u_merc_matrix:new j.UniformMatrix4f(de),u_zoom_transition:new j.Uniform1f(de),u_merc_center:new j.Uniform2f(de),u_image0:new j.Uniform1i(de),u_grid_matrix:new j.UniformMatrix3f(de),u_frustum_tl:new j.Uniform3f(de),u_frustum_tr:new j.Uniform3f(de),u_frustum_br:new j.Uniform3f(de),u_frustum_bl:new j.Uniform3f(de),u_globe_pos:new j.Uniform3f(de),u_globe_radius:new j.Uniform1f(de),u_viewport:new j.Uniform2f(de)}),globeAtmosphere:de=>({u_frustum_tl:new j.Uniform3f(de),u_frustum_tr:new j.Uniform3f(de),u_frustum_br:new j.Uniform3f(de),u_frustum_bl:new j.Uniform3f(de),u_horizon:new j.Uniform1f(de),u_transition:new j.Uniform1f(de),u_fadeout_range:new j.Uniform1f(de),u_color:new j.Uniform4f(de),u_high_color:new j.Uniform4f(de),u_space_color:new j.Uniform4f(de),u_star_intensity:new j.Uniform1f(de),u_star_density:new j.Uniform1f(de),u_star_size:new j.Uniform1f(de),u_temporal_offset:new j.Uniform1f(de),u_horizon_angle:new j.Uniform1f(de),u_rotation_matrix:new j.UniformMatrix4f(de)})};let Il;function uu(de,U,ee,be,Ie,Oe,Le){const Fe=de.context,Ge=Fe.gl,Ke=de.transform,Ye=de.useProgram("collisionBox"),ct=[];let mt=0,Mt=0;for(let Yt=0;Yt<be.length;Yt++){const Kt=be[Yt],Vt=U.getTile(Kt),Xt=Vt.getBucket(ee);if(!Xt)continue;const Ht=oo(Kt,Xt,Ke);let an=Ht;Ie[0]===0&&Ie[1]===0||(an=de.translatePosMatrix(Ht,Vt,Ie,Oe));const _n=Le?Xt.textCollisionBox:Xt.iconCollisionBox,Hn=Xt.collisionCircleArray;if(Hn.length>0){const dn=j.create(),Rn=an;j.mul(dn,Xt.placementInvProjMatrix,Ke.glCoordMatrix),j.mul(dn,dn,Xt.placementViewportMatrix),ct.push({circleArray:Hn,circleOffset:Mt,transform:Rn,invTransform:dn,projection:Xt.getProjection()}),mt+=Hn.length/4,Mt=mt}_n&&(de.terrain&&de.terrain.setupElevationDraw(Vt,Ye),Ye.draw(Fe,Ge.LINES,j.DepthMode.disabled,j.StencilMode.disabled,de.colorModeForRenderPass(),j.CullFaceMode.disabled,_c(an,Ke,Vt,Xt.getProjection()),ee.id,_n.layoutVertexBuffer,_n.indexBuffer,_n.segments,null,Ke.zoom,null,[_n.collisionVertexBuffer,_n.collisionVertexBufferExt]))}if(!Le||!ct.length)return;const At=de.useProgram("collisionCircle"),Tt=new j.StructArrayLayout2f1f2i16;Tt.resize(4*mt),Tt._trim();let kt=0;for(const Yt of ct)for(let Kt=0;Kt<Yt.circleArray.length/4;Kt++){const Vt=4*Kt,Xt=Yt.circleArray[Vt+0],Ht=Yt.circleArray[Vt+1],an=Yt.circleArray[Vt+2],_n=Yt.circleArray[Vt+3];Tt.emplace(kt++,Xt,Ht,an,_n,0),Tt.emplace(kt++,Xt,Ht,an,_n,1),Tt.emplace(kt++,Xt,Ht,an,_n,2),Tt.emplace(kt++,Xt,Ht,an,_n,3)}(!Il||Il.length<2*mt)&&(Il=function(Yt){const Kt=2*Yt,Vt=new j.StructArrayLayout3ui6;Vt.resize(Kt),Vt._trim();for(let Xt=0;Xt<Kt;Xt++){const Ht=6*Xt;Vt.uint16[Ht+0]=4*Xt+0,Vt.uint16[Ht+1]=4*Xt+1,Vt.uint16[Ht+2]=4*Xt+2,Vt.uint16[Ht+3]=4*Xt+2,Vt.uint16[Ht+4]=4*Xt+3,Vt.uint16[Ht+5]=4*Xt+0}return Vt}(mt));const wt=Fe.createIndexBuffer(Il,!0),$t=Fe.createVertexBuffer(Tt,j.collisionCircleLayout.members,!0);for(const Yt of ct){const Kt={u_matrix:Yt.transform,u_inv_matrix:Yt.invTransform,u_camera_to_center_distance:(Pt=Ke).getCameraToCenterDistance(Yt.projection),u_viewport_size:[Pt.width,Pt.height]};At.draw(Fe,Ge.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,de.colorModeForRenderPass(),j.CullFaceMode.disabled,Kt,ee.id,$t,wt,j.SegmentVector.simpleSegment(0,2*Yt.circleOffset,Yt.circleArray.length,Yt.circleArray.length/2),null,Ke.zoom)}var Pt;$t.destroy(),wt.destroy()}const hu=j.create();function yc(de,U,ee,be,Ie,Oe){const{horizontalAlign:Le,verticalAlign:Fe}=j.getAnchorAlignment(de),Ge=-(Le-.5)*U,Ke=-(Fe-.5)*ee,Ye=j.evaluateVariableOffset(de,be);return new j.pointGeometry((Ge/Ie+Ye[0])*Oe,(Ke/Ie+Ye[1])*Oe)}function vc(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye){const ct=de.text.placedSymbolArray,mt=de.text.dynamicLayoutVertexArray,Mt=de.icon.dynamicLayoutVertexArray,At={},Tt=ao(Fe,de.getProjection(),Oe),kt=Oe.elevation,wt=de.getProjection().upVectorScale(Fe.canonical,Oe.center.lat,Oe.worldSize);mt.clear();for(let $t=0;$t<ct.length;$t++){const Pt=ct.get($t),Yt=de.allowVerticalPlacement&&!Pt.placedOrientation,Kt=Pt.hidden||!Pt.crossTileID||Yt?null:be[Pt.crossTileID];if(Kt){const Vt=new j.pointGeometry(Pt.tileAnchorX,Pt.tileAnchorY),Xt=de.getProjection().upVector(Fe.canonical,Vt.x,Vt.y),Ht=kt?kt.getAtTileOffset(Fe,Vt.x,Vt.y):0,an=Ir([Pt.projectedAnchorX+Ht*Xt[0]*wt.metersToTile,Pt.projectedAnchorY+Ht*Xt[1]*wt.metersToTile,Pt.projectedAnchorZ+Ht*Xt[2]*wt.metersToTile],ee?Tt:Le),_n=Ts(Oe.getCameraToCenterDistance(de.getProjection()),an.signedDistanceFromCamera);let Hn=Ie.evaluateSizeForFeature(de.textSizeData,Ke,Pt)*_n/j.ONE_EM;ee&&(Hn*=de.tilePixelRatio/Ge);const{width:dn,height:Rn,anchor:Fn,textOffset:Qn,textScale:An}=Kt,Wn=yc(Fn,dn,Rn,Qn,An,Hn);let Dn;if(ee){const er=Vt.add(Wn),{x:dr,y:gr,z:Tr}=de.getProjection().projectTilePoint(er.x,er.y,Fe.canonical);Dn=Ir([dr+Ht*Xt[0]*wt.metersToTile,gr+Ht*Xt[1]*wt.metersToTile,Tr+Ht*Xt[2]*wt.metersToTile],Le).point}else{const er=U?Wn.rotate(-Oe.angle):Wn;Dn=[an.point[0]+er.x,an.point[1]+er.y,0]}const ir=de.allowVerticalPlacement&&Pt.placedOrientation===j.WritingMode.vertical?Math.PI/2:0;for(let er=0;er<Pt.numGlyphs;er++)j.addDynamicAttributes(mt,Dn[0],Dn[1],Dn[2],ir);Ye&&Pt.associatedIconIndex>=0&&(At[Pt.associatedIconIndex]={shiftedAnchor:Dn,angle:ir})}else da(Pt.numGlyphs,mt)}if(Ye){Mt.clear();const $t=de.icon.placedSymbolArray;for(let Pt=0;Pt<$t.length;Pt++){const Yt=$t.get(Pt);if(Yt.hidden)da(Yt.numGlyphs,Mt);else{const Kt=At[Pt];if(Kt)for(let Vt=0;Vt<Yt.numGlyphs;Vt++)j.addDynamicAttributes(Mt,Kt.shiftedAnchor[0],Kt.shiftedAnchor[1],Kt.shiftedAnchor[2],Kt.angle);else da(Yt.numGlyphs,Mt)}}de.icon.dynamicLayoutVertexBuffer.updateData(Mt)}de.text.dynamicLayoutVertexBuffer.updateData(mt)}function du(de,U,ee){return ee.iconsInText&&U?"symbolTextAndIcon":de?"symbolSDF":"symbolIcon"}function Ns(de,U,ee,be,Ie,Oe,Le,Fe,Ge,Ke,Ye,ct){const mt=de.context,Mt=mt.gl,At=de.transform,Tt=Fe==="map",kt=Ge==="map",wt=Tt&&ee.layout.get("symbol-placement")!=="point",$t=Tt&&!kt&&!wt,Pt=ee.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Yt=!1;const Kt=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),Vt=[j.mercatorXfromLng(At.center.lng),j.mercatorYfromLat(At.center.lat)],Xt=ee.layout.get("text-variable-anchor"),Ht=At.projection.name==="globe",an=[],_n=[0,-1,0];let Hn=_n;!Ht&&!At.mercatorFromTransition||Tt||(Hn=function(dn){const Rn=dn._camera.getWorldToCamera(dn.worldSize,1),Fn=j.multiply([],Rn,dn.globeMatrix);j.invert(Fn,Fn);const Qn=[0,0,0],An=[0,1,0,0];return j.transformMat4$1(An,An,Fn),Qn[0]=An[0],Qn[1]=An[1],Qn[2]=An[2],j.normalize(Qn,Qn),Qn}(At));for(const dn of be){const Rn=U.getTile(dn),Fn=Rn.getBucket(ee);if(!Fn||Fn.projection.name==="mercator"&&Ht)continue;const Qn=Ie?Fn.text:Fn.icon;if(!Qn||Fn.fullyClipped||!Qn.segments.get().length)continue;const An=Qn.programConfigurations.get(ee.id),Wn=Ie||Fn.sdfIcons,Dn=Ie?Fn.textSizeData:Fn.iconSizeData,ir=kt||At.pitch!==0,er=j.evaluateSizeForZoom(Dn,At.zoom);let dr,gr,Tr,Ur,fr=[0,0],Cr=null;if(Ie){if(gr=Rn.glyphAtlasTexture,Tr=Mt.LINEAR,dr=Rn.glyphAtlasTexture.size,Fn.iconsInText){fr=Rn.imageAtlasTexture.size,Cr=Rn.imageAtlasTexture;const to=Dn.kind==="composite"||Dn.kind==="camera";Ur=ir||de.options.rotating||de.options.zooming||to?Mt.LINEAR:Mt.NEAREST}}else{const to=ee.layout.get("icon-size").constantOr(0)!==1||Fn.iconsNeedLinear;gr=Rn.imageAtlasTexture,Tr=Wn||de.options.rotating||de.options.zooming||to||ir?Mt.LINEAR:Mt.NEAREST,dr=Rn.imageAtlasTexture.size}const Wr=Fn.projection.name==="globe",li=Wr?Hn:_n,bi=Wr?j.globeToMercatorTransition(At.zoom):0,ii=ao(dn,Fn.getProjection(),At),Hi=At.calculatePixelsToTileUnitsMatrix(Rn),Eo=Pr(ii,Rn.tileID.canonical,kt,Tt,At,Fn.getProjection(),Hi),ia=de.terrain&&kt&&wt?j.invert(j.create(),Eo):hu,fi=Po(ii,Rn.tileID.canonical,kt,Tt,At,Fn.getProjection(),Hi),yi=Xt&&Fn.hasTextData(),Rr=ee.layout.get("icon-text-fit")!=="none"&&yi&&Fn.hasIconData();if(wt){const to=At.elevation,La=to?to.getAtTileOffsetFunc(dn,At.center.lat,At.worldSize,Fn.getProjection()):il=>[0,0,0],Go=Fr(ii,Rn.tileID.canonical,kt,Tt,At,Fn.getProjection(),Hi);As(Fn,ii,de,Ie,Go,fi,kt,Ke,La,dn)}const Ri=wt||Ie&&Xt||Rr,$i=de.translatePosMatrix(ii,Rn,Oe,Le),ci=Ri?hu:Eo,Ki=de.translatePosMatrix(fi,Rn,Oe,Le,!0),$a=Fn.getProjection().createInversionMatrix(At,dn.canonical),eo=[];de.terrain&&kt&&eo.push("PITCH_WITH_MAP_TERRAIN"),Wr&&eo.push("PROJECTION_GLOBE_VIEW"),Ri&&eo.push("PROJECTED_POS_ON_VIEWPORT");const mo=Wn&&ee.paint.get(Ie?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let za;za=Wn?Fn.iconsInText?Ia(Dn.kind,er,$t,kt,de,$i,ci,Ki,dr,fr,dn,bi,Vt,$a,li,Fn.getProjection()):gc(Dn.kind,er,$t,kt,de,$i,ci,Ki,Ie,dr,!0,dn,bi,Vt,$a,li,Fn.getProjection()):Qa(Dn.kind,er,$t,kt,de,$i,ci,Ki,Ie,dr,dn,bi,Vt,$a,li,Fn.getProjection());const Da={program:de.useProgram(du(Wn,Ie,Fn),An,eo),buffers:Qn,uniformValues:za,atlasTexture:gr,atlasTextureIcon:Cr,atlasInterpolation:Tr,atlasInterpolationIcon:Ur,isSDF:Wn,hasHalo:mo,tile:Rn,labelPlaneMatrixInv:ia};if(Pt&&Fn.canOverlap){Yt=!0;const to=Qn.segments.get();for(const La of to)an.push({segments:new j.SegmentVector([La]),sortKey:La.sortKey,state:Da})}else an.push({segments:Qn.segments,sortKey:0,state:Da})}Yt&&an.sort((dn,Rn)=>dn.sortKey-Rn.sortKey);for(const dn of an){const Rn=dn.state;if(de.terrain&&de.terrain.setupElevationDraw(Rn.tile,Rn.program,{useDepthForOcclusion:!Ht,labelPlaneMatrixInv:Rn.labelPlaneMatrixInv}),mt.activeTexture.set(Mt.TEXTURE0),Rn.atlasTexture.bind(Rn.atlasInterpolation,Mt.CLAMP_TO_EDGE),Rn.atlasTextureIcon&&(mt.activeTexture.set(Mt.TEXTURE1),Rn.atlasTextureIcon&&Rn.atlasTextureIcon.bind(Rn.atlasInterpolationIcon,Mt.CLAMP_TO_EDGE)),Rn.isSDF){const Fn=Rn.uniformValues;Rn.hasHalo&&(Fn.u_is_halo=1,xc(Rn.buffers,dn.segments,ee,de,Rn.program,Kt,Ye,ct,Fn)),Fn.u_is_halo=0}xc(Rn.buffers,dn.segments,ee,de,Rn.program,Kt,Ye,ct,Rn.uniformValues)}}function xc(de,U,ee,be,Ie,Oe,Le,Fe,Ge){const Ke=be.context,Ye=[de.dynamicLayoutVertexBuffer,de.opacityVertexBuffer,de.globeExtVertexBuffer];Ie.draw(Ke,Ke.gl.TRIANGLES,Oe,Le,Fe,j.CullFaceMode.disabled,Ge,ee.id,de.layoutVertexBuffer,de.indexBuffer,U,ee.paint,be.transform.zoom,de.programConfigurations.get(ee.id),Ye)}function Pl(de,U,ee,be,Ie,Oe,Le){const Fe=de.context.gl,Ge=ee.paint.get("fill-pattern"),Ke=Ge&&Ge.constantOr(1),Ye=ee.getCrossfadeParameters();let ct,mt,Mt,At,Tt;Le?(mt=Ke&&!ee.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ct=Fe.LINES):(mt=Ke?"fillPattern":"fill",ct=Fe.TRIANGLES);for(const kt of be){const wt=U.getTile(kt);if(Ke&&!wt.patternsLoaded())continue;const $t=wt.getBucket(ee);if(!$t)continue;de.prepareDrawTile();const Pt=$t.programConfigurations.get(ee.id),Yt=de.useProgram(mt,Pt);Ke&&(de.context.activeTexture.set(Fe.TEXTURE0),wt.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Pt.updatePaintBuffers(Ye));const Kt=Ge.constantOr(null);if(Kt&&wt.imageAtlas){const Xt=wt.imageAtlas,Ht=Xt.patternPositions[Kt.to.toString()],an=Xt.patternPositions[Kt.from.toString()];Ht&&an&&Pt.setConstantPatternPositions(Ht,an)}const Vt=de.translatePosMatrix(kt.projMatrix,wt,ee.paint.get("fill-translate"),ee.paint.get("fill-translate-anchor"));if(Le){At=$t.indexBuffer2,Tt=$t.segments2;const Xt=de.terrain&&de.terrain.renderingToTexture?de.terrain.drapeBufferSize:[Fe.drawingBufferWidth,Fe.drawingBufferHeight];Mt=mt==="fillOutlinePattern"&&Ke?Ma(Vt,de,Ye,wt,Xt):Vo(Vt,Xt)}else At=$t.indexBuffer,Tt=$t.segments,Mt=Ke?kl(Vt,de,Ye,wt):Bs(Vt);de.prepareDrawProgram(de.context,Yt,kt.toUnwrapped()),Yt.draw(de.context,ct,Ie,de.stencilModeForClipping(kt),Oe,j.CullFaceMode.disabled,Mt,ee.id,$t.layoutVertexBuffer,At,Tt,ee.paint,de.transform.zoom,Pt)}}function Qo(de,U,ee,be,Ie,Oe,Le){const Fe=de.context,Ge=Fe.gl,Ke=de.transform,Ye=ee.paint.get("fill-extrusion-pattern"),ct=Ye.constantOr(1),mt=ee.getCrossfadeParameters(),Mt=ee.paint.get("fill-extrusion-opacity"),At=[ee.paint.get("fill-extrusion-ambient-occlusion-intensity"),ee.paint.get("fill-extrusion-ambient-occlusion-radius")],Tt=ee.layout.get("fill-extrusion-edge-radius"),kt=Ke.projection.name==="globe"?j.fillExtrusionHeightLift():0,wt=Ke.projection.name==="globe",$t=wt?j.globeToMercatorTransition(Ke.zoom):0,Pt=[j.mercatorXfromLng(Ke.center.lng),j.mercatorYfromLat(Ke.center.lat)],Yt=[];wt&&(Yt.push("PROJECTION_GLOBE_VIEW"),de.style.terrainSetForDrapingOnly()&&Yt.push("TERRAIN")),At[0]>0&&Yt.push("FAUX_AO");for(const Kt of be){const Vt=U.getTile(Kt),Xt=Vt.getBucket(ee);if(!Xt||Xt.projection.name!==Ke.projection.name)continue;const Ht=Xt.programConfigurations.get(ee.id),an=de.useProgram(ct?"fillExtrusionPattern":"fillExtrusion",Ht,Yt);if(de.terrain){const An=de.terrain;if(de.style.terrainSetForDrapingOnly())An.setupElevationDraw(Vt,an,{useMeterToDem:!0});else{if(!Xt.enableTerrain)continue;if(An.setupElevationDraw(Vt,an,{useMeterToDem:!0}),js(Fe,U,Kt,Xt,ee,An),!Xt.centroidVertexBuffer){const Wn=an.attributes.a_centroid_pos;Wn!==void 0&&Ge.vertexAttrib2f(Wn,0,0)}}}ct&&(de.context.activeTexture.set(Ge.TEXTURE0),Vt.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),Ht.updatePaintBuffers(mt));const _n=Ye.constantOr(null);if(_n&&Vt.imageAtlas){const An=Vt.imageAtlas,Wn=An.patternPositions[_n.to.toString()],Dn=An.patternPositions[_n.from.toString()];Wn&&Dn&&Ht.setConstantPatternPositions(Wn,Dn)}const Hn=de.translatePosMatrix(Kt.projMatrix,Vt,ee.paint.get("fill-extrusion-translate"),ee.paint.get("fill-extrusion-translate-anchor")),dn=Ke.projection.createInversionMatrix(Ke,Kt.canonical),Rn=ee.paint.get("fill-extrusion-vertical-gradient"),Fn=ct?ru(Hn,de,Rn,Mt,At,Tt,Kt,mt,Vt,kt,$t,Pt,dn):Ja(Hn,de,Rn,Mt,At,Tt,Kt,kt,$t,Pt,dn);de.prepareDrawProgram(Fe,an,Kt.toUnwrapped());const Qn=[];de.terrain&&Qn.push(Xt.centroidVertexBuffer),wt&&Qn.push(Xt.layoutVertexExtBuffer),an.draw(Fe,Fe.gl.TRIANGLES,Ie,Oe,Le,j.CullFaceMode.backCCW,Fn,ee.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,ee.paint,de.transform.zoom,Ht,Qn)}}function js(de,U,ee,be,Ie,Oe){const Le=[wt=>{let $t=wt.canonical.x-1,Pt=wt.wrap;return $t<0&&($t=(1<<wt.canonical.z)-1,Pt--),new j.OverscaledTileID(wt.overscaledZ,Pt,wt.canonical.z,$t,wt.canonical.y)},wt=>{let $t=wt.canonical.x+1,Pt=wt.wrap;return $t===1<<wt.canonical.z&&($t=0,Pt++),new j.OverscaledTileID(wt.overscaledZ,Pt,wt.canonical.z,$t,wt.canonical.y)},wt=>new j.OverscaledTileID(wt.overscaledZ,wt.wrap,wt.canonical.z,wt.canonical.x,(wt.canonical.y===0?1<<wt.canonical.z:wt.canonical.y)-1),wt=>new j.OverscaledTileID(wt.overscaledZ,wt.wrap,wt.canonical.z,wt.canonical.x,wt.canonical.y===(1<<wt.canonical.z)-1?0:wt.canonical.y+1)],Fe=wt=>{const $t=U.getSource().minzoom,Pt=Kt=>{const Vt=U.getTileByID(Kt);if(Vt&&Vt.hasData())return Vt.getBucket(Ie)},Yt=[0,-1,1];for(const Kt of Yt){if(wt.overscaledZ+Kt<$t)continue;const Vt=Pt(wt.calculateScaledKey(wt.overscaledZ+Kt));if(Vt)return Vt}},Ge=[0,0,0],Ke=(wt,$t)=>(Ge[0]=Math.min(wt.min.y,$t.min.y),Ge[1]=Math.max(wt.max.y,$t.max.y),Ge[2]=j.EXTENT-$t.min.x>wt.max.x?$t.min.x-j.EXTENT:wt.max.x,Ge),Ye=(wt,$t)=>(Ge[0]=Math.min(wt.min.x,$t.min.x),Ge[1]=Math.max(wt.max.x,$t.max.x),Ge[2]=j.EXTENT-$t.min.y>wt.max.y?$t.min.y-j.EXTENT:wt.max.y,Ge),ct=[(wt,$t)=>Ke(wt,$t),(wt,$t)=>Ke($t,wt),(wt,$t)=>Ye(wt,$t),(wt,$t)=>Ye($t,wt)],mt=new j.pointGeometry(0,0);let Mt,At,Tt;const kt=(wt,$t,Pt,Yt,Kt)=>{const Vt=[[Yt?Pt:wt,Yt?wt:Pt,0],[Yt?Pt:$t,Yt?$t:Pt,0]],Xt=Kt<0?j.EXTENT+Kt:Kt,Ht=[Yt?Xt:(wt+$t)/2,Yt?(wt+$t)/2:Xt,0];return Pt===0&&Kt<0||Pt!==0&&Kt>0?Oe.getForTilePoints(Tt,[Ht],!0,At):Vt.push(Ht),Oe.getForTilePoints(ee,Vt,!0,Mt),Math.max(Vt[0][2],Vt[1][2],Ht[2])/Oe.exaggeration()};for(let wt=0;wt<4;wt++){const $t=(wt<2?1:5)-wt,Pt=be.borders[wt];if(Pt.length===0)continue;const Yt=Tt=Le[wt](ee),Kt=Fe(Yt);if(!(Kt&&Kt instanceof j.FillExtrusionBucket&&Kt.enableTerrain)||be.borderDoneWithNeighborZ[wt]===Kt.canonical.z&&Kt.borderDoneWithNeighborZ[$t]===be.canonical.z||(At=Oe.findDEMTileFor(Yt),!At||!At.dem))continue;if(!Mt){const an=Oe.findDEMTileFor(ee);if(!an||!an.dem)return;Mt=an}const Vt=Kt.borders[$t];let Xt=0;const Ht=Kt.borderDoneWithNeighborZ[$t]!==be.canonical.z;if(be.canonical.z===Kt.canonical.z){for(let an=0;an<Pt.length;an++){const _n=be.featuresOnBorder[Pt[an]],Hn=_n.borders[wt];let dn;for(;Xt<Vt.length&&(dn=Kt.featuresOnBorder[Vt[Xt]],!(dn.borders[$t][1]>Hn[0]+3));)Ht&&Kt.encodeCentroid(void 0,dn,!1),Xt++;if(dn&&Xt<Vt.length){const Rn=Xt;let Fn=0;for(;!(dn.borders[$t][0]>Hn[1]-3)&&(Fn++,++Xt!==Vt.length);)dn=Kt.featuresOnBorder[Vt[Xt]];if(dn=Kt.featuresOnBorder[Vt[Rn]],_n.intersectsCount()>1||dn.intersectsCount()>1||Fn!==1){Fn!==1&&(Xt=Rn),be.encodeCentroid(void 0,_n,!1),Ht&&Kt.encodeCentroid(void 0,dn,!1);continue}const Qn=ct[wt](_n,dn),An=wt%2?j.EXTENT-1:0;mt.x=kt(Qn[0],Math.min(j.EXTENT-1,Qn[1]),An,wt<2,Qn[2]),mt.y=0,be.encodeCentroid(mt,_n,!1),Ht&&Kt.encodeCentroid(mt,dn,!1)}else be.encodeCentroid(void 0,_n,!1)}be.borderDoneWithNeighborZ[wt]=Kt.canonical.z,be.needsCentroidUpdate=!0,Ht&&(Kt.borderDoneWithNeighborZ[$t]=be.canonical.z,Kt.needsCentroidUpdate=!0)}else{for(const an of Pt)be.encodeCentroid(void 0,be.featuresOnBorder[an],!1);if(Ht){for(const an of Vt)Kt.encodeCentroid(void 0,Kt.featuresOnBorder[an],!1);Kt.borderDoneWithNeighborZ[$t]=be.canonical.z,Kt.needsCentroidUpdate=!0}be.borderDoneWithNeighborZ[wt]=Kt.canonical.z,be.needsCentroidUpdate=!0}}(be.needsCentroidUpdate||!be.centroidVertexBuffer&&be.centroidVertexArray.length!==0)&&be.uploadCentroid(de)}const pu=new j.Color(1,0,0,1),Pa=new j.Color(0,1,0,1),es=new j.Color(0,0,1,1),fu=new j.Color(1,0,1,1),bc=new j.Color(0,1,1,1);function Jr(de,U,ee){const be=de.context,Ie=de.transform,Oe=be.gl,Le=Ie.projection.name==="globe",Fe=Le?["PROJECTION_GLOBE_VIEW"]:null;let Ge=ee.projMatrix;if(Le&&j.globeToMercatorTransition(Ie.zoom)>0){const _n=j.transitionTileAABBinECEF(ee.canonical,Ie),Hn=j.globeDenormalizeECEF(_n);Ge=j.multiply(new Float32Array(16),Ie.globeMatrix,Hn),j.multiply(Ge,Ie.projMatrix,Ge)}const Ke=de.useProgram("debug",null,Fe),Ye=U.getTileByID(ee.key);de.terrain&&de.terrain.setupElevationDraw(Ye,Ke);const ct=j.DepthMode.disabled,mt=j.StencilMode.disabled,Mt=de.colorModeForRenderPass(),At="$debug";be.activeTexture.set(Oe.TEXTURE0),de.emptyTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),Le?Ye._makeGlobeTileDebugBuffers(de.context,Ie):Ye._makeDebugTileBoundsBuffers(de.context,Ie.projection);const Tt=Ye._tileDebugBuffer||de.debugBuffer,kt=Ye._tileDebugIndexBuffer||de.debugIndexBuffer,wt=Ye._tileDebugSegments||de.debugSegments;Ke.draw(be,Oe.LINE_STRIP,ct,mt,Mt,j.CullFaceMode.disabled,au(Ge,j.Color.red),At,Tt,kt,wt,null,null,null,[Ye._globeTileDebugBorderBuffer]);const $t=Ye.latestRawTileData,Pt=Math.floor(($t&&$t.byteLength||0)/1024),Yt=U.getTile(ee).tileSize,Kt=512/Math.min(Yt,512)*(ee.overscaledZ/Ie.zoom)*.5;let Vt=ee.canonical.toString();ee.overscaledZ!==ee.canonical.z&&(Vt+=` => ${ee.overscaledZ}`),Vt+=` ${Pt}kb`,function(_n,Hn){_n.initDebugOverlayCanvas();const dn=_n.debugOverlayCanvas,Rn=_n.context.gl,Fn=_n.debugOverlayCanvas.getContext("2d");Fn.clearRect(0,0,dn.width,dn.height),Fn.shadowColor="white",Fn.shadowBlur=2,Fn.lineWidth=1.5,Fn.strokeStyle="white",Fn.textBaseline="top",Fn.font="bold 36px Open Sans, sans-serif",Fn.fillText(Hn,5,5),Fn.strokeText(Hn,5,5),_n.debugOverlayTexture.update(dn),_n.debugOverlayTexture.bind(Rn.LINEAR,Rn.CLAMP_TO_EDGE)}(de,Vt);const Xt=Ye._tileDebugTextBuffer||de.debugBuffer,Ht=Ye._tileDebugTextIndexBuffer||de.quadTriangleIndexBuffer,an=Ye._tileDebugTextSegments||de.debugSegments;Ke.draw(be,Oe.TRIANGLES,ct,mt,j.ColorMode.alphaBlended,j.CullFaceMode.disabled,au(Ge,j.Color.transparent,Kt),At,Xt,Ht,an,null,null,null,[Ye._globeTileDebugTextBuffer])}function Us(de,U,ee,be){Vs(de,0,U+ee/2,de.transform.width,ee,be)}function _u(de,U,ee,be){Vs(de,U-ee/2,0,ee,de.transform.height,be)}function Vs(de,U,ee,be,Ie,Oe){const Le=de.context,Fe=Le.gl;Fe.enable(Fe.SCISSOR_TEST),Fe.scissor(U*j.exported.devicePixelRatio,ee*j.exported.devicePixelRatio,be*j.exported.devicePixelRatio,Ie*j.exported.devicePixelRatio),Le.clear({color:Oe}),Fe.disable(Fe.SCISSOR_TEST)}const Gs=j.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:lh}=Gs;function ma(de,U,ee,be){de.emplaceBack(U,ee,be)}class wc{constructor(U){this.vertexArray=new j.StructArrayLayout3f12,this.indices=new j.StructArrayLayout3ui6,ma(this.vertexArray,-1,-1,1),ma(this.vertexArray,1,-1,1),ma(this.vertexArray,-1,1,1),ma(this.vertexArray,1,1,1),ma(this.vertexArray,-1,-1,-1),ma(this.vertexArray,1,-1,-1),ma(this.vertexArray,-1,1,-1),ma(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=U.createVertexBuffer(this.vertexArray,lh),this.indexBuffer=U.createIndexBuffer(this.indices),this.segment=j.SegmentVector.simpleSegment(0,0,36,12)}}function ts(de,U,ee,be,Ie,Oe){const Le=de.gl,Fe=U.paint.get("sky-atmosphere-color"),Ge=U.paint.get("sky-atmosphere-halo-color"),Ke=U.paint.get("sky-atmosphere-sun-intensity"),Ye=((ct,mt,Mt,At,Tt)=>({u_matrix_3f:ct,u_sun_direction:mt,u_sun_intensity:Mt,u_color_tint_r:[At.r,At.g,At.b,At.a],u_color_tint_m:[Tt.r,Tt.g,Tt.b,Tt.a],u_luminance:5e-5}))(j.fromMat4(j.create$1(),be),Ie,Ke,Fe,Ge);Le.framebufferTexture2D(Le.FRAMEBUFFER,Le.COLOR_ATTACHMENT0,Le.TEXTURE_CUBE_MAP_POSITIVE_X+Oe,U.skyboxTexture,0),ee.draw(de,Le.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,j.ColorMode.unblended,j.CullFaceMode.frontCW,Ye,"skyboxCapture",U.skyboxGeometry.vertexBuffer,U.skyboxGeometry.indexBuffer,U.skyboxGeometry.segment)}const Ec=j.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ol{constructor(U){const ee=new j.StructArrayLayout5f20;ee.emplaceBack(-1,1,1,0,0),ee.emplaceBack(1,1,1,1,0),ee.emplaceBack(1,-1,1,1,1),ee.emplaceBack(-1,-1,1,0,1);const be=new j.StructArrayLayout3ui6;be.emplaceBack(0,1,2),be.emplaceBack(2,3,0),this.vertexBuffer=U.createVertexBuffer(ee,Ec.members),this.indexBuffer=U.createIndexBuffer(be),this.segments=j.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const ns={symbol:function(de,U,ee,be,Ie){if(de.renderPass!=="translucent")return;const Oe=j.StencilMode.disabled,Le=de.colorModeForRenderPass();ee.layout.get("text-variable-anchor")&&function(Fe,Ge,Ke,Ye,ct,mt,Mt){const At=Ge.transform,Tt=ct==="map",kt=mt==="map";for(const wt of Fe){const $t=Ye.getTile(wt),Pt=$t.getBucket(Ke);if(!Pt||!Pt.text||!Pt.text.segments.get().length)continue;const Yt=j.evaluateSizeForZoom(Pt.textSizeData,At.zoom),Kt=ao(wt,Pt.getProjection(),At),Vt=At.calculatePixelsToTileUnitsMatrix($t),Xt=Pr(Kt,$t.tileID.canonical,kt,Tt,At,Pt.getProjection(),Vt),Ht=Ke.layout.get("icon-text-fit")!=="none"&&Pt.hasIconData();if(Yt){const an=Math.pow(2,At.zoom-$t.tileID.overscaledZ);vc(Pt,Tt,kt,Mt,j.symbolSize,At,Xt,wt,an,Yt,Ht)}}}(be,de,ee,U,ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),Ie),ee.paint.get("icon-opacity").constantOr(1)!==0&&Ns(de,U,ee,be,!1,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),ee.layout.get("icon-rotation-alignment"),ee.layout.get("icon-pitch-alignment"),ee.layout.get("icon-keep-upright"),Oe,Le),ee.paint.get("text-opacity").constantOr(1)!==0&&Ns(de,U,ee,be,!0,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),ee.layout.get("text-rotation-alignment"),ee.layout.get("text-pitch-alignment"),ee.layout.get("text-keep-upright"),Oe,Le),U.map.showCollisionBoxes&&(uu(de,U,ee,be,ee.paint.get("text-translate"),ee.paint.get("text-translate-anchor"),!0),uu(de,U,ee,be,ee.paint.get("icon-translate"),ee.paint.get("icon-translate-anchor"),!1))},circle:function(de,U,ee,be){if(de.renderPass!=="translucent")return;const Ie=ee.paint.get("circle-opacity"),Oe=ee.paint.get("circle-stroke-width"),Le=ee.paint.get("circle-stroke-opacity"),Fe=ee.layout.get("circle-sort-key").constantOr(1)!==void 0;if(Ie.constantOr(1)===0&&(Oe.constantOr(1)===0||Le.constantOr(1)===0))return;const Ge=de.context,Ke=Ge.gl,Ye=de.transform,ct=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),mt=j.StencilMode.disabled,Mt=de.colorModeForRenderPass(),At=Ye.projection.name==="globe",Tt=[j.mercatorXfromLng(Ye.center.lng),j.mercatorYfromLat(Ye.center.lat)],kt=[];for(let $t=0;$t<be.length;$t++){const Pt=be[$t],Yt=U.getTile(Pt),Kt=Yt.getBucket(ee);if(!Kt||Kt.projection.name!==Ye.projection.name)continue;const Vt=Kt.programConfigurations.get(ee.id),Xt=ou(ee);At&&Xt.push("PROJECTION_GLOBE_VIEW");const Ht=de.useProgram("circle",Vt,Xt),an=Kt.layoutVertexBuffer,_n=Kt.globeExtVertexBuffer,Hn=Kt.indexBuffer,dn=Ye.projection.createInversionMatrix(Ye,Pt.canonical),Rn={programConfiguration:Vt,program:Ht,layoutVertexBuffer:an,globeExtVertexBuffer:_n,indexBuffer:Hn,uniformValues:fc(de,Pt,Yt,dn,Tt,ee),tile:Yt};if(Fe){const Fn=Kt.segments.get();for(const Qn of Fn)kt.push({segments:new j.SegmentVector([Qn]),sortKey:Qn.sortKey,state:Rn})}else kt.push({segments:Kt.segments,sortKey:0,state:Rn})}Fe&&kt.sort(($t,Pt)=>$t.sortKey-Pt.sortKey);const wt={useDepthForOcclusion:!At};for(const $t of kt){const{programConfiguration:Pt,program:Yt,layoutVertexBuffer:Kt,globeExtVertexBuffer:Vt,indexBuffer:Xt,uniformValues:Ht,tile:an}=$t.state,_n=$t.segments;de.terrain&&de.terrain.setupElevationDraw(an,Yt,wt),de.prepareDrawProgram(Ge,Yt,an.tileID.toUnwrapped()),Yt.draw(Ge,Ke.TRIANGLES,ct,mt,Mt,j.CullFaceMode.disabled,Ht,ee.id,Kt,Xt,_n,ee.paint,Ye.zoom,Pt,[Vt])}},heatmap:function(de,U,ee,be){if(ee.paint.get("heatmap-opacity")!==0)if(de.renderPass==="offscreen"){const Ie=de.context,Oe=Ie.gl,Le=j.StencilMode.disabled,Fe=new j.ColorMode([Oe.ONE,Oe.ONE],j.Color.transparent,[!0,!0,!0,!0]);(function(Mt,At,Tt,kt){const wt=Mt.gl,$t=At.width*kt,Pt=At.height*kt;Mt.activeTexture.set(wt.TEXTURE1),Mt.viewport.set([0,0,$t,Pt]);let Yt=Tt.heatmapFbo;if(!Yt||Yt&&(Yt.width!==$t||Yt.height!==Pt)){Yt&&Yt.destroy();const Kt=wt.createTexture();wt.bindTexture(wt.TEXTURE_2D,Kt),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_S,wt.CLAMP_TO_EDGE),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_T,wt.CLAMP_TO_EDGE),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MIN_FILTER,wt.LINEAR),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MAG_FILTER,wt.LINEAR),Yt=Tt.heatmapFbo=Mt.createFramebuffer($t,Pt,!1),function(Vt,Xt,Ht,an,_n,Hn){const dn=Vt.gl;dn.texImage2D(dn.TEXTURE_2D,0,dn.RGBA,_n,Hn,0,dn.RGBA,Vt.extRenderToTextureHalfFloat?Vt.extTextureHalfFloat.HALF_FLOAT_OES:dn.UNSIGNED_BYTE,null),an.colorAttachment.set(Ht)}(Mt,0,Kt,Yt,$t,Pt)}else wt.bindTexture(wt.TEXTURE_2D,Yt.colorAttachment.get()),Mt.bindFramebuffer.set(Yt.framebuffer)})(Ie,de,ee,de.transform.projection.name==="globe"?.5:.25),Ie.clear({color:j.Color.transparent});const Ge=de.transform,Ke=Ge.projection.name==="globe",Ye=Ke?["PROJECTION_GLOBE_VIEW"]:null,ct=Ke?j.CullFaceMode.frontCCW:j.CullFaceMode.disabled,mt=[j.mercatorXfromLng(Ge.center.lng),j.mercatorYfromLat(Ge.center.lat)];for(let Mt=0;Mt<be.length;Mt++){const At=be[Mt];if(U.hasRenderableParent(At))continue;const Tt=U.getTile(At),kt=Tt.getBucket(ee);if(!kt||kt.projection.name!==Ge.projection.name)continue;const wt=kt.programConfigurations.get(ee.id),$t=de.useProgram("heatmap",wt,Ye),{zoom:Pt}=de.transform;de.terrain&&de.terrain.setupElevationDraw(Tt,$t),de.prepareDrawProgram(Ie,$t,At.toUnwrapped());const Yt=Ge.projection.createInversionMatrix(Ge,At.canonical);$t.draw(Ie,Oe.TRIANGLES,j.DepthMode.disabled,Le,Fe,ct,rh(de,At,Tt,Yt,mt,Pt,ee.paint.get("heatmap-intensity")),ee.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,ee.paint,de.transform.zoom,wt,Ke?[kt.globeExtVertexBuffer]:null)}Ie.viewport.set([0,0,de.width,de.height])}else de.renderPass==="translucent"&&(de.context.setColorMode(de.colorModeForRenderPass()),function(Ie,Oe){const Le=Ie.context,Fe=Le.gl,Ge=Oe.heatmapFbo;if(!Ge)return;Le.activeTexture.set(Fe.TEXTURE0),Fe.bindTexture(Fe.TEXTURE_2D,Ge.colorAttachment.get()),Le.activeTexture.set(Fe.TEXTURE1);let Ke=Oe.colorRampTexture;Ke||(Ke=Oe.colorRampTexture=new j.Texture(Le,Oe.colorRamp,Fe.RGBA)),Ke.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Ie.useProgram("heatmapTexture").draw(Le,Fe.TRIANGLES,j.DepthMode.disabled,j.StencilMode.disabled,Ie.colorModeForRenderPass(),j.CullFaceMode.disabled,((Ye,ct,mt,Mt)=>({u_image:0,u_color_ramp:1,u_opacity:ct.paint.get("heatmap-opacity")}))(0,Oe),Oe.id,Ie.viewportBuffer,Ie.quadTriangleIndexBuffer,Ie.viewportSegments,Oe.paint,Ie.transform.zoom)}(de,ee))},line:function(de,U,ee,be){if(de.renderPass!=="translucent")return;const Ie=ee.paint.get("line-opacity"),Oe=ee.paint.get("line-width");if(Ie.constantOr(1)===0||Oe.constantOr(1)===0)return;const Le=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),Fe=de.colorModeForRenderPass(),Ge=de.terrain&&de.terrain.renderingToTexture?1:j.exported.devicePixelRatio,Ke=ee.paint.get("line-dasharray"),Ye=Ke.constantOr(1),ct=ee.layout.get("line-cap"),mt=ee.paint.get("line-pattern"),Mt=mt.constantOr(1),At=ee.paint.get("line-gradient"),Tt=ee.getCrossfadeParameters(),kt=Mt?"linePattern":"line",wt=de.context,$t=wt.gl,Pt=(Kt=>{const Vt=[];Ml(Kt)&&Vt.push("RENDER_LINE_DASH"),Kt.paint.get("line-gradient")&&Vt.push("RENDER_LINE_GRADIENT");const Xt=Kt.paint.get("line-trim-offset");Xt[0]===0&&Xt[1]===0||Vt.push("RENDER_LINE_TRIM_OFFSET");const Ht=Kt.paint.get("line-pattern").constantOr(1),an=Kt.paint.get("line-opacity").constantOr(1)!==1;return!Ht&&an&&Vt.push("RENDER_LINE_ALPHA_DISCARD"),Vt})(ee);let Yt=Pt.includes("RENDER_LINE_ALPHA_DISCARD");de.terrain&&de.terrain.clipOrMaskOverlapStencilType()&&(Yt=!1);for(const Kt of be){const Vt=U.getTile(Kt);if(Mt&&!Vt.patternsLoaded())continue;const Xt=Vt.getBucket(ee);if(!Xt)continue;de.prepareDrawTile();const Ht=Xt.programConfigurations.get(ee.id),an=de.useProgram(kt,Ht,Pt),_n=mt.constantOr(null);if(_n&&Vt.imageAtlas){const Dn=Vt.imageAtlas,ir=Dn.patternPositions[_n.to.toString()],er=Dn.patternPositions[_n.from.toString()];ir&&er&&Ht.setConstantPatternPositions(ir,er)}const Hn=Ke.constantOr(null),dn=ct.constantOr(null);if(!Mt&&Hn&&dn&&Vt.lineAtlas){const Dn=Vt.lineAtlas,ir=Dn.getDash(Hn.to,dn),er=Dn.getDash(Hn.from,dn);ir&&er&&Ht.setConstantPatternPositions(ir,er)}let[Rn,Fn]=ee.paint.get("line-trim-offset");(dn==="round"||dn==="square")&&Rn!==Fn&&(Rn===0&&(Rn-=1),Fn===1&&(Fn+=1));const Qn=de.terrain?Kt.projMatrix:null,An=Mt?ih(de,Vt,ee,Tt,Qn,Ge):Sl(de,Vt,ee,Tt,Qn,Xt.lineClipsArray.length,Ge,[Rn,Fn]);if(At){const Dn=Xt.gradients[ee.id];let ir=Dn.texture;if(ee.gradientVersion!==Dn.version){let er=256;if(ee.stepInterpolant){const dr=U.getSource().maxzoom,gr=Kt.canonical.z===dr?Math.ceil(1<<de.transform.maxZoom-Kt.canonical.z):1;er=j.clamp(j.nextPowerOfTwo(Xt.maxLineLength/j.EXTENT*1024*gr),256,wt.maxTextureSize)}Dn.gradient=j.renderColorRamp({expression:ee.gradientExpression(),evaluationKey:"lineProgress",resolution:er,image:Dn.gradient||void 0,clips:Xt.lineClipsArray}),Dn.texture?Dn.texture.update(Dn.gradient):Dn.texture=new j.Texture(wt,Dn.gradient,$t.RGBA),Dn.version=ee.gradientVersion,ir=Dn.texture}wt.activeTexture.set($t.TEXTURE1),ir.bind(ee.stepInterpolant?$t.NEAREST:$t.LINEAR,$t.CLAMP_TO_EDGE)}Ye&&(wt.activeTexture.set($t.TEXTURE0),Vt.lineAtlasTexture.bind($t.LINEAR,$t.REPEAT),Ht.updatePaintBuffers(Tt)),Mt&&(wt.activeTexture.set($t.TEXTURE0),Vt.imageAtlasTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE),Ht.updatePaintBuffers(Tt)),de.prepareDrawProgram(wt,an,Kt.toUnwrapped());const Wn=Dn=>{an.draw(wt,$t.TRIANGLES,Le,Dn,Fe,j.CullFaceMode.disabled,An,ee.id,Xt.layoutVertexBuffer,Xt.indexBuffer,Xt.segments,ee.paint,de.transform.zoom,Ht,[Xt.layoutVertexBuffer2])};if(Yt){const Dn=de.stencilModeForClipping(Kt).ref;Dn===0&&de.terrain&&wt.clear({stencil:0});const ir={func:$t.EQUAL,mask:255};An.u_alpha_discard_threshold=.8,Wn(new j.StencilMode(ir,Dn,255,$t.KEEP,$t.KEEP,$t.INVERT)),An.u_alpha_discard_threshold=0,Wn(new j.StencilMode(ir,Dn,255,$t.KEEP,$t.KEEP,$t.KEEP))}else Wn(de.stencilModeForClipping(Kt))}Yt&&(de.resetStencilClippingMasks(),de.terrain&&wt.clear({stencil:0}))},fill:function(de,U,ee,be){const Ie=ee.paint.get("fill-color"),Oe=ee.paint.get("fill-opacity");if(Oe.constantOr(1)===0)return;const Le=de.colorModeForRenderPass(),Fe=ee.paint.get("fill-pattern"),Ge=de.opaquePassEnabledForLayer()&&!Fe.constantOr(1)&&Ie.constantOr(j.Color.transparent).a===1&&Oe.constantOr(0)===1?"opaque":"translucent";if(de.renderPass===Ge){const Ke=de.depthModeForSublayer(1,de.renderPass==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly);Pl(de,U,ee,be,Ke,Le,!1)}if(de.renderPass==="translucent"&&ee.paint.get("fill-antialias")){const Ke=de.depthModeForSublayer(ee.getPaintProperty("fill-outline-color")?2:0,j.DepthMode.ReadOnly);Pl(de,U,ee,be,Ke,Le,!0)}},"fill-extrusion":function(de,U,ee,be){const Ie=ee.paint.get("fill-extrusion-opacity");if(Ie!==0&&de.renderPass==="translucent"){const Oe=new j.DepthMode(de.context.gl.LEQUAL,j.DepthMode.ReadWrite,de.depthRangeFor3D);if(Ie!==1||ee.paint.get("fill-extrusion-pattern").constantOr(1))Qo(de,U,ee,be,Oe,j.StencilMode.disabled,j.ColorMode.disabled),Qo(de,U,ee,be,Oe,de.stencilModeFor3D(),de.colorModeForRenderPass()),de.resetStencilClippingMasks();else{const Le=de.colorModeForRenderPass();Qo(de,U,ee,be,Oe,j.StencilMode.disabled,Le)}}},hillshade:function(de,U,ee,be){if(de.renderPass!=="offscreen"&&de.renderPass!=="translucent")return;const Ie=de.context,Oe=de.depthModeForSublayer(0,j.DepthMode.ReadOnly),Le=de.colorModeForRenderPass(),Fe=de.terrain&&de.terrain.renderingToTexture,[Ge,Ke]=de.renderPass!=="translucent"||Fe?[{},be]:de.stencilConfigForOverlap(be);for(const Ye of Ke){const ct=U.getTile(Ye);if(ct.needsHillshadePrepare&&de.renderPass==="offscreen")Ka(de,ct,ee,Oe,j.StencilMode.disabled,Le);else if(de.renderPass==="translucent"){const mt=Fe&&de.terrain?de.terrain.stencilModeForRTTOverlap(Ye):Ge[Ye.overscaledZ];hc(de,Ye,ct,ee,Oe,mt,Le)}}Ie.viewport.set([0,0,de.width,de.height]),de.resetStencilClippingMasks()},raster:function(de,U,ee,be,Ie,Oe){if(de.renderPass!=="translucent"||ee.paint.get("raster-opacity")===0||!be.length)return;const Le=de.context,Fe=Le.gl,Ge=U.getSource(),Ke=de.useProgram("raster"),Ye=de.colorModeForRenderPass(),ct=de.terrain&&de.terrain.renderingToTexture,[mt,Mt]=Ge instanceof hn||ct?[{},be]:de.stencilConfigForOverlap(be),At=Mt[Mt.length-1].overscaledZ,Tt=!de.options.moving;for(const kt of Mt){const wt=ct?j.DepthMode.disabled:de.depthModeForSublayer(kt.overscaledZ-At,ee.paint.get("raster-opacity")===1?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly,Fe.LESS),$t=kt.toUnwrapped(),Pt=U.getTile(kt);if(ct&&(!Pt||!Pt.hasData()))continue;const Yt=ct?kt.projMatrix:de.transform.calculateProjMatrix($t,Tt),Kt=de.terrain&&ct?de.terrain.stencilModeForRTTOverlap(kt):mt[kt.overscaledZ],Vt=Oe?0:ee.paint.get("raster-fade-duration");Pt.registerFadeDuration(Vt);const Xt=U.findLoadedParent(kt,0),Ht=El(Pt,Xt,U,de.transform,Vt);let an,_n;de.terrain&&de.terrain.prepareDrawTile();const Hn=ee.paint.get("raster-resampling")==="nearest"?Fe.NEAREST:Fe.LINEAR;Le.activeTexture.set(Fe.TEXTURE0),Pt.texture.bind(Hn,Fe.CLAMP_TO_EDGE),Le.activeTexture.set(Fe.TEXTURE1),Xt?(Xt.texture.bind(Hn,Fe.CLAMP_TO_EDGE),an=Math.pow(2,Xt.tileID.overscaledZ-Pt.tileID.overscaledZ),_n=[Pt.tileID.canonical.x*an%1,Pt.tileID.canonical.y*an%1]):Pt.texture.bind(Hn,Fe.CLAMP_TO_EDGE);const dn=oh(Yt,_n||[0,0],an||1,Ht,ee,Ge instanceof hn?Ge.perspectiveTransform:[0,0]);if(de.prepareDrawProgram(Le,Ke,$t),Ge instanceof hn)Ge.boundsBuffer&&Ge.boundsSegments&&Ke.draw(Le,Fe.TRIANGLES,wt,j.StencilMode.disabled,Ye,j.CullFaceMode.disabled,dn,ee.id,Ge.boundsBuffer,de.quadTriangleIndexBuffer,Ge.boundsSegments);else{const{tileBoundsBuffer:Rn,tileBoundsIndexBuffer:Fn,tileBoundsSegments:Qn}=de.getTileBoundsBuffers(Pt);Ke.draw(Le,Fe.TRIANGLES,wt,Kt,Ye,j.CullFaceMode.disabled,dn,ee.id,Rn,Fn,Qn)}}de.resetStencilClippingMasks()},background:function(de,U,ee,be){const Ie=ee.paint.get("background-color"),Oe=ee.paint.get("background-opacity");if(Oe===0)return;const Le=de.context,Fe=Le.gl,Ge=de.transform,Ke=Ge.tileSize,Ye=ee.paint.get("background-pattern");if(de.isPatternMissing(Ye))return;const ct=!Ye&&Ie.a===1&&Oe===1&&de.opaquePassEnabledForLayer()?"opaque":"translucent";if(de.renderPass!==ct)return;const mt=j.StencilMode.disabled,Mt=de.depthModeForSublayer(0,ct==="opaque"?j.DepthMode.ReadWrite:j.DepthMode.ReadOnly),At=de.colorModeForRenderPass(),Tt=de.useProgram(Ye?"backgroundPattern":"background");let kt,wt=be;wt||(kt=de.getBackgroundTiles(),wt=Object.values(kt).map(Pt=>Pt.tileID)),Ye&&(Le.activeTexture.set(Fe.TEXTURE0),de.imageManager.bind(de.context));const $t=ee.getCrossfadeParameters();for(const Pt of wt){const Yt=Pt.toUnwrapped(),Kt=be?Pt.projMatrix:de.transform.calculateProjMatrix(Yt);de.prepareDrawTile();const Vt=U?U.getTile(Pt):kt?kt[Pt.key]:new j.Tile(Pt,Ke,Ge.zoom,de),Xt=Ye?cu(Kt,Oe,de,Ye,{tileID:Pt,tileSize:Ke},$t):ah(Kt,Oe,Ie);de.prepareDrawProgram(Le,Tt,Yt);const{tileBoundsBuffer:Ht,tileBoundsIndexBuffer:an,tileBoundsSegments:_n}=de.getTileBoundsBuffers(Vt);Tt.draw(Le,Fe.TRIANGLES,Mt,mt,At,j.CullFaceMode.disabled,Xt,ee.id,Ht,an,_n)}},sky:function(de,U,ee){const be=de.transform,Ie=be.projection.name==="mercator"||be.projection.name==="globe"?1:j.smoothstep(7,8,be.zoom),Oe=ee.paint.get("sky-opacity")*Ie;if(Oe===0)return;const Le=de.context,Fe=ee.paint.get("sky-type"),Ge=new j.DepthMode(Le.gl.LEQUAL,j.DepthMode.ReadOnly,[0,1]),Ke=de.frameCounter/1e3%1;Fe==="atmosphere"?de.renderPass==="offscreen"?ee.needsSkyboxCapture(de)&&(function(Ye,ct,mt,Mt){const At=Ye.context,Tt=At.gl;let kt=ct.skyboxFbo;if(!kt){kt=ct.skyboxFbo=At.createFramebuffer(32,32,!1),ct.skyboxGeometry=new wc(At),ct.skyboxTexture=At.gl.createTexture(),Tt.bindTexture(Tt.TEXTURE_CUBE_MAP,ct.skyboxTexture),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_WRAP_S,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_WRAP_T,Tt.CLAMP_TO_EDGE),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_MIN_FILTER,Tt.LINEAR),Tt.texParameteri(Tt.TEXTURE_CUBE_MAP,Tt.TEXTURE_MAG_FILTER,Tt.LINEAR);for(let Yt=0;Yt<6;++Yt)Tt.texImage2D(Tt.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0,Tt.RGBA,32,32,0,Tt.RGBA,Tt.UNSIGNED_BYTE,null)}At.bindFramebuffer.set(kt.framebuffer),At.viewport.set([0,0,32,32]);const wt=ct.getCenter(Ye,!0),$t=Ye.useProgram("skyboxCapture"),Pt=new Float64Array(16);j.identity(Pt),j.rotateY(Pt,Pt,.5*-Math.PI),ts(At,ct,$t,Pt,wt,0),j.identity(Pt),j.rotateY(Pt,Pt,.5*Math.PI),ts(At,ct,$t,Pt,wt,1),j.identity(Pt),j.rotateX(Pt,Pt,.5*-Math.PI),ts(At,ct,$t,Pt,wt,2),j.identity(Pt),j.rotateX(Pt,Pt,.5*Math.PI),ts(At,ct,$t,Pt,wt,3),j.identity(Pt),ts(At,ct,$t,Pt,wt,4),j.identity(Pt),j.rotateY(Pt,Pt,Math.PI),ts(At,ct,$t,Pt,wt,5),At.viewport.set([0,0,Ye.width,Ye.height])}(de,ee),ee.markSkyboxValid(de)):de.renderPass==="sky"&&function(Ye,ct,mt,Mt,At){const Tt=Ye.context,kt=Tt.gl,wt=Ye.transform,$t=Ye.useProgram("skybox");Tt.activeTexture.set(kt.TEXTURE0),kt.bindTexture(kt.TEXTURE_CUBE_MAP,ct.skyboxTexture);const Pt=((Yt,Kt,Vt,Xt,Ht)=>({u_matrix:Yt,u_sun_direction:Kt,u_cubemap:0,u_opacity:Xt,u_temporal_offset:Ht}))(wt.skyboxMatrix,ct.getCenter(Ye,!1),0,Mt,At);Ye.prepareDrawProgram(Tt,$t),$t.draw(Tt,kt.TRIANGLES,mt,j.StencilMode.disabled,Ye.colorModeForRenderPass(),j.CullFaceMode.backCW,Pt,"skybox",ct.skyboxGeometry.vertexBuffer,ct.skyboxGeometry.indexBuffer,ct.skyboxGeometry.segment)}(de,ee,Ge,Oe,Ke):Fe==="gradient"&&de.renderPass==="sky"&&function(Ye,ct,mt,Mt,At){const Tt=Ye.context,kt=Tt.gl,wt=Ye.transform,$t=Ye.useProgram("skyboxGradient");ct.skyboxGeometry||(ct.skyboxGeometry=new wc(Tt)),Tt.activeTexture.set(kt.TEXTURE0);let Pt=ct.colorRampTexture;Pt||(Pt=ct.colorRampTexture=new j.Texture(Tt,ct.colorRamp,kt.RGBA)),Pt.bind(kt.LINEAR,kt.CLAMP_TO_EDGE);const Yt=((Kt,Vt,Xt,Ht,an)=>({u_matrix:Kt,u_color_ramp:0,u_center_direction:Vt,u_radius:j.degToRad(Xt),u_opacity:Ht,u_temporal_offset:an}))(wt.skyboxMatrix,ct.getCenter(Ye,!1),ct.paint.get("sky-gradient-radius"),Mt,At);Ye.prepareDrawProgram(Tt,$t),$t.draw(Tt,kt.TRIANGLES,mt,j.StencilMode.disabled,Ye.colorModeForRenderPass(),j.CullFaceMode.backCW,Yt,"skyboxGradient",ct.skyboxGeometry.vertexBuffer,ct.skyboxGeometry.indexBuffer,ct.skyboxGeometry.segment)}(de,ee,Ge,Oe,Ke)},debug:function(de,U,ee){for(let be=0;be<ee.length;be++)Jr(de,U,ee[be])},custom:function(de,U,ee){const be=de.context,Ie=ee.implementation;if(de.transform.projection.unsupportedLayers&&de.transform.projection.unsupportedLayers.includes("custom"))j.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(de.renderPass==="offscreen"){const Oe=Ie.prerender;Oe&&(de.setCustomLayerDefaults(),be.setColorMode(de.colorModeForRenderPass()),Oe.call(Ie,be.gl,de.transform.customLayerMatrix()),be.setDirty(),de.setBaseState())}else if(de.renderPass==="translucent"){de.setCustomLayerDefaults(),be.setColorMode(de.colorModeForRenderPass()),be.setStencilMode(j.StencilMode.disabled);const Oe=Ie.renderingMode==="3d"?new j.DepthMode(de.context.gl.LEQUAL,j.DepthMode.ReadWrite,de.depthRangeFor3D):de.depthModeForSublayer(0,j.DepthMode.ReadOnly);be.setDepthMode(Oe),Ie.render(be.gl,de.transform.customLayerMatrix()),be.setDirty(),de.setBaseState(),be.bindFramebuffer.set(null)}}};class Tc{constructor(U,ee){this.context=new Dt(U),this.transform=ee,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=j.SourceCache.maxUnderzooming+j.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ml,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(U,ee){const be=!!U&&!!U.terrain&&this.transform.projection.supportsTerrain;if(!(be||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new tu(this,U));const Ie=this._terrain;this.transform.elevation=be?Ie:null,Ie.update(U,this.transform,ee)}_updateFog(U){const ee=U.fog;if(!ee||this.transform.projection.name==="globe"||ee.getOpacity(this.transform.pitch)<1||ee.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[be,Ie]=ee.getFovAdjustedRange(this.transform._fov);if(be>Ie)return void(this.transform.fogCullDistSq=null);const Oe=be+.78*(Ie-be);this.transform.fogCullDistSq=Oe*Oe}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(U,ee){if(this.width=U*j.exported.devicePixelRatio,this.height=ee*j.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const be of this.style.order)this.style._layers[be].resize()}setup(){const U=this.context,ee=new j.StructArrayLayout2i4;ee.emplaceBack(0,0),ee.emplaceBack(j.EXTENT,0),ee.emplaceBack(0,j.EXTENT),ee.emplaceBack(j.EXTENT,j.EXTENT),this.tileExtentBuffer=U.createVertexBuffer(ee,j.posAttributes.members),this.tileExtentSegments=j.SegmentVector.simpleSegment(0,0,4,2);const be=new j.StructArrayLayout2i4;be.emplaceBack(0,0),be.emplaceBack(j.EXTENT,0),be.emplaceBack(0,j.EXTENT),be.emplaceBack(j.EXTENT,j.EXTENT),this.debugBuffer=U.createVertexBuffer(be,j.posAttributes.members),this.debugSegments=j.SegmentVector.simpleSegment(0,0,4,5);const Ie=new j.StructArrayLayout2i4;Ie.emplaceBack(-1,-1),Ie.emplaceBack(1,-1),Ie.emplaceBack(-1,1),Ie.emplaceBack(1,1),this.viewportBuffer=U.createVertexBuffer(Ie,j.posAttributes.members),this.viewportSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Oe=new j.StructArrayLayout4i8;Oe.emplaceBack(0,0,0,0),Oe.emplaceBack(j.EXTENT,0,j.EXTENT,0),Oe.emplaceBack(0,j.EXTENT,0,j.EXTENT),Oe.emplaceBack(j.EXTENT,j.EXTENT,j.EXTENT,j.EXTENT),this.mercatorBoundsBuffer=U.createVertexBuffer(Oe,j.boundsAttributes.members),this.mercatorBoundsSegments=j.SegmentVector.simpleSegment(0,0,4,2);const Le=new j.StructArrayLayout3ui6;Le.emplaceBack(0,1,2),Le.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=U.createIndexBuffer(Le);const Fe=new j.StructArrayLayout1ui2;for(const Ke of[0,1,3,2,0])Fe.emplaceBack(Ke);this.debugIndexBuffer=U.createIndexBuffer(Fe),this.emptyTexture=new j.Texture(U,new j.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),U.gl.RGBA),this.identityMat=j.create();const Ge=this.context.gl;this.stencilClearMode=new j.StencilMode({func:Ge.ALWAYS,mask:0},0,255,Ge.ZERO,Ge.ZERO,Ge.ZERO),this.loadTimeStamps.push(j.window.performance.now()),this.atmosphereBuffer=new Ol(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(U){return U._makeTileBoundsBuffers(this.context,this.transform.projection),U._tileBoundsBuffer?{tileBoundsBuffer:U._tileBoundsBuffer,tileBoundsIndexBuffer:U._tileBoundsIndexBuffer,tileBoundsSegments:U._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const U=this.context,ee=U.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(U,ee.TRIANGLES,j.DepthMode.disabled,this.stencilClearMode,j.ColorMode.disabled,j.CullFaceMode.disabled,Jo(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(U,ee,be){if(!ee||this.currentStencilSource===ee.id||!U.isTileClipped()||!be||be.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let Fe=!1;for(const Ge of be)if(this._tileClippingMaskIDs[Ge.key]===void 0){Fe=!0;break}if(!Fe)return}this.currentStencilSource=ee.id;const Ie=this.context,Oe=Ie.gl;this.nextStencilID+be.length>256&&this.clearStencil(),Ie.setColorMode(j.ColorMode.disabled),Ie.setDepthMode(j.DepthMode.disabled);const Le=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const Fe of be){const Ge=ee.getTile(Fe),Ke=this._tileClippingMaskIDs[Fe.key]=this.nextStencilID++,{tileBoundsBuffer:Ye,tileBoundsIndexBuffer:ct,tileBoundsSegments:mt}=this.getTileBoundsBuffers(Ge);Le.draw(Ie,Oe.TRIANGLES,j.DepthMode.disabled,new j.StencilMode({func:Oe.ALWAYS,mask:0},Ke,255,Oe.KEEP,Oe.KEEP,Oe.REPLACE),j.ColorMode.disabled,j.CullFaceMode.disabled,Jo(Fe.projMatrix),"$clipping",Ye,ct,mt)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const U=this.nextStencilID++,ee=this.context.gl;return new j.StencilMode({func:ee.NOTEQUAL,mask:255},U,255,ee.KEEP,ee.KEEP,ee.REPLACE)}stencilModeForClipping(U){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(U);const ee=this.context.gl;return new j.StencilMode({func:ee.EQUAL,mask:255},this._tileClippingMaskIDs[U.key],0,ee.KEEP,ee.KEEP,ee.REPLACE)}stencilConfigForOverlap(U){const ee=this.context.gl,be=U.sort((Le,Fe)=>Fe.overscaledZ-Le.overscaledZ),Ie=be[be.length-1].overscaledZ,Oe=be[0].overscaledZ-Ie+1;if(Oe>1){this.currentStencilSource=void 0,this.nextStencilID+Oe>256&&this.clearStencil();const Le={};for(let Fe=0;Fe<Oe;Fe++)Le[Fe+Ie]=new j.StencilMode({func:ee.GEQUAL,mask:255},Fe+this.nextStencilID,255,ee.KEEP,ee.KEEP,ee.REPLACE);return this.nextStencilID+=Oe,[Le,be]}return[{[Ie]:j.StencilMode.disabled},be]}colorModeForRenderPass(){const U=this.context.gl;return this._showOverdrawInspector?new j.ColorMode([U.CONSTANT_COLOR,U.ONE],new j.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?j.ColorMode.unblended:j.ColorMode.alphaBlended}depthModeForSublayer(U,ee,be){if(!this.opaquePassEnabledForLayer())return j.DepthMode.disabled;const Ie=1-((1+this.currentLayer)*this.numSublayers+U)*this.depthEpsilon;return new j.DepthMode(be||this.context.gl.LEQUAL,ee,[Ie,Ie])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(U,ee){this.style=U,this.options=ee,this.lineAtlas=U.lineAtlas,this.imageManager=U.imageManager,this.glyphManager=U.glyphManager,this.symbolFadeChange=U.placement.symbolFadeChange(j.exported.now()),this.imageManager.beginFrame();const be=this.style.order,Ie=this.style._sourceCaches;for(const Ge in Ie){const Ke=Ie[Ge];Ke.used&&Ke.prepare(this.context)}const Oe={},Le={},Fe={};for(const Ge in Ie){const Ke=Ie[Ge];Oe[Ge]=Ke.getVisibleCoordinates(),Le[Ge]=Oe[Ge].slice().reverse(),Fe[Ge]=Ke.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Ge=0;Ge<be.length;Ge++)if(this.style._layers[be[Ge]].is3D()){this.opaquePassCutoff=Ge;break}if(this.terrain&&(this.terrain.updateTileBinding(Fe),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new j.GlobeSharedBuffers(this.context)),j.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const Ge of be){const Ke=this.style._layers[Ge],Ye=U._getLayerSourceCache(Ke);if(!Ke.hasOffscreenPass()||Ke.isHidden(this.transform.zoom))continue;const ct=Ye?Le[Ye.id]:void 0;(Ke.type==="custom"||Ke.isSky()||ct&&ct.length)&&this.renderLayer(this,Ye,Ke,ct)}if(this.depthRangeFor3D=[0,1-(U.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:ee.showOverdrawInspector?j.Color.black:j.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ee.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=be.length-1;this.currentLayer>=0;this.currentLayer--){const Ge=this.style._layers[be[this.currentLayer]],Ke=U._getLayerSourceCache(Ge);if(Ge.isSky())continue;const Ye=Ke?Le[Ke.id]:void 0;this._renderTileClippingMasks(Ge,Ke,Ye),this.renderLayer(this,Ke,Ge,Ye)}if(this.style.fog&&this.transform.projection.supportsFog&&function(Ge,Ke){const Ye=Ge.context,ct=Ye.gl,mt=Ge.transform,Mt=new j.DepthMode(ct.LEQUAL,j.DepthMode.ReadOnly,[0,1]),At=Ge.useProgram("globeAtmosphere",null,mt.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Tt=j.globeToMercatorTransition(mt.zoom),kt=Ke.properties.get("color").toArray01(),wt=Ke.properties.get("high-color").toArray01(),$t=Ke.properties.get("space-color").toArray01PremultipliedAlpha(),Pt=j.identity$1([]);j.rotateY$1(Pt,Pt,-j.degToRad(mt._center.lng)),j.rotateX$1(Pt,Pt,j.degToRad(mt._center.lat)),j.rotateZ$1(Pt,Pt,mt.angle),j.rotateX$1(Pt,Pt,-mt._pitch);const Yt=j.fromQuat(new Float32Array(16),Pt),Kt=j.mapValue(Ke.properties.get("star-intensity"),0,1,0,.25),Vt=5e-4,Xt=j.mapValue(Ke.properties.get("horizon-blend"),0,1,Vt,.25),Ht=j.globeUseCustomAntiAliasing(Ge,Ye,mt)&&Xt===Vt?mt.worldSize/(2*Math.PI*1.025)-1:mt.globeRadius,an=Ge.frameCounter/1e3%1,_n=j.length(mt.globeCenterInViewSpace),Hn=Math.sqrt(Math.pow(_n,2)-Math.pow(Ht,2)),dn=Math.acos(Hn/_n),Rn=((Qn,An,Wn,Dn,ir,er,dr,gr,Tr,Ur,fr,Cr,Wr,li)=>({u_frustum_tl:Qn,u_frustum_tr:An,u_frustum_br:Wn,u_frustum_bl:Dn,u_horizon:ir,u_transition:er,u_fadeout_range:dr,u_color:gr,u_high_color:Tr,u_space_color:Ur,u_star_intensity:fr,u_star_size:5*j.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Cr,u_horizon_angle:Wr,u_rotation_matrix:li}))(mt.frustumCorners.TL,mt.frustumCorners.TR,mt.frustumCorners.BR,mt.frustumCorners.BL,mt.frustumCorners.horizon,Tt,Xt,kt,wt,$t,Kt,an,dn,Yt);Ge.prepareDrawProgram(Ye,At);const Fn=Ge.atmosphereBuffer;Fn&&At.draw(Ye,ct.TRIANGLES,Mt,j.StencilMode.disabled,j.ColorMode.alphaBlended,j.CullFaceMode.backCW,Rn,"skybox",Fn.vertexBuffer,Fn.indexBuffer,Fn.segments)}(this,this.style.fog),this.renderPass="sky",(j.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<be.length;this.currentLayer++){const Ge=this.style._layers[be[this.currentLayer]],Ke=U._getLayerSourceCache(Ge);Ge.isSky()&&this.renderLayer(this,Ke,Ge,Ke?Le[Ke.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<be.length;){const Ge=this.style._layers[be[this.currentLayer]],Ke=U._getLayerSourceCache(Ge);if(Ge.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(Ge)){if(Ge.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Ye=Ke?(Ge.type==="symbol"?Fe:Le)[Ke.id]:void 0;this._renderTileClippingMasks(Ge,Ke,Ke?Oe[Ke.id]:void 0),this.renderLayer(this,Ke,Ge,Ye),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let Ge=null;j.values(this.style._layers).forEach(Ke=>{const Ye=U._getLayerSourceCache(Ke);Ye&&!Ke.isHidden(this.transform.zoom)&&(!Ge||Ge.getSource().maxzoom<Ye.getSource().maxzoom)&&(Ge=Ye)}),Ge&&this.options.showTileBoundaries&&ns.debug(this,Ge,Ge.getVisibleCoordinates())}this.options.showPadding&&function(Ge){const Ke=Ge.transform.padding;Us(Ge,Ge.transform.height-(Ke.top||0),3,pu),Us(Ge,Ke.bottom||0,3,Pa),_u(Ge,Ke.left||0,3,es),_u(Ge,Ge.transform.width-(Ke.right||0),3,fu);const Ye=Ge.transform.centerPoint;(function(ct,mt,Mt,At){Vs(ct,mt-1,Mt-10,2,20,At),Vs(ct,mt-10,Mt-1,20,2,At)})(Ge,Ye.x,Ge.transform.height-Ye.y,bc)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(j.window.performance.now()),this.saveCanvasCopy())}}renderLayer(U,ee,be,Ie){be.isHidden(this.transform.zoom)||(be.type==="background"||be.type==="sky"||be.type==="custom"||Ie&&Ie.length)&&(this.id=be.id,this.gpuTimingStart(be),U.transform.projection.unsupportedLayers&&U.transform.projection.unsupportedLayers.includes(be.type)||ns[be.type](U,ee,be,Ie,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(U){if(!this.options.gpuTiming)return;const ee=this.context.extTimerQuery;let be=this.gpuTimers[U.id];be||(be=this.gpuTimers[U.id]={calls:0,cpuTime:0,query:ee.createQueryEXT()}),be.calls++,ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,be.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const U=this.context.extTimerQuery,ee=U.createQueryEXT();this.deferredRenderGpuTimeQueries.push(ee),U.beginQueryEXT(U.TIME_ELAPSED_EXT,ee)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}collectGpuTimers(){const U=this.gpuTimers;return this.gpuTimers={},U}collectDeferredRenderGpuQueries(){const U=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],U}queryGpuTimers(U){const ee={};for(const be in U){const Ie=U[be],Oe=this.context.extTimerQuery,Le=Oe.getQueryObjectEXT(Ie.query,Oe.QUERY_RESULT_EXT)/1e6;Oe.deleteQueryEXT(Ie.query),ee[be]=Le}return ee}queryGpuTimeDeferredRender(U){if(!this.options.gpuTimingDeferredRender)return 0;const ee=this.context.extTimerQuery;let be=0;for(const Ie of U)be+=ee.getQueryObjectEXT(Ie,ee.QUERY_RESULT_EXT)/1e6,ee.deleteQueryEXT(Ie);return be}translatePosMatrix(U,ee,be,Ie,Oe){if(!be[0]&&!be[1])return U;const Le=Oe?Ie==="map"?this.transform.angle:0:Ie==="viewport"?-this.transform.angle:0;if(Le){const Ke=Math.sin(Le),Ye=Math.cos(Le);be=[be[0]*Ye-be[1]*Ke,be[0]*Ke+be[1]*Ye]}const Fe=[Oe?be[0]:Mn(ee,be[0],this.transform.zoom),Oe?be[1]:Mn(ee,be[1],this.transform.zoom),0],Ge=new Float32Array(16);return j.translate(Ge,U,Fe),Ge}saveTileTexture(U){const ee=this._tileTextures[U.size[0]];ee?ee.push(U):this._tileTextures[U.size[0]]=[U]}getTileTexture(U){const ee=this._tileTextures[U];return ee&&ee.length>0?ee.pop():null}isPatternMissing(U){if(!U)return!1;if(!U.from||!U.to)return!0;const ee=this.imageManager.getPattern(U.from.toString()),be=this.imageManager.getPattern(U.to.toString());return!ee||!be}currentGlobalDefines(){const U=this.terrain&&this.terrain.renderingToTexture,ee=this.style&&this.style.fog,be=[];return this.terrain&&!this.terrain.renderingToTexture&&be.push("TERRAIN"),ee&&!U&&ee.getOpacity(this.transform.pitch)!==0&&be.push("FOG"),U&&be.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&be.push("OVERDRAW_INSPECTOR"),be}useProgram(U,ee,be){this.cache=this.cache||{};const Ie=be||[],Oe=this.currentGlobalDefines().concat(Ie),Le=Al.cacheKey(xl[U],U,Oe,ee);return this.cache[Le]||(this.cache[Le]=new Al(this.context,U,xl[U],ee,sh[U],Oe)),this.cache[Le]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const U=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(U.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=j.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new j.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(U,ee,be){if(this.terrain&&this.terrain.renderingToTexture)return;const Ie=this.style.fog;if(Ie){const Oe=Ie.getOpacity(this.transform.pitch),Le=((Fe,Ge,Ke,Ye,ct,mt,Mt,At,Tt,kt,wt)=>{const $t=Fe.transform,Pt=Ge.properties.get("color").toArray01();Pt[3]=Ye;const Yt=Fe.frameCounter/1e3%1;return{u_fog_matrix:Ke?$t.calculateFogTileMatrix(Ke):Fe.identityMat,u_fog_range:Ge.getFovAdjustedRange($t._fov),u_fog_color:Pt,u_fog_horizon_blend:Ge.properties.get("horizon-blend"),u_fog_temporal_offset:Yt,u_frustum_tl:ct,u_frustum_tr:mt,u_frustum_br:Mt,u_frustum_bl:At,u_globe_pos:Tt,u_globe_radius:kt,u_viewport:wt,u_globe_transition:j.globeToMercatorTransition($t.zoom),u_is_globe:+($t.projection.name==="globe")}})(this,Ie,be,Oe,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*j.exported.devicePixelRatio,this.transform.height*j.exported.devicePixelRatio]);ee.setFogUniformValues(U,Le)}}setTileLoadedFlag(U){this.tileLoaded=U}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const U=this.context.gl,ee=U.createTexture();return U.bindTexture(U.TEXTURE_2D,ee),U.copyTexImage2D(U.TEXTURE_2D,0,U.RGBA,0,0,U.drawingBufferWidth,U.drawingBufferHeight,0),ee}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const U=this.style&&this.style.fog;return!!U&&U.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const U=this._backgroundTiles,ee=this._backgroundTiles={},be=this.transform.coveringTiles({tileSize:512});for(const Ie of be)ee[Ie.key]=U[Ie.key]||new j.Tile(Ie,512,this.transform.tileZoom,this);return ee}clearBackgroundTiles(){this._backgroundTiles={}}}class qs{constructor(U=0,ee=0,be=0,Ie=0){if(isNaN(U)||U<0||isNaN(ee)||ee<0||isNaN(be)||be<0||isNaN(Ie)||Ie<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=U,this.bottom=ee,this.left=be,this.right=Ie}interpolate(U,ee,be){return ee.top!=null&&U.top!=null&&(this.top=j.number(U.top,ee.top,be)),ee.bottom!=null&&U.bottom!=null&&(this.bottom=j.number(U.bottom,ee.bottom,be)),ee.left!=null&&U.left!=null&&(this.left=j.number(U.left,ee.left,be)),ee.right!=null&&U.right!=null&&(this.right=j.number(U.right,ee.right,be)),this}getCenter(U,ee){const be=j.clamp((this.left+U-this.right)/2,0,U),Ie=j.clamp((this.top+ee-this.bottom)/2,0,ee);return new j.pointGeometry(be,Ie)}equals(U){return this.top===U.top&&this.bottom===U.bottom&&this.left===U.left&&this.right===U.right}clone(){return new qs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ac(de,U){const ee=j.getColumn(de,3);j.fromQuat(de,U),j.setColumn(de,3,ee)}function rs(de,U){const ee=j.identity$1([]);return j.rotateZ$1(ee,ee,-U),j.rotateX$1(ee,ee,-de),ee}function is(de,U){const ee=[de[0],de[1],0],be=[U[0],U[1],0];if(j.length(ee)>=1e-15){const Le=j.normalize([],ee);j.scale$2(be,Le,j.dot(be,Le)),U[0]=be[0],U[1]=be[1]}const Ie=j.cross([],U,de);if(j.len(Ie)<1e-15)return null;const Oe=Math.atan2(-Ie[1],Ie[0]);return rs(Math.atan2(Math.sqrt(de[0]*de[0]+de[1]*de[1]),-de[2]),Oe)}class lr{constructor(U,ee){this.position=U,this.orientation=ee}get position(){return this._position}set position(U){if(U){const ee=U instanceof j.MercatorCoordinate?U:new j.MercatorCoordinate(U[0],U[1],U[2]);this._renderWorldCopies&&(ee.x=j.wrap(ee.x,0,1)),this._position=ee}else this._position=null}lookAtPoint(U,ee){if(this.orientation=null,!this.position)return;const be=this._elevation?this._elevation.getAtPointOrZero(j.MercatorCoordinate.fromLngLat(U)):0,Ie=this.position,Oe=j.MercatorCoordinate.fromLngLat(U,be),Le=[Oe.x-Ie.x,Oe.y-Ie.y,Oe.z-Ie.z];ee||(ee=[0,0,1]),ee[2]=Math.abs(ee[2]),this.orientation=is(Le,ee)}setPitchBearing(U,ee){this.orientation=rs(j.degToRad(U),j.degToRad(-ee))}}class lo{constructor(U,ee){this._transform=j.identity([]),this.orientation=ee,this.position=U}get mercatorPosition(){const U=this.position;return new j.MercatorCoordinate(U[0],U[1],U[2])}get position(){const U=j.getColumn(this._transform,3);return[U[0],U[1],U[2]]}set position(U){var ee;U&&j.setColumn(this._transform,3,[(ee=U)[0],ee[1],ee[2],1])}get orientation(){return this._orientation}set orientation(U){this._orientation=U||j.identity$1([]),U&&Ac(this._transform,this._orientation)}getPitchBearing(){const U=this.forward(),ee=this.right();return{bearing:Math.atan2(-ee[1],ee[0]),pitch:Math.atan2(Math.sqrt(U[0]*U[0]+U[1]*U[1]),-U[2])}}setPitchBearing(U,ee){this._orientation=rs(U,ee),Ac(this._transform,this._orientation)}forward(){const U=j.getColumn(this._transform,2);return[-U[0],-U[1],-U[2]]}up(){const U=j.getColumn(this._transform,1);return[-U[0],-U[1],-U[2]]}right(){const U=j.getColumn(this._transform,0);return[U[0],U[1],U[2]]}getCameraToWorld(U,ee){const be=new Float64Array(16);return j.invert(be,this.getWorldToCamera(U,ee)),be}getWorldToCameraPosition(U,ee,be){const Ie=this.position;j.scale$2(Ie,Ie,-U);const Oe=new Float64Array(16);return j.fromScaling(Oe,[be,be,be]),j.translate(Oe,Oe,Ie),Oe[10]*=ee,Oe}getWorldToCamera(U,ee){const be=new Float64Array(16),Ie=new Float64Array(4),Oe=this.position;return j.conjugate(Ie,this._orientation),j.scale$2(Oe,Oe,-U),j.fromQuat(be,Ie),j.translate(be,be,Oe),be[1]*=-1,be[5]*=-1,be[9]*=-1,be[13]*=-1,be[8]*=ee,be[9]*=ee,be[10]*=ee,be[11]*=ee,be}getCameraToClipPerspective(U,ee,be,Ie){const Oe=new Float64Array(16);return j.perspective(Oe,U,ee,be,Ie),Oe}getDistanceToElevation(U){const ee=U===0?0:j.mercatorZfromAltitude(U,this.position[1]),be=this.forward();return(ee-this.position[2])/be[2]}clone(){return new lo([...this.position],[...this.orientation])}}function kc(de,U){const ee=Hs(de.projection,de.zoom,de.width,de.height),be=function(Oe,Le,Fe,Ge,Ke){const Ye=new j.LngLat(Fe.lng-180*xo,Fe.lat),ct=new j.LngLat(Fe.lng+180*xo,Fe.lat),mt=Oe.project(Ye.lng,Ye.lat),Mt=Oe.project(ct.lng,ct.lat),At=-Math.atan2(Mt.y-mt.y,Mt.x-mt.x),Tt=j.MercatorCoordinate.fromLngLat(Fe);Tt.y=j.clamp(Tt.y,-.999975,.999975);const kt=Tt.toLngLat(),wt=Oe.project(kt.lng,kt.lat),$t=j.MercatorCoordinate.fromLngLat(kt);$t.x+=xo;const Pt=$t.toLngLat(),Yt=Oe.project(Pt.lng,Pt.lat),Kt=Ws(Yt.x-wt.x,Yt.y-wt.y,At),Vt=j.MercatorCoordinate.fromLngLat(kt);Vt.y+=xo;const Xt=Vt.toLngLat(),Ht=Oe.project(Xt.lng,Xt.lat),an=Ws(Ht.x-wt.x,Ht.y-wt.y,At),_n=Math.abs(Kt.x)/Math.abs(an.y),Hn=j.identity([]);j.rotateZ(Hn,Hn,-At*(1-(Ke?0:Ge)));const dn=j.identity([]);return j.scale(dn,dn,[1,1-(1-_n)*Ge,1]),dn[4]=-an.x/an.y*Ge,j.rotateZ(dn,dn,At),j.multiply(dn,Hn,dn),dn}(de.projection,0,de.center,ee,U),Ie=Sc(de);return j.scale(be,be,[Ie,Ie,1]),be}function Sc(de){const U=de.projection,ee=Hs(de.projection,de.zoom,de.width,de.height),be=Cc(U,de.center),Ie=Cc(U,j.LngLat.convert(U.center));return Math.pow(2,be*ee+(1-ee)*Ie)}function Hs(de,U,ee,be,Ie=1/0){const Oe=de.range;if(!Oe)return 0;const Le=Math.min(Ie,Math.max(ee,be)),Fe=Math.log(Le/1024)/Math.LN2;return j.smoothstep(Oe[0]+Fe,Oe[1]+Fe,U)}const xo=1/4e4;function Cc(de,U){const ee=j.clamp(U.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),be=new j.LngLat(U.lng-180*xo,ee),Ie=new j.LngLat(U.lng+180*xo,ee),Oe=de.project(be.lng,ee),Le=de.project(Ie.lng,ee),Fe=j.MercatorCoordinate.fromLngLat(be),Ge=j.MercatorCoordinate.fromLngLat(Ie),Ke=Le.x-Oe.x,Ye=Le.y-Oe.y,ct=Ge.x-Fe.x,mt=Ge.y-Fe.y,Mt=Math.sqrt((ct*ct+mt*mt)/(Ke*Ke+Ye*Ye));return Math.log(Mt)/Math.LN2}function Ws(de,U,ee){const be=Math.cos(ee),Ie=Math.sin(ee);return{x:de*be-U*Ie,y:de*Ie+U*be}}class Zs{constructor(U,ee,be,Ie,Oe,Le,Fe){this.tileSize=512,this._renderWorldCopies=Oe===void 0||Oe,this._minZoom=U||0,this._maxZoom=ee||22,this._minPitch=be==null?0:be,this._maxPitch=Ie==null?60:Ie,this.setProjection(Le),this.setMaxBounds(Fe),this.width=0,this.height=0,this._center=new j.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new qs,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new lo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const U=new Zs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return U._elevation=this._elevation,U._centerAltitude=this._centerAltitude,U._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,U.tileSize=this.tileSize,U.width=this.width,U.height=this.height,U.cameraElevationReference=this.cameraElevationReference,U._center=this._center,U._setZoom(this.zoom),U._seaLevelZoom=this._seaLevelZoom,U.angle=this.angle,U._fov=this._fov,U._pitch=this._pitch,U._nearZ=this._nearZ,U._farZ=this._farZ,U._averageElevation=this._averageElevation,U._unmodified=this._unmodified,U._edgeInsets=this._edgeInsets.clone(),U._camera=this._camera.clone(),U._calcMatrices(),U.freezeTileCoverage=this.freezeTileCoverage,U.frustumCorners=this.frustumCorners,U}get elevation(){return this._elevation}set elevation(U){this._elevation!==U&&(this._elevation=U,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(U){const ee=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||ee)&&this._updateCameraOnTerrain(),(U||ee)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return j.pick(this.projection,["name","center","parallels"])}setProjection(U){this.projectionOptions=U||{name:"mercator"};const ee=this.projection?this.getProjection():void 0;this.projection=j.getProjection(this.projectionOptions);const be=!xe(ee,this.getProjection());return be&&this._calcMatrices(),this.mercatorFromTransition=!1,be}setMercatorFromTransition(){const U=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=j.getProjection({name:"mercator"});const ee=U!==this.projection.name;return ee&&this._calcMatrices(),ee}get minZoom(){return this._minZoom}set minZoom(U){this._minZoom!==U&&(this._minZoom=U,this.zoom=Math.max(this.zoom,U))}get maxZoom(){return this._maxZoom}set maxZoom(U){this._maxZoom!==U&&(this._maxZoom=U,this.zoom=Math.min(this.zoom,U))}get minPitch(){return this._minPitch}set minPitch(U){this._minPitch!==U&&(this._minPitch=U,this.pitch=Math.max(this.pitch,U))}get maxPitch(){return this._maxPitch}set maxPitch(U){this._maxPitch!==U&&(this._maxPitch=U,this.pitch=Math.min(this.pitch,U))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(U){U===void 0?U=!0:U===null&&(U=!1),this._renderWorldCopies=U}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const U=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(U))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return j.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new j.pointGeometry(this.width,this.height)}get bearing(){return j.wrap(this.rotation,-180,180)}set bearing(U){this.rotation=U}get rotation(){return-this.angle/Math.PI*180}set rotation(U){const ee=-U*Math.PI/180;var be;this.angle!==ee&&(this._unmodified=!1,this.angle=ee,this._calcMatrices(),this.rotationMatrix=(be=new j.ARRAY_TYPE(4),j.ARRAY_TYPE!=Float32Array&&(be[1]=0,be[2]=0),be[0]=1,be[3]=1,be),function(Ie,Oe,Le){var Fe=Oe[0],Ge=Oe[1],Ke=Oe[2],Ye=Oe[3],ct=Math.sin(Le),mt=Math.cos(Le);Ie[0]=Fe*mt+Ke*ct,Ie[1]=Ge*mt+Ye*ct,Ie[2]=Fe*-ct+Ke*mt,Ie[3]=Ge*-ct+Ye*mt}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(U){const ee=j.clamp(U,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==ee&&(this._unmodified=!1,this._pitch=ee,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(U){U=Math.max(.01,Math.min(60,U)),this._fov!==U&&(this._unmodified=!1,this._fov=U/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(U){this._averageElevation=U,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(U){const ee=Math.min(Math.max(U,this.minZoom),this.maxZoom);this._zoom!==ee&&(this._unmodified=!1,this._setZoom(ee),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(U){this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const U=this._elevation;this._centerAltitude=U.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=U.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const U=this._elevation,ee=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],be=this.horizonLineFromTop();let Ie=0,Oe=0;for(let Le=0;Le<ee.length;Le++){const Fe=new j.pointGeometry(ee[Le][0]*this.width,be+ee[Le][1]*(this.height-be)),Ge=U.pointCoordinate(Fe);if(!Ge)continue;const Ke=1/Math.hypot(Ge[0]-this._camera.position[0],Ge[1]-this._camera.position[1]);Ie+=Ge[3]*Ke,Oe+=Ke}return Oe===0?NaN:Ie/Oe}get center(){return this._center}set center(U){U.lat===this._center.lat&&U.lng===this._center.lng||(this._unmodified=!1,this._center=U,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const U=this._seaLevelZoom,ee=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),be=this.pixelsPerMeter/this.worldSize*ee,Ie=this._mercatorZfromZoom(U),Oe=this._mercatorZfromZoom(this._maxZoom),Le=Math.max(Ie-be,Oe);this._setZoom(this._zoomFromMercatorZ(Le))}get padding(){return this._edgeInsets.toJSON()}set padding(U){this._edgeInsets.equals(U)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,U,1),this._calcMatrices())}computeZoomRelativeTo(U){const ee=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,U.toAltitude()));let be;be=U.z<this._camera.position[2]?[ee.x,ee.y,ee.z]:[U.x,U.y,U.z];const Ie=j.length(j.sub([],this._camera.position,be));return j.clamp(this._zoomFromMercatorZ(Ie),this._minZoom,this._maxZoom)}setFreeCameraOptions(U){if(!this.height||!U.position&&!U.orientation)return;this._updateCameraState();let ee=!1;if(U.orientation&&!j.exactEquals(U.orientation,this._camera.orientation)&&(ee=this._setCameraOrientation(U.orientation)),U.position){const be=[U.position.x,U.position.y,U.position.z];j.exactEquals$1(be,this._camera.position)||(this._setCameraPosition(be),ee=!0)}ee&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const U=this._camera.position,ee=new lr;return ee.position=new j.MercatorCoordinate(U[0],U[1],U[2]),ee.orientation=this._camera.orientation,ee._elevation=this.elevation,ee._renderWorldCopies=this.renderWorldCopies,ee}_setCameraOrientation(U){if(!j.length$1(U))return!1;j.normalize$1(U,U);const ee=j.transformQuat([],[0,0,-1],U),be=j.transformQuat([],[0,-1,0],U);if(be[2]<0)return!1;const Ie=is(ee,be);return!!Ie&&(this._camera.orientation=Ie,!0)}_setCameraPosition(U){const ee=this.zoomScale(this.minZoom)*this.tileSize,be=this.zoomScale(this.maxZoom)*this.tileSize,Ie=this.cameraToCenterDistance;U[2]=j.clamp(U[2],Ie/be,Ie/ee),this._camera.position=U}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(U){return this._edgeInsets.equals(U)}interpolatePadding(U,ee,be){this._unmodified=!1,this._edgeInsets.interpolate(U,ee,be),this._constrain(),this._calcMatrices()}coveringZoomLevel(U){const ee=(U.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/U.tileSize));return Math.max(0,ee)}getVisibleUnwrappedCoordinates(U){const ee=[new j.UnwrappedTileID(0,U)];if(this.renderWorldCopies){const be=this.pointCoordinate(new j.pointGeometry(0,0)),Ie=this.pointCoordinate(new j.pointGeometry(this.width,0)),Oe=this.pointCoordinate(new j.pointGeometry(this.width,this.height)),Le=this.pointCoordinate(new j.pointGeometry(0,this.height)),Fe=Math.floor(Math.min(be.x,Ie.x,Oe.x,Le.x)),Ge=Math.floor(Math.max(be.x,Ie.x,Oe.x,Le.x)),Ke=1;for(let Ye=Fe-Ke;Ye<=Ge+Ke;Ye++)Ye!==0&&ee.push(new j.UnwrappedTileID(Ye,U))}return ee}coveringTiles(U){let ee=this.coveringZoomLevel(U);const be=ee,Ie=this.elevation&&!U.isTerrainDEM,Oe=this.projection.name==="mercator";if(U.minzoom!==void 0&&ee<U.minzoom)return[];U.maxzoom!==void 0&&ee>U.maxzoom&&(ee=U.maxzoom);const Le=this.locationCoordinate(this.center),Fe=this.center.lat,Ge=1<<ee,Ke=[Ge*Le.x,Ge*Le.y,0],Ye=this.projection.name==="globe",ct=!Ye,mt=j.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ee,ct),Mt=Ye?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),At=Ge*j.mercatorZfromAltitude(1,this.center.lat),Tt=this._camera.position[2]/j.mercatorZfromAltitude(1,this.center.lat),kt=[Ge*Mt.x,Ge*Mt.y,Tt*(ct?1:At)],wt=this.cameraToCenterDistance/U.tileSize*(U.roundZoom?1:.502),$t=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?ee:0,Pt=U.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Yt=U.isTerrainDEM?-Pt:this._elevation?this._elevation.getMinElevationBelowMSL():0,Kt=this.projection.isReprojectedInTileSpace?Sc(this):1,Vt=An=>{const Dn=new j.MercatorCoordinate(An.x+25e-6,An.y,An.z),ir=new j.MercatorCoordinate(An.x,An.y+25e-6,An.z),er=An.toLngLat(),dr=Dn.toLngLat(),gr=ir.toLngLat(),Tr=this.locationCoordinate(er),Ur=this.locationCoordinate(dr),fr=this.locationCoordinate(gr),Cr=Math.hypot(Ur.x-Tr.x,Ur.y-Tr.y),Wr=Math.hypot(fr.x-Tr.x,fr.y-Tr.y);return Math.sqrt(Cr*Wr)*Kt/25e-6},Xt=An=>{const Wn=Pt,Dn=Yt;return{aabb:j.tileAABB(this,Ge,0,0,0,An,Dn,Wn,this.projection),zoom:0,x:0,y:0,minZ:Dn,maxZ:Wn,wrap:An,fullyVisible:!1}},Ht=[];let an=[];const _n=ee,Hn=U.reparseOverscaled?be:ee,dn=An=>An*An,Rn=dn((Tt-this._centerAltitude)*At),Fn=An=>{if(!this._elevation||!An.tileID||!Oe)return;const Wn=this._elevation.getMinMaxForTile(An.tileID),Dn=An.aabb;Wn?(Dn.min[2]=Wn.min,Dn.max[2]=Wn.max,Dn.center[2]=(Dn.min[2]+Dn.max[2])/2):(An.shouldSplit=Qn(An),An.shouldSplit||(Dn.min[2]=Dn.max[2]=Dn.center[2]=this._centerAltitude))},Qn=An=>{if(An.zoom<$t)return!0;if(An.zoom===_n)return!1;if(An.shouldSplit!=null)return An.shouldSplit;const Wn=An.aabb.distanceX(kt),Dn=An.aabb.distanceY(kt);let ir=Rn,er=1;if(Ye){ir=dn(An.aabb.distanceZ(kt));const gr=Math.pow(2,An.zoom),Tr=j.latFromMercatorY((An.y+1)/gr),Ur=j.latFromMercatorY(An.y/gr),fr=Math.min(Math.max(Fe,Tr),Ur),Cr=j.circumferenceAtLatitude(fr)/j.circumferenceAtLatitude(Fe);if(er=fr===Fe?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Cr/this._mercatorScaleRatio),this.zoom<=j.GLOBE_ZOOM_THRESHOLD_MIN&&An.zoom===_n-1&&Cr>=.9)return!0}else if(Ie&&(ir=dn(An.aabb.distanceZ(kt)*At)),this.projection.isReprojectedInTileSpace&&be<=5){const gr=Math.pow(2,An.zoom),Tr=Vt(new j.MercatorCoordinate((An.x+.5)/gr,(An.y+.5)/gr));er=Tr>.85?1:Tr}const dr=Wn*Wn+Dn*Dn+ir;return dr<dn((1<<_n-An.zoom)*wt*er*((gr,Tr)=>{if(Tr*dn(.707)<gr)return 1;const Ur=Math.sqrt(Tr/gr);return Ur/(1.4144271570014144+(Math.pow(1.1,Ur-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ir,Rn),dr))};if(this.renderWorldCopies)for(let An=1;An<=3;An++)Ht.push(Xt(-An)),Ht.push(Xt(An));for(Ht.push(Xt(0));Ht.length>0;){const An=Ht.pop(),Wn=An.x,Dn=An.y;let ir=An.fullyVisible;if(!ir){const er=An.aabb.intersects(mt);if(er===0)continue;ir=er===2}if(An.zoom!==_n&&Qn(An))for(let er=0;er<4;er++){const dr=(Wn<<1)+er%2,gr=(Dn<<1)+(er>>1),Tr={aabb:Oe?An.aabb.quadrant(er):j.tileAABB(this,Ge,An.zoom+1,dr,gr,An.wrap,An.minZ,An.maxZ,this.projection),zoom:An.zoom+1,x:dr,y:gr,wrap:An.wrap,fullyVisible:ir,tileID:void 0,shouldSplit:void 0,minZ:An.minZ,maxZ:An.maxZ};Ie&&!Ye&&(Tr.tileID=new j.OverscaledTileID(An.zoom+1===_n?Hn:An.zoom+1,An.wrap,An.zoom+1,dr,gr),Fn(Tr)),Ht.push(Tr)}else{const er=An.zoom===_n?Hn:An.zoom;if(U.minzoom&&U.minzoom>er)continue;const dr=Ke[0]-(.5+Wn+(An.wrap<<An.zoom))*(1<<ee-An.zoom),gr=Ke[1]-.5-Dn,Tr=An.tileID?An.tileID:new j.OverscaledTileID(er,An.wrap,An.zoom,Wn,Dn);an.push({tileID:Tr,distanceSq:dr*dr+gr*gr})}}if(this.fogCullDistSq){const An=this.fogCullDistSq,Wn=this.horizonLineFromTop();an=an.filter(Dn=>{const ir=[0,0,0,1],er=[j.EXTENT,j.EXTENT,0,1],dr=this.calculateFogTileMatrix(Dn.tileID.toUnwrapped());j.transformMat4$1(ir,ir,dr),j.transformMat4$1(er,er,dr);const gr=j.getAABBPointSquareDist(ir,er);if(gr===0)return!0;let Tr=!1;const Ur=this._elevation;if(Ur&&gr>An&&Wn!==0){const fr=this.calculateProjMatrix(Dn.tileID.toUnwrapped());let Cr;U.isTerrainDEM||(Cr=Ur.getMinMaxForTile(Dn.tileID)),Cr||(Cr={min:Yt,max:Pt});const Wr=j.furthestTileCorner(this.rotation),li=[Wr[0]*j.EXTENT,Wr[1]*j.EXTENT,Cr.max];j.transformMat4(li,li,fr),Tr=(1-li[1])*this.height*.5<Wn}return gr<An||Tr})}return an.sort((An,Wn)=>An.distanceSq-Wn.distanceSq).map(An=>An.tileID)}resize(U,ee){this.width=U,this.height=ee,this.pixelsToGLUnits=[2/U,-2/ee],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(U){return Math.pow(2,U)}scaleZoom(U){return Math.log(U)/Math.LN2}project(U){const ee=j.clamp(U.lat,-j.MAX_MERCATOR_LATITUDE,j.MAX_MERCATOR_LATITUDE),be=this.projection.project(U.lng,ee);return new j.pointGeometry(be.x*this.worldSize,be.y*this.worldSize)}unproject(U){return this.projection.unproject(U.x/this.worldSize,U.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(U,ee){let be,Ie;const Oe=this.centerPoint;if(this.projection.name==="globe"){const Fe=this.worldSize;be=(ee.x-Oe.x)/Fe,Ie=(ee.y-Oe.y)/Fe}else{const Fe=this.pointCoordinate(ee),Ge=this.pointCoordinate(Oe);be=Fe.x-Ge.x,Ie=Fe.y-Ge.y}const Le=this.locationCoordinate(U);this.setLocation(new j.MercatorCoordinate(Le.x-be,Le.y-Ie))}setLocation(U){this.center=this.coordinateLocation(U),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(U){return this.projection.locationPoint(this,U)}locationPoint3D(U){return this.projection.locationPoint(this,U,!0)}pointLocation(U){return this.coordinateLocation(this.pointCoordinate(U))}pointLocation3D(U){return this.coordinateLocation(this.pointCoordinate3D(U))}locationCoordinate(U,ee){const be=ee?j.mercatorZfromAltitude(ee,U.lat):void 0,Ie=this.projection.project(U.lng,U.lat);return new j.MercatorCoordinate(Ie.x,Ie.y,be)}coordinateLocation(U){return this.projection.unproject(U.x,U.y)}pointRayIntersection(U,ee){const be=ee!=null?ee:this._centerAltitude,Ie=[U.x,U.y,0,1],Oe=[U.x,U.y,1,1];j.transformMat4$1(Ie,Ie,this.pixelMatrixInverse),j.transformMat4$1(Oe,Oe,this.pixelMatrixInverse);const Le=Oe[3];j.scale$1(Ie,Ie,1/Ie[3]),j.scale$1(Oe,Oe,1/Le);const Fe=Ie[2],Ge=Oe[2];return{p0:Ie,p1:Oe,t:Fe===Ge?0:(be-Fe)/(Ge-Fe)}}screenPointToMercatorRay(U){const ee=[U.x,U.y,0,1],be=[U.x,U.y,1,1];return j.transformMat4$1(ee,ee,this.pixelMatrixInverse),j.transformMat4$1(be,be,this.pixelMatrixInverse),j.scale$1(ee,ee,1/ee[3]),j.scale$1(be,be,1/be[3]),ee[2]=j.mercatorZfromAltitude(ee[2],this._center.lat)*this.worldSize,be[2]=j.mercatorZfromAltitude(be[2],this._center.lat)*this.worldSize,j.scale$1(ee,ee,1/this.worldSize),j.scale$1(be,be,1/this.worldSize),new j.Ray([ee[0],ee[1],ee[2]],j.normalize([],j.sub([],be,ee)))}rayIntersectionCoordinate(U){const{p0:ee,p1:be,t:Ie}=U,Oe=j.mercatorZfromAltitude(ee[2],this._center.lat),Le=j.mercatorZfromAltitude(be[2],this._center.lat);return new j.MercatorCoordinate(j.number(ee[0],be[0],Ie)/this.worldSize,j.number(ee[1],be[1],Ie)/this.worldSize,j.number(Oe,Le,Ie))}pointCoordinate(U,ee=this._centerAltitude){return this.projection.pointCoordinate(this,U.x,U.y,ee)}pointCoordinate3D(U){if(!this.elevation)return this.pointCoordinate(U);let ee=this.projection.pointCoordinate3D(this,U.x,U.y);if(ee)return new j.MercatorCoordinate(ee[0],ee[1],ee[2]);let be=0,Ie=this.horizonLineFromTop();if(U.y>Ie)return this.pointCoordinate(U);const Oe=.02*Ie,Le=U.clone();for(let Fe=0;Fe<10&&Ie-be>Oe;Fe++){Le.y=j.number(be,Ie,.66);const Ge=this.projection.pointCoordinate3D(this,Le.x,Le.y);Ge?(Ie=Le.y,ee=Ge):be=Le.y}return ee?new j.MercatorCoordinate(ee[0],ee[1],ee[2]):this.pointCoordinate(U)}isPointAboveHorizon(U){return this.projection.isPointAboveHorizon(this,U)}_coordinatePoint(U,ee){const be=ee&&this.elevation?this.elevation.getAtPointOrZero(U,this._centerAltitude):this._centerAltitude,Ie=[U.x*this.worldSize,U.y*this.worldSize,be+U.toAltitude(),1];return j.transformMat4$1(Ie,Ie,this.pixelMatrix),Ie[3]>0?new j.pointGeometry(Ie[0]/Ie[3],Ie[1]/Ie[3]):new j.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(U,ee){const be=new j.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),Ie=new j.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),Oe=new j.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),Le=new j.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let Fe=this.pointCoordinate(be,U),Ge=this.pointCoordinate(Ie,U);const Ke=this.pointCoordinate(Oe,ee),Ye=this.pointCoordinate(Le,ee),ct=(mt,Mt)=>(Mt.y-mt.y)/(Mt.x-mt.x);return Fe.y>1&&Ge.y>=0?Fe=new j.MercatorCoordinate((1-Ye.y)/ct(Ye,Fe)+Ye.x,1):Fe.y<0&&Ge.y<=1&&(Fe=new j.MercatorCoordinate(-Ye.y/ct(Ye,Fe)+Ye.x,0)),Ge.y>1&&Fe.y>=0?Ge=new j.MercatorCoordinate((1-Ke.y)/ct(Ke,Ge)+Ke.x,1):Ge.y<0&&Fe.y<=1&&(Ge=new j.MercatorCoordinate(-Ke.y/ct(Ke,Ge)+Ke.x,0)),new j.LngLatBounds().extend(this.coordinateLocation(Fe)).extend(this.coordinateLocation(Ge)).extend(this.coordinateLocation(Ye)).extend(this.coordinateLocation(Ke))}_getBounds3D(){const U=this.elevation;if(!U.visibleDemTiles.length)return this._getBounds(0,0);const ee=U.visibleDemTiles.reduce((be,Ie)=>{if(Ie.dem){const Oe=Ie.dem.tree;be.min=Math.min(be.min,Oe.minimums[0]),be.max=Math.max(be.max,Oe.maximums[0])}return be},{min:Number.MAX_VALUE,max:0});return this._getBounds(ee.min*U.exaggeration(),ee.max*U.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(U=!0){const ee=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,be=this.height/2-ee*(1-this._horizonShift);return U?Math.max(0,be):be}getMaxBounds(){return this.maxBounds}setMaxBounds(U){this.maxBounds=U,this.minLat=-j.MAX_MERCATOR_LATITUDE,this.maxLat=j.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,U&&(this.minLat=U.getSouth(),this.maxLat=U.getNorth(),this.minLng=U.getWest(),this.maxLng=U.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=j.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=j.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=j.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=j.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(U,ee){return this.projection.createTileMatrix(this,ee,U)}calculateDistanceTileData(U){const ee=U.key,be=this._distanceTileDataCache;if(be[ee])return be[ee];const Ie=U.canonical,Oe=1/this.height,Le=this.cameraWorldSize/this.zoomScale(Ie.z),Fe=(Ie.x+Math.pow(2,Ie.z)*U.wrap)*Le,Ge=Ie.y*Le,Ke=this.point,Ye=this.angle,ct=Math.sin(-Ye),mt=-Math.cos(-Ye);return be[ee]={bearing:[ct,mt],center:[(Ke.x-Fe)*Oe,(Ke.y-Ge)*Oe],scale:Le/j.EXTENT*Oe},be[ee]}calculateFogTileMatrix(U){const ee=U.key,be=this._fogTileMatrixCache;if(be[ee])return be[ee];const Ie=this.projection.createTileMatrix(this,this.cameraWorldSize,U);return j.multiply(Ie,this.worldToFogMatrix,Ie),be[ee]=new Float32Array(Ie),be[ee]}calculateProjMatrix(U,ee=!1){const be=U.key,Ie=ee?this._alignedProjMatrixCache:this._projMatrixCache;if(Ie[be])return Ie[be];const Oe=this.calculatePosMatrix(U,this.worldSize);return j.multiply(Oe,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:ee?this.alignedProjMatrix:this.projMatrix,Oe),Ie[be]=new Float32Array(Oe),Ie[be]}calculatePixelsToTileUnitsMatrix(U){const ee=U.tileID.key,be=this._pixelsToTileUnitsCache;if(be[ee])return be[ee];const Ie=function(Oe,Le){const{scale:Fe}=Oe.tileTransform,Ge=Fe*j.EXTENT/(Oe.tileSize*Math.pow(2,Le.zoom-Oe.tileID.overscaledZ+Oe.tileID.canonical.z));return Ke=new Float32Array(4),mt=(Ye=Le.inverseAdjustmentMatrix)[1],Mt=Ye[2],At=Ye[3],kt=(ct=[Ge,Ge])[1],Ke[0]=Ye[0]*(Tt=ct[0]),Ke[1]=mt*Tt,Ke[2]=Mt*kt,Ke[3]=At*kt,Ke;var Ke,Ye,ct,mt,Mt,At,Tt,kt}(U,this);return be[ee]=Ie,be[ee]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const U=this._elevation;this._updateCameraState();const ee=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,be=this._computeCameraPosition(ee),Ie=this._camera.forward(),Oe=j.mercatorZfromAltitude(1,this._center.lat);be[2]/=Oe,Ie[2]/=Oe,j.normalize(Ie,Ie);const Le=U.raycast(be,Ie,U.exaggeration());if(Le){const Fe=j.scaleAndAdd([],be,Ie,Le),Ge=new j.MercatorCoordinate(Fe[0],Fe[1],j.mercatorZfromAltitude(Fe[2],j.latFromMercatorY(Fe[1]))),Ke=(Ge.z+j.length([Ge.x-be[0],Ge.y-be[1],Ge.z-be[2]*Oe]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Ke),this._centerAltitude=Ge.toAltitude(),this._center=this.coordinateLocation(Ge),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const U=this._elevation;this._updateCameraState();const ee=j.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,be=this._computeCameraPosition(ee),Ie=U.getAtPointOrZero(new j.MercatorCoordinate(...be)),Oe=this._minimumHeightOverTerrain()*Math.cos(j.degToRad(this._maxPitch)),Le=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*Ie;if(Le<Oe){const Fe=this.locationCoordinate(this._center,this._centerAltitude),Ge=[Fe.x-be[0],Fe.y-be[1],Fe.z-be[2]],Ke=j.length(Ge);Ge[2]-=(Oe-Le)/this._pixelsPerMercatorPixel;const Ye=j.length(Ge);if(Ye===0)return;j.scale$2(Ge,Ge,Ke/Ye*this._pixelsPerMercatorPixel),this._camera.position=[Fe.x-Ge[0],Fe.y-Ge[1],Fe.z*this._pixelsPerMercatorPixel-Ge[2]],this._camera.orientation=is(Ge,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const U=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||U){const mt=this.center;return mt.lat=j.clamp(mt.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!U)&&(mt.lng=j.clamp(mt.lng,this.minLng,this.maxLng)),this.center=mt,void(this._constraining=!1)}const ee=this._unmodified,{x:be,y:Ie}=this.point;let Oe=0,Le=be,Fe=Ie;const Ge=this.width/2,Ke=this.height/2,Ye=this.worldMinY*this.scale,ct=this.worldMaxY*this.scale;if(Ie-Ke<Ye&&(Fe=Ye+Ke),Ie+Ke>ct&&(Fe=ct-Ke),ct-Ye<this.height&&(Oe=Math.max(Oe,this.height/(ct-Ye)),Fe=(ct+Ye)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const mt=this.worldMinX*this.scale,Mt=this.worldMaxX*this.scale,At=this.worldSize/2-(mt+Mt)/2;Le=(be+At+this.worldSize)%this.worldSize-At,Le-Ge<mt&&(Le=mt+Ge),Le+Ge>Mt&&(Le=Mt-Ge),Mt-mt<this.width&&(Oe=Math.max(Oe,this.width/(Mt-mt)),Le=(Mt+mt)/2)}Le===be&&Fe===Ie||(this.center=this.unproject(new j.pointGeometry(Le,Fe))),Oe&&(this.zoom+=this.scaleZoom(Oe)),this._constrainCameraAltitude(),this._unmodified=ee,this._constraining=!1}_minZoomForBounds(){let U=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(U=Math.max(U,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),U}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const U=this.centerOffset,ee=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=j.mercatorZfromAltitude(1,this.center.lat)/j.mercatorZfromAltitude(1,j.GLOBE_SCALE_MATCH_LATITUDE));const be=Hs(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,be),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Ie=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?ee:1),Oe=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);Oe[8]=2*-U.x/this.width,Oe[9]=2*U.y/this.height;let Le=j.mul([],Oe,Ie);if(this.projection.isReprojectedInTileSpace){const Kt=this.locationCoordinate(this.center),Vt=j.identity([]);j.translate(Vt,Vt,[Kt.x*this.worldSize,Kt.y*this.worldSize,0]),j.multiply(Vt,Vt,kc(this)),j.translate(Vt,Vt,[-Kt.x*this.worldSize,-Kt.y*this.worldSize,0]),j.multiply(Le,Le,Vt),this.inverseAdjustmentMatrix=function(Xt){const Ht=kc(Xt,!0);return Ct([],[Ht[0],Ht[1],Ht[4],Ht[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=j.scale([],Le,[this.worldSize,this.worldSize,this.worldSize/ee,1]),this.projMatrix=Le,this.invProjMatrix=j.invert(new Float64Array(16),this.projMatrix);const Fe=j.invert([],Oe);this.frustumCorners=j.FrustumCorners.fromInvProjectionMatrix(Fe,this.horizonLineFromTop(),this.height);const Ge=new Float32Array(16);j.identity(Ge),j.scale(Ge,Ge,[1,-1,1]),j.rotateX(Ge,Ge,this._pitch),j.rotateZ(Ge,Ge,this.angle);const Ke=j.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Ye=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Ke[8]=2*-U.x/this.width,Ke[9]=2*(U.y+Ye)/this.height,this.skyboxMatrix=j.multiply(Ge,Ke,Ge);const ct=this.point,mt=ct.x,Mt=ct.y,At=this.width%2/2,Tt=this.height%2/2,kt=Math.cos(this.angle),wt=Math.sin(this.angle),$t=mt-Math.round(mt)+kt*At+wt*Tt,Pt=Mt-Math.round(Mt)+kt*Tt+wt*At,Yt=new Float64Array(Le);if(j.translate(Yt,Yt,[$t>.5?$t-1:$t,Pt>.5?Pt-1:Pt,0]),this.alignedProjMatrix=Yt,Le=j.create(),j.scale(Le,Le,[this.width/2,-this.height/2,1]),j.translate(Le,Le,[1,-1,0]),this.labelPlaneMatrix=Le,Le=j.create(),j.scale(Le,Le,[1,-1,1]),j.translate(Le,Le,[-1,-1,0]),j.scale(Le,Le,[2/this.width,2/this.height,1]),this.glCoordMatrix=Le,this.pixelMatrix=j.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},Le=j.invert(new Float64Array(16),this.pixelMatrix),!Le)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Le,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=j.calculateGlobeMatrix(this);const Kt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=j.transformMat4(Kt,Kt,Ie),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Le;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const U=this.cameraWorldSize,ee=this.cameraPixelsPerMeter,be=this._camera.position,Ie=1/this.height/this._pixelsPerMercatorPixel,Oe=[U,U,ee];j.scale$2(Oe,Oe,Ie),j.scale$2(be,be,-1),j.multiply$2(be,be,Oe);const Le=j.create();j.translate(Le,Le,be),j.scale(Le,Le,Oe),this.mercatorFogMatrix=Le,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(U,ee,Ie)}_computeCameraPosition(U){const ee=(U=U||this.pixelsPerMeter)/this.pixelsPerMeter,be=this._camera.forward(),Ie=this.point,Oe=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*ee-U/this.worldSize*this._centerAltitude;return[Ie.x/this.worldSize-be[0]*Oe,Ie.y/this.worldSize-be[1]*Oe,U/this.worldSize*this._centerAltitude-be[2]*Oe]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(U){const ee=this._maxCameraBoundsDistance()*Math.cos(this._pitch),be=U[2];let Ie=1;be>0&&(Ie=Math.min((ee-this._camera.position[2])/be,1)),this._camera.position=j.scaleAndAdd([],this._camera.position,U,Ie),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const U=this._camera.position,ee=this._camera.forward(),{pitch:be,bearing:Ie}=this._camera.getPitchBearing(),Oe=j.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Le=this._mercatorZfromZoom(this._maxZoom)*Math.cos(j.degToRad(this._maxPitch)),Fe=Math.max((U[2]-Oe)/Math.cos(be),Le),Ge=this._zoomFromMercatorZ(Fe);j.scaleAndAdd(U,U,ee,Fe),this._pitch=j.clamp(be,j.degToRad(this.minPitch),j.degToRad(this.maxPitch)),this.angle=j.wrap(Ie,-Math.PI,Math.PI),this._setZoom(j.clamp(Ge,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new j.MercatorCoordinate(U[0],U[1],U[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(U){return Math.pow(2,U)*this.tileSize}_mercatorZfromZoom(U){return this.cameraToCenterDistance/this._worldSizeFromZoom(U)}_minimumHeightOverTerrain(){const U=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(U)}_zoomFromMercatorZ(U){return this.scaleZoom(this.cameraToCenterDistance/(U*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(j.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(U,ee){const be=Math.min(U.x,ee.x),Ie=Math.max(U.x,ee.x),Oe=Math.min(U.y,ee.y),Le=Math.max(U.y,ee.y);if(Oe<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const Fe=[new j.pointGeometry(be,Oe),new j.pointGeometry(Ie,Le),new j.pointGeometry(be,Le),new j.pointGeometry(Ie,Oe)],Ge=this.renderWorldCopies?-3:0,Ke=this.renderWorldCopies?4:1;for(const Ye of Fe){const ct=this.pointRayIntersection(Ye);if(ct.t<0)return!0;const mt=this.rayIntersectionCoordinate(ct);if(mt.x<Ge||mt.y<0||mt.x>Ke||mt.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+j.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new j.pointGeometry(0,0),new j.pointGeometry(this.width,this.height))}zoomDeltaToMovement(U,ee){const be=j.length(j.sub([],this._camera.position,U)),Ie=this._zoomFromMercatorZ(be)+ee;return be-this._mercatorZfromZoom(Ie)}getCameraPoint(){if(this.projection.name==="globe"){const U=function(ee,be){const Ie=[ee[0],ee[1],ee[2],1];j.transformMat4$1(Ie,Ie,be);const Oe=Math.max(Ie[3],1e-6);return[Ie[0]/Oe,Ie[1]/Oe,Ie[2]/Oe,Oe]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new j.pointGeometry(U[0],U[1])}{const U=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new j.pointGeometry(0,U))}}getCameraToCenterDistance(U){const ee=Hs(U,this.zoom,this.width,this.height,1024),be=U.pixelSpaceConversion(this.center.lat,this.worldSize,ee);return .5/Math.tan(.5*this._fov)*this.height*be}}function Xs(de,U){let ee=!1,be=null;const Ie=()=>{be=null,ee&&(de(),be=setTimeout(Ie,U),ee=!1)};return()=>(ee=!0,be||Ie(),be)}class mu{constructor(U){this._hashName=U&&encodeURIComponent(U),j.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Xs(this._updateHashUnthrottled.bind(this),300)}addTo(U){return this._map=U,j.window.addEventListener("hashchange",this._onHashChange,!1),U.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),j.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const U=this._map;if(!U)return"";const ee=Rl(U);if(this._hashName){const be=this._hashName;let Ie=!1;const Oe=j.window.location.hash.slice(1).split("&").map(Le=>{const Fe=Le.split("=")[0];return Fe===be?(Ie=!0,`${Fe}=${ee}`):Le}).filter(Le=>Le);return Ie||Oe.push(`${be}=${ee}`),`#${Oe.join("&")}`}return`#${ee}`}_getCurrentHash(){const U=j.window.location.hash.replace("#","");if(this._hashName){let ee;return U.split("&").map(be=>be.split("=")).forEach(be=>{be[0]===this._hashName&&(ee=be)}),(ee&&ee[1]||"").split("/")}return U.split("/")}_onHashChange(){const U=this._map;if(!U)return!1;const ee=this._getCurrentHash();if(ee.length>=3&&!ee.some(be=>isNaN(be))){const be=U.dragRotate.isEnabled()&&U.touchZoomRotate.isEnabled()?+(ee[3]||0):U.getBearing();return U.jumpTo({center:[+ee[2],+ee[1]],zoom:+ee[0],bearing:be,pitch:+(ee[4]||0)}),!0}return!1}_updateHashUnthrottled(){const U=j.window.location.href.replace(/(#.+)?$/,this.getHashString());j.window.history.replaceState(j.window.history.state,null,U)}}function Rl(de,U){const ee=de.getCenter(),be=Math.round(100*de.getZoom())/100,Ie=Math.ceil((be*Math.LN2+Math.log(512/360/.5))/Math.LN10),Oe=Math.pow(10,Ie),Le=Math.round(ee.lng*Oe)/Oe,Fe=Math.round(ee.lat*Oe)/Oe,Ge=de.getBearing(),Ke=de.getPitch();let Ye=U?`/${Le}/${Fe}/${be}`:`${be}/${Fe}/${Le}`;return(Ge||Ke)&&(Ye+="/"+Math.round(10*Ge)/10),Ke&&(Ye+=`/${Math.round(Ke)}`),Ye}const ea={linearity:.3,easing:j.bezier(0,0,.3,1)},ch=j.extend({deceleration:2500,maxSpeed:1400},ea),uh=j.extend({deceleration:20,maxSpeed:1400},ea),os=j.extend({deceleration:1e3,maxSpeed:360},ea),$l=j.extend({deceleration:1e3,maxSpeed:90},ea);class Mc{constructor(U){this._map=U,this.clear()}clear(){this._inertiaBuffer=[]}record(U){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.exported.now(),settings:U})}_drainInertiaBuffer(){const U=this._inertiaBuffer,ee=j.exported.now();for(;U.length>0&&ee-U[0].time>160;)U.shift()}_onMoveEnd(U){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const ee={zoom:0,bearing:0,pitch:0,pan:new j.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:Oe}of this._inertiaBuffer)ee.zoom+=Oe.zoomDelta||0,ee.bearing+=Oe.bearingDelta||0,ee.pitch+=Oe.pitchDelta||0,Oe.panDelta&&ee.pan._add(Oe.panDelta),Oe.around&&(ee.around=Oe.around),Oe.pinchAround&&(ee.pinchAround=Oe.pinchAround);const be=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Ie={};if(ee.pan.mag()){const Oe=Ys(ee.pan.mag(),be,j.extend({},ch,U||{}));Ie.offset=ee.pan.mult(Oe.amount/ee.pan.mag()),Ie.center=this._map.transform.center,Ks(Ie,Oe)}if(ee.zoom){const Oe=Ys(ee.zoom,be,uh);Ie.zoom=this._map.transform.zoom+Oe.amount,Ks(Ie,Oe)}if(ee.bearing){const Oe=Ys(ee.bearing,be,os);Ie.bearing=this._map.transform.bearing+j.clamp(Oe.amount,-179,179),Ks(Ie,Oe)}if(ee.pitch){const Oe=Ys(ee.pitch,be,$l);Ie.pitch=this._map.transform.pitch+Oe.amount,Ks(Ie,Oe)}if(Ie.zoom||Ie.bearing){const Oe=ee.pinchAround===void 0?ee.around:ee.pinchAround;Ie.around=Oe?this._map.unproject(Oe):this._map.getCenter()}return this.clear(),Ie.noMoveStart=!0,Ie}}function Ks(de,U){(!de.duration||de.duration<U.duration)&&(de.duration=U.duration,de.easing=U.easing)}function Ys(de,U,ee){const{maxSpeed:be,linearity:Ie,deceleration:Oe}=ee,Le=j.clamp(de*Ie/(U/1e3),-be,be),Fe=Math.abs(Le)/(Oe*Ie);return{easing:ee.easing,duration:1e3*Fe,amount:Le*(Fe/2)}}class Xi extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,ee,be,Ie={}){const Oe=Xe(ee.getCanvasContainer(),be),Le=ee.unproject(Oe);super(U,j.extend({point:Oe,lngLat:Le,originalEvent:be},Ie)),this._defaultPrevented=!1,this.target=ee}}class Oa extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,ee,be){const Ie=U==="touchend"?be.changedTouches:be.touches,Oe=qe(ee.getCanvasContainer(),Ie),Le=Oe.map(Ge=>ee.unproject(Ge)),Fe=Oe.reduce((Ge,Ke,Ye,ct)=>Ge.add(Ke.div(ct.length)),new j.pointGeometry(0,0));super(U,{points:Oe,point:Fe,lngLats:Le,lngLat:ee.unproject(Fe),originalEvent:be}),this._defaultPrevented=!1}}class gu extends j.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(U,ee,be){super(U,{originalEvent:be}),this._defaultPrevented=!1}}class Js{constructor(U,ee){this._map=U,this._clickTolerance=ee.clickTolerance}reset(){this._mousedownPos=void 0}wheel(U){return this._firePreventable(new gu(U.type,this._map,U))}mousedown(U,ee){return this._mousedownPos=ee,this._firePreventable(new Xi(U.type,this._map,U))}mouseup(U){this._map.fire(new Xi(U.type,this._map,U))}preclick(U){const ee=j.extend({},U);ee.type="preclick",this._map.fire(new Xi(ee.type,this._map,ee))}click(U,ee){this._mousedownPos&&this._mousedownPos.dist(ee)>=this._clickTolerance||(this.preclick(U),this._map.fire(new Xi(U.type,this._map,U)))}dblclick(U){return this._firePreventable(new Xi(U.type,this._map,U))}mouseover(U){this._map.fire(new Xi(U.type,this._map,U))}mouseout(U){this._map.fire(new Xi(U.type,this._map,U))}touchstart(U){return this._firePreventable(new Oa(U.type,this._map,U))}touchmove(U){this._map.fire(new Oa(U.type,this._map,U))}touchend(U){this._map.fire(new Oa(U.type,this._map,U))}touchcancel(U){this._map.fire(new Oa(U.type,this._map,U))}_firePreventable(U){if(this._map.fire(U),U.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yu{constructor(U){this._map=U}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(U){this._map.fire(new Xi(U.type,this._map,U))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(U){this._delayContextMenu?this._contextMenuEvent=U:this._map.fire(new Xi(U.type,this._map,U)),this._map.listens("contextmenu")&&U.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vu{constructor(U,ee){this._map=U,this._el=U.getCanvasContainer(),this._container=U.getContainer(),this._clickTolerance=ee.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(U,ee){this.isEnabled()&&U.shiftKey&&U.button===0&&(Ne(),this._startPos=this._lastPos=ee,this._active=!0)}mousemoveWindow(U,ee){if(!this._active)return;const be=ee;if(this._lastPos.equals(be)||!this._box&&be.dist(this._startPos)<this._clickTolerance)return;const Ie=this._startPos;this._lastPos=be,this._box||(this._box=we("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",U));const Oe=Math.min(Ie.x,be.x),Le=Math.max(Ie.x,be.x),Fe=Math.min(Ie.y,be.y),Ge=Math.max(Ie.y,be.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Oe}px,${Fe}px)`,this._box.style.width=Le-Oe+"px",this._box.style.height=Ge-Fe+"px")})}mouseupWindow(U,ee){if(!this._active||U.button!==0)return;const be=this._startPos,Ie=ee;if(this.reset(),Ze(),be.x!==Ie.x||be.y!==Ie.y)return this._map.fire(new j.Event("boxzoomend",{originalEvent:U})),{cameraAnimation:Oe=>Oe.fitScreenCoordinates(be,Ie,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",U)}keydown(U){this._active&&U.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",U))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ze(),delete this._startPos,delete this._lastPos}_fireEvent(U,ee){return this._map.fire(new j.Event(U,{originalEvent:ee}))}}function zl(de,U){const ee={};for(let be=0;be<de.length;be++)ee[de[be].identifier]=U[be];return ee}class as{constructor(U){this.reset(),this.numTouches=U.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(U,ee,be){(this.centroid||be.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=U.timeStamp),be.length===this.numTouches&&(this.centroid=function(Ie){const Oe=new j.pointGeometry(0,0);for(const Le of Ie)Oe._add(Le);return Oe.div(Ie.length)}(ee),this.touches=zl(be,ee)))}touchmove(U,ee,be){if(this.aborted||!this.centroid)return;const Ie=zl(be,ee);for(const Oe in this.touches){const Le=this.touches[Oe],Fe=Ie[Oe];(!Fe||Fe.dist(Le)>30)&&(this.aborted=!0)}}touchend(U,ee,be){if((!this.centroid||U.timeStamp-this.startTime>500)&&(this.aborted=!0),be.length===0){const Ie=!this.aborted&&this.centroid;if(this.reset(),Ie)return Ie}}}class Dl{constructor(U){this.singleTap=new as(U),this.numTaps=U.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(U,ee,be){this.singleTap.touchstart(U,ee,be)}touchmove(U,ee,be){this.singleTap.touchmove(U,ee,be)}touchend(U,ee,be){const Ie=this.singleTap.touchend(U,ee,be);if(Ie){const Oe=U.timeStamp-this.lastTime<500,Le=!this.lastTap||this.lastTap.dist(Ie)<30;if(Oe&&Le||this.reset(),this.count++,this.lastTime=U.timeStamp,this.lastTap=Ie,this.count===this.numTaps)return this.reset(),Ie}}}class xu{constructor(){this._zoomIn=new Dl({numTouches:1,numTaps:2}),this._zoomOut=new Dl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(U,ee,be){this._zoomIn.touchstart(U,ee,be),this._zoomOut.touchstart(U,ee,be)}touchmove(U,ee,be){this._zoomIn.touchmove(U,ee,be),this._zoomOut.touchmove(U,ee,be)}touchend(U,ee,be){const Ie=this._zoomIn.touchend(U,ee,be),Oe=this._zoomOut.touchend(U,ee,be);return Ie?(this._active=!0,U.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Le=>Le.easeTo({duration:300,zoom:Le.getZoom()+1,around:Le.unproject(Ie)},{originalEvent:U})}):Oe?(this._active=!0,U.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Le=>Le.easeTo({duration:300,zoom:Le.getZoom()-1,around:Le.unproject(Oe)},{originalEvent:U})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const bu={0:1,2:2};class ss{constructor(U){this.reset(),this._clickTolerance=U.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(U,ee){return!1}_move(U,ee){return{}}mousedown(U,ee){if(this._lastPoint)return;const be=Je(U);this._correctButton(U,be)&&(this._lastPoint=ee,this._eventButton=be)}mousemoveWindow(U,ee){const be=this._lastPoint;if(be){if(U.preventDefault(),this._eventButton!=null&&function(Ie,Oe){const Le=bu[Oe];return Ie.buttons===void 0||(Ie.buttons&Le)!==Le}(U,this._eventButton))this.reset();else if(this._moved||!(ee.dist(be)<this._clickTolerance))return this._moved=!0,this._lastPoint=ee,this._move(be,ee)}}mouseupWindow(U){this._lastPoint&&Je(U)===this._eventButton&&(this._moved&&Ze(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wu extends ss{mousedown(U,ee){super.mousedown(U,ee),this._lastPoint&&(this._active=!0)}_correctButton(U,ee){return ee===0&&!U.ctrlKey}_move(U,ee){return{around:ee,panDelta:ee.sub(U)}}}class ta extends ss{_correctButton(U,ee){return ee===0&&U.ctrlKey||ee===2}_move(U,ee){const be=.8*(ee.x-U.x);if(be)return this._active=!0,{bearingDelta:be}}contextmenu(U){U.preventDefault()}}class Gi extends ss{_correctButton(U,ee){return ee===0&&U.ctrlKey||ee===2}_move(U,ee){const be=-.5*(ee.y-U.y);if(be)return this._active=!0,{pitchDelta:be}}contextmenu(U){U.preventDefault()}}class hh{constructor(U,ee){this._map=U,this._el=U.getCanvasContainer(),this._minTouches=1,this._clickTolerance=ee.clickTolerance||1,this.reset(),j.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new j.pointGeometry(0,0)}touchstart(U,ee,be){return this._calculateTransform(U,ee,be)}touchmove(U,ee,be){if(this._active&&!(be.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(be.length===1&&!j.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return U.cancelable&&U.preventDefault(),this._calculateTransform(U,ee,be)}}touchend(U,ee,be){this._calculateTransform(U,ee,be),this._active&&be.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(U,ee,be){be.length>0&&(this._active=!0);const Ie=zl(be,ee),Oe=new j.pointGeometry(0,0),Le=new j.pointGeometry(0,0);let Fe=0;for(const Ke in Ie){const Ye=Ie[Ke],ct=this._touches[Ke];ct&&(Oe._add(Ye),Le._add(Ye.sub(ct)),Fe++,Ie[Ke]=Ye)}if(this._touches=Ie,Fe<this._minTouches||!Le.mag())return;const Ge=Le.div(Fe);return this._sum._add(Ge),this._sum.mag()<this._clickTolerance?void 0:{around:Oe.div(Fe),panDelta:Ge}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=we("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Ll{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(U){}_move(U,ee,be){return{}}touchstart(U,ee,be){this._firstTwoTouches||be.length<2||(this._firstTwoTouches=[be[0].identifier,be[1].identifier],this._start([ee[0],ee[1]]))}touchmove(U,ee,be){const Ie=this._firstTwoTouches;if(!Ie)return;U.preventDefault();const[Oe,Le]=Ie,Fe=Bl(be,ee,Oe),Ge=Bl(be,ee,Le);if(!Fe||!Ge)return;const Ke=this._aroundCenter?null:Fe.add(Ge).div(2);return this._move([Fe,Ge],Ke,U)}touchend(U,ee,be){if(!this._firstTwoTouches)return;const[Ie,Oe]=this._firstTwoTouches,Le=Bl(be,ee,Ie),Fe=Bl(be,ee,Oe);Le&&Fe||(this._active&&Ze(),this.reset())}touchcancel(){this.reset()}enable(U){this._enabled=!0,this._aroundCenter=!!U&&U.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bl(de,U,ee){for(let be=0;be<de.length;be++)if(de[be].identifier===ee)return U[be]}function Eu(de,U){return Math.log(de/U)/Math.LN2}class bo extends Ll{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(U){this._startDistance=this._distance=U[0].dist(U[1])}_move(U,ee){const be=this._distance;if(this._distance=U[0].dist(U[1]),this._active||!(Math.abs(Eu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Eu(this._distance,be),pinchAround:ee}}}function Ic(de,U){return 180*de.angleWith(U)/Math.PI}class Ra extends Ll{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(U){this._startVector=this._vector=U[0].sub(U[1]),this._minDiameter=U[0].dist(U[1])}_move(U,ee){const be=this._vector;if(this._vector=U[0].sub(U[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ic(this._vector,be),pinchAround:ee}}_isBelowThreshold(U){this._minDiameter=Math.min(this._minDiameter,U.mag());const ee=25/(Math.PI*this._minDiameter)*360,be=Ic(U,this._startVector);return Math.abs(be)<ee}}function wo(de){return Math.abs(de.y)>Math.abs(de.x)}class na extends Ll{constructor(U){super(),this._map=U}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(U){this._lastPoints=U,wo(U[0].sub(U[1]))&&(this._valid=!1)}_move(U,ee,be){const Ie=this._lastPoints;if(!Ie)return;const Oe=U[0].sub(Ie[0]),Le=U[1].sub(Ie[1]);return this._map._cooperativeGestures&&be.touches.length<3||(this._valid=this.gestureBeginsVertically(Oe,Le,be.timeStamp),!this._valid)?void 0:(this._lastPoints=U,this._active=!0,{pitchDelta:(Oe.y+Le.y)/2*-.5})}gestureBeginsVertically(U,ee,be){if(this._valid!==void 0)return this._valid;const Ie=U.mag()>=2,Oe=ee.mag()>=2;if(!Ie&&!Oe)return;if(!Ie||!Oe)return this._firstMove==null&&(this._firstMove=be),be-this._firstMove<100&&void 0;const Le=U.y>0==ee.y>0;return wo(U)&&wo(ee)&&Le}}const cr={panStep:100,bearingStep:15,pitchStep:10};class ls{constructor(){const U=cr;this._panStep=U.panStep,this._bearingStep=U.bearingStep,this._pitchStep=U.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(U){if(U.altKey||U.ctrlKey||U.metaKey)return;let ee=0,be=0,Ie=0,Oe=0,Le=0;switch(U.keyCode){case 61:case 107:case 171:case 187:ee=1;break;case 189:case 109:case 173:ee=-1;break;case 37:U.shiftKey?be=-1:(U.preventDefault(),Oe=-1);break;case 39:U.shiftKey?be=1:(U.preventDefault(),Oe=1);break;case 38:U.shiftKey?Ie=1:(U.preventDefault(),Le=-1);break;case 40:U.shiftKey?Ie=-1:(U.preventDefault(),Le=1);break;default:return}return this._rotationDisabled&&(be=0,Ie=0),{cameraAnimation:Fe=>{const Ge=Fe.getZoom();Fe.easeTo({duration:300,easeId:"keyboardHandler",easing:Tu,zoom:ee?Math.round(Ge)+ee*(U.shiftKey?2:1):Ge,bearing:Fe.getBearing()+be*this._bearingStep,pitch:Fe.getPitch()+Ie*this._pitchStep,offset:[-Oe*this._panStep,-Le*this._panStep],center:Fe.getCenter()},{originalEvent:U})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Tu(de){return de*(2-de)}const cs=4.000244140625;class Qs{constructor(U,ee){this._map=U,this._el=U.getCanvasContainer(),this._handler=ee,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,j.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(U){this._defaultZoomRate=U}setWheelZoomRate(U){this._wheelZoomRate=U}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(U){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!U&&U.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(U){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(U.ctrlKey||U.metaKey||this.isZooming()||j.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let ee=U.deltaMode===j.window.WheelEvent.DOM_DELTA_LINE?40*U.deltaY:U.deltaY;const be=j.exported.now(),Ie=be-(this._lastWheelEventTime||0);this._lastWheelEventTime=be,ee!==0&&ee%cs==0?this._type="wheel":ee!==0&&Math.abs(ee)<4?this._type="trackpad":Ie>400?(this._type=null,this._lastValue=ee,this._timeout=setTimeout(this._onTimeout,40,U)):this._type||(this._type=Math.abs(Ie*ee)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ee+=this._lastValue)),U.shiftKey&&ee&&(ee/=4),this._type&&(this._lastWheelEvent=U,this._delta-=ee,this._active||this._start(U)),U.preventDefault()}_onTimeout(U){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(U)}_start(U){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const ee=Xe(this._el,U);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:ee,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const U=this._map.transform,ee=()=>U._terrainEnabled()&&this._aroundCoord?U.computeZoomRelativeTo(this._aroundCoord):U.zoom;if(this._delta!==0){const Ge=this._type==="wheel"&&Math.abs(this._delta)>cs?this._wheelZoomRate:this._defaultZoomRate;let Ke=2/(1+Math.exp(-Math.abs(this._delta*Ge)));this._delta<0&&Ke!==0&&(Ke=1/Ke);const Ye=ee(),ct=Math.pow(2,Ye),mt=typeof this._targetZoom=="number"?U.zoomScale(this._targetZoom):ct;this._targetZoom=Math.min(U.maxZoom,Math.max(U.minZoom,U.scaleZoom(mt*Ke))),this._type==="wheel"&&(this._startZoom=Ye,this._easing=this._smoothOutEasing(200)),this._delta=0}const be=typeof this._targetZoom=="number"?this._targetZoom:ee(),Ie=this._startZoom,Oe=this._easing;let Le,Fe=!1;if(this._type==="wheel"&&Ie&&Oe){const Ge=Math.min((j.exported.now()-this._lastWheelEventTime)/200,1),Ke=Oe(Ge);Le=j.number(Ie,be,Ke),Ge<1?this._frameId||(this._frameId=!0):Fe=!0}else Le=be,Fe=!0;return this._active=!0,Fe&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Fe,zoomDelta:Le-ee(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(U){let ee=j.ease;if(this._prevEase){const be=this._prevEase,Ie=(j.exported.now()-be.start)/be.duration,Oe=be.easing(Ie+.01)-be.easing(Ie),Le=.27/Math.sqrt(Oe*Oe+1e-4)*.01,Fe=Math.sqrt(.0729-Le*Le);ee=j.bezier(Le,Fe,.25,1)}return this._prevEase={start:j.exported.now(),duration:U,easing:ee},ee}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=we("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(j.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Pc{constructor(U,ee){this._clickZoom=U,this._tapZoom=ee}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Au{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(U,ee){return U.preventDefault(),{cameraAnimation:be=>{be.easeTo({duration:300,zoom:be.getZoom()+(U.shiftKey?-1:1),around:be.unproject(ee)},{originalEvent:U})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ku{constructor(){this._tap=new Dl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(U,ee,be){this._swipePoint||(this._tapTime&&U.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?be.length>0&&(this._swipePoint=ee[0],this._swipeTouch=be[0].identifier):this._tap.touchstart(U,ee,be))}touchmove(U,ee,be){if(this._tapTime){if(this._swipePoint){if(be[0].identifier!==this._swipeTouch)return;const Ie=ee[0],Oe=Ie.y-this._swipePoint.y;return this._swipePoint=Ie,U.preventDefault(),this._active=!0,{zoomDelta:Oe/128}}}else this._tap.touchmove(U,ee,be)}touchend(U,ee,be){this._tapTime?this._swipePoint&&be.length===0&&this.reset():this._tap.touchend(U,ee,be)&&(this._tapTime=U.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Su{constructor(U,ee,be){this._el=U,this._mousePan=ee,this._touchPan=be}enable(U){this._inertiaOptions=U||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Cu{constructor(U,ee,be){this._pitchWithRotate=U.pitchWithRotate,this._mouseRotate=ee,this._mousePitch=be}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class el{constructor(U,ee,be,Ie){this._el=U,this._touchZoom=ee,this._touchRotate=be,this._tapDragZoom=Ie,this._rotationDisabled=!1,this._enabled=!0}enable(U){this._touchZoom.enable(U),this._rotationDisabled||this._touchRotate.enable(U),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ai=de=>de.zoom||de.drag||de.pitch||de.rotate;class Fl extends j.Event{}class pi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(U,ee){const be=j.sub([],ee,U);this.radius=j.length(be[2]<0?j.div([],be,this.constants):[be[0],be[1],0])}projectRay(U){j.div(U,U,this.constants),j.normalize(U,U),j.mul$1(U,U,this.constants);const ee=j.scale$2([],U,this.radius);if(ee[2]>0){const be=j.scale$2([],[0,0,1],j.dot(ee,[0,0,1])),Ie=j.scale$2([],j.normalize([],[ee[0],ee[1],0]),this.radius),Oe=j.add([],ee,j.scale$2([],j.sub([],j.add([],Ie,be),ee),2));ee[0]=Oe[0],ee[1]=Oe[1]}return ee}}function qi(de){return de.panDelta&&de.panDelta.mag()||de.zoomDelta||de.bearingDelta||de.pitchDelta}class Oc{constructor(U,ee){this._map=U,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mc(U),this._bearingSnap=ee.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new pi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(ee),j.bindAll(["handleEvent","handleWindowEvent"],this);const be=this._el;this._listeners=[[be,"touchstart",{passive:!0}],[be,"touchmove",{passive:!1}],[be,"touchend",void 0],[be,"touchcancel",void 0],[be,"mousedown",void 0],[be,"mousemove",void 0],[be,"mouseup",void 0],[j.window.document,"mousemove",{capture:!0}],[j.window.document,"mouseup",void 0],[be,"mouseover",void 0],[be,"mouseout",void 0],[be,"dblclick",void 0],[be,"click",void 0],[be,"keydown",{capture:!1}],[be,"keyup",void 0],[be,"wheel",{passive:!1}],[be,"contextmenu",void 0],[j.window,"blur",void 0]];for(const[Ie,Oe,Le]of this._listeners)Ie.addEventListener(Oe,Ie===j.window.document?this.handleWindowEvent:this.handleEvent,Le)}destroy(){for(const[U,ee,be]of this._listeners)U.removeEventListener(ee,U===j.window.document?this.handleWindowEvent:this.handleEvent,be)}_addDefaultHandlers(U){const ee=this._map,be=ee.getCanvasContainer();this._add("mapEvent",new Js(ee,U));const Ie=ee.boxZoom=new vu(ee,U);this._add("boxZoom",Ie);const Oe=new xu,Le=new Au;ee.doubleClickZoom=new Pc(Le,Oe),this._add("tapZoom",Oe),this._add("clickZoom",Le);const Fe=new ku;this._add("tapDragZoom",Fe);const Ge=ee.touchPitch=new na(ee);this._add("touchPitch",Ge);const Ke=new ta(U),Ye=new Gi(U);ee.dragRotate=new Cu(U,Ke,Ye),this._add("mouseRotate",Ke,["mousePitch"]),this._add("mousePitch",Ye,["mouseRotate"]);const ct=new wu(U),mt=new hh(ee,U);ee.dragPan=new Su(be,ct,mt),this._add("mousePan",ct),this._add("touchPan",mt,["touchZoom","touchRotate"]);const Mt=new Ra,At=new bo;ee.touchZoomRotate=new el(be,At,Mt,Fe),this._add("touchRotate",Mt,["touchPan","touchZoom"]),this._add("touchZoom",At,["touchPan","touchRotate"]),this._add("blockableMapEvent",new yu(ee));const Tt=ee.scrollZoom=new Qs(ee,this);this._add("scrollZoom",Tt,["mousePan"]);const kt=ee.keyboard=new ls;this._add("keyboard",kt);for(const wt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])U.interactive&&U[wt]&&ee[wt].enable(U[wt])}_add(U,ee,be){this._handlers.push({handlerName:U,handler:ee,allowed:be}),this._handlersById[U]=ee}stop(U){if(!this._updatingCamera){for(const{handler:ee}of this._handlers)ee.reset();this._inertia.clear(),this._fireEvents({},{},U),this._changes=[]}}isActive(){for(const{handler:U}of this._handlers)if(U.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ai(this._eventsInProgress)||this.isZooming()}_blockedByActive(U,ee,be){for(const Ie in U)if(Ie!==be&&(!ee||ee.indexOf(Ie)<0))return!0;return!1}handleWindowEvent(U){this.handleEvent(U,`${U.type}Window`)}_getMapTouches(U){const ee=[];for(const be of U)this._el.contains(be.target)&&ee.push(be);return ee}handleEvent(U,ee){this._updatingCamera=!0;const be=U.type==="renderFrame",Ie=be?void 0:U,Oe={needsRenderFrame:!1},Le={},Fe={},Ge=U.touches?this._getMapTouches(U.touches):void 0,Ke=Ge?qe(this._el,Ge):be?void 0:Xe(this._el,U);for(const{handlerName:mt,handler:Mt,allowed:At}of this._handlers){if(!Mt.isEnabled())continue;let Tt;this._blockedByActive(Fe,At,mt)?Mt.reset():Mt[ee||U.type]&&(Tt=Mt[ee||U.type](U,Ke,Ge),this.mergeHandlerResult(Oe,Le,Tt,mt,Ie),Tt&&Tt.needsRenderFrame&&this._triggerRenderFrame()),(Tt||Mt.isActive())&&(Fe[mt]=Mt)}const Ye={};for(const mt in this._previousActiveHandlers)Fe[mt]||(Ye[mt]=Ie);this._previousActiveHandlers=Fe,(Object.keys(Ye).length||qi(Oe))&&(this._changes.push([Oe,Le,Ye]),this._triggerRenderFrame()),(Object.keys(Fe).length||qi(Oe))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ct}=Oe;ct&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ct(this._map))}mergeHandlerResult(U,ee,be,Ie,Oe){if(!be)return;j.extend(U,be);const Le={handlerName:Ie,originalEvent:be.originalEvent||Oe};be.zoomDelta!==void 0&&(ee.zoom=Le),be.panDelta!==void 0&&(ee.drag=Le),be.pitchDelta!==void 0&&(ee.pitch=Le),be.bearingDelta!==void 0&&(ee.rotate=Le)}_applyChanges(){const U={},ee={},be={};for(const[Ie,Oe,Le]of this._changes)Ie.panDelta&&(U.panDelta=(U.panDelta||new j.pointGeometry(0,0))._add(Ie.panDelta)),Ie.zoomDelta&&(U.zoomDelta=(U.zoomDelta||0)+Ie.zoomDelta),Ie.bearingDelta&&(U.bearingDelta=(U.bearingDelta||0)+Ie.bearingDelta),Ie.pitchDelta&&(U.pitchDelta=(U.pitchDelta||0)+Ie.pitchDelta),Ie.around!==void 0&&(U.around=Ie.around),Ie.aroundCoord!==void 0&&(U.aroundCoord=Ie.aroundCoord),Ie.pinchAround!==void 0&&(U.pinchAround=Ie.pinchAround),Ie.noInertia&&(U.noInertia=Ie.noInertia),j.extend(ee,Oe),j.extend(be,Le);this._updateMapTransform(U,ee,be),this._changes=[]}_updateMapTransform(U,ee,be){const Ie=this._map,Oe=Ie.transform,Le=$t=>[$t.x,$t.y,$t.z];if(($t=>{const Pt=this._eventsInProgress.drag;return Pt&&!this._handlersById[Pt.handlerName].isActive()})()&&!qi(U)){const $t=Oe.zoom;Oe.cameraElevationReference="sea",Oe.recenterOnTerrain(),Oe.cameraElevationReference="ground",$t!==Oe.zoom&&this._map._update(!0)}if(!qi(U))return void this._fireEvents(ee,be,!0);let{panDelta:Fe,zoomDelta:Ge,bearingDelta:Ke,pitchDelta:Ye,around:ct,aroundCoord:mt,pinchAround:Mt}=U;Mt!==void 0&&(ct=Mt),($t=>ee.drag&&!this._eventsInProgress.drag)()&&ct&&(this._dragOrigin=Le(Oe.pointCoordinate3D(ct)),this._trackingEllipsoid.setup(Oe._camera.position,this._dragOrigin)),Oe.cameraElevationReference="sea",Ie._stop(!0),ct=ct||Ie.transform.centerPoint,Ke&&(Oe.bearing+=Ke),Ye&&(Oe.pitch+=Ye),Oe._updateCameraState();const At=[0,0,0];if(Fe)if(Oe.projection.name==="mercator"){const $t=this._trackingEllipsoid.projectRay(Oe.screenPointToMercatorRay(ct).dir),Pt=this._trackingEllipsoid.projectRay(Oe.screenPointToMercatorRay(ct.sub(Fe)).dir);At[0]=Pt[0]-$t[0],At[1]=Pt[1]-$t[1]}else{const $t=Oe.pointCoordinate(ct);if(Oe.projection.name==="globe"){Fe=Fe.rotate(-Oe.angle);const Pt=Oe._pixelsPerMercatorPixel/Oe.worldSize;At[0]=-Fe.x*j.mercatorScale(j.latFromMercatorY($t.y))*Pt,At[1]=-Fe.y*j.mercatorScale(Oe.center.lat)*Pt}else{const Pt=Oe.pointCoordinate(ct.sub(Fe));$t&&Pt&&(At[0]=Pt.x-$t.x,At[1]=Pt.y-$t.y)}}const Tt=Oe.zoom,kt=[0,0,0];if(Ge){const $t=Le(mt||Oe.pointCoordinate3D(ct)),Pt={dir:j.normalize([],j.sub([],$t,Oe._camera.position))};if(Pt.dir[2]<0){const Yt=Oe.zoomDeltaToMovement($t,Ge);j.scale$2(kt,Pt.dir,Yt)}}const wt=j.add(At,At,kt);Oe._translateCameraConstrained(wt),Ge&&Math.abs(Oe.zoom-Tt)>1e-4&&Oe.recenterOnTerrain(),Oe.cameraElevationReference="ground",this._map._update(),U.noInertia||this._inertia.record(U),this._fireEvents(ee,be,!0)}_fireEvents(U,ee,be){const Ie=ai(this._eventsInProgress),Oe=ai(U),Le={};for(const Ye in U){const{originalEvent:ct}=U[Ye];this._eventsInProgress[Ye]||(Le[`${Ye}start`]=ct),this._eventsInProgress[Ye]=U[Ye]}!Ie&&Oe&&this._fireEvent("movestart",Oe.originalEvent);for(const Ye in Le)this._fireEvent(Ye,Le[Ye]);Oe&&this._fireEvent("move",Oe.originalEvent);for(const Ye in U){const{originalEvent:ct}=U[Ye];this._fireEvent(Ye,ct)}const Fe={};let Ge;for(const Ye in this._eventsInProgress){const{handlerName:ct,originalEvent:mt}=this._eventsInProgress[Ye];this._handlersById[ct].isActive()||(delete this._eventsInProgress[Ye],Ge=ee[ct]||mt,Fe[`${Ye}end`]=Ge)}for(const Ye in Fe)this._fireEvent(Ye,Fe[Ye]);const Ke=ai(this._eventsInProgress);if(be&&(Ie||Oe)&&!Ke){this._updatingCamera=!0;const Ye=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ct=mt=>mt!==0&&-this._bearingSnap<mt&&mt<this._bearingSnap;Ye?(ct(Ye.bearing||this._map.getBearing())&&(Ye.bearing=0),this._map.easeTo(Ye,{originalEvent:Ge})):(this._map.fire(new j.Event("moveend",{originalEvent:Ge})),ct(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(U,ee){this._map.fire(new j.Event(U,ee?{originalEvent:ee}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(U=>{this._frameId=void 0,this.handleEvent(new Fl("renderFrame",{timeStamp:U})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Rc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class $c extends j.Evented{constructor(U,ee){super(),this._moving=!1,this._zooming=!1,this.transform=U,this._bearingSnap=ee.bearingSnap,j.bindAll(["_renderFrameCallback"],this)}getCenter(){return new j.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(U,ee){return this.jumpTo({center:U},ee)}panBy(U,ee,be){return U=j.pointGeometry.convert(U).mult(-1),this.panTo(this.transform.center,j.extend({offset:U},ee),be)}panTo(U,ee,be){return this.easeTo(j.extend({center:U},ee),be)}getZoom(){return this.transform.zoom}setZoom(U,ee){return this.jumpTo({zoom:U},ee),this}zoomTo(U,ee,be){return this.easeTo(j.extend({zoom:U},ee),be)}zoomIn(U,ee){return this.zoomTo(this.getZoom()+1,U,ee),this}zoomOut(U,ee){return this.zoomTo(this.getZoom()-1,U,ee),this}getBearing(){return this.transform.bearing}setBearing(U,ee){return this.jumpTo({bearing:U},ee),this}getPadding(){return this.transform.padding}setPadding(U,ee){return this.jumpTo({padding:U},ee),this}rotateTo(U,ee,be){return this.easeTo(j.extend({bearing:U},ee),be)}resetNorth(U,ee){return this.rotateTo(0,j.extend({duration:1e3},U),ee),this}resetNorthPitch(U,ee){return this.easeTo(j.extend({bearing:0,pitch:0,duration:1e3},U),ee),this}snapToNorth(U,ee){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(U,ee):this}getPitch(){return this.transform.pitch}setPitch(U,ee){return this.jumpTo({pitch:U},ee),this}cameraForBounds(U,ee){this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),U=j.LngLatBounds.convert(U);const be=ee&&ee.bearing||0;return this._cameraForBoxAndBearing(U.getNorthWest(),U.getSouthEast(),be,ee)}_extendCameraOptions(U){const ee={top:0,bottom:0,right:0,left:0};if(typeof(U=j.extend({padding:ee,offset:[0,0],maxZoom:this.transform.maxZoom},U)).padding=="number"){const be=U.padding;U.padding={top:be,bottom:be,right:be,left:be}}return U.padding=j.extend(ee,U.padding),U}_cameraForBoxAndBearing(U,ee,be,Ie){const Oe=this._extendCameraOptions(Ie),Le=this.transform,Fe=Le.padding,Ge=Le.project(j.LngLat.convert(U)),Ke=Le.project(j.LngLat.convert(ee)),Ye=new j.pointGeometry(Ge.x,Ke.y),ct=new j.pointGeometry(Ke.x,Ge.y),mt=-j.degToRad(be),Mt=Ge.rotate(mt),At=Ke.rotate(mt),Tt=Ye.rotate(mt),kt=ct.rotate(mt),wt=new j.pointGeometry(Math.max(Mt.x,At.x,Tt.x,kt.x),Math.max(Mt.y,At.y,Tt.y,kt.y)),$t=new j.pointGeometry(Math.min(Mt.x,At.x,Tt.x,kt.x),Math.min(Mt.y,At.y,Tt.y,kt.y)),Pt=wt.sub($t),Yt=(Le.width-((Fe.left||0)+(Fe.right||0)+Oe.padding.left+Oe.padding.right))/Pt.x,Kt=(Le.height-((Fe.top||0)+(Fe.bottom||0)+Oe.padding.top+Oe.padding.bottom))/Pt.y;if(Kt<0||Yt<0)return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Vt=Math.min(Le.scaleZoom(Le.scale*Math.min(Yt,Kt)),Oe.maxZoom),Xt=typeof Oe.offset.x=="number"&&typeof Oe.offset.y=="number"?new j.pointGeometry(Oe.offset.x,Oe.offset.y):j.pointGeometry.convert(Oe.offset),Ht=new j.pointGeometry((Oe.padding.left-Oe.padding.right)/2,(Oe.padding.top-Oe.padding.bottom)/2).rotate(be*Math.PI/180),an=Xt.add(Ht).mult(Le.scale/Le.zoomScale(Vt));return{center:Le.unproject(Ge.add(Ke).div(2).sub(an)),zoom:Vt,bearing:be}}_cameraForBox(U,ee,be,Ie,Oe){const Le=this._extendCameraOptions(Oe);be=be||0,Ie=Ie||0,U=j.LngLat.convert(U),ee=j.LngLat.convert(ee);const Fe=this.transform.clone();Fe.padding=Le.padding;const Ge=this.getFreeCameraOptions(),Ke=new j.LngLat(.5*(U.lng+ee.lng),.5*(U.lat+ee.lat)),Ye=.5*(be+Ie);if(Fe._camera.position[2]<j.mercatorZfromAltitude(Ye,Ke.lat))return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Ge.lookAtPoint(Ke),Fe.setFreeCameraOptions(Ge);const ct=j.MercatorCoordinate.fromLngLat(U),mt=j.MercatorCoordinate.fromLngLat(ee),Mt=Fe.pointRayIntersection(Fe.centerPoint,Ye),At=[(Tt=Fe.rayIntersectionCoordinate(Mt)).x,Tt.y,Tt.z];var Tt;const kt=Fe.screenPointToMercatorRay(Fe.centerPoint),wt=Fe.projection.name!=="globe";let $t,Pt=0;do{const Yt=Math.floor(Fe.zoom),Kt=1<<Yt,Vt=Math.min(Kt*ct.x,Kt*mt.x),Xt=Math.min(Kt*ct.y,Kt*mt.y),Ht=Math.max(Kt*ct.x,Kt*mt.x),an=Math.max(Kt*ct.y,Kt*mt.y),_n=new j.Aabb([Vt,Xt,be],[Ht,an,Ie]),Hn=j.Frustum.fromInvProjectionMatrix(Fe.invProjMatrix,Fe.worldSize,Yt,wt);if(_n.intersects(Hn)!==2){$t&&(Fe._camera.position=j.scaleAndAdd([],Fe._camera.position,kt.dir,-$t),Fe._updateStateFromCamera());break}const dn=j.sub([],Fe._camera.position,At);$t=.5*j.length(dn),Fe._camera.position=j.scaleAndAdd([],Fe._camera.position,kt.dir,$t);try{Fe._updateStateFromCamera()}catch{return void j.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++Pt<10);return{center:Fe.center,zoom:Fe.zoom,bearing:Fe.bearing,pitch:Fe.pitch}}fitBounds(U,ee,be){return this.transform.projection.name==="globe"&&j.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(U,ee),ee,be)}_raycastElevationBox(U,ee){const be=this.transform.elevation;if(!be)return;const Ie=new j.pointGeometry(U.x,ee.y),Oe=new j.pointGeometry(ee.x,U.y),Le=be.pointCoordinate(U);if(!Le)return;const Fe=be.pointCoordinate(ee);if(!Fe)return;const Ge=be.pointCoordinate(Ie);if(!Ge)return;const Ke=be.pointCoordinate(Oe);if(!Ke)return;const Ye=new j.MercatorCoordinate(Le[0],Le[1]).toLngLat(),ct=new j.MercatorCoordinate(Fe[0],Fe[1]).toLngLat(),mt=new j.MercatorCoordinate(Ge[0],Ge[1]).toLngLat(),Mt=new j.MercatorCoordinate(Ke[0],Ke[1]).toLngLat(),At=Math.min(Ye.lng,Math.min(ct.lng,Math.min(mt.lng,Mt.lng))),Tt=Math.min(Ye.lat,Math.min(ct.lat,Math.min(mt.lat,Mt.lat))),kt=Math.max(Ye.lng,Math.max(ct.lng,Math.max(mt.lng,Mt.lng))),wt=Math.max(Ye.lat,Math.max(ct.lat,Math.max(mt.lat,Mt.lat))),$t=Math.min(Le[3],Math.min(Fe[3],Math.min(Ge[3],Ke[3]))),Pt=Math.max(Le[3],Math.max(Fe[3],Math.max(Ge[3],Ke[3])));return{minLngLat:new j.LngLat(At,Tt),maxLngLat:new j.LngLat(kt,wt),minAltitude:$t,maxAltitude:Pt}}fitScreenCoordinates(U,ee,be,Ie,Oe){let Le,Fe,Ge,Ke;this.transform.projection.name==="globe"&&j.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const Ye=j.pointGeometry.convert(U),ct=j.pointGeometry.convert(ee),mt=this._raycastElevationBox(Ye,ct);if(mt)Le=mt.minLngLat,Fe=mt.maxLngLat,Ge=mt.minAltitude,Ke=mt.maxAltitude;else{if(this.transform.anyCornerOffEdge(Ye,ct))return this;Le=this.transform.pointLocation(Ye),Fe=this.transform.pointLocation(ct)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(j.pointGeometry.convert(U)),this.transform.pointLocation(j.pointGeometry.convert(ee)),be,Ie):this._cameraForBox(Le,Fe,Ge,Ke,Ie),Ie,Oe)}_fitInternal(U,ee,be){return U?(delete(ee=j.extend(U,ee)).padding,ee.linear?this.easeTo(ee,be):this.flyTo(ee,be)):this}jumpTo(U,ee){this.stop();const be=U.preloadOnly?this.transform.clone():this.transform;let Ie=!1,Oe=!1,Le=!1;return"zoom"in U&&be.zoom!==+U.zoom&&(Ie=!0,be.zoom=+U.zoom),U.center!==void 0&&(be.center=j.LngLat.convert(U.center)),"bearing"in U&&be.bearing!==+U.bearing&&(Oe=!0,be.bearing=+U.bearing),"pitch"in U&&be.pitch!==+U.pitch&&(Le=!0,be.pitch=+U.pitch),U.padding==null||be.isPaddingEqual(U.padding)||(be.padding=U.padding),U.preloadOnly?(this._preloadTiles(be),this):(this.fire(new j.Event("movestart",ee)).fire(new j.Event("move",ee)),Ie&&this.fire(new j.Event("zoomstart",ee)).fire(new j.Event("zoom",ee)).fire(new j.Event("zoomend",ee)),Oe&&this.fire(new j.Event("rotatestart",ee)).fire(new j.Event("rotate",ee)).fire(new j.Event("rotateend",ee)),Le&&this.fire(new j.Event("pitchstart",ee)).fire(new j.Event("pitch",ee)).fire(new j.Event("pitchend",ee)),this.fire(new j.Event("moveend",ee)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||j.warnOnce(Rc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(U,ee){const be=this.transform;if(!be.projection.supportsFreeCamera)return j.warnOnce(Rc),this;this.stop();const Ie=be.zoom,Oe=be.pitch,Le=be.bearing;be.setFreeCameraOptions(U);const Fe=Ie!==be.zoom,Ge=Oe!==be.pitch,Ke=Le!==be.bearing;return this.fire(new j.Event("movestart",ee)).fire(new j.Event("move",ee)),Fe&&this.fire(new j.Event("zoomstart",ee)).fire(new j.Event("zoom",ee)).fire(new j.Event("zoomend",ee)),Ke&&this.fire(new j.Event("rotatestart",ee)).fire(new j.Event("rotate",ee)).fire(new j.Event("rotateend",ee)),Ge&&this.fire(new j.Event("pitchstart",ee)).fire(new j.Event("pitch",ee)).fire(new j.Event("pitchend",ee)),this.fire(new j.Event("moveend",ee)),this}easeTo(U,ee){this._stop(!1,U.easeId),((U=j.extend({offset:[0,0],duration:500,easing:j.ease},U)).animate===!1||!U.essential&&j.exported.prefersReducedMotion)&&(U.duration=0);const be=this.transform,Ie=this.getZoom(),Oe=this.getBearing(),Le=this.getPitch(),Fe=this.getPadding(),Ge="zoom"in U?+U.zoom:Ie,Ke="bearing"in U?this._normalizeBearing(U.bearing,Oe):Oe,Ye="pitch"in U?+U.pitch:Le,ct="padding"in U?U.padding:be.padding,mt=j.pointGeometry.convert(U.offset);let Mt,At,Tt;if(be.projection.name==="globe"){const an=j.MercatorCoordinate.fromLngLat(be.center),_n=mt.rotate(-be.angle);an.x+=_n.x/be.worldSize,an.y+=_n.y/be.worldSize;const Hn=an.toLngLat(),dn=j.LngLat.convert(U.center||Hn);this._normalizeCenter(dn),Mt=be.centerPoint.add(_n),At=new j.pointGeometry(an.x,an.y).mult(be.worldSize),Tt=new j.pointGeometry(j.mercatorXfromLng(dn.lng),j.mercatorYfromLat(dn.lat)).mult(be.worldSize).sub(At)}else{Mt=be.centerPoint.add(mt);const an=be.pointLocation(Mt),_n=j.LngLat.convert(U.center||an);this._normalizeCenter(_n),At=be.project(an),Tt=be.project(_n).sub(At)}const kt=be.zoomScale(Ge-Ie);let wt,$t;U.around&&(wt=j.LngLat.convert(U.around),$t=be.locationPoint(wt));const Pt=this._zooming||Ge!==Ie,Yt=this._rotating||Oe!==Ke,Kt=this._pitching||Ye!==Le,Vt=!be.isPaddingEqual(ct),Xt=an=>_n=>{if(Pt&&(an.zoom=j.number(Ie,Ge,_n)),Yt&&(an.bearing=j.number(Oe,Ke,_n)),Kt&&(an.pitch=j.number(Le,Ye,_n)),Vt&&(an.interpolatePadding(Fe,ct,_n),Mt=an.centerPoint.add(mt)),wt)an.setLocationAtPoint(wt,$t);else{const Hn=an.zoomScale(an.zoom-Ie),dn=Ge>Ie?Math.min(2,kt):Math.max(.5,kt),Rn=Math.pow(dn,1-_n),Fn=an.unproject(At.add(Tt.mult(_n*Rn)).mult(Hn));an.setLocationAtPoint(an.renderWorldCopies?Fn.wrap():Fn,Mt)}return U.preloadOnly||this._fireMoveEvents(ee),an};if(U.preloadOnly){const an=this._emulate(Xt,U.duration,be);return this._preloadTiles(an),this}const Ht={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Pt,this._rotating=Yt,this._pitching=Kt,this._padding=Vt,this._easeId=U.easeId,this._prepareEase(ee,U.noMoveStart,Ht),this._ease(Xt(be),an=>{be.recenterOnTerrain(),this._afterEase(ee,an)},U),this}_prepareEase(U,ee,be={}){this._moving=!0,this.transform.cameraElevationReference="sea",ee||be.moving||this.fire(new j.Event("movestart",U)),this._zooming&&!be.zooming&&this.fire(new j.Event("zoomstart",U)),this._rotating&&!be.rotating&&this.fire(new j.Event("rotatestart",U)),this._pitching&&!be.pitching&&this.fire(new j.Event("pitchstart",U))}_fireMoveEvents(U){this.fire(new j.Event("move",U)),this._zooming&&this.fire(new j.Event("zoom",U)),this._rotating&&this.fire(new j.Event("rotate",U)),this._pitching&&this.fire(new j.Event("pitch",U))}_afterEase(U,ee){if(this._easeId&&ee&&this._easeId===ee)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const be=this._zooming,Ie=this._rotating,Oe=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,be&&this.fire(new j.Event("zoomend",U)),Ie&&this.fire(new j.Event("rotateend",U)),Oe&&this.fire(new j.Event("pitchend",U)),this.fire(new j.Event("moveend",U))}flyTo(U,ee){if(!U.essential&&j.exported.prefersReducedMotion){const ir=j.pick(U,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ir,ee)}this.stop(),U=j.extend({offset:[0,0],speed:1.2,curve:1.42,easing:j.ease},U);const be=this.transform,Ie=this.getZoom(),Oe=this.getBearing(),Le=this.getPitch(),Fe=this.getPadding(),Ge="zoom"in U?j.clamp(+U.zoom,be.minZoom,be.maxZoom):Ie,Ke="bearing"in U?this._normalizeBearing(U.bearing,Oe):Oe,Ye="pitch"in U?+U.pitch:Le,ct="padding"in U?U.padding:be.padding,mt=be.zoomScale(Ge-Ie),Mt=j.pointGeometry.convert(U.offset);let At=be.centerPoint.add(Mt);const Tt=be.pointLocation(At),kt=j.LngLat.convert(U.center||Tt);this._normalizeCenter(kt);const wt=be.project(Tt),$t=be.project(kt).sub(wt);let Pt=U.curve;const Yt=Math.max(be.width,be.height),Kt=Yt/mt,Vt=$t.mag();if("minZoom"in U){const ir=j.clamp(Math.min(U.minZoom,Ie,Ge),be.minZoom,be.maxZoom),er=Yt/be.zoomScale(ir-Ie);Pt=Math.sqrt(er/Vt*2)}const Xt=Pt*Pt;function Ht(ir){const er=(Kt*Kt-Yt*Yt+(ir?-1:1)*Xt*Xt*Vt*Vt)/(2*(ir?Kt:Yt)*Xt*Vt);return Math.log(Math.sqrt(er*er+1)-er)}function an(ir){return(Math.exp(ir)-Math.exp(-ir))/2}function _n(ir){return(Math.exp(ir)+Math.exp(-ir))/2}const Hn=Ht(0);let dn=function(ir){return _n(Hn)/_n(Hn+Pt*ir)},Rn=function(ir){return Yt*((_n(Hn)*(an(er=Hn+Pt*ir)/_n(er))-an(Hn))/Xt)/Vt;var er},Fn=(Ht(1)-Hn)/Pt;if(Math.abs(Vt)<1e-6||!isFinite(Fn)){if(Math.abs(Yt-Kt)<1e-6)return this.easeTo(U,ee);const ir=Kt<Yt?-1:1;Fn=Math.abs(Math.log(Kt/Yt))/Pt,Rn=function(){return 0},dn=function(er){return Math.exp(ir*Pt*er)}}U.duration="duration"in U?+U.duration:1e3*Fn/("screenSpeed"in U?+U.screenSpeed/Pt:+U.speed),U.maxDuration&&U.duration>U.maxDuration&&(U.duration=0);const Qn=Oe!==Ke,An=Ye!==Le,Wn=!be.isPaddingEqual(ct),Dn=ir=>er=>{const dr=er*Fn,gr=1/dn(dr);ir.zoom=er===1?Ge:Ie+ir.scaleZoom(gr),Qn&&(ir.bearing=j.number(Oe,Ke,er)),An&&(ir.pitch=j.number(Le,Ye,er)),Wn&&(ir.interpolatePadding(Fe,ct,er),At=ir.centerPoint.add(Mt));const Tr=er===1?kt:ir.unproject(wt.add($t.mult(Rn(dr))).mult(gr));return ir.setLocationAtPoint(ir.renderWorldCopies?Tr.wrap():Tr,At),ir._updateCameraOnTerrain(),U.preloadOnly||this._fireMoveEvents(ee),ir};if(U.preloadOnly){const ir=this._emulate(Dn,U.duration,be);return this._preloadTiles(ir),this}return this._zooming=!0,this._rotating=Qn,this._pitching=An,this._padding=Wn,this._prepareEase(ee,!1),this._ease(Dn(be),()=>this._afterEase(ee),U),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(U,ee){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const be=this._onEaseEnd;this._onEaseEnd=void 0,be.call(this,ee)}if(!U){const be=this.handlers;be&&be.stop(!1)}return this}_ease(U,ee,be){be.animate===!1||be.duration===0?(U(1),ee()):(this._easeStart=j.exported.now(),this._easeOptions=be,this._onEaseFrame=U,this._onEaseEnd=ee,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const U=Math.min((j.exported.now()-this._easeStart)/this._easeOptions.duration,1),ee=this._onEaseFrame;ee&&ee(this._easeOptions.easing(U)),U<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(U,ee){U=j.wrap(U,-180,180);const be=Math.abs(U-ee);return Math.abs(U-360-ee)<be&&(U-=360),Math.abs(U+360-ee)<be&&(U+=360),U}_normalizeCenter(U){const ee=this.transform;if(!ee.renderWorldCopies||ee.maxBounds)return;const be=U.lng-ee.center.lng;U.lng+=be>180?-360:be<-180?360:0}_emulate(U,ee,be){const Ie=Math.ceil(15*ee/1e3),Oe=[],Le=U(be.clone());for(let Fe=0;Fe<=Ie;Fe++){const Ge=Le(Fe/Ie);Oe.push(Ge.clone())}return Oe}}class _o{constructor(U={}){this.options=U,j.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(U){const ee=this.options&&this.options.compact;return this._map=U,this._container=we("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=we("button","mapboxgl-ctrl-attrib-button",this._container),we("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=we("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),ee&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ee===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(U,ee){const be=this._map._getUIString(`AttributionControl.${ee}`);U.setAttribute("aria-label",be),U.removeAttribute("title"),U.firstElementChild&&U.firstElementChild.setAttribute("title",be)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let U=this._editLink;U||(U=this._editLink=this._container.querySelector(".mapbox-improve-map"));const ee=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||j.config.ACCESS_TOKEN}];if(U){const be=ee.reduce((Ie,Oe,Le)=>(Oe.value&&(Ie+=`${Oe.key}=${Oe.value}${Le<ee.length-1?"&":""}`),Ie),"?");U.href=`${j.config.FEEDBACK_URL}/${be}#${Rl(this._map,!0)}`,U.rel="noopener nofollow",this._setElementTitle(U,"MapFeedback")}}_updateData(U){!U||U.sourceDataType!=="metadata"&&U.sourceDataType!=="visibility"&&U.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let U=[];if(this._map.style.stylesheet){const Ie=this._map.style.stylesheet;this.styleOwner=Ie.owner,this.styleId=Ie.id}const ee=this._map.style._sourceCaches;for(const Ie in ee){const Oe=ee[Ie];if(Oe.used){const Le=Oe.getSource();Le.attribution&&U.indexOf(Le.attribution)<0&&U.push(Le.attribution)}}U.sort((Ie,Oe)=>Ie.length-Oe.length),U=U.filter((Ie,Oe)=>{for(let Le=Oe+1;Le<U.length;Le++)if(U[Le].indexOf(Ie)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?U=[...this.options.customAttribution,...U]:U.unshift(this.options.customAttribution));const be=U.join(" | ");be!==this._attribHTML&&(this._attribHTML=be,U.length?(this._innerContainer.innerHTML=be,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ga{constructor(){j.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(U){this._map=U,this._container=we("div","mapboxgl-ctrl");const ee=we("a","mapboxgl-ctrl-logo");return ee.target="_blank",ee.rel="noopener nofollow",ee.href="https://www.mapbox.com/",ee.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ee.setAttribute("rel","noopener nofollow"),this._container.appendChild(ee),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(U){U&&U.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const U=this._map.style._sourceCaches;if(Object.entries(U).length===0)return!0;for(const ee in U){const be=U[ee].getSource();if(be.hasOwnProperty("mapbox_logo")&&!be.mapbox_logo)return!1}return!0}_updateCompact(){const U=this._container.children;if(U.length){const ee=U[0];this._map.getCanvasContainer().offsetWidth<250?ee.classList.add("mapboxgl-compact"):ee.classList.remove("mapboxgl-compact")}}}class zc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(U){const ee=++this._id;return this._queue.push({callback:U,id:ee,cancelled:!1}),ee}remove(U){const ee=this._currentlyRunning,be=ee?this._queue.concat(ee):this._queue;for(const Ie of be)if(Ie.id===U)return void(Ie.cancelled=!0)}run(U=0){const ee=this._currentlyRunning=this._queue;this._queue=[];for(const be of ee)if(!be.cancelled&&(be.callback(U),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ya(de,U,ee){if(de=new j.LngLat(de.lng,de.lat),U){const be=new j.LngLat(de.lng-360,de.lat),Ie=new j.LngLat(de.lng+360,de.lat),Oe=360*Math.ceil(Math.abs(de.lng-ee.center.lng)/360),Le=ee.locationPoint(de).distSqr(U),Fe=U.x<0||U.y<0||U.x>ee.width||U.y>ee.height;ee.locationPoint(be).distSqr(U)<Le&&(Fe||Math.abs(be.lng-ee.center.lng)<Oe)?de=be:ee.locationPoint(Ie).distSqr(U)<Le&&(Fe||Math.abs(Ie.lng-ee.center.lng)<Oe)&&(de=Ie)}for(;Math.abs(de.lng-ee.center.lng)>180;){const be=ee.locationPoint(de);if(be.x>=0&&be.y>=0&&be.x<=ee.width&&be.y<=ee.height)break;de.lng>ee.center.lng?de.lng-=360:de.lng+=360}return de}const tl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Nl extends j.Evented{constructor(U,ee){if(super(),(U instanceof j.window.HTMLElement||ee)&&(U=j.extend({element:U},ee)),j.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=U&&U.anchor||"center",this._color=U&&U.color||"#3FB1CE",this._scale=U&&U.scale||1,this._draggable=U&&U.draggable||!1,this._clickTolerance=U&&U.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=U&&U.rotation||0,this._rotationAlignment=U&&U.rotationAlignment||"auto",this._pitchAlignment=U&&U.pitchAlignment&&U.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),U&&U.element)this._element=U.element,this._offset=j.pointGeometry.convert(U&&U.offset||[0,0]);else{this._defaultMarker=!0,this._element=we("div");const Ie=41,Oe=27,Le=ke("svg",{display:"block",height:Ie*this._scale+"px",width:Oe*this._scale+"px",viewBox:`0 0 ${Oe} ${Ie}`},this._element),Fe=ke("radialGradient",{id:"shadowGradient"},ke("defs",{},Le));ke("stop",{offset:"10%","stop-opacity":.4},Fe),ke("stop",{offset:"100%","stop-opacity":.05},Fe),ke("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Le),ke("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Le),ke("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Le),ke("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Le),this._offset=j.pointGeometry.convert(U&&U.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Ie=>{Ie.preventDefault()}),this._element.addEventListener("mousedown",Ie=>{Ie.preventDefault()});const be=this._element.classList;for(const Ie in tl)be.remove(`mapboxgl-marker-anchor-${Ie}`);be.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(U){return U===this._map||(this.remove(),this._map=U,U.getCanvasContainer().appendChild(this._element),U.on("move",this._updateMoving),U.on("moveend",this._update),U.on("remove",this._clearFadeTimer),U._addMarker(this),this.setDraggable(this._draggable),this._update(),U.on("click",this._onMapClick)),this}remove(){const U=this._map;return U&&(U.off("click",this._onMapClick),U.off("move",this._updateMoving),U.off("moveend",this._update),U.off("mousedown",this._addDragHandler),U.off("touchstart",this._addDragHandler),U.off("mouseup",this._onUp),U.off("touchend",this._onUp),U.off("mousemove",this._onMove),U.off("touchmove",this._onMove),U.off("remove",this._clearFadeTimer),U._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(U){return this._lngLat=j.LngLat.convert(U),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(U){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),U){if(!("offset"in U.options)){const Ie=Math.sqrt(Math.pow(13.5,2)/2);U.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Ie,-1*(38.1-13.5+Ie)],"bottom-right":[-Ie,-1*(38.1-13.5+Ie)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=U,U._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(U){const ee=U.code,be=U.charCode||U.keyCode;ee!=="Space"&&ee!=="Enter"&&be!==32&&be!==13||this.togglePopup()}_onMapClick(U){const ee=U.originalEvent.target,be=this._element;this._popup&&(ee===be||be.contains(ee))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const U=this._popup;return U?(U.isOpen()?(U.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(U.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const U=this._map;if(!U)return!1;const ee=U.unproject(this._pos),be=U.getFreeCameraOptions();if(!be.position)return!1;const Ie=be.position.toLngLat();return Ie.distanceTo(ee)<.9*Ie.distanceTo(this._lngLat)}_evaluateOpacity(){const U=this._map;if(!U)return;const ee=this._pos;if(!ee||ee.x<0||ee.x>U.transform.width||ee.y<0||ee.y>U.transform.height)return void this._clearFadeTimer();const be=U.unproject(ee);let Ie;U._showingGlobe()&&j.isLngLatBehindGlobe(U.transform,this._lngLat)?Ie=0:(Ie=1-U._queryFogOpacity(be),U.transform._terrainEnabled()&&U.getTerrain()&&this._behindTerrain()&&(Ie*=.2)),this._element.style.opacity=`${Ie}`,this._element.style.pointerEvents=Ie>0?"auto":"none",this._popup&&this._popup._setOpacity(Ie),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const U=this._pos;if(!U||!this._map)return;const ee=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${U.x}px,${U.y}px)
            ${tl[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${ee.x}px,${ee.y}px)
        `}_calculateXYTransform(){const U=this._pos,ee=this._map,be=this.getPitchAlignment();if(!ee||!U||be!=="map")return"";if(!ee._showingGlobe()){const Ge=ee.getPitch();return Ge?`rotateX(${Ge}deg)`:""}const Ie=j.radToDeg(j.globeTiltAtLngLat(ee.transform,this._lngLat)),Oe=U.sub(j.globeCenterToScreenPoint(ee.transform)),Le=Math.abs(Oe.x)+Math.abs(Oe.y);if(Le===0)return"";const Fe=Ie/Le;return`rotateX(${-Oe.y*Fe}deg) rotateY(${Oe.x*Fe}deg)`}_calculateZTransform(){const U=this._pos,ee=this._map;if(!ee||!U)return"";let be=0;const Ie=this.getRotationAlignment();if(Ie==="map")if(ee._showingGlobe()){const Oe=ee.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),Le=ee.project(new j.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(Oe);be=j.radToDeg(Math.atan2(Le.y,Le.x))-90}else be=-ee.getBearing();else if(Ie==="horizon"){const Oe=j.smoothstep(4,6,ee.getZoom()),Le=j.globeCenterToScreenPoint(ee.transform);Le.y+=Oe*ee.transform.height;const Fe=U.sub(Le),Ge=j.radToDeg(Math.atan2(Fe.y,Fe.x));be=(Ge>90?Ge-270:Ge+90)*(1-Oe)}return be+=this._rotation,be?`rotateZ(${be}deg)`:""}_update(U){j.window.cancelAnimationFrame(this._updateFrameId);const ee=this._map;ee&&(ee.transform.renderWorldCopies&&(this._lngLat=ya(this._lngLat,this._pos,ee.transform)),this._pos=ee.project(this._lngLat),U===!0?this._updateFrameId=j.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),ee._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(ee._showingGlobe()||ee.getTerrain()||ee.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(U){return this._offset=j.pointGeometry.convert(U),this._update(),this}_onMove(U){const ee=this._map;if(ee){if(!this._isDragging){const be=this._clickTolerance||ee._clickTolerance;this._isDragging=U.point.dist(this._pointerdownPos)>=be}this._isDragging&&(this._pos=U.point.sub(this._positionDelta),this._lngLat=ee.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new j.Event("dragstart"))),this.fire(new j.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const U=this._map;U&&(U.off("mousemove",this._onMove),U.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new j.Event("dragend")),this._state="inactive"}_addDragHandler(U){const ee=this._map;ee&&this._element.contains(U.originalEvent.target)&&(U.preventDefault(),this._positionDelta=U.point.sub(this._pos),this._pointerdownPos=U.point,this._state="pending",ee.on("mousemove",this._onMove),ee.on("touchmove",this._onMove),ee.once("mouseup",this._onUp),ee.once("touchend",this._onUp))}setDraggable(U){this._draggable=!!U;const ee=this._map;return ee&&(U?(ee.on("mousedown",this._addDragHandler),ee.on("touchstart",this._addDragHandler)):(ee.off("mousedown",this._addDragHandler),ee.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(U){return this._rotation=U||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(U){return this._rotationAlignment=U||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(U){return this._pitchAlignment=U||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class ra{constructor(U){this.jumpTo(U)}getValue(U){if(U<=this._startTime)return this._start;if(U>=this._endTime)return this._end;const ee=j.easeCubicInOut((U-this._startTime)/(this._endTime-this._startTime));return this._start*(1-ee)+this._end*ee}isEasing(U){return U>=this._startTime&&U<=this._endTime}jumpTo(U){this._startTime=-1/0,this._endTime=-1/0,this._start=U,this._end=U}easeTo(U,ee,be){this._start=this.getValue(ee),this._end=U,this._startTime=ee,this._endTime=ee+be}}const Dc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},jl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function zo(de){de.parentNode&&de.parentNode.removeChild(de)}const Lc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ul{constructor(U,ee,be=!1){this._clickTolerance=10,this.element=ee,this.mouseRotate=new ta({clickTolerance:U.dragRotate._mouseRotate._clickTolerance}),this.map=U,be&&(this.mousePitch=new Gi({clickTolerance:U.dragRotate._mousePitch._clickTolerance})),j.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),ee.addEventListener("mousedown",this.mousedown),ee.addEventListener("touchstart",this.touchstart,{passive:!1}),ee.addEventListener("touchmove",this.touchmove),ee.addEventListener("touchend",this.touchend),ee.addEventListener("touchcancel",this.reset)}down(U,ee){this.mouseRotate.mousedown(U,ee),this.mousePitch&&this.mousePitch.mousedown(U,ee),Ne()}move(U,ee){const be=this.map,Ie=this.mouseRotate.mousemoveWindow(U,ee),Oe=Ie&&Ie.bearingDelta;if(Oe&&be.setBearing(be.getBearing()+Oe),this.mousePitch){const Le=this.mousePitch.mousemoveWindow(U,ee),Fe=Le&&Le.pitchDelta;Fe&&be.setPitch(be.getPitch()+Fe)}}off(){const U=this.element;U.removeEventListener("mousedown",this.mousedown),U.removeEventListener("touchstart",this.touchstart,{passive:!1}),U.removeEventListener("touchmove",this.touchmove),U.removeEventListener("touchend",this.touchend),U.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ze(),j.window.removeEventListener("mousemove",this.mousemove),j.window.removeEventListener("mouseup",this.mouseup)}mousedown(U){this.down(j.extend({},U,{ctrlKey:!0,preventDefault:()=>U.preventDefault()}),Xe(this.element,U)),j.window.addEventListener("mousemove",this.mousemove),j.window.addEventListener("mouseup",this.mouseup)}mousemove(U){this.move(U,Xe(this.element,U))}mouseup(U){this.mouseRotate.mouseupWindow(U),this.mousePitch&&this.mousePitch.mouseupWindow(U),this.offTemp()}touchstart(U){U.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=qe(this.element,U.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>U.preventDefault()},this._startPos))}touchmove(U){U.targetTouches.length!==1?this.reset():(this._lastPos=qe(this.element,U.targetTouches)[0],this.move({preventDefault:()=>U.preventDefault()},this._lastPos))}touchend(U){U.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const qr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Bc={maxWidth:100,unit:"metric"};function Vl(de,U,ee){const be=nl(U),Ie=be/U,Oe={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[ee];this._map._requestDomTask(()=>{this._container.style.width=de*Ie+"px",this._container.innerHTML=`${be}&nbsp;${Oe}`})}function nl(de){const U=Math.pow(10,`${Math.floor(de)}`.length-1);let ee=de/U;return ee=ee>=10?10:ee>=5?5:ee>=3?3:ee>=2?2:ee>=1?1:function(be){const Ie=Math.pow(10,Math.ceil(-Math.log(be)/Math.LN10));return Math.round(be*Ie)/Ie}(ee),U*ee}const Fc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Nc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rl(de=new j.pointGeometry(0,0),U="bottom"){if(typeof de=="number"){const ee=Math.round(Math.sqrt(.5*Math.pow(de,2)));switch(U){case"top":return new j.pointGeometry(0,de);case"top-left":return new j.pointGeometry(ee,ee);case"top-right":return new j.pointGeometry(-ee,ee);case"bottom":return new j.pointGeometry(0,-de);case"bottom-left":return new j.pointGeometry(ee,-ee);case"bottom-right":return new j.pointGeometry(-ee,-ee);case"left":return new j.pointGeometry(de,0);case"right":return new j.pointGeometry(-de,0)}return new j.pointGeometry(0,0)}return de instanceof j.pointGeometry||Array.isArray(de)?j.pointGeometry.convert(de):j.pointGeometry.convert(de[U]||[0,0])}const us={version:j.version,supported:re,setRTLTextPlugin:j.setRTLTextPlugin,getRTLTextPluginStatus:j.getRTLTextPluginStatus,Map:class extends $c{constructor(de){if((de=j.extend({},jl,de)).minZoom!=null&&de.maxZoom!=null&&de.minZoom>de.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(de.minPitch!=null&&de.maxPitch!=null&&de.minPitch>de.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(de.minPitch!=null&&de.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(de.maxPitch!=null&&de.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(de.antialias&&j.isSafariWithAntialiasingBug(j.window)&&(de.antialias=!1,j.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Zs(de.minZoom,de.maxZoom,de.minPitch,de.maxPitch,de.renderWorldCopies),de),this._interactive=de.interactive,this._minTileCacheSize=de.minTileCacheSize,this._maxTileCacheSize=de.maxTileCacheSize,this._failIfMajorPerformanceCaveat=de.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=de.preserveDrawingBuffer,this._antialias=de.antialias,this._trackResize=de.trackResize,this._bearingSnap=de.bearingSnap,this._refreshExpiredTiles=de.refreshExpiredTiles,this._fadeDuration=de.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=de.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=de.collectResourceTiming,this._optimizeForTerrain=de.optimizeForTerrain,this._language=de.language==="auto"?j.window.navigator.language:de.language,this._worldview=de.worldview,this._renderTaskQueue=new zc,this._domRenderTaskQueue=new zc,this._controls=[],this._markers=[],this._mapId=j.uniqueId(),this._locale=j.extend({},Dc,de.locale),this._clickTolerance=de.clickTolerance,this._cooperativeGestures=de.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ra(0),this._useExplicitProjection=!1,this._requestManager=new j.RequestManager(de.transformRequest,de.accessToken,de.testMode),this._silenceAuthErrors=!!de.testMode,typeof de.container=="string"){if(this._container=j.window.document.getElementById(de.container),!this._container)throw new Error(`Container '${de.container}' not found.`)}else{if(!(de.container instanceof j.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=de.container}if(this._container.childNodes.length>0&&j.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),de.maxBounds&&this.setMaxBounds(de.maxBounds),j.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),j.window!==void 0&&(j.window.addEventListener("online",this._onWindowOnline,!1),j.window.addEventListener("resize",this._onWindowResize,!1),j.window.addEventListener("orientationchange",this._onWindowResize,!1),j.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new Oc(this,de),this._localFontFamily=de.localFontFamily,this._localIdeographFontFamily=de.localIdeographFontFamily,de.style&&this.setStyle(de.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),de.projection&&this.setProjection(de.projection),this._hash=de.hash&&new mu(typeof de.hash=="string"&&de.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:de.center,zoom:de.zoom,bearing:de.bearing,pitch:de.pitch}),de.bounds&&(this.resize(),this.fitBounds(de.bounds,j.extend({},de.fitBoundsOptions,{duration:0})))),this.resize(),de.attributionControl&&this.addControl(new _o({customAttribution:de.customAttribution})),this._logoControl=new ga,this.addControl(this._logoControl,de.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",U=>{this._update(U.dataType==="style"),this.fire(new j.Event(`${U.dataType}data`,U))}),this.on("dataloading",U=>{this.fire(new j.Event(`${U.dataType}dataloading`,U))})}_getMapId(){return this._mapId}addControl(de,U){if(U===void 0&&(U=de.getDefaultPosition?de.getDefaultPosition():"top-right"),!de||!de.onAdd)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const ee=de.onAdd(this);this._controls.push(de);const be=this._controlPositions[U];return U.indexOf("bottom")!==-1?be.insertBefore(ee,be.firstChild):be.appendChild(ee),this}removeControl(de){if(!de||!de.onRemove)return this.fire(new j.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const U=this._controls.indexOf(de);return U>-1&&this._controls.splice(U,1),de.onRemove(this),this}hasControl(de){return this._controls.indexOf(de)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(de){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const U=!this._moving;return U&&this.fire(new j.Event("movestart",de)).fire(new j.Event("move",de)),this.fire(new j.Event("resize",de)),U&&this.fire(new j.Event("moveend",de)),this}getBounds(){return this.transform.projection.name==="globe"&&j.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(de){return this.transform.setMaxBounds(j.LngLatBounds.convert(de)),this._update()}setMinZoom(de){if((de=de==null?-2:de)>=-2&&de<=this.transform.maxZoom)return this.transform.minZoom=de,this._update(),this.getZoom()<de?this.setZoom(de):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(de){if((de=de==null?22:de)>=this.transform.minZoom)return this.transform.maxZoom=de,this._update(),this.getZoom()>de?this.setZoom(de):this.fire(new j.Event("zoomstart")).fire(new j.Event("zoom")).fire(new j.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(de){if((de=de==null?0:de)<0)throw new Error("minPitch must be greater than or equal to 0");if(de>=0&&de<=this.transform.maxPitch)return this.transform.minPitch=de,this._update(),this.getPitch()<de?this.setPitch(de):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(de){if((de=de==null?85:de)>85)throw new Error("maxPitch must be less than or equal to 85");if(de>=this.transform.minPitch)return this.transform.maxPitch=de,this._update(),this.getPitch()>de?this.setPitch(de):this.fire(new j.Event("pitchstart")).fire(new j.Event("pitch")).fire(new j.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(de){return this.transform.renderWorldCopies=de,this._update()}getLanguage(){return this._language}setLanguage(de){if(this._language=de==="auto"?j.window.navigator.language:de,this.style)for(const U in this.style._sourceCaches){const ee=this.style._sourceCaches[U]._source;ee._setLanguage&&ee._setLanguage(this._language)}for(const U of this._controls)U._setLanguage&&U._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(de){if(this._worldview=de,this.style)for(const U in this.style._sourceCaches){const ee=this.style._sourceCaches[U]._source;ee._setWorldview&&ee._setWorldview(de)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(de){return this._lazyInitEmptyStyle(),de?typeof de=="string"&&(de={name:de}):de=null,this._useExplicitProjection=!!de,this._prioritizeAndUpdateProjection(de,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const de=this.transform,U=de.projection.name;let ee;U==="globe"&&de.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?(de.setMercatorFromTransition(),ee=!0):U==="mercator"&&de.zoom<j.GLOBE_ZOOM_THRESHOLD_MAX&&(de.setProjection({name:"globe"}),ee=!0),ee&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(de,U){return this._updateProjection(de||U||{name:"mercator"})}_updateProjection(de){let U;if(U=de.name==="globe"&&this.transform.zoom>=j.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(de),this.style.applyProjectionUpdate(),U){this.painter.clearBackgroundTiles();for(const ee in this.style._sourceCaches)this.style._sourceCaches[ee].clearTiles();this._update(!0)}return this}project(de){return this.transform.locationPoint3D(j.LngLat.convert(de))}unproject(de){return this.transform.pointLocation3D(j.pointGeometry.convert(de))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(de,U,ee){if(de==="mouseenter"||de==="mouseover"){let be=!1;const Ie=Le=>{const Fe=U.filter(Ke=>this.getLayer(Ke)),Ge=Fe.length?this.queryRenderedFeatures(Le.point,{layers:Fe}):[];Ge.length?be||(be=!0,ee.call(this,new Xi(de,this,Le.originalEvent,{features:Ge}))):be=!1},Oe=()=>{be=!1};return{layers:new Set(U),listener:ee,delegates:{mousemove:Ie,mouseout:Oe}}}if(de==="mouseleave"||de==="mouseout"){let be=!1;const Ie=Le=>{const Fe=U.filter(Ge=>this.getLayer(Ge));(Fe.length?this.queryRenderedFeatures(Le.point,{layers:Fe}):[]).length?be=!0:be&&(be=!1,ee.call(this,new Xi(de,this,Le.originalEvent)))},Oe=Le=>{be&&(be=!1,ee.call(this,new Xi(de,this,Le.originalEvent)))};return{layers:new Set(U),listener:ee,delegates:{mousemove:Ie,mouseout:Oe}}}{const be=Ie=>{const Oe=U.filter(Fe=>this.getLayer(Fe)),Le=Oe.length?this.queryRenderedFeatures(Ie.point,{layers:Oe}):[];Le.length&&(Ie.features=Le,ee.call(this,Ie),delete Ie.features)};return{layers:new Set(U),listener:ee,delegates:{[de]:be}}}}on(de,U,ee){if(ee===void 0)return super.on(de,U);Array.isArray(U)||(U=[U]);const be=this._createDelegatedListener(de,U,ee);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[de]=this._delegatedListeners[de]||[],this._delegatedListeners[de].push(be);for(const Ie in be.delegates)this.on(Ie,be.delegates[Ie]);return this}once(de,U,ee){if(ee===void 0)return super.once(de,U);Array.isArray(U)||(U=[U]);const be=this._createDelegatedListener(de,U,ee);for(const Ie in be.delegates)this.once(Ie,be.delegates[Ie]);return this}off(de,U,ee){if(ee===void 0)return super.off(de,U);U=new Set(Array.isArray(U)?U:[U]);const be=(Oe,Le)=>{if(Oe.size!==Le.size)return!1;for(const Fe of Oe)if(!Le.has(Fe))return!1;return!0},Ie=this._delegatedListeners?this._delegatedListeners[de]:void 0;return Ie&&(Oe=>{for(let Le=0;Le<Oe.length;Le++){const Fe=Oe[Le];if(Fe.listener===ee&&be(Fe.layers,U)){for(const Ge in Fe.delegates)this.off(Ge,Fe.delegates[Ge]);return Oe.splice(Le,1),this}}})(Ie),this}queryRenderedFeatures(de,U){return this.style?(U!==void 0||de===void 0||de instanceof j.pointGeometry||Array.isArray(de)||(U=de,de=void 0),this.style.queryRenderedFeatures(de=de||[[0,0],[this.transform.width,this.transform.height]],U=U||{},this.transform)):[]}querySourceFeatures(de,U){return this.style.querySourceFeatures(de,U)}queryTerrainElevation(de,U){const ee=this.transform.elevation;return ee?(U=j.extend({},{exaggerated:!0},U),ee.getAtPoint(j.MercatorCoordinate.fromLngLat(de),null,U.exaggerated)):null}setStyle(de,U){return(U=j.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},U)).diff!==!1&&U.localIdeographFontFamily===this._localIdeographFontFamily&&U.localFontFamily===this._localFontFamily&&this.style&&de?(this._diffStyle(de,U),this):(this._localIdeographFontFamily=U.localIdeographFontFamily,this._localFontFamily=U.localFontFamily,this._updateStyle(de,U))}_getUIString(de){const U=this._locale[de];if(U==null)throw new Error(`Missing UI string '${de}'`);return U}_updateStyle(de,U){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),de&&(this.style=new vo(this,U||{}),this.style.setEventedParent(this,{style:this.style}),typeof de=="string"?this.style.loadURL(de):this.style.loadJSON(de)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new vo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(de,U){if(typeof de=="string"){const ee=this._requestManager.normalizeStyleURL(de),be=this._requestManager.transformRequest(ee,j.ResourceType.Style);j.getJSON(be,(Ie,Oe)=>{Ie?this.fire(new j.ErrorEvent(Ie)):Oe&&this._updateDiff(Oe,U)})}else typeof de=="object"&&this._updateDiff(de,U)}_updateDiff(de,U){try{this.style.setState(de)&&this._update(!0)}catch(ee){j.warnOnce(`Unable to perform style diff: ${ee.message||ee.error||ee}.  Rebuilding the style from scratch.`),this._updateStyle(de,U)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(j.warnOnce("There is no style added to the map."),!1)}addSource(de,U){return this._lazyInitEmptyStyle(),this.style.addSource(de,U),this._update(!0)}isSourceLoaded(de){return!!this.style&&this.style._isSourceCacheLoaded(de)}areTilesLoaded(){const de=this.style&&this.style._sourceCaches;for(const U in de){const ee=de[U]._tiles;for(const be in ee){const Ie=ee[be];if(Ie.state!=="loaded"&&Ie.state!=="errored")return!1}}return!0}addSourceType(de,U,ee){this._lazyInitEmptyStyle(),this.style.addSourceType(de,U,ee)}removeSource(de){return this.style.removeSource(de),this._updateTerrain(),this._update(!0)}getSource(de){return this.style.getSource(de)}addImage(de,U,{pixelRatio:ee=1,sdf:be=!1,stretchX:Ie,stretchY:Oe,content:Le}={}){if(this._lazyInitEmptyStyle(),U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap){const{width:Fe,height:Ge,data:Ke}=j.exported.getImageData(U);this.style.addImage(de,{data:new j.RGBAImage({width:Fe,height:Ge},Ke),pixelRatio:ee,stretchX:Ie,stretchY:Oe,content:Le,sdf:be,version:0})}else if(U.width===void 0||U.height===void 0)this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Fe,height:Ge}=U,Ke=U;this.style.addImage(de,{data:new j.RGBAImage({width:Fe,height:Ge},new Uint8Array(Ke.data)),pixelRatio:ee,stretchX:Ie,stretchY:Oe,content:Le,sdf:be,version:0,userImage:Ke}),Ke.onAdd&&Ke.onAdd(this,de)}}updateImage(de,U){const ee=this.style.getImage(de);if(!ee)return void this.fire(new j.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const be=U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap?j.exported.getImageData(U):U,{width:Ie,height:Oe}=be;Ie!==void 0&&Oe!==void 0?Ie===ee.data.width&&Oe===ee.data.height?(ee.data.replace(be.data,!(U instanceof j.window.HTMLImageElement||j.window.ImageBitmap&&U instanceof j.window.ImageBitmap)),this.style.updateImage(de,ee)):this.fire(new j.ErrorEvent(new Error(`The width and height of the updated image (${Ie}, ${Oe})
                must be that same as the previous version of the image
                (${ee.data.width}, ${ee.data.height})`))):this.fire(new j.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(de){return de?!!this.style.getImage(de):(this.fire(new j.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(de){this.style.removeImage(de)}loadImage(de,U){j.getImage(this._requestManager.transformRequest(de,j.ResourceType.Image),(ee,be)=>{U(ee,be instanceof j.window.HTMLImageElement?j.exported.getImageData(be):be)})}listImages(){return this.style.listImages()}addLayer(de,U){return this._lazyInitEmptyStyle(),this.style.addLayer(de,U),this._update(!0)}moveLayer(de,U){return this.style.moveLayer(de,U),this._update(!0)}removeLayer(de){return this.style.removeLayer(de),this._update(!0)}getLayer(de){return this.style.getLayer(de)}setLayerZoomRange(de,U,ee){return this.style.setLayerZoomRange(de,U,ee),this._update(!0)}setFilter(de,U,ee={}){return this.style.setFilter(de,U,ee),this._update(!0)}getFilter(de){return this.style.getFilter(de)}setPaintProperty(de,U,ee,be={}){return this.style.setPaintProperty(de,U,ee,be),this._update(!0)}getPaintProperty(de,U){return this.style.getPaintProperty(de,U)}setLayoutProperty(de,U,ee,be={}){return this.style.setLayoutProperty(de,U,ee,be),this._update(!0)}getLayoutProperty(de,U){return this.style.getLayoutProperty(de,U)}setLight(de,U={}){return this._lazyInitEmptyStyle(),this.style.setLight(de,U),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(de){return this._lazyInitEmptyStyle(),!de&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(de),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(de){return this._lazyInitEmptyStyle(),this.style.setFog(de),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(de){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(j.LngLat.convert(de),this.transform):0}setFeatureState(de,U){return this.style.setFeatureState(de,U),this._update()}removeFeatureState(de,U){return this.style.removeFeatureState(de,U),this._update()}getFeatureState(de){return this.style.getFeatureState(de)}_updateContainerDimensions(){if(!this._container)return;const de=this._container.getBoundingClientRect().width||400,U=this._container.getBoundingClientRect().height||300;let ee,be,Ie,Oe=this._container;for(;Oe&&(!be||!Ie);){const Le=j.window.getComputedStyle(Oe).transform;Le&&Le!=="none"&&(ee=Le.match(/matrix.*\((.+)\)/)[1].split(", "),ee[0]&&ee[0]!=="0"&&ee[0]!=="1"&&(be=ee[0]),ee[3]&&ee[3]!=="0"&&ee[3]!=="1"&&(Ie=ee[3])),Oe=Oe.parentElement}this._containerWidth=be?Math.abs(de/be):de,this._containerHeight=Ie?Math.abs(U/Ie):U}_detectMissingCSS(){j.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&j.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const de=this._container;de.classList.add("mapboxgl-map"),(this._missingCSSCanary=we("div","mapboxgl-canary",de)).style.visibility="hidden",this._detectMissingCSS();const U=this._canvasContainer=we("div","mapboxgl-canvas-container",de);this._interactive&&U.classList.add("mapboxgl-interactive"),this._canvas=we("canvas","mapboxgl-canvas",U),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const ee=this._controlContainer=we("div","mapboxgl-control-container",de),be=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Ie=>{be[Ie]=we("div",`mapboxgl-ctrl-${Ie}`,ee)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(de,U){const ee=j.exported.devicePixelRatio||1;this._canvas.width=ee*Math.ceil(de),this._canvas.height=ee*Math.ceil(U),this._canvas.style.width=`${de}px`,this._canvas.style.height=`${U}px`}_addMarker(de){this._markers.push(de)}_removeMarker(de){const U=this._markers.indexOf(de);U!==-1&&this._markers.splice(U,1)}_setupPainter(){const de=j.extend({},re.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),U=this._canvas.getContext("webgl",de)||this._canvas.getContext("experimental-webgl",de);U?(j.storeAuthState(U,!0),this.painter=new Tc(U,this.transform),this.on("data",ee=>{ee.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),j.exported$1.testSupport(U)):this.fire(new j.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(de){de.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new j.Event("webglcontextlost",{originalEvent:de}))}_contextRestored(de){this._setupPainter(),this.resize(),this._update(),this.fire(new j.Event("webglcontextrestored",{originalEvent:de}))}_onMapScroll(de){if(de.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(de){return this.style?(this._styleDirty=this._styleDirty||de,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(de){return this._update(),this._renderTaskQueue.add(de)}_cancelRenderFrame(de){this._renderTaskQueue.remove(de)}_requestDomTask(de){!this.loaded()||this.loaded()&&!this.isMoving()?de():this._domRenderTaskQueue.add(de)}_render(de){let U;const ee=this.painter.context.extTimerQuery,be=j.exported.now();if(this.listens("gpu-timing-frame")&&(U=ee.createQueryEXT(),ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,U)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(de),this._domRenderTaskQueue.run(de),this._removed)return;this._updateProjectionTransition();let Ie=!1;const Oe=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const Ge=this.transform.zoom,Ke=this.transform.pitch,Ye=j.exported.now();this.style.zoomHistory.update(Ge,Ye);const ct=new j.EvaluationParameters(Ge,{now:Ye,fadeDuration:Oe,pitch:Ke,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),mt=ct.crossFadingFactor();mt===1&&mt===this._crossFadingFactor||(Ie=!0,this._crossFadingFactor=mt),this.style.update(ct)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Le=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Le=this._updateAverageElevation(be),this.style._updateSources(this.transform),this._forceMarkerUpdate()):Le=this._updateAverageElevation(be),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,Oe,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Oe,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new j.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new j.Event("load"))),this.style&&(this.style.hasTransitions()||Ie)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),U){const Ge=j.exported.now()-be;ee.endQueryEXT(ee.TIME_ELAPSED_EXT,U),setTimeout(()=>{const Ke=ee.getQueryObjectEXT(U,ee.QUERY_RESULT_EXT)/1e6;ee.deleteQueryEXT(U),this.fire(new j.Event("gpu-timing-frame",{cpuTime:Ge,gpuTime:Ke})),j.window.performance.mark("frame-gpu",{startTime:be,detail:{gpuTime:Ke}})},50)}if(this.listens("gpu-timing-layer")){const Ge=this.painter.collectGpuTimers();setTimeout(()=>{const Ke=this.painter.queryGpuTimers(Ge);this.fire(new j.Event("gpu-timing-layer",{layerTimes:Ke}))},50)}if(this.listens("gpu-timing-deferred-render")){const Ge=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Ke=this.painter.queryGpuTimeDeferredRender(Ge);this.fire(new j.Event("gpu-timing-deferred-render",{gpuTime:Ke}))},50)}const Fe=this._sourcesDirty||this._styleDirty||this._placementDirty||Le;if(Fe||this._repaint)this.triggerRepaint();else{const Ge=!this.isMoving()&&this.loaded();if(Ge&&(Le=this._updateAverageElevation(be,!0)),Le)this.triggerRepaint();else if(this._triggerFrame(!1),Ge&&(this.fire(new j.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Ke=this._calculateSpeedIndex();this.fire(new j.Event("speedindexcompleted",{speedIndex:Ke})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Fe||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const de of this._markers)de._update()}_updateAverageElevation(de,U=!1){const ee=be=>(this.transform.averageElevation=be,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&ee(0);if((U||de-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(de)){const be=this.transform.averageElevation;let Ie=this.transform.sampleAverageElevation(),Oe=!1;this.transform.elevation&&(Oe=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Ie)?Ie=0:this._averageElevationLastSampledAt=de;const Le=Math.abs(be-Ie);if(Le>1){if(this._isInitialLoad||Oe)return this._averageElevation.jumpTo(Ie),ee(Ie);this._averageElevation.easeTo(Ie,de,300)}else if(Le>1e-4)return this._averageElevation.jumpTo(Ie),ee(Ie)}return!!this._averageElevation.isEasing(de)&&ee(this._averageElevation.getValue(de))}_authenticate(){j.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,de=>{if(de&&(de.message===j.AUTH_ERR_MSG||de.status===401)){const U=this.painter.context.gl;j.storeAuthState(U,!1),this._logoControl instanceof ga&&this._logoControl._updateLogo(),U&&U.clear(U.DEPTH_BUFFER_BIT|U.COLOR_BUFFER_BIT|U.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new j.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),j.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const de=this.painter.canvasCopy(),U=this.painter.getCanvasCopiesAndTimestamps();U.timeStamps.push(performance.now());const ee=this.painter.context.gl,be=ee.createFramebuffer();function Ie(Oe){ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_2D,Oe,0);const Le=new Uint8Array(ee.drawingBufferWidth*ee.drawingBufferHeight*4);return ee.readPixels(0,0,ee.drawingBufferWidth,ee.drawingBufferHeight,ee.RGBA,ee.UNSIGNED_BYTE,Le),Le}return ee.bindFramebuffer(ee.FRAMEBUFFER,be),this._canvasPixelComparison(Ie(de),U.canvasCopies.map(Ie),U.timeStamps)}_canvasPixelComparison(de,U,ee){let be=ee[1]-ee[0];const Ie=de.length/4;for(let Oe=0;Oe<U.length;Oe++){const Le=U[Oe];let Fe=0;for(let Ge=0;Ge<Le.length;Ge+=4)Le[Ge]===de[Ge]&&Le[Ge+1]===de[Ge+1]&&Le[Ge+2]===de[Ge+2]&&Le[Ge+3]===de[Ge+3]&&(Fe+=1);be+=(ee[Oe+2]-ee[Oe+1])*(1-Fe/Ie)}return be}remove(){this._hash&&this._hash.remove();for(const U of this._controls)U.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),j.window!==void 0&&(j.window.removeEventListener("resize",this._onWindowResize,!1),j.window.removeEventListener("orientationchange",this._onWindowResize,!1),j.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),j.window.removeEventListener("online",this._onWindowOnline,!1));const de=this.painter.context.gl.getExtension("WEBGL_lose_context");de&&de.loseContext(),zo(this._canvasContainer),zo(this._controlContainer),zo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),j.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new j.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(de){this._renderNextFrame=this._renderNextFrame||de,this.style&&!this._frame&&(this._frame=j.exported.frame(U=>{const ee=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,ee&&this._render(U)}))}_preloadTiles(de){const U=this.style?Object.values(this.style._sourceCaches):[];return j.asyncAll(U,(ee,be)=>ee._preloadTiles(de,be),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(de){this._trackResize&&this.resize({originalEvent:de})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(de){this._showTileBoundaries!==de&&(this._showTileBoundaries=de,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(de){this._showTerrainWireframe!==de&&(this._showTerrainWireframe=de,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(de){this._speedIndexTiming!==de&&(this._speedIndexTiming=de,this._update())}get showPadding(){return!!this._showPadding}set showPadding(de){this._showPadding!==de&&(this._showPadding=de,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(de){this._showCollisionBoxes!==de&&(this._showCollisionBoxes=de,de?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(de){this._showOverdrawInspector!==de&&(this._showOverdrawInspector=de,this._update())}get repaint(){return!!this._repaint}set repaint(de){this._repaint!==de&&(this._repaint=de,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(de){this._vertices=de,this._update()}_setCacheLimits(de,U){j.setCacheLimits(de,U)}get version(){return j.version}},NavigationControl:class{constructor(de){this.options=j.extend({},Lc,de),this._container=we("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",U=>U.preventDefault()),this.options.showZoom&&(j.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",U=>{this._map&&this._map.zoomIn({},{originalEvent:U})}),we("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",U=>{this._map&&this._map.zoomOut({},{originalEvent:U})}),we("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(j.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",U=>{const ee=this._map;ee&&(this.options.visualizePitch?ee.resetNorthPitch({},{originalEvent:U}):ee.resetNorth({},{originalEvent:U}))}),this._compassIcon=we("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const de=this._map;if(!de)return;const U=de.getZoom(),ee=U===de.getMaxZoom(),be=U===de.getMinZoom();this._zoomInButton.disabled=ee,this._zoomOutButton.disabled=be,this._zoomInButton.setAttribute("aria-disabled",ee.toString()),this._zoomOutButton.setAttribute("aria-disabled",be.toString())}_rotateCompassArrow(){const de=this._map;if(!de)return;const U=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(de.transform.pitch*(Math.PI/180)),.5)}) rotateX(${de.transform.pitch}deg) rotateZ(${de.transform.angle*(180/Math.PI)}deg)`:`rotate(${de.transform.angle*(180/Math.PI)}deg)`;de._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=U)})}onAdd(de){return this._map=de,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),de.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&de.on("pitch",this._rotateCompassArrow),de.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ul(de,this._compass,this.options.visualizePitch)),this._container}onRemove(){const de=this._map;de&&(this._container.remove(),this.options.showZoom&&de.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&de.off("pitch",this._rotateCompassArrow),de.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(de,U){const ee=we("button",de,this._container);return ee.type="button",ee.addEventListener("click",U),ee}_setButtonTitle(de,U){if(!this._map)return;const ee=this._map._getUIString(`NavigationControl.${U}`);de.setAttribute("aria-label",ee),de.firstElementChild&&de.firstElementChild.setAttribute("title",ee)}},GeolocateControl:class extends j.Evented{constructor(de){super(),this.options=j.extend({geolocation:j.window.navigator.geolocation},qr,de),j.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Xs(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(de){return this._map=de,this._container=we("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(de){this._supportsGeolocation!==void 0?de(this._supportsGeolocation):j.window.navigator.permissions!==void 0?j.window.navigator.permissions.query({name:"geolocation"}).then(U=>{this._supportsGeolocation=U.state!=="denied",de(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,de(this._supportsGeolocation))}_isOutOfMapMaxBounds(de){const U=this._map.getMaxBounds(),ee=de.coords;return!!U&&(ee.longitude<U.getWest()||ee.longitude>U.getEast()||ee.latitude<U.getSouth()||ee.latitude>U.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(de){if(this._map){if(this._isOutOfMapMaxBounds(de))return this._setErrorState(),this.fire(new j.Event("outofmaxbounds",de)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=de,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(de),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(de),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("geolocate",de)),this._finish()}}_updateCamera(de){const U=new j.LngLat(de.coords.longitude,de.coords.latitude),ee=de.coords.accuracy,be=this._map.getBearing(),Ie=j.extend({bearing:be},this.options.fitBoundsOptions);this._map.fitBounds(U.toBounds(ee),Ie,{geolocateSource:!0})}_updateMarker(de){if(de){const U=new j.LngLat(de.coords.longitude,de.coords.latitude);this._accuracyCircleMarker.setLngLat(U).addTo(this._map),this._userLocationDotMarker.setLngLat(U).addTo(this._map),this._accuracy=de.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const de=this._map.transform,U=j.mercatorZfromAltitude(1,de._center.lat)*de.worldSize,ee=Math.ceil(2*this._accuracy*U);this._circleElement.style.width=`${ee}px`,this._circleElement.style.height=`${ee}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(de){if(this._map){if(this.options.trackUserLocation)if(de.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(de.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new j.Event("error",de)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(de){if(this._container.addEventListener("contextmenu",U=>U.preventDefault()),this._geolocateButton=we("button","mapboxgl-ctrl-geolocate",this._container),we("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",de===!1){j.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const U=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U)}else{const U=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",U),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",U)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=we("div","mapboxgl-user-location"),this._dotElement.appendChild(we("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(we("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Nl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=we("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",U=>{U.geolocateSource||this._watchState!=="ACTIVE_LOCK"||U.originalEvent&&U.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new j.Event("trackuserlocationend")))})}_onDeviceOrientation(de){this._userLocationDotMarker&&(de.webkitCompassHeading?this._heading=de.webkitCompassHeading:de.absolute===!0&&(this._heading=-1*de.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return j.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new j.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new j.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new j.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let de;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(de={maximumAge:6e5,timeout:0},this._noTimeout=!0):(de=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,de),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const de=()=>{j.window.addEventListener("ondeviceorientationabsolute"in j.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};j.window.DeviceMotionEvent!==void 0&&typeof j.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(U=>{U==="granted"&&de()}).catch(console.error):de()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),j.window.removeEventListener("deviceorientation",this._onDeviceOrientation),j.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:_o,ScaleControl:class{constructor(de){this.options=j.extend({},Bc,de),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=Vl.bind(this)),j.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const de=this.options.maxWidth||100,U=this._map,ee=U._containerHeight/2,be=U._containerWidth/2-de/2,Ie=U.unproject([be,ee]),Oe=U.unproject([be+de,ee]),Le=Ie.distanceTo(Oe);if(this.options.unit==="imperial"){const Fe=3.2808*Le;Fe>5280?this._setScale(de,Fe/5280,"mile"):this._setScale(de,Fe,"foot")}else this.options.unit==="nautical"?this._setScale(de,Le/1852,"nautical-mile"):Le>=1e3?this._setScale(de,Le/1e3,"kilometer"):this._setScale(de,Le,"meter")}_setScale(de,U,ee){const be=nl(U),Ie=be/U;this._map._requestDomTask(()=>{this._container.style.width=de*Ie+"px",this._container.innerHTML=ee!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:ee}).format(be):`${be}&nbsp;nm`})}onAdd(de){return this._map=de,this._language=de.getLanguage(),this._container=we("div","mapboxgl-ctrl mapboxgl-ctrl-scale",de.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(de){this._language=de,this._update()}setUnit(de){this.options.unit=de,this._update()}},FullscreenControl:class{constructor(de){this._fullscreen=!1,de&&de.container&&(de.container instanceof j.window.HTMLElement?this._container=de.container:j.warnOnce("Full screen control 'container' must be a DOM element.")),j.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in j.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in j.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(de){return this._map=de,this._container||(this._container=this._map.getContainer()),this._controlContainer=we("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",j.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,j.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!j.window.document.fullscreenEnabled&&!j.window.document.webkitFullscreenEnabled)}_setupUI(){const de=this._fullscreenButton=we("button","mapboxgl-ctrl-fullscreen",this._controlContainer);we("span","mapboxgl-ctrl-icon",de).setAttribute("aria-hidden","true"),de.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),j.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const de=this._getTitle();this._fullscreenButton.setAttribute("aria-label",de),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",de)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(j.window.document.fullscreenElement||j.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?j.window.document.exitFullscreen?j.window.document.exitFullscreen():j.window.document.webkitCancelFullScreen&&j.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends j.Evented{constructor(de){super(),this.options=j.extend(Object.create(Fc),de),j.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(de&&de.className?de.className.trim().split(/\s+/):[])}addTo(de){return this._map&&this.remove(),this._map=de,this.options.closeOnClick&&de.on("preclick",this._onClose),this.options.closeOnMove&&de.on("move",this._onClose),de.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(de.on("mousemove",this._onMouseEvent),de.on("mouseup",this._onMouseEvent),de._canvasContainer.classList.add("mapboxgl-track-pointer")):de.on("move",this._update),this.fire(new j.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const de=this._map;return de&&(de.off("move",this._update),de.off("move",this._onClose),de.off("preclick",this._onClose),de.off("click",this._onClose),de.off("remove",this.remove),de.off("mousemove",this._onMouseEvent),de.off("mouseup",this._onMouseEvent),de.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new j.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(de){this._lngLat=j.LngLat.convert(de),this._pos=null,this._trackPointer=!1,this._update();const U=this._map;return U&&(U.on("move",this._update),U.off("mousemove",this._onMouseEvent),U._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const de=this._map;return de&&(de.off("move",this._update),de.on("mousemove",this._onMouseEvent),de.on("drag",this._onMouseEvent),de._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(de){return this.setDOMContent(j.window.document.createTextNode(de))}setHTML(de){const U=j.window.document.createDocumentFragment(),ee=j.window.document.createElement("body");let be;for(ee.innerHTML=de;be=ee.firstChild,be;)U.appendChild(be);return this.setDOMContent(U)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(de){return this.options.maxWidth=de,this._update(),this}setDOMContent(de){let U=this._content;if(U)for(;U.hasChildNodes();)U.firstChild&&U.removeChild(U.firstChild);else U=this._content=we("div","mapboxgl-popup-content",this._container||void 0);if(U.appendChild(de),this.options.closeButton){const ee=this._closeButton=we("button","mapboxgl-popup-close-button",U);ee.type="button",ee.setAttribute("aria-label","Close popup"),ee.setAttribute("aria-hidden","true"),ee.innerHTML="&#215;",ee.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(de){return this._classList.add(de),this._updateClassList(),this}removeClassName(de){return this._classList.delete(de),this._updateClassList(),this}setOffset(de){return this.options.offset=de,this._update(),this}toggleClassName(de){let U;return this._classList.delete(de)?U=!1:(this._classList.add(de),U=!0),this._updateClassList(),U}_onMouseEvent(de){this._update(de.point)}_getAnchor(de){if(this.options.anchor)return this.options.anchor;const U=this._map,ee=this._container,be=this._pos;if(!U||!ee||!be)return"bottom";const Ie=ee.offsetWidth,Oe=ee.offsetHeight,Le=be.x<Ie/2,Fe=be.x>U.transform.width-Ie/2;if(be.y+de<Oe)return Le?"top-left":Fe?"top-right":"top";if(be.y>U.transform.height-Oe){if(Le)return"bottom-left";if(Fe)return"bottom-right"}return Le?"left":Fe?"right":"bottom"}_updateClassList(){const de=this._container;if(!de)return;const U=[...this._classList];U.push("mapboxgl-popup"),this._anchor&&U.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&U.push("mapboxgl-popup-track-pointer"),de.className=U.join(" ")}_update(de){const U=this._map,ee=this._content;if(!U||!this._lngLat&&!this._trackPointer||!ee)return;let be=this._container;if(be||(be=this._container=we("div","mapboxgl-popup",U.getContainer()),this._tip=we("div","mapboxgl-popup-tip",be),be.appendChild(ee)),this.options.maxWidth&&be.style.maxWidth!==this.options.maxWidth&&(be.style.maxWidth=this.options.maxWidth),U.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ya(this._lngLat,this._pos,U.transform)),!this._trackPointer||de){const Ie=this._pos=this._trackPointer&&de?de:U.project(this._lngLat),Oe=rl(this.options.offset),Le=this._anchor=this._getAnchor(Oe.y),Fe=rl(this.options.offset,Le),Ge=Ie.add(Fe).round();U._requestDomTask(()=>{this._container&&Le&&(this._container.style.transform=`${tl[Le]} translate(${Ge.x}px,${Ge.y}px)`)})}if(!this._marker&&U._showingGlobe()){const Ie=j.isLngLatBehindGlobe(U.transform,this._lngLat)?0:1;this._setOpacity(Ie)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const de=this._container.querySelector(Nc);de&&de.focus()}_onClose(){this.remove()}_setOpacity(de){this._container&&(this._container.style.opacity=`${de}`),this._content&&(this._content.style.pointerEvents=de?"auto":"none")}},Marker:Nl,Style:vo,LngLat:j.LngLat,LngLatBounds:j.LngLatBounds,Point:j.pointGeometry,MercatorCoordinate:j.MercatorCoordinate,FreeCameraOptions:lr,Evented:j.Evented,config:j.config,prewarm:function(){Qr().acquire(mr)},clearPrewarmedResources:function(){const de=zr;de&&(de.isPreloaded()&&de.numActive()===1?(de.release(mr),zr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return j.config.ACCESS_TOKEN},set accessToken(de){j.config.ACCESS_TOKEN=de},get baseApiUrl(){return j.config.API_URL},set baseApiUrl(de){j.config.API_URL=de},get workerCount(){return Er.workerCount},set workerCount(de){Er.workerCount=de},get maxParallelImageRequests(){return j.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(de){j.config.MAX_PARALLEL_IMAGE_REQUESTS=de},clearStorage(de){j.clearTileCache(de)},workerUrl:"",workerClass:null,setNow:j.exported.setNow,restoreNow:j.exported.restoreNow};return us});var Ee=ce;return Ee})})(mapboxGl);var mapbox=mapboxGl.exports;function render(G,q){return openBlock(),createBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[createVNode("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})])}var axios$2={exports:{}},bind$2=function(q,V){return function(){for(var ce=new Array(arguments.length),te=0;te<ce.length;te++)ce[te]=arguments[te];return q.apply(V,ce)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(G){return Array.isArray(G)}function isUndefined(G){return typeof G=="undefined"}function isBuffer(G){return G!==null&&!isUndefined(G)&&G.constructor!==null&&!isUndefined(G.constructor)&&typeof G.constructor.isBuffer=="function"&&G.constructor.isBuffer(G)}function isArrayBuffer(G){return toString.call(G)==="[object ArrayBuffer]"}function isFormData(G){return toString.call(G)==="[object FormData]"}function isArrayBufferView(G){var q;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?q=ArrayBuffer.isView(G):q=G&&G.buffer&&isArrayBuffer(G.buffer),q}function isString(G){return typeof G=="string"}function isNumber(G){return typeof G=="number"}function isObject(G){return G!==null&&typeof G=="object"}function isPlainObject(G){if(toString.call(G)!=="[object Object]")return!1;var q=Object.getPrototypeOf(G);return q===null||q===Object.prototype}function isDate(G){return toString.call(G)==="[object Date]"}function isFile(G){return toString.call(G)==="[object File]"}function isBlob(G){return toString.call(G)==="[object Blob]"}function isFunction$1(G){return toString.call(G)==="[object Function]"}function isStream(G){return isObject(G)&&isFunction$1(G.pipe)}function isURLSearchParams(G){return toString.call(G)==="[object URLSearchParams]"}function trim(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(G,q){if(!(G===null||typeof G=="undefined"))if(typeof G!="object"&&(G=[G]),isArray(G))for(var V=0,he=G.length;V<he;V++)q.call(null,G[V],V,G);else for(var ce in G)Object.prototype.hasOwnProperty.call(G,ce)&&q.call(null,G[ce],ce,G)}function merge(){var G={};function q(ce,te){isPlainObject(G[te])&&isPlainObject(ce)?G[te]=merge(G[te],ce):isPlainObject(ce)?G[te]=merge({},ce):isArray(ce)?G[te]=ce.slice():G[te]=ce}for(var V=0,he=arguments.length;V<he;V++)forEach(arguments[V],q);return G}function extend(G,q,V){return forEach(q,function(ce,te){V&&typeof ce=="function"?G[te]=bind$1(ce,V):G[te]=ce}),G}function stripBOM(G){return G.charCodeAt(0)===65279&&(G=G.slice(1)),G}var utils$e={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction:isFunction$1,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$d=utils$e;function encode(G){return encodeURIComponent(G).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(q,V,he){if(!V)return q;var ce;if(he)ce=he(V);else if(utils$d.isURLSearchParams(V))ce=V.toString();else{var te=[];utils$d.forEach(V,function(xe,re){xe===null||typeof xe=="undefined"||(utils$d.isArray(xe)?re=re+"[]":xe=[xe],utils$d.forEach(xe,function(ye){utils$d.isDate(ye)?ye=ye.toISOString():utils$d.isObject(ye)&&(ye=JSON.stringify(ye)),te.push(encode(re)+"="+encode(ye))}))}),ce=te.join("&")}if(ce){var Ee=q.indexOf("#");Ee!==-1&&(q=q.slice(0,Ee)),q+=(q.indexOf("?")===-1?"?":"&")+ce}return q},utils$c=utils$e;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(q,V,he){return this.handlers.push({fulfilled:q,rejected:V,synchronous:he?he.synchronous:!1,runWhen:he?he.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(q){this.handlers[q]&&(this.handlers[q]=null)};InterceptorManager$1.prototype.forEach=function(q){utils$c.forEach(this.handlers,function(he){he!==null&&q(he)})};var InterceptorManager_1=InterceptorManager$1,utils$b=utils$e,normalizeHeaderName$1=function(q,V){utils$b.forEach(q,function(ce,te){te!==V&&te.toUpperCase()===V.toUpperCase()&&(q[V]=ce,delete q[te])})},enhanceError$2=function(q,V,he,ce,te){return q.config=V,he&&(q.code=he),q.request=ce,q.response=te,q.isAxiosError=!0,q.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},q},transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},enhanceError$1=enhanceError$2,createError$2=function(q,V,he,ce,te){var Ee=new Error(q);return enhanceError$1(Ee,V,he,ce,te)},createError$1=createError$2,settle$1=function(q,V,he){var ce=he.config.validateStatus;!he.status||!ce||ce(he.status)?q(he):V(createError$1("Request failed with status code "+he.status,he.config,null,he.request,he))},utils$a=utils$e,cookies$1=utils$a.isStandardBrowserEnv()?function(){return{write:function(V,he,ce,te,Ee,j){var xe=[];xe.push(V+"="+encodeURIComponent(he)),utils$a.isNumber(ce)&&xe.push("expires="+new Date(ce).toGMTString()),utils$a.isString(te)&&xe.push("path="+te),utils$a.isString(Ee)&&xe.push("domain="+Ee),j===!0&&xe.push("secure"),document.cookie=xe.join("; ")},read:function(V){var he=document.cookie.match(new RegExp("(^|;\\s*)("+V+")=([^;]*)"));return he?decodeURIComponent(he[3]):null},remove:function(V){this.write(V,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(q){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(q)},combineURLs$1=function(q,V){return V?q.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):q},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(q,V){return q&&!isAbsoluteURL(V)?combineURLs(q,V):V},utils$9=utils$e,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(q){var V={},he,ce,te;return q&&utils$9.forEach(q.split(`
`),function(j){if(te=j.indexOf(":"),he=utils$9.trim(j.substr(0,te)).toLowerCase(),ce=utils$9.trim(j.substr(te+1)),he){if(V[he]&&ignoreDuplicateOf.indexOf(he)>=0)return;he==="set-cookie"?V[he]=(V[he]?V[he]:[]).concat([ce]):V[he]=V[he]?V[he]+", "+ce:ce}}),V},utils$8=utils$e,isURLSameOrigin$1=utils$8.isStandardBrowserEnv()?function(){var q=/(msie|trident)/i.test(navigator.userAgent),V=document.createElement("a"),he;function ce(te){var Ee=te;return q&&(V.setAttribute("href",Ee),Ee=V.href),V.setAttribute("href",Ee),{href:V.href,protocol:V.protocol?V.protocol.replace(/:$/,""):"",host:V.host,search:V.search?V.search.replace(/^\?/,""):"",hash:V.hash?V.hash.replace(/^#/,""):"",hostname:V.hostname,port:V.port,pathname:V.pathname.charAt(0)==="/"?V.pathname:"/"+V.pathname}}return he=ce(window.location.href),function(Ee){var j=utils$8.isString(Ee)?ce(Ee):Ee;return j.protocol===he.protocol&&j.host===he.host}}():function(){return function(){return!0}}();function Cancel$3(G){this.message=G}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$7=utils$e,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,transitionalDefaults$1=transitional,Cancel$2=Cancel_1,xhr=function(q){return new Promise(function(he,ce){var te=q.data,Ee=q.headers,j=q.responseType,xe;function re(){q.cancelToken&&q.cancelToken.unsubscribe(xe),q.signal&&q.signal.removeEventListener("abort",xe)}utils$7.isFormData(te)&&delete Ee["Content-Type"];var ge=new XMLHttpRequest;if(q.auth){var ye=q.auth.username||"",we=q.auth.password?unescape(encodeURIComponent(q.auth.password)):"";Ee.Authorization="Basic "+btoa(ye+":"+we)}var ke=buildFullPath(q.baseURL,q.url);ge.open(q.method.toUpperCase(),buildURL$1(ke,q.params,q.paramsSerializer),!0),ge.timeout=q.timeout;function Se(){if(!!ge){var Re="getAllResponseHeaders"in ge?parseHeaders(ge.getAllResponseHeaders()):null,Ne=!j||j==="text"||j==="json"?ge.responseText:ge.response,ze={data:Ne,status:ge.status,statusText:ge.statusText,headers:Re,config:q,request:ge};settle(function(Ze){he(Ze),re()},function(Ze){ce(Ze),re()},ze),ge=null}}if("onloadend"in ge?ge.onloadend=Se:ge.onreadystatechange=function(){!ge||ge.readyState!==4||ge.status===0&&!(ge.responseURL&&ge.responseURL.indexOf("file:")===0)||setTimeout(Se)},ge.onabort=function(){!ge||(ce(createError("Request aborted",q,"ECONNABORTED",ge)),ge=null)},ge.onerror=function(){ce(createError("Network Error",q,null,ge)),ge=null},ge.ontimeout=function(){var Ne=q.timeout?"timeout of "+q.timeout+"ms exceeded":"timeout exceeded",ze=q.transitional||transitionalDefaults$1;q.timeoutErrorMessage&&(Ne=q.timeoutErrorMessage),ce(createError(Ne,q,ze.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",ge)),ge=null},utils$7.isStandardBrowserEnv()){var Pe=(q.withCredentials||isURLSameOrigin(ke))&&q.xsrfCookieName?cookies.read(q.xsrfCookieName):void 0;Pe&&(Ee[q.xsrfHeaderName]=Pe)}"setRequestHeader"in ge&&utils$7.forEach(Ee,function(Ne,ze){typeof te=="undefined"&&ze.toLowerCase()==="content-type"?delete Ee[ze]:ge.setRequestHeader(ze,Ne)}),utils$7.isUndefined(q.withCredentials)||(ge.withCredentials=!!q.withCredentials),j&&j!=="json"&&(ge.responseType=q.responseType),typeof q.onDownloadProgress=="function"&&ge.addEventListener("progress",q.onDownloadProgress),typeof q.onUploadProgress=="function"&&ge.upload&&ge.upload.addEventListener("progress",q.onUploadProgress),(q.cancelToken||q.signal)&&(xe=function(Re){!ge||(ce(!Re||Re&&Re.type?new Cancel$2("canceled"):Re),ge.abort(),ge=null)},q.cancelToken&&q.cancelToken.subscribe(xe),q.signal&&(q.signal.aborted?xe():q.signal.addEventListener("abort",xe))),te||(te=null),ge.send(te)})},utils$6=utils$e,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,transitionalDefaults=transitional,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(G,q){!utils$6.isUndefined(G)&&utils$6.isUndefined(G["Content-Type"])&&(G["Content-Type"]=q)}function getDefaultAdapter(){var G;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(G=xhr),G}function stringifySafely(G,q,V){if(utils$6.isString(G))try{return(q||JSON.parse)(G),utils$6.trim(G)}catch(he){if(he.name!=="SyntaxError")throw he}return(V||JSON.stringify)(G)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(q,V){return normalizeHeaderName(V,"Accept"),normalizeHeaderName(V,"Content-Type"),utils$6.isFormData(q)||utils$6.isArrayBuffer(q)||utils$6.isBuffer(q)||utils$6.isStream(q)||utils$6.isFile(q)||utils$6.isBlob(q)?q:utils$6.isArrayBufferView(q)?q.buffer:utils$6.isURLSearchParams(q)?(setContentTypeIfUnset(V,"application/x-www-form-urlencoded;charset=utf-8"),q.toString()):utils$6.isObject(q)||V&&V["Content-Type"]==="application/json"?(setContentTypeIfUnset(V,"application/json"),stringifySafely(q)):q}],transformResponse:[function(q){var V=this.transitional||defaults$3.transitional,he=V&&V.silentJSONParsing,ce=V&&V.forcedJSONParsing,te=!he&&this.responseType==="json";if(te||ce&&utils$6.isString(q)&&q.length)try{return JSON.parse(q)}catch(Ee){if(te)throw Ee.name==="SyntaxError"?enhanceError(Ee,this,"E_JSON_PARSE"):Ee}return q}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(q){return q>=200&&q<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],function(q){defaults$3.headers[q]={}});utils$6.forEach(["post","put","patch"],function(q){defaults$3.headers[q]=utils$6.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$5=utils$e,defaults$2=defaults_1,transformData$1=function(q,V,he){var ce=this||defaults$2;return utils$5.forEach(he,function(Ee){q=Ee.call(ce,q,V)}),q},isCancel$1=function(q){return!!(q&&q.__CANCEL__)},utils$4=utils$e,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(G){if(G.cancelToken&&G.cancelToken.throwIfRequested(),G.signal&&G.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(q){throwIfCancellationRequested(q),q.headers=q.headers||{},q.data=transformData.call(q,q.data,q.headers,q.transformRequest),q.headers=utils$4.merge(q.headers.common||{},q.headers[q.method]||{},q.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],function(ce){delete q.headers[ce]});var V=q.adapter||defaults$1.adapter;return V(q).then(function(ce){return throwIfCancellationRequested(q),ce.data=transformData.call(q,ce.data,ce.headers,q.transformResponse),ce},function(ce){return isCancel(ce)||(throwIfCancellationRequested(q),ce&&ce.response&&(ce.response.data=transformData.call(q,ce.response.data,ce.response.headers,q.transformResponse))),Promise.reject(ce)})},utils$3=utils$e,mergeConfig$2=function(q,V){V=V||{};var he={};function ce(ge,ye){return utils$3.isPlainObject(ge)&&utils$3.isPlainObject(ye)?utils$3.merge(ge,ye):utils$3.isPlainObject(ye)?utils$3.merge({},ye):utils$3.isArray(ye)?ye.slice():ye}function te(ge){if(utils$3.isUndefined(V[ge])){if(!utils$3.isUndefined(q[ge]))return ce(void 0,q[ge])}else return ce(q[ge],V[ge])}function Ee(ge){if(!utils$3.isUndefined(V[ge]))return ce(void 0,V[ge])}function j(ge){if(utils$3.isUndefined(V[ge])){if(!utils$3.isUndefined(q[ge]))return ce(void 0,q[ge])}else return ce(void 0,V[ge])}function xe(ge){if(ge in V)return ce(q[ge],V[ge]);if(ge in q)return ce(void 0,q[ge])}var re={url:Ee,method:Ee,data:Ee,baseURL:j,transformRequest:j,transformResponse:j,paramsSerializer:j,timeout:j,timeoutMessage:j,withCredentials:j,adapter:j,responseType:j,xsrfCookieName:j,xsrfHeaderName:j,onUploadProgress:j,onDownloadProgress:j,decompress:j,maxContentLength:j,maxBodyLength:j,transport:j,httpAgent:j,httpsAgent:j,cancelToken:j,socketPath:j,responseEncoding:j,validateStatus:xe};return utils$3.forEach(Object.keys(q).concat(Object.keys(V)),function(ye){var we=re[ye]||te,ke=we(ye);utils$3.isUndefined(ke)&&we!==xe||(he[ye]=ke)}),he},data={version:"0.26.1"},VERSION=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(G,q){validators$1[G]=function(he){return typeof he===G||"a"+(q<1?"n ":" ")+G}});var deprecatedWarnings={};validators$1.transitional=function(q,V,he){function ce(te,Ee){return"[Axios v"+VERSION+"] Transitional option '"+te+"'"+Ee+(he?". "+he:"")}return function(te,Ee,j){if(q===!1)throw new Error(ce(Ee," has been removed"+(V?" in "+V:"")));return V&&!deprecatedWarnings[Ee]&&(deprecatedWarnings[Ee]=!0,console.warn(ce(Ee," has been deprecated since v"+V+" and will be removed in the near future"))),q?q(te,Ee,j):!0}};function assertOptions(G,q,V){if(typeof G!="object")throw new TypeError("options must be an object");for(var he=Object.keys(G),ce=he.length;ce-- >0;){var te=he[ce],Ee=q[te];if(Ee){var j=G[te],xe=j===void 0||Ee(j,te,G);if(xe!==!0)throw new TypeError("option "+te+" must be "+xe);continue}if(V!==!0)throw Error("Unknown option "+te)}}var validator$1={assertOptions,validators:validators$1},utils$2=utils$e,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(G){this.defaults=G,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(q,V){typeof q=="string"?(V=V||{},V.url=q):V=q||{},V=mergeConfig$1(this.defaults,V),V.method?V.method=V.method.toLowerCase():this.defaults.method?V.method=this.defaults.method.toLowerCase():V.method="get";var he=V.transitional;he!==void 0&&validator.assertOptions(he,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var ce=[],te=!0;this.interceptors.request.forEach(function(ke){typeof ke.runWhen=="function"&&ke.runWhen(V)===!1||(te=te&&ke.synchronous,ce.unshift(ke.fulfilled,ke.rejected))});var Ee=[];this.interceptors.response.forEach(function(ke){Ee.push(ke.fulfilled,ke.rejected)});var j;if(!te){var xe=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(xe,ce),xe=xe.concat(Ee),j=Promise.resolve(V);xe.length;)j=j.then(xe.shift(),xe.shift());return j}for(var re=V;ce.length;){var ge=ce.shift(),ye=ce.shift();try{re=ge(re)}catch(we){ye(we);break}}try{j=dispatchRequest(re)}catch(we){return Promise.reject(we)}for(;Ee.length;)j=j.then(Ee.shift(),Ee.shift());return j};Axios$1.prototype.getUri=function(q){return q=mergeConfig$1(this.defaults,q),buildURL(q.url,q.params,q.paramsSerializer).replace(/^\?/,"")};utils$2.forEach(["delete","get","head","options"],function(q){Axios$1.prototype[q]=function(V,he){return this.request(mergeConfig$1(he||{},{method:q,url:V,data:(he||{}).data}))}});utils$2.forEach(["post","put","patch"],function(q){Axios$1.prototype[q]=function(V,he,ce){return this.request(mergeConfig$1(ce||{},{method:q,url:V,data:he}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(G){if(typeof G!="function")throw new TypeError("executor must be a function.");var q;this.promise=new Promise(function(ce){q=ce});var V=this;this.promise.then(function(he){if(!!V._listeners){var ce,te=V._listeners.length;for(ce=0;ce<te;ce++)V._listeners[ce](he);V._listeners=null}}),this.promise.then=function(he){var ce,te=new Promise(function(Ee){V.subscribe(Ee),ce=Ee}).then(he);return te.cancel=function(){V.unsubscribe(ce)},te},G(function(ce){V.reason||(V.reason=new Cancel(ce),q(V.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};CancelToken.prototype.subscribe=function(q){if(this.reason){q(this.reason);return}this._listeners?this._listeners.push(q):this._listeners=[q]};CancelToken.prototype.unsubscribe=function(q){if(!!this._listeners){var V=this._listeners.indexOf(q);V!==-1&&this._listeners.splice(V,1)}};CancelToken.source=function(){var q,V=new CancelToken(function(ce){q=ce});return{token:V,cancel:q}};var CancelToken_1=CancelToken,spread=function(q){return function(he){return q.apply(null,he)}},utils$1=utils$e,isAxiosError=function(q){return utils$1.isObject(q)&&q.isAxiosError===!0},utils=utils$e,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(G){var q=new Axios(G),V=bind(Axios.prototype.request,q);return utils.extend(V,Axios.prototype,q),utils.extend(V,q),V.create=function(ce){return createInstance(mergeConfig(G,ce))},V}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.VERSION=data.version;axios$1.all=function(q){return Promise.all(q)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports;function unwrapObj(G){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(G).reduce((V,he)=>(q.includes(he)||(V[he]=unref(G[he])),V),{})}function isFunction(G){return typeof G=="function"}function isProxy(G){return isReactive(G)||isReadonly(G)}function callRule(G,q,V,he){return G.call(he,unref(q),unref(V),he)}function normalizeValidatorResponse(G){return G.$valid!==void 0?!G.$valid:!G}function createAsyncResult(G,q,V,he,ce,te,Ee){let{$lazy:j,$rewardEarly:xe}=ce,re=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],ge=arguments.length>8?arguments[8]:void 0,ye=arguments.length>9?arguments[9]:void 0,we=arguments.length>10?arguments[10]:void 0;const ke=ref(!!he.value),Se=ref(0);V.value=!1;const Pe=watch([q,he].concat(re,we),()=>{if(j&&!he.value||xe&&!ye.value&&!V.value)return;let Re;try{Re=callRule(G,q,ge,Ee)}catch(Ne){Re=Promise.reject(Ne)}Se.value++,V.value=!!Se.value,ke.value=!1,Promise.resolve(Re).then(Ne=>{Se.value--,V.value=!!Se.value,te.value=Ne,ke.value=normalizeValidatorResponse(Ne)}).catch(Ne=>{Se.value--,V.value=!!Se.value,te.value=Ne,ke.value=!0})},{immediate:!0,deep:typeof q=="object"});return{$invalid:ke,$unwatch:Pe}}function createSyncResult(G,q,V,he,ce,te,Ee,j){let{$lazy:xe,$rewardEarly:re}=he;const ge=()=>({}),ye=computed(()=>{if(xe&&!V.value||re&&!j.value)return!1;let we=!0;try{const ke=callRule(G,q,Ee,te);ce.value=ke,we=normalizeValidatorResponse(ke)}catch(ke){ce.value=ke}return we});return{$unwatch:ge,$invalid:ye}}function createValidatorResult(G,q,V,he,ce,te,Ee,j,xe,re,ge){const ye=ref(!1),we=G.$params||{},ke=ref(null);let Se,Pe;G.$async?{$invalid:Se,$unwatch:Pe}=createAsyncResult(G.$validator,q,ye,V,he,ke,ce,G.$watchTargets,xe,re,ge):{$invalid:Se,$unwatch:Pe}=createSyncResult(G.$validator,q,V,he,ke,ce,xe,re);const Re=G.$message;return{$message:isFunction(Re)?computed(()=>Re(unwrapObj({$pending:ye,$invalid:Se,$params:unwrapObj(we),$model:q,$response:ke,$validator:te,$propertyPath:j,$property:Ee}))):Re||"",$params:we,$pending:ye,$invalid:Se,$response:ke,$unwatch:Pe}}function sortValidations(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const q=unref(G),V=Object.keys(q),he={},ce={},te={};return V.forEach(Ee=>{const j=q[Ee];switch(!0){case isFunction(j.$validator):he[Ee]=j;break;case isFunction(j):he[Ee]={$validator:j};break;case Ee.startsWith("$"):te[Ee]=j;break;default:ce[Ee]=j}}),{rules:he,nestedValidators:ce,config:te}}function _empty(){}const ROOT_PATH="__root";function _call(G,q,V){if(V)return q?q(G()):G();try{var he=Promise.resolve(G());return q?he.then(q):he}catch(ce){return Promise.reject(ce)}}function _callIgnored(G,q){return _call(G,_empty,q)}function _invoke(G,q){var V=G();return V&&V.then?V.then(q):q(V)}function _async(G){return function(){for(var q=[],V=0;V<arguments.length;V++)q[V]=arguments[V];try{return Promise.resolve(G.apply(this,q))}catch(he){return Promise.reject(he)}}}function createValidationResults(G,q,V,he,ce,te,Ee,j,xe){const re=Object.keys(G),ge=he.get(ce,G),ye=ref(!1),we=ref(!1),ke=ref(0);if(ge){if(!ge.$partial)return ge;ge.$unwatch(),ye.value=ge.$dirty.value}const Se={$dirty:ye,$path:ce,$touch:()=>{ye.value||(ye.value=!0)},$reset:()=>{ye.value&&(ye.value=!1)},$commit:()=>{}};return re.length?(re.forEach(Pe=>{Se[Pe]=createValidatorResult(G[Pe],q,Se.$dirty,te,Ee,Pe,V,ce,xe,we,ke)}),Se.$externalResults=computed(()=>j.value?[].concat(j.value).map((Pe,Re)=>({$propertyPath:ce,$property:V,$validator:"$externalResults",$uid:`${ce}-externalResult-${Re}`,$message:Pe,$params:{},$response:null,$pending:!1})):[]),Se.$invalid=computed(()=>{const Pe=re.some(Re=>unref(Se[Re].$invalid));return we.value=Pe,!!Se.$externalResults.value.length||Pe}),Se.$pending=computed(()=>re.some(Pe=>unref(Se[Pe].$pending))),Se.$error=computed(()=>Se.$dirty.value?Se.$pending.value||Se.$invalid.value:!1),Se.$silentErrors=computed(()=>re.filter(Pe=>unref(Se[Pe].$invalid)).map(Pe=>{const Re=Se[Pe];return reactive({$propertyPath:ce,$property:V,$validator:Pe,$uid:`${ce}-${Pe}`,$message:Re.$message,$params:Re.$params,$response:Re.$response,$pending:Re.$pending})}).concat(Se.$externalResults.value)),Se.$errors=computed(()=>Se.$dirty.value?Se.$silentErrors.value:[]),Se.$unwatch=()=>re.forEach(Pe=>{Se[Pe].$unwatch()}),Se.$commit=()=>{we.value=!0,ke.value=Date.now()},he.set(ce,G,Se),Se):(ge&&he.set(ce,G,Se),Se)}function collectNestedValidationResults(G,q,V,he,ce,te,Ee){const j=Object.keys(G);return j.length?j.reduce((xe,re)=>(xe[re]=setValidations({validations:G[re],state:q,key:re,parentKey:V,resultsCache:he,globalConfig:ce,instance:te,externalResults:Ee}),xe),{}):{}}function createMetaFields(G,q,V){const he=computed(()=>[q,V].filter(Se=>Se).reduce((Se,Pe)=>Se.concat(Object.values(unref(Pe))),[])),ce=computed({get(){return G.$dirty.value||(he.value.length?he.value.every(Se=>Se.$dirty):!1)},set(Se){G.$dirty.value=Se}}),te=computed(()=>{const Se=unref(G.$silentErrors)||[],Pe=he.value.filter(Re=>(unref(Re).$silentErrors||[]).length).reduce((Re,Ne)=>Re.concat(...Ne.$silentErrors),[]);return Se.concat(Pe)}),Ee=computed(()=>{const Se=unref(G.$errors)||[],Pe=he.value.filter(Re=>(unref(Re).$errors||[]).length).reduce((Re,Ne)=>Re.concat(...Ne.$errors),[]);return Se.concat(Pe)}),j=computed(()=>he.value.some(Se=>Se.$invalid)||unref(G.$invalid)||!1),xe=computed(()=>he.value.some(Se=>unref(Se.$pending))||unref(G.$pending)||!1),re=computed(()=>he.value.some(Se=>Se.$dirty)||he.value.some(Se=>Se.$anyDirty)||ce.value),ge=computed(()=>ce.value?xe.value||j.value:!1),ye=()=>{G.$touch(),he.value.forEach(Se=>{Se.$touch()})},we=()=>{G.$commit(),he.value.forEach(Se=>{Se.$commit()})},ke=()=>{G.$reset(),he.value.forEach(Se=>{Se.$reset()})};return he.value.length&&he.value.every(Se=>Se.$dirty)&&ye(),{$dirty:ce,$errors:Ee,$invalid:j,$anyDirty:re,$error:ge,$pending:xe,$touch:ye,$reset:ke,$silentErrors:te,$commit:we}}function setValidations(G){const q=_async(function(){return xt(),_invoke(function(){if(Pe.$rewardEarly)return rt(),_callIgnored(nextTick)},function(){return _call(nextTick,function(){return new Promise(vt=>{if(!bt.value)return vt(!Je.value);const ut=watch(bt,()=>{vt(!Je.value),ut()})})})})});let{validations:V,state:he,key:ce,parentKey:te,childResults:Ee,resultsCache:j,globalConfig:xe={},instance:re,externalResults:ge}=G;const ye=te?`${te}.${ce}`:ce,{rules:we,nestedValidators:ke,config:Se}=sortValidations(V),Pe=Object.assign({},xe,Se),Re=ce?computed(()=>{const vt=unref(he);return vt?unref(vt[ce]):void 0}):he,Ne=Object.assign({},unref(ge)||{}),ze=computed(()=>{const vt=unref(ge);return ce?vt?unref(vt[ce]):void 0:vt}),Be=createValidationResults(we,Re,ce,j,ye,Pe,re,ze,he),Ze=collectNestedValidationResults(ke,Re,ye,j,Pe,re,ze),{$dirty:Xe,$errors:qe,$invalid:Je,$anyDirty:dt,$error:Ct,$pending:bt,$touch:xt,$reset:nt,$silentErrors:tt,$commit:rt}=createMetaFields(Be,Ze,Ee),ht=ce?computed({get:()=>unref(Re),set:vt=>{Xe.value=!0;const ut=unref(he),Ut=unref(ge);Ut&&(Ut[ce]=Ne[ce]),isRef(ut[ce])?ut[ce].value=vt:ut[ce]=vt}}):null;ce&&Pe.$autoDirty&&watch(Re,()=>{Xe.value||xt();const vt=unref(ge);vt&&(vt[ce]=Ne[ce])},{flush:"sync"});function st(vt){return(Ee.value||{})[vt]}function pt(){isRef(ge)?ge.value=Ne:Object.keys(Ne).length===0?Object.keys(ge).forEach(vt=>{delete ge[vt]}):Object.assign(ge,Ne)}return reactive(Object.assign({},Be,{$model:ht,$dirty:Xe,$error:Ct,$errors:qe,$invalid:Je,$anyDirty:dt,$pending:bt,$touch:xt,$reset:nt,$path:ye||ROOT_PATH,$silentErrors:tt,$validate:q,$commit:rt},Ee&&{$getResultsForChild:st,$clearExternalResults:pt},Ze))}class ResultsStorage{constructor(){this.storage=new Map}set(q,V,he){this.storage.set(q,{rules:V,result:he})}checkRulesValidity(q,V,he){const ce=Object.keys(he),te=Object.keys(V);return te.length!==ce.length||!te.every(j=>ce.includes(j))?!1:te.every(j=>V[j].$params?Object.keys(V[j].$params).every(xe=>unref(he[j].$params[xe])===unref(V[j].$params[xe])):!0)}get(q,V){const he=this.storage.get(q);if(!he)return;const{rules:ce,result:te}=he,Ee=this.checkRulesValidity(q,V,ce),j=te.$unwatch?te.$unwatch:()=>({});return Ee?te:{$dirty:te.$dirty,$partial:!0,$unwatch:j}}}const CollectFlag={COLLECT_ALL:!0,COLLECT_NONE:!1},VuelidateInjectChildResults=Symbol("vuelidate#injectChildResults"),VuelidateRemoveChildResults=Symbol("vuelidate#removeChildResults");function nestedValidations(G){let{$scope:q,instance:V}=G;const he={},ce=ref([]),te=computed(()=>ce.value.reduce((ge,ye)=>(ge[ye]=unref(he[ye]),ge),{}));function Ee(ge,ye){let{$registerAs:we,$scope:ke,$stopPropagation:Se}=ye;Se||q===CollectFlag.COLLECT_NONE||ke===CollectFlag.COLLECT_NONE||q!==CollectFlag.COLLECT_ALL&&q!==ke||(he[we]=ge,ce.value.push(we))}V.__vuelidateInjectInstances=[].concat(V.__vuelidateInjectInstances||[],Ee);function j(ge){ce.value=ce.value.filter(ye=>ye!==ge),delete he[ge]}V.__vuelidateRemoveInstances=[].concat(V.__vuelidateRemoveInstances||[],j);const xe=inject(VuelidateInjectChildResults,[]);provide(VuelidateInjectChildResults,V.__vuelidateInjectInstances);const re=inject(VuelidateRemoveChildResults,[]);return provide(VuelidateRemoveChildResults,V.__vuelidateRemoveInstances),{childResults:te,sendValidationResultsToParent:xe,removeValidationResultsFromParent:re}}function ComputedProxyFactory(G){return new Proxy(G,{get(q,V){return typeof q[V]=="object"?ComputedProxyFactory(q[V]):computed(()=>q[V])}})}function useVuelidate(G,q){let V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(V=G,G=void 0,q=void 0);let{$registerAs:he,$scope:ce=CollectFlag.COLLECT_ALL,$stopPropagation:te,$externalResults:Ee,currentVueInstance:j}=V;const xe=j||getCurrentInstance(),re=xe?xe.type:{};!he&&xe&&(he=`_vuelidate_${xe.uid||xe._uid}`);const ge=ref({}),ye=new ResultsStorage,{childResults:we,sendValidationResultsToParent:ke,removeValidationResultsFromParent:Se}=xe?nestedValidations({$scope:ce,instance:xe}):{childResults:ref({})};if(!G&&re.validations){const Pe=re.validations;q=ref({}),onBeforeMount(()=>{q.value=xe.proxy,watch(()=>isFunction(Pe)?Pe.call(q.value,new ComputedProxyFactory(q.value)):Pe,Re=>{ge.value=setValidations({validations:Re,state:q,childResults:we,resultsCache:ye,globalConfig:V,instance:xe.proxy,externalResults:Ee||xe.proxy.vuelidateExternalResults})},{immediate:!0})}),V=re.validationsConfig||V}else{const Pe=isRef(G)||isProxy(G)?G:reactive(G||{});watch(Pe,Re=>{ge.value=setValidations({validations:Re,state:q,childResults:we,resultsCache:ye,globalConfig:V,instance:xe?xe.proxy:{},externalResults:Ee})},{immediate:!0})}return xe&&(ke.forEach(Pe=>Pe(ge,{$registerAs:he,$scope:ce,$stopPropagation:te})),onBeforeUnmount(()=>Se.forEach(Pe=>Pe(he)))),computed(()=>Object.assign({},unref(ge.value),we.value))}const req=G=>{if(G=unref(G),Array.isArray(G))return!!G.length;if(G==null)return!1;if(G===!1)return!0;if(G instanceof Date)return!isNaN(G.getTime());if(typeof G=="object"){for(let q in G)return!0;return!1}return!!String(G).length},len=G=>(G=unref(G),Array.isArray(G)?G.length:typeof G=="object"?Object.keys(G).length:String(G).length);function regex(){for(var G=arguments.length,q=new Array(G),V=0;V<G;V++)q[V]=arguments[V];return he=>(he=unref(he),!req(he)||q.every(ce=>ce.test(he)))}regex(/^[a-zA-Z]*$/);regex(/^[a-zA-Z0-9]*$/);var numeric$1=regex(/^\d*(\.\d+)?$/),numeric={$validator:numeric$1,$message:"Value must be numeric",$params:{type:"numeric"}};const emailRegex=/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;var email$1=regex(emailRegex),email={$validator:email$1,$message:"Value is not a valid email address",$params:{type:"email"}};function minLength$1(G){return q=>!req(q)||len(q)>=unref(G)}function minLength(G){return{$validator:minLength$1(G),$message:q=>{let{$params:V}=q;return`This field should be at least ${V.min} long`},$params:{min:G,type:"minLength"}}}function required$1(G){return typeof G=="string"&&(G=G.trim()),req(G)}var required={$validator:required$1,$message:"Value is required",$params:{type:"required"}};function sameAs$1(G){return q=>unref(q)===unref(G)}function sameAs(G){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"other";return{$validator:sameAs$1(G),$message:V=>`The value must be equal to the ${q} value`,$params:{equalTo:G,otherName:q,type:"sameAs"}}}const urlRegex=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i;regex(urlRegex);regex(/(^[0-9]*$)|(^-[0-9]+$)/);regex(/^[-]?\d*(\.\d+)?$/);var eruda$1={exports:{}};/*! eruda v2.6.1 https://eruda.liriliri.io/ */(function(module,exports){(function(G,q){module.exports=q()})(self,function(){return function(){var __webpack_modules__={3816:function(G,q,V){(q=V(3645)(!1)).push([G.id,"._container ._console-container{$pt:40px;$pb:24px}._console-container{$w:100%;$h:100%}._console-container._js-input-hidden{$pb:0}._console-container ._control{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$cu:default;$fs:0;$p:10px 10px 10px 35px;$b:var(--darker-background);$c:var(--primary);$lh:20px;$bb:1px solid var(--border)}._console-container ._control ._icon-clear,._console-container ._control ._icon-copy,._console-container ._control ._icon-search{$d:inline-block;$p:10px;$fs:16px;$po:absolute;$t:0;$cu:pointer;$tr:color .3s}._console-container ._control ._icon-clear:active,._console-container ._control ._icon-copy:active,._console-container ._control ._icon-search:active{$c:var(--accent)}._console-container ._control ._icon-clear{padding-right:0;$l:0}._console-container ._control ._icon-copy{right:0}._console-container ._control ._icon-search{right:23px}._console-container ._control ._filter{$cu:pointer;$fs:12px;$h:20px;$d:inline-block;$m:0 2px;$p:0 4px;$lh:20px;$tr:background-color .3s,color .3s}._console-container ._control ._filter._active{$b:var(--highlight);$c:var(--select-foreground)}._console-container ._control ._search-keyword{$ws:nowrap;$po:absolute;$lh:20px;max-width:80px;$o:hidden;right:63px;$fs:14px;text-overflow:ellipsis}._console-container ._js-input{$pe:none;$po:absolute;$z:100;$l:0;bottom:0;$w:100%;$bt:1px solid var(--border);$h:24px}._console-container ._js-input ._icon-arrow-right{$lh:23px;$c:var(--accent);$po:absolute;$l:10px;$t:0;$z:10}._console-container ._js-input._active{$h:100%;$pt:40px;$pb:40px;$bt:none}._console-container ._js-input._active ._icon-arrow-right{$d:none}._console-container ._js-input._active textarea{$pl:10px}._console-container ._js-input ._buttons{$d:none;$po:absolute;$l:0;bottom:0;$w:100%;$h:40px;$c:var(--primary);$b:var(--darker-background);$fs:12px;$bt:1px solid var(--border)}._console-container ._js-input ._buttons ._button{$pe:all;$cu:pointer;$w:50%;$d:inline-block;$ta:center;$br:1px solid var(--border);$h:40px;$lh:40px;$tr:background .3s,color .3s}._console-container ._js-input ._buttons ._button:last-child{$br:none}._console-container ._js-input ._buttons ._button:active{$c:var(--select-foreground);$b:var(--highlight)}._console-container ._js-input textarea{$pe:all;$p:3px 10px;$pl:25px;$ou:0;$bo:none;$fs:14px;$w:100%;$h:100%;-webkit-user-select:text;$us:text;resize:none;$c:var(--primary);$b:var(--background)}",""]),G.exports=q},9217:function(G,q,V){(q=V(3645)(!1)).push([G.id,"._dev-tools{$po:absolute;$w:100%;$h:100%;$l:0;bottom:0;$b:var(--background);$z:500;$d:none;$pt:40px!important;opacity:0;$tr:opacity .3s,height .3s}._dev-tools ._tools{$o:auto;$wos:touch;$h:100%;$w:100%;$po:relative}._dev-tools ._tools ._tool{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$o:hidden;$d:none}",""]),G.exports=q},3409:function(G,q,V){(q=V(3645)(!1)).push([G.id,"._container ._nav-bar-container{$po:absolute;$w:100%;$h:40px;$l:0;$t:0;$z:100}._container ._nav-bar-container ._nav-bar{$ox:auto;$wos:touch;$bt:1px solid var(--border);$bb:1px solid var(--border);$w:100%;$h:100%;$b:var(--darker-background);$fs:0;$ws:nowrap}._container ._nav-bar-container ._nav-bar-item{$cu:pointer;$d:inline-block;$h:38px;$lh:38px;$p:0 10px;$c:var(--foreground);$fs:12px;$ta:center;$tt:capitalize;$tr:all .3s}._container ._nav-bar-container ._nav-bar-item:active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._nav-bar-item._active{$b:var(--highlight);$c:var(--select-foreground)}._container ._nav-bar-container ._bottom-bar{$tr:left .3s,width .3s;$h:1px;$b:var(--accent);$po:absolute;bottom:0;$l:0}",""]),G.exports=q},269:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_elements{$pb:40px;$fs:14px}#_elements ._show-area{$oy:auto;$wos:touch;$h:100%}#_elements ._parents{$ox:auto;$wos:touch;$b:var(--darker-background);$c:var(--primary);$p:0 10px;$h:40px;$lh:40px;$ws:nowrap;$bb:1px solid var(--border);$cu:pointer;$fs:14px}#_elements ._parents li{$d:inline-block}#_elements ._parents li ._parent{$d:inline-block}#_elements ._parents li:last-child{margin-right:0}#_elements ._parents ._icon-arrow-right{$fs:12px;$po:relative;$t:1px}#_elements ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border);$cu:pointer;$tr:background .3s,color .3s}#_elements ._breadcrumb:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._breadcrumb:active span{$c:var(--select-foreground)}#_elements ._section{$bb:1px solid var(--border);$c:var(--foreground);$mb:10px}#_elements ._section h2{$c:var(--primary);$b:var(--darker-background);$bt:1px solid var(--border);$p:10px;$fs:14px;$tr:background .3s}#_elements ._section h2 ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_elements ._section h2 ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_elements ._section h2 ._btn:active{$c:var(--accent)}#_elements ._section h2._active-effect{$cu:pointer}#_elements ._section h2._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children{$b:var(--darker-background);$c:var(--foreground);$mb:10px!important;$bb:1px solid var(--border)}#_elements ._children li{$ox:auto;$wos:touch;$cu:default;$p:10px;$bt:1px solid var(--border);$ws:nowrap;$tr:background .3s,color .3s}#_elements ._children li span{$tr:color .3s}#_elements ._children li._active-effect{$cu:pointer}#_elements ._children li._active-effect:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._children li._active-effect:active span{$c:var(--select-foreground)}#_elements ._attributes{$fs:12px}#_elements ._attributes a{$c:var(--link-color)}#_elements ._attributes ._table-wrapper{$ox:auto;$wos:touch}#_elements ._attributes table td{$p:5px 10px}#_elements ._text-content{$b:#fff}#_elements ._text-content ._content{$ox:auto;$wos:touch;$p:10px}#_elements ._style-color{$po:relative;$t:1px;$w:10px;$h:10px;$bra:50%;margin-right:2px;$bo:1px solid var(--border);$d:inline-block}#_elements ._box-model{$ox:auto;$wos:touch;$c:#222;$fs:12px;$p:10px;$ta:center;$ws:nowrap;$bb:1px solid var(--color)}#_elements ._box-model ._label{$po:absolute;$ml:3px;$p:0 2px}#_elements ._box-model ._bottom,#_elements ._box-model ._left,#_elements ._box-model ._right,#_elements ._box-model ._top{$d:inline-block}#_elements ._box-model ._left,#_elements ._box-model ._right{vertical-align:middle}#_elements ._box-model ._border,#_elements ._box-model ._content,#_elements ._box-model ._margin,#_elements ._box-model ._padding,#_elements ._box-model ._position{$po:relative;$b:#fff;$d:inline-block;$ta:center;vertical-align:middle;$p:3px;$m:3px}#_elements ._box-model ._position{$bo:1px grey dotted}#_elements ._box-model ._margin{$bo:1px dashed;$b:rgba(246,178,107,.66)}#_elements ._box-model ._border{$bo:1px #000 solid;$b:rgba(255,229,153,.66)}#_elements ._box-model ._padding{$bo:1px grey dashed;$b:rgba(147,196,125,.55)}#_elements ._box-model ._content{$bo:1px grey solid;min-width:100px;$b:rgba(111,168,220,.66)}#_elements ._computed-style{$fs:12px}#_elements ._computed-style a{$c:var(--link-color)}#_elements ._computed-style ._table-wrapper{$oy:auto;$wos:touch;max-height:200px;$bt:1px solid var(--border)}#_elements ._computed-style table td{$p:5px 10px}#_elements ._computed-style table td._key{$ws:nowrap;$c:var(--var-color)}#_elements ._styles{$fs:12px}#_elements ._styles ._style-wrapper{$p:10px}#_elements ._styles ._style-wrapper ._style-rules{$bo:1px solid var(--border);$p:10px;$mb:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{$pl:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{$c:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{$c:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{$mb:0}#_elements ._listeners{$fs:12px}#_elements ._listeners ._listener-wrapper{$p:10px}#_elements ._listeners ._listener-wrapper ._listener{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{$p:10px;$b:var(--darker-background);$c:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{$ox:auto;$wos:touch;$p:10px;$bt:none}#_elements ._bottom-bar{$h:40px;$b:var(--darker-background);$po:absolute;$l:0;bottom:0;$w:100%;$fs:0;$bt:1px solid var(--border)}#_elements ._bottom-bar ._btn{$cu:pointer;$ta:center;$c:var(--primary);$fs:14px;$lh:40px;$w:25%;$d:inline-block;$tr:background .3s,color .3s}#_elements ._bottom-bar ._btn:active{$b:var(--highlight);$c:var(--select-foreground)}#_elements ._bottom-bar ._btn._active{$c:var(--accent)}",""]),G.exports=q},7693:function(G,q,V){(q=V(3645)(!1)).push([G.id,"._container ._entry-btn{$w:40px;$h:40px;$d:flex;$b:#000;opacity:.3;$bra:10px;$po:relative;$z:1000;$tr:opacity .3s;$c:#fff;$fs:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),G.exports=q},9577:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_info{$oy:auto;$wos:touch}#_info li{$m:10px;$bo:1px solid var(--border)}#_info li ._content,#_info li ._title{$p:10px}#_info li ._title{$pb:0;$fs:16px;$c:var(--accent)}#_info li ._content{$m:0;-webkit-user-select:text;$us:text;$c:var(--foreground);word-break:break-all}#_info li ._content table{$w:100%;$bc:collapse}#_info li ._content table td,#_info li ._content table th{$bo:1px solid var(--border);$p:10px}#_info li ._content *{-webkit-user-select:text;$us:text}#_info li ._content a{$c:var(--link-color)}#_info li ._device-key,#_info li ._system-key{$w:100px}",""]),G.exports=q},3985:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_network{$pt:36px}#_network ._title{$po:absolute;$w:100%;$h:36px;$l:0;$t:0;$b:var(--darker-background);$p:10px;$c:var(--primary);$h:36px;$bb:1px solid var(--border)}#_network ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_network ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_network ._title ._btn:active{$c:var(--accent)}#_network ._requests{$oy:auto;$wos:touch;$h:100%;$bb:1px solid var(--border);$mb:10px}#_network ._requests li{$d:flex;$w:100%;$cu:pointer;$bb:1px solid var(--border);$h:41px;$c:var(--foreground);$ws:nowrap}#_network ._requests li._error span{$c:var(--console-error-foreground)}#_network ._requests li span{$d:block;$lh:40px;$h:40px;$p:0 5px;$fs:12px;vertical-align:top;text-overflow:ellipsis;$o:hidden}#_network ._requests li ._name{$fl:1;$pl:10px}#_network ._requests li ._status{$w:40px}#_network ._requests li ._method,#_network ._requests li ._type{$w:50px}#_network ._requests li ._size{$w:70px}#_network ._requests li ._time{$w:60px;padding-right:10px}#_network ._requests li:nth-child(even){$b:var(--contrast)}#_network ._detail{$po:absolute;$w:100%;$h:100%;$l:0;$t:0;$z:10;$d:none;$pb:40px;$b:var(--background)}#_network ._detail ._http{$oy:auto;$wos:touch;$h:100%}#_network ._detail ._http ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_network ._detail ._http ._section{$bt:1px solid var(--border);$bb:1px solid var(--border);$mb:10px}#_network ._detail ._http ._section h2{$b:var(--darker-background);$c:var(--primary);$p:10px;$fs:14px}#_network ._detail ._http ._section table{$c:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;$us:text}#_network ._detail ._http ._section table td{$fs:12px;$p:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{$ws:nowrap;$fw:700;$c:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;$us:text;$ox:auto;$wos:touch;$p:10px;$fs:12px;$mb:10px;$ws:pre-wrap;$bt:1px solid var(--border);$c:var(--foreground);$bb:1px solid var(--border)}#_network ._detail ._back{$po:absolute;$l:0;bottom:0;$c:var(--foreground);$w:100%;$bt:1px solid var(--border);$b:var(--darker-background);$d:block;$h:40px;$lh:40px;text-decoration:none;$ta:center;$mt:10px;$tr:background .3s;$cu:pointer}#_network ._detail ._back:active{$c:var(--select-foreground)}",""]),G.exports=q},8070:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_resources{$oy:auto;$wos:touch;$p:10px;$fs:14px}#_resources ._section{$mb:10px;$o:hidden;$bo:1px solid var(--border)}#_resources ._section ._content{$oy:auto;$wos:touch;max-height:400px}#_resources ._section._warn{$bo:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}#_resources ._section._danger{$bo:1px solid var(--console-error-border)}#_resources ._section._danger ._title{$b:var(--console-error-background);$c:var(--console-error-foreground)}#_resources ._title{$p:10px;$c:var(--primary);$b:var(--darker-background)}#_resources ._title ._btn{$d:flex;$ml:5px;$f:right;$c:var(--primary);$w:18px;$h:18px;justify-content:center;align-items:center;$fs:16px;$cu:pointer;$tr:color .3s}#_resources ._title ._btn._search-keyword{$w:auto;max-width:80px;$fs:14px;$o:hidden;$fw:400;text-overflow:ellipsis;$d:inline-block}#_resources ._title ._btn:active{$c:var(--accent)}#_resources ._link-list{$fs:12px;$c:var(--foreground)}#_resources ._link-list li{$p:10px;word-break:break-all}#_resources ._link-list li a{$c:var(--link-color)!important}#_resources ._image-list{$c:var(--foreground);$fs:12px;$d:flex;flex-wrap:wrap;$p:10px!important}#_resources ._image-list:after{$co:'';$d:block;$cl:both}#_resources ._image-list li{flex-grow:1;$cu:pointer;$oy:hidden}#_resources ._image-list li._image{$h:100px;$fs:0}#_resources ._image-list li img{$h:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}#_resources table{$c:var(--foreground);$bc:collapse;$w:100%;$fs:12px}#_resources table tr:nth-child(even){$b:var(--contrast)}#_resources table td{$p:10px;word-break:break-all}#_resources table td._key{$ox:auto;$wos:touch;$ws:nowrap;max-width:120px}#_resources table td._control{$p:0;$fs:0;$w:40px}#_resources table td._control ._icon-delete{$cu:pointer;$c:var(--primary);$fs:14px;$d:inline-block;$w:40px;$h:40px;$ta:center;$lh:40px;$tr:color .3s}#_resources table td._control ._icon-delete:active{$c:var(--accent)}",""]),G.exports=q},6836:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_settings{$oy:auto;$wos:touch}#_settings ._separator{$h:10px}#_settings ._text{$p:10px;$c:var(--accent);$fs:12px}#_settings ._color,#_settings ._range,#_settings ._select{$cu:pointer}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head,#_settings ._switch{$p:10px;$b:var(--darker-background);$fs:14px;$bb:1px solid var(--border);$bt:1px solid var(--border);$c:var(--primary);$mt:-1px}#_settings ._color ._head,#_settings ._range ._head,#_settings ._select ._head{$tr:background .3s,color .3s}#_settings ._color ._head span,#_settings ._range ._head span,#_settings ._select ._head span{$f:right}#_settings ._color ._head:active,#_settings ._range ._head:active,#_settings ._select ._head:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ._head span{$d:inline-block;$bo:1px solid var(--border);$w:15px;$h:15px}#_settings ._select ul{$d:none;$bb:1px solid var(--border);$c:var(--foreground)}#_settings ._select ul._open{$d:block}#_settings ._select ul li{$p:10px;$tr:background .3s,color .3s}#_settings ._select ul li:active{$b:var(--highlight);$c:var(--select-foreground)}#_settings ._color ul{$d:none;$p:10px;$fs:0;$bb:1px solid var(--border)}#_settings ._color ul._open{$d:block}#_settings ._color ul li{$d:inline-block;$w:20px;$bo:1px solid var(--border);$h:20px;margin-right:10px}#_settings ._range ._input-container{$d:none;$p:10px;$bb:1px solid var(--border);$po:relative}#_settings ._range ._input-container._open{$d:block}#_settings ._range ._input-container ._range-track{$h:4px;$w:100%;$p:0 10px;$po:absolute;$l:0;$t:16px}#_settings ._range ._input-container ._range-track ._range-track-bar{$b:var(--darker-background);$bra:2px;$o:hidden;$w:100%;$h:4px}#_settings ._range ._input-container ._range-track ._range-track-bar ._range-track-progress{$h:100%;$b:var(--accent);$w:50%}#_settings ._range ._input-container input{-webkit-appearance:none;$b:0 0;$h:4px;$w:100%;$po:relative;$t:-3px;$m:0 auto;$ou:0;$bra:2px}#_settings ._range ._input-container input::-webkit-slider-thumb{-webkit-appearance:none;$po:relative;$t:0;$z:1;$w:16px;$bo:none;$h:16px;$bra:10px;$bo:1px solid var(--border);$b:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}#_settings ._switch ._checkbox{$f:right;$po:relative;vertical-align:top;$w:46px;$h:20px;$p:3px;$bra:18px;$bo:1px solid var(--border);$cu:pointer;$bi:linear-gradient(to bottom,var(--dark),var(--light) 25px)}#_settings ._switch ._checkbox ._input{$po:absolute;$t:0;$l:0;opacity:0}#_settings ._switch ._checkbox ._label{$pe:none;$po:relative;$d:block;$h:12px;$fs:10px;$tt:uppercase;$b:var(--darker-background);$bra:inherit;$bs:inset 0 1px 2px rgba(0,0,0,.12),inset 0 0 2px rgba(0,0,0,.15);$tr:.15s ease-out;transition-property:opacity background}#_settings ._switch ._checkbox ._label:after,#_settings ._switch ._checkbox ._label:before{$po:absolute;$t:50%;$mt:-.5em;$lh:1;$tr:inherit}#_settings ._switch ._checkbox ._input:checked~._label{$b:var(--accent);$bs:inset 0 1px 2px rgba(0,0,0,.15),inset 0 0 3px rgba(0,0,0,.2)}#_settings ._switch ._checkbox ._input:checked~._label:before{opacity:0}#_settings ._switch ._checkbox ._input:checked~._label:after{opacity:1}#_settings ._switch ._checkbox ._handle{$po:absolute;$pe:none;$t:0;$l:0;$w:18px;$h:18px;$bra:10px;$bs:1px 1px 5px rgba(0,0,0,.2);$bi:linear-gradient(to bottom,var(--light) 40%,var(--dark));$tr:left .15s ease-out}#_settings ._switch ._checkbox ._handle:before{$co:'';$po:absolute;$t:50%;$l:50%;$m:-6px 0 0 -6px;$w:12px;$h:12px;$bra:6px;$bs:inset 0 1px rgba(0,0,0,.02);$bi:linear-gradient(to bottom,var(--dark),var(--light))}#_settings ._switch ._checkbox ._input:checked~._handle{$l:30px;$bs:-1px 1px 5px rgba(0,0,0,.2)}",""]),G.exports=q},8277:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_snippets{$oy:auto;$wos:touch;$p:10px}#_snippets ._section{$mb:10px;$bo:1px solid var(--border);$o:hidden;$cu:pointer}#_snippets ._section:active ._name{$b:var(--highlight);$c:var(--select-foreground)}#_snippets ._section ._name{$p:10px;$c:var(--primary);$b:var(--darker-background);$tr:background .3s}#_snippets ._section ._name ._btn{$ml:10px;$f:right;$ta:center;$w:18px;$h:18px;$lh:18px;$fs:12px}#_snippets ._section ._description{$c:var(--foreground);$p:10px;$tr:background .3s}",""]),G.exports=q},6068:function(G,q,V){(q=V(3645)(!1)).push([G.id,"._search-highlight-block{$d:inline}._search-highlight-block ._keyword{$b:var(--console-warn-background);$c:var(--console-warn-foreground)}",""]),G.exports=q},4214:function(G,q,V){(q=V(3645)(!1)).push([G.id,"#_sources{$oy:auto;$wos:touch;$c:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{$ox:auto;$wos:touch;$w:100%;$mh:100%}#_sources ._raw{-webkit-user-select:text;$us:text;$p:10px}#_sources ._code{$fs:12px}#_sources ._code ._content *{-webkit-user-select:text;$us:text}#_sources pre._code{$p:10px}#_sources table._code{$bc:collapse}#_sources table._code ._gutter{$b:var(--background);$c:var(--primary)}#_sources table._code ._line-num{$br:1px solid var(--border);$p:0 3px 0 5px;$ta:right}#_sources table._code ._code-line{$p:0 4px;$ws:pre}#_sources ._image ._breadcrumb{$b:var(--darker-background);$c:var(--primary);-webkit-user-select:text;$us:text;$mb:10px;word-break:break-all;$p:10px;$fs:16px;$mh:40px;$bb:1px solid var(--border)}#_sources ._image ._img-container{$ta:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{$ta:center;$m:20px 0;$c:var(--foreground)}#_sources ._json{$p:0 10px}#_sources ._json *{-webkit-user-select:text;$us:text}#_sources iframe{$w:100%;$h:100%}",""]),G.exports=q},3146:function(G,q,V){(q=V(3645)(!1)).push([G.id,"._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{$m:0;$p:0;$bo:0;$fs:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{$d:block}._container body{$lh:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{$co:'';$co:none}._container table{$bc:collapse;border-spacing:0}",""]),G.exports=q},6802:function(G,q,V){(q=V(3645)(!1)).push([G.id,'.luna-console{$b:var(--background)}.luna-console-header{$c:var(--link-color);border-bottom-color:var(--border)}.luna-console-nesting-level{border-right-color:var(--border)}.luna-console-nesting-level::before{border-bottom-color:var(--border)}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:var(--contrast)}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}.luna-console-log-item{border-bottom-color:var(--border);$c:var(--foreground)}.luna-console-log-item a{$c:var(--link-color)!important}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$c:var(--foreground)}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$c:#e8a400}.luna-console-log-item .luna-console-count{$c:var(--select-foreground);$b:var(--highlight)}.luna-console-log-item.luna-console-warn{$c:var(--console-warn-foreground);$b:var(--console-warn-background);border-color:var(--console-warn-border)}.luna-console-log-item.luna-console-error{$b:var(--console-error-background);$c:var(--console-error-foreground);border-color:var(--console-error-border)}.luna-console-log-item.luna-console-error .luna-console-count{$b:var(--console-error-foreground)}.luna-console-log-item .luna-console-code .luna-console-key{$c:var(--var-color)}.luna-console-log-item .luna-console-code .luna-console-number{$c:var(--number-color)}.luna-console-log-item .luna-console-code .luna-console-null{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-string{$c:var(--string-color)}.luna-console-log-item .luna-console-code .luna-console-boolean{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-special{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:var(--keyword-color)}.luna-console-log-item .luna-console-code .luna-console-operator{$c:var(--operator-color)}.luna-console-log-item .luna-console-code .luna-console-comment{$c:var(--comment-color)}.luna-console-preview .luna-console-key{$c:var(--var-color)}.luna-console-preview .luna-console-number{$c:var(--number-color)}.luna-console-preview .luna-console-null{$c:var(--operator-color)}.luna-console-preview .luna-console-string{$c:var(--string-color)}.luna-console-preview .luna-console-boolean{$c:var(--keyword-color)}.luna-console-preview .luna-console-special{$c:var(--operator-color)}.luna-console-preview .luna-console-keyword{$c:var(--keyword-color)}.luna-console-preview .luna-console-operator{$c:var(--operator-color)}.luna-console-preview .luna-console-comment{$c:var(--comment-color)}.luna-object-viewer{$c:var(--primary);$fs:12px!important}.luna-object-viewer-null{$c:var(--operator-color)}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:var(--string-color)}.luna-object-viewer-number{$c:var(--number-color)}.luna-object-viewer-boolean{$c:var(--keyword-color)}.luna-object-viewer-special{$c:var(--operator-color)}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:var(--var-color)}.luna-object-viewer-expanded:before{border-color:transparent;$btc:var(--foreground)}.luna-object-viewer-collapsed:before{$btc:transparent;$blc:var(--foreground)}.luna-notification{$pe:none!important;$p:10px;$z:1000}.luna-notification-item{$z:500;$c:var(--foreground);$b:var(--background);$bs:none;$p:5px 10px;$bo:1px solid var(--border)}.luna-notification-upper{$mb:10px}.luna-notification-lower{$mt:10px}.luna-data-grid{$c:var(--foreground);$b:var(--background);border-color:var(--border)}.luna-data-grid td,.luna-data-grid th{border-color:var(--border)}.luna-data-grid th{$b:var(--darker-background)}.luna-data-grid th.luna-data-grid-sortable:hover{$b:var(--darker-background)}.luna-data-grid .luna-data-grid-data-container tr:nth-child(even){$b:var(--contrast)}.luna-dom-viewer{$c:var(--foreground)}.luna-dom-viewer .luna-dom-viewer-html-tag,.luna-dom-viewer .luna-dom-viewer-tag-name{$c:var(--tag-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-name{$c:var(--attribute-name-color)}.luna-dom-viewer .luna-dom-viewer-attribute-value{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-html-comment{$c:var(--comment-color)}.luna-dom-viewer .luna-dom-viewer-selection{$b:var(--highlight)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{$c:var(--var-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:var(--number-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:var(--string-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:var(--keyword-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:var(--operator-color)}.luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:var(--comment-color)}.luna-dom-viewer-children{$m:0;$pl:15px!important}._container{$pe:none;$po:fixed;$l:0;$t:0;$w:100%;$h:100%;$z:1000000;$c:var(--foreground);$ff:".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;$fs:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{$bsi:border-box;$pe:all;-webkit-user-select:none;$us:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;$p:0;$m:0}._container h1,._container h2,._container h3,._container h4{$m:0}._hidden{$d:none}._icon-disabled{opacity:.5}._tag-name-color{$c:var(--tag-name-color)}._function-color{$c:var(--function-color)}._attribute-name-color{$c:var(--attribute-name-color)}._operator-color{$c:var(--operator-color)}._string-color{$c:var(--string-color)}',""]),G.exports=q},276:function(G,q,V){(q=V(3645)(!1)).push([G.id,"@font-face{$ff:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{$d:inline-block;$ff:luna-console-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{$co:'\\f101'}.luna-console-icon-input:before{$co:'\\f102'}.luna-console-icon-output:before{$co:'\\f103'}.luna-console-icon-warn:before{$co:'\\f104'}.luna-console-icon-caret-down:before{$co:'\\f105'}.luna-console-icon-caret-right:before{$co:'\\f106'}.luna-console{$b:#fff;$oy:auto;$wos:touch;$h:100%;$po:relative;$wc:scroll-position;$cu:default;$fs:12px;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console.luna-console-theme-dark{background-color:#242424}.luna-console-hidden{$d:none}.luna-console-fake-logs{$po:absolute;$l:0;$t:0;$pe:none;$v:hidden;$w:100%}.luna-console-logs{$pt:1px;$po:absolute;$w:100%}.luna-console-log-container{$bsi:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{$ws:nowrap;$d:flex;$fs:11px;$c:#545454;$bt:1px solid transparent;$bb:1px solid #ccc}.luna-console-header .luna-console-time-from-container{$ox:auto;$wos:touch;$p:3px 10px}.luna-console-nesting-level{$w:14px;$fsh:0;$mt:-1px;$mb:-1px;$po:relative;$br:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{$co:''}.luna-console-nesting-level::before{$bb:1px solid #ccc;$po:absolute;$t:0;$l:0;$ml:100%;$w:5px;$h:100%;$bsi:border-box}.luna-console-log-item{$po:relative;$d:flex;$bt:1px solid transparent;$bb:1px solid #ccc;$mt:-1px;$c:#333}.luna-console-log-item:after{$co:'';$d:block;$cl:both}.luna-console-log-item .luna-console-code{$d:inline;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{$c:#881280}.luna-console-log-item .luna-console-code .luna-console-number{$c:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{$c:grey}.luna-console-log-item .luna-console-code .luna-console-comment{$c:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{$c:#1a1aa6}.luna-console-log-item a{$c:#15c!important}.luna-console-log-item .luna-console-icon-container{$m:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{$lh:20px;$fs:12px;$c:#333;$po:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{$t:0;$l:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{$t:0;$c:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{$t:0;$c:#e8a400}.luna-console-log-item .luna-console-count{$b:#8097bd;$c:#fff;$p:2px 4px;$bra:10px;$fs:12px;$f:left;$m:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{$fl:1;$o:hidden}.luna-console-log-item .luna-console-log-content{$p:3px 0;$m:0 10px;$ox:auto;$wos:touch;$ws:pre-wrap;-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;$us:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{$ws:initial}.luna-console-log-item.luna-console-error{$z:50;$b:#fff0f0;$c:red;$bt:1px solid #ffd6d6;$bb:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{$pl:1.2em;$ws:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{$b:red}.luna-console-log-item.luna-console-debug{$z:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{$z:40;$c:#5c5c00;$b:#fffbe5;$bt:1px solid #fff5c2;$bb:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{$b:#e8a400}.luna-console-log-item.luna-console-info{$z:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{$fw:700}.luna-console-preview{$d:inline-block}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{$c:#881391}.luna-console-preview .luna-console-number{$c:#1c00cf}.luna-console-preview .luna-console-null{$c:#5e5e5e}.luna-console-preview .luna-console-string{$c:#c41a16}.luna-console-preview .luna-console-boolean{$c:#0d22aa}.luna-console-preview .luna-console-special{$c:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{$b:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{$c:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{$c:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{$c:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{$c:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{$b:#290000;$c:#ff8080;$btc:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{$b:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{$c:#ffcb6b;$b:#332a00;$btc:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{$b:#42597f;$c:#949494}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{$c:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{$c:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{$c:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{$c:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{$c:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{$c:#7f7f7f}",""]),G.exports=q},2456:function(G,q,V){(q=V(3645)(!1)).push([G.id,".luna-data-grid{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$po:relative;$fs:12px;$bo:1px solid #ccc;$o:hidden}.luna-data-grid.luna-data-grid-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-data-grid.luna-data-grid-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{$d:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{$v:hidden}.luna-data-grid *{$bsi:border-box}.luna-data-grid.luna-data-grid-theme-dark{$c:#a5a5a5;$b:#242424;border-color:#3d3d3d}.luna-data-grid table{$w:100%;$h:100%;$bc:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{$p:1px 4px;border-left:1px solid #ccc;$ws:nowrap;text-overflow:ellipsis;$o:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{$fw:400;$bb:1px solid #ccc;$ta:left;$b:#f3f3f3}.luna-data-grid th.luna-data-grid-sortable:hover{$b:#e6e6e6}.luna-data-grid td{$h:20px;$cu:default;-webkit-user-select:text;$us:text}.luna-data-grid-data-container,.luna-data-grid-header-container{$o:hidden}.luna-data-grid-header-container{$h:21px}.luna-data-grid-data-container{$oy:auto}.luna-data-grid-data-container tr:nth-child(even){$b:#f2f7fd}.luna-data-grid-filler-row td{$h:auto}.luna-data-grid-theme-dark{color-scheme:dark}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#3d3d3d}.luna-data-grid-theme-dark th{$b:#292a2d}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{$b:#303030}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){$b:#0b2544}",""]),G.exports=q},5141:function(G,q,V){(q=V(3645)(!1)).push([G.id,"@font-face{$ff:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{$d:inline-block;$ff:luna-dom-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{$co:'\\f101'}.luna-dom-viewer-icon-arrow-right:before{$co:'\\f102'}.luna-dom-viewer{$c:#333;background-color:#fff;$ff:Arial,Helvetica,sans-serif;$bsi:border-box;-webkit-user-select:none;$us:none;$oy:auto;$wos:touch;$b:0 0;$ox:hidden;word-wrap:break-word;$p:0 0 0 12px;$fs:12px;$h:100%;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$cu:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{$ff:'Segoe UI',Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{$ff:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{$d:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{$v:hidden}.luna-dom-viewer *{$bsi:border-box}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{$c:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;$ml:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{$po:absolute!important;$fs:12px!important}.luna-dom-viewer-tree-item{$lh:16px;$mh:16px;$po:relative;$z:10}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{$d:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{$d:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{$d:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{$d:none}.luna-dom-viewer-html-tag{$c:#881280}.luna-dom-viewer-tag-name{$c:#881280}.luna-dom-viewer-attribute-name{$c:#994500}.luna-dom-viewer-attribute-value{$c:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{$c:#236e25}.luna-dom-viewer-selection{$po:absolute;$d:none;$l:-10000px;right:-10000px;$t:0;bottom:0;$z:-1;$b:#f2f7fd}.luna-dom-viewer-children{$m:0;$ox:visible;$oy:visible;$pl:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:grey}.luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{$c:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{$c:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{$c:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{$c:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{$c:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-selection{$b:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{$c:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{$c:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{$c:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{$c:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{$c:#f29766}",""]),G.exports=q},5674:function(G,q,V){(q=V(3645)(!1)).push([G.id,".luna-notification{$po:fixed;$t:0;$l:0;$w:100%;$h:100%;$p:20px;$bsi:border-box;$pe:none;$d:flex;flex-direction:column;$fs:14px;$ff:Arial,Helvetica,sans-serif}.luna-notification-item{$d:flex;$bs:0 2px 2px 0 rgba(0,0,0,.07),0 1px 5px 0 rgba(0,0,0,.1);$p:10px 16px;$c:#333;$b:#fff}.luna-notification-lower{$mt:16px}.luna-notification-upper{$mb:16px}.luna-notification-theme-dark .luna-notification-item{$bs:0 2px 2px 0 rgba(255,255,255,.07),0 1px 5px 0 rgba(255,255,255,.1);$c:#a5a5a5;$b:#242424}",""]),G.exports=q},8418:function(G,q,V){(q=V(3645)(!1)).push([G.id,"@font-face{$ff:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{$d:inline-block;$ff:luna-object-viewer-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{$co:'\\f101'}.luna-object-viewer-icon-caret-right:before{$co:'\\f102'}.luna-object-viewer{$ox:auto;$wos:touch;$oy:hidden;$cu:default;$ff:Menlo,Consolas,Lucida Console,Courier New,monospace;$fs:12px;$lh:1.2;$mh:100%;$c:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;$p:0!important;$pl:12px!important;$m:0!important}.luna-object-viewer li{$po:relative;$ws:nowrap;$lh:16px;$mh:16px}.luna-object-viewer>li>.luna-object-viewer-key{$d:none}.luna-object-viewer span{$po:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{$c:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{$d:inline}.luna-object-viewer-null{$c:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{$c:#c41a16}.luna-object-viewer-number{$c:#1c00cf}.luna-object-viewer-boolean{$c:#0d22aa}.luna-object-viewer-special{$c:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{$c:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{$po:absolute!important;$l:-12px;$c:#727272;$fs:12px}.luna-object-viewer-icon-caret-right{$t:1px}.luna-object-viewer-icon-caret-down{$t:2px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{$d:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{$d:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{$d:inline}.luna-object-viewer-hidden~ul{$d:none}.luna-object-viewer-theme-dark{$c:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{$c:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{$c:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{$c:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{$c:#5db0d7}",""]),G.exports=q},8998:function(G,q,V){(q=V(3645)(!1)).push([G.id,"@font-face{$ff:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA48AAsAAAAAGjgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAQEAAAG4LO8vdU9TLzIAAAIMAAAAPwAAAFZWm1KOY21hcAAAAkwAAAFLAAADpkj8yKVnbHlmAAADmAAAB88AAA7wW62fimhlYWQAAAtoAAAAMQAAADZ26MSyaGhlYQAAC5wAAAAdAAAAJAgEBC1obXR4AAALvAAAAB0AAACoVAv//GxvY2EAAAvcAAAANwAAAFZo5GTkbWF4cAAADBQAAAAfAAAAIAE7AQ1uYW1lAAAMNAAAASkAAAIWm5e+CnBvc3QAAA1gAAAA2gAAAT5KT479eJxNjzFTwkAQhb+DJARBRhlMgokoISahs7KwsHKsKC1oqRxnGCpLf4+/wB/ouwWFu9m7vX1v973DAWc88Ezn5XX1xmi7+dxxTcB+efw0d9uP9w3x30tYYHeMc2v6ZKzY8cU3Py5xrXukQ8RM54BUO2Oq6Sm33DFX3Un9WM8puDF2RMKInr1TnY3YF4SWFdYXcKVIhFZ0pZ9QSiNiSa28YiE34WF2ylCcVp2+b6LItHPhQzGf5Hmt2sCm+emnDrtyeKwvzGklnVjZvbT27hrNCs2/5/ZMoZai14vFLgybHRycK3IxW/vphEtj+M5SmuN/fmk/7Rsytf5SDmqaXw7eF6sAAAB4nGNgZGJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD8KsYC4MSxAg4A0CDMAALA5CMsAeJy100lOAlEQxvF/QwuCE2JAZhlFEj0UwTFxipKgd/FArlx7jXcC/KpfLdxiYpEfla5+dBf9qoEtIC/nkkLyRYLFp6pJVs9TzuopHzqu6GPrL5hzxzNL3kN1vfbKgnteWIUkq/yOJPtlhQ5jzrK7tagzZKRKlz4DTmgz0dkGpxwzpUeTmdYm5HTHVJ0WKLJNSf3sssc+BxxS5YiaLl9gs2htuN5C/Y463f7gBNqTcUNtTnvQnJ394Vr/Ebv2lXz70Sm2J5H927mry8IN5dKN5Mp15Np15cb15dYN5M7piWjno7Y8uIk8urE8uYY8O+vzxR3Lq5vK0ukxs3JNeXMzeXfahZBENrkhF2E5H9nkhjSyaQ9bkb0FoRBhuRhheTvCcinCcjmytyPsRLYDwWlCCU6zSnCaWoLT/BIqkSaZcBhppgnViNoPob5MjAB4nO1XXWwU1xW+597Zmf2ZndnZnZ3ZH7zL7jKz3vV6/70LdrCxMMZgg8H8NRgwxBQIoNLSJHXUVuIxiQhS3L6l6UvdqoIqiQQVLWpQRdWmVbFUNbSqVCkPfUjTPlSqKiE1zY577uyCm1R5zwP+Offce84959xzv3vuXAIEfxhlvyAKIVY274NW3dAlHxi6SN/Tg84M/Fixk4pzFb6qJEcVuIX9ZD7oXHVeDeaTxJ1PH7IV4iHEB20f5Ok5542dcN05vBM6cHLSOerMT3b1mEW/xf2ALoGYzYPdbDUydYNZgTUSSHFiqJSoBv2SyjsBwNFotOfjG8xan2sPac1W3QSDfh01/SnDSPlRGyevW+EcYa7f99n7xE+ipOiu0c7bQ802iBE01WrUTcM0ICuJkqhztt5utVtNrkSDR3ZPDQzU4PbMX2rO1J7jh6eniiXnl9+8eG7r2NjWcxc/esT8sVScmj48P+tM1WBsfi/crg0MTO2Gy59Qchl3KW5Mb7O3iUmquCJNF7MVkDixm2OQ76UFdBVM3IZcprfcNLQ5MSgx+gIH3hFVcdzjuTsXMBTA5cJbXX4N+XU5/HmNKEZg7q7HM44D7xwI9BkGfEXqcSqsS3u5+jI7TxKYqTJG1g0kigEOQBbDGgEtE9V5+nPrIje+iJbRYDwchH8Gw+HgHU5ed/aEE+E7fEyORGRHDYZH4Sab5jLeQSHcfJ33HolR9ffOHriJYXTx8i77Oe4hAYQlQtJEfAH71ZJz07m1BDMugT1Lzi22EwnMfELA87y2RogAAsHVbEcrogpivoz5HYMKlKFlYC55TnHTVWoakoJ7gFtQAUs3U8CRMAocCnxK1pXCw1BmJNYXDFNBfz47p9GNBe1ZKrAXjS2iED0f+JrpFwwlrl+gAu04/flrxxZ+t3DsWr7/f1h4C2309F7IzGnFNNXOU49nyYykEvoF75LZp3D7F6go7Dj36dku+xhDt9ltEnMx9FlY+Uxw/VtEtERVFy0pfxctItxd57tyF1nf9yJc+CHj3SjCReS6H6ytd9Sewuc2ri62/8AOkzBJkxpG5u7o423me8yyZWiOQj0FugIsq9ConoKGMUqbZQr/efbk8WuWde34yfceMeeHF4eHF5/nZCRe3aTnRnIJbPRNVXaoUFg+sbDcXyz2Ly+cWC4UOh/0NJHA06gS3zSSBWwbOOMx3sfZFaLyOmrnsiKeLaNRb0OryYqdB4GAZpqaX6Ylg5ZhRjS1zj7NlGA6vJk8nn+D3eA1DsGdWy9oDXeBOYXm3NLX5PXNrXpSRmODT33n0HOnT24ZHt5y8vRzp75wcMm8ZMy/uP3INFY+LGLTR8ZHtpR+BC+wwa3jI5tPLX64eGrzSLGwPD92aqhU3LX7zd27iqVEbBBV1uO4x+6Rfqy1CmTLdKjxqbrqxmZmNJPnmuoiG922cmvlysTFyuDe2TuzewcrnDm+Y9vW6ivOTy53hRP3tk1MXFk5evyR3FVMJiqvwNRlV3Rr5XPgX3T9/51dJSHSRzLEIgUyyG+dMm2OUu5OoQgtQGTVR6FZBo8V9TD8x8KagbYp0TfqRydte/Lo6W5Tr81Vq3PPcNK5AAecN4ET9trHl+ifqj+s/tqenF/sai7OT9pwo6eLZBgmqPMvugPohxOd1dr3aut3z8/wPoxglSdWLovHEg8ez1Af5IYyWgMkU8pLDA5dP3uWniknIl420Tl8n55dXd1x/+WXbpyhZ84mIik1eH21cwi0l+/vWF2lOTQrEbK2JngEIK+RG+QBeUg+Ih2+IdAagyHMfBnPu813oN1yG5FjNNsTqKAAFgaswzjoylSIGmbvN4qFxB3ioziQ6tZtro0kDY2WC2uz3u1hZxSLvOuq3eJDBrYYRc899Nqu1Ox5lfCaa9tuPHxumeYxE64z1wLnqJl3p+QxDs613aBs96bIcwuoxR2hcbOdx9l5yWTvKiktHAtIRrivHN/ok0PUJw1tlxOCGovuMxIqS0qp4bTiF5gEzJOpqCUj6fMbIUGQtIg3KEgCgNcjS/6oEkrIkqmlBuMbvbLCZGnD8Ka439TTkYIuKh5vSI4VmknNJ4JI0VLVrwdMpkUkOR4qhSKMSYKz7fTcbGmQsXp9/4GFxbl9g2VKq9XZuQX5rx5/cENl14QS9vqiVrZeGQfJK7djWqxYiWk4ZmcbhlcOyb/R+wVfUPYKqurTgoLIDOaRCnUzIujlfLxiMc/O6HdLB2emvkjTdK9f88fyraTml2Q5njXSlsekyZgQ8G6U5UAwI/mZLx4UI6rfCIS9tY2BkFcxEs3+EFCPLyD6/UYqbHlFr+D1iLIUsp9Kdy1lYilLNAQlEbIjqoeCXwxuiEZMnmXBCER81bTIqAQeX2hDy44lQpGk2VKdp1mjdvDQmRP79pTKjNZr+w88s7B/tlz9qa3H5cjYTjUS60spbLi5WSxqCVkLxAvVeJiP0S0p0ecVRzCh3lBY1ZjkCQbkgGhKctCuxvSiXt4Uq+WZuKK/VPjb9OwlSD85E0/OxJMz8X9ngq118LucCRTfcwmCN4eFHywiPuvwayuDtyI+O7ovC/xmNPmzA1+kIvuHc0xvtXSkvtYAqw60fJ3fpoop/GskLatlWd9mJTuZtD9+kB+37XF6NJpKRZ0fcPrQGrLtIQtd/xdNFnxoAHicY2BkYGAA4uO3TujH89t8ZeBmAQlEcT7e1wCj///9/5+FlYUJKMHBACIZAHZ2DWYAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABVoAW+QEOwAAAHicY2BgYGAhiP//J6wGiFmhmOH/XwYqAwDQmQRZAAAAeJxjYAACBQYThiCGAoZdjGyMPox5jHeYNJhKmI4wPWHWYM5gXsH8g0WNdQO7FXsFsRAA+8AThAB4nGNgZGBg0GJkZGBnAAEmIOYCQgaG/2A+AwANjAFKAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicbYzZboMwFEQ5CUsK3fc93ZdUPOSTLHMJkRyMjCXC35eG187DmdFIM8EkGJUG/2vBhCkhETEJM/ZIydjngEOOOOaEU84454JLrrjmhlvuuOeBR+Y88cwLr7zxzgeffPHNgp8gVc7ZLjdS+myMbr2qfKqVE58XtquzMe7qSBtRbqbtpnHStqG2TR8XYsRLJMPaxbJtVF3MRsuXU+klbIzqEyflMKmiAeKTHfNl3A53uhrMiPaht9bEf8iXYadcjcJh6cgxCCWeNSsqNAU1GxpaerZB8AvjDkPxAAA=') format('woff')}[class*=' _icon-'],[class^='_icon-']{$d:inline-block;$ff:eruda-icon!important;$fs:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{$co:'\\f101'}._icon-arrow-right:before{$co:'\\f102'}._icon-caret-down:before{$co:'\\f103'}._icon-caret-right:before{$co:'\\f104'}._icon-clear:before{$co:'\\f105'}._icon-compress:before{$co:'\\f106'}._icon-copy:before{$co:'\\f107'}._icon-delete:before{$co:'\\f108'}._icon-error:before{$co:'\\f109'}._icon-expand:before{$co:'\\f10a'}._icon-eye:before{$co:'\\f10b'}._icon-play:before{$co:'\\f10c'}._icon-refresh:before{$co:'\\f10d'}._icon-reset:before{$co:'\\f10e'}._icon-search:before{$co:'\\f10f'}._icon-select:before{$co:'\\f110'}._icon-tool:before{$co:'\\f111'}._icon-warn:before{$co:'\\f112'}",""]),G.exports=q},4432:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"console-container",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"control",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-clear clear-console",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span> <span "+((re=ye(Ee,"class").call(ge,"filter active",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-filter="all">All</span> <span '+((re=ye(Ee,"class").call(ge,"filter",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-filter="error">Error</span> <span '+((re=ye(Ee,"class").call(ge,"filter",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-filter="warn">Warning</span> <span '+((re=ye(Ee,"class").call(ge,"filter",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-filter="info">Info</span> <span '+((re=ye(Ee,"class").call(ge,"search-keyword",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span> <span "+((re=ye(Ee,"class").call(ge,"icon-search search",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span> <span "+((re=ye(Ee,"class").call(ge,"icon-copy icon-disabled copy",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"logs-container",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"logs-space",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"fake-logs",{name:"class",hash:{},data:xe}))!=null?re:"")+"></div><div "+((re=ye(Ee,"class").call(ge,"logs",{name:"class",hash:{},data:xe}))!=null?re:"")+"></div></div></div><div "+((re=ye(Ee,"class").call(ge,"js-input",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"buttons",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"button cancel",{name:"class",hash:{},data:xe}))!=null?re:"")+">Cancel</div><div "+((re=ye(Ee,"class").call(ge,"button execute",{name:"class",hash:{},data:xe}))!=null?re:"")+">Execute</div></div><span "+((re=ye(Ee,"class").call(ge,"icon-arrow-right",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span> <textarea></textarea></div></div>"},useData:!0})},8269:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"dev-tools",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"nav-bar-container",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"nav-bar",{name:"class",hash:{},data:xe}))!=null?re:"")+'></div><div class="eruda-bottom-bar"></div></div><div '+((re=ye(Ee,"class").call(ge,"tools",{name:"class",hash:{},data:xe}))!=null?re:"")+'></div><div class="eruda-notification"></div></div>'},useData:!0})},2407:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"bottom-bar",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"btn select",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon icon-select",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn highlight",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon icon-eye",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn reset",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon icon-reset",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div></div>"},useData:!0})},6560:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <ul "+((re=ye(Ee,"class").call(ge,"parents",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"parents"):te,{name:"each",hash:{},fn:ce.program(2,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </ul> "},2:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <li><div "+((re=we(Ee,"class").call(ge,"parent",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-idx="'+ce.escapeExpression(ye(te!=null?we(te,"idx"):te,te))+'">'+((re=ye(te!=null?we(te,"text"):te,te))!=null?re:"")+"</div><span "+((re=we(Ee,"class").call(ge,"icon-arrow-right",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></li> "},4:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <ul "+((re=ye(Ee,"class").call(ge,"children",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"children"):te,{name:"each",hash:{},fn:ce.program(5,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </ul> "},5:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return' <li class="eruda-child '+((re=we(Ee,"if").call(ge,te!=null?we(te,"isCmt"):te,{name:"if",hash:{},fn:ce.program(6,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "+((re=we(Ee,"if").call(ge,te!=null?we(te,"isEl"):te,{name:"if",hash:{},fn:ce.program(8,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+'" data-idx="'+ce.escapeExpression(ye(te!=null?we(te,"idx"):te,te))+'">'+((re=ye(te!=null?we(te,"text"):te,te))!=null?re:"")+"</li> "},6:function(ce,te,Ee,j,xe){return"eruda-green"},8:function(ce,te,Ee,j,xe){return"eruda-active-effect"},10:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"attributes"):te,{name:"each",hash:{},fn:ce.program(11,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},11:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return' <tr><td class="eruda-attribute-name-color">'+ce.escapeExpression(ge(te!=null?ye(te,"name"):te,te))+'</td><td class="eruda-string-color">'+((re=ge(te!=null?ye(te,"value"):te,te))!=null?re:"")+"</td></tr> "},13:function(ce,te,Ee,j,xe){return" <tr><td>Empty</td></tr> "},15:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"styles section",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2>Styles</h2><div "+((re=ye(Ee,"class").call(ge,"style-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"styles"):te,{name:"each",hash:{},fn:ce.program(16,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </div></div> "},16:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"style-rules",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div>"+ce.escapeExpression(ce.lambda(te!=null?ye(te,"selectorText"):te,te))+" {</div> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"style"):te,{name:"each",hash:{},fn:ce.program(17,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" <div>}</div></div> "},17:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(te!=null?te:ce.nullContext||{},"rule",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span>"+ce.escapeExpression(ge(xe&&ye(xe,"key"),te))+"</span>: "+((re=ge(te,te))!=null?re:"")+";</div> "},19:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return" <div "+((re=ke(Ee,"class").call(ge,"computed-style section",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2>Computed Style "+((re=ke(Ee,"if").call(ge,te!=null?ke(te,"rmDefComputedStyle"):te,{name:"if",hash:{},fn:ce.program(20,xe,0),inverse:ce.program(22,xe,0),data:xe}))!=null?re:"")+" <div "+((re=ke(Ee,"class").call(ge,"btn computed-style-search",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ke(Ee,"class").call(ge,"icon-search",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div> "+((re=ke(Ee,"if").call(ge,te!=null?ke(te,"computedStyleSearchKeyword"):te,{name:"if",hash:{},fn:ce.program(24,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </h2><div "+((re=ke(Ee,"class").call(ge,"box-model",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ke(Ee,"if").call(ge,(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"position"):re,{name:"if",hash:{},fn:ce.program(26,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+"<div "+((re=ke(Ee,"class").call(ge,"margin",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(ge,"label",{name:"class",hash:{},data:xe}))!=null?re:"")+">margin</div><div "+((re=ke(Ee,"class").call(ge,"top",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"margin"):re)!=null?ke(re,"top"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"left",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"margin"):re)!=null?ke(re,"left"):re,te))+"</div><div "+((re=ke(Ee,"class").call(ge,"border",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(ge,"label",{name:"class",hash:{},data:xe}))!=null?re:"")+">border</div><div "+((re=ke(Ee,"class").call(ge,"top",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"border"):re)!=null?ke(re,"top"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"left",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"border"):re)!=null?ke(re,"left"):re,te))+"</div><div "+((re=ke(Ee,"class").call(ge,"padding",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(ge,"label",{name:"class",hash:{},data:xe}))!=null?re:"")+">padding</div><div "+((re=ke(Ee,"class").call(ge,"top",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"padding"):re)!=null?ke(re,"top"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"left",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"padding"):re)!=null?ke(re,"left"):re,te))+"</div><div "+((re=ke(Ee,"class").call(ge,"content",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span>"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"content"):re)!=null?ke(re,"width"):re,te))+"</span>&nbsp;\xD7&nbsp;<span>"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"content"):re)!=null?ke(re,"height"):re,te))+"</span></div><div "+((re=ke(Ee,"class").call(ge,"right",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"padding"):re)!=null?ke(re,"right"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"bottom",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"padding"):re)!=null?ke(re,"bottom"):re,te))+"</div></div><div "+((re=ke(Ee,"class").call(ge,"right",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"border"):re)!=null?ke(re,"right"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"bottom",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"border"):re)!=null?ke(re,"bottom"):re,te))+"</div></div><div "+((re=ke(Ee,"class").call(ge,"right",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"margin"):re)!=null?ke(re,"right"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"bottom",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"margin"):re)!=null?ke(re,"bottom"):re,te))+"</div></div>"+((re=ke(Ee,"if").call(ge,(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"position"):re,{name:"if",hash:{},fn:ce.program(28,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </div><div "+((re=ke(Ee,"class").call(ge,"table-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"><table><tbody> "+((re=ke(Ee,"each").call(ge,te!=null?ke(te,"computedStyle"):te,{name:"each",hash:{},fn:ce.program(30,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </tbody></table></div></div> "},20:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"btn toggle-all-computed-style",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-compress",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div> "},22:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"btn toggle-all-computed-style",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-expand",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div> "},24:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" <div "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+ce.escapeExpression(ce.lambda(te!=null?ge(te,"computedStyleSearchKeyword"):te,te))+" </div> "},26:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return"<div "+((re=ke(Ee,"class").call(ge,"position",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(ge,"label",{name:"class",hash:{},data:xe}))!=null?re:"")+">position</div><div "+((re=ke(Ee,"class").call(ge,"top",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"position"):re)!=null?ke(re,"top"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"left",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"position"):re)!=null?ke(re,"left"):re,te))+"</div>"},28:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return"<div "+((re=ke(Ee,"class").call(ge,"right",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"position"):re)!=null?ke(re,"right"):re,te))+"</div><br><div "+((re=ke(Ee,"class").call(ge,"bottom",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye((re=(re=te!=null?ke(te,"boxModel"):te)!=null?ke(re,"position"):re)!=null?ke(re,"bottom"):re,te))+"</div></div>"},30:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <tr><td "+((re=ye(Ee,"class").call(te!=null?te:ce.nullContext||{},"key",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ge(xe&&ye(xe,"key"),te))+"</td><td>"+((re=ge(te,te))!=null?re:"")+"</td></tr> "},32:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"listeners section",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2>Event Listeners</h2><div "+((re=ye(Ee,"class").call(ge,"listener-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"listeners"):te,{name:"each",hash:{},fn:ce.program(33,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </div></div> "},33:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"listener",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"listener-type",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(xe&&ye(xe,"key"),te))+"</div><ul "+((re=ye(Ee,"class").call(ge,"listener-content",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te,{name:"each",hash:{},fn:ce.program(34,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </ul></div> "},34:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" <li "+((re=ge(Ee,"if").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"useCapture"):te,{name:"if",hash:{},fn:ce.program(35,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"listenerStr"):te,te))+"</li> "},35:function(ce,te,Ee,j,xe){var re;return(re=(ce.lookupProperty||function(ge,ye){if(Object.prototype.hasOwnProperty.call(ge,ye))return ge[ye]})(Ee,"class").call(te!=null?te:ce.nullContext||{},"capture",{name:"class",hash:{},data:xe}))!=null?re:""},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return((re=ye(Ee,"if").call(ge,te!=null?ye(te,"parents"):te,{name:"if",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" <div "+((re=ye(Ee,"class").call(ge,"breadcrumb",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ce.lambda(te!=null?ye(te,"name"):te,te))!=null?re:"")+" </div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"children"):te,{name:"if",hash:{},fn:ce.program(4,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" <div "+((re=ye(Ee,"class").call(ge,"attributes section",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2>Attributes</h2><div "+((re=ye(Ee,"class").call(ge,"table-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"><table><tbody> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"attributes"):te,{name:"if",hash:{},fn:ce.program(10,xe,0),inverse:ce.program(13,xe,0),data:xe}))!=null?re:"")+" </tbody></table></div></div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"styles"):te,{name:"if",hash:{},fn:ce.program(15,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"computedStyle"):te,{name:"if",hash:{},fn:ce.program(19,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"listeners"):te,{name:"if",hash:{},fn:ce.program(32,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")},useData:!0})},7640:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"entry-btn",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-tool",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div>"},useData:!0})},2861:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <li><h2 "+((re=we(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ye(te!=null?we(te,"name"):te,te))+"</h2><div "+((re=we(Ee,"class").call(ge,"content",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+((re=ye(te!=null?we(te,"val"):te,te))!=null?re:"")+"</div></li> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return"<ul> "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"infos"):te,{name:"each",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </ul>"},useData:!0})},4854:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Request<div "+((re=ye(Ee,"class").call(ge,"btn clear-request",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-clear",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div></div><ul "+((re=ye(Ee,"class").call(ge,"requests",{name:"class",hash:{},data:xe}))!=null?re:"")+"></ul><div "+((re=ye(Ee,"class").call(ge,"detail",{name:"class",hash:{},data:xe}))!=null?re:"")+"></div>"},useData:!0})},1083:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" <pre "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"data",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"data"):te,te))+"</pre> "},3:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"reqHeaders"):te,{name:"each",hash:{},fn:ce.program(4,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},4:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return" <tr><td "+((re=we(Ee,"class").call(te!=null?te:ce.nullContext||{},"key",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ye(ge(xe&&we(xe,"key"),te))+"</td><td>"+ye(ge(te,te))+"</td></tr> "},6:function(ce,te,Ee,j,xe){return" <tr><td>Empty</td></tr> "},8:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"resHeaders"):te,{name:"each",hash:{},fn:ce.program(4,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},10:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" <pre "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"response",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"resTxt"):te,te))+"</pre> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"http",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"breadcrumb",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ye(te,"url"):te,te))+"</div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"data"):te,{name:"if",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" <div "+((re=ye(Ee,"class").call(ge,"section",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2>Request Headers</h2><table "+((re=ye(Ee,"class").call(ge,"headers",{name:"class",hash:{},data:xe}))!=null?re:"")+"><tbody> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"reqHeaders"):te,{name:"if",hash:{},fn:ce.program(3,xe,0),inverse:ce.program(6,xe,0),data:xe}))!=null?re:"")+" </tbody></table><h2>Response Headers</h2><table "+((re=ye(Ee,"class").call(ge,"headers",{name:"class",hash:{},data:xe}))!=null?re:"")+"><tbody> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"resHeaders"):te,{name:"if",hash:{},fn:ce.program(8,xe,0),inverse:ce.program(6,xe,0),data:xe}))!=null?re:"")+" </tbody></table></div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"resTxt"):te,{name:"if",hash:{},fn:ce.program(10,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </div><div "+((re=ye(Ee,"class").call(ge,"back",{name:"class",hash:{},data:xe}))!=null?re:"")+">Back to the List</div>"},useData:!0})},726:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"requests"):te,{name:"each",hash:{},fn:ce.program(2,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},2:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return' <li class="eruda-request '+((re=ke(Ee,"if").call(ge,te!=null?ke(te,"hasErr"):te,{name:"if",hash:{},fn:ce.program(3,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+'" data-id="'+we(ye(xe&&ke(xe,"key"),te))+'"><span '+((re=ke(Ee,"class").call(ge,"name",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"name"):te,te))+"</span><span "+((re=ke(Ee,"class").call(ge,"status",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"status"):te,te))+"</span><span "+((re=ke(Ee,"class").call(ge,"method",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"method"):te,te))+"</span><span "+((re=ke(Ee,"class").call(ge,"type",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"subType"):te,te))+"</span><span "+((re=ke(Ee,"class").call(ge,"size",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"size"):te,te))+"</span><span "+((re=ke(Ee,"class").call(ge,"time",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"displayTime"):te,te))+"</span></li> "},3:function(ce,te,Ee,j,xe){return"eruda-error"},5:function(ce,te,Ee,j,xe){var re;return" <li><span "+((re=(ce.lookupProperty||function(ge,ye){if(Object.prototype.hasOwnProperty.call(ge,ye))return ge[ye]})(Ee,"class").call(te!=null?te:ce.nullContext||{},"name",{name:"class",hash:{},data:xe}))!=null?re:"")+">Empty</span></li> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return(re=ge(Ee,"if").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"requests"):te,{name:"if",hash:{},fn:ce.program(1,xe,0),inverse:ce.program(5,xe,0),data:xe}))!=null?re:""},useData:!0})},2875:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return"<div "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"localStoreSearchKeyword"):te,te))+"</div>"},3:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"localStoreData"):te,{name:"each",hash:{},fn:ce.program(4,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},4:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return" <tr><td "+((re=ke(Ee,"class").call(ge,"key",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"key"):te,te))+"</td><td "+((re=ke(Ee,"class").call(ge,"storage-val",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-key="'+we(ye(te!=null?ke(te,"key"):te,te))+'" data-type="local">'+we(ye(te!=null?ke(te,"val"):te,te))+"</td><td "+((re=ke(Ee,"class").call(ge,"control",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ke(Ee,"class").call(ge,"icon-delete delete-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-key="'+we(ye(te!=null?ke(te,"key"):te,te))+'" data-type="local"></span></td></tr> '},6:function(ce,te,Ee,j,xe){return" <tr><td>Empty</td></tr> "},8:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return"<div "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"sessionStoreSearchKeyword"):te,te))+"</div>"},10:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"sessionStoreData"):te,{name:"each",hash:{},fn:ce.program(11,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},11:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return" <tr><td "+((re=ke(Ee,"class").call(ge,"key",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"key"):te,te))+"</td><td "+((re=ke(Ee,"class").call(ge,"storage-val",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-key="'+we(ye(te!=null?ke(te,"key"):te,te))+'" data-type="session">'+we(ye(te!=null?ke(te,"val"):te,te))+"</td><td "+((re=ke(Ee,"class").call(ge,"control",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ke(Ee,"class").call(ge,"icon-delete delete-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-key="'+we(ye(te!=null?ke(te,"key"):te,te))+'" data-type="session"></span></td></tr> '},13:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return"<div "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"btn search-keyword",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"cookieSearchKeyword"):te,te))+"</div>"},15:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"cookieData"):te,{name:"each",hash:{},fn:ce.program(16,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},16:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return" <tr><td "+((re=ke(Ee,"class").call(ge,"key",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"key"):te,te))+"</td><td>"+we(ye(te!=null?ke(te,"val"):te,te))+"</td><td "+((re=ke(Ee,"class").call(ge,"control",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ke(Ee,"class").call(ge,"icon-delete delete-cookie",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-key="'+we(ye(te!=null?ke(te,"key"):te,te))+'"></span></td></tr> '},18:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"scriptData"):te,{name:"each",hash:{},fn:ce.program(19,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},19:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return' <li><a href="'+ye(ge(te,te))+'" target="_blank" '+((re=we(Ee,"class").call(te!=null?te:ce.nullContext||{},"js-link",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ye(ge(te,te))+"</a></li> "},21:function(ce,te,Ee,j,xe){return" <li>Empty</li> "},23:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"stylesheetData"):te,{name:"each",hash:{},fn:ce.program(24,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},24:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return' <li><a href="'+ye(ge(te,te))+'" target="_blank" '+((re=we(Ee,"class").call(te!=null?te:ce.nullContext||{},"css-link",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ye(ge(te,te))+"</a></li> "},26:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"iframeData"):te,{name:"each",hash:{},fn:ce.program(27,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},27:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=ce.lookupProperty||function(ke,Se){if(Object.prototype.hasOwnProperty.call(ke,Se))return ke[Se]};return' <li><a href="'+ye(ge(te,te))+'" target="_blank" '+((re=we(Ee,"class").call(te!=null?te:ce.nullContext||{},"iframe-link",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ye(ge(te,te))+"</a></li> "},29:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" "+((re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"imageData"):te,{name:"each",hash:{},fn:ce.program(30,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" "},30:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <li "+((re=ye(Ee,"class").call(ge,"image",{name:"class",hash:{},data:xe}))!=null?re:"")+'><img src="'+ce.escapeExpression(ce.lambda(te,te))+'" data-exclude="true" '+((re=ye(Ee,"class").call(ge,"img-link",{name:"class",hash:{},data:xe}))!=null?re:"")+"></li> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"section local-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Local Storage<div "+((re=ye(Ee,"class").call(ge,"btn refresh-local-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn clear-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-type="local"><span '+((re=ye(Ee,"class").call(ge,"icon-clear",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn search",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-type="local"><span '+((re=ye(Ee,"class").call(ge,"icon-search",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"localStoreSearchKeyword"):te,{name:"if",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </h2><div "+((re=ye(Ee,"class").call(ge,"content",{name:"class",hash:{},data:xe}))!=null?re:"")+"><table><tbody> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"localStoreData"):te,{name:"if",hash:{},fn:ce.program(3,xe,0),inverse:ce.program(6,xe,0),data:xe}))!=null?re:"")+" </tbody></table></div></div><div "+((re=ye(Ee,"class").call(ge,"section session-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Session Storage<div "+((re=ye(Ee,"class").call(ge,"btn refresh-session-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn clear-storage",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-type="session"><span '+((re=ye(Ee,"class").call(ge,"icon-clear",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn search",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-type="session"><span '+((re=ye(Ee,"class").call(ge,"icon-search",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"sessionStoreSearchKeyword"):te,{name:"if",hash:{},fn:ce.program(8,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </h2><div "+((re=ye(Ee,"class").call(ge,"content",{name:"class",hash:{},data:xe}))!=null?re:"")+"><table><tbody> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"sessionStoreData"):te,{name:"if",hash:{},fn:ce.program(10,xe,0),inverse:ce.program(6,xe,0),data:xe}))!=null?re:"")+" </tbody></table></div></div><div "+((re=ye(Ee,"class").call(ge,ye(Ee,"concat").call(ge,"section cookie ",te!=null?ye(te,"cookieState"):te,{name:"concat",hash:{},data:xe}),{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Cookie<div "+((re=ye(Ee,"class").call(ge,"btn refresh-cookie",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn clear-cookie",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-clear",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div><div "+((re=ye(Ee,"class").call(ge,"btn search",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-type="cookie"><span '+((re=ye(Ee,"class").call(ge,"icon-search",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"cookieSearchKeyword"):te,{name:"if",hash:{},fn:ce.program(13,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </h2><div "+((re=ye(Ee,"class").call(ge,"content",{name:"class",hash:{},data:xe}))!=null?re:"")+"><table><tbody> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"cookieData"):te,{name:"if",hash:{},fn:ce.program(15,xe,0),inverse:ce.program(6,xe,0),data:xe}))!=null?re:"")+" </tbody></table></div></div><div "+((re=ye(Ee,"class").call(ge,ye(Ee,"concat").call(ge,"section script ",te!=null?ye(te,"scriptState"):te,{name:"concat",hash:{},data:xe}),{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Script<div "+((re=ye(Ee,"class").call(ge,"btn refresh-script",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div></h2><ul "+((re=ye(Ee,"class").call(ge,"link-list",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"scriptData"):te,{name:"if",hash:{},fn:ce.program(18,xe,0),inverse:ce.program(21,xe,0),data:xe}))!=null?re:"")+" </ul></div><div "+((re=ye(Ee,"class").call(ge,ye(Ee,"concat").call(ge,"section stylesheet ",te!=null?ye(te,"stylesheetState"):te,{name:"concat",hash:{},data:xe}),{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Stylesheet<div "+((re=ye(Ee,"class").call(ge,"btn refresh-stylesheet",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div></h2><ul "+((re=ye(Ee,"class").call(ge,"link-list",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"stylesheetData"):te,{name:"if",hash:{},fn:ce.program(23,xe,0),inverse:ce.program(21,xe,0),data:xe}))!=null?re:"")+" </ul></div><div "+((re=ye(Ee,"class").call(ge,"section iframe",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,"title",{name:"class",hash:{},data:xe}))!=null?re:"")+">Iframe<div "+((re=ye(Ee,"class").call(ge,"btn refresh-iframe",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div></h2><ul "+((re=ye(Ee,"class").call(ge,"link-list",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"iframeData"):te,{name:"if",hash:{},fn:ce.program(26,xe,0),inverse:ce.program(21,xe,0),data:xe}))!=null?re:"")+" </ul></div><div "+((re=ye(Ee,"class").call(ge,"section image",{name:"class",hash:{},data:xe}))!=null?re:"")+"><h2 "+((re=ye(Ee,"class").call(ge,ye(Ee,"concat").call(ge,"title ",te!=null?ye(te,"imageState"):te,{name:"concat",hash:{},data:xe}),{name:"class",hash:{},data:xe}))!=null?re:"")+">Image<div "+((re=ye(Ee,"class").call(ge,"btn refresh-image",{name:"class",hash:{},data:xe}))!=null?re:"")+"><span "+((re=ye(Ee,"class").call(ge,"icon-refresh",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></div></h2><ul "+((re=ye(Ee,"class").call(ge,"image-list",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"if").call(ge,te!=null?ye(te,"imageData"):te,{name:"if",hash:{},fn:ce.program(29,xe,0),inverse:ce.program(21,xe,0),data:xe}))!=null?re:"")+" </ul></div>"},useData:!0})},6652:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){return' <li style="background: '+ce.escapeExpression(ce.lambda(te,te))+'"></li> '},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=te!=null?te:ce.nullContext||{},ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return'<div id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'" '+((re=ke(Ee,"class").call(we,"color",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(we,"head",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+ye(ge(te!=null?ke(te,"desc"):te,te))+" <span "+((re=ke(Ee,"class").call(we,"val",{name:"class",hash:{},data:xe}))!=null?re:"")+' style="background-color: '+ye(ge(te!=null?ke(te,"val"):te,te))+'"></span></div><ul data-id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'"> '+((re=ke(Ee,"each").call(we,te!=null?ke(te,"colors"):te,{name:"each",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </ul></div>"},useData:!0})},480:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=te!=null?te:ce.nullContext||{},ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return'<div id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'" '+((re=ke(Ee,"class").call(we,"range",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(we,"head",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+ye(ge(te!=null?ke(te,"desc"):te,te))+" <span "+((re=ke(Ee,"class").call(we,"val",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ye(ge(te!=null?ke(te,"val"):te,te))+"</span></div><div "+((re=ke(Ee,"class").call(we,"input-container",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'"><div '+((re=ke(Ee,"class").call(we,"range-track",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(we,"range-track-bar",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(we,"range-track-progress",{name:"class",hash:{},data:xe}))!=null?re:"")+' style="width: '+ye(ge(te!=null?ke(te,"progress"):te,te))+'%"></div></div></div><input type="range" min="'+ye(ge(te!=null?ke(te,"min"):te,te))+'" max="'+ye(ge(te!=null?ke(te,"max"):te,te))+'" step="'+ye(ge(te!=null?ke(te,"step"):te,te))+'" value="'+ye(ge(te!=null?ke(te,"val"):te,te))+'"></div></div>'},useData:!0})},1868:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){return" <li>"+ce.escapeExpression(ce.lambda(te,te))+"</li> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=te!=null?te:ce.nullContext||{},ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return'<div id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'" '+((re=ke(Ee,"class").call(we,"select",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(we,"head",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+ye(ge(te!=null?ke(te,"desc"):te,te))+" <span "+((re=ke(Ee,"class").call(we,"val",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ye(ge(te!=null?ke(te,"val"):te,te))+'</span></div><ul data-id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'"> '+((re=ke(Ee,"each").call(we,te!=null?ke(te,"selections"):te,{name:"each",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </ul></div>"},useData:!0})},7006:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){return' checked="checked" '},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lambda,ye=ce.escapeExpression,we=te!=null?te:ce.nullContext||{},ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return'<div id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'" '+((re=ke(Ee,"class").call(we,"switch",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+ye(ge(te!=null?ke(te,"desc"):te,te))+" <label "+((re=ke(Ee,"class").call(we,"checkbox",{name:"class",hash:{},data:xe}))!=null?re:"")+'><input type="checkbox" '+((re=ke(Ee,"class").call(we,"input",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-id="'+ye(ge(te!=null?ke(te,"id"):te,te))+'" '+((re=ke(Ee,"if").call(we,te!=null?ke(te,"val"):te,{name:"if",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+"> <span "+((re=ke(Ee,"class").call(we,"label",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span> <span "+((re=ke(Ee,"class").call(we,"handle",{name:"class",hash:{},data:xe}))!=null?re:"")+"></span></label></div>"},useData:!0})},1122:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re=ce.lambda,ge=ce.escapeExpression,ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return' <div class="eruda-section eruda-run" data-idx="'+ge(re(xe&&ye(xe,"index"),te))+'"><h2 class="eruda-name">'+ge(re(te!=null?ye(te,"name"):te,te))+' <div class="eruda-btn"><span class="eruda-icon-play"></span></div></h2><div class="eruda-description"> '+ge(re(te!=null?ye(te,"desc"):te,te))+" </div></div> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return(re=ge(Ee,"each").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"snippets"):te,{name:"each",hash:{},fn:ce.program(1,xe,0),inverse:ce.noop,data:xe}))!=null?re:""},useData:!0})},431:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({1:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"code-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"><table "+((re=ye(Ee,"class").call(ge,"code",{name:"class",hash:{},data:xe}))!=null?re:"")+"><tbody><tr><td "+((re=ye(Ee,"class").call(ge,"gutter",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"code"):te,{name:"each",hash:{},fn:ce.program(2,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </td><td "+((re=ye(Ee,"class").call(ge,"content",{name:"class",hash:{},data:xe}))!=null?re:"")+"> "+((re=ye(Ee,"each").call(ge,te!=null?ye(te,"code"):te,{name:"each",hash:{},fn:ce.program(4,xe,0),inverse:ce.noop,data:xe}))!=null?re:"")+" </td></tr></tbody></table></div> "},2:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" <div "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"line-num",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ge(te,"idx"):te,te))+"</div> "},4:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return" <pre "+((re=ge(Ee,"class").call(te!=null?te:ce.nullContext||{},"code-line",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+((re=ce.lambda(te!=null?ge(te,"val"):te,te))!=null?re:"")+"</pre> "},6:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return" <div "+((re=ye(Ee,"class").call(ge,"code-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"><pre "+((re=ye(Ee,"class").call(ge,"code",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+((re=ce.lambda(te!=null?ye(te,"code"):te,te))!=null?re:"")+"</pre></div> "},compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return(re=ge(Ee,"if").call(te!=null?te:ce.nullContext||{},te!=null?ge(te,"showLineNum"):te,{name:"if",hash:{},fn:ce.program(1,xe,0),inverse:ce.program(6,xe,0),data:xe}))!=null?re:""},useData:!0})},6680:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=ce.lookupProperty||function(ye,we){if(Object.prototype.hasOwnProperty.call(ye,we))return ye[we]};return'<iframe src="'+((re=ce.lambda(te!=null?ge(te,"src"):te,te))!=null?re:"")+'"></iframe>'},useData:!0})},2229:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lambda,we=ce.escapeExpression,ke=ce.lookupProperty||function(Se,Pe){if(Object.prototype.hasOwnProperty.call(Se,Pe))return Se[Pe]};return"<div "+((re=ke(Ee,"class").call(ge,"image",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ke(Ee,"class").call(ge,"breadcrumb",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"src"):te,te))+"</div><div "+((re=ke(Ee,"class").call(ge,"img-container",{name:"class",hash:{},data:xe}))!=null?re:"")+' data-exclude="true"><img src="'+we(ye(te!=null?ke(te,"src"):te,te))+'"></div><div '+((re=ke(Ee,"class").call(ge,"img-info",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+we(ye(te!=null?ke(te,"width"):te,te))+" \xD7 "+we(ye(te!=null?ke(te,"height"):te,te))+"</div></div>"},useData:!0})},2944:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re;return"<ul "+((re=(ce.lookupProperty||function(ge,ye){if(Object.prototype.hasOwnProperty.call(ge,ye))return ge[ye]})(Ee,"class").call(te!=null?te:ce.nullContext||{},"json",{name:"class",hash:{},data:xe}))!=null?re:"")+"></ul>"},useData:!0})},8191:function(G,q,V){var he=V(9871);G.exports=(he.default||he).template({compiler:[8,">= 4.3.0"],main:function(ce,te,Ee,j,xe){var re,ge=te!=null?te:ce.nullContext||{},ye=ce.lookupProperty||function(we,ke){if(Object.prototype.hasOwnProperty.call(we,ke))return we[ke]};return"<div "+((re=ye(Ee,"class").call(ge,"raw-wrapper",{name:"class",hash:{},data:xe}))!=null?re:"")+"><div "+((re=ye(Ee,"class").call(ge,"raw",{name:"class",hash:{},data:xe}))!=null?re:"")+">"+ce.escapeExpression(ce.lambda(te!=null?ye(te,"val"):te,te))+"</div></div>"},useData:!0})},9669:function(G,q,V){G.exports=V(1609)},5448:function(G,q,V){var he=V(4867),ce=V(6026),te=V(4372),Ee=V(5327),j=V(4097),xe=V(4109),re=V(7985),ge=V(7874),ye=V(2648),we=V(644),ke=V(205);G.exports=function(Se){return new Promise(function(Pe,Re){var Ne,ze=Se.data,Be=Se.headers,Ze=Se.responseType;function Xe(){Se.cancelToken&&Se.cancelToken.unsubscribe(Ne),Se.signal&&Se.signal.removeEventListener("abort",Ne)}he.isFormData(ze)&&he.isStandardBrowserEnv()&&delete Be["Content-Type"];var qe=new XMLHttpRequest;if(Se.auth){var Je=Se.auth.username||"",dt=Se.auth.password?unescape(encodeURIComponent(Se.auth.password)):"";Be.Authorization="Basic "+btoa(Je+":"+dt)}var Ct=j(Se.baseURL,Se.url);function bt(){if(qe){var tt="getAllResponseHeaders"in qe?xe(qe.getAllResponseHeaders()):null,rt={data:Ze&&Ze!=="text"&&Ze!=="json"?qe.response:qe.responseText,status:qe.status,statusText:qe.statusText,headers:tt,config:Se,request:qe};ce(function(ht){Pe(ht),Xe()},function(ht){Re(ht),Xe()},rt),qe=null}}if(qe.open(Se.method.toUpperCase(),Ee(Ct,Se.params,Se.paramsSerializer),!0),qe.timeout=Se.timeout,"onloadend"in qe?qe.onloadend=bt:qe.onreadystatechange=function(){qe&&qe.readyState===4&&(qe.status!==0||qe.responseURL&&qe.responseURL.indexOf("file:")===0)&&setTimeout(bt)},qe.onabort=function(){qe&&(Re(new ye("Request aborted",ye.ECONNABORTED,Se,qe)),qe=null)},qe.onerror=function(){Re(new ye("Network Error",ye.ERR_NETWORK,Se,qe,qe)),qe=null},qe.ontimeout=function(){var tt=Se.timeout?"timeout of "+Se.timeout+"ms exceeded":"timeout exceeded",rt=Se.transitional||ge;Se.timeoutErrorMessage&&(tt=Se.timeoutErrorMessage),Re(new ye(tt,rt.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,Se,qe)),qe=null},he.isStandardBrowserEnv()){var xt=(Se.withCredentials||re(Ct))&&Se.xsrfCookieName?te.read(Se.xsrfCookieName):void 0;xt&&(Be[Se.xsrfHeaderName]=xt)}"setRequestHeader"in qe&&he.forEach(Be,function(tt,rt){ze===void 0&&rt.toLowerCase()==="content-type"?delete Be[rt]:qe.setRequestHeader(rt,tt)}),he.isUndefined(Se.withCredentials)||(qe.withCredentials=!!Se.withCredentials),Ze&&Ze!=="json"&&(qe.responseType=Se.responseType),typeof Se.onDownloadProgress=="function"&&qe.addEventListener("progress",Se.onDownloadProgress),typeof Se.onUploadProgress=="function"&&qe.upload&&qe.upload.addEventListener("progress",Se.onUploadProgress),(Se.cancelToken||Se.signal)&&(Ne=function(tt){qe&&(Re(!tt||tt&&tt.type?new we:tt),qe.abort(),qe=null)},Se.cancelToken&&Se.cancelToken.subscribe(Ne),Se.signal&&(Se.signal.aborted?Ne():Se.signal.addEventListener("abort",Ne))),ze||(ze=null);var nt=ke(Ct);nt&&["http","https","file"].indexOf(nt)===-1?Re(new ye("Unsupported protocol "+nt+":",ye.ERR_BAD_REQUEST,Se)):qe.send(ze)})}},1609:function(G,q,V){var he=V(4867),ce=V(1849),te=V(321),Ee=V(7185),j=function xe(re){var ge=new te(re),ye=ce(te.prototype.request,ge);return he.extend(ye,te.prototype,ge),he.extend(ye,ge),ye.create=function(we){return xe(Ee(re,we))},ye}(V(5546));j.Axios=te,j.CanceledError=V(644),j.CancelToken=V(4972),j.isCancel=V(6502),j.VERSION=V(7288).version,j.toFormData=V(7675),j.AxiosError=V(2648),j.Cancel=j.CanceledError,j.all=function(xe){return Promise.all(xe)},j.spread=V(8713),j.isAxiosError=V(6268),G.exports=j,G.exports.default=j},4972:function(G,q,V){var he=V(644);function ce(te){if(typeof te!="function")throw new TypeError("executor must be a function.");var Ee;this.promise=new Promise(function(xe){Ee=xe});var j=this;this.promise.then(function(xe){if(j._listeners){var re,ge=j._listeners.length;for(re=0;re<ge;re++)j._listeners[re](xe);j._listeners=null}}),this.promise.then=function(xe){var re,ge=new Promise(function(ye){j.subscribe(ye),re=ye}).then(xe);return ge.cancel=function(){j.unsubscribe(re)},ge},te(function(xe){j.reason||(j.reason=new he(xe),Ee(j.reason))})}ce.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ce.prototype.subscribe=function(te){this.reason?te(this.reason):this._listeners?this._listeners.push(te):this._listeners=[te]},ce.prototype.unsubscribe=function(te){if(this._listeners){var Ee=this._listeners.indexOf(te);Ee!==-1&&this._listeners.splice(Ee,1)}},ce.source=function(){var te;return{token:new ce(function(Ee){te=Ee}),cancel:te}},G.exports=ce},644:function(G,q,V){var he=V(2648);function ce(te){he.call(this,te==null?"canceled":te,he.ERR_CANCELED),this.name="CanceledError"}V(4867).inherits(ce,he,{__CANCEL__:!0}),G.exports=ce},6502:function(G){G.exports=function(q){return!(!q||!q.__CANCEL__)}},321:function(G,q,V){var he=V(4867),ce=V(5327),te=V(782),Ee=V(3572),j=V(7185),xe=V(4097),re=V(4875),ge=re.validators;function ye(we){this.defaults=we,this.interceptors={request:new te,response:new te}}ye.prototype.request=function(we,ke){typeof we=="string"?(ke=ke||{}).url=we:ke=we||{},(ke=j(this.defaults,ke)).method?ke.method=ke.method.toLowerCase():this.defaults.method?ke.method=this.defaults.method.toLowerCase():ke.method="get";var Se=ke.transitional;Se!==void 0&&re.assertOptions(Se,{silentJSONParsing:ge.transitional(ge.boolean),forcedJSONParsing:ge.transitional(ge.boolean),clarifyTimeoutError:ge.transitional(ge.boolean)},!1);var Pe=[],Re=!0;this.interceptors.request.forEach(function(Je){typeof Je.runWhen=="function"&&Je.runWhen(ke)===!1||(Re=Re&&Je.synchronous,Pe.unshift(Je.fulfilled,Je.rejected))});var Ne,ze=[];if(this.interceptors.response.forEach(function(Je){ze.push(Je.fulfilled,Je.rejected)}),!Re){var Be=[Ee,void 0];for(Array.prototype.unshift.apply(Be,Pe),Be=Be.concat(ze),Ne=Promise.resolve(ke);Be.length;)Ne=Ne.then(Be.shift(),Be.shift());return Ne}for(var Ze=ke;Pe.length;){var Xe=Pe.shift(),qe=Pe.shift();try{Ze=Xe(Ze)}catch(Je){qe(Je);break}}try{Ne=Ee(Ze)}catch(Je){return Promise.reject(Je)}for(;ze.length;)Ne=Ne.then(ze.shift(),ze.shift());return Ne},ye.prototype.getUri=function(we){we=j(this.defaults,we);var ke=xe(we.baseURL,we.url);return ce(ke,we.params,we.paramsSerializer)},he.forEach(["delete","get","head","options"],function(we){ye.prototype[we]=function(ke,Se){return this.request(j(Se||{},{method:we,url:ke,data:(Se||{}).data}))}}),he.forEach(["post","put","patch"],function(we){function ke(Se){return function(Pe,Re,Ne){return this.request(j(Ne||{},{method:we,headers:Se?{"Content-Type":"multipart/form-data"}:{},url:Pe,data:Re}))}}ye.prototype[we]=ke(),ye.prototype[we+"Form"]=ke(!0)}),G.exports=ye},2648:function(G,q,V){var he=V(4867);function ce(j,xe,re,ge,ye){Error.call(this),this.message=j,this.name="AxiosError",xe&&(this.code=xe),re&&(this.config=re),ge&&(this.request=ge),ye&&(this.response=ye)}he.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var te=ce.prototype,Ee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(j){Ee[j]={value:j}}),Object.defineProperties(ce,Ee),Object.defineProperty(te,"isAxiosError",{value:!0}),ce.from=function(j,xe,re,ge,ye,we){var ke=Object.create(te);return he.toFlatObject(j,ke,function(Se){return Se!==Error.prototype}),ce.call(ke,j.message,xe,re,ge,ye),ke.name=j.name,we&&Object.assign(ke,we),ke},G.exports=ce},782:function(G,q,V){var he=V(4867);function ce(){this.handlers=[]}ce.prototype.use=function(te,Ee,j){return this.handlers.push({fulfilled:te,rejected:Ee,synchronous:!!j&&j.synchronous,runWhen:j?j.runWhen:null}),this.handlers.length-1},ce.prototype.eject=function(te){this.handlers[te]&&(this.handlers[te]=null)},ce.prototype.forEach=function(te){he.forEach(this.handlers,function(Ee){Ee!==null&&te(Ee)})},G.exports=ce},4097:function(G,q,V){var he=V(1793),ce=V(7303);G.exports=function(te,Ee){return te&&!he(Ee)?ce(te,Ee):Ee}},3572:function(G,q,V){var he=V(4867),ce=V(8527),te=V(6502),Ee=V(5546),j=V(644);function xe(re){if(re.cancelToken&&re.cancelToken.throwIfRequested(),re.signal&&re.signal.aborted)throw new j}G.exports=function(re){return xe(re),re.headers=re.headers||{},re.data=ce.call(re,re.data,re.headers,re.transformRequest),re.headers=he.merge(re.headers.common||{},re.headers[re.method]||{},re.headers),he.forEach(["delete","get","head","post","put","patch","common"],function(ge){delete re.headers[ge]}),(re.adapter||Ee.adapter)(re).then(function(ge){return xe(re),ge.data=ce.call(re,ge.data,ge.headers,re.transformResponse),ge},function(ge){return te(ge)||(xe(re),ge&&ge.response&&(ge.response.data=ce.call(re,ge.response.data,ge.response.headers,re.transformResponse))),Promise.reject(ge)})}},7185:function(G,q,V){var he=V(4867);G.exports=function(ce,te){te=te||{};var Ee={};function j(ke,Se){return he.isPlainObject(ke)&&he.isPlainObject(Se)?he.merge(ke,Se):he.isPlainObject(Se)?he.merge({},Se):he.isArray(Se)?Se.slice():Se}function xe(ke){return he.isUndefined(te[ke])?he.isUndefined(ce[ke])?void 0:j(void 0,ce[ke]):j(ce[ke],te[ke])}function re(ke){if(!he.isUndefined(te[ke]))return j(void 0,te[ke])}function ge(ke){return he.isUndefined(te[ke])?he.isUndefined(ce[ke])?void 0:j(void 0,ce[ke]):j(void 0,te[ke])}function ye(ke){return ke in te?j(ce[ke],te[ke]):ke in ce?j(void 0,ce[ke]):void 0}var we={url:re,method:re,data:re,baseURL:ge,transformRequest:ge,transformResponse:ge,paramsSerializer:ge,timeout:ge,timeoutMessage:ge,withCredentials:ge,adapter:ge,responseType:ge,xsrfCookieName:ge,xsrfHeaderName:ge,onUploadProgress:ge,onDownloadProgress:ge,decompress:ge,maxContentLength:ge,maxBodyLength:ge,beforeRedirect:ge,transport:ge,httpAgent:ge,httpsAgent:ge,cancelToken:ge,socketPath:ge,responseEncoding:ge,validateStatus:ye};return he.forEach(Object.keys(ce).concat(Object.keys(te)),function(ke){var Se=we[ke]||xe,Pe=Se(ke);he.isUndefined(Pe)&&Se!==ye||(Ee[ke]=Pe)}),Ee}},6026:function(G,q,V){var he=V(2648);G.exports=function(ce,te,Ee){var j=Ee.config.validateStatus;Ee.status&&j&&!j(Ee.status)?te(new he("Request failed with status code "+Ee.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(Ee.status/100)-4],Ee.config,Ee.request,Ee)):ce(Ee)}},8527:function(G,q,V){var he=V(4867),ce=V(5546);G.exports=function(te,Ee,j){var xe=this||ce;return he.forEach(j,function(re){te=re.call(xe,te,Ee)}),te}},5546:function(G,q,V){var he=V(4867),ce=V(6016),te=V(2648),Ee=V(7874),j=V(7675),xe={"Content-Type":"application/x-www-form-urlencoded"};function re(we,ke){!he.isUndefined(we)&&he.isUndefined(we["Content-Type"])&&(we["Content-Type"]=ke)}var ge,ye={transitional:Ee,adapter:((typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(ge=V(5448)),ge),transformRequest:[function(we,ke){if(ce(ke,"Accept"),ce(ke,"Content-Type"),he.isFormData(we)||he.isArrayBuffer(we)||he.isBuffer(we)||he.isStream(we)||he.isFile(we)||he.isBlob(we))return we;if(he.isArrayBufferView(we))return we.buffer;if(he.isURLSearchParams(we))return re(ke,"application/x-www-form-urlencoded;charset=utf-8"),we.toString();var Se,Pe=he.isObject(we),Re=ke&&ke["Content-Type"];if((Se=he.isFileList(we))||Pe&&Re==="multipart/form-data"){var Ne=this.env&&this.env.FormData;return j(Se?{"files[]":we}:we,Ne&&new Ne)}return Pe||Re==="application/json"?(re(ke,"application/json"),function(ze,Be,Ze){if(he.isString(ze))try{return(Be||JSON.parse)(ze),he.trim(ze)}catch(Xe){if(Xe.name!=="SyntaxError")throw Xe}return(Ze||JSON.stringify)(ze)}(we)):we}],transformResponse:[function(we){var ke=this.transitional||ye.transitional,Se=ke&&ke.silentJSONParsing,Pe=ke&&ke.forcedJSONParsing,Re=!Se&&this.responseType==="json";if(Re||Pe&&he.isString(we)&&we.length)try{return JSON.parse(we)}catch(Ne){if(Re)throw Ne.name==="SyntaxError"?te.from(Ne,te.ERR_BAD_RESPONSE,this,null,this.response):Ne}return we}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:V(1623)},validateStatus:function(we){return we>=200&&we<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};he.forEach(["delete","get","head"],function(we){ye.headers[we]={}}),he.forEach(["post","put","patch"],function(we){ye.headers[we]=he.merge(xe)}),G.exports=ye},7874:function(G){G.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:function(G){G.exports={version:"0.27.2"}},1849:function(G){G.exports=function(q,V){return function(){for(var he=new Array(arguments.length),ce=0;ce<he.length;ce++)he[ce]=arguments[ce];return q.apply(V,he)}}},5327:function(G,q,V){var he=V(4867);function ce(te){return encodeURIComponent(te).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}G.exports=function(te,Ee,j){if(!Ee)return te;var xe;if(j)xe=j(Ee);else if(he.isURLSearchParams(Ee))xe=Ee.toString();else{var re=[];he.forEach(Ee,function(ye,we){ye!=null&&(he.isArray(ye)?we+="[]":ye=[ye],he.forEach(ye,function(ke){he.isDate(ke)?ke=ke.toISOString():he.isObject(ke)&&(ke=JSON.stringify(ke)),re.push(ce(we)+"="+ce(ke))}))}),xe=re.join("&")}if(xe){var ge=te.indexOf("#");ge!==-1&&(te=te.slice(0,ge)),te+=(te.indexOf("?")===-1?"?":"&")+xe}return te}},7303:function(G){G.exports=function(q,V){return V?q.replace(/\/+$/,"")+"/"+V.replace(/^\/+/,""):q}},4372:function(G,q,V){var he=V(4867);G.exports=he.isStandardBrowserEnv()?{write:function(ce,te,Ee,j,xe,re){var ge=[];ge.push(ce+"="+encodeURIComponent(te)),he.isNumber(Ee)&&ge.push("expires="+new Date(Ee).toGMTString()),he.isString(j)&&ge.push("path="+j),he.isString(xe)&&ge.push("domain="+xe),re===!0&&ge.push("secure"),document.cookie=ge.join("; ")},read:function(ce){var te=document.cookie.match(new RegExp("(^|;\\s*)("+ce+")=([^;]*)"));return te?decodeURIComponent(te[3]):null},remove:function(ce){this.write(ce,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:function(G){G.exports=function(q){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(q)}},6268:function(G,q,V){var he=V(4867);G.exports=function(ce){return he.isObject(ce)&&ce.isAxiosError===!0}},7985:function(G,q,V){var he=V(4867);G.exports=he.isStandardBrowserEnv()?function(){var ce,te=/(msie|trident)/i.test(navigator.userAgent),Ee=document.createElement("a");function j(xe){var re=xe;return te&&(Ee.setAttribute("href",re),re=Ee.href),Ee.setAttribute("href",re),{href:Ee.href,protocol:Ee.protocol?Ee.protocol.replace(/:$/,""):"",host:Ee.host,search:Ee.search?Ee.search.replace(/^\?/,""):"",hash:Ee.hash?Ee.hash.replace(/^#/,""):"",hostname:Ee.hostname,port:Ee.port,pathname:Ee.pathname.charAt(0)==="/"?Ee.pathname:"/"+Ee.pathname}}return ce=j(window.location.href),function(xe){var re=he.isString(xe)?j(xe):xe;return re.protocol===ce.protocol&&re.host===ce.host}}():function(){return!0}},6016:function(G,q,V){var he=V(4867);G.exports=function(ce,te){he.forEach(ce,function(Ee,j){j!==te&&j.toUpperCase()===te.toUpperCase()&&(ce[te]=Ee,delete ce[j])})}},1623:function(G){G.exports=null},4109:function(G,q,V){var he=V(4867),ce=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];G.exports=function(te){var Ee,j,xe,re={};return te&&he.forEach(te.split(`
`),function(ge){if(xe=ge.indexOf(":"),Ee=he.trim(ge.substr(0,xe)).toLowerCase(),j=he.trim(ge.substr(xe+1)),Ee){if(re[Ee]&&ce.indexOf(Ee)>=0)return;re[Ee]=Ee==="set-cookie"?(re[Ee]?re[Ee]:[]).concat([j]):re[Ee]?re[Ee]+", "+j:j}}),re}},205:function(G){G.exports=function(q){var V=/^([-+\w]{1,25})(:?\/\/|:)/.exec(q);return V&&V[1]||""}},8713:function(G){G.exports=function(q){return function(V){return q.apply(null,V)}}},7675:function(G,q,V){var he=V(4867);G.exports=function(ce,te){te=te||new FormData;var Ee=[];function j(xe){return xe===null?"":he.isDate(xe)?xe.toISOString():he.isArrayBuffer(xe)||he.isTypedArray(xe)?typeof Blob=="function"?new Blob([xe]):Buffer.from(xe):xe}return function xe(re,ge){if(he.isPlainObject(re)||he.isArray(re)){if(Ee.indexOf(re)!==-1)throw Error("Circular reference detected in "+ge);Ee.push(re),he.forEach(re,function(ye,we){if(!he.isUndefined(ye)){var ke,Se=ge?ge+"."+we:we;if(ye&&!ge&&typeof ye=="object"){if(he.endsWith(we,"{}"))ye=JSON.stringify(ye);else if(he.endsWith(we,"[]")&&(ke=he.toArray(ye)))return void ke.forEach(function(Pe){!he.isUndefined(Pe)&&te.append(Se,j(Pe))})}xe(ye,Se)}}),Ee.pop()}else te.append(ge,j(re))}(ce),te}},4875:function(G,q,V){var he=V(7288).version,ce=V(2648),te={};["object","boolean","number","function","string","symbol"].forEach(function(j,xe){te[j]=function(re){return typeof re===j||"a"+(xe<1?"n ":" ")+j}});var Ee={};te.transitional=function(j,xe,re){function ge(ye,we){return"[Axios v"+he+"] Transitional option '"+ye+"'"+we+(re?". "+re:"")}return function(ye,we,ke){if(j===!1)throw new ce(ge(we," has been removed"+(xe?" in "+xe:"")),ce.ERR_DEPRECATED);return xe&&!Ee[we]&&(Ee[we]=!0,console.warn(ge(we," has been deprecated since v"+xe+" and will be removed in the near future"))),!j||j(ye,we,ke)}},G.exports={assertOptions:function(j,xe,re){if(typeof j!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);for(var ge=Object.keys(j),ye=ge.length;ye-- >0;){var we=ge[ye],ke=xe[we];if(ke){var Se=j[we],Pe=Se===void 0||ke(Se,we,j);if(Pe!==!0)throw new ce("option "+we+" must be "+Pe,ce.ERR_BAD_OPTION_VALUE)}else if(re!==!0)throw new ce("Unknown option "+we,ce.ERR_BAD_OPTION)}},validators:te}},4867:function(G,q,V){var he,ce=V(1849),te=Object.prototype.toString,Ee=(he=Object.create(null),function(qe){var Je=te.call(qe);return he[Je]||(he[Je]=Je.slice(8,-1).toLowerCase())});function j(qe){return qe=qe.toLowerCase(),function(Je){return Ee(Je)===qe}}function xe(qe){return Array.isArray(qe)}function re(qe){return qe===void 0}var ge=j("ArrayBuffer");function ye(qe){return qe!==null&&typeof qe=="object"}function we(qe){if(Ee(qe)!=="object")return!1;var Je=Object.getPrototypeOf(qe);return Je===null||Je===Object.prototype}var ke=j("Date"),Se=j("File"),Pe=j("Blob"),Re=j("FileList");function Ne(qe){return te.call(qe)==="[object Function]"}var ze=j("URLSearchParams");function Be(qe,Je){if(qe!=null)if(typeof qe!="object"&&(qe=[qe]),xe(qe))for(var dt=0,Ct=qe.length;dt<Ct;dt++)Je.call(null,qe[dt],dt,qe);else for(var bt in qe)Object.prototype.hasOwnProperty.call(qe,bt)&&Je.call(null,qe[bt],bt,qe)}var Ze,Xe=(Ze=typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array),function(qe){return Ze&&qe instanceof Ze});G.exports={isArray:xe,isArrayBuffer:ge,isBuffer:function(qe){return qe!==null&&!re(qe)&&qe.constructor!==null&&!re(qe.constructor)&&typeof qe.constructor.isBuffer=="function"&&qe.constructor.isBuffer(qe)},isFormData:function(qe){var Je="[object FormData]";return qe&&(typeof FormData=="function"&&qe instanceof FormData||te.call(qe)===Je||Ne(qe.toString)&&qe.toString()===Je)},isArrayBufferView:function(qe){return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?ArrayBuffer.isView(qe):qe&&qe.buffer&&ge(qe.buffer)},isString:function(qe){return typeof qe=="string"},isNumber:function(qe){return typeof qe=="number"},isObject:ye,isPlainObject:we,isUndefined:re,isDate:ke,isFile:Se,isBlob:Pe,isFunction:Ne,isStream:function(qe){return ye(qe)&&Ne(qe.pipe)},isURLSearchParams:ze,isStandardBrowserEnv:function(){return(typeof navigator=="undefined"||navigator.product!=="ReactNative"&&navigator.product!=="NativeScript"&&navigator.product!=="NS")&&typeof window!="undefined"&&typeof document!="undefined"},forEach:Be,merge:function qe(){var Je={};function dt(xt,nt){we(Je[nt])&&we(xt)?Je[nt]=qe(Je[nt],xt):we(xt)?Je[nt]=qe({},xt):xe(xt)?Je[nt]=xt.slice():Je[nt]=xt}for(var Ct=0,bt=arguments.length;Ct<bt;Ct++)Be(arguments[Ct],dt);return Je},extend:function(qe,Je,dt){return Be(Je,function(Ct,bt){qe[bt]=dt&&typeof Ct=="function"?ce(Ct,dt):Ct}),qe},trim:function(qe){return qe.trim?qe.trim():qe.replace(/^\s+|\s+$/g,"")},stripBOM:function(qe){return qe.charCodeAt(0)===65279&&(qe=qe.slice(1)),qe},inherits:function(qe,Je,dt,Ct){qe.prototype=Object.create(Je.prototype,Ct),qe.prototype.constructor=qe,dt&&Object.assign(qe.prototype,dt)},toFlatObject:function(qe,Je,dt){var Ct,bt,xt,nt={};Je=Je||{};do{for(bt=(Ct=Object.getOwnPropertyNames(qe)).length;bt-- >0;)nt[xt=Ct[bt]]||(Je[xt]=qe[xt],nt[xt]=!0);qe=Object.getPrototypeOf(qe)}while(qe&&(!dt||dt(qe,Je))&&qe!==Object.prototype);return Je},kindOf:Ee,kindOfTest:j,endsWith:function(qe,Je,dt){qe=String(qe),(dt===void 0||dt>qe.length)&&(dt=qe.length),dt-=Je.length;var Ct=qe.indexOf(Je,dt);return Ct!==-1&&Ct===dt},toArray:function(qe){if(!qe)return null;var Je=qe.length;if(re(Je))return null;for(var dt=new Array(Je);Je-- >0;)dt[Je]=qe[Je];return dt},isTypedArray:Xe,isFileList:Re}},2895:function(G,q,V){V.d(q,{default:function(){return yh}});var he={};function ce(ot,St){if(!(ot instanceof St))throw new TypeError("Cannot call a class as a function")}function te(ot,St){for(var yt=0;yt<St.length;yt++){var Ve=St[yt];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(ot,Ve.key,Ve)}}function Ee(ot,St,yt){return St&&te(ot.prototype,St),yt&&te(ot,yt),Object.defineProperty(ot,"prototype",{writable:!1}),ot}function j(ot,St){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(yt,Ve){return yt.__proto__=Ve,yt},j(ot,St)}function xe(ot,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function");ot.prototype=Object.create(St&&St.prototype,{constructor:{value:ot,writable:!0,configurable:!0}}),Object.defineProperty(ot,"prototype",{writable:!1}),St&&j(ot,St)}function re(ot){return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(St){return typeof St}:function(St){return St&&typeof Symbol=="function"&&St.constructor===Symbol&&St!==Symbol.prototype?"symbol":typeof St},re(ot)}function ge(ot){if(ot===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ot}function ye(ot,St){if(St&&(re(St)==="object"||typeof St=="function"))return St;if(St!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ge(ot)}function we(ot){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(St){return St.__proto__||Object.getPrototypeOf(St)},we(ot)}V.r(he),V.d(he,{$:function(){return Re()},$attr:function(){return ze()},$class:function(){return Ze()},$css:function(){return qe()},$data:function(){return dt()},$event:function(){return bt()},$insert:function(){return nt()},$offset:function(){return rt()},$property:function(){return st()},$remove:function(){return vt()},$safeEls:function(){return Ut()},$show:function(){return zt()},Class:function(){return Mn()},Emitter:function(){return on()},Enum:function(){return Ot()},LocalStore:function(){return un()},Logger:function(){return In()},MediaQuery:function(){return Rt()},MutationObserver:function(){return xn()},Select:function(){return $n()},SingleEmitter:function(){return vn()},Stack:function(){return Sn()},Store:function(){return tr()},Url:function(){return Xn()},ajax:function(){return cn()},allKeys:function(){return On()},before:function(){return _r()},camelCase:function(){return Dr()},castPath:function(){return Lr()},clamp:function(){return Vr()},clone:function(){return Oi()},cloneDeep:function(){return Ti()},concat:function(){return Fo()},contain:function(){return vi()},copy:function(){return Lt()},create:function(){return ft()},createAssigner:function(){return jt()},dateFormat:function(){return pn()},debounce:function(){return tn()},defaults:function(){return Nn()},defineProp:function(){return qn()},delegate:function(){return wr()},detectBrowser:function(){return Er()},detectOs:function(){return Qr()},difference:function(){return ti()},each:function(){return mn()},endWith:function(){return Ai()},escape:function(){return Ta()},escapeJsStr:function(){return hl()},escapeRegExp:function(){return ca()},extend:function(){return Pr()},extendOwn:function(){return Po()},extractUrls:function(){return Ir()},filter:function(){return ua()},flatten:function(){return fo()},freeze:function(){return Yc()},getProto:function(){return dl()},has:function(){return rc()},highlight:function(){return Zi()},identity:function(){return ic()},idxOf:function(){return oo()},inherits:function(){return oc()},isArgs:function(){return Pi()},isArr:function(){return Cs()},isArrLike:function(){return ji()},isBool:function(){return Ps()},isBrowser:function(){return Os()},isBuffer:function(){return Yu()},isDarkMode:function(){return Aa()},isDate:function(){return Jc()},isEl:function(){return so()},isEmpty:function(){return Ro()},isErr:function(){return _l()},isFn:function(){return Rs()},isHidden:function(){return $s()},isMatch:function(){return eh()},isMiniProgram:function(){return th()},isMobile:function(){return Sa()},isNaN:function(){return gl()},isNil:function(){return Xa()},isNull:function(){return No()},isNum:function(){return jo()},isObj:function(){return zs()},isPrimitive:function(){return Ca()},isPromise:function(){return bl()},isRegExp:function(){return hc()},isSorted:function(){return Ka()},isStr:function(){return $o()},isUndef:function(){return wl()},kebabCase:function(){return Ya()},keys:function(){return Jo()},last:function(){return Ls()},linkify:function(){return Tl()},loadJs:function(){return Al()},lowerCase:function(){return Uo()},lpad:function(){return ru()},ltrim:function(){return kl()},map:function(){return Ma()},mapObj:function(){return fc()},matcher:function(){return _c()},memStorage:function(){return mc()},memoize:function(){return Sl()},mergeArr:function(){return Cl()},meta:function(){return Ml()},ms:function(){return Fs()},nextTick:function(){return Qa()},noop:function(){return Ia()},now:function(){return cu()},objToStr:function(){return Il()},once:function(){return hu()},optimizeCb:function(){return vc()},orientation:function(){return Ns()},partial:function(){return Pl()},perfNow:function(){return js()},pick:function(){return Pa()},prefix:function(){return fu()},property:function(){return Jr()},query:function(){return _u()},raf:function(){return Gs()},repeat:function(){return ma()},restArgs:function(){return ts()},reverse:function(){return Ol()},root:function(){return Tc()},rtrim:function(){return Ac()},safeCb:function(){return is()},safeGet:function(){return lo()},safeSet:function(){return Sc()},sameOrigin:function(){return xo()},slice:function(){return Ws()},some:function(){return Xs()},sortKeys:function(){return Rl()},splitCase:function(){return ch()},startWith:function(){return os()},stringify:function(){return Mc()},stringifyAll:function(){return Ys()},throttle:function(){return Oa()},toArr:function(){return Js()},toInt:function(){return vu()},toNum:function(){return as()},toSrc:function(){return xu()},toStr:function(){return ss()},trim:function(){return ta()},type:function(){return hh()},types:function(){return Bl()},uncaught:function(){return bo()},uniqId:function(){return Ra()},unique:function(){return na()},upperFirst:function(){return ls()},values:function(){return cs()},viewportScale:function(){return Pc()},wrap:function(){return ku()},xpath:function(){return Cu()}});var ke=V(8384),Se=V.n(ke),Pe=V(1512),Re=V.n(Pe),Ne=V(4991),ze=V.n(Ne),Be=V(7781),Ze=V.n(Be),Xe=V(975),qe=V.n(Xe),Je=V(8381),dt=V.n(Je),Ct=V(5543),bt=V.n(Ct),xt=V(8908),nt=V.n(xt),tt=V(6906),rt=V.n(tt),ht=V(4209),st=V.n(ht),pt=V(6757),vt=V.n(pt),ut=V(2341),Ut=V.n(ut),at=V(7665),zt=V.n(at),sn=V(7496),Mn=V.n(sn),rn=V(1443),on=V.n(rn),Zt=V(9640),Ot=V.n(Zt),Qt=V(125),un=V.n(Qt),yn=V(4989),In=V.n(yn),It=V(2765),Rt=V.n(It),nn=V(2289),xn=V.n(nn),En=V(3244),$n=V.n(En),zn=V(8985),vn=V.n(zn),wn=V(9001),Sn=V.n(wn),Jn=V(5128),tr=V.n(Jn),pr=V(6334),Xn=V.n(pr),Gn=V(8991),cn=V.n(Gn),gn=V(1116),On=V.n(gn),Kn=V(5637),_r=V.n(Kn),kr=V(7494),Dr=V.n(kr),xr=V(1694),Lr=V.n(xr),Br=V(9882),Vr=V.n(Br),jr=V(4675),Oi=V.n(jr),Di=V(550),Ti=V.n(Di),Sr=V(8099),Fo=V.n(Sr),Ea=V(6341),vi=V.n(Ea),sa=V(2327),Lt=V.n(sa),lt=V(1662),ft=V.n(lt),Dt=V(4427),jt=V.n(Dt),en=V(4407),pn=V.n(en),hn=V(6049),tn=V.n(hn),fn=V(4193),Nn=V.n(fn),ar=V(9803),qn=V.n(ar),br=V(2443),wr=V.n(br),mr=V(4541),Er=V.n(mr),zr=V(6954),Qr=V.n(zr),oi=V(801),ti=V.n(oi),vr=V(3783),mn=V.n(vr),po=V(4858),Ai=V.n(po),la=V(8901),Ta=V.n(la),Io=V(4187),hl=V.n(Io),Ku=V(2337),ca=V.n(Ku),sr=V(6329),Pr=V.n(sr),Fr=V(3021),Po=V.n(Fr),Oo=V(2581),Ir=V.n(Oo),Ts=V(5972),ua=V.n(Ts),As=V(288),fo=V.n(As),xi=V(4454),Yc=V.n(xi),Za=V(415),dl=V.n(Za),ha=V(6257),rc=V.n(ha),da=V(3651),Zi=V.n(da),ri=V(6362),ic=V.n(ri),ks=V(496),oo=V.n(ks),ao=V(5022),oc=V.n(ao),pa=V(7403),Pi=V.n(pa),Ss=V(6472),Cs=V.n(Ss),Ms=V(1369),ji=V.n(Ms),Is=V(4696),Ps=V.n(Is),yo=V(2727),Os=V.n(yo),pl=V(2349),Yu=V.n(pl),ac=V(2520),Aa=V.n(ac),Ju=V(2106),Jc=V.n(Ju),ka=V(9833),so=V.n(ka),fl=V(8887),Ro=V.n(fl),sc=V(2749),_l=V.n(sc),Qu=V(4777),Rs=V.n(Qu),ml=V(9585),$s=V.n(ml),Qc=V(7949),eh=V.n(Qc),eu=V(9537),th=V.n(eu),vo=V(9956),Sa=V.n(vo),lc=V(9433),gl=V.n(lc),cc=V(2763),Xa=V.n(cc),yl=V(6156),No=V.n(yl),fa=V(3990),jo=V.n(fa),vl=V(5166),zs=V.n(vl),xl=V(6997),Ca=V.n(xl),Kr=V(4321),bl=V.n(Kr),uc=V(1754),hc=V.n(uc),Hr=V(3843),Ka=V.n(Hr),Ds=V(6768),$o=V.n(Ds),dc=V(1286),wl=V.n(dc),_a=V(7622),Ya=V.n(_a),nh=V(2533),Jo=V.n(nh),El=V(9702),Ls=V.n(El),pc=V(3988),Tl=V.n(pc),tu=V(9622),Al=V.n(tu),nu=V(3063),Uo=V.n(nu),Ja=V(5351),ru=V.n(Ja),Bs=V(7767),kl=V.n(Bs),Vo=V(2461),Ma=V.n(Vo),iu=V(8820),fc=V.n(iu),ou=V(4491),_c=V.n(ou),au=V(5026),mc=V.n(au),rh=V(1475),Sl=V.n(rh),ih=V(9971),Cl=V.n(ih),su=V(8573),Ml=V.n(su),oh=V(4677),Fs=V.n(oh),lu=V(6837),Qa=V.n(lu),gc=V(1214),Ia=V.n(gc),ah=V(8847),cu=V.n(ah),sh=V(106),Il=V.n(sh),uu=V(8763),hu=V.n(uu),yc=V(3955),vc=V.n(yc),du=V(442),Ns=V.n(du),xc=V(4198),Pl=V.n(xc),Qo=V(1194),js=V.n(Qo),pu=V(3487),Pa=V.n(pu),es=V(747),fu=V.n(es),bc=V(2994),Jr=V.n(bc),Us=V(1745),_u=V.n(Us),Vs=V(1571),Gs=V.n(Vs),lh=V(4552),ma=V.n(lh),wc=V(1137),ts=V.n(wc),Ec=V(1527),Ol=V.n(Ec),ns=V(5610),Tc=V.n(ns),qs=V(3597),Ac=V.n(qs),rs=V(2838),is=V.n(rs),lr=V(7653),lo=V.n(lr),kc=V(8079),Sc=V.n(kc),Hs=V(4224),xo=V.n(Hs),Cc=V(9677),Ws=V.n(Cc),Zs=V(6053),Xs=V.n(Zs),mu=V(3629),Rl=V.n(mu),ea=V(8935),ch=V.n(ea),uh=V(6930),os=V.n(uh),$l=V(4400),Mc=V.n($l),Ks=V(9963),Ys=V.n(Ks),Xi=V(2439),Oa=V.n(Xi),gu=V(1352),Js=V.n(gu),yu=V(9296),vu=V.n(yu),zl=V(3875),as=V.n(zl),Dl=V(300),xu=V.n(Dl),bu=V(3367),ss=V.n(bu),wu=V(4331),ta=V.n(wu),Gi=V(3085),hh=V.n(Gi),Ll=V(9016),Bl=V.n(Ll),Eu=V(5484),bo=V.n(Eu),Ic=V(5229),Ra=V.n(Ic),wo=V(42),na=V.n(wo),cr=V(3023),ls=V.n(cr),Tu=V(2578),cs=V.n(Tu),Qs=V(3514),Pc=V.n(Qs),Au=V(5491),ku=V.n(Au),Su=V(8933),Cu=V.n(Su),el=new(on());el.ADD="ADD",el.SHOW="SHOW",el.SCALE="SCALE";var ai=el;function Fl(ot,St){for(;!Object.prototype.hasOwnProperty.call(ot,St)&&(ot=we(ot))!==null;);return ot}function pi(){return pi=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(ot,St,yt){var Ve=Fl(ot,St);if(Ve){var Qe=Object.getOwnPropertyDescriptor(Ve,St);return Qe.get?Qe.get.call(arguments.length<3?ot:yt):Qe.value}},pi.apply(this,arguments)}var qi=Mn()({init:function(ot){this._$el=ot},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),Oc=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Rc=Oc.length;function $c(ot){for(var St={},yt=0;yt<Rc;yt++)St[Oc[yt]]=ot[yt];return St}function _o(ot){return Cs()(ot)&&(ot=$c(ot)),ot.darkerBackground||(ot.darkerBackground=ot.contrast),Pr()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},ot)}function ga(ot){return Cs()(ot)&&(ot=$c(ot)),ot.darkerBackground||(ot.darkerBackground=ot.contrast),Pr()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},ot)}var zc=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl"],ya={Light:ga({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:_o({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#555",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":_o(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":_o(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":ga(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":_o(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":_o(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":_o(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:_o(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":_o(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":_o(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":ga(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":_o(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":ga(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:ga(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":_o(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":ga(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"])},tl=V(2234),Nl=V.n(tl),ra=[],Dc=1,jl=ya.Light,zo=function ot(St,yt){St=ss()(St);for(var Ve=0,Qe=ra.length;Ve<Qe;Ve++)if(ra[Ve].css===St)return;yt=yt||ot.container||document.head;var gt=document.createElement("style");gt.type="text/css",yt.appendChild(gt);var Nt={css:St,el:gt,container:yt};return Ul(Nt),ra.push(Nt),Nt};function Lc(){mn()(ra,function(ot){return Ul(ot)})}function Ul(ot){var St=ot.css,yt=ot.el;St=(St=St.replace(/(\d+)px/g,function(Qe,gt){return+gt*Dc+"px"})).replace(/_/g,"eruda-"),mn()(Nl(),function(Qe,gt){St=St.replace(new RegExp(ca()("$".concat(Qe,":")),"g"),gt+":")});var Ve=Jo()(ya.Light);mn()(Ve,function(Qe){St=St.replace(new RegExp("var\\(--".concat(Ya()(Qe),"\\)"),"g"),jl[Qe])}),yt.innerText=St}zo.setScale=function(ot){Dc=ot,Lc()},zo.setTheme=function(ot){jl=$o()(ot)?ya[ot]||ya.Light:Nn()(ot,ya.Light),Lc()},zo.getCurTheme=function(){return jl},zo.getThemes=function(){return ya},zo.clear=function(){mn()(ra,function(ot){var St=ot.container,yt=ot.el;return St.removeChild(yt)}),ra=[]},zo.remove=function(ot){ra=ua()(ra,function(St){return St!==ot}),ot.container.removeChild(ot.el)};var qr=zo;function Bc(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var Vl,nl,Fc,Nc,rl,us,de=function(ot){xe(yt,ot);var St=Bc(yt);function yt(){var Ve;return ce(this,yt),(Ve=St.call(this))._style=qr(V(6836)),Ve.name="settings",Ve._switchTpl=V(7006),Ve._selectTpl=V(1868),Ve._rangeTpl=V(480),Ve._colorTpl=V(6652),Ve._settings=[],Ve}return Ee(yt,[{key:"init",value:function(Ve){pi(we(yt.prototype),"init",this).call(this,Ve),this._bindEvent()}},{key:"remove",value:function(Ve,Qe){var gt=this;return $o()(Ve)?this._$el.find(".eruda-text").each(function(){var Nt=Re()(this);Nt.text()===Ve&&Nt.remove()}):this._settings=ua()(this._settings,function(Nt){return Nt.config!==Ve||Nt.key!==Qe||(gt._$el.find("#"+Nt.id).remove(),!1)}),this._cleanSeparator(),this}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),qr.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._$el.html("")}},{key:"switch",value:function(Ve,Qe,gt){var Nt=this._genId("settings");return this._settings.push({config:Ve,key:Qe,id:Nt}),this._$el.append(this._switchTpl({desc:gt,key:Qe,id:Nt,val:Ve.get(Qe)})),this}},{key:"color",value:function(Ve,Qe,gt){var Nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["#2196f3","#707d8b","#f44336","#009688","#ffc107"],ln=this._genId("settings");return this._settings.push({config:Ve,key:Qe,id:ln}),this._$el.append(this._colorTpl({desc:gt,colors:Nt,id:ln,val:Ve.get(Qe)})),this}},{key:"select",value:function(Ve,Qe,gt,Nt){var ln=this._genId("settings");return this._settings.push({config:Ve,key:Qe,id:ln}),this._$el.append(this._selectTpl({desc:gt,selections:Nt,id:ln,val:Ve.get(Qe)})),this}},{key:"range",value:function(Ve,Qe,gt,Nt){var ln=Nt.min,Cn=ln===void 0?0:ln,jn=Nt.max,ur=jn===void 0?1:jn,rr=Nt.step,Ci=rr===void 0?.1:rr,Bi=this._genId("settings");this._settings.push({config:Ve,key:Qe,min:Cn,max:ur,step:Ci,id:Bi});var Ao=Ve.get(Qe);return this._$el.append(this._rangeTpl({desc:gt,min:Cn,max:ur,step:Ci,val:Ao,progress:U(Ao,Cn,ur),id:Bi})),this}},{key:"separator",value:function(){return this._$el.append('<div class="eruda-separator"></div>'),this}},{key:"text",value:function(Ve){return this._$el.append('<div class="eruda-text">'.concat(Ve,"</div>")),this}},{key:"_cleanSeparator",value:function(){var Ve=Oi()(this._$el.get(0).children);function Qe(ln){return ln.getAttribute("class")==="eruda-separator"}for(var gt=0,Nt=Ve.length;gt<Nt-1;gt++)Qe(Ve[gt])&&Qe(Ve[gt+1])&&Re()(Ve[gt]).remove()}},{key:"_genId",value:function(){return Ra()("eruda-settings")}},{key:"_closeAll",value:function(){this._$el.find(".eruda-open").rmClass("eruda-open")}},{key:"_getSetting",value:function(Ve){var Qe;return mn()(this._settings,function(gt){gt.id===Ve&&(Qe=gt)}),Qe}},{key:"_bindEvent",value:function(){var Ve=this;this._$el.on("click",".eruda-checkbox",function(){var Qe=Re()(this).find("input"),gt=Qe.data("id"),Nt=Qe.get(0).checked,ln=Ve._getSetting(gt);ln.config.set(ln.key,Nt)}).on("click",".eruda-select .eruda-head",function(){var Qe=Re()(this).parent().find("ul"),gt=Qe.hasClass("eruda-open");Ve._closeAll(),gt?Qe.rmClass("eruda-open"):Qe.addClass("eruda-open")}).on("click",".eruda-select li",function(){var Qe=Re()(this),gt=Qe.parent(),Nt=Qe.text(),ln=gt.data("id"),Cn=Ve._getSetting(ln);gt.rmClass("eruda-open"),gt.parent().find(".eruda-head span").text(Nt),Cn.config.set(Cn.key,Nt)}).on("click",".eruda-range .eruda-head",function(){var Qe=Re()(this).parent().find(".eruda-input-container"),gt=Qe.hasClass("eruda-open");Ve._closeAll(),gt?Qe.rmClass("eruda-open"):Qe.addClass("eruda-open")}).on("change",".eruda-range input",function(){var Qe=Re()(this),gt=Qe.parent().data("id"),Nt=+Qe.val(),ln=Ve._getSetting(gt);ln.config.set(ln.key,Nt)}).on("input",".eruda-range input",function(){var Qe=Re()(this),gt=Qe.parent(),Nt=gt.data("id"),ln=+Qe.val(),Cn=Ve._getSetting(Nt),jn=Cn.min,ur=Cn.max;gt.parent().find(".eruda-head span").text(ln),gt.find(".eruda-range-track-progress").css("width",U(ln,jn,ur)+"%")}).on("click",".eruda-color .eruda-head",function(){var Qe=Re()(this).parent().find("ul"),gt=Qe.hasClass("eruda-open");Ve._closeAll(),gt?Qe.rmClass("eruda-open"):Qe.addClass("eruda-open")}).on("click",".eruda-color li",function(){var Qe=Re()(this),gt=Qe.parent(),Nt=Qe.css("background-color"),ln=gt.data("id"),Cn=Ve._getSetting(ln);gt.rmClass("eruda-open"),gt.parent().find(".eruda-head span").css("background-color",Nt),Cn.config.set(Cn.key,Nt)})}}],[{key:"createCfg",value:function(Ve,Qe){return new(un())("eruda-"+Ve,Qe)}}]),yt}(qi),U=function(ot,St,yt){return((ot-St)/(yt-St)*100).toFixed(2)},ee=(typeof window=="undefined"?"undefined":re(window))==="object"&&(typeof document=="undefined"?"undefined":re(document))==="object"&&document.nodeType===9,be=function(ot){return ot=function(St){var yt=re(St);return!!St&&(yt==="function"||yt==="object")},ot}({}),Ie=function(ot){return ot==null?"":ot.toString()},Oe=(Vl=Object.prototype.hasOwnProperty,function(ot,St){return Vl.call(ot,St)}),Le=Object.keys?Object.keys:function(ot){var St=[];for(var yt in ot)Oe(ot,yt)&&St.push(yt);return St},Fe=function(ot){ot=function(yt){if(!be(yt))return{};if(St)return St(yt);function Ve(){}return Ve.prototype=yt,new Ve};var St=Object.create;return ot}({}),Ge=function(ot){return ot=function(St,yt){St.prototype=Fe(yt.prototype)},ot}({}),Ke=function(ot){return ot===void 0},Ye=function(ot){return ot=function(St,yt,Ve){if(Ke(yt))return St;switch(Ve==null?3:Ve){case 1:return function(Qe){return St.call(yt,Qe)};case 3:return function(Qe,gt,Nt){return St.call(yt,Qe,gt,Nt)};case 4:return function(Qe,gt,Nt,ln){return St.call(yt,Qe,gt,Nt,ln)}}return function(){return St.apply(yt,arguments)}},ot}({}),ct=function(ot){var St=ot?ot.length:0;if(St)return ot[St-1]},mt=function(ot){return ot},Mt=(nl=Object.prototype.toString,function(ot){return nl.call(ot)}),At=function(ot){return Mt(ot)==="[object Arguments]"},Tt=Array.isArray?Array.isArray:function(ot){return Mt(ot)==="[object Array]"},kt=function(ot){ot=function(Ve,Qe){if(Tt(Ve))return Ve;if(Qe&&Oe(Qe,Ve))return[Ve];var gt=[];return Ve.replace(St,function(Nt,ln,Cn,jn){gt.push(Cn?jn.replace(yt,"$1"):ln||Nt)}),gt};var St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yt=/\\(\\)?/g;return ot}({}),wt=function(ot,St){var yt;for(yt=(St=kt(St,ot)).shift();!Ke(yt);){if((ot=ot[yt])==null)return;yt=St.shift()}return ot},$t=function(ot){var St=Mt(ot);return St==="[object Function]"||St==="[object GeneratorFunction]"||St==="[object AsyncFunction]"},Pt=(Fc=Object.getPrototypeOf,Nc={}.constructor,function(ot){if(be(ot)){if(Fc)return Fc(ot);var St=ot.__proto__;return St||St===null?St:$t(ot.constructor)?ot.constructor.prototype:ot instanceof Nc?Nc.prototype:void 0}}),Yt=typeof wx!="undefined"&&$t(wx.openLocation),Kt=function(ot){return Mt(ot)==="[object Number]"},Vt=(rl=Math.pow(2,53)-1,function(ot){if(!ot)return!1;var St=ot.length;return Kt(St)&&St>=0&&St<=rl&&!$t(ot)}),Xt=function(ot,St,yt){var Ve,Qe;if(St=Ye(St,yt),Vt(ot))for(Ve=0,Qe=ot.length;Ve<Qe;Ve++)St(ot[Ve],Ve,ot);else{var gt=Le(ot);for(Ve=0,Qe=gt.length;Ve<Qe;Ve++)St(ot[gt[Ve]],gt[Ve],ot)}return ot},Ht=function(ot){return ot=function(St,yt){return function(Ve){return Xt(arguments,function(Qe,gt){if(gt!==0){var Nt=St(Qe);Xt(Nt,function(ln){yt&&!Ke(Ve[ln])||(Ve[ln]=Qe[ln])})}}),Ve}},ot}({}),an=Ht(Le),_n=function(ot){return Mt(ot)==="[object String]"},Hn=function(ot){return ot==null||(Vt(ot)&&(Tt(ot)||_n(ot)||At(ot))?ot.length===0:Le(ot).length===0)},dn=function(ot,St){var yt=Le(St),Ve=yt.length;if(ot==null)return!Ve;ot=Object(ot);for(var Qe=0;Qe<Ve;Qe++){var gt=yt[Qe];if(St[gt]!==ot[gt]||!(gt in ot))return!1}return!0},Rn=(us=/^\s+/,function(ot,St){if(St==null)return ot.trimLeft?ot.trimLeft():ot.replace(us,"");for(var yt,Ve,Qe=0,gt=ot.length,Nt=St.length,ln=!0;ln&&Qe<gt;)for(ln=!1,yt=-1,Ve=ot.charAt(Qe);++yt<Nt;)if(Ve===St[yt]){ln=!0,Qe++;break}return Qe>=gt?"":ot.substr(Qe,gt)}),Fn=function(ot){return ot=an({},ot),function(St){return dn(St,ot)}},Qn=function(ot){ot={getItem:function(Nt){return(yt[Nt]?St[Nt]:this[Nt])||null},setItem:function(Nt,ln){yt[Nt]?St[Nt]=ln:this[Nt]=ln},removeItem:function(Nt){yt[Nt]?delete St[Nt]:delete this[Nt]},key:function(Nt){var ln=Ve();return Nt>=0&&Nt<ln.length?ln[Nt]:null},clear:function(){for(var Nt,ln=Qe(),Cn=0;Nt=ln[Cn];Cn++)delete this[Nt];ln=gt();for(var jn,ur=0;jn=ln[ur];ur++)delete St[jn]}},Object.defineProperty(ot,"length",{enumerable:!1,configurable:!0,get:function(){return Ve().length}});var St={},yt={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Ve(){return Qe().concat(gt())}function Qe(){return Le(ot).filter(function(Nt){return!yt[Nt]})}function gt(){return Le(St)}return ot}({}),An=function(ot){return Tt(ot)?function(yt){return wt(yt,ot)}:(St=ot,function(yt){return yt==null?void 0:yt[St]});var St},Wn=function(ot,St,yt){return ot==null?mt:$t(ot)?Ye(ot,St,yt):be(ot)&&!Tt(ot)?Fn(ot):An(ot)},Dn=function(ot,St,yt){var Ve=[];return St=Wn(St,yt),Xt(ot,function(Qe,gt,Nt){St(Qe,gt,Nt)&&Ve.push(Qe)}),Ve},ir=function(ot){function St(yt,Ve){return yt===Ve}return function(yt,Ve){return Ve=Ve||St,Dn(yt,function(Qe,gt,Nt){for(var ln=Nt.length;++gt<ln;)if(Ve(Qe,Nt[gt]))return!1;return!0})}}(),er=function(ot){var St=Object.getOwnPropertyNames,yt=Object.getOwnPropertySymbols;return ot=function(Ve){var Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},gt=Qe.prototype,Nt=gt===void 0||gt,ln=Qe.unenumerable,Cn=ln!==void 0&&ln,jn=Qe.symbol,ur=jn!==void 0&&jn,rr=[];if((Cn||ur)&&St){var Ci=Le;Cn&&St&&(Ci=St);do rr=rr.concat(Ci(Ve)),ur&&yt&&(rr=rr.concat(yt(Ve)));while(Nt&&(Ve=Pt(Ve))&&Ve!==Object.prototype);rr=ir(rr)}else if(Nt)for(var Bi in Ve)rr.push(Bi);else rr=Le(Ve);return rr},ot}({}),dr=Ht(er),gr=function(ot,St,yt){St=Wn(St,yt);for(var Ve=!Vt(ot)&&Le(ot),Qe=(Ve||ot).length,gt=Array(Qe),Nt=0;Nt<Qe;Nt++){var ln=Ve?Ve[Nt]:Nt;gt[Nt]=St(ot[ln],ln,ot)}return gt},Tr=function(ot){return ot?Tt(ot)?ot:Vt(ot)&&!_n(ot)?gr(ot):[ot]:[]},Ur=function(ot){var St=(ot=function(yt,Ve){return St.extend(yt,Ve)}).Base=function yt(Ve,Qe,gt){gt=gt||{};var Nt=Qe.className||wt(Qe,"initialize.name")||"";delete Qe.className;var ln=function(){var Cn=Tr(arguments);return this.initialize&&this.initialize.apply(this,Cn)||this};if(!Yt)try{ln=new Function("toArr","return function "+Nt+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(Tr)}catch{}return Ge(ln,Ve),ln.prototype.constructor=ln,ln.extend=function(Cn,jn){return yt(ln,Cn,jn)},ln.inherits=function(Cn){Ge(ln,Cn)},ln.methods=function(Cn){return dr(ln.prototype,Cn),ln},ln.statics=function(Cn){return dr(ln,Cn),ln},ln.methods(Qe).statics(gt),ln}(Object,{className:"Base",callSuper:function(yt,Ve,Qe){return yt.prototype[Ve].apply(this,Qe)},toString:function(){return this.constructor.name}});return ot}({}),fr=function(ot){if(Kt(ot))return ot;if(be(ot)){var St=$t(ot.valueOf)?ot.valueOf():ot;ot=be(St)?St+"":St}return _n(ot)?+ot:ot===0?ot:+ot},Cr=function(ot){return fr(ot.replace("px",""))},Wr=function(ot,St){if(St==null){if(ot.trimRight)return ot.trimRight();St=` \r
	\f\v`}for(var yt,Ve,Qe=ot.length-1,gt=St.length,Nt=!0;Nt&&Qe>=0;)for(Nt=!1,yt=-1,Ve=ot.charAt(Qe);++yt<gt;)if(Ve===St[yt]){Nt=!0,Qe--;break}return Qe>=0?ot.substring(0,Qe+1):""},li=function(ot,St){return St==null&&ot.trim?ot.trim():Rn(Wr(ot,St),St)},bi=function(ot){ot={parse:function(yt){var Ve={};return yt=li(yt).replace(St,""),Xt(yt.split("&"),function(Qe){var gt=Qe.split("="),Nt=gt.shift(),ln=gt.length>0?gt.join("="):null;Nt=decodeURIComponent(Nt),ln=decodeURIComponent(ln),Ke(Ve[Nt])?Ve[Nt]=ln:Tt(Ve[Nt])?Ve[Nt].push(ln):Ve[Nt]=[Ve[Nt],ln]}),Ve},stringify:function(yt,Ve){return Dn(gr(yt,function(Qe,gt){return be(Qe)&&Hn(Qe)?"":Tt(Qe)?ot.stringify(Qe,gt):encodeURIComponent(Ve||gt)+"="+encodeURIComponent(Qe)}),function(Qe){return Qe.length>0}).join("&")}};var St=/^(\?|#|&)/g;return ot}({}),ii=function(ot){ot=Ur({className:"Url",initialize:function(Qe){!Qe&&ee&&(Qe=window.location.href),dr(this,ot.parse(Qe||""))},setQuery:function(Qe,gt){var Nt=this.query;return be(Qe)?Xt(Qe,function(ln,Cn){Nt[Cn]=Ie(ln)}):Nt[Qe]=Ie(gt),this},rmQuery:function(Qe){var gt=this.query;return Tt(Qe)||(Qe=Tr(Qe)),Xt(Qe,function(Nt){delete gt[Nt]}),this},toString:function(){return ot.stringify(this)}},{parse:function(Qe){var gt={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},Nt=li(Qe),ln=!1,Cn=Nt.match(St);if(Cn&&(Cn=Cn[0],gt.protocol=Cn.toLowerCase(),Nt=Nt.substr(Cn.length)),Cn&&(ln=Nt.substr(0,2)==="//")&&(Nt=Nt.slice(2),gt.slashes=!0),ln){for(var jn=Nt,ur=-1,rr=0,Ci=Ve.length;rr<Ci;rr++){var Bi=Nt.indexOf(Ve[rr]);Bi!==-1&&(ur===-1||Bi<ur)&&(ur=Bi)}ur>-1&&(jn=Nt.slice(0,ur),Nt=Nt.slice(ur));var Ao=jn.lastIndexOf("@");Ao!==-1&&(gt.auth=decodeURIComponent(jn.slice(0,Ao)),jn=jn.slice(Ao+1)),gt.hostname=jn;var Ho=jn.match(yt);Ho&&((Ho=Ho[0])!==":"&&(gt.port=Ho.substr(1)),gt.hostname=jn.substr(0,jn.length-Ho.length))}var si=Nt.indexOf("#");si!==-1&&(gt.hash=Nt.substr(si),Nt=Nt.slice(0,si));var wi=Nt.indexOf("?");return wi!==-1&&(gt.query=bi.parse(Nt.substr(wi+1)),Nt=Nt.slice(0,wi)),gt.pathname=Nt||"/",gt},stringify:function(Qe){var gt=Qe.protocol+(Qe.slashes?"//":"")+(Qe.auth?encodeURIComponent(Qe.auth)+"@":"")+Qe.hostname+(Qe.port?":"+Qe.port:"")+Qe.pathname;return Hn(Qe.query)||(gt+="?"+bi.stringify(Qe.query)),Qe.hash&&(gt+=Qe.hash),gt}});var St=/^([a-z0-9.+-]+:)/i,yt=/:[0-9]*$/,Ve=["/","?","#"];return ot}({}),Hi=function(ot){var St=ct(ot.split("/"));return St.indexOf("?")>-1&&(St=li(St.split("?")[0])),St===""&&(St=(ot=new ii(ot)).hostname),St},Eo=function(ot){return ot=function(St,yt){var Ve;switch(Ke(yt)&&(yt=!0),St){case"local":Ve=window.localStorage;break;case"session":Ve=window.sessionStorage}try{var Qe="test-localStorage-"+Date.now();Ve.setItem(Qe,Qe);var gt=Ve.getItem(Qe);if(Ve.removeItem(Qe),gt!==Qe)throw new Error}catch{return yt?Qn:void 0}return Ve},ot}({});function ia(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var fi=function(ot){xe(yt,ot);var St=ia(yt);function yt(Ve){var Qe;return ce(this,yt),(Qe=St.call(this))._style=qr(V(7693)),Qe._$container=Ve,Qe._appendTpl(),Qe._makeDraggable(),Qe._bindEvent(),Qe._registerListener(),Qe}return Ee(yt,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(Ve){this._isOutOfRange(Ve)&&(Ve=this._getDefPos()),this._$el.css({left:Ve.x,top:Ve.y}),this.config.set("pos",Ve)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){qr.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(Ve){Ve=Ve||this.config.get("pos");var Qe=this._getDefPos();return Ve.x>Qe.x+10||Ve.x<0||Ve.y<0||Ve.y>Qe.y+10}},{key:"_registerListener",value:function(){var Ve=this;this._scaleListener=function(){return Qa()(function(){Ve._isOutOfRange()&&Ve._resetPos()})},ai.on(ai.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){ai.off(ai.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ve=this._$container;Ve.append(V(7640)()),this._$el=Ve.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(Ve){var Qe=this.config,gt=Qe.get("pos"),Nt=this._getDefPos();Qe.get("rememberPos")&&!Ve||(gt=Nt),this.setPos(gt)}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this._draggabilly,gt=this._$el;Qe.on("staticClick",function(){return Ve.emit("click")}).on("dragStart",function(){return gt.addClass("eruda-active")}),Qe.on("dragEnd",function(){var Nt=Ve.config;Nt.get("rememberPos")&&Nt.set("pos",{x:Cr(Ve._$el.css("left")),y:Cr(Ve._$el.css("top"))}),gt.rmClass("eruda-active")}),Ns().on("change",function(){return Ve._resetPos(!0)}),window.addEventListener("resize",function(){return Ve._resetPos()})}},{key:"_makeDraggable",value:function(){this._draggabilly=new(Se())(this._$el.get(0),{containment:!0})}},{key:"initCfg",value:function(Ve){var Qe=this.config=de.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});Ve.separator().switch(Qe,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var Ve=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-Ve,y:window.innerHeight-Ve}}}]),yt}(on());function yi(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var Rr,Ri=function(ot){xe(yt,ot);var St=yi(yt);function yt(Ve){var Qe;return ce(this,yt),(Qe=St.call(this))._style=qr(V(3409)),Qe._$el=Ve.find(".eruda-nav-bar"),Qe._$bottomBar=Ve.find(".eruda-bottom-bar"),Qe._len=0,Qe._bindEvent(),Qe}return Ee(yt,[{key:"add",value:function(Ve){var Qe=this._$el;this._len++;var gt=Qe.find(".eruda-nav-bar-item").last(),Nt='<div class="eruda-nav-bar-item">'.concat(Ve,"</div>");gt.length>0&&gt.text()==="settings"?gt.before(Nt):Qe.append(Nt),this.resetBottomBar()}},{key:"remove",value:function(Ve){this._len--,this._$el.find(".eruda-nav-bar-item").each(function(){var Qe=Re()(this);Qe.text().toLowerCase()===Ve.toLowerCase()&&Qe.remove()}),this.resetBottomBar()}},{key:"activateTool",value:function(Ve){var Qe=this;this._$el.find(".eruda-nav-bar-item").each(function(){var gt=Re()(this);gt.text()===Ve?(gt.addClass("eruda-active"),Qe.resetBottomBar(),Qe._scrollItemToView()):gt.rmClass("eruda-active")})}},{key:"destroy",value:function(){qr.remove(this._style),this._$el.remove()}},{key:"_scrollItemToView",value:function(){var Ve,Qe=this._$el,gt=Qe.find(".eruda-active").get(0),Nt=Qe.get(0),ln=gt.offsetLeft,Cn=gt.offsetWidth,jn=Nt.offsetWidth,ur=Nt.scrollLeft;ln<ur?Ve=ln:ln+Cn>jn+ur&&(Ve=ln+Cn-jn),jo()(Ve)&&(Nt.scrollLeft=Ve)}},{key:"resetBottomBar",value:function(){var Ve=this._$bottomBar,Qe=this._$el,gt=Qe.find(".eruda-active").get(0);gt&&Ve.css({width:gt.offsetWidth,left:gt.offsetLeft-Qe.get(0).scrollLeft})}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this;this._$el.on("click",".eruda-nav-bar-item",function(){Qe.emit("showTool",Re()(this).text())}).on("scroll",function(){return Ve.resetBottomBar()})}}]),yt}(on()),$i=Rr=new(In())("[Eruda]","warn");Rr.formatter=function(ot,St){return St.unshift(this.name),St};var ci=V(6093),Ki=V.n(ci);function $a(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var eo=function(ot){xe(yt,ot);var St=$a(yt);function yt(Ve){var Qe,gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Nt=gt.defaults,ln=Nt===void 0?{}:Nt;return ce(this,yt),(Qe=St.call(this))._defCfg=Pr()({transparency:1,displaySize:80,theme:Aa()()?"Dark":"Light"},ln),Qe._style=qr(V(9217)),Qe.$container=Ve,Qe._isShow=!1,Qe._opacity=1,Qe._tools={},Qe._isResizing=!1,Qe._resizeTimer=null,Qe._resizeStartY=0,Qe._resizeStartSize=0,Qe._appendTpl(),Qe._initNavBar(),Qe._initNotification(),Qe._bindEvent(),Qe}return Ee(yt,[{key:"show",value:function(){var Ve=this;return this._isShow=!0,this._$el.show(),this._navBar.resetBottomBar(),setTimeout(function(){Ve._$el.css("opacity",Ve._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var Ve=this;return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return Ve._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(Ve){if(!(Ve instanceof qi)){var Qe=new qi,gt=Qe.init,Nt=Qe.show,ln=Qe.hide,Cn=Qe.destroy;Nn()(Ve,{init:gt,show:Nt,hide:ln,destroy:Cn})}var jn=Ve.name;return jn?(jn=jn.toLowerCase(),this._tools[jn]?$i.warn("Tool ".concat(jn," already exists")):(this._$tools.prepend('<div id="eruda-'.concat(jn,'" class="eruda-').concat(jn,' eruda-tool"></div>')),Ve.init(this._$tools.find(".eruda-".concat(jn,".eruda-tool")),this),Ve.active=!1,this._tools[jn]=Ve,this._navBar.add(jn),this)):$i.error("You must specify a name for a tool")}},{key:"remove",value:function(Ve){var Qe=this._tools;if(!Qe[Ve])return $i.warn("Tool ".concat(Ve," doesn't exist"));this._navBar.remove(Ve);var gt=Qe[Ve];if(delete Qe[Ve],gt.active){var Nt=Jo()(Qe);Nt.length>0&&this.showTool(Qe[Ls()(Nt)].name)}return gt.destroy(),this}},{key:"removeAll",value:function(){var Ve=this;return mn()(this._tools,function(Qe){return Ve.remove(Qe.name)}),this}},{key:"get",value:function(Ve){var Qe=this._tools[Ve];if(Qe)return Qe}},{key:"showTool",value:function(Ve){if(this._curTool===Ve)return this;this._curTool=Ve;var Qe=this._tools,gt=Qe[Ve];if(gt){var Nt={};return mn()(Qe,function(ln){ln.active&&(Nt=ln,ln.active=!1,ln.hide())}),gt.active=!0,gt.show(),this._navBar.activateTool(Ve),this.emit("showTool",Ve,Nt),this}}},{key:"initCfg",value:function(Ve){var Qe=this,gt=this.config=de.createCfg("dev-tools",this._defCfg);this._setTransparency(gt.get("transparency")),this._setDisplaySize(gt.get("displaySize")),this._setTheme(gt.get("theme")),gt.on("change",function(Nt,ln){switch(Nt){case"transparency":return Qe._setTransparency(ln);case"displaySize":return Qe._setDisplaySize(ln);case"theme":return Qe._setTheme(ln)}}),Ve.separator().select(gt,"theme","Theme",Jo()(qr.getThemes())).range(gt,"transparency","Transparency",{min:.2,max:1,step:.01}).range(gt,"displaySize","Display Size",{min:40,max:100,step:1}).separator()}},{key:"notify",value:function(Ve,Qe){this._notification.notify(Ve,Qe)}},{key:"destroy",value:function(){qr.remove(this._style),this.removeAll(),this._navBar.destroy(),this._$el.remove()}},{key:"_setTheme",value:function(Ve){var Qe=this.$container;(function(gt){return vi()(zc,gt)})(Ve)?Qe.addClass("eruda-dark"):Qe.rmClass("eruda-dark"),qr.setTheme(Ve)}},{key:"_setTransparency",value:function(Ve){jo()(Ve)&&(this._opacity=Ve,this._isShow&&this._$el.css({opacity:Ve}))}},{key:"_setDisplaySize",value:function(Ve){jo()(Ve)&&this._$el.css({height:Ve+"%"})}},{key:"_appendTpl",value:function(){var Ve=this.$container;Ve.append(V(8269)()),this._$el=Ve.find(".eruda-dev-tools"),this._$tools=this._$el.find(".eruda-tools")}},{key:"_initNavBar",value:function(){var Ve=this;this._navBar=new Ri(this._$el.find(".eruda-nav-bar-container")),this._navBar.on("showTool",function(Qe){return Ve.showTool(Qe)})}},{key:"_initNotification",value:function(){this._notification=new(Ki())(this._$el.find(".eruda-notification").get(0),{position:{x:"center",y:"top"}})}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this._$el.find(".eruda-nav-bar"),gt=function(rr){rr=rr.origEvent,Ve._resizeTimer=setTimeout(function(){rr.preventDefault(),rr.stopPropagation(),Ve._isResizing=!0,Ve._resizeStartSize=Ve.config.get("displaySize"),Ve._resizeStartY=jn(rr),Qe.css("filter","brightness(1.2)")},1e3)},Nt=Oa()(function(rr){return Ve.config.set("displaySize",rr)},50),ln=function(rr){if(!Ve._isResizing)return clearTimeout(Ve._resizeTimer);rr.preventDefault(),rr.stopPropagation(),rr=rr.origEvent;var Ci=Math.round((Ve._resizeStartY-jn(rr))/window.innerHeight*100),Bi=Ve._resizeStartSize+Ci;Bi<40?Bi=40:Bi>100&&(Bi=100),Nt(Bi)},Cn=function(){clearTimeout(Ve._resizeTimer),Ve._isResizing=!1,Qe.css("filter","brightness(1)")},jn=function(rr){return rr.clientY?rr.clientY:rr.touches?rr.touches[0].clientY:0};Qe.on("contextmenu",function(rr){return rr.preventDefault()});var ur=Re()(document.documentElement);Sa()()?(Qe.on("touchstart",gt).on("touchmove",ln),ur.on("touchend",Cn)):(Qe.on("mousedown",gt),ur.on("mousemove",ln),ur.on("mouseup",Cn))}}]),yt}(on());function mo(ot,St,yt){return St in ot?Object.defineProperty(ot,St,{value:yt,enumerable:!0,configurable:!0,writable:!0}):ot[St]=yt,ot}var za=V(7132),Da=V.n(za);function to(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}bo().start();var La=function(ot){xe(yt,ot);var St=to(yt);function yt(){var Ve,Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gt=Qe.name,Nt=gt===void 0?"console":gt;return ce(this,yt),mo(ge(Ve=St.call(this)),"_handleShow",function(){$s()(Ve._$el.get(0))||Ve._logger.renderViewport()}),mo(ge(Ve),"_handleErr",function(ln){Ve._logger.error(ln)}),on().mixin(ge(Ve)),Ve.name=Nt,Ve._scale=1,Ve._selectedLog=null,Ve._registerListener(),Ve}return Ee(yt,[{key:"init",value:function(Ve,Qe){pi(we(yt.prototype),"init",this).call(this,Ve),this._container=Qe,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){pi(we(yt.prototype),"show",this).call(this),this._handleShow()}},{key:"overrideConsole",value:function(){var Ve=this,Qe=this._origConsole={},gt=window.console;return Go.forEach(function(Nt){var ln=Qe[Nt]=Ia();gt[Nt]&&(ln=Qe[Nt]=gt[Nt].bind(gt)),gt[Nt]=function(){Ve[Nt].apply(Ve,arguments),ln.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(Ve,Qe){this._logger.setGlobal(Ve,Qe)}},{key:"restoreConsole",value:function(){var Ve=this;return this._origConsole?(Go.forEach(function(Qe){return window.console[Qe]=Ve._origConsole[Qe]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return bo().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return bo().rmListener(this._handleErr),this}},{key:"destroy",value:function(){this._logger.destroy(),pi(we(yt.prototype),"destroy",this).call(this),this._container.off("show",this._handleShow),this._style&&qr.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._unregisterListener(),this._rmCfg()}},{key:"_enableJsExecution",value:function(Ve){var Qe=this._$el,gt=Qe.find(".eruda-console-container"),Nt=Qe.find(".eruda-js-input");Ve?(Nt.show(),gt.rmClass("eruda-js-input-hidden")):(Nt.hide(),gt.addClass("eruda-js-input-hidden"))}},{key:"_registerListener",value:function(){var Ve=this;this._scaleListener=function(Qe){return Ve._scale=Qe},ai.on(ai.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){ai.off(ai.SCALE,this._scaleListener)}},{key:"_appendTpl",value:function(){var Ve=this._$el;this._style=qr(V(3816)),Ve.append(V(4432)());var Qe=Ve.find(".eruda-js-input"),gt=Qe.find("textarea"),Nt=Qe.find(".eruda-buttons");Object.assign(this,{_$control:Ve.find(".eruda-control"),_$logs:Ve.find(".eruda-logs-container"),_$inputContainer:Qe,_$input:gt,_$inputBtns:Nt,_$searchKeyword:Ve.find(".eruda-search-keyword")})}},{key:"_initLogger",value:function(){var Ve=this.config,Qe=Ve.get("maxLogNum");Qe=Qe==="infinite"?0:+Qe;var gt=this._$control.find(".eruda-filter"),Nt=new(Da())(this._$logs.get(0),{asyncRender:Ve.get("asyncRender"),maxNum:Qe,showHeader:Ve.get("displayExtraInfo"),unenumerable:Ve.get("displayUnenumerable"),accessGetter:Ve.get("displayGetterVal"),lazyEvaluation:Ve.get("lazyEvaluation")});Nt.on("optionChange",function(ln,Cn){ln==="filter"&&gt.each(function(){var jn=Re()(this),ur=jn.data("filter")===Cn;jn[ur?"addClass":"rmClass"]("eruda-active")})}),Ve.get("overrideConsole")&&this.overrideConsole(),this._logger=Nt}},{key:"_exposeLogger",value:function(){var Ve=this,Qe=this._logger;["filter","html"].concat(Go).forEach(function(gt){return Ve[gt]=function(){for(var Nt=arguments.length,ln=new Array(Nt),Cn=0;Cn<Nt;Cn++)ln[Cn]=arguments[Cn];return Qe[gt].apply(Qe,ln),Ve.emit.apply(Ve,[gt].concat(ln)),Ve}})}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this._container,gt=this._$input,Nt=this._$inputBtns,ln=this._$control,Cn=this._$searchKeyword,jn=this._logger,ur=this.config;ln.on("click",".eruda-clear-console",function(){return jn.clear(!0)}).on("click",".eruda-filter",function(){Cn.text(""),jn.setOption("filter",Re()(this).data("filter"))}).on("click",".eruda-search",function(){var rr=prompt("Filter");No()(rr)||(Cn.text(rr),ta()(rr)!==""?jn.setOption("filter",new RegExp(ca()(Uo()(rr)))):jn.setOption("filter","all"))}).on("click",".eruda-copy",function(){Ve._selectedLog&&(Ve._selectedLog.copy(),Qe.notify("Copied"))}),Nt.on("click",".eruda-cancel",function(){return Ve._hideInput()}).on("click",".eruda-execute",function(){var rr=gt.val().trim();rr!==""&&(jn.evaluate(rr),gt.val("").get(0).blur(),Ve._hideInput())}),gt.on("focusin",function(){return Ve._showInput()}),jn.on("insert",function(rr){rr.type==="error"&&ur.get("displayIfErr")&&Qe.showTool("console").show()}),jn.on("select",function(rr){Ve._selectedLog=rr,ln.find(".eruda-icon-copy").rmClass("eruda-icon-disabled")}),jn.on("deselect",function(){Ve._selectedLog=null,ln.find(".eruda-icon-copy").addClass("eruda-icon-disabled")}),Qe.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass("eruda-active"),this._$inputBtns.hide()}},{key:"_showInput",value:function(){this._$inputContainer.addClass("eruda-active"),this._$inputBtns.show()}},{key:"_rmCfg",value:function(){var Ve=this.config,Qe=this._container.get("settings");Qe&&Qe.remove(Ve,"asyncRender").remove(Ve,"jsExecution").remove(Ve,"catchGlobalErr").remove(Ve,"overrideConsole").remove(Ve,"displayExtraInfo").remove(Ve,"displayUnenumerable").remove(Ve,"displayGetterVal").remove(Ve,"lazyEvaluation").remove(Ve,"displayIfErr").remove(Ve,"maxLogNum").remove(ls()(this.name))}},{key:"_initCfg",value:function(){var Ve=this,Qe=this._container,gt=this.config=de.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(gt.get("jsExecution")),gt.get("catchGlobalErr")&&this.catchGlobalErr(),gt.on("change",function(ln,Cn){var jn=Ve._logger;switch(ln){case"asyncRender":return jn.setOption("asyncRender",Cn);case"jsExecution":return Ve._enableJsExecution(Cn);case"catchGlobalErr":return Cn?Ve.catchGlobalErr():Ve.ignoreGlobalErr();case"overrideConsole":return Cn?Ve.overrideConsole():Ve.restoreConsole();case"maxLogNum":return jn.setOption("maxNum",Cn==="infinite"?0:+Cn);case"displayExtraInfo":return jn.setOption("showHeader",Cn);case"displayUnenumerable":return jn.setOption("unenumerable",Cn);case"displayGetterVal":return jn.setOption("accessGetter",Cn);case"lazyEvaluation":return jn.setOption("lazyEvaluation",Cn)}});var Nt=Qe.get("settings");Nt&&Nt.text(ls()(this.name)).switch(gt,"asyncRender","Asynchronous Rendering").switch(gt,"jsExecution","Enable JavaScript Execution").switch(gt,"catchGlobalErr","Catch Global Errors").switch(gt,"overrideConsole","Override Console").switch(gt,"displayIfErr","Auto Display If Error Occurs").switch(gt,"displayExtraInfo","Display Extra Information").switch(gt,"displayUnenumerable","Display Unenumerable Properties").switch(gt,"displayGetterVal","Access Getter Value").switch(gt,"lazyEvaluation","Lazy Evaluation").select(gt,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}]),yt}(qi),Go=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],il=V(9143),Zh=V.n(il),Xh=V(2139),Kh=V(8689),dh=V(7935),Yh=V(9119);function ph(ot,St){var yt=Object.keys(ot);if(Object.getOwnPropertySymbols){var Ve=Object.getOwnPropertySymbols(ot);St&&(Ve=Ve.filter(function(Qe){return Object.getOwnPropertyDescriptor(ot,Qe).enumerable})),yt.push.apply(yt,Ve)}return yt}function fh(ot){for(var St=1;St<arguments.length;St++){var yt=arguments[St]!=null?arguments[St]:{};St%2?ph(Object(yt),!0).forEach(function(Ve){mo(ot,Ve,yt[Ve])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(yt)):ph(Object(yt)).forEach(function(Ve){Object.defineProperty(ot,Ve,Object.getOwnPropertyDescriptor(yt,Ve))})}return ot}var Gl=new(Zh());Gl.register("Network",Xh),Gl.register("Overlay",Kh),Gl.register("DOM",fh(fh({},dh),{},{getNodeId:dh.getDOMNodeId})),Gl.register("Storage",Yh);var To=Gl;function Jh(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var Qh=function(ot){xe(yt,ot);var St=Jh(yt);function yt(){var Ve;return ce(this,yt),mo(ge(Ve=St.call(this)),"_reqWillBeSent",function(Qe){Ve._requests[Qe.requestId]={name:Hi(Qe.request.url),url:Qe.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:Qe.request.postData,method:Qe.request.method,startTime:1e3*Qe.timestamp,time:0,resTxt:"",done:!1,reqHeaders:Qe.request.headers||{},resHeaders:{}}}),mo(ge(Ve),"_resReceivedExtraInfo",function(Qe){var gt=Ve._requests[Qe.requestId];gt&&(gt.resHeaders=Qe.headers,Ve._updateType(gt),Ve._render())}),mo(ge(Ve),"_resReceived",function(Qe){var gt=Ve._requests[Qe.requestId];if(gt){var Nt=Qe.response,ln=Nt.status,Cn=Nt.headers;gt.status=ln,(ln<200||ln>=300)&&(gt.hasErr=!0),Cn&&(gt.resHeaders=Cn,Ve._updateType(gt)),Ve._render()}}),mo(ge(Ve),"_loadingFinished",function(Qe){var gt=Ve._requests[Qe.requestId];if(gt){var Nt=1e3*Qe.timestamp;gt.time=Nt-gt.startTime,gt.displayTime=Fs()(gt.time),gt.size=Qe.encodedDataLength,gt.done=!0,gt.resTxt=To.domain("Network").getResponseBody({requestId:Qe.requestId}).body,Ve._render()}}),Ve._style=qr(V(3985)),Ve.name="network",Ve._requests={},Ve._tpl=V(4854),Ve._detailTpl=V(1083),Ve._requestsTpl=V(726),Ve._detailData={},Ve}return Ee(yt,[{key:"init",value:function(Ve,Qe){pi(we(yt.prototype),"init",this).call(this,Ve),this._container=Qe,this._bindEvent(),this._appendTpl()}},{key:"show",value:function(){pi(we(yt.prototype),"show",this).call(this),this._render()}},{key:"clear",value:function(){this._requests={},this._render()}},{key:"requests",value:function(){var Ve=[];return mn()(this._requests,function(Qe){Ve.push(Qe)}),Ve}},{key:"_updateType",value:function(Ve){var Qe=function(ln){if(!ln)return"unknown";var Cn=ln.split(";")[0].split("/");return{type:Cn[0],subType:Ls()(Cn)}}(Ve.resHeaders["content-type"]||""),gt=Qe.type,Nt=Qe.subType;Ve.type=gt,Ve.subType=Nt}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this._$el,gt=this._container,Nt=this;function ln(jn,ur){var rr=gt.get("sources");rr&&(rr.set(jn,ur),gt.showTool("sources"))}Qe.on("click",".eruda-request",function(){var jn=Re()(this).data("id"),ur=Nt._requests[jn];ur.done&&Nt._showDetail(ur)}).on("click",".eruda-clear-request",function(){return Ve.clear()}).on("click",".eruda-back",function(){return Ve._hideDetail()}).on("click",".eruda-http .eruda-response",function(){var jn=Ve._detailData,ur=jn.resTxt;switch(jn.subType){case"css":return ln("css",ur);case"html":return ln("html",ur);case"javascript":return ln("js",ur);case"json":return ln("object",ur)}if(jn.type==="image")return ln("img",jn.url)}),To.domain("Network").enable();var Cn=To.domain("Network");Cn.on("requestWillBeSent",this._reqWillBeSent),Cn.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Cn.on("responseReceived",this._resReceived),Cn.on("loadingFinished",this._loadingFinished)}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),qr.remove(this._style);var Ve=To.domain("Network");Ve.off("requestWillBeSent",this._reqWillBeSent),Ve.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),Ve.off("responseReceived",this._resReceived),Ve.off("loadingFinished",this._loadingFinished)}},{key:"_showDetail",value:function(Ve){Ve.resTxt&&ta()(Ve.resTxt)===""&&delete Ve.resTxt,Ro()(Ve.resHeaders)&&delete Ve.resHeaders,Ro()(Ve.reqHeaders)&&delete Ve.reqHeaders,this._$detail.html(this._detailTpl(Ve)).show(),this._detailData=Ve}},{key:"_hideDetail",value:function(){this._$detail.hide()}},{key:"_appendTpl",value:function(){var Ve=this._$el;Ve.html(this._tpl()),this._$detail=Ve.find(".eruda-detail"),this._$requests=Ve.find(".eruda-requests")}},{key:"_render",value:function(){if(this.active){var Ve={};Ro()(this._requests)||(Ve.requests=this._requests),this._renderHtml(this._requestsTpl(Ve))}}},{key:"_renderHtml",value:function(Ve){Ve!==this._lastHtml&&(this._lastHtml=Ve,this._$requests.html(Ve))}}]),yt}(qi);function ed(ot){for(var St={},yt=0,Ve=ot.length;yt<Ve;yt++){var Qe=ot[yt];ot[Qe]!=="initial"&&(St[Qe]=ot[Qe])}return function(gt){return Rl()(gt,{comparator:function(Nt,ln){for(var Cn=Nt.length,jn=ln.length,ur=Cn>jn?jn:Cn,rr=0;rr<ur;rr++){var Ci=jc(Nt.charCodeAt(rr),ln.charCodeAt(rr));if(Ci!==0)return Ci}return Cn>jn?1:Cn<jn?-1:0}})}(St)}var td=Element.prototype,Mu=function(){return!1};td.webkitMatchesSelector?Mu=function(ot,St){return ot.webkitMatchesSelector(St)}:td.mozMatchesSelector&&(Mu=function(ot,St){return ot.mozMatchesSelector(St)});var Xd=function(){function ot(St){ce(this,ot),this._el=St}return Ee(ot,[{key:"getComputedStyle",value:function(){return ed(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var St=this,yt=[];return mn()(document.styleSheets,function(Ve){try{if(!Ve.cssRules)return}catch{return}mn()(Ve.cssRules,function(Qe){var gt=!1;try{gt=St._elMatchesSel(Qe.selectorText)}catch{}gt&&yt.push({selectorText:Qe.selectorText,style:ed(Qe.style)})})}),yt}},{key:"_elMatchesSel",value:function(St){return Mu(this._el,St)}}]),ot}();function jc(ot,St){return(ot=nd(ot))>(St=nd(St))?1:ot<St?-1:0}function nd(ot){return ot===45?123:ot}var Iu=function(){function ot(){ce(this,ot),this._isShow=!1,To.domain("Overlay").enable()}return Ee(ot,[{key:"setEl",value:function(St){this._target=St}},{key:"show",value:function(){this._isShow=!0;var St=To.domain("DOM").getNodeId({node:this._target}).nodeId;To.domain("Overlay").highlightNode({nodeId:St,highlightConfig:{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}})}},{key:"destroy",value:function(){To.domain("Overlay").disable()}},{key:"hide",value:function(){this._isShow=!1,To.domain("Overlay").hideHighlight()}}]),ot}(),rd=V(4204),ql=V.n(rd);function Ba(ot){var St=ot.parentNode;if(!St)return!1;for(;St;)if((St=St.parentNode)&&St.id==="eruda")return!0;return!1}function Fa(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var Pu=function(ot){xe(yt,ot);var St=Fa(yt);function yt(){var Ve;ce(this,yt);var Qe=ge(Ve=St.call(this));return Ve._startListener=function(gt){if(!Ba(gt.target))return Qe._timer=setTimeout(function(){Qe.emit("select",gt.target)},200),!1},Ve._moveListener=function(){clearTimeout(Qe._timer)},Ve._clickListener=function(gt){Ba(gt.target)||(gt.preventDefault(),gt.stopImmediatePropagation())},Ve}return Ee(yt,[{key:"enable",value:function(){function Ve(Qe,gt){document.body.addEventListener(Qe,gt,!0)}return this.disable(),Sa()()?(Ve("touchstart",this._startListener),Ve("touchmove",this._moveListener)):(Ve("mousedown",this._startListener),Ve("mousemove",this._moveListener)),Ve("click",this._clickListener),this}},{key:"disable",value:function(){function Ve(Qe,gt){document.body.removeEventListener(Qe,gt,!0)}return Sa()()?(Ve("touchstart",this._startListener),Ve("touchmove",this._moveListener)):(Ve("mousedown",this._startListener),Ve("mousemove",this._moveListener)),Ve("click",this._clickListener),this}}]),yt}(on());function id(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var od=function(ot){xe(yt,ot);var St=id(yt);function yt(){var Ve;return ce(this,yt),(Ve=St.call(this))._style=qr(V(269)),Ve.name="elements",Ve._tpl=V(6560),Ve._rmDefComputedStyle=!0,Ve._highlightElement=!1,Ve._selectElement=!1,Ve._observeElement=!0,Ve._computedStyleSearchKeyword="",Ve._history=[],on().mixin(ge(Ve)),Ve}return Ee(yt,[{key:"init",value:function(Ve,Qe){var gt=this;pi(we(yt.prototype),"init",this).call(this,Ve),this._container=Qe,Ve.html('<div class="eruda-show-area"></div>'),this._$showArea=Ve.find(".eruda-show-area"),Ve.append(V(2407)()),this._htmlEl=document.documentElement,this._highlight=new Iu(this._container.$container),this._select=new Pu,this._bindEvent(),this._initObserver(),this._initCfg(),Qa()(function(){return gt._updateHistory()})}},{key:"show",value:function(){pi(we(yt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this._curEl||this._setEl(this._htmlEl),this._render()}},{key:"hide",value:function(){return this._disableObserver(),pi(we(yt.prototype),"hide",this).call(this)}},{key:"set",value:function(Ve){if(Ve!==this._curEl)return this._setEl(Ve),this.scrollToTop(),this._render(),this._updateHistory(),this.emit("change",Ve),this}},{key:"overrideEventTarget",value:function(){var Ve=sd(),Qe=this._origAddEvent=Ve.addEventListener,gt=this._origRmEvent=Ve.removeEventListener;Ve.addEventListener=function(Nt,ln,Cn){fs(this,Nt,ln,Cn),Qe.apply(this,arguments)},Ve.removeEventListener=function(Nt,ln,Cn){ol(this,Nt,ln,Cn),gt.apply(this,arguments)}}},{key:"scrollToTop",value:function(){this._$showArea.get(0).scrollTop=0}},{key:"restoreEventTarget",value:function(){var Ve=sd();this._origAddEvent&&(Ve.addEventListener=this._origAddEvent),this._origRmEvent&&(Ve.removeEventListener=this._origRmEvent)}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),qr.remove(this._style),this._select.disable(),this._highlight.destroy(),this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"_back",value:function(){if(this._curEl!==this._htmlEl){for(var Ve=this._curParentQueue,Qe=Ve.shift();!hs(Qe);)Qe=Ve.shift();this.set(Qe)}}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this,gt=this._container,Nt=this._select;this._$el.on("click",".eruda-child",function(){var ln=Re()(this).data("idx"),Cn=Qe._curEl,jn=Cn.childNodes[ln];if(jn&&jn.nodeType===3){var ur;switch(Cn.tagName){case"SCRIPT":ur="js";break;case"STYLE":ur="css";break;default:return}var rr=gt.get("sources");rr&&(rr.set(ur,jn.nodeValue),gt.showTool("sources"))}else hs(jn)?Qe.set(jn):Qe._render()}).on("click",".eruda-listener-content",function(){var ln=Re()(this).text(),Cn=gt.get("sources");Cn&&(Cn.set("js",ln),gt.showTool("sources"))}).on("click",".eruda-breadcrumb",function(){var ln=gt.get("sources");ln&&(ln.set("object",Ve._curEl),gt.showTool("sources"))}).on("click",".eruda-parent",function(){for(var ln=Re()(this).data("idx"),Cn=Qe._curEl.parentNode;ln--&&Cn.parentNode;)Cn=Cn.parentNode;hs(Cn)?Qe.set(Cn):Qe._render()}).on("click",".eruda-toggle-all-computed-style",function(){return Ve._toggleAllComputedStyle()}).on("click",".eruda-computed-style-search",function(){var ln=prompt("Filter");No()(ln)||(ln=ta()(ln),Ve._computedStyleSearchKeyword=ln,Ve._render())}),this._$el.find(".eruda-bottom-bar").on("click",".eruda-refresh",function(){Ve._render(),gt.notify("Refreshed")}).on("click",".eruda-highlight",function(){return Ve._toggleHighlight()}).on("click",".eruda-select",function(){return Ve._toggleSelect()}).on("click",".eruda-reset",function(){return Ve.set(Ve._htmlEl)}),Nt.on("select",function(ln){return Ve.set(ln)})}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_enableObserver",value:function(){this._observer.observe(this._htmlEl,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_toggleHighlight",value:function(){this._selectElement||(this._$el.find(".eruda-highlight").toggleClass("eruda-active"),this._highlightElement=!this._highlightElement,this._render())}},{key:"_toggleSelect",value:function(){var Ve=this._select;this._$el.find(".eruda-select").toggleClass("eruda-active"),this._selectElement||this._highlightElement||this._toggleHighlight(),this._selectElement=!this._selectElement,this._selectElement?(Ve.enable(),this._container.hide()):Ve.disable()}},{key:"_setEl",value:function(Ve){this._curEl=Ve,this._curCssStore=new Xd(Ve),this._highlight.setEl(Ve),this._rmDefComputedStyle=!0;for(var Qe=[],gt=Ve.parentNode;gt;)Qe.push(gt),gt=gt.parentNode;this._curParentQueue=Qe}},{key:"_getData",value:function(){var Ve={},Qe=this._curEl,gt=this._curCssStore,Nt=Qe.className,ln=Qe.id,Cn=Qe.attributes,jn=Qe.tagName;Ve.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Ve.parents=function(si){for(var wi=[],Ji=0,Vi=si.parentNode;Vi&&Vi.nodeType===1;)wi.push({text:ds(Vi,{noAttr:!0}),idx:Ji++}),Vi=Vi.parentNode;return wi.reverse()}(Qe),Ve.children=function(si){for(var wi=[],Ji=0,Vi=si.length;Ji<Vi;Ji++){var co=si[Ji],_s=co.nodeType;if(_s!==3&&_s!==8){var fd=!$o()(co.className);_s===1&&co.id!=="eruda"&&(fd||co.className.indexOf("eruda")<0)&&wi.push({text:ds(co),isEl:!0,idx:Ji})}else{var _d=co.nodeValue.trim();_d!==""&&wi.push({text:_d,isCmt:_s===8,idx:Ji})}}return wi}(Qe.childNodes),Ve.attributes=Na(Cn),Ve.name=ds({tagName:jn,id:ln,className:Nt,attributes:Cn});var ur=Qe.erudaEvents;if(ur&&Jo()(ur).length!==0&&(Ve.listeners=ur),ps(jn))return Ve;var rr=gt.getComputedStyle();function Ci(si){var wi=["top","left","right","bottom"];return si!=="position"&&(wi=Ma()(wi,function(Ji){return"".concat(si,"-").concat(Ji)})),si==="border"&&(wi=Ma()(wi,function(Ji){return"".concat(Ji,"-width")})),{top:Hl(rr[wi[0]],si),left:Hl(rr[wi[1]],si),right:Hl(rr[wi[2]],si),bottom:Hl(rr[wi[3]],si)}}var Bi={margin:Ci("margin"),border:Ci("border"),padding:Ci("padding"),content:{width:Hl(rr.width),height:Hl(rr.height)}};rr.position!=="static"&&(Bi.position=Ci("position")),Ve.boxModel=Bi;var Ao=gt.getMatchedCSSRules();Ao.unshift(function(si){for(var wi={selectorText:"element.style",style:{}},Ji=0,Vi=si.length;Ji<Vi;Ji++){var co=si[Ji];wi.style[co]=si[co]}return wi}(Qe.style)),Ao.forEach(function(si){return ad(si.style)}),Ve.styles=Ao,this._rmDefComputedStyle&&(rr=function(si,wi){var Ji={},Vi=["display","width","height"];return mn()(wi,function(co){Vi=Vi.concat(Jo()(co.style))}),Vi=na()(Vi),mn()(si,function(co,_s){vi()(Vi,_s)&&(Ji[_s]=co)}),Ji}(rr,Ao)),Ve.rmDefComputedStyle=this._rmDefComputedStyle;var Ho=Uo()(Ve.computedStyleSearchKeyword);return Ho&&(rr=Pa()(rr,function(si,wi){return vi()(wi,Ho)||vi()(si,Ho)})),ad(rr),Ve.computedStyle=rr,Ve}},{key:"_render",value:function(){if(!hs(this._curEl))return this._back();this._highlight[this._highlightElement?"show":"hide"](),this._renderHtml(this._tpl(this._getData()))}},{key:"_renderHtml",value:function(Ve){Ve!==this._lastHtml&&(this._lastHtml=Ve,this._$showArea.html(Ve))}},{key:"_updateHistory",value:function(){var Ve=this._container.get("console");if(Ve){var Qe=this._history;Qe.unshift(this._curEl),Qe.length>5&&Qe.pop();for(var gt=0;gt<5;gt++)Ve.setGlobal("$".concat(gt),Qe[gt])}}},{key:"_initObserver",value:function(){var Ve=this;this._observer=new(xn())(function(Qe){mn()(Qe,function(gt){return Ve._handleMutation(gt)})})}},{key:"_handleMutation",value:function(Ve){var Qe,gt;if(!Ba(Ve.target)){if(Ve.type==="attributes"){if(Ve.target!==this._curEl)return;this._render()}else if(Ve.type==="childList"){if(Ve.target===this._curEl)return this._render();var Nt=Ve.addedNodes;for(Qe=0,gt=Nt.length;Qe<gt;Qe++)if(Nt[Qe].parentNode===this._curEl)return this._render();var ln=Ve.removedNodes;for(Qe=0,gt=ln.length;Qe<gt;Qe++)if(ln[Qe]===this._curEl)return this.set(this._htmlEl)}}}},{key:"_rmCfg",value:function(){var Ve=this.config,Qe=this._container.get("settings");Qe&&Qe.remove(Ve,"overrideEventTarget").remove(Ve,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var Ve=this,Qe=this.config=de.createCfg("elements",{overrideEventTarget:!0,observeElement:!0});Qe.get("overrideEventTarget")&&this.overrideEventTarget(),Qe.get("observeElement")&&(this._observeElement=!1),Qe.on("change",function(Nt,ln){switch(Nt){case"overrideEventTarget":return ln?Ve.overrideEventTarget():Ve.restoreEventTarget();case"observeElement":return Ve._observeElement=ln,ln?Ve._enableObserver():Ve._disableObserver()}});var gt=this._container.get("settings");gt&&(gt.text("Elements").switch(Qe,"overrideEventTarget","Catch Event Listeners"),this._observer&&gt.switch(Qe,"observeElement","Auto Refresh"),gt.separator())}}]),yt}(qi);function ad(ot){mn()(ot,function(St,yt){return ot[yt]=Ou(St)})}var Kd=/rgba?\((.*?)\)/g,Yd=/url\("?(.*?)"?\)/g;function Ou(ot){return(ot=ss()(ot)).replace(Kd,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(Yd,function(St,yt){return'url("'.concat(ld(yt),'")')})}var hs=function(ot){return so()(ot)&&ot.parentNode};function ds(ot){var St=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yt=St.noAttr,Ve=yt!==void 0&&yt,Qe=ot.id,gt=ot.className,Nt=ot.attributes,ln='<span class="eruda-tag-name-color">'.concat(ot.tagName.toLowerCase(),"</span>");if(Qe!==""&&(ln+='<span class="eruda-function-color">#'.concat(Qe,"</span>")),$o()(gt)){var Cn="";mn()(gt.split(/\s+/g),function(jn){jn.trim()!==""&&(Cn+=".".concat(jn))}),ln+='<span class="eruda-attribute-name-color">'.concat(Cn,"</span>")}return Ve||mn()(Nt,function(jn){var ur=jn.name;ur!=="id"&&ur!=="class"&&ur!=="style"&&(ln+=' <span class="eruda-attribute-name-color">'.concat(ur,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat(jn.value,'</span><span class="eruda-operator-color">"</span>'))}),ln}var Na=function(ot){return Ma()(ot,function(St){var yt=St.value,Ve=St.name;return yt=Ta()(yt),(Ve==="src"||Ve==="href")&&!os()(yt,"data")&&(yt=ld(yt)),Ve==="style"&&(yt=Ou(yt)),{name:Ve,value:yt}})},oa=["script","style","meta","title","link","head"],ps=function(ot){return oa.indexOf(ot.toLowerCase())>-1};function fs(ot,St,yt){var Ve=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(so()(ot)&&Rs()(yt)&&Ps()(Ve)){var Qe=ot.erudaEvents=ot.erudaEvents||{};Qe[St]=Qe[St]||[],Qe[St].push({listener:yt,listenerStr:yt.toString(),useCapture:Ve})}}function ol(ot,St,yt){var Ve=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(so()(ot)&&Rs()(yt)&&Ps()(Ve)){var Qe=ot.erudaEvents;if(Qe&&Qe[St]){for(var gt=Qe[St],Nt=0,ln=gt.length;Nt<ln;Nt++)if(gt[Nt].listener===yt){gt.splice(Nt,1);break}gt.length===0&&delete Qe[St],Jo()(Qe).length===0&&delete ot.erudaEvents}}}var sd=function(){return lo()(window,"EventTarget.prototype")||window.Node.prototype},ld=function(ot){return'<a href="'.concat(ot,'" target="_blank">').concat(ot,"</a>")};function Hl(ot,St){if(jo()(ot))return ot;if(!$o()(ot))return"\u2012";var yt=Cr(ot);return gl()(yt)?ot:St==="position"?yt:yt===0?"\u2012":yt}var Ru=null,cd=[{name:"Border All",fn:function(){if(Ru)return qr.remove(Ru),void(Ru=null);Ru=qr("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var ot=new(Xn());ot.setQuery("timestamp",cu()()),window.location.replace(ot.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){var ot=prompt("Enter the text")||"";ta()(ot)!==""&&function(St){var yt=document.body,Ve=new RegExp(St,"ig");Wl(yt,function(Qe){var gt=Re()(Qe);if(gt.hasClass("eruda-search-highlight-block"))return document.createTextNode(gt.text())}),Wl(yt,function(Qe){if(Qe.nodeType===3){var gt=Qe.nodeValue;if((gt=gt.replace(Ve,function(ln){return'<span class="eruda-keyword">'.concat(ln,"</span>")}))!==Qe.nodeValue){var Nt=Re()(document.createElement("div"));return Nt.html(gt),Nt.addClass("eruda-search-highlight-block"),Nt.get(0)}}})}(ot)},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var ot=document.body;ot.contentEditable=ot.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var ot=document.body,St=document.documentElement,yt=Re()(ot);if(yt.data("scaled"))window.scrollTo(0,+yt.data("scaled")),yt.rmAttr("data-scaled"),yt.css("transform","none");else{var Ve=Math.max(ot.scrollHeight,ot.offsetHeight,St.clientHeight,St.scrollHeight,St.offsetHeight),Qe=Math.max(document.documentElement.clientHeight,window.innerHeight||0),gt=Qe/Ve;yt.css("transform","scale(".concat(gt,")")),yt.data("scaled",window.scrollY),window.scrollTo(0,Ve/2-Qe/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Fps Plugin",fn:function(){Ui("fps")},desc:"Display page fps"},{name:"Load Features Plugin",fn:function(){Ui("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){Ui("timing")},desc:"Show performance and resource timing"},{name:"Load Memory Plugin",fn:function(){Ui("memory")},desc:"Display memory"},{name:"Load Code Plugin",fn:function(){Ui("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){Ui("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){Ui("geolocation")},desc:"Test geolocation"},{name:"Load Dom Plugin",fn:function(){Ui("dom")},desc:"Navigate dom tree"},{name:"Load Orientation Plugin",fn:function(){Ui("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){Ui("touches")},desc:"Visualize screen touches"},{name:"Restore Settings",fn:function(){var ot=Eo("local"),St=JSON.parse(JSON.stringify(ot));mn()(St,function(yt,Ve){$o()(yt)&&os()(Ve,"eruda")&&ot.removeItem(Ve)}),window.location.reload()},desc:"Restore defaults and reload"}];function Wl(ot,St){var yt=ot.childNodes;if(!Ba(ot)){for(var Ve=0,Qe=yt.length;Ve<Qe;Ve++){var gt=Wl(yt[Ve],St);gt&&ot.replaceChild(gt,yt[Ve])}return St(ot)}}function Ui(ot){var St="eruda"+ls()(ot);if(!window[St]){var yt=location.protocol;os()(yt,"http")||(yt="http:"),Al()("".concat(yt,"//cdn.jsdelivr.net/npm/eruda-").concat(ot,"@").concat(Jd[ot]),function(Ve){if(!Ve||!window[St])return $i.error("Fail to load plugin "+ot);ai.emit(ai.ADD,window[St]),ai.emit(ai.SHOW,ot)})}}qr(V(6068),document.head);var Jd={fps:"2.0.0",features:"2.0.0",timing:"2.0.1",memory:"2.0.0",code:"2.0.0",benchmark:"2.0.0",geolocation:"2.0.0",dom:"2.0.0",orientation:"2.0.0",touches:"2.0.0"};function Qd(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var Li=function(ot){xe(yt,ot);var St=Qd(yt);function yt(){var Ve;return ce(this,yt),(Ve=St.call(this))._style=qr(V(8277)),Ve.name="snippets",Ve._snippets=[],Ve._tpl=V(1122),Ve}return Ee(yt,[{key:"init",value:function(Ve){pi(we(yt.prototype),"init",this).call(this,Ve),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),qr.remove(this._style)}},{key:"add",value:function(Ve,Qe,gt){return this._snippets.push({name:Ve,fn:Qe,desc:gt}),this._render(),this}},{key:"remove",value:function(Ve){for(var Qe=this._snippets,gt=0,Nt=Qe.length;gt<Nt;gt++)Qe[gt].name===Ve&&Qe.splice(gt,1);return this._render(),this}},{key:"run",value:function(Ve){for(var Qe=this._snippets,gt=0,Nt=Qe.length;gt<Nt;gt++)Qe[gt].name===Ve&&this._run(gt);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var Ve=this;this._$el.on("click",".eruda-run",function(){var Qe=Re()(this).data("idx");Ve._run(Qe)})}},{key:"_run",value:function(Ve){this._snippets[Ve].fn.call(null)}},{key:"_addDefSnippets",value:function(){var Ve=this;mn()(cd,function(Qe){Ve.add(Qe.name,Qe.fn,Qe.desc)})}},{key:"_render",value:function(){this._renderHtml(this._tpl({snippets:this._snippets}))}},{key:"_renderHtml",value:function(Ve){Ve!==this._lastHtml&&(this._lastHtml=Ve,this._$el.html(Ve))}}]),yt}(qi);function Ar(ot,St){var yt=typeof Symbol!="undefined"&&ot[Symbol.iterator]||ot["@@iterator"];if(!yt){if(Array.isArray(ot)||(yt=function(Cn,jn){if(!!Cn){if(typeof Cn=="string")return ja(Cn,jn);var ur=Object.prototype.toString.call(Cn).slice(8,-1);if(ur==="Object"&&Cn.constructor&&(ur=Cn.constructor.name),ur==="Map"||ur==="Set")return Array.from(Cn);if(ur==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ur))return ja(Cn,jn)}}(ot))||St&&ot&&typeof ot.length=="number"){yt&&(ot=yt);var Ve=0,Qe=function(){};return{s:Qe,n:function(){return Ve>=ot.length?{done:!0}:{done:!1,value:ot[Ve++]}},e:function(Cn){throw Cn},f:Qe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gt,Nt=!0,ln=!1;return{s:function(){yt=yt.call(ot)},n:function(){var Cn=yt.next();return Nt=Cn.done,Cn},e:function(Cn){ln=!0,gt=Cn},f:function(){try{Nt||yt.return==null||yt.return()}finally{if(ln)throw gt}}}}function ja(ot,St){(St==null||St>ot.length)&&(St=ot.length);for(var yt=0,Ve=new Array(St);yt<St;yt++)Ve[yt]=ot[yt];return Ve}function _h(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var ei=function(ot){xe(yt,ot);var St=_h(yt);function yt(){var Ve;return ce(this,yt),(Ve=St.call(this))._style=qr(V(8070)),Ve.name="resources",Ve._localStoreData=[],Ve._localStoreSearchKeyword="",Ve._hideErudaSetting=!1,Ve._sessionStoreData=[],Ve._sessionStoreSearchKeyword="",Ve._cookieData=[],Ve._cookieSearchKeyword="",Ve._scriptData=[],Ve._stylesheetData=[],Ve._iframeData=[],Ve._imageData=[],Ve._observeElement=!0,Ve._tpl=V(2875),Ve}return Ee(yt,[{key:"init",value:function(Ve,Qe){pi(we(yt.prototype),"init",this).call(this,Ve),this._container=Qe,this.refresh(),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()._render()}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),this._disableObserver(),qr.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var Ve=[];return Re()("script").each(function(){var Qe=this.src;Qe!==""&&Ve.push(Qe)}),Ve=na()(Ve),this._scriptData=Ve,this}},{key:"refreshStylesheet",value:function(){var Ve=[];return Re()("link").each(function(){this.rel==="stylesheet"&&Ve.push(this.href)}),Ve=na()(Ve),this._stylesheetData=Ve,this}},{key:"refreshIframe",value:function(){var Ve=[];return Re()("iframe").each(function(){var Qe=Re()(this).attr("src");Qe&&Ve.push(Qe)}),Ve=na()(Ve),this._iframeData=Ve,this}},{key:"refreshLocalStorage",value:function(){return this._refreshStorage("local"),this}},{key:"refreshSessionStorage",value:function(){return this._refreshStorage("session"),this}},{key:"_refreshStorage",value:function(Ve){var Qe=this,gt=Eo(Ve,!1);if(gt){var Nt=[];gt=JSON.parse(JSON.stringify(gt)),mn()(gt,function(ln,Cn){$o()(ln)&&(Qe._hideErudaSetting&&(os()(Cn,"eruda")||Cn==="active-eruda")||Nt.push({key:Cn,val:mh(ln,200)}))}),this["_"+Ve+"StoreData"]=Nt}}},{key:"refreshCookie",value:function(){var Ve=To.domain("Network").getCookies().cookies,Qe=Ma()(Ve,function(gt){return{key:gt.name,val:gt.value}});return this._cookieData=Qe,this}},{key:"refreshImage",value:function(){var Ve=[],Qe=this._performance=window.webkitPerformance||window.performance;return Qe&&Qe.getEntries?this._performance.getEntries().forEach(function(gt){(gt.initiatorType==="img"||Ua(gt.name))&&Ve.push(gt.name)}):Re()("img").each(function(){var gt=Re()(this),Nt=gt.attr("src");gt.data("exclude")!=="true"&&Ve.push(Nt)}),(Ve=na()(Ve)).sort(),this._imageData=Ve,this}},{key:"show",value:function(){return pi(we(yt.prototype),"show",this).call(this),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),pi(we(yt.prototype),"hide",this).call(this)}},{key:"_bindEvent",value:function(){var Ve=this,Qe=this,gt=this._$el,Nt=this._container;function ln(jn,ur){var rr=Nt.get("sources");if(rr)return rr.set(jn,ur),Nt.showTool("sources"),!0}function Cn(jn){return function(ur){if(Nt.get("sources")){ur.preventDefault();var rr=Re()(this).attr("href");jn!=="iframe"&&xo()(location.href,rr)?cn()({url:rr,success:function(Ci){ln(jn,Ci)},dataType:"raw"}):ln("iframe",rr)}}}gt.on("click",".eruda-refresh-local-storage",function(){Nt.notify("Refreshed"),Ve.refreshLocalStorage()._render()}).on("click",".eruda-refresh-session-storage",function(){Nt.notify("Refreshed"),Ve.refreshSessionStorage()._render()}).on("click",".eruda-refresh-cookie",function(){Nt.notify("Refreshed"),Ve.refreshCookie()._render()}).on("click",".eruda-refresh-script",function(){Nt.notify("Refreshed"),Ve.refreshScript()._render()}).on("click",".eruda-refresh-stylesheet",function(){Nt.notify("Refreshed"),Ve.refreshStylesheet()._render()}).on("click",".eruda-refresh-iframe",function(){Nt.notify("Refreshed"),Ve.refreshIframe()._render()}).on("click",".eruda-refresh-image",function(){Nt.notify("Refreshed"),Ve.refreshImage()._render()}).on("click",".eruda-search",function(){var jn=Re()(this).data("type"),ur=prompt("Filter");if(!No()(ur)){switch(ur=ta()(ur),jn){case"local":Qe._localStoreSearchKeyword=ur;break;case"session":Qe._sessionStoreSearchKeyword=ur;break;case"cookie":Qe._cookieSearchKeyword=ur}Qe._render()}}).on("click",".eruda-delete-storage",function(){var jn=Re()(this),ur=jn.data("key");jn.data("type")==="local"?(localStorage.removeItem(ur),Qe.refreshLocalStorage()._render()):(sessionStorage.removeItem(ur),Qe.refreshSessionStorage()._render())}).on("click",".eruda-delete-cookie",function(){var jn=Re()(this).data("key");To.domain("Network").deleteCookies({name:jn}),Qe.refreshCookie()._render()}).on("click",".eruda-clear-storage",function(){Re()(this).data("type")==="local"?(mn()(Qe._localStoreData,function(jn){return localStorage.removeItem(jn.key)}),Qe.refreshLocalStorage()._render()):(mn()(Qe._sessionStoreData,function(jn){return sessionStorage.removeItem(jn.key)}),Qe.refreshSessionStorage()._render())}).on("click",".eruda-clear-cookie",function(){To.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),Ve.refreshCookie()._render()}).on("click",".eruda-storage-val",function(){var jn=Re()(this),ur=jn.data("key"),rr=jn.data("type")==="local"?localStorage.getItem(ur):sessionStorage.getItem(ur);try{ln("object",JSON.parse(rr))}catch{ln("raw",rr)}}).on("click",".eruda-img-link",function(){ln("img",Re()(this).attr("src"))}).on("click",".eruda-css-link",Cn("css")).on("click",".eruda-js-link",Cn("js")).on("click",".eruda-iframe-link",Cn("iframe")),Ns().on("change",function(){return Ve._render()})}},{key:"_rmCfg",value:function(){var Ve=this.config,Qe=this._container.get("settings");Qe&&Qe.remove(Ve,"hideErudaSetting").remove(Ve,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var Ve=this,Qe=this.config=de.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});Qe.get("hideErudaSetting")&&(this._hideErudaSetting=!0),Qe.get("observeElement")||(this._observeElement=!1),Qe.on("change",function(gt,Nt){switch(gt){case"hideErudaSetting":return void(Ve._hideErudaSetting=Nt);case"observeElement":return Ve._observeElement=Nt,Nt?Ve._enableObserver():Ve._disableObserver()}}),this._container.get("settings").text("Resources").switch(Qe,"hideErudaSetting","Hide Eruda Setting").switch(Qe,"observeElement","Auto Refresh Elements").separator()}},{key:"_render",value:function(){var Ve=this._cookieData,Qe=this._scriptData,gt=this._stylesheetData,Nt=this._imageData,ln=this._localStoreSearchKeyword,Cn=this._sessionStoreSearchKeyword,jn=this._cookieSearchKeyword;function ur(rr,Ci){return(Ci=Uo()(Ci))?ua()(rr,function(Bi){var Ao=Bi.key,Ho=Bi.val;return vi()(Uo()(Ao),Ci)||vi()(Uo()(Ho),Ci)}):rr}this._renderHtml(this._tpl({localStoreData:ur(this._localStoreData,ln),localStoreSearchKeyword:ln,sessionStoreData:ur(this._sessionStoreData,Cn),sessionStoreSearchKeyword:Cn,cookieData:ur(Ve,jn),cookieSearchKeyword:jn,cookieState:Uc("cookie",Ve.length),scriptData:Qe,scriptState:Uc("script",Qe.length),stylesheetData:gt,stylesheetState:Uc("stylesheet",gt.length),iframeData:this._iframeData,imageData:Nt,imageState:Uc("image",Nt.length)}))}},{key:"_renderHtml",value:function(Ve){Ve!==this._lastHtml&&(this._lastHtml=Ve,this._$el.html(Ve))}},{key:"_initObserver",value:function(){var Ve=this;this._observer=new(xn())(function(Qe){var gt=!1;mn()(Qe,function(Nt){Ve._handleMutation(Nt)&&(gt=!0)}),gt&&Ve._render()})}},{key:"_handleMutation",value:function(Ve){var Qe=this;if(!Ba(Ve.target)){var gt=function(jn){var ur=function(rr){return rr.tagName?rr.tagName.toLowerCase():""}(jn);switch(ur){case"script":return Qe.refreshScript(),!0;case"img":return Qe.refreshImage(),!0;case"link":return Qe.refreshStylesheet(),!0}return!1};if(Ve.type==="attributes"){if(gt(Ve.target))return!0}else if(Ve.type==="childList"){if(gt(Ve.target))return!0;var Nt,ln=Js()(Ve.addedNodes),Cn=Ar(ln=Fo()(ln,Js()(Ve.removedNodes)));try{for(Cn.s();!(Nt=Cn.n()).done;)if(gt(Nt.value))return!0}catch(jn){Cn.e(jn)}finally{Cn.f()}}return!1}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}]),yt}(qi);function Uc(ot,St){if(St===0)return"";var yt=0,Ve=0;switch(ot){case"cookie":yt=30,Ve=60;break;case"script":yt=5,Ve=10;break;case"stylesheet":yt=4,Ve=8;break;case"image":yt=50,Ve=100}return St>=Ve?"danger":St>=yt?"warn":"ok"}var mh=function(ot,St){return ot.length<St?ot:ot.slice(0,St)+"..."},va=/\.(jpeg|jpg|gif|png)$/,Ua=function(ot){return va.test(ot)},Do=Er()(),qo=[{name:"Location",val:function(){return Ta()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(Qr()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(Do.name+" "+Do.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"About",val:'<a href="https://github.com/liriliri/eruda" target="_blank">Eruda v2.6.1</a>'}];function Yi(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var ud=function(ot){xe(yt,ot);var St=Yi(yt);function yt(){var Ve;return ce(this,yt),(Ve=St.call(this))._style=qr(V(9577)),Ve.name="info",Ve._tpl=V(2861),Ve._infos=[],Ve}return Ee(yt,[{key:"init",value:function(Ve){pi(we(yt.prototype),"init",this).call(this,Ve),this._addDefInfo()}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),qr.remove(this._style)}},{key:"add",value:function(Ve,Qe){var gt=this._infos,Nt=!1;return mn()(gt,function(ln){Ve===ln.name&&(ln.val=Qe,Nt=!0)}),Nt||gt.push({name:Ve,val:Qe}),this._render(),this}},{key:"get",value:function(Ve){var Qe,gt=this._infos;return wl()(Ve)?Ti()(gt):(mn()(gt,function(Nt){Ve===Nt.name&&(Qe=Nt.val)}),Qe)}},{key:"remove",value:function(Ve){for(var Qe=this._infos,gt=Qe.length-1;gt>=0;gt--)Qe[gt].name===Ve&&Qe.splice(gt,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var Ve=this;mn()(qo,function(Qe){return Ve.add(Qe.name,Qe.val)})}},{key:"_render",value:function(){var Ve=[];mn()(this._infos,function(Qe){var gt=Qe.name,Nt=Qe.val;Rs()(Nt)&&(Nt=Nt()),Ve.push({name:gt,val:Nt})}),this._renderHtml(this._tpl({infos:Ve}))}},{key:"_renderHtml",value:function(Ve){Ve!==this._lastHtml&&(this._lastHtml=Ve,this._$el.html(Ve))}}]),yt}(qi),xa=V(4030),hd=V.n(xa);function Zl(ot){var St=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var yt,Ve=we(ot);if(St){var Qe=we(this).constructor;yt=Reflect.construct(Ve,arguments,Qe)}else yt=Ve.apply(this,arguments);return ye(this,yt)}}var $u,dd=function(ot){xe(yt,ot);var St=Zl(yt);function yt(){var Ve;return ce(this,yt),(Ve=St.call(this))._style=qr(V(4214)),Ve.name="sources",Ve._showLineNum=!0,Ve._formatCode=!0,Ve._indentSize=4,Ve._loadTpl(),Ve}return Ee(yt,[{key:"init",value:function(Ve,Qe){pi(we(yt.prototype),"init",this).call(this,Ve),this._container=Qe,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){pi(we(yt.prototype),"destroy",this).call(this),qr.remove(this._style),this._rmCfg()}},{key:"set",value:function(Ve,Qe){if(Ve==="img"){this._isFetchingData=!0;var gt=new Image,Nt=this;return gt.onload=function(){Nt._isFetchingData=!1,Nt._data={type:"img",val:{width:this.width,height:this.height,src:Qe}},Nt._render()},gt.onerror=function(){Nt._isFetchingData=!1},void(gt.src=Qe)}return this._data={type:Ve,val:Qe},this._render(),this}},{key:"show",value:function(){return pi(we(yt.prototype),"show",this).call(this),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var Ve=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,cn()({url:location.href,success:function(Qe){return Ve._html=Qe},error:function(){return Ve._html="Sorry, unable to fetch source code:("},complete:function(){Ve._isGettingHtml=!1,Ve._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var Ve=this;this._container.on("showTool",function(Qe,gt){Qe!==Ve.name&&gt.name===Ve.name&&delete Ve._data})}},{key:"_loadTpl",value:function(){this._codeTpl=V(431),this._imgTpl=V(2229),this._objTpl=V(2944),this._rawTpl=V(8191),this._iframeTpl=V(6680)}},{key:"_rmCfg",value:function(){var Ve=this.config,Qe=this._container.get("settings");Qe&&Qe.remove(Ve,"showLineNum").remove(Ve,"formatCode").remove(Ve,"indentSize").remove("Sources")}},{key:"_initCfg",value:function(){var Ve=this,Qe=this.config=de.createCfg("sources",{showLineNum:!0,formatCode:!0,indentSize:4});Qe.get("showLineNum")||(this._showLineNum=!1),Qe.get("formatCode")||(this._formatCode=!1),this._indentSize=Qe.get("indentSize"),Qe.on("change",function(gt,Nt){switch(gt){case"showLineNum":return void(Ve._showLineNum=Nt);case"formatCode":return void(Ve._formatCode=Nt);case"indentSize":return void(Ve._indentSize=+Nt)}}),this._container.get("settings").text("Sources").switch(Qe,"showLineNum","Show Line Numbers").switch(Qe,"formatCode","Beautify Code").select(Qe,"indentSize","Indent Size",["2","4"]).separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){this._renderHtml(this._imgTpl(this._data.val))}},{key:"_renderCode",value:function(){var Ve=this._data,Qe=this._indentSize,gt=Ve.val,Nt=Ve.val.length;if(Nt<gh&&this._formatCode){switch(Ve.type){case"html":gt=ql().html(gt,{unformatted:[],indent_size:Qe});break;case"css":gt=ql().css(gt,{indent_size:Qe});break;case"js":gt=ql()(gt,{indent_size:Qe})}var ln=qr.getCurTheme();gt=Zi()(gt,Ve.type,{keyword:"color:".concat(ln.keywordColor),number:"color:".concat(ln.numberColor),operator:"color:".concat(ln.operatorColor),comment:"color:".concat(ln.commentColor),string:"color:".concat(ln.stringColor)})}else gt=Ta()(gt);Nt<pd&&this._showLineNum&&(gt=gt.split(`
`).map(function(Cn,jn){return ta()(Cn)===""&&(Cn="&nbsp;"),{idx:jn+1,val:Cn}})),this._renderHtml(this._codeTpl({code:gt,showLineNum:Nt<pd&&this._showLineNum}))}},{key:"_renderObj",value:function(){this._renderHtml(this._objTpl(),!1);var Ve=this._data.val;try{$o()(Ve)&&(Ve=JSON.parse(Ve))}catch{}new(hd())(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0}).set(Ve)}},{key:"_renderRaw",value:function(){this._renderHtml(this._rawTpl({val:this._data.val}))}},{key:"_renderIframe",value:function(){this._renderHtml(this._iframeTpl({src:this._data.val}))}},{key:"_renderHtml",value:function(Ve){var Qe=this,gt=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];gt&&Ve===this._lastHtml||(this._lastHtml=Ve,this._$el.html(Ve),setTimeout(function(){return Qe._$el.get(0).scrollTop=0},0))}}]),yt}(qi),gh=1e5,pd=4e5,yh={init:function(){var ot=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},St=ot.container,yt=ot.tool,Ve=ot.autoScale,Qe=Ve===void 0||Ve,gt=ot.useShadowDom,Nt=gt===void 0||gt,ln=ot.defaults,Cn=ln===void 0?{}:ln;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(St,Nt),this._initStyle(),this._initDevTools(Cn),this._initEntryBtn(),this._initSettings(),this._initTools(yt),this._registerListener(),Qe&&this._autoScale())},_isInit:!1,version:"2.6.1",util:he,chobitsu:To,Tool:qi,Console:La,Elements:od,Network:Qh,Sources:dd,Resources:ei,Info:ud,Snippets:Li,Settings:de,get:function(ot){if(this._checkInit()){if(ot==="entryBtn")return this._entryBtn;var St=this._devTools;return ot?St.get(ot):St}},add:function(ot){if(this._checkInit())return Rs()(ot)&&(ot=ot(this)),this._devTools.add(ot),this},remove:function(ot){return this._devTools.remove(ot),this},show:function(ot){if(this._checkInit()){var St=this._devTools;return ot?St.showTool(ot):St.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),this._$el.remove(),qr.clear(),this._isInit=!1},scale:function(ot){return jo()(ot)?(this._scale=ot,ai.emit(ai.SCALE,ot),this):this._scale},position:function(ot){var St=this._entryBtn;return zs()(ot)?(St.setPos(ot),this):St.getPos()},_autoScale:function(){Sa()()&&this.scale(1/Pc()())},_registerListener:function(){var ot=this;this._addListener=function(){return ot.add.apply(ot,arguments)},this._showListener=function(){return ot.show.apply(ot,arguments)},ai.on(ai.ADD,this._addListener),ai.on(ai.SHOW,this._showListener),ai.on(ai.SCALE,qr.setScale)},_unregisterListener:function(){ai.off(ai.ADD,this._addListener),ai.off(ai.SHOW,this._showListener),ai.off(ai.SCALE,qr.setScale)},_checkInit:function(){return this._isInit||$i.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(ot,St){var yt;ot||(ot=document.createElement("div"),document.documentElement.appendChild(ot),ot.style.all="initial"),St&&(ot.attachShadow?yt=ot.attachShadow({mode:"open"}):ot.createShadowRoot&&(yt=ot.createShadowRoot()),yt&&(qr.container=document.head,qr(V(8998)+V(276)+V(8418)+V(5141)),ot=document.createElement("div"),yt.appendChild(ot),this._shadowRoot=yt)),Object.assign(ot,{id:"eruda",className:"eruda-container",contentEditable:!1}),Er()().name==="ios"&&ot.setAttribute("ontouchstart",""),this._$el=Re()(ot)},_initDevTools:function(ot){this._devTools=new eo(this._$el,{defaults:ot})},_initStyle:function(){var ot="eruda-style-container",St=this._$el;this._shadowRoot?(qr.container=this._shadowRoot,qr(":host { all: initial }")):(St.append('<div class="'.concat(ot,'"></div>')),qr.container=St.find(".".concat(ot)).get(0)),qr(V(3146)+V(8418)+V(276)+V(5674)+V(2456)+V(5141)+V(6802)+V(8998))},_initEntryBtn:function(){var ot=this;this._entryBtn=new fi(this._$el),this._entryBtn.on("click",function(){return ot._devTools.toggle()})},_initSettings:function(){var ot=this._devTools,St=new de;ot.add(St),this._entryBtn.initCfg(St),ot.initCfg(St)},_initTools:function(){var ot=this,St=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];St=Js()(St);var yt=this._devTools;St.forEach(function(Ve){var Qe=ot[ls()(Ve)];try{Qe&&yt.add(new Qe)}catch(gt){Qa()(function(){$i.error("Something wrong when initializing tool ".concat(Ve,":"),gt.message)})}}),yt.showTool(St[0]||"settings")}};$u=he,Object.assign($u,{beautify:ql(),evalCss:qr,isErudaEl:Ba})},2234:function(G){G.exports={background:"b","background-image":"bi",border:"bo","border-bottom":"bb","border-collapse":"bc","border-left-color":"blc","border-right":"br","border-radius":"bra","border-top":"bt","border-top-color":"btc","box-shadow":"bs","box-sizing":"bsi",clear:"cl",color:"c",content:"co",cursor:"cu",display:"d",flex:"fl","flex-shrink":"fsh",float:"f","font-family":"ff","font-size":"fs","font-weight":"fw",height:"h",left:"l","line-height":"lh",margin:"m","margin-bottom":"mb","margin-left":"ml","margin-top":"mt","min-height":"mh",outline:"ou",overflow:"o","overflow-x":"ox","overflow-y":"oy",padding:"p","padding-bottom":"pb","padding-left":"pl","padding-top":"pt","pointer-events":"pe",position:"po","text-align":"ta","text-transform":"tt",top:"t",transition:"tr","user-select":"us","vertical-aligin":"va",visibility:"v",width:"w","will-change":"wc","white-space":"ws","-webkit-overflow-scrolling":"wos","z-index":"z"}},9871:function(G,q,V){var he=V(6834);he.registerHelper("repeat",function(){var ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,te=arguments.length>1?arguments[1]:void 0;if(ce<1)return te.inverse(this);var Ee=1,j=0,xe=ce*Ee+j,re=j,ge="";do{var ye={index:re,count:ce,start:j,step:Ee,first:re===j,last:re>=xe-Ee},we=[re,ye];ge+=te.fn(this,{data:ye,blockParams:we}),re+=ye.step}while(re<xe);return ge}),he.registerHelper("class",function(ce){var te=ce.split(/\s+/);return te=te.map(function(Ee){return"eruda-".concat(Ee)}),'class="'.concat(te.join(" "),'"')}),he.registerHelper("concat",function(){for(var ce="",te=0,Ee=arguments.length;te<Ee;te++){var j=arguments[te];typeof j=="string"&&(ce+=j)}return ce}),G.exports=he},9143:function(G,q,V){var he=this&&this.__awaiter||function(ke,Se,Pe,Re){return new(Pe||(Pe=Promise))(function(Ne,ze){function Be(qe){try{Xe(Re.next(qe))}catch(Je){ze(Je)}}function Ze(qe){try{Xe(Re.throw(qe))}catch(Je){ze(Je)}}function Xe(qe){var Je;qe.done?Ne(qe.value):(Je=qe.value,Je instanceof Pe?Je:new Pe(function(dt){dt(Je)})).then(Be,Ze)}Xe((Re=Re.apply(ke,Se||[])).next())})},ce=this&&this.__generator||function(ke,Se){var Pe,Re,Ne,ze,Be={label:0,sent:function(){if(1&Ne[0])throw Ne[1];return Ne[1]},trys:[],ops:[]};return ze={next:Ze(0),throw:Ze(1),return:Ze(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function Ze(Xe){return function(qe){return function(Je){if(Pe)throw new TypeError("Generator is already executing.");for(;Be;)try{if(Pe=1,Re&&(Ne=2&Je[0]?Re.return:Je[0]?Re.throw||((Ne=Re.return)&&Ne.call(Re),0):Re.next)&&!(Ne=Ne.call(Re,Je[1])).done)return Ne;switch(Re=0,Ne&&(Je=[2&Je[0],Ne.value]),Je[0]){case 0:case 1:Ne=Je;break;case 4:return Be.label++,{value:Je[1],done:!1};case 5:Be.label++,Re=Je[1],Je=[0];continue;case 7:Je=Be.ops.pop(),Be.trys.pop();continue;default:if(Ne=Be.trys,!((Ne=Ne.length>0&&Ne[Ne.length-1])||Je[0]!==6&&Je[0]!==2)){Be=0;continue}if(Je[0]===3&&(!Ne||Je[1]>Ne[0]&&Je[1]<Ne[3])){Be.label=Je[1];break}if(Je[0]===6&&Be.label<Ne[1]){Be.label=Ne[1],Ne=Je;break}if(Ne&&Be.label<Ne[2]){Be.label=Ne[2],Be.ops.push(Je);break}Ne[2]&&Be.ops.pop(),Be.trys.pop();continue}Je=Se.call(ke,Be)}catch(dt){Je=[6,dt],Re=0}finally{Pe=Ne=0}if(5&Je[0])throw Je[1];return{value:Je[0]?Je[1]:void 0,done:!0}}([Xe,qe])}}},te=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(3276)),j=te(V(1214)),xe=te(V(5936)),re=te(V(3783)),ge=te(V(1443)),ye=V(316),we=function(){function ke(){var Se=this;this.resolves=new Map,this.domains=new Map,this.onMessage=j.default,Ee.default.on("message",function(Pe){var Re=JSON.parse(Pe),Ne=Se.resolves.get(Re.id);if(Ne&&Ne(Re.result),!Re.id){var ze=Re.method.split("."),Be=ze[0],Ze=ze[1],Xe=Se.domains.get(Be);Xe&&Xe.emit(Ze,Re.params)}Se.onMessage(Pe)})}return ke.prototype.domain=function(Se){return this.domains.get(Se)},ke.prototype.setOnMessage=function(Se){this.onMessage=Se},ke.prototype.sendMessage=function(Se,Pe){var Re=this;Pe===void 0&&(Pe={});var Ne=xe.default();return this.sendRawMessage(JSON.stringify({id:Ne,method:Se,params:Pe})),new Promise(function(ze){Re.resolves.set(Ne,ze)})},ke.prototype.sendRawMessage=function(Se){return he(this,void 0,void 0,function(){var Pe,Re,Ne,ze,Be,Ze,Xe;return ce(this,function(qe){switch(qe.label){case 0:Pe=JSON.parse(Se),Re=Pe.method,Ne=Pe.params,ze=Pe.id,Be={id:ze},qe.label=1;case 1:return qe.trys.push([1,3,,4]),Ze=Be,[4,this.callMethod(Re,Ne)];case 2:return Ze.result=qe.sent(),[3,4];case 3:return(Xe=qe.sent())instanceof ye.ErrorWithCode?Be.error={message:Xe.message,code:Xe.code}:Xe instanceof Error&&(Be.error={message:Xe.message}),[3,4];case 4:return Ee.default.emit("message",JSON.stringify(Be)),[2]}})})},ke.prototype.register=function(Se,Pe){var Re=this.domains,Ne=Re.get(Se);Ne||(Ne={},ge.default.mixin(Ne)),re.default(Pe,function(ze,Be){Ne[Be]=ze}),Re.set(Se,Ne)},ke.prototype.callMethod=function(Se,Pe){return he(this,void 0,void 0,function(){var Re,Ne,ze,Be;return ce(this,function(Ze){if(Re=Se.split("."),Ne=Re[0],ze=Re[1],(Be=this.domain(Ne))&&Be[ze])return[2,Be[ze](Pe)||{}];throw Error(Se+" unimplemented")})})},ke}();q.default=we},7935:function(G,q,V){var he=this&&this.__createBinding||(Object.create?function(rt,ht,st,pt){pt===void 0&&(pt=st),Object.defineProperty(rt,pt,{enumerable:!0,get:function(){return ht[st]}})}:function(rt,ht,st,pt){pt===void 0&&(pt=st),rt[pt]=ht[st]}),ce=this&&this.__setModuleDefault||(Object.create?function(rt,ht){Object.defineProperty(rt,"default",{enumerable:!0,value:ht})}:function(rt,ht){rt.default=ht}),te=this&&this.__importStar||function(rt){if(rt&&rt.__esModule)return rt;var ht={};if(rt!=null)for(var st in rt)st!=="default"&&Object.hasOwnProperty.call(rt,st)&&he(ht,rt,st);return ce(ht,rt),ht},Ee=this&&this.__importDefault||function(rt){return rt&&rt.__esModule?rt:{default:rt}};Object.defineProperty(q,"__esModule",{value:!0}),q.getDOMNodeId=q.setOuterHTML=q.setNodeValue=q.setInspectedNode=q.setAttributeValue=q.setAttributesAsText=q.resolveNode=q.requestNode=q.requestChildNodes=q.removeNode=q.pushNodesByBackendIdsToFrontend=q.discardSearchResults=q.pushNodesToFrontend=q.getSearchResults=q.performSearch=q.moveTo=q.getOuterHTML=q.getDocument=q.enable=q.copyTo=q.collectClassNamesFromSubtree=void 0;var j=Ee(V(3276)),xe=te(V(2049)),re=V(2049),ge=te(V(7923)),ye=Ee(V(6126)),we=Ee(V(1512)),ke=Ee(V(6156)),Se=Ee(V(8887)),Pe=Ee(V(7483)),Re=Ee(V(2461)),Ne=Ee(V(42)),ze=Ee(V(6341)),Be=Ee(V(3063)),Ze=Ee(V(3783)),Xe=Ee(V(1352)),qe=Ee(V(8933)),Je=Ee(V(8099)),dt=V(5286),Ct=V(316);q.collectClassNamesFromSubtree=function(rt){var ht=re.getNode(rt.nodeId),st=[];return tt(ht,function(pt){if(pt.nodeType===1){var vt=pt.getAttribute("class");if(vt)for(var ut=0,Ut=vt.split(/\s+/);ut<Ut.length;ut++){var at=Ut[ut];st.push(at)}}}),{classNames:Ne.default(st)}},q.copyTo=function(rt){var ht=rt.nodeId,st=rt.targetNodeId,pt=re.getNode(ht),vt=re.getNode(st),ut=pt.cloneNode(!0);vt.appendChild(ut)},q.enable=function(){ye.default.observe(),xe.clear()},q.getDocument=function(){return{root:xe.wrap(document,{depth:2})}},q.getOuterHTML=function(rt){return{outerHTML:re.getNode(rt.nodeId).outerHTML}},q.moveTo=function(rt){var ht=rt.nodeId,st=rt.targetNodeId,pt=re.getNode(ht);re.getNode(st).appendChild(pt)};var bt=new Map;function xt(rt){for(var ht=[rt],st=rt.parentNode;st&&(ht.push(st),!(vt=re.getNodeId(st)));)st=st.parentNode;for(;ht.length;){var pt=ht.pop(),vt=re.getNodeId(pt);j.default.trigger("DOM.setChildNodes",{parentId:vt,nodes:xe.getChildNodes(pt,1)})}return re.getNodeId(rt)}q.performSearch=function(rt){var ht=Be.default(rt.query),st=[];try{st=Je.default(st,Xe.default(document.querySelectorAll(ht)))}catch{}try{st=Je.default(st,qe.default(ht))}catch{}tt(document,function(vt){var ut=vt.nodeType;if(ut===1){var Ut=vt.localName;if(ze.default("<"+Ut+" ",ht)||ze.default("</"+Ut+">",ht))return void st.push(vt);var at=[];Ze.default(vt.attributes,function(Mn){var rn=Mn.name,on=Mn.value;return at.push(rn,on)});for(var zt=0,sn=at.length;zt<sn;zt++)if(ze.default(Be.default(at[zt]),ht)){st.push(vt);break}}else ut===3&&ze.default(Be.default(vt.nodeValue),ht)&&st.push(vt)});var pt=Ct.createId();return bt.set(pt,st),{searchId:pt,resultCount:st.length}},q.getSearchResults=function(rt){var ht=rt.searchId,st=rt.fromIndex,pt=rt.toIndex,vt=bt.get(ht).slice(st,pt);return{nodeIds:Re.default(vt,function(ut){var Ut=re.getNodeId(ut);return Ut||xt(ut)})}},q.pushNodesToFrontend=xt,q.discardSearchResults=function(rt){bt.delete(rt.searchId)},q.pushNodesByBackendIdsToFrontend=function(rt){return{nodeIds:rt.backendNodeIds}},q.removeNode=function(rt){var ht=re.getNode(rt.nodeId);we.default(ht).remove()},q.requestChildNodes=function(rt){var ht=rt.nodeId,st=rt.depth,pt=st===void 0?1:st,vt=re.getNode(ht);j.default.trigger("DOM.setChildNodes",{parentId:ht,nodes:xe.getChildNodes(vt,pt)})},q.requestNode=function(rt){var ht=ge.getObj(rt.objectId);return{nodeId:re.getNodeId(ht)}},q.resolveNode=function(rt){var ht=re.getNode(rt.nodeId);return{object:ge.wrap(ht)}},q.setAttributesAsText=function(rt){var ht,st=rt.name,pt=rt.text,vt=rt.nodeId,ut=re.getNode(vt);st&&ut.removeAttribute(st),we.default(ut).attr((ht="<div "+(ht=pt)+"></div>",Pe.default.parse(ht)[0].attrs))},q.setAttributeValue=function(rt){var ht=rt.nodeId,st=rt.name,pt=rt.value;re.getNode(ht).setAttribute(st,pt)};var nt=[];function tt(rt,ht){for(var st=xe.filterNodes(rt.childNodes),pt=0,vt=st.length;pt<vt;pt++){var ut=st[pt];ht(ut),tt(ut,ht)}}q.setInspectedNode=function(rt){var ht=re.getNode(rt.nodeId);nt.unshift(ht),nt.length>5&&nt.pop();for(var st=0;st<5;st++)dt.setGlobal("$"+st,nt[st])},q.setNodeValue=function(rt){var ht=rt.nodeId,st=rt.value;re.getNode(ht).nodeValue=st},q.setOuterHTML=function(rt){var ht=rt.nodeId,st=rt.outerHTML;re.getNode(ht).outerHTML=st},q.getDOMNodeId=function(rt){var ht=rt.node;return{nodeId:xe.getOrCreateNodeId(ht)}},ye.default.on("attributes",function(rt,ht){var st=re.getNodeId(rt);if(st){var pt=rt.getAttribute(ht);ke.default(pt)?j.default.trigger("DOM.attributeRemoved",{nodeId:st,name:ht}):j.default.trigger("DOM.attributeModified",{nodeId:st,name:ht,value:pt})}}),ye.default.on("childList",function(rt,ht,st){var pt=re.getNodeId(rt);if(pt){if(ht=xe.filterNodes(ht),st=xe.filterNodes(st),!Se.default(ht)){Mn();for(var vt=0,ut=ht.length;vt<ut;vt++){var Ut=ht[vt],at=xe.getPreviousNode(Ut),zt=at?re.getNodeId(at):0,sn={node:xe.wrap(Ut,{depth:0}),parentNodeId:pt,previousNodeId:zt};j.default.trigger("DOM.childNodeInserted",sn)}}if(!Se.default(st))for(vt=0,ut=st.length;vt<ut;vt++){if(Ut=st[vt],!re.getNodeId(Ut)){Mn();break}j.default.trigger("DOM.childNodeRemoved",{nodeId:re.getNodeId(Ut),parentNodeId:pt})}}function Mn(){j.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:xe.wrap(rt,{depth:0}).childNodeCount,nodeId:pt})}}),ye.default.on("characterData",function(rt){var ht=re.getNodeId(rt);ht&&j.default.trigger("DOM.characterDataModified",{characterData:rt.nodeValue,nodeId:ht})})},2139:function(G,q,V){var he=this&&this.__spreadArrays||function(){for(var Re=0,Ne=0,ze=arguments.length;Ne<ze;Ne++)Re+=arguments[Ne].length;var Be=Array(Re),Ze=0;for(Ne=0;Ne<ze;Ne++)for(var Xe=arguments[Ne],qe=0,Je=Xe.length;qe<Je;qe++,Ze++)Be[Ze]=Xe[qe];return Be},ce=this&&this.__importDefault||function(Re){return Re&&Re.__esModule?Re:{default:Re}};Object.defineProperty(q,"__esModule",{value:!0}),q.getResponseBody=q.enable=q.getCookies=q.deleteCookies=void 0;var te=ce(V(4331)),Ee=ce(V(3783)),j=ce(V(1420)),xe=ce(V(5031)),re=ce(V(8763)),ge=ce(V(8740)),ye=ce(V(6341)),we=V(2636),ke=ce(V(3276));q.deleteCookies=function(Re){xe.default(Re.name)},q.getCookies=function(){var Re=[],Ne=document.cookie;return te.default(Ne)!==""&&Ee.default(Ne.split(";"),function(ze){ze=ze.split("=");var Be=te.default(ze.shift());ze=j.default(ze.join("=")),Re.push({name:Be,value:ze})}),{cookies:Re}};var Se=new Map;function Pe(Re){return!ye.default(Re,"__chobitsu-hide__=true")}q.enable=re.default(function(){var Re=window.XMLHttpRequest.prototype,Ne=Re.send,ze=Re.open,Be=Re.setRequestHeader;Re.open=function(qe,Je){if(!Pe(Je))return ze.apply(this,arguments);var dt=this,Ct=dt.chobitsuRequest=new we.XhrRequest(dt,qe,Je);Ct.on("send",function(bt,xt){var nt={method:xt.method,url:xt.url,headers:xt.reqHeaders};xt.data&&(nt.postData=xt.data),ke.default.trigger("Network.requestWillBeSent",{requestId:bt,type:"XHR",request:nt,timestamp:xt.time/1e3})}),Ct.on("headersReceived",function(bt,xt){ke.default.trigger("Network.responseReceivedExtraInfo",{requestId:bt,blockedCookies:[],headers:xt.resHeaders})}),Ct.on("done",function(bt,xt){ke.default.trigger("Network.responseReceived",{requestId:bt,type:"XHR",response:{status:xt.status},timestamp:xt.time/1e3}),Se.set(bt,xt.resTxt),ke.default.trigger("Network.loadingFinished",{requestId:bt,encodedDataLength:xt.size,timestamp:xt.time/1e3})}),dt.addEventListener("readystatechange",function(){switch(dt.readyState){case 2:return Ct.handleHeadersReceived();case 4:return Ct.handleDone()}}),ze.apply(this,arguments)},Re.send=function(qe){var Je=this.chobitsuRequest;Je&&Je.handleSend(qe),Ne.apply(this,arguments)},Re.setRequestHeader=function(qe,Je){var dt=this.chobitsuRequest;dt&&dt.handleReqHeadersSet(qe,Je),Be.apply(this,arguments)};var Ze=!1;if(window.fetch&&(Ze=ge.default(window.fetch)),!Ze&&navigator.serviceWorker&&(Ze=!0),Ze){var Xe=window.fetch;window.fetch=function(){for(var qe=[],Je=0;Je<arguments.length;Je++)qe[Je]=arguments[Je];var dt=new(we.FetchRequest.bind.apply(we.FetchRequest,he([void 0],qe)));dt.on("send",function(bt,xt){var nt={method:xt.method,url:xt.url,headers:xt.reqHeaders};xt.data&&(nt.postData=xt.data),ke.default.trigger("Network.requestWillBeSent",{requestId:bt,type:"Fetch",request:nt,timestamp:xt.time/1e3})}),dt.on("done",function(bt,xt){ke.default.trigger("Network.responseReceived",{requestId:bt,type:"Fetch",response:{status:xt.status,headers:xt.resHeaders},timestamp:xt.time/1e3}),Se.set(bt,xt.resTxt),ke.default.trigger("Network.loadingFinished",{requestId:bt,encodedDataLength:xt.size,timestamp:xt.time/1e3})});var Ct=Xe.apply(void 0,qe);return dt.send(Ct),Ct}}}),q.getResponseBody=function(Re){return{base64Encoded:!1,body:Se.get(Re.requestId)}}},8689:function(G,q,V){var he=this&&this.__createBinding||(Object.create?function(ut,Ut,at,zt){zt===void 0&&(zt=at),Object.defineProperty(ut,zt,{enumerable:!0,get:function(){return Ut[at]}})}:function(ut,Ut,at,zt){zt===void 0&&(zt=at),ut[zt]=Ut[at]}),ce=this&&this.__setModuleDefault||(Object.create?function(ut,Ut){Object.defineProperty(ut,"default",{enumerable:!0,value:Ut})}:function(ut,Ut){ut.default=Ut}),te=this&&this.__importStar||function(ut){if(ut&&ut.__esModule)return ut;var Ut={};if(ut!=null)for(var at in ut)at!=="default"&&Object.hasOwnProperty.call(ut,at)&&he(Ut,ut,at);return ce(Ut,ut),Ut},Ee=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(q,"__esModule",{value:!0}),q.setInspectMode=q.setShowViewportSizeOnResize=q.hideHighlight=q.highlightNode=q.disable=q.enable=void 0;var j,xe,re=V(2049),ge=V(7935),ye=Ee(V(1512)),we=Ee(V(8613)),ke=Ee(V(9956)),Se=Ee(V(642)),Pe=Ee(V(4193)),Re=Ee(V(3276)),Ne=Ee(V(7715)),ze=te(V(7923)),Be=!1,Ze=!1;function Xe(ut){var Ut,at=ut.nodeId,zt=ut.highlightConfig,sn=ut.objectId;at&&(Ut=re.getNode(at)),sn&&(Ut=ze.getObj(sn)),Ut.nodeType!==1&&Ut.nodeType!==3||(Pe.default(zt,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),j.highlight(Ut,zt))}function qe(){j.hide()}q.enable=function(){if(!Ze){Be||(Se.default(V(9410)),Be=!0);var ut=we.default("div",{class:"__chobitsu-hide__"});xe=ye.default(ut),document.documentElement.appendChild(ut),j=new Ne.default(ut),window.addEventListener("resize",st),Ze=!0}},q.disable=function(){j.destroy(),xe.remove(),window.removeEventListener("resize",st),Ze=!1},q.highlightNode=Xe,q.hideHighlight=qe;var Je=!1;q.setShowViewportSizeOnResize=function(ut){Je=ut.show};var dt={},Ct="none";function bt(ut){if(ke.default()){var Ut=ut.touches[0]||ut.changedTouches[0];return document.elementFromPoint(Ut.pageX,Ut.pageY)}return document.elementFromPoint(ut.clientX,ut.clientY)}q.setInspectMode=function(ut){dt=ut.highlightConfig,Ct=ut.mode};var xt=-1;function nt(ut){if(Ct!=="none"){var Ut=bt(ut);if(Ut&&re.isValidNode(Ut)){var at=re.getNodeId(Ut);at||(at=ge.pushNodesToFrontend(Ut)),Xe({nodeId:at,highlightConfig:dt}),at!==xt&&(Re.default.trigger("Overlay.nodeHighlightRequested",{nodeId:at}),xt=at)}}}function tt(ut){if(Ct!=="none"){ut.preventDefault(),ut.stopImmediatePropagation();var Ut=bt(ut);Re.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:re.getNodeId(Ut)}),xt=-1,qe()}}function rt(ut,Ut){document.documentElement.addEventListener(ut,Ut,!0)}ke.default()?(rt("touchstart",nt),rt("touchmove",nt),rt("touchend",tt)):(rt("mousemove",nt),rt("mouseout",function(){Ct!=="none"&&qe()}),rt("click",tt));var ht=we.default("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function st(){Je&&(vt.text(window.innerWidth+"px \xD7 "+window.innerHeight+"px"),pt?clearTimeout(pt):document.documentElement.appendChild(ht),pt=setTimeout(function(){vt.remove(),pt=null},1e3))}var pt,vt=ye.default(ht)},9119:function(G,q,V){var he=this&&this.__importDefault||function(ge){return ge&&ge.__esModule?ge:{default:ge}};Object.defineProperty(q,"__esModule",{value:!0}),q.getTrustTokens=q.clearDataForOrigin=q.getUsageAndQuota=void 0;var ce=he(V(3783)),te=he(V(5031)),Ee=he(V(615)),j=V(2139),xe=Ee.default("local"),re=Ee.default("session");q.getUsageAndQuota=function(){return{quota:0,usage:0,usageBreakdown:[]}},q.clearDataForOrigin=function(ge){var ye=ge.storageTypes.split(",");ce.default(ye,function(we){if(we==="cookies"){var ke=j.getCookies().cookies;ce.default(ke,function(Se){var Pe=Se.name;return te.default(Pe)})}else we==="local_storage"&&(xe.clear(),re.clear())})},q.getTrustTokens=function(){return{tokens:[]}}},3276:function(G,q,V){var he,ce=this&&this.__extends||(he=function(j,xe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,ge){re.__proto__=ge}||function(re,ge){for(var ye in ge)ge.hasOwnProperty(ye)&&(re[ye]=ge[ye])},he(j,xe)},function(j,xe){function re(){this.constructor=j}he(j,xe),j.prototype=xe===null?Object.create(xe):(re.prototype=xe.prototype,new re)}),te=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=function(j){function xe(){return j!==null&&j.apply(this,arguments)||this}return ce(xe,j),xe.prototype.trigger=function(re,ge){this.emit("message",JSON.stringify({method:re,params:ge}))},xe}(te(V(1443)).default);q.default=new Ee},5286:function(G,q,V){var he=this&&this.__importDefault||function(ye){return ye&&ye.__esModule?ye:{default:ye}};Object.defineProperty(q,"__esModule",{value:!0}),q.setGlobal=void 0;var ce=he(V(6768)),te=he(V(2327)),Ee=he(V(1352)),j=he(V(2533)),xe=he(V(8933)),re=he(V(3783)),ge={copy:function(ye){ce.default(ye)||(ye=JSON.stringify(ye,null,2)),te.default(ye)},$:function(ye){return document.querySelector(ye)},$$:function(ye){return Ee.default(document.querySelectorAll(ye))},$x:function(ye){return xe.default(ye)},keys:j.default};q.setGlobal=function(ye,we){ge[ye]=we},q.default=function(ye){var we;re.default(ge,function(ke,Se){window[Se]||(window[Se]=ke)});try{we=eval.call(window,"("+ye+")")}catch{we=eval.call(window,ye)}return re.default(ge,function(ke,Se){window[Se]&&window[Se]===ke&&delete window[Se]}),we}},6126:function(G,q,V){var he,ce=this&&this.__extends||(he=function(re,ge){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,we){ye.__proto__=we}||function(ye,we){for(var ke in we)we.hasOwnProperty(ke)&&(ye[ke]=we[ke])},he(re,ge)},function(re,ge){function ye(){this.constructor=re}he(re,ge),re.prototype=ge===null?Object.create(ge):(ye.prototype=ge.prototype,new ye)}),te=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(3783)),xe=function(re){function ge(){var ye=re.call(this)||this;return ye.observer=new MutationObserver(function(we){j.default(we,function(ke){return ye.handleMutation(ke)})}),ye}return ce(ge,re),ge.prototype.observe=function(){var ye=this.observer;ye.disconnect(),ye.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},ge.prototype.handleMutation=function(ye){ye.type==="attributes"?this.emit("attributes",ye.target,ye.attributeName):ye.type==="childList"?this.emit("childList",ye.target,ye.addedNodes,ye.removedNodes):ye.type==="characterData"&&this.emit("characterData",ye.target)},ge}(Ee.default);q.default=new xe},2049:function(G,q,V){var he=this&&this.__importDefault||function(Be){return Be&&Be.__esModule?Be:{default:Be}};Object.defineProperty(q,"__esModule",{value:!0}),q.getNode=q.isValidNode=q.filterNodes=q.getPreviousNode=q.getChildNodes=q.wrap=q.getNodeId=q.clear=q.getOrCreateNodeId=void 0;var ce=he(V(2461)),te=he(V(5972)),Ee=he(V(3783)),j=he(V(4331)),xe=he(V(6341)),re=he(V(6329)),ge=V(316),ye=new Map,we=new Map,ke=1;function Se(Be){var Ze=we.get(Be);return Ze||(Ze=ke++,we.set(Be,Ze),ye.set(Ze,Be),Ze)}function Pe(Be,Ze){var Xe=(Ze===void 0?{}:Ze).depth,qe=Xe===void 0?1:Xe,Je=Se(Be),dt={nodeName:Be.nodeName,nodeType:Be.nodeType,localName:Be.localName||"",nodeValue:Be.nodeValue||"",nodeId:Je,backendNodeId:Je};if(Be.parentNode&&(dt.parentId=Se(Be.parentNode)),Be.nodeType===10)return re.default(dt,{publicId:"",systemId:""});if(Be.attributes){var Ct=[];Ee.default(Be.attributes,function(nt){var tt=nt.name,rt=nt.value;return Ct.push(tt,rt)}),dt.attributes=Ct}var bt=Ne(Be.childNodes);dt.childNodeCount=bt.length;var xt=dt.childNodeCount===1&&bt[0].nodeType===3;return(qe>0||xt)&&(dt.children=Re(Be,qe)),dt}function Re(Be,Ze){var Xe=Ne(Be.childNodes);return ce.default(Xe,function(qe){return Pe(qe,{depth:Ze-1})})}function Ne(Be){return te.default(Be,function(Ze){return ze(Ze)})}function ze(Be){if(Be.nodeType===1){var Ze=Be.getAttribute("class")||"";if(xe.default(Ze,"__chobitsu-hide__")||xe.default(Ze,"html2canvas-container"))return!1}var Xe=!(Be.nodeType===3&&j.default(Be.nodeValue||"")==="");return Xe&&Be.parentNode?ze(Be.parentNode):Xe}q.getOrCreateNodeId=Se,q.clear=function(){ye.clear(),we.clear()},q.getNodeId=function(Be){return we.get(Be)},q.wrap=Pe,q.getChildNodes=Re,q.getPreviousNode=function(Be){var Ze=Be.previousSibling;if(Ze){for(;!ze(Ze)&&Ze.previousSibling;)Ze=Ze.previousSibling;return Ze&&ze(Ze)?Ze:void 0}},q.filterNodes=Ne,q.isValidNode=ze,q.getNode=function(Be){var Ze=ye.get(Be);if(!Ze||Ze.nodeType===10)throw ge.createErr(-32e3,"Could not find node with given id");return Ze}},7923:function(G,q,V){var he=this&&this.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(q,"__esModule",{value:!0}),q.getProperties=q.releaseObj=q.getObj=q.wrap=q.clear=void 0;var ce=he(V(3367)),te=he(V(6156)),Ee=he(V(6472)),j=he(V(4777)),xe=he(V(9833)),re=he(V(2749)),ge=he(V(3708)),ye=he(V(7470)),we=he(V(1754)),ke=he(V(3085)),Se=he(V(2533)),Pe=he(V(300)),Re=he(V(1116)),Ne=he(V(8740)),ze=he(V(415)),Be=he(V(9804)),Ze=he(V(6257)),Xe=new Map,qe=new Map,Je=new Map,dt=new Map,Ct=1;function bt(ut,Ut){var at=qe.get(ut);return at||(at=JSON.stringify({injectedScriptId:0,id:Ct++}),qe.set(ut,at),Xe.set(at,ut),Je.set(at,Ut),at)}function xt(ut,Ut){var at=Ut===void 0?{}:Ut,zt=at.generatePreview,sn=zt!==void 0&&zt,Mn=at.self,rn=Mn===void 0?ut:Mn,on=st(ut),Zt=on.type,Ot=on.subtype;return Zt==="undefined"?on:Zt==="string"||Zt==="boolean"||Ot==="null"?(on.value=ut,on):(on.description=ht(ut,rn),Zt==="number"?(on.value=ut,on):Zt==="symbol"?(on.objectId=bt(ut,rn),on):(on.className=Zt==="function"?"Function":Ot==="array"?"Array":Ot==="map"?"Map":Ot==="set"?"Set":Ot==="regexp"?"RegExp":Ot==="error"?ut.name:ke.default(ut,!1),sn&&(on.preview=tt(ut,rn)),on.objectId=bt(ut,rn),on))}function nt(ut){return Xe.get(ut)}q.clear=function(){Xe.clear(),qe.clear(),Je.clear()},q.wrap=xt,q.getObj=nt,q.releaseObj=function(ut){var Ut=nt(ut);qe.delete(Ut),Je.delete(ut),Xe.delete(ut)},q.getProperties=function(ut){for(var Ut=ut.accessorPropertiesOnly,at=ut.objectId,zt=ut.ownProperties,sn=ut.generatePreview,Mn=[],rn={prototype:!zt,unenumerable:!0,symbol:!Ut},on=Xe.get(at),Zt=Je.get(at),Ot=Re.default(on,rn),Qt=ze.default(on),un=0,yn=Ot.length;un<yn;un++){var In=Ot[un],It=void 0;try{It=Zt[In]}catch{}var Rt={name:ce.default(In),isOwn:Ze.default(Zt,In)},nn=Object.getOwnPropertyDescriptor(on,In);if(!nn&&Qt&&(nn=Object.getOwnPropertyDescriptor(Qt,In)),nn){if(Ut&&!nn.get&&!nn.set)continue;Rt.configurable=nn.configurable,Rt.enumerable=nn.enumerable,Rt.writable=nn.writable,nn.get&&(Rt.get=xt(nn.get)),nn.set&&(Rt.set=xt(nn.set))}Qt&&Ze.default(Qt,In)&&Rt.enumerable&&(Rt.isOwn=!0);var xn=!0;!Rt.isOwn&&Rt.get&&(xn=!1),xn&&(Be.default(In)?(Rt.symbol=xt(In),Rt.value={type:"undefined"}):Rt.value=xt(It,{generatePreview:sn})),Ut&&j.default(It)&&Ne.default(It)||Mn.push(Rt)}if(!Qt||zt||vt(on)||Mn.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:Ze.default(on,"__proto__"),value:xt(Qt,{self:Zt}),writable:!1}),Ut)return{result:Mn};var En=[];if(Qt&&!vt(on)&&En.push({name:"[[Prototype]]",value:xt(Qt,{self:Zt})}),ge.default(on)||ye.default(on)){var $n=function(zn){for(var vn=dt.get(zn),wn=vn?nt(vn):[],Sn=zn.entries(),Jn=Sn.next().value;Jn;)ge.default(zn)?wn.push(new pt(Jn[1],Jn[0])):wn.push(new pt(Jn[1])),Jn=Sn.next().value;return wn}(on);En.push({name:"[[Entries]]",value:xt($n)})}return{internalProperties:En,result:Mn}};function tt(ut,Ut){Ut===void 0&&(Ut=ut);var at=st(ut);at.description=ht(ut,Ut);var zt=!1,sn=[],Mn=Se.default(ut),rn=Mn.length;rn>5&&(rn=5,zt=!0);for(var on=0;on<rn;on++){var Zt=Mn[on];sn.push(rt(Zt,Ut[Zt]))}if(at.properties=sn,ge.default(ut)){for(var Ot=[],Qt=(on=0,ut.keys()),un=Qt.next().value;un;){if(on>5){zt=!0;break}Ot.push({key:tt(un),value:tt(ut.get(un))}),on++,un=Qt.next().value}at.entries=Ot}else if(ye.default(ut)){var yn=[],In=(on=0,ut.keys());for(un=In.next().value;un;){if(on>5){zt=!0;break}yn.push({value:tt(un)}),on++,un=In.next().value}at.entries=yn}return at.overflow=zt,at}function rt(ut,Ut){var at=st(Ut);at.name=ut;var zt,sn=at.subtype;return zt=at.type==="object"?sn==="null"?"null":sn==="array"?"Array("+Ut.length+")":sn==="map"?"Map("+Ut.size+")":sn==="set"?"Set("+Ut.size+")":ke.default(Ut,!1):ce.default(Ut),at.value=zt,at}function ht(ut,Ut){Ut===void 0&&(Ut=ut);var at=st(ut),zt=at.type,sn=at.subtype;return zt==="string"?ut:zt==="number"||zt==="symbol"?ce.default(ut):zt==="function"?Pe.default(ut):sn==="array"?"Array("+ut.length+")":sn==="map"?"Map("+Ut.size+")":sn==="set"?"Set("+Ut.size+")":sn==="regexp"?ce.default(ut):sn==="error"?ut.stack:sn==="internal#entry"?ut.name?'{"'+ce.default(ut.name)+'" => "'+ce.default(ut.value)+'"}':'"'+ce.default(ut.value)+'"':ke.default(ut,!1)}function st(ut){var Ut=typeof ut,at="object";if(ut instanceof pt)at="internal#entry";else if(te.default(ut))at="null";else if(Ee.default(ut))at="array";else if(we.default(ut))at="regexp";else if(re.default(ut))at="error";else if(ge.default(ut))at="map";else if(ye.default(ut))at="set";else try{xe.default(ut)&&(at="node")}catch{}return{type:Ut,subtype:at}}var pt=function(ut,Ut){Ut&&(this.name=Ut),this.value=ut};function vt(ut){return ut instanceof pt||!!(ut[0]&&ut[0]instanceof pt)}},2636:function(G,q,V){var he,ce=this&&this.__extends||(he=function(tt,rt){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,st){ht.__proto__=st}||function(ht,st){for(var pt in st)st.hasOwnProperty(pt)&&(ht[pt]=st[pt])},he(tt,rt)},function(tt,rt){function ht(){this.constructor=tt}he(tt,rt),tt.prototype=rt===null?Object.create(rt):(ht.prototype=rt.prototype,new ht)}),te=this&&this.__importDefault||function(tt){return tt&&tt.__esModule?tt:{default:tt}};Object.defineProperty(q,"__esModule",{value:!0}),q.fullUrl=q.FetchRequest=q.XhrRequest=void 0;var Ee=te(V(1443)),j=te(V(6768)),xe=te(V(9702)),re=te(V(6334)),ge=te(V(8887)),ye=te(V(4331)),we=te(V(8847)),ke=te(V(3783)),Se=te(V(6930)),Pe=te(V(3875)),Re=V(316),Ne=function(tt){function rt(ht,st,pt){var vt=tt.call(this)||this;return vt.xhr=ht,vt.reqHeaders={},vt.method=st,vt.url=dt(pt),vt.id=Re.createId(),vt}return ce(rt,tt),rt.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},rt.prototype.handleSend=function(ht){j.default(ht)||(ht=""),ht={name:Ct(this.url),url:this.url,data:ht,time:we.default(),reqHeaders:this.reqHeaders,method:this.method},ge.default(this.reqHeaders)||(ht.reqHeaders=this.reqHeaders),this.emit("send",this.id,ht)},rt.prototype.handleReqHeadersSet=function(ht,st){ht&&st&&(this.reqHeaders[ht]=st)},rt.prototype.handleHeadersReceived=function(){var ht=this.xhr,st=bt(ht.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:st.type,subType:st.subType,size:qe(ht,!0,this.url),time:we.default(),resHeaders:Xe(ht)})},rt.prototype.handleDone=function(){var ht,st,pt,vt=this,ut=this.xhr,Ut=ut.responseType,at="",zt=function(){vt.emit("done",vt.id,{status:ut.status,size:qe(ut,!1,vt.url),time:we.default(),resTxt:at})},sn=bt(ut.getResponseHeader("Content-Type")||"");Ut!=="blob"||sn.type!=="text"&&sn.subType!=="javascript"&&sn.subType!=="json"?(Ut!==""&&Ut!=="text"||(at=ut.responseText),Ut==="json"&&(at=JSON.stringify(ut.response)),zt()):(ht=ut.response,st=function(Mn,rn){rn&&(at=rn),zt()},(pt=new FileReader).onload=function(){st(null,pt.result)},pt.onerror=function(Mn){st(Mn)},pt.readAsText(ht))},rt}(Ee.default);q.XhrRequest=Ne;var ze=function(tt){function rt(ht,st){st===void 0&&(st={});var pt=tt.call(this)||this;return ht instanceof window.Request&&(ht=ht.url),pt.url=dt(ht),pt.id=Re.createId(),pt.options=st,pt.reqHeaders=st.headers||{},pt.method=st.method||"GET",pt}return ce(rt,tt),rt.prototype.send=function(ht){var st=this,pt=this.options,vt=j.default(pt.body)?pt.body:"";this.emit("send",this.id,{name:Ct(this.url),url:this.url,data:vt,reqHeaders:this.reqHeaders,time:we.default(),method:this.method}),ht.then(function(ut){var Ut=bt((ut=ut.clone()).headers.get("Content-Type"));return ut.text().then(function(at){var zt={type:Ut.type,subType:Ut.subType,time:we.default(),size:Be(ut,at),resTxt:at,resHeaders:Ze(ut),status:ut.status};ge.default(st.reqHeaders)||(zt.reqHeaders=st.reqHeaders),st.emit("done",st.id,zt)}),ut})},rt}(Ee.default);function Be(tt,rt){var ht=tt.headers.get("Content-length");return ht?Pe.default(ht):nt(rt)}function Ze(tt){var rt={};return tt.headers.forEach(function(ht,st){return rt[st]=ht}),rt}function Xe(tt){var rt=tt.getAllResponseHeaders().split(`
`),ht={};return ke.default(rt,function(st){if((st=ye.default(st))!==""){var pt=st.split(":",2),vt=pt[0],ut=pt[1];ht[vt]=ye.default(ut)}}),ht}function qe(tt,rt,ht){var st=0;function pt(){if(!rt){var vt=tt.responseType,ut="";vt!==""&&vt!=="text"||(ut=tt.responseText),ut&&(st=nt(ut))}}if(function(vt){return!Se.default(vt,xt)}(ht))pt();else try{st=Pe.default(tt.getResponseHeader("Content-Length"))}catch{pt()}return st===0&&pt(),st}q.FetchRequest=ze;var Je=document.createElement("a");function dt(tt){return Je.href=tt,Je.protocol+"//"+Je.host+Je.pathname+Je.search+Je.hash}function Ct(tt){var rt=xe.default(tt.split("/"));return rt.indexOf("?")>-1&&(rt=ye.default(rt.split("?")[0])),rt===""&&(rt=new re.default(tt).hostname),rt}function bt(tt){if(!tt)return{type:"unknown",subType:"unknown"};var rt=tt.split(";")[0].split("/");return{type:rt[0],subType:xe.default(rt)}}q.fullUrl=dt;var xt=window.location.origin;function nt(tt){var rt=encodeURIComponent(tt).match(/%[89ABab]/g);return tt.length+(rt?rt.length:0)}},316:function(G,q,V){var he,ce=this&&this.__extends||(he=function(ze,Be){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ze,Xe){Ze.__proto__=Xe}||function(Ze,Xe){for(var qe in Xe)Xe.hasOwnProperty(qe)&&(Ze[qe]=Xe[qe])},he(ze,Be)},function(ze,Be){function Ze(){this.constructor=ze}he(ze,Be),ze.prototype=Be===null?Object.create(Be):(Ze.prototype=Be.prototype,new Ze)}),te=this&&this.__awaiter||function(ze,Be,Ze,Xe){return new(Ze||(Ze=Promise))(function(qe,Je){function dt(xt){try{bt(Xe.next(xt))}catch(nt){Je(nt)}}function Ct(xt){try{bt(Xe.throw(xt))}catch(nt){Je(nt)}}function bt(xt){var nt;xt.done?qe(xt.value):(nt=xt.value,nt instanceof Ze?nt:new Ze(function(tt){tt(nt)})).then(dt,Ct)}bt((Xe=Xe.apply(ze,Be||[])).next())})},Ee=this&&this.__generator||function(ze,Be){var Ze,Xe,qe,Je,dt={label:0,sent:function(){if(1&qe[0])throw qe[1];return qe[1]},trys:[],ops:[]};return Je={next:Ct(0),throw:Ct(1),return:Ct(2)},typeof Symbol=="function"&&(Je[Symbol.iterator]=function(){return this}),Je;function Ct(bt){return function(xt){return function(nt){if(Ze)throw new TypeError("Generator is already executing.");for(;dt;)try{if(Ze=1,Xe&&(qe=2&nt[0]?Xe.return:nt[0]?Xe.throw||((qe=Xe.return)&&qe.call(Xe),0):Xe.next)&&!(qe=qe.call(Xe,nt[1])).done)return qe;switch(Xe=0,qe&&(nt=[2&nt[0],qe.value]),nt[0]){case 0:case 1:qe=nt;break;case 4:return dt.label++,{value:nt[1],done:!1};case 5:dt.label++,Xe=nt[1],nt=[0];continue;case 7:nt=dt.ops.pop(),dt.trys.pop();continue;default:if(qe=dt.trys,!((qe=qe.length>0&&qe[qe.length-1])||nt[0]!==6&&nt[0]!==2)){dt=0;continue}if(nt[0]===3&&(!qe||nt[1]>qe[0]&&nt[1]<qe[3])){dt.label=nt[1];break}if(nt[0]===6&&dt.label<qe[1]){dt.label=qe[1],qe=nt;break}if(qe&&dt.label<qe[2]){dt.label=qe[2],dt.ops.push(nt);break}qe[2]&&dt.ops.pop(),dt.trys.pop();continue}nt=Be.call(ze,dt)}catch(tt){nt=[6,tt],Xe=0}finally{Ze=qe=0}if(5&nt[0])throw nt[1];return{value:nt[0]?nt[1]:void 0,done:!0}}([bt,xt])}}},j=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.getBase64Content=q.getTextContent=q.getOrigin=q.getUrl=q.createErr=q.ErrorWithCode=q.getAbsoluteUrl=q.createId=void 0;var xe=j(V(5229)),re=j(V(1216)),ge=j(V(6930)),ye=j(V(6334)),we=j(V(1792)),ke=j(V(9669)),Se=re.default(1e3,9999)+".";q.createId=function(){return xe.default(Se)},q.getAbsoluteUrl=function(ze){var Be=document.createElement("a");return Be.href=ze,Be.href};var Pe=function(ze){function Be(Ze,Xe){var qe=this.constructor,Je=ze.call(this,Xe)||this;return Je.code=Ze,Object.setPrototypeOf(Je,qe.prototype),Je}return ce(Be,ze),Be}(Error);function Re(ze,Be,Ze){return Ze===void 0&&(Ze=""),te(this,void 0,void 0,function(){var Xe;return Ee(this,function(qe){switch(qe.label){case 0:return qe.trys.push([0,2,,8]),(Xe=new ye.default(ze)).setQuery("__chobitsu-hide__","true"),[4,ke.default.get(Xe.toString(),{responseType:Be})];case 1:return[2,qe.sent().data];case 2:if(qe.sent(),!Ze)return[3,7];qe.label=3;case 3:return qe.trys.push([3,6,,7]),[4,ke.default.get(Ne(Ze,ze),{responseType:Be})];case 4:return[4,qe.sent().data];case 5:return[2,qe.sent()];case 6:return qe.sent(),[3,7];case 7:return[3,8];case 8:return[2,Be==="arraybuffer"?new ArrayBuffer(0):""]}})})}function Ne(ze,Be){var Ze=new ye.default(ze);return Ze.setQuery("url",Be),Ze.setQuery("__chobitsu-hide__","true"),Ze.toString()}q.ErrorWithCode=Pe,q.createErr=function(ze,Be){return new Pe(ze,Be)},q.getUrl=function(){var ze=location.href;return ge.default(ze,"about:")?parent.location.href:ze},q.getOrigin=function(){var ze=location.origin;return ze==="null"?parent.location.origin:ze},q.getTextContent=function(ze,Be){return Be===void 0&&(Be=""),te(this,void 0,void 0,function(){return Ee(this,function(Ze){switch(Ze.label){case 0:return[4,Re(ze,"text",Be)];case 1:return[2,Ze.sent()]}})})},q.getBase64Content=function(ze,Be){return Be===void 0&&(Be=""),te(this,void 0,void 0,function(){var Ze;return Ee(this,function(Xe){switch(Xe.label){case 0:return Ze=we.default,[4,Re(ze,"arraybuffer",Be)];case 1:return[2,Ze.apply(void 0,[Xe.sent(),"base64"])]}})})}},9410:function(G,q,V){(q=V(3645)(!1)).push([G.id,`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}`,""]),G.exports=q},3645:function(G){G.exports=function(q){var V=[];return V.toString=function(){return this.map(function(he){var ce=function(te,Ee){var j=te[1]||"",xe=te[3];if(!xe)return j;if(Ee&&typeof btoa=="function"){var re=(ye=xe,we=btoa(unescape(encodeURIComponent(JSON.stringify(ye)))),ke="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(we),"/*# ".concat(ke," */")),ge=xe.sources.map(function(Se){return"/*# sourceURL=".concat(xe.sourceRoot||"").concat(Se," */")});return[j].concat(ge).concat([re]).join(`
`)}var ye,we,ke;return[j].join(`
`)}(he,q);return he[2]?"@media ".concat(he[2]," {").concat(ce,"}"):ce}).join("")},V.i=function(he,ce,te){typeof he=="string"&&(he=[[null,he,""]]);var Ee={};if(te)for(var j=0;j<this.length;j++){var xe=this[j][0];xe!=null&&(Ee[xe]=!0)}for(var re=0;re<he.length;re++){var ge=[].concat(he[re]);te&&Ee[ge[0]]||(ce&&(ge[2]?ge[2]="".concat(ce," and ").concat(ge[2]):ge[2]=ce),V.push(ge))}},V}},8384:function(G,q,V){var he,ce;/*!
 * Draggabilly v2.4.1
 * Make that shiz draggable
 * https://draggabilly.desandro.com
 * MIT license
 */(function(te,Ee){he=[V(6131),V(4842)],ce=function(j,xe){return function(re,ge,ye){function we(Be,Ze){for(var Xe in Ze)Be[Xe]=Ze[Xe];return Be}function ke(){}var Se=re.jQuery;function Pe(Be,Ze){this.element=typeof Be=="string"?document.querySelector(Be):Be,Se&&(this.$element=Se(this.element)),this.options=we({},this.constructor.defaults),this.option(Ze),this._create()}var Re=Pe.prototype=Object.create(ye.prototype);Pe.defaults={},Re.option=function(Be){we(this.options,Be)};var Ne={relative:!0,absolute:!0,fixed:!0};function ze(Be,Ze,Xe){return Xe=Xe||"round",Ze?Math[Xe](Be/Ze)*Ze:Be}return Re._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=we({},this.position);var Be=getComputedStyle(this.element);Ne[Be.position]||(this.element.style.position="relative"),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},Re.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},Re.dispatchEvent=function(Be,Ze,Xe){var qe=[Ze].concat(Xe);this.emitEvent(Be,qe),this.dispatchJQueryEvent(Be,Ze,Xe)},Re.dispatchJQueryEvent=function(Be,Ze,Xe){var qe=re.jQuery;if(qe&&this.$element){var Je=qe.Event(Ze);Je.type=Be,this.$element.trigger(Je,Xe)}},Re._getPosition=function(){var Be=getComputedStyle(this.element),Ze=this._getPositionCoord(Be.left,"width"),Xe=this._getPositionCoord(Be.top,"height");this.position.x=isNaN(Ze)?0:Ze,this.position.y=isNaN(Xe)?0:Xe,this._addTransformPosition(Be)},Re._getPositionCoord=function(Be,Ze){if(Be.indexOf("%")!=-1){var Xe=ge(this.element.parentNode);return Xe?parseFloat(Be)/100*Xe[Ze]:0}return parseInt(Be,10)},Re._addTransformPosition=function(Be){var Ze=Be.transform;if(Ze.indexOf("matrix")===0){var Xe=Ze.split(","),qe=Ze.indexOf("matrix3d")===0?12:4,Je=parseInt(Xe[qe],10),dt=parseInt(Xe[qe+1],10);this.position.x+=Je,this.position.y+=dt}},Re.onPointerDown=function(Be,Ze){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",Be,[Ze])},Re.pointerDown=function(Be,Ze){this.okayPointerDown(Be)&&this.isEnabled?(this.pointerDownPointer={pageX:Ze.pageX,pageY:Ze.pageY},Be.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Be),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",Be,[Ze])):this._pointerReset()},Re.dragStart=function(Be,Ze){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",Be,[Ze]),this.animate())},Re.measureContainment=function(){var Be=this.getContainer();if(Be){var Ze=ge(this.element),Xe=ge(Be),qe=this.element.getBoundingClientRect(),Je=Be.getBoundingClientRect(),dt=Xe.borderLeftWidth+Xe.borderRightWidth,Ct=Xe.borderTopWidth+Xe.borderBottomWidth,bt=this.relativeStartPosition={x:qe.left-(Je.left+Xe.borderLeftWidth),y:qe.top-(Je.top+Xe.borderTopWidth)};this.containSize={width:Xe.width-dt-bt.x-Ze.width,height:Xe.height-Ct-bt.y-Ze.height}}},Re.getContainer=function(){var Be=this.options.containment;if(Be)return Be instanceof HTMLElement?Be:typeof Be=="string"?document.querySelector(Be):this.element.parentNode},Re.onPointerMove=function(Be,Ze,Xe){this.dispatchJQueryEvent("pointerMove",Be,[Ze,Xe])},Re.dragMove=function(Be,Ze,Xe){if(this.isEnabled){var qe=Xe.x,Je=Xe.y,dt=this.options.grid,Ct=dt&&dt[0],bt=dt&&dt[1];qe=ze(qe,Ct),Je=ze(Je,bt),qe=this.containDrag("x",qe,Ct),Je=this.containDrag("y",Je,bt),qe=this.options.axis=="y"?0:qe,Je=this.options.axis=="x"?0:Je,this.position.x=this.startPosition.x+qe,this.position.y=this.startPosition.y+Je,this.dragPoint.x=qe,this.dragPoint.y=Je,this.dispatchEvent("dragMove",Be,[Ze,Xe])}},Re.containDrag=function(Be,Ze,Xe){if(!this.options.containment)return Ze;var qe=Be=="x"?"width":"height",Je=ze(-this.relativeStartPosition[Be],Xe,"ceil"),dt=this.containSize[qe];return dt=ze(dt,Xe,"floor"),Math.max(Je,Math.min(dt,Ze))},Re.onPointerUp=function(Be,Ze){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",Be,[Ze])},Re.dragEnd=function(Be,Ze){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",Be,[Ze]))},Re.animate=function(){if(this.isDragging){this.positionDrag();var Be=this;requestAnimationFrame(function(){Be.animate()})}},Re.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},Re.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},Re.staticClick=function(Be,Ze){this.dispatchEvent("staticClick",Be,[Ze])},Re.setPosition=function(Be,Ze){this.position.x=Be,this.position.y=Ze,this.setLeftTop()},Re.enable=function(){this.isEnabled=!0},Re.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},Re.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},Re._init=ke,Se&&Se.bridget&&Se.bridget("draggabilly",Pe),Pe}(te,j,xe)}.apply(q,he),ce===void 0||(G.exports=ce)})(window)},7158:function(G,q,V){var he,ce;(ce=typeof(he=function(){function te(){}var Ee=te.prototype;return Ee.on=function(j,xe){if(j&&xe){var re=this._events=this._events||{},ge=re[j]=re[j]||[];return ge.indexOf(xe)==-1&&ge.push(xe),this}},Ee.once=function(j,xe){if(j&&xe){this.on(j,xe);var re=this._onceEvents=this._onceEvents||{};return(re[j]=re[j]||{})[xe]=!0,this}},Ee.off=function(j,xe){var re=this._events&&this._events[j];if(re&&re.length){var ge=re.indexOf(xe);return ge!=-1&&re.splice(ge,1),this}},Ee.emitEvent=function(j,xe){var re=this._events&&this._events[j];if(re&&re.length){re=re.slice(0),xe=xe||[];for(var ge=this._onceEvents&&this._onceEvents[j],ye=0;ye<re.length;ye++){var we=re[ye];ge&&ge[we]&&(this.off(j,we),delete ge[we]),we.apply(this,xe)}return this}},Ee.allOff=function(){delete this._events,delete this._onceEvents},te})=="function"?he.call(q,V,q,G):he)===void 0||(G.exports=ce)},6131:function(G,q,V){var he,ce;/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */(ce=typeof(he=function(){function te(Re){var Ne=parseFloat(Re);return Re.indexOf("%")==-1&&!isNaN(Ne)&&Ne}function Ee(){}var j=typeof console=="undefined"?Ee:function(Re){console.error(Re)},xe=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],re=xe.length;function ge(){for(var Re={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},Ne=0;Ne<re;Ne++)Re[xe[Ne]]=0;return Re}function ye(Re){var Ne=getComputedStyle(Re);return Ne||j("Style returned "+Ne+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),Ne}var we,ke=!1;function Se(){if(!ke){ke=!0;var Re=document.createElement("div");Re.style.width="200px",Re.style.padding="1px 2px 3px 4px",Re.style.borderStyle="solid",Re.style.borderWidth="1px 2px 3px 4px",Re.style.boxSizing="border-box";var Ne=document.body||document.documentElement;Ne.appendChild(Re);var ze=ye(Re);we=Math.round(te(ze.width))==200,Pe.isBoxSizeOuter=we,Ne.removeChild(Re)}}function Pe(Re){if(Se(),typeof Re=="string"&&(Re=document.querySelector(Re)),Re&&typeof Re=="object"&&Re.nodeType){var Ne=ye(Re);if(Ne.display=="none")return ge();var ze={};ze.width=Re.offsetWidth,ze.height=Re.offsetHeight;for(var Be=ze.isBorderBox=Ne.boxSizing=="border-box",Ze=0;Ze<re;Ze++){var Xe=xe[Ze],qe=Ne[Xe],Je=parseFloat(qe);ze[Xe]=isNaN(Je)?0:Je}var dt=ze.paddingLeft+ze.paddingRight,Ct=ze.paddingTop+ze.paddingBottom,bt=ze.marginLeft+ze.marginRight,xt=ze.marginTop+ze.marginBottom,nt=ze.borderLeftWidth+ze.borderRightWidth,tt=ze.borderTopWidth+ze.borderBottomWidth,rt=Be&&we,ht=te(Ne.width);ht!==!1&&(ze.width=ht+(rt?0:dt+nt));var st=te(Ne.height);return st!==!1&&(ze.height=st+(rt?0:Ct+tt)),ze.innerWidth=ze.width-(dt+nt),ze.innerHeight=ze.height-(Ct+tt),ze.outerWidth=ze.width+bt,ze.outerHeight=ze.height+xt,ze}}return Pe})=="function"?he.call(q,V,q,G):he)===void 0||(G.exports=ce)},6834:function(G,q,V){function he(ke){return ke&&ke.__esModule?ke:{default:ke}}function ce(ke){if(ke&&ke.__esModule)return ke;var Se={};if(ke!=null)for(var Pe in ke)Object.prototype.hasOwnProperty.call(ke,Pe)&&(Se[Pe]=ke[Pe]);return Se.default=ke,Se}q.__esModule=!0;var te=ce(V(2067)),Ee=he(V(5558)),j=he(V(8728)),xe=ce(V(2392)),re=ce(V(1628)),ge=he(V(3982));function ye(){var ke=new te.HandlebarsEnvironment;return xe.extend(ke,te),ke.SafeString=Ee.default,ke.Exception=j.default,ke.Utils=xe,ke.escapeExpression=xe.escapeExpression,ke.VM=re,ke.template=function(Se){return re.template(Se,ke)},ke}var we=ye();we.create=ye,ge.default(we),we.default=we,q.default=we,G.exports=q.default},2067:function(G,q,V){function he(ke){return ke&&ke.__esModule?ke:{default:ke}}q.__esModule=!0,q.HandlebarsEnvironment=ye;var ce=V(2392),te=he(V(8728)),Ee=V(2638),j=V(881),xe=he(V(8037)),re=V(6293);q.VERSION="4.7.7",q.COMPILER_REVISION=8,q.LAST_COMPATIBLE_COMPILER_REVISION=7,q.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var ge="[object Object]";function ye(ke,Se,Pe){this.helpers=ke||{},this.partials=Se||{},this.decorators=Pe||{},Ee.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}ye.prototype={constructor:ye,logger:xe.default,log:xe.default.log,registerHelper:function(ke,Se){if(ce.toString.call(ke)===ge){if(Se)throw new te.default("Arg not supported with multiple helpers");ce.extend(this.helpers,ke)}else this.helpers[ke]=Se},unregisterHelper:function(ke){delete this.helpers[ke]},registerPartial:function(ke,Se){if(ce.toString.call(ke)===ge)ce.extend(this.partials,ke);else{if(Se===void 0)throw new te.default('Attempting to register a partial called "'+ke+'" as undefined');this.partials[ke]=Se}},unregisterPartial:function(ke){delete this.partials[ke]},registerDecorator:function(ke,Se){if(ce.toString.call(ke)===ge){if(Se)throw new te.default("Arg not supported with multiple decorators");ce.extend(this.decorators,ke)}else this.decorators[ke]=Se},unregisterDecorator:function(ke){delete this.decorators[ke]},resetLoggedPropertyAccesses:function(){re.resetLoggedProperties()}};var we=xe.default.log;q.log=we,q.createFrame=ce.createFrame,q.logger=xe.default},881:function(G,q,V){q.__esModule=!0,q.registerDefaultDecorators=function(Ee){te.default(Ee)};var he,ce=V(5670),te=(he=ce)&&he.__esModule?he:{default:he}},5670:function(G,q,V){q.__esModule=!0;var he=V(2392);q.default=function(ce){ce.registerDecorator("inline",function(te,Ee,j,xe){var re=te;return Ee.partials||(Ee.partials={},re=function(ge,ye){var we=j.partials;j.partials=he.extend({},we,Ee.partials);var ke=te(ge,ye);return j.partials=we,ke}),Ee.partials[xe.args[0]]=xe.fn,re})},G.exports=q.default},8728:function(G,q){q.__esModule=!0;var V=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function he(ce,te){var Ee=te&&te.loc,j=void 0,xe=void 0,re=void 0,ge=void 0;Ee&&(j=Ee.start.line,xe=Ee.end.line,re=Ee.start.column,ge=Ee.end.column,ce+=" - "+j+":"+re);for(var ye=Error.prototype.constructor.call(this,ce),we=0;we<V.length;we++)this[V[we]]=ye[V[we]];Error.captureStackTrace&&Error.captureStackTrace(this,he);try{Ee&&(this.lineNumber=j,this.endLineNumber=xe,Object.defineProperty?(Object.defineProperty(this,"column",{value:re,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:ge,enumerable:!0})):(this.column=re,this.endColumn=ge))}catch{}}he.prototype=new Error,q.default=he,G.exports=q.default},2638:function(G,q,V){function he(ye){return ye&&ye.__esModule?ye:{default:ye}}q.__esModule=!0,q.registerDefaultHelpers=function(ye){ce.default(ye),te.default(ye),Ee.default(ye),j.default(ye),xe.default(ye),re.default(ye),ge.default(ye)},q.moveHelperToHooks=function(ye,we,ke){ye.helpers[we]&&(ye.hooks[we]=ye.helpers[we],ke||delete ye.helpers[we])};var ce=he(V(7342)),te=he(V(6822)),Ee=he(V(4905)),j=he(V(7405)),xe=he(V(5702)),re=he(V(7593)),ge=he(V(3978))},7342:function(G,q,V){q.__esModule=!0;var he=V(2392);q.default=function(ce){ce.registerHelper("blockHelperMissing",function(te,Ee){var j=Ee.inverse,xe=Ee.fn;if(te===!0)return xe(this);if(te===!1||te==null)return j(this);if(he.isArray(te))return te.length>0?(Ee.ids&&(Ee.ids=[Ee.name]),ce.helpers.each(te,Ee)):j(this);if(Ee.data&&Ee.ids){var re=he.createFrame(Ee.data);re.contextPath=he.appendContextPath(Ee.data.contextPath,Ee.name),Ee={data:re}}return xe(te,Ee)})},G.exports=q.default},6822:function(G,q,V){q.__esModule=!0;var he,ce=V(2392),te=V(8728),Ee=(he=te)&&he.__esModule?he:{default:he};q.default=function(j){j.registerHelper("each",function(xe,re){if(!re)throw new Ee.default("Must pass iterator to #each");var ge,ye=re.fn,we=re.inverse,ke=0,Se="",Pe=void 0,Re=void 0;function Ne(qe,Je,dt){Pe&&(Pe.key=qe,Pe.index=Je,Pe.first=Je===0,Pe.last=!!dt,Re&&(Pe.contextPath=Re+qe)),Se+=ye(xe[qe],{data:Pe,blockParams:ce.blockParams([xe[qe],qe],[Re+qe,null])})}if(re.data&&re.ids&&(Re=ce.appendContextPath(re.data.contextPath,re.ids[0])+"."),ce.isFunction(xe)&&(xe=xe.call(this)),re.data&&(Pe=ce.createFrame(re.data)),xe&&typeof xe=="object")if(ce.isArray(xe))for(var ze=xe.length;ke<ze;ke++)ke in xe&&Ne(ke,ke,ke===xe.length-1);else if(V.g.Symbol&&xe[V.g.Symbol.iterator]){for(var Be=[],Ze=xe[V.g.Symbol.iterator](),Xe=Ze.next();!Xe.done;Xe=Ze.next())Be.push(Xe.value);for(ze=(xe=Be).length;ke<ze;ke++)Ne(ke,ke,ke===xe.length-1)}else ge=void 0,Object.keys(xe).forEach(function(qe){ge!==void 0&&Ne(ge,ke-1),ge=qe,ke++}),ge!==void 0&&Ne(ge,ke-1,!0);return ke===0&&(Se=we(this)),Se})},G.exports=q.default},4905:function(G,q,V){q.__esModule=!0;var he,ce=V(8728),te=(he=ce)&&he.__esModule?he:{default:he};q.default=function(Ee){Ee.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new te.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},G.exports=q.default},7405:function(G,q,V){q.__esModule=!0;var he,ce=V(2392),te=V(8728),Ee=(he=te)&&he.__esModule?he:{default:he};q.default=function(j){j.registerHelper("if",function(xe,re){if(arguments.length!=2)throw new Ee.default("#if requires exactly one argument");return ce.isFunction(xe)&&(xe=xe.call(this)),!re.hash.includeZero&&!xe||ce.isEmpty(xe)?re.inverse(this):re.fn(this)}),j.registerHelper("unless",function(xe,re){if(arguments.length!=2)throw new Ee.default("#unless requires exactly one argument");return j.helpers.if.call(this,xe,{fn:re.inverse,inverse:re.fn,hash:re.hash})})},G.exports=q.default},5702:function(G,q){q.__esModule=!0,q.default=function(V){V.registerHelper("log",function(){for(var he=[void 0],ce=arguments[arguments.length-1],te=0;te<arguments.length-1;te++)he.push(arguments[te]);var Ee=1;ce.hash.level!=null?Ee=ce.hash.level:ce.data&&ce.data.level!=null&&(Ee=ce.data.level),he[0]=Ee,V.log.apply(V,he)})},G.exports=q.default},7593:function(G,q){q.__esModule=!0,q.default=function(V){V.registerHelper("lookup",function(he,ce,te){return he&&te.lookupProperty(he,ce)})},G.exports=q.default},3978:function(G,q,V){q.__esModule=!0;var he,ce=V(2392),te=V(8728),Ee=(he=te)&&he.__esModule?he:{default:he};q.default=function(j){j.registerHelper("with",function(xe,re){if(arguments.length!=2)throw new Ee.default("#with requires exactly one argument");ce.isFunction(xe)&&(xe=xe.call(this));var ge=re.fn;if(ce.isEmpty(xe))return re.inverse(this);var ye=re.data;return re.data&&re.ids&&((ye=ce.createFrame(re.data)).contextPath=ce.appendContextPath(re.data.contextPath,re.ids[0])),ge(xe,{data:ye,blockParams:ce.blockParams([xe],[ye&&ye.contextPath])})})},G.exports=q.default},8572:function(G,q,V){q.__esModule=!0,q.createNewLookupObject=function(){for(var ce=arguments.length,te=Array(ce),Ee=0;Ee<ce;Ee++)te[Ee]=arguments[Ee];return he.extend.apply(void 0,[Object.create(null)].concat(te))};var he=V(2392)},6293:function(G,q,V){q.__esModule=!0,q.createProtoAccessControl=function(j){var xe=Object.create(null);xe.constructor=!1,xe.__defineGetter__=!1,xe.__defineSetter__=!1,xe.__lookupGetter__=!1;var re=Object.create(null);return re.__proto__=!1,{properties:{whitelist:he.createNewLookupObject(re,j.allowedProtoProperties),defaultValue:j.allowProtoPropertiesByDefault},methods:{whitelist:he.createNewLookupObject(xe,j.allowedProtoMethods),defaultValue:j.allowProtoMethodsByDefault}}},q.resultIsAllowed=function(j,xe,re){return Ee(typeof j=="function"?xe.methods:xe.properties,re)},q.resetLoggedProperties=function(){Object.keys(te).forEach(function(j){delete te[j]})};var he=V(8572),ce=function(j){if(j&&j.__esModule)return j;var xe={};if(j!=null)for(var re in j)Object.prototype.hasOwnProperty.call(j,re)&&(xe[re]=j[re]);return xe.default=j,xe}(V(8037)),te=Object.create(null);function Ee(j,xe){return j.whitelist[xe]!==void 0?j.whitelist[xe]===!0:j.defaultValue!==void 0?j.defaultValue:(function(re){te[re]!==!0&&(te[re]=!0,ce.log("error",'Handlebars: Access has been denied to resolve the property "'+re+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}(xe),!1)}},5005:function(G,q){q.__esModule=!0,q.wrapHelper=function(V,he){return typeof V!="function"?V:function(){return arguments[arguments.length-1]=he(arguments[arguments.length-1]),V.apply(this,arguments)}}},8037:function(G,q,V){q.__esModule=!0;var he=V(2392),ce={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(te){if(typeof te=="string"){var Ee=he.indexOf(ce.methodMap,te.toLowerCase());te=Ee>=0?Ee:parseInt(te,10)}return te},log:function(te){if(te=ce.lookupLevel(te),typeof console!="undefined"&&ce.lookupLevel(ce.level)<=te){var Ee=ce.methodMap[te];console[Ee]||(Ee="log");for(var j=arguments.length,xe=Array(j>1?j-1:0),re=1;re<j;re++)xe[re-1]=arguments[re];console[Ee].apply(console,xe)}}};q.default=ce,G.exports=q.default},3982:function(G,q,V){q.__esModule=!0,q.default=function(he){var ce=V.g!==void 0?V.g:window,te=ce.Handlebars;he.noConflict=function(){return ce.Handlebars===he&&(ce.Handlebars=te),he}},G.exports=q.default},1628:function(G,q,V){q.__esModule=!0,q.checkRevision=function(Pe){var Re=Pe&&Pe[0]||1,Ne=j.COMPILER_REVISION;if(!(Re>=j.LAST_COMPATIBLE_COMPILER_REVISION&&Re<=j.COMPILER_REVISION)){if(Re<j.LAST_COMPATIBLE_COMPILER_REVISION){var ze=j.REVISION_CHANGES[Ne],Be=j.REVISION_CHANGES[Re];throw new Ee.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+ze+") or downgrade your runtime to an older version ("+Be+").")}throw new Ee.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+Pe[1]+").")}},q.template=function(Pe,Re){if(!Re)throw new Ee.default("No environment passed to template");if(!Pe||!Pe.main)throw new Ee.default("Unknown template object: "+typeof Pe);Pe.main.decorator=Pe.main_d,Re.VM.checkRevision(Pe.compiler);var Ne=Pe.compiler&&Pe.compiler[0]===7,ze={strict:function(Ze,Xe,qe){if(!Ze||!(Xe in Ze))throw new Ee.default('"'+Xe+'" not defined in '+Ze,{loc:qe});return ze.lookupProperty(Ze,Xe)},lookupProperty:function(Ze,Xe){var qe=Ze[Xe];return qe==null||Object.prototype.hasOwnProperty.call(Ze,Xe)||ge.resultIsAllowed(qe,ze.protoAccessControl,Xe)?qe:void 0},lookup:function(Ze,Xe){for(var qe=Ze.length,Je=0;Je<qe;Je++)if((Ze[Je]&&ze.lookupProperty(Ze[Je],Xe))!=null)return Ze[Je][Xe]},lambda:function(Ze,Xe){return typeof Ze=="function"?Ze.call(Xe):Ze},escapeExpression:ce.escapeExpression,invokePartial:function(Ze,Xe,qe){qe.hash&&(Xe=ce.extend({},Xe,qe.hash),qe.ids&&(qe.ids[0]=!0)),Ze=Re.VM.resolvePartial.call(this,Ze,Xe,qe);var Je=ce.extend({},qe,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),dt=Re.VM.invokePartial.call(this,Ze,Xe,Je);if(dt==null&&Re.compile&&(qe.partials[qe.name]=Re.compile(Ze,Pe.compilerOptions,Re),dt=qe.partials[qe.name](Xe,Je)),dt!=null){if(qe.indent){for(var Ct=dt.split(`
`),bt=0,xt=Ct.length;bt<xt&&(Ct[bt]||bt+1!==xt);bt++)Ct[bt]=qe.indent+Ct[bt];dt=Ct.join(`
`)}return dt}throw new Ee.default("The partial "+qe.name+" could not be compiled when running in runtime-only mode")},fn:function(Ze){var Xe=Pe[Ze];return Xe.decorator=Pe[Ze+"_d"],Xe},programs:[],program:function(Ze,Xe,qe,Je,dt){var Ct=this.programs[Ze],bt=this.fn(Ze);return Xe||dt||Je||qe?Ct=ye(this,Ze,bt,Xe,qe,Je,dt):Ct||(Ct=this.programs[Ze]=ye(this,Ze,bt)),Ct},data:function(Ze,Xe){for(;Ze&&Xe--;)Ze=Ze._parent;return Ze},mergeIfNeeded:function(Ze,Xe){var qe=Ze||Xe;return Ze&&Xe&&Ze!==Xe&&(qe=ce.extend({},Xe,Ze)),qe},nullContext:Object.seal({}),noop:Re.VM.noop,compilerInfo:Pe.compiler};function Be(Ze){var Xe=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],qe=Xe.data;Be._setup(Xe),!Xe.partial&&Pe.useData&&(qe=ke(Ze,qe));var Je=void 0,dt=Pe.useBlockParams?[]:void 0;function Ct(bt){return""+Pe.main(ze,bt,ze.helpers,ze.partials,qe,dt,Je)}return Pe.useDepths&&(Je=Xe.depths?Ze!=Xe.depths[0]?[Ze].concat(Xe.depths):Xe.depths:[Ze]),(Ct=Se(Pe.main,Ct,ze,Xe.depths||[],qe,dt))(Ze,Xe)}return Be.isTop=!0,Be._setup=function(Ze){if(Ze.partial)ze.protoAccessControl=Ze.protoAccessControl,ze.helpers=Ze.helpers,ze.partials=Ze.partials,ze.decorators=Ze.decorators,ze.hooks=Ze.hooks;else{var Xe=ce.extend({},Re.helpers,Ze.helpers);(function(Je,dt){Object.keys(Je).forEach(function(Ct){var bt=Je[Ct];Je[Ct]=function(xt,nt){var tt=nt.lookupProperty;return re.wrapHelper(xt,function(rt){return ce.extend({lookupProperty:tt},rt)})}(bt,dt)})})(Xe,ze),ze.helpers=Xe,Pe.usePartial&&(ze.partials=ze.mergeIfNeeded(Ze.partials,Re.partials)),(Pe.usePartial||Pe.useDecorators)&&(ze.decorators=ce.extend({},Re.decorators,Ze.decorators)),ze.hooks={},ze.protoAccessControl=ge.createProtoAccessControl(Ze);var qe=Ze.allowCallsToHelperMissing||Ne;xe.moveHelperToHooks(ze,"helperMissing",qe),xe.moveHelperToHooks(ze,"blockHelperMissing",qe)}},Be._child=function(Ze,Xe,qe,Je){if(Pe.useBlockParams&&!qe)throw new Ee.default("must pass block params");if(Pe.useDepths&&!Je)throw new Ee.default("must pass parent depths");return ye(ze,Ze,Pe[Ze],Xe,0,qe,Je)},Be},q.wrapProgram=ye,q.resolvePartial=function(Pe,Re,Ne){return Pe?Pe.call||Ne.name||(Ne.name=Pe,Pe=Ne.partials[Pe]):Pe=Ne.name==="@partial-block"?Ne.data["partial-block"]:Ne.partials[Ne.name],Pe},q.invokePartial=function(Pe,Re,Ne){var ze=Ne.data&&Ne.data["partial-block"];Ne.partial=!0,Ne.ids&&(Ne.data.contextPath=Ne.ids[0]||Ne.data.contextPath);var Be=void 0;if(Ne.fn&&Ne.fn!==we&&function(){Ne.data=j.createFrame(Ne.data);var Ze=Ne.fn;Be=Ne.data["partial-block"]=function(Xe){var qe=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return qe.data=j.createFrame(qe.data),qe.data["partial-block"]=ze,Ze(Xe,qe)},Ze.partials&&(Ne.partials=ce.extend({},Ne.partials,Ze.partials))}(),Pe===void 0&&Be&&(Pe=Be),Pe===void 0)throw new Ee.default("The partial "+Ne.name+" could not be found");if(Pe instanceof Function)return Pe(Re,Ne)},q.noop=we;var he,ce=function(Pe){if(Pe&&Pe.__esModule)return Pe;var Re={};if(Pe!=null)for(var Ne in Pe)Object.prototype.hasOwnProperty.call(Pe,Ne)&&(Re[Ne]=Pe[Ne]);return Re.default=Pe,Re}(V(2392)),te=V(8728),Ee=(he=te)&&he.__esModule?he:{default:he},j=V(2067),xe=V(2638),re=V(5005),ge=V(6293);function ye(Pe,Re,Ne,ze,Be,Ze,Xe){function qe(Je){var dt=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],Ct=Xe;return!Xe||Je==Xe[0]||Je===Pe.nullContext&&Xe[0]===null||(Ct=[Je].concat(Xe)),Ne(Pe,Je,Pe.helpers,Pe.partials,dt.data||ze,Ze&&[dt.blockParams].concat(Ze),Ct)}return(qe=Se(Ne,qe,Pe,Xe,ze,Ze)).program=Re,qe.depth=Xe?Xe.length:0,qe.blockParams=Be||0,qe}function we(){return""}function ke(Pe,Re){return Re&&"root"in Re||((Re=Re?j.createFrame(Re):{}).root=Pe),Re}function Se(Pe,Re,Ne,ze,Be,Ze){if(Pe.decorator){var Xe={};Re=Pe.decorator(Re,Xe,Ne,ze&&ze[0],Be,Ze,ze),ce.extend(Re,Xe)}return Re}},5558:function(G,q){function V(he){this.string=he}q.__esModule=!0,V.prototype.toString=V.prototype.toHTML=function(){return""+this.string},q.default=V,G.exports=q.default},2392:function(G,q){q.__esModule=!0,q.extend=Ee,q.indexOf=function(ge,ye){for(var we=0,ke=ge.length;we<ke;we++)if(ge[we]===ye)return we;return-1},q.escapeExpression=function(ge){if(typeof ge!="string"){if(ge&&ge.toHTML)return ge.toHTML();if(ge==null)return"";if(!ge)return ge+"";ge=""+ge}return ce.test(ge)?ge.replace(he,te):ge},q.isEmpty=function(ge){return!ge&&ge!==0||!(!re(ge)||ge.length!==0)},q.createFrame=function(ge){var ye=Ee({},ge);return ye._parent=ge,ye},q.blockParams=function(ge,ye){return ge.path=ye,ge},q.appendContextPath=function(ge,ye){return(ge?ge+".":"")+ye};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},he=/[&<>"'`=]/g,ce=/[&<>"'`=]/;function te(ge){return V[ge]}function Ee(ge){for(var ye=1;ye<arguments.length;ye++)for(var we in arguments[ye])Object.prototype.hasOwnProperty.call(arguments[ye],we)&&(ge[we]=arguments[ye][we]);return ge}var j=Object.prototype.toString;q.toString=j;var xe=function(ge){return typeof ge=="function"};xe(/x/)&&(q.isFunction=xe=function(ge){return typeof ge=="function"&&j.call(ge)==="[object Function]"}),q.isFunction=xe;var re=Array.isArray||function(ge){return!(!ge||typeof ge!="object")&&j.call(ge)==="[object Array]"};q.isArray=re},4204:function(G,q,V){var he,ce;he=[V(7937),V(5040),V(3566)],(ce=function(te,Ee,j){return function(xe,re,ge){var ye=function(we,ke){return xe.js_beautify(we,ke)};return ye.js=xe.js_beautify,ye.css=re.css_beautify,ye.html=ge.html_beautify,ye.js_beautify=xe.js_beautify,ye.css_beautify=re.css_beautify,ye.html_beautify=ge.html_beautify,ye}(te,Ee,j)}.apply(q,he))===void 0||(G.exports=ce)},5040:function(G,q){var V;(function(){var he;(function(){var te=[,,function(xe){function re(we){this.__parent=we,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ge(we,ke){this.__cache=[""],this.__indent_size=we.indent_size,this.__indent_string=we.indent_char,we.indent_with_tabs||(this.__indent_string=new Array(we.indent_size+1).join(we.indent_char)),ke=ke||"",we.indent_level>0&&(ke=new Array(we.indent_level+1).join(this.__indent_string)),this.__base_string=ke,this.__base_string_length=ke.length}function ye(we,ke){this.__indent_cache=new ge(we,ke),this.raw=!1,this._end_with_newline=we.end_with_newline,this.indent_size=we.indent_size,this.wrap_line_length=we.wrap_line_length,this.indent_empty_lines=we.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new re(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}re.prototype.clone_empty=function(){var we=new re(this.__parent);return we.set_indent(this.__indent_count,this.__alignment_count),we},re.prototype.item=function(we){return we<0?this.__items[this.__items.length+we]:this.__items[we]},re.prototype.has_match=function(we){for(var ke=this.__items.length-1;ke>=0;ke--)if(this.__items[ke].match(we))return!0;return!1},re.prototype.set_indent=function(we,ke){this.is_empty()&&(this.__indent_count=we||0,this.__alignment_count=ke||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},re.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},re.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},re.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var we=this.__parent.current_line;return we.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),we.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),we.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,we.__items[0]===" "&&(we.__items.splice(0,1),we.__character_count-=1),!0}return!1},re.prototype.is_empty=function(){return this.__items.length===0},re.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},re.prototype.push=function(we){this.__items.push(we);var ke=we.lastIndexOf(`
`);ke!==-1?this.__character_count=we.length-ke:this.__character_count+=we.length},re.prototype.pop=function(){var we=null;return this.is_empty()||(we=this.__items.pop(),this.__character_count-=we.length),we},re.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},re.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},re.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},re.prototype.toString=function(){var we="";return this.is_empty()?this.__parent.indent_empty_lines&&(we=this.__parent.get_indent_string(this.__indent_count)):(we=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),we+=this.__items.join("")),we},ge.prototype.get_indent_size=function(we,ke){var Se=this.__base_string_length;return ke=ke||0,we<0&&(Se=0),Se+=we*this.__indent_size,Se+=ke},ge.prototype.get_indent_string=function(we,ke){var Se=this.__base_string;return ke=ke||0,we<0&&(we=0,Se=""),ke+=we*this.__indent_size,this.__ensure_cache(ke),Se+=this.__cache[ke]},ge.prototype.__ensure_cache=function(we){for(;we>=this.__cache.length;)this.__add_column()},ge.prototype.__add_column=function(){var we=this.__cache.length,ke=0,Se="";this.__indent_size&&we>=this.__indent_size&&(we-=(ke=Math.floor(we/this.__indent_size))*this.__indent_size,Se=new Array(ke+1).join(this.__indent_string)),we&&(Se+=new Array(we+1).join(" ")),this.__cache.push(Se)},ye.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},ye.prototype.get_line_number=function(){return this.__lines.length},ye.prototype.get_indent_string=function(we,ke){return this.__indent_cache.get_indent_string(we,ke)},ye.prototype.get_indent_size=function(we,ke){return this.__indent_cache.get_indent_size(we,ke)},ye.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},ye.prototype.add_new_line=function(we){return!(this.is_empty()||!we&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},ye.prototype.get_code=function(we){this.trim(!0);var ke=this.current_line.pop();ke&&(ke[ke.length-1]===`
`&&(ke=ke.replace(/\n+$/g,"")),this.current_line.push(ke)),this._end_with_newline&&this.__add_outputline();var Se=this.__lines.join(`
`);return we!==`
`&&(Se=Se.replace(/[\n]/g,we)),Se},ye.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},ye.prototype.set_indent=function(we,ke){return we=we||0,ke=ke||0,this.next_line.set_indent(we,ke),this.__lines.length>1?(this.current_line.set_indent(we,ke),!0):(this.current_line.set_indent(),!1)},ye.prototype.add_raw_token=function(we){for(var ke=0;ke<we.newlines;ke++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(we.whitespace_before),this.current_line.push(we.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},ye.prototype.add_token=function(we){this.__add_space_before_token(),this.current_line.push(we),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},ye.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},ye.prototype.remove_indent=function(we){for(var ke=this.__lines.length;we<ke;)this.__lines[we]._remove_indent(),we++;this.current_line._remove_wrap_indent()},ye.prototype.trim=function(we){for(we=we!==void 0&&we,this.current_line.trim();we&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},ye.prototype.just_added_newline=function(){return this.current_line.is_empty()},ye.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},ye.prototype.ensure_empty_line_above=function(we,ke){for(var Se=this.__lines.length-2;Se>=0;){var Pe=this.__lines[Se];if(Pe.is_empty())break;if(Pe.item(0).indexOf(we)!==0&&Pe.item(-1)!==ke){this.__lines.splice(Se+1,0,new re(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Se--}},xe.exports.Output=ye},,,,function(xe){function re(we,ke){this.raw_options=ge(we,ke),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ge(we,ke){var Se,Pe={};for(Se in we=ye(we))Se!==ke&&(Pe[Se]=we[Se]);if(ke&&we[ke])for(Se in we[ke])Pe[Se]=we[ke][Se];return Pe}function ye(we){var ke,Se={};for(ke in we)Se[ke.replace(/-/g,"_")]=we[ke];return Se}re.prototype._get_array=function(we,ke){var Se=this.raw_options[we],Pe=ke||[];return typeof Se=="object"?Se!==null&&typeof Se.concat=="function"&&(Pe=Se.concat()):typeof Se=="string"&&(Pe=Se.split(/[^a-zA-Z0-9_\/\-]+/)),Pe},re.prototype._get_boolean=function(we,ke){var Se=this.raw_options[we];return Se===void 0?!!ke:!!Se},re.prototype._get_characters=function(we,ke){var Se=this.raw_options[we],Pe=ke||"";return typeof Se=="string"&&(Pe=Se.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Pe},re.prototype._get_number=function(we,ke){var Se=this.raw_options[we];ke=parseInt(ke,10),isNaN(ke)&&(ke=0);var Pe=parseInt(Se,10);return isNaN(Pe)&&(Pe=ke),Pe},re.prototype._get_selection=function(we,ke,Se){var Pe=this._get_selection_list(we,ke,Se);if(Pe.length!==1)throw new Error("Invalid Option Value: The option '"+we+`' can only be one of the following values:
`+ke+`
You passed in: '`+this.raw_options[we]+"'");return Pe[0]},re.prototype._get_selection_list=function(we,ke,Se){if(!ke||ke.length===0)throw new Error("Selection list cannot be empty.");if(Se=Se||[ke[0]],!this._is_valid_selection(Se,ke))throw new Error("Invalid Default Value!");var Pe=this._get_array(we,Se);if(!this._is_valid_selection(Pe,ke))throw new Error("Invalid Option Value: The option '"+we+`' can contain only the following values:
`+ke+`
You passed in: '`+this.raw_options[we]+"'");return Pe},re.prototype._is_valid_selection=function(we,ke){return we.length&&ke.length&&!we.some(function(Se){return ke.indexOf(Se)===-1})},xe.exports.Options=re,xe.exports.normalizeOpts=ye,xe.exports.mergeOpts=ge},,function(xe){var re=RegExp.prototype.hasOwnProperty("sticky");function ge(ye){this.__input=ye||"",this.__input_length=this.__input.length,this.__position=0}ge.prototype.restart=function(){this.__position=0},ge.prototype.back=function(){this.__position>0&&(this.__position-=1)},ge.prototype.hasNext=function(){return this.__position<this.__input_length},ge.prototype.next=function(){var ye=null;return this.hasNext()&&(ye=this.__input.charAt(this.__position),this.__position+=1),ye},ge.prototype.peek=function(ye){var we=null;return ye=ye||0,(ye+=this.__position)>=0&&ye<this.__input_length&&(we=this.__input.charAt(ye)),we},ge.prototype.__match=function(ye,we){ye.lastIndex=we;var ke=ye.exec(this.__input);return!ke||re&&ye.sticky||ke.index!==we&&(ke=null),ke},ge.prototype.test=function(ye,we){return we=we||0,(we+=this.__position)>=0&&we<this.__input_length&&!!this.__match(ye,we)},ge.prototype.testChar=function(ye,we){var ke=this.peek(we);return ye.lastIndex=0,ke!==null&&ye.test(ke)},ge.prototype.match=function(ye){var we=this.__match(ye,this.__position);return we?this.__position+=we[0].length:we=null,we},ge.prototype.read=function(ye,we,ke){var Se,Pe="";return ye&&(Se=this.match(ye))&&(Pe+=Se[0]),!we||!Se&&ye||(Pe+=this.readUntil(we,ke)),Pe},ge.prototype.readUntil=function(ye,we){var ke,Se=this.__position;ye.lastIndex=this.__position;var Pe=ye.exec(this.__input);return Pe?(Se=Pe.index,we&&(Se+=Pe[0].length)):Se=this.__input_length,ke=this.__input.substring(this.__position,Se),this.__position=Se,ke},ge.prototype.readUntilAfter=function(ye){return this.readUntil(ye,!0)},ge.prototype.get_regexp=function(ye,we){var ke=null,Se="g";return we&&re&&(Se="y"),typeof ye=="string"&&ye!==""?ke=new RegExp(ye,Se):ye&&(ke=new RegExp(ye.source,Se)),ke},ge.prototype.get_literal_regexp=function(ye){return RegExp(ye.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ge.prototype.peekUntilAfter=function(ye){var we=this.__position,ke=this.readUntilAfter(ye);return this.__position=we,ke},ge.prototype.lookBack=function(ye){var we=this.__position-1;return we>=ye.length&&this.__input.substring(we-ye.length,we).toLowerCase()===ye},xe.exports.InputScanner=ge},,,,,function(xe){function re(ge,ye){ge=typeof ge=="string"?ge:ge.source,ye=typeof ye=="string"?ye:ye.source,this.__directives_block_pattern=new RegExp(ge+/ beautify( \w+[:]\w+)+ /.source+ye,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ge+/\sbeautify\signore:end\s/.source+ye,"g")}re.prototype.get_directives=function(ge){if(!ge.match(this.__directives_block_pattern))return null;var ye={};this.__directive_pattern.lastIndex=0;for(var we=this.__directive_pattern.exec(ge);we;)ye[we[1]]=we[2],we=this.__directive_pattern.exec(ge);return ye},re.prototype.readIgnored=function(ge){return ge.readUntilAfter(this.__directives_end_ignore_pattern)},xe.exports.Directives=re},,function(xe,re,ge){var ye=ge(16).Beautifier,we=ge(17).Options;xe.exports=function(ke,Se){return new ye(ke,Se).beautify()},xe.exports.defaultOptions=function(){return new we}},function(xe,re,ge){var ye=ge(17).Options,we=ge(2).Output,ke=ge(8).InputScanner,Se=new(ge(13)).Directives(/\/\*/,/\*\//),Pe=/\r\n|[\r\n]/,Re=/\r\n|[\r\n]/g,Ne=/\s/,ze=/(?:\s|\n)+/g,Be=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,Ze=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function Xe(qe,Je){this._source_text=qe||"",this._options=new ye(Je),this._ch=null,this._input=null,this.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},this.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}Xe.prototype.eatString=function(qe){var Je="";for(this._ch=this._input.next();this._ch;){if(Je+=this._ch,this._ch==="\\")Je+=this._input.next();else if(qe.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return Je},Xe.prototype.eatWhitespace=function(qe){for(var Je=Ne.test(this._input.peek()),dt=0;Ne.test(this._input.peek());)this._ch=this._input.next(),qe&&this._ch===`
`&&(dt===0||dt<this._options.max_preserve_newlines)&&(dt++,this._output.add_new_line(!0));return Je},Xe.prototype.foundNestedPseudoClass=function(){for(var qe=0,Je=1,dt=this._input.peek(Je);dt;){if(dt==="{")return!0;if(dt==="(")qe+=1;else if(dt===")"){if(qe===0)return!1;qe-=1}else if(dt===";"||dt==="}")return!1;Je++,dt=this._input.peek(Je)}return!1},Xe.prototype.print_string=function(qe){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(qe)},Xe.prototype.preserveSingleSpace=function(qe){qe&&(this._output.space_before_token=!0)},Xe.prototype.indent=function(){this._indentLevel++},Xe.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},Xe.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var qe=this._source_text,Je=this._options.eol;Je==="auto"&&(Je=`
`,qe&&Pe.test(qe||"")&&(Je=qe.match(Pe)[0]));var dt=(qe=qe.replace(Re,`
`)).match(/^[\t ]*/)[0];this._output=new we(this._options,dt),this._input=new ke(qe),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var Ct,bt,xt=0,nt=!1,tt=!1,rt=!1,ht=!1,st=!1,pt=!1,vt=this._ch,ut=!1;Ct=this._input.read(ze)!=="",bt=vt,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),vt=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var Ut=this._input.read(Be),at=Se.get_directives(Ut);at&&at.ignore==="start"&&(Ut+=Se.readIgnored(this._input)),this.print_string(Ut),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(Ze)),this.eatWhitespace(!0);else if(this._ch==="@"||this._ch==="$")if(this.preserveSingleSpace(Ct),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var zt=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);zt.match(/[ :]$/)&&(zt=this.eatString(": ").replace(/\s$/,""),this.print_string(zt),this._output.space_before_token=!0),(zt=zt.replace(/\s$/,""))==="extend"?ht=!0:zt==="import"&&(st=!0),zt in this.NESTED_AT_RULE?(this._nestedLevel+=1,zt in this.CONDITIONAL_GROUP_RULE&&(rt=!0)):nt||xt!==0||zt.indexOf(":")===-1||(tt=!0,this.indent())}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(Ct),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")tt&&(tt=!1,this.outdent()),rt?(rt=!1,nt=this._indentLevel>=this._nestedLevel):nt=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&nt&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(bt==="("?this._output.space_before_token=!1:bt!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),bt==="{"&&this._output.trim(!0),st=!1,ht=!1,tt&&(this.outdent(),tt=!1),this.print_string(this._ch),nt=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var sn=0;sn<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;sn++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[sn])){ut=!0;break}!nt&&!rt||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||ht||xt!==0?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":")):(this.print_string(":"),tt||(tt=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if(this._ch==='"'||this._ch==="'"){var Mn=bt==='"'||bt==="'";this.preserveSingleSpace(Mn||Ct),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")ut=!1,xt===0?(tt&&(this.outdent(),tt=!1),ht=!1,st=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),xt++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),xt&&(xt--,this.outdent()));else{var rn=!1;this._input.lookBack("with")&&(rn=!0),this.preserveSingleSpace(Ct||rn),this.print_string(this._ch),tt&&bt==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),pt=!0):(this.eatWhitespace(),xt++,this.indent())}else if(this._ch===")")xt&&(xt--,this.outdent()),pt&&this._input.peek()===";"&&this._options.selector_separator_newline&&(pt=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||tt&&!pt||xt!==0||st||ht?this._output.space_before_token=!0:this._output.add_new_line();else if(this._ch!==">"&&this._ch!=="+"&&this._ch!=="~"||tt||xt!==0)if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(Ct),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),Ne.test(this._ch)&&(this._ch="");else if(this._ch!=="!"||this._input.lookBack("\\")){var on=bt==='"'||bt==="'";this.preserveSingleSpace(on||Ct),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&ut&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Ne.test(this._ch)&&(this._ch=""));return this._output.get_code(Je)},xe.exports.Beautifier=Xe},function(xe,re,ge){var ye=ge(6).Options;function we(ke){ye.call(this,ke,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var Se=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||Se;var Pe=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var Re=0;Re<Pe.length;Re++)Pe[Re]!=="expand"?this.brace_style="collapse":this.brace_style=Pe[Re]}we.prototype=new ye,xe.exports.Options=we}],Ee={},j=function xe(re){var ge=Ee[re];if(ge!==void 0)return ge.exports;var ye=Ee[re]={exports:{}};return te[re](ye,ye.exports,xe),ye.exports}(15);he=j})();var ce=he;(V=function(){return{css_beautify:ce}}.apply(q,[]))===void 0||(G.exports=V)})()},3566:function(G,q,V){var he,ce;(function(){var te;(function(){var j=[,,function(ge){function ye(Se){this.__parent=Se,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function we(Se,Pe){this.__cache=[""],this.__indent_size=Se.indent_size,this.__indent_string=Se.indent_char,Se.indent_with_tabs||(this.__indent_string=new Array(Se.indent_size+1).join(Se.indent_char)),Pe=Pe||"",Se.indent_level>0&&(Pe=new Array(Se.indent_level+1).join(this.__indent_string)),this.__base_string=Pe,this.__base_string_length=Pe.length}function ke(Se,Pe){this.__indent_cache=new we(Se,Pe),this.raw=!1,this._end_with_newline=Se.end_with_newline,this.indent_size=Se.indent_size,this.wrap_line_length=Se.wrap_line_length,this.indent_empty_lines=Se.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new ye(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}ye.prototype.clone_empty=function(){var Se=new ye(this.__parent);return Se.set_indent(this.__indent_count,this.__alignment_count),Se},ye.prototype.item=function(Se){return Se<0?this.__items[this.__items.length+Se]:this.__items[Se]},ye.prototype.has_match=function(Se){for(var Pe=this.__items.length-1;Pe>=0;Pe--)if(this.__items[Pe].match(Se))return!0;return!1},ye.prototype.set_indent=function(Se,Pe){this.is_empty()&&(this.__indent_count=Se||0,this.__alignment_count=Pe||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},ye.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},ye.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},ye.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var Se=this.__parent.current_line;return Se.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),Se.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),Se.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,Se.__items[0]===" "&&(Se.__items.splice(0,1),Se.__character_count-=1),!0}return!1},ye.prototype.is_empty=function(){return this.__items.length===0},ye.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},ye.prototype.push=function(Se){this.__items.push(Se);var Pe=Se.lastIndexOf(`
`);Pe!==-1?this.__character_count=Se.length-Pe:this.__character_count+=Se.length},ye.prototype.pop=function(){var Se=null;return this.is_empty()||(Se=this.__items.pop(),this.__character_count-=Se.length),Se},ye.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},ye.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},ye.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},ye.prototype.toString=function(){var Se="";return this.is_empty()?this.__parent.indent_empty_lines&&(Se=this.__parent.get_indent_string(this.__indent_count)):(Se=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),Se+=this.__items.join("")),Se},we.prototype.get_indent_size=function(Se,Pe){var Re=this.__base_string_length;return Pe=Pe||0,Se<0&&(Re=0),Re+=Se*this.__indent_size,Re+=Pe},we.prototype.get_indent_string=function(Se,Pe){var Re=this.__base_string;return Pe=Pe||0,Se<0&&(Se=0,Re=""),Pe+=Se*this.__indent_size,this.__ensure_cache(Pe),Re+=this.__cache[Pe]},we.prototype.__ensure_cache=function(Se){for(;Se>=this.__cache.length;)this.__add_column()},we.prototype.__add_column=function(){var Se=this.__cache.length,Pe=0,Re="";this.__indent_size&&Se>=this.__indent_size&&(Se-=(Pe=Math.floor(Se/this.__indent_size))*this.__indent_size,Re=new Array(Pe+1).join(this.__indent_string)),Se&&(Re+=new Array(Se+1).join(" ")),this.__cache.push(Re)},ke.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},ke.prototype.get_line_number=function(){return this.__lines.length},ke.prototype.get_indent_string=function(Se,Pe){return this.__indent_cache.get_indent_string(Se,Pe)},ke.prototype.get_indent_size=function(Se,Pe){return this.__indent_cache.get_indent_size(Se,Pe)},ke.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},ke.prototype.add_new_line=function(Se){return!(this.is_empty()||!Se&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},ke.prototype.get_code=function(Se){this.trim(!0);var Pe=this.current_line.pop();Pe&&(Pe[Pe.length-1]===`
`&&(Pe=Pe.replace(/\n+$/g,"")),this.current_line.push(Pe)),this._end_with_newline&&this.__add_outputline();var Re=this.__lines.join(`
`);return Se!==`
`&&(Re=Re.replace(/[\n]/g,Se)),Re},ke.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},ke.prototype.set_indent=function(Se,Pe){return Se=Se||0,Pe=Pe||0,this.next_line.set_indent(Se,Pe),this.__lines.length>1?(this.current_line.set_indent(Se,Pe),!0):(this.current_line.set_indent(),!1)},ke.prototype.add_raw_token=function(Se){for(var Pe=0;Pe<Se.newlines;Pe++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(Se.whitespace_before),this.current_line.push(Se.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},ke.prototype.add_token=function(Se){this.__add_space_before_token(),this.current_line.push(Se),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},ke.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},ke.prototype.remove_indent=function(Se){for(var Pe=this.__lines.length;Se<Pe;)this.__lines[Se]._remove_indent(),Se++;this.current_line._remove_wrap_indent()},ke.prototype.trim=function(Se){for(Se=Se!==void 0&&Se,this.current_line.trim();Se&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},ke.prototype.just_added_newline=function(){return this.current_line.is_empty()},ke.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},ke.prototype.ensure_empty_line_above=function(Se,Pe){for(var Re=this.__lines.length-2;Re>=0;){var Ne=this.__lines[Re];if(Ne.is_empty())break;if(Ne.item(0).indexOf(Se)!==0&&Ne.item(-1)!==Pe){this.__lines.splice(Re+1,0,new ye(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Re--}},ge.exports.Output=ke},function(ge){ge.exports.Token=function(ye,we,ke,Se){this.type=ye,this.text=we,this.comments_before=null,this.newlines=ke||0,this.whitespace_before=Se||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(ge){function ye(Se,Pe){this.raw_options=we(Se,Pe),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function we(Se,Pe){var Re,Ne={};for(Re in Se=ke(Se))Re!==Pe&&(Ne[Re]=Se[Re]);if(Pe&&Se[Pe])for(Re in Se[Pe])Ne[Re]=Se[Pe][Re];return Ne}function ke(Se){var Pe,Re={};for(Pe in Se)Re[Pe.replace(/-/g,"_")]=Se[Pe];return Re}ye.prototype._get_array=function(Se,Pe){var Re=this.raw_options[Se],Ne=Pe||[];return typeof Re=="object"?Re!==null&&typeof Re.concat=="function"&&(Ne=Re.concat()):typeof Re=="string"&&(Ne=Re.split(/[^a-zA-Z0-9_\/\-]+/)),Ne},ye.prototype._get_boolean=function(Se,Pe){var Re=this.raw_options[Se];return Re===void 0?!!Pe:!!Re},ye.prototype._get_characters=function(Se,Pe){var Re=this.raw_options[Se],Ne=Pe||"";return typeof Re=="string"&&(Ne=Re.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Ne},ye.prototype._get_number=function(Se,Pe){var Re=this.raw_options[Se];Pe=parseInt(Pe,10),isNaN(Pe)&&(Pe=0);var Ne=parseInt(Re,10);return isNaN(Ne)&&(Ne=Pe),Ne},ye.prototype._get_selection=function(Se,Pe,Re){var Ne=this._get_selection_list(Se,Pe,Re);if(Ne.length!==1)throw new Error("Invalid Option Value: The option '"+Se+`' can only be one of the following values:
`+Pe+`
You passed in: '`+this.raw_options[Se]+"'");return Ne[0]},ye.prototype._get_selection_list=function(Se,Pe,Re){if(!Pe||Pe.length===0)throw new Error("Selection list cannot be empty.");if(Re=Re||[Pe[0]],!this._is_valid_selection(Re,Pe))throw new Error("Invalid Default Value!");var Ne=this._get_array(Se,Re);if(!this._is_valid_selection(Ne,Pe))throw new Error("Invalid Option Value: The option '"+Se+`' can contain only the following values:
`+Pe+`
You passed in: '`+this.raw_options[Se]+"'");return Ne},ye.prototype._is_valid_selection=function(Se,Pe){return Se.length&&Pe.length&&!Se.some(function(Re){return Pe.indexOf(Re)===-1})},ge.exports.Options=ye,ge.exports.normalizeOpts=ke,ge.exports.mergeOpts=we},,function(ge){var ye=RegExp.prototype.hasOwnProperty("sticky");function we(ke){this.__input=ke||"",this.__input_length=this.__input.length,this.__position=0}we.prototype.restart=function(){this.__position=0},we.prototype.back=function(){this.__position>0&&(this.__position-=1)},we.prototype.hasNext=function(){return this.__position<this.__input_length},we.prototype.next=function(){var ke=null;return this.hasNext()&&(ke=this.__input.charAt(this.__position),this.__position+=1),ke},we.prototype.peek=function(ke){var Se=null;return ke=ke||0,(ke+=this.__position)>=0&&ke<this.__input_length&&(Se=this.__input.charAt(ke)),Se},we.prototype.__match=function(ke,Se){ke.lastIndex=Se;var Pe=ke.exec(this.__input);return!Pe||ye&&ke.sticky||Pe.index!==Se&&(Pe=null),Pe},we.prototype.test=function(ke,Se){return Se=Se||0,(Se+=this.__position)>=0&&Se<this.__input_length&&!!this.__match(ke,Se)},we.prototype.testChar=function(ke,Se){var Pe=this.peek(Se);return ke.lastIndex=0,Pe!==null&&ke.test(Pe)},we.prototype.match=function(ke){var Se=this.__match(ke,this.__position);return Se?this.__position+=Se[0].length:Se=null,Se},we.prototype.read=function(ke,Se,Pe){var Re,Ne="";return ke&&(Re=this.match(ke))&&(Ne+=Re[0]),!Se||!Re&&ke||(Ne+=this.readUntil(Se,Pe)),Ne},we.prototype.readUntil=function(ke,Se){var Pe,Re=this.__position;ke.lastIndex=this.__position;var Ne=ke.exec(this.__input);return Ne?(Re=Ne.index,Se&&(Re+=Ne[0].length)):Re=this.__input_length,Pe=this.__input.substring(this.__position,Re),this.__position=Re,Pe},we.prototype.readUntilAfter=function(ke){return this.readUntil(ke,!0)},we.prototype.get_regexp=function(ke,Se){var Pe=null,Re="g";return Se&&ye&&(Re="y"),typeof ke=="string"&&ke!==""?Pe=new RegExp(ke,Re):ke&&(Pe=new RegExp(ke.source,Re)),Pe},we.prototype.get_literal_regexp=function(ke){return RegExp(ke.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},we.prototype.peekUntilAfter=function(ke){var Se=this.__position,Pe=this.readUntilAfter(ke);return this.__position=Se,Pe},we.prototype.lookBack=function(ke){var Se=this.__position-1;return Se>=ke.length&&this.__input.substring(Se-ke.length,Se).toLowerCase()===ke},ge.exports.InputScanner=we},function(ge,ye,we){var ke=we(8).InputScanner,Se=we(3).Token,Pe=we(10).TokenStream,Re=we(11).WhitespacePattern,Ne={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},ze=function(Be,Ze){this._input=new ke(Be),this._options=Ze||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new Re(this._input)};ze.prototype.tokenize=function(){var Be;this._input.restart(),this.__tokens=new Pe,this._reset();for(var Ze=new Se(Ne.START,""),Xe=null,qe=[],Je=new Pe;Ze.type!==Ne.EOF;){for(Be=this._get_next_token(Ze,Xe);this._is_comment(Be);)Je.add(Be),Be=this._get_next_token(Ze,Xe);Je.isEmpty()||(Be.comments_before=Je,Je=new Pe),Be.parent=Xe,this._is_opening(Be)?(qe.push(Xe),Xe=Be):Xe&&this._is_closing(Be,Xe)&&(Be.opened=Xe,Xe.closed=Be,Xe=qe.pop(),Be.parent=Xe),Be.previous=Ze,Ze.next=Be,this.__tokens.add(Be),Ze=Be}return this.__tokens},ze.prototype._is_first_token=function(){return this.__tokens.isEmpty()},ze.prototype._reset=function(){},ze.prototype._get_next_token=function(Be,Ze){this._readWhitespace();var Xe=this._input.read(/.+/g);return Xe?this._create_token(Ne.RAW,Xe):this._create_token(Ne.EOF,"")},ze.prototype._is_comment=function(Be){return!1},ze.prototype._is_opening=function(Be){return!1},ze.prototype._is_closing=function(Be,Ze){return!1},ze.prototype._create_token=function(Be,Ze){return new Se(Be,Ze,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},ze.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},ge.exports.Tokenizer=ze,ge.exports.TOKEN=Ne},function(ge){function ye(we){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=we}ye.prototype.restart=function(){this.__position=0},ye.prototype.isEmpty=function(){return this.__tokens_length===0},ye.prototype.hasNext=function(){return this.__position<this.__tokens_length},ye.prototype.next=function(){var we=null;return this.hasNext()&&(we=this.__tokens[this.__position],this.__position+=1),we},ye.prototype.peek=function(we){var ke=null;return we=we||0,(we+=this.__position)>=0&&we<this.__tokens_length&&(ke=this.__tokens[we]),ke},ye.prototype.add=function(we){this.__parent_token&&(we.parent=this.__parent_token),this.__tokens.push(we),this.__tokens_length+=1},ge.exports.TokenStream=ye},function(ge,ye,we){var ke=we(12).Pattern;function Se(Pe,Re){ke.call(this,Pe,Re),Re?this._line_regexp=this._input.get_regexp(Re._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}Se.prototype=new ke,Se.prototype.__set_whitespace_patterns=function(Pe,Re){Pe+="\\t ",Re+="\\n\\r",this._match_pattern=this._input.get_regexp("["+Pe+Re+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+Re+"]")},Se.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var Pe=this._input.read(this._match_pattern);if(Pe===" ")this.whitespace_before_token=" ";else if(Pe){var Re=this.__split(this._newline_regexp,Pe);this.newline_count=Re.length-1,this.whitespace_before_token=Re[this.newline_count]}return Pe},Se.prototype.matching=function(Pe,Re){var Ne=this._create();return Ne.__set_whitespace_patterns(Pe,Re),Ne._update(),Ne},Se.prototype._create=function(){return new Se(this._input,this)},Se.prototype.__split=function(Pe,Re){Pe.lastIndex=0;for(var Ne=0,ze=[],Be=Pe.exec(Re);Be;)ze.push(Re.substring(Ne,Be.index)),Ne=Be.index+Be[0].length,Be=Pe.exec(Re);return Ne<Re.length?ze.push(Re.substring(Ne,Re.length)):ze.push(""),ze},ge.exports.WhitespacePattern=Se},function(ge){function ye(we,ke){this._input=we,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,ke&&(this._starting_pattern=this._input.get_regexp(ke._starting_pattern,!0),this._match_pattern=this._input.get_regexp(ke._match_pattern,!0),this._until_pattern=this._input.get_regexp(ke._until_pattern),this._until_after=ke._until_after)}ye.prototype.read=function(){var we=this._input.read(this._starting_pattern);return this._starting_pattern&&!we||(we+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),we},ye.prototype.read_match=function(){return this._input.match(this._match_pattern)},ye.prototype.until_after=function(we){var ke=this._create();return ke._until_after=!0,ke._until_pattern=this._input.get_regexp(we),ke._update(),ke},ye.prototype.until=function(we){var ke=this._create();return ke._until_after=!1,ke._until_pattern=this._input.get_regexp(we),ke._update(),ke},ye.prototype.starting_with=function(we){var ke=this._create();return ke._starting_pattern=this._input.get_regexp(we,!0),ke._update(),ke},ye.prototype.matching=function(we){var ke=this._create();return ke._match_pattern=this._input.get_regexp(we,!0),ke._update(),ke},ye.prototype._create=function(){return new ye(this._input,this)},ye.prototype._update=function(){},ge.exports.Pattern=ye},function(ge){function ye(we,ke){we=typeof we=="string"?we:we.source,ke=typeof ke=="string"?ke:ke.source,this.__directives_block_pattern=new RegExp(we+/ beautify( \w+[:]\w+)+ /.source+ke,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(we+/\sbeautify\signore:end\s/.source+ke,"g")}ye.prototype.get_directives=function(we){if(!we.match(this.__directives_block_pattern))return null;var ke={};this.__directive_pattern.lastIndex=0;for(var Se=this.__directive_pattern.exec(we);Se;)ke[Se[1]]=Se[2],Se=this.__directive_pattern.exec(we);return ke},ye.prototype.readIgnored=function(we){return we.readUntilAfter(this.__directives_end_ignore_pattern)},ge.exports.Directives=ye},function(ge,ye,we){var ke=we(12).Pattern,Se={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function Pe(Re,Ne){ke.call(this,Re,Ne),this.__template_pattern=null,this._disabled=Object.assign({},Se),this._excluded=Object.assign({},Se),Ne&&(this.__template_pattern=this._input.get_regexp(Ne.__template_pattern),this._excluded=Object.assign(this._excluded,Ne._excluded),this._disabled=Object.assign(this._disabled,Ne._disabled));var ze=new ke(Re);this.__patterns={handlebars_comment:ze.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:ze.starting_with(/{{{/).until_after(/}}}/),handlebars:ze.starting_with(/{{/).until_after(/}}/),php:ze.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:ze.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:ze.starting_with(/{%/).until_after(/%}/),django_value:ze.starting_with(/{{/).until_after(/}}/),django_comment:ze.starting_with(/{#/).until_after(/#}/),smarty:ze.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:ze.starting_with(/{\*/).until_after(/\*}/),smarty_literal:ze.starting_with(/{literal}/).until_after(/{\/literal}/)}}Pe.prototype=new ke,Pe.prototype._create=function(){return new Pe(this._input,this)},Pe.prototype._update=function(){this.__set_templated_pattern()},Pe.prototype.disable=function(Re){var Ne=this._create();return Ne._disabled[Re]=!0,Ne._update(),Ne},Pe.prototype.read_options=function(Re){var Ne=this._create();for(var ze in Se)Ne._disabled[ze]=Re.templating.indexOf(ze)===-1;return Ne._update(),Ne},Pe.prototype.exclude=function(Re){var Ne=this._create();return Ne._excluded[Re]=!0,Ne._update(),Ne},Pe.prototype.read=function(){var Re="";Re=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Ne=this._read_template();Ne;)this._match_pattern?Ne+=this._input.read(this._match_pattern):Ne+=this._input.readUntil(this.__template_pattern),Re+=Ne,Ne=this._read_template();return this._until_after&&(Re+=this._input.readUntilAfter(this._until_pattern)),Re},Pe.prototype.__set_templated_pattern=function(){var Re=[];this._disabled.php||Re.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||Re.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||Re.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(Re.push(this.__patterns.django._starting_pattern.source),Re.push(this.__patterns.django_value._starting_pattern.source),Re.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||Re.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&Re.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+Re.join("|")+")")},Pe.prototype._read_template=function(){var Re="",Ne=this._input.peek();if(Ne==="<"){var ze=this._input.peek(1);this._disabled.php||this._excluded.php||ze!=="?"||(Re=Re||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||ze!=="%"||(Re=Re||this.__patterns.erb.read())}else Ne==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(Re=(Re=(Re=Re||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(Re=Re||this.__patterns.django_value.read()),this._excluded.django||(Re=(Re=Re||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(Re=(Re=(Re=Re||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return Re},ge.exports.TemplatablePattern=Pe},,,,function(ge,ye,we){var ke=we(19).Beautifier,Se=we(20).Options;ge.exports=function(Pe,Re,Ne,ze){return new ke(Pe,Re,Ne,ze).beautify()},ge.exports.defaultOptions=function(){return new Se}},function(ge,ye,we){var ke=we(20).Options,Se=we(2).Output,Pe=we(21).Tokenizer,Re=we(21).TOKEN,Ne=/\r\n|[\r\n]/,ze=/\r\n|[\r\n]/g,Be=function(nt,tt){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=nt.max_preserve_newlines,this.preserve_newlines=nt.preserve_newlines,this._output=new Se(nt,tt)};Be.prototype.current_line_has_match=function(nt){return this._output.current_line.has_match(nt)},Be.prototype.set_space_before_token=function(nt,tt){this._output.space_before_token=nt,this._output.non_breaking_space=tt},Be.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},Be.prototype.add_raw_token=function(nt){this._output.add_raw_token(nt)},Be.prototype.print_preserved_newlines=function(nt){var tt=0;nt.type!==Re.TEXT&&nt.previous.type!==Re.TEXT&&(tt=nt.newlines?1:0),this.preserve_newlines&&(tt=nt.newlines<this.max_preserve_newlines+1?nt.newlines:this.max_preserve_newlines+1);for(var rt=0;rt<tt;rt++)this.print_newline(rt>0);return tt!==0},Be.prototype.traverse_whitespace=function(nt){return!(!nt.whitespace_before&&!nt.newlines)&&(this.print_preserved_newlines(nt)||(this._output.space_before_token=!0),!0)},Be.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},Be.prototype.print_newline=function(nt){this._output.add_new_line(nt)},Be.prototype.print_token=function(nt){nt.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(nt.text))},Be.prototype.indent=function(){this.indent_level++},Be.prototype.get_full_indent=function(nt){return(nt=this.indent_level+(nt||0))<1?"":this._output.get_indent_string(nt)};var Ze=function(nt,tt){var rt=null,ht=null;return tt.closed?(nt==="script"?rt="text/javascript":nt==="style"&&(rt="text/css"),rt=function(st){for(var pt=null,vt=st.next;vt.type!==Re.EOF&&st.closed!==vt;){if(vt.type===Re.ATTRIBUTE&&vt.text==="type"){vt.next&&vt.next.type===Re.EQUALS&&vt.next.next&&vt.next.next.type===Re.VALUE&&(pt=vt.next.next.text);break}vt=vt.next}return pt}(tt)||rt,rt.search("text/css")>-1?ht="css":rt.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?ht="javascript":rt.search(/(text|application|dojo)\/(x-)?(html)/)>-1?ht="html":rt.search(/test\/null/)>-1&&(ht="null"),ht):null};function Xe(nt,tt){return tt.indexOf(nt)!==-1}function qe(nt,tt,rt){this.parent=nt||null,this.tag=tt?tt.tag_name:"",this.indent_level=rt||0,this.parser_token=tt||null}function Je(nt){this._printer=nt,this._current_frame=null}function dt(nt,tt,rt,ht){this._source_text=nt||"",tt=tt||{},this._js_beautify=rt,this._css_beautify=ht,this._tag_stack=null;var st=new ke(tt,"html");this._options=st,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}Je.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},Je.prototype.record_tag=function(nt){var tt=new qe(this._current_frame,nt,this._printer.indent_level);this._current_frame=tt},Je.prototype._try_pop_frame=function(nt){var tt=null;return nt&&(tt=nt.parser_token,this._printer.indent_level=nt.indent_level,this._current_frame=nt.parent),tt},Je.prototype._get_frame=function(nt,tt){for(var rt=this._current_frame;rt&&nt.indexOf(rt.tag)===-1;){if(tt&&tt.indexOf(rt.tag)!==-1){rt=null;break}rt=rt.parent}return rt},Je.prototype.try_pop=function(nt,tt){var rt=this._get_frame([nt],tt);return this._try_pop_frame(rt)},Je.prototype.indent_to_tag=function(nt){var tt=this._get_frame(nt);tt&&(this._printer.indent_level=tt.indent_level)},dt.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var nt=this._source_text,tt=this._options.eol;this._options.eol==="auto"&&(tt=`
`,nt&&Ne.test(nt)&&(tt=nt.match(Ne)[0]));var rt=(nt=nt.replace(ze,`
`)).match(/^[\t ]*/)[0],ht={text:"",type:""},st=new Ct,pt=new Be(this._options,rt),vt=new Pe(nt,this._options).tokenize();this._tag_stack=new Je(pt);for(var ut=null,Ut=vt.next();Ut.type!==Re.EOF;)Ut.type===Re.TAG_OPEN||Ut.type===Re.COMMENT?st=ut=this._handle_tag_open(pt,Ut,st,ht):Ut.type===Re.ATTRIBUTE||Ut.type===Re.EQUALS||Ut.type===Re.VALUE||Ut.type===Re.TEXT&&!st.tag_complete?ut=this._handle_inside_tag(pt,Ut,st,vt):Ut.type===Re.TAG_CLOSE?ut=this._handle_tag_close(pt,Ut,st):Ut.type===Re.TEXT?ut=this._handle_text(pt,Ut,st):pt.add_raw_token(Ut),ht=ut,Ut=vt.next();return pt._output.get_code(tt)},dt.prototype._handle_tag_close=function(nt,tt,rt){var ht={text:tt.text,type:tt.type};return nt.alignment_size=0,rt.tag_complete=!0,nt.set_space_before_token(tt.newlines||tt.whitespace_before!=="",!0),rt.is_unformatted?nt.add_raw_token(tt):(rt.tag_start_char==="<"&&(nt.set_space_before_token(tt.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&rt.has_wrapped_attrs&&nt.print_newline(!1)),nt.print_token(tt)),!rt.indent_content||rt.is_unformatted||rt.is_content_unformatted||(nt.indent(),rt.indent_content=!1),rt.is_inline_element||rt.is_unformatted||rt.is_content_unformatted||nt.set_wrap_point(),ht},dt.prototype._handle_inside_tag=function(nt,tt,rt,ht){var st=rt.has_wrapped_attrs,pt={text:tt.text,type:tt.type};if(nt.set_space_before_token(tt.newlines||tt.whitespace_before!=="",!0),rt.is_unformatted)nt.add_raw_token(tt);else if(rt.tag_start_char==="{"&&tt.type===Re.TEXT)nt.print_preserved_newlines(tt)?(tt.newlines=0,nt.add_raw_token(tt)):nt.print_token(tt);else{if(tt.type===Re.ATTRIBUTE?(nt.set_space_before_token(!0),rt.attr_count+=1):(tt.type===Re.EQUALS||tt.type===Re.VALUE&&tt.previous.type===Re.EQUALS)&&nt.set_space_before_token(!1),tt.type===Re.ATTRIBUTE&&rt.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(nt.traverse_whitespace(tt),st=st||tt.newlines!==0),this._is_wrap_attributes_force)){var vt=rt.attr_count>1;if(this._is_wrap_attributes_force_expand_multiline&&rt.attr_count===1){var ut,Ut=!0,at=0;do{if((ut=ht.peek(at)).type===Re.ATTRIBUTE){Ut=!1;break}at+=1}while(at<4&&ut.type!==Re.EOF&&ut.type!==Re.TAG_CLOSE);vt=!Ut}vt&&(nt.print_newline(!1),st=!0)}nt.print_token(tt),st=st||nt.previous_token_wrapped(),rt.has_wrapped_attrs=st}return pt},dt.prototype._handle_text=function(nt,tt,rt){var ht={text:tt.text,type:"TK_CONTENT"};return rt.custom_beautifier_name?this._print_custom_beatifier_text(nt,tt,rt):rt.is_unformatted||rt.is_content_unformatted?nt.add_raw_token(tt):(nt.traverse_whitespace(tt),nt.print_token(tt)),ht},dt.prototype._print_custom_beatifier_text=function(nt,tt,rt){var ht=this;if(tt.text!==""){var st,pt=tt.text,vt=1,ut="",Ut="";rt.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?st=this._js_beautify:rt.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?st=this._css_beautify:rt.custom_beautifier_name==="html"&&(st=function(rn,on){return new dt(rn,on,ht._js_beautify,ht._css_beautify).beautify()}),this._options.indent_scripts==="keep"?vt=0:this._options.indent_scripts==="separate"&&(vt=-nt.indent_level);var at=nt.get_full_indent(vt);if(pt=pt.replace(/\n[ \t]*$/,""),rt.custom_beautifier_name!=="html"&&pt[0]==="<"&&pt.match(/^(<!--|<!\[CDATA\[)/)){var zt=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(pt);if(!zt)return void nt.add_raw_token(tt);ut=at+zt[1]+`
`,pt=zt[4],zt[5]&&(Ut=at+zt[5]),pt=pt.replace(/\n[ \t]*$/,""),(zt[2]||zt[3].indexOf(`
`)!==-1)&&(zt=zt[3].match(/[ \t]+$/))&&(tt.whitespace_before=zt[0])}if(pt)if(st){var sn=function(){this.eol=`
`};sn.prototype=this._options.raw_options,pt=st(at+pt,new sn)}else{var Mn=tt.whitespace_before;Mn&&(pt=pt.replace(new RegExp(`
(`+Mn+")?","g"),`
`)),pt=at+pt.replace(/\n/g,`
`+at)}ut&&(pt=pt?ut+pt+`
`+Ut:ut+Ut),nt.print_newline(!1),pt&&(tt.text=pt,tt.whitespace_before="",tt.newlines=0,nt.add_raw_token(tt),nt.print_newline(!0))}},dt.prototype._handle_tag_open=function(nt,tt,rt,ht){var st=this._get_tag_open_token(tt);return!rt.is_unformatted&&!rt.is_content_unformatted||rt.is_empty_element||tt.type!==Re.TAG_OPEN||tt.text.indexOf("</")!==0?(nt.traverse_whitespace(tt),this._set_tag_position(nt,tt,st,rt,ht),st.is_inline_element||nt.set_wrap_point(),nt.print_token(tt)):(nt.add_raw_token(tt),st.start_tag_token=this._tag_stack.try_pop(st.tag_name)),(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(st.alignment_size=tt.text.length+1),st.tag_complete||st.is_unformatted||(nt.alignment_size=st.alignment_size),st};var Ct=function(nt,tt){if(this.parent=nt||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",tt){var rt;this.tag_start_char=tt.text[0],this.text=tt.text,this.tag_start_char==="<"?(rt=tt.text.match(/^<([^\s>]*)/),this.tag_check=rt?rt[1]:""):(rt=tt.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=rt?rt[1]:"",(tt.text.startsWith("{{#>")||tt.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&tt.next!==null?this.tag_check=tt.next.text.split(" ")[0]:this.tag_check=tt.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),tt.type===Re.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||tt.closed&&tt.closed.text==="/>";var ht=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(ht=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(ht)))}else this.tag_complete=!0};dt.prototype._get_tag_open_token=function(nt){var tt=new Ct(this._tag_stack.get_parser_token(),nt);return tt.alignment_size=this._options.wrap_attributes_indent_size,tt.is_end_tag=tt.is_end_tag||Xe(tt.tag_check,this._options.void_elements),tt.is_empty_element=tt.tag_complete||tt.is_start_tag&&tt.is_end_tag,tt.is_unformatted=!tt.tag_complete&&Xe(tt.tag_check,this._options.unformatted),tt.is_content_unformatted=!tt.is_empty_element&&Xe(tt.tag_check,this._options.content_unformatted),tt.is_inline_element=Xe(tt.tag_name,this._options.inline)||tt.tag_name.includes("-")||tt.tag_start_char==="{",tt},dt.prototype._set_tag_position=function(nt,tt,rt,ht,st){if(rt.is_empty_element||(rt.is_end_tag?rt.start_tag_token=this._tag_stack.try_pop(rt.tag_name):(this._do_optional_end_element(rt)&&(rt.is_inline_element||nt.print_newline(!1)),this._tag_stack.record_tag(rt),rt.tag_name!=="script"&&rt.tag_name!=="style"||rt.is_unformatted||rt.is_content_unformatted||(rt.custom_beautifier_name=Ze(rt.tag_check,tt)))),Xe(rt.tag_check,this._options.extra_liners)&&(nt.print_newline(!1),nt._output.just_added_blankline()||nt.print_newline(!0)),rt.is_empty_element)rt.tag_start_char==="{"&&rt.tag_check==="else"&&(this._tag_stack.indent_to_tag(["if","unless","each"]),rt.indent_content=!0,nt.current_line_has_match(/{{#if/)||nt.print_newline(!1)),rt.tag_name==="!--"&&st.type===Re.TAG_CLOSE&&ht.is_end_tag&&rt.text.indexOf(`
`)===-1||(rt.is_inline_element||rt.is_unformatted||nt.print_newline(!1),this._calcluate_parent_multiline(nt,rt));else if(rt.is_end_tag){var pt=!1;pt=(pt=rt.start_tag_token&&rt.start_tag_token.multiline_content)||!rt.is_inline_element&&!(ht.is_inline_element||ht.is_unformatted)&&!(st.type===Re.TAG_CLOSE&&rt.start_tag_token===ht)&&st.type!=="TK_CONTENT",(rt.is_content_unformatted||rt.is_unformatted)&&(pt=!1),pt&&nt.print_newline(!1)}else rt.indent_content=!rt.custom_beautifier_name,rt.tag_start_char==="<"&&(rt.tag_name==="html"?rt.indent_content=this._options.indent_inner_html:rt.tag_name==="head"?rt.indent_content=this._options.indent_head_inner_html:rt.tag_name==="body"&&(rt.indent_content=this._options.indent_body_inner_html)),rt.is_inline_element||rt.is_unformatted||st.type==="TK_CONTENT"&&!rt.is_content_unformatted||nt.print_newline(!1),this._calcluate_parent_multiline(nt,rt)},dt.prototype._calcluate_parent_multiline=function(nt,tt){!tt.parent||!nt._output.just_added_newline()||(tt.is_inline_element||tt.is_unformatted)&&tt.parent.is_inline_element||(tt.parent.multiline_content=!0)};var bt=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","nav","ol","p","pre","section","table","ul"],xt=["a","audio","del","ins","map","noscript","video"];dt.prototype._do_optional_end_element=function(nt){var tt=null;if(!nt.is_empty_element&&nt.is_start_tag&&nt.parent){if(nt.tag_name==="body")tt=tt||this._tag_stack.try_pop("head");else if(nt.tag_name==="li")tt=tt||this._tag_stack.try_pop("li",["ol","ul"]);else if(nt.tag_name==="dd"||nt.tag_name==="dt")tt=(tt=tt||this._tag_stack.try_pop("dt",["dl"]))||this._tag_stack.try_pop("dd",["dl"]);else if(nt.parent.tag_name==="p"&&bt.indexOf(nt.tag_name)!==-1){var rt=nt.parent.parent;rt&&xt.indexOf(rt.tag_name)!==-1||(tt=tt||this._tag_stack.try_pop("p"))}else nt.tag_name==="rp"||nt.tag_name==="rt"?tt=(tt=tt||this._tag_stack.try_pop("rt",["ruby","rtc"]))||this._tag_stack.try_pop("rp",["ruby","rtc"]):nt.tag_name==="optgroup"?tt=tt||this._tag_stack.try_pop("optgroup",["select"]):nt.tag_name==="option"?tt=tt||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):nt.tag_name==="colgroup"?tt=tt||this._tag_stack.try_pop("caption",["table"]):nt.tag_name==="thead"?tt=(tt=tt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]):nt.tag_name==="tbody"||nt.tag_name==="tfoot"?tt=(tt=(tt=(tt=tt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("thead",["table"]))||this._tag_stack.try_pop("tbody",["table"]):nt.tag_name==="tr"?tt=(tt=(tt=tt||this._tag_stack.try_pop("caption",["table"]))||this._tag_stack.try_pop("colgroup",["table"]))||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"]):nt.tag_name!=="th"&&nt.tag_name!=="td"||(tt=(tt=tt||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]))||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return nt.parent=this._tag_stack.get_parser_token(),tt}},ge.exports.Beautifier=dt},function(ge,ye,we){var ke=we(6).Options;function Se(Pe){ke.call(this,Pe,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Se.prototype=new ke,ge.exports.Options=Se},function(ge,ye,we){var ke=we(9).Tokenizer,Se=we(9).TOKEN,Pe=we(13).Directives,Re=we(14).TemplatablePattern,Ne=we(12).Pattern,ze={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:Se.START,RAW:Se.RAW,EOF:Se.EOF},Be=new Pe(/<\!--/,/-->/),Ze=function(Xe,qe){ke.call(this,Xe,qe),this._current_tag_name="";var Je=new Re(this._input).read_options(this._options),dt=new Ne(this._input);if(this.__patterns={word:Je.until(/[\n\r\t <]/),single_quote:Je.until_after(/'/),double_quote:Je.until_after(/"/),attribute:Je.until(/[\n\r\t =>]|\/>/),element_name:Je.until(/[\n\r\t >\/]/),handlebars_comment:dt.starting_with(/{{!--/).until_after(/--}}/),handlebars:dt.starting_with(/{{/).until_after(/}}/),handlebars_open:dt.until(/[\n\r\t }]/),handlebars_raw_close:dt.until(/}}/),comment:dt.starting_with(/<!--/).until_after(/-->/),cdata:dt.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:dt.starting_with(/<!\[/).until_after(/]>/),processing:dt.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var Ct=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=dt.matching(Ct).until_after(Ct)}};(Ze.prototype=new ke)._is_comment=function(Xe){return!1},Ze.prototype._is_opening=function(Xe){return Xe.type===ze.TAG_OPEN},Ze.prototype._is_closing=function(Xe,qe){return Xe.type===ze.TAG_CLOSE&&qe&&((Xe.text===">"||Xe.text==="/>")&&qe.text[0]==="<"||Xe.text==="}}"&&qe.text[0]==="{"&&qe.text[1]==="{")},Ze.prototype._reset=function(){this._current_tag_name=""},Ze.prototype._get_next_token=function(Xe,qe){var Je=null;this._readWhitespace();var dt=this._input.peek();return dt===null?this._create_token(ze.EOF,""):Je=(Je=(Je=(Je=(Je=(Je=(Je=(Je=(Je=Je||this._read_open_handlebars(dt,qe))||this._read_attribute(dt,Xe,qe))||this._read_close(dt,qe))||this._read_raw_content(dt,Xe,qe))||this._read_content_word(dt))||this._read_comment_or_cdata(dt))||this._read_processing(dt))||this._read_open(dt,qe))||this._create_token(ze.UNKNOWN,this._input.next())},Ze.prototype._read_comment_or_cdata=function(Xe){var qe=null,Je=null,dt=null;return Xe==="<"&&(this._input.peek(1)==="!"&&((Je=this.__patterns.comment.read())?(dt=Be.get_directives(Je))&&dt.ignore==="start"&&(Je+=Be.readIgnored(this._input)):Je=this.__patterns.cdata.read()),Je&&((qe=this._create_token(ze.COMMENT,Je)).directives=dt)),qe},Ze.prototype._read_processing=function(Xe){var qe=null,Je=null;if(Xe==="<"){var dt=this._input.peek(1);dt!=="!"&&dt!=="?"||(Je=(Je=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),Je&&((qe=this._create_token(ze.COMMENT,Je)).directives=null)}return qe},Ze.prototype._read_open=function(Xe,qe){var Je=null,dt=null;return qe||Xe==="<"&&(Je=this._input.next(),this._input.peek()==="/"&&(Je+=this._input.next()),Je+=this.__patterns.element_name.read(),dt=this._create_token(ze.TAG_OPEN,Je)),dt},Ze.prototype._read_open_handlebars=function(Xe,qe){var Je=null,dt=null;return qe||this._options.indent_handlebars&&Xe==="{"&&this._input.peek(1)==="{"&&(this._input.peek(2)==="!"?(Je=(Je=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),dt=this._create_token(ze.COMMENT,Je)):(Je=this.__patterns.handlebars_open.read(),dt=this._create_token(ze.TAG_OPEN,Je))),dt},Ze.prototype._read_close=function(Xe,qe){var Je=null,dt=null;return qe&&(qe.text[0]==="<"&&(Xe===">"||Xe==="/"&&this._input.peek(1)===">")?(Je=this._input.next(),Xe==="/"&&(Je+=this._input.next()),dt=this._create_token(ze.TAG_CLOSE,Je)):qe.text[0]==="{"&&Xe==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),dt=this._create_token(ze.TAG_CLOSE,"}}"))),dt},Ze.prototype._read_attribute=function(Xe,qe,Je){var dt=null,Ct="";if(Je&&Je.text[0]==="<")if(Xe==="=")dt=this._create_token(ze.EQUALS,this._input.next());else if(Xe==='"'||Xe==="'"){var bt=this._input.next();bt+=Xe==='"'?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),dt=this._create_token(ze.VALUE,bt)}else(Ct=this.__patterns.attribute.read())&&(dt=qe.type===ze.EQUALS?this._create_token(ze.VALUE,Ct):this._create_token(ze.ATTRIBUTE,Ct));return dt},Ze.prototype._is_content_unformatted=function(Xe){return this._options.void_elements.indexOf(Xe)===-1&&(this._options.content_unformatted.indexOf(Xe)!==-1||this._options.unformatted.indexOf(Xe)!==-1)},Ze.prototype._read_raw_content=function(Xe,qe,Je){var dt="";if(Je&&Je.text[0]==="{")dt=this.__patterns.handlebars_raw_close.read();else if(qe.type===ze.TAG_CLOSE&&qe.opened.text[0]==="<"&&qe.text[0]!=="/"){var Ct=qe.opened.text.substr(1).toLowerCase();if(Ct==="script"||Ct==="style"){var bt=this._read_comment_or_cdata(Xe);if(bt)return bt.type=ze.TEXT,bt;dt=this._input.readUntil(new RegExp("</"+Ct+"[\\n\\r\\t ]*?>","ig"))}else this._is_content_unformatted(Ct)&&(dt=this._input.readUntil(new RegExp("</"+Ct+"[\\n\\r\\t ]*?>","ig")))}return dt?this._create_token(ze.TEXT,dt):null},Ze.prototype._read_content_word=function(Xe){var qe="";if(this._options.unformatted_content_delimiter&&Xe===this._options.unformatted_content_delimiter[0]&&(qe=this.__patterns.unformatted_content_delimiter.read()),qe||(qe=this.__patterns.word.read()),qe)return this._create_token(ze.TEXT,qe)},ge.exports.Tokenizer=Ze,ge.exports.TOKEN=ze}],xe={},re=function ge(ye){var we=xe[ye];if(we!==void 0)return we.exports;var ke=xe[ye]={exports:{}};return j[ye](ke,ke.exports,ge),ke.exports}(18);te=re})();var Ee=te;he=[V,V(7937),V(5040)],ce=function(j){var xe=V(7937),re=V(5040);return{html_beautify:function(ge,ye){return Ee(ge,ye,xe.js_beautify,re.css_beautify)}}}.apply(q,he),ce===void 0||(G.exports=ce)})()},7937:function(G,q){var V;(function(){var he;(function(){var te=[function(xe,re,ge){var ye=ge(1).Beautifier,we=ge(5).Options;xe.exports=function(ke,Se){return new ye(ke,Se).beautify()},xe.exports.defaultOptions=function(){return new we}},function(xe,re,ge){var ye=ge(2).Output,we=ge(3).Token,ke=ge(4),Se=ge(5).Options,Pe=ge(7).Tokenizer,Re=ge(7).line_starters,Ne=ge(7).positionable_operators,ze=ge(7).TOKEN;function Be(at,zt){return zt.indexOf(at)!==-1}function Ze(at,zt){return at&&at.type===ze.RESERVED&&at.text===zt}function Xe(at,zt){return at&&at.type===ze.RESERVED&&Be(at.text,zt)}var qe=["case","return","do","if","throw","else","await","break","continue","async"],Je=function(at){for(var zt={},sn=0;sn<at.length;sn++)zt[at[sn].replace(/-/g,"_")]=at[sn];return zt}(["before-newline","after-newline","preserve-newline"]),dt=[Je.before_newline,Je.preserve_newline],Ct="BlockStatement",bt="Statement",xt="ObjectLiteral",nt="ArrayLiteral",tt="ForInitializer",rt="Conditional",ht="Expression";function st(at,zt){zt.multiline_frame||zt.mode===tt||zt.mode===rt||at.remove_indent(zt.start_line_index)}function pt(at){return at===nt}function vt(at){return Be(at,[ht,tt,rt])}function ut(at,zt){zt=zt||{},this._source_text=at||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Se(zt)}ut.prototype.create_flags=function(at,zt){var sn=0;return at&&(sn=at.indentation_level,!this._output.just_added_newline()&&at.line_indent_level>sn&&(sn=at.line_indent_level)),{mode:zt,parent:at,last_token:at?at.last_token:new we(ze.START_BLOCK,""),last_word:at?at.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:sn,alignment:0,line_indent_level:at?at.line_indent_level:sn,start_line_index:this._output.get_line_number(),ternary_depth:0}},ut.prototype._reset=function(at){var zt=at.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new ye(this._options,zt),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(Ct);var sn=new Pe(at,this._options);return this._tokens=sn.tokenize(),at},ut.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var at=this._reset(this._source_text),zt=this._options.eol;this._options.eol==="auto"&&(zt=`
`,at&&ke.lineBreak.test(at||"")&&(zt=at.match(ke.lineBreak)[0]));for(var sn=this._tokens.next();sn;)this.handle_token(sn),this._last_last_text=this._flags.last_token.text,this._flags.last_token=sn,sn=this._tokens.next();return this._output.get_code(zt)},ut.prototype.handle_token=function(at,zt){at.type===ze.START_EXPR?this.handle_start_expr(at):at.type===ze.END_EXPR?this.handle_end_expr(at):at.type===ze.START_BLOCK?this.handle_start_block(at):at.type===ze.END_BLOCK?this.handle_end_block(at):at.type===ze.WORD||at.type===ze.RESERVED?this.handle_word(at):at.type===ze.SEMICOLON?this.handle_semicolon(at):at.type===ze.STRING?this.handle_string(at):at.type===ze.EQUALS?this.handle_equals(at):at.type===ze.OPERATOR?this.handle_operator(at):at.type===ze.COMMA?this.handle_comma(at):at.type===ze.BLOCK_COMMENT?this.handle_block_comment(at,zt):at.type===ze.COMMENT?this.handle_comment(at,zt):at.type===ze.DOT?this.handle_dot(at):at.type===ze.EOF?this.handle_eof(at):(at.type,ze.UNKNOWN,this.handle_unknown(at,zt))},ut.prototype.handle_whitespace_and_comments=function(at,zt){var sn=at.newlines,Mn=this._options.keep_array_indentation&&pt(this._flags.mode);if(at.comments_before)for(var rn=at.comments_before.next();rn;)this.handle_whitespace_and_comments(rn,zt),this.handle_token(rn,zt),rn=at.comments_before.next();if(Mn)for(var on=0;on<sn;on+=1)this.print_newline(on>0,zt);else if(this._options.max_preserve_newlines&&sn>this._options.max_preserve_newlines&&(sn=this._options.max_preserve_newlines),this._options.preserve_newlines&&sn>1){this.print_newline(!1,zt);for(var Zt=1;Zt<sn;Zt+=1)this.print_newline(!0,zt)}};var Ut=["async","break","continue","return","throw","yield"];ut.prototype.allow_wrap_or_preserved_newline=function(at,zt){if(zt=zt!==void 0&&zt,!this._output.just_added_newline()){var sn=this._options.preserve_newlines&&at.newlines||zt;if(Be(this._flags.last_token.text,Ne)||Be(at.text,Ne)){var Mn=Be(this._flags.last_token.text,Ne)&&Be(this._options.operator_position,dt)||Be(at.text,Ne);sn=sn&&Mn}if(sn)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(Xe(this._flags.last_token,Ut))return;this._output.set_wrap_point()}}},ut.prototype.print_newline=function(at,zt){if(!zt&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==ze.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var sn=this._tokens.peek();!(this._flags.mode!==bt||this._flags.if_block&&Ze(sn,"else")||this._flags.do_block);)this.restore_mode();this._output.add_new_line(at)&&(this._flags.multiline_frame=!0)},ut.prototype.print_token_line_indentation=function(at){this._output.just_added_newline()&&(this._options.keep_array_indentation&&at.newlines&&(at.text==="["||pt(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(at.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},ut.prototype.print_token=function(at){if(this._output.raw)this._output.add_raw_token(at);else{if(this._options.comma_first&&at.previous&&at.previous.type===ze.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var zt=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(zt),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(at),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(at),this._output.non_breaking_space=!0,this._output.add_token(at.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},ut.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ut.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ut.prototype.set_mode=function(at){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,at),this._flags=this.create_flags(this._previous_flags,at),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},ut.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===bt&&st(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},ut.prototype.start_of_object_property=function(){return this._flags.parent.mode===xt&&this._flags.mode===bt&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||Xe(this._flags.last_token,["get","set"]))},ut.prototype.start_of_statement=function(at){var zt=!1;return!!(zt=(zt=(zt=(zt=(zt=(zt=(zt=zt||Xe(this._flags.last_token,["var","let","const"])&&at.type===ze.WORD)||Ze(this._flags.last_token,"do"))||!(this._flags.parent.mode===xt&&this._flags.mode===bt)&&Xe(this._flags.last_token,Ut)&&!at.newlines)||Ze(this._flags.last_token,"else")&&!(Ze(at,"if")&&!at.comments_before))||this._flags.last_token.type===ze.END_EXPR&&(this._previous_flags.mode===tt||this._previous_flags.mode===rt))||this._flags.last_token.type===ze.WORD&&this._flags.mode===Ct&&!this._flags.in_case&&!(at.text==="--"||at.text==="++")&&this._last_last_text!=="function"&&at.type!==ze.WORD&&at.type!==ze.RESERVED)||this._flags.mode===xt&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||Xe(this._flags.last_token,["get","set"])))&&(this.set_mode(bt),this.indent(),this.handle_whitespace_and_comments(at,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at,Xe(at,["do","for","if","while"])),!0)},ut.prototype.handle_start_expr=function(at){this.start_of_statement(at)||this.handle_whitespace_and_comments(at);var zt=ht;if(at.text==="["){if(this._flags.last_token.type===ze.WORD||this._flags.last_token.text===")")return Xe(this._flags.last_token,Re)&&(this._output.space_before_token=!0),this.print_token(at),this.set_mode(zt),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));zt=nt,pt(this._flags.mode)&&(this._flags.last_token.text!=="["&&(this._flags.last_token.text!==","||this._last_last_text!=="]"&&this._last_last_text!=="}")||this._options.keep_array_indentation||this.print_newline()),Be(this._flags.last_token.type,[ze.START_EXPR,ze.END_EXPR,ze.WORD,ze.OPERATOR,ze.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===ze.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,zt=tt):Be(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,zt=rt):Be(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&at.whitespace_before===""?this._output.space_before_token=!1:(Be(this._flags.last_token.text,Re)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===ze.EQUALS||this._flags.last_token.type===ze.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at);else if(this._flags.last_token.type===ze.WORD){this._output.space_before_token=!1;var sn=this._tokens.peek(-3);if(this._options.space_after_named_function&&sn){var Mn=this._tokens.peek(-4);Xe(sn,["async","function"])||sn.text==="*"&&Xe(Mn,["async","function"])?this._output.space_before_token=!0:this._flags.mode===xt?sn.text!=="{"&&sn.text!==","&&(sn.text!=="*"||Mn.text!=="{"&&Mn.text!==",")||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(at);(this._flags.last_token.type===ze.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(Be(this._last_last_text,["function","yield"])||this._flags.mode===xt&&Be(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===ze.START_BLOCK?this.print_newline():this._flags.last_token.type!==ze.END_EXPR&&this._flags.last_token.type!==ze.START_EXPR&&this._flags.last_token.type!==ze.END_BLOCK&&this._flags.last_token.text!=="."&&this._flags.last_token.type!==ze.COMMA||this.allow_wrap_or_preserved_newline(at,at.newlines),this.print_token(at),this.set_mode(zt),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},ut.prototype.handle_end_expr=function(at){for(;this._flags.mode===bt;)this.restore_mode();this.handle_whitespace_and_comments(at),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(at,at.text==="]"&&pt(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==ze.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(at),this.restore_mode(),st(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===rt&&(this._previous_flags.mode=ht,this._flags.do_block=!1,this._flags.do_while=!1)},ut.prototype.handle_start_block=function(at){this.handle_whitespace_and_comments(at);var zt=this._tokens.peek(),sn=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===ze.END_EXPR?(this.set_mode(Ct),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(Ct):sn&&(Be(sn.text,[":",","])&&Be(zt.type,[ze.STRING,ze.WORD,ze.RESERVED])||Be(zt.text,["get","set","..."])&&Be(sn.type,[ze.WORD,ze.RESERVED]))?Be(this._last_last_text,["class","interface"])&&!Be(sn.text,[":",","])?this.set_mode(Ct):this.set_mode(xt):this._flags.last_token.type===ze.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(Ct):Be(this._flags.last_token.type,[ze.EQUALS,ze.START_EXPR,ze.COMMA,ze.OPERATOR])||Xe(this._flags.last_token,["return","throw","import","default"])?this.set_mode(xt):this.set_mode(Ct),this._flags.last_token&&Xe(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var Mn=!zt.comments_before&&zt.text==="}",rn=Mn&&this._flags.last_word==="function"&&this._flags.last_token.type===ze.END_EXPR;if(this._options.brace_preserve_inline){var on=0,Zt=null;this._flags.inline_frame=!0;do if(on+=1,(Zt=this._tokens.peek(on-1)).newlines){this._flags.inline_frame=!1;break}while(Zt.type!==ze.EOF&&(Zt.type!==ze.END_BLOCK||Zt.opened!==at))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&at.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==ze.OPERATOR&&(rn||this._flags.last_token.type===ze.EQUALS||Xe(this._flags.last_token,qe)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(!pt(this._previous_flags.mode)||this._flags.last_token.type!==ze.START_EXPR&&this._flags.last_token.type!==ze.COMMA||((this._flags.last_token.type===ze.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===ze.COMMA||this._flags.last_token.type===ze.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(at),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==ze.OPERATOR&&this._flags.last_token.type!==ze.START_EXPR&&(this._flags.last_token.type!==ze.START_BLOCK||this._flags.inline_frame?this._output.space_before_token=!0:this.print_newline())),this.print_token(at),this.indent(),Mn||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},ut.prototype.handle_end_block=function(at){for(this.handle_whitespace_and_comments(at);this._flags.mode===bt;)this.restore_mode();var zt=this._flags.last_token.type===ze.START_BLOCK;this._flags.inline_frame&&!zt?this._output.space_before_token=!0:this._options.brace_style==="expand"?zt||this.print_newline():zt||(pt(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(at)},ut.prototype.handle_word=function(at){if(at.type===ze.RESERVED&&(Be(at.text,["set","get"])&&this._flags.mode!==xt||at.text==="import"&&Be(this._tokens.peek().text,["(","."])||Be(at.text,["as","from"])&&!this._flags.import_block||this._flags.mode===xt&&this._tokens.peek().text===":")&&(at.type=ze.WORD),this.start_of_statement(at)?Xe(this._flags.last_token,["var","let","const"])&&at.type===ze.WORD&&(this._flags.declaration_statement=!0):!at.newlines||vt(this._flags.mode)||this._flags.last_token.type===ze.OPERATOR&&this._flags.last_token.text!=="--"&&this._flags.last_token.text!=="++"||this._flags.last_token.type===ze.EQUALS||!this._options.preserve_newlines&&Xe(this._flags.last_token,["var","let","const","set","get"])?this.handle_whitespace_and_comments(at):(this.handle_whitespace_and_comments(at),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(Ze(at,"while"))return this._output.space_before_token=!0,this.print_token(at),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&Ze(at,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===bt;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&Xe(at,["case","default"]))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(at),void(this._flags.in_case=!0);if(this._flags.last_token.type!==ze.COMMA&&this._flags.last_token.type!==ze.START_EXPR&&this._flags.last_token.type!==ze.EQUALS&&this._flags.last_token.type!==ze.OPERATOR||this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at),Ze(at,"function"))return(Be(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!Be(this._flags.last_token.text,["(","[","{",":","=",","])&&this._flags.last_token.type!==ze.OPERATOR)&&(this._output.just_added_blankline()||at.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===ze.RESERVED||this._flags.last_token.type===ze.WORD?Xe(this._flags.last_token,["get","set","new","export"])||Xe(this._flags.last_token,Ut)||Ze(this._flags.last_token,"default")&&this._last_last_text==="export"||this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===ze.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:(this._flags.multiline_frame||!vt(this._flags.mode)&&!pt(this._flags.mode))&&this.print_newline(),this.print_token(at),void(this._flags.last_word=at.text);var zt="NONE";this._flags.last_token.type===ze.END_BLOCK?this._previous_flags.inline_frame?zt="SPACE":Xe(at,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&at.newlines?zt="NEWLINE":(zt="SPACE",this._output.space_before_token=!0):zt="NEWLINE":this._flags.last_token.type===ze.SEMICOLON&&this._flags.mode===Ct?zt="NEWLINE":this._flags.last_token.type===ze.SEMICOLON&&vt(this._flags.mode)?zt="SPACE":this._flags.last_token.type===ze.STRING?zt="NEWLINE":this._flags.last_token.type===ze.RESERVED||this._flags.last_token.type===ze.WORD||this._flags.last_token.text==="*"&&(Be(this._last_last_text,["function","yield"])||this._flags.mode===xt&&Be(this._last_last_text,["{",","]))?zt="SPACE":this._flags.last_token.type===ze.START_BLOCK?zt=this._flags.inline_frame?"SPACE":"NEWLINE":this._flags.last_token.type===ze.END_EXPR&&(this._output.space_before_token=!0,zt="NEWLINE"),Xe(at,Re)&&this._flags.last_token.text!==")"&&(zt=this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?"SPACE":"NEWLINE"),Xe(at,["else","catch","finally"])?(this._flags.last_token.type!==ze.END_BLOCK||this._previous_flags.mode!==Ct||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&at.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),this._output.current_line.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0):zt==="NEWLINE"?Xe(this._flags.last_token,qe)||this._flags.last_token.text==="declare"&&Xe(at,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==ze.END_EXPR?this._flags.last_token.type===ze.START_EXPR&&Xe(at,["var","let","const"])||this._flags.last_token.text===":"||(Ze(at,"if")&&Ze(at.previous,"else")?this._output.space_before_token=!0:this.print_newline()):Xe(at,Re)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&pt(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():zt==="SPACE"&&(this._output.space_before_token=!0),!at.previous||at.previous.type!==ze.WORD&&at.previous.type!==ze.RESERVED||(this._output.space_before_token=!0),this.print_token(at),this._flags.last_word=at.text,at.type===ze.RESERVED&&(at.text==="do"?this._flags.do_block=!0:at.text==="if"?this._flags.if_block=!0:at.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Ze(at,"from")&&(this._flags.import_block=!1))},ut.prototype.handle_semicolon=function(at){this.start_of_statement(at)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(at);for(var zt=this._tokens.peek();!(this._flags.mode!==bt||this._flags.if_block&&Ze(zt,"else")||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(at)},ut.prototype.handle_string=function(at){(!at.text.startsWith("`")||at.newlines!==0||at.whitespace_before!==""||at.previous.text!==")"&&this._flags.last_token.type!==ze.WORD)&&(this.start_of_statement(at)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(at),this._flags.last_token.type===ze.RESERVED||this._flags.last_token.type===ze.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===ze.COMMA||this._flags.last_token.type===ze.START_EXPR||this._flags.last_token.type===ze.EQUALS||this._flags.last_token.type===ze.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(at):!at.text.startsWith("`")||this._flags.last_token.type!==ze.END_EXPR||at.previous.text!=="]"&&at.previous.text!==")"||at.newlines!==0?this.print_newline():this._output.space_before_token=!0)),this.print_token(at)},ut.prototype.handle_equals=function(at){this.start_of_statement(at)||this.handle_whitespace_and_comments(at),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(at),this._output.space_before_token=!0},ut.prototype.handle_comma=function(at){this.handle_whitespace_and_comments(at,!0),this.print_token(at),this._output.space_before_token=!0,this._flags.declaration_statement?(vt(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(at)):this._flags.mode===xt||this._flags.mode===bt&&this._flags.parent.mode===xt?(this._flags.mode===bt&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(at)},ut.prototype.handle_operator=function(at){var zt=at.text==="*"&&(Xe(this._flags.last_token,["function","yield"])||Be(this._flags.last_token.type,[ze.START_BLOCK,ze.COMMA,ze.END_BLOCK,ze.SEMICOLON])),sn=Be(at.text,["-","+"])&&(Be(this._flags.last_token.type,[ze.START_BLOCK,ze.START_EXPR,ze.EQUALS,ze.OPERATOR])||Be(this._flags.last_token.text,Re)||this._flags.last_token.text===",");if(!this.start_of_statement(at)){var Mn=!zt;this.handle_whitespace_and_comments(at,Mn)}if(at.text!=="*"||this._flags.last_token.type!==ze.DOT)if(at.text!=="::"){if(this._flags.last_token.type===ze.OPERATOR&&Be(this._options.operator_position,dt)&&this.allow_wrap_or_preserved_newline(at),at.text===":"&&this._flags.in_case)return this.print_token(at),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==ze.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var rn=!0,on=!0,Zt=!1;if(at.text===":"?this._flags.ternary_depth===0?rn=!1:(this._flags.ternary_depth-=1,Zt=!0):at.text==="?"&&(this._flags.ternary_depth+=1),!sn&&!zt&&this._options.preserve_newlines&&Be(at.text,Ne)){var Ot=at.text===":",Qt=Ot&&Zt,un=Ot&&!Zt;switch(this._options.operator_position){case Je.before_newline:return this._output.space_before_token=!un,this.print_token(at),Ot&&!Qt||this.allow_wrap_or_preserved_newline(at),void(this._output.space_before_token=!0);case Je.after_newline:return this._output.space_before_token=!0,!Ot||Qt?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(at):this._output.space_before_token=!1,this.print_token(at),void(this._output.space_before_token=!0);case Je.preserve_newline:return un||this.allow_wrap_or_preserved_newline(at),rn=!(this._output.just_added_newline()||un),this._output.space_before_token=rn,this.print_token(at),void(this._output.space_before_token=!0)}}if(zt){this.allow_wrap_or_preserved_newline(at),rn=!1;var yn=this._tokens.peek();on=yn&&Be(yn.type,[ze.WORD,ze.RESERVED])}else if(at.text==="...")this.allow_wrap_or_preserved_newline(at),rn=this._flags.last_token.type===ze.START_BLOCK,on=!1;else if(Be(at.text,["--","++","!","~"])||sn){if(this._flags.last_token.type!==ze.COMMA&&this._flags.last_token.type!==ze.START_EXPR||this.allow_wrap_or_preserved_newline(at),rn=!1,on=!1,at.newlines&&(at.text==="--"||at.text==="++"||at.text==="~")){var In=Xe(this._flags.last_token,qe)&&at.newlines;In&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(In,!0)}this._flags.last_token.text===";"&&vt(this._flags.mode)&&(rn=!0),this._flags.last_token.type===ze.RESERVED?rn=!0:this._flags.last_token.type===ze.END_EXPR?rn=!(this._flags.last_token.text==="]"&&(at.text==="--"||at.text==="++")):this._flags.last_token.type===ze.OPERATOR&&(rn=Be(at.text,["--","-","++","+"])&&Be(this._flags.last_token.text,["--","-","++","+"]),Be(at.text,["+","-"])&&Be(this._flags.last_token.text,["--","++"])&&(on=!0)),(this._flags.mode!==Ct||this._flags.inline_frame)&&this._flags.mode!==bt||this._flags.last_token.text!=="{"&&this._flags.last_token.text!==";"||this.print_newline()}this._output.space_before_token=this._output.space_before_token||rn,this.print_token(at),this._output.space_before_token=on}else this.print_token(at);else this.print_token(at)},ut.prototype.handle_block_comment=function(at,zt){return this._output.raw?(this._output.add_raw_token(at),void(at.directives&&at.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw))):at.directives?(this.print_newline(!1,zt),this.print_token(at),at.directives.preserve==="start"&&(this._output.raw=!0),void this.print_newline(!1,!0)):ke.newline.test(at.text)||at.newlines?void this.print_block_commment(at,zt):(this._output.space_before_token=!0,this.print_token(at),void(this._output.space_before_token=!0))},ut.prototype.print_block_commment=function(at,zt){var sn,Mn=function(Qt){for(var un=[],yn=(Qt=Qt.replace(ke.allLineBreaks,`
`)).indexOf(`
`);yn!==-1;)un.push(Qt.substring(0,yn)),yn=(Qt=Qt.substring(yn+1)).indexOf(`
`);return Qt.length&&un.push(Qt),un}(at.text),rn=!1,on=!1,Zt=at.whitespace_before,Ot=Zt.length;if(this.print_newline(!1,zt),this.print_token_line_indentation(at),this._output.add_token(Mn[0]),this.print_newline(!1,zt),Mn.length>1){for(rn=function(Qt,un){for(var yn=0;yn<Qt.length;yn++)if(Qt[yn].trim().charAt(0)!==un)return!1;return!0}(Mn=Mn.slice(1),"*"),on=function(Qt,un){for(var yn,In=0,It=Qt.length;In<It;In++)if((yn=Qt[In])&&yn.indexOf(un)!==0)return!1;return!0}(Mn,Zt),rn&&(this._flags.alignment=1),sn=0;sn<Mn.length;sn++)rn?(this.print_token_line_indentation(at),this._output.add_token(Mn[sn].replace(/^\s+/g,""))):on&&Mn[sn]?(this.print_token_line_indentation(at),this._output.add_token(Mn[sn].substring(Ot))):(this._output.current_line.set_indent(-1),this._output.add_token(Mn[sn])),this.print_newline(!1,zt);this._flags.alignment=0}},ut.prototype.handle_comment=function(at,zt){at.newlines?this.print_newline(!1,zt):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(at),this.print_newline(!1,zt)},ut.prototype.handle_dot=function(at){this.start_of_statement(at)||this.handle_whitespace_and_comments(at,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),Xe(this._flags.last_token,qe)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(at,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(at)},ut.prototype.handle_unknown=function(at,zt){this.print_token(at),at.text[at.text.length-1]===`
`&&this.print_newline(!1,zt)},ut.prototype.handle_eof=function(at){for(;this._flags.mode===bt;)this.restore_mode();this.handle_whitespace_and_comments(at)},xe.exports.Beautifier=ut},function(xe){function re(we){this.__parent=we,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function ge(we,ke){this.__cache=[""],this.__indent_size=we.indent_size,this.__indent_string=we.indent_char,we.indent_with_tabs||(this.__indent_string=new Array(we.indent_size+1).join(we.indent_char)),ke=ke||"",we.indent_level>0&&(ke=new Array(we.indent_level+1).join(this.__indent_string)),this.__base_string=ke,this.__base_string_length=ke.length}function ye(we,ke){this.__indent_cache=new ge(we,ke),this.raw=!1,this._end_with_newline=we.end_with_newline,this.indent_size=we.indent_size,this.wrap_line_length=we.wrap_line_length,this.indent_empty_lines=we.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new re(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}re.prototype.clone_empty=function(){var we=new re(this.__parent);return we.set_indent(this.__indent_count,this.__alignment_count),we},re.prototype.item=function(we){return we<0?this.__items[this.__items.length+we]:this.__items[we]},re.prototype.has_match=function(we){for(var ke=this.__items.length-1;ke>=0;ke--)if(this.__items[ke].match(we))return!0;return!1},re.prototype.set_indent=function(we,ke){this.is_empty()&&(this.__indent_count=we||0,this.__alignment_count=ke||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},re.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},re.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},re.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var we=this.__parent.current_line;return we.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),we.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),we.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,we.__items[0]===" "&&(we.__items.splice(0,1),we.__character_count-=1),!0}return!1},re.prototype.is_empty=function(){return this.__items.length===0},re.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},re.prototype.push=function(we){this.__items.push(we);var ke=we.lastIndexOf(`
`);ke!==-1?this.__character_count=we.length-ke:this.__character_count+=we.length},re.prototype.pop=function(){var we=null;return this.is_empty()||(we=this.__items.pop(),this.__character_count-=we.length),we},re.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},re.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},re.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1},re.prototype.toString=function(){var we="";return this.is_empty()?this.__parent.indent_empty_lines&&(we=this.__parent.get_indent_string(this.__indent_count)):(we=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),we+=this.__items.join("")),we},ge.prototype.get_indent_size=function(we,ke){var Se=this.__base_string_length;return ke=ke||0,we<0&&(Se=0),Se+=we*this.__indent_size,Se+=ke},ge.prototype.get_indent_string=function(we,ke){var Se=this.__base_string;return ke=ke||0,we<0&&(we=0,Se=""),ke+=we*this.__indent_size,this.__ensure_cache(ke),Se+=this.__cache[ke]},ge.prototype.__ensure_cache=function(we){for(;we>=this.__cache.length;)this.__add_column()},ge.prototype.__add_column=function(){var we=this.__cache.length,ke=0,Se="";this.__indent_size&&we>=this.__indent_size&&(we-=(ke=Math.floor(we/this.__indent_size))*this.__indent_size,Se=new Array(ke+1).join(this.__indent_string)),we&&(Se+=new Array(we+1).join(" ")),this.__cache.push(Se)},ye.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},ye.prototype.get_line_number=function(){return this.__lines.length},ye.prototype.get_indent_string=function(we,ke){return this.__indent_cache.get_indent_string(we,ke)},ye.prototype.get_indent_size=function(we,ke){return this.__indent_cache.get_indent_size(we,ke)},ye.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},ye.prototype.add_new_line=function(we){return!(this.is_empty()||!we&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},ye.prototype.get_code=function(we){this.trim(!0);var ke=this.current_line.pop();ke&&(ke[ke.length-1]===`
`&&(ke=ke.replace(/\n+$/g,"")),this.current_line.push(ke)),this._end_with_newline&&this.__add_outputline();var Se=this.__lines.join(`
`);return we!==`
`&&(Se=Se.replace(/[\n]/g,we)),Se},ye.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},ye.prototype.set_indent=function(we,ke){return we=we||0,ke=ke||0,this.next_line.set_indent(we,ke),this.__lines.length>1?(this.current_line.set_indent(we,ke),!0):(this.current_line.set_indent(),!1)},ye.prototype.add_raw_token=function(we){for(var ke=0;ke<we.newlines;ke++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(we.whitespace_before),this.current_line.push(we.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},ye.prototype.add_token=function(we){this.__add_space_before_token(),this.current_line.push(we),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},ye.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))},ye.prototype.remove_indent=function(we){for(var ke=this.__lines.length;we<ke;)this.__lines[we]._remove_indent(),we++;this.current_line._remove_wrap_indent()},ye.prototype.trim=function(we){for(we=we!==void 0&&we,this.current_line.trim();we&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},ye.prototype.just_added_newline=function(){return this.current_line.is_empty()},ye.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},ye.prototype.ensure_empty_line_above=function(we,ke){for(var Se=this.__lines.length-2;Se>=0;){var Pe=this.__lines[Se];if(Pe.is_empty())break;if(Pe.item(0).indexOf(we)!==0&&Pe.item(-1)!==ke){this.__lines.splice(Se+1,0,new re(this)),this.previous_line=this.__lines[this.__lines.length-2];break}Se--}},xe.exports.Output=ye},function(xe){xe.exports.Token=function(re,ge,ye,we){this.type=re,this.text=ge,this.comments_before=null,this.newlines=ye||0,this.whitespace_before=we||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(xe,re){var ge="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",ye="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",we="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",ke="(?:\\\\u[0-9a-fA-F]{4}|[\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+ye+"])";re.identifier=new RegExp(ke+"(?:\\\\u[0-9a-fA-F]{4}|[\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f])*","g"),re.identifierStart=new RegExp(ke),re.identifierMatch=new RegExp("(?:\\\\u[0-9a-fA-F]{4}|["+ge+ye+we+"])+"),re.newline=/[\n\r\u2028\u2029]/,re.lineBreak=new RegExp(`\r
|`+re.newline.source),re.allLineBreaks=new RegExp(re.lineBreak.source,"g")},function(xe,re,ge){var ye=ge(6).Options,we=["before-newline","after-newline","preserve-newline"];function ke(Se){ye.call(this,Se,"js");var Pe=this.raw_options.brace_style||null;Pe==="expand-strict"?this.raw_options.brace_style="expand":Pe==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var Re=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var Ne=0;Ne<Re.length;Ne++)Re[Ne]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=Re[Ne];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",we),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}ke.prototype=new ye,xe.exports.Options=ke},function(xe){function re(we,ke){this.raw_options=ge(we,ke),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","django","erb","handlebars","php","smarty"],["auto"])}function ge(we,ke){var Se,Pe={};for(Se in we=ye(we))Se!==ke&&(Pe[Se]=we[Se]);if(ke&&we[ke])for(Se in we[ke])Pe[Se]=we[ke][Se];return Pe}function ye(we){var ke,Se={};for(ke in we)Se[ke.replace(/-/g,"_")]=we[ke];return Se}re.prototype._get_array=function(we,ke){var Se=this.raw_options[we],Pe=ke||[];return typeof Se=="object"?Se!==null&&typeof Se.concat=="function"&&(Pe=Se.concat()):typeof Se=="string"&&(Pe=Se.split(/[^a-zA-Z0-9_\/\-]+/)),Pe},re.prototype._get_boolean=function(we,ke){var Se=this.raw_options[we];return Se===void 0?!!ke:!!Se},re.prototype._get_characters=function(we,ke){var Se=this.raw_options[we],Pe=ke||"";return typeof Se=="string"&&(Pe=Se.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),Pe},re.prototype._get_number=function(we,ke){var Se=this.raw_options[we];ke=parseInt(ke,10),isNaN(ke)&&(ke=0);var Pe=parseInt(Se,10);return isNaN(Pe)&&(Pe=ke),Pe},re.prototype._get_selection=function(we,ke,Se){var Pe=this._get_selection_list(we,ke,Se);if(Pe.length!==1)throw new Error("Invalid Option Value: The option '"+we+`' can only be one of the following values:
`+ke+`
You passed in: '`+this.raw_options[we]+"'");return Pe[0]},re.prototype._get_selection_list=function(we,ke,Se){if(!ke||ke.length===0)throw new Error("Selection list cannot be empty.");if(Se=Se||[ke[0]],!this._is_valid_selection(Se,ke))throw new Error("Invalid Default Value!");var Pe=this._get_array(we,Se);if(!this._is_valid_selection(Pe,ke))throw new Error("Invalid Option Value: The option '"+we+`' can contain only the following values:
`+ke+`
You passed in: '`+this.raw_options[we]+"'");return Pe},re.prototype._is_valid_selection=function(we,ke){return we.length&&ke.length&&!we.some(function(Se){return ke.indexOf(Se)===-1})},xe.exports.Options=re,xe.exports.normalizeOpts=ye,xe.exports.mergeOpts=ge},function(xe,re,ge){var ye=ge(8).InputScanner,we=ge(9).Tokenizer,ke=ge(9).TOKEN,Se=ge(13).Directives,Pe=ge(4),Re=ge(12).Pattern,Ne=ge(14).TemplatablePattern;function ze(st,pt){return pt.indexOf(st)!==-1}var Be={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:ke.START,RAW:ke.RAW,EOF:ke.EOF},Ze=new Se(/\/\*/,/\*\//),Xe=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,qe=/[0-9]/,Je=/[^\d\.]/,dt=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),Ct=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";Ct=(Ct="\\?\\.(?!\\d) "+(Ct=Ct.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,"|");var bt,xt=new RegExp(Ct),nt="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),tt=nt.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),rt=new RegExp("^(?:"+tt.join("|")+")$"),ht=function(st,pt){we.call(this,st,pt),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var vt=new Re(this._input),ut=new Ne(this._input).read_options(this._options);this.__patterns={template:ut,identifier:ut.starting_with(Pe.identifier).matching(Pe.identifierMatch),number:vt.matching(Xe),punct:vt.matching(xt),comment:vt.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:vt.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:vt.matching(/<!--/),html_comment_end:vt.matching(/-->/),include:vt.starting_with(/#include/).until_after(Pe.lineBreak),shebang:vt.starting_with(/#!/).until_after(Pe.lineBreak),xml:vt.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:ut.until(/['\\\n\r\u2028\u2029]/),double_quote:ut.until(/["\\\n\r\u2028\u2029]/),template_text:ut.until(/[`\\$]/),template_expression:ut.until(/[`}\\]/)}};(ht.prototype=new we)._is_comment=function(st){return st.type===Be.COMMENT||st.type===Be.BLOCK_COMMENT||st.type===Be.UNKNOWN},ht.prototype._is_opening=function(st){return st.type===Be.START_BLOCK||st.type===Be.START_EXPR},ht.prototype._is_closing=function(st,pt){return(st.type===Be.END_BLOCK||st.type===Be.END_EXPR)&&pt&&(st.text==="]"&&pt.text==="["||st.text===")"&&pt.text==="("||st.text==="}"&&pt.text==="{")},ht.prototype._reset=function(){bt=!1},ht.prototype._get_next_token=function(st,pt){var vt=null;this._readWhitespace();var ut=this._input.peek();return ut===null?this._create_token(Be.EOF,""):vt=(vt=(vt=(vt=(vt=(vt=(vt=(vt=(vt=vt||this._read_non_javascript(ut))||this._read_string(ut))||this._read_word(st))||this._read_singles(ut))||this._read_comment(ut))||this._read_regexp(ut,st))||this._read_xml(ut,st))||this._read_punctuation())||this._create_token(Be.UNKNOWN,this._input.next())},ht.prototype._read_word=function(st){var pt;return(pt=this.__patterns.identifier.read())!==""?(pt=pt.replace(Pe.allLineBreaks,`
`),st.type!==Be.DOT&&(st.type!==Be.RESERVED||st.text!=="set"&&st.text!=="get")&&rt.test(pt)?pt!=="in"&&pt!=="of"||st.type!==Be.WORD&&st.type!==Be.STRING?this._create_token(Be.RESERVED,pt):this._create_token(Be.OPERATOR,pt):this._create_token(Be.WORD,pt)):(pt=this.__patterns.number.read())!==""?this._create_token(Be.WORD,pt):void 0},ht.prototype._read_singles=function(st){var pt=null;return st==="("||st==="["?pt=this._create_token(Be.START_EXPR,st):st===")"||st==="]"?pt=this._create_token(Be.END_EXPR,st):st==="{"?pt=this._create_token(Be.START_BLOCK,st):st==="}"?pt=this._create_token(Be.END_BLOCK,st):st===";"?pt=this._create_token(Be.SEMICOLON,st):st==="."&&Je.test(this._input.peek(1))?pt=this._create_token(Be.DOT,st):st===","&&(pt=this._create_token(Be.COMMA,st)),pt&&this._input.next(),pt},ht.prototype._read_punctuation=function(){var st=this.__patterns.punct.read();if(st!=="")return st==="="?this._create_token(Be.EQUALS,st):st==="?."?this._create_token(Be.DOT,st):this._create_token(Be.OPERATOR,st)},ht.prototype._read_non_javascript=function(st){var pt="";if(st==="#"){if(this._is_first_token()&&(pt=this.__patterns.shebang.read()))return this._create_token(Be.UNKNOWN,pt.trim()+`
`);if(pt=this.__patterns.include.read())return this._create_token(Be.UNKNOWN,pt.trim()+`
`);st=this._input.next();var vt="#";if(this._input.hasNext()&&this._input.testChar(qe)){do vt+=st=this._input.next();while(this._input.hasNext()&&st!=="#"&&st!=="=");return st==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(vt+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(vt+="{}",this._input.next(),this._input.next())),this._create_token(Be.WORD,vt)}this._input.back()}else if(st==="<"&&this._is_first_token()){if(pt=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(Pe.newline);)pt+=this._input.next();return bt=!0,this._create_token(Be.COMMENT,pt)}}else if(bt&&st==="-"&&(pt=this.__patterns.html_comment_end.read()))return bt=!1,this._create_token(Be.COMMENT,pt);return null},ht.prototype._read_comment=function(st){var pt=null;if(st==="/"){var vt="";if(this._input.peek(1)==="*"){vt=this.__patterns.block_comment.read();var ut=Ze.get_directives(vt);ut&&ut.ignore==="start"&&(vt+=Ze.readIgnored(this._input)),vt=vt.replace(Pe.allLineBreaks,`
`),(pt=this._create_token(Be.BLOCK_COMMENT,vt)).directives=ut}else this._input.peek(1)==="/"&&(vt=this.__patterns.comment.read(),pt=this._create_token(Be.COMMENT,vt))}return pt},ht.prototype._read_string=function(st){if(st==="`"||st==="'"||st==='"'){var pt=this._input.next();return this.has_char_escapes=!1,pt+=st==="`"?this._read_string_recursive("`",!0,"${"):this._read_string_recursive(st),this.has_char_escapes&&this._options.unescape_strings&&(pt=function(vt){for(var ut="",Ut=0,at=new ye(vt),zt=null;at.hasNext();)if((zt=at.match(/([\s]|[^\\]|\\\\)+/g))&&(ut+=zt[0]),at.peek()==="\\"){if(at.next(),at.peek()==="x")zt=at.match(/x([0-9A-Fa-f]{2})/g);else{if(at.peek()!=="u"){ut+="\\",at.hasNext()&&(ut+=at.next());continue}zt=at.match(/u([0-9A-Fa-f]{4})/g)}if(!zt||(Ut=parseInt(zt[1],16))>126&&Ut<=255&&zt[0].indexOf("x")===0)return vt;if(Ut>=0&&Ut<32){ut+="\\"+zt[0];continue}ut+=Ut===34||Ut===39||Ut===92?"\\"+String.fromCharCode(Ut):String.fromCharCode(Ut)}return ut}(pt)),this._input.peek()===st&&(pt+=this._input.next()),pt=pt.replace(Pe.allLineBreaks,`
`),this._create_token(Be.STRING,pt)}return null},ht.prototype._allow_regexp_or_xml=function(st){return st.type===Be.RESERVED&&ze(st.text,["return","case","throw","else","do","typeof","yield"])||st.type===Be.END_EXPR&&st.text===")"&&st.opened.previous.type===Be.RESERVED&&ze(st.opened.previous.text,["if","while","for"])||ze(st.type,[Be.COMMENT,Be.START_EXPR,Be.START_BLOCK,Be.START,Be.END_BLOCK,Be.OPERATOR,Be.EQUALS,Be.EOF,Be.SEMICOLON,Be.COMMA])},ht.prototype._read_regexp=function(st,pt){if(st==="/"&&this._allow_regexp_or_xml(pt)){for(var vt=this._input.next(),ut=!1,Ut=!1;this._input.hasNext()&&(ut||Ut||this._input.peek()!==st)&&!this._input.testChar(Pe.newline);)vt+=this._input.peek(),ut?ut=!1:(ut=this._input.peek()==="\\",this._input.peek()==="["?Ut=!0:this._input.peek()==="]"&&(Ut=!1)),this._input.next();return this._input.peek()===st&&(vt+=this._input.next(),vt+=this._input.read(Pe.identifier)),this._create_token(Be.STRING,vt)}return null},ht.prototype._read_xml=function(st,pt){if(this._options.e4x&&st==="<"&&this._allow_regexp_or_xml(pt)){var vt="",ut=this.__patterns.xml.read_match();if(ut){for(var Ut=ut[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),at=Ut.indexOf("{")===0,zt=0;ut;){var sn=!!ut[1],Mn=ut[2];if(!(!!ut[ut.length-1]||Mn.slice(0,8)==="![CDATA[")&&(Mn===Ut||at&&Mn.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(sn?--zt:++zt),vt+=ut[0],zt<=0)break;ut=this.__patterns.xml.read_match()}return ut||(vt+=this._input.match(/[\s\S]*/g)[0]),vt=vt.replace(Pe.allLineBreaks,`
`),this._create_token(Be.STRING,vt)}}return null},ht.prototype._read_string_recursive=function(st,pt,vt){var ut,Ut;st==="'"?Ut=this.__patterns.single_quote:st==='"'?Ut=this.__patterns.double_quote:st==="`"?Ut=this.__patterns.template_text:st==="}"&&(Ut=this.__patterns.template_expression);for(var at=Ut.read(),zt="";this._input.hasNext();){if((zt=this._input.next())===st||!pt&&Pe.newline.test(zt)){this._input.back();break}zt==="\\"&&this._input.hasNext()?((ut=this._input.peek())==="x"||ut==="u"?this.has_char_escapes=!0:ut==="\r"&&this._input.peek(1)===`
`&&this._input.next(),zt+=this._input.next()):vt&&(vt==="${"&&zt==="$"&&this._input.peek()==="{"&&(zt+=this._input.next()),vt===zt&&(zt+=st==="`"?this._read_string_recursive("}",pt,"`"):this._read_string_recursive("`",pt,"${"),this._input.hasNext()&&(zt+=this._input.next()))),at+=zt+=Ut.read()}return at},xe.exports.Tokenizer=ht,xe.exports.TOKEN=Be,xe.exports.positionable_operators=dt.slice(),xe.exports.line_starters=nt.slice()},function(xe){var re=RegExp.prototype.hasOwnProperty("sticky");function ge(ye){this.__input=ye||"",this.__input_length=this.__input.length,this.__position=0}ge.prototype.restart=function(){this.__position=0},ge.prototype.back=function(){this.__position>0&&(this.__position-=1)},ge.prototype.hasNext=function(){return this.__position<this.__input_length},ge.prototype.next=function(){var ye=null;return this.hasNext()&&(ye=this.__input.charAt(this.__position),this.__position+=1),ye},ge.prototype.peek=function(ye){var we=null;return ye=ye||0,(ye+=this.__position)>=0&&ye<this.__input_length&&(we=this.__input.charAt(ye)),we},ge.prototype.__match=function(ye,we){ye.lastIndex=we;var ke=ye.exec(this.__input);return!ke||re&&ye.sticky||ke.index!==we&&(ke=null),ke},ge.prototype.test=function(ye,we){return we=we||0,(we+=this.__position)>=0&&we<this.__input_length&&!!this.__match(ye,we)},ge.prototype.testChar=function(ye,we){var ke=this.peek(we);return ye.lastIndex=0,ke!==null&&ye.test(ke)},ge.prototype.match=function(ye){var we=this.__match(ye,this.__position);return we?this.__position+=we[0].length:we=null,we},ge.prototype.read=function(ye,we,ke){var Se,Pe="";return ye&&(Se=this.match(ye))&&(Pe+=Se[0]),!we||!Se&&ye||(Pe+=this.readUntil(we,ke)),Pe},ge.prototype.readUntil=function(ye,we){var ke,Se=this.__position;ye.lastIndex=this.__position;var Pe=ye.exec(this.__input);return Pe?(Se=Pe.index,we&&(Se+=Pe[0].length)):Se=this.__input_length,ke=this.__input.substring(this.__position,Se),this.__position=Se,ke},ge.prototype.readUntilAfter=function(ye){return this.readUntil(ye,!0)},ge.prototype.get_regexp=function(ye,we){var ke=null,Se="g";return we&&re&&(Se="y"),typeof ye=="string"&&ye!==""?ke=new RegExp(ye,Se):ye&&(ke=new RegExp(ye.source,Se)),ke},ge.prototype.get_literal_regexp=function(ye){return RegExp(ye.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))},ge.prototype.peekUntilAfter=function(ye){var we=this.__position,ke=this.readUntilAfter(ye);return this.__position=we,ke},ge.prototype.lookBack=function(ye){var we=this.__position-1;return we>=ye.length&&this.__input.substring(we-ye.length,we).toLowerCase()===ye},xe.exports.InputScanner=ge},function(xe,re,ge){var ye=ge(8).InputScanner,we=ge(3).Token,ke=ge(10).TokenStream,Se=ge(11).WhitespacePattern,Pe={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},Re=function(Ne,ze){this._input=new ye(Ne),this._options=ze||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new Se(this._input)};Re.prototype.tokenize=function(){var Ne;this._input.restart(),this.__tokens=new ke,this._reset();for(var ze=new we(Pe.START,""),Be=null,Ze=[],Xe=new ke;ze.type!==Pe.EOF;){for(Ne=this._get_next_token(ze,Be);this._is_comment(Ne);)Xe.add(Ne),Ne=this._get_next_token(ze,Be);Xe.isEmpty()||(Ne.comments_before=Xe,Xe=new ke),Ne.parent=Be,this._is_opening(Ne)?(Ze.push(Be),Be=Ne):Be&&this._is_closing(Ne,Be)&&(Ne.opened=Be,Be.closed=Ne,Be=Ze.pop(),Ne.parent=Be),Ne.previous=ze,ze.next=Ne,this.__tokens.add(Ne),ze=Ne}return this.__tokens},Re.prototype._is_first_token=function(){return this.__tokens.isEmpty()},Re.prototype._reset=function(){},Re.prototype._get_next_token=function(Ne,ze){this._readWhitespace();var Be=this._input.read(/.+/g);return Be?this._create_token(Pe.RAW,Be):this._create_token(Pe.EOF,"")},Re.prototype._is_comment=function(Ne){return!1},Re.prototype._is_opening=function(Ne){return!1},Re.prototype._is_closing=function(Ne,ze){return!1},Re.prototype._create_token=function(Ne,ze){return new we(Ne,ze,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},Re.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},xe.exports.Tokenizer=Re,xe.exports.TOKEN=Pe},function(xe){function re(ge){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=ge}re.prototype.restart=function(){this.__position=0},re.prototype.isEmpty=function(){return this.__tokens_length===0},re.prototype.hasNext=function(){return this.__position<this.__tokens_length},re.prototype.next=function(){var ge=null;return this.hasNext()&&(ge=this.__tokens[this.__position],this.__position+=1),ge},re.prototype.peek=function(ge){var ye=null;return ge=ge||0,(ge+=this.__position)>=0&&ge<this.__tokens_length&&(ye=this.__tokens[ge]),ye},re.prototype.add=function(ge){this.__parent_token&&(ge.parent=this.__parent_token),this.__tokens.push(ge),this.__tokens_length+=1},xe.exports.TokenStream=re},function(xe,re,ge){var ye=ge(12).Pattern;function we(ke,Se){ye.call(this,ke,Se),Se?this._line_regexp=this._input.get_regexp(Se._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}we.prototype=new ye,we.prototype.__set_whitespace_patterns=function(ke,Se){ke+="\\t ",Se+="\\n\\r",this._match_pattern=this._input.get_regexp("["+ke+Se+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+Se+"]")},we.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var ke=this._input.read(this._match_pattern);if(ke===" ")this.whitespace_before_token=" ";else if(ke){var Se=this.__split(this._newline_regexp,ke);this.newline_count=Se.length-1,this.whitespace_before_token=Se[this.newline_count]}return ke},we.prototype.matching=function(ke,Se){var Pe=this._create();return Pe.__set_whitespace_patterns(ke,Se),Pe._update(),Pe},we.prototype._create=function(){return new we(this._input,this)},we.prototype.__split=function(ke,Se){ke.lastIndex=0;for(var Pe=0,Re=[],Ne=ke.exec(Se);Ne;)Re.push(Se.substring(Pe,Ne.index)),Pe=Ne.index+Ne[0].length,Ne=ke.exec(Se);return Pe<Se.length?Re.push(Se.substring(Pe,Se.length)):Re.push(""),Re},xe.exports.WhitespacePattern=we},function(xe){function re(ge,ye){this._input=ge,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,ye&&(this._starting_pattern=this._input.get_regexp(ye._starting_pattern,!0),this._match_pattern=this._input.get_regexp(ye._match_pattern,!0),this._until_pattern=this._input.get_regexp(ye._until_pattern),this._until_after=ye._until_after)}re.prototype.read=function(){var ge=this._input.read(this._starting_pattern);return this._starting_pattern&&!ge||(ge+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),ge},re.prototype.read_match=function(){return this._input.match(this._match_pattern)},re.prototype.until_after=function(ge){var ye=this._create();return ye._until_after=!0,ye._until_pattern=this._input.get_regexp(ge),ye._update(),ye},re.prototype.until=function(ge){var ye=this._create();return ye._until_after=!1,ye._until_pattern=this._input.get_regexp(ge),ye._update(),ye},re.prototype.starting_with=function(ge){var ye=this._create();return ye._starting_pattern=this._input.get_regexp(ge,!0),ye._update(),ye},re.prototype.matching=function(ge){var ye=this._create();return ye._match_pattern=this._input.get_regexp(ge,!0),ye._update(),ye},re.prototype._create=function(){return new re(this._input,this)},re.prototype._update=function(){},xe.exports.Pattern=re},function(xe){function re(ge,ye){ge=typeof ge=="string"?ge:ge.source,ye=typeof ye=="string"?ye:ye.source,this.__directives_block_pattern=new RegExp(ge+/ beautify( \w+[:]\w+)+ /.source+ye,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(ge+/\sbeautify\signore:end\s/.source+ye,"g")}re.prototype.get_directives=function(ge){if(!ge.match(this.__directives_block_pattern))return null;var ye={};this.__directive_pattern.lastIndex=0;for(var we=this.__directive_pattern.exec(ge);we;)ye[we[1]]=we[2],we=this.__directive_pattern.exec(ge);return ye},re.prototype.readIgnored=function(ge){return ge.readUntilAfter(this.__directives_end_ignore_pattern)},xe.exports.Directives=re},function(xe,re,ge){var ye=ge(12).Pattern,we={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function ke(Se,Pe){ye.call(this,Se,Pe),this.__template_pattern=null,this._disabled=Object.assign({},we),this._excluded=Object.assign({},we),Pe&&(this.__template_pattern=this._input.get_regexp(Pe.__template_pattern),this._excluded=Object.assign(this._excluded,Pe._excluded),this._disabled=Object.assign(this._disabled,Pe._disabled));var Re=new ye(Se);this.__patterns={handlebars_comment:Re.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:Re.starting_with(/{{{/).until_after(/}}}/),handlebars:Re.starting_with(/{{/).until_after(/}}/),php:Re.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:Re.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:Re.starting_with(/{%/).until_after(/%}/),django_value:Re.starting_with(/{{/).until_after(/}}/),django_comment:Re.starting_with(/{#/).until_after(/#}/),smarty:Re.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:Re.starting_with(/{\*/).until_after(/\*}/),smarty_literal:Re.starting_with(/{literal}/).until_after(/{\/literal}/)}}ke.prototype=new ye,ke.prototype._create=function(){return new ke(this._input,this)},ke.prototype._update=function(){this.__set_templated_pattern()},ke.prototype.disable=function(Se){var Pe=this._create();return Pe._disabled[Se]=!0,Pe._update(),Pe},ke.prototype.read_options=function(Se){var Pe=this._create();for(var Re in we)Pe._disabled[Re]=Se.templating.indexOf(Re)===-1;return Pe._update(),Pe},ke.prototype.exclude=function(Se){var Pe=this._create();return Pe._excluded[Se]=!0,Pe._update(),Pe},ke.prototype.read=function(){var Se="";Se=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var Pe=this._read_template();Pe;)this._match_pattern?Pe+=this._input.read(this._match_pattern):Pe+=this._input.readUntil(this.__template_pattern),Se+=Pe,Pe=this._read_template();return this._until_after&&(Se+=this._input.readUntilAfter(this._until_pattern)),Se},ke.prototype.__set_templated_pattern=function(){var Se=[];this._disabled.php||Se.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||Se.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||Se.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(Se.push(this.__patterns.django._starting_pattern.source),Se.push(this.__patterns.django_value._starting_pattern.source),Se.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||Se.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&Se.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+Se.join("|")+")")},ke.prototype._read_template=function(){var Se="",Pe=this._input.peek();if(Pe==="<"){var Re=this._input.peek(1);this._disabled.php||this._excluded.php||Re!=="?"||(Se=Se||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||Re!=="%"||(Se=Se||this.__patterns.erb.read())}else Pe==="{"&&(this._disabled.handlebars||this._excluded.handlebars||(Se=(Se=(Se=Se||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(Se=Se||this.__patterns.django_value.read()),this._excluded.django||(Se=(Se=Se||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(Se=(Se=(Se=Se||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return Se},xe.exports.TemplatablePattern=ke}],Ee={},j=function xe(re){var ge=Ee[re];if(ge!==void 0)return ge.exports;var ye=Ee[re]={exports:{}};return te[re](ye,ye.exports,xe),ye.exports}(0);he=j})();var ce=he;(V=function(){return{js_beautify:ce}}.apply(q,[]))===void 0||(G.exports=V)})()},1512:function(G,q,V){var he=V(3244),ce=V(6906),te=V(7665),Ee=V(975),j=V(4991),xe=V(4209),re=V(9702),ge=V(6757),ye=V(8381),we=V(5543),ke=V(7781),Se=V(8908),Pe=V(1286),Re=V(6768);q=function(ze){return new he(ze)},he.methods({offset:function(){return ce(this)},hide:function(){return this.css("display","none")},show:function(){return te(this),this},first:function(){return q(this[0])},last:function(){return q(re(this))},get:function(ze){return this[ze]},eq:function(ze){return q(this[ze])},on:function(ze,Be,Ze){return we.on(this,ze,Be,Ze),this},off:function(ze,Be,Ze){return we.off(this,ze,Be,Ze),this},html:function(ze){var Be=xe.html(this,ze);return Pe(ze)?Be:this},text:function(ze){var Be=xe.text(this,ze);return Pe(ze)?Be:this},val:function(ze){var Be=xe.val(this,ze);return Pe(ze)?Be:this},css:function(ze,Be){var Ze=Ee(this,ze,Be);return Ne(ze,Be)?Ze:this},attr:function(ze,Be){var Ze=j(this,ze,Be);return Ne(ze,Be)?Ze:this},data:function(ze,Be){var Ze=ye(this,ze,Be);return Ne(ze,Be)?Ze:this},rmAttr:function(ze){return j.remove(this,ze),this},remove:function(){return ge(this),this},addClass:function(ze){return ke.add(this,ze),this},rmClass:function(ze){return ke.remove(this,ze),this},toggleClass:function(ze){return ke.toggle(this,ze),this},hasClass:function(ze){return ke.has(this,ze)},parent:function(){return q(this[0].parentNode)},append:function(ze){return Se.append(this,ze),this},prepend:function(ze){return Se.prepend(this,ze),this},before:function(ze){return Se.before(this,ze),this},after:function(ze){return Se.after(this,ze),this}});var Ne=function(ze,Be){return Pe(Be)&&Re(ze)};G.exports=q},4991:function(G,q,V){var he=V(1352),ce=V(5166),te=V(6768),Ee=V(3783),j=V(1286),xe=V(2341);(q=function(re,ge,ye){if(re=xe(re),j(ye)&&te(ge))return function(ke,Se){return ke.getAttribute(Se)}(re[0],ge);var we=ge;ce(we)||((we={})[ge]=ye),function(ke,Se){Ee(ke,function(Pe){Ee(Se,function(Re,Ne){Pe.setAttribute(Ne,Re)})})}(re,we)}).remove=function(re,ge){re=xe(re),ge=he(ge),Ee(re,function(ye){Ee(ge,function(we){ye.removeAttribute(we)})})},G.exports=q},7781:function(G,q,V){var he=V(1352),ce=V(6053),te=V(2341),Ee=V(6768),j=V(3783);function xe(re){return Ee(re)?re.split(/\s+/):he(re)}q={add:function(re,ge){re=te(re);var ye=xe(ge);j(re,function(we){var ke=[];j(ye,function(Se){q.has(we,Se)||ke.push(Se)}),ke.length!==0&&(we.className+=(we.className?" ":"")+ke.join(" "))})},has:function(re,ge){re=te(re);var ye=new RegExp("(^|\\s)"+ge+"(\\s|$)");return ce(re,function(we){return ye.test(we.className)})},toggle:function(re,ge){re=te(re),j(re,function(ye){if(!q.has(ye,ge))return q.add(ye,ge);q.remove(ye,ge)})},remove:function(re,ge){re=te(re);var ye=xe(ge);j(re,function(we){j(ye,function(ke){we.classList.remove(ke)})})}},G.exports=q},975:function(G,q,V){var he=V(6768),ce=V(5166),te=V(7622),Ee=V(1286),j=V(6341),xe=V(3990),re=V(2341),ge=V(747),ye=V(3783);q=function(ke,Se,Pe){if(ke=re(ke),Ee(Pe)&&he(Se))return function(Ne,ze){return Ne.style[ge(ze)]||getComputedStyle(Ne,"").getPropertyValue(ze)}(ke[0],Se);var Re=Se;ce(Re)||((Re={})[Se]=Pe),function(Ne,ze){ye(Ne,function(Be){var Ze=";";ye(ze,function(Xe,qe){qe=ge.dash(qe),Ze+=qe+":"+function(Je,dt){return xe(dt)&&!j(we,te(Je))?dt+"px":dt}(qe,Xe)+";"}),Be.style.cssText+=Ze})}(ke,Re)};var we=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];G.exports=q},8381:function(G,q,V){var he=V(4991),ce=V(6768),te=V(5166),Ee=V(3783);V(2341),q=function(j,xe,re){var ge=xe;return ce(xe)&&(ge="data-"+xe),te(xe)&&(ge={},Ee(xe,function(ye,we){ge["data-"+we]=ye})),he(j,ge,re)},G.exports=q},5543:function(G,q,V){var he=V(2443),ce=V(1286),te=V(2341),Ee=V(3783);function j(xe){return function(re,ge,ye,we){re=te(re),ce(we)&&(we=ye,ye=void 0),Ee(re,function(ke){he[xe](ke,ge,ye,we)})}}q={on:j("add"),off:j("remove")},G.exports=q},8908:function(G,q,V){var he=V(3783),ce=V(2341),te=V(6768);function Ee(j){return function(xe,re){xe=ce(xe),he(xe,function(ge){if(te(re))ge.insertAdjacentHTML(j,re);else{var ye=ge.parentNode;switch(j){case"beforebegin":ye&&ye.insertBefore(re,ge);break;case"afterend":ye&&ye.insertBefore(re,ge.nextSibling);break;case"beforeend":ge.appendChild(re);break;case"afterbegin":ge.prepend(re)}}})}}q={before:Ee("beforebegin"),after:Ee("afterend"),append:Ee("beforeend"),prepend:Ee("afterbegin")},G.exports=q},6906:function(G,q,V){var he=V(2341);q=function(ce){var te=(ce=he(ce))[0].getBoundingClientRect();return{left:te.left+window.pageXOffset,top:te.top+window.pageYOffset,width:Math.round(te.width),height:Math.round(te.height)}},G.exports=q},4209:function(G,q,V){var he=V(1286),ce=V(3783),te=V(2341);function Ee(j){return function(xe,re){var ge=(xe=te(xe))[0];if(he(re))return ge?ge[j]:"";ge&&ce(xe,function(ye){ye[j]=re})}}q={html:Ee("innerHTML"),text:Ee("textContent"),val:Ee("value")},G.exports=q},6757:function(G,q,V){var he=V(3783),ce=V(2341);q=function(te){te=ce(te),he(te,function(Ee){var j=Ee.parentNode;j&&j.removeChild(Ee)})},G.exports=q},2341:function(G,q,V){var he=V(6768),ce=V(1352),te=V(3244);q=function(Ee){return ce(he(Ee)?new te(Ee):Ee)},G.exports=q},7665:function(G,q,V){var he=V(3783),ce=V(2341);q=function(Ee){Ee=ce(Ee),he(Ee,function(j){(function(xe){return getComputedStyle(xe,"").getPropertyValue("display")=="none"})(j)&&(j.style.display=function(xe){var re,ge;return te[xe]||(re=document.createElement(xe),document.documentElement.appendChild(re),ge=getComputedStyle(re,"").getPropertyValue("display"),re.parentNode.removeChild(re),ge=="none"&&(ge="block"),te[xe]=ge),te[xe]}(j.nodeName))})};var te={};G.exports=q},7496:function(G,q,V){var he=V(6329),ce=V(1352),te=V(5022),Ee=V(7653),j=V(9537),xe=(q=function(re,ge){return xe.extend(re,ge)}).Base=function re(ge,ye,we){we=we||{};var ke=ye.className||Ee(ye,"initialize.name")||"";delete ye.className;var Se=function(){var Pe=ce(arguments);return this.initialize&&this.initialize.apply(this,Pe)||this};if(!j)try{Se=new Function("toArr","return function "+ke+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(ce)}catch{}return te(Se,ge),Se.prototype.constructor=Se,Se.extend=function(Pe,Re){return re(Se,Pe,Re)},Se.inherits=function(Pe){te(Se,Pe)},Se.methods=function(Pe){return he(Se.prototype,Pe),Se},Se.statics=function(Pe){return he(Se,Pe),Se},Se.methods(ye).statics(we),Se}(Object,{className:"Base",callSuper:function(re,ge,ye){return re.prototype[ge].apply(this,ye)},toString:function(){return this.constructor.name}});G.exports=q},3009:function(G,q,V){var he=V(7496),ce=V(6768),te=V(9882),Ee=V(3279),j=V(5925),xe=V(5044);q=he({initialize:function(Se){ce(Se)&&(Se=q.parse(Se)),this.model=Se.model,this.val=Se.val},toRgb:function(){var Se=this.val;this.model==="hsl"&&(Se=j(Se));var Pe="rgba";return Se[3]===1&&(Pe="rgb",Se=Se.slice(0,3)),Pe+"("+Se.join(", ")+")"},toHex:function(){var Se=this.val;this.model==="hsl"&&(Se=j(Se));var Pe=xe.encode(Se.slice(0,3));return Pe[0]===Pe[1]&&Pe[2]===Pe[3]&&Pe[4]===Pe[5]&&(Pe=Pe[0]+Pe[2]+Pe[5]),"#"+Pe},toHsl:function(){var Se=this.val;this.model==="rgb"&&(Se=Ee(Se));var Pe="hsla";return Se[3]===1&&(Pe="hsl",Se=Se.slice(0,3)),Se[1]=Se[1]+"%",Se[2]=Se[2]+"%",Pe+"("+Se.join(", ")+")"}},{parse:function(Se){var Pe,Re,Ne=[0,0,0,1],ze="rgb";if(Re=Se.match(re))for(Re=Re[1],Pe=0;Pe<3;Pe++)Ne[Pe]=parseInt(Re[Pe]+Re[Pe],16);else if(Re=Se.match(ge))for(Re=Re[1],Pe=0;Pe<3;Pe++){var Be=2*Pe;Ne[Pe]=parseInt(Re.slice(Be,Be+2),16)}else if(Re=Se.match(ye)){for(Pe=0;Pe<3;Pe++)Ne[Pe]=parseInt(Re[Pe+1],0);Re[4]&&(Ne[3]=parseFloat(Re[4]))}else if(Re=Se.match(we)){for(Pe=0;Pe<3;Pe++)Ne[Pe]=Math.round(2.55*parseFloat(Re[Pe+1]));Re[4]&&(Ne[3]=parseFloat(Re[4]))}else(Re=Se.match(ke))&&(ze="hsl",Ne=[(parseFloat(Re[1])%360+360)%360,te(parseFloat(Re[2]),0,100),te(parseFloat(Re[3]),0,100),te(parseFloat(Re[4]),0,1)]);return{val:Ne,model:ze}}});var re=/^#([a-fA-F0-9]{3})$/,ge=/^#([a-fA-F0-9]{6})$/,ye=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,we=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,ke=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;G.exports=q},1443:function(G,q,V){var he=V(7496),ce=V(6257),te=V(3783),Ee=V(9677),j=V(8763),xe=V(4675);q=he({initialize:function(){this._events=this._events||{}},on:function(re,ge){return this._events[re]=this._events[re]||[],this._events[re].push(ge),this},off:function(re,ge){var ye=this._events;if(ce(ye,re)){var we=ye[re].indexOf(ge);return we>-1&&ye[re].splice(we,1),this}},once:function(re,ge){return this.on(re,j(ge)),this},emit:function(re){var ge=this;if(ce(this._events,re)){var ye=Ee(arguments,1),we=xe(this._events[re]);return te(we,function(ke){return ke.apply(ge,ye)},this),this}},removeAllListeners:function(re){return re?delete this._events[re]:this._events={},this}},{mixin:function(re){te(["on","off","once","emit","removeAllListeners"],function(ge){re[ge]=q.prototype[ge]}),re._events=re._events||{}}}),G.exports=q},9640:function(G,q,V){var he=V(7496),ce=V(4454),te=V(6472),Ee=V(3783),j=V(2533);q=he({initialize:function(xe){te(xe)?(this.size=xe.length,Ee(xe,function(re,ge){this[re]=ge},this)):(this.size=j(xe).length,Ee(xe,function(re,ge){this[ge]=re},this)),ce(this)}}),G.exports=q},125:function(G,q,V){var he=V(5128),ce=V(615),te=V(8887),Ee=V(4400),j=V(4193),xe=V(5166),re=ce("local");q=he.extend({initialize:function(ge,ye){this._name=ge,ye=ye||{};var we=re.getItem(ge);try{we=JSON.parse(we)}catch{we={}}xe(we)||(we={}),ye=j(we,ye),this.callSuper(he,"initialize",[ye])},save:function(ge){if(te(ge))return re.removeItem(this._name);re.setItem(this._name,Ee(ge))}}),G.exports=q},4989:function(G,q,V){var he=V(1443),ce=V(9640),te=V(1352),Ee=V(1286),j=V(4675),xe=V(6768),re=V(3990);q=he.extend({initialize:function(ge,ye){this.name=ge,this.setLevel(Ee(ye)?q.level.DEBUG:ye),this.callSuper(he,"initialize",arguments)},setLevel:function(ge){return xe(ge)?((ge=q.level[ge.toUpperCase()])&&(this._level=ge),this):(re(ge)&&(this._level=ge),this)},getLevel:function(){return this._level},formatter:function(ge,ye){return ye},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(ge,ye){return(ye=te(ye)).length===0?this:(this.emit("all",ge,j(ye)),q.level[ge.toUpperCase()]<this._level||(this.emit(ge,j(ye)),(ge==="debug"?console.log:console[ge]).apply(console,this.formatter(ge,ye))),this)}},{level:new ce({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),G.exports=q},2765:function(G,q,V){var he=V(1443);q=he.extend({className:"MediaQuery",initialize:function(ce){var te=this;this.callSuper(he,"initialize"),this._mql=window.matchMedia(ce),this._mql.addListener(function(){te.emit(te.isMatch()?"match":"unmatch")})},isMatch:function(){return this._mql.matches}}),G.exports=q},2289:function(G,q,V){var he=V(7496);(q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(q=he({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),G.exports=q},242:function(G,q,V){var he=V(8985),ce=V(8613),te=V(5543),Ee=V(975),j=V(6341),xe=V(6329),re=V(5610);q=re.ResizeObserver?he.extend({initialize:function(ge){var ye=this;if(ge._resizeSensor)return ge._resizeSensor;this.callSuper(he,"initialize");var we=new re.ResizeObserver(function(){return ye.emit()});we.observe(ge),ge._resizeSensor=this,this._resizeObserver=we,this._el=ge},destroy:function(){var ge=this._el;ge._resizeSensor&&(this.rmAllListeners(),delete ge._resizeSensor,this._resizeObserver.unobserve(ge))}}):he.extend({initialize:function(ge){if(ge._resizeSensor)return ge._resizeSensor;this.callSuper(he,"initialize"),this._el=ge,ge._resizeSensor=this,j(["absolute","relative","fixed","sticky"],Ee(ge,"position"))||Ee(ge,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var ge=this._el;ge._resizeSensor&&(this.rmAllListeners(),delete ge._resizeSensor,ge.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var ge=this._el,ye={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},we={position:"absolute",left:"0px",top:"0px",transition:"0s"},ke=ce("div",{style:we}),Se=ce("div.resize-sensor-expand",{style:ye},ke),Pe=ce("div.resize-sensor-shrink",{style:ye},ce("div",{style:xe({width:"200%",height:"200%"},we)})),Re=ce("div.resize-sensor",{dir:"ltr",style:ye},Se,Pe);this._expandEl=Se,this._expandChildEl=ke,this._shrinkEl=Pe,this._resizeSensorEl=Re,ge.appendChild(Re),this._resetExpandShrink()},_bindEvent:function(){var ge=this;te.on(this._expandEl,"scroll",function(){return ge._onScroll()}),te.on(this._shrinkEl,"scroll",function(){return ge._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var ge=this._el,ye=ge.offsetWidth,we=ge.offsetHeight;Ee(this._expandChildEl,{width:ye+10,height:we+10}),xe(this._expandEl,{scrollLeft:ye+10,scrollTop:we+10}),xe(this._shrinkEl,{scrollLeft:ye+10,scrollTop:we+10})}}),G.exports=q},3244:function(G,q,V){var he=V(7496),ce=V(6768),te=V(3783),Ee=V(9971),j=new(q=he({className:"Select",initialize:function(xe){return this.length=0,xe?ce(xe)?j.find(xe):void(xe.nodeType&&(this[0]=xe,this.length=1)):this},find:function(xe){var re=new q;return this.each(function(){Ee(re,this.querySelectorAll(xe))}),re},each:function(xe){return te(this,function(re,ge){xe.call(re,ge,re)}),this}}))(document);G.exports=q},8985:function(G,q,V){var he=V(7496),ce=V(4675),te=V(3783),Ee=V(1352);q=he({initialize:function(){this._listeners=[]},addListener:function(j){this._listeners.push(j)},rmListener:function(j){var xe=this._listeners.indexOf(j);xe>-1&&this._listeners.splice(xe,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var j=this,xe=Ee(arguments),re=ce(this._listeners);te(re,function(ge){return ge.apply(j,xe)},this)}},{mixin:function(j){te(["addListener","rmListener","emit","rmAllListeners"],function(xe){j[xe]=q.prototype[xe]}),j._listeners=j._listeners||[]}}),G.exports=q},9001:function(G,q,V){var he=V(7496),ce=V(1527);q=he({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(te){return this._items.push(te),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(te,Ee){Ee=arguments.length>1?Ee:this;for(var j=this._items,xe=this.size-1,re=0;xe>=0;xe--,re++)te.call(Ee,j[xe],re,this)},toArr:function(){return ce(this._items)}}),G.exports=q},5128:function(G,q,V){var he=V(1443),ce=V(6768),te=V(5166),Ee=V(3783),j=V(1352);q=he.extend({initialize:function(xe){this.callSuper(he,"initialize",arguments),this._data=xe||{},this.save(this._data)},set:function(xe,re){var ge;ce(xe)?(ge={})[xe]=re:te(xe)&&(ge=xe);var ye=this;Ee(ge,function(we,ke){var Se=ye._data[ke];ye._data[ke]=we,ye.emit("change",ke,we,Se)}),this.save(this._data)},get:function(xe){var re=this._data;if(ce(xe))return re[xe];var ge={};return Ee(xe,function(ye){ge[ye]=re[ye]}),ge},remove:function(xe){xe=j(xe);var re=this._data;Ee(xe,function(ge){delete re[ge]}),this.save(re)},clear:function(){this._data={},this.save(this._data)},each:function(xe){Ee(this._data,xe)},save:function(xe){this._data=xe}}),G.exports=q},6334:function(G,q,V){var he=V(7496),ce=V(6329),te=V(4331),Ee=V(1745),j=V(8887),xe=V(3783),re=V(6472),ge=V(1352),ye=V(2727),we=V(5166),ke=V(3367);q=he({className:"Url",initialize:function(Ne){!Ne&&ye&&(Ne=window.location.href),ce(this,q.parse(Ne||""))},setQuery:function(Ne,ze){var Be=this.query;return we(Ne)?xe(Ne,function(Ze,Xe){Be[Xe]=ke(Ze)}):Be[Ne]=ke(ze),this},rmQuery:function(Ne){var ze=this.query;return re(Ne)||(Ne=ge(Ne)),xe(Ne,function(Be){delete ze[Be]}),this},toString:function(){return q.stringify(this)}},{parse:function(Ne){var ze={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},Be=te(Ne),Ze=!1,Xe=Be.match(Se);if(Xe&&(Xe=Xe[0],ze.protocol=Xe.toLowerCase(),Be=Be.substr(Xe.length)),Xe&&(Ze=Be.substr(0,2)==="//")&&(Be=Be.slice(2),ze.slashes=!0),Ze){for(var qe=Be,Je=-1,dt=0,Ct=Re.length;dt<Ct;dt++){var bt=Be.indexOf(Re[dt]);bt!==-1&&(Je===-1||bt<Je)&&(Je=bt)}Je>-1&&(qe=Be.slice(0,Je),Be=Be.slice(Je));var xt=qe.lastIndexOf("@");xt!==-1&&(ze.auth=decodeURIComponent(qe.slice(0,xt)),qe=qe.slice(xt+1)),ze.hostname=qe;var nt=qe.match(Pe);nt&&((nt=nt[0])!==":"&&(ze.port=nt.substr(1)),ze.hostname=qe.substr(0,qe.length-nt.length))}var tt=Be.indexOf("#");tt!==-1&&(ze.hash=Be.substr(tt),Be=Be.slice(0,tt));var rt=Be.indexOf("?");return rt!==-1&&(ze.query=Ee.parse(Be.substr(rt+1)),Be=Be.slice(0,rt)),ze.pathname=Be||"/",ze},stringify:function(Ne){var ze=Ne.protocol+(Ne.slashes?"//":"")+(Ne.auth?encodeURIComponent(Ne.auth)+"@":"")+Ne.hostname+(Ne.port?":"+Ne.port:"")+Ne.pathname;return j(Ne.query)||(ze+="?"+Ee.stringify(Ne.query)),Ne.hash&&(ze+=Ne.hash),ze}});var Se=/^([a-z0-9.+-]+:)/i,Pe=/:[0-9]*$/,Re=["/","?","#"];G.exports=q},8991:function(G,q,V){var he=V(4777),ce=V(1214),te=V(4193),Ee=V(5166),j=V(1745);function xe(re,ge,ye,we){return he(ge)&&(we=ye,ye=ge,ge={}),{url:re,data:ge,success:ye,dataType:we}}(q=function(re){te(re,q.setting);var ge,ye=re.type,we=re.url,ke=re.data,Se=re.dataType,Pe=re.success,Re=re.error,Ne=re.timeout,ze=re.complete,Be=re.xhr();return Be.onreadystatechange=function(){if(Be.readyState===4){var Ze;clearTimeout(ge);var Xe=Be.status;if(Xe>=200&&Xe<300||Xe===304){Ze=Be.responseText,Se==="xml"&&(Ze=Be.responseXML);try{Se==="json"&&(Ze=JSON.parse(Ze))}catch{}Pe(Ze,Be)}else Re(Be);ze(Be)}},ye==="GET"?(ke=j.stringify(ke))&&(we+=we.indexOf("?")>-1?"&"+ke:"?"+ke):re.contentType==="application/x-www-form-urlencoded"?Ee(ke)&&(ke=j.stringify(ke)):re.contentType==="application/json"&&Ee(ke)&&(ke=JSON.stringify(ke)),Be.open(ye,we,!0),Be.setRequestHeader("Content-Type",re.contentType),Ne>0&&(ge=setTimeout(function(){Be.onreadystatechange=ce,Be.abort(),Re(Be,"timeout"),ze(Be)},Ne)),Be.send(ye==="GET"?null:ke),Be}).setting={type:"GET",success:ce,error:ce,complete:ce,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},q.get=function(){return q(xe.apply(null,arguments))},q.post=function(){var re=xe.apply(null,arguments);return re.type="POST",q(re)},G.exports=q},1116:function(G,q,V){var he=V(2533),ce=V(415),te=V(42),Ee=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols;q=function(xe){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=re.prototype,ye=ge===void 0||ge,we=re.unenumerable,ke=we!==void 0&&we,Se=re.symbol,Pe=Se!==void 0&&Se,Re=[];if((ke||Pe)&&Ee){var Ne=he;ke&&Ee&&(Ne=Ee);do Re=Re.concat(Ne(xe)),Pe&&j&&(Re=Re.concat(j(xe)));while(ye&&(xe=ce(xe))&&xe!==Object.prototype);Re=te(Re)}else if(ye)for(var ze in xe)Re.push(ze);else Re=he(xe);return Re},G.exports=q},7913:function(G,q,V){var he=V(3783),ce=V(1286),te=V(4777);q=function(Ee,j){ce(j)&&(j=!0);var xe=te(j),re={};return he(Ee,function(ge){re[ge]=xe?j(ge):j}),re},G.exports=q},3901:function(G,q){q={encode:function(Ee){var j,xe,re=[],ge=Ee.length,ye=ge%3;ge-=ye;for(var we=0;we<ge;we+=3)re.push((j=(Ee[we]<<16)+(Ee[we+1]<<8)+Ee[we+2],he[j>>18&63]+he[j>>12&63]+he[j>>6&63]+he[63&j]));return ge=Ee.length,ye===1?(xe=Ee[ge-1],re.push(he[xe>>2]),re.push(he[xe<<4&63]),re.push("==")):ye===2&&(xe=(Ee[ge-2]<<8)+Ee[ge-1],re.push(he[xe>>10]),re.push(he[xe>>4&63]),re.push(he[xe<<2&63]),re.push("=")),re.join("")},decode:function(Ee){var j=Ee.length,xe=0;Ee[j-2]==="="?xe=2:Ee[j-1]==="="&&(xe=1);var re,ge,ye,we,ke,Se,Pe,Re=new Array(3*j/4-xe);for(j=xe>0?j-4:j,re=0,ge=0;re<j;re+=4){var Ne=(ye=Ee[re],we=Ee[re+1],ke=Ee[re+2],Se=Ee[re+3],V[ye.charCodeAt(0)]<<18|V[we.charCodeAt(0)]<<12|V[ke.charCodeAt(0)]<<6|V[Se.charCodeAt(0)]);Re[ge++]=Ne>>16&255,Re[ge++]=Ne>>8&255,Re[ge++]=255&Ne}return xe===2?(Pe=V[Ee.charCodeAt(re)]<<2|V[Ee.charCodeAt(re+1)]>>4,Re[ge++]=255&Pe):xe===1&&(Pe=V[Ee.charCodeAt(re)]<<10|V[Ee.charCodeAt(re+1)]<<4|V[Ee.charCodeAt(re+2)]>>2,Re[ge++]=Pe>>8&255,Re[ge++]=255&Pe),Re}};for(var V=[],he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ce=0,te=he.length;ce<te;ce++)V[he.charCodeAt(ce)]=ce;G.exports=q},5637:function(G,q){q=function(V,he){var ce;return function(){return--V>0&&(ce=he.apply(this,arguments)),V<=1&&(he=null),ce}},G.exports=q},7494:function(G,q,V){var he=V(8935);function ce(te,Ee){this[Ee]=te.replace(/\w/,function(j){return j.toUpperCase()})}q=function(te){var Ee=he(te),j=Ee[0];return Ee.shift(),Ee.forEach(ce,Ee),j+=Ee.join("")},G.exports=q},1694:function(G,q,V){var he=V(6257),ce=V(6472);q=function(j,xe){if(ce(j))return j;if(xe&&he(xe,j))return[j];var re=[];return j.replace(te,function(ge,ye,we,ke){re.push(we?ke.replace(Ee,"$1"):ye||ge)}),re};var te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ee=/\\(\\)?/g;G.exports=q},996:function(G,q){q=function(V,he){var ce=[];he=he||1;for(var te=0,Ee=Math.ceil(V.length/he);te<Ee;te++){var j=te*he,xe=j+he;ce.push(V.slice(j,xe))}return ce},G.exports=q},9882:function(G,q,V){var he=V(1286);q=function(ce,te,Ee){return he(Ee)&&(Ee=te,te=void 0),!he(te)&&ce<te?te:ce>Ee?Ee:ce},G.exports=q},4675:function(G,q,V){var he=V(5166),ce=V(6472),te=V(6329);q=function(Ee){return he(Ee)?ce(Ee)?Ee.slice():te({},Ee):Ee},G.exports=q},550:function(G,q,V){var he=V(5166),ce=V(4777),te=V(6472),Ee=V(8820);q=function(j){return te(j)?j.map(function(xe){return q(xe)}):he(j)&&!ce(j)?Ee(j,function(xe){return q(xe)}):j},G.exports=q},8099:function(G,q,V){var he=V(1352);q=function(){for(var ce=he(arguments),te=[],Ee=0,j=ce.length;Ee<j;Ee++)te=te.concat(he(ce[Ee]));return te},G.exports=q},6341:function(G,q,V){var he=V(496),ce=V(6768),te=V(1369),Ee=V(2578);q=function(j,xe){return ce(j)?j.indexOf(xe)>-1:(te(j)||(j=Ee(j)),he(j,xe)>=0)},G.exports=q},1792:function(G,q,V){var he=V(6768),ce=V(3901),te=V(385),Ee=V(6472),j=V(2349),xe=V(3085),re=V(3063);(q=function(ge,ye){var we;if(ye=re(ye),he(ge))we=new Uint8Array(ce.decode(ge));else if(te(ge))ge=ge.slice(0),we=new Uint8Array(ge);else if(Ee(ge))we=new Uint8Array(ge);else if(xe(ge)==="uint8array")we=ge.slice(0);else if(j(ge)){we=new Uint8Array(ge.length);for(var ke=0;ke<ge.length;ke++)we[ke]=ge[ke]}if(we)switch(ye){case"base64":we=ce.encode(we);break;case"arraybuffer":we=we.buffer;break;case"array":we=[].slice.call(we);break;case"buffer":we=Buffer.from(we);break;case"blob":we=new Blob([we.buffer])}return we}).blobToArrBuffer=function(ge){return new Promise(function(ye,we){var ke=new FileReader;ke.onload=function(Se){ye(Se.target.result)},ke.onerror=function(Se){we(Se)},ke.readAsArrayBuffer(ge)})},G.exports=q},6299:function(G,q,V){var he=V(4193),ce=V(3990),te=V(1286),Ee=V(1420),j={path:"/"};function xe(re,ge,ye){if(!te(ge)){if(ye=he(ye=ye||{},j),ce(ye.expires)){var we=new Date;we.setMilliseconds(we.getMilliseconds()+864e5*ye.expires),ye.expires=we}return ge=encodeURIComponent(ge),re=encodeURIComponent(re),document.cookie=[re,"=",ge,ye.expires&&"; expires="+ye.expires.toUTCString(),ye.path&&"; path="+ye.path,ye.domain&&"; domain="+ye.domain,ye.secure?"; secure":""].join(""),q}for(var ke=document.cookie?document.cookie.split("; "):[],Se=re?void 0:{},Pe=0,Re=ke.length;Pe<Re;Pe++){var Ne=ke[Pe],ze=Ne.split("="),Be=Ee(ze.shift());if(Ne=ze.join("="),Ne=Ee(Ne),re===Be){Se=Ne;break}re||(Se[Be]=Ne)}return Se}q={get:xe,set:xe,remove:function(re,ge){return(ge=ge||{}).expires=-1,xe(re,"",ge)}},G.exports=q},2327:function(G,q,V){var he=V(6329),ce=V(1214);q=function(te,Ee){Ee=Ee||ce;var j=document.createElement("textarea"),xe=document.body;he(j.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),j.value=te,xe.appendChild(j),j.setAttribute("readonly",""),j.select(),j.setSelectionRange(0,te.length);try{document.execCommand("copy"),Ee()}catch(re){Ee(re)}finally{xe.removeChild(j)}},G.exports=q},1662:function(G,q,V){var he=V(5166);q=function(te){if(!he(te))return{};if(ce)return ce(te);function Ee(){}return Ee.prototype=te,new Ee};var ce=Object.create;G.exports=q},4427:function(G,q,V){var he=V(1286),ce=V(3783);q=function(te,Ee){return function(j){return ce(arguments,function(xe,re){if(re!==0){var ge=te(xe);ce(ge,function(ye){Ee&&!he(j[ye])||(j[ye]=xe[ye])})}}),j}},G.exports=q},4407:function(G,q,V){var he=V(6768),ce=V(2106),te=V(3367),Ee=V(5351);q=function(we,ke,Se,Pe){arguments.length===1&&he(we)&&!ge.test(we)&&(ke=we,we=void 0),we=we||new Date,ce(we)||(we=new Date(we));var Re=(ke=te(q.masks[ke]||ke||q.masks.default)).slice(0,4);Re!=="UTC:"&&Re!=="GMT:"||(ke=ke.slice(4),Se=!0,Re==="GMT:"&&(Pe=!0));var Ne=Se?"getUTC":"get",ze=we[Ne+"Date"](),Be=we[Ne+"Day"](),Ze=we[Ne+"Month"](),Xe=we[Ne+"FullYear"](),qe=we[Ne+"Hours"](),Je=we[Ne+"Minutes"](),dt=we[Ne+"Seconds"](),Ct=we[Ne+"Milliseconds"](),bt=Se?0:we.getTimezoneOffset(),xt={d:ze,dd:j(ze),ddd:q.i18n.dayNames[Be],dddd:q.i18n.dayNames[Be+7],m:Ze+1,mm:j(Ze+1),mmm:q.i18n.monthNames[Ze],mmmm:q.i18n.monthNames[Ze+12],yy:te(Xe).slice(2),yyyy:Xe,h:qe%12||12,hh:j(qe%12||12),H:qe,HH:j(qe),M:Je,MM:j(Je),s:dt,ss:j(dt),l:j(Ct,3),L:j(Math.round(Ct/10)),t:qe<12?"a":"p",tt:qe<12?"am":"pm",T:qe<12?"A":"P",TT:qe<12?"AM":"PM",Z:Pe?"GMT":Se?"UTC":(te(we).match(re)||[""]).pop().replace(ye,""),o:(bt>0?"-":"+")+j(100*Math.floor(Math.abs(bt)/60)+Math.abs(bt)%60,4),S:["th","st","nd","rd"][ze%10>3?0:(ze%100-ze%10!=10)*ze%10]};return ke.replace(xe,function(nt){return nt in xt?xt[nt]:nt.slice(1,nt.length-1)})};var j=function(we){var ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Ee(te(we),ke,"0")},xe=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,re=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,ge=/\d/,ye=/[^-+\dA-Z]/g;q.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},q.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},G.exports=q},6049:function(G,q){q=function(V,he,ce){var te;return function(){var Ee=this,j=arguments,xe=function(){te=null,V.apply(Ee,j)};ce||clearTimeout(te),ce&&te||(te=setTimeout(xe,he))}},G.exports=q},1420:function(G,q,V){var he=V(3783),ce=V(8166),te=V(2461),Ee=V(5742);function j(re){return+("0x"+re)}q=function(re){try{return decodeURIComponent(re)}catch{var ge=re.match(xe);return ge&&he(ge,function(we){re=re.replace(we,function(ke){ke=ke.split("%").slice(1);var Se=te(ke,j);return ke=ce.encode(Se),ke=Ee.decode(ke,!0)}(we))}),re}};var xe=/(%[a-f0-9]{2})+/gi;G.exports=q},4193:function(G,q,V){q=V(4427)(V(1116),!0),G.exports=q},9803:function(G,q,V){var he=V(1694),ce=V(6768),te=V(5166),Ee=V(3783);function j(xe,re,ge){for(var ye=he(re,xe),we=ye.pop();re=ye.shift();)xe[re]||(xe[re]={}),xe=xe[re];Object.defineProperty(xe,we,ge)}q=function(xe,re,ge){return ce(re)?j(xe,re,ge):te(re)&&Ee(re,function(ye,we){j(xe,we,ye)}),xe},G.exports=q},2443:function(G,q,V){var he=V(7496),ce=V(6341);function te(){return!0}function Ee(){return!1}function j(re){var ge,ye=this.events[re.type],we=xe.call(this,re,ye);re=new q.Event(re);for(var ke,Se,Pe=0;(Se=we[Pe++])&&!re.isPropagationStopped();)for(re.curTarget=Se.el,ke=0;(ge=Se.handlers[ke++])&&!re.isImmediatePropagationStopped();)ge.handler.apply(Se.el,[re])===!1&&(re.preventDefault(),re.stopPropagation())}function xe(re,ge){var ye,we,ke,Se,Pe=re.target,Re=[],Ne=ge.delegateCount;if(Pe.nodeType)for(;Pe!==this;Pe=Pe.parentNode||this){for(we=[],Se=0;Se<Ne;Se++)we[ye=(ke=ge[Se]).selector+" "]===void 0&&(we[ye]=ce(this.querySelectorAll(ye),Pe)),we[ye]&&we.push(ke);we.length&&Re.push({el:Pe,handlers:we})}return Ne<ge.length&&Re.push({el:this,handlers:ge.slice(Ne)}),Re}q={add:function(re,ge,ye,we){var ke,Se={selector:ye,handler:we};re.events||(re.events={}),(ke=re.events[ge])||((ke=re.events[ge]=[]).delegateCount=0,re.addEventListener(ge,function(){j.apply(re,arguments)},!1)),ye?ke.splice(ke.delegateCount++,0,Se):ke.push(Se)},remove:function(re,ge,ye,we){var ke=re.events;if(ke&&ke[ge])for(var Se,Pe=ke[ge],Re=Pe.length;Re--;)Se=Pe[Re],ye&&Se.selector!=ye||Se.handler!=we||(Pe.splice(Re,1),Se.selector&&Pe.delegateCount--)},Event:he({className:"Event",initialize:function(re){this.origEvent=re},isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,preventDefault:function(){var re=this.origEvent;this.isDefaultPrevented=te,re&&re.preventDefault&&re.preventDefault()},stopPropagation:function(){var re=this.origEvent;this.isPropagationStopped=te,re&&re.stopPropagation&&re.stopPropagation()},stopImmediatePropagation:function(){var re=this.origEvent;this.isImmediatePropagationStopped=te,re&&re.stopImmediatePropagation&&re.stopImmediatePropagation(),this.stopPropagation()}})},G.exports=q},4541:function(G,q,V){var he=V(2727),ce=V(9296),te=V(2533);q=function(ge){var ye=re(ge=(ge=ge||(he?navigator.userAgent:"")).toLowerCase(),"msie ");if(ye)return{version:ye,name:"ie"};if(j.test(ge))return{version:11,name:"ie"};for(var we=0,ke=xe.length;we<ke;we++){var Se=xe[we],Pe=ge.match(Ee[Se]);if(Pe!=null){var Re=ce(Pe[1].split(".")[0]);return Se==="opera"&&(Re=re(ge,"version/")||Re),{name:Se,version:Re}}}return{name:"unknown",version:-1}};var Ee={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},j=/trident\/7\./,xe=te(Ee);function re(ge,ye){var we=ge.indexOf(ye);if(we>-1)return ce(ge.substring(we+ye.length,ge.indexOf(".",we)))}G.exports=q},6954:function(G,q,V){var he=V(2727);q=function(ce){if(ce=(ce=ce||(he?navigator.userAgent:"")).toLowerCase(),te("windows phone"))return"windows phone";if(te("win"))return"windows";if(te("android"))return"android";if(te("ipad")||te("iphone")||te("ipod"))return"ios";if(te("mac"))return"os x";if(te("linux"))return"linux";function te(Ee){return ce.indexOf(Ee)>-1}return"unknown"},G.exports=q},801:function(G,q,V){var he=V(1137),ce=V(288),te=V(5972),Ee=V(6341);q=he(function(j,xe){return xe=ce(xe),te(j,function(re){return!Ee(xe,re)})}),G.exports=q},3783:function(G,q,V){var he=V(1369),ce=V(2533),te=V(3955);q=function(Ee,j,xe){var re,ge;if(j=te(j,xe),he(Ee))for(re=0,ge=Ee.length;re<ge;re++)j(Ee[re],re,Ee);else{var ye=ce(Ee);for(re=0,ge=ye.length;re<ge;re++)j(Ee[ye[re]],ye[re],Ee)}return Ee},G.exports=q},4858:function(G,q){q=function(V,he){var ce=V.length-he.length;return ce>=0&&V.indexOf(he,ce)===ce},G.exports=q},8901:function(G,q,V){var he=V(2533),ce=(q=function(re){return Ee.test(re)?re.replace(j,xe):re}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},te="(?:"+he(ce).join("|")+")",Ee=new RegExp(te),j=new RegExp(te,"g"),xe=function(re){return ce[re]};G.exports=q},4187:function(G,q,V){var he=V(3367);q=function(te){return he(te).replace(ce,function(Ee){switch(Ee){case'"':case"'":case"\\":return"\\"+Ee;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var ce=/["'\\\n\r\u2028\u2029]/g;G.exports=q},2337:function(G,q){q=function(V){return V.replace(/\W/g,"\\$&")},G.exports=q},642:function(G,q){q=function(V){var he=document.createElement("style");return he.textContent=V,he.type="text/css",document.head.appendChild(he),he},G.exports=q},6329:function(G,q,V){q=V(4427)(V(1116)),G.exports=q},3021:function(G,q,V){var he=V(2533);q=V(4427)(he),G.exports=q},2581:function(G,q,V){var he=V(42),ce=V(4331),te=V(2461),Ee=V(1352);q=function(xe){var re=Ee(xe.match(j));return he(te(re,function(ge){return ce(ge)}))};var j=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;G.exports=q},5972:function(G,q,V){var he=V(2838),ce=V(3783);q=function(te,Ee,j){var xe=[];return Ee=he(Ee,j),ce(te,function(re,ge,ye){Ee(re,ge,ye)&&xe.push(re)}),xe},G.exports=q},2244:function(G,q,V){var he=V(2267),ce=V(4072),te=V(1369),Ee=V(1286);q=function(j,xe,re){var ge=(te(j)?ce:he)(j,xe,re);if(!Ee(ge)&&ge!==-1)return j[ge]},G.exports=q},4072:function(G,q,V){var he=V(2838);q=function(ce,te,Ee,j){j=j||1,te=he(te,Ee);for(var xe=ce.length,re=j>0?0:xe-1;re>=0&&re<xe;){if(te(ce[re],re,ce))return re;re+=j}return-1},G.exports=q},2267:function(G,q,V){var he=V(2838),ce=V(2533);q=function(te,Ee,j){Ee=he(Ee,j);for(var xe,re=ce(te),ge=0,ye=re.length;ge<ye;ge++)if(Ee(te[xe=re[ge]],xe,te))return xe},G.exports=q},288:function(G,q,V){var he=V(6472);function ce(te,Ee){for(var j,xe=te.length,re=-1;xe--;)j=te[++re],he(j)?ce(j,Ee):Ee.push(j);return Ee}q=function(te){return ce(te,[])},G.exports=q},4454:function(G,q,V){var he=V(2533);q=function(ce){return Object.freeze?Object.freeze(ce):(he(ce).forEach(function(te){Object.getOwnPropertyDescriptor(ce,te).configurable&&Object.defineProperty(ce,te,{writable:!1,configurable:!1})}),ce)},G.exports=q},415:function(G,q,V){var he=V(5166),ce=V(4777),te=Object.getPrototypeOf,Ee={}.constructor;q=function(j){if(he(j)){if(te)return te(j);var xe=j.__proto__;return xe||xe===null?xe:ce(j.constructor)?j.constructor.prototype:j instanceof Ee?Ee.prototype:void 0}},G.exports=q},8613:function(G,q,V){var he=V(9833),ce=V(6768),te=V(6930),Ee=V(7781),j=V(975),xe=V(3783),re=V(4777);function ge(ye){for(var we="div",ke="",Se=[],Pe=[],Re="",Ne=0,ze=ye.length;Ne<ze;Ne++){var Be=ye[Ne];Be==="#"||Be==="."?(Pe.push(Re),Re=Be):Re+=Be}Pe.push(Re);for(var Ze=0,Xe=Pe.length;Ze<Xe;Ze++)(Re=Pe[Ze])&&(te(Re,"#")?ke=Re.slice(1):te(Re,".")?Se.push(Re.slice(1)):we=Re);return{tagName:we,id:ke,classes:Se}}q=function(ye,we){for(var ke=arguments.length,Se=new Array(ke>2?ke-2:0),Pe=2;Pe<ke;Pe++)Se[Pe-2]=arguments[Pe];(he(we)||ce(we))&&(Se.unshift(we),we=null),we||(we={});var Re=ge(ye),Ne=Re.tagName,ze=Re.id,Be=Re.classes,Ze=document.createElement(Ne);return ze&&Ze.setAttribute("id",ze),Ee.add(Ze,Be),xe(Se,function(Xe){ce(Xe)?Ze.appendChild(document.createTextNode(Xe)):he(Xe)&&Ze.appendChild(Xe)}),xe(we,function(Xe,qe){ce(Xe)?Ze.setAttribute(qe,Xe):re(Xe)&&te(qe,"on")?Ze.addEventListener(qe.slice(2),Xe,!1):qe==="style"&&j(Ze,Xe)}),Ze},G.exports=q},6257:function(G,q){var V=Object.prototype.hasOwnProperty;q=function(he,ce){return V.call(he,ce)},G.exports=q},5044:function(G,q,V){var he=V(7348);q={encode:function(ce){for(var te=[],Ee=0,j=ce.length;Ee<j;Ee++){var xe=ce[Ee];te.push((xe>>>4).toString(16)),te.push((15&xe).toString(16))}return te.join("")},decode:function(ce){var te=[],Ee=ce.length;he(Ee)&&Ee--;for(var j=0;j<Ee;j+=2)te.push(parseInt(ce.substr(j,2),16));return te}},G.exports=q},3651:function(G,q,V){var he=V(3783),ce=V(4193);q=function(j){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ce(re,te),j=j.replace(/</g,"&lt;").replace(/>/g,"&gt;"),xe=Ee[xe];var ge=0,ye=[];he(xe,function(ke){ke.language&&(j=j.replace(ke.re,function(Se,Pe){return Pe?(ye[ge++]=q(Pe,ke.language,re),Se.replace(Pe,"___subtmpl"+(ge-1)+"___")):Se}))}),he(xe,function(ke,Se){Ee[ke.language]||(j=j.replace(ke.re,"___"+Se+"___$1___end"+Se+"___"))});var we=[];return j=j.replace(/___(?!subtmpl)\w+?___/g,function(ke){var Se=ke.substr(3,3)==="end",Pe=(Se?ke.substr(6):ke.substr(3)).replace(/_/g,""),Re=we.length>0?we[we.length-1]:null;return!Se&&(Re==null||Pe==Re||Re!=null&&xe[Re]&&xe[Re].embed!=null&&xe[Re].embed.indexOf(Pe)>-1)?(we.push(Pe),ke):Se&&Pe==Re?(we.pop(),ke):""}),he(xe,function(ke,Se){var Pe=re[ke.style]?' style="'.concat(re[ke.style],'"'):"";j=j.replace(new RegExp("___end"+Se+"___","g"),"</span>").replace(new RegExp("___"+Se+"___","g"),'<span class="'.concat(ke.style,'"').concat(Pe,">"))}),he(xe,function(ke){ke.language&&(j=j.replace(/___subtmpl\d+___/g,function(Se){var Pe=parseInt(Se.replace(/___subtmpl(\d+)___/,"$1"),10);return ye[Pe]}))}),j};var te={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},Ee={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};Ee.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:Ee.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},Ee.css={comment:Ee.js.comment,string:Ee.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},G.exports=q},5925:function(G,q){q=function(he){var ce,te,Ee,j=he[0]/360,xe=he[1]/100,re=he[2]/100,ge=[];if(he[3]&&(ge[3]=he[3]),xe===0)return Ee=V(255*re),ge[0]=ge[1]=ge[2]=Ee,ge;for(var ye=2*re-(ce=re<.5?re*(1+xe):re+xe-re*xe),we=0;we<3;we++)(te=j+.3333333333333333*-(we-1))<0&&te++,te>1&&te--,Ee=6*te<1?ye+6*(ce-ye)*te:2*te<1?ce:3*te<2?ye+(ce-ye)*(.6666666666666666-te)*6:ye,ge[we]=V(255*Ee);return ge};var V=Math.round;G.exports=q},7483:function(G,q,V){var he=V(8702),ce=V(9001),te=V(6472),Ee=V(3783),j=V(6768),xe=V(8820),re=function(ye){return ye.replace(/&quot;/g,'"')},ge=function(ye){return ye.replace(/"/g,"&quot;")};q={parse:function(ye){var we=[],ke=new ce;return he(ye,{start:function(Se,Pe){Pe=xe(Pe,function(Re){return re(Re)}),ke.push({tag:Se,attrs:Pe})},end:function(){var Se=ke.pop();if(ke.size){var Pe=ke.peek();te(Pe.content)||(Pe.content=[]),Pe.content.push(Se)}else we.push(Se)},comment:function(Se){var Pe="<!--".concat(Se,"-->"),Re=ke.peek();Re?(Re.content||(Re.content=[]),Re.content.push(Pe)):we.push(Pe)},text:function(Se){var Pe=ke.peek();Pe?(Pe.content||(Pe.content=[]),Pe.content.push(Se)):we.push(Se)}}),we},stringify:function ye(we){var ke="";return te(we)?Ee(we,function(Se){return ke+=ye(Se)}):j(we)?ke=we:(ke+="<".concat(we.tag),Ee(we.attrs,function(Se,Pe){return ke+=" ".concat(Pe,'="').concat(ge(Se),'"')}),ke+=">",we.content&&(ke+=ye(we.content)),ke+="</".concat(we.tag,">")),ke}},G.exports=q},6362:function(G,q){q=function(V){return V},G.exports=q},496:function(G,q){q=function(V,he,ce){return Array.prototype.indexOf.call(V,he,ce)},G.exports=q},5022:function(G,q,V){var he=V(1662);q=function(ce,te){ce.prototype=he(te.prototype)},G.exports=q},7403:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object Arguments]"},G.exports=q},6472:function(G,q,V){var he=V(106);q=Array.isArray?Array.isArray:function(ce){return he(ce)==="[object Array]"},G.exports=q},385:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object ArrayBuffer]"},G.exports=q},1369:function(G,q,V){var he=V(3990),ce=V(4777),te=Math.pow(2,53)-1;q=function(Ee){if(!Ee)return!1;var j=Ee.length;return he(j)&&j>=0&&j<=te&&!ce(Ee)},G.exports=q},4696:function(G,q){q=function(V){return V===!0||V===!1},G.exports=q},2727:function(G,q){q=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,G.exports=q},2349:function(G,q,V){var he=V(4777);q=function(ce){return ce!=null&&(!!ce._isBuffer||ce.constructor&&he(ce.constructor.isBuffer)&&ce.constructor.isBuffer(ce))},G.exports=q},2520:function(G,q,V){var he=new(V(2765))("(prefers-color-scheme: dark)");q=function(){return he.isMatch()},G.exports=q},2106:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object Date]"},G.exports=q},9833:function(G,q){q=function(V){return!(!V||V.nodeType!==1)},G.exports=q},8887:function(G,q,V){var he=V(1369),ce=V(6472),te=V(6768),Ee=V(7403),j=V(2533);q=function(xe){return xe==null||(he(xe)&&(ce(xe)||te(xe)||Ee(xe))?xe.length===0:j(xe).length===0)},G.exports=q},2749:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object Error]"},G.exports=q},4777:function(G,q,V){var he=V(106);q=function(ce){var te=he(ce);return te==="[object Function]"||te==="[object GeneratorFunction]"||te==="[object AsyncFunction]"},G.exports=q},9585:function(G,q,V){var he=V(5610),ce=he.getComputedStyle,te=he.document;function Ee(j,xe){return j.right<xe.left||j.left>xe.right||j.bottom<xe.top||j.top>xe.bottom}q=function(j){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=xe.display,ge=re===void 0||re,ye=xe.visibility,we=ye!==void 0&&ye,ke=xe.opacity,Se=ke!==void 0&&ke,Pe=xe.size,Re=Pe!==void 0&&Pe,Ne=xe.viewport,ze=Ne!==void 0&&Ne,Be=xe.overflow,Ze=Be!==void 0&&Be;if(ge)return j.offsetParent===null;var Xe=ce(j);if(we&&Xe.visibility==="hidden")return!0;if(Se){if(Xe.opacity==="0")return!0;for(var qe=j;qe=qe.parentElement;){var Je=ce(qe);if(Je.opacity==="0")return!0}}var dt=j.getBoundingClientRect();if(Re&&(dt.width===0||dt.height===0))return!0;if(ze){var Ct={top:0,left:0,right:te.documentElement.clientWidth,bottom:te.documentElement.clientHeight};return Ee(dt,Ct)}if(Ze)for(var bt=j;bt=bt.parentElement;){var xt=ce(bt),nt=xt.overflow;if(nt==="scroll"||nt==="hidden"){var tt=bt.getBoundingClientRect();if(Ee(dt,tt))return!0}}return!1},G.exports=q},2246:function(G,q,V){var he=V(3990);q=function(ce){return he(ce)&&ce%1==0},G.exports=q},3708:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object Map]"},G.exports=q},7949:function(G,q,V){var he=V(2533);q=function(ce,te){var Ee=he(te),j=Ee.length;if(ce==null)return!j;ce=Object(ce);for(var xe=0;xe<j;xe++){var re=Ee[xe];if(te[re]!==ce[re]||!(re in ce))return!1}return!0},G.exports=q},9537:function(G,q,V){var he=V(4777);q=typeof wx!="undefined"&&he(wx.openLocation),G.exports=q},9956:function(G,q,V){var he=V(2727),ce=V(1475),te=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,Ee=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;q=ce(function(j){return j=j||(he?navigator.userAgent:""),te.test(j)||Ee.test(j.substr(0,4))}),G.exports=q},9433:function(G,q,V){var he=V(3990);q=function(ce){return he(ce)&&ce!==+ce},G.exports=q},8740:function(G,q,V){var he=V(5166),ce=V(4777),te=V(300);q=function(re){return!!he(re)&&(ce(re)?j.test(te(re)):xe.test(te(re)))};var Ee=Object.prototype.hasOwnProperty,j=new RegExp("^"+te(Ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=/^\[object .+?Constructor\]$/;G.exports=q},2763:function(G,q){q=function(V){return V==null},G.exports=q},1965:function(G,q,V){var he=V(106);q=typeof process!="undefined"&&he(process)==="[object process]",G.exports=q},6156:function(G,q){q=function(V){return V===null},G.exports=q},3990:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object Number]"},G.exports=q},5166:function(G,q){q=function(V){var he=typeof V;return!!V&&(he==="function"||he==="object")},G.exports=q},7348:function(G,q,V){var he=V(2246);q=function(ce){return!!he(ce)&&ce%2!=0},G.exports=q},6997:function(G,q){q=function(V){var he=typeof V;return V==null||he!=="function"&&he!=="object"},G.exports=q},4321:function(G,q,V){var he=V(5166),ce=V(4777);q=function(te){return he(te)&&ce(te.then)&&ce(te.catch)},G.exports=q},1754:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object RegExp]"},G.exports=q},7470:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object Set]"},G.exports=q},3843:function(G,q){q=function(V){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q.defComparator,ce=0,te=V.length;ce<te-1;ce++)if(he(V[ce],V[ce+1])>0)return!1;return!0},q.defComparator=function(V,he){return V<he?-1:V>he?1:0},G.exports=q},6768:function(G,q,V){var he=V(106);q=function(ce){return he(ce)==="[object String]"},G.exports=q},9804:function(G,q){q=function(V){return typeof V=="symbol"},G.exports=q},1286:function(G,q){q=function(V){return V===void 0},G.exports=q},7622:function(G,q,V){var he=V(8935);q=function(ce){return he(ce).join("-")},G.exports=q},2533:function(G,q,V){var he=V(6257);q=Object.keys?Object.keys:function(ce){var te=[];for(var Ee in ce)he(ce,Ee)&&te.push(Ee);return te},G.exports=q},9702:function(G,q){q=function(V){var he=V?V.length:0;if(he)return V[he-1]},G.exports=q},3988:function(G,q,V){var he=V(2581),ce=V(3783),te=V(2337);function Ee(j){return'<a href="'+j+'">'+j+"</a>"}q=function(j,xe){xe=xe||Ee;var re=he(j);return ce(re,function(ge){j=j.replace(new RegExp(te(ge),"g"),xe)}),j},G.exports=q},9622:function(G,q){q=function(V,he){var ce=document.createElement("script");ce.src=V,ce.onload=function(){var te=ce.readyState&&ce.readyState!="complete"&&ce.readyState!="loaded";he&&he(!te)},ce.onerror=function(){he(!1)},document.body.appendChild(ce)},G.exports=q},3063:function(G,q,V){var he=V(3367);q=function(ce){return he(ce).toLocaleLowerCase()},G.exports=q},5351:function(G,q,V){var he=V(4552),ce=V(3367);q=function(te,Ee,j){var xe=(te=ce(te)).length;return j=j||" ",xe<Ee&&(te=(he(j,Ee-xe)+te).slice(-Ee)),te},G.exports=q},7767:function(G,q){var V=/^\s+/;q=function(he,ce){if(ce==null)return he.trimLeft?he.trimLeft():he.replace(V,"");for(var te,Ee,j=0,xe=he.length,re=ce.length,ge=!0;ge&&j<xe;)for(ge=!1,te=-1,Ee=he.charAt(j);++te<re;)if(Ee===ce[te]){ge=!0,j++;break}return j>=xe?"":he.substr(j,xe)},G.exports=q},2461:function(G,q,V){var he=V(2838),ce=V(2533),te=V(1369);q=function(Ee,j,xe){j=he(j,xe);for(var re=!te(Ee)&&ce(Ee),ge=(re||Ee).length,ye=Array(ge),we=0;we<ge;we++){var ke=re?re[we]:we;ye[we]=j(Ee[ke],ke,Ee)}return ye},G.exports=q},8820:function(G,q,V){var he=V(2838),ce=V(2533);q=function(te,Ee,j){Ee=he(Ee,j);for(var xe=ce(te),re=xe.length,ge={},ye=0;ye<re;ye++){var we=xe[ye];ge[we]=Ee(te[we],we,te)}return ge},G.exports=q},4491:function(G,q,V){var he=V(3021),ce=V(7949);q=function(te){return te=he({},te),function(Ee){return ce(Ee,te)}},G.exports=q},5026:function(G,q,V){var he=V(2533);q={getItem:function(re){return(te[re]?ce[re]:this[re])||null},setItem:function(re,ge){te[re]?ce[re]=ge:this[re]=ge},removeItem:function(re){te[re]?delete ce[re]:delete this[re]},key:function(re){var ge=Ee();return re>=0&&re<ge.length?ge[re]:null},clear:function(){for(var re,ge=j(),ye=0;re=ge[ye];ye++)delete this[re];ge=xe();for(var we,ke=0;we=ge[ke];ke++)delete ce[we]}},Object.defineProperty(q,"length",{enumerable:!1,configurable:!0,get:function(){return Ee().length}});var ce={},te={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function Ee(){return j().concat(xe())}function j(){return he(q).filter(function(re){return!te[re]})}function xe(){return he(ce)}G.exports=q},1475:function(G,q,V){var he=V(6257);q=function(ce,te){var Ee=function(j){var xe=Ee.cache,re=""+(te?te.apply(this,arguments):j);return he(xe,re)||(xe[re]=ce.apply(this,arguments)),xe[re]};return Ee.cache={},Ee},G.exports=q},9971:function(G,q,V){q=V(1137)(function(he,ce){for(var te=he.length,Ee=0,j=ce.length;Ee<j;Ee++)for(var xe=ce[Ee],re=0,ge=xe.length;re<ge;re++)he[te++]=xe[re];return he.length=te,he}),G.exports=q},8573:function(G,q,V){var he=V(3783),ce=V(6768),te=V(1286),Ee=V(6341),j=V(6472),xe=V(5166),re=V(1352);(q=function(ke,Se){if(te(ke))return Pe={},ye(function(Ne,ze){Pe[Ne]=ze}),Pe;var Pe;if(ce(ke)&&te(Se)||j(ke))return function(Ne){if(!ce(Ne)){var ze={};return ye(function(Ze,Xe){Ee(Ne,Ze)&&(ze[Ze]=Xe)}),ze}var Be=we(Ne);if(Be)return Be.getAttribute("content")}(ke);var Re=ke;xe(Re)||((Re={})[ke]=Se),function(Ne){he(Ne,function(ze,Be){var Ze=we(Be);if(Ze)return Ze.setAttribute("content",ze);(Ze=ge.createElement("meta")).setAttribute("name",Be),Ze.setAttribute("content",ze),ge.head.appendChild(Ze)})}(Re)}).remove=function(ke){ke=re(ke),he(ke,function(Se){var Pe=we(Se);Pe&&ge.head.removeChild(Pe)})};var ge=document;function ye(ke){var Se=ge.querySelectorAll("meta");he(Se,function(Pe){var Re=Pe.getAttribute("name"),Ne=Pe.getAttribute("content");Re&&Ne&&ke(Re,Ne)})}function we(ke){return ge.querySelector('meta[name="'+ke+'"]')}G.exports=q},6435:function(G,q){q=function(){for(var V=arguments,he=V[0],ce=1,te=V.length;ce<te;ce++)V[ce]<he&&(he=V[ce]);return he},G.exports=q},4677:function(G,q,V){var he=V(3875),ce=V(6768);q=function(xe){if(ce(xe)){var re=xe.match(j);return re?he(re[1])*te[re[2]||"ms"]:0}for(var ge=xe,ye="ms",we=0,ke=Ee.length;we<ke;we++)if(ge>=te[Ee[we]]){ye=Ee[we];break}return+(ge/te[ye]).toFixed(2)+ye};var te={ms:1,s:1e3};te.m=60*te.s,te.h=60*te.m,te.d=24*te.h,te.y=365.25*te.d;var Ee=["y","d","h","m","s"],j=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;G.exports=q},6339:function(G,q,V){var he=V(6930),ce=V(5610),te=V(3367);function Ee(j,xe){if(j=te(j),xe=te(xe),he(j,"_")&&!he(xe,"_"))return 1;if(he(xe,"_")&&!he(j,"_"))return-1;for(var re,ge,ye,we,ke=/^\d+|^\D+/;;){if(!j)return xe?-1:0;if(!xe)return 1;if(re=j.match(ke)[0],ge=xe.match(ke)[0],ye=!ce.isNaN(re),we=!ce.isNaN(ge),ye&&!we)return-1;if(we&&!ye)return 1;if(ye&&we){var Se=re-ge;if(Se)return Se;if(re.length!==ge.length)return+re||+ge?ge.length-re.length:re.length-ge.length}else if(re!==ge)return re<ge?-1:1;j=j.substring(re.length),xe=xe.substring(ge.length)}}q=function(j){return j.sort(Ee)},G.exports=q},6837:function(G,q){function V(he){if(typeof he!="function")throw new TypeError(he+" is not a function");return he}q=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(he){setImmediate(V(he))}:function(he){setTimeout(V(he),0)},G.exports=q},1214:function(G,q){q=function(){},G.exports=q},8847:function(G,q){q=Date.now?Date.now:function(){return new Date().getTime()},G.exports=q},106:function(G,q){var V=Object.prototype.toString;q=function(he){return V.call(he)},G.exports=q},8763:function(G,q,V){q=V(4198)(V(5637),2),G.exports=q},3955:function(G,q,V){var he=V(1286);q=function(ce,te,Ee){if(he(te))return ce;switch(Ee==null?3:Ee){case 1:return function(j){return ce.call(te,j)};case 3:return function(j,xe,re){return ce.call(te,j,xe,re)};case 4:return function(j,xe,re,ge){return ce.call(te,j,xe,re,ge)}}return function(){return ce.apply(te,arguments)}},G.exports=q},442:function(G,q,V){var he=V(1443),ce=V(7653),te=window.screen;q={get:function(){if(te){var Ee=ce(te,"orientation.type");if(Ee)return Ee.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},he.mixin(q),window.addEventListener("orientationchange",function(){setTimeout(function(){q.emit("change",q.get())},200)},!1),G.exports=q},8702:function(G,q,V){var he=V(9702),ce=V(7913),te=V(6930),Ee=V(3063);q=function(we,ke){for(var Se,Pe=[],Re=we;we;){if(Se=!0,he(Pe)&&ye[he(Pe)]){var Ne=new RegExp("</".concat(he(Pe),"[^>]*>")).exec(we);if(Ne){var ze=we.substring(0,Ne.index);we=we.substring(Ne.index+Ne[0].length),ze&&ke.text&&ke.text(ze)}bt("",he(Pe))}else{if(te(we,"<!--")){var Be=we.indexOf("-->");Be>=0&&(ke.comment&&ke.comment(we.substring(4,Be)),we=we.substring(Be+3),Se=!1)}else if(te(we,"<!")){var Ze=we.match(j);Ze&&(ke.text&&ke.text(we.substring(0,Ze[0].length)),we=we.substring(Ze[0].length),Se=!1)}else if(te(we,"</")){var Xe=we.match(xe);Xe&&(we=we.substring(Xe[0].length),Xe[0].replace(xe,bt),Se=!1)}else if(te(we,"<")){var qe=we.match(re);qe&&(we=we.substring(qe[0].length),qe[0].replace(re,Ct),Se=!1)}if(Se){var Je=we.indexOf("<"),dt=Je<0?we:we.substring(0,Je);we=Je<0?"":we.substring(Je),ke.text&&ke.text(dt)}}if(Re===we)throw Error("Parse Error: "+we);Re=we}function Ct(xt,nt,tt,rt){if(nt=Ee(nt),(rt=!!rt)||Pe.push(nt),ke.start){var ht={};tt.replace(ge,function(st,pt,vt,ut,Ut){ht[pt]=vt||ut||Ut||""}),ke.start(nt,ht,rt)}}function bt(xt,nt){var tt;if(nt=Ee(nt))for(tt=Pe.length-1;tt>=0&&Pe[tt]!==nt;tt--);else tt=0;if(tt>=0){for(var rt=Pe.length-1;rt>=tt;rt--)ke.end&&ke.end(Pe[rt]);Pe.length=tt}}bt()};var j=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,xe=/^<\/([-A-Za-z0-9_]+)[^>]*>/,re=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,ge=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,ye=ce("script,style".split(","));G.exports=q},4198:function(G,q,V){var he=V(1137),ce=V(1352);q=he(function(te,Ee){return function(){var j=[];return j=(j=j.concat(Ee)).concat(ce(arguments)),te.apply(this,j)}}),G.exports=q},1194:function(G,q,V){var he,ce=V(8847),te=V(5610),Ee=te.performance,j=te.process;if(Ee&&Ee.now)q=function(){return Ee.now()};else if(j&&j.hrtime){var xe=function(){var re=j.hrtime();return 1e9*re[0]+re[1]};he=xe()-1e9*j.uptime(),q=function(){return(xe()-he)/1e6}}else he=ce(),q=function(){return ce()-he};G.exports=q},3487:function(G,q,V){var he=V(6768),ce=V(6472),te=V(6341),Ee=V(3783);q=function(j,xe,re){if(he(xe)&&(xe=[xe]),ce(xe)){var ge=xe;xe=function(ke,Se){return te(ge,Se)}}var ye={},we=function(ke,Se){xe(ke,Se)&&(ye[Se]=ke)};return re&&(we=function(ke,Se){xe(ke,Se)||(ye[Se]=ke)}),Ee(j,we),ye},G.exports=q},747:function(G,q,V){var he=V(1475),ce=V(7494),te=V(3023),Ee=V(6257),j=V(7622);(q=he(function(ye){if(ye=ye.replace(re,""),ye=ce(ye),Ee(ge,ye))return ye;for(var we=xe.length;we--;){var ke=xe[we]+te(ye);if(Ee(ge,ke))return ke}return ye})).dash=he(function(ye){var we=q(ye);return(re.test(we)?"-":"")+j(we)});var xe=["O","ms","Moz","Webkit"],re=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,ge=document.createElement("p").style;G.exports=q},2994:function(G,q,V){var he=V(6472),ce=V(7653);q=function(te){return he(te)?function(j){return ce(j,te)}:(Ee=te,function(j){return j==null?void 0:j[Ee]});var Ee},G.exports=q},1745:function(G,q,V){var he=V(4331),ce=V(3783),te=V(1286),Ee=V(6472),j=V(2461),xe=V(8887),re=V(5972),ge=V(5166);q={parse:function(we){var ke={};return we=he(we).replace(ye,""),ce(we.split("&"),function(Se){var Pe=Se.split("="),Re=Pe.shift(),Ne=Pe.length>0?Pe.join("="):null;Re=decodeURIComponent(Re),Ne=decodeURIComponent(Ne),te(ke[Re])?ke[Re]=Ne:Ee(ke[Re])?ke[Re].push(Ne):ke[Re]=[ke[Re],Ne]}),ke},stringify:function(we,ke){return re(j(we,function(Se,Pe){return ge(Se)&&xe(Se)?"":Ee(Se)?q.stringify(Se,Pe):encodeURIComponent(ke||Pe)+"="+encodeURIComponent(Se)}),function(Se){return Se.length>0}).join("&")}};var ye=/^(\?|#|&)/g;G.exports=q},1571:function(G,q,V){var he,ce,te=V(8847),Ee=V(2727),j=0;if(Ee){he=window.requestAnimationFrame,ce=window.cancelAnimationFrame;for(var xe=["ms","moz","webkit","o"],re=0,ge=xe.length;re<ge&&!he;re++)he=window[xe[re]+"RequestAnimationFrame"],ce=window[xe[re]+"CancelAnimationFrame"]||window[xe[re]+"CancelRequestAnimationFrame"];he&&(he=he.bind(window),ce=ce.bind(window))}ce=ce||function(ye){clearTimeout(ye)},(he=he||function(ye){var we=te(),ke=Math.max(0,16-(we-j)),Se=setTimeout(function(){ye(we+ke)},ke);return j=we+ke,Se}).cancel=ce,q=he,G.exports=q},1216:function(G,q){q=function(V,he,ce){he==null&&(he=V,V=0);var te=Math.random();return ce||V%1||he%1?Math.min(V+te*(he-V+parseFloat("1e-"+((te+"").length-1))),he):V+Math.floor(te*(he-V+1))},G.exports=q},3366:function(module,exports,__webpack_require__){var random=__webpack_require__(1216),isBrowser=__webpack_require__(2727),isNode=__webpack_require__(1965),crypto;exports=function(G){for(var q=new Uint8Array(G),V=0;V<G;V++)q[V]=random(0,255);return q},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(G){var q=new Uint8Array(G);return crypto.getRandomValues(q),q})):isNode&&(crypto=eval("require")("crypto"),exports=function(G){return crypto.randomBytes(G)}),module.exports=exports},5852:function(G,q,V){var he=V(2838);q=function(ce,te,Ee){var j=[];te=he(te,Ee);for(var xe=-1,re=ce.length;++xe<re;){var ge=ce[xe];te(ge,xe,ce)&&(j.push(ge),ce.splice(xe,1))}return j},G.exports=q},4552:function(G,q){q=function(V,he){var ce="";if(he<1)return"";for(;he>0;)1&he&&(ce+=V),he>>=1,V+=V;return ce},G.exports=q},1137:function(G,q){q=function(V,he){return he=he==null?V.length-1:+he,function(){var ce,te=Math.max(arguments.length-he,0),Ee=new Array(te);for(ce=0;ce<te;ce++)Ee[ce]=arguments[ce+he];switch(he){case 0:return V.call(this,Ee);case 1:return V.call(this,arguments[0],Ee);case 2:return V.call(this,arguments[0],arguments[1],Ee)}var j=new Array(he+1);for(ce=0;ce<he;ce++)j[ce]=arguments[ce];return j[he]=Ee,V.apply(this,j)}},G.exports=q},1527:function(G,q){q=function(V){var he=V.length,ce=Array(he);he--;for(var te=0;te<=he;te++)ce[he-te]=V[te];return ce},G.exports=q},3279:function(G,q){q=function(te){var Ee,j,xe=te[0]/255,re=te[1]/255,ge=te[2]/255,ye=V(xe,re,ge),we=he(xe,re,ge),ke=we-ye;(Ee=V(60*(Ee=we===ye?0:xe===we?(re-ge)/ke:re===we?2+(ge-xe)/ke:4+(xe-re)/ke),360))<0&&(Ee+=360);var Se=(ye+we)/2;j=we===ye?0:Se<=.5?ke/(we+ye):ke/(2-we-ye);var Pe=[ce(Ee),ce(100*j),ce(100*Se)];return te[3]&&(Pe[3]=te[3]),Pe};var V=Math.min,he=Math.max,ce=Math.round;G.exports=q},5031:function(G,q,V){var he=V(6299);q=function(ce){var te,Ee=window.location,j=Ee.hostname,xe=Ee.pathname,re=j.split("."),ge=xe.split("/"),ye="",we=ge.length;if(!Ne())for(var ke=re.length-1;ke>=0;ke--){var Se=re[ke];if(Se!==""){if(Ne({domain:ye=ye===""?Se:Se+"."+ye,path:te="/"})||Ne({domain:ye}))return;for(var Pe=0;Pe<we;Pe++){var Re=ge[Pe];if(Re!==""&&(Ne({domain:ye,path:te+=Re})||Ne({path:te})||Ne({domain:ye,path:te+="/"})||Ne({path:te})))return}}}function Ne(ze){return ze=ze||{},he.remove(ce,ze),!he.get(ce)}},G.exports=q},5610:function(G,q,V){q=V(2727)?window:V.g,G.exports=q},3597:function(G,q){q=function(V,he){if(he==null){if(V.trimRight)return V.trimRight();he=` \r
	\f\v`}for(var ce,te,Ee=V.length-1,j=he.length,xe=!0;xe&&Ee>=0;)for(xe=!1,ce=-1,te=V.charAt(Ee);++ce<j;)if(te===he[ce]){xe=!0,Ee--;break}return Ee>=0?V.substring(0,Ee+1):""},G.exports=q},2838:function(G,q,V){var he=V(4777),ce=V(5166),te=V(6472),Ee=V(3955),j=V(4491),xe=V(6362),re=V(2994);q=function(ge,ye,we){return ge==null?xe:he(ge)?Ee(ge,ye,we):ce(ge)&&!te(ge)?j(ge):re(ge)},G.exports=q},7653:function(G,q,V){var he=V(1286),ce=V(1694);q=function(te,Ee){var j;for(j=(Ee=ce(Ee,te)).shift();!he(j);){if((te=te[j])==null)return;j=Ee.shift()}return te},G.exports=q},8079:function(G,q,V){var he=V(1694),ce=V(1286),te=V(3367),Ee=V(9804),j=V(6768);q=function(xe,re,ge){var ye,we=(re=he(re,xe)).pop();for(ye=re.shift();!ce(ye);){if(j(ye)||Ee(ye)||(ye=te(ye)),ye==="__proto__"||ye==="constructor"||ye==="prototype")return;xe[ye]||(xe[ye]={}),xe=xe[ye],ye=re.shift()}xe[we]=ge},G.exports=q},615:function(G,q,V){var he=V(5026);q=function(ce){var te;switch(ce=ce||"local"){case"local":te=window.localStorage;break;case"session":te=window.sessionStorage}try{var Ee="test-localStorage-"+Date.now();te.setItem(Ee,Ee);var j=te.getItem(Ee);if(te.removeItem(Ee),j!==Ee)throw new Error}catch{return he}return te},G.exports=q},4224:function(G,q,V){var he=V(6334);q=function(ce,te){return ce=new he(ce),te=new he(te),ce.port=0|ce.port||(ce.protocol==="https"?443:80),te.port=0|te.port||(te.protocol==="https"?443:80),ce.protocol===te.protocol&&ce.hostname===te.hostname&&ce.port===te.port},G.exports=q},9677:function(G,q){q=function(V,he,ce){var te=V.length;he=he==null?0:he<0?Math.max(te+he,0):Math.min(he,te),ce=ce==null?te:ce<0?Math.max(te+ce,0):Math.min(ce,te);for(var Ee=[];he<ce;)Ee.push(V[he++]);return Ee},G.exports=q},6053:function(G,q,V){var he=V(2838),ce=V(1369),te=V(2533);q=function(Ee,j,xe){j=he(j,xe);for(var re=!ce(Ee)&&te(Ee),ge=(re||Ee).length,ye=0;ye<ge;ye++){var we=re?re[ye]:ye;if(j(Ee[we],we,Ee))return!0}return!1},G.exports=q},3629:function(G,q,V){var he=V(3843),ce=V(4193),te=V(2533),Ee=V(6472),j=V(5166);q=function(re){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ce(ge,xe);var ye=ge.deep,we=ge.comparator,ke=[],Se=[];function Pe(Re){var Ne,ze=ke.indexOf(Re);if(ze>-1)return Se[ze];if(Ee(Re)){Ne=[],ke.push(Re),Se.push(Ne);for(var Be=0,Ze=Re.length;Be<Ze;Be++){var Xe=Re[Be];ye&&j(Xe)?Ne[Be]=Pe(Xe):Ne[Be]=Xe}}else{Ne={},ke.push(Re),Se.push(Ne);for(var qe=te(Re).sort(we),Je=0,dt=qe.length;Je<dt;Je++){var Ct=qe[Je],bt=Re[Ct];ye&&j(bt)?Ne[Ct]=Pe(bt):Ne[Ct]=bt}}return Ne}return Pe(re)};var xe={deep:!1,comparator:he.defComparator};G.exports=q},8935:function(G,q){var V=/([A-Z])/g,he=/[_.\- ]+/g,ce=/(^-)|(-$)/g;q=function(te){return(te=te.replace(V,"-$1").toLowerCase().replace(he,"-").replace(ce,"")).split("-")},G.exports=q},6930:function(G,q){q=function(V,he){return V.indexOf(he)===0},G.exports=q},4400:function(G,q,V){var he=V(3085),ce=V(3023),te=V(3367),Ee=V(1286),j=V(4777),xe=V(1754);q=function(re,ge){return JSON.stringify(re,(ye=[],we=[],function(ke,Se){if(ye.length>0){var Pe=ye.indexOf(this);Pe>-1?(ye.splice(Pe+1),we.splice(Pe,1/0,ke)):(ye.push(this),we.push(ke));var Re=ye.indexOf(Se);Re>-1&&(Se=ye[0]===Se?"[Circular ~]":"[Circular ~."+we.slice(0,Re).join(".")+"]")}else ye.push(Se);return xe(Se)||j(Se)?Se="["+ce(he(Se))+" "+te(Se)+"]":Ee(Se)&&(Se=null),Se}),ge);var ye,we},G.exports=q},9963:function(G,q,V){var he=V(4187),ce=V(3085),te=V(3367),Ee=V(4858),j=V(300),xe=V(2533),re=V(3783),ge=V(7496),ye=V(415),we=V(801),ke=V(6329),Se=V(4321),Pe=V(5972),Re=V(8847),Ne=V(1116),ze=V(6341),Be=V(5166),Ze=V(9537),Xe=V(1662),qe=V(6930),Je=V(8079),dt=V(9803),Ct=V(3487),bt=V(1369);function xt(vt,ut,Ut,at){var zt=[];return re(ut,function(sn){var Mn,rn=Object.getOwnPropertyDescriptor(Ut,sn),on=rn&&rn.get,Zt=rn&&rn.set;if(!at.accessGetter&&on)Mn="(...)";else try{if(Mn=Ut[sn],ze(at.ignore,Mn))return;Se(Mn)&&Mn.catch(function(){})}catch(Ot){Mn=Ot.message}zt.push("".concat(nt(sn),":").concat(q(Mn,at))),on&&zt.push("".concat(nt("get "+te(sn)),":").concat(q(rn.get,at))),Zt&&zt.push("".concat(nt("set "+te(sn)),":").concat(q(rn.set,at)))}),'"'.concat(vt,'":{')+zt.join(",")+"}"}function nt(vt){return'"'.concat(rt(vt),'"')}function tt(vt){return'"'.concat(rt(te(vt)),'"')}function rt(vt){return he(vt).replace(/\\'/g,"'").replace(/\t/g,"\\t")}q=function(vt){var ut=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ut=ut.self,at=ut.startTime,zt=at===void 0?Re():at,sn=ut.timeout,Mn=sn===void 0?0:sn,rn=ut.depth,on=rn===void 0?0:rn,Zt=ut.curDepth,Ot=Zt===void 0?1:Zt,Qt=ut.visitor,un=Qt===void 0?new ht:Qt,yn=ut.unenumerable,In=yn!==void 0&&yn,It=ut.symbol,Rt=It!==void 0&&It,nn=ut.accessGetter,xn=nn!==void 0&&nn,En=ut.ignore,$n=En===void 0?[]:En,zn="",vn={visitor:un,unenumerable:In,symbol:Rt,accessGetter:xn,depth:on,curDepth:Ot+1,timeout:Mn,startTime:zt,ignore:$n},wn=ce(vt,!1);if(wn==="String")zn=tt(vt);else if(wn==="Number")zn=te(vt),Ee(zn,"Infinity")&&(zn='{"value":"'.concat(zn,'","type":"Number"}'));else if(wn==="NaN")zn='{"value":"NaN","type":"Number"}';else if(wn==="Boolean")zn=vt?"true":"false";else if(wn==="Null")zn="null";else if(wn==="Undefined")zn='{"type":"Undefined"}';else if(wn==="Symbol"){var Sn="Symbol";try{Sn=te(vt)}catch{}zn='{"value":'.concat(tt(Sn),',"type":"Symbol"}')}else{if(Mn&&Re()-zt>Mn)return tt("Timeout");if(on&&Ot>on)return tt("{...}");zn="{";var Jn,tr=[],pr=un.get(vt);if(pr?(Jn=pr.id,tr.push('"reference":'.concat(Jn))):(Jn=un.set(vt),tr.push('"id":'.concat(Jn))),tr.push('"type":"'.concat(wn,'"')),Ee(wn,"Function")?tr.push('"value":'.concat(tt(j(vt)))):wn==="RegExp"&&tr.push('"value":'.concat(tt(vt))),!pr){var Xn=xe(vt);if(Xn.length&&tr.push(xt("enumerable",Xn,Ut||vt,vn)),In){var Gn=we(Ne(vt,{prototype:!1,unenumerable:!0}),Xn);Gn.length&&tr.push(xt("unenumerable",Gn,Ut||vt,vn))}if(Rt){var cn=Pe(Ne(vt,{prototype:!1,symbol:!0}),function(Kn){return typeof Kn=="symbol"});cn.length&&tr.push(xt("symbol",cn,Ut||vt,vn))}var gn=ye(vt);if(gn&&!ze($n,gn)){var On='"proto":'.concat(q(gn,ke(vn,{self:Ut||vt})));tr.push(On)}}zn+=tr.join(",")+"}"}return zn};var ht=ge({initialize:function(){this.id=1,this.visited=[]},set:function(vt){var ut=this.visited,Ut=this.id,at={id:Ut,val:vt};return ut.push(at),this.id++,Ut},get:function(vt){for(var ut=this.visited,Ut=0,at=ut.length;Ut<at;Ut++){var zt=ut[Ut];if(vt===zt.val)return zt}return!1}});function st(vt,ut){var Ut=ut.map;if(!Be(vt))return vt;var at=vt.id,zt=vt.type,sn=vt.value,Mn=vt.proto,rn=vt.reference,on=vt.enumerable,Zt=vt.unenumerable;if(rn)return vt;if(zt==="Number")return sn==="Infinity"?Number.POSITIVE_INFINITY:sn==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(zt!=="Undefined"){var Ot,Qt,un;if(zt==="Function")(Ot=function(){}).toString=function(){return sn},Mn&&Object.setPrototypeOf(Ot,st(Mn,ut));else if(zt==="RegExp")un=(Qt=sn).lastIndexOf("/"),Ot=new RegExp(Qt.slice(1,un),Qt.slice(un+1));else{var yn;zt!=="Object"?(yn=Ze?function(){}:new Function(zt,""),Mn&&(yn.prototype=st(Mn,ut)),Ot=new yn):Ot=Xe(Mn?st(Mn,ut):null)}var In,It={};return on&&(bt(on)&&(In=on.length,delete on.length),on=Ct(on,function(nn,xn){return!Rt(on,nn,xn)}),re(on,function(nn,xn){(It[xn]||{}).get||(Ot[xn]=st(nn,ut))}),In&&(Ot.length=In)),Zt&&(Zt=Ct(Zt,function(nn,xn){return!Rt(Zt,nn,xn)}),re(Zt,function(nn,xn){var En=It[xn]||{};if(!En.get)if(nn=st(nn,ut),Be(nn)&&nn.reference){var $n=nn.reference;nn=function(){return Ut[$n]},En.get=nn}else En.value=nn;En.enumerable=!1,It[xn]=En})),dt(Ot,It),Ut[at]=Ot,Ot}function Rt(nn,xn,En){En=te(En);var $n=!1;return re(["get","set"],function(zn){if(qe(En,zn+" ")){var vn=En.replace(zn+" ","");nn[vn]&&((xn=st(xn,ut))==="Timeout"&&(xn=pt),Je(It,[vn,zn],xn),$n=!0)}}),$n}}function pt(){return"Timeout"}q.parse=function(vt){var ut={},Ut=st(JSON.parse(vt),{map:ut});return function(at){re(at,function(zt){for(var sn=xe(zt),Mn=0,rn=sn.length;Mn<rn;Mn++){var on=sn[Mn];if(Be(zt[on])){var Zt=zt[on].reference;Zt&&at[Zt]&&(zt[on]=at[Zt])}}var Ot=ye(zt);Ot&&Ot.reference&&at[Ot.reference]&&Object.setPrototypeOf(zt,at[Ot.reference])})}(ut),Ut},G.exports=q},1907:function(G,q,V){var he=V(6768),ce=V(1352),te=V(6435),Ee=V(2461),j=V(4331);q=function(re){he(re)&&(re=ce(re));for(var ge="",ye=arguments.length,we=new Array(ye>1?ye-1:0),ke=1;ke<ye;ke++)we[ke-1]=arguments[ke];for(var Se=0,Pe=re.length;Se<Pe;Se++)ge+=re[Se],we[Se]&&(ge+=we[Se]);for(var Re=ge.split(`
`),Ne=[],ze=0,Be=Re.length;ze<Be;ze++){var Ze=Re[ze],Xe=Ze.match(xe);Xe&&Ne.push(Xe[1].length)}var qe=Ne.length>0?te.apply(null,Ne):0;return j(Ee(Re,function(Je){return Je[0]===" "?Je.slice(qe):Je}).join(`
`))};var xe=/^(\s+)\S+/;G.exports=q},2439:function(G,q,V){var he=V(6049);q=function(ce,te){return he(ce,te,!0)},G.exports=q},1352:function(G,q,V){var he=V(1369),ce=V(2461),te=V(6472),Ee=V(6768);q=function(j){return j?te(j)?j:he(j)&&!Ee(j)?ce(j):[j]:[]},G.exports=q},4891:function(G,q){var V=document;if(q=function(ce){var te=V.createElement("body");return te.innerHTML=ce,te.childNodes[0]},V.createRange&&V.body){var he=V.createRange();he.selectNode(V.body),he.createContextualFragment&&(q=function(ce){return he.createContextualFragment(ce).childNodes[0]})}G.exports=q},9296:function(G,q,V){var he=V(3875);q=function(ce){return ce?(ce=he(ce))-ce%1:ce===0?ce:0},G.exports=q},3875:function(G,q,V){var he=V(3990),ce=V(5166),te=V(4777),Ee=V(6768);q=function(j){if(he(j))return j;if(ce(j)){var xe=te(j.valueOf)?j.valueOf():j;j=ce(xe)?xe+"":xe}return Ee(j)?+j:j===0?j:+j},G.exports=q},300:function(G,q,V){var he=V(2763);q=function(te){if(he(te))return"";try{return ce.call(te)}catch{}try{return te+""}catch{}return""};var ce=Function.prototype.toString;G.exports=q},3367:function(G,q){q=function(V){return V==null?"":V.toString()},G.exports=q},4331:function(G,q,V){var he=V(7767),ce=V(3597);q=function(te,Ee){return Ee==null&&te.trim?te.trim():he(ce(te,Ee),Ee)},G.exports=q},7756:function(G,q,V){var he=V(4193),ce=V(1286);q=function(Ee,j){var xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};he(xe,te);var re=xe.ellipsis,ge=xe.separator,ye=Ee.length;if(j>ye)return Ee;var we=j-re.length;if(we<1)return re;var ke=Ee.slice(0,we);if(ce(ge))return ke+re;if(Ee.indexOf(ge,we)!==we){var Se=ke.lastIndexOf(ge);Se>-1&&(ke=ke.slice(0,Se))}return ke+re};var te={ellipsis:"..."};G.exports=q},3085:function(G,q,V){var he=V(106),ce=V(9433),te=V(3063),Ee=V(2349);q=function(xe){var re,ge=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return xe===null&&(re="Null"),xe===void 0&&(re="Undefined"),ce(xe)&&(re="NaN"),Ee(xe)&&(re="Buffer"),re||(re=he(xe).match(j))&&(re=re[1]),re?ge?te(re):re:""};var j=/^\[object\s+(.*?)]$/;G.exports=q},9016:function(G,q){q={},G.exports=q},8166:function(G,q,V){var he=V(996),ce=V(2461);q={encode:function(te){return te.length<32768?String.fromCodePoint.apply(String,te):ce(he(te,32767),function(Ee){return String.fromCodePoint.apply(String,Ee)}).join("")},decode:function(te){for(var Ee=[],j=0,xe=te.length;j<xe;){var re=te.charCodeAt(j++);if(re>=55296&&re<=56319&&j<xe){var ge=te.charCodeAt(j++);(64512&ge)==56320?Ee.push(((1023&re)<<10)+(1023&ge)+65536):(Ee.push(re),j--)}else Ee.push(re)}return Ee}},G.exports=q},5484:function(G,q,V){var he=V(2727),ce=V(8985),te=!1;function Ee(j){te&&q.emit(j)}q={start:function(){te=!0},stop:function(){te=!1}},ce.mixin(q),he?(window.addEventListener("error",function(j){Ee(j.error)}),window.addEventListener("unhandledrejection",function(j){Ee(j.reason)})):(process.on("uncaughtException",Ee),process.on("unhandledRejection",Ee)),G.exports=q},5229:function(G,q){var V=0;q=function(he){var ce=++V+"";return he?he+ce:ce},G.exports=q},42:function(G,q,V){var he=V(5972);function ce(te,Ee){return te===Ee}q=function(te,Ee){return Ee=Ee||ce,he(te,function(j,xe,re){for(var ge=re.length;++xe<ge;)if(Ee(j,re[xe]))return!1;return!0})},G.exports=q},4502:function(G,q,V){var he=V(3367);q=function(ce){return he(ce).toLocaleUpperCase()},G.exports=q},3023:function(G,q){q=function(V){return V.length<1?V:V[0].toUpperCase()+V.slice(1)},G.exports=q},5742:function(G,q,V){var he=V(8166);q={encode:function(Re){for(var Ne=he.decode(Re),ze="",Be=0,Ze=Ne.length;Be<Ze;Be++)ze+=ke(Ne[Be]);return ze},decode:function(Re,Ne){ce=he.decode(Re),te=0,Ee=ce.length,j=0,xe=0,re=0,ge=128,ye=191;for(var ze,Be=[];(ze=Se(Ne))!==!1;)Be.push(ze);return he.encode(Be)}};var ce,te,Ee,j,xe,re,ge,ye,we=String.fromCharCode;function ke(Re){if((4294967168&Re)==0)return we(Re);var Ne,ze,Be="";for((4294965248&Re)==0?(Ne=1,ze=192):(4294901760&Re)==0?(Ne=2,ze=224):(4292870144&Re)==0&&(Ne=3,ze=240),Be+=we((Re>>6*Ne)+ze);Ne>0;)Be+=we(128|63&Re>>6*(Ne-1)),Ne--;return Be}function Se(Re){for(;;){if(te>=Ee&&re){if(Re)return Pe();throw new Error("Invalid byte index")}if(te===Ee)return!1;var Ne=ce[te];if(te++,re){if(Ne<ge||Ne>ye){if(Re)return te--,Pe();throw new Error("Invalid continuation byte")}if(ge=128,ye=191,j=j<<6|63&Ne,++xe===re){var ze=j;return j=0,re=0,xe=0,ze}}else{if((128&Ne)==0)return Ne;if((224&Ne)==192)re=1,j=31&Ne;else if((240&Ne)==224)Ne===224&&(ge=160),Ne===237&&(ye=159),re=2,j=15&Ne;else{if((248&Ne)!=240){if(Re)return Pe();throw new Error("Invalid UTF-8 detected")}Ne===240&&(ge=144),Ne===244&&(ye=143),re=3,j=7&Ne}}}}function Pe(){var Re=te-xe-1;return te=Re+1,j=0,re=0,xe=0,ge=128,ye=191,ce[Re]}G.exports=q},5936:function(G,q,V){var he=V(3366);q=function(){var Ee=he(16);return Ee[6]=15&Ee[6]|64,Ee[8]=63&Ee[8]|128,ce[Ee[0]]+ce[Ee[1]]+ce[Ee[2]]+ce[Ee[3]]+"-"+ce[Ee[4]]+ce[Ee[5]]+"-"+ce[Ee[6]]+ce[Ee[7]]+"-"+ce[Ee[8]]+ce[Ee[9]]+"-"+ce[Ee[10]]+ce[Ee[11]]+ce[Ee[12]]+ce[Ee[13]]+ce[Ee[14]]+ce[Ee[15]]};for(var ce=[],te=0;te<256;te++)ce[te]=(te+256).toString(16).substr(1);G.exports=q},2578:function(G,q,V){var he=V(3783);q=function(ce){var te=[];return he(ce,function(Ee){te.push(Ee)}),te},G.exports=q},3514:function(G,q,V){var he=V(8573),ce=V(9882),te=V(4331),Ee=V(3783),j=V(2461),xe=V(9433);q=function(){var re=he("viewport");if(!re)return 1;re=j(re.split(","),function(Se){return te(Se)});var ge=.25,ye=5,we=1;Ee(re,function(Se){var Pe=(Se=Se.split("="))[0];Se=Se[1],Pe==="initial-scale"&&(we=+Se),Pe==="maximum-scale"&&(ye=+Se),Pe==="minimum-scale"&&(ge=+Se)});var ke=ce(we,ge,ye);return xe(ke)?1:ke},G.exports=q},5491:function(G,q,V){var he=V(4198);q=function(ce,te){return he(te,ce)},G.exports=q},8933:function(G,q){q=function(V){for(var he=[],ce=document.evaluate(V,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),te=0;te<ce.snapshotLength;te++)he.push(ce.snapshotItem(te));return he},G.exports=q},4095:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Xn,Gn){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cn,gn){cn.__proto__=gn}||function(cn,gn){for(var On in gn)Object.prototype.hasOwnProperty.call(gn,On)&&(cn[On]=gn[On])},he(Xn,Gn)},function(Xn,Gn){if(typeof Gn!="function"&&Gn!==null)throw new TypeError("Class extends value "+String(Gn)+" is not a constructor or null");function cn(){this.constructor=Xn}he(Xn,Gn),Xn.prototype=Gn===null?Object.create(Gn):(cn.prototype=Gn.prototype,new cn)}),te=this&&this.__makeTemplateObject||function(Xn,Gn){return Object.defineProperty?Object.defineProperty(Xn,"raw",{value:Gn}):Xn.raw=Gn,Xn},Ee=this&&this.__createBinding||(Object.create?function(Xn,Gn,cn,gn){gn===void 0&&(gn=cn);var On=Object.getOwnPropertyDescriptor(Gn,cn);On&&!("get"in On?!Gn.__esModule:On.writable||On.configurable)||(On={enumerable:!0,get:function(){return Gn[cn]}}),Object.defineProperty(Xn,gn,On)}:function(Xn,Gn,cn,gn){gn===void 0&&(gn=cn),Xn[gn]=Gn[cn]}),j=this&&this.__setModuleDefault||(Object.create?function(Xn,Gn){Object.defineProperty(Xn,"default",{enumerable:!0,value:Gn})}:function(Xn,Gn){Xn.default=Gn}),xe=this&&this.__importStar||function(Xn){if(Xn&&Xn.__esModule)return Xn;var Gn={};if(Xn!=null)for(var cn in Xn)cn!=="default"&&Object.prototype.hasOwnProperty.call(Xn,cn)&&Ee(Gn,Xn,cn);return j(Gn,Xn),Gn},re=this&&this.__read||function(Xn,Gn){var cn=typeof Symbol=="function"&&Xn[Symbol.iterator];if(!cn)return Xn;var gn,On,Kn=cn.call(Xn),_r=[];try{for(;(Gn===void 0||Gn-- >0)&&!(gn=Kn.next()).done;)_r.push(gn.value)}catch(kr){On={error:kr}}finally{try{gn&&!gn.done&&(cn=Kn.return)&&cn.call(Kn)}finally{if(On)throw On.error}}return _r},ge=this&&this.__importDefault||function(Xn){return Xn&&Xn.__esModule?Xn:{default:Xn}};Object.defineProperty(q,"__esModule",{value:!0});var ye,we=ge(V(2925)),ke=xe(V(4030)),Se=ge(V(3467)),Pe=ge(V(8719)),Re=ge(V(242)),Ne=ge(V(5166)),ze=ge(V(6768)),Be=ge(V(2749)),Ze=ge(V(6997)),Xe=ge(V(4193)),qe=ge(V(9833)),Je=ge(V(3367)),dt=ge(V(3875)),Ct=ge(V(9296)),bt=ge(V(8099)),xt=ge(V(8901)),nt=ge(V(6156)),tt=ge(V(1286)),rt=ge(V(4777)),ht=ge(V(1352)),st=ge(V(6472)),pt=ge(V(42)),vt=ge(V(6341)),ut=ge(V(8887)),Ut=ge(V(4675)),at=ge(V(3783)),zt=ge(V(2461)),sn=ge(V(4331)),Mn=ge(V(3063)),rn=ge(V(9585)),on=ge(V(2533)),Zt=ge(V(1512)),Ot=ge(V(8613)),Qt=ge(V(1443)),un=ge(V(6049)),yn=ge(V(4400)),In=ge(V(2327)),It=ge(V(9963)),Rt=ge(V(6837)),nn=ge(V(3988)),xn=ge(V(3651)),En=ge(V(6053)),$n=V(1893),zn=ge(V(1907)),vn=ge(V(4891)),wn=ge(V(5229)),Sn=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,Jn={comment:"",string:"",number:"",keyword:"",operator:""},tr=function(Xn){function Gn(cn,gn){var On=gn.type,Kn=On===void 0?"log":On,_r=gn.args,kr=_r===void 0?[]:_r,Dr=gn.id,xr=gn.group,Lr=gn.targetGroup,Br=gn.header,Vr=gn.ignoreFilter,jr=Vr!==void 0&&Vr,Oi=gn.accessGetter,Di=gn.unenumerable,Ti=gn.lazyEvaluation,Sr=Xn.call(this)||this;return Sr.container=(0,Ot.default)("div"),Sr.count=1,Sr.width=0,Sr.height=0,Sr.isHidden=!1,Sr.columns=[],Sr.elements={},Sr.objects={},Sr.console=cn,Sr.type=Kn,Sr.group=xr,Sr.targetGroup=Lr,Sr.args=kr,Sr.id=Dr,Sr.header=Br,Sr.ignoreFilter=jr,Sr.collapsed=!1,Sr.container.log=Sr,Sr.height=0,Sr.width=0,Sr.$container=(0,Zt.default)(Sr.container),Sr.accessGetter=Oi,Sr.unenumerable=Di,Sr.lazyEvaluation=Ti,Sr.resizeSensor=new Re.default(Sr.container),Sr.onResize=(0,un.default)(function(){(0,rn.default)(Sr.container)?Sr.isHidden=!0:(Sr.isHidden||Sr.updateSize(!1),Sr.isHidden=!1)},16),Sr.formatMsg(),Sr.group&&Sr.checkGroup(),Sr.bindEvent(),Sr}return ce(Gn,Xn),Gn.prototype.checkGroup=function(){for(var cn=this.group,gn=!1;cn;){if(cn.collapsed){gn=!0;break}cn=cn.parent}return gn!==this.collapsed&&(this.collapsed=gn,!0)},Gn.prototype.updateIcon=function(cn){var gn=this.console.c;return this.$container.find(gn(".icon")).rmAttr("class").addClass([gn("icon"),gn("icon-".concat(cn))]),this},Gn.prototype.addCount=function(){this.count++;var cn=this.$container,gn=this.count,On=this.console.c,Kn=cn.find(On(".count-container")),_r=cn.find(On(".icon-container")),kr=Kn.find(On(".count"));return gn===2&&Kn.rmClass(On("hidden")),kr.text((0,Je.default)(gn)),_r.addClass(On("hidden")),this},Gn.prototype.groupEnd=function(){var cn=this.$container,gn=this.console.c;return cn.find(".".concat(gn("nesting-level"),":not(.").concat(gn("group-closed"),")")).last().addClass(gn("group-closed")),this},Gn.prototype.updateTime=function(cn){var gn=this.$container.find(this.console.c(".time-container"));return this.header&&(gn.find("span").eq(0).text(cn),this.header.time=cn),this},Gn.prototype.isAttached=function(){return!!this.container.parentNode},Gn.prototype.isSimple=function(){return!(0,En.default)(this.args,function(cn){return(0,Ne.default)(cn)})},Gn.prototype.updateSize=function(cn){cn===void 0&&(cn=!0);var gn=this.container.getBoundingClientRect(),On=gn.width,Kn=gn.height-1;this.height!==Kn&&(this.height=Kn,cn||this.emit("updateHeight")),this.width!==On&&(this.width=On)},Gn.prototype.html=function(){return this.container.outerHTML},Gn.prototype.text=function(){return this.content.textContent||""},Gn.prototype.select=function(){this.$container.addClass(this.console.c("selected"))},Gn.prototype.deselect=function(){this.$container.rmClass(this.console.c("selected"))},Gn.prototype.copy=function(){var cn=this.args,gn="";(0,at.default)(cn,function(On,Kn){Kn!==0&&(gn+=" "),(0,Ne.default)(On)?gn+=(0,yn.default)(On):gn+=(0,Je.default)(On)}),(0,In.default)(gn)},Gn.prototype.bindEvent=function(){var cn=this,gn=this.console.c,On=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",gn(".dom-viewer"),function(Kn){return Kn.stopPropagation()}).on("click",gn(".preview"),function(Kn){Kn.stopPropagation(),On.renderObjectViewer(this)}).on("click",function(){return cn.click()})},Gn.prototype.renderEl=function(){var cn=this.elements,gn=this.console.c,On=this;this.$container.find(gn(".dom-viewer")).each(function(){var Kn=(0,Zt.default)(this).data("id");new Pe.default(this,{node:cn[Kn],theme:On.console.getOption("theme")})})},Gn.prototype.renderObjectViewer=function(cn){var gn=this,On=gn.console,Kn=gn.unenumerable,_r=gn.accessGetter,kr=gn.lazyEvaluation,Dr=On.c,xr=(0,Zt.default)(cn),Lr=xr.data("id");if(Lr){var Br=this.objects[Lr],Vr=xr.find(Dr(".json"));if(Vr.hasClass(Dr("hidden"))){if(Vr.data("init")!=="true"){if(kr){var jr=new ke.default(Vr.get(0),{unenumerable:Kn,accessGetter:_r});jr.setOption("theme",On.getOption("theme")),jr.set(Br)}else{var Oi=new ke.Static(Vr.get(0));Oi.setOption("theme",On.getOption("theme")),Oi.set(Br)}Vr.data("init","true")}Vr.rmClass(Dr("hidden"))}else Vr.addClass(Dr("hidden"))}},Gn.prototype.renderTable=function(cn){var gn=this,On="__LunaConsoleValue",Kn=this,_r=Kn.columns,kr=Kn.$container,Dr=Kn.console,xr=Dr.c,Lr=kr.find(xr(".data-grid")),Br=cn[0],Vr=new Se.default(Lr.get(0),{columns:(0,bt.default)([{id:"(index)",title:"(index)",sortable:!0}],(0,zt.default)(_r,function(jr){return{id:jr,title:jr,sortable:!0}})),theme:Dr.getOption("theme")});(0,at.default)(Br,function(jr,Oi){var Di={"(index)":(0,Je.default)(Oi)};_r.forEach(function(Ti){(0,Ne.default)(jr)?Di[Ti]=Ti===On?"":gn.formatTableVal(jr[Ti]):(0,Ze.default)(jr)&&(Di[Ti]=Ti===On?gn.formatTableVal(jr):"")}),Vr.append(Di)})},Gn.prototype.extractObj=function(cn,gn,On){gn===void 0&&(gn={});var Kn=this.accessGetter,_r=this.unenumerable;(0,Xe.default)(gn,{accessGetter:Kn,unenumerable:_r,symbol:_r,timeout:1e3}),function(kr,Dr,xr){var Lr=(0,It.default)(kr,Dr);(0,Rt.default)(function(){return xr(Lr)})}(cn,gn,function(kr){return On(JSON.parse(kr))})},Gn.prototype.click=function(){var cn=this,gn=cn.type,On=cn.$container,Kn=cn.console,_r=Kn.c;switch(gn){case"log":case"warn":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Kn.toggleGroup(this);break;case"error":On.find(_r(".stack")).toggleClass(_r("hidden"))}},Gn.prototype.formatMsg=function(){var cn=this.args,gn=this,On=gn.type,Kn=gn.id,_r=gn.header,kr=gn.group,Dr=this.console.c;cn=(0,Ut.default)(cn);var xr,Lr,Br="";switch(On!=="group"&&On!=="groupCollapsed"||cn.length===0&&(cn=["console.group"]),On){case"log":case"debug":Br=this.formatCommon(cn);break;case"dir":Br=this.formatDir(cn);break;case"warn":xr="warn",Br=this.formatCommon(cn);break;case"error":(0,ze.default)(cn[0])&&cn.length!==1&&(cn=this.substituteStr(cn)),Lr=cn[0],xr="error",Lr=(0,Be.default)(Lr)?Lr:new Error(this.formatCommon(cn)),Br=this.formatErr(Lr);break;case"table":Br=this.formatTable(cn);break;case"html":Br=cn[0];break;case"input":Br=this.formatJs(cn[0]),xr="input";break;case"output":Br=this.formatCommon(cn),xr="output";break;case"groupCollapsed":Br=this.formatCommon(cn),xr="caret-right";break;case"group":Br=this.formatCommon(cn),xr="caret-down"}(0,vt.default)(["log","debug","warn"],On)&&this.isSimple()&&(Br=(0,nn.default)(Br,function(Vr){return'<a href="'.concat(Vr,'" target="_blank">').concat(Vr,"</a>")})),Br=this.render({msg:Br,type:On,icon:xr,id:Kn,header:_r,group:kr}),this.$container.addClass("".concat(Dr("log-container"))).html(Br),On==="table"&&((0,ut.default)(this.columns)||this.renderTable(cn)),(0,ut.default)(this.elements)||this.renderEl(),this.$content=this.$container.find(Dr(".log-content")),this.content=this.$content.get(0)},Gn.prototype.render=function(cn){var gn=this.console.c,On="",Kn="";if(cn.group)for(var _r=cn.group.indentLevel,kr=0;kr<_r;kr++)Kn+='<div class="'.concat(gn("nesting-level"),'"></div>');cn.header&&(On+=(0,zn.default)(ye||(ye=te([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`],[`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),gn("header"),Kn,gn("time-from-container"),cn.header.time,cn.header.from));var Dr="";return cn.icon&&(Dr='<div class="'.concat(gn("icon-container"),'"><span class="').concat(gn("icon icon-"+cn.icon),'"></span></div>')),On+=`
    <div class="`.concat(gn(cn.type+" log-item"),`">
      `).concat(Kn,`
      `).concat(Dr,`
      <div class="`).concat(gn("count-container hidden"),`">
        <div class="`).concat(gn("count"),`"></div>
      </div>    
      <div class="`).concat(gn("log-content-wrapper"),`">
        <div class="`).concat(gn("log-content"),'">').concat(cn.msg,`</div>
      </div>
    </div>`)},Gn.prototype.formatTable=function(cn){var gn=cn[0],On=cn[1],Kn=[];return(0,ze.default)(On)&&(On=(0,ht.default)(On)),(0,st.default)(On)||(On=null),(0,Ne.default)(gn)?((0,at.default)(gn,function(_r){(0,Ze.default)(_r)?Kn.push("__LunaConsoleValue"):(0,Ne.default)(_r)&&(Kn=Kn.concat((0,on.default)(_r)))}),(Kn=(0,pt.default)(Kn)).sort(),On&&(Kn=Kn.filter(function(_r){return(0,vt.default)(On,_r)})),Kn.length>20&&(Kn=Kn.slice(0,20)),(0,ut.default)(Kn)?this.formatCommon(cn):(this.columns=Kn,this.console.c('<div class="data-grid"></div>')+this.formatPreview(gn))):this.formatCommon(cn)},Gn.prototype.formatErr=function(cn){var gn=cn.stack?cn.stack.split(`
`):[],On="".concat(cn.message||gn[0],"<br/>");return gn=gn.map(function(Kn){return(0,xt.default)(Kn)}),On+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(gn.slice(1).join("<br/>"),"</div>").replace(Sn,function(Kn){return'<a href="'.concat(Kn,'" target="_blank">').concat(Kn,"</a>")})},Gn.prototype.formatCommon=function(cn,gn){var On=(gn===void 0?{}:gn).htmlForEl,Kn=On===void 0||On,_r=(0,ze.default)(cn[0])&&cn.length!==1;_r&&(cn=this.substituteStr(cn));for(var kr=0,Dr=cn.length;kr<Dr;kr++){var xr=cn[kr];(0,qe.default)(xr)&&Kn?cn[kr]=this.formatEl(xr):(0,rt.default)(xr)?cn[kr]=this.formatFn(xr):(0,Ne.default)(xr)?cn[kr]=this.formatPreview(xr):(0,tt.default)(xr)?cn[kr]="undefined":(0,nt.default)(xr)?cn[kr]="null":(xr=(0,Je.default)(xr),kr===0&&_r||(xr=(0,xt.default)(xr)),cn[kr]=xr)}return cn.join(" ")},Gn.prototype.formatDir=function(cn){return this.formatCommon(cn,{htmlForEl:!1})},Gn.prototype.formatTableVal=function(cn){var gn=this.console.c;return(0,Ne.default)(cn)?"{\u2026}":(0,Ze.default)(cn)?(0,vn.default)('<div class="'.concat(gn("preview"),'">').concat((0,we.default)(cn),"</div>")):(0,Je.default)(cn)},Gn.prototype.formatPreview=function(cn){var gn=this,On=this.console.c,Kn=(0,wn.default)();this.lazyEvaluation?this.objects[Kn]=cn:this.extractObj(cn,{},function(kr){gn.objects[Kn]=kr});var _r=(0,$n.getObjType)(cn);return _r==="Array"&&cn.length>1&&(_r="(".concat(cn.length,")")),'<div class="'.concat(On("preview"),'" data-id="').concat(Kn,'">')+'<span class="'.concat(On("descriptor"),'">').concat(_r,"</span> ")+'<span class="'.concat(On("object-preview"),'">').concat((0,we.default)(cn,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+'<div class="'.concat(On("json hidden"),'"></div></div>')},Gn.prototype.substituteStr=function(cn){var gn=(0,xt.default)(cn[0]),On=!1,Kn="";cn.shift();for(var _r=0,kr=gn.length;_r<kr;_r++){var Dr=gn[_r];if(Dr==="%"&&cn.length!==0){_r++;var xr=cn.shift();switch(gn[_r]){case"i":case"d":Kn+=(0,Ct.default)(xr);break;case"f":Kn+=(0,dt.default)(xr);break;case"s":Kn+=(0,Je.default)(xr);break;case"O":(0,Ne.default)(xr)&&(Kn+=this.formatPreview(xr));break;case"o":(0,qe.default)(xr)?Kn+=this.formatEl(xr):(0,Ne.default)(xr)&&(Kn+=this.formatPreview(xr));break;case"c":if(gn.length<=_r+1)break;On&&(Kn+="</span>"),On=!0,Kn+='<span style="'.concat(pr(xr),'">');break;default:_r--,cn.unshift(xr),Kn+=Dr}}else Kn+=Dr}return On&&(Kn+="</span>"),cn.unshift(Kn),cn},Gn.prototype.formatJs=function(cn){return'<pre class="'.concat(this.console.c("code"),'">').concat(this.console.c((0,xn.default)(cn,"js",Jn)),"</pre>")},Gn.prototype.formatFn=function(cn){return'<pre style="display:inline">'.concat(this.formatJs(cn.toString()),"</pre>")},Gn.prototype.formatEl=function(cn){var gn=(0,wn.default)();return this.elements[gn]=cn,this.console.c('<div class="dom-viewer" data-id="'.concat(gn,'"></div>'))},Gn}(Qt.default);function pr(Xn){var Gn=(Xn=(0,Mn.default)(Xn)).split(";"),cn={};(0,at.default)(Gn,function(On){if((0,vt.default)(On,":")){var Kn=re(On.split(":"),2),_r=Kn[0],kr=Kn[1];cn[(0,sn.default)(_r)]=(0,sn.default)(kr)}}),cn.display="inline-block",cn["max-width"]="100%",delete cn.width,delete cn.height;var gn="";return(0,at.default)(cn,function(On,Kn){gn+="".concat(Kn,":").concat(On,";")}),gn}q.default=tr},2925:function(G,q,V){var he=this&&this.__importDefault||function(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}};Object.defineProperty(q,"__esModule",{value:!0});var ce=he(V(8901)),te=he(V(3367)),Ee=he(V(6341)),j=he(V(6930)),xe=he(V(4187)),re=he(V(3783)),ge=he(V(4858)),ye=he(V(8887)),we=V(1893),ke=(0,V(2375).classPrefix)("console");q.default=function Ne(ze,Be){var Ze,Xe=Be===void 0?{}:Be,qe=Xe.topObj,Je=Xe.level,dt=Je===void 0?0:Je,Ct=Xe.getterVal,bt=Ct!==void 0&&Ct,xt=Xe.unenumerable,nt=xt===void 0||xt,tt="",rt="",ht=[],st=[],pt="";qe=qe||ze;var vt={getterVal:bt,unenumerable:nt,level:dt+1},ut=dt===0,Ut='<span class="'.concat(ke("key"),'">'),at='<span class="'.concat(ke("number"),'">'),zt='<span class="'.concat(ke("null"),'">'),sn='<span class="'.concat(ke("string"),'">'),Mn='<span class="'.concat(ke("boolean"),'">'),rn='<span class="'.concat(ke("special"),'">'),on=function(wn){return(0,ce.default)(wn).replace(/\\n/g,"\u21B5").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Zt="</span>";function Ot(wn){return wn=(0,te.default)(wn),(0,Ee.default)(Se,wn)||(0,j.default)(wn,"Array[")?rn+on(wn)+Zt:sn+on('"'.concat(wn,'"'))+Zt}function Qt(wn){if(Ze>5)pt=", \u2026";else{var Sn=function(tr){return Ut+on(tr)+Zt}(Re(wn));if(!bt){var Jn=Object.getOwnPropertyDescriptor(ze,wn);if(Jn&&Jn.get)return ht.push("".concat(Sn,": ").concat(Ot("(...)"))),void Ze++}ht.push("".concat(Sn,": ").concat(Ne(qe[wn],vt))),Ze++}}try{rt={}.toString.call(ze)}catch{rt="[object Object]"}var un,yn=rt=="[object Array]",In=rt=="[object Object]",It=rt=="[object Number]",Rt=rt=="[object RegExp]",nn=rt=="[object Symbol]",xn=rt=="[object Function]",En=rt=="[object Boolean]";if(rt=="[object String]")tt=Ot(Re(ze));else if(Rt)un=Re(ze.toString()),tt=sn+un+Zt;else if(xn)tt=Ot("\u0192");else if(yn)if(ut){tt="[";var $n=ze.length,zn="";$n>100&&($n=100,zn=", \u2026");for(var vn=0;vn<$n;vn++)ht.push("".concat(Ne(ze[vn],vt)));tt+=ht.join(", ")+zn+"]"}else tt="Array(".concat(ze.length,")");else if(In)Pe(ze)&&(ze=Object.getPrototypeOf(ze)),st=nt?Object.getOwnPropertyNames(ze):Object.keys(ze),ut?(Ze=1,tt="{",(0,re.default)(st,Qt),tt+=ht.join(", ")+pt+"}"):(tt=(0,we.getObjType)(ze))==="Object"&&(tt="{\u2026}");else if(It)tt=ze+"",tt=(0,ge.default)(tt,"Infinity")||tt==="NaN"?'"'.concat(tt,'"'):at+tt+Zt;else if(En)tt=Mn+(ze?"true":"false")+Zt;else if(ze===null)tt=function(wn){return zt+wn+Zt}("null");else if(nn)tt=Ot("Symbol");else if(ze===void 0)tt=Ot("undefined");else try{Pe(ze)&&(ze=Object.getPrototypeOf(ze)),ut?(Ze=1,tt="{",st=nt?Object.getOwnPropertyNames(ze):Object.keys(ze),(0,re.default)(st,Qt),tt+=ht.join(", ")+pt+"}"):(tt=(0,we.getObjType)(ze))==="Object"&&(tt="{\u2026}")}catch{tt=Ot(ze)}return tt};var Se=["(...)","undefined","Symbol","Object","\u0192"];function Pe(Ne){var ze=(0,ye.default)(Object.getOwnPropertyNames(Ne)),Be=Object.getPrototypeOf(Ne);return ze&&Be&&Be!==Object.prototype}function Re(Ne){return(0,xe.default)(Ne).replace(/\\'/g,"'").replace(/\t/g,"\\t")}},7132:function(G,q,V){var he,ce=this&&this.__extends||(he=function(on,Zt){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ot,Qt){Ot.__proto__=Qt}||function(Ot,Qt){for(var un in Qt)Object.prototype.hasOwnProperty.call(Qt,un)&&(Ot[un]=Qt[un])},he(on,Zt)},function(on,Zt){if(typeof Zt!="function"&&Zt!==null)throw new TypeError("Class extends value "+String(Zt)+" is not a constructor or null");function Ot(){this.constructor=on}he(on,Zt),on.prototype=Zt===null?Object.create(Zt):(Ot.prototype=Zt.prototype,new Ot)}),te=this&&this.__makeTemplateObject||function(on,Zt){return Object.defineProperty?Object.defineProperty(on,"raw",{value:Zt}):on.raw=Zt,on},Ee=this&&this.__read||function(on,Zt){var Ot=typeof Symbol=="function"&&on[Symbol.iterator];if(!Ot)return on;var Qt,un,yn=Ot.call(on),In=[];try{for(;(Zt===void 0||Zt-- >0)&&!(Qt=yn.next()).done;)In.push(Qt.value)}catch(It){un={error:It}}finally{try{Qt&&!Qt.done&&(Ot=yn.return)&&Ot.call(yn)}finally{if(un)throw un.error}}return In},j=this&&this.__importDefault||function(on){return on&&on.__esModule?on:{default:on}};Object.defineProperty(q,"__esModule",{value:!0});var xe=j(V(4095)),re=j(V(1286)),ge=j(V(1194)),ye=j(V(8847)),we=j(V(6768)),ke=j(V(6329)),Se=j(V(5229)),Pe=j(V(1754)),Re=j(V(4777)),Ne=j(V(9001)),ze=j(V(8887)),Be=j(V(6341)),Ze=j(V(2327)),Xe=j(V(3783)),qe=j(V(1352)),Je=j(V(2533)),dt=j(V(9702)),Ct=j(V(2439)),bt=j(V(8933)),xt=j(V(3063)),nt=j(V(4407)),tt=j(V(9585)),rt=j(V(1907)),ht=j(V(242)),st=j(V(6156)),pt=j(V(1018)),vt=V(1571),ut=navigator.userAgent,Ut=ut.indexOf("Android")>-1||ut.indexOf("Adr")>-1,at=0,zt=function(on){function Zt(Ot,Qt){Qt===void 0&&(Qt={});var un=on.call(this,Ot,{compName:"console"},Qt)||this;return un.spaceHeight=0,un.topSpaceHeight=0,un.bottomSpaceHeight=0,un.lastScrollTop=0,un.lastTimestamp=0,un.speedToleranceFactor=100,un.maxSpeedTolerance=2e3,un.minSpeedTolerance=100,un.logs=[],un.displayLogs=[],un.timer={},un.counter={},un.asyncList=[],un.asyncTimer=null,un.isAtBottom=!0,un.groupStack=new Ne.default,un.selectedLog=null,un.onScroll=function(){var yn=un.container,In=yn.scrollHeight,It=yn.offsetHeight,Rt=yn.scrollTop;if(!(Rt<=0||It+Rt>In)){var nn=!1;(In===It||Rt===In-It)&&(nn=!0),un.isAtBottom=nn;var xn=un.lastScrollTop,En=un.lastTimestamp,$n=(0,ye.default)(),zn=$n-En,vn=Rt-xn,wn=Math.abs(vn/zn)*un.speedToleranceFactor;zn>1e3&&(wn=1e3),wn>un.maxSpeedTolerance&&(wn=un.maxSpeedTolerance),wn<un.minSpeedTolerance&&(wn=un.minSpeedTolerance),un.lastScrollTop=Rt,un.lastTimestamp=$n;var Sn=0,Jn=0;xn<Rt?(Sn=un.minSpeedTolerance,Jn=wn):(Sn=wn,Jn=un.minSpeedTolerance),un.topSpaceHeight<Rt-Sn&&un.topSpaceHeight+un.el.offsetHeight>Rt+It+Jn||un.renderViewport({topTolerance:2*Sn,bottomTolerance:2*Jn})}},un.initTpl(),un.initOptions(Qt,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"all",accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),un.$el=un.find(".logs"),un.el=un.$el.get(0),un.$fakeEl=un.find(".fake-logs"),un.fakeEl=un.$fakeEl.get(0),un.$space=un.find(".logs-space"),un.space=un.$space.get(0),Ut&&(un.speedToleranceFactor=800,un.maxSpeedTolerance=3e3,un.minSpeedTolerance=800),un.resizeSensor=new ht.default(Ot),un.renderViewport=(0,Ct.default)(function(yn){un._renderViewport(yn)},16),un.global={copy:function(yn){(0,we.default)(yn)||(yn=JSON.stringify(yn,null,2)),(0,Ze.default)(yn)},$:function(yn){return document.querySelector(yn)},$$:function(yn){return(0,qe.default)(document.querySelectorAll(yn))},$x:function(yn){return(0,bt.default)(yn)},clear:function(){un.clear()},dir:function(yn){un.dir(yn)},table:function(yn,In){un.table(yn,In)},keys:Je.default},un.bindEvent(),un}return ce(Zt,on),Zt.prototype.setGlobal=function(Ot,Qt){this.global[Ot]=Qt},Zt.prototype.destroy=function(){this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),on.prototype.destroy.call(this)},Zt.prototype.count=function(Ot){Ot===void 0&&(Ot="default");var Qt=this.counter;(0,re.default)(Qt[Ot])?Qt[Ot]=1:Qt[Ot]++,this.info("".concat(Ot,": ").concat(Qt[Ot]))},Zt.prototype.countReset=function(Ot){Ot===void 0&&(Ot="default"),this.counter[Ot]=0},Zt.prototype.assert=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];if(!(0,ze.default)(Ot)){var un=Ot.shift();un||(Ot.length===0&&Ot.unshift("console.assert"),Ot.unshift("Assertion failed: "),this.insert("error",Ot))}},Zt.prototype.log=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];(0,ze.default)(Ot)||this.insert("log",Ot)},Zt.prototype.debug=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];(0,ze.default)(Ot)||this.insert("debug",Ot)},Zt.prototype.dir=function(Ot){(0,re.default)(Ot)||this.insert("dir",[Ot])},Zt.prototype.table=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];(0,ze.default)(Ot)||this.insert("table",Ot)},Zt.prototype.time=function(Ot){if(Ot===void 0&&(Ot="default"),this.timer[Ot])return this.insert("warn",["Timer '".concat(Ot,"' already exists")]);this.timer[Ot]=(0,ge.default)()},Zt.prototype.timeLog=function(Ot){Ot===void 0&&(Ot="default");var Qt=this.timer[Ot];if(!Qt)return this.insert("warn",["Timer '".concat(Ot,"' does not exist")]);this.info("".concat(Ot,": ").concat((0,ge.default)()-Qt,"ms"))},Zt.prototype.timeEnd=function(Ot){Ot===void 0&&(Ot="default"),this.timeLog(Ot),delete this.timer[Ot]},Zt.prototype.clear=function(Ot){Ot===void 0&&(Ot=!1),this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new Ne.default,this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),Ot?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])},Zt.prototype.info=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];(0,ze.default)(Ot)||this.insert("log",Ot)},Zt.prototype.error=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];(0,ze.default)(Ot)||this.insert("error",Ot)},Zt.prototype.warn=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];(0,ze.default)(Ot)||this.insert("warn",Ot)},Zt.prototype.group=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];this.insert({type:"group",args:Ot,ignoreFilter:!0})},Zt.prototype.groupCollapsed=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];this.insert({type:"groupCollapsed",args:Ot,ignoreFilter:!0})},Zt.prototype.groupEnd=function(){this.insert("groupEnd")},Zt.prototype.evaluate=function(Ot){this.insert({type:"input",args:[Ot],ignoreFilter:!0});try{this.output(this.evalJs(Ot))}catch(Qt){this.insert({type:"error",ignoreFilter:!0,args:[Qt]})}},Zt.prototype.html=function(){for(var Ot=[],Qt=0;Qt<arguments.length;Qt++)Ot[Qt]=arguments[Qt];this.insert("html",Ot)},Zt.prototype.toggleGroup=function(Ot){Ot.targetGroup.collapsed?this.openGroup(Ot):this.collapseGroup(Ot)},Zt.prototype.output=function(Ot){this.insert({type:"output",args:[Ot],ignoreFilter:!0})},Zt.prototype.render=function(){var Ot=this.logs,Qt=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var un=0,yn=Ot.length;un<yn;un++)this.attachLog(Ot[un]);Qt&&((0,Be.default)(this.displayLogs,Qt)||this.selectLog(null))},Zt.prototype.insert=function(Ot,Qt){var un,yn=this.options,In=yn.showHeader,It=yn.asyncRender;if(In&&(un={time:Mn(),from:rn()}),It)return this.insertAsync(Ot,Qt,un);this.insertSync(Ot,Qt,un)},Zt.prototype.insertAsync=function(Ot,Qt,un){this.asyncList.push([Ot,Qt,un]),this.handleAsyncList()},Zt.prototype.insertSync=function(Ot,Qt,un){var yn,In=this,It=this.logs,Rt=this.groupStack,nn=this.options,xn=nn.maxNum,En=nn.accessGetter,$n=nn.unenumerable,zn=nn.lazyEvaluation;if((yn=(0,we.default)(Ot)?{type:Ot,args:Qt,header:un}:Ot).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(Rt.size>0&&(yn.group=Rt.peek()),(0,ke.default)(yn,{id:++at,accessGetter:En,unenumerable:$n,lazyEvaluation:zn}),yn.type==="group"||yn.type==="groupCollapsed"){var vn={id:(0,Se.default)("group"),collapsed:!1,parent:Rt.peek(),indentLevel:Rt.size+1};yn.type==="groupCollapsed"&&(vn.collapsed=!0),yn.targetGroup=vn,Rt.push(vn)}var wn=new xe.default(this,yn);wn.on("updateHeight",function(){In.isAtBottom=!1,In.renderViewport()});var Sn=this.lastLog;if(Sn&&!(0,Be.default)(["html","group","groupCollapsed"],wn.type)&&Sn.type===wn.type&&wn.isSimple()&&Sn.text()===wn.text()?(Sn.addCount(),wn.header&&Sn.updateTime(wn.header.time),wn=Sn,this.detachLog(Sn)):(It.push(wn),this.lastLog=wn),xn!==0&&It.length>xn){var Jn=It[0];this.detachLog(Jn),It.shift()}this.attachLog(wn),this.emit("insert",wn)},Zt.prototype.updateTopSpace=function(Ot){this.topSpaceHeight=Ot,this.el.style.top=Ot+"px"},Zt.prototype.updateBottomSpace=function(Ot){this.bottomSpaceHeight=Ot},Zt.prototype.updateSpace=function(Ot){this.spaceHeight!==Ot&&(this.spaceHeight=Ot,this.space.style.height=Ot+"px")},Zt.prototype.detachLog=function(Ot){var Qt=this.displayLogs,un=Qt.indexOf(Ot);un>-1&&(Qt.splice(un,1),this.renderViewport())},Zt.prototype.attachLog=function(Ot){if(this.filterLog(Ot)&&!Ot.collapsed){var Qt=this.displayLogs;if(Qt.length===0)return Qt.push(Ot),void this.renderViewport();var un=(0,dt.default)(Qt);if(Ot.id>un.id)return Qt.push(Ot),void this.renderViewport();for(var yn,In=0,It=Qt.length-1,Rt=0;In<=It;){if((yn=Qt[Rt=In+Math.floor((It-In)/2)]).id===Ot.id)return;yn.id<Ot.id?In=Rt+1:It=Rt-1}yn.id<Ot.id?Qt.splice(Rt+1,0,Ot):Qt.splice(Rt,0,Ot),this.renderViewport()}},Zt.prototype.handleAsyncList=function(Ot){var Qt=this;Ot===void 0&&(Ot=20);var un=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){Qt.asyncTimer=null;var yn,In,It=!1,Rt=un.length;Rt<1e3?(In=200,yn=400):Rt<5e3?(In=500,yn=800):Rt<1e4?(In=800,yn=1e3):Rt<25e3?(In=1e3,yn=1200):Rt<5e4?(In=1500,yn=1500):(In=2e3,yn=2500),In>Rt&&(In=Rt,It=!0);for(var nn=0;nn<In;nn++){var xn=Ee(un.shift(),3),En=xn[0],$n=xn[1],zn=xn[2];Qt.insertSync(En,$n,zn)}It||vt(function(){return Qt.handleAsyncList(yn)})},Ot))},Zt.prototype.injectGlobal=function(){(0,Xe.default)(this.global,function(Ot,Qt){window[Qt]||(window[Qt]=Ot)})},Zt.prototype.clearGlobal=function(){(0,Xe.default)(this.global,function(Ot,Qt){window[Qt]&&window[Qt]===Ot&&delete window[Qt]})},Zt.prototype.evalJs=function(Ot){var Qt;this.injectGlobal();try{Qt=eval.call(window,"(".concat(Ot,")"))}catch{Qt=eval.call(window,Ot)}return this.setGlobal("$_",Qt),this.clearGlobal(),Qt},Zt.prototype.filterLog=function(Ot){var Qt=this.options.filter;return Qt==="all"||!!Ot.ignoreFilter||((0,Re.default)(Qt)?Qt(Ot):(0,Pe.default)(Qt)?Qt.test((0,xt.default)(Ot.text())):Ot.type===Qt)},Zt.prototype.collapseGroup=function(Ot){Ot.targetGroup.collapsed=!0,Ot.updateIcon("caret-right"),this.updateGroup(Ot)},Zt.prototype.openGroup=function(Ot){Ot.targetGroup.collapsed=!1,Ot.updateIcon("caret-down"),this.updateGroup(Ot)},Zt.prototype.updateGroup=function(Ot){for(var Qt=Ot.targetGroup,un=this.logs,yn=un.length,In=un.indexOf(Ot)+1;In<yn;){var It=un[In];if(!It.checkGroup()&&It.group===Qt)break;It.collapsed?this.detachLog(It):this.attachLog(It),In++}},Zt.prototype.selectLog=function(Ot){var Qt;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),(0,st.default)(Ot)?this.emit("deselect"):(this.selectedLog=Ot,(Qt=this.selectedLog)===null||Qt===void 0||Qt.select(),this.emit("select",Ot))},Zt.prototype.bindEvent=function(){var Ot=this,Qt=this.$el,un=this.c;this.resizeSensor.addListener(this.renderViewport);var yn=this;Qt.on("click",un(".log-container"),function(){yn.selectLog(this.log)}),this.on("optionChange",function(In,It){var Rt=Ot.logs;switch(In){case"maxNum":It>0&&Rt.length>It&&(Ot.logs=Rt.slice(Rt.length-It),Ot.render());break;case"filter":Ot.render()}}),this.$container.on("scroll",this.onScroll)},Zt.prototype._renderViewport=function(Ot){var Qt=Ot===void 0?{}:Ot,un=Qt.topTolerance,yn=un===void 0?500:un,In=Qt.bottomTolerance,It=In===void 0?500:In,Rt=this.el,nn=this.container;if(!(0,tt.default)(nn)){for(var xn=nn,En=xn.scrollTop,$n=xn.offsetHeight,zn=nn.getBoundingClientRect().width,vn=En-yn,wn=En+$n+It,Sn=this.displayLogs,Jn=0,tr=0,pr=0,Xn=Sn.length,Gn=this.fakeEl,cn=document.createDocumentFragment(),gn=[],On=0;On<Xn;On++){var Kn=(Dr=Sn[On]).width;(Lr=Dr.height)!==0&&Kn===zn||(cn.appendChild(Dr.container),gn.push(Dr))}if(gn.length>0){Gn.appendChild(cn),On=0;for(var _r=gn.length;On<_r;On++)gn[On].updateSize();Gn.innerHTML=""}var kr=document.createDocumentFragment();for(On=0;On<Xn;On++){var Dr,xr=(Dr=Sn[On]).container,Lr=Dr.height;pr>wn?tr+=Lr:pr+Lr>vn?kr.appendChild(xr):pr<vn&&(Jn+=Lr),pr+=Lr}for(this.updateSpace(pr),this.updateTopSpace(Jn),this.updateBottomSpace(tr);Rt.firstChild;)Rt.lastChild&&Rt.removeChild(Rt.lastChild);Rt.appendChild(kr);var Br=nn.scrollHeight;this.isAtBottom&&En<=Br-$n&&(nn.scrollTop=1e7)}},Zt.prototype.initTpl=function(){this.$container.html(this.c((0,rt.default)(sn||(sn=te([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `],[`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))},Zt}(pt.default);q.default=zt,G.exports=zt,G.exports.default=zt;var sn,Mn=function(){return(0,nt.default)("HH:MM:ss ")};function rn(){for(var on=new Error,Zt="",Ot=on.stack?on.stack.split(`
`):"",Qt=0,un=Ot.length;Qt<un;Qt++)if((Zt=Ot[Qt]).indexOf("winConsole")>-1&&Qt<un-1){Zt=Ot[Qt+1];break}return Zt}},1893:function(G,q,V){var he=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(q,"__esModule",{value:!0}),q.getObjType=void 0;var ce=he(V(3023));q.getObjType=function(te){return te.constructor&&te.constructor.name?te.constructor.name:(0,ce.default)({}.toString.call(te).replace(/(\[object )|]/g,""))}},1018:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Se,Pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ne){Re.__proto__=Ne}||function(Re,Ne){for(var ze in Ne)Object.prototype.hasOwnProperty.call(Ne,ze)&&(Re[ze]=Ne[ze])},he(Se,Pe)},function(Se,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function Re(){this.constructor=Se}he(Se,Pe),Se.prototype=Pe===null?Object.create(Pe):(Re.prototype=Pe.prototype,new Re)}),te=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(1512)),xe=V(2375),re=te(V(3783)),ge=te(V(6329)),ye=te(V(4193)),we=te(V(5852)),ke=function(Se){function Pe(Re,Ne,ze){var Be=Ne.compName,Ze=(ze===void 0?{}:ze).theme,Xe=Ze===void 0?"light":Ze,qe=Se.call(this)||this;return qe.subComponents=[],qe.compName=Be,qe.c=(0,xe.classPrefix)(Be),qe.options={},qe.container=Re,qe.$container=(0,j.default)(Re),qe.$container.addClass(["luna-".concat(Be),qe.c("platform-".concat((0,xe.getPlatform)()))]),qe.on("optionChange",function(Je,dt,Ct){var bt=qe.c;Je==="theme"&&(qe.$container.rmClass(bt("theme-".concat(Ct))).addClass(bt("theme-".concat(dt))),(0,re.default)(qe.subComponents,function(xt){return xt.setOption("theme",dt)}))}),qe.setOption("theme",Xe),qe}return ce(Pe,Se),Pe.prototype.destroy=function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat((0,xe.getPlatform)()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Pe.prototype.setOption=function(Re,Ne){var ze=this,Be=this.options,Ze={};typeof Re=="string"?Ze[Re]=Ne:Ze=Re,(0,re.default)(Ze,function(Xe,qe){var Je=Be[qe];Be[qe]=Xe,ze.emit("optionChange",qe,Xe,Je)})},Pe.prototype.getOption=function(Re){return this.options[Re]},Pe.prototype.addSubComponent=function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)},Pe.prototype.removeSubComponent=function(Re){(0,we.default)(this.subComponents,function(Ne){return Ne===Re})},Pe.prototype.destroySubComponents=function(){(0,re.default)(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]},Pe.prototype.initOptions=function(Re,Ne){Ne===void 0&&(Ne={}),(0,ye.default)(Re,Ne),(0,ge.default)(this.options,Re)},Pe.prototype.find=function(Re){return this.$container.find(this.c(Re))},Pe}(Ee.default);q.default=ke},2375:function(G,q,V){var he=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.resetCanvasSize=q.getPlatform=q.pxToNum=q.executeAfterTransition=q.hasVerticalScrollbar=q.measuredScrollbarWidth=q.eventPage=q.eventClient=q.drag=q.classPrefix=void 0;var ce=he(V(2461)),te=he(V(4331)),Ee=he(V(5610)),j=he(V(7483)),xe=he(V(3990)),re=he(V(6341)),ge=he(V(3875)),ye=he(V(6954)),we=he(V(9585));function ke(ze,Be){for(var Ze=0,Xe=ze.length;Ze<Xe;Ze++){var qe=ze[Ze];Be(qe),qe.content&&ke(qe.content,Be)}}q.classPrefix=function(ze){var Be="luna-".concat(ze,"-");function Ze(Xe){return(0,ce.default)((0,te.default)(Xe).split(/\s+/),function(qe){return(0,re.default)(qe,Be)?qe:qe.replace(/[\w-]+/,function(Je){return"".concat(Be).concat(Je)})}).join(" ")}return function(Xe){if(/<[^>]*>/g.test(Xe))try{var qe=j.default.parse(Xe);return ke(qe,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Ze(Je.attrs.class))}),j.default.stringify(qe)}catch{return Ze(Xe)}return Ze(Xe)}};var Se,Pe="ontouchstart"in Ee.default,Re={start:"touchstart",move:"touchmove",end:"touchend"},Ne={start:"mousedown",move:"mousemove",end:"mouseup"};q.drag=function(ze){return Pe?Re[ze]:Ne[ze]},q.eventClient=function(ze,Be){var Ze=ze==="x"?"clientX":"clientY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.eventPage=function(ze,Be){var Ze=ze==="x"?"pageX":"pageY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.measuredScrollbarWidth=function(){if((0,xe.default)(Se))return Se;if(!document)return 16;var ze=document.createElement("div"),Be=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Be.setAttribute("style","height: 200px"),ze.appendChild(Be),document.body.appendChild(ze),Se=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),Se},q.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},q.executeAfterTransition=function(ze,Be){if((0,we.default)(ze))return Be();var Ze=function(Xe){Xe.target===ze&&(ze.removeEventListener("transitionend",Ze),Be())};ze.addEventListener("transitionend",Ze)},q.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},q.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},q.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},3467:function(G,q,V){var he,ce=this&&this.__extends||(he=function(dt,Ct){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(bt,xt){bt.__proto__=xt}||function(bt,xt){for(var nt in xt)Object.prototype.hasOwnProperty.call(xt,nt)&&(bt[nt]=xt[nt])},he(dt,Ct)},function(dt,Ct){if(typeof Ct!="function"&&Ct!==null)throw new TypeError("Class extends value "+String(Ct)+" is not a constructor or null");function bt(){this.constructor=dt}he(dt,Ct),dt.prototype=Ct===null?Object.create(Ct):(bt.prototype=Ct.prototype,new bt)}),te=this&&this.__makeTemplateObject||function(dt,Ct){return Object.defineProperty?Object.defineProperty(dt,"raw",{value:Ct}):dt.raw=Ct,dt},Ee=this&&this.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(q,"__esModule",{value:!0});var j=Ee(V(1512)),xe=Ee(V(1907)),re=Ee(V(6959)),ge=Ee(V(3783)),ye=Ee(V(8901)),we=Ee(V(8613)),ke=Ee(V(3367)),Se=Ee(V(9833)),Pe=Ee(V(1286)),Re=Ee(V(242)),Ne=Ee(V(2439)),ze=Ee(V(4193)),Be=Ee(V(6930)),Ze=function(dt){function Ct(bt,xt){var nt=dt.call(this,bt,{compName:"data-grid"},xt)||this;nt.nodes=[],nt.columnWidthsInitialized=!1,nt.columnMap={},nt.isAscending=!0,nt.resizeSensor=new Re.default(bt),nt.onResize=(0,Ne.default)(function(){nt.updateHeight(),nt.updateWeights()},16),xt.height&&(xt.maxHeight=xt.height,xt.minHeight=xt.height),nt.initOptions(xt,{minHeight:41,maxHeight:1/0});var tt=nt.options,rt=tt.columns,ht=tt.minHeight,st=tt.maxHeight;return(0,ge.default)(rt,function(pt){(0,ze.default)(pt,{sortable:!1}),nt.columnMap[pt.id]=pt}),st<ht&&nt.setOption("maxHeight",ht),nt.initTpl(),nt.$headerRow=nt.find(".header").find("tr"),nt.$fillerRow=nt.find(".filler-row"),nt.fillerRow=nt.$fillerRow.get(0),nt.$tableBody=nt.find(".data").find("tbody"),nt.tableBody=nt.$tableBody.get(0),nt.$colgroup=nt.$container.find("colgroup"),nt.$dataContainer=nt.find(".data-container"),nt.renderHeader(),nt.updateWeights(),nt.updateHeight(),nt.bindEvent(),nt}return ce(Ct,dt),Ct.prototype.destroy=function(){dt.prototype.destroy.call(this),this.resizeSensor.destroy()},Ct.prototype.append=function(bt){var xt=new qe(this,bt);return this.nodes.push(xt),this.sortId?this.sortNodes(this.sortId,this.isAscending):(this.tableBody.insertBefore(xt.container,this.fillerRow),this.updateHeight()),xt},Ct.prototype.clear=function(){(0,ge.default)(this.nodes,function(bt){return bt.detach()}),this.nodes=[],this.updateHeight()},Ct.prototype.updateHeight=function(){var bt=this.$fillerRow,xt=this.options,nt=xt.maxHeight,tt=xt.minHeight;this.$dataContainer.css({height:"auto"}),(tt-=21)<0&&(tt=0),nt-=21;var rt=20*this.nodes.length;rt>tt?bt.hide():bt.show(),rt<tt?rt=tt:rt>=nt&&(rt=nt),this.$dataContainer.css({height:rt})},Ct.prototype.bindEvent=function(){var bt=this,xt=this.c,nt=this.$headerRow;this.resizeSensor.addListener(this.onResize);var tt=this;nt.on("click",xt(".sortable"),function(rt){rt.stopPropagation();var ht=(0,j.default)(this),st=ht.data("id"),pt=ht.data("order")!=="descending";ht.data("order",pt?"descending":"ascending"),tt.sortNodes(st,pt),nt.find("th").each(function(){var vt=(0,j.default)(this);vt.data("id")!==st&&vt.rmAttr("data-order")})}),this.on("optionChange",function(rt){switch(rt){case"minHeight":case"maxHeight":bt.updateHeight()}})},Ct.prototype.sortNodes=function(bt,xt){var nt=this.columnMap[bt].comparator||Je;this.nodes.sort(function(tt,rt){var ht=tt.data[bt],st=rt.data[bt];return(0,Se.default)(ht)&&(ht=ht.innerText),(0,Se.default)(st)&&(st=st.innerText),xt?nt(ht,st):nt(st,ht)}),this.renderData(),this.sortId=bt,this.isAscending=xt},Ct.prototype.updateWeights=function(){var bt=this.container,xt=this.$headerRow,nt=this.options.columns,tt=bt.offsetWidth;if(!this.columnWidthsInitialized&&tt){for(var rt=0,ht=nt.length;rt<ht;rt++){var st=nt[rt];if(!st.weight){var pt=xt.find("th").get(rt).offsetWidth;st.weight=100*pt/tt}}this.columnWidthsInitialized=!0}this.applyColumnWeights()},Ct.prototype.applyColumnWeights=function(){var bt=this.container,xt=this.$colgroup,nt=this.options.columns,tt=bt.offsetWidth;if(!(tt<=0)){for(var rt=0,ht=nt.length,st=0;st<ht;st++)rt+=nt[st].weight;var pt="",vt=0,ut=0;for(st=0;st<ht;st++){var Ut=(vt+=nt[st].weight)*tt/rt|0,at=Math.max(Ut-ut,14);ut=Ut,pt+='<col style="width:'.concat(at,'px"></col>')}xt.html(pt)}},Ct.prototype.renderData=function(){var bt=this,xt=bt.tableBody,nt=bt.nodes,tt=bt.fillerRow;(0,ge.default)(nt,function(rt){return rt.detach()}),(0,ge.default)(nt,function(rt){xt.insertBefore(rt.container,tt)}),this.updateHeight()},Ct.prototype.renderHeader=function(){var bt=this.c,xt="",nt="";(0,ge.default)(this.options.columns,function(tt){var rt=(0,ye.default)(tt.title);tt.sortable?xt+=bt('<th class="sortable" data-id="'.concat(tt.id,'">').concat(rt,"</th>")):xt+="<th>".concat(rt,"</th>"),nt+="<td></td>"}),this.$headerRow.html(xt),this.$fillerRow.html(nt)},Ct.prototype.initTpl=function(){this.$container.html(this.c((0,xe.default)(Xe||(Xe=te([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `],[`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <table class="data">
            <colgroup></colgroup>
            <tbody>
              <tr class="filler-row"></tr>
            </tbody>
          </table>
        </div>
      `])))))},Ct}(re.default);q.default=Ze;var Xe,qe=function(){function dt(Ct,bt){this.container=(0,we.default)("tr"),this.$container=(0,j.default)(this.container),this.dataGrid=Ct,this.data=bt,this.render()}return dt.prototype.detach=function(){this.$container.remove()},dt.prototype.render=function(){var Ct=this,bt=Ct.data,xt=Ct.$container,nt=Ct.container,tt=this.dataGrid.getOption("columns");xt.html(""),(0,ge.default)(tt,function(rt){var ht=(0,we.default)("td"),st=bt[rt.id];(0,Pe.default)(st)||((0,Se.default)(st)?ht.appendChild(st):ht.innerText=(0,ke.default)(st)),nt.appendChild(ht)})},dt}();function Je(dt,Ct){if(dt=(0,ke.default)(dt),Ct=(0,ke.default)(Ct),(0,Be.default)(dt,"_")&&!(0,Be.default)(Ct,"_"))return 1;if((0,Be.default)(Ct,"_")&&!(0,Be.default)(dt,"_"))return-1;for(var bt,xt,nt,tt,rt=/^\d+|^\D+/;;){if(!dt)return Ct?-1:0;if(!Ct)return 1;if(bt=dt.match(rt)[0],xt=Ct.match(rt)[0],nt=!isNaN(bt),tt=!isNaN(xt),nt&&!tt)return-1;if(tt&&!nt)return 1;if(nt&&tt){var ht=bt-xt;if(ht)return ht;if(bt.length!==xt.length)return+bt||+xt?xt.length-bt.length:bt.length-xt.length}else if(bt!==xt)return bt<xt?-1:1;dt=dt.substring(bt.length),Ct=Ct.substring(xt.length)}}G.exports=Ze,G.exports.default=Ze},6959:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Se,Pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ne){Re.__proto__=Ne}||function(Re,Ne){for(var ze in Ne)Object.prototype.hasOwnProperty.call(Ne,ze)&&(Re[ze]=Ne[ze])},he(Se,Pe)},function(Se,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function Re(){this.constructor=Se}he(Se,Pe),Se.prototype=Pe===null?Object.create(Pe):(Re.prototype=Pe.prototype,new Re)}),te=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(1512)),xe=V(3692),re=te(V(3783)),ge=te(V(6329)),ye=te(V(4193)),we=te(V(5852)),ke=function(Se){function Pe(Re,Ne,ze){var Be=Ne.compName,Ze=(ze===void 0?{}:ze).theme,Xe=Ze===void 0?"light":Ze,qe=Se.call(this)||this;return qe.subComponents=[],qe.compName=Be,qe.c=(0,xe.classPrefix)(Be),qe.options={},qe.container=Re,qe.$container=(0,j.default)(Re),qe.$container.addClass(["luna-".concat(Be),qe.c("platform-".concat((0,xe.getPlatform)()))]),qe.on("optionChange",function(Je,dt,Ct){var bt=qe.c;Je==="theme"&&(qe.$container.rmClass(bt("theme-".concat(Ct))).addClass(bt("theme-".concat(dt))),(0,re.default)(qe.subComponents,function(xt){return xt.setOption("theme",dt)}))}),qe.setOption("theme",Xe),qe}return ce(Pe,Se),Pe.prototype.destroy=function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat((0,xe.getPlatform)()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Pe.prototype.setOption=function(Re,Ne){var ze=this,Be=this.options,Ze={};typeof Re=="string"?Ze[Re]=Ne:Ze=Re,(0,re.default)(Ze,function(Xe,qe){var Je=Be[qe];Be[qe]=Xe,ze.emit("optionChange",qe,Xe,Je)})},Pe.prototype.getOption=function(Re){return this.options[Re]},Pe.prototype.addSubComponent=function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)},Pe.prototype.removeSubComponent=function(Re){(0,we.default)(this.subComponents,function(Ne){return Ne===Re})},Pe.prototype.destroySubComponents=function(){(0,re.default)(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]},Pe.prototype.initOptions=function(Re,Ne){Ne===void 0&&(Ne={}),(0,ye.default)(Re,Ne),(0,ge.default)(this.options,Re)},Pe.prototype.find=function(Re){return this.$container.find(this.c(Re))},Pe}(Ee.default);q.default=ke},3692:function(G,q,V){var he=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.resetCanvasSize=q.getPlatform=q.pxToNum=q.executeAfterTransition=q.hasVerticalScrollbar=q.measuredScrollbarWidth=q.eventPage=q.eventClient=q.drag=q.classPrefix=void 0;var ce=he(V(2461)),te=he(V(4331)),Ee=he(V(5610)),j=he(V(7483)),xe=he(V(3990)),re=he(V(6341)),ge=he(V(3875)),ye=he(V(6954)),we=he(V(9585));function ke(ze,Be){for(var Ze=0,Xe=ze.length;Ze<Xe;Ze++){var qe=ze[Ze];Be(qe),qe.content&&ke(qe.content,Be)}}q.classPrefix=function(ze){var Be="luna-".concat(ze,"-");function Ze(Xe){return(0,ce.default)((0,te.default)(Xe).split(/\s+/),function(qe){return(0,re.default)(qe,Be)?qe:qe.replace(/[\w-]+/,function(Je){return"".concat(Be).concat(Je)})}).join(" ")}return function(Xe){if(/<[^>]*>/g.test(Xe))try{var qe=j.default.parse(Xe);return ke(qe,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Ze(Je.attrs.class))}),j.default.stringify(qe)}catch{return Ze(Xe)}return Ze(Xe)}};var Se,Pe="ontouchstart"in Ee.default,Re={start:"touchstart",move:"touchmove",end:"touchend"},Ne={start:"mousedown",move:"mousemove",end:"mouseup"};q.drag=function(ze){return Pe?Re[ze]:Ne[ze]},q.eventClient=function(ze,Be){var Ze=ze==="x"?"clientX":"clientY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.eventPage=function(ze,Be){var Ze=ze==="x"?"pageX":"pageY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.measuredScrollbarWidth=function(){if((0,xe.default)(Se))return Se;if(!document)return 16;var ze=document.createElement("div"),Be=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Be.setAttribute("style","height: 200px"),ze.appendChild(Be),document.body.appendChild(ze),Se=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),Se},q.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},q.executeAfterTransition=function(ze,Be){if((0,we.default)(ze))return Be();var Ze=function(Xe){Xe.target===ze&&(ze.removeEventListener("transitionend",Ze),Be())};ze.addEventListener("transitionend",Ze)},q.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},q.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},q.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},3577:function(G,q){Object.defineProperty(q,"__esModule",{value:!0}),q.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},7715:function(G,q,V){var he,ce=this&&this.__extends||(he=function(tt,rt){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,st){ht.__proto__=st}||function(ht,st){for(var pt in st)Object.prototype.hasOwnProperty.call(st,pt)&&(ht[pt]=st[pt])},he(tt,rt)},function(tt,rt){if(typeof rt!="function"&&rt!==null)throw new TypeError("Class extends value "+String(rt)+" is not a constructor or null");function ht(){this.constructor=tt}he(tt,rt),tt.prototype=rt===null?Object.create(rt):(ht.prototype=rt.prototype,new ht)}),te=this&&this.__assign||function(){return te=Object.assign||function(tt){for(var rt,ht=1,st=arguments.length;ht<st;ht++)for(var pt in rt=arguments[ht])Object.prototype.hasOwnProperty.call(rt,pt)&&(tt[pt]=rt[pt]);return tt},te.apply(this,arguments)},Ee=this&&this.__values||function(tt){var rt=typeof Symbol=="function"&&Symbol.iterator,ht=rt&&tt[rt],st=0;if(ht)return ht.call(tt);if(tt&&typeof tt.length=="number")return{next:function(){return tt&&st>=tt.length&&(tt=void 0),{value:tt&&tt[st++],done:!tt}}};throw new TypeError(rt?"Object is not iterable.":"Symbol.iterator is not defined.")},j=this&&this.__importDefault||function(tt){return tt&&tt.__esModule?tt:{default:tt}};Object.defineProperty(q,"__esModule",{value:!0});var xe=j(V(1160)),re=V(7669),ge=V(2062),ye=j(V(242)),we=j(V(2439)),ke=j(V(3063)),Se=j(V(3783)),Pe=j(V(3009)),Re=j(V(5044)),Ne=j(V(4502)),ze=j(V(6329)),Be=j(V(7494)),Ze=j(V(6341)),Xe=j(V(3875)),qe=j(V(3577)),Je=j(V(6768)),dt=function(tt){function rt(ht,st){st===void 0&&(st={});var pt=tt.call(this,ht,{compName:"dom-highlighter"},st)||this;return pt.overlay=new re.HighlightOverlay(window),pt.reset=function(){var vt=document.documentElement.clientWidth,ut=document.documentElement.clientHeight;pt.overlay.reset({viewportSize:{width:vt,height:ut},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},pt.initOptions(st,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),pt.overlay.setContainer(ht),pt.overlay.setPlatform("mac"),pt.redraw=(0,we.default)(function(){pt.reset(),pt.draw()},16),pt.redraw(),pt.bindEvent(),pt}return ce(rt,tt),rt.prototype.highlight=function(ht,st){st&&(0,ze.default)(this.options,st),this.target=ht,ht instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new ye.default(ht),this.resizeSensor.addListener(this.redraw)),this.redraw()},rt.prototype.hide=function(){this.target=null,this.redraw()},rt.prototype.intercept=function(ht){this.interceptor=ht},rt.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),tt.prototype.destroy.call(this)},rt.prototype.draw=function(){var ht=this.target;ht&&(ht instanceof Text?this.drawText(ht):this.drawElement(ht))},rt.prototype.drawText=function(ht){var st=this.options,pt=document.createRange();pt.selectNode(ht);var vt=pt.getBoundingClientRect(),ut=vt.left,Ut=vt.top,at=vt.width,zt=vt.height;pt.detach();var sn={paths:[{path:this.rectToPath({left:ut,top:Ut,width:at,height:zt}),fillColor:xt(st.contentColor),name:"content"}],showExtensionLines:st.showExtensionLines,showRulers:st.showRulers};st.showInfo&&(sn.elementInfo={tagName:"#text",nodeWidth:at,nodeHeight:zt}),this.overlay.drawHighlight(sn)},rt.prototype.drawElement=function(ht){var st={paths:this.getPaths(ht),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(st.elementInfo=this.getElementInfo(ht)),this.interceptor){var pt=this.interceptor(st);pt&&(st=pt)}this.overlay.drawHighlight(st)},rt.prototype.getPaths=function(ht){var st=this.options,pt=window.getComputedStyle(ht),vt=ht.getBoundingClientRect(),ut=vt.left,Ut=vt.top,at=vt.width,zt=vt.height,sn=function(xn){return(0,ge.pxToNum)(pt.getPropertyValue(xn))},Mn=sn("margin-left"),rn=sn("margin-right"),on=sn("margin-top"),Zt=sn("margin-bottom"),Ot=sn("border-left-width"),Qt=sn("border-right-width"),un=sn("border-top-width"),yn=sn("border-bottom-width"),In=sn("padding-left"),It=sn("padding-right"),Rt=sn("padding-top"),nn=sn("padding-bottom");return[{path:this.rectToPath({left:ut+Ot+In,top:Ut+un+Rt,width:at-Ot-In-Qt-It,height:zt-un-Rt-yn-nn}),fillColor:xt(st.contentColor),name:"content"},{path:this.rectToPath({left:ut+Ot,top:Ut+un,width:at-Ot-Qt,height:zt-un-yn}),fillColor:xt(st.paddingColor),name:"padding"},{path:this.rectToPath({left:ut,top:Ut,width:at,height:zt}),fillColor:xt(st.borderColor),name:"border"},{path:this.rectToPath({left:ut-Mn,top:Ut-on,width:at+Mn+rn,height:zt+on+Zt}),fillColor:xt(st.marginColor),name:"margin"}]},rt.prototype.getElementInfo=function(ht){var st=ht.getBoundingClientRect(),pt=st.width,vt=st.height,ut=ht.getAttribute("class")||"";ut=ut.split(/\s+/).map(function(at){return"."+at}).join("");var Ut={tagName:(0,ke.default)(ht.tagName),className:ut,idValue:ht.id,nodeWidth:pt,nodeHeight:vt};return this.options.showStyles&&(Ut.style=this.getStyles(ht)),this.options.showAccessibilityInfo&&(0,ze.default)(Ut,this.getAccessibilityInfo(ht)),Ut},rt.prototype.getStyles=function(ht){for(var st=window.getComputedStyle(ht),pt=!1,vt=ht.childNodes,ut=0,Ut=vt.length;ut<Ut;ut++)vt[ut].nodeType===3&&(pt=!0);var at=[];return pt&&at.push("color","font-family","font-size","line-height"),at.push("padding","margin","background-color"),nt(st,at)},rt.prototype.getAccessibilityInfo=function(ht){var st=window.getComputedStyle(ht);return te({showAccessibilityInfo:!0,contrast:te({contrastAlgorithm:"aa",textOpacity:.1},nt(st,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(ht)},this.getAccessibleNameAndRole(ht))},rt.prototype.isFocusable=function(ht){var st=(0,ke.default)(ht.tagName);if((0,Ze.default)(["a","button","input","textarea","select","details"],st))return!0;var pt=ht.getAttribute("tabindex");return!!(pt&&(0,Xe.default)(pt)>-1)},rt.prototype.getAccessibleNameAndRole=function(ht){var st=ht.getAttribute("labelledby")||ht.getAttribute("aria-label"),pt=ht.getAttribute("role"),vt=(0,ke.default)(ht.tagName);return qe.default.forEach(function(ut){var Ut,at;if(!pt){var zt=ut[0],sn=ut[2];if(zt===vt){if(sn)try{for(var Mn=Ee(sn),rn=Mn.next();!rn.done;rn=Mn.next()){var on=rn.value;if(ht.getAttribute(on[0])!==on[1])return}}catch(Zt){Ut={error:Zt}}finally{try{rn&&!rn.done&&(at=Mn.return)&&at.call(Mn)}finally{if(Ut)throw Ut.error}}pt=ut[1]}}}),{accessibleName:st||ht.getAttribute("title")||"",accessibleRole:pt||"generic"}},rt.prototype.bindEvent=function(){var ht=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return ht.redraw()})},rt.prototype.rectToPath=function(ht){var st=ht.left,pt=ht.top,vt=ht.width,ut=ht.height,Ut=[];return Ut.push("M",st,pt),Ut.push("L",st+vt,pt),Ut.push("L",st+vt,pt+ut),Ut.push("L",st,pt+ut),Ut.push("Z"),Ut},rt}(xe.default);q.default=dt,G.exports=dt,G.exports.default=dt;var Ct=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,bt=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function xt(tt){return(0,Je.default)(tt)?tt:tt.a?"rgba(".concat(tt.r,", ").concat(tt.g,", ").concat(tt.b,", ").concat(tt.a,")"):"rgb(".concat(tt.r,", ").concat(tt.g,", ").concat(tt.b,")")}function nt(tt,rt,ht){ht===void 0&&(ht=!1);var st={};return(0,Se.default)(rt,function(pt){var vt,ut=tt[pt==="text-opacity"?"color":pt];ut&&(vt=ut,(Ct.test(vt)||bt.test(vt))&&(ut=function(Ut){var at=Pe.default.parse(Ut),zt=at.val[3]||1;return at.val=at.val.slice(0,3),at.val.push(Math.round(255*zt)),"#"+(0,Ne.default)(Re.default.encode(at.val))}(ut),pt==="text-opacity"&&(ut=ut.slice(7),ut=Re.default.decode(ut)[0]/255)),ht&&(pt=(0,Be.default)(pt)),st[pt]=ut)}),st}},9706:function(G,q){var V=this&&this.__read||function(Pe,Re){var Ne=typeof Symbol=="function"&&Pe[Symbol.iterator];if(!Ne)return Pe;var ze,Be,Ze=Ne.call(Pe),Xe=[];try{for(;(Re===void 0||Re-- >0)&&!(ze=Ze.next()).done;)Xe.push(ze.value)}catch(qe){Be={error:qe}}finally{try{ze&&!ze.done&&(Ne=Ze.return)&&Ne.call(Ze)}finally{if(Be)throw Be.error}}return Xe},he=this&&this.__values||function(Pe){var Re=typeof Symbol=="function"&&Symbol.iterator,Ne=Re&&Pe[Re],ze=0;if(Ne)return Ne.call(Pe);if(Pe&&typeof Pe.length=="number")return{next:function(){return Pe&&ze>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[ze++],done:!Pe}}};throw new TypeError(Re?"Object is not iterable.":"Symbol.iterator is not defined.")};function ce(Pe,Re){var Ne=Pe[3];return[(1-Ne)*Re[0]+Ne*Pe[0],(1-Ne)*Re[1]+Ne*Pe[1],(1-Ne)*Re[2]+Ne*Pe[2],Ne+Re[3]*(1-Ne)]}function te(Pe){var Re=V(Pe,3),Ne=Re[0],ze=Re[1],Be=Re[2];return .2126*(Ne<=.03928?Ne/12.92:Math.pow((Ne+.055)/1.055,2.4))+.7152*(ze<=.03928?ze/12.92:Math.pow((ze+.055)/1.055,2.4))+.0722*(Be<=.03928?Be/12.92:Math.pow((Be+.055)/1.055,2.4))}Object.defineProperty(q,"__esModule",{value:!0}),q.getContrastThreshold=q.isLargeFont=q.getAPCAThreshold=q.desiredLuminanceAPCA=q.contrastRatioByLuminanceAPCA=q.contrastRatioAPCA=q.luminanceAPCA=q.contrastRatio=q.luminance=q.rgbaToHsla=q.blendColors=void 0,q.blendColors=ce,q.rgbaToHsla=function(Pe){var Re=V(Pe,4),Ne=Re[0],ze=Re[1],Be=Re[2],Ze=Re[3],Xe=Math.max(Ne,ze,Be),qe=Math.min(Ne,ze,Be),Je=Xe-qe,dt=Xe+qe,Ct=.5*dt;return[qe===Xe?0:Ne===Xe?(.16666666666666666*(ze-Be)/Je+1)%1:ze===Xe?.16666666666666666*(Be-Ne)/Je+.3333333333333333:.16666666666666666*(Ne-ze)/Je+.6666666666666666,Ct===0||Ct===1?0:Ct<=.5?Je/dt:Je/(2-dt),Ct,Ze]},q.luminance=te,q.contrastRatio=function(Pe,Re){var Ne=te(ce(Pe,Re)),ze=te(Re);return(Math.max(Ne,ze)+.05)/(Math.min(Ne,ze)+.05)};var Ee=12.82051282051282,j=.06;function xe(Pe){var Re=V(Pe,3),Ne=Re[0],ze=Re[1],Be=Re[2];return .2126729*Math.pow(Ne,2.4)+.7151522*Math.pow(ze,2.4)+.072175*Math.pow(Be,2.4)}function re(Pe){return Pe>.03?Pe:Pe+Math.pow(.03-Pe,1.45)}function ge(Pe,Re){if(Pe=re(Pe),Re=re(Re),Math.abs(Pe-Re)<5e-4)return 0;var Ne=0;return 100*(Ne=Re>=Pe?(Ne=1.25*(Math.pow(Re,.55)-Math.pow(Pe,.58)))<.001?0:Ne<.078?Ne-Ne*Ee*j:Ne-j:(Ne=1.25*(Math.pow(Re,.62)-Math.pow(Pe,.57)))>-.001?0:Ne>-.078?Ne-Ne*Ee*j:Ne+j)}q.luminanceAPCA=xe,q.contrastRatioAPCA=function(Pe,Re){return ge(xe(Pe),xe(Re))},q.contrastRatioByLuminanceAPCA=ge,q.desiredLuminanceAPCA=function(Pe,Re,Ne){function ze(){return Ne?Math.pow(Math.abs(Math.pow(Pe,.62)-(-Re-j)/1.25),1.7543859649122808):Math.pow(Math.abs(Math.pow(Pe,.55)-(Re+j)/1.25),1.7241379310344829)}Pe=re(Pe),Re/=100;var Be=ze();return(Be<0||Be>1)&&(Ne=!Ne,Be=ze()),Be};var ye=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function we(Pe,Re){var Ne=72*parseFloat(Pe.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(Re)!==-1?Ne>=14:Ne>=18}ye.reverse(),q.getAPCAThreshold=function(Pe,Re){var Ne,ze,Be,Ze,Xe=parseFloat(Pe.replace("px","")),qe=parseFloat(Re);try{for(var Je=he(ye),dt=Je.next();!dt.done;dt=Je.next()){var Ct=V(dt.value),bt=Ct[0],xt=Ct.slice(1);if(Xe>=bt)try{for(var nt=(Be=void 0,he([900,800,700,600,500,400,300,200,100].entries())),tt=nt.next();!tt.done;tt=nt.next()){var rt=V(tt.value,2),ht=rt[0];if(qe>=rt[1]){var st=xt[xt.length-1-ht];return st===-1?null:st}}}catch(pt){Be={error:pt}}finally{try{tt&&!tt.done&&(Ze=nt.return)&&Ze.call(nt)}finally{if(Be)throw Be.error}}}}catch(pt){Ne={error:pt}}finally{try{dt&&!dt.done&&(ze=Je.return)&&ze.call(Je)}finally{if(Ne)throw Ne.error}}return null},q.isLargeFont=we;var ke={aa:3,aaa:4.5},Se={aa:4.5,aaa:7};q.getContrastThreshold=function(Pe,Re){return we(Pe,Re)?ke:Se}},9434:function(G,q){var V=this&&this.__values||function(re){var ge=typeof Symbol=="function"&&Symbol.iterator,ye=ge&&re[ge],we=0;if(ye)return ye.call(re);if(re&&typeof re.length=="number")return{next:function(){return re&&we>=re.length&&(re=void 0),{value:re&&re[we++],done:!re}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")},he=this&&this.__read||function(re,ge){var ye=typeof Symbol=="function"&&re[Symbol.iterator];if(!ye)return re;var we,ke,Se=ye.call(re),Pe=[];try{for(;(ge===void 0||ge-- >0)&&!(we=Se.next()).done;)Pe.push(we.value)}catch(Re){ke={error:Re}}finally{try{we&&!we.done&&(ye=Se.return)&&ye.call(Se)}finally{if(ke)throw ke.error}}return Pe},ce=this&&this.__spreadArray||function(re,ge,ye){if(ye||arguments.length===2)for(var we,ke=0,Se=ge.length;ke<Se;ke++)!we&&ke in ge||(we||(we=Array.prototype.slice.call(ge,0,ke)),we[ke]=ge[ke]);return re.concat(we||Array.prototype.slice.call(ge))};Object.defineProperty(q,"__esModule",{value:!0}),q.adoptStyleSheet=q.constrainNumber=q.ellipsify=q.createElement=q.createTextChild=q.createChild=q.log=q.Overlay=void 0;var te=function(){function re(ge,ye){ye===void 0&&(ye=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=ge,this._document=ge.document,Array.isArray(ye)||(ye=[ye]),this.style=ye}return re.prototype.setCanvas=function(ge){this.canvas=ge,this._context=ge.getContext("2d")},re.prototype.install=function(){var ge,ye;try{for(var we=V(this.style),ke=we.next();!ke.done;ke=we.next())xe(ke.value)}catch(Se){ge={error:Se}}finally{try{ke&&!ke.done&&(ye=we.return)&&ye.call(we)}finally{if(ge)throw ge.error}}this._installed=!0},re.prototype.uninstall=function(){var ge,ye,we=function(Pe){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(Re){return Re!==Pe})};try{for(var ke=V(this.style),Se=ke.next();!Se.done;Se=ke.next())we(Se.value)}catch(Pe){ge={error:Pe}}finally{try{Se&&!Se.done&&(ye=ke.return)&&ye.call(ke)}finally{if(ge)throw ge.error}}this._installed=!1},re.prototype.reset=function(ge){ge&&(this.viewportSize=ge.viewportSize,this.visualViewportSize=ge.visualViewportSize,this.deviceScaleFactor=ge.deviceScaleFactor,this.pageScaleFactor=ge.pageScaleFactor,this.pageZoomFactor=ge.pageZoomFactor,this.emulationScaleFactor=ge.emulationScaleFactor,this.scrollX=Math.round(ge.scrollX),this.scrollY=Math.round(ge.scrollY)),this.resetCanvas()},re.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},re.prototype.setPlatform=function(ge){this.platform=ge,this._installed||this.install()},re.prototype.dispatch=function(ge){this[ge.shift()].apply(this,ge)},re.prototype.eventHasCtrlOrMeta=function(ge){return this.platform==="mac"?ge.metaKey&&!ge.ctrlKey:ge.ctrlKey&&!ge.metaKey},Object.defineProperty(re.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),re}();function Ee(re,ge,ye){var we=j(ge,ye);return we.addEventListener("click",function(ke){ke.stopPropagation()},!1),re.appendChild(we),we}function j(re,ge){var ye=document.createElement(re);if(ge){var we=ge.split(/\s+/);we=we.map(function(ke){return"luna-dom-highlighter-"+ke}),ye.className=we.join(" ")}return ye}function xe(re){document.adoptedStyleSheets=ce(ce([],he(document.adoptedStyleSheets),!1),[re],!1)}q.Overlay=te,q.log=function(re){var ge=document.getElementById("log");ge||((ge=Ee(document.body,"div")).id="log"),Ee(ge,"div").textContent=re},q.createChild=Ee,q.createTextChild=function(re,ge){var ye=document.createTextNode(ge);return re.appendChild(ye),ye},q.createElement=j,q.ellipsify=function(re,ge){return re.length<=ge?String(re):re.substr(0,ge-1)+"\u2026"},q.constrainNumber=function(re,ge,ye){return re<ge?re=ge:re>ye&&(re=ye),re},q.adoptStyleSheet=xe},1521:function(G,q,V){var he=this&&this.__values||function(ke){var Se=typeof Symbol=="function"&&Symbol.iterator,Pe=Se&&ke[Se],Re=0;if(Pe)return Pe.call(ke);if(ke&&typeof ke.length=="number")return{next:function(){return ke&&Re>=ke.length&&(ke=void 0),{value:ke&&ke[Re++],done:!ke}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")},ce=this&&this.__read||function(ke,Se){var Pe=typeof Symbol=="function"&&ke[Symbol.iterator];if(!Pe)return ke;var Re,Ne,ze=Pe.call(ke),Be=[];try{for(;(Se===void 0||Se-- >0)&&!(Re=ze.next()).done;)Be.push(Re.value)}catch(Ze){Ne={error:Ze}}finally{try{Re&&!Re.done&&(Pe=ze.return)&&Pe.call(ze)}finally{if(Ne)throw Ne.error}}return Be},te=this&&this.__spreadArray||function(ke,Se,Pe){if(Pe||arguments.length===2)for(var Re,Ne=0,ze=Se.length;Ne<ze;Ne++)!Re&&Ne in Se||(Re||(Re=Array.prototype.slice.call(Se,0,Ne)),Re[Ne]=Se[Ne]);return ke.concat(Re||Array.prototype.slice.call(Se))};Object.defineProperty(q,"__esModule",{value:!0}),q.drawPath=q.formatColor=q.formatRgba=q.parseHexa=q.createPathForQuad=q.hatchFillPath=q.applyMatrixToPoint=q.emptyBounds=q.buildPath=q.fillPathWithBoxStyle=q.drawPathWithLineStyle=void 0;var Ee=V(9706);function j(ke,Se,Pe){var Re=0;function Ne(Ze){for(var Xe=[],qe=0;qe<Ze;++qe){var Je=Math.round(ke[Re++]*Pe);Se.maxX=Math.max(Se.maxX,Je),Se.minX=Math.min(Se.minX,Je);var dt=Math.round(ke[Re++]*Pe);Se.maxY=Math.max(Se.maxY,dt),Se.minY=Math.min(Se.minY,dt),Se.leftmostXForY[dt]=Math.min(Se.leftmostXForY[dt]||Number.MAX_VALUE,Je),Se.rightmostXForY[dt]=Math.max(Se.rightmostXForY[dt]||Number.MIN_VALUE,Je),Se.topmostYForX[Je]=Math.min(Se.topmostYForX[Je]||Number.MAX_VALUE,dt),Se.bottommostYForX[Je]=Math.max(Se.bottommostYForX[Je]||Number.MIN_VALUE,dt),Se.allPoints.push({x:Je,y:dt}),Xe.push(Je,dt)}return Xe}for(var ze=ke.length,Be=new Path2D;Re<ze;)switch(ke[Re++]){case"M":Be.moveTo.apply(Be,Ne(1));break;case"L":Be.lineTo.apply(Be,Ne(1));break;case"C":Be.bezierCurveTo.apply(Be,Ne(3));break;case"Q":Be.quadraticCurveTo.apply(Be,Ne(2));break;case"Z":Be.closePath()}return Be}q.drawPathWithLineStyle=function(ke,Se,Pe,Re){Re===void 0&&(Re=1),Pe&&Pe.color&&(ke.save(),ke.translate(.5,.5),ke.lineWidth=Re,Pe.pattern==="dashed"&&ke.setLineDash([3,3]),Pe.pattern==="dotted"&&ke.setLineDash([2,2]),ke.strokeStyle=Pe.color,ke.stroke(Se),ke.restore())},q.fillPathWithBoxStyle=function(ke,Se,Pe,Re,Ne){Ne&&(ke.save(),Ne.fillColor&&(ke.fillStyle=Ne.fillColor,ke.fill(Se)),Ne.hatchColor&&ge(ke,Se,Pe,10,Ne.hatchColor,Re,!1),ke.restore())},q.buildPath=j,q.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},q.applyMatrixToPoint=function(ke,Se){var Pe=new DOMPoint(ke.x,ke.y);return{x:(Pe=Pe.matrixTransform(Se)).x,y:Pe.y}};var xe,re="";function ge(ke,Se,Pe,Re,Ne,ze,Be){if((ke.canvas.width<Pe.maxX-Pe.minX||ke.canvas.height<Pe.maxY-Pe.minY)&&(Pe={minX:0,maxX:ke.canvas.width,minY:0,maxY:ke.canvas.height,allPoints:[]}),!xe||Ne!==re){re=Ne;var Ze=document.createElement("canvas");Ze.width=Re,Ze.height=8;var Xe=Ze.getContext("2d");Xe.clearRect(0,0,Ze.width,Ze.height),Xe.rect(0,0,1,5),Xe.fillStyle=Ne,Xe.fill(),xe=ke.createPattern(Ze,"repeat")}ke.save();var qe=new DOMMatrix;xe.setTransform(qe.scale(Be?-1:1,1).rotate(0,0,-45+ze)),ke.fillStyle=xe,ke.fill(Se),ke.restore()}function ye(ke){return(ke.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(Se){return parseInt(Se,16)/255})}function we(ke,Se){if(Se==="rgb"){var Pe=ce(ke,4),Re=Pe[0],Ne=Pe[1],ze=Pe[2],Be=Pe[3];return"rgb(".concat((255*Re).toFixed()," ").concat((255*Ne).toFixed()," ").concat((255*ze).toFixed()).concat(Be===1?"":" / "+Math.round(100*Be)/100,")")}if(Se==="hsl"){var Ze=ce((0,Ee.rgbaToHsla)(ke),4),Xe=Ze[0],qe=Ze[1],Je=Ze[2];return Be=Ze[3],"hsl(".concat(Math.round(360*Xe),"deg ").concat(Math.round(100*qe)," ").concat(Math.round(100*Je)).concat(Be===1?"":" / "+Math.round(100*Be)/100,")")}throw new Error("NOT_REACHED")}q.hatchFillPath=ge,q.createPathForQuad=function(ke,Se,Pe,Re){var Ne,ze,Be=["M",ke.p1.x,ke.p1.y,"L",ke.p2.x,ke.p2.y,"L",ke.p3.x,ke.p3.y,"L",ke.p4.x,ke.p4.y];try{for(var Ze=he(Se),Xe=Ze.next();!Xe.done;Xe=Ze.next()){var qe=Xe.value;Be=te(te([],ce(Be),!1),["L",qe.p4.x,qe.p4.y,"L",qe.p3.x,qe.p3.y,"L",qe.p2.x,qe.p2.y,"L",qe.p1.x,qe.p1.y,"L",qe.p4.x,qe.p4.y,"L",ke.p4.x,ke.p4.y],!1)}}catch(Je){Ne={error:Je}}finally{try{Xe&&!Xe.done&&(ze=Ze.return)&&ze.call(Ze)}finally{if(Ne)throw Ne.error}}return Be.push("Z"),j(Be,Pe,Re)},q.parseHexa=ye,q.formatRgba=we,q.formatColor=function(ke,Se){return Se==="rgb"||Se==="hsl"?we(ye(ke),Se):ke.endsWith("FF")?ke.substr(0,7):ke},q.drawPath=function(ke,Se,Pe,Re,Ne,ze,Be){ke.save();var Ze=j(Se,ze,Be);return Pe&&(ke.fillStyle=Pe,ke.fill(Ze)),Re&&(Ne==="dashed"&&ke.setLineDash([3,3]),Ne==="dotted"&&ke.setLineDash([2,2]),ke.lineWidth=2,ke.strokeStyle=Re,ke.stroke(Ze)),ke.restore(),Ze}},7669:function(G,q,V){var he,ce=this&&this.__extends||(he=function(ke,Se){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pe,Re){Pe.__proto__=Re}||function(Pe,Re){for(var Ne in Re)Object.prototype.hasOwnProperty.call(Re,Ne)&&(Pe[Ne]=Re[Ne])},he(ke,Se)},function(ke,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function Pe(){this.constructor=ke}he(ke,Se),ke.prototype=Se===null?Object.create(Se):(Pe.prototype=Se.prototype,new Pe)});Object.defineProperty(q,"__esModule",{value:!0}),q.HighlightOverlay=void 0;var te=V(9706),Ee=V(9434),j=V(1521),xe=function(ke){function Se(){var Pe=ke!==null&&ke.apply(this,arguments)||this;return Pe.gridLabelState={gridLayerCounter:0},Pe}return ce(Se,ke),Se.prototype.setContainer=function(Pe){this._container=Pe},Se.prototype.setPlatform=function(Pe){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+Pe),ke.prototype.setPlatform.call(this,Pe)},Object.defineProperty(Se.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Se.prototype.reset=function(Pe){ke.prototype.reset.call(this,Pe),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},Se.prototype.install=function(){var Pe=this.document.createElement("canvas");Pe.classList.add("luna-dom-highlighter-fill"),this.container.append(Pe);var Re=this.document.createElement("div");this.container.append(Re),this.tooltip=Re,this.setCanvas(Pe),ke.prototype.install.call(this)},Se.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",ke.prototype.uninstall.call(this)},Se.prototype.drawHighlight=function(Pe){this.context.save();for(var Re=(0,j.emptyBounds)(),Ne=Pe.paths.slice();Ne.length;){var ze=Ne.pop();ze&&(this.context.save(),(0,j.drawPath)(this.context,ze.path,ze.fillColor,ze.outlineColor,void 0,Re,this.emulationScaleFactor),Ne.length&&(this.context.globalCompositeOperation="destination-out",(0,j.drawPath)(this.context,Ne[Ne.length-1].path,"red",void 0,void 0,Re,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var Be=Boolean(Pe.paths.length&&Pe.showRulers&&Re.minX<20&&Re.maxX+20<this.canvasWidth),Ze=Boolean(Pe.paths.length&&Pe.showRulers&&Re.minY<20&&Re.maxY+20<this.canvasHeight);return Pe.showRulers&&this.drawAxis(this.context,Be,Ze),Pe.paths.length&&(Pe.showExtensionLines&&function(Xe,qe,Je,dt,Ct,bt,xt,nt){Xe.save();var tt=xt,rt=nt;if(Xe.strokeStyle=Ct||we,Xe.lineWidth=1,Xe.translate(.5,.5),bt&&Xe.setLineDash([3,3]),Je)for(var ht in qe.rightmostXForY)Xe.beginPath(),Xe.moveTo(tt,Number(ht)),Xe.lineTo(qe.rightmostXForY[ht],Number(ht)),Xe.stroke();else for(var ht in qe.leftmostXForY)Xe.beginPath(),Xe.moveTo(0,Number(ht)),Xe.lineTo(qe.leftmostXForY[ht],Number(ht)),Xe.stroke();if(dt)for(var st in qe.bottommostYForX)Xe.beginPath(),Xe.moveTo(Number(st),rt),Xe.lineTo(Number(st),qe.topmostYForX[st]),Xe.stroke();else for(var st in qe.topmostYForX)Xe.beginPath(),Xe.moveTo(Number(st),0),Xe.lineTo(Number(st),qe.topmostYForX[st]),Xe.stroke();Xe.restore()}(this.context,Re,Be,Ze,void 0,!1,this.canvasWidth,this.canvasHeight),Pe.elementInfo&&function(Xe,qe,Je,dt,Ct,bt){Xe.innerHTML="";var xt=(0,Ee.createChild)(Xe,"div"),nt=(0,Ee.createChild)(xt,"div","tooltip-content"),tt=function(yn,In){var It=(0,Ee.createElement)("div","element-info"),Rt=(0,Ee.createChild)(It,"div","element-info-header"),nn=function(Vr){return Vr.layoutObjectName&&Vr.layoutObjectName.endsWith("Grid")?"grid":Vr.layoutObjectName&&Vr.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(yn);nn&&(0,Ee.createChild)(Rt,"div","element-layout-type ".concat(nn));var xn=(0,Ee.createChild)(Rt,"div","element-description");(0,Ee.createChild)(xn,"span","material-tag-name").textContent=yn.tagName;var En=(0,Ee.createChild)(xn,"span","material-node-id"),$n=80;En.textContent=yn.idValue?"#"+(0,Ee.ellipsify)(yn.idValue,$n):"",En.classList.toggle("hidden",!yn.idValue);var zn=(0,Ee.createChild)(xn,"span","material-class-name");En.textContent.length<$n&&(zn.textContent=(0,Ee.ellipsify)(yn.className||"",$n-En.textContent.length)),zn.classList.toggle("hidden",!yn.className);var vn=(0,Ee.createChild)(Rt,"div","dimensions");(0,Ee.createChild)(vn,"span","material-node-width").textContent=String(Math.round(100*yn.nodeWidth)/100),(0,Ee.createTextChild)(vn,"\xD7"),(0,Ee.createChild)(vn,"span","material-node-height").textContent=String(Math.round(100*yn.nodeHeight)/100);var wn,Sn=yn.style||{};yn.isLockedAncestor&&xr("Showing content-visibility ancestor",""),yn.isLocked&&xr("Descendants are skipped due to content-visibility","");var Jn=Sn.color;Jn&&Jn!=="#00000000"&&Lr("Color",Jn,In);var tr=Sn["font-family"],pr=Sn["font-size"];tr&&pr!=="0px"&&xr("Font","".concat(pr," ").concat(tr));var Xn=Sn["background-color"];Xn&&Xn!=="#00000000"&&Lr("Background",Xn,In);var Gn=Sn.margin;Gn&&Gn!=="0px"&&xr("Margin",Gn);var cn=Sn.padding;cn&&cn!=="0px"&&xr("Padding",cn);var gn=yn.contrast?yn.contrast.backgroundColor:null,On=Jn&&Jn!=="#00000000"&&gn&&gn!=="#00000000";yn.showAccessibilityInfo&&(_r("Accessibility"),On&&Sn.color&&yn.contrast&&Br(Sn.color,yn.contrast),xr("Name",yn.accessibleName),xr("Role",yn.accessibleRole),Dr("Keyboard-focusable",yn.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function Kn(){wn||(wn=(0,Ee.createChild)(It,"div","element-info-body"))}function _r(Vr){Kn();var jr=(0,Ee.createChild)(wn,"div","element-info-row element-info-section");(0,Ee.createChild)(jr,"div","section-name").textContent=Vr,(0,Ee.createChild)((0,Ee.createChild)(jr,"div","separator-container"),"div","separator")}function kr(Vr,jr,Oi){Kn();var Di=(0,Ee.createChild)(wn,"div","element-info-row");return jr&&Di.classList.add(jr),(0,Ee.createChild)(Di,"div","element-info-name").textContent=Vr,(0,Ee.createChild)(Di,"div","element-info-gap"),(0,Ee.createChild)(Di,"div",Oi||"")}function Dr(Vr,jr){(0,Ee.createChild)(kr(Vr,"","element-info-value-icon"),"div",jr)}function xr(Vr,jr){(0,Ee.createTextChild)(kr(Vr,"","element-info-value-text"),jr)}function Lr(Vr,jr,Oi){var Di=kr(Vr,"","element-info-value-color"),Ti=(0,Ee.createChild)(Di,"div","color-swatch");(0,Ee.createChild)(Ti,"div","color-swatch-inner").style.backgroundColor=jr,(0,Ee.createTextChild)(Di,(0,j.formatColor)(jr,Oi))}function Br(Vr,jr){var Oi=(0,j.parseHexa)(Vr),Di=(0,j.parseHexa)(jr.backgroundColor);Oi[3]*=jr.textOpacity;var Ti=kr("Contrast","","element-info-value-contrast"),Sr=(0,Ee.createChild)(Ti,"div","contrast-text");Sr.style.color=(0,j.formatRgba)(Oi,"rgb"),Sr.style.backgroundColor=jr.backgroundColor,Sr.textContent="Aa";var Fo=(0,Ee.createChild)(Ti,"span");if(jr.contrastAlgorithm==="apca"){var Ea=(0,te.contrastRatioAPCA)(Oi,Di),vi=(0,te.getAPCAThreshold)(jr.fontSize,jr.fontWeight);Fo.textContent=String(Math.floor(100*Ea)/100)+"%",(0,Ee.createChild)(Ti,"div",vi===null||Math.abs(Ea)<vi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(jr.contrastAlgorithm==="aa"||jr.contrastAlgorithm==="aaa"){var sa=(0,te.contrastRatio)(Oi,Di);vi=(0,te.getContrastThreshold)(jr.fontSize,jr.fontWeight)[jr.contrastAlgorithm],Fo.textContent=String(Math.floor(100*sa)/100),(0,Ee.createChild)(Ti,"div",sa<vi?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return It}(qe,Je);nt.appendChild(tt);var rt,ht=nt.offsetWidth,st=nt.offsetHeight,pt=8,vt=2,ut=2*pt,Ut=pt+2,at=vt+Ut,zt=Ct-vt-Ut-ut;if(dt.maxX-dt.minX<ut+2*Ut)rt=.5*(dt.minX+dt.maxX)-pt;else{var sn=dt.minX+Ut,Mn=dt.maxX-Ut-ut;rt=sn>at&&sn<zt?sn:(0,Ee.constrainNumber)(at,sn,Mn)}var rn=rt<at||rt>zt,on=rt-Ut;on=(0,Ee.constrainNumber)(on,vt,Ct-ht-vt);var Zt=dt.minY-pt-st,Ot=!0;Zt<0?(Zt=Math.min(bt-st,dt.maxY+pt),Ot=!1):dt.minY>bt&&(Zt=bt-pt-st);var Qt=on>=dt.minX&&on+ht<=dt.maxX&&Zt>=dt.minY&&Zt+st<=dt.maxY;if(on<dt.maxX&&on+ht>dt.minX&&Zt<dt.maxY&&Zt+st>dt.minY&&!Qt)return void(nt.style.display="none");if(nt.style.top=Zt+"px",nt.style.left=on+"px",!rn){var un=(0,Ee.createChild)(nt,"div","tooltip-arrow");un.style.clipPath=Ot?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",un.style.top=(Ot?st-1:-pt)+"px",un.style.left=rt-on+"px"}}(this.tooltip,Pe.elementInfo,Pe.colorFormat,Re,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:Re}},Se.prototype.drawAxis=function(Pe,Re,Ne){Pe.save();var ze=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,Be=this.scrollX*this.pageScaleFactor,Ze=this.scrollY*this.pageScaleFactor;function Xe(ht){return Math.round(ht*ze)}function qe(ht){return Math.round(ht/ze)}var Je=this.canvasWidth/ze,dt=this.canvasHeight/ze,Ct=50;Pe.save(),Pe.fillStyle=ye,Ne?Pe.fillRect(0,Xe(dt)-15,Xe(Je),Xe(dt)):Pe.fillRect(0,0,Xe(Je),15),Pe.globalCompositeOperation="destination-out",Pe.fillStyle="red",Re?Pe.fillRect(Xe(Je)-15,0,Xe(Je),Xe(dt)):Pe.fillRect(0,0,15,Xe(dt)),Pe.restore(),Pe.fillStyle=ye,Re?Pe.fillRect(Xe(Je)-15,0,Xe(Je),Xe(dt)):Pe.fillRect(0,0,15,Xe(dt)),Pe.lineWidth=1,Pe.strokeStyle=ge,Pe.fillStyle=ge,Pe.save(),Pe.translate(-Be,.5-Ze);for(var bt=dt+qe(Ze),xt=100;xt<bt;xt+=100)Pe.save(),Pe.translate(Be,Xe(xt)),Pe.rotate(-Math.PI/2),Pe.fillText(String(xt),2,Re?Xe(Je)-7:13),Pe.restore();Pe.translate(.5,-.5);for(var nt=Je+qe(Be),tt=100;tt<nt;tt+=100)Pe.save(),Pe.fillText(String(tt),Xe(tt)+2,Ne?Ze+Xe(dt)-7:Ze+13),Pe.restore();for(Pe.restore(),Pe.save(),Re&&(Pe.translate(Xe(Je),0),Pe.scale(-1,1)),Pe.translate(-Be,.5-Ze),bt=dt+qe(Ze),xt=Ct;xt<bt;xt+=Ct){Pe.beginPath(),Pe.moveTo(Be,Xe(xt));var rt=xt%100?5:8;Pe.lineTo(Be+rt,Xe(xt)),Pe.stroke()}for(Pe.strokeStyle=re,xt=5;xt<bt;xt+=5)xt%Ct&&(Pe.beginPath(),Pe.moveTo(Be,Xe(xt)),Pe.lineTo(Be+5,Xe(xt)),Pe.stroke());for(Pe.restore(),Pe.save(),Ne&&(Pe.translate(0,Xe(dt)),Pe.scale(1,-1)),Pe.translate(.5-Be,-Ze),nt=Je+qe(Be),tt=Ct;tt<nt;tt+=Ct)Pe.beginPath(),Pe.moveTo(Xe(tt),Ze),rt=tt%100?5:8,Pe.lineTo(Xe(tt),Ze+rt),Pe.stroke();for(Pe.strokeStyle=re,tt=5;tt<nt;tt+=5)tt%Ct&&(Pe.beginPath(),Pe.moveTo(Xe(tt),Ze),Pe.lineTo(Xe(tt),Ze+5),Pe.stroke());Pe.restore(),Pe.restore()},Se}(Ee.Overlay);q.HighlightOverlay=xe;var re="rgba(0,0,0,0.2)",ge="rgba(0,0,0,0.7)",ye="rgba(255, 255, 255, 0.8)",we="rgba(128, 128, 128, 0.3)"},1160:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Se,Pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ne){Re.__proto__=Ne}||function(Re,Ne){for(var ze in Ne)Object.prototype.hasOwnProperty.call(Ne,ze)&&(Re[ze]=Ne[ze])},he(Se,Pe)},function(Se,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function Re(){this.constructor=Se}he(Se,Pe),Se.prototype=Pe===null?Object.create(Pe):(Re.prototype=Pe.prototype,new Re)}),te=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(1512)),xe=V(2062),re=te(V(3783)),ge=te(V(6329)),ye=te(V(4193)),we=te(V(5852)),ke=function(Se){function Pe(Re,Ne,ze){var Be=Ne.compName,Ze=(ze===void 0?{}:ze).theme,Xe=Ze===void 0?"light":Ze,qe=Se.call(this)||this;return qe.subComponents=[],qe.compName=Be,qe.c=(0,xe.classPrefix)(Be),qe.options={},qe.container=Re,qe.$container=(0,j.default)(Re),qe.$container.addClass(["luna-".concat(Be),qe.c("platform-".concat((0,xe.getPlatform)()))]),qe.on("optionChange",function(Je,dt,Ct){var bt=qe.c;Je==="theme"&&(qe.$container.rmClass(bt("theme-".concat(Ct))).addClass(bt("theme-".concat(dt))),(0,re.default)(qe.subComponents,function(xt){return xt.setOption("theme",dt)}))}),qe.setOption("theme",Xe),qe}return ce(Pe,Se),Pe.prototype.destroy=function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat((0,xe.getPlatform)()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Pe.prototype.setOption=function(Re,Ne){var ze=this,Be=this.options,Ze={};typeof Re=="string"?Ze[Re]=Ne:Ze=Re,(0,re.default)(Ze,function(Xe,qe){var Je=Be[qe];Be[qe]=Xe,ze.emit("optionChange",qe,Xe,Je)})},Pe.prototype.getOption=function(Re){return this.options[Re]},Pe.prototype.addSubComponent=function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)},Pe.prototype.removeSubComponent=function(Re){(0,we.default)(this.subComponents,function(Ne){return Ne===Re})},Pe.prototype.destroySubComponents=function(){(0,re.default)(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]},Pe.prototype.initOptions=function(Re,Ne){Ne===void 0&&(Ne={}),(0,ye.default)(Re,Ne),(0,ge.default)(this.options,Re)},Pe.prototype.find=function(Re){return this.$container.find(this.c(Re))},Pe}(Ee.default);q.default=ke},2062:function(G,q,V){var he=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.resetCanvasSize=q.getPlatform=q.pxToNum=q.executeAfterTransition=q.hasVerticalScrollbar=q.measuredScrollbarWidth=q.eventPage=q.eventClient=q.drag=q.classPrefix=void 0;var ce=he(V(2461)),te=he(V(4331)),Ee=he(V(5610)),j=he(V(7483)),xe=he(V(3990)),re=he(V(6341)),ge=he(V(3875)),ye=he(V(6954)),we=he(V(9585));function ke(ze,Be){for(var Ze=0,Xe=ze.length;Ze<Xe;Ze++){var qe=ze[Ze];Be(qe),qe.content&&ke(qe.content,Be)}}q.classPrefix=function(ze){var Be="luna-".concat(ze,"-");function Ze(Xe){return(0,ce.default)((0,te.default)(Xe).split(/\s+/),function(qe){return(0,re.default)(qe,Be)?qe:qe.replace(/[\w-]+/,function(Je){return"".concat(Be).concat(Je)})}).join(" ")}return function(Xe){if(/<[^>]*>/g.test(Xe))try{var qe=j.default.parse(Xe);return ke(qe,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Ze(Je.attrs.class))}),j.default.stringify(qe)}catch{return Ze(Xe)}return Ze(Xe)}};var Se,Pe="ontouchstart"in Ee.default,Re={start:"touchstart",move:"touchmove",end:"touchend"},Ne={start:"mousedown",move:"mousemove",end:"mouseup"};q.drag=function(ze){return Pe?Re[ze]:Ne[ze]},q.eventClient=function(ze,Be){var Ze=ze==="x"?"clientX":"clientY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.eventPage=function(ze,Be){var Ze=ze==="x"?"pageX":"pageY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.measuredScrollbarWidth=function(){if((0,xe.default)(Se))return Se;if(!document)return 16;var ze=document.createElement("div"),Be=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Be.setAttribute("style","height: 200px"),ze.appendChild(Be),document.body.appendChild(ze),Se=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),Se},q.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},q.executeAfterTransition=function(ze,Be){if((0,we.default)(ze))return Be();var Ze=function(Xe){Xe.target===ze&&(ze.removeEventListener("transitionend",Ze),Be())};ze.addEventListener("transitionend",Ze)},q.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},q.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},q.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},8719:function(G,q,V){var he,ce=this&&this.__extends||(he=function(xt,nt){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,rt){tt.__proto__=rt}||function(tt,rt){for(var ht in rt)Object.prototype.hasOwnProperty.call(rt,ht)&&(tt[ht]=rt[ht])},he(xt,nt)},function(xt,nt){if(typeof nt!="function"&&nt!==null)throw new TypeError("Class extends value "+String(nt)+" is not a constructor or null");function tt(){this.constructor=xt}he(xt,nt),xt.prototype=nt===null?Object.create(nt):(tt.prototype=nt.prototype,new tt)}),te=this&&this.__makeTemplateObject||function(xt,nt){return Object.defineProperty?Object.defineProperty(xt,"raw",{value:nt}):xt.raw=nt,xt},Ee=this&&this.__assign||function(){return Ee=Object.assign||function(xt){for(var nt,tt=1,rt=arguments.length;tt<rt;tt++)for(var ht in nt=arguments[tt])Object.prototype.hasOwnProperty.call(nt,ht)&&(xt[ht]=nt[ht]);return xt},Ee.apply(this,arguments)},j=this&&this.__importDefault||function(xt){return xt&&xt.__esModule?xt:{default:xt}};Object.defineProperty(q,"__esModule",{value:!0});var xe,re=j(V(6370)),ge=j(V(3783)),ye=j(V(1512)),we=j(V(8613)),ke=j(V(2461)),Se=j(V(5972)),Pe=j(V(1907)),Re=j(V(1352)),Ne=j(V(2289)),ze=j(V(6341)),Be=j(V(3651)),Ze=j(V(7756)),Xe=j(V(8901)),qe=j(V(4331)),Je={comment:"",string:"",number:"",keyword:"",operator:""},dt=function(xt){function nt(tt,rt){rt===void 0&&(rt={});var ht=xt.call(this,tt,{compName:"dom-viewer"},rt)||this;return ht.isExpanded=!1,ht.isChildNodesRendered=!1,ht.select=function(){var st=ht.c;(0,ye.default)(ht.options.rootContainer).find(st(".selected")).rmClass(st("selected")),ht.$tag.addClass(st("selected"))},ht.toggle=function(){ht.isExpanded?ht.collapse():ht.expand()},ht.initOptions(rt,{node:document.documentElement,parent:null,isEndTag:!1,rootContainer:tt,ignore:function(){return!1}}),ht.initTpl(),ht.bindEvent(),ht.options.isEndTag||ht.initObserver(),ht}return ce(nt,xt),nt.prototype.expand=function(){if(this.isExpandable()){this.isExpanded=!0;var tt=this.$tag,rt=this.c,ht=this.options.node;tt.html(this.renderHtmlTag(Ee(Ee({},Ct(ht)),{hasTail:!1,hasToggleButton:!0}))),tt.addClass(rt("expanded")),this.$children.rmClass(rt("hidden")),this.renderChildNodes(ht)}},nt.prototype.collapse=function(){if(this.isExpandable()){this.isExpanded=!1;var tt=this.$tag,rt=this.c,ht=this.options.node;this.$children.addClass(rt("hidden")),this.$tag.html(this.renderHtmlTag(Ee(Ee({},Ct(ht)),{hasTail:!0,hasToggleButton:!0}))),tt.rmClass(rt("expanded"))}},nt.prototype.destroy=function(){this.observer&&this.observer.disconnect(),xt.prototype.destroy.call(this)},nt.prototype.initObserver=function(){var tt=this;this.observer=new Ne.default(function(rt){(0,ge.default)(rt,function(ht){return tt.handleMutation(ht)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})},nt.prototype.handleMutation=function(tt){var rt=this.$tag,ht=this.c,st=this.options.node;(0,ze.default)(["attributes","childList"],tt.type)?(tt.type==="childList"&&(this.isChildNodesRendered=!1),this.isExpandable()?this.isExpanded?this.expand():this.collapse():(this.$children.addClass(ht("hidden")),rt.html(this.renderHtmlTag(Ee(Ee({},Ct(st)),{hasTail:!1}))))):tt.type==="characterData"&&(st.nodeType===Node.TEXT_NODE?rt.html(this.renderTextNode(st)):st.nodeType===Node.COMMENT_NODE&&rt.html(this.renderHtmlComment(st.nodeValue)))},nt.prototype.bindEvent=function(){var tt=this,rt=this.c,ht=this.$tag;this.options.node.nodeType===Node.ELEMENT_NODE&&ht.on("click",rt(".toggle"),function(st){st.stopPropagation(),tt.toggle()}),ht.on("click",this.select)},nt.prototype.isExpandable=function(){var tt=this.options.node;return tt.nodeType===Node.ELEMENT_NODE&&this.getChildNodes(tt).length>0},nt.prototype.getChildNodes=function(tt){var rt=this.options,ht=rt.rootContainer,st=rt.ignore,pt=(0,Re.default)(tt.childNodes);return pt=(0,Se.default)(pt,function(vt){if(vt.nodeType===Node.TEXT_NODE||vt.nodeType===Node.COMMENT_NODE){var ut=vt.nodeValue;if((0,qe.default)(ut)==="")return!1}return vt!==ht&&!st(vt)})},nt.prototype.initTpl=function(){var tt=this.container,rt=this.c,ht=this.options,st=ht.node,pt=ht.isEndTag,vt=(0,ye.default)((0,we.default)("li"));if(vt.addClass(rt("tree-item")),this.$tag=vt,pt)vt.html(rt('<span class="html-tag" style="margin-left: -12px;">&lt;<span class="tag-name">/'.concat(st.tagName.toLocaleLowerCase(),'</span>&gt;</span><span class="selection"></span>')));else if(st.nodeType===Node.ELEMENT_NODE){var ut=this.isExpandable(),Ut=Ee(Ee({},Ct(st)),{hasTail:ut,hasToggleButton:ut});vt.html(this.renderHtmlTag(Ut))}else if(st.nodeType===Node.TEXT_NODE)vt.html(this.renderTextNode(st));else{if(st.nodeType!==Node.COMMENT_NODE)return;var at=st.nodeValue;if(at.trim()==="")return;vt.html(this.renderHtmlComment(at))}if(tt.appendChild(vt.get(0)),st.nodeType===st.ELEMENT_NODE){var zt=(0,ye.default)((0,we.default)("ul"));zt.addClass([rt("children"),rt("hidden")]),tt.appendChild(zt.get(0)),this.$children=zt}},nt.prototype.renderChildNodes=function(tt){var rt=this;if(!this.isChildNodesRendered){this.isChildNodesRendered=!0,this.destroySubComponents();var ht=this.options,st=ht.rootContainer,pt=ht.ignore,vt=this.$children.get(0),ut=this.getChildNodes(tt);(0,ge.default)(ut,function(Ut){rt.addSubComponent(new nt(vt,{node:Ut,parent:rt,rootContainer:st,ignore:pt}))}),tt&&this.addSubComponent(new nt(vt,{node:tt,parent:this,isEndTag:!0,rootContainer:st,ignore:pt}))}},nt.prototype.renderHtmlTag=function(tt){var rt=(0,ke.default)(tt.attributes,function(pt){var vt=pt.name,ut=pt.value,Ut=pt.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat((0,Xe.default)(vt),"</span>").concat(ut?'="<span class="attribute-value'.concat(Ut?" attribute-underline":"",'">').concat((0,Xe.default)(ut),'</span>"'):"","</span>")}),ht="";tt.hasTail?ht="".concat(tt.hasTail?"\u2026":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(tt.tagName,"</span>&gt;</span>"):this.isExpandable()||(ht='<span class="html-tag">&lt;<span class="tag-name">/'.concat(tt.tagName,"</span>&gt;</span>"));var st="";return tt.hasToggleButton&&(st='<div class="toggle "><span class="icon icon-arrow-right"></span><span class="icon icon-arrow-down"></span></div>'),this.c((0,Pe.default)(xe||(xe=te([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`],[`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),st,tt.tagName,rt,ht))},nt.prototype.renderTextNode=function(tt){var rt=this.c,ht=tt.nodeValue,st=tt.parentElement,pt='<span class="text-node">',vt='</span><span class="selection"></span>';if(st&&ht.length<1e4){if(st.tagName==="STYLE")return rt("".concat(pt).concat((0,Be.default)(ht,"css",Je)).concat(vt));if(st.tagName==="SCRIPT")return rt("".concat(pt).concat((0,Be.default)(ht,"js",Je)).concat(vt))}return rt('"'.concat(pt).concat((0,Xe.default)((0,Ze.default)(ht,1e4,{separator:" ",ellipsis:"\u2026"}))).concat(vt,'"'))},nt.prototype.renderHtmlComment=function(tt){return this.c('<span class="html-comment">&lt;!-- '.concat((0,Xe.default)(tt),' --&gt;</span><span class="selection"></span>'))},nt}(re.default);function Ct(xt){var nt={tagName:"",attributes:[]};nt.tagName=xt.tagName.toLocaleLowerCase();var tt=[];return(0,ge.default)(xt.attributes,function(rt){var ht=rt.name,st=rt.value;tt.push({name:ht,value:st,isLink:bt(xt,ht)})}),nt.attributes=tt,nt}function bt(xt,nt){var tt=xt.tagName;return(tt==="SCRIPT"||tt==="IMAGE"||tt==="VIDEO"||tt==="AUDIO")&&nt==="src"||tt==="LINK"&&nt==="href"}q.default=dt,G.exports=dt,G.exports.default=dt},6370:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Se,Pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ne){Re.__proto__=Ne}||function(Re,Ne){for(var ze in Ne)Object.prototype.hasOwnProperty.call(Ne,ze)&&(Re[ze]=Ne[ze])},he(Se,Pe)},function(Se,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function Re(){this.constructor=Se}he(Se,Pe),Se.prototype=Pe===null?Object.create(Pe):(Re.prototype=Pe.prototype,new Re)}),te=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(1512)),xe=V(8759),re=te(V(3783)),ge=te(V(6329)),ye=te(V(4193)),we=te(V(5852)),ke=function(Se){function Pe(Re,Ne,ze){var Be=Ne.compName,Ze=(ze===void 0?{}:ze).theme,Xe=Ze===void 0?"light":Ze,qe=Se.call(this)||this;return qe.subComponents=[],qe.compName=Be,qe.c=(0,xe.classPrefix)(Be),qe.options={},qe.container=Re,qe.$container=(0,j.default)(Re),qe.$container.addClass(["luna-".concat(Be),qe.c("platform-".concat((0,xe.getPlatform)()))]),qe.on("optionChange",function(Je,dt,Ct){var bt=qe.c;Je==="theme"&&(qe.$container.rmClass(bt("theme-".concat(Ct))).addClass(bt("theme-".concat(dt))),(0,re.default)(qe.subComponents,function(xt){return xt.setOption("theme",dt)}))}),qe.setOption("theme",Xe),qe}return ce(Pe,Se),Pe.prototype.destroy=function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat((0,xe.getPlatform)()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Pe.prototype.setOption=function(Re,Ne){var ze=this,Be=this.options,Ze={};typeof Re=="string"?Ze[Re]=Ne:Ze=Re,(0,re.default)(Ze,function(Xe,qe){var Je=Be[qe];Be[qe]=Xe,ze.emit("optionChange",qe,Xe,Je)})},Pe.prototype.getOption=function(Re){return this.options[Re]},Pe.prototype.addSubComponent=function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)},Pe.prototype.removeSubComponent=function(Re){(0,we.default)(this.subComponents,function(Ne){return Ne===Re})},Pe.prototype.destroySubComponents=function(){(0,re.default)(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]},Pe.prototype.initOptions=function(Re,Ne){Ne===void 0&&(Ne={}),(0,ye.default)(Re,Ne),(0,ge.default)(this.options,Re)},Pe.prototype.find=function(Re){return this.$container.find(this.c(Re))},Pe}(Ee.default);q.default=ke},8759:function(G,q,V){var he=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.resetCanvasSize=q.getPlatform=q.pxToNum=q.executeAfterTransition=q.hasVerticalScrollbar=q.measuredScrollbarWidth=q.eventPage=q.eventClient=q.drag=q.classPrefix=void 0;var ce=he(V(2461)),te=he(V(4331)),Ee=he(V(5610)),j=he(V(7483)),xe=he(V(3990)),re=he(V(6341)),ge=he(V(3875)),ye=he(V(6954)),we=he(V(9585));function ke(ze,Be){for(var Ze=0,Xe=ze.length;Ze<Xe;Ze++){var qe=ze[Ze];Be(qe),qe.content&&ke(qe.content,Be)}}q.classPrefix=function(ze){var Be="luna-".concat(ze,"-");function Ze(Xe){return(0,ce.default)((0,te.default)(Xe).split(/\s+/),function(qe){return(0,re.default)(qe,Be)?qe:qe.replace(/[\w-]+/,function(Je){return"".concat(Be).concat(Je)})}).join(" ")}return function(Xe){if(/<[^>]*>/g.test(Xe))try{var qe=j.default.parse(Xe);return ke(qe,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Ze(Je.attrs.class))}),j.default.stringify(qe)}catch{return Ze(Xe)}return Ze(Xe)}};var Se,Pe="ontouchstart"in Ee.default,Re={start:"touchstart",move:"touchmove",end:"touchend"},Ne={start:"mousedown",move:"mousemove",end:"mouseup"};q.drag=function(ze){return Pe?Re[ze]:Ne[ze]},q.eventClient=function(ze,Be){var Ze=ze==="x"?"clientX":"clientY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.eventPage=function(ze,Be){var Ze=ze==="x"?"pageX":"pageY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.measuredScrollbarWidth=function(){if((0,xe.default)(Se))return Se;if(!document)return 16;var ze=document.createElement("div"),Be=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Be.setAttribute("style","height: 200px"),ze.appendChild(Be),document.body.appendChild(ze),Se=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),Se},q.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},q.executeAfterTransition=function(ze,Be){if((0,we.default)(ze))return Be();var Ze=function(Xe){Xe.target===ze&&(ze.removeEventListener("transitionend",Ze),Be())};ze.addEventListener("transitionend",Ze)},q.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},q.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},q.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},6093:function(G,q,V){var he,ce=this&&this.__extends||(he=function(we,ke){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Pe){Se.__proto__=Pe}||function(Se,Pe){for(var Re in Pe)Object.prototype.hasOwnProperty.call(Pe,Re)&&(Se[Re]=Pe[Re])},he(we,ke)},function(we,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Class extends value "+String(ke)+" is not a constructor or null");function Se(){this.constructor=we}he(we,ke),we.prototype=ke===null?Object.create(ke):(Se.prototype=ke.prototype,new Se)}),te=this&&this.__importDefault||function(we){return we&&we.__esModule?we:{default:we}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1512)),j=te(V(5229)),xe=te(V(2244)),re=te(V(8613)),ge=function(we){function ke(Se,Pe){Pe===void 0&&(Pe={});var Re=we.call(this,Se,{compName:"notification"},Pe)||this;return Re.notifications=[],Re.initOptions(Pe,{position:{x:"right",y:"bottom"},duration:2e3}),Re.initTpl(),Re}return ce(ke,we),ke.prototype.notify=function(Se,Pe){var Re=this;Pe===void 0&&(Pe={duration:this.options.duration});var Ne=new ye(this,Se);this.notifications.push(Ne),this.add(Ne),setTimeout(function(){return Re.remove(Ne.id)},Pe.duration)},ke.prototype.dismissAll=function(){for(var Se=this.notifications,Pe=Se[0];Pe;)this.remove(Pe.id),Pe=Se[0]},ke.prototype.add=function(Se){this.container.appendChild(Se.container)},ke.prototype.remove=function(Se){var Pe=this.notifications,Re=(0,xe.default)(Pe,function(ze){return ze.id===Se});if(Re){Re.destroy();var Ne=Pe.indexOf(Re);Pe.splice(Ne,1)}},ke.prototype.initTpl=function(){var Se=this.$container,Pe=this.options.position,Re=Pe.x,Ne=Pe.y,ze="flex-end",Be="flex-end";switch(Re){case"center":Be="center";break;case"left":Be="flex-start"}Ne==="top"&&(ze="flex-start"),Se.attr("style","justify-content: ".concat(ze,"; align-items: ").concat(Be))},ke}(te(V(5404)).default);q.default=ge;var ye=function(){function we(ke,Se){this.container=(0,re.default)("div"),this.$container=(0,Ee.default)(this.container),this.notification=ke,this.content=Se,this.id=(0,j.default)("luna-notification-"),this.$container.attr({id:this.id,class:ke.c("item ".concat(ke.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl()}return we.prototype.destroy=function(){this.$container.remove()},we.prototype.initTpl=function(){this.$container.html(this.notification.c('<div class="content">'.concat(this.content,"</div>")))},we}();G.exports=ge,G.exports.default=ge},5404:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Se,Pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ne){Re.__proto__=Ne}||function(Re,Ne){for(var ze in Ne)Object.prototype.hasOwnProperty.call(Ne,ze)&&(Re[ze]=Ne[ze])},he(Se,Pe)},function(Se,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function Re(){this.constructor=Se}he(Se,Pe),Se.prototype=Pe===null?Object.create(Pe):(Re.prototype=Pe.prototype,new Re)}),te=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(1512)),xe=V(164),re=te(V(3783)),ge=te(V(6329)),ye=te(V(4193)),we=te(V(5852)),ke=function(Se){function Pe(Re,Ne,ze){var Be=Ne.compName,Ze=(ze===void 0?{}:ze).theme,Xe=Ze===void 0?"light":Ze,qe=Se.call(this)||this;return qe.subComponents=[],qe.compName=Be,qe.c=(0,xe.classPrefix)(Be),qe.options={},qe.container=Re,qe.$container=(0,j.default)(Re),qe.$container.addClass(["luna-".concat(Be),qe.c("platform-".concat((0,xe.getPlatform)()))]),qe.on("optionChange",function(Je,dt,Ct){var bt=qe.c;Je==="theme"&&(qe.$container.rmClass(bt("theme-".concat(Ct))).addClass(bt("theme-".concat(dt))),(0,re.default)(qe.subComponents,function(xt){return xt.setOption("theme",dt)}))}),qe.setOption("theme",Xe),qe}return ce(Pe,Se),Pe.prototype.destroy=function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat((0,xe.getPlatform)()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Pe.prototype.setOption=function(Re,Ne){var ze=this,Be=this.options,Ze={};typeof Re=="string"?Ze[Re]=Ne:Ze=Re,(0,re.default)(Ze,function(Xe,qe){var Je=Be[qe];Be[qe]=Xe,ze.emit("optionChange",qe,Xe,Je)})},Pe.prototype.getOption=function(Re){return this.options[Re]},Pe.prototype.addSubComponent=function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)},Pe.prototype.removeSubComponent=function(Re){(0,we.default)(this.subComponents,function(Ne){return Ne===Re})},Pe.prototype.destroySubComponents=function(){(0,re.default)(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]},Pe.prototype.initOptions=function(Re,Ne){Ne===void 0&&(Ne={}),(0,ye.default)(Re,Ne),(0,ge.default)(this.options,Re)},Pe.prototype.find=function(Re){return this.$container.find(this.c(Re))},Pe}(Ee.default);q.default=ke},164:function(G,q,V){var he=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.resetCanvasSize=q.getPlatform=q.pxToNum=q.executeAfterTransition=q.hasVerticalScrollbar=q.measuredScrollbarWidth=q.eventClient=q.drag=q.classPrefix=void 0;var ce=he(V(2461)),te=he(V(4331)),Ee=he(V(5610)),j=he(V(7483)),xe=he(V(3990)),re=he(V(6341)),ge=he(V(3875)),ye=he(V(6954)),we=he(V(9585));function ke(ze,Be){for(var Ze=0,Xe=ze.length;Ze<Xe;Ze++){var qe=ze[Ze];Be(qe),qe.content&&ke(qe.content,Be)}}q.classPrefix=function(ze){var Be="luna-".concat(ze,"-");function Ze(Xe){return(0,ce.default)((0,te.default)(Xe).split(/\s+/),function(qe){return(0,re.default)(qe,Be)?qe:qe.replace(/[\w-]+/,function(Je){return"".concat(Be).concat(Je)})}).join(" ")}return function(Xe){if(/<[^>]*>/g.test(Xe))try{var qe=j.default.parse(Xe);return ke(qe,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Ze(Je.attrs.class))}),j.default.stringify(qe)}catch{return Ze(Xe)}return Ze(Xe)}};var Se,Pe="ontouchstart"in Ee.default,Re={start:"touchstart",move:"touchmove",end:"touchend"},Ne={start:"mousedown",move:"mousemove",end:"mouseup"};q.drag=function(ze){return Pe?Re[ze]:Ne[ze]},q.eventClient=function(ze,Be){var Ze=ze==="x"?"clientX":"clientY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.measuredScrollbarWidth=function(){if((0,xe.default)(Se))return Se;if(!document)return 16;var ze=document.createElement("div"),Be=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Be.setAttribute("style","height: 200px"),ze.appendChild(Be),document.body.appendChild(ze),Se=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),Se},q.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},q.executeAfterTransition=function(ze,Be){if((0,we.default)(ze))return Be();var Ze=function(Xe){Xe.target===ze&&(ze.removeEventListener("transitionend",Ze),Be())};ze.addEventListener("transitionend",Ze)},q.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},q.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},q.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},1717:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Ct,bt){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xt,nt){xt.__proto__=nt}||function(xt,nt){for(var tt in nt)Object.prototype.hasOwnProperty.call(nt,tt)&&(xt[tt]=nt[tt])},he(Ct,bt)},function(Ct,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Class extends value "+String(bt)+" is not a constructor or null");function xt(){this.constructor=Ct}he(Ct,bt),Ct.prototype=bt===null?Object.create(bt):(xt.prototype=bt.prototype,new xt)}),te=this&&this.__importDefault||function(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}};Object.defineProperty(q,"__esModule",{value:!0}),q.getObjAbstract=void 0;var Ee=te(V(1512)),j=te(V(6930)),xe=te(V(5166)),re=te(V(5229)),ge=te(V(3023)),ye=te(V(3875)),we=te(V(996)),ke=te(V(3783)),Se=te(V(9433)),Pe=te(V(3990)),Re=te(V(4696)),Ne=te(V(6768)),ze=te(V(2533)),Be=te(V(3063)),Ze=te(V(6339)),Xe=V(8629),qe=function(Ct){function bt(xt){var nt=Ct.call(this,xt,{compName:"object-viewer"})||this;return nt.onItemClick=function(tt){var rt=nt,ht=rt.map,st=rt.c,pt=(0,Ee.default)(tt.curTarget),vt=pt.data("object-id"),ut=pt.find("span").eq(0);if(!pt.data("first-level")&&(vt&&(pt.find("ul").html(nt.objToHtml(ht[vt],!1)),pt.rmAttr("data-object-id")),tt.stopImmediatePropagation(),ut.hasClass(st("expanded")))){var Ut=pt.find("ul").eq(0);ut.hasClass(st("collapsed"))?(ut.rmClass(st("collapsed")),Ut.show()):(ut.addClass(st("collapsed")),Ut.hide()),nt.emit("change")}},nt.bindEvent(),nt}return ce(bt,Ct),bt.prototype.set=function(xt){(0,Ne.default)(xt)&&(xt=JSON.parse(xt)),this.data={id:(0,re.default)("json"),enumerable:{0:xt}},this.map={},Je(this.map,this.data),this.render()},bt.prototype.destroy=function(){Ct.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},bt.prototype.objToHtml=function(xt,nt){var tt=this,rt="";return(0,ke.default)(["enumerable","unenumerable","symbol"],function(ht){if(xt[ht]){var st=(0,ze.default)(xt[ht]);(0,Ze.default)(st);for(var pt=0,vt=st.length;pt<vt;pt++){var ut=st[pt];rt+=tt.createEl(ut,xt[ht][ut],ht,nt)}}}),xt.proto&&(rt===""?rt=this.objToHtml(xt.proto):rt+=this.createEl("__proto__",xt.proto,"proto")),rt},bt.prototype.createEl=function(xt,nt,tt,rt){rt===void 0&&(rt=!1);var ht=this.c,st=typeof nt;if(nt===null)return"<li>".concat(zt(xt),'<span class="').concat(ht("null"),'">null</span></li>');if((0,Pe.default)(nt)||(0,Re.default)(nt))return"<li>".concat(zt(xt),'<span class="').concat(ht(st),'">').concat((0,Xe.encode)(nt),"</span></li>");if(nt.type==="RegExp"&&(st="regexp"),nt.type==="Number"&&(st="number"),nt.type==="Number"||nt.type==="RegExp")return"<li>".concat(zt(xt),'<span class="').concat(ht(st),'">').concat((0,Xe.encode)(nt.value),"</span></li>");if(nt.type==="Undefined"||nt.type==="Symbol")return"<li>".concat(zt(xt),'<span class="').concat(ht("special"),'">').concat((0,Be.default)(nt.type),"</span></li>");if(nt==="(...)")return"<li>".concat(zt(xt),'<span class="').concat(ht("special"),'">').concat(nt,"</span></li>");if((0,xe.default)(nt)){var pt=nt.id,vt=nt.reference,ut=dt(nt)||(0,ge.default)(st),Ut=rt?"":'<span class="'.concat(ht("expanded collapsed"),'"><span class="').concat(ht("icon icon-caret-right"),'"></span><span class="').concat(ht("icon icon-caret-down"),'"></span></span>'),at="<li ".concat(rt?'data-first-level="true"':""," ").concat('data-object-id="'+(vt||pt)+'"',">").concat(Ut).concat(zt(xt),'<span class="').concat(ht("open"),'">').concat(rt?"":ut,'</span><ul class="').concat(ht(st),'" ').concat(rt?"":'style="display:none"',">");return rt&&(at+=this.objToHtml(this.map[pt])),at+'</ul><span class="'.concat(ht("close"),'"></span></li>')}function zt(sn){if(rt||(0,xe.default)(nt)&&nt.jsonSplitArr)return"";var Mn=ht("key");return tt!=="unenumerable"&&tt!=="proto"&&tt!=="symbol"||(Mn=ht("key-lighter")),'<span class="'.concat(Mn,'">').concat((0,Xe.encode)(sn),"</span>: ")}return"<li>".concat(zt(xt),'<span class="').concat(ht(typeof nt),'">"').concat((0,Xe.encode)(nt),'"</span></li>')},bt.prototype.render=function(){var xt=this.map[this.data.id];this.$container.html(this.objToHtml(xt,!0))},bt.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},bt}(te(V(5198)).default);function Je(Ct,bt){var xt=bt.id;if(xt||xt===0){if(bt.type&&(0,j.default)(bt.type,"Array")&&bt.enumerable){var nt=function(pt,vt,ut){var Ut=[],at={};return(0,ke.default)(pt.enumerable,function(zt,sn){var Mn=(0,ye.default)(sn);(0,Se.default)(Mn)?at[sn]=zt:Ut[Mn]=zt}),Ut.enumerable=at,Ut.type=ut,Ut.id=vt,pt.unenumerable&&(Ut.unenumerable=pt.unenumerable),pt.symbol&&(Ut.symbol=pt.symbol),pt.proto&&(Ut.proto=pt.proto),Ut}(bt,xt,bt.type);nt.length>100&&(bt=function(pt){var vt=0,ut={};(0,ke.default)((0,we.default)(pt,100),function(at){var zt={},sn=vt;zt.type="["+sn,zt.enumerable={},(0,ke.default)(at,function(rn){zt.enumerable[vt]=rn,vt+=1});var Mn=vt-1;zt.type+=(Mn-sn>0?" \u2026 "+Mn:"")+"]",zt.id=(0,re.default)("json"),zt.jsonSplitArr=!0,ut[vt]=zt});var Ut={};return Ut.enumerable=ut,Ut.id=pt.id,Ut.type=pt.type,pt.unenumerable&&(Ut.unenumerable=pt.unenumerable),pt.symbol&&(Ut.symbol=pt.symbol),pt.proto&&(Ut.proto=pt.proto),Ut}(nt))}Ct[xt]=bt;var tt=[];(0,ke.default)(["enumerable","unenumerable","symbol"],function(pt){if(bt[pt])for(var vt in bt[pt])tt.push(bt[pt][vt])}),bt.proto&&tt.push(bt.proto);for(var rt=0,ht=tt.length;rt<ht;rt++){var st=tt[rt];(0,xe.default)(st)&&Je(Ct,st)}}}function dt(Ct){var bt=Ct.type,xt=Ct.value;if(bt)return bt==="Function"?(0,Xe.getFnAbstract)(xt):bt==="Array"&&Ct.unenumerable?"Array(".concat(Ct.unenumerable.length,")"):Ct.type}q.default=qe,q.getObjAbstract=dt},3465:function(G,q,V){var he=this&&this.__importDefault||function(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}};Object.defineProperty(q,"__esModule",{value:!0});var ce=he(V(6329)),te=function(){function Ee(){this.id=0,this.visited=[]}return Ee.prototype.set=function(j,xe){var re=this.visited,ge=this.id,ye={id:ge,val:j};return(0,ce.default)(ye,xe),re.push(ye),this.id++,ge},Ee.prototype.get=function(j){for(var xe=this.visited,re=0,ge=xe.length;re<ge;re++){var ye=xe[re];if(j===ye.val)return ye}return!1},Ee}();q.default=te},4030:function(G,q,V){var he,ce=this&&this.__extends||(he=function(ht,st){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pt,vt){pt.__proto__=vt}||function(pt,vt){for(var ut in vt)Object.prototype.hasOwnProperty.call(vt,ut)&&(pt[ut]=vt[ut])},he(ht,st)},function(ht,st){if(typeof st!="function"&&st!==null)throw new TypeError("Class extends value "+String(st)+" is not a constructor or null");function pt(){this.constructor=ht}he(ht,st),ht.prototype=st===null?Object.create(st):(pt.prototype=st.prototype,new pt)}),te=this&&this.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(q,"__esModule",{value:!0}),q.Static=void 0;var Ee=te(V(415)),j=te(V(3990)),xe=te(V(4696)),re=te(V(3063)),ge=te(V(5166)),ye=te(V(6472)),we=te(V(3023)),ke=te(V(2533)),Se=te(V(3783)),Pe=te(V(300)),Re=te(V(4321)),Ne=te(V(3085)),ze=te(V(1512)),Be=te(V(801)),Ze=te(V(1116)),Xe=te(V(5972)),qe=te(V(996)),Je=te(V(3367)),dt=te(V(1214)),Ct=te(V(6329)),bt=te(V(6339)),xt=te(V(3465)),nt=V(8629),tt=te(V(1717));q.Static=tt.default;var rt=function(ht){function st(pt,vt){vt===void 0&&(vt={});var ut=ht.call(this,pt,{compName:"object-viewer"})||this;return ut.onItemClick=function(Ut){var at=ut,zt=at.map,sn=at.c,Mn=(0,ze.default)(Ut.curTarget),rn=Mn.data("object-id"),on=Mn.find("span").eq(0);if(!Mn.data("first-level")&&(rn&&(Mn.find("ul").html(ut.objToHtml(zt[rn],!1)),Mn.rmAttr("data-object-id")),Ut.stopImmediatePropagation(),on.hasClass(sn("expanded")))){var Zt=Mn.find("ul").eq(0);on.hasClass(sn("collapsed"))?(on.rmClass(sn("collapsed")),Zt.show()):(on.addClass(sn("collapsed")),Zt.hide()),ut.emit("change")}},ut.initOptions(vt,{unenumerable:!1,accessGetter:!1}),ut.bindEvent(),ut}return ce(st,ht),st.prototype.set=function(pt){this.data=[pt],this.visitor=new xt.default,this.map={},this.render()},st.prototype.destroy=function(){ht.prototype.destroy.call(this),this.$container.off("click","li",this.onItemClick)},st.prototype.objToHtml=function(pt,vt){var ut=this,Ut=this.visitor,at=pt,zt=!1,sn=Ut.get(pt);sn&&sn.self&&(at=sn.self);var Mn="",rn=["enumerable"],on=(0,ke.default)(pt),Zt=[],Ot=[],Qt=[],un={};if(this.options.unenumerable&&!vt&&(rn.push("unenumerable"),rn.push("symbol"),Zt=(0,Be.default)((0,Ze.default)(pt,{prototype:!1,unenumerable:!0}),on),Ot=(0,Xe.default)((0,Ze.default)(pt,{prototype:!1,symbol:!0}),function(nn){return typeof nn=="symbol"})),(0,ye.default)(pt)&&pt.length>100){rn.unshift("virtual"),zt=!0;var yn=0,In={};(0,Se.default)((0,qe.default)(pt,100),function(nn){var xn=Object.create(null),En=yn,$n="["+En;(0,Se.default)(nn,function(vn){xn[yn]=vn,In[yn]=!0,yn++});var zn=yn-1;un[$n+=(zn-En>0?" \u2026 "+zn:"")+"]"]=xn}),Qt=(0,ke.default)(un),on=(0,Xe.default)(on,function(nn){return!In[nn]})}(0,Se.default)(rn,function(nn){var xn=[];xn=nn==="symbol"?Ot:nn==="unenumerable"?Zt:nn==="virtual"?Qt:on,zt||(0,bt.default)(xn);for(var En=0,$n=xn.length;En<$n;En++){var zn=(0,Je.default)(xn[En]),vn="",wn=Object.getOwnPropertyDescriptor(pt,zn),Sn=wn&&wn.get,Jn=wn&&wn.set;if(Sn&&!ut.options.accessGetter)vn="(...)";else try{vn=nn==="virtual"?un[zn]:at[zn],(0,Re.default)(vn)&&vn.catch(dt.default)}catch(tr){vn=tr instanceof Error?tr.message:(0,Je.default)(tr)}Mn+=ut.createEl(zn,pt,vn,nn,vt),Sn&&(Mn+=ut.createEl("get ".concat(zn),pt,wn.get,nn,vt)),Jn&&(Mn+=ut.createEl("set ".concat(zn),pt,wn.set,nn,vt))}});var It=(0,Ee.default)(pt);if(!vt&&It)if(Mn===""){var Rt=Ut.set(It,{self:pt});this.map[Rt]=It,Mn=this.objToHtml(It)}else Mn+=this.createEl("__proto__",at||pt,It,"proto");return Mn},st.prototype.createEl=function(pt,vt,ut,Ut,at){at===void 0&&(at=!1);var zt=this.visitor,sn=this.c,Mn=typeof ut,rn=(0,Ne.default)(ut,!1);if(Ut==="virtual"&&(rn=pt),ut===null)return"<li>".concat(In(pt),'<span class="').concat(sn("null"),'">null</span></li>');if((0,j.default)(ut)||(0,xe.default)(ut))return"<li>".concat(In(pt),'<span class="').concat(sn(Mn),'">').concat((0,nt.encode)(ut),"</span></li>");if(rn==="RegExp"&&(Mn="regexp"),rn==="Number"&&(Mn="number"),rn==="Number"||rn==="RegExp")return"<li>".concat(In(pt),'<span class="').concat(sn(Mn),'">').concat((0,nt.encode)(ut.value),"</span></li>");if(rn==="Undefined"||rn==="Symbol")return"<li>".concat(In(pt),'<span class="').concat(sn("special"),'">').concat((0,re.default)(rn),"</span></li>");if(ut==="(...)")return"<li>".concat(In(pt),'<span class="').concat(sn("special"),'">').concat(ut,"</span></li>");if((0,ge.default)(ut)){var on=zt.get(ut),Zt=void 0;if(on)Zt=on.id;else{var Ot={};Ut==="proto"&&(Ot.self=vt),Zt=zt.set(ut,Ot),this.map[Zt]=ut}var Qt=function(It,Rt){if(!!Rt)return Rt==="Function"?(0,nt.getFnAbstract)((0,Pe.default)(It)):Rt==="Array"?"Array(".concat(It.length,")"):Rt}(ut,rn)||(0,we.default)(Mn),un=at?"":'<span class="'.concat(sn("expanded collapsed"),'"><span class="').concat(sn("icon icon-caret-right"),'"></span><span class="').concat(sn("icon icon-caret-down"),'"></span></span>'),yn="<li ".concat(at?'data-first-level="true"':""," ").concat('data-object-id="'+Zt+'"',">").concat(un).concat(In(pt),'<span class="').concat(sn("open"),'">').concat(at?"":Qt,'</span><ul class="').concat(sn(Mn),'" ').concat(at?"":'style="display:none"',">");return at&&(yn+=this.objToHtml(ut)),yn+'</ul><span class="'.concat(sn("close"),'"></span></li>')}function In(It){if(at||(0,ge.default)(ut)&&Ut==="virtual")return"";var Rt=sn("key");return Ut!=="unenumerable"&&Ut!=="proto"&&Ut!=="symbol"||(Rt=sn("key-lighter")),'<span class="'.concat(Rt,'">').concat((0,nt.encode)(It),"</span>: ")}return"<li>".concat(In(pt),'<span class="').concat(sn(typeof ut),'">"').concat((0,nt.encode)(ut),'"</span></li>')},st.prototype.render=function(){this.$container.html(this.objToHtml(this.data,!0))},st.prototype.bindEvent=function(){this.$container.on("click","li",this.onItemClick)},st}(te(V(5198)).default);q.default=rt,G.exports=(0,Ct.default)(rt,q),G.exports.default=rt},8629:function(G,q,V){var he=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(q,"__esModule",{value:!0}),q.getFnAbstract=q.encode=void 0;var ce=he(V(3367)),te=he(V(4331)),Ee=he(V(8901));q.encode=function(xe){return(0,Ee.default)((0,ce.default)(xe)).replace(/\n/g,"\u21B5").replace(/\f|\r|\t/g,"")},q.getFnAbstract=function(xe){return xe.length>500&&(xe=xe.slice(0,500)+"..."),"\u0192 "+(0,te.default)(function(re){var ge=re.match(j);return ge?ge[0]:re}(xe).replace("function",""))};var j=/function(.*?)\((.*?)\)/},5198:function(G,q,V){var he,ce=this&&this.__extends||(he=function(Se,Pe){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,Ne){Re.__proto__=Ne}||function(Re,Ne){for(var ze in Ne)Object.prototype.hasOwnProperty.call(Ne,ze)&&(Re[ze]=Ne[ze])},he(Se,Pe)},function(Se,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function Re(){this.constructor=Se}he(Se,Pe),Se.prototype=Pe===null?Object.create(Pe):(Re.prototype=Pe.prototype,new Re)}),te=this&&this.__importDefault||function(Se){return Se&&Se.__esModule?Se:{default:Se}};Object.defineProperty(q,"__esModule",{value:!0});var Ee=te(V(1443)),j=te(V(1512)),xe=V(2702),re=te(V(3783)),ge=te(V(6329)),ye=te(V(4193)),we=te(V(5852)),ke=function(Se){function Pe(Re,Ne,ze){var Be=Ne.compName,Ze=(ze===void 0?{}:ze).theme,Xe=Ze===void 0?"light":Ze,qe=Se.call(this)||this;return qe.subComponents=[],qe.compName=Be,qe.c=(0,xe.classPrefix)(Be),qe.options={},qe.container=Re,qe.$container=(0,j.default)(Re),qe.$container.addClass(["luna-".concat(Be),qe.c("platform-".concat((0,xe.getPlatform)()))]),qe.on("optionChange",function(Je,dt,Ct){var bt=qe.c;Je==="theme"&&(qe.$container.rmClass(bt("theme-".concat(Ct))).addClass(bt("theme-".concat(dt))),(0,re.default)(qe.subComponents,function(xt){return xt.setOption("theme",dt)}))}),qe.setOption("theme",Xe),qe}return ce(Pe,Se),Pe.prototype.destroy=function(){this.destroySubComponents();var Re=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Re("platform-".concat((0,xe.getPlatform)()))).rmClass(Re("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},Pe.prototype.setOption=function(Re,Ne){var ze=this,Be=this.options,Ze={};typeof Re=="string"?Ze[Re]=Ne:Ze=Re,(0,re.default)(Ze,function(Xe,qe){var Je=Be[qe];Be[qe]=Xe,ze.emit("optionChange",qe,Xe,Je)})},Pe.prototype.getOption=function(Re){return this.options[Re]},Pe.prototype.addSubComponent=function(Re){Re.setOption("theme",this.options.theme),this.subComponents.push(Re)},Pe.prototype.removeSubComponent=function(Re){(0,we.default)(this.subComponents,function(Ne){return Ne===Re})},Pe.prototype.destroySubComponents=function(){(0,re.default)(this.subComponents,function(Re){return Re.destroy()}),this.subComponents=[]},Pe.prototype.initOptions=function(Re,Ne){Ne===void 0&&(Ne={}),(0,ye.default)(Re,Ne),(0,ge.default)(this.options,Re)},Pe.prototype.find=function(Re){return this.$container.find(this.c(Re))},Pe}(Ee.default);q.default=ke},2702:function(G,q,V){var he=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(q,"__esModule",{value:!0}),q.resetCanvasSize=q.getPlatform=q.pxToNum=q.executeAfterTransition=q.hasVerticalScrollbar=q.measuredScrollbarWidth=q.eventClient=q.drag=q.classPrefix=void 0;var ce=he(V(2461)),te=he(V(4331)),Ee=he(V(5610)),j=he(V(7483)),xe=he(V(3990)),re=he(V(6341)),ge=he(V(3875)),ye=he(V(6954)),we=he(V(9585));function ke(ze,Be){for(var Ze=0,Xe=ze.length;Ze<Xe;Ze++){var qe=ze[Ze];Be(qe),qe.content&&ke(qe.content,Be)}}q.classPrefix=function(ze){var Be="luna-".concat(ze,"-");function Ze(Xe){return(0,ce.default)((0,te.default)(Xe).split(/\s+/),function(qe){return(0,re.default)(qe,Be)?qe:qe.replace(/[\w-]+/,function(Je){return"".concat(Be).concat(Je)})}).join(" ")}return function(Xe){if(/<[^>]*>/g.test(Xe))try{var qe=j.default.parse(Xe);return ke(qe,function(Je){Je.attrs&&Je.attrs.class&&(Je.attrs.class=Ze(Je.attrs.class))}),j.default.stringify(qe)}catch{return Ze(Xe)}return Ze(Xe)}};var Se,Pe="ontouchstart"in Ee.default,Re={start:"touchstart",move:"touchmove",end:"touchend"},Ne={start:"mousedown",move:"mousemove",end:"mouseup"};q.drag=function(ze){return Pe?Re[ze]:Ne[ze]},q.eventClient=function(ze,Be){var Ze=ze==="x"?"clientX":"clientY";return Be[Ze]?Be[Ze]:Be.changedTouches?Be.changedTouches[0][Ze]:0},q.measuredScrollbarWidth=function(){if((0,xe.default)(Se))return Se;if(!document)return 16;var ze=document.createElement("div"),Be=document.createElement("div");return ze.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Be.setAttribute("style","height: 200px"),ze.appendChild(Be),document.body.appendChild(ze),Se=ze.offsetWidth-ze.clientWidth,document.body.removeChild(ze),Se},q.hasVerticalScrollbar=function(ze){return ze.scrollHeight>ze.offsetHeight},q.executeAfterTransition=function(ze,Be){if((0,we.default)(ze))return Be();var Ze=function(Xe){Xe.target===ze&&(ze.removeEventListener("transitionend",Ze),Be())};ze.addEventListener("transitionend",Ze)},q.pxToNum=function(ze){return(0,ge.default)(ze.replace("px",""))},q.getPlatform=function(){var ze=(0,ye.default)();return ze==="os x"?"mac":ze},q.resetCanvasSize=function(ze){ze.width=Math.round(ze.offsetWidth*window.devicePixelRatio),ze.height=Math.round(ze.offsetHeight*window.devicePixelRatio)}},4842:function(G,q,V){var he,ce;/*!
 * Unidragger v2.4.0
 * Draggable base class
 * MIT license
 */(function(te,Ee){he=[V(4704)],ce=function(j){return function(xe,re){function ge(){}var ye=ge.prototype=Object.create(re.prototype);ye.bindHandles=function(){this._bindHandles(!0)},ye.unbindHandles=function(){this._bindHandles(!1)},ye._bindHandles=function(Se){for(var Pe=(Se=Se===void 0||Se)?"addEventListener":"removeEventListener",Re=Se?this._touchActionValue:"",Ne=0;Ne<this.handles.length;Ne++){var ze=this.handles[Ne];this._bindStartEvent(ze,Se),ze[Pe]("click",this),xe.PointerEvent&&(ze.style.touchAction=Re)}},ye._touchActionValue="none",ye.pointerDown=function(Se,Pe){this.okayPointerDown(Se)&&(this.pointerDownPointer={pageX:Pe.pageX,pageY:Pe.pageY},Se.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(Se),this.emitEvent("pointerDown",[Se,Pe]))};var we={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},ke={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return ye.okayPointerDown=function(Se){var Pe=we[Se.target.nodeName],Re=ke[Se.target.type],Ne=!Pe||Re;return Ne||this._pointerReset(),Ne},ye.pointerDownBlur=function(){var Se=document.activeElement;Se&&Se.blur&&Se!=document.body&&Se.blur()},ye.pointerMove=function(Se,Pe){var Re=this._dragPointerMove(Se,Pe);this.emitEvent("pointerMove",[Se,Pe,Re]),this._dragMove(Se,Pe,Re)},ye._dragPointerMove=function(Se,Pe){var Re={x:Pe.pageX-this.pointerDownPointer.pageX,y:Pe.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(Re)&&this._dragStart(Se,Pe),Re},ye.hasDragStarted=function(Se){return Math.abs(Se.x)>3||Math.abs(Se.y)>3},ye.pointerUp=function(Se,Pe){this.emitEvent("pointerUp",[Se,Pe]),this._dragPointerUp(Se,Pe)},ye._dragPointerUp=function(Se,Pe){this.isDragging?this._dragEnd(Se,Pe):this._staticClick(Se,Pe)},ye._dragStart=function(Se,Pe){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(Se,Pe)},ye.dragStart=function(Se,Pe){this.emitEvent("dragStart",[Se,Pe])},ye._dragMove=function(Se,Pe,Re){this.isDragging&&this.dragMove(Se,Pe,Re)},ye.dragMove=function(Se,Pe,Re){Se.preventDefault(),this.emitEvent("dragMove",[Se,Pe,Re])},ye._dragEnd=function(Se,Pe){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(Se,Pe)},ye.dragEnd=function(Se,Pe){this.emitEvent("dragEnd",[Se,Pe])},ye.onclick=function(Se){this.isPreventingClicks&&Se.preventDefault()},ye._staticClick=function(Se,Pe){this.isIgnoringMouseUp&&Se.type=="mouseup"||(this.staticClick(Se,Pe),Se.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},ye.staticClick=function(Se,Pe){this.emitEvent("staticClick",[Se,Pe])},ge.getPointerPoint=re.getPointerPoint,ge}(te,j)}.apply(q,he),ce===void 0||(G.exports=ce)})(window)},4704:function(G,q,V){var he,ce;/*!
 * Unipointer v2.4.0
 * base class for doing one thing with pointer event
 * MIT license
 */(function(te,Ee){he=[V(7158)],ce=function(j){return function(xe,re){function ge(){}function ye(){}var we=ye.prototype=Object.create(re.prototype);we.bindStartEvent=function(Se){this._bindStartEvent(Se,!0)},we.unbindStartEvent=function(Se){this._bindStartEvent(Se,!1)},we._bindStartEvent=function(Se,Pe){var Re=(Pe=Pe===void 0||Pe)?"addEventListener":"removeEventListener",Ne="mousedown";"ontouchstart"in xe?Ne="touchstart":xe.PointerEvent&&(Ne="pointerdown"),Se[Re](Ne,this)},we.handleEvent=function(Se){var Pe="on"+Se.type;this[Pe]&&this[Pe](Se)},we.getTouch=function(Se){for(var Pe=0;Pe<Se.length;Pe++){var Re=Se[Pe];if(Re.identifier==this.pointerIdentifier)return Re}},we.onmousedown=function(Se){var Pe=Se.button;Pe&&Pe!==0&&Pe!==1||this._pointerDown(Se,Se)},we.ontouchstart=function(Se){this._pointerDown(Se,Se.changedTouches[0])},we.onpointerdown=function(Se){this._pointerDown(Se,Se)},we._pointerDown=function(Se,Pe){Se.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=Pe.pointerId!==void 0?Pe.pointerId:Pe.identifier,this.pointerDown(Se,Pe))},we.pointerDown=function(Se,Pe){this._bindPostStartEvents(Se),this.emitEvent("pointerDown",[Se,Pe])};var ke={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return we._bindPostStartEvents=function(Se){if(Se){var Pe=ke[Se.type];Pe.forEach(function(Re){xe.addEventListener(Re,this)},this),this._boundPointerEvents=Pe}},we._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(Se){xe.removeEventListener(Se,this)},this),delete this._boundPointerEvents)},we.onmousemove=function(Se){this._pointerMove(Se,Se)},we.onpointermove=function(Se){Se.pointerId==this.pointerIdentifier&&this._pointerMove(Se,Se)},we.ontouchmove=function(Se){var Pe=this.getTouch(Se.changedTouches);Pe&&this._pointerMove(Se,Pe)},we._pointerMove=function(Se,Pe){this.pointerMove(Se,Pe)},we.pointerMove=function(Se,Pe){this.emitEvent("pointerMove",[Se,Pe])},we.onmouseup=function(Se){this._pointerUp(Se,Se)},we.onpointerup=function(Se){Se.pointerId==this.pointerIdentifier&&this._pointerUp(Se,Se)},we.ontouchend=function(Se){var Pe=this.getTouch(Se.changedTouches);Pe&&this._pointerUp(Se,Pe)},we._pointerUp=function(Se,Pe){this._pointerDone(),this.pointerUp(Se,Pe)},we.pointerUp=function(Se,Pe){this.emitEvent("pointerUp",[Se,Pe])},we._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},we._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},we.pointerDone=ge,we.onpointercancel=function(Se){Se.pointerId==this.pointerIdentifier&&this._pointerCancel(Se,Se)},we.ontouchcancel=function(Se){var Pe=this.getTouch(Se.changedTouches);Pe&&this._pointerCancel(Se,Pe)},we._pointerCancel=function(Se,Pe){this._pointerDone(),this.pointerCancel(Se,Pe)},we.pointerCancel=function(Se,Pe){this.emitEvent("pointerCancel",[Se,Pe])},ye.getPointerPoint=function(Se){return{x:Se.pageX,y:Se.pageY}},ye}(te,j)}.apply(q,he),ce===void 0||(G.exports=ce)})(window)},8138:function(G,q,V){G.exports=V(2895).default}},__webpack_module_cache__={};function __webpack_require__(G){var q=__webpack_module_cache__[G];if(q!==void 0)return q.exports;var V=__webpack_module_cache__[G]={id:G,exports:{}};return __webpack_modules__[G].call(V.exports,V,V.exports,__webpack_require__),V.exports}__webpack_require__.n=function(G){var q=G&&G.__esModule?function(){return G.default}:function(){return G};return __webpack_require__.d(q,{a:q}),q},__webpack_require__.d=function(G,q){for(var V in q)__webpack_require__.o(q,V)&&!__webpack_require__.o(G,V)&&Object.defineProperty(G,V,{enumerable:!0,get:q[V]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(G,q){return Object.prototype.hasOwnProperty.call(G,q)},__webpack_require__.r=function(G){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(8138);return __webpack_exports__}()})})(eruda$1);var eruda=getDefaultExportFromCjs(eruda$1.exports);export{Y as $,Ae as A,A as B,mapbox as C,render$e as D,toDisplayString as E,Fragment as F,render$1 as G,renderList as H,withDirectives as I,vModelText as J,resolveDynamicComponent as K,render$g as L,Me as M,render$8 as N,render$a as O,normalizeStyle as P,render$b as Q,RouterView as R,render$6 as S,Transition as T,render$f as U,reactive as V,computed as W,useVuelidate as X,render$7 as Y,render$2 as Z,render as _,openBlock as a,X as a0,W as a1,required as a2,email as a3,axios as a4,nextTick as a5,render$4 as a6,numeric as a7,minLength as a8,sameAs as a9,createStaticVNode as aa,Z as ab,render$c as ac,render$3 as ad,render$9 as ae,withAsyncContext as af,Suspense as ag,createRouter as ah,createWebHistory as ai,createApp as aj,createPinia as ak,eruda as al,createVNode as b,createElementBlock as c,defineStore as d,unref as e,oe as f,createBaseVNode as g,render$d as h,fe as i,je as j,isRef as k,render$5 as l,createTextVNode as m,n,onMounted as o,createBlock as p,me as q,ref as r,createCommentVNode as s,pe as t,useRouter as u,v,withCtx as w,ve as x,normalizeClass as y,fe$1 as z};
